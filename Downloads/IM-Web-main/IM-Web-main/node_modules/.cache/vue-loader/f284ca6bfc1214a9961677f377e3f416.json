{"remainingRequest":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\admin\\visitor.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\softwareDevelopment\\IM-Web\\src\\views\\admin\\visitor.vue","mtime":1649921951456},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649921788008},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":1649921788503},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649921788008},{"path":"D:\\project\\softwareDevelopment\\IM-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":1649921789185}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dictTotal: 0,\r\n      dictCurrentPage: 1,\r\n      dictPageSize: 10,\r\n      tableData: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initData()\r\n  },\r\n  methods: {\r\n    initData() {\r\n      // this.dictTotal = this.tableData.length\r\n      this.$http({\r\n        url: \"/customer/getCustomerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n\r\n        })\r\n      }).then(res => {\r\n        // console.log(res.data.data);\r\n        this.dictTotal = res.data.data.length;\r\n        this.tableData=res.data.data\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    ban(row) {\r\n      var formName=row\r\n      if(formName.available==1||formName.available=='') {\r\n        formName.available = 2\r\n        console.log(formName)\r\n        console.log(formName)\r\n        this.$http({\r\n          url: \"/customer/updateCustomer\",\r\n          method: \"post\",\r\n          crossdomain: true,\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(formName)\r\n        }).then(res => {\r\n          alert(\"禁用成功\")\r\n          this.initData();\r\n        }).catch(err => {\r\n          console.log(err.data)\r\n        });\r\n      }else if(formName.available==2){\r\n        formName.available = 1\r\n        console.log(formName)\r\n        console.log(formName)\r\n        this.$http({\r\n          url: \"/customer/updateCustomer\",\r\n          method: \"post\",\r\n          crossdomain: true,\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(formName)\r\n        }).then(res => {\r\n          alert(\"启用成功\")\r\n          this.initData();\r\n        }).catch(err => {\r\n          console.log(err.data)\r\n        });\r\n      }\r\n    },\r\n    stateFormat(row, column) {\r\n      // console.log('ces')\r\n      // if (row.actor === 1) {\r\n      //   return '投稿人'\r\n      // } else if (row.actor === 2) {\r\n      //   return '审稿人'\r\n      // } else {\r\n      //   return '管理员'\r\n      // }\r\n    },\r\n    // 设置表头颜色\r\n    headClass() {\r\n      return 'background:#e1e9f4;'\r\n    },\r\n    // 实时监听查询内容，更新列表\r\n    onChange(e) {\r\n      const { value } = e.target\r\n      console.log('检测到变化' + value)\r\n      this.$http({\r\n        url: \"/customer/getCustomerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          \"trueName\": value,\r\n        })\r\n      }).then(res => {\r\n        console.log(res.data.data);\r\n        this.dictTotal = res.data.data.length;\r\n        this.tableData=res.data.data\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    }\r\n\r\n  }\r\n}\r\n",{"version":3,"sources":["visitor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"visitor.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n  <div class=\"page\">\r\n    <div class=\"search\">\r\n      搜索名字\r\n      <div class=\"item\">\r\n        <input type=\"text\" style=\"\" placeholder=\"输入名字进行搜索\" @change=\"onChange\"></div>\r\n    </div>\r\n    <div class=\"table\">\r\n      <el-table :data=\"tableData.slice((dictCurrentPage-1)*dictPageSize,dictCurrentPage*dictPageSize)\" style=\"overflow:auto;width:100%;\" height=\"90%\" :header-cell-style=\"headClass\">\r\n        <!--      <el-table-column prop=\"id\" label=\"编号\" width=\"100px\" />-->\r\n        <el-table-column prop=\"trueName\" label=\"姓名\" width=\"120px\" fixed />\r\n        <el-table-column prop=\"gender\" label=\"性别\" width=\"50px\"/>\r\n        <el-table-column prop=\"registerTime\" label=\"更新时间\" width=\"200px\" align=\"center\"/>\r\n        <el-table-column prop=\"phone\" label=\"手机号码\" width=\"200px\"/>\r\n        <el-table-column prop=\"emergencyName\" label=\"紧急联系人\" width=\"220px\"/>\r\n        <el-table-column prop=\"emergencyNumber\" label=\"紧急联系人电话\" align=\"center\"/>\r\n        <el-table-column header-align=\"center\" align=\"center\" prop=\"operate\" label=\"操作\" width=\"100px\" fixed=\"right\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              v-if=\"scope.row.available==1||scope.row.available==''\"\r\n              size=\"medium\"\r\n              style=\"background-color: #b1c0d0\"\r\n              @click=\"ban(scope.row)\"\r\n            >禁用\r\n            </el-button>\r\n            <el-button\r\n              v-if=\"scope.row.available==2\"\r\n              size=\"medium\"\r\n              style=\"background-color: #b1c0d0\"\r\n              @click=\"ban(scope.row)\"\r\n            >启用\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        class=\"fy\"\r\n        layout=\"sizes, prev, pager, next, total\"\r\n        :current-page.sync=\"dictCurrentPage\"\r\n        :total=\"dictTotal\"\r\n        background\r\n        :page-sizes=\"[10, 20, 30, 40]\"\r\n        :page-size.sync=\"dictPageSize\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      dictTotal: 0,\r\n      dictCurrentPage: 1,\r\n      dictPageSize: 10,\r\n      tableData: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initData()\r\n  },\r\n  methods: {\r\n    initData() {\r\n      // this.dictTotal = this.tableData.length\r\n      this.$http({\r\n        url: \"/customer/getCustomerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n\r\n        })\r\n      }).then(res => {\r\n        // console.log(res.data.data);\r\n        this.dictTotal = res.data.data.length;\r\n        this.tableData=res.data.data\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    },\r\n    ban(row) {\r\n      var formName=row\r\n      if(formName.available==1||formName.available=='') {\r\n        formName.available = 2\r\n        console.log(formName)\r\n        console.log(formName)\r\n        this.$http({\r\n          url: \"/customer/updateCustomer\",\r\n          method: \"post\",\r\n          crossdomain: true,\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(formName)\r\n        }).then(res => {\r\n          alert(\"禁用成功\")\r\n          this.initData();\r\n        }).catch(err => {\r\n          console.log(err.data)\r\n        });\r\n      }else if(formName.available==2){\r\n        formName.available = 1\r\n        console.log(formName)\r\n        console.log(formName)\r\n        this.$http({\r\n          url: \"/customer/updateCustomer\",\r\n          method: \"post\",\r\n          crossdomain: true,\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(formName)\r\n        }).then(res => {\r\n          alert(\"启用成功\")\r\n          this.initData();\r\n        }).catch(err => {\r\n          console.log(err.data)\r\n        });\r\n      }\r\n    },\r\n    stateFormat(row, column) {\r\n      // console.log('ces')\r\n      // if (row.actor === 1) {\r\n      //   return '投稿人'\r\n      // } else if (row.actor === 2) {\r\n      //   return '审稿人'\r\n      // } else {\r\n      //   return '管理员'\r\n      // }\r\n    },\r\n    // 设置表头颜色\r\n    headClass() {\r\n      return 'background:#e1e9f4;'\r\n    },\r\n    // 实时监听查询内容，更新列表\r\n    onChange(e) {\r\n      const { value } = e.target\r\n      console.log('检测到变化' + value)\r\n      this.$http({\r\n        url: \"/customer/getCustomerList\",\r\n        method: \"post\",\r\n        crossdomain: true,\r\n        body:JSON.stringify({\r\n          \"trueName\": value,\r\n        })\r\n      }).then(res => {\r\n        console.log(res.data.data);\r\n        this.dictTotal = res.data.data.length;\r\n        this.tableData=res.data.data\r\n      }).catch(err => {\r\n        console.log(err.data)\r\n      });\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\ninput[type=\"text\"],#btn1,#btn2{\r\n  box-sizing: border-box;\r\n  text-align:left;\r\n  font-size:1em;\r\n  height:2.5em;\r\n  border-radius:4px;\r\n  border:1px solid #c8cccf;\r\n  color:#6a6f77;\r\n  -web-kit-appearance:none;\r\n  -moz-appearance: none;\r\n  display:block;\r\n  outline:0;\r\n  padding:0 1em;\r\n  text-decoration:none;\r\n  width:20%;\r\n}\r\ninput[type=\"text\"]:focus{\r\n  border:1px solid #5498e5;\r\n}\r\n.page {\r\n  height: 95%;\r\n  position: relative;\r\n  margin-top: 20px;\r\n  .search{\r\n    margin-left: 1%;\r\n    text-align: left;\r\n    .item{\r\n        margin-top: 10px;\r\n        margin-bottom: 10px;\r\n      }\r\n    }\r\n  .table{\r\n    width: 98%;\r\n    margin: 0 auto;\r\n    height: 88%;\r\n    .fy {\r\n      height: 10%;\r\n      position: absolute;\r\n      margin-top: 20px;\r\n      right: 10px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}