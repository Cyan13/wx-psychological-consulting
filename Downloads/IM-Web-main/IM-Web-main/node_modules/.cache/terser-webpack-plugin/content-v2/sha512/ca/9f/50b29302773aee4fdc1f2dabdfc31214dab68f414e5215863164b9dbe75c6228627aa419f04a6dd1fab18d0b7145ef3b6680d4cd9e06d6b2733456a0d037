{"map":"{\"version\":3,\"sources\":[\"vendors~app.a82064bc2a9f8d1e7a90.hot-update.js\"],\"names\":[\"webpackHotUpdate\",\"./node_modules/tim-js-sdk/tim-js-friendship.js\",\"module\",\"exports\",\"__webpack_require__\",\"eval\",\"./node_modules/tim-js-sdk/tim-js.js\"],\"mappings\":\"AAAAA,iBAAiB,cAAc,CAEzBC;;;;8BAKA,SAAUC,OAAQC,QAASC,qBAEjC,aACAC,KAAK,u1hxCAICC;;;;8BAKA,SAAUJ,OAAQC,QAASC,qBAEjC,aACAC,KAAK\"}","code":"webpackHotUpdate(\"vendors~app\",{\"./node_modules/tim-js-sdk/tim-js-friendship.js\":\n/*!******************************************************!*\\\n  !*** ./node_modules/tim-js-sdk/tim-js-friendship.js ***!\n  \\******************************************************/\n/*! no static exports found */function(module,exports,__webpack_require__){\"use strict\";eval('/* WEBPACK VAR INJECTION */(function(global) {!function(e,t){ true?module.exports=t():undefined}(this,(function(){var e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=function(e){return e&&e.Math==Math&&e},o=n(\"object\"==typeof globalThis&&globalThis)||n(\"object\"==typeof window&&window)||n(\"object\"==typeof self&&self)||n(\"object\"==typeof e&&e)||Function(\"return this\")(),r=function(e){try{return!!e()}catch(t){return!0}},a=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,u={f:i&&!s.call({1:2},1)?function(e){var t=i(this,e);return!!t&&t.enumerable}:s},c=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},l={}.toString,d=function(e){return l.call(e).slice(8,-1)},p=\"\".split,g=r((function(){return!Object(\"z\").propertyIsEnumerable(0)}))?function(e){return\"String\"==d(e)?p.call(e,\"\"):Object(e)}:Object,h=function(e){if(null==e)throw TypeError(\"Can\\'t call method on \"+e);return e},f=function(e){return g(h(e))},_=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e},m=function(e,t){if(!_(e))return e;var n,o;if(t&&\"function\"==typeof(n=e.toString)&&!_(o=n.call(e)))return o;if(\"function\"==typeof(n=e.valueOf)&&!_(o=n.call(e)))return o;if(!t&&\"function\"==typeof(n=e.toString)&&!_(o=n.call(e)))return o;throw TypeError(\"Can\\'t convert object to primitive value\")},v={}.hasOwnProperty,M=function(e,t){return v.call(e,t)},y=o.document,I=_(y)&&_(y.createElement),E=function(e){return I?y.createElement(e):{}},T=!a&&!r((function(){return 7!=Object.defineProperty(E(\"div\"),\"a\",{get:function(){return 7}}).a})),A=Object.getOwnPropertyDescriptor,S={f:a?A:function(e,t){if(e=f(e),t=m(t,!0),T)try{return A(e,t)}catch(n){}if(M(e,t))return c(!u.f.call(e,t),e[t])}},D=function(e){if(!_(e))throw TypeError(String(e)+\" is not an object\");return e},N=Object.defineProperty,C={f:a?N:function(e,t,n){if(D(e),t=m(t,!0),D(n),T)try{return N(e,t,n)}catch(o){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported\");return\"value\"in n&&(e[t]=n.value),e}},k=a?function(e,t,n){return C.f(e,t,c(1,n))}:function(e,t,n){return e[t]=n,e},L=function(e,t){try{k(o,e,t)}catch(n){o[e]=t}return t},R=o[\"__core-js_shared__\"]||L(\"__core-js_shared__\",{}),O=Function.toString;\"function\"!=typeof R.inspectSource&&(R.inspectSource=function(e){return O.call(e)});var G,b,w,P=R.inspectSource,U=o.WeakMap,F=\"function\"==typeof U&&/native code/.test(P(U)),q=t((function(e){(e.exports=function(e,t){return R[e]||(R[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:\"3.6.4\",mode:\"global\",copyright:\"© 2020 Denis Pushkarev (zloirock.ru)\"})})),x=0,V=Math.random(),K=function(e){return\"Symbol(\"+String(void 0===e?\"\":e)+\")_\"+(++x+V).toString(36)},B=q(\"keys\"),H=function(e){return B[e]||(B[e]=K(e))},j={},W=o.WeakMap;if(F){var Y=new W,$=Y.get,z=Y.has,J=Y.set;G=function(e,t){return J.call(Y,e,t),t},b=function(e){return $.call(Y,e)||{}},w=function(e){return z.call(Y,e)}}else{var X=H(\"state\");j[X]=!0,G=function(e,t){return k(e,X,t),t},b=function(e){return M(e,X)?e[X]:{}},w=function(e){return M(e,X)}}var Q={set:G,get:b,has:w,enforce:function(e){return w(e)?b(e):G(e,{})},getterFor:function(e){return function(t){var n;if(!_(t)||(n=b(t)).type!==e)throw TypeError(\"Incompatible receiver, \"+e+\" required\");return n}}},Z=t((function(e){var t=Q.get,n=Q.enforce,r=String(String).split(\"String\");(e.exports=function(e,t,a,s){var i=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,c=!!s&&!!s.noTargetGet;\"function\"==typeof a&&(\"string\"!=typeof t||M(a,\"name\")||k(a,\"name\",t),n(a).source=r.join(\"string\"==typeof t?t:\"\")),e!==o?(i?!c&&e[t]&&(u=!0):delete e[t],u?e[t]=a:k(e,t,a)):u?e[t]=a:L(t,a)})(Function.prototype,\"toString\",(function(){return\"function\"==typeof this&&t(this).source||P(this)}))})),ee=o,te=function(e){return\"function\"==typeof e?e:void 0},ne=function(e,t){return arguments.length<2?te(ee[e])||te(o[e]):ee[e]&&ee[e][t]||o[e]&&o[e][t]},oe=Math.ceil,re=Math.floor,ae=function(e){return isNaN(e=+e)?0:(e>0?re:oe)(e)},se=Math.min,ie=function(e){return e>0?se(ae(e),9007199254740991):0},ue=Math.max,ce=Math.min,le=function(e,t){var n=ae(e);return n<0?ue(n+t,0):ce(n,t)},de=function(e){return function(t,n,o){var r,a=f(t),s=ie(a.length),i=le(o,s);if(e&&n!=n){for(;s>i;)if((r=a[i++])!=r)return!0}else for(;s>i;i++)if((e||i in a)&&a[i]===n)return e||i||0;return!e&&-1}},pe={includes:de(!0),indexOf:de(!1)},ge=pe.indexOf,he=function(e,t){var n,o=f(e),r=0,a=[];for(n in o)!M(j,n)&&M(o,n)&&a.push(n);for(;t.length>r;)M(o,n=t[r++])&&(~ge(a,n)||a.push(n));return a},fe=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"],_e=fe.concat(\"length\",\"prototype\"),me={f:Object.getOwnPropertyNames||function(e){return he(e,_e)}},ve={f:Object.getOwnPropertySymbols},Me=ne(\"Reflect\",\"ownKeys\")||function(e){var t=me.f(D(e)),n=ve.f;return n?t.concat(n(e)):t},ye=function(e,t){for(var n=Me(t),o=C.f,r=S.f,a=0;a<n.length;a++){var s=n[a];M(e,s)||o(e,s,r(t,s))}},Ie=/#|\\\\.prototype\\\\./,Ee=function(e,t){var n=Ae[Te(e)];return n==De||n!=Se&&(\"function\"==typeof t?r(t):!!t)},Te=Ee.normalize=function(e){return String(e).replace(Ie,\".\").toLowerCase()},Ae=Ee.data={},Se=Ee.NATIVE=\"N\",De=Ee.POLYFILL=\"P\",Ne=Ee,Ce=S.f,ke=function(e,t){var n,r,a,s,i,u=e.target,c=e.global,l=e.stat;if(n=c?o:l?o[u]||L(u,{}):(o[u]||{}).prototype)for(r in t){if(s=t[r],a=e.noTargetGet?(i=Ce(n,r))&&i.value:n[r],!Ne(c?r:u+(l?\".\":\"#\")+r,e.forced)&&void 0!==a){if(typeof s==typeof a)continue;ye(s,a)}(e.sham||a&&a.sham)&&k(s,\"sham\",!0),Z(n,r,s,e)}},Le=function(e){if(\"function\"!=typeof e)throw TypeError(String(e)+\" is not a function\");return e},Re=function(e,t,n){if(Le(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}},Oe=function(e){return Object(h(e))},Ge=Array.isArray||function(e){return\"Array\"==d(e)},be=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())})),we=be&&!Symbol.sham&&\"symbol\"==typeof Symbol.iterator,Pe=q(\"wks\"),Ue=o.Symbol,Fe=we?Ue:Ue&&Ue.withoutSetter||K,qe=function(e){return M(Pe,e)||(be&&M(Ue,e)?Pe[e]=Ue[e]:Pe[e]=Fe(\"Symbol.\"+e)),Pe[e]},xe=qe(\"species\"),Ve=function(e,t){var n;return Ge(e)&&(\"function\"!=typeof(n=e.constructor)||n!==Array&&!Ge(n.prototype)?_(n)&&null===(n=n[xe])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Ke=[].push,Be=function(e){var t=1==e,n=2==e,o=3==e,r=4==e,a=6==e,s=5==e||a;return function(i,u,c,l){for(var d,p,h=Oe(i),f=g(h),_=Re(u,c,3),m=ie(f.length),v=0,M=l||Ve,y=t?M(i,m):n?M(i,0):void 0;m>v;v++)if((s||v in f)&&(p=_(d=f[v],v,h),e))if(t)y[v]=p;else if(p)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:Ke.call(y,d)}else if(r)return!1;return a?-1:o||r?r:y}},He={forEach:Be(0),map:Be(1),filter:Be(2),some:Be(3),every:Be(4),find:Be(5),findIndex:Be(6)},je=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))},We=Object.defineProperty,Ye={},$e=function(e){throw e},ze=function(e,t){if(M(Ye,e))return Ye[e];t||(t={});var n=[][e],o=!!M(t,\"ACCESSORS\")&&t.ACCESSORS,s=M(t,0)?t[0]:$e,i=M(t,1)?t[1]:void 0;return Ye[e]=!!n&&!r((function(){if(o&&!a)return!0;var e={length:-1};o?We(e,1,{enumerable:!0,get:$e}):e[1]=1,n.call(e,s,i)}))},Je=He.forEach,Xe=je(\"forEach\"),Qe=ze(\"forEach\"),Ze=Xe&&Qe?[].forEach:function(e){return Je(this,e,arguments.length>1?arguments[1]:void 0)};ke({target:\"Array\",proto:!0,forced:[].forEach!=Ze},{forEach:Ze});var et=function(e,t,n,o){try{return o?t(D(n)[0],n[1]):t(n)}catch(a){var r=e.return;throw void 0!==r&&D(r.call(e)),a}},nt={},ot=qe(\"iterator\"),rt=Array.prototype,at=function(e){return void 0!==e&&(nt.Array===e||rt[ot]===e)},st=function(e,t,n){var o=m(t);o in e?C.f(e,o,c(0,n)):e[o]=n},it={};it[qe(\"toStringTag\")]=\"z\";var ut=\"[object z]\"===String(it),ct=qe(\"toStringTag\"),lt=\"Arguments\"==d(function(){return arguments}()),dt=ut?d:function(e){var t,n,o;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),ct))?n:lt?d(t):\"Object\"==(o=d(t))&&\"function\"==typeof t.callee?\"Arguments\":o},pt=qe(\"iterator\"),gt=function(e){if(null!=e)return e[pt]||e[\"@@iterator\"]||nt[dt(e)]},ht=function(e){var t,n,o,r,a,s,i=Oe(e),u=\"function\"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,d=void 0!==l,p=gt(i),g=0;if(d&&(l=Re(l,c>2?arguments[2]:void 0,2)),null==p||u==Array&&at(p))for(n=new u(t=ie(i.length));t>g;g++)s=d?l(i[g],g):i[g],st(n,g,s);else for(a=(r=p.call(i)).next,n=new u;!(o=a.call(r)).done;g++)s=d?et(r,l,[o.value,g],!0):o.value,st(n,g,s);return n.length=g,n},ft=qe(\"iterator\"),_t=!1;try{var mt=0,vt={next:function(){return{done:!!mt++}},return:function(){_t=!0}};vt[ft]=function(){return this},Array.from(vt,(function(){throw 2}))}catch(zI){}var Mt=function(e,t){if(!t&&!_t)return!1;var n=!1;try{var o={};o[ft]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(zI){}return n},yt=!Mt((function(e){Array.from(e)}));ke({target:\"Array\",stat:!0,forced:yt},{from:ht});var It,Et=Object.keys||function(e){return he(e,fe)},Tt=a?Object.defineProperties:function(e,t){D(e);for(var n,o=Et(t),r=o.length,a=0;r>a;)C.f(e,n=o[a++],t[n]);return e},At=ne(\"document\",\"documentElement\"),St=H(\"IE_PROTO\"),Dt=function(){},Nt=function(e){return\"<script>\"+e+\"<\\\\/script>\"},Ct=function(){try{It=document.domain&&new ActiveXObject(\"htmlfile\")}catch(zI){}var e,t;Ct=It?function(e){e.write(Nt(\"\")),e.close();var t=e.parentWindow.Object;return e=null,t}(It):((t=E(\"iframe\")).style.display=\"none\",At.appendChild(t),t.src=String(\"javascript:\"),(e=t.contentWindow.document).open(),e.write(Nt(\"document.F=Object\")),e.close(),e.F);for(var n=fe.length;n--;)delete Ct.prototype[fe[n]];return Ct()};j[St]=!0;var kt=Object.create||function(e,t){var n;return null!==e?(Dt.prototype=D(e),n=new Dt,Dt.prototype=null,n[St]=e):n=Ct(),void 0===t?n:Tt(n,t)};ke({target:\"Object\",stat:!0,sham:!a},{create:kt});var Lt=r((function(){Et(1)}));ke({target:\"Object\",stat:!0,forced:Lt},{keys:function(e){return Et(Oe(e))}});var Rt=\"\\\\t\\\\n\\\\v\\\\f\\\\r                　\\\\u2028\\\\u2029\\\\ufeff\",Ot=\"[\"+Rt+\"]\",Gt=RegExp(\"^\"+Ot+Ot+\"*\"),bt=RegExp(Ot+Ot+\"*$\"),wt=function(e){return function(t){var n=String(h(t));return 1&e&&(n=n.replace(Gt,\"\")),2&e&&(n=n.replace(bt,\"\")),n}},Pt={start:wt(1),end:wt(2),trim:wt(3)},Ut=Pt.trim,Ft=o.parseInt,qt=/^[+-]?0[Xx]/,xt=8!==Ft(Rt+\"08\")||22!==Ft(Rt+\"0x16\")?function(e,t){var n=Ut(String(e));return Ft(n,t>>>0||(qt.test(n)?16:10))}:Ft;ke({global:!0,forced:parseInt!=xt},{parseInt:xt});var Vt,Kt,Bt,Ht=function(e){return function(t,n){var o,r,a=String(h(t)),s=ae(n),i=a.length;return s<0||s>=i?e?\"\":void 0:(o=a.charCodeAt(s))<55296||o>56319||s+1===i||(r=a.charCodeAt(s+1))<56320||r>57343?e?a.charAt(s):o:e?a.slice(s,s+2):r-56320+(o-55296<<10)+65536}},jt={codeAt:Ht(!1),charAt:Ht(!0)},Wt=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Yt=H(\"IE_PROTO\"),$t=Object.prototype,zt=Wt?Object.getPrototypeOf:function(e){return e=Oe(e),M(e,Yt)?e[Yt]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?$t:null},Jt=qe(\"iterator\"),Xt=!1;[].keys&&(\"next\"in(Bt=[].keys())?(Kt=zt(zt(Bt)))!==Object.prototype&&(Vt=Kt):Xt=!0),null==Vt&&(Vt={}),M(Vt,Jt)||k(Vt,Jt,(function(){return this}));var Qt={IteratorPrototype:Vt,BUGGY_SAFARI_ITERATORS:Xt},Zt=C.f,en=qe(\"toStringTag\"),tn=function(e,t,n){e&&!M(e=n?e:e.prototype,en)&&Zt(e,en,{configurable:!0,value:t})},nn=Qt.IteratorPrototype,on=function(){return this},rn=function(e,t,n){var o=t+\" Iterator\";return e.prototype=kt(nn,{next:c(1,n)}),tn(e,o,!1),nt[o]=on,e},an=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set).call(n,[]),t=n instanceof Array}catch(zI){}return function(n,o){return D(n),function(e){if(!_(e)&&null!==e)throw TypeError(\"Can\\'t set \"+String(e)+\" as a prototype\")}(o),t?e.call(n,o):n.__proto__=o,n}}():void 0),sn=Qt.IteratorPrototype,un=Qt.BUGGY_SAFARI_ITERATORS,cn=qe(\"iterator\"),ln=function(){return this},dn=function(e,t,n,o,r,a,s){rn(n,t,o);var i,u,c,l=function(e){if(e===r&&f)return f;if(!un&&e in g)return g[e];switch(e){case\"keys\":case\"values\":case\"entries\":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+\" Iterator\",p=!1,g=e.prototype,h=g[cn]||g[\"@@iterator\"]||r&&g[r],f=!un&&h||l(r),_=\"Array\"==t&&g.entries||h;if(_&&(i=zt(_.call(new e)),sn!==Object.prototype&&i.next&&(zt(i)!==sn&&(an?an(i,sn):\"function\"!=typeof i[cn]&&k(i,cn,ln)),tn(i,d,!0))),\"values\"==r&&h&&\"values\"!==h.name&&(p=!0,f=function(){return h.call(this)}),g[cn]!==f&&k(g,cn,f),nt[t]=f,r)if(u={values:l(\"values\"),keys:a?f:l(\"keys\"),entries:l(\"entries\")},s)for(c in u)(un||p||!(c in g))&&Z(g,c,u[c]);else ke({target:t,proto:!0,forced:un||p},u);return u},pn=jt.charAt,gn=Q.set,hn=Q.getterFor(\"String Iterator\");dn(String,\"String\",(function(e){gn(this,{type:\"String Iterator\",string:String(e),index:0})}),(function(){var e,t=hn(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=pn(n,o),t.index+=e.length,{value:e,done:!1})}));var fn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var _n in fn){var mn=o[_n],vn=mn&&mn.prototype;if(vn&&vn.forEach!==Ze)try{k(vn,\"forEach\",Ze)}catch(zI){vn.forEach=Ze}}function Mn(e){return(Mn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function yn(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function In(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function En(e,t,n){return t&&In(e.prototype,t),n&&In(e,n),e}function Tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){Tn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dn(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cn(e,t)}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kn(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ln(e,t,n){return(Ln=kn()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&Cn(r,n.prototype),r}).apply(null,arguments)}function Rn(e){var t=\"function\"==typeof Map?new Map:void 0;return(Rn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return Ln(e,arguments,Nn(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Cn(o,e)})(e)}function On(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gn(e){if(void 0===e)throw new ReferenceError(\"this hasn\\'t been initialised - super() hasn\\'t been called\");return e}function bn(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?Gn(e):t}function wn(e){return function(){var t,n=Nn(e);if(kn()){var o=Nn(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return bn(this,t)}}function Pn(e,t){return Fn(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(o=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(u){r=!0,a=u}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}return n}(e,t)||xn(e,t)||Kn()}function Un(e){return function(e){if(Array.isArray(e))return Vn(e)}(e)||qn(e)||xn(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Fn(e){if(Array.isArray(e))return e}function qn(e){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function xn(e,t){if(e){if(\"string\"==typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(e,t):void 0}}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Kn(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function Bn(e){if(\"undefined\"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=xn(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,r,a=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}var Hn,jn,Wn={SDK_READY:\"sdkStateReady\",SDK_NOT_READY:\"sdkStateNotReady\",SDK_DESTROY:\"sdkDestroy\",MESSAGE_RECEIVED:\"onMessageReceived\",MESSAGE_MODIFIED:\"onMessageModified\",MESSAGE_REVOKED:\"onMessageRevoked\",MESSAGE_READ_BY_PEER:\"onMessageReadByPeer\",MESSAGE_READ_RECEIPT_RECEIVED:\"onMessageReadReceiptReceived\",CONVERSATION_LIST_UPDATED:\"onConversationListUpdated\",GROUP_LIST_UPDATED:\"onGroupListUpdated\",GROUP_SYSTEM_NOTICE_RECEIVED:\"receiveGroupSystemNotice\",GROUP_ATTRIBUTES_UPDATED:\"groupAttributesUpdated\",PROFILE_UPDATED:\"onProfileUpdated\",BLACKLIST_UPDATED:\"blacklistUpdated\",FRIEND_LIST_UPDATED:\"onFriendListUpdated\",FRIEND_GROUP_LIST_UPDATED:\"onFriendGroupListUpdated\",FRIEND_APPLICATION_LIST_UPDATED:\"onFriendApplicationListUpdated\",KICKED_OUT:\"kickedOut\",ERROR:\"error\",NET_STATE_CHANGE:\"netStateChange\",SDK_RELOAD:\"sdkReload\"},Yn={MSG_TEXT:\"TIMTextElem\",MSG_IMAGE:\"TIMImageElem\",MSG_SOUND:\"TIMSoundElem\",MSG_AUDIO:\"TIMSoundElem\",MSG_FILE:\"TIMFileElem\",MSG_FACE:\"TIMFaceElem\",MSG_VIDEO:\"TIMVideoFileElem\",MSG_GEO:\"TIMLocationElem\",MSG_LOCATION:\"TIMLocationElem\",MSG_GRP_TIP:\"TIMGroupTipElem\",MSG_GRP_SYS_NOTICE:\"TIMGroupSystemNoticeElem\",MSG_CUSTOM:\"TIMCustomElem\",MSG_MERGER:\"TIMRelayElem\",MSG_PRIORITY_HIGH:\"High\",MSG_PRIORITY_NORMAL:\"Normal\",MSG_PRIORITY_LOW:\"Low\",MSG_PRIORITY_LOWEST:\"Lowest\",CONV_C2C:\"C2C\",CONV_GROUP:\"GROUP\",CONV_SYSTEM:\"@TIM#SYSTEM\",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,GRP_PRIVATE:\"Private\",GRP_WORK:\"Private\",GRP_PUBLIC:\"Public\",GRP_CHATROOM:\"ChatRoom\",GRP_MEETING:\"ChatRoom\",GRP_AVCHATROOM:\"AVChatRoom\",GRP_COMMUNITY:\"Community\",GRP_MBR_ROLE_OWNER:\"Owner\",GRP_MBR_ROLE_ADMIN:\"Admin\",GRP_MBR_ROLE_MEMBER:\"Member\",GRP_MBR_ROLE_CUSTOM:\"Custom\",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,MSG_REMIND_ACPT_AND_NOTE:\"AcceptAndNotify\",MSG_REMIND_ACPT_NOT_NOTE:\"AcceptNotNotify\",MSG_REMIND_DISCARD:\"Discard\",GENDER_UNKNOWN:\"Gender_Type_Unknown\",GENDER_FEMALE:\"Gender_Type_Female\",GENDER_MALE:\"Gender_Type_Male\",KICKED_OUT_MULT_ACCOUNT:\"multipleAccount\",KICKED_OUT_MULT_DEVICE:\"multipleDevice\",KICKED_OUT_USERSIG_EXPIRED:\"userSigExpired\",ALLOW_TYPE_ALLOW_ANY:\"AllowType_Type_AllowAny\",ALLOW_TYPE_NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_TYPE_DENY_ANY:\"AllowType_Type_DenyAny\",FORBID_TYPE_NONE:\"AdminForbid_Type_None\",FORBID_TYPE_SEND_OUT:\"AdminForbid_Type_SendOut\",JOIN_OPTIONS_FREE_ACCESS:\"FreeAccess\",JOIN_OPTIONS_NEED_PERMISSION:\"NeedPermission\",JOIN_OPTIONS_DISABLE_APPLY:\"DisableApply\",JOIN_STATUS_SUCCESS:\"JoinedSuccess\",JOIN_STATUS_ALREADY_IN_GROUP:\"AlreadyInGroup\",JOIN_STATUS_WAIT_APPROVAL:\"WaitAdminApproval\",GRP_PROFILE_OWNER_ID:\"ownerID\",GRP_PROFILE_CREATE_TIME:\"createTime\",GRP_PROFILE_LAST_INFO_TIME:\"lastInfoTime\",GRP_PROFILE_MEMBER_NUM:\"memberNum\",GRP_PROFILE_MAX_MEMBER_NUM:\"maxMemberNum\",GRP_PROFILE_JOIN_OPTION:\"joinOption\",GRP_PROFILE_INTRODUCTION:\"introduction\",GRP_PROFILE_NOTIFICATION:\"notification\",GRP_PROFILE_MUTE_ALL_MBRS:\"muteAllMembers\",SNS_ADD_TYPE_SINGLE:\"Add_Type_Single\",SNS_ADD_TYPE_BOTH:\"Add_Type_Both\",SNS_DELETE_TYPE_SINGLE:\"Delete_Type_Single\",SNS_DELETE_TYPE_BOTH:\"Delete_Type_Both\",SNS_APPLICATION_TYPE_BOTH:\"Pendency_Type_Both\",SNS_APPLICATION_SENT_TO_ME:\"Pendency_Type_ComeIn\",SNS_APPLICATION_SENT_BY_ME:\"Pendency_Type_SendOut\",SNS_APPLICATION_AGREE:\"Response_Action_Agree\",SNS_APPLICATION_AGREE_AND_ADD:\"Response_Action_AgreeAndAdd\",SNS_CHECK_TYPE_BOTH:\"CheckResult_Type_Both\",SNS_CHECK_TYPE_SINGLE:\"CheckResult_Type_Single\",SNS_TYPE_NO_RELATION:\"CheckResult_Type_NoRelation\",SNS_TYPE_A_WITH_B:\"CheckResult_Type_AWithB\",SNS_TYPE_B_WITH_A:\"CheckResult_Type_BWithA\",SNS_TYPE_BOTH_WAY:\"CheckResult_Type_BothWay\",NET_STATE_CONNECTED:\"connected\",NET_STATE_CONNECTING:\"connecting\",NET_STATE_DISCONNECTED:\"disconnected\",MSG_AT_ALL:\"__kImSDK_MesssageAtALL__\",READ_ALL_C2C_MSG:\"readAllC2CMessage\",READ_ALL_GROUP_MSG:\"readAllGroupMessage\",READ_ALL_MSG:\"readAllMessage\"},$n=ne(\"navigator\",\"userAgent\")||\"\",zn=o.process,Jn=zn&&zn.versions,Xn=Jn&&Jn.v8;Xn?jn=(Hn=Xn.split(\".\"))[0]+Hn[1]:$n&&(!(Hn=$n.match(/Edge\\\\/(\\\\d+)/))||Hn[1]>=74)&&(Hn=$n.match(/Chrome\\\\/(\\\\d+)/))&&(jn=Hn[1]);var Qn=jn&&+jn,Zn=qe(\"species\"),eo=function(e){return Qn>=51||!r((function(){var t=[];return(t.constructor={})[Zn]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},to=He.map,no=eo(\"map\"),oo=ze(\"map\");ke({target:\"Array\",proto:!0,forced:!no||!oo},{map:function(e){return to(this,e,arguments.length>1?arguments[1]:void 0)}});var ro=[].slice,ao={},so=function(e,t,n){if(!(t in ao)){for(var o=[],r=0;r<t;r++)o[r]=\"a[\"+r+\"]\";ao[t]=Function(\"C,a\",\"return new C(\"+o.join(\",\")+\")\")}return ao[t](e,n)},io=Function.bind||function(e){var t=Le(this),n=ro.call(arguments,1),o=function(){var r=n.concat(ro.call(arguments));return this instanceof o?so(t,r.length,r):t.apply(e,r)};return _(t.prototype)&&(o.prototype=t.prototype),o};ke({target:\"Function\",proto:!0},{bind:io});var uo=function(){function e(){yn(this,e),this.cache=[],this.options=null}return En(e,[{key:\"use\",value:function(e){if(\"function\"!=typeof e)throw\"middleware must be a function\";return this.cache.push(e),this}},{key:\"next\",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:\"run\",value:function(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}]),e}(),co=qe(\"isConcatSpreadable\"),lo=Qn>=51||!r((function(){var e=[];return e[co]=!1,e.concat()[0]!==e})),po=eo(\"concat\"),go=function(e){if(!_(e))return!1;var t=e[co];return void 0!==t?!!t:Ge(e)};ke({target:\"Array\",proto:!0,forced:!lo||!po},{concat:function(e){var t,n,o,r,a,s=Oe(this),i=Ve(s,0),u=0;for(t=-1,o=arguments.length;t<o;t++)if(a=-1===t?s:arguments[t],go(a)){if(u+(r=ie(a.length))>9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");for(n=0;n<r;n++,u++)n in a&&st(i,u,a[n])}else{if(u>=9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");st(i,u++,a)}return i.length=u,i}});var ho=C.f,fo=Function.prototype,_o=fo.toString,mo=/^\\\\s*function ([^ (]*)/;a&&!(\"name\"in fo)&&ho(fo,\"name\",{configurable:!0,get:function(){try{return _o.call(this).match(mo)[1]}catch(zI){return\"\"}}});var vo=t((function(t,n){var o,r,a,s,i,u,c,l,d,p,g,h,f,_,m,v,M,y;t.exports=(o=\"function\"==typeof Promise,r=\"object\"==typeof self?self:e,a=\"undefined\"!=typeof Symbol,s=\"undefined\"!=typeof Map,i=\"undefined\"!=typeof Set,u=\"undefined\"!=typeof WeakMap,c=\"undefined\"!=typeof WeakSet,l=\"undefined\"!=typeof DataView,d=a&&void 0!==Symbol.iterator,p=a&&void 0!==Symbol.toStringTag,g=i&&\"function\"==typeof Set.prototype.entries,h=s&&\"function\"==typeof Map.prototype.entries,f=g&&Object.getPrototypeOf((new Set).entries()),_=h&&Object.getPrototypeOf((new Map).entries()),m=d&&\"function\"==typeof Array.prototype[Symbol.iterator],v=m&&Object.getPrototypeOf([][Symbol.iterator]()),M=d&&\"function\"==typeof String.prototype[Symbol.iterator],y=M&&Object.getPrototypeOf(\"\"[Symbol.iterator]()),function(e){var t=typeof e;if(\"object\"!==t)return t;if(null===e)return\"null\";if(e===r)return\"global\";if(Array.isArray(e)&&(!1===p||!(Symbol.toStringTag in e)))return\"Array\";if(\"object\"==typeof window&&null!==window){if(\"object\"==typeof window.location&&e===window.location)return\"Location\";if(\"object\"==typeof window.document&&e===window.document)return\"Document\";if(\"object\"==typeof window.navigator){if(\"object\"==typeof window.navigator.mimeTypes&&e===window.navigator.mimeTypes)return\"MimeTypeArray\";if(\"object\"==typeof window.navigator.plugins&&e===window.navigator.plugins)return\"PluginArray\"}if((\"function\"==typeof window.HTMLElement||\"object\"==typeof window.HTMLElement)&&e instanceof window.HTMLElement){if(\"BLOCKQUOTE\"===e.tagName)return\"HTMLQuoteElement\";if(\"TD\"===e.tagName)return\"HTMLTableDataCellElement\";if(\"TH\"===e.tagName)return\"HTMLTableHeaderCellElement\"}}var n=p&&e[Symbol.toStringTag];if(\"string\"==typeof n)return n;var a=Object.getPrototypeOf(e);return a===RegExp.prototype?\"RegExp\":a===Date.prototype?\"Date\":o&&a===Promise.prototype?\"Promise\":i&&a===Set.prototype?\"Set\":s&&a===Map.prototype?\"Map\":c&&a===WeakSet.prototype?\"WeakSet\":u&&a===WeakMap.prototype?\"WeakMap\":l&&a===DataView.prototype?\"DataView\":s&&a===_?\"Map Iterator\":i&&a===f?\"Set Iterator\":m&&a===v?\"Array Iterator\":M&&a===y?\"String Iterator\":null===a?\"Object\":Object.prototype.toString.call(e).slice(8,-1)})}));ke({target:\"Array\",stat:!0},{isArray:Ge});var Mo=qe(\"unscopables\"),yo=Array.prototype;null==yo[Mo]&&C.f(yo,Mo,{configurable:!0,value:kt(null)});var Io=function(e){yo[Mo][e]=!0},Eo=He.find,To=!0,Ao=ze(\"find\");\"find\"in[]&&Array(1).find((function(){To=!1})),ke({target:\"Array\",proto:!0,forced:To||!Ao},{find:function(e){return Eo(this,e,arguments.length>1?arguments[1]:void 0)}}),Io(\"find\");var So=pe.includes,Do=ze(\"indexOf\",{ACCESSORS:!0,1:0});ke({target:\"Array\",proto:!0,forced:!Do},{includes:function(e){return So(this,e,arguments.length>1?arguments[1]:void 0)}}),Io(\"includes\");var No=pe.indexOf,Co=[].indexOf,ko=!!Co&&1/[1].indexOf(1,-0)<0,Lo=je(\"indexOf\"),Ro=ze(\"indexOf\",{ACCESSORS:!0,1:0});ke({target:\"Array\",proto:!0,forced:ko||!Lo||!Ro},{indexOf:function(e){return ko?Co.apply(this,arguments)||0:No(this,e,arguments.length>1?arguments[1]:void 0)}});var Oo=Q.set,Go=Q.getterFor(\"Array Iterator\"),bo=dn(Array,\"Array\",(function(e,t){Oo(this,{type:\"Array Iterator\",target:f(e),index:0,kind:t})}),(function(){var e=Go(this),t=e.target,n=e.kind,o=e.index++;return!t||o>=t.length?(e.target=void 0,{value:void 0,done:!0}):\"keys\"==n?{value:o,done:!1}:\"values\"==n?{value:t[o],done:!1}:{value:[o,t[o]],done:!1}}),\"values\");nt.Arguments=nt.Array,Io(\"keys\"),Io(\"values\"),Io(\"entries\");var wo=[].join,Po=g!=Object,Uo=je(\"join\",\",\");ke({target:\"Array\",proto:!0,forced:Po||!Uo},{join:function(e){return wo.call(f(this),void 0===e?\",\":e)}});var Fo=eo(\"slice\"),qo=ze(\"slice\",{ACCESSORS:!0,0:0,1:2}),xo=qe(\"species\"),Vo=[].slice,Ko=Math.max;ke({target:\"Array\",proto:!0,forced:!Fo||!qo},{slice:function(e,t){var n,o,r,a=f(this),s=ie(a.length),i=le(e,s),u=le(void 0===t?s:t,s);if(Ge(a)&&(\"function\"!=typeof(n=a.constructor)||n!==Array&&!Ge(n.prototype)?_(n)&&null===(n=n[xo])&&(n=void 0):n=void 0,n===Array||void 0===n))return Vo.call(a,i,u);for(o=new(void 0===n?Array:n)(Ko(u-i,0)),r=0;i<u;i++,r++)i in a&&st(o,r,a[i]);return o.length=r,o}}),ke({target:\"Date\",stat:!0},{now:function(){return(new Date).getTime()}});var Bo=\"\".repeat||function(e){var t=String(h(this)),n=\"\",o=ae(e);if(o<0||Infinity==o)throw RangeError(\"Wrong number of repetitions\");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n},Ho=Math.ceil,jo=function(e){return function(t,n,o){var r,a,s=String(h(t)),i=s.length,u=void 0===o?\" \":String(o),c=ie(n);return c<=i||\"\"==u?s:(r=c-i,(a=Bo.call(u,Ho(r/u.length))).length>r&&(a=a.slice(0,r)),e?s+a:a+s)}},Wo={start:jo(!1),end:jo(!0)}.start,Yo=Math.abs,$o=Date.prototype,zo=$o.getTime,Jo=$o.toISOString,Xo=r((function(){return\"0385-07-25T07:06:39.999Z\"!=Jo.call(new Date(-50000000000001))}))||!r((function(){Jo.call(new Date(NaN))}))?function(){if(!isFinite(zo.call(this)))throw RangeError(\"Invalid time value\");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?\"-\":e>9999?\"+\":\"\";return n+Wo(Yo(e),n?6:4,0)+\"-\"+Wo(this.getUTCMonth()+1,2,0)+\"-\"+Wo(this.getUTCDate(),2,0)+\"T\"+Wo(this.getUTCHours(),2,0)+\":\"+Wo(this.getUTCMinutes(),2,0)+\":\"+Wo(this.getUTCSeconds(),2,0)+\".\"+Wo(t,3,0)+\"Z\"}:Jo;ke({target:\"Date\",proto:!0,forced:Date.prototype.toISOString!==Xo},{toISOString:Xo});var Qo=Date.prototype,Zo=Qo.toString,er=Qo.getTime;new Date(NaN)+\"\"!=\"Invalid Date\"&&Z(Qo,\"toString\",(function(){var e=er.call(this);return e==e?Zo.call(this):\"Invalid Date\"}));var tr=function(e,t,n){var o,r;return an&&\"function\"==typeof(o=t.constructor)&&o!==n&&_(r=o.prototype)&&r!==n.prototype&&an(e,r),e},nr=me.f,or=S.f,rr=C.f,ar=Pt.trim,sr=o.Number,ir=sr.prototype,ur=\"Number\"==d(kt(ir)),cr=function(e){var t,n,o,r,a,s,i,u,c=m(e,!1);if(\"string\"==typeof c&&c.length>2)if(43===(t=(c=ar(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+c}for(s=(a=c.slice(2)).length,i=0;i<s;i++)if((u=a.charCodeAt(i))<48||u>r)return NaN;return parseInt(a,o)}return+c};if(Ne(\"Number\",!sr(\" 0o1\")||!sr(\"0b1\")||sr(\"+0x1\"))){for(var lr,dr=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof dr&&(ur?r((function(){ir.valueOf.call(n)})):\"Number\"!=d(n))?tr(new sr(cr(t)),n,dr):cr(t)},pr=a?nr(sr):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),gr=0;pr.length>gr;gr++)M(sr,lr=pr[gr])&&!M(dr,lr)&&rr(dr,lr,or(sr,lr));dr.prototype=ir,ir.constructor=dr,Z(o,\"Number\",dr)}var hr=me.f,fr={}.toString,_r=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],mr={f:function(e){return _r&&\"[object Window]\"==fr.call(e)?function(e){try{return hr(e)}catch(zI){return _r.slice()}}(e):hr(f(e))}},vr=mr.f,Mr=r((function(){return!Object.getOwnPropertyNames(1)}));ke({target:\"Object\",stat:!0,forced:Mr},{getOwnPropertyNames:vr});var yr=r((function(){zt(1)}));ke({target:\"Object\",stat:!0,forced:yr,sham:!Wt},{getPrototypeOf:function(e){return zt(Oe(e))}});var Ir=ut?{}.toString:function(){return\"[object \"+dt(this)+\"]\"};ut||Z(Object.prototype,\"toString\",Ir,{unsafe:!0});var Er,Tr,Ar,Sr=o.Promise,Dr=function(e,t,n){for(var o in t)Z(e,o,t[o],n);return e},Nr=qe(\"species\"),Cr=function(e){var t=ne(e),n=C.f;a&&t&&!t[Nr]&&n(t,Nr,{configurable:!0,get:function(){return this}})},kr=function(e,t,n){if(!(e instanceof t))throw TypeError(\"Incorrect \"+(n?n+\" \":\"\")+\"invocation\");return e},Lr=t((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,o,r,a){var s,i,u,c,l,d,p,g=Re(n,o,r?2:1);if(a)s=e;else{if(\"function\"!=typeof(i=gt(e)))throw TypeError(\"Target is not iterable\");if(at(i)){for(u=0,c=ie(e.length);c>u;u++)if((l=r?g(D(p=e[u])[0],p[1]):g(e[u]))&&l instanceof t)return l;return new t(!1)}s=i.call(e)}for(d=s.next;!(p=d.call(s)).done;)if(\"object\"==typeof(l=et(s,g,p.value,r))&&l&&l instanceof t)return l;return new t(!1)}).stop=function(e){return new t(!0,e)}})),Rr=qe(\"species\"),Or=function(e,t){var n,o=D(e).constructor;return void 0===o||null==(n=D(o)[Rr])?t:Le(n)},Gr=/(iphone|ipod|ipad).*applewebkit/i.test($n),br=o.location,wr=o.setImmediate,Pr=o.clearImmediate,Ur=o.process,Fr=o.MessageChannel,qr=o.Dispatch,xr=0,Vr={},Kr=function(e){if(Vr.hasOwnProperty(e)){var t=Vr[e];delete Vr[e],t()}},Br=function(e){return function(){Kr(e)}},Hr=function(e){Kr(e.data)},jr=function(e){o.postMessage(e+\"\",br.protocol+\"//\"+br.host)};wr&&Pr||(wr=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Vr[++xr]=function(){(\"function\"==typeof e?e:Function(e)).apply(void 0,t)},Er(xr),xr},Pr=function(e){delete Vr[e]},\"process\"==d(Ur)?Er=function(e){Ur.nextTick(Br(e))}:qr&&qr.now?Er=function(e){qr.now(Br(e))}:Fr&&!Gr?(Ar=(Tr=new Fr).port2,Tr.port1.onmessage=Hr,Er=Re(Ar.postMessage,Ar,1)):!o.addEventListener||\"function\"!=typeof postMessage||o.importScripts||r(jr)?Er=\"onreadystatechange\"in E(\"script\")?function(e){At.appendChild(E(\"script\")).onreadystatechange=function(){At.removeChild(this),Kr(e)}}:function(e){setTimeout(Br(e),0)}:(Er=jr,o.addEventListener(\"message\",Hr,!1)));var Wr,Yr,$r,zr,Jr,Xr,Qr,Zr,ea={set:wr,clear:Pr},ta=S.f,na=ea.set,oa=o.MutationObserver||o.WebKitMutationObserver,ra=o.process,aa=o.Promise,sa=\"process\"==d(ra),ia=ta(o,\"queueMicrotask\"),ua=ia&&ia.value;ua||(Wr=function(){var e,t;for(sa&&(e=ra.domain)&&e.exit();Yr;){t=Yr.fn,Yr=Yr.next;try{t()}catch(zI){throw Yr?zr():$r=void 0,zI}}$r=void 0,e&&e.enter()},sa?zr=function(){ra.nextTick(Wr)}:oa&&!Gr?(Jr=!0,Xr=document.createTextNode(\"\"),new oa(Wr).observe(Xr,{characterData:!0}),zr=function(){Xr.data=Jr=!Jr}):aa&&aa.resolve?(Qr=aa.resolve(void 0),Zr=Qr.then,zr=function(){Zr.call(Qr,Wr)}):zr=function(){na.call(o,Wr)});var ca,la,da,pa,ga=ua||function(e){var t={fn:e,next:void 0};$r&&($r.next=t),Yr||(Yr=t,zr()),$r=t},ha=function(e){var t,n;this.promise=new e((function(e,o){if(void 0!==t||void 0!==n)throw TypeError(\"Bad Promise constructor\");t=e,n=o})),this.resolve=Le(t),this.reject=Le(n)},fa={f:function(e){return new ha(e)}},_a=function(e,t){if(D(e),_(t)&&t.constructor===e)return t;var n=fa.f(e);return(0,n.resolve)(t),n.promise},ma=function(e){try{return{error:!1,value:e()}}catch(zI){return{error:!0,value:zI}}},va=ea.set,Ma=qe(\"species\"),ya=\"Promise\",Ia=Q.get,Ea=Q.set,Ta=Q.getterFor(ya),Aa=Sr,Sa=o.TypeError,Da=o.document,Na=o.process,Ca=ne(\"fetch\"),ka=fa.f,La=ka,Ra=\"process\"==d(Na),Oa=!!(Da&&Da.createEvent&&o.dispatchEvent),Ga=Ne(ya,(function(){if(!(P(Aa)!==String(Aa))){if(66===Qn)return!0;if(!Ra&&\"function\"!=typeof PromiseRejectionEvent)return!0}if(Qn>=51&&/native code/.test(Aa))return!1;var e=Aa.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Ma]=t,!(e.then((function(){}))instanceof t)})),ba=Ga||!Mt((function(e){Aa.all(e).catch((function(){}))})),wa=function(e){var t;return!(!_(e)||\"function\"!=typeof(t=e.then))&&t},Pa=function(e,t,n){if(!t.notified){t.notified=!0;var o=t.reactions;ga((function(){for(var r=t.value,a=1==t.state,s=0;o.length>s;){var i,u,c,l=o[s++],d=a?l.ok:l.fail,p=l.resolve,g=l.reject,h=l.domain;try{d?(a||(2===t.rejection&&xa(e,t),t.rejection=1),!0===d?i=r:(h&&h.enter(),i=d(r),h&&(h.exit(),c=!0)),i===l.promise?g(Sa(\"Promise-chain cycle\")):(u=wa(i))?u.call(i,p,g):p(i)):g(r)}catch(zI){h&&!c&&h.exit(),g(zI)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Fa(e,t)}))}},Ua=function(e,t,n){var r,a;Oa?((r=Da.createEvent(\"Event\")).promise=t,r.reason=n,r.initEvent(e,!1,!0),o.dispatchEvent(r)):r={promise:t,reason:n},(a=o[\"on\"+e])?a(r):\"unhandledrejection\"===e&&function(e,t){var n=o.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}(\"Unhandled promise rejection\",n)},Fa=function(e,t){va.call(o,(function(){var n,o=t.value;if(qa(t)&&(n=ma((function(){Ra?Na.emit(\"unhandledRejection\",o,e):Ua(\"unhandledrejection\",e,o)})),t.rejection=Ra||qa(t)?2:1,n.error))throw n.value}))},qa=function(e){return 1!==e.rejection&&!e.parent},xa=function(e,t){va.call(o,(function(){Ra?Na.emit(\"rejectionHandled\",e):Ua(\"rejectionhandled\",e,t.value)}))},Va=function(e,t,n,o){return function(r){e(t,n,r,o)}},Ka=function(e,t,n,o){t.done||(t.done=!0,o&&(t=o),t.value=n,t.state=2,Pa(e,t,!0))},Ba=function(e,t,n,o){if(!t.done){t.done=!0,o&&(t=o);try{if(e===n)throw Sa(\"Promise can\\'t be resolved itself\");var r=wa(n);r?ga((function(){var o={done:!1};try{r.call(n,Va(Ba,e,o,t),Va(Ka,e,o,t))}catch(zI){Ka(e,o,zI,t)}})):(t.value=n,t.state=1,Pa(e,t,!1))}catch(zI){Ka(e,{done:!1},zI,t)}}};Ga&&(Aa=function(e){kr(this,Aa,ya),Le(e),ca.call(this);var t=Ia(this);try{e(Va(Ba,this,t),Va(Ka,this,t))}catch(zI){Ka(this,t,zI)}},(ca=function(e){Ea(this,{type:ya,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Dr(Aa.prototype,{then:function(e,t){var n=Ta(this),o=ka(Or(this,Aa));return o.ok=\"function\"!=typeof e||e,o.fail=\"function\"==typeof t&&t,o.domain=Ra?Na.domain:void 0,n.parent=!0,n.reactions.push(o),0!=n.state&&Pa(this,n,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),la=function(){var e=new ca,t=Ia(e);this.promise=e,this.resolve=Va(Ba,e,t),this.reject=Va(Ka,e,t)},fa.f=ka=function(e){return e===Aa||e===da?new la(e):La(e)},\"function\"==typeof Sr&&(pa=Sr.prototype.then,Z(Sr.prototype,\"then\",(function(e,t){var n=this;return new Aa((function(e,t){pa.call(n,e,t)})).then(e,t)}),{unsafe:!0}),\"function\"==typeof Ca&&ke({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return _a(Aa,Ca.apply(o,arguments))}}))),ke({global:!0,wrap:!0,forced:Ga},{Promise:Aa}),tn(Aa,ya,!1),Cr(ya),da=ne(ya),ke({target:ya,stat:!0,forced:Ga},{reject:function(e){var t=ka(this);return t.reject.call(void 0,e),t.promise}}),ke({target:ya,stat:!0,forced:Ga},{resolve:function(e){return _a(this,e)}}),ke({target:ya,stat:!0,forced:ba},{all:function(e){var t=this,n=ka(t),o=n.resolve,r=n.reject,a=ma((function(){var n=Le(t.resolve),a=[],s=0,i=1;Lr(e,(function(e){var u=s++,c=!1;a.push(void 0),i++,n.call(t,e).then((function(e){c||(c=!0,a[u]=e,--i||o(a))}),r)})),--i||o(a)}));return a.error&&r(a.value),n.promise},race:function(e){var t=this,n=ka(t),o=n.reject,r=ma((function(){var r=Le(t.resolve);Lr(e,(function(e){r.call(t,e).then(n.resolve,o)}))}));return r.error&&o(r.value),n.promise}});var Ha=function(){var e=D(this),t=\"\";return e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),e.dotAll&&(t+=\"s\"),e.unicode&&(t+=\"u\"),e.sticky&&(t+=\"y\"),t};function ja(e,t){return RegExp(e,t)}var Wa,Ya,$a={UNSUPPORTED_Y:r((function(){var e=ja(\"a\",\"y\");return e.lastIndex=2,null!=e.exec(\"abcd\")})),BROKEN_CARET:r((function(){var e=ja(\"^r\",\"gy\");return e.lastIndex=2,null!=e.exec(\"str\")}))},za=RegExp.prototype.exec,Ja=String.prototype.replace,Xa=za,Qa=(Wa=/a/,Ya=/b*/g,za.call(Wa,\"a\"),za.call(Ya,\"a\"),0!==Wa.lastIndex||0!==Ya.lastIndex),Za=$a.UNSUPPORTED_Y||$a.BROKEN_CARET,es=void 0!==/()??/.exec(\"\")[1];(Qa||es||Za)&&(Xa=function(e){var t,n,o,r,a=this,s=Za&&a.sticky,i=Ha.call(a),u=a.source,c=0,l=e;return s&&(-1===(i=i.replace(\"y\",\"\")).indexOf(\"g\")&&(i+=\"g\"),l=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&\"\\\\n\"!==e[a.lastIndex-1])&&(u=\"(?: \"+u+\")\",l=\" \"+l,c++),n=new RegExp(\"^(?:\"+u+\")\",i)),es&&(n=new RegExp(\"^\"+u+\"$(?!\\\\\\\\s)\",i)),Qa&&(t=a.lastIndex),o=za.call(s?n:a,l),s?o?(o.input=o.input.slice(c),o[0]=o[0].slice(c),o.index=a.lastIndex,a.lastIndex+=o[0].length):a.lastIndex=0:Qa&&o&&(a.lastIndex=a.global?o.index+o[0].length:t),es&&o&&o.length>1&&Ja.call(o[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(o[r]=void 0)})),o});var ts=Xa;ke({target:\"RegExp\",proto:!0,forced:/./.exec!==ts},{exec:ts});var ns=RegExp.prototype,os=ns.toString,rs=r((function(){return\"/a/b\"!=os.call({source:\"a\",flags:\"b\"})})),as=\"toString\"!=os.name;(rs||as)&&Z(RegExp.prototype,\"toString\",(function(){var e=D(this),t=String(e.source),n=e.flags;return\"/\"+t+\"/\"+String(void 0===n&&e instanceof RegExp&&!(\"flags\"in ns)?Ha.call(e):n)}),{unsafe:!0});var ss=jt.codeAt;ke({target:\"String\",proto:!0},{codePointAt:function(e){return ss(this,e)}});var is=qe(\"match\"),us=function(e){var t;return _(e)&&(void 0!==(t=e[is])?!!t:\"RegExp\"==d(e))},cs=function(e){if(us(e))throw TypeError(\"The method doesn\\'t accept regular expressions\");return e},ls=qe(\"match\"),ds=function(e){var t=/./;try{\"/./\"[e](t)}catch(n){try{return t[ls]=!1,\"/./\"[e](t)}catch(o){}}return!1};ke({target:\"String\",proto:!0,forced:!ds(\"includes\")},{includes:function(e){return!!~String(h(this)).indexOf(cs(e),arguments.length>1?arguments[1]:void 0)}});var ps=qe(\"species\"),gs=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:\"7\"},e},\"7\"!==\"\".replace(e,\"$<a>\")})),hs=\"$0\"===\"a\".replace(/./,\"$0\"),fs=qe(\"replace\"),_s=!!/./[fs]&&\"\"===/./[fs](\"a\",\"$0\"),ms=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n=\"ab\".split(e);return 2!==n.length||\"a\"!==n[0]||\"b\"!==n[1]})),vs=function(e,t,n,o){var a=qe(e),s=!r((function(){var t={};return t[a]=function(){return 7},7!=\"\"[e](t)})),i=s&&!r((function(){var t=!1,n=/a/;return\"split\"===e&&((n={}).constructor={},n.constructor[ps]=function(){return n},n.flags=\"\",n[a]=/./[a]),n.exec=function(){return t=!0,null},n[a](\"\"),!t}));if(!s||!i||\"replace\"===e&&(!gs||!hs||_s)||\"split\"===e&&!ms){var u=/./[a],c=n(a,\"\"[e],(function(e,t,n,o,r){return t.exec===ts?s&&!r?{done:!0,value:u.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}),{REPLACE_KEEPS_$0:hs,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:_s}),l=c[0],d=c[1];Z(String.prototype,e,l),Z(RegExp.prototype,a,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}o&&k(RegExp.prototype[a],\"sham\",!0)},Ms=jt.charAt,ys=function(e,t,n){return t+(n?Ms(e,t).length:1)},Is=function(e,t){var n=e.exec;if(\"function\"==typeof n){var o=n.call(e,t);if(\"object\"!=typeof o)throw TypeError(\"RegExp exec method returned something other than an Object or null\");return o}if(\"RegExp\"!==d(e))throw TypeError(\"RegExp#exec called on incompatible receiver\");return ts.call(e,t)};vs(\"match\",1,(function(e,t,n){return[function(t){var n=h(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,n):new RegExp(t)[e](String(n))},function(e){var o=n(t,e,this);if(o.done)return o.value;var r=D(e),a=String(this);if(!r.global)return Is(r,a);var s=r.unicode;r.lastIndex=0;for(var i,u=[],c=0;null!==(i=Is(r,a));){var l=String(i[0]);u[c]=l,\"\"===l&&(r.lastIndex=ys(a,ie(r.lastIndex),s)),c++}return 0===c?null:u}]}));var Es=Math.max,Ts=Math.min,As=Math.floor,Ss=/\\\\$([$&\\'`]|\\\\d\\\\d?|<[^>]*>)/g,Ds=/\\\\$([$&\\'`]|\\\\d\\\\d?)/g;vs(\"replace\",2,(function(e,t,n,o){var r=o.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,a=o.REPLACE_KEEPS_$0,s=r?\"$\":\"$0\";return[function(n,o){var r=h(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,r,o):t.call(String(r),n,o)},function(e,o){if(!r&&a||\"string\"==typeof o&&-1===o.indexOf(s)){var u=n(t,e,this,o);if(u.done)return u.value}var c=D(e),l=String(this),d=\"function\"==typeof o;d||(o=String(o));var p=c.global;if(p){var g=c.unicode;c.lastIndex=0}for(var h=[];;){var f=Is(c,l);if(null===f)break;if(h.push(f),!p)break;\"\"===String(f[0])&&(c.lastIndex=ys(l,ie(c.lastIndex),g))}for(var _,m=\"\",v=0,M=0;M<h.length;M++){f=h[M];for(var y=String(f[0]),I=Es(Ts(ae(f.index),l.length),0),E=[],T=1;T<f.length;T++)E.push(void 0===(_=f[T])?_:String(_));var A=f.groups;if(d){var S=[y].concat(E,I,l);void 0!==A&&S.push(A);var N=String(o.apply(void 0,S))}else N=i(y,l,I,E,A,o);I>=v&&(m+=l.slice(v,I)+N,v=I+y.length)}return m+l.slice(v)}];function i(e,n,o,r,a,s){var i=o+e.length,u=r.length,c=Ds;return void 0!==a&&(a=Oe(a),c=Ss),t.call(s,c,(function(t,s){var c;switch(s.charAt(0)){case\"$\":return\"$\";case\"&\":return e;case\"`\":return n.slice(0,o);case\"\\'\":return n.slice(i);case\"<\":c=a[s.slice(1,-1)];break;default:var l=+s;if(0===l)return t;if(l>u){var d=As(l/10);return 0===d?t:d<=u?void 0===r[d-1]?s.charAt(1):r[d-1]+s.charAt(1):t}c=r[l-1]}return void 0===c?\"\":c}))}}));var Ns,Cs=S.f,ks=\"\".startsWith,Ls=Math.min,Rs=ds(\"startsWith\"),Os=!(Rs||(Ns=Cs(String.prototype,\"startsWith\"),!Ns||Ns.writable));ke({target:\"String\",proto:!0,forced:!Os&&!Rs},{startsWith:function(e){var t=String(h(this));cs(e);var n=ie(Ls(arguments.length>1?arguments[1]:void 0,t.length)),o=String(e);return ks?ks.call(t,o,n):t.slice(n,n+o.length)===o}});var Gs=qe(\"iterator\"),bs=qe(\"toStringTag\"),ws=bo.values;for(var Ps in fn){var Us=o[Ps],Fs=Us&&Us.prototype;if(Fs){if(Fs[Gs]!==ws)try{k(Fs,Gs,ws)}catch(zI){Fs[Gs]=ws}if(Fs[bs]||k(Fs,bs,Ps),fn[Ps])for(var qs in bo)if(Fs[qs]!==bo[qs])try{k(Fs,qs,bo[qs])}catch(zI){Fs[qs]=bo[qs]}}}var xs=Pt.trim,Vs=o.parseFloat,Ks=1/Vs(Rt+\"-0\")!=-Infinity?function(e){var t=xs(String(e)),n=Vs(t);return 0===n&&\"-\"==t.charAt(0)?-0:n}:Vs;ke({global:!0,forced:parseFloat!=Ks},{parseFloat:Ks});var Bs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;yn(this,e),this.high=t,this.low=n}return En(e,[{key:\"equal\",value:function(e){return null!==e&&(this.low===e.low&&this.high===e.high)}},{key:\"toString\",value:function(){var e=Number(this.high).toString(16),t=Number(this.low).toString(16);if(t.length<8)for(var n=8-t.length;n;)t=\"0\"+t,n--;return e+t}}]),e}(),Hs={TEST:{CHINA:{DEFAULT:\"wss://wss-dev.tim.qq.com\"},OVERSEA:{DEFAULT:\"wss://wss-dev.tim.qq.com\"},SINGAPORE:{DEFAULT:\"wss://wsssgp-dev.im.qcloud.com\"},KOREA:{DEFAULT:\"wss://wsskr-dev.im.qcloud.com\"},GERMANY:{DEFAULT:\"wss://wssger-dev.im.qcloud.com\"},IND:{DEFAULT:\"wss://wssind-dev.im.qcloud.com\"}},PRODUCTION:{CHINA:{DEFAULT:\"wss://wss.im.qcloud.com\",BACKUP:\"wss://wss.tim.qq.com\",STAT:\"https://api.im.qcloud.com\"},OVERSEA:{DEFAULT:\"wss://wss.im.qcloud.com\",BACKUP:\"wss://wss.my-imcloud.com\",STAT:\"https://api.my-imcloud.com\"},SINGAPORE:{DEFAULT:\"wss://wsssgp.im.qcloud.com\",BACKUP:\"wss://wsssgp.my-imcloud.com\",STAT:\"https://apisgp.my-imcloud.com\"},KOREA:{DEFAULT:\"wss://wsskr.im.qcloud.com\",BACKUP:\"wss://wsskr.my-imcloud.com\",STAT:\"https://apikr.my-imcloud.com\"},GERMANY:{DEFAULT:\"wss://wssger.im.qcloud.com\",BACKUP:\"wss://wssger.my-imcloud.com\",STAT:\"https://apiger.my-imcloud.com\"},IND:{DEFAULT:\"wss://wssind.im.qcloud.com\",BACKUP:\"wss://wssind.my-imcloud.com\",STAT:\"https://apiind.my-imcloud.com\"}}},js={WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,UNI_NATIVE_APP:15},Ws=\"1.7.3\",Ys=537048168,$s=\"CHINA\",zs=\"OVERSEA\",Js=\"SINGAPORE\",Xs=\"KOREA\",Qs=\"GERMANY\",Zs=\"IND\",ei={HOST:{CURRENT:{DEFAULT:\"wss://wss.im.qcloud.com\",STAT:\"https://api.im.qcloud.com\"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s;this.CURRENT=Hs.PRODUCTION[e]}},NAME:{OPEN_IM:\"openim\",GROUP:\"group_open_http_svc\",GROUP_COMMUNITY:\"million_group_open_http_svc\",GROUP_ATTR:\"group_open_attr_http_svc\",FRIEND:\"sns\",PROFILE:\"profile\",RECENT_CONTACT:\"recentcontact\",PIC:\"openpic\",BIG_GROUP_NO_AUTH:\"group_open_http_noauth_svc\",BIG_GROUP_LONG_POLLING:\"group_open_long_polling_http_svc\",BIG_GROUP_LONG_POLLING_NO_AUTH:\"group_open_long_polling_http_noauth_svc\",IM_OPEN_STAT:\"imopenstat\",WEB_IM:\"webim\",IM_COS_SIGN:\"im_cos_sign_svr\",CUSTOM_UPLOAD:\"im_cos_msg\",HEARTBEAT:\"heartbeat\",IM_OPEN_PUSH:\"im_open_push\",IM_OPEN_STATUS:\"im_open_status\",IM_LONG_MESSAGE:\"im_long_msg\",IM_CONFIG_MANAGER:\"im_sdk_config_mgr\",STAT_SERVICE:\"StatSvc\",OVERLOAD_PUSH:\"OverLoadPush\"},CMD:{ACCESS_LAYER:\"accesslayer\",LOGIN:\"wslogin\",LOGOUT_LONG_POLL:\"longpollinglogout\",LOGOUT:\"wslogout\",HELLO:\"wshello\",PORTRAIT_GET:\"portrait_get_all\",PORTRAIT_SET:\"portrait_set\",GET_LONG_POLL_ID:\"getlongpollingid\",LONG_POLL:\"longpolling\",AVCHATROOM_LONG_POLL:\"get_msg\",ADD_FRIEND:\"friend_add\",UPDATE_FRIEND:\"friend_update\",GET_FRIEND_LIST:\"friend_get\",GET_FRIEND_PROFILE:\"friend_get_list\",DELETE_FRIEND:\"friend_delete\",CHECK_FRIEND:\"friend_check\",GET_FRIEND_GROUP_LIST:\"group_get\",RESPOND_FRIEND_APPLICATION:\"friend_response\",GET_FRIEND_APPLICATION_LIST:\"pendency_get\",DELETE_FRIEND_APPLICATION:\"pendency_delete\",REPORT_FRIEND_APPLICATION:\"pendency_report\",GET_GROUP_APPLICATION:\"get_pendency\",CREATE_FRIEND_GROUP:\"group_add\",DELETE_FRIEND_GROUP:\"group_delete\",UPDATE_FRIEND_GROUP:\"group_update\",GET_BLACKLIST:\"black_list_get\",ADD_BLACKLIST:\"black_list_add\",DELETE_BLACKLIST:\"black_list_delete\",CREATE_GROUP:\"create_group\",GET_JOINED_GROUPS:\"get_joined_group_list\",SET_GROUP_ATTRIBUTES:\"set_group_attr\",MODIFY_GROUP_ATTRIBUTES:\"modify_group_attr\",DELETE_GROUP_ATTRIBUTES:\"delete_group_attr\",CLEAR_GROUP_ATTRIBUTES:\"clear_group_attr\",GET_GROUP_ATTRIBUTES:\"get_group_attr\",SEND_MESSAGE:\"sendmsg\",REVOKE_C2C_MESSAGE:\"msgwithdraw\",DELETE_C2C_MESSAGE:\"delete_c2c_msg_ramble\",SEND_GROUP_MESSAGE:\"send_group_msg\",REVOKE_GROUP_MESSAGE:\"group_msg_recall\",DELETE_GROUP_MESSAGE:\"delete_group_ramble_msg_by_seq\",GET_GROUP_INFO:\"get_group_self_member_info\",GET_GROUP_MEMBER_INFO:\"get_specified_group_member_info\",GET_GROUP_MEMBER_LIST:\"get_group_member_info\",QUIT_GROUP:\"quit_group\",CHANGE_GROUP_OWNER:\"change_group_owner\",DESTROY_GROUP:\"destroy_group\",ADD_GROUP_MEMBER:\"add_group_member\",DELETE_GROUP_MEMBER:\"delete_group_member\",SEARCH_GROUP_BY_ID:\"get_group_public_info\",APPLY_JOIN_GROUP:\"apply_join_group\",HANDLE_APPLY_JOIN_GROUP:\"handle_apply_join_group\",HANDLE_GROUP_INVITATION:\"handle_invite_join_group\",MODIFY_GROUP_INFO:\"modify_group_base_info\",MODIFY_GROUP_MEMBER_INFO:\"modify_group_member_info\",DELETE_GROUP_SYSTEM_MESSAGE:\"deletemsg\",DELETE_GROUP_AT_TIPS:\"deletemsg\",GET_CONVERSATION_LIST:\"get\",PAGING_GET_CONVERSATION_LIST:\"page_get\",DELETE_CONVERSATION:\"delete\",PIN_CONVERSATION:\"top\",GET_MESSAGES:\"getmsg\",GET_C2C_ROAM_MESSAGES:\"getroammsg\",SET_C2C_PEER_MUTE_NOTIFICATIONS:\"set_c2c_peer_mute_notifications\",GET_C2C_PEER_MUTE_NOTIFICATIONS:\"get_c2c_peer_mute_notifications\",GET_GROUP_ROAM_MESSAGES:\"group_msg_get\",GET_READ_RECEIPT:\"get_group_msg_receipt\",GET_READ_RECEIPT_DETAIL:\"get_group_msg_receipt_detail\",SEND_READ_RECEIPT:\"group_msg_receipt\",SET_C2C_MESSAGE_READ:\"msgreaded\",GET_PEER_READ_TIME:\"get_peer_read_time\",SET_GROUP_MESSAGE_READ:\"msg_read_report\",FILE_READ_AND_WRITE_AUTHKEY:\"authkey\",FILE_UPLOAD:\"pic_up\",COS_SIGN:\"cos\",COS_PRE_SIG:\"pre_sig\",VIDEO_COVER:\"video_cover\",TIM_WEB_REPORT_V2:\"tim_web_report_v2\",BIG_DATA_HALLWAY_AUTH_KEY:\"authkey\",GET_ONLINE_MEMBER_NUM:\"get_online_member_num\",ALIVE:\"alive\",MESSAGE_PUSH:\"msg_push\",MULTI_MESSAGE_PUSH:\"multi_msg_push_ws\",MESSAGE_PUSH_ACK:\"ws_msg_push_ack\",STATUS_FORCEOFFLINE:\"stat_forceoffline\",DOWNLOAD_MERGER_MESSAGE:\"get_relay_json_msg\",UPLOAD_MERGER_MESSAGE:\"save_relay_json_msg\",FETCH_CLOUD_CONTROL_CONFIG:\"fetch_config\",PUSHED_CLOUD_CONTROL_CONFIG:\"push_configv2\",FETCH_COMMERCIAL_CONFIG:\"fetch_imsdk_purchase_bitsv2\",PUSHED_COMMERCIAL_CONFIG:\"push_imsdk_purchase_bitsv2\",KICK_OTHER:\"KickOther\",OVERLOAD_NOTIFY:\"notify2\",SET_ALL_MESSAGE_READ:\"read_all_unread_msg\"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:\"v4\",group_open_http_svc:\"v4\",sns:\"v4\",profile:\"v4\",recentcontact:\"v4\",openpic:\"v4\",group_open_http_noauth_svc:\"v4\",group_open_long_polling_http_svc:\"v4\",group_open_long_polling_http_noauth_svc:\"v4\",imopenstat:\"v4\",im_cos_sign_svr:\"v4\",im_cos_msg:\"v4\",webim:\"v4\",im_open_push:\"v4\",im_open_status:\"v4\"}},ti={SEARCH_MSG:new Bs(0,Math.pow(2,0)).toString(),SEARCH_GRP_SNS:new Bs(0,Math.pow(2,1)).toString(),AVCHATROOM_HISTORY_MSG:new Bs(0,Math.pow(2,2)).toString(),GRP_COMMUNITY:new Bs(0,Math.pow(2,3)).toString(),MSG_TO_SPECIFIED_GRP_MBR:new Bs(0,Math.pow(2,4)).toString()};ei.HOST.setCurrent($s);var ni,oi,ri,ai=\"undefined\"!=typeof wx&&\"function\"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting),si=\"undefined\"!=typeof qq&&\"function\"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),ii=\"undefined\"!=typeof tt&&\"function\"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),ui=\"undefined\"!=typeof swan&&\"function\"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),ci=\"undefined\"!=typeof my&&\"function\"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),li=\"undefined\"!=typeof uni&&\"undefined\"==typeof window,di=\"undefined\"!=typeof uni,pi=ai||si||ii||ui||ci||li,gi=(\"undefined\"!=typeof uni||\"undefined\"!=typeof window)&&!pi,hi=si?qq:ii?tt:ui?swan:ci?my:ai?wx:li?uni:{},fi=(ni=\"WEB\",Li?ni=\"WEB\":si?ni=\"QQ_MP\":ii?ni=\"TT_MP\":ui?ni=\"BAIDU_MP\":ci?ni=\"ALI_MP\":ai?ni=\"WX_MP\":li&&(ni=\"UNI_NATIVE_APP\"),js[ni]),_i=gi&&window&&window.navigator&&window.navigator.userAgent||\"\",mi=/AppleWebKit\\\\/([\\\\d.]+)/i.exec(_i),vi=(mi&&parseFloat(mi.pop()),/iPad/i.test(_i)),Mi=/iPhone/i.test(_i)&&!vi,yi=/iPod/i.test(_i),Ii=Mi||vi||yi,Ei=function(){var e=_i.match(/OS (\\\\d+)_/i);return e&&e[1]?e[1]:null}(),Ti=/Android/i.test(_i),Ai=function(){var e=_i.match(/Android (\\\\d+)(?:\\\\.(\\\\d+))?(?:\\\\.(\\\\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+\".\"+e[2]):t||null}(),Si=(Ti&&/webkit/i.test(_i),/Firefox/i.test(_i),/Edge/i.test(_i)),Di=!Si&&/Chrome/i.test(_i),Ni=(function(){var e=_i.match(/Chrome\\\\/(\\\\d+)/);e&&e[1]&&parseFloat(e[1])}(),/MSIE/.test(_i)||_i.indexOf(\"Trident\")>-1&&_i.indexOf(\"rv:11.0\")>-1),Ci=(/MSIE\\\\s8\\\\.0/.test(_i),function(){var e=/MSIE\\\\s(\\\\d+)\\\\.\\\\d/.exec(_i),t=e&&parseFloat(e[1]);return!t&&/Trident\\\\/7.0/i.test(_i)&&/rv:11.0/.test(_i)&&(t=11),t}()),ki=(/Safari/i.test(_i),/TBS\\\\/\\\\d+/i.test(_i)),Li=(function(){var e=_i.match(/TBS\\\\/(\\\\d+)/i);if(e&&e[1])e[1]}(),!ki&&/MQQBrowser\\\\/\\\\d+/i.test(_i),!ki&&/ QQBrowser\\\\/\\\\d+/i.test(_i),/(micromessenger|webbrowser)/i.test(_i)),Ri=/Windows/i.test(_i),Oi=/MAC OS X/i.test(_i),Gi=(/MicroMessenger/i.test(_i),gi&&\"undefined\"!=typeof Worker&&!Ni),bi=!r((function(){return Object.isExtensible(Object.preventExtensions({}))})),wi=t((function(e){var t=C.f,n=K(\"meta\"),o=0,r=Object.isExtensible||function(){return!0},a=function(e){t(e,n,{value:{objectID:\"O\"+ ++o,weakData:{}}})},s=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!_(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!M(e,n)){if(!r(e))return\"F\";if(!t)return\"E\";a(e)}return e[n].objectID},getWeakData:function(e,t){if(!M(e,n)){if(!r(e))return!0;if(!t)return!1;a(e)}return e[n].weakData},onFreeze:function(e){return bi&&s.REQUIRED&&r(e)&&!M(e,n)&&a(e),e}};j[n]=!0})),Pi=(wi.REQUIRED,wi.fastKey,wi.getWeakData,wi.onFreeze,C.f),Ui=wi.fastKey,Fi=Q.set,qi=Q.getterFor,xi=(function(e,t,n){var a=-1!==e.indexOf(\"Map\"),s=-1!==e.indexOf(\"Weak\"),i=a?\"set\":\"add\",u=o[e],c=u&&u.prototype,l=u,d={},p=function(e){var t=c[e];Z(c,e,\"add\"==e?function(e){return t.call(this,0===e?0:e),this}:\"delete\"==e?function(e){return!(s&&!_(e))&&t.call(this,0===e?0:e)}:\"get\"==e?function(e){return s&&!_(e)?void 0:t.call(this,0===e?0:e)}:\"has\"==e?function(e){return!(s&&!_(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Ne(e,\"function\"!=typeof u||!(s||c.forEach&&!r((function(){(new u).entries().next()})))))l=n.getConstructor(t,e,a,i),wi.REQUIRED=!0;else if(Ne(e,!0)){var g=new l,h=g[i](s?{}:-0,1)!=g,f=r((function(){g.has(1)})),m=Mt((function(e){new u(e)})),v=!s&&r((function(){for(var e=new u,t=5;t--;)e[i](t,t);return!e.has(-0)}));m||((l=t((function(t,n){kr(t,l,e);var o=tr(new u,t,l);return null!=n&&Lr(n,o[i],o,a),o}))).prototype=c,c.constructor=l),(f||v)&&(p(\"delete\"),p(\"has\"),a&&p(\"get\")),(v||h)&&p(i),s&&c.clear&&delete c.clear}d[e]=l,ke({global:!0,forced:l!=u},d),tn(l,e),s||n.setStrong(l,e,a)}(\"Map\",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,n,o){var r=e((function(e,s){kr(e,r,t),Fi(e,{type:t,index:kt(null),first:void 0,last:void 0,size:0}),a||(e.size=0),null!=s&&Lr(s,e[o],e,n)})),s=qi(t),i=function(e,t,n){var o,r,i=s(e),c=u(e,t);return c?c.value=n:(i.last=c={index:r=Ui(t,!0),key:t,value:n,previous:o=i.last,next:void 0,removed:!1},i.first||(i.first=c),o&&(o.next=c),a?i.size++:e.size++,\"F\"!==r&&(i.index[r]=c)),e},u=function(e,t){var n,o=s(e),r=Ui(t);if(\"F\"!==r)return o.index[r];for(n=o.first;n;n=n.next)if(n.key==t)return n};return Dr(r.prototype,{clear:function(){for(var e=s(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,a?e.size=0:this.size=0},delete:function(e){var t=s(this),n=u(this,e);if(n){var o=n.next,r=n.previous;delete t.index[n.index],n.removed=!0,r&&(r.next=o),o&&(o.previous=r),t.first==n&&(t.first=o),t.last==n&&(t.last=r),a?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=s(this),o=Re(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(o(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),Dr(r.prototype,n?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return i(this,0===e?0:e,t)}}:{add:function(e){return i(this,e=0===e?0:e,e)}}),a&&Pi(r.prototype,\"size\",{get:function(){return s(this).size}}),r},setStrong:function(e,t,n){var o=t+\" Iterator\",r=qi(t),a=qi(o);dn(e,t,(function(e,t){Fi(this,{type:o,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?\"keys\"==t?{value:n.key,done:!1}:\"values\"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?\"entries\":\"values\",!n,!0),Cr(t)}}),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{});oi=\"undefined\"!=typeof console?console:void 0!==xi&&xi.console?xi.console:\"undefined\"!=typeof window&&window.console?window.console:{};for(var Vi=function(){},Ki=[\"assert\",\"clear\",\"count\",\"debug\",\"dir\",\"dirxml\",\"error\",\"exception\",\"group\",\"groupCollapsed\",\"groupEnd\",\"info\",\"log\",\"markTimeline\",\"profile\",\"profileEnd\",\"table\",\"time\",\"timeEnd\",\"timeStamp\",\"trace\",\"warn\"],Bi=Ki.length;Bi--;)ri=Ki[Bi],console[ri]||(oi[ri]=Vi);oi.methods=Ki;var Hi=oi,ji=0,Wi=function(){return(new Date).getTime()+ji},Yi=function(){ji=0},$i=function(){return Math.floor(Wi()/1e3)},zi=0,Ji=new Map;function Xi(){var e,t=((e=new Date).setTime(Wi()),e);return\"TIM \"+t.toLocaleTimeString(\"en-US\",{hour12:!1})+\".\"+function(e){var t;switch(e.toString().length){case 1:t=\"00\"+e;break;case 2:t=\"0\"+e;break;default:t=e}return t}(t.getMilliseconds())+\":\"}var Qi={arguments2String:function(e){var t;if(1===e.length)t=Xi()+e[0];else{t=Xi();for(var n=0,o=e.length;n<o;n++)fu(e[n])?mu(e[n])?t+=Tu(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=\" \"}return t},debug:function(){if(zi<=-1){var e=this.arguments2String(arguments);Hi.debug(e)}},log:function(){if(zi<=0){var e=this.arguments2String(arguments);Hi.log(e)}},info:function(){if(zi<=1){var e=this.arguments2String(arguments);Hi.info(e)}},warn:function(){if(zi<=2){var e=this.arguments2String(arguments);Hi.warn(e)}},error:function(){if(zi<=3){var e=this.arguments2String(arguments);Hi.error(e)}},time:function(e){Ji.set(e,Iu.now())},timeEnd:function(e){if(Ji.has(e)){var t=Iu.now()-Ji.get(e);return Ji.delete(e),t}return Hi.warn(\"未找到对应label: \".concat(e,\", 请在调用 logger.timeEnd 前，调用 logger.time\")),0},setLevel:function(e){e<4&&Hi.log(Xi()+\"set level from \"+zi+\" to \"+e),zi=e},getLevel:function(){return zi}},Zi={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255},eu={NICK:\"Tag_Profile_IM_Nick\",GENDER:\"Tag_Profile_IM_Gender\",BIRTHDAY:\"Tag_Profile_IM_BirthDay\",LOCATION:\"Tag_Profile_IM_Location\",SELFSIGNATURE:\"Tag_Profile_IM_SelfSignature\",ALLOWTYPE:\"Tag_Profile_IM_AllowType\",LANGUAGE:\"Tag_Profile_IM_Language\",AVATAR:\"Tag_Profile_IM_Image\",MESSAGESETTINGS:\"Tag_Profile_IM_MsgSettings\",ADMINFORBIDTYPE:\"Tag_Profile_IM_AdminForbidType\",LEVEL:\"Tag_Profile_IM_Level\",ROLE:\"Tag_Profile_IM_Role\"},tu={GROUP:\"Tag_SNS_IM_Group\",REMARK:\"Tag_SNS_IM_Remark\",ADDSOURCE:\"Tag_SNS_IM_AddSource\",ADDWORDING:\"Tag_SNS_IM_AddWording\",ADDTIME:\"Tag_SNS_IM_AddTime\"},nu={UNKNOWN:\"Gender_Type_Unknown\",FEMALE:\"Gender_Type_Female\",MALE:\"Gender_Type_Male\"},ou={NONE:\"AdminForbid_Type_None\",SEND_OUT:\"AdminForbid_Type_SendOut\"},ru={NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_ANY:\"AllowType_Type_AllowAny\",DENY_ANY:\"AllowType_Type_DenyAny\"},au=\"JoinedSuccess\",su=\"WaitAdminApproval\",iu=\"@TGS#_\",uu=function(e){return\"file\"===vu(e)},cu=function(e){return null!==e&&(\"number\"==typeof e&&!isNaN(e-0)||\"object\"===Mn(e)&&e.constructor===Number)},lu=function(e){return\"string\"==typeof e},du=function(e){return null!==e&&\"object\"===Mn(e)},pu=function(e){if(\"object\"!==Mn(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n},gu=function(e){return\"function\"==typeof Array.isArray?Array.isArray(e):\"array\"===vu(e)},hu=function(e){return void 0===e},fu=function(e){return gu(e)||du(e)},_u=function(e){return\"function\"==typeof e},mu=function(e){return e instanceof Error},vu=function(e){return Object.prototype.toString.call(e).match(/^\\\\[object (.*)\\\\]$/)[1].toLowerCase()},Mu=function(e){if(\"string\"!=typeof e)return!1;var t=e[0];return!/[^a-zA-Z0-9]/.test(t)},yu=0;Date.now||(Date.now=function(){return(new Date).getTime()});var Iu={now:function(){0===yu&&(yu=Date.now()-1);var e=Date.now()-yu;return e>4294967295?(yu+=4294967295,Date.now()-yu):e},utc:function(){return Math.round(Date.now()/1e3)}},Eu=function e(t,n,o,r){if(!fu(t)||!fu(n))return 0;for(var a,s=0,i=Object.keys(n),u=0,c=i.length;u<c;u++)if(a=i[u],!(hu(n[a])||o&&o.includes(a)))if(fu(t[a])&&fu(n[a]))s+=e(t[a],n[a],o,r);else{if(r&&r.includes(n[a]))continue;t[a]!==n[a]&&(t[a]=n[a],s+=1)}return s},Tu=function(e){return JSON.stringify(e,[\"message\",\"code\"])},Au=function(e){if(0===e.length)return 0;for(var t=0,n=0,o=\"undefined\"!=typeof document&&void 0!==document.characterSet?document.characterSet:\"UTF-8\";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:!1===o?3:2;return n},Su=function(e){var t=e||99999999;return Math.round(Math.random()*t)},Du=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",Nu=Du.length,Cu=function(e,t){for(var n in e)if(e[n]===t)return!0;return!1},ku={},Lu=function(){if(pi)return\"https:\";if(gi&&\"undefined\"==typeof window)return\"https:\";var e=window.location.protocol;return[\"http:\",\"https:\"].indexOf(e)<0&&(e=\"http:\"),e},Ru=function(e){return-1===e.indexOf(\"http://\")||-1===e.indexOf(\"https://\")?\"https://\"+e:e.replace(/https|http/,\"https\")},Ou=function e(t){if(0===Object.getOwnPropertyNames(t).length)return Object.create(null);var n=Array.isArray(t)?[]:Object.create(null),o=\"\";for(var r in t)null!==t[r]?void 0!==t[r]?(o=Mn(t[r]),[\"string\",\"number\",\"function\",\"boolean\"].indexOf(o)>=0?n[r]=t[r]:n[r]=e(t[r])):n[r]=void 0:n[r]=null;return n};function Gu(e,t){gu(e)&&gu(t)?t.forEach((function(t){var n=t.key,o=t.value,r=e.find((function(e){return e.key===n}));r?r.value=o:e.push({key:n,value:o})})):Qi.warn(\"updateCustomField target 或 source 不是数组，忽略此次更新。\")}var bu=function(e){return e===Yn.GRP_PUBLIC},wu=function(e){return e===Yn.GRP_AVCHATROOM},Pu=function(e){var t=e.type,n=e.groupID;return t===Yn.GRP_COMMUNITY||\"\".concat(n).startsWith(iu)},Uu=function(e){return lu(e)&&e.slice(0,3)===Yn.CONV_C2C},Fu=function(e){return lu(e)&&e.slice(0,5)===Yn.CONV_GROUP},qu=function(e){return lu(e)&&e===Yn.CONV_SYSTEM};function xu(e,t){var n={};return Object.keys(e).forEach((function(o){n[o]=t(e[o],o)})),n}function Vu(e){return pi?new Promise((function(t,n){hi.getImageInfo({src:e,success:function(e){t({width:e.width,height:e.height})},fail:function(){t({width:0,height:0})}})})):Ni&&9===Ci?Promise.resolve({width:0,height:0}):new Promise((function(t,n){var o=new Image;o.onload=function(){t({width:this.width,height:this.height}),o=null},o.onerror=function(){t({width:0,height:0}),o=null},o.src=e}))}function Ku(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return\"\".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())}function Bu(){var e=\"unknown\";if(Oi&&(e=\"mac\"),Ri&&(e=\"windows\"),Ii&&(e=\"ios\"),Ti&&(e=\"android\"),pi)try{var t=hi.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(zI){}return e}function Hu(e){var t=e.originUrl,n=void 0===t?void 0:t,o=e.originWidth,r=e.originHeight,a=e.min,s=void 0===a?198:a,i=parseInt(o),u=parseInt(r),c={url:void 0,width:0,height:0};if((i<=u?i:u)<=s)c.url=n,c.width=i,c.height=u;else{u<=i?(c.width=Math.ceil(i*s/u),c.height=s):(c.width=s,c.height=Math.ceil(u*s/i));var l=n&&n.indexOf(\"?\")>-1?\"\".concat(n,\"&\"):\"\".concat(n,\"?\");c.url=\"\".concat(l,198===s?\"imageView2/3/w/198/h/198\":\"imageView2/3/w/720/h/720\")}return hu(n)?On(c,[\"url\"]):c}function ju(e){var t=e[2];e[2]=e[1],e[1]=t;for(var n=0;n<e.length;n++)e[n].setType(n)}function Wu(e){var t=e.servcmd;return t.slice(t.indexOf(\".\")+1)}function Yu(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function $u(e,t){return e.includes(t)}function zu(e,t){return e.includes(t)}var Ju=Object.prototype.hasOwnProperty;function Xu(e){if(null==e)return!0;if(\"boolean\"==typeof e)return!1;if(\"number\"==typeof e)return 0===e;if(\"string\"==typeof e)return 0===e.length;if(\"function\"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return\"\"===e.message;if(pu(e)){for(var t in e)if(Ju.call(e,t))return!1;return!0}return!(\"map\"!==vu(e)&&!function(e){return\"set\"===vu(e)}(e)&&!uu(e))&&0===e.size}function Qu(e,t,n){if(void 0===t)return!0;var o=!0;if(\"object\"===vo(t).toLowerCase())Object.keys(t).forEach((function(r){var a=1===e.length?e[0][r]:void 0;o=!!Zu(a,t[r],n,r)&&o}));else if(\"array\"===vo(t).toLowerCase())for(var r=0;r<t.length;r++)o=!!Zu(e[r],t[r],n,t[r].name)&&o;if(o)return o;throw new Error(\"Params validate failed.\")}function Zu(e,t,n,o){if(void 0===t)return!0;var r=!0;return t.required&&Xu(e)&&(Hi.error(\"TIM [\".concat(n,\\'] Missing required params: \"\\').concat(o,\\'\".\\')),r=!1),Xu(e)||vo(e).toLowerCase()===t.type.toLowerCase()||(Hi.error(\"TIM [\".concat(n,\\'] Invalid params: type check failed for \"\\').concat(o,\\'\".Expected \\').concat(t.type,\".\")),r=!1),t.validator&&!t.validator(e)&&(Hi.error(\"TIM [\".concat(n,\"] Invalid params: custom validator check failed for params.\")),r=!1),r}var ec={f:qe},tc=C.f,nc=He.forEach,oc=H(\"hidden\"),rc=qe(\"toPrimitive\"),ac=Q.set,sc=Q.getterFor(\"Symbol\"),ic=Object.prototype,uc=o.Symbol,cc=ne(\"JSON\",\"stringify\"),lc=S.f,dc=C.f,pc=mr.f,gc=u.f,hc=q(\"symbols\"),fc=q(\"op-symbols\"),_c=q(\"string-to-symbol-registry\"),mc=q(\"symbol-to-string-registry\"),vc=q(\"wks\"),Mc=o.QObject,yc=!Mc||!Mc.prototype||!Mc.prototype.findChild,Ic=a&&r((function(){return 7!=kt(dc({},\"a\",{get:function(){return dc(this,\"a\",{value:7}).a}})).a}))?function(e,t,n){var o=lc(ic,t);o&&delete ic[t],dc(e,t,n),o&&e!==ic&&dc(ic,t,o)}:dc,Ec=function(e,t){var n=hc[e]=kt(uc.prototype);return ac(n,{type:\"Symbol\",tag:e,description:t}),a||(n.description=t),n},Tc=we?function(e){return\"symbol\"==typeof e}:function(e){return Object(e)instanceof uc},Ac=function(e,t,n){e===ic&&Ac(fc,t,n),D(e);var o=m(t,!0);return D(n),M(hc,o)?(n.enumerable?(M(e,oc)&&e[oc][o]&&(e[oc][o]=!1),n=kt(n,{enumerable:c(0,!1)})):(M(e,oc)||dc(e,oc,c(1,{})),e[oc][o]=!0),Ic(e,o,n)):dc(e,o,n)},Sc=function(e,t){D(e);var n=f(t),o=Et(n).concat(kc(n));return nc(o,(function(t){a&&!Dc.call(n,t)||Ac(e,t,n[t])})),e},Dc=function(e){var t=m(e,!0),n=gc.call(this,t);return!(this===ic&&M(hc,t)&&!M(fc,t))&&(!(n||!M(this,t)||!M(hc,t)||M(this,oc)&&this[oc][t])||n)},Nc=function(e,t){var n=f(e),o=m(t,!0);if(n!==ic||!M(hc,o)||M(fc,o)){var r=lc(n,o);return!r||!M(hc,o)||M(n,oc)&&n[oc][o]||(r.enumerable=!0),r}},Cc=function(e){var t=pc(f(e)),n=[];return nc(t,(function(e){M(hc,e)||M(j,e)||n.push(e)})),n},kc=function(e){var t=e===ic,n=pc(t?fc:f(e)),o=[];return nc(n,(function(e){!M(hc,e)||t&&!M(ic,e)||o.push(hc[e])})),o};if(be||(Z((uc=function(){if(this instanceof uc)throw TypeError(\"Symbol is not a constructor\");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=K(e),n=function(e){this===ic&&n.call(fc,e),M(this,oc)&&M(this[oc],t)&&(this[oc][t]=!1),Ic(this,t,c(1,e))};return a&&yc&&Ic(ic,t,{configurable:!0,set:n}),Ec(t,e)}).prototype,\"toString\",(function(){return sc(this).tag})),Z(uc,\"withoutSetter\",(function(e){return Ec(K(e),e)})),u.f=Dc,C.f=Ac,S.f=Nc,me.f=mr.f=Cc,ve.f=kc,ec.f=function(e){return Ec(qe(e),e)},a&&(dc(uc.prototype,\"description\",{configurable:!0,get:function(){return sc(this).description}}),Z(ic,\"propertyIsEnumerable\",Dc,{unsafe:!0}))),ke({global:!0,wrap:!0,forced:!be,sham:!be},{Symbol:uc}),nc(Et(vc),(function(e){!function(e){var t=ee.Symbol||(ee.Symbol={});M(t,e)||tc(t,e,{value:ec.f(e)})}(e)})),ke({target:\"Symbol\",stat:!0,forced:!be},{for:function(e){var t=String(e);if(M(_c,t))return _c[t];var n=uc(t);return _c[t]=n,mc[n]=t,n},keyFor:function(e){if(!Tc(e))throw TypeError(e+\" is not a symbol\");if(M(mc,e))return mc[e]},useSetter:function(){yc=!0},useSimple:function(){yc=!1}}),ke({target:\"Object\",stat:!0,forced:!be,sham:!a},{create:function(e,t){return void 0===t?kt(e):Sc(kt(e),t)},defineProperty:Ac,defineProperties:Sc,getOwnPropertyDescriptor:Nc}),ke({target:\"Object\",stat:!0,forced:!be},{getOwnPropertyNames:Cc,getOwnPropertySymbols:kc}),ke({target:\"Object\",stat:!0,forced:r((function(){ve.f(1)}))},{getOwnPropertySymbols:function(e){return ve.f(Oe(e))}}),cc){var Lc=!be||r((function(){var e=uc();return\"[null]\"!=cc([e])||\"{}\"!=cc({a:e})||\"{}\"!=cc(Object(e))}));ke({target:\"JSON\",stat:!0,forced:Lc},{stringify:function(e,t,n){for(var o,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(o=t,(_(t)||void 0!==e)&&!Tc(e))return Ge(t)||(t=function(e,t){if(\"function\"==typeof o&&(t=o.call(this,e,t)),!Tc(t))return t}),r[1]=t,cc.apply(null,r)}})}uc.prototype[rc]||k(uc.prototype,rc,uc.prototype.valueOf),tn(uc,\"Symbol\"),j[oc]=!0;var Rc=C.f,Oc=o.Symbol;if(a&&\"function\"==typeof Oc&&(!(\"description\"in Oc.prototype)||void 0!==Oc().description)){var Gc={},bc=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof bc?new Oc(e):void 0===e?Oc():Oc(e);return\"\"===e&&(Gc[t]=!0),t};ye(bc,Oc);var wc=bc.prototype=Oc.prototype;wc.constructor=bc;var Pc=wc.toString,Uc=\"Symbol(test)\"==String(Oc(\"test\")),Fc=/^Symbol\\\\((.*)\\\\)[^)]+$/;Rc(wc,\"description\",{configurable:!0,get:function(){var e=_(this)?this.valueOf():this,t=Pc.call(e);if(M(Gc,e))return\"\";var n=Uc?t.slice(7,-1):t.replace(Fc,\"$1\");return\"\"===n?void 0:n}}),ke({global:!0,forced:!0},{Symbol:bc})}var qc={UNSEND:\"unSend\",SUCCESS:\"success\",FAIL:\"fail\"},xc={NOT_START:\"notStart\",PENDING:\"pengding\",RESOLVED:\"resolved\",REJECTED:\"rejected\"},Vc=function(e){return!!e&&(!!(Uu(e)||Fu(e)||qu(e))||(console.warn(\"非法的会话 ID:\".concat(e,\"。会话 ID 组成方式：C2C + userID（单聊）GROUP + groupID（群聊）@TIM#SYSTEM（系统通知会话）\")),!1))},Kc=\"请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#\",Bc=function(e){return e.param?\"\".concat(e.api,\" \").concat(e.param,\" \").concat(e.desc,\"。\").concat(Kc).concat(e.api):\"\".concat(e.api,\" \").concat(e.desc,\"。\").concat(Kc).concat(e.api)},Hc={type:\"String\",required:!0},jc={type:\"Array\",required:!0},Wc={type:\"Object\",required:!0},Yc={login:{userID:Hc,userSig:Hc},addToBlacklist:{userIDList:jc},on:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Bc({api:\"on\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Bc({api:\"on\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"on 接口的 handler 参数推荐使用具名函数。具名函数可以使用 off 接口取消订阅，匿名函数无法取消订阅。\"),!0)}}],once:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Bc({api:\"once\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Bc({api:\"once\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"once 接口的 handler 参数推荐使用具名函数。\"),!0)}}],off:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Bc({api:\"off\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Bc({api:\"off\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"off 接口无法为匿名函数取消监听事件。\"),!0)}}],sendMessage:[Sn({name:\"message\"},Wc)],getMessageList:{conversationID:Sn({},Hc,{validator:function(e){return Vc(e)}}),nextReqMessageID:{type:\"String\"},count:{type:\"Number\",validator:function(e){return!(!hu(e)&&!/^[1-9][0-9]*$/.test(e))||(console.warn(Bc({api:\"getMessageList\",param:\"count\",desc:\"必须为正整数\"})),!1)}}},setMessageRead:{conversationID:Sn({},Hc,{validator:function(e){return Vc(e)}})},setAllMessageRead:{scope:{type:\"String\",required:!1,validator:function(e){return!e||-1!==[Yn.READ_ALL_C2C_MSG,Yn.READ_ALL_GROUP_MSG,Yn.READ_ALL_MSG].indexOf(e)||(console.warn(Bc({api:\"setAllMessageRead\",param:\"scope\",desc:\"取值必须为 TIM.TYPES.READ_ALL_C2C_MSG, TIM.TYPES.READ_ALL_GROUP_MSG 或 TIM.TYPES.READ_ALL_MSG\"})),!1)}}},getConversationProfile:[Sn({name:\"conversationID\"},Hc,{validator:function(e){return Vc(e)}})],deleteConversation:[Sn({name:\"conversationID\"},Hc,{validator:function(e){return Vc(e)}})],pinConversation:{conversationID:Sn({},Hc,{validator:function(e){return Vc(e)}}),isPinned:Sn({},{type:\"Boolean\",required:!0})},getConversationList:[{name:\"options\",type:\"Array\",validator:function(e){return!!hu(e)||(0!==e.length||(console.warn(Bc({api:\"getConversationList\",desc:\"获取指定会话时不能传入空数组\"})),!1))}}],getGroupList:{groupProfileFilter:{type:\"Array\"}},getGroupProfile:{groupID:Hc,groupCustomFieldFilter:{type:\"Array\"},memberCustomFieldFilter:{type:\"Array\"}},getGroupProfileAdvance:{groupIDList:jc},createGroup:{name:Hc},joinGroup:{groupID:Hc,type:{type:\"String\"},applyMessage:{type:\"String\"}},quitGroup:[Sn({name:\"groupID\"},Hc)],handleApplication:{message:Wc,handleAction:Hc,handleMessage:{type:\"String\"}},changeGroupOwner:{groupID:Hc,newOwnerID:Hc},updateGroupProfile:{groupID:Hc,muteAllMembers:{type:\"Boolean\"}},dismissGroup:[Sn({name:\"groupID\"},Hc)],searchGroupByID:[Sn({name:\"groupID\"},Hc)],initGroupAttributes:{groupID:Hc,groupAttributes:Sn({},Wc,{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!lu(e[n]))return console.warn(Bc({api:\"initGroupAttributes\",desc:\"群属性 value 必须是字符串\"})),t=!1})),t}})},setGroupAttributes:{groupID:Hc,groupAttributes:Sn({},Wc,{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!lu(e[n]))return console.warn(Bc({api:\"setGroupAttributes\",desc:\"群属性 value 必须是字符串\"})),t=!1})),t}})},deleteGroupAttributes:{groupID:Hc,keyList:{type:\"Array\",validator:function(e){if(hu(e))return console.warn(Bc({api:\"deleteGroupAttributes\",desc:\"缺少必填参数：keyList\"})),!1;if(!gu(e))return!1;if(!Xu(e)){var t=!0;return e.forEach((function(e){if(!lu(e))return console.warn(Bc({api:\"deleteGroupAttributes\",desc:\"群属性 key 必须是字符串\"})),t=!1})),t}return!0}}},getGroupAttributes:{groupID:Hc,keyList:{type:\"Array\",validator:function(e){if(hu(e))return console.warn(Bc({api:\"getGroupAttributes\",desc:\"缺少必填参数：keyList\"})),!1;if(!gu(e))return!1;if(!Xu(e)){var t=!0;return e.forEach((function(e){if(!lu(e))return console.warn(Bc({api:\"getGroupAttributes\",desc:\"群属性 key 必须是字符串\"})),t=!1})),t}return!0}}},getGroupMemberList:{groupID:Hc,count:{type:\"Number\"}},getGroupMemberProfile:{groupID:Hc,userIDList:jc,memberCustomFieldFilter:{type:\"Array\"}},addGroupMember:{groupID:Hc,userIDList:jc},setGroupMemberRole:{groupID:Hc,userID:Hc,role:Hc},setGroupMemberMuteTime:{groupID:Hc,userID:Hc,muteTime:{type:\"Number\",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:Hc,userID:{type:\"String\"},nameCard:{type:\"String\",validator:function(e){return lu(e)?(e.length,!0):(console.warn(Bc({api:\"setGroupMemberNameCard\",param:\"nameCard\",desc:\"类型必须为 String\"})),!1)}}},setGroupMemberCustomField:{groupID:Hc,userID:{type:\"String\"},memberCustomField:jc},deleteGroupMember:{groupID:Hc},createTextMessage:{to:Hc,conversationType:Hc,payload:Sn({},Wc,{validator:function(e){return pu(e)?lu(e.text)?0!==e.text.length||(console.warn(Bc({api:\"createTextMessage\",desc:\"消息内容不能为空\"})),!1):(console.warn(Bc({api:\"createTextMessage\",param:\"payload.text\",desc:\"类型必须为 String\"})),!1):(console.warn(Bc({api:\"createTextMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createTextAtMessage:{to:Hc,conversationType:Hc,payload:Sn({},Wc,{validator:function(e){return pu(e)?lu(e.text)?0===e.text.length?(console.warn(Bc({api:\"createTextAtMessage\",desc:\"消息内容不能为空\"})),!1):!(e.atUserList&&!gu(e.atUserList))||(console.warn(Bc({api:\"createTextAtMessage\",desc:\"payload.atUserList 类型必须为数组\"})),!1):(console.warn(Bc({api:\"createTextAtMessage\",param:\"payload.text\",desc:\"类型必须为 String\"})),!1):(console.warn(Bc({api:\"createTextAtMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createCustomMessage:{to:Hc,conversationType:Hc,payload:Sn({},Wc,{validator:function(e){return pu(e)?e.data&&!lu(e.data)?(console.warn(Bc({api:\"createCustomMessage\",param:\"payload.data\",desc:\"类型必须为 String\"})),!1):e.description&&!lu(e.description)?(console.warn(Bc({api:\"createCustomMessage\",param:\"payload.description\",desc:\"类型必须为 String\"})),!1):!(e.extension&&!lu(e.extension))||(console.warn(Bc({api:\"createCustomMessage\",param:\"payload.extension\",desc:\"类型必须为 String\"})),!1):(console.warn(Bc({api:\"createCustomMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createImageMessage:{to:Hc,conversationType:Hc,payload:Sn({},Wc,{validator:function(e){if(!pu(e))return console.warn(Bc({api:\"createImageMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(hu(e.file))return console.warn(Bc({api:\"createImageMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(gi){if(!(e.file instanceof HTMLInputElement||uu(e.file)))return pu(e.file)&&\"undefined\"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(console.warn(Bc({api:\"createImageMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Bc({api:\"createImageMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Bc({api:\"createImageMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1}return!0},onProgress:{type:\"Function\",required:!1,validator:function(e){return hu(e)&&console.warn(Bc({api:\"createImageMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}})},createAudioMessage:{to:Hc,conversationType:Hc,payload:Sn({},Wc,{validator:function(e){return!!pu(e)||(console.warn(Bc({api:\"createAudioMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return hu(e)&&console.warn(Bc({api:\"createAudioMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createVideoMessage:{to:Hc,conversationType:Hc,payload:Sn({},Wc,{validator:function(e){if(!pu(e))return console.warn(Bc({api:\"createVideoMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(hu(e.file))return console.warn(Bc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(gi){if(!(e.file instanceof HTMLInputElement||uu(e.file)))return pu(e.file)&&\"undefined\"!=typeof uni?!!uu(e.file.tempFile)||(console.warn(Bc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Bc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Bc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1}return!0}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return hu(e)&&console.warn(Bc({api:\"createVideoMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createFaceMessage:{to:Hc,conversationType:Hc,payload:Sn({},Wc,{validator:function(e){return pu(e)?cu(e.index)?!!lu(e.data)||(console.warn(Bc({api:\"createFaceMessage\",param:\"payload.data\",desc:\"类型必须为 String\"})),!1):(console.warn(Bc({api:\"createFaceMessage\",param:\"payload.index\",desc:\"类型必须为 Number\"})),!1):(console.warn(Bc({api:\"createFaceMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createFileMessage:{to:Hc,conversationType:Hc,payload:Sn({},Wc,{validator:function(e){if(!pu(e))return console.warn(Bc({api:\"createFileMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(hu(e.file))return console.warn(Bc({api:\"createFileMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(gi){if(!(e.file instanceof HTMLInputElement||uu(e.file)))return pu(e.file)&&\"undefined\"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(console.warn(Bc({api:\"createFileMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Bc({api:\"createFileMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Bc({api:\"createFileMessage\",desc:\"您没有选择文件，无法发送\"})),!1}return!0}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return hu(e)&&console.warn(Bc({api:\"createFileMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createLocationMessage:{to:Hc,conversationType:Hc,payload:Sn({},Wc,{validator:function(e){return pu(e)?lu(e.description)?cu(e.longitude)?!!cu(e.latitude)||(console.warn(Bc({api:\"createLocationMessage\",param:\"payload.latitude\",desc:\"类型必须为 Number\"})),!1):(console.warn(Bc({api:\"createLocationMessage\",param:\"payload.longitude\",desc:\"类型必须为 Number\"})),!1):(console.warn(Bc({api:\"createLocationMessage\",param:\"payload.description\",desc:\"类型必须为 String\"})),!1):(console.warn(Bc({api:\"createLocationMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createMergerMessage:{to:Hc,conversationType:Hc,payload:Sn({},Wc,{validator:function(e){if(Xu(e.messageList))return console.warn(Bc({api:\"createMergerMessage\",desc:\"不能为空数组\"})),!1;if(Xu(e.compatibleText))return console.warn(Bc({api:\"createMergerMessage\",desc:\"类型必须为 String，且不能为空\"})),!1;var t=!1;return e.messageList.forEach((function(e){e.status===qc.FAIL&&(t=!0)})),!t||(console.warn(Bc({api:\"createMergerMessage\",desc:\"不支持合并已发送失败的消息\"})),!1)}})},revokeMessage:[Sn({name:\"message\"},Wc,{validator:function(e){return Xu(e)?(console.warn(\"revokeMessage 请传入消息（Message）实例\"),!1):e.conversationType===Yn.CONV_SYSTEM?(console.warn(\"revokeMessage 不能撤回系统会话消息，只能撤回单聊消息或群消息\"),!1):!0!==e.isRevoked||(console.warn(\"revokeMessage 消息已经被撤回，请勿重复操作\"),!1)}})],deleteMessage:[Sn({name:\"messageList\"},jc,{validator:function(e){return!Xu(e)||(console.warn(Bc({api:\"deleteMessage\",param:\"messageList\",desc:\"不能为空数组\"})),!1)}})],getUserProfile:{userIDList:{type:\"Array\",validator:function(e){return gu(e)?(0===e.length&&console.warn(Bc({api:\"getUserProfile\",param:\"userIDList\",desc:\"不能为空数组\"})),!0):(console.warn(Bc({api:\"getUserProfile\",param:\"userIDList\",desc:\"必须为数组\"})),!1)}}},updateMyProfile:{profileCustomField:{type:\"Array\",validator:function(e){return!!hu(e)||(!!gu(e)||(console.warn(Bc({api:\"updateMyProfile\",param:\"profileCustomField\",desc:\"必须为数组\"})),!1))}}},addFriend:{to:Hc,source:{type:\"String\",required:!0,validator:function(e){return!!e&&(e.startsWith(\"AddSource_Type_\")?!(e.replace(\"AddSource_Type_\",\"\").length>8)||(console.warn(Bc({api:\"addFriend\",desc:\"加好友来源字段的关键字长度不得超过8字节\"})),!1):(console.warn(Bc({api:\"addFriend\",desc:\"加好友来源字段的前缀必须是：AddSource_Type_\"})),!1))}},remark:{type:\"String\",required:!1,validator:function(e){return!(lu(e)&&e.length>96)||(console.warn(Bc({api:\"updateFriend\",desc:\" 备注长度最长不得超过 96 个字节\"})),!1)}}},deleteFriend:{userIDList:jc},checkFriend:{userIDList:jc},getFriendProfile:{userIDList:jc},updateFriend:{userID:Hc,remark:{type:\"String\",required:!1,validator:function(e){return!(lu(e)&&e.length>96)||(console.warn(Bc({api:\"updateFriend\",desc:\" 备注长度最长不得超过 96 个字节\"})),!1)}},friendCustomField:{type:\"Array\",required:!1,validator:function(e){if(e){if(!gu(e))return console.warn(Bc({api:\"updateFriend\",param:\"friendCustomField\",desc:\"必须为数组\"})),!1;var t=!0;return e.forEach((function(e){return lu(e.key)&&-1!==e.key.indexOf(\"Tag_SNS_Custom\")?lu(e.value)?e.value.length>8?(console.warn(Bc({api:\"updateFriend\",desc:\"好友自定义字段的关键字长度不得超过8字节\"})),t=!1):void 0:(console.warn(Bc({api:\"updateFriend\",desc:\"类型必须为 String\"})),t=!1):(console.warn(Bc({api:\"updateFriend\",desc:\"好友自定义字段的前缀必须是 Tag_SNS_Custom\"})),t=!1)})),t}return!0}}},acceptFriendApplication:{userID:Hc},refuseFriendApplication:{userID:Hc},deleteFriendApplication:{userID:Hc},createFriendGroup:{name:Hc},deleteFriendGroup:{name:Hc},addToFriendGroup:{name:Hc,userIDList:jc},removeFromFriendGroup:{name:Hc,userIDList:jc},renameFriendGroup:{oldName:Hc,newName:Hc},sendMessageReadReceipt:[{name:\"messageList\",type:\"Array\",validator:function(e){return gu(e)?0===e.length?(console.warn(Bc({api:\"sendMessageReadReceipt\",param:\"messageList\",desc:\"不能为空数组\"})),!1):(e.forEach((function(e){if(e.conversationType===Yn.CONV_C2C)return console.warn(Bc({api:\"sendMessageReadReceipt\",param:\"messageList\",desc:\"仅支持群消息\"})),!1})),!0):(console.warn(Bc({api:\"sendMessageReadReceipt\",param:\"messageList\",desc:\"必须为数组\"})),!1)}}],getMessageReadReceiptList:[{name:\"messageList\",type:\"Array\",validator:function(e){return gu(e)?0===e.length?(console.warn(Bc({api:\"getMessageReadReceiptList\",param:\"messageList\",desc:\"不能为空数组\"})),!1):(e.forEach((function(e){if(e.conversationType===Yn.CONV_C2C)return console.warn(Bc({api:\"getMessageReadReceiptList\",param:\"messageList\",desc:\"仅支持群消息\"})),!1})),!0):(console.warn(Bc({api:\"getMessageReadReceiptList\",param:\"messageList\",desc:\"必须为数组\"})),!1)}}]},$c={login:\"login\",logout:\"logout\",on:\"on\",once:\"once\",off:\"off\",setLogLevel:\"setLogLevel\",registerPlugin:\"registerPlugin\",destroy:\"destroy\",createTextMessage:\"createTextMessage\",createTextAtMessage:\"createTextAtMessage\",createImageMessage:\"createImageMessage\",createAudioMessage:\"createAudioMessage\",createVideoMessage:\"createVideoMessage\",createCustomMessage:\"createCustomMessage\",createFaceMessage:\"createFaceMessage\",createFileMessage:\"createFileMessage\",createLocationMessage:\"createLocationMessage\",createMergerMessage:\"createMergerMessage\",downloadMergerMessage:\"downloadMergerMessage\",createForwardMessage:\"createForwardMessage\",sendMessage:\"sendMessage\",resendMessage:\"resendMessage\",revokeMessage:\"revokeMessage\",deleteMessage:\"deleteMessage\",sendMessageReadReceipt:\"sendMessageReadReceipt\",getGroupMessageReadMemberList:\"getGroupMessageReadMemberList\",getMessageReadReceiptList:\"getMessageReadReceiptList\",getMessageList:\"getMessageList\",findMessage:\"findMessage\",setMessageRead:\"setMessageRead\",setAllMessageRead:\"setAllMessageRead\",getConversationList:\"getConversationList\",getConversationProfile:\"getConversationProfile\",deleteConversation:\"deleteConversation\",pinConversation:\"pinConversation\",getGroupList:\"getGroupList\",getGroupProfile:\"getGroupProfile\",createGroup:\"createGroup\",joinGroup:\"joinGroup\",updateGroupProfile:\"updateGroupProfile\",quitGroup:\"quitGroup\",dismissGroup:\"dismissGroup\",changeGroupOwner:\"changeGroupOwner\",searchGroupByID:\"searchGroupByID\",setMessageRemindType:\"setMessageRemindType\",handleGroupApplication:\"handleGroupApplication\",initGroupAttributes:\"initGroupAttributes\",setGroupAttributes:\"setGroupAttributes\",deleteGroupAttributes:\"deleteGroupAttributes\",getGroupAttributes:\"getGroupAttributes\",getGroupMemberProfile:\"getGroupMemberProfile\",getGroupMemberList:\"getGroupMemberList\",addGroupMember:\"addGroupMember\",deleteGroupMember:\"deleteGroupMember\",setGroupMemberNameCard:\"setGroupMemberNameCard\",setGroupMemberMuteTime:\"setGroupMemberMuteTime\",setGroupMemberRole:\"setGroupMemberRole\",setGroupMemberCustomField:\"setGroupMemberCustomField\",getGroupOnlineMemberCount:\"getGroupOnlineMemberCount\",getMyProfile:\"getMyProfile\",getUserProfile:\"getUserProfile\",updateMyProfile:\"updateMyProfile\",getBlacklist:\"getBlacklist\",addToBlacklist:\"addToBlacklist\",removeFromBlacklist:\"removeFromBlacklist\",getFriendList:\"getFriendList\",addFriend:\"addFriend\",deleteFriend:\"deleteFriend\",checkFriend:\"checkFriend\",updateFriend:\"updateFriend\",getFriendProfile:\"getFriendProfile\",getFriendApplicationList:\"getFriendApplicationList\",refuseFriendApplication:\"refuseFriendApplication\",deleteFriendApplication:\"deleteFriendApplication\",acceptFriendApplication:\"acceptFriendApplication\",setFriendApplicationRead:\"setFriendApplicationRead\",getFriendGroupList:\"getFriendGroupList\",createFriendGroup:\"createFriendGroup\",renameFriendGroup:\"renameFriendGroup\",deleteFriendGroup:\"deleteFriendGroup\",addToFriendGroup:\"addToFriendGroup\",removeFromFriendGroup:\"removeFromFriendGroup\",callExperimentalAPI:\"callExperimentalAPI\"},zc=!!Sr&&r((function(){Sr.prototype.finally.call({then:function(){}},(function(){}))}));ke({target:\"Promise\",proto:!0,real:!0,forced:zc},{finally:function(e){var t=Or(this,ne(\"Promise\")),n=\"function\"==typeof e;return this.then(n?function(n){return _a(t,e()).then((function(){return n}))}:e,n?function(n){return _a(t,e()).then((function(){throw n}))}:e)}}),\"function\"!=typeof Sr||Sr.prototype.finally||Z(Sr.prototype,\"finally\",ne(\"Promise\").prototype.finally);var Jc=[].slice,Xc=/MSIE .\\\\./.test($n),Qc=function(e){return function(t,n){var o=arguments.length>2,r=o?Jc.call(arguments,2):void 0;return e(o?function(){(\"function\"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};ke({global:!0,bind:!0,forced:Xc},{setTimeout:Qc(o.setTimeout),setInterval:Qc(o.setInterval)});var Zc=He.filter,el=eo(\"filter\"),tl=ze(\"filter\");ke({target:\"Array\",proto:!0,forced:!el||!tl},{filter:function(e){return Zc(this,e,arguments.length>1?arguments[1]:void 0)}});var nl,ol=\"sign\",rl=\"message\",al=\"user\",sl=\"c2c\",il=\"group\",ul=\"sns\",cl=\"groupMember\",ll=\"conversation\",dl=\"context\",pl=\"storage\",gl=\"eventStat\",hl=\"netMonitor\",fl=\"bigDataChannel\",_l=\"upload\",ml=\"plugin\",vl=\"syncUnreadMessage\",Ml=\"session\",yl=\"channel\",Il=\"message_loss_detection\",El=\"cloudControl\",Tl=\"workerTimer\",Al=\"pullGroupMessage\",Sl=\"qualityStat\",Dl=\"commercialConfig\",Nl=function(){function e(t){yn(this,e),this._moduleManager=t,this._className=\"\"}return En(e,[{key:\"isLoggedIn\",value:function(){return this._moduleManager.getModule(dl).isLoggedIn()}},{key:\"isOversea\",value:function(){return this._moduleManager.getModule(dl).isOversea()}},{key:\"getMyUserID\",value:function(){return this._moduleManager.getModule(dl).getUserID()}},{key:\"getMyTinyID\",value:function(){return this._moduleManager.getModule(dl).getTinyID()}},{key:\"getModule\",value:function(e){return this._moduleManager.getModule(e)}},{key:\"getPlatform\",value:function(){return fi}},{key:\"getNetworkType\",value:function(){return this._moduleManager.getModule(hl).getNetworkType()}},{key:\"probeNetwork\",value:function(){return this._moduleManager.getModule(hl).probe()}},{key:\"getCloudConfig\",value:function(e){return this._moduleManager.getModule(El).getCloudConfig(e)}},{key:\"emitOuterEvent\",value:function(e,t){this._moduleManager.getOuterEmitterInstance().emit(e,t)}},{key:\"emitInnerEvent\",value:function(e,t){this._moduleManager.getInnerEmitterInstance().emit(e,t)}},{key:\"getInnerEmitterInstance\",value:function(){return this._moduleManager.getInnerEmitterInstance()}},{key:\"generateTjgID\",value:function(e){return this._moduleManager.getModule(dl).getTinyID()+\"-\"+e.random}},{key:\"filterModifiedMessage\",value:function(e){if(!Xu(e)){var t=e.filter((function(e){return!0===e.isModified}));t.length>0&&this.emitOuterEvent(Wn.MESSAGE_MODIFIED,t)}}},{key:\"filterUnmodifiedMessage\",value:function(e){return Xu(e)?[]:e.filter((function(e){return!1===e.isModified}))}},{key:\"request\",value:function(e){return this._moduleManager.getModule(Ml).request(e)}},{key:\"canIUse\",value:function(e){return this._moduleManager.getModule(Dl).hasPurchasedFeature(e)}}]),e}(),Cl=\"wslogin\",kl=\"wslogout\",Ll=\"wshello\",Rl=\"KickOther\",Ol=\"getmsg\",Gl=\"authkey\",bl=\"sendmsg\",wl=\"send_group_msg\",Pl=\"portrait_get_all\",Ul=\"portrait_set\",Fl=\"black_list_get\",ql=\"black_list_add\",xl=\"black_list_delete\",Vl=\"friend_get\",Kl=\"friend_get_list\",Bl=\"friend_check\",Hl=\"friend_delete\",jl=\"friend_add\",Wl=\"friend_update\",Yl=\"friend_response\",$l=\"pendency_get\",zl=\"pendency_delete\",Jl=\"pendency_report\",Xl=\"group_get\",Ql=\"group_add\",Zl=\"group_delete\",ed=\"group_update\",td=\"msgwithdraw\",nd=\"msgreaded\",od=\"set_c2c_peer_mute_notifications\",rd=\"get_c2c_peer_mute_notifications\",ad=\"getroammsg\",sd=\"get_peer_read_time\",id=\"delete_c2c_msg_ramble\",ud=\"page_get\",cd=\"get\",ld=\"delete\",dd=\"top\",pd=\"deletemsg\",gd=\"get_joined_group_list\",hd=\"get_group_self_member_info\",fd=\"create_group\",_d=\"destroy_group\",md=\"modify_group_base_info\",vd=\"apply_join_group\",Md=\"apply_join_group_noauth\",yd=\"quit_group\",Id=\"get_group_public_info\",Ed=\"change_group_owner\",Td=\"handle_apply_join_group\",Ad=\"handle_invite_join_group\",Sd=\"group_msg_recall\",Dd=\"msg_read_report\",Nd=\"read_all_unread_msg\",Cd=\"group_msg_get\",kd=\"get_group_msg_receipt\",Ld=\"group_msg_receipt\",Rd=\"get_group_msg_receipt_detail\",Od=\"get_pendency\",Gd=\"deletemsg\",bd=\"get_msg\",wd=\"get_msg_noauth\",Pd=\"get_online_member_num\",Ud=\"delete_group_ramble_msg_by_seq\",Fd=\"set_group_attr\",qd=\"modify_group_attr\",xd=\"delete_group_attr\",Vd=\"clear_group_attr\",Kd=\"get_group_attr\",Bd=\"get_group_member_info\",Hd=\"get_specified_group_member_info\",jd=\"add_group_member\",Wd=\"delete_group_member\",Yd=\"modify_group_member_info\",$d=\"cos\",zd=\"pre_sig\",Jd=\"video_cover\",Xd=\"tim_web_report_v2\",Qd=\"alive\",Zd=\"msg_push\",ep=\"multi_msg_push_ws\",tp=\"ws_msg_push_ack\",np=\"stat_forceoffline\",op=\"save_relay_json_msg\",rp=\"get_relay_json_msg\",ap=\"fetch_config\",sp=\"push_configv2\",ip=\"fetch_imsdk_purchase_bitsv2\",up=\"push_imsdk_purchase_bitsv2\",cp=\"notify2\",lp={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_TINYID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,REPEAT_LOGIN:2025,COS_UNDETECTED:2040,COS_GET_SIG_FAIL:2041,MESSAGE_SEND_FAIL:2100,MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:2103,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_ONPROGRESS_FUNCTION_ERROR:2109,MESSAGE_REVOKE_FAIL:2110,MESSAGE_DELETE_FAIL:2111,MESSAGE_UNREAD_ALL_FAIL:2112,MESSAGE_CONTROL_INFO_FAIL:2113,READ_RECEIPT_SEQUENCE_LIST_EMPTY:2114,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_VIDEO_UPLOAD_FAIL:2350,MESSAGE_VIDEO_SIZE_LIMIT:2351,MESSAGE_VIDEO_TYPES_LIMIT:2352,MESSAGE_FILE_UPLOAD_FAIL:2400,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_MERGER_TYPE_INVALID:2450,MESSAGE_MERGER_KEY_INVALID:2451,MESSAGE_MERGER_DOWNLOAD_FAIL:2452,MESSAGE_FORWARD_TYPE_INVALID:2453,MESSAGE_AT_TYPE_INVALID:2454,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_WORK:2601,ILLEGAL_GROUP_ID:2602,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_Work:2622,MEMBER_NOT_IN_GROUP:2623,CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM:2641,CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN:2642,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:2662,CANNOT_KICK_MEMBER_IN_AVCHATROOM:2680,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,CANNOT_MUTE_SELF:2685,NOT_MY_FRIEND:2700,ALREADY_MY_FRIEND:2701,FRIEND_GROUP_EXISTED:2710,FRIEND_GROUP_NOT_EXIST:2711,FRIEND_APPLICATION_NOT_EXIST:2716,UPDATE_PROFILE_INVALID_PARAM:2721,UPDATE_PROFILE_NO_KEY:2722,ADD_BLACKLIST_INVALID_PARAM:2740,DEL_BLACKLIST_INVALID_PARAM:2741,CANNOT_ADD_SELF_TO_BLACKLIST:2742,ADD_FRIEND_INVALID_PARAM:2760,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NETWORK_BASE_OPTIONS_NO_URL:2802,NETWORK_UNDEFINED_SERVER_NAME:2803,NETWORK_PACKAGE_UNDEFINED:2804,NO_NETWORK:2805,CONVERTOR_IRREGULAR_PARAMS:2900,NOTICE_RUNLOOP_UNEXPECTED_CONDITION:2901,NOTICE_RUNLOOP_OFFSET_LOST:2902,UNCAUGHT_ERROR:2903,GET_LONGPOLL_ID_FAILED:2904,INVALID_OPERATION:2905,OVER_FREQUENCY_LIMIT:2996,CANNOT_FIND_PROTOCOL:2997,CANNOT_FIND_MODULE:2998,SDK_IS_NOT_READY:2999,LOGGING_IN:3e3,LOGIN_FAILED:3001,KICKED_OUT_MULT_DEVICE:3002,KICKED_OUT_MULT_ACCOUNT:3003,KICKED_OUT_USERSIG_EXPIRED:3004,LOGGED_OUT:3005,LONG_POLL_KICK_OUT:91101,MESSAGE_A2KEY_EXPIRED:20002,ACCOUNT_A2KEY_EXPIRED:70001,LONG_POLL_API_PARAM_ERROR:90001,HELLO_ANSWER_KICKED_OUT:1002,OPEN_SERVICE_OVERLOAD_ERROR:60022},dp={NO_SDKAPPID:\"无 SDKAppID\",NO_ACCOUNT_TYPE:\"无 accountType\",NO_IDENTIFIER:\"无 userID\",NO_USERSIG:\"无 userSig\",NO_TINYID:\"无 tinyID\",NO_A2KEY:\"无 a2key\",USER_NOT_LOGGED_IN:\"用户未登录\",REPEAT_LOGIN:\"重复登录\",COS_UNDETECTED:\"未检测到 COS 上传插件\",COS_GET_SIG_FAIL:\"获取 COS 预签名 URL 失败\",MESSAGE_SEND_FAIL:\"消息发送失败\",MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:\"MessageController.constructor() 需要参数 options\",MESSAGE_SEND_NEED_MESSAGE_INSTANCE:\"需要 Message 的实例\",MESSAGE_SEND_INVALID_CONVERSATION_TYPE:\\'Message.conversationType 只能为 \"C2C\" 或 \"GROUP\"\\',MESSAGE_FILE_IS_EMPTY:\"无法发送空文件\",MESSAGE_ONPROGRESS_FUNCTION_ERROR:\"回调函数运行时遇到错误，请检查接入侧代码\",MESSAGE_REVOKE_FAIL:\"消息撤回失败\",MESSAGE_DELETE_FAIL:\"消息删除失败\",MESSAGE_UNREAD_ALL_FAIL:\"设置所有未读消息为已读处理失败\",MESSAGE_CONTROL_INFO_FAIL:\"社群不支持消息发送控制选项\",READ_RECEIPT_SEQUENCE_LIST_EMPTY:\"发送群已读回执时 sequenceList 为空\",MESSAGE_IMAGE_SELECT_FILE_FIRST:\"请先选择一个图片\",MESSAGE_IMAGE_TYPES_LIMIT:\"只允许上传 jpg png jpeg gif bmp image webp 格式的图片\",MESSAGE_IMAGE_SIZE_LIMIT:\"图片大小超过20M，无法发送\",MESSAGE_AUDIO_UPLOAD_FAIL:\"语音上传失败\",MESSAGE_AUDIO_SIZE_LIMIT:\"语音大小大于20M，无法发送\",MESSAGE_VIDEO_UPLOAD_FAIL:\"视频上传失败\",MESSAGE_VIDEO_SIZE_LIMIT:\"视频大小超过100M，无法发送\",MESSAGE_VIDEO_TYPES_LIMIT:\"只允许上传 mp4 格式的视频\",MESSAGE_FILE_UPLOAD_FAIL:\"文件上传失败\",MESSAGE_FILE_SELECT_FILE_FIRST:\"请先选择一个文件\",MESSAGE_FILE_SIZE_LIMIT:\"文件大小超过100M，无法发送 \",MESSAGE_FILE_URL_IS_EMPTY:\"缺少必要的参数文件 URL\",MESSAGE_MERGER_TYPE_INVALID:\"非合并消息\",MESSAGE_MERGER_KEY_INVALID:\"合并消息的 messageKey 无效\",MESSAGE_MERGER_DOWNLOAD_FAIL:\"下载合并消息失败\",MESSAGE_FORWARD_TYPE_INVALID:\"选择的消息类型（如群提示消息）不可以转发\",MESSAGE_AT_TYPE_INVALID:\"社群不支持 @ 所有人\",CONVERSATION_NOT_FOUND:\"没有找到相应的会话，请检查传入参数\",USER_OR_GROUP_NOT_FOUND:\"没有找到相应的用户或群组，请检查传入参数\",CONVERSATION_UN_RECORDED_TYPE:\"未记录的会话类型\",ILLEGAL_GROUP_TYPE:\"非法的群类型，请检查传入参数\",CANNOT_JOIN_WORK:\"不能加入 Work 类型的群组\",ILLEGAL_GROUP_ID:\"群组 ID 非法，Public/Work/Meeting/AVChatRoom 类型群组不能以 @TGS#_ 为前缀，社群必须以 @TGS#_ 为前缀\",CANNOT_CHANGE_OWNER_IN_AVCHATROOM:\"AVChatRoom 类型的群组不能转让群主\",CANNOT_CHANGE_OWNER_TO_SELF:\"不能把群主转让给自己\",CANNOT_DISMISS_WORK:\"不能解散 Work 类型的群组\",MEMBER_NOT_IN_GROUP:\"用户不在该群组内\",JOIN_GROUP_FAIL:\"加群失败，请检查传入参数或重试\",CANNOT_ADD_MEMBER_IN_AVCHATROOM:\"AVChatRoom 类型的群不支持邀请群成员\",CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:\"非 AVChatRoom 类型的群组不允许匿名加群，请先登录后再加群\",CANNOT_KICK_MEMBER_IN_AVCHATROOM:\"不能在 AVChatRoom 类型的群组踢人\",NOT_OWNER:\"你不是群主，只有群主才有权限操作\",CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:\"不能在 Work / AVChatRoom 类型的群中设置群成员身份\",INVALID_MEMBER_ROLE:\"不合法的群成员身份，请检查传入参数\",CANNOT_SET_SELF_MEMBER_ROLE:\"不能设置自己的群成员身份，请检查传入参数\",CANNOT_MUTE_SELF:\"不能将自己禁言，请检查传入参数\",NOT_MY_FRIEND:\"非好友关系\",ALREADY_MY_FRIEND:\"已经是好友关系\",FRIEND_GROUP_EXISTED:\"好友分组已存在\",FRIEND_GROUP_NOT_EXIST:\"好友分组不存在\",FRIEND_APPLICATION_NOT_EXIST:\"好友申请不存在\",UPDATE_PROFILE_INVALID_PARAM:\"传入 updateMyProfile 接口的参数无效\",UPDATE_PROFILE_NO_KEY:\"updateMyProfile 无标配资料字段或自定义资料字段\",ADD_BLACKLIST_INVALID_PARAM:\"传入 addToBlacklist 接口的参数无效\",DEL_BLACKLIST_INVALID_PARAM:\"传入 removeFromBlacklist 接口的参数无效\",CANNOT_ADD_SELF_TO_BLACKLIST:\"不能拉黑自己\",ADD_FRIEND_INVALID_PARAM:\"传入 addFriend 接口的参数无效\",NETWORK_ERROR:\"网络错误\",NETWORK_TIMEOUT:\"请求超时\",NETWORK_BASE_OPTIONS_NO_URL:\"网络层初始化错误，缺少 URL 参数\",NETWORK_UNDEFINED_SERVER_NAME:\"打包错误，未定义的 serverName\",NETWORK_PACKAGE_UNDEFINED:\"未定义的 packageConfig\",NO_NETWORK:\"未连接到网络\",CONVERTOR_IRREGULAR_PARAMS:\"不规范的参数名称\",NOTICE_RUNLOOP_UNEXPECTED_CONDITION:\"意料外的通知条件\",NOTICE_RUNLOOP_OFFSET_LOST:\"_syncOffset 丢失\",GET_LONGPOLL_ID_FAILED:\"获取 longpolling id 失败\",UNCAUGHT_ERROR:\"未经明确定义的错误\",INVALID_OPERATION:\"无效操作，如调用了未定义或者未实现的方法等\",CANNOT_FIND_PROTOCOL:\"无法找到协议\",CANNOT_FIND_MODULE:\"无法找到模块，请参考：https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-03-sns.html\",SDK_IS_NOT_READY:\"接口需要 SDK 处于 ready 状态后才能调用\",LOGGING:\"用户正在登录中\",LOGIN_FAILED:\"用户登录失败\",KICKED_OUT_MULT_DEVICE:\"用户多终端登录被踢出\",KICKED_OUT_MULT_ACCOUNT:\"用户多实例登录被踢出\",KICKED_OUT_USERSIG_EXPIRED:\"用户 userSig 过期被踢出\",LOGGED_OUT:\"用户已登出\",OVER_FREQUENCY_LIMIT:\"超出 SDK 频率控制\",LONG_POLL_KICK_OUT:\"检测到多个 web 实例登录，消息通道下线\",OPEN_SERVICE_OVERLOAD_ERROR:\"后台服务正忙，请稍后再试\",MESSAGE_A2KEY_EXPIRED:\"消息错误码：UserSig 或 A2 失效。\",ACCOUNT_A2KEY_EXPIRED:\"帐号错误码：UserSig 已过期，请重新生成。建议 UserSig 有效期设置不小于24小时。\",LONG_POLL_API_PARAM_ERROR:\"longPoll API parameters error\"},pp=\"networkRTT\",gp=\"messageE2EDelay\",hp=\"sendMessageC2C\",fp=\"sendMessageGroup\",_p=\"sendMessageGroupAV\",mp=\"sendMessageRichMedia\",vp=\"cosUpload\",Mp=\"messageReceivedGroup\",yp=\"messageReceivedGroupAVPush\",Ip=\"messageReceivedGroupAVPull\",Ep=(Tn(nl={},pp,2),Tn(nl,gp,3),Tn(nl,hp,4),Tn(nl,fp,5),Tn(nl,_p,6),Tn(nl,mp,7),Tn(nl,Mp,8),Tn(nl,yp,9),Tn(nl,Ip,10),Tn(nl,vp,11),nl),Tp={info:4,warning:5,error:6},Ap={wifi:1,\"2g\":2,\"3g\":3,\"4g\":4,\"5g\":5,unknown:6,none:7,online:8},Sp={login:4},Dp=function(){function e(t){yn(this,e),this.eventType=Sp[t]||0,this.timestamp=0,this.networkType=8,this.code=0,this.message=\"\",this.moreMessage=\"\",this.extension=t,this.costTime=0,this.duplicate=!1,this.level=4,this.uiPlatform=void 0,this._sentFlag=!1,this._startts=Wi()}return En(e,[{key:\"updateTimeStamp\",value:function(){this.timestamp=Wi()}},{key:\"start\",value:function(e){return this._startts=e,this}},{key:\"end\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._sentFlag){var n=Wi();0===this.costTime&&(this.costTime=n-this._startts),this.setMoreMessage(\"startts:\".concat(this._startts,\" endts:\").concat(n)),t?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout((function(){e._sentFlag=!0,e._eventStatModule&&e._eventStatModule.pushIn(e)}),0)}}},{key:\"setError\",value:function(e,t,n){return e instanceof Error?(this._sentFlag||(this.setNetworkType(n),t?(e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message)):(this.setCode(lp.NO_NETWORK),this.setMoreMessage(dp.NO_NETWORK)),this.setLevel(\"error\")),this):(Qi.warn(\"SSOLogData.setError value not instanceof Error, please check!\"),this)}},{key:\"setCode\",value:function(e){return hu(e)||this._sentFlag||(\"ECONNABORTED\"===e&&(this.code=103),cu(e)?this.code=e:Qi.warn(\"SSOLogData.setCode value not a number, please check!\",e,Mn(e))),this}},{key:\"setMessage\",value:function(e){return hu(e)||this._sentFlag||(cu(e)&&(this.message=e.toString()),lu(e)&&(this.message=e)),this}},{key:\"setCostTime\",value:function(e){return this.costTime=e,this}},{key:\"setLevel\",value:function(e){return hu(e)||this._sentFlag||(this.level=Tp[e]),this}},{key:\"setMoreMessage\",value:function(e){return Xu(this.moreMessage)?this.moreMessage=\"\".concat(e):this.moreMessage+=\" \".concat(e),this}},{key:\"setNetworkType\",value:function(e){if(hu(e))Qi.warn(\"SSOLogData.setNetworkType value is undefined, please check!\");else{var t=Ap[e.toLowerCase()];hu(t)||(this.networkType=t)}return this}},{key:\"getStartTs\",value:function(){return this._startts}},{key:\"setUIPlatform\",value:function(e){this.uiPlatform=e}}],[{key:\"bindEventStatModule\",value:function(t){e.prototype._eventStatModule=t}}]),e}(),Np=\"sdkConstruct\",Cp=\"sdkReady\",kp=\"login\",Lp=\"logout\",Rp=\"kickedOut\",Op=\"registerPlugin\",Gp=\"kickOther\",bp=\"wsConnect\",wp=\"wsOnOpen\",Pp=\"wsOnClose\",Up=\"wsOnError\",Fp=\"networkChange\",qp=\"getCosAuthKey\",xp=\"getCosPreSigUrl\",Vp=\"getSnapshotInfo\",Kp=\"upload\",Bp=\"sendMessage\",Hp=\"sendMessageWithReceipt\",jp=\"getC2CRoamingMessages\",Wp=\"getGroupRoamingMessages\",Yp=\"getReadReceipt\",$p=\"getReadReceiptDetail\",zp=\"sendReadReceipt\",Jp=\"revokeMessage\",Xp=\"deleteMessage\",Qp=\"setC2CMessageRead\",Zp=\"setGroupMessageRead\",eg=\"emptyMessageBody\",tg=\"getPeerReadTime\",ng=\"uploadMergerMessage\",og=\"downloadMergerMessage\",rg=\"jsonParseError\",ag=\"messageE2EDelayException\",sg=\"getConversationList\",ig=\"getConversationProfile\",ug=\"deleteConversation\",cg=\"pinConversation\",lg=\"getConversationListInStorage\",dg=\"syncConversationList\",pg=\"setAllMessageRead\",gg=\"createGroup\",hg=\"applyJoinGroup\",fg=\"quitGroup\",_g=\"searchGroupByID\",mg=\"changeGroupOwner\",vg=\"handleGroupApplication\",Mg=\"handleGroupInvitation\",yg=\"setMessageRemindType\",Ig=\"dismissGroup\",Eg=\"updateGroupProfile\",Tg=\"getGroupList\",Ag=\"getGroupProfile\",Sg=\"getGroupListInStorage\",Dg=\"getGroupLastSequence\",Ng=\"getGroupMissingMessage\",Cg=\"pagingGetGroupList\",kg=\"getGroupSimplifiedInfo\",Lg=\"joinWithoutAuth\",Rg=\"initGroupAttributes\",Og=\"setGroupAttributes\",Gg=\"deleteGroupAttributes\",bg=\"getGroupAttributes\",wg=\"getGroupMemberList\",Pg=\"getGroupMemberProfile\",Ug=\"addGroupMember\",Fg=\"deleteGroupMember\",qg=\"setGroupMemberMuteTime\",xg=\"setGroupMemberNameCard\",Vg=\"setGroupMemberRole\",Kg=\"setGroupMemberCustomField\",Bg=\"getGroupOnlineMemberCount\",Hg=\"longPollingAVError\",jg=\"messageLoss\",Wg=\"messageStacked\",Yg=\"getUserProfile\",$g=\"updateMyProfile\",zg=\"getBlacklist\",Jg=\"addToBlacklist\",Xg=\"removeFromBlacklist\",Qg=\"addFriend\",Zg=\"checkFriend\",eh=\"removeFromFriendList\",th=\"getFriendProfile\",nh=\"getFriendList\",oh=\"updateFriend\",rh=\"getFriendApplicationList\",ah=\"deleteFriendApplication\",sh=\"acceptFriendApplication\",ih=\"refuseFriendApplication\",uh=\"setFriendApplicationRead\",ch=\"createFriendGroup\",lh=\"deleteFriendGroup\",dh=\"renameFriendGroup\",ph=\"addToFriendGroup\",gh=\"removeFromFriendGroup\",hh=\"getFriendGroupList\",fh=\"callbackFunctionError\",_h=\"fetchCloudControlConfig\",mh=\"pushedCloudControlConfig\",vh=\"fetchCommercialConfig\",Mh=\"pushedCommercialConfig\",yh=\"error\",Ih=\"lastMessageNotExist\",Eh=u.f,Th=function(e){return function(t){for(var n,o=f(t),r=Et(o),s=r.length,i=0,u=[];s>i;)n=r[i++],a&&!Eh.call(o,n)||u.push(e?[n,o[n]]:o[n]);return u}},Ah={entries:Th(!0),values:Th(!1)}.values;ke({target:\"Object\",stat:!0},{values:function(e){return Ah(e)}});var Sh=function(){function e(t){yn(this,e),this.type=Yn.MSG_TEXT,this.content={text:t.text||\"\"}}return En(e,[{key:\"setText\",value:function(e){this.content.text=e}},{key:\"sendable\",value:function(){return 0!==this.content.text.length}}]),e}(),Dh=Object.assign,Nh=Object.defineProperty,Ch=!Dh||r((function(){if(a&&1!==Dh({b:1},Dh(Nh({},\"a\",{enumerable:!0,get:function(){Nh(this,\"b\",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,\"abcdefghijklmnopqrst\".split(\"\").forEach((function(e){t[e]=e})),7!=Dh({},e)[n]||\"abcdefghijklmnopqrst\"!=Et(Dh({},t)).join(\"\")}))?function(e,t){for(var n=Oe(e),o=arguments.length,r=1,s=ve.f,i=u.f;o>r;)for(var c,l=g(arguments[r++]),d=s?Et(l).concat(s(l)):Et(l),p=d.length,h=0;p>h;)c=d[h++],a&&!i.call(l,c)||(n[c]=l[c]);return n}:Dh;ke({target:\"Object\",stat:!0,forced:Object.assign!==Ch},{assign:Ch});var kh=qe(\"iterator\"),Lh=!r((function(){var e=new URL(\"b?a=1&b=2&c=3\",\"http://a\"),t=e.searchParams,n=\"\";return e.pathname=\"c%20d\",t.forEach((function(e,o){t.delete(\"b\"),n+=o+e})),!t.sort||\"http://a/c%20d?a=1&c=3\"!==e.href||\"3\"!==t.get(\"c\")||\"a=1\"!==String(new URLSearchParams(\"?a=1\"))||!t[kh]||\"a\"!==new URL(\"https://a@b\").username||\"b\"!==new URLSearchParams(new URLSearchParams(\"a=b\")).get(\"a\")||\"xn--e1aybc\"!==new URL(\"http://тест\").host||\"#%D0%B1\"!==new URL(\"http://a#б\").hash||\"a1c3\"!==n||\"x\"!==new URL(\"http://x\",void 0).host})),Rh=/[^\\\\0-\\\\u007E]/,Oh=/[.\\\\u3002\\\\uFF0E\\\\uFF61]/g,Gh=\"Overflow: input needs wider integers to process\",bh=Math.floor,wh=String.fromCharCode,Ph=function(e){return e+22+75*(e<26)},Uh=function(e,t,n){var o=0;for(e=n?bh(e/700):e>>1,e+=bh(e/t);e>455;o+=36)e=bh(e/35);return bh(o+36*e/(e+38))},Fh=function(e){var t,n,o=[],r=(e=function(e){for(var t=[],n=0,o=e.length;n<o;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<o){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&r)<<10)+(1023&a)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,a=128,s=0,i=72;for(t=0;t<e.length;t++)(n=e[t])<128&&o.push(wh(n));var u=o.length,c=u;for(u&&o.push(\"-\");c<r;){var l=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=a&&n<l&&(l=n);var d=c+1;if(l-a>bh((2147483647-s)/d))throw RangeError(Gh);for(s+=(l-a)*d,a=l,t=0;t<e.length;t++){if((n=e[t])<a&&++s>2147483647)throw RangeError(Gh);if(n==a){for(var p=s,g=36;;g+=36){var h=g<=i?1:g>=i+26?26:g-i;if(p<h)break;var f=p-h,_=36-h;o.push(wh(Ph(h+f%_))),p=bh(f/_)}o.push(wh(Ph(p))),i=Uh(s,d,c==u),s=0,++c}}++s,++a}return o.join(\"\")},qh=function(e){var t=gt(e);if(\"function\"!=typeof t)throw TypeError(String(e)+\" is not iterable\");return D(t.call(e))},xh=ne(\"fetch\"),Vh=ne(\"Headers\"),Kh=qe(\"iterator\"),Bh=Q.set,Hh=Q.getterFor(\"URLSearchParams\"),jh=Q.getterFor(\"URLSearchParamsIterator\"),Wh=/\\\\+/g,Yh=Array(4),$h=function(e){return Yh[e-1]||(Yh[e-1]=RegExp(\"((?:%[\\\\\\\\da-f]{2}){\"+e+\"})\",\"gi\"))},zh=function(e){try{return decodeURIComponent(e)}catch(zI){return e}},Jh=function(e){var t=e.replace(Wh,\" \"),n=4;try{return decodeURIComponent(t)}catch(zI){for(;n;)t=t.replace($h(n--),zh);return t}},Xh=/[!\\'()~]|%20/g,Qh={\"!\":\"%21\",\"\\'\":\"%27\",\"(\":\"%28\",\")\":\"%29\",\"~\":\"%7E\",\"%20\":\"+\"},Zh=function(e){return Qh[e]},ef=function(e){return encodeURIComponent(e).replace(Xh,Zh)},tf=function(e,t){if(t)for(var n,o,r=t.split(\"&\"),a=0;a<r.length;)(n=r[a++]).length&&(o=n.split(\"=\"),e.push({key:Jh(o.shift()),value:Jh(o.join(\"=\"))}))},nf=function(e){this.entries.length=0,tf(this.entries,e)},of=function(e,t){if(e<t)throw TypeError(\"Not enough arguments\")},rf=rn((function(e,t){Bh(this,{type:\"URLSearchParamsIterator\",iterator:qh(Hh(e).entries),kind:t})}),\"Iterator\",(function(){var e=jh(this),t=e.kind,n=e.iterator.next(),o=n.value;return n.done||(n.value=\"keys\"===t?o.key:\"values\"===t?o.value:[o.key,o.value]),n})),af=function(){kr(this,af,\"URLSearchParams\");var e,t,n,o,r,a,s,i,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(Bh(l,{type:\"URLSearchParams\",entries:d,updateURL:function(){},updateSearchParams:nf}),void 0!==c)if(_(c))if(\"function\"==typeof(e=gt(c)))for(n=(t=e.call(c)).next;!(o=n.call(t)).done;){if((s=(a=(r=qh(D(o.value))).next).call(r)).done||(i=a.call(r)).done||!a.call(r).done)throw TypeError(\"Expected sequence with length 2\");d.push({key:s.value+\"\",value:i.value+\"\"})}else for(u in c)M(c,u)&&d.push({key:u,value:c[u]+\"\"});else tf(d,\"string\"==typeof c?\"?\"===c.charAt(0)?c.slice(1):c:c+\"\")},sf=af.prototype;Dr(sf,{append:function(e,t){of(arguments.length,2);var n=Hh(this);n.entries.push({key:e+\"\",value:t+\"\"}),n.updateURL()},delete:function(e){of(arguments.length,1);for(var t=Hh(this),n=t.entries,o=e+\"\",r=0;r<n.length;)n[r].key===o?n.splice(r,1):r++;t.updateURL()},get:function(e){of(arguments.length,1);for(var t=Hh(this).entries,n=e+\"\",o=0;o<t.length;o++)if(t[o].key===n)return t[o].value;return null},getAll:function(e){of(arguments.length,1);for(var t=Hh(this).entries,n=e+\"\",o=[],r=0;r<t.length;r++)t[r].key===n&&o.push(t[r].value);return o},has:function(e){of(arguments.length,1);for(var t=Hh(this).entries,n=e+\"\",o=0;o<t.length;)if(t[o++].key===n)return!0;return!1},set:function(e,t){of(arguments.length,1);for(var n,o=Hh(this),r=o.entries,a=!1,s=e+\"\",i=t+\"\",u=0;u<r.length;u++)(n=r[u]).key===s&&(a?r.splice(u--,1):(a=!0,n.value=i));a||r.push({key:s,value:i}),o.updateURL()},sort:function(){var e,t,n,o=Hh(this),r=o.entries,a=r.slice();for(r.length=0,n=0;n<a.length;n++){for(e=a[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}o.updateURL()},forEach:function(e){for(var t,n=Hh(this).entries,o=Re(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)o((t=n[r++]).value,t.key,this)},keys:function(){return new rf(this,\"keys\")},values:function(){return new rf(this,\"values\")},entries:function(){return new rf(this,\"entries\")}},{enumerable:!0}),Z(sf,Kh,sf.entries),Z(sf,\"toString\",(function(){for(var e,t=Hh(this).entries,n=[],o=0;o<t.length;)e=t[o++],n.push(ef(e.key)+\"=\"+ef(e.value));return n.join(\"&\")}),{enumerable:!0}),tn(af,\"URLSearchParams\"),ke({global:!0,forced:!Lh},{URLSearchParams:af}),Lh||\"function\"!=typeof xh||\"function\"!=typeof Vh||ke({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,o,r=[e];return arguments.length>1&&(t=arguments[1],_(t)&&(n=t.body,\"URLSearchParams\"===dt(n)&&((o=t.headers?new Vh(t.headers):new Vh).has(\"content-type\")||o.set(\"content-type\",\"application/x-www-form-urlencoded;charset=UTF-8\"),t=kt(t,{body:c(0,String(n)),headers:c(0,o)}))),r.push(t)),xh.apply(this,r)}});var uf,cf={URLSearchParams:af,getState:Hh},lf=jt.codeAt,df=o.URL,pf=cf.URLSearchParams,gf=cf.getState,hf=Q.set,ff=Q.getterFor(\"URL\"),_f=Math.floor,mf=Math.pow,vf=/[A-Za-z]/,Mf=/[\\\\d+\\\\-.A-Za-z]/,yf=/\\\\d/,If=/^(0x|0X)/,Ef=/^[0-7]+$/,Tf=/^\\\\d+$/,Af=/^[\\\\dA-Fa-f]+$/,Sf=/[\\\\u0000\\\\u0009\\\\u000A\\\\u000D #%/:?@[\\\\\\\\]]/,Df=/[\\\\u0000\\\\u0009\\\\u000A\\\\u000D #/:?@[\\\\\\\\]]/,Nf=/^[\\\\u0000-\\\\u001F ]+|[\\\\u0000-\\\\u001F ]+$/g,Cf=/[\\\\u0009\\\\u000A\\\\u000D]/g,kf=function(e,t){var n,o,r;if(\"[\"==t.charAt(0)){if(\"]\"!=t.charAt(t.length-1))return\"Invalid host\";if(!(n=Rf(t.slice(1,-1))))return\"Invalid host\";e.host=n}else if(qf(e)){if(t=function(e){var t,n,o=[],r=e.toLowerCase().replace(Oh,\".\").split(\".\");for(t=0;t<r.length;t++)n=r[t],o.push(Rh.test(n)?\"xn--\"+Fh(n):n);return o.join(\".\")}(t),Sf.test(t))return\"Invalid host\";if(null===(n=Lf(t)))return\"Invalid host\";e.host=n}else{if(Df.test(t))return\"Invalid host\";for(n=\"\",o=ht(t),r=0;r<o.length;r++)n+=Uf(o[r],Gf);e.host=n}},Lf=function(e){var t,n,o,r,a,s,i,u=e.split(\".\");if(u.length&&\"\"==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],o=0;o<t;o++){if(\"\"==(r=u[o]))return e;if(a=10,r.length>1&&\"0\"==r.charAt(0)&&(a=If.test(r)?16:8,r=r.slice(8==a?1:2)),\"\"===r)s=0;else{if(!(10==a?Tf:8==a?Ef:Af).test(r))return e;s=parseInt(r,a)}n.push(s)}for(o=0;o<t;o++)if(s=n[o],o==t-1){if(s>=mf(256,5-t))return null}else if(s>255)return null;for(i=n.pop(),o=0;o<n.length;o++)i+=n[o]*mf(256,3-o);return i},Rf=function(e){var t,n,o,r,a,s,i,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,p=function(){return e.charAt(d)};if(\":\"==p()){if(\":\"!=e.charAt(1))return;d+=2,l=++c}for(;p();){if(8==c)return;if(\":\"!=p()){for(t=n=0;n<4&&Af.test(p());)t=16*t+parseInt(p(),16),d++,n++;if(\".\"==p()){if(0==n)return;if(d-=n,c>6)return;for(o=0;p();){if(r=null,o>0){if(!(\".\"==p()&&o<4))return;d++}if(!yf.test(p()))return;for(;yf.test(p());){if(a=parseInt(p(),10),null===r)r=a;else{if(0==r)return;r=10*r+a}if(r>255)return;d++}u[c]=256*u[c]+r,2!=++o&&4!=o||c++}if(4!=o)return;break}if(\":\"==p()){if(d++,!p())return}else if(p())return;u[c++]=t}else{if(null!==l)return;d++,l=++c}}if(null!==l)for(s=c-l,c=7;0!=c&&s>0;)i=u[c],u[c--]=u[l+s-1],u[l+--s]=i;else if(8!=c)return;return u},Of=function(e){var t,n,o,r;if(\"number\"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=_f(e/256);return t.join(\".\")}if(\"object\"==typeof e){for(t=\"\",o=function(e){for(var t=null,n=1,o=null,r=0,a=0;a<8;a++)0!==e[a]?(r>n&&(t=o,n=r),o=null,r=0):(null===o&&(o=a),++r);return r>n&&(t=o,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),o===n?(t+=n?\":\":\"::\",r=!0):(t+=e[n].toString(16),n<7&&(t+=\":\")));return\"[\"+t+\"]\"}return e},Gf={},bf=Ch({},Gf,{\" \":1,\\'\"\\':1,\"<\":1,\">\":1,\"`\":1}),wf=Ch({},bf,{\"#\":1,\"?\":1,\"{\":1,\"}\":1}),Pf=Ch({},wf,{\"/\":1,\":\":1,\";\":1,\"=\":1,\"@\":1,\"[\":1,\"\\\\\\\\\":1,\"]\":1,\"^\":1,\"|\":1}),Uf=function(e,t){var n=lf(e,0);return n>32&&n<127&&!M(t,e)?e:encodeURIComponent(e)},Ff={ftp:21,file:null,http:80,https:443,ws:80,wss:443},qf=function(e){return M(Ff,e.scheme)},xf=function(e){return\"\"!=e.username||\"\"!=e.password},Vf=function(e){return!e.host||e.cannotBeABaseURL||\"file\"==e.scheme},Kf=function(e,t){var n;return 2==e.length&&vf.test(e.charAt(0))&&(\":\"==(n=e.charAt(1))||!t&&\"|\"==n)},Bf=function(e){var t;return e.length>1&&Kf(e.slice(0,2))&&(2==e.length||\"/\"===(t=e.charAt(2))||\"\\\\\\\\\"===t||\"?\"===t||\"#\"===t)},Hf=function(e){var t=e.path,n=t.length;!n||\"file\"==e.scheme&&1==n&&Kf(t[0],!0)||t.pop()},jf=function(e){return\".\"===e||\"%2e\"===e.toLowerCase()},Wf={},Yf={},$f={},zf={},Jf={},Xf={},Qf={},Zf={},e_={},t_={},n_={},o_={},r_={},a_={},s_={},i_={},u_={},c_={},l_={},d_={},p_={},g_=function(e,t,n,o){var r,a,s,i,u,c=n||Wf,l=0,d=\"\",p=!1,g=!1,h=!1;for(n||(e.scheme=\"\",e.username=\"\",e.password=\"\",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Nf,\"\")),t=t.replace(Cf,\"\"),r=ht(t);l<=r.length;){switch(a=r[l],c){case Wf:if(!a||!vf.test(a)){if(n)return\"Invalid scheme\";c=$f;continue}d+=a.toLowerCase(),c=Yf;break;case Yf:if(a&&(Mf.test(a)||\"+\"==a||\"-\"==a||\".\"==a))d+=a.toLowerCase();else{if(\":\"!=a){if(n)return\"Invalid scheme\";d=\"\",c=$f,l=0;continue}if(n&&(qf(e)!=M(Ff,d)||\"file\"==d&&(xf(e)||null!==e.port)||\"file\"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(qf(e)&&Ff[e.scheme]==e.port&&(e.port=null));d=\"\",\"file\"==e.scheme?c=a_:qf(e)&&o&&o.scheme==e.scheme?c=zf:qf(e)?c=Zf:\"/\"==r[l+1]?(c=Jf,l++):(e.cannotBeABaseURL=!0,e.path.push(\"\"),c=l_)}break;case $f:if(!o||o.cannotBeABaseURL&&\"#\"!=a)return\"Invalid scheme\";if(o.cannotBeABaseURL&&\"#\"==a){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",e.cannotBeABaseURL=!0,c=p_;break}c=\"file\"==o.scheme?a_:Xf;continue;case zf:if(\"/\"!=a||\"/\"!=r[l+1]){c=Xf;continue}c=e_,l++;break;case Jf:if(\"/\"==a){c=t_;break}c=c_;continue;case Xf:if(e.scheme=o.scheme,a==uf)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if(\"/\"==a||\"\\\\\\\\\"==a&&qf(e))c=Qf;else if(\"?\"==a)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=\"\",c=d_;else{if(\"#\"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),c=c_;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",c=p_}break;case Qf:if(!qf(e)||\"/\"!=a&&\"\\\\\\\\\"!=a){if(\"/\"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,c=c_;continue}c=t_}else c=e_;break;case Zf:if(c=e_,\"/\"!=a||\"/\"!=d.charAt(l+1))continue;l++;break;case e_:if(\"/\"!=a&&\"\\\\\\\\\"!=a){c=t_;continue}break;case t_:if(\"@\"==a){p&&(d=\"%40\"+d),p=!0,s=ht(d);for(var f=0;f<s.length;f++){var _=s[f];if(\":\"!=_||h){var m=Uf(_,Pf);h?e.password+=m:e.username+=m}else h=!0}d=\"\"}else if(a==uf||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&qf(e)){if(p&&\"\"==d)return\"Invalid authority\";l-=ht(d).length+1,d=\"\",c=n_}else d+=a;break;case n_:case o_:if(n&&\"file\"==e.scheme){c=i_;continue}if(\":\"!=a||g){if(a==uf||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&qf(e)){if(qf(e)&&\"\"==d)return\"Invalid host\";if(n&&\"\"==d&&(xf(e)||null!==e.port))return;if(i=kf(e,d))return i;if(d=\"\",c=u_,n)return;continue}\"[\"==a?g=!0:\"]\"==a&&(g=!1),d+=a}else{if(\"\"==d)return\"Invalid host\";if(i=kf(e,d))return i;if(d=\"\",c=r_,n==o_)return}break;case r_:if(!yf.test(a)){if(a==uf||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&qf(e)||n){if(\"\"!=d){var v=parseInt(d,10);if(v>65535)return\"Invalid port\";e.port=qf(e)&&v===Ff[e.scheme]?null:v,d=\"\"}if(n)return;c=u_;continue}return\"Invalid port\"}d+=a;break;case a_:if(e.scheme=\"file\",\"/\"==a||\"\\\\\\\\\"==a)c=s_;else{if(!o||\"file\"!=o.scheme){c=c_;continue}if(a==uf)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if(\"?\"==a)e.host=o.host,e.path=o.path.slice(),e.query=\"\",c=d_;else{if(\"#\"!=a){Bf(r.slice(l).join(\"\"))||(e.host=o.host,e.path=o.path.slice(),Hf(e)),c=c_;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",c=p_}}break;case s_:if(\"/\"==a||\"\\\\\\\\\"==a){c=i_;break}o&&\"file\"==o.scheme&&!Bf(r.slice(l).join(\"\"))&&(Kf(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),c=c_;continue;case i_:if(a==uf||\"/\"==a||\"\\\\\\\\\"==a||\"?\"==a||\"#\"==a){if(!n&&Kf(d))c=c_;else if(\"\"==d){if(e.host=\"\",n)return;c=u_}else{if(i=kf(e,d))return i;if(\"localhost\"==e.host&&(e.host=\"\"),n)return;d=\"\",c=u_}continue}d+=a;break;case u_:if(qf(e)){if(c=c_,\"/\"!=a&&\"\\\\\\\\\"!=a)continue}else if(n||\"?\"!=a)if(n||\"#\"!=a){if(a!=uf&&(c=c_,\"/\"!=a))continue}else e.fragment=\"\",c=p_;else e.query=\"\",c=d_;break;case c_:if(a==uf||\"/\"==a||\"\\\\\\\\\"==a&&qf(e)||!n&&(\"?\"==a||\"#\"==a)){if(\"..\"===(u=(u=d).toLowerCase())||\"%2e.\"===u||\".%2e\"===u||\"%2e%2e\"===u?(Hf(e),\"/\"==a||\"\\\\\\\\\"==a&&qf(e)||e.path.push(\"\")):jf(d)?\"/\"==a||\"\\\\\\\\\"==a&&qf(e)||e.path.push(\"\"):(\"file\"==e.scheme&&!e.path.length&&Kf(d)&&(e.host&&(e.host=\"\"),d=d.charAt(0)+\":\"),e.path.push(d)),d=\"\",\"file\"==e.scheme&&(a==uf||\"?\"==a||\"#\"==a))for(;e.path.length>1&&\"\"===e.path[0];)e.path.shift();\"?\"==a?(e.query=\"\",c=d_):\"#\"==a&&(e.fragment=\"\",c=p_)}else d+=Uf(a,wf);break;case l_:\"?\"==a?(e.query=\"\",c=d_):\"#\"==a?(e.fragment=\"\",c=p_):a!=uf&&(e.path[0]+=Uf(a,Gf));break;case d_:n||\"#\"!=a?a!=uf&&(\"\\'\"==a&&qf(e)?e.query+=\"%27\":e.query+=\"#\"==a?\"%23\":Uf(a,Gf)):(e.fragment=\"\",c=p_);break;case p_:a!=uf&&(e.fragment+=Uf(a,bf))}l++}},h_=function(e){var t,n,o=kr(this,h_,\"URL\"),r=arguments.length>1?arguments[1]:void 0,s=String(e),i=hf(o,{type:\"URL\"});if(void 0!==r)if(r instanceof h_)t=ff(r);else if(n=g_(t={},String(r)))throw TypeError(n);if(n=g_(i,s,null,t))throw TypeError(n);var u=i.searchParams=new pf,c=gf(u);c.updateSearchParams(i.query),c.updateURL=function(){i.query=String(u)||null},a||(o.href=__.call(o),o.origin=m_.call(o),o.protocol=v_.call(o),o.username=M_.call(o),o.password=y_.call(o),o.host=I_.call(o),o.hostname=E_.call(o),o.port=T_.call(o),o.pathname=A_.call(o),o.search=S_.call(o),o.searchParams=D_.call(o),o.hash=N_.call(o))},f_=h_.prototype,__=function(){var e=ff(this),t=e.scheme,n=e.username,o=e.password,r=e.host,a=e.port,s=e.path,i=e.query,u=e.fragment,c=t+\":\";return null!==r?(c+=\"//\",xf(e)&&(c+=n+(o?\":\"+o:\"\")+\"@\"),c+=Of(r),null!==a&&(c+=\":\"+a)):\"file\"==t&&(c+=\"//\"),c+=e.cannotBeABaseURL?s[0]:s.length?\"/\"+s.join(\"/\"):\"\",null!==i&&(c+=\"?\"+i),null!==u&&(c+=\"#\"+u),c},m_=function(){var e=ff(this),t=e.scheme,n=e.port;if(\"blob\"==t)try{return new URL(t.path[0]).origin}catch(zI){return\"null\"}return\"file\"!=t&&qf(e)?t+\"://\"+Of(e.host)+(null!==n?\":\"+n:\"\"):\"null\"},v_=function(){return ff(this).scheme+\":\"},M_=function(){return ff(this).username},y_=function(){return ff(this).password},I_=function(){var e=ff(this),t=e.host,n=e.port;return null===t?\"\":null===n?Of(t):Of(t)+\":\"+n},E_=function(){var e=ff(this).host;return null===e?\"\":Of(e)},T_=function(){var e=ff(this).port;return null===e?\"\":String(e)},A_=function(){var e=ff(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?\"/\"+t.join(\"/\"):\"\"},S_=function(){var e=ff(this).query;return e?\"?\"+e:\"\"},D_=function(){return ff(this).searchParams},N_=function(){var e=ff(this).fragment;return e?\"#\"+e:\"\"},C_=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&Tt(f_,{href:C_(__,(function(e){var t=ff(this),n=String(e),o=g_(t,n);if(o)throw TypeError(o);gf(t.searchParams).updateSearchParams(t.query)})),origin:C_(m_),protocol:C_(v_,(function(e){var t=ff(this);g_(t,String(e)+\":\",Wf)})),username:C_(M_,(function(e){var t=ff(this),n=ht(String(e));if(!Vf(t)){t.username=\"\";for(var o=0;o<n.length;o++)t.username+=Uf(n[o],Pf)}})),password:C_(y_,(function(e){var t=ff(this),n=ht(String(e));if(!Vf(t)){t.password=\"\";for(var o=0;o<n.length;o++)t.password+=Uf(n[o],Pf)}})),host:C_(I_,(function(e){var t=ff(this);t.cannotBeABaseURL||g_(t,String(e),n_)})),hostname:C_(E_,(function(e){var t=ff(this);t.cannotBeABaseURL||g_(t,String(e),o_)})),port:C_(T_,(function(e){var t=ff(this);Vf(t)||(\"\"==(e=String(e))?t.port=null:g_(t,e,r_))})),pathname:C_(A_,(function(e){var t=ff(this);t.cannotBeABaseURL||(t.path=[],g_(t,e+\"\",u_))})),search:C_(S_,(function(e){var t=ff(this);\"\"==(e=String(e))?t.query=null:(\"?\"==e.charAt(0)&&(e=e.slice(1)),t.query=\"\",g_(t,e,d_)),gf(t.searchParams).updateSearchParams(t.query)})),searchParams:C_(D_),hash:C_(N_,(function(e){var t=ff(this);\"\"!=(e=String(e))?(\"#\"==e.charAt(0)&&(e=e.slice(1)),t.fragment=\"\",g_(t,e,p_)):t.fragment=null}))}),Z(f_,\"toJSON\",(function(){return __.call(this)}),{enumerable:!0}),Z(f_,\"toString\",(function(){return __.call(this)}),{enumerable:!0}),df){var k_=df.createObjectURL,L_=df.revokeObjectURL;k_&&Z(h_,\"createObjectURL\",(function(e){return k_.apply(df,arguments)})),L_&&Z(h_,\"revokeObjectURL\",(function(e){return L_.apply(df,arguments)}))}tn(h_,\"URL\"),ke({global:!0,forced:!Lh,sham:!a},{URL:h_});var R_=function(){function e(t){yn(this,e),this._imageMemoryURL=\"\",pi?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=Yn.MSG_IMAGE,this._percent=0,this.content={imageFormat:t.imageFormat||Zi.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._defaultImage=\"http://imgcache.qq.com/open/qcloud/video/act/webim-images/default.jpg\",this._autoFixUrl()}return En(e,[{key:\"_initImageInfoModel\",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=Su(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||\"\",this.url=t.url||e._imageMemoryURL||e._defaultImage},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:\"initImageInfoArray\",value:function(e){for(var t=0,n=null,o=null;t<=2;)o=hu(e)||hu(e[t])?{type:0,size:0,width:0,height:0,url:\"\"}:e[t],(n=new this._ImageInfoModel(o)).setSizeType(t+1),n.setType(t),this.addImageInfo(n),t++;this.updateAccessSideImageInfoArray()}},{key:\"updateImageInfoArray\",value:function(e){for(var t,n=this.content.imageInfoArray.length,o=0;o<n;o++)t=this.content.imageInfoArray[o],e[o].size&&(t.size=e[o].size),e[o].url&&t.setImageUrl(e[o].url),e[o].width&&(t.width=e[o].width),e[o].height&&(t.height=e[o].height)}},{key:\"_autoFixUrl\",value:function(){for(var e=this.content.imageInfoArray.length,t=\"\",n=\"\",o=[\"http\",\"https\"],r=null,a=0;a<e;a++)this.content.imageInfoArray[a].url&&\"\"!==(r=this.content.imageInfoArray[a]).imageUrl&&(n=r.imageUrl.slice(0,r.imageUrl.indexOf(\"://\")+1),t=r.imageUrl.slice(r.imageUrl.indexOf(\"://\")+1),o.indexOf(n)<0&&(n=\"https:\"),this.content.imageInfoArray[a].setImageUrl([n,t].join(\"\")))}},{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateImageFormat\",value:function(e){this.content.imageFormat=Zi[e.toUpperCase()]||Zi.UNKNOWN}},{key:\"createImageDataASURLInWeb\",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:\"createImageDataASURLInWXMiniApp\",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:\"replaceImageInfo\",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:\"addImageInfo\",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:\"updateAccessSideImageInfoArray\",value:function(){var e=this.content.imageInfoArray,t=e[0],n=t.width,o=void 0===n?0:n,r=t.height,a=void 0===r?0:r;0!==o&&0!==a&&(ju(e),Object.assign(e[2],Hu({originWidth:o,originHeight:a,min:720})))}},{key:\"sendable\",value:function(){return 0!==this.content.imageInfoArray.length&&(\"\"!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size)}}]),e}(),O_=function(){function e(t){yn(this,e),this.type=Yn.MSG_FACE,this.content=t||null}return En(e,[{key:\"sendable\",value:function(){return null!==this.content}}]),e}(),G_=function(){function e(t){yn(this,e),this.type=Yn.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:t.url,remoteAudioUrl:t.url||\"\",uuid:t.uuid}}return En(e,[{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateAudioUrl\",value:function(e){this.content.remoteAudioUrl=e}},{key:\"sendable\",value:function(){return\"\"!==this.content.remoteAudioUrl}}]),e}(),b_={from:!0,groupID:!0,groupName:!0,to:!0},w_=function(){function e(t){yn(this,e),this.type=Yn.MSG_GRP_TIP,this.content={},this._initContent(t)}return En(e,[{key:\"_initContent\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"remarkInfo\":break;case\"groupProfile\":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case\"operatorInfo\":break;case\"memberInfoList\":case\"msgMemberInfo\":t._updateMemberList(e[n]);break;case\"onlineMemberInfo\":break;case\"memberNum\":t.content[n]=e[n],t.content.memberCount=e[n];break;default:t.content[n]=e[n]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:\"_initGroupProfile\",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];b_[o]&&(this.content.groupProfile[o]=e[o])}}},{key:\"_updateMemberList\",value:function(e){Xu(this.content.memberList)?this.content.memberList=e:this.content.memberList.forEach((function(t){e.forEach((function(e){t.userID===e.userID&&Object.assign(t,e)}))}))}}]),e}(),P_={from:!0,groupID:!0,groupName:!0,to:!0},U_=function(){function e(t){yn(this,e),this.type=Yn.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return En(e,[{key:\"_initContent\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"memberInfoList\":break;case\"remarkInfo\":t.content.handleMessage=e[n];break;case\"groupProfile\":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}}))}},{key:\"_initGroupProfile\",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];P_[o]&&(\"groupName\"===o?this.content.groupProfile.name=e[o]:this.content.groupProfile[o]=e[o])}}}]),e}(),F_=Math.min,q_=[].lastIndexOf,x_=!!q_&&1/[1].lastIndexOf(1,-0)<0,V_=je(\"lastIndexOf\"),K_=ze(\"indexOf\",{ACCESSORS:!0,1:0}),B_=x_||!V_||!K_?function(e){if(x_)return q_.apply(this,arguments)||0;var t=f(this),n=ie(t.length),o=n-1;for(arguments.length>1&&(o=F_(o,ae(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:q_;ke({target:\"Array\",proto:!0,forced:B_!==[].lastIndexOf},{lastIndexOf:B_});var H_=function(){function e(t){yn(this,e),this.type=Yn.MSG_FILE,this._percent=0;var n=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:t.url||\"\",uuid:t.uuid,fileName:n.name||\"\",fileSize:n.size||0}}return En(e,[{key:\"_getFileInfo\",value:function(e){if(!hu(e.fileName)&&!hu(e.fileSize))return{size:e.fileSize,name:e.fileName};var t=e.file.files[0];if(li){if(t.path&&-1!==t.path.indexOf(\".\")){var n=t.path.slice(t.path.lastIndexOf(\".\")+1).toLowerCase();t.type=n,t.name||(t.name=\"\".concat(Su(999999),\".\").concat(n))}t.name||(t.type=\"\",t.name=t.path.slice(t.path.lastIndexOf(\"/\")+1).toLowerCase()),t.suffix&&(t.type=t.suffix),t.url||(t.url=t.path)}return{size:t.size,name:t.name}}},{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateFileUrl\",value:function(e){this.content.fileUrl=e}},{key:\"sendable\",value:function(){return\"\"!==this.content.fileUrl&&(\"\"!==this.content.fileName&&0!==this.content.fileSize)}}]),e}(),j_=function(){function e(t){yn(this,e),this.type=Yn.MSG_CUSTOM,this.content={data:t.data||\"\",description:t.description||\"\",extension:t.extension||\"\"}}return En(e,[{key:\"setData\",value:function(e){return this.content.data=e,this}},{key:\"setDescription\",value:function(e){return this.content.description=e,this}},{key:\"setExtension\",value:function(e){return this.content.extension=e,this}},{key:\"sendable\",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),e}(),W_=function(){function e(t){yn(this,e),this.type=Yn.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl||t.videoUrl||\"\",videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:t.videoUrl,videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,snapshotWidth:t.thumbWidth,thumbHeight:t.thumbHeight,snapshotHeight:t.thumbHeight,thumbSize:t.thumbSize,snapshotSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:t.thumbUrl,snapshotUrl:t.thumbUrl}}return En(e,[{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateVideoUrl\",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:\"updateSnapshotInfo\",value:function(e){var t=e.snapshotUrl,n=e.snapshotWidth,o=e.snapshotHeight;Xu(t)||(this.content.thumbUrl=this.content.snapshotUrl=t),Xu(n)||(this.content.thumbWidth=this.content.snapshotWidth=Number(n)),Xu(o)||(this.content.thumbHeight=this.content.snapshotHeight=Number(o))}},{key:\"sendable\",value:function(){return\"\"!==this.content.remoteVideoUrl}}]),e}(),Y_=function(){function e(t){yn(this,e),this.type=Yn.MSG_LOCATION;var n=t.description,o=t.longitude,r=t.latitude;this.content={description:n,longitude:o,latitude:r}}return En(e,[{key:\"sendable\",value:function(){return!0}}]),e}(),$_=function(){function e(t){if(yn(this,e),this.from=t.from,this.messageSender=t.from,this.time=t.time,this.messageSequence=t.sequence,this.clientSequence=t.clientSequence||t.sequence,this.messageRandom=t.random,this.cloudCustomData=t.cloudCustomData||\"\",t.ID)this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.messageBody=[{type:t.type,payload:t.payload}],t.conversationType.startsWith(Yn.CONV_C2C)?this.receiverUserID=t.to:t.conversationType.startsWith(Yn.CONV_GROUP)&&(this.receiverGroupID=t.to),this.messageReceiver=t.to;else{this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.messageBody=[];var n=t.elements[0].type,o=t.elements[0].content;this._patchRichMediaPayload(n,o),n===Yn.MSG_MERGER?this.messageBody.push({type:n,payload:new z_(o).content}):this.messageBody.push({type:n,payload:o}),t.groupID&&(this.receiverGroupID=t.groupID,this.messageReceiver=t.groupID),t.to&&(this.receiverUserID=t.to,this.messageReceiver=t.to)}}return En(e,[{key:\"_patchRichMediaPayload\",value:function(e,t){e===Yn.MSG_IMAGE?t.imageInfoArray.forEach((function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))})):e===Yn.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===Yn.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===Yn.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}}]),e}(),z_=function(){function e(t){if(yn(this,e),this.type=Yn.MSG_MERGER,this.content={downloadKey:\"\",pbDownloadKey:\"\",messageList:[],title:\"\",abstractList:[],compatibleText:\"\",version:0,layersOverLimit:!1},t.downloadKey){var n=t.downloadKey,o=t.pbDownloadKey,r=t.title,a=t.abstractList,s=t.compatibleText,i=t.version;this.content.downloadKey=n,this.content.pbDownloadKey=o,this.content.title=r,this.content.abstractList=a,this.content.compatibleText=s,this.content.version=i||0}else if(Xu(t.messageList))1===t.layersOverLimit&&(this.content.layersOverLimit=!0);else{var u=t.messageList,c=t.title,l=t.abstractList,d=t.compatibleText,p=t.version,g=[];u.forEach((function(e){if(!Xu(e)){var t=new $_(e);g.push(t)}})),this.content.messageList=g,this.content.title=c,this.content.abstractList=l,this.content.compatibleText=d,this.content.version=p||0}Qi.debug(\"MergerElement.content:\",this.content)}return En(e,[{key:\"sendable\",value:function(){return!Xu(this.content.messageList)||!Xu(this.content.downloadKey)}}]),e}(),J_={1:Yn.MSG_PRIORITY_HIGH,2:Yn.MSG_PRIORITY_NORMAL,3:Yn.MSG_PRIORITY_LOW,4:Yn.MSG_PRIORITY_LOWEST},X_=function(){function e(t){yn(this,e),this.ID=\"\",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||Yn.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||0===t.random?t.random:Su(),this.priority=this._computePriority(t.priority),this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.isPeerRead=!1,this.nameCard=\"\",this._elements=[],this.isPlaceMessage=t.isPlaceMessage||0,this.isRevoked=2===t.isPlaceMessage||8===t.msgFlagBits,this.from=t.from||null,this.to=t.to||null,this.flow=\"\",this.isSystemMessage=t.isSystemMessage||!1,this.protocol=t.protocol||\"JSON\",this.isResend=!1,this.isRead=!1,this.status=t.status||qc.SUCCESS,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=t.cloudCustomData||\"\",this.isDeleted=!1,this.isModified=!1,this._isExcludedFromUnreadCount=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromUnreadCount),this._isExcludedFromLastMessage=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromLastMessage),this.clientTime=t.clientTime||$i()||0,this.senderTinyID=t.senderTinyID||t.tinyID||\"\",this.readReceiptInfo=t.readReceiptInfo||{readCount:void 0,unreadCount:void 0},this.needReadReceipt=!0===t.needReadReceipt||1===t.needReadReceipt,this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null),this.handleGroupAtInfo(t)}return En(e,[{key:\"getElements\",value:function(){return this._elements}},{key:\"extractGroupInfo\",value:function(e){if(null!==e){lu(e.nick)&&(this.nick=e.nick),lu(e.avatar)&&(this.avatar=e.avatar);var t=e.messageFromAccountExtraInformation;pu(t)&&lu(t.nameCard)&&(this.nameCard=t.nameCard)}}},{key:\"handleGroupAtInfo\",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach((function(e){e!==Yn.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(Yn.MSG_AT_ALL))})),gu(e.groupAtInfo)&&e.groupAtInfo.forEach((function(e){0===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):1===e.groupAtAllFlag&&t.atUserList.push(Yn.MSG_AT_ALL)}))}},{key:\"getGroupAtInfoList\",value:function(){return this._groupAtInfoList}},{key:\"_initProxy\",value:function(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}},{key:\"reInitialize\",value:function(e){e&&(this.status=this.from?qc.SUCCESS:qc.UNSEND,!this.from&&(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID()}},{key:\"isSendable\",value:function(){return 0!==this._elements.length&&(\"function\"!=typeof this._elements[0].sendable?(Qi.warn(\"\".concat(this._elements[0].type,\\' need \"boolean : sendable()\" method\\')),!1):this._elements[0].sendable())}},{key:\"_initTo\",value:function(e){this.conversationType===Yn.CONV_GROUP&&(this.to=e.groupID)}},{key:\"_initSequence\",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return Qi.error(\"autoIncrementIndex(string: key) need key parameter\"),!1;if(void 0===ku[e]){var t=new Date,n=\"3\".concat(t.getHours()).slice(-2),o=\"0\".concat(t.getMinutes()).slice(-2),r=\"0\".concat(t.getSeconds()).slice(-2);ku[e]=parseInt([n,o,r,\"0001\"].join(\"\")),n=null,o=null,r=null,Qi.log(\"autoIncrementIndex start index:\".concat(ku[e]))}return ku[e]++}(e)),0===this.sequence&&this.conversationType===Yn.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:\"generateMessageID\",value:function(){this.from===Yn.CONV_SYSTEM&&(this.senderTinyID=\"144115198244471703\"),this.ID=\"\".concat(this.senderTinyID,\"-\").concat(this.clientTime,\"-\").concat(this.random)}},{key:\"_initFlow\",value:function(e){\"\"!==e&&(e===this.from?(this.flow=\"out\",this.isRead=!0):this.flow=\"in\")}},{key:\"_concatConversationID\",value:function(e){var t=this.to,n=\"\",o=this.conversationType;o!==Yn.CONV_SYSTEM?(n=o===Yn.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID=\"\".concat(o).concat(n)):this.conversationID=Yn.CONV_SYSTEM}},{key:\"isElement\",value:function(e){return e instanceof Sh||e instanceof R_||e instanceof O_||e instanceof G_||e instanceof H_||e instanceof W_||e instanceof w_||e instanceof U_||e instanceof j_||e instanceof Y_||e instanceof z_}},{key:\"setElement\",value:function(e){var t=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var n=function(e){if(e.type&&e.content)switch(e.type){case Yn.MSG_TEXT:t.setTextElement(e.content);break;case Yn.MSG_IMAGE:t.setImageElement(e.content);break;case Yn.MSG_AUDIO:t.setAudioElement(e.content);break;case Yn.MSG_FILE:t.setFileElement(e.content);break;case Yn.MSG_VIDEO:t.setVideoElement(e.content);break;case Yn.MSG_CUSTOM:t.setCustomElement(e.content);break;case Yn.MSG_LOCATION:t.setLocationElement(e.content);break;case Yn.MSG_GRP_TIP:t.setGroupTipElement(e.content);break;case Yn.MSG_GRP_SYS_NOTICE:t.setGroupSystemNoticeElement(e.content);break;case Yn.MSG_FACE:t.setFaceElement(e.content);break;case Yn.MSG_MERGER:t.setMergerElement(e.content);break;default:Qi.warn(e.type,e.content,\"no operation......\")}};if(gu(e))for(var o=0;o<e.length;o++)n(e[o]);else n(e);this._initProxy()}},{key:\"clearElement\",value:function(){this._elements.length=0}},{key:\"setTextElement\",value:function(e){var t=\"string\"==typeof e?e:e.text,n=new Sh({text:t});this._elements.push(n)}},{key:\"setImageElement\",value:function(e){var t=new R_(e);this._elements.push(t)}},{key:\"setAudioElement\",value:function(e){var t=new G_(e);this._elements.push(t)}},{key:\"setFileElement\",value:function(e){var t=new H_(e);this._elements.push(t)}},{key:\"setVideoElement\",value:function(e){var t=new W_(e);this._elements.push(t)}},{key:\"setLocationElement\",value:function(e){var t=new Y_(e);this._elements.push(t)}},{key:\"setCustomElement\",value:function(e){var t=new j_(e);this._elements.push(t)}},{key:\"setGroupTipElement\",value:function(e){var t={},n=e.operationType;Xu(e.memberInfoList)?e.operatorInfo&&(t=e.operatorInfo):n!==Yn.GRP_TIP_MBR_JOIN&&n!==Yn.GRP_TIP_MBR_KICKED_OUT&&n!==Yn.GRP_TIP_MBR_SET_ADMIN&&n!==Yn.GRP_TIP_MBR_CANCELED_ADMIN||(t=e.memberInfoList[0]);var o=t,r=o.nick,a=o.avatar;lu(r)&&(this.nick=r),lu(a)&&(this.avatar=a);var s=new w_(e);this._elements.push(s)}},{key:\"setGroupSystemNoticeElement\",value:function(e){var t=new U_(e);this._elements.push(t)}},{key:\"setFaceElement\",value:function(e){var t=new O_(e);this._elements.push(t)}},{key:\"setMergerElement\",value:function(e){var t=new z_(e);this._elements.push(t)}},{key:\"setIsRead\",value:function(e){this.isRead=e}},{key:\"setRelayFlag\",value:function(e){this._relayFlag=e}},{key:\"getRelayFlag\",value:function(){return this._relayFlag}},{key:\"_computePriority\",value:function(e){if(hu(e))return Yn.MSG_PRIORITY_NORMAL;if(lu(e)&&-1!==Object.values(J_).indexOf(e))return e;if(cu(e)){var t=\"\"+e;if(-1!==Object.keys(J_).indexOf(t))return J_[t]}return Yn.MSG_PRIORITY_NORMAL}},{key:\"setNickAndAvatar\",value:function(e){var t=e.nick,n=e.avatar;lu(t)&&(this.nick=t),lu(n)&&(this.avatar=n)}},{key:\"setNameCard\",value:function(e){lu(e)&&(this.nameCard=e)}},{key:\"elements\",get:function(){return Qi.warn(\"！！！Message 实例的 elements 属性即将废弃，请尽快修改。使用 type 和 payload 属性处理单条消息，兼容组合消息使用 _elements 属性！！！\"),this._elements}}]),e}(),Q_=function(e){return{code:0,data:e||{}}},Z_=\"https://cloud.tencent.com/document/product/\",em=\"您可以在即时通信 IM 控制台的【开发辅助工具(https://console.cloud.tencent.com/im-detail/tool-usersig)】 页面校验 UserSig。\",tm=\"UserSig 非法，请使用官网提供的 API 重新生成 UserSig(\".concat(Z_,\"269/32688)。\"),nm=\"#.E6.B6.88.E6.81.AF.E5.85.83.E7.B4.A0-timmsgelement\",om={70001:\"UserSig 已过期，请重新生成。建议 UserSig 有效期设置不小于24小时。\",70002:\"UserSig 长度为0，请检查传入的 UserSig 是否正确。\",70003:tm,70005:tm,70009:\"UserSig 验证失败，可能因为生成 UserSig 时混用了其他 SDKAppID 的私钥或密钥导致，请使用对应 SDKAppID 下的私钥或密钥重新生成 UserSig(\".concat(Z_,\"269/32688)。\"),70013:\"请求中的 UserID 与生成 UserSig 时使用的 UserID 不匹配。\".concat(em),70014:\"请求中的 SDKAppID 与生成 UserSig 时使用的 SDKAppID 不匹配。\".concat(em),70016:\"密钥不存在，UserSig 验证失败，请在即时通信 IM 控制台获取密钥(\".concat(Z_,\"269/32578#.E8.8E.B7.E5.8F.96.E5.AF.86.E9.92.A5)。\"),70020:\"SDKAppID 未找到，请在即时通信 IM 控制台确认应用信息。\",70050:\"UserSig 验证次数过于频繁。请检查 UserSig 是否正确，并于1分钟后重新验证。\".concat(em),70051:\"帐号被拉入黑名单。\",70052:\"UserSig 已经失效，请重新生成，再次尝试。\",70107:\"因安全原因被限制登录，请不要频繁登录。\",70169:\"请求的用户帐号不存在。\",70114:\"\".concat(\"服务端内部超时，请稍后重试。\"),70202:\"\".concat(\"服务端内部超时，请稍后重试。\"),70206:\"请求中批量数量不合法。\",70402:\"参数非法，请检查必填字段是否填充，或者字段的填充是否满足协议要求。\",70403:\"请求失败，需要 App 管理员权限。\",70398:\"帐号数超限。如需创建多于100个帐号，请将应用升级为专业版，具体操作指引请参见购买指引(\".concat(Z_,\"269/32458)。\"),70500:\"\".concat(\"服务端内部错误，请重试。\"),71e3:\"删除帐号失败。仅支持删除体验版帐号，您当前应用为专业版，暂不支持帐号删除。\",20001:\"请求包非法。\",20002:\"UserSig 或 A2 失效。\",20003:\"消息发送方或接收方 UserID 无效或不存在，请检查 UserID 是否已导入即时通信 IM。\",20004:\"网络异常，请重试。\",20005:\"\".concat(\"服务端内部错误，请重试。\"),20006:\"触发发送\".concat(\"单聊消息\",\"之前回调，App 后台返回禁止下发该消息。\"),20007:\"发送\".concat(\"单聊消息\",\"，被对方拉黑，禁止发送。消息发送状态默认展示为失败，您可以登录控制台修改该场景下的消息发送状态展示结果，具体操作请参见消息保留设置(\").concat(Z_,\"269/38656)。\"),20009:\"消息发送双方互相不是好友，禁止发送（配置\".concat(\"单聊消息\",\"校验好友关系才会出现）。\"),20010:\"发送\".concat(\"单聊消息\",\"，自己不是对方的好友（单向关系），禁止发送。\"),20011:\"发送\".concat(\"单聊消息\",\"，对方不是自己的好友（单向关系），禁止发送。\"),20012:\"发送方被禁言，该条消息被禁止发送。\",20016:\"消息撤回超过了时间限制（默认2分钟）。\",20018:\"删除漫游内部错误。\",90001:\"JSON 格式解析失败，请检查请求包是否符合 JSON 规范。\",90002:\"\".concat(\"JSON 格式请求包体\",\"中 MsgBody 不符合消息格式描述，或者 MsgBody 不是 Array 类型，请参考 TIMMsgElement 对象的定义(\").concat(Z_,\"269/2720\").concat(nm,\")。\"),90003:\"\".concat(\"JSON 格式请求包体\",\"中缺少 To_Account 字段或者 To_Account 帐号不存在。\"),90005:\"\".concat(\"JSON 格式请求包体\",\"中缺少 MsgRandom 字段或者 MsgRandom 字段不是 Integer 类型。\"),90006:\"\".concat(\"JSON 格式请求包体\",\"中缺少 MsgTimeStamp 字段或者 MsgTimeStamp 字段不是 Integer 类型。\"),90007:\"\".concat(\"JSON 格式请求包体\",\"中 MsgBody 类型不是 Array 类型，请将其修改为 Array 类型。\"),90008:\"\".concat(\"JSON 格式请求包体\",\"中缺少 From_Account 字段或者 From_Account 帐号不存在。\"),90009:\"请求需要 App 管理员权限。\",90010:\"\".concat(\"JSON 格式请求包体\",\"不符合消息格式描述，请参考 TIMMsgElement 对象的定义(\").concat(Z_,\"269/2720\").concat(nm,\")。\"),90011:\"批量发消息目标帐号超过500，请减少 To_Account 中目标帐号数量。\",90012:\"To_Account 没有注册或不存在，请确认 To_Account 是否导入即时通信 IM 或者是否拼写错误。\",90026:\"消息离线存储时间错误（最多不能超过7天）。\",90031:\"\".concat(\"JSON 格式请求包体\",\"中 SyncOtherMachine 字段不是 Integer 类型。\"),90044:\"\".concat(\"JSON 格式请求包体\",\"中 MsgLifeTime 字段不是 Integer 类型。\"),90048:\"请求的用户帐号不存在。\",90054:\"撤回请求中的 MsgKey 不合法。\",90994:\"\".concat(\"服务端内部错误，请重试。\"),90995:\"\".concat(\"服务端内部错误，请重试。\"),91e3:\"\".concat(\"服务端内部错误，请重试。\"),90992:\"\".concat(\"服务端内部错误，请重试。\",\"如果所有请求都返回该错误码，且 App 配置了第三方回调，请检查 App 服务端是否正常向即时通信 IM 后台服务端返回回调结果。\"),93e3:\"JSON 数据包超长，消息包体请不要超过8k。\",91101:\"Web 端长轮询被踢（Web 端同时在线实例个数超出限制）。\",10002:\"\".concat(\"服务端内部错误，请重试。\"),10003:\"请求中的接口名称错误，请核对接口名称并重试。\",10004:\"参数非法，请根据错误描述检查请求是否正确。\",10005:\"请求包体中携带的帐号数量过多。\",10006:\"操作频率限制，请尝试降低调用的频率。\",10007:\"操作权限不足，例如 Work \".concat(\"群组\",\"中普通成员尝试执行踢人操作，但只有 App 管理员才有权限。\"),10008:\"请求非法，可能是请求中携带的签名信息验证不正确，请再次尝试。\",10009:\"该群不允许群主主动退出。\",10010:\"\".concat(\"群组\",\"不存在，或者曾经存在过，但是目前已经被解散。\"),10011:\"解析 JSON 包体失败，请检查包体的格式是否符合 JSON 格式。\",10012:\"发起操作的 UserID 非法，请检查发起操作的用户 UserID 是否填写正确。\",10013:\"被邀请加入的用户已经是群成员。\",10014:\"群已满员，无法将请求中的用户加入\".concat(\"群组\",\"，如果是批量加人，可以尝试减少加入用户的数量。\"),10015:\"找不到指定 ID 的\".concat(\"群组\",\"。\"),10016:\"App 后台通过第三方回调拒绝本次操作。\",10017:\"因被禁言而不能发送消息，请检查发送者是否被设置禁言。\",10018:\"应答包长度超过最大包长（1MB），请求的内容过多，请尝试减少单次请求的数据量。\",10019:\"请求的用户帐号不存在。\",10021:\"\".concat(\"群组\",\" ID 已被使用，请选择其他的\").concat(\"群组\",\" ID。\"),10023:\"发消息的频率超限，请延长两次发消息时间的间隔。\",10024:\"此邀请或者申请请求已经被处理。\",10025:\"\".concat(\"群组\",\" ID 已被使用，并且操作者为群主，可以直接使用。\"),10026:\"该 SDKAppID 请求的命令字已被禁用。\",10030:\"请求撤回的消息不存在。\",10031:\"消息撤回超过了时间限制（默认2分钟）。\",10032:\"请求撤回的消息不支持撤回操作。\",10033:\"\".concat(\"群组\",\"类型不支持消息撤回操作。\"),10034:\"该消息类型不支持删除操作。\",10035:\"直播群和在线成员广播大群不支持删除消息。\",10036:\"直播群创建数量超过了限制，请参考价格说明(\".concat(Z_,\"269/11673)购买预付费套餐“IM直播群”。\"),10037:\"单个用户可创建和加入的\".concat(\"群组\",\"数量超过了限制，请参考价格说明(\").concat(Z_,\"269/11673)购买或升级预付费套餐“单人可创建与加入\").concat(\"群组\",\"数”。\"),10038:\"群成员数量超过限制，请参考价格说明(\".concat(Z_,\"269/11673)购买或升级预付费套餐“扩展群人数上限”。\"),10041:\"该应用（SDKAppID）已配置不支持群消息撤回。\",10050:\"群属性 key 不存在\",10056:\"请在写入群属性前先使用 getGroupAttributes 接口更新本地群属性，避免冲突。\",10059:\"非旗舰版\",10060:\"群人数超过已读回执人数上限\",10061:\"在线消息不支持已读回执\",10062:\"找不到群消息的已读回执信息\",30001:\"请求参数错误，请根据错误描述检查请求参数\",30002:\"SDKAppID 不匹配\",30003:\"请求的用户帐号不存在\",30004:\"请求需要 App 管理员权限\",30005:\"关系链字段中包含敏感词\",30006:\"\".concat(\"服务端内部错误，请重试。\"),30007:\"\".concat(\"网络超时，请稍后重试. \"),30008:\"并发写导致写冲突，建议使用批量方式\",30009:\"后台禁止该用户发起加好友请求\",30010:\"自己的好友数已达系统上限\",30011:\"分组已达系统上限\",30012:\"未决数已达系统上限\",30014:\"对方的好友数已达系统上限\",30515:\"请求添加好友时，对方在自己的黑名单中，不允许加好友\",30516:\"请求添加好友时，对方的加好友验证方式是不允许任何人添加自己为好友\",30525:\"请求添加好友时，自己在对方的黑名单中，不允许加好友\",30539:\"等待对方同意\",30540:\"添加好友请求被安全策略打击，请勿频繁发起添加好友请求\",31704:\"与请求删除的帐号之间不存在好友关系\",31707:\"删除好友请求被安全策略打击，请勿频繁发起删除好友请求\"},rm=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this)).code=e.code,o.message=om[e.code]||e.message,o.data=e.data||{},o}return n}(Rn(Error)),am=null,sm=function(e){am=e},im=function(e){return Promise.resolve(Q_(e))},um=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof rm)return t&&null!==am&&am.emit(Wn.ERROR,e),Promise.reject(e);if(e instanceof Error){var n=new rm({code:lp.UNCAUGHT_ERROR,message:e.message});return t&&null!==am&&am.emit(Wn.ERROR,n),Promise.reject(n)}if(hu(e)||hu(e.code)||hu(e.message))Qi.error(\"IMPromise.reject 必须指定code(错误码)和message(错误信息)!!!\");else{if(cu(e.code)&&lu(e.message)){var o=new rm(e);return t&&null!==am&&am.emit(Wn.ERROR,o),Promise.reject(o)}Qi.error(\"IMPromise.reject code(错误码)必须为数字，message(错误信息)必须为字符串!!!\")}},cm=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"C2CModule\",o}return En(n,[{key:\"onNewC2CMessage\",value:function(e){var t=e.dataList,n=e.isInstantMessage,o=e.C2CRemainingUnreadList,r=e.C2CPairUnreadList;Qi.debug(\"\".concat(this._className,\".onNewC2CMessage count:\").concat(t.length,\" isInstantMessage:\").concat(n));var a=this._newC2CMessageStoredAndSummary({dataList:t,C2CRemainingUnreadList:o,C2CPairUnreadList:r,isInstantMessage:n}),s=a.conversationOptionsList,i=a.messageList,u=a.isUnreadC2CMessage;(this.filterModifiedMessage(i),s.length>0)&&this.getModule(ll).onNewMessage({conversationOptionsList:s,isInstantMessage:n,isUnreadC2CMessage:u});var c=this.filterUnmodifiedMessage(i);n&&c.length>0&&this.emitOuterEvent(Wn.MESSAGE_RECEIVED,c),i.length=0}},{key:\"_newC2CMessageStoredAndSummary\",value:function(e){for(var t=e.dataList,n=e.C2CRemainingUnreadList,o=e.C2CPairUnreadList,r=e.isInstantMessage,a=null,s=[],i=[],u={},c=this.getModule(fl),l=this.getModule(Sl),d=!1,p=0,g=t.length;p<g;p++){var h=t[p];h.currentUser=this.getMyUserID(),h.conversationType=Yn.CONV_C2C,h.isSystemMessage=!!h.isSystemMessage,(hu(h.nick)||hu(h.avatar))&&(d=!0,Qi.debug(\"\".concat(this._className,\"._newC2CMessageStoredAndSummary nick or avatar missing!\"))),a=new X_(h),h.elements=c.parseElements(h.elements,h.from),a.setElement(h.elements),a.setNickAndAvatar({nick:h.nick,avatar:h.avatar});var f=a.conversationID;if(r){var _=!1,m=this.getModule(ll);if(a.from!==this.getMyUserID()){var v=m.getLatestMessageSentByPeer(f);if(v){var M=v.nick,y=v.avatar;d?a.setNickAndAvatar({nick:M,avatar:y}):M===a.nick&&y===a.avatar||(_=!0)}}else{var I=m.getLatestMessageSentByMe(f);if(I){var E=I.nick,T=I.avatar;E===a.nick&&T===a.avatar||m.modifyMessageSentByMe({conversationID:f,latestNick:a.nick,latestAvatar:a.avatar})}}var A=1===t[p].isModified;if(m.isMessageSentByCurrentInstance(a)?a.isModified=A:A=!1,0===h.msgLifeTime)a._onlineOnlyFlag=!0,i.push(a);else{if(!m.pushIntoMessageList(i,a,A))continue;_&&(m.modifyMessageSentByPeer({conversationID:f,latestNick:a.nick,latestAvatar:a.avatar}),m.updateUserProfileSpecifiedKey({conversationID:f,nick:a.nick,avatar:a.avatar}))}r&&a.clientTime>0&&l.addMessageDelay(a.clientTime)}if(0!==h.msgLifeTime){if(!1===a._onlineOnlyFlag)if(hu(u[f])){var S=0;\"in\"===a.flow&&(a._isExcludedFromUnreadCount||(S=1)),u[f]=s.push({conversationID:f,unreadCount:S,type:a.conversationType,subType:a.conversationSubType,lastMessage:a._isExcludedFromLastMessage?\"\":a})-1}else{var D=u[f];s[D].type=a.conversationType,s[D].subType=a.conversationSubType,s[D].lastMessage=a._isExcludedFromLastMessage?\"\":a,\"in\"===a.flow&&(a._isExcludedFromUnreadCount||s[D].unreadCount++)}}else a._onlineOnlyFlag=!0}var N=!1;if(gu(o))for(var C=function(e,t){if(o[e].unreadCount>0){N=!0;var n=s.find((function(t){return t.conversationID===\"C2C\".concat(o[e].from)}));n?n.unreadCount=o[e].unreadCount:s.push({conversationID:\"C2C\".concat(o[e].from),unreadCount:o[e].unreadCount,type:Yn.CONV_C2C})}},k=0,L=o.length;k<L;k++)C(k);if(gu(n))for(var R=function(e,t){s.find((function(t){return t.conversationID===\"C2C\".concat(n[e].from)}))||s.push({conversationID:\"C2C\".concat(n[e].from),type:Yn.CONV_C2C,lastMsgTime:n[e].lastMsgTime})},O=0,G=n.length;O<G;O++)R(O);return{conversationOptionsList:s,messageList:i,isUnreadC2CMessage:N}}},{key:\"onC2CMessageRevoked\",value:function(e){var t=this;Qi.debug(\"\".concat(this._className,\".onC2CMessageRevoked count:\").concat(e.dataList.length));var n=this.getModule(ll),o=[],r=null;e.dataList.forEach((function(e){if(e.c2cMessageRevokedNotify){var a=e.c2cMessageRevokedNotify.revokedInfos;hu(a)||a.forEach((function(e){var a=t.getMyUserID()===e.from?\"\".concat(Yn.CONV_C2C).concat(e.to):\"\".concat(Yn.CONV_C2C).concat(e.from);(r=n.revoke(a,e.sequence,e.random))&&o.push(r)}))}})),0!==o.length&&(n.onMessageRevoked(o),this.emitOuterEvent(Wn.MESSAGE_REVOKED,o))}},{key:\"onC2CMessageReadReceipt\",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Xu(e.c2cMessageReadReceipt)){var n=e.c2cMessageReadReceipt.to;e.c2cMessageReadReceipt.uinPairReadArray.forEach((function(e){var o=e.peerReadTime;Qi.debug(\"\".concat(t._className,\"._onC2CMessageReadReceipt to:\").concat(n,\" peerReadTime:\").concat(o));var r=\"\".concat(Yn.CONV_C2C).concat(n),a=t.getModule(ll);a.recordPeerReadTime(r,o),a.updateMessageIsPeerReadProperty(r,o)}))}}))}},{key:\"onC2CMessageReadNotice\",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Xu(e.c2cMessageReadNotice)){var n=t.getModule(ll);e.c2cMessageReadNotice.uinPairReadArray.forEach((function(e){var o=e.from,r=e.peerReadTime;Qi.debug(\"\".concat(t._className,\".onC2CMessageReadNotice from:\").concat(o,\" lastReadTime:\").concat(r));var a=\"\".concat(Yn.CONV_C2C).concat(o);n.updateIsReadAfterReadReport({conversationID:a,lastMessageTime:r}),n.updateUnreadCount(a)}))}}))}},{key:\"sendMessage\",value:function(e,t){var n=this._createC2CMessagePack(e,t);return this.request(n)}},{key:\"_createC2CMessagePack\",value:function(e,t){var n=null;t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0}));var o=\"\";lu(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var r=[];if(pu(t)&&pu(t.messageControlInfo)){var a=t.messageControlInfo,s=a.excludedFromUnreadCount,i=a.excludedFromLastMessage;!0===s&&r.push(\"NoUnread\"),!0===i&&r.push(\"NoLastMsg\")}return{protocolName:bl,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),toAccount:e.to,msgBody:e.getElements(),cloudCustomData:o,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:this.isOnlineMessage(e,t)?0:void 0,nick:e.nick,avatar:e.avatar,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||\"\",desc:n.description||\"\",ext:n.extension||\"\",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||\"\"}}:void 0,messageControlInfo:r,clientTime:e.clientTime}}}},{key:\"isOnlineMessage\",value:function(e,t){return!(!t||!0!==t.onlineUserOnly)}},{key:\"revokeMessage\",value:function(e){return this.request({protocolName:td,requestData:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}},{key:\"deleteMessage\",value:function(e){var t=e.to,n=e.keyList;return Qi.log(\"\".concat(this._className,\".deleteMessage toAccount:\").concat(t,\" count:\").concat(n.length)),this.request({protocolName:id,requestData:{fromAccount:this.getMyUserID(),to:t,keyList:n}})}},{key:\"setMessageRead\",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageTime,r=\"\".concat(this._className,\".setMessageRead\");Qi.log(\"\".concat(r,\" conversationID:\").concat(n,\" lastMessageTime:\").concat(o)),cu(o)||Qi.warn(\"\".concat(r,\" 请勿修改 Conversation.lastMessage.lastTime，否则可能会导致已读上报结果不准确\"));var a=new Dp(Qp);return a.setMessage(\"conversationID:\".concat(n,\" lastMessageTime:\").concat(o)),this.request({protocolName:nd,requestData:{C2CMsgReaded:{cookie:\"\",C2CMsgReadedItem:[{toAccount:n.replace(\"C2C\",\"\"),lastMessageTime:o,receipt:1}]}}}).then((function(){a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(r,\" ok\"));var e=t.getModule(ll);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:o}),e.updateUnreadCount(n),Q_()})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.log(\"\".concat(r,\" failed. error:\"),e),um(e)}))}},{key:\"getRoamingMessage\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRoamingMessage\"),o=e.peerAccount,r=e.conversationID,a=e.count,s=e.lastMessageTime,i=e.messageKey,u=\"peerAccount:\".concat(o,\" count:\").concat(a||15,\" lastMessageTime:\").concat(s||0,\" messageKey:\").concat(i);Qi.log(\"\".concat(n,\" \").concat(u));var c=new Dp(jp);return this.request({protocolName:ad,requestData:{peerAccount:o,count:a||15,lastMessageTime:s||0,messageKey:i}}).then((function(e){var o=e.data,a=o.complete,s=o.messageList,i=o.messageKey,l=o.lastMessageTime;hu(s)?Qi.log(\"\".concat(n,\" ok. complete:\").concat(a,\" but messageList is undefined!\")):Qi.log(\"\".concat(n,\" ok. complete:\").concat(a,\" count:\").concat(s.length)),c.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(u,\" complete:\").concat(a,\" length:\").concat(s.length)).end();var d=t.getModule(ll);1===a&&d.setCompleted(r);var p=d.storeRoamingMessage(s,r);d.modifyMessageList(r),d.updateIsRead(r),d.updateRoamingMessageKeyAndTime(r,i,l);var g=d.getPeerReadTime(r);if(Qi.log(\"\".concat(n,\" update isPeerRead property. conversationID:\").concat(r,\" peerReadTime:\").concat(g)),g)d.updateMessageIsPeerReadProperty(r,g);else{var h=r.replace(Yn.CONV_C2C,\"\");t.getRemotePeerReadTime([h]).then((function(){d.updateMessageIsPeerReadProperty(r,d.getPeerReadTime(r))}))}return p})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];c.setMessage(u).setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"getRemotePeerReadTime\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRemotePeerReadTime\");if(Xu(e))return Qi.warn(\"\".concat(n,\" userIDList is empty!\")),Promise.resolve();var o=new Dp(tg);return Qi.log(\"\".concat(n,\" userIDList:\").concat(e)),this.request({protocolName:sd,requestData:{userIDList:e}}).then((function(r){var a=r.data.peerReadTimeList;Qi.log(\"\".concat(n,\" ok. peerReadTimeList:\").concat(a));for(var s=\"\",i=t.getModule(ll),u=0;u<e.length;u++)s+=\"\".concat(e[u],\"-\").concat(a[u],\" \"),a[u]>0&&i.recordPeerReadTime(\"C2C\".concat(e[u]),a[u]);o.setNetworkType(t.getNetworkType()).setMessage(s).end()})).catch((function(e){t.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e)}))}}]),n}(Nl),lm=He.findIndex,dm=!0,pm=ze(\"findIndex\");\"findIndex\"in[]&&Array(1).findIndex((function(){dm=!1})),ke({target:\"Array\",proto:!0,forced:dm||!pm},{findIndex:function(e){return lm(this,e,arguments.length>1?arguments[1]:void 0)}}),Io(\"findIndex\");var gm=[],hm=gm.sort,fm=r((function(){gm.sort(void 0)})),_m=r((function(){gm.sort(null)})),mm=je(\"sort\");ke({target:\"Array\",proto:!0,forced:fm||!_m||!mm},{sort:function(e){return void 0===e?hm.call(Oe(this)):hm.call(Oe(this),Le(e))}});var vm=function(){function e(t){yn(this,e),this.list=new Map,this._className=\"MessageListHandler\",this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map,this._groupLocalLastMessageSequenceMap=new Map}return En(e,[{key:\"getLocalOldestMessageByConversationID\",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:\"pushIn\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.conversationID,o=e.ID,r=!0;this.list.has(n)||this.list.set(n,new Map);var a=this.list.get(n).has(o);if(a){var s=this.list.get(n).get(o);if(!t||!0===s.isModified)return r=!1}return this.list.get(n).set(o,e),this._setLatestMessageSentByPeer(n,e),this._setLatestMessageSentByMe(n,e),this._setGroupLocalLastMessageSequence(n,e),r}},{key:\"unshift\",value:function(e){var t;if(gu(e)){if(e.length>0){t=e[0].conversationID;var n=e.length;this._unshiftMultipleMessages(e),this._setGroupLocalLastMessageSequence(t,e[n-1])}}else t=e.conversationID,this._unshiftSingleMessage(e),this._setGroupLocalLastMessageSequence(t,e);if(t&&t.startsWith(Yn.CONV_C2C)){var o=Array.from(this.list.get(t).values()),r=o.length;if(0===r)return;for(var a=r-1;a>=0;a--)if(\"out\"===o[a].flow){this._setLatestMessageSentByMe(t,o[a]);break}for(var s=r-1;s>=0;s--)if(\"in\"===o[s].flow){this._setLatestMessageSentByPeer(t,o[s]);break}}}},{key:\"_unshiftSingleMessage\",value:function(e){var t=e.conversationID,n=e.ID;if(!this.list.has(t))return this.list.set(t,new Map),void this.list.get(t).set(n,e);var o=Array.from(this.list.get(t));o.unshift([n,e]),this.list.set(t,new Map(o))}},{key:\"_unshiftMultipleMessages\",value:function(e){for(var t=e.length,n=[],o=e[0].conversationID,r=this.list.has(o)?Array.from(this.list.get(o)):[],a=0;a<t;a++)n.push([e[a].ID,e[a]]);this.list.set(o,new Map(n.concat(r)))}},{key:\"remove\",value:function(e){var t=e.conversationID,n=e.ID;this.list.has(t)&&this.list.get(t).delete(n)}},{key:\"revoke\",value:function(e,t,n){if(Qi.debug(\"revoke message\",e,t,n),this.list.has(e)){var o,r=Bn(this.list.get(e));try{for(r.s();!(o=r.n()).done;){var a=Pn(o.value,2)[1];if(a.sequence===t&&!a.isRevoked&&(hu(n)||a.random===n))return a.isRevoked=!0,a}}catch(s){r.e(s)}finally{r.f()}}return null}},{key:\"removeByConversationID\",value:function(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}},{key:\"findMessage\",value:function(e){var t,n=null,o=Bn(this.list);try{for(o.s();!(t=o.n()).done;){var r=Pn(t.value,2)[1];r.has(e)&&(n=r.get(e))}}catch(a){o.e(a)}finally{o.f()}return n}},{key:\"updateMessageIsPeerReadProperty\",value:function(e,t){var n=[];if(this.list.has(e)){var o,r=Bn(this.list.get(e));try{for(r.s();!(o=r.n()).done;){var a=Pn(o.value,2)[1];a.time<=t&&!a.isPeerRead&&\"out\"===a.flow&&(a.isPeerRead=!0,n.push(a))}}catch(s){r.e(s)}finally{r.f()}Qi.log(\"\".concat(this._className,\".updateMessageIsPeerReadProperty conversationID:\").concat(e,\" peerReadTime:\").concat(t,\" count:\").concat(n.length))}return n}},{key:\"updateMessageIsModifiedProperty\",value:function(e){var t=e.conversationID,n=e.ID;if(this.list.has(t)){var o=this.list.get(t).get(n);o&&(o.isModified=!0)}}},{key:\"hasLocalMessageList\",value:function(e){return this.list.has(e)}},{key:\"getLocalMessageList\",value:function(e){return this.hasLocalMessageList(e)?Un(this.list.get(e).values()):[]}},{key:\"hasLocalMessage\",value:function(e,t){return!!this.hasLocalMessageList(e)&&this.list.get(e).has(t)}},{key:\"getLocalMessage\",value:function(e,t){return this.hasLocalMessage(e,t)?this.list.get(e).get(t):null}},{key:\"getLocalLastMessage\",value:function(e){var t=this.getLocalMessageList(e);return t[t.length-1]}},{key:\"_setLatestMessageSentByPeer\",value:function(e,t){e.startsWith(Yn.CONV_C2C)&&\"in\"===t.flow&&this._latestMessageSentByPeerMap.set(e,t)}},{key:\"_setLatestMessageSentByMe\",value:function(e,t){e.startsWith(Yn.CONV_C2C)&&\"out\"===t.flow&&this._latestMessageSentByMeMap.set(e,t)}},{key:\"_setGroupLocalLastMessageSequence\",value:function(e,t){e.startsWith(Yn.CONV_GROUP)&&this._groupLocalLastMessageSequenceMap.set(e,t.sequence)}},{key:\"getLatestMessageSentByPeer\",value:function(e){return this._latestMessageSentByPeerMap.get(e)}},{key:\"getLatestMessageSentByMe\",value:function(e){return this._latestMessageSentByMeMap.get(e)}},{key:\"getGroupLocalLastMessageSequence\",value:function(e){return this._groupLocalLastMessageSequenceMap.get(e)||0}},{key:\"modifyMessageSentByPeer\",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,r=this.list.get(t);if(!Xu(r)){var a=Array.from(r.values()),s=a.length;if(0!==s){for(var i=null,u=0,c=!1,l=s-1;l>=0;l--)\"in\"===a[l].flow&&((i=a[l]).nick!==n&&(i.setNickAndAvatar({nick:n}),c=!0),i.avatar!==o&&(i.setNickAndAvatar({avatar:o}),c=!0),c&&(u+=1));Qi.log(\"\".concat(this._className,\".modifyMessageSentByPeer conversationID:\").concat(t,\" count:\").concat(u))}}}},{key:\"modifyMessageSentByMe\",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,r=this.list.get(t);if(!Xu(r)){var a=Array.from(r.values()),s=a.length;if(0!==s){for(var i=null,u=0,c=!1,l=s-1;l>=0;l--)\"out\"===a[l].flow&&((i=a[l]).nick!==n&&(i.setNickAndAvatar({nick:n}),c=!0),i.avatar!==o&&(i.setNickAndAvatar({avatar:o}),c=!0),c&&(u+=1));Qi.log(\"\".concat(this._className,\".modifyMessageSentByMe conversationID:\").concat(t,\" count:\").concat(u))}}}},{key:\"traversal\",value:function(){if(0!==this.list.size&&-1===Qi.getLevel()){console.group(\"conversationID-messageCount\");var e,t=Bn(this.list);try{for(t.s();!(e=t.n()).done;){var n=Pn(e.value,2),o=n[0],r=n[1];console.log(\"\".concat(o,\"-\").concat(r.size))}}catch(a){t.e(a)}finally{t.f()}console.groupEnd()}}},{key:\"reset\",value:function(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear(),this._groupLocalLastMessageSequenceMap.clear()}}]),e}(),Mm=\"_a2KeyAndTinyIDUpdated\",ym=\"_cloudConfigUpdated\",Im=\"_profileUpdated\";function Em(e){this.mixin(e)}Em.mixin=function(e){var t=e.prototype||e;t._isReady=!1,t.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=!0,setTimeout((function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach((function(e){e.call(this)}),e)}),1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var Tm=[\"jpg\",\"jpeg\",\"gif\",\"png\",\"bmp\",\"image\",\"webp\"],Am=[\"mp4\"],Sm=1,Dm=2,Nm=3,Cm=255,km=function(){function e(t){var n=this;yn(this,e),Xu(t)||(this.userID=t.userID||\"\",this.nick=t.nick||\"\",this.gender=t.gender||\"\",this.birthday=t.birthday||0,this.location=t.location||\"\",this.selfSignature=t.selfSignature||\"\",this.allowType=t.allowType||Yn.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||\"\",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||Yn.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],Xu(t.profileCustomField)||t.profileCustomField.forEach((function(e){n.profileCustomField.push({key:e.key,value:e.value})})))}return En(e,[{key:\"validate\",value:function(e){var t=!0,n=\"\";if(Xu(e))return{valid:!1,tips:\"empty options\"};if(e.profileCustomField)for(var o=e.profileCustomField.length,r=null,a=0;a<o;a++){if(r=e.profileCustomField[a],!lu(r.key)||-1===r.key.indexOf(\"Tag_Profile_Custom\"))return{valid:!1,tips:\"自定义资料字段的前缀必须是 Tag_Profile_Custom\"};if(!lu(r.value))return{valid:!1,tips:\"自定义资料字段的 value 必须是字符串\"}}for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(\"profileCustomField\"===s)continue;if(Xu(e[s])&&!lu(e[s])&&!cu(e[s])){n=\"key:\"+s+\", invalid value:\"+e[s],t=!1;continue}switch(s){case\"nick\":lu(e[s])||(n=\"nick should be a string\",t=!1),Au(e[s])>500&&(n=\"nick name limited: must less than or equal to \".concat(500,\" bytes, current size: \").concat(Au(e[s]),\" bytes\"),t=!1);break;case\"gender\":Cu(nu,e.gender)||(n=\"key:gender, invalid value:\"+e.gender,t=!1);break;case\"birthday\":cu(e.birthday)||(n=\"birthday should be a number\",t=!1);break;case\"location\":lu(e.location)||(n=\"location should be a string\",t=!1);break;case\"selfSignature\":lu(e.selfSignature)||(n=\"selfSignature should be a string\",t=!1);break;case\"allowType\":Cu(ru,e.allowType)||(n=\"key:allowType, invalid value:\"+e.allowType,t=!1);break;case\"language\":cu(e.language)||(n=\"language should be a number\",t=!1);break;case\"avatar\":lu(e.avatar)||(n=\"avatar should be a string\",t=!1);break;case\"messageSettings\":0!==e.messageSettings&&1!==e.messageSettings&&(n=\"messageSettings should be 0 or 1\",t=!1);break;case\"adminForbidType\":Cu(ou,e.adminForbidType)||(n=\"key:adminForbidType, invalid value:\"+e.adminForbidType,t=!1);break;case\"level\":cu(e.level)||(n=\"level should be a number\",t=!1);break;case\"role\":cu(e.role)||(n=\"role should be a number\",t=!1);break;default:n=\"unknown key:\"+s+\"  \"+e[s],t=!1}}return{valid:t,tips:n}}}]),e}(),Lm=function e(t){yn(this,e),this.value=t,this.next=null},Rm=function(){function e(t){yn(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map,Qi.debug(\"SinglyLinkedList init MAX_LENGTH:\".concat(this.MAX_LENGTH))}return En(e,[{key:\"set\",value:function(e){var t=new Lm(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var n=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(n.value),n.next=null,n=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:\"has\",value:function(e){return this.map.has(e)}},{key:\"delete\",value:function(e){this.has(e)&&this.map.delete(e)}},{key:\"tail\",value:function(){return this.pTail}},{key:\"size\",value:function(){return this.map.size}},{key:\"data\",value:function(){return Array.from(this.map.keys())}},{key:\"reset\",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),Om=[\"groupID\",\"name\",\"avatar\",\"type\",\"introduction\",\"notification\",\"ownerID\",\"selfInfo\",\"createTime\",\"infoSequence\",\"lastInfoTime\",\"lastMessage\",\"nextMessageSeq\",\"memberNum\",\"maxMemberNum\",\"memberList\",\"joinOption\",\"groupCustomField\",\"muteAllMembers\"],Gm=function(){function e(t){yn(this,e),this.groupID=\"\",this.name=\"\",this.avatar=\"\",this.type=\"\",this.introduction=\"\",this.notification=\"\",this.ownerID=\"\",this.createTime=\"\",this.infoSequence=\"\",this.lastInfoTime=\"\",this.selfInfo={messageRemindType:\"\",joinTime:\"\",nameCard:\"\",role:\"\",userID:\"\",memberCustomField:void 0,readedSequence:0,excludedUnreadSequenceList:void 0},this.lastMessage={lastTime:\"\",lastSequence:\"\",fromAccount:\"\",messageForShow:\"\"},this.nextMessageSeq=\"\",this.memberNum=\"\",this.memberCount=\"\",this.maxMemberNum=\"\",this.maxMemberCount=\"\",this.joinOption=\"\",this.groupCustomField=[],this.muteAllMembers=void 0,this._initGroup(t)}return En(e,[{key:\"_initGroup\",value:function(e){for(var t in e)Om.indexOf(t)<0||(\"selfInfo\"!==t?(\"memberNum\"===t&&(this.memberCount=e[t]),\"maxMemberNum\"===t&&(this.maxMemberCount=e[t]),this[t]=e[t]):this.updateSelfInfo(e[t]))}},{key:\"updateGroup\",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e));n.lastMsgTime&&(this.lastMessage.lastTime=n.lastMsgTime),hu(n.muteAllMembers)||(\"On\"===n.muteAllMembers?n.muteAllMembers=!0:n.muteAllMembers=!1),n.groupCustomField&&Gu(this.groupCustomField,n.groupCustomField),hu(n.memberNum)||(this.memberCount=n.memberNum),hu(n.maxMemberNum)||(this.maxMemberCount=n.maxMemberNum),Eu(this,n,[\"members\",\"errorCode\",\"lastMsgTime\",\"groupCustomField\",\"memberNum\",\"maxMemberNum\"]),gu(n.members)&&n.members.length>0&&n.members.forEach((function(e){e.userID===t.selfInfo.userID&&Eu(t.selfInfo,e,[\"sequence\"])}))}},{key:\"updateSelfInfo\",value:function(e){var t=e.nameCard,n=e.joinTime,o=e.role,r=e.messageRemindType,a=e.readedSequence,s=e.excludedUnreadSequenceList;Eu(this.selfInfo,{nameCard:t,joinTime:n,role:o,messageRemindType:r,readedSequence:a,excludedUnreadSequenceList:s},[],[\"\",null,void 0,0,NaN])}},{key:\"setSelfNameCard\",value:function(e){this.selfInfo.nameCard=e}},{key:\"memberNum\",set:function(e){},get:function(){return Qi.warn(\"！！！v2.8.0起弃用memberNum，请使用 memberCount\"),this.memberCount}},{key:\"maxMemberNum\",set:function(e){},get:function(){return Qi.warn(\"！！！v2.8.0起弃用maxMemberNum，请使用 maxMemberCount\"),this.maxMemberCount}}]),e}(),bm=function(e,t){if(hu(t))return\"\";switch(e){case Yn.MSG_TEXT:return t.text;case Yn.MSG_IMAGE:return\"[图片]\";case Yn.MSG_LOCATION:return\"[位置]\";case Yn.MSG_AUDIO:return\"[语音]\";case Yn.MSG_VIDEO:return\"[视频]\";case Yn.MSG_FILE:return\"[文件]\";case Yn.MSG_CUSTOM:return\"[自定义消息]\";case Yn.MSG_GRP_TIP:return\"[群提示消息]\";case Yn.MSG_GRP_SYS_NOTICE:return\"[群系统通知]\";case Yn.MSG_FACE:return\"[动画表情]\";case Yn.MSG_MERGER:return\"[聊天记录]\";default:return\"\"}},wm=function(e){return hu(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:\"\",payload:null,type:\"\",isRevoked:!1,cloudCustomData:\"\",onlineOnlyFlag:!1,nick:\"\",nameCard:\"\"}:e instanceof X_?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||\"\",messageForShow:bm(e.type,e.payload),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||\"\",onlineOnlyFlag:e._onlineOnlyFlag||!1,nick:e.nick||\"\",nameCard:e.nameCard||\"\"}:Sn({},e,{messageForShow:bm(e.type,e.payload)})},Pm=function(){function e(t){yn(this,e),this.conversationID=t.conversationID||\"\",this.unreadCount=t.unreadCount||0,this.type=t.type||\"\",this.lastMessage=wm(t.lastMessage),t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=t.peerReadTime||0,this.groupAtInfoList=[],this.remark=\"\",this.isPinned=t.isPinned||!1,this.messageRemindType=\"\",this._initProfile(t)}return En(e,[{key:\"_initProfile\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"userProfile\":t.userProfile=e.userProfile;break;case\"groupProfile\":t.groupProfile=e.groupProfile}})),hu(this.userProfile)&&this.type===Yn.CONV_C2C?this.userProfile=new km({userID:e.conversationID.replace(\"C2C\",\"\")}):hu(this.groupProfile)&&this.type===Yn.CONV_GROUP&&(this.groupProfile=new Gm({groupID:e.conversationID.replace(\"GROUP\",\"\")}))}},{key:\"updateUnreadCount\",value:function(e){var t=e.nextUnreadCount,n=e.isFromGetConversations,o=e.isUnreadC2CMessage;hu(t)||(wu(this.subType)?this.unreadCount=0:n&&this.type===Yn.CONV_GROUP||o&&this.type===Yn.CONV_C2C?this.unreadCount=t:this.unreadCount=this.unreadCount+t)}},{key:\"updateLastMessage\",value:function(e){this.lastMessage=wm(e)}},{key:\"updateGroupAtInfoList\",value:function(e){var t,n=(Fn(t=e.groupAtType)||qn(t)||xn(t)||Kn()).slice(0);-1!==n.indexOf(Yn.CONV_AT_ME)&&-1!==n.indexOf(Yn.CONV_AT_ALL)&&(n=[Yn.CONV_AT_ALL_AT_ME]);var o={from:e.from,groupID:e.groupID,messageSequence:e.sequence,atTypeArray:n,__random:e.__random,__sequence:e.__sequence};this.groupAtInfoList.push(o),Qi.debug(\"Conversation.updateGroupAtInfoList conversationID:\".concat(this.conversationID),this.groupAtInfoList)}},{key:\"clearGroupAtInfoList\",value:function(){this.groupAtInfoList.length=0}},{key:\"reduceUnreadCount\",value:function(){this.unreadCount>=1&&(this.unreadCount-=1)}},{key:\"isLastMessageRevoked\",value:function(e){var t=e.sequence,n=e.time;return this.type===Yn.CONV_C2C&&t===this.lastMessage.lastSequence&&n===this.lastMessage.lastTime||this.type===Yn.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:\"setLastMessageRevoked\",value:function(e){this.lastMessage.isRevoked=e}},{key:\"toAccount\",get:function(){return this.conversationID.startsWith(Yn.CONV_C2C)?this.conversationID.replace(Yn.CONV_C2C,\"\"):this.conversationID.startsWith(Yn.CONV_GROUP)?this.conversationID.replace(Yn.CONV_GROUP,\"\"):\"\"}},{key:\"subType\",get:function(){return this.groupProfile?this.groupProfile.type:\"\"}}]),e}(),Um=function(){function e(t){yn(this,e),this._conversationModule=t,this._className=\"MessageRemindHandler\",this._updateSequence=0}return En(e,[{key:\"getC2CMessageRemindType\",value:function(){var e=this,t=\"\".concat(this._className,\".getC2CMessageRemindType\");return this._conversationModule.request({protocolName:rd,updateSequence:this._updateSequence}).then((function(n){Qi.log(\"\".concat(t,\" ok\"));var o=n.data,r=o.updateSequence,a=o.muteFlagList;e._updateSequence=r,e._patchC2CMessageRemindType(a)})).catch((function(e){Qi.error(\"\".concat(t,\" failed. error:\"),e)}))}},{key:\"_patchC2CMessageRemindType\",value:function(e){var t=this,n=0,o=\"\";gu(e)&&e.length>0&&e.forEach((function(e){var r=e.userID,a=e.muteFlag;0===a?o=Yn.MSG_REMIND_ACPT_AND_NOTE:1===a?o=Yn.MSG_REMIND_DISCARD:2===a&&(o=Yn.MSG_REMIND_ACPT_NOT_NOTE),!0===t._conversationModule.patchMessageRemindType({ID:r,isC2CConversation:!0,messageRemindType:o})&&(n+=1)})),Qi.log(\"\".concat(this._className,\"._patchC2CMessageRemindType count:\").concat(n))}},{key:\"set\",value:function(e){return e.groupID?this._setGroupMessageRemindType(e):gu(e.userIDList)?this._setC2CMessageRemindType(e):void 0}},{key:\"_setGroupMessageRemindType\",value:function(e){var t=this,n=\"\".concat(this._className,\"._setGroupMessageRemindType\"),o=e.groupID,r=e.messageRemindType,a=\"groupID:\".concat(o,\" messageRemindType:\").concat(r),s=new Dp(yg);return s.setMessage(a),this._getModule(cl).modifyGroupMemberInfo({groupID:o,messageRemindType:r,userID:this._conversationModule.getMyUserID()}).then((function(){s.setNetworkType(t._conversationModule.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok. \").concat(a));var e=t._getModule(il).getLocalGroupProfile(o);return e&&(e.selfInfo.messageRemindType=r),t._conversationModule.patchMessageRemindType({ID:o,isC2CConversation:!1,messageRemindType:r})&&t._emitConversationUpdate(),Q_({group:e})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"_setC2CMessageRemindType\",value:function(e){var t=this,n=\"\".concat(this._className,\"._setC2CMessageRemindType\"),o=e.userIDList,r=e.messageRemindType,a=o.slice(0,30),s=0;r===Yn.MSG_REMIND_DISCARD?s=1:r===Yn.MSG_REMIND_ACPT_NOT_NOTE&&(s=2);var i=\"userIDList:\".concat(a,\" messageRemindType:\").concat(r),u=new Dp(yg);return u.setMessage(i),this._conversationModule.request({protocolName:od,requestData:{userIDList:a,muteFlag:s}}).then((function(e){u.setNetworkType(t._conversationModule.getNetworkType()).end();var o=e.data,s=o.updateSequence,i=o.errorList;t._updateSequence=s;var c=[],l=[];gu(i)&&i.forEach((function(e){c.push(e.userID),l.push({userID:e.userID,code:e.errorCode})}));var d=a.filter((function(e){return-1===c.indexOf(e)}));Qi.log(\"\".concat(n,\" ok. successUserIDList:\").concat(d,\" failureUserIDList:\").concat(JSON.stringify(l)));var p=0;return d.forEach((function(e){t._conversationModule.patchMessageRemindType({ID:e,isC2CConversation:!0,messageRemindType:r})&&(p+=1)})),p>=1&&t._emitConversationUpdate(),a.length=c.length=0,im({successUserIDList:d.map((function(e){return{userID:e}})),failureUserIDList:l})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"_getModule\",value:function(e){return this._conversationModule.getModule(e)}},{key:\"_emitConversationUpdate\",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:\"setUpdateSequence\",value:function(e){this._updateSequence=e}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._updateSequence=0}}]),e}(),Fm=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"ConversationModule\",Em.mixin(Gn(o)),o._messageListHandler=new vm,o._messageRemindHandler=new Um(Gn(o)),o.singlyLinkedList=new Rm(100),o._pagingStatus=xc.NOT_START,o._pagingTimeStamp=0,o._pagingStartIndex=0,o._pagingPinnedTimeStamp=0,o._pagingPinnedStartIndex=0,o._conversationMap=new Map,o._tmpGroupList=[],o._tmpGroupAtTipsList=[],o._peerReadTimeMap=new Map,o._completedMap=new Map,o._roamingMessageKeyAndTimeMap=new Map,o._remoteGroupReadSequenceMap=new Map,o._initListeners(),o}return En(n,[{key:\"_initListeners\",value:function(){var e=this.getInnerEmitterInstance();e.on(Mm,this._initLocalConversationList,this),e.on(Im,this._onProfileUpdated,this)}},{key:\"onCheckTimer\",value:function(e){e%60==0&&this._messageListHandler.traversal()}},{key:\"_initLocalConversationList\",value:function(){var e=this,t=new Dp(lg);Qi.log(\"\".concat(this._className,\"._initLocalConversationList.\"));var n=\"\",o=this._getStorageConversationList();if(o){for(var r=o.length,a=0;a<r;a++){var s=o[a];if(s){if(s.conversationID===\"\".concat(Yn.CONV_C2C,\"@TLS#ERROR\")||s.conversationID===\"\".concat(Yn.CONV_C2C,\"@TLS#NOT_FOUND\"))continue;if(s.groupProfile){var i=s.groupProfile.type;if(wu(i))continue}}this._conversationMap.set(o[a].conversationID,new Pm(o[a]))}this.emitConversationUpdate(!0,!1),n=\"count:\".concat(r)}else n=\"count:0\";t.setNetworkType(this.getNetworkType()).setMessage(n).end(),this.getModule(sl)||this.triggerReady(),this.ready((function(){e._tmpGroupList.length>0&&(e.updateConversationGroupProfile(e._tmpGroupList),e._tmpGroupList.length=0)})),this._syncConversationList()}},{key:\"onMessageSent\",value:function(e){this._onSendOrReceiveMessage({conversationOptionsList:e.conversationOptionsList,isInstantMessage:!0})}},{key:\"onNewMessage\",value:function(e){this._onSendOrReceiveMessage(e)}},{key:\"_onSendOrReceiveMessage\",value:function(e){var t=this,n=e.conversationOptionsList,o=e.isInstantMessage,r=void 0===o||o,a=e.isUnreadC2CMessage,s=void 0!==a&&a;this._isReady?0!==n.length&&(this._getC2CPeerReadTime(n),this._updateLocalConversationList({conversationOptionsList:n,isInstantMessage:r,isUnreadC2CMessage:s,isFromGetConversations:!1}),this._setStorageConversationList(),this.emitConversationUpdate()):this.ready((function(){t._onSendOrReceiveMessage(e)}))}},{key:\"updateConversationGroupProfile\",value:function(e){var t=this;gu(e)&&0===e.length||(0!==this._conversationMap.size?(e.forEach((function(e){var n=\"GROUP\".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);o.groupProfile=JSON.parse(JSON.stringify(e)),o.lastMessage.lastSequence<e.nextMessageSeq&&(o.lastMessage.lastSequence=e.nextMessageSeq-1),o.subType||(o.subType=e.type)}})),this.emitConversationUpdate(!0,!1)):this._tmpGroupList=e)}},{key:\"_updateConversationUserProfile\",value:function(e){var t=this;e.data.forEach((function(e){var n=\"C2C\".concat(e.userID);t._conversationMap.has(n)&&(t._conversationMap.get(n).userProfile=e)})),this.emitConversationUpdate(!0,!1)}},{key:\"onMessageRevoked\",value:function(e){var t=this;if(0!==e.length){var n=null,o=!1;e.forEach((function(e){(n=t._conversationMap.get(e.conversationID))&&(n.reduceUnreadCount(),n.isLastMessageRevoked(e)&&(o=!0,n.setLastMessageRevoked(!0)))})),o&&this.emitConversationUpdate(!0,!1)}}},{key:\"onMessageDeleted\",value:function(e){if(0!==e.length){e.forEach((function(e){e.isDeleted=!0}));for(var t=e[0].conversationID,n=this._messageListHandler.getLocalMessageList(t),o={},r=n.length-1;r>=0;r--)if(!n[r].isDeleted){o=n[r];break}var a=this._conversationMap.get(t);if(a){var s=!1;a.lastMessage.lastSequence===o.sequence&&a.lastMessage.lastTime===o.time||(Xu(o)&&(o=void 0),a.updateLastMessage(o),s=!0,Qi.log(\"\".concat(this._className,\".onMessageDeleted. update conversationID:\").concat(t,\" with lastMessage:\"),a.lastMessage)),t.startsWith(Yn.CONV_C2C)&&this.updateUnreadCount(t),s&&this.emitConversationUpdate(!0,!1)}}}},{key:\"onNewGroupAtTips\",value:function(e){var t=this,n=e.dataList,o=null;n.forEach((function(e){e.groupAtTips?o=e.groupAtTips:e.elements&&(o=e.elements),o.__random=e.random,o.__sequence=e.clientSequence,t._tmpGroupAtTipsList.push(o)})),Qi.debug(\"\".concat(this._className,\".onNewGroupAtTips isReady:\").concat(this._isReady),this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:\"_handleGroupAtTipsList\",value:function(){var e=this;if(0!==this._tmpGroupAtTipsList.length){var t=!1;this._tmpGroupAtTipsList.forEach((function(n){var o=n.groupID;if(n.from!==e.getMyUserID()){var r=e._conversationMap.get(\"\".concat(Yn.CONV_GROUP).concat(o));r&&(r.updateGroupAtInfoList(n),t=!0)}})),t&&this.emitConversationUpdate(!0,!1),this._tmpGroupAtTipsList.length=0}}},{key:\"_getC2CPeerReadTime\",value:function(e){var t=this,n=[];if(e.forEach((function(e){t._conversationMap.has(e.conversationID)||e.type!==Yn.CONV_C2C||n.push(e.conversationID.replace(Yn.CONV_C2C,\"\"))})),n.length>0){Qi.debug(\"\".concat(this._className,\"._getC2CPeerReadTime userIDList:\").concat(n));var o=this.getModule(sl);o&&o.getRemotePeerReadTime(n)}}},{key:\"_getStorageConversationList\",value:function(){return this.getModule(pl).getItem(\"conversationMap\")}},{key:\"_setStorageConversationList\",value:function(){var e=this.getLocalConversationList().slice(0,20).map((function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}}));this.getModule(pl).setItem(\"conversationMap\",e)}},{key:\"emitConversationUpdate\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Un(this._conversationMap.values());if(t){var o=this.getModule(il);o&&o.updateGroupLastMessage(n)}e&&this.emitOuterEvent(Wn.CONVERSATION_LIST_UPDATED)}},{key:\"getLocalConversationList\",value:function(){return Un(this._conversationMap.values())}},{key:\"getLocalConversation\",value:function(e){return this._conversationMap.get(e)}},{key:\"_syncConversationList\",value:function(){var e=this,t=new Dp(dg);return this._pagingStatus===xc.NOT_START&&this._conversationMap.clear(),this._pagingGetConversationList().then((function(n){return e._pagingStatus=xc.RESOLVED,e._setStorageConversationList(),e._handleC2CPeerReadTime(),e._patchConversationProperties(),t.setMessage(e._conversationMap.size).setNetworkType(e.getNetworkType()).end(),n})).catch((function(n){return e._pagingStatus=xc.REJECTED,t.setMessage(e._pagingTimeStamp),e.probeNetwork().then((function(e){var o=Pn(e,2),r=o[0],a=o[1];t.setError(n,r,a).end()})),um(n)}))}},{key:\"_patchConversationProperties\",value:function(){var e=this,t=Date.now(),n=this.checkAndPatchRemark(),o=this._messageRemindHandler.getC2CMessageRemindType(),r=this.getModule(il).getGroupList();Promise.all([n,o,r]).then((function(){var n=Date.now()-t;Qi.log(\"\".concat(e._className,\"._patchConversationProperties ok. cost \").concat(n,\" ms\")),e.emitConversationUpdate(!0,!1)}))}},{key:\"_pagingGetConversationList\",value:function(){var e=this,t=\"\".concat(this._className,\"._pagingGetConversationList\");return Qi.log(\"\".concat(t,\" timeStamp:\").concat(this._pagingTimeStamp,\" startIndex:\").concat(this._pagingStartIndex)+\" pinnedTimeStamp:\".concat(this._pagingPinnedTimeStamp,\" pinnedStartIndex:\").concat(this._pagingPinnedStartIndex)),this._pagingStatus=xc.PENDING,this.request({protocolName:ud,requestData:{fromAccount:this.getMyUserID(),timeStamp:this._pagingTimeStamp,startIndex:this._pagingStartIndex,pinnedTimeStamp:this._pagingPinnedTimeStamp,pinnedStartIndex:this._pagingStartIndex,orderType:1}}).then((function(n){var o=n.data,r=o.completeFlag,a=o.conversations,s=void 0===a?[]:a,i=o.timeStamp,u=o.startIndex,c=o.pinnedTimeStamp,l=o.pinnedStartIndex;if(Qi.log(\"\".concat(t,\" ok. completeFlag:\").concat(r,\" count:\").concat(s.length,\" isReady:\").concat(e._isReady)),s.length>0){var d=e._getConversationOptions(s);e._updateLocalConversationList({conversationOptionsList:d,isFromGetConversations:!0}),e.isLoggedIn()&&e.emitConversationUpdate()}if(!e._isReady){if(!e.isLoggedIn())return im();e.triggerReady()}return e._pagingTimeStamp=i,e._pagingStartIndex=u,e._pagingPinnedTimeStamp=c,e._pagingPinnedStartIndex=l,1!==r?e._pagingGetConversationList():(e._handleGroupAtTipsList(),im())})).catch((function(n){throw e.isLoggedIn()&&(e._isReady||(Qi.warn(\"\".concat(t,\" failed. error:\"),n),e.triggerReady())),n}))}},{key:\"_updateLocalConversationList\",value:function(e){var t,n=e.isFromGetConversations,o=Date.now();t=this._getTmpConversationListMapping(e),this._conversationMap=new Map(this._sortConversationList([].concat(Un(t.toBeUpdatedConversationList),Un(this._conversationMap)))),n||this._updateUserOrGroupProfile(t.newConversationList),Qi.debug(\"\".concat(this._className,\"._updateLocalConversationList cost \").concat(Date.now()-o,\" ms\"))}},{key:\"_getTmpConversationListMapping\",value:function(e){for(var t=e.conversationOptionsList,n=e.isFromGetConversations,o=e.isInstantMessage,r=e.isUnreadC2CMessage,a=void 0!==r&&r,s=[],i=[],u=this.getModule(il),c=this.getModule(ul),l=0,d=t.length;l<d;l++){var p=new Pm(t[l]),g=p.conversationID;if(g!==\"\".concat(Yn.CONV_C2C,\"@TLS#ERROR\")&&g!==\"\".concat(Yn.CONV_C2C,\"@TLS#NOT_FOUND\"))if(this._conversationMap.has(g)){var h=this._conversationMap.get(g),f=[\"unreadCount\",\"allowType\",\"adminForbidType\",\"payload\",\"isPinned\"];!1===o&&f.push(\"lastMessage\");var _=t[l].lastMessage,m=!hu(_);m||this._onLastMessageNotExist(t[l]),hu(o)&&m&&null===h.lastMessage.payload&&(h.lastMessage.payload=_.payload),Eu(h,p,f,[null,void 0,\"\",0,NaN]),h.updateUnreadCount({nextUnreadCount:p.unreadCount,isFromGetConversations:n,isUnreadC2CMessage:a}),o&&m&&(h.lastMessage.payload=_.payload,h.type===Yn.CONV_GROUP&&(h.lastMessage.nameCard=_.nameCard,h.lastMessage.nick=_.nick)),m&&h.lastMessage.cloudCustomData!==_.cloudCustomData&&(h.lastMessage.cloudCustomData=_.cloudCustomData||\"\"),this._conversationMap.delete(g),s.push([g,h])}else{if(p.type===Yn.CONV_GROUP&&u){var v=p.groupProfile.groupID,M=u.getLocalGroupProfile(v);M&&(p.groupProfile=M,p.updateUnreadCount({nextUnreadCount:0}))}else if(p.type===Yn.CONV_C2C){var y=g.replace(Yn.CONV_C2C,\"\");c&&c.isMyFriend(y)&&(p.remark=c.getFriendRemark(y))}i.push(p),s.push([g,p])}}return{toBeUpdatedConversationList:s,newConversationList:i}}},{key:\"_onLastMessageNotExist\",value:function(e){new Dp(Ih).setMessage(\"\".concat(JSON.stringify(e))).setNetworkType(this.getNetworkType()).end()}},{key:\"_sortConversationList\",value:function(e){var t=[],n=[];return e.forEach((function(e){!0===e[1].isPinned?t.push(e):n.push(e)})),t.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})).concat(n.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})))}},{key:\"_sortConversationListAndEmitEvent\",value:function(){this._conversationMap=new Map(this._sortConversationList(Un(this._conversationMap))),this.emitConversationUpdate(!0,!1)}},{key:\"_updateUserOrGroupProfile\",value:function(e){var t=this;if(0!==e.length){var n=[],o=[],r=this.getModule(al),a=this.getModule(il);e.forEach((function(e){if(e.type===Yn.CONV_C2C)n.push(e.toAccount);else if(e.type===Yn.CONV_GROUP){var t=e.toAccount;a.hasLocalGroup(t)?e.groupProfile=a.getLocalGroupProfile(t):o.push(t)}})),Qi.log(\"\".concat(this._className,\"._updateUserOrGroupProfile c2cUserIDList:\").concat(n,\" groupIDList:\").concat(o)),n.length>0&&r.getUserProfile({userIDList:n}).then((function(e){var n=e.data;gu(n)?n.forEach((function(e){t._conversationMap.get(\"C2C\".concat(e.userID)).userProfile=e})):t._conversationMap.get(\"C2C\".concat(n.userID)).userProfile=n})),o.length>0&&a.getGroupProfileAdvance({groupIDList:o,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"FaceUrl\"]}}).then((function(e){e.data.successGroupList.forEach((function(e){var n=\"GROUP\".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);Eu(o.groupProfile,e,[],[null,void 0,\"\",0,NaN]),!o.subType&&e.type&&(o.subType=e.type)}}))}))}}},{key:\"_getConversationOptions\",value:function(e){var t=this,n=[],o=e.filter((function(e){var t=e.lastMsg;return pu(t)})).filter((function(e){var t=e.type,n=e.userID;return 1===t&&\"@TLS#NOT_FOUND\"!==n&&\"@TLS#ERROR\"!==n||2===t})).map((function(e){if(1===e.type){var o={userID:e.userID,nick:e.peerNick,avatar:e.peerAvatar};return n.push(o),{conversationID:\"C2C\".concat(e.userID),type:\"C2C\",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,cloudCustomData:e.lastMsg.cloudCustomData||\"\",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1,nick:\"\",nameCard:\"\"},userProfile:new km(o),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned,messageRemindType:\"\"}}return{conversationID:\"GROUP\".concat(e.groupID),type:\"GROUP\",lastMessage:Sn({lastTime:e.time,lastSequence:e.messageReadSeq+e.unreadCount,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow},t._patchTypeAndPayload(e),{cloudCustomData:e.lastMsg.cloudCustomData||\"\",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1,nick:e.senderNick||\"\",nameCard:e.senderNameCard||\"\"}),groupProfile:new Gm({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0,isPinned:1===e.isPinned,messageRemindType:\"\"}}));n.length>0&&this.getModule(al).onConversationsProfileUpdated(n);return o}},{key:\"_patchTypeAndPayload\",value:function(e){var t=e.lastMsg,n=t.event,o=void 0===n?void 0:n,r=t.elements,a=void 0===r?[]:r,s=t.groupTips,i=void 0===s?{}:s;if(!hu(o)&&!Xu(i)){var u=new X_(i);u.setElement({type:Yn.MSG_GRP_TIP,content:Sn({},i.elements,{groupProfile:i.groupProfile})});var c=JSON.parse(JSON.stringify(u.payload));return u=null,{type:Yn.MSG_GRP_TIP,payload:c}}return{type:a[0]?a[0].type:null,payload:a[0]?a[0].content:null}}},{key:\"getLocalMessageList\",value:function(e){return this._messageListHandler.getLocalMessageList(e)}},{key:\"deleteLocalMessage\",value:function(e){e instanceof X_&&this._messageListHandler.remove(e)}},{key:\"onConversationDeleted\",value:function(e){var t=this;Qi.log(\"\".concat(this._className,\".onConversationDeleted\")),gu(e)&&e.forEach((function(e){var n=e.type,o=e.userID,r=e.groupID,a=\"\";1===n?a=\"\".concat(Yn.CONV_C2C).concat(o):2===n&&(a=\"\".concat(Yn.CONV_GROUP).concat(r)),t.deleteLocalConversation(a)}))}},{key:\"onConversationPinned\",value:function(e){var t=this;if(gu(e)){var n=!1;e.forEach((function(e){var o,r=e.type,a=e.userID,s=e.groupID;1===r?o=t.getLocalConversation(\"\".concat(Yn.CONV_C2C).concat(a)):2===r&&(o=t.getLocalConversation(\"\".concat(Yn.CONV_GROUP).concat(s))),o&&(Qi.log(\"\".concat(t._className,\".onConversationPinned conversationID:\").concat(o.conversationID,\" isPinned:\").concat(o.isPinned)),o.isPinned||(o.isPinned=!0,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:\"onConversationUnpinned\",value:function(e){var t=this;if(gu(e)){var n=!1;e.forEach((function(e){var o,r=e.type,a=e.userID,s=e.groupID;1===r?o=t.getLocalConversation(\"\".concat(Yn.CONV_C2C).concat(a)):2===r&&(o=t.getLocalConversation(\"\".concat(Yn.CONV_GROUP).concat(s))),o&&(Qi.log(\"\".concat(t._className,\".onConversationUnpinned conversationID:\").concat(o.conversationID,\" isPinned:\").concat(o.isPinned)),o.isPinned&&(o.isPinned=!1,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:\"getMessageList\",value:function(e){var t=this,n=e.conversationID,o=e.nextReqMessageID,r=e.count,a=\"\".concat(this._className,\".getMessageList\"),s=this.getLocalConversation(n),i=\"\";if(s&&s.groupProfile&&(i=s.groupProfile.type),wu(i))return Qi.log(\"\".concat(a,\" not available in avchatroom. conversationID:\").concat(n)),im({messageList:[],nextReqMessageID:\"\",isCompleted:!0});(hu(r)||r>15)&&(r=15);var u=this._computeLeftCount({conversationID:n,nextReqMessageID:o});return Qi.log(\"\".concat(a,\" conversationID:\").concat(n,\" leftCount:\").concat(u,\" count:\").concat(r,\" nextReqMessageID:\").concat(o)),this._needGetHistory({conversationID:n,leftCount:u,count:r})?this.getHistoryMessages({conversationID:n,nextReqMessageID:o,count:20}).then((function(){return u=t._computeLeftCount({conversationID:n,nextReqMessageID:o}),Q_(t._computeResult({conversationID:n,nextReqMessageID:o,count:r,leftCount:u}))})):(Qi.log(\"\".concat(a,\".getMessageList get message list from memory\")),this.modifyMessageList(n),im(this._computeResult({conversationID:n,nextReqMessageID:o,count:r,leftCount:u})))}},{key:\"_computeLeftCount\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;return n?this._messageListHandler.getLocalMessageList(t).findIndex((function(e){return e.ID===n})):this._getMessageListSize(t)}},{key:\"_getMessageListSize\",value:function(e){return this._messageListHandler.getLocalMessageList(e).length}},{key:\"_needGetHistory\",value:function(e){var t=e.conversationID,n=e.leftCount,o=e.count,r=this.getLocalConversation(t),a=\"\";return r&&r.groupProfile&&(a=r.groupProfile.type),!qu(t)&&!wu(a)&&(n<o&&!this._completedMap.has(t))}},{key:\"_computeResult\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,r=e.leftCount,a=this._computeMessageList({conversationID:t,nextReqMessageID:n,count:o}),s=this._computeIsCompleted({conversationID:t,leftCount:r,count:o}),i=this._computeNextReqMessageID({messageList:a,isCompleted:s,conversationID:t}),u=\"\".concat(this._className,\"._computeResult. conversationID:\").concat(t);return Qi.log(\"\".concat(u,\" leftCount:\").concat(r,\" count:\").concat(o,\" nextReqMessageID:\").concat(i,\" isCompleted:\").concat(s)),{messageList:a,nextReqMessageID:i,isCompleted:s}}},{key:\"_computeMessageList\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,r=this._messageListHandler.getLocalMessageList(t),a=this._computeIndexEnd({nextReqMessageID:n,messageList:r}),s=this._computeIndexStart({indexEnd:a,count:o});return r.slice(s,a)}},{key:\"_computeNextReqMessageID\",value:function(e){var t=e.messageList,n=e.isCompleted,o=e.conversationID;if(!n)return 0===t.length?\"\":t[0].ID;var r=this._messageListHandler.getLocalMessageList(o);return 0===r.length?\"\":r[0].ID}},{key:\"_computeIndexEnd\",value:function(e){var t=e.messageList,n=void 0===t?[]:t,o=e.nextReqMessageID;return o?n.findIndex((function(e){return e.ID===o})):n.length}},{key:\"_computeIndexStart\",value:function(e){var t=e.indexEnd,n=e.count;return t>n?t-n:0}},{key:\"_computeIsCompleted\",value:function(e){var t=e.conversationID;return!!(e.leftCount<=e.count&&this._completedMap.has(t))}},{key:\"getHistoryMessages\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;if(t===Yn.CONV_SYSTEM)return im();e.count?e.count>20&&(e.count=20):e.count=15;var o=this._messageListHandler.getLocalOldestMessageByConversationID(t);o||((o={}).time=0,o.sequence=0,0===t.indexOf(Yn.CONV_C2C)?(o.to=t.replace(Yn.CONV_C2C,\"\"),o.conversationType=Yn.CONV_C2C):0===t.indexOf(Yn.CONV_GROUP)&&(o.to=t.replace(Yn.CONV_GROUP,\"\"),o.conversationType=Yn.CONV_GROUP));var r=\"\",a=null,s=this._roamingMessageKeyAndTimeMap.has(t);switch(o.conversationType){case Yn.CONV_C2C:return r=t.replace(Yn.CONV_C2C,\"\"),(a=this.getModule(sl))?a.getRoamingMessage({conversationID:e.conversationID,peerAccount:r,count:e.count,lastMessageTime:s?this._roamingMessageKeyAndTimeMap.get(t).lastMessageTime:0,messageKey:s?this._roamingMessageKeyAndTimeMap.get(t).messageKey:\"\"}):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE});case Yn.CONV_GROUP:return(a=this.getModule(il))?a.getRoamingMessage({conversationID:e.conversationID,groupID:o.to,count:e.count,sequence:n&&!1===o._onlineOnlyFlag?o.sequence-1:o.sequence}):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE});default:return im()}}},{key:\"patchConversationLastMessage\",value:function(e){var t=this.getLocalConversation(e);if(t){var n=t.lastMessage,o=n.messageForShow,r=n.payload;if(Xu(o)||Xu(r)){var a=this._messageListHandler.getLocalMessageList(e);if(0===a.length)return;var s=a[a.length-1];Qi.log(\"\".concat(this._className,\".patchConversationLastMessage conversationID:\").concat(e,\" payload:\"),s.payload),t.updateLastMessage(s)}}}},{key:\"storeRoamingMessage\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.startsWith(Yn.CONV_C2C)?Yn.CONV_C2C:Yn.CONV_GROUP,o=null,r=[],a=0,s=e.length,i=null,u=n===Yn.CONV_GROUP,c=this.getModule(fl),l=function(){a=u?e.length-1:0,s=u?0:e.length},d=function(){u?--a:++a},p=function(){return u?a>=s:a<s};for(l();p();d())if(u&&1===e[a].sequence&&this.setCompleted(t),1!==e[a].isPlaceMessage)if((o=new X_(e[a])).to=e[a].to,o.isSystemMessage=!!e[a].isSystemMessage,o.conversationType=n,4===e[a].event?i={type:Yn.MSG_GRP_TIP,content:Sn({},e[a].elements,{groupProfile:e[a].groupProfile})}:(e[a].elements=c.parseElements(e[a].elements,e[a].from),i=e[a].elements),u||o.setNickAndAvatar({nick:e[a].nick,avatar:e[a].avatar}),Xu(i)){var g=new Dp(eg);g.setMessage(\"from:\".concat(o.from,\" to:\").concat(o.to,\" sequence:\").concat(o.sequence,\" event:\").concat(e[a].event)),g.setNetworkType(this.getNetworkType()).setLevel(\"warning\").end()}else o.setElement(i),o.reInitialize(this.getMyUserID()),r.push(o);return this._messageListHandler.unshift(r),l=d=p=null,r}},{key:\"findMessage\",value:function(e){return this._messageListHandler.findMessage(e)}},{key:\"setMessageRead\",value:function(e){var t=e.conversationID,n=(e.messageID,this.getLocalConversation(t));if(Qi.log(\"\".concat(this._className,\".setMessageRead conversationID:\").concat(t,\" unreadCount:\").concat(n?n.unreadCount:0)),!n)return im();if(n.type!==Yn.CONV_GROUP||Xu(n.groupAtInfoList)||this.deleteGroupAtTips(t),0===n.unreadCount)return im();var o=this._messageListHandler.getLocalLastMessage(t),r=n.lastMessage.lastTime;o&&r<o.time&&(r=o.time);var a=n.lastMessage.lastSequence;o&&a<o.sequence&&(a=o.sequence);var s=null;switch(n.type){case Yn.CONV_C2C:return(s=this.getModule(sl))?s.setMessageRead({conversationID:t,lastMessageTime:r}):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE});case Yn.CONV_GROUP:return(s=this._moduleManager.getModule(il))?s.setMessageRead({conversationID:t,lastMessageSeq:a}):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE});case Yn.CONV_SYSTEM:return n.unreadCount=0,this.emitConversationUpdate(!0,!1),im();default:return im()}}},{key:\"setAllMessageRead\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=\"\".concat(this._className,\".setAllMessageRead\");t.scope||(t.scope=Yn.READ_ALL_MSG),Qi.log(\"\".concat(n,\" options:\"),t);var o=this._createSetAllMessageReadPack(t);if(0===o.readAllC2CMessage&&0===o.groupMessageReadInfoList.length)return im();var r=new Dp(pg);return this.request({protocolName:Nd,requestData:o}).then((function(n){var o=n.data,a=e._handleAllMessageRead(o);return r.setMessage(\"scope:\".concat(t.scope,\" failureGroups:\").concat(JSON.stringify(a))).setNetworkType(e.getNetworkType()).end(),im()})).catch((function(t){return e.probeNetwork().then((function(e){var n=Pn(e,2),o=n[0],a=n[1];r.setError(t,o,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),t),um({code:t&&t.code?t.code:lp.MESSAGE_UNREAD_ALL_FAIL,message:t&&t.message?t.message:dp.MESSAGE_UNREAD_ALL_FAIL})}))}},{key:\"_getConversationLastMessageSequence\",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastSequence;return t&&n<t.sequence&&(n=t.sequence),n}},{key:\"_getConversationLastMessageTime\",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastTime;return t&&n<t.time&&(n=t.time),n}},{key:\"_createSetAllMessageReadPack\",value:function(e){var t,n={readAllC2CMessage:0,groupMessageReadInfoList:[]},o=e.scope,r=Bn(this._conversationMap);try{for(r.s();!(t=r.n()).done;){var a=Pn(t.value,2)[1];if(a.unreadCount>0)if(a.type===Yn.CONV_C2C&&0===n.readAllC2CMessage){if(o===Yn.READ_ALL_MSG)n.readAllC2CMessage=1;else if(o===Yn.READ_ALL_C2C_MSG){n.readAllC2CMessage=1;break}}else if(a.type===Yn.CONV_GROUP&&(o===Yn.READ_ALL_GROUP_MSG||o===Yn.READ_ALL_MSG)){var s=this._getConversationLastMessageSequence(a);n.groupMessageReadInfoList.push({groupID:a.groupProfile.groupID,messageSequence:s})}}}catch(i){r.e(i)}finally{r.f()}return n}},{key:\"onPushedAllMessageRead\",value:function(e){this._handleAllMessageRead(e)}},{key:\"_handleAllMessageRead\",value:function(e){var t=e.groupMessageReadInfoList,n=e.readAllC2CMessage,o=this._parseGroupReadInfo(t);return this._updateAllConversationUnreadCount({readAllC2CMessage:n})>=1&&this.emitConversationUpdate(!0,!1),o}},{key:\"_parseGroupReadInfo\",value:function(e){var t=[];if(e&&e.length)for(var n=0,o=e.length;n<o;n++){var r=e[n],a=r.groupID,s=r.sequence,i=r.retCode,u=r.lastMessageSeq;hu(i)?this._remoteGroupReadSequenceMap.set(a,u):(this._remoteGroupReadSequenceMap.set(a,s),0!==i&&t.push(\"\".concat(a,\"-\").concat(s,\"-\").concat(i)))}return t}},{key:\"_updateAllConversationUnreadCount\",value:function(e){var t,n=e.readAllC2CMessage,o=0,r=Bn(this._conversationMap);try{for(r.s();!(t=r.n()).done;){var a=Pn(t.value,2),s=a[0],i=a[1];if(i.unreadCount>=1){if(1===n&&i.type===Yn.CONV_C2C){var u=this._getConversationLastMessageTime(i);this.updateIsReadAfterReadReport({conversationID:s,lastMessageTime:u})}else if(i.type===Yn.CONV_GROUP){var c=s.replace(Yn.CONV_GROUP,\"\");if(this._remoteGroupReadSequenceMap.has(c)){var l=this._remoteGroupReadSequenceMap.get(c),d=this._getConversationLastMessageSequence(i);this.updateIsReadAfterReadReport({conversationID:s,remoteReadSequence:l}),d>=l&&this._remoteGroupReadSequenceMap.delete(c)}}this.updateUnreadCount(s,!1)&&(o+=1)}}}catch(p){r.e(p)}finally{r.f()}return o}},{key:\"isRemoteRead\",value:function(e){var t=e.conversationID,n=e.sequence,o=t.replace(Yn.CONV_GROUP,\"\"),r=!1;if(this._remoteGroupReadSequenceMap.has(o)){var a=this._remoteGroupReadSequenceMap.get(o);n<=a&&(r=!0,Qi.log(\"\".concat(this._className,\".isRemoteRead conversationID:\").concat(t,\" messageSequence:\").concat(n,\" remoteReadSequence:\").concat(a))),n>=a+10&&this._remoteGroupReadSequenceMap.delete(o)}return r}},{key:\"updateIsReadAfterReadReport\",value:function(e){var t=e.conversationID,n=e.lastMessageSeq,o=e.lastMessageTime,r=this._messageListHandler.getLocalMessageList(t);if(0!==r.length)for(var a,s=r.length-1;s>=0;s--)if(a=r[s],!(o&&a.time>o||n&&a.sequence>n)){if(\"in\"===a.flow&&a.isRead)break;a.setIsRead(!0)}}},{key:\"updateUnreadCount\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!1,o=this.getLocalConversation(e),r=this._messageListHandler.getLocalMessageList(e);if(o){var a=o.unreadCount,s=r.filter((function(e){return!e.isRead&&!e._onlineOnlyFlag&&!e.isDeleted})).length;return a!==s&&(o.unreadCount=s,n=!0,Qi.log(\"\".concat(this._className,\".updateUnreadCount from \").concat(a,\" to \").concat(s,\", conversationID:\").concat(e)),!0===t&&this.emitConversationUpdate(!0,!1)),n}}},{key:\"updateReadReceiptInfo\",value:function(e,t){var n=this;if(!Xu(t)){var o=[],r=\"\".concat(Yn.CONV_GROUP).concat(e);t.forEach((function(t){var a=t.tinyID,s=t.clientTime,i=t.random,u=t.readCount,c=t.unreadCount,l=\"\".concat(a,\"-\").concat(s,\"-\").concat(i),d=n._messageListHandler.getLocalMessage(r,l),p={groupID:e,messageID:l,readCount:0,unreadCount:0};d&&(cu(u)&&(d.readReceiptInfo.readCount=u,p.readCount=u),cu(c)&&(d.readReceiptInfo.unreadCount=c,p.unreadCount=c),o.push(p))})),o.length>0&&this.emitOuterEvent(Wn.MESSAGE_READ_RECEIPT_RECEIVED,o)}}},{key:\"recomputeGroupUnreadCount\",value:function(e){var t=e.conversationID,n=e.count,o=this.getLocalConversation(t);if(o){var r=o.unreadCount,a=r-n;a<0&&(a=0),o.unreadCount=a,Qi.log(\"\".concat(this._className,\".recomputeGroupUnreadCount from \").concat(r,\" to \").concat(a,\", conversationID:\").concat(t))}}},{key:\"updateIsRead\",value:function(e){var t=this.getLocalConversation(e),n=this.getLocalMessageList(e);if(t&&0!==n.length&&!qu(t.type)){for(var o=[],r=0,a=n.length;r<a;r++)\"in\"!==n[r].flow?\"out\"!==n[r].flow||n[r].isRead||n[r].setIsRead(!0):o.push(n[r]);var s=0;if(t.type===Yn.CONV_C2C){var i=o.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;s=o.length-t.unreadCount-i}else s=o.length-t.unreadCount;for(var u=0;u<s&&!o[u].isRead;u++)o[u].setIsRead(!0)}}},{key:\"deleteGroupAtTips\",value:function(e){var t=\"\".concat(this._className,\".deleteGroupAtTips\");Qi.log(\"\".concat(t));var n=this._conversationMap.get(e);if(!n)return Promise.resolve();var o=n.groupAtInfoList;if(0===o.length)return Promise.resolve();var r=this.getMyUserID();return this.request({protocolName:pd,requestData:{messageListToDelete:o.map((function(e){return{from:e.from,to:r,messageSeq:e.__sequence,messageRandom:e.__random,groupID:e.groupID}}))}}).then((function(){return Qi.log(\"\".concat(t,\" ok. count:\").concat(o.length)),n.clearGroupAtInfoList(),Promise.resolve()})).catch((function(e){return Qi.error(\"\".concat(t,\" failed. error:\"),e),um(e)}))}},{key:\"appendToMessageList\",value:function(e){this._messageListHandler.pushIn(e)}},{key:\"setMessageRandom\",value:function(e){this.singlyLinkedList.set(e.random)}},{key:\"deleteMessageRandom\",value:function(e){this.singlyLinkedList.delete(e.random)}},{key:\"pushIntoMessageList\",value:function(e,t,n){return!(!this._messageListHandler.pushIn(t,n)||this._isMessageFromCurrentInstance(t)&&!n)&&(e.push(t),!0)}},{key:\"_isMessageFromCurrentInstance\",value:function(e){return this.singlyLinkedList.has(e.random)}},{key:\"revoke\",value:function(e,t,n){return this._messageListHandler.revoke(e,t,n)}},{key:\"getPeerReadTime\",value:function(e){return this._peerReadTimeMap.get(e)}},{key:\"recordPeerReadTime\",value:function(e,t){this._peerReadTimeMap.has(e)?this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t):this._peerReadTimeMap.set(e,t)}},{key:\"updateMessageIsPeerReadProperty\",value:function(e,t){if(e.startsWith(Yn.CONV_C2C)&&t>0){var n=this._messageListHandler.updateMessageIsPeerReadProperty(e,t);n.length>0&&this.emitOuterEvent(Wn.MESSAGE_READ_BY_PEER,n)}}},{key:\"updateMessageIsModifiedProperty\",value:function(e){this._messageListHandler.updateMessageIsModifiedProperty(e)}},{key:\"setCompleted\",value:function(e){Qi.log(\"\".concat(this._className,\".setCompleted. conversationID:\").concat(e)),this._completedMap.set(e,!0)}},{key:\"updateRoamingMessageKeyAndTime\",value:function(e,t,n){this._roamingMessageKeyAndTimeMap.set(e,{messageKey:t,lastMessageTime:n})}},{key:\"getConversationList\",value:function(e){var t=this,n=\"\".concat(this._className,\".getConversationList\"),o=\"pagingStatus:\".concat(this._pagingStatus,\", local conversation count:\").concat(this._conversationMap.size,\", options:\").concat(e);if(Qi.log(\"\".concat(n,\". \").concat(o)),this._pagingStatus===xc.REJECTED){var r=new Dp(sg);return r.setMessage(o),this._syncConversationList().then((function(){r.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return Q_({conversationList:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}if(0===this._conversationMap.size){var a=new Dp(sg);return a.setMessage(o),this._syncConversationList().then((function(){a.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return Q_({conversationList:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}var s=this._getConversationList(e);return Qi.log(\"\".concat(n,\". returned conversation count:\").concat(s.length)),im({conversationList:s})}},{key:\"_getConversationList\",value:function(e){var t=this;if(hu(e))return this.getLocalConversationList();if(gu(e)){var n=[];return e.forEach((function(e){if(t._conversationMap.has(e)){var o=t.getLocalConversation(e);n.push(o)}})),n}}},{key:\"_handleC2CPeerReadTime\",value:function(){var e,t=Bn(this._conversationMap);try{for(t.s();!(e=t.n()).done;){var n=Pn(e.value,2),o=n[0],r=n[1];r.type===Yn.CONV_C2C&&(Qi.debug(\"\".concat(this._className,\"._handleC2CPeerReadTime conversationID:\").concat(o,\" peerReadTime:\").concat(r.peerReadTime)),this.recordPeerReadTime(o,r.peerReadTime))}}catch(a){t.e(a)}finally{t.f()}}},{key:\"getConversationProfile\",value:function(e){var t,n=this;if((t=this._conversationMap.has(e)?this._conversationMap.get(e):new Pm({conversationID:e,type:e.slice(0,3)===Yn.CONV_C2C?Yn.CONV_C2C:Yn.CONV_GROUP}))._isInfoCompleted||t.type===Yn.CONV_SYSTEM)return im({conversation:t});var o=new Dp(ig),r=\"\".concat(this._className,\".getConversationProfile\");return Qi.log(\"\".concat(r,\". conversationID:\").concat(e,\" remark:\").concat(t.remark,\" lastMessage:\"),t.lastMessage),this._updateUserOrGroupProfileCompletely(t).then((function(a){o.setNetworkType(n.getNetworkType()).setMessage(\"conversationID:\".concat(e,\" unreadCount:\").concat(a.data.conversation.unreadCount)).end();var s=n.getModule(ul);if(s&&t.type===Yn.CONV_C2C){var i=e.replace(Yn.CONV_C2C,\"\");if(s.isMyFriend(i)){var u=s.getFriendRemark(i);t.remark!==u&&(t.remark=u,Qi.log(\"\".concat(r,\". conversationID:\").concat(e,\" patch remark:\").concat(t.remark)))}}return Qi.log(\"\".concat(r,\" ok. conversationID:\").concat(e)),a})).catch((function(t){return n.probeNetwork().then((function(n){var r=Pn(n,2),a=r[0],s=r[1];o.setError(t,a,s).setMessage(\"conversationID:\".concat(e)).end()})),Qi.error(\"\".concat(r,\" failed. error:\"),t),um(t)}))}},{key:\"_updateUserOrGroupProfileCompletely\",value:function(e){var t=this;return e.type===Yn.CONV_C2C?this.getModule(al).getUserProfile({userIDList:[e.toAccount]}).then((function(n){var o=n.data;return 0===o.length?um(new rm({code:lp.USER_OR_GROUP_NOT_FOUND,message:dp.USER_OR_GROUP_NOT_FOUND})):(e.userProfile=o[0],e._isInfoCompleted=!0,t._unshiftConversation(e),im({conversation:e}))})):this.getModule(il).getGroupProfile({groupID:e.toAccount}).then((function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=!0,t._unshiftConversation(e),im({conversation:e})}))}},{key:\"_unshiftConversation\",value:function(e){e instanceof Pm&&!this._conversationMap.has(e.conversationID)&&(this._conversationMap=new Map([[e.conversationID,e]].concat(Un(this._conversationMap))),this._setStorageConversationList(),this.emitConversationUpdate(!0,!1))}},{key:\"_onProfileUpdated\",value:function(e){var t=this;e.data.forEach((function(e){var n=e.userID;if(n===t.getMyUserID())t._onMyProfileModified({latestNick:e.nick,latestAvatar:e.avatar});else{var o=t._conversationMap.get(\"\".concat(Yn.CONV_C2C).concat(n));o&&(o.userProfile=e)}}))}},{key:\"deleteConversation\",value:function(e){var t=this,n={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0};if(!this._conversationMap.has(e)){var o=new rm({code:lp.CONVERSATION_NOT_FOUND,message:dp.CONVERSATION_NOT_FOUND});return um(o)}switch(this._conversationMap.get(e).type){case Yn.CONV_C2C:n.type=1,n.toAccount=e.replace(Yn.CONV_C2C,\"\");break;case Yn.CONV_GROUP:n.type=2,n.toGroupID=e.replace(Yn.CONV_GROUP,\"\");break;case Yn.CONV_SYSTEM:return this.getModule(il).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),this.deleteLocalConversation(e),im({conversationID:e});default:var r=new rm({code:lp.CONVERSATION_UN_RECORDED_TYPE,message:dp.CONVERSATION_UN_RECORDED_TYPE});return um(r)}var a=new Dp(ug);a.setMessage(\"conversationID:\".concat(e));var s=\"\".concat(this._className,\".deleteConversation\");return Qi.log(\"\".concat(s,\". conversationID:\").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.request({protocolName:ld,requestData:n})})).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(s,\" ok\")),t.deleteLocalConversation(e),im({conversationID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.error(\"\".concat(s,\" failed. error:\"),e),um(e)}))}},{key:\"pinConversation\",value:function(e){var t=this,n=e.conversationID,o=e.isPinned;if(!this._conversationMap.has(n))return um({code:lp.CONVERSATION_NOT_FOUND,message:dp.CONVERSATION_NOT_FOUND});var r=this.getLocalConversation(n);if(r.isPinned===o)return im({conversationID:n});var a=new Dp(cg);a.setMessage(\"conversationID:\".concat(n,\" isPinned:\").concat(o));var s=\"\".concat(this._className,\".pinConversation\");Qi.log(\"\".concat(s,\". conversationID:\").concat(n,\" isPinned:\").concat(o));var i=null;return Uu(n)?i={type:1,toAccount:n.replace(Yn.CONV_C2C,\"\")}:Fu(n)&&(i={type:2,groupID:n.replace(Yn.CONV_GROUP,\"\")}),this.request({protocolName:dd,requestData:{fromAccount:this.getMyUserID(),operationType:!0===o?1:2,itemList:[i]}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(s,\" ok\")),r.isPinned!==o&&(r.isPinned=o,t._sortConversationListAndEmitEvent()),Q_({conversationID:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.error(\"\".concat(s,\" failed. error:\"),e),um(e)}))}},{key:\"setMessageRemindType\",value:function(e){return this._messageRemindHandler.set(e)}},{key:\"patchMessageRemindType\",value:function(e){var t=e.ID,n=e.isC2CConversation,o=e.messageRemindType,r=!1,a=this.getLocalConversation(n?\"\".concat(Yn.CONV_C2C).concat(t):\"\".concat(Yn.CONV_GROUP).concat(t));return a&&a.messageRemindType!==o&&(a.messageRemindType=o,r=!0),r}},{key:\"onC2CMessageRemindTypeSynced\",value:function(e){var t=this;Qi.debug(\"\".concat(this._className,\".onC2CMessageRemindTypeSynced options:\"),e),e.dataList.forEach((function(e){if(!Xu(e.muteNotificationsSync)){var n,o=e.muteNotificationsSync,r=o.to,a=o.updateSequence,s=o.muteFlag;t._messageRemindHandler.setUpdateSequence(a),0===s?n=Yn.MSG_REMIND_ACPT_AND_NOTE:1===s?n=Yn.MSG_REMIND_DISCARD:2===s&&(n=Yn.MSG_REMIND_ACPT_NOT_NOTE);var i=0;t.patchMessageRemindType({ID:r,isC2CConversation:!0,messageRemindType:n})&&(i+=1),Qi.log(\"\".concat(t._className,\".onC2CMessageRemindTypeSynced updateCount:\").concat(i)),i>=1&&t.emitConversationUpdate(!0,!1)}}))}},{key:\"deleteLocalConversation\",value:function(e){var t=this._conversationMap.has(e);Qi.log(\"\".concat(this._className,\".deleteLocalConversation conversationID:\").concat(e,\" has:\").concat(t)),t&&(this._conversationMap.delete(e),this._roamingMessageKeyAndTimeMap.delete(e),this._setStorageConversationList(),this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),this.emitConversationUpdate(!0,!1))}},{key:\"isMessageSentByCurrentInstance\",value:function(e){return!(!this._messageListHandler.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}},{key:\"modifyMessageList\",value:function(e){if(e.startsWith(Yn.CONV_C2C)&&this._conversationMap.has(e)){var t=this._conversationMap.get(e),n=Date.now();this._messageListHandler.modifyMessageSentByPeer({conversationID:e,latestNick:t.userProfile.nick,latestAvatar:t.userProfile.avatar});var o=this.getModule(al).getNickAndAvatarByUserID(this.getMyUserID());this._messageListHandler.modifyMessageSentByMe({conversationID:e,latestNick:o.nick,latestAvatar:o.avatar}),Qi.log(\"\".concat(this._className,\".modifyMessageList conversationID:\").concat(e,\" cost \").concat(Date.now()-n,\" ms\"))}}},{key:\"updateUserProfileSpecifiedKey\",value:function(e){Qi.log(\"\".concat(this._className,\".updateUserProfileSpecifiedKey options:\"),e);var t=e.conversationID,n=e.nick,o=e.avatar;if(this._conversationMap.has(t)){var r=this._conversationMap.get(t).userProfile;lu(n)&&r.nick!==n&&(r.nick=n),lu(o)&&r.avatar!==o&&(r.avatar=o),this.emitConversationUpdate(!0,!1)}}},{key:\"_onMyProfileModified\",value:function(e){var t=this,n=this.getLocalConversationList(),o=Date.now();n.forEach((function(n){t.modifyMessageSentByMe(Sn({conversationID:n.conversationID},e))})),Qi.log(\"\".concat(this._className,\"._onMyProfileModified. modify all messages sent by me, cost \").concat(Date.now()-o,\" ms\"))}},{key:\"modifyMessageSentByMe\",value:function(e){this._messageListHandler.modifyMessageSentByMe(e)}},{key:\"getLatestMessageSentByMe\",value:function(e){return this._messageListHandler.getLatestMessageSentByMe(e)}},{key:\"modifyMessageSentByPeer\",value:function(e){this._messageListHandler.modifyMessageSentByPeer(e)}},{key:\"getLatestMessageSentByPeer\",value:function(e){return this._messageListHandler.getLatestMessageSentByPeer(e)}},{key:\"pushIntoNoticeResult\",value:function(e,t){return!(!this._messageListHandler.pushIn(t)||this.singlyLinkedList.has(t.random))&&(e.push(t),!0)}},{key:\"getGroupLocalLastMessageSequence\",value:function(e){return this._messageListHandler.getGroupLocalLastMessageSequence(e)}},{key:\"checkAndPatchRemark\",value:function(){var e=Promise.resolve();if(0===this._conversationMap.size)return e;var t=this.getModule(ul);if(!t)return e;var n=Un(this._conversationMap.values()).filter((function(e){return e.type===Yn.CONV_C2C}));if(0===n.length)return e;var o=0;return n.forEach((function(e){var n=e.conversationID.replace(Yn.CONV_C2C,\"\");if(t.isMyFriend(n)){var r=t.getFriendRemark(n);e.remark!==r&&(e.remark=r,o+=1)}})),Qi.log(\"\".concat(this._className,\".checkAndPatchRemark. c2c conversation count:\").concat(n.length,\", patched count:\").concat(o)),e}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._pagingStatus=xc.NOT_START,this._messageListHandler.reset(),this._messageRemindHandler.reset(),this._roamingMessageKeyAndTimeMap.clear(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._conversationMap.clear(),this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this._remoteGroupReadSequenceMap.clear(),this.resetReady()}}]),n}(Nl),qm=function(){function e(t){yn(this,e),this._groupModule=t,this._className=\"GroupTipsHandler\",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4}return En(e,[{key:\"onCheckTimer\",value:function(e){e%1==0&&this._cachedGroupTipsMap.size>0&&this._checkCachedGroupTips()}},{key:\"_checkCachedGroupTips\",value:function(){var e=this;this._cachedGroupTipsMap.forEach((function(t,n){var o=e._checkCountMap.get(n),r=e._groupModule.hasLocalGroup(n);Qi.log(\"\".concat(e._className,\"._checkCachedGroupTips groupID:\").concat(n,\" hasLocalGroup:\").concat(r,\" checkCount:\").concat(o)),r?(e._notifyCachedGroupTips(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupTips(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:\"onNewGroupTips\",value:function(e){Qi.debug(\"\".concat(this._className,\".onReceiveGroupTips count:\").concat(e.dataList.length));var t=this.newGroupTipsStoredAndSummary(e),n=t.eventDataList,o=t.result,r=t.AVChatRoomMessageList;(r.length>0&&this._groupModule.onAVChatRoomMessage(r),n.length>0)&&(this._groupModule.getModule(ll).onNewMessage({conversationOptionsList:n,isInstantMessage:!0}),this._groupModule.updateNextMessageSeq(n));o.length>0&&(this._groupModule.emitOuterEvent(Wn.MESSAGE_RECEIVED,o),this.handleMessageList(o))}},{key:\"newGroupTipsStoredAndSummary\",value:function(e){for(var t=e.event,n=e.dataList,o=null,r=[],a=[],s={},i=[],u=0,c=n.length;u<c;u++){var l=n[u],d=l.groupProfile.groupID,p=this._groupModule.hasLocalGroup(d);if(p||!this._groupModule.isUnjoinedAVChatRoom(d))if(p)if(this._groupModule.isMessageFromOrToAVChatroom(d)){var g=Ou(l);g.event=t,i.push(g)}else{l.currentUser=this._groupModule.getMyUserID(),l.conversationType=Yn.CONV_GROUP,(o=new X_(l)).setElement({type:Yn.MSG_GRP_TIP,content:Sn({},l.elements,{groupProfile:l.groupProfile})}),o.isSystemMessage=!1;var h=this._groupModule.getModule(ll),f=o,_=f.conversationID,m=f.sequence;if(6===t)o._onlineOnlyFlag=!0,a.push(o);else if(!h.pushIntoNoticeResult(a,o))continue;if(6!==t||!h.getLocalConversation(_)){if(6!==t)this._groupModule.getModule(Sl).addMessageSequence({key:Mp,message:o});var v=h.isRemoteRead({conversationID:_,sequence:m});if(hu(s[_]))s[_]=r.push({conversationID:_,unreadCount:\"in\"!==o.flow||o._onlineOnlyFlag||v?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})-1;else{var M=s[_];r[M].type=o.conversationType,r[M].subType=o.conversationSubType,r[M].lastMessage=o,\"in\"!==o.flow||o._onlineOnlyFlag||v||r[M].unreadCount++}}}else this._cacheGroupTipsAndProbe({groupID:d,event:t,item:l})}return{eventDataList:r,result:a,AVChatRoomMessageList:i}}},{key:\"handleMessageList\",value:function(e){var t=this;e.forEach((function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;default:Qi.warn(\"\".concat(t._className,\".handleMessageList unknown operationType:\").concat(e.payload.operationType))}}))}},{key:\"_onNewMemberComeIn\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&cu(n)&&r.memberCount!==n&&(r.memberCount=n,this._updateConversationGroupProfile(r))}},{key:\"_onMemberQuit\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&cu(n)&&r.memberCount!==n&&(r.memberCount=n,this._updateConversationGroupProfile(r)),this._groupModule.getModule(cl).deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:\"_onMemberKickedOut\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&cu(n)&&r.memberCount!==n&&(r.memberCount=n,this._updateConversationGroupProfile(r)),this._groupModule.getModule(cl).deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:\"_updateConversationGroupProfile\",value:function(e){this._groupModule.getModule(ll).updateConversationGroupProfile([e])}},{key:\"_onMemberSetAdmin\",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(cl);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(Yn.GRP_MBR_ROLE_ADMIN)}))}},{key:\"_onMemberCancelledAdmin\",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(cl);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(Yn.GRP_MBR_ROLE_MEMBER)}))}},{key:\"_onGroupProfileModified\",value:function(e){var t=this,n=e.payload,o=n.newGroupProfile,r=n.groupProfile.groupID,a=this._groupModule.getLocalGroupProfile(r);Object.keys(o).forEach((function(e){switch(e){case\"ownerID\":t._ownerChanged(a,o);break;default:a[e]=o[e]}})),this._groupModule.emitGroupListUpdate(!0,!0)}},{key:\"_ownerChanged\",value:function(e,t){var n=e.groupID,o=this._groupModule.getLocalGroupProfile(n),r=this._groupModule.getMyUserID();if(r===t.ownerID){o.updateGroup({selfInfo:{role:Yn.GRP_MBR_ROLE_OWNER}});var a=this._groupModule.getModule(cl),s=a.getLocalGroupMemberInfo(n,r),i=this._groupModule.getLocalGroupProfile(n).ownerID,u=a.getLocalGroupMemberInfo(n,i);s&&s.updateRole(Yn.GRP_MBR_ROLE_OWNER),u&&u.updateRole(Yn.GRP_MBR_ROLE_MEMBER)}}},{key:\"_onMemberInfoModified\",value:function(e){var t=e.payload.groupProfile.groupID,n=this._groupModule.getModule(cl);e.payload.memberList.forEach((function(e){var o=n.getLocalGroupMemberInfo(t,e.userID);o&&cu(e.muteTime)&&o.updateMuteUntil(e.muteTime)}))}},{key:\"_cacheGroupTips\",value:function(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}},{key:\"_deleteCachedGroupTips\",value:function(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}},{key:\"_notifyCachedGroupTips\",value:function(e){var t=this,n=this._cachedGroupTipsMap.get(e)||[];n.forEach((function(e){t.onNewGroupTips(e)})),this._deleteCachedGroupTips(e),Qi.log(\"\".concat(this._className,\"._notifyCachedGroupTips groupID:\").concat(e,\" count:\").concat(n.length))}},{key:\"_cacheGroupTipsAndProbe\",value:function(e){var t=this,n=e.groupID,o=e.event,r=e.item;this._cacheGroupTips(n,{event:o,dataList:[r]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===Yn.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupTips(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupTips(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Qi.log(\"\".concat(this._className,\"._cacheGroupTipsAndProbe groupID:\").concat(n))}},{key:\"reset\",value:function(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear()}}]),e}(),xm=[].push,Vm=Math.min,Km=!r((function(){return!RegExp(4294967295,\"y\")}));vs(\"split\",2,(function(e,t,n){var o;return o=\"c\"==\"abbc\".split(/(b)*/)[1]||4!=\"test\".split(/(?:)/,-1).length||2!=\"ab\".split(/(?:ab)*/).length||4!=\".\".split(/(.?)(.?)/).length||\".\".split(/()()/).length>1||\"\".split(/.?/).length?function(e,n){var o=String(h(this)),r=void 0===n?4294967295:n>>>0;if(0===r)return[];if(void 0===e)return[o];if(!us(e))return t.call(o,e,r);for(var a,s,i,u=[],c=(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.unicode?\"u\":\"\")+(e.sticky?\"y\":\"\"),l=0,d=new RegExp(e.source,c+\"g\");(a=ts.call(d,o))&&!((s=d.lastIndex)>l&&(u.push(o.slice(l,a.index)),a.length>1&&a.index<o.length&&xm.apply(u,a.slice(1)),i=a[0].length,l=s,u.length>=r));)d.lastIndex===a.index&&d.lastIndex++;return l===o.length?!i&&d.test(\"\")||u.push(\"\"):u.push(o.slice(l)),u.length>r?u.slice(0,r):u}:\"0\".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=h(this),a=null==t?void 0:t[e];return void 0!==a?a.call(t,r,n):o.call(String(r),t,n)},function(e,r){var a=n(o,e,this,r,o!==t);if(a.done)return a.value;var s=D(e),i=String(this),u=Or(s,RegExp),c=s.unicode,l=(s.ignoreCase?\"i\":\"\")+(s.multiline?\"m\":\"\")+(s.unicode?\"u\":\"\")+(Km?\"y\":\"g\"),d=new u(Km?s:\"^(?:\"+s.source+\")\",l),p=void 0===r?4294967295:r>>>0;if(0===p)return[];if(0===i.length)return null===Is(d,i)?[i]:[];for(var g=0,h=0,f=[];h<i.length;){d.lastIndex=Km?h:0;var _,m=Is(d,Km?i:i.slice(h));if(null===m||(_=Vm(ie(d.lastIndex+(Km?0:h)),i.length))===g)h=ys(i,h,c);else{if(f.push(i.slice(g,h)),f.length===p)return f;for(var v=1;v<=m.length-1;v++)if(f.push(m[v]),f.length===p)return f;h=g=_}}return f.push(i.slice(g)),f}]}),!Km);var Bm=function(){function e(t){yn(this,e),this._groupModule=t,this._className=\"CommonGroupHandler\",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,t.getInnerEmitterInstance().once(Mm,this._initGroupList,this)}return En(e,[{key:\"onCheckTimer\",value:function(e){e%1==0&&this._cachedGroupMessageMap.size>0&&this._checkCachedGroupMessage()}},{key:\"_checkCachedGroupMessage\",value:function(){var e=this;this._cachedGroupMessageMap.forEach((function(t,n){var o=e._checkCountMap.get(n),r=e._groupModule.hasLocalGroup(n);Qi.log(\"\".concat(e._className,\"._checkCachedGroupMessage groupID:\").concat(n,\" hasLocalGroup:\").concat(r,\" checkCount:\").concat(o)),r?(e._notifyCachedGroupMessage(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupMessage(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:\"_initGroupList\",value:function(){var e=this;Qi.log(\"\".concat(this._className,\"._initGroupList\"));var t=new Dp(Sg),n=this._groupModule.getStorageGroupList();if(gu(n)&&n.length>0){n.forEach((function(t){e._groupModule.initGroupMap(t)})),this._groupModule.emitGroupListUpdate(!0,!1);var o=this._groupModule.getLocalGroupList().length;t.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"group count:\".concat(o)).end()}else t.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"group count:0\").end();Qi.log(\"\".concat(this._className,\"._initGroupList ok\"))}},{key:\"handleUpdateGroupLastMessage\",value:function(e){var t=\"\".concat(this._className,\".handleUpdateGroupLastMessage\");if(Qi.debug(\"\".concat(t,\" conversation count:\").concat(e.length,\", local group count:\").concat(this._groupModule.getLocalGroupList().length)),0!==this._groupModule.getGroupMap().size){for(var n,o,r,a=!1,s=0,i=e.length;s<i;s++)(n=e[s]).type===Yn.CONV_GROUP&&(o=n.conversationID.split(/^GROUP/)[1],(r=this._groupModule.getLocalGroupProfile(o))&&(r.lastMessage=n.lastMessage,a=!0));a&&(this._groupModule.sortLocalGroupList(),this._groupModule.emitGroupListUpdate(!0,!1))}else this.tempConversationList=e}},{key:\"onNewGroupMessage\",value:function(e){Qi.debug(\"\".concat(this._className,\".onNewGroupMessage count:\").concat(e.dataList.length));var t=this._newGroupMessageStoredAndSummary(e),n=t.conversationOptionsList,o=t.messageList,r=t.AVChatRoomMessageList;(r.length>0&&this._groupModule.onAVChatRoomMessage(r),this._groupModule.filterModifiedMessage(o),n.length>0)&&(this._groupModule.getModule(ll).onNewMessage({conversationOptionsList:n,isInstantMessage:!0}),this._groupModule.updateNextMessageSeq(n));var a=this._groupModule.filterUnmodifiedMessage(o);a.length>0&&this._groupModule.emitOuterEvent(Wn.MESSAGE_RECEIVED,a),o.length=0}},{key:\"_newGroupMessageStoredAndSummary\",value:function(e){var t=e.dataList,n=e.event,o=e.isInstantMessage,r=null,a=[],s=[],i=[],u={},c=Yn.CONV_GROUP,l=this._groupModule.getModule(fl),d=this._groupModule.getModule(Sl),p=t.length;p>1&&t.sort((function(e,t){return e.sequence-t.sequence}));for(var g=0;g<p;g++){var h=t[g],f=h.groupProfile.groupID,_=this._groupModule.hasLocalGroup(f);if(_||!this._groupModule.isUnjoinedAVChatRoom(f))if(_)if(this._groupModule.isMessageFromOrToAVChatroom(f)){var m=Ou(h);m.event=n,i.push(m)}else{h.currentUser=this._groupModule.getMyUserID(),h.conversationType=c,h.isSystemMessage=!!h.isSystemMessage,r=new X_(h),h.elements=l.parseElements(h.elements,h.from),r.setElement(h.elements);var v=1===t[g].isModified,M=this._groupModule.getModule(ll);if(M.isMessageSentByCurrentInstance(r)?r.isModified=v:v=!1,1===h.onlineOnlyFlag)r._onlineOnlyFlag=!0,s.push(r);else{if(!M.pushIntoMessageList(s,r,v))continue;d.addMessageSequence({key:Mp,message:r}),o&&r.clientTime>0&&d.addMessageDelay(r.clientTime);var y=r,I=y.conversationID,E=y.sequence,T=M.isRemoteRead({conversationID:I,sequence:E});if(hu(u[I])){var A=0;\"in\"===r.flow&&(r._isExcludedFromUnreadCount||T||(A=1)),u[I]=a.push({conversationID:I,unreadCount:A,type:r.conversationType,subType:r.conversationSubType,lastMessage:r._isExcludedFromLastMessage?\"\":r})-1}else{var S=u[I];a[S].type=r.conversationType,a[S].subType=r.conversationSubType,a[S].lastMessage=r._isExcludedFromLastMessage?\"\":r,\"in\"===r.flow&&(r._isExcludedFromUnreadCount||T||a[S].unreadCount++)}}}else this._cacheGroupMessageAndProbe({groupID:f,event:n,item:h})}return{conversationOptionsList:a,messageList:s,AVChatRoomMessageList:i}}},{key:\"onGroupMessageRevoked\",value:function(e){Qi.debug(\"\".concat(this._className,\".onGroupMessageRevoked nums:\").concat(e.dataList.length));var t=this._groupModule.getModule(ll),n=[],o=null;e.dataList.forEach((function(e){var r=e.elements.revokedInfos;hu(r)||r.forEach((function(e){(o=t.revoke(\"GROUP\".concat(e.groupID),e.sequence,e.random))&&n.push(o)}))})),0!==n.length&&(t.onMessageRevoked(n),this._groupModule.emitOuterEvent(Wn.MESSAGE_REVOKED,n))}},{key:\"_groupListTreeShaking\",value:function(e){for(var t=new Map(Un(this._groupModule.getGroupMap())),n=0,o=e.length;n<o;n++)t.delete(e[n].groupID);this._groupModule.hasJoinedAVChatRoom()&&this._groupModule.getJoinedAVChatRoom().forEach((function(e){t.delete(e)}));for(var r=Un(t.keys()),a=0,s=r.length;a<s;a++)this._groupModule.deleteGroup(r[a])}},{key:\"getGroupList\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupList\"),o=new Dp(Tg);Qi.log(\"\".concat(n));var r={introduction:\"Introduction\",notification:\"Notification\",createTime:\"CreateTime\",ownerID:\"Owner_Account\",lastInfoTime:\"LastInfoTime\",memberNum:\"MemberNum\",maxMemberNum:\"MaxMemberNum\",joinOption:\"ApplyJoinOption\",muteAllMembers:\"ShutUpAllMember\"},a=[\"Type\",\"Name\",\"FaceUrl\",\"NextMsgSeq\",\"LastMsgTime\"],s=[];return e&&e.groupProfileFilter&&e.groupProfileFilter.forEach((function(e){r[e]&&a.push(r[e])})),this._pagingGetGroupList({limit:50,offset:0,groupBaseInfoFilter:a,groupList:s}).then((function(){Qi.log(\"\".concat(n,\" ok. count:\").concat(s.length)),t._groupListTreeShaking(s),t._groupModule.updateGroupMap(s);var e=t._groupModule.getLocalGroupList().length;return o.setNetworkType(t._groupModule.getNetworkType()).setMessage(\"remote count:\".concat(s.length,\", after tree shaking, local count:\").concat(e)).end(),t.tempConversationList&&(Qi.log(\"\".concat(n,\" update last message with tempConversationList, count:\").concat(t.tempConversationList.length)),t.handleUpdateGroupLastMessage({data:t.tempConversationList}),t.tempConversationList=null),t._groupModule.emitGroupListUpdate(),t._groupModule.patchGroupMessageRemindType(),t._groupModule.recomputeUnreadCount(),Q_({groupList:t._groupModule.getLocalGroupList()})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"_pagingGetGroupList\",value:function(e){var t=this,n=\"\".concat(this._className,\"._pagingGetGroupList\"),o=e.isCommunityRelay,r=void 0!==o&&o,a=e.limit,s=e.offset,i=e.groupBaseInfoFilter,u=e.groupList,c=new Dp(Cg);return this._groupModule.request({protocolName:gd,requestData:{type:r?Yn.GRP_COMMUNITY:void 0,memberAccount:this._groupModule.getMyUserID(),limit:a,offset:s,responseFilter:{groupBaseInfoFilter:i,selfInfoFilter:[\"Role\",\"JoinTime\",\"MsgFlag\",\"MsgSeq\"]}}}).then((function(e){var o=e.data,l=o.groups,d=void 0===l?[]:l,p=o.totalCount;u.push.apply(u,Un(d));var g=s+a,h=!(p>g),f=\"offset:\".concat(s,\" totalCount:\").concat(p,\" isCompleted:\").concat(h,\" \")+\"currentCount:\".concat(u.length,\" isCommunityRelay:\").concat(r);return c.setNetworkType(t._groupModule.getNetworkType()).setMessage(\"\".concat(f)).end(),r||h?!r&&h?(Qi.log(\"\".concat(n,\" start to get community list\")),s=0,t._pagingGetGroupList({limit:a,offset:s,groupBaseInfoFilter:i,groupList:u,isCommunityRelay:!0})):r&&!h?(s=g,t._pagingGetGroupList({limit:a,offset:s,groupBaseInfoFilter:i,groupList:u,isCommunityRelay:!0})):(Qi.log(\"\".concat(n,\" ok. totalCount:\").concat(u.length)),Q_({groupList:u})):(s=g,t._pagingGetGroupList({limit:a,offset:s,groupBaseInfoFilter:i,groupList:u}))})).catch((function(e){return 11e3!==e.code&&t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],a=n[1];c.setMessage(\"isCommunityRelay:\".concat(r)).setError(e,o,a).end()})),r?(11e3===e.code&&(c=null,Qi.log(\"\".concat(n,\" ok. community unavailable\"))),im({groupList:u})):um(e)}))}},{key:\"_cacheGroupMessage\",value:function(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}},{key:\"_deleteCachedGroupMessage\",value:function(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}},{key:\"_notifyCachedGroupMessage\",value:function(e){var t=this,n=this._cachedGroupMessageMap.get(e)||[];n.forEach((function(e){t.onNewGroupMessage(e)})),this._deleteCachedGroupMessage(e),Qi.log(\"\".concat(this._className,\"._notifyCachedGroupMessage groupID:\").concat(e,\" count:\").concat(n.length))}},{key:\"_cacheGroupMessageAndProbe\",value:function(e){var t=this,n=e.groupID,o=e.event,r=e.item;this._cacheGroupMessage(n,{event:o,dataList:[r]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===Yn.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupMessage(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupMessage(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Qi.log(\"\".concat(this._className,\"._cacheGroupMessageAndProbe groupID:\").concat(n))}},{key:\"reset\",value:function(){this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._groupModule.getInnerEmitterInstance().once(Mm,this._initGroupList,this)}}]),e}(),Hm={1:\"init\",2:\"modify\",3:\"clear\",4:\"delete\"},jm=function(){function e(t){yn(this,e),this._groupModule=t,this._className=\"GroupAttributesHandler\",this._groupAttributesMap=new Map,this.CACHE_EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(ym,this._onCloudConfigUpdated,this)}return En(e,[{key:\"_onCloudConfigUpdated\",value:function(){var e=this._groupModule.getCloudConfig(\"grp_attr_cache_time\");hu(e)||(this.CACHE_EXPIRE_TIME=Number(e))}},{key:\"updateLocalMainSequenceOnReconnected\",value:function(){this._groupAttributesMap.forEach((function(e){e.localMainSequence=0}))}},{key:\"onGroupAttributesUpdated\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributeOption,r=o.mainSequence,a=o.hasChangedAttributeInfo,s=o.groupAttributeList,i=void 0===s?[]:s,u=o.operationType;if(Qi.log(\"\".concat(this._className,\".onGroupAttributesUpdated. hasChangedAttributeInfo:\").concat(a,\" operationType:\").concat(u)),!hu(u)){if(1===a){if(4===u){var c=[];i.forEach((function(e){c.push(e.key)})),i=Un(c),c=null}return this._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:r,groupAttributeList:i,operationType:Hm[u]}),void this._emitGroupAttributesUpdated(n)}if(this._groupAttributesMap.has(n)){var l=this._groupAttributesMap.get(n).avChatRoomKey;this._getGroupAttributes({groupID:n,avChatRoomKey:l}).then((function(){t._emitGroupAttributesUpdated(n)}))}}}},{key:\"initGroupAttributesCache\",value:function(e){var t=e.groupID,n=e.avChatRoomKey;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:n}),Qi.log(\"\".concat(this._className,\".initGroupAttributesCache groupID:\").concat(t,\" avChatRoomKey:\").concat(n))}},{key:\"initGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,r=this._checkCachedGroupAttributes({groupID:n,funcName:\"initGroupAttributes\"});if(!0!==r)return um(r);var a=this._groupAttributesMap.get(n),s=a.remoteMainSequence,i=a.avChatRoomKey,u=new Dp(Rg);return u.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(s,\" groupAttributes:\").concat(JSON.stringify(o))),this._groupModule.request({protocolName:Fd,requestData:{groupID:n,avChatRoomKey:i,mainSequence:s,groupAttributeList:this._transformGroupAttributes(o)}}).then((function(e){var r=e.data,a=r.mainSequence,s=Un(r.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:a,groupAttributeList:s,operationType:\"init\"}),u.setNetworkType(t._groupModule.getNetworkType()).end(),Qi.log(\"\".concat(t._className,\".initGroupAttributes ok. groupID:\").concat(n)),Q_({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),um(e)}))}},{key:\"setGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,r=this._checkCachedGroupAttributes({groupID:n,funcName:\"setGroupAttributes\"});if(!0!==r)return um(r);var a=this._groupAttributesMap.get(n),s=a.remoteMainSequence,i=a.avChatRoomKey,u=a.attributes,c=this._transformGroupAttributes(o);c.forEach((function(e){var t=e.key;e.sequence=0,u.has(t)&&(e.sequence=u.get(t).sequence)}));var l=new Dp(Og);return l.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(s,\" groupAttributes:\").concat(JSON.stringify(o))),this._groupModule.request({protocolName:qd,requestData:{groupID:n,avChatRoomKey:i,mainSequence:s,groupAttributeList:c}}).then((function(e){var r=e.data,a=r.mainSequence,s=Un(r.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:a,groupAttributeList:s,operationType:\"modify\"}),l.setNetworkType(t._groupModule.getNetworkType()).end(),Qi.log(\"\".concat(t._className,\".setGroupAttributes ok. groupID:\").concat(n)),Q_({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),um(e)}))}},{key:\"deleteGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.keyList,r=void 0===o?[]:o,a=this._checkCachedGroupAttributes({groupID:n,funcName:\"deleteGroupAttributes\"});if(!0!==a)return um(a);var s=this._groupAttributesMap.get(n),i=s.remoteMainSequence,u=s.avChatRoomKey,c=s.attributes,l=Un(c.keys()),d=Vd,p=\"clear\",g={groupID:n,avChatRoomKey:u,mainSequence:i};if(r.length>0){var h=[];l=[],d=xd,p=\"delete\",r.forEach((function(e){var t=0;c.has(e)&&(t=c.get(e).sequence,l.push(e)),h.push({key:e,sequence:t})})),g.groupAttributeList=h}var f=new Dp(Gg);return f.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(i,\" keyList:\").concat(r,\" protocolName:\").concat(d)),this._groupModule.request({protocolName:d,requestData:g}).then((function(e){var o=e.data.mainSequence;return t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:o,groupAttributeList:r,operationType:p}),f.setNetworkType(t._groupModule.getNetworkType()).end(),Qi.log(\"\".concat(t._className,\".deleteGroupAttributes ok. groupID:\").concat(n)),Q_({keyList:l})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];f.setError(e,o,r).end()})),um(e)}))}},{key:\"getGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=this._checkCachedGroupAttributes({groupID:n,funcName:\"getGroupAttributes\"});if(!0!==o)return um(o);var r=this._groupAttributesMap.get(n),a=r.avChatRoomKey,s=r.lastUpdateTime,i=r.localMainSequence,u=r.remoteMainSequence,c=new Dp(bg);if(c.setMessage(\"groupID:\".concat(n,\" localMainSequence:\").concat(i,\" remoteMainSequence:\").concat(u,\" keyList:\").concat(e.keyList)),Date.now()-s>=this.CACHE_EXPIRE_TIME||i<u)return this._getGroupAttributes({groupID:n,avChatRoomKey:a}).then((function(o){c.setMoreMessage(\"get attributes from remote. count:\".concat(o.length)).setNetworkType(t._groupModule.getNetworkType()).end(),Qi.log(\"\".concat(t._className,\".getGroupAttributes from remote. groupID:\").concat(n));var r=t._getLocalGroupAttributes(e);return Q_({groupAttributes:r})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),um(e)}));c.setMoreMessage(\"get attributes from cache\").setNetworkType(this._groupModule.getNetworkType()).end(),Qi.log(\"\".concat(this._className,\".getGroupAttributes from cache. groupID:\").concat(n));var l=this._getLocalGroupAttributes(e);return im({groupAttributes:l})}},{key:\"_getGroupAttributes\",value:function(e){var t=this;return this._groupModule.request({protocolName:Kd,requestData:Sn({},e)}).then((function(n){var o=n.data,r=o.mainSequence,a=o.groupAttributeList,s=Un(a);return hu(r)||t._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:r,groupAttributeList:s,operationType:\"get\"}),Qi.log(\"\".concat(t._className,\"._getGroupAttributes ok. groupID:\").concat(e.groupID)),a})).catch((function(e){return um(e)}))}},{key:\"_getLocalGroupAttributes\",value:function(e){var t=e.groupID,n=e.keyList,o=void 0===n?[]:n,r={};if(!this._groupAttributesMap.has(t))return r;var a=this._groupAttributesMap.get(t).attributes;if(o.length>0)o.forEach((function(e){a.has(e)&&(r[e]=a.get(e).value)}));else{var s,i=Bn(a.keys());try{for(i.s();!(s=i.n()).done;){var u=s.value;r[u]=a.get(u).value}}catch(c){i.e(c)}finally{i.f()}}return r}},{key:\"_refreshCachedGroupAttributes\",value:function(e){var t=e.groupID,n=e.remoteMainSequence,o=e.groupAttributeList,r=e.operationType;if(this._groupAttributesMap.has(t)){var a=this._groupAttributesMap.get(t),s=a.localMainSequence;if(\"get\"===r||n-s==1)a.remoteMainSequence=n,a.localMainSequence=n,a.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:a,groupAttributeList:o,operationType:r});else{if(s===n)return;a.remoteMainSequence=n}this._groupAttributesMap.set(t,a);var i=\"operationType:\".concat(r,\" localMainSequence:\").concat(s,\" remoteMainSequence:\").concat(n);Qi.log(\"\".concat(this._className,\"._refreshCachedGroupAttributes. \").concat(i))}}},{key:\"_updateCachedAttributes\",value:function(e){var t=e.groupAttributes,n=e.groupAttributeList,o=e.operationType;\"clear\"!==o?\"delete\"!==o?(\"init\"===o&&t.attributes.clear(),n.forEach((function(e){var n=e.key,o=e.value,r=e.sequence;t.attributes.set(n,{value:o,sequence:r})}))):n.forEach((function(e){t.attributes.delete(e)})):t.attributes.clear()}},{key:\"_checkCachedGroupAttributes\",value:function(e){var t=e.groupID,n=e.funcName;if(this._groupModule.hasLocalGroup(t)&&this._groupModule.getLocalGroupProfile(t).type!==Yn.GRP_AVCHATROOM){return Qi.warn(\"\".concat(this._className,\"._checkCachedGroupAttributes. \").concat(\"非直播群不能使用群属性 API\")),new rm({code:lp.CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM,message:\"非直播群不能使用群属性 API\"})}var o=this._groupAttributesMap.get(t);if(hu(o)){var r=\"如果 groupID:\".concat(t,\" 是直播群，使用 \").concat(n,\" 前先使用 joinGroup 接口申请加入群组，详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup\");return Qi.warn(\"\".concat(this._className,\"._checkCachedGroupAttributes. \").concat(r)),new rm({code:lp.CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN,message:r})}return!0}},{key:\"_transformGroupAttributes\",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:\"_emitGroupAttributesUpdated\",value:function(e){var t=this._getLocalGroupAttributes({groupID:e});this._groupModule.emitOuterEvent(Wn.GROUP_ATTRIBUTES_UPDATED,{groupID:e,groupAttributes:t})}},{key:\"reset\",value:function(){this._groupAttributesMap.clear(),this.CACHE_EXPIRE_TIME=3e4}}]),e}(),Wm=function(){function e(t){yn(this,e);var n=t.manager,o=t.groupID,r=t.onInit,a=t.onSuccess,s=t.onFail;this._className=\"Polling\",this._manager=n,this._groupModule=n._groupModule,this._onInit=r,this._onSuccess=a,this._onFail=s,this._groupID=o,this._timeoutID=-1,this._isRunning=!1,this._protocolName=bd}return En(e,[{key:\"start\",value:function(){var e=this._groupModule.isLoggedIn();e||(this._protocolName=wd),Qi.log(\"\".concat(this._className,\".start pollingInterval:\").concat(this._manager.getPollingInterval(),\" isLoggedIn:\").concat(e)),this._isRunning=!0,this._request()}},{key:\"isRunning\",value:function(){return this._isRunning}},{key:\"_request\",value:function(){var e=this,t=this._onInit(this._groupID);this._groupModule.request({protocolName:this._protocolName,requestData:t}).then((function(t){e._onSuccess(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.getPollingInterval()))})).catch((function(t){e._onFail(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.MAX_POLLING_INTERVAL))}))}},{key:\"stop\",value:function(){Qi.log(\"\".concat(this._className,\".stop\")),this._timeoutID>0&&(clearTimeout(this._timeoutID),this._timeoutID=-1),this._isRunning=!1}}]),e}(),Ym={3:!0,4:!0,5:!0,6:!0},$m=function(){function e(t){yn(this,e),this._groupModule=t,this._className=\"AVChatRoomHandler\",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this.sequencesLinkedList=new Rm(100),this.messageIDLinkedList=new Rm(100),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60,this.DEFAULT_POLLING_INTERVAL=300,this.MAX_POLLING_INTERVAL=2e3,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL}return En(e,[{key:\"hasJoinedAVChatRoom\",value:function(){return this._joinedGroupMap.size>0}},{key:\"checkJoinedAVChatRoomByID\",value:function(e){return this._joinedGroupMap.has(e)}},{key:\"getJoinedAVChatRoom\",value:function(){return this._joinedGroupMap.size>0?Un(this._joinedGroupMap.keys()):null}},{key:\"_updateRequestData\",value:function(e){return Sn({},this._pollingRequestInfoMap.get(e))}},{key:\"_handleSuccess\",value:function(e,t){var n=t.data,o=n.key,r=n.nextSeq,a=n.rspMsgList;if(0!==n.errorCode){var s=this._pollingRequestInfoMap.get(e),i=new Dp(Hg),u=s?\"\".concat(s.key,\"-\").concat(s.startSeq):\"requestInfo is undefined\";i.setMessage(\"\".concat(e,\"-\").concat(u,\"-\").concat(t.errorInfo)).setCode(t.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(!0)}else{if(!this.checkJoinedAVChatRoomByID(e))return;lu(o)&&cu(r)&&this._pollingRequestInfoMap.set(e,{key:o,startSeq:r}),gu(a)&&a.length>0&&(a.forEach((function(e){e.to=e.groupID})),this.onMessage(a))}}},{key:\"_handleFailure\",value:function(e,t){}},{key:\"onMessage\",value:function(e){if(gu(e)&&0!==e.length){var t=null,n=[],o=this._getModule(ll),r=this._getModule(Sl),a=e.length;a>1&&e.sort((function(e,t){return e.sequence-t.sequence}));for(var s=this._getModule(dl),i=0;i<a;i++)if(Ym[e[i].event]){this.receivedMessageCount+=1,t=this.packMessage(e[i],e[i].event);var u=1===e[i].isModified,c=1===e[i].isHistoryMessage;if((s.isUnlimitedAVChatRoom()||!this.sequencesLinkedList.has(t.sequence))&&!this.messageIDLinkedList.has(t.ID)){var l=t.conversationID;if(this.receivedMessageCount%40==0&&this._getModule(Il).detectMessageLoss(l,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){var d=this.sequencesLinkedList.tail().value,p=t.sequence-d;p>1&&p<=20?this._getModule(Il).onMessageMaybeLost(l,d+1,p-1):p<-1&&p>=-20&&this._getModule(Il).onMessageMaybeLost(l,t.sequence+1,Math.abs(p)-1)}this.sequencesLinkedList.set(t.sequence),this.messageIDLinkedList.set(t.ID);var g=!1;if(this._isMessageSentByCurrentInstance(t)?u&&(g=!0,t.isModified=u,o.updateMessageIsModifiedProperty(t)):g=!0,g){if(t.conversationType,Yn.CONV_SYSTEM,!c&&t.conversationType!==Yn.CONV_SYSTEM){var h=t.conversationID.replace(Yn.CONV_GROUP,\"\");this._pollingInstanceMap.has(h)?r.addMessageSequence({key:Ip,message:t}):(t.type!==Yn.MSG_GRP_TIP&&t.clientTime>0&&r.addMessageDelay(t.clientTime),r.addMessageSequence({key:yp,message:t}))}n.push(t)}}}else Qi.warn(\"\".concat(this._className,\".onMessage 未处理的 event 类型: \").concat(e[i].event));if(0!==n.length){this._groupModule.filterModifiedMessage(n);var f=this.packConversationOption(n);if(f.length>0)this._getModule(ll).onNewMessage({conversationOptionsList:f,isInstantMessage:!0});Qi.debug(\"\".concat(this._className,\".onMessage count:\").concat(n.length)),this._checkMessageStacked(n);var _=this._groupModule.filterUnmodifiedMessage(n);_.length>0&&this._groupModule.emitOuterEvent(Wn.MESSAGE_RECEIVED,_),n.length=0}}}},{key:\"_checkMessageStacked\",value:function(e){var t=e.length;t>=100&&(Qi.warn(\"\".concat(this._className,\"._checkMessageStacked 直播群消息堆积数:\").concat(e.length,\\'！可能会导致微信小程序渲染时遇到 \"Dom limit exceeded\" 的错误，建议接入侧此时只渲染最近的10条消息\\')),this._reportMessageStackedCount<5&&(new Dp(Wg).setNetworkType(this._groupModule.getNetworkType()).setMessage(\"count:\".concat(t,\" groupID:\").concat(Un(this._joinedGroupMap.keys()))).setLevel(\"warning\").end(),this._reportMessageStackedCount+=1))}},{key:\"_isMessageSentByCurrentInstance\",value:function(e){return!!this._getModule(ll).isMessageSentByCurrentInstance(e)}},{key:\"packMessage\",value:function(e,t){e.currentUser=this._groupModule.getMyUserID(),e.conversationType=5===t?Yn.CONV_SYSTEM:Yn.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var n=new X_(e),o=this.packElements(e,t);return n.setElement(o),n}},{key:\"packElements\",value:function(e,t){return 4===t||6===t?(this._updateMemberCountByGroupTips(e),this._onGroupAttributesUpdated(e),{type:Yn.MSG_GRP_TIP,content:Sn({},e.elements,{groupProfile:e.groupProfile})}):5===t?{type:Yn.MSG_GRP_SYS_NOTICE,content:Sn({},e.elements,{groupProfile:e.groupProfile})}:this._getModule(fl).parseElements(e.elements,e.from)}},{key:\"packConversationOption\",value:function(e){for(var t=new Map,n=0;n<e.length;n++){var o=e[n],r=o.conversationID;if(t.has(r)){var a=t.get(r);a.lastMessage=o,\"in\"===o.flow&&a.unreadCount++}else t.set(r,{conversationID:o.conversationID,unreadCount:\"out\"===o.flow?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})}return Un(t.values())}},{key:\"_updateMemberCountByGroupTips\",value:function(e){var t=e.groupProfile.groupID,n=e.elements.onlineMemberInfo,o=void 0===n?void 0:n;if(!Xu(o)){var r=o.onlineMemberNum,a=void 0===r?0:r,s=o.expireTime,i=void 0===s?this.DEFAULT_EXPIRE_TIME:s,u=this._onlineMemberCountMap.get(t)||{},c=Date.now();Xu(u)?Object.assign(u,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:c,memberCount:a,expireTime:i}):(u.latestUpdateTime=c,u.memberCount=a),Qi.debug(\"\".concat(this._className,\"._updateMemberCountByGroupTips info:\"),u),this._onlineMemberCountMap.set(t,u)}}},{key:\"start\",value:function(e){if(this._pollingInstanceMap.has(e)){var t=this._pollingInstanceMap.get(e);t.isRunning()||t.start()}else{var n=new Wm({manager:this,groupID:e,onInit:this._updateRequestData.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)});n.start(),this._pollingInstanceMap.set(e,n),Qi.log(\"\".concat(this._className,\".start groupID:\").concat(e))}}},{key:\"handleJoinResult\",value:function(e){var t=this;return this._preCheck().then((function(){var n=e.longPollingKey,o=e.group,r=o.groupID;return t._joinedGroupMap.set(r,o),t._groupModule.updateGroupMap([o]),t._groupModule.deleteUnjoinedAVChatRoom(r),t._groupModule.emitGroupListUpdate(!0,!1),hu(n)?im({status:au,group:o}):Promise.resolve()}))}},{key:\"startRunLoop\",value:function(e){var t=this;return this.handleJoinResult(e).then((function(){var n=e.longPollingKey,o=e.group,r=o.groupID;return t._pollingRequestInfoMap.set(r,{key:n,startSeq:0}),t.start(r),t._groupModule.isLoggedIn()?im({status:au,group:o}):im({status:au})}))}},{key:\"_preCheck\",value:function(){if(this._getModule(dl).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();var e=Pn(this._joinedGroupMap.entries().next().value,2),t=e[0],n=e[1];if(this._groupModule.isLoggedIn()){if(!(n.selfInfo.role===Yn.GRP_MBR_ROLE_OWNER||n.ownerID===this._groupModule.getMyUserID()))return this._groupModule.quitGroup(t);this._groupModule.deleteLocalGroupAndConversation(t)}else this._groupModule.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:\"joinWithoutAuth\",value:function(e){var t=this,n=e.groupID,o=\"\".concat(this._className,\".joinWithoutAuth\"),r=new Dp(Lg);return this._groupModule.request({protocolName:Md,requestData:e}).then((function(e){var a=e.data.longPollingKey;if(t._groupModule.probeNetwork().then((function(e){var t=Pn(e,2),o=(t[0],t[1]);r.setNetworkType(o).setMessage(\"groupID:\".concat(n,\" longPollingKey:\").concat(a)).end(!0)})),hu(a))return um(new rm({code:lp.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN,message:dp.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN}));Qi.log(\"\".concat(o,\" ok. groupID:\").concat(n)),t._getModule(ll).setCompleted(\"\".concat(Yn.CONV_GROUP).concat(n));var s=new Gm({groupID:n});return t.startRunLoop({group:s,longPollingKey:a}),Q_({status:au})})).catch((function(e){return Qi.error(\"\".concat(o,\" failed. groupID:\").concat(n,\" error:\"),e),t._groupModule.probeNetwork().then((function(t){var o=Pn(t,2),a=o[0],s=o[1];r.setError(e,a,s).setMessage(\"groupID:\".concat(n)).end(!0)})),um(e)})).finally((function(){t._groupModule.getModule(gl).reportAtOnce()}))}},{key:\"getGroupOnlineMemberCount\",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},n=Date.now();return Xu(t)||n-t.lastSyncTime>1e3*t.expireTime&&n-t.latestUpdateTime>1e4&&n-t.lastReqTime>3e3?(t.lastReqTime=n,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then((function(e){return Q_({memberCount:e.memberCount})})).catch((function(e){return um(e)}))):im({memberCount:t.memberCount})}},{key:\"_getGroupOnlineMemberCount\",value:function(e){var t=this,n=\"\".concat(this._className,\"._getGroupOnlineMemberCount\");return this._groupModule.request({protocolName:Pd,requestData:{groupID:e}}).then((function(o){var r=t._onlineMemberCountMap.get(e)||{},a=o.data,s=a.onlineMemberNum,i=void 0===s?0:s,u=a.expireTime,c=void 0===u?t.DEFAULT_EXPIRE_TIME:u;Qi.log(\"\".concat(n,\" ok. groupID:\").concat(e,\" memberCount:\").concat(i,\" expireTime:\").concat(c));var l=Date.now();return Xu(r)&&(r.lastReqTime=l),t._onlineMemberCountMap.set(e,Object.assign(r,{lastSyncTime:l,latestUpdateTime:l,memberCount:i,expireTime:c})),{memberCount:i}})).catch((function(o){return Qi.warn(\"\".concat(n,\" failed. error:\"),o),new Dp(Bg).setCode(o.code).setMessage(\"groupID:\".concat(e,\" error:\").concat(JSON.stringify(o))).setNetworkType(t._groupModule.getNetworkType()).end(),Promise.reject(o)}))}},{key:\"_onGroupAttributesUpdated\",value:function(e){var t=e.groupProfile.groupID,n=e.elements,o=n.operationType,r=n.newGroupProfile;if(6===o){var a=(void 0===r?void 0:r).groupAttributeOption;Xu(a)||this._groupModule.onGroupAttributesUpdated({groupID:t,groupAttributeOption:a})}}},{key:\"_getModule\",value:function(e){return this._groupModule.getModule(e)}},{key:\"setPollingInterval\",value:function(e){hu(e)||cu(e)||(this._pollingInterval=parseInt(e,10),Qi.log(\"\".concat(this._className,\".setPollingInterval value:\").concat(this._pollingInterval)))}},{key:\"getPollingInterval\",value:function(){return this._pollingInterval}},{key:\"reset\",value:function(e){if(e){Qi.log(\"\".concat(this._className,\".reset groupID:\").concat(e));var t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{Qi.log(\"\".concat(this._className,\".reset all\"));var n,o=Bn(this._pollingInstanceMap.values());try{for(o.s();!(n=o.n()).done;){n.value.stop()}}catch(r){o.e(r)}finally{o.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear()}this.sequencesLinkedList.reset(),this.messageIDLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL}}]),e}(),zm=1,Jm=15,Xm=function(){function e(t){yn(this,e),this._groupModule=t,this._className=\"GroupSystemNoticeHandler\",this.pendencyMap=new Map}return En(e,[{key:\"onNewGroupSystemNotice\",value:function(e){var t=e.dataList,n=e.isSyncingEnded,o=e.isInstantMessage;Qi.debug(\"\".concat(this._className,\".onReceiveSystemNotice count:\").concat(t.length));var r=this.newSystemNoticeStoredAndSummary({notifiesList:t,isInstantMessage:o}),a=r.eventDataList,s=r.result;a.length>0&&(this._groupModule.getModule(ll).onNewMessage({conversationOptionsList:a,isInstantMessage:o}),this._onReceivedGroupSystemNotice({result:s,isInstantMessage:o}));o?s.length>0&&this._groupModule.emitOuterEvent(Wn.MESSAGE_RECEIVED,s):!0===n&&this._clearGroupSystemNotice()}},{key:\"newSystemNoticeStoredAndSummary\",value:function(e){var t=e.notifiesList,n=e.isInstantMessage,o=null,r=t.length,a=0,s=[],i={conversationID:Yn.CONV_SYSTEM,unreadCount:0,type:Yn.CONV_SYSTEM,subType:null,lastMessage:null};for(a=0;a<r;a++){var u=t[a];if(u.elements.operationType!==Jm)u.currentUser=this._groupModule.getMyUserID(),u.conversationType=Yn.CONV_SYSTEM,u.conversationID=Yn.CONV_SYSTEM,(o=new X_(u)).setElement({type:Yn.MSG_GRP_SYS_NOTICE,content:Sn({},u.elements,{groupProfile:u.groupProfile})}),o.isSystemMessage=!0,(1===o.sequence&&1===o.random||2===o.sequence&&2===o.random)&&(o.sequence=Su(),o.random=Su(),o.generateMessageID(),Qi.log(\"\".concat(this._className,\".newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:\").concat(o.ID))),this._groupModule.getModule(ll).pushIntoNoticeResult(s,o)&&(n?i.unreadCount++:o.setIsRead(!0),i.subType=o.conversationSubType)}return i.lastMessage=s[s.length-1],{eventDataList:s.length>0?[i]:[],result:s}}},{key:\"_clearGroupSystemNotice\",value:function(){var e=this;this.getPendencyList().then((function(t){t.forEach((function(t){e.pendencyMap.set(\"\".concat(t.from,\"_\").concat(t.groupID,\"_\").concat(t.to),t)}));var n=e._groupModule.getModule(ll).getLocalMessageList(Yn.CONV_SYSTEM),o=[];n.forEach((function(t){var n=t.payload,r=n.operatorID,a=n.operationType,s=n.groupProfile;if(a===zm){var i=\"\".concat(r,\"_\").concat(s.groupID,\"_\").concat(s.to),u=e.pendencyMap.get(i);u&&cu(u.handled)&&0!==u.handled&&o.push(t)}})),e.deleteGroupSystemNotice({messageList:o})}))}},{key:\"deleteGroupSystemNotice\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteGroupSystemNotice\");return gu(e.messageList)&&0!==e.messageList.length?(Qi.log(\"\".concat(n)+e.messageList.map((function(e){return e.ID}))),this._groupModule.request({protocolName:Gd,requestData:{messageListToDelete:e.messageList.map((function(e){return{from:Yn.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}}))}}).then((function(){Qi.log(\"\".concat(n,\" ok\"));var o=t._groupModule.getModule(ll);return e.messageList.forEach((function(e){o.deleteLocalMessage(e)})),Q_()})).catch((function(e){return Qi.error(\"\".concat(n,\" error:\"),e),um(e)}))):im()}},{key:\"getPendencyList\",value:function(e){var t=this;return this._groupModule.request({protocolName:Od,requestData:{startTime:e&&e.startTime?e.startTime:0,limit:e&&e.limit?e.limit:10,handleAccount:this._groupModule.getMyUserID()}}).then((function(e){var n=e.data.pendencyList;return 0!==e.data.nextStartTime?t.getPendencyList({startTime:e.data.nextStartTime}).then((function(e){return[].concat(Un(n),Un(e))})):n}))}},{key:\"_onReceivedGroupSystemNotice\",value:function(e){var t=this,n=e.result;e.isInstantMessage&&n.forEach((function(e){switch(e.payload.operationType){case 1:break;case 2:t._onApplyGroupRequestAgreed(e);break;case 3:break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 6:break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e)}}))}},{key:\"_onApplyGroupRequestAgreed\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:\"_onMemberKicked\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:\"_onGroupDismissed\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t);var n=this._groupModule._AVChatRoomHandler;n&&n.checkJoinedAVChatRoomByID(t)&&n.reset(t)}},{key:\"_onInviteGroup\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:\"_onQuitGroup\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:\"_onSetManager\",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,r=this._groupModule.getModule(cl).getLocalGroupMemberInfo(o,n);r&&r.updateRole(Yn.GRP_MBR_ROLE_ADMIN)}},{key:\"_onDeleteManager\",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,r=this._groupModule.getModule(cl).getLocalGroupMemberInfo(o,n);r&&r.updateRole(Yn.GRP_MBR_ROLE_MEMBER)}},{key:\"reset\",value:function(){this.pendencyMap.clear()}}]),e}(),Qm=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"GroupModule\",o._commonGroupHandler=null,o._AVChatRoomHandler=null,o._groupSystemNoticeHandler=null,o._commonGroupHandler=new Bm(Gn(o)),o._groupAttributesHandler=new jm(Gn(o)),o._AVChatRoomHandler=new $m(Gn(o)),o._groupTipsHandler=new qm(Gn(o)),o._groupSystemNoticeHandler=new Xm(Gn(o)),o.groupMap=new Map,o._unjoinedAVChatRoomList=new Map,o._receiptDetailCompleteMap=new Map,o.getInnerEmitterInstance().on(ym,o._onCloudConfigUpdated,Gn(o)),o}return En(n,[{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"polling_interval\");this._AVChatRoomHandler&&this._AVChatRoomHandler.setPollingInterval(e)}},{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}},{key:\"guardForAVChatRoom\",value:function(e){var t=this;if(e.conversationType===Yn.CONV_GROUP){var n=e.to;return this.hasLocalGroup(n)?im():this.getGroupProfile({groupID:n}).then((function(o){var r=o.data.group.type;if(Qi.log(\"\".concat(t._className,\".guardForAVChatRoom. groupID:\").concat(n,\" type:\").concat(r)),r===Yn.GRP_AVCHATROOM){var a=\"userId:\".concat(e.from,\" 未加入群 groupID:\").concat(n,\"。发消息前先使用 joinGroup 接口申请加群，详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup\");return Qi.warn(\"\".concat(t._className,\".guardForAVChatRoom sendMessage not allowed. \").concat(a)),um(new rm({code:lp.MESSAGE_SEND_FAIL,message:a,data:{message:e}}))}return im()}))}return im()}},{key:\"checkJoinedAVChatRoomByID\",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:\"onNewGroupMessage\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onNewGroupMessage(e)}},{key:\"updateNextMessageSeq\",value:function(e){var t=this;gu(e)&&e.forEach((function(e){var n=e.conversationID.replace(Yn.CONV_GROUP,\"\");t.groupMap.has(n)&&(t.groupMap.get(n).nextMessageSeq=e.lastMessage.sequence+1)}))}},{key:\"onNewGroupTips\",value:function(e){this._groupTipsHandler&&this._groupTipsHandler.onNewGroupTips(e)}},{key:\"onGroupMessageRevoked\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onGroupMessageRevoked(e)}},{key:\"onNewGroupSystemNotice\",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}},{key:\"onGroupMessageReadNotice\",value:function(e){var t=this;e.dataList.forEach((function(e){var n=e.elements.groupMessageReadNotice;if(!hu(n)){var o=t.getModule(ll);n.forEach((function(e){var n=e.groupID,r=e.lastMessageSeq;Qi.debug(\"\".concat(t._className,\".onGroupMessageReadNotice groupID:\").concat(n,\" lastMessageSeq:\").concat(r));var a=\"\".concat(Yn.CONV_GROUP).concat(n);o.updateIsReadAfterReadReport({conversationID:a,lastMessageSeq:r}),o.updateUnreadCount(a)}))}}))}},{key:\"onReadReceiptList\",value:function(e){var t=this;Qi.debug(\"\".concat(this._className,\".onReadReceiptList options:\"),JSON.stringify(e)),e.dataList.forEach((function(e){var n=e.groupProfile,o=e.elements,r=n.groupID,a=t.getModule(ll),s=o.readReceiptList;a.updateReadReceiptInfo(r,s)}))}},{key:\"deleteGroupSystemNotice\",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}},{key:\"initGroupMap\",value:function(e){this.groupMap.set(e.groupID,new Gm(e))}},{key:\"deleteGroup\",value:function(e){this.groupMap.delete(e)}},{key:\"updateGroupMap\",value:function(e){var t=this;e.forEach((function(e){t.groupMap.has(e.groupID)?t.groupMap.get(e.groupID).updateGroup(e):t.groupMap.set(e.groupID,new Gm(e))}));var n,o=this.getMyUserID(),r=Bn(this.groupMap);try{for(r.s();!(n=r.n()).done;){Pn(n.value,2)[1].selfInfo.userID=o}}catch(a){r.e(a)}finally{r.f()}this._setStorageGroupList()}},{key:\"getStorageGroupList\",value:function(){return this.getModule(pl).getItem(\"groupMap\")}},{key:\"_setStorageGroupList\",value:function(){var e=this.getLocalGroupList().filter((function(e){var t=e.type;return!wu(t)})).slice(0,20).map((function(e){return{groupID:e.groupID,name:e.name,avatar:e.avatar,type:e.type}}));this.getModule(pl).setItem(\"groupMap\",e)}},{key:\"getGroupMap\",value:function(){return this.groupMap}},{key:\"getLocalGroupList\",value:function(){return Un(this.groupMap.values())}},{key:\"getLocalGroupProfile\",value:function(e){return this.groupMap.get(e)}},{key:\"sortLocalGroupList\",value:function(){var e=Un(this.groupMap).filter((function(e){var t=Pn(e,2);t[0];return!Xu(t[1].lastMessage)}));e.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})),this.groupMap=new Map(Un(e))}},{key:\"updateGroupLastMessage\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.handleUpdateGroupLastMessage(e)}},{key:\"emitGroupListUpdate\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalGroupList();if(e&&this.emitOuterEvent(Wn.GROUP_LIST_UPDATED),t){var o=JSON.parse(JSON.stringify(n)),r=this.getModule(ll);r.updateConversationGroupProfile(o)}}},{key:\"patchGroupMessageRemindType\",value:function(){var e=this.getLocalGroupList(),t=this.getModule(ll),n=0;e.forEach((function(e){!0===t.patchMessageRemindType({ID:e.groupID,isC2CConversation:!1,messageRemindType:e.selfInfo.messageRemindType})&&(n+=1)})),Qi.log(\"\".concat(this._className,\".patchGroupMessageRemindType count:\").concat(n))}},{key:\"recomputeUnreadCount\",value:function(){var e=this.getLocalGroupList(),t=this.getModule(ll);e.forEach((function(e){var n=e.groupID,o=e.selfInfo,r=o.excludedUnreadSequenceList,a=o.readedSequence;if(gu(r)){var s=0;r.forEach((function(t){t>=a&&t<=e.nextMessageSeq-1&&(s+=1)})),s>=1&&t.recomputeGroupUnreadCount({conversationID:\"\".concat(Yn.CONV_GROUP).concat(n),count:s})}}))}},{key:\"getMyNameCardByGroupID\",value:function(e){var t=this.getLocalGroupProfile(e);return t?t.selfInfo.nameCard:\"\"}},{key:\"getGroupList\",value:function(e){return this._commonGroupHandler?this._commonGroupHandler.getGroupList(e):im()}},{key:\"getGroupProfile\",value:function(e){var t=this,n=new Dp(Ag),o=\"\".concat(this._className,\".getGroupProfile\"),r=e.groupID,a=e.groupCustomFieldFilter;Qi.log(\"\".concat(o,\" groupID:\").concat(r));var s={groupIDList:[r],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\",\"ShutUpAllMember\"],groupCustomFieldFilter:a,memberInfoFilter:[\"Role\",\"JoinTime\",\"MsgSeq\",\"MsgFlag\",\"NameCard\"]}};return this.getGroupProfileAdvance(s).then((function(e){var a,s=e.data,i=s.successGroupList,u=s.failureGroupList;return Qi.log(\"\".concat(o,\" ok\")),u.length>0?um(u[0]):(wu(i[0].type)&&!t.hasLocalGroup(r)?a=new Gm(i[0]):(t.updateGroupMap(i),a=t.getLocalGroupProfile(r)),t.getModule(ll).updateConversationGroupProfile([a]),n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(r,\" type:\").concat(a.type,\" muteAllMembers:\").concat(a.muteAllMembers,\" ownerID:\").concat(a.ownerID)).end(),Q_({group:a}))})).catch((function(r){return t.probeNetwork().then((function(t){var o=Pn(t,2),a=o[0],s=o[1];n.setError(r,a,s).setMessage(\"groupID:\".concat(e.groupID)).end()})),Qi.error(\"\".concat(o,\" failed. error:\"),r),um(r)}))}},{key:\"getGroupProfileAdvance\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupProfileAdvance\"),o=e.groupIDList;gu(o)&&o.length>50&&(Qi.warn(\"\".concat(n,\" 获取群资料的数量不能超过50个\")),o.length=50);var r=[],a=[];o.forEach((function(e){Pu({groupID:e})?a.push(e):r.push(e)}));var s=[];if(r.length>0){var i=this._getGroupProfileAdvance(Sn({},e,{groupIDList:r}));s.push(i)}if(a.length>0){var u=this._getGroupProfileAdvance(Sn({},e,{groupIDList:a,relayFlag:r.length>0}));s.push(u)}return Promise.all(s).then((function(e){var t=[],n=[];return e.forEach((function(e){t.push.apply(t,Un(e.successGroupList)),n.push.apply(n,Un(e.failureGroupList))})),Q_({successGroupList:t,failureGroupList:n})})).catch((function(e){return Qi.error(\"\".concat(t._className,\"._getGroupProfileAdvance failed. error:\"),e),um(e)}))}},{key:\"_getGroupProfileAdvance\",value:function(e){var t=this,n=e.relayFlag,o=void 0!==n&&n,r=On(e,[\"relayFlag\"]);return this.request({protocolName:hd,requestData:r}).then((function(e){Qi.log(\"\".concat(t._className,\"._getGroupProfileAdvance ok.\"));var n=e.data.groups;return{successGroupList:n.filter((function(e){return hu(e.errorCode)||0===e.errorCode})),failureGroupList:n.filter((function(e){return e.errorCode&&0!==e.errorCode})).map((function(e){return new rm({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})}))}})).catch((function(t){return o&&Pu({groupID:e.groupIDList[0]})?{successGroupList:[],failureGroupList:[]}:um(t)}))}},{key:\"createGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".createGroup\"),o=e.type,r=e.groupID;if(![\"Public\",\"Private\",\"ChatRoom\",\"AVChatRoom\",\"Community\"].includes(o))return um({code:lp.ILLEGAL_GROUP_TYPE,message:dp.ILLEGAL_GROUP_TYPE});if(!Pu({type:o})&&!Xu(r)&&Pu({groupID:r}))return um({code:lp.ILLEGAL_GROUP_ID,message:dp.ILLEGAL_GROUP_ID});if(wu(o)&&!hu(e.memberList)&&e.memberList.length>0&&(Qi.warn(\"\".concat(n,\" 创建 AVChatRoom 时不能添加群成员，自动忽略该字段\")),e.memberList=void 0),bu(o)||hu(e.joinOption)||(Qi.warn(\"\".concat(n,\" 创建 Work/Meeting/AVChatRoom/Community 群时不能设置字段 joinOption，自动忽略该字段\")),e.joinOption=void 0),Pu({type:o})&&!Xu(r)&&!Pu({groupID:r}))return um({code:lp.ILLEGAL_GROUP_ID,message:dp.ILLEGAL_GROUP_ID});var a=new Dp(gg);Qi.log(\"\".concat(n,\" options:\"),e);var s=[];return this.request({protocolName:fd,requestData:Sn({},e,{ownerID:this.getMyUserID(),webPushFlag:1})}).then((function(o){var r=o.data,i=r.groupID,u=r.overLimitUserIDList,c=void 0===u?[]:u;if(s=c,a.setNetworkType(t.getNetworkType()).setMessage(\"groupType:\".concat(e.type,\" groupID:\").concat(i,\" overLimitUserIDList=\").concat(c)).end(),Qi.log(\"\".concat(n,\" ok groupID:\").concat(i,\" overLimitUserIDList:\"),c),e.type===Yn.GRP_AVCHATROOM)return t.getGroupProfile({groupID:i});Xu(e.memberList)||Xu(c)||(e.memberList=e.memberList.filter((function(e){return-1===c.indexOf(e.userID)}))),t.updateGroupMap([Sn({},e,{groupID:i})]);var l=t.getModule(rl),d=l.createCustomMessage({to:i,conversationType:Yn.CONV_GROUP,payload:{data:\"group_create\",extension:\"\".concat(t.getMyUserID(),\"创建群组\")}});return l.sendMessageInstance(d),t.emitGroupListUpdate(),t.getGroupProfile({groupID:i})})).then((function(e){var t=e.data.group,n=t.selfInfo,o=n.nameCard,r=n.joinTime;return t.updateSelfInfo({nameCard:o,joinTime:r,messageRemindType:Yn.MSG_REMIND_ACPT_AND_NOTE,role:Yn.GRP_MBR_ROLE_OWNER}),Q_({group:t,overLimitUserIDList:s})})).catch((function(o){return a.setMessage(\"groupType:\".concat(e.type)),t.probeNetwork().then((function(e){var t=Pn(e,2),n=t[0],r=t[1];a.setError(o,n,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),o),um(o)}))}},{key:\"dismissGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".dismissGroup\");if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===Yn.GRP_WORK)return um(new rm({code:lp.CANNOT_DISMISS_WORK,message:dp.CANNOT_DISMISS_WORK}));var o=new Dp(Ig);return o.setMessage(\"groupID:\".concat(e)),Qi.log(\"\".concat(n,\" groupID:\").concat(e)),this.request({protocolName:_d,requestData:{groupID:e}}).then((function(){return o.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t._AVChatRoomHandler.reset(e),Q_({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"updateGroupProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".updateGroupProfile\");!this.hasLocalGroup(e.groupID)||bu(this.getLocalGroupProfile(e.groupID).type)||hu(e.joinOption)||(Qi.warn(\"\".concat(n,\" Work/Meeting/AVChatRoom/Community 群不能设置字段 joinOption，自动忽略该字段\")),e.joinOption=void 0),hu(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers=\"On\":e.muteAllMembers=\"Off\");var o=new Dp(Eg);return o.setMessage(JSON.stringify(e)),Qi.log(\"\".concat(n,\" groupID:\").concat(e.groupID)),this.request({protocolName:md,requestData:e}).then((function(){(o.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),t.hasLocalGroup(e.groupID))&&(t.groupMap.get(e.groupID).updateGroup(e),t._setStorageGroupList());return Q_({group:t.groupMap.get(e.groupID)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.log(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"joinGroup\",value:function(e){var t=this,n=e.groupID,o=e.type,r=\"\".concat(this._className,\".joinGroup\");if(o===Yn.GRP_WORK){var a=new rm({code:lp.CANNOT_JOIN_WORK,message:dp.CANNOT_JOIN_WORK});return um(a)}if(this.deleteUnjoinedAVChatRoom(n),this.hasLocalGroup(n)){if(!this.isLoggedIn())return im({status:Yn.JOIN_STATUS_ALREADY_IN_GROUP});var s=new Dp(hg);return this.getGroupProfile({groupID:n}).then((function(){return s.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" joinedStatus:\").concat(Yn.JOIN_STATUS_ALREADY_IN_GROUP)).end(),im({status:Yn.JOIN_STATUS_ALREADY_IN_GROUP})})).catch((function(o){return s.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" unjoined\")).end(),Qi.warn(\"\".concat(r,\" \").concat(n,\" was unjoined, now join!\")),t.groupMap.delete(n),t.applyJoinGroup(e)}))}return Qi.log(\"\".concat(r,\" groupID:\").concat(n)),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}},{key:\"applyJoinGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".applyJoinGroup\"),o=e.groupID,r=new Dp(hg),a=Sn({},e),s=this.canIUse(ti.AVCHATROOM_HISTORY_MSG);return s&&(a.historyMessageFlag=1),this.request({protocolName:vd,requestData:a}).then((function(e){var a=e.data,i=a.joinedStatus,u=a.longPollingKey,c=a.avChatRoomFlag,l=a.avChatRoomKey,d=a.messageList,p=\"groupID:\".concat(o,\" joinedStatus:\").concat(i,\" longPollingKey:\").concat(u)+\" avChatRoomFlag:\".concat(c,\" canGetAVChatRoomHistoryMessage:\").concat(s);switch(r.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(p)).end(),Qi.log(\"\".concat(n,\" ok. \").concat(p)),i){case su:return Q_({status:su});case au:return t.getGroupProfile({groupID:o}).then((function(e){var n,r=e.data.group,a={status:au,group:r};return 1===c?(t.getModule(ll).setCompleted(\"\".concat(Yn.CONV_GROUP).concat(o)),t._groupAttributesHandler.initGroupAttributesCache({groupID:o,avChatRoomKey:l}),(n=hu(u)?t._AVChatRoomHandler.handleJoinResult({group:r}):t._AVChatRoomHandler.startRunLoop({longPollingKey:u,group:r})).then((function(){t._onAVChatRoomHistoryMessage(d)})),n):(t.emitGroupListUpdate(!0,!1),Q_(a))}));default:var g=new rm({code:lp.JOIN_GROUP_FAIL,message:dp.JOIN_GROUP_FAIL});return Qi.error(\"\".concat(n,\" error:\"),g),um(g)}})).catch((function(o){return r.setMessage(\"groupID:\".concat(e.groupID)),t.probeNetwork().then((function(e){var t=Pn(e,2),n=t[0],a=t[1];r.setError(o,n,a).end()})),Qi.error(\"\".concat(n,\" error:\"),o),um(o)}))}},{key:\"quitGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".quitGroup\");Qi.log(\"\".concat(n,\" groupID:\").concat(e));var o=this.checkJoinedAVChatRoomByID(e);if(!o&&!this.hasLocalGroup(e)){var r=new rm({code:lp.MEMBER_NOT_IN_GROUP,message:dp.MEMBER_NOT_IN_GROUP});return um(r)}if(o&&!this.isLoggedIn())return Qi.log(\"\".concat(n,\" anonymously ok. groupID:\").concat(e)),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),im({groupID:e});var a=new Dp(fg);return a.setMessage(\"groupID:\".concat(e)),this.request({protocolName:yd,requestData:{groupID:e}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),o&&t._AVChatRoomHandler.reset(e),t.deleteLocalGroupAndConversation(e),Q_({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"searchGroupByID\",value:function(e){var t=this,n=\"\".concat(this._className,\".searchGroupByID\"),o={groupIDList:[e]},r=new Dp(_g);return r.setMessage(\"groupID:\".concat(e)),Qi.log(\"\".concat(n,\" groupID:\").concat(e)),this.request({protocolName:Id,requestData:o}).then((function(e){var o=e.data.groupProfile;if(0!==o[0].errorCode)throw new rm({code:o[0].errorCode,message:o[0].errorInfo});return r.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),Q_({group:new Gm(o[0])})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"changeGroupOwner\",value:function(e){var t=this,n=\"\".concat(this._className,\".changeGroupOwner\");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===Yn.GRP_AVCHATROOM)return um(new rm({code:lp.CANNOT_CHANGE_OWNER_IN_AVCHATROOM,message:dp.CANNOT_CHANGE_OWNER_IN_AVCHATROOM}));if(e.newOwnerID===this.getMyUserID())return um(new rm({code:lp.CANNOT_CHANGE_OWNER_TO_SELF,message:dp.CANNOT_CHANGE_OWNER_TO_SELF}));var o=new Dp(mg);return o.setMessage(\"groupID:\".concat(e.groupID,\" newOwnerID:\").concat(e.newOwnerID)),Qi.log(\"\".concat(n,\" groupID:\").concat(e.groupID)),this.request({protocolName:Ed,requestData:e}).then((function(){o.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\"));var r=e.groupID,a=e.newOwnerID;t.groupMap.get(r).ownerID=a;var s=t.getModule(cl).getLocalGroupMemberList(r);if(s instanceof Map){var i=s.get(t.getMyUserID());hu(i)||(i.updateRole(\"Member\"),t.groupMap.get(r).selfInfo.role=\"Member\");var u=s.get(a);hu(u)||u.updateRole(\"Owner\")}return t.emitGroupListUpdate(!0,!1),Q_({group:t.groupMap.get(r)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"handleGroupApplication\",value:function(e){var t=this,n=\"\".concat(this._className,\".handleGroupApplication\"),o=e.message.payload,r=o.groupProfile.groupID,a=o.authentication,s=o.messageKey,i=o.operatorID,u=new Dp(vg);return u.setMessage(\"groupID:\".concat(r)),Qi.log(\"\".concat(n,\" groupID:\").concat(r)),this.request({protocolName:Td,requestData:Sn({},e,{applicant:i,groupID:r,authentication:a,messageKey:s})}).then((function(){return u.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),t._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Q_({group:t.getLocalGroupProfile(r)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error\"),e),um(e)}))}},{key:\"handleGroupInvitation\",value:function(e){var t=this,n=\"\".concat(this._className,\".handleGroupInvitation\"),o=e.message.payload,r=o.groupProfile.groupID,a=o.authentication,s=o.messageKey,i=o.operatorID,u=e.handleAction,c=new Dp(Mg);return c.setMessage(\"groupID:\".concat(r,\" inviter:\").concat(i,\" handleAction:\").concat(u)),Qi.log(\"\".concat(n,\" groupID:\").concat(r,\" inviter:\").concat(i,\" handleAction:\").concat(u)),this.request({protocolName:Ad,requestData:Sn({},e,{inviter:i,groupID:r,authentication:a,messageKey:s})}).then((function(){return c.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),t._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Q_({group:t.getLocalGroupProfile(r)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error\"),e),um(e)}))}},{key:\"getGroupOnlineMemberCount\",value:function(e){return this._AVChatRoomHandler?this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this._AVChatRoomHandler.getGroupOnlineMemberCount(e):im({memberCount:0}):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"hasLocalGroup\",value:function(e){return this.groupMap.has(e)}},{key:\"deleteLocalGroupAndConversation\",value:function(e){this._deleteLocalGroup(e),this.getModule(ll).deleteLocalConversation(\"GROUP\".concat(e)),this.emitGroupListUpdate(!0,!1)}},{key:\"_deleteLocalGroup\",value:function(e){this.groupMap.delete(e),this.getModule(cl).deleteGroupMemberList(e),this._setStorageGroupList()}},{key:\"sendMessage\",value:function(e,t){var n=this.createGroupMessagePack(e,t);return this.request(n)}},{key:\"createGroupMessagePack\",value:function(e,t){var n=null;t&&t.offlinePushInfo&&(n=t.offlinePushInfo);var o=\"\";lu(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var r=[];if(pu(t)&&pu(t.messageControlInfo)){var a=t.messageControlInfo,s=a.excludedFromUnreadCount,i=a.excludedFromLastMessage;!0===s&&r.push(\"NoUnread\"),!0===i&&r.push(\"NoLastMsg\")}var u=e.getGroupAtInfoList();return{protocolName:wl,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),groupID:e.to,msgBody:e.getElements(),cloudCustomData:o,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==Yn.MSG_TEXT||Xu(u)?void 0:u,onlineOnlyFlag:this.isOnlineMessage(e,t)?1:0,clientTime:e.clientTime,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||\"\",desc:n.description||\"\",ext:n.extension||\"\",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||\"\"}}:void 0,messageControlInfo:r,needReadReceipt:!0!==e.needReadReceipt||this.isMessageFromOrToAVChatroom(e.to)?0:1}}}},{key:\"revokeMessage\",value:function(e){return this.request({protocolName:Sd,requestData:{groupID:e.to,msgSeqList:[{msgSeq:e.sequence}]}})}},{key:\"deleteMessage\",value:function(e){var t=e.to,n=e.keyList;return Qi.log(\"\".concat(this._className,\".deleteMessage groupID:\").concat(t,\" count:\").concat(n.length)),this.request({protocolName:Ud,requestData:{groupID:t,deleter:this.getMyUserID(),keyList:n}})}},{key:\"getRoamingMessage\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRoamingMessage\"),o=new Dp(Wp),r=0;return this._computeLastSequence(e).then((function(o){return r=o,Qi.log(\"\".concat(n,\" groupID:\").concat(e.groupID,\" lastSequence:\").concat(r)),t.request({protocolName:Cd,requestData:{groupID:e.groupID,count:21,sequence:r}})})).then((function(a){var s=a.data,i=s.messageList,u=s.complete;hu(i)?Qi.log(\"\".concat(n,\" ok. complete:\").concat(u,\" but messageList is undefined!\")):Qi.log(\"\".concat(n,\" ok. complete:\").concat(u,\" count:\").concat(i.length)),o.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e.groupID,\" lastSequence:\").concat(r,\" complete:\").concat(u,\" count:\").concat(i?i.length:\"undefined\")).end();var c=\"GROUP\".concat(e.groupID),l=t.getModule(ll);if(2===u||Xu(i))return l.setCompleted(c),[];var d=l.storeRoamingMessage(i,c);return l.updateIsRead(c),l.patchConversationLastMessage(c),d})).catch((function(a){return t.probeNetwork().then((function(t){var n=Pn(t,2),s=n[0],i=n[1];o.setError(a,s,i).setMessage(\"groupID:\".concat(e.groupID,\" lastSequence:\").concat(r)).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),a),um(a)}))}},{key:\"_getGroupIDOfMessage\",value:function(e){return e.conversationID.replace(Yn.CONV_GROUP,\"\")}},{key:\"getReadReceiptList\",value:function(e){var t=this,n=\"\".concat(this._className,\".getReadReceiptList\"),o=this._getGroupIDOfMessage(e[0]),r=this.getMyUserID(),a=e.filter((function(e){return e.from===r&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));if(Qi.log(\"\".concat(n,\" groupID:\").concat(o,\" sequenceList:\").concat(JSON.stringify(a))),0===a.length)return im({messageList:e});var s=new Dp(Yp);return s.setMessage(\"groupID:\".concat(o)),this.request({protocolName:kd,requestData:{groupID:o,sequenceList:a}}).then((function(t){s.end(),Qi.log(\"\".concat(n,\" ok\"));var o=t.data.readReceiptList;return gu(o)&&o.forEach((function(t){e.forEach((function(e){0===t.code&&t.sequence===e.sequence&&(e.readReceiptInfo.readCount=t.readCount,e.readReceiptInfo.unreadCount=t.unreadCount)}))})),Q_({messageList:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"sendReadReceipt\",value:function(e){var t=this,n=this._getGroupIDOfMessage(e[0]),o=new Dp(zp);o.setMessage(\"groupID:\".concat(n));var r=this.getMyUserID(),a=e.filter((function(e){return e.from!==r&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));if(0===a.length)return um({code:lp.READ_RECEIPT_SEQUENCE_LIST_EMPTY,message:dp.READ_RECEIPT_SEQUENCE_LIST_EMPTY});var s=\"\".concat(this._className,\".sendReadReceipt\");return Qi.log(\"\".concat(s,\". sequenceList:\").concat(JSON.stringify(a))),this.request({protocolName:Ld,requestData:{groupID:n,sequenceList:a}}).then((function(e){return o.end(),Qi.log(\"\".concat(s,\" ok\")),Q_()})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.warn(\"\".concat(s,\" failed. error:\"),e),um(e)}))}},{key:\"getReadReceiptDetail\",value:function(e){var t=this,n=e.message,o=e.filter,r=e.cursor,a=e.count,s=this._getGroupIDOfMessage(n),i=n.ID,u=n.sequence,c=\"\".concat(this._className,\".getReadReceiptDetail\"),l=this._receiptDetailCompleteMap.get(i)||!1,d=0!==o&&1!==o?0:o,p=lu(r)?r:\"\",g=!cu(a)||a<=0||a>=100?100:a,h=\"groupID:\".concat(s,\" sequence:\").concat(u,\" cursor:\").concat(p,\" filter:\").concat(d,\" completeFlag:\").concat(l);Qi.log(\"\".concat(c,\" \").concat(h));var f={cursor:\"\",isCompleted:!1,messageID:i,unreadUserIDList:[],readUserIDList:[]};if(!0===l)return f.isCompleted=!0,im(f);var _=new Dp($p);return _.setMessage(h),this.request({protocolName:Rd,requestData:{groupID:s,sequence:u,flag:d,cursor:p,count:g}}).then((function(e){_.end();var n=e.data,o=n.cursor,r=n.isCompleted,a=n.unreadUserIDList,s=n.readUserIDList;return f.cursor=o,1===r&&(f.isCompleted=!0,t._receiptDetailCompleteMap.set(i,!0)),0===d?f.readUserIDList=s.map((function(e){return e.userID})):1===d&&(f.unreadUserIDList=a.map((function(e){return e.userID}))),Qi.log(\"\".concat(c,\" ok\")),Q_(f)})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];_.setError(e,o,r).end()})),Qi.warn(\"\".concat(c,\" failed. error:\"),e),um(e)}))}},{key:\"setMessageRead\",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageSeq,r=\"\".concat(this._className,\".setMessageRead\");Qi.log(\"\".concat(r,\" conversationID:\").concat(n,\" lastMessageSeq:\").concat(o)),cu(o)||Qi.warn(\"\".concat(r,\" 请勿修改 Conversation.lastMessage.lastSequence，否则可能会导致已读上报结果不准确\"));var a=new Dp(Zp);return a.setMessage(\"\".concat(n,\"-\").concat(o)),this.request({protocolName:Dd,requestData:{groupID:n.replace(Yn.CONV_GROUP,\"\"),messageReadSeq:o}}).then((function(){a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(r,\" ok.\"));var e=t.getModule(ll);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:o}),e.updateUnreadCount(n),Q_()})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.log(\"\".concat(r,\" failed. error:\"),e),um(e)}))}},{key:\"_computeLastSequence\",value:function(e){return e.sequence>0?Promise.resolve(e.sequence):this.getGroupLastSequence(e.groupID)}},{key:\"getGroupLastSequence\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupLastSequence\"),o=new Dp(Dg),r=0,a=\"\";if(this.hasLocalGroup(e)){var s=this.getLocalGroupProfile(e),i=s.lastMessage;if(i.lastSequence>0&&!1===i.onlineOnlyFlag)return r=i.lastSequence,a=\"got lastSequence:\".concat(r,\" from local group profile[lastMessage.lastSequence]. groupID:\").concat(e),Qi.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r);if(s.nextMessageSeq>1)return r=s.nextMessageSeq-1,a=\"got lastSequence:\".concat(r,\" from local group profile[nextMessageSeq]. groupID:\").concat(e),Qi.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r)}var u=\"GROUP\".concat(e),c=this.getModule(ll).getLocalConversation(u);if(c&&c.lastMessage.lastSequence&&!1===c.lastMessage.onlineOnlyFlag)return r=c.lastMessage.lastSequence,a=\"got lastSequence:\".concat(r,\" from local conversation profile[lastMessage.lastSequence]. groupID:\").concat(e),Qi.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r);var l={groupIDList:[e],responseFilter:{groupBaseInfoFilter:[\"NextMsgSeq\"]}};return this.getGroupProfileAdvance(l).then((function(s){var i=s.data.successGroupList;return Xu(i)?Qi.log(\"\".concat(n,\" successGroupList is empty. groupID:\").concat(e)):(r=i[0].nextMessageSeq-1,a=\"got lastSequence:\".concat(r,\" from getGroupProfileAdvance. groupID:\").concat(e),Qi.log(\"\".concat(n,\" \").concat(a))),o.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(a)).end(),r})).catch((function(r){return t.probeNetwork().then((function(t){var n=Pn(t,2),a=n[0],s=n[1];o.setError(r,a,s).setMessage(\"get lastSequence failed from getGroupProfileAdvance. groupID:\".concat(e)).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),r),um(r)}))}},{key:\"isMessageFromOrToAVChatroom\",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:\"hasJoinedAVChatRoom\",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.hasJoinedAVChatRoom():0}},{key:\"getJoinedAVChatRoom\",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.getJoinedAVChatRoom():[]}},{key:\"isOnlineMessage\",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:\"_canIUseOnlineOnlyFlag\",value:function(e){var t=this.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==Yn.CONV_GROUP}},{key:\"_onAVChatRoomHistoryMessage\",value:function(e){if(!Xu(e)){Qi.log(\"\".concat(this._className,\"._onAVChatRoomHistoryMessage count:\").concat(e.length));var t=[];e.forEach((function(e){t.push(Sn({},e,{isHistoryMessage:1}))})),this.onAVChatRoomMessage(t)}}},{key:\"onAVChatRoomMessage\",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onMessage(e)}},{key:\"getGroupSimplifiedInfo\",value:function(e){var t=this,n=new Dp(kg),o={groupIDList:[e],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\"]}};return this.getGroupProfileAdvance(o).then((function(o){var r=o.data.successGroupList;return n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e,\" type:\").concat(r[0].type)).end(),r[0]})).catch((function(o){t.probeNetwork().then((function(t){var r=Pn(t,2),a=r[0],s=r[1];n.setError(o,a,s).setMessage(\"groupID:\".concat(e)).end()}))}))}},{key:\"setUnjoinedAVChatRoom\",value:function(e){this._unjoinedAVChatRoomList.set(e,1)}},{key:\"deleteUnjoinedAVChatRoom\",value:function(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}},{key:\"isUnjoinedAVChatRoom\",value:function(e){return this._unjoinedAVChatRoomList.has(e)}},{key:\"onGroupAttributesUpdated\",value:function(e){this._groupAttributesHandler&&this._groupAttributesHandler.onGroupAttributesUpdated(e)}},{key:\"updateLocalMainSequenceOnReconnected\",value:function(){this._groupAttributesHandler&&this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}},{key:\"initGroupAttributes\",value:function(e){return this._groupAttributesHandler.initGroupAttributes(e)}},{key:\"setGroupAttributes\",value:function(e){return this._groupAttributesHandler.setGroupAttributes(e)}},{key:\"deleteGroupAttributes\",value:function(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}},{key:\"getGroupAttributes\",value:function(e){return this._groupAttributesHandler.getGroupAttributes(e)}},{key:\"reset\",value:function(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._receiptDetailCompleteMap.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._AVChatRoomHandler&&this._AVChatRoomHandler.reset()}}]),n}(Nl),Zm=function(){function e(t){yn(this,e),this.userID=\"\",this.avatar=\"\",this.nick=\"\",this.role=\"\",this.joinTime=\"\",this.lastSendMsgTime=\"\",this.nameCard=\"\",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return En(e,[{key:\"_initMember\",value:function(e){this.updateMember(e)}},{key:\"updateMember\",value:function(e){var t=[null,void 0,\"\",0,NaN];e.memberCustomField&&Gu(this.memberCustomField,e.memberCustomField),Eu(this,e,[\"memberCustomField\"],t)}},{key:\"updateRole\",value:function(e){[\"Owner\",\"Admin\",\"Member\"].indexOf(e)<0||(this.role=e)}},{key:\"updateMuteUntil\",value:function(e){hu(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:\"updateNameCard\",value:function(e){hu(e)||(this.nameCard=e)}},{key:\"updateMemberCustomField\",value:function(e){e&&Gu(this.memberCustomField,e)}}]),e}(),ev=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"GroupMemberModule\",o.groupMemberListMap=new Map,o.getInnerEmitterInstance().on(Im,o._onProfileUpdated,Gn(o)),o}return En(n,[{key:\"_onProfileUpdated\",value:function(e){for(var t=this,n=e.data,o=function(e){var o=n[e];t.groupMemberListMap.forEach((function(e){e.has(o.userID)&&e.get(o.userID).updateMember({nick:o.nick,avatar:o.avatar})}))},r=0;r<n.length;r++)o(r)}},{key:\"deleteGroupMemberList\",value:function(e){this.groupMemberListMap.delete(e)}},{key:\"getGroupMemberList\",value:function(e){var t=this,n=e.groupID,o=e.offset,r=void 0===o?0:o,a=e.count,s=void 0===a?15:a,i=\"\".concat(this._className,\".getGroupMemberList\"),u=new Dp(wg);Qi.log(\"\".concat(i,\" groupID:\").concat(n,\" offset:\").concat(r,\" count:\").concat(s));var c=0,l={groupID:n,limit:s>100?100:s};Pu({groupID:n})?l.next=\"\".concat(r):(l.offset=r,c=r+1);var d=[];return this.request({protocolName:Bd,requestData:l}).then((function(e){var o=e.data,r=o.members,a=o.memberNum,s=o.next,i=void 0===s?void 0:s;if(hu(i)||(c=Xu(i)?0:i),!gu(r)||0===r.length)return c=0,Promise.resolve([]);var u=t.getModule(il);return u.hasLocalGroup(n)&&(u.getLocalGroupProfile(n).memberNum=a),d=t._updateLocalGroupMemberMap(n,r),t.getModule(al).getUserProfile({userIDList:r.map((function(e){return e.userID})),tagList:[eu.NICK,eu.AVATAR]})})).then((function(e){var o=e.data;if(!gu(o)||0===o.length)return im({memberList:[],offset:c});var r=o.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));return t._updateLocalGroupMemberMap(n,r),u.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" offset:\").concat(c,\" count:\").concat(s)).end(),Qi.log(\"\".concat(i,\" ok.\")),Q_({memberList:d,offset:c})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Qi.error(\"\".concat(i,\" failed. error:\"),e),um(e)}))}},{key:\"getGroupMemberProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupMemberProfile\"),o=new Dp(Pg);o.setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)),Qi.log(\"\".concat(n,\" groupID:\").concat(e.groupID,\" userIDList:\").concat(e.userIDList.join(\",\"))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var r=e.groupID,a=e.userIDList;return this._getGroupMemberProfileAdvance(Sn({},e,{userIDList:a})).then((function(e){var n=e.data.members;return gu(n)&&0!==n.length?(t._updateLocalGroupMemberMap(r,n),t.getModule(al).getUserProfile({userIDList:n.map((function(e){return e.userID})),tagList:[eu.NICK,eu.AVATAR]})):im([])})).then((function(e){var n=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));t._updateLocalGroupMemberMap(r,n);var s=a.filter((function(e){return t.hasLocalGroupMember(r,e)})).map((function(e){return t.getLocalGroupMemberInfo(r,e)}));return o.setNetworkType(t.getNetworkType()).end(),Q_({memberList:s})}))}},{key:\"addGroupMember\",value:function(e){var t=this,n=\"\".concat(this._className,\".addGroupMember\"),o=e.groupID,r=this.getModule(il).getLocalGroupProfile(o),a=r.type,s=new Dp(Ug);if(s.setMessage(\"groupID:\".concat(o,\" groupType:\").concat(a)),wu(a)){var i=new rm({code:lp.CANNOT_ADD_MEMBER_IN_AVCHATROOM,message:dp.CANNOT_ADD_MEMBER_IN_AVCHATROOM});return s.setCode(lp.CANNOT_ADD_MEMBER_IN_AVCHATROOM).setError(dp.CANNOT_ADD_MEMBER_IN_AVCHATROOM).setNetworkType(this.getNetworkType()).end(),um(i)}return e.userIDList=e.userIDList.map((function(e){return{userID:e}})),Qi.log(\"\".concat(n,\" groupID:\").concat(o)),this.request({protocolName:jd,requestData:e}).then((function(o){var a=o.data.members;Qi.log(\"\".concat(n,\" ok\"));var i=a.filter((function(e){return 1===e.result})).map((function(e){return e.userID})),u=a.filter((function(e){return 0===e.result})).map((function(e){return e.userID})),c=a.filter((function(e){return 2===e.result})).map((function(e){return e.userID})),l=a.filter((function(e){return 4===e.result})).map((function(e){return e.userID})),d=\"groupID:\".concat(e.groupID,\", \")+\"successUserIDList:\".concat(i,\", \")+\"failureUserIDList:\".concat(u,\", \")+\"existedUserIDList:\".concat(c,\", \")+\"overLimitUserIDList:\".concat(l);return s.setNetworkType(t.getNetworkType()).setMoreMessage(d).end(),0===i.length?Q_({successUserIDList:i,failureUserIDList:u,existedUserIDList:c,overLimitUserIDList:l}):(r.memberCount+=i.length,t._updateConversationGroupProfile(r),Q_({successUserIDList:i,failureUserIDList:u,existedUserIDList:c,overLimitUserIDList:l,group:r}))})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"deleteGroupMember\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteGroupMember\"),o=e.groupID,r=e.userIDList,a=new Dp(Fg),s=\"groupID:\".concat(o,\" \").concat(r.length>5?\"userIDList.length:\".concat(r.length):\"userIDList:\".concat(r));a.setMessage(s),Qi.log(\"\".concat(n,\" groupID:\").concat(o,\" userIDList:\"),r);var i=this.getModule(il).getLocalGroupProfile(o);return wu(i.type)?um(new rm({code:lp.CANNOT_KICK_MEMBER_IN_AVCHATROOM,message:dp.CANNOT_KICK_MEMBER_IN_AVCHATROOM})):this.request({protocolName:Wd,requestData:e}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),i.memberCount-=1,t._updateConversationGroupProfile(i),t.deleteLocalGroupMembers(o,r),Q_({group:i,userIDList:r})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"_updateConversationGroupProfile\",value:function(e){this.getModule(ll).updateConversationGroupProfile([e])}},{key:\"setGroupMemberMuteTime\",value:function(e){var t=this,n=e.groupID,o=e.userID,r=e.muteTime,a=\"\".concat(this._className,\".setGroupMemberMuteTime\");if(o===this.getMyUserID())return um(new rm({code:lp.CANNOT_MUTE_SELF,message:dp.CANNOT_MUTE_SELF}));Qi.log(\"\".concat(a,\" groupID:\").concat(n,\" userID:\").concat(o));var s=new Dp(qg);return s.setMessage(\"groupID:\".concat(n,\" userID:\").concat(o,\" muteTime:\").concat(r)),this.modifyGroupMemberInfo({groupID:n,userID:o,muteTime:r}).then((function(e){s.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(a,\" ok\"));var o=t.getModule(il);return Q_({group:o.getLocalGroupProfile(n),member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Qi.error(\"\".concat(a,\" failed. error:\"),e),um(e)}))}},{key:\"setGroupMemberRole\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberRole\"),o=e.groupID,r=e.userID,a=e.role,s=this.getModule(il).getLocalGroupProfile(o);if(s.selfInfo.role!==Yn.GRP_MBR_ROLE_OWNER)return um({code:lp.NOT_OWNER,message:dp.NOT_OWNER});if([Yn.GRP_WORK,Yn.GRP_AVCHATROOM].includes(s.type))return um({code:lp.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM,message:dp.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM});var i=[Yn.GRP_MBR_ROLE_ADMIN,Yn.GRP_MBR_ROLE_MEMBER];if(Pu({groupID:o})&&i.push(Yn.GRP_MBR_ROLE_CUSTOM),i.indexOf(a)<0)return um({code:lp.INVALID_MEMBER_ROLE,message:dp.INVALID_MEMBER_ROLE});if(r===this.getMyUserID())return um({code:lp.CANNOT_SET_SELF_MEMBER_ROLE,message:dp.CANNOT_SET_SELF_MEMBER_ROLE});var u=new Dp(Vg);return u.setMessage(\"groupID:\".concat(o,\" userID:\").concat(r,\" role:\").concat(a)),Qi.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(r)),this.modifyGroupMemberInfo({groupID:o,userID:r,role:a}).then((function(e){return u.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),Q_({group:s,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"setGroupMemberNameCard\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberNameCard\"),o=e.groupID,r=e.userID,a=void 0===r?this.getMyUserID():r,s=e.nameCard;Qi.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(a));var i=new Dp(xg);return i.setMessage(\"groupID:\".concat(o,\" userID:\").concat(a,\" nameCard:\").concat(s)),this.modifyGroupMemberInfo({groupID:o,userID:a,nameCard:s}).then((function(e){Qi.log(\"\".concat(n,\" ok\")),i.setNetworkType(t.getNetworkType()).end();var r=t.getModule(il).getLocalGroupProfile(o);return a===t.getMyUserID()&&r&&r.setSelfNameCard(s),Q_({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"setGroupMemberCustomField\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberCustomField\"),o=e.groupID,r=e.userID,a=void 0===r?this.getMyUserID():r,s=e.memberCustomField;Qi.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(a));var i=new Dp(Kg);return i.setMessage(\"groupID:\".concat(o,\" userID:\").concat(a,\" memberCustomField:\").concat(JSON.stringify(s))),this.modifyGroupMemberInfo({groupID:o,userID:a,memberCustomField:s}).then((function(e){i.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\"));var r=t.getModule(il).getLocalGroupProfile(o);return Q_({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"modifyGroupMemberInfo\",value:function(e){var t=this,n=e.groupID,o=e.userID;return this.request({protocolName:Yd,requestData:e}).then((function(){if(t.hasLocalGroupMember(n,o)){var r=t.getLocalGroupMemberInfo(n,o);return hu(e.muteTime)||r.updateMuteUntil(e.muteTime),hu(e.role)||r.updateRole(e.role),hu(e.nameCard)||r.updateNameCard(e.nameCard),hu(e.memberCustomField)||r.updateMemberCustomField(e.memberCustomField),r}return t.getGroupMemberProfile({groupID:n,userIDList:[o]}).then((function(e){return Pn(e.data.memberList,1)[0]}))}))}},{key:\"_getGroupMemberProfileAdvance\",value:function(e){return this.request({protocolName:Hd,requestData:Sn({},e,{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:[\"Role\",\"JoinTime\",\"NameCard\",\"ShutUpUntil\"]})})}},{key:\"_updateLocalGroupMemberMap\",value:function(e,t){var n=this;return gu(t)&&0!==t.length?t.map((function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new Zm(t)),n.getLocalGroupMemberInfo(e,t.userID)})):[]}},{key:\"deleteLocalGroupMembers\",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach((function(e){n.delete(e)}))}},{key:\"getLocalGroupMemberInfo\",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:\"setLocalGroupMember\",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var n=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,n)}}},{key:\"getLocalGroupMemberList\",value:function(e){return this.groupMemberListMap.get(e)}},{key:\"hasLocalGroupMember\",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:\"hasLocalGroupMemberMap\",value:function(e){return this.groupMemberListMap.has(e)}},{key:\"reset\",value:function(){this.groupMemberListMap.clear()}}]),n}(Nl),tv=function(){function e(t){yn(this,e),this._userModule=t,this._className=\"ProfileHandler\",this.TAG=\"profile\",this.accountProfileMap=new Map,this.expirationTime=864e5}return En(e,[{key:\"setExpirationTime\",value:function(e){this.expirationTime=e}},{key:\"getUserProfile\",value:function(e){var t=this,n=e.userIDList;e.fromAccount=this._userModule.getMyAccount(),n.length>100&&(Qi.warn(\"\".concat(this._className,\".getUserProfile 获取用户资料人数不能超过100人\")),n.length=100);for(var o,r=[],a=[],s=0,i=n.length;s<i;s++)o=n[s],this._userModule.isMyFriend(o)&&this._containsAccount(o)?a.push(this._getProfileFromMap(o)):r.push(o);if(0===r.length)return im(a);e.toAccount=r;var u=e.bFromGetMyProfile||!1,c=[];e.toAccount.forEach((function(e){c.push({toAccount:e,standardSequence:0,customSequence:0})})),e.userItem=c;var l=new Dp(Yg);return l.setMessage(n.length>5?\"userIDList.length:\".concat(n.length):\"userIDList:\".concat(n)),this._userModule.request({protocolName:Pl,requestData:e}).then((function(e){l.setNetworkType(t._userModule.getNetworkType()).end(),Qi.info(\"\".concat(t._className,\".getUserProfile ok\"));var n=t._handleResponse(e).concat(a);return Q_(u?n[0]:n)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),Qi.error(\"\".concat(t._className,\".getUserProfile failed. error:\"),e),um(e)}))}},{key:\"getMyProfile\",value:function(){var e=this._userModule.getMyAccount();if(Qi.log(\"\".concat(this._className,\".getMyProfile myAccount:\").concat(e)),this._fillMap(),this._containsAccount(e)){var t=this._getProfileFromMap(e);return Qi.debug(\"\".concat(this._className,\".getMyProfile from cache, myProfile:\")+JSON.stringify(t)),im(t)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}},{key:\"_handleResponse\",value:function(e){for(var t,n,o=Iu.now(),r=e.data.userProfileItem,a=[],s=0,i=r.length;s<i;s++)\"@TLS#NOT_FOUND\"!==r[s].to&&\"\"!==r[s].to&&(t=r[s].to,n=this._updateMap(t,this._getLatestProfileFromResponse(t,r[s].profileItem)),a.push(n));return Qi.log(\"\".concat(this._className,\"._handleResponse cost \").concat(Iu.now()-o,\" ms\")),a}},{key:\"_getLatestProfileFromResponse\",value:function(e,t){var n={};if(n.userID=e,n.profileCustomField=[],!Xu(t))for(var o=0,r=t.length;o<r;o++)if(t[o].tag.indexOf(\"Tag_Profile_Custom\")>-1)n.profileCustomField.push({key:t[o].tag,value:t[o].value});else switch(t[o].tag){case eu.NICK:n.nick=t[o].value;break;case eu.GENDER:n.gender=t[o].value;break;case eu.BIRTHDAY:n.birthday=t[o].value;break;case eu.LOCATION:n.location=t[o].value;break;case eu.SELFSIGNATURE:n.selfSignature=t[o].value;break;case eu.ALLOWTYPE:n.allowType=t[o].value;break;case eu.LANGUAGE:n.language=t[o].value;break;case eu.AVATAR:n.avatar=t[o].value;break;case eu.MESSAGESETTINGS:n.messageSettings=t[o].value;break;case eu.ADMINFORBIDTYPE:n.adminForbidType=t[o].value;break;case eu.LEVEL:n.level=t[o].value;break;case eu.ROLE:n.role=t[o].value;break;default:Qi.warn(\"\".concat(this._className,\"._handleResponse unknown tag:\"),t[o].tag,t[o].value)}return n}},{key:\"updateMyProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".updateMyProfile\"),o=new Dp($g);o.setMessage(JSON.stringify(e));var r=(new km).validate(e);if(!r.valid)return o.setCode(lp.UPDATE_PROFILE_INVALID_PARAM).setMoreMessage(\"\".concat(n,\" info:\").concat(r.tips)).setNetworkType(this._userModule.getNetworkType()).end(),Qi.error(\"\".concat(n,\" info:\").concat(r.tips,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile\")),um({code:lp.UPDATE_PROFILE_INVALID_PARAM,message:dp.UPDATE_PROFILE_INVALID_PARAM});var a=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(\"profileCustomField\"===s?e.profileCustomField.forEach((function(e){a.push({tag:e.key,value:e.value})})):a.push({tag:eu[s.toUpperCase()],value:e[s]}));return 0===a.length?(o.setCode(lp.UPDATE_PROFILE_NO_KEY).setMoreMessage(dp.UPDATE_PROFILE_NO_KEY).setNetworkType(this._userModule.getNetworkType()).end(),Qi.error(\"\".concat(n,\" info:\").concat(dp.UPDATE_PROFILE_NO_KEY,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile\")),um({code:lp.UPDATE_PROFILE_NO_KEY,message:dp.UPDATE_PROFILE_NO_KEY})):this._userModule.request({protocolName:Ul,requestData:{fromAccount:this._userModule.getMyAccount(),profileItem:a}}).then((function(r){o.setNetworkType(t._userModule.getNetworkType()).end(),Qi.info(\"\".concat(n,\" ok\"));var a=t._updateMap(t._userModule.getMyAccount(),e);return t._userModule.emitOuterEvent(Wn.PROFILE_UPDATED,[a]),im(a)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"onProfileModified\",value:function(e){var t=e.dataList;if(!Xu(t)){var n,o,r=t.length;Qi.debug(\"\".concat(this._className,\".onProfileModified count:\").concat(r,\" dataList:\"),e.dataList);for(var a=[],s=0;s<r;s++)n=t[s].userID,o=this._updateMap(n,this._getLatestProfileFromResponse(n,t[s].profileList)),a.push(o);a.length>0&&(this._userModule.emitInnerEvent(Im,a),this._userModule.emitOuterEvent(Wn.PROFILE_UPDATED,a))}}},{key:\"_fillMap\",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,o=e.length;n<o;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);Qi.log(\"\".concat(this._className,\"._fillMap from cache, map.size:\").concat(this.accountProfileMap.size))}}},{key:\"_updateMap\",value:function(e,t){var n,o=Date.now();return this._containsAccount(e)?(n=this._getProfileFromMap(e),t.profileCustomField&&Gu(n.profileCustomField,t.profileCustomField),Eu(n,t,[\"profileCustomField\"]),n.lastUpdatedTime=o):(n=new km(t),(this._userModule.isMyFriend(e)||e===this._userModule.getMyAccount())&&(n.lastUpdatedTime=o,this.accountProfileMap.set(e,n))),this._flushMap(e===this._userModule.getMyAccount()),n}},{key:\"_flushMap\",value:function(e){var t=Un(this.accountProfileMap.values()),n=this._userModule.getStorageModule();Qi.debug(\"\".concat(this._className,\"._flushMap length:\").concat(t.length,\" flushAtOnce:\").concat(e)),n.setItem(this.TAG,t,e)}},{key:\"_containsAccount\",value:function(e){return this.accountProfileMap.has(e)}},{key:\"_getProfileFromMap\",value:function(e){return this.accountProfileMap.get(e)}},{key:\"_getCachedProfiles\",value:function(){var e=this._userModule.getStorageModule().getItem(this.TAG);return Xu(e)?[]:e}},{key:\"onConversationsProfileUpdated\",value:function(e){for(var t,n,o,r=[],a=0,s=e.length;a<s;a++)n=(t=e[a]).userID,this._userModule.isMyFriend(n)||(this._containsAccount(n)?(o=this._getProfileFromMap(n),Eu(o,t)>0&&r.push(n)):r.push(t.userID));0!==r.length&&(Qi.info(\"\".concat(this._className,\".onConversationsProfileUpdated toAccountList:\").concat(r)),this.getUserProfile({userIDList:r}))}},{key:\"getNickAndAvatarByUserID\",value:function(e){if(this._containsAccount(e)){var t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:\"\",avatar:\"\"}}},{key:\"reset\",value:function(){this._flushMap(!0),this.accountProfileMap.clear()}}]),e}(),nv=function e(t){yn(this,e),Xu||(this.userID=t.userID||\"\",this.timeStamp=t.timeStamp||0)},ov=function(){function e(t){yn(this,e),this._userModule=t,this._className=\"BlacklistHandler\",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}return En(e,[{key:\"getLocalBlacklist\",value:function(){return Un(this._blacklistMap.keys())}},{key:\"getBlacklist\",value:function(){var e=this,t=\"\".concat(this._className,\".getBlacklist\"),n={fromAccount:this._userModule.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},o=new Dp(zg);return this._userModule.request({protocolName:Fl,requestData:n}).then((function(n){var r=n.data,a=r.blackListItem,s=r.currentSequence,i=Xu(a)?0:a.length;o.setNetworkType(e._userModule.getNetworkType()).setMessage(\"blackList count:\".concat(i)).end(),Qi.info(\"\".concat(t,\" ok\")),e.currentSequence=s,e._handleResponse(a,!0),e._userModule.emitOuterEvent(Wn.BLACKLIST_UPDATED,Un(e._blacklistMap.keys()))})).catch((function(n){return e._userModule.probeNetwork().then((function(e){var t=Pn(e,2),r=t[0],a=t[1];o.setError(n,r,a).end()})),Qi.error(\"\".concat(t,\" failed. error:\"),n),um(n)}))}},{key:\"addBlacklist\",value:function(e){var t=this,n=\"\".concat(this._className,\".addBlacklist\"),o=new Dp(Jg);if(!gu(e.userIDList))return o.setCode(lp.ADD_BLACKLIST_INVALID_PARAM).setMessage(dp.ADD_BLACKLIST_INVALID_PARAM).setNetworkType(this._userModule.getNetworkType()).end(),Qi.error(\"\".concat(n,\" options.userIDList 必需是数组\")),um({code:lp.ADD_BLACKLIST_INVALID_PARAM,message:dp.ADD_BLACKLIST_INVALID_PARAM});var r=this._userModule.getMyAccount();return 1===e.userIDList.length&&e.userIDList[0]===r?(o.setCode(lp.CANNOT_ADD_SELF_TO_BLACKLIST).setMessage(dp.CANNOT_ADD_SELF_TO_BLACKLIST).setNetworkType(this._userModule.getNetworkType()).end(),Qi.error(\"\".concat(n,\" 不能把自己拉黑\")),um({code:lp.CANNOT_ADD_SELF_TO_BLACKLIST,message:dp.CANNOT_ADD_SELF_TO_BLACKLIST})):(e.userIDList.includes(r)&&(e.userIDList=e.userIDList.filter((function(e){return e!==r})),Qi.warn(\"\".concat(n,\" 不能把自己拉黑，已过滤\"))),e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:ql,requestData:e}).then((function(r){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)).end(),Qi.info(\"\".concat(n,\" ok\")),t._handleResponse(r.resultItem,!0),Q_(Un(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)})))}},{key:\"_handleResponse\",value:function(e,t){if(!Xu(e))for(var n,o,r,a=0,s=e.length;a<s;a++)o=e[a].to,r=e[a].resultCode,(hu(r)||0===r)&&(t?((n=this._blacklistMap.has(o)?this._blacklistMap.get(o):new nv).userID=o,!Xu(e[a].addBlackTimeStamp)&&(n.timeStamp=e[a].addBlackTimeStamp),this._blacklistMap.set(o,n)):this._blacklistMap.has(o)&&(n=this._blacklistMap.get(o),this._blacklistMap.delete(o)));Qi.log(\"\".concat(this._className,\"._handleResponse total:\").concat(this._blacklistMap.size,\" bAdd:\").concat(t))}},{key:\"deleteBlacklist\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteBlacklist\"),o=new Dp(Xg);return gu(e.userIDList)?(e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:xl,requestData:e}).then((function(r){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)).end(),Qi.info(\"\".concat(n,\" ok\")),t._handleResponse(r.data.resultItem,!1),Q_(Un(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),um(e)}))):(o.setCode(lp.DEL_BLACKLIST_INVALID_PARAM).setMessage(dp.DEL_BLACKLIST_INVALID_PARAM).setNetworkType(this._userModule.getNetworkType()).end(),Qi.error(\"\".concat(n,\" options.userIDList 必需是数组\")),um({code:lp.DEL_BLACKLIST_INVALID_PARAM,message:dp.DEL_BLACKLIST_INVALID_PARAM}))}},{key:\"onAccountDeleted\",value:function(e){for(var t,n=[],o=0,r=e.length;o<r;o++)t=e[o],this._blacklistMap.has(t)&&(this._blacklistMap.delete(t),n.push(t));n.length>0&&(Qi.log(\"\".concat(this._className,\".onAccountDeleted count:\").concat(n.length,\" userIDList:\"),n),this._userModule.emitOuterEvent(Wn.BLACKLIST_UPDATED,Un(this._blacklistMap.keys())))}},{key:\"onAccountAdded\",value:function(e){for(var t,n=[],o=0,r=e.length;o<r;o++)t=e[o],this._blacklistMap.has(t)||(this._blacklistMap.set(t,new nv({userID:t})),n.push(t));n.length>0&&(Qi.log(\"\".concat(this._className,\".onAccountAdded count:\").concat(n.length,\" userIDList:\"),n),this._userModule.emitOuterEvent(Wn.BLACKLIST_UPDATED,Un(this._blacklistMap.keys())))}},{key:\"reset\",value:function(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}]),e}(),rv=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"UserModule\",o._profileHandler=new tv(Gn(o)),o._blacklistHandler=new ov(Gn(o)),o.getInnerEmitterInstance().on(Mm,o.onContextUpdated,Gn(o)),o}return En(n,[{key:\"onContextUpdated\",value:function(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}},{key:\"onProfileModified\",value:function(e){this._profileHandler.onProfileModified(e)}},{key:\"onRelationChainModified\",value:function(e){var t=e.dataList;if(!Xu(t)){var n=[];t.forEach((function(e){e.blackListDelAccount&&n.push.apply(n,Un(e.blackListDelAccount))})),n.length>0&&this._blacklistHandler.onAccountDeleted(n);var o=[];t.forEach((function(e){e.blackListAddAccount&&o.push.apply(o,Un(e.blackListAddAccount))})),o.length>0&&this._blacklistHandler.onAccountAdded(o)}}},{key:\"onConversationsProfileUpdated\",value:function(e){this._profileHandler.onConversationsProfileUpdated(e)}},{key:\"getMyAccount\",value:function(){return this.getMyUserID()}},{key:\"getMyProfile\",value:function(){return this._profileHandler.getMyProfile()}},{key:\"getStorageModule\",value:function(){return this.getModule(pl)}},{key:\"isMyFriend\",value:function(e){var t=this.getModule(ul);return!!t&&t.isMyFriend(e)}},{key:\"getUserProfile\",value:function(e){return this._profileHandler.getUserProfile(e)}},{key:\"updateMyProfile\",value:function(e){return this._profileHandler.updateMyProfile(e)}},{key:\"getNickAndAvatarByUserID\",value:function(e){return this._profileHandler.getNickAndAvatarByUserID(e)}},{key:\"getLocalBlacklist\",value:function(){var e=this._blacklistHandler.getLocalBlacklist();return im(e)}},{key:\"addBlacklist\",value:function(e){return this._blacklistHandler.addBlacklist(e)}},{key:\"deleteBlacklist\",value:function(e){return this._blacklistHandler.deleteBlacklist(e)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._profileHandler.reset(),this._blacklistHandler.reset()}}]),n}(Nl),av=function(){function e(t,n){yn(this,e),this._moduleManager=t,this._isLoggedIn=!1,this._SDKAppID=n.SDKAppID,this._userID=n.userID||\"\",this._userSig=n.userSig||\"\",this._version=\"2.18.0\",this._a2Key=\"\",this._tinyID=\"\",this._contentType=\"json\",this._unlimitedAVChatRoom=n.unlimitedAVChatRoom,this._scene=n.scene||\"\",this._oversea=n.oversea,this._instanceID=n.instanceID,this._statusInstanceID=0,this._isDevMode=n.devMode,this._proxyServer=n.proxyServer}return En(e,[{key:\"isLoggedIn\",value:function(){return this._isLoggedIn}},{key:\"isOversea\",value:function(){return this._oversea}},{key:\"isDevMode\",value:function(){return this._isDevMode}},{key:\"isSingaporeSite\",value:function(){return this._SDKAppID>=2e7&&this._SDKAppID<3e7}},{key:\"isKoreaSite\",value:function(){return this._SDKAppID>=3e7&&this._SDKAppID<4e7}},{key:\"isGermanySite\",value:function(){return this._SDKAppID>=4e7&&this._SDKAppID<5e7}},{key:\"isIndiaSite\",value:function(){return this._SDKAppID>=5e7&&this._SDKAppID<6e7}},{key:\"isUnlimitedAVChatRoom\",value:function(){return this._unlimitedAVChatRoom}},{key:\"getUserID\",value:function(){return this._userID}},{key:\"setUserID\",value:function(e){this._userID=e}},{key:\"setUserSig\",value:function(e){this._userSig=e}},{key:\"getUserSig\",value:function(){return this._userSig}},{key:\"getSDKAppID\",value:function(){return this._SDKAppID}},{key:\"getTinyID\",value:function(){return this._tinyID}},{key:\"setTinyID\",value:function(e){this._tinyID=e,this._isLoggedIn=!0}},{key:\"getScene\",value:function(){return this._isTUIKit()?\"tuikit\":this._scene}},{key:\"getInstanceID\",value:function(){return this._instanceID}},{key:\"getStatusInstanceID\",value:function(){return this._statusInstanceID}},{key:\"setStatusInstanceID\",value:function(e){this._statusInstanceID=e}},{key:\"getVersion\",value:function(){return this._version}},{key:\"getA2Key\",value:function(){return this._a2Key}},{key:\"setA2Key\",value:function(e){this._a2Key=e}},{key:\"getContentType\",value:function(){return this._contentType}},{key:\"getProxyServer\",value:function(){return this._proxyServer}},{key:\"_isTUIKit\",value:function(){var e=!1,t=!1,n=!1,o=!1,r=[];pi&&(r=Object.keys(hi)),gi&&(r=di?Object.keys(uni):Object.keys(window));for(var a=0,s=r.length;a<s;a++)if(r[a].toLowerCase().includes(\"uikit\")){e=!0;break}if(r=null,pi&&_u(getApp)){var i=getApp().globalData;pu(i)&&!0===i.isTUIKit&&(t=!0)}!0===this._moduleManager.getModule(pl).getStorageSync(\"TIM_\".concat(this._SDKAppID,\"_isTUIKit\"))&&(n=!0);var u=null;if(ai&&\"undefined\"==typeof uni&&__wxConfig&&(u=__wxConfig.pages),si&&\"undefined\"==typeof uni&&__qqConfig&&(u=__qqConfig.pages),gu(u)&&u.length>0){for(var c=0,l=u.length;c<l;c++)if(u[c].toLowerCase().includes(\"tui\")){o=!0;break}u=null}return e||t||n||o}},{key:\"reset\",value:function(){this._isLoggedIn=!1,this._userSig=\"\",this._a2Key=\"\",this._tinyID=\"\",this._statusInstanceID=0}}]),e}(),sv=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"SignModule\",o._helloInterval=120,o._lastLoginTs=0,o._lastWsHelloTs=0,Em.mixin(Gn(o)),o}return En(n,[{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}},{key:\"login\",value:function(e){if(this.isLoggedIn()){var t=\"您已经登录账号\".concat(e.userID,\"！如需切换账号登录，请先调用 logout 接口登出，再调用 login 接口登录。\");return Qi.warn(t),im({actionStatus:\"OK\",errorCode:0,errorInfo:t,repeatLogin:!0})}if(Date.now()-this._lastLoginTs<=15e3)return Qi.warn(\"您正在尝试登录账号\".concat(e.userID,\"！请勿重复登录。\")),um({code:lp.REPEAT_LOGIN,message:dp.REPEAT_LOGIN});Qi.log(\"\".concat(this._className,\".login userID:\").concat(e.userID));var n=this._checkLoginInfo(e);if(0!==n.code)return um(n);var o=this.getModule(dl),r=e.userID,a=e.userSig;return o.setUserID(r),o.setUserSig(a),this.getModule(Ml).updateProtocolConfig(),this._login()}},{key:\"_login\",value:function(){var e=this,t=this.getModule(dl),n=t.getScene(),o=new Dp(kp);return o.setMessage(\"\".concat(n)).setMoreMessage(\"identifier:\".concat(this.getMyUserID())),di?\"tuikit\"===n?o.setUIPlatform(4):o.setUIPlatform(3):pi?\"tuikit\"===n?o.setUIPlatform(12):o.setUIPlatform(11):gi&&(\"tuikit\"===n?o.setUIPlatform(14):o.setUIPlatform(13)),this._lastLoginTs=Date.now(),this.request({protocolName:Cl}).then((function(r){e._lastLoginTs=0;var a=Date.now(),s=null,i=r.data,u=i.a2Key,c=i.tinyID,l=i.helloInterval,d=i.instanceID,p=i.timeStamp;Qi.log(\"\".concat(e._className,\".login ok. scene:\").concat(n,\" helloInterval:\").concat(l,\" instanceID:\").concat(d,\" timeStamp:\").concat(p));var g=1e3*p,h=a-o.getStartTs(),f=g+parseInt(h/2)-a,_=o.getStartTs()+f;if(o.start(_),function(e,t){ji=t;var n=new Date;n.setTime(e),Qi.info(\"baseTime from server: \".concat(n,\" offset: \").concat(ji))}(g,f),!c)throw s=new rm({code:lp.NO_TINYID,message:dp.NO_TINYID}),o.setError(s,!0,e.getNetworkType()).end(),s;if(!u)throw s=new rm({code:lp.NO_A2KEY,message:dp.NO_A2KEY}),o.setError(s,!0,e.getNetworkType()).end(),s;return o.setNetworkType(e.getNetworkType()).setMoreMessage(\"helloInterval:\".concat(l,\" instanceID:\").concat(d,\" offset:\").concat(f)).end(),t.setA2Key(u),t.setTinyID(c),t.setStatusInstanceID(d),e.getModule(Ml).updateProtocolConfig(),e.emitInnerEvent(Mm),e._helloInterval=l,e.triggerReady(),e._fetchCloudControlConfig(),r})).catch((function(t){return e.probeNetwork().then((function(e){var n=Pn(e,2),r=n[0],a=n[1];o.setError(t,r,a).end(!0)})),e._moduleManager.setNotReadyReason(lp.LOGIN_FAILED),Qi.error(\"\".concat(e._className,\".login failed. error:\"),t),e._lastLoginTs=0,e._moduleManager.onLoginFailed(),um(t)}))}},{key:\"logout\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isLoggedIn())return um({code:lp.USER_NOT_LOGGED_IN,message:dp.USER_NOT_LOGGED_IN});var n=new Dp(Lp);return n.setNetworkType(this.getNetworkType()).setMessage(\"identifier:\".concat(this.getMyUserID())).end(!0),Qi.info(\"\".concat(this._className,\".logout type:\").concat(t)),0===t&&this._moduleManager.setNotReadyReason(lp.LOGGED_OUT),this.request({protocolName:kl,requestData:{type:t}}).then((function(){return e.resetReady(),im({})})).catch((function(t){return Qi.error(\"\".concat(e._className,\"._logout error:\"),t),e.resetReady(),im({})}))}},{key:\"_fetchCloudControlConfig\",value:function(){this.getModule(El).fetchConfig()}},{key:\"_hello\",value:function(){var e=this;this._lastWsHelloTs=Date.now(),this.request({protocolName:Ll}).catch((function(t){Qi.warn(\"\".concat(e._className,\"._hello error:\"),t)}))}},{key:\"getLastWsHelloTs\",value:function(){return this._lastWsHelloTs}},{key:\"_checkLoginInfo\",value:function(e){var t=0,n=\"\";return Xu(this.getModule(dl).getSDKAppID())?(t=lp.NO_SDKAPPID,n=dp.NO_SDKAPPID):Xu(e.userID)?(t=lp.NO_IDENTIFIER,n=dp.NO_IDENTIFIER):Xu(e.userSig)&&(t=lp.NO_USERSIG,n=dp.NO_USERSIG),{code:t,message:n}}},{key:\"onMultipleAccountKickedOut\",value:function(e){var t=this;new Dp(Rp).setNetworkType(this.getNetworkType()).setMessage(\"type:\".concat(Yn.KICKED_OUT_MULT_ACCOUNT,\" newInstanceInfo:\").concat(JSON.stringify(e))).end(!0),Qi.warn(\"\".concat(this._className,\".onMultipleAccountKickedOut userID:\").concat(this.getMyUserID(),\" newInstanceInfo:\"),e),this.logout(1).then((function(){t.emitOuterEvent(Wn.KICKED_OUT,{type:Yn.KICKED_OUT_MULT_ACCOUNT}),t._moduleManager.setNotReadyReason(lp.KICKED_OUT_MULT_ACCOUNT),t._moduleManager.reset()}))}},{key:\"onMultipleDeviceKickedOut\",value:function(e){var t=this;new Dp(Rp).setNetworkType(this.getNetworkType()).setMessage(\"type:\".concat(Yn.KICKED_OUT_MULT_DEVICE,\" newInstanceInfo:\").concat(JSON.stringify(e))).end(!0),Qi.warn(\"\".concat(this._className,\".onMultipleDeviceKickedOut userID:\").concat(this.getMyUserID(),\" newInstanceInfo:\"),e),this.logout(1).then((function(){t.emitOuterEvent(Wn.KICKED_OUT,{type:Yn.KICKED_OUT_MULT_DEVICE}),t._moduleManager.setNotReadyReason(lp.KICKED_OUT_MULT_DEVICE),t._moduleManager.reset()}))}},{key:\"onUserSigExpired\",value:function(){new Dp(Rp).setNetworkType(this.getNetworkType()).setMessage(Yn.KICKED_OUT_USERSIG_EXPIRED).end(!0),Qi.warn(\"\".concat(this._className,\".onUserSigExpired: userSig 签名过期被踢下线\")),0!==this.getModule(dl).getStatusInstanceID()&&(this.emitOuterEvent(Wn.KICKED_OUT,{type:Yn.KICKED_OUT_USERSIG_EXPIRED}),this._moduleManager.setNotReadyReason(lp.KICKED_OUT_USERSIG_EXPIRED),this._moduleManager.reset())}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0,this._lastWsHelloTs=0}}]),n}(Nl);function iv(){return null}ke({target:\"Object\",stat:!0,forced:!a,sham:!a},{defineProperty:C.f});var uv=function(){function e(t){yn(this,e),this._moduleManager=t,this._className=\"StorageModule\",this._storageQueue=new Map,this._errorTolerantHandle()}return En(e,[{key:\"_errorTolerantHandle\",value:function(){pi||!hu(window)&&!hu(window.localStorage)||(this.getItem=iv,this.setItem=iv,this.removeItem=iv,this.clear=iv)}},{key:\"onCheckTimer\",value:function(e){if(e%20==0){if(0===this._storageQueue.size)return;this._doFlush()}}},{key:\"_doFlush\",value:function(){try{var e,t=Bn(this._storageQueue);try{for(t.s();!(e=t.n()).done;){var n=Pn(e.value,2),o=n[0],r=n[1];this._setStorageSync(this._getKey(o),r)}}catch(a){t.e(a)}finally{t.f()}this._storageQueue.clear()}catch(zI){Qi.warn(\"\".concat(this._className,\"._doFlush error:\"),zI)}}},{key:\"_getPrefix\",value:function(){var e=this._moduleManager.getModule(dl);return\"TIM_\".concat(e.getSDKAppID(),\"_\").concat(e.getUserID(),\"_\")}},{key:\"_getKey\",value:function(e){return\"\".concat(this._getPrefix()).concat(e)}},{key:\"getItem\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;return this.getStorageSync(n)}catch(zI){return Qi.warn(\"\".concat(this._className,\".getItem error:\"),zI),{}}}},{key:\"setItem\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n){var r=o?this._getKey(e):e;this._setStorageSync(r,t)}else this._storageQueue.set(e,t)}},{key:\"clear\",value:function(){try{pi?hi.clearStorageSync():localStorage&&localStorage.clear()}catch(zI){Qi.warn(\"\".concat(this._className,\".clear error:\"),zI)}}},{key:\"removeItem\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;this._removeStorageSync(n)}catch(zI){Qi.warn(\"\".concat(this._className,\".removeItem error:\"),zI)}}},{key:\"getSize\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"b\";try{var o={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(o,\"leftSize\",{enumerable:!0,get:function(){return o.limitSize-o.size}}),pi&&(o.limitSize=1024*hi.getStorageInfoSync().limitSize),e)o.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(pi){var r=hi.getStorageInfoSync(),a=r.keys;a.forEach((function(e){o.size+=JSON.stringify(t.getStorageSync(e)).length+t._getKey(e).length}))}else if(localStorage)for(var s in localStorage)localStorage.hasOwnProperty(s)&&(o.size+=localStorage.getItem(s).length+s.length);return this._convertUnit(o)}catch(zI){Qi.warn(\"\".concat(this._className,\" error:\"),zI)}}},{key:\"_convertUnit\",value:function(e){var t={},n=e.unit;for(var o in t.unit=n,e)\"number\"==typeof e[o]&&(\"kb\"===n.toLowerCase()?t[o]=Math.round(e[o]/1024):\"mb\"===n.toLowerCase()?t[o]=Math.round(e[o]/1024/1024):t[o]=e[o]);return t}},{key:\"_setStorageSync\",value:function(e,t){pi?ci?my.setStorageSync({key:e,data:t}):hi.setStorageSync(e,t):localStorage&&localStorage.setItem(e,JSON.stringify(t))}},{key:\"getStorageSync\",value:function(e){return pi?ci?my.getStorageSync({key:e}).data:hi.getStorageSync(e):localStorage?JSON.parse(localStorage.getItem(e)):{}}},{key:\"_removeStorageSync\",value:function(e){pi?ci?my.removeStorageSync({key:e}):hi.removeStorageSync(e):localStorage&&localStorage.removeItem(e)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._doFlush()}}]),e}(),cv=function(){function e(t){yn(this,e),this._className=\"SSOLogBody\",this._report=[]}return En(e,[{key:\"pushIn\",value:function(e){Qi.debug(\"\".concat(this._className,\".pushIn\"),this._report.length,e),this._report.push(e)}},{key:\"backfill\",value:function(e){var t;gu(e)&&0!==e.length&&(Qi.debug(\"\".concat(this._className,\".backfill\"),this._report.length,e.length),(t=this._report).unshift.apply(t,Un(e)))}},{key:\"getLogsNumInMemory\",value:function(){return this._report.length}},{key:\"isEmpty\",value:function(){return 0===this._report.length}},{key:\"_reset\",value:function(){this._report.length=0,this._report=[]}},{key:\"getLogsInMemory\",value:function(){var e=this._report.slice();return this._reset(),e}}]),e}(),lv=function(e){var t=e.getModule(dl);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:Wi()}},dv=function(e){Dn(n,e);var t=wn(n);function n(e){var o;yn(this,n),(o=t.call(this,e))._className=\"EventStatModule\",o.TAG=\"im-ssolog-event\",o._reportBody=new cv,o.MIN_THRESHOLD=20,o.MAX_THRESHOLD=100,o.WAITING_TIME=6e4,o.REPORT_LEVEL=[4,5,6],o.REPORT_SDKAPPID_BLACKLIST=[],o.REPORT_TINYID_WHITELIST=[],o._lastReportTime=Date.now();var r=o.getInnerEmitterInstance();return r.on(Mm,o._onLoginSuccess,Gn(o)),r.on(ym,o._onCloudConfigUpdated,Gn(o)),o}return En(n,[{key:\"reportAtOnce\",value:function(){Qi.debug(\"\".concat(this._className,\".reportAtOnce\")),this._report()}},{key:\"_onLoginSuccess\",value:function(){var e=this,t=this.getModule(pl),n=t.getItem(this.TAG,!1);!Xu(n)&&_u(n.forEach)&&(Qi.log(\"\".concat(this._className,\"._onLoginSuccess get ssolog in storage, count:\").concat(n.length)),n.forEach((function(t){e._reportBody.pushIn(t)})),t.removeItem(this.TAG,!1))}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"evt_rpt_threshold\"),t=this.getCloudConfig(\"evt_rpt_waiting\"),n=this.getCloudConfig(\"evt_rpt_level\"),o=this.getCloudConfig(\"evt_rpt_sdkappid_bl\"),r=this.getCloudConfig(\"evt_rpt_tinyid_wl\");hu(e)||(this.MIN_THRESHOLD=Number(e)),hu(t)||(this.WAITING_TIME=Number(t)),hu(n)||(this.REPORT_LEVEL=n.split(\",\").map((function(e){return Number(e)}))),hu(o)||(this.REPORT_SDKAPPID_BLACKLIST=o.split(\",\").map((function(e){return Number(e)}))),hu(r)||(this.REPORT_TINYID_WHITELIST=r.split(\",\"))}},{key:\"pushIn\",value:function(e){e instanceof Dp&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:\"onCheckTimer\",value:function(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}},{key:\"_filterLogs\",value:function(e){var t=this,n=this.getModule(dl),o=n.getSDKAppID(),r=n.getTinyID();return $u(this.REPORT_SDKAPPID_BLACKLIST,o)&&!zu(this.REPORT_TINYID_WHITELIST,r)?[]:e.filter((function(e){return t.REPORT_LEVEL.includes(e.level)}))}},{key:\"_report\",value:function(){var e=this;if(!this._reportBody.isEmpty()){var t=this._reportBody.getLogsInMemory(),n=this._filterLogs(t);if(0!==n.length){var o={header:lv(this),event:n};this.request({protocolName:Xd,requestData:Sn({},o)}).then((function(){e._lastReportTime=Date.now()})).catch((function(n){Qi.warn(\"\".concat(e._className,\".report failed. networkType:\").concat(e.getNetworkType(),\" error:\"),n),e._reportBody.backfill(t),e._reportBody.getLogsNumInMemory()>e.MAX_THRESHOLD&&e._flushAtOnce()}))}else this._lastReportTime=Date.now()}}},{key:\"_flushAtOnce\",value:function(){var e=this.getModule(pl),t=e.getItem(this.TAG,!1),n=this._reportBody.getLogsInMemory();if(Xu(t))Qi.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var o=n.concat(t);o.length>this.MAX_THRESHOLD&&(o=o.slice(0,this.MAX_THRESHOLD)),Qi.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}]),n}(Nl),pv=\"none\",gv=\"online\",hv=function(){function e(t){yn(this,e),this._moduleManager=t,this._networkType=\"\",this._className=\"NetMonitorModule\",this.MAX_WAIT_TIME=3e3,this._mpNetworkStatusCallback=null,this._webOnlineCallback=null,this._webOfflineCallback=null}return En(e,[{key:\"start\",value:function(){var e=this;pi?(hi.getNetworkType({success:function(t){e._networkType=t.networkType,t.networkType===pv?Qi.warn(\"\".concat(e._className,\".start no network, please check!\")):Qi.info(\"\".concat(e._className,\".start networkType:\").concat(t.networkType))}}),this._mpNetworkStatusCallback=this._onNetworkStatusChange.bind(this),hi.onNetworkStatusChange(this._mpNetworkStatusCallback)):(this._networkType=gv,this._webOnlineCallback=this._onWebOnline.bind(this),this._webOfflineCallback=this._onWebOffline.bind(this),window&&(window.addEventListener(\"online\",this._webOnlineCallback),window.addEventListener(\"offline\",this._webOfflineCallback)))}},{key:\"_onWebOnline\",value:function(){this._onNetworkStatusChange({isConnected:!0,networkType:gv})}},{key:\"_onWebOffline\",value:function(){this._onNetworkStatusChange({isConnected:!1,networkType:pv})}},{key:\"_onNetworkStatusChange\",value:function(e){var t=e.isConnected,n=e.networkType,o=!1;t?(Qi.info(\"\".concat(this._className,\"._onNetworkStatusChange previousNetworkType:\").concat(this._networkType,\" currentNetworkType:\").concat(n)),this._networkType!==n&&(o=!0,this._moduleManager.getModule(yl).reConnect(!0))):this._networkType!==n&&(o=!0,Qi.warn(\"\".concat(this._className,\"._onNetworkStatusChange no network, please check!\")));o&&(new Dp(Fp).setMessage(\"isConnected:\".concat(t,\" previousNetworkType:\").concat(this._networkType,\" networkType:\").concat(n)).end(),this._networkType=n)}},{key:\"probe\",value:function(){var e=this;return new Promise((function(t,n){if(pi)hi.getNetworkType({success:function(n){e._networkType=n.networkType,n.networkType===pv?(Qi.warn(\"\".concat(e._className,\".probe no network, please check!\")),t([!1,n.networkType])):(Qi.info(\"\".concat(e._className,\".probe networkType:\").concat(n.networkType)),t([!0,n.networkType]))}});else if(window&&window.fetch)fetch(\"\".concat(Lu(),\"//web.sdk.qcloud.com/im/assets/speed.xml?random=\").concat(Math.random())).then((function(e){e.ok?t([!0,gv]):t([!1,pv])})).catch((function(e){t([!1,pv])}));else{var o=new XMLHttpRequest,r=setTimeout((function(){Qi.warn(\"\".concat(e._className,\".probe fetch timeout. Probably no network, please check!\")),o.abort(),e._networkType=pv,t([!1,pv])}),e.MAX_WAIT_TIME);o.onreadystatechange=function(){4===o.readyState&&(clearTimeout(r),200===o.status||304===o.status||514===o.status?(this._networkType=gv,t([!0,gv])):(Qi.warn(\"\".concat(this.className,\".probe fetch status:\").concat(o.status,\". Probably no network, please check!\")),this._networkType=pv,t([!1,pv])))},o.open(\"GET\",\"\".concat(Lu(),\"//web.sdk.qcloud.com/im/assets/speed.xml?random=\").concat(Math.random())),o.send()}}))}},{key:\"getNetworkType\",value:function(){return this._networkType}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),pi?null!==this._mpNetworkStatusCallback&&(hi.offNetworkStatusChange&&(li||ii?hi.offNetworkStatusChange(this._mpNetworkStatusCallback):hi.offNetworkStatusChange()),this._mpNetworkStatusCallback=null):window&&(null!==this._webOnlineCallback&&(window.removeEventListener(\"online\",this._webOnlineCallback),this._webOnlineCallback=null),null!==this._onWebOffline&&(window.removeEventListener(\"offline\",this._webOfflineCallback),this._webOfflineCallback=null))}}]),e}(),fv=t((function(e){var t=Object.prototype.hasOwnProperty,n=\"~\";function o(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,o,a,s){if(\"function\"!=typeof o)throw new TypeError(\"The listener must be a function\");var i=new r(o,a||e,s),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],i]:e._events[u].push(i):(e._events[u]=i,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function i(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),i.prototype.eventNames=function(){var e,o,r=[];if(0===this._eventsCount)return r;for(o in e=this._events)t.call(e,o)&&r.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},i.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,a=o.length,s=new Array(a);r<a;r++)s[r]=o[r].fn;return s},i.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},i.prototype.emit=function(e,t,o,r,a,s){var i=n?n+e:e;if(!this._events[i])return!1;var u,c,l=this._events[i],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,o),!0;case 4:return l.fn.call(l.context,t,o,r),!0;case 5:return l.fn.call(l.context,t,o,r,a),!0;case 6:return l.fn.call(l.context,t,o,r,a,s),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,g=l.length;for(c=0;c<g;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,o);break;case 4:l[c].fn.call(l[c].context,t,o,r);break;default:if(!u)for(p=1,u=new Array(d-1);p<d;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},i.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},i.prototype.removeListener=function(e,t,o,r){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var i=this._events[a];if(i.fn)i.fn!==t||r&&!i.once||o&&i.context!==o||s(this,a);else{for(var u=0,c=[],l=i.length;u<l;u++)(i[u].fn!==t||r&&!i[u].once||o&&i[u].context!==o)&&c.push(i[u]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=n,i.EventEmitter=i,e.exports=i})),_v=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"BigDataChannelModule\",o.FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},o._bdh_download_server=\"grouptalk.c2c.qq.com\",o._BDHBizID=10001,o._authKey=\"\",o._expireTime=0,o.getInnerEmitterInstance().on(Mm,o._getAuthKey,Gn(o)),o}return En(n,[{key:\"_getAuthKey\",value:function(){var e=this;this.request({protocolName:Gl}).then((function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))}))}},{key:\"_isFromOlderVersion\",value:function(e){return!(!e.content||2===e.content.downloadFlag)}},{key:\"parseElements\",value:function(e,t){if(!gu(e)||!t)return[];for(var n=[],o=null,r=0;r<e.length;r++)o=e[r],this._needParse(o)?n.push(this._parseElement(o,t)):n.push(e[r]);return n}},{key:\"_needParse\",value:function(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==Yn.MSG_AUDIO&&e.type!==Yn.MSG_FILE&&e.type!==Yn.MSG_VIDEO)}},{key:\"_parseElement\",value:function(e,t){switch(e.type){case Yn.MSG_AUDIO:return this._parseAudioElement(e,t);case Yn.MSG_FILE:return this._parseFileElement(e,t);case Yn.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:\"_parseAudioElement\",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:\"_parseFileElement\",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:\"_parseVideoElement\",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:\"_genAudioUrl\",value:function(e,t){if(\"\"===this._authKey)return Qi.warn(\"\".concat(this._className,\"._genAudioUrl no authKey!\")),\"\";var n=this.getModule(dl).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(n,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.SOUND,\"&openid=\").concat(t,\"&ver=0\")}},{key:\"_genFileUrl\",value:function(e,t,n){if(\"\"===this._authKey)return Qi.warn(\"\".concat(this._className,\"._genFileUrl no authKey!\")),\"\";n||(n=\"\".concat(Math.floor(1e5*Math.random()),\"-\").concat(Date.now()));var o=this.getModule(dl).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(o,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.FILE,\"&openid=\").concat(t,\"&ver=0&filename=\").concat(encodeURIComponent(n))}},{key:\"_genVideoUrl\",value:function(e,t){if(\"\"===this._authKey)return Qi.warn(\"\".concat(this._className,\"._genVideoUrl no authKey!\")),\"\";var n=this.getModule(dl).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(n,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.VIDEO,\"&openid=\").concat(t,\"&ver=0\")}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._authKey=\"\",this.expireTime=0}}]),n}(Nl),mv=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"UploadModule\",o.TIMUploadPlugin=null,o.timUploadPlugin=null,o.COSSDK=null,o._cosUploadMethod=null,o.expiredTimeLimit=600,o.appid=0,o.bucketName=\"\",o.ciUrl=\"\",o.directory=\"\",o.downloadUrl=\"\",o.uploadUrl=\"\",o.region=\"ap-shanghai\",o.cos=null,o.cosOptions={secretId:\"\",secretKey:\"\",sessionToken:\"\",expiredTime:0},o.uploadFileType=\"\",o.duration=900,o.tryCount=0,o.getInnerEmitterInstance().on(Mm,o._init,Gn(o)),o}return En(n,[{key:\"_init\",value:function(){var e=\"\".concat(this._className,\"._init\"),t=this.getModule(ml);if(this.TIMUploadPlugin=t.getPlugin(\"tim-upload-plugin\"),this.TIMUploadPlugin)this._initUploaderMethod();else{var n=pi?\"cos-wx-sdk\":\"cos-js-sdk\";this.COSSDK=t.getPlugin(n),this.COSSDK?(this._getAuthorizationKey(),Qi.warn(\"\".concat(e,\" v2.9.2起推荐使用 tim-upload-plugin 代替 \").concat(n,\"，上传更快更安全。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\"))):Qi.warn(\"\".concat(e,\" 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\"))}}},{key:\"_getAuthorizationKey\",value:function(){var e=this,t=new Dp(qp),n=Math.ceil(Date.now()/1e3);this.request({protocolName:$d,requestData:{duration:this.expiredTimeLimit}}).then((function(o){var r=o.data;Qi.log(\"\".concat(e._className,\"._getAuthorizationKey ok. data:\"),r);var a=r.expiredTime-n;t.setMessage(\"requestId:\".concat(r.requestId,\" requestTime:\").concat(n,\" expiredTime:\").concat(r.expiredTime,\" diff:\").concat(a,\"s\")).setNetworkType(e.getNetworkType()).end(),!pi&&r.region&&(e.region=r.region),e.appid=r.appid,e.bucketName=r.bucketName,e.ciUrl=r.ciUrl,e.directory=r.directory,e.downloadUrl=r.downloadUrl,e.uploadUrl=r.uploadUrl,e.cosOptions={secretId:r.secretId,secretKey:r.secretKey,sessionToken:r.sessionToken,expiredTime:r.expiredTime},Qi.log(\"\".concat(e._className,\"._getAuthorizationKey ok. region:\").concat(e.region,\" bucketName:\").concat(e.bucketName)),e._initUploaderMethod()})).catch((function(n){e.probeNetwork().then((function(e){var o=Pn(e,2),r=o[0],a=o[1];t.setError(n,r,a).end()})),Qi.warn(\"\".concat(e._className,\"._getAuthorizationKey failed. error:\"),n)}))}},{key:\"_getCosPreSigUrl\",value:function(e){var t=this,n=\"\".concat(this._className,\"._getCosPreSigUrl\"),o=Math.ceil(Date.now()/1e3),r=new Dp(xp);return this.request({protocolName:zd,requestData:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then((function(e){t.tryCount=0;var a=e.data||{},s=a.expiredTime-o;return Qi.log(\"\".concat(n,\" ok. data:\"),a),r.setMessage(\"requestId:\".concat(a.requestId,\" expiredTime:\").concat(a.expiredTime,\" diff:\").concat(s,\"s\")).setNetworkType(t.getNetworkType()).end(),a})).catch((function(o){return-1===o.code&&(o.code=lp.COS_GET_SIG_FAIL),t.probeNetwork().then((function(e){var t=Pn(e,2),n=t[0],a=t[1];r.setError(o,n,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),o),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,um({code:lp.COS_GET_SIG_FAIL,message:dp.COS_GET_SIG_FAIL}))}))}},{key:\"_initUploaderMethod\",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,n){e.timUploadPlugin.uploadFile(t,n)});this.appid&&(this.cos=pi?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=pi?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)})}},{key:\"onCheckTimer\",value:function(e){this.COSSDK&&(this.TIMUploadPlugin||this.isLoggedIn()&&e%60==0&&Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey())}},{key:\"_getAuthorization\",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:\"upload\",value:function(e){if(!0===e.getRelayFlag())return Promise.resolve();var t=this.getModule(Sl);switch(e.type){case Yn.MSG_IMAGE:return t.addTotalCount(vp),this._uploadImage(e);case Yn.MSG_FILE:return t.addTotalCount(vp),this._uploadFile(e);case Yn.MSG_AUDIO:return t.addTotalCount(vp),this._uploadAudio(e);case Yn.MSG_VIDEO:return t.addTotalCount(vp),this._uploadVideo(e);default:return Promise.resolve()}}},{key:\"_uploadImage\",value:function(e){var t=this.getModule(rl),n=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadImage({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),_u(o.onProgress))try{o.onProgress(e)}catch(t){return um({code:lp.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:dp.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(t){var o=t.location,r=t.fileType,a=t.fileSize,s=t.width,i=t.height,u=Ru(o);n.updateImageFormat(r);var c=Hu({originUrl:u,originWidth:s,originHeight:i,min:198}),l=Hu({originUrl:u,originWidth:s,originHeight:i,min:720});return n.updateImageInfoArray([{size:a,url:u,width:s,height:i},Sn({},l),Sn({},c)]),e}))}},{key:\"_uploadFile\",value:function(e){var t=this.getModule(rl),n=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadFile({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),_u(o.onProgress))try{o.onProgress(e)}catch(t){return um({code:lp.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:dp.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(t){var o=t.location,r=Ru(o);return n.updateFileUrl(r),e}))}},{key:\"_uploadAudio\",value:function(e){var t=this.getModule(rl),n=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadAudio({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),_u(o.onProgress))try{o.onProgress(e)}catch(t){return um({code:lp.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:dp.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(t){var o=t.location,r=Ru(o);return n.updateAudioUrl(r),e}))}},{key:\"_uploadVideo\",value:function(e){var t=this.getModule(rl),n=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadVideo({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),_u(o.onProgress))try{o.onProgress(e)}catch(t){return um({code:lp.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:dp.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(t){var o=t.location,r=t.snapshotInfo,a=Ru(o);return n.updateVideoUrl(a),Xu(r)||n.updateSnapshotInfo(r),e}))}},{key:\"doUploadImage\",value:function(e){if(!e.file)return um({code:lp.MESSAGE_IMAGE_SELECT_FILE_FIRST,message:dp.MESSAGE_IMAGE_SELECT_FILE_FIRST});var t=this._checkImageType(e.file);if(!0!==t)return t;var n=this._checkImageSize(e.file);if(!0!==n)return n;var o=null;return this._setUploadFileType(Sm),this.uploadByCOS(e).then((function(e){return o=e,Vu(\"https://\".concat(e.location))})).then((function(e){return o.width=e.width,o.height=e.height,Promise.resolve(o)}))}},{key:\"_checkImageType\",value:function(e){var t=\"\";return t=pi?e.url.slice(e.url.lastIndexOf(\".\")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(\".\")+1),Tm.indexOf(t.toLowerCase())>=0||um({code:lp.MESSAGE_IMAGE_TYPES_LIMIT,message:dp.MESSAGE_IMAGE_TYPES_LIMIT})}},{key:\"_checkImageSize\",value:function(e){var t=0;return 0===(t=pi?e.size:e.files[0].size)?um({code:lp.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(dp.MESSAGE_FILE_IS_EMPTY)}):t<20971520||um({code:lp.MESSAGE_IMAGE_SIZE_LIMIT,message:\"\".concat(dp.MESSAGE_IMAGE_SIZE_LIMIT)})}},{key:\"doUploadFile\",value:function(e){var t=null;return e.file?e.file.files[0].size>104857600?um(t={code:lp.MESSAGE_FILE_SIZE_LIMIT,message:dp.MESSAGE_FILE_SIZE_LIMIT}):0===e.file.files[0].size?(t={code:lp.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(dp.MESSAGE_FILE_IS_EMPTY)},um(t)):(this._setUploadFileType(Cm),this.uploadByCOS(e)):um(t={code:lp.MESSAGE_FILE_SELECT_FILE_FIRST,message:dp.MESSAGE_FILE_SELECT_FILE_FIRST})}},{key:\"doUploadVideo\",value:function(e){return e.file.videoFile.size>104857600?um({code:lp.MESSAGE_VIDEO_SIZE_LIMIT,message:\"\".concat(dp.MESSAGE_VIDEO_SIZE_LIMIT)}):0===e.file.videoFile.size?um({code:lp.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(dp.MESSAGE_FILE_IS_EMPTY)}):-1===Am.indexOf(e.file.videoFile.type)?um({code:lp.MESSAGE_VIDEO_TYPES_LIMIT,message:\"\".concat(dp.MESSAGE_VIDEO_TYPES_LIMIT)}):(this._setUploadFileType(Dm),pi?this.handleVideoUpload({file:e.file.videoFile,onProgress:e.onProgress}):gi?this.handleVideoUpload(e):void 0)}},{key:\"handleVideoUpload\",value:function(e){var t=this;return new Promise((function(n,o){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){o(new rm({code:lp.MESSAGE_VIDEO_UPLOAD_FAIL,message:dp.MESSAGE_VIDEO_UPLOAD_FAIL}))}))}))}))}},{key:\"doUploadAudio\",value:function(e){return e.file?e.file.size>20971520?um(new rm({code:lp.MESSAGE_AUDIO_SIZE_LIMIT,message:\"\".concat(dp.MESSAGE_AUDIO_SIZE_LIMIT)})):0===e.file.size?um(new rm({code:lp.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(dp.MESSAGE_FILE_IS_EMPTY)})):(this._setUploadFileType(Nm),this.uploadByCOS(e)):um(new rm({code:lp.MESSAGE_AUDIO_UPLOAD_FAIL,message:dp.MESSAGE_AUDIO_UPLOAD_FAIL}))}},{key:\"uploadByCOS\",value:function(e){var t=this,n=\"\".concat(this._className,\".uploadByCOS\");if(!_u(this._cosUploadMethod))return Qi.warn(\"\".concat(n,\" 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\")),um({code:lp.COS_UNDETECTED,message:dp.COS_UNDETECTED});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var o=new Dp(Kp),r=Date.now(),a=this._getFile(e);return new Promise((function(s,i){var u=pi?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),c=t;t._cosUploadMethod(u,(function(e,u){var l=Object.create(null);if(u){if(e||gu(u.files)&&u.files[0].error){var d=new rm({code:lp.MESSAGE_FILE_UPLOAD_FAIL,message:dp.MESSAGE_FILE_UPLOAD_FAIL});return o.setError(d,!0,t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" failed. error:\"),u.files[0].error),403===u.files[0].error.statusCode&&(Qi.warn(\"\".concat(n,\" failed. cos AccessKeyId was invalid, regain auth key!\")),t._getAuthorizationKey()),void i(d)}l.fileName=a.name,l.fileSize=a.size,l.fileType=a.type.slice(a.type.indexOf(\"/\")+1).toLowerCase(),l.location=pi?u.Location:u.files[0].data.Location;var p=Date.now()-r,g=c._formatFileSize(a.size),h=c._formatSpeed(1e3*a.size/p),f=\"size:\".concat(g,\" time:\").concat(p,\"ms speed:\").concat(h);Qi.log(\"\".concat(n,\" success. name:\").concat(a.name,\" \").concat(f)),s(l);var _=t.getModule(Sl);return _.addCost(vp,p),_.addFileSize(vp,a.size),void o.setNetworkType(t.getNetworkType()).setMessage(f).end()}var m=new rm({code:lp.MESSAGE_FILE_UPLOAD_FAIL,message:dp.MESSAGE_FILE_UPLOAD_FAIL});o.setError(m,!0,c.getNetworkType()).end(),Qi.warn(\"\".concat(n,\" failed. error:\"),e),403===e.statusCode&&(Qi.warn(\"\".concat(n,\" failed. cos AccessKeyId was invalid, regain auth key!\")),t._getAuthorizationKey()),i(m)}))}))}},{key:\"_uploadWithPreSigUrl\",value:function(e){var t=this,n=\"\".concat(this._className,\"._uploadWithPreSigUrl\"),o=this._getFile(e);return this._createCosOptionsPreSigUrl(e).then((function(e){return new Promise((function(r,a){var s=new Dp(Kp),i=e.requestSnapshotUrl,u=void 0===i?void 0:i,c=On(e,[\"requestSnapshotUrl\"]),l=Date.now();t._cosUploadMethod(c,(function(e,i){var c=Object.create(null);if(e||403===i.statusCode){var d=new rm({code:lp.MESSAGE_FILE_UPLOAD_FAIL,message:dp.MESSAGE_FILE_UPLOAD_FAIL});return s.setError(d,!0,t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" failed, error:\"),e),void a(d)}var p=i.data.location||\"\";0!==p.indexOf(\"https://\")&&0!==p.indexOf(\"http://\")||(p=p.split(\"//\")[1]),c.fileName=o.name,c.fileSize=o.size,c.fileType=o.type.slice(o.type.indexOf(\"/\")+1).toLowerCase(),c.location=p;var g=Date.now()-l,h=t._formatFileSize(o.size),f=t._formatSpeed(1e3*o.size/g),_=\"size:\".concat(h,\",time:\").concat(g,\"ms,speed:\").concat(f,\" res:\").concat(JSON.stringify(i.data));Qi.log(\"\".concat(n,\" success name:\").concat(o.name,\",\").concat(_)),s.setNetworkType(t.getNetworkType()).setMessage(_).end();var m=t.getModule(Sl);if(m.addCost(vp,g),m.addFileSize(vp,o.size),!Xu(u))return t._getSnapshotInfoByUrl(u).then((function(e){c.snapshotInfo=e,r(c)}));r(c)}))}))}))}},{key:\"_getFile\",value:function(e){var t=null;return pi?t=li&&gu(e.file.files)?e.file.files[0]:e.file:gi&&(t=e.file.files[0]),t}},{key:\"_formatFileSize\",value:function(e){return e<1024?e+\"B\":e<1048576?Math.floor(e/1024)+\"KB\":Math.floor(e/1048576)+\"MB\"}},{key:\"_formatSpeed\",value:function(e){return e<=1048576?Yu(e/1024,1)+\"KB/s\":Yu(e/1048576,1)+\"MB/s\"}},{key:\"_createCosOptionsWeb\",value:function(e){var t=e.file.files[0].name,n=t.slice(t.lastIndexOf(\".\")),o=this._genFileName(\"\".concat(Su(999999)).concat(n));return{files:[{Bucket:\"\".concat(this.bucketName,\"-\").concat(this.appid),Region:this.region,Key:\"\".concat(this.directory,\"/\").concat(o),Body:e.file.files[0]}],SliceSize:1048576,onProgress:function(t){if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Qi.warn(\"onProgress callback error:\",n)}},onFileFinish:function(e,t,n){}}}},{key:\"_createCosOptionsWXMiniApp\",value:function(e){var t=this._getFile(e),n=this._genFileName(t.name),o=t.url;return{Bucket:\"\".concat(this.bucketName,\"-\").concat(this.appid),Region:this.region,Key:\"\".concat(this.directory,\"/\").concat(n),FilePath:o,onProgress:function(t){if(Qi.log(JSON.stringify(t)),\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Qi.warn(\"onProgress callback error:\",n)}}}}},{key:\"_createCosOptionsPreSigUrl\",value:function(e){var t=this,n=\"\",o=\"\",r=0;if(pi){var a=this._getFile(e);n=this._genFileName(a.name),o=a.url,r=1}else{var s=e.file.files[0].name,i=s.slice(s.lastIndexOf(\".\"));n=this._genFileName(\"\".concat(Su(999999)).concat(i)),o=e.file.files[0],r=0}return this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:n,uploadMethod:r,duration:this.duration}).then((function(r){var a=r.uploadUrl,s=r.downloadUrl,i=r.requestSnapshotUrl,u=void 0===i?void 0:i;return{url:a,fileType:t.uploadFileType,fileName:n,resources:o,downloadUrl:s,requestSnapshotUrl:u,onProgress:function(t){if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Qi.warn(\"onProgress callback error:\",n),Qi.error(n)}}}}))}},{key:\"_genFileName\",value:function(e){return\"\".concat(Ku(),\"-\").concat(e)}},{key:\"_setUploadFileType\",value:function(e){this.uploadFileType=e}},{key:\"_getSnapshotInfoByUrl\",value:function(e){var t=this,n=new Dp(Vp);return this.request({protocolName:Jd,requestData:{platform:this.getPlatform(),coverName:this._genFileName(Su(99999)),requestSnapshotUrl:e}}).then((function(e){var t=(e.data||{}).snapshotUrl;return n.setMessage(\"snapshotUrl:\".concat(t)).end(),Xu(t)?{}:Vu(t).then((function(e){return{snapshotUrl:t,snapshotWidth:e.width,snapshotHeight:e.height}}))})).catch((function(e){return Qi.warn(\"\".concat(t._className,\"._getSnapshotInfoByUrl failed. error:\"),e),n.setCode(e.errorCode).setMessage(e.errorInfo).end(),{}}))}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\"))}}]),n}(Nl),vv=function(){function e(t){yn(this,e),this._className=\"MergerMessageHandler\",this._messageModule=t}return En(e,[{key:\"uploadMergerMessage\",value:function(e,t){var n=this;Qi.debug(\"\".concat(this._className,\".uploadMergerMessage message:\"),e,\"messageBytes:\".concat(t));var o=e.payload.messageList,r=o.length,a=new Dp(ng);return this._messageModule.request({protocolName:op,requestData:{messageList:o}}).then((function(e){Qi.debug(\"\".concat(n._className,\".uploadMergerMessage ok. response:\"),e.data);var o=e.data,s=o.pbDownloadKey,i=o.downloadKey,u={pbDownloadKey:s,downloadKey:i,messageNumber:r};return a.setNetworkType(n._messageModule.getNetworkType()).setMessage(\"\".concat(r,\"-\").concat(t,\"-\").concat(i)).end(),u})).catch((function(e){throw Qi.warn(\"\".concat(n._className,\".uploadMergerMessage failed. error:\"),e),n._messageModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),e}))}},{key:\"downloadMergerMessage\",value:function(e){var t=this;Qi.debug(\"\".concat(this._className,\".downloadMergerMessage message:\"),e);var n=e.payload.downloadKey,o=new Dp(og);return o.setMessage(\"downloadKey:\".concat(n)),this._messageModule.request({protocolName:rp,requestData:{downloadKey:n}}).then((function(n){if(Qi.debug(\"\".concat(t._className,\".downloadMergerMessage ok. response:\"),n.data),_u(e.clearElement)){var r=e.payload,a=(r.downloadKey,r.pbDownloadKey,r.messageList,On(r,[\"downloadKey\",\"pbDownloadKey\",\"messageList\"]));e.clearElement(),e.setElement({type:e.type,content:Sn({messageList:n.data.messageList},a)})}else{var s=[];n.data.messageList.forEach((function(e){if(!Xu(e)){var t=new $_(e);s.push(t)}})),e.payload.messageList=s,e.payload.downloadKey=\"\",e.payload.pbDownloadKey=\"\"}return o.setNetworkType(t._messageModule.getNetworkType()).end(),e})).catch((function(e){throw Qi.warn(\"\".concat(t._className,\".downloadMergerMessage failed. key:\").concat(n,\" error:\"),e),t._messageModule.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),e}))}},{key:\"createMergerMessagePack\",value:function(e,t,n){return e.conversationType===Yn.CONV_C2C?this._createC2CMergerMessagePack(e,t,n):this._createGroupMergerMessagePack(e,t,n)}},{key:\"_createC2CMergerMessagePack\",value:function(e,t,n){var o=null;t&&(t.offlinePushInfo&&(o=t.offlinePushInfo),!0===t.onlineUserOnly&&(o?o.disablePush=!0:o={disablePush:!0}));var r=\"\";lu(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var a=n.pbDownloadKey,s=n.downloadKey,i=n.messageNumber,u=e.payload,c=u.title,l=u.abstractList,d=u.compatibleText,p=this._messageModule.getModule(sl);return{protocolName:bl,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:a,downloadKey:s,title:c,abstractList:l,compatibleText:d,messageNumber:i}}],cloudCustomData:r,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:p&&p.isOnlineMessage(e,t)?0:void 0,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0}}}},{key:\"_createGroupMergerMessagePack\",value:function(e,t,n){var o=null;t&&t.offlinePushInfo&&(o=t.offlinePushInfo);var r=\"\";lu(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var a=n.pbDownloadKey,s=n.downloadKey,i=n.messageNumber,u=e.payload,c=u.title,l=u.abstractList,d=u.compatibleText,p=this._messageModule.getModule(il);return{protocolName:wl,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:a,downloadKey:s,title:c,abstractList:l,compatibleText:d,messageNumber:i}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:r,onlineOnlyFlag:p&&p.isOnlineMessage(e,t)?1:0,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0,clientTime:e.clientTime,needReadReceipt:!0!==e.needReadReceipt||p.isMessageFromOrToAVChatroom(e.to)?0:1}}}}]),e}(),Mv={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,OPEN_SERVICE_OVERLOAD_ERROR:60022,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MESSAGE_SEND_FAIL:2100,OVER_FREQUENCY_LIMIT:2996},yv=[lp.MESSAGE_ONPROGRESS_FUNCTION_ERROR,lp.MESSAGE_IMAGE_SELECT_FILE_FIRST,lp.MESSAGE_IMAGE_TYPES_LIMIT,lp.MESSAGE_FILE_IS_EMPTY,lp.MESSAGE_IMAGE_SIZE_LIMIT,lp.MESSAGE_FILE_SELECT_FILE_FIRST,lp.MESSAGE_FILE_SIZE_LIMIT,lp.MESSAGE_VIDEO_SIZE_LIMIT,lp.MESSAGE_VIDEO_TYPES_LIMIT,lp.MESSAGE_AUDIO_UPLOAD_FAIL,lp.MESSAGE_AUDIO_SIZE_LIMIT,lp.COS_UNDETECTED];var Iv=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"MessageModule\",o._messageOptionsMap=new Map,o._mergerMessageHandler=new vv(Gn(o)),o}return En(n,[{key:\"createTextMessage\",value:function(e){var t=e.to,n=e.payload.atUserList,o=void 0===n?[]:n;if(Pu({groupID:t})&&o.includes(Yn.MSG_AT_ALL))return um({code:lp.MESSAGE_AT_TYPE_INVALID,message:dp.MESSAGE_AT_TYPE_INVALID});var r=this.getMyUserID();e.currentUser=r,e.senderTinyID=this.getMyTinyID();var a=new X_(e),s=\"string\"==typeof e.payload?e.payload:e.payload.text,i=new Sh({text:s}),u=this._getNickAndAvatarByUserID(r);return a.setElement(i),a.setNickAndAvatar(u),a.setNameCard(this._getNameCardByGroupID(a)),a}},{key:\"createImageMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new X_(e);if(pi){var o=e.payload.file;if(uu(o))return void Qi.warn(\"小程序环境下调用 createImageMessage 接口时，payload.file 不支持传入 File 对象\");var r=o.tempFilePaths[0],a={url:r,name:r.slice(r.lastIndexOf(\"/\")+1),size:o.tempFiles&&o.tempFiles[0].size||1,type:r.slice(r.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=a}else if(gi)if(uu(e.payload.file)){var s=e.payload.file;e.payload.file={files:[s]}}else if(pu(e.payload.file)&&\"undefined\"!=typeof uni){var i=e.payload.file.tempFiles[0];e.payload.file={files:[i]}}var u=new R_({imageFormat:Zi.UNKNOWN,uuid:this._generateUUID(),file:e.payload.file}),c=this._getNickAndAvatarByUserID(t);return n.setElement(u),n.setNickAndAvatar(c),n.setNameCard(this._getNameCardByGroupID(n)),this._messageOptionsMap.set(n.clientSequence,e),n}},{key:\"createAudioMessage\",value:function(e){if(pi){var t=e.payload.file;if(pi){var n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\"/\")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=n}var o=this.getMyUserID();e.currentUser=o,e.senderTinyID=this.getMyTinyID();var r=new X_(e),a=new G_({second:Math.floor(t.duration/1e3),size:t.fileSize,url:t.tempFilePath,uuid:this._generateUUID()}),s=this._getNickAndAvatarByUserID(o);return r.setElement(a),r.setNickAndAvatar(s),r.setNameCard(this._getNameCardByGroupID(r)),this._messageOptionsMap.set(r.clientSequence,e),r}Qi.warn(\"createAudioMessage 目前只支持小程序环境下发语音消息\")}},{key:\"createVideoMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID(),e.payload.file.thumbUrl=\"https://web.sdk.qcloud.com/im/assets/images/transparent.png\",e.payload.file.thumbSize=1668;var n={};if(pi){if(ci)return void Qi.warn(\"createVideoMessage 不支持在支付宝小程序环境下使用\");if(uu(e.payload.file))return void Qi.warn(\"小程序环境下调用 createVideoMessage 接口时，payload.file 不支持传入 File 对象\");var o=e.payload.file;n.url=o.tempFilePath,n.name=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(\"/\")+1),n.size=o.size,n.second=o.duration,n.type=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()}else if(gi){if(uu(e.payload.file)){var r=e.payload.file;e.payload.file.files=[r]}else if(pu(e.payload.file)&&\"undefined\"!=typeof uni){var a=e.payload.file.tempFile;e.payload.file.files=[a]}var s=e.payload.file;n.url=window.URL.createObjectURL(s.files[0]),n.name=s.files[0].name,n.size=s.files[0].size,n.second=s.files[0].duration||0,n.type=s.files[0].type.split(\"/\")[1]}e.payload.file.videoFile=n;var i=new X_(e),u=new W_({videoFormat:n.type,videoSecond:Yu(n.second,0),videoSize:n.size,remoteVideoUrl:\"\",videoUrl:n.url,videoUUID:this._generateUUID(),thumbUUID:this._generateUUID(),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(\".\")+1).toLowerCase()}),c=this._getNickAndAvatarByUserID(t);return i.setElement(u),i.setNickAndAvatar(c),i.setNameCard(this._getNameCardByGroupID(i)),this._messageOptionsMap.set(i.clientSequence,e),i}},{key:\"createCustomMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new X_(e),o=new j_({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"createFaceMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new X_(e),o=new O_(e.payload),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"createMergerMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=this._getNickAndAvatarByUserID(t),o=new X_(e),r=new z_(e.payload);return o.setElement(r),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),o.setRelayFlag(!0),o}},{key:\"createForwardMessage\",value:function(e){var t=e.to,n=e.conversationType,o=e.priority,r=e.payload,a=e.needReadReceipt,s=this.getMyUserID(),i=this._getNickAndAvatarByUserID(s);if(r.type===Yn.MSG_GRP_TIP)return um(new rm({code:lp.MESSAGE_FORWARD_TYPE_INVALID,message:dp.MESSAGE_FORWARD_TYPE_INVALID}));var u={to:t,conversationType:n,conversationID:\"\".concat(n).concat(t),priority:o,isPlaceMessage:0,status:qc.UNSEND,currentUser:s,senderTinyID:this.getMyTinyID(),cloudCustomData:e.cloudCustomData||r.cloudCustomData||\"\",needReadReceipt:a},c=new X_(u);return c.setElement(r.getElements()[0]),c.setNickAndAvatar(i),c.setNameCard(this._getNameCardByGroupID(r)),c.setRelayFlag(!0),c}},{key:\"downloadMergerMessage\",value:function(e){return this._mergerMessageHandler.downloadMergerMessage(e)}},{key:\"createFileMessage\",value:function(e){if(!pi||li){if(gi||li)if(uu(e.payload.file)){var t=e.payload.file;e.payload.file={files:[t]}}else if(pu(e.payload.file)&&\"undefined\"!=typeof uni){var n=e.payload.file,o=n.tempFiles,r=n.files,a=null;gu(o)?a=o[0]:gu(r)&&(a=r[0]),e.payload.file={files:[a]}}var s=this.getMyUserID();e.currentUser=s,e.senderTinyID=this.getMyTinyID();var i=new X_(e),u=new H_({uuid:this._generateUUID(),file:e.payload.file}),c=this._getNickAndAvatarByUserID(s);return i.setElement(u),i.setNickAndAvatar(c),i.setNameCard(this._getNameCardByGroupID(i)),this._messageOptionsMap.set(i.clientSequence,e),i}Qi.warn(\"小程序目前不支持选择文件， createFileMessage 接口不可用！\")}},{key:\"createLocationMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new X_(e),o=new Y_(e.payload),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"_onCannotFindModule\",value:function(){return um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"sendMessageInstance\",value:function(e,t){var n,o=this,r=null;switch(e.conversationType){case Yn.CONV_C2C:if(!(r=this.getModule(sl)))return this._onCannotFindModule();break;case Yn.CONV_GROUP:if(!(r=this.getModule(il)))return this._onCannotFindModule();if(Pu({groupID:e.to})&&!hu(t)&&!hu(t.messageControlInfo))return um({code:lp.MESSAGE_CONTROL_INFO_FAIL,message:dp.MESSAGE_CONTROL_INFO_FAIL});break;default:return um({code:lp.MESSAGE_SEND_INVALID_CONVERSATION_TYPE,message:dp.MESSAGE_SEND_INVALID_CONVERSATION_TYPE})}var a=this.getModule(_l),s=this.getModule(il);return a.upload(e).then((function(){o._getSendMessageSpecifiedKey(e)===mp&&o.getModule(Sl).addSuccessCount(vp);return s.guardForAVChatRoom(e).then((function(){if(!e.isSendable())return um({code:lp.MESSAGE_FILE_URL_IS_EMPTY,message:dp.MESSAGE_FILE_URL_IS_EMPTY});o._addSendMessageTotalCount(e),n=Date.now();var a=function(e){var t=\"utf-8\";gi&&document&&(t=document.charset.toLowerCase());var n,o,r=0;if(o=e.length,\"utf-8\"===t||\"utf8\"===t)for(var a=0;a<o;a++)(n=e.codePointAt(a))<=127?r+=1:n<=2047?r+=2:n<=65535?r+=3:(r+=4,a++);else if(\"utf-16\"===t||\"utf16\"===t)for(var s=0;s<o;s++)(n=e.codePointAt(s))<=65535?r+=2:(r+=4,s++);else r=e.replace(/[^\\\\x00-\\\\xff]/g,\"aa\").length;return r}(JSON.stringify(e));return e.type===Yn.MSG_MERGER&&a>7e3?o._mergerMessageHandler.uploadMergerMessage(e,a).then((function(n){var r=o._mergerMessageHandler.createMergerMessagePack(e,t,n);return o.request(r)})):(o.getModule(ll).setMessageRandom(e),e.conversationType===Yn.CONV_C2C||e.conversationType===Yn.CONV_GROUP?r.sendMessage(e,t):void 0)})).then((function(a){var s=a.data,i=s.time,u=s.sequence,c=s.readReceiptCode;cu(c)&&0!==c&&(new Dp(Hp).setMessage(\"from:\".concat(e.from,\" to:\").concat(e.to,\" sequence:\").concat(u,\" readReceiptCode:\").concat(c)).end(),Qi.warn(\"\".concat(o._className,\".sendMessageInstance readReceiptCode:\").concat(c,\" message:\").concat(om[c])));o._addSendMessageSuccessCount(e,n),o._messageOptionsMap.delete(e.clientSequence);var l=o.getModule(ll);e.status=qc.SUCCESS,e.time=i;var d=!1;if(e.conversationType===Yn.CONV_GROUP)e.sequence=u;else if(e.conversationType===Yn.CONV_C2C){var p=l.getLatestMessageSentByMe(e.conversationID);if(p){var g=p.nick,h=p.avatar;g===e.nick&&h===e.avatar||(d=!0)}}if(l.appendToMessageList(e),d&&l.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),r.isOnlineMessage(e,t))e._onlineOnlyFlag=!0;else{var f=e;pu(t)&&pu(t.messageControlInfo)&&(!0===t.messageControlInfo.excludedFromLastMessage&&(e._isExcludedFromLastMessage=!0,f=\"\"),!0===t.messageControlInfo.excludedFromUnreadCount&&(e._isExcludedFromUnreadCount=!0)),l.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:e.conversationType,subType:e.conversationSubType,lastMessage:f}]})}return e.getRelayFlag()||\"TIMImageElem\"!==e.type||ju(e.payload.imageInfoArray),Q_({message:e})}))})).catch((function(t){return o._onSendMessageFailed(e,t)}))}},{key:\"_onSendMessageFailed\",value:function(e,t){e.status=qc.FAIL,this.getModule(ll).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new Dp(Bp);return n.setMessage(\"tjg_id:\".concat(this.generateTjgID(e),\" type:\").concat(e.type,\" from:\").concat(e.from,\" to:\").concat(e.to)),this.probeNetwork().then((function(e){var o=Pn(e,2),r=o[0],a=o[1];n.setError(t,r,a).end()})),Qi.error(\"\".concat(this._className,\"._onSendMessageFailed error:\"),t),um(new rm({code:t&&t.code?t.code:lp.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:dp.MESSAGE_SEND_FAIL,data:{message:e}}))}},{key:\"_getSendMessageSpecifiedKey\",value:function(e){if([Yn.MSG_IMAGE,Yn.MSG_AUDIO,Yn.MSG_VIDEO,Yn.MSG_FILE].includes(e.type))return mp;if(e.conversationType===Yn.CONV_C2C)return hp;if(e.conversationType===Yn.CONV_GROUP){var t=this.getModule(il).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return wu(n)?_p:fp}}},{key:\"_addSendMessageTotalCount\",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(Sl).addTotalCount(t)}},{key:\"_addSendMessageSuccessCount\",value:function(e,t){var n=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){var r=this.getModule(Sl);r.addSuccessCount(o),r.addCost(o,n)}}},{key:\"_addSendMessageFailCountOnUser\",value:function(e,t){var n,o,r=t.code,a=void 0===r?-1:r,s=this.getModule(Sl),i=this._getSendMessageSpecifiedKey(e);i===mp&&(n=a,o=!1,yv.includes(n)&&(o=!0),o)?s.addFailedCountOfUserSide(vp):function(e){var t=!1;return Object.values(Mv).includes(e)&&(t=!0),(e>=120001&&e<=13e4||e>=10100&&e<=10200)&&(t=!0),t}(a)&&i&&s.addFailedCountOfUserSide(i)}},{key:\"resendMessage\",value:function(e){return e.isResend=!0,e.status=qc.UNSEND,e.random=Su(),e.clientTime=$i(),e.generateMessageID(),this.sendMessageInstance(e)}},{key:\"revokeMessage\",value:function(e){var t=this,n=null;if(e.conversationType===Yn.CONV_C2C){if(!(n=this.getModule(sl)))return this._onCannotFindModule()}else if(e.conversationType===Yn.CONV_GROUP&&!(n=this.getModule(il)))return this._onCannotFindModule();var o=new Dp(Jp);return o.setMessage(\"tjg_id:\".concat(this.generateTjgID(e),\" type:\").concat(e.type,\" from:\").concat(e.from,\" to:\").concat(e.to)),n.revokeMessage(e).then((function(n){var r=n.data.recallRetList;if(!Xu(r)&&0!==r[0].retCode){var a=new rm({code:r[0].retCode,message:om[r[0].retCode]||dp.MESSAGE_REVOKE_FAIL,data:{message:e}});return o.setCode(a.code).setMoreMessage(a.message).end(),um(a)}return Qi.info(\"\".concat(t._className,\".revokeMessage ok. ID:\").concat(e.ID)),e.isRevoked=!0,o.end(),t.getModule(ll).onMessageRevoked([e]),Q_({message:e})})).catch((function(n){t.probeNetwork().then((function(e){var t=Pn(e,2),r=t[0],a=t[1];o.setError(n,r,a).end()}));var r=new rm({code:n&&n.code?n.code:lp.MESSAGE_REVOKE_FAIL,message:n&&n.message?n.message:dp.MESSAGE_REVOKE_FAIL,data:{message:e}});return Qi.warn(\"\".concat(t._className,\".revokeMessage failed. error:\"),n),um(r)}))}},{key:\"deleteMessage\",value:function(e){var t=this,n=null,o=e[0],r=o.conversationID,a=\"\",s=[],i=[];if(o.conversationType===Yn.CONV_C2C?(n=this.getModule(sl),a=r.replace(Yn.CONV_C2C,\"\"),e.forEach((function(e){e&&e.status===qc.SUCCESS&&e.conversationID===r&&(e._onlineOnlyFlag||s.push(\"\".concat(e.sequence,\"_\").concat(e.random,\"_\").concat(e.time)),i.push(e))}))):o.conversationType===Yn.CONV_GROUP&&(n=this.getModule(il),a=r.replace(Yn.CONV_GROUP,\"\"),e.forEach((function(e){e&&e.status===qc.SUCCESS&&e.conversationID===r&&(e._onlineOnlyFlag||s.push(\"\".concat(e.sequence)),i.push(e))}))),!n)return this._onCannotFindModule();if(0===s.length)return this._onMessageDeleted(i);s.length>30&&(s=s.slice(0,30),i=i.slice(0,30));var u=new Dp(Xp);return u.setMessage(\"to:\".concat(a,\" count:\").concat(s.length)),n.deleteMessage({to:a,keyList:s}).then((function(e){return u.end(),Qi.info(\"\".concat(t._className,\".deleteMessage ok\")),t._onMessageDeleted(i)})).catch((function(e){t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Qi.warn(\"\".concat(t._className,\".deleteMessage failed. error:\"),e);var n=new rm({code:e&&e.code?e.code:lp.MESSAGE_DELETE_FAIL,message:e&&e.message?e.message:dp.MESSAGE_DELETE_FAIL});return um(n)}))}},{key:\"_onMessageDeleted\",value:function(e){return this.getModule(ll).onMessageDeleted(e),im({messageList:e})}},{key:\"_generateUUID\",value:function(){var e=this.getModule(dl);return\"\".concat(e.getSDKAppID(),\"-\").concat(e.getUserID(),\"-\").concat(function(){for(var e=\"\",t=32;t>0;--t)e+=Du[Math.floor(Math.random()*Nu)];return e}())}},{key:\"getMessageOption\",value:function(e){return this._messageOptionsMap.get(e)}},{key:\"_getNickAndAvatarByUserID\",value:function(e){return this.getModule(al).getNickAndAvatarByUserID(e)}},{key:\"_getNameCardByGroupID\",value:function(e){if(e.conversationType===Yn.CONV_GROUP){var t=this.getModule(il);if(t)return t.getMyNameCardByGroupID(e.to)}return\"\"}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._messageOptionsMap.clear()}}]),n}(Nl),Ev=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"PluginModule\",o.plugins={},o}return En(n,[{key:\"registerPlugin\",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.plugins[n]=e[n]})),new Dp(Op).setMessage(\"key=\".concat(Object.keys(e))).end()}},{key:\"getPlugin\",value:function(e){return this.plugins[e]}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\"))}}]),n}(Nl),Tv=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"SyncUnreadMessageModule\",o._cookie=\"\",o._onlineSyncFlag=!1,o.getInnerEmitterInstance().on(Mm,o._onLoginSuccess,Gn(o)),o}return En(n,[{key:\"_onLoginSuccess\",value:function(e){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:\"_startSync\",value:function(e){var t=this,n=e.cookie,o=e.syncFlag,r=e.isOnlineSync;Qi.log(\"\".concat(this._className,\"._startSync cookie:\").concat(n,\" syncFlag:\").concat(o,\" isOnlineSync:\").concat(r)),this.request({protocolName:Ol,requestData:{cookie:n,syncFlag:o,isOnlineSync:r}}).then((function(e){var n=e.data,o=n.cookie,r=n.syncFlag,a=n.eventArray,s=n.messageList,i=n.C2CRemainingUnreadList,u=n.C2CPairUnreadList;if(t._cookie=o,Xu(o));else if(0===r||1===r){if(a)t.getModule(Ml).onMessage({head:{},body:{eventArray:a,isInstantMessage:t._onlineSyncFlag,isSyncingEnded:!1}});t.getModule(sl).onNewC2CMessage({dataList:s,isInstantMessage:!1,C2CRemainingUnreadList:i,C2CPairUnreadList:u}),t._startSync({cookie:o,syncFlag:r,isOnlineSync:0})}else if(2===r){if(a)t.getModule(Ml).onMessage({head:{},body:{eventArray:a,isInstantMessage:t._onlineSyncFlag,isSyncingEnded:!0}});t.getModule(sl).onNewC2CMessage({dataList:s,isInstantMessage:t._onlineSyncFlag,C2CRemainingUnreadList:i,C2CPairUnreadList:u})}})).catch((function(e){Qi.error(\"\".concat(t._className,\"._startSync failed. error:\"),e)}))}},{key:\"startOnlineSync\",value:function(){Qi.log(\"\".concat(this._className,\".startOnlineSync\")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}},{key:\"startSyncOnReconnected\",value:function(){Qi.log(\"\".concat(this._className,\".startSyncOnReconnected.\")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._onlineSyncFlag=!1,this._cookie=\"\"}}]),n}(Nl),Av={request:{toAccount:\"To_Account\",fromAccount:\"From_Account\",to:\"To_Account\",from:\"From_Account\",groupID:\"GroupId\",groupAtUserID:\"GroupAt_Account\",extension:\"Ext\",data:\"Data\",description:\"Desc\",elements:\"MsgBody\",sizeType:\"Type\",downloadFlag:\"Download_Flag\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",videoUrl:\"\",imageUrl:\"URL\",fileUrl:\"Url\",uuid:\"UUID\",priority:\"MsgPriority\",receiverUserID:\"To_Account\",receiverGroupID:\"GroupId\",messageSender:\"SenderId\",messageReceiver:\"ReceiverId\",nick:\"From_AccountNick\",avatar:\"From_AccountHeadurl\",messageNumber:\"MsgNum\",pbDownloadKey:\"PbMsgKey\",downloadKey:\"JsonMsgKey\",applicationType:\"PendencyType\",userIDList:\"To_Account\",groupNameList:\"GroupName\",userID:\"To_Account\",groupAttributeList:\"GroupAttr\",mainSequence:\"AttrMainSeq\",avChatRoomKey:\"BytesKey\",attributeControl:\"AttrControl\",sequence:\"seq\",messageControlInfo:\"SendMsgControl\",updateSequence:\"UpdateSeq\",clientTime:\"MsgClientTime\",sequenceList:\"MsgSeqList\"},response:{MsgPriority:\"priority\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\",Download_Flag:\"downloadFlag\",GroupId:\"groupID\",Member_Account:\"userID\",MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",MsgSeq:\"sequence\",MsgRandom:\"random\",MsgTime:\"time\",MsgTimeStamp:\"time\",MsgContent:\"content\",MsgBody:\"elements\",From_AccountNick:\"nick\",From_AccountHeadurl:\"avatar\",GroupWithdrawInfoArray:\"revokedInfos\",GroupReadInfoArray:\"groupMessageReadNotice\",LastReadMsgSeq:\"lastMessageSeq\",WithdrawC2cMsgNotify:\"c2cMessageRevokedNotify\",C2cWithdrawInfoArray:\"revokedInfos\",C2cReadedReceipt:\"c2cMessageReadReceipt\",ReadC2cMsgNotify:\"c2cMessageReadNotice\",LastReadTime:\"peerReadTime\",MsgRand:\"random\",MsgType:\"type\",MsgShow:\"messageShow\",NextMsgSeq:\"nextMessageSeq\",FaceUrl:\"avatar\",ProfileDataMod:\"profileModify\",Profile_Account:\"userID\",ValueBytes:\"value\",ValueNum:\"value\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgFrom_AccountExtraInfo:\"messageFromAccountExtraInformation\",Operator_Account:\"operatorID\",OpType:\"operationType\",ReportType:\"operationType\",UserId:\"userID\",User_Account:\"userID\",List_Account:\"userIDList\",MsgOperatorMemberExtraInfo:\"operatorInfo\",MsgMemberExtraInfo:\"memberInfoList\",ImageUrl:\"avatar\",NickName:\"nick\",MsgGroupNewInfo:\"newGroupProfile\",MsgAppDefinedData:\"groupCustomField\",Owner_Account:\"ownerID\",GroupFaceUrl:\"avatar\",GroupIntroduction:\"introduction\",GroupNotification:\"notification\",GroupApplyJoinOption:\"joinOption\",MsgKey:\"messageKey\",GroupInfo:\"groupProfile\",ShutupTime:\"muteTime\",Desc:\"description\",Ext:\"extension\",GroupAt_Account:\"groupAtUserID\",MsgNum:\"messageNumber\",PbMsgKey:\"pbDownloadKey\",JsonMsgKey:\"downloadKey\",MsgModifiedFlag:\"isModified\",PendencyItem:\"applicationItem\",PendencyType:\"applicationType\",AddTime:\"time\",AddSource:\"source\",AddWording:\"wording\",ProfileImImage:\"avatar\",PendencyAdd:\"friendApplicationAdded\",FrienPencydDel_Account:\"friendApplicationDeletedUserIDList\",Peer_Account:\"userID\",GroupAttr:\"groupAttributeList\",GroupAttrAry:\"groupAttributeList\",AttrMainSeq:\"mainSequence\",seq:\"sequence\",GroupAttrOption:\"groupAttributeOption\",BytesChangedKeys:\"changedKeyList\",GroupAttrInfo:\"groupAttributeList\",GroupAttrSeq:\"mainSequence\",PushChangedAttrValFlag:\"hasChangedAttributeInfo\",SubKeySeq:\"sequence\",Val:\"value\",MsgGroupFromCardName:\"senderNameCard\",MsgGroupFromNickName:\"senderNick\",C2cNick:\"peerNick\",C2cImage:\"peerAvatar\",SendMsgControl:\"messageControlInfo\",NoLastMsg:\"excludedFromLastMessage\",NoUnread:\"excludedFromUnreadCount\",UpdateSeq:\"updateSequence\",MuteNotifications:\"muteFlag\",MsgClientTime:\"clientTime\",TinyId:\"tinyID\",GroupMsgReceiptList:\"readReceiptList\",ReadNum:\"readCount\",UnreadNum:\"unreadCount\"},ignoreKeyWord:[\"C2C\",\"ID\",\"USP\"]},Sv=Pt.trim;function Dv(e,t){if(\"string\"!=typeof e&&!Array.isArray(e))throw new TypeError(\"Expected the input to be `string | string[]`\");t=Object.assign({pascalCase:!1},t);var n;return 0===(e=Array.isArray(e)?e.map((function(e){return e.trim()})).filter((function(e){return e.length})).join(\"-\"):e.trim()).length?\"\":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=Nv(e)),e=e.replace(/^[_.\\\\- ]+/,\"\").toLowerCase().replace(/[_.\\\\- ]+(\\\\w|$)/g,(function(e,t){return t.toUpperCase()})).replace(/\\\\d+(\\\\w|$)/g,(function(e){return e.toUpperCase()})),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)}ke({target:\"String\",proto:!0,forced:function(e){return r((function(){return!!Rt[e]()||\"​᠎\"!=\"​᠎\"[e]()||Rt[e].name!==e}))}(\"trim\")},{trim:function(){return Sv(this)}});var Nv=function(e){for(var t=!1,n=!1,o=!1,r=0;r<e.length;r++){var a=e[r];t&&/[a-zA-Z]/.test(a)&&a.toUpperCase()===a?(e=e.slice(0,r)+\"-\"+e.slice(r),t=!1,o=n,n=!0,r++):n&&o&&/[a-zA-Z]/.test(a)&&a.toLowerCase()===a?(e=e.slice(0,r-1)+\"-\"+e.slice(r-1),o=n,n=!1,t=!0):(t=a.toLowerCase()===a&&a.toUpperCase()!==a,o=n,n=a.toUpperCase()===a&&a.toLowerCase()!==a)}return e};function Cv(e,t){var n=0;return function e(t,o){if(++n>100)return n--,t;if(gu(t)){var r=t.map((function(t){return du(t)?e(t,o):t}));return n--,r}if(du(t)){var a=(s=t,i=function(e,t){if(!Mu(t))return!1;if((r=t)!==Dv(r))for(var n=0;n<Av.ignoreKeyWord.length&&!t.includes(Av.ignoreKeyWord[n]);n++);var r;return hu(o[t])?function(e){return\"OPPOChannelID\"===e?e:e[0].toUpperCase()+Dv(e).slice(1)}(t):o[t]},u=Object.create(null),Object.keys(s).forEach((function(e){var t=i(s[e],e);t&&(u[t]=s[e])})),u);return a=xu(a,(function(t,n){return gu(t)||du(t)?e(t,o):t})),n--,a}var s,i,u}(e,t)}function kv(e,t){if(gu(e))return e.map((function(e){return du(e)?kv(e,t):e}));if(du(e)){var n=(o=e,r=function(e,n){return hu(t[n])?Dv(n):t[n]},a={},Object.keys(o).forEach((function(e){a[r(o[e],e)]=o[e]})),a);return n=xu(n,(function(e){return gu(e)||du(e)?kv(e,t):e}))}var o,r,a}var Lv=\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof DataView,Rv=function(e){if(void 0===e)return 0;var t=ae(e),n=ie(t);if(t!==n)throw RangeError(\"Wrong length or index\");return n},Ov=Math.abs,Gv=Math.pow,bv=Math.floor,wv=Math.log,Pv=Math.LN2,Uv=function(e,t,n){var o,r,a,s=new Array(n),i=8*n-t-1,u=(1<<i)-1,c=u>>1,l=23===t?Gv(2,-24)-Gv(2,-77):0,d=e<0||0===e&&1/e<0?1:0,p=0;for((e=Ov(e))!=e||e===1/0?(r=e!=e?1:0,o=u):(o=bv(wv(e)/Pv),e*(a=Gv(2,-o))<1&&(o--,a*=2),(e+=o+c>=1?l/a:l*Gv(2,1-c))*a>=2&&(o++,a/=2),o+c>=u?(r=0,o=u):o+c>=1?(r=(e*a-1)*Gv(2,t),o+=c):(r=e*Gv(2,c-1)*Gv(2,t),o=0));t>=8;s[p++]=255&r,r/=256,t-=8);for(o=o<<t|r,i+=t;i>0;s[p++]=255&o,o/=256,i-=8);return s[--p]|=128*d,s},Fv=function(e,t){var n,o=e.length,r=8*o-t-1,a=(1<<r)-1,s=a>>1,i=r-7,u=o-1,c=e[u--],l=127&c;for(c>>=7;i>0;l=256*l+e[u],u--,i-=8);for(n=l&(1<<-i)-1,l>>=-i,i+=t;i>0;n=256*n+e[u],u--,i-=8);if(0===l)l=1-s;else{if(l===a)return n?NaN:c?-1/0:1/0;n+=Gv(2,t),l-=s}return(c?-1:1)*n*Gv(2,l-t)},qv=function(e){for(var t=Oe(this),n=ie(t.length),o=arguments.length,r=le(o>1?arguments[1]:void 0,n),a=o>2?arguments[2]:void 0,s=void 0===a?n:le(a,n);s>r;)t[r++]=e;return t},xv=me.f,Vv=C.f,Kv=Q.get,Bv=Q.set,Hv=o.ArrayBuffer,jv=Hv,Wv=o.DataView,Yv=Wv&&Wv.prototype,$v=Object.prototype,zv=o.RangeError,Jv=Uv,Xv=Fv,Qv=function(e){return[255&e]},Zv=function(e){return[255&e,e>>8&255]},eM=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},tM=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},nM=function(e){return Jv(e,23,4)},oM=function(e){return Jv(e,52,8)},rM=function(e,t){Vv(e.prototype,t,{get:function(){return Kv(this)[t]}})},aM=function(e,t,n,o){var r=Rv(n),a=Kv(e);if(r+t>a.byteLength)throw zv(\"Wrong index\");var s=Kv(a.buffer).bytes,i=r+a.byteOffset,u=s.slice(i,i+t);return o?u:u.reverse()},sM=function(e,t,n,o,r,a){var s=Rv(n),i=Kv(e);if(s+t>i.byteLength)throw zv(\"Wrong index\");for(var u=Kv(i.buffer).bytes,c=s+i.byteOffset,l=o(+r),d=0;d<t;d++)u[c+d]=l[a?d:t-d-1]};if(Lv){if(!r((function(){Hv(1)}))||!r((function(){new Hv(-1)}))||r((function(){return new Hv,new Hv(1.5),new Hv(NaN),\"ArrayBuffer\"!=Hv.name}))){for(var iM,uM=(jv=function(e){return kr(this,jv),new Hv(Rv(e))}).prototype=Hv.prototype,cM=xv(Hv),lM=0;cM.length>lM;)(iM=cM[lM++])in jv||k(jv,iM,Hv[iM]);uM.constructor=jv}an&&zt(Yv)!==$v&&an(Yv,$v);var dM=new Wv(new jv(2)),pM=Yv.setInt8;dM.setInt8(0,2147483648),dM.setInt8(1,2147483649),!dM.getInt8(0)&&dM.getInt8(1)||Dr(Yv,{setInt8:function(e,t){pM.call(this,e,t<<24>>24)},setUint8:function(e,t){pM.call(this,e,t<<24>>24)}},{unsafe:!0})}else jv=function(e){kr(this,jv,\"ArrayBuffer\");var t=Rv(e);Bv(this,{bytes:qv.call(new Array(t),0),byteLength:t}),a||(this.byteLength=t)},Wv=function(e,t,n){kr(this,Wv,\"DataView\"),kr(e,jv,\"DataView\");var o=Kv(e).byteLength,r=ae(t);if(r<0||r>o)throw zv(\"Wrong offset\");if(r+(n=void 0===n?o-r:ie(n))>o)throw zv(\"Wrong length\");Bv(this,{buffer:e,byteLength:n,byteOffset:r}),a||(this.buffer=e,this.byteLength=n,this.byteOffset=r)},a&&(rM(jv,\"byteLength\"),rM(Wv,\"buffer\"),rM(Wv,\"byteLength\"),rM(Wv,\"byteOffset\")),Dr(Wv.prototype,{getInt8:function(e){return aM(this,1,e)[0]<<24>>24},getUint8:function(e){return aM(this,1,e)[0]},getInt16:function(e){var t=aM(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=aM(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return tM(aM(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return tM(aM(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Xv(aM(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Xv(aM(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){sM(this,1,e,Qv,t)},setUint8:function(e,t){sM(this,1,e,Qv,t)},setInt16:function(e,t){sM(this,2,e,Zv,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){sM(this,2,e,Zv,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){sM(this,4,e,eM,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){sM(this,4,e,eM,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){sM(this,4,e,nM,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){sM(this,8,e,oM,t,arguments.length>2?arguments[2]:void 0)}});tn(jv,\"ArrayBuffer\"),tn(Wv,\"DataView\");var gM={ArrayBuffer:jv,DataView:Wv},hM=gM.ArrayBuffer,fM=gM.DataView,_M=hM.prototype.slice,mM=r((function(){return!new hM(2).slice(1,void 0).byteLength}));ke({target:\"ArrayBuffer\",proto:!0,unsafe:!0,forced:mM},{slice:function(e,t){if(void 0!==_M&&void 0===t)return _M.call(D(this),e);for(var n=D(this).byteLength,o=le(e,n),r=le(void 0===t?n:t,n),a=new(Or(this,hM))(ie(r-o)),s=new fM(this),i=new fM(a),u=0;o<r;)i.setUint8(u++,s.getUint8(o++));return a}});var vM=String.fromCharCode,MM=String.fromCodePoint,yM=!!MM&&1!=MM.length;ke({target:\"String\",stat:!0,forced:yM},{fromCodePoint:function(e){for(var t,n=[],o=arguments.length,r=0;o>r;){if(t=+arguments[r++],le(t,1114111)!==t)throw RangeError(t+\" is not a valid code point\");n.push(t<65536?vM(t):vM(55296+((t-=65536)>>10),t%1024+56320))}return n.join(\"\")}});var IM,EM=C.f,TM=o.Int8Array,AM=TM&&TM.prototype,SM=o.Uint8ClampedArray,DM=SM&&SM.prototype,NM=TM&&zt(TM),CM=AM&&zt(AM),kM=Object.prototype,LM=kM.isPrototypeOf,RM=qe(\"toStringTag\"),OM=K(\"TYPED_ARRAY_TAG\"),GM=Lv&&!!an&&\"Opera\"!==dt(o.opera),bM=!1,wM={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},PM=function(e){return _(e)&&M(wM,dt(e))};for(IM in wM)o[IM]||(GM=!1);if((!GM||\"function\"!=typeof NM||NM===Function.prototype)&&(NM=function(){throw TypeError(\"Incorrect invocation\")},GM))for(IM in wM)o[IM]&&an(o[IM],NM);if((!GM||!CM||CM===kM)&&(CM=NM.prototype,GM))for(IM in wM)o[IM]&&an(o[IM].prototype,CM);if(GM&&zt(DM)!==CM&&an(DM,CM),a&&!M(CM,RM))for(IM in bM=!0,EM(CM,RM,{get:function(){return _(this)?this[OM]:void 0}}),wM)o[IM]&&k(o[IM],OM,IM);var UM={NATIVE_ARRAY_BUFFER_VIEWS:GM,TYPED_ARRAY_TAG:bM&&OM,aTypedArray:function(e){if(PM(e))return e;throw TypeError(\"Target is not a typed array\")},aTypedArrayConstructor:function(e){if(an){if(LM.call(NM,e))return e}else for(var t in wM)if(M(wM,IM)){var n=o[t];if(n&&(e===n||LM.call(n,e)))return e}throw TypeError(\"Target is not a typed array constructor\")},exportTypedArrayMethod:function(e,t,n){if(a){if(n)for(var r in wM){var s=o[r];s&&M(s.prototype,e)&&delete s.prototype[e]}CM[e]&&!n||Z(CM,e,n?t:GM&&AM[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,s;if(a){if(an){if(n)for(r in wM)(s=o[r])&&M(s,e)&&delete s[e];if(NM[e]&&!n)return;try{return Z(NM,e,n?t:GM&&TM[e]||t)}catch(zI){}}for(r in wM)!(s=o[r])||s[e]&&!n||Z(s,e,t)}},isView:function(e){var t=dt(e);return\"DataView\"===t||M(wM,t)},isTypedArray:PM,TypedArray:NM,TypedArrayPrototype:CM},FM=UM.NATIVE_ARRAY_BUFFER_VIEWS,qM=o.ArrayBuffer,xM=o.Int8Array,VM=!FM||!r((function(){xM(1)}))||!r((function(){new xM(-1)}))||!Mt((function(e){new xM,new xM(null),new xM(1.5),new xM(e)}),!0)||r((function(){return 1!==new xM(new qM(2),1,void 0).length})),KM=function(e,t){var n=function(e){var t=ae(e);if(t<0)throw RangeError(\"The argument can\\'t be less than 0\");return t}(e);if(n%t)throw RangeError(\"Wrong offset\");return n},BM=UM.aTypedArrayConstructor,HM=function(e){var t,n,o,r,a,s,i=Oe(e),u=arguments.length,c=u>1?arguments[1]:void 0,l=void 0!==c,d=gt(i);if(null!=d&&!at(d))for(s=(a=d.call(i)).next,i=[];!(r=s.call(a)).done;)i.push(r.value);for(l&&u>2&&(c=Re(c,arguments[2],2)),n=ie(i.length),o=new(BM(this))(n),t=0;n>t;t++)o[t]=l?c(i[t],t):i[t];return o};t((function(e){var t=me.f,n=He.forEach,r=Q.get,s=Q.set,i=C.f,u=S.f,l=Math.round,d=o.RangeError,p=gM.ArrayBuffer,g=gM.DataView,h=UM.NATIVE_ARRAY_BUFFER_VIEWS,f=UM.TYPED_ARRAY_TAG,v=UM.TypedArray,y=UM.TypedArrayPrototype,I=UM.aTypedArrayConstructor,E=UM.isTypedArray,T=function(e,t){for(var n=0,o=t.length,r=new(I(e))(o);o>n;)r[n]=t[n++];return r},A=function(e,t){i(e,t,{get:function(){return r(this)[t]}})},D=function(e){var t;return e instanceof p||\"ArrayBuffer\"==(t=dt(e))||\"SharedArrayBuffer\"==t},N=function(e,t){return E(e)&&\"symbol\"!=typeof t&&t in e&&String(+t)==String(t)},L=function(e,t){return N(e,t=m(t,!0))?c(2,e[t]):u(e,t)},R=function(e,t,n){return!(N(e,t=m(t,!0))&&_(n)&&M(n,\"value\"))||M(n,\"get\")||M(n,\"set\")||n.configurable||M(n,\"writable\")&&!n.writable||M(n,\"enumerable\")&&!n.enumerable?i(e,t,n):(e[t]=n.value,e)};a?(h||(S.f=L,C.f=R,A(y,\"buffer\"),A(y,\"byteOffset\"),A(y,\"byteLength\"),A(y,\"length\")),ke({target:\"Object\",stat:!0,forced:!h},{getOwnPropertyDescriptor:L,defineProperty:R}),e.exports=function(e,a,u){var c=e.match(/\\\\d+$/)[0]/8,m=e+(u?\"Clamped\":\"\")+\"Array\",M=\"get\"+e,I=\"set\"+e,A=o[m],S=A,N=S&&S.prototype,C={},L=function(e,t){i(e,t,{get:function(){return function(e,t){var n=r(e);return n.view[M](t*c+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var o=r(e);u&&(n=(n=l(n))<0?0:n>255?255:255&n),o.view[I](t*c+o.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};h?VM&&(S=a((function(e,t,n,o){return kr(e,S,m),tr(_(t)?D(t)?void 0!==o?new A(t,KM(n,c),o):void 0!==n?new A(t,KM(n,c)):new A(t):E(t)?T(S,t):HM.call(S,t):new A(Rv(t)),e,S)})),an&&an(S,v),n(t(A),(function(e){e in S||k(S,e,A[e])})),S.prototype=N):(S=a((function(e,t,n,o){kr(e,S,m);var r,a,i,u=0,l=0;if(_(t)){if(!D(t))return E(t)?T(S,t):HM.call(S,t);r=t,l=KM(n,c);var h=t.byteLength;if(void 0===o){if(h%c)throw d(\"Wrong length\");if((a=h-l)<0)throw d(\"Wrong length\")}else if((a=ie(o)*c)+l>h)throw d(\"Wrong length\");i=a/c}else i=Rv(t),r=new p(a=i*c);for(s(e,{buffer:r,byteOffset:l,byteLength:a,length:i,view:new g(r)});u<i;)L(e,u++)})),an&&an(S,v),N=S.prototype=kt(y)),N.constructor!==S&&k(N,\"constructor\",S),f&&k(N,f,m),C[m]=S,ke({global:!0,forced:S!=A,sham:!h},C),\"BYTES_PER_ELEMENT\"in S||k(S,\"BYTES_PER_ELEMENT\",c),\"BYTES_PER_ELEMENT\"in N||k(N,\"BYTES_PER_ELEMENT\",c),Cr(m)}):e.exports=function(){}}))(\"Uint8\",(function(e){return function(t,n,o){return e(this,t,n,o)}}));var jM=Math.min,WM=[].copyWithin||function(e,t){var n=Oe(this),o=ie(n.length),r=le(e,o),a=le(t,o),s=arguments.length>2?arguments[2]:void 0,i=jM((void 0===s?o:le(s,o))-a,o-r),u=1;for(a<r&&r<a+i&&(u=-1,a+=i-1,r+=i-1);i-- >0;)a in n?n[r]=n[a]:delete n[r],r+=u,a+=u;return n},YM=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"copyWithin\",(function(e,t){return WM.call(YM(this),e,t,arguments.length>2?arguments[2]:void 0)}));var $M=He.every,zM=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"every\",(function(e){return $M(zM(this),e,arguments.length>1?arguments[1]:void 0)}));var JM=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"fill\",(function(e){return qv.apply(JM(this),arguments)}));var XM=He.filter,QM=UM.aTypedArray,ZM=UM.aTypedArrayConstructor;(0,UM.exportTypedArrayMethod)(\"filter\",(function(e){for(var t=XM(QM(this),e,arguments.length>1?arguments[1]:void 0),n=Or(this,this.constructor),o=0,r=t.length,a=new(ZM(n))(r);r>o;)a[o]=t[o++];return a}));var ey=He.find,ty=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"find\",(function(e){return ey(ty(this),e,arguments.length>1?arguments[1]:void 0)}));var ny=He.findIndex,oy=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"findIndex\",(function(e){return ny(oy(this),e,arguments.length>1?arguments[1]:void 0)}));var ry=He.forEach,ay=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"forEach\",(function(e){ry(ay(this),e,arguments.length>1?arguments[1]:void 0)}));var sy=pe.includes,iy=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"includes\",(function(e){return sy(iy(this),e,arguments.length>1?arguments[1]:void 0)}));var uy=pe.indexOf,cy=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"indexOf\",(function(e){return uy(cy(this),e,arguments.length>1?arguments[1]:void 0)}));var ly=qe(\"iterator\"),dy=o.Uint8Array,py=bo.values,gy=bo.keys,hy=bo.entries,fy=UM.aTypedArray,_y=UM.exportTypedArrayMethod,vy=dy&&dy.prototype[ly],My=!!vy&&(\"values\"==vy.name||null==vy.name),yy=function(){return py.call(fy(this))};_y(\"entries\",(function(){return hy.call(fy(this))})),_y(\"keys\",(function(){return gy.call(fy(this))})),_y(\"values\",yy,!My),_y(ly,yy,!My);var Iy=UM.aTypedArray,Ey=[].join;(0,UM.exportTypedArrayMethod)(\"join\",(function(e){return Ey.apply(Iy(this),arguments)}));var Ty=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"lastIndexOf\",(function(e){return B_.apply(Ty(this),arguments)}));var Ay=He.map,Sy=UM.aTypedArray,Dy=UM.aTypedArrayConstructor;(0,UM.exportTypedArrayMethod)(\"map\",(function(e){return Ay(Sy(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(Dy(Or(e,e.constructor)))(t)}))}));var Ny=function(e){return function(t,n,o,r){Le(n);var a=Oe(t),s=g(a),i=ie(a.length),u=e?i-1:0,c=e?-1:1;if(o<2)for(;;){if(u in s){r=s[u],u+=c;break}if(u+=c,e?u<0:i<=u)throw TypeError(\"Reduce of empty array with no initial value\")}for(;e?u>=0:i>u;u+=c)u in s&&(r=n(r,s[u],u,a));return r}},Cy={left:Ny(!1),right:Ny(!0)},ky=Cy.left,Ly=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"reduce\",(function(e){return ky(Ly(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Ry=Cy.right,Oy=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"reduceRight\",(function(e){return Ry(Oy(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Gy=UM.aTypedArray,by=UM.exportTypedArrayMethod,wy=Math.floor;by(\"reverse\",(function(){for(var e,t=Gy(this).length,n=wy(t/2),o=0;o<n;)e=this[o],this[o++]=this[--t],this[t]=e;return this}));var Py=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"set\",(function(e){Py(this);var t=KM(arguments.length>1?arguments[1]:void 0,1),n=this.length,o=Oe(e),r=ie(o.length),a=0;if(r+t>n)throw RangeError(\"Wrong length\");for(;a<r;)this[t+a]=o[a++]}),r((function(){new Int8Array(1).set({})})));var Uy=UM.aTypedArray,Fy=UM.aTypedArrayConstructor,qy=[].slice;(0,UM.exportTypedArrayMethod)(\"slice\",(function(e,t){for(var n=qy.call(Uy(this),e,t),o=Or(this,this.constructor),r=0,a=n.length,s=new(Fy(o))(a);a>r;)s[r]=n[r++];return s}),r((function(){new Int8Array(1).slice()})));var xy=He.some,Vy=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"some\",(function(e){return xy(Vy(this),e,arguments.length>1?arguments[1]:void 0)}));var Ky=UM.aTypedArray,By=[].sort;(0,UM.exportTypedArrayMethod)(\"sort\",(function(e){return By.call(Ky(this),e)}));var Hy=UM.aTypedArray;(0,UM.exportTypedArrayMethod)(\"subarray\",(function(e,t){var n=Hy(this),o=n.length,r=le(e,o);return new(Or(n,n.constructor))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,ie((void 0===t?o:le(t,o))-r))}));var jy=o.Int8Array,Wy=UM.aTypedArray,Yy=UM.exportTypedArrayMethod,$y=[].toLocaleString,zy=[].slice,Jy=!!jy&&r((function(){$y.call(new jy(1))}));Yy(\"toLocaleString\",(function(){return $y.apply(Jy?zy.call(Wy(this)):Wy(this),arguments)}),r((function(){return[1,2].toLocaleString()!=new jy([1,2]).toLocaleString()}))||!r((function(){jy.prototype.toLocaleString.call([1,2])})));var Xy=UM.exportTypedArrayMethod,Qy=o.Uint8Array,Zy=Qy&&Qy.prototype||{},eI=[].toString,tI=[].join;r((function(){eI.call({})}))&&(eI=function(){return tI.call(this)});var nI=Zy.toString!=eI;Xy(\"toString\",eI,nI);var oI=String.fromCharCode,rI=function(e){var t=0|e.charCodeAt(0);if(55296<=t)if(t<56320){var n=0|e.charCodeAt(1);if(56320<=n&&n<=57343){if((t=(t<<10)+n-56613888|0)>65535)return oI(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533}else t<=57343&&(t=65533);return t<=2047?oI(192|t>>>6,128|63&t):oI(224|t>>>12,128|t>>>6&63,128|63&t)},aI=function(e){for(var t=void 0===e?\"\":(\"\"+e).replace(/[\\\\x80-\\\\uD7ff\\\\uDC00-\\\\uFFFF]|[\\\\uD800-\\\\uDBFF][\\\\uDC00-\\\\uDFFF]?/g,rI),n=0|t.length,o=new Uint8Array(n),r=0;r<n;r=r+1|0)o[r]=0|t.charCodeAt(r);return o},sI=function(e){for(var t=new Uint8Array(e),n=\"\",o=0,r=t.length;o<r;){var a=t[o],s=0,i=0;if(a<=127?(s=0,i=255&a):a<=223?(s=1,i=31&a):a<=239?(s=2,i=15&a):a<=244&&(s=3,i=7&a),r-o-s>0)for(var u=0;u<s;)i=i<<6|63&(a=t[o+u+1]),u+=1;else i=65533,s=r-o;n+=String.fromCodePoint(i),o+=s+1}return n},iI=function(){function e(t){yn(this,e),this._handler=t;var n=t.getURL();if(this._socket=null,this._workerSocket=null,this._id=Su(),this._handler.getIsWorkerEnabled()){var o=URL.createObjectURL(new Blob([\\';let _socket = null;onmessage = function(event) {  if (event.data.cmd === \"start\") {    const url = event.data.url;    _socket = new WebSocket(url);    _socket.binaryType = \"arraybuffer\";    _socket.onopen = function() {      postMessage({ callback: \"onOpen\" });    };    _socket.onclose = function(e) {      postMessage({ callback: \"onOpen\", e: { code: e.code, reason: e.reason } });    };    _socket.onmessage = function(e) {      postMessage({ callback: \"onMessage\", data: e.data });    };    _socket.onerror = function(e) {      postMessage({ callback: \"onError\", e: { isTrusted: \"true\" } });    };  } else if (event.data.cmd === \"sendMessage\") {    if (_socket !== null) {      _socket.send(event.data.data);    }  } else if (event.data.cmd === \"stop\") {    if (_socket !== null) {      _socket.close(event.data.code);      _socket = null;    }  }};\\'],{type:\"application/javascript; charset=utf-8\"}));this._workerSocket=new Worker(o);var r=this;this._workerSocket.onmessage=function(e){var t=e.data,n=t.callback,o=t.e;\"onOpen\"===n?r._onOpen():\"onClose\"===n?r._onClose(o):\"onError\"===n?r._onError(o):\"onMessage\"===n&&r._onMessage(e.data)},this._workerSocket.postMessage({cmd:\"start\",id:this._id,url:n})}else pi?ci?(hi.connectSocket({url:n,header:{\"content-type\":\"application/json\"}}),hi.onSocketClose(this._onClose.bind(this)),hi.onSocketOpen(this._onOpen.bind(this)),hi.onSocketMessage(this._onMessage.bind(this)),hi.onSocketError(this._onError.bind(this))):(this._socket=hi.connectSocket({url:n,header:{\"content-type\":\"application/json\"},complete:function(){}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):gi&&(this._socket=new WebSocket(n),this._socket.binaryType=\"arraybuffer\",this._socket.onopen=this._onOpen.bind(this),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this));this._canIUseBinaryFrame=t.canIUseBinaryFrame()}return En(e,[{key:\"getID\",value:function(){return this._id}},{key:\"_onOpen\",value:function(){this._handler.onOpen({id:this._id})}},{key:\"_onClose\",value:function(e){this._handler.onClose({id:this._id,e:e})}},{key:\"_onMessage\",value:function(e){this._handler.onMessage({data:this._canIUseBinaryFrame?sI(e.data):e.data})}},{key:\"_onError\",value:function(e){this._handler.onError({id:this._id,e:e})}},{key:\"setIsWorkerEnabled\",value:function(e){this._isWorkerEnabled=!0}},{key:\"close\",value:function(e){if(this._workerSocket&&(this._workerSocket.postMessage({cmd:\"stop\",code:e}),this._workerSocket.terminate(),this._workerSocket=null),ci)return hi.offSocketClose(),hi.offSocketMessage(),hi.offSocketOpen(),hi.offSocketError(),void hi.closeSocket();this._socket&&(pi?(this._socket.onClose((function(){})),this._socket.onOpen((function(){})),this._socket.onMessage((function(){})),this._socket.onError((function(){}))):gi&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),ui?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}},{key:\"send\",value:function(e){if(this._workerSocket)this._workerSocket.postMessage({cmd:\"sendMessage\",data:this._canIUseBinaryFrame?aI(e.data).buffer:e.data});else{if(ci)return void hi.sendSocketMessage({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}});this._socket&&(pi?this._socket.send({data:this._canIUseBinaryFrame?aI(e.data).buffer:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):gi&&this._socket.send(this._canIUseBinaryFrame?aI(e.data).buffer:e.data))}}}]),e}(),uI=4e3,cI=4001,lI=\"connected\",dI=\"connecting\",pI=\"disconnected\",gI=function(){function e(t){yn(this,e),this._channelModule=t,this._className=\"SocketHandler\",this._promiseMap=new Map,this._readyState=pI,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=Su(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url=\"\",this._onOpenTs=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0,this._setWebsocketHost(),this._initConnection()}return En(e,[{key:\"_setWebsocketHost\",value:function(){var e=this._channelModule.getModule(dl),t=$s;this._channelModule.isOversea()&&(t=zs),e.isSingaporeSite()?t=Js:e.isKoreaSite()?t=Xs:e.isGermanySite()?t=Qs:e.isIndiaSite()&&(t=Zs),ei.HOST.setCurrent(t)}},{key:\"_initConnection\",value:function(){hu(ei.HOST.CURRENT.BACKUP)||\"\"===this._url?this._url=ei.HOST.CURRENT.DEFAULT:this._url===ei.HOST.CURRENT.DEFAULT?this._url=ei.HOST.CURRENT.BACKUP:this._url===ei.HOST.CURRENT.BACKUP&&(this._url=ei.HOST.CURRENT.DEFAULT);var e=this._channelModule.getModule(dl).getProxyServer();Xu(e)||(this._url=e),this._connect(),this._nextPingTs=0}},{key:\"onCheckTimer\",value:function(e){e%1==0&&this._checkPromiseMap()}},{key:\"_checkPromiseMap\",value:function(){var e=this;0!==this._promiseMap.size&&this._promiseMap.forEach((function(t,n){var o=t.reject,r=t.timestamp;Date.now()-r>=15e3&&(Qi.log(\"\".concat(e._className,\"._checkPromiseMap request timeout, delete requestID:\").concat(n)),e._promiseMap.delete(n),o(new rm({code:lp.NETWORK_TIMEOUT,message:dp.NETWORK_TIMEOUT})),e._channelModule.onRequestTimeout(n))}))}},{key:\"onOpen\",value:function(e){this._onOpenTs=Date.now();var t=e.id;this._socketID=t;var n=Date.now()-this._startTs;Qi.log(\"\".concat(this._className,\"._onOpen cost \").concat(n,\" ms. socketID:\").concat(t)),new Dp(wp).setMessage(n).setCostTime(n).setMoreMessage(\"socketID:\".concat(t)).end(),e.id===this._socketID&&(this._readyState=lI,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._channelModule.onReconnected(),this._reConnectFlag=!1),this._channelModule.onOpen())}},{key:\"onClose\",value:function(e){var t=new Dp(Pp),n=e.id,o=e.e,r=\"sourceSocketID:\".concat(n,\" currentSocketID:\").concat(this._socketID,\" code:\").concat(o.code,\" reason:\").concat(o.reason),a=0;0!==this._onOpenTs&&(a=Date.now()-this._onOpenTs),t.setMessage(a).setCostTime(a).setMoreMessage(r).setCode(o.code).end(),Qi.log(\"\".concat(this._className,\"._onClose \").concat(r,\" onlineTime:\").concat(a)),n===this._socketID&&(this._readyState=pI,a<1e3?this._channelModule.onReconnectFailed():this._channelModule.onClose())}},{key:\"onError\",value:function(e){var t=e.id,n=e.e,o=\"sourceSocketID:\".concat(t,\" currentSocketID:\").concat(this._socketID);new Dp(Up).setMessage(n.errMsg||Tu(n)).setMoreMessage(o).setLevel(\"error\").end(),Qi.warn(\"\".concat(this._className,\"._onError\"),n,o),t===this._socketID&&(this._readyState=\"\",this._channelModule.onError())}},{key:\"onMessage\",value:function(e){var t;try{t=JSON.parse(e.data)}catch(zI){new Dp(rg).setMessage(e.data).end()}if(t&&t.head){var n=this._getRequestIDFromHead(t.head),o=Wu(t.head),r=kv(t.body,this._getResponseKeyMap(o));if(Qi.debug(\"\".concat(this._className,\".onMessage ret:\").concat(JSON.stringify(r),\" requestID:\").concat(n,\" has:\").concat(this._promiseMap.has(n))),this._setNextPingTs(),this._promiseMap.has(n)){var a=this._promiseMap.get(n),s=a.resolve,i=a.reject,u=a.timestamp;return this._promiseMap.delete(n),this._calcRTT(u),void(r.errorCode&&0!==r.errorCode?(this._channelModule.onErrorCodeNotZero(r),i(new rm({code:r.errorCode,message:r.errorInfo||\"\"}))):s(Q_(r)))}this._channelModule.onMessage({head:t.head,body:r})}}},{key:\"_calcRTT\",value:function(e){var t=Date.now()-e;this._channelModule.getModule(Sl).addRTT(t)}},{key:\"_connect\",value:function(){this._startTs=Date.now(),this._onOpenTs=0,this._socket=new iI(this),this._socketID=this._socket.getID(),this._readyState=dI,Qi.log(\"\".concat(this._className,\"._connect isWorkerEnabled:\").concat(this.getIsWorkerEnabled(),\" socketID:\").concat(this._socketID,\" url:\").concat(this.getURL())),new Dp(bp).setMessage(\"socketID:\".concat(this._socketID,\" url:\").concat(this.getURL())).end()}},{key:\"getURL\",value:function(){var e=this._channelModule.getModule(dl);e.isDevMode()&&(this._canIUseBinaryFrame=!1);var t=Bu();(ci||ai&&\"windows\"===t||li)&&(this._canIUseBinaryFrame=!1);var n=-1;\"ios\"===t?n=Ei||-1:\"android\"===t&&(n=Ai||-1);var o=this._channelModule.getPlatform(),r=e.getSDKAppID(),a=e.getInstanceID();return this._canIUseBinaryFrame?\"\".concat(this._url,\"/binfo?sdkappid=\").concat(r,\"&instanceid=\").concat(a,\"&random=\").concat(this._getRandom(),\"&platform=\").concat(o,\"&host=\").concat(t,\"&version=\").concat(n):\"\".concat(this._url,\"/info?sdkappid=\").concat(r,\"&instanceid=\").concat(a,\"&random=\").concat(this._getRandom(),\"&platform=\").concat(o,\"&host=\").concat(t,\"&version=\").concat(n)}},{key:\"_closeConnection\",value:function(e){Qi.log(\"\".concat(this._className,\"._closeConnection\")),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=pI)}},{key:\"_resend\",value:function(){var e=this;if(Qi.log(\"\".concat(this._className,\"._resend reConnectFlag:\").concat(this._reConnectFlag),\"promiseMap.size:\".concat(this._promiseMap.size,\" simpleRequestMap.size:\").concat(this._simpleRequestMap.size)),this._promiseMap.size>0&&this._promiseMap.forEach((function(t,n){var o=t.uplinkData,r=t.resolve,a=t.reject;e._promiseMap.set(n,{resolve:r,reject:a,timestamp:Date.now(),uplinkData:o}),e._execute(n,o)})),this._simpleRequestMap.size>0){var t,n=Bn(this._simpleRequestMap);try{for(n.s();!(t=n.n()).done;){var o=Pn(t.value,2),r=o[0],a=o[1];this._execute(r,a)}}catch(s){n.e(s)}finally{n.f()}this._simpleRequestMap.clear()}}},{key:\"send\",value:function(e){var t=this;e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3);e.keyMap;var n=On(e,[\"keyMap\"]),o=this._getRequestIDFromHead(e.head),r=JSON.stringify(n);return new Promise((function(e,a){(t._promiseMap.set(o,{resolve:e,reject:a,timestamp:Date.now(),uplinkData:r}),Qi.debug(\"\".concat(t._className,\".send uplinkData:\").concat(JSON.stringify(n),\" requestID:\").concat(o,\" readyState:\").concat(t._readyState)),t._readyState!==lI)?t._reConnect():(t._execute(o,r),t._channelModule.getModule(Sl).addRequestCount())}))}},{key:\"simplySend\",value:function(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3);e.keyMap;var t=On(e,[\"keyMap\"]),n=this._getRequestIDFromHead(e.head),o=JSON.stringify(t);this._readyState!==lI?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(n,o):Qi.log(\"\".concat(this._className,\".simplySend. simpleRequestMap is full, drop request!\")),this._reConnect()):this._execute(n,o)}},{key:\"_execute\",value:function(e,t){this._socket.send({data:t,fail:pi?this._onSendFail.bind(this):void 0,requestID:e})}},{key:\"_onSendFail\",value:function(e){Qi.log(\"\".concat(this._className,\"._onSendFail requestID:\").concat(e))}},{key:\"_getSequence\",value:function(){var e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=Su()),e}},{key:\"_getRequestIDFromHead\",value:function(e){return e.servcmd+e.seq}},{key:\"_getResponseKeyMap\",value:function(e){var t=this._channelModule.getKeyMap(e);return Sn({},Av.response,{},t.response)}},{key:\"_reConnect\",value:function(){this._readyState!==lI&&this._readyState!==dI&&this.forcedReconnect()}},{key:\"forcedReconnect\",value:function(){var e=this;Qi.log(\"\".concat(this._className,\".forcedReconnect count:\").concat(this._reConnectCount,\" readyState:\").concat(this._readyState)),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(cI),this._initConnection()):(this._reConnectCount=0,this._channelModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0];n[1];o?(Qi.warn(\"\".concat(e._className,\".forcedReconnect disconnected from wsserver but network is ok, continue...\")),e._closeConnection(cI),e._initConnection()):e._channelModule.onReconnectFailed()})))}},{key:\"getReconnectFlag\",value:function(){return this._reConnectFlag}},{key:\"_setNextPingTs\",value:function(){this._nextPingTs=Date.now()+1e4}},{key:\"getNextPingTs\",value:function(){return this._nextPingTs}},{key:\"isConnected\",value:function(){return this._readyState===lI}},{key:\"canIUseBinaryFrame\",value:function(){return this._canIUseBinaryFrame}},{key:\"setIsWorkerEnabled\",value:function(e){Qi.log(\"\".concat(this._className,\".setIsWorkerEnabled flag:\").concat(e)),this._isWorkerEnabled=e}},{key:\"getIsWorkerEnabled\",value:function(){return this._isWorkerEnabled&&Gi}},{key:\"_getRandom\",value:function(){return 0===this._random&&(this._random=Math.random()),this._random}},{key:\"_resetRandom\",value:function(){this._random=0}},{key:\"close\",value:function(){Qi.log(\"\".concat(this._className,\".close\")),this._closeConnection(uI),this._promiseMap.clear(),this._startSequence=Su(),this._readyState=pI,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url=\"\",this._random=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0}}]),e}(),hI=function(e){Dn(n,e);var t=wn(n);function n(e){var o;if(yn(this,n),(o=t.call(this,e))._className=\"ChannelModule\",o._socketHandler=new gI(Gn(o)),o._probing=!1,o._isAppShowing=!0,o._previousState=Yn.NET_STATE_CONNECTED,pi&&\"function\"==typeof hi.onAppShow&&\"function\"==typeof hi.onAppHide){var r=o._onAppHide.bind(Gn(o)),a=o._onAppShow.bind(Gn(o));\"function\"==typeof hi.offAppHide&&hi.offAppHide(r),\"function\"==typeof hi.offAppShow&&hi.offAppShow(a),hi.onAppHide(r),hi.onAppShow(a)}return o._timerForNotLoggedIn=-1,o._timerForNotLoggedIn=setInterval(o.onCheckTimer.bind(Gn(o)),1e3),o._fatalErrorFlag=!1,o}return En(n,[{key:\"onCheckTimer\",value:function(e){this._socketHandler&&(this.isLoggedIn()?(this._timerForNotLoggedIn>0&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}},{key:\"onErrorCodeNotZero\",value:function(e){this.getModule(Ml).onErrorCodeNotZero(e)}},{key:\"onMessage\",value:function(e){this.getModule(Ml).onMessage(e)}},{key:\"send\",value:function(e){return this._socketHandler?this._previousState!==Yn.NET_STATE_CONNECTED&&e.head.servcmd.includes(Xd)?(this.reConnect(),this._sendLogViaHTTP(e)):this._socketHandler.send(e):Promise.reject()}},{key:\"_sendLogViaHTTP\",value:function(e){var t=ei.HOST.CURRENT.STAT;return new Promise((function(n,o){var r=\"\".concat(t,\"/v4/imopenstat/tim_web_report_v2?sdkappid=\").concat(e.head.sdkappid,\"&reqtime=\").concat(Date.now()),a=JSON.stringify(e.body),s=\"application/x-www-form-urlencoded;charset=UTF-8\";if(pi)hi.request({url:r,data:a,method:\"POST\",timeout:3e3,header:{\"content-type\":s},success:function(){n()},fail:function(){o(new rm({code:lp.NETWORK_ERROR,message:dp.NETWORK_ERROR}))}});else{var i=new XMLHttpRequest,u=setTimeout((function(){i.abort(),o(new rm({code:lp.NETWORK_TIMEOUT,message:dp.NETWORK_TIMEOUT}))}),3e3);i.onreadystatechange=function(){4===i.readyState&&(clearTimeout(u),200===i.status||304===i.status?n():o(new rm({code:lp.NETWORK_ERROR,message:dp.NETWORK_ERROR})))},i.open(\"POST\",r,!0),i.setRequestHeader(\"Content-type\",s),i.send(a)}}))}},{key:\"simplySend\",value:function(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}},{key:\"onOpen\",value:function(){this._ping()}},{key:\"onClose\",value:function(){this._socketHandler&&(this._socketHandler.getReconnectFlag()&&this._emitNetStateChangeEvent(Yn.NET_STATE_DISCONNECTED));this.reConnect()}},{key:\"onError\",value:function(){pi&&Qi.error(\"\".concat(this._className,\".onError 从v2.11.2起，SDK 支持了 WebSocket，如您未添加相关受信域名，请先添加！升级指引: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html\"))}},{key:\"getKeyMap\",value:function(e){return this.getModule(Ml).getKeyMap(e)}},{key:\"_onAppHide\",value:function(){this._isAppShowing=!1}},{key:\"_onAppShow\",value:function(){this._isAppShowing=!0}},{key:\"onRequestTimeout\",value:function(e){}},{key:\"onReconnected\",value:function(){Qi.log(\"\".concat(this._className,\".onReconnected\")),this.getModule(Ml).onReconnected(),this._emitNetStateChangeEvent(Yn.NET_STATE_CONNECTED)}},{key:\"onReconnectFailed\",value:function(){Qi.log(\"\".concat(this._className,\".onReconnectFailed\")),this._emitNetStateChangeEvent(Yn.NET_STATE_DISCONNECTED)}},{key:\"setIsWorkerEnabled\",value:function(e){this._socketHandler&&this._socketHandler.setIsWorkerEnabled(!1)}},{key:\"reConnect\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!1;this._socketHandler&&(t=this._socketHandler.getReconnectFlag());var n=\"forcedFlag:\".concat(e,\" fatalErrorFlag:\").concat(this._fatalErrorFlag,\" previousState:\").concat(this._previousState,\" reconnectFlag:\").concat(t);if(Qi.log(\"\".concat(this._className,\".reConnect \").concat(n)),!this._fatalErrorFlag&&this._socketHandler){if(!0===e)this._socketHandler.forcedReconnect();else{if(this._previousState===Yn.NET_STATE_CONNECTING&&t)return;this._socketHandler.forcedReconnect()}this._emitNetStateChangeEvent(Yn.NET_STATE_CONNECTING)}}},{key:\"_emitNetStateChangeEvent\",value:function(e){this._previousState!==e&&(Qi.log(\"\".concat(this._className,\"._emitNetStateChangeEvent from \").concat(this._previousState,\" to \").concat(e)),this._previousState=e,this.emitOuterEvent(Wn.NET_STATE_CHANGE,{state:e}))}},{key:\"_ping\",value:function(){var e=this;if(!0!==this._probing){this._probing=!0;var t=this.getModule(Ml).getProtocolData({protocolName:Qd});this.send(t).then((function(){e._probing=!1})).catch((function(t){if(Qi.warn(\"\".concat(e._className,\"._ping failed. error:\"),t),e._probing=!1,t&&60002===t.code)return new Dp(yh).setMessage(\"code:\".concat(t.code,\" message:\").concat(t.message)).setNetworkType(e.getModule(hl).getNetworkType()).end(),e._fatalErrorFlag=!0,void e._emitNetStateChangeEvent(Yn.NET_STATE_DISCONNECTED);e.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];Qi.log(\"\".concat(e._className,\"._ping failed. probe network, isAppShowing:\").concat(e._isAppShowing,\" online:\").concat(o,\" networkType:\").concat(r)),o?e.reConnect():e._emitNetStateChangeEvent(Yn.NET_STATE_DISCONNECTED)}))}))}}},{key:\"_checkNextPing\",value:function(){this._socketHandler&&(this._socketHandler.isConnected()&&Date.now()>=this._socketHandler.getNextPingTs()&&this._ping())}},{key:\"dealloc\",value:function(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),this._timerForNotLoggedIn>-1&&clearInterval(this._timerForNotLoggedIn)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._previousState=Yn.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3)}}]),n}(Nl),fI=function(){function e(t){yn(this,e),this._className=\"ProtocolHandler\",this._sessionModule=t,this._configMap=new Map,this._fillConfigMap()}return En(e,[{key:\"_fillConfigMap\",value:function(){this._configMap.clear();var e=this._sessionModule.genCommonHead(),t=this._sessionModule.genCosSpecifiedHead(),n=this._sessionModule.genSSOReportHead();this._configMap.set(Cl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_STATUS,\".\").concat(ei.CMD.LOGIN)}),body:{state:\"Online\"},keyMap:{response:{InstId:\"instanceID\",HelloInterval:\"helloInterval\"}}}}(e)),this._configMap.set(kl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_STATUS,\".\").concat(ei.CMD.LOGOUT)}),body:{type:0},keyMap:{request:{type:\"wslogout_type\"}}}}(e)),this._configMap.set(Ll,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_STATUS,\".\").concat(ei.CMD.HELLO)}),body:{},keyMap:{response:{NewInstInfo:\"newInstanceInfo\"}}}}(e)),this._configMap.set(Rl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.STAT_SERVICE,\".\").concat(ei.CMD.KICK_OTHER)}),body:{}}}(e)),this._configMap.set($d,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_COS_SIGN,\".\").concat(ei.CMD.COS_SIGN)}),body:{cmd:\"open_im_cos_svc\",subCmd:\"get_cos_token\",duration:300,version:2},keyMap:{request:{userSig:\"usersig\",subCmd:\"sub_cmd\",cmd:\"cmd\",duration:\"duration\",version:\"version\"},response:{expired_time:\"expiredTime\",bucket_name:\"bucketName\",session_token:\"sessionToken\",tmp_secret_id:\"secretId\",tmp_secret_key:\"secretKey\"}}}}(t)),this._configMap.set(zd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.CUSTOM_UPLOAD,\".\").concat(ei.CMD.COS_PRE_SIG)}),body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{request:{userSig:\"usersig\",fileType:\"file_type\",fileName:\"file_name\",uploadMethod:\"upload_method\"},response:{expired_time:\"expiredTime\",request_id:\"requestId\",head_url:\"headUrl\",upload_url:\"uploadUrl\",download_url:\"downloadUrl\",ci_url:\"ciUrl\",snapshot_url:\"requestSnapshotUrl\"}}}}(t)),this._configMap.set(Jd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.CUSTOM_UPLOAD,\".\").concat(ei.CMD.VIDEO_COVER)}),body:{version:1,platform:void 0,coverName:void 0,requestSnapshotUrl:void 0},keyMap:{request:{version:\"version\",platform:\"platform\",coverName:\"cover_name\",requestSnapshotUrl:\"snapshot_url\"},response:{error_code:\"errorCode\",error_msg:\"errorInfo\",download_url:\"snapshotUrl\"}}}}(t)),this._configMap.set(ip,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_CONFIG_MANAGER,\".\").concat(ei.CMD.FETCH_COMMERCIAL_CONFIG)}),body:{SDKAppID:0},keyMap:{request:{SDKAppID:\"uint32_sdkappid\"},response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_purchase_bits:\"purchaseBits\",uint32_expired_time:\"expiredTime\"}}}}(e)),this._configMap.set(up,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_CONFIG_MANAGER,\".\").concat(ei.CMD.PUSHED_COMMERCIAL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_purchase_bits:\"purchaseBits\",uint32_expired_time:\"expiredTime\"}}}}(e)),this._configMap.set(ap,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_CONFIG_MANAGER,\".\").concat(ei.CMD.FETCH_CLOUD_CONTROL_CONFIG)}),body:{SDKAppID:0,version:0},keyMap:{request:{SDKAppID:\"uint32_sdkappid\",version:\"uint64_version\"},response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_json_config:\"cloudControlConfig\",uint32_expired_time:\"expiredTime\",uint32_sdkappid:\"SDKAppID\",uint64_version:\"version\"}}}}(e)),this._configMap.set(sp,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_CONFIG_MANAGER,\".\").concat(ei.CMD.PUSHED_CLOUD_CONTROL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_json_config:\"cloudControlConfig\",uint32_expired_time:\"expiredTime\",uint32_sdkappid:\"SDKAppID\",uint64_version:\"version\"}}}}(e)),this._configMap.set(cp,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OVERLOAD_PUSH,\".\").concat(ei.CMD.OVERLOAD_NOTIFY)}),body:{},keyMap:{response:{OverLoadServCmd:\"overloadCommand\",DelaySecs:\"waitingTime\"}}}}(e)),this._configMap.set(Ol,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.GET_MESSAGES)}),body:{cookie:\"\",syncFlag:0,needAbstract:1,isOnlineSync:0},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",from:\"From_Account\",to:\"To_Account\",time:\"MsgTimeStamp\",sequence:\"MsgSeq\",random:\"MsgRandom\",elements:\"MsgBody\"},response:{MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",ClientSeq:\"clientSequence\",MsgSeq:\"sequence\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgRandom:\"random\",MsgTimeStamp:\"time\",MsgContent:\"content\",ToGroupId:\"groupID\",MsgKey:\"messageKey\",GroupTips:\"groupTips\",MsgBody:\"elements\",MsgType:\"type\",C2CRemainingUnreadCount:\"C2CRemainingUnreadList\",C2CPairUnreadCount:\"C2CPairUnreadList\"}}}}(e)),this._configMap.set(Gl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.BIG_DATA_HALLWAY_AUTH_KEY)}),body:{}}}(e)),this._configMap.set(bl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.SEND_MESSAGE)}),body:{fromAccount:\"\",toAccount:\"\",msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:\"\",avatar:\"\",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:\"\",desc:\"\",ext:\"\",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:\"\"}},messageControlInfo:void 0,clientTime:void 0},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",data:\"Data\",description:\"Desc\",extension:\"Ext\",type:\"MsgType\",content:\"MsgContent\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",nick:\"From_AccountNick\",avatar:\"From_AccountHeadurl\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",elements:\"MsgBody\",clientSequence:\"ClientSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"}}}}(e)),this._configMap.set(wl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.SEND_GROUP_MESSAGE)}),body:{fromAccount:\"\",groupID:\"\",random:0,clientSequence:0,priority:\"\",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:\"\",desc:\"\",ext:\"\",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:\"\"}},groupAtInfo:[],messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0},keyMap:{request:{to:\"GroupId\",extension:\"Ext\",data:\"Data\",description:\"Desc\",random:\"Random\",sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",type:\"MsgType\",priority:\"MsgPriority\",content:\"MsgContent\",elements:\"MsgBody\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",clientSequence:\"ClientSeq\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\",needReadReceipt:\"NeedReadReceipt\"},response:{MsgTime:\"time\",MsgSeq:\"sequence\"}}}}(e)),this._configMap.set(td,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.REVOKE_C2C_MESSAGE)}),body:{msgInfo:{fromAccount:\"\",toAccount:\"\",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{request:{msgInfo:\"MsgInfo\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(Sd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.REVOKE_GROUP_MESSAGE)}),body:{groupID:\"\",msgSeqList:void 0},keyMap:{request:{msgSeqList:\"MsgSeqList\",msgSeq:\"MsgSeq\"}}}}(e)),this._configMap.set(ad,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.GET_C2C_ROAM_MESSAGES)}),body:{peerAccount:\"\",count:15,lastMessageTime:0,messageKey:\"\",withRecalledMessage:1},keyMap:{request:{messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",withRecalledMessage:\"WithRecalledMsg\"},response:{LastMsgTime:\"lastMessageTime\"}}}}(e)),this._configMap.set(Cd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_GROUP_ROAM_MESSAGES)}),body:{withRecalledMsg:1,groupID:\"\",count:15,sequence:\"\"},keyMap:{request:{sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",withRecalledMessage:\"WithRecalledMsg\"},response:{Random:\"random\",MsgTime:\"time\",MsgSeq:\"sequence\",ReqMsgSeq:\"sequence\",RspMsgList:\"messageList\",IsPlaceMsg:\"isPlaceMessage\",IsSystemMsg:\"isSystemMessage\",ToGroupId:\"to\",EnumFrom_AccountType:\"fromAccountType\",EnumTo_AccountType:\"toAccountType\",GroupCode:\"groupCode\",MsgPriority:\"priority\",MsgBody:\"elements\",MsgType:\"type\",MsgContent:\"content\",IsFinished:\"complete\",Download_Flag:\"downloadFlag\",ClientSeq:\"clientSequence\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\"}}}}(e)),this._configMap.set(nd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.SET_C2C_MESSAGE_READ)}),body:{C2CMsgReaded:void 0},keyMap:{request:{lastMessageTime:\"LastedMsgTime\"}}}}(e)),this._configMap.set(od,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.SET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{userIDList:void 0,muteFlag:0},keyMap:{request:{userIDList:\"Peer_Account\",muteFlag:\"Mute_Notifications\"}}}}(e)),this._configMap.set(rd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.GET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{updateSequence:0},keyMap:{response:{MuteNotificationsList:\"muteFlagList\"}}}}(e)),this._configMap.set(Dd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.SET_GROUP_MESSAGE_READ)}),body:{groupID:void 0,messageReadSeq:void 0},keyMap:{request:{messageReadSeq:\"MsgReadedSeq\"}}}}(e)),this._configMap.set(Nd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.SET_ALL_MESSAGE_READ)}),body:{readAllC2CMessage:0,groupMessageReadInfoList:[]},keyMap:{request:{readAllC2CMessage:\"C2CReadAllMsg\",groupMessageReadInfoList:\"GroupReadInfo\",messageSequence:\"MsgSeq\"},response:{C2CReadAllMsg:\"readAllC2CMessage\",GroupReadInfoArray:\"groupMessageReadInfoList\"}}}}(e)),this._configMap.set(id,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.DELETE_C2C_MESSAGE)}),body:{fromAccount:\"\",to:\"\",keyList:void 0},keyMap:{request:{keyList:\"MsgKeyList\"}}}}(e)),this._configMap.set(Ud,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.DELETE_GROUP_MESSAGE)}),body:{groupID:\"\",deleter:\"\",keyList:void 0},keyMap:{request:{deleter:\"Deleter_Account\",keyList:\"Seqs\"}}}}(e)),this._configMap.set(kd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_READ_RECEIPT)}),body:{groupID:\"\",sequenceList:void 0},keyMap:{request:{sequence:\"MsgSeq\"}}}}(e)),this._configMap.set(Ld,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.SEND_READ_RECEIPT)}),body:{groupID:\"\",sequenceList:void 0},keyMap:{request:{sequenceList:\"MsgSeqList\",sequence:\"MsgSeq\"}}}}(e)),this._configMap.set(Rd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_READ_RECEIPT_DETAIL)}),body:{groupID:\"\",sequence:void 0,flag:0,cursor:0,count:0},keyMap:{request:{sequence:\"MsgSeq\",count:\"Num\"},response:{ReadList:\"readUserIDList\",Read_Account:\"userID\",UnreadList:\"unreadUserIDList\",Unread_Account:\"userID\",IsFinish:\"isCompleted\"}}}}(e)),this._configMap.set(sd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.GET_PEER_READ_TIME)}),body:{userIDList:void 0},keyMap:{request:{userIDList:\"To_Account\"},response:{ReadTime:\"peerReadTimeList\"}}}}(e)),this._configMap.set(cd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.RECENT_CONTACT,\".\").concat(ei.CMD.GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,count:0},keyMap:{request:{},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\",C2cPeerReadTime:\"c2cPeerReadTime\"}}}}(e)),this._configMap.set(ud,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.RECENT_CONTACT,\".\").concat(ei.CMD.PAGING_GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:4,assistFlag:15},keyMap:{request:{messageAssistFlag:\"MsgAssistFlags\",assistFlag:\"AssistFlags\",pinnedTimeStamp:\"TopTimeStamp\",pinnedStartIndex:\"TopStartIndex\"},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\",C2cPeerReadTime:\"c2cPeerReadTime\",LastMsgFlags:\"lastMessageFlag\",TopFlags:\"isPinned\",TopTimeStamp:\"pinnedTimeStamp\",TopStartIndex:\"pinnedStartIndex\"}}}}(e)),this._configMap.set(ld,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.RECENT_CONTACT,\".\").concat(ei.CMD.DELETE_CONVERSATION)}),body:{fromAccount:\"\",toAccount:void 0,type:1,toGroupID:void 0,clearHistoryMessage:1},keyMap:{request:{toGroupID:\"ToGroupid\",clearHistoryMessage:\"ClearRamble\"}}}}(e)),this._configMap.set(dd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.RECENT_CONTACT,\".\").concat(ei.CMD.PIN_CONVERSATION)}),body:{fromAccount:\"\",operationType:1,itemList:void 0},keyMap:{request:{itemList:\"RecentContactItem\"}}}}(e)),this._configMap.set(pd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.DELETE_GROUP_AT_TIPS)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(Pl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.PROFILE,\".\").concat(ei.CMD.PORTRAIT_GET)}),body:{fromAccount:\"\",userItem:[]},keyMap:{request:{toAccount:\"To_Account\",standardSequence:\"StandardSequence\",customSequence:\"CustomSequence\"}}}}(e)),this._configMap.set(Ul,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.PROFILE,\".\").concat(ei.CMD.PORTRAIT_SET)}),body:{fromAccount:\"\",profileItem:[{tag:eu.NICK,value:\"\"},{tag:eu.GENDER,value:\"\"},{tag:eu.ALLOWTYPE,value:\"\"},{tag:eu.AVATAR,value:\"\"}]},keyMap:{request:{toAccount:\"To_Account\",standardSequence:\"StandardSequence\",customSequence:\"CustomSequence\"}}}}(e)),this._configMap.set(Fl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.GET_BLACKLIST)}),body:{fromAccount:\"\",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{response:{CurruentSequence:\"currentSequence\"}}}}(e)),this._configMap.set(ql,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.ADD_BLACKLIST)}),body:{fromAccount:\"\",toAccount:[]}}}(e)),this._configMap.set(xl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.DELETE_BLACKLIST)}),body:{fromAccount:\"\",toAccount:[]}}}(e)),this._configMap.set(Vl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.GET_FRIEND_LIST)}),body:{fromAccount:\"\",startIndex:0,standardSequence:0,customSequence:0},keyMap:{response:{FriendNum:\"friendCount\",UserDataItem:\"resultList\",ValueItem:\"tagValueList\"}}}}(e)),this._configMap.set(jl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.ADD_FRIEND)}),body:{fromAccount:\"\",addFriendItem:[],type:\"\"},keyMap:{request:{source:\"AddSource\",wording:\"AddWording\",type:\"AddType\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(Wl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.UPDATE_FRIEND)}),body:{fromAccount:\"\",updateItem:void 0},keyMap:{request:{snsItem:\"SnsItem\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(Hl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.DELETE_FRIEND)}),body:{fromAccount:\"\",userIDList:[],type:\"\"},keyMap:{request:{type:\"DeleteType\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(Kl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.GET_FRIEND_PROFILE)}),body:{fromAccount:\"\",userIDList:void 0,tagList:void 0},keyMap:{response:{InfoItem:\"resultList\",SnsProfileItem:\"tagValueList\"}}}}(e)),this._configMap.set(Bl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.CHECK_FRIEND)}),body:{fromAccount:\"\",userIDList:[],type:\"\"},keyMap:{request:{type:\"CheckType\"},response:{InfoItem:\"resultList\"}}}}(e)),this._configMap.set($l,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.GET_FRIEND_APPLICATION_LIST)}),body:{fromAccount:\"\",applicationType:\"\",startTime:0,maxLimited:0,lastSequence:0},keyMap:{response:{PendencyItem:\"resultList\",AddSource:\"source\",AddTime:\"time\",AddWording:\"wording\",Image:\"avatar\",UnreadPendencyCount:\"unreadCount\",To_Account:\"userID\",PendencyType:\"type\"}}}}(e)),this._configMap.set(Yl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.RESPOND_FRIEND_APPLICATION)}),body:{fromAccount:\"\",responseFriendItem:[]},keyMap:{request:{tag:\"TagName\",action:\"ResponseAction\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(zl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.DELETE_FRIEND_APPLICATION)}),body:{fromAccount:\"\",type:\"\",userIDList:void 0},keyMap:{request:{type:\"PendencyType\",userIDList:\"To_Account\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(Jl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.REPORT_FRIEND_APPLICATION)}),body:{fromAccount:\"\",latestTimeStamp:\"\"},keyMap:{request:{latestTimeStamp:\"LatestPendencyTimeStamp\"}}}}(e)),this._configMap.set(Ql,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.CREATE_FRIEND_GROUP)}),body:{fromAccount:\"\",groupName:void 0,userIDList:void 0},keyMap:{request:{groupName:\"GroupName\",userIDList:\"To_Account\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(Zl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.DELETE_FRIEND_GROUP)}),body:{fromAccount:\"\",nameList:void 0},keyMap:{request:{nameList:\"GroupName\"}}}}(e)),this._configMap.set(Xl,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.GET_FRIEND_GROUP_LIST)}),body:{fromAccount:\"\",lastSequence:0,needFriend:\"Need_Friend_Type_Yes\"},keyMap:{response:{ResultItem:\"resultList\",GroupName:\"name\",FriendNumber:\"friendCount\",To_Account:\"userIDList\"}}}}(e)),this._configMap.set(ed,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.UPDATE_FRIEND_GROUP)}),body:{fromAccount:\"\",oldName:\"\",newName:void 0,updateGroupItem:void 0},keyMap:{request:{oldName:\"GroupOldName\",newName:\"GroupNewName\"},response:{UpdateType:\"type\",ResultItem:\"resultList\"}}}}(e)),this._configMap.set(gd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_JOINED_GROUPS)}),body:{memberAccount:\"\",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0}},keyMap:{request:{memberAccount:\"Member_Account\"},response:{GroupIdList:\"groups\",MsgFlag:\"messageRemindType\",NoUnreadSeqList:\"excludedUnreadSequenceList\",MsgSeq:\"readedSequence\"}}}}(e)),this._configMap.set(hd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_GROUP_INFO)}),body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\",\"ShutUpAllMember\"],groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{request:{groupIDList:\"GroupIdList\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\",groupCustomFieldFilter:\"AppDefinedDataFilter_Group\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{GroupIdList:\"groups\",MsgFlag:\"messageRemindType\",AppDefinedData:\"groupCustomField\",AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_Group:\"groupCustomFieldFilter\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",InfoSeq:\"infoSequence\",MemberList:\"members\",GroupInfo:\"groups\",ShutUpUntil:\"muteUntil\",ShutUpAllMember:\"muteAllMembers\",ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(fd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.CREATE_GROUP)}),body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:\"FaceUrl\"},keyMap:{request:{ownerID:\"Owner_Account\",userID:\"Member_Account\",avatar:\"FaceUrl\",maxMemberNum:\"MaxMemberCount\",joinOption:\"ApplyJoinOption\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\"},response:{HugeGroupFlag:\"avChatRoomFlag\",OverJoinedGroupLimit_Account:\"overLimitUserIDList\"}}}}(e)),this._configMap.set(_d,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.DESTROY_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(md,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.MODIFY_GROUP_INFO)}),body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0},keyMap:{request:{maxMemberNum:\"MaxMemberCount\",groupCustomField:\"AppDefinedData\",muteAllMembers:\"ShutUpAllMember\",joinOption:\"ApplyJoinOption\",avatar:\"FaceUrl\"},response:{AppDefinedData:\"groupCustomField\",ShutUpAllMember:\"muteAllMembers\",ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(vd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1,historyMessageFlag:void 0},keyMap:{request:{applyMessage:\"ApplyMsg\",historyMessageFlag:\"HugeGroupHistoryMsgFlag\"},response:{HugeGroupFlag:\"avChatRoomFlag\",AVChatRoomKey:\"avChatRoomKey\",RspMsgList:\"messageList\",ToGroupId:\"to\"}}}}(e)),this._configMap.set(Md,function(e){e.a2,e.tinyid;return{head:Sn({},On(e,[\"a2\",\"tinyid\"]),{servcmd:\"\".concat(ei.NAME.BIG_GROUP_NO_AUTH,\".\").concat(ei.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:\"ApplyMsg\"},response:{HugeGroupFlag:\"avChatRoomFlag\"}}}}(e)),this._configMap.set(yd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.QUIT_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(Id,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.SEARCH_GROUP_BY_ID)}),body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"CreateTime\",\"Owner_Account\",\"LastInfoTime\",\"LastMsgTime\",\"NextMsgSeq\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\"]}},keyMap:{response:{ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(Ed,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.CHANGE_GROUP_OWNER)}),body:{groupID:void 0,newOwnerID:void 0},keyMap:{request:{newOwnerID:\"NewOwner_Account\"}}}}(e)),this._configMap.set(Td,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.HANDLE_APPLY_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{applicant:\"Applicant_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"}}}}(e)),this._configMap.set(Ad,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.HANDLE_GROUP_INVITATION)}),body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{inviter:\"Inviter_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"}}}}(e)),this._configMap.set(Od,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_GROUP_APPLICATION)}),body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{request:{handleAccount:\"Handle_Account\"}}}}(e)),this._configMap.set(Gd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.DELETE_GROUP_SYSTEM_MESSAGE)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(bd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.BIG_GROUP_LONG_POLLING,\".\").concat(ei.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\"}}}}(e)),this._configMap.set(wd,function(e){e.a2,e.tinyid;return{head:Sn({},On(e,[\"a2\",\"tinyid\"]),{servcmd:\"\".concat(ei.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,\".\").concat(ei.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\"}}}}(e)),this._configMap.set(Pd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_ONLINE_MEMBER_NUM)}),body:{groupID:void 0}}}(e)),this._configMap.set(Fd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.SET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\",value:\"value\"}}}}(e)),this._configMap.set(qd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.MODIFY_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\",value:\"value\"}}}}(e)),this._configMap.set(xd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.DELETE_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\"}}}}(e)),this._configMap.set(Vd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.CLEAR_GROUP_ATTRIBUTES)}),body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]}}}(e)),this._configMap.set(Kd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP_ATTR,\".\").concat(ei.CMD.GET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{request:{avChatRoomKey:\"Key\",groupType:\"GroupType\"}}}}(e)),this._configMap.set(Bd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_GROUP_MEMBER_LIST)}),body:{groupID:void 0,limit:0,offset:void 0,next:void 0,memberRoleFilter:void 0,memberInfoFilter:[\"Role\",\"NameCard\",\"ShutUpUntil\",\"JoinTime\"],memberCustomFieldFilter:void 0},keyMap:{request:{memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",MemberList:\"members\",ShutUpUntil:\"muteUntil\"}}}}(e)),this._configMap.set(Hd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{request:{userIDList:\"Member_List_Account\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{MemberList:\"members\",ShutUpUntil:\"muteUntil\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",AppMemberDefinedData:\"memberCustomField\"}}}}(e)),this._configMap.set(jd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.ADD_GROUP_MEMBER)}),body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{request:{userID:\"Member_Account\",userIDList:\"MemberList\"},response:{MemberList:\"members\"}}}}(e)),this._configMap.set(Wd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.DELETE_GROUP_MEMBER)}),body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{request:{userIDList:\"MemberToDel_Account\"}}}}(e)),this._configMap.set(Yd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.MODIFY_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{request:{userID:\"Member_Account\",memberCustomField:\"AppMemberDefinedData\",muteTime:\"ShutUpTime\",messageRemindType:\"MsgFlag\"}}}}(e)),this._configMap.set(Xd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_STAT,\".\").concat(ei.CMD.TIM_WEB_REPORT_V2)}),body:{header:{},event:[],quality:[]},keyMap:{request:{SDKType:\"sdk_type\",SDKVersion:\"sdk_version\",deviceType:\"device_type\",platform:\"platform\",instanceID:\"instance_id\",traceID:\"trace_id\",SDKAppID:\"sdk_app_id\",userID:\"user_id\",tinyID:\"tiny_id\",extension:\"extension\",timestamp:\"timestamp\",networkType:\"network_type\",eventType:\"event_type\",code:\"error_code\",message:\"error_message\",moreMessage:\"more_message\",duplicate:\"duplicate\",costTime:\"cost_time\",level:\"level\",qualityType:\"quality_type\",reportIndex:\"report_index\",wholePeriod:\"whole_period\",totalCount:\"total_count\",rttCount:\"success_count_business\",successRateOfRequest:\"percent_business\",countLessThan1Second:\"success_count_business\",percentOfCountLessThan1Second:\"percent_business\",countLessThan3Second:\"success_count_platform\",percentOfCountLessThan3Second:\"percent_platform\",successCountOfBusiness:\"success_count_business\",successRateOfBusiness:\"percent_business\",successCountOfPlatform:\"success_count_platform\",successRateOfPlatform:\"percent_platform\",successCountOfMessageReceived:\"success_count_business\",successRateOfMessageReceived:\"percent_business\",avgRTT:\"average_value\",avgDelay:\"average_value\",avgValue:\"average_value\",uiPlatform:\"ui_platform\"}}}}(n)),this._configMap.set(Qd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.HEARTBEAT,\".\").concat(ei.CMD.ALIVE)}),body:{}}}(e)),this._configMap.set(Zd,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_PUSH,\".\").concat(ei.CMD.MESSAGE_PUSH)}),body:{},keyMap:{response:{C2cMsgArray:\"C2CMessageArray\",GroupMsgArray:\"groupMessageArray\",GroupTips:\"groupTips\",C2cNotifyMsgArray:\"C2CNotifyMessageArray\",ClientSeq:\"clientSequence\",MsgPriority:\"priority\",NoticeSeq:\"noticeSequence\",MsgContent:\"content\",MsgType:\"type\",MsgBody:\"elements\",ToGroupId:\"to\",Desc:\"description\",Ext:\"extension\",IsSyncMsg:\"isSyncMessage\",Flag:\"needSync\",NeedAck:\"needAck\",PendencyAdd_Account:\"userID\",ProfileImNick:\"nick\",PendencyType:\"applicationType\",C2CReadAllMsg:\"readAllC2CMessage\"}}}}(e)),this._configMap.set(ep,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_PUSH,\".\").concat(ei.CMD.MULTI_MESSAGE_PUSH)}),body:{},keyMap:{response:{GroupMsgArray:\"groupMessageArray\",GroupTips:\"groupTips\",ClientSeq:\"clientSequence\",MsgPriority:\"priority\",NoticeSeq:\"noticeSequence\",MsgContent:\"content\",MsgType:\"type\",MsgBody:\"elements\",ToGroupId:\"to\",Desc:\"description\",Ext:\"extension\",IsSyncMsg:\"isSyncMessage\",Flag:\"needSync\",NeedAck:\"needAck\",PendencyType:\"applicationType\"}}}}(e)),this._configMap.set(tp,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.MESSAGE_PUSH_ACK)}),body:{sessionData:void 0},keyMap:{request:{sessionData:\"SessionData\"}}}}(e)),this._configMap.set(np,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_STATUS,\".\").concat(ei.CMD.STATUS_FORCEOFFLINE)}),body:{},keyMap:{response:{C2cNotifyMsgArray:\"C2CNotifyMessageArray\",NoticeSeq:\"noticeSequence\",KickoutMsgNotify:\"kickoutMsgNotify\",NewInstInfo:\"newInstanceInfo\"}}}}(e)),this._configMap.set(rp,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_LONG_MESSAGE,\".\").concat(ei.CMD.DOWNLOAD_MERGER_MESSAGE)}),body:{downloadKey:\"\"},keyMap:{response:{Data:\"data\",Desc:\"description\",Ext:\"extension\",Download_Flag:\"downloadFlag\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\"}}}}(e)),this._configMap.set(op,function(e){return{head:Sn({},e,{servcmd:\"\".concat(ei.NAME.IM_LONG_MESSAGE,\".\").concat(ei.CMD.UPLOAD_MERGER_MESSAGE)}),body:{messageList:[]},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",type:\"MsgType\",content:\"MsgContent\",data:\"Data\",description:\"Desc\",extension:\"Ext\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",elements:\"MsgBody\",clientSequence:\"ClientSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"}}}}(e))}},{key:\"has\",value:function(e){return this._configMap.has(e)}},{key:\"get\",value:function(e){return this._configMap.get(e)}},{key:\"update\",value:function(){this._fillConfigMap()}},{key:\"getKeyMap\",value:function(e){return this.has(e)?this.get(e).keyMap||{}:(Qi.warn(\"\".concat(this._className,\".getKeyMap unknown protocolName:\").concat(e)),{})}},{key:\"getProtocolData\",value:function(e){var t=e.protocolName,n=e.requestData,o=this.get(t),r=null;if(n){var a=this._simpleDeepCopy(o),s=this._updateService(n,a),i=s.body,u=Object.create(null);for(var c in i)if(Object.prototype.hasOwnProperty.call(i,c)){if(u[c]=i[c],void 0===n[c])continue;u[c]=n[c]}s.body=u,r=this._getUplinkData(s)}else r=this._getUplinkData(o);return r}},{key:\"_getUplinkData\",value:function(e){var t=this._requestDataCleaner(e),n=Wu(t.head),o=Cv(t.body,this._getRequestKeyMap(n));return t.body=o,t}},{key:\"_updateService\",value:function(e,t){var n=Wu(t.head);if(t.head.servcmd.includes(ei.NAME.GROUP)){var o=e.type,r=e.groupID,a=void 0===r?void 0:r,s=e.groupIDList,i=void 0===s?[]:s;hu(a)&&(a=i[0]||\"\"),Pu({type:o,groupID:a})&&(t.head.servcmd=\"\".concat(ei.NAME.GROUP_COMMUNITY,\".\").concat(n))}return t}},{key:\"_getRequestKeyMap\",value:function(e){var t=this.getKeyMap(e);return Sn({},Av.request,{},t.request)}},{key:\"_requestDataCleaner\",value:function(e){var t=Array.isArray(e)?[]:Object.create(null);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&Mu(n)&&null!==e[n]&&void 0!==e[n]&&(\"object\"!==Mn(e[n])?t[n]=e[n]:t[n]=this._requestDataCleaner.bind(this)(e[n]));return t}},{key:\"_simpleDeepCopy\",value:function(e){for(var t,n=Object.keys(e),o={},r=0,a=n.length;r<a;r++)t=n[r],gu(e[t])?o[t]=Array.from(e[t]):du(e[t])?o[t]=this._simpleDeepCopy(e[t]):o[t]=e[t];return o}}]),e}(),_I=[tp],mI=function(){function e(t){yn(this,e),this._sessionModule=t,this._className=\"DownlinkHandler\",this._eventHandlerMap=new Map,this._eventHandlerMap.set(\"C2CMessageArray\",this._c2cMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"groupMessageArray\",this._groupMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"groupTips\",this._groupTipsHandler.bind(this)),this._eventHandlerMap.set(\"C2CNotifyMessageArray\",this._C2CNotifyMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"profileModify\",this._profileHandler.bind(this)),this._eventHandlerMap.set(\"friendListMod\",this._relationChainHandler.bind(this)),this._eventHandlerMap.set(\"recentContactMod\",this._recentContactHandler.bind(this)),this._eventHandlerMap.set(\"readAllC2CMessage\",this._allMessageReadHandler.bind(this)),this._keys=Un(this._eventHandlerMap.keys())}return En(e,[{key:\"_c2cMessageArrayHandler\",value:function(e){var t=this._sessionModule.getModule(sl);if(t){if(e.dataList.forEach((function(e){if(1===e.isSyncMessage){var t=e.from;e.from=e.to,e.to=t}})),1===e.needSync)this._sessionModule.getModule(vl).startOnlineSync();t.onNewC2CMessage({dataList:e.dataList,isInstantMessage:!0})}}},{key:\"_groupMessageArrayHandler\",value:function(e){var t=this._sessionModule.getModule(il);t&&t.onNewGroupMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}},{key:\"_groupTipsHandler\",value:function(e){var t=this._sessionModule.getModule(il);if(t){var n=e.event,o=e.dataList,r=e.isInstantMessage,a=void 0===r||r,s=e.isSyncingEnded;switch(n){case 4:case 6:t.onNewGroupTips({event:n,dataList:o});break;case 5:o.forEach((function(e){gu(e.elements.revokedInfos)?t.onGroupMessageRevoked({dataList:o}):gu(e.elements.groupMessageReadNotice)?t.onGroupMessageReadNotice({dataList:o}):gu(e.elements.readReceiptList)?t.onReadReceiptList({dataList:o}):t.onNewGroupSystemNotice({dataList:o,isInstantMessage:a,isSyncingEnded:s})}));break;case 12:this._sessionModule.getModule(ll).onNewGroupAtTips({dataList:o});break;default:Qi.log(\"\".concat(this._className,\"._groupTipsHandler unknown event:\").concat(n,\" dataList:\"),o)}}}},{key:\"_C2CNotifyMessageArrayHandler\",value:function(e){var t=this,n=e.dataList;if(gu(n)){var o=this._sessionModule.getModule(sl);n.forEach((function(e){if(pu(e))if(e.hasOwnProperty(\"kickoutMsgNotify\")){var r=e.kickoutMsgNotify,a=r.kickType,s=r.newInstanceInfo,i=void 0===s?{}:s;1===a?t._sessionModule.onMultipleAccountKickedOut(i):2===a&&t._sessionModule.onMultipleDeviceKickedOut(i)}else if(e.hasOwnProperty(\"c2cMessageRevokedNotify\"))o&&o.onC2CMessageRevoked({dataList:n});else if(e.hasOwnProperty(\"c2cMessageReadReceipt\"))o&&o.onC2CMessageReadReceipt({dataList:n});else if(e.hasOwnProperty(\"c2cMessageReadNotice\"))o&&o.onC2CMessageReadNotice({dataList:n});else if(e.hasOwnProperty(\"muteNotificationsSync\")){t._sessionModule.getModule(ll).onC2CMessageRemindTypeSynced({dataList:n})}}))}}},{key:\"_profileHandler\",value:function(e){this._sessionModule.getModule(al).onProfileModified({dataList:e.dataList});var t=this._sessionModule.getModule(ul);t&&t.onFriendProfileModified({dataList:e.dataList})}},{key:\"_relationChainHandler\",value:function(e){this._sessionModule.getModule(al).onRelationChainModified({dataList:e.dataList});var t=this._sessionModule.getModule(ul);t&&t.onRelationChainModified({dataList:e.dataList})}},{key:\"_recentContactHandler\",value:function(e){var t=e.dataList;if(gu(t)){var n=this._sessionModule.getModule(ll);n&&t.forEach((function(e){var t=e.pushType,o=e.recentContactTopItem,r=e.recentContactDeleteItem;1===t?n.onConversationDeleted(r.recentContactList):2===t?n.onConversationPinned(o.recentContactList):3===t&&n.onConversationUnpinned(o.recentContactList)}))}}},{key:\"_allMessageReadHandler\",value:function(e){var t=e.dataList,n=this._sessionModule.getModule(ll);n&&n.onPushedAllMessageRead(t)}},{key:\"onMessage\",value:function(e){var t=this,n=e.body;if(this._filterMessageFromIMOpenPush(e)){var o=n.eventArray,r=n.isInstantMessage,a=n.isSyncingEnded,s=n.needSync;if(gu(o))for(var i=null,u=null,c=0,l=0,d=o.length;l<d;l++){c=(i=o[l]).event;var p=Object.keys(i).find((function(e){return-1!==t._keys.indexOf(e)}));p?(u=14!==c?i[p]:{readAllC2CMessage:i[p],groupMessageReadInfoList:i.groupMessageReadNotice||[]},this._eventHandlerMap.get(p)({event:c,dataList:u,isInstantMessage:r,isSyncingEnded:a,needSync:s})):Qi.log(\"\".concat(this._className,\".onMessage unknown eventItem:\").concat(i))}}}},{key:\"_filterMessageFromIMOpenPush\",value:function(e){var t=e.head,n=e.body,o=t.servcmd,r=!1;if(hu(o)||(r=o.includes(ei.NAME.IM_CONFIG_MANAGER)||o.includes(ei.NAME.OVERLOAD_PUSH)||o.includes(ei.NAME.STAT_SERVICE)),!r)return!0;if(o.includes(ei.CMD.PUSHED_CLOUD_CONTROL_CONFIG))this._sessionModule.getModule(El).onPushedCloudControlConfig(n);else if(o.includes(ei.CMD.PUSHED_COMMERCIAL_CONFIG)){this._sessionModule.getModule(Dl).onPushedConfig(n)}else if(o.includes(ei.CMD.OVERLOAD_NOTIFY))this._sessionModule.onPushedServerOverload(n);else if(o.includes(ei.CMD.KICK_OTHER)){var a=Date.now();this._sessionModule.reLoginOnKickOther();var s=new Dp(Gp),i=this._sessionModule.getModule(ol).getLastWsHelloTs(),u=a-i;s.setMessage(\"last wshello time:\".concat(i,\" diff:\").concat(u,\"ms\")).setNetworkType(this._sessionModule.getNetworkType()).end()}return!1}}]),e}(),vI=[{cmd:ei.CMD.GET_GROUP_INFO,interval:1,count:20},{cmd:ei.CMD.SET_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:ei.CMD.MODIFY_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:ei.CMD.DELETE_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:ei.CMD.CLEAR_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:ei.CMD.GET_GROUP_ATTRIBUTES,interval:5,count:20},{cmd:ei.CMD.SET_ALL_MESSAGE_READ,interval:1,count:1}],MI=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"SessionModule\",o._platform=o.getPlatform(),o._protocolHandler=new fI(Gn(o)),o._messageDispatcher=new mI(Gn(o)),o._commandFrequencyLimitMap=new Map,o._commandRequestInfoMap=new Map,o._serverOverloadInfoMap=new Map,o._init(),o.getInnerEmitterInstance().on(ym,o._onCloudConfigUpdated,Gn(o)),o}return En(n,[{key:\"_init\",value:function(){this._updateCommandFrequencyLimitMap(vI)}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"cmd_frequency_limit\");hu(e)||(e=JSON.parse(e),this._updateCommandFrequencyLimitMap(e))}},{key:\"_updateCommandFrequencyLimitMap\",value:function(e){var t=this;e.forEach((function(e){t._commandFrequencyLimitMap.set(e.cmd,{interval:e.interval,count:e.count})}))}},{key:\"updateProtocolConfig\",value:function(){this._protocolHandler.update()}},{key:\"request\",value:function(e){Qi.debug(\"\".concat(this._className,\".request options:\"),e);var t=e.protocolName,n=e.tjgID;if(!this._protocolHandler.has(t))return Qi.warn(\"\".concat(this._className,\".request unknown protocol:\").concat(t)),um({code:lp.CANNOT_FIND_PROTOCOL,message:dp.CANNOT_FIND_PROTOCOL});var o=this.getProtocolData(e),r=o.head.servcmd;if(this._isFrequencyOverLimit(r))return um({code:lp.OVER_FREQUENCY_LIMIT,message:dp.OVER_FREQUENCY_LIMIT});if(this._isServerOverload(r))return um({code:lp.OPEN_SERVICE_OVERLOAD_ERROR,message:dp.OPEN_SERVICE_OVERLOAD_ERROR});Xu(n)||(o.head.tjgID=n);var a=this.getModule(yl);return _I.includes(t)?a.simplySend(o):a.send(o)}},{key:\"getKeyMap\",value:function(e){return this._protocolHandler.getKeyMap(e)}},{key:\"genCommonHead\",value:function(){var e=this.getModule(dl);return{ver:\"v4\",platform:this._platform,websdkappid:Ys,websdkversion:Ws,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:51,tjgID:\"\"}}},{key:\"genCosSpecifiedHead\",value:function(){var e=this.getModule(dl);return{ver:\"v4\",platform:this._platform,websdkappid:Ys,websdkversion:Ws,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:51}}},{key:\"genSSOReportHead\",value:function(){var e=this.getModule(dl);return{ver:\"v4\",platform:this._platform,websdkappid:Ys,websdkversion:Ws,sdkappid:e.getSDKAppID(),contenttype:\"\",reqtime:0,identifier:\"\",usersig:\"\",status_instid:e.getStatusInstanceID(),sdkability:51}}},{key:\"getProtocolData\",value:function(e){return this._protocolHandler.getProtocolData(e)}},{key:\"onErrorCodeNotZero\",value:function(e){var t=e.errorCode;if(t===lp.HELLO_ANSWER_KICKED_OUT){var n=e.kickType,o=e.newInstanceInfo,r=void 0===o?{}:o;1===n?this.onMultipleAccountKickedOut(r):2===n&&this.onMultipleDeviceKickedOut(r)}t!==lp.MESSAGE_A2KEY_EXPIRED&&t!==lp.ACCOUNT_A2KEY_EXPIRED||(this._onUserSigExpired(),this.getModule(yl).reConnect())}},{key:\"onMessage\",value:function(e){var t=e.body,n=t.needAck,o=void 0===n?0:n,r=t.sessionData;1===o&&this._sendACK(r),this._messageDispatcher.onMessage(e)}},{key:\"onReconnected\",value:function(){this._reLoginOnReconnected()}},{key:\"reLoginOnKickOther\",value:function(){Qi.log(\"\".concat(this._className,\".reLoginOnKickOther\")),this._reLogin()}},{key:\"_reLoginOnReconnected\",value:function(){Qi.log(\"\".concat(this._className,\"._reLoginOnReconnected\")),this._reLogin()}},{key:\"_reLogin\",value:function(){var e=this;this.isLoggedIn()&&this.request({protocolName:Cl}).then((function(t){var n=t.data.instanceID;e.getModule(dl).setStatusInstanceID(n),Qi.log(\"\".concat(e._className,\"._reLogin ok. start to sync unread messages\")),e.getModule(vl).startSyncOnReconnected(),e.getModule(Al).startPull(),e.getModule(il).updateLocalMainSequenceOnReconnected()}))}},{key:\"onMultipleAccountKickedOut\",value:function(e){this.getModule(ol).onMultipleAccountKickedOut(e)}},{key:\"onMultipleDeviceKickedOut\",value:function(e){this.getModule(ol).onMultipleDeviceKickedOut(e)}},{key:\"_onUserSigExpired\",value:function(){this.getModule(ol).onUserSigExpired()}},{key:\"_sendACK\",value:function(e){this.request({protocolName:tp,requestData:{sessionData:e}})}},{key:\"_isFrequencyOverLimit\",value:function(e){var t=e.split(\".\")[1];if(!this._commandFrequencyLimitMap.has(t))return!1;if(!this._commandRequestInfoMap.has(t))return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;var n=this._commandFrequencyLimitMap.get(t),o=n.count,r=n.interval,a=this._commandRequestInfoMap.get(t),s=a.startTime,i=a.requestCount;if(Date.now()-s>1e3*r)return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;i+=1,this._commandRequestInfoMap.set(t,{startTime:s,requestCount:i});var u=!1;return i>o&&(u=!0),u}},{key:\"_isServerOverload\",value:function(e){if(!this._serverOverloadInfoMap.has(e))return!1;var t=this._serverOverloadInfoMap.get(e),n=t.overloadTime,o=t.waitingTime,r=!1;return Date.now()-n<=1e3*o?r=!0:(this._serverOverloadInfoMap.delete(e),r=!1),r}},{key:\"onPushedServerOverload\",value:function(e){var t=e.overloadCommand,n=e.waitingTime;this._serverOverloadInfoMap.set(t,{overloadTime:Date.now(),waitingTime:n}),Qi.warn(\"\".concat(this._className,\".onPushedServerOverload waitingTime:\").concat(n,\"s\"))}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._updateCommandFrequencyLimitMap(vI),this._commandRequestInfoMap.clear(),this._serverOverloadInfoMap.clear()}}]),n}(Nl),yI=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"MessageLossDetectionModule\",o._maybeLostSequencesMap=new Map,o}return En(n,[{key:\"onMessageMaybeLost\",value:function(e,t,n){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);for(var o=this._maybeLostSequencesMap.get(e),r=0;r<n;r++)o.push(t+r);Qi.debug(\"\".concat(this._className,\".onMessageMaybeLost. maybeLostSequences:\").concat(o))}},{key:\"detectMessageLoss\",value:function(e,t){var n=this._maybeLostSequencesMap.get(e);if(!Xu(n)&&!Xu(t)){var o=t.filter((function(e){return-1!==n.indexOf(e)}));if(Qi.debug(\"\".concat(this._className,\".detectMessageLoss. matchedSequences:\").concat(o)),n.length===o.length)Qi.info(\"\".concat(this._className,\".detectMessageLoss no message loss. conversationID:\").concat(e));else{var r,a=n.filter((function(e){return-1===o.indexOf(e)})),s=a.length;s<=5?r=e+\"-\"+a.join(\"-\"):(a.sort((function(e,t){return e-t})),r=e+\" start:\"+a[0]+\" end:\"+a[s-1]+\" count:\"+s),new Dp(jg).setMessage(r).setNetworkType(this.getNetworkType()).setLevel(\"warning\").end(),Qi.warn(\"\".concat(this._className,\".detectMessageLoss message loss detected. conversationID:\").concat(e,\" lostSequences:\").concat(a))}n.length=0}}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._maybeLostSequencesMap.clear()}}]),n}(Nl),II=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"CloudControlModule\",o._cloudConfig=new Map,o._expiredTime=0,o._version=0,o._isFetching=!1,o}return En(n,[{key:\"getCloudConfig\",value:function(e){return hu(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}},{key:\"_canFetchConfig\",value:function(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}},{key:\"fetchConfig\",value:function(){var e=this,t=this._canFetchConfig();if(Qi.log(\"\".concat(this._className,\".fetchConfig canFetchConfig:\").concat(t)),t){var n=new Dp(_h),o=this.getModule(dl).getSDKAppID();this._isFetching=!0,this.request({protocolName:ap,requestData:{SDKAppID:o,version:this._version}}).then((function(t){e._isFetching=!1,n.setMessage(\"version:\".concat(e._version,\" newVersion:\").concat(t.data.version,\" config:\").concat(t.data.cloudControlConfig)).setNetworkType(e.getNetworkType()).end(),Qi.log(\"\".concat(e._className,\".fetchConfig ok\")),e._parseCloudControlConfig(t.data)})).catch((function(t){e._isFetching=!1,e.probeNetwork().then((function(e){var o=Pn(e,2),r=o[0],a=o[1];n.setError(t,r,a).end()})),Qi.log(\"\".concat(e._className,\".fetchConfig failed. error:\"),t),e._setExpiredTimeOnResponseError(12e4)}))}}},{key:\"onPushedCloudControlConfig\",value:function(e){Qi.log(\"\".concat(this._className,\".onPushedCloudControlConfig\")),new Dp(mh).setNetworkType(this.getNetworkType()).setMessage(\"newVersion:\".concat(e.version,\" config:\").concat(e.cloudControlConfig)).end(),this._parseCloudControlConfig(e)}},{key:\"onCheckTimer\",value:function(e){this._canFetchConfig()&&this.fetchConfig()}},{key:\"_parseCloudControlConfig\",value:function(e){var t=this,n=\"\".concat(this._className,\"._parseCloudControlConfig\"),o=e.errorCode,r=e.errorMessage,a=e.cloudControlConfig,s=e.version,i=e.expiredTime;if(0===o){if(this._version!==s){var u=null;try{u=JSON.parse(a)}catch(zI){Qi.error(\"\".concat(n,\" JSON parse error:\").concat(a))}u&&(this._cloudConfig.clear(),Object.keys(u).forEach((function(e){t._cloudConfig.set(e,u[e])})),this._version=s,this.emitInnerEvent(ym))}this._expiredTime=Date.now()+1e3*i}else hu(o)?(Qi.log(\"\".concat(n,\" failed. Invalid message format:\"),e),this._setExpiredTimeOnResponseError(36e5)):(Qi.error(\"\".concat(n,\" errorCode:\").concat(o,\" errorMessage:\").concat(r)),this._setExpiredTimeOnResponseError(12e4))}},{key:\"_setExpiredTimeOnResponseError\",value:function(e){this._expiredTime=Date.now()+e}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}]),n}(Nl),EI=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"PullGroupMessageModule\",o._remoteLastMessageSequenceMap=new Map,o.PULL_LIMIT_COUNT=15,o}return En(n,[{key:\"startPull\",value:function(){var e=this,t=this._getNeedPullConversationList();this._getRemoteLastMessageSequenceList().then((function(){var n=e.getModule(ll);t.forEach((function(t){var o=t.conversationID,r=o.replace(Yn.CONV_GROUP,\"\"),a=n.getGroupLocalLastMessageSequence(o),s=e._remoteLastMessageSequenceMap.get(r)||0,i=s-a;Qi.log(\"\".concat(e._className,\".startPull groupID:\").concat(r,\" localLastMessageSequence:\").concat(a,\" \")+\"remoteLastMessageSequence:\".concat(s,\" diff:\").concat(i)),a>0&&i>=1&&i<300&&e._pullMissingMessage({groupID:r,localLastMessageSequence:a,remoteLastMessageSequence:s,diff:i})}))}))}},{key:\"_getNeedPullConversationList\",value:function(){return this.getModule(ll).getLocalConversationList().filter((function(e){return e.type===Yn.CONV_GROUP&&e.groupProfile.type!==Yn.GRP_AVCHATROOM}))}},{key:\"_getRemoteLastMessageSequenceList\",value:function(){var e=this;return this.getModule(il).getGroupList().then((function(t){for(var n=t.data.groupList,o=void 0===n?[]:n,r=0;r<o.length;r++){var a=o[r],s=a.groupID,i=a.nextMessageSeq;if(a.type!==Yn.GRP_AVCHATROOM){var u=i-1;e._remoteLastMessageSequenceMap.set(s,u)}}}))}},{key:\"_pullMissingMessage\",value:function(e){var t=this,n=e.localLastMessageSequence,o=e.remoteLastMessageSequence,r=e.diff;e.count=r>this.PULL_LIMIT_COUNT?this.PULL_LIMIT_COUNT:r,e.sequence=r>this.PULL_LIMIT_COUNT?n+this.PULL_LIMIT_COUNT:n+r,this._getGroupMissingMessage(e).then((function(a){a.length>0&&(a[0].sequence+1<=o&&(e.localLastMessageSequence=n+t.PULL_LIMIT_COUNT,e.diff=r-t.PULL_LIMIT_COUNT,t._pullMissingMessage(e)),t.getModule(il).onNewGroupMessage({dataList:a,isInstantMessage:!1}))}))}},{key:\"_getGroupMissingMessage\",value:function(e){var t=this,n=new Dp(Ng);return this.request({protocolName:Cd,requestData:{groupID:e.groupID,count:e.count,sequence:e.sequence}}).then((function(o){var r=o.data.messageList,a=void 0===r?[]:r;return n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e.groupID,\" count:\").concat(e.count,\" sequence:\").concat(e.sequence,\" messageList length:\").concat(a.length)).end(),a})).catch((function(e){t.probeNetwork().then((function(t){var o=Pn(t,2),r=o[0],a=o[1];n.setError(e,r,a).end()}))}))}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._remoteLastMessageSequenceMap.clear()}}]),n}(Nl),TI=function(){function e(){yn(this,e),this._className=\"AvgE2EDelay\",this._e2eDelayArray=[]}return En(e,[{key:\"addMessageDelay\",value:function(e){var t=$i()-e;t>=0&&this._e2eDelayArray.push(t)}},{key:\"_calcAvg\",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),Yu(n/t,1)}},{key:\"_calcCountWithLimit\",value:function(e){var t=e.e2eDelayArray,n=e.min,o=e.max;return t.filter((function(e){return n<=e&&e<o})).length}},{key:\"_calcPercent\",value:function(e,t){var n=Yu(e/t*100,2);return n>100&&(n=100),n}},{key:\"_checkE2EDelayException\",value:function(e,t){var n=e.filter((function(e){return e>t}));if(n.length>0){var o=n.length,r=Math.min.apply(Math,Un(n)),a=Math.max.apply(Math,Un(n)),s=this._calcAvg(n,o),i=Yu(o/e.length*100,2);if(i>50)new Dp(ag).setMessage(\"message e2e delay exception. count:\".concat(o,\" min:\").concat(r,\" max:\").concat(a,\" avg:\").concat(s,\" percent:\").concat(i)).setLevel(\"warning\").end()}}},{key:\"getStatResult\",value:function(){var e=this._e2eDelayArray.length;if(0===e)return null;var t=Un(this._e2eDelayArray),n=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),o=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),r=this._calcPercent(n,e),a=this._calcPercent(o,e),s=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),t.length=0,this.reset(),{totalCount:e,countLessThan1Second:n,percentOfCountLessThan1Second:r,countLessThan3Second:o,percentOfCountLessThan3Second:a,avgDelay:s}}},{key:\"reset\",value:function(){this._e2eDelayArray.length=0}}]),e}(),AI=function(){function e(){yn(this,e),this._className=\"AvgRTT\",this._requestCount=0,this._rttArray=[]}return En(e,[{key:\"addRequestCount\",value:function(){this._requestCount+=1}},{key:\"addRTT\",value:function(e){this._rttArray.push(e)}},{key:\"_calcTotalCount\",value:function(){return this._requestCount}},{key:\"_calcRTTCount\",value:function(e){return e.length}},{key:\"_calcSuccessRateOfRequest\",value:function(e,t){if(0===t)return 0;var n=Yu(e/t*100,2);return n>100&&(n=100),n}},{key:\"_calcAvg\",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),parseInt(n/t)}},{key:\"_calcMax\",value:function(){return Math.max.apply(Math,Un(this._rttArray))}},{key:\"_calcMin\",value:function(){return Math.min.apply(Math,Un(this._rttArray))}},{key:\"getStatResult\",value:function(){var e=this._calcTotalCount(),t=Un(this._rttArray);if(0===e)return null;var n=this._calcRTTCount(t),o=this._calcSuccessRateOfRequest(n,e),r=this._calcAvg(t,n);return Qi.log(\"\".concat(this._className,\".getStatResult max:\").concat(this._calcMax(),\" min:\").concat(this._calcMin(),\" avg:\").concat(r)),this.reset(),{totalCount:e,rttCount:n,successRateOfRequest:o,avgRTT:r}}},{key:\"reset\",value:function(){this._requestCount=0,this._rttArray.length=0}}]),e}(),SI=function(){function e(){yn(this,e),this._map=new Map}return En(e,[{key:\"initMap\",value:function(e){var t=this;e.forEach((function(e){t._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}))}},{key:\"addTotalCount\",value:function(e){return!(hu(e)||!this._map.has(e))&&(this._map.get(e).totalCount+=1,!0)}},{key:\"addSuccessCount\",value:function(e){return!(hu(e)||!this._map.has(e))&&(this._map.get(e).successCount+=1,!0)}},{key:\"addFailedCountOfUserSide\",value:function(e){return!(hu(e)||!this._map.has(e))&&(this._map.get(e).failedCountOfUserSide+=1,!0)}},{key:\"addCost\",value:function(e,t){return!(hu(e)||!this._map.has(e))&&(this._map.get(e).costArray.push(t),!0)}},{key:\"addFileSize\",value:function(e,t){return!(hu(e)||!this._map.has(e))&&(this._map.get(e).fileSizeArray.push(t),!0)}},{key:\"_calcSuccessRateOfBusiness\",value:function(e){if(hu(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=Yu(t.successCount/t.totalCount*100,2);return n>100&&(n=100),n}},{key:\"_calcSuccessRateOfPlatform\",value:function(e){if(hu(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return(n=Yu(n,2))>100&&(n=100),n}},{key:\"_calcTotalCount\",value:function(e){return hu(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:\"_calcSuccessCountOfBusiness\",value:function(e){return hu(e)||!this._map.has(e)?-1:this._map.get(e).successCount}},{key:\"_calcSuccessCountOfPlatform\",value:function(e){if(hu(e)||!this._map.has(e))return-1;var t=this._map.get(e);return t.successCount+t.failedCountOfUserSide}},{key:\"_calcAvg\",value:function(e){return hu(e)||!this._map.has(e)?-1:e===vp?this._calcAvgSpeed(e):this._calcAvgCost(e)}},{key:\"_calcAvgCost\",value:function(e){var t=this._map.get(e).costArray.length;if(0===t)return 0;var n=0;return this._map.get(e).costArray.forEach((function(e){n+=e})),parseInt(n/t)}},{key:\"_calcAvgSpeed\",value:function(e){var t=0,n=0;return this._map.get(e).costArray.forEach((function(e){t+=e})),this._map.get(e).fileSizeArray.forEach((function(e){n+=e})),parseInt(1e3*n/t)}},{key:\"getStatResult\",value:function(e){var t=this._calcTotalCount(e);if(0===t)return null;var n=this._calcSuccessCountOfBusiness(e),o=this._calcSuccessRateOfBusiness(e),r=this._calcSuccessCountOfPlatform(e),a=this._calcSuccessRateOfPlatform(e),s=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:n,successRateOfBusiness:o,successCountOfPlatform:r,successRateOfPlatform:a,avgValue:s}}},{key:\"reset\",value:function(e){hu(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}]),e}(),DI=function(){function e(){yn(this,e),this._lastMap=new Map,this._currentMap=new Map}return En(e,[{key:\"initMap\",value:function(e){var t=this;e.forEach((function(e){t._lastMap.set(e,new Map),t._currentMap.set(e,new Map)}))}},{key:\"addMessageSequence\",value:function(e){var t=e.key,n=e.message;if(hu(t)||!this._lastMap.has(t)||!this._currentMap.has(t))return!1;var o=n.conversationID,r=n.sequence,a=o.replace(Yn.CONV_GROUP,\"\");if(0===this._lastMap.get(t).size)this._addCurrentMap(e);else if(this._lastMap.get(t).has(a)){var s=this._lastMap.get(t).get(a),i=s.length-1;r>s[0]&&r<s[i]?(s.push(r),s.sort(),this._lastMap.get(t).set(a,s)):this._addCurrentMap(e)}else this._addCurrentMap(e);return!0}},{key:\"_addCurrentMap\",value:function(e){var t=e.key,n=e.message,o=n.conversationID,r=n.sequence,a=o.replace(Yn.CONV_GROUP,\"\");this._currentMap.get(t).has(a)||this._currentMap.get(t).set(a,[]),this._currentMap.get(t).get(a).push(r)}},{key:\"_copyData\",value:function(e){if(!hu(e)){this._lastMap.set(e,new Map);var t,n=this._lastMap.get(e),o=Bn(this._currentMap.get(e));try{for(o.s();!(t=o.n()).done;){var r=Pn(t.value,2),a=r[0],s=r[1];n.set(a,s)}}catch(i){o.e(i)}finally{o.f()}n=null,this._currentMap.set(e,new Map)}}},{key:\"getStatResult\",value:function(e){if(hu(this._currentMap.get(e))||hu(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;var t=0,n=0;if(this._lastMap.get(e).forEach((function(e,o){var r=Un(e.values()),a=r.length,s=r[a-1]-r[0]+1;t+=s,n+=a})),0===t)return null;var o=Yu(n/t*100,2);return o>100&&(o=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:n,successRateOfMessageReceived:o}}},{key:\"reset\",value:function(){this._currentMap.clear(),this._lastMap.clear()}}]),e}(),NI=function(e){Dn(n,e);var t=wn(n);function n(e){var o;yn(this,n),(o=t.call(this,e))._className=\"QualityStatModule\",o.TAG=\"im-ssolog-quality-stat\",o.reportIndex=0,o.wholePeriod=!1,o._qualityItems=[pp,gp,hp,fp,_p,mp,vp,Mp,yp,Ip],o._messageSentItems=[hp,fp,_p,mp,vp],o._messageReceivedItems=[Mp,yp,Ip],o.REPORT_INTERVAL=120,o.REPORT_SDKAPPID_BLACKLIST=[],o.REPORT_TINYID_WHITELIST=[],o._statInfoArr=[],o._avgRTT=new AI,o._avgE2EDelay=new TI,o._rateMessageSent=new SI,o._rateMessageReceived=new DI;var r=o.getInnerEmitterInstance();return r.on(Mm,o._onLoginSuccess,Gn(o)),r.on(ym,o._onCloudConfigUpdated,Gn(o)),o}return En(n,[{key:\"_onLoginSuccess\",value:function(){var e=this;this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems);var t=this.getModule(pl),n=t.getItem(this.TAG,!1);!Xu(n)&&_u(n.forEach)&&(Qi.log(\"\".concat(this._className,\"._onLoginSuccess.get quality stat log in storage, nums=\").concat(n.length)),n.forEach((function(t){e._statInfoArr.push(t)})),t.removeItem(this.TAG,!1))}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"q_rpt_interval\"),t=this.getCloudConfig(\"q_rpt_sdkappid_bl\"),n=this.getCloudConfig(\"q_rpt_tinyid_wl\");hu(e)||(this.REPORT_INTERVAL=Number(e)),hu(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(\",\").map((function(e){return Number(e)}))),hu(n)||(this.REPORT_TINYID_WHITELIST=n.split(\",\"))}},{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}},{key:\"addRequestCount\",value:function(){this._avgRTT.addRequestCount()}},{key:\"addRTT\",value:function(e){this._avgRTT.addRTT(e)}},{key:\"addMessageDelay\",value:function(e){this._avgE2EDelay.addMessageDelay(e)}},{key:\"addTotalCount\",value:function(e){this._rateMessageSent.addTotalCount(e)||Qi.warn(\"\".concat(this._className,\".addTotalCount invalid key:\"),e)}},{key:\"addSuccessCount\",value:function(e){this._rateMessageSent.addSuccessCount(e)||Qi.warn(\"\".concat(this._className,\".addSuccessCount invalid key:\"),e)}},{key:\"addFailedCountOfUserSide\",value:function(e){this._rateMessageSent.addFailedCountOfUserSide(e)||Qi.warn(\"\".concat(this._className,\".addFailedCountOfUserSide invalid key:\"),e)}},{key:\"addCost\",value:function(e,t){this._rateMessageSent.addCost(e,t)||Qi.warn(\"\".concat(this._className,\".addCost invalid key or cost:\"),e,t)}},{key:\"addFileSize\",value:function(e,t){this._rateMessageSent.addFileSize(e,t)||Qi.warn(\"\".concat(this._className,\".addFileSize invalid key or size:\"),e,t)}},{key:\"addMessageSequence\",value:function(e){this._rateMessageReceived.addMessageSequence(e)||Qi.warn(\"\".concat(this._className,\".addMessageSequence invalid key:\"),e.key)}},{key:\"_getQualityItem\",value:function(e){var t={},n=Ap[this.getNetworkType()];hu(n)&&(n=8);var o={qualityType:Ep[e],timestamp:Wi(),networkType:n,extension:\"\"};switch(e){case pp:t=this._avgRTT.getStatResult();break;case gp:t=this._avgE2EDelay.getStatResult();break;case hp:case fp:case _p:case mp:case vp:t=this._rateMessageSent.getStatResult(e);break;case Mp:case yp:case Ip:t=this._rateMessageReceived.getStatResult(e)}return null===t?null:Sn({},o,{},t)}},{key:\"_report\",value:function(e){var t=this,n=[],o=null;hu(e)?this._qualityItems.forEach((function(e){null!==(o=t._getQualityItem(e))&&(o.reportIndex=t.reportIndex,o.wholePeriod=t.wholePeriod,n.push(o))})):null!==(o=this._getQualityItem(e))&&(o.reportIndex=this.reportIndex,o.wholePeriod=this.wholePeriod,n.push(o)),Qi.debug(\"\".concat(this._className,\"._report\"),n),this._statInfoArr.length>0&&(n=n.concat(this._statInfoArr),this._statInfoArr=[]);var r=this.getModule(dl),a=r.getSDKAppID(),s=r.getTinyID();$u(this.REPORT_SDKAPPID_BLACKLIST,a)&&!zu(this.REPORT_TINYID_WHITELIST,s)&&(n=[]),n.length>0&&this._doReport(n)}},{key:\"_doReport\",value:function(e){var t=this,n={header:lv(this),quality:e};this.request({protocolName:Xd,requestData:Sn({},n)}).then((function(){t.reportIndex++,t.wholePeriod=!1})).catch((function(n){Qi.warn(\"\".concat(t._className,\"._doReport, online:\").concat(t.getNetworkType(),\" error:\"),n),t._statInfoArr=t._statInfoArr.concat(e),t._flushAtOnce()}))}},{key:\"_flushAtOnce\",value:function(){var e=this.getModule(pl),t=e.getItem(this.TAG,!1),n=this._statInfoArr;if(Xu(t))Qi.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var o=n.concat(t);o.length>10&&(o=o.slice(0,10)),Qi.log(\"\".concat(this.className,\"._flushAtOnce count:\").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}this._statInfoArr=[]}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}]),n}(Nl),CI=function e(t){yn(this,e),Xu(t)||(this.userID=t.userID||\"\",this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.time=t.time||0,this.source=t.source||\"\",this.wording=t.wording||\"\",this.type=t.type||\"\")},kI=function(){function e(t){yn(this,e),this._snsModule=t,this._className=\"FriendApplicationHandler\",this._startTime=0,this._maxLimited=100,this._currentSequence=0,this._friendApplicationMap=new Map,this._unreadCount=0}return En(e,[{key:\"getLocalFriendApplicationList\",value:function(){return{friendApplicationList:Un(this._friendApplicationMap.values()),unreadCount:this._unreadCount}}},{key:\"_onFriendApplicationListUpdated\",value:function(){this._snsModule.emitOuterEvent(Wn.FRIEND_APPLICATION_LIST_UPDATED,{friendApplicationList:Un(this._friendApplicationMap.values()),unreadCount:this._unreadCount})}},{key:\"onFriendApplicationRead\",value:function(){this._unreadCount=0,this._onFriendApplicationListUpdated()}},{key:\"onFriendApplicationAdded\",value:function(e,t){var n=this;if(!Xu(e)){var o=\"\";o=t===this._snsModule.getMyUserID()?Yn.SNS_APPLICATION_SENT_BY_ME:Yn.SNS_APPLICATION_SENT_TO_ME;var r=!1;e.forEach((function(e){var t=\"\".concat(e.userID,\"_\").concat(o);o!==Yn.SNS_APPLICATION_SENT_TO_ME||n._friendApplicationMap.has(t)||(n._unreadCount+=1),n._friendApplicationMap.set(t,new CI(Sn({},e,{type:o}))),r=!0})),r&&this._onFriendApplicationListUpdated()}}},{key:\"onFriendApplicationDeleted\",value:function(e){Xu(e)||this.getFriendApplicationList()}},{key:\"getFriendApplicationList\",value:function(){var e=this,t=new Dp(rh),n=\"\".concat(this._className,\".getFriendApplicationList\");return this._snsModule.request({protocolName:$l,requestData:{applicationType:Yn.SNS_APPLICATION_TYPE_BOTH,fromAccount:this._snsModule.getMyUserID(),maxLimited:this._maxLimited,startTime:this._startTime,lastSequence:this._currentSequence}}).then((function(o){var r=o.data,a=r.resultList,s=r.unreadCount,i=r.startTime,u=r.currentSequence;e._startTime=i,e._currentSequence=u,e._unreadCount=s;var c=gu(a)?a.length:0;t.setNetworkType(e._snsModule.getNetworkType()).setMessage(\"applicationCount:\".concat(c,\" unreadCount:\").concat(s)).end(),Qi.info(\"\".concat(n,\" ok. applicationCount:\").concat(c,\" unreadCount:\").concat(s)),e._friendApplicationMap.clear(),gu(a)&&a.forEach((function(t){var n=t.userID,o=t.type,r=new CI(t);e._friendApplicationMap.set(\"\".concat(n,\"_\").concat(o),r)})),e._onFriendApplicationListUpdated()})).catch((function(o){return e._snsModule.probeNetwork().then((function(e){var n=Pn(e,2),r=n[0],a=n[1];t.setError(o,r,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),o),um(o)}))}},{key:\"deleteFriendApplication\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteFriendApplication\"),o=e.userID,r=e.type;if((!r||r!==Yn.SNS_APPLICATION_SENT_BY_ME&&r!==Yn.SNS_APPLICATION_SENT_TO_ME)&&(r=Yn.SNS_APPLICATION_SENT_TO_ME),!this._friendApplicationMap.has(\"\".concat(o,\"_\").concat(r)))return um({code:lp.FRIEND_APPLICATION_NOT_EXIST,message:dp.FRIEND_APPLICATION_NOT_EXIST});var a=new Dp(ah);return a.setMessage(\"userID:\".concat(o,\" type:\").concat(r)),this._snsModule.request({protocolName:zl,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:[o],type:r}}).then((function(e){var s=e.data.resultList,i=s[0],u=i.to,c=i.resultCode,l=i.resultInfo;return a.setNetworkType(t._snsModule.getNetworkType()).setMoreMessage(\"resultList:\".concat(JSON.stringify(s))).end(),Qi.info(\"\".concat(n,\" ok. userID:\").concat(o,\" type:\").concat(r)),0===c?Q_():um({userID:u,code:c,message:l})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"acceptFriendApplication\",value:function(e){var t=this,n=\"\".concat(this._className,\".acceptFriendApplication\"),o=e.userID,r=e.remark,a=e.tag,s=e.type;(!s||s!==Yn.SNS_APPLICATION_AGREE&&s!==Yn.SNS_APPLICATION_AGREE_AND_ADD)&&(s=Yn.SNS_APPLICATION_AGREE_AND_ADD);var i=new Dp(sh);return i.setMessage(\"userID:\".concat(o,\" type:\").concat(s)),this._snsModule.request({protocolName:Yl,requestData:{fromAccount:this._snsModule.getMyUserID(),responseFriendItem:[{userID:o,remark:r,tag:a,action:s}]}}).then((function(e){i.setNetworkType(t._snsModule.getNetworkType()).end();var r=e.data.resultList[0],a=r.resultCode,u=r.resultInfo;if(0!==a)return um({code:a,message:u});Qi.info(\"\".concat(n,\" ok. userID:\").concat(o,\" type:\").concat(s))})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"refuseFriendApplication\",value:function(e){var t=this,n=\"\".concat(this._className,\".refuseFriendApplication\"),o=e.userID,r=new Dp(ih);return r.setMessage(\"userID:\".concat(o)),this._snsModule.request({protocolName:Yl,requestData:{fromAccount:this._snsModule.getMyUserID(),responseFriendItem:[{userID:o,action:\"Response_Action_Reject\"}]}}).then((function(e){r.setNetworkType(t._snsModule.getNetworkType()).end();var a=e.data.resultList[0],s=a.resultCode,i=a.resultInfo;if(0!==s)return um({code:s,message:i});Qi.info(\"\".concat(n,\" ok. userID:\").concat(o))})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"_onFriendApplicationProcessed\",value:function(e){var t=this;if(0!==e.length){var n=!1;e.forEach((function(e){var o=\"\".concat(e.to,\"_\").concat(Yn.SNS_APPLICATION_SENT_TO_ME);t._friendApplicationMap.has(o)&&(t._friendApplicationMap.delete(o),t._unreadCount-=1,n=!0)})),this._unreadCount<0&&(this._unreadCount=0),n&&this._onFriendApplicationListUpdated()}}},{key:\"setFriendApplicationRead\",value:function(){var e=this,t=\"\".concat(this._className,\".setFriendApplicationRead\"),n=new Dp(uh);return this._snsModule.request({protocolName:Jl,requestData:{fromAccount:this._snsModule.getMyUserID(),latestTimeStamp:Yu(Wi()/1e3,0)}}).then((function(o){n.setNetworkType(e._snsModule.getNetworkType()).end(),Qi.info(\"\".concat(t,\" ok\")),e._unreadCount=0})).catch((function(o){return e._snsModule.probeNetwork().then((function(e){var t=Pn(e,2),r=t[0],a=t[1];n.setError(o,r,a).end()})),Qi.warn(\"\".concat(t,\" failed. error:\"),o),um(o)}))}},{key:\"reset\",value:function(){this._startIndex=0,this._maxLimited=100,this._currentSequence=0,this._unreadCount=0,this._friendApplicationMap.clear()}}]),e}(),LI=eo(\"splice\"),RI=ze(\"splice\",{ACCESSORS:!0,0:0,1:2}),OI=Math.max,GI=Math.min;ke({target:\"Array\",proto:!0,forced:!LI||!RI},{splice:function(e,t){var n,o,r,a,s,i,u=Oe(this),c=ie(u.length),l=le(e,c),d=arguments.length;if(0===d?n=o=0:1===d?(n=0,o=c-l):(n=d-2,o=GI(OI(ae(t),0),c-l)),c+n-o>9007199254740991)throw TypeError(\"Maximum allowed length exceeded\");for(r=Ve(u,o),a=0;a<o;a++)(s=l+a)in u&&st(r,a,u[s]);if(r.length=o,n<o){for(a=l;a<c-o;a++)i=a+n,(s=a+o)in u?u[i]=u[s]:delete u[i];for(a=c;a>c-o+n;a--)delete u[a-1]}else if(n>o)for(a=c-o;a>l;a--)i=a+n-1,(s=a+o-1)in u?u[i]=u[s]:delete u[i];for(a=0;a<n;a++)u[a+l]=arguments[a+2];return u.length=c-o+n,r}});var bI=function(){function e(t,n){yn(this,e),this.userID=t,this.remark=\"\",this.groupList=[],this.source=\"\",this.addTime=0,this.friendCustomField=[],this.timestamp=0;var o={};if(o.userID=t,!Xu(n))for(var r=\"\",a=\"\",s=0,i=n.length;s<i;s++)if(r=n[s].tag,a=n[s].value,r.indexOf(\"Tag_SNS_Custom\")>-1)this.friendCustomField.push({key:r,value:a});else switch(r){case eu.NICK:o.nick=a;break;case eu.GENDER:o.gender=a;break;case eu.BIRTHDAY:o.birthday=a;break;case eu.LOCATION:o.location=a;break;case eu.SELFSIGNATURE:o.selfSignature=a;break;case eu.ALLOWTYPE:o.allowType=a;break;case eu.LANGUAGE:o.language=a;break;case eu.AVATAR:o.avatar=a;break;case eu.MESSAGESETTINGS:o.messageSettings=a;break;case eu.ADMINFORBIDTYPE:o.adminForbidType=a;break;case eu.LEVEL:o.level=a;break;case eu.ROLE:o.role=a;break;case tu.REMARK:this.remark=a;break;case tu.ADDTIME:this.addTime=a;break;case tu.GROUP:this.groupList=JSON.parse(JSON.stringify(a));break;case tu.ADDSOURCE:this.source=a;break;case tu.ADDWORDING:break;default:Qi.log(\"snsProfileItem unkown tag->\",n[s].tag)}this.profile=new km(o)}return En(e,[{key:\"validate\",value:function(e){var t=!0,n=\"\";if(Xu(e))return{valid:!1,tips:\"empty options\"};if(e.profileCustomField)for(var o=e.profileCustomField.length,r=null,a=0;a<o;a++){if(r=e.profileCustomField[a],!lu(r.key)||-1===r.key.indexOf(\"Tag_Profile_Custom\"))return{valid:!1,tips:\"自定义资料字段的前缀必须是 Tag_Profile_Custom\"};if(!lu(r.value))return{valid:!1,tips:\"自定义资料字段的 value 必须是字符串\"}}for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(\"profileCustomField\"===s)continue;if(Xu(e[s])&&!lu(e[s])&&!cu(e[s])){n=\"key:\"+s+\", invalid value:\"+e[s],t=!1;continue}switch(s){case\"nick\":lu(e[s])||(n=\"nick should be a string\",t=!1),Au(e[s])>500&&(n=\"nick name limited: must less than or equal to \".concat(500,\" bytes, current size: \").concat(Au(e[s]),\" bytes\"),t=!1);break;case\"gender\":Cu(nu,e.gender)||(n=\"key:gender, invalid value:\"+e.gender,t=!1);break;case\"birthday\":cu(e.birthday)||(n=\"birthday should be a number\",t=!1);break;case\"location\":lu(e.location)||(n=\"location should be a string\",t=!1);break;case\"selfSignature\":lu(e.selfSignature)||(n=\"selfSignature should be a string\",t=!1);break;case\"allowType\":Cu(ru,e.allowType)||(n=\"key:allowType, invalid value:\"+e.allowType,t=!1);break;case\"language\":cu(e.language)||(n=\"language should be a number\",t=!1);break;case\"avatar\":lu(e.avatar)||(n=\"avatar should be a string\",t=!1);break;case\"messageSettings\":0!==e.messageSettings&&1!==e.messageSettings&&(n=\"messageSettings should be 0 or 1\",t=!1);break;case\"adminForbidType\":Cu(ou,e.adminForbidType)||(n=\"key:adminForbidType, invalid value:\"+e.adminForbidType,t=!1);break;case\"level\":cu(e.level)||(n=\"level should be a number\",t=!1);break;case\"role\":cu(e.role)||(n=\"role should be a number\",t=!1);break;default:n=\"unknown key:\"+s+\"  \"+e[s],t=!1}}return{valid:t,tips:n}}},{key:\"update\",value:function(e){for(var t=\"\",n=\"\",o=0,r=e.length;o<r;o++)if(t=e[o].tag,n=e[o].value,t.indexOf(\"Tag_SNS_Custom\")>-1)this.friendCustomField.forEach((function(e){e.key===t&&(e.value=n)}));else if(t.indexOf(\"Tag_Profile_Custom\")>-1)this.profile.profileCustomField.forEach((function(e){e.key===t&&(e.value=n)}));else switch(t){case eu.NICK:this.profile.nick=n;break;case eu.GENDER:this.profile.gender=n;break;case eu.BIRTHDAY:this.profile.birthday=n;break;case eu.LOCATION:this.profile.location=n;break;case eu.SELFSIGNATURE:this.profile.selfSignature=n;break;case eu.ALLOWTYPE:this.profile.allowType=n;break;case eu.LANGUAGE:this.profile.language=n;break;case eu.AVATAR:this.profile.avatar=n;break;case eu.MESSAGESETTINGS:this.profile.messageSettings=n;break;case eu.ADMINFORBIDTYPE:this.profile.adminForbidType=n;break;case eu.LEVEL:this.profile.level=n;break;case eu.ROLE:this.profile.role=n;break;case tu.REMARK:this.remark=n;break;case tu.ADDTIME:this.addTime=n;break;case tu.GROUP:this.groupList=JSON.parse(JSON.stringify(n));break;case tu.ADDSOURCE:this.source=n;break;case tu.ADDWORDING:break;default:Qi.log(\"snsProfileItem unkown tag->\",e[o].tag)}this.timestamp=Date.now()}},{key:\"updateProfile\",value:function(e){this.profile=JSON.parse(JSON.stringify(e)),this.timestamp=Date.now()}},{key:\"addToGroupList\",value:function(e){-1===this.groupList.indexOf(e)&&(this.groupList.push(e),this.count=this.groupList.length)}},{key:\"removeFromGroupList\",value:function(e){var t=this.groupList.indexOf(e);t>-1&&(this.groupList.splice(t,1),this.count=this.groupList.length)}}]),e}(),wI=function(){function e(t){yn(this,e),this._snsModule=t,this._className=\"FriendHandler\",this._friendMap=new Map,this._startIndex=0,this._standardSequence=0,this._customSequence=0,this._expirationTime=18e4}return En(e,[{key:\"getLocalFriendList\",value:function(){return Un(this._friendMap.values())}},{key:\"getFriendRemark\",value:function(e){return this._friendMap.has(e)?this._friendMap.get(e).remark:\"\"}},{key:\"onFriendProfileModified\",value:function(e){var t=this,n=e.dataList;if(!Xu(n)){var o=this._snsModule.getModule(ll);n.forEach((function(e){var n=e.userID,r=e.profileList;if(t.isMyFriend(n)){Qi.log(\"\".concat(t._className,\".onFriendProfileModified. friend userID:\").concat(n));var a=t._friendMap.get(n);a.update(r),o.modifyMessageSentByPeer({conversationID:\"\".concat(Yn.CONV_C2C).concat(n),latestNick:a.profile.nick,latestAvatar:a.profile.avatar})}}))}}},{key:\"onFriendAdded\",value:function(e){var t=this;0!==e.length&&(Qi.log(\"\".concat(this._className,\".onFriendAdded userIDList:\").concat(e)),e.forEach((function(e){t._friendMap.set(e,new bI(e))})),this.getFriendProfile({userIDList:e}).then((function(n){e.forEach((function(e){var n=t._friendMap.get(e);n.groupList.length>0&&t._snsModule.updateWhenFriendAdded({nameList:n.groupList,userID:e})})),t._onFriendListUpdated()})))}},{key:\"onFriendDeleted\",value:function(e){var t=this;0!==e.length&&(Qi.log(\"\".concat(this._className,\".onFriendDeleted userIDList:\").concat(e)),e.forEach((function(e){var n=t._friendMap.get(e);n.groupList.length>0&&t._snsModule.updateWhenFriendDeleted({nameList:n.groupList,userID:e}),t._friendMap.delete(e)})),this._onFriendListUpdated())}},{key:\"_onFriendListUpdated\",value:function(){this._snsModule.emitOuterEvent(Wn.FRIEND_LIST_UPDATED),this._snsModule.getModule(ll).checkAndPatchRemark()}},{key:\"getFriendProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".getFriendProfile\"),o=e.userIDList,r=[],a=[],s=[];if(o.forEach((function(e){if(t._friendMap.has(e)){var n=t._friendMap.get(e);Date.now()-n.timestamp<t._expirationTime?a.push(n):s.push(e)}else r.push({userID:e,code:lp.NOT_MY_FRIEND,message:dp.NOT_MY_FRIEND})})),0===s.length)return Qi.info(\"\".concat(n,\" newUserIDList is empty\")),im({friendList:a,failureUserIDList:r});var i=new Dp(th);i.setMessage(\"userIDList:\".concat(s)),Qi.info(\"\".concat(n,\" userIDList:\").concat(s));var u=Object.values(tu).concat(Object.values(eu));return this._snsModule.request({protocolName:Kl,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:s,tagList:u}}).then((function(e){return i.setNetworkType(t._snsModule.getNetworkType()).end(),Qi.info(\"\".concat(n,\" ok\")),e.data.resultList.forEach((function(e){var n,o=e.to,s=e.resultCode,i=e.resultInfo,u=e.tagValueList;hu(s)||0===s?(t._friendMap.has(o)?(n=t._friendMap.get(o)).update(u):(n=new bI(o,u),t._friendMap.set(o,n)),a.push(n)):r.push({userID:o,code:s,message:i})})),Q_({friendList:a,failureUserIDList:r})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"isMyFriend\",value:function(e){return this._friendMap.has(e)}},{key:\"pagingGetFriendList\",value:function(){var e=this,t=new Dp(nh),n=\"\".concat(this._className,\".getFriendList\"),o=Date.now();this._snsModule.request({protocolName:Vl,requestData:{fromAccount:this._snsModule.getMyUserID(),startIndex:this._startIndex,standardSequence:this._standardSequence,customSequence:this._customSequence}}).then((function(r){var a=r.data,s=a.friendCount,i=a.resultList,u=a.nextStartIndex,c=a.standardSequence,l=a.customSequence,d=a.completeFlag;e._startIndex=u,e._standardSequence=c,e._customSequence=l;var p=Date.now()-o,g=\"friendCount:\".concat(s,\" nextStartIndex:\").concat(u,\" standardSequence:\").concat(c,\" \")+\"customSequence:\".concat(l,\" completeFlag:\").concat(d,\" cost \").concat(p,\" ms\");t.setNetworkType(e._snsModule.getNetworkType()).setMessage(g).end(),Qi.info(\"\".concat(n,\" ok.\"),g),Xu(i)||i.forEach((function(t){var n=t.to,o=t.tagValueList;e._friendMap.set(n,new bI(n,o))})),0===d?e.pagingGetFriendList():(e._snsModule.emitOuterEvent(Wn.FRIEND_LIST_UPDATED),e._pagingGetFriendProfile())})).catch((function(o){return e._snsModule.probeNetwork().then((function(e){var n=Pn(e,2),r=n[0],a=n[1];t.setError(o,r,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),o),um(o)}))}},{key:\"_pagingGetFriendProfile\",value:function(){var e=this,t=Un(this._friendMap.keys()),n=this._snsModule.getModule(al),o=t.length,r=o<=100?1:Math.ceil(o/100);Qi.log(\"\".concat(this._className,\"._pagingGetFriendProfile friendCount:\").concat(o,\" pageCount:\").concat(r));for(var a=0;a<r;a++)n.getUserProfile({userIDList:t.slice(100*a,100*(a+1))}).then((function(t){t.data.forEach((function(t){var n=e._friendMap.get(t.userID);n&&n.updateProfile(t)})),e._onFriendListUpdated()}))}},{key:\"addFriend\",value:function(e){var t=this,n=\"\".concat(this._className,\".addFriend\"),o=e.to,r=e.source,a=e.type,s=e.wording,i=e.remark,u=e.groupName;if(this._friendMap.has(o))return um({code:lp.ALREADY_MY_FRIEND,message:dp.ALREADY_MY_FRIEND});var c=a;(!c||c!==Yn.SNS_ADD_TYPE_SINGLE&&c!==Yn.SNS_ADD_TYPE_BOTH)&&(c=Yn.SNS_ADD_TYPE_BOTH);var l=new Dp(Qg);return l.setMessage(\"to:\".concat(o,\" source:\").concat(r,\" type:\").concat(c)),this._snsModule.request({protocolName:jl,requestData:{fromAccount:this._snsModule.getMyUserID(),addFriendItem:[{to:o,source:r,wording:s,remark:i,groupName:u}],type:c}}).then((function(e){var o=e.data.resultList;l.setNetworkType(t._snsModule.getNetworkType()).setMoreMessage(\"resultList:\".concat(JSON.stringify(o))).end();var r=o[0],a=r.to,s=r.resultCode,i=r.resultInfo;return Qi.info(\"\".concat(n,\" ok. to:\").concat(a,\" type:\").concat(c,\" code:\").concat(s)),hu(s)||0===s?Q_({userID:a,code:0}):30539===s?Q_({userID:a,code:s,message:om[s]}):um({userID:a,code:s,message:om[s]||i})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"deleteFriend\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteFriend\"),o=e.userIDList,r=e.type;o.length>1e3&&(Qi.warn(\"\".concat(n,\" 删除好友人数不能超过1000人\")),o.length=1e3);var a=[],s=[],i=[];if(o.forEach((function(e){t._friendMap.has(e)?i.push(e):a.push({userID:e,code:lp.NOT_MY_FRIEND,message:dp.NOT_MY_FRIEND})})),0===i.length)return im({successUserIDList:s,failureUserIDList:a});var u=r;(!u||u!==Yn.SNS_DELETE_TYPE_SINGLE&&u!==Yn.SNS_DELETE_TYPE_BOTH)&&(u=Yn.SNS_DELETE_TYPE_BOTH);var c=new Dp(eh);return c.setMessage(\"userIDList:\".concat(i,\" type:\").concat(u)),this._snsModule.request({protocolName:Hl,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:i,type:u}}).then((function(e){c.setNetworkType(t._snsModule.getNetworkType()).end(),Qi.info(\"\".concat(n,\" ok\"));var o=e.data.resultList;return Xu(o)||o.forEach((function(e){var t=e.to,n=e.resultCode,o=e.resultInfo;hu(n)||0===n?s.push({userID:t}):a.push({userID:t,code:n,message:o})})),Q_({successUserIDList:s,failureUserIDList:a})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" error:\"),e),um(e)}))}},{key:\"updateFriend\",value:function(e){var t=this,n=e.userID,o=e.remark,r=e.friendCustomField;if(!this._friendMap.has(n))return um({code:lp.NOT_MY_FRIEND,message:dp.NOT_MY_FRIEND});var a=new Dp(oh);a.setMessage(\"userID:\".concat(n,\" remark:\").concat(o,\" friendCustomField:\").concat(r));var s=\"\".concat(this._className,\".updateFriend\"),i=[];return hu(o)||i.push({tag:tu.REMARK,value:o}),gu(r)&&r.length>0&&r.forEach((function(e){i.push({tag:e.key,value:e.value})})),this._snsModule.request({protocolName:Wl,requestData:{fromAccount:this._snsModule.getMyUserID(),updateItem:[{to:n,snsItem:i}]}}).then((function(e){a.setNetworkType(t._snsModule.getNetworkType()).end(),Qi.info(\"\".concat(s,\" ok\"));var n=e.data.resultList[0],i=n.to,u=n.resultCode,c=n.resultInfo;if(hu(u)||0===u){var l=t._friendMap.get(i);return l&&(hu(o)||(l.remark=o),gu(r)&&r.length>0&&Gu(l.friendCustomField,r),t._onFriendListUpdated()),Q_(l)}return um({code:u,message:c})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.warn(\"\".concat(s,\" failed. error:\"),e),um(e)}))}},{key:\"checkFriend\",value:function(e){var t=this,n=\"\".concat(this._className,\".checkFriend\"),o=e.userIDList,r=e.type;(!r||r!==Yn.SNS_CHECK_TYPE_SINGLE&&r!==Yn.SNS_CHECK_TYPE_BOTH)&&(r=Yn.SNS_CHECK_TYPE_BOTH);var a=new Dp(Zg);return a.setMessage(\"userIDList:\".concat(o,\" type:\").concat(r)),this._snsModule.request({protocolName:Bl,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:o,type:r}}).then((function(e){a.setNetworkType(t._snsModule.getNetworkType()).end(),Qi.info(\"\".concat(n,\" ok. userIDList:\").concat(o,\" type:\").concat(r));var s=[],i=[],u=e.data.resultList;return gu(u)&&u.forEach((function(e){var t=e.to,n=e.relation,o=e.resultCode,r=e.resultInfo;hu(o)||0===o?s.push({userID:t,code:0,relation:n}):i.push({userID:t,code:o,message:r})})),Q_({successUserIDList:s,failureUserIDList:i})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"updateWhenAddedToFriendGroup\",value:function(e){var t=this,n=e.name,o=e.userIDList;Qi.log(\"\".concat(this._className,\".updateWhenAddedToFriendGroup groupName:\").concat(n,\" userIDList:\").concat(o)),n&&!Xu(o)&&o.forEach((function(e){t._friendMap.has(e)&&t._friendMap.get(e).addToGroupList(n)}))}},{key:\"updateWhenRemovedFromFriendGroup\",value:function(e){var t=this,n=e.name,o=e.userIDList;Qi.log(\"\".concat(this._className,\".updateWhenRemovedFromFriendGroup groupName:\").concat(n,\" userIDList:\").concat(o)),n&&!Xu(o)&&o.forEach((function(e){t._friendMap.has(e)&&t._friendMap.get(e).removeFromGroupList(n)}))}},{key:\"reset\",value:function(){this._friendMap.clear(),this._startIndex=0,this._standardSequence=0,this._customSequence=0}}]),e}(),PI=function(){function e(t){yn(this,e),Xu(t)||(this.name=t.name||\"\",this.userIDList=t.userIDList||[],this.count=this.userIDList.length||0)}return En(e,[{key:\"addToUserIDList\",value:function(e){-1===this.userIDList.indexOf(e)&&(this.userIDList.push(e),this.count=this.userIDList.length)}},{key:\"removeFromUserIDList\",value:function(e){var t=this.userIDList.indexOf(e);t>-1&&(this.userIDList.splice(t,1),this.count=this.userIDList.length)}}]),e}(),UI=function(){function e(t){yn(this,e),this._snsModule=t,this._className=\"FriendGroupHandler\",this._friendGroupMap=new Map}return En(e,[{key:\"getLocalFriendGroupList\",value:function(){return Un(this._friendGroupMap.values())}},{key:\"_emitFriendGroupListUpdated\",value:function(){var e=Un(this._friendGroupMap.values());this._snsModule.emitOuterEvent(Wn.FRIEND_GROUP_LIST_UPDATED,e)}},{key:\"getFriendGroupList\",value:function(){var e=this,t=new Dp(hh),n=\"\".concat(this._className,\".getFriendGroupList\");return this._snsModule.request({protocolName:Xl,requestData:{fromAccount:this._snsModule.getMyUserID()}}).then((function(o){t.setNetworkType(e._snsModule.getNetworkType()).end();var r=o.data.resultList;Xu(r)?Qi.info(\"\".concat(n,\" ok. friend group count:0\")):(Qi.info(\"\".concat(n,\" ok. friend group count:\").concat(r.length)),e._friendGroupMap.clear(),r.forEach((function(t){var n=new PI(t);e._friendGroupMap.set(t.name,n)})),e._emitFriendGroupListUpdated())})).catch((function(o){return e._snsModule.probeNetwork().then((function(e){var n=Pn(e,2),r=n[0],a=n[1];t.setError(o,r,a).end()})),Qi.warn(\"\".concat(n,\" error:\"),o),um(o)}))}},{key:\"createFriendGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".createFriendGroup\"),o=e.name,r=e.userIDList;if(this._friendGroupMap.has(o))return Qi.warn(\"\".concat(n,\" 好友分组 \").concat(o,\" 已经存在！\")),um({code:lp.FRIEND_GROUP_EXISTED,message:dp.FRIEND_GROUP_EXISTED});var a=new Dp(ch);return a.setMessage(\"name:\".concat(o,\" userIDList:\").concat(r)),this._snsModule.request({protocolName:Ql,requestData:{fromAccount:this._snsModule.getMyUserID(),groupName:[o],userIDList:gu(r)?r:void 0}}).then((function(e){a.setNetworkType(t._snsModule.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok. name:\").concat(o,\" userIDList:\").concat(r));var s=e.data.resultList,i=[],u=[];s&&s.forEach((function(e){var t=e.to,n=e.resultCode,o=e.resultInfo;if(hu(n)||0===n)i.push(t);else{var r={userID:e.to,code:n,message:o};u.push(r)}}));var c=new PI({name:o,userIDList:i});return t._friendGroupMap.set(o,c),t._snsModule.updateWhenAddedToFriendGroup({name:o,userIDList:i}),t._emitFriendGroupListUpdated(),Q_({friendGroup:c,failureUserIDList:u})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"deleteFriendGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteFriendGroup\"),o=e.name;if(!this._friendGroupMap.has(o))return this._onFriendGroupNotExist(o);var r=new Dp(lh);return r.setMessage(\"name:\".concat(o)),this._snsModule.request({protocolName:Zl,requestData:{fromAccount:this._snsModule.getMyUserID(),nameList:[o]}}).then((function(e){r.setNetworkType(t._snsModule.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok. name:\").concat(o));var a=t._friendGroupMap.get(o);return a&&(t._snsModule.updateWhenRemovedFromFriendGroup({name:o,userIDList:a.userIDList}),t._friendGroupMap.delete(o),a.userIDList.length=0),t._emitFriendGroupListUpdated(),Q_(a)})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"_onFriendGroupNotExist\",value:function(e){return Qi.warn(\"\".concat(this._className,\"._onFriendGroupNotExist 好友分组 \").concat(e,\" 不存在！\")),um({code:lp.FRIEND_GROUP_NOT_EXIST,message:dp.FRIEND_GROUP_NOT_EXIST})}},{key:\"renameFriendGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".renameFriendGroup\"),o=e.oldName,r=e.newName;if(!this._friendGroupMap.has(o))return this._onFriendGroupNotExist();var a=new Dp(dh).setMessage(\"oldName:\".concat(o,\" newName:\").concat(r));return this._snsModule.request({protocolName:ed,requestData:{fromAccount:this._snsModule.getMyUserID(),oldName:o,newName:r}}).then((function(){if(a.setNetworkType(t._snsModule.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok. oldName:\").concat(o,\" newName:\").concat(r)),t._friendGroupMap.has(o)){var e=t._friendGroupMap.get(o);return e.name=r,t._friendGroupMap.delete(o),t._friendGroupMap.set(r,e),t._snsModule.updateWhenRemovedFromFriendGroup({name:o,userIDList:e.userIDList}),t._snsModule.updateWhenAddedToFriendGroup({name:r,userIDList:e.userIDList}),t._emitFriendGroupListUpdated(),Q_(e)}return Q_()})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"addToFriendGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".addToFriendGroup\"),o=e.name,r=e.userIDList;if(!this._friendGroupMap.has(o))return this._onFriendGroupNotExist(o);var a=new Dp(ph);return a.setMessage(\"name:\".concat(o,\" userIDList:\").concat(r)),Qi.log(\"\".concat(this._className,\".addToFriendGroup name:\").concat(o,\" userIDList:\").concat(r)),this._snsModule.request({protocolName:ed,requestData:{fromAccount:this._snsModule.getMyUserID(),oldName:o,updateGroupItem:r.filter((function(e){return t._snsModule.isMyFriend(e)})).map((function(e){return{to:e,updateType:\"Update_Type_Add\"}}))}}).then((function(e){return a.setNetworkType(t._snsModule.getNetworkType()).end(),t._onFriendGroupUpdated(o,e)})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"removeFromFriendGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".removeFromFriendGroup\"),o=e.name,r=e.userIDList;if(!this._friendGroupMap.has(o))return this._onFriendGroupNotExist(o);var a=new Dp(gh);return a.setMessage(\"name:\".concat(o,\" userIDList:\").concat(r)),Qi.log(\"\".concat(n,\" name:\").concat(o,\" userIDList:\").concat(r)),this._snsModule.request({protocolName:ed,requestData:{fromAccount:this._snsModule.getMyUserID(),oldName:o,updateGroupItem:r.filter((function(e){return t._snsModule.isMyFriend(e)})).map((function(e){return{to:e,updateType:\"Update_Type_Delete\"}}))}}).then((function(e){return a.setNetworkType(t._snsModule.getNetworkType()).end(),t._onFriendGroupUpdated(o,e)})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),um(e)}))}},{key:\"_onFriendGroupUpdated\",value:function(e,t){var n=t.data.resultList,o=this._friendGroupMap.get(e),r=[],a=[],s=[];return gu(n)&&n.forEach((function(e){var t=e.to,n=e.resultCode,i=e.resultInfo,u=e.type;0===n?\"Update_Type_Add\"===u?o&&(o.addToUserIDList(t),a.push(t)):\"Update_Type_Delete\"===u&&o&&(o.removeFromUserIDList(t),s.push(t)):r.push({to:e.to,code:n,message:i})})),Qi.log(\"\".concat(this._className,\"._onFriendGroupUpdated name:\").concat(e,\" userIDList:\").concat(o.userIDList)),a.length>0&&this._snsModule.updateWhenAddedToFriendGroup({name:e,userIDList:a}),s.length>0&&this._snsModule.updateWhenRemovedFromFriendGroup({name:e,userIDList:s}),Q_({friendGroup:o,failureUserIDList:r})}},{key:\"updateWhenFriendAdded\",value:function(e){var t=this,n=e.nameList,o=e.userID;Qi.log(\"\".concat(this._className,\".updateWhenFriendAdded userID:\").concat(o,\" nameList:\").concat(n)),Xu(n)||n.forEach((function(e){t._friendGroupMap.has(e)&&t._friendGroupMap.get(e).addToUserIDList(o)}))}},{key:\"updateWhenFriendDeleted\",value:function(e){var t=this,n=e.nameList,o=e.userID;Qi.log(\"\".concat(this._className,\".updateWhenFriendDeleted userID:\").concat(o,\" nameList:\").concat(n)),Xu(n)||n.forEach((function(e){t._friendGroupMap.has(e)&&t._friendGroupMap.get(e).removeFromUserIDList(o)}))}},{key:\"reset\",value:function(){this._friendGroupMap.clear()}}]),e}(),FI=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"SnsModule\",o._friendHandler=new wI(Gn(o)),o._friendApplicationHandler=new kI(Gn(o)),o._friendGroupHandler=new UI(Gn(o)),o.getInnerEmitterInstance().on(Mm,o.onContextUpdated,Gn(o)),o}return En(n,[{key:\"onContextUpdated\",value:function(e){this._friendHandler.pagingGetFriendList(),this._friendGroupHandler.getFriendGroupList(),this._friendApplicationHandler.getFriendApplicationList()}},{key:\"onRelationChainModified\",value:function(e){var t=e.dataList;if(!Xu(t)){var n=[],o=[],r=[],a=[],s=!1,i=\"\";t.forEach((function(e){3!==e.pushType&&4!==e.pushType||!e.from||(i=e.from),e.friendAddAccount&&(n.push.apply(n,Un(e.friendAddAccount)),a.push.apply(a,Un(e.friendAddAccount))),e.friendDelAccount&&o.push.apply(o,Un(e.friendDelAccount)),e.friendApplicationAdded&&r.push.apply(r,Un(e.friendApplicationAdded)),e.friendApplicationDeletedUserIDList&&a.push.apply(a,Un(e.friendApplicationDeletedUserIDList)),e.reportTime&&7===e.pushType&&(s=!0)})),s&&this._friendApplicationHandler.onFriendApplicationRead(),this._friendApplicationHandler.onFriendApplicationAdded(r,i),this._friendApplicationHandler.onFriendApplicationDeleted(a),this._friendHandler.onFriendAdded(n),this._friendHandler.onFriendDeleted(o)}}},{key:\"isMyFriend\",value:function(e){return this._friendHandler.isMyFriend(e)}},{key:\"onFriendProfileModified\",value:function(e){this._friendHandler.onFriendProfileModified(e)}},{key:\"getLocalFriendList\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._friendHandler.getLocalFriendList();return e?im(t):t}},{key:\"getFriendRemark\",value:function(e){return this._friendHandler.getFriendRemark(e)}},{key:\"getFriendList\",value:function(){return this._friendHandler.pagingGetFriendList()}},{key:\"addFriend\",value:function(e){return this._friendHandler.addFriend(e)}},{key:\"deleteFriend\",value:function(e){return this._friendHandler.deleteFriend(e)}},{key:\"checkFriend\",value:function(e){return this._friendHandler.checkFriend(e)}},{key:\"getFriendProfile\",value:function(e){return this._friendHandler.getFriendProfile(e)}},{key:\"updateFriend\",value:function(e){return this._friendHandler.updateFriend(e)}},{key:\"updateWhenAddedToFriendGroup\",value:function(e){this._friendHandler.updateWhenAddedToFriendGroup(e)}},{key:\"updateWhenRemovedFromFriendGroup\",value:function(e){this._friendHandler.updateWhenRemovedFromFriendGroup(e)}},{key:\"getLocalFriendApplicationList\",value:function(){var e=this._friendApplicationHandler.getLocalFriendApplicationList();return im(e)}},{key:\"deleteFriendApplication\",value:function(e){return this._friendApplicationHandler.deleteFriendApplication(e)}},{key:\"refuseFriendApplication\",value:function(e){return this._friendApplicationHandler.refuseFriendApplication(e)}},{key:\"acceptFriendApplication\",value:function(e){return this._friendApplicationHandler.acceptFriendApplication(e)}},{key:\"setFriendApplicationRead\",value:function(e){return this._friendApplicationHandler.setFriendApplicationRead(e)}},{key:\"getLocalFriendGroupList\",value:function(){var e=this._friendGroupHandler.getLocalFriendGroupList();return im(e)}},{key:\"createFriendGroup\",value:function(e){return this._friendGroupHandler.createFriendGroup(e)}},{key:\"deleteFriendGroup\",value:function(e){return this._friendGroupHandler.deleteFriendGroup(e)}},{key:\"addToFriendGroup\",value:function(e){return this._friendGroupHandler.addToFriendGroup(e)}},{key:\"removeFromFriendGroup\",value:function(e){return this._friendGroupHandler.removeFromFriendGroup(e)}},{key:\"renameFriendGroup\",value:function(e){return this._friendGroupHandler.renameFriendGroup(e)}},{key:\"onAddToFriendGroup\",value:function(e){return this._friendGroupHandler.onAddToFriendGroup(e)}},{key:\"updateWhenFriendAdded\",value:function(e){this._friendGroupHandler.updateWhenFriendAdded(e)}},{key:\"updateWhenFriendDeleted\",value:function(e){this._friendGroupHandler.updateWhenFriendDeleted(e)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._friendHandler.reset(),this._friendGroupHandler.reset(),this._friendApplicationHandler.reset()}}]),n}(Nl),qI=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"WorkerTimerModule\",o._isWorkerEnabled=!0,o._workerTimer=null,o._init(),o.getInnerEmitterInstance().on(ym,o._onCloudConfigUpdated,Gn(o)),o}return En(n,[{key:\"isWorkerEnabled\",value:function(){return this._isWorkerEnabled&&Gi}},{key:\"startWorkerTimer\",value:function(){Qi.log(\"\".concat(this._className,\".startWorkerTimer\")),this._workerTimer&&this._workerTimer.postMessage(\"start\")}},{key:\"stopWorkerTimer\",value:function(){Qi.log(\"\".concat(this._className,\".stopWorkerTimer\")),this._workerTimer&&this._workerTimer.postMessage(\"stop\")}},{key:\"_init\",value:function(){if(Gi){var e=URL.createObjectURL(new Blob([\\'let interval = -1;onmessage = function(event) {  if (event.data === \"start\") {    if (interval > 0) {      clearInterval(interval);    }    interval = setInterval(() => {      postMessage(\"\");    }, 1000)  } else if (event.data === \"stop\") {    clearInterval(interval);    interval = -1;  }};\\'],{type:\"application/javascript; charset=utf-8\"}));this._workerTimer=new Worker(e);var t=this;this._workerTimer.onmessage=function(){t._moduleManager.onCheckTimer()}}}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"enable_worker\");Qi.log(\"\".concat(this._className,\"._onCloudConfigUpdated enableWorker:\").concat(e)),\"1\"===e?!this._isWorkerEnabled&&Gi&&(this._isWorkerEnabled=!0,this.startWorkerTimer(),this._moduleManager.onWorkerTimerEnabled()):this._isWorkerEnabled&&Gi&&(this._isWorkerEnabled=!1,this.stopWorkerTimer(),this._moduleManager.onWorkerTimerDisabled())}},{key:\"terminate\",value:function(){Qi.log(\"\".concat(this._className,\".terminate\")),this._workerTimer&&(this._workerTimer.terminate(),this._workerTimer=null)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\"))}}]),n}(Nl),xI=function(){function e(){yn(this,e),this._className=\"PurchasedFeatureHandler\",this._purchasedFeatureMap=new Map}return En(e,[{key:\"isValidPurchaseBits\",value:function(e){return e&&\"string\"==typeof e&&e.length>=1&&e.length<=64&&/[01]{1,64}/.test(e)}},{key:\"parsePurchaseBits\",value:function(e){var t=\"\".concat(this._className,\".parsePurchaseBits\");if(this.isValidPurchaseBits(e)){this._purchasedFeatureMap.clear();for(var n=Object.values(ti),o=null,r=e.length-1,a=0;r>=0;r--,a++)o=a<32?new Bs(0,Math.pow(2,a)).toString():new Bs(Math.pow(2,a-32),0).toString(),-1!==n.indexOf(o)&&(\"1\"===e[r]?this._purchasedFeatureMap.set(o,!0):this._purchasedFeatureMap.set(o,!1))}else Qi.warn(\"\".concat(t,\" invalid purchase bits:\").concat(e))}},{key:\"hasPurchasedFeature\",value:function(e){return!!this._purchasedFeatureMap.get(e)}},{key:\"clear\",value:function(){this._purchasedFeatureMap.clear()}}]),e}(),VI=function(e){Dn(n,e);var t=wn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"CommercialConfigModule\",o._expiredTime=0,o._isFetching=!1,o._purchasedFeatureHandler=new xI,o}return En(n,[{key:\"_canFetch\",value:function(){return this.isLoggedIn()?!this._isFetching&&Date.now()>=this._expiredTime:(this._expiredTime=Date.now()+2e3,!1)}},{key:\"onCheckTimer\",value:function(e){this._canFetch()&&this.fetchConfig()}},{key:\"fetchConfig\",value:function(){var e=this,t=this._canFetch(),n=\"\".concat(this._className,\".fetchConfig\");if(Qi.log(\"\".concat(n,\" canFetch:\").concat(t)),t){var o=new Dp(vh);o.setNetworkType(this.getNetworkType());var r=this.getModule(dl).getSDKAppID();this._isFetching=!0,this.request({protocolName:ip,requestData:{SDKAppID:r}}).then((function(t){o.setMessage(\"purchaseBits:\".concat(t.data.purchaseBits)).end(),Qi.log(\"\".concat(n,\" ok.\")),e._parseConfig(t.data),e._isFetching=!1})).catch((function(t){e.probeNetwork().then((function(e){var n=Pn(e,2),r=n[0],a=n[1];o.setError(t,r,a).end()})),e._isFetching=!1}))}}},{key:\"onPushedConfig\",value:function(e){var t=\"\".concat(this._className,\".onPushedConfig\");Qi.log(\"\".concat(t)),new Dp(Mh).setNetworkType(this.getNetworkType()).setMessage(\"purchaseBits:\".concat(e.purchaseBits)).end(),this._parseConfig(e)}},{key:\"_parseConfig\",value:function(e){var t=\"\".concat(this._className,\"._parseConfig\"),n=e.errorCode,o=e.errorMessage,r=e.purchaseBits,a=e.expiredTime;0===n?(this._purchasedFeatureHandler.parsePurchaseBits(r),this._expiredTime=Date.now()+1e3*a):hu(n)?(Qi.log(\"\".concat(t,\" failed. Invalid message format:\"),e),this._setExpiredTimeOnResponseError(36e5)):(Qi.error(\"\".concat(t,\" errorCode:\").concat(n,\" errorMessage:\").concat(o)),this._setExpiredTimeOnResponseError(12e4))}},{key:\"_setExpiredTimeOnResponseError\",value:function(e){this._expiredTime=Date.now()+e}},{key:\"hasPurchasedFeature\",value:function(e){return this._purchasedFeatureHandler.hasPurchasedFeature(e)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler.clear()}}]),n}(Nl),KI=function(){function e(t){yn(this,e);var n=new Dp(Np);this._className=\"ModuleManager\",this._isReady=!1,this._reason=lp.USER_NOT_LOGGED_IN,this._startLoginTs=0,this._moduleMap=new Map,this._innerEmitter=null,this._outerEmitter=null,this._checkCount=0,this._checkTimer=-1,this._moduleMap.set(dl,new av(this,t)),this._moduleMap.set(Dl,new VI(this)),this._moduleMap.set(El,new II(this)),this._moduleMap.set(Tl,new qI(this)),this._moduleMap.set(Sl,new NI(this)),this._moduleMap.set(yl,new hI(this)),this._moduleMap.set(Ml,new MI(this)),this._moduleMap.set(ol,new sv(this)),this._moduleMap.set(rl,new Iv(this)),this._moduleMap.set(al,new rv(this)),this._moduleMap.set(sl,new cm(this)),this._moduleMap.set(ll,new Fm(this)),this._moduleMap.set(il,new Qm(this)),this._moduleMap.set(cl,new ev(this)),this._moduleMap.set(pl,new uv(this)),this._moduleMap.set(gl,new dv(this)),this._moduleMap.set(hl,new hv(this)),this._moduleMap.set(fl,new _v(this)),this._moduleMap.set(_l,new mv(this)),this._moduleMap.set(ml,new Ev(this)),this._moduleMap.set(vl,new Tv(this)),this._moduleMap.set(Il,new yI(this)),this._moduleMap.set(Al,new EI(this)),this._moduleMap.set(ul,new FI(this)),this._eventThrottleMap=new Map;var o=t.instanceID,r=t.oversea,a=t.SDKAppID,s=\"instanceID:\".concat(o,\" SDKAppID:\").concat(a,\" host:\").concat(Bu(),\" oversea:\").concat(r,\" inBrowser:\").concat(gi,\" inMiniApp:\").concat(pi)+\" workerAvailable:\".concat(Gi,\" UserAgent:\").concat(_i);Dp.bindEventStatModule(this._moduleMap.get(gl)),n.setMessage(\"\".concat(s,\" \").concat(function(){var e=\"\";if(pi)try{var t=hi.getSystemInfoSync(),n=t.model,o=t.version,r=t.system,a=t.platform,s=t.SDKVersion;e=\"model:\".concat(n,\" version:\").concat(o,\" system:\").concat(r,\" platform:\").concat(a,\" SDKVersion:\").concat(s)}catch(zI){e=\"\"}return e}())).end(),Qi.info(\"SDK \".concat(s)),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}return En(e,[{key:\"_startTimer\",value:function(){var e=this._moduleMap.get(Tl),t=e.isWorkerEnabled();Qi.log(\"\".concat(this._className,\".startTimer isWorkerEnabled:\").concat(t,\" seed:\").concat(this._checkTimer)),t?e.startWorkerTimer():this._startMainThreadTimer()}},{key:\"_startMainThreadTimer\",value:function(){Qi.log(\"\".concat(this._className,\"._startMainThreadTimer\")),this._checkTimer<0&&(this._checkTimer=setInterval(this.onCheckTimer.bind(this),1e3))}},{key:\"stopTimer\",value:function(){var e=this._moduleMap.get(Tl),t=e.isWorkerEnabled();Qi.log(\"\".concat(this._className,\".stopTimer isWorkerEnabled:\").concat(t,\" seed:\").concat(this._checkTimer)),t?e.stopWorkerTimer():this._stopMainThreadTimer()}},{key:\"_stopMainThreadTimer\",value:function(){Qi.log(\"\".concat(this._className,\"._stopMainThreadTimer\")),this._checkTimer>0&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}},{key:\"_stopMainThreadSocket\",value:function(){Qi.log(\"\".concat(this._className,\"._stopMainThreadSocket\"));var e=this._moduleMap.get(yl);e.setIsWorkerEnabled(!0),e.reConnect()}},{key:\"_startMainThreadSocket\",value:function(){Qi.log(\"\".concat(this._className,\"._startMainThreadSocket\"));var e=this._moduleMap.get(yl);e.setIsWorkerEnabled(!1),e.reConnect()}},{key:\"onWorkerTimerEnabled\",value:function(){Qi.log(\"\".concat(this._className,\".onWorkerTimerEnabled, disable main thread timer and socket\")),this._stopMainThreadTimer(),this._stopMainThreadSocket()}},{key:\"onWorkerTimerDisabled\",value:function(){Qi.log(\"\".concat(this._className,\".onWorkerTimerDisabled, enable main thread timer and socket\")),this._startMainThreadTimer(),this._startMainThreadSocket()}},{key:\"onCheckTimer\",value:function(){this._checkCount+=1;var e,t=Bn(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=Pn(e.value,2)[1];n.onCheckTimer&&n.onCheckTimer(this._checkCount)}}catch(o){t.e(o)}finally{t.f()}}},{key:\"_initReadyList\",value:function(){var e=this;this._readyList=[this._moduleMap.get(ol),this._moduleMap.get(ll)],this._readyList.forEach((function(t){t.ready((function(){return e._onModuleReady()}))}))}},{key:\"_onModuleReady\",value:function(){var e=!0;if(this._readyList.forEach((function(t){t.isReady()||(e=!1)})),e&&!this._isReady){this._isReady=!0,this._outerEmitter.emit(Wn.SDK_READY);var t=Date.now()-this._startLoginTs;Qi.warn(\"SDK is ready. cost \".concat(t,\" ms\")),this._startLoginTs=Date.now();var n=this._moduleMap.get(hl).getNetworkType(),o=this._ssoLogForReady.getStartTs()+ji;this._ssoLogForReady.setNetworkType(n).setMessage(t).start(o).end()}}},{key:\"login\",value:function(){0===this._startLoginTs&&(Yi(),this._startLoginTs=Date.now(),this._startTimer(),this._moduleMap.get(hl).start(),this._ssoLogForReady=new Dp(Cp),this._reason=lp.LOGGING_IN)}},{key:\"onLoginFailed\",value:function(){this._startLoginTs=0}},{key:\"getOuterEmitterInstance\",value:function(){return null===this._outerEmitter&&(this._outerEmitter=new fv,sm(this._outerEmitter),this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(e,t){var n=this;if(e===Wn.CONVERSATION_LIST_UPDATED||e===Wn.FRIEND_LIST_UPDATED||e===Wn.GROUP_LIST_UPDATED)if(this._eventThrottleMap.has(e)){var o=Date.now(),r=this._eventThrottleMap.get(e);o-r.last<1e3?(r.timeoutID&&clearTimeout(r.timeoutID),r.timeoutID=setTimeout((function(){r.last=o,n._outerEmitter._emit.apply(n._outerEmitter,[e,{name:e,data:n._getEventData(e)}])}),500)):(r.last=o,this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]))}else this._eventThrottleMap.set(e,{last:Date.now(),timeoutID:-1}),this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]);else this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:arguments[1]}])}.bind(this)),this._outerEmitter}},{key:\"_getEventData\",value:function(e){return e===Wn.CONVERSATION_LIST_UPDATED?this._moduleMap.get(ll).getLocalConversationList():e===Wn.FRIEND_LIST_UPDATED?this._moduleMap.get(ul).getLocalFriendList(!1):e===Wn.GROUP_LIST_UPDATED?this._moduleMap.get(il).getLocalGroupList():void 0}},{key:\"getInnerEmitterInstance\",value:function(){return null===this._innerEmitter&&(this._innerEmitter=new fv,this._innerEmitter._emit=this._innerEmitter.emit,this._innerEmitter.emit=function(e,t){var n;pu(arguments[1])&&arguments[1].data?(Qi.warn(\"inner eventData has data property, please check!\"),n=[e,{name:arguments[0],data:arguments[1].data}]):n=[e,{name:arguments[0],data:arguments[1]}],this._innerEmitter._emit.apply(this._innerEmitter,n)}.bind(this)),this._innerEmitter}},{key:\"hasModule\",value:function(e){return this._moduleMap.has(e)}},{key:\"getModule\",value:function(e){return this._moduleMap.get(e)}},{key:\"isReady\",value:function(){return this._isReady}},{key:\"getNotReadyReason\",value:function(){return this._reason}},{key:\"setNotReadyReason\",value:function(e){this._reason=e}},{key:\"onError\",value:function(e){Qi.warn(\"Oops! code:\".concat(e.code,\" message:\").concat(e.message)),new Dp(yh).setMessage(\"code:\".concat(e.code,\" message:\").concat(e.message)).setNetworkType(this.getModule(hl).getNetworkType()).setLevel(\"error\").end(),this.getOuterEmitterInstance().emit(Wn.ERROR,e)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),Yi();var e,t=Bn(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=Pn(e.value,2)[1];n.reset&&n.reset()}}catch(s){t.e(s)}finally{t.f()}this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._outerEmitter.emit(Wn.SDK_NOT_READY);var o,r=Bn(this._eventThrottleMap);try{for(r.s();!(o=r.n()).done;){var a=Pn(o.value,2)[1];a.timeoutID&&clearTimeout(a.timeoutID)}}catch(s){r.e(s)}finally{r.f()}this._eventThrottleMap.clear()}}]),e}(),BI=function(){function e(){yn(this,e),this._funcMap=new Map}return En(e,[{key:\"defense\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(\"string\"!=typeof e)return null;if(0===e.length)return null;if(\"function\"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var o=null;return this._funcMap.get(e).has(t)?o=this._funcMap.get(e).get(t):(o=this._pack(e,t,n),this._funcMap.get(e).set(t,o)),o}},{key:\"defenseOnce\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return\"function\"!=typeof t?null:this._pack(e,t,n)}},{key:\"find\",value:function(e,t){return\"string\"!=typeof e||0===e.length||\"function\"!=typeof t?null:this._funcMap.has(e)?this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(Qi.log(\"SafetyCallback.find: 找不到 func —— \".concat(e,\"/\").concat(\"\"!==t.name?t.name:\"[anonymous]\")),null):(Qi.log(\"SafetyCallback.find: 找不到 eventName-\".concat(e,\" 对应的 func\")),null)}},{key:\"delete\",value:function(e,t){return\"function\"==typeof t&&(!!this._funcMap.has(e)&&(!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)))}},{key:\"_pack\",value:function(e,t,n){return function(){try{t.apply(n,Array.from(arguments))}catch(s){var o=Object.values(Wn).indexOf(e);if(-1!==o){var r=Object.keys(Wn)[o];Qi.warn(\"接入侧事件 TIM.EVENT.\".concat(r,\" 对应的回调函数逻辑存在问题，请检查！\"),s)}var a=new Dp(fh);a.setMessage(\"eventName:\".concat(e)).setMoreMessage(s.message).end()}}}}]),e}(),HI=function(){function e(t){yn(this,e);var n={SDKAppID:t.SDKAppID,unlimitedAVChatRoom:t.unlimitedAVChatRoom||!1,scene:t.scene||\"\",oversea:t.oversea||!1,instanceID:Ku(),devMode:t.devMode||!1,proxyServer:t.proxyServer||void 0};this._moduleManager=new KI(n),this._safetyCallbackFactory=new BI}return En(e,[{key:\"onError\",value:function(e){this._moduleManager.onError(e)}},{key:\"login\",value:function(e){return this._moduleManager.login(),this._moduleManager.getModule(ol).login(e)}},{key:\"logout\",value:function(){var e=this;return this._moduleManager.getModule(ol).logout().then((function(t){return e._moduleManager.reset(),t}))}},{key:\"isReady\",value:function(){return this._moduleManager.isReady()}},{key:\"getNotReadyReason\",value:function(){return this._moduleManager.getNotReadyReason()}},{key:\"destroy\",value:function(){var e=this;return this.logout().finally((function(){e._moduleManager.stopTimer(),e._moduleManager.getModule(Tl).terminate(),e._moduleManager.getModule(yl).dealloc();var t=e._moduleManager.getOuterEmitterInstance(),n=e._moduleManager.getModule(dl);t.emit(Wn.SDK_DESTROY,{SDKAppID:n.getSDKAppID()})}))}},{key:\"on\",value:function(e,t,n){e===Wn.GROUP_SYSTEM_NOTICE_RECEIVED&&Qi.warn(\"！！！TIM.EVENT.GROUP_SYSTEM_NOTICE_RECEIVED v2.6.0起弃用，为了更好的体验，请在 TIM.EVENT.MESSAGE_RECEIVED 事件回调内接收处理群系统通知，详细请参考：https://web.sdk.qcloud.com/im/doc/zh-cn/Message.html#.GroupSystemNoticePayload\"),Qi.debug(\"on\",\"eventName:\".concat(e)),this._moduleManager.getOuterEmitterInstance().on(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:\"once\",value:function(e,t,n){Qi.debug(\"once\",\"eventName:\".concat(e)),this._moduleManager.getOuterEmitterInstance().once(e,this._safetyCallbackFactory.defenseOnce(e,t,n),n||this)}},{key:\"off\",value:function(e,t,n,o){Qi.debug(\"off\",\"eventName:\".concat(e));var r=this._safetyCallbackFactory.find(e,t);null!==r&&(this._moduleManager.getOuterEmitterInstance().off(e,r,n,o),this._safetyCallbackFactory.delete(e,t))}},{key:\"registerPlugin\",value:function(e){this._moduleManager.getModule(ml).registerPlugin(e)}},{key:\"setLogLevel\",value:function(e){if(e<=0){console.log([\"\",\" ________  ______  __       __  __       __  ________  _______\",\"|        \\\\\\\\|      \\\\\\\\|  \\\\\\\\     /  \\\\\\\\|  \\\\\\\\  _  |  \\\\\\\\|        \\\\\\\\|       \\\\\\\\\",\" \\\\\\\\$$$$$$$$ \\\\\\\\$$$$$$| $$\\\\\\\\   /  $$| $$ / \\\\\\\\ | $$| $$$$$$$$| $$$$$$$\\\\\\\\\",\"   | $$     | $$  | $$$\\\\\\\\ /  $$$| $$/  $\\\\\\\\| $$| $$__    | $$__/ $$\",\"   | $$     | $$  | $$$$\\\\\\\\  $$$$| $$  $$$\\\\\\\\ $$| $$  \\\\\\\\   | $$    $$\",\"   | $$     | $$  | $$\\\\\\\\$$ $$ $$| $$ $$\\\\\\\\$$\\\\\\\\$$| $$$$$   | $$$$$$$\\\\\\\\\",\"   | $$    _| $$_ | $$ \\\\\\\\$$$| $$| $$$$  \\\\\\\\$$$$| $$_____ | $$__/ $$\",\"   | $$   |   $$ \\\\\\\\| $$  \\\\\\\\$ | $$| $$$    \\\\\\\\$$$| $$     \\\\\\\\| $$    $$\",\"    \\\\\\\\$$    \\\\\\\\$$$$$$ \\\\\\\\$$      \\\\\\\\$$ \\\\\\\\$$      \\\\\\\\$$ \\\\\\\\$$$$$$$$ \\\\\\\\$$$$$$$\",\"\",\"\"].join(\"\\\\n\")),console.log(\"%cIM 智能客服，随时随地解决您的问题 →_→ https://cloud.tencent.com/act/event/smarty-service?from=im-doc\",\"color:#006eff\"),console.log(\"%c从v2.11.2起，SDK 支持了 WebSocket，小程序需要添加受信域名！升级指引: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html\",\"color:#ff0000\");console.log([\"\",\"参考以下文档，会更快解决问题哦！(#^.^#)\\\\n\",\"SDK 更新日志: https://cloud.tencent.com/document/product/269/38492\\\\n\",\"SDK 接口文档: https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html\\\\n\",\"常见问题: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-01-faq.html\\\\n\",\"反馈问题？戳我提 issue: https://github.com/tencentyun/TIMSDK/issues\\\\n\",\"如果您需要在生产环境关闭上面的日志，请 tim.setLogLevel(1)\\\\n\"].join(\"\\\\n\"))}Qi.setLevel(e)}},{key:\"createTextMessage\",value:function(e){return this._moduleManager.getModule(rl).createTextMessage(e)}},{key:\"createTextAtMessage\",value:function(e){return this._moduleManager.getModule(rl).createTextMessage(e)}},{key:\"createImageMessage\",value:function(e){return this._moduleManager.getModule(rl).createImageMessage(e)}},{key:\"createAudioMessage\",value:function(e){return this._moduleManager.getModule(rl).createAudioMessage(e)}},{key:\"createVideoMessage\",value:function(e){return this._moduleManager.getModule(rl).createVideoMessage(e)}},{key:\"createCustomMessage\",value:function(e){return this._moduleManager.getModule(rl).createCustomMessage(e)}},{key:\"createFaceMessage\",value:function(e){return this._moduleManager.getModule(rl).createFaceMessage(e)}},{key:\"createFileMessage\",value:function(e){return this._moduleManager.getModule(rl).createFileMessage(e)}},{key:\"createLocationMessage\",value:function(e){return this._moduleManager.getModule(rl).createLocationMessage(e)}},{key:\"createMergerMessage\",value:function(e){return this._moduleManager.getModule(rl).createMergerMessage(e)}},{key:\"downloadMergerMessage\",value:function(e){return e.type!==Yn.MSG_MERGER?um(new rm({code:lp.MESSAGE_MERGER_TYPE_INVALID,message:dp.MESSAGE_MERGER_TYPE_INVALID})):Xu(e.payload.downloadKey)?um(new rm({code:lp.MESSAGE_MERGER_KEY_INVALID,message:dp.MESSAGE_MERGER_KEY_INVALID})):this._moduleManager.getModule(rl).downloadMergerMessage(e).catch((function(e){return um(new rm({code:lp.MESSAGE_MERGER_DOWNLOAD_FAIL,message:dp.MESSAGE_MERGER_DOWNLOAD_FAIL}))}))}},{key:\"createForwardMessage\",value:function(e){return this._moduleManager.getModule(rl).createForwardMessage(e)}},{key:\"sendMessage\",value:function(e,t){return e instanceof X_?this._moduleManager.getModule(rl).sendMessageInstance(e,t):um(new rm({code:lp.MESSAGE_SEND_NEED_MESSAGE_INSTANCE,message:dp.MESSAGE_SEND_NEED_MESSAGE_INSTANCE}))}},{key:\"callExperimentalAPI\",value:function(e,t){return\"handleGroupInvitation\"===e?this._moduleManager.getModule(il).handleGroupInvitation(t):um(new rm({code:lp.INVALID_OPERATION,message:dp.INVALID_OPERATION}))}},{key:\"revokeMessage\",value:function(e){return this._moduleManager.getModule(rl).revokeMessage(e)}},{key:\"resendMessage\",value:function(e){return this._moduleManager.getModule(rl).resendMessage(e)}},{key:\"deleteMessage\",value:function(e){return this._moduleManager.getModule(rl).deleteMessage(e)}},{key:\"getMessageList\",value:function(e){return this._moduleManager.getModule(ll).getMessageList(e)}},{key:\"sendMessageReadReceipt\",value:function(e){return this._moduleManager.getModule(il).sendReadReceipt(e)}},{key:\"getMessageReadReceiptList\",value:function(e){return this._moduleManager.getModule(il).getReadReceiptList(e)}},{key:\"getGroupMessageReadMemberList\",value:function(e){return this._moduleManager.getModule(il).getReadReceiptDetail(e)}},{key:\"findMessage\",value:function(e){return this._moduleManager.getModule(ll).findMessage(e)}},{key:\"setMessageRead\",value:function(e){return this._moduleManager.getModule(ll).setMessageRead(e)}},{key:\"getConversationList\",value:function(e){return this._moduleManager.getModule(ll).getConversationList(e)}},{key:\"getConversationProfile\",value:function(e){return this._moduleManager.getModule(ll).getConversationProfile(e)}},{key:\"deleteConversation\",value:function(e){return this._moduleManager.getModule(ll).deleteConversation(e)}},{key:\"pinConversation\",value:function(e){return this._moduleManager.getModule(ll).pinConversation(e)}},{key:\"setAllMessageRead\",value:function(e){return this._moduleManager.getModule(ll).setAllMessageRead(e)}},{key:\"setMessageRemindType\",value:function(e){return this._moduleManager.getModule(ll).setMessageRemindType(e)}},{key:\"getMyProfile\",value:function(){return this._moduleManager.getModule(al).getMyProfile()}},{key:\"getUserProfile\",value:function(e){return this._moduleManager.getModule(al).getUserProfile(e)}},{key:\"updateMyProfile\",value:function(e){return this._moduleManager.getModule(al).updateMyProfile(e)}},{key:\"getBlacklist\",value:function(){return this._moduleManager.getModule(al).getLocalBlacklist()}},{key:\"addToBlacklist\",value:function(e){return this._moduleManager.getModule(al).addBlacklist(e)}},{key:\"removeFromBlacklist\",value:function(e){return this._moduleManager.getModule(al).deleteBlacklist(e)}},{key:\"getFriendList\",value:function(){var e=this._moduleManager.getModule(ul);return e?e.getLocalFriendList():um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"addFriend\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.addFriend(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"deleteFriend\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.deleteFriend(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"checkFriend\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.checkFriend(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"getFriendProfile\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.getFriendProfile(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"updateFriend\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.updateFriend(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"getFriendApplicationList\",value:function(){var e=this._moduleManager.getModule(ul);return e?e.getLocalFriendApplicationList():um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"acceptFriendApplication\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.acceptFriendApplication(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"refuseFriendApplication\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.refuseFriendApplication(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"deleteFriendApplication\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.deleteFriendApplication(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"setFriendApplicationRead\",value:function(){var e=this._moduleManager.getModule(ul);return e?e.setFriendApplicationRead():um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"getFriendGroupList\",value:function(){var e=this._moduleManager.getModule(ul);return e?e.getLocalFriendGroupList():um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"createFriendGroup\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.createFriendGroup(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"deleteFriendGroup\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.deleteFriendGroup(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"addToFriendGroup\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.addToFriendGroup(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"removeFromFriendGroup\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.removeFromFriendGroup(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"renameFriendGroup\",value:function(e){var t=this._moduleManager.getModule(ul);return t?t.renameFriendGroup(e):um({code:lp.CANNOT_FIND_MODULE,message:dp.CANNOT_FIND_MODULE})}},{key:\"getGroupList\",value:function(e){return this._moduleManager.getModule(il).getGroupList(e)}},{key:\"getGroupProfile\",value:function(e){return this._moduleManager.getModule(il).getGroupProfile(e)}},{key:\"createGroup\",value:function(e){return this._moduleManager.getModule(il).createGroup(e)}},{key:\"dismissGroup\",value:function(e){return this._moduleManager.getModule(il).dismissGroup(e)}},{key:\"updateGroupProfile\",value:function(e){return this._moduleManager.getModule(il).updateGroupProfile(e)}},{key:\"joinGroup\",value:function(e){return this._moduleManager.getModule(il).joinGroup(e)}},{key:\"quitGroup\",value:function(e){return this._moduleManager.getModule(il).quitGroup(e)}},{key:\"searchGroupByID\",value:function(e){return this._moduleManager.getModule(il).searchGroupByID(e)}},{key:\"getGroupOnlineMemberCount\",value:function(e){return this._moduleManager.getModule(il).getGroupOnlineMemberCount(e)}},{key:\"changeGroupOwner\",value:function(e){return this._moduleManager.getModule(il).changeGroupOwner(e)}},{key:\"handleGroupApplication\",value:function(e){return this._moduleManager.getModule(il).handleGroupApplication(e)}},{key:\"initGroupAttributes\",value:function(e){return this._moduleManager.getModule(il).initGroupAttributes(e)}},{key:\"setGroupAttributes\",value:function(e){return this._moduleManager.getModule(il).setGroupAttributes(e)}},{key:\"deleteGroupAttributes\",value:function(e){return this._moduleManager.getModule(il).deleteGroupAttributes(e)}},{key:\"getGroupAttributes\",value:function(e){return this._moduleManager.getModule(il).getGroupAttributes(e)}},{key:\"getGroupMemberList\",value:function(e){return this._moduleManager.getModule(cl).getGroupMemberList(e)}},{key:\"getGroupMemberProfile\",value:function(e){return this._moduleManager.getModule(cl).getGroupMemberProfile(e)}},{key:\"addGroupMember\",value:function(e){return this._moduleManager.getModule(cl).addGroupMember(e)}},{key:\"deleteGroupMember\",value:function(e){return this._moduleManager.getModule(cl).deleteGroupMember(e)}},{key:\"setGroupMemberMuteTime\",value:function(e){return this._moduleManager.getModule(cl).setGroupMemberMuteTime(e)}},{key:\"setGroupMemberRole\",value:function(e){return this._moduleManager.getModule(cl).setGroupMemberRole(e)}},{key:\"setGroupMemberNameCard\",value:function(e){return this._moduleManager.getModule(cl).setGroupMemberNameCard(e)}},{key:\"setGroupMemberCustomField\",value:function(e){return this._moduleManager.getModule(cl).setGroupMemberCustomField(e)}}]),e}(),jI={login:\"login\",logout:\"logout\",destroy:\"destroy\",on:\"on\",off:\"off\",ready:\"ready\",setLogLevel:\"setLogLevel\",joinGroup:\"joinGroup\",quitGroup:\"quitGroup\",registerPlugin:\"registerPlugin\",getGroupOnlineMemberCount:\"getGroupOnlineMemberCount\"};function WI(e,t){if(e.isReady()||void 0!==jI[t])return!0;var n=e.getNotReadyReason(),o=\"\";Object.getOwnPropertyNames(lp).forEach((function(e){lp[e]===n&&(o=dp[e])}));var r={code:n,message:\"\".concat(o,\"导致 sdk not ready。\").concat(t,\" \").concat(dp.SDK_IS_NOT_READY,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/module-EVENT.html#.SDK_READY\")};return e.onError(r),r}var YI={},$I={};return $I.create=function(e){var t=0;if(cu(e.SDKAppID))t=e.SDKAppID;else if(Qi.warn(\"TIM.create SDKAppID 的类型应该为 Number，请修改！\"),t=parseInt(e.SDKAppID),isNaN(t))return Qi.error(\"TIM.create failed. 解析 SDKAppID 失败，请检查传参！\"),null;if(t&&YI[t])return YI[t];Qi.log(\"TIM.create\");var n=new HI(Sn({},e,{SDKAppID:t}));n.on(Wn.SDK_DESTROY,(function(e){YI[e.data.SDKAppID]=null,delete YI[e.data.SDKAppID]}));var o=function(e){var t=Object.create(null);return Object.keys($c).forEach((function(n){if(e[n]){var o=$c[n],r=new uo;t[o]=function(){var t=Array.from(arguments);return r.use((function(t,o){var r=WI(e,n);return!0===r?o():um(r)})).use((function(e,t){if(!0===Qu(e,Yc[n],o))return t()})).use((function(t,o){return e[n].apply(e,t)})),r.run(t)}}})),t}(n);return YI[t]=o,Qi.log(\"TIM.create ok\"),o},$I.TYPES=Yn,$I.EVENT=Wn,$I.VERSION=\"2.18.0\",Qi.log(\"TIM.VERSION: \".concat($I.VERSION)),$I}));\\r\\n\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGltLWpzLXNkay90aW0tanMtZnJpZW5kc2hpcC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90aW0tanMtc2RrL3RpbS1qcy1mcmllbmRzaGlwLmpzP2VhMWIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnOyFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKHQpOihlPWV8fHNlbGYpLlRJTT10KCl9KHRoaXMsKGZ1bmN0aW9uKCl7dmFyIGU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIHQoZSx0KXtyZXR1cm4gZSh0PXtleHBvcnRzOnt9fSx0LmV4cG9ydHMpLHQuZXhwb3J0c312YXIgbj1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5NYXRoPT1NYXRoJiZlfSxvPW4oXCJvYmplY3RcIj09dHlwZW9mIGdsb2JhbFRoaXMmJmdsb2JhbFRoaXMpfHxuKFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyl8fG4oXCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJnNlbGYpfHxuKFwib2JqZWN0XCI9PXR5cGVvZiBlJiZlKXx8RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpLHI9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX0sYT0hcigoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LDEse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pWzFdfSkpLHM9e30ucHJvcGVydHlJc0VudW1lcmFibGUsaT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHU9e2Y6aSYmIXMuY2FsbCh7MToyfSwxKT9mdW5jdGlvbihlKXt2YXIgdD1pKHRoaXMsZSk7cmV0dXJuISF0JiZ0LmVudW1lcmFibGV9OnN9LGM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19LGw9e30udG9TdHJpbmcsZD1mdW5jdGlvbihlKXtyZXR1cm4gbC5jYWxsKGUpLnNsaWNlKDgsLTEpfSxwPVwiXCIuc3BsaXQsZz1yKChmdW5jdGlvbigpe3JldHVybiFPYmplY3QoXCJ6XCIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApfSkpP2Z1bmN0aW9uKGUpe3JldHVyblwiU3RyaW5nXCI9PWQoZSk/cC5jYWxsKGUsXCJcIik6T2JqZWN0KGUpfTpPYmplY3QsaD1mdW5jdGlvbihlKXtpZihudWxsPT1lKXRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uIFwiK2UpO3JldHVybiBlfSxmPWZ1bmN0aW9uKGUpe3JldHVybiBnKGgoZSkpfSxfPWZ1bmN0aW9uKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlP251bGwhPT1lOlwiZnVuY3Rpb25cIj09dHlwZW9mIGV9LG09ZnVuY3Rpb24oZSx0KXtpZighXyhlKSlyZXR1cm4gZTt2YXIgbixvO2lmKHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49ZS50b1N0cmluZykmJiFfKG89bi5jYWxsKGUpKSlyZXR1cm4gbztpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihuPWUudmFsdWVPZikmJiFfKG89bi5jYWxsKGUpKSlyZXR1cm4gbztpZighdCYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj1lLnRvU3RyaW5nKSYmIV8obz1uLmNhbGwoZSkpKXJldHVybiBvO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX0sdj17fS5oYXNPd25Qcm9wZXJ0eSxNPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHYuY2FsbChlLHQpfSx5PW8uZG9jdW1lbnQsST1fKHkpJiZfKHkuY3JlYXRlRWxlbWVudCksRT1mdW5jdGlvbihlKXtyZXR1cm4gST95LmNyZWF0ZUVsZW1lbnQoZSk6e319LFQ9IWEmJiFyKChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoRShcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pKSxBPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsUz17ZjphP0E6ZnVuY3Rpb24oZSx0KXtpZihlPWYoZSksdD1tKHQsITApLFQpdHJ5e3JldHVybiBBKGUsdCl9Y2F0Y2gobil7fWlmKE0oZSx0KSlyZXR1cm4gYyghdS5mLmNhbGwoZSx0KSxlW3RdKX19LEQ9ZnVuY3Rpb24oZSl7aWYoIV8oZSkpdGhyb3cgVHlwZUVycm9yKFN0cmluZyhlKStcIiBpcyBub3QgYW4gb2JqZWN0XCIpO3JldHVybiBlfSxOPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxDPXtmOmE/TjpmdW5jdGlvbihlLHQsbil7aWYoRChlKSx0PW0odCwhMCksRChuKSxUKXRyeXtyZXR1cm4gTihlLHQsbil9Y2F0Y2gobyl7fWlmKFwiZ2V0XCJpbiBufHxcInNldFwiaW4gbil0aHJvdyBUeXBlRXJyb3IoXCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm5cInZhbHVlXCJpbiBuJiYoZVt0XT1uLnZhbHVlKSxlfX0saz1hP2Z1bmN0aW9uKGUsdCxuKXtyZXR1cm4gQy5mKGUsdCxjKDEsbikpfTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGVbdF09bixlfSxMPWZ1bmN0aW9uKGUsdCl7dHJ5e2sobyxlLHQpfWNhdGNoKG4pe29bZV09dH1yZXR1cm4gdH0sUj1vW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdfHxMKFwiX19jb3JlLWpzX3NoYXJlZF9fXCIse30pLE89RnVuY3Rpb24udG9TdHJpbmc7XCJmdW5jdGlvblwiIT10eXBlb2YgUi5pbnNwZWN0U291cmNlJiYoUi5pbnNwZWN0U291cmNlPWZ1bmN0aW9uKGUpe3JldHVybiBPLmNhbGwoZSl9KTt2YXIgRyxiLHcsUD1SLmluc3BlY3RTb3VyY2UsVT1vLldlYWtNYXAsRj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBVJiYvbmF0aXZlIGNvZGUvLnRlc3QoUChVKSkscT10KChmdW5jdGlvbihlKXsoZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIFJbZV18fChSW2VdPXZvaWQgMCE9PXQ/dDp7fSl9KShcInZlcnNpb25zXCIsW10pLnB1c2goe3ZlcnNpb246XCIzLjYuNFwiLG1vZGU6XCJnbG9iYWxcIixjb3B5cmlnaHQ6XCLCqSAyMDIwIERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpXCJ9KX0pKSx4PTAsVj1NYXRoLnJhbmRvbSgpLEs9ZnVuY3Rpb24oZSl7cmV0dXJuXCJTeW1ib2woXCIrU3RyaW5nKHZvaWQgMD09PWU/XCJcIjplKStcIilfXCIrKCsreCtWKS50b1N0cmluZygzNil9LEI9cShcImtleXNcIiksSD1mdW5jdGlvbihlKXtyZXR1cm4gQltlXXx8KEJbZV09SyhlKSl9LGo9e30sVz1vLldlYWtNYXA7aWYoRil7dmFyIFk9bmV3IFcsJD1ZLmdldCx6PVkuaGFzLEo9WS5zZXQ7Rz1mdW5jdGlvbihlLHQpe3JldHVybiBKLmNhbGwoWSxlLHQpLHR9LGI9ZnVuY3Rpb24oZSl7cmV0dXJuICQuY2FsbChZLGUpfHx7fX0sdz1mdW5jdGlvbihlKXtyZXR1cm4gei5jYWxsKFksZSl9fWVsc2V7dmFyIFg9SChcInN0YXRlXCIpO2pbWF09ITAsRz1mdW5jdGlvbihlLHQpe3JldHVybiBrKGUsWCx0KSx0fSxiPWZ1bmN0aW9uKGUpe3JldHVybiBNKGUsWCk/ZVtYXTp7fX0sdz1mdW5jdGlvbihlKXtyZXR1cm4gTShlLFgpfX12YXIgUT17c2V0OkcsZ2V0OmIsaGFzOncsZW5mb3JjZTpmdW5jdGlvbihlKXtyZXR1cm4gdyhlKT9iKGUpOkcoZSx7fSl9LGdldHRlckZvcjpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG47aWYoIV8odCl8fChuPWIodCkpLnR5cGUhPT1lKXRocm93IFR5cGVFcnJvcihcIkluY29tcGF0aWJsZSByZWNlaXZlciwgXCIrZStcIiByZXF1aXJlZFwiKTtyZXR1cm4gbn19fSxaPXQoKGZ1bmN0aW9uKGUpe3ZhciB0PVEuZ2V0LG49US5lbmZvcmNlLHI9U3RyaW5nKFN0cmluZykuc3BsaXQoXCJTdHJpbmdcIik7KGUuZXhwb3J0cz1mdW5jdGlvbihlLHQsYSxzKXt2YXIgaT0hIXMmJiEhcy51bnNhZmUsdT0hIXMmJiEhcy5lbnVtZXJhYmxlLGM9ISFzJiYhIXMubm9UYXJnZXRHZXQ7XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmKFwic3RyaW5nXCIhPXR5cGVvZiB0fHxNKGEsXCJuYW1lXCIpfHxrKGEsXCJuYW1lXCIsdCksbihhKS5zb3VyY2U9ci5qb2luKFwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6XCJcIikpLGUhPT1vPyhpPyFjJiZlW3RdJiYodT0hMCk6ZGVsZXRlIGVbdF0sdT9lW3RdPWE6ayhlLHQsYSkpOnU/ZVt0XT1hOkwodCxhKX0pKEZ1bmN0aW9uLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcyYmdCh0aGlzKS5zb3VyY2V8fFAodGhpcyl9KSl9KSksZWU9byx0ZT1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2U6dm9pZCAwfSxuZT1mdW5jdGlvbihlLHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDI/dGUoZWVbZV0pfHx0ZShvW2VdKTplZVtlXSYmZWVbZV1bdF18fG9bZV0mJm9bZV1bdF19LG9lPU1hdGguY2VpbCxyZT1NYXRoLmZsb29yLGFlPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/cmU6b2UpKGUpfSxzZT1NYXRoLm1pbixpZT1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP3NlKGFlKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9LHVlPU1hdGgubWF4LGNlPU1hdGgubWluLGxlPWZ1bmN0aW9uKGUsdCl7dmFyIG49YWUoZSk7cmV0dXJuIG48MD91ZShuK3QsMCk6Y2Uobix0KX0sZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixvKXt2YXIgcixhPWYodCkscz1pZShhLmxlbmd0aCksaT1sZShvLHMpO2lmKGUmJm4hPW4pe2Zvcig7cz5pOylpZigocj1hW2krK10pIT1yKXJldHVybiEwfWVsc2UgZm9yKDtzPmk7aSsrKWlmKChlfHxpIGluIGEpJiZhW2ldPT09bilyZXR1cm4gZXx8aXx8MDtyZXR1cm4hZSYmLTF9fSxwZT17aW5jbHVkZXM6ZGUoITApLGluZGV4T2Y6ZGUoITEpfSxnZT1wZS5pbmRleE9mLGhlPWZ1bmN0aW9uKGUsdCl7dmFyIG4sbz1mKGUpLHI9MCxhPVtdO2ZvcihuIGluIG8pIU0oaixuKSYmTShvLG4pJiZhLnB1c2gobik7Zm9yKDt0Lmxlbmd0aD5yOylNKG8sbj10W3IrK10pJiYofmdlKGEsbil8fGEucHVzaChuKSk7cmV0dXJuIGF9LGZlPVtcImNvbnN0cnVjdG9yXCIsXCJoYXNPd25Qcm9wZXJ0eVwiLFwiaXNQcm90b3R5cGVPZlwiLFwicHJvcGVydHlJc0VudW1lcmFibGVcIixcInRvTG9jYWxlU3RyaW5nXCIsXCJ0b1N0cmluZ1wiLFwidmFsdWVPZlwiXSxfZT1mZS5jb25jYXQoXCJsZW5ndGhcIixcInByb3RvdHlwZVwiKSxtZT17ZjpPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc3x8ZnVuY3Rpb24oZSl7cmV0dXJuIGhlKGUsX2UpfX0sdmU9e2Y6T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc30sTWU9bmUoXCJSZWZsZWN0XCIsXCJvd25LZXlzXCIpfHxmdW5jdGlvbihlKXt2YXIgdD1tZS5mKEQoZSkpLG49dmUuZjtyZXR1cm4gbj90LmNvbmNhdChuKGUpKTp0fSx5ZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1NZSh0KSxvPUMuZixyPVMuZixhPTA7YTxuLmxlbmd0aDthKyspe3ZhciBzPW5bYV07TShlLHMpfHxvKGUscyxyKHQscykpfX0sSWU9LyN8XFwucHJvdG90eXBlXFwuLyxFZT1mdW5jdGlvbihlLHQpe3ZhciBuPUFlW1RlKGUpXTtyZXR1cm4gbj09RGV8fG4hPVNlJiYoXCJmdW5jdGlvblwiPT10eXBlb2YgdD9yKHQpOiEhdCl9LFRlPUVlLm5vcm1hbGl6ZT1mdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nKGUpLnJlcGxhY2UoSWUsXCIuXCIpLnRvTG93ZXJDYXNlKCl9LEFlPUVlLmRhdGE9e30sU2U9RWUuTkFUSVZFPVwiTlwiLERlPUVlLlBPTFlGSUxMPVwiUFwiLE5lPUVlLENlPVMuZixrZT1mdW5jdGlvbihlLHQpe3ZhciBuLHIsYSxzLGksdT1lLnRhcmdldCxjPWUuZ2xvYmFsLGw9ZS5zdGF0O2lmKG49Yz9vOmw/b1t1XXx8TCh1LHt9KToob1t1XXx8e30pLnByb3RvdHlwZSlmb3IociBpbiB0KXtpZihzPXRbcl0sYT1lLm5vVGFyZ2V0R2V0PyhpPUNlKG4scikpJiZpLnZhbHVlOm5bcl0sIU5lKGM/cjp1KyhsP1wiLlwiOlwiI1wiKStyLGUuZm9yY2VkKSYmdm9pZCAwIT09YSl7aWYodHlwZW9mIHM9PXR5cGVvZiBhKWNvbnRpbnVlO3llKHMsYSl9KGUuc2hhbXx8YSYmYS5zaGFtKSYmayhzLFwic2hhbVwiLCEwKSxaKG4scixzLGUpfX0sTGU9ZnVuY3Rpb24oZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGUpK1wiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO3JldHVybiBlfSxSZT1mdW5jdGlvbihlLHQsbil7aWYoTGUoZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gobil7Y2FzZSAwOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodCl9O2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIGUuY2FsbCh0LG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4sbyl7cmV0dXJuIGUuY2FsbCh0LG4sbyl9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixvLHIpe3JldHVybiBlLmNhbGwodCxuLG8scil9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19LE9lPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QoaChlKSl9LEdlPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVyblwiQXJyYXlcIj09ZChlKX0sYmU9ISFPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzJiYhcigoZnVuY3Rpb24oKXtyZXR1cm4hU3RyaW5nKFN5bWJvbCgpKX0pKSx3ZT1iZSYmIVN5bWJvbC5zaGFtJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yLFBlPXEoXCJ3a3NcIiksVWU9by5TeW1ib2wsRmU9d2U/VWU6VWUmJlVlLndpdGhvdXRTZXR0ZXJ8fEsscWU9ZnVuY3Rpb24oZSl7cmV0dXJuIE0oUGUsZSl8fChiZSYmTShVZSxlKT9QZVtlXT1VZVtlXTpQZVtlXT1GZShcIlN5bWJvbC5cIitlKSksUGVbZV19LHhlPXFlKFwic3BlY2llc1wiKSxWZT1mdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiBHZShlKSYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mKG49ZS5jb25zdHJ1Y3Rvcil8fG4hPT1BcnJheSYmIUdlKG4ucHJvdG90eXBlKT9fKG4pJiZudWxsPT09KG49blt4ZV0pJiYobj12b2lkIDApOm49dm9pZCAwKSxuZXcodm9pZCAwPT09bj9BcnJheTpuKSgwPT09dD8wOnQpfSxLZT1bXS5wdXNoLEJlPWZ1bmN0aW9uKGUpe3ZhciB0PTE9PWUsbj0yPT1lLG89Mz09ZSxyPTQ9PWUsYT02PT1lLHM9NT09ZXx8YTtyZXR1cm4gZnVuY3Rpb24oaSx1LGMsbCl7Zm9yKHZhciBkLHAsaD1PZShpKSxmPWcoaCksXz1SZSh1LGMsMyksbT1pZShmLmxlbmd0aCksdj0wLE09bHx8VmUseT10P00oaSxtKTpuP00oaSwwKTp2b2lkIDA7bT52O3YrKylpZigoc3x8diBpbiBmKSYmKHA9XyhkPWZbdl0sdixoKSxlKSlpZih0KXlbdl09cDtlbHNlIGlmKHApc3dpdGNoKGUpe2Nhc2UgMzpyZXR1cm4hMDtjYXNlIDU6cmV0dXJuIGQ7Y2FzZSA2OnJldHVybiB2O2Nhc2UgMjpLZS5jYWxsKHksZCl9ZWxzZSBpZihyKXJldHVybiExO3JldHVybiBhPy0xOm98fHI/cjp5fX0sSGU9e2ZvckVhY2g6QmUoMCksbWFwOkJlKDEpLGZpbHRlcjpCZSgyKSxzb21lOkJlKDMpLGV2ZXJ5OkJlKDQpLGZpbmQ6QmUoNSksZmluZEluZGV4OkJlKDYpfSxqZT1mdW5jdGlvbihlLHQpe3ZhciBuPVtdW2VdO3JldHVybiEhbiYmcigoZnVuY3Rpb24oKXtuLmNhbGwobnVsbCx0fHxmdW5jdGlvbigpe3Rocm93IDF9LDEpfSkpfSxXZT1PYmplY3QuZGVmaW5lUHJvcGVydHksWWU9e30sJGU9ZnVuY3Rpb24oZSl7dGhyb3cgZX0semU9ZnVuY3Rpb24oZSx0KXtpZihNKFllLGUpKXJldHVybiBZZVtlXTt0fHwodD17fSk7dmFyIG49W11bZV0sbz0hIU0odCxcIkFDQ0VTU09SU1wiKSYmdC5BQ0NFU1NPUlMscz1NKHQsMCk/dFswXTokZSxpPU0odCwxKT90WzFdOnZvaWQgMDtyZXR1cm4gWWVbZV09ISFuJiYhcigoZnVuY3Rpb24oKXtpZihvJiYhYSlyZXR1cm4hMDt2YXIgZT17bGVuZ3RoOi0xfTtvP1dlKGUsMSx7ZW51bWVyYWJsZTohMCxnZXQ6JGV9KTplWzFdPTEsbi5jYWxsKGUscyxpKX0pKX0sSmU9SGUuZm9yRWFjaCxYZT1qZShcImZvckVhY2hcIiksUWU9emUoXCJmb3JFYWNoXCIpLFplPVhlJiZRZT9bXS5mb3JFYWNoOmZ1bmN0aW9uKGUpe3JldHVybiBKZSh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfTtrZSh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6W10uZm9yRWFjaCE9WmV9LHtmb3JFYWNoOlplfSk7dmFyIGV0PWZ1bmN0aW9uKGUsdCxuLG8pe3RyeXtyZXR1cm4gbz90KEQobilbMF0sblsxXSk6dChuKX1jYXRjaChhKXt2YXIgcj1lLnJldHVybjt0aHJvdyB2b2lkIDAhPT1yJiZEKHIuY2FsbChlKSksYX19LG50PXt9LG90PXFlKFwiaXRlcmF0b3JcIikscnQ9QXJyYXkucHJvdG90eXBlLGF0PWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobnQuQXJyYXk9PT1lfHxydFtvdF09PT1lKX0sc3Q9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPW0odCk7byBpbiBlP0MuZihlLG8sYygwLG4pKTplW29dPW59LGl0PXt9O2l0W3FlKFwidG9TdHJpbmdUYWdcIildPVwielwiO3ZhciB1dD1cIltvYmplY3Qgel1cIj09PVN0cmluZyhpdCksY3Q9cWUoXCJ0b1N0cmluZ1RhZ1wiKSxsdD1cIkFyZ3VtZW50c1wiPT1kKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSksZHQ9dXQ/ZDpmdW5jdGlvbihlKXt2YXIgdCxuLG87cmV0dXJuIHZvaWQgMD09PWU/XCJVbmRlZmluZWRcIjpudWxsPT09ZT9cIk51bGxcIjpcInN0cmluZ1wiPT10eXBlb2Yobj1mdW5jdGlvbihlLHQpe3RyeXtyZXR1cm4gZVt0XX1jYXRjaChuKXt9fSh0PU9iamVjdChlKSxjdCkpP246bHQ/ZCh0KTpcIk9iamVjdFwiPT0obz1kKHQpKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5jYWxsZWU/XCJBcmd1bWVudHNcIjpvfSxwdD1xZShcIml0ZXJhdG9yXCIpLGd0PWZ1bmN0aW9uKGUpe2lmKG51bGwhPWUpcmV0dXJuIGVbcHRdfHxlW1wiQEBpdGVyYXRvclwiXXx8bnRbZHQoZSldfSxodD1mdW5jdGlvbihlKXt2YXIgdCxuLG8scixhLHMsaT1PZShlKSx1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSxjPWFyZ3VtZW50cy5sZW5ndGgsbD1jPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxkPXZvaWQgMCE9PWwscD1ndChpKSxnPTA7aWYoZCYmKGw9UmUobCxjPjI/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSksbnVsbD09cHx8dT09QXJyYXkmJmF0KHApKWZvcihuPW5ldyB1KHQ9aWUoaS5sZW5ndGgpKTt0Pmc7ZysrKXM9ZD9sKGlbZ10sZyk6aVtnXSxzdChuLGcscyk7ZWxzZSBmb3IoYT0ocj1wLmNhbGwoaSkpLm5leHQsbj1uZXcgdTshKG89YS5jYWxsKHIpKS5kb25lO2crKylzPWQ/ZXQocixsLFtvLnZhbHVlLGddLCEwKTpvLnZhbHVlLHN0KG4sZyxzKTtyZXR1cm4gbi5sZW5ndGg9ZyxufSxmdD1xZShcIml0ZXJhdG9yXCIpLF90PSExO3RyeXt2YXIgbXQ9MCx2dD17bmV4dDpmdW5jdGlvbigpe3JldHVybntkb25lOiEhbXQrK319LHJldHVybjpmdW5jdGlvbigpe190PSEwfX07dnRbZnRdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LEFycmF5LmZyb20odnQsKGZ1bmN0aW9uKCl7dGhyb3cgMn0pKX1jYXRjaCh6SSl7fXZhciBNdD1mdW5jdGlvbihlLHQpe2lmKCF0JiYhX3QpcmV0dXJuITE7dmFyIG49ITE7dHJ5e3ZhciBvPXt9O29bZnRdPWZ1bmN0aW9uKCl7cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpuPSEwfX19fSxlKG8pfWNhdGNoKHpJKXt9cmV0dXJuIG59LHl0PSFNdCgoZnVuY3Rpb24oZSl7QXJyYXkuZnJvbShlKX0pKTtrZSh7dGFyZ2V0OlwiQXJyYXlcIixzdGF0OiEwLGZvcmNlZDp5dH0se2Zyb206aHR9KTt2YXIgSXQsRXQ9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGUpe3JldHVybiBoZShlLGZlKX0sVHQ9YT9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbihlLHQpe0QoZSk7Zm9yKHZhciBuLG89RXQodCkscj1vLmxlbmd0aCxhPTA7cj5hOylDLmYoZSxuPW9bYSsrXSx0W25dKTtyZXR1cm4gZX0sQXQ9bmUoXCJkb2N1bWVudFwiLFwiZG9jdW1lbnRFbGVtZW50XCIpLFN0PUgoXCJJRV9QUk9UT1wiKSxEdD1mdW5jdGlvbigpe30sTnQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCI8c2NyaXB0PlwiK2UrXCI8XFwvc2NyaXB0PlwifSxDdD1mdW5jdGlvbigpe3RyeXtJdD1kb2N1bWVudC5kb21haW4mJm5ldyBBY3RpdmVYT2JqZWN0KFwiaHRtbGZpbGVcIil9Y2F0Y2goekkpe312YXIgZSx0O0N0PUl0P2Z1bmN0aW9uKGUpe2Uud3JpdGUoTnQoXCJcIikpLGUuY2xvc2UoKTt2YXIgdD1lLnBhcmVudFdpbmRvdy5PYmplY3Q7cmV0dXJuIGU9bnVsbCx0fShJdCk6KCh0PUUoXCJpZnJhbWVcIikpLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsQXQuYXBwZW5kQ2hpbGQodCksdC5zcmM9U3RyaW5nKFwiamF2YXNjcmlwdDpcIiksKGU9dC5jb250ZW50V2luZG93LmRvY3VtZW50KS5vcGVuKCksZS53cml0ZShOdChcImRvY3VtZW50LkY9T2JqZWN0XCIpKSxlLmNsb3NlKCksZS5GKTtmb3IodmFyIG49ZmUubGVuZ3RoO24tLTspZGVsZXRlIEN0LnByb3RvdHlwZVtmZVtuXV07cmV0dXJuIEN0KCl9O2pbU3RdPSEwO3ZhciBrdD1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiBudWxsIT09ZT8oRHQucHJvdG90eXBlPUQoZSksbj1uZXcgRHQsRHQucHJvdG90eXBlPW51bGwsbltTdF09ZSk6bj1DdCgpLHZvaWQgMD09PXQ/bjpUdChuLHQpfTtrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxzaGFtOiFhfSx7Y3JlYXRlOmt0fSk7dmFyIEx0PXIoKGZ1bmN0aW9uKCl7RXQoMSl9KSk7a2Uoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOkx0fSx7a2V5czpmdW5jdGlvbihlKXtyZXR1cm4gRXQoT2UoZSkpfX0pO3ZhciBSdD1cIlxcdFxcblxcdlxcZlxcciDCoOGagOKAgOKAgeKAguKAg+KAhOKAheKAhuKAh+KAiOKAieKAiuKAr+KBn+OAgFxcdTIwMjhcXHUyMDI5XFx1ZmVmZlwiLE90PVwiW1wiK1J0K1wiXVwiLEd0PVJlZ0V4cChcIl5cIitPdCtPdCtcIipcIiksYnQ9UmVnRXhwKE90K090K1wiKiRcIiksd3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPVN0cmluZyhoKHQpKTtyZXR1cm4gMSZlJiYobj1uLnJlcGxhY2UoR3QsXCJcIikpLDImZSYmKG49bi5yZXBsYWNlKGJ0LFwiXCIpKSxufX0sUHQ9e3N0YXJ0Ond0KDEpLGVuZDp3dCgyKSx0cmltOnd0KDMpfSxVdD1QdC50cmltLEZ0PW8ucGFyc2VJbnQscXQ9L15bKy1dPzBbWHhdLyx4dD04IT09RnQoUnQrXCIwOFwiKXx8MjIhPT1GdChSdCtcIjB4MTZcIik/ZnVuY3Rpb24oZSx0KXt2YXIgbj1VdChTdHJpbmcoZSkpO3JldHVybiBGdChuLHQ+Pj4wfHwocXQudGVzdChuKT8xNjoxMCkpfTpGdDtrZSh7Z2xvYmFsOiEwLGZvcmNlZDpwYXJzZUludCE9eHR9LHtwYXJzZUludDp4dH0pO3ZhciBWdCxLdCxCdCxIdD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXt2YXIgbyxyLGE9U3RyaW5nKGgodCkpLHM9YWUobiksaT1hLmxlbmd0aDtyZXR1cm4gczwwfHxzPj1pP2U/XCJcIjp2b2lkIDA6KG89YS5jaGFyQ29kZUF0KHMpKTw1NTI5Nnx8bz41NjMxOXx8cysxPT09aXx8KHI9YS5jaGFyQ29kZUF0KHMrMSkpPDU2MzIwfHxyPjU3MzQzP2U/YS5jaGFyQXQocyk6bzplP2Euc2xpY2UocyxzKzIpOnItNTYzMjArKG8tNTUyOTY8PDEwKSs2NTUzNn19LGp0PXtjb2RlQXQ6SHQoITEpLGNoYXJBdDpIdCghMCl9LFd0PSFyKChmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPW51bGwsT2JqZWN0LmdldFByb3RvdHlwZU9mKG5ldyBlKSE9PWUucHJvdG90eXBlfSkpLFl0PUgoXCJJRV9QUk9UT1wiKSwkdD1PYmplY3QucHJvdG90eXBlLHp0PVd0P09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZT1PZShlKSxNKGUsWXQpP2VbWXRdOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY29uc3RydWN0b3ImJmUgaW5zdGFuY2VvZiBlLmNvbnN0cnVjdG9yP2UuY29uc3RydWN0b3IucHJvdG90eXBlOmUgaW5zdGFuY2VvZiBPYmplY3Q/JHQ6bnVsbH0sSnQ9cWUoXCJpdGVyYXRvclwiKSxYdD0hMTtbXS5rZXlzJiYoXCJuZXh0XCJpbihCdD1bXS5rZXlzKCkpPyhLdD16dCh6dChCdCkpKSE9PU9iamVjdC5wcm90b3R5cGUmJihWdD1LdCk6WHQ9ITApLG51bGw9PVZ0JiYoVnQ9e30pLE0oVnQsSnQpfHxrKFZ0LEp0LChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpO3ZhciBRdD17SXRlcmF0b3JQcm90b3R5cGU6VnQsQlVHR1lfU0FGQVJJX0lURVJBVE9SUzpYdH0sWnQ9Qy5mLGVuPXFlKFwidG9TdHJpbmdUYWdcIiksdG49ZnVuY3Rpb24oZSx0LG4pe2UmJiFNKGU9bj9lOmUucHJvdG90eXBlLGVuKSYmWnQoZSxlbix7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX0sbm49UXQuSXRlcmF0b3JQcm90b3R5cGUsb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30scm49ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPXQrXCIgSXRlcmF0b3JcIjtyZXR1cm4gZS5wcm90b3R5cGU9a3Qobm4se25leHQ6YygxLG4pfSksdG4oZSxvLCExKSxudFtvXT1vbixlfSxhbj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT9mdW5jdGlvbigpe3ZhciBlLHQ9ITEsbj17fTt0cnl7KGU9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPYmplY3QucHJvdG90eXBlLFwiX19wcm90b19fXCIpLnNldCkuY2FsbChuLFtdKSx0PW4gaW5zdGFuY2VvZiBBcnJheX1jYXRjaCh6SSl7fXJldHVybiBmdW5jdGlvbihuLG8pe3JldHVybiBEKG4pLGZ1bmN0aW9uKGUpe2lmKCFfKGUpJiZudWxsIT09ZSl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBzZXQgXCIrU3RyaW5nKGUpK1wiIGFzIGEgcHJvdG90eXBlXCIpfShvKSx0P2UuY2FsbChuLG8pOm4uX19wcm90b19fPW8sbn19KCk6dm9pZCAwKSxzbj1RdC5JdGVyYXRvclByb3RvdHlwZSx1bj1RdC5CVUdHWV9TQUZBUklfSVRFUkFUT1JTLGNuPXFlKFwiaXRlcmF0b3JcIiksbG49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZG49ZnVuY3Rpb24oZSx0LG4sbyxyLGEscyl7cm4obix0LG8pO3ZhciBpLHUsYyxsPWZ1bmN0aW9uKGUpe2lmKGU9PT1yJiZmKXJldHVybiBmO2lmKCF1biYmZSBpbiBnKXJldHVybiBnW2VdO3N3aXRjaChlKXtjYXNlXCJrZXlzXCI6Y2FzZVwidmFsdWVzXCI6Y2FzZVwiZW50cmllc1wiOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyl9fSxkPXQrXCIgSXRlcmF0b3JcIixwPSExLGc9ZS5wcm90b3R5cGUsaD1nW2NuXXx8Z1tcIkBAaXRlcmF0b3JcIl18fHImJmdbcl0sZj0hdW4mJmh8fGwociksXz1cIkFycmF5XCI9PXQmJmcuZW50cmllc3x8aDtpZihfJiYoaT16dChfLmNhbGwobmV3IGUpKSxzbiE9PU9iamVjdC5wcm90b3R5cGUmJmkubmV4dCYmKHp0KGkpIT09c24mJihhbj9hbihpLHNuKTpcImZ1bmN0aW9uXCIhPXR5cGVvZiBpW2NuXSYmayhpLGNuLGxuKSksdG4oaSxkLCEwKSkpLFwidmFsdWVzXCI9PXImJmgmJlwidmFsdWVzXCIhPT1oLm5hbWUmJihwPSEwLGY9ZnVuY3Rpb24oKXtyZXR1cm4gaC5jYWxsKHRoaXMpfSksZ1tjbl0hPT1mJiZrKGcsY24sZiksbnRbdF09ZixyKWlmKHU9e3ZhbHVlczpsKFwidmFsdWVzXCIpLGtleXM6YT9mOmwoXCJrZXlzXCIpLGVudHJpZXM6bChcImVudHJpZXNcIil9LHMpZm9yKGMgaW4gdSkodW58fHB8fCEoYyBpbiBnKSkmJlooZyxjLHVbY10pO2Vsc2Uga2Uoe3RhcmdldDp0LHByb3RvOiEwLGZvcmNlZDp1bnx8cH0sdSk7cmV0dXJuIHV9LHBuPWp0LmNoYXJBdCxnbj1RLnNldCxobj1RLmdldHRlckZvcihcIlN0cmluZyBJdGVyYXRvclwiKTtkbihTdHJpbmcsXCJTdHJpbmdcIiwoZnVuY3Rpb24oZSl7Z24odGhpcyx7dHlwZTpcIlN0cmluZyBJdGVyYXRvclwiLHN0cmluZzpTdHJpbmcoZSksaW5kZXg6MH0pfSksKGZ1bmN0aW9uKCl7dmFyIGUsdD1obih0aGlzKSxuPXQuc3RyaW5nLG89dC5pbmRleDtyZXR1cm4gbz49bi5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1wbihuLG8pLHQuaW5kZXgrPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pKTt2YXIgZm49e0NTU1J1bGVMaXN0OjAsQ1NTU3R5bGVEZWNsYXJhdGlvbjowLENTU1ZhbHVlTGlzdDowLENsaWVudFJlY3RMaXN0OjAsRE9NUmVjdExpc3Q6MCxET01TdHJpbmdMaXN0OjAsRE9NVG9rZW5MaXN0OjEsRGF0YVRyYW5zZmVySXRlbUxpc3Q6MCxGaWxlTGlzdDowLEhUTUxBbGxDb2xsZWN0aW9uOjAsSFRNTENvbGxlY3Rpb246MCxIVE1MRm9ybUVsZW1lbnQ6MCxIVE1MU2VsZWN0RWxlbWVudDowLE1lZGlhTGlzdDowLE1pbWVUeXBlQXJyYXk6MCxOYW1lZE5vZGVNYXA6MCxOb2RlTGlzdDoxLFBhaW50UmVxdWVzdExpc3Q6MCxQbHVnaW46MCxQbHVnaW5BcnJheTowLFNWR0xlbmd0aExpc3Q6MCxTVkdOdW1iZXJMaXN0OjAsU1ZHUGF0aFNlZ0xpc3Q6MCxTVkdQb2ludExpc3Q6MCxTVkdTdHJpbmdMaXN0OjAsU1ZHVHJhbnNmb3JtTGlzdDowLFNvdXJjZUJ1ZmZlckxpc3Q6MCxTdHlsZVNoZWV0TGlzdDowLFRleHRUcmFja0N1ZUxpc3Q6MCxUZXh0VHJhY2tMaXN0OjAsVG91Y2hMaXN0OjB9O2Zvcih2YXIgX24gaW4gZm4pe3ZhciBtbj1vW19uXSx2bj1tbiYmbW4ucHJvdG90eXBlO2lmKHZuJiZ2bi5mb3JFYWNoIT09WmUpdHJ5e2sodm4sXCJmb3JFYWNoXCIsWmUpfWNhdGNoKHpJKXt2bi5mb3JFYWNoPVplfX1mdW5jdGlvbiBNbihlKXtyZXR1cm4oTW49XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIHluKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBJbihlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgbz10W25dO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19ZnVuY3Rpb24gRW4oZSx0LG4pe3JldHVybiB0JiZJbihlLnByb3RvdHlwZSx0KSxuJiZJbihlLG4pLGV9ZnVuY3Rpb24gVG4oZSx0LG4pe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09bixlfWZ1bmN0aW9uIEFuKGUsdCl7dmFyIG49T2JqZWN0LmtleXMoZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIG89T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTt0JiYobz1vLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KS5lbnVtZXJhYmxlfSkpKSxuLnB1c2guYXBwbHkobixvKX1yZXR1cm4gbn1mdW5jdGlvbiBTbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1udWxsIT1hcmd1bWVudHNbdF0/YXJndW1lbnRzW3RdOnt9O3QlMj9BbihPYmplY3QobiksITApLmZvckVhY2goKGZ1bmN0aW9uKHQpe1RuKGUsdCxuW3RdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTpBbihPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLHQpKX0pKX1yZXR1cm4gZX1mdW5jdGlvbiBEbihlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmQ24oZSx0KX1mdW5jdGlvbiBObihlKXtyZXR1cm4oTm49T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIENuKGUsdCl7cmV0dXJuKENuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX1mdW5jdGlvbiBrbigpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm94eSlyZXR1cm4hMDt0cnl7cmV0dXJuIERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSxbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiExfX1mdW5jdGlvbiBMbihlLHQsbil7cmV0dXJuKExuPWtuKCk/UmVmbGVjdC5jb25zdHJ1Y3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPVtudWxsXTtvLnB1c2guYXBwbHkobyx0KTt2YXIgcj1uZXcoRnVuY3Rpb24uYmluZC5hcHBseShlLG8pKTtyZXR1cm4gbiYmQ24ocixuLnByb3RvdHlwZSkscn0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiBSbihlKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBNYXA/bmV3IE1hcDp2b2lkIDA7cmV0dXJuKFJuPWZ1bmN0aW9uKGUpe2lmKG51bGw9PT1lfHwobj1lLC0xPT09RnVuY3Rpb24udG9TdHJpbmcuY2FsbChuKS5pbmRleE9mKFwiW25hdGl2ZSBjb2RlXVwiKSkpcmV0dXJuIGU7dmFyIG47aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7aWYodm9pZCAwIT09dCl7aWYodC5oYXMoZSkpcmV0dXJuIHQuZ2V0KGUpO3Quc2V0KGUsbyl9ZnVuY3Rpb24gbygpe3JldHVybiBMbihlLGFyZ3VtZW50cyxObih0aGlzKS5jb25zdHJ1Y3Rvcil9cmV0dXJuIG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpvLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLENuKG8sZSl9KShlKX1mdW5jdGlvbiBPbihlLHQpe2lmKG51bGw9PWUpcmV0dXJue307dmFyIG4sbyxyPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09ZSlyZXR1cm57fTt2YXIgbixvLHI9e30sYT1PYmplY3Qua2V5cyhlKTtmb3Iobz0wO288YS5sZW5ndGg7bysrKW49YVtvXSx0LmluZGV4T2Yobik+PTB8fChyW25dPWVbbl0pO3JldHVybiByfShlLHQpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7Zm9yKG89MDtvPGEubGVuZ3RoO28rKyluPWFbb10sdC5pbmRleE9mKG4pPj0wfHxPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxuKSYmKHJbbl09ZVtuXSl9cmV0dXJuIHJ9ZnVuY3Rpb24gR24oZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gYm4oZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9dHlwZW9mIHQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/R24oZSk6dH1mdW5jdGlvbiB3bihlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdCxuPU5uKGUpO2lmKGtuKCkpe3ZhciBvPU5uKHRoaXMpLmNvbnN0cnVjdG9yO3Q9UmVmbGVjdC5jb25zdHJ1Y3Qobixhcmd1bWVudHMsbyl9ZWxzZSB0PW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBibih0aGlzLHQpfX1mdW5jdGlvbiBQbihlLHQpe3JldHVybiBGbihlKXx8ZnVuY3Rpb24oZSx0KXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHwhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpKXJldHVybjt2YXIgbj1bXSxvPSEwLHI9ITEsYT12b2lkIDA7dHJ5e2Zvcih2YXIgcyxpPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEobz0ocz1pLm5leHQoKSkuZG9uZSkmJihuLnB1c2gocy52YWx1ZSksIXR8fG4ubGVuZ3RoIT09dCk7bz0hMCk7fWNhdGNoKHUpe3I9ITAsYT11fWZpbmFsbHl7dHJ5e298fG51bGw9PWkucmV0dXJufHxpLnJldHVybigpfWZpbmFsbHl7aWYocil0aHJvdyBhfX1yZXR1cm4gbn0oZSx0KXx8eG4oZSx0KXx8S24oKX1mdW5jdGlvbiBVbihlKXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gVm4oZSl9KGUpfHxxbihlKXx8eG4oZSl8fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9KCl9ZnVuY3Rpb24gRm4oZSl7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZX1mdW5jdGlvbiBxbihlKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGUpKXJldHVybiBBcnJheS5mcm9tKGUpfWZ1bmN0aW9uIHhuKGUsdCl7aWYoZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIFZuKGUsdCk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO3JldHVyblwiT2JqZWN0XCI9PT1uJiZlLmNvbnN0cnVjdG9yJiYobj1lLmNvbnN0cnVjdG9yLm5hbWUpLFwiTWFwXCI9PT1ufHxcIlNldFwiPT09bj9BcnJheS5mcm9tKG4pOlwiQXJndW1lbnRzXCI9PT1ufHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKT9WbihlLHQpOnZvaWQgMH19ZnVuY3Rpb24gVm4oZSx0KXsobnVsbD09dHx8dD5lLmxlbmd0aCkmJih0PWUubGVuZ3RoKTtmb3IodmFyIG49MCxvPW5ldyBBcnJheSh0KTtuPHQ7bisrKW9bbl09ZVtuXTtyZXR1cm4gb31mdW5jdGlvbiBLbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9ZnVuY3Rpb24gQm4oZSl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFN5bWJvbHx8bnVsbD09ZVtTeW1ib2wuaXRlcmF0b3JdKXtpZihBcnJheS5pc0FycmF5KGUpfHwoZT14bihlKSkpe3ZhciB0PTAsbj1mdW5jdGlvbigpe307cmV0dXJue3M6bixuOmZ1bmN0aW9uKCl7cmV0dXJuIHQ+PWUubGVuZ3RoP3tkb25lOiEwfTp7ZG9uZTohMSx2YWx1ZTplW3QrK119fSxlOmZ1bmN0aW9uKGUpe3Rocm93IGV9LGY6bn19dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfXZhciBvLHIsYT0hMCxzPSExO3JldHVybntzOmZ1bmN0aW9uKCl7bz1lW1N5bWJvbC5pdGVyYXRvcl0oKX0sbjpmdW5jdGlvbigpe3ZhciBlPW8ubmV4dCgpO3JldHVybiBhPWUuZG9uZSxlfSxlOmZ1bmN0aW9uKGUpe3M9ITAscj1lfSxmOmZ1bmN0aW9uKCl7dHJ5e2F8fG51bGw9PW8ucmV0dXJufHxvLnJldHVybigpfWZpbmFsbHl7aWYocyl0aHJvdyByfX19fXZhciBIbixqbixXbj17U0RLX1JFQURZOlwic2RrU3RhdGVSZWFkeVwiLFNES19OT1RfUkVBRFk6XCJzZGtTdGF0ZU5vdFJlYWR5XCIsU0RLX0RFU1RST1k6XCJzZGtEZXN0cm95XCIsTUVTU0FHRV9SRUNFSVZFRDpcIm9uTWVzc2FnZVJlY2VpdmVkXCIsTUVTU0FHRV9NT0RJRklFRDpcIm9uTWVzc2FnZU1vZGlmaWVkXCIsTUVTU0FHRV9SRVZPS0VEOlwib25NZXNzYWdlUmV2b2tlZFwiLE1FU1NBR0VfUkVBRF9CWV9QRUVSOlwib25NZXNzYWdlUmVhZEJ5UGVlclwiLE1FU1NBR0VfUkVBRF9SRUNFSVBUX1JFQ0VJVkVEOlwib25NZXNzYWdlUmVhZFJlY2VpcHRSZWNlaXZlZFwiLENPTlZFUlNBVElPTl9MSVNUX1VQREFURUQ6XCJvbkNvbnZlcnNhdGlvbkxpc3RVcGRhdGVkXCIsR1JPVVBfTElTVF9VUERBVEVEOlwib25Hcm91cExpc3RVcGRhdGVkXCIsR1JPVVBfU1lTVEVNX05PVElDRV9SRUNFSVZFRDpcInJlY2VpdmVHcm91cFN5c3RlbU5vdGljZVwiLEdST1VQX0FUVFJJQlVURVNfVVBEQVRFRDpcImdyb3VwQXR0cmlidXRlc1VwZGF0ZWRcIixQUk9GSUxFX1VQREFURUQ6XCJvblByb2ZpbGVVcGRhdGVkXCIsQkxBQ0tMSVNUX1VQREFURUQ6XCJibGFja2xpc3RVcGRhdGVkXCIsRlJJRU5EX0xJU1RfVVBEQVRFRDpcIm9uRnJpZW5kTGlzdFVwZGF0ZWRcIixGUklFTkRfR1JPVVBfTElTVF9VUERBVEVEOlwib25GcmllbmRHcm91cExpc3RVcGRhdGVkXCIsRlJJRU5EX0FQUExJQ0FUSU9OX0xJU1RfVVBEQVRFRDpcIm9uRnJpZW5kQXBwbGljYXRpb25MaXN0VXBkYXRlZFwiLEtJQ0tFRF9PVVQ6XCJraWNrZWRPdXRcIixFUlJPUjpcImVycm9yXCIsTkVUX1NUQVRFX0NIQU5HRTpcIm5ldFN0YXRlQ2hhbmdlXCIsU0RLX1JFTE9BRDpcInNka1JlbG9hZFwifSxZbj17TVNHX1RFWFQ6XCJUSU1UZXh0RWxlbVwiLE1TR19JTUFHRTpcIlRJTUltYWdlRWxlbVwiLE1TR19TT1VORDpcIlRJTVNvdW5kRWxlbVwiLE1TR19BVURJTzpcIlRJTVNvdW5kRWxlbVwiLE1TR19GSUxFOlwiVElNRmlsZUVsZW1cIixNU0dfRkFDRTpcIlRJTUZhY2VFbGVtXCIsTVNHX1ZJREVPOlwiVElNVmlkZW9GaWxlRWxlbVwiLE1TR19HRU86XCJUSU1Mb2NhdGlvbkVsZW1cIixNU0dfTE9DQVRJT046XCJUSU1Mb2NhdGlvbkVsZW1cIixNU0dfR1JQX1RJUDpcIlRJTUdyb3VwVGlwRWxlbVwiLE1TR19HUlBfU1lTX05PVElDRTpcIlRJTUdyb3VwU3lzdGVtTm90aWNlRWxlbVwiLE1TR19DVVNUT006XCJUSU1DdXN0b21FbGVtXCIsTVNHX01FUkdFUjpcIlRJTVJlbGF5RWxlbVwiLE1TR19QUklPUklUWV9ISUdIOlwiSGlnaFwiLE1TR19QUklPUklUWV9OT1JNQUw6XCJOb3JtYWxcIixNU0dfUFJJT1JJVFlfTE9XOlwiTG93XCIsTVNHX1BSSU9SSVRZX0xPV0VTVDpcIkxvd2VzdFwiLENPTlZfQzJDOlwiQzJDXCIsQ09OVl9HUk9VUDpcIkdST1VQXCIsQ09OVl9TWVNURU06XCJAVElNI1NZU1RFTVwiLENPTlZfQVRfTUU6MSxDT05WX0FUX0FMTDoyLENPTlZfQVRfQUxMX0FUX01FOjMsR1JQX1BSSVZBVEU6XCJQcml2YXRlXCIsR1JQX1dPUks6XCJQcml2YXRlXCIsR1JQX1BVQkxJQzpcIlB1YmxpY1wiLEdSUF9DSEFUUk9PTTpcIkNoYXRSb29tXCIsR1JQX01FRVRJTkc6XCJDaGF0Um9vbVwiLEdSUF9BVkNIQVRST09NOlwiQVZDaGF0Um9vbVwiLEdSUF9DT01NVU5JVFk6XCJDb21tdW5pdHlcIixHUlBfTUJSX1JPTEVfT1dORVI6XCJPd25lclwiLEdSUF9NQlJfUk9MRV9BRE1JTjpcIkFkbWluXCIsR1JQX01CUl9ST0xFX01FTUJFUjpcIk1lbWJlclwiLEdSUF9NQlJfUk9MRV9DVVNUT006XCJDdXN0b21cIixHUlBfVElQX01CUl9KT0lOOjEsR1JQX1RJUF9NQlJfUVVJVDoyLEdSUF9USVBfTUJSX0tJQ0tFRF9PVVQ6MyxHUlBfVElQX01CUl9TRVRfQURNSU46NCxHUlBfVElQX01CUl9DQU5DRUxFRF9BRE1JTjo1LEdSUF9USVBfR1JQX1BST0ZJTEVfVVBEQVRFRDo2LEdSUF9USVBfTUJSX1BST0ZJTEVfVVBEQVRFRDo3LE1TR19SRU1JTkRfQUNQVF9BTkRfTk9URTpcIkFjY2VwdEFuZE5vdGlmeVwiLE1TR19SRU1JTkRfQUNQVF9OT1RfTk9URTpcIkFjY2VwdE5vdE5vdGlmeVwiLE1TR19SRU1JTkRfRElTQ0FSRDpcIkRpc2NhcmRcIixHRU5ERVJfVU5LTk9XTjpcIkdlbmRlcl9UeXBlX1Vua25vd25cIixHRU5ERVJfRkVNQUxFOlwiR2VuZGVyX1R5cGVfRmVtYWxlXCIsR0VOREVSX01BTEU6XCJHZW5kZXJfVHlwZV9NYWxlXCIsS0lDS0VEX09VVF9NVUxUX0FDQ09VTlQ6XCJtdWx0aXBsZUFjY291bnRcIixLSUNLRURfT1VUX01VTFRfREVWSUNFOlwibXVsdGlwbGVEZXZpY2VcIixLSUNLRURfT1VUX1VTRVJTSUdfRVhQSVJFRDpcInVzZXJTaWdFeHBpcmVkXCIsQUxMT1dfVFlQRV9BTExPV19BTlk6XCJBbGxvd1R5cGVfVHlwZV9BbGxvd0FueVwiLEFMTE9XX1RZUEVfTkVFRF9DT05GSVJNOlwiQWxsb3dUeXBlX1R5cGVfTmVlZENvbmZpcm1cIixBTExPV19UWVBFX0RFTllfQU5ZOlwiQWxsb3dUeXBlX1R5cGVfRGVueUFueVwiLEZPUkJJRF9UWVBFX05PTkU6XCJBZG1pbkZvcmJpZF9UeXBlX05vbmVcIixGT1JCSURfVFlQRV9TRU5EX09VVDpcIkFkbWluRm9yYmlkX1R5cGVfU2VuZE91dFwiLEpPSU5fT1BUSU9OU19GUkVFX0FDQ0VTUzpcIkZyZWVBY2Nlc3NcIixKT0lOX09QVElPTlNfTkVFRF9QRVJNSVNTSU9OOlwiTmVlZFBlcm1pc3Npb25cIixKT0lOX09QVElPTlNfRElTQUJMRV9BUFBMWTpcIkRpc2FibGVBcHBseVwiLEpPSU5fU1RBVFVTX1NVQ0NFU1M6XCJKb2luZWRTdWNjZXNzXCIsSk9JTl9TVEFUVVNfQUxSRUFEWV9JTl9HUk9VUDpcIkFscmVhZHlJbkdyb3VwXCIsSk9JTl9TVEFUVVNfV0FJVF9BUFBST1ZBTDpcIldhaXRBZG1pbkFwcHJvdmFsXCIsR1JQX1BST0ZJTEVfT1dORVJfSUQ6XCJvd25lcklEXCIsR1JQX1BST0ZJTEVfQ1JFQVRFX1RJTUU6XCJjcmVhdGVUaW1lXCIsR1JQX1BST0ZJTEVfTEFTVF9JTkZPX1RJTUU6XCJsYXN0SW5mb1RpbWVcIixHUlBfUFJPRklMRV9NRU1CRVJfTlVNOlwibWVtYmVyTnVtXCIsR1JQX1BST0ZJTEVfTUFYX01FTUJFUl9OVU06XCJtYXhNZW1iZXJOdW1cIixHUlBfUFJPRklMRV9KT0lOX09QVElPTjpcImpvaW5PcHRpb25cIixHUlBfUFJPRklMRV9JTlRST0RVQ1RJT046XCJpbnRyb2R1Y3Rpb25cIixHUlBfUFJPRklMRV9OT1RJRklDQVRJT046XCJub3RpZmljYXRpb25cIixHUlBfUFJPRklMRV9NVVRFX0FMTF9NQlJTOlwibXV0ZUFsbE1lbWJlcnNcIixTTlNfQUREX1RZUEVfU0lOR0xFOlwiQWRkX1R5cGVfU2luZ2xlXCIsU05TX0FERF9UWVBFX0JPVEg6XCJBZGRfVHlwZV9Cb3RoXCIsU05TX0RFTEVURV9UWVBFX1NJTkdMRTpcIkRlbGV0ZV9UeXBlX1NpbmdsZVwiLFNOU19ERUxFVEVfVFlQRV9CT1RIOlwiRGVsZXRlX1R5cGVfQm90aFwiLFNOU19BUFBMSUNBVElPTl9UWVBFX0JPVEg6XCJQZW5kZW5jeV9UeXBlX0JvdGhcIixTTlNfQVBQTElDQVRJT05fU0VOVF9UT19NRTpcIlBlbmRlbmN5X1R5cGVfQ29tZUluXCIsU05TX0FQUExJQ0FUSU9OX1NFTlRfQllfTUU6XCJQZW5kZW5jeV9UeXBlX1NlbmRPdXRcIixTTlNfQVBQTElDQVRJT05fQUdSRUU6XCJSZXNwb25zZV9BY3Rpb25fQWdyZWVcIixTTlNfQVBQTElDQVRJT05fQUdSRUVfQU5EX0FERDpcIlJlc3BvbnNlX0FjdGlvbl9BZ3JlZUFuZEFkZFwiLFNOU19DSEVDS19UWVBFX0JPVEg6XCJDaGVja1Jlc3VsdF9UeXBlX0JvdGhcIixTTlNfQ0hFQ0tfVFlQRV9TSU5HTEU6XCJDaGVja1Jlc3VsdF9UeXBlX1NpbmdsZVwiLFNOU19UWVBFX05PX1JFTEFUSU9OOlwiQ2hlY2tSZXN1bHRfVHlwZV9Ob1JlbGF0aW9uXCIsU05TX1RZUEVfQV9XSVRIX0I6XCJDaGVja1Jlc3VsdF9UeXBlX0FXaXRoQlwiLFNOU19UWVBFX0JfV0lUSF9BOlwiQ2hlY2tSZXN1bHRfVHlwZV9CV2l0aEFcIixTTlNfVFlQRV9CT1RIX1dBWTpcIkNoZWNrUmVzdWx0X1R5cGVfQm90aFdheVwiLE5FVF9TVEFURV9DT05ORUNURUQ6XCJjb25uZWN0ZWRcIixORVRfU1RBVEVfQ09OTkVDVElORzpcImNvbm5lY3RpbmdcIixORVRfU1RBVEVfRElTQ09OTkVDVEVEOlwiZGlzY29ubmVjdGVkXCIsTVNHX0FUX0FMTDpcIl9fa0ltU0RLX01lc3NzYWdlQXRBTExfX1wiLFJFQURfQUxMX0MyQ19NU0c6XCJyZWFkQWxsQzJDTWVzc2FnZVwiLFJFQURfQUxMX0dST1VQX01TRzpcInJlYWRBbGxHcm91cE1lc3NhZ2VcIixSRUFEX0FMTF9NU0c6XCJyZWFkQWxsTWVzc2FnZVwifSwkbj1uZShcIm5hdmlnYXRvclwiLFwidXNlckFnZW50XCIpfHxcIlwiLHpuPW8ucHJvY2VzcyxKbj16biYmem4udmVyc2lvbnMsWG49Sm4mJkpuLnY4O1huP2puPShIbj1Ybi5zcGxpdChcIi5cIikpWzBdK0huWzFdOiRuJiYoIShIbj0kbi5tYXRjaCgvRWRnZVxcLyhcXGQrKS8pKXx8SG5bMV0+PTc0KSYmKEhuPSRuLm1hdGNoKC9DaHJvbWVcXC8oXFxkKykvKSkmJihqbj1IblsxXSk7dmFyIFFuPWpuJiYram4sWm49cWUoXCJzcGVjaWVzXCIpLGVvPWZ1bmN0aW9uKGUpe3JldHVybiBRbj49NTF8fCFyKChmdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybih0LmNvbnN0cnVjdG9yPXt9KVtabl09ZnVuY3Rpb24oKXtyZXR1cm57Zm9vOjF9fSwxIT09dFtlXShCb29sZWFuKS5mb299KSl9LHRvPUhlLm1hcCxubz1lbyhcIm1hcFwiKSxvbz16ZShcIm1hcFwiKTtrZSh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6IW5vfHwhb299LHttYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRvKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSk7dmFyIHJvPVtdLnNsaWNlLGFvPXt9LHNvPWZ1bmN0aW9uKGUsdCxuKXtpZighKHQgaW4gYW8pKXtmb3IodmFyIG89W10scj0wO3I8dDtyKyspb1tyXT1cImFbXCIrcitcIl1cIjthb1t0XT1GdW5jdGlvbihcIkMsYVwiLFwicmV0dXJuIG5ldyBDKFwiK28uam9pbihcIixcIikrXCIpXCIpfXJldHVybiBhb1t0XShlLG4pfSxpbz1GdW5jdGlvbi5iaW5kfHxmdW5jdGlvbihlKXt2YXIgdD1MZSh0aGlzKSxuPXJvLmNhbGwoYXJndW1lbnRzLDEpLG89ZnVuY3Rpb24oKXt2YXIgcj1uLmNvbmNhdChyby5jYWxsKGFyZ3VtZW50cykpO3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbz9zbyh0LHIubGVuZ3RoLHIpOnQuYXBwbHkoZSxyKX07cmV0dXJuIF8odC5wcm90b3R5cGUpJiYoby5wcm90b3R5cGU9dC5wcm90b3R5cGUpLG99O2tlKHt0YXJnZXQ6XCJGdW5jdGlvblwiLHByb3RvOiEwfSx7YmluZDppb30pO3ZhciB1bz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt5bih0aGlzLGUpLHRoaXMuY2FjaGU9W10sdGhpcy5vcHRpb25zPW51bGx9cmV0dXJuIEVuKGUsW3trZXk6XCJ1c2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93XCJtaWRkbGV3YXJlIG11c3QgYmUgYSBmdW5jdGlvblwiO3JldHVybiB0aGlzLmNhY2hlLnB1c2goZSksdGhpc319LHtrZXk6XCJuZXh0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5taWRkbGV3YXJlcyYmdGhpcy5taWRkbGV3YXJlcy5sZW5ndGg+MClyZXR1cm4gdGhpcy5taWRkbGV3YXJlcy5zaGlmdCgpLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMsdGhpcy5uZXh0LmJpbmQodGhpcykpfX0se2tleTpcInJ1blwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1pZGRsZXdhcmVzPXRoaXMuY2FjaGUubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZX0pKSx0aGlzLm9wdGlvbnM9ZSx0aGlzLm5leHQoKX19XSksZX0oKSxjbz1xZShcImlzQ29uY2F0U3ByZWFkYWJsZVwiKSxsbz1Rbj49NTF8fCFyKChmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBlW2NvXT0hMSxlLmNvbmNhdCgpWzBdIT09ZX0pKSxwbz1lbyhcImNvbmNhdFwiKSxnbz1mdW5jdGlvbihlKXtpZighXyhlKSlyZXR1cm4hMTt2YXIgdD1lW2NvXTtyZXR1cm4gdm9pZCAwIT09dD8hIXQ6R2UoZSl9O2tlKHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDohbG98fCFwb30se2NvbmNhdDpmdW5jdGlvbihlKXt2YXIgdCxuLG8scixhLHM9T2UodGhpcyksaT1WZShzLDApLHU9MDtmb3IodD0tMSxvPWFyZ3VtZW50cy5sZW5ndGg7dDxvO3QrKylpZihhPS0xPT09dD9zOmFyZ3VtZW50c1t0XSxnbyhhKSl7aWYodSsocj1pZShhLmxlbmd0aCkpPjkwMDcxOTkyNTQ3NDA5OTEpdGhyb3cgVHlwZUVycm9yKFwiTWF4aW11bSBhbGxvd2VkIGluZGV4IGV4Y2VlZGVkXCIpO2ZvcihuPTA7bjxyO24rKyx1KyspbiBpbiBhJiZzdChpLHUsYVtuXSl9ZWxzZXtpZih1Pj05MDA3MTk5MjU0NzQwOTkxKXRocm93IFR5cGVFcnJvcihcIk1heGltdW0gYWxsb3dlZCBpbmRleCBleGNlZWRlZFwiKTtzdChpLHUrKyxhKX1yZXR1cm4gaS5sZW5ndGg9dSxpfX0pO3ZhciBobz1DLmYsZm89RnVuY3Rpb24ucHJvdG90eXBlLF9vPWZvLnRvU3RyaW5nLG1vPS9eXFxzKmZ1bmN0aW9uIChbXiAoXSopLzthJiYhKFwibmFtZVwiaW4gZm8pJiZobyhmbyxcIm5hbWVcIix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3RyeXtyZXR1cm4gX28uY2FsbCh0aGlzKS5tYXRjaChtbylbMV19Y2F0Y2goekkpe3JldHVyblwiXCJ9fX0pO3ZhciB2bz10KChmdW5jdGlvbih0LG4pe3ZhciBvLHIsYSxzLGksdSxjLGwsZCxwLGcsaCxmLF8sbSx2LE0seTt0LmV4cG9ydHM9KG89XCJmdW5jdGlvblwiPT10eXBlb2YgUHJvbWlzZSxyPVwib2JqZWN0XCI9PXR5cGVvZiBzZWxmP3NlbGY6ZSxhPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wscz1cInVuZGVmaW5lZFwiIT10eXBlb2YgTWFwLGk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFNldCx1PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBXZWFrTWFwLGM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdlYWtTZXQsbD1cInVuZGVmaW5lZFwiIT10eXBlb2YgRGF0YVZpZXcsZD1hJiZ2b2lkIDAhPT1TeW1ib2wuaXRlcmF0b3IscD1hJiZ2b2lkIDAhPT1TeW1ib2wudG9TdHJpbmdUYWcsZz1pJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTZXQucHJvdG90eXBlLmVudHJpZXMsaD1zJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBNYXAucHJvdG90eXBlLmVudHJpZXMsZj1nJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YoKG5ldyBTZXQpLmVudHJpZXMoKSksXz1oJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YoKG5ldyBNYXApLmVudHJpZXMoKSksbT1kJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBBcnJheS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSx2PW0mJk9iamVjdC5nZXRQcm90b3R5cGVPZihbXVtTeW1ib2wuaXRlcmF0b3JdKCkpLE09ZCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3RyaW5nLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdLHk9TSYmT2JqZWN0LmdldFByb3RvdHlwZU9mKFwiXCJbU3ltYm9sLml0ZXJhdG9yXSgpKSxmdW5jdGlvbihlKXt2YXIgdD10eXBlb2YgZTtpZihcIm9iamVjdFwiIT09dClyZXR1cm4gdDtpZihudWxsPT09ZSlyZXR1cm5cIm51bGxcIjtpZihlPT09cilyZXR1cm5cImdsb2JhbFwiO2lmKEFycmF5LmlzQXJyYXkoZSkmJighMT09PXB8fCEoU3ltYm9sLnRvU3RyaW5nVGFnIGluIGUpKSlyZXR1cm5cIkFycmF5XCI7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmbnVsbCE9PXdpbmRvdyl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5sb2NhdGlvbiYmZT09PXdpbmRvdy5sb2NhdGlvbilyZXR1cm5cIkxvY2F0aW9uXCI7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5kb2N1bWVudCYmZT09PXdpbmRvdy5kb2N1bWVudClyZXR1cm5cIkRvY3VtZW50XCI7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3Ipe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cubmF2aWdhdG9yLm1pbWVUeXBlcyYmZT09PXdpbmRvdy5uYXZpZ2F0b3IubWltZVR5cGVzKXJldHVyblwiTWltZVR5cGVBcnJheVwiO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cubmF2aWdhdG9yLnBsdWdpbnMmJmU9PT13aW5kb3cubmF2aWdhdG9yLnBsdWdpbnMpcmV0dXJuXCJQbHVnaW5BcnJheVwifWlmKChcImZ1bmN0aW9uXCI9PXR5cGVvZiB3aW5kb3cuSFRNTEVsZW1lbnR8fFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cuSFRNTEVsZW1lbnQpJiZlIGluc3RhbmNlb2Ygd2luZG93LkhUTUxFbGVtZW50KXtpZihcIkJMT0NLUVVPVEVcIj09PWUudGFnTmFtZSlyZXR1cm5cIkhUTUxRdW90ZUVsZW1lbnRcIjtpZihcIlREXCI9PT1lLnRhZ05hbWUpcmV0dXJuXCJIVE1MVGFibGVEYXRhQ2VsbEVsZW1lbnRcIjtpZihcIlRIXCI9PT1lLnRhZ05hbWUpcmV0dXJuXCJIVE1MVGFibGVIZWFkZXJDZWxsRWxlbWVudFwifX12YXIgbj1wJiZlW1N5bWJvbC50b1N0cmluZ1RhZ107aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pcmV0dXJuIG47dmFyIGE9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBhPT09UmVnRXhwLnByb3RvdHlwZT9cIlJlZ0V4cFwiOmE9PT1EYXRlLnByb3RvdHlwZT9cIkRhdGVcIjpvJiZhPT09UHJvbWlzZS5wcm90b3R5cGU/XCJQcm9taXNlXCI6aSYmYT09PVNldC5wcm90b3R5cGU/XCJTZXRcIjpzJiZhPT09TWFwLnByb3RvdHlwZT9cIk1hcFwiOmMmJmE9PT1XZWFrU2V0LnByb3RvdHlwZT9cIldlYWtTZXRcIjp1JiZhPT09V2Vha01hcC5wcm90b3R5cGU/XCJXZWFrTWFwXCI6bCYmYT09PURhdGFWaWV3LnByb3RvdHlwZT9cIkRhdGFWaWV3XCI6cyYmYT09PV8/XCJNYXAgSXRlcmF0b3JcIjppJiZhPT09Zj9cIlNldCBJdGVyYXRvclwiOm0mJmE9PT12P1wiQXJyYXkgSXRlcmF0b3JcIjpNJiZhPT09eT9cIlN0cmluZyBJdGVyYXRvclwiOm51bGw9PT1hP1wiT2JqZWN0XCI6T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpfSl9KSk7a2Uoe3RhcmdldDpcIkFycmF5XCIsc3RhdDohMH0se2lzQXJyYXk6R2V9KTt2YXIgTW89cWUoXCJ1bnNjb3BhYmxlc1wiKSx5bz1BcnJheS5wcm90b3R5cGU7bnVsbD09eW9bTW9dJiZDLmYoeW8sTW8se2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTprdChudWxsKX0pO3ZhciBJbz1mdW5jdGlvbihlKXt5b1tNb11bZV09ITB9LEVvPUhlLmZpbmQsVG89ITAsQW89emUoXCJmaW5kXCIpO1wiZmluZFwiaW5bXSYmQXJyYXkoMSkuZmluZCgoZnVuY3Rpb24oKXtUbz0hMX0pKSxrZSh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6VG98fCFBb30se2ZpbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEVvKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSksSW8oXCJmaW5kXCIpO3ZhciBTbz1wZS5pbmNsdWRlcyxEbz16ZShcImluZGV4T2ZcIix7QUNDRVNTT1JTOiEwLDE6MH0pO2tlKHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDohRG99LHtpbmNsdWRlczpmdW5jdGlvbihlKXtyZXR1cm4gU28odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxJbyhcImluY2x1ZGVzXCIpO3ZhciBObz1wZS5pbmRleE9mLENvPVtdLmluZGV4T2Ysa289ISFDbyYmMS9bMV0uaW5kZXhPZigxLC0wKTwwLExvPWplKFwiaW5kZXhPZlwiKSxSbz16ZShcImluZGV4T2ZcIix7QUNDRVNTT1JTOiEwLDE6MH0pO2tlKHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDprb3x8IUxvfHwhUm99LHtpbmRleE9mOmZ1bmN0aW9uKGUpe3JldHVybiBrbz9Dby5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fDA6Tm8odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KTt2YXIgT289US5zZXQsR289US5nZXR0ZXJGb3IoXCJBcnJheSBJdGVyYXRvclwiKSxibz1kbihBcnJheSxcIkFycmF5XCIsKGZ1bmN0aW9uKGUsdCl7T28odGhpcyx7dHlwZTpcIkFycmF5IEl0ZXJhdG9yXCIsdGFyZ2V0OmYoZSksaW5kZXg6MCxraW5kOnR9KX0pLChmdW5jdGlvbigpe3ZhciBlPUdvKHRoaXMpLHQ9ZS50YXJnZXQsbj1lLmtpbmQsbz1lLmluZGV4Kys7cmV0dXJuIXR8fG8+PXQubGVuZ3RoPyhlLnRhcmdldD12b2lkIDAse3ZhbHVlOnZvaWQgMCxkb25lOiEwfSk6XCJrZXlzXCI9PW4/e3ZhbHVlOm8sZG9uZTohMX06XCJ2YWx1ZXNcIj09bj97dmFsdWU6dFtvXSxkb25lOiExfTp7dmFsdWU6W28sdFtvXV0sZG9uZTohMX19KSxcInZhbHVlc1wiKTtudC5Bcmd1bWVudHM9bnQuQXJyYXksSW8oXCJrZXlzXCIpLElvKFwidmFsdWVzXCIpLElvKFwiZW50cmllc1wiKTt2YXIgd289W10uam9pbixQbz1nIT1PYmplY3QsVW89amUoXCJqb2luXCIsXCIsXCIpO2tlKHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDpQb3x8IVVvfSx7am9pbjpmdW5jdGlvbihlKXtyZXR1cm4gd28uY2FsbChmKHRoaXMpLHZvaWQgMD09PWU/XCIsXCI6ZSl9fSk7dmFyIEZvPWVvKFwic2xpY2VcIikscW89emUoXCJzbGljZVwiLHtBQ0NFU1NPUlM6ITAsMDowLDE6Mn0pLHhvPXFlKFwic3BlY2llc1wiKSxWbz1bXS5zbGljZSxLbz1NYXRoLm1heDtrZSh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6IUZvfHwhcW99LHtzbGljZTpmdW5jdGlvbihlLHQpe3ZhciBuLG8scixhPWYodGhpcykscz1pZShhLmxlbmd0aCksaT1sZShlLHMpLHU9bGUodm9pZCAwPT09dD9zOnQscyk7aWYoR2UoYSkmJihcImZ1bmN0aW9uXCIhPXR5cGVvZihuPWEuY29uc3RydWN0b3IpfHxuIT09QXJyYXkmJiFHZShuLnByb3RvdHlwZSk/XyhuKSYmbnVsbD09PShuPW5beG9dKSYmKG49dm9pZCAwKTpuPXZvaWQgMCxuPT09QXJyYXl8fHZvaWQgMD09PW4pKXJldHVybiBWby5jYWxsKGEsaSx1KTtmb3Iobz1uZXcodm9pZCAwPT09bj9BcnJheTpuKShLbyh1LWksMCkpLHI9MDtpPHU7aSsrLHIrKylpIGluIGEmJnN0KG8scixhW2ldKTtyZXR1cm4gby5sZW5ndGg9cixvfX0pLGtlKHt0YXJnZXQ6XCJEYXRlXCIsc3RhdDohMH0se25vdzpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfX0pO3ZhciBCbz1cIlwiLnJlcGVhdHx8ZnVuY3Rpb24oZSl7dmFyIHQ9U3RyaW5nKGgodGhpcykpLG49XCJcIixvPWFlKGUpO2lmKG88MHx8SW5maW5pdHk9PW8pdGhyb3cgUmFuZ2VFcnJvcihcIldyb25nIG51bWJlciBvZiByZXBldGl0aW9uc1wiKTtmb3IoO28+MDsobz4+Pj0xKSYmKHQrPXQpKTEmbyYmKG4rPXQpO3JldHVybiBufSxIbz1NYXRoLmNlaWwsam89ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixvKXt2YXIgcixhLHM9U3RyaW5nKGgodCkpLGk9cy5sZW5ndGgsdT12b2lkIDA9PT1vP1wiIFwiOlN0cmluZyhvKSxjPWllKG4pO3JldHVybiBjPD1pfHxcIlwiPT11P3M6KHI9Yy1pLChhPUJvLmNhbGwodSxIbyhyL3UubGVuZ3RoKSkpLmxlbmd0aD5yJiYoYT1hLnNsaWNlKDAscikpLGU/cythOmErcyl9fSxXbz17c3RhcnQ6am8oITEpLGVuZDpqbyghMCl9LnN0YXJ0LFlvPU1hdGguYWJzLCRvPURhdGUucHJvdG90eXBlLHpvPSRvLmdldFRpbWUsSm89JG8udG9JU09TdHJpbmcsWG89cigoZnVuY3Rpb24oKXtyZXR1cm5cIjAzODUtMDctMjVUMDc6MDY6MzkuOTk5WlwiIT1Kby5jYWxsKG5ldyBEYXRlKC01MDAwMDAwMDAwMDAwMSkpfSkpfHwhcigoZnVuY3Rpb24oKXtKby5jYWxsKG5ldyBEYXRlKE5hTikpfSkpP2Z1bmN0aW9uKCl7aWYoIWlzRmluaXRlKHpvLmNhbGwodGhpcykpKXRocm93IFJhbmdlRXJyb3IoXCJJbnZhbGlkIHRpbWUgdmFsdWVcIik7dmFyIGU9dGhpcy5nZXRVVENGdWxsWWVhcigpLHQ9dGhpcy5nZXRVVENNaWxsaXNlY29uZHMoKSxuPWU8MD9cIi1cIjplPjk5OTk/XCIrXCI6XCJcIjtyZXR1cm4gbitXbyhZbyhlKSxuPzY6NCwwKStcIi1cIitXbyh0aGlzLmdldFVUQ01vbnRoKCkrMSwyLDApK1wiLVwiK1dvKHRoaXMuZ2V0VVRDRGF0ZSgpLDIsMCkrXCJUXCIrV28odGhpcy5nZXRVVENIb3VycygpLDIsMCkrXCI6XCIrV28odGhpcy5nZXRVVENNaW51dGVzKCksMiwwKStcIjpcIitXbyh0aGlzLmdldFVUQ1NlY29uZHMoKSwyLDApK1wiLlwiK1dvKHQsMywwKStcIlpcIn06Sm87a2Uoe3RhcmdldDpcIkRhdGVcIixwcm90bzohMCxmb3JjZWQ6RGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmchPT1Yb30se3RvSVNPU3RyaW5nOlhvfSk7dmFyIFFvPURhdGUucHJvdG90eXBlLFpvPVFvLnRvU3RyaW5nLGVyPVFvLmdldFRpbWU7bmV3IERhdGUoTmFOKStcIlwiIT1cIkludmFsaWQgRGF0ZVwiJiZaKFFvLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXt2YXIgZT1lci5jYWxsKHRoaXMpO3JldHVybiBlPT1lP1pvLmNhbGwodGhpcyk6XCJJbnZhbGlkIERhdGVcIn0pKTt2YXIgdHI9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvLHI7cmV0dXJuIGFuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZihvPXQuY29uc3RydWN0b3IpJiZvIT09biYmXyhyPW8ucHJvdG90eXBlKSYmciE9PW4ucHJvdG90eXBlJiZhbihlLHIpLGV9LG5yPW1lLmYsb3I9Uy5mLHJyPUMuZixhcj1QdC50cmltLHNyPW8uTnVtYmVyLGlyPXNyLnByb3RvdHlwZSx1cj1cIk51bWJlclwiPT1kKGt0KGlyKSksY3I9ZnVuY3Rpb24oZSl7dmFyIHQsbixvLHIsYSxzLGksdSxjPW0oZSwhMSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGMmJmMubGVuZ3RoPjIpaWYoNDM9PT0odD0oYz1hcihjKSkuY2hhckNvZGVBdCgwKSl8fDQ1PT09dCl7aWYoODg9PT0obj1jLmNoYXJDb2RlQXQoMikpfHwxMjA9PT1uKXJldHVybiBOYU59ZWxzZSBpZig0OD09PXQpe3N3aXRjaChjLmNoYXJDb2RlQXQoMSkpe2Nhc2UgNjY6Y2FzZSA5ODpvPTIscj00OTticmVhaztjYXNlIDc5OmNhc2UgMTExOm89OCxyPTU1O2JyZWFrO2RlZmF1bHQ6cmV0dXJuK2N9Zm9yKHM9KGE9Yy5zbGljZSgyKSkubGVuZ3RoLGk9MDtpPHM7aSsrKWlmKCh1PWEuY2hhckNvZGVBdChpKSk8NDh8fHU+cilyZXR1cm4gTmFOO3JldHVybiBwYXJzZUludChhLG8pfXJldHVybitjfTtpZihOZShcIk51bWJlclwiLCFzcihcIiAwbzFcIil8fCFzcihcIjBiMVwiKXx8c3IoXCIrMHgxXCIpKSl7Zm9yKHZhciBscixkcj1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPDE/MDplLG49dGhpcztyZXR1cm4gbiBpbnN0YW5jZW9mIGRyJiYodXI/cigoZnVuY3Rpb24oKXtpci52YWx1ZU9mLmNhbGwobil9KSk6XCJOdW1iZXJcIiE9ZChuKSk/dHIobmV3IHNyKGNyKHQpKSxuLGRyKTpjcih0KX0scHI9YT9ucihzcik6XCJNQVhfVkFMVUUsTUlOX1ZBTFVFLE5hTixORUdBVElWRV9JTkZJTklUWSxQT1NJVElWRV9JTkZJTklUWSxFUFNJTE9OLGlzRmluaXRlLGlzSW50ZWdlcixpc05hTixpc1NhZmVJbnRlZ2VyLE1BWF9TQUZFX0lOVEVHRVIsTUlOX1NBRkVfSU5URUdFUixwYXJzZUZsb2F0LHBhcnNlSW50LGlzSW50ZWdlclwiLnNwbGl0KFwiLFwiKSxncj0wO3ByLmxlbmd0aD5ncjtncisrKU0oc3IsbHI9cHJbZ3JdKSYmIU0oZHIsbHIpJiZycihkcixscixvcihzcixscikpO2RyLnByb3RvdHlwZT1pcixpci5jb25zdHJ1Y3Rvcj1kcixaKG8sXCJOdW1iZXJcIixkcil9dmFyIGhyPW1lLmYsZnI9e30udG9TdHJpbmcsX3I9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLG1yPXtmOmZ1bmN0aW9uKGUpe3JldHVybiBfciYmXCJbb2JqZWN0IFdpbmRvd11cIj09ZnIuY2FsbChlKT9mdW5jdGlvbihlKXt0cnl7cmV0dXJuIGhyKGUpfWNhdGNoKHpJKXtyZXR1cm4gX3Iuc2xpY2UoKX19KGUpOmhyKGYoZSkpfX0sdnI9bXIuZixNcj1yKChmdW5jdGlvbigpe3JldHVybiFPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcygxKX0pKTtrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6TXJ9LHtnZXRPd25Qcm9wZXJ0eU5hbWVzOnZyfSk7dmFyIHlyPXIoKGZ1bmN0aW9uKCl7enQoMSl9KSk7a2Uoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOnlyLHNoYW06IVd0fSx7Z2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIHp0KE9lKGUpKX19KTt2YXIgSXI9dXQ/e30udG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIltvYmplY3QgXCIrZHQodGhpcykrXCJdXCJ9O3V0fHxaKE9iamVjdC5wcm90b3R5cGUsXCJ0b1N0cmluZ1wiLElyLHt1bnNhZmU6ITB9KTt2YXIgRXIsVHIsQXIsU3I9by5Qcm9taXNlLERyPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIG8gaW4gdClaKGUsbyx0W29dLG4pO3JldHVybiBlfSxOcj1xZShcInNwZWNpZXNcIiksQ3I9ZnVuY3Rpb24oZSl7dmFyIHQ9bmUoZSksbj1DLmY7YSYmdCYmIXRbTnJdJiZuKHQsTnIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX0sa3I9ZnVuY3Rpb24oZSx0LG4pe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IFR5cGVFcnJvcihcIkluY29ycmVjdCBcIisobj9uK1wiIFwiOlwiXCIpK1wiaW52b2NhdGlvblwiKTtyZXR1cm4gZX0sTHI9dCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oZSx0KXt0aGlzLnN0b3BwZWQ9ZSx0aGlzLnJlc3VsdD10fTsoZS5leHBvcnRzPWZ1bmN0aW9uKGUsbixvLHIsYSl7dmFyIHMsaSx1LGMsbCxkLHAsZz1SZShuLG8scj8yOjEpO2lmKGEpcz1lO2Vsc2V7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YoaT1ndChlKSkpdGhyb3cgVHlwZUVycm9yKFwiVGFyZ2V0IGlzIG5vdCBpdGVyYWJsZVwiKTtpZihhdChpKSl7Zm9yKHU9MCxjPWllKGUubGVuZ3RoKTtjPnU7dSsrKWlmKChsPXI/ZyhEKHA9ZVt1XSlbMF0scFsxXSk6ZyhlW3VdKSkmJmwgaW5zdGFuY2VvZiB0KXJldHVybiBsO3JldHVybiBuZXcgdCghMSl9cz1pLmNhbGwoZSl9Zm9yKGQ9cy5uZXh0OyEocD1kLmNhbGwocykpLmRvbmU7KWlmKFwib2JqZWN0XCI9PXR5cGVvZihsPWV0KHMsZyxwLnZhbHVlLHIpKSYmbCYmbCBpbnN0YW5jZW9mIHQpcmV0dXJuIGw7cmV0dXJuIG5ldyB0KCExKX0pLnN0b3A9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KCEwLGUpfX0pKSxScj1xZShcInNwZWNpZXNcIiksT3I9ZnVuY3Rpb24oZSx0KXt2YXIgbixvPUQoZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PW98fG51bGw9PShuPUQobylbUnJdKT90OkxlKG4pfSxHcj0vKGlwaG9uZXxpcG9kfGlwYWQpLiphcHBsZXdlYmtpdC9pLnRlc3QoJG4pLGJyPW8ubG9jYXRpb24sd3I9by5zZXRJbW1lZGlhdGUsUHI9by5jbGVhckltbWVkaWF0ZSxVcj1vLnByb2Nlc3MsRnI9by5NZXNzYWdlQ2hhbm5lbCxxcj1vLkRpc3BhdGNoLHhyPTAsVnI9e30sS3I9ZnVuY3Rpb24oZSl7aWYoVnIuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PVZyW2VdO2RlbGV0ZSBWcltlXSx0KCl9fSxCcj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtLcihlKX19LEhyPWZ1bmN0aW9uKGUpe0tyKGUuZGF0YSl9LGpyPWZ1bmN0aW9uKGUpe28ucG9zdE1lc3NhZ2UoZStcIlwiLGJyLnByb3RvY29sK1wiLy9cIitici5ob3N0KX07d3ImJlByfHwod3I9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MTthcmd1bWVudHMubGVuZ3RoPm47KXQucHVzaChhcmd1bWVudHNbbisrXSk7cmV0dXJuIFZyWysreHJdPWZ1bmN0aW9uKCl7KFwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpGdW5jdGlvbihlKSkuYXBwbHkodm9pZCAwLHQpfSxFcih4cikseHJ9LFByPWZ1bmN0aW9uKGUpe2RlbGV0ZSBWcltlXX0sXCJwcm9jZXNzXCI9PWQoVXIpP0VyPWZ1bmN0aW9uKGUpe1VyLm5leHRUaWNrKEJyKGUpKX06cXImJnFyLm5vdz9Fcj1mdW5jdGlvbihlKXtxci5ub3coQnIoZSkpfTpGciYmIUdyPyhBcj0oVHI9bmV3IEZyKS5wb3J0MixUci5wb3J0MS5vbm1lc3NhZ2U9SHIsRXI9UmUoQXIucG9zdE1lc3NhZ2UsQXIsMSkpOiFvLmFkZEV2ZW50TGlzdGVuZXJ8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHBvc3RNZXNzYWdlfHxvLmltcG9ydFNjcmlwdHN8fHIoanIpP0VyPVwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiBFKFwic2NyaXB0XCIpP2Z1bmN0aW9uKGUpe0F0LmFwcGVuZENoaWxkKEUoXCJzY3JpcHRcIikpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe0F0LnJlbW92ZUNoaWxkKHRoaXMpLEtyKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChCcihlKSwwKX06KEVyPWpyLG8uYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixIciwhMSkpKTt2YXIgV3IsWXIsJHIsenIsSnIsWHIsUXIsWnIsZWE9e3NldDp3cixjbGVhcjpQcn0sdGE9Uy5mLG5hPWVhLnNldCxvYT1vLk11dGF0aW9uT2JzZXJ2ZXJ8fG8uV2ViS2l0TXV0YXRpb25PYnNlcnZlcixyYT1vLnByb2Nlc3MsYWE9by5Qcm9taXNlLHNhPVwicHJvY2Vzc1wiPT1kKHJhKSxpYT10YShvLFwicXVldWVNaWNyb3Rhc2tcIiksdWE9aWEmJmlhLnZhbHVlO3VhfHwoV3I9ZnVuY3Rpb24oKXt2YXIgZSx0O2ZvcihzYSYmKGU9cmEuZG9tYWluKSYmZS5leGl0KCk7WXI7KXt0PVlyLmZuLFlyPVlyLm5leHQ7dHJ5e3QoKX1jYXRjaCh6SSl7dGhyb3cgWXI/enIoKTokcj12b2lkIDAsekl9fSRyPXZvaWQgMCxlJiZlLmVudGVyKCl9LHNhP3pyPWZ1bmN0aW9uKCl7cmEubmV4dFRpY2soV3IpfTpvYSYmIUdyPyhKcj0hMCxYcj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKSxuZXcgb2EoV3IpLm9ic2VydmUoWHIse2NoYXJhY3RlckRhdGE6ITB9KSx6cj1mdW5jdGlvbigpe1hyLmRhdGE9SnI9IUpyfSk6YWEmJmFhLnJlc29sdmU/KFFyPWFhLnJlc29sdmUodm9pZCAwKSxacj1Rci50aGVuLHpyPWZ1bmN0aW9uKCl7WnIuY2FsbChRcixXcil9KTp6cj1mdW5jdGlvbigpe25hLmNhbGwobyxXcil9KTt2YXIgY2EsbGEsZGEscGEsZ2E9dWF8fGZ1bmN0aW9uKGUpe3ZhciB0PXtmbjplLG5leHQ6dm9pZCAwfTskciYmKCRyLm5leHQ9dCksWXJ8fChZcj10LHpyKCkpLCRyPXR9LGhhPWZ1bmN0aW9uKGUpe3ZhciB0LG47dGhpcy5wcm9taXNlPW5ldyBlKChmdW5jdGlvbihlLG8pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PW4pdGhyb3cgVHlwZUVycm9yKFwiQmFkIFByb21pc2UgY29uc3RydWN0b3JcIik7dD1lLG49b30pKSx0aGlzLnJlc29sdmU9TGUodCksdGhpcy5yZWplY3Q9TGUobil9LGZhPXtmOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaGEoZSl9fSxfYT1mdW5jdGlvbihlLHQpe2lmKEQoZSksXyh0KSYmdC5jb25zdHJ1Y3Rvcj09PWUpcmV0dXJuIHQ7dmFyIG49ZmEuZihlKTtyZXR1cm4oMCxuLnJlc29sdmUpKHQpLG4ucHJvbWlzZX0sbWE9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybntlcnJvcjohMSx2YWx1ZTplKCl9fWNhdGNoKHpJKXtyZXR1cm57ZXJyb3I6ITAsdmFsdWU6ekl9fX0sdmE9ZWEuc2V0LE1hPXFlKFwic3BlY2llc1wiKSx5YT1cIlByb21pc2VcIixJYT1RLmdldCxFYT1RLnNldCxUYT1RLmdldHRlckZvcih5YSksQWE9U3IsU2E9by5UeXBlRXJyb3IsRGE9by5kb2N1bWVudCxOYT1vLnByb2Nlc3MsQ2E9bmUoXCJmZXRjaFwiKSxrYT1mYS5mLExhPWthLFJhPVwicHJvY2Vzc1wiPT1kKE5hKSxPYT0hIShEYSYmRGEuY3JlYXRlRXZlbnQmJm8uZGlzcGF0Y2hFdmVudCksR2E9TmUoeWEsKGZ1bmN0aW9uKCl7aWYoIShQKEFhKSE9PVN0cmluZyhBYSkpKXtpZig2Nj09PVFuKXJldHVybiEwO2lmKCFSYSYmXCJmdW5jdGlvblwiIT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50KXJldHVybiEwfWlmKFFuPj01MSYmL25hdGl2ZSBjb2RlLy50ZXN0KEFhKSlyZXR1cm4hMTt2YXIgZT1BYS5yZXNvbHZlKDEpLHQ9ZnVuY3Rpb24oZSl7ZSgoZnVuY3Rpb24oKXt9KSwoZnVuY3Rpb24oKXt9KSl9O3JldHVybihlLmNvbnN0cnVjdG9yPXt9KVtNYV09dCwhKGUudGhlbigoZnVuY3Rpb24oKXt9KSlpbnN0YW5jZW9mIHQpfSkpLGJhPUdhfHwhTXQoKGZ1bmN0aW9uKGUpe0FhLmFsbChlKS5jYXRjaCgoZnVuY3Rpb24oKXt9KSl9KSksd2E9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuISghXyhlKXx8XCJmdW5jdGlvblwiIT10eXBlb2YodD1lLnRoZW4pKSYmdH0sUGE9ZnVuY3Rpb24oZSx0LG4pe2lmKCF0Lm5vdGlmaWVkKXt0Lm5vdGlmaWVkPSEwO3ZhciBvPXQucmVhY3Rpb25zO2dhKChmdW5jdGlvbigpe2Zvcih2YXIgcj10LnZhbHVlLGE9MT09dC5zdGF0ZSxzPTA7by5sZW5ndGg+czspe3ZhciBpLHUsYyxsPW9bcysrXSxkPWE/bC5vazpsLmZhaWwscD1sLnJlc29sdmUsZz1sLnJlamVjdCxoPWwuZG9tYWluO3RyeXtkPyhhfHwoMj09PXQucmVqZWN0aW9uJiZ4YShlLHQpLHQucmVqZWN0aW9uPTEpLCEwPT09ZD9pPXI6KGgmJmguZW50ZXIoKSxpPWQociksaCYmKGguZXhpdCgpLGM9ITApKSxpPT09bC5wcm9taXNlP2coU2EoXCJQcm9taXNlLWNoYWluIGN5Y2xlXCIpKToodT13YShpKSk/dS5jYWxsKGkscCxnKTpwKGkpKTpnKHIpfWNhdGNoKHpJKXtoJiYhYyYmaC5leGl0KCksZyh6SSl9fXQucmVhY3Rpb25zPVtdLHQubm90aWZpZWQ9ITEsbiYmIXQucmVqZWN0aW9uJiZGYShlLHQpfSkpfX0sVWE9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGE7T2E/KChyPURhLmNyZWF0ZUV2ZW50KFwiRXZlbnRcIikpLnByb21pc2U9dCxyLnJlYXNvbj1uLHIuaW5pdEV2ZW50KGUsITEsITApLG8uZGlzcGF0Y2hFdmVudChyKSk6cj17cHJvbWlzZTp0LHJlYXNvbjpufSwoYT1vW1wib25cIitlXSk/YShyKTpcInVuaGFuZGxlZHJlamVjdGlvblwiPT09ZSYmZnVuY3Rpb24oZSx0KXt2YXIgbj1vLmNvbnNvbGU7biYmbi5lcnJvciYmKDE9PT1hcmd1bWVudHMubGVuZ3RoP24uZXJyb3IoZSk6bi5lcnJvcihlLHQpKX0oXCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25cIixuKX0sRmE9ZnVuY3Rpb24oZSx0KXt2YS5jYWxsKG8sKGZ1bmN0aW9uKCl7dmFyIG4sbz10LnZhbHVlO2lmKHFhKHQpJiYobj1tYSgoZnVuY3Rpb24oKXtSYT9OYS5lbWl0KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsbyxlKTpVYShcInVuaGFuZGxlZHJlamVjdGlvblwiLGUsbyl9KSksdC5yZWplY3Rpb249UmF8fHFhKHQpPzI6MSxuLmVycm9yKSl0aHJvdyBuLnZhbHVlfSkpfSxxYT1mdW5jdGlvbihlKXtyZXR1cm4gMSE9PWUucmVqZWN0aW9uJiYhZS5wYXJlbnR9LHhhPWZ1bmN0aW9uKGUsdCl7dmEuY2FsbChvLChmdW5jdGlvbigpe1JhP05hLmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsZSk6VWEoXCJyZWplY3Rpb25oYW5kbGVkXCIsZSx0LnZhbHVlKX0pKX0sVmE9ZnVuY3Rpb24oZSx0LG4sbyl7cmV0dXJuIGZ1bmN0aW9uKHIpe2UodCxuLHIsbyl9fSxLYT1mdW5jdGlvbihlLHQsbixvKXt0LmRvbmV8fCh0LmRvbmU9ITAsbyYmKHQ9byksdC52YWx1ZT1uLHQuc3RhdGU9MixQYShlLHQsITApKX0sQmE9ZnVuY3Rpb24oZSx0LG4sbyl7aWYoIXQuZG9uZSl7dC5kb25lPSEwLG8mJih0PW8pO3RyeXtpZihlPT09bil0aHJvdyBTYShcIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmXCIpO3ZhciByPXdhKG4pO3I/Z2EoKGZ1bmN0aW9uKCl7dmFyIG89e2RvbmU6ITF9O3RyeXtyLmNhbGwobixWYShCYSxlLG8sdCksVmEoS2EsZSxvLHQpKX1jYXRjaCh6SSl7S2EoZSxvLHpJLHQpfX0pKToodC52YWx1ZT1uLHQuc3RhdGU9MSxQYShlLHQsITEpKX1jYXRjaCh6SSl7S2EoZSx7ZG9uZTohMX0sekksdCl9fX07R2EmJihBYT1mdW5jdGlvbihlKXtrcih0aGlzLEFhLHlhKSxMZShlKSxjYS5jYWxsKHRoaXMpO3ZhciB0PUlhKHRoaXMpO3RyeXtlKFZhKEJhLHRoaXMsdCksVmEoS2EsdGhpcyx0KSl9Y2F0Y2goekkpe0thKHRoaXMsdCx6SSl9fSwoY2E9ZnVuY3Rpb24oZSl7RWEodGhpcyx7dHlwZTp5YSxkb25lOiExLG5vdGlmaWVkOiExLHBhcmVudDohMSxyZWFjdGlvbnM6W10scmVqZWN0aW9uOiExLHN0YXRlOjAsdmFsdWU6dm9pZCAwfSl9KS5wcm90b3R5cGU9RHIoQWEucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIG49VGEodGhpcyksbz1rYShPcih0aGlzLEFhKSk7cmV0dXJuIG8ub2s9XCJmdW5jdGlvblwiIT10eXBlb2YgZXx8ZSxvLmZhaWw9XCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdCxvLmRvbWFpbj1SYT9OYS5kb21haW46dm9pZCAwLG4ucGFyZW50PSEwLG4ucmVhY3Rpb25zLnB1c2gobyksMCE9bi5zdGF0ZSYmUGEodGhpcyxuLCExKSxvLnByb21pc2V9LGNhdGNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pLGxhPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IGNhLHQ9SWEoZSk7dGhpcy5wcm9taXNlPWUsdGhpcy5yZXNvbHZlPVZhKEJhLGUsdCksdGhpcy5yZWplY3Q9VmEoS2EsZSx0KX0sZmEuZj1rYT1mdW5jdGlvbihlKXtyZXR1cm4gZT09PUFhfHxlPT09ZGE/bmV3IGxhKGUpOkxhKGUpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTciYmKHBhPVNyLnByb3RvdHlwZS50aGVuLFooU3IucHJvdG90eXBlLFwidGhlblwiLChmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBBYSgoZnVuY3Rpb24oZSx0KXtwYS5jYWxsKG4sZSx0KX0pKS50aGVuKGUsdCl9KSx7dW5zYWZlOiEwfSksXCJmdW5jdGlvblwiPT10eXBlb2YgQ2EmJmtlKHtnbG9iYWw6ITAsZW51bWVyYWJsZTohMCxmb3JjZWQ6ITB9LHtmZXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gX2EoQWEsQ2EuYXBwbHkobyxhcmd1bWVudHMpKX19KSkpLGtlKHtnbG9iYWw6ITAsd3JhcDohMCxmb3JjZWQ6R2F9LHtQcm9taXNlOkFhfSksdG4oQWEseWEsITEpLENyKHlhKSxkYT1uZSh5YSksa2Uoe3RhcmdldDp5YSxzdGF0OiEwLGZvcmNlZDpHYX0se3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1rYSh0aGlzKTtyZXR1cm4gdC5yZWplY3QuY2FsbCh2b2lkIDAsZSksdC5wcm9taXNlfX0pLGtlKHt0YXJnZXQ6eWEsc3RhdDohMCxmb3JjZWQ6R2F9LHtyZXNvbHZlOmZ1bmN0aW9uKGUpe3JldHVybiBfYSh0aGlzLGUpfX0pLGtlKHt0YXJnZXQ6eWEsc3RhdDohMCxmb3JjZWQ6YmF9LHthbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWthKHQpLG89bi5yZXNvbHZlLHI9bi5yZWplY3QsYT1tYSgoZnVuY3Rpb24oKXt2YXIgbj1MZSh0LnJlc29sdmUpLGE9W10scz0wLGk9MTtMcihlLChmdW5jdGlvbihlKXt2YXIgdT1zKyssYz0hMTthLnB1c2godm9pZCAwKSxpKyssbi5jYWxsKHQsZSkudGhlbigoZnVuY3Rpb24oZSl7Y3x8KGM9ITAsYVt1XT1lLC0taXx8byhhKSl9KSxyKX0pKSwtLWl8fG8oYSl9KSk7cmV0dXJuIGEuZXJyb3ImJnIoYS52YWx1ZSksbi5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1rYSh0KSxvPW4ucmVqZWN0LHI9bWEoKGZ1bmN0aW9uKCl7dmFyIHI9TGUodC5yZXNvbHZlKTtMcihlLChmdW5jdGlvbihlKXtyLmNhbGwodCxlKS50aGVuKG4ucmVzb2x2ZSxvKX0pKX0pKTtyZXR1cm4gci5lcnJvciYmbyhyLnZhbHVlKSxuLnByb21pc2V9fSk7dmFyIEhhPWZ1bmN0aW9uKCl7dmFyIGU9RCh0aGlzKSx0PVwiXCI7cmV0dXJuIGUuZ2xvYmFsJiYodCs9XCJnXCIpLGUuaWdub3JlQ2FzZSYmKHQrPVwiaVwiKSxlLm11bHRpbGluZSYmKHQrPVwibVwiKSxlLmRvdEFsbCYmKHQrPVwic1wiKSxlLnVuaWNvZGUmJih0Kz1cInVcIiksZS5zdGlja3kmJih0Kz1cInlcIiksdH07ZnVuY3Rpb24gamEoZSx0KXtyZXR1cm4gUmVnRXhwKGUsdCl9dmFyIFdhLFlhLCRhPXtVTlNVUFBPUlRFRF9ZOnIoKGZ1bmN0aW9uKCl7dmFyIGU9amEoXCJhXCIsXCJ5XCIpO3JldHVybiBlLmxhc3RJbmRleD0yLG51bGwhPWUuZXhlYyhcImFiY2RcIil9KSksQlJPS0VOX0NBUkVUOnIoKGZ1bmN0aW9uKCl7dmFyIGU9amEoXCJeclwiLFwiZ3lcIik7cmV0dXJuIGUubGFzdEluZGV4PTIsbnVsbCE9ZS5leGVjKFwic3RyXCIpfSkpfSx6YT1SZWdFeHAucHJvdG90eXBlLmV4ZWMsSmE9U3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLFhhPXphLFFhPShXYT0vYS8sWWE9L2IqL2csemEuY2FsbChXYSxcImFcIiksemEuY2FsbChZYSxcImFcIiksMCE9PVdhLmxhc3RJbmRleHx8MCE9PVlhLmxhc3RJbmRleCksWmE9JGEuVU5TVVBQT1JURURfWXx8JGEuQlJPS0VOX0NBUkVULGVzPXZvaWQgMCE9PS8oKT8/Ly5leGVjKFwiXCIpWzFdOyhRYXx8ZXN8fFphKSYmKFhhPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyLGE9dGhpcyxzPVphJiZhLnN0aWNreSxpPUhhLmNhbGwoYSksdT1hLnNvdXJjZSxjPTAsbD1lO3JldHVybiBzJiYoLTE9PT0oaT1pLnJlcGxhY2UoXCJ5XCIsXCJcIikpLmluZGV4T2YoXCJnXCIpJiYoaSs9XCJnXCIpLGw9U3RyaW5nKGUpLnNsaWNlKGEubGFzdEluZGV4KSxhLmxhc3RJbmRleD4wJiYoIWEubXVsdGlsaW5lfHxhLm11bHRpbGluZSYmXCJcXG5cIiE9PWVbYS5sYXN0SW5kZXgtMV0pJiYodT1cIig/OiBcIit1K1wiKVwiLGw9XCIgXCIrbCxjKyspLG49bmV3IFJlZ0V4cChcIl4oPzpcIit1K1wiKVwiLGkpKSxlcyYmKG49bmV3IFJlZ0V4cChcIl5cIit1K1wiJCg/IVxcXFxzKVwiLGkpKSxRYSYmKHQ9YS5sYXN0SW5kZXgpLG89emEuY2FsbChzP246YSxsKSxzP28/KG8uaW5wdXQ9by5pbnB1dC5zbGljZShjKSxvWzBdPW9bMF0uc2xpY2UoYyksby5pbmRleD1hLmxhc3RJbmRleCxhLmxhc3RJbmRleCs9b1swXS5sZW5ndGgpOmEubGFzdEluZGV4PTA6UWEmJm8mJihhLmxhc3RJbmRleD1hLmdsb2JhbD9vLmluZGV4K29bMF0ubGVuZ3RoOnQpLGVzJiZvJiZvLmxlbmd0aD4xJiZKYS5jYWxsKG9bMF0sbiwoZnVuY3Rpb24oKXtmb3Iocj0xO3I8YXJndW1lbnRzLmxlbmd0aC0yO3IrKyl2b2lkIDA9PT1hcmd1bWVudHNbcl0mJihvW3JdPXZvaWQgMCl9KSksb30pO3ZhciB0cz1YYTtrZSh7dGFyZ2V0OlwiUmVnRXhwXCIscHJvdG86ITAsZm9yY2VkOi8uLy5leGVjIT09dHN9LHtleGVjOnRzfSk7dmFyIG5zPVJlZ0V4cC5wcm90b3R5cGUsb3M9bnMudG9TdHJpbmcscnM9cigoZnVuY3Rpb24oKXtyZXR1cm5cIi9hL2JcIiE9b3MuY2FsbCh7c291cmNlOlwiYVwiLGZsYWdzOlwiYlwifSl9KSksYXM9XCJ0b1N0cmluZ1wiIT1vcy5uYW1lOyhyc3x8YXMpJiZaKFJlZ0V4cC5wcm90b3R5cGUsXCJ0b1N0cmluZ1wiLChmdW5jdGlvbigpe3ZhciBlPUQodGhpcyksdD1TdHJpbmcoZS5zb3VyY2UpLG49ZS5mbGFncztyZXR1cm5cIi9cIit0K1wiL1wiK1N0cmluZyh2b2lkIDA9PT1uJiZlIGluc3RhbmNlb2YgUmVnRXhwJiYhKFwiZmxhZ3NcImluIG5zKT9IYS5jYWxsKGUpOm4pfSkse3Vuc2FmZTohMH0pO3ZhciBzcz1qdC5jb2RlQXQ7a2Uoe3RhcmdldDpcIlN0cmluZ1wiLHByb3RvOiEwfSx7Y29kZVBvaW50QXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHNzKHRoaXMsZSl9fSk7dmFyIGlzPXFlKFwibWF0Y2hcIiksdXM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIF8oZSkmJih2b2lkIDAhPT0odD1lW2lzXSk/ISF0OlwiUmVnRXhwXCI9PWQoZSkpfSxjcz1mdW5jdGlvbihlKXtpZih1cyhlKSl0aHJvdyBUeXBlRXJyb3IoXCJUaGUgbWV0aG9kIGRvZXNuJ3QgYWNjZXB0IHJlZ3VsYXIgZXhwcmVzc2lvbnNcIik7cmV0dXJuIGV9LGxzPXFlKFwibWF0Y2hcIiksZHM9ZnVuY3Rpb24oZSl7dmFyIHQ9Ly4vO3RyeXtcIi8uL1wiW2VdKHQpfWNhdGNoKG4pe3RyeXtyZXR1cm4gdFtsc109ITEsXCIvLi9cIltlXSh0KX1jYXRjaChvKXt9fXJldHVybiExfTtrZSh7dGFyZ2V0OlwiU3RyaW5nXCIscHJvdG86ITAsZm9yY2VkOiFkcyhcImluY2x1ZGVzXCIpfSx7aW5jbHVkZXM6ZnVuY3Rpb24oZSl7cmV0dXJuISF+U3RyaW5nKGgodGhpcykpLmluZGV4T2YoY3MoZSksYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pO3ZhciBwcz1xZShcInNwZWNpZXNcIiksZ3M9IXIoKGZ1bmN0aW9uKCl7dmFyIGU9Ly4vO3JldHVybiBlLmV4ZWM9ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gZS5ncm91cHM9e2E6XCI3XCJ9LGV9LFwiN1wiIT09XCJcIi5yZXBsYWNlKGUsXCIkPGE+XCIpfSkpLGhzPVwiJDBcIj09PVwiYVwiLnJlcGxhY2UoLy4vLFwiJDBcIiksZnM9cWUoXCJyZXBsYWNlXCIpLF9zPSEhLy4vW2ZzXSYmXCJcIj09PS8uL1tmc10oXCJhXCIsXCIkMFwiKSxtcz0hcigoZnVuY3Rpb24oKXt2YXIgZT0vKD86KS8sdD1lLmV4ZWM7ZS5leGVjPWZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTt2YXIgbj1cImFiXCIuc3BsaXQoZSk7cmV0dXJuIDIhPT1uLmxlbmd0aHx8XCJhXCIhPT1uWzBdfHxcImJcIiE9PW5bMV19KSksdnM9ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIGE9cWUoZSkscz0hcigoZnVuY3Rpb24oKXt2YXIgdD17fTtyZXR1cm4gdFthXT1mdW5jdGlvbigpe3JldHVybiA3fSw3IT1cIlwiW2VdKHQpfSkpLGk9cyYmIXIoKGZ1bmN0aW9uKCl7dmFyIHQ9ITEsbj0vYS87cmV0dXJuXCJzcGxpdFwiPT09ZSYmKChuPXt9KS5jb25zdHJ1Y3Rvcj17fSxuLmNvbnN0cnVjdG9yW3BzXT1mdW5jdGlvbigpe3JldHVybiBufSxuLmZsYWdzPVwiXCIsblthXT0vLi9bYV0pLG4uZXhlYz1mdW5jdGlvbigpe3JldHVybiB0PSEwLG51bGx9LG5bYV0oXCJcIiksIXR9KSk7aWYoIXN8fCFpfHxcInJlcGxhY2VcIj09PWUmJighZ3N8fCFoc3x8X3MpfHxcInNwbGl0XCI9PT1lJiYhbXMpe3ZhciB1PS8uL1thXSxjPW4oYSxcIlwiW2VdLChmdW5jdGlvbihlLHQsbixvLHIpe3JldHVybiB0LmV4ZWM9PT10cz9zJiYhcj97ZG9uZTohMCx2YWx1ZTp1LmNhbGwodCxuLG8pfTp7ZG9uZTohMCx2YWx1ZTplLmNhbGwobix0LG8pfTp7ZG9uZTohMX19KSx7UkVQTEFDRV9LRUVQU18kMDpocyxSRUdFWFBfUkVQTEFDRV9TVUJTVElUVVRFU19VTkRFRklORURfQ0FQVFVSRTpfc30pLGw9Y1swXSxkPWNbMV07WihTdHJpbmcucHJvdG90eXBlLGUsbCksWihSZWdFeHAucHJvdG90eXBlLGEsMj09dD9mdW5jdGlvbihlLHQpe3JldHVybiBkLmNhbGwoZSx0aGlzLHQpfTpmdW5jdGlvbihlKXtyZXR1cm4gZC5jYWxsKGUsdGhpcyl9KX1vJiZrKFJlZ0V4cC5wcm90b3R5cGVbYV0sXCJzaGFtXCIsITApfSxNcz1qdC5jaGFyQXQseXM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0KyhuP01zKGUsdCkubGVuZ3RoOjEpfSxJcz1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZXhlYztpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBuKXt2YXIgbz1uLmNhbGwoZSx0KTtpZihcIm9iamVjdFwiIT10eXBlb2Ygbyl0aHJvdyBUeXBlRXJyb3IoXCJSZWdFeHAgZXhlYyBtZXRob2QgcmV0dXJuZWQgc29tZXRoaW5nIG90aGVyIHRoYW4gYW4gT2JqZWN0IG9yIG51bGxcIik7cmV0dXJuIG99aWYoXCJSZWdFeHBcIiE9PWQoZSkpdGhyb3cgVHlwZUVycm9yKFwiUmVnRXhwI2V4ZWMgY2FsbGVkIG9uIGluY29tcGF0aWJsZSByZWNlaXZlclwiKTtyZXR1cm4gdHMuY2FsbChlLHQpfTt2cyhcIm1hdGNoXCIsMSwoZnVuY3Rpb24oZSx0LG4pe3JldHVybltmdW5jdGlvbih0KXt2YXIgbj1oKHRoaXMpLG89bnVsbD09dD92b2lkIDA6dFtlXTtyZXR1cm4gdm9pZCAwIT09bz9vLmNhbGwodCxuKTpuZXcgUmVnRXhwKHQpW2VdKFN0cmluZyhuKSl9LGZ1bmN0aW9uKGUpe3ZhciBvPW4odCxlLHRoaXMpO2lmKG8uZG9uZSlyZXR1cm4gby52YWx1ZTt2YXIgcj1EKGUpLGE9U3RyaW5nKHRoaXMpO2lmKCFyLmdsb2JhbClyZXR1cm4gSXMocixhKTt2YXIgcz1yLnVuaWNvZGU7ci5sYXN0SW5kZXg9MDtmb3IodmFyIGksdT1bXSxjPTA7bnVsbCE9PShpPUlzKHIsYSkpOyl7dmFyIGw9U3RyaW5nKGlbMF0pO3VbY109bCxcIlwiPT09bCYmKHIubGFzdEluZGV4PXlzKGEsaWUoci5sYXN0SW5kZXgpLHMpKSxjKyt9cmV0dXJuIDA9PT1jP251bGw6dX1dfSkpO3ZhciBFcz1NYXRoLm1heCxUcz1NYXRoLm1pbixBcz1NYXRoLmZsb29yLFNzPS9cXCQoWyQmJ2BdfFxcZFxcZD98PFtePl0qPikvZyxEcz0vXFwkKFskJidgXXxcXGRcXGQ/KS9nO3ZzKFwicmVwbGFjZVwiLDIsKGZ1bmN0aW9uKGUsdCxuLG8pe3ZhciByPW8uUkVHRVhQX1JFUExBQ0VfU1VCU1RJVFVURVNfVU5ERUZJTkVEX0NBUFRVUkUsYT1vLlJFUExBQ0VfS0VFUFNfJDAscz1yP1wiJFwiOlwiJDBcIjtyZXR1cm5bZnVuY3Rpb24obixvKXt2YXIgcj1oKHRoaXMpLGE9bnVsbD09bj92b2lkIDA6bltlXTtyZXR1cm4gdm9pZCAwIT09YT9hLmNhbGwobixyLG8pOnQuY2FsbChTdHJpbmcociksbixvKX0sZnVuY3Rpb24oZSxvKXtpZighciYmYXx8XCJzdHJpbmdcIj09dHlwZW9mIG8mJi0xPT09by5pbmRleE9mKHMpKXt2YXIgdT1uKHQsZSx0aGlzLG8pO2lmKHUuZG9uZSlyZXR1cm4gdS52YWx1ZX12YXIgYz1EKGUpLGw9U3RyaW5nKHRoaXMpLGQ9XCJmdW5jdGlvblwiPT10eXBlb2YgbztkfHwobz1TdHJpbmcobykpO3ZhciBwPWMuZ2xvYmFsO2lmKHApe3ZhciBnPWMudW5pY29kZTtjLmxhc3RJbmRleD0wfWZvcih2YXIgaD1bXTs7KXt2YXIgZj1JcyhjLGwpO2lmKG51bGw9PT1mKWJyZWFrO2lmKGgucHVzaChmKSwhcClicmVhaztcIlwiPT09U3RyaW5nKGZbMF0pJiYoYy5sYXN0SW5kZXg9eXMobCxpZShjLmxhc3RJbmRleCksZykpfWZvcih2YXIgXyxtPVwiXCIsdj0wLE09MDtNPGgubGVuZ3RoO00rKyl7Zj1oW01dO2Zvcih2YXIgeT1TdHJpbmcoZlswXSksST1FcyhUcyhhZShmLmluZGV4KSxsLmxlbmd0aCksMCksRT1bXSxUPTE7VDxmLmxlbmd0aDtUKyspRS5wdXNoKHZvaWQgMD09PShfPWZbVF0pP186U3RyaW5nKF8pKTt2YXIgQT1mLmdyb3VwcztpZihkKXt2YXIgUz1beV0uY29uY2F0KEUsSSxsKTt2b2lkIDAhPT1BJiZTLnB1c2goQSk7dmFyIE49U3RyaW5nKG8uYXBwbHkodm9pZCAwLFMpKX1lbHNlIE49aSh5LGwsSSxFLEEsbyk7ST49diYmKG0rPWwuc2xpY2UodixJKStOLHY9SSt5Lmxlbmd0aCl9cmV0dXJuIG0rbC5zbGljZSh2KX1dO2Z1bmN0aW9uIGkoZSxuLG8scixhLHMpe3ZhciBpPW8rZS5sZW5ndGgsdT1yLmxlbmd0aCxjPURzO3JldHVybiB2b2lkIDAhPT1hJiYoYT1PZShhKSxjPVNzKSx0LmNhbGwocyxjLChmdW5jdGlvbih0LHMpe3ZhciBjO3N3aXRjaChzLmNoYXJBdCgwKSl7Y2FzZVwiJFwiOnJldHVyblwiJFwiO2Nhc2VcIiZcIjpyZXR1cm4gZTtjYXNlXCJgXCI6cmV0dXJuIG4uc2xpY2UoMCxvKTtjYXNlXCInXCI6cmV0dXJuIG4uc2xpY2UoaSk7Y2FzZVwiPFwiOmM9YVtzLnNsaWNlKDEsLTEpXTticmVhaztkZWZhdWx0OnZhciBsPStzO2lmKDA9PT1sKXJldHVybiB0O2lmKGw+dSl7dmFyIGQ9QXMobC8xMCk7cmV0dXJuIDA9PT1kP3Q6ZDw9dT92b2lkIDA9PT1yW2QtMV0/cy5jaGFyQXQoMSk6cltkLTFdK3MuY2hhckF0KDEpOnR9Yz1yW2wtMV19cmV0dXJuIHZvaWQgMD09PWM/XCJcIjpjfSkpfX0pKTt2YXIgTnMsQ3M9Uy5mLGtzPVwiXCIuc3RhcnRzV2l0aCxMcz1NYXRoLm1pbixScz1kcyhcInN0YXJ0c1dpdGhcIiksT3M9IShSc3x8KE5zPUNzKFN0cmluZy5wcm90b3R5cGUsXCJzdGFydHNXaXRoXCIpLCFOc3x8TnMud3JpdGFibGUpKTtrZSh7dGFyZ2V0OlwiU3RyaW5nXCIscHJvdG86ITAsZm9yY2VkOiFPcyYmIVJzfSx7c3RhcnRzV2l0aDpmdW5jdGlvbihlKXt2YXIgdD1TdHJpbmcoaCh0aGlzKSk7Y3MoZSk7dmFyIG49aWUoTHMoYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsdC5sZW5ndGgpKSxvPVN0cmluZyhlKTtyZXR1cm4ga3M/a3MuY2FsbCh0LG8sbik6dC5zbGljZShuLG4rby5sZW5ndGgpPT09b319KTt2YXIgR3M9cWUoXCJpdGVyYXRvclwiKSxicz1xZShcInRvU3RyaW5nVGFnXCIpLHdzPWJvLnZhbHVlcztmb3IodmFyIFBzIGluIGZuKXt2YXIgVXM9b1tQc10sRnM9VXMmJlVzLnByb3RvdHlwZTtpZihGcyl7aWYoRnNbR3NdIT09d3MpdHJ5e2soRnMsR3Msd3MpfWNhdGNoKHpJKXtGc1tHc109d3N9aWYoRnNbYnNdfHxrKEZzLGJzLFBzKSxmbltQc10pZm9yKHZhciBxcyBpbiBibylpZihGc1txc10hPT1ib1txc10pdHJ5e2soRnMscXMsYm9bcXNdKX1jYXRjaCh6SSl7RnNbcXNdPWJvW3FzXX19fXZhciB4cz1QdC50cmltLFZzPW8ucGFyc2VGbG9hdCxLcz0xL1ZzKFJ0K1wiLTBcIikhPS1JbmZpbml0eT9mdW5jdGlvbihlKXt2YXIgdD14cyhTdHJpbmcoZSkpLG49VnModCk7cmV0dXJuIDA9PT1uJiZcIi1cIj09dC5jaGFyQXQoMCk/LTA6bn06VnM7a2Uoe2dsb2JhbDohMCxmb3JjZWQ6cGFyc2VGbG9hdCE9S3N9LHtwYXJzZUZsb2F0OktzfSk7dmFyIEJzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjA7eW4odGhpcyxlKSx0aGlzLmhpZ2g9dCx0aGlzLmxvdz1ufXJldHVybiBFbihlLFt7a2V5OlwiZXF1YWxcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWUmJih0aGlzLmxvdz09PWUubG93JiZ0aGlzLmhpZ2g9PT1lLmhpZ2gpfX0se2tleTpcInRvU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1OdW1iZXIodGhpcy5oaWdoKS50b1N0cmluZygxNiksdD1OdW1iZXIodGhpcy5sb3cpLnRvU3RyaW5nKDE2KTtpZih0Lmxlbmd0aDw4KWZvcih2YXIgbj04LXQubGVuZ3RoO247KXQ9XCIwXCIrdCxuLS07cmV0dXJuIGUrdH19XSksZX0oKSxIcz17VEVTVDp7Q0hJTkE6e0RFRkFVTFQ6XCJ3c3M6Ly93c3MtZGV2LnRpbS5xcS5jb21cIn0sT1ZFUlNFQTp7REVGQVVMVDpcIndzczovL3dzcy1kZXYudGltLnFxLmNvbVwifSxTSU5HQVBPUkU6e0RFRkFVTFQ6XCJ3c3M6Ly93c3NzZ3AtZGV2LmltLnFjbG91ZC5jb21cIn0sS09SRUE6e0RFRkFVTFQ6XCJ3c3M6Ly93c3Nrci1kZXYuaW0ucWNsb3VkLmNvbVwifSxHRVJNQU5ZOntERUZBVUxUOlwid3NzOi8vd3NzZ2VyLWRldi5pbS5xY2xvdWQuY29tXCJ9LElORDp7REVGQVVMVDpcIndzczovL3dzc2luZC1kZXYuaW0ucWNsb3VkLmNvbVwifX0sUFJPRFVDVElPTjp7Q0hJTkE6e0RFRkFVTFQ6XCJ3c3M6Ly93c3MuaW0ucWNsb3VkLmNvbVwiLEJBQ0tVUDpcIndzczovL3dzcy50aW0ucXEuY29tXCIsU1RBVDpcImh0dHBzOi8vYXBpLmltLnFjbG91ZC5jb21cIn0sT1ZFUlNFQTp7REVGQVVMVDpcIndzczovL3dzcy5pbS5xY2xvdWQuY29tXCIsQkFDS1VQOlwid3NzOi8vd3NzLm15LWltY2xvdWQuY29tXCIsU1RBVDpcImh0dHBzOi8vYXBpLm15LWltY2xvdWQuY29tXCJ9LFNJTkdBUE9SRTp7REVGQVVMVDpcIndzczovL3dzc3NncC5pbS5xY2xvdWQuY29tXCIsQkFDS1VQOlwid3NzOi8vd3Nzc2dwLm15LWltY2xvdWQuY29tXCIsU1RBVDpcImh0dHBzOi8vYXBpc2dwLm15LWltY2xvdWQuY29tXCJ9LEtPUkVBOntERUZBVUxUOlwid3NzOi8vd3Nza3IuaW0ucWNsb3VkLmNvbVwiLEJBQ0tVUDpcIndzczovL3dzc2tyLm15LWltY2xvdWQuY29tXCIsU1RBVDpcImh0dHBzOi8vYXBpa3IubXktaW1jbG91ZC5jb21cIn0sR0VSTUFOWTp7REVGQVVMVDpcIndzczovL3dzc2dlci5pbS5xY2xvdWQuY29tXCIsQkFDS1VQOlwid3NzOi8vd3NzZ2VyLm15LWltY2xvdWQuY29tXCIsU1RBVDpcImh0dHBzOi8vYXBpZ2VyLm15LWltY2xvdWQuY29tXCJ9LElORDp7REVGQVVMVDpcIndzczovL3dzc2luZC5pbS5xY2xvdWQuY29tXCIsQkFDS1VQOlwid3NzOi8vd3NzaW5kLm15LWltY2xvdWQuY29tXCIsU1RBVDpcImh0dHBzOi8vYXBpaW5kLm15LWltY2xvdWQuY29tXCJ9fX0sanM9e1dFQjo3LFdYX01QOjgsUVFfTVA6OSxUVF9NUDoxMCxCQUlEVV9NUDoxMSxBTElfTVA6MTIsVU5JX05BVElWRV9BUFA6MTV9LFdzPVwiMS43LjNcIixZcz01MzcwNDgxNjgsJHM9XCJDSElOQVwiLHpzPVwiT1ZFUlNFQVwiLEpzPVwiU0lOR0FQT1JFXCIsWHM9XCJLT1JFQVwiLFFzPVwiR0VSTUFOWVwiLFpzPVwiSU5EXCIsZWk9e0hPU1Q6e0NVUlJFTlQ6e0RFRkFVTFQ6XCJ3c3M6Ly93c3MuaW0ucWNsb3VkLmNvbVwiLFNUQVQ6XCJodHRwczovL2FwaS5pbS5xY2xvdWQuY29tXCJ9LHNldEN1cnJlbnQ6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06JHM7dGhpcy5DVVJSRU5UPUhzLlBST0RVQ1RJT05bZV19fSxOQU1FOntPUEVOX0lNOlwib3BlbmltXCIsR1JPVVA6XCJncm91cF9vcGVuX2h0dHBfc3ZjXCIsR1JPVVBfQ09NTVVOSVRZOlwibWlsbGlvbl9ncm91cF9vcGVuX2h0dHBfc3ZjXCIsR1JPVVBfQVRUUjpcImdyb3VwX29wZW5fYXR0cl9odHRwX3N2Y1wiLEZSSUVORDpcInNuc1wiLFBST0ZJTEU6XCJwcm9maWxlXCIsUkVDRU5UX0NPTlRBQ1Q6XCJyZWNlbnRjb250YWN0XCIsUElDOlwib3BlbnBpY1wiLEJJR19HUk9VUF9OT19BVVRIOlwiZ3JvdXBfb3Blbl9odHRwX25vYXV0aF9zdmNcIixCSUdfR1JPVVBfTE9OR19QT0xMSU5HOlwiZ3JvdXBfb3Blbl9sb25nX3BvbGxpbmdfaHR0cF9zdmNcIixCSUdfR1JPVVBfTE9OR19QT0xMSU5HX05PX0FVVEg6XCJncm91cF9vcGVuX2xvbmdfcG9sbGluZ19odHRwX25vYXV0aF9zdmNcIixJTV9PUEVOX1NUQVQ6XCJpbW9wZW5zdGF0XCIsV0VCX0lNOlwid2ViaW1cIixJTV9DT1NfU0lHTjpcImltX2Nvc19zaWduX3N2clwiLENVU1RPTV9VUExPQUQ6XCJpbV9jb3NfbXNnXCIsSEVBUlRCRUFUOlwiaGVhcnRiZWF0XCIsSU1fT1BFTl9QVVNIOlwiaW1fb3Blbl9wdXNoXCIsSU1fT1BFTl9TVEFUVVM6XCJpbV9vcGVuX3N0YXR1c1wiLElNX0xPTkdfTUVTU0FHRTpcImltX2xvbmdfbXNnXCIsSU1fQ09ORklHX01BTkFHRVI6XCJpbV9zZGtfY29uZmlnX21nclwiLFNUQVRfU0VSVklDRTpcIlN0YXRTdmNcIixPVkVSTE9BRF9QVVNIOlwiT3ZlckxvYWRQdXNoXCJ9LENNRDp7QUNDRVNTX0xBWUVSOlwiYWNjZXNzbGF5ZXJcIixMT0dJTjpcIndzbG9naW5cIixMT0dPVVRfTE9OR19QT0xMOlwibG9uZ3BvbGxpbmdsb2dvdXRcIixMT0dPVVQ6XCJ3c2xvZ291dFwiLEhFTExPOlwid3NoZWxsb1wiLFBPUlRSQUlUX0dFVDpcInBvcnRyYWl0X2dldF9hbGxcIixQT1JUUkFJVF9TRVQ6XCJwb3J0cmFpdF9zZXRcIixHRVRfTE9OR19QT0xMX0lEOlwiZ2V0bG9uZ3BvbGxpbmdpZFwiLExPTkdfUE9MTDpcImxvbmdwb2xsaW5nXCIsQVZDSEFUUk9PTV9MT05HX1BPTEw6XCJnZXRfbXNnXCIsQUREX0ZSSUVORDpcImZyaWVuZF9hZGRcIixVUERBVEVfRlJJRU5EOlwiZnJpZW5kX3VwZGF0ZVwiLEdFVF9GUklFTkRfTElTVDpcImZyaWVuZF9nZXRcIixHRVRfRlJJRU5EX1BST0ZJTEU6XCJmcmllbmRfZ2V0X2xpc3RcIixERUxFVEVfRlJJRU5EOlwiZnJpZW5kX2RlbGV0ZVwiLENIRUNLX0ZSSUVORDpcImZyaWVuZF9jaGVja1wiLEdFVF9GUklFTkRfR1JPVVBfTElTVDpcImdyb3VwX2dldFwiLFJFU1BPTkRfRlJJRU5EX0FQUExJQ0FUSU9OOlwiZnJpZW5kX3Jlc3BvbnNlXCIsR0VUX0ZSSUVORF9BUFBMSUNBVElPTl9MSVNUOlwicGVuZGVuY3lfZ2V0XCIsREVMRVRFX0ZSSUVORF9BUFBMSUNBVElPTjpcInBlbmRlbmN5X2RlbGV0ZVwiLFJFUE9SVF9GUklFTkRfQVBQTElDQVRJT046XCJwZW5kZW5jeV9yZXBvcnRcIixHRVRfR1JPVVBfQVBQTElDQVRJT046XCJnZXRfcGVuZGVuY3lcIixDUkVBVEVfRlJJRU5EX0dST1VQOlwiZ3JvdXBfYWRkXCIsREVMRVRFX0ZSSUVORF9HUk9VUDpcImdyb3VwX2RlbGV0ZVwiLFVQREFURV9GUklFTkRfR1JPVVA6XCJncm91cF91cGRhdGVcIixHRVRfQkxBQ0tMSVNUOlwiYmxhY2tfbGlzdF9nZXRcIixBRERfQkxBQ0tMSVNUOlwiYmxhY2tfbGlzdF9hZGRcIixERUxFVEVfQkxBQ0tMSVNUOlwiYmxhY2tfbGlzdF9kZWxldGVcIixDUkVBVEVfR1JPVVA6XCJjcmVhdGVfZ3JvdXBcIixHRVRfSk9JTkVEX0dST1VQUzpcImdldF9qb2luZWRfZ3JvdXBfbGlzdFwiLFNFVF9HUk9VUF9BVFRSSUJVVEVTOlwic2V0X2dyb3VwX2F0dHJcIixNT0RJRllfR1JPVVBfQVRUUklCVVRFUzpcIm1vZGlmeV9ncm91cF9hdHRyXCIsREVMRVRFX0dST1VQX0FUVFJJQlVURVM6XCJkZWxldGVfZ3JvdXBfYXR0clwiLENMRUFSX0dST1VQX0FUVFJJQlVURVM6XCJjbGVhcl9ncm91cF9hdHRyXCIsR0VUX0dST1VQX0FUVFJJQlVURVM6XCJnZXRfZ3JvdXBfYXR0clwiLFNFTkRfTUVTU0FHRTpcInNlbmRtc2dcIixSRVZPS0VfQzJDX01FU1NBR0U6XCJtc2d3aXRoZHJhd1wiLERFTEVURV9DMkNfTUVTU0FHRTpcImRlbGV0ZV9jMmNfbXNnX3JhbWJsZVwiLFNFTkRfR1JPVVBfTUVTU0FHRTpcInNlbmRfZ3JvdXBfbXNnXCIsUkVWT0tFX0dST1VQX01FU1NBR0U6XCJncm91cF9tc2dfcmVjYWxsXCIsREVMRVRFX0dST1VQX01FU1NBR0U6XCJkZWxldGVfZ3JvdXBfcmFtYmxlX21zZ19ieV9zZXFcIixHRVRfR1JPVVBfSU5GTzpcImdldF9ncm91cF9zZWxmX21lbWJlcl9pbmZvXCIsR0VUX0dST1VQX01FTUJFUl9JTkZPOlwiZ2V0X3NwZWNpZmllZF9ncm91cF9tZW1iZXJfaW5mb1wiLEdFVF9HUk9VUF9NRU1CRVJfTElTVDpcImdldF9ncm91cF9tZW1iZXJfaW5mb1wiLFFVSVRfR1JPVVA6XCJxdWl0X2dyb3VwXCIsQ0hBTkdFX0dST1VQX09XTkVSOlwiY2hhbmdlX2dyb3VwX293bmVyXCIsREVTVFJPWV9HUk9VUDpcImRlc3Ryb3lfZ3JvdXBcIixBRERfR1JPVVBfTUVNQkVSOlwiYWRkX2dyb3VwX21lbWJlclwiLERFTEVURV9HUk9VUF9NRU1CRVI6XCJkZWxldGVfZ3JvdXBfbWVtYmVyXCIsU0VBUkNIX0dST1VQX0JZX0lEOlwiZ2V0X2dyb3VwX3B1YmxpY19pbmZvXCIsQVBQTFlfSk9JTl9HUk9VUDpcImFwcGx5X2pvaW5fZ3JvdXBcIixIQU5ETEVfQVBQTFlfSk9JTl9HUk9VUDpcImhhbmRsZV9hcHBseV9qb2luX2dyb3VwXCIsSEFORExFX0dST1VQX0lOVklUQVRJT046XCJoYW5kbGVfaW52aXRlX2pvaW5fZ3JvdXBcIixNT0RJRllfR1JPVVBfSU5GTzpcIm1vZGlmeV9ncm91cF9iYXNlX2luZm9cIixNT0RJRllfR1JPVVBfTUVNQkVSX0lORk86XCJtb2RpZnlfZ3JvdXBfbWVtYmVyX2luZm9cIixERUxFVEVfR1JPVVBfU1lTVEVNX01FU1NBR0U6XCJkZWxldGVtc2dcIixERUxFVEVfR1JPVVBfQVRfVElQUzpcImRlbGV0ZW1zZ1wiLEdFVF9DT05WRVJTQVRJT05fTElTVDpcImdldFwiLFBBR0lOR19HRVRfQ09OVkVSU0FUSU9OX0xJU1Q6XCJwYWdlX2dldFwiLERFTEVURV9DT05WRVJTQVRJT046XCJkZWxldGVcIixQSU5fQ09OVkVSU0FUSU9OOlwidG9wXCIsR0VUX01FU1NBR0VTOlwiZ2V0bXNnXCIsR0VUX0MyQ19ST0FNX01FU1NBR0VTOlwiZ2V0cm9hbW1zZ1wiLFNFVF9DMkNfUEVFUl9NVVRFX05PVElGSUNBVElPTlM6XCJzZXRfYzJjX3BlZXJfbXV0ZV9ub3RpZmljYXRpb25zXCIsR0VUX0MyQ19QRUVSX01VVEVfTk9USUZJQ0FUSU9OUzpcImdldF9jMmNfcGVlcl9tdXRlX25vdGlmaWNhdGlvbnNcIixHRVRfR1JPVVBfUk9BTV9NRVNTQUdFUzpcImdyb3VwX21zZ19nZXRcIixHRVRfUkVBRF9SRUNFSVBUOlwiZ2V0X2dyb3VwX21zZ19yZWNlaXB0XCIsR0VUX1JFQURfUkVDRUlQVF9ERVRBSUw6XCJnZXRfZ3JvdXBfbXNnX3JlY2VpcHRfZGV0YWlsXCIsU0VORF9SRUFEX1JFQ0VJUFQ6XCJncm91cF9tc2dfcmVjZWlwdFwiLFNFVF9DMkNfTUVTU0FHRV9SRUFEOlwibXNncmVhZGVkXCIsR0VUX1BFRVJfUkVBRF9USU1FOlwiZ2V0X3BlZXJfcmVhZF90aW1lXCIsU0VUX0dST1VQX01FU1NBR0VfUkVBRDpcIm1zZ19yZWFkX3JlcG9ydFwiLEZJTEVfUkVBRF9BTkRfV1JJVEVfQVVUSEtFWTpcImF1dGhrZXlcIixGSUxFX1VQTE9BRDpcInBpY191cFwiLENPU19TSUdOOlwiY29zXCIsQ09TX1BSRV9TSUc6XCJwcmVfc2lnXCIsVklERU9fQ09WRVI6XCJ2aWRlb19jb3ZlclwiLFRJTV9XRUJfUkVQT1JUX1YyOlwidGltX3dlYl9yZXBvcnRfdjJcIixCSUdfREFUQV9IQUxMV0FZX0FVVEhfS0VZOlwiYXV0aGtleVwiLEdFVF9PTkxJTkVfTUVNQkVSX05VTTpcImdldF9vbmxpbmVfbWVtYmVyX251bVwiLEFMSVZFOlwiYWxpdmVcIixNRVNTQUdFX1BVU0g6XCJtc2dfcHVzaFwiLE1VTFRJX01FU1NBR0VfUFVTSDpcIm11bHRpX21zZ19wdXNoX3dzXCIsTUVTU0FHRV9QVVNIX0FDSzpcIndzX21zZ19wdXNoX2Fja1wiLFNUQVRVU19GT1JDRU9GRkxJTkU6XCJzdGF0X2ZvcmNlb2ZmbGluZVwiLERPV05MT0FEX01FUkdFUl9NRVNTQUdFOlwiZ2V0X3JlbGF5X2pzb25fbXNnXCIsVVBMT0FEX01FUkdFUl9NRVNTQUdFOlwic2F2ZV9yZWxheV9qc29uX21zZ1wiLEZFVENIX0NMT1VEX0NPTlRST0xfQ09ORklHOlwiZmV0Y2hfY29uZmlnXCIsUFVTSEVEX0NMT1VEX0NPTlRST0xfQ09ORklHOlwicHVzaF9jb25maWd2MlwiLEZFVENIX0NPTU1FUkNJQUxfQ09ORklHOlwiZmV0Y2hfaW1zZGtfcHVyY2hhc2VfYml0c3YyXCIsUFVTSEVEX0NPTU1FUkNJQUxfQ09ORklHOlwicHVzaF9pbXNka19wdXJjaGFzZV9iaXRzdjJcIixLSUNLX09USEVSOlwiS2lja090aGVyXCIsT1ZFUkxPQURfTk9USUZZOlwibm90aWZ5MlwiLFNFVF9BTExfTUVTU0FHRV9SRUFEOlwicmVhZF9hbGxfdW5yZWFkX21zZ1wifSxDSEFOTkVMOntTT0NLRVQ6MSxYSFI6MixBVVRPOjB9LE5BTUVfVkVSU0lPTjp7b3BlbmltOlwidjRcIixncm91cF9vcGVuX2h0dHBfc3ZjOlwidjRcIixzbnM6XCJ2NFwiLHByb2ZpbGU6XCJ2NFwiLHJlY2VudGNvbnRhY3Q6XCJ2NFwiLG9wZW5waWM6XCJ2NFwiLGdyb3VwX29wZW5faHR0cF9ub2F1dGhfc3ZjOlwidjRcIixncm91cF9vcGVuX2xvbmdfcG9sbGluZ19odHRwX3N2YzpcInY0XCIsZ3JvdXBfb3Blbl9sb25nX3BvbGxpbmdfaHR0cF9ub2F1dGhfc3ZjOlwidjRcIixpbW9wZW5zdGF0OlwidjRcIixpbV9jb3Nfc2lnbl9zdnI6XCJ2NFwiLGltX2Nvc19tc2c6XCJ2NFwiLHdlYmltOlwidjRcIixpbV9vcGVuX3B1c2g6XCJ2NFwiLGltX29wZW5fc3RhdHVzOlwidjRcIn19LHRpPXtTRUFSQ0hfTVNHOm5ldyBCcygwLE1hdGgucG93KDIsMCkpLnRvU3RyaW5nKCksU0VBUkNIX0dSUF9TTlM6bmV3IEJzKDAsTWF0aC5wb3coMiwxKSkudG9TdHJpbmcoKSxBVkNIQVRST09NX0hJU1RPUllfTVNHOm5ldyBCcygwLE1hdGgucG93KDIsMikpLnRvU3RyaW5nKCksR1JQX0NPTU1VTklUWTpuZXcgQnMoMCxNYXRoLnBvdygyLDMpKS50b1N0cmluZygpLE1TR19UT19TUEVDSUZJRURfR1JQX01CUjpuZXcgQnMoMCxNYXRoLnBvdygyLDQpKS50b1N0cmluZygpfTtlaS5IT1NULnNldEN1cnJlbnQoJHMpO3ZhciBuaSxvaSxyaSxhaT1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd3gmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHd4LmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKHd4LmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSxzaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgcXEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHFxLmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKHFxLmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSxpaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgdHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHR0LmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKHR0LmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSx1aT1cInVuZGVmaW5lZFwiIT10eXBlb2Ygc3dhbiYmXCJmdW5jdGlvblwiPT10eXBlb2Ygc3dhbi5nZXRTeXN0ZW1JbmZvU3luYyYmQm9vbGVhbihzd2FuLmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSxjaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgbXkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIG15LmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKG15LmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSxsaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pJiZcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93LGRpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmkscGk9YWl8fHNpfHxpaXx8dWl8fGNpfHxsaSxnaT0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdykmJiFwaSxoaT1zaT9xcTppaT90dDp1aT9zd2FuOmNpP215OmFpP3d4OmxpP3VuaTp7fSxmaT0obmk9XCJXRUJcIixMaT9uaT1cIldFQlwiOnNpP25pPVwiUVFfTVBcIjppaT9uaT1cIlRUX01QXCI6dWk/bmk9XCJCQUlEVV9NUFwiOmNpP25pPVwiQUxJX01QXCI6YWk/bmk9XCJXWF9NUFwiOmxpJiYobmk9XCJVTklfTkFUSVZFX0FQUFwiKSxqc1tuaV0pLF9pPWdpJiZ3aW5kb3cmJndpbmRvdy5uYXZpZ2F0b3ImJndpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50fHxcIlwiLG1pPS9BcHBsZVdlYktpdFxcLyhbXFxkLl0rKS9pLmV4ZWMoX2kpLHZpPShtaSYmcGFyc2VGbG9hdChtaS5wb3AoKSksL2lQYWQvaS50ZXN0KF9pKSksTWk9L2lQaG9uZS9pLnRlc3QoX2kpJiYhdmkseWk9L2lQb2QvaS50ZXN0KF9pKSxJaT1NaXx8dml8fHlpLEVpPWZ1bmN0aW9uKCl7dmFyIGU9X2kubWF0Y2goL09TIChcXGQrKV8vaSk7cmV0dXJuIGUmJmVbMV0/ZVsxXTpudWxsfSgpLFRpPS9BbmRyb2lkL2kudGVzdChfaSksQWk9ZnVuY3Rpb24oKXt2YXIgZT1faS5tYXRjaCgvQW5kcm9pZCAoXFxkKykoPzpcXC4oXFxkKykpPyg/OlxcLihcXGQrKSkqL2kpO2lmKCFlKXJldHVybiBudWxsO3ZhciB0PWVbMV0mJnBhcnNlRmxvYXQoZVsxXSksbj1lWzJdJiZwYXJzZUZsb2F0KGVbMl0pO3JldHVybiB0JiZuP3BhcnNlRmxvYXQoZVsxXStcIi5cIitlWzJdKTp0fHxudWxsfSgpLFNpPShUaSYmL3dlYmtpdC9pLnRlc3QoX2kpLC9GaXJlZm94L2kudGVzdChfaSksL0VkZ2UvaS50ZXN0KF9pKSksRGk9IVNpJiYvQ2hyb21lL2kudGVzdChfaSksTmk9KGZ1bmN0aW9uKCl7dmFyIGU9X2kubWF0Y2goL0Nocm9tZVxcLyhcXGQrKS8pO2UmJmVbMV0mJnBhcnNlRmxvYXQoZVsxXSl9KCksL01TSUUvLnRlc3QoX2kpfHxfaS5pbmRleE9mKFwiVHJpZGVudFwiKT4tMSYmX2kuaW5kZXhPZihcInJ2OjExLjBcIik+LTEpLENpPSgvTVNJRVxcczhcXC4wLy50ZXN0KF9pKSxmdW5jdGlvbigpe3ZhciBlPS9NU0lFXFxzKFxcZCspXFwuXFxkLy5leGVjKF9pKSx0PWUmJnBhcnNlRmxvYXQoZVsxXSk7cmV0dXJuIXQmJi9UcmlkZW50XFwvNy4wL2kudGVzdChfaSkmJi9ydjoxMS4wLy50ZXN0KF9pKSYmKHQ9MTEpLHR9KCkpLGtpPSgvU2FmYXJpL2kudGVzdChfaSksL1RCU1xcL1xcZCsvaS50ZXN0KF9pKSksTGk9KGZ1bmN0aW9uKCl7dmFyIGU9X2kubWF0Y2goL1RCU1xcLyhcXGQrKS9pKTtpZihlJiZlWzFdKWVbMV19KCksIWtpJiYvTVFRQnJvd3NlclxcL1xcZCsvaS50ZXN0KF9pKSwha2kmJi8gUVFCcm93c2VyXFwvXFxkKy9pLnRlc3QoX2kpLC8obWljcm9tZXNzZW5nZXJ8d2ViYnJvd3NlcikvaS50ZXN0KF9pKSksUmk9L1dpbmRvd3MvaS50ZXN0KF9pKSxPaT0vTUFDIE9TIFgvaS50ZXN0KF9pKSxHaT0oL01pY3JvTWVzc2VuZ2VyL2kudGVzdChfaSksZ2kmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBXb3JrZXImJiFOaSksYmk9IXIoKGZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5pc0V4dGVuc2libGUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSksd2k9dCgoZnVuY3Rpb24oZSl7dmFyIHQ9Qy5mLG49SyhcIm1ldGFcIiksbz0wLHI9T2JqZWN0LmlzRXh0ZW5zaWJsZXx8ZnVuY3Rpb24oKXtyZXR1cm4hMH0sYT1mdW5jdGlvbihlKXt0KGUsbix7dmFsdWU6e29iamVjdElEOlwiT1wiKyArK28sd2Vha0RhdGE6e319fSl9LHM9ZS5leHBvcnRzPXtSRVFVSVJFRDohMSxmYXN0S2V5OmZ1bmN0aW9uKGUsdCl7aWYoIV8oZSkpcmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIGU/ZTooXCJzdHJpbmdcIj09dHlwZW9mIGU/XCJTXCI6XCJQXCIpK2U7aWYoIU0oZSxuKSl7aWYoIXIoZSkpcmV0dXJuXCJGXCI7aWYoIXQpcmV0dXJuXCJFXCI7YShlKX1yZXR1cm4gZVtuXS5vYmplY3RJRH0sZ2V0V2Vha0RhdGE6ZnVuY3Rpb24oZSx0KXtpZighTShlLG4pKXtpZighcihlKSlyZXR1cm4hMDtpZighdClyZXR1cm4hMTthKGUpfXJldHVybiBlW25dLndlYWtEYXRhfSxvbkZyZWV6ZTpmdW5jdGlvbihlKXtyZXR1cm4gYmkmJnMuUkVRVUlSRUQmJnIoZSkmJiFNKGUsbikmJmEoZSksZX19O2pbbl09ITB9KSksUGk9KHdpLlJFUVVJUkVELHdpLmZhc3RLZXksd2kuZ2V0V2Vha0RhdGEsd2kub25GcmVlemUsQy5mKSxVaT13aS5mYXN0S2V5LEZpPVEuc2V0LHFpPVEuZ2V0dGVyRm9yLHhpPShmdW5jdGlvbihlLHQsbil7dmFyIGE9LTEhPT1lLmluZGV4T2YoXCJNYXBcIikscz0tMSE9PWUuaW5kZXhPZihcIldlYWtcIiksaT1hP1wic2V0XCI6XCJhZGRcIix1PW9bZV0sYz11JiZ1LnByb3RvdHlwZSxsPXUsZD17fSxwPWZ1bmN0aW9uKGUpe3ZhciB0PWNbZV07WihjLGUsXCJhZGRcIj09ZT9mdW5jdGlvbihlKXtyZXR1cm4gdC5jYWxsKHRoaXMsMD09PWU/MDplKSx0aGlzfTpcImRlbGV0ZVwiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiEocyYmIV8oZSkpJiZ0LmNhbGwodGhpcywwPT09ZT8wOmUpfTpcImdldFwiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiBzJiYhXyhlKT92b2lkIDA6dC5jYWxsKHRoaXMsMD09PWU/MDplKX06XCJoYXNcIj09ZT9mdW5jdGlvbihlKXtyZXR1cm4hKHMmJiFfKGUpKSYmdC5jYWxsKHRoaXMsMD09PWU/MDplKX06ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5jYWxsKHRoaXMsMD09PWU/MDplLG4pLHRoaXN9KX07aWYoTmUoZSxcImZ1bmN0aW9uXCIhPXR5cGVvZiB1fHwhKHN8fGMuZm9yRWFjaCYmIXIoKGZ1bmN0aW9uKCl7KG5ldyB1KS5lbnRyaWVzKCkubmV4dCgpfSkpKSkpbD1uLmdldENvbnN0cnVjdG9yKHQsZSxhLGkpLHdpLlJFUVVJUkVEPSEwO2Vsc2UgaWYoTmUoZSwhMCkpe3ZhciBnPW5ldyBsLGg9Z1tpXShzP3t9Oi0wLDEpIT1nLGY9cigoZnVuY3Rpb24oKXtnLmhhcygxKX0pKSxtPU10KChmdW5jdGlvbihlKXtuZXcgdShlKX0pKSx2PSFzJiZyKChmdW5jdGlvbigpe2Zvcih2YXIgZT1uZXcgdSx0PTU7dC0tOyllW2ldKHQsdCk7cmV0dXJuIWUuaGFzKC0wKX0pKTttfHwoKGw9dCgoZnVuY3Rpb24odCxuKXtrcih0LGwsZSk7dmFyIG89dHIobmV3IHUsdCxsKTtyZXR1cm4gbnVsbCE9biYmTHIobixvW2ldLG8sYSksb30pKSkucHJvdG90eXBlPWMsYy5jb25zdHJ1Y3Rvcj1sKSwoZnx8dikmJihwKFwiZGVsZXRlXCIpLHAoXCJoYXNcIiksYSYmcChcImdldFwiKSksKHZ8fGgpJiZwKGkpLHMmJmMuY2xlYXImJmRlbGV0ZSBjLmNsZWFyfWRbZV09bCxrZSh7Z2xvYmFsOiEwLGZvcmNlZDpsIT11fSxkKSx0bihsLGUpLHN8fG4uc2V0U3Ryb25nKGwsZSxhKX0oXCJNYXBcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcyxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1swXTp2b2lkIDApfX0pLHtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbihlLHQsbixvKXt2YXIgcj1lKChmdW5jdGlvbihlLHMpe2tyKGUscix0KSxGaShlLHt0eXBlOnQsaW5kZXg6a3QobnVsbCksZmlyc3Q6dm9pZCAwLGxhc3Q6dm9pZCAwLHNpemU6MH0pLGF8fChlLnNpemU9MCksbnVsbCE9cyYmTHIocyxlW29dLGUsbil9KSkscz1xaSh0KSxpPWZ1bmN0aW9uKGUsdCxuKXt2YXIgbyxyLGk9cyhlKSxjPXUoZSx0KTtyZXR1cm4gYz9jLnZhbHVlPW46KGkubGFzdD1jPXtpbmRleDpyPVVpKHQsITApLGtleTp0LHZhbHVlOm4scHJldmlvdXM6bz1pLmxhc3QsbmV4dDp2b2lkIDAscmVtb3ZlZDohMX0saS5maXJzdHx8KGkuZmlyc3Q9YyksbyYmKG8ubmV4dD1jKSxhP2kuc2l6ZSsrOmUuc2l6ZSsrLFwiRlwiIT09ciYmKGkuaW5kZXhbcl09YykpLGV9LHU9ZnVuY3Rpb24oZSx0KXt2YXIgbixvPXMoZSkscj1VaSh0KTtpZihcIkZcIiE9PXIpcmV0dXJuIG8uaW5kZXhbcl07Zm9yKG49by5maXJzdDtuO249bi5uZXh0KWlmKG4ua2V5PT10KXJldHVybiBufTtyZXR1cm4gRHIoci5wcm90b3R5cGUse2NsZWFyOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXModGhpcyksdD1lLmluZGV4LG49ZS5maXJzdDtuOyluLnJlbW92ZWQ9ITAsbi5wcmV2aW91cyYmKG4ucHJldmlvdXM9bi5wcmV2aW91cy5uZXh0PXZvaWQgMCksZGVsZXRlIHRbbi5pbmRleF0sbj1uLm5leHQ7ZS5maXJzdD1lLmxhc3Q9dm9pZCAwLGE/ZS5zaXplPTA6dGhpcy5zaXplPTB9LGRlbGV0ZTpmdW5jdGlvbihlKXt2YXIgdD1zKHRoaXMpLG49dSh0aGlzLGUpO2lmKG4pe3ZhciBvPW4ubmV4dCxyPW4ucHJldmlvdXM7ZGVsZXRlIHQuaW5kZXhbbi5pbmRleF0sbi5yZW1vdmVkPSEwLHImJihyLm5leHQ9byksbyYmKG8ucHJldmlvdXM9ciksdC5maXJzdD09biYmKHQuZmlyc3Q9byksdC5sYXN0PT1uJiYodC5sYXN0PXIpLGE/dC5zaXplLS06dGhpcy5zaXplLS19cmV0dXJuISFufSxmb3JFYWNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPXModGhpcyksbz1SZShlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLDMpO3Q9dD90Lm5leHQ6bi5maXJzdDspZm9yKG8odC52YWx1ZSx0LmtleSx0aGlzKTt0JiZ0LnJlbW92ZWQ7KXQ9dC5wcmV2aW91c30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiEhdSh0aGlzLGUpfX0pLERyKHIucHJvdG90eXBlLG4/e2dldDpmdW5jdGlvbihlKXt2YXIgdD11KHRoaXMsZSk7cmV0dXJuIHQmJnQudmFsdWV9LHNldDpmdW5jdGlvbihlLHQpe3JldHVybiBpKHRoaXMsMD09PWU/MDplLHQpfX06e2FkZDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLGU9MD09PWU/MDplLGUpfX0pLGEmJlBpKHIucHJvdG90eXBlLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcyh0aGlzKS5zaXplfX0pLHJ9LHNldFN0cm9uZzpmdW5jdGlvbihlLHQsbil7dmFyIG89dCtcIiBJdGVyYXRvclwiLHI9cWkodCksYT1xaShvKTtkbihlLHQsKGZ1bmN0aW9uKGUsdCl7RmkodGhpcyx7dHlwZTpvLHRhcmdldDplLHN0YXRlOnIoZSksa2luZDp0LGxhc3Q6dm9pZCAwfSl9KSwoZnVuY3Rpb24oKXtmb3IodmFyIGU9YSh0aGlzKSx0PWUua2luZCxuPWUubGFzdDtuJiZuLnJlbW92ZWQ7KW49bi5wcmV2aW91cztyZXR1cm4gZS50YXJnZXQmJihlLmxhc3Q9bj1uP24ubmV4dDplLnN0YXRlLmZpcnN0KT9cImtleXNcIj09dD97dmFsdWU6bi5rZXksZG9uZTohMX06XCJ2YWx1ZXNcIj09dD97dmFsdWU6bi52YWx1ZSxkb25lOiExfTp7dmFsdWU6W24ua2V5LG4udmFsdWVdLGRvbmU6ITF9OihlLnRhcmdldD12b2lkIDAse3ZhbHVlOnZvaWQgMCxkb25lOiEwfSl9KSxuP1wiZW50cmllc1wiOlwidmFsdWVzXCIsIW4sITApLENyKHQpfX0pLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pO29pPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlP2NvbnNvbGU6dm9pZCAwIT09eGkmJnhpLmNvbnNvbGU/eGkuY29uc29sZTpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuY29uc29sZT93aW5kb3cuY29uc29sZTp7fTtmb3IodmFyIFZpPWZ1bmN0aW9uKCl7fSxLaT1bXCJhc3NlcnRcIixcImNsZWFyXCIsXCJjb3VudFwiLFwiZGVidWdcIixcImRpclwiLFwiZGlyeG1sXCIsXCJlcnJvclwiLFwiZXhjZXB0aW9uXCIsXCJncm91cFwiLFwiZ3JvdXBDb2xsYXBzZWRcIixcImdyb3VwRW5kXCIsXCJpbmZvXCIsXCJsb2dcIixcIm1hcmtUaW1lbGluZVwiLFwicHJvZmlsZVwiLFwicHJvZmlsZUVuZFwiLFwidGFibGVcIixcInRpbWVcIixcInRpbWVFbmRcIixcInRpbWVTdGFtcFwiLFwidHJhY2VcIixcIndhcm5cIl0sQmk9S2kubGVuZ3RoO0JpLS07KXJpPUtpW0JpXSxjb25zb2xlW3JpXXx8KG9pW3JpXT1WaSk7b2kubWV0aG9kcz1LaTt2YXIgSGk9b2ksamk9MCxXaT1mdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpK2ppfSxZaT1mdW5jdGlvbigpe2ppPTB9LCRpPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguZmxvb3IoV2koKS8xZTMpfSx6aT0wLEppPW5ldyBNYXA7ZnVuY3Rpb24gWGkoKXt2YXIgZSx0PSgoZT1uZXcgRGF0ZSkuc2V0VGltZShXaSgpKSxlKTtyZXR1cm5cIlRJTSBcIit0LnRvTG9jYWxlVGltZVN0cmluZyhcImVuLVVTXCIse2hvdXIxMjohMX0pK1wiLlwiK2Z1bmN0aW9uKGUpe3ZhciB0O3N3aXRjaChlLnRvU3RyaW5nKCkubGVuZ3RoKXtjYXNlIDE6dD1cIjAwXCIrZTticmVhaztjYXNlIDI6dD1cIjBcIitlO2JyZWFrO2RlZmF1bHQ6dD1lfXJldHVybiB0fSh0LmdldE1pbGxpc2Vjb25kcygpKStcIjpcIn12YXIgUWk9e2FyZ3VtZW50czJTdHJpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoMT09PWUubGVuZ3RoKXQ9WGkoKStlWzBdO2Vsc2V7dD1YaSgpO2Zvcih2YXIgbj0wLG89ZS5sZW5ndGg7bjxvO24rKylmdShlW25dKT9tdShlW25dKT90Kz1UdShlW25dKTp0Kz1KU09OLnN0cmluZ2lmeShlW25dKTp0Kz1lW25dLHQrPVwiIFwifXJldHVybiB0fSxkZWJ1ZzpmdW5jdGlvbigpe2lmKHppPD0tMSl7dmFyIGU9dGhpcy5hcmd1bWVudHMyU3RyaW5nKGFyZ3VtZW50cyk7SGkuZGVidWcoZSl9fSxsb2c6ZnVuY3Rpb24oKXtpZih6aTw9MCl7dmFyIGU9dGhpcy5hcmd1bWVudHMyU3RyaW5nKGFyZ3VtZW50cyk7SGkubG9nKGUpfX0saW5mbzpmdW5jdGlvbigpe2lmKHppPD0xKXt2YXIgZT10aGlzLmFyZ3VtZW50czJTdHJpbmcoYXJndW1lbnRzKTtIaS5pbmZvKGUpfX0sd2FybjpmdW5jdGlvbigpe2lmKHppPD0yKXt2YXIgZT10aGlzLmFyZ3VtZW50czJTdHJpbmcoYXJndW1lbnRzKTtIaS53YXJuKGUpfX0sZXJyb3I6ZnVuY3Rpb24oKXtpZih6aTw9Myl7dmFyIGU9dGhpcy5hcmd1bWVudHMyU3RyaW5nKGFyZ3VtZW50cyk7SGkuZXJyb3IoZSl9fSx0aW1lOmZ1bmN0aW9uKGUpe0ppLnNldChlLEl1Lm5vdygpKX0sdGltZUVuZDpmdW5jdGlvbihlKXtpZihKaS5oYXMoZSkpe3ZhciB0PUl1Lm5vdygpLUppLmdldChlKTtyZXR1cm4gSmkuZGVsZXRlKGUpLHR9cmV0dXJuIEhpLndhcm4oXCLmnKrmib7liLDlr7nlupRsYWJlbDogXCIuY29uY2F0KGUsXCIsIOivt+WcqOiwg+eUqCBsb2dnZXIudGltZUVuZCDliY3vvIzosIPnlKggbG9nZ2VyLnRpbWVcIikpLDB9LHNldExldmVsOmZ1bmN0aW9uKGUpe2U8NCYmSGkubG9nKFhpKCkrXCJzZXQgbGV2ZWwgZnJvbSBcIit6aStcIiB0byBcIitlKSx6aT1lfSxnZXRMZXZlbDpmdW5jdGlvbigpe3JldHVybiB6aX19LFppPXtKUEc6MSxKUEVHOjEsR0lGOjIsUE5HOjMsQk1QOjQsVU5LTk9XTjoyNTV9LGV1PXtOSUNLOlwiVGFnX1Byb2ZpbGVfSU1fTmlja1wiLEdFTkRFUjpcIlRhZ19Qcm9maWxlX0lNX0dlbmRlclwiLEJJUlRIREFZOlwiVGFnX1Byb2ZpbGVfSU1fQmlydGhEYXlcIixMT0NBVElPTjpcIlRhZ19Qcm9maWxlX0lNX0xvY2F0aW9uXCIsU0VMRlNJR05BVFVSRTpcIlRhZ19Qcm9maWxlX0lNX1NlbGZTaWduYXR1cmVcIixBTExPV1RZUEU6XCJUYWdfUHJvZmlsZV9JTV9BbGxvd1R5cGVcIixMQU5HVUFHRTpcIlRhZ19Qcm9maWxlX0lNX0xhbmd1YWdlXCIsQVZBVEFSOlwiVGFnX1Byb2ZpbGVfSU1fSW1hZ2VcIixNRVNTQUdFU0VUVElOR1M6XCJUYWdfUHJvZmlsZV9JTV9Nc2dTZXR0aW5nc1wiLEFETUlORk9SQklEVFlQRTpcIlRhZ19Qcm9maWxlX0lNX0FkbWluRm9yYmlkVHlwZVwiLExFVkVMOlwiVGFnX1Byb2ZpbGVfSU1fTGV2ZWxcIixST0xFOlwiVGFnX1Byb2ZpbGVfSU1fUm9sZVwifSx0dT17R1JPVVA6XCJUYWdfU05TX0lNX0dyb3VwXCIsUkVNQVJLOlwiVGFnX1NOU19JTV9SZW1hcmtcIixBRERTT1VSQ0U6XCJUYWdfU05TX0lNX0FkZFNvdXJjZVwiLEFERFdPUkRJTkc6XCJUYWdfU05TX0lNX0FkZFdvcmRpbmdcIixBRERUSU1FOlwiVGFnX1NOU19JTV9BZGRUaW1lXCJ9LG51PXtVTktOT1dOOlwiR2VuZGVyX1R5cGVfVW5rbm93blwiLEZFTUFMRTpcIkdlbmRlcl9UeXBlX0ZlbWFsZVwiLE1BTEU6XCJHZW5kZXJfVHlwZV9NYWxlXCJ9LG91PXtOT05FOlwiQWRtaW5Gb3JiaWRfVHlwZV9Ob25lXCIsU0VORF9PVVQ6XCJBZG1pbkZvcmJpZF9UeXBlX1NlbmRPdXRcIn0scnU9e05FRURfQ09ORklSTTpcIkFsbG93VHlwZV9UeXBlX05lZWRDb25maXJtXCIsQUxMT1dfQU5ZOlwiQWxsb3dUeXBlX1R5cGVfQWxsb3dBbnlcIixERU5ZX0FOWTpcIkFsbG93VHlwZV9UeXBlX0RlbnlBbnlcIn0sYXU9XCJKb2luZWRTdWNjZXNzXCIsc3U9XCJXYWl0QWRtaW5BcHByb3ZhbFwiLGl1PVwiQFRHUyNfXCIsdXU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmaWxlXCI9PT12dShlKX0sY3U9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lJiYoXCJudW1iZXJcIj09dHlwZW9mIGUmJiFpc05hTihlLTApfHxcIm9iamVjdFwiPT09TW4oZSkmJmUuY29uc3RydWN0b3I9PT1OdW1iZXIpfSxsdT1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZX0sZHU9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lJiZcIm9iamVjdFwiPT09TW4oZSl9LHB1PWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPT1NbihlKXx8bnVsbD09PWUpcmV0dXJuITE7dmFyIHQ9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2lmKG51bGw9PT10KXJldHVybiEwO2Zvcih2YXIgbj10O251bGwhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobik7KW49T2JqZWN0LmdldFByb3RvdHlwZU9mKG4pO3JldHVybiB0PT09bn0sZ3U9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgQXJyYXkuaXNBcnJheT9BcnJheS5pc0FycmF5KGUpOlwiYXJyYXlcIj09PXZ1KGUpfSxodT1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZX0sZnU9ZnVuY3Rpb24oZSl7cmV0dXJuIGd1KGUpfHxkdShlKX0sX3U9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZX0sbXU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvcn0sdnU9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5tYXRjaCgvXlxcW29iamVjdCAoLiopXFxdJC8pWzFdLnRvTG93ZXJDYXNlKCl9LE11PWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciB0PWVbMF07cmV0dXJuIS9bXmEtekEtWjAtOV0vLnRlc3QodCl9LHl1PTA7RGF0ZS5ub3d8fChEYXRlLm5vdz1mdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfSk7dmFyIEl1PXtub3c6ZnVuY3Rpb24oKXswPT09eXUmJih5dT1EYXRlLm5vdygpLTEpO3ZhciBlPURhdGUubm93KCkteXU7cmV0dXJuIGU+NDI5NDk2NzI5NT8oeXUrPTQyOTQ5NjcyOTUsRGF0ZS5ub3coKS15dSk6ZX0sdXRjOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucm91bmQoRGF0ZS5ub3coKS8xZTMpfX0sRXU9ZnVuY3Rpb24gZSh0LG4sbyxyKXtpZighZnUodCl8fCFmdShuKSlyZXR1cm4gMDtmb3IodmFyIGEscz0wLGk9T2JqZWN0LmtleXMobiksdT0wLGM9aS5sZW5ndGg7dTxjO3UrKylpZihhPWlbdV0sIShodShuW2FdKXx8byYmby5pbmNsdWRlcyhhKSkpaWYoZnUodFthXSkmJmZ1KG5bYV0pKXMrPWUodFthXSxuW2FdLG8scik7ZWxzZXtpZihyJiZyLmluY2x1ZGVzKG5bYV0pKWNvbnRpbnVlO3RbYV0hPT1uW2FdJiYodFthXT1uW2FdLHMrPTEpfXJldHVybiBzfSxUdT1mdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSxbXCJtZXNzYWdlXCIsXCJjb2RlXCJdKX0sQXU9ZnVuY3Rpb24oZSl7aWYoMD09PWUubGVuZ3RoKXJldHVybiAwO2Zvcih2YXIgdD0wLG49MCxvPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmdm9pZCAwIT09ZG9jdW1lbnQuY2hhcmFjdGVyU2V0P2RvY3VtZW50LmNoYXJhY3RlclNldDpcIlVURi04XCI7dm9pZCAwIT09ZVt0XTspbis9ZVt0KytdLmNoYXJDb2RlQXRbdF08PTI1NT8xOiExPT09bz8zOjI7cmV0dXJuIG59LFN1PWZ1bmN0aW9uKGUpe3ZhciB0PWV8fDk5OTk5OTk5O3JldHVybiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqdCl9LER1PVwiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIixOdT1EdS5sZW5ndGgsQ3U9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlpZihlW25dPT09dClyZXR1cm4hMDtyZXR1cm4hMX0sa3U9e30sTHU9ZnVuY3Rpb24oKXtpZihwaSlyZXR1cm5cImh0dHBzOlwiO2lmKGdpJiZcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93KXJldHVyblwiaHR0cHM6XCI7dmFyIGU9d2luZG93LmxvY2F0aW9uLnByb3RvY29sO3JldHVybltcImh0dHA6XCIsXCJodHRwczpcIl0uaW5kZXhPZihlKTwwJiYoZT1cImh0dHA6XCIpLGV9LFJ1PWZ1bmN0aW9uKGUpe3JldHVybi0xPT09ZS5pbmRleE9mKFwiaHR0cDovL1wiKXx8LTE9PT1lLmluZGV4T2YoXCJodHRwczovL1wiKT9cImh0dHBzOi8vXCIrZTplLnJlcGxhY2UoL2h0dHBzfGh0dHAvLFwiaHR0cHNcIil9LE91PWZ1bmN0aW9uIGUodCl7aWYoMD09PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpLmxlbmd0aClyZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgbj1BcnJheS5pc0FycmF5KHQpP1tdOk9iamVjdC5jcmVhdGUobnVsbCksbz1cIlwiO2Zvcih2YXIgciBpbiB0KW51bGwhPT10W3JdP3ZvaWQgMCE9PXRbcl0/KG89TW4odFtyXSksW1wic3RyaW5nXCIsXCJudW1iZXJcIixcImZ1bmN0aW9uXCIsXCJib29sZWFuXCJdLmluZGV4T2Yobyk+PTA/bltyXT10W3JdOm5bcl09ZSh0W3JdKSk6bltyXT12b2lkIDA6bltyXT1udWxsO3JldHVybiBufTtmdW5jdGlvbiBHdShlLHQpe2d1KGUpJiZndSh0KT90LmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBuPXQua2V5LG89dC52YWx1ZSxyPWUuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5PT09bn0pKTtyP3IudmFsdWU9bzplLnB1c2goe2tleTpuLHZhbHVlOm99KX0pKTpRaS53YXJuKFwidXBkYXRlQ3VzdG9tRmllbGQgdGFyZ2V0IOaIliBzb3VyY2Ug5LiN5piv5pWw57uE77yM5b+955Wl5q2k5qyh5pu05paw44CCXCIpfXZhciBidT1mdW5jdGlvbihlKXtyZXR1cm4gZT09PVluLkdSUF9QVUJMSUN9LHd1PWZ1bmN0aW9uKGUpe3JldHVybiBlPT09WW4uR1JQX0FWQ0hBVFJPT019LFB1PWZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZSxuPWUuZ3JvdXBJRDtyZXR1cm4gdD09PVluLkdSUF9DT01NVU5JVFl8fFwiXCIuY29uY2F0KG4pLnN0YXJ0c1dpdGgoaXUpfSxVdT1mdW5jdGlvbihlKXtyZXR1cm4gbHUoZSkmJmUuc2xpY2UoMCwzKT09PVluLkNPTlZfQzJDfSxGdT1mdW5jdGlvbihlKXtyZXR1cm4gbHUoZSkmJmUuc2xpY2UoMCw1KT09PVluLkNPTlZfR1JPVVB9LHF1PWZ1bmN0aW9uKGUpe3JldHVybiBsdShlKSYmZT09PVluLkNPTlZfU1lTVEVNfTtmdW5jdGlvbiB4dShlLHQpe3ZhciBuPXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihvKXtuW29dPXQoZVtvXSxvKX0pKSxufWZ1bmN0aW9uIFZ1KGUpe3JldHVybiBwaT9uZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXtoaS5nZXRJbWFnZUluZm8oe3NyYzplLHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dCh7d2lkdGg6ZS53aWR0aCxoZWlnaHQ6ZS5oZWlnaHR9KX0sZmFpbDpmdW5jdGlvbigpe3Qoe3dpZHRoOjAsaGVpZ2h0OjB9KX19KX0pKTpOaSYmOT09PUNpP1Byb21pc2UucmVzb2x2ZSh7d2lkdGg6MCxoZWlnaHQ6MH0pOm5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3ZhciBvPW5ldyBJbWFnZTtvLm9ubG9hZD1mdW5jdGlvbigpe3Qoe3dpZHRoOnRoaXMud2lkdGgsaGVpZ2h0OnRoaXMuaGVpZ2h0fSksbz1udWxsfSxvLm9uZXJyb3I9ZnVuY3Rpb24oKXt0KHt3aWR0aDowLGhlaWdodDowfSksbz1udWxsfSxvLnNyYz1lfSkpfWZ1bmN0aW9uIEt1KCl7ZnVuY3Rpb24gZSgpe3JldHVybig2NTUzNiooMStNYXRoLnJhbmRvbSgpKXwwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpfXJldHVyblwiXCIuY29uY2F0KGUoKStlKCkpLmNvbmNhdChlKCkpLmNvbmNhdChlKCkpLmNvbmNhdChlKCkpLmNvbmNhdChlKCkpLmNvbmNhdChlKCkpLmNvbmNhdChlKCkpfWZ1bmN0aW9uIEJ1KCl7dmFyIGU9XCJ1bmtub3duXCI7aWYoT2kmJihlPVwibWFjXCIpLFJpJiYoZT1cIndpbmRvd3NcIiksSWkmJihlPVwiaW9zXCIpLFRpJiYoZT1cImFuZHJvaWRcIikscGkpdHJ5e3ZhciB0PWhpLmdldFN5c3RlbUluZm9TeW5jKCkucGxhdGZvcm07dm9pZCAwIT09dCYmKGU9dCl9Y2F0Y2goekkpe31yZXR1cm4gZX1mdW5jdGlvbiBIdShlKXt2YXIgdD1lLm9yaWdpblVybCxuPXZvaWQgMD09PXQ/dm9pZCAwOnQsbz1lLm9yaWdpbldpZHRoLHI9ZS5vcmlnaW5IZWlnaHQsYT1lLm1pbixzPXZvaWQgMD09PWE/MTk4OmEsaT1wYXJzZUludChvKSx1PXBhcnNlSW50KHIpLGM9e3VybDp2b2lkIDAsd2lkdGg6MCxoZWlnaHQ6MH07aWYoKGk8PXU/aTp1KTw9cyljLnVybD1uLGMud2lkdGg9aSxjLmhlaWdodD11O2Vsc2V7dTw9aT8oYy53aWR0aD1NYXRoLmNlaWwoaSpzL3UpLGMuaGVpZ2h0PXMpOihjLndpZHRoPXMsYy5oZWlnaHQ9TWF0aC5jZWlsKHUqcy9pKSk7dmFyIGw9biYmbi5pbmRleE9mKFwiP1wiKT4tMT9cIlwiLmNvbmNhdChuLFwiJlwiKTpcIlwiLmNvbmNhdChuLFwiP1wiKTtjLnVybD1cIlwiLmNvbmNhdChsLDE5OD09PXM/XCJpbWFnZVZpZXcyLzMvdy8xOTgvaC8xOThcIjpcImltYWdlVmlldzIvMy93LzcyMC9oLzcyMFwiKX1yZXR1cm4gaHUobik/T24oYyxbXCJ1cmxcIl0pOmN9ZnVuY3Rpb24ganUoZSl7dmFyIHQ9ZVsyXTtlWzJdPWVbMV0sZVsxXT10O2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWVbbl0uc2V0VHlwZShuKX1mdW5jdGlvbiBXdShlKXt2YXIgdD1lLnNlcnZjbWQ7cmV0dXJuIHQuc2xpY2UodC5pbmRleE9mKFwiLlwiKSsxKX1mdW5jdGlvbiBZdShlLHQpe3JldHVybiBNYXRoLnJvdW5kKE51bWJlcihlKSpNYXRoLnBvdygxMCx0KSkvTWF0aC5wb3coMTAsdCl9ZnVuY3Rpb24gJHUoZSx0KXtyZXR1cm4gZS5pbmNsdWRlcyh0KX1mdW5jdGlvbiB6dShlLHQpe3JldHVybiBlLmluY2x1ZGVzKHQpfXZhciBKdT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIFh1KGUpe2lmKG51bGw9PWUpcmV0dXJuITA7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBlKXJldHVybiExO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXJldHVybiAwPT09ZTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gMD09PWUubGVuZ3RoO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpcmV0dXJuIDA9PT1lLmxlbmd0aDtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiAwPT09ZS5sZW5ndGg7aWYoZSBpbnN0YW5jZW9mIEVycm9yKXJldHVyblwiXCI9PT1lLm1lc3NhZ2U7aWYocHUoZSkpe2Zvcih2YXIgdCBpbiBlKWlmKEp1LmNhbGwoZSx0KSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hKFwibWFwXCIhPT12dShlKSYmIWZ1bmN0aW9uKGUpe3JldHVyblwic2V0XCI9PT12dShlKX0oZSkmJiF1dShlKSkmJjA9PT1lLnNpemV9ZnVuY3Rpb24gUXUoZSx0LG4pe2lmKHZvaWQgMD09PXQpcmV0dXJuITA7dmFyIG89ITA7aWYoXCJvYmplY3RcIj09PXZvKHQpLnRvTG93ZXJDYXNlKCkpT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZnVuY3Rpb24ocil7dmFyIGE9MT09PWUubGVuZ3RoP2VbMF1bcl06dm9pZCAwO289ISFadShhLHRbcl0sbixyKSYmb30pKTtlbHNlIGlmKFwiYXJyYXlcIj09PXZvKHQpLnRvTG93ZXJDYXNlKCkpZm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspbz0hIVp1KGVbcl0sdFtyXSxuLHRbcl0ubmFtZSkmJm87aWYobylyZXR1cm4gbzt0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbXMgdmFsaWRhdGUgZmFpbGVkLlwiKX1mdW5jdGlvbiBadShlLHQsbixvKXtpZih2b2lkIDA9PT10KXJldHVybiEwO3ZhciByPSEwO3JldHVybiB0LnJlcXVpcmVkJiZYdShlKSYmKEhpLmVycm9yKFwiVElNIFtcIi5jb25jYXQobiwnXSBNaXNzaW5nIHJlcXVpcmVkIHBhcmFtczogXCInKS5jb25jYXQobywnXCIuJykpLHI9ITEpLFh1KGUpfHx2byhlKS50b0xvd2VyQ2FzZSgpPT09dC50eXBlLnRvTG93ZXJDYXNlKCl8fChIaS5lcnJvcihcIlRJTSBbXCIuY29uY2F0KG4sJ10gSW52YWxpZCBwYXJhbXM6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBcIicpLmNvbmNhdChvLCdcIi5FeHBlY3RlZCAnKS5jb25jYXQodC50eXBlLFwiLlwiKSkscj0hMSksdC52YWxpZGF0b3ImJiF0LnZhbGlkYXRvcihlKSYmKEhpLmVycm9yKFwiVElNIFtcIi5jb25jYXQobixcIl0gSW52YWxpZCBwYXJhbXM6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwYXJhbXMuXCIpKSxyPSExKSxyfXZhciBlYz17ZjpxZX0sdGM9Qy5mLG5jPUhlLmZvckVhY2gsb2M9SChcImhpZGRlblwiKSxyYz1xZShcInRvUHJpbWl0aXZlXCIpLGFjPVEuc2V0LHNjPVEuZ2V0dGVyRm9yKFwiU3ltYm9sXCIpLGljPU9iamVjdC5wcm90b3R5cGUsdWM9by5TeW1ib2wsY2M9bmUoXCJKU09OXCIsXCJzdHJpbmdpZnlcIiksbGM9Uy5mLGRjPUMuZixwYz1tci5mLGdjPXUuZixoYz1xKFwic3ltYm9sc1wiKSxmYz1xKFwib3Atc3ltYm9sc1wiKSxfYz1xKFwic3RyaW5nLXRvLXN5bWJvbC1yZWdpc3RyeVwiKSxtYz1xKFwic3ltYm9sLXRvLXN0cmluZy1yZWdpc3RyeVwiKSx2Yz1xKFwid2tzXCIpLE1jPW8uUU9iamVjdCx5Yz0hTWN8fCFNYy5wcm90b3R5cGV8fCFNYy5wcm90b3R5cGUuZmluZENoaWxkLEljPWEmJnIoKGZ1bmN0aW9uKCl7cmV0dXJuIDchPWt0KGRjKHt9LFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZGModGhpcyxcImFcIix7dmFsdWU6N30pLmF9fSkpLmF9KSk/ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPWxjKGljLHQpO28mJmRlbGV0ZSBpY1t0XSxkYyhlLHQsbiksbyYmZSE9PWljJiZkYyhpYyx0LG8pfTpkYyxFYz1mdW5jdGlvbihlLHQpe3ZhciBuPWhjW2VdPWt0KHVjLnByb3RvdHlwZSk7cmV0dXJuIGFjKG4se3R5cGU6XCJTeW1ib2xcIix0YWc6ZSxkZXNjcmlwdGlvbjp0fSksYXx8KG4uZGVzY3JpcHRpb249dCksbn0sVGM9d2U/ZnVuY3Rpb24oZSl7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QoZSlpbnN0YW5jZW9mIHVjfSxBYz1mdW5jdGlvbihlLHQsbil7ZT09PWljJiZBYyhmYyx0LG4pLEQoZSk7dmFyIG89bSh0LCEwKTtyZXR1cm4gRChuKSxNKGhjLG8pPyhuLmVudW1lcmFibGU/KE0oZSxvYykmJmVbb2NdW29dJiYoZVtvY11bb109ITEpLG49a3Qobix7ZW51bWVyYWJsZTpjKDAsITEpfSkpOihNKGUsb2MpfHxkYyhlLG9jLGMoMSx7fSkpLGVbb2NdW29dPSEwKSxJYyhlLG8sbikpOmRjKGUsbyxuKX0sU2M9ZnVuY3Rpb24oZSx0KXtEKGUpO3ZhciBuPWYodCksbz1FdChuKS5jb25jYXQoa2MobikpO3JldHVybiBuYyhvLChmdW5jdGlvbih0KXthJiYhRGMuY2FsbChuLHQpfHxBYyhlLHQsblt0XSl9KSksZX0sRGM9ZnVuY3Rpb24oZSl7dmFyIHQ9bShlLCEwKSxuPWdjLmNhbGwodGhpcyx0KTtyZXR1cm4hKHRoaXM9PT1pYyYmTShoYyx0KSYmIU0oZmMsdCkpJiYoIShufHwhTSh0aGlzLHQpfHwhTShoYyx0KXx8TSh0aGlzLG9jKSYmdGhpc1tvY11bdF0pfHxuKX0sTmM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1mKGUpLG89bSh0LCEwKTtpZihuIT09aWN8fCFNKGhjLG8pfHxNKGZjLG8pKXt2YXIgcj1sYyhuLG8pO3JldHVybiFyfHwhTShoYyxvKXx8TShuLG9jKSYmbltvY11bb118fChyLmVudW1lcmFibGU9ITApLHJ9fSxDYz1mdW5jdGlvbihlKXt2YXIgdD1wYyhmKGUpKSxuPVtdO3JldHVybiBuYyh0LChmdW5jdGlvbihlKXtNKGhjLGUpfHxNKGosZSl8fG4ucHVzaChlKX0pKSxufSxrYz1mdW5jdGlvbihlKXt2YXIgdD1lPT09aWMsbj1wYyh0P2ZjOmYoZSkpLG89W107cmV0dXJuIG5jKG4sKGZ1bmN0aW9uKGUpeyFNKGhjLGUpfHx0JiYhTShpYyxlKXx8by5wdXNoKGhjW2VdKX0pKSxvfTtpZihiZXx8KFooKHVjPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIHVjKXRocm93IFR5cGVFcnJvcihcIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvclwiKTt2YXIgZT1hcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/U3RyaW5nKGFyZ3VtZW50c1swXSk6dm9pZCAwLHQ9SyhlKSxuPWZ1bmN0aW9uKGUpe3RoaXM9PT1pYyYmbi5jYWxsKGZjLGUpLE0odGhpcyxvYykmJk0odGhpc1tvY10sdCkmJih0aGlzW29jXVt0XT0hMSksSWModGhpcyx0LGMoMSxlKSl9O3JldHVybiBhJiZ5YyYmSWMoaWMsdCx7Y29uZmlndXJhYmxlOiEwLHNldDpufSksRWModCxlKX0pLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHNjKHRoaXMpLnRhZ30pKSxaKHVjLFwid2l0aG91dFNldHRlclwiLChmdW5jdGlvbihlKXtyZXR1cm4gRWMoSyhlKSxlKX0pKSx1LmY9RGMsQy5mPUFjLFMuZj1OYyxtZS5mPW1yLmY9Q2MsdmUuZj1rYyxlYy5mPWZ1bmN0aW9uKGUpe3JldHVybiBFYyhxZShlKSxlKX0sYSYmKGRjKHVjLnByb3RvdHlwZSxcImRlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gc2ModGhpcykuZGVzY3JpcHRpb259fSksWihpYyxcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsRGMse3Vuc2FmZTohMH0pKSksa2Uoe2dsb2JhbDohMCx3cmFwOiEwLGZvcmNlZDohYmUsc2hhbTohYmV9LHtTeW1ib2w6dWN9KSxuYyhFdCh2YyksKGZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgdD1lZS5TeW1ib2x8fChlZS5TeW1ib2w9e30pO00odCxlKXx8dGModCxlLHt2YWx1ZTplYy5mKGUpfSl9KGUpfSkpLGtlKHt0YXJnZXQ6XCJTeW1ib2xcIixzdGF0OiEwLGZvcmNlZDohYmV9LHtmb3I6ZnVuY3Rpb24oZSl7dmFyIHQ9U3RyaW5nKGUpO2lmKE0oX2MsdCkpcmV0dXJuIF9jW3RdO3ZhciBuPXVjKHQpO3JldHVybiBfY1t0XT1uLG1jW25dPXQsbn0sa2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKCFUYyhlKSl0aHJvdyBUeXBlRXJyb3IoZStcIiBpcyBub3QgYSBzeW1ib2xcIik7aWYoTShtYyxlKSlyZXR1cm4gbWNbZV19LHVzZVNldHRlcjpmdW5jdGlvbigpe3ljPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXt5Yz0hMX19KSxrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6IWJlLHNoYW06IWF9LHtjcmVhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9rdChlKTpTYyhrdChlKSx0KX0sZGVmaW5lUHJvcGVydHk6QWMsZGVmaW5lUHJvcGVydGllczpTYyxnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6TmN9KSxrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6IWJlfSx7Z2V0T3duUHJvcGVydHlOYW1lczpDYyxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6a2N9KSxrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6cigoZnVuY3Rpb24oKXt2ZS5mKDEpfSkpfSx7Z2V0T3duUHJvcGVydHlTeW1ib2xzOmZ1bmN0aW9uKGUpe3JldHVybiB2ZS5mKE9lKGUpKX19KSxjYyl7dmFyIExjPSFiZXx8cigoZnVuY3Rpb24oKXt2YXIgZT11YygpO3JldHVyblwiW251bGxdXCIhPWNjKFtlXSl8fFwie31cIiE9Y2Moe2E6ZX0pfHxcInt9XCIhPWNjKE9iamVjdChlKSl9KSk7a2Uoe3RhcmdldDpcIkpTT05cIixzdGF0OiEwLGZvcmNlZDpMY30se3N0cmluZ2lmeTpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBvLHI9W2VdLGE9MTthcmd1bWVudHMubGVuZ3RoPmE7KXIucHVzaChhcmd1bWVudHNbYSsrXSk7aWYobz10LChfKHQpfHx2b2lkIDAhPT1lKSYmIVRjKGUpKXJldHVybiBHZSh0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBvJiYodD1vLmNhbGwodGhpcyxlLHQpKSwhVGModCkpcmV0dXJuIHR9KSxyWzFdPXQsY2MuYXBwbHkobnVsbCxyKX19KX11Yy5wcm90b3R5cGVbcmNdfHxrKHVjLnByb3RvdHlwZSxyYyx1Yy5wcm90b3R5cGUudmFsdWVPZiksdG4odWMsXCJTeW1ib2xcIiksaltvY109ITA7dmFyIFJjPUMuZixPYz1vLlN5bWJvbDtpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYyYmKCEoXCJkZXNjcmlwdGlvblwiaW4gT2MucHJvdG90eXBlKXx8dm9pZCAwIT09T2MoKS5kZXNjcmlwdGlvbikpe3ZhciBHYz17fSxiYz1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg8MXx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3ZvaWQgMDpTdHJpbmcoYXJndW1lbnRzWzBdKSx0PXRoaXMgaW5zdGFuY2VvZiBiYz9uZXcgT2MoZSk6dm9pZCAwPT09ZT9PYygpOk9jKGUpO3JldHVyblwiXCI9PT1lJiYoR2NbdF09ITApLHR9O3llKGJjLE9jKTt2YXIgd2M9YmMucHJvdG90eXBlPU9jLnByb3RvdHlwZTt3Yy5jb25zdHJ1Y3Rvcj1iYzt2YXIgUGM9d2MudG9TdHJpbmcsVWM9XCJTeW1ib2wodGVzdClcIj09U3RyaW5nKE9jKFwidGVzdFwiKSksRmM9L15TeW1ib2xcXCgoLiopXFwpW14pXSskLztSYyh3YyxcImRlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT1fKHRoaXMpP3RoaXMudmFsdWVPZigpOnRoaXMsdD1QYy5jYWxsKGUpO2lmKE0oR2MsZSkpcmV0dXJuXCJcIjt2YXIgbj1VYz90LnNsaWNlKDcsLTEpOnQucmVwbGFjZShGYyxcIiQxXCIpO3JldHVyblwiXCI9PT1uP3ZvaWQgMDpufX0pLGtlKHtnbG9iYWw6ITAsZm9yY2VkOiEwfSx7U3ltYm9sOmJjfSl9dmFyIHFjPXtVTlNFTkQ6XCJ1blNlbmRcIixTVUNDRVNTOlwic3VjY2Vzc1wiLEZBSUw6XCJmYWlsXCJ9LHhjPXtOT1RfU1RBUlQ6XCJub3RTdGFydFwiLFBFTkRJTkc6XCJwZW5nZGluZ1wiLFJFU09MVkVEOlwicmVzb2x2ZWRcIixSRUpFQ1RFRDpcInJlamVjdGVkXCJ9LFZjPWZ1bmN0aW9uKGUpe3JldHVybiEhZSYmKCEhKFV1KGUpfHxGdShlKXx8cXUoZSkpfHwoY29uc29sZS53YXJuKFwi6Z2e5rOV55qE5Lya6K+dIElEOlwiLmNvbmNhdChlLFwi44CC5Lya6K+dIElEIOe7hOaIkOaWueW8j++8mkMyQyArIHVzZXJJRO+8iOWNleiBiu+8iUdST1VQICsgZ3JvdXBJRO+8iOe+pOiBiu+8iUBUSU0jU1lTVEVN77yI57O757uf6YCa55+l5Lya6K+d77yJXCIpKSwhMSkpfSxLYz1cIuivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjXCIsQmM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyYW0/XCJcIi5jb25jYXQoZS5hcGksXCIgXCIpLmNvbmNhdChlLnBhcmFtLFwiIFwiKS5jb25jYXQoZS5kZXNjLFwi44CCXCIpLmNvbmNhdChLYykuY29uY2F0KGUuYXBpKTpcIlwiLmNvbmNhdChlLmFwaSxcIiBcIikuY29uY2F0KGUuZGVzYyxcIuOAglwiKS5jb25jYXQoS2MpLmNvbmNhdChlLmFwaSl9LEhjPXt0eXBlOlwiU3RyaW5nXCIscmVxdWlyZWQ6ITB9LGpjPXt0eXBlOlwiQXJyYXlcIixyZXF1aXJlZDohMH0sV2M9e3R5cGU6XCJPYmplY3RcIixyZXF1aXJlZDohMH0sWWM9e2xvZ2luOnt1c2VySUQ6SGMsdXNlclNpZzpIY30sYWRkVG9CbGFja2xpc3Q6e3VzZXJJRExpc3Q6amN9LG9uOlt7bmFtZTpcImV2ZW50TmFtZVwiLHR5cGU6XCJTdHJpbmdcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJjAhPT1lLmxlbmd0aHx8KGNvbnNvbGUud2FybihCYyh7YXBpOlwib25cIixwYXJhbTpcImV2ZW50TmFtZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5n77yM5LiU5LiN6IO95Li656m6XCJ9KSksITEpfX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KGNvbnNvbGUud2FybihCYyh7YXBpOlwib25cIixwYXJhbTpcImhhbmRsZXJcIixkZXNjOlwi5Y+C5pWw5b+F6aG75Li6IEZ1bmN0aW9uXCJ9KSksITEpOihcIlwiPT09ZS5uYW1lJiZjb25zb2xlLndhcm4oXCJvbiDmjqXlj6PnmoQgaGFuZGxlciDlj4LmlbDmjqjojZDkvb/nlKjlhbflkI3lh73mlbDjgILlhbflkI3lh73mlbDlj6/ku6Xkvb/nlKggb2ZmIOaOpeWPo+WPlua2iOiuoumYhe+8jOWMv+WQjeWHveaVsOaXoOazleWPlua2iOiuoumYheOAglwiKSwhMCl9fV0sb25jZTpbe25hbWU6XCJldmVudE5hbWVcIix0eXBlOlwiU3RyaW5nXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiYwIT09ZS5sZW5ndGh8fChjb25zb2xlLndhcm4oQmMoe2FwaTpcIm9uY2VcIixwYXJhbTpcImV2ZW50TmFtZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5n77yM5LiU5LiN6IO95Li656m6XCJ9KSksITEpfX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KGNvbnNvbGUud2FybihCYyh7YXBpOlwib25jZVwiLHBhcmFtOlwiaGFuZGxlclwiLGRlc2M6XCLlj4LmlbDlv4XpobvkuLogRnVuY3Rpb25cIn0pKSwhMSk6KFwiXCI9PT1lLm5hbWUmJmNvbnNvbGUud2FybihcIm9uY2Ug5o6l5Y+j55qEIGhhbmRsZXIg5Y+C5pWw5o6o6I2Q5L2/55So5YW35ZCN5Ye95pWw44CCXCIpLCEwKX19XSxvZmY6W3tuYW1lOlwiZXZlbnROYW1lXCIsdHlwZTpcIlN0cmluZ1wiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmMCE9PWUubGVuZ3RofHwoY29uc29sZS53YXJuKEJjKHthcGk6XCJvZmZcIixwYXJhbTpcImV2ZW50TmFtZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5n77yM5LiU5LiN6IO95Li656m6XCJ9KSksITEpfX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KGNvbnNvbGUud2FybihCYyh7YXBpOlwib2ZmXCIscGFyYW06XCJoYW5kbGVyXCIsZGVzYzpcIuWPguaVsOW/hemhu+S4uiBGdW5jdGlvblwifSkpLCExKTooXCJcIj09PWUubmFtZSYmY29uc29sZS53YXJuKFwib2ZmIOaOpeWPo+aXoOazleS4uuWMv+WQjeWHveaVsOWPlua2iOebkeWQrOS6i+S7tuOAglwiKSwhMCl9fV0sc2VuZE1lc3NhZ2U6W1NuKHtuYW1lOlwibWVzc2FnZVwifSxXYyldLGdldE1lc3NhZ2VMaXN0Ontjb252ZXJzYXRpb25JRDpTbih7fSxIYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBWYyhlKX19KSxuZXh0UmVxTWVzc2FnZUlEOnt0eXBlOlwiU3RyaW5nXCJ9LGNvdW50Ont0eXBlOlwiTnVtYmVyXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiEoIWh1KGUpJiYhL15bMS05XVswLTldKiQvLnRlc3QoZSkpfHwoY29uc29sZS53YXJuKEJjKHthcGk6XCJnZXRNZXNzYWdlTGlzdFwiLHBhcmFtOlwiY291bnRcIixkZXNjOlwi5b+F6aG75Li65q2j5pW05pWwXCJ9KSksITEpfX19LHNldE1lc3NhZ2VSZWFkOntjb252ZXJzYXRpb25JRDpTbih7fSxIYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBWYyhlKX19KX0sc2V0QWxsTWVzc2FnZVJlYWQ6e3Njb3BlOnt0eXBlOlwiU3RyaW5nXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiFlfHwtMSE9PVtZbi5SRUFEX0FMTF9DMkNfTVNHLFluLlJFQURfQUxMX0dST1VQX01TRyxZbi5SRUFEX0FMTF9NU0ddLmluZGV4T2YoZSl8fChjb25zb2xlLndhcm4oQmMoe2FwaTpcInNldEFsbE1lc3NhZ2VSZWFkXCIscGFyYW06XCJzY29wZVwiLGRlc2M6XCLlj5blgLzlv4XpobvkuLogVElNLlRZUEVTLlJFQURfQUxMX0MyQ19NU0csIFRJTS5UWVBFUy5SRUFEX0FMTF9HUk9VUF9NU0cg5oiWIFRJTS5UWVBFUy5SRUFEX0FMTF9NU0dcIn0pKSwhMSl9fX0sZ2V0Q29udmVyc2F0aW9uUHJvZmlsZTpbU24oe25hbWU6XCJjb252ZXJzYXRpb25JRFwifSxIYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBWYyhlKX19KV0sZGVsZXRlQ29udmVyc2F0aW9uOltTbih7bmFtZTpcImNvbnZlcnNhdGlvbklEXCJ9LEhjLHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIFZjKGUpfX0pXSxwaW5Db252ZXJzYXRpb246e2NvbnZlcnNhdGlvbklEOlNuKHt9LEhjLHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIFZjKGUpfX0pLGlzUGlubmVkOlNuKHt9LHt0eXBlOlwiQm9vbGVhblwiLHJlcXVpcmVkOiEwfSl9LGdldENvbnZlcnNhdGlvbkxpc3Q6W3tuYW1lOlwib3B0aW9uc1wiLHR5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hIWh1KGUpfHwoMCE9PWUubGVuZ3RofHwoY29uc29sZS53YXJuKEJjKHthcGk6XCJnZXRDb252ZXJzYXRpb25MaXN0XCIsZGVzYzpcIuiOt+WPluaMh+WumuS8muivneaXtuS4jeiDveS8oOWFpeepuuaVsOe7hFwifSkpLCExKSl9fV0sZ2V0R3JvdXBMaXN0Ontncm91cFByb2ZpbGVGaWx0ZXI6e3R5cGU6XCJBcnJheVwifX0sZ2V0R3JvdXBQcm9maWxlOntncm91cElEOkhjLGdyb3VwQ3VzdG9tRmllbGRGaWx0ZXI6e3R5cGU6XCJBcnJheVwifSxtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjp7dHlwZTpcIkFycmF5XCJ9fSxnZXRHcm91cFByb2ZpbGVBZHZhbmNlOntncm91cElETGlzdDpqY30sY3JlYXRlR3JvdXA6e25hbWU6SGN9LGpvaW5Hcm91cDp7Z3JvdXBJRDpIYyx0eXBlOnt0eXBlOlwiU3RyaW5nXCJ9LGFwcGx5TWVzc2FnZTp7dHlwZTpcIlN0cmluZ1wifX0scXVpdEdyb3VwOltTbih7bmFtZTpcImdyb3VwSURcIn0sSGMpXSxoYW5kbGVBcHBsaWNhdGlvbjp7bWVzc2FnZTpXYyxoYW5kbGVBY3Rpb246SGMsaGFuZGxlTWVzc2FnZTp7dHlwZTpcIlN0cmluZ1wifX0sY2hhbmdlR3JvdXBPd25lcjp7Z3JvdXBJRDpIYyxuZXdPd25lcklEOkhjfSx1cGRhdGVHcm91cFByb2ZpbGU6e2dyb3VwSUQ6SGMsbXV0ZUFsbE1lbWJlcnM6e3R5cGU6XCJCb29sZWFuXCJ9fSxkaXNtaXNzR3JvdXA6W1NuKHtuYW1lOlwiZ3JvdXBJRFwifSxIYyldLHNlYXJjaEdyb3VwQnlJRDpbU24oe25hbWU6XCJncm91cElEXCJ9LEhjKV0saW5pdEdyb3VwQXR0cmlidXRlczp7Z3JvdXBJRDpIYyxncm91cEF0dHJpYnV0ZXM6U24oe30sV2Mse3ZhbGlkYXRvcjpmdW5jdGlvbihlKXt2YXIgdD0hMDtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7aWYoIWx1KGVbbl0pKXJldHVybiBjb25zb2xlLndhcm4oQmMoe2FwaTpcImluaXRHcm91cEF0dHJpYnV0ZXNcIixkZXNjOlwi576k5bGe5oCnIHZhbHVlIOW/hemhu+aYr+Wtl+espuS4slwifSkpLHQ9ITF9KSksdH19KX0sc2V0R3JvdXBBdHRyaWJ1dGVzOntncm91cElEOkhjLGdyb3VwQXR0cmlidXRlczpTbih7fSxXYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3ZhciB0PSEwO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXtpZighbHUoZVtuXSkpcmV0dXJuIGNvbnNvbGUud2FybihCYyh7YXBpOlwic2V0R3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpcIue+pOWxnuaApyB2YWx1ZSDlv4XpobvmmK/lrZfnrKbkuLJcIn0pKSx0PSExfSkpLHR9fSl9LGRlbGV0ZUdyb3VwQXR0cmlidXRlczp7Z3JvdXBJRDpIYyxrZXlMaXN0Ont0eXBlOlwiQXJyYXlcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7aWYoaHUoZSkpcmV0dXJuIGNvbnNvbGUud2FybihCYyh7YXBpOlwiZGVsZXRlR3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpcIue8uuWwkeW/heWhq+WPguaVsO+8mmtleUxpc3RcIn0pKSwhMTtpZighZ3UoZSkpcmV0dXJuITE7aWYoIVh1KGUpKXt2YXIgdD0hMDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZighbHUoZSkpcmV0dXJuIGNvbnNvbGUud2FybihCYyh7YXBpOlwiZGVsZXRlR3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpcIue+pOWxnuaApyBrZXkg5b+F6aG75piv5a2X56ym5LiyXCJ9KSksdD0hMX0pKSx0fXJldHVybiEwfX19LGdldEdyb3VwQXR0cmlidXRlczp7Z3JvdXBJRDpIYyxrZXlMaXN0Ont0eXBlOlwiQXJyYXlcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7aWYoaHUoZSkpcmV0dXJuIGNvbnNvbGUud2FybihCYyh7YXBpOlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpcIue8uuWwkeW/heWhq+WPguaVsO+8mmtleUxpc3RcIn0pKSwhMTtpZighZ3UoZSkpcmV0dXJuITE7aWYoIVh1KGUpKXt2YXIgdD0hMDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZighbHUoZSkpcmV0dXJuIGNvbnNvbGUud2FybihCYyh7YXBpOlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpcIue+pOWxnuaApyBrZXkg5b+F6aG75piv5a2X56ym5LiyXCJ9KSksdD0hMX0pKSx0fXJldHVybiEwfX19LGdldEdyb3VwTWVtYmVyTGlzdDp7Z3JvdXBJRDpIYyxjb3VudDp7dHlwZTpcIk51bWJlclwifX0sZ2V0R3JvdXBNZW1iZXJQcm9maWxlOntncm91cElEOkhjLHVzZXJJRExpc3Q6amMsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6e3R5cGU6XCJBcnJheVwifX0sYWRkR3JvdXBNZW1iZXI6e2dyb3VwSUQ6SGMsdXNlcklETGlzdDpqY30sc2V0R3JvdXBNZW1iZXJSb2xlOntncm91cElEOkhjLHVzZXJJRDpIYyxyb2xlOkhjfSxzZXRHcm91cE1lbWJlck11dGVUaW1lOntncm91cElEOkhjLHVzZXJJRDpIYyxtdXRlVGltZTp7dHlwZTpcIk51bWJlclwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gZT49MH19fSxzZXRHcm91cE1lbWJlck5hbWVDYXJkOntncm91cElEOkhjLHVzZXJJRDp7dHlwZTpcIlN0cmluZ1wifSxuYW1lQ2FyZDp7dHlwZTpcIlN0cmluZ1wiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gbHUoZSk/KGUubGVuZ3RoLCEwKTooY29uc29sZS53YXJuKEJjKHthcGk6XCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIscGFyYW06XCJuYW1lQ2FyZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpfX19LHNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGQ6e2dyb3VwSUQ6SGMsdXNlcklEOnt0eXBlOlwiU3RyaW5nXCJ9LG1lbWJlckN1c3RvbUZpZWxkOmpjfSxkZWxldGVHcm91cE1lbWJlcjp7Z3JvdXBJRDpIY30sY3JlYXRlVGV4dE1lc3NhZ2U6e3RvOkhjLGNvbnZlcnNhdGlvblR5cGU6SGMscGF5bG9hZDpTbih7fSxXYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBwdShlKT9sdShlLnRleHQpPzAhPT1lLnRleHQubGVuZ3RofHwoY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVUZXh0TWVzc2FnZVwiLGRlc2M6XCLmtojmga/lhoXlrrnkuI3og73kuLrnqbpcIn0pKSwhMSk6KGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlVGV4dE1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQudGV4dFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOihjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZVRleHRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMSl9fSl9LGNyZWF0ZVRleHRBdE1lc3NhZ2U6e3RvOkhjLGNvbnZlcnNhdGlvblR5cGU6SGMscGF5bG9hZDpTbih7fSxXYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBwdShlKT9sdShlLnRleHQpPzA9PT1lLnRleHQubGVuZ3RoPyhjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZVRleHRBdE1lc3NhZ2VcIixkZXNjOlwi5raI5oGv5YaF5a655LiN6IO95Li656m6XCJ9KSksITEpOiEoZS5hdFVzZXJMaXN0JiYhZ3UoZS5hdFVzZXJMaXN0KSl8fChjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZVRleHRBdE1lc3NhZ2VcIixkZXNjOlwicGF5bG9hZC5hdFVzZXJMaXN0IOexu+Wei+W/hemhu+S4uuaVsOe7hFwifSkpLCExKTooY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLnRleHRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ1wifSkpLCExKTooY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMSl9fSl9LGNyZWF0ZUN1c3RvbU1lc3NhZ2U6e3RvOkhjLGNvbnZlcnNhdGlvblR5cGU6SGMscGF5bG9hZDpTbih7fSxXYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBwdShlKT9lLmRhdGEmJiFsdShlLmRhdGEpPyhjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZGF0YVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOmUuZGVzY3JpcHRpb24mJiFsdShlLmRlc2NyaXB0aW9uKT8oY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVDdXN0b21NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmRlc2NyaXB0aW9uXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSwhMSk6IShlLmV4dGVuc2lvbiYmIWx1KGUuZXh0ZW5zaW9uKSl8fChjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZXh0ZW5zaW9uXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSwhMSk6KGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlQ3VzdG9tTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITEpfX0pfSxjcmVhdGVJbWFnZU1lc3NhZ2U6e3RvOkhjLGNvbnZlcnNhdGlvblR5cGU6SGMscGF5bG9hZDpTbih7fSxXYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe2lmKCFwdShlKSlyZXR1cm4gY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExO2lmKGh1KGUuZmlsZSkpcmV0dXJuIGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5LiN6IO95Li6IHVuZGVmaW5lZFwifSkpLCExO2lmKGdpKXtpZighKGUuZmlsZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fHV1KGUuZmlsZSkpKXJldHVybiBwdShlLmZpbGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pPzAhPT1lLmZpbGUudGVtcEZpbGVQYXRocy5sZW5ndGgmJjAhPT1lLmZpbGUudGVtcEZpbGVzLmxlbmd0aHx8KGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5oKo5rKh5pyJ6YCJ5oup5paH5Lu277yM5peg5rOV5Y+R6YCBXCJ9KSksITEpOihjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuexu+Wei+W/hemhu+aYryBIVE1MSW5wdXRFbGVtZW50IOaIliBGaWxlXCJ9KSksITEpO2lmKGUuZmlsZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJjA9PT1lLmZpbGUuZmlsZXMubGVuZ3RoKXJldHVybiBjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuaCqOayoeaciemAieaLqeaWh+S7tu+8jOaXoOazleWPkemAgVwifSkpLCExfXJldHVybiEwfSxvblByb2dyZXNzOnt0eXBlOlwiRnVuY3Rpb25cIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGh1KGUpJiZjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLGRlc2M6XCLmsqHmnIkgb25Qcm9ncmVzcyDlm57osIPvvIzmgqjlsIbml6Dms5Xojrflj5bkuIrkvKDov5vluqZcIn0pKSwhMH19fSl9LGNyZWF0ZUF1ZGlvTWVzc2FnZTp7dG86SGMsY29udmVyc2F0aW9uVHlwZTpIYyxwYXlsb2FkOlNuKHt9LFdjLHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuISFwdShlKXx8KGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlQXVkaW9NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMSl9fSksb25Qcm9ncmVzczp7dHlwZTpcIkZ1bmN0aW9uXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBodShlKSYmY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVBdWRpb01lc3NhZ2VcIixkZXNjOlwi5rKh5pyJIG9uUHJvZ3Jlc3Mg5Zue6LCD77yM5oKo5bCG5peg5rOV6I635Y+W5LiK5Lyg6L+b5bqmXCJ9KSksITB9fX0sY3JlYXRlVmlkZW9NZXNzYWdlOnt0bzpIYyxjb252ZXJzYXRpb25UeXBlOkhjLHBheWxvYWQ6U24oe30sV2Mse3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtpZighcHUoZSkpcmV0dXJuIGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMTtpZihodShlLmZpbGUpKXJldHVybiBjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuS4jeiDveS4uiB1bmRlZmluZWRcIn0pKSwhMTtpZihnaSl7aWYoIShlLmZpbGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50fHx1dShlLmZpbGUpKSlyZXR1cm4gcHUoZS5maWxlKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaT8hIXV1KGUuZmlsZS50ZW1wRmlsZSl8fChjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuaCqOayoeaciemAieaLqeaWh+S7tu+8jOaXoOazleWPkemAgVwifSkpLCExKTooY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLnsbvlnovlv4XpobvmmK8gSFRNTElucHV0RWxlbWVudCDmiJYgRmlsZVwifSkpLCExKTtpZihlLmZpbGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiYwPT09ZS5maWxlLmZpbGVzLmxlbmd0aClyZXR1cm4gY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLmgqjmsqHmnInpgInmi6nmlofku7bvvIzml6Dms5Xlj5HpgIFcIn0pKSwhMX1yZXR1cm4hMH19KSxvblByb2dyZXNzOnt0eXBlOlwiRnVuY3Rpb25cIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGh1KGUpJiZjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLGRlc2M6XCLmsqHmnIkgb25Qcm9ncmVzcyDlm57osIPvvIzmgqjlsIbml6Dms5Xojrflj5bkuIrkvKDov5vluqZcIn0pKSwhMH19fSxjcmVhdGVGYWNlTWVzc2FnZTp7dG86SGMsY29udmVyc2F0aW9uVHlwZTpIYyxwYXlsb2FkOlNuKHt9LFdjLHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIHB1KGUpP2N1KGUuaW5kZXgpPyEhbHUoZS5kYXRhKXx8KGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlRmFjZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZGF0YVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOihjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmluZGV4XCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBOdW1iZXJcIn0pKSwhMSk6KGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlRmFjZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExKX19KX0sY3JlYXRlRmlsZU1lc3NhZ2U6e3RvOkhjLGNvbnZlcnNhdGlvblR5cGU6SGMscGF5bG9hZDpTbih7fSxXYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe2lmKCFwdShlKSlyZXR1cm4gY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITE7aWYoaHUoZS5maWxlKSlyZXR1cm4gY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuS4jeiDveS4uiB1bmRlZmluZWRcIn0pKSwhMTtpZihnaSl7aWYoIShlLmZpbGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50fHx1dShlLmZpbGUpKSlyZXR1cm4gcHUoZS5maWxlKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaT8wIT09ZS5maWxlLnRlbXBGaWxlUGF0aHMubGVuZ3RoJiYwIT09ZS5maWxlLnRlbXBGaWxlcy5sZW5ndGh8fChjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5oKo5rKh5pyJ6YCJ5oup5paH5Lu277yM5peg5rOV5Y+R6YCBXCJ9KSksITEpOihjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi57G75Z6L5b+F6aG75pivIEhUTUxJbnB1dEVsZW1lbnQg5oiWIEZpbGVcIn0pKSwhMSk7aWYoZS5maWxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmMD09PWUuZmlsZS5maWxlcy5sZW5ndGgpcmV0dXJuIGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlRmlsZU1lc3NhZ2VcIixkZXNjOlwi5oKo5rKh5pyJ6YCJ5oup5paH5Lu277yM5peg5rOV5Y+R6YCBXCJ9KSksITF9cmV0dXJuITB9fSksb25Qcm9ncmVzczp7dHlwZTpcIkZ1bmN0aW9uXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBodShlKSYmY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLGRlc2M6XCLmsqHmnIkgb25Qcm9ncmVzcyDlm57osIPvvIzmgqjlsIbml6Dms5Xojrflj5bkuIrkvKDov5vluqZcIn0pKSwhMH19fSxjcmVhdGVMb2NhdGlvbk1lc3NhZ2U6e3RvOkhjLGNvbnZlcnNhdGlvblR5cGU6SGMscGF5bG9hZDpTbih7fSxXYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBwdShlKT9sdShlLmRlc2NyaXB0aW9uKT9jdShlLmxvbmdpdHVkZSk/ISFjdShlLmxhdGl0dWRlKXx8KGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlTG9jYXRpb25NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmxhdGl0dWRlXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBOdW1iZXJcIn0pKSwhMSk6KGNvbnNvbGUud2FybihCYyh7YXBpOlwiY3JlYXRlTG9jYXRpb25NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmxvbmdpdHVkZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogTnVtYmVyXCJ9KSksITEpOihjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZUxvY2F0aW9uTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5kZXNjcmlwdGlvblwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOihjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZUxvY2F0aW9uTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITEpfX0pfSxjcmVhdGVNZXJnZXJNZXNzYWdlOnt0bzpIYyxjb252ZXJzYXRpb25UeXBlOkhjLHBheWxvYWQ6U24oe30sV2Mse3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtpZihYdShlLm1lc3NhZ2VMaXN0KSlyZXR1cm4gY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsZGVzYzpcIuS4jeiDveS4uuepuuaVsOe7hFwifSkpLCExO2lmKFh1KGUuY29tcGF0aWJsZVRleHQpKXJldHVybiBjb25zb2xlLndhcm4oQmMoe2FwaTpcImNyZWF0ZU1lcmdlck1lc3NhZ2VcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ++8jOS4lOS4jeiDveS4uuepulwifSkpLCExO3ZhciB0PSExO3JldHVybiBlLm1lc3NhZ2VMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2Uuc3RhdHVzPT09cWMuRkFJTCYmKHQ9ITApfSkpLCF0fHwoY29uc29sZS53YXJuKEJjKHthcGk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsZGVzYzpcIuS4jeaUr+aMgeWQiOW5tuW3suWPkemAgeWksei0peeahOa2iOaBr1wifSkpLCExKX19KX0scmV2b2tlTWVzc2FnZTpbU24oe25hbWU6XCJtZXNzYWdlXCJ9LFdjLHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIFh1KGUpPyhjb25zb2xlLndhcm4oXCJyZXZva2VNZXNzYWdlIOivt+S8oOWFpea2iOaBr++8iE1lc3NhZ2XvvInlrp7kvotcIiksITEpOmUuY29udmVyc2F0aW9uVHlwZT09PVluLkNPTlZfU1lTVEVNPyhjb25zb2xlLndhcm4oXCJyZXZva2VNZXNzYWdlIOS4jeiDveaSpOWbnuezu+e7n+S8muivnea2iOaBr++8jOWPquiDveaSpOWbnuWNleiBiua2iOaBr+aIlue+pOa2iOaBr1wiKSwhMSk6ITAhPT1lLmlzUmV2b2tlZHx8KGNvbnNvbGUud2FybihcInJldm9rZU1lc3NhZ2Ug5raI5oGv5bey57uP6KKr5pKk5Zue77yM6K+35Yu/6YeN5aSN5pON5L2cXCIpLCExKX19KV0sZGVsZXRlTWVzc2FnZTpbU24oe25hbWU6XCJtZXNzYWdlTGlzdFwifSxqYyx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiFYdShlKXx8KGNvbnNvbGUud2FybihCYyh7YXBpOlwiZGVsZXRlTWVzc2FnZVwiLHBhcmFtOlwibWVzc2FnZUxpc3RcIixkZXNjOlwi5LiN6IO95Li656m65pWw57uEXCJ9KSksITEpfX0pXSxnZXRVc2VyUHJvZmlsZTp7dXNlcklETGlzdDp7dHlwZTpcIkFycmF5XCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBndShlKT8oMD09PWUubGVuZ3RoJiZjb25zb2xlLndhcm4oQmMoe2FwaTpcImdldFVzZXJQcm9maWxlXCIscGFyYW06XCJ1c2VySURMaXN0XCIsZGVzYzpcIuS4jeiDveS4uuepuuaVsOe7hFwifSkpLCEwKTooY29uc29sZS53YXJuKEJjKHthcGk6XCJnZXRVc2VyUHJvZmlsZVwiLHBhcmFtOlwidXNlcklETGlzdFwiLGRlc2M6XCLlv4XpobvkuLrmlbDnu4RcIn0pKSwhMSl9fX0sdXBkYXRlTXlQcm9maWxlOntwcm9maWxlQ3VzdG9tRmllbGQ6e3R5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hIWh1KGUpfHwoISFndShlKXx8KGNvbnNvbGUud2FybihCYyh7YXBpOlwidXBkYXRlTXlQcm9maWxlXCIscGFyYW06XCJwcm9maWxlQ3VzdG9tRmllbGRcIixkZXNjOlwi5b+F6aG75Li65pWw57uEXCJ9KSksITEpKX19fSxhZGRGcmllbmQ6e3RvOkhjLHNvdXJjZTp7dHlwZTpcIlN0cmluZ1wiLHJlcXVpcmVkOiEwLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hIWUmJihlLnN0YXJ0c1dpdGgoXCJBZGRTb3VyY2VfVHlwZV9cIik/IShlLnJlcGxhY2UoXCJBZGRTb3VyY2VfVHlwZV9cIixcIlwiKS5sZW5ndGg+OCl8fChjb25zb2xlLndhcm4oQmMoe2FwaTpcImFkZEZyaWVuZFwiLGRlc2M6XCLliqDlpb3lj4vmnaXmupDlrZfmrrXnmoTlhbPplK7lrZfplb/luqbkuI3lvpfotoXov4c45a2X6IqCXCJ9KSksITEpOihjb25zb2xlLndhcm4oQmMoe2FwaTpcImFkZEZyaWVuZFwiLGRlc2M6XCLliqDlpb3lj4vmnaXmupDlrZfmrrXnmoTliY3nvIDlv4XpobvmmK/vvJpBZGRTb3VyY2VfVHlwZV9cIn0pKSwhMSkpfX0scmVtYXJrOnt0eXBlOlwiU3RyaW5nXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiEobHUoZSkmJmUubGVuZ3RoPjk2KXx8KGNvbnNvbGUud2FybihCYyh7YXBpOlwidXBkYXRlRnJpZW5kXCIsZGVzYzpcIiDlpIfms6jplb/luqbmnIDplb/kuI3lvpfotoXov4cgOTYg5Liq5a2X6IqCXCJ9KSksITEpfX19LGRlbGV0ZUZyaWVuZDp7dXNlcklETGlzdDpqY30sY2hlY2tGcmllbmQ6e3VzZXJJRExpc3Q6amN9LGdldEZyaWVuZFByb2ZpbGU6e3VzZXJJRExpc3Q6amN9LHVwZGF0ZUZyaWVuZDp7dXNlcklEOkhjLHJlbWFyazp7dHlwZTpcIlN0cmluZ1wiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hKGx1KGUpJiZlLmxlbmd0aD45Nil8fChjb25zb2xlLndhcm4oQmMoe2FwaTpcInVwZGF0ZUZyaWVuZFwiLGRlc2M6XCIg5aSH5rOo6ZW/5bqm5pyA6ZW/5LiN5b6X6LaF6L+HIDk2IOS4quWtl+iKglwifSkpLCExKX19LGZyaWVuZEN1c3RvbUZpZWxkOnt0eXBlOlwiQXJyYXlcIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7aWYoZSl7aWYoIWd1KGUpKXJldHVybiBjb25zb2xlLndhcm4oQmMoe2FwaTpcInVwZGF0ZUZyaWVuZFwiLHBhcmFtOlwiZnJpZW5kQ3VzdG9tRmllbGRcIixkZXNjOlwi5b+F6aG75Li65pWw57uEXCJ9KSksITE7dmFyIHQ9ITA7cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIGx1KGUua2V5KSYmLTEhPT1lLmtleS5pbmRleE9mKFwiVGFnX1NOU19DdXN0b21cIik/bHUoZS52YWx1ZSk/ZS52YWx1ZS5sZW5ndGg+OD8oY29uc29sZS53YXJuKEJjKHthcGk6XCJ1cGRhdGVGcmllbmRcIixkZXNjOlwi5aW95Y+L6Ieq5a6a5LmJ5a2X5q6155qE5YWz6ZSu5a2X6ZW/5bqm5LiN5b6X6LaF6L+HOOWtl+iKglwifSkpLHQ9ITEpOnZvaWQgMDooY29uc29sZS53YXJuKEJjKHthcGk6XCJ1cGRhdGVGcmllbmRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ1wifSkpLHQ9ITEpOihjb25zb2xlLndhcm4oQmMoe2FwaTpcInVwZGF0ZUZyaWVuZFwiLGRlc2M6XCLlpb3lj4voh6rlrprkuYnlrZfmrrXnmoTliY3nvIDlv4XpobvmmK8gVGFnX1NOU19DdXN0b21cIn0pKSx0PSExKX0pKSx0fXJldHVybiEwfX19LGFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uOnt1c2VySUQ6SGN9LHJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uOnt1c2VySUQ6SGN9LGRlbGV0ZUZyaWVuZEFwcGxpY2F0aW9uOnt1c2VySUQ6SGN9LGNyZWF0ZUZyaWVuZEdyb3VwOntuYW1lOkhjfSxkZWxldGVGcmllbmRHcm91cDp7bmFtZTpIY30sYWRkVG9GcmllbmRHcm91cDp7bmFtZTpIYyx1c2VySURMaXN0OmpjfSxyZW1vdmVGcm9tRnJpZW5kR3JvdXA6e25hbWU6SGMsdXNlcklETGlzdDpqY30scmVuYW1lRnJpZW5kR3JvdXA6e29sZE5hbWU6SGMsbmV3TmFtZTpIY30sc2VuZE1lc3NhZ2VSZWFkUmVjZWlwdDpbe25hbWU6XCJtZXNzYWdlTGlzdFwiLHR5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gZ3UoZSk/MD09PWUubGVuZ3RoPyhjb25zb2xlLndhcm4oQmMoe2FwaTpcInNlbmRNZXNzYWdlUmVhZFJlY2VpcHRcIixwYXJhbTpcIm1lc3NhZ2VMaXN0XCIsZGVzYzpcIuS4jeiDveS4uuepuuaVsOe7hFwifSkpLCExKTooZS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0MyQylyZXR1cm4gY29uc29sZS53YXJuKEJjKHthcGk6XCJzZW5kTWVzc2FnZVJlYWRSZWNlaXB0XCIscGFyYW06XCJtZXNzYWdlTGlzdFwiLGRlc2M6XCLku4XmlK/mjIHnvqTmtojmga9cIn0pKSwhMX0pKSwhMCk6KGNvbnNvbGUud2FybihCYyh7YXBpOlwic2VuZE1lc3NhZ2VSZWFkUmVjZWlwdFwiLHBhcmFtOlwibWVzc2FnZUxpc3RcIixkZXNjOlwi5b+F6aG75Li65pWw57uEXCJ9KSksITEpfX1dLGdldE1lc3NhZ2VSZWFkUmVjZWlwdExpc3Q6W3tuYW1lOlwibWVzc2FnZUxpc3RcIix0eXBlOlwiQXJyYXlcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGd1KGUpPzA9PT1lLmxlbmd0aD8oY29uc29sZS53YXJuKEJjKHthcGk6XCJnZXRNZXNzYWdlUmVhZFJlY2VpcHRMaXN0XCIscGFyYW06XCJtZXNzYWdlTGlzdFwiLGRlc2M6XCLkuI3og73kuLrnqbrmlbDnu4RcIn0pKSwhMSk6KGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZS5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9DMkMpcmV0dXJuIGNvbnNvbGUud2FybihCYyh7YXBpOlwiZ2V0TWVzc2FnZVJlYWRSZWNlaXB0TGlzdFwiLHBhcmFtOlwibWVzc2FnZUxpc3RcIixkZXNjOlwi5LuF5pSv5oyB576k5raI5oGvXCJ9KSksITF9KSksITApOihjb25zb2xlLndhcm4oQmMoe2FwaTpcImdldE1lc3NhZ2VSZWFkUmVjZWlwdExpc3RcIixwYXJhbTpcIm1lc3NhZ2VMaXN0XCIsZGVzYzpcIuW/hemhu+S4uuaVsOe7hFwifSkpLCExKX19XX0sJGM9e2xvZ2luOlwibG9naW5cIixsb2dvdXQ6XCJsb2dvdXRcIixvbjpcIm9uXCIsb25jZTpcIm9uY2VcIixvZmY6XCJvZmZcIixzZXRMb2dMZXZlbDpcInNldExvZ0xldmVsXCIscmVnaXN0ZXJQbHVnaW46XCJyZWdpc3RlclBsdWdpblwiLGRlc3Ryb3k6XCJkZXN0cm95XCIsY3JlYXRlVGV4dE1lc3NhZ2U6XCJjcmVhdGVUZXh0TWVzc2FnZVwiLGNyZWF0ZVRleHRBdE1lc3NhZ2U6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIsY3JlYXRlSW1hZ2VNZXNzYWdlOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIsY3JlYXRlQXVkaW9NZXNzYWdlOlwiY3JlYXRlQXVkaW9NZXNzYWdlXCIsY3JlYXRlVmlkZW9NZXNzYWdlOlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIsY3JlYXRlQ3VzdG9tTWVzc2FnZTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixjcmVhdGVGYWNlTWVzc2FnZTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIsY3JlYXRlRmlsZU1lc3NhZ2U6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLGNyZWF0ZUxvY2F0aW9uTWVzc2FnZTpcImNyZWF0ZUxvY2F0aW9uTWVzc2FnZVwiLGNyZWF0ZU1lcmdlck1lc3NhZ2U6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsZG93bmxvYWRNZXJnZXJNZXNzYWdlOlwiZG93bmxvYWRNZXJnZXJNZXNzYWdlXCIsY3JlYXRlRm9yd2FyZE1lc3NhZ2U6XCJjcmVhdGVGb3J3YXJkTWVzc2FnZVwiLHNlbmRNZXNzYWdlOlwic2VuZE1lc3NhZ2VcIixyZXNlbmRNZXNzYWdlOlwicmVzZW5kTWVzc2FnZVwiLHJldm9rZU1lc3NhZ2U6XCJyZXZva2VNZXNzYWdlXCIsZGVsZXRlTWVzc2FnZTpcImRlbGV0ZU1lc3NhZ2VcIixzZW5kTWVzc2FnZVJlYWRSZWNlaXB0Olwic2VuZE1lc3NhZ2VSZWFkUmVjZWlwdFwiLGdldEdyb3VwTWVzc2FnZVJlYWRNZW1iZXJMaXN0OlwiZ2V0R3JvdXBNZXNzYWdlUmVhZE1lbWJlckxpc3RcIixnZXRNZXNzYWdlUmVhZFJlY2VpcHRMaXN0OlwiZ2V0TWVzc2FnZVJlYWRSZWNlaXB0TGlzdFwiLGdldE1lc3NhZ2VMaXN0OlwiZ2V0TWVzc2FnZUxpc3RcIixmaW5kTWVzc2FnZTpcImZpbmRNZXNzYWdlXCIsc2V0TWVzc2FnZVJlYWQ6XCJzZXRNZXNzYWdlUmVhZFwiLHNldEFsbE1lc3NhZ2VSZWFkOlwic2V0QWxsTWVzc2FnZVJlYWRcIixnZXRDb252ZXJzYXRpb25MaXN0OlwiZ2V0Q29udmVyc2F0aW9uTGlzdFwiLGdldENvbnZlcnNhdGlvblByb2ZpbGU6XCJnZXRDb252ZXJzYXRpb25Qcm9maWxlXCIsZGVsZXRlQ29udmVyc2F0aW9uOlwiZGVsZXRlQ29udmVyc2F0aW9uXCIscGluQ29udmVyc2F0aW9uOlwicGluQ29udmVyc2F0aW9uXCIsZ2V0R3JvdXBMaXN0OlwiZ2V0R3JvdXBMaXN0XCIsZ2V0R3JvdXBQcm9maWxlOlwiZ2V0R3JvdXBQcm9maWxlXCIsY3JlYXRlR3JvdXA6XCJjcmVhdGVHcm91cFwiLGpvaW5Hcm91cDpcImpvaW5Hcm91cFwiLHVwZGF0ZUdyb3VwUHJvZmlsZTpcInVwZGF0ZUdyb3VwUHJvZmlsZVwiLHF1aXRHcm91cDpcInF1aXRHcm91cFwiLGRpc21pc3NHcm91cDpcImRpc21pc3NHcm91cFwiLGNoYW5nZUdyb3VwT3duZXI6XCJjaGFuZ2VHcm91cE93bmVyXCIsc2VhcmNoR3JvdXBCeUlEOlwic2VhcmNoR3JvdXBCeUlEXCIsc2V0TWVzc2FnZVJlbWluZFR5cGU6XCJzZXRNZXNzYWdlUmVtaW5kVHlwZVwiLGhhbmRsZUdyb3VwQXBwbGljYXRpb246XCJoYW5kbGVHcm91cEFwcGxpY2F0aW9uXCIsaW5pdEdyb3VwQXR0cmlidXRlczpcImluaXRHcm91cEF0dHJpYnV0ZXNcIixzZXRHcm91cEF0dHJpYnV0ZXM6XCJzZXRHcm91cEF0dHJpYnV0ZXNcIixkZWxldGVHcm91cEF0dHJpYnV0ZXM6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIixnZXRHcm91cEF0dHJpYnV0ZXM6XCJnZXRHcm91cEF0dHJpYnV0ZXNcIixnZXRHcm91cE1lbWJlclByb2ZpbGU6XCJnZXRHcm91cE1lbWJlclByb2ZpbGVcIixnZXRHcm91cE1lbWJlckxpc3Q6XCJnZXRHcm91cE1lbWJlckxpc3RcIixhZGRHcm91cE1lbWJlcjpcImFkZEdyb3VwTWVtYmVyXCIsZGVsZXRlR3JvdXBNZW1iZXI6XCJkZWxldGVHcm91cE1lbWJlclwiLHNldEdyb3VwTWVtYmVyTmFtZUNhcmQ6XCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIsc2V0R3JvdXBNZW1iZXJNdXRlVGltZTpcInNldEdyb3VwTWVtYmVyTXV0ZVRpbWVcIixzZXRHcm91cE1lbWJlclJvbGU6XCJzZXRHcm91cE1lbWJlclJvbGVcIixzZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkOlwic2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZFwiLGdldEdyb3VwT25saW5lTWVtYmVyQ291bnQ6XCJnZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIsZ2V0TXlQcm9maWxlOlwiZ2V0TXlQcm9maWxlXCIsZ2V0VXNlclByb2ZpbGU6XCJnZXRVc2VyUHJvZmlsZVwiLHVwZGF0ZU15UHJvZmlsZTpcInVwZGF0ZU15UHJvZmlsZVwiLGdldEJsYWNrbGlzdDpcImdldEJsYWNrbGlzdFwiLGFkZFRvQmxhY2tsaXN0OlwiYWRkVG9CbGFja2xpc3RcIixyZW1vdmVGcm9tQmxhY2tsaXN0OlwicmVtb3ZlRnJvbUJsYWNrbGlzdFwiLGdldEZyaWVuZExpc3Q6XCJnZXRGcmllbmRMaXN0XCIsYWRkRnJpZW5kOlwiYWRkRnJpZW5kXCIsZGVsZXRlRnJpZW5kOlwiZGVsZXRlRnJpZW5kXCIsY2hlY2tGcmllbmQ6XCJjaGVja0ZyaWVuZFwiLHVwZGF0ZUZyaWVuZDpcInVwZGF0ZUZyaWVuZFwiLGdldEZyaWVuZFByb2ZpbGU6XCJnZXRGcmllbmRQcm9maWxlXCIsZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0OlwiZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0XCIscmVmdXNlRnJpZW5kQXBwbGljYXRpb246XCJyZWZ1c2VGcmllbmRBcHBsaWNhdGlvblwiLGRlbGV0ZUZyaWVuZEFwcGxpY2F0aW9uOlwiZGVsZXRlRnJpZW5kQXBwbGljYXRpb25cIixhY2NlcHRGcmllbmRBcHBsaWNhdGlvbjpcImFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uXCIsc2V0RnJpZW5kQXBwbGljYXRpb25SZWFkOlwic2V0RnJpZW5kQXBwbGljYXRpb25SZWFkXCIsZ2V0RnJpZW5kR3JvdXBMaXN0OlwiZ2V0RnJpZW5kR3JvdXBMaXN0XCIsY3JlYXRlRnJpZW5kR3JvdXA6XCJjcmVhdGVGcmllbmRHcm91cFwiLHJlbmFtZUZyaWVuZEdyb3VwOlwicmVuYW1lRnJpZW5kR3JvdXBcIixkZWxldGVGcmllbmRHcm91cDpcImRlbGV0ZUZyaWVuZEdyb3VwXCIsYWRkVG9GcmllbmRHcm91cDpcImFkZFRvRnJpZW5kR3JvdXBcIixyZW1vdmVGcm9tRnJpZW5kR3JvdXA6XCJyZW1vdmVGcm9tRnJpZW5kR3JvdXBcIixjYWxsRXhwZXJpbWVudGFsQVBJOlwiY2FsbEV4cGVyaW1lbnRhbEFQSVwifSx6Yz0hIVNyJiZyKChmdW5jdGlvbigpe1NyLnByb3RvdHlwZS5maW5hbGx5LmNhbGwoe3RoZW46ZnVuY3Rpb24oKXt9fSwoZnVuY3Rpb24oKXt9KSl9KSk7a2Uoe3RhcmdldDpcIlByb21pc2VcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDp6Y30se2ZpbmFsbHk6ZnVuY3Rpb24oZSl7dmFyIHQ9T3IodGhpcyxuZShcIlByb21pc2VcIikpLG49XCJmdW5jdGlvblwiPT10eXBlb2YgZTtyZXR1cm4gdGhpcy50aGVuKG4/ZnVuY3Rpb24obil7cmV0dXJuIF9hKHQsZSgpKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBufSkpfTplLG4/ZnVuY3Rpb24obil7cmV0dXJuIF9hKHQsZSgpKS50aGVuKChmdW5jdGlvbigpe3Rocm93IG59KSl9OmUpfX0pLFwiZnVuY3Rpb25cIiE9dHlwZW9mIFNyfHxTci5wcm90b3R5cGUuZmluYWxseXx8WihTci5wcm90b3R5cGUsXCJmaW5hbGx5XCIsbmUoXCJQcm9taXNlXCIpLnByb3RvdHlwZS5maW5hbGx5KTt2YXIgSmM9W10uc2xpY2UsWGM9L01TSUUgLlxcLi8udGVzdCgkbiksUWM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIG89YXJndW1lbnRzLmxlbmd0aD4yLHI9bz9KYy5jYWxsKGFyZ3VtZW50cywyKTp2b2lkIDA7cmV0dXJuIGUobz9mdW5jdGlvbigpeyhcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6RnVuY3Rpb24odCkpLmFwcGx5KHRoaXMscil9OnQsbil9fTtrZSh7Z2xvYmFsOiEwLGJpbmQ6ITAsZm9yY2VkOlhjfSx7c2V0VGltZW91dDpRYyhvLnNldFRpbWVvdXQpLHNldEludGVydmFsOlFjKG8uc2V0SW50ZXJ2YWwpfSk7dmFyIFpjPUhlLmZpbHRlcixlbD1lbyhcImZpbHRlclwiKSx0bD16ZShcImZpbHRlclwiKTtrZSh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6IWVsfHwhdGx9LHtmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIFpjKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSk7dmFyIG5sLG9sPVwic2lnblwiLHJsPVwibWVzc2FnZVwiLGFsPVwidXNlclwiLHNsPVwiYzJjXCIsaWw9XCJncm91cFwiLHVsPVwic25zXCIsY2w9XCJncm91cE1lbWJlclwiLGxsPVwiY29udmVyc2F0aW9uXCIsZGw9XCJjb250ZXh0XCIscGw9XCJzdG9yYWdlXCIsZ2w9XCJldmVudFN0YXRcIixobD1cIm5ldE1vbml0b3JcIixmbD1cImJpZ0RhdGFDaGFubmVsXCIsX2w9XCJ1cGxvYWRcIixtbD1cInBsdWdpblwiLHZsPVwic3luY1VucmVhZE1lc3NhZ2VcIixNbD1cInNlc3Npb25cIix5bD1cImNoYW5uZWxcIixJbD1cIm1lc3NhZ2VfbG9zc19kZXRlY3Rpb25cIixFbD1cImNsb3VkQ29udHJvbFwiLFRsPVwid29ya2VyVGltZXJcIixBbD1cInB1bGxHcm91cE1lc3NhZ2VcIixTbD1cInF1YWxpdHlTdGF0XCIsRGw9XCJjb21tZXJjaWFsQ29uZmlnXCIsTmw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fbW9kdWxlTWFuYWdlcj10LHRoaXMuX2NsYXNzTmFtZT1cIlwifXJldHVybiBFbihlLFt7a2V5OlwiaXNMb2dnZWRJblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGRsKS5pc0xvZ2dlZEluKCl9fSx7a2V5OlwiaXNPdmVyc2VhXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoZGwpLmlzT3ZlcnNlYSgpfX0se2tleTpcImdldE15VXNlcklEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoZGwpLmdldFVzZXJJRCgpfX0se2tleTpcImdldE15VGlueUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoZGwpLmdldFRpbnlJRCgpfX0se2tleTpcImdldE1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShlKX19LHtrZXk6XCJnZXRQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGZpfX0se2tleTpcImdldE5ldHdvcmtUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaGwpLmdldE5ldHdvcmtUeXBlKCl9fSx7a2V5OlwicHJvYmVOZXR3b3JrXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaGwpLnByb2JlKCl9fSx7a2V5OlwiZ2V0Q2xvdWRDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoRWwpLmdldENsb3VkQ29uZmlnKGUpfX0se2tleTpcImVtaXRPdXRlckV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkuZW1pdChlLHQpfX0se2tleTpcImVtaXRJbm5lckV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkuZW1pdChlLHQpfX0se2tleTpcImdldElubmVyRW1pdHRlckluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpfX0se2tleTpcImdlbmVyYXRlVGpnSURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoZGwpLmdldFRpbnlJRCgpK1wiLVwiK2UucmFuZG9tfX0se2tleTpcImZpbHRlck1vZGlmaWVkTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFYdShlKSl7dmFyIHQ9ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiEwPT09ZS5pc01vZGlmaWVkfSkpO3QubGVuZ3RoPjAmJnRoaXMuZW1pdE91dGVyRXZlbnQoV24uTUVTU0FHRV9NT0RJRklFRCx0KX19fSx7a2V5OlwiZmlsdGVyVW5tb2RpZmllZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gWHUoZSk/W106ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiExPT09ZS5pc01vZGlmaWVkfSkpfX0se2tleTpcInJlcXVlc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoTWwpLnJlcXVlc3QoZSl9fSx7a2V5OlwiY2FuSVVzZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShEbCkuaGFzUHVyY2hhc2VkRmVhdHVyZShlKX19XSksZX0oKSxDbD1cIndzbG9naW5cIixrbD1cIndzbG9nb3V0XCIsTGw9XCJ3c2hlbGxvXCIsUmw9XCJLaWNrT3RoZXJcIixPbD1cImdldG1zZ1wiLEdsPVwiYXV0aGtleVwiLGJsPVwic2VuZG1zZ1wiLHdsPVwic2VuZF9ncm91cF9tc2dcIixQbD1cInBvcnRyYWl0X2dldF9hbGxcIixVbD1cInBvcnRyYWl0X3NldFwiLEZsPVwiYmxhY2tfbGlzdF9nZXRcIixxbD1cImJsYWNrX2xpc3RfYWRkXCIseGw9XCJibGFja19saXN0X2RlbGV0ZVwiLFZsPVwiZnJpZW5kX2dldFwiLEtsPVwiZnJpZW5kX2dldF9saXN0XCIsQmw9XCJmcmllbmRfY2hlY2tcIixIbD1cImZyaWVuZF9kZWxldGVcIixqbD1cImZyaWVuZF9hZGRcIixXbD1cImZyaWVuZF91cGRhdGVcIixZbD1cImZyaWVuZF9yZXNwb25zZVwiLCRsPVwicGVuZGVuY3lfZ2V0XCIsemw9XCJwZW5kZW5jeV9kZWxldGVcIixKbD1cInBlbmRlbmN5X3JlcG9ydFwiLFhsPVwiZ3JvdXBfZ2V0XCIsUWw9XCJncm91cF9hZGRcIixabD1cImdyb3VwX2RlbGV0ZVwiLGVkPVwiZ3JvdXBfdXBkYXRlXCIsdGQ9XCJtc2d3aXRoZHJhd1wiLG5kPVwibXNncmVhZGVkXCIsb2Q9XCJzZXRfYzJjX3BlZXJfbXV0ZV9ub3RpZmljYXRpb25zXCIscmQ9XCJnZXRfYzJjX3BlZXJfbXV0ZV9ub3RpZmljYXRpb25zXCIsYWQ9XCJnZXRyb2FtbXNnXCIsc2Q9XCJnZXRfcGVlcl9yZWFkX3RpbWVcIixpZD1cImRlbGV0ZV9jMmNfbXNnX3JhbWJsZVwiLHVkPVwicGFnZV9nZXRcIixjZD1cImdldFwiLGxkPVwiZGVsZXRlXCIsZGQ9XCJ0b3BcIixwZD1cImRlbGV0ZW1zZ1wiLGdkPVwiZ2V0X2pvaW5lZF9ncm91cF9saXN0XCIsaGQ9XCJnZXRfZ3JvdXBfc2VsZl9tZW1iZXJfaW5mb1wiLGZkPVwiY3JlYXRlX2dyb3VwXCIsX2Q9XCJkZXN0cm95X2dyb3VwXCIsbWQ9XCJtb2RpZnlfZ3JvdXBfYmFzZV9pbmZvXCIsdmQ9XCJhcHBseV9qb2luX2dyb3VwXCIsTWQ9XCJhcHBseV9qb2luX2dyb3VwX25vYXV0aFwiLHlkPVwicXVpdF9ncm91cFwiLElkPVwiZ2V0X2dyb3VwX3B1YmxpY19pbmZvXCIsRWQ9XCJjaGFuZ2VfZ3JvdXBfb3duZXJcIixUZD1cImhhbmRsZV9hcHBseV9qb2luX2dyb3VwXCIsQWQ9XCJoYW5kbGVfaW52aXRlX2pvaW5fZ3JvdXBcIixTZD1cImdyb3VwX21zZ19yZWNhbGxcIixEZD1cIm1zZ19yZWFkX3JlcG9ydFwiLE5kPVwicmVhZF9hbGxfdW5yZWFkX21zZ1wiLENkPVwiZ3JvdXBfbXNnX2dldFwiLGtkPVwiZ2V0X2dyb3VwX21zZ19yZWNlaXB0XCIsTGQ9XCJncm91cF9tc2dfcmVjZWlwdFwiLFJkPVwiZ2V0X2dyb3VwX21zZ19yZWNlaXB0X2RldGFpbFwiLE9kPVwiZ2V0X3BlbmRlbmN5XCIsR2Q9XCJkZWxldGVtc2dcIixiZD1cImdldF9tc2dcIix3ZD1cImdldF9tc2dfbm9hdXRoXCIsUGQ9XCJnZXRfb25saW5lX21lbWJlcl9udW1cIixVZD1cImRlbGV0ZV9ncm91cF9yYW1ibGVfbXNnX2J5X3NlcVwiLEZkPVwic2V0X2dyb3VwX2F0dHJcIixxZD1cIm1vZGlmeV9ncm91cF9hdHRyXCIseGQ9XCJkZWxldGVfZ3JvdXBfYXR0clwiLFZkPVwiY2xlYXJfZ3JvdXBfYXR0clwiLEtkPVwiZ2V0X2dyb3VwX2F0dHJcIixCZD1cImdldF9ncm91cF9tZW1iZXJfaW5mb1wiLEhkPVwiZ2V0X3NwZWNpZmllZF9ncm91cF9tZW1iZXJfaW5mb1wiLGpkPVwiYWRkX2dyb3VwX21lbWJlclwiLFdkPVwiZGVsZXRlX2dyb3VwX21lbWJlclwiLFlkPVwibW9kaWZ5X2dyb3VwX21lbWJlcl9pbmZvXCIsJGQ9XCJjb3NcIix6ZD1cInByZV9zaWdcIixKZD1cInZpZGVvX2NvdmVyXCIsWGQ9XCJ0aW1fd2ViX3JlcG9ydF92MlwiLFFkPVwiYWxpdmVcIixaZD1cIm1zZ19wdXNoXCIsZXA9XCJtdWx0aV9tc2dfcHVzaF93c1wiLHRwPVwid3NfbXNnX3B1c2hfYWNrXCIsbnA9XCJzdGF0X2ZvcmNlb2ZmbGluZVwiLG9wPVwic2F2ZV9yZWxheV9qc29uX21zZ1wiLHJwPVwiZ2V0X3JlbGF5X2pzb25fbXNnXCIsYXA9XCJmZXRjaF9jb25maWdcIixzcD1cInB1c2hfY29uZmlndjJcIixpcD1cImZldGNoX2ltc2RrX3B1cmNoYXNlX2JpdHN2MlwiLHVwPVwicHVzaF9pbXNka19wdXJjaGFzZV9iaXRzdjJcIixjcD1cIm5vdGlmeTJcIixscD17Tk9fU0RLQVBQSUQ6MmUzLE5PX0FDQ09VTlRfVFlQRToyMDAxLE5PX0lERU5USUZJRVI6MjAwMixOT19VU0VSU0lHOjIwMDMsTk9fVElOWUlEOjIwMjIsTk9fQTJLRVk6MjAyMyxVU0VSX05PVF9MT0dHRURfSU46MjAyNCxSRVBFQVRfTE9HSU46MjAyNSxDT1NfVU5ERVRFQ1RFRDoyMDQwLENPU19HRVRfU0lHX0ZBSUw6MjA0MSxNRVNTQUdFX1NFTkRfRkFJTDoyMTAwLE1FU1NBR0VfTElTVF9DT05TVFJVQ1RPUl9ORUVEX09QVElPTlM6MjEwMyxNRVNTQUdFX1NFTkRfTkVFRF9NRVNTQUdFX0lOU1RBTkNFOjIxMDUsTUVTU0FHRV9TRU5EX0lOVkFMSURfQ09OVkVSU0FUSU9OX1RZUEU6MjEwNixNRVNTQUdFX0ZJTEVfSVNfRU1QVFk6MjEwOCxNRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1I6MjEwOSxNRVNTQUdFX1JFVk9LRV9GQUlMOjIxMTAsTUVTU0FHRV9ERUxFVEVfRkFJTDoyMTExLE1FU1NBR0VfVU5SRUFEX0FMTF9GQUlMOjIxMTIsTUVTU0FHRV9DT05UUk9MX0lORk9fRkFJTDoyMTEzLFJFQURfUkVDRUlQVF9TRVFVRU5DRV9MSVNUX0VNUFRZOjIxMTQsTUVTU0FHRV9JTUFHRV9TRUxFQ1RfRklMRV9GSVJTVDoyMjUxLE1FU1NBR0VfSU1BR0VfVFlQRVNfTElNSVQ6MjI1MixNRVNTQUdFX0lNQUdFX1NJWkVfTElNSVQ6MjI1MyxNRVNTQUdFX0FVRElPX1VQTE9BRF9GQUlMOjIzMDAsTUVTU0FHRV9BVURJT19TSVpFX0xJTUlUOjIzMDEsTUVTU0FHRV9WSURFT19VUExPQURfRkFJTDoyMzUwLE1FU1NBR0VfVklERU9fU0laRV9MSU1JVDoyMzUxLE1FU1NBR0VfVklERU9fVFlQRVNfTElNSVQ6MjM1MixNRVNTQUdFX0ZJTEVfVVBMT0FEX0ZBSUw6MjQwMCxNRVNTQUdFX0ZJTEVfU0VMRUNUX0ZJTEVfRklSU1Q6MjQwMSxNRVNTQUdFX0ZJTEVfU0laRV9MSU1JVDoyNDAyLE1FU1NBR0VfRklMRV9VUkxfSVNfRU1QVFk6MjQwMyxNRVNTQUdFX01FUkdFUl9UWVBFX0lOVkFMSUQ6MjQ1MCxNRVNTQUdFX01FUkdFUl9LRVlfSU5WQUxJRDoyNDUxLE1FU1NBR0VfTUVSR0VSX0RPV05MT0FEX0ZBSUw6MjQ1MixNRVNTQUdFX0ZPUldBUkRfVFlQRV9JTlZBTElEOjI0NTMsTUVTU0FHRV9BVF9UWVBFX0lOVkFMSUQ6MjQ1NCxDT05WRVJTQVRJT05fTk9UX0ZPVU5EOjI1MDAsVVNFUl9PUl9HUk9VUF9OT1RfRk9VTkQ6MjUwMSxDT05WRVJTQVRJT05fVU5fUkVDT1JERURfVFlQRToyNTAyLElMTEVHQUxfR1JPVVBfVFlQRToyNjAwLENBTk5PVF9KT0lOX1dPUks6MjYwMSxJTExFR0FMX0dST1VQX0lEOjI2MDIsQ0FOTk9UX0NIQU5HRV9PV05FUl9JTl9BVkNIQVRST09NOjI2MjAsQ0FOTk9UX0NIQU5HRV9PV05FUl9UT19TRUxGOjI2MjEsQ0FOTk9UX0RJU01JU1NfV29yazoyNjIyLE1FTUJFUl9OT1RfSU5fR1JPVVA6MjYyMyxDQU5OT1RfVVNFX0dSUF9BVFRSX05PVF9BVkNIQVRST09NOjI2NDEsQ0FOTk9UX1VTRV9HUlBfQVRUUl9BVkNIQVRST09NX1VOSk9JTjoyNjQyLEpPSU5fR1JPVVBfRkFJTDoyNjYwLENBTk5PVF9BRERfTUVNQkVSX0lOX0FWQ0hBVFJPT006MjY2MSxDQU5OT1RfSk9JTl9OT05fQVZDSEFUUk9PTV9XSVRIT1VUX0xPR0lOOjI2NjIsQ0FOTk9UX0tJQ0tfTUVNQkVSX0lOX0FWQ0hBVFJPT006MjY4MCxOT1RfT1dORVI6MjY4MSxDQU5OT1RfU0VUX01FTUJFUl9ST0xFX0lOX1dPUktfQU5EX0FWQ0hBVFJPT006MjY4MixJTlZBTElEX01FTUJFUl9ST0xFOjI2ODMsQ0FOTk9UX1NFVF9TRUxGX01FTUJFUl9ST0xFOjI2ODQsQ0FOTk9UX01VVEVfU0VMRjoyNjg1LE5PVF9NWV9GUklFTkQ6MjcwMCxBTFJFQURZX01ZX0ZSSUVORDoyNzAxLEZSSUVORF9HUk9VUF9FWElTVEVEOjI3MTAsRlJJRU5EX0dST1VQX05PVF9FWElTVDoyNzExLEZSSUVORF9BUFBMSUNBVElPTl9OT1RfRVhJU1Q6MjcxNixVUERBVEVfUFJPRklMRV9JTlZBTElEX1BBUkFNOjI3MjEsVVBEQVRFX1BST0ZJTEVfTk9fS0VZOjI3MjIsQUREX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNOjI3NDAsREVMX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNOjI3NDEsQ0FOTk9UX0FERF9TRUxGX1RPX0JMQUNLTElTVDoyNzQyLEFERF9GUklFTkRfSU5WQUxJRF9QQVJBTToyNzYwLE5FVFdPUktfRVJST1I6MjgwMCxORVRXT1JLX1RJTUVPVVQ6MjgwMSxORVRXT1JLX0JBU0VfT1BUSU9OU19OT19VUkw6MjgwMixORVRXT1JLX1VOREVGSU5FRF9TRVJWRVJfTkFNRToyODAzLE5FVFdPUktfUEFDS0FHRV9VTkRFRklORUQ6MjgwNCxOT19ORVRXT1JLOjI4MDUsQ09OVkVSVE9SX0lSUkVHVUxBUl9QQVJBTVM6MjkwMCxOT1RJQ0VfUlVOTE9PUF9VTkVYUEVDVEVEX0NPTkRJVElPTjoyOTAxLE5PVElDRV9SVU5MT09QX09GRlNFVF9MT1NUOjI5MDIsVU5DQVVHSFRfRVJST1I6MjkwMyxHRVRfTE9OR1BPTExfSURfRkFJTEVEOjI5MDQsSU5WQUxJRF9PUEVSQVRJT046MjkwNSxPVkVSX0ZSRVFVRU5DWV9MSU1JVDoyOTk2LENBTk5PVF9GSU5EX1BST1RPQ09MOjI5OTcsQ0FOTk9UX0ZJTkRfTU9EVUxFOjI5OTgsU0RLX0lTX05PVF9SRUFEWToyOTk5LExPR0dJTkdfSU46M2UzLExPR0lOX0ZBSUxFRDozMDAxLEtJQ0tFRF9PVVRfTVVMVF9ERVZJQ0U6MzAwMixLSUNLRURfT1VUX01VTFRfQUNDT1VOVDozMDAzLEtJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEOjMwMDQsTE9HR0VEX09VVDozMDA1LExPTkdfUE9MTF9LSUNLX09VVDo5MTEwMSxNRVNTQUdFX0EyS0VZX0VYUElSRUQ6MjAwMDIsQUNDT1VOVF9BMktFWV9FWFBJUkVEOjcwMDAxLExPTkdfUE9MTF9BUElfUEFSQU1fRVJST1I6OTAwMDEsSEVMTE9fQU5TV0VSX0tJQ0tFRF9PVVQ6MTAwMixPUEVOX1NFUlZJQ0VfT1ZFUkxPQURfRVJST1I6NjAwMjJ9LGRwPXtOT19TREtBUFBJRDpcIuaXoCBTREtBcHBJRFwiLE5PX0FDQ09VTlRfVFlQRTpcIuaXoCBhY2NvdW50VHlwZVwiLE5PX0lERU5USUZJRVI6XCLml6AgdXNlcklEXCIsTk9fVVNFUlNJRzpcIuaXoCB1c2VyU2lnXCIsTk9fVElOWUlEOlwi5pegIHRpbnlJRFwiLE5PX0EyS0VZOlwi5pegIGEya2V5XCIsVVNFUl9OT1RfTE9HR0VEX0lOOlwi55So5oi35pyq55m75b2VXCIsUkVQRUFUX0xPR0lOOlwi6YeN5aSN55m75b2VXCIsQ09TX1VOREVURUNURUQ6XCLmnKrmo4DmtYvliLAgQ09TIOS4iuS8oOaPkuS7tlwiLENPU19HRVRfU0lHX0ZBSUw6XCLojrflj5YgQ09TIOmihOetvuWQjSBVUkwg5aSx6LSlXCIsTUVTU0FHRV9TRU5EX0ZBSUw6XCLmtojmga/lj5HpgIHlpLHotKVcIixNRVNTQUdFX0xJU1RfQ09OU1RSVUNUT1JfTkVFRF9PUFRJT05TOlwiTWVzc2FnZUNvbnRyb2xsZXIuY29uc3RydWN0b3IoKSDpnIDopoHlj4LmlbAgb3B0aW9uc1wiLE1FU1NBR0VfU0VORF9ORUVEX01FU1NBR0VfSU5TVEFOQ0U6XCLpnIDopoEgTWVzc2FnZSDnmoTlrp7kvotcIixNRVNTQUdFX1NFTkRfSU5WQUxJRF9DT05WRVJTQVRJT05fVFlQRTonTWVzc2FnZS5jb252ZXJzYXRpb25UeXBlIOWPquiDveS4uiBcIkMyQ1wiIOaIliBcIkdST1VQXCInLE1FU1NBR0VfRklMRV9JU19FTVBUWTpcIuaXoOazleWPkemAgeepuuaWh+S7tlwiLE1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUjpcIuWbnuiwg+WHveaVsOi/kOihjOaXtumBh+WIsOmUmeivr++8jOivt+ajgOafpeaOpeWFpeS+p+S7o+eggVwiLE1FU1NBR0VfUkVWT0tFX0ZBSUw6XCLmtojmga/mkqTlm57lpLHotKVcIixNRVNTQUdFX0RFTEVURV9GQUlMOlwi5raI5oGv5Yig6Zmk5aSx6LSlXCIsTUVTU0FHRV9VTlJFQURfQUxMX0ZBSUw6XCLorr7nva7miYDmnInmnKror7vmtojmga/kuLrlt7Lor7vlpITnkIblpLHotKVcIixNRVNTQUdFX0NPTlRST0xfSU5GT19GQUlMOlwi56S+576k5LiN5pSv5oyB5raI5oGv5Y+R6YCB5o6n5Yi26YCJ6aG5XCIsUkVBRF9SRUNFSVBUX1NFUVVFTkNFX0xJU1RfRU1QVFk6XCLlj5HpgIHnvqTlt7Lor7vlm57miafml7Ygc2VxdWVuY2VMaXN0IOS4uuepulwiLE1FU1NBR0VfSU1BR0VfU0VMRUNUX0ZJTEVfRklSU1Q6XCLor7flhYjpgInmi6nkuIDkuKrlm77niYdcIixNRVNTQUdFX0lNQUdFX1RZUEVTX0xJTUlUOlwi5Y+q5YWB6K645LiK5LygIGpwZyBwbmcganBlZyBnaWYgYm1wIGltYWdlIHdlYnAg5qC85byP55qE5Zu+54mHXCIsTUVTU0FHRV9JTUFHRV9TSVpFX0xJTUlUOlwi5Zu+54mH5aSn5bCP6LaF6L+HMjBN77yM5peg5rOV5Y+R6YCBXCIsTUVTU0FHRV9BVURJT19VUExPQURfRkFJTDpcIuivremfs+S4iuS8oOWksei0pVwiLE1FU1NBR0VfQVVESU9fU0laRV9MSU1JVDpcIuivremfs+Wkp+Wwj+Wkp+S6jjIwTe+8jOaXoOazleWPkemAgVwiLE1FU1NBR0VfVklERU9fVVBMT0FEX0ZBSUw6XCLop4bpopHkuIrkvKDlpLHotKVcIixNRVNTQUdFX1ZJREVPX1NJWkVfTElNSVQ6XCLop4bpopHlpKflsI/otoXov4cxMDBN77yM5peg5rOV5Y+R6YCBXCIsTUVTU0FHRV9WSURFT19UWVBFU19MSU1JVDpcIuWPquWFgeiuuOS4iuS8oCBtcDQg5qC85byP55qE6KeG6aKRXCIsTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMOlwi5paH5Lu25LiK5Lyg5aSx6LSlXCIsTUVTU0FHRV9GSUxFX1NFTEVDVF9GSUxFX0ZJUlNUOlwi6K+35YWI6YCJ5oup5LiA5Liq5paH5Lu2XCIsTUVTU0FHRV9GSUxFX1NJWkVfTElNSVQ6XCLmlofku7blpKflsI/otoXov4cxMDBN77yM5peg5rOV5Y+R6YCBIFwiLE1FU1NBR0VfRklMRV9VUkxfSVNfRU1QVFk6XCLnvLrlsJHlv4XopoHnmoTlj4LmlbDmlofku7YgVVJMXCIsTUVTU0FHRV9NRVJHRVJfVFlQRV9JTlZBTElEOlwi6Z2e5ZCI5bm25raI5oGvXCIsTUVTU0FHRV9NRVJHRVJfS0VZX0lOVkFMSUQ6XCLlkIjlubbmtojmga/nmoQgbWVzc2FnZUtleSDml6DmlYhcIixNRVNTQUdFX01FUkdFUl9ET1dOTE9BRF9GQUlMOlwi5LiL6L295ZCI5bm25raI5oGv5aSx6LSlXCIsTUVTU0FHRV9GT1JXQVJEX1RZUEVfSU5WQUxJRDpcIumAieaLqeeahOa2iOaBr+exu+Wei++8iOWmgue+pOaPkOekuua2iOaBr++8ieS4jeWPr+S7pei9rOWPkVwiLE1FU1NBR0VfQVRfVFlQRV9JTlZBTElEOlwi56S+576k5LiN5pSv5oyBIEAg5omA5pyJ5Lq6XCIsQ09OVkVSU0FUSU9OX05PVF9GT1VORDpcIuayoeacieaJvuWIsOebuOW6lOeahOS8muivne+8jOivt+ajgOafpeS8oOWFpeWPguaVsFwiLFVTRVJfT1JfR1JPVVBfTk9UX0ZPVU5EOlwi5rKh5pyJ5om+5Yiw55u45bqU55qE55So5oi35oiW576k57uE77yM6K+35qOA5p+l5Lyg5YWl5Y+C5pWwXCIsQ09OVkVSU0FUSU9OX1VOX1JFQ09SREVEX1RZUEU6XCLmnKrorrDlvZXnmoTkvJror53nsbvlnotcIixJTExFR0FMX0dST1VQX1RZUEU6XCLpnZ7ms5XnmoTnvqTnsbvlnovvvIzor7fmo4Dmn6XkvKDlhaXlj4LmlbBcIixDQU5OT1RfSk9JTl9XT1JLOlwi5LiN6IO95Yqg5YWlIFdvcmsg57G75Z6L55qE576k57uEXCIsSUxMRUdBTF9HUk9VUF9JRDpcIue+pOe7hCBJRCDpnZ7ms5XvvIxQdWJsaWMvV29yay9NZWV0aW5nL0FWQ2hhdFJvb20g57G75Z6L576k57uE5LiN6IO95LulIEBUR1MjXyDkuLrliY3nvIDvvIznpL7nvqTlv4Xpobvku6UgQFRHUyNfIOS4uuWJjee8gFwiLENBTk5PVF9DSEFOR0VfT1dORVJfSU5fQVZDSEFUUk9PTTpcIkFWQ2hhdFJvb20g57G75Z6L55qE576k57uE5LiN6IO96L2s6K6p576k5Li7XCIsQ0FOTk9UX0NIQU5HRV9PV05FUl9UT19TRUxGOlwi5LiN6IO95oqK576k5Li76L2s6K6p57uZ6Ieq5bexXCIsQ0FOTk9UX0RJU01JU1NfV09SSzpcIuS4jeiDveino+aVoyBXb3JrIOexu+Wei+eahOe+pOe7hFwiLE1FTUJFUl9OT1RfSU5fR1JPVVA6XCLnlKjmiLfkuI3lnKjor6XnvqTnu4TlhoVcIixKT0lOX0dST1VQX0ZBSUw6XCLliqDnvqTlpLHotKXvvIzor7fmo4Dmn6XkvKDlhaXlj4LmlbDmiJbph43or5VcIixDQU5OT1RfQUREX01FTUJFUl9JTl9BVkNIQVRST09NOlwiQVZDaGF0Um9vbSDnsbvlnovnmoTnvqTkuI3mlK/mjIHpgoDor7fnvqTmiJDlkZhcIixDQU5OT1RfSk9JTl9OT05fQVZDSEFUUk9PTV9XSVRIT1VUX0xPR0lOOlwi6Z2eIEFWQ2hhdFJvb20g57G75Z6L55qE576k57uE5LiN5YWB6K645Yy/5ZCN5Yqg576k77yM6K+35YWI55m75b2V5ZCO5YaN5Yqg576kXCIsQ0FOTk9UX0tJQ0tfTUVNQkVSX0lOX0FWQ0hBVFJPT006XCLkuI3og73lnKggQVZDaGF0Um9vbSDnsbvlnovnmoTnvqTnu4TouKLkurpcIixOT1RfT1dORVI6XCLkvaDkuI3mmK/nvqTkuLvvvIzlj6rmnInnvqTkuLvmiY3mnInmnYPpmZDmk43kvZxcIixDQU5OT1RfU0VUX01FTUJFUl9ST0xFX0lOX1dPUktfQU5EX0FWQ0hBVFJPT006XCLkuI3og73lnKggV29yayAvIEFWQ2hhdFJvb20g57G75Z6L55qE576k5Lit6K6+572u576k5oiQ5ZGY6Lqr5Lu9XCIsSU5WQUxJRF9NRU1CRVJfUk9MRTpcIuS4jeWQiOazleeahOe+pOaIkOWRmOi6q+S7ve+8jOivt+ajgOafpeS8oOWFpeWPguaVsFwiLENBTk5PVF9TRVRfU0VMRl9NRU1CRVJfUk9MRTpcIuS4jeiDveiuvue9ruiHquW3seeahOe+pOaIkOWRmOi6q+S7ve+8jOivt+ajgOafpeS8oOWFpeWPguaVsFwiLENBTk5PVF9NVVRFX1NFTEY6XCLkuI3og73lsIboh6rlt7HnpoHoqIDvvIzor7fmo4Dmn6XkvKDlhaXlj4LmlbBcIixOT1RfTVlfRlJJRU5EOlwi6Z2e5aW95Y+L5YWz57O7XCIsQUxSRUFEWV9NWV9GUklFTkQ6XCLlt7Lnu4/mmK/lpb3lj4vlhbPns7tcIixGUklFTkRfR1JPVVBfRVhJU1RFRDpcIuWlveWPi+WIhue7hOW3suWtmOWcqFwiLEZSSUVORF9HUk9VUF9OT1RfRVhJU1Q6XCLlpb3lj4vliIbnu4TkuI3lrZjlnKhcIixGUklFTkRfQVBQTElDQVRJT05fTk9UX0VYSVNUOlwi5aW95Y+L55Sz6K+35LiN5a2Y5ZyoXCIsVVBEQVRFX1BST0ZJTEVfSU5WQUxJRF9QQVJBTTpcIuS8oOWFpSB1cGRhdGVNeVByb2ZpbGUg5o6l5Y+j55qE5Y+C5pWw5peg5pWIXCIsVVBEQVRFX1BST0ZJTEVfTk9fS0VZOlwidXBkYXRlTXlQcm9maWxlIOaXoOagh+mFjei1hOaWmeWtl+auteaIluiHquWumuS5iei1hOaWmeWtl+autVwiLEFERF9CTEFDS0xJU1RfSU5WQUxJRF9QQVJBTTpcIuS8oOWFpSBhZGRUb0JsYWNrbGlzdCDmjqXlj6PnmoTlj4LmlbDml6DmlYhcIixERUxfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU06XCLkvKDlhaUgcmVtb3ZlRnJvbUJsYWNrbGlzdCDmjqXlj6PnmoTlj4LmlbDml6DmlYhcIixDQU5OT1RfQUREX1NFTEZfVE9fQkxBQ0tMSVNUOlwi5LiN6IO95ouJ6buR6Ieq5bexXCIsQUREX0ZSSUVORF9JTlZBTElEX1BBUkFNOlwi5Lyg5YWlIGFkZEZyaWVuZCDmjqXlj6PnmoTlj4LmlbDml6DmlYhcIixORVRXT1JLX0VSUk9SOlwi572R57uc6ZSZ6K+vXCIsTkVUV09SS19USU1FT1VUOlwi6K+35rGC6LaF5pe2XCIsTkVUV09SS19CQVNFX09QVElPTlNfTk9fVVJMOlwi572R57uc5bGC5Yid5aeL5YyW6ZSZ6K+v77yM57y65bCRIFVSTCDlj4LmlbBcIixORVRXT1JLX1VOREVGSU5FRF9TRVJWRVJfTkFNRTpcIuaJk+WMhemUmeivr++8jOacquWumuS5ieeahCBzZXJ2ZXJOYW1lXCIsTkVUV09SS19QQUNLQUdFX1VOREVGSU5FRDpcIuacquWumuS5ieeahCBwYWNrYWdlQ29uZmlnXCIsTk9fTkVUV09SSzpcIuacqui/nuaOpeWIsOe9kee7nFwiLENPTlZFUlRPUl9JUlJFR1VMQVJfUEFSQU1TOlwi5LiN6KeE6IyD55qE5Y+C5pWw5ZCN56ewXCIsTk9USUNFX1JVTkxPT1BfVU5FWFBFQ1RFRF9DT05ESVRJT046XCLmhI/mlpnlpJbnmoTpgJrnn6XmnaHku7ZcIixOT1RJQ0VfUlVOTE9PUF9PRkZTRVRfTE9TVDpcIl9zeW5jT2Zmc2V0IOS4ouWksVwiLEdFVF9MT05HUE9MTF9JRF9GQUlMRUQ6XCLojrflj5YgbG9uZ3BvbGxpbmcgaWQg5aSx6LSlXCIsVU5DQVVHSFRfRVJST1I6XCLmnKrnu4/mmI7noa7lrprkuYnnmoTplJnor69cIixJTlZBTElEX09QRVJBVElPTjpcIuaXoOaViOaTjeS9nO+8jOWmguiwg+eUqOS6huacquWumuS5ieaIluiAheacquWunueOsOeahOaWueazleetiVwiLENBTk5PVF9GSU5EX1BST1RPQ09MOlwi5peg5rOV5om+5Yiw5Y2P6K6uXCIsQ0FOTk9UX0ZJTkRfTU9EVUxFOlwi5peg5rOV5om+5Yiw5qih5Z2X77yM6K+35Y+C6ICD77yaaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL3R1dG9yaWFsLTAzLXNucy5odG1sXCIsU0RLX0lTX05PVF9SRUFEWTpcIuaOpeWPo+mcgOimgSBTREsg5aSE5LqOIHJlYWR5IOeKtuaAgeWQjuaJjeiDveiwg+eUqFwiLExPR0dJTkc6XCLnlKjmiLfmraPlnKjnmbvlvZXkuK1cIixMT0dJTl9GQUlMRUQ6XCLnlKjmiLfnmbvlvZXlpLHotKVcIixLSUNLRURfT1VUX01VTFRfREVWSUNFOlwi55So5oi35aSa57uI56uv55m75b2V6KKr6Lii5Ye6XCIsS0lDS0VEX09VVF9NVUxUX0FDQ09VTlQ6XCLnlKjmiLflpJrlrp7kvovnmbvlvZXooqvouKLlh7pcIixLSUNLRURfT1VUX1VTRVJTSUdfRVhQSVJFRDpcIueUqOaItyB1c2VyU2lnIOi/h+acn+iiq+i4ouWHulwiLExPR0dFRF9PVVQ6XCLnlKjmiLflt7Lnmbvlh7pcIixPVkVSX0ZSRVFVRU5DWV9MSU1JVDpcIui2heWHuiBTREsg6aKR546H5o6n5Yi2XCIsTE9OR19QT0xMX0tJQ0tfT1VUOlwi5qOA5rWL5Yiw5aSa5LiqIHdlYiDlrp7kvovnmbvlvZXvvIzmtojmga/pgJrpgZPkuIvnur9cIixPUEVOX1NFUlZJQ0VfT1ZFUkxPQURfRVJST1I6XCLlkI7lj7DmnI3liqHmraPlv5nvvIzor7fnqI3lkI7lho3or5VcIixNRVNTQUdFX0EyS0VZX0VYUElSRUQ6XCLmtojmga/plJnor6/noIHvvJpVc2VyU2lnIOaIliBBMiDlpLHmlYjjgIJcIixBQ0NPVU5UX0EyS0VZX0VYUElSRUQ6XCLluJDlj7fplJnor6/noIHvvJpVc2VyU2lnIOW3sui/h+acn++8jOivt+mHjeaWsOeUn+aIkOOAguW7uuiuriBVc2VyU2lnIOacieaViOacn+iuvue9ruS4jeWwj+S6jjI05bCP5pe244CCXCIsTE9OR19QT0xMX0FQSV9QQVJBTV9FUlJPUjpcImxvbmdQb2xsIEFQSSBwYXJhbWV0ZXJzIGVycm9yXCJ9LHBwPVwibmV0d29ya1JUVFwiLGdwPVwibWVzc2FnZUUyRURlbGF5XCIsaHA9XCJzZW5kTWVzc2FnZUMyQ1wiLGZwPVwic2VuZE1lc3NhZ2VHcm91cFwiLF9wPVwic2VuZE1lc3NhZ2VHcm91cEFWXCIsbXA9XCJzZW5kTWVzc2FnZVJpY2hNZWRpYVwiLHZwPVwiY29zVXBsb2FkXCIsTXA9XCJtZXNzYWdlUmVjZWl2ZWRHcm91cFwiLHlwPVwibWVzc2FnZVJlY2VpdmVkR3JvdXBBVlB1c2hcIixJcD1cIm1lc3NhZ2VSZWNlaXZlZEdyb3VwQVZQdWxsXCIsRXA9KFRuKG5sPXt9LHBwLDIpLFRuKG5sLGdwLDMpLFRuKG5sLGhwLDQpLFRuKG5sLGZwLDUpLFRuKG5sLF9wLDYpLFRuKG5sLG1wLDcpLFRuKG5sLE1wLDgpLFRuKG5sLHlwLDkpLFRuKG5sLElwLDEwKSxUbihubCx2cCwxMSksbmwpLFRwPXtpbmZvOjQsd2FybmluZzo1LGVycm9yOjZ9LEFwPXt3aWZpOjEsXCIyZ1wiOjIsXCIzZ1wiOjMsXCI0Z1wiOjQsXCI1Z1wiOjUsdW5rbm93bjo2LG5vbmU6NyxvbmxpbmU6OH0sU3A9e2xvZ2luOjR9LERwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuZXZlbnRUeXBlPVNwW3RdfHwwLHRoaXMudGltZXN0YW1wPTAsdGhpcy5uZXR3b3JrVHlwZT04LHRoaXMuY29kZT0wLHRoaXMubWVzc2FnZT1cIlwiLHRoaXMubW9yZU1lc3NhZ2U9XCJcIix0aGlzLmV4dGVuc2lvbj10LHRoaXMuY29zdFRpbWU9MCx0aGlzLmR1cGxpY2F0ZT0hMSx0aGlzLmxldmVsPTQsdGhpcy51aVBsYXRmb3JtPXZvaWQgMCx0aGlzLl9zZW50RmxhZz0hMSx0aGlzLl9zdGFydHRzPVdpKCl9cmV0dXJuIEVuKGUsW3trZXk6XCJ1cGRhdGVUaW1lU3RhbXBcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudGltZXN0YW1wPVdpKCl9fSx7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc3RhcnR0cz1lLHRoaXN9fSx7a2V5OlwiZW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXTtpZighdGhpcy5fc2VudEZsYWcpe3ZhciBuPVdpKCk7MD09PXRoaXMuY29zdFRpbWUmJih0aGlzLmNvc3RUaW1lPW4tdGhpcy5fc3RhcnR0cyksdGhpcy5zZXRNb3JlTWVzc2FnZShcInN0YXJ0dHM6XCIuY29uY2F0KHRoaXMuX3N0YXJ0dHMsXCIgZW5kdHM6XCIpLmNvbmNhdChuKSksdD8odGhpcy5fc2VudEZsYWc9ITAsdGhpcy5fZXZlbnRTdGF0TW9kdWxlJiZ0aGlzLl9ldmVudFN0YXRNb2R1bGUucHVzaEluKHRoaXMpKTpzZXRUaW1lb3V0KChmdW5jdGlvbigpe2UuX3NlbnRGbGFnPSEwLGUuX2V2ZW50U3RhdE1vZHVsZSYmZS5fZXZlbnRTdGF0TW9kdWxlLnB1c2hJbihlKX0pLDApfX19LHtrZXk6XCJzZXRFcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yPyh0aGlzLl9zZW50RmxhZ3x8KHRoaXMuc2V0TmV0d29ya1R5cGUobiksdD8oZS5jb2RlJiZ0aGlzLnNldENvZGUoZS5jb2RlKSxlLm1lc3NhZ2UmJnRoaXMuc2V0TW9yZU1lc3NhZ2UoZS5tZXNzYWdlKSk6KHRoaXMuc2V0Q29kZShscC5OT19ORVRXT1JLKSx0aGlzLnNldE1vcmVNZXNzYWdlKGRwLk5PX05FVFdPUkspKSx0aGlzLnNldExldmVsKFwiZXJyb3JcIikpLHRoaXMpOihRaS53YXJuKFwiU1NPTG9nRGF0YS5zZXRFcnJvciB2YWx1ZSBub3QgaW5zdGFuY2VvZiBFcnJvciwgcGxlYXNlIGNoZWNrIVwiKSx0aGlzKX19LHtrZXk6XCJzZXRDb2RlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGh1KGUpfHx0aGlzLl9zZW50RmxhZ3x8KFwiRUNPTk5BQk9SVEVEXCI9PT1lJiYodGhpcy5jb2RlPTEwMyksY3UoZSk/dGhpcy5jb2RlPWU6UWkud2FybihcIlNTT0xvZ0RhdGEuc2V0Q29kZSB2YWx1ZSBub3QgYSBudW1iZXIsIHBsZWFzZSBjaGVjayFcIixlLE1uKGUpKSksdGhpc319LHtrZXk6XCJzZXRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGh1KGUpfHx0aGlzLl9zZW50RmxhZ3x8KGN1KGUpJiYodGhpcy5tZXNzYWdlPWUudG9TdHJpbmcoKSksbHUoZSkmJih0aGlzLm1lc3NhZ2U9ZSkpLHRoaXN9fSx7a2V5Olwic2V0Q29zdFRpbWVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb3N0VGltZT1lLHRoaXN9fSx7a2V5Olwic2V0TGV2ZWxcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gaHUoZSl8fHRoaXMuX3NlbnRGbGFnfHwodGhpcy5sZXZlbD1UcFtlXSksdGhpc319LHtrZXk6XCJzZXRNb3JlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBYdSh0aGlzLm1vcmVNZXNzYWdlKT90aGlzLm1vcmVNZXNzYWdlPVwiXCIuY29uY2F0KGUpOnRoaXMubW9yZU1lc3NhZ2UrPVwiIFwiLmNvbmNhdChlKSx0aGlzfX0se2tleTpcInNldE5ldHdvcmtUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoaHUoZSkpUWkud2FybihcIlNTT0xvZ0RhdGEuc2V0TmV0d29ya1R5cGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBwbGVhc2UgY2hlY2shXCIpO2Vsc2V7dmFyIHQ9QXBbZS50b0xvd2VyQ2FzZSgpXTtodSh0KXx8KHRoaXMubmV0d29ya1R5cGU9dCl9cmV0dXJuIHRoaXN9fSx7a2V5OlwiZ2V0U3RhcnRUc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0dHN9fSx7a2V5Olwic2V0VUlQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMudWlQbGF0Zm9ybT1lfX1dLFt7a2V5OlwiYmluZEV2ZW50U3RhdE1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLl9ldmVudFN0YXRNb2R1bGU9dH19XSksZX0oKSxOcD1cInNka0NvbnN0cnVjdFwiLENwPVwic2RrUmVhZHlcIixrcD1cImxvZ2luXCIsTHA9XCJsb2dvdXRcIixScD1cImtpY2tlZE91dFwiLE9wPVwicmVnaXN0ZXJQbHVnaW5cIixHcD1cImtpY2tPdGhlclwiLGJwPVwid3NDb25uZWN0XCIsd3A9XCJ3c09uT3BlblwiLFBwPVwid3NPbkNsb3NlXCIsVXA9XCJ3c09uRXJyb3JcIixGcD1cIm5ldHdvcmtDaGFuZ2VcIixxcD1cImdldENvc0F1dGhLZXlcIix4cD1cImdldENvc1ByZVNpZ1VybFwiLFZwPVwiZ2V0U25hcHNob3RJbmZvXCIsS3A9XCJ1cGxvYWRcIixCcD1cInNlbmRNZXNzYWdlXCIsSHA9XCJzZW5kTWVzc2FnZVdpdGhSZWNlaXB0XCIsanA9XCJnZXRDMkNSb2FtaW5nTWVzc2FnZXNcIixXcD1cImdldEdyb3VwUm9hbWluZ01lc3NhZ2VzXCIsWXA9XCJnZXRSZWFkUmVjZWlwdFwiLCRwPVwiZ2V0UmVhZFJlY2VpcHREZXRhaWxcIix6cD1cInNlbmRSZWFkUmVjZWlwdFwiLEpwPVwicmV2b2tlTWVzc2FnZVwiLFhwPVwiZGVsZXRlTWVzc2FnZVwiLFFwPVwic2V0QzJDTWVzc2FnZVJlYWRcIixacD1cInNldEdyb3VwTWVzc2FnZVJlYWRcIixlZz1cImVtcHR5TWVzc2FnZUJvZHlcIix0Zz1cImdldFBlZXJSZWFkVGltZVwiLG5nPVwidXBsb2FkTWVyZ2VyTWVzc2FnZVwiLG9nPVwiZG93bmxvYWRNZXJnZXJNZXNzYWdlXCIscmc9XCJqc29uUGFyc2VFcnJvclwiLGFnPVwibWVzc2FnZUUyRURlbGF5RXhjZXB0aW9uXCIsc2c9XCJnZXRDb252ZXJzYXRpb25MaXN0XCIsaWc9XCJnZXRDb252ZXJzYXRpb25Qcm9maWxlXCIsdWc9XCJkZWxldGVDb252ZXJzYXRpb25cIixjZz1cInBpbkNvbnZlcnNhdGlvblwiLGxnPVwiZ2V0Q29udmVyc2F0aW9uTGlzdEluU3RvcmFnZVwiLGRnPVwic3luY0NvbnZlcnNhdGlvbkxpc3RcIixwZz1cInNldEFsbE1lc3NhZ2VSZWFkXCIsZ2c9XCJjcmVhdGVHcm91cFwiLGhnPVwiYXBwbHlKb2luR3JvdXBcIixmZz1cInF1aXRHcm91cFwiLF9nPVwic2VhcmNoR3JvdXBCeUlEXCIsbWc9XCJjaGFuZ2VHcm91cE93bmVyXCIsdmc9XCJoYW5kbGVHcm91cEFwcGxpY2F0aW9uXCIsTWc9XCJoYW5kbGVHcm91cEludml0YXRpb25cIix5Zz1cInNldE1lc3NhZ2VSZW1pbmRUeXBlXCIsSWc9XCJkaXNtaXNzR3JvdXBcIixFZz1cInVwZGF0ZUdyb3VwUHJvZmlsZVwiLFRnPVwiZ2V0R3JvdXBMaXN0XCIsQWc9XCJnZXRHcm91cFByb2ZpbGVcIixTZz1cImdldEdyb3VwTGlzdEluU3RvcmFnZVwiLERnPVwiZ2V0R3JvdXBMYXN0U2VxdWVuY2VcIixOZz1cImdldEdyb3VwTWlzc2luZ01lc3NhZ2VcIixDZz1cInBhZ2luZ0dldEdyb3VwTGlzdFwiLGtnPVwiZ2V0R3JvdXBTaW1wbGlmaWVkSW5mb1wiLExnPVwiam9pbldpdGhvdXRBdXRoXCIsUmc9XCJpbml0R3JvdXBBdHRyaWJ1dGVzXCIsT2c9XCJzZXRHcm91cEF0dHJpYnV0ZXNcIixHZz1cImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wiLGJnPVwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsd2c9XCJnZXRHcm91cE1lbWJlckxpc3RcIixQZz1cImdldEdyb3VwTWVtYmVyUHJvZmlsZVwiLFVnPVwiYWRkR3JvdXBNZW1iZXJcIixGZz1cImRlbGV0ZUdyb3VwTWVtYmVyXCIscWc9XCJzZXRHcm91cE1lbWJlck11dGVUaW1lXCIseGc9XCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIsVmc9XCJzZXRHcm91cE1lbWJlclJvbGVcIixLZz1cInNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGRcIixCZz1cImdldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIixIZz1cImxvbmdQb2xsaW5nQVZFcnJvclwiLGpnPVwibWVzc2FnZUxvc3NcIixXZz1cIm1lc3NhZ2VTdGFja2VkXCIsWWc9XCJnZXRVc2VyUHJvZmlsZVwiLCRnPVwidXBkYXRlTXlQcm9maWxlXCIsemc9XCJnZXRCbGFja2xpc3RcIixKZz1cImFkZFRvQmxhY2tsaXN0XCIsWGc9XCJyZW1vdmVGcm9tQmxhY2tsaXN0XCIsUWc9XCJhZGRGcmllbmRcIixaZz1cImNoZWNrRnJpZW5kXCIsZWg9XCJyZW1vdmVGcm9tRnJpZW5kTGlzdFwiLHRoPVwiZ2V0RnJpZW5kUHJvZmlsZVwiLG5oPVwiZ2V0RnJpZW5kTGlzdFwiLG9oPVwidXBkYXRlRnJpZW5kXCIscmg9XCJnZXRGcmllbmRBcHBsaWNhdGlvbkxpc3RcIixhaD1cImRlbGV0ZUZyaWVuZEFwcGxpY2F0aW9uXCIsc2g9XCJhY2NlcHRGcmllbmRBcHBsaWNhdGlvblwiLGloPVwicmVmdXNlRnJpZW5kQXBwbGljYXRpb25cIix1aD1cInNldEZyaWVuZEFwcGxpY2F0aW9uUmVhZFwiLGNoPVwiY3JlYXRlRnJpZW5kR3JvdXBcIixsaD1cImRlbGV0ZUZyaWVuZEdyb3VwXCIsZGg9XCJyZW5hbWVGcmllbmRHcm91cFwiLHBoPVwiYWRkVG9GcmllbmRHcm91cFwiLGdoPVwicmVtb3ZlRnJvbUZyaWVuZEdyb3VwXCIsaGg9XCJnZXRGcmllbmRHcm91cExpc3RcIixmaD1cImNhbGxiYWNrRnVuY3Rpb25FcnJvclwiLF9oPVwiZmV0Y2hDbG91ZENvbnRyb2xDb25maWdcIixtaD1cInB1c2hlZENsb3VkQ29udHJvbENvbmZpZ1wiLHZoPVwiZmV0Y2hDb21tZXJjaWFsQ29uZmlnXCIsTWg9XCJwdXNoZWRDb21tZXJjaWFsQ29uZmlnXCIseWg9XCJlcnJvclwiLEloPVwibGFzdE1lc3NhZ2VOb3RFeGlzdFwiLEVoPXUuZixUaD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciBuLG89Zih0KSxyPUV0KG8pLHM9ci5sZW5ndGgsaT0wLHU9W107cz5pOyluPXJbaSsrXSxhJiYhRWguY2FsbChvLG4pfHx1LnB1c2goZT9bbixvW25dXTpvW25dKTtyZXR1cm4gdX19LEFoPXtlbnRyaWVzOlRoKCEwKSx2YWx1ZXM6VGgoITEpfS52YWx1ZXM7a2Uoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITB9LHt2YWx1ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIEFoKGUpfX0pO3ZhciBTaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLnR5cGU9WW4uTVNHX1RFWFQsdGhpcy5jb250ZW50PXt0ZXh0OnQudGV4dHx8XCJcIn19cmV0dXJuIEVuKGUsW3trZXk6XCJzZXRUZXh0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jb250ZW50LnRleHQ9ZX19LHtrZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLmNvbnRlbnQudGV4dC5sZW5ndGh9fV0pLGV9KCksRGg9T2JqZWN0LmFzc2lnbixOaD1PYmplY3QuZGVmaW5lUHJvcGVydHksQ2g9IURofHxyKChmdW5jdGlvbigpe2lmKGEmJjEhPT1EaCh7YjoxfSxEaChOaCh7fSxcImFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtOaCh0aGlzLFwiYlwiLHt2YWx1ZTozLGVudW1lcmFibGU6ITF9KX19KSx7YjoyfSkpLmIpcmV0dXJuITA7dmFyIGU9e30sdD17fSxuPVN5bWJvbCgpO3JldHVybiBlW25dPTcsXCJhYmNkZWZnaGlqa2xtbm9wcXJzdFwiLnNwbGl0KFwiXCIpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV09ZX0pKSw3IT1EaCh7fSxlKVtuXXx8XCJhYmNkZWZnaGlqa2xtbm9wcXJzdFwiIT1FdChEaCh7fSx0KSkuam9pbihcIlwiKX0pKT9mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1PZShlKSxvPWFyZ3VtZW50cy5sZW5ndGgscj0xLHM9dmUuZixpPXUuZjtvPnI7KWZvcih2YXIgYyxsPWcoYXJndW1lbnRzW3IrK10pLGQ9cz9FdChsKS5jb25jYXQocyhsKSk6RXQobCkscD1kLmxlbmd0aCxoPTA7cD5oOyljPWRbaCsrXSxhJiYhaS5jYWxsKGwsYyl8fChuW2NdPWxbY10pO3JldHVybiBufTpEaDtrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6T2JqZWN0LmFzc2lnbiE9PUNofSx7YXNzaWduOkNofSk7dmFyIGtoPXFlKFwiaXRlcmF0b3JcIiksTGg9IXIoKGZ1bmN0aW9uKCl7dmFyIGU9bmV3IFVSTChcImI/YT0xJmI9MiZjPTNcIixcImh0dHA6Ly9hXCIpLHQ9ZS5zZWFyY2hQYXJhbXMsbj1cIlwiO3JldHVybiBlLnBhdGhuYW1lPVwiYyUyMGRcIix0LmZvckVhY2goKGZ1bmN0aW9uKGUsbyl7dC5kZWxldGUoXCJiXCIpLG4rPW8rZX0pKSwhdC5zb3J0fHxcImh0dHA6Ly9hL2MlMjBkP2E9MSZjPTNcIiE9PWUuaHJlZnx8XCIzXCIhPT10LmdldChcImNcIil8fFwiYT0xXCIhPT1TdHJpbmcobmV3IFVSTFNlYXJjaFBhcmFtcyhcIj9hPTFcIikpfHwhdFtraF18fFwiYVwiIT09bmV3IFVSTChcImh0dHBzOi8vYUBiXCIpLnVzZXJuYW1lfHxcImJcIiE9PW5ldyBVUkxTZWFyY2hQYXJhbXMobmV3IFVSTFNlYXJjaFBhcmFtcyhcImE9YlwiKSkuZ2V0KFwiYVwiKXx8XCJ4bi0tZTFheWJjXCIhPT1uZXcgVVJMKFwiaHR0cDovL9GC0LXRgdGCXCIpLmhvc3R8fFwiIyVEMCVCMVwiIT09bmV3IFVSTChcImh0dHA6Ly9hI9CxXCIpLmhhc2h8fFwiYTFjM1wiIT09bnx8XCJ4XCIhPT1uZXcgVVJMKFwiaHR0cDovL3hcIix2b2lkIDApLmhvc3R9KSksUmg9L1teXFwwLVxcdTAwN0VdLyxPaD0vWy5cXHUzMDAyXFx1RkYwRVxcdUZGNjFdL2csR2g9XCJPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2Vzc1wiLGJoPU1hdGguZmxvb3Isd2g9U3RyaW5nLmZyb21DaGFyQ29kZSxQaD1mdW5jdGlvbihlKXtyZXR1cm4gZSsyMis3NSooZTwyNil9LFVoPWZ1bmN0aW9uKGUsdCxuKXt2YXIgbz0wO2ZvcihlPW4/YmgoZS83MDApOmU+PjEsZSs9YmgoZS90KTtlPjQ1NTtvKz0zNillPWJoKGUvMzUpO3JldHVybiBiaChvKzM2KmUvKGUrMzgpKX0sRmg9ZnVuY3Rpb24oZSl7dmFyIHQsbixvPVtdLHI9KGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MCxvPWUubGVuZ3RoO248bzspe3ZhciByPWUuY2hhckNvZGVBdChuKyspO2lmKHI+PTU1Mjk2JiZyPD01NjMxOSYmbjxvKXt2YXIgYT1lLmNoYXJDb2RlQXQobisrKTs1NjMyMD09KDY0NTEyJmEpP3QucHVzaCgoKDEwMjMmcik8PDEwKSsoMTAyMyZhKSs2NTUzNik6KHQucHVzaChyKSxuLS0pfWVsc2UgdC5wdXNoKHIpfXJldHVybiB0fShlKSkubGVuZ3RoLGE9MTI4LHM9MCxpPTcyO2Zvcih0PTA7dDxlLmxlbmd0aDt0KyspKG49ZVt0XSk8MTI4JiZvLnB1c2god2gobikpO3ZhciB1PW8ubGVuZ3RoLGM9dTtmb3IodSYmby5wdXNoKFwiLVwiKTtjPHI7KXt2YXIgbD0yMTQ3NDgzNjQ3O2Zvcih0PTA7dDxlLmxlbmd0aDt0KyspKG49ZVt0XSk+PWEmJm48bCYmKGw9bik7dmFyIGQ9YysxO2lmKGwtYT5iaCgoMjE0NzQ4MzY0Ny1zKS9kKSl0aHJvdyBSYW5nZUVycm9yKEdoKTtmb3Iocys9KGwtYSkqZCxhPWwsdD0wO3Q8ZS5sZW5ndGg7dCsrKXtpZigobj1lW3RdKTxhJiYrK3M+MjE0NzQ4MzY0Nyl0aHJvdyBSYW5nZUVycm9yKEdoKTtpZihuPT1hKXtmb3IodmFyIHA9cyxnPTM2OztnKz0zNil7dmFyIGg9Zzw9aT8xOmc+PWkrMjY/MjY6Zy1pO2lmKHA8aClicmVhazt2YXIgZj1wLWgsXz0zNi1oO28ucHVzaCh3aChQaChoK2YlXykpKSxwPWJoKGYvXyl9by5wdXNoKHdoKFBoKHApKSksaT1VaChzLGQsYz09dSkscz0wLCsrY319KytzLCsrYX1yZXR1cm4gby5qb2luKFwiXCIpfSxxaD1mdW5jdGlvbihlKXt2YXIgdD1ndChlKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IFR5cGVFcnJvcihTdHJpbmcoZSkrXCIgaXMgbm90IGl0ZXJhYmxlXCIpO3JldHVybiBEKHQuY2FsbChlKSl9LHhoPW5lKFwiZmV0Y2hcIiksVmg9bmUoXCJIZWFkZXJzXCIpLEtoPXFlKFwiaXRlcmF0b3JcIiksQmg9US5zZXQsSGg9US5nZXR0ZXJGb3IoXCJVUkxTZWFyY2hQYXJhbXNcIiksamg9US5nZXR0ZXJGb3IoXCJVUkxTZWFyY2hQYXJhbXNJdGVyYXRvclwiKSxXaD0vXFwrL2csWWg9QXJyYXkoNCksJGg9ZnVuY3Rpb24oZSl7cmV0dXJuIFloW2UtMV18fChZaFtlLTFdPVJlZ0V4cChcIigoPzolW1xcXFxkYS1mXXsyfSl7XCIrZStcIn0pXCIsXCJnaVwiKSl9LHpoPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGUpfWNhdGNoKHpJKXtyZXR1cm4gZX19LEpoPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShXaCxcIiBcIiksbj00O3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHQpfWNhdGNoKHpJKXtmb3IoO247KXQ9dC5yZXBsYWNlKCRoKG4tLSksemgpO3JldHVybiB0fX0sWGg9L1shJygpfl18JTIwL2csUWg9e1wiIVwiOlwiJTIxXCIsXCInXCI6XCIlMjdcIixcIihcIjpcIiUyOFwiLFwiKVwiOlwiJTI5XCIsXCJ+XCI6XCIlN0VcIixcIiUyMFwiOlwiK1wifSxaaD1mdW5jdGlvbihlKXtyZXR1cm4gUWhbZV19LGVmPWZ1bmN0aW9uKGUpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoZSkucmVwbGFjZShYaCxaaCl9LHRmPWZ1bmN0aW9uKGUsdCl7aWYodClmb3IodmFyIG4sbyxyPXQuc3BsaXQoXCImXCIpLGE9MDthPHIubGVuZ3RoOykobj1yW2ErK10pLmxlbmd0aCYmKG89bi5zcGxpdChcIj1cIiksZS5wdXNoKHtrZXk6Smgoby5zaGlmdCgpKSx2YWx1ZTpKaChvLmpvaW4oXCI9XCIpKX0pKX0sbmY9ZnVuY3Rpb24oZSl7dGhpcy5lbnRyaWVzLmxlbmd0aD0wLHRmKHRoaXMuZW50cmllcyxlKX0sb2Y9ZnVuY3Rpb24oZSx0KXtpZihlPHQpdGhyb3cgVHlwZUVycm9yKFwiTm90IGVub3VnaCBhcmd1bWVudHNcIil9LHJmPXJuKChmdW5jdGlvbihlLHQpe0JoKHRoaXMse3R5cGU6XCJVUkxTZWFyY2hQYXJhbXNJdGVyYXRvclwiLGl0ZXJhdG9yOnFoKEhoKGUpLmVudHJpZXMpLGtpbmQ6dH0pfSksXCJJdGVyYXRvclwiLChmdW5jdGlvbigpe3ZhciBlPWpoKHRoaXMpLHQ9ZS5raW5kLG49ZS5pdGVyYXRvci5uZXh0KCksbz1uLnZhbHVlO3JldHVybiBuLmRvbmV8fChuLnZhbHVlPVwia2V5c1wiPT09dD9vLmtleTpcInZhbHVlc1wiPT09dD9vLnZhbHVlOltvLmtleSxvLnZhbHVlXSksbn0pKSxhZj1mdW5jdGlvbigpe2tyKHRoaXMsYWYsXCJVUkxTZWFyY2hQYXJhbXNcIik7dmFyIGUsdCxuLG8scixhLHMsaSx1LGM9YXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDAsbD10aGlzLGQ9W107aWYoQmgobCx7dHlwZTpcIlVSTFNlYXJjaFBhcmFtc1wiLGVudHJpZXM6ZCx1cGRhdGVVUkw6ZnVuY3Rpb24oKXt9LHVwZGF0ZVNlYXJjaFBhcmFtczpuZn0pLHZvaWQgMCE9PWMpaWYoXyhjKSlpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihlPWd0KGMpKSlmb3Iobj0odD1lLmNhbGwoYykpLm5leHQ7IShvPW4uY2FsbCh0KSkuZG9uZTspe2lmKChzPShhPShyPXFoKEQoby52YWx1ZSkpKS5uZXh0KS5jYWxsKHIpKS5kb25lfHwoaT1hLmNhbGwocikpLmRvbmV8fCFhLmNhbGwocikuZG9uZSl0aHJvdyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBzZXF1ZW5jZSB3aXRoIGxlbmd0aCAyXCIpO2QucHVzaCh7a2V5OnMudmFsdWUrXCJcIix2YWx1ZTppLnZhbHVlK1wiXCJ9KX1lbHNlIGZvcih1IGluIGMpTShjLHUpJiZkLnB1c2goe2tleTp1LHZhbHVlOmNbdV0rXCJcIn0pO2Vsc2UgdGYoZCxcInN0cmluZ1wiPT10eXBlb2YgYz9cIj9cIj09PWMuY2hhckF0KDApP2Muc2xpY2UoMSk6YzpjK1wiXCIpfSxzZj1hZi5wcm90b3R5cGU7RHIoc2Yse2FwcGVuZDpmdW5jdGlvbihlLHQpe29mKGFyZ3VtZW50cy5sZW5ndGgsMik7dmFyIG49SGgodGhpcyk7bi5lbnRyaWVzLnB1c2goe2tleTplK1wiXCIsdmFsdWU6dCtcIlwifSksbi51cGRhdGVVUkwoKX0sZGVsZXRlOmZ1bmN0aW9uKGUpe29mKGFyZ3VtZW50cy5sZW5ndGgsMSk7Zm9yKHZhciB0PUhoKHRoaXMpLG49dC5lbnRyaWVzLG89ZStcIlwiLHI9MDtyPG4ubGVuZ3RoOyluW3JdLmtleT09PW8/bi5zcGxpY2UociwxKTpyKys7dC51cGRhdGVVUkwoKX0sZ2V0OmZ1bmN0aW9uKGUpe29mKGFyZ3VtZW50cy5sZW5ndGgsMSk7Zm9yKHZhciB0PUhoKHRoaXMpLmVudHJpZXMsbj1lK1wiXCIsbz0wO288dC5sZW5ndGg7bysrKWlmKHRbb10ua2V5PT09bilyZXR1cm4gdFtvXS52YWx1ZTtyZXR1cm4gbnVsbH0sZ2V0QWxsOmZ1bmN0aW9uKGUpe29mKGFyZ3VtZW50cy5sZW5ndGgsMSk7Zm9yKHZhciB0PUhoKHRoaXMpLmVudHJpZXMsbj1lK1wiXCIsbz1bXSxyPTA7cjx0Lmxlbmd0aDtyKyspdFtyXS5rZXk9PT1uJiZvLnB1c2godFtyXS52YWx1ZSk7cmV0dXJuIG99LGhhczpmdW5jdGlvbihlKXtvZihhcmd1bWVudHMubGVuZ3RoLDEpO2Zvcih2YXIgdD1IaCh0aGlzKS5lbnRyaWVzLG49ZStcIlwiLG89MDtvPHQubGVuZ3RoOylpZih0W28rK10ua2V5PT09bilyZXR1cm4hMDtyZXR1cm4hMX0sc2V0OmZ1bmN0aW9uKGUsdCl7b2YoYXJndW1lbnRzLmxlbmd0aCwxKTtmb3IodmFyIG4sbz1IaCh0aGlzKSxyPW8uZW50cmllcyxhPSExLHM9ZStcIlwiLGk9dCtcIlwiLHU9MDt1PHIubGVuZ3RoO3UrKykobj1yW3VdKS5rZXk9PT1zJiYoYT9yLnNwbGljZSh1LS0sMSk6KGE9ITAsbi52YWx1ZT1pKSk7YXx8ci5wdXNoKHtrZXk6cyx2YWx1ZTppfSksby51cGRhdGVVUkwoKX0sc29ydDpmdW5jdGlvbigpe3ZhciBlLHQsbixvPUhoKHRoaXMpLHI9by5lbnRyaWVzLGE9ci5zbGljZSgpO2ZvcihyLmxlbmd0aD0wLG49MDtuPGEubGVuZ3RoO24rKyl7Zm9yKGU9YVtuXSx0PTA7dDxuO3QrKylpZihyW3RdLmtleT5lLmtleSl7ci5zcGxpY2UodCwwLGUpO2JyZWFrfXQ9PT1uJiZyLnB1c2goZSl9by51cGRhdGVVUkwoKX0sZm9yRWFjaDpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj1IaCh0aGlzKS5lbnRyaWVzLG89UmUoZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwzKSxyPTA7cjxuLmxlbmd0aDspbygodD1uW3IrK10pLnZhbHVlLHQua2V5LHRoaXMpfSxrZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByZih0aGlzLFwia2V5c1wiKX0sdmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByZih0aGlzLFwidmFsdWVzXCIpfSxlbnRyaWVzOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByZih0aGlzLFwiZW50cmllc1wiKX19LHtlbnVtZXJhYmxlOiEwfSksWihzZixLaCxzZi5lbnRyaWVzKSxaKHNmLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXtmb3IodmFyIGUsdD1IaCh0aGlzKS5lbnRyaWVzLG49W10sbz0wO288dC5sZW5ndGg7KWU9dFtvKytdLG4ucHVzaChlZihlLmtleSkrXCI9XCIrZWYoZS52YWx1ZSkpO3JldHVybiBuLmpvaW4oXCImXCIpfSkse2VudW1lcmFibGU6ITB9KSx0bihhZixcIlVSTFNlYXJjaFBhcmFtc1wiKSxrZSh7Z2xvYmFsOiEwLGZvcmNlZDohTGh9LHtVUkxTZWFyY2hQYXJhbXM6YWZ9KSxMaHx8XCJmdW5jdGlvblwiIT10eXBlb2YgeGh8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIFZofHxrZSh7Z2xvYmFsOiEwLGVudW1lcmFibGU6ITAsZm9yY2VkOiEwfSx7ZmV0Y2g6ZnVuY3Rpb24oZSl7dmFyIHQsbixvLHI9W2VdO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjEmJih0PWFyZ3VtZW50c1sxXSxfKHQpJiYobj10LmJvZHksXCJVUkxTZWFyY2hQYXJhbXNcIj09PWR0KG4pJiYoKG89dC5oZWFkZXJzP25ldyBWaCh0LmhlYWRlcnMpOm5ldyBWaCkuaGFzKFwiY29udGVudC10eXBlXCIpfHxvLnNldChcImNvbnRlbnQtdHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLThcIiksdD1rdCh0LHtib2R5OmMoMCxTdHJpbmcobikpLGhlYWRlcnM6YygwLG8pfSkpKSxyLnB1c2godCkpLHhoLmFwcGx5KHRoaXMscil9fSk7dmFyIHVmLGNmPXtVUkxTZWFyY2hQYXJhbXM6YWYsZ2V0U3RhdGU6SGh9LGxmPWp0LmNvZGVBdCxkZj1vLlVSTCxwZj1jZi5VUkxTZWFyY2hQYXJhbXMsZ2Y9Y2YuZ2V0U3RhdGUsaGY9US5zZXQsZmY9US5nZXR0ZXJGb3IoXCJVUkxcIiksX2Y9TWF0aC5mbG9vcixtZj1NYXRoLnBvdyx2Zj0vW0EtWmEtel0vLE1mPS9bXFxkK1xcLS5BLVphLXpdLyx5Zj0vXFxkLyxJZj0vXigweHwwWCkvLEVmPS9eWzAtN10rJC8sVGY9L15cXGQrJC8sQWY9L15bXFxkQS1GYS1mXSskLyxTZj0vW1xcdTAwMDBcXHUwMDA5XFx1MDAwQVxcdTAwMEQgIyUvOj9AW1xcXFxdXS8sRGY9L1tcXHUwMDAwXFx1MDAwOVxcdTAwMEFcXHUwMDBEICMvOj9AW1xcXFxdXS8sTmY9L15bXFx1MDAwMC1cXHUwMDFGIF0rfFtcXHUwMDAwLVxcdTAwMUYgXSskL2csQ2Y9L1tcXHUwMDA5XFx1MDAwQVxcdTAwMERdL2csa2Y9ZnVuY3Rpb24oZSx0KXt2YXIgbixvLHI7aWYoXCJbXCI9PXQuY2hhckF0KDApKXtpZihcIl1cIiE9dC5jaGFyQXQodC5sZW5ndGgtMSkpcmV0dXJuXCJJbnZhbGlkIGhvc3RcIjtpZighKG49UmYodC5zbGljZSgxLC0xKSkpKXJldHVyblwiSW52YWxpZCBob3N0XCI7ZS5ob3N0PW59ZWxzZSBpZihxZihlKSl7aWYodD1mdW5jdGlvbihlKXt2YXIgdCxuLG89W10scj1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZShPaCxcIi5cIikuc3BsaXQoXCIuXCIpO2Zvcih0PTA7dDxyLmxlbmd0aDt0Kyspbj1yW3RdLG8ucHVzaChSaC50ZXN0KG4pP1wieG4tLVwiK0ZoKG4pOm4pO3JldHVybiBvLmpvaW4oXCIuXCIpfSh0KSxTZi50ZXN0KHQpKXJldHVyblwiSW52YWxpZCBob3N0XCI7aWYobnVsbD09PShuPUxmKHQpKSlyZXR1cm5cIkludmFsaWQgaG9zdFwiO2UuaG9zdD1ufWVsc2V7aWYoRGYudGVzdCh0KSlyZXR1cm5cIkludmFsaWQgaG9zdFwiO2ZvcihuPVwiXCIsbz1odCh0KSxyPTA7cjxvLmxlbmd0aDtyKyspbis9VWYob1tyXSxHZik7ZS5ob3N0PW59fSxMZj1mdW5jdGlvbihlKXt2YXIgdCxuLG8scixhLHMsaSx1PWUuc3BsaXQoXCIuXCIpO2lmKHUubGVuZ3RoJiZcIlwiPT11W3UubGVuZ3RoLTFdJiZ1LnBvcCgpLCh0PXUubGVuZ3RoKT40KXJldHVybiBlO2ZvcihuPVtdLG89MDtvPHQ7bysrKXtpZihcIlwiPT0ocj11W29dKSlyZXR1cm4gZTtpZihhPTEwLHIubGVuZ3RoPjEmJlwiMFwiPT1yLmNoYXJBdCgwKSYmKGE9SWYudGVzdChyKT8xNjo4LHI9ci5zbGljZSg4PT1hPzE6MikpLFwiXCI9PT1yKXM9MDtlbHNle2lmKCEoMTA9PWE/VGY6OD09YT9FZjpBZikudGVzdChyKSlyZXR1cm4gZTtzPXBhcnNlSW50KHIsYSl9bi5wdXNoKHMpfWZvcihvPTA7bzx0O28rKylpZihzPW5bb10sbz09dC0xKXtpZihzPj1tZigyNTYsNS10KSlyZXR1cm4gbnVsbH1lbHNlIGlmKHM+MjU1KXJldHVybiBudWxsO2ZvcihpPW4ucG9wKCksbz0wO288bi5sZW5ndGg7bysrKWkrPW5bb10qbWYoMjU2LDMtbyk7cmV0dXJuIGl9LFJmPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyLGEscyxpLHU9WzAsMCwwLDAsMCwwLDAsMF0sYz0wLGw9bnVsbCxkPTAscD1mdW5jdGlvbigpe3JldHVybiBlLmNoYXJBdChkKX07aWYoXCI6XCI9PXAoKSl7aWYoXCI6XCIhPWUuY2hhckF0KDEpKXJldHVybjtkKz0yLGw9KytjfWZvcig7cCgpOyl7aWYoOD09YylyZXR1cm47aWYoXCI6XCIhPXAoKSl7Zm9yKHQ9bj0wO248NCYmQWYudGVzdChwKCkpOyl0PTE2KnQrcGFyc2VJbnQocCgpLDE2KSxkKyssbisrO2lmKFwiLlwiPT1wKCkpe2lmKDA9PW4pcmV0dXJuO2lmKGQtPW4sYz42KXJldHVybjtmb3Iobz0wO3AoKTspe2lmKHI9bnVsbCxvPjApe2lmKCEoXCIuXCI9PXAoKSYmbzw0KSlyZXR1cm47ZCsrfWlmKCF5Zi50ZXN0KHAoKSkpcmV0dXJuO2Zvcig7eWYudGVzdChwKCkpOyl7aWYoYT1wYXJzZUludChwKCksMTApLG51bGw9PT1yKXI9YTtlbHNle2lmKDA9PXIpcmV0dXJuO3I9MTAqcithfWlmKHI+MjU1KXJldHVybjtkKyt9dVtjXT0yNTYqdVtjXStyLDIhPSsrbyYmNCE9b3x8YysrfWlmKDQhPW8pcmV0dXJuO2JyZWFrfWlmKFwiOlwiPT1wKCkpe2lmKGQrKywhcCgpKXJldHVybn1lbHNlIGlmKHAoKSlyZXR1cm47dVtjKytdPXR9ZWxzZXtpZihudWxsIT09bClyZXR1cm47ZCsrLGw9KytjfX1pZihudWxsIT09bClmb3Iocz1jLWwsYz03OzAhPWMmJnM+MDspaT11W2NdLHVbYy0tXT11W2wrcy0xXSx1W2wrLS1zXT1pO2Vsc2UgaWYoOCE9YylyZXR1cm47cmV0dXJuIHV9LE9mPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXtmb3IodD1bXSxuPTA7bjw0O24rKyl0LnVuc2hpZnQoZSUyNTYpLGU9X2YoZS8yNTYpO3JldHVybiB0LmpvaW4oXCIuXCIpfWlmKFwib2JqZWN0XCI9PXR5cGVvZiBlKXtmb3IodD1cIlwiLG89ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW51bGwsbj0xLG89bnVsbCxyPTAsYT0wO2E8ODthKyspMCE9PWVbYV0/KHI+biYmKHQ9byxuPXIpLG89bnVsbCxyPTApOihudWxsPT09byYmKG89YSksKytyKTtyZXR1cm4gcj5uJiYodD1vLG49ciksdH0oZSksbj0wO248ODtuKyspciYmMD09PWVbbl18fChyJiYocj0hMSksbz09PW4/KHQrPW4/XCI6XCI6XCI6OlwiLHI9ITApOih0Kz1lW25dLnRvU3RyaW5nKDE2KSxuPDcmJih0Kz1cIjpcIikpKTtyZXR1cm5cIltcIit0K1wiXVwifXJldHVybiBlfSxHZj17fSxiZj1DaCh7fSxHZix7XCIgXCI6MSwnXCInOjEsXCI8XCI6MSxcIj5cIjoxLFwiYFwiOjF9KSx3Zj1DaCh7fSxiZix7XCIjXCI6MSxcIj9cIjoxLFwie1wiOjEsXCJ9XCI6MX0pLFBmPUNoKHt9LHdmLHtcIi9cIjoxLFwiOlwiOjEsXCI7XCI6MSxcIj1cIjoxLFwiQFwiOjEsXCJbXCI6MSxcIlxcXFxcIjoxLFwiXVwiOjEsXCJeXCI6MSxcInxcIjoxfSksVWY9ZnVuY3Rpb24oZSx0KXt2YXIgbj1sZihlLDApO3JldHVybiBuPjMyJiZuPDEyNyYmIU0odCxlKT9lOmVuY29kZVVSSUNvbXBvbmVudChlKX0sRmY9e2Z0cDoyMSxmaWxlOm51bGwsaHR0cDo4MCxodHRwczo0NDMsd3M6ODAsd3NzOjQ0M30scWY9ZnVuY3Rpb24oZSl7cmV0dXJuIE0oRmYsZS5zY2hlbWUpfSx4Zj1mdW5jdGlvbihlKXtyZXR1cm5cIlwiIT1lLnVzZXJuYW1lfHxcIlwiIT1lLnBhc3N3b3JkfSxWZj1mdW5jdGlvbihlKXtyZXR1cm4hZS5ob3N0fHxlLmNhbm5vdEJlQUJhc2VVUkx8fFwiZmlsZVwiPT1lLnNjaGVtZX0sS2Y9ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gMj09ZS5sZW5ndGgmJnZmLnRlc3QoZS5jaGFyQXQoMCkpJiYoXCI6XCI9PShuPWUuY2hhckF0KDEpKXx8IXQmJlwifFwiPT1uKX0sQmY9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUubGVuZ3RoPjEmJktmKGUuc2xpY2UoMCwyKSkmJigyPT1lLmxlbmd0aHx8XCIvXCI9PT0odD1lLmNoYXJBdCgyKSl8fFwiXFxcXFwiPT09dHx8XCI/XCI9PT10fHxcIiNcIj09PXQpfSxIZj1mdW5jdGlvbihlKXt2YXIgdD1lLnBhdGgsbj10Lmxlbmd0aDshbnx8XCJmaWxlXCI9PWUuc2NoZW1lJiYxPT1uJiZLZih0WzBdLCEwKXx8dC5wb3AoKX0samY9ZnVuY3Rpb24oZSl7cmV0dXJuXCIuXCI9PT1lfHxcIiUyZVwiPT09ZS50b0xvd2VyQ2FzZSgpfSxXZj17fSxZZj17fSwkZj17fSx6Zj17fSxKZj17fSxYZj17fSxRZj17fSxaZj17fSxlXz17fSx0Xz17fSxuXz17fSxvXz17fSxyXz17fSxhXz17fSxzXz17fSxpXz17fSx1Xz17fSxjXz17fSxsXz17fSxkXz17fSxwXz17fSxnXz1mdW5jdGlvbihlLHQsbixvKXt2YXIgcixhLHMsaSx1LGM9bnx8V2YsbD0wLGQ9XCJcIixwPSExLGc9ITEsaD0hMTtmb3Iobnx8KGUuc2NoZW1lPVwiXCIsZS51c2VybmFtZT1cIlwiLGUucGFzc3dvcmQ9XCJcIixlLmhvc3Q9bnVsbCxlLnBvcnQ9bnVsbCxlLnBhdGg9W10sZS5xdWVyeT1udWxsLGUuZnJhZ21lbnQ9bnVsbCxlLmNhbm5vdEJlQUJhc2VVUkw9ITEsdD10LnJlcGxhY2UoTmYsXCJcIikpLHQ9dC5yZXBsYWNlKENmLFwiXCIpLHI9aHQodCk7bDw9ci5sZW5ndGg7KXtzd2l0Y2goYT1yW2xdLGMpe2Nhc2UgV2Y6aWYoIWF8fCF2Zi50ZXN0KGEpKXtpZihuKXJldHVyblwiSW52YWxpZCBzY2hlbWVcIjtjPSRmO2NvbnRpbnVlfWQrPWEudG9Mb3dlckNhc2UoKSxjPVlmO2JyZWFrO2Nhc2UgWWY6aWYoYSYmKE1mLnRlc3QoYSl8fFwiK1wiPT1hfHxcIi1cIj09YXx8XCIuXCI9PWEpKWQrPWEudG9Mb3dlckNhc2UoKTtlbHNle2lmKFwiOlwiIT1hKXtpZihuKXJldHVyblwiSW52YWxpZCBzY2hlbWVcIjtkPVwiXCIsYz0kZixsPTA7Y29udGludWV9aWYobiYmKHFmKGUpIT1NKEZmLGQpfHxcImZpbGVcIj09ZCYmKHhmKGUpfHxudWxsIT09ZS5wb3J0KXx8XCJmaWxlXCI9PWUuc2NoZW1lJiYhZS5ob3N0KSlyZXR1cm47aWYoZS5zY2hlbWU9ZCxuKXJldHVybiB2b2lkKHFmKGUpJiZGZltlLnNjaGVtZV09PWUucG9ydCYmKGUucG9ydD1udWxsKSk7ZD1cIlwiLFwiZmlsZVwiPT1lLnNjaGVtZT9jPWFfOnFmKGUpJiZvJiZvLnNjaGVtZT09ZS5zY2hlbWU/Yz16ZjpxZihlKT9jPVpmOlwiL1wiPT1yW2wrMV0/KGM9SmYsbCsrKTooZS5jYW5ub3RCZUFCYXNlVVJMPSEwLGUucGF0aC5wdXNoKFwiXCIpLGM9bF8pfWJyZWFrO2Nhc2UgJGY6aWYoIW98fG8uY2Fubm90QmVBQmFzZVVSTCYmXCIjXCIhPWEpcmV0dXJuXCJJbnZhbGlkIHNjaGVtZVwiO2lmKG8uY2Fubm90QmVBQmFzZVVSTCYmXCIjXCI9PWEpe2Uuc2NoZW1lPW8uc2NoZW1lLGUucGF0aD1vLnBhdGguc2xpY2UoKSxlLnF1ZXJ5PW8ucXVlcnksZS5mcmFnbWVudD1cIlwiLGUuY2Fubm90QmVBQmFzZVVSTD0hMCxjPXBfO2JyZWFrfWM9XCJmaWxlXCI9PW8uc2NoZW1lP2FfOlhmO2NvbnRpbnVlO2Nhc2UgemY6aWYoXCIvXCIhPWF8fFwiL1wiIT1yW2wrMV0pe2M9WGY7Y29udGludWV9Yz1lXyxsKys7YnJlYWs7Y2FzZSBKZjppZihcIi9cIj09YSl7Yz10XzticmVha31jPWNfO2NvbnRpbnVlO2Nhc2UgWGY6aWYoZS5zY2hlbWU9by5zY2hlbWUsYT09dWYpZS51c2VybmFtZT1vLnVzZXJuYW1lLGUucGFzc3dvcmQ9by5wYXNzd29yZCxlLmhvc3Q9by5ob3N0LGUucG9ydD1vLnBvcnQsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9by5xdWVyeTtlbHNlIGlmKFwiL1wiPT1hfHxcIlxcXFxcIj09YSYmcWYoZSkpYz1RZjtlbHNlIGlmKFwiP1wiPT1hKWUudXNlcm5hbWU9by51c2VybmFtZSxlLnBhc3N3b3JkPW8ucGFzc3dvcmQsZS5ob3N0PW8uaG9zdCxlLnBvcnQ9by5wb3J0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxlLnF1ZXJ5PVwiXCIsYz1kXztlbHNle2lmKFwiI1wiIT1hKXtlLnVzZXJuYW1lPW8udXNlcm5hbWUsZS5wYXNzd29yZD1vLnBhc3N3b3JkLGUuaG9zdD1vLmhvc3QsZS5wb3J0PW8ucG9ydCxlLnBhdGg9by5wYXRoLnNsaWNlKCksZS5wYXRoLnBvcCgpLGM9Y187Y29udGludWV9ZS51c2VybmFtZT1vLnVzZXJuYW1lLGUucGFzc3dvcmQ9by5wYXNzd29yZCxlLmhvc3Q9by5ob3N0LGUucG9ydD1vLnBvcnQsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9by5xdWVyeSxlLmZyYWdtZW50PVwiXCIsYz1wX31icmVhaztjYXNlIFFmOmlmKCFxZihlKXx8XCIvXCIhPWEmJlwiXFxcXFwiIT1hKXtpZihcIi9cIiE9YSl7ZS51c2VybmFtZT1vLnVzZXJuYW1lLGUucGFzc3dvcmQ9by5wYXNzd29yZCxlLmhvc3Q9by5ob3N0LGUucG9ydD1vLnBvcnQsYz1jXztjb250aW51ZX1jPXRffWVsc2UgYz1lXzticmVhaztjYXNlIFpmOmlmKGM9ZV8sXCIvXCIhPWF8fFwiL1wiIT1kLmNoYXJBdChsKzEpKWNvbnRpbnVlO2wrKzticmVhaztjYXNlIGVfOmlmKFwiL1wiIT1hJiZcIlxcXFxcIiE9YSl7Yz10Xztjb250aW51ZX1icmVhaztjYXNlIHRfOmlmKFwiQFwiPT1hKXtwJiYoZD1cIiU0MFwiK2QpLHA9ITAscz1odChkKTtmb3IodmFyIGY9MDtmPHMubGVuZ3RoO2YrKyl7dmFyIF89c1tmXTtpZihcIjpcIiE9X3x8aCl7dmFyIG09VWYoXyxQZik7aD9lLnBhc3N3b3JkKz1tOmUudXNlcm5hbWUrPW19ZWxzZSBoPSEwfWQ9XCJcIn1lbHNlIGlmKGE9PXVmfHxcIi9cIj09YXx8XCI/XCI9PWF8fFwiI1wiPT1hfHxcIlxcXFxcIj09YSYmcWYoZSkpe2lmKHAmJlwiXCI9PWQpcmV0dXJuXCJJbnZhbGlkIGF1dGhvcml0eVwiO2wtPWh0KGQpLmxlbmd0aCsxLGQ9XCJcIixjPW5ffWVsc2UgZCs9YTticmVhaztjYXNlIG5fOmNhc2Ugb186aWYobiYmXCJmaWxlXCI9PWUuc2NoZW1lKXtjPWlfO2NvbnRpbnVlfWlmKFwiOlwiIT1hfHxnKXtpZihhPT11Znx8XCIvXCI9PWF8fFwiP1wiPT1hfHxcIiNcIj09YXx8XCJcXFxcXCI9PWEmJnFmKGUpKXtpZihxZihlKSYmXCJcIj09ZClyZXR1cm5cIkludmFsaWQgaG9zdFwiO2lmKG4mJlwiXCI9PWQmJih4ZihlKXx8bnVsbCE9PWUucG9ydCkpcmV0dXJuO2lmKGk9a2YoZSxkKSlyZXR1cm4gaTtpZihkPVwiXCIsYz11XyxuKXJldHVybjtjb250aW51ZX1cIltcIj09YT9nPSEwOlwiXVwiPT1hJiYoZz0hMSksZCs9YX1lbHNle2lmKFwiXCI9PWQpcmV0dXJuXCJJbnZhbGlkIGhvc3RcIjtpZihpPWtmKGUsZCkpcmV0dXJuIGk7aWYoZD1cIlwiLGM9cl8sbj09b18pcmV0dXJufWJyZWFrO2Nhc2Ugcl86aWYoIXlmLnRlc3QoYSkpe2lmKGE9PXVmfHxcIi9cIj09YXx8XCI/XCI9PWF8fFwiI1wiPT1hfHxcIlxcXFxcIj09YSYmcWYoZSl8fG4pe2lmKFwiXCIhPWQpe3ZhciB2PXBhcnNlSW50KGQsMTApO2lmKHY+NjU1MzUpcmV0dXJuXCJJbnZhbGlkIHBvcnRcIjtlLnBvcnQ9cWYoZSkmJnY9PT1GZltlLnNjaGVtZV0/bnVsbDp2LGQ9XCJcIn1pZihuKXJldHVybjtjPXVfO2NvbnRpbnVlfXJldHVyblwiSW52YWxpZCBwb3J0XCJ9ZCs9YTticmVhaztjYXNlIGFfOmlmKGUuc2NoZW1lPVwiZmlsZVwiLFwiL1wiPT1hfHxcIlxcXFxcIj09YSljPXNfO2Vsc2V7aWYoIW98fFwiZmlsZVwiIT1vLnNjaGVtZSl7Yz1jXztjb250aW51ZX1pZihhPT11ZillLmhvc3Q9by5ob3N0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxlLnF1ZXJ5PW8ucXVlcnk7ZWxzZSBpZihcIj9cIj09YSllLmhvc3Q9by5ob3N0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxlLnF1ZXJ5PVwiXCIsYz1kXztlbHNle2lmKFwiI1wiIT1hKXtCZihyLnNsaWNlKGwpLmpvaW4oXCJcIikpfHwoZS5ob3N0PW8uaG9zdCxlLnBhdGg9by5wYXRoLnNsaWNlKCksSGYoZSkpLGM9Y187Y29udGludWV9ZS5ob3N0PW8uaG9zdCxlLnBhdGg9by5wYXRoLnNsaWNlKCksZS5xdWVyeT1vLnF1ZXJ5LGUuZnJhZ21lbnQ9XCJcIixjPXBffX1icmVhaztjYXNlIHNfOmlmKFwiL1wiPT1hfHxcIlxcXFxcIj09YSl7Yz1pXzticmVha31vJiZcImZpbGVcIj09by5zY2hlbWUmJiFCZihyLnNsaWNlKGwpLmpvaW4oXCJcIikpJiYoS2Yoby5wYXRoWzBdLCEwKT9lLnBhdGgucHVzaChvLnBhdGhbMF0pOmUuaG9zdD1vLmhvc3QpLGM9Y187Y29udGludWU7Y2FzZSBpXzppZihhPT11Znx8XCIvXCI9PWF8fFwiXFxcXFwiPT1hfHxcIj9cIj09YXx8XCIjXCI9PWEpe2lmKCFuJiZLZihkKSljPWNfO2Vsc2UgaWYoXCJcIj09ZCl7aWYoZS5ob3N0PVwiXCIsbilyZXR1cm47Yz11X31lbHNle2lmKGk9a2YoZSxkKSlyZXR1cm4gaTtpZihcImxvY2FsaG9zdFwiPT1lLmhvc3QmJihlLmhvc3Q9XCJcIiksbilyZXR1cm47ZD1cIlwiLGM9dV99Y29udGludWV9ZCs9YTticmVhaztjYXNlIHVfOmlmKHFmKGUpKXtpZihjPWNfLFwiL1wiIT1hJiZcIlxcXFxcIiE9YSljb250aW51ZX1lbHNlIGlmKG58fFwiP1wiIT1hKWlmKG58fFwiI1wiIT1hKXtpZihhIT11ZiYmKGM9Y18sXCIvXCIhPWEpKWNvbnRpbnVlfWVsc2UgZS5mcmFnbWVudD1cIlwiLGM9cF87ZWxzZSBlLnF1ZXJ5PVwiXCIsYz1kXzticmVhaztjYXNlIGNfOmlmKGE9PXVmfHxcIi9cIj09YXx8XCJcXFxcXCI9PWEmJnFmKGUpfHwhbiYmKFwiP1wiPT1hfHxcIiNcIj09YSkpe2lmKFwiLi5cIj09PSh1PSh1PWQpLnRvTG93ZXJDYXNlKCkpfHxcIiUyZS5cIj09PXV8fFwiLiUyZVwiPT09dXx8XCIlMmUlMmVcIj09PXU/KEhmKGUpLFwiL1wiPT1hfHxcIlxcXFxcIj09YSYmcWYoZSl8fGUucGF0aC5wdXNoKFwiXCIpKTpqZihkKT9cIi9cIj09YXx8XCJcXFxcXCI9PWEmJnFmKGUpfHxlLnBhdGgucHVzaChcIlwiKTooXCJmaWxlXCI9PWUuc2NoZW1lJiYhZS5wYXRoLmxlbmd0aCYmS2YoZCkmJihlLmhvc3QmJihlLmhvc3Q9XCJcIiksZD1kLmNoYXJBdCgwKStcIjpcIiksZS5wYXRoLnB1c2goZCkpLGQ9XCJcIixcImZpbGVcIj09ZS5zY2hlbWUmJihhPT11Znx8XCI/XCI9PWF8fFwiI1wiPT1hKSlmb3IoO2UucGF0aC5sZW5ndGg+MSYmXCJcIj09PWUucGF0aFswXTspZS5wYXRoLnNoaWZ0KCk7XCI/XCI9PWE/KGUucXVlcnk9XCJcIixjPWRfKTpcIiNcIj09YSYmKGUuZnJhZ21lbnQ9XCJcIixjPXBfKX1lbHNlIGQrPVVmKGEsd2YpO2JyZWFrO2Nhc2UgbF86XCI/XCI9PWE/KGUucXVlcnk9XCJcIixjPWRfKTpcIiNcIj09YT8oZS5mcmFnbWVudD1cIlwiLGM9cF8pOmEhPXVmJiYoZS5wYXRoWzBdKz1VZihhLEdmKSk7YnJlYWs7Y2FzZSBkXzpufHxcIiNcIiE9YT9hIT11ZiYmKFwiJ1wiPT1hJiZxZihlKT9lLnF1ZXJ5Kz1cIiUyN1wiOmUucXVlcnkrPVwiI1wiPT1hP1wiJTIzXCI6VWYoYSxHZikpOihlLmZyYWdtZW50PVwiXCIsYz1wXyk7YnJlYWs7Y2FzZSBwXzphIT11ZiYmKGUuZnJhZ21lbnQrPVVmKGEsYmYpKX1sKyt9fSxoXz1mdW5jdGlvbihlKXt2YXIgdCxuLG89a3IodGhpcyxoXyxcIlVSTFwiKSxyPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLHM9U3RyaW5nKGUpLGk9aGYobyx7dHlwZTpcIlVSTFwifSk7aWYodm9pZCAwIT09cilpZihyIGluc3RhbmNlb2YgaF8pdD1mZihyKTtlbHNlIGlmKG49Z18odD17fSxTdHJpbmcocikpKXRocm93IFR5cGVFcnJvcihuKTtpZihuPWdfKGkscyxudWxsLHQpKXRocm93IFR5cGVFcnJvcihuKTt2YXIgdT1pLnNlYXJjaFBhcmFtcz1uZXcgcGYsYz1nZih1KTtjLnVwZGF0ZVNlYXJjaFBhcmFtcyhpLnF1ZXJ5KSxjLnVwZGF0ZVVSTD1mdW5jdGlvbigpe2kucXVlcnk9U3RyaW5nKHUpfHxudWxsfSxhfHwoby5ocmVmPV9fLmNhbGwobyksby5vcmlnaW49bV8uY2FsbChvKSxvLnByb3RvY29sPXZfLmNhbGwobyksby51c2VybmFtZT1NXy5jYWxsKG8pLG8ucGFzc3dvcmQ9eV8uY2FsbChvKSxvLmhvc3Q9SV8uY2FsbChvKSxvLmhvc3RuYW1lPUVfLmNhbGwobyksby5wb3J0PVRfLmNhbGwobyksby5wYXRobmFtZT1BXy5jYWxsKG8pLG8uc2VhcmNoPVNfLmNhbGwobyksby5zZWFyY2hQYXJhbXM9RF8uY2FsbChvKSxvLmhhc2g9Tl8uY2FsbChvKSl9LGZfPWhfLnByb3RvdHlwZSxfXz1mdW5jdGlvbigpe3ZhciBlPWZmKHRoaXMpLHQ9ZS5zY2hlbWUsbj1lLnVzZXJuYW1lLG89ZS5wYXNzd29yZCxyPWUuaG9zdCxhPWUucG9ydCxzPWUucGF0aCxpPWUucXVlcnksdT1lLmZyYWdtZW50LGM9dCtcIjpcIjtyZXR1cm4gbnVsbCE9PXI/KGMrPVwiLy9cIix4ZihlKSYmKGMrPW4rKG8/XCI6XCIrbzpcIlwiKStcIkBcIiksYys9T2YociksbnVsbCE9PWEmJihjKz1cIjpcIithKSk6XCJmaWxlXCI9PXQmJihjKz1cIi8vXCIpLGMrPWUuY2Fubm90QmVBQmFzZVVSTD9zWzBdOnMubGVuZ3RoP1wiL1wiK3Muam9pbihcIi9cIik6XCJcIixudWxsIT09aSYmKGMrPVwiP1wiK2kpLG51bGwhPT11JiYoYys9XCIjXCIrdSksY30sbV89ZnVuY3Rpb24oKXt2YXIgZT1mZih0aGlzKSx0PWUuc2NoZW1lLG49ZS5wb3J0O2lmKFwiYmxvYlwiPT10KXRyeXtyZXR1cm4gbmV3IFVSTCh0LnBhdGhbMF0pLm9yaWdpbn1jYXRjaCh6SSl7cmV0dXJuXCJudWxsXCJ9cmV0dXJuXCJmaWxlXCIhPXQmJnFmKGUpP3QrXCI6Ly9cIitPZihlLmhvc3QpKyhudWxsIT09bj9cIjpcIituOlwiXCIpOlwibnVsbFwifSx2Xz1mdW5jdGlvbigpe3JldHVybiBmZih0aGlzKS5zY2hlbWUrXCI6XCJ9LE1fPWZ1bmN0aW9uKCl7cmV0dXJuIGZmKHRoaXMpLnVzZXJuYW1lfSx5Xz1mdW5jdGlvbigpe3JldHVybiBmZih0aGlzKS5wYXNzd29yZH0sSV89ZnVuY3Rpb24oKXt2YXIgZT1mZih0aGlzKSx0PWUuaG9zdCxuPWUucG9ydDtyZXR1cm4gbnVsbD09PXQ/XCJcIjpudWxsPT09bj9PZih0KTpPZih0KStcIjpcIitufSxFXz1mdW5jdGlvbigpe3ZhciBlPWZmKHRoaXMpLmhvc3Q7cmV0dXJuIG51bGw9PT1lP1wiXCI6T2YoZSl9LFRfPWZ1bmN0aW9uKCl7dmFyIGU9ZmYodGhpcykucG9ydDtyZXR1cm4gbnVsbD09PWU/XCJcIjpTdHJpbmcoZSl9LEFfPWZ1bmN0aW9uKCl7dmFyIGU9ZmYodGhpcyksdD1lLnBhdGg7cmV0dXJuIGUuY2Fubm90QmVBQmFzZVVSTD90WzBdOnQubGVuZ3RoP1wiL1wiK3Quam9pbihcIi9cIik6XCJcIn0sU189ZnVuY3Rpb24oKXt2YXIgZT1mZih0aGlzKS5xdWVyeTtyZXR1cm4gZT9cIj9cIitlOlwiXCJ9LERfPWZ1bmN0aW9uKCl7cmV0dXJuIGZmKHRoaXMpLnNlYXJjaFBhcmFtc30sTl89ZnVuY3Rpb24oKXt2YXIgZT1mZih0aGlzKS5mcmFnbWVudDtyZXR1cm4gZT9cIiNcIitlOlwiXCJ9LENfPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2dldDplLHNldDp0LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfX07aWYoYSYmVHQoZl8se2hyZWY6Q18oX18sKGZ1bmN0aW9uKGUpe3ZhciB0PWZmKHRoaXMpLG49U3RyaW5nKGUpLG89Z18odCxuKTtpZihvKXRocm93IFR5cGVFcnJvcihvKTtnZih0LnNlYXJjaFBhcmFtcykudXBkYXRlU2VhcmNoUGFyYW1zKHQucXVlcnkpfSkpLG9yaWdpbjpDXyhtXykscHJvdG9jb2w6Q18odl8sKGZ1bmN0aW9uKGUpe3ZhciB0PWZmKHRoaXMpO2dfKHQsU3RyaW5nKGUpK1wiOlwiLFdmKX0pKSx1c2VybmFtZTpDXyhNXywoZnVuY3Rpb24oZSl7dmFyIHQ9ZmYodGhpcyksbj1odChTdHJpbmcoZSkpO2lmKCFWZih0KSl7dC51c2VybmFtZT1cIlwiO2Zvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXQudXNlcm5hbWUrPVVmKG5bb10sUGYpfX0pKSxwYXNzd29yZDpDXyh5XywoZnVuY3Rpb24oZSl7dmFyIHQ9ZmYodGhpcyksbj1odChTdHJpbmcoZSkpO2lmKCFWZih0KSl7dC5wYXNzd29yZD1cIlwiO2Zvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXQucGFzc3dvcmQrPVVmKG5bb10sUGYpfX0pKSxob3N0OkNfKElfLChmdW5jdGlvbihlKXt2YXIgdD1mZih0aGlzKTt0LmNhbm5vdEJlQUJhc2VVUkx8fGdfKHQsU3RyaW5nKGUpLG5fKX0pKSxob3N0bmFtZTpDXyhFXywoZnVuY3Rpb24oZSl7dmFyIHQ9ZmYodGhpcyk7dC5jYW5ub3RCZUFCYXNlVVJMfHxnXyh0LFN0cmluZyhlKSxvXyl9KSkscG9ydDpDXyhUXywoZnVuY3Rpb24oZSl7dmFyIHQ9ZmYodGhpcyk7VmYodCl8fChcIlwiPT0oZT1TdHJpbmcoZSkpP3QucG9ydD1udWxsOmdfKHQsZSxyXykpfSkpLHBhdGhuYW1lOkNfKEFfLChmdW5jdGlvbihlKXt2YXIgdD1mZih0aGlzKTt0LmNhbm5vdEJlQUJhc2VVUkx8fCh0LnBhdGg9W10sZ18odCxlK1wiXCIsdV8pKX0pKSxzZWFyY2g6Q18oU18sKGZ1bmN0aW9uKGUpe3ZhciB0PWZmKHRoaXMpO1wiXCI9PShlPVN0cmluZyhlKSk/dC5xdWVyeT1udWxsOihcIj9cIj09ZS5jaGFyQXQoMCkmJihlPWUuc2xpY2UoMSkpLHQucXVlcnk9XCJcIixnXyh0LGUsZF8pKSxnZih0LnNlYXJjaFBhcmFtcykudXBkYXRlU2VhcmNoUGFyYW1zKHQucXVlcnkpfSkpLHNlYXJjaFBhcmFtczpDXyhEXyksaGFzaDpDXyhOXywoZnVuY3Rpb24oZSl7dmFyIHQ9ZmYodGhpcyk7XCJcIiE9KGU9U3RyaW5nKGUpKT8oXCIjXCI9PWUuY2hhckF0KDApJiYoZT1lLnNsaWNlKDEpKSx0LmZyYWdtZW50PVwiXCIsZ18odCxlLHBfKSk6dC5mcmFnbWVudD1udWxsfSkpfSksWihmXyxcInRvSlNPTlwiLChmdW5jdGlvbigpe3JldHVybiBfXy5jYWxsKHRoaXMpfSkse2VudW1lcmFibGU6ITB9KSxaKGZfLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gX18uY2FsbCh0aGlzKX0pLHtlbnVtZXJhYmxlOiEwfSksZGYpe3ZhciBrXz1kZi5jcmVhdGVPYmplY3RVUkwsTF89ZGYucmV2b2tlT2JqZWN0VVJMO2tfJiZaKGhfLFwiY3JlYXRlT2JqZWN0VVJMXCIsKGZ1bmN0aW9uKGUpe3JldHVybiBrXy5hcHBseShkZixhcmd1bWVudHMpfSkpLExfJiZaKGhfLFwicmV2b2tlT2JqZWN0VVJMXCIsKGZ1bmN0aW9uKGUpe3JldHVybiBMXy5hcHBseShkZixhcmd1bWVudHMpfSkpfXRuKGhfLFwiVVJMXCIpLGtlKHtnbG9iYWw6ITAsZm9yY2VkOiFMaCxzaGFtOiFhfSx7VVJMOmhffSk7dmFyIFJfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX2ltYWdlTWVtb3J5VVJMPVwiXCIscGk/dGhpcy5jcmVhdGVJbWFnZURhdGFBU1VSTEluV1hNaW5pQXBwKHQuZmlsZSk6dGhpcy5jcmVhdGVJbWFnZURhdGFBU1VSTEluV2ViKHQuZmlsZSksdGhpcy5faW5pdEltYWdlSW5mb01vZGVsKCksdGhpcy50eXBlPVluLk1TR19JTUFHRSx0aGlzLl9wZXJjZW50PTAsdGhpcy5jb250ZW50PXtpbWFnZUZvcm1hdDp0LmltYWdlRm9ybWF0fHxaaS5VTktOT1dOLHV1aWQ6dC51dWlkLGltYWdlSW5mb0FycmF5OltdfSx0aGlzLmluaXRJbWFnZUluZm9BcnJheSh0LmltYWdlSW5mb0FycmF5KSx0aGlzLl9kZWZhdWx0SW1hZ2U9XCJodHRwOi8vaW1nY2FjaGUucXEuY29tL29wZW4vcWNsb3VkL3ZpZGVvL2FjdC93ZWJpbS1pbWFnZXMvZGVmYXVsdC5qcGdcIix0aGlzLl9hdXRvRml4VXJsKCl9cmV0dXJuIEVuKGUsW3trZXk6XCJfaW5pdEltYWdlSW5mb01vZGVsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX0ltYWdlSW5mb01vZGVsPWZ1bmN0aW9uKHQpe3RoaXMuaW5zdGFuY2VJRD1TdSg5OTk5OTk5KSx0aGlzLnNpemVUeXBlPXQudHlwZXx8MCx0aGlzLnR5cGU9MCx0aGlzLnNpemU9dC5zaXplfHwwLHRoaXMud2lkdGg9dC53aWR0aHx8MCx0aGlzLmhlaWdodD10LmhlaWdodHx8MCx0aGlzLmltYWdlVXJsPXQudXJsfHxcIlwiLHRoaXMudXJsPXQudXJsfHxlLl9pbWFnZU1lbW9yeVVSTHx8ZS5fZGVmYXVsdEltYWdlfSx0aGlzLl9JbWFnZUluZm9Nb2RlbC5wcm90b3R5cGU9e3NldFNpemVUeXBlOmZ1bmN0aW9uKGUpe3RoaXMuc2l6ZVR5cGU9ZX0sc2V0VHlwZTpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ZX0sc2V0SW1hZ2VVcmw6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuaW1hZ2VVcmw9ZSl9LGdldEltYWdlVXJsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1hZ2VVcmx9fX19LHtrZXk6XCJpbml0SW1hZ2VJbmZvQXJyYXlcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPW51bGwsbz1udWxsO3Q8PTI7KW89aHUoZSl8fGh1KGVbdF0pP3t0eXBlOjAsc2l6ZTowLHdpZHRoOjAsaGVpZ2h0OjAsdXJsOlwiXCJ9OmVbdF0sKG49bmV3IHRoaXMuX0ltYWdlSW5mb01vZGVsKG8pKS5zZXRTaXplVHlwZSh0KzEpLG4uc2V0VHlwZSh0KSx0aGlzLmFkZEltYWdlSW5mbyhuKSx0Kys7dGhpcy51cGRhdGVBY2Nlc3NTaWRlSW1hZ2VJbmZvQXJyYXkoKX19LHtrZXk6XCJ1cGRhdGVJbWFnZUluZm9BcnJheVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheS5sZW5ndGgsbz0wO288bjtvKyspdD10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXlbb10sZVtvXS5zaXplJiYodC5zaXplPWVbb10uc2l6ZSksZVtvXS51cmwmJnQuc2V0SW1hZ2VVcmwoZVtvXS51cmwpLGVbb10ud2lkdGgmJih0LndpZHRoPWVbb10ud2lkdGgpLGVbb10uaGVpZ2h0JiYodC5oZWlnaHQ9ZVtvXS5oZWlnaHQpfX0se2tleTpcIl9hdXRvRml4VXJsXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5Lmxlbmd0aCx0PVwiXCIsbj1cIlwiLG89W1wiaHR0cFwiLFwiaHR0cHNcIl0scj1udWxsLGE9MDthPGU7YSsrKXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVthXS51cmwmJlwiXCIhPT0ocj10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXlbYV0pLmltYWdlVXJsJiYobj1yLmltYWdlVXJsLnNsaWNlKDAsci5pbWFnZVVybC5pbmRleE9mKFwiOi8vXCIpKzEpLHQ9ci5pbWFnZVVybC5zbGljZShyLmltYWdlVXJsLmluZGV4T2YoXCI6Ly9cIikrMSksby5pbmRleE9mKG4pPDAmJihuPVwiaHR0cHM6XCIpLHRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVthXS5zZXRJbWFnZVVybChbbix0XS5qb2luKFwiXCIpKSl9fSx7a2V5OlwidXBkYXRlUGVyY2VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3BlcmNlbnQ9ZSx0aGlzLl9wZXJjZW50PjEmJih0aGlzLl9wZXJjZW50PTEpfX0se2tleTpcInVwZGF0ZUltYWdlRm9ybWF0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jb250ZW50LmltYWdlRm9ybWF0PVppW2UudG9VcHBlckNhc2UoKV18fFppLlVOS05PV059fSx7a2V5OlwiY3JlYXRlSW1hZ2VEYXRhQVNVUkxJbldlYlwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUmJmUuZmlsZXMubGVuZ3RoPjAmJih0aGlzLl9pbWFnZU1lbW9yeVVSTD13aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChlLmZpbGVzWzBdKSl9fSx7a2V5OlwiY3JlYXRlSW1hZ2VEYXRhQVNVUkxJbldYTWluaUFwcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UmJmUudXJsJiYodGhpcy5faW1hZ2VNZW1vcnlVUkw9ZS51cmwpfX0se2tleTpcInJlcGxhY2VJbWFnZUluZm9cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVt0XWluc3RhbmNlb2YgdGhpcy5fSW1hZ2VJbmZvTW9kZWx8fCh0aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXlbdF09ZSl9fSx7a2V5OlwiYWRkSW1hZ2VJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5Lmxlbmd0aD49M3x8dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5LnB1c2goZSl9fSx7a2V5OlwidXBkYXRlQWNjZXNzU2lkZUltYWdlSW5mb0FycmF5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXksdD1lWzBdLG49dC53aWR0aCxvPXZvaWQgMD09PW4/MDpuLHI9dC5oZWlnaHQsYT12b2lkIDA9PT1yPzA6cjswIT09byYmMCE9PWEmJihqdShlKSxPYmplY3QuYXNzaWduKGVbMl0sSHUoe29yaWdpbldpZHRoOm8sb3JpZ2luSGVpZ2h0OmEsbWluOjcyMH0pKSl9fSx7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5Lmxlbmd0aCYmKFwiXCIhPT10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXlbMF0uaW1hZ2VVcmwmJjAhPT10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXlbMF0uc2l6ZSl9fV0pLGV9KCksT189ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy50eXBlPVluLk1TR19GQUNFLHRoaXMuY29udGVudD10fHxudWxsfXJldHVybiBFbihlLFt7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5jb250ZW50fX1dKSxlfSgpLEdfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMudHlwZT1Zbi5NU0dfQVVESU8sdGhpcy5fcGVyY2VudD0wLHRoaXMuY29udGVudD17ZG93bmxvYWRGbGFnOjIsc2Vjb25kOnQuc2Vjb25kLHNpemU6dC5zaXplLHVybDp0LnVybCxyZW1vdGVBdWRpb1VybDp0LnVybHx8XCJcIix1dWlkOnQudXVpZH19cmV0dXJuIEVuKGUsW3trZXk6XCJ1cGRhdGVQZXJjZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcGVyY2VudD1lLHRoaXMuX3BlcmNlbnQ+MSYmKHRoaXMuX3BlcmNlbnQ9MSl9fSx7a2V5OlwidXBkYXRlQXVkaW9VcmxcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbnRlbnQucmVtb3RlQXVkaW9Vcmw9ZX19LHtrZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJcIiE9PXRoaXMuY29udGVudC5yZW1vdGVBdWRpb1VybH19XSksZX0oKSxiXz17ZnJvbTohMCxncm91cElEOiEwLGdyb3VwTmFtZTohMCx0bzohMH0sd189ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy50eXBlPVluLk1TR19HUlBfVElQLHRoaXMuY29udGVudD17fSx0aGlzLl9pbml0Q29udGVudCh0KX1yZXR1cm4gRW4oZSxbe2tleTpcIl9pbml0Q29udGVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7c3dpdGNoKG4pe2Nhc2VcInJlbWFya0luZm9cIjpicmVhaztjYXNlXCJncm91cFByb2ZpbGVcIjp0LmNvbnRlbnQuZ3JvdXBQcm9maWxlPXt9LHQuX2luaXRHcm91cFByb2ZpbGUoZVtuXSk7YnJlYWs7Y2FzZVwib3BlcmF0b3JJbmZvXCI6YnJlYWs7Y2FzZVwibWVtYmVySW5mb0xpc3RcIjpjYXNlXCJtc2dNZW1iZXJJbmZvXCI6dC5fdXBkYXRlTWVtYmVyTGlzdChlW25dKTticmVhaztjYXNlXCJvbmxpbmVNZW1iZXJJbmZvXCI6YnJlYWs7Y2FzZVwibWVtYmVyTnVtXCI6dC5jb250ZW50W25dPWVbbl0sdC5jb250ZW50Lm1lbWJlckNvdW50PWVbbl07YnJlYWs7ZGVmYXVsdDp0LmNvbnRlbnRbbl09ZVtuXX19KSksdGhpcy5jb250ZW50LnVzZXJJRExpc3R8fCh0aGlzLmNvbnRlbnQudXNlcklETGlzdD1bdGhpcy5jb250ZW50Lm9wZXJhdG9ySURdKX19LHtrZXk6XCJfaW5pdEdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBvPXRbbl07Yl9bb10mJih0aGlzLmNvbnRlbnQuZ3JvdXBQcm9maWxlW29dPWVbb10pfX19LHtrZXk6XCJfdXBkYXRlTWVtYmVyTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe1h1KHRoaXMuY29udGVudC5tZW1iZXJMaXN0KT90aGlzLmNvbnRlbnQubWVtYmVyTGlzdD1lOnRoaXMuY29udGVudC5tZW1iZXJMaXN0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC51c2VySUQ9PT1lLnVzZXJJRCYmT2JqZWN0LmFzc2lnbih0LGUpfSkpfSkpfX1dKSxlfSgpLFBfPXtmcm9tOiEwLGdyb3VwSUQ6ITAsZ3JvdXBOYW1lOiEwLHRvOiEwfSxVXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLnR5cGU9WW4uTVNHX0dSUF9TWVNfTk9USUNFLHRoaXMuY29udGVudD17fSx0aGlzLl9pbml0Q29udGVudCh0KX1yZXR1cm4gRW4oZSxbe2tleTpcIl9pbml0Q29udGVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7c3dpdGNoKG4pe2Nhc2VcIm1lbWJlckluZm9MaXN0XCI6YnJlYWs7Y2FzZVwicmVtYXJrSW5mb1wiOnQuY29udGVudC5oYW5kbGVNZXNzYWdlPWVbbl07YnJlYWs7Y2FzZVwiZ3JvdXBQcm9maWxlXCI6dC5jb250ZW50Lmdyb3VwUHJvZmlsZT17fSx0Ll9pbml0R3JvdXBQcm9maWxlKGVbbl0pO2JyZWFrO2RlZmF1bHQ6dC5jb250ZW50W25dPWVbbl19fSkpfX0se2tleTpcIl9pbml0R3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIG89dFtuXTtQX1tvXSYmKFwiZ3JvdXBOYW1lXCI9PT1vP3RoaXMuY29udGVudC5ncm91cFByb2ZpbGUubmFtZT1lW29dOnRoaXMuY29udGVudC5ncm91cFByb2ZpbGVbb109ZVtvXSl9fX1dKSxlfSgpLEZfPU1hdGgubWluLHFfPVtdLmxhc3RJbmRleE9mLHhfPSEhcV8mJjEvWzFdLmxhc3RJbmRleE9mKDEsLTApPDAsVl89amUoXCJsYXN0SW5kZXhPZlwiKSxLXz16ZShcImluZGV4T2ZcIix7QUNDRVNTT1JTOiEwLDE6MH0pLEJfPXhffHwhVl98fCFLXz9mdW5jdGlvbihlKXtpZih4XylyZXR1cm4gcV8uYXBwbHkodGhpcyxhcmd1bWVudHMpfHwwO3ZhciB0PWYodGhpcyksbj1pZSh0Lmxlbmd0aCksbz1uLTE7Zm9yKGFyZ3VtZW50cy5sZW5ndGg+MSYmKG89Rl8obyxhZShhcmd1bWVudHNbMV0pKSksbzwwJiYobz1uK28pO28+PTA7by0tKWlmKG8gaW4gdCYmdFtvXT09PWUpcmV0dXJuIG98fDA7cmV0dXJuLTF9OnFfO2tlKHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDpCXyE9PVtdLmxhc3RJbmRleE9mfSx7bGFzdEluZGV4T2Y6Ql99KTt2YXIgSF89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy50eXBlPVluLk1TR19GSUxFLHRoaXMuX3BlcmNlbnQ9MDt2YXIgbj10aGlzLl9nZXRGaWxlSW5mbyh0KTt0aGlzLmNvbnRlbnQ9e2Rvd25sb2FkRmxhZzoyLGZpbGVVcmw6dC51cmx8fFwiXCIsdXVpZDp0LnV1aWQsZmlsZU5hbWU6bi5uYW1lfHxcIlwiLGZpbGVTaXplOm4uc2l6ZXx8MH19cmV0dXJuIEVuKGUsW3trZXk6XCJfZ2V0RmlsZUluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXtpZighaHUoZS5maWxlTmFtZSkmJiFodShlLmZpbGVTaXplKSlyZXR1cm57c2l6ZTplLmZpbGVTaXplLG5hbWU6ZS5maWxlTmFtZX07dmFyIHQ9ZS5maWxlLmZpbGVzWzBdO2lmKGxpKXtpZih0LnBhdGgmJi0xIT09dC5wYXRoLmluZGV4T2YoXCIuXCIpKXt2YXIgbj10LnBhdGguc2xpY2UodC5wYXRoLmxhc3RJbmRleE9mKFwiLlwiKSsxKS50b0xvd2VyQ2FzZSgpO3QudHlwZT1uLHQubmFtZXx8KHQubmFtZT1cIlwiLmNvbmNhdChTdSg5OTk5OTkpLFwiLlwiKS5jb25jYXQobikpfXQubmFtZXx8KHQudHlwZT1cIlwiLHQubmFtZT10LnBhdGguc2xpY2UodC5wYXRoLmxhc3RJbmRleE9mKFwiL1wiKSsxKS50b0xvd2VyQ2FzZSgpKSx0LnN1ZmZpeCYmKHQudHlwZT10LnN1ZmZpeCksdC51cmx8fCh0LnVybD10LnBhdGgpfXJldHVybntzaXplOnQuc2l6ZSxuYW1lOnQubmFtZX19fSx7a2V5OlwidXBkYXRlUGVyY2VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3BlcmNlbnQ9ZSx0aGlzLl9wZXJjZW50PjEmJih0aGlzLl9wZXJjZW50PTEpfX0se2tleTpcInVwZGF0ZUZpbGVVcmxcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbnRlbnQuZmlsZVVybD1lfX0se2tleTpcInNlbmRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cIlwiIT09dGhpcy5jb250ZW50LmZpbGVVcmwmJihcIlwiIT09dGhpcy5jb250ZW50LmZpbGVOYW1lJiYwIT09dGhpcy5jb250ZW50LmZpbGVTaXplKX19XSksZX0oKSxqXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLnR5cGU9WW4uTVNHX0NVU1RPTSx0aGlzLmNvbnRlbnQ9e2RhdGE6dC5kYXRhfHxcIlwiLGRlc2NyaXB0aW9uOnQuZGVzY3JpcHRpb258fFwiXCIsZXh0ZW5zaW9uOnQuZXh0ZW5zaW9ufHxcIlwifX1yZXR1cm4gRW4oZSxbe2tleTpcInNldERhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb250ZW50LmRhdGE9ZSx0aGlzfX0se2tleTpcInNldERlc2NyaXB0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29udGVudC5kZXNjcmlwdGlvbj1lLHRoaXN9fSx7a2V5Olwic2V0RXh0ZW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29udGVudC5leHRlbnNpb249ZSx0aGlzfX0se2tleTpcInNlbmRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuY29udGVudC5kYXRhLmxlbmd0aHx8MCE9PXRoaXMuY29udGVudC5kZXNjcmlwdGlvbi5sZW5ndGh8fDAhPT10aGlzLmNvbnRlbnQuZXh0ZW5zaW9uLmxlbmd0aH19XSksZX0oKSxXXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLnR5cGU9WW4uTVNHX1ZJREVPLHRoaXMuX3BlcmNlbnQ9MCx0aGlzLmNvbnRlbnQ9e3JlbW90ZVZpZGVvVXJsOnQucmVtb3RlVmlkZW9Vcmx8fHQudmlkZW9Vcmx8fFwiXCIsdmlkZW9Gb3JtYXQ6dC52aWRlb0Zvcm1hdCx2aWRlb1NlY29uZDpwYXJzZUludCh0LnZpZGVvU2Vjb25kLDEwKSx2aWRlb1NpemU6dC52aWRlb1NpemUsdmlkZW9Vcmw6dC52aWRlb1VybCx2aWRlb0Rvd25sb2FkRmxhZzoyLHZpZGVvVVVJRDp0LnZpZGVvVVVJRCx0aHVtYlVVSUQ6dC50aHVtYlVVSUQsdGh1bWJGb3JtYXQ6dC50aHVtYkZvcm1hdCx0aHVtYldpZHRoOnQudGh1bWJXaWR0aCxzbmFwc2hvdFdpZHRoOnQudGh1bWJXaWR0aCx0aHVtYkhlaWdodDp0LnRodW1iSGVpZ2h0LHNuYXBzaG90SGVpZ2h0OnQudGh1bWJIZWlnaHQsdGh1bWJTaXplOnQudGh1bWJTaXplLHNuYXBzaG90U2l6ZTp0LnRodW1iU2l6ZSx0aHVtYkRvd25sb2FkRmxhZzoyLHRodW1iVXJsOnQudGh1bWJVcmwsc25hcHNob3RVcmw6dC50aHVtYlVybH19cmV0dXJuIEVuKGUsW3trZXk6XCJ1cGRhdGVQZXJjZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcGVyY2VudD1lLHRoaXMuX3BlcmNlbnQ+MSYmKHRoaXMuX3BlcmNlbnQ9MSl9fSx7a2V5OlwidXBkYXRlVmlkZW9VcmxcIix2YWx1ZTpmdW5jdGlvbihlKXtlJiYodGhpcy5jb250ZW50LnJlbW90ZVZpZGVvVXJsPWUpfX0se2tleTpcInVwZGF0ZVNuYXBzaG90SW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc25hcHNob3RVcmwsbj1lLnNuYXBzaG90V2lkdGgsbz1lLnNuYXBzaG90SGVpZ2h0O1h1KHQpfHwodGhpcy5jb250ZW50LnRodW1iVXJsPXRoaXMuY29udGVudC5zbmFwc2hvdFVybD10KSxYdShuKXx8KHRoaXMuY29udGVudC50aHVtYldpZHRoPXRoaXMuY29udGVudC5zbmFwc2hvdFdpZHRoPU51bWJlcihuKSksWHUobyl8fCh0aGlzLmNvbnRlbnQudGh1bWJIZWlnaHQ9dGhpcy5jb250ZW50LnNuYXBzaG90SGVpZ2h0PU51bWJlcihvKSl9fSx7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiXCIhPT10aGlzLmNvbnRlbnQucmVtb3RlVmlkZW9Vcmx9fV0pLGV9KCksWV89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy50eXBlPVluLk1TR19MT0NBVElPTjt2YXIgbj10LmRlc2NyaXB0aW9uLG89dC5sb25naXR1ZGUscj10LmxhdGl0dWRlO3RoaXMuY29udGVudD17ZGVzY3JpcHRpb246bixsb25naXR1ZGU6byxsYXRpdHVkZTpyfX1yZXR1cm4gRW4oZSxbe2tleTpcInNlbmRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hMH19XSksZX0oKSwkXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7aWYoeW4odGhpcyxlKSx0aGlzLmZyb209dC5mcm9tLHRoaXMubWVzc2FnZVNlbmRlcj10LmZyb20sdGhpcy50aW1lPXQudGltZSx0aGlzLm1lc3NhZ2VTZXF1ZW5jZT10LnNlcXVlbmNlLHRoaXMuY2xpZW50U2VxdWVuY2U9dC5jbGllbnRTZXF1ZW5jZXx8dC5zZXF1ZW5jZSx0aGlzLm1lc3NhZ2VSYW5kb209dC5yYW5kb20sdGhpcy5jbG91ZEN1c3RvbURhdGE9dC5jbG91ZEN1c3RvbURhdGF8fFwiXCIsdC5JRCl0aGlzLm5pY2s9dC5uaWNrfHxcIlwiLHRoaXMuYXZhdGFyPXQuYXZhdGFyfHxcIlwiLHRoaXMubWVzc2FnZUJvZHk9W3t0eXBlOnQudHlwZSxwYXlsb2FkOnQucGF5bG9hZH1dLHQuY29udmVyc2F0aW9uVHlwZS5zdGFydHNXaXRoKFluLkNPTlZfQzJDKT90aGlzLnJlY2VpdmVyVXNlcklEPXQudG86dC5jb252ZXJzYXRpb25UeXBlLnN0YXJ0c1dpdGgoWW4uQ09OVl9HUk9VUCkmJih0aGlzLnJlY2VpdmVyR3JvdXBJRD10LnRvKSx0aGlzLm1lc3NhZ2VSZWNlaXZlcj10LnRvO2Vsc2V7dGhpcy5uaWNrPXQubmlja3x8XCJcIix0aGlzLmF2YXRhcj10LmF2YXRhcnx8XCJcIix0aGlzLm1lc3NhZ2VCb2R5PVtdO3ZhciBuPXQuZWxlbWVudHNbMF0udHlwZSxvPXQuZWxlbWVudHNbMF0uY29udGVudDt0aGlzLl9wYXRjaFJpY2hNZWRpYVBheWxvYWQobixvKSxuPT09WW4uTVNHX01FUkdFUj90aGlzLm1lc3NhZ2VCb2R5LnB1c2goe3R5cGU6bixwYXlsb2FkOm5ldyB6XyhvKS5jb250ZW50fSk6dGhpcy5tZXNzYWdlQm9keS5wdXNoKHt0eXBlOm4scGF5bG9hZDpvfSksdC5ncm91cElEJiYodGhpcy5yZWNlaXZlckdyb3VwSUQ9dC5ncm91cElELHRoaXMubWVzc2FnZVJlY2VpdmVyPXQuZ3JvdXBJRCksdC50byYmKHRoaXMucmVjZWl2ZXJVc2VySUQ9dC50byx0aGlzLm1lc3NhZ2VSZWNlaXZlcj10LnRvKX19cmV0dXJuIEVuKGUsW3trZXk6XCJfcGF0Y2hSaWNoTWVkaWFQYXlsb2FkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlPT09WW4uTVNHX0lNQUdFP3QuaW1hZ2VJbmZvQXJyYXkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7IWUuaW1hZ2VVcmwmJmUudXJsJiYoZS5pbWFnZVVybD1lLnVybCxlLnNpemVUeXBlPWUudHlwZSwxPT09ZS50eXBlP2UudHlwZT0wOjM9PT1lLnR5cGUmJihlLnR5cGU9MSkpfSkpOmU9PT1Zbi5NU0dfVklERU8/IXQucmVtb3RlVmlkZW9VcmwmJnQudmlkZW9VcmwmJih0LnJlbW90ZVZpZGVvVXJsPXQudmlkZW9VcmwpOmU9PT1Zbi5NU0dfQVVESU8/IXQucmVtb3RlQXVkaW9VcmwmJnQudXJsJiYodC5yZW1vdGVBdWRpb1VybD10LnVybCk6ZT09PVluLk1TR19GSUxFJiYhdC5maWxlVXJsJiZ0LnVybCYmKHQuZmlsZVVybD10LnVybCx0LnVybD12b2lkIDApfX1dKSxlfSgpLHpfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtpZih5bih0aGlzLGUpLHRoaXMudHlwZT1Zbi5NU0dfTUVSR0VSLHRoaXMuY29udGVudD17ZG93bmxvYWRLZXk6XCJcIixwYkRvd25sb2FkS2V5OlwiXCIsbWVzc2FnZUxpc3Q6W10sdGl0bGU6XCJcIixhYnN0cmFjdExpc3Q6W10sY29tcGF0aWJsZVRleHQ6XCJcIix2ZXJzaW9uOjAsbGF5ZXJzT3ZlckxpbWl0OiExfSx0LmRvd25sb2FkS2V5KXt2YXIgbj10LmRvd25sb2FkS2V5LG89dC5wYkRvd25sb2FkS2V5LHI9dC50aXRsZSxhPXQuYWJzdHJhY3RMaXN0LHM9dC5jb21wYXRpYmxlVGV4dCxpPXQudmVyc2lvbjt0aGlzLmNvbnRlbnQuZG93bmxvYWRLZXk9bix0aGlzLmNvbnRlbnQucGJEb3dubG9hZEtleT1vLHRoaXMuY29udGVudC50aXRsZT1yLHRoaXMuY29udGVudC5hYnN0cmFjdExpc3Q9YSx0aGlzLmNvbnRlbnQuY29tcGF0aWJsZVRleHQ9cyx0aGlzLmNvbnRlbnQudmVyc2lvbj1pfHwwfWVsc2UgaWYoWHUodC5tZXNzYWdlTGlzdCkpMT09PXQubGF5ZXJzT3ZlckxpbWl0JiYodGhpcy5jb250ZW50LmxheWVyc092ZXJMaW1pdD0hMCk7ZWxzZXt2YXIgdT10Lm1lc3NhZ2VMaXN0LGM9dC50aXRsZSxsPXQuYWJzdHJhY3RMaXN0LGQ9dC5jb21wYXRpYmxlVGV4dCxwPXQudmVyc2lvbixnPVtdO3UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoIVh1KGUpKXt2YXIgdD1uZXcgJF8oZSk7Zy5wdXNoKHQpfX0pKSx0aGlzLmNvbnRlbnQubWVzc2FnZUxpc3Q9Zyx0aGlzLmNvbnRlbnQudGl0bGU9Yyx0aGlzLmNvbnRlbnQuYWJzdHJhY3RMaXN0PWwsdGhpcy5jb250ZW50LmNvbXBhdGlibGVUZXh0PWQsdGhpcy5jb250ZW50LnZlcnNpb249cHx8MH1RaS5kZWJ1ZyhcIk1lcmdlckVsZW1lbnQuY29udGVudDpcIix0aGlzLmNvbnRlbnQpfXJldHVybiBFbihlLFt7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiFYdSh0aGlzLmNvbnRlbnQubWVzc2FnZUxpc3QpfHwhWHUodGhpcy5jb250ZW50LmRvd25sb2FkS2V5KX19XSksZX0oKSxKXz17MTpZbi5NU0dfUFJJT1JJVFlfSElHSCwyOlluLk1TR19QUklPUklUWV9OT1JNQUwsMzpZbi5NU0dfUFJJT1JJVFlfTE9XLDQ6WW4uTVNHX1BSSU9SSVRZX0xPV0VTVH0sWF89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5JRD1cIlwiLHRoaXMuY29udmVyc2F0aW9uSUQ9dC5jb252ZXJzYXRpb25JRHx8bnVsbCx0aGlzLmNvbnZlcnNhdGlvblR5cGU9dC5jb252ZXJzYXRpb25UeXBlfHxZbi5DT05WX0MyQyx0aGlzLmNvbnZlcnNhdGlvblN1YlR5cGU9dC5jb252ZXJzYXRpb25TdWJUeXBlLHRoaXMudGltZT10LnRpbWV8fE1hdGguY2VpbChEYXRlLm5vdygpLzFlMyksdGhpcy5zZXF1ZW5jZT10LnNlcXVlbmNlfHwwLHRoaXMuY2xpZW50U2VxdWVuY2U9dC5jbGllbnRTZXF1ZW5jZXx8dC5zZXF1ZW5jZXx8MCx0aGlzLnJhbmRvbT10LnJhbmRvbXx8MD09PXQucmFuZG9tP3QucmFuZG9tOlN1KCksdGhpcy5wcmlvcml0eT10aGlzLl9jb21wdXRlUHJpb3JpdHkodC5wcmlvcml0eSksdGhpcy5uaWNrPXQubmlja3x8XCJcIix0aGlzLmF2YXRhcj10LmF2YXRhcnx8XCJcIix0aGlzLmlzUGVlclJlYWQ9ITEsdGhpcy5uYW1lQ2FyZD1cIlwiLHRoaXMuX2VsZW1lbnRzPVtdLHRoaXMuaXNQbGFjZU1lc3NhZ2U9dC5pc1BsYWNlTWVzc2FnZXx8MCx0aGlzLmlzUmV2b2tlZD0yPT09dC5pc1BsYWNlTWVzc2FnZXx8OD09PXQubXNnRmxhZ0JpdHMsdGhpcy5mcm9tPXQuZnJvbXx8bnVsbCx0aGlzLnRvPXQudG98fG51bGwsdGhpcy5mbG93PVwiXCIsdGhpcy5pc1N5c3RlbU1lc3NhZ2U9dC5pc1N5c3RlbU1lc3NhZ2V8fCExLHRoaXMucHJvdG9jb2w9dC5wcm90b2NvbHx8XCJKU09OXCIsdGhpcy5pc1Jlc2VuZD0hMSx0aGlzLmlzUmVhZD0hMSx0aGlzLnN0YXR1cz10LnN0YXR1c3x8cWMuU1VDQ0VTUyx0aGlzLl9vbmxpbmVPbmx5RmxhZz0hMSx0aGlzLl9ncm91cEF0SW5mb0xpc3Q9W10sdGhpcy5fcmVsYXlGbGFnPSExLHRoaXMuYXRVc2VyTGlzdD1bXSx0aGlzLmNsb3VkQ3VzdG9tRGF0YT10LmNsb3VkQ3VzdG9tRGF0YXx8XCJcIix0aGlzLmlzRGVsZXRlZD0hMSx0aGlzLmlzTW9kaWZpZWQ9ITEsdGhpcy5faXNFeGNsdWRlZEZyb21VbnJlYWRDb3VudD0hKCF0Lm1lc3NhZ2VDb250cm9sSW5mb3x8MSE9PXQubWVzc2FnZUNvbnRyb2xJbmZvLmV4Y2x1ZGVkRnJvbVVucmVhZENvdW50KSx0aGlzLl9pc0V4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlPSEoIXQubWVzc2FnZUNvbnRyb2xJbmZvfHwxIT09dC5tZXNzYWdlQ29udHJvbEluZm8uZXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2UpLHRoaXMuY2xpZW50VGltZT10LmNsaWVudFRpbWV8fCRpKCl8fDAsdGhpcy5zZW5kZXJUaW55SUQ9dC5zZW5kZXJUaW55SUR8fHQudGlueUlEfHxcIlwiLHRoaXMucmVhZFJlY2VpcHRJbmZvPXQucmVhZFJlY2VpcHRJbmZvfHx7cmVhZENvdW50OnZvaWQgMCx1bnJlYWRDb3VudDp2b2lkIDB9LHRoaXMubmVlZFJlYWRSZWNlaXB0PSEwPT09dC5uZWVkUmVhZFJlY2VpcHR8fDE9PT10Lm5lZWRSZWFkUmVjZWlwdCx0aGlzLnJlSW5pdGlhbGl6ZSh0LmN1cnJlbnRVc2VyKSx0aGlzLmV4dHJhY3RHcm91cEluZm8odC5ncm91cFByb2ZpbGV8fG51bGwpLHRoaXMuaGFuZGxlR3JvdXBBdEluZm8odCl9cmV0dXJuIEVuKGUsW3trZXk6XCJnZXRFbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VsZW1lbnRzfX0se2tleTpcImV4dHJhY3RHcm91cEluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXtpZihudWxsIT09ZSl7bHUoZS5uaWNrKSYmKHRoaXMubmljaz1lLm5pY2spLGx1KGUuYXZhdGFyKSYmKHRoaXMuYXZhdGFyPWUuYXZhdGFyKTt2YXIgdD1lLm1lc3NhZ2VGcm9tQWNjb3VudEV4dHJhSW5mb3JtYXRpb247cHUodCkmJmx1KHQubmFtZUNhcmQpJiYodGhpcy5uYW1lQ2FyZD10Lm5hbWVDYXJkKX19fSx7a2V5OlwiaGFuZGxlR3JvdXBBdEluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UucGF5bG9hZCYmZS5wYXlsb2FkLmF0VXNlckxpc3QmJmUucGF5bG9hZC5hdFVzZXJMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2UhPT1Zbi5NU0dfQVRfQUxMPyh0Ll9ncm91cEF0SW5mb0xpc3QucHVzaCh7Z3JvdXBBdEFsbEZsYWc6MCxncm91cEF0VXNlcklEOmV9KSx0LmF0VXNlckxpc3QucHVzaChlKSk6KHQuX2dyb3VwQXRJbmZvTGlzdC5wdXNoKHtncm91cEF0QWxsRmxhZzoxfSksdC5hdFVzZXJMaXN0LnB1c2goWW4uTVNHX0FUX0FMTCkpfSkpLGd1KGUuZ3JvdXBBdEluZm8pJiZlLmdyb3VwQXRJbmZvLmZvckVhY2goKGZ1bmN0aW9uKGUpezA9PT1lLmdyb3VwQXRBbGxGbGFnP3QuYXRVc2VyTGlzdC5wdXNoKGUuZ3JvdXBBdFVzZXJJRCk6MT09PWUuZ3JvdXBBdEFsbEZsYWcmJnQuYXRVc2VyTGlzdC5wdXNoKFluLk1TR19BVF9BTEwpfSkpfX0se2tleTpcImdldEdyb3VwQXRJbmZvTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dyb3VwQXRJbmZvTGlzdH19LHtrZXk6XCJfaW5pdFByb3h5XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50c1swXSYmKHRoaXMucGF5bG9hZD10aGlzLl9lbGVtZW50c1swXS5jb250ZW50LHRoaXMudHlwZT10aGlzLl9lbGVtZW50c1swXS50eXBlKX19LHtrZXk6XCJyZUluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbihlKXtlJiYodGhpcy5zdGF0dXM9dGhpcy5mcm9tP3FjLlNVQ0NFU1M6cWMuVU5TRU5ELCF0aGlzLmZyb20mJih0aGlzLmZyb209ZSkpLHRoaXMuX2luaXRGbG93KGUpLHRoaXMuX2luaXRTZXF1ZW5jZShlKSx0aGlzLl9jb25jYXRDb252ZXJzYXRpb25JRChlKSx0aGlzLmdlbmVyYXRlTWVzc2FnZUlEKCl9fSx7a2V5OlwiaXNTZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLl9lbGVtZW50cy5sZW5ndGgmJihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzLl9lbGVtZW50c1swXS5zZW5kYWJsZT8oUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9lbGVtZW50c1swXS50eXBlLCcgbmVlZCBcImJvb2xlYW4gOiBzZW5kYWJsZSgpXCIgbWV0aG9kJykpLCExKTp0aGlzLl9lbGVtZW50c1swXS5zZW5kYWJsZSgpKX19LHtrZXk6XCJfaW5pdFRvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9HUk9VUCYmKHRoaXMudG89ZS5ncm91cElEKX19LHtrZXk6XCJfaW5pdFNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7MD09PXRoaXMuY2xpZW50U2VxdWVuY2UmJmUmJih0aGlzLmNsaWVudFNlcXVlbmNlPWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiBRaS5lcnJvcihcImF1dG9JbmNyZW1lbnRJbmRleChzdHJpbmc6IGtleSkgbmVlZCBrZXkgcGFyYW1ldGVyXCIpLCExO2lmKHZvaWQgMD09PWt1W2VdKXt2YXIgdD1uZXcgRGF0ZSxuPVwiM1wiLmNvbmNhdCh0LmdldEhvdXJzKCkpLnNsaWNlKC0yKSxvPVwiMFwiLmNvbmNhdCh0LmdldE1pbnV0ZXMoKSkuc2xpY2UoLTIpLHI9XCIwXCIuY29uY2F0KHQuZ2V0U2Vjb25kcygpKS5zbGljZSgtMik7a3VbZV09cGFyc2VJbnQoW24sbyxyLFwiMDAwMVwiXS5qb2luKFwiXCIpKSxuPW51bGwsbz1udWxsLHI9bnVsbCxRaS5sb2coXCJhdXRvSW5jcmVtZW50SW5kZXggc3RhcnQgaW5kZXg6XCIuY29uY2F0KGt1W2VdKSl9cmV0dXJuIGt1W2VdKyt9KGUpKSwwPT09dGhpcy5zZXF1ZW5jZSYmdGhpcy5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9DMkMmJih0aGlzLnNlcXVlbmNlPXRoaXMuY2xpZW50U2VxdWVuY2UpfX0se2tleTpcImdlbmVyYXRlTWVzc2FnZUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmZyb209PT1Zbi5DT05WX1NZU1RFTSYmKHRoaXMuc2VuZGVyVGlueUlEPVwiMTQ0MTE1MTk4MjQ0NDcxNzAzXCIpLHRoaXMuSUQ9XCJcIi5jb25jYXQodGhpcy5zZW5kZXJUaW55SUQsXCItXCIpLmNvbmNhdCh0aGlzLmNsaWVudFRpbWUsXCItXCIpLmNvbmNhdCh0aGlzLnJhbmRvbSl9fSx7a2V5OlwiX2luaXRGbG93XCIsdmFsdWU6ZnVuY3Rpb24oZSl7XCJcIiE9PWUmJihlPT09dGhpcy5mcm9tPyh0aGlzLmZsb3c9XCJvdXRcIix0aGlzLmlzUmVhZD0hMCk6dGhpcy5mbG93PVwiaW5cIil9fSx7a2V5OlwiX2NvbmNhdENvbnZlcnNhdGlvbklEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50byxuPVwiXCIsbz10aGlzLmNvbnZlcnNhdGlvblR5cGU7byE9PVluLkNPTlZfU1lTVEVNPyhuPW89PT1Zbi5DT05WX0MyQz9lPT09dGhpcy5mcm9tP3Q6dGhpcy5mcm9tOnRoaXMudG8sdGhpcy5jb252ZXJzYXRpb25JRD1cIlwiLmNvbmNhdChvKS5jb25jYXQobikpOnRoaXMuY29udmVyc2F0aW9uSUQ9WW4uQ09OVl9TWVNURU19fSx7a2V5OlwiaXNFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBTaHx8ZSBpbnN0YW5jZW9mIFJffHxlIGluc3RhbmNlb2YgT198fGUgaW5zdGFuY2VvZiBHX3x8ZSBpbnN0YW5jZW9mIEhffHxlIGluc3RhbmNlb2YgV198fGUgaW5zdGFuY2VvZiB3X3x8ZSBpbnN0YW5jZW9mIFVffHxlIGluc3RhbmNlb2Ygal98fGUgaW5zdGFuY2VvZiBZX3x8ZSBpbnN0YW5jZW9mIHpffX0se2tleTpcInNldEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuaXNFbGVtZW50KGUpKXJldHVybiB0aGlzLl9lbGVtZW50cz1bZV0sdm9pZCB0aGlzLl9pbml0UHJveHkoKTt2YXIgbj1mdW5jdGlvbihlKXtpZihlLnR5cGUmJmUuY29udGVudClzd2l0Y2goZS50eXBlKXtjYXNlIFluLk1TR19URVhUOnQuc2V0VGV4dEVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIFluLk1TR19JTUFHRTp0LnNldEltYWdlRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2UgWW4uTVNHX0FVRElPOnQuc2V0QXVkaW9FbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSBZbi5NU0dfRklMRTp0LnNldEZpbGVFbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSBZbi5NU0dfVklERU86dC5zZXRWaWRlb0VsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIFluLk1TR19DVVNUT006dC5zZXRDdXN0b21FbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSBZbi5NU0dfTE9DQVRJT046dC5zZXRMb2NhdGlvbkVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIFluLk1TR19HUlBfVElQOnQuc2V0R3JvdXBUaXBFbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSBZbi5NU0dfR1JQX1NZU19OT1RJQ0U6dC5zZXRHcm91cFN5c3RlbU5vdGljZUVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIFluLk1TR19GQUNFOnQuc2V0RmFjZUVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIFluLk1TR19NRVJHRVI6dC5zZXRNZXJnZXJFbGVtZW50KGUuY29udGVudCk7YnJlYWs7ZGVmYXVsdDpRaS53YXJuKGUudHlwZSxlLmNvbnRlbnQsXCJubyBvcGVyYXRpb24uLi4uLi5cIil9fTtpZihndShlKSlmb3IodmFyIG89MDtvPGUubGVuZ3RoO28rKyluKGVbb10pO2Vsc2UgbihlKTt0aGlzLl9pbml0UHJveHkoKX19LHtrZXk6XCJjbGVhckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2VsZW1lbnRzLmxlbmd0aD0wfX0se2tleTpcInNldFRleHRFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplLnRleHQsbj1uZXcgU2goe3RleHQ6dH0pO3RoaXMuX2VsZW1lbnRzLnB1c2gobil9fSx7a2V5Olwic2V0SW1hZ2VFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFJfKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9fSx7a2V5Olwic2V0QXVkaW9FbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEdfKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9fSx7a2V5Olwic2V0RmlsZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgSF8oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRWaWRlb0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgV18oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRMb2NhdGlvbkVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgWV8oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRDdXN0b21FbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGpfKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9fSx7a2V5Olwic2V0R3JvdXBUaXBFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30sbj1lLm9wZXJhdGlvblR5cGU7WHUoZS5tZW1iZXJJbmZvTGlzdCk/ZS5vcGVyYXRvckluZm8mJih0PWUub3BlcmF0b3JJbmZvKTpuIT09WW4uR1JQX1RJUF9NQlJfSk9JTiYmbiE9PVluLkdSUF9USVBfTUJSX0tJQ0tFRF9PVVQmJm4hPT1Zbi5HUlBfVElQX01CUl9TRVRfQURNSU4mJm4hPT1Zbi5HUlBfVElQX01CUl9DQU5DRUxFRF9BRE1JTnx8KHQ9ZS5tZW1iZXJJbmZvTGlzdFswXSk7dmFyIG89dCxyPW8ubmljayxhPW8uYXZhdGFyO2x1KHIpJiYodGhpcy5uaWNrPXIpLGx1KGEpJiYodGhpcy5hdmF0YXI9YSk7dmFyIHM9bmV3IHdfKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2gocyl9fSx7a2V5Olwic2V0R3JvdXBTeXN0ZW1Ob3RpY2VFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFVfKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9fSx7a2V5Olwic2V0RmFjZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgT18oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRNZXJnZXJFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHpfKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9fSx7a2V5Olwic2V0SXNSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5pc1JlYWQ9ZX19LHtrZXk6XCJzZXRSZWxheUZsYWdcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9yZWxheUZsYWc9ZX19LHtrZXk6XCJnZXRSZWxheUZsYWdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWxheUZsYWd9fSx7a2V5OlwiX2NvbXB1dGVQcmlvcml0eVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGh1KGUpKXJldHVybiBZbi5NU0dfUFJJT1JJVFlfTk9STUFMO2lmKGx1KGUpJiYtMSE9PU9iamVjdC52YWx1ZXMoSl8pLmluZGV4T2YoZSkpcmV0dXJuIGU7aWYoY3UoZSkpe3ZhciB0PVwiXCIrZTtpZigtMSE9PU9iamVjdC5rZXlzKEpfKS5pbmRleE9mKHQpKXJldHVybiBKX1t0XX1yZXR1cm4gWW4uTVNHX1BSSU9SSVRZX05PUk1BTH19LHtrZXk6XCJzZXROaWNrQW5kQXZhdGFyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5uaWNrLG49ZS5hdmF0YXI7bHUodCkmJih0aGlzLm5pY2s9dCksbHUobikmJih0aGlzLmF2YXRhcj1uKX19LHtrZXk6XCJzZXROYW1lQ2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2x1KGUpJiYodGhpcy5uYW1lQ2FyZD1lKX19LHtrZXk6XCJlbGVtZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRaS53YXJuKFwi77yB77yB77yBTWVzc2FnZSDlrp7kvovnmoQgZWxlbWVudHMg5bGe5oCn5Y2z5bCG5bqf5byD77yM6K+35bC95b+r5L+u5pS544CC5L2/55SoIHR5cGUg5ZKMIHBheWxvYWQg5bGe5oCn5aSE55CG5Y2V5p2h5raI5oGv77yM5YW85a6557uE5ZCI5raI5oGv5L2/55SoIF9lbGVtZW50cyDlsZ7mgKfvvIHvvIHvvIFcIiksdGhpcy5fZWxlbWVudHN9fV0pLGV9KCksUV89ZnVuY3Rpb24oZSl7cmV0dXJue2NvZGU6MCxkYXRhOmV8fHt9fX0sWl89XCJodHRwczovL2Nsb3VkLnRlbmNlbnQuY29tL2RvY3VtZW50L3Byb2R1Y3QvXCIsZW09XCLmgqjlj6/ku6XlnKjljbPml7bpgJrkv6EgSU0g5o6n5Yi25Y+w55qE44CQ5byA5Y+R6L6F5Yqp5bel5YW3KGh0dHBzOi8vY29uc29sZS5jbG91ZC50ZW5jZW50LmNvbS9pbS1kZXRhaWwvdG9vbC11c2Vyc2lnKeOAkSDpobXpnaLmoKHpqowgVXNlclNpZ+OAglwiLHRtPVwiVXNlclNpZyDpnZ7ms5XvvIzor7fkvb/nlKjlrpjnvZHmj5DkvpvnmoQgQVBJIOmHjeaWsOeUn+aIkCBVc2VyU2lnKFwiLmNvbmNhdChaXyxcIjI2OS8zMjY4OCnjgIJcIiksbm09XCIjLkU2LkI2Ljg4LkU2LjgxLkFGLkU1Ljg1LjgzLkU3LkI0LkEwLXRpbW1zZ2VsZW1lbnRcIixvbT17NzAwMDE6XCJVc2VyU2lnIOW3sui/h+acn++8jOivt+mHjeaWsOeUn+aIkOOAguW7uuiuriBVc2VyU2lnIOacieaViOacn+iuvue9ruS4jeWwj+S6jjI05bCP5pe244CCXCIsNzAwMDI6XCJVc2VyU2lnIOmVv+W6puS4ujDvvIzor7fmo4Dmn6XkvKDlhaXnmoQgVXNlclNpZyDmmK/lkKbmraPnoa7jgIJcIiw3MDAwMzp0bSw3MDAwNTp0bSw3MDAwOTpcIlVzZXJTaWcg6aqM6K+B5aSx6LSl77yM5Y+v6IO95Zug5Li655Sf5oiQIFVzZXJTaWcg5pe25re355So5LqG5YW25LuWIFNES0FwcElEIOeahOengemSpeaIluWvhumSpeWvvOiHtO+8jOivt+S9v+eUqOWvueW6lCBTREtBcHBJRCDkuIvnmoTnp4HpkqXmiJblr4bpkqXph43mlrDnlJ/miJAgVXNlclNpZyhcIi5jb25jYXQoWl8sXCIyNjkvMzI2ODgp44CCXCIpLDcwMDEzOlwi6K+35rGC5Lit55qEIFVzZXJJRCDkuI7nlJ/miJAgVXNlclNpZyDml7bkvb/nlKjnmoQgVXNlcklEIOS4jeWMuemFjeOAglwiLmNvbmNhdChlbSksNzAwMTQ6XCLor7fmsYLkuK3nmoQgU0RLQXBwSUQg5LiO55Sf5oiQIFVzZXJTaWcg5pe25L2/55So55qEIFNES0FwcElEIOS4jeWMuemFjeOAglwiLmNvbmNhdChlbSksNzAwMTY6XCLlr4bpkqXkuI3lrZjlnKjvvIxVc2VyU2lnIOmqjOivgeWksei0pe+8jOivt+WcqOWNs+aXtumAmuS/oSBJTSDmjqfliLblj7Dojrflj5blr4bpkqUoXCIuY29uY2F0KFpfLFwiMjY5LzMyNTc4Iy5FOC44RS5CNy5FNS44Ri45Ni5FNS5BRi44Ni5FOS45Mi5BNSnjgIJcIiksNzAwMjA6XCJTREtBcHBJRCDmnKrmib7liLDvvIzor7flnKjljbPml7bpgJrkv6EgSU0g5o6n5Yi25Y+w56Gu6K6k5bqU55So5L+h5oGv44CCXCIsNzAwNTA6XCJVc2VyU2lnIOmqjOivgeasoeaVsOi/h+S6jumikee5geOAguivt+ajgOafpSBVc2VyU2lnIOaYr+WQpuato+ehru+8jOW5tuS6jjHliIbpkp/lkI7ph43mlrDpqozor4HjgIJcIi5jb25jYXQoZW0pLDcwMDUxOlwi5biQ5Y+36KKr5ouJ5YWl6buR5ZCN5Y2V44CCXCIsNzAwNTI6XCJVc2VyU2lnIOW3sue7j+WkseaViO+8jOivt+mHjeaWsOeUn+aIkO+8jOWGjeasoeWwneivleOAglwiLDcwMTA3Olwi5Zug5a6J5YWo5Y6f5Zug6KKr6ZmQ5Yi255m75b2V77yM6K+35LiN6KaB6aKR57mB55m75b2V44CCXCIsNzAxNjk6XCLor7fmsYLnmoTnlKjmiLfluJDlj7fkuI3lrZjlnKjjgIJcIiw3MDExNDpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOi2heaXtu+8jOivt+eojeWQjumHjeivleOAglwiKSw3MDIwMjpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOi2heaXtu+8jOivt+eojeWQjumHjeivleOAglwiKSw3MDIwNjpcIuivt+axguS4reaJuemHj+aVsOmHj+S4jeWQiOazleOAglwiLDcwNDAyOlwi5Y+C5pWw6Z2e5rOV77yM6K+35qOA5p+l5b+F5aGr5a2X5q615piv5ZCm5aGr5YWF77yM5oiW6ICF5a2X5q6155qE5aGr5YWF5piv5ZCm5ruh6Laz5Y2P6K6u6KaB5rGC44CCXCIsNzA0MDM6XCLor7fmsYLlpLHotKXvvIzpnIDopoEgQXBwIOeuoeeQhuWRmOadg+mZkOOAglwiLDcwMzk4Olwi5biQ5Y+35pWw6LaF6ZmQ44CC5aaC6ZyA5Yib5bu65aSa5LqOMTAw5Liq5biQ5Y+377yM6K+35bCG5bqU55So5Y2H57qn5Li65LiT5Lia54mI77yM5YW35L2T5pON5L2c5oyH5byV6K+35Y+C6KeB6LSt5Lmw5oyH5byVKFwiLmNvbmNhdChaXyxcIjI2OS8zMjQ1OCnjgIJcIiksNzA1MDA6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jplJnor6/vvIzor7fph43or5XjgIJcIiksNzFlMzpcIuWIoOmZpOW4kOWPt+Wksei0peOAguS7heaUr+aMgeWIoOmZpOS9k+mqjOeJiOW4kOWPt++8jOaCqOW9k+WJjeW6lOeUqOS4uuS4k+S4mueJiO+8jOaaguS4jeaUr+aMgeW4kOWPt+WIoOmZpOOAglwiLDIwMDAxOlwi6K+35rGC5YyF6Z2e5rOV44CCXCIsMjAwMDI6XCJVc2VyU2lnIOaIliBBMiDlpLHmlYjjgIJcIiwyMDAwMzpcIua2iOaBr+WPkemAgeaWueaIluaOpeaUtuaWuSBVc2VySUQg5peg5pWI5oiW5LiN5a2Y5Zyo77yM6K+35qOA5p+lIFVzZXJJRCDmmK/lkKblt7Llr7zlhaXljbPml7bpgJrkv6EgSU3jgIJcIiwyMDAwNDpcIue9kee7nOW8guW4uO+8jOivt+mHjeivleOAglwiLDIwMDA1OlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIpLDIwMDA2Olwi6Kem5Y+R5Y+R6YCBXCIuY29uY2F0KFwi5Y2V6IGK5raI5oGvXCIsXCLkuYvliY3lm57osIPvvIxBcHAg5ZCO5Y+w6L+U5Zue56aB5q2i5LiL5Y+R6K+l5raI5oGv44CCXCIpLDIwMDA3Olwi5Y+R6YCBXCIuY29uY2F0KFwi5Y2V6IGK5raI5oGvXCIsXCLvvIzooqvlr7nmlrnmi4npu5HvvIznpoHmraLlj5HpgIHjgILmtojmga/lj5HpgIHnirbmgIHpu5jorqTlsZXnpLrkuLrlpLHotKXvvIzmgqjlj6/ku6XnmbvlvZXmjqfliLblj7Dkv67mlLnor6XlnLrmma/kuIvnmoTmtojmga/lj5HpgIHnirbmgIHlsZXnpLrnu5PmnpzvvIzlhbfkvZPmk43kvZzor7flj4Lop4Hmtojmga/kv53nlZnorr7nva4oXCIpLmNvbmNhdChaXyxcIjI2OS8zODY1NinjgIJcIiksMjAwMDk6XCLmtojmga/lj5HpgIHlj4zmlrnkupLnm7jkuI3mmK/lpb3lj4vvvIznpoHmraLlj5HpgIHvvIjphY3nva5cIi5jb25jYXQoXCLljZXogYrmtojmga9cIixcIuagoemqjOWlveWPi+WFs+ezu+aJjeS8muWHuueOsO+8ieOAglwiKSwyMDAxMDpcIuWPkemAgVwiLmNvbmNhdChcIuWNleiBiua2iOaBr1wiLFwi77yM6Ieq5bex5LiN5piv5a+55pa555qE5aW95Y+L77yI5Y2V5ZCR5YWz57O777yJ77yM56aB5q2i5Y+R6YCB44CCXCIpLDIwMDExOlwi5Y+R6YCBXCIuY29uY2F0KFwi5Y2V6IGK5raI5oGvXCIsXCLvvIzlr7nmlrnkuI3mmK/oh6rlt7HnmoTlpb3lj4vvvIjljZXlkJHlhbPns7vvvInvvIznpoHmraLlj5HpgIHjgIJcIiksMjAwMTI6XCLlj5HpgIHmlrnooqvnpoHoqIDvvIzor6XmnaHmtojmga/ooqvnpoHmraLlj5HpgIHjgIJcIiwyMDAxNjpcIua2iOaBr+aSpOWbnui2hei/h+S6huaXtumXtOmZkOWItu+8iOm7mOiupDLliIbpkp/vvInjgIJcIiwyMDAxODpcIuWIoOmZpOa8q+a4uOWGhemDqOmUmeivr+OAglwiLDkwMDAxOlwiSlNPTiDmoLzlvI/op6PmnpDlpLHotKXvvIzor7fmo4Dmn6Xor7fmsYLljIXmmK/lkKbnrKblkIggSlNPTiDop4TojIPjgIJcIiw5MDAwMjpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK0gTXNnQm9keSDkuI3nrKblkIjmtojmga/moLzlvI/mj4/ov7DvvIzmiJbogIUgTXNnQm9keSDkuI3mmK8gQXJyYXkg57G75Z6L77yM6K+35Y+C6ICDIFRJTU1zZ0VsZW1lbnQg5a+56LGh55qE5a6a5LmJKFwiKS5jb25jYXQoWl8sXCIyNjkvMjcyMFwiKS5jb25jYXQobm0sXCIp44CCXCIpLDkwMDAzOlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4ree8uuWwkSBUb19BY2NvdW50IOWtl+auteaIluiAhSBUb19BY2NvdW50IOW4kOWPt+S4jeWtmOWcqOOAglwiKSw5MDAwNTpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK3nvLrlsJEgTXNnUmFuZG9tIOWtl+auteaIluiAhSBNc2dSYW5kb20g5a2X5q615LiN5pivIEludGVnZXIg57G75Z6L44CCXCIpLDkwMDA2OlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4ree8uuWwkSBNc2dUaW1lU3RhbXAg5a2X5q615oiW6ICFIE1zZ1RpbWVTdGFtcCDlrZfmrrXkuI3mmK8gSW50ZWdlciDnsbvlnovjgIJcIiksOTAwMDc6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5LitIE1zZ0JvZHkg57G75Z6L5LiN5pivIEFycmF5IOexu+Wei++8jOivt+WwhuWFtuS/ruaUueS4uiBBcnJheSDnsbvlnovjgIJcIiksOTAwMDg6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5Lit57y65bCRIEZyb21fQWNjb3VudCDlrZfmrrXmiJbogIUgRnJvbV9BY2NvdW50IOW4kOWPt+S4jeWtmOWcqOOAglwiKSw5MDAwOTpcIuivt+axgumcgOimgSBBcHAg566h55CG5ZGY5p2D6ZmQ44CCXCIsOTAwMTA6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5LiN56ym5ZCI5raI5oGv5qC85byP5o+P6L+w77yM6K+35Y+C6ICDIFRJTU1zZ0VsZW1lbnQg5a+56LGh55qE5a6a5LmJKFwiKS5jb25jYXQoWl8sXCIyNjkvMjcyMFwiKS5jb25jYXQobm0sXCIp44CCXCIpLDkwMDExOlwi5om56YeP5Y+R5raI5oGv55uu5qCH5biQ5Y+36LaF6L+HNTAw77yM6K+35YeP5bCRIFRvX0FjY291bnQg5Lit55uu5qCH5biQ5Y+35pWw6YeP44CCXCIsOTAwMTI6XCJUb19BY2NvdW50IOayoeacieazqOWGjOaIluS4jeWtmOWcqO+8jOivt+ehruiupCBUb19BY2NvdW50IOaYr+WQpuWvvOWFpeWNs+aXtumAmuS/oSBJTSDmiJbogIXmmK/lkKbmi7zlhpnplJnor6/jgIJcIiw5MDAyNjpcIua2iOaBr+emu+e6v+WtmOWCqOaXtumXtOmUmeivr++8iOacgOWkmuS4jeiDvei2hei/hzflpKnvvInjgIJcIiw5MDAzMTpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK0gU3luY090aGVyTWFjaGluZSDlrZfmrrXkuI3mmK8gSW50ZWdlciDnsbvlnovjgIJcIiksOTAwNDQ6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5LitIE1zZ0xpZmVUaW1lIOWtl+auteS4jeaYryBJbnRlZ2VyIOexu+Wei+OAglwiKSw5MDA0ODpcIuivt+axgueahOeUqOaIt+W4kOWPt+S4jeWtmOWcqOOAglwiLDkwMDU0Olwi5pKk5Zue6K+35rGC5Lit55qEIE1zZ0tleSDkuI3lkIjms5XjgIJcIiw5MDk5NDpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiKSw5MDk5NTpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiKSw5MWUzOlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIpLDkwOTkyOlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIsXCLlpoLmnpzmiYDmnInor7fmsYLpg73ov5Tlm57or6XplJnor6/noIHvvIzkuJQgQXBwIOmFjee9ruS6huesrOS4ieaWueWbnuiwg++8jOivt+ajgOafpSBBcHAg5pyN5Yqh56uv5piv5ZCm5q2j5bi45ZCR5Y2z5pe26YCa5L+hIElNIOWQjuWPsOacjeWKoeerr+i/lOWbnuWbnuiwg+e7k+aenOOAglwiKSw5M2UzOlwiSlNPTiDmlbDmja7ljIXotoXplb/vvIzmtojmga/ljIXkvZPor7fkuI3opoHotoXov4c4a+OAglwiLDkxMTAxOlwiV2ViIOerr+mVv+i9ruivouiiq+i4ou+8iFdlYiDnq6/lkIzml7blnKjnur/lrp7kvovkuKrmlbDotoXlh7rpmZDliLbvvInjgIJcIiwxMDAwMjpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiKSwxMDAwMzpcIuivt+axguS4reeahOaOpeWPo+WQjeensOmUmeivr++8jOivt+aguOWvueaOpeWPo+WQjeensOW5tumHjeivleOAglwiLDEwMDA0Olwi5Y+C5pWw6Z2e5rOV77yM6K+35qC55o2u6ZSZ6K+v5o+P6L+w5qOA5p+l6K+35rGC5piv5ZCm5q2j56Gu44CCXCIsMTAwMDU6XCLor7fmsYLljIXkvZPkuK3mkLrluKbnmoTluJDlj7fmlbDph4/ov4flpJrjgIJcIiwxMDAwNjpcIuaTjeS9nOmikeeOh+mZkOWItu+8jOivt+WwneivlemZjeS9juiwg+eUqOeahOmikeeOh+OAglwiLDEwMDA3Olwi5pON5L2c5p2D6ZmQ5LiN6Laz77yM5L6L5aaCIFdvcmsgXCIuY29uY2F0KFwi576k57uEXCIsXCLkuK3mma7pgJrmiJDlkZjlsJ3or5XmiafooYzouKLkurrmk43kvZzvvIzkvYblj6rmnIkgQXBwIOeuoeeQhuWRmOaJjeacieadg+mZkOOAglwiKSwxMDAwODpcIuivt+axgumdnuazle+8jOWPr+iDveaYr+ivt+axguS4reaQuuW4pueahOetvuWQjeS/oeaBr+mqjOivgeS4jeato+ehru+8jOivt+WGjeasoeWwneivleOAglwiLDEwMDA5Olwi6K+l576k5LiN5YWB6K64576k5Li75Li75Yqo6YCA5Ye644CCXCIsMTAwMTA6XCJcIi5jb25jYXQoXCLnvqTnu4RcIixcIuS4jeWtmOWcqO+8jOaIluiAheabvue7j+WtmOWcqOi/h++8jOS9huaYr+ebruWJjeW3sue7j+iiq+ino+aVo+OAglwiKSwxMDAxMTpcIuino+aekCBKU09OIOWMheS9k+Wksei0pe+8jOivt+ajgOafpeWMheS9k+eahOagvOW8j+aYr+WQpuespuWQiCBKU09OIOagvOW8j+OAglwiLDEwMDEyOlwi5Y+R6LW35pON5L2c55qEIFVzZXJJRCDpnZ7ms5XvvIzor7fmo4Dmn6Xlj5Hotbfmk43kvZznmoTnlKjmiLcgVXNlcklEIOaYr+WQpuWhq+WGmeato+ehruOAglwiLDEwMDEzOlwi6KKr6YKA6K+35Yqg5YWl55qE55So5oi35bey57uP5piv576k5oiQ5ZGY44CCXCIsMTAwMTQ6XCLnvqTlt7Lmu6HlkZjvvIzml6Dms5XlsIbor7fmsYLkuK3nmoTnlKjmiLfliqDlhaVcIi5jb25jYXQoXCLnvqTnu4RcIixcIu+8jOWmguaenOaYr+aJuemHj+WKoOS6uu+8jOWPr+S7peWwneivleWHj+WwkeWKoOWFpeeUqOaIt+eahOaVsOmHj+OAglwiKSwxMDAxNTpcIuaJvuS4jeWIsOaMh+WumiBJRCDnmoRcIi5jb25jYXQoXCLnvqTnu4RcIixcIuOAglwiKSwxMDAxNjpcIkFwcCDlkI7lj7DpgJrov4fnrKzkuInmlrnlm57osIPmi5Lnu53mnKzmrKHmk43kvZzjgIJcIiwxMDAxNzpcIuWboOiiq+emgeiogOiAjOS4jeiDveWPkemAgea2iOaBr++8jOivt+ajgOafpeWPkemAgeiAheaYr+WQpuiiq+iuvue9ruemgeiogOOAglwiLDEwMDE4Olwi5bqU562U5YyF6ZW/5bqm6LaF6L+H5pyA5aSn5YyF6ZW/77yIMU1C77yJ77yM6K+35rGC55qE5YaF5a656L+H5aSa77yM6K+35bCd6K+V5YeP5bCR5Y2V5qyh6K+35rGC55qE5pWw5o2u6YeP44CCXCIsMTAwMTk6XCLor7fmsYLnmoTnlKjmiLfluJDlj7fkuI3lrZjlnKjjgIJcIiwxMDAyMTpcIlwiLmNvbmNhdChcIue+pOe7hFwiLFwiIElEIOW3suiiq+S9v+eUqO+8jOivt+mAieaLqeWFtuS7lueahFwiKS5jb25jYXQoXCLnvqTnu4RcIixcIiBJROOAglwiKSwxMDAyMzpcIuWPkea2iOaBr+eahOmikeeOh+i2hemZkO+8jOivt+W7tumVv+S4pOasoeWPkea2iOaBr+aXtumXtOeahOmXtOmalOOAglwiLDEwMDI0Olwi5q2k6YKA6K+35oiW6ICF55Sz6K+36K+35rGC5bey57uP6KKr5aSE55CG44CCXCIsMTAwMjU6XCJcIi5jb25jYXQoXCLnvqTnu4RcIixcIiBJRCDlt7Looqvkvb/nlKjvvIzlubbkuJTmk43kvZzogIXkuLrnvqTkuLvvvIzlj6/ku6Xnm7TmjqXkvb/nlKjjgIJcIiksMTAwMjY6XCLor6UgU0RLQXBwSUQg6K+35rGC55qE5ZG95Luk5a2X5bey6KKr56aB55So44CCXCIsMTAwMzA6XCLor7fmsYLmkqTlm57nmoTmtojmga/kuI3lrZjlnKjjgIJcIiwxMDAzMTpcIua2iOaBr+aSpOWbnui2hei/h+S6huaXtumXtOmZkOWItu+8iOm7mOiupDLliIbpkp/vvInjgIJcIiwxMDAzMjpcIuivt+axguaSpOWbnueahOa2iOaBr+S4jeaUr+aMgeaSpOWbnuaTjeS9nOOAglwiLDEwMDMzOlwiXCIuY29uY2F0KFwi576k57uEXCIsXCLnsbvlnovkuI3mlK/mjIHmtojmga/mkqTlm57mk43kvZzjgIJcIiksMTAwMzQ6XCLor6Xmtojmga/nsbvlnovkuI3mlK/mjIHliKDpmaTmk43kvZzjgIJcIiwxMDAzNTpcIuebtOaSree+pOWSjOWcqOe6v+aIkOWRmOW5v+aSreWkp+e+pOS4jeaUr+aMgeWIoOmZpOa2iOaBr+OAglwiLDEwMDM2Olwi55u05pKt576k5Yib5bu65pWw6YeP6LaF6L+H5LqG6ZmQ5Yi277yM6K+35Y+C6ICD5Lu35qC86K+05piOKFwiLmNvbmNhdChaXyxcIjI2OS8xMTY3MynotK3kubDpooTku5jotLnlpZfppJDigJxJTeebtOaSree+pOKAneOAglwiKSwxMDAzNzpcIuWNleS4queUqOaIt+WPr+WIm+W7uuWSjOWKoOWFpeeahFwiLmNvbmNhdChcIue+pOe7hFwiLFwi5pWw6YeP6LaF6L+H5LqG6ZmQ5Yi277yM6K+35Y+C6ICD5Lu35qC86K+05piOKFwiKS5jb25jYXQoWl8sXCIyNjkvMTE2NzMp6LSt5Lmw5oiW5Y2H57qn6aKE5LuY6LS55aWX6aSQ4oCc5Y2V5Lq65Y+v5Yib5bu65LiO5Yqg5YWlXCIpLmNvbmNhdChcIue+pOe7hFwiLFwi5pWw4oCd44CCXCIpLDEwMDM4Olwi576k5oiQ5ZGY5pWw6YeP6LaF6L+H6ZmQ5Yi277yM6K+35Y+C6ICD5Lu35qC86K+05piOKFwiLmNvbmNhdChaXyxcIjI2OS8xMTY3MynotK3kubDmiJbljYfnuqfpooTku5jotLnlpZfppJDigJzmianlsZXnvqTkurrmlbDkuIrpmZDigJ3jgIJcIiksMTAwNDE6XCLor6XlupTnlKjvvIhTREtBcHBJRO+8ieW3sumFjee9ruS4jeaUr+aMgee+pOa2iOaBr+aSpOWbnuOAglwiLDEwMDUwOlwi576k5bGe5oCnIGtleSDkuI3lrZjlnKhcIiwxMDA1NjpcIuivt+WcqOWGmeWFpee+pOWxnuaAp+WJjeWFiOS9v+eUqCBnZXRHcm91cEF0dHJpYnV0ZXMg5o6l5Y+j5pu05paw5pys5Zyw576k5bGe5oCn77yM6YG/5YWN5Yay56qB44CCXCIsMTAwNTk6XCLpnZ7ml5foiLDniYhcIiwxMDA2MDpcIue+pOS6uuaVsOi2hei/h+W3suivu+WbnuaJp+S6uuaVsOS4iumZkFwiLDEwMDYxOlwi5Zyo57q/5raI5oGv5LiN5pSv5oyB5bey6K+75Zue5omnXCIsMTAwNjI6XCLmib7kuI3liLDnvqTmtojmga/nmoTlt7Lor7vlm57miafkv6Hmga9cIiwzMDAwMTpcIuivt+axguWPguaVsOmUmeivr++8jOivt+agueaNrumUmeivr+aPj+i/sOajgOafpeivt+axguWPguaVsFwiLDMwMDAyOlwiU0RLQXBwSUQg5LiN5Yy56YWNXCIsMzAwMDM6XCLor7fmsYLnmoTnlKjmiLfluJDlj7fkuI3lrZjlnKhcIiwzMDAwNDpcIuivt+axgumcgOimgSBBcHAg566h55CG5ZGY5p2D6ZmQXCIsMzAwMDU6XCLlhbPns7vpk77lrZfmrrXkuK3ljIXlkKvmlY/mhJ/or41cIiwzMDAwNjpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiKSwzMDAwNzpcIlwiLmNvbmNhdChcIue9kee7nOi2heaXtu+8jOivt+eojeWQjumHjeivlS4gXCIpLDMwMDA4Olwi5bm25Y+R5YaZ5a+86Ie05YaZ5Yay56qB77yM5bu66K6u5L2/55So5om56YeP5pa55byPXCIsMzAwMDk6XCLlkI7lj7DnpoHmraLor6XnlKjmiLflj5HotbfliqDlpb3lj4vor7fmsYJcIiwzMDAxMDpcIuiHquW3seeahOWlveWPi+aVsOW3sui+vuezu+e7n+S4iumZkFwiLDMwMDExOlwi5YiG57uE5bey6L6+57O757uf5LiK6ZmQXCIsMzAwMTI6XCLmnKrlhrPmlbDlt7Lovr7ns7vnu5/kuIrpmZBcIiwzMDAxNDpcIuWvueaWueeahOWlveWPi+aVsOW3sui+vuezu+e7n+S4iumZkFwiLDMwNTE1Olwi6K+35rGC5re75Yqg5aW95Y+L5pe277yM5a+55pa55Zyo6Ieq5bex55qE6buR5ZCN5Y2V5Lit77yM5LiN5YWB6K645Yqg5aW95Y+LXCIsMzA1MTY6XCLor7fmsYLmt7vliqDlpb3lj4vml7bvvIzlr7nmlrnnmoTliqDlpb3lj4vpqozor4HmlrnlvI/mmK/kuI3lhYHorrjku7vkvZXkurrmt7vliqDoh6rlt7HkuLrlpb3lj4tcIiwzMDUyNTpcIuivt+axgua3u+WKoOWlveWPi+aXtu+8jOiHquW3seWcqOWvueaWueeahOm7keWQjeWNleS4re+8jOS4jeWFgeiuuOWKoOWlveWPi1wiLDMwNTM5Olwi562J5b6F5a+55pa55ZCM5oSPXCIsMzA1NDA6XCLmt7vliqDlpb3lj4vor7fmsYLooqvlronlhajnrZbnlaXmiZPlh7vvvIzor7fli7/popHnuYHlj5Hotbfmt7vliqDlpb3lj4vor7fmsYJcIiwzMTcwNDpcIuS4juivt+axguWIoOmZpOeahOW4kOWPt+S5i+mXtOS4jeWtmOWcqOWlveWPi+WFs+ezu1wiLDMxNzA3Olwi5Yig6Zmk5aW95Y+L6K+35rGC6KKr5a6J5YWo562W55Wl5omT5Ye777yM6K+35Yu/6aKR57mB5Y+R6LW35Yig6Zmk5aW95Y+L6K+35rGCXCJ9LHJtPWZ1bmN0aW9uKGUpe0RuKG4sZSk7dmFyIHQ9d24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcykpLmNvZGU9ZS5jb2RlLG8ubWVzc2FnZT1vbVtlLmNvZGVdfHxlLm1lc3NhZ2Usby5kYXRhPWUuZGF0YXx8e30sb31yZXR1cm4gbn0oUm4oRXJyb3IpKSxhbT1udWxsLHNtPWZ1bmN0aW9uKGUpe2FtPWV9LGltPWZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLnJlc29sdmUoUV8oZSkpfSx1bT1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdO2lmKGUgaW5zdGFuY2VvZiBybSlyZXR1cm4gdCYmbnVsbCE9PWFtJiZhbS5lbWl0KFduLkVSUk9SLGUpLFByb21pc2UucmVqZWN0KGUpO2lmKGUgaW5zdGFuY2VvZiBFcnJvcil7dmFyIG49bmV3IHJtKHtjb2RlOmxwLlVOQ0FVR0hUX0VSUk9SLG1lc3NhZ2U6ZS5tZXNzYWdlfSk7cmV0dXJuIHQmJm51bGwhPT1hbSYmYW0uZW1pdChXbi5FUlJPUixuKSxQcm9taXNlLnJlamVjdChuKX1pZihodShlKXx8aHUoZS5jb2RlKXx8aHUoZS5tZXNzYWdlKSlRaS5lcnJvcihcIklNUHJvbWlzZS5yZWplY3Qg5b+F6aG75oyH5a6aY29kZSjplJnor6/noIEp5ZKMbWVzc2FnZSjplJnor6/kv6Hmga8pISEhXCIpO2Vsc2V7aWYoY3UoZS5jb2RlKSYmbHUoZS5tZXNzYWdlKSl7dmFyIG89bmV3IHJtKGUpO3JldHVybiB0JiZudWxsIT09YW0mJmFtLmVtaXQoV24uRVJST1IsbyksUHJvbWlzZS5yZWplY3Qobyl9UWkuZXJyb3IoXCJJTVByb21pc2UucmVqZWN0IGNvZGUo6ZSZ6K+v56CBKeW/hemhu+S4uuaVsOWtl++8jG1lc3NhZ2Uo6ZSZ6K+v5L+h5oGvKeW/hemhu+S4uuWtl+espuS4siEhIVwiKX19LGNtPWZ1bmN0aW9uKGUpe0RuKG4sZSk7dmFyIHQ9d24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkMyQ01vZHVsZVwiLG99cmV0dXJuIEVuKG4sW3trZXk6XCJvbk5ld0MyQ01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGFMaXN0LG49ZS5pc0luc3RhbnRNZXNzYWdlLG89ZS5DMkNSZW1haW5pbmdVbnJlYWRMaXN0LHI9ZS5DMkNQYWlyVW5yZWFkTGlzdDtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25OZXdDMkNNZXNzYWdlIGNvdW50OlwiKS5jb25jYXQodC5sZW5ndGgsXCIgaXNJbnN0YW50TWVzc2FnZTpcIikuY29uY2F0KG4pKTt2YXIgYT10aGlzLl9uZXdDMkNNZXNzYWdlU3RvcmVkQW5kU3VtbWFyeSh7ZGF0YUxpc3Q6dCxDMkNSZW1haW5pbmdVbnJlYWRMaXN0Om8sQzJDUGFpclVucmVhZExpc3Q6cixpc0luc3RhbnRNZXNzYWdlOm59KSxzPWEuY29udmVyc2F0aW9uT3B0aW9uc0xpc3QsaT1hLm1lc3NhZ2VMaXN0LHU9YS5pc1VucmVhZEMyQ01lc3NhZ2U7KHRoaXMuZmlsdGVyTW9kaWZpZWRNZXNzYWdlKGkpLHMubGVuZ3RoPjApJiZ0aGlzLmdldE1vZHVsZShsbCkub25OZXdNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpzLGlzSW5zdGFudE1lc3NhZ2U6bixpc1VucmVhZEMyQ01lc3NhZ2U6dX0pO3ZhciBjPXRoaXMuZmlsdGVyVW5tb2RpZmllZE1lc3NhZ2UoaSk7biYmYy5sZW5ndGg+MCYmdGhpcy5lbWl0T3V0ZXJFdmVudChXbi5NRVNTQUdFX1JFQ0VJVkVELGMpLGkubGVuZ3RoPTB9fSx7a2V5OlwiX25ld0MyQ01lc3NhZ2VTdG9yZWRBbmRTdW1tYXJ5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuZGF0YUxpc3Qsbj1lLkMyQ1JlbWFpbmluZ1VucmVhZExpc3Qsbz1lLkMyQ1BhaXJVbnJlYWRMaXN0LHI9ZS5pc0luc3RhbnRNZXNzYWdlLGE9bnVsbCxzPVtdLGk9W10sdT17fSxjPXRoaXMuZ2V0TW9kdWxlKGZsKSxsPXRoaXMuZ2V0TW9kdWxlKFNsKSxkPSExLHA9MCxnPXQubGVuZ3RoO3A8ZztwKyspe3ZhciBoPXRbcF07aC5jdXJyZW50VXNlcj10aGlzLmdldE15VXNlcklEKCksaC5jb252ZXJzYXRpb25UeXBlPVluLkNPTlZfQzJDLGguaXNTeXN0ZW1NZXNzYWdlPSEhaC5pc1N5c3RlbU1lc3NhZ2UsKGh1KGgubmljayl8fGh1KGguYXZhdGFyKSkmJihkPSEwLFFpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fbmV3QzJDTWVzc2FnZVN0b3JlZEFuZFN1bW1hcnkgbmljayBvciBhdmF0YXIgbWlzc2luZyFcIikpKSxhPW5ldyBYXyhoKSxoLmVsZW1lbnRzPWMucGFyc2VFbGVtZW50cyhoLmVsZW1lbnRzLGguZnJvbSksYS5zZXRFbGVtZW50KGguZWxlbWVudHMpLGEuc2V0Tmlja0FuZEF2YXRhcih7bmljazpoLm5pY2ssYXZhdGFyOmguYXZhdGFyfSk7dmFyIGY9YS5jb252ZXJzYXRpb25JRDtpZihyKXt2YXIgXz0hMSxtPXRoaXMuZ2V0TW9kdWxlKGxsKTtpZihhLmZyb20hPT10aGlzLmdldE15VXNlcklEKCkpe3ZhciB2PW0uZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIoZik7aWYodil7dmFyIE09di5uaWNrLHk9di5hdmF0YXI7ZD9hLnNldE5pY2tBbmRBdmF0YXIoe25pY2s6TSxhdmF0YXI6eX0pOk09PT1hLm5pY2smJnk9PT1hLmF2YXRhcnx8KF89ITApfX1lbHNle3ZhciBJPW0uZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKGYpO2lmKEkpe3ZhciBFPUkubmljayxUPUkuYXZhdGFyO0U9PT1hLm5pY2smJlQ9PT1hLmF2YXRhcnx8bS5tb2RpZnlNZXNzYWdlU2VudEJ5TWUoe2NvbnZlcnNhdGlvbklEOmYsbGF0ZXN0TmljazphLm5pY2ssbGF0ZXN0QXZhdGFyOmEuYXZhdGFyfSl9fXZhciBBPTE9PT10W3BdLmlzTW9kaWZpZWQ7aWYobS5pc01lc3NhZ2VTZW50QnlDdXJyZW50SW5zdGFuY2UoYSk/YS5pc01vZGlmaWVkPUE6QT0hMSwwPT09aC5tc2dMaWZlVGltZSlhLl9vbmxpbmVPbmx5RmxhZz0hMCxpLnB1c2goYSk7ZWxzZXtpZighbS5wdXNoSW50b01lc3NhZ2VMaXN0KGksYSxBKSljb250aW51ZTtfJiYobS5tb2RpZnlNZXNzYWdlU2VudEJ5UGVlcih7Y29udmVyc2F0aW9uSUQ6ZixsYXRlc3ROaWNrOmEubmljayxsYXRlc3RBdmF0YXI6YS5hdmF0YXJ9KSxtLnVwZGF0ZVVzZXJQcm9maWxlU3BlY2lmaWVkS2V5KHtjb252ZXJzYXRpb25JRDpmLG5pY2s6YS5uaWNrLGF2YXRhcjphLmF2YXRhcn0pKX1yJiZhLmNsaWVudFRpbWU+MCYmbC5hZGRNZXNzYWdlRGVsYXkoYS5jbGllbnRUaW1lKX1pZigwIT09aC5tc2dMaWZlVGltZSl7aWYoITE9PT1hLl9vbmxpbmVPbmx5RmxhZylpZihodSh1W2ZdKSl7dmFyIFM9MDtcImluXCI9PT1hLmZsb3cmJihhLl9pc0V4Y2x1ZGVkRnJvbVVucmVhZENvdW50fHwoUz0xKSksdVtmXT1zLnB1c2goe2NvbnZlcnNhdGlvbklEOmYsdW5yZWFkQ291bnQ6Uyx0eXBlOmEuY29udmVyc2F0aW9uVHlwZSxzdWJUeXBlOmEuY29udmVyc2F0aW9uU3ViVHlwZSxsYXN0TWVzc2FnZTphLl9pc0V4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlP1wiXCI6YX0pLTF9ZWxzZXt2YXIgRD11W2ZdO3NbRF0udHlwZT1hLmNvbnZlcnNhdGlvblR5cGUsc1tEXS5zdWJUeXBlPWEuY29udmVyc2F0aW9uU3ViVHlwZSxzW0RdLmxhc3RNZXNzYWdlPWEuX2lzRXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2U/XCJcIjphLFwiaW5cIj09PWEuZmxvdyYmKGEuX2lzRXhjbHVkZWRGcm9tVW5yZWFkQ291bnR8fHNbRF0udW5yZWFkQ291bnQrKyl9fWVsc2UgYS5fb25saW5lT25seUZsYWc9ITB9dmFyIE49ITE7aWYoZ3UobykpZm9yKHZhciBDPWZ1bmN0aW9uKGUsdCl7aWYob1tlXS51bnJlYWRDb3VudD4wKXtOPSEwO3ZhciBuPXMuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udmVyc2F0aW9uSUQ9PT1cIkMyQ1wiLmNvbmNhdChvW2VdLmZyb20pfSkpO24/bi51bnJlYWRDb3VudD1vW2VdLnVucmVhZENvdW50OnMucHVzaCh7Y29udmVyc2F0aW9uSUQ6XCJDMkNcIi5jb25jYXQob1tlXS5mcm9tKSx1bnJlYWRDb3VudDpvW2VdLnVucmVhZENvdW50LHR5cGU6WW4uQ09OVl9DMkN9KX19LGs9MCxMPW8ubGVuZ3RoO2s8TDtrKyspQyhrKTtpZihndShuKSlmb3IodmFyIFI9ZnVuY3Rpb24oZSx0KXtzLmZpbmQoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnZlcnNhdGlvbklEPT09XCJDMkNcIi5jb25jYXQobltlXS5mcm9tKX0pKXx8cy5wdXNoKHtjb252ZXJzYXRpb25JRDpcIkMyQ1wiLmNvbmNhdChuW2VdLmZyb20pLHR5cGU6WW4uQ09OVl9DMkMsbGFzdE1zZ1RpbWU6bltlXS5sYXN0TXNnVGltZX0pfSxPPTAsRz1uLmxlbmd0aDtPPEc7TysrKVIoTyk7cmV0dXJue2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0OnMsbWVzc2FnZUxpc3Q6aSxpc1VucmVhZEMyQ01lc3NhZ2U6Tn19fSx7a2V5Olwib25DMkNNZXNzYWdlUmV2b2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7UWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uQzJDTWVzc2FnZVJldm9rZWQgY291bnQ6XCIpLmNvbmNhdChlLmRhdGFMaXN0Lmxlbmd0aCkpO3ZhciBuPXRoaXMuZ2V0TW9kdWxlKGxsKSxvPVtdLHI9bnVsbDtlLmRhdGFMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKGUuYzJjTWVzc2FnZVJldm9rZWROb3RpZnkpe3ZhciBhPWUuYzJjTWVzc2FnZVJldm9rZWROb3RpZnkucmV2b2tlZEluZm9zO2h1KGEpfHxhLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBhPXQuZ2V0TXlVc2VySUQoKT09PWUuZnJvbT9cIlwiLmNvbmNhdChZbi5DT05WX0MyQykuY29uY2F0KGUudG8pOlwiXCIuY29uY2F0KFluLkNPTlZfQzJDKS5jb25jYXQoZS5mcm9tKTsocj1uLnJldm9rZShhLGUuc2VxdWVuY2UsZS5yYW5kb20pKSYmby5wdXNoKHIpfSkpfX0pKSwwIT09by5sZW5ndGgmJihuLm9uTWVzc2FnZVJldm9rZWQobyksdGhpcy5lbWl0T3V0ZXJFdmVudChXbi5NRVNTQUdFX1JFVk9LRUQsbykpfX0se2tleTpcIm9uQzJDTWVzc2FnZVJlYWRSZWNlaXB0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmRhdGFMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKCFYdShlLmMyY01lc3NhZ2VSZWFkUmVjZWlwdCkpe3ZhciBuPWUuYzJjTWVzc2FnZVJlYWRSZWNlaXB0LnRvO2UuYzJjTWVzc2FnZVJlYWRSZWNlaXB0LnVpblBhaXJSZWFkQXJyYXkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5wZWVyUmVhZFRpbWU7UWkuZGVidWcoXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLl9vbkMyQ01lc3NhZ2VSZWFkUmVjZWlwdCB0bzpcIikuY29uY2F0KG4sXCIgcGVlclJlYWRUaW1lOlwiKS5jb25jYXQobykpO3ZhciByPVwiXCIuY29uY2F0KFluLkNPTlZfQzJDKS5jb25jYXQobiksYT10LmdldE1vZHVsZShsbCk7YS5yZWNvcmRQZWVyUmVhZFRpbWUocixvKSxhLnVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkocixvKX0pKX19KSl9fSx7a2V5Olwib25DMkNNZXNzYWdlUmVhZE5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5kYXRhTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtpZighWHUoZS5jMmNNZXNzYWdlUmVhZE5vdGljZSkpe3ZhciBuPXQuZ2V0TW9kdWxlKGxsKTtlLmMyY01lc3NhZ2VSZWFkTm90aWNlLnVpblBhaXJSZWFkQXJyYXkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5mcm9tLHI9ZS5wZWVyUmVhZFRpbWU7UWkuZGVidWcoXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLm9uQzJDTWVzc2FnZVJlYWROb3RpY2UgZnJvbTpcIikuY29uY2F0KG8sXCIgbGFzdFJlYWRUaW1lOlwiKS5jb25jYXQocikpO3ZhciBhPVwiXCIuY29uY2F0KFluLkNPTlZfQzJDKS5jb25jYXQobyk7bi51cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnQoe2NvbnZlcnNhdGlvbklEOmEsbGFzdE1lc3NhZ2VUaW1lOnJ9KSxuLnVwZGF0ZVVucmVhZENvdW50KGEpfSkpfX0pKX19LHtrZXk6XCJzZW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fY3JlYXRlQzJDTWVzc2FnZVBhY2soZSx0KTtyZXR1cm4gdGhpcy5yZXF1ZXN0KG4pfX0se2tleTpcIl9jcmVhdGVDMkNNZXNzYWdlUGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49bnVsbDt0JiYodC5vZmZsaW5lUHVzaEluZm8mJihuPXQub2ZmbGluZVB1c2hJbmZvKSwhMD09PXQub25saW5lVXNlck9ubHkmJihuP24uZGlzYWJsZVB1c2g9ITA6bj17ZGlzYWJsZVB1c2g6ITB9KSk7dmFyIG89XCJcIjtsdShlLmNsb3VkQ3VzdG9tRGF0YSkmJmUuY2xvdWRDdXN0b21EYXRhLmxlbmd0aD4wJiYobz1lLmNsb3VkQ3VzdG9tRGF0YSk7dmFyIHI9W107aWYocHUodCkmJnB1KHQubWVzc2FnZUNvbnRyb2xJbmZvKSl7dmFyIGE9dC5tZXNzYWdlQ29udHJvbEluZm8scz1hLmV4Y2x1ZGVkRnJvbVVucmVhZENvdW50LGk9YS5leGNsdWRlZEZyb21MYXN0TWVzc2FnZTshMD09PXMmJnIucHVzaChcIk5vVW5yZWFkXCIpLCEwPT09aSYmci5wdXNoKFwiTm9MYXN0TXNnXCIpfXJldHVybntwcm90b2NvbE5hbWU6YmwsdGpnSUQ6dGhpcy5nZW5lcmF0ZVRqZ0lEKGUpLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLmdldE15VXNlcklEKCksdG9BY2NvdW50OmUudG8sbXNnQm9keTplLmdldEVsZW1lbnRzKCksY2xvdWRDdXN0b21EYXRhOm8sbXNnU2VxOmUuc2VxdWVuY2UsbXNnUmFuZG9tOmUucmFuZG9tLG1zZ0xpZmVUaW1lOnRoaXMuaXNPbmxpbmVNZXNzYWdlKGUsdCk/MDp2b2lkIDAsbmljazplLm5pY2ssYXZhdGFyOmUuYXZhdGFyLG9mZmxpbmVQdXNoSW5mbzpuP3twdXNoRmxhZzohMD09PW4uZGlzYWJsZVB1c2g/MTowLHRpdGxlOm4udGl0bGV8fFwiXCIsZGVzYzpuLmRlc2NyaXB0aW9ufHxcIlwiLGV4dDpuLmV4dGVuc2lvbnx8XCJcIixhcG5zSW5mbzp7YmFkZ2VNb2RlOiEwPT09bi5pZ25vcmVJT1NCYWRnZT8xOjB9LGFuZHJvaWRJbmZvOntPUFBPQ2hhbm5lbElEOm4uYW5kcm9pZE9QUE9DaGFubmVsSUR8fFwiXCJ9fTp2b2lkIDAsbWVzc2FnZUNvbnRyb2xJbmZvOnIsY2xpZW50VGltZTplLmNsaWVudFRpbWV9fX19LHtrZXk6XCJpc09ubGluZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEoIXR8fCEwIT09dC5vbmxpbmVVc2VyT25seSl9fSx7a2V5OlwicmV2b2tlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp0ZCxyZXF1ZXN0RGF0YTp7bXNnSW5mbzp7ZnJvbUFjY291bnQ6ZS5mcm9tLHRvQWNjb3VudDplLnRvLG1zZ1NlcTplLnNlcXVlbmNlLG1zZ1JhbmRvbTplLnJhbmRvbSxtc2dUaW1lU3RhbXA6ZS50aW1lfX19KX19LHtrZXk6XCJkZWxldGVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50byxuPWUua2V5TGlzdDtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVNZXNzYWdlIHRvQWNjb3VudDpcIikuY29uY2F0KHQsXCIgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmlkLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLmdldE15VXNlcklEKCksdG86dCxrZXlMaXN0Om59fSl9fSx7a2V5Olwic2V0TWVzc2FnZVJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5jb252ZXJzYXRpb25JRCxvPWUubGFzdE1lc3NhZ2VUaW1lLHI9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldE1lc3NhZ2VSZWFkXCIpO1FpLmxvZyhcIlwiLmNvbmNhdChyLFwiIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobixcIiBsYXN0TWVzc2FnZVRpbWU6XCIpLmNvbmNhdChvKSksY3Uobyl8fFFpLndhcm4oXCJcIi5jb25jYXQocixcIiDor7fli7/kv67mlLkgQ29udmVyc2F0aW9uLmxhc3RNZXNzYWdlLmxhc3RUaW1l77yM5ZCm5YiZ5Y+v6IO95Lya5a+86Ie05bey6K+75LiK5oql57uT5p6c5LiN5YeG56GuXCIpKTt2YXIgYT1uZXcgRHAoUXApO3JldHVybiBhLnNldE1lc3NhZ2UoXCJjb252ZXJzYXRpb25JRDpcIi5jb25jYXQobixcIiBsYXN0TWVzc2FnZVRpbWU6XCIpLmNvbmNhdChvKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6bmQscmVxdWVzdERhdGE6e0MyQ01zZ1JlYWRlZDp7Y29va2llOlwiXCIsQzJDTXNnUmVhZGVkSXRlbTpbe3RvQWNjb3VudDpuLnJlcGxhY2UoXCJDMkNcIixcIlwiKSxsYXN0TWVzc2FnZVRpbWU6byxyZWNlaXB0OjF9XX19fSkudGhlbigoZnVuY3Rpb24oKXthLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KHIsXCIgb2tcIikpO3ZhciBlPXQuZ2V0TW9kdWxlKGxsKTtyZXR1cm4gZS51cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnQoe2NvbnZlcnNhdGlvbklEOm4sbGFzdE1lc3NhZ2VUaW1lOm99KSxlLnVwZGF0ZVVucmVhZENvdW50KG4pLFFfKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5sb2coXCJcIi5jb25jYXQocixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJnZXRSb2FtaW5nTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0Um9hbWluZ01lc3NhZ2VcIiksbz1lLnBlZXJBY2NvdW50LHI9ZS5jb252ZXJzYXRpb25JRCxhPWUuY291bnQscz1lLmxhc3RNZXNzYWdlVGltZSxpPWUubWVzc2FnZUtleSx1PVwicGVlckFjY291bnQ6XCIuY29uY2F0KG8sXCIgY291bnQ6XCIpLmNvbmNhdChhfHwxNSxcIiBsYXN0TWVzc2FnZVRpbWU6XCIpLmNvbmNhdChzfHwwLFwiIG1lc3NhZ2VLZXk6XCIpLmNvbmNhdChpKTtRaS5sb2coXCJcIi5jb25jYXQobixcIiBcIikuY29uY2F0KHUpKTt2YXIgYz1uZXcgRHAoanApO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTphZCxyZXF1ZXN0RGF0YTp7cGVlckFjY291bnQ6byxjb3VudDphfHwxNSxsYXN0TWVzc2FnZVRpbWU6c3x8MCxtZXNzYWdlS2V5Oml9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89ZS5kYXRhLGE9by5jb21wbGV0ZSxzPW8ubWVzc2FnZUxpc3QsaT1vLm1lc3NhZ2VLZXksbD1vLmxhc3RNZXNzYWdlVGltZTtodShzKT9RaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gY29tcGxldGU6XCIpLmNvbmNhdChhLFwiIGJ1dCBtZXNzYWdlTGlzdCBpcyB1bmRlZmluZWQhXCIpKTpRaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gY29tcGxldGU6XCIpLmNvbmNhdChhLFwiIGNvdW50OlwiKS5jb25jYXQocy5sZW5ndGgpKSxjLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiLmNvbmNhdCh1LFwiIGNvbXBsZXRlOlwiKS5jb25jYXQoYSxcIiBsZW5ndGg6XCIpLmNvbmNhdChzLmxlbmd0aCkpLmVuZCgpO3ZhciBkPXQuZ2V0TW9kdWxlKGxsKTsxPT09YSYmZC5zZXRDb21wbGV0ZWQocik7dmFyIHA9ZC5zdG9yZVJvYW1pbmdNZXNzYWdlKHMscik7ZC5tb2RpZnlNZXNzYWdlTGlzdChyKSxkLnVwZGF0ZUlzUmVhZChyKSxkLnVwZGF0ZVJvYW1pbmdNZXNzYWdlS2V5QW5kVGltZShyLGksbCk7dmFyIGc9ZC5nZXRQZWVyUmVhZFRpbWUocik7aWYoUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgdXBkYXRlIGlzUGVlclJlYWQgcHJvcGVydHkuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQocixcIiBwZWVyUmVhZFRpbWU6XCIpLmNvbmNhdChnKSksZylkLnVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkocixnKTtlbHNle3ZhciBoPXIucmVwbGFjZShZbi5DT05WX0MyQyxcIlwiKTt0LmdldFJlbW90ZVBlZXJSZWFkVGltZShbaF0pLnRoZW4oKGZ1bmN0aW9uKCl7ZC51cGRhdGVNZXNzYWdlSXNQZWVyUmVhZFByb3BlcnR5KHIsZC5nZXRQZWVyUmVhZFRpbWUocikpfSkpfXJldHVybiBwfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07Yy5zZXRNZXNzYWdlKHUpLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiZ2V0UmVtb3RlUGVlclJlYWRUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRSZW1vdGVQZWVyUmVhZFRpbWVcIik7aWYoWHUoZSkpcmV0dXJuIFFpLndhcm4oXCJcIi5jb25jYXQobixcIiB1c2VySURMaXN0IGlzIGVtcHR5IVwiKSksUHJvbWlzZS5yZXNvbHZlKCk7dmFyIG89bmV3IERwKHRnKTtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgdXNlcklETGlzdDpcIikuY29uY2F0KGUpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpzZCxyZXF1ZXN0RGF0YTp7dXNlcklETGlzdDplfX0pLnRoZW4oKGZ1bmN0aW9uKHIpe3ZhciBhPXIuZGF0YS5wZWVyUmVhZFRpbWVMaXN0O1FpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBwZWVyUmVhZFRpbWVMaXN0OlwiKS5jb25jYXQoYSkpO2Zvcih2YXIgcz1cIlwiLGk9dC5nZXRNb2R1bGUobGwpLHU9MDt1PGUubGVuZ3RoO3UrKylzKz1cIlwiLmNvbmNhdChlW3VdLFwiLVwiKS5jb25jYXQoYVt1XSxcIiBcIiksYVt1XT4wJiZpLnJlY29yZFBlZXJSZWFkVGltZShcIkMyQ1wiLmNvbmNhdChlW3VdKSxhW3VdKTtvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShzKS5lbmQoKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpfSkpfX1dKSxufShObCksbG09SGUuZmluZEluZGV4LGRtPSEwLHBtPXplKFwiZmluZEluZGV4XCIpO1wiZmluZEluZGV4XCJpbltdJiZBcnJheSgxKS5maW5kSW5kZXgoKGZ1bmN0aW9uKCl7ZG09ITF9KSksa2Uoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOmRtfHwhcG19LHtmaW5kSW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGxtKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSksSW8oXCJmaW5kSW5kZXhcIik7dmFyIGdtPVtdLGhtPWdtLnNvcnQsZm09cigoZnVuY3Rpb24oKXtnbS5zb3J0KHZvaWQgMCl9KSksX209cigoZnVuY3Rpb24oKXtnbS5zb3J0KG51bGwpfSkpLG1tPWplKFwic29ydFwiKTtrZSh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6Zm18fCFfbXx8IW1tfSx7c29ydDpmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT9obS5jYWxsKE9lKHRoaXMpKTpobS5jYWxsKE9lKHRoaXMpLExlKGUpKX19KTt2YXIgdm09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5saXN0PW5ldyBNYXAsdGhpcy5fY2xhc3NOYW1lPVwiTWVzc2FnZUxpc3RIYW5kbGVyXCIsdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJNYXA9bmV3IE1hcCx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXA9bmV3IE1hcCx0aGlzLl9ncm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZU1hcD1uZXcgTWFwfXJldHVybiBFbihlLFt7a2V5OlwiZ2V0TG9jYWxPbGRlc3RNZXNzYWdlQnlDb252ZXJzYXRpb25JRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiBudWxsO2lmKCF0aGlzLmxpc3QuaGFzKGUpKXJldHVybiBudWxsO3ZhciB0PXRoaXMubGlzdC5nZXQoZSkudmFsdWVzKCk7cmV0dXJuIHQ/dC5uZXh0KCkudmFsdWU6bnVsbH19LHtrZXk6XCJwdXNoSW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLG49ZS5jb252ZXJzYXRpb25JRCxvPWUuSUQscj0hMDt0aGlzLmxpc3QuaGFzKG4pfHx0aGlzLmxpc3Quc2V0KG4sbmV3IE1hcCk7dmFyIGE9dGhpcy5saXN0LmdldChuKS5oYXMobyk7aWYoYSl7dmFyIHM9dGhpcy5saXN0LmdldChuKS5nZXQobyk7aWYoIXR8fCEwPT09cy5pc01vZGlmaWVkKXJldHVybiByPSExfXJldHVybiB0aGlzLmxpc3QuZ2V0KG4pLnNldChvLGUpLHRoaXMuX3NldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyKG4sZSksdGhpcy5fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKG4sZSksdGhpcy5fc2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2UobixlKSxyfX0se2tleTpcInVuc2hpZnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdDtpZihndShlKSl7aWYoZS5sZW5ndGg+MCl7dD1lWzBdLmNvbnZlcnNhdGlvbklEO3ZhciBuPWUubGVuZ3RoO3RoaXMuX3Vuc2hpZnRNdWx0aXBsZU1lc3NhZ2VzKGUpLHRoaXMuX3NldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlKHQsZVtuLTFdKX19ZWxzZSB0PWUuY29udmVyc2F0aW9uSUQsdGhpcy5fdW5zaGlmdFNpbmdsZU1lc3NhZ2UoZSksdGhpcy5fc2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2UodCxlKTtpZih0JiZ0LnN0YXJ0c1dpdGgoWW4uQ09OVl9DMkMpKXt2YXIgbz1BcnJheS5mcm9tKHRoaXMubGlzdC5nZXQodCkudmFsdWVzKCkpLHI9by5sZW5ndGg7aWYoMD09PXIpcmV0dXJuO2Zvcih2YXIgYT1yLTE7YT49MDthLS0paWYoXCJvdXRcIj09PW9bYV0uZmxvdyl7dGhpcy5fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKHQsb1thXSk7YnJlYWt9Zm9yKHZhciBzPXItMTtzPj0wO3MtLSlpZihcImluXCI9PT1vW3NdLmZsb3cpe3RoaXMuX3NldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyKHQsb1tzXSk7YnJlYWt9fX19LHtrZXk6XCJfdW5zaGlmdFNpbmdsZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5JRDtpZighdGhpcy5saXN0Lmhhcyh0KSlyZXR1cm4gdGhpcy5saXN0LnNldCh0LG5ldyBNYXApLHZvaWQgdGhpcy5saXN0LmdldCh0KS5zZXQobixlKTt2YXIgbz1BcnJheS5mcm9tKHRoaXMubGlzdC5nZXQodCkpO28udW5zaGlmdChbbixlXSksdGhpcy5saXN0LnNldCh0LG5ldyBNYXAobykpfX0se2tleTpcIl91bnNoaWZ0TXVsdGlwbGVNZXNzYWdlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxuPVtdLG89ZVswXS5jb252ZXJzYXRpb25JRCxyPXRoaXMubGlzdC5oYXMobyk/QXJyYXkuZnJvbSh0aGlzLmxpc3QuZ2V0KG8pKTpbXSxhPTA7YTx0O2ErKyluLnB1c2goW2VbYV0uSUQsZVthXV0pO3RoaXMubGlzdC5zZXQobyxuZXcgTWFwKG4uY29uY2F0KHIpKSl9fSx7a2V5OlwicmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUuSUQ7dGhpcy5saXN0Lmhhcyh0KSYmdGhpcy5saXN0LmdldCh0KS5kZWxldGUobil9fSx7a2V5OlwicmV2b2tlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe2lmKFFpLmRlYnVnKFwicmV2b2tlIG1lc3NhZ2VcIixlLHQsbiksdGhpcy5saXN0LmhhcyhlKSl7dmFyIG8scj1Cbih0aGlzLmxpc3QuZ2V0KGUpKTt0cnl7Zm9yKHIucygpOyEobz1yLm4oKSkuZG9uZTspe3ZhciBhPVBuKG8udmFsdWUsMilbMV07aWYoYS5zZXF1ZW5jZT09PXQmJiFhLmlzUmV2b2tlZCYmKGh1KG4pfHxhLnJhbmRvbT09PW4pKXJldHVybiBhLmlzUmV2b2tlZD0hMCxhfX1jYXRjaChzKXtyLmUocyl9ZmluYWxseXtyLmYoKX19cmV0dXJuIG51bGx9fSx7a2V5OlwicmVtb3ZlQnlDb252ZXJzYXRpb25JRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMubGlzdC5oYXMoZSkmJih0aGlzLmxpc3QuZGVsZXRlKGUpLHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlQZWVyTWFwLmRlbGV0ZShlKSx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXAuZGVsZXRlKGUpKX19LHtrZXk6XCJmaW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LG49bnVsbCxvPUJuKHRoaXMubGlzdCk7dHJ5e2ZvcihvLnMoKTshKHQ9by5uKCkpLmRvbmU7KXt2YXIgcj1Qbih0LnZhbHVlLDIpWzFdO3IuaGFzKGUpJiYobj1yLmdldChlKSl9fWNhdGNoKGEpe28uZShhKX1maW5hbGx5e28uZigpfXJldHVybiBufX0se2tleTpcInVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHlcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPVtdO2lmKHRoaXMubGlzdC5oYXMoZSkpe3ZhciBvLHI9Qm4odGhpcy5saXN0LmdldChlKSk7dHJ5e2ZvcihyLnMoKTshKG89ci5uKCkpLmRvbmU7KXt2YXIgYT1QbihvLnZhbHVlLDIpWzFdO2EudGltZTw9dCYmIWEuaXNQZWVyUmVhZCYmXCJvdXRcIj09PWEuZmxvdyYmKGEuaXNQZWVyUmVhZD0hMCxuLnB1c2goYSkpfX1jYXRjaChzKXtyLmUocyl9ZmluYWxseXtyLmYoKX1RaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIHBlZXJSZWFkVGltZTpcIikuY29uY2F0KHQsXCIgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCkpfXJldHVybiBufX0se2tleTpcInVwZGF0ZU1lc3NhZ2VJc01vZGlmaWVkUHJvcGVydHlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5JRDtpZih0aGlzLmxpc3QuaGFzKHQpKXt2YXIgbz10aGlzLmxpc3QuZ2V0KHQpLmdldChuKTtvJiYoby5pc01vZGlmaWVkPSEwKX19fSx7a2V5OlwiaGFzTG9jYWxNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxpc3QuaGFzKGUpfX0se2tleTpcImdldExvY2FsTWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXNMb2NhbE1lc3NhZ2VMaXN0KGUpP1VuKHRoaXMubGlzdC5nZXQoZSkudmFsdWVzKCkpOltdfX0se2tleTpcImhhc0xvY2FsTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISF0aGlzLmhhc0xvY2FsTWVzc2FnZUxpc3QoZSkmJnRoaXMubGlzdC5nZXQoZSkuaGFzKHQpfX0se2tleTpcImdldExvY2FsTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuaGFzTG9jYWxNZXNzYWdlKGUsdCk/dGhpcy5saXN0LmdldChlKS5nZXQodCk6bnVsbH19LHtrZXk6XCJnZXRMb2NhbExhc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpO3JldHVybiB0W3QubGVuZ3RoLTFdfX0se2tleTpcIl9zZXRMYXRlc3RNZXNzYWdlU2VudEJ5UGVlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZS5zdGFydHNXaXRoKFluLkNPTlZfQzJDKSYmXCJpblwiPT09dC5mbG93JiZ0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5UGVlck1hcC5zZXQoZSx0KX19LHtrZXk6XCJfc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLnN0YXJ0c1dpdGgoWW4uQ09OVl9DMkMpJiZcIm91dFwiPT09dC5mbG93JiZ0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXAuc2V0KGUsdCl9fSx7a2V5OlwiX3NldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLnN0YXJ0c1dpdGgoWW4uQ09OVl9HUk9VUCkmJnRoaXMuX2dyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLnNldChlLHQuc2VxdWVuY2UpfX0se2tleTpcImdldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlQZWVyTWFwLmdldChlKX19LHtrZXk6XCJnZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeU1lTWFwLmdldChlKX19LHtrZXk6XCJnZXRHcm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ncm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZU1hcC5nZXQoZSl8fDB9fSx7a2V5OlwibW9kaWZ5TWVzc2FnZVNlbnRCeVBlZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5sYXRlc3ROaWNrLG89ZS5sYXRlc3RBdmF0YXIscj10aGlzLmxpc3QuZ2V0KHQpO2lmKCFYdShyKSl7dmFyIGE9QXJyYXkuZnJvbShyLnZhbHVlcygpKSxzPWEubGVuZ3RoO2lmKDAhPT1zKXtmb3IodmFyIGk9bnVsbCx1PTAsYz0hMSxsPXMtMTtsPj0wO2wtLSlcImluXCI9PT1hW2xdLmZsb3cmJigoaT1hW2xdKS5uaWNrIT09biYmKGkuc2V0Tmlja0FuZEF2YXRhcih7bmljazpufSksYz0hMCksaS5hdmF0YXIhPT1vJiYoaS5zZXROaWNrQW5kQXZhdGFyKHthdmF0YXI6b30pLGM9ITApLGMmJih1Kz0xKSk7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5tb2RpZnlNZXNzYWdlU2VudEJ5UGVlciBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KHQsXCIgY291bnQ6XCIpLmNvbmNhdCh1KSl9fX19LHtrZXk6XCJtb2RpZnlNZXNzYWdlU2VudEJ5TWVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5sYXRlc3ROaWNrLG89ZS5sYXRlc3RBdmF0YXIscj10aGlzLmxpc3QuZ2V0KHQpO2lmKCFYdShyKSl7dmFyIGE9QXJyYXkuZnJvbShyLnZhbHVlcygpKSxzPWEubGVuZ3RoO2lmKDAhPT1zKXtmb3IodmFyIGk9bnVsbCx1PTAsYz0hMSxsPXMtMTtsPj0wO2wtLSlcIm91dFwiPT09YVtsXS5mbG93JiYoKGk9YVtsXSkubmljayE9PW4mJihpLnNldE5pY2tBbmRBdmF0YXIoe25pY2s6bn0pLGM9ITApLGkuYXZhdGFyIT09byYmKGkuc2V0Tmlja0FuZEF2YXRhcih7YXZhdGFyOm99KSxjPSEwKSxjJiYodSs9MSkpO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIubW9kaWZ5TWVzc2FnZVNlbnRCeU1lIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQodCxcIiBjb3VudDpcIikuY29uY2F0KHUpKX19fX0se2tleTpcInRyYXZlcnNhbFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoMCE9PXRoaXMubGlzdC5zaXplJiYtMT09PVFpLmdldExldmVsKCkpe2NvbnNvbGUuZ3JvdXAoXCJjb252ZXJzYXRpb25JRC1tZXNzYWdlQ291bnRcIik7dmFyIGUsdD1Cbih0aGlzLmxpc3QpO3RyeXtmb3IodC5zKCk7IShlPXQubigpKS5kb25lOyl7dmFyIG49UG4oZS52YWx1ZSwyKSxvPW5bMF0scj1uWzFdO2NvbnNvbGUubG9nKFwiXCIuY29uY2F0KG8sXCItXCIpLmNvbmNhdChyLnNpemUpKX19Y2F0Y2goYSl7dC5lKGEpfWZpbmFsbHl7dC5mKCl9Y29uc29sZS5ncm91cEVuZCgpfX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5saXN0LmNsZWFyKCksdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJNYXAuY2xlYXIoKSx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXAuY2xlYXIoKSx0aGlzLl9ncm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZU1hcC5jbGVhcigpfX1dKSxlfSgpLE1tPVwiX2EyS2V5QW5kVGlueUlEVXBkYXRlZFwiLHltPVwiX2Nsb3VkQ29uZmlnVXBkYXRlZFwiLEltPVwiX3Byb2ZpbGVVcGRhdGVkXCI7ZnVuY3Rpb24gRW0oZSl7dGhpcy5taXhpbihlKX1FbS5taXhpbj1mdW5jdGlvbihlKXt2YXIgdD1lLnByb3RvdHlwZXx8ZTt0Ll9pc1JlYWR5PSExLHQucmVhZHk9ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXTtpZihlKXJldHVybiB0aGlzLl9pc1JlYWR5P3ZvaWQodD9lLmNhbGwodGhpcyk6c2V0VGltZW91dChlLDEpKToodGhpcy5fcmVhZHlRdWV1ZT10aGlzLl9yZWFkeVF1ZXVlfHxbXSx2b2lkIHRoaXMuX3JlYWR5UXVldWUucHVzaChlKSl9LHQudHJpZ2dlclJlYWR5PWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9pc1JlYWR5PSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dmFyIHQ9ZS5fcmVhZHlRdWV1ZTtlLl9yZWFkeVF1ZXVlPVtdLHQmJnQubGVuZ3RoPjAmJnQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5jYWxsKHRoaXMpfSksZSl9KSwxKX0sdC5yZXNldFJlYWR5PWZ1bmN0aW9uKCl7dGhpcy5faXNSZWFkeT0hMSx0aGlzLl9yZWFkeVF1ZXVlPVtdfSx0LmlzUmVhZHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNSZWFkeX19O3ZhciBUbT1bXCJqcGdcIixcImpwZWdcIixcImdpZlwiLFwicG5nXCIsXCJibXBcIixcImltYWdlXCIsXCJ3ZWJwXCJdLEFtPVtcIm1wNFwiXSxTbT0xLERtPTIsTm09MyxDbT0yNTUsa209ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3ZhciBuPXRoaXM7eW4odGhpcyxlKSxYdSh0KXx8KHRoaXMudXNlcklEPXQudXNlcklEfHxcIlwiLHRoaXMubmljaz10Lm5pY2t8fFwiXCIsdGhpcy5nZW5kZXI9dC5nZW5kZXJ8fFwiXCIsdGhpcy5iaXJ0aGRheT10LmJpcnRoZGF5fHwwLHRoaXMubG9jYXRpb249dC5sb2NhdGlvbnx8XCJcIix0aGlzLnNlbGZTaWduYXR1cmU9dC5zZWxmU2lnbmF0dXJlfHxcIlwiLHRoaXMuYWxsb3dUeXBlPXQuYWxsb3dUeXBlfHxZbi5BTExPV19UWVBFX0FMTE9XX0FOWSx0aGlzLmxhbmd1YWdlPXQubGFuZ3VhZ2V8fDAsdGhpcy5hdmF0YXI9dC5hdmF0YXJ8fFwiXCIsdGhpcy5tZXNzYWdlU2V0dGluZ3M9dC5tZXNzYWdlU2V0dGluZ3N8fDAsdGhpcy5hZG1pbkZvcmJpZFR5cGU9dC5hZG1pbkZvcmJpZFR5cGV8fFluLkZPUkJJRF9UWVBFX05PTkUsdGhpcy5sZXZlbD10LmxldmVsfHwwLHRoaXMucm9sZT10LnJvbGV8fDAsdGhpcy5sYXN0VXBkYXRlZFRpbWU9MCx0aGlzLnByb2ZpbGVDdXN0b21GaWVsZD1bXSxYdSh0LnByb2ZpbGVDdXN0b21GaWVsZCl8fHQucHJvZmlsZUN1c3RvbUZpZWxkLmZvckVhY2goKGZ1bmN0aW9uKGUpe24ucHJvZmlsZUN1c3RvbUZpZWxkLnB1c2goe2tleTplLmtleSx2YWx1ZTplLnZhbHVlfSl9KSkpfXJldHVybiBFbihlLFt7a2V5OlwidmFsaWRhdGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD0hMCxuPVwiXCI7aWYoWHUoZSkpcmV0dXJue3ZhbGlkOiExLHRpcHM6XCJlbXB0eSBvcHRpb25zXCJ9O2lmKGUucHJvZmlsZUN1c3RvbUZpZWxkKWZvcih2YXIgbz1lLnByb2ZpbGVDdXN0b21GaWVsZC5sZW5ndGgscj1udWxsLGE9MDthPG87YSsrKXtpZihyPWUucHJvZmlsZUN1c3RvbUZpZWxkW2FdLCFsdShyLmtleSl8fC0xPT09ci5rZXkuaW5kZXhPZihcIlRhZ19Qcm9maWxlX0N1c3RvbVwiKSlyZXR1cm57dmFsaWQ6ITEsdGlwczpcIuiHquWumuS5iei1hOaWmeWtl+auteeahOWJjee8gOW/hemhu+aYryBUYWdfUHJvZmlsZV9DdXN0b21cIn07aWYoIWx1KHIudmFsdWUpKXJldHVybnt2YWxpZDohMSx0aXBzOlwi6Ieq5a6a5LmJ6LWE5paZ5a2X5q6155qEIHZhbHVlIOW/hemhu+aYr+Wtl+espuS4slwifX1mb3IodmFyIHMgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSl7aWYoXCJwcm9maWxlQ3VzdG9tRmllbGRcIj09PXMpY29udGludWU7aWYoWHUoZVtzXSkmJiFsdShlW3NdKSYmIWN1KGVbc10pKXtuPVwia2V5OlwiK3MrXCIsIGludmFsaWQgdmFsdWU6XCIrZVtzXSx0PSExO2NvbnRpbnVlfXN3aXRjaChzKXtjYXNlXCJuaWNrXCI6bHUoZVtzXSl8fChuPVwibmljayBzaG91bGQgYmUgYSBzdHJpbmdcIix0PSExKSxBdShlW3NdKT41MDAmJihuPVwibmljayBuYW1lIGxpbWl0ZWQ6IG11c3QgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIFwiLmNvbmNhdCg1MDAsXCIgYnl0ZXMsIGN1cnJlbnQgc2l6ZTogXCIpLmNvbmNhdChBdShlW3NdKSxcIiBieXRlc1wiKSx0PSExKTticmVhaztjYXNlXCJnZW5kZXJcIjpDdShudSxlLmdlbmRlcil8fChuPVwia2V5OmdlbmRlciwgaW52YWxpZCB2YWx1ZTpcIitlLmdlbmRlcix0PSExKTticmVhaztjYXNlXCJiaXJ0aGRheVwiOmN1KGUuYmlydGhkYXkpfHwobj1cImJpcnRoZGF5IHNob3VsZCBiZSBhIG51bWJlclwiLHQ9ITEpO2JyZWFrO2Nhc2VcImxvY2F0aW9uXCI6bHUoZS5sb2NhdGlvbil8fChuPVwibG9jYXRpb24gc2hvdWxkIGJlIGEgc3RyaW5nXCIsdD0hMSk7YnJlYWs7Y2FzZVwic2VsZlNpZ25hdHVyZVwiOmx1KGUuc2VsZlNpZ25hdHVyZSl8fChuPVwic2VsZlNpZ25hdHVyZSBzaG91bGQgYmUgYSBzdHJpbmdcIix0PSExKTticmVhaztjYXNlXCJhbGxvd1R5cGVcIjpDdShydSxlLmFsbG93VHlwZSl8fChuPVwia2V5OmFsbG93VHlwZSwgaW52YWxpZCB2YWx1ZTpcIitlLmFsbG93VHlwZSx0PSExKTticmVhaztjYXNlXCJsYW5ndWFnZVwiOmN1KGUubGFuZ3VhZ2UpfHwobj1cImxhbmd1YWdlIHNob3VsZCBiZSBhIG51bWJlclwiLHQ9ITEpO2JyZWFrO2Nhc2VcImF2YXRhclwiOmx1KGUuYXZhdGFyKXx8KG49XCJhdmF0YXIgc2hvdWxkIGJlIGEgc3RyaW5nXCIsdD0hMSk7YnJlYWs7Y2FzZVwibWVzc2FnZVNldHRpbmdzXCI6MCE9PWUubWVzc2FnZVNldHRpbmdzJiYxIT09ZS5tZXNzYWdlU2V0dGluZ3MmJihuPVwibWVzc2FnZVNldHRpbmdzIHNob3VsZCBiZSAwIG9yIDFcIix0PSExKTticmVhaztjYXNlXCJhZG1pbkZvcmJpZFR5cGVcIjpDdShvdSxlLmFkbWluRm9yYmlkVHlwZSl8fChuPVwia2V5OmFkbWluRm9yYmlkVHlwZSwgaW52YWxpZCB2YWx1ZTpcIitlLmFkbWluRm9yYmlkVHlwZSx0PSExKTticmVhaztjYXNlXCJsZXZlbFwiOmN1KGUubGV2ZWwpfHwobj1cImxldmVsIHNob3VsZCBiZSBhIG51bWJlclwiLHQ9ITEpO2JyZWFrO2Nhc2VcInJvbGVcIjpjdShlLnJvbGUpfHwobj1cInJvbGUgc2hvdWxkIGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7ZGVmYXVsdDpuPVwidW5rbm93biBrZXk6XCIrcytcIiAgXCIrZVtzXSx0PSExfX1yZXR1cm57dmFsaWQ6dCx0aXBzOm59fX1dKSxlfSgpLExtPWZ1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLnZhbHVlPXQsdGhpcy5uZXh0PW51bGx9LFJtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuTUFYX0xFTkdUSD10LHRoaXMucFRhaWw9bnVsbCx0aGlzLnBOb2RlVG9EZWw9bnVsbCx0aGlzLm1hcD1uZXcgTWFwLFFpLmRlYnVnKFwiU2luZ2x5TGlua2VkTGlzdCBpbml0IE1BWF9MRU5HVEg6XCIuY29uY2F0KHRoaXMuTUFYX0xFTkdUSCkpfXJldHVybiBFbihlLFt7a2V5Olwic2V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IExtKGUpO2lmKHRoaXMubWFwLnNpemU8dGhpcy5NQVhfTEVOR1RIKW51bGw9PT10aGlzLnBUYWlsPyh0aGlzLnBUYWlsPXQsdGhpcy5wTm9kZVRvRGVsPXQpOih0aGlzLnBUYWlsLm5leHQ9dCx0aGlzLnBUYWlsPXQpLHRoaXMubWFwLnNldChlLDEpO2Vsc2V7dmFyIG49dGhpcy5wTm9kZVRvRGVsO3RoaXMucE5vZGVUb0RlbD10aGlzLnBOb2RlVG9EZWwubmV4dCx0aGlzLm1hcC5kZWxldGUobi52YWx1ZSksbi5uZXh0PW51bGwsbj1udWxsLHRoaXMucFRhaWwubmV4dD10LHRoaXMucFRhaWw9dCx0aGlzLm1hcC5zZXQoZSwxKX19fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubWFwLmhhcyhlKX19LHtrZXk6XCJkZWxldGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmhhcyhlKSYmdGhpcy5tYXAuZGVsZXRlKGUpfX0se2tleTpcInRhaWxcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBUYWlsfX0se2tleTpcInNpemVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcC5zaXplfX0se2tleTpcImRhdGFcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBBcnJheS5mcm9tKHRoaXMubWFwLmtleXMoKSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgZTtudWxsIT09dGhpcy5wTm9kZVRvRGVsOyllPXRoaXMucE5vZGVUb0RlbCx0aGlzLnBOb2RlVG9EZWw9dGhpcy5wTm9kZVRvRGVsLm5leHQsZS5uZXh0PW51bGwsZT1udWxsO3RoaXMucFRhaWw9bnVsbCx0aGlzLm1hcC5jbGVhcigpfX1dKSxlfSgpLE9tPVtcImdyb3VwSURcIixcIm5hbWVcIixcImF2YXRhclwiLFwidHlwZVwiLFwiaW50cm9kdWN0aW9uXCIsXCJub3RpZmljYXRpb25cIixcIm93bmVySURcIixcInNlbGZJbmZvXCIsXCJjcmVhdGVUaW1lXCIsXCJpbmZvU2VxdWVuY2VcIixcImxhc3RJbmZvVGltZVwiLFwibGFzdE1lc3NhZ2VcIixcIm5leHRNZXNzYWdlU2VxXCIsXCJtZW1iZXJOdW1cIixcIm1heE1lbWJlck51bVwiLFwibWVtYmVyTGlzdFwiLFwiam9pbk9wdGlvblwiLFwiZ3JvdXBDdXN0b21GaWVsZFwiLFwibXV0ZUFsbE1lbWJlcnNcIl0sR209ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5ncm91cElEPVwiXCIsdGhpcy5uYW1lPVwiXCIsdGhpcy5hdmF0YXI9XCJcIix0aGlzLnR5cGU9XCJcIix0aGlzLmludHJvZHVjdGlvbj1cIlwiLHRoaXMubm90aWZpY2F0aW9uPVwiXCIsdGhpcy5vd25lcklEPVwiXCIsdGhpcy5jcmVhdGVUaW1lPVwiXCIsdGhpcy5pbmZvU2VxdWVuY2U9XCJcIix0aGlzLmxhc3RJbmZvVGltZT1cIlwiLHRoaXMuc2VsZkluZm89e21lc3NhZ2VSZW1pbmRUeXBlOlwiXCIsam9pblRpbWU6XCJcIixuYW1lQ2FyZDpcIlwiLHJvbGU6XCJcIix1c2VySUQ6XCJcIixtZW1iZXJDdXN0b21GaWVsZDp2b2lkIDAscmVhZGVkU2VxdWVuY2U6MCxleGNsdWRlZFVucmVhZFNlcXVlbmNlTGlzdDp2b2lkIDB9LHRoaXMubGFzdE1lc3NhZ2U9e2xhc3RUaW1lOlwiXCIsbGFzdFNlcXVlbmNlOlwiXCIsZnJvbUFjY291bnQ6XCJcIixtZXNzYWdlRm9yU2hvdzpcIlwifSx0aGlzLm5leHRNZXNzYWdlU2VxPVwiXCIsdGhpcy5tZW1iZXJOdW09XCJcIix0aGlzLm1lbWJlckNvdW50PVwiXCIsdGhpcy5tYXhNZW1iZXJOdW09XCJcIix0aGlzLm1heE1lbWJlckNvdW50PVwiXCIsdGhpcy5qb2luT3B0aW9uPVwiXCIsdGhpcy5ncm91cEN1c3RvbUZpZWxkPVtdLHRoaXMubXV0ZUFsbE1lbWJlcnM9dm9pZCAwLHRoaXMuX2luaXRHcm91cCh0KX1yZXR1cm4gRW4oZSxbe2tleTpcIl9pbml0R3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlPbS5pbmRleE9mKHQpPDB8fChcInNlbGZJbmZvXCIhPT10PyhcIm1lbWJlck51bVwiPT09dCYmKHRoaXMubWVtYmVyQ291bnQ9ZVt0XSksXCJtYXhNZW1iZXJOdW1cIj09PXQmJih0aGlzLm1heE1lbWJlckNvdW50PWVbdF0pLHRoaXNbdF09ZVt0XSk6dGhpcy51cGRhdGVTZWxmSW5mbyhlW3RdKSl9fSx7a2V5OlwidXBkYXRlR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSk7bi5sYXN0TXNnVGltZSYmKHRoaXMubGFzdE1lc3NhZ2UubGFzdFRpbWU9bi5sYXN0TXNnVGltZSksaHUobi5tdXRlQWxsTWVtYmVycyl8fChcIk9uXCI9PT1uLm11dGVBbGxNZW1iZXJzP24ubXV0ZUFsbE1lbWJlcnM9ITA6bi5tdXRlQWxsTWVtYmVycz0hMSksbi5ncm91cEN1c3RvbUZpZWxkJiZHdSh0aGlzLmdyb3VwQ3VzdG9tRmllbGQsbi5ncm91cEN1c3RvbUZpZWxkKSxodShuLm1lbWJlck51bSl8fCh0aGlzLm1lbWJlckNvdW50PW4ubWVtYmVyTnVtKSxodShuLm1heE1lbWJlck51bSl8fCh0aGlzLm1heE1lbWJlckNvdW50PW4ubWF4TWVtYmVyTnVtKSxFdSh0aGlzLG4sW1wibWVtYmVyc1wiLFwiZXJyb3JDb2RlXCIsXCJsYXN0TXNnVGltZVwiLFwiZ3JvdXBDdXN0b21GaWVsZFwiLFwibWVtYmVyTnVtXCIsXCJtYXhNZW1iZXJOdW1cIl0pLGd1KG4ubWVtYmVycykmJm4ubWVtYmVycy5sZW5ndGg+MCYmbi5tZW1iZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UudXNlcklEPT09dC5zZWxmSW5mby51c2VySUQmJkV1KHQuc2VsZkluZm8sZSxbXCJzZXF1ZW5jZVwiXSl9KSl9fSx7a2V5OlwidXBkYXRlU2VsZkluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm5hbWVDYXJkLG49ZS5qb2luVGltZSxvPWUucm9sZSxyPWUubWVzc2FnZVJlbWluZFR5cGUsYT1lLnJlYWRlZFNlcXVlbmNlLHM9ZS5leGNsdWRlZFVucmVhZFNlcXVlbmNlTGlzdDtFdSh0aGlzLnNlbGZJbmZvLHtuYW1lQ2FyZDp0LGpvaW5UaW1lOm4scm9sZTpvLG1lc3NhZ2VSZW1pbmRUeXBlOnIscmVhZGVkU2VxdWVuY2U6YSxleGNsdWRlZFVucmVhZFNlcXVlbmNlTGlzdDpzfSxbXSxbXCJcIixudWxsLHZvaWQgMCwwLE5hTl0pfX0se2tleTpcInNldFNlbGZOYW1lQ2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuc2VsZkluZm8ubmFtZUNhcmQ9ZX19LHtrZXk6XCJtZW1iZXJOdW1cIixzZXQ6ZnVuY3Rpb24oZSl7fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUWkud2FybihcIu+8ge+8ge+8gXYyLjguMOi1t+W8g+eUqG1lbWJlck51be+8jOivt+S9v+eUqCBtZW1iZXJDb3VudFwiKSx0aGlzLm1lbWJlckNvdW50fX0se2tleTpcIm1heE1lbWJlck51bVwiLHNldDpmdW5jdGlvbihlKXt9LGdldDpmdW5jdGlvbigpe3JldHVybiBRaS53YXJuKFwi77yB77yB77yBdjIuOC4w6LW35byD55SobWF4TWVtYmVyTnVt77yM6K+35L2/55SoIG1heE1lbWJlckNvdW50XCIpLHRoaXMubWF4TWVtYmVyQ291bnR9fV0pLGV9KCksYm09ZnVuY3Rpb24oZSx0KXtpZihodSh0KSlyZXR1cm5cIlwiO3N3aXRjaChlKXtjYXNlIFluLk1TR19URVhUOnJldHVybiB0LnRleHQ7Y2FzZSBZbi5NU0dfSU1BR0U6cmV0dXJuXCJb5Zu+54mHXVwiO2Nhc2UgWW4uTVNHX0xPQ0FUSU9OOnJldHVyblwiW+S9jee9rl1cIjtjYXNlIFluLk1TR19BVURJTzpyZXR1cm5cIlvor63pn7NdXCI7Y2FzZSBZbi5NU0dfVklERU86cmV0dXJuXCJb6KeG6aKRXVwiO2Nhc2UgWW4uTVNHX0ZJTEU6cmV0dXJuXCJb5paH5Lu2XVwiO2Nhc2UgWW4uTVNHX0NVU1RPTTpyZXR1cm5cIlvoh6rlrprkuYnmtojmga9dXCI7Y2FzZSBZbi5NU0dfR1JQX1RJUDpyZXR1cm5cIlvnvqTmj5DnpLrmtojmga9dXCI7Y2FzZSBZbi5NU0dfR1JQX1NZU19OT1RJQ0U6cmV0dXJuXCJb576k57O757uf6YCa55+lXVwiO2Nhc2UgWW4uTVNHX0ZBQ0U6cmV0dXJuXCJb5Yqo55S76KGo5oOFXVwiO2Nhc2UgWW4uTVNHX01FUkdFUjpyZXR1cm5cIlvogYrlpKnorrDlvZVdXCI7ZGVmYXVsdDpyZXR1cm5cIlwifX0sd209ZnVuY3Rpb24oZSl7cmV0dXJuIGh1KGUpP3tsYXN0VGltZTowLGxhc3RTZXF1ZW5jZTowLGZyb21BY2NvdW50OjAsbWVzc2FnZUZvclNob3c6XCJcIixwYXlsb2FkOm51bGwsdHlwZTpcIlwiLGlzUmV2b2tlZDohMSxjbG91ZEN1c3RvbURhdGE6XCJcIixvbmxpbmVPbmx5RmxhZzohMSxuaWNrOlwiXCIsbmFtZUNhcmQ6XCJcIn06ZSBpbnN0YW5jZW9mIFhfP3tsYXN0VGltZTplLnRpbWV8fDAsbGFzdFNlcXVlbmNlOmUuc2VxdWVuY2V8fDAsZnJvbUFjY291bnQ6ZS5mcm9tfHxcIlwiLG1lc3NhZ2VGb3JTaG93OmJtKGUudHlwZSxlLnBheWxvYWQpLHBheWxvYWQ6ZS5wYXlsb2FkfHxudWxsLHR5cGU6ZS50eXBlfHxudWxsLGlzUmV2b2tlZDplLmlzUmV2b2tlZHx8ITEsY2xvdWRDdXN0b21EYXRhOmUuY2xvdWRDdXN0b21EYXRhfHxcIlwiLG9ubGluZU9ubHlGbGFnOmUuX29ubGluZU9ubHlGbGFnfHwhMSxuaWNrOmUubmlja3x8XCJcIixuYW1lQ2FyZDplLm5hbWVDYXJkfHxcIlwifTpTbih7fSxlLHttZXNzYWdlRm9yU2hvdzpibShlLnR5cGUsZS5wYXlsb2FkKX0pfSxQbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLmNvbnZlcnNhdGlvbklEPXQuY29udmVyc2F0aW9uSUR8fFwiXCIsdGhpcy51bnJlYWRDb3VudD10LnVucmVhZENvdW50fHwwLHRoaXMudHlwZT10LnR5cGV8fFwiXCIsdGhpcy5sYXN0TWVzc2FnZT13bSh0Lmxhc3RNZXNzYWdlKSx0Lmxhc3RNc2dUaW1lJiYodGhpcy5sYXN0TWVzc2FnZS5sYXN0VGltZT10Lmxhc3RNc2dUaW1lKSx0aGlzLl9pc0luZm9Db21wbGV0ZWQ9ITEsdGhpcy5wZWVyUmVhZFRpbWU9dC5wZWVyUmVhZFRpbWV8fDAsdGhpcy5ncm91cEF0SW5mb0xpc3Q9W10sdGhpcy5yZW1hcms9XCJcIix0aGlzLmlzUGlubmVkPXQuaXNQaW5uZWR8fCExLHRoaXMubWVzc2FnZVJlbWluZFR5cGU9XCJcIix0aGlzLl9pbml0UHJvZmlsZSh0KX1yZXR1cm4gRW4oZSxbe2tleTpcIl9pbml0UHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7c3dpdGNoKG4pe2Nhc2VcInVzZXJQcm9maWxlXCI6dC51c2VyUHJvZmlsZT1lLnVzZXJQcm9maWxlO2JyZWFrO2Nhc2VcImdyb3VwUHJvZmlsZVwiOnQuZ3JvdXBQcm9maWxlPWUuZ3JvdXBQcm9maWxlfX0pKSxodSh0aGlzLnVzZXJQcm9maWxlKSYmdGhpcy50eXBlPT09WW4uQ09OVl9DMkM/dGhpcy51c2VyUHJvZmlsZT1uZXcga20oe3VzZXJJRDplLmNvbnZlcnNhdGlvbklELnJlcGxhY2UoXCJDMkNcIixcIlwiKX0pOmh1KHRoaXMuZ3JvdXBQcm9maWxlKSYmdGhpcy50eXBlPT09WW4uQ09OVl9HUk9VUCYmKHRoaXMuZ3JvdXBQcm9maWxlPW5ldyBHbSh7Z3JvdXBJRDplLmNvbnZlcnNhdGlvbklELnJlcGxhY2UoXCJHUk9VUFwiLFwiXCIpfSkpfX0se2tleTpcInVwZGF0ZVVucmVhZENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5uZXh0VW5yZWFkQ291bnQsbj1lLmlzRnJvbUdldENvbnZlcnNhdGlvbnMsbz1lLmlzVW5yZWFkQzJDTWVzc2FnZTtodSh0KXx8KHd1KHRoaXMuc3ViVHlwZSk/dGhpcy51bnJlYWRDb3VudD0wOm4mJnRoaXMudHlwZT09PVluLkNPTlZfR1JPVVB8fG8mJnRoaXMudHlwZT09PVluLkNPTlZfQzJDP3RoaXMudW5yZWFkQ291bnQ9dDp0aGlzLnVucmVhZENvdW50PXRoaXMudW5yZWFkQ291bnQrdCl9fSx7a2V5OlwidXBkYXRlTGFzdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmxhc3RNZXNzYWdlPXdtKGUpfX0se2tleTpcInVwZGF0ZUdyb3VwQXRJbmZvTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LG49KEZuKHQ9ZS5ncm91cEF0VHlwZSl8fHFuKHQpfHx4bih0KXx8S24oKSkuc2xpY2UoMCk7LTEhPT1uLmluZGV4T2YoWW4uQ09OVl9BVF9NRSkmJi0xIT09bi5pbmRleE9mKFluLkNPTlZfQVRfQUxMKSYmKG49W1luLkNPTlZfQVRfQUxMX0FUX01FXSk7dmFyIG89e2Zyb206ZS5mcm9tLGdyb3VwSUQ6ZS5ncm91cElELG1lc3NhZ2VTZXF1ZW5jZTplLnNlcXVlbmNlLGF0VHlwZUFycmF5Om4sX19yYW5kb206ZS5fX3JhbmRvbSxfX3NlcXVlbmNlOmUuX19zZXF1ZW5jZX07dGhpcy5ncm91cEF0SW5mb0xpc3QucHVzaChvKSxRaS5kZWJ1ZyhcIkNvbnZlcnNhdGlvbi51cGRhdGVHcm91cEF0SW5mb0xpc3QgY29udmVyc2F0aW9uSUQ6XCIuY29uY2F0KHRoaXMuY29udmVyc2F0aW9uSUQpLHRoaXMuZ3JvdXBBdEluZm9MaXN0KX19LHtrZXk6XCJjbGVhckdyb3VwQXRJbmZvTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5ncm91cEF0SW5mb0xpc3QubGVuZ3RoPTB9fSx7a2V5OlwicmVkdWNlVW5yZWFkQ291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudW5yZWFkQ291bnQ+PTEmJih0aGlzLnVucmVhZENvdW50LT0xKX19LHtrZXk6XCJpc0xhc3RNZXNzYWdlUmV2b2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc2VxdWVuY2Usbj1lLnRpbWU7cmV0dXJuIHRoaXMudHlwZT09PVluLkNPTlZfQzJDJiZ0PT09dGhpcy5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2UmJm49PT10aGlzLmxhc3RNZXNzYWdlLmxhc3RUaW1lfHx0aGlzLnR5cGU9PT1Zbi5DT05WX0dST1VQJiZ0PT09dGhpcy5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2V9fSx7a2V5Olwic2V0TGFzdE1lc3NhZ2VSZXZva2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5sYXN0TWVzc2FnZS5pc1Jldm9rZWQ9ZX19LHtrZXk6XCJ0b0FjY291bnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb252ZXJzYXRpb25JRC5zdGFydHNXaXRoKFluLkNPTlZfQzJDKT90aGlzLmNvbnZlcnNhdGlvbklELnJlcGxhY2UoWW4uQ09OVl9DMkMsXCJcIik6dGhpcy5jb252ZXJzYXRpb25JRC5zdGFydHNXaXRoKFluLkNPTlZfR1JPVVApP3RoaXMuY29udmVyc2F0aW9uSUQucmVwbGFjZShZbi5DT05WX0dST1VQLFwiXCIpOlwiXCJ9fSx7a2V5Olwic3ViVHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyb3VwUHJvZmlsZT90aGlzLmdyb3VwUHJvZmlsZS50eXBlOlwiXCJ9fV0pLGV9KCksVW09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fY29udmVyc2F0aW9uTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiTWVzc2FnZVJlbWluZEhhbmRsZXJcIix0aGlzLl91cGRhdGVTZXF1ZW5jZT0wfXJldHVybiBFbihlLFt7a2V5OlwiZ2V0QzJDTWVzc2FnZVJlbWluZFR5cGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0QzJDTWVzc2FnZVJlbWluZFR5cGVcIik7cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6cmQsdXBkYXRlU2VxdWVuY2U6dGhpcy5fdXBkYXRlU2VxdWVuY2V9KS50aGVuKChmdW5jdGlvbihuKXtRaS5sb2coXCJcIi5jb25jYXQodCxcIiBva1wiKSk7dmFyIG89bi5kYXRhLHI9by51cGRhdGVTZXF1ZW5jZSxhPW8ubXV0ZUZsYWdMaXN0O2UuX3VwZGF0ZVNlcXVlbmNlPXIsZS5fcGF0Y2hDMkNNZXNzYWdlUmVtaW5kVHlwZShhKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7UWkuZXJyb3IoXCJcIi5jb25jYXQodCxcIiBmYWlsZWQuIGVycm9yOlwiKSxlKX0pKX19LHtrZXk6XCJfcGF0Y2hDMkNNZXNzYWdlUmVtaW5kVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj0wLG89XCJcIjtndShlKSYmZS5sZW5ndGg+MCYmZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgcj1lLnVzZXJJRCxhPWUubXV0ZUZsYWc7MD09PWE/bz1Zbi5NU0dfUkVNSU5EX0FDUFRfQU5EX05PVEU6MT09PWE/bz1Zbi5NU0dfUkVNSU5EX0RJU0NBUkQ6Mj09PWEmJihvPVluLk1TR19SRU1JTkRfQUNQVF9OT1RfTk9URSksITA9PT10Ll9jb252ZXJzYXRpb25Nb2R1bGUucGF0Y2hNZXNzYWdlUmVtaW5kVHlwZSh7SUQ6cixpc0MyQ0NvbnZlcnNhdGlvbjohMCxtZXNzYWdlUmVtaW5kVHlwZTpvfSkmJihuKz0xKX0pKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9wYXRjaEMyQ01lc3NhZ2VSZW1pbmRUeXBlIGNvdW50OlwiKS5jb25jYXQobikpfX0se2tleTpcInNldFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmdyb3VwSUQ/dGhpcy5fc2V0R3JvdXBNZXNzYWdlUmVtaW5kVHlwZShlKTpndShlLnVzZXJJRExpc3QpP3RoaXMuX3NldEMyQ01lc3NhZ2VSZW1pbmRUeXBlKGUpOnZvaWQgMH19LHtrZXk6XCJfc2V0R3JvdXBNZXNzYWdlUmVtaW5kVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3NldEdyb3VwTWVzc2FnZVJlbWluZFR5cGVcIiksbz1lLmdyb3VwSUQscj1lLm1lc3NhZ2VSZW1pbmRUeXBlLGE9XCJncm91cElEOlwiLmNvbmNhdChvLFwiIG1lc3NhZ2VSZW1pbmRUeXBlOlwiKS5jb25jYXQocikscz1uZXcgRHAoeWcpO3JldHVybiBzLnNldE1lc3NhZ2UoYSksdGhpcy5fZ2V0TW9kdWxlKGNsKS5tb2RpZnlHcm91cE1lbWJlckluZm8oe2dyb3VwSUQ6byxtZXNzYWdlUmVtaW5kVHlwZTpyLHVzZXJJRDp0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0TXlVc2VySUQoKX0pLnRoZW4oKGZ1bmN0aW9uKCl7cy5zZXROZXR3b3JrVHlwZSh0Ll9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIFwiKS5jb25jYXQoYSkpO3ZhciBlPXQuX2dldE1vZHVsZShpbCkuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7cmV0dXJuIGUmJihlLnNlbGZJbmZvLm1lc3NhZ2VSZW1pbmRUeXBlPXIpLHQuX2NvbnZlcnNhdGlvbk1vZHVsZS5wYXRjaE1lc3NhZ2VSZW1pbmRUeXBlKHtJRDpvLGlzQzJDQ29udmVyc2F0aW9uOiExLG1lc3NhZ2VSZW1pbmRUeXBlOnJ9KSYmdC5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpLFFfKHtncm91cDplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9jb252ZXJzYXRpb25Nb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO3Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiX3NldEMyQ01lc3NhZ2VSZW1pbmRUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fc2V0QzJDTWVzc2FnZVJlbWluZFR5cGVcIiksbz1lLnVzZXJJRExpc3Qscj1lLm1lc3NhZ2VSZW1pbmRUeXBlLGE9by5zbGljZSgwLDMwKSxzPTA7cj09PVluLk1TR19SRU1JTkRfRElTQ0FSRD9zPTE6cj09PVluLk1TR19SRU1JTkRfQUNQVF9OT1RfTk9URSYmKHM9Mik7dmFyIGk9XCJ1c2VySURMaXN0OlwiLmNvbmNhdChhLFwiIG1lc3NhZ2VSZW1pbmRUeXBlOlwiKS5jb25jYXQociksdT1uZXcgRHAoeWcpO3JldHVybiB1LnNldE1lc3NhZ2UoaSksdGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpvZCxyZXF1ZXN0RGF0YTp7dXNlcklETGlzdDphLG11dGVGbGFnOnN9fSkudGhlbigoZnVuY3Rpb24oZSl7dS5zZXROZXR3b3JrVHlwZSh0Ll9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCk7dmFyIG89ZS5kYXRhLHM9by51cGRhdGVTZXF1ZW5jZSxpPW8uZXJyb3JMaXN0O3QuX3VwZGF0ZVNlcXVlbmNlPXM7dmFyIGM9W10sbD1bXTtndShpKSYmaS5mb3JFYWNoKChmdW5jdGlvbihlKXtjLnB1c2goZS51c2VySUQpLGwucHVzaCh7dXNlcklEOmUudXNlcklELGNvZGU6ZS5lcnJvckNvZGV9KX0pKTt2YXIgZD1hLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1jLmluZGV4T2YoZSl9KSk7UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIHN1Y2Nlc3NVc2VySURMaXN0OlwiKS5jb25jYXQoZCxcIiBmYWlsdXJlVXNlcklETGlzdDpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGwpKSk7dmFyIHA9MDtyZXR1cm4gZC5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9jb252ZXJzYXRpb25Nb2R1bGUucGF0Y2hNZXNzYWdlUmVtaW5kVHlwZSh7SUQ6ZSxpc0MyQ0NvbnZlcnNhdGlvbjohMCxtZXNzYWdlUmVtaW5kVHlwZTpyfSkmJihwKz0xKX0pKSxwPj0xJiZ0Ll9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCksYS5sZW5ndGg9Yy5sZW5ndGg9MCxpbSh7c3VjY2Vzc1VzZXJJRExpc3Q6ZC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt1c2VySUQ6ZX19KSksZmFpbHVyZVVzZXJJRExpc3Q6bH0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fY29udmVyc2F0aW9uTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTt1LnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcIl9nZXRNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmdldE1vZHVsZShlKX19LHtrZXk6XCJfZW1pdENvbnZlcnNhdGlvblVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX0se2tleTpcInNldFVwZGF0ZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fdXBkYXRlU2VxdWVuY2U9ZX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fdXBkYXRlU2VxdWVuY2U9MH19XSksZX0oKSxGbT1mdW5jdGlvbihlKXtEbihuLGUpO3ZhciB0PXduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87cmV0dXJuIHluKHRoaXMsbiksKG89dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJDb252ZXJzYXRpb25Nb2R1bGVcIixFbS5taXhpbihHbihvKSksby5fbWVzc2FnZUxpc3RIYW5kbGVyPW5ldyB2bSxvLl9tZXNzYWdlUmVtaW5kSGFuZGxlcj1uZXcgVW0oR24obykpLG8uc2luZ2x5TGlua2VkTGlzdD1uZXcgUm0oMTAwKSxvLl9wYWdpbmdTdGF0dXM9eGMuTk9UX1NUQVJULG8uX3BhZ2luZ1RpbWVTdGFtcD0wLG8uX3BhZ2luZ1N0YXJ0SW5kZXg9MCxvLl9wYWdpbmdQaW5uZWRUaW1lU3RhbXA9MCxvLl9wYWdpbmdQaW5uZWRTdGFydEluZGV4PTAsby5fY29udmVyc2F0aW9uTWFwPW5ldyBNYXAsby5fdG1wR3JvdXBMaXN0PVtdLG8uX3RtcEdyb3VwQXRUaXBzTGlzdD1bXSxvLl9wZWVyUmVhZFRpbWVNYXA9bmV3IE1hcCxvLl9jb21wbGV0ZWRNYXA9bmV3IE1hcCxvLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXA9bmV3IE1hcCxvLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcD1uZXcgTWFwLG8uX2luaXRMaXN0ZW5lcnMoKSxvfXJldHVybiBFbihuLFt7a2V5OlwiX2luaXRMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKTtlLm9uKE1tLHRoaXMuX2luaXRMb2NhbENvbnZlcnNhdGlvbkxpc3QsdGhpcyksZS5vbihJbSx0aGlzLl9vblByb2ZpbGVVcGRhdGVkLHRoaXMpfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UlNjA9PTAmJnRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci50cmF2ZXJzYWwoKX19LHtrZXk6XCJfaW5pdExvY2FsQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBEcChsZyk7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5faW5pdExvY2FsQ29udmVyc2F0aW9uTGlzdC5cIikpO3ZhciBuPVwiXCIsbz10aGlzLl9nZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdCgpO2lmKG8pe2Zvcih2YXIgcj1vLmxlbmd0aCxhPTA7YTxyO2ErKyl7dmFyIHM9b1thXTtpZihzKXtpZihzLmNvbnZlcnNhdGlvbklEPT09XCJcIi5jb25jYXQoWW4uQ09OVl9DMkMsXCJAVExTI0VSUk9SXCIpfHxzLmNvbnZlcnNhdGlvbklEPT09XCJcIi5jb25jYXQoWW4uQ09OVl9DMkMsXCJAVExTI05PVF9GT1VORFwiKSljb250aW51ZTtpZihzLmdyb3VwUHJvZmlsZSl7dmFyIGk9cy5ncm91cFByb2ZpbGUudHlwZTtpZih3dShpKSljb250aW51ZX19dGhpcy5fY29udmVyc2F0aW9uTWFwLnNldChvW2FdLmNvbnZlcnNhdGlvbklELG5ldyBQbShvW2FdKSl9dGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSxuPVwiY291bnQ6XCIuY29uY2F0KHIpfWVsc2Ugbj1cImNvdW50OjBcIjt0LnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShuKS5lbmQoKSx0aGlzLmdldE1vZHVsZShzbCl8fHRoaXMudHJpZ2dlclJlYWR5KCksdGhpcy5yZWFkeSgoZnVuY3Rpb24oKXtlLl90bXBHcm91cExpc3QubGVuZ3RoPjAmJihlLnVwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShlLl90bXBHcm91cExpc3QpLGUuX3RtcEdyb3VwTGlzdC5sZW5ndGg9MCl9KSksdGhpcy5fc3luY0NvbnZlcnNhdGlvbkxpc3QoKX19LHtrZXk6XCJvbk1lc3NhZ2VTZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TZW5kT3JSZWNlaXZlTWVzc2FnZSh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6ZS5jb252ZXJzYXRpb25PcHRpb25zTGlzdCxpc0luc3RhbnRNZXNzYWdlOiEwfSl9fSx7a2V5Olwib25OZXdNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TZW5kT3JSZWNlaXZlTWVzc2FnZShlKX19LHtrZXk6XCJfb25TZW5kT3JSZWNlaXZlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvbnZlcnNhdGlvbk9wdGlvbnNMaXN0LG89ZS5pc0luc3RhbnRNZXNzYWdlLHI9dm9pZCAwPT09b3x8byxhPWUuaXNVbnJlYWRDMkNNZXNzYWdlLHM9dm9pZCAwIT09YSYmYTt0aGlzLl9pc1JlYWR5PzAhPT1uLmxlbmd0aCYmKHRoaXMuX2dldEMyQ1BlZXJSZWFkVGltZShuKSx0aGlzLl91cGRhdGVMb2NhbENvbnZlcnNhdGlvbkxpc3Qoe2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0Om4saXNJbnN0YW50TWVzc2FnZTpyLGlzVW5yZWFkQzJDTWVzc2FnZTpzLGlzRnJvbUdldENvbnZlcnNhdGlvbnM6ITF9KSx0aGlzLl9zZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdCgpLHRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpKTp0aGlzLnJlYWR5KChmdW5jdGlvbigpe3QuX29uU2VuZE9yUmVjZWl2ZU1lc3NhZ2UoZSl9KSl9fSx7a2V5OlwidXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztndShlKSYmMD09PWUubGVuZ3RofHwoMCE9PXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5zaXplPyhlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPVwiR1JPVVBcIi5jb25jYXQoZS5ncm91cElEKTtpZih0Ll9jb252ZXJzYXRpb25NYXAuaGFzKG4pKXt2YXIgbz10Ll9jb252ZXJzYXRpb25NYXAuZ2V0KG4pO28uZ3JvdXBQcm9maWxlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpLG8ubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlPGUubmV4dE1lc3NhZ2VTZXEmJihvLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZT1lLm5leHRNZXNzYWdlU2VxLTEpLG8uc3ViVHlwZXx8KG8uc3ViVHlwZT1lLnR5cGUpfX0pKSx0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpKTp0aGlzLl90bXBHcm91cExpc3Q9ZSl9fSx7a2V5OlwiX3VwZGF0ZUNvbnZlcnNhdGlvblVzZXJQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmRhdGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49XCJDMkNcIi5jb25jYXQoZS51c2VySUQpO3QuX2NvbnZlcnNhdGlvbk1hcC5oYXMobikmJih0Ll9jb252ZXJzYXRpb25NYXAuZ2V0KG4pLnVzZXJQcm9maWxlPWUpfSkpLHRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSl9fSx7a2V5Olwib25NZXNzYWdlUmV2b2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoMCE9PWUubGVuZ3RoKXt2YXIgbj1udWxsLG89ITE7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXsobj10Ll9jb252ZXJzYXRpb25NYXAuZ2V0KGUuY29udmVyc2F0aW9uSUQpKSYmKG4ucmVkdWNlVW5yZWFkQ291bnQoKSxuLmlzTGFzdE1lc3NhZ2VSZXZva2VkKGUpJiYobz0hMCxuLnNldExhc3RNZXNzYWdlUmV2b2tlZCghMCkpKX0pKSxvJiZ0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX19LHtrZXk6XCJvbk1lc3NhZ2VEZWxldGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoMCE9PWUubGVuZ3RoKXtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuaXNEZWxldGVkPSEwfSkpO2Zvcih2YXIgdD1lWzBdLmNvbnZlcnNhdGlvbklELG49dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QodCksbz17fSxyPW4ubGVuZ3RoLTE7cj49MDtyLS0paWYoIW5bcl0uaXNEZWxldGVkKXtvPW5bcl07YnJlYWt9dmFyIGE9dGhpcy5fY29udmVyc2F0aW9uTWFwLmdldCh0KTtpZihhKXt2YXIgcz0hMTthLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZT09PW8uc2VxdWVuY2UmJmEubGFzdE1lc3NhZ2UubGFzdFRpbWU9PT1vLnRpbWV8fChYdShvKSYmKG89dm9pZCAwKSxhLnVwZGF0ZUxhc3RNZXNzYWdlKG8pLHM9ITAsUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk1lc3NhZ2VEZWxldGVkLiB1cGRhdGUgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdCh0LFwiIHdpdGggbGFzdE1lc3NhZ2U6XCIpLGEubGFzdE1lc3NhZ2UpKSx0LnN0YXJ0c1dpdGgoWW4uQ09OVl9DMkMpJiZ0aGlzLnVwZGF0ZVVucmVhZENvdW50KHQpLHMmJnRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSl9fX19LHtrZXk6XCJvbk5ld0dyb3VwQXRUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZGF0YUxpc3Qsbz1udWxsO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5ncm91cEF0VGlwcz9vPWUuZ3JvdXBBdFRpcHM6ZS5lbGVtZW50cyYmKG89ZS5lbGVtZW50cyksby5fX3JhbmRvbT1lLnJhbmRvbSxvLl9fc2VxdWVuY2U9ZS5jbGllbnRTZXF1ZW5jZSx0Ll90bXBHcm91cEF0VGlwc0xpc3QucHVzaChvKX0pKSxRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25OZXdHcm91cEF0VGlwcyBpc1JlYWR5OlwiKS5jb25jYXQodGhpcy5faXNSZWFkeSksdGhpcy5fdG1wR3JvdXBBdFRpcHNMaXN0KSx0aGlzLl9pc1JlYWR5JiZ0aGlzLl9oYW5kbGVHcm91cEF0VGlwc0xpc3QoKX19LHtrZXk6XCJfaGFuZGxlR3JvdXBBdFRpcHNMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKDAhPT10aGlzLl90bXBHcm91cEF0VGlwc0xpc3QubGVuZ3RoKXt2YXIgdD0hMTt0aGlzLl90bXBHcm91cEF0VGlwc0xpc3QuZm9yRWFjaCgoZnVuY3Rpb24obil7dmFyIG89bi5ncm91cElEO2lmKG4uZnJvbSE9PWUuZ2V0TXlVc2VySUQoKSl7dmFyIHI9ZS5fY29udmVyc2F0aW9uTWFwLmdldChcIlwiLmNvbmNhdChZbi5DT05WX0dST1VQKS5jb25jYXQobykpO3ImJihyLnVwZGF0ZUdyb3VwQXRJbmZvTGlzdChuKSx0PSEwKX19KSksdCYmdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSx0aGlzLl90bXBHcm91cEF0VGlwc0xpc3QubGVuZ3RoPTB9fX0se2tleTpcIl9nZXRDMkNQZWVyUmVhZFRpbWVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49W107aWYoZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9jb252ZXJzYXRpb25NYXAuaGFzKGUuY29udmVyc2F0aW9uSUQpfHxlLnR5cGUhPT1Zbi5DT05WX0MyQ3x8bi5wdXNoKGUuY29udmVyc2F0aW9uSUQucmVwbGFjZShZbi5DT05WX0MyQyxcIlwiKSl9KSksbi5sZW5ndGg+MCl7UWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9nZXRDMkNQZWVyUmVhZFRpbWUgdXNlcklETGlzdDpcIikuY29uY2F0KG4pKTt2YXIgbz10aGlzLmdldE1vZHVsZShzbCk7byYmby5nZXRSZW1vdGVQZWVyUmVhZFRpbWUobil9fX0se2tleTpcIl9nZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKHBsKS5nZXRJdGVtKFwiY29udmVyc2F0aW9uTWFwXCIpfX0se2tleTpcIl9zZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbkxpc3QoKS5zbGljZSgwLDIwKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntjb252ZXJzYXRpb25JRDplLmNvbnZlcnNhdGlvbklELHR5cGU6ZS50eXBlLHN1YlR5cGU6ZS5zdWJUeXBlLGxhc3RNZXNzYWdlOmUubGFzdE1lc3NhZ2UsZ3JvdXBQcm9maWxlOmUuZ3JvdXBQcm9maWxlLHVzZXJQcm9maWxlOmUudXNlclByb2ZpbGV9fSkpO3RoaXMuZ2V0TW9kdWxlKHBsKS5zZXRJdGVtKFwiY29udmVyc2F0aW9uTWFwXCIsZSl9fSx7a2V5OlwiZW1pdENvbnZlcnNhdGlvblVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXSx0PSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0sbj1Vbih0aGlzLl9jb252ZXJzYXRpb25NYXAudmFsdWVzKCkpO2lmKHQpe3ZhciBvPXRoaXMuZ2V0TW9kdWxlKGlsKTtvJiZvLnVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2Uobil9ZSYmdGhpcy5lbWl0T3V0ZXJFdmVudChXbi5DT05WRVJTQVRJT05fTElTVF9VUERBVEVEKX19LHtrZXk6XCJnZXRMb2NhbENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBVbih0aGlzLl9jb252ZXJzYXRpb25NYXAudmFsdWVzKCkpfX0se2tleTpcImdldExvY2FsQ29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZSl9fSx7a2V5OlwiX3N5bmNDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IERwKGRnKTtyZXR1cm4gdGhpcy5fcGFnaW5nU3RhdHVzPT09eGMuTk9UX1NUQVJUJiZ0aGlzLl9jb252ZXJzYXRpb25NYXAuY2xlYXIoKSx0aGlzLl9wYWdpbmdHZXRDb252ZXJzYXRpb25MaXN0KCkudGhlbigoZnVuY3Rpb24obil7cmV0dXJuIGUuX3BhZ2luZ1N0YXR1cz14Yy5SRVNPTFZFRCxlLl9zZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdCgpLGUuX2hhbmRsZUMyQ1BlZXJSZWFkVGltZSgpLGUuX3BhdGNoQ29udmVyc2F0aW9uUHJvcGVydGllcygpLHQuc2V0TWVzc2FnZShlLl9jb252ZXJzYXRpb25NYXAuc2l6ZSkuc2V0TmV0d29ya1R5cGUoZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxufSkpLmNhdGNoKChmdW5jdGlvbihuKXtyZXR1cm4gZS5fcGFnaW5nU3RhdHVzPXhjLlJFSkVDVEVELHQuc2V0TWVzc2FnZShlLl9wYWdpbmdUaW1lU3RhbXApLGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89UG4oZSwyKSxyPW9bMF0sYT1vWzFdO3Quc2V0RXJyb3IobixyLGEpLmVuZCgpfSkpLHVtKG4pfSkpfX0se2tleTpcIl9wYXRjaENvbnZlcnNhdGlvblByb3BlcnRpZXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1EYXRlLm5vdygpLG49dGhpcy5jaGVja0FuZFBhdGNoUmVtYXJrKCksbz10aGlzLl9tZXNzYWdlUmVtaW5kSGFuZGxlci5nZXRDMkNNZXNzYWdlUmVtaW5kVHlwZSgpLHI9dGhpcy5nZXRNb2R1bGUoaWwpLmdldEdyb3VwTGlzdCgpO1Byb21pc2UuYWxsKFtuLG8scl0pLnRoZW4oKGZ1bmN0aW9uKCl7dmFyIG49RGF0ZS5ub3coKS10O1FpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX3BhdGNoQ29udmVyc2F0aW9uUHJvcGVydGllcyBvay4gY29zdCBcIikuY29uY2F0KG4sXCIgbXNcIikpLGUuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSl9KSl9fSx7a2V5OlwiX3BhZ2luZ0dldENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3BhZ2luZ0dldENvbnZlcnNhdGlvbkxpc3RcIik7cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdCh0LFwiIHRpbWVTdGFtcDpcIikuY29uY2F0KHRoaXMuX3BhZ2luZ1RpbWVTdGFtcCxcIiBzdGFydEluZGV4OlwiKS5jb25jYXQodGhpcy5fcGFnaW5nU3RhcnRJbmRleCkrXCIgcGlubmVkVGltZVN0YW1wOlwiLmNvbmNhdCh0aGlzLl9wYWdpbmdQaW5uZWRUaW1lU3RhbXAsXCIgcGlubmVkU3RhcnRJbmRleDpcIikuY29uY2F0KHRoaXMuX3BhZ2luZ1Bpbm5lZFN0YXJ0SW5kZXgpKSx0aGlzLl9wYWdpbmdTdGF0dXM9eGMuUEVORElORyx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp1ZCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLHRpbWVTdGFtcDp0aGlzLl9wYWdpbmdUaW1lU3RhbXAsc3RhcnRJbmRleDp0aGlzLl9wYWdpbmdTdGFydEluZGV4LHBpbm5lZFRpbWVTdGFtcDp0aGlzLl9wYWdpbmdQaW5uZWRUaW1lU3RhbXAscGlubmVkU3RhcnRJbmRleDp0aGlzLl9wYWdpbmdTdGFydEluZGV4LG9yZGVyVHlwZToxfX0pLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciBvPW4uZGF0YSxyPW8uY29tcGxldGVGbGFnLGE9by5jb252ZXJzYXRpb25zLHM9dm9pZCAwPT09YT9bXTphLGk9by50aW1lU3RhbXAsdT1vLnN0YXJ0SW5kZXgsYz1vLnBpbm5lZFRpbWVTdGFtcCxsPW8ucGlubmVkU3RhcnRJbmRleDtpZihRaS5sb2coXCJcIi5jb25jYXQodCxcIiBvay4gY29tcGxldGVGbGFnOlwiKS5jb25jYXQocixcIiBjb3VudDpcIikuY29uY2F0KHMubGVuZ3RoLFwiIGlzUmVhZHk6XCIpLmNvbmNhdChlLl9pc1JlYWR5KSkscy5sZW5ndGg+MCl7dmFyIGQ9ZS5fZ2V0Q29udmVyc2F0aW9uT3B0aW9ucyhzKTtlLl91cGRhdGVMb2NhbENvbnZlcnNhdGlvbkxpc3Qoe2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0OmQsaXNGcm9tR2V0Q29udmVyc2F0aW9uczohMH0pLGUuaXNMb2dnZWRJbigpJiZlLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoKX1pZighZS5faXNSZWFkeSl7aWYoIWUuaXNMb2dnZWRJbigpKXJldHVybiBpbSgpO2UudHJpZ2dlclJlYWR5KCl9cmV0dXJuIGUuX3BhZ2luZ1RpbWVTdGFtcD1pLGUuX3BhZ2luZ1N0YXJ0SW5kZXg9dSxlLl9wYWdpbmdQaW5uZWRUaW1lU3RhbXA9YyxlLl9wYWdpbmdQaW5uZWRTdGFydEluZGV4PWwsMSE9PXI/ZS5fcGFnaW5nR2V0Q29udmVyc2F0aW9uTGlzdCgpOihlLl9oYW5kbGVHcm91cEF0VGlwc0xpc3QoKSxpbSgpKX0pKS5jYXRjaCgoZnVuY3Rpb24obil7dGhyb3cgZS5pc0xvZ2dlZEluKCkmJihlLl9pc1JlYWR5fHwoUWkud2FybihcIlwiLmNvbmNhdCh0LFwiIGZhaWxlZC4gZXJyb3I6XCIpLG4pLGUudHJpZ2dlclJlYWR5KCkpKSxufSkpfX0se2tleTpcIl91cGRhdGVMb2NhbENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdCxuPWUuaXNGcm9tR2V0Q29udmVyc2F0aW9ucyxvPURhdGUubm93KCk7dD10aGlzLl9nZXRUbXBDb252ZXJzYXRpb25MaXN0TWFwcGluZyhlKSx0aGlzLl9jb252ZXJzYXRpb25NYXA9bmV3IE1hcCh0aGlzLl9zb3J0Q29udmVyc2F0aW9uTGlzdChbXS5jb25jYXQoVW4odC50b0JlVXBkYXRlZENvbnZlcnNhdGlvbkxpc3QpLFVuKHRoaXMuX2NvbnZlcnNhdGlvbk1hcCkpKSksbnx8dGhpcy5fdXBkYXRlVXNlck9yR3JvdXBQcm9maWxlKHQubmV3Q29udmVyc2F0aW9uTGlzdCksUWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl91cGRhdGVMb2NhbENvbnZlcnNhdGlvbkxpc3QgY29zdCBcIikuY29uY2F0KERhdGUubm93KCktbyxcIiBtc1wiKSl9fSx7a2V5OlwiX2dldFRtcENvbnZlcnNhdGlvbkxpc3RNYXBwaW5nXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuY29udmVyc2F0aW9uT3B0aW9uc0xpc3Qsbj1lLmlzRnJvbUdldENvbnZlcnNhdGlvbnMsbz1lLmlzSW5zdGFudE1lc3NhZ2Uscj1lLmlzVW5yZWFkQzJDTWVzc2FnZSxhPXZvaWQgMCE9PXImJnIscz1bXSxpPVtdLHU9dGhpcy5nZXRNb2R1bGUoaWwpLGM9dGhpcy5nZXRNb2R1bGUodWwpLGw9MCxkPXQubGVuZ3RoO2w8ZDtsKyspe3ZhciBwPW5ldyBQbSh0W2xdKSxnPXAuY29udmVyc2F0aW9uSUQ7aWYoZyE9PVwiXCIuY29uY2F0KFluLkNPTlZfQzJDLFwiQFRMUyNFUlJPUlwiKSYmZyE9PVwiXCIuY29uY2F0KFluLkNPTlZfQzJDLFwiQFRMUyNOT1RfRk9VTkRcIikpaWYodGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhnKSl7dmFyIGg9dGhpcy5fY29udmVyc2F0aW9uTWFwLmdldChnKSxmPVtcInVucmVhZENvdW50XCIsXCJhbGxvd1R5cGVcIixcImFkbWluRm9yYmlkVHlwZVwiLFwicGF5bG9hZFwiLFwiaXNQaW5uZWRcIl07ITE9PT1vJiZmLnB1c2goXCJsYXN0TWVzc2FnZVwiKTt2YXIgXz10W2xdLmxhc3RNZXNzYWdlLG09IWh1KF8pO218fHRoaXMuX29uTGFzdE1lc3NhZ2VOb3RFeGlzdCh0W2xdKSxodShvKSYmbSYmbnVsbD09PWgubGFzdE1lc3NhZ2UucGF5bG9hZCYmKGgubGFzdE1lc3NhZ2UucGF5bG9hZD1fLnBheWxvYWQpLEV1KGgscCxmLFtudWxsLHZvaWQgMCxcIlwiLDAsTmFOXSksaC51cGRhdGVVbnJlYWRDb3VudCh7bmV4dFVucmVhZENvdW50OnAudW5yZWFkQ291bnQsaXNGcm9tR2V0Q29udmVyc2F0aW9uczpuLGlzVW5yZWFkQzJDTWVzc2FnZTphfSksbyYmbSYmKGgubGFzdE1lc3NhZ2UucGF5bG9hZD1fLnBheWxvYWQsaC50eXBlPT09WW4uQ09OVl9HUk9VUCYmKGgubGFzdE1lc3NhZ2UubmFtZUNhcmQ9Xy5uYW1lQ2FyZCxoLmxhc3RNZXNzYWdlLm5pY2s9Xy5uaWNrKSksbSYmaC5sYXN0TWVzc2FnZS5jbG91ZEN1c3RvbURhdGEhPT1fLmNsb3VkQ3VzdG9tRGF0YSYmKGgubGFzdE1lc3NhZ2UuY2xvdWRDdXN0b21EYXRhPV8uY2xvdWRDdXN0b21EYXRhfHxcIlwiKSx0aGlzLl9jb252ZXJzYXRpb25NYXAuZGVsZXRlKGcpLHMucHVzaChbZyxoXSl9ZWxzZXtpZihwLnR5cGU9PT1Zbi5DT05WX0dST1VQJiZ1KXt2YXIgdj1wLmdyb3VwUHJvZmlsZS5ncm91cElELE09dS5nZXRMb2NhbEdyb3VwUHJvZmlsZSh2KTtNJiYocC5ncm91cFByb2ZpbGU9TSxwLnVwZGF0ZVVucmVhZENvdW50KHtuZXh0VW5yZWFkQ291bnQ6MH0pKX1lbHNlIGlmKHAudHlwZT09PVluLkNPTlZfQzJDKXt2YXIgeT1nLnJlcGxhY2UoWW4uQ09OVl9DMkMsXCJcIik7YyYmYy5pc015RnJpZW5kKHkpJiYocC5yZW1hcms9Yy5nZXRGcmllbmRSZW1hcmsoeSkpfWkucHVzaChwKSxzLnB1c2goW2cscF0pfX1yZXR1cm57dG9CZVVwZGF0ZWRDb252ZXJzYXRpb25MaXN0OnMsbmV3Q29udmVyc2F0aW9uTGlzdDppfX19LHtrZXk6XCJfb25MYXN0TWVzc2FnZU5vdEV4aXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7bmV3IERwKEloKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KGUpKSkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKX19LHtrZXk6XCJfc29ydENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1bXSxuPVtdO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpeyEwPT09ZVsxXS5pc1Bpbm5lZD90LnB1c2goZSk6bi5wdXNoKGUpfSkpLHQuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdFsxXS5sYXN0TWVzc2FnZS5sYXN0VGltZS1lWzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lfSkpLmNvbmNhdChuLnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRbMV0ubGFzdE1lc3NhZ2UubGFzdFRpbWUtZVsxXS5sYXN0TWVzc2FnZS5sYXN0VGltZX0pKSl9fSx7a2V5OlwiX3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb252ZXJzYXRpb25NYXA9bmV3IE1hcCh0aGlzLl9zb3J0Q29udmVyc2F0aW9uTGlzdChVbih0aGlzLl9jb252ZXJzYXRpb25NYXApKSksdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX19LHtrZXk6XCJfdXBkYXRlVXNlck9yR3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZigwIT09ZS5sZW5ndGgpe3ZhciBuPVtdLG89W10scj10aGlzLmdldE1vZHVsZShhbCksYT10aGlzLmdldE1vZHVsZShpbCk7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihlLnR5cGU9PT1Zbi5DT05WX0MyQyluLnB1c2goZS50b0FjY291bnQpO2Vsc2UgaWYoZS50eXBlPT09WW4uQ09OVl9HUk9VUCl7dmFyIHQ9ZS50b0FjY291bnQ7YS5oYXNMb2NhbEdyb3VwKHQpP2UuZ3JvdXBQcm9maWxlPWEuZ2V0TG9jYWxHcm91cFByb2ZpbGUodCk6by5wdXNoKHQpfX0pKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGUgYzJjVXNlcklETGlzdDpcIikuY29uY2F0KG4sXCIgZ3JvdXBJRExpc3Q6XCIpLmNvbmNhdChvKSksbi5sZW5ndGg+MCYmci5nZXRVc2VyUHJvZmlsZSh7dXNlcklETGlzdDpufSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhO2d1KG4pP24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fY29udmVyc2F0aW9uTWFwLmdldChcIkMyQ1wiLmNvbmNhdChlLnVzZXJJRCkpLnVzZXJQcm9maWxlPWV9KSk6dC5fY29udmVyc2F0aW9uTWFwLmdldChcIkMyQ1wiLmNvbmNhdChuLnVzZXJJRCkpLnVzZXJQcm9maWxlPW59KSksby5sZW5ndGg+MCYmYS5nZXRHcm91cFByb2ZpbGVBZHZhbmNlKHtncm91cElETGlzdDpvLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIixcIkZhY2VVcmxcIl19fSkudGhlbigoZnVuY3Rpb24oZSl7ZS5kYXRhLnN1Y2Nlc3NHcm91cExpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49XCJHUk9VUFwiLmNvbmNhdChlLmdyb3VwSUQpO2lmKHQuX2NvbnZlcnNhdGlvbk1hcC5oYXMobikpe3ZhciBvPXQuX2NvbnZlcnNhdGlvbk1hcC5nZXQobik7RXUoby5ncm91cFByb2ZpbGUsZSxbXSxbbnVsbCx2b2lkIDAsXCJcIiwwLE5hTl0pLCFvLnN1YlR5cGUmJmUudHlwZSYmKG8uc3ViVHlwZT1lLnR5cGUpfX0pKX0pKX19fSx7a2V5OlwiX2dldENvbnZlcnNhdGlvbk9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49W10sbz1lLmZpbHRlcigoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sYXN0TXNnO3JldHVybiBwdSh0KX0pKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZSxuPWUudXNlcklEO3JldHVybiAxPT09dCYmXCJAVExTI05PVF9GT1VORFwiIT09biYmXCJAVExTI0VSUk9SXCIhPT1ufHwyPT09dH0pKS5tYXAoKGZ1bmN0aW9uKGUpe2lmKDE9PT1lLnR5cGUpe3ZhciBvPXt1c2VySUQ6ZS51c2VySUQsbmljazplLnBlZXJOaWNrLGF2YXRhcjplLnBlZXJBdmF0YXJ9O3JldHVybiBuLnB1c2gobykse2NvbnZlcnNhdGlvbklEOlwiQzJDXCIuY29uY2F0KGUudXNlcklEKSx0eXBlOlwiQzJDXCIsbGFzdE1lc3NhZ2U6e2xhc3RUaW1lOmUudGltZSxsYXN0U2VxdWVuY2U6ZS5zZXF1ZW5jZSxmcm9tQWNjb3VudDplLmxhc3RDMkNNc2dGcm9tQWNjb3VudCxtZXNzYWdlRm9yU2hvdzplLm1lc3NhZ2VTaG93LHR5cGU6ZS5sYXN0TXNnLmVsZW1lbnRzWzBdP2UubGFzdE1zZy5lbGVtZW50c1swXS50eXBlOm51bGwscGF5bG9hZDplLmxhc3RNc2cuZWxlbWVudHNbMF0/ZS5sYXN0TXNnLmVsZW1lbnRzWzBdLmNvbnRlbnQ6bnVsbCxjbG91ZEN1c3RvbURhdGE6ZS5sYXN0TXNnLmNsb3VkQ3VzdG9tRGF0YXx8XCJcIixpc1Jldm9rZWQ6OD09PWUubGFzdE1lc3NhZ2VGbGFnLG9ubGluZU9ubHlGbGFnOiExLG5pY2s6XCJcIixuYW1lQ2FyZDpcIlwifSx1c2VyUHJvZmlsZTpuZXcga20obykscGVlclJlYWRUaW1lOmUuYzJjUGVlclJlYWRUaW1lLGlzUGlubmVkOjE9PT1lLmlzUGlubmVkLG1lc3NhZ2VSZW1pbmRUeXBlOlwiXCJ9fXJldHVybntjb252ZXJzYXRpb25JRDpcIkdST1VQXCIuY29uY2F0KGUuZ3JvdXBJRCksdHlwZTpcIkdST1VQXCIsbGFzdE1lc3NhZ2U6U24oe2xhc3RUaW1lOmUudGltZSxsYXN0U2VxdWVuY2U6ZS5tZXNzYWdlUmVhZFNlcStlLnVucmVhZENvdW50LGZyb21BY2NvdW50OmUubXNnR3JvdXBGcm9tQWNjb3VudCxtZXNzYWdlRm9yU2hvdzplLm1lc3NhZ2VTaG93fSx0Ll9wYXRjaFR5cGVBbmRQYXlsb2FkKGUpLHtjbG91ZEN1c3RvbURhdGE6ZS5sYXN0TXNnLmNsb3VkQ3VzdG9tRGF0YXx8XCJcIixpc1Jldm9rZWQ6Mj09PWUubGFzdE1lc3NhZ2VGbGFnLG9ubGluZU9ubHlGbGFnOiExLG5pY2s6ZS5zZW5kZXJOaWNrfHxcIlwiLG5hbWVDYXJkOmUuc2VuZGVyTmFtZUNhcmR8fFwiXCJ9KSxncm91cFByb2ZpbGU6bmV3IEdtKHtncm91cElEOmUuZ3JvdXBJRCxuYW1lOmUuZ3JvdXBOaWNrLGF2YXRhcjplLmdyb3VwSW1hZ2V9KSx1bnJlYWRDb3VudDplLnVucmVhZENvdW50LHBlZXJSZWFkVGltZTowLGlzUGlubmVkOjE9PT1lLmlzUGlubmVkLG1lc3NhZ2VSZW1pbmRUeXBlOlwiXCJ9fSkpO24ubGVuZ3RoPjAmJnRoaXMuZ2V0TW9kdWxlKGFsKS5vbkNvbnZlcnNhdGlvbnNQcm9maWxlVXBkYXRlZChuKTtyZXR1cm4gb319LHtrZXk6XCJfcGF0Y2hUeXBlQW5kUGF5bG9hZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUubGFzdE1zZyxuPXQuZXZlbnQsbz12b2lkIDA9PT1uP3ZvaWQgMDpuLHI9dC5lbGVtZW50cyxhPXZvaWQgMD09PXI/W106cixzPXQuZ3JvdXBUaXBzLGk9dm9pZCAwPT09cz97fTpzO2lmKCFodShvKSYmIVh1KGkpKXt2YXIgdT1uZXcgWF8oaSk7dS5zZXRFbGVtZW50KHt0eXBlOlluLk1TR19HUlBfVElQLGNvbnRlbnQ6U24oe30saS5lbGVtZW50cyx7Z3JvdXBQcm9maWxlOmkuZ3JvdXBQcm9maWxlfSl9KTt2YXIgYz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHUucGF5bG9hZCkpO3JldHVybiB1PW51bGwse3R5cGU6WW4uTVNHX0dSUF9USVAscGF5bG9hZDpjfX1yZXR1cm57dHlwZTphWzBdP2FbMF0udHlwZTpudWxsLHBheWxvYWQ6YVswXT9hWzBdLmNvbnRlbnQ6bnVsbH19fSx7a2V5OlwiZ2V0TG9jYWxNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKX19LHtrZXk6XCJkZWxldGVMb2NhbE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtlIGluc3RhbmNlb2YgWF8mJnRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5yZW1vdmUoZSl9fSx7a2V5Olwib25Db252ZXJzYXRpb25EZWxldGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uQ29udmVyc2F0aW9uRGVsZXRlZFwiKSksZ3UoZSkmJmUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50eXBlLG89ZS51c2VySUQscj1lLmdyb3VwSUQsYT1cIlwiOzE9PT1uP2E9XCJcIi5jb25jYXQoWW4uQ09OVl9DMkMpLmNvbmNhdChvKToyPT09biYmKGE9XCJcIi5jb25jYXQoWW4uQ09OVl9HUk9VUCkuY29uY2F0KHIpKSx0LmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uKGEpfSkpfX0se2tleTpcIm9uQ29udmVyc2F0aW9uUGlubmVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihndShlKSl7dmFyIG49ITE7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbyxyPWUudHlwZSxhPWUudXNlcklELHM9ZS5ncm91cElEOzE9PT1yP289dC5nZXRMb2NhbENvbnZlcnNhdGlvbihcIlwiLmNvbmNhdChZbi5DT05WX0MyQykuY29uY2F0KGEpKToyPT09ciYmKG89dC5nZXRMb2NhbENvbnZlcnNhdGlvbihcIlwiLmNvbmNhdChZbi5DT05WX0dST1VQKS5jb25jYXQocykpKSxvJiYoUWkubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5vbkNvbnZlcnNhdGlvblBpbm5lZCBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KG8uY29udmVyc2F0aW9uSUQsXCIgaXNQaW5uZWQ6XCIpLmNvbmNhdChvLmlzUGlubmVkKSksby5pc1Bpbm5lZHx8KG8uaXNQaW5uZWQ9ITAsbj0hMCkpfSkpLG4mJnRoaXMuX3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50KCl9fX0se2tleTpcIm9uQ29udmVyc2F0aW9uVW5waW5uZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKGd1KGUpKXt2YXIgbj0hMTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvLHI9ZS50eXBlLGE9ZS51c2VySUQscz1lLmdyb3VwSUQ7MT09PXI/bz10LmdldExvY2FsQ29udmVyc2F0aW9uKFwiXCIuY29uY2F0KFluLkNPTlZfQzJDKS5jb25jYXQoYSkpOjI9PT1yJiYobz10LmdldExvY2FsQ29udmVyc2F0aW9uKFwiXCIuY29uY2F0KFluLkNPTlZfR1JPVVApLmNvbmNhdChzKSkpLG8mJihRaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLm9uQ29udmVyc2F0aW9uVW5waW5uZWQgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChvLmNvbnZlcnNhdGlvbklELFwiIGlzUGlubmVkOlwiKS5jb25jYXQoby5pc1Bpbm5lZCkpLG8uaXNQaW5uZWQmJihvLmlzUGlubmVkPSExLG49ITApKX0pKSxuJiZ0aGlzLl9zb3J0Q29udmVyc2F0aW9uTGlzdEFuZEVtaXRFdmVudCgpfX19LHtrZXk6XCJnZXRNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvbnZlcnNhdGlvbklELG89ZS5uZXh0UmVxTWVzc2FnZUlELHI9ZS5jb3VudCxhPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRNZXNzYWdlTGlzdFwiKSxzPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24obiksaT1cIlwiO2lmKHMmJnMuZ3JvdXBQcm9maWxlJiYoaT1zLmdyb3VwUHJvZmlsZS50eXBlKSx3dShpKSlyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KGEsXCIgbm90IGF2YWlsYWJsZSBpbiBhdmNoYXRyb29tLiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KG4pKSxpbSh7bWVzc2FnZUxpc3Q6W10sbmV4dFJlcU1lc3NhZ2VJRDpcIlwiLGlzQ29tcGxldGVkOiEwfSk7KGh1KHIpfHxyPjE1KSYmKHI9MTUpO3ZhciB1PXRoaXMuX2NvbXB1dGVMZWZ0Q291bnQoe2NvbnZlcnNhdGlvbklEOm4sbmV4dFJlcU1lc3NhZ2VJRDpvfSk7cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdChhLFwiIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobixcIiBsZWZ0Q291bnQ6XCIpLmNvbmNhdCh1LFwiIGNvdW50OlwiKS5jb25jYXQocixcIiBuZXh0UmVxTWVzc2FnZUlEOlwiKS5jb25jYXQobykpLHRoaXMuX25lZWRHZXRIaXN0b3J5KHtjb252ZXJzYXRpb25JRDpuLGxlZnRDb3VudDp1LGNvdW50OnJ9KT90aGlzLmdldEhpc3RvcnlNZXNzYWdlcyh7Y29udmVyc2F0aW9uSUQ6bixuZXh0UmVxTWVzc2FnZUlEOm8sY291bnQ6MjB9KS50aGVuKChmdW5jdGlvbigpe3JldHVybiB1PXQuX2NvbXB1dGVMZWZ0Q291bnQoe2NvbnZlcnNhdGlvbklEOm4sbmV4dFJlcU1lc3NhZ2VJRDpvfSksUV8odC5fY29tcHV0ZVJlc3VsdCh7Y29udmVyc2F0aW9uSUQ6bixuZXh0UmVxTWVzc2FnZUlEOm8sY291bnQ6cixsZWZ0Q291bnQ6dX0pKX0pKTooUWkubG9nKFwiXCIuY29uY2F0KGEsXCIuZ2V0TWVzc2FnZUxpc3QgZ2V0IG1lc3NhZ2UgbGlzdCBmcm9tIG1lbW9yeVwiKSksdGhpcy5tb2RpZnlNZXNzYWdlTGlzdChuKSxpbSh0aGlzLl9jb21wdXRlUmVzdWx0KHtjb252ZXJzYXRpb25JRDpuLG5leHRSZXFNZXNzYWdlSUQ6byxjb3VudDpyLGxlZnRDb3VudDp1fSkpKX19LHtrZXk6XCJfY29tcHV0ZUxlZnRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLm5leHRSZXFNZXNzYWdlSUQ7cmV0dXJuIG4/dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QodCkuZmluZEluZGV4KChmdW5jdGlvbihlKXtyZXR1cm4gZS5JRD09PW59KSk6dGhpcy5fZ2V0TWVzc2FnZUxpc3RTaXplKHQpfX0se2tleTpcIl9nZXRNZXNzYWdlTGlzdFNpemVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSkubGVuZ3RofX0se2tleTpcIl9uZWVkR2V0SGlzdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLmxlZnRDb3VudCxvPWUuY291bnQscj10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKHQpLGE9XCJcIjtyZXR1cm4gciYmci5ncm91cFByb2ZpbGUmJihhPXIuZ3JvdXBQcm9maWxlLnR5cGUpLCFxdSh0KSYmIXd1KGEpJiYobjxvJiYhdGhpcy5fY29tcGxldGVkTWFwLmhhcyh0KSl9fSx7a2V5OlwiX2NvbXB1dGVSZXN1bHRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5uZXh0UmVxTWVzc2FnZUlELG89ZS5jb3VudCxyPWUubGVmdENvdW50LGE9dGhpcy5fY29tcHV0ZU1lc3NhZ2VMaXN0KHtjb252ZXJzYXRpb25JRDp0LG5leHRSZXFNZXNzYWdlSUQ6bixjb3VudDpvfSkscz10aGlzLl9jb21wdXRlSXNDb21wbGV0ZWQoe2NvbnZlcnNhdGlvbklEOnQsbGVmdENvdW50OnIsY291bnQ6b30pLGk9dGhpcy5fY29tcHV0ZU5leHRSZXFNZXNzYWdlSUQoe21lc3NhZ2VMaXN0OmEsaXNDb21wbGV0ZWQ6cyxjb252ZXJzYXRpb25JRDp0fSksdT1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2NvbXB1dGVSZXN1bHQuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQodCk7cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdCh1LFwiIGxlZnRDb3VudDpcIikuY29uY2F0KHIsXCIgY291bnQ6XCIpLmNvbmNhdChvLFwiIG5leHRSZXFNZXNzYWdlSUQ6XCIpLmNvbmNhdChpLFwiIGlzQ29tcGxldGVkOlwiKS5jb25jYXQocykpLHttZXNzYWdlTGlzdDphLG5leHRSZXFNZXNzYWdlSUQ6aSxpc0NvbXBsZXRlZDpzfX19LHtrZXk6XCJfY29tcHV0ZU1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubmV4dFJlcU1lc3NhZ2VJRCxvPWUuY291bnQscj10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdCh0KSxhPXRoaXMuX2NvbXB1dGVJbmRleEVuZCh7bmV4dFJlcU1lc3NhZ2VJRDpuLG1lc3NhZ2VMaXN0OnJ9KSxzPXRoaXMuX2NvbXB1dGVJbmRleFN0YXJ0KHtpbmRleEVuZDphLGNvdW50Om99KTtyZXR1cm4gci5zbGljZShzLGEpfX0se2tleTpcIl9jb21wdXRlTmV4dFJlcU1lc3NhZ2VJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUubWVzc2FnZUxpc3Qsbj1lLmlzQ29tcGxldGVkLG89ZS5jb252ZXJzYXRpb25JRDtpZighbilyZXR1cm4gMD09PXQubGVuZ3RoP1wiXCI6dFswXS5JRDt2YXIgcj10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdChvKTtyZXR1cm4gMD09PXIubGVuZ3RoP1wiXCI6clswXS5JRH19LHtrZXk6XCJfY29tcHV0ZUluZGV4RW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXNzYWdlTGlzdCxuPXZvaWQgMD09PXQ/W106dCxvPWUubmV4dFJlcU1lc3NhZ2VJRDtyZXR1cm4gbz9uLmZpbmRJbmRleCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuSUQ9PT1vfSkpOm4ubGVuZ3RofX0se2tleTpcIl9jb21wdXRlSW5kZXhTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuaW5kZXhFbmQsbj1lLmNvdW50O3JldHVybiB0Pm4/dC1uOjB9fSx7a2V5OlwiX2NvbXB1dGVJc0NvbXBsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQ7cmV0dXJuISEoZS5sZWZ0Q291bnQ8PWUuY291bnQmJnRoaXMuX2NvbXBsZXRlZE1hcC5oYXModCkpfX0se2tleTpcImdldEhpc3RvcnlNZXNzYWdlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLm5leHRSZXFNZXNzYWdlSUQ7aWYodD09PVluLkNPTlZfU1lTVEVNKXJldHVybiBpbSgpO2UuY291bnQ/ZS5jb3VudD4yMCYmKGUuY291bnQ9MjApOmUuY291bnQ9MTU7dmFyIG89dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsT2xkZXN0TWVzc2FnZUJ5Q29udmVyc2F0aW9uSUQodCk7b3x8KChvPXt9KS50aW1lPTAsby5zZXF1ZW5jZT0wLDA9PT10LmluZGV4T2YoWW4uQ09OVl9DMkMpPyhvLnRvPXQucmVwbGFjZShZbi5DT05WX0MyQyxcIlwiKSxvLmNvbnZlcnNhdGlvblR5cGU9WW4uQ09OVl9DMkMpOjA9PT10LmluZGV4T2YoWW4uQ09OVl9HUk9VUCkmJihvLnRvPXQucmVwbGFjZShZbi5DT05WX0dST1VQLFwiXCIpLG8uY29udmVyc2F0aW9uVHlwZT1Zbi5DT05WX0dST1VQKSk7dmFyIHI9XCJcIixhPW51bGwscz10aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuaGFzKHQpO3N3aXRjaChvLmNvbnZlcnNhdGlvblR5cGUpe2Nhc2UgWW4uQ09OVl9DMkM6cmV0dXJuIHI9dC5yZXBsYWNlKFluLkNPTlZfQzJDLFwiXCIpLChhPXRoaXMuZ2V0TW9kdWxlKHNsKSk/YS5nZXRSb2FtaW5nTWVzc2FnZSh7Y29udmVyc2F0aW9uSUQ6ZS5jb252ZXJzYXRpb25JRCxwZWVyQWNjb3VudDpyLGNvdW50OmUuY291bnQsbGFzdE1lc3NhZ2VUaW1lOnM/dGhpcy5fcm9hbWluZ01lc3NhZ2VLZXlBbmRUaW1lTWFwLmdldCh0KS5sYXN0TWVzc2FnZVRpbWU6MCxtZXNzYWdlS2V5OnM/dGhpcy5fcm9hbWluZ01lc3NhZ2VLZXlBbmRUaW1lTWFwLmdldCh0KS5tZXNzYWdlS2V5OlwiXCJ9KTp1bSh7Y29kZTpscC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpkcC5DQU5OT1RfRklORF9NT0RVTEV9KTtjYXNlIFluLkNPTlZfR1JPVVA6cmV0dXJuKGE9dGhpcy5nZXRNb2R1bGUoaWwpKT9hLmdldFJvYW1pbmdNZXNzYWdlKHtjb252ZXJzYXRpb25JRDplLmNvbnZlcnNhdGlvbklELGdyb3VwSUQ6by50byxjb3VudDplLmNvdW50LHNlcXVlbmNlOm4mJiExPT09by5fb25saW5lT25seUZsYWc/by5zZXF1ZW5jZS0xOm8uc2VxdWVuY2V9KTp1bSh7Y29kZTpscC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpkcC5DQU5OT1RfRklORF9NT0RVTEV9KTtkZWZhdWx0OnJldHVybiBpbSgpfX19LHtrZXk6XCJwYXRjaENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihlKTtpZih0KXt2YXIgbj10Lmxhc3RNZXNzYWdlLG89bi5tZXNzYWdlRm9yU2hvdyxyPW4ucGF5bG9hZDtpZihYdShvKXx8WHUocikpe3ZhciBhPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpO2lmKDA9PT1hLmxlbmd0aClyZXR1cm47dmFyIHM9YVthLmxlbmd0aC0xXTtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnBhdGNoQ29udmVyc2F0aW9uTGFzdE1lc3NhZ2UgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIHBheWxvYWQ6XCIpLHMucGF5bG9hZCksdC51cGRhdGVMYXN0TWVzc2FnZShzKX19fX0se2tleTpcInN0b3JlUm9hbWluZ01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXSx0PWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLG49dC5zdGFydHNXaXRoKFluLkNPTlZfQzJDKT9Zbi5DT05WX0MyQzpZbi5DT05WX0dST1VQLG89bnVsbCxyPVtdLGE9MCxzPWUubGVuZ3RoLGk9bnVsbCx1PW49PT1Zbi5DT05WX0dST1VQLGM9dGhpcy5nZXRNb2R1bGUoZmwpLGw9ZnVuY3Rpb24oKXthPXU/ZS5sZW5ndGgtMTowLHM9dT8wOmUubGVuZ3RofSxkPWZ1bmN0aW9uKCl7dT8tLWE6KythfSxwPWZ1bmN0aW9uKCl7cmV0dXJuIHU/YT49czphPHN9O2ZvcihsKCk7cCgpO2QoKSlpZih1JiYxPT09ZVthXS5zZXF1ZW5jZSYmdGhpcy5zZXRDb21wbGV0ZWQodCksMSE9PWVbYV0uaXNQbGFjZU1lc3NhZ2UpaWYoKG89bmV3IFhfKGVbYV0pKS50bz1lW2FdLnRvLG8uaXNTeXN0ZW1NZXNzYWdlPSEhZVthXS5pc1N5c3RlbU1lc3NhZ2Usby5jb252ZXJzYXRpb25UeXBlPW4sND09PWVbYV0uZXZlbnQ/aT17dHlwZTpZbi5NU0dfR1JQX1RJUCxjb250ZW50OlNuKHt9LGVbYV0uZWxlbWVudHMse2dyb3VwUHJvZmlsZTplW2FdLmdyb3VwUHJvZmlsZX0pfTooZVthXS5lbGVtZW50cz1jLnBhcnNlRWxlbWVudHMoZVthXS5lbGVtZW50cyxlW2FdLmZyb20pLGk9ZVthXS5lbGVtZW50cyksdXx8by5zZXROaWNrQW5kQXZhdGFyKHtuaWNrOmVbYV0ubmljayxhdmF0YXI6ZVthXS5hdmF0YXJ9KSxYdShpKSl7dmFyIGc9bmV3IERwKGVnKTtnLnNldE1lc3NhZ2UoXCJmcm9tOlwiLmNvbmNhdChvLmZyb20sXCIgdG86XCIpLmNvbmNhdChvLnRvLFwiIHNlcXVlbmNlOlwiKS5jb25jYXQoby5zZXF1ZW5jZSxcIiBldmVudDpcIikuY29uY2F0KGVbYV0uZXZlbnQpKSxnLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TGV2ZWwoXCJ3YXJuaW5nXCIpLmVuZCgpfWVsc2Ugby5zZXRFbGVtZW50KGkpLG8ucmVJbml0aWFsaXplKHRoaXMuZ2V0TXlVc2VySUQoKSksci5wdXNoKG8pO3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIudW5zaGlmdChyKSxsPWQ9cD1udWxsLHJ9fSx7a2V5OlwiZmluZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmZpbmRNZXNzYWdlKGUpfX0se2tleTpcInNldE1lc3NhZ2VSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPShlLm1lc3NhZ2VJRCx0aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKHQpKTtpZihRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldE1lc3NhZ2VSZWFkIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQodCxcIiB1bnJlYWRDb3VudDpcIikuY29uY2F0KG4/bi51bnJlYWRDb3VudDowKSksIW4pcmV0dXJuIGltKCk7aWYobi50eXBlIT09WW4uQ09OVl9HUk9VUHx8WHUobi5ncm91cEF0SW5mb0xpc3QpfHx0aGlzLmRlbGV0ZUdyb3VwQXRUaXBzKHQpLDA9PT1uLnVucmVhZENvdW50KXJldHVybiBpbSgpO3ZhciBvPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbExhc3RNZXNzYWdlKHQpLHI9bi5sYXN0TWVzc2FnZS5sYXN0VGltZTtvJiZyPG8udGltZSYmKHI9by50aW1lKTt2YXIgYT1uLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZTtvJiZhPG8uc2VxdWVuY2UmJihhPW8uc2VxdWVuY2UpO3ZhciBzPW51bGw7c3dpdGNoKG4udHlwZSl7Y2FzZSBZbi5DT05WX0MyQzpyZXR1cm4ocz10aGlzLmdldE1vZHVsZShzbCkpP3Muc2V0TWVzc2FnZVJlYWQoe2NvbnZlcnNhdGlvbklEOnQsbGFzdE1lc3NhZ2VUaW1lOnJ9KTp1bSh7Y29kZTpscC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpkcC5DQU5OT1RfRklORF9NT0RVTEV9KTtjYXNlIFluLkNPTlZfR1JPVVA6cmV0dXJuKHM9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpKT9zLnNldE1lc3NhZ2VSZWFkKHtjb252ZXJzYXRpb25JRDp0LGxhc3RNZXNzYWdlU2VxOmF9KTp1bSh7Y29kZTpscC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpkcC5DQU5OT1RfRklORF9NT0RVTEV9KTtjYXNlIFluLkNPTlZfU1lTVEVNOnJldHVybiBuLnVucmVhZENvdW50PTAsdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSxpbSgpO2RlZmF1bHQ6cmV0dXJuIGltKCl9fX0se2tleTpcInNldEFsbE1lc3NhZ2VSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldEFsbE1lc3NhZ2VSZWFkXCIpO3Quc2NvcGV8fCh0LnNjb3BlPVluLlJFQURfQUxMX01TRyksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb3B0aW9uczpcIiksdCk7dmFyIG89dGhpcy5fY3JlYXRlU2V0QWxsTWVzc2FnZVJlYWRQYWNrKHQpO2lmKDA9PT1vLnJlYWRBbGxDMkNNZXNzYWdlJiYwPT09by5ncm91cE1lc3NhZ2VSZWFkSW5mb0xpc3QubGVuZ3RoKXJldHVybiBpbSgpO3ZhciByPW5ldyBEcChwZyk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOk5kLHJlcXVlc3REYXRhOm99KS50aGVuKChmdW5jdGlvbihuKXt2YXIgbz1uLmRhdGEsYT1lLl9oYW5kbGVBbGxNZXNzYWdlUmVhZChvKTtyZXR1cm4gci5zZXRNZXNzYWdlKFwic2NvcGU6XCIuY29uY2F0KHQuc2NvcGUsXCIgZmFpbHVyZUdyb3VwczpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGEpKSkuc2V0TmV0d29ya1R5cGUoZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxpbSgpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtyZXR1cm4gZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1QbihlLDIpLG89blswXSxhPW5bMV07ci5zZXRFcnJvcih0LG8sYSkuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLHQpLHVtKHtjb2RlOnQmJnQuY29kZT90LmNvZGU6bHAuTUVTU0FHRV9VTlJFQURfQUxMX0ZBSUwsbWVzc2FnZTp0JiZ0Lm1lc3NhZ2U/dC5tZXNzYWdlOmRwLk1FU1NBR0VfVU5SRUFEX0FMTF9GQUlMfSl9KSl9fSx7a2V5OlwiX2dldENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlU2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxMYXN0TWVzc2FnZShlLmNvbnZlcnNhdGlvbklEKSxuPWUubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlO3JldHVybiB0JiZuPHQuc2VxdWVuY2UmJihuPXQuc2VxdWVuY2UpLG59fSx7a2V5OlwiX2dldENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlVGltZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbExhc3RNZXNzYWdlKGUuY29udmVyc2F0aW9uSUQpLG49ZS5sYXN0TWVzc2FnZS5sYXN0VGltZTtyZXR1cm4gdCYmbjx0LnRpbWUmJihuPXQudGltZSksbn19LHtrZXk6XCJfY3JlYXRlU2V0QWxsTWVzc2FnZVJlYWRQYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQsbj17cmVhZEFsbEMyQ01lc3NhZ2U6MCxncm91cE1lc3NhZ2VSZWFkSW5mb0xpc3Q6W119LG89ZS5zY29wZSxyPUJuKHRoaXMuX2NvbnZlcnNhdGlvbk1hcCk7dHJ5e2ZvcihyLnMoKTshKHQ9ci5uKCkpLmRvbmU7KXt2YXIgYT1Qbih0LnZhbHVlLDIpWzFdO2lmKGEudW5yZWFkQ291bnQ+MClpZihhLnR5cGU9PT1Zbi5DT05WX0MyQyYmMD09PW4ucmVhZEFsbEMyQ01lc3NhZ2Upe2lmKG89PT1Zbi5SRUFEX0FMTF9NU0cpbi5yZWFkQWxsQzJDTWVzc2FnZT0xO2Vsc2UgaWYobz09PVluLlJFQURfQUxMX0MyQ19NU0cpe24ucmVhZEFsbEMyQ01lc3NhZ2U9MTticmVha319ZWxzZSBpZihhLnR5cGU9PT1Zbi5DT05WX0dST1VQJiYobz09PVluLlJFQURfQUxMX0dST1VQX01TR3x8bz09PVluLlJFQURfQUxMX01TRykpe3ZhciBzPXRoaXMuX2dldENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlU2VxdWVuY2UoYSk7bi5ncm91cE1lc3NhZ2VSZWFkSW5mb0xpc3QucHVzaCh7Z3JvdXBJRDphLmdyb3VwUHJvZmlsZS5ncm91cElELG1lc3NhZ2VTZXF1ZW5jZTpzfSl9fX1jYXRjaChpKXtyLmUoaSl9ZmluYWxseXtyLmYoKX1yZXR1cm4gbn19LHtrZXk6XCJvblB1c2hlZEFsbE1lc3NhZ2VSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5faGFuZGxlQWxsTWVzc2FnZVJlYWQoZSl9fSx7a2V5OlwiX2hhbmRsZUFsbE1lc3NhZ2VSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncm91cE1lc3NhZ2VSZWFkSW5mb0xpc3Qsbj1lLnJlYWRBbGxDMkNNZXNzYWdlLG89dGhpcy5fcGFyc2VHcm91cFJlYWRJbmZvKHQpO3JldHVybiB0aGlzLl91cGRhdGVBbGxDb252ZXJzYXRpb25VbnJlYWRDb3VudCh7cmVhZEFsbEMyQ01lc3NhZ2U6bn0pPj0xJiZ0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpLG99fSx7a2V5OlwiX3BhcnNlR3JvdXBSZWFkSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVtdO2lmKGUmJmUubGVuZ3RoKWZvcih2YXIgbj0wLG89ZS5sZW5ndGg7bjxvO24rKyl7dmFyIHI9ZVtuXSxhPXIuZ3JvdXBJRCxzPXIuc2VxdWVuY2UsaT1yLnJldENvZGUsdT1yLmxhc3RNZXNzYWdlU2VxO2h1KGkpP3RoaXMuX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwLnNldChhLHUpOih0aGlzLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcC5zZXQoYSxzKSwwIT09aSYmdC5wdXNoKFwiXCIuY29uY2F0KGEsXCItXCIpLmNvbmNhdChzLFwiLVwiKS5jb25jYXQoaSkpKX1yZXR1cm4gdH19LHtrZXk6XCJfdXBkYXRlQWxsQ29udmVyc2F0aW9uVW5yZWFkQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdCxuPWUucmVhZEFsbEMyQ01lc3NhZ2Usbz0wLHI9Qm4odGhpcy5fY29udmVyc2F0aW9uTWFwKTt0cnl7Zm9yKHIucygpOyEodD1yLm4oKSkuZG9uZTspe3ZhciBhPVBuKHQudmFsdWUsMikscz1hWzBdLGk9YVsxXTtpZihpLnVucmVhZENvdW50Pj0xKXtpZigxPT09biYmaS50eXBlPT09WW4uQ09OVl9DMkMpe3ZhciB1PXRoaXMuX2dldENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlVGltZShpKTt0aGlzLnVwZGF0ZUlzUmVhZEFmdGVyUmVhZFJlcG9ydCh7Y29udmVyc2F0aW9uSUQ6cyxsYXN0TWVzc2FnZVRpbWU6dX0pfWVsc2UgaWYoaS50eXBlPT09WW4uQ09OVl9HUk9VUCl7dmFyIGM9cy5yZXBsYWNlKFluLkNPTlZfR1JPVVAsXCJcIik7aWYodGhpcy5fcmVtb3RlR3JvdXBSZWFkU2VxdWVuY2VNYXAuaGFzKGMpKXt2YXIgbD10aGlzLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcC5nZXQoYyksZD10aGlzLl9nZXRDb252ZXJzYXRpb25MYXN0TWVzc2FnZVNlcXVlbmNlKGkpO3RoaXMudXBkYXRlSXNSZWFkQWZ0ZXJSZWFkUmVwb3J0KHtjb252ZXJzYXRpb25JRDpzLHJlbW90ZVJlYWRTZXF1ZW5jZTpsfSksZD49bCYmdGhpcy5fcmVtb3RlR3JvdXBSZWFkU2VxdWVuY2VNYXAuZGVsZXRlKGMpfX10aGlzLnVwZGF0ZVVucmVhZENvdW50KHMsITEpJiYobys9MSl9fX1jYXRjaChwKXtyLmUocCl9ZmluYWxseXtyLmYoKX1yZXR1cm4gb319LHtrZXk6XCJpc1JlbW90ZVJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5zZXF1ZW5jZSxvPXQucmVwbGFjZShZbi5DT05WX0dST1VQLFwiXCIpLHI9ITE7aWYodGhpcy5fcmVtb3RlR3JvdXBSZWFkU2VxdWVuY2VNYXAuaGFzKG8pKXt2YXIgYT10aGlzLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcC5nZXQobyk7bjw9YSYmKHI9ITAsUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5pc1JlbW90ZVJlYWQgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdCh0LFwiIG1lc3NhZ2VTZXF1ZW5jZTpcIikuY29uY2F0KG4sXCIgcmVtb3RlUmVhZFNlcXVlbmNlOlwiKS5jb25jYXQoYSkpKSxuPj1hKzEwJiZ0aGlzLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcC5kZWxldGUobyl9cmV0dXJuIHJ9fSx7a2V5OlwidXBkYXRlSXNSZWFkQWZ0ZXJSZWFkUmVwb3J0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubGFzdE1lc3NhZ2VTZXEsbz1lLmxhc3RNZXNzYWdlVGltZSxyPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KHQpO2lmKDAhPT1yLmxlbmd0aClmb3IodmFyIGEscz1yLmxlbmd0aC0xO3M+PTA7cy0tKWlmKGE9cltzXSwhKG8mJmEudGltZT5vfHxuJiZhLnNlcXVlbmNlPm4pKXtpZihcImluXCI9PT1hLmZsb3cmJmEuaXNSZWFkKWJyZWFrO2Euc2V0SXNSZWFkKCEwKX19fSx7a2V5OlwidXBkYXRlVW5yZWFkQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLG49ITEsbz10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpLHI9dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSk7aWYobyl7dmFyIGE9by51bnJlYWRDb3VudCxzPXIuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hZS5pc1JlYWQmJiFlLl9vbmxpbmVPbmx5RmxhZyYmIWUuaXNEZWxldGVkfSkpLmxlbmd0aDtyZXR1cm4gYSE9PXMmJihvLnVucmVhZENvdW50PXMsbj0hMCxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZVVucmVhZENvdW50IGZyb20gXCIpLmNvbmNhdChhLFwiIHRvIFwiKS5jb25jYXQocyxcIiwgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlKSksITA9PT10JiZ0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpKSxufX19LHtrZXk6XCJ1cGRhdGVSZWFkUmVjZWlwdEluZm9cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYoIVh1KHQpKXt2YXIgbz1bXSxyPVwiXCIuY29uY2F0KFluLkNPTlZfR1JPVVApLmNvbmNhdChlKTt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBhPXQudGlueUlELHM9dC5jbGllbnRUaW1lLGk9dC5yYW5kb20sdT10LnJlYWRDb3VudCxjPXQudW5yZWFkQ291bnQsbD1cIlwiLmNvbmNhdChhLFwiLVwiKS5jb25jYXQocyxcIi1cIikuY29uY2F0KGkpLGQ9bi5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZShyLGwpLHA9e2dyb3VwSUQ6ZSxtZXNzYWdlSUQ6bCxyZWFkQ291bnQ6MCx1bnJlYWRDb3VudDowfTtkJiYoY3UodSkmJihkLnJlYWRSZWNlaXB0SW5mby5yZWFkQ291bnQ9dSxwLnJlYWRDb3VudD11KSxjdShjKSYmKGQucmVhZFJlY2VpcHRJbmZvLnVucmVhZENvdW50PWMscC51bnJlYWRDb3VudD1jKSxvLnB1c2gocCkpfSkpLG8ubGVuZ3RoPjAmJnRoaXMuZW1pdE91dGVyRXZlbnQoV24uTUVTU0FHRV9SRUFEX1JFQ0VJUFRfUkVDRUlWRUQsbyl9fX0se2tleTpcInJlY29tcHV0ZUdyb3VwVW5yZWFkQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5jb3VudCxvPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24odCk7aWYobyl7dmFyIHI9by51bnJlYWRDb3VudCxhPXItbjthPDAmJihhPTApLG8udW5yZWFkQ291bnQ9YSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlY29tcHV0ZUdyb3VwVW5yZWFkQ291bnQgZnJvbSBcIikuY29uY2F0KHIsXCIgdG8gXCIpLmNvbmNhdChhLFwiLCBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KHQpKX19fSx7a2V5OlwidXBkYXRlSXNSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihlKSxuPXRoaXMuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKTtpZih0JiYwIT09bi5sZW5ndGgmJiFxdSh0LnR5cGUpKXtmb3IodmFyIG89W10scj0wLGE9bi5sZW5ndGg7cjxhO3IrKylcImluXCIhPT1uW3JdLmZsb3c/XCJvdXRcIiE9PW5bcl0uZmxvd3x8bltyXS5pc1JlYWR8fG5bcl0uc2V0SXNSZWFkKCEwKTpvLnB1c2gobltyXSk7dmFyIHM9MDtpZih0LnR5cGU9PT1Zbi5DT05WX0MyQyl7dmFyIGk9by5zbGljZSgtdC51bnJlYWRDb3VudCkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5pc1Jldm9rZWR9KSkubGVuZ3RoO3M9by5sZW5ndGgtdC51bnJlYWRDb3VudC1pfWVsc2Ugcz1vLmxlbmd0aC10LnVucmVhZENvdW50O2Zvcih2YXIgdT0wO3U8cyYmIW9bdV0uaXNSZWFkO3UrKylvW3VdLnNldElzUmVhZCghMCl9fX0se2tleTpcImRlbGV0ZUdyb3VwQXRUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUdyb3VwQXRUaXBzXCIpO1FpLmxvZyhcIlwiLmNvbmNhdCh0KSk7dmFyIG49dGhpcy5fY29udmVyc2F0aW9uTWFwLmdldChlKTtpZighbilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dmFyIG89bi5ncm91cEF0SW5mb0xpc3Q7aWYoMD09PW8ubGVuZ3RoKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt2YXIgcj10aGlzLmdldE15VXNlcklEKCk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnBkLHJlcXVlc3REYXRhOnttZXNzYWdlTGlzdFRvRGVsZXRlOm8ubWFwKChmdW5jdGlvbihlKXtyZXR1cm57ZnJvbTplLmZyb20sdG86cixtZXNzYWdlU2VxOmUuX19zZXF1ZW5jZSxtZXNzYWdlUmFuZG9tOmUuX19yYW5kb20sZ3JvdXBJRDplLmdyb3VwSUR9fSkpfX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdCh0LFwiIG9rLiBjb3VudDpcIikuY29uY2F0KG8ubGVuZ3RoKSksbi5jbGVhckdyb3VwQXRJbmZvTGlzdCgpLFByb21pc2UucmVzb2x2ZSgpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gUWkuZXJyb3IoXCJcIi5jb25jYXQodCxcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJhcHBlbmRUb01lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnB1c2hJbihlKX19LHtrZXk6XCJzZXRNZXNzYWdlUmFuZG9tXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zaW5nbHlMaW5rZWRMaXN0LnNldChlLnJhbmRvbSl9fSx7a2V5OlwiZGVsZXRlTWVzc2FnZVJhbmRvbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuc2luZ2x5TGlua2VkTGlzdC5kZWxldGUoZS5yYW5kb20pfX0se2tleTpcInB1c2hJbnRvTWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuISghdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnB1c2hJbih0LG4pfHx0aGlzLl9pc01lc3NhZ2VGcm9tQ3VycmVudEluc3RhbmNlKHQpJiYhbikmJihlLnB1c2godCksITApfX0se2tleTpcIl9pc01lc3NhZ2VGcm9tQ3VycmVudEluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2luZ2x5TGlua2VkTGlzdC5oYXMoZS5yYW5kb20pfX0se2tleTpcInJldm9rZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnJldm9rZShlLHQsbil9fSx7a2V5OlwiZ2V0UGVlclJlYWRUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3BlZXJSZWFkVGltZU1hcC5nZXQoZSl9fSx7a2V5OlwicmVjb3JkUGVlclJlYWRUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9wZWVyUmVhZFRpbWVNYXAuaGFzKGUpP3RoaXMuX3BlZXJSZWFkVGltZU1hcC5nZXQoZSk8dCYmdGhpcy5fcGVlclJlYWRUaW1lTWFwLnNldChlLHQpOnRoaXMuX3BlZXJSZWFkVGltZU1hcC5zZXQoZSx0KX19LHtrZXk6XCJ1cGRhdGVNZXNzYWdlSXNQZWVyUmVhZFByb3BlcnR5XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZihlLnN0YXJ0c1dpdGgoWW4uQ09OVl9DMkMpJiZ0PjApe3ZhciBuPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci51cGRhdGVNZXNzYWdlSXNQZWVyUmVhZFByb3BlcnR5KGUsdCk7bi5sZW5ndGg+MCYmdGhpcy5lbWl0T3V0ZXJFdmVudChXbi5NRVNTQUdFX1JFQURfQllfUEVFUixuKX19fSx7a2V5OlwidXBkYXRlTWVzc2FnZUlzTW9kaWZpZWRQcm9wZXJ0eVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci51cGRhdGVNZXNzYWdlSXNNb2RpZmllZFByb3BlcnR5KGUpfX0se2tleTpcInNldENvbXBsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0Q29tcGxldGVkLiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUpKSx0aGlzLl9jb21wbGV0ZWRNYXAuc2V0KGUsITApfX0se2tleTpcInVwZGF0ZVJvYW1pbmdNZXNzYWdlS2V5QW5kVGltZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuc2V0KGUse21lc3NhZ2VLZXk6dCxsYXN0TWVzc2FnZVRpbWU6bn0pfX0se2tleTpcImdldENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldENvbnZlcnNhdGlvbkxpc3RcIiksbz1cInBhZ2luZ1N0YXR1czpcIi5jb25jYXQodGhpcy5fcGFnaW5nU3RhdHVzLFwiLCBsb2NhbCBjb252ZXJzYXRpb24gY291bnQ6XCIpLmNvbmNhdCh0aGlzLl9jb252ZXJzYXRpb25NYXAuc2l6ZSxcIiwgb3B0aW9uczpcIikuY29uY2F0KGUpO2lmKFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiLiBcIikuY29uY2F0KG8pKSx0aGlzLl9wYWdpbmdTdGF0dXM9PT14Yy5SRUpFQ1RFRCl7dmFyIHI9bmV3IERwKHNnKTtyZXR1cm4gci5zZXRNZXNzYWdlKG8pLHRoaXMuX3N5bmNDb252ZXJzYXRpb25MaXN0KCkudGhlbigoZnVuY3Rpb24oKXtyLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCk7dmFyIG49dC5fZ2V0Q29udmVyc2F0aW9uTGlzdChlKTtyZXR1cm4gUV8oe2NvbnZlcnNhdGlvbkxpc3Q6bn0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxhPW5bMV07ci5zZXRFcnJvcihlLG8sYSkuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX1pZigwPT09dGhpcy5fY29udmVyc2F0aW9uTWFwLnNpemUpe3ZhciBhPW5ldyBEcChzZyk7cmV0dXJuIGEuc2V0TWVzc2FnZShvKSx0aGlzLl9zeW5jQ29udmVyc2F0aW9uTGlzdCgpLnRoZW4oKGZ1bmN0aW9uKCl7YS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpO3ZhciBuPXQuX2dldENvbnZlcnNhdGlvbkxpc3QoZSk7cmV0dXJuIFFfKHtjb252ZXJzYXRpb25MaXN0Om59KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9dmFyIHM9dGhpcy5fZ2V0Q29udmVyc2F0aW9uTGlzdChlKTtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KG4sXCIuIHJldHVybmVkIGNvbnZlcnNhdGlvbiBjb3VudDpcIikuY29uY2F0KHMubGVuZ3RoKSksaW0oe2NvbnZlcnNhdGlvbkxpc3Q6c30pfX0se2tleTpcIl9nZXRDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihodShlKSlyZXR1cm4gdGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbkxpc3QoKTtpZihndShlKSl7dmFyIG49W107cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYodC5fY29udmVyc2F0aW9uTWFwLmhhcyhlKSl7dmFyIG89dC5nZXRMb2NhbENvbnZlcnNhdGlvbihlKTtuLnB1c2gobyl9fSkpLG59fX0se2tleTpcIl9oYW5kbGVDMkNQZWVyUmVhZFRpbWVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQ9Qm4odGhpcy5fY29udmVyc2F0aW9uTWFwKTt0cnl7Zm9yKHQucygpOyEoZT10Lm4oKSkuZG9uZTspe3ZhciBuPVBuKGUudmFsdWUsMiksbz1uWzBdLHI9blsxXTtyLnR5cGU9PT1Zbi5DT05WX0MyQyYmKFFpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5faGFuZGxlQzJDUGVlclJlYWRUaW1lIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobyxcIiBwZWVyUmVhZFRpbWU6XCIpLmNvbmNhdChyLnBlZXJSZWFkVGltZSkpLHRoaXMucmVjb3JkUGVlclJlYWRUaW1lKG8sci5wZWVyUmVhZFRpbWUpKX19Y2F0Y2goYSl7dC5lKGEpfWZpbmFsbHl7dC5mKCl9fX0se2tleTpcImdldENvbnZlcnNhdGlvblByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXM7aWYoKHQ9dGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhlKT90aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGUpOm5ldyBQbSh7Y29udmVyc2F0aW9uSUQ6ZSx0eXBlOmUuc2xpY2UoMCwzKT09PVluLkNPTlZfQzJDP1luLkNPTlZfQzJDOlluLkNPTlZfR1JPVVB9KSkuX2lzSW5mb0NvbXBsZXRlZHx8dC50eXBlPT09WW4uQ09OVl9TWVNURU0pcmV0dXJuIGltKHtjb252ZXJzYXRpb246dH0pO3ZhciBvPW5ldyBEcChpZykscj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiKTtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KHIsXCIuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSxcIiByZW1hcms6XCIpLmNvbmNhdCh0LnJlbWFyayxcIiBsYXN0TWVzc2FnZTpcIiksdC5sYXN0TWVzc2FnZSksdGhpcy5fdXBkYXRlVXNlck9yR3JvdXBQcm9maWxlQ29tcGxldGVseSh0KS50aGVuKChmdW5jdGlvbihhKXtvLnNldE5ldHdvcmtUeXBlKG4uZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImNvbnZlcnNhdGlvbklEOlwiLmNvbmNhdChlLFwiIHVucmVhZENvdW50OlwiKS5jb25jYXQoYS5kYXRhLmNvbnZlcnNhdGlvbi51bnJlYWRDb3VudCkpLmVuZCgpO3ZhciBzPW4uZ2V0TW9kdWxlKHVsKTtpZihzJiZ0LnR5cGU9PT1Zbi5DT05WX0MyQyl7dmFyIGk9ZS5yZXBsYWNlKFluLkNPTlZfQzJDLFwiXCIpO2lmKHMuaXNNeUZyaWVuZChpKSl7dmFyIHU9cy5nZXRGcmllbmRSZW1hcmsoaSk7dC5yZW1hcmshPT11JiYodC5yZW1hcms9dSxRaS5sb2coXCJcIi5jb25jYXQocixcIi4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIHBhdGNoIHJlbWFyazpcIikuY29uY2F0KHQucmVtYXJrKSkpfX1yZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KHIsXCIgb2suIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSkpLGF9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3JldHVybiBuLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciByPVBuKG4sMiksYT1yWzBdLHM9clsxXTtvLnNldEVycm9yKHQsYSxzKS5zZXRNZXNzYWdlKFwiY29udmVyc2F0aW9uSUQ6XCIuY29uY2F0KGUpKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChyLFwiIGZhaWxlZC4gZXJyb3I6XCIpLHQpLHVtKHQpfSkpfX0se2tleTpcIl91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGVDb21wbGV0ZWx5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZS50eXBlPT09WW4uQ09OVl9DMkM/dGhpcy5nZXRNb2R1bGUoYWwpLmdldFVzZXJQcm9maWxlKHt1c2VySURMaXN0OltlLnRvQWNjb3VudF19KS50aGVuKChmdW5jdGlvbihuKXt2YXIgbz1uLmRhdGE7cmV0dXJuIDA9PT1vLmxlbmd0aD91bShuZXcgcm0oe2NvZGU6bHAuVVNFUl9PUl9HUk9VUF9OT1RfRk9VTkQsbWVzc2FnZTpkcC5VU0VSX09SX0dST1VQX05PVF9GT1VORH0pKTooZS51c2VyUHJvZmlsZT1vWzBdLGUuX2lzSW5mb0NvbXBsZXRlZD0hMCx0Ll91bnNoaWZ0Q29udmVyc2F0aW9uKGUpLGltKHtjb252ZXJzYXRpb246ZX0pKX0pKTp0aGlzLmdldE1vZHVsZShpbCkuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOmUudG9BY2NvdW50fSkudGhlbigoZnVuY3Rpb24obil7cmV0dXJuIGUuZ3JvdXBQcm9maWxlPW4uZGF0YS5ncm91cCxlLl9pc0luZm9Db21wbGV0ZWQ9ITAsdC5fdW5zaGlmdENvbnZlcnNhdGlvbihlKSxpbSh7Y29udmVyc2F0aW9uOmV9KX0pKX19LHtrZXk6XCJfdW5zaGlmdENvbnZlcnNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UgaW5zdGFuY2VvZiBQbSYmIXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXMoZS5jb252ZXJzYXRpb25JRCkmJih0aGlzLl9jb252ZXJzYXRpb25NYXA9bmV3IE1hcChbW2UuY29udmVyc2F0aW9uSUQsZV1dLmNvbmNhdChVbih0aGlzLl9jb252ZXJzYXRpb25NYXApKSksdGhpcy5fc2V0U3RvcmFnZUNvbnZlcnNhdGlvbkxpc3QoKSx0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpKX19LHtrZXk6XCJfb25Qcm9maWxlVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5kYXRhLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUudXNlcklEO2lmKG49PT10LmdldE15VXNlcklEKCkpdC5fb25NeVByb2ZpbGVNb2RpZmllZCh7bGF0ZXN0TmljazplLm5pY2ssbGF0ZXN0QXZhdGFyOmUuYXZhdGFyfSk7ZWxzZXt2YXIgbz10Ll9jb252ZXJzYXRpb25NYXAuZ2V0KFwiXCIuY29uY2F0KFluLkNPTlZfQzJDKS5jb25jYXQobikpO28mJihvLnVzZXJQcm9maWxlPWUpfX0pKX19LHtrZXk6XCJkZWxldGVDb252ZXJzYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSx0b0FjY291bnQ6dm9pZCAwLHR5cGU6dm9pZCAwfTtpZighdGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhlKSl7dmFyIG89bmV3IHJtKHtjb2RlOmxwLkNPTlZFUlNBVElPTl9OT1RfRk9VTkQsbWVzc2FnZTpkcC5DT05WRVJTQVRJT05fTk9UX0ZPVU5EfSk7cmV0dXJuIHVtKG8pfXN3aXRjaCh0aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGUpLnR5cGUpe2Nhc2UgWW4uQ09OVl9DMkM6bi50eXBlPTEsbi50b0FjY291bnQ9ZS5yZXBsYWNlKFluLkNPTlZfQzJDLFwiXCIpO2JyZWFrO2Nhc2UgWW4uQ09OVl9HUk9VUDpuLnR5cGU9MixuLnRvR3JvdXBJRD1lLnJlcGxhY2UoWW4uQ09OVl9HUk9VUCxcIlwiKTticmVhaztjYXNlIFluLkNPTlZfU1lTVEVNOnJldHVybiB0aGlzLmdldE1vZHVsZShpbCkuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2Uoe21lc3NhZ2VMaXN0OnRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpfSksdGhpcy5kZWxldGVMb2NhbENvbnZlcnNhdGlvbihlKSxpbSh7Y29udmVyc2F0aW9uSUQ6ZX0pO2RlZmF1bHQ6dmFyIHI9bmV3IHJtKHtjb2RlOmxwLkNPTlZFUlNBVElPTl9VTl9SRUNPUkRFRF9UWVBFLG1lc3NhZ2U6ZHAuQ09OVkVSU0FUSU9OX1VOX1JFQ09SREVEX1RZUEV9KTtyZXR1cm4gdW0ocil9dmFyIGE9bmV3IERwKHVnKTthLnNldE1lc3NhZ2UoXCJjb252ZXJzYXRpb25JRDpcIi5jb25jYXQoZSkpO3ZhciBzPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVDb252ZXJzYXRpb25cIik7cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdChzLFwiLiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUpKSx0aGlzLnNldE1lc3NhZ2VSZWFkKHtjb252ZXJzYXRpb25JRDplfSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gdC5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6bGQscmVxdWVzdERhdGE6bn0pfSkpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQocyxcIiBva1wiKSksdC5kZWxldGVMb2NhbENvbnZlcnNhdGlvbihlKSxpbSh7Y29udmVyc2F0aW9uSUQ6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQocyxcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJwaW5Db252ZXJzYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5jb252ZXJzYXRpb25JRCxvPWUuaXNQaW5uZWQ7aWYoIXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXMobikpcmV0dXJuIHVtKHtjb2RlOmxwLkNPTlZFUlNBVElPTl9OT1RfRk9VTkQsbWVzc2FnZTpkcC5DT05WRVJTQVRJT05fTk9UX0ZPVU5EfSk7dmFyIHI9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihuKTtpZihyLmlzUGlubmVkPT09bylyZXR1cm4gaW0oe2NvbnZlcnNhdGlvbklEOm59KTt2YXIgYT1uZXcgRHAoY2cpO2Euc2V0TWVzc2FnZShcImNvbnZlcnNhdGlvbklEOlwiLmNvbmNhdChuLFwiIGlzUGlubmVkOlwiKS5jb25jYXQobykpO3ZhciBzPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5waW5Db252ZXJzYXRpb25cIik7UWkubG9nKFwiXCIuY29uY2F0KHMsXCIuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobixcIiBpc1Bpbm5lZDpcIikuY29uY2F0KG8pKTt2YXIgaT1udWxsO3JldHVybiBVdShuKT9pPXt0eXBlOjEsdG9BY2NvdW50Om4ucmVwbGFjZShZbi5DT05WX0MyQyxcIlwiKX06RnUobikmJihpPXt0eXBlOjIsZ3JvdXBJRDpuLnJlcGxhY2UoWW4uQ09OVl9HUk9VUCxcIlwiKX0pLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmRkLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLmdldE15VXNlcklEKCksb3BlcmF0aW9uVHlwZTohMD09PW8/MToyLGl0ZW1MaXN0OltpXX19KS50aGVuKChmdW5jdGlvbigpe3JldHVybiBhLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KHMsXCIgb2tcIikpLHIuaXNQaW5uZWQhPT1vJiYoci5pc1Bpbm5lZD1vLHQuX3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50KCkpLFFfKHtjb252ZXJzYXRpb25JRDpufSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChzLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcInNldE1lc3NhZ2VSZW1pbmRUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VSZW1pbmRIYW5kbGVyLnNldChlKX19LHtrZXk6XCJwYXRjaE1lc3NhZ2VSZW1pbmRUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5JRCxuPWUuaXNDMkNDb252ZXJzYXRpb24sbz1lLm1lc3NhZ2VSZW1pbmRUeXBlLHI9ITEsYT10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKG4/XCJcIi5jb25jYXQoWW4uQ09OVl9DMkMpLmNvbmNhdCh0KTpcIlwiLmNvbmNhdChZbi5DT05WX0dST1VQKS5jb25jYXQodCkpO3JldHVybiBhJiZhLm1lc3NhZ2VSZW1pbmRUeXBlIT09byYmKGEubWVzc2FnZVJlbWluZFR5cGU9byxyPSEwKSxyfX0se2tleTpcIm9uQzJDTWVzc2FnZVJlbWluZFR5cGVTeW5jZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbkMyQ01lc3NhZ2VSZW1pbmRUeXBlU3luY2VkIG9wdGlvbnM6XCIpLGUpLGUuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoIVh1KGUubXV0ZU5vdGlmaWNhdGlvbnNTeW5jKSl7dmFyIG4sbz1lLm11dGVOb3RpZmljYXRpb25zU3luYyxyPW8udG8sYT1vLnVwZGF0ZVNlcXVlbmNlLHM9by5tdXRlRmxhZzt0Ll9tZXNzYWdlUmVtaW5kSGFuZGxlci5zZXRVcGRhdGVTZXF1ZW5jZShhKSwwPT09cz9uPVluLk1TR19SRU1JTkRfQUNQVF9BTkRfTk9URToxPT09cz9uPVluLk1TR19SRU1JTkRfRElTQ0FSRDoyPT09cyYmKG49WW4uTVNHX1JFTUlORF9BQ1BUX05PVF9OT1RFKTt2YXIgaT0wO3QucGF0Y2hNZXNzYWdlUmVtaW5kVHlwZSh7SUQ6cixpc0MyQ0NvbnZlcnNhdGlvbjohMCxtZXNzYWdlUmVtaW5kVHlwZTpufSkmJihpKz0xKSxRaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLm9uQzJDTWVzc2FnZVJlbWluZFR5cGVTeW5jZWQgdXBkYXRlQ291bnQ6XCIpLmNvbmNhdChpKSksaT49MSYmdC5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX19KSl9fSx7a2V5OlwiZGVsZXRlTG9jYWxDb252ZXJzYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGUpO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlTG9jYWxDb252ZXJzYXRpb24gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIGhhczpcIikuY29uY2F0KHQpKSx0JiYodGhpcy5fY29udmVyc2F0aW9uTWFwLmRlbGV0ZShlKSx0aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuZGVsZXRlKGUpLHRoaXMuX3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0KCksdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnJlbW92ZUJ5Q29udmVyc2F0aW9uSUQoZSksdGhpcy5fY29tcGxldGVkTWFwLmRlbGV0ZShlKSx0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpKX19LHtrZXk6XCJpc01lc3NhZ2VTZW50QnlDdXJyZW50SW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hKCF0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuaGFzTG9jYWxNZXNzYWdlKGUuY29udmVyc2F0aW9uSUQsZS5JRCkmJiF0aGlzLnNpbmdseUxpbmtlZExpc3QuaGFzKGUucmFuZG9tKSl9fSx7a2V5OlwibW9kaWZ5TWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihlLnN0YXJ0c1dpdGgoWW4uQ09OVl9DMkMpJiZ0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGUpKXt2YXIgdD10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGUpLG49RGF0ZS5ub3coKTt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIubW9kaWZ5TWVzc2FnZVNlbnRCeVBlZXIoe2NvbnZlcnNhdGlvbklEOmUsbGF0ZXN0Tmljazp0LnVzZXJQcm9maWxlLm5pY2ssbGF0ZXN0QXZhdGFyOnQudXNlclByb2ZpbGUuYXZhdGFyfSk7dmFyIG89dGhpcy5nZXRNb2R1bGUoYWwpLmdldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0aGlzLmdldE15VXNlcklEKCkpO3RoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5tb2RpZnlNZXNzYWdlU2VudEJ5TWUoe2NvbnZlcnNhdGlvbklEOmUsbGF0ZXN0TmljazpvLm5pY2ssbGF0ZXN0QXZhdGFyOm8uYXZhdGFyfSksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5tb2RpZnlNZXNzYWdlTGlzdCBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgY29zdCBcIikuY29uY2F0KERhdGUubm93KCktbixcIiBtc1wiKSl9fX0se2tleTpcInVwZGF0ZVVzZXJQcm9maWxlU3BlY2lmaWVkS2V5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGRhdGVVc2VyUHJvZmlsZVNwZWNpZmllZEtleSBvcHRpb25zOlwiKSxlKTt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5uaWNrLG89ZS5hdmF0YXI7aWYodGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyh0KSl7dmFyIHI9dGhpcy5fY29udmVyc2F0aW9uTWFwLmdldCh0KS51c2VyUHJvZmlsZTtsdShuKSYmci5uaWNrIT09biYmKHIubmljaz1uKSxsdShvKSYmci5hdmF0YXIhPT1vJiYoci5hdmF0YXI9byksdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX19fSx7a2V5OlwiX29uTXlQcm9maWxlTW9kaWZpZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbkxpc3QoKSxvPURhdGUubm93KCk7bi5mb3JFYWNoKChmdW5jdGlvbihuKXt0Lm1vZGlmeU1lc3NhZ2VTZW50QnlNZShTbih7Y29udmVyc2F0aW9uSUQ6bi5jb252ZXJzYXRpb25JRH0sZSkpfSkpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uTXlQcm9maWxlTW9kaWZpZWQuIG1vZGlmeSBhbGwgbWVzc2FnZXMgc2VudCBieSBtZSwgY29zdCBcIikuY29uY2F0KERhdGUubm93KCktbyxcIiBtc1wiKSl9fSx7a2V5OlwibW9kaWZ5TWVzc2FnZVNlbnRCeU1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLm1vZGlmeU1lc3NhZ2VTZW50QnlNZShlKX19LHtrZXk6XCJnZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExhdGVzdE1lc3NhZ2VTZW50QnlNZShlKX19LHtrZXk6XCJtb2RpZnlNZXNzYWdlU2VudEJ5UGVlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5tb2RpZnlNZXNzYWdlU2VudEJ5UGVlcihlKX19LHtrZXk6XCJnZXRMYXRlc3RNZXNzYWdlU2VudEJ5UGVlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIoZSl9fSx7a2V5OlwicHVzaEludG9Ob3RpY2VSZXN1bHRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEoIXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5wdXNoSW4odCl8fHRoaXMuc2luZ2x5TGlua2VkTGlzdC5oYXModC5yYW5kb20pKSYmKGUucHVzaCh0KSwhMCl9fSx7a2V5OlwiZ2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlKGUpfX0se2tleTpcImNoZWNrQW5kUGF0Y2hSZW1hcmtcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVByb21pc2UucmVzb2x2ZSgpO2lmKDA9PT10aGlzLl9jb252ZXJzYXRpb25NYXAuc2l6ZSlyZXR1cm4gZTt2YXIgdD10aGlzLmdldE1vZHVsZSh1bCk7aWYoIXQpcmV0dXJuIGU7dmFyIG49VW4odGhpcy5fY29udmVyc2F0aW9uTWFwLnZhbHVlcygpKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT1Zbi5DT05WX0MyQ30pKTtpZigwPT09bi5sZW5ndGgpcmV0dXJuIGU7dmFyIG89MDtyZXR1cm4gbi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLmNvbnZlcnNhdGlvbklELnJlcGxhY2UoWW4uQ09OVl9DMkMsXCJcIik7aWYodC5pc015RnJpZW5kKG4pKXt2YXIgcj10LmdldEZyaWVuZFJlbWFyayhuKTtlLnJlbWFyayE9PXImJihlLnJlbWFyaz1yLG8rPTEpfX0pKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmNoZWNrQW5kUGF0Y2hSZW1hcmsuIGMyYyBjb252ZXJzYXRpb24gY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCxcIiwgcGF0Y2hlZCBjb3VudDpcIikuY29uY2F0KG8pKSxlfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9wYWdpbmdTdGF0dXM9eGMuTk9UX1NUQVJULHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5yZXNldCgpLHRoaXMuX21lc3NhZ2VSZW1pbmRIYW5kbGVyLnJlc2V0KCksdGhpcy5fcm9hbWluZ01lc3NhZ2VLZXlBbmRUaW1lTWFwLmNsZWFyKCksdGhpcy5zaW5nbHlMaW5rZWRMaXN0LnJlc2V0KCksdGhpcy5fcGVlclJlYWRUaW1lTWFwLmNsZWFyKCksdGhpcy5fY29tcGxldGVkTWFwLmNsZWFyKCksdGhpcy5fY29udmVyc2F0aW9uTWFwLmNsZWFyKCksdGhpcy5fcGFnaW5nVGltZVN0YW1wPTAsdGhpcy5fcGFnaW5nU3RhcnRJbmRleD0wLHRoaXMuX3BhZ2luZ1Bpbm5lZFRpbWVTdGFtcD0wLHRoaXMuX3BhZ2luZ1Bpbm5lZFN0YXJ0SW5kZXg9MCx0aGlzLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcC5jbGVhcigpLHRoaXMucmVzZXRSZWFkeSgpfX1dKSxufShObCkscW09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fZ3JvdXBNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJHcm91cFRpcHNIYW5kbGVyXCIsdGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwPW5ldyBNYXAsdGhpcy5fY2hlY2tDb3VudE1hcD1uZXcgTWFwLHRoaXMuTUFYX0NIRUNLX0NPVU5UPTR9cmV0dXJuIEVuKGUsW3trZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtlJTE9PTAmJnRoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5zaXplPjAmJnRoaXMuX2NoZWNrQ2FjaGVkR3JvdXBUaXBzKCl9fSx7a2V5OlwiX2NoZWNrQ2FjaGVkR3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5mb3JFYWNoKChmdW5jdGlvbih0LG4pe3ZhciBvPWUuX2NoZWNrQ291bnRNYXAuZ2V0KG4pLHI9ZS5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cChuKTtRaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9jaGVja0NhY2hlZEdyb3VwVGlwcyBncm91cElEOlwiKS5jb25jYXQobixcIiBoYXNMb2NhbEdyb3VwOlwiKS5jb25jYXQocixcIiBjaGVja0NvdW50OlwiKS5jb25jYXQobykpLHI/KGUuX25vdGlmeUNhY2hlZEdyb3VwVGlwcyhuKSxlLl9jaGVja0NvdW50TWFwLmRlbGV0ZShuKSxlLl9ncm91cE1vZHVsZS5kZWxldGVVbmpvaW5lZEFWQ2hhdFJvb20obikpOm8+PWUuTUFYX0NIRUNLX0NPVU5UPyhlLl9kZWxldGVDYWNoZWRHcm91cFRpcHMobiksZS5fY2hlY2tDb3VudE1hcC5kZWxldGUobikpOihvKyssZS5fY2hlY2tDb3VudE1hcC5zZXQobixvKSl9KSl9fSx7a2V5Olwib25OZXdHcm91cFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlKXtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25SZWNlaXZlR3JvdXBUaXBzIGNvdW50OlwiKS5jb25jYXQoZS5kYXRhTGlzdC5sZW5ndGgpKTt2YXIgdD10aGlzLm5ld0dyb3VwVGlwc1N0b3JlZEFuZFN1bW1hcnkoZSksbj10LmV2ZW50RGF0YUxpc3Qsbz10LnJlc3VsdCxyPXQuQVZDaGF0Um9vbU1lc3NhZ2VMaXN0OyhyLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5vbkFWQ2hhdFJvb21NZXNzYWdlKHIpLG4ubGVuZ3RoPjApJiYodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGxsKS5vbk5ld01lc3NhZ2Uoe2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0Om4saXNJbnN0YW50TWVzc2FnZTohMH0pLHRoaXMuX2dyb3VwTW9kdWxlLnVwZGF0ZU5leHRNZXNzYWdlU2VxKG4pKTtvLmxlbmd0aD4wJiYodGhpcy5fZ3JvdXBNb2R1bGUuZW1pdE91dGVyRXZlbnQoV24uTUVTU0FHRV9SRUNFSVZFRCxvKSx0aGlzLmhhbmRsZU1lc3NhZ2VMaXN0KG8pKX19LHtrZXk6XCJuZXdHcm91cFRpcHNTdG9yZWRBbmRTdW1tYXJ5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuZXZlbnQsbj1lLmRhdGFMaXN0LG89bnVsbCxyPVtdLGE9W10scz17fSxpPVtdLHU9MCxjPW4ubGVuZ3RoO3U8Yzt1Kyspe3ZhciBsPW5bdV0sZD1sLmdyb3VwUHJvZmlsZS5ncm91cElELHA9dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cChkKTtpZihwfHwhdGhpcy5fZ3JvdXBNb2R1bGUuaXNVbmpvaW5lZEFWQ2hhdFJvb20oZCkpaWYocClpZih0aGlzLl9ncm91cE1vZHVsZS5pc01lc3NhZ2VGcm9tT3JUb0FWQ2hhdHJvb20oZCkpe3ZhciBnPU91KGwpO2cuZXZlbnQ9dCxpLnB1c2goZyl9ZWxzZXtsLmN1cnJlbnRVc2VyPXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCksbC5jb252ZXJzYXRpb25UeXBlPVluLkNPTlZfR1JPVVAsKG89bmV3IFhfKGwpKS5zZXRFbGVtZW50KHt0eXBlOlluLk1TR19HUlBfVElQLGNvbnRlbnQ6U24oe30sbC5lbGVtZW50cyx7Z3JvdXBQcm9maWxlOmwuZ3JvdXBQcm9maWxlfSl9KSxvLmlzU3lzdGVtTWVzc2FnZT0hMTt2YXIgaD10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUobGwpLGY9byxfPWYuY29udmVyc2F0aW9uSUQsbT1mLnNlcXVlbmNlO2lmKDY9PT10KW8uX29ubGluZU9ubHlGbGFnPSEwLGEucHVzaChvKTtlbHNlIGlmKCFoLnB1c2hJbnRvTm90aWNlUmVzdWx0KGEsbykpY29udGludWU7aWYoNiE9PXR8fCFoLmdldExvY2FsQ29udmVyc2F0aW9uKF8pKXtpZig2IT09dCl0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoU2wpLmFkZE1lc3NhZ2VTZXF1ZW5jZSh7a2V5Ok1wLG1lc3NhZ2U6b30pO3ZhciB2PWguaXNSZW1vdGVSZWFkKHtjb252ZXJzYXRpb25JRDpfLHNlcXVlbmNlOm19KTtpZihodShzW19dKSlzW19dPXIucHVzaCh7Y29udmVyc2F0aW9uSUQ6Xyx1bnJlYWRDb3VudDpcImluXCIhPT1vLmZsb3d8fG8uX29ubGluZU9ubHlGbGFnfHx2PzA6MSx0eXBlOm8uY29udmVyc2F0aW9uVHlwZSxzdWJUeXBlOm8uY29udmVyc2F0aW9uU3ViVHlwZSxsYXN0TWVzc2FnZTpvfSktMTtlbHNle3ZhciBNPXNbX107cltNXS50eXBlPW8uY29udmVyc2F0aW9uVHlwZSxyW01dLnN1YlR5cGU9by5jb252ZXJzYXRpb25TdWJUeXBlLHJbTV0ubGFzdE1lc3NhZ2U9byxcImluXCIhPT1vLmZsb3d8fG8uX29ubGluZU9ubHlGbGFnfHx2fHxyW01dLnVucmVhZENvdW50Kyt9fX1lbHNlIHRoaXMuX2NhY2hlR3JvdXBUaXBzQW5kUHJvYmUoe2dyb3VwSUQ6ZCxldmVudDp0LGl0ZW06bH0pfXJldHVybntldmVudERhdGFMaXN0OnIscmVzdWx0OmEsQVZDaGF0Um9vbU1lc3NhZ2VMaXN0Oml9fX0se2tleTpcImhhbmRsZU1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3N3aXRjaChlLnBheWxvYWQub3BlcmF0aW9uVHlwZSl7Y2FzZSAxOnQuX29uTmV3TWVtYmVyQ29tZUluKGUpO2JyZWFrO2Nhc2UgMjp0Ll9vbk1lbWJlclF1aXQoZSk7YnJlYWs7Y2FzZSAzOnQuX29uTWVtYmVyS2lja2VkT3V0KGUpO2JyZWFrO2Nhc2UgNDp0Ll9vbk1lbWJlclNldEFkbWluKGUpO2JyZWFrO2Nhc2UgNTp0Ll9vbk1lbWJlckNhbmNlbGxlZEFkbWluKGUpO2JyZWFrO2Nhc2UgNjp0Ll9vbkdyb3VwUHJvZmlsZU1vZGlmaWVkKGUpO2JyZWFrO2Nhc2UgNzp0Ll9vbk1lbWJlckluZm9Nb2RpZmllZChlKTticmVhaztkZWZhdWx0OlFpLndhcm4oXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmhhbmRsZU1lc3NhZ2VMaXN0IHVua25vd24gb3BlcmF0aW9uVHlwZTpcIikuY29uY2F0KGUucGF5bG9hZC5vcGVyYXRpb25UeXBlKSl9fSkpfX0se2tleTpcIl9vbk5ld01lbWJlckNvbWVJblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZCxuPXQubWVtYmVyTnVtLG89dC5ncm91cFByb2ZpbGUuZ3JvdXBJRCxyPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKG8pO3ImJmN1KG4pJiZyLm1lbWJlckNvdW50IT09biYmKHIubWVtYmVyQ291bnQ9bix0aGlzLl91cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUocikpfX0se2tleTpcIl9vbk1lbWJlclF1aXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQsbj10Lm1lbWJlck51bSxvPXQuZ3JvdXBQcm9maWxlLmdyb3VwSUQscj10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtyJiZjdShuKSYmci5tZW1iZXJDb3VudCE9PW4mJihyLm1lbWJlckNvdW50PW4sdGhpcy5fdXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKHIpKSx0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoY2wpLmRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzKG8sZS5wYXlsb2FkLnVzZXJJRExpc3QpfX0se2tleTpcIl9vbk1lbWJlcktpY2tlZE91dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZCxuPXQubWVtYmVyTnVtLG89dC5ncm91cFByb2ZpbGUuZ3JvdXBJRCxyPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKG8pO3ImJmN1KG4pJiZyLm1lbWJlckNvdW50IT09biYmKHIubWVtYmVyQ291bnQ9bix0aGlzLl91cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUocikpLHRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShjbCkuZGVsZXRlTG9jYWxHcm91cE1lbWJlcnMobyxlLnBheWxvYWQudXNlcklETGlzdCl9fSx7a2V5OlwiX3VwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShsbCkudXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKFtlXSl9fSx7a2V5OlwiX29uTWVtYmVyU2V0QWRtaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQsbj1lLnBheWxvYWQudXNlcklETGlzdCxvPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShjbCk7bi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1vLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKHQsZSk7biYmbi51cGRhdGVSb2xlKFluLkdSUF9NQlJfUk9MRV9BRE1JTil9KSl9fSx7a2V5OlwiX29uTWVtYmVyQ2FuY2VsbGVkQWRtaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQsbj1lLnBheWxvYWQudXNlcklETGlzdCxvPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShjbCk7bi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1vLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKHQsZSk7biYmbi51cGRhdGVSb2xlKFluLkdSUF9NQlJfUk9MRV9NRU1CRVIpfSkpfX0se2tleTpcIl9vbkdyb3VwUHJvZmlsZU1vZGlmaWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUucGF5bG9hZCxvPW4ubmV3R3JvdXBQcm9maWxlLHI9bi5ncm91cFByb2ZpbGUuZ3JvdXBJRCxhPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKHIpO09iamVjdC5rZXlzKG8pLmZvckVhY2goKGZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlXCJvd25lcklEXCI6dC5fb3duZXJDaGFuZ2VkKGEsbyk7YnJlYWs7ZGVmYXVsdDphW2VdPW9bZV19fSkpLHRoaXMuX2dyb3VwTW9kdWxlLmVtaXRHcm91cExpc3RVcGRhdGUoITAsITApfX0se2tleTpcIl9vd25lckNoYW5nZWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWUuZ3JvdXBJRCxvPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKG4pLHI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKTtpZihyPT09dC5vd25lcklEKXtvLnVwZGF0ZUdyb3VwKHtzZWxmSW5mbzp7cm9sZTpZbi5HUlBfTUJSX1JPTEVfT1dORVJ9fSk7dmFyIGE9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGNsKSxzPWEuZ2V0TG9jYWxHcm91cE1lbWJlckluZm8obixyKSxpPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKG4pLm93bmVySUQsdT1hLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKG4saSk7cyYmcy51cGRhdGVSb2xlKFluLkdSUF9NQlJfUk9MRV9PV05FUiksdSYmdS51cGRhdGVSb2xlKFluLkdSUF9NQlJfUk9MRV9NRU1CRVIpfX19LHtrZXk6XCJfb25NZW1iZXJJbmZvTW9kaWZpZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQsbj10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoY2wpO2UucGF5bG9hZC5tZW1iZXJMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvPW4uZ2V0TG9jYWxHcm91cE1lbWJlckluZm8odCxlLnVzZXJJRCk7byYmY3UoZS5tdXRlVGltZSkmJm8udXBkYXRlTXV0ZVVudGlsKGUubXV0ZVRpbWUpfSkpfX0se2tleTpcIl9jYWNoZUdyb3VwVGlwc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmhhcyhlKXx8dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLnNldChlLFtdKSx0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuZ2V0KGUpLnB1c2godCl9fSx7a2V5OlwiX2RlbGV0ZUNhY2hlZEdyb3VwVGlwc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5oYXMoZSkmJnRoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5kZWxldGUoZSl9fSx7a2V5OlwiX25vdGlmeUNhY2hlZEdyb3VwVGlwc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuZ2V0KGUpfHxbXTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3Qub25OZXdHcm91cFRpcHMoZSl9KSksdGhpcy5fZGVsZXRlQ2FjaGVkR3JvdXBUaXBzKGUpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX25vdGlmeUNhY2hlZEdyb3VwVGlwcyBncm91cElEOlwiKS5jb25jYXQoZSxcIiBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSl9fSx7a2V5OlwiX2NhY2hlR3JvdXBUaXBzQW5kUHJvYmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS5ldmVudCxyPWUuaXRlbTt0aGlzLl9jYWNoZUdyb3VwVGlwcyhuLHtldmVudDpvLGRhdGFMaXN0OltyXX0pLHRoaXMuX2dyb3VwTW9kdWxlLmdldEdyb3VwU2ltcGxpZmllZEluZm8obikudGhlbigoZnVuY3Rpb24oZSl7ZS50eXBlPT09WW4uR1JQX0FWQ0hBVFJPT00/dC5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cChuKT90Ll9ub3RpZnlDYWNoZWRHcm91cFRpcHMobik6dC5fZ3JvdXBNb2R1bGUuc2V0VW5qb2luZWRBVkNoYXRSb29tKG4pOih0Ll9ncm91cE1vZHVsZS51cGRhdGVHcm91cE1hcChbZV0pLHQuX25vdGlmeUNhY2hlZEdyb3VwVGlwcyhuKSl9KSksdGhpcy5fY2hlY2tDb3VudE1hcC5oYXMobil8fHRoaXMuX2NoZWNrQ291bnRNYXAuc2V0KG4sMCksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fY2FjaGVHcm91cFRpcHNBbmRQcm9iZSBncm91cElEOlwiKS5jb25jYXQobikpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuY2xlYXIoKSx0aGlzLl9jaGVja0NvdW50TWFwLmNsZWFyKCl9fV0pLGV9KCkseG09W10ucHVzaCxWbT1NYXRoLm1pbixLbT0hcigoZnVuY3Rpb24oKXtyZXR1cm4hUmVnRXhwKDQyOTQ5NjcyOTUsXCJ5XCIpfSkpO3ZzKFwic3BsaXRcIiwyLChmdW5jdGlvbihlLHQsbil7dmFyIG87cmV0dXJuIG89XCJjXCI9PVwiYWJiY1wiLnNwbGl0KC8oYikqLylbMV18fDQhPVwidGVzdFwiLnNwbGl0KC8oPzopLywtMSkubGVuZ3RofHwyIT1cImFiXCIuc3BsaXQoLyg/OmFiKSovKS5sZW5ndGh8fDQhPVwiLlwiLnNwbGl0KC8oLj8pKC4/KS8pLmxlbmd0aHx8XCIuXCIuc3BsaXQoLygpKCkvKS5sZW5ndGg+MXx8XCJcIi5zcGxpdCgvLj8vKS5sZW5ndGg/ZnVuY3Rpb24oZSxuKXt2YXIgbz1TdHJpbmcoaCh0aGlzKSkscj12b2lkIDA9PT1uPzQyOTQ5NjcyOTU6bj4+PjA7aWYoMD09PXIpcmV0dXJuW107aWYodm9pZCAwPT09ZSlyZXR1cm5bb107aWYoIXVzKGUpKXJldHVybiB0LmNhbGwobyxlLHIpO2Zvcih2YXIgYSxzLGksdT1bXSxjPShlLmlnbm9yZUNhc2U/XCJpXCI6XCJcIikrKGUubXVsdGlsaW5lP1wibVwiOlwiXCIpKyhlLnVuaWNvZGU/XCJ1XCI6XCJcIikrKGUuc3RpY2t5P1wieVwiOlwiXCIpLGw9MCxkPW5ldyBSZWdFeHAoZS5zb3VyY2UsYytcImdcIik7KGE9dHMuY2FsbChkLG8pKSYmISgocz1kLmxhc3RJbmRleCk+bCYmKHUucHVzaChvLnNsaWNlKGwsYS5pbmRleCkpLGEubGVuZ3RoPjEmJmEuaW5kZXg8by5sZW5ndGgmJnhtLmFwcGx5KHUsYS5zbGljZSgxKSksaT1hWzBdLmxlbmd0aCxsPXMsdS5sZW5ndGg+PXIpKTspZC5sYXN0SW5kZXg9PT1hLmluZGV4JiZkLmxhc3RJbmRleCsrO3JldHVybiBsPT09by5sZW5ndGg/IWkmJmQudGVzdChcIlwiKXx8dS5wdXNoKFwiXCIpOnUucHVzaChvLnNsaWNlKGwpKSx1Lmxlbmd0aD5yP3Uuc2xpY2UoMCxyKTp1fTpcIjBcIi5zcGxpdCh2b2lkIDAsMCkubGVuZ3RoP2Z1bmN0aW9uKGUsbil7cmV0dXJuIHZvaWQgMD09PWUmJjA9PT1uP1tdOnQuY2FsbCh0aGlzLGUsbil9OnQsW2Z1bmN0aW9uKHQsbil7dmFyIHI9aCh0aGlzKSxhPW51bGw9PXQ/dm9pZCAwOnRbZV07cmV0dXJuIHZvaWQgMCE9PWE/YS5jYWxsKHQscixuKTpvLmNhbGwoU3RyaW5nKHIpLHQsbil9LGZ1bmN0aW9uKGUscil7dmFyIGE9bihvLGUsdGhpcyxyLG8hPT10KTtpZihhLmRvbmUpcmV0dXJuIGEudmFsdWU7dmFyIHM9RChlKSxpPVN0cmluZyh0aGlzKSx1PU9yKHMsUmVnRXhwKSxjPXMudW5pY29kZSxsPShzLmlnbm9yZUNhc2U/XCJpXCI6XCJcIikrKHMubXVsdGlsaW5lP1wibVwiOlwiXCIpKyhzLnVuaWNvZGU/XCJ1XCI6XCJcIikrKEttP1wieVwiOlwiZ1wiKSxkPW5ldyB1KEttP3M6XCJeKD86XCIrcy5zb3VyY2UrXCIpXCIsbCkscD12b2lkIDA9PT1yPzQyOTQ5NjcyOTU6cj4+PjA7aWYoMD09PXApcmV0dXJuW107aWYoMD09PWkubGVuZ3RoKXJldHVybiBudWxsPT09SXMoZCxpKT9baV06W107Zm9yKHZhciBnPTAsaD0wLGY9W107aDxpLmxlbmd0aDspe2QubGFzdEluZGV4PUttP2g6MDt2YXIgXyxtPUlzKGQsS20/aTppLnNsaWNlKGgpKTtpZihudWxsPT09bXx8KF89Vm0oaWUoZC5sYXN0SW5kZXgrKEttPzA6aCkpLGkubGVuZ3RoKSk9PT1nKWg9eXMoaSxoLGMpO2Vsc2V7aWYoZi5wdXNoKGkuc2xpY2UoZyxoKSksZi5sZW5ndGg9PT1wKXJldHVybiBmO2Zvcih2YXIgdj0xO3Y8PW0ubGVuZ3RoLTE7disrKWlmKGYucHVzaChtW3ZdKSxmLmxlbmd0aD09PXApcmV0dXJuIGY7aD1nPV99fXJldHVybiBmLnB1c2goaS5zbGljZShnKSksZn1dfSksIUttKTt2YXIgQm09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fZ3JvdXBNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJDb21tb25Hcm91cEhhbmRsZXJcIix0aGlzLnRlbXBDb252ZXJzYXRpb25MaXN0PW51bGwsdGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwPW5ldyBNYXAsdGhpcy5fY2hlY2tDb3VudE1hcD1uZXcgTWFwLHRoaXMuTUFYX0NIRUNLX0NPVU5UPTQsdC5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uY2UoTW0sdGhpcy5faW5pdEdyb3VwTGlzdCx0aGlzKX1yZXR1cm4gRW4oZSxbe2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UlMT09MCYmdGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLnNpemU+MCYmdGhpcy5fY2hlY2tDYWNoZWRHcm91cE1lc3NhZ2UoKX19LHtrZXk6XCJfY2hlY2tDYWNoZWRHcm91cE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmZvckVhY2goKGZ1bmN0aW9uKHQsbil7dmFyIG89ZS5fY2hlY2tDb3VudE1hcC5nZXQobikscj1lLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pO1FpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2NoZWNrQ2FjaGVkR3JvdXBNZXNzYWdlIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIGhhc0xvY2FsR3JvdXA6XCIpLmNvbmNhdChyLFwiIGNoZWNrQ291bnQ6XCIpLmNvbmNhdChvKSkscj8oZS5fbm90aWZ5Q2FjaGVkR3JvdXBNZXNzYWdlKG4pLGUuX2NoZWNrQ291bnRNYXAuZGVsZXRlKG4pLGUuX2dyb3VwTW9kdWxlLmRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbShuKSk6bz49ZS5NQVhfQ0hFQ0tfQ09VTlQ/KGUuX2RlbGV0ZUNhY2hlZEdyb3VwTWVzc2FnZShuKSxlLl9jaGVja0NvdW50TWFwLmRlbGV0ZShuKSk6KG8rKyxlLl9jaGVja0NvdW50TWFwLnNldChuLG8pKX0pKX19LHtrZXk6XCJfaW5pdEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9pbml0R3JvdXBMaXN0XCIpKTt2YXIgdD1uZXcgRHAoU2cpLG49dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0U3RvcmFnZUdyb3VwTGlzdCgpO2lmKGd1KG4pJiZuLmxlbmd0aD4wKXtuLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UuX2dyb3VwTW9kdWxlLmluaXRHcm91cE1hcCh0KX0pKSx0aGlzLl9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKTt2YXIgbz10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwTGlzdCgpLmxlbmd0aDt0LnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cCBjb3VudDpcIi5jb25jYXQobykpLmVuZCgpfWVsc2UgdC5zZXROZXR3b3JrVHlwZSh0aGlzLl9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXAgY291bnQ6MFwiKS5lbmQoKTtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9pbml0R3JvdXBMaXN0IG9rXCIpKX19LHtrZXk6XCJoYW5kbGVVcGRhdGVHcm91cExhc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmhhbmRsZVVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2VcIik7aWYoUWkuZGVidWcoXCJcIi5jb25jYXQodCxcIiBjb252ZXJzYXRpb24gY291bnQ6XCIpLmNvbmNhdChlLmxlbmd0aCxcIiwgbG9jYWwgZ3JvdXAgY291bnQ6XCIpLmNvbmNhdCh0aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwTGlzdCgpLmxlbmd0aCkpLDAhPT10aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cE1hcCgpLnNpemUpe2Zvcih2YXIgbixvLHIsYT0hMSxzPTAsaT1lLmxlbmd0aDtzPGk7cysrKShuPWVbc10pLnR5cGU9PT1Zbi5DT05WX0dST1VQJiYobz1uLmNvbnZlcnNhdGlvbklELnNwbGl0KC9eR1JPVVAvKVsxXSwocj10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKSkmJihyLmxhc3RNZXNzYWdlPW4ubGFzdE1lc3NhZ2UsYT0hMCkpO2EmJih0aGlzLl9ncm91cE1vZHVsZS5zb3J0TG9jYWxHcm91cExpc3QoKSx0aGlzLl9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKSl9ZWxzZSB0aGlzLnRlbXBDb252ZXJzYXRpb25MaXN0PWV9fSx7a2V5Olwib25OZXdHcm91cE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25OZXdHcm91cE1lc3NhZ2UgY291bnQ6XCIpLmNvbmNhdChlLmRhdGFMaXN0Lmxlbmd0aCkpO3ZhciB0PXRoaXMuX25ld0dyb3VwTWVzc2FnZVN0b3JlZEFuZFN1bW1hcnkoZSksbj10LmNvbnZlcnNhdGlvbk9wdGlvbnNMaXN0LG89dC5tZXNzYWdlTGlzdCxyPXQuQVZDaGF0Um9vbU1lc3NhZ2VMaXN0OyhyLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5vbkFWQ2hhdFJvb21NZXNzYWdlKHIpLHRoaXMuX2dyb3VwTW9kdWxlLmZpbHRlck1vZGlmaWVkTWVzc2FnZShvKSxuLmxlbmd0aD4wKSYmKHRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShsbCkub25OZXdNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpuLGlzSW5zdGFudE1lc3NhZ2U6ITB9KSx0aGlzLl9ncm91cE1vZHVsZS51cGRhdGVOZXh0TWVzc2FnZVNlcShuKSk7dmFyIGE9dGhpcy5fZ3JvdXBNb2R1bGUuZmlsdGVyVW5tb2RpZmllZE1lc3NhZ2Uobyk7YS5sZW5ndGg+MCYmdGhpcy5fZ3JvdXBNb2R1bGUuZW1pdE91dGVyRXZlbnQoV24uTUVTU0FHRV9SRUNFSVZFRCxhKSxvLmxlbmd0aD0wfX0se2tleTpcIl9uZXdHcm91cE1lc3NhZ2VTdG9yZWRBbmRTdW1tYXJ5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdCxuPWUuZXZlbnQsbz1lLmlzSW5zdGFudE1lc3NhZ2Uscj1udWxsLGE9W10scz1bXSxpPVtdLHU9e30sYz1Zbi5DT05WX0dST1VQLGw9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGZsKSxkPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShTbCkscD10Lmxlbmd0aDtwPjEmJnQuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zZXF1ZW5jZS10LnNlcXVlbmNlfSkpO2Zvcih2YXIgZz0wO2c8cDtnKyspe3ZhciBoPXRbZ10sZj1oLmdyb3VwUHJvZmlsZS5ncm91cElELF89dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cChmKTtpZihffHwhdGhpcy5fZ3JvdXBNb2R1bGUuaXNVbmpvaW5lZEFWQ2hhdFJvb20oZikpaWYoXylpZih0aGlzLl9ncm91cE1vZHVsZS5pc01lc3NhZ2VGcm9tT3JUb0FWQ2hhdHJvb20oZikpe3ZhciBtPU91KGgpO20uZXZlbnQ9bixpLnB1c2gobSl9ZWxzZXtoLmN1cnJlbnRVc2VyPXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCksaC5jb252ZXJzYXRpb25UeXBlPWMsaC5pc1N5c3RlbU1lc3NhZ2U9ISFoLmlzU3lzdGVtTWVzc2FnZSxyPW5ldyBYXyhoKSxoLmVsZW1lbnRzPWwucGFyc2VFbGVtZW50cyhoLmVsZW1lbnRzLGguZnJvbSksci5zZXRFbGVtZW50KGguZWxlbWVudHMpO3ZhciB2PTE9PT10W2ddLmlzTW9kaWZpZWQsTT10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUobGwpO2lmKE0uaXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlKHIpP3IuaXNNb2RpZmllZD12OnY9ITEsMT09PWgub25saW5lT25seUZsYWcpci5fb25saW5lT25seUZsYWc9ITAscy5wdXNoKHIpO2Vsc2V7aWYoIU0ucHVzaEludG9NZXNzYWdlTGlzdChzLHIsdikpY29udGludWU7ZC5hZGRNZXNzYWdlU2VxdWVuY2Uoe2tleTpNcCxtZXNzYWdlOnJ9KSxvJiZyLmNsaWVudFRpbWU+MCYmZC5hZGRNZXNzYWdlRGVsYXkoci5jbGllbnRUaW1lKTt2YXIgeT1yLEk9eS5jb252ZXJzYXRpb25JRCxFPXkuc2VxdWVuY2UsVD1NLmlzUmVtb3RlUmVhZCh7Y29udmVyc2F0aW9uSUQ6SSxzZXF1ZW5jZTpFfSk7aWYoaHUodVtJXSkpe3ZhciBBPTA7XCJpblwiPT09ci5mbG93JiYoci5faXNFeGNsdWRlZEZyb21VbnJlYWRDb3VudHx8VHx8KEE9MSkpLHVbSV09YS5wdXNoKHtjb252ZXJzYXRpb25JRDpJLHVucmVhZENvdW50OkEsdHlwZTpyLmNvbnZlcnNhdGlvblR5cGUsc3ViVHlwZTpyLmNvbnZlcnNhdGlvblN1YlR5cGUsbGFzdE1lc3NhZ2U6ci5faXNFeGNsdWRlZEZyb21MYXN0TWVzc2FnZT9cIlwiOnJ9KS0xfWVsc2V7dmFyIFM9dVtJXTthW1NdLnR5cGU9ci5jb252ZXJzYXRpb25UeXBlLGFbU10uc3ViVHlwZT1yLmNvbnZlcnNhdGlvblN1YlR5cGUsYVtTXS5sYXN0TWVzc2FnZT1yLl9pc0V4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlP1wiXCI6cixcImluXCI9PT1yLmZsb3cmJihyLl9pc0V4Y2x1ZGVkRnJvbVVucmVhZENvdW50fHxUfHxhW1NdLnVucmVhZENvdW50KyspfX19ZWxzZSB0aGlzLl9jYWNoZUdyb3VwTWVzc2FnZUFuZFByb2JlKHtncm91cElEOmYsZXZlbnQ6bixpdGVtOmh9KX1yZXR1cm57Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6YSxtZXNzYWdlTGlzdDpzLEFWQ2hhdFJvb21NZXNzYWdlTGlzdDppfX19LHtrZXk6XCJvbkdyb3VwTWVzc2FnZVJldm9rZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Hcm91cE1lc3NhZ2VSZXZva2VkIG51bXM6XCIpLmNvbmNhdChlLmRhdGFMaXN0Lmxlbmd0aCkpO3ZhciB0PXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShsbCksbj1bXSxvPW51bGw7ZS5kYXRhTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgcj1lLmVsZW1lbnRzLnJldm9rZWRJbmZvcztodShyKXx8ci5mb3JFYWNoKChmdW5jdGlvbihlKXsobz10LnJldm9rZShcIkdST1VQXCIuY29uY2F0KGUuZ3JvdXBJRCksZS5zZXF1ZW5jZSxlLnJhbmRvbSkpJiZuLnB1c2gobyl9KSl9KSksMCE9PW4ubGVuZ3RoJiYodC5vbk1lc3NhZ2VSZXZva2VkKG4pLHRoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KFduLk1FU1NBR0VfUkVWT0tFRCxuKSl9fSx7a2V5OlwiX2dyb3VwTGlzdFRyZWVTaGFraW5nXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBNYXAoVW4odGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBNYXAoKSkpLG49MCxvPWUubGVuZ3RoO248bztuKyspdC5kZWxldGUoZVtuXS5ncm91cElEKTt0aGlzLl9ncm91cE1vZHVsZS5oYXNKb2luZWRBVkNoYXRSb29tKCkmJnRoaXMuX2dyb3VwTW9kdWxlLmdldEpvaW5lZEFWQ2hhdFJvb20oKS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LmRlbGV0ZShlKX0pKTtmb3IodmFyIHI9VW4odC5rZXlzKCkpLGE9MCxzPXIubGVuZ3RoO2E8czthKyspdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlR3JvdXAoclthXSl9fSx7a2V5OlwiZ2V0R3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRHcm91cExpc3RcIiksbz1uZXcgRHAoVGcpO1FpLmxvZyhcIlwiLmNvbmNhdChuKSk7dmFyIHI9e2ludHJvZHVjdGlvbjpcIkludHJvZHVjdGlvblwiLG5vdGlmaWNhdGlvbjpcIk5vdGlmaWNhdGlvblwiLGNyZWF0ZVRpbWU6XCJDcmVhdGVUaW1lXCIsb3duZXJJRDpcIk93bmVyX0FjY291bnRcIixsYXN0SW5mb1RpbWU6XCJMYXN0SW5mb1RpbWVcIixtZW1iZXJOdW06XCJNZW1iZXJOdW1cIixtYXhNZW1iZXJOdW06XCJNYXhNZW1iZXJOdW1cIixqb2luT3B0aW9uOlwiQXBwbHlKb2luT3B0aW9uXCIsbXV0ZUFsbE1lbWJlcnM6XCJTaHV0VXBBbGxNZW1iZXJcIn0sYT1bXCJUeXBlXCIsXCJOYW1lXCIsXCJGYWNlVXJsXCIsXCJOZXh0TXNnU2VxXCIsXCJMYXN0TXNnVGltZVwiXSxzPVtdO3JldHVybiBlJiZlLmdyb3VwUHJvZmlsZUZpbHRlciYmZS5ncm91cFByb2ZpbGVGaWx0ZXIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cltlXSYmYS5wdXNoKHJbZV0pfSkpLHRoaXMuX3BhZ2luZ0dldEdyb3VwTGlzdCh7bGltaXQ6NTAsb2Zmc2V0OjAsZ3JvdXBCYXNlSW5mb0ZpbHRlcjphLGdyb3VwTGlzdDpzfSkudGhlbigoZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gY291bnQ6XCIpLmNvbmNhdChzLmxlbmd0aCkpLHQuX2dyb3VwTGlzdFRyZWVTaGFraW5nKHMpLHQuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKHMpO3ZhciBlPXQuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBMaXN0KCkubGVuZ3RoO3JldHVybiBvLnNldE5ldHdvcmtUeXBlKHQuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJyZW1vdGUgY291bnQ6XCIuY29uY2F0KHMubGVuZ3RoLFwiLCBhZnRlciB0cmVlIHNoYWtpbmcsIGxvY2FsIGNvdW50OlwiKS5jb25jYXQoZSkpLmVuZCgpLHQudGVtcENvbnZlcnNhdGlvbkxpc3QmJihRaS5sb2coXCJcIi5jb25jYXQobixcIiB1cGRhdGUgbGFzdCBtZXNzYWdlIHdpdGggdGVtcENvbnZlcnNhdGlvbkxpc3QsIGNvdW50OlwiKS5jb25jYXQodC50ZW1wQ29udmVyc2F0aW9uTGlzdC5sZW5ndGgpKSx0LmhhbmRsZVVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2Uoe2RhdGE6dC50ZW1wQ29udmVyc2F0aW9uTGlzdH0pLHQudGVtcENvbnZlcnNhdGlvbkxpc3Q9bnVsbCksdC5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSgpLHQuX2dyb3VwTW9kdWxlLnBhdGNoR3JvdXBNZXNzYWdlUmVtaW5kVHlwZSgpLHQuX2dyb3VwTW9kdWxlLnJlY29tcHV0ZVVucmVhZENvdW50KCksUV8oe2dyb3VwTGlzdDp0Ll9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwTGlzdCgpfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJfcGFnaW5nR2V0R3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fcGFnaW5nR2V0R3JvdXBMaXN0XCIpLG89ZS5pc0NvbW11bml0eVJlbGF5LHI9dm9pZCAwIT09byYmbyxhPWUubGltaXQscz1lLm9mZnNldCxpPWUuZ3JvdXBCYXNlSW5mb0ZpbHRlcix1PWUuZ3JvdXBMaXN0LGM9bmV3IERwKENnKTtyZXR1cm4gdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmdkLHJlcXVlc3REYXRhOnt0eXBlOnI/WW4uR1JQX0NPTU1VTklUWTp2b2lkIDAsbWVtYmVyQWNjb3VudDp0aGlzLl9ncm91cE1vZHVsZS5nZXRNeVVzZXJJRCgpLGxpbWl0OmEsb2Zmc2V0OnMscmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZUluZm9GaWx0ZXI6aSxzZWxmSW5mb0ZpbHRlcjpbXCJSb2xlXCIsXCJKb2luVGltZVwiLFwiTXNnRmxhZ1wiLFwiTXNnU2VxXCJdfX19KS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz1lLmRhdGEsbD1vLmdyb3VwcyxkPXZvaWQgMD09PWw/W106bCxwPW8udG90YWxDb3VudDt1LnB1c2guYXBwbHkodSxVbihkKSk7dmFyIGc9cythLGg9IShwPmcpLGY9XCJvZmZzZXQ6XCIuY29uY2F0KHMsXCIgdG90YWxDb3VudDpcIikuY29uY2F0KHAsXCIgaXNDb21wbGV0ZWQ6XCIpLmNvbmNhdChoLFwiIFwiKStcImN1cnJlbnRDb3VudDpcIi5jb25jYXQodS5sZW5ndGgsXCIgaXNDb21tdW5pdHlSZWxheTpcIikuY29uY2F0KHIpO3JldHVybiBjLnNldE5ldHdvcmtUeXBlKHQuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQoZikpLmVuZCgpLHJ8fGg/IXImJmg/KFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIHN0YXJ0IHRvIGdldCBjb21tdW5pdHkgbGlzdFwiKSkscz0wLHQuX3BhZ2luZ0dldEdyb3VwTGlzdCh7bGltaXQ6YSxvZmZzZXQ6cyxncm91cEJhc2VJbmZvRmlsdGVyOmksZ3JvdXBMaXN0OnUsaXNDb21tdW5pdHlSZWxheTohMH0pKTpyJiYhaD8ocz1nLHQuX3BhZ2luZ0dldEdyb3VwTGlzdCh7bGltaXQ6YSxvZmZzZXQ6cyxncm91cEJhc2VJbmZvRmlsdGVyOmksZ3JvdXBMaXN0OnUsaXNDb21tdW5pdHlSZWxheTohMH0pKTooUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIHRvdGFsQ291bnQ6XCIpLmNvbmNhdCh1Lmxlbmd0aCkpLFFfKHtncm91cExpc3Q6dX0pKToocz1nLHQuX3BhZ2luZ0dldEdyb3VwTGlzdCh7bGltaXQ6YSxvZmZzZXQ6cyxncm91cEJhc2VJbmZvRmlsdGVyOmksZ3JvdXBMaXN0OnV9KSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiAxMWUzIT09ZS5jb2RlJiZ0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxhPW5bMV07Yy5zZXRNZXNzYWdlKFwiaXNDb21tdW5pdHlSZWxheTpcIi5jb25jYXQocikpLnNldEVycm9yKGUsbyxhKS5lbmQoKX0pKSxyPygxMWUzPT09ZS5jb2RlJiYoYz1udWxsLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBjb21tdW5pdHkgdW5hdmFpbGFibGVcIikpKSxpbSh7Z3JvdXBMaXN0OnV9KSk6dW0oZSl9KSl9fSx7a2V5OlwiX2NhY2hlR3JvdXBNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuaGFzKGUpfHx0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuc2V0KGUsW10pLHRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5nZXQoZSkucHVzaCh0KX19LHtrZXk6XCJfZGVsZXRlQ2FjaGVkR3JvdXBNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmhhcyhlKSYmdGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmRlbGV0ZShlKX19LHtrZXk6XCJfbm90aWZ5Q2FjaGVkR3JvdXBNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5nZXQoZSl8fFtdO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5vbk5ld0dyb3VwTWVzc2FnZShlKX0pKSx0aGlzLl9kZWxldGVDYWNoZWRHcm91cE1lc3NhZ2UoZSksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fbm90aWZ5Q2FjaGVkR3JvdXBNZXNzYWdlIGdyb3VwSUQ6XCIpLmNvbmNhdChlLFwiIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKX19LHtrZXk6XCJfY2FjaGVHcm91cE1lc3NhZ2VBbmRQcm9iZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLmV2ZW50LHI9ZS5pdGVtO3RoaXMuX2NhY2hlR3JvdXBNZXNzYWdlKG4se2V2ZW50Om8sZGF0YUxpc3Q6W3JdfSksdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBTaW1wbGlmaWVkSW5mbyhuKS50aGVuKChmdW5jdGlvbihlKXtlLnR5cGU9PT1Zbi5HUlBfQVZDSEFUUk9PTT90Ll9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pP3QuX25vdGlmeUNhY2hlZEdyb3VwTWVzc2FnZShuKTp0Ll9ncm91cE1vZHVsZS5zZXRVbmpvaW5lZEFWQ2hhdFJvb20obik6KHQuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKFtlXSksdC5fbm90aWZ5Q2FjaGVkR3JvdXBNZXNzYWdlKG4pKX0pKSx0aGlzLl9jaGVja0NvdW50TWFwLmhhcyhuKXx8dGhpcy5fY2hlY2tDb3VudE1hcC5zZXQobiwwKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jYWNoZUdyb3VwTWVzc2FnZUFuZFByb2JlIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5jbGVhcigpLHRoaXMuX2NoZWNrQ291bnRNYXAuY2xlYXIoKSx0aGlzLl9ncm91cE1vZHVsZS5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uY2UoTW0sdGhpcy5faW5pdEdyb3VwTGlzdCx0aGlzKX19XSksZX0oKSxIbT17MTpcImluaXRcIiwyOlwibW9kaWZ5XCIsMzpcImNsZWFyXCIsNDpcImRlbGV0ZVwifSxqbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9ncm91cE1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIkdyb3VwQXR0cmlidXRlc0hhbmRsZXJcIix0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXA9bmV3IE1hcCx0aGlzLkNBQ0hFX0VYUElSRV9USU1FPTNlNCx0aGlzLl9ncm91cE1vZHVsZS5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKHltLHRoaXMuX29uQ2xvdWRDb25maWdVcGRhdGVkLHRoaXMpfXJldHVybiBFbihlLFt7a2V5OlwiX29uQ2xvdWRDb25maWdVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9ncm91cE1vZHVsZS5nZXRDbG91ZENvbmZpZyhcImdycF9hdHRyX2NhY2hlX3RpbWVcIik7aHUoZSl8fCh0aGlzLkNBQ0hFX0VYUElSRV9USU1FPU51bWJlcihlKSl9fSx7a2V5OlwidXBkYXRlTG9jYWxNYWluU2VxdWVuY2VPblJlY29ubmVjdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5sb2NhbE1haW5TZXF1ZW5jZT0wfSkpfX0se2tleTpcIm9uR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLmdyb3VwQXR0cmlidXRlT3B0aW9uLHI9by5tYWluU2VxdWVuY2UsYT1vLmhhc0NoYW5nZWRBdHRyaWJ1dGVJbmZvLHM9by5ncm91cEF0dHJpYnV0ZUxpc3QsaT12b2lkIDA9PT1zP1tdOnMsdT1vLm9wZXJhdGlvblR5cGU7aWYoUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWQuIGhhc0NoYW5nZWRBdHRyaWJ1dGVJbmZvOlwiKS5jb25jYXQoYSxcIiBvcGVyYXRpb25UeXBlOlwiKS5jb25jYXQodSkpLCFodSh1KSl7aWYoMT09PWEpe2lmKDQ9PT11KXt2YXIgYz1bXTtpLmZvckVhY2goKGZ1bmN0aW9uKGUpe2MucHVzaChlLmtleSl9KSksaT1VbihjKSxjPW51bGx9cmV0dXJuIHRoaXMuX3JlZnJlc2hDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixyZW1vdGVNYWluU2VxdWVuY2U6cixncm91cEF0dHJpYnV0ZUxpc3Q6aSxvcGVyYXRpb25UeXBlOkhtW3VdfSksdm9pZCB0aGlzLl9lbWl0R3JvdXBBdHRyaWJ1dGVzVXBkYXRlZChuKX1pZih0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuaGFzKG4pKXt2YXIgbD10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZ2V0KG4pLmF2Q2hhdFJvb21LZXk7dGhpcy5fZ2V0R3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4sYXZDaGF0Um9vbUtleTpsfSkudGhlbigoZnVuY3Rpb24oKXt0Ll9lbWl0R3JvdXBBdHRyaWJ1dGVzVXBkYXRlZChuKX0pKX19fX0se2tleTpcImluaXRHcm91cEF0dHJpYnV0ZXNDYWNoZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBJRCxuPWUuYXZDaGF0Um9vbUtleTt0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuc2V0KHQse2xhc3RVcGRhdGVUaW1lOjAsbG9jYWxNYWluU2VxdWVuY2U6MCxyZW1vdGVNYWluU2VxdWVuY2U6MCxhdHRyaWJ1dGVzOm5ldyBNYXAsYXZDaGF0Um9vbUtleTpufSksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5pbml0R3JvdXBBdHRyaWJ1dGVzQ2FjaGUgZ3JvdXBJRDpcIikuY29uY2F0KHQsXCIgYXZDaGF0Um9vbUtleTpcIikuY29uY2F0KG4pKX19LHtrZXk6XCJpbml0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUuZ3JvdXBBdHRyaWJ1dGVzLHI9dGhpcy5fY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixmdW5jTmFtZTpcImluaXRHcm91cEF0dHJpYnV0ZXNcIn0pO2lmKCEwIT09cilyZXR1cm4gdW0ocik7dmFyIGE9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldChuKSxzPWEucmVtb3RlTWFpblNlcXVlbmNlLGk9YS5hdkNoYXRSb29tS2V5LHU9bmV3IERwKFJnKTtyZXR1cm4gdS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiBtYWluU2VxdWVuY2U6XCIpLmNvbmNhdChzLFwiIGdyb3VwQXR0cmlidXRlczpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KG8pKSksdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkZkLHJlcXVlc3REYXRhOntncm91cElEOm4sYXZDaGF0Um9vbUtleTppLG1haW5TZXF1ZW5jZTpzLGdyb3VwQXR0cmlidXRlTGlzdDp0aGlzLl90cmFuc2Zvcm1Hcm91cEF0dHJpYnV0ZXMobyl9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHI9ZS5kYXRhLGE9ci5tYWluU2VxdWVuY2Uscz1VbihyLmdyb3VwQXR0cmlidXRlTGlzdCk7cmV0dXJuIHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS52YWx1ZT1vW2Uua2V5XX0pKSx0Ll9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4scmVtb3RlTWFpblNlcXVlbmNlOmEsZ3JvdXBBdHRyaWJ1dGVMaXN0OnMsb3BlcmF0aW9uVHlwZTpcImluaXRcIn0pLHUuc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5pbml0R3JvdXBBdHRyaWJ1dGVzIG9rLiBncm91cElEOlwiKS5jb25jYXQobikpLFFfKHtncm91cEF0dHJpYnV0ZXM6b30pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO3Uuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLHVtKGUpfSkpfX0se2tleTpcInNldEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLmdyb3VwQXR0cmlidXRlcyxyPXRoaXMuX2NoZWNrQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4sZnVuY05hbWU6XCJzZXRHcm91cEF0dHJpYnV0ZXNcIn0pO2lmKCEwIT09cilyZXR1cm4gdW0ocik7dmFyIGE9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldChuKSxzPWEucmVtb3RlTWFpblNlcXVlbmNlLGk9YS5hdkNoYXRSb29tS2V5LHU9YS5hdHRyaWJ1dGVzLGM9dGhpcy5fdHJhbnNmb3JtR3JvdXBBdHRyaWJ1dGVzKG8pO2MuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXk7ZS5zZXF1ZW5jZT0wLHUuaGFzKHQpJiYoZS5zZXF1ZW5jZT11LmdldCh0KS5zZXF1ZW5jZSl9KSk7dmFyIGw9bmV3IERwKE9nKTtyZXR1cm4gbC5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiBtYWluU2VxdWVuY2U6XCIpLmNvbmNhdChzLFwiIGdyb3VwQXR0cmlidXRlczpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KG8pKSksdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnFkLHJlcXVlc3REYXRhOntncm91cElEOm4sYXZDaGF0Um9vbUtleTppLG1haW5TZXF1ZW5jZTpzLGdyb3VwQXR0cmlidXRlTGlzdDpjfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciByPWUuZGF0YSxhPXIubWFpblNlcXVlbmNlLHM9VW4oci5ncm91cEF0dHJpYnV0ZUxpc3QpO3JldHVybiBzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UudmFsdWU9b1tlLmtleV19KSksdC5fcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpuLHJlbW90ZU1haW5TZXF1ZW5jZTphLGdyb3VwQXR0cmlidXRlTGlzdDpzLG9wZXJhdGlvblR5cGU6XCJtb2RpZnlcIn0pLGwuc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5zZXRHcm91cEF0dHJpYnV0ZXMgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSksUV8oe2dyb3VwQXR0cmlidXRlczpvfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07bC5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksdW0oZSl9KSl9fSx7a2V5OlwiZGVsZXRlR3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUua2V5TGlzdCxyPXZvaWQgMD09PW8/W106byxhPXRoaXMuX2NoZWNrQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4sZnVuY05hbWU6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIn0pO2lmKCEwIT09YSlyZXR1cm4gdW0oYSk7dmFyIHM9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldChuKSxpPXMucmVtb3RlTWFpblNlcXVlbmNlLHU9cy5hdkNoYXRSb29tS2V5LGM9cy5hdHRyaWJ1dGVzLGw9VW4oYy5rZXlzKCkpLGQ9VmQscD1cImNsZWFyXCIsZz17Z3JvdXBJRDpuLGF2Q2hhdFJvb21LZXk6dSxtYWluU2VxdWVuY2U6aX07aWYoci5sZW5ndGg+MCl7dmFyIGg9W107bD1bXSxkPXhkLHA9XCJkZWxldGVcIixyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PTA7Yy5oYXMoZSkmJih0PWMuZ2V0KGUpLnNlcXVlbmNlLGwucHVzaChlKSksaC5wdXNoKHtrZXk6ZSxzZXF1ZW5jZTp0fSl9KSksZy5ncm91cEF0dHJpYnV0ZUxpc3Q9aH12YXIgZj1uZXcgRHAoR2cpO3JldHVybiBmLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIG1haW5TZXF1ZW5jZTpcIikuY29uY2F0KGksXCIga2V5TGlzdDpcIikuY29uY2F0KHIsXCIgcHJvdG9jb2xOYW1lOlwiKS5jb25jYXQoZCkpLHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpkLHJlcXVlc3REYXRhOmd9KS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz1lLmRhdGEubWFpblNlcXVlbmNlO3JldHVybiB0Ll9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4scmVtb3RlTWFpblNlcXVlbmNlOm8sZ3JvdXBBdHRyaWJ1dGVMaXN0OnIsb3BlcmF0aW9uVHlwZTpwfSksZi5zZXROZXR3b3JrVHlwZSh0Ll9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmRlbGV0ZUdyb3VwQXR0cmlidXRlcyBvay4gZ3JvdXBJRDpcIikuY29uY2F0KG4pKSxRXyh7a2V5TGlzdDpsfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07Zi5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksdW0oZSl9KSl9fSx7a2V5OlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPXRoaXMuX2NoZWNrQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4sZnVuY05hbWU6XCJnZXRHcm91cEF0dHJpYnV0ZXNcIn0pO2lmKCEwIT09bylyZXR1cm4gdW0obyk7dmFyIHI9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldChuKSxhPXIuYXZDaGF0Um9vbUtleSxzPXIubGFzdFVwZGF0ZVRpbWUsaT1yLmxvY2FsTWFpblNlcXVlbmNlLHU9ci5yZW1vdGVNYWluU2VxdWVuY2UsYz1uZXcgRHAoYmcpO2lmKGMuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgbG9jYWxNYWluU2VxdWVuY2U6XCIpLmNvbmNhdChpLFwiIHJlbW90ZU1haW5TZXF1ZW5jZTpcIikuY29uY2F0KHUsXCIga2V5TGlzdDpcIikuY29uY2F0KGUua2V5TGlzdCkpLERhdGUubm93KCktcz49dGhpcy5DQUNIRV9FWFBJUkVfVElNRXx8aTx1KXJldHVybiB0aGlzLl9nZXRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixhdkNoYXRSb29tS2V5OmF9KS50aGVuKChmdW5jdGlvbihvKXtjLnNldE1vcmVNZXNzYWdlKFwiZ2V0IGF0dHJpYnV0ZXMgZnJvbSByZW1vdGUuIGNvdW50OlwiLmNvbmNhdChvLmxlbmd0aCkpLnNldE5ldHdvcmtUeXBlKHQuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZ2V0R3JvdXBBdHRyaWJ1dGVzIGZyb20gcmVtb3RlLiBncm91cElEOlwiKS5jb25jYXQobikpO3ZhciByPXQuX2dldExvY2FsR3JvdXBBdHRyaWJ1dGVzKGUpO3JldHVybiBRXyh7Z3JvdXBBdHRyaWJ1dGVzOnJ9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtjLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSx1bShlKX0pKTtjLnNldE1vcmVNZXNzYWdlKFwiZ2V0IGF0dHJpYnV0ZXMgZnJvbSBjYWNoZVwiKS5zZXROZXR3b3JrVHlwZSh0aGlzLl9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwQXR0cmlidXRlcyBmcm9tIGNhY2hlLiBncm91cElEOlwiKS5jb25jYXQobikpO3ZhciBsPXRoaXMuX2dldExvY2FsR3JvdXBBdHRyaWJ1dGVzKGUpO3JldHVybiBpbSh7Z3JvdXBBdHRyaWJ1dGVzOmx9KX19LHtrZXk6XCJfZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOktkLHJlcXVlc3REYXRhOlNuKHt9LGUpfSkudGhlbigoZnVuY3Rpb24obil7dmFyIG89bi5kYXRhLHI9by5tYWluU2VxdWVuY2UsYT1vLmdyb3VwQXR0cmlidXRlTGlzdCxzPVVuKGEpO3JldHVybiBodShyKXx8dC5fcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDplLmdyb3VwSUQscmVtb3RlTWFpblNlcXVlbmNlOnIsZ3JvdXBBdHRyaWJ1dGVMaXN0OnMsb3BlcmF0aW9uVHlwZTpcImdldFwifSksUWkubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5fZ2V0R3JvdXBBdHRyaWJ1dGVzIG9rLiBncm91cElEOlwiKS5jb25jYXQoZS5ncm91cElEKSksYX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHVtKGUpfSkpfX0se2tleTpcIl9nZXRMb2NhbEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBJRCxuPWUua2V5TGlzdCxvPXZvaWQgMD09PW4/W106bixyPXt9O2lmKCF0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuaGFzKHQpKXJldHVybiByO3ZhciBhPXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5nZXQodCkuYXR0cmlidXRlcztpZihvLmxlbmd0aD4wKW8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7YS5oYXMoZSkmJihyW2VdPWEuZ2V0KGUpLnZhbHVlKX0pKTtlbHNle3ZhciBzLGk9Qm4oYS5rZXlzKCkpO3RyeXtmb3IoaS5zKCk7IShzPWkubigpKS5kb25lOyl7dmFyIHU9cy52YWx1ZTtyW3VdPWEuZ2V0KHUpLnZhbHVlfX1jYXRjaChjKXtpLmUoYyl9ZmluYWxseXtpLmYoKX19cmV0dXJuIHJ9fSx7a2V5OlwiX3JlZnJlc2hDYWNoZWRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdyb3VwSUQsbj1lLnJlbW90ZU1haW5TZXF1ZW5jZSxvPWUuZ3JvdXBBdHRyaWJ1dGVMaXN0LHI9ZS5vcGVyYXRpb25UeXBlO2lmKHRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5oYXModCkpe3ZhciBhPXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5nZXQodCkscz1hLmxvY2FsTWFpblNlcXVlbmNlO2lmKFwiZ2V0XCI9PT1yfHxuLXM9PTEpYS5yZW1vdGVNYWluU2VxdWVuY2U9bixhLmxvY2FsTWFpblNlcXVlbmNlPW4sYS5sYXN0VXBkYXRlVGltZT1EYXRlLm5vdygpLHRoaXMuX3VwZGF0ZUNhY2hlZEF0dHJpYnV0ZXMoe2dyb3VwQXR0cmlidXRlczphLGdyb3VwQXR0cmlidXRlTGlzdDpvLG9wZXJhdGlvblR5cGU6cn0pO2Vsc2V7aWYocz09PW4pcmV0dXJuO2EucmVtb3RlTWFpblNlcXVlbmNlPW59dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLnNldCh0LGEpO3ZhciBpPVwib3BlcmF0aW9uVHlwZTpcIi5jb25jYXQocixcIiBsb2NhbE1haW5TZXF1ZW5jZTpcIikuY29uY2F0KHMsXCIgcmVtb3RlTWFpblNlcXVlbmNlOlwiKS5jb25jYXQobik7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlcy4gXCIpLmNvbmNhdChpKSl9fX0se2tleTpcIl91cGRhdGVDYWNoZWRBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncm91cEF0dHJpYnV0ZXMsbj1lLmdyb3VwQXR0cmlidXRlTGlzdCxvPWUub3BlcmF0aW9uVHlwZTtcImNsZWFyXCIhPT1vP1wiZGVsZXRlXCIhPT1vPyhcImluaXRcIj09PW8mJnQuYXR0cmlidXRlcy5jbGVhcigpLG4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5rZXksbz1lLnZhbHVlLHI9ZS5zZXF1ZW5jZTt0LmF0dHJpYnV0ZXMuc2V0KG4se3ZhbHVlOm8sc2VxdWVuY2U6cn0pfSkpKTpuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuYXR0cmlidXRlcy5kZWxldGUoZSl9KSk6dC5hdHRyaWJ1dGVzLmNsZWFyKCl9fSx7a2V5OlwiX2NoZWNrQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncm91cElELG49ZS5mdW5jTmFtZTtpZih0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKHQpJiZ0aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwUHJvZmlsZSh0KS50eXBlIT09WW4uR1JQX0FWQ0hBVFJPT00pe3JldHVybiBRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXMuIFwiKS5jb25jYXQoXCLpnZ7nm7Tmkq3nvqTkuI3og73kvb/nlKjnvqTlsZ7mgKcgQVBJXCIpKSxuZXcgcm0oe2NvZGU6bHAuQ0FOTk9UX1VTRV9HUlBfQVRUUl9OT1RfQVZDSEFUUk9PTSxtZXNzYWdlOlwi6Z2e55u05pKt576k5LiN6IO95L2/55So576k5bGe5oCnIEFQSVwifSl9dmFyIG89dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldCh0KTtpZihodShvKSl7dmFyIHI9XCLlpoLmnpwgZ3JvdXBJRDpcIi5jb25jYXQodCxcIiDmmK/nm7Tmkq3nvqTvvIzkvb/nlKggXCIpLmNvbmNhdChuLFwiIOWJjeWFiOS9v+eUqCBqb2luR3JvdXAg5o6l5Y+j55Sz6K+35Yqg5YWl576k57uE77yM6K+m57uG6K+35Y+C6ICDIGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9TREsuaHRtbCNqb2luR3JvdXBcIik7cmV0dXJuIFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jaGVja0NhY2hlZEdyb3VwQXR0cmlidXRlcy4gXCIpLmNvbmNhdChyKSksbmV3IHJtKHtjb2RlOmxwLkNBTk5PVF9VU0VfR1JQX0FUVFJfQVZDSEFUUk9PTV9VTkpPSU4sbWVzc2FnZTpyfSl9cmV0dXJuITB9fSx7a2V5OlwiX3RyYW5zZm9ybUdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVtdO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXt0LnB1c2goe2tleTpuLHZhbHVlOmVbbl19KX0pKSx0fX0se2tleTpcIl9lbWl0R3JvdXBBdHRyaWJ1dGVzVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldExvY2FsR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOmV9KTt0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChXbi5HUk9VUF9BVFRSSUJVVEVTX1VQREFURUQse2dyb3VwSUQ6ZSxncm91cEF0dHJpYnV0ZXM6dH0pfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuY2xlYXIoKSx0aGlzLkNBQ0hFX0VYUElSRV9USU1FPTNlNH19XSksZX0oKSxXbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKTt2YXIgbj10Lm1hbmFnZXIsbz10Lmdyb3VwSUQscj10Lm9uSW5pdCxhPXQub25TdWNjZXNzLHM9dC5vbkZhaWw7dGhpcy5fY2xhc3NOYW1lPVwiUG9sbGluZ1wiLHRoaXMuX21hbmFnZXI9bix0aGlzLl9ncm91cE1vZHVsZT1uLl9ncm91cE1vZHVsZSx0aGlzLl9vbkluaXQ9cix0aGlzLl9vblN1Y2Nlc3M9YSx0aGlzLl9vbkZhaWw9cyx0aGlzLl9ncm91cElEPW8sdGhpcy5fdGltZW91dElEPS0xLHRoaXMuX2lzUnVubmluZz0hMSx0aGlzLl9wcm90b2NvbE5hbWU9YmR9cmV0dXJuIEVuKGUsW3trZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ3JvdXBNb2R1bGUuaXNMb2dnZWRJbigpO2V8fCh0aGlzLl9wcm90b2NvbE5hbWU9d2QpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RhcnQgcG9sbGluZ0ludGVydmFsOlwiKS5jb25jYXQodGhpcy5fbWFuYWdlci5nZXRQb2xsaW5nSW50ZXJ2YWwoKSxcIiBpc0xvZ2dlZEluOlwiKS5jb25jYXQoZSkpLHRoaXMuX2lzUnVubmluZz0hMCx0aGlzLl9yZXF1ZXN0KCl9fSx7a2V5OlwiaXNSdW5uaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNSdW5uaW5nfX0se2tleTpcIl9yZXF1ZXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5fb25Jbml0KHRoaXMuX2dyb3VwSUQpO3RoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp0aGlzLl9wcm90b2NvbE5hbWUscmVxdWVzdERhdGE6dH0pLnRoZW4oKGZ1bmN0aW9uKHQpe2UuX29uU3VjY2VzcyhlLl9ncm91cElELHQpLGUuaXNSdW5uaW5nKCkmJihjbGVhclRpbWVvdXQoZS5fdGltZW91dElEKSxlLl90aW1lb3V0SUQ9c2V0VGltZW91dChlLl9yZXF1ZXN0LmJpbmQoZSksZS5fbWFuYWdlci5nZXRQb2xsaW5nSW50ZXJ2YWwoKSkpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtlLl9vbkZhaWwoZS5fZ3JvdXBJRCx0KSxlLmlzUnVubmluZygpJiYoY2xlYXJUaW1lb3V0KGUuX3RpbWVvdXRJRCksZS5fdGltZW91dElEPXNldFRpbWVvdXQoZS5fcmVxdWVzdC5iaW5kKGUpLGUuX21hbmFnZXIuTUFYX1BPTExJTkdfSU5URVJWQUwpKX0pKX19LHtrZXk6XCJzdG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnN0b3BcIikpLHRoaXMuX3RpbWVvdXRJRD4wJiYoY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRJRCksdGhpcy5fdGltZW91dElEPS0xKSx0aGlzLl9pc1J1bm5pbmc9ITF9fV0pLGV9KCksWW09ezM6ITAsNDohMCw1OiEwLDY6ITB9LCRtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX2dyb3VwTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiQVZDaGF0Um9vbUhhbmRsZXJcIix0aGlzLl9qb2luZWRHcm91cE1hcD1uZXcgTWFwLHRoaXMuX3BvbGxpbmdSZXF1ZXN0SW5mb01hcD1uZXcgTWFwLHRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcD1uZXcgTWFwLHRoaXMuc2VxdWVuY2VzTGlua2VkTGlzdD1uZXcgUm0oMTAwKSx0aGlzLm1lc3NhZ2VJRExpbmtlZExpc3Q9bmV3IFJtKDEwMCksdGhpcy5yZWNlaXZlZE1lc3NhZ2VDb3VudD0wLHRoaXMuX3JlcG9ydE1lc3NhZ2VTdGFja2VkQ291bnQ9MCx0aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcD1uZXcgTWFwLHRoaXMuREVGQVVMVF9FWFBJUkVfVElNRT02MCx0aGlzLkRFRkFVTFRfUE9MTElOR19JTlRFUlZBTD0zMDAsdGhpcy5NQVhfUE9MTElOR19JTlRFUlZBTD0yZTMsdGhpcy5fcG9sbGluZ0ludGVydmFsPXRoaXMuREVGQVVMVF9QT0xMSU5HX0lOVEVSVkFMfXJldHVybiBFbihlLFt7a2V5OlwiaGFzSm9pbmVkQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2pvaW5lZEdyb3VwTWFwLnNpemU+MH19LHtrZXk6XCJjaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2pvaW5lZEdyb3VwTWFwLmhhcyhlKX19LHtrZXk6XCJnZXRKb2luZWRBVkNoYXRSb29tXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fam9pbmVkR3JvdXBNYXAuc2l6ZT4wP1VuKHRoaXMuX2pvaW5lZEdyb3VwTWFwLmtleXMoKSk6bnVsbH19LHtrZXk6XCJfdXBkYXRlUmVxdWVzdERhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gU24oe30sdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLmdldChlKSl9fSx7a2V5OlwiX2hhbmRsZVN1Y2Nlc3NcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQuZGF0YSxvPW4ua2V5LHI9bi5uZXh0U2VxLGE9bi5yc3BNc2dMaXN0O2lmKDAhPT1uLmVycm9yQ29kZSl7dmFyIHM9dGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLmdldChlKSxpPW5ldyBEcChIZyksdT1zP1wiXCIuY29uY2F0KHMua2V5LFwiLVwiKS5jb25jYXQocy5zdGFydFNlcSk6XCJyZXF1ZXN0SW5mbyBpcyB1bmRlZmluZWRcIjtpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQoZSxcIi1cIikuY29uY2F0KHUsXCItXCIpLmNvbmNhdCh0LmVycm9ySW5mbykpLnNldENvZGUodC5lcnJvckNvZGUpLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCghMCl9ZWxzZXtpZighdGhpcy5jaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEKGUpKXJldHVybjtsdShvKSYmY3UocikmJnRoaXMuX3BvbGxpbmdSZXF1ZXN0SW5mb01hcC5zZXQoZSx7a2V5Om8sc3RhcnRTZXE6cn0pLGd1KGEpJiZhLmxlbmd0aD4wJiYoYS5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnRvPWUuZ3JvdXBJRH0pKSx0aGlzLm9uTWVzc2FnZShhKSl9fX0se2tleTpcIl9oYW5kbGVGYWlsdXJlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZ3UoZSkmJjAhPT1lLmxlbmd0aCl7dmFyIHQ9bnVsbCxuPVtdLG89dGhpcy5fZ2V0TW9kdWxlKGxsKSxyPXRoaXMuX2dldE1vZHVsZShTbCksYT1lLmxlbmd0aDthPjEmJmUuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zZXF1ZW5jZS10LnNlcXVlbmNlfSkpO2Zvcih2YXIgcz10aGlzLl9nZXRNb2R1bGUoZGwpLGk9MDtpPGE7aSsrKWlmKFltW2VbaV0uZXZlbnRdKXt0aGlzLnJlY2VpdmVkTWVzc2FnZUNvdW50Kz0xLHQ9dGhpcy5wYWNrTWVzc2FnZShlW2ldLGVbaV0uZXZlbnQpO3ZhciB1PTE9PT1lW2ldLmlzTW9kaWZpZWQsYz0xPT09ZVtpXS5pc0hpc3RvcnlNZXNzYWdlO2lmKChzLmlzVW5saW1pdGVkQVZDaGF0Um9vbSgpfHwhdGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0Lmhhcyh0LnNlcXVlbmNlKSkmJiF0aGlzLm1lc3NhZ2VJRExpbmtlZExpc3QuaGFzKHQuSUQpKXt2YXIgbD10LmNvbnZlcnNhdGlvbklEO2lmKHRoaXMucmVjZWl2ZWRNZXNzYWdlQ291bnQlNDA9PTAmJnRoaXMuX2dldE1vZHVsZShJbCkuZGV0ZWN0TWVzc2FnZUxvc3MobCx0aGlzLnNlcXVlbmNlc0xpbmtlZExpc3QuZGF0YSgpKSxudWxsIT09dGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0LnRhaWwoKSl7dmFyIGQ9dGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0LnRhaWwoKS52YWx1ZSxwPXQuc2VxdWVuY2UtZDtwPjEmJnA8PTIwP3RoaXMuX2dldE1vZHVsZShJbCkub25NZXNzYWdlTWF5YmVMb3N0KGwsZCsxLHAtMSk6cDwtMSYmcD49LTIwJiZ0aGlzLl9nZXRNb2R1bGUoSWwpLm9uTWVzc2FnZU1heWJlTG9zdChsLHQuc2VxdWVuY2UrMSxNYXRoLmFicyhwKS0xKX10aGlzLnNlcXVlbmNlc0xpbmtlZExpc3Quc2V0KHQuc2VxdWVuY2UpLHRoaXMubWVzc2FnZUlETGlua2VkTGlzdC5zZXQodC5JRCk7dmFyIGc9ITE7aWYodGhpcy5faXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlKHQpP3UmJihnPSEwLHQuaXNNb2RpZmllZD11LG8udXBkYXRlTWVzc2FnZUlzTW9kaWZpZWRQcm9wZXJ0eSh0KSk6Zz0hMCxnKXtpZih0LmNvbnZlcnNhdGlvblR5cGUsWW4uQ09OVl9TWVNURU0sIWMmJnQuY29udmVyc2F0aW9uVHlwZSE9PVluLkNPTlZfU1lTVEVNKXt2YXIgaD10LmNvbnZlcnNhdGlvbklELnJlcGxhY2UoWW4uQ09OVl9HUk9VUCxcIlwiKTt0aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAuaGFzKGgpP3IuYWRkTWVzc2FnZVNlcXVlbmNlKHtrZXk6SXAsbWVzc2FnZTp0fSk6KHQudHlwZSE9PVluLk1TR19HUlBfVElQJiZ0LmNsaWVudFRpbWU+MCYmci5hZGRNZXNzYWdlRGVsYXkodC5jbGllbnRUaW1lKSxyLmFkZE1lc3NhZ2VTZXF1ZW5jZSh7a2V5OnlwLG1lc3NhZ2U6dH0pKX1uLnB1c2godCl9fX1lbHNlIFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTWVzc2FnZSDmnKrlpITnkIbnmoQgZXZlbnQg57G75Z6LOiBcIikuY29uY2F0KGVbaV0uZXZlbnQpKTtpZigwIT09bi5sZW5ndGgpe3RoaXMuX2dyb3VwTW9kdWxlLmZpbHRlck1vZGlmaWVkTWVzc2FnZShuKTt2YXIgZj10aGlzLnBhY2tDb252ZXJzYXRpb25PcHRpb24obik7aWYoZi5sZW5ndGg+MCl0aGlzLl9nZXRNb2R1bGUobGwpLm9uTmV3TWVzc2FnZSh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6Zixpc0luc3RhbnRNZXNzYWdlOiEwfSk7UWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTWVzc2FnZSBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksdGhpcy5fY2hlY2tNZXNzYWdlU3RhY2tlZChuKTt2YXIgXz10aGlzLl9ncm91cE1vZHVsZS5maWx0ZXJVbm1vZGlmaWVkTWVzc2FnZShuKTtfLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChXbi5NRVNTQUdFX1JFQ0VJVkVELF8pLG4ubGVuZ3RoPTB9fX19LHtrZXk6XCJfY2hlY2tNZXNzYWdlU3RhY2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUubGVuZ3RoO3Q+PTEwMCYmKFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jaGVja01lc3NhZ2VTdGFja2VkIOebtOaSree+pOa2iOaBr+Wghuenr+aVsDpcIikuY29uY2F0KGUubGVuZ3RoLCfvvIHlj6/og73kvJrlr7zoh7Tlvq7kv6HlsI/nqIvluo/muLLmn5Pml7bpgYfliLAgXCJEb20gbGltaXQgZXhjZWVkZWRcIiDnmoTplJnor6/vvIzlu7rorq7mjqXlhaXkvqfmraTml7blj6rmuLLmn5PmnIDov5HnmoQxMOadoea2iOaBrycpKSx0aGlzLl9yZXBvcnRNZXNzYWdlU3RhY2tlZENvdW50PDUmJihuZXcgRHAoV2cpLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJjb3VudDpcIi5jb25jYXQodCxcIiBncm91cElEOlwiKS5jb25jYXQoVW4odGhpcy5fam9pbmVkR3JvdXBNYXAua2V5cygpKSkpLnNldExldmVsKFwid2FybmluZ1wiKS5lbmQoKSx0aGlzLl9yZXBvcnRNZXNzYWdlU3RhY2tlZENvdW50Kz0xKSl9fSx7a2V5OlwiX2lzTWVzc2FnZVNlbnRCeUN1cnJlbnRJbnN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5fZ2V0TW9kdWxlKGxsKS5pc01lc3NhZ2VTZW50QnlDdXJyZW50SW5zdGFuY2UoZSl9fSx7a2V5OlwicGFja01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2UuY3VycmVudFVzZXI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSxlLmNvbnZlcnNhdGlvblR5cGU9NT09PXQ/WW4uQ09OVl9TWVNURU06WW4uQ09OVl9HUk9VUCxlLmlzU3lzdGVtTWVzc2FnZT0hIWUuaXNTeXN0ZW1NZXNzYWdlO3ZhciBuPW5ldyBYXyhlKSxvPXRoaXMucGFja0VsZW1lbnRzKGUsdCk7cmV0dXJuIG4uc2V0RWxlbWVudChvKSxufX0se2tleTpcInBhY2tFbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIDQ9PT10fHw2PT09dD8odGhpcy5fdXBkYXRlTWVtYmVyQ291bnRCeUdyb3VwVGlwcyhlKSx0aGlzLl9vbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWQoZSkse3R5cGU6WW4uTVNHX0dSUF9USVAsY29udGVudDpTbih7fSxlLmVsZW1lbnRzLHtncm91cFByb2ZpbGU6ZS5ncm91cFByb2ZpbGV9KX0pOjU9PT10P3t0eXBlOlluLk1TR19HUlBfU1lTX05PVElDRSxjb250ZW50OlNuKHt9LGUuZWxlbWVudHMse2dyb3VwUHJvZmlsZTplLmdyb3VwUHJvZmlsZX0pfTp0aGlzLl9nZXRNb2R1bGUoZmwpLnBhcnNlRWxlbWVudHMoZS5lbGVtZW50cyxlLmZyb20pfX0se2tleTpcInBhY2tDb252ZXJzYXRpb25PcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IE1hcCxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBvPWVbbl0scj1vLmNvbnZlcnNhdGlvbklEO2lmKHQuaGFzKHIpKXt2YXIgYT10LmdldChyKTthLmxhc3RNZXNzYWdlPW8sXCJpblwiPT09by5mbG93JiZhLnVucmVhZENvdW50Kyt9ZWxzZSB0LnNldChyLHtjb252ZXJzYXRpb25JRDpvLmNvbnZlcnNhdGlvbklELHVucmVhZENvdW50Olwib3V0XCI9PT1vLmZsb3c/MDoxLHR5cGU6by5jb252ZXJzYXRpb25UeXBlLHN1YlR5cGU6by5jb252ZXJzYXRpb25TdWJUeXBlLGxhc3RNZXNzYWdlOm99KX1yZXR1cm4gVW4odC52YWx1ZXMoKSl9fSx7a2V5OlwiX3VwZGF0ZU1lbWJlckNvdW50QnlHcm91cFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdyb3VwUHJvZmlsZS5ncm91cElELG49ZS5lbGVtZW50cy5vbmxpbmVNZW1iZXJJbmZvLG89dm9pZCAwPT09bj92b2lkIDA6bjtpZighWHUobykpe3ZhciByPW8ub25saW5lTWVtYmVyTnVtLGE9dm9pZCAwPT09cj8wOnIscz1vLmV4cGlyZVRpbWUsaT12b2lkIDA9PT1zP3RoaXMuREVGQVVMVF9FWFBJUkVfVElNRTpzLHU9dGhpcy5fb25saW5lTWVtYmVyQ291bnRNYXAuZ2V0KHQpfHx7fSxjPURhdGUubm93KCk7WHUodSk/T2JqZWN0LmFzc2lnbih1LHtsYXN0UmVxVGltZTowLGxhc3RTeW5jVGltZTowLGxhdGVzdFVwZGF0ZVRpbWU6YyxtZW1iZXJDb3VudDphLGV4cGlyZVRpbWU6aX0pOih1LmxhdGVzdFVwZGF0ZVRpbWU9Yyx1Lm1lbWJlckNvdW50PWEpLFFpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fdXBkYXRlTWVtYmVyQ291bnRCeUdyb3VwVGlwcyBpbmZvOlwiKSx1KSx0aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5zZXQodCx1KX19fSx7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAuaGFzKGUpKXt2YXIgdD10aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAuZ2V0KGUpO3QuaXNSdW5uaW5nKCl8fHQuc3RhcnQoKX1lbHNle3ZhciBuPW5ldyBXbSh7bWFuYWdlcjp0aGlzLGdyb3VwSUQ6ZSxvbkluaXQ6dGhpcy5fdXBkYXRlUmVxdWVzdERhdGEuYmluZCh0aGlzKSxvblN1Y2Nlc3M6dGhpcy5faGFuZGxlU3VjY2Vzcy5iaW5kKHRoaXMpLG9uRmFpbDp0aGlzLl9oYW5kbGVGYWlsdXJlLmJpbmQodGhpcyl9KTtuLnN0YXJ0KCksdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLnNldChlLG4pLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RhcnQgZ3JvdXBJRDpcIikuY29uY2F0KGUpKX19fSx7a2V5OlwiaGFuZGxlSm9pblJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX3ByZUNoZWNrKCkudGhlbigoZnVuY3Rpb24oKXt2YXIgbj1lLmxvbmdQb2xsaW5nS2V5LG89ZS5ncm91cCxyPW8uZ3JvdXBJRDtyZXR1cm4gdC5fam9pbmVkR3JvdXBNYXAuc2V0KHIsbyksdC5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAoW29dKSx0Ll9ncm91cE1vZHVsZS5kZWxldGVVbmpvaW5lZEFWQ2hhdFJvb20ociksdC5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhMSksaHUobik/aW0oe3N0YXR1czphdSxncm91cDpvfSk6UHJvbWlzZS5yZXNvbHZlKCl9KSl9fSx7a2V5Olwic3RhcnRSdW5Mb29wXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5oYW5kbGVKb2luUmVzdWx0KGUpLnRoZW4oKGZ1bmN0aW9uKCl7dmFyIG49ZS5sb25nUG9sbGluZ0tleSxvPWUuZ3JvdXAscj1vLmdyb3VwSUQ7cmV0dXJuIHQuX3BvbGxpbmdSZXF1ZXN0SW5mb01hcC5zZXQocix7a2V5Om4sc3RhcnRTZXE6MH0pLHQuc3RhcnQociksdC5fZ3JvdXBNb2R1bGUuaXNMb2dnZWRJbigpP2ltKHtzdGF0dXM6YXUsZ3JvdXA6b30pOmltKHtzdGF0dXM6YXV9KX0pKX19LHtrZXk6XCJfcHJlQ2hlY2tcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuX2dldE1vZHVsZShkbCkuaXNVbmxpbWl0ZWRBVkNoYXRSb29tKCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2lmKCF0aGlzLmhhc0pvaW5lZEFWQ2hhdFJvb20oKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dmFyIGU9UG4odGhpcy5fam9pbmVkR3JvdXBNYXAuZW50cmllcygpLm5leHQoKS52YWx1ZSwyKSx0PWVbMF0sbj1lWzFdO2lmKHRoaXMuX2dyb3VwTW9kdWxlLmlzTG9nZ2VkSW4oKSl7aWYoIShuLnNlbGZJbmZvLnJvbGU9PT1Zbi5HUlBfTUJSX1JPTEVfT1dORVJ8fG4ub3duZXJJRD09PXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCkpKXJldHVybiB0aGlzLl9ncm91cE1vZHVsZS5xdWl0R3JvdXAodCk7dGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbih0KX1lbHNlIHRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24odCk7cmV0dXJuIHRoaXMucmVzZXQodCksUHJvbWlzZS5yZXNvbHZlKCl9fSx7a2V5Olwiam9pbldpdGhvdXRBdXRoXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5qb2luV2l0aG91dEF1dGhcIikscj1uZXcgRHAoTGcpO3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6TWQscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBhPWUuZGF0YS5sb25nUG9sbGluZ0tleTtpZih0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1QbihlLDIpLG89KHRbMF0sdFsxXSk7ci5zZXROZXR3b3JrVHlwZShvKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiBsb25nUG9sbGluZ0tleTpcIikuY29uY2F0KGEpKS5lbmQoITApfSkpLGh1KGEpKXJldHVybiB1bShuZXcgcm0oe2NvZGU6bHAuQ0FOTk9UX0pPSU5fTk9OX0FWQ0hBVFJPT01fV0lUSE9VVF9MT0dJTixtZXNzYWdlOmRwLkNBTk5PVF9KT0lOX05PTl9BVkNIQVRST09NX1dJVEhPVVRfTE9HSU59KSk7UWkubG9nKFwiXCIuY29uY2F0KG8sXCIgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSksdC5fZ2V0TW9kdWxlKGxsKS5zZXRDb21wbGV0ZWQoXCJcIi5jb25jYXQoWW4uQ09OVl9HUk9VUCkuY29uY2F0KG4pKTt2YXIgcz1uZXcgR20oe2dyb3VwSUQ6bn0pO3JldHVybiB0LnN0YXJ0UnVuTG9vcCh7Z3JvdXA6cyxsb25nUG9sbGluZ0tleTphfSksUV8oe3N0YXR1czphdX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gUWkuZXJyb3IoXCJcIi5jb25jYXQobyxcIiBmYWlsZWQuIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIGVycm9yOlwiKSxlKSx0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbz1Qbih0LDIpLGE9b1swXSxzPW9bMV07ci5zZXRFcnJvcihlLGEscykuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4pKS5lbmQoITApfSkpLHVtKGUpfSkpLmZpbmFsbHkoKGZ1bmN0aW9uKCl7dC5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGdsKS5yZXBvcnRBdE9uY2UoKX0pKX19LHtrZXk6XCJnZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fb25saW5lTWVtYmVyQ291bnRNYXAuZ2V0KGUpfHx7fSxuPURhdGUubm93KCk7cmV0dXJuIFh1KHQpfHxuLXQubGFzdFN5bmNUaW1lPjFlMyp0LmV4cGlyZVRpbWUmJm4tdC5sYXRlc3RVcGRhdGVUaW1lPjFlNCYmbi10Lmxhc3RSZXFUaW1lPjNlMz8odC5sYXN0UmVxVGltZT1uLHRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLnNldChlLHQpLHRoaXMuX2dldEdyb3VwT25saW5lTWVtYmVyQ291bnQoZSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIFFfKHttZW1iZXJDb3VudDplLm1lbWJlckNvdW50fSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB1bShlKX0pKSk6aW0oe21lbWJlckNvdW50OnQubWVtYmVyQ291bnR9KX19LHtrZXk6XCJfZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2dldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIik7cmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpQZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDplfX0pLnRoZW4oKGZ1bmN0aW9uKG8pe3ZhciByPXQuX29ubGluZU1lbWJlckNvdW50TWFwLmdldChlKXx8e30sYT1vLmRhdGEscz1hLm9ubGluZU1lbWJlck51bSxpPXZvaWQgMD09PXM/MDpzLHU9YS5leHBpcmVUaW1lLGM9dm9pZCAwPT09dT90LkRFRkFVTFRfRVhQSVJFX1RJTUU6dTtRaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gZ3JvdXBJRDpcIikuY29uY2F0KGUsXCIgbWVtYmVyQ291bnQ6XCIpLmNvbmNhdChpLFwiIGV4cGlyZVRpbWU6XCIpLmNvbmNhdChjKSk7dmFyIGw9RGF0ZS5ub3coKTtyZXR1cm4gWHUocikmJihyLmxhc3RSZXFUaW1lPWwpLHQuX29ubGluZU1lbWJlckNvdW50TWFwLnNldChlLE9iamVjdC5hc3NpZ24ocix7bGFzdFN5bmNUaW1lOmwsbGF0ZXN0VXBkYXRlVGltZTpsLG1lbWJlckNvdW50OmksZXhwaXJlVGltZTpjfSkpLHttZW1iZXJDb3VudDppfX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuIFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxvKSxuZXcgRHAoQmcpLnNldENvZGUoby5jb2RlKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZSxcIiBlcnJvcjpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KG8pKSkuc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUHJvbWlzZS5yZWplY3Qobyl9KSl9fSx7a2V5OlwiX29uR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBQcm9maWxlLmdyb3VwSUQsbj1lLmVsZW1lbnRzLG89bi5vcGVyYXRpb25UeXBlLHI9bi5uZXdHcm91cFByb2ZpbGU7aWYoNj09PW8pe3ZhciBhPSh2b2lkIDA9PT1yP3ZvaWQgMDpyKS5ncm91cEF0dHJpYnV0ZU9wdGlvbjtYdShhKXx8dGhpcy5fZ3JvdXBNb2R1bGUub25Hcm91cEF0dHJpYnV0ZXNVcGRhdGVkKHtncm91cElEOnQsZ3JvdXBBdHRyaWJ1dGVPcHRpb246YX0pfX19LHtrZXk6XCJfZ2V0TW9kdWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShlKX19LHtrZXk6XCJzZXRQb2xsaW5nSW50ZXJ2YWxcIix2YWx1ZTpmdW5jdGlvbihlKXtodShlKXx8Y3UoZSl8fCh0aGlzLl9wb2xsaW5nSW50ZXJ2YWw9cGFyc2VJbnQoZSwxMCksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRQb2xsaW5nSW50ZXJ2YWwgdmFsdWU6XCIpLmNvbmNhdCh0aGlzLl9wb2xsaW5nSW50ZXJ2YWwpKSl9fSx7a2V5OlwiZ2V0UG9sbGluZ0ludGVydmFsXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9sbGluZ0ludGVydmFsfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZSl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldCBncm91cElEOlwiKS5jb25jYXQoZSkpO3ZhciB0PXRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5nZXQoZSk7dCYmdC5zdG9wKCksdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmRlbGV0ZShlKSx0aGlzLl9qb2luZWRHcm91cE1hcC5kZWxldGUoZSksdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLmRlbGV0ZShlKSx0aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5kZWxldGUoZSl9ZWxzZXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0IGFsbFwiKSk7dmFyIG4sbz1Cbih0aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAudmFsdWVzKCkpO3RyeXtmb3Ioby5zKCk7IShuPW8ubigpKS5kb25lOyl7bi52YWx1ZS5zdG9wKCl9fWNhdGNoKHIpe28uZShyKX1maW5hbGx5e28uZigpfXRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5jbGVhcigpLHRoaXMuX2pvaW5lZEdyb3VwTWFwLmNsZWFyKCksdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLmNsZWFyKCksdGhpcy5fb25saW5lTWVtYmVyQ291bnRNYXAuY2xlYXIoKX10aGlzLnNlcXVlbmNlc0xpbmtlZExpc3QucmVzZXQoKSx0aGlzLm1lc3NhZ2VJRExpbmtlZExpc3QucmVzZXQoKSx0aGlzLnJlY2VpdmVkTWVzc2FnZUNvdW50PTAsdGhpcy5fcmVwb3J0TWVzc2FnZVN0YWNrZWRDb3VudD0wLHRoaXMuX3BvbGxpbmdJbnRlcnZhbD10aGlzLkRFRkFVTFRfUE9MTElOR19JTlRFUlZBTH19XSksZX0oKSx6bT0xLEptPTE1LFhtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX2dyb3VwTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiR3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyXCIsdGhpcy5wZW5kZW5jeU1hcD1uZXcgTWFwfXJldHVybiBFbihlLFt7a2V5Olwib25OZXdHcm91cFN5c3RlbU5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YUxpc3Qsbj1lLmlzU3luY2luZ0VuZGVkLG89ZS5pc0luc3RhbnRNZXNzYWdlO1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblJlY2VpdmVTeXN0ZW1Ob3RpY2UgY291bnQ6XCIpLmNvbmNhdCh0Lmxlbmd0aCkpO3ZhciByPXRoaXMubmV3U3lzdGVtTm90aWNlU3RvcmVkQW5kU3VtbWFyeSh7bm90aWZpZXNMaXN0OnQsaXNJbnN0YW50TWVzc2FnZTpvfSksYT1yLmV2ZW50RGF0YUxpc3Qscz1yLnJlc3VsdDthLmxlbmd0aD4wJiYodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGxsKS5vbk5ld01lc3NhZ2Uoe2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0OmEsaXNJbnN0YW50TWVzc2FnZTpvfSksdGhpcy5fb25SZWNlaXZlZEdyb3VwU3lzdGVtTm90aWNlKHtyZXN1bHQ6cyxpc0luc3RhbnRNZXNzYWdlOm99KSk7bz9zLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChXbi5NRVNTQUdFX1JFQ0VJVkVELHMpOiEwPT09biYmdGhpcy5fY2xlYXJHcm91cFN5c3RlbU5vdGljZSgpfX0se2tleTpcIm5ld1N5c3RlbU5vdGljZVN0b3JlZEFuZFN1bW1hcnlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm5vdGlmaWVzTGlzdCxuPWUuaXNJbnN0YW50TWVzc2FnZSxvPW51bGwscj10Lmxlbmd0aCxhPTAscz1bXSxpPXtjb252ZXJzYXRpb25JRDpZbi5DT05WX1NZU1RFTSx1bnJlYWRDb3VudDowLHR5cGU6WW4uQ09OVl9TWVNURU0sc3ViVHlwZTpudWxsLGxhc3RNZXNzYWdlOm51bGx9O2ZvcihhPTA7YTxyO2ErKyl7dmFyIHU9dFthXTtpZih1LmVsZW1lbnRzLm9wZXJhdGlvblR5cGUhPT1KbSl1LmN1cnJlbnRVc2VyPXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCksdS5jb252ZXJzYXRpb25UeXBlPVluLkNPTlZfU1lTVEVNLHUuY29udmVyc2F0aW9uSUQ9WW4uQ09OVl9TWVNURU0sKG89bmV3IFhfKHUpKS5zZXRFbGVtZW50KHt0eXBlOlluLk1TR19HUlBfU1lTX05PVElDRSxjb250ZW50OlNuKHt9LHUuZWxlbWVudHMse2dyb3VwUHJvZmlsZTp1Lmdyb3VwUHJvZmlsZX0pfSksby5pc1N5c3RlbU1lc3NhZ2U9ITAsKDE9PT1vLnNlcXVlbmNlJiYxPT09by5yYW5kb218fDI9PT1vLnNlcXVlbmNlJiYyPT09by5yYW5kb20pJiYoby5zZXF1ZW5jZT1TdSgpLG8ucmFuZG9tPVN1KCksby5nZW5lcmF0ZU1lc3NhZ2VJRCgpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIubmV3U3lzdGVtTm90aWNlU3RvcmVkQW5kU3VtbWFyeSBzZXF1ZW5jZSBhbmQgcmFuZG9tIG1heWJlIGR1cGxpY2F0ZWQsIHJlZ2VuZXJhdGUuIElEOlwiKS5jb25jYXQoby5JRCkpKSx0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUobGwpLnB1c2hJbnRvTm90aWNlUmVzdWx0KHMsbykmJihuP2kudW5yZWFkQ291bnQrKzpvLnNldElzUmVhZCghMCksaS5zdWJUeXBlPW8uY29udmVyc2F0aW9uU3ViVHlwZSl9cmV0dXJuIGkubGFzdE1lc3NhZ2U9c1tzLmxlbmd0aC0xXSx7ZXZlbnREYXRhTGlzdDpzLmxlbmd0aD4wP1tpXTpbXSxyZXN1bHQ6c319fSx7a2V5OlwiX2NsZWFyR3JvdXBTeXN0ZW1Ob3RpY2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5nZXRQZW5kZW5jeUxpc3QoKS50aGVuKChmdW5jdGlvbih0KXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2UucGVuZGVuY3lNYXAuc2V0KFwiXCIuY29uY2F0KHQuZnJvbSxcIl9cIikuY29uY2F0KHQuZ3JvdXBJRCxcIl9cIikuY29uY2F0KHQudG8pLHQpfSkpO3ZhciBuPWUuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShsbCkuZ2V0TG9jYWxNZXNzYWdlTGlzdChZbi5DT05WX1NZU1RFTSksbz1bXTtuLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBuPXQucGF5bG9hZCxyPW4ub3BlcmF0b3JJRCxhPW4ub3BlcmF0aW9uVHlwZSxzPW4uZ3JvdXBQcm9maWxlO2lmKGE9PT16bSl7dmFyIGk9XCJcIi5jb25jYXQocixcIl9cIikuY29uY2F0KHMuZ3JvdXBJRCxcIl9cIikuY29uY2F0KHMudG8pLHU9ZS5wZW5kZW5jeU1hcC5nZXQoaSk7dSYmY3UodS5oYW5kbGVkKSYmMCE9PXUuaGFuZGxlZCYmby5wdXNoKHQpfX0pKSxlLmRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlKHttZXNzYWdlTGlzdDpvfSl9KSl9fSx7a2V5OlwiZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlXCIpO3JldHVybiBndShlLm1lc3NhZ2VMaXN0KSYmMCE9PWUubWVzc2FnZUxpc3QubGVuZ3RoPyhRaS5sb2coXCJcIi5jb25jYXQobikrZS5tZXNzYWdlTGlzdC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLklEfSkpKSx0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6R2QscmVxdWVzdERhdGE6e21lc3NhZ2VMaXN0VG9EZWxldGU6ZS5tZXNzYWdlTGlzdC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntmcm9tOlluLkNPTlZfU1lTVEVNLG1lc3NhZ2VTZXE6ZS5jbGllbnRTZXF1ZW5jZSxtZXNzYWdlUmFuZG9tOmUucmFuZG9tfX0pKX19KS50aGVuKChmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKTt2YXIgbz10Ll9ncm91cE1vZHVsZS5nZXRNb2R1bGUobGwpO3JldHVybiBlLm1lc3NhZ2VMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe28uZGVsZXRlTG9jYWxNZXNzYWdlKGUpfSkpLFFfKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGVycm9yOlwiKSxlKSx1bShlKX0pKSk6aW0oKX19LHtrZXk6XCJnZXRQZW5kZW5jeUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6T2QscmVxdWVzdERhdGE6e3N0YXJ0VGltZTplJiZlLnN0YXJ0VGltZT9lLnN0YXJ0VGltZTowLGxpbWl0OmUmJmUubGltaXQ/ZS5saW1pdDoxMCxoYW5kbGVBY2NvdW50OnRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCl9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhLnBlbmRlbmN5TGlzdDtyZXR1cm4gMCE9PWUuZGF0YS5uZXh0U3RhcnRUaW1lP3QuZ2V0UGVuZGVuY3lMaXN0KHtzdGFydFRpbWU6ZS5kYXRhLm5leHRTdGFydFRpbWV9KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm5bXS5jb25jYXQoVW4obiksVW4oZSkpfSkpOm59KSl9fSx7a2V5OlwiX29uUmVjZWl2ZWRHcm91cFN5c3RlbU5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnJlc3VsdDtlLmlzSW5zdGFudE1lc3NhZ2UmJm4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7c3dpdGNoKGUucGF5bG9hZC5vcGVyYXRpb25UeXBlKXtjYXNlIDE6YnJlYWs7Y2FzZSAyOnQuX29uQXBwbHlHcm91cFJlcXVlc3RBZ3JlZWQoZSk7YnJlYWs7Y2FzZSAzOmJyZWFrO2Nhc2UgNDp0Ll9vbk1lbWJlcktpY2tlZChlKTticmVhaztjYXNlIDU6dC5fb25Hcm91cERpc21pc3NlZChlKTticmVhaztjYXNlIDY6YnJlYWs7Y2FzZSA3OnQuX29uSW52aXRlR3JvdXAoZSk7YnJlYWs7Y2FzZSA4OnQuX29uUXVpdEdyb3VwKGUpO2JyZWFrO2Nhc2UgOTp0Ll9vblNldE1hbmFnZXIoZSk7YnJlYWs7Y2FzZSAxMDp0Ll9vbkRlbGV0ZU1hbmFnZXIoZSl9fSkpfX0se2tleTpcIl9vbkFwcGx5R3JvdXBSZXF1ZXN0QWdyZWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pfHx0aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6bn0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YS5ncm91cDtuJiYodC5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAoW25dKSx0Ll9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCkpfSkpfX0se2tleTpcIl9vbk1lbWJlcktpY2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKHQpJiZ0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKHQpfX0se2tleTpcIl9vbkdyb3VwRGlzbWlzc2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElEO3RoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAodCkmJnRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24odCk7dmFyIG49dGhpcy5fZ3JvdXBNb2R1bGUuX0FWQ2hhdFJvb21IYW5kbGVyO24mJm4uY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRCh0KSYmbi5yZXNldCh0KX19LHtrZXk6XCJfb25JbnZpdGVHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQ7dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cChuKXx8dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOm59KS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1lLmRhdGEuZ3JvdXA7biYmKHQuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKFtuXSksdC5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSgpKX0pKX19LHtrZXk6XCJfb25RdWl0R3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQ7dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cCh0KSYmdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbih0KX19LHtrZXk6XCJfb25TZXRNYW5hZ2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZSxuPXQudG8sbz10Lmdyb3VwSUQscj10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoY2wpLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKG8sbik7ciYmci51cGRhdGVSb2xlKFluLkdSUF9NQlJfUk9MRV9BRE1JTil9fSx7a2V5OlwiX29uRGVsZXRlTWFuYWdlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUsbj10LnRvLG89dC5ncm91cElELHI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGNsKS5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhvLG4pO3ImJnIudXBkYXRlUm9sZShZbi5HUlBfTUJSX1JPTEVfTUVNQkVSKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wZW5kZW5jeU1hcC5jbGVhcigpfX1dKSxlfSgpLFFtPWZ1bmN0aW9uKGUpe0RuKG4sZSk7dmFyIHQ9d24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkdyb3VwTW9kdWxlXCIsby5fY29tbW9uR3JvdXBIYW5kbGVyPW51bGwsby5fQVZDaGF0Um9vbUhhbmRsZXI9bnVsbCxvLl9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXI9bnVsbCxvLl9jb21tb25Hcm91cEhhbmRsZXI9bmV3IEJtKEduKG8pKSxvLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyPW5ldyBqbShHbihvKSksby5fQVZDaGF0Um9vbUhhbmRsZXI9bmV3ICRtKEduKG8pKSxvLl9ncm91cFRpcHNIYW5kbGVyPW5ldyBxbShHbihvKSksby5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyPW5ldyBYbShHbihvKSksby5ncm91cE1hcD1uZXcgTWFwLG8uX3Vuam9pbmVkQVZDaGF0Um9vbUxpc3Q9bmV3IE1hcCxvLl9yZWNlaXB0RGV0YWlsQ29tcGxldGVNYXA9bmV3IE1hcCxvLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oeW0sby5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsR24obykpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJfb25DbG91ZENvbmZpZ1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJwb2xsaW5nX2ludGVydmFsXCIpO3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyJiZ0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5zZXRQb2xsaW5nSW50ZXJ2YWwoZSl9fSx7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5pc0xvZ2dlZEluKCkmJih0aGlzLl9jb21tb25Hcm91cEhhbmRsZXIub25DaGVja1RpbWVyKGUpLHRoaXMuX2dyb3VwVGlwc0hhbmRsZXIub25DaGVja1RpbWVyKGUpKX19LHtrZXk6XCJndWFyZEZvckFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKGUuY29udmVyc2F0aW9uVHlwZT09PVluLkNPTlZfR1JPVVApe3ZhciBuPWUudG87cmV0dXJuIHRoaXMuaGFzTG9jYWxHcm91cChuKT9pbSgpOnRoaXMuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOm59KS50aGVuKChmdW5jdGlvbihvKXt2YXIgcj1vLmRhdGEuZ3JvdXAudHlwZTtpZihRaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmd1YXJkRm9yQVZDaGF0Um9vbS4gZ3JvdXBJRDpcIikuY29uY2F0KG4sXCIgdHlwZTpcIikuY29uY2F0KHIpKSxyPT09WW4uR1JQX0FWQ0hBVFJPT00pe3ZhciBhPVwidXNlcklkOlwiLmNvbmNhdChlLmZyb20sXCIg5pyq5Yqg5YWl576kIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwi44CC5Y+R5raI5oGv5YmN5YWI5L2/55SoIGpvaW5Hcm91cCDmjqXlj6PnlLPor7fliqDnvqTvvIzor6bnu4bor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI2pvaW5Hcm91cFwiKTtyZXR1cm4gUWkud2FybihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZ3VhcmRGb3JBVkNoYXRSb29tIHNlbmRNZXNzYWdlIG5vdCBhbGxvd2VkLiBcIikuY29uY2F0KGEpKSx1bShuZXcgcm0oe2NvZGU6bHAuTUVTU0FHRV9TRU5EX0ZBSUwsbWVzc2FnZTphLGRhdGE6e21lc3NhZ2U6ZX19KSl9cmV0dXJuIGltKCl9KSl9cmV0dXJuIGltKCl9fSx7a2V5OlwiY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXImJnRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSl9fSx7a2V5Olwib25OZXdHcm91cE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jb21tb25Hcm91cEhhbmRsZXImJnRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5vbk5ld0dyb3VwTWVzc2FnZShlKX19LHtrZXk6XCJ1cGRhdGVOZXh0TWVzc2FnZVNlcVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Z3UoZSkmJmUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5jb252ZXJzYXRpb25JRC5yZXBsYWNlKFluLkNPTlZfR1JPVVAsXCJcIik7dC5ncm91cE1hcC5oYXMobikmJih0Lmdyb3VwTWFwLmdldChuKS5uZXh0TWVzc2FnZVNlcT1lLmxhc3RNZXNzYWdlLnNlcXVlbmNlKzEpfSkpfX0se2tleTpcIm9uTmV3R3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZ3JvdXBUaXBzSGFuZGxlciYmdGhpcy5fZ3JvdXBUaXBzSGFuZGxlci5vbk5ld0dyb3VwVGlwcyhlKX19LHtrZXk6XCJvbkdyb3VwTWVzc2FnZVJldm9rZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jb21tb25Hcm91cEhhbmRsZXImJnRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5vbkdyb3VwTWVzc2FnZVJldm9rZWQoZSl9fSx7a2V5Olwib25OZXdHcm91cFN5c3RlbU5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlciYmdGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyLm9uTmV3R3JvdXBTeXN0ZW1Ob3RpY2UoZSl9fSx7a2V5Olwib25Hcm91cE1lc3NhZ2VSZWFkTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmRhdGFMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZWxlbWVudHMuZ3JvdXBNZXNzYWdlUmVhZE5vdGljZTtpZighaHUobikpe3ZhciBvPXQuZ2V0TW9kdWxlKGxsKTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZ3JvdXBJRCxyPWUubGFzdE1lc3NhZ2VTZXE7UWkuZGVidWcoXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLm9uR3JvdXBNZXNzYWdlUmVhZE5vdGljZSBncm91cElEOlwiKS5jb25jYXQobixcIiBsYXN0TWVzc2FnZVNlcTpcIikuY29uY2F0KHIpKTt2YXIgYT1cIlwiLmNvbmNhdChZbi5DT05WX0dST1VQKS5jb25jYXQobik7by51cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnQoe2NvbnZlcnNhdGlvbklEOmEsbGFzdE1lc3NhZ2VTZXE6cn0pLG8udXBkYXRlVW5yZWFkQ291bnQoYSl9KSl9fSkpfX0se2tleTpcIm9uUmVhZFJlY2VpcHRMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25SZWFkUmVjZWlwdExpc3Qgb3B0aW9uczpcIiksSlNPTi5zdHJpbmdpZnkoZSkpLGUuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5ncm91cFByb2ZpbGUsbz1lLmVsZW1lbnRzLHI9bi5ncm91cElELGE9dC5nZXRNb2R1bGUobGwpLHM9by5yZWFkUmVjZWlwdExpc3Q7YS51cGRhdGVSZWFkUmVjZWlwdEluZm8ocixzKX0pKX19LHtrZXk6XCJkZWxldGVHcm91cFN5c3RlbU5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlciYmdGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyLmRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlKGUpfX0se2tleTpcImluaXRHcm91cE1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ3JvdXBNYXAuc2V0KGUuZ3JvdXBJRCxuZXcgR20oZSkpfX0se2tleTpcImRlbGV0ZUdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ncm91cE1hcC5kZWxldGUoZSl9fSx7a2V5OlwidXBkYXRlR3JvdXBNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5ncm91cE1hcC5oYXMoZS5ncm91cElEKT90Lmdyb3VwTWFwLmdldChlLmdyb3VwSUQpLnVwZGF0ZUdyb3VwKGUpOnQuZ3JvdXBNYXAuc2V0KGUuZ3JvdXBJRCxuZXcgR20oZSkpfSkpO3ZhciBuLG89dGhpcy5nZXRNeVVzZXJJRCgpLHI9Qm4odGhpcy5ncm91cE1hcCk7dHJ5e2ZvcihyLnMoKTshKG49ci5uKCkpLmRvbmU7KXtQbihuLnZhbHVlLDIpWzFdLnNlbGZJbmZvLnVzZXJJRD1vfX1jYXRjaChhKXtyLmUoYSl9ZmluYWxseXtyLmYoKX10aGlzLl9zZXRTdG9yYWdlR3JvdXBMaXN0KCl9fSx7a2V5OlwiZ2V0U3RvcmFnZUdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKHBsKS5nZXRJdGVtKFwiZ3JvdXBNYXBcIil9fSx7a2V5OlwiX3NldFN0b3JhZ2VHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TG9jYWxHcm91cExpc3QoKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZTtyZXR1cm4hd3UodCl9KSkuc2xpY2UoMCwyMCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm57Z3JvdXBJRDplLmdyb3VwSUQsbmFtZTplLm5hbWUsYXZhdGFyOmUuYXZhdGFyLHR5cGU6ZS50eXBlfX0pKTt0aGlzLmdldE1vZHVsZShwbCkuc2V0SXRlbShcImdyb3VwTWFwXCIsZSl9fSx7a2V5OlwiZ2V0R3JvdXBNYXBcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyb3VwTWFwfX0se2tleTpcImdldExvY2FsR3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gVW4odGhpcy5ncm91cE1hcC52YWx1ZXMoKSl9fSx7a2V5OlwiZ2V0TG9jYWxHcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ncm91cE1hcC5nZXQoZSl9fSx7a2V5Olwic29ydExvY2FsR3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1Vbih0aGlzLmdyb3VwTWFwKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3ZhciB0PVBuKGUsMik7dFswXTtyZXR1cm4hWHUodFsxXS5sYXN0TWVzc2FnZSl9KSk7ZS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiB0WzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lLWVbMV0ubGFzdE1lc3NhZ2UubGFzdFRpbWV9KSksdGhpcy5ncm91cE1hcD1uZXcgTWFwKFVuKGUpKX19LHtrZXk6XCJ1cGRhdGVHcm91cExhc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyJiZ0aGlzLl9jb21tb25Hcm91cEhhbmRsZXIuaGFuZGxlVXBkYXRlR3JvdXBMYXN0TWVzc2FnZShlKX19LHtrZXk6XCJlbWl0R3JvdXBMaXN0VXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdLHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxuPXRoaXMuZ2V0TG9jYWxHcm91cExpc3QoKTtpZihlJiZ0aGlzLmVtaXRPdXRlckV2ZW50KFduLkdST1VQX0xJU1RfVVBEQVRFRCksdCl7dmFyIG89SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShuKSkscj10aGlzLmdldE1vZHVsZShsbCk7ci51cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUobyl9fX0se2tleTpcInBhdGNoR3JvdXBNZXNzYWdlUmVtaW5kVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRMb2NhbEdyb3VwTGlzdCgpLHQ9dGhpcy5nZXRNb2R1bGUobGwpLG49MDtlLmZvckVhY2goKGZ1bmN0aW9uKGUpeyEwPT09dC5wYXRjaE1lc3NhZ2VSZW1pbmRUeXBlKHtJRDplLmdyb3VwSUQsaXNDMkNDb252ZXJzYXRpb246ITEsbWVzc2FnZVJlbWluZFR5cGU6ZS5zZWxmSW5mby5tZXNzYWdlUmVtaW5kVHlwZX0pJiYobis9MSl9KSksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5wYXRjaEdyb3VwTWVzc2FnZVJlbWluZFR5cGUgY291bnQ6XCIpLmNvbmNhdChuKSl9fSx7a2V5OlwicmVjb21wdXRlVW5yZWFkQ291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TG9jYWxHcm91cExpc3QoKSx0PXRoaXMuZ2V0TW9kdWxlKGxsKTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZ3JvdXBJRCxvPWUuc2VsZkluZm8scj1vLmV4Y2x1ZGVkVW5yZWFkU2VxdWVuY2VMaXN0LGE9by5yZWFkZWRTZXF1ZW5jZTtpZihndShyKSl7dmFyIHM9MDtyLmZvckVhY2goKGZ1bmN0aW9uKHQpe3Q+PWEmJnQ8PWUubmV4dE1lc3NhZ2VTZXEtMSYmKHMrPTEpfSkpLHM+PTEmJnQucmVjb21wdXRlR3JvdXBVbnJlYWRDb3VudCh7Y29udmVyc2F0aW9uSUQ6XCJcIi5jb25jYXQoWW4uQ09OVl9HUk9VUCkuY29uY2F0KG4pLGNvdW50OnN9KX19KSl9fSx7a2V5OlwiZ2V0TXlOYW1lQ2FyZEJ5R3JvdXBJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSk7cmV0dXJuIHQ/dC5zZWxmSW5mby5uYW1lQ2FyZDpcIlwifX0se2tleTpcImdldEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb21tb25Hcm91cEhhbmRsZXI/dGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyLmdldEdyb3VwTGlzdChlKTppbSgpfX0se2tleTpcImdldEdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1uZXcgRHAoQWcpLG89XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwUHJvZmlsZVwiKSxyPWUuZ3JvdXBJRCxhPWUuZ3JvdXBDdXN0b21GaWVsZEZpbHRlcjtRaS5sb2coXCJcIi5jb25jYXQobyxcIiBncm91cElEOlwiKS5jb25jYXQocikpO3ZhciBzPXtncm91cElETGlzdDpbcl0scmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZUluZm9GaWx0ZXI6W1wiVHlwZVwiLFwiTmFtZVwiLFwiSW50cm9kdWN0aW9uXCIsXCJOb3RpZmljYXRpb25cIixcIkZhY2VVcmxcIixcIk93bmVyX0FjY291bnRcIixcIkNyZWF0ZVRpbWVcIixcIkluZm9TZXFcIixcIkxhc3RJbmZvVGltZVwiLFwiTGFzdE1zZ1RpbWVcIixcIk1lbWJlck51bVwiLFwiTWF4TWVtYmVyTnVtXCIsXCJBcHBseUpvaW5PcHRpb25cIixcIk5leHRNc2dTZXFcIixcIlNodXRVcEFsbE1lbWJlclwiXSxncm91cEN1c3RvbUZpZWxkRmlsdGVyOmEsbWVtYmVySW5mb0ZpbHRlcjpbXCJSb2xlXCIsXCJKb2luVGltZVwiLFwiTXNnU2VxXCIsXCJNc2dGbGFnXCIsXCJOYW1lQ2FyZFwiXX19O3JldHVybiB0aGlzLmdldEdyb3VwUHJvZmlsZUFkdmFuY2UocykudGhlbigoZnVuY3Rpb24oZSl7dmFyIGEscz1lLmRhdGEsaT1zLnN1Y2Nlc3NHcm91cExpc3QsdT1zLmZhaWx1cmVHcm91cExpc3Q7cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdChvLFwiIG9rXCIpKSx1Lmxlbmd0aD4wP3VtKHVbMF0pOih3dShpWzBdLnR5cGUpJiYhdC5oYXNMb2NhbEdyb3VwKHIpP2E9bmV3IEdtKGlbMF0pOih0LnVwZGF0ZUdyb3VwTWFwKGkpLGE9dC5nZXRMb2NhbEdyb3VwUHJvZmlsZShyKSksdC5nZXRNb2R1bGUobGwpLnVwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShbYV0pLG4uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQocixcIiB0eXBlOlwiKS5jb25jYXQoYS50eXBlLFwiIG11dGVBbGxNZW1iZXJzOlwiKS5jb25jYXQoYS5tdXRlQWxsTWVtYmVycyxcIiBvd25lcklEOlwiKS5jb25jYXQoYS5vd25lcklEKSkuZW5kKCksUV8oe2dyb3VwOmF9KSl9KSkuY2F0Y2goKGZ1bmN0aW9uKHIpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBvPVBuKHQsMiksYT1vWzBdLHM9b1sxXTtuLnNldEVycm9yKHIsYSxzKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZS5ncm91cElEKSkuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobyxcIiBmYWlsZWQuIGVycm9yOlwiKSxyKSx1bShyKX0pKX19LHtrZXk6XCJnZXRHcm91cFByb2ZpbGVBZHZhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRHcm91cFByb2ZpbGVBZHZhbmNlXCIpLG89ZS5ncm91cElETGlzdDtndShvKSYmby5sZW5ndGg+NTAmJihRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIg6I635Y+W576k6LWE5paZ55qE5pWw6YeP5LiN6IO96LaF6L+HNTDkuKpcIikpLG8ubGVuZ3RoPTUwKTt2YXIgcj1bXSxhPVtdO28uZm9yRWFjaCgoZnVuY3Rpb24oZSl7UHUoe2dyb3VwSUQ6ZX0pP2EucHVzaChlKTpyLnB1c2goZSl9KSk7dmFyIHM9W107aWYoci5sZW5ndGg+MCl7dmFyIGk9dGhpcy5fZ2V0R3JvdXBQcm9maWxlQWR2YW5jZShTbih7fSxlLHtncm91cElETGlzdDpyfSkpO3MucHVzaChpKX1pZihhLmxlbmd0aD4wKXt2YXIgdT10aGlzLl9nZXRHcm91cFByb2ZpbGVBZHZhbmNlKFNuKHt9LGUse2dyb3VwSURMaXN0OmEscmVsYXlGbGFnOnIubGVuZ3RoPjB9KSk7cy5wdXNoKHUpfXJldHVybiBQcm9taXNlLmFsbChzKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1bXSxuPVtdO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QucHVzaC5hcHBseSh0LFVuKGUuc3VjY2Vzc0dyb3VwTGlzdCkpLG4ucHVzaC5hcHBseShuLFVuKGUuZmFpbHVyZUdyb3VwTGlzdCkpfSkpLFFfKHtzdWNjZXNzR3JvdXBMaXN0OnQsZmFpbHVyZUdyb3VwTGlzdDpufSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBRaS5lcnJvcihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuX2dldEdyb3VwUHJvZmlsZUFkdmFuY2UgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiX2dldEdyb3VwUHJvZmlsZUFkdmFuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5yZWxheUZsYWcsbz12b2lkIDAhPT1uJiZuLHI9T24oZSxbXCJyZWxheUZsYWdcIl0pO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpoZCxyZXF1ZXN0RGF0YTpyfSkudGhlbigoZnVuY3Rpb24oZSl7UWkubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5fZ2V0R3JvdXBQcm9maWxlQWR2YW5jZSBvay5cIikpO3ZhciBuPWUuZGF0YS5ncm91cHM7cmV0dXJue3N1Y2Nlc3NHcm91cExpc3Q6bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBodShlLmVycm9yQ29kZSl8fDA9PT1lLmVycm9yQ29kZX0pKSxmYWlsdXJlR3JvdXBMaXN0Om4uZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5lcnJvckNvZGUmJjAhPT1lLmVycm9yQ29kZX0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgcm0oe2NvZGU6ZS5lcnJvckNvZGUsbWVzc2FnZTplLmVycm9ySW5mbyxkYXRhOntncm91cElEOmUuZ3JvdXBJRH19KX0pKX19KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3JldHVybiBvJiZQdSh7Z3JvdXBJRDplLmdyb3VwSURMaXN0WzBdfSk/e3N1Y2Nlc3NHcm91cExpc3Q6W10sZmFpbHVyZUdyb3VwTGlzdDpbXX06dW0odCl9KSl9fSx7a2V5OlwiY3JlYXRlR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmNyZWF0ZUdyb3VwXCIpLG89ZS50eXBlLHI9ZS5ncm91cElEO2lmKCFbXCJQdWJsaWNcIixcIlByaXZhdGVcIixcIkNoYXRSb29tXCIsXCJBVkNoYXRSb29tXCIsXCJDb21tdW5pdHlcIl0uaW5jbHVkZXMobykpcmV0dXJuIHVtKHtjb2RlOmxwLklMTEVHQUxfR1JPVVBfVFlQRSxtZXNzYWdlOmRwLklMTEVHQUxfR1JPVVBfVFlQRX0pO2lmKCFQdSh7dHlwZTpvfSkmJiFYdShyKSYmUHUoe2dyb3VwSUQ6cn0pKXJldHVybiB1bSh7Y29kZTpscC5JTExFR0FMX0dST1VQX0lELG1lc3NhZ2U6ZHAuSUxMRUdBTF9HUk9VUF9JRH0pO2lmKHd1KG8pJiYhaHUoZS5tZW1iZXJMaXN0KSYmZS5tZW1iZXJMaXN0Lmxlbmd0aD4wJiYoUWkud2FybihcIlwiLmNvbmNhdChuLFwiIOWIm+W7uiBBVkNoYXRSb29tIOaXtuS4jeiDvea3u+WKoOe+pOaIkOWRmO+8jOiHquWKqOW/veeVpeivpeWtl+autVwiKSksZS5tZW1iZXJMaXN0PXZvaWQgMCksYnUobyl8fGh1KGUuam9pbk9wdGlvbil8fChRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIg5Yib5bu6IFdvcmsvTWVldGluZy9BVkNoYXRSb29tL0NvbW11bml0eSDnvqTml7bkuI3og73orr7nva7lrZfmrrUgam9pbk9wdGlvbu+8jOiHquWKqOW/veeVpeivpeWtl+autVwiKSksZS5qb2luT3B0aW9uPXZvaWQgMCksUHUoe3R5cGU6b30pJiYhWHUocikmJiFQdSh7Z3JvdXBJRDpyfSkpcmV0dXJuIHVtKHtjb2RlOmxwLklMTEVHQUxfR1JPVVBfSUQsbWVzc2FnZTpkcC5JTExFR0FMX0dST1VQX0lEfSk7dmFyIGE9bmV3IERwKGdnKTtRaS5sb2coXCJcIi5jb25jYXQobixcIiBvcHRpb25zOlwiKSxlKTt2YXIgcz1bXTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6ZmQscmVxdWVzdERhdGE6U24oe30sZSx7b3duZXJJRDp0aGlzLmdldE15VXNlcklEKCksd2ViUHVzaEZsYWc6MX0pfSkudGhlbigoZnVuY3Rpb24obyl7dmFyIHI9by5kYXRhLGk9ci5ncm91cElELHU9ci5vdmVyTGltaXRVc2VySURMaXN0LGM9dm9pZCAwPT09dT9bXTp1O2lmKHM9YyxhLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwVHlwZTpcIi5jb25jYXQoZS50eXBlLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChpLFwiIG92ZXJMaW1pdFVzZXJJRExpc3Q9XCIpLmNvbmNhdChjKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2sgZ3JvdXBJRDpcIikuY29uY2F0KGksXCIgb3ZlckxpbWl0VXNlcklETGlzdDpcIiksYyksZS50eXBlPT09WW4uR1JQX0FWQ0hBVFJPT00pcmV0dXJuIHQuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOml9KTtYdShlLm1lbWJlckxpc3QpfHxYdShjKXx8KGUubWVtYmVyTGlzdD1lLm1lbWJlckxpc3QuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4tMT09PWMuaW5kZXhPZihlLnVzZXJJRCl9KSkpLHQudXBkYXRlR3JvdXBNYXAoW1NuKHt9LGUse2dyb3VwSUQ6aX0pXSk7dmFyIGw9dC5nZXRNb2R1bGUocmwpLGQ9bC5jcmVhdGVDdXN0b21NZXNzYWdlKHt0bzppLGNvbnZlcnNhdGlvblR5cGU6WW4uQ09OVl9HUk9VUCxwYXlsb2FkOntkYXRhOlwiZ3JvdXBfY3JlYXRlXCIsZXh0ZW5zaW9uOlwiXCIuY29uY2F0KHQuZ2V0TXlVc2VySUQoKSxcIuWIm+W7uue+pOe7hFwiKX19KTtyZXR1cm4gbC5zZW5kTWVzc2FnZUluc3RhbmNlKGQpLHQuZW1pdEdyb3VwTGlzdFVwZGF0ZSgpLHQuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOml9KX0pKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGEuZ3JvdXAsbj10LnNlbGZJbmZvLG89bi5uYW1lQ2FyZCxyPW4uam9pblRpbWU7cmV0dXJuIHQudXBkYXRlU2VsZkluZm8oe25hbWVDYXJkOm8sam9pblRpbWU6cixtZXNzYWdlUmVtaW5kVHlwZTpZbi5NU0dfUkVNSU5EX0FDUFRfQU5EX05PVEUscm9sZTpZbi5HUlBfTUJSX1JPTEVfT1dORVJ9KSxRXyh7Z3JvdXA6dCxvdmVyTGltaXRVc2VySURMaXN0OnN9KX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuIGEuc2V0TWVzc2FnZShcImdyb3VwVHlwZTpcIi5jb25jYXQoZS50eXBlKSksdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1QbihlLDIpLG49dFswXSxyPXRbMV07YS5zZXRFcnJvcihvLG4scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxvKSx1bShvKX0pKX19LHtrZXk6XCJkaXNtaXNzR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRpc21pc3NHcm91cFwiKTtpZih0aGlzLmhhc0xvY2FsR3JvdXAoZSkmJnRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSkudHlwZT09PVluLkdSUF9XT1JLKXJldHVybiB1bShuZXcgcm0oe2NvZGU6bHAuQ0FOTk9UX0RJU01JU1NfV09SSyxtZXNzYWdlOmRwLkNBTk5PVF9ESVNNSVNTX1dPUkt9KSk7dmFyIG89bmV3IERwKElnKTtyZXR1cm4gby5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZSkpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChlKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6X2QscmVxdWVzdERhdGE6e2dyb3VwSUQ6ZX19KS50aGVuKChmdW5jdGlvbigpe3JldHVybiBvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpLHQuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbihlKSx0LmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSkmJnQuX0FWQ2hhdFJvb21IYW5kbGVyLnJlc2V0KGUpLFFfKHtncm91cElEOmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwidXBkYXRlR3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGRhdGVHcm91cFByb2ZpbGVcIik7IXRoaXMuaGFzTG9jYWxHcm91cChlLmdyb3VwSUQpfHxidSh0aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKGUuZ3JvdXBJRCkudHlwZSl8fGh1KGUuam9pbk9wdGlvbil8fChRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgV29yay9NZWV0aW5nL0FWQ2hhdFJvb20vQ29tbXVuaXR5IOe+pOS4jeiDveiuvue9ruWtl+autSBqb2luT3B0aW9u77yM6Ieq5Yqo5b+955Wl6K+l5a2X5q61XCIpKSxlLmpvaW5PcHRpb249dm9pZCAwKSxodShlLm11dGVBbGxNZW1iZXJzKXx8KGUubXV0ZUFsbE1lbWJlcnM/ZS5tdXRlQWxsTWVtYmVycz1cIk9uXCI6ZS5tdXRlQWxsTWVtYmVycz1cIk9mZlwiKTt2YXIgbz1uZXcgRHAoRWcpO3JldHVybiBvLnNldE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoZSkpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChlLmdyb3VwSUQpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTptZCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oKXsoby5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx0Lmhhc0xvY2FsR3JvdXAoZS5ncm91cElEKSkmJih0Lmdyb3VwTWFwLmdldChlLmdyb3VwSUQpLnVwZGF0ZUdyb3VwKGUpLHQuX3NldFN0b3JhZ2VHcm91cExpc3QoKSk7cmV0dXJuIFFfKHtncm91cDp0Lmdyb3VwTWFwLmdldChlLmdyb3VwSUQpfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJqb2luR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS50eXBlLHI9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmpvaW5Hcm91cFwiKTtpZihvPT09WW4uR1JQX1dPUkspe3ZhciBhPW5ldyBybSh7Y29kZTpscC5DQU5OT1RfSk9JTl9XT1JLLG1lc3NhZ2U6ZHAuQ0FOTk9UX0pPSU5fV09SS30pO3JldHVybiB1bShhKX1pZih0aGlzLmRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbShuKSx0aGlzLmhhc0xvY2FsR3JvdXAobikpe2lmKCF0aGlzLmlzTG9nZ2VkSW4oKSlyZXR1cm4gaW0oe3N0YXR1czpZbi5KT0lOX1NUQVRVU19BTFJFQURZX0lOX0dST1VQfSk7dmFyIHM9bmV3IERwKGhnKTtyZXR1cm4gdGhpcy5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6bn0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHMuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiBqb2luZWRTdGF0dXM6XCIpLmNvbmNhdChZbi5KT0lOX1NUQVRVU19BTFJFQURZX0lOX0dST1VQKSkuZW5kKCksaW0oe3N0YXR1czpZbi5KT0lOX1NUQVRVU19BTFJFQURZX0lOX0dST1VQfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKG8pe3JldHVybiBzLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgdW5qb2luZWRcIikpLmVuZCgpLFFpLndhcm4oXCJcIi5jb25jYXQocixcIiBcIikuY29uY2F0KG4sXCIgd2FzIHVuam9pbmVkLCBub3cgam9pbiFcIikpLHQuZ3JvdXBNYXAuZGVsZXRlKG4pLHQuYXBwbHlKb2luR3JvdXAoZSl9KSl9cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdChyLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSksdGhpcy5pc0xvZ2dlZEluKCk/dGhpcy5hcHBseUpvaW5Hcm91cChlKTp0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5qb2luV2l0aG91dEF1dGgoZSl9fSx7a2V5OlwiYXBwbHlKb2luR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFwcGx5Sm9pbkdyb3VwXCIpLG89ZS5ncm91cElELHI9bmV3IERwKGhnKSxhPVNuKHt9LGUpLHM9dGhpcy5jYW5JVXNlKHRpLkFWQ0hBVFJPT01fSElTVE9SWV9NU0cpO3JldHVybiBzJiYoYS5oaXN0b3J5TWVzc2FnZUZsYWc9MSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6dmQscmVxdWVzdERhdGE6YX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBhPWUuZGF0YSxpPWEuam9pbmVkU3RhdHVzLHU9YS5sb25nUG9sbGluZ0tleSxjPWEuYXZDaGF0Um9vbUZsYWcsbD1hLmF2Q2hhdFJvb21LZXksZD1hLm1lc3NhZ2VMaXN0LHA9XCJncm91cElEOlwiLmNvbmNhdChvLFwiIGpvaW5lZFN0YXR1czpcIikuY29uY2F0KGksXCIgbG9uZ1BvbGxpbmdLZXk6XCIpLmNvbmNhdCh1KStcIiBhdkNoYXRSb29tRmxhZzpcIi5jb25jYXQoYyxcIiBjYW5HZXRBVkNoYXRSb29tSGlzdG9yeU1lc3NhZ2U6XCIpLmNvbmNhdChzKTtzd2l0Y2goci5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQocCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBcIikuY29uY2F0KHApKSxpKXtjYXNlIHN1OnJldHVybiBRXyh7c3RhdHVzOnN1fSk7Y2FzZSBhdTpyZXR1cm4gdC5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6b30pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuLHI9ZS5kYXRhLmdyb3VwLGE9e3N0YXR1czphdSxncm91cDpyfTtyZXR1cm4gMT09PWM/KHQuZ2V0TW9kdWxlKGxsKS5zZXRDb21wbGV0ZWQoXCJcIi5jb25jYXQoWW4uQ09OVl9HUk9VUCkuY29uY2F0KG8pKSx0Ll9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLmluaXRHcm91cEF0dHJpYnV0ZXNDYWNoZSh7Z3JvdXBJRDpvLGF2Q2hhdFJvb21LZXk6bH0pLChuPWh1KHUpP3QuX0FWQ2hhdFJvb21IYW5kbGVyLmhhbmRsZUpvaW5SZXN1bHQoe2dyb3VwOnJ9KTp0Ll9BVkNoYXRSb29tSGFuZGxlci5zdGFydFJ1bkxvb3Aoe2xvbmdQb2xsaW5nS2V5OnUsZ3JvdXA6cn0pKS50aGVuKChmdW5jdGlvbigpe3QuX29uQVZDaGF0Um9vbUhpc3RvcnlNZXNzYWdlKGQpfSkpLG4pOih0LmVtaXRHcm91cExpc3RVcGRhdGUoITAsITEpLFFfKGEpKX0pKTtkZWZhdWx0OnZhciBnPW5ldyBybSh7Y29kZTpscC5KT0lOX0dST1VQX0ZBSUwsbWVzc2FnZTpkcC5KT0lOX0dST1VQX0ZBSUx9KTtyZXR1cm4gUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBlcnJvcjpcIiksZyksdW0oZyl9fSkpLmNhdGNoKChmdW5jdGlvbihvKXtyZXR1cm4gci5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZS5ncm91cElEKSksdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1QbihlLDIpLG49dFswXSxhPXRbMV07ci5zZXRFcnJvcihvLG4sYSkuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBlcnJvcjpcIiksbyksdW0obyl9KSl9fSx7a2V5OlwicXVpdEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5xdWl0R3JvdXBcIik7UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUpKTt2YXIgbz10aGlzLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSk7aWYoIW8mJiF0aGlzLmhhc0xvY2FsR3JvdXAoZSkpe3ZhciByPW5ldyBybSh7Y29kZTpscC5NRU1CRVJfTk9UX0lOX0dST1VQLG1lc3NhZ2U6ZHAuTUVNQkVSX05PVF9JTl9HUk9VUH0pO3JldHVybiB1bShyKX1pZihvJiYhdGhpcy5pc0xvZ2dlZEluKCkpcmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGFub255bW91c2x5IG9rLiBncm91cElEOlwiKS5jb25jYXQoZSkpLHRoaXMuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbihlKSx0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5yZXNldChlKSxpbSh7Z3JvdXBJRDplfSk7dmFyIGE9bmV3IERwKGZnKTtyZXR1cm4gYS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZSkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnlkLHJlcXVlc3REYXRhOntncm91cElEOmV9fSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSxvJiZ0Ll9BVkNoYXRSb29tSGFuZGxlci5yZXNldChlKSx0LmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24oZSksUV8oe2dyb3VwSUQ6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJzZWFyY2hHcm91cEJ5SURcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNlYXJjaEdyb3VwQnlJRFwiKSxvPXtncm91cElETGlzdDpbZV19LHI9bmV3IERwKF9nKTtyZXR1cm4gci5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZSkpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChlKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6SWQscmVxdWVzdERhdGE6b30pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZGF0YS5ncm91cFByb2ZpbGU7aWYoMCE9PW9bMF0uZXJyb3JDb2RlKXRocm93IG5ldyBybSh7Y29kZTpvWzBdLmVycm9yQ29kZSxtZXNzYWdlOm9bMF0uZXJyb3JJbmZvfSk7cmV0dXJuIHIuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSksUV8oe2dyb3VwOm5ldyBHbShvWzBdKX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxhPW5bMV07ci5zZXRFcnJvcihlLG8sYSkuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcImNoYW5nZUdyb3VwT3duZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmNoYW5nZUdyb3VwT3duZXJcIik7aWYodGhpcy5oYXNMb2NhbEdyb3VwKGUuZ3JvdXBJRCkmJnRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZS5ncm91cElEKS50eXBlPT09WW4uR1JQX0FWQ0hBVFJPT00pcmV0dXJuIHVtKG5ldyBybSh7Y29kZTpscC5DQU5OT1RfQ0hBTkdFX09XTkVSX0lOX0FWQ0hBVFJPT00sbWVzc2FnZTpkcC5DQU5OT1RfQ0hBTkdFX09XTkVSX0lOX0FWQ0hBVFJPT019KSk7aWYoZS5uZXdPd25lcklEPT09dGhpcy5nZXRNeVVzZXJJRCgpKXJldHVybiB1bShuZXcgcm0oe2NvZGU6bHAuQ0FOTk9UX0NIQU5HRV9PV05FUl9UT19TRUxGLG1lc3NhZ2U6ZHAuQ0FOTk9UX0NIQU5HRV9PV05FUl9UT19TRUxGfSkpO3ZhciBvPW5ldyBEcChtZyk7cmV0dXJuIG8uc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCxcIiBuZXdPd25lcklEOlwiKS5jb25jYXQoZS5uZXdPd25lcklEKSksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUuZ3JvdXBJRCkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkVkLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbigpe28uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSk7dmFyIHI9ZS5ncm91cElELGE9ZS5uZXdPd25lcklEO3QuZ3JvdXBNYXAuZ2V0KHIpLm93bmVySUQ9YTt2YXIgcz10LmdldE1vZHVsZShjbCkuZ2V0TG9jYWxHcm91cE1lbWJlckxpc3Qocik7aWYocyBpbnN0YW5jZW9mIE1hcCl7dmFyIGk9cy5nZXQodC5nZXRNeVVzZXJJRCgpKTtodShpKXx8KGkudXBkYXRlUm9sZShcIk1lbWJlclwiKSx0Lmdyb3VwTWFwLmdldChyKS5zZWxmSW5mby5yb2xlPVwiTWVtYmVyXCIpO3ZhciB1PXMuZ2V0KGEpO2h1KHUpfHx1LnVwZGF0ZVJvbGUoXCJPd25lclwiKX1yZXR1cm4gdC5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKSxRXyh7Z3JvdXA6dC5ncm91cE1hcC5nZXQocil9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiaGFuZGxlR3JvdXBBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuaGFuZGxlR3JvdXBBcHBsaWNhdGlvblwiKSxvPWUubWVzc2FnZS5wYXlsb2FkLHI9by5ncm91cFByb2ZpbGUuZ3JvdXBJRCxhPW8uYXV0aGVudGljYXRpb24scz1vLm1lc3NhZ2VLZXksaT1vLm9wZXJhdG9ySUQsdT1uZXcgRHAodmcpO3JldHVybiB1LnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChyKSksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KHIpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpUZCxyZXF1ZXN0RGF0YTpTbih7fSxlLHthcHBsaWNhbnQ6aSxncm91cElEOnIsYXV0aGVudGljYXRpb246YSxtZXNzYWdlS2V5OnN9KX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHUuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSksdC5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyLmRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlKHttZXNzYWdlTGlzdDpbZS5tZXNzYWdlXX0pLFFfKHtncm91cDp0LmdldExvY2FsR3JvdXBQcm9maWxlKHIpfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTt1LnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3JcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiaGFuZGxlR3JvdXBJbnZpdGF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5oYW5kbGVHcm91cEludml0YXRpb25cIiksbz1lLm1lc3NhZ2UucGF5bG9hZCxyPW8uZ3JvdXBQcm9maWxlLmdyb3VwSUQsYT1vLmF1dGhlbnRpY2F0aW9uLHM9by5tZXNzYWdlS2V5LGk9by5vcGVyYXRvcklELHU9ZS5oYW5kbGVBY3Rpb24sYz1uZXcgRHAoTWcpO3JldHVybiBjLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChyLFwiIGludml0ZXI6XCIpLmNvbmNhdChpLFwiIGhhbmRsZUFjdGlvbjpcIikuY29uY2F0KHUpKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQocixcIiBpbnZpdGVyOlwiKS5jb25jYXQoaSxcIiBoYW5kbGVBY3Rpb246XCIpLmNvbmNhdCh1KSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6QWQscmVxdWVzdERhdGE6U24oe30sZSx7aW52aXRlcjppLGdyb3VwSUQ6cixhdXRoZW50aWNhdGlvbjphLG1lc3NhZ2VLZXk6c30pfSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gYy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx0Ll9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXIuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2Uoe21lc3NhZ2VMaXN0OltlLm1lc3NhZ2VdfSksUV8oe2dyb3VwOnQuZ2V0TG9jYWxHcm91cFByb2ZpbGUocil9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvclwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJnZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyP3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSk/dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudChlKTppbSh7bWVtYmVyQ291bnQ6MH0pOnVtKHtjb2RlOmxwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOmRwLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcImhhc0xvY2FsR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ncm91cE1hcC5oYXMoZSl9fSx7a2V5OlwiZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2RlbGV0ZUxvY2FsR3JvdXAoZSksdGhpcy5nZXRNb2R1bGUobGwpLmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uKFwiR1JPVVBcIi5jb25jYXQoZSkpLHRoaXMuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhMSl9fSx7a2V5OlwiX2RlbGV0ZUxvY2FsR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdyb3VwTWFwLmRlbGV0ZShlKSx0aGlzLmdldE1vZHVsZShjbCkuZGVsZXRlR3JvdXBNZW1iZXJMaXN0KGUpLHRoaXMuX3NldFN0b3JhZ2VHcm91cExpc3QoKX19LHtrZXk6XCJzZW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jcmVhdGVHcm91cE1lc3NhZ2VQYWNrKGUsdCk7cmV0dXJuIHRoaXMucmVxdWVzdChuKX19LHtrZXk6XCJjcmVhdGVHcm91cE1lc3NhZ2VQYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1udWxsO3QmJnQub2ZmbGluZVB1c2hJbmZvJiYobj10Lm9mZmxpbmVQdXNoSW5mbyk7dmFyIG89XCJcIjtsdShlLmNsb3VkQ3VzdG9tRGF0YSkmJmUuY2xvdWRDdXN0b21EYXRhLmxlbmd0aD4wJiYobz1lLmNsb3VkQ3VzdG9tRGF0YSk7dmFyIHI9W107aWYocHUodCkmJnB1KHQubWVzc2FnZUNvbnRyb2xJbmZvKSl7dmFyIGE9dC5tZXNzYWdlQ29udHJvbEluZm8scz1hLmV4Y2x1ZGVkRnJvbVVucmVhZENvdW50LGk9YS5leGNsdWRlZEZyb21MYXN0TWVzc2FnZTshMD09PXMmJnIucHVzaChcIk5vVW5yZWFkXCIpLCEwPT09aSYmci5wdXNoKFwiTm9MYXN0TXNnXCIpfXZhciB1PWUuZ2V0R3JvdXBBdEluZm9MaXN0KCk7cmV0dXJue3Byb3RvY29sTmFtZTp3bCx0amdJRDp0aGlzLmdlbmVyYXRlVGpnSUQoZSkscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSxncm91cElEOmUudG8sbXNnQm9keTplLmdldEVsZW1lbnRzKCksY2xvdWRDdXN0b21EYXRhOm8scmFuZG9tOmUucmFuZG9tLHByaW9yaXR5OmUucHJpb3JpdHksY2xpZW50U2VxdWVuY2U6ZS5jbGllbnRTZXF1ZW5jZSxncm91cEF0SW5mbzplLnR5cGUhPT1Zbi5NU0dfVEVYVHx8WHUodSk/dm9pZCAwOnUsb25saW5lT25seUZsYWc6dGhpcy5pc09ubGluZU1lc3NhZ2UoZSx0KT8xOjAsY2xpZW50VGltZTplLmNsaWVudFRpbWUsb2ZmbGluZVB1c2hJbmZvOm4/e3B1c2hGbGFnOiEwPT09bi5kaXNhYmxlUHVzaD8xOjAsdGl0bGU6bi50aXRsZXx8XCJcIixkZXNjOm4uZGVzY3JpcHRpb258fFwiXCIsZXh0Om4uZXh0ZW5zaW9ufHxcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6ITA9PT1uLmlnbm9yZUlPU0JhZGdlPzE6MH0sYW5kcm9pZEluZm86e09QUE9DaGFubmVsSUQ6bi5hbmRyb2lkT1BQT0NoYW5uZWxJRHx8XCJcIn19OnZvaWQgMCxtZXNzYWdlQ29udHJvbEluZm86cixuZWVkUmVhZFJlY2VpcHQ6ITAhPT1lLm5lZWRSZWFkUmVjZWlwdHx8dGhpcy5pc01lc3NhZ2VGcm9tT3JUb0FWQ2hhdHJvb20oZS50byk/MDoxfX19fSx7a2V5OlwicmV2b2tlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpTZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDplLnRvLG1zZ1NlcUxpc3Q6W3ttc2dTZXE6ZS5zZXF1ZW5jZX1dfX0pfX0se2tleTpcImRlbGV0ZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnRvLG49ZS5rZXlMaXN0O3JldHVybiBRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZU1lc3NhZ2UgZ3JvdXBJRDpcIikuY29uY2F0KHQsXCIgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlVkLHJlcXVlc3REYXRhOntncm91cElEOnQsZGVsZXRlcjp0aGlzLmdldE15VXNlcklEKCksa2V5TGlzdDpufX0pfX0se2tleTpcImdldFJvYW1pbmdNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRSb2FtaW5nTWVzc2FnZVwiKSxvPW5ldyBEcChXcCkscj0wO3JldHVybiB0aGlzLl9jb21wdXRlTGFzdFNlcXVlbmNlKGUpLnRoZW4oKGZ1bmN0aW9uKG8pe3JldHVybiByPW8sUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUuZ3JvdXBJRCxcIiBsYXN0U2VxdWVuY2U6XCIpLmNvbmNhdChyKSksdC5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Q2QscmVxdWVzdERhdGE6e2dyb3VwSUQ6ZS5ncm91cElELGNvdW50OjIxLHNlcXVlbmNlOnJ9fSl9KSkudGhlbigoZnVuY3Rpb24oYSl7dmFyIHM9YS5kYXRhLGk9cy5tZXNzYWdlTGlzdCx1PXMuY29tcGxldGU7aHUoaSk/UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIGNvbXBsZXRlOlwiKS5jb25jYXQodSxcIiBidXQgbWVzc2FnZUxpc3QgaXMgdW5kZWZpbmVkIVwiKSk6UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIGNvbXBsZXRlOlwiKS5jb25jYXQodSxcIiBjb3VudDpcIikuY29uY2F0KGkubGVuZ3RoKSksby5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlLmdyb3VwSUQsXCIgbGFzdFNlcXVlbmNlOlwiKS5jb25jYXQocixcIiBjb21wbGV0ZTpcIikuY29uY2F0KHUsXCIgY291bnQ6XCIpLmNvbmNhdChpP2kubGVuZ3RoOlwidW5kZWZpbmVkXCIpKS5lbmQoKTt2YXIgYz1cIkdST1VQXCIuY29uY2F0KGUuZ3JvdXBJRCksbD10LmdldE1vZHVsZShsbCk7aWYoMj09PXV8fFh1KGkpKXJldHVybiBsLnNldENvbXBsZXRlZChjKSxbXTt2YXIgZD1sLnN0b3JlUm9hbWluZ01lc3NhZ2UoaSxjKTtyZXR1cm4gbC51cGRhdGVJc1JlYWQoYyksbC5wYXRjaENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlKGMpLGR9KSkuY2F0Y2goKGZ1bmN0aW9uKGEpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMikscz1uWzBdLGk9blsxXTtvLnNldEVycm9yKGEscyxpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZS5ncm91cElELFwiIGxhc3RTZXF1ZW5jZTpcIikuY29uY2F0KHIpKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksYSksdW0oYSl9KSl9fSx7a2V5OlwiX2dldEdyb3VwSURPZk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb252ZXJzYXRpb25JRC5yZXBsYWNlKFluLkNPTlZfR1JPVVAsXCJcIil9fSx7a2V5OlwiZ2V0UmVhZFJlY2VpcHRMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRSZWFkUmVjZWlwdExpc3RcIiksbz10aGlzLl9nZXRHcm91cElET2ZNZXNzYWdlKGVbMF0pLHI9dGhpcy5nZXRNeVVzZXJJRCgpLGE9ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmZyb209PT1yJiYhMD09PWUubmVlZFJlYWRSZWNlaXB0fSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3NlcXVlbmNlOmUuc2VxdWVuY2V9fSkpO2lmKFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChvLFwiIHNlcXVlbmNlTGlzdDpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGEpKSksMD09PWEubGVuZ3RoKXJldHVybiBpbSh7bWVzc2FnZUxpc3Q6ZX0pO3ZhciBzPW5ldyBEcChZcCk7cmV0dXJuIHMuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG8pKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTprZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpvLHNlcXVlbmNlTGlzdDphfX0pLnRoZW4oKGZ1bmN0aW9uKHQpe3MuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpO3ZhciBvPXQuZGF0YS5yZWFkUmVjZWlwdExpc3Q7cmV0dXJuIGd1KG8pJiZvLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7MD09PXQuY29kZSYmdC5zZXF1ZW5jZT09PWUuc2VxdWVuY2UmJihlLnJlYWRSZWNlaXB0SW5mby5yZWFkQ291bnQ9dC5yZWFkQ291bnQsZS5yZWFkUmVjZWlwdEluZm8udW5yZWFkQ291bnQ9dC51bnJlYWRDb3VudCl9KSl9KSksUV8oe21lc3NhZ2VMaXN0OmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO3Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJzZW5kUmVhZFJlY2VpcHRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dGhpcy5fZ2V0R3JvdXBJRE9mTWVzc2FnZShlWzBdKSxvPW5ldyBEcCh6cCk7by5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobikpO3ZhciByPXRoaXMuZ2V0TXlVc2VySUQoKSxhPWUuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5mcm9tIT09ciYmITA9PT1lLm5lZWRSZWFkUmVjZWlwdH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntzZXF1ZW5jZTplLnNlcXVlbmNlfX0pKTtpZigwPT09YS5sZW5ndGgpcmV0dXJuIHVtKHtjb2RlOmxwLlJFQURfUkVDRUlQVF9TRVFVRU5DRV9MSVNUX0VNUFRZLG1lc3NhZ2U6ZHAuUkVBRF9SRUNFSVBUX1NFUVVFTkNFX0xJU1RfRU1QVFl9KTt2YXIgcz1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2VuZFJlYWRSZWNlaXB0XCIpO3JldHVybiBRaS5sb2coXCJcIi5jb25jYXQocyxcIi4gc2VxdWVuY2VMaXN0OlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoYSkpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpMZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpuLHNlcXVlbmNlTGlzdDphfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBvLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChzLFwiIG9rXCIpKSxRXygpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChzLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcImdldFJlYWRSZWNlaXB0RGV0YWlsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUubWVzc2FnZSxvPWUuZmlsdGVyLHI9ZS5jdXJzb3IsYT1lLmNvdW50LHM9dGhpcy5fZ2V0R3JvdXBJRE9mTWVzc2FnZShuKSxpPW4uSUQsdT1uLnNlcXVlbmNlLGM9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldFJlYWRSZWNlaXB0RGV0YWlsXCIpLGw9dGhpcy5fcmVjZWlwdERldGFpbENvbXBsZXRlTWFwLmdldChpKXx8ITEsZD0wIT09byYmMSE9PW8/MDpvLHA9bHUocik/cjpcIlwiLGc9IWN1KGEpfHxhPD0wfHxhPj0xMDA/MTAwOmEsaD1cImdyb3VwSUQ6XCIuY29uY2F0KHMsXCIgc2VxdWVuY2U6XCIpLmNvbmNhdCh1LFwiIGN1cnNvcjpcIikuY29uY2F0KHAsXCIgZmlsdGVyOlwiKS5jb25jYXQoZCxcIiBjb21wbGV0ZUZsYWc6XCIpLmNvbmNhdChsKTtRaS5sb2coXCJcIi5jb25jYXQoYyxcIiBcIikuY29uY2F0KGgpKTt2YXIgZj17Y3Vyc29yOlwiXCIsaXNDb21wbGV0ZWQ6ITEsbWVzc2FnZUlEOmksdW5yZWFkVXNlcklETGlzdDpbXSxyZWFkVXNlcklETGlzdDpbXX07aWYoITA9PT1sKXJldHVybiBmLmlzQ29tcGxldGVkPSEwLGltKGYpO3ZhciBfPW5ldyBEcCgkcCk7cmV0dXJuIF8uc2V0TWVzc2FnZShoKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpSZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpzLHNlcXVlbmNlOnUsZmxhZzpkLGN1cnNvcjpwLGNvdW50Omd9fSkudGhlbigoZnVuY3Rpb24oZSl7Xy5lbmQoKTt2YXIgbj1lLmRhdGEsbz1uLmN1cnNvcixyPW4uaXNDb21wbGV0ZWQsYT1uLnVucmVhZFVzZXJJRExpc3Qscz1uLnJlYWRVc2VySURMaXN0O3JldHVybiBmLmN1cnNvcj1vLDE9PT1yJiYoZi5pc0NvbXBsZXRlZD0hMCx0Ll9yZWNlaXB0RGV0YWlsQ29tcGxldGVNYXAuc2V0KGksITApKSwwPT09ZD9mLnJlYWRVc2VySURMaXN0PXMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS51c2VySUR9KSk6MT09PWQmJihmLnVucmVhZFVzZXJJRExpc3Q9YS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKSksUWkubG9nKFwiXCIuY29uY2F0KGMsXCIgb2tcIikpLFFfKGYpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07Xy5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChjLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcInNldE1lc3NhZ2VSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY29udmVyc2F0aW9uSUQsbz1lLmxhc3RNZXNzYWdlU2VxLHI9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldE1lc3NhZ2VSZWFkXCIpO1FpLmxvZyhcIlwiLmNvbmNhdChyLFwiIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobixcIiBsYXN0TWVzc2FnZVNlcTpcIikuY29uY2F0KG8pKSxjdShvKXx8UWkud2FybihcIlwiLmNvbmNhdChyLFwiIOivt+WLv+S/ruaUuSBDb252ZXJzYXRpb24ubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNl77yM5ZCm5YiZ5Y+v6IO95Lya5a+86Ie05bey6K+75LiK5oql57uT5p6c5LiN5YeG56GuXCIpKTt2YXIgYT1uZXcgRHAoWnApO3JldHVybiBhLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQobixcIi1cIikuY29uY2F0KG8pKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpEZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpuLnJlcGxhY2UoWW4uQ09OVl9HUk9VUCxcIlwiKSxtZXNzYWdlUmVhZFNlcTpvfX0pLnRoZW4oKGZ1bmN0aW9uKCl7YS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChyLFwiIG9rLlwiKSk7dmFyIGU9dC5nZXRNb2R1bGUobGwpO3JldHVybiBlLnVwZGF0ZUlzUmVhZEFmdGVyUmVhZFJlcG9ydCh7Y29udmVyc2F0aW9uSUQ6bixsYXN0TWVzc2FnZVNlcTpvfSksZS51cGRhdGVVbnJlYWRDb3VudChuKSxRXygpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkubG9nKFwiXCIuY29uY2F0KHIsXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiX2NvbXB1dGVMYXN0U2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5zZXF1ZW5jZT4wP1Byb21pc2UucmVzb2x2ZShlLnNlcXVlbmNlKTp0aGlzLmdldEdyb3VwTGFzdFNlcXVlbmNlKGUuZ3JvdXBJRCl9fSx7a2V5OlwiZ2V0R3JvdXBMYXN0U2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwTGFzdFNlcXVlbmNlXCIpLG89bmV3IERwKERnKSxyPTAsYT1cIlwiO2lmKHRoaXMuaGFzTG9jYWxHcm91cChlKSl7dmFyIHM9dGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShlKSxpPXMubGFzdE1lc3NhZ2U7aWYoaS5sYXN0U2VxdWVuY2U+MCYmITE9PT1pLm9ubGluZU9ubHlGbGFnKXJldHVybiByPWkubGFzdFNlcXVlbmNlLGE9XCJnb3QgbGFzdFNlcXVlbmNlOlwiLmNvbmNhdChyLFwiIGZyb20gbG9jYWwgZ3JvdXAgcHJvZmlsZVtsYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2VdLiBncm91cElEOlwiKS5jb25jYXQoZSksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgXCIpLmNvbmNhdChhKSksby5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQoYSkpLmVuZCgpLFByb21pc2UucmVzb2x2ZShyKTtpZihzLm5leHRNZXNzYWdlU2VxPjEpcmV0dXJuIHI9cy5uZXh0TWVzc2FnZVNlcS0xLGE9XCJnb3QgbGFzdFNlcXVlbmNlOlwiLmNvbmNhdChyLFwiIGZyb20gbG9jYWwgZ3JvdXAgcHJvZmlsZVtuZXh0TWVzc2FnZVNlcV0uIGdyb3VwSUQ6XCIpLmNvbmNhdChlKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBcIikuY29uY2F0KGEpKSxvLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChhKSkuZW5kKCksUHJvbWlzZS5yZXNvbHZlKHIpfXZhciB1PVwiR1JPVVBcIi5jb25jYXQoZSksYz10aGlzLmdldE1vZHVsZShsbCkuZ2V0TG9jYWxDb252ZXJzYXRpb24odSk7aWYoYyYmYy5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2UmJiExPT09Yy5sYXN0TWVzc2FnZS5vbmxpbmVPbmx5RmxhZylyZXR1cm4gcj1jLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZSxhPVwiZ290IGxhc3RTZXF1ZW5jZTpcIi5jb25jYXQocixcIiBmcm9tIGxvY2FsIGNvbnZlcnNhdGlvbiBwcm9maWxlW2xhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZV0uIGdyb3VwSUQ6XCIpLmNvbmNhdChlKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBcIikuY29uY2F0KGEpKSxvLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChhKSkuZW5kKCksUHJvbWlzZS5yZXNvbHZlKHIpO3ZhciBsPXtncm91cElETGlzdDpbZV0scmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZUluZm9GaWx0ZXI6W1wiTmV4dE1zZ1NlcVwiXX19O3JldHVybiB0aGlzLmdldEdyb3VwUHJvZmlsZUFkdmFuY2UobCkudGhlbigoZnVuY3Rpb24ocyl7dmFyIGk9cy5kYXRhLnN1Y2Nlc3NHcm91cExpc3Q7cmV0dXJuIFh1KGkpP1FpLmxvZyhcIlwiLmNvbmNhdChuLFwiIHN1Y2Nlc3NHcm91cExpc3QgaXMgZW1wdHkuIGdyb3VwSUQ6XCIpLmNvbmNhdChlKSk6KHI9aVswXS5uZXh0TWVzc2FnZVNlcS0xLGE9XCJnb3QgbGFzdFNlcXVlbmNlOlwiLmNvbmNhdChyLFwiIGZyb20gZ2V0R3JvdXBQcm9maWxlQWR2YW5jZS4gZ3JvdXBJRDpcIikuY29uY2F0KGUpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIFwiKS5jb25jYXQoYSkpKSxvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChhKSkuZW5kKCkscn0pKS5jYXRjaCgoZnVuY3Rpb24ocil7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxhPW5bMF0scz1uWzFdO28uc2V0RXJyb3IocixhLHMpLnNldE1lc3NhZ2UoXCJnZXQgbGFzdFNlcXVlbmNlIGZhaWxlZCBmcm9tIGdldEdyb3VwUHJvZmlsZUFkdmFuY2UuIGdyb3VwSUQ6XCIuY29uY2F0KGUpKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksciksdW0ocil9KSl9fSx7a2V5OlwiaXNNZXNzYWdlRnJvbU9yVG9BVkNoYXRyb29tXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLl9BVkNoYXRSb29tSGFuZGxlciYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKX19LHtrZXk6XCJoYXNKb2luZWRBVkNoYXRSb29tXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXI/dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuaGFzSm9pbmVkQVZDaGF0Um9vbSgpOjB9fSx7a2V5OlwiZ2V0Sm9pbmVkQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyP3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmdldEpvaW5lZEFWQ2hhdFJvb20oKTpbXX19LHtrZXk6XCJpc09ubGluZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEoIXRoaXMuX2NhbklVc2VPbmxpbmVPbmx5RmxhZyhlKXx8IXR8fCEwIT09dC5vbmxpbmVVc2VyT25seSl9fSx7a2V5OlwiX2NhbklVc2VPbmxpbmVPbmx5RmxhZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0Sm9pbmVkQVZDaGF0Um9vbSgpO3JldHVybiF0fHwhdC5pbmNsdWRlcyhlLnRvKXx8ZS5jb252ZXJzYXRpb25UeXBlIT09WW4uQ09OVl9HUk9VUH19LHtrZXk6XCJfb25BVkNoYXRSb29tSGlzdG9yeU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZighWHUoZSkpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uQVZDaGF0Um9vbUhpc3RvcnlNZXNzYWdlIGNvdW50OlwiKS5jb25jYXQoZS5sZW5ndGgpKTt2YXIgdD1bXTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QucHVzaChTbih7fSxlLHtpc0hpc3RvcnlNZXNzYWdlOjF9KSl9KSksdGhpcy5vbkFWQ2hhdFJvb21NZXNzYWdlKHQpfX19LHtrZXk6XCJvbkFWQ2hhdFJvb21NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXImJnRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLm9uTWVzc2FnZShlKX19LHtrZXk6XCJnZXRHcm91cFNpbXBsaWZpZWRJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPW5ldyBEcChrZyksbz17Z3JvdXBJRExpc3Q6W2VdLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIl19fTtyZXR1cm4gdGhpcy5nZXRHcm91cFByb2ZpbGVBZHZhbmNlKG8pLnRoZW4oKGZ1bmN0aW9uKG8pe3ZhciByPW8uZGF0YS5zdWNjZXNzR3JvdXBMaXN0O3JldHVybiBuLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUsXCIgdHlwZTpcIikuY29uY2F0KHJbMF0udHlwZSkpLmVuZCgpLHJbMF19KSkuY2F0Y2goKGZ1bmN0aW9uKG8pe3QucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIHI9UG4odCwyKSxhPXJbMF0scz1yWzFdO24uc2V0RXJyb3IobyxhLHMpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlKSkuZW5kKCl9KSl9KSl9fSx7a2V5Olwic2V0VW5qb2luZWRBVkNoYXRSb29tXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5zZXQoZSwxKX19LHtrZXk6XCJkZWxldGVVbmpvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LmhhcyhlKSYmdGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5kZWxldGUoZSl9fSx7a2V5OlwiaXNVbmpvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5oYXMoZSl9fSx7a2V5Olwib25Hcm91cEF0dHJpYnV0ZXNVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlciYmdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5vbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWQoZSl9fSx7a2V5OlwidXBkYXRlTG9jYWxNYWluU2VxdWVuY2VPblJlY29ubmVjdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyJiZ0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLnVwZGF0ZUxvY2FsTWFpblNlcXVlbmNlT25SZWNvbm5lY3RlZCgpfX0se2tleTpcImluaXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5pbml0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcInNldEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLnNldEdyb3VwQXR0cmlidXRlcyhlKX19LHtrZXk6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5kZWxldGVHcm91cEF0dHJpYnV0ZXMoZSl9fSx7a2V5OlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXIuZ2V0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmdyb3VwTWFwLmNsZWFyKCksdGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5jbGVhcigpLHRoaXMuX3JlY2VpcHREZXRhaWxDb21wbGV0ZU1hcC5jbGVhcigpLHRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5yZXNldCgpLHRoaXMuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlci5yZXNldCgpLHRoaXMuX2dyb3VwVGlwc0hhbmRsZXIucmVzZXQoKSx0aGlzLl9BVkNoYXRSb29tSGFuZGxlciYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIucmVzZXQoKX19XSksbn0oTmwpLFptPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMudXNlcklEPVwiXCIsdGhpcy5hdmF0YXI9XCJcIix0aGlzLm5pY2s9XCJcIix0aGlzLnJvbGU9XCJcIix0aGlzLmpvaW5UaW1lPVwiXCIsdGhpcy5sYXN0U2VuZE1zZ1RpbWU9XCJcIix0aGlzLm5hbWVDYXJkPVwiXCIsdGhpcy5tdXRlVW50aWw9MCx0aGlzLm1lbWJlckN1c3RvbUZpZWxkPVtdLHRoaXMuX2luaXRNZW1iZXIodCl9cmV0dXJuIEVuKGUsW3trZXk6XCJfaW5pdE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMudXBkYXRlTWVtYmVyKGUpfX0se2tleTpcInVwZGF0ZU1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVtudWxsLHZvaWQgMCxcIlwiLDAsTmFOXTtlLm1lbWJlckN1c3RvbUZpZWxkJiZHdSh0aGlzLm1lbWJlckN1c3RvbUZpZWxkLGUubWVtYmVyQ3VzdG9tRmllbGQpLEV1KHRoaXMsZSxbXCJtZW1iZXJDdXN0b21GaWVsZFwiXSx0KX19LHtrZXk6XCJ1cGRhdGVSb2xlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7W1wiT3duZXJcIixcIkFkbWluXCIsXCJNZW1iZXJcIl0uaW5kZXhPZihlKTwwfHwodGhpcy5yb2xlPWUpfX0se2tleTpcInVwZGF0ZU11dGVVbnRpbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2h1KGUpfHwodGhpcy5tdXRlVW50aWw9TWF0aC5mbG9vcigoRGF0ZS5ub3coKSsxZTMqZSkvMWUzKSl9fSx7a2V5OlwidXBkYXRlTmFtZUNhcmRcIix2YWx1ZTpmdW5jdGlvbihlKXtodShlKXx8KHRoaXMubmFtZUNhcmQ9ZSl9fSx7a2V5OlwidXBkYXRlTWVtYmVyQ3VzdG9tRmllbGRcIix2YWx1ZTpmdW5jdGlvbihlKXtlJiZHdSh0aGlzLm1lbWJlckN1c3RvbUZpZWxkLGUpfX1dKSxlfSgpLGV2PWZ1bmN0aW9uKGUpe0RuKG4sZSk7dmFyIHQ9d24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkdyb3VwTWVtYmVyTW9kdWxlXCIsby5ncm91cE1lbWJlckxpc3RNYXA9bmV3IE1hcCxvLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oSW0sby5fb25Qcm9maWxlVXBkYXRlZCxHbihvKSksb31yZXR1cm4gRW4obixbe2tleTpcIl9vblByb2ZpbGVVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMsbj1lLmRhdGEsbz1mdW5jdGlvbihlKXt2YXIgbz1uW2VdO3QuZ3JvdXBNZW1iZXJMaXN0TWFwLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuaGFzKG8udXNlcklEKSYmZS5nZXQoby51c2VySUQpLnVwZGF0ZU1lbWJlcih7bmljazpvLm5pY2ssYXZhdGFyOm8uYXZhdGFyfSl9KSl9LHI9MDtyPG4ubGVuZ3RoO3IrKylvKHIpfX0se2tleTpcImRlbGV0ZUdyb3VwTWVtYmVyTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmRlbGV0ZShlKX19LHtrZXk6XCJnZXRHcm91cE1lbWJlckxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS5vZmZzZXQscj12b2lkIDA9PT1vPzA6byxhPWUuY291bnQscz12b2lkIDA9PT1hPzE1OmEsaT1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBNZW1iZXJMaXN0XCIpLHU9bmV3IERwKHdnKTtRaS5sb2coXCJcIi5jb25jYXQoaSxcIiBncm91cElEOlwiKS5jb25jYXQobixcIiBvZmZzZXQ6XCIpLmNvbmNhdChyLFwiIGNvdW50OlwiKS5jb25jYXQocykpO3ZhciBjPTAsbD17Z3JvdXBJRDpuLGxpbWl0OnM+MTAwPzEwMDpzfTtQdSh7Z3JvdXBJRDpufSk/bC5uZXh0PVwiXCIuY29uY2F0KHIpOihsLm9mZnNldD1yLGM9cisxKTt2YXIgZD1bXTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6QmQscmVxdWVzdERhdGE6bH0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZGF0YSxyPW8ubWVtYmVycyxhPW8ubWVtYmVyTnVtLHM9by5uZXh0LGk9dm9pZCAwPT09cz92b2lkIDA6cztpZihodShpKXx8KGM9WHUoaSk/MDppKSwhZ3Uocil8fDA9PT1yLmxlbmd0aClyZXR1cm4gYz0wLFByb21pc2UucmVzb2x2ZShbXSk7dmFyIHU9dC5nZXRNb2R1bGUoaWwpO3JldHVybiB1Lmhhc0xvY2FsR3JvdXAobikmJih1LmdldExvY2FsR3JvdXBQcm9maWxlKG4pLm1lbWJlck51bT1hKSxkPXQuX3VwZGF0ZUxvY2FsR3JvdXBNZW1iZXJNYXAobixyKSx0LmdldE1vZHVsZShhbCkuZ2V0VXNlclByb2ZpbGUoe3VzZXJJRExpc3Q6ci5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKSx0YWdMaXN0OltldS5OSUNLLGV1LkFWQVRBUl19KX0pKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz1lLmRhdGE7aWYoIWd1KG8pfHwwPT09by5sZW5ndGgpcmV0dXJuIGltKHttZW1iZXJMaXN0OltdLG9mZnNldDpjfSk7dmFyIHI9by5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt1c2VySUQ6ZS51c2VySUQsbmljazplLm5pY2ssYXZhdGFyOmUuYXZhdGFyfX0pKTtyZXR1cm4gdC5fdXBkYXRlTG9jYWxHcm91cE1lbWJlck1hcChuLHIpLHUuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiBvZmZzZXQ6XCIpLmNvbmNhdChjLFwiIGNvdW50OlwiKS5jb25jYXQocykpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChpLFwiIG9rLlwiKSksUV8oe21lbWJlckxpc3Q6ZCxvZmZzZXQ6Y30pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07dS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQoaSxcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJnZXRHcm91cE1lbWJlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwTWVtYmVyUHJvZmlsZVwiKSxvPW5ldyBEcChQZyk7by5zZXRNZXNzYWdlKGUudXNlcklETGlzdC5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiLmNvbmNhdChlLnVzZXJJRExpc3QubGVuZ3RoKTpcInVzZXJJRExpc3Q6XCIuY29uY2F0KGUudXNlcklETGlzdCkpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChlLmdyb3VwSUQsXCIgdXNlcklETGlzdDpcIikuY29uY2F0KGUudXNlcklETGlzdC5qb2luKFwiLFwiKSkpLGUudXNlcklETGlzdC5sZW5ndGg+NTAmJihlLnVzZXJJRExpc3Q9ZS51c2VySURMaXN0LnNsaWNlKDAsNTApKTt2YXIgcj1lLmdyb3VwSUQsYT1lLnVzZXJJRExpc3Q7cmV0dXJuIHRoaXMuX2dldEdyb3VwTWVtYmVyUHJvZmlsZUFkdmFuY2UoU24oe30sZSx7dXNlcklETGlzdDphfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YS5tZW1iZXJzO3JldHVybiBndShuKSYmMCE9PW4ubGVuZ3RoPyh0Ll91cGRhdGVMb2NhbEdyb3VwTWVtYmVyTWFwKHIsbiksdC5nZXRNb2R1bGUoYWwpLmdldFVzZXJQcm9maWxlKHt1c2VySURMaXN0Om4ubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS51c2VySUR9KSksdGFnTGlzdDpbZXUuTklDSyxldS5BVkFUQVJdfSkpOmltKFtdKX0pKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1lLmRhdGEubWFwKChmdW5jdGlvbihlKXtyZXR1cm57dXNlcklEOmUudXNlcklELG5pY2s6ZS5uaWNrLGF2YXRhcjplLmF2YXRhcn19KSk7dC5fdXBkYXRlTG9jYWxHcm91cE1lbWJlck1hcChyLG4pO3ZhciBzPWEuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gdC5oYXNMb2NhbEdyb3VwTWVtYmVyKHIsZSl9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gdC5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhyLGUpfSkpO3JldHVybiBvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUV8oe21lbWJlckxpc3Q6c30pfSkpfX0se2tleTpcImFkZEdyb3VwTWVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRHcm91cE1lbWJlclwiKSxvPWUuZ3JvdXBJRCxyPXRoaXMuZ2V0TW9kdWxlKGlsKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKSxhPXIudHlwZSxzPW5ldyBEcChVZyk7aWYocy5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobyxcIiBncm91cFR5cGU6XCIpLmNvbmNhdChhKSksd3UoYSkpe3ZhciBpPW5ldyBybSh7Y29kZTpscC5DQU5OT1RfQUREX01FTUJFUl9JTl9BVkNIQVRST09NLG1lc3NhZ2U6ZHAuQ0FOTk9UX0FERF9NRU1CRVJfSU5fQVZDSEFUUk9PTX0pO3JldHVybiBzLnNldENvZGUobHAuQ0FOTk9UX0FERF9NRU1CRVJfSU5fQVZDSEFUUk9PTSkuc2V0RXJyb3IoZHAuQ0FOTk9UX0FERF9NRU1CRVJfSU5fQVZDSEFUUk9PTSkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSx1bShpKX1yZXR1cm4gZS51c2VySURMaXN0PWUudXNlcklETGlzdC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt1c2VySUQ6ZX19KSksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KG8pKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpqZCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24obyl7dmFyIGE9by5kYXRhLm1lbWJlcnM7UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpO3ZhciBpPWEuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUucmVzdWx0fSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudXNlcklEfSkpLHU9YS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZS5yZXN1bHR9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS51c2VySUR9KSksYz1hLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIDI9PT1lLnJlc3VsdH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKSxsPWEuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gND09PWUucmVzdWx0fSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudXNlcklEfSkpLGQ9XCJncm91cElEOlwiLmNvbmNhdChlLmdyb3VwSUQsXCIsIFwiKStcInN1Y2Nlc3NVc2VySURMaXN0OlwiLmNvbmNhdChpLFwiLCBcIikrXCJmYWlsdXJlVXNlcklETGlzdDpcIi5jb25jYXQodSxcIiwgXCIpK1wiZXhpc3RlZFVzZXJJRExpc3Q6XCIuY29uY2F0KGMsXCIsIFwiKStcIm92ZXJMaW1pdFVzZXJJRExpc3Q6XCIuY29uY2F0KGwpO3JldHVybiBzLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TW9yZU1lc3NhZ2UoZCkuZW5kKCksMD09PWkubGVuZ3RoP1FfKHtzdWNjZXNzVXNlcklETGlzdDppLGZhaWx1cmVVc2VySURMaXN0OnUsZXhpc3RlZFVzZXJJRExpc3Q6YyxvdmVyTGltaXRVc2VySURMaXN0Omx9KTooci5tZW1iZXJDb3VudCs9aS5sZW5ndGgsdC5fdXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKHIpLFFfKHtzdWNjZXNzVXNlcklETGlzdDppLGZhaWx1cmVVc2VySURMaXN0OnUsZXhpc3RlZFVzZXJJRExpc3Q6YyxvdmVyTGltaXRVc2VySURMaXN0OmwsZ3JvdXA6cn0pKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO3Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiZGVsZXRlR3JvdXBNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUdyb3VwTWVtYmVyXCIpLG89ZS5ncm91cElELHI9ZS51c2VySURMaXN0LGE9bmV3IERwKEZnKSxzPVwiZ3JvdXBJRDpcIi5jb25jYXQobyxcIiBcIikuY29uY2F0KHIubGVuZ3RoPjU/XCJ1c2VySURMaXN0Lmxlbmd0aDpcIi5jb25jYXQoci5sZW5ndGgpOlwidXNlcklETGlzdDpcIi5jb25jYXQocikpO2Euc2V0TWVzc2FnZShzKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQobyxcIiB1c2VySURMaXN0OlwiKSxyKTt2YXIgaT10aGlzLmdldE1vZHVsZShpbCkuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7cmV0dXJuIHd1KGkudHlwZSk/dW0obmV3IHJtKHtjb2RlOmxwLkNBTk5PVF9LSUNLX01FTUJFUl9JTl9BVkNIQVRST09NLG1lc3NhZ2U6ZHAuQ0FOTk9UX0tJQ0tfTUVNQkVSX0lOX0FWQ0hBVFJPT019KSk6dGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6V2QscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSksaS5tZW1iZXJDb3VudC09MSx0Ll91cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUoaSksdC5kZWxldGVMb2NhbEdyb3VwTWVtYmVycyhvLHIpLFFfKHtncm91cDppLHVzZXJJRExpc3Q6cn0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJfdXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5nZXRNb2R1bGUobGwpLnVwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShbZV0pfX0se2tleTpcInNldEdyb3VwTWVtYmVyTXV0ZVRpbWVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS51c2VySUQscj1lLm11dGVUaW1lLGE9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldEdyb3VwTWVtYmVyTXV0ZVRpbWVcIik7aWYobz09PXRoaXMuZ2V0TXlVc2VySUQoKSlyZXR1cm4gdW0obmV3IHJtKHtjb2RlOmxwLkNBTk5PVF9NVVRFX1NFTEYsbWVzc2FnZTpkcC5DQU5OT1RfTVVURV9TRUxGfSkpO1FpLmxvZyhcIlwiLmNvbmNhdChhLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIHVzZXJJRDpcIikuY29uY2F0KG8pKTt2YXIgcz1uZXcgRHAocWcpO3JldHVybiBzLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIHVzZXJJRDpcIikuY29uY2F0KG8sXCIgbXV0ZVRpbWU6XCIpLmNvbmNhdChyKSksdGhpcy5tb2RpZnlHcm91cE1lbWJlckluZm8oe2dyb3VwSUQ6bix1c2VySUQ6byxtdXRlVGltZTpyfSkudGhlbigoZnVuY3Rpb24oZSl7cy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChhLFwiIG9rXCIpKTt2YXIgbz10LmdldE1vZHVsZShpbCk7cmV0dXJuIFFfKHtncm91cDpvLmdldExvY2FsR3JvdXBQcm9maWxlKG4pLG1lbWJlcjplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtzLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChhLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcInNldEdyb3VwTWVtYmVyUm9sZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0R3JvdXBNZW1iZXJSb2xlXCIpLG89ZS5ncm91cElELHI9ZS51c2VySUQsYT1lLnJvbGUscz10aGlzLmdldE1vZHVsZShpbCkuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7aWYocy5zZWxmSW5mby5yb2xlIT09WW4uR1JQX01CUl9ST0xFX09XTkVSKXJldHVybiB1bSh7Y29kZTpscC5OT1RfT1dORVIsbWVzc2FnZTpkcC5OT1RfT1dORVJ9KTtpZihbWW4uR1JQX1dPUkssWW4uR1JQX0FWQ0hBVFJPT01dLmluY2x1ZGVzKHMudHlwZSkpcmV0dXJuIHVtKHtjb2RlOmxwLkNBTk5PVF9TRVRfTUVNQkVSX1JPTEVfSU5fV09SS19BTkRfQVZDSEFUUk9PTSxtZXNzYWdlOmRwLkNBTk5PVF9TRVRfTUVNQkVSX1JPTEVfSU5fV09SS19BTkRfQVZDSEFUUk9PTX0pO3ZhciBpPVtZbi5HUlBfTUJSX1JPTEVfQURNSU4sWW4uR1JQX01CUl9ST0xFX01FTUJFUl07aWYoUHUoe2dyb3VwSUQ6b30pJiZpLnB1c2goWW4uR1JQX01CUl9ST0xFX0NVU1RPTSksaS5pbmRleE9mKGEpPDApcmV0dXJuIHVtKHtjb2RlOmxwLklOVkFMSURfTUVNQkVSX1JPTEUsbWVzc2FnZTpkcC5JTlZBTElEX01FTUJFUl9ST0xFfSk7aWYocj09PXRoaXMuZ2V0TXlVc2VySUQoKSlyZXR1cm4gdW0oe2NvZGU6bHAuQ0FOTk9UX1NFVF9TRUxGX01FTUJFUl9ST0xFLG1lc3NhZ2U6ZHAuQ0FOTk9UX1NFVF9TRUxGX01FTUJFUl9ST0xFfSk7dmFyIHU9bmV3IERwKFZnKTtyZXR1cm4gdS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobyxcIiB1c2VySUQ6XCIpLmNvbmNhdChyLFwiIHJvbGU6XCIpLmNvbmNhdChhKSksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQocikpLHRoaXMubW9kaWZ5R3JvdXBNZW1iZXJJbmZvKHtncm91cElEOm8sdXNlcklEOnIscm9sZTphfSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIHUuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSksUV8oe2dyb3VwOnMsbWVtYmVyOmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO3Uuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJOYW1lQ2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0R3JvdXBNZW1iZXJOYW1lQ2FyZFwiKSxvPWUuZ3JvdXBJRCxyPWUudXNlcklELGE9dm9pZCAwPT09cj90aGlzLmdldE15VXNlcklEKCk6cixzPWUubmFtZUNhcmQ7UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQoYSkpO3ZhciBpPW5ldyBEcCh4Zyk7cmV0dXJuIGkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQoYSxcIiBuYW1lQ2FyZDpcIikuY29uY2F0KHMpKSx0aGlzLm1vZGlmeUdyb3VwTWVtYmVySW5mbyh7Z3JvdXBJRDpvLHVzZXJJRDphLG5hbWVDYXJkOnN9KS50aGVuKChmdW5jdGlvbihlKXtRaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSksaS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpO3ZhciByPXQuZ2V0TW9kdWxlKGlsKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtyZXR1cm4gYT09PXQuZ2V0TXlVc2VySUQoKSYmciYmci5zZXRTZWxmTmFtZUNhcmQocyksUV8oe2dyb3VwOnIsbWVtYmVyOmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2kuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZFwiKSxvPWUuZ3JvdXBJRCxyPWUudXNlcklELGE9dm9pZCAwPT09cj90aGlzLmdldE15VXNlcklEKCk6cixzPWUubWVtYmVyQ3VzdG9tRmllbGQ7UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQoYSkpO3ZhciBpPW5ldyBEcChLZyk7cmV0dXJuIGkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQoYSxcIiBtZW1iZXJDdXN0b21GaWVsZDpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KHMpKSksdGhpcy5tb2RpZnlHcm91cE1lbWJlckluZm8oe2dyb3VwSUQ6byx1c2VySUQ6YSxtZW1iZXJDdXN0b21GaWVsZDpzfSkudGhlbigoZnVuY3Rpb24oZSl7aS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKTt2YXIgcj10LmdldE1vZHVsZShpbCkuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7cmV0dXJuIFFfKHtncm91cDpyLG1lbWJlcjplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtpLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcIm1vZGlmeUdyb3VwTWVtYmVySW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLnVzZXJJRDtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6WWQscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKCl7aWYodC5oYXNMb2NhbEdyb3VwTWVtYmVyKG4sbykpe3ZhciByPXQuZ2V0TG9jYWxHcm91cE1lbWJlckluZm8obixvKTtyZXR1cm4gaHUoZS5tdXRlVGltZSl8fHIudXBkYXRlTXV0ZVVudGlsKGUubXV0ZVRpbWUpLGh1KGUucm9sZSl8fHIudXBkYXRlUm9sZShlLnJvbGUpLGh1KGUubmFtZUNhcmQpfHxyLnVwZGF0ZU5hbWVDYXJkKGUubmFtZUNhcmQpLGh1KGUubWVtYmVyQ3VzdG9tRmllbGQpfHxyLnVwZGF0ZU1lbWJlckN1c3RvbUZpZWxkKGUubWVtYmVyQ3VzdG9tRmllbGQpLHJ9cmV0dXJuIHQuZ2V0R3JvdXBNZW1iZXJQcm9maWxlKHtncm91cElEOm4sdXNlcklETGlzdDpbb119KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gUG4oZS5kYXRhLm1lbWJlckxpc3QsMSlbMF19KSl9KSl9fSx7a2V5OlwiX2dldEdyb3VwTWVtYmVyUHJvZmlsZUFkdmFuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6SGQscmVxdWVzdERhdGE6U24oe30sZSx7bWVtYmVySW5mb0ZpbHRlcjplLm1lbWJlckluZm9GaWx0ZXI/ZS5tZW1iZXJJbmZvRmlsdGVyOltcIlJvbGVcIixcIkpvaW5UaW1lXCIsXCJOYW1lQ2FyZFwiLFwiU2h1dFVwVW50aWxcIl19KX0pfX0se2tleTpcIl91cGRhdGVMb2NhbEdyb3VwTWVtYmVyTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3JldHVybiBndSh0KSYmMCE9PXQubGVuZ3RoP3QubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gbi5oYXNMb2NhbEdyb3VwTWVtYmVyKGUsdC51c2VySUQpP24uZ2V0TG9jYWxHcm91cE1lbWJlckluZm8oZSx0LnVzZXJJRCkudXBkYXRlTWVtYmVyKHQpOm4uc2V0TG9jYWxHcm91cE1lbWJlcihlLG5ldyBabSh0KSksbi5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhlLHQudXNlcklEKX0pKTpbXX19LHtrZXk6XCJkZWxldGVMb2NhbEdyb3VwTWVtYmVyc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZ2V0KGUpO24mJnQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bi5kZWxldGUoZSl9KSl9fSx7a2V5OlwiZ2V0TG9jYWxHcm91cE1lbWJlckluZm9cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5oYXMoZSk/dGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZ2V0KGUpLmdldCh0KTpudWxsfX0se2tleTpcInNldExvY2FsR3JvdXBNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmhhcyhlKSl0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSkuc2V0KHQudXNlcklELHQpO2Vsc2V7dmFyIG49KG5ldyBNYXApLnNldCh0LnVzZXJJRCx0KTt0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5zZXQoZSxuKX19fSx7a2V5OlwiZ2V0TG9jYWxHcm91cE1lbWJlckxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZ2V0KGUpfX0se2tleTpcImhhc0xvY2FsR3JvdXBNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5oYXMoZSkmJnRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmdldChlKS5oYXModCl9fSx7a2V5OlwiaGFzTG9jYWxHcm91cE1lbWJlck1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5oYXMoZSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmNsZWFyKCl9fV0pLG59KE5sKSx0dj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl91c2VyTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiUHJvZmlsZUhhbmRsZXJcIix0aGlzLlRBRz1cInByb2ZpbGVcIix0aGlzLmFjY291bnRQcm9maWxlTWFwPW5ldyBNYXAsdGhpcy5leHBpcmF0aW9uVGltZT04NjRlNX1yZXR1cm4gRW4oZSxbe2tleTpcInNldEV4cGlyYXRpb25UaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5leHBpcmF0aW9uVGltZT1lfX0se2tleTpcImdldFVzZXJQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUudXNlcklETGlzdDtlLmZyb21BY2NvdW50PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCksbi5sZW5ndGg+MTAwJiYoUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0VXNlclByb2ZpbGUg6I635Y+W55So5oi36LWE5paZ5Lq65pWw5LiN6IO96LaF6L+HMTAw5Lq6XCIpKSxuLmxlbmd0aD0xMDApO2Zvcih2YXIgbyxyPVtdLGE9W10scz0wLGk9bi5sZW5ndGg7czxpO3MrKylvPW5bc10sdGhpcy5fdXNlck1vZHVsZS5pc015RnJpZW5kKG8pJiZ0aGlzLl9jb250YWluc0FjY291bnQobyk/YS5wdXNoKHRoaXMuX2dldFByb2ZpbGVGcm9tTWFwKG8pKTpyLnB1c2gobyk7aWYoMD09PXIubGVuZ3RoKXJldHVybiBpbShhKTtlLnRvQWNjb3VudD1yO3ZhciB1PWUuYkZyb21HZXRNeVByb2ZpbGV8fCExLGM9W107ZS50b0FjY291bnQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Yy5wdXNoKHt0b0FjY291bnQ6ZSxzdGFuZGFyZFNlcXVlbmNlOjAsY3VzdG9tU2VxdWVuY2U6MH0pfSkpLGUudXNlckl0ZW09Yzt2YXIgbD1uZXcgRHAoWWcpO3JldHVybiBsLnNldE1lc3NhZ2Uobi5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiLmNvbmNhdChuLmxlbmd0aCk6XCJ1c2VySURMaXN0OlwiLmNvbmNhdChuKSksdGhpcy5fdXNlck1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6UGwscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKGUpe2wuc2V0TmV0d29ya1R5cGUodC5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5pbmZvKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5nZXRVc2VyUHJvZmlsZSBva1wiKSk7dmFyIG49dC5faGFuZGxlUmVzcG9uc2UoZSkuY29uY2F0KGEpO3JldHVybiBRXyh1P25bMF06bil9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll91c2VyTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtsLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZ2V0VXNlclByb2ZpbGUgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiZ2V0TXlQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpO2lmKFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0TXlQcm9maWxlIG15QWNjb3VudDpcIikuY29uY2F0KGUpKSx0aGlzLl9maWxsTWFwKCksdGhpcy5fY29udGFpbnNBY2NvdW50KGUpKXt2YXIgdD10aGlzLl9nZXRQcm9maWxlRnJvbU1hcChlKTtyZXR1cm4gUWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldE15UHJvZmlsZSBmcm9tIGNhY2hlLCBteVByb2ZpbGU6XCIpK0pTT04uc3RyaW5naWZ5KHQpKSxpbSh0KX1yZXR1cm4gdGhpcy5nZXRVc2VyUHJvZmlsZSh7ZnJvbUFjY291bnQ6ZSx1c2VySURMaXN0OltlXSxiRnJvbUdldE15UHJvZmlsZTohMH0pfX0se2tleTpcIl9oYW5kbGVSZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLG89SXUubm93KCkscj1lLmRhdGEudXNlclByb2ZpbGVJdGVtLGE9W10scz0wLGk9ci5sZW5ndGg7czxpO3MrKylcIkBUTFMjTk9UX0ZPVU5EXCIhPT1yW3NdLnRvJiZcIlwiIT09cltzXS50byYmKHQ9cltzXS50byxuPXRoaXMuX3VwZGF0ZU1hcCh0LHRoaXMuX2dldExhdGVzdFByb2ZpbGVGcm9tUmVzcG9uc2UodCxyW3NdLnByb2ZpbGVJdGVtKSksYS5wdXNoKG4pKTtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5faGFuZGxlUmVzcG9uc2UgY29zdCBcIikuY29uY2F0KEl1Lm5vdygpLW8sXCIgbXNcIikpLGF9fSx7a2V5OlwiX2dldExhdGVzdFByb2ZpbGVGcm9tUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXt9O2lmKG4udXNlcklEPWUsbi5wcm9maWxlQ3VzdG9tRmllbGQ9W10sIVh1KHQpKWZvcih2YXIgbz0wLHI9dC5sZW5ndGg7bzxyO28rKylpZih0W29dLnRhZy5pbmRleE9mKFwiVGFnX1Byb2ZpbGVfQ3VzdG9tXCIpPi0xKW4ucHJvZmlsZUN1c3RvbUZpZWxkLnB1c2goe2tleTp0W29dLnRhZyx2YWx1ZTp0W29dLnZhbHVlfSk7ZWxzZSBzd2l0Y2godFtvXS50YWcpe2Nhc2UgZXUuTklDSzpuLm5pY2s9dFtvXS52YWx1ZTticmVhaztjYXNlIGV1LkdFTkRFUjpuLmdlbmRlcj10W29dLnZhbHVlO2JyZWFrO2Nhc2UgZXUuQklSVEhEQVk6bi5iaXJ0aGRheT10W29dLnZhbHVlO2JyZWFrO2Nhc2UgZXUuTE9DQVRJT046bi5sb2NhdGlvbj10W29dLnZhbHVlO2JyZWFrO2Nhc2UgZXUuU0VMRlNJR05BVFVSRTpuLnNlbGZTaWduYXR1cmU9dFtvXS52YWx1ZTticmVhaztjYXNlIGV1LkFMTE9XVFlQRTpuLmFsbG93VHlwZT10W29dLnZhbHVlO2JyZWFrO2Nhc2UgZXUuTEFOR1VBR0U6bi5sYW5ndWFnZT10W29dLnZhbHVlO2JyZWFrO2Nhc2UgZXUuQVZBVEFSOm4uYXZhdGFyPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBldS5NRVNTQUdFU0VUVElOR1M6bi5tZXNzYWdlU2V0dGluZ3M9dFtvXS52YWx1ZTticmVhaztjYXNlIGV1LkFETUlORk9SQklEVFlQRTpuLmFkbWluRm9yYmlkVHlwZT10W29dLnZhbHVlO2JyZWFrO2Nhc2UgZXUuTEVWRUw6bi5sZXZlbD10W29dLnZhbHVlO2JyZWFrO2Nhc2UgZXUuUk9MRTpuLnJvbGU9dFtvXS52YWx1ZTticmVhaztkZWZhdWx0OlFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9oYW5kbGVSZXNwb25zZSB1bmtub3duIHRhZzpcIiksdFtvXS50YWcsdFtvXS52YWx1ZSl9cmV0dXJuIG59fSx7a2V5OlwidXBkYXRlTXlQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGRhdGVNeVByb2ZpbGVcIiksbz1uZXcgRHAoJGcpO28uc2V0TWVzc2FnZShKU09OLnN0cmluZ2lmeShlKSk7dmFyIHI9KG5ldyBrbSkudmFsaWRhdGUoZSk7aWYoIXIudmFsaWQpcmV0dXJuIG8uc2V0Q29kZShscC5VUERBVEVfUFJPRklMRV9JTlZBTElEX1BBUkFNKS5zZXRNb3JlTWVzc2FnZShcIlwiLmNvbmNhdChuLFwiIGluZm86XCIpLmNvbmNhdChyLnRpcHMpKS5zZXROZXR3b3JrVHlwZSh0aGlzLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgaW5mbzpcIikuY29uY2F0KHIudGlwcyxcIu+8jOivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjdXBkYXRlTXlQcm9maWxlXCIpKSx1bSh7Y29kZTpscC5VUERBVEVfUFJPRklMRV9JTlZBTElEX1BBUkFNLG1lc3NhZ2U6ZHAuVVBEQVRFX1BST0ZJTEVfSU5WQUxJRF9QQVJBTX0pO3ZhciBhPVtdO2Zvcih2YXIgcyBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHMpJiYoXCJwcm9maWxlQ3VzdG9tRmllbGRcIj09PXM/ZS5wcm9maWxlQ3VzdG9tRmllbGQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7YS5wdXNoKHt0YWc6ZS5rZXksdmFsdWU6ZS52YWx1ZX0pfSkpOmEucHVzaCh7dGFnOmV1W3MudG9VcHBlckNhc2UoKV0sdmFsdWU6ZVtzXX0pKTtyZXR1cm4gMD09PWEubGVuZ3RoPyhvLnNldENvZGUobHAuVVBEQVRFX1BST0ZJTEVfTk9fS0VZKS5zZXRNb3JlTWVzc2FnZShkcC5VUERBVEVfUFJPRklMRV9OT19LRVkpLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBpbmZvOlwiKS5jb25jYXQoZHAuVVBEQVRFX1BST0ZJTEVfTk9fS0VZLFwi77yM6K+35Y+C6ICDIGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9TREsuaHRtbCN1cGRhdGVNeVByb2ZpbGVcIikpLHVtKHtjb2RlOmxwLlVQREFURV9QUk9GSUxFX05PX0tFWSxtZXNzYWdlOmRwLlVQREFURV9QUk9GSUxFX05PX0tFWX0pKTp0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpVbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKSxwcm9maWxlSXRlbTphfX0pLnRoZW4oKGZ1bmN0aW9uKHIpe28uc2V0TmV0d29ya1R5cGUodC5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpO3ZhciBhPXQuX3VwZGF0ZU1hcCh0Ll91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpLGUpO3JldHVybiB0Ll91c2VyTW9kdWxlLmVtaXRPdXRlckV2ZW50KFduLlBST0ZJTEVfVVBEQVRFRCxbYV0pLGltKGEpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fdXNlck1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJvblByb2ZpbGVNb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YUxpc3Q7aWYoIVh1KHQpKXt2YXIgbixvLHI9dC5sZW5ndGg7UWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUHJvZmlsZU1vZGlmaWVkIGNvdW50OlwiKS5jb25jYXQocixcIiBkYXRhTGlzdDpcIiksZS5kYXRhTGlzdCk7Zm9yKHZhciBhPVtdLHM9MDtzPHI7cysrKW49dFtzXS51c2VySUQsbz10aGlzLl91cGRhdGVNYXAobix0aGlzLl9nZXRMYXRlc3RQcm9maWxlRnJvbVJlc3BvbnNlKG4sdFtzXS5wcm9maWxlTGlzdCkpLGEucHVzaChvKTthLmxlbmd0aD4wJiYodGhpcy5fdXNlck1vZHVsZS5lbWl0SW5uZXJFdmVudChJbSxhKSx0aGlzLl91c2VyTW9kdWxlLmVtaXRPdXRlckV2ZW50KFduLlBST0ZJTEVfVVBEQVRFRCxhKSl9fX0se2tleTpcIl9maWxsTWFwXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5hY2NvdW50UHJvZmlsZU1hcC5zaXplKXtmb3IodmFyIGU9dGhpcy5fZ2V0Q2FjaGVkUHJvZmlsZXMoKSx0PURhdGUubm93KCksbj0wLG89ZS5sZW5ndGg7bjxvO24rKyl0LWVbbl0ubGFzdFVwZGF0ZWRUaW1lPHRoaXMuZXhwaXJhdGlvblRpbWUmJnRoaXMuYWNjb3VudFByb2ZpbGVNYXAuc2V0KGVbbl0udXNlcklELGVbbl0pO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2ZpbGxNYXAgZnJvbSBjYWNoZSwgbWFwLnNpemU6XCIpLmNvbmNhdCh0aGlzLmFjY291bnRQcm9maWxlTWFwLnNpemUpKX19fSx7a2V5OlwiX3VwZGF0ZU1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbz1EYXRlLm5vdygpO3JldHVybiB0aGlzLl9jb250YWluc0FjY291bnQoZSk/KG49dGhpcy5fZ2V0UHJvZmlsZUZyb21NYXAoZSksdC5wcm9maWxlQ3VzdG9tRmllbGQmJkd1KG4ucHJvZmlsZUN1c3RvbUZpZWxkLHQucHJvZmlsZUN1c3RvbUZpZWxkKSxFdShuLHQsW1wicHJvZmlsZUN1c3RvbUZpZWxkXCJdKSxuLmxhc3RVcGRhdGVkVGltZT1vKToobj1uZXcga20odCksKHRoaXMuX3VzZXJNb2R1bGUuaXNNeUZyaWVuZChlKXx8ZT09PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCkpJiYobi5sYXN0VXBkYXRlZFRpbWU9byx0aGlzLmFjY291bnRQcm9maWxlTWFwLnNldChlLG4pKSksdGhpcy5fZmx1c2hNYXAoZT09PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCkpLG59fSx7a2V5OlwiX2ZsdXNoTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9VW4odGhpcy5hY2NvdW50UHJvZmlsZU1hcC52YWx1ZXMoKSksbj10aGlzLl91c2VyTW9kdWxlLmdldFN0b3JhZ2VNb2R1bGUoKTtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2ZsdXNoTWFwIGxlbmd0aDpcIikuY29uY2F0KHQubGVuZ3RoLFwiIGZsdXNoQXRPbmNlOlwiKS5jb25jYXQoZSkpLG4uc2V0SXRlbSh0aGlzLlRBRyx0LGUpfX0se2tleTpcIl9jb250YWluc0FjY291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hY2NvdW50UHJvZmlsZU1hcC5oYXMoZSl9fSx7a2V5OlwiX2dldFByb2ZpbGVGcm9tTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWNjb3VudFByb2ZpbGVNYXAuZ2V0KGUpfX0se2tleTpcIl9nZXRDYWNoZWRQcm9maWxlc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdXNlck1vZHVsZS5nZXRTdG9yYWdlTW9kdWxlKCkuZ2V0SXRlbSh0aGlzLlRBRyk7cmV0dXJuIFh1KGUpP1tdOmV9fSx7a2V5Olwib25Db252ZXJzYXRpb25zUHJvZmlsZVVwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixvLHI9W10sYT0wLHM9ZS5sZW5ndGg7YTxzO2ErKyluPSh0PWVbYV0pLnVzZXJJRCx0aGlzLl91c2VyTW9kdWxlLmlzTXlGcmllbmQobil8fCh0aGlzLl9jb250YWluc0FjY291bnQobik/KG89dGhpcy5fZ2V0UHJvZmlsZUZyb21NYXAobiksRXUobyx0KT4wJiZyLnB1c2gobikpOnIucHVzaCh0LnVzZXJJRCkpOzAhPT1yLmxlbmd0aCYmKFFpLmluZm8oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uQ29udmVyc2F0aW9uc1Byb2ZpbGVVcGRhdGVkIHRvQWNjb3VudExpc3Q6XCIpLmNvbmNhdChyKSksdGhpcy5nZXRVc2VyUHJvZmlsZSh7dXNlcklETGlzdDpyfSkpfX0se2tleTpcImdldE5pY2tBbmRBdmF0YXJCeVVzZXJJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX2NvbnRhaW5zQWNjb3VudChlKSl7dmFyIHQ9dGhpcy5fZ2V0UHJvZmlsZUZyb21NYXAoZSk7cmV0dXJue25pY2s6dC5uaWNrLGF2YXRhcjp0LmF2YXRhcn19cmV0dXJue25pY2s6XCJcIixhdmF0YXI6XCJcIn19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2ZsdXNoTWFwKCEwKSx0aGlzLmFjY291bnRQcm9maWxlTWFwLmNsZWFyKCl9fV0pLGV9KCksbnY9ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLFh1fHwodGhpcy51c2VySUQ9dC51c2VySUR8fFwiXCIsdGhpcy50aW1lU3RhbXA9dC50aW1lU3RhbXB8fDApfSxvdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl91c2VyTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiQmxhY2tsaXN0SGFuZGxlclwiLHRoaXMuX2JsYWNrbGlzdE1hcD1uZXcgTWFwLHRoaXMuc3RhcnRJbmRleD0wLHRoaXMubWF4TGltaXRlZD0xMDAsdGhpcy5jdXJyZW50U2VxdWVuY2U9MH1yZXR1cm4gRW4oZSxbe2tleTpcImdldExvY2FsQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gVW4odGhpcy5fYmxhY2tsaXN0TWFwLmtleXMoKSl9fSx7a2V5OlwiZ2V0QmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEJsYWNrbGlzdFwiKSxuPXtmcm9tQWNjb3VudDp0aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpLG1heExpbWl0ZWQ6dGhpcy5tYXhMaW1pdGVkLHN0YXJ0SW5kZXg6MCxsYXN0U2VxdWVuY2U6dGhpcy5jdXJyZW50U2VxdWVuY2V9LG89bmV3IERwKHpnKTtyZXR1cm4gdGhpcy5fdXNlck1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6RmwscmVxdWVzdERhdGE6bn0pLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciByPW4uZGF0YSxhPXIuYmxhY2tMaXN0SXRlbSxzPXIuY3VycmVudFNlcXVlbmNlLGk9WHUoYSk/MDphLmxlbmd0aDtvLnNldE5ldHdvcmtUeXBlKGUuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImJsYWNrTGlzdCBjb3VudDpcIi5jb25jYXQoaSkpLmVuZCgpLFFpLmluZm8oXCJcIi5jb25jYXQodCxcIiBva1wiKSksZS5jdXJyZW50U2VxdWVuY2U9cyxlLl9oYW5kbGVSZXNwb25zZShhLCEwKSxlLl91c2VyTW9kdWxlLmVtaXRPdXRlckV2ZW50KFduLkJMQUNLTElTVF9VUERBVEVELFVuKGUuX2JsYWNrbGlzdE1hcC5rZXlzKCkpKX0pKS5jYXRjaCgoZnVuY3Rpb24obil7cmV0dXJuIGUuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9UG4oZSwyKSxyPXRbMF0sYT10WzFdO28uc2V0RXJyb3IobixyLGEpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KHQsXCIgZmFpbGVkLiBlcnJvcjpcIiksbiksdW0obil9KSl9fSx7a2V5OlwiYWRkQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRCbGFja2xpc3RcIiksbz1uZXcgRHAoSmcpO2lmKCFndShlLnVzZXJJRExpc3QpKXJldHVybiBvLnNldENvZGUobHAuQUREX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNKS5zZXRNZXNzYWdlKGRwLkFERF9CTEFDS0xJU1RfSU5WQUxJRF9QQVJBTSkuc2V0TmV0d29ya1R5cGUodGhpcy5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIG9wdGlvbnMudXNlcklETGlzdCDlv4XpnIDmmK/mlbDnu4RcIikpLHVtKHtjb2RlOmxwLkFERF9CTEFDS0xJU1RfSU5WQUxJRF9QQVJBTSxtZXNzYWdlOmRwLkFERF9CTEFDS0xJU1RfSU5WQUxJRF9QQVJBTX0pO3ZhciByPXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCk7cmV0dXJuIDE9PT1lLnVzZXJJRExpc3QubGVuZ3RoJiZlLnVzZXJJRExpc3RbMF09PT1yPyhvLnNldENvZGUobHAuQ0FOTk9UX0FERF9TRUxGX1RPX0JMQUNLTElTVCkuc2V0TWVzc2FnZShkcC5DQU5OT1RfQUREX1NFTEZfVE9fQkxBQ0tMSVNUKS5zZXROZXR3b3JrVHlwZSh0aGlzLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIg5LiN6IO95oqK6Ieq5bex5ouJ6buRXCIpKSx1bSh7Y29kZTpscC5DQU5OT1RfQUREX1NFTEZfVE9fQkxBQ0tMSVNULG1lc3NhZ2U6ZHAuQ0FOTk9UX0FERF9TRUxGX1RPX0JMQUNLTElTVH0pKTooZS51c2VySURMaXN0LmluY2x1ZGVzKHIpJiYoZS51c2VySURMaXN0PWUudXNlcklETGlzdC5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlIT09cn0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIg5LiN6IO95oqK6Ieq5bex5ouJ6buR77yM5bey6L+H5rukXCIpKSksZS5mcm9tQWNjb3VudD10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpLGUudG9BY2NvdW50PWUudXNlcklETGlzdCx0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpxbCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24ocil7cmV0dXJuIG8uc2V0TmV0d29ya1R5cGUodC5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGUudXNlcklETGlzdC5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiLmNvbmNhdChlLnVzZXJJRExpc3QubGVuZ3RoKTpcInVzZXJJRExpc3Q6XCIuY29uY2F0KGUudXNlcklETGlzdCkpLmVuZCgpLFFpLmluZm8oXCJcIi5jb25jYXQobixcIiBva1wiKSksdC5faGFuZGxlUmVzcG9uc2Uoci5yZXN1bHRJdGVtLCEwKSxRXyhVbih0Ll9ibGFja2xpc3RNYXAua2V5cygpKSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll91c2VyTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpKX19LHtrZXk6XCJfaGFuZGxlUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCFYdShlKSlmb3IodmFyIG4sbyxyLGE9MCxzPWUubGVuZ3RoO2E8czthKyspbz1lW2FdLnRvLHI9ZVthXS5yZXN1bHRDb2RlLChodShyKXx8MD09PXIpJiYodD8oKG49dGhpcy5fYmxhY2tsaXN0TWFwLmhhcyhvKT90aGlzLl9ibGFja2xpc3RNYXAuZ2V0KG8pOm5ldyBudikudXNlcklEPW8sIVh1KGVbYV0uYWRkQmxhY2tUaW1lU3RhbXApJiYobi50aW1lU3RhbXA9ZVthXS5hZGRCbGFja1RpbWVTdGFtcCksdGhpcy5fYmxhY2tsaXN0TWFwLnNldChvLG4pKTp0aGlzLl9ibGFja2xpc3RNYXAuaGFzKG8pJiYobj10aGlzLl9ibGFja2xpc3RNYXAuZ2V0KG8pLHRoaXMuX2JsYWNrbGlzdE1hcC5kZWxldGUobykpKTtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9oYW5kbGVSZXNwb25zZSB0b3RhbDpcIikuY29uY2F0KHRoaXMuX2JsYWNrbGlzdE1hcC5zaXplLFwiIGJBZGQ6XCIpLmNvbmNhdCh0KSl9fSx7a2V5OlwiZGVsZXRlQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVCbGFja2xpc3RcIiksbz1uZXcgRHAoWGcpO3JldHVybiBndShlLnVzZXJJRExpc3QpPyhlLmZyb21BY2NvdW50PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCksZS50b0FjY291bnQ9ZS51c2VySURMaXN0LHRoaXMuX3VzZXJNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnhsLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbihyKXtyZXR1cm4gby5zZXROZXR3b3JrVHlwZSh0Ll91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoZS51c2VySURMaXN0Lmxlbmd0aD41P1widXNlcklETGlzdC5sZW5ndGg6XCIuY29uY2F0KGUudXNlcklETGlzdC5sZW5ndGgpOlwidXNlcklETGlzdDpcIi5jb25jYXQoZS51c2VySURMaXN0KSkuZW5kKCksUWkuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx0Ll9oYW5kbGVSZXNwb25zZShyLmRhdGEucmVzdWx0SXRlbSwhMSksUV8oVW4odC5fYmxhY2tsaXN0TWFwLmtleXMoKSkpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fdXNlck1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKSk6KG8uc2V0Q29kZShscC5ERUxfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU0pLnNldE1lc3NhZ2UoZHAuREVMX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNKS5zZXROZXR3b3JrVHlwZSh0aGlzLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgb3B0aW9ucy51c2VySURMaXN0IOW/hemcgOaYr+aVsOe7hFwiKSksdW0oe2NvZGU6bHAuREVMX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNLG1lc3NhZ2U6ZHAuREVMX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNfSkpfX0se2tleTpcIm9uQWNjb3VudERlbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj1bXSxvPTAscj1lLmxlbmd0aDtvPHI7bysrKXQ9ZVtvXSx0aGlzLl9ibGFja2xpc3RNYXAuaGFzKHQpJiYodGhpcy5fYmxhY2tsaXN0TWFwLmRlbGV0ZSh0KSxuLnB1c2godCkpO24ubGVuZ3RoPjAmJihRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uQWNjb3VudERlbGV0ZWQgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCxcIiB1c2VySURMaXN0OlwiKSxuKSx0aGlzLl91c2VyTW9kdWxlLmVtaXRPdXRlckV2ZW50KFduLkJMQUNLTElTVF9VUERBVEVELFVuKHRoaXMuX2JsYWNrbGlzdE1hcC5rZXlzKCkpKSl9fSx7a2V5Olwib25BY2NvdW50QWRkZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj1bXSxvPTAscj1lLmxlbmd0aDtvPHI7bysrKXQ9ZVtvXSx0aGlzLl9ibGFja2xpc3RNYXAuaGFzKHQpfHwodGhpcy5fYmxhY2tsaXN0TWFwLnNldCh0LG5ldyBudih7dXNlcklEOnR9KSksbi5wdXNoKHQpKTtuLmxlbmd0aD4wJiYoUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbkFjY291bnRBZGRlZCBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoLFwiIHVzZXJJRExpc3Q6XCIpLG4pLHRoaXMuX3VzZXJNb2R1bGUuZW1pdE91dGVyRXZlbnQoV24uQkxBQ0tMSVNUX1VQREFURUQsVW4odGhpcy5fYmxhY2tsaXN0TWFwLmtleXMoKSkpKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYmxhY2tsaXN0TWFwLmNsZWFyKCksdGhpcy5zdGFydEluZGV4PTAsdGhpcy5tYXhMaW1pdGVkPTEwMCx0aGlzLmN1cnJlbnRTZXF1ZW5jZT0wfX1dKSxlfSgpLHJ2PWZ1bmN0aW9uKGUpe0RuKG4sZSk7dmFyIHQ9d24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlVzZXJNb2R1bGVcIixvLl9wcm9maWxlSGFuZGxlcj1uZXcgdHYoR24obykpLG8uX2JsYWNrbGlzdEhhbmRsZXI9bmV3IG92KEduKG8pKSxvLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oTW0sby5vbkNvbnRleHRVcGRhdGVkLEduKG8pKSxvfXJldHVybiBFbihuLFt7a2V5Olwib25Db250ZXh0VXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Byb2ZpbGVIYW5kbGVyLmdldE15UHJvZmlsZSgpLHRoaXMuX2JsYWNrbGlzdEhhbmRsZXIuZ2V0QmxhY2tsaXN0KCl9fSx7a2V5Olwib25Qcm9maWxlTW9kaWZpZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9wcm9maWxlSGFuZGxlci5vblByb2ZpbGVNb2RpZmllZChlKX19LHtrZXk6XCJvblJlbGF0aW9uQ2hhaW5Nb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YUxpc3Q7aWYoIVh1KHQpKXt2YXIgbj1bXTt0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuYmxhY2tMaXN0RGVsQWNjb3VudCYmbi5wdXNoLmFwcGx5KG4sVW4oZS5ibGFja0xpc3REZWxBY2NvdW50KSl9KSksbi5sZW5ndGg+MCYmdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5vbkFjY291bnREZWxldGVkKG4pO3ZhciBvPVtdO3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5ibGFja0xpc3RBZGRBY2NvdW50JiZvLnB1c2guYXBwbHkobyxVbihlLmJsYWNrTGlzdEFkZEFjY291bnQpKX0pKSxvLmxlbmd0aD4wJiZ0aGlzLl9ibGFja2xpc3RIYW5kbGVyLm9uQWNjb3VudEFkZGVkKG8pfX19LHtrZXk6XCJvbkNvbnZlcnNhdGlvbnNQcm9maWxlVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Byb2ZpbGVIYW5kbGVyLm9uQ29udmVyc2F0aW9uc1Byb2ZpbGVVcGRhdGVkKGUpfX0se2tleTpcImdldE15QWNjb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TXlVc2VySUQoKX19LHtrZXk6XCJnZXRNeVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9maWxlSGFuZGxlci5nZXRNeVByb2ZpbGUoKX19LHtrZXk6XCJnZXRTdG9yYWdlTW9kdWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUocGwpfX0se2tleTpcImlzTXlGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE1vZHVsZSh1bCk7cmV0dXJuISF0JiZ0LmlzTXlGcmllbmQoZSl9fSx7a2V5OlwiZ2V0VXNlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcHJvZmlsZUhhbmRsZXIuZ2V0VXNlclByb2ZpbGUoZSl9fSx7a2V5OlwidXBkYXRlTXlQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Byb2ZpbGVIYW5kbGVyLnVwZGF0ZU15UHJvZmlsZShlKX19LHtrZXk6XCJnZXROaWNrQW5kQXZhdGFyQnlVc2VySURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcHJvZmlsZUhhbmRsZXIuZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKGUpfX0se2tleTpcImdldExvY2FsQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9ibGFja2xpc3RIYW5kbGVyLmdldExvY2FsQmxhY2tsaXN0KCk7cmV0dXJuIGltKGUpfX0se2tleTpcImFkZEJsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ibGFja2xpc3RIYW5kbGVyLmFkZEJsYWNrbGlzdChlKX19LHtrZXk6XCJkZWxldGVCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5kZWxldGVCbGFja2xpc3QoZSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX3Byb2ZpbGVIYW5kbGVyLnJlc2V0KCksdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5yZXNldCgpfX1dKSxufShObCksYXY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7eW4odGhpcyxlKSx0aGlzLl9tb2R1bGVNYW5hZ2VyPXQsdGhpcy5faXNMb2dnZWRJbj0hMSx0aGlzLl9TREtBcHBJRD1uLlNES0FwcElELHRoaXMuX3VzZXJJRD1uLnVzZXJJRHx8XCJcIix0aGlzLl91c2VyU2lnPW4udXNlclNpZ3x8XCJcIix0aGlzLl92ZXJzaW9uPVwiMi4xOC4wXCIsdGhpcy5fYTJLZXk9XCJcIix0aGlzLl90aW55SUQ9XCJcIix0aGlzLl9jb250ZW50VHlwZT1cImpzb25cIix0aGlzLl91bmxpbWl0ZWRBVkNoYXRSb29tPW4udW5saW1pdGVkQVZDaGF0Um9vbSx0aGlzLl9zY2VuZT1uLnNjZW5lfHxcIlwiLHRoaXMuX292ZXJzZWE9bi5vdmVyc2VhLHRoaXMuX2luc3RhbmNlSUQ9bi5pbnN0YW5jZUlELHRoaXMuX3N0YXR1c0luc3RhbmNlSUQ9MCx0aGlzLl9pc0Rldk1vZGU9bi5kZXZNb2RlLHRoaXMuX3Byb3h5U2VydmVyPW4ucHJveHlTZXJ2ZXJ9cmV0dXJuIEVuKGUsW3trZXk6XCJpc0xvZ2dlZEluXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNMb2dnZWRJbn19LHtrZXk6XCJpc092ZXJzZWFcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vdmVyc2VhfX0se2tleTpcImlzRGV2TW9kZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzRGV2TW9kZX19LHtrZXk6XCJpc1NpbmdhcG9yZVNpdGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9TREtBcHBJRD49MmU3JiZ0aGlzLl9TREtBcHBJRDwzZTd9fSx7a2V5OlwiaXNLb3JlYVNpdGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9TREtBcHBJRD49M2U3JiZ0aGlzLl9TREtBcHBJRDw0ZTd9fSx7a2V5OlwiaXNHZXJtYW55U2l0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX1NES0FwcElEPj00ZTcmJnRoaXMuX1NES0FwcElEPDVlN319LHtrZXk6XCJpc0luZGlhU2l0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX1NES0FwcElEPj01ZTcmJnRoaXMuX1NES0FwcElEPDZlN319LHtrZXk6XCJpc1VubGltaXRlZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91bmxpbWl0ZWRBVkNoYXRSb29tfX0se2tleTpcImdldFVzZXJJRFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZXJJRH19LHtrZXk6XCJzZXRVc2VySURcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl91c2VySUQ9ZX19LHtrZXk6XCJzZXRVc2VyU2lnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fdXNlclNpZz1lfX0se2tleTpcImdldFVzZXJTaWdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91c2VyU2lnfX0se2tleTpcImdldFNES0FwcElEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fU0RLQXBwSUR9fSx7a2V5OlwiZ2V0VGlueUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGlueUlEfX0se2tleTpcInNldFRpbnlJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3RpbnlJRD1lLHRoaXMuX2lzTG9nZ2VkSW49ITB9fSx7a2V5OlwiZ2V0U2NlbmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1RVSUtpdCgpP1widHVpa2l0XCI6dGhpcy5fc2NlbmV9fSx7a2V5OlwiZ2V0SW5zdGFuY2VJRFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luc3RhbmNlSUR9fSx7a2V5OlwiZ2V0U3RhdHVzSW5zdGFuY2VJRFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c0luc3RhbmNlSUR9fSx7a2V5Olwic2V0U3RhdHVzSW5zdGFuY2VJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N0YXR1c0luc3RhbmNlSUQ9ZX19LHtrZXk6XCJnZXRWZXJzaW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmVyc2lvbn19LHtrZXk6XCJnZXRBMktleVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2EyS2V5fX0se2tleTpcInNldEEyS2V5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fYTJLZXk9ZX19LHtrZXk6XCJnZXRDb250ZW50VHlwZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnRUeXBlfX0se2tleTpcImdldFByb3h5U2VydmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJveHlTZXJ2ZXJ9fSx7a2V5OlwiX2lzVFVJS2l0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0hMSx0PSExLG49ITEsbz0hMSxyPVtdO3BpJiYocj1PYmplY3Qua2V5cyhoaSkpLGdpJiYocj1kaT9PYmplY3Qua2V5cyh1bmkpOk9iamVjdC5rZXlzKHdpbmRvdykpO2Zvcih2YXIgYT0wLHM9ci5sZW5ndGg7YTxzO2ErKylpZihyW2FdLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJ1aWtpdFwiKSl7ZT0hMDticmVha31pZihyPW51bGwscGkmJl91KGdldEFwcCkpe3ZhciBpPWdldEFwcCgpLmdsb2JhbERhdGE7cHUoaSkmJiEwPT09aS5pc1RVSUtpdCYmKHQ9ITApfSEwPT09dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUocGwpLmdldFN0b3JhZ2VTeW5jKFwiVElNX1wiLmNvbmNhdCh0aGlzLl9TREtBcHBJRCxcIl9pc1RVSUtpdFwiKSkmJihuPSEwKTt2YXIgdT1udWxsO2lmKGFpJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgdW5pJiZfX3d4Q29uZmlnJiYodT1fX3d4Q29uZmlnLnBhZ2VzKSxzaSYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIHVuaSYmX19xcUNvbmZpZyYmKHU9X19xcUNvbmZpZy5wYWdlcyksZ3UodSkmJnUubGVuZ3RoPjApe2Zvcih2YXIgYz0wLGw9dS5sZW5ndGg7YzxsO2MrKylpZih1W2NdLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJ0dWlcIikpe289ITA7YnJlYWt9dT1udWxsfXJldHVybiBlfHx0fHxufHxvfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pc0xvZ2dlZEluPSExLHRoaXMuX3VzZXJTaWc9XCJcIix0aGlzLl9hMktleT1cIlwiLHRoaXMuX3RpbnlJRD1cIlwiLHRoaXMuX3N0YXR1c0luc3RhbmNlSUQ9MH19XSksZX0oKSxzdj1mdW5jdGlvbihlKXtEbihuLGUpO3ZhciB0PXduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87cmV0dXJuIHluKHRoaXMsbiksKG89dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJTaWduTW9kdWxlXCIsby5faGVsbG9JbnRlcnZhbD0xMjAsby5fbGFzdExvZ2luVHM9MCxvLl9sYXN0V3NIZWxsb1RzPTAsRW0ubWl4aW4oR24obykpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmlzTG9nZ2VkSW4oKSYmZSV0aGlzLl9oZWxsb0ludGVydmFsPT0wJiZ0aGlzLl9oZWxsbygpfX0se2tleTpcImxvZ2luXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5pc0xvZ2dlZEluKCkpe3ZhciB0PVwi5oKo5bey57uP55m75b2V6LSm5Y+3XCIuY29uY2F0KGUudXNlcklELFwi77yB5aaC6ZyA5YiH5o2i6LSm5Y+355m75b2V77yM6K+35YWI6LCD55SoIGxvZ291dCDmjqXlj6Pnmbvlh7rvvIzlho3osIPnlKggbG9naW4g5o6l5Y+j55m75b2V44CCXCIpO3JldHVybiBRaS53YXJuKHQpLGltKHthY3Rpb25TdGF0dXM6XCJPS1wiLGVycm9yQ29kZTowLGVycm9ySW5mbzp0LHJlcGVhdExvZ2luOiEwfSl9aWYoRGF0ZS5ub3coKS10aGlzLl9sYXN0TG9naW5Uczw9MTVlMylyZXR1cm4gUWkud2FybihcIuaCqOato+WcqOWwneivleeZu+W9lei0puWPt1wiLmNvbmNhdChlLnVzZXJJRCxcIu+8geivt+WLv+mHjeWkjeeZu+W9leOAglwiKSksdW0oe2NvZGU6bHAuUkVQRUFUX0xPR0lOLG1lc3NhZ2U6ZHAuUkVQRUFUX0xPR0lOfSk7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5sb2dpbiB1c2VySUQ6XCIpLmNvbmNhdChlLnVzZXJJRCkpO3ZhciBuPXRoaXMuX2NoZWNrTG9naW5JbmZvKGUpO2lmKDAhPT1uLmNvZGUpcmV0dXJuIHVtKG4pO3ZhciBvPXRoaXMuZ2V0TW9kdWxlKGRsKSxyPWUudXNlcklELGE9ZS51c2VyU2lnO3JldHVybiBvLnNldFVzZXJJRChyKSxvLnNldFVzZXJTaWcoYSksdGhpcy5nZXRNb2R1bGUoTWwpLnVwZGF0ZVByb3RvY29sQ29uZmlnKCksdGhpcy5fbG9naW4oKX19LHtrZXk6XCJfbG9naW5cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLmdldE1vZHVsZShkbCksbj10LmdldFNjZW5lKCksbz1uZXcgRHAoa3ApO3JldHVybiBvLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQobikpLnNldE1vcmVNZXNzYWdlKFwiaWRlbnRpZmllcjpcIi5jb25jYXQodGhpcy5nZXRNeVVzZXJJRCgpKSksZGk/XCJ0dWlraXRcIj09PW4/by5zZXRVSVBsYXRmb3JtKDQpOm8uc2V0VUlQbGF0Zm9ybSgzKTpwaT9cInR1aWtpdFwiPT09bj9vLnNldFVJUGxhdGZvcm0oMTIpOm8uc2V0VUlQbGF0Zm9ybSgxMSk6Z2kmJihcInR1aWtpdFwiPT09bj9vLnNldFVJUGxhdGZvcm0oMTQpOm8uc2V0VUlQbGF0Zm9ybSgxMykpLHRoaXMuX2xhc3RMb2dpblRzPURhdGUubm93KCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Q2x9KS50aGVuKChmdW5jdGlvbihyKXtlLl9sYXN0TG9naW5Ucz0wO3ZhciBhPURhdGUubm93KCkscz1udWxsLGk9ci5kYXRhLHU9aS5hMktleSxjPWkudGlueUlELGw9aS5oZWxsb0ludGVydmFsLGQ9aS5pbnN0YW5jZUlELHA9aS50aW1lU3RhbXA7UWkubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5sb2dpbiBvay4gc2NlbmU6XCIpLmNvbmNhdChuLFwiIGhlbGxvSW50ZXJ2YWw6XCIpLmNvbmNhdChsLFwiIGluc3RhbmNlSUQ6XCIpLmNvbmNhdChkLFwiIHRpbWVTdGFtcDpcIikuY29uY2F0KHApKTt2YXIgZz0xZTMqcCxoPWEtby5nZXRTdGFydFRzKCksZj1nK3BhcnNlSW50KGgvMiktYSxfPW8uZ2V0U3RhcnRUcygpK2Y7aWYoby5zdGFydChfKSxmdW5jdGlvbihlLHQpe2ppPXQ7dmFyIG49bmV3IERhdGU7bi5zZXRUaW1lKGUpLFFpLmluZm8oXCJiYXNlVGltZSBmcm9tIHNlcnZlcjogXCIuY29uY2F0KG4sXCIgb2Zmc2V0OiBcIikuY29uY2F0KGppKSl9KGcsZiksIWMpdGhyb3cgcz1uZXcgcm0oe2NvZGU6bHAuTk9fVElOWUlELG1lc3NhZ2U6ZHAuTk9fVElOWUlEfSksby5zZXRFcnJvcihzLCEwLGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCkscztpZighdSl0aHJvdyBzPW5ldyBybSh7Y29kZTpscC5OT19BMktFWSxtZXNzYWdlOmRwLk5PX0EyS0VZfSksby5zZXRFcnJvcihzLCEwLGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCkscztyZXR1cm4gby5zZXROZXR3b3JrVHlwZShlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1vcmVNZXNzYWdlKFwiaGVsbG9JbnRlcnZhbDpcIi5jb25jYXQobCxcIiBpbnN0YW5jZUlEOlwiKS5jb25jYXQoZCxcIiBvZmZzZXQ6XCIpLmNvbmNhdChmKSkuZW5kKCksdC5zZXRBMktleSh1KSx0LnNldFRpbnlJRChjKSx0LnNldFN0YXR1c0luc3RhbmNlSUQoZCksZS5nZXRNb2R1bGUoTWwpLnVwZGF0ZVByb3RvY29sQ29uZmlnKCksZS5lbWl0SW5uZXJFdmVudChNbSksZS5faGVsbG9JbnRlcnZhbD1sLGUudHJpZ2dlclJlYWR5KCksZS5fZmV0Y2hDbG91ZENvbnRyb2xDb25maWcoKSxyfSkpLmNhdGNoKChmdW5jdGlvbih0KXtyZXR1cm4gZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1QbihlLDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcih0LHIsYSkuZW5kKCEwKX0pKSxlLl9tb2R1bGVNYW5hZ2VyLnNldE5vdFJlYWR5UmVhc29uKGxwLkxPR0lOX0ZBSUxFRCksUWkuZXJyb3IoXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLmxvZ2luIGZhaWxlZC4gZXJyb3I6XCIpLHQpLGUuX2xhc3RMb2dpblRzPTAsZS5fbW9kdWxlTWFuYWdlci5vbkxvZ2luRmFpbGVkKCksdW0odCl9KSl9fSx7a2V5OlwibG9nb3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjA7aWYoIXRoaXMuaXNMb2dnZWRJbigpKXJldHVybiB1bSh7Y29kZTpscC5VU0VSX05PVF9MT0dHRURfSU4sbWVzc2FnZTpkcC5VU0VSX05PVF9MT0dHRURfSU59KTt2YXIgbj1uZXcgRHAoTHApO3JldHVybiBuLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImlkZW50aWZpZXI6XCIuY29uY2F0KHRoaXMuZ2V0TXlVc2VySUQoKSkpLmVuZCghMCksUWkuaW5mbyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIubG9nb3V0IHR5cGU6XCIpLmNvbmNhdCh0KSksMD09PXQmJnRoaXMuX21vZHVsZU1hbmFnZXIuc2V0Tm90UmVhZHlSZWFzb24obHAuTE9HR0VEX09VVCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6a2wscmVxdWVzdERhdGE6e3R5cGU6dH19KS50aGVuKChmdW5jdGlvbigpe3JldHVybiBlLnJlc2V0UmVhZHkoKSxpbSh7fSl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3JldHVybiBRaS5lcnJvcihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2xvZ291dCBlcnJvcjpcIiksdCksZS5yZXNldFJlYWR5KCksaW0oe30pfSkpfX0se2tleTpcIl9mZXRjaENsb3VkQ29udHJvbENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5nZXRNb2R1bGUoRWwpLmZldGNoQ29uZmlnKCl9fSx7a2V5OlwiX2hlbGxvXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2xhc3RXc0hlbGxvVHM9RGF0ZS5ub3coKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpMbH0pLmNhdGNoKChmdW5jdGlvbih0KXtRaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5faGVsbG8gZXJyb3I6XCIpLHQpfSkpfX0se2tleTpcImdldExhc3RXc0hlbGxvVHNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXN0V3NIZWxsb1RzfX0se2tleTpcIl9jaGVja0xvZ2luSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj1cIlwiO3JldHVybiBYdSh0aGlzLmdldE1vZHVsZShkbCkuZ2V0U0RLQXBwSUQoKSk/KHQ9bHAuTk9fU0RLQVBQSUQsbj1kcC5OT19TREtBUFBJRCk6WHUoZS51c2VySUQpPyh0PWxwLk5PX0lERU5USUZJRVIsbj1kcC5OT19JREVOVElGSUVSKTpYdShlLnVzZXJTaWcpJiYodD1scC5OT19VU0VSU0lHLG49ZHAuTk9fVVNFUlNJRykse2NvZGU6dCxtZXNzYWdlOm59fX0se2tleTpcIm9uTXVsdGlwbGVBY2NvdW50S2lja2VkT3V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztuZXcgRHAoUnApLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcInR5cGU6XCIuY29uY2F0KFluLktJQ0tFRF9PVVRfTVVMVF9BQ0NPVU5ULFwiIG5ld0luc3RhbmNlSW5mbzpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGUpKSkuZW5kKCEwKSxRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dCB1c2VySUQ6XCIpLmNvbmNhdCh0aGlzLmdldE15VXNlcklEKCksXCIgbmV3SW5zdGFuY2VJbmZvOlwiKSxlKSx0aGlzLmxvZ291dCgxKS50aGVuKChmdW5jdGlvbigpe3QuZW1pdE91dGVyRXZlbnQoV24uS0lDS0VEX09VVCx7dHlwZTpZbi5LSUNLRURfT1VUX01VTFRfQUNDT1VOVH0pLHQuX21vZHVsZU1hbmFnZXIuc2V0Tm90UmVhZHlSZWFzb24obHAuS0lDS0VEX09VVF9NVUxUX0FDQ09VTlQpLHQuX21vZHVsZU1hbmFnZXIucmVzZXQoKX0pKX19LHtrZXk6XCJvbk11bHRpcGxlRGV2aWNlS2lja2VkT3V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztuZXcgRHAoUnApLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcInR5cGU6XCIuY29uY2F0KFluLktJQ0tFRF9PVVRfTVVMVF9ERVZJQ0UsXCIgbmV3SW5zdGFuY2VJbmZvOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoZSkpKS5lbmQoITApLFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXQgdXNlcklEOlwiKS5jb25jYXQodGhpcy5nZXRNeVVzZXJJRCgpLFwiIG5ld0luc3RhbmNlSW5mbzpcIiksZSksdGhpcy5sb2dvdXQoMSkudGhlbigoZnVuY3Rpb24oKXt0LmVtaXRPdXRlckV2ZW50KFduLktJQ0tFRF9PVVQse3R5cGU6WW4uS0lDS0VEX09VVF9NVUxUX0RFVklDRX0pLHQuX21vZHVsZU1hbmFnZXIuc2V0Tm90UmVhZHlSZWFzb24obHAuS0lDS0VEX09VVF9NVUxUX0RFVklDRSksdC5fbW9kdWxlTWFuYWdlci5yZXNldCgpfSkpfX0se2tleTpcIm9uVXNlclNpZ0V4cGlyZWRcIix2YWx1ZTpmdW5jdGlvbigpe25ldyBEcChScCkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFluLktJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEKS5lbmQoITApLFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uVXNlclNpZ0V4cGlyZWQ6IHVzZXJTaWcg562+5ZCN6L+H5pyf6KKr6Lii5LiL57q/XCIpKSwwIT09dGhpcy5nZXRNb2R1bGUoZGwpLmdldFN0YXR1c0luc3RhbmNlSUQoKSYmKHRoaXMuZW1pdE91dGVyRXZlbnQoV24uS0lDS0VEX09VVCx7dHlwZTpZbi5LSUNLRURfT1VUX1VTRVJTSUdfRVhQSVJFRH0pLHRoaXMuX21vZHVsZU1hbmFnZXIuc2V0Tm90UmVhZHlSZWFzb24obHAuS0lDS0VEX09VVF9VU0VSU0lHX0VYUElSRUQpLHRoaXMuX21vZHVsZU1hbmFnZXIucmVzZXQoKSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMucmVzZXRSZWFkeSgpLHRoaXMuX2hlbGxvSW50ZXJ2YWw9MTIwLHRoaXMuX2xhc3RMb2dpblRzPTAsdGhpcy5fbGFzdFdzSGVsbG9Ucz0wfX1dKSxufShObCk7ZnVuY3Rpb24gaXYoKXtyZXR1cm4gbnVsbH1rZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6IWEsc2hhbTohYX0se2RlZmluZVByb3BlcnR5OkMuZn0pO3ZhciB1dj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9tb2R1bGVNYW5hZ2VyPXQsdGhpcy5fY2xhc3NOYW1lPVwiU3RvcmFnZU1vZHVsZVwiLHRoaXMuX3N0b3JhZ2VRdWV1ZT1uZXcgTWFwLHRoaXMuX2Vycm9yVG9sZXJhbnRIYW5kbGUoKX1yZXR1cm4gRW4oZSxbe2tleTpcIl9lcnJvclRvbGVyYW50SGFuZGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtwaXx8IWh1KHdpbmRvdykmJiFodSh3aW5kb3cubG9jYWxTdG9yYWdlKXx8KHRoaXMuZ2V0SXRlbT1pdix0aGlzLnNldEl0ZW09aXYsdGhpcy5yZW1vdmVJdGVtPWl2LHRoaXMuY2xlYXI9aXYpfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUlMjA9PTApe2lmKDA9PT10aGlzLl9zdG9yYWdlUXVldWUuc2l6ZSlyZXR1cm47dGhpcy5fZG9GbHVzaCgpfX19LHtrZXk6XCJfZG9GbHVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7dHJ5e3ZhciBlLHQ9Qm4odGhpcy5fc3RvcmFnZVF1ZXVlKTt0cnl7Zm9yKHQucygpOyEoZT10Lm4oKSkuZG9uZTspe3ZhciBuPVBuKGUudmFsdWUsMiksbz1uWzBdLHI9blsxXTt0aGlzLl9zZXRTdG9yYWdlU3luYyh0aGlzLl9nZXRLZXkobykscil9fWNhdGNoKGEpe3QuZShhKX1maW5hbGx5e3QuZigpfXRoaXMuX3N0b3JhZ2VRdWV1ZS5jbGVhcigpfWNhdGNoKHpJKXtRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZG9GbHVzaCBlcnJvcjpcIiksekkpfX19LHtrZXk6XCJfZ2V0UHJlZml4XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShkbCk7cmV0dXJuXCJUSU1fXCIuY29uY2F0KGUuZ2V0U0RLQXBwSUQoKSxcIl9cIikuY29uY2F0KGUuZ2V0VXNlcklEKCksXCJfXCIpfX0se2tleTpcIl9nZXRLZXlcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm5cIlwiLmNvbmNhdCh0aGlzLl9nZXRQcmVmaXgoKSkuY29uY2F0KGUpfX0se2tleTpcImdldEl0ZW1cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdO3RyeXt2YXIgbj10P3RoaXMuX2dldEtleShlKTplO3JldHVybiB0aGlzLmdldFN0b3JhZ2VTeW5jKG4pfWNhdGNoKHpJKXtyZXR1cm4gUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0SXRlbSBlcnJvcjpcIiksekkpLHt9fX19LHtrZXk6XCJzZXRJdGVtXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdLG89IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXTtpZihuKXt2YXIgcj1vP3RoaXMuX2dldEtleShlKTplO3RoaXMuX3NldFN0b3JhZ2VTeW5jKHIsdCl9ZWxzZSB0aGlzLl9zdG9yYWdlUXVldWUuc2V0KGUsdCl9fSx7a2V5OlwiY2xlYXJcIix2YWx1ZTpmdW5jdGlvbigpe3RyeXtwaT9oaS5jbGVhclN0b3JhZ2VTeW5jKCk6bG9jYWxTdG9yYWdlJiZsb2NhbFN0b3JhZ2UuY2xlYXIoKX1jYXRjaCh6SSl7UWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY2xlYXIgZXJyb3I6XCIpLHpJKX19fSx7a2V5OlwicmVtb3ZlSXRlbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07dHJ5e3ZhciBuPXQ/dGhpcy5fZ2V0S2V5KGUpOmU7dGhpcy5fcmVtb3ZlU3RvcmFnZVN5bmMobil9Y2F0Y2goekkpe1FpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlbW92ZUl0ZW0gZXJyb3I6XCIpLHpJKX19fSx7a2V5OlwiZ2V0U2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJiXCI7dHJ5e3ZhciBvPXtzaXplOjAsbGltaXRTaXplOjUyNDI4ODAsdW5pdDpufTtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkobyxcImxlZnRTaXplXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG8ubGltaXRTaXplLW8uc2l6ZX19KSxwaSYmKG8ubGltaXRTaXplPTEwMjQqaGkuZ2V0U3RvcmFnZUluZm9TeW5jKCkubGltaXRTaXplKSxlKW8uc2l6ZT1KU09OLnN0cmluZ2lmeSh0aGlzLmdldEl0ZW0oZSkpLmxlbmd0aCt0aGlzLl9nZXRLZXkoZSkubGVuZ3RoO2Vsc2UgaWYocGkpe3ZhciByPWhpLmdldFN0b3JhZ2VJbmZvU3luYygpLGE9ci5rZXlzO2EuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5zaXplKz1KU09OLnN0cmluZ2lmeSh0LmdldFN0b3JhZ2VTeW5jKGUpKS5sZW5ndGgrdC5fZ2V0S2V5KGUpLmxlbmd0aH0pKX1lbHNlIGlmKGxvY2FsU3RvcmFnZSlmb3IodmFyIHMgaW4gbG9jYWxTdG9yYWdlKWxvY2FsU3RvcmFnZS5oYXNPd25Qcm9wZXJ0eShzKSYmKG8uc2l6ZSs9bG9jYWxTdG9yYWdlLmdldEl0ZW0ocykubGVuZ3RoK3MubGVuZ3RoKTtyZXR1cm4gdGhpcy5fY29udmVydFVuaXQobyl9Y2F0Y2goekkpe1FpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiIGVycm9yOlwiKSx6SSl9fX0se2tleTpcIl9jb252ZXJ0VW5pdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49ZS51bml0O2Zvcih2YXIgbyBpbiB0LnVuaXQ9bixlKVwibnVtYmVyXCI9PXR5cGVvZiBlW29dJiYoXCJrYlwiPT09bi50b0xvd2VyQ2FzZSgpP3Rbb109TWF0aC5yb3VuZChlW29dLzEwMjQpOlwibWJcIj09PW4udG9Mb3dlckNhc2UoKT90W29dPU1hdGgucm91bmQoZVtvXS8xMDI0LzEwMjQpOnRbb109ZVtvXSk7cmV0dXJuIHR9fSx7a2V5OlwiX3NldFN0b3JhZ2VTeW5jXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtwaT9jaT9teS5zZXRTdG9yYWdlU3luYyh7a2V5OmUsZGF0YTp0fSk6aGkuc2V0U3RvcmFnZVN5bmMoZSx0KTpsb2NhbFN0b3JhZ2UmJmxvY2FsU3RvcmFnZS5zZXRJdGVtKGUsSlNPTi5zdHJpbmdpZnkodCkpfX0se2tleTpcImdldFN0b3JhZ2VTeW5jXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHBpP2NpP215LmdldFN0b3JhZ2VTeW5jKHtrZXk6ZX0pLmRhdGE6aGkuZ2V0U3RvcmFnZVN5bmMoZSk6bG9jYWxTdG9yYWdlP0pTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oZSkpOnt9fX0se2tleTpcIl9yZW1vdmVTdG9yYWdlU3luY1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3BpP2NpP215LnJlbW92ZVN0b3JhZ2VTeW5jKHtrZXk6ZX0pOmhpLnJlbW92ZVN0b3JhZ2VTeW5jKGUpOmxvY2FsU3RvcmFnZSYmbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oZSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX2RvRmx1c2goKX19XSksZX0oKSxjdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9jbGFzc05hbWU9XCJTU09Mb2dCb2R5XCIsdGhpcy5fcmVwb3J0PVtdfXJldHVybiBFbihlLFt7a2V5OlwicHVzaEluXCIsdmFsdWU6ZnVuY3Rpb24oZSl7UWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnB1c2hJblwiKSx0aGlzLl9yZXBvcnQubGVuZ3RoLGUpLHRoaXMuX3JlcG9ydC5wdXNoKGUpfX0se2tleTpcImJhY2tmaWxsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ7Z3UoZSkmJjAhPT1lLmxlbmd0aCYmKFFpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5iYWNrZmlsbFwiKSx0aGlzLl9yZXBvcnQubGVuZ3RoLGUubGVuZ3RoKSwodD10aGlzLl9yZXBvcnQpLnVuc2hpZnQuYXBwbHkodCxVbihlKSkpfX0se2tleTpcImdldExvZ3NOdW1Jbk1lbW9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcG9ydC5sZW5ndGh9fSx7a2V5OlwiaXNFbXB0eVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLl9yZXBvcnQubGVuZ3RofX0se2tleTpcIl9yZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVwb3J0Lmxlbmd0aD0wLHRoaXMuX3JlcG9ydD1bXX19LHtrZXk6XCJnZXRMb2dzSW5NZW1vcnlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3JlcG9ydC5zbGljZSgpO3JldHVybiB0aGlzLl9yZXNldCgpLGV9fV0pLGV9KCksbHY9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRNb2R1bGUoZGwpO3JldHVybntTREtUeXBlOjEwLFNES0FwcElEOnQuZ2V0U0RLQXBwSUQoKSxTREtWZXJzaW9uOnQuZ2V0VmVyc2lvbigpLHRpbnlJRDpOdW1iZXIodC5nZXRUaW55SUQoKSksdXNlcklEOnQuZ2V0VXNlcklEKCkscGxhdGZvcm06ZS5nZXRQbGF0Zm9ybSgpLGluc3RhbmNlSUQ6dC5nZXRJbnN0YW5jZUlEKCksdHJhY2VJRDpXaSgpfX0sZHY9ZnVuY3Rpb24oZSl7RG4obixlKTt2YXIgdD13bihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3luKHRoaXMsbiksKG89dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJFdmVudFN0YXRNb2R1bGVcIixvLlRBRz1cImltLXNzb2xvZy1ldmVudFwiLG8uX3JlcG9ydEJvZHk9bmV3IGN2LG8uTUlOX1RIUkVTSE9MRD0yMCxvLk1BWF9USFJFU0hPTEQ9MTAwLG8uV0FJVElOR19USU1FPTZlNCxvLlJFUE9SVF9MRVZFTD1bNCw1LDZdLG8uUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD1bXSxvLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPVtdLG8uX2xhc3RSZXBvcnRUaW1lPURhdGUubm93KCk7dmFyIHI9by5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpO3JldHVybiByLm9uKE1tLG8uX29uTG9naW5TdWNjZXNzLEduKG8pKSxyLm9uKHltLG8uX29uQ2xvdWRDb25maWdVcGRhdGVkLEduKG8pKSxvfXJldHVybiBFbihuLFt7a2V5OlwicmVwb3J0QXRPbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVwb3J0QXRPbmNlXCIpKSx0aGlzLl9yZXBvcnQoKX19LHtrZXk6XCJfb25Mb2dpblN1Y2Nlc3NcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLmdldE1vZHVsZShwbCksbj10LmdldEl0ZW0odGhpcy5UQUcsITEpOyFYdShuKSYmX3Uobi5mb3JFYWNoKSYmKFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uTG9naW5TdWNjZXNzIGdldCBzc29sb2cgaW4gc3RvcmFnZSwgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCkpLG4uZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5fcmVwb3J0Qm9keS5wdXNoSW4odCl9KSksdC5yZW1vdmVJdGVtKHRoaXMuVEFHLCExKSl9fSx7a2V5OlwiX29uQ2xvdWRDb25maWdVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldENsb3VkQ29uZmlnKFwiZXZ0X3JwdF90aHJlc2hvbGRcIiksdD10aGlzLmdldENsb3VkQ29uZmlnKFwiZXZ0X3JwdF93YWl0aW5nXCIpLG49dGhpcy5nZXRDbG91ZENvbmZpZyhcImV2dF9ycHRfbGV2ZWxcIiksbz10aGlzLmdldENsb3VkQ29uZmlnKFwiZXZ0X3JwdF9zZGthcHBpZF9ibFwiKSxyPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJldnRfcnB0X3RpbnlpZF93bFwiKTtodShlKXx8KHRoaXMuTUlOX1RIUkVTSE9MRD1OdW1iZXIoZSkpLGh1KHQpfHwodGhpcy5XQUlUSU5HX1RJTUU9TnVtYmVyKHQpKSxodShuKXx8KHRoaXMuUkVQT1JUX0xFVkVMPW4uc3BsaXQoXCIsXCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIE51bWJlcihlKX0pKSksaHUobyl8fCh0aGlzLlJFUE9SVF9TREtBUFBJRF9CTEFDS0xJU1Q9by5zcGxpdChcIixcIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gTnVtYmVyKGUpfSkpKSxodShyKXx8KHRoaXMuUkVQT1JUX1RJTllJRF9XSElURUxJU1Q9ci5zcGxpdChcIixcIikpfX0se2tleTpcInB1c2hJblwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UgaW5zdGFuY2VvZiBEcCYmKGUudXBkYXRlVGltZVN0YW1wKCksdGhpcy5fcmVwb3J0Qm9keS5wdXNoSW4oZSksdGhpcy5fcmVwb3J0Qm9keS5nZXRMb2dzTnVtSW5NZW1vcnkoKT49dGhpcy5NSU5fVEhSRVNIT0xEJiZ0aGlzLl9yZXBvcnQoKSl9fSx7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtEYXRlLm5vdygpPHRoaXMuX2xhc3RSZXBvcnRUaW1lK3RoaXMuV0FJVElOR19USU1FfHx0aGlzLl9yZXBvcnRCb2R5LmlzRW1wdHkoKXx8dGhpcy5fcmVwb3J0KCl9fSx7a2V5OlwiX2ZpbHRlckxvZ3NcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dGhpcy5nZXRNb2R1bGUoZGwpLG89bi5nZXRTREtBcHBJRCgpLHI9bi5nZXRUaW55SUQoKTtyZXR1cm4gJHUodGhpcy5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNULG8pJiYhenUodGhpcy5SRVBPUlRfVElOWUlEX1dISVRFTElTVCxyKT9bXTplLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHQuUkVQT1JUX0xFVkVMLmluY2x1ZGVzKGUubGV2ZWwpfSkpfX0se2tleTpcIl9yZXBvcnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoIXRoaXMuX3JlcG9ydEJvZHkuaXNFbXB0eSgpKXt2YXIgdD10aGlzLl9yZXBvcnRCb2R5LmdldExvZ3NJbk1lbW9yeSgpLG49dGhpcy5fZmlsdGVyTG9ncyh0KTtpZigwIT09bi5sZW5ndGgpe3ZhciBvPXtoZWFkZXI6bHYodGhpcyksZXZlbnQ6bn07dGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6WGQscmVxdWVzdERhdGE6U24oe30sbyl9KS50aGVuKChmdW5jdGlvbigpe2UuX2xhc3RSZXBvcnRUaW1lPURhdGUubm93KCl9KSkuY2F0Y2goKGZ1bmN0aW9uKG4pe1FpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLnJlcG9ydCBmYWlsZWQuIG5ldHdvcmtUeXBlOlwiKS5jb25jYXQoZS5nZXROZXR3b3JrVHlwZSgpLFwiIGVycm9yOlwiKSxuKSxlLl9yZXBvcnRCb2R5LmJhY2tmaWxsKHQpLGUuX3JlcG9ydEJvZHkuZ2V0TG9nc051bUluTWVtb3J5KCk+ZS5NQVhfVEhSRVNIT0xEJiZlLl9mbHVzaEF0T25jZSgpfSkpfWVsc2UgdGhpcy5fbGFzdFJlcG9ydFRpbWU9RGF0ZS5ub3coKX19fSx7a2V5OlwiX2ZsdXNoQXRPbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldE1vZHVsZShwbCksdD1lLmdldEl0ZW0odGhpcy5UQUcsITEpLG49dGhpcy5fcmVwb3J0Qm9keS5nZXRMb2dzSW5NZW1vcnkoKTtpZihYdSh0KSlRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9mbHVzaEF0T25jZSBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksZS5zZXRJdGVtKHRoaXMuVEFHLG4sITAsITEpO2Vsc2V7dmFyIG89bi5jb25jYXQodCk7by5sZW5ndGg+dGhpcy5NQVhfVEhSRVNIT0xEJiYobz1vLnNsaWNlKDAsdGhpcy5NQVhfVEhSRVNIT0xEKSksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZmx1c2hBdE9uY2UgY291bnQ6XCIpLmNvbmNhdChvLmxlbmd0aCkpLGUuc2V0SXRlbSh0aGlzLlRBRyxvLCEwLCExKX19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX2xhc3RSZXBvcnRUaW1lPTAsdGhpcy5fcmVwb3J0KCksdGhpcy5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPVtdLHRoaXMuUkVQT1JUX1RJTllJRF9XSElURUxJU1Q9W119fV0pLG59KE5sKSxwdj1cIm5vbmVcIixndj1cIm9ubGluZVwiLGh2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX21vZHVsZU1hbmFnZXI9dCx0aGlzLl9uZXR3b3JrVHlwZT1cIlwiLHRoaXMuX2NsYXNzTmFtZT1cIk5ldE1vbml0b3JNb2R1bGVcIix0aGlzLk1BWF9XQUlUX1RJTUU9M2UzLHRoaXMuX21wTmV0d29ya1N0YXR1c0NhbGxiYWNrPW51bGwsdGhpcy5fd2ViT25saW5lQ2FsbGJhY2s9bnVsbCx0aGlzLl93ZWJPZmZsaW5lQ2FsbGJhY2s9bnVsbH1yZXR1cm4gRW4oZSxbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3BpPyhoaS5nZXROZXR3b3JrVHlwZSh7c3VjY2VzczpmdW5jdGlvbih0KXtlLl9uZXR3b3JrVHlwZT10Lm5ldHdvcmtUeXBlLHQubmV0d29ya1R5cGU9PT1wdj9RaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5zdGFydCBubyBuZXR3b3JrLCBwbGVhc2UgY2hlY2shXCIpKTpRaS5pbmZvKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5zdGFydCBuZXR3b3JrVHlwZTpcIikuY29uY2F0KHQubmV0d29ya1R5cGUpKX19KSx0aGlzLl9tcE5ldHdvcmtTdGF0dXNDYWxsYmFjaz10aGlzLl9vbk5ldHdvcmtTdGF0dXNDaGFuZ2UuYmluZCh0aGlzKSxoaS5vbk5ldHdvcmtTdGF0dXNDaGFuZ2UodGhpcy5fbXBOZXR3b3JrU3RhdHVzQ2FsbGJhY2spKToodGhpcy5fbmV0d29ya1R5cGU9Z3YsdGhpcy5fd2ViT25saW5lQ2FsbGJhY2s9dGhpcy5fb25XZWJPbmxpbmUuYmluZCh0aGlzKSx0aGlzLl93ZWJPZmZsaW5lQ2FsbGJhY2s9dGhpcy5fb25XZWJPZmZsaW5lLmJpbmQodGhpcyksd2luZG93JiYod2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIix0aGlzLl93ZWJPbmxpbmVDYWxsYmFjayksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsdGhpcy5fd2ViT2ZmbGluZUNhbGxiYWNrKSkpfX0se2tleTpcIl9vbldlYk9ubGluZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fb25OZXR3b3JrU3RhdHVzQ2hhbmdlKHtpc0Nvbm5lY3RlZDohMCxuZXR3b3JrVHlwZTpndn0pfX0se2tleTpcIl9vbldlYk9mZmxpbmVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX29uTmV0d29ya1N0YXR1c0NoYW5nZSh7aXNDb25uZWN0ZWQ6ITEsbmV0d29ya1R5cGU6cHZ9KX19LHtrZXk6XCJfb25OZXR3b3JrU3RhdHVzQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pc0Nvbm5lY3RlZCxuPWUubmV0d29ya1R5cGUsbz0hMTt0PyhRaS5pbmZvKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25OZXR3b3JrU3RhdHVzQ2hhbmdlIHByZXZpb3VzTmV0d29ya1R5cGU6XCIpLmNvbmNhdCh0aGlzLl9uZXR3b3JrVHlwZSxcIiBjdXJyZW50TmV0d29ya1R5cGU6XCIpLmNvbmNhdChuKSksdGhpcy5fbmV0d29ya1R5cGUhPT1uJiYobz0hMCx0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh5bCkucmVDb25uZWN0KCEwKSkpOnRoaXMuX25ldHdvcmtUeXBlIT09biYmKG89ITAsUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uTmV0d29ya1N0YXR1c0NoYW5nZSBubyBuZXR3b3JrLCBwbGVhc2UgY2hlY2shXCIpKSk7byYmKG5ldyBEcChGcCkuc2V0TWVzc2FnZShcImlzQ29ubmVjdGVkOlwiLmNvbmNhdCh0LFwiIHByZXZpb3VzTmV0d29ya1R5cGU6XCIpLmNvbmNhdCh0aGlzLl9uZXR3b3JrVHlwZSxcIiBuZXR3b3JrVHlwZTpcIikuY29uY2F0KG4pKS5lbmQoKSx0aGlzLl9uZXR3b3JrVHlwZT1uKX19LHtrZXk6XCJwcm9iZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbil7aWYocGkpaGkuZ2V0TmV0d29ya1R5cGUoe3N1Y2Nlc3M6ZnVuY3Rpb24obil7ZS5fbmV0d29ya1R5cGU9bi5uZXR3b3JrVHlwZSxuLm5ldHdvcmtUeXBlPT09cHY/KFFpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLnByb2JlIG5vIG5ldHdvcmssIHBsZWFzZSBjaGVjayFcIikpLHQoWyExLG4ubmV0d29ya1R5cGVdKSk6KFFpLmluZm8oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLnByb2JlIG5ldHdvcmtUeXBlOlwiKS5jb25jYXQobi5uZXR3b3JrVHlwZSkpLHQoWyEwLG4ubmV0d29ya1R5cGVdKSl9fSk7ZWxzZSBpZih3aW5kb3cmJndpbmRvdy5mZXRjaClmZXRjaChcIlwiLmNvbmNhdChMdSgpLFwiLy93ZWIuc2RrLnFjbG91ZC5jb20vaW0vYXNzZXRzL3NwZWVkLnhtbD9yYW5kb209XCIpLmNvbmNhdChNYXRoLnJhbmRvbSgpKSkudGhlbigoZnVuY3Rpb24oZSl7ZS5vaz90KFshMCxndl0pOnQoWyExLHB2XSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3QoWyExLHB2XSl9KSk7ZWxzZXt2YXIgbz1uZXcgWE1MSHR0cFJlcXVlc3Qscj1zZXRUaW1lb3V0KChmdW5jdGlvbigpe1FpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLnByb2JlIGZldGNoIHRpbWVvdXQuIFByb2JhYmx5IG5vIG5ldHdvcmssIHBsZWFzZSBjaGVjayFcIikpLG8uYWJvcnQoKSxlLl9uZXR3b3JrVHlwZT1wdix0KFshMSxwdl0pfSksZS5NQVhfV0FJVF9USU1FKTtvLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1vLnJlYWR5U3RhdGUmJihjbGVhclRpbWVvdXQociksMjAwPT09by5zdGF0dXN8fDMwND09PW8uc3RhdHVzfHw1MTQ9PT1vLnN0YXR1cz8odGhpcy5fbmV0d29ya1R5cGU9Z3YsdChbITAsZ3ZdKSk6KFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5jbGFzc05hbWUsXCIucHJvYmUgZmV0Y2ggc3RhdHVzOlwiKS5jb25jYXQoby5zdGF0dXMsXCIuIFByb2JhYmx5IG5vIG5ldHdvcmssIHBsZWFzZSBjaGVjayFcIikpLHRoaXMuX25ldHdvcmtUeXBlPXB2LHQoWyExLHB2XSkpKX0sby5vcGVuKFwiR0VUXCIsXCJcIi5jb25jYXQoTHUoKSxcIi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2Fzc2V0cy9zcGVlZC54bWw/cmFuZG9tPVwiKS5jb25jYXQoTWF0aC5yYW5kb20oKSkpLG8uc2VuZCgpfX0pKX19LHtrZXk6XCJnZXROZXR3b3JrVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25ldHdvcmtUeXBlfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSxwaT9udWxsIT09dGhpcy5fbXBOZXR3b3JrU3RhdHVzQ2FsbGJhY2smJihoaS5vZmZOZXR3b3JrU3RhdHVzQ2hhbmdlJiYobGl8fGlpP2hpLm9mZk5ldHdvcmtTdGF0dXNDaGFuZ2UodGhpcy5fbXBOZXR3b3JrU3RhdHVzQ2FsbGJhY2spOmhpLm9mZk5ldHdvcmtTdGF0dXNDaGFuZ2UoKSksdGhpcy5fbXBOZXR3b3JrU3RhdHVzQ2FsbGJhY2s9bnVsbCk6d2luZG93JiYobnVsbCE9PXRoaXMuX3dlYk9ubGluZUNhbGxiYWNrJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIix0aGlzLl93ZWJPbmxpbmVDYWxsYmFjayksdGhpcy5fd2ViT25saW5lQ2FsbGJhY2s9bnVsbCksbnVsbCE9PXRoaXMuX29uV2ViT2ZmbGluZSYmKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLHRoaXMuX3dlYk9mZmxpbmVDYWxsYmFjayksdGhpcy5fd2ViT2ZmbGluZUNhbGxiYWNrPW51bGwpKX19XSksZX0oKSxmdj10KChmdW5jdGlvbihlKXt2YXIgdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LG49XCJ+XCI7ZnVuY3Rpb24gbygpe31mdW5jdGlvbiByKGUsdCxuKXt0aGlzLmZuPWUsdGhpcy5jb250ZXh0PXQsdGhpcy5vbmNlPW58fCExfWZ1bmN0aW9uIGEoZSx0LG8sYSxzKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciBpPW5ldyByKG8sYXx8ZSxzKSx1PW4/bit0OnQ7cmV0dXJuIGUuX2V2ZW50c1t1XT9lLl9ldmVudHNbdV0uZm4/ZS5fZXZlbnRzW3VdPVtlLl9ldmVudHNbdV0saV06ZS5fZXZlbnRzW3VdLnB1c2goaSk6KGUuX2V2ZW50c1t1XT1pLGUuX2V2ZW50c0NvdW50KyspLGV9ZnVuY3Rpb24gcyhlLHQpezA9PS0tZS5fZXZlbnRzQ291bnQ/ZS5fZXZlbnRzPW5ldyBvOmRlbGV0ZSBlLl9ldmVudHNbdF19ZnVuY3Rpb24gaSgpe3RoaXMuX2V2ZW50cz1uZXcgbyx0aGlzLl9ldmVudHNDb3VudD0wfU9iamVjdC5jcmVhdGUmJihvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG51bGwpLChuZXcgbykuX19wcm90b19ffHwobj0hMSkpLGkucHJvdG90eXBlLmV2ZW50TmFtZXM9ZnVuY3Rpb24oKXt2YXIgZSxvLHI9W107aWYoMD09PXRoaXMuX2V2ZW50c0NvdW50KXJldHVybiByO2ZvcihvIGluIGU9dGhpcy5fZXZlbnRzKXQuY2FsbChlLG8pJiZyLnB1c2gobj9vLnNsaWNlKDEpOm8pO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP3IuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSkpOnJ9LGkucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdD1uP24rZTplLG89dGhpcy5fZXZlbnRzW3RdO2lmKCFvKXJldHVybltdO2lmKG8uZm4pcmV0dXJuW28uZm5dO2Zvcih2YXIgcj0wLGE9by5sZW5ndGgscz1uZXcgQXJyYXkoYSk7cjxhO3IrKylzW3JdPW9bcl0uZm47cmV0dXJuIHN9LGkucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bj9uK2U6ZSxvPXRoaXMuX2V2ZW50c1t0XTtyZXR1cm4gbz9vLmZuPzE6by5sZW5ndGg6MH0saS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlLHQsbyxyLGEscyl7dmFyIGk9bj9uK2U6ZTtpZighdGhpcy5fZXZlbnRzW2ldKXJldHVybiExO3ZhciB1LGMsbD10aGlzLl9ldmVudHNbaV0sZD1hcmd1bWVudHMubGVuZ3RoO2lmKGwuZm4pe3N3aXRjaChsLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxsLmZuLHZvaWQgMCwhMCksZCl7Y2FzZSAxOnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0KSwhMDtjYXNlIDI6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQsdCksITA7Y2FzZSAzOnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0LHQsbyksITA7Y2FzZSA0OnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0LHQsbyxyKSwhMDtjYXNlIDU6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQsdCxvLHIsYSksITA7Y2FzZSA2OnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0LHQsbyxyLGEscyksITB9Zm9yKGM9MSx1PW5ldyBBcnJheShkLTEpO2M8ZDtjKyspdVtjLTFdPWFyZ3VtZW50c1tjXTtsLmZuLmFwcGx5KGwuY29udGV4dCx1KX1lbHNle3ZhciBwLGc9bC5sZW5ndGg7Zm9yKGM9MDtjPGc7YysrKXN3aXRjaChsW2NdLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxsW2NdLmZuLHZvaWQgMCwhMCksZCl7Y2FzZSAxOmxbY10uZm4uY2FsbChsW2NdLmNvbnRleHQpO2JyZWFrO2Nhc2UgMjpsW2NdLmZuLmNhbGwobFtjXS5jb250ZXh0LHQpO2JyZWFrO2Nhc2UgMzpsW2NdLmZuLmNhbGwobFtjXS5jb250ZXh0LHQsbyk7YnJlYWs7Y2FzZSA0OmxbY10uZm4uY2FsbChsW2NdLmNvbnRleHQsdCxvLHIpO2JyZWFrO2RlZmF1bHQ6aWYoIXUpZm9yKHA9MSx1PW5ldyBBcnJheShkLTEpO3A8ZDtwKyspdVtwLTFdPWFyZ3VtZW50c1twXTtsW2NdLmZuLmFwcGx5KGxbY10uY29udGV4dCx1KX19cmV0dXJuITB9LGkucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYSh0aGlzLGUsdCxuLCExKX0saS5wcm90b3R5cGUub25jZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGEodGhpcyxlLHQsbiwhMCl9LGkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCxvLHIpe3ZhciBhPW4/bitlOmU7aWYoIXRoaXMuX2V2ZW50c1thXSlyZXR1cm4gdGhpcztpZighdClyZXR1cm4gcyh0aGlzLGEpLHRoaXM7dmFyIGk9dGhpcy5fZXZlbnRzW2FdO2lmKGkuZm4paS5mbiE9PXR8fHImJiFpLm9uY2V8fG8mJmkuY29udGV4dCE9PW98fHModGhpcyxhKTtlbHNle2Zvcih2YXIgdT0wLGM9W10sbD1pLmxlbmd0aDt1PGw7dSsrKShpW3VdLmZuIT09dHx8ciYmIWlbdV0ub25jZXx8byYmaVt1XS5jb250ZXh0IT09bykmJmMucHVzaChpW3VdKTtjLmxlbmd0aD90aGlzLl9ldmVudHNbYV09MT09PWMubGVuZ3RoP2NbMF06YzpzKHRoaXMsYSl9cmV0dXJuIHRoaXN9LGkucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZT8odD1uP24rZTplLHRoaXMuX2V2ZW50c1t0XSYmcyh0aGlzLHQpKToodGhpcy5fZXZlbnRzPW5ldyBvLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXN9LGkucHJvdG90eXBlLm9mZj1pLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcixpLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1pLnByb3RvdHlwZS5vbixpLnByZWZpeGVkPW4saS5FdmVudEVtaXR0ZXI9aSxlLmV4cG9ydHM9aX0pKSxfdj1mdW5jdGlvbihlKXtEbihuLGUpO3ZhciB0PXduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87cmV0dXJuIHluKHRoaXMsbiksKG89dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJCaWdEYXRhQ2hhbm5lbE1vZHVsZVwiLG8uRklMRVRZUEU9e1NPVU5EOjIxMDYsRklMRToyMTA3LFZJREVPOjIxMTN9LG8uX2JkaF9kb3dubG9hZF9zZXJ2ZXI9XCJncm91cHRhbGsuYzJjLnFxLmNvbVwiLG8uX0JESEJpeklEPTEwMDAxLG8uX2F1dGhLZXk9XCJcIixvLl9leHBpcmVUaW1lPTAsby5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKE1tLG8uX2dldEF1dGhLZXksR24obykpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJfZ2V0QXV0aEtleVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpHbH0pLnRoZW4oKGZ1bmN0aW9uKHQpe3QuZGF0YS5hdXRoS2V5JiYoZS5fYXV0aEtleT10LmRhdGEuYXV0aEtleSxlLl9leHBpcmVUaW1lPXBhcnNlSW50KHQuZGF0YS5leHBpcmVUaW1lKSl9KSl9fSx7a2V5OlwiX2lzRnJvbU9sZGVyVmVyc2lvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEoIWUuY29udGVudHx8Mj09PWUuY29udGVudC5kb3dubG9hZEZsYWcpfX0se2tleTpcInBhcnNlRWxlbWVudHNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCFndShlKXx8IXQpcmV0dXJuW107Zm9yKHZhciBuPVtdLG89bnVsbCxyPTA7cjxlLmxlbmd0aDtyKyspbz1lW3JdLHRoaXMuX25lZWRQYXJzZShvKT9uLnB1c2godGhpcy5fcGFyc2VFbGVtZW50KG8sdCkpOm4ucHVzaChlW3JdKTtyZXR1cm4gbn19LHtrZXk6XCJfbmVlZFBhcnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIWUuY2xvdWRDdXN0b21EYXRhJiYhKCF0aGlzLl9pc0Zyb21PbGRlclZlcnNpb24oZSl8fGUudHlwZSE9PVluLk1TR19BVURJTyYmZS50eXBlIT09WW4uTVNHX0ZJTEUmJmUudHlwZSE9PVluLk1TR19WSURFTyl9fSx7a2V5OlwiX3BhcnNlRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7c3dpdGNoKGUudHlwZSl7Y2FzZSBZbi5NU0dfQVVESU86cmV0dXJuIHRoaXMuX3BhcnNlQXVkaW9FbGVtZW50KGUsdCk7Y2FzZSBZbi5NU0dfRklMRTpyZXR1cm4gdGhpcy5fcGFyc2VGaWxlRWxlbWVudChlLHQpO2Nhc2UgWW4uTVNHX1ZJREVPOnJldHVybiB0aGlzLl9wYXJzZVZpZGVvRWxlbWVudChlLHQpfX19LHtrZXk6XCJfcGFyc2VBdWRpb0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLmNvbnRlbnQudXJsPXRoaXMuX2dlbkF1ZGlvVXJsKGUuY29udGVudC51dWlkLHQpLGV9fSx7a2V5OlwiX3BhcnNlRmlsZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLmNvbnRlbnQudXJsPXRoaXMuX2dlbkZpbGVVcmwoZS5jb250ZW50LnV1aWQsdCxlLmNvbnRlbnQuZmlsZU5hbWUpLGV9fSx7a2V5OlwiX3BhcnNlVmlkZW9FbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5jb250ZW50LnVybD10aGlzLl9nZW5WaWRlb1VybChlLmNvbnRlbnQudXVpZCx0KSxlfX0se2tleTpcIl9nZW5BdWRpb1VybFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoXCJcIj09PXRoaXMuX2F1dGhLZXkpcmV0dXJuIFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9nZW5BdWRpb1VybCBubyBhdXRoS2V5IVwiKSksXCJcIjt2YXIgbj10aGlzLmdldE1vZHVsZShkbCkuZ2V0U0RLQXBwSUQoKTtyZXR1cm5cImh0dHBzOi8vXCIuY29uY2F0KHRoaXMuX2JkaF9kb3dubG9hZF9zZXJ2ZXIsXCIvYXNuLmNvbS9zdGRkb3dubG9hZF9jb21tb25fZmlsZT9hdXRoa2V5PVwiKS5jb25jYXQodGhpcy5fYXV0aEtleSxcIiZiaWQ9XCIpLmNvbmNhdCh0aGlzLl9CREhCaXpJRCxcIiZzdWJiaWQ9XCIpLmNvbmNhdChuLFwiJmZpbGVpZD1cIikuY29uY2F0KGUsXCImZmlsZXR5cGU9XCIpLmNvbmNhdCh0aGlzLkZJTEVUWVBFLlNPVU5ELFwiJm9wZW5pZD1cIikuY29uY2F0KHQsXCImdmVyPTBcIil9fSx7a2V5OlwiX2dlbkZpbGVVcmxcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7aWYoXCJcIj09PXRoaXMuX2F1dGhLZXkpcmV0dXJuIFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9nZW5GaWxlVXJsIG5vIGF1dGhLZXkhXCIpKSxcIlwiO258fChuPVwiXCIuY29uY2F0KE1hdGguZmxvb3IoMWU1Kk1hdGgucmFuZG9tKCkpLFwiLVwiKS5jb25jYXQoRGF0ZS5ub3coKSkpO3ZhciBvPXRoaXMuZ2V0TW9kdWxlKGRsKS5nZXRTREtBcHBJRCgpO3JldHVyblwiaHR0cHM6Ly9cIi5jb25jYXQodGhpcy5fYmRoX2Rvd25sb2FkX3NlcnZlcixcIi9hc24uY29tL3N0ZGRvd25sb2FkX2NvbW1vbl9maWxlP2F1dGhrZXk9XCIpLmNvbmNhdCh0aGlzLl9hdXRoS2V5LFwiJmJpZD1cIikuY29uY2F0KHRoaXMuX0JESEJpeklELFwiJnN1YmJpZD1cIikuY29uY2F0KG8sXCImZmlsZWlkPVwiKS5jb25jYXQoZSxcIiZmaWxldHlwZT1cIikuY29uY2F0KHRoaXMuRklMRVRZUEUuRklMRSxcIiZvcGVuaWQ9XCIpLmNvbmNhdCh0LFwiJnZlcj0wJmZpbGVuYW1lPVwiKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KG4pKX19LHtrZXk6XCJfZ2VuVmlkZW9VcmxcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKFwiXCI9PT10aGlzLl9hdXRoS2V5KXJldHVybiBRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZ2VuVmlkZW9Vcmwgbm8gYXV0aEtleSFcIikpLFwiXCI7dmFyIG49dGhpcy5nZXRNb2R1bGUoZGwpLmdldFNES0FwcElEKCk7cmV0dXJuXCJodHRwczovL1wiLmNvbmNhdCh0aGlzLl9iZGhfZG93bmxvYWRfc2VydmVyLFwiL2Fzbi5jb20vc3RkZG93bmxvYWRfY29tbW9uX2ZpbGU/YXV0aGtleT1cIikuY29uY2F0KHRoaXMuX2F1dGhLZXksXCImYmlkPVwiKS5jb25jYXQodGhpcy5fQkRIQml6SUQsXCImc3ViYmlkPVwiKS5jb25jYXQobixcIiZmaWxlaWQ9XCIpLmNvbmNhdChlLFwiJmZpbGV0eXBlPVwiKS5jb25jYXQodGhpcy5GSUxFVFlQRS5WSURFTyxcIiZvcGVuaWQ9XCIpLmNvbmNhdCh0LFwiJnZlcj0wXCIpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9hdXRoS2V5PVwiXCIsdGhpcy5leHBpcmVUaW1lPTB9fV0pLG59KE5sKSxtdj1mdW5jdGlvbihlKXtEbihuLGUpO3ZhciB0PXduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87cmV0dXJuIHluKHRoaXMsbiksKG89dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJVcGxvYWRNb2R1bGVcIixvLlRJTVVwbG9hZFBsdWdpbj1udWxsLG8udGltVXBsb2FkUGx1Z2luPW51bGwsby5DT1NTREs9bnVsbCxvLl9jb3NVcGxvYWRNZXRob2Q9bnVsbCxvLmV4cGlyZWRUaW1lTGltaXQ9NjAwLG8uYXBwaWQ9MCxvLmJ1Y2tldE5hbWU9XCJcIixvLmNpVXJsPVwiXCIsby5kaXJlY3Rvcnk9XCJcIixvLmRvd25sb2FkVXJsPVwiXCIsby51cGxvYWRVcmw9XCJcIixvLnJlZ2lvbj1cImFwLXNoYW5naGFpXCIsby5jb3M9bnVsbCxvLmNvc09wdGlvbnM9e3NlY3JldElkOlwiXCIsc2VjcmV0S2V5OlwiXCIsc2Vzc2lvblRva2VuOlwiXCIsZXhwaXJlZFRpbWU6MH0sby51cGxvYWRGaWxlVHlwZT1cIlwiLG8uZHVyYXRpb249OTAwLG8udHJ5Q291bnQ9MCxvLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oTW0sby5faW5pdCxHbihvKSksb31yZXR1cm4gRW4obixbe2tleTpcIl9pbml0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2luaXRcIiksdD10aGlzLmdldE1vZHVsZShtbCk7aWYodGhpcy5USU1VcGxvYWRQbHVnaW49dC5nZXRQbHVnaW4oXCJ0aW0tdXBsb2FkLXBsdWdpblwiKSx0aGlzLlRJTVVwbG9hZFBsdWdpbil0aGlzLl9pbml0VXBsb2FkZXJNZXRob2QoKTtlbHNle3ZhciBuPXBpP1wiY29zLXd4LXNka1wiOlwiY29zLWpzLXNka1wiO3RoaXMuQ09TU0RLPXQuZ2V0UGx1Z2luKG4pLHRoaXMuQ09TU0RLPyh0aGlzLl9nZXRBdXRob3JpemF0aW9uS2V5KCksUWkud2FybihcIlwiLmNvbmNhdChlLFwiIHYyLjkuMui1t+aOqOiNkOS9v+eUqCB0aW0tdXBsb2FkLXBsdWdpbiDku6Pmm78gXCIpLmNvbmNhdChuLFwi77yM5LiK5Lyg5pu05b+r5pu05a6J5YWo44CC6K+m57uG6K+35Y+C6ICDIGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9TREsuaHRtbCNyZWdpc3RlclBsdWdpblwiKSkpOlFpLndhcm4oXCJcIi5jb25jYXQoZSxcIiDmsqHmnInmo4DmtYvliLDkuIrkvKDmj5Lku7bvvIzlsIbml6Dms5Xlj5HpgIHlm77niYfjgIHpn7PpopHjgIHop4bpopHjgIHmlofku7bnrYnnsbvlnovnmoTmtojmga/jgILor6bnu4bor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI3JlZ2lzdGVyUGx1Z2luXCIpKX19fSx7a2V5OlwiX2dldEF1dGhvcml6YXRpb25LZXlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgRHAocXApLG49TWF0aC5jZWlsKERhdGUubm93KCkvMWUzKTt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTokZCxyZXF1ZXN0RGF0YTp7ZHVyYXRpb246dGhpcy5leHBpcmVkVGltZUxpbWl0fX0pLnRoZW4oKGZ1bmN0aW9uKG8pe3ZhciByPW8uZGF0YTtRaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9nZXRBdXRob3JpemF0aW9uS2V5IG9rLiBkYXRhOlwiKSxyKTt2YXIgYT1yLmV4cGlyZWRUaW1lLW47dC5zZXRNZXNzYWdlKFwicmVxdWVzdElkOlwiLmNvbmNhdChyLnJlcXVlc3RJZCxcIiByZXF1ZXN0VGltZTpcIikuY29uY2F0KG4sXCIgZXhwaXJlZFRpbWU6XCIpLmNvbmNhdChyLmV4cGlyZWRUaW1lLFwiIGRpZmY6XCIpLmNvbmNhdChhLFwic1wiKSkuc2V0TmV0d29ya1R5cGUoZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSwhcGkmJnIucmVnaW9uJiYoZS5yZWdpb249ci5yZWdpb24pLGUuYXBwaWQ9ci5hcHBpZCxlLmJ1Y2tldE5hbWU9ci5idWNrZXROYW1lLGUuY2lVcmw9ci5jaVVybCxlLmRpcmVjdG9yeT1yLmRpcmVjdG9yeSxlLmRvd25sb2FkVXJsPXIuZG93bmxvYWRVcmwsZS51cGxvYWRVcmw9ci51cGxvYWRVcmwsZS5jb3NPcHRpb25zPXtzZWNyZXRJZDpyLnNlY3JldElkLHNlY3JldEtleTpyLnNlY3JldEtleSxzZXNzaW9uVG9rZW46ci5zZXNzaW9uVG9rZW4sZXhwaXJlZFRpbWU6ci5leHBpcmVkVGltZX0sUWkubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fZ2V0QXV0aG9yaXphdGlvbktleSBvay4gcmVnaW9uOlwiKS5jb25jYXQoZS5yZWdpb24sXCIgYnVja2V0TmFtZTpcIikuY29uY2F0KGUuYnVja2V0TmFtZSkpLGUuX2luaXRVcGxvYWRlck1ldGhvZCgpfSkpLmNhdGNoKChmdW5jdGlvbihuKXtlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPVBuKGUsMikscj1vWzBdLGE9b1sxXTt0LnNldEVycm9yKG4scixhKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fZ2V0QXV0aG9yaXphdGlvbktleSBmYWlsZWQuIGVycm9yOlwiKSxuKX0pKX19LHtrZXk6XCJfZ2V0Q29zUHJlU2lnVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZ2V0Q29zUHJlU2lnVXJsXCIpLG89TWF0aC5jZWlsKERhdGUubm93KCkvMWUzKSxyPW5ldyBEcCh4cCk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnpkLHJlcXVlc3REYXRhOntmaWxlVHlwZTplLmZpbGVUeXBlLGZpbGVOYW1lOmUuZmlsZU5hbWUsdXBsb2FkTWV0aG9kOmUudXBsb2FkTWV0aG9kLGR1cmF0aW9uOmUuZHVyYXRpb259fSkudGhlbigoZnVuY3Rpb24oZSl7dC50cnlDb3VudD0wO3ZhciBhPWUuZGF0YXx8e30scz1hLmV4cGlyZWRUaW1lLW87cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBkYXRhOlwiKSxhKSxyLnNldE1lc3NhZ2UoXCJyZXF1ZXN0SWQ6XCIuY29uY2F0KGEucmVxdWVzdElkLFwiIGV4cGlyZWRUaW1lOlwiKS5jb25jYXQoYS5leHBpcmVkVGltZSxcIiBkaWZmOlwiKS5jb25jYXQocyxcInNcIikpLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksYX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuLTE9PT1vLmNvZGUmJihvLmNvZGU9bHAuQ09TX0dFVF9TSUdfRkFJTCksdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1QbihlLDIpLG49dFswXSxhPXRbMV07ci5zZXRFcnJvcihvLG4sYSkuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLG8pLHQudHJ5Q291bnQ8MT8odC50cnlDb3VudCsrLHQuX2dldENvc1ByZVNpZ1VybChlKSk6KHQudHJ5Q291bnQ9MCx1bSh7Y29kZTpscC5DT1NfR0VUX1NJR19GQUlMLG1lc3NhZ2U6ZHAuQ09TX0dFVF9TSUdfRkFJTH0pKX0pKX19LHtrZXk6XCJfaW5pdFVwbG9hZGVyTWV0aG9kXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMuVElNVXBsb2FkUGx1Z2luKXJldHVybiB0aGlzLnRpbVVwbG9hZFBsdWdpbj1uZXcgdGhpcy5USU1VcGxvYWRQbHVnaW4sdm9pZCh0aGlzLl9jb3NVcGxvYWRNZXRob2Q9ZnVuY3Rpb24odCxuKXtlLnRpbVVwbG9hZFBsdWdpbi51cGxvYWRGaWxlKHQsbil9KTt0aGlzLmFwcGlkJiYodGhpcy5jb3M9cGk/bmV3IHRoaXMuQ09TU0RLKHtGb3JjZVBhdGhTdHlsZTohMCxnZXRBdXRob3JpemF0aW9uOnRoaXMuX2dldEF1dGhvcml6YXRpb24uYmluZCh0aGlzKX0pOm5ldyB0aGlzLkNPU1NESyh7Z2V0QXV0aG9yaXphdGlvbjp0aGlzLl9nZXRBdXRob3JpemF0aW9uLmJpbmQodGhpcyl9KSx0aGlzLl9jb3NVcGxvYWRNZXRob2Q9cGk/ZnVuY3Rpb24odCxuKXtlLmNvcy5wb3N0T2JqZWN0KHQsbil9OmZ1bmN0aW9uKHQsbil7ZS5jb3MudXBsb2FkRmlsZXModCxuKX0pfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuQ09TU0RLJiYodGhpcy5USU1VcGxvYWRQbHVnaW58fHRoaXMuaXNMb2dnZWRJbigpJiZlJTYwPT0wJiZNYXRoLmNlaWwoRGF0ZS5ub3coKS8xZTMpPj10aGlzLmNvc09wdGlvbnMuZXhwaXJlZFRpbWUtMTIwJiZ0aGlzLl9nZXRBdXRob3JpemF0aW9uS2V5KCkpfX0se2tleTpcIl9nZXRBdXRob3JpemF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0KHtUbXBTZWNyZXRJZDp0aGlzLmNvc09wdGlvbnMuc2VjcmV0SWQsVG1wU2VjcmV0S2V5OnRoaXMuY29zT3B0aW9ucy5zZWNyZXRLZXksWENvc1NlY3VyaXR5VG9rZW46dGhpcy5jb3NPcHRpb25zLnNlc3Npb25Ub2tlbixFeHBpcmVkVGltZTp0aGlzLmNvc09wdGlvbnMuZXhwaXJlZFRpbWV9KX19LHtrZXk6XCJ1cGxvYWRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZighMD09PWUuZ2V0UmVsYXlGbGFnKCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3ZhciB0PXRoaXMuZ2V0TW9kdWxlKFNsKTtzd2l0Y2goZS50eXBlKXtjYXNlIFluLk1TR19JTUFHRTpyZXR1cm4gdC5hZGRUb3RhbENvdW50KHZwKSx0aGlzLl91cGxvYWRJbWFnZShlKTtjYXNlIFluLk1TR19GSUxFOnJldHVybiB0LmFkZFRvdGFsQ291bnQodnApLHRoaXMuX3VwbG9hZEZpbGUoZSk7Y2FzZSBZbi5NU0dfQVVESU86cmV0dXJuIHQuYWRkVG90YWxDb3VudCh2cCksdGhpcy5fdXBsb2FkQXVkaW8oZSk7Y2FzZSBZbi5NU0dfVklERU86cmV0dXJuIHQuYWRkVG90YWxDb3VudCh2cCksdGhpcy5fdXBsb2FkVmlkZW8oZSk7ZGVmYXVsdDpyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9fX0se2tleTpcIl91cGxvYWRJbWFnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TW9kdWxlKHJsKSxuPWUuZ2V0RWxlbWVudHMoKVswXSxvPXQuZ2V0TWVzc2FnZU9wdGlvbihlLmNsaWVudFNlcXVlbmNlKTtyZXR1cm4gdGhpcy5kb1VwbG9hZEltYWdlKHtmaWxlOm8ucGF5bG9hZC5maWxlLHRvOm8udG8sb25Qcm9ncmVzczpmdW5jdGlvbihlKXtpZihuLnVwZGF0ZVBlcmNlbnQoZSksX3Uoby5vblByb2dyZXNzKSl0cnl7by5vblByb2dyZXNzKGUpfWNhdGNoKHQpe3JldHVybiB1bSh7Y29kZTpscC5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1IsbWVzc2FnZTpkcC5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1J9KX19fSkudGhlbigoZnVuY3Rpb24odCl7dmFyIG89dC5sb2NhdGlvbixyPXQuZmlsZVR5cGUsYT10LmZpbGVTaXplLHM9dC53aWR0aCxpPXQuaGVpZ2h0LHU9UnUobyk7bi51cGRhdGVJbWFnZUZvcm1hdChyKTt2YXIgYz1IdSh7b3JpZ2luVXJsOnUsb3JpZ2luV2lkdGg6cyxvcmlnaW5IZWlnaHQ6aSxtaW46MTk4fSksbD1IdSh7b3JpZ2luVXJsOnUsb3JpZ2luV2lkdGg6cyxvcmlnaW5IZWlnaHQ6aSxtaW46NzIwfSk7cmV0dXJuIG4udXBkYXRlSW1hZ2VJbmZvQXJyYXkoW3tzaXplOmEsdXJsOnUsd2lkdGg6cyxoZWlnaHQ6aX0sU24oe30sbCksU24oe30sYyldKSxlfSkpfX0se2tleTpcIl91cGxvYWRGaWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNb2R1bGUocmwpLG49ZS5nZXRFbGVtZW50cygpWzBdLG89dC5nZXRNZXNzYWdlT3B0aW9uKGUuY2xpZW50U2VxdWVuY2UpO3JldHVybiB0aGlzLmRvVXBsb2FkRmlsZSh7ZmlsZTpvLnBheWxvYWQuZmlsZSx0bzpvLnRvLG9uUHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7aWYobi51cGRhdGVQZXJjZW50KGUpLF91KG8ub25Qcm9ncmVzcykpdHJ5e28ub25Qcm9ncmVzcyhlKX1jYXRjaCh0KXtyZXR1cm4gdW0oe2NvZGU6bHAuTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SLG1lc3NhZ2U6ZHAuTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SfSl9fX0pLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBvPXQubG9jYXRpb24scj1SdShvKTtyZXR1cm4gbi51cGRhdGVGaWxlVXJsKHIpLGV9KSl9fSx7a2V5OlwiX3VwbG9hZEF1ZGlvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNb2R1bGUocmwpLG49ZS5nZXRFbGVtZW50cygpWzBdLG89dC5nZXRNZXNzYWdlT3B0aW9uKGUuY2xpZW50U2VxdWVuY2UpO3JldHVybiB0aGlzLmRvVXBsb2FkQXVkaW8oe2ZpbGU6by5wYXlsb2FkLmZpbGUsdG86by50byxvblByb2dyZXNzOmZ1bmN0aW9uKGUpe2lmKG4udXBkYXRlUGVyY2VudChlKSxfdShvLm9uUHJvZ3Jlc3MpKXRyeXtvLm9uUHJvZ3Jlc3MoZSl9Y2F0Y2godCl7cmV0dXJuIHVtKHtjb2RlOmxwLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUixtZXNzYWdlOmRwLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUn0pfX19KS50aGVuKChmdW5jdGlvbih0KXt2YXIgbz10LmxvY2F0aW9uLHI9UnUobyk7cmV0dXJuIG4udXBkYXRlQXVkaW9VcmwociksZX0pKX19LHtrZXk6XCJfdXBsb2FkVmlkZW9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE1vZHVsZShybCksbj1lLmdldEVsZW1lbnRzKClbMF0sbz10LmdldE1lc3NhZ2VPcHRpb24oZS5jbGllbnRTZXF1ZW5jZSk7cmV0dXJuIHRoaXMuZG9VcGxvYWRWaWRlbyh7ZmlsZTpvLnBheWxvYWQuZmlsZSx0bzpvLnRvLG9uUHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7aWYobi51cGRhdGVQZXJjZW50KGUpLF91KG8ub25Qcm9ncmVzcykpdHJ5e28ub25Qcm9ncmVzcyhlKX1jYXRjaCh0KXtyZXR1cm4gdW0oe2NvZGU6bHAuTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SLG1lc3NhZ2U6ZHAuTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SfSl9fX0pLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBvPXQubG9jYXRpb24scj10LnNuYXBzaG90SW5mbyxhPVJ1KG8pO3JldHVybiBuLnVwZGF0ZVZpZGVvVXJsKGEpLFh1KHIpfHxuLnVwZGF0ZVNuYXBzaG90SW5mbyhyKSxlfSkpfX0se2tleTpcImRvVXBsb2FkSW1hZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZS5maWxlKXJldHVybiB1bSh7Y29kZTpscC5NRVNTQUdFX0lNQUdFX1NFTEVDVF9GSUxFX0ZJUlNULG1lc3NhZ2U6ZHAuTUVTU0FHRV9JTUFHRV9TRUxFQ1RfRklMRV9GSVJTVH0pO3ZhciB0PXRoaXMuX2NoZWNrSW1hZ2VUeXBlKGUuZmlsZSk7aWYoITAhPT10KXJldHVybiB0O3ZhciBuPXRoaXMuX2NoZWNrSW1hZ2VTaXplKGUuZmlsZSk7aWYoITAhPT1uKXJldHVybiBuO3ZhciBvPW51bGw7cmV0dXJuIHRoaXMuX3NldFVwbG9hZEZpbGVUeXBlKFNtKSx0aGlzLnVwbG9hZEJ5Q09TKGUpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBvPWUsVnUoXCJodHRwczovL1wiLmNvbmNhdChlLmxvY2F0aW9uKSl9KSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIG8ud2lkdGg9ZS53aWR0aCxvLmhlaWdodD1lLmhlaWdodCxQcm9taXNlLnJlc29sdmUobyl9KSl9fSx7a2V5OlwiX2NoZWNrSW1hZ2VUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIjtyZXR1cm4gdD1waT9lLnVybC5zbGljZShlLnVybC5sYXN0SW5kZXhPZihcIi5cIikrMSk6ZS5maWxlc1swXS5uYW1lLnNsaWNlKGUuZmlsZXNbMF0ubmFtZS5sYXN0SW5kZXhPZihcIi5cIikrMSksVG0uaW5kZXhPZih0LnRvTG93ZXJDYXNlKCkpPj0wfHx1bSh7Y29kZTpscC5NRVNTQUdFX0lNQUdFX1RZUEVTX0xJTUlULG1lc3NhZ2U6ZHAuTUVTU0FHRV9JTUFHRV9UWVBFU19MSU1JVH0pfX0se2tleTpcIl9jaGVja0ltYWdlU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PTA7cmV0dXJuIDA9PT0odD1waT9lLnNpemU6ZS5maWxlc1swXS5zaXplKT91bSh7Y29kZTpscC5NRVNTQUdFX0ZJTEVfSVNfRU1QVFksbWVzc2FnZTpcIlwiLmNvbmNhdChkcC5NRVNTQUdFX0ZJTEVfSVNfRU1QVFkpfSk6dDwyMDk3MTUyMHx8dW0oe2NvZGU6bHAuTUVTU0FHRV9JTUFHRV9TSVpFX0xJTUlULG1lc3NhZ2U6XCJcIi5jb25jYXQoZHAuTUVTU0FHRV9JTUFHRV9TSVpFX0xJTUlUKX0pfX0se2tleTpcImRvVXBsb2FkRmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7cmV0dXJuIGUuZmlsZT9lLmZpbGUuZmlsZXNbMF0uc2l6ZT4xMDQ4NTc2MDA/dW0odD17Y29kZTpscC5NRVNTQUdFX0ZJTEVfU0laRV9MSU1JVCxtZXNzYWdlOmRwLk1FU1NBR0VfRklMRV9TSVpFX0xJTUlUfSk6MD09PWUuZmlsZS5maWxlc1swXS5zaXplPyh0PXtjb2RlOmxwLk1FU1NBR0VfRklMRV9JU19FTVBUWSxtZXNzYWdlOlwiXCIuY29uY2F0KGRwLk1FU1NBR0VfRklMRV9JU19FTVBUWSl9LHVtKHQpKToodGhpcy5fc2V0VXBsb2FkRmlsZVR5cGUoQ20pLHRoaXMudXBsb2FkQnlDT1MoZSkpOnVtKHQ9e2NvZGU6bHAuTUVTU0FHRV9GSUxFX1NFTEVDVF9GSUxFX0ZJUlNULG1lc3NhZ2U6ZHAuTUVTU0FHRV9GSUxFX1NFTEVDVF9GSUxFX0ZJUlNUfSl9fSx7a2V5OlwiZG9VcGxvYWRWaWRlb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmZpbGUudmlkZW9GaWxlLnNpemU+MTA0ODU3NjAwP3VtKHtjb2RlOmxwLk1FU1NBR0VfVklERU9fU0laRV9MSU1JVCxtZXNzYWdlOlwiXCIuY29uY2F0KGRwLk1FU1NBR0VfVklERU9fU0laRV9MSU1JVCl9KTowPT09ZS5maWxlLnZpZGVvRmlsZS5zaXplP3VtKHtjb2RlOmxwLk1FU1NBR0VfRklMRV9JU19FTVBUWSxtZXNzYWdlOlwiXCIuY29uY2F0KGRwLk1FU1NBR0VfRklMRV9JU19FTVBUWSl9KTotMT09PUFtLmluZGV4T2YoZS5maWxlLnZpZGVvRmlsZS50eXBlKT91bSh7Y29kZTpscC5NRVNTQUdFX1ZJREVPX1RZUEVTX0xJTUlULG1lc3NhZ2U6XCJcIi5jb25jYXQoZHAuTUVTU0FHRV9WSURFT19UWVBFU19MSU1JVCl9KToodGhpcy5fc2V0VXBsb2FkRmlsZVR5cGUoRG0pLHBpP3RoaXMuaGFuZGxlVmlkZW9VcGxvYWQoe2ZpbGU6ZS5maWxlLnZpZGVvRmlsZSxvblByb2dyZXNzOmUub25Qcm9ncmVzc30pOmdpP3RoaXMuaGFuZGxlVmlkZW9VcGxvYWQoZSk6dm9pZCAwKX19LHtrZXk6XCJoYW5kbGVWaWRlb1VwbG9hZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLG8pe3QudXBsb2FkQnlDT1MoZSkudGhlbigoZnVuY3Rpb24oZSl7bihlKX0pKS5jYXRjaCgoZnVuY3Rpb24oKXt0LnVwbG9hZEJ5Q09TKGUpLnRoZW4oKGZ1bmN0aW9uKGUpe24oZSl9KSkuY2F0Y2goKGZ1bmN0aW9uKCl7byhuZXcgcm0oe2NvZGU6bHAuTUVTU0FHRV9WSURFT19VUExPQURfRkFJTCxtZXNzYWdlOmRwLk1FU1NBR0VfVklERU9fVVBMT0FEX0ZBSUx9KSl9KSl9KSl9KSl9fSx7a2V5OlwiZG9VcGxvYWRBdWRpb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmZpbGU/ZS5maWxlLnNpemU+MjA5NzE1MjA/dW0obmV3IHJtKHtjb2RlOmxwLk1FU1NBR0VfQVVESU9fU0laRV9MSU1JVCxtZXNzYWdlOlwiXCIuY29uY2F0KGRwLk1FU1NBR0VfQVVESU9fU0laRV9MSU1JVCl9KSk6MD09PWUuZmlsZS5zaXplP3VtKG5ldyBybSh7Y29kZTpscC5NRVNTQUdFX0ZJTEVfSVNfRU1QVFksbWVzc2FnZTpcIlwiLmNvbmNhdChkcC5NRVNTQUdFX0ZJTEVfSVNfRU1QVFkpfSkpOih0aGlzLl9zZXRVcGxvYWRGaWxlVHlwZShObSksdGhpcy51cGxvYWRCeUNPUyhlKSk6dW0obmV3IHJtKHtjb2RlOmxwLk1FU1NBR0VfQVVESU9fVVBMT0FEX0ZBSUwsbWVzc2FnZTpkcC5NRVNTQUdFX0FVRElPX1VQTE9BRF9GQUlMfSkpfX0se2tleTpcInVwbG9hZEJ5Q09TXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGxvYWRCeUNPU1wiKTtpZighX3UodGhpcy5fY29zVXBsb2FkTWV0aG9kKSlyZXR1cm4gUWkud2FybihcIlwiLmNvbmNhdChuLFwiIOayoeacieajgOa1i+WIsOS4iuS8oOaPkuS7tu+8jOWwhuaXoOazleWPkemAgeWbvueJh+OAgemfs+mikeOAgeinhumikeOAgeaWh+S7tuetieexu+Wei+eahOa2iOaBr+OAguivpue7huivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjcmVnaXN0ZXJQbHVnaW5cIikpLHVtKHtjb2RlOmxwLkNPU19VTkRFVEVDVEVELG1lc3NhZ2U6ZHAuQ09TX1VOREVURUNURUR9KTtpZih0aGlzLnRpbVVwbG9hZFBsdWdpbilyZXR1cm4gdGhpcy5fdXBsb2FkV2l0aFByZVNpZ1VybChlKTt2YXIgbz1uZXcgRHAoS3ApLHI9RGF0ZS5ub3coKSxhPXRoaXMuX2dldEZpbGUoZSk7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihzLGkpe3ZhciB1PXBpP3QuX2NyZWF0ZUNvc09wdGlvbnNXWE1pbmlBcHAoZSk6dC5fY3JlYXRlQ29zT3B0aW9uc1dlYihlKSxjPXQ7dC5fY29zVXBsb2FkTWV0aG9kKHUsKGZ1bmN0aW9uKGUsdSl7dmFyIGw9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih1KXtpZihlfHxndSh1LmZpbGVzKSYmdS5maWxlc1swXS5lcnJvcil7dmFyIGQ9bmV3IHJtKHtjb2RlOmxwLk1FU1NBR0VfRklMRV9VUExPQURfRkFJTCxtZXNzYWdlOmRwLk1FU1NBR0VfRklMRV9VUExPQURfRkFJTH0pO3JldHVybiBvLnNldEVycm9yKGQsITAsdC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSx1LmZpbGVzWzBdLmVycm9yKSw0MDM9PT11LmZpbGVzWzBdLmVycm9yLnN0YXR1c0NvZGUmJihRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBjb3MgQWNjZXNzS2V5SWQgd2FzIGludmFsaWQsIHJlZ2FpbiBhdXRoIGtleSFcIikpLHQuX2dldEF1dGhvcml6YXRpb25LZXkoKSksdm9pZCBpKGQpfWwuZmlsZU5hbWU9YS5uYW1lLGwuZmlsZVNpemU9YS5zaXplLGwuZmlsZVR5cGU9YS50eXBlLnNsaWNlKGEudHlwZS5pbmRleE9mKFwiL1wiKSsxKS50b0xvd2VyQ2FzZSgpLGwubG9jYXRpb249cGk/dS5Mb2NhdGlvbjp1LmZpbGVzWzBdLmRhdGEuTG9jYXRpb247dmFyIHA9RGF0ZS5ub3coKS1yLGc9Yy5fZm9ybWF0RmlsZVNpemUoYS5zaXplKSxoPWMuX2Zvcm1hdFNwZWVkKDFlMyphLnNpemUvcCksZj1cInNpemU6XCIuY29uY2F0KGcsXCIgdGltZTpcIikuY29uY2F0KHAsXCJtcyBzcGVlZDpcIikuY29uY2F0KGgpO1FpLmxvZyhcIlwiLmNvbmNhdChuLFwiIHN1Y2Nlc3MuIG5hbWU6XCIpLmNvbmNhdChhLm5hbWUsXCIgXCIpLmNvbmNhdChmKSkscyhsKTt2YXIgXz10LmdldE1vZHVsZShTbCk7cmV0dXJuIF8uYWRkQ29zdCh2cCxwKSxfLmFkZEZpbGVTaXplKHZwLGEuc2l6ZSksdm9pZCBvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShmKS5lbmQoKX12YXIgbT1uZXcgcm0oe2NvZGU6bHAuTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMLG1lc3NhZ2U6ZHAuTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMfSk7by5zZXRFcnJvcihtLCEwLGMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLDQwMz09PWUuc3RhdHVzQ29kZSYmKFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGNvcyBBY2Nlc3NLZXlJZCB3YXMgaW52YWxpZCwgcmVnYWluIGF1dGgga2V5IVwiKSksdC5fZ2V0QXV0aG9yaXphdGlvbktleSgpKSxpKG0pfSkpfSkpfX0se2tleTpcIl91cGxvYWRXaXRoUHJlU2lnVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fdXBsb2FkV2l0aFByZVNpZ1VybFwiKSxvPXRoaXMuX2dldEZpbGUoZSk7cmV0dXJuIHRoaXMuX2NyZWF0ZUNvc09wdGlvbnNQcmVTaWdVcmwoZSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihyLGEpe3ZhciBzPW5ldyBEcChLcCksaT1lLnJlcXVlc3RTbmFwc2hvdFVybCx1PXZvaWQgMD09PWk/dm9pZCAwOmksYz1PbihlLFtcInJlcXVlc3RTbmFwc2hvdFVybFwiXSksbD1EYXRlLm5vdygpO3QuX2Nvc1VwbG9hZE1ldGhvZChjLChmdW5jdGlvbihlLGkpe3ZhciBjPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoZXx8NDAzPT09aS5zdGF0dXNDb2RlKXt2YXIgZD1uZXcgcm0oe2NvZGU6bHAuTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMLG1lc3NhZ2U6ZHAuTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMfSk7cmV0dXJuIHMuc2V0RXJyb3IoZCwhMCx0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGZhaWxlZCwgZXJyb3I6XCIpLGUpLHZvaWQgYShkKX12YXIgcD1pLmRhdGEubG9jYXRpb258fFwiXCI7MCE9PXAuaW5kZXhPZihcImh0dHBzOi8vXCIpJiYwIT09cC5pbmRleE9mKFwiaHR0cDovL1wiKXx8KHA9cC5zcGxpdChcIi8vXCIpWzFdKSxjLmZpbGVOYW1lPW8ubmFtZSxjLmZpbGVTaXplPW8uc2l6ZSxjLmZpbGVUeXBlPW8udHlwZS5zbGljZShvLnR5cGUuaW5kZXhPZihcIi9cIikrMSkudG9Mb3dlckNhc2UoKSxjLmxvY2F0aW9uPXA7dmFyIGc9RGF0ZS5ub3coKS1sLGg9dC5fZm9ybWF0RmlsZVNpemUoby5zaXplKSxmPXQuX2Zvcm1hdFNwZWVkKDFlMypvLnNpemUvZyksXz1cInNpemU6XCIuY29uY2F0KGgsXCIsdGltZTpcIikuY29uY2F0KGcsXCJtcyxzcGVlZDpcIikuY29uY2F0KGYsXCIgcmVzOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoaS5kYXRhKSk7UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgc3VjY2VzcyBuYW1lOlwiKS5jb25jYXQoby5uYW1lLFwiLFwiKS5jb25jYXQoXykpLHMuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKF8pLmVuZCgpO3ZhciBtPXQuZ2V0TW9kdWxlKFNsKTtpZihtLmFkZENvc3QodnAsZyksbS5hZGRGaWxlU2l6ZSh2cCxvLnNpemUpLCFYdSh1KSlyZXR1cm4gdC5fZ2V0U25hcHNob3RJbmZvQnlVcmwodSkudGhlbigoZnVuY3Rpb24oZSl7Yy5zbmFwc2hvdEluZm89ZSxyKGMpfSkpO3IoYyl9KSl9KSl9KSl9fSx7a2V5OlwiX2dldEZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1udWxsO3JldHVybiBwaT90PWxpJiZndShlLmZpbGUuZmlsZXMpP2UuZmlsZS5maWxlc1swXTplLmZpbGU6Z2kmJih0PWUuZmlsZS5maWxlc1swXSksdH19LHtrZXk6XCJfZm9ybWF0RmlsZVNpemVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZTwxMDI0P2UrXCJCXCI6ZTwxMDQ4NTc2P01hdGguZmxvb3IoZS8xMDI0KStcIktCXCI6TWF0aC5mbG9vcihlLzEwNDg1NzYpK1wiTUJcIn19LHtrZXk6XCJfZm9ybWF0U3BlZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZTw9MTA0ODU3Nj9ZdShlLzEwMjQsMSkrXCJLQi9zXCI6WXUoZS8xMDQ4NTc2LDEpK1wiTUIvc1wifX0se2tleTpcIl9jcmVhdGVDb3NPcHRpb25zV2ViXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5maWxlLmZpbGVzWzBdLm5hbWUsbj10LnNsaWNlKHQubGFzdEluZGV4T2YoXCIuXCIpKSxvPXRoaXMuX2dlbkZpbGVOYW1lKFwiXCIuY29uY2F0KFN1KDk5OTk5OSkpLmNvbmNhdChuKSk7cmV0dXJue2ZpbGVzOlt7QnVja2V0OlwiXCIuY29uY2F0KHRoaXMuYnVja2V0TmFtZSxcIi1cIikuY29uY2F0KHRoaXMuYXBwaWQpLFJlZ2lvbjp0aGlzLnJlZ2lvbixLZXk6XCJcIi5jb25jYXQodGhpcy5kaXJlY3RvcnksXCIvXCIpLmNvbmNhdChvKSxCb2R5OmUuZmlsZS5maWxlc1swXX1dLFNsaWNlU2l6ZToxMDQ4NTc2LG9uUHJvZ3Jlc3M6ZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vblByb2dyZXNzKXRyeXtlLm9uUHJvZ3Jlc3ModC5wZXJjZW50KX1jYXRjaChuKXtRaS53YXJuKFwib25Qcm9ncmVzcyBjYWxsYmFjayBlcnJvcjpcIixuKX19LG9uRmlsZUZpbmlzaDpmdW5jdGlvbihlLHQsbil7fX19fSx7a2V5OlwiX2NyZWF0ZUNvc09wdGlvbnNXWE1pbmlBcHBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRGaWxlKGUpLG49dGhpcy5fZ2VuRmlsZU5hbWUodC5uYW1lKSxvPXQudXJsO3JldHVybntCdWNrZXQ6XCJcIi5jb25jYXQodGhpcy5idWNrZXROYW1lLFwiLVwiKS5jb25jYXQodGhpcy5hcHBpZCksUmVnaW9uOnRoaXMucmVnaW9uLEtleTpcIlwiLmNvbmNhdCh0aGlzLmRpcmVjdG9yeSxcIi9cIikuY29uY2F0KG4pLEZpbGVQYXRoOm8sb25Qcm9ncmVzczpmdW5jdGlvbih0KXtpZihRaS5sb2coSlNPTi5zdHJpbmdpZnkodCkpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGUub25Qcm9ncmVzcyl0cnl7ZS5vblByb2dyZXNzKHQucGVyY2VudCl9Y2F0Y2gobil7UWkud2FybihcIm9uUHJvZ3Jlc3MgY2FsbGJhY2sgZXJyb3I6XCIsbil9fX19fSx7a2V5OlwiX2NyZWF0ZUNvc09wdGlvbnNQcmVTaWdVcmxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIixvPVwiXCIscj0wO2lmKHBpKXt2YXIgYT10aGlzLl9nZXRGaWxlKGUpO249dGhpcy5fZ2VuRmlsZU5hbWUoYS5uYW1lKSxvPWEudXJsLHI9MX1lbHNle3ZhciBzPWUuZmlsZS5maWxlc1swXS5uYW1lLGk9cy5zbGljZShzLmxhc3RJbmRleE9mKFwiLlwiKSk7bj10aGlzLl9nZW5GaWxlTmFtZShcIlwiLmNvbmNhdChTdSg5OTk5OTkpKS5jb25jYXQoaSkpLG89ZS5maWxlLmZpbGVzWzBdLHI9MH1yZXR1cm4gdGhpcy5fZ2V0Q29zUHJlU2lnVXJsKHtmaWxlVHlwZTp0aGlzLnVwbG9hZEZpbGVUeXBlLGZpbGVOYW1lOm4sdXBsb2FkTWV0aG9kOnIsZHVyYXRpb246dGhpcy5kdXJhdGlvbn0pLnRoZW4oKGZ1bmN0aW9uKHIpe3ZhciBhPXIudXBsb2FkVXJsLHM9ci5kb3dubG9hZFVybCxpPXIucmVxdWVzdFNuYXBzaG90VXJsLHU9dm9pZCAwPT09aT92b2lkIDA6aTtyZXR1cm57dXJsOmEsZmlsZVR5cGU6dC51cGxvYWRGaWxlVHlwZSxmaWxlTmFtZTpuLHJlc291cmNlczpvLGRvd25sb2FkVXJsOnMscmVxdWVzdFNuYXBzaG90VXJsOnUsb25Qcm9ncmVzczpmdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uUHJvZ3Jlc3MpdHJ5e2Uub25Qcm9ncmVzcyh0LnBlcmNlbnQpfWNhdGNoKG4pe1FpLndhcm4oXCJvblByb2dyZXNzIGNhbGxiYWNrIGVycm9yOlwiLG4pLFFpLmVycm9yKG4pfX19fSkpfX0se2tleTpcIl9nZW5GaWxlTmFtZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVyblwiXCIuY29uY2F0KEt1KCksXCItXCIpLmNvbmNhdChlKX19LHtrZXk6XCJfc2V0VXBsb2FkRmlsZVR5cGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnVwbG9hZEZpbGVUeXBlPWV9fSx7a2V5OlwiX2dldFNuYXBzaG90SW5mb0J5VXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPW5ldyBEcChWcCk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkpkLHJlcXVlc3REYXRhOntwbGF0Zm9ybTp0aGlzLmdldFBsYXRmb3JtKCksY292ZXJOYW1lOnRoaXMuX2dlbkZpbGVOYW1lKFN1KDk5OTk5KSkscmVxdWVzdFNuYXBzaG90VXJsOmV9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9KGUuZGF0YXx8e30pLnNuYXBzaG90VXJsO3JldHVybiBuLnNldE1lc3NhZ2UoXCJzbmFwc2hvdFVybDpcIi5jb25jYXQodCkpLmVuZCgpLFh1KHQpP3t9OlZ1KHQpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybntzbmFwc2hvdFVybDp0LHNuYXBzaG90V2lkdGg6ZS53aWR0aCxzbmFwc2hvdEhlaWdodDplLmhlaWdodH19KSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBRaS53YXJuKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5fZ2V0U25hcHNob3RJbmZvQnlVcmwgZmFpbGVkLiBlcnJvcjpcIiksZSksbi5zZXRDb2RlKGUuZXJyb3JDb2RlKS5zZXRNZXNzYWdlKGUuZXJyb3JJbmZvKS5lbmQoKSx7fX0pKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSl9fV0pLG59KE5sKSx2dj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9jbGFzc05hbWU9XCJNZXJnZXJNZXNzYWdlSGFuZGxlclwiLHRoaXMuX21lc3NhZ2VNb2R1bGU9dH1yZXR1cm4gRW4oZSxbe2tleTpcInVwbG9hZE1lcmdlck1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7UWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwbG9hZE1lcmdlck1lc3NhZ2UgbWVzc2FnZTpcIiksZSxcIm1lc3NhZ2VCeXRlczpcIi5jb25jYXQodCkpO3ZhciBvPWUucGF5bG9hZC5tZXNzYWdlTGlzdCxyPW8ubGVuZ3RoLGE9bmV3IERwKG5nKTtyZXR1cm4gdGhpcy5fbWVzc2FnZU1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6b3AscmVxdWVzdERhdGE6e21lc3NhZ2VMaXN0Om99fSkudGhlbigoZnVuY3Rpb24oZSl7UWkuZGVidWcoXCJcIi5jb25jYXQobi5fY2xhc3NOYW1lLFwiLnVwbG9hZE1lcmdlck1lc3NhZ2Ugb2suIHJlc3BvbnNlOlwiKSxlLmRhdGEpO3ZhciBvPWUuZGF0YSxzPW8ucGJEb3dubG9hZEtleSxpPW8uZG93bmxvYWRLZXksdT17cGJEb3dubG9hZEtleTpzLGRvd25sb2FkS2V5OmksbWVzc2FnZU51bWJlcjpyfTtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZShuLl9tZXNzYWdlTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQocixcIi1cIikuY29uY2F0KHQsXCItXCIpLmNvbmNhdChpKSkuZW5kKCksdX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dGhyb3cgUWkud2FybihcIlwiLmNvbmNhdChuLl9jbGFzc05hbWUsXCIudXBsb2FkTWVyZ2VyTWVzc2FnZSBmYWlsZWQuIGVycm9yOlwiKSxlKSxuLl9tZXNzYWdlTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxlfSkpfX0se2tleTpcImRvd25sb2FkTWVyZ2VyTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7UWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRvd25sb2FkTWVyZ2VyTWVzc2FnZSBtZXNzYWdlOlwiKSxlKTt2YXIgbj1lLnBheWxvYWQuZG93bmxvYWRLZXksbz1uZXcgRHAob2cpO3JldHVybiBvLnNldE1lc3NhZ2UoXCJkb3dubG9hZEtleTpcIi5jb25jYXQobikpLHRoaXMuX21lc3NhZ2VNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnJwLHJlcXVlc3REYXRhOntkb3dubG9hZEtleTpufX0pLnRoZW4oKGZ1bmN0aW9uKG4pe2lmKFFpLmRlYnVnKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5kb3dubG9hZE1lcmdlck1lc3NhZ2Ugb2suIHJlc3BvbnNlOlwiKSxuLmRhdGEpLF91KGUuY2xlYXJFbGVtZW50KSl7dmFyIHI9ZS5wYXlsb2FkLGE9KHIuZG93bmxvYWRLZXksci5wYkRvd25sb2FkS2V5LHIubWVzc2FnZUxpc3QsT24ocixbXCJkb3dubG9hZEtleVwiLFwicGJEb3dubG9hZEtleVwiLFwibWVzc2FnZUxpc3RcIl0pKTtlLmNsZWFyRWxlbWVudCgpLGUuc2V0RWxlbWVudCh7dHlwZTplLnR5cGUsY29udGVudDpTbih7bWVzc2FnZUxpc3Q6bi5kYXRhLm1lc3NhZ2VMaXN0fSxhKX0pfWVsc2V7dmFyIHM9W107bi5kYXRhLm1lc3NhZ2VMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKCFYdShlKSl7dmFyIHQ9bmV3ICRfKGUpO3MucHVzaCh0KX19KSksZS5wYXlsb2FkLm1lc3NhZ2VMaXN0PXMsZS5wYXlsb2FkLmRvd25sb2FkS2V5PVwiXCIsZS5wYXlsb2FkLnBiRG93bmxvYWRLZXk9XCJcIn1yZXR1cm4gby5zZXROZXR3b3JrVHlwZSh0Ll9tZXNzYWdlTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLGV9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3Rocm93IFFpLndhcm4oXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmRvd25sb2FkTWVyZ2VyTWVzc2FnZSBmYWlsZWQuIGtleTpcIikuY29uY2F0KG4sXCIgZXJyb3I6XCIpLGUpLHQuX21lc3NhZ2VNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLGV9KSl9fSx7a2V5OlwiY3JlYXRlTWVyZ2VyTWVzc2FnZVBhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGUuY29udmVyc2F0aW9uVHlwZT09PVluLkNPTlZfQzJDP3RoaXMuX2NyZWF0ZUMyQ01lcmdlck1lc3NhZ2VQYWNrKGUsdCxuKTp0aGlzLl9jcmVhdGVHcm91cE1lcmdlck1lc3NhZ2VQYWNrKGUsdCxuKX19LHtrZXk6XCJfY3JlYXRlQzJDTWVyZ2VyTWVzc2FnZVBhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIG89bnVsbDt0JiYodC5vZmZsaW5lUHVzaEluZm8mJihvPXQub2ZmbGluZVB1c2hJbmZvKSwhMD09PXQub25saW5lVXNlck9ubHkmJihvP28uZGlzYWJsZVB1c2g9ITA6bz17ZGlzYWJsZVB1c2g6ITB9KSk7dmFyIHI9XCJcIjtsdShlLmNsb3VkQ3VzdG9tRGF0YSkmJmUuY2xvdWRDdXN0b21EYXRhLmxlbmd0aD4wJiYocj1lLmNsb3VkQ3VzdG9tRGF0YSk7dmFyIGE9bi5wYkRvd25sb2FkS2V5LHM9bi5kb3dubG9hZEtleSxpPW4ubWVzc2FnZU51bWJlcix1PWUucGF5bG9hZCxjPXUudGl0bGUsbD11LmFic3RyYWN0TGlzdCxkPXUuY29tcGF0aWJsZVRleHQscD10aGlzLl9tZXNzYWdlTW9kdWxlLmdldE1vZHVsZShzbCk7cmV0dXJue3Byb3RvY29sTmFtZTpibCx0amdJRDp0aGlzLl9tZXNzYWdlTW9kdWxlLmdlbmVyYXRlVGpnSUQoZSkscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX21lc3NhZ2VNb2R1bGUuZ2V0TXlVc2VySUQoKSx0b0FjY291bnQ6ZS50byxtc2dCb2R5Olt7bXNnVHlwZTplLnR5cGUsbXNnQ29udGVudDp7cGJEb3dubG9hZEtleTphLGRvd25sb2FkS2V5OnMsdGl0bGU6YyxhYnN0cmFjdExpc3Q6bCxjb21wYXRpYmxlVGV4dDpkLG1lc3NhZ2VOdW1iZXI6aX19XSxjbG91ZEN1c3RvbURhdGE6cixtc2dTZXE6ZS5zZXF1ZW5jZSxtc2dSYW5kb206ZS5yYW5kb20sbXNnTGlmZVRpbWU6cCYmcC5pc09ubGluZU1lc3NhZ2UoZSx0KT8wOnZvaWQgMCxvZmZsaW5lUHVzaEluZm86bz97cHVzaEZsYWc6ITA9PT1vLmRpc2FibGVQdXNoPzE6MCx0aXRsZTpvLnRpdGxlfHxcIlwiLGRlc2M6by5kZXNjcmlwdGlvbnx8XCJcIixleHQ6by5leHRlbnNpb258fFwiXCIsYXBuc0luZm86e2JhZGdlTW9kZTohMD09PW8uaWdub3JlSU9TQmFkZ2U/MTowfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpvLmFuZHJvaWRPUFBPQ2hhbm5lbElEfHxcIlwifX06dm9pZCAwfX19fSx7a2V5OlwiX2NyZWF0ZUdyb3VwTWVyZ2VyTWVzc2FnZVBhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIG89bnVsbDt0JiZ0Lm9mZmxpbmVQdXNoSW5mbyYmKG89dC5vZmZsaW5lUHVzaEluZm8pO3ZhciByPVwiXCI7bHUoZS5jbG91ZEN1c3RvbURhdGEpJiZlLmNsb3VkQ3VzdG9tRGF0YS5sZW5ndGg+MCYmKHI9ZS5jbG91ZEN1c3RvbURhdGEpO3ZhciBhPW4ucGJEb3dubG9hZEtleSxzPW4uZG93bmxvYWRLZXksaT1uLm1lc3NhZ2VOdW1iZXIsdT1lLnBheWxvYWQsYz11LnRpdGxlLGw9dS5hYnN0cmFjdExpc3QsZD11LmNvbXBhdGlibGVUZXh0LHA9dGhpcy5fbWVzc2FnZU1vZHVsZS5nZXRNb2R1bGUoaWwpO3JldHVybntwcm90b2NvbE5hbWU6d2wsdGpnSUQ6dGhpcy5fbWVzc2FnZU1vZHVsZS5nZW5lcmF0ZVRqZ0lEKGUpLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9tZXNzYWdlTW9kdWxlLmdldE15VXNlcklEKCksZ3JvdXBJRDplLnRvLG1zZ0JvZHk6W3ttc2dUeXBlOmUudHlwZSxtc2dDb250ZW50OntwYkRvd25sb2FkS2V5OmEsZG93bmxvYWRLZXk6cyx0aXRsZTpjLGFic3RyYWN0TGlzdDpsLGNvbXBhdGlibGVUZXh0OmQsbWVzc2FnZU51bWJlcjppfX1dLHJhbmRvbTplLnJhbmRvbSxwcmlvcml0eTplLnByaW9yaXR5LGNsaWVudFNlcXVlbmNlOmUuY2xpZW50U2VxdWVuY2UsZ3JvdXBBdEluZm86dm9pZCAwLGNsb3VkQ3VzdG9tRGF0YTpyLG9ubGluZU9ubHlGbGFnOnAmJnAuaXNPbmxpbmVNZXNzYWdlKGUsdCk/MTowLG9mZmxpbmVQdXNoSW5mbzpvP3twdXNoRmxhZzohMD09PW8uZGlzYWJsZVB1c2g/MTowLHRpdGxlOm8udGl0bGV8fFwiXCIsZGVzYzpvLmRlc2NyaXB0aW9ufHxcIlwiLGV4dDpvLmV4dGVuc2lvbnx8XCJcIixhcG5zSW5mbzp7YmFkZ2VNb2RlOiEwPT09by5pZ25vcmVJT1NCYWRnZT8xOjB9LGFuZHJvaWRJbmZvOntPUFBPQ2hhbm5lbElEOm8uYW5kcm9pZE9QUE9DaGFubmVsSUR8fFwiXCJ9fTp2b2lkIDAsY2xpZW50VGltZTplLmNsaWVudFRpbWUsbmVlZFJlYWRSZWNlaXB0OiEwIT09ZS5uZWVkUmVhZFJlY2VpcHR8fHAuaXNNZXNzYWdlRnJvbU9yVG9BVkNoYXRyb29tKGUudG8pPzA6MX19fX1dKSxlfSgpLE12PXtFUlJfU1ZSX0NPTU1fU0VOU0lUSVZFX1RFWFQ6ODAwMDEsRVJSX1NWUl9DT01NX0JPRFlfU0laRV9MSU1JVDo4MDAwMixPUEVOX1NFUlZJQ0VfT1ZFUkxPQURfRVJST1I6NjAwMjIsRVJSX1NWUl9NU0dfUEtHX1BBUlNFX0ZBSUxFRDoyMDAwMSxFUlJfU1ZSX01TR19JTlRFUk5BTF9BVVRIX0ZBSUxFRDoyMDAwMixFUlJfU1ZSX01TR19JTlZBTElEX0lEOjIwMDAzLEVSUl9TVlJfTVNHX1BVU0hfREVOWToyMDAwNixFUlJfU1ZSX01TR19JTl9QRUVSX0JMQUNLTElTVDoyMDAwNyxFUlJfU1ZSX01TR19CT1RIX05PVF9GUklFTkQ6MjAwMDksRVJSX1NWUl9NU0dfTk9UX1BFRVJfRlJJRU5EOjIwMDEwLEVSUl9TVlJfTVNHX05PVF9TRUxGX0ZSSUVORDoyMDAxMSxFUlJfU1ZSX01TR19TSFVUVVBfREVOWToyMDAxMixFUlJfU1ZSX0dST1VQX0lOVkFMSURfUEFSQU1FVEVSUzoxMDAwNCxFUlJfU1ZSX0dST1VQX1BFUk1JU1NJT05fREVOWToxMDAwNyxFUlJfU1ZSX0dST1VQX05PVF9GT1VORDoxMDAxMCxFUlJfU1ZSX0dST1VQX0lOVkFMSURfR1JPVVBJRDoxMDAxNSxFUlJfU1ZSX0dST1VQX1JFSkVDVF9GUk9NX1RISVJEUEFSVFk6MTAwMTYsRVJSX1NWUl9HUk9VUF9TSFVUVVBfREVOWToxMDAxNyxNRVNTQUdFX1NFTkRfRkFJTDoyMTAwLE9WRVJfRlJFUVVFTkNZX0xJTUlUOjI5OTZ9LHl2PVtscC5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1IsbHAuTUVTU0FHRV9JTUFHRV9TRUxFQ1RfRklMRV9GSVJTVCxscC5NRVNTQUdFX0lNQUdFX1RZUEVTX0xJTUlULGxwLk1FU1NBR0VfRklMRV9JU19FTVBUWSxscC5NRVNTQUdFX0lNQUdFX1NJWkVfTElNSVQsbHAuTUVTU0FHRV9GSUxFX1NFTEVDVF9GSUxFX0ZJUlNULGxwLk1FU1NBR0VfRklMRV9TSVpFX0xJTUlULGxwLk1FU1NBR0VfVklERU9fU0laRV9MSU1JVCxscC5NRVNTQUdFX1ZJREVPX1RZUEVTX0xJTUlULGxwLk1FU1NBR0VfQVVESU9fVVBMT0FEX0ZBSUwsbHAuTUVTU0FHRV9BVURJT19TSVpFX0xJTUlULGxwLkNPU19VTkRFVEVDVEVEXTt2YXIgSXY9ZnVuY3Rpb24oZSl7RG4obixlKTt2YXIgdD13bihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiTWVzc2FnZU1vZHVsZVwiLG8uX21lc3NhZ2VPcHRpb25zTWFwPW5ldyBNYXAsby5fbWVyZ2VyTWVzc2FnZUhhbmRsZXI9bmV3IHZ2KEduKG8pKSxvfXJldHVybiBFbihuLFt7a2V5OlwiY3JlYXRlVGV4dE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnRvLG49ZS5wYXlsb2FkLmF0VXNlckxpc3Qsbz12b2lkIDA9PT1uP1tdOm47aWYoUHUoe2dyb3VwSUQ6dH0pJiZvLmluY2x1ZGVzKFluLk1TR19BVF9BTEwpKXJldHVybiB1bSh7Y29kZTpscC5NRVNTQUdFX0FUX1RZUEVfSU5WQUxJRCxtZXNzYWdlOmRwLk1FU1NBR0VfQVRfVFlQRV9JTlZBTElEfSk7dmFyIHI9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9cixlLnNlbmRlclRpbnlJRD10aGlzLmdldE15VGlueUlEKCk7dmFyIGE9bmV3IFhfKGUpLHM9XCJzdHJpbmdcIj09dHlwZW9mIGUucGF5bG9hZD9lLnBheWxvYWQ6ZS5wYXlsb2FkLnRleHQsaT1uZXcgU2goe3RleHQ6c30pLHU9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHIpO3JldHVybiBhLnNldEVsZW1lbnQoaSksYS5zZXROaWNrQW5kQXZhdGFyKHUpLGEuc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQoYSkpLGF9fSx7a2V5OlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dCxlLnNlbmRlclRpbnlJRD10aGlzLmdldE15VGlueUlEKCk7dmFyIG49bmV3IFhfKGUpO2lmKHBpKXt2YXIgbz1lLnBheWxvYWQuZmlsZTtpZih1dShvKSlyZXR1cm4gdm9pZCBRaS53YXJuKFwi5bCP56iL5bqP546v5aKD5LiL6LCD55SoIGNyZWF0ZUltYWdlTWVzc2FnZSDmjqXlj6Pml7bvvIxwYXlsb2FkLmZpbGUg5LiN5pSv5oyB5Lyg5YWlIEZpbGUg5a+56LGhXCIpO3ZhciByPW8udGVtcEZpbGVQYXRoc1swXSxhPXt1cmw6cixuYW1lOnIuc2xpY2Uoci5sYXN0SW5kZXhPZihcIi9cIikrMSksc2l6ZTpvLnRlbXBGaWxlcyYmby50ZW1wRmlsZXNbMF0uc2l6ZXx8MSx0eXBlOnIuc2xpY2Uoci5sYXN0SW5kZXhPZihcIi5cIikrMSkudG9Mb3dlckNhc2UoKX07ZS5wYXlsb2FkLmZpbGU9YX1lbHNlIGlmKGdpKWlmKHV1KGUucGF5bG9hZC5maWxlKSl7dmFyIHM9ZS5wYXlsb2FkLmZpbGU7ZS5wYXlsb2FkLmZpbGU9e2ZpbGVzOltzXX19ZWxzZSBpZihwdShlLnBheWxvYWQuZmlsZSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmkpe3ZhciBpPWUucGF5bG9hZC5maWxlLnRlbXBGaWxlc1swXTtlLnBheWxvYWQuZmlsZT17ZmlsZXM6W2ldfX12YXIgdT1uZXcgUl8oe2ltYWdlRm9ybWF0OlppLlVOS05PV04sdXVpZDp0aGlzLl9nZW5lcmF0ZVVVSUQoKSxmaWxlOmUucGF5bG9hZC5maWxlfSksYz10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQodCk7cmV0dXJuIG4uc2V0RWxlbWVudCh1KSxuLnNldE5pY2tBbmRBdmF0YXIoYyksbi5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChuKSksdGhpcy5fbWVzc2FnZU9wdGlvbnNNYXAuc2V0KG4uY2xpZW50U2VxdWVuY2UsZSksbn19LHtrZXk6XCJjcmVhdGVBdWRpb01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihwaSl7dmFyIHQ9ZS5wYXlsb2FkLmZpbGU7aWYocGkpe3ZhciBuPXt1cmw6dC50ZW1wRmlsZVBhdGgsbmFtZTp0LnRlbXBGaWxlUGF0aC5zbGljZSh0LnRlbXBGaWxlUGF0aC5sYXN0SW5kZXhPZihcIi9cIikrMSksc2l6ZTp0LmZpbGVTaXplLHNlY29uZDpwYXJzZUludCh0LmR1cmF0aW9uKS8xZTMsdHlwZTp0LnRlbXBGaWxlUGF0aC5zbGljZSh0LnRlbXBGaWxlUGF0aC5sYXN0SW5kZXhPZihcIi5cIikrMSkudG9Mb3dlckNhc2UoKX07ZS5wYXlsb2FkLmZpbGU9bn12YXIgbz10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj1vLGUuc2VuZGVyVGlueUlEPXRoaXMuZ2V0TXlUaW55SUQoKTt2YXIgcj1uZXcgWF8oZSksYT1uZXcgR18oe3NlY29uZDpNYXRoLmZsb29yKHQuZHVyYXRpb24vMWUzKSxzaXplOnQuZmlsZVNpemUsdXJsOnQudGVtcEZpbGVQYXRoLHV1aWQ6dGhpcy5fZ2VuZXJhdGVVVUlEKCl9KSxzPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRChvKTtyZXR1cm4gci5zZXRFbGVtZW50KGEpLHIuc2V0Tmlja0FuZEF2YXRhcihzKSxyLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKHIpKSx0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5zZXQoci5jbGllbnRTZXF1ZW5jZSxlKSxyfVFpLndhcm4oXCJjcmVhdGVBdWRpb01lc3NhZ2Ug55uu5YmN5Y+q5pSv5oyB5bCP56iL5bqP546v5aKD5LiL5Y+R6K+t6Z+z5raI5oGvXCIpfX0se2tleTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPXQsZS5zZW5kZXJUaW55SUQ9dGhpcy5nZXRNeVRpbnlJRCgpLGUucGF5bG9hZC5maWxlLnRodW1iVXJsPVwiaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vYXNzZXRzL2ltYWdlcy90cmFuc3BhcmVudC5wbmdcIixlLnBheWxvYWQuZmlsZS50aHVtYlNpemU9MTY2ODt2YXIgbj17fTtpZihwaSl7aWYoY2kpcmV0dXJuIHZvaWQgUWkud2FybihcImNyZWF0ZVZpZGVvTWVzc2FnZSDkuI3mlK/mjIHlnKjmlK/ku5jlrp3lsI/nqIvluo/njq/looPkuIvkvb/nlKhcIik7aWYodXUoZS5wYXlsb2FkLmZpbGUpKXJldHVybiB2b2lkIFFpLndhcm4oXCLlsI/nqIvluo/njq/looPkuIvosIPnlKggY3JlYXRlVmlkZW9NZXNzYWdlIOaOpeWPo+aXtu+8jHBheWxvYWQuZmlsZSDkuI3mlK/mjIHkvKDlhaUgRmlsZSDlr7nosaFcIik7dmFyIG89ZS5wYXlsb2FkLmZpbGU7bi51cmw9by50ZW1wRmlsZVBhdGgsbi5uYW1lPW8udGVtcEZpbGVQYXRoLnNsaWNlKG8udGVtcEZpbGVQYXRoLmxhc3RJbmRleE9mKFwiL1wiKSsxKSxuLnNpemU9by5zaXplLG4uc2Vjb25kPW8uZHVyYXRpb24sbi50eXBlPW8udGVtcEZpbGVQYXRoLnNsaWNlKG8udGVtcEZpbGVQYXRoLmxhc3RJbmRleE9mKFwiLlwiKSsxKS50b0xvd2VyQ2FzZSgpfWVsc2UgaWYoZ2kpe2lmKHV1KGUucGF5bG9hZC5maWxlKSl7dmFyIHI9ZS5wYXlsb2FkLmZpbGU7ZS5wYXlsb2FkLmZpbGUuZmlsZXM9W3JdfWVsc2UgaWYocHUoZS5wYXlsb2FkLmZpbGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pKXt2YXIgYT1lLnBheWxvYWQuZmlsZS50ZW1wRmlsZTtlLnBheWxvYWQuZmlsZS5maWxlcz1bYV19dmFyIHM9ZS5wYXlsb2FkLmZpbGU7bi51cmw9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwocy5maWxlc1swXSksbi5uYW1lPXMuZmlsZXNbMF0ubmFtZSxuLnNpemU9cy5maWxlc1swXS5zaXplLG4uc2Vjb25kPXMuZmlsZXNbMF0uZHVyYXRpb258fDAsbi50eXBlPXMuZmlsZXNbMF0udHlwZS5zcGxpdChcIi9cIilbMV19ZS5wYXlsb2FkLmZpbGUudmlkZW9GaWxlPW47dmFyIGk9bmV3IFhfKGUpLHU9bmV3IFdfKHt2aWRlb0Zvcm1hdDpuLnR5cGUsdmlkZW9TZWNvbmQ6WXUobi5zZWNvbmQsMCksdmlkZW9TaXplOm4uc2l6ZSxyZW1vdGVWaWRlb1VybDpcIlwiLHZpZGVvVXJsOm4udXJsLHZpZGVvVVVJRDp0aGlzLl9nZW5lcmF0ZVVVSUQoKSx0aHVtYlVVSUQ6dGhpcy5fZ2VuZXJhdGVVVUlEKCksdGh1bWJXaWR0aDplLnBheWxvYWQuZmlsZS53aWR0aHx8MjAwLHRodW1iSGVpZ2h0OmUucGF5bG9hZC5maWxlLmhlaWdodHx8MjAwLHRodW1iVXJsOmUucGF5bG9hZC5maWxlLnRodW1iVXJsLHRodW1iU2l6ZTplLnBheWxvYWQuZmlsZS50aHVtYlNpemUsdGh1bWJGb3JtYXQ6ZS5wYXlsb2FkLmZpbGUudGh1bWJVcmwuc2xpY2UoZS5wYXlsb2FkLmZpbGUudGh1bWJVcmwubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCl9KSxjPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gaS5zZXRFbGVtZW50KHUpLGkuc2V0Tmlja0FuZEF2YXRhcihjKSxpLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKGkpKSx0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5zZXQoaS5jbGllbnRTZXF1ZW5jZSxlKSxpfX0se2tleTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10LGUuc2VuZGVyVGlueUlEPXRoaXMuZ2V0TXlUaW55SUQoKTt2YXIgbj1uZXcgWF8oZSksbz1uZXcgal8oe2RhdGE6ZS5wYXlsb2FkLmRhdGEsZGVzY3JpcHRpb246ZS5wYXlsb2FkLmRlc2NyaXB0aW9uLGV4dGVuc2lvbjplLnBheWxvYWQuZXh0ZW5zaW9ufSkscj10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQodCk7cmV0dXJuIG4uc2V0RWxlbWVudChvKSxuLnNldE5pY2tBbmRBdmF0YXIociksbi5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChuKSksbn19LHtrZXk6XCJjcmVhdGVGYWNlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPXQsZS5zZW5kZXJUaW55SUQ9dGhpcy5nZXRNeVRpbnlJRCgpO3ZhciBuPW5ldyBYXyhlKSxvPW5ldyBPXyhlLnBheWxvYWQpLHI9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHQpO3JldHVybiBuLnNldEVsZW1lbnQobyksbi5zZXROaWNrQW5kQXZhdGFyKHIpLG4uc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQobikpLG59fSx7a2V5OlwiY3JlYXRlTWVyZ2VyTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPXQsZS5zZW5kZXJUaW55SUQ9dGhpcy5nZXRNeVRpbnlJRCgpO3ZhciBuPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KSxvPW5ldyBYXyhlKSxyPW5ldyB6XyhlLnBheWxvYWQpO3JldHVybiBvLnNldEVsZW1lbnQociksby5zZXROaWNrQW5kQXZhdGFyKG4pLG8uc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQobykpLG8uc2V0UmVsYXlGbGFnKCEwKSxvfX0se2tleTpcImNyZWF0ZUZvcndhcmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50byxuPWUuY29udmVyc2F0aW9uVHlwZSxvPWUucHJpb3JpdHkscj1lLnBheWxvYWQsYT1lLm5lZWRSZWFkUmVjZWlwdCxzPXRoaXMuZ2V0TXlVc2VySUQoKSxpPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRChzKTtpZihyLnR5cGU9PT1Zbi5NU0dfR1JQX1RJUClyZXR1cm4gdW0obmV3IHJtKHtjb2RlOmxwLk1FU1NBR0VfRk9SV0FSRF9UWVBFX0lOVkFMSUQsbWVzc2FnZTpkcC5NRVNTQUdFX0ZPUldBUkRfVFlQRV9JTlZBTElEfSkpO3ZhciB1PXt0bzp0LGNvbnZlcnNhdGlvblR5cGU6bixjb252ZXJzYXRpb25JRDpcIlwiLmNvbmNhdChuKS5jb25jYXQodCkscHJpb3JpdHk6byxpc1BsYWNlTWVzc2FnZTowLHN0YXR1czpxYy5VTlNFTkQsY3VycmVudFVzZXI6cyxzZW5kZXJUaW55SUQ6dGhpcy5nZXRNeVRpbnlJRCgpLGNsb3VkQ3VzdG9tRGF0YTplLmNsb3VkQ3VzdG9tRGF0YXx8ci5jbG91ZEN1c3RvbURhdGF8fFwiXCIsbmVlZFJlYWRSZWNlaXB0OmF9LGM9bmV3IFhfKHUpO3JldHVybiBjLnNldEVsZW1lbnQoci5nZXRFbGVtZW50cygpWzBdKSxjLnNldE5pY2tBbmRBdmF0YXIoaSksYy5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChyKSksYy5zZXRSZWxheUZsYWcoITApLGN9fSx7a2V5OlwiZG93bmxvYWRNZXJnZXJNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21lcmdlck1lc3NhZ2VIYW5kbGVyLmRvd25sb2FkTWVyZ2VyTWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFwaXx8bGkpe2lmKGdpfHxsaSlpZih1dShlLnBheWxvYWQuZmlsZSkpe3ZhciB0PWUucGF5bG9hZC5maWxlO2UucGF5bG9hZC5maWxlPXtmaWxlczpbdF19fWVsc2UgaWYocHUoZS5wYXlsb2FkLmZpbGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pKXt2YXIgbj1lLnBheWxvYWQuZmlsZSxvPW4udGVtcEZpbGVzLHI9bi5maWxlcyxhPW51bGw7Z3Uobyk/YT1vWzBdOmd1KHIpJiYoYT1yWzBdKSxlLnBheWxvYWQuZmlsZT17ZmlsZXM6W2FdfX12YXIgcz10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj1zLGUuc2VuZGVyVGlueUlEPXRoaXMuZ2V0TXlUaW55SUQoKTt2YXIgaT1uZXcgWF8oZSksdT1uZXcgSF8oe3V1aWQ6dGhpcy5fZ2VuZXJhdGVVVUlEKCksZmlsZTplLnBheWxvYWQuZmlsZX0pLGM9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHMpO3JldHVybiBpLnNldEVsZW1lbnQodSksaS5zZXROaWNrQW5kQXZhdGFyKGMpLGkuc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQoaSkpLHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwLnNldChpLmNsaWVudFNlcXVlbmNlLGUpLGl9UWkud2FybihcIuWwj+eoi+W6j+ebruWJjeS4jeaUr+aMgemAieaLqeaWh+S7tu+8jCBjcmVhdGVGaWxlTWVzc2FnZSDmjqXlj6PkuI3lj6/nlKjvvIFcIil9fSx7a2V5OlwiY3JlYXRlTG9jYXRpb25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dCxlLnNlbmRlclRpbnlJRD10aGlzLmdldE15VGlueUlEKCk7dmFyIG49bmV3IFhfKGUpLG89bmV3IFlfKGUucGF5bG9hZCkscj10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQodCk7cmV0dXJuIG4uc2V0RWxlbWVudChvKSxuLnNldE5pY2tBbmRBdmF0YXIociksbi5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChuKSksbn19LHtrZXk6XCJfb25DYW5ub3RGaW5kTW9kdWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdW0oe2NvZGU6bHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6ZHAuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5Olwic2VuZE1lc3NhZ2VJbnN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbz10aGlzLHI9bnVsbDtzd2l0Y2goZS5jb252ZXJzYXRpb25UeXBlKXtjYXNlIFluLkNPTlZfQzJDOmlmKCEocj10aGlzLmdldE1vZHVsZShzbCkpKXJldHVybiB0aGlzLl9vbkNhbm5vdEZpbmRNb2R1bGUoKTticmVhaztjYXNlIFluLkNPTlZfR1JPVVA6aWYoIShyPXRoaXMuZ2V0TW9kdWxlKGlsKSkpcmV0dXJuIHRoaXMuX29uQ2Fubm90RmluZE1vZHVsZSgpO2lmKFB1KHtncm91cElEOmUudG99KSYmIWh1KHQpJiYhaHUodC5tZXNzYWdlQ29udHJvbEluZm8pKXJldHVybiB1bSh7Y29kZTpscC5NRVNTQUdFX0NPTlRST0xfSU5GT19GQUlMLG1lc3NhZ2U6ZHAuTUVTU0FHRV9DT05UUk9MX0lORk9fRkFJTH0pO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIHVtKHtjb2RlOmxwLk1FU1NBR0VfU0VORF9JTlZBTElEX0NPTlZFUlNBVElPTl9UWVBFLG1lc3NhZ2U6ZHAuTUVTU0FHRV9TRU5EX0lOVkFMSURfQ09OVkVSU0FUSU9OX1RZUEV9KX12YXIgYT10aGlzLmdldE1vZHVsZShfbCkscz10aGlzLmdldE1vZHVsZShpbCk7cmV0dXJuIGEudXBsb2FkKGUpLnRoZW4oKGZ1bmN0aW9uKCl7by5fZ2V0U2VuZE1lc3NhZ2VTcGVjaWZpZWRLZXkoZSk9PT1tcCYmby5nZXRNb2R1bGUoU2wpLmFkZFN1Y2Nlc3NDb3VudCh2cCk7cmV0dXJuIHMuZ3VhcmRGb3JBVkNoYXRSb29tKGUpLnRoZW4oKGZ1bmN0aW9uKCl7aWYoIWUuaXNTZW5kYWJsZSgpKXJldHVybiB1bSh7Y29kZTpscC5NRVNTQUdFX0ZJTEVfVVJMX0lTX0VNUFRZLG1lc3NhZ2U6ZHAuTUVTU0FHRV9GSUxFX1VSTF9JU19FTVBUWX0pO28uX2FkZFNlbmRNZXNzYWdlVG90YWxDb3VudChlKSxuPURhdGUubm93KCk7dmFyIGE9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJ1dGYtOFwiO2dpJiZkb2N1bWVudCYmKHQ9ZG9jdW1lbnQuY2hhcnNldC50b0xvd2VyQ2FzZSgpKTt2YXIgbixvLHI9MDtpZihvPWUubGVuZ3RoLFwidXRmLThcIj09PXR8fFwidXRmOFwiPT09dClmb3IodmFyIGE9MDthPG87YSsrKShuPWUuY29kZVBvaW50QXQoYSkpPD0xMjc/cis9MTpuPD0yMDQ3P3IrPTI6bjw9NjU1MzU/cis9Mzoocis9NCxhKyspO2Vsc2UgaWYoXCJ1dGYtMTZcIj09PXR8fFwidXRmMTZcIj09PXQpZm9yKHZhciBzPTA7czxvO3MrKykobj1lLmNvZGVQb2ludEF0KHMpKTw9NjU1MzU/cis9Mjoocis9NCxzKyspO2Vsc2Ugcj1lLnJlcGxhY2UoL1teXFx4MDAtXFx4ZmZdL2csXCJhYVwiKS5sZW5ndGg7cmV0dXJuIHJ9KEpTT04uc3RyaW5naWZ5KGUpKTtyZXR1cm4gZS50eXBlPT09WW4uTVNHX01FUkdFUiYmYT43ZTM/by5fbWVyZ2VyTWVzc2FnZUhhbmRsZXIudXBsb2FkTWVyZ2VyTWVzc2FnZShlLGEpLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciByPW8uX21lcmdlck1lc3NhZ2VIYW5kbGVyLmNyZWF0ZU1lcmdlck1lc3NhZ2VQYWNrKGUsdCxuKTtyZXR1cm4gby5yZXF1ZXN0KHIpfSkpOihvLmdldE1vZHVsZShsbCkuc2V0TWVzc2FnZVJhbmRvbShlKSxlLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0MyQ3x8ZS5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9HUk9VUD9yLnNlbmRNZXNzYWdlKGUsdCk6dm9pZCAwKX0pKS50aGVuKChmdW5jdGlvbihhKXt2YXIgcz1hLmRhdGEsaT1zLnRpbWUsdT1zLnNlcXVlbmNlLGM9cy5yZWFkUmVjZWlwdENvZGU7Y3UoYykmJjAhPT1jJiYobmV3IERwKEhwKS5zZXRNZXNzYWdlKFwiZnJvbTpcIi5jb25jYXQoZS5mcm9tLFwiIHRvOlwiKS5jb25jYXQoZS50byxcIiBzZXF1ZW5jZTpcIikuY29uY2F0KHUsXCIgcmVhZFJlY2VpcHRDb2RlOlwiKS5jb25jYXQoYykpLmVuZCgpLFFpLndhcm4oXCJcIi5jb25jYXQoby5fY2xhc3NOYW1lLFwiLnNlbmRNZXNzYWdlSW5zdGFuY2UgcmVhZFJlY2VpcHRDb2RlOlwiKS5jb25jYXQoYyxcIiBtZXNzYWdlOlwiKS5jb25jYXQob21bY10pKSk7by5fYWRkU2VuZE1lc3NhZ2VTdWNjZXNzQ291bnQoZSxuKSxvLl9tZXNzYWdlT3B0aW9uc01hcC5kZWxldGUoZS5jbGllbnRTZXF1ZW5jZSk7dmFyIGw9by5nZXRNb2R1bGUobGwpO2Uuc3RhdHVzPXFjLlNVQ0NFU1MsZS50aW1lPWk7dmFyIGQ9ITE7aWYoZS5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9HUk9VUCllLnNlcXVlbmNlPXU7ZWxzZSBpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0MyQyl7dmFyIHA9bC5nZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWUoZS5jb252ZXJzYXRpb25JRCk7aWYocCl7dmFyIGc9cC5uaWNrLGg9cC5hdmF0YXI7Zz09PWUubmljayYmaD09PWUuYXZhdGFyfHwoZD0hMCl9fWlmKGwuYXBwZW5kVG9NZXNzYWdlTGlzdChlKSxkJiZsLm1vZGlmeU1lc3NhZ2VTZW50QnlNZSh7Y29udmVyc2F0aW9uSUQ6ZS5jb252ZXJzYXRpb25JRCxsYXRlc3ROaWNrOmUubmljayxsYXRlc3RBdmF0YXI6ZS5hdmF0YXJ9KSxyLmlzT25saW5lTWVzc2FnZShlLHQpKWUuX29ubGluZU9ubHlGbGFnPSEwO2Vsc2V7dmFyIGY9ZTtwdSh0KSYmcHUodC5tZXNzYWdlQ29udHJvbEluZm8pJiYoITA9PT10Lm1lc3NhZ2VDb250cm9sSW5mby5leGNsdWRlZEZyb21MYXN0TWVzc2FnZSYmKGUuX2lzRXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2U9ITAsZj1cIlwiKSwhMD09PXQubWVzc2FnZUNvbnRyb2xJbmZvLmV4Y2x1ZGVkRnJvbVVucmVhZENvdW50JiYoZS5faXNFeGNsdWRlZEZyb21VbnJlYWRDb3VudD0hMCkpLGwub25NZXNzYWdlU2VudCh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6W3tjb252ZXJzYXRpb25JRDplLmNvbnZlcnNhdGlvbklELHVucmVhZENvdW50OjAsdHlwZTplLmNvbnZlcnNhdGlvblR5cGUsc3ViVHlwZTplLmNvbnZlcnNhdGlvblN1YlR5cGUsbGFzdE1lc3NhZ2U6Zn1dfSl9cmV0dXJuIGUuZ2V0UmVsYXlGbGFnKCl8fFwiVElNSW1hZ2VFbGVtXCIhPT1lLnR5cGV8fGp1KGUucGF5bG9hZC5pbWFnZUluZm9BcnJheSksUV8oe21lc3NhZ2U6ZX0pfSkpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtyZXR1cm4gby5fb25TZW5kTWVzc2FnZUZhaWxlZChlLHQpfSkpfX0se2tleTpcIl9vblNlbmRNZXNzYWdlRmFpbGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLnN0YXR1cz1xYy5GQUlMLHRoaXMuZ2V0TW9kdWxlKGxsKS5kZWxldGVNZXNzYWdlUmFuZG9tKGUpLHRoaXMuX2FkZFNlbmRNZXNzYWdlRmFpbENvdW50T25Vc2VyKGUsdCk7dmFyIG49bmV3IERwKEJwKTtyZXR1cm4gbi5zZXRNZXNzYWdlKFwidGpnX2lkOlwiLmNvbmNhdCh0aGlzLmdlbmVyYXRlVGpnSUQoZSksXCIgdHlwZTpcIikuY29uY2F0KGUudHlwZSxcIiBmcm9tOlwiKS5jb25jYXQoZS5mcm9tLFwiIHRvOlwiKS5jb25jYXQoZS50bykpLHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89UG4oZSwyKSxyPW9bMF0sYT1vWzFdO24uc2V0RXJyb3IodCxyLGEpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25TZW5kTWVzc2FnZUZhaWxlZCBlcnJvcjpcIiksdCksdW0obmV3IHJtKHtjb2RlOnQmJnQuY29kZT90LmNvZGU6bHAuTUVTU0FHRV9TRU5EX0ZBSUwsbWVzc2FnZTp0JiZ0Lm1lc3NhZ2U/dC5tZXNzYWdlOmRwLk1FU1NBR0VfU0VORF9GQUlMLGRhdGE6e21lc3NhZ2U6ZX19KSl9fSx7a2V5OlwiX2dldFNlbmRNZXNzYWdlU3BlY2lmaWVkS2V5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoW1luLk1TR19JTUFHRSxZbi5NU0dfQVVESU8sWW4uTVNHX1ZJREVPLFluLk1TR19GSUxFXS5pbmNsdWRlcyhlLnR5cGUpKXJldHVybiBtcDtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0MyQylyZXR1cm4gaHA7aWYoZS5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9HUk9VUCl7dmFyIHQ9dGhpcy5nZXRNb2R1bGUoaWwpLmdldExvY2FsR3JvdXBQcm9maWxlKGUudG8pO2lmKCF0KXJldHVybjt2YXIgbj10LnR5cGU7cmV0dXJuIHd1KG4pP19wOmZwfX19LHtrZXk6XCJfYWRkU2VuZE1lc3NhZ2VUb3RhbENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0U2VuZE1lc3NhZ2VTcGVjaWZpZWRLZXkoZSk7dCYmdGhpcy5nZXRNb2R1bGUoU2wpLmFkZFRvdGFsQ291bnQodCl9fSx7a2V5OlwiX2FkZFNlbmRNZXNzYWdlU3VjY2Vzc0NvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1NYXRoLmFicyhEYXRlLm5vdygpLXQpLG89dGhpcy5fZ2V0U2VuZE1lc3NhZ2VTcGVjaWZpZWRLZXkoZSk7aWYobyl7dmFyIHI9dGhpcy5nZXRNb2R1bGUoU2wpO3IuYWRkU3VjY2Vzc0NvdW50KG8pLHIuYWRkQ29zdChvLG4pfX19LHtrZXk6XCJfYWRkU2VuZE1lc3NhZ2VGYWlsQ291bnRPblVzZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuLG8scj10LmNvZGUsYT12b2lkIDA9PT1yPy0xOnIscz10aGlzLmdldE1vZHVsZShTbCksaT10aGlzLl9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKTtpPT09bXAmJihuPWEsbz0hMSx5di5pbmNsdWRlcyhuKSYmKG89ITApLG8pP3MuYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlKHZwKTpmdW5jdGlvbihlKXt2YXIgdD0hMTtyZXR1cm4gT2JqZWN0LnZhbHVlcyhNdikuaW5jbHVkZXMoZSkmJih0PSEwKSwoZT49MTIwMDAxJiZlPD0xM2U0fHxlPj0xMDEwMCYmZTw9MTAyMDApJiYodD0hMCksdH0oYSkmJmkmJnMuYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlKGkpfX0se2tleTpcInJlc2VuZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5pc1Jlc2VuZD0hMCxlLnN0YXR1cz1xYy5VTlNFTkQsZS5yYW5kb209U3UoKSxlLmNsaWVudFRpbWU9JGkoKSxlLmdlbmVyYXRlTWVzc2FnZUlEKCksdGhpcy5zZW5kTWVzc2FnZUluc3RhbmNlKGUpfX0se2tleTpcInJldm9rZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49bnVsbDtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0MyQyl7aWYoIShuPXRoaXMuZ2V0TW9kdWxlKHNsKSkpcmV0dXJuIHRoaXMuX29uQ2Fubm90RmluZE1vZHVsZSgpfWVsc2UgaWYoZS5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9HUk9VUCYmIShuPXRoaXMuZ2V0TW9kdWxlKGlsKSkpcmV0dXJuIHRoaXMuX29uQ2Fubm90RmluZE1vZHVsZSgpO3ZhciBvPW5ldyBEcChKcCk7cmV0dXJuIG8uc2V0TWVzc2FnZShcInRqZ19pZDpcIi5jb25jYXQodGhpcy5nZW5lcmF0ZVRqZ0lEKGUpLFwiIHR5cGU6XCIpLmNvbmNhdChlLnR5cGUsXCIgZnJvbTpcIikuY29uY2F0KGUuZnJvbSxcIiB0bzpcIikuY29uY2F0KGUudG8pKSxuLnJldm9rZU1lc3NhZ2UoZSkudGhlbigoZnVuY3Rpb24obil7dmFyIHI9bi5kYXRhLnJlY2FsbFJldExpc3Q7aWYoIVh1KHIpJiYwIT09clswXS5yZXRDb2RlKXt2YXIgYT1uZXcgcm0oe2NvZGU6clswXS5yZXRDb2RlLG1lc3NhZ2U6b21bclswXS5yZXRDb2RlXXx8ZHAuTUVTU0FHRV9SRVZPS0VfRkFJTCxkYXRhOnttZXNzYWdlOmV9fSk7cmV0dXJuIG8uc2V0Q29kZShhLmNvZGUpLnNldE1vcmVNZXNzYWdlKGEubWVzc2FnZSkuZW5kKCksdW0oYSl9cmV0dXJuIFFpLmluZm8oXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLnJldm9rZU1lc3NhZ2Ugb2suIElEOlwiKS5jb25jYXQoZS5JRCkpLGUuaXNSZXZva2VkPSEwLG8uZW5kKCksdC5nZXRNb2R1bGUobGwpLm9uTWVzc2FnZVJldm9rZWQoW2VdKSxRXyh7bWVzc2FnZTplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKG4pe3QucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9UG4oZSwyKSxyPXRbMF0sYT10WzFdO28uc2V0RXJyb3IobixyLGEpLmVuZCgpfSkpO3ZhciByPW5ldyBybSh7Y29kZTpuJiZuLmNvZGU/bi5jb2RlOmxwLk1FU1NBR0VfUkVWT0tFX0ZBSUwsbWVzc2FnZTpuJiZuLm1lc3NhZ2U/bi5tZXNzYWdlOmRwLk1FU1NBR0VfUkVWT0tFX0ZBSUwsZGF0YTp7bWVzc2FnZTplfX0pO3JldHVybiBRaS53YXJuKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5yZXZva2VNZXNzYWdlIGZhaWxlZC4gZXJyb3I6XCIpLG4pLHVtKHIpfSkpfX0se2tleTpcImRlbGV0ZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49bnVsbCxvPWVbMF0scj1vLmNvbnZlcnNhdGlvbklELGE9XCJcIixzPVtdLGk9W107aWYoby5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9DMkM/KG49dGhpcy5nZXRNb2R1bGUoc2wpLGE9ci5yZXBsYWNlKFluLkNPTlZfQzJDLFwiXCIpLGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZSYmZS5zdGF0dXM9PT1xYy5TVUNDRVNTJiZlLmNvbnZlcnNhdGlvbklEPT09ciYmKGUuX29ubGluZU9ubHlGbGFnfHxzLnB1c2goXCJcIi5jb25jYXQoZS5zZXF1ZW5jZSxcIl9cIikuY29uY2F0KGUucmFuZG9tLFwiX1wiKS5jb25jYXQoZS50aW1lKSksaS5wdXNoKGUpKX0pKSk6by5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9HUk9VUCYmKG49dGhpcy5nZXRNb2R1bGUoaWwpLGE9ci5yZXBsYWNlKFluLkNPTlZfR1JPVVAsXCJcIiksZS5mb3JFYWNoKChmdW5jdGlvbihlKXtlJiZlLnN0YXR1cz09PXFjLlNVQ0NFU1MmJmUuY29udmVyc2F0aW9uSUQ9PT1yJiYoZS5fb25saW5lT25seUZsYWd8fHMucHVzaChcIlwiLmNvbmNhdChlLnNlcXVlbmNlKSksaS5wdXNoKGUpKX0pKSksIW4pcmV0dXJuIHRoaXMuX29uQ2Fubm90RmluZE1vZHVsZSgpO2lmKDA9PT1zLmxlbmd0aClyZXR1cm4gdGhpcy5fb25NZXNzYWdlRGVsZXRlZChpKTtzLmxlbmd0aD4zMCYmKHM9cy5zbGljZSgwLDMwKSxpPWkuc2xpY2UoMCwzMCkpO3ZhciB1PW5ldyBEcChYcCk7cmV0dXJuIHUuc2V0TWVzc2FnZShcInRvOlwiLmNvbmNhdChhLFwiIGNvdW50OlwiKS5jb25jYXQocy5sZW5ndGgpKSxuLmRlbGV0ZU1lc3NhZ2Uoe3RvOmEsa2V5TGlzdDpzfSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIHUuZW5kKCksUWkuaW5mbyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZGVsZXRlTWVzc2FnZSBva1wiKSksdC5fb25NZXNzYWdlRGVsZXRlZChpKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07dS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZGVsZXRlTWVzc2FnZSBmYWlsZWQuIGVycm9yOlwiKSxlKTt2YXIgbj1uZXcgcm0oe2NvZGU6ZSYmZS5jb2RlP2UuY29kZTpscC5NRVNTQUdFX0RFTEVURV9GQUlMLG1lc3NhZ2U6ZSYmZS5tZXNzYWdlP2UubWVzc2FnZTpkcC5NRVNTQUdFX0RFTEVURV9GQUlMfSk7cmV0dXJuIHVtKG4pfSkpfX0se2tleTpcIl9vbk1lc3NhZ2VEZWxldGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKGxsKS5vbk1lc3NhZ2VEZWxldGVkKGUpLGltKHttZXNzYWdlTGlzdDplfSl9fSx7a2V5OlwiX2dlbmVyYXRlVVVJRFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRNb2R1bGUoZGwpO3JldHVyblwiXCIuY29uY2F0KGUuZ2V0U0RLQXBwSUQoKSxcIi1cIikuY29uY2F0KGUuZ2V0VXNlcklEKCksXCItXCIpLmNvbmNhdChmdW5jdGlvbigpe2Zvcih2YXIgZT1cIlwiLHQ9MzI7dD4wOy0tdCllKz1EdVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqTnUpXTtyZXR1cm4gZX0oKSl9fSx7a2V5OlwiZ2V0TWVzc2FnZU9wdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5nZXQoZSl9fSx7a2V5OlwiX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldE1vZHVsZShhbCkuZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKGUpfX0se2tleTpcIl9nZXROYW1lQ2FyZEJ5R3JvdXBJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUuY29udmVyc2F0aW9uVHlwZT09PVluLkNPTlZfR1JPVVApe3ZhciB0PXRoaXMuZ2V0TW9kdWxlKGlsKTtpZih0KXJldHVybiB0LmdldE15TmFtZUNhcmRCeUdyb3VwSUQoZS50byl9cmV0dXJuXCJcIn19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fbWVzc2FnZU9wdGlvbnNNYXAuY2xlYXIoKX19XSksbn0oTmwpLEV2PWZ1bmN0aW9uKGUpe0RuKG4sZSk7dmFyIHQ9d24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlBsdWdpbk1vZHVsZVwiLG8ucGx1Z2lucz17fSxvfXJldHVybiBFbihuLFt7a2V5OlwicmVnaXN0ZXJQbHVnaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO09iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3QucGx1Z2luc1tuXT1lW25dfSkpLG5ldyBEcChPcCkuc2V0TWVzc2FnZShcImtleT1cIi5jb25jYXQoT2JqZWN0LmtleXMoZSkpKS5lbmQoKX19LHtrZXk6XCJnZXRQbHVnaW5cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wbHVnaW5zW2VdfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKX19XSksbn0oTmwpLFR2PWZ1bmN0aW9uKGUpe0RuKG4sZSk7dmFyIHQ9d24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlN5bmNVbnJlYWRNZXNzYWdlTW9kdWxlXCIsby5fY29va2llPVwiXCIsby5fb25saW5lU3luY0ZsYWc9ITEsby5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKE1tLG8uX29uTG9naW5TdWNjZXNzLEduKG8pKSxvfXJldHVybiBFbihuLFt7a2V5OlwiX29uTG9naW5TdWNjZXNzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc3RhcnRTeW5jKHtjb29raWU6dGhpcy5fY29va2llLHN5bmNGbGFnOjAsaXNPbmxpbmVTeW5jOjB9KX19LHtrZXk6XCJfc3RhcnRTeW5jXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY29va2llLG89ZS5zeW5jRmxhZyxyPWUuaXNPbmxpbmVTeW5jO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3N0YXJ0U3luYyBjb29raWU6XCIpLmNvbmNhdChuLFwiIHN5bmNGbGFnOlwiKS5jb25jYXQobyxcIiBpc09ubGluZVN5bmM6XCIpLmNvbmNhdChyKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6T2wscmVxdWVzdERhdGE6e2Nvb2tpZTpuLHN5bmNGbGFnOm8saXNPbmxpbmVTeW5jOnJ9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhLG89bi5jb29raWUscj1uLnN5bmNGbGFnLGE9bi5ldmVudEFycmF5LHM9bi5tZXNzYWdlTGlzdCxpPW4uQzJDUmVtYWluaW5nVW5yZWFkTGlzdCx1PW4uQzJDUGFpclVucmVhZExpc3Q7aWYodC5fY29va2llPW8sWHUobykpO2Vsc2UgaWYoMD09PXJ8fDE9PT1yKXtpZihhKXQuZ2V0TW9kdWxlKE1sKS5vbk1lc3NhZ2Uoe2hlYWQ6e30sYm9keTp7ZXZlbnRBcnJheTphLGlzSW5zdGFudE1lc3NhZ2U6dC5fb25saW5lU3luY0ZsYWcsaXNTeW5jaW5nRW5kZWQ6ITF9fSk7dC5nZXRNb2R1bGUoc2wpLm9uTmV3QzJDTWVzc2FnZSh7ZGF0YUxpc3Q6cyxpc0luc3RhbnRNZXNzYWdlOiExLEMyQ1JlbWFpbmluZ1VucmVhZExpc3Q6aSxDMkNQYWlyVW5yZWFkTGlzdDp1fSksdC5fc3RhcnRTeW5jKHtjb29raWU6byxzeW5jRmxhZzpyLGlzT25saW5lU3luYzowfSl9ZWxzZSBpZigyPT09cil7aWYoYSl0LmdldE1vZHVsZShNbCkub25NZXNzYWdlKHtoZWFkOnt9LGJvZHk6e2V2ZW50QXJyYXk6YSxpc0luc3RhbnRNZXNzYWdlOnQuX29ubGluZVN5bmNGbGFnLGlzU3luY2luZ0VuZGVkOiEwfX0pO3QuZ2V0TW9kdWxlKHNsKS5vbk5ld0MyQ01lc3NhZ2Uoe2RhdGFMaXN0OnMsaXNJbnN0YW50TWVzc2FnZTp0Ll9vbmxpbmVTeW5jRmxhZyxDMkNSZW1haW5pbmdVbnJlYWRMaXN0OmksQzJDUGFpclVucmVhZExpc3Q6dX0pfX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7UWkuZXJyb3IoXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLl9zdGFydFN5bmMgZmFpbGVkLiBlcnJvcjpcIiksZSl9KSl9fSx7a2V5Olwic3RhcnRPbmxpbmVTeW5jXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnN0YXJ0T25saW5lU3luY1wiKSksdGhpcy5fb25saW5lU3luY0ZsYWc9ITAsdGhpcy5fc3RhcnRTeW5jKHtjb29raWU6dGhpcy5fY29va2llLHN5bmNGbGFnOjAsaXNPbmxpbmVTeW5jOjF9KX19LHtrZXk6XCJzdGFydFN5bmNPblJlY29ubmVjdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnN0YXJ0U3luY09uUmVjb25uZWN0ZWQuXCIpKSx0aGlzLl9vbmxpbmVTeW5jRmxhZz0hMCx0aGlzLl9zdGFydFN5bmMoe2Nvb2tpZTp0aGlzLl9jb29raWUsc3luY0ZsYWc6MCxpc09ubGluZVN5bmM6MH0pfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9vbmxpbmVTeW5jRmxhZz0hMSx0aGlzLl9jb29raWU9XCJcIn19XSksbn0oTmwpLEF2PXtyZXF1ZXN0Ont0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsZnJvbUFjY291bnQ6XCJGcm9tX0FjY291bnRcIix0bzpcIlRvX0FjY291bnRcIixmcm9tOlwiRnJvbV9BY2NvdW50XCIsZ3JvdXBJRDpcIkdyb3VwSWRcIixncm91cEF0VXNlcklEOlwiR3JvdXBBdF9BY2NvdW50XCIsZXh0ZW5zaW9uOlwiRXh0XCIsZGF0YTpcIkRhdGFcIixkZXNjcmlwdGlvbjpcIkRlc2NcIixlbGVtZW50czpcIk1zZ0JvZHlcIixzaXplVHlwZTpcIlR5cGVcIixkb3dubG9hZEZsYWc6XCJEb3dubG9hZF9GbGFnXCIsdGh1bWJVVUlEOlwiVGh1bWJVVUlEXCIsdmlkZW9VVUlEOlwiVmlkZW9VVUlEXCIscmVtb3RlQXVkaW9Vcmw6XCJVcmxcIixyZW1vdGVWaWRlb1VybDpcIlZpZGVvVXJsXCIsdmlkZW9Vcmw6XCJcIixpbWFnZVVybDpcIlVSTFwiLGZpbGVVcmw6XCJVcmxcIix1dWlkOlwiVVVJRFwiLHByaW9yaXR5OlwiTXNnUHJpb3JpdHlcIixyZWNlaXZlclVzZXJJRDpcIlRvX0FjY291bnRcIixyZWNlaXZlckdyb3VwSUQ6XCJHcm91cElkXCIsbWVzc2FnZVNlbmRlcjpcIlNlbmRlcklkXCIsbWVzc2FnZVJlY2VpdmVyOlwiUmVjZWl2ZXJJZFwiLG5pY2s6XCJGcm9tX0FjY291bnROaWNrXCIsYXZhdGFyOlwiRnJvbV9BY2NvdW50SGVhZHVybFwiLG1lc3NhZ2VOdW1iZXI6XCJNc2dOdW1cIixwYkRvd25sb2FkS2V5OlwiUGJNc2dLZXlcIixkb3dubG9hZEtleTpcIkpzb25Nc2dLZXlcIixhcHBsaWNhdGlvblR5cGU6XCJQZW5kZW5jeVR5cGVcIix1c2VySURMaXN0OlwiVG9fQWNjb3VudFwiLGdyb3VwTmFtZUxpc3Q6XCJHcm91cE5hbWVcIix1c2VySUQ6XCJUb19BY2NvdW50XCIsZ3JvdXBBdHRyaWJ1dGVMaXN0OlwiR3JvdXBBdHRyXCIsbWFpblNlcXVlbmNlOlwiQXR0ck1haW5TZXFcIixhdkNoYXRSb29tS2V5OlwiQnl0ZXNLZXlcIixhdHRyaWJ1dGVDb250cm9sOlwiQXR0ckNvbnRyb2xcIixzZXF1ZW5jZTpcInNlcVwiLG1lc3NhZ2VDb250cm9sSW5mbzpcIlNlbmRNc2dDb250cm9sXCIsdXBkYXRlU2VxdWVuY2U6XCJVcGRhdGVTZXFcIixjbGllbnRUaW1lOlwiTXNnQ2xpZW50VGltZVwiLHNlcXVlbmNlTGlzdDpcIk1zZ1NlcUxpc3RcIn0scmVzcG9uc2U6e01zZ1ByaW9yaXR5OlwicHJpb3JpdHlcIixUaHVtYlVVSUQ6XCJ0aHVtYlVVSURcIixWaWRlb1VVSUQ6XCJ2aWRlb1VVSURcIixEb3dubG9hZF9GbGFnOlwiZG93bmxvYWRGbGFnXCIsR3JvdXBJZDpcImdyb3VwSURcIixNZW1iZXJfQWNjb3VudDpcInVzZXJJRFwiLE1zZ0xpc3Q6XCJtZXNzYWdlTGlzdFwiLFN5bmNGbGFnOlwic3luY0ZsYWdcIixUb19BY2NvdW50OlwidG9cIixGcm9tX0FjY291bnQ6XCJmcm9tXCIsTXNnU2VxOlwic2VxdWVuY2VcIixNc2dSYW5kb206XCJyYW5kb21cIixNc2dUaW1lOlwidGltZVwiLE1zZ1RpbWVTdGFtcDpcInRpbWVcIixNc2dDb250ZW50OlwiY29udGVudFwiLE1zZ0JvZHk6XCJlbGVtZW50c1wiLEZyb21fQWNjb3VudE5pY2s6XCJuaWNrXCIsRnJvbV9BY2NvdW50SGVhZHVybDpcImF2YXRhclwiLEdyb3VwV2l0aGRyYXdJbmZvQXJyYXk6XCJyZXZva2VkSW5mb3NcIixHcm91cFJlYWRJbmZvQXJyYXk6XCJncm91cE1lc3NhZ2VSZWFkTm90aWNlXCIsTGFzdFJlYWRNc2dTZXE6XCJsYXN0TWVzc2FnZVNlcVwiLFdpdGhkcmF3QzJjTXNnTm90aWZ5OlwiYzJjTWVzc2FnZVJldm9rZWROb3RpZnlcIixDMmNXaXRoZHJhd0luZm9BcnJheTpcInJldm9rZWRJbmZvc1wiLEMyY1JlYWRlZFJlY2VpcHQ6XCJjMmNNZXNzYWdlUmVhZFJlY2VpcHRcIixSZWFkQzJjTXNnTm90aWZ5OlwiYzJjTWVzc2FnZVJlYWROb3RpY2VcIixMYXN0UmVhZFRpbWU6XCJwZWVyUmVhZFRpbWVcIixNc2dSYW5kOlwicmFuZG9tXCIsTXNnVHlwZTpcInR5cGVcIixNc2dTaG93OlwibWVzc2FnZVNob3dcIixOZXh0TXNnU2VxOlwibmV4dE1lc3NhZ2VTZXFcIixGYWNlVXJsOlwiYXZhdGFyXCIsUHJvZmlsZURhdGFNb2Q6XCJwcm9maWxlTW9kaWZ5XCIsUHJvZmlsZV9BY2NvdW50OlwidXNlcklEXCIsVmFsdWVCeXRlczpcInZhbHVlXCIsVmFsdWVOdW06XCJ2YWx1ZVwiLE5vdGljZVNlcTpcIm5vdGljZVNlcXVlbmNlXCIsTm90aWZ5U2VxOlwibm90aWZ5U2VxdWVuY2VcIixNc2dGcm9tX0FjY291bnRFeHRyYUluZm86XCJtZXNzYWdlRnJvbUFjY291bnRFeHRyYUluZm9ybWF0aW9uXCIsT3BlcmF0b3JfQWNjb3VudDpcIm9wZXJhdG9ySURcIixPcFR5cGU6XCJvcGVyYXRpb25UeXBlXCIsUmVwb3J0VHlwZTpcIm9wZXJhdGlvblR5cGVcIixVc2VySWQ6XCJ1c2VySURcIixVc2VyX0FjY291bnQ6XCJ1c2VySURcIixMaXN0X0FjY291bnQ6XCJ1c2VySURMaXN0XCIsTXNnT3BlcmF0b3JNZW1iZXJFeHRyYUluZm86XCJvcGVyYXRvckluZm9cIixNc2dNZW1iZXJFeHRyYUluZm86XCJtZW1iZXJJbmZvTGlzdFwiLEltYWdlVXJsOlwiYXZhdGFyXCIsTmlja05hbWU6XCJuaWNrXCIsTXNnR3JvdXBOZXdJbmZvOlwibmV3R3JvdXBQcm9maWxlXCIsTXNnQXBwRGVmaW5lZERhdGE6XCJncm91cEN1c3RvbUZpZWxkXCIsT3duZXJfQWNjb3VudDpcIm93bmVySURcIixHcm91cEZhY2VVcmw6XCJhdmF0YXJcIixHcm91cEludHJvZHVjdGlvbjpcImludHJvZHVjdGlvblwiLEdyb3VwTm90aWZpY2F0aW9uOlwibm90aWZpY2F0aW9uXCIsR3JvdXBBcHBseUpvaW5PcHRpb246XCJqb2luT3B0aW9uXCIsTXNnS2V5OlwibWVzc2FnZUtleVwiLEdyb3VwSW5mbzpcImdyb3VwUHJvZmlsZVwiLFNodXR1cFRpbWU6XCJtdXRlVGltZVwiLERlc2M6XCJkZXNjcmlwdGlvblwiLEV4dDpcImV4dGVuc2lvblwiLEdyb3VwQXRfQWNjb3VudDpcImdyb3VwQXRVc2VySURcIixNc2dOdW06XCJtZXNzYWdlTnVtYmVyXCIsUGJNc2dLZXk6XCJwYkRvd25sb2FkS2V5XCIsSnNvbk1zZ0tleTpcImRvd25sb2FkS2V5XCIsTXNnTW9kaWZpZWRGbGFnOlwiaXNNb2RpZmllZFwiLFBlbmRlbmN5SXRlbTpcImFwcGxpY2F0aW9uSXRlbVwiLFBlbmRlbmN5VHlwZTpcImFwcGxpY2F0aW9uVHlwZVwiLEFkZFRpbWU6XCJ0aW1lXCIsQWRkU291cmNlOlwic291cmNlXCIsQWRkV29yZGluZzpcIndvcmRpbmdcIixQcm9maWxlSW1JbWFnZTpcImF2YXRhclwiLFBlbmRlbmN5QWRkOlwiZnJpZW5kQXBwbGljYXRpb25BZGRlZFwiLEZyaWVuUGVuY3lkRGVsX0FjY291bnQ6XCJmcmllbmRBcHBsaWNhdGlvbkRlbGV0ZWRVc2VySURMaXN0XCIsUGVlcl9BY2NvdW50OlwidXNlcklEXCIsR3JvdXBBdHRyOlwiZ3JvdXBBdHRyaWJ1dGVMaXN0XCIsR3JvdXBBdHRyQXJ5OlwiZ3JvdXBBdHRyaWJ1dGVMaXN0XCIsQXR0ck1haW5TZXE6XCJtYWluU2VxdWVuY2VcIixzZXE6XCJzZXF1ZW5jZVwiLEdyb3VwQXR0ck9wdGlvbjpcImdyb3VwQXR0cmlidXRlT3B0aW9uXCIsQnl0ZXNDaGFuZ2VkS2V5czpcImNoYW5nZWRLZXlMaXN0XCIsR3JvdXBBdHRySW5mbzpcImdyb3VwQXR0cmlidXRlTGlzdFwiLEdyb3VwQXR0clNlcTpcIm1haW5TZXF1ZW5jZVwiLFB1c2hDaGFuZ2VkQXR0clZhbEZsYWc6XCJoYXNDaGFuZ2VkQXR0cmlidXRlSW5mb1wiLFN1YktleVNlcTpcInNlcXVlbmNlXCIsVmFsOlwidmFsdWVcIixNc2dHcm91cEZyb21DYXJkTmFtZTpcInNlbmRlck5hbWVDYXJkXCIsTXNnR3JvdXBGcm9tTmlja05hbWU6XCJzZW5kZXJOaWNrXCIsQzJjTmljazpcInBlZXJOaWNrXCIsQzJjSW1hZ2U6XCJwZWVyQXZhdGFyXCIsU2VuZE1zZ0NvbnRyb2w6XCJtZXNzYWdlQ29udHJvbEluZm9cIixOb0xhc3RNc2c6XCJleGNsdWRlZEZyb21MYXN0TWVzc2FnZVwiLE5vVW5yZWFkOlwiZXhjbHVkZWRGcm9tVW5yZWFkQ291bnRcIixVcGRhdGVTZXE6XCJ1cGRhdGVTZXF1ZW5jZVwiLE11dGVOb3RpZmljYXRpb25zOlwibXV0ZUZsYWdcIixNc2dDbGllbnRUaW1lOlwiY2xpZW50VGltZVwiLFRpbnlJZDpcInRpbnlJRFwiLEdyb3VwTXNnUmVjZWlwdExpc3Q6XCJyZWFkUmVjZWlwdExpc3RcIixSZWFkTnVtOlwicmVhZENvdW50XCIsVW5yZWFkTnVtOlwidW5yZWFkQ291bnRcIn0saWdub3JlS2V5V29yZDpbXCJDMkNcIixcIklEXCIsXCJVU1BcIl19LFN2PVB0LnRyaW07ZnVuY3Rpb24gRHYoZSx0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSYmIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIHRoZSBpbnB1dCB0byBiZSBgc3RyaW5nIHwgc3RyaW5nW11gXCIpO3Q9T2JqZWN0LmFzc2lnbih7cGFzY2FsQ2FzZTohMX0sdCk7dmFyIG47cmV0dXJuIDA9PT0oZT1BcnJheS5pc0FycmF5KGUpP2UubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmltKCl9KSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5sZW5ndGh9KSkuam9pbihcIi1cIik6ZS50cmltKCkpLmxlbmd0aD9cIlwiOjE9PT1lLmxlbmd0aD90LnBhc2NhbENhc2U/ZS50b1VwcGVyQ2FzZSgpOmUudG9Mb3dlckNhc2UoKTooZSE9PWUudG9Mb3dlckNhc2UoKSYmKGU9TnYoZSkpLGU9ZS5yZXBsYWNlKC9eW18uXFwtIF0rLyxcIlwiKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1tfLlxcLSBdKyhcXHd8JCkvZywoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSkpLnJlcGxhY2UoL1xcZCsoXFx3fCQpL2csKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvVXBwZXJDYXNlKCl9KSksbj1lLHQucGFzY2FsQ2FzZT9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK24uc2xpY2UoMSk6bil9a2Uoe3RhcmdldDpcIlN0cmluZ1wiLHByb3RvOiEwLGZvcmNlZDpmdW5jdGlvbihlKXtyZXR1cm4gcigoZnVuY3Rpb24oKXtyZXR1cm4hIVJ0W2VdKCl8fFwi4oCLwoXhoI5cIiE9XCLigIvCheGgjlwiW2VdKCl8fFJ0W2VdLm5hbWUhPT1lfSkpfShcInRyaW1cIil9LHt0cmltOmZ1bmN0aW9uKCl7cmV0dXJuIFN2KHRoaXMpfX0pO3ZhciBOdj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ITEsbj0hMSxvPSExLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGE9ZVtyXTt0JiYvW2EtekEtWl0vLnRlc3QoYSkmJmEudG9VcHBlckNhc2UoKT09PWE/KGU9ZS5zbGljZSgwLHIpK1wiLVwiK2Uuc2xpY2UociksdD0hMSxvPW4sbj0hMCxyKyspOm4mJm8mJi9bYS16QS1aXS8udGVzdChhKSYmYS50b0xvd2VyQ2FzZSgpPT09YT8oZT1lLnNsaWNlKDAsci0xKStcIi1cIitlLnNsaWNlKHItMSksbz1uLG49ITEsdD0hMCk6KHQ9YS50b0xvd2VyQ2FzZSgpPT09YSYmYS50b1VwcGVyQ2FzZSgpIT09YSxvPW4sbj1hLnRvVXBwZXJDYXNlKCk9PT1hJiZhLnRvTG93ZXJDYXNlKCkhPT1hKX1yZXR1cm4gZX07ZnVuY3Rpb24gQ3YoZSx0KXt2YXIgbj0wO3JldHVybiBmdW5jdGlvbiBlKHQsbyl7aWYoKytuPjEwMClyZXR1cm4gbi0tLHQ7aWYoZ3UodCkpe3ZhciByPXQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gZHUodCk/ZSh0LG8pOnR9KSk7cmV0dXJuIG4tLSxyfWlmKGR1KHQpKXt2YXIgYT0ocz10LGk9ZnVuY3Rpb24oZSx0KXtpZighTXUodCkpcmV0dXJuITE7aWYoKHI9dCkhPT1EdihyKSlmb3IodmFyIG49MDtuPEF2Lmlnbm9yZUtleVdvcmQubGVuZ3RoJiYhdC5pbmNsdWRlcyhBdi5pZ25vcmVLZXlXb3JkW25dKTtuKyspO3ZhciByO3JldHVybiBodShvW3RdKT9mdW5jdGlvbihlKXtyZXR1cm5cIk9QUE9DaGFubmVsSURcIj09PWU/ZTplWzBdLnRvVXBwZXJDYXNlKCkrRHYoZSkuc2xpY2UoMSl9KHQpOm9bdF19LHU9T2JqZWN0LmNyZWF0ZShudWxsKSxPYmplY3Qua2V5cyhzKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1pKHNbZV0sZSk7dCYmKHVbdF09c1tlXSl9KSksdSk7cmV0dXJuIGE9eHUoYSwoZnVuY3Rpb24odCxuKXtyZXR1cm4gZ3UodCl8fGR1KHQpP2UodCxvKTp0fSkpLG4tLSxhfXZhciBzLGksdX0oZSx0KX1mdW5jdGlvbiBrdihlLHQpe2lmKGd1KGUpKXJldHVybiBlLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGR1KGUpP2t2KGUsdCk6ZX0pKTtpZihkdShlKSl7dmFyIG49KG89ZSxyPWZ1bmN0aW9uKGUsbil7cmV0dXJuIGh1KHRbbl0pP0R2KG4pOnRbbl19LGE9e30sT2JqZWN0LmtleXMobykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7YVtyKG9bZV0sZSldPW9bZV19KSksYSk7cmV0dXJuIG49eHUobiwoZnVuY3Rpb24oZSl7cmV0dXJuIGd1KGUpfHxkdShlKT9rdihlLHQpOmV9KSl9dmFyIG8scixhfXZhciBMdj1cInVuZGVmaW5lZFwiIT10eXBlb2YgQXJyYXlCdWZmZXImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBEYXRhVmlldyxSdj1mdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lKXJldHVybiAwO3ZhciB0PWFlKGUpLG49aWUodCk7aWYodCE9PW4pdGhyb3cgUmFuZ2VFcnJvcihcIldyb25nIGxlbmd0aCBvciBpbmRleFwiKTtyZXR1cm4gbn0sT3Y9TWF0aC5hYnMsR3Y9TWF0aC5wb3csYnY9TWF0aC5mbG9vcix3dj1NYXRoLmxvZyxQdj1NYXRoLkxOMixVdj1mdW5jdGlvbihlLHQsbil7dmFyIG8scixhLHM9bmV3IEFycmF5KG4pLGk9OCpuLXQtMSx1PSgxPDxpKS0xLGM9dT4+MSxsPTIzPT09dD9HdigyLC0yNCktR3YoMiwtNzcpOjAsZD1lPDB8fDA9PT1lJiYxL2U8MD8xOjAscD0wO2ZvcigoZT1PdihlKSkhPWV8fGU9PT0xLzA/KHI9ZSE9ZT8xOjAsbz11KToobz1idih3dihlKS9QdiksZSooYT1HdigyLC1vKSk8MSYmKG8tLSxhKj0yKSwoZSs9bytjPj0xP2wvYTpsKkd2KDIsMS1jKSkqYT49MiYmKG8rKyxhLz0yKSxvK2M+PXU/KHI9MCxvPXUpOm8rYz49MT8ocj0oZSphLTEpKkd2KDIsdCksbys9Yyk6KHI9ZSpHdigyLGMtMSkqR3YoMix0KSxvPTApKTt0Pj04O3NbcCsrXT0yNTUmcixyLz0yNTYsdC09OCk7Zm9yKG89bzw8dHxyLGkrPXQ7aT4wO3NbcCsrXT0yNTUmbyxvLz0yNTYsaS09OCk7cmV0dXJuIHNbLS1wXXw9MTI4KmQsc30sRnY9ZnVuY3Rpb24oZSx0KXt2YXIgbixvPWUubGVuZ3RoLHI9OCpvLXQtMSxhPSgxPDxyKS0xLHM9YT4+MSxpPXItNyx1PW8tMSxjPWVbdS0tXSxsPTEyNyZjO2ZvcihjPj49NztpPjA7bD0yNTYqbCtlW3VdLHUtLSxpLT04KTtmb3Iobj1sJigxPDwtaSktMSxsPj49LWksaSs9dDtpPjA7bj0yNTYqbitlW3VdLHUtLSxpLT04KTtpZigwPT09bClsPTEtcztlbHNle2lmKGw9PT1hKXJldHVybiBuP05hTjpjPy0xLzA6MS8wO24rPUd2KDIsdCksbC09c31yZXR1cm4oYz8tMToxKSpuKkd2KDIsbC10KX0scXY9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PU9lKHRoaXMpLG49aWUodC5sZW5ndGgpLG89YXJndW1lbnRzLmxlbmd0aCxyPWxlKG8+MT9hcmd1bWVudHNbMV06dm9pZCAwLG4pLGE9bz4yP2FyZ3VtZW50c1syXTp2b2lkIDAscz12b2lkIDA9PT1hP246bGUoYSxuKTtzPnI7KXRbcisrXT1lO3JldHVybiB0fSx4dj1tZS5mLFZ2PUMuZixLdj1RLmdldCxCdj1RLnNldCxIdj1vLkFycmF5QnVmZmVyLGp2PUh2LFd2PW8uRGF0YVZpZXcsWXY9V3YmJld2LnByb3RvdHlwZSwkdj1PYmplY3QucHJvdG90eXBlLHp2PW8uUmFuZ2VFcnJvcixKdj1VdixYdj1GdixRdj1mdW5jdGlvbihlKXtyZXR1cm5bMjU1JmVdfSxadj1mdW5jdGlvbihlKXtyZXR1cm5bMjU1JmUsZT4+OCYyNTVdfSxlTT1mdW5jdGlvbihlKXtyZXR1cm5bMjU1JmUsZT4+OCYyNTUsZT4+MTYmMjU1LGU+PjI0JjI1NV19LHRNPWZ1bmN0aW9uKGUpe3JldHVybiBlWzNdPDwyNHxlWzJdPDwxNnxlWzFdPDw4fGVbMF19LG5NPWZ1bmN0aW9uKGUpe3JldHVybiBKdihlLDIzLDQpfSxvTT1mdW5jdGlvbihlKXtyZXR1cm4gSnYoZSw1Miw4KX0sck09ZnVuY3Rpb24oZSx0KXtWdihlLnByb3RvdHlwZSx0LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gS3YodGhpcylbdF19fSl9LGFNPWZ1bmN0aW9uKGUsdCxuLG8pe3ZhciByPVJ2KG4pLGE9S3YoZSk7aWYocit0PmEuYnl0ZUxlbmd0aCl0aHJvdyB6dihcIldyb25nIGluZGV4XCIpO3ZhciBzPUt2KGEuYnVmZmVyKS5ieXRlcyxpPXIrYS5ieXRlT2Zmc2V0LHU9cy5zbGljZShpLGkrdCk7cmV0dXJuIG8/dTp1LnJldmVyc2UoKX0sc009ZnVuY3Rpb24oZSx0LG4sbyxyLGEpe3ZhciBzPVJ2KG4pLGk9S3YoZSk7aWYocyt0PmkuYnl0ZUxlbmd0aCl0aHJvdyB6dihcIldyb25nIGluZGV4XCIpO2Zvcih2YXIgdT1LdihpLmJ1ZmZlcikuYnl0ZXMsYz1zK2kuYnl0ZU9mZnNldCxsPW8oK3IpLGQ9MDtkPHQ7ZCsrKXVbYytkXT1sW2E/ZDp0LWQtMV19O2lmKEx2KXtpZighcigoZnVuY3Rpb24oKXtIdigxKX0pKXx8IXIoKGZ1bmN0aW9uKCl7bmV3IEh2KC0xKX0pKXx8cigoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEh2LG5ldyBIdigxLjUpLG5ldyBIdihOYU4pLFwiQXJyYXlCdWZmZXJcIiE9SHYubmFtZX0pKSl7Zm9yKHZhciBpTSx1TT0oanY9ZnVuY3Rpb24oZSl7cmV0dXJuIGtyKHRoaXMsanYpLG5ldyBIdihSdihlKSl9KS5wcm90b3R5cGU9SHYucHJvdG90eXBlLGNNPXh2KEh2KSxsTT0wO2NNLmxlbmd0aD5sTTspKGlNPWNNW2xNKytdKWluIGp2fHxrKGp2LGlNLEh2W2lNXSk7dU0uY29uc3RydWN0b3I9anZ9YW4mJnp0KFl2KSE9PSR2JiZhbihZdiwkdik7dmFyIGRNPW5ldyBXdihuZXcganYoMikpLHBNPVl2LnNldEludDg7ZE0uc2V0SW50OCgwLDIxNDc0ODM2NDgpLGRNLnNldEludDgoMSwyMTQ3NDgzNjQ5KSwhZE0uZ2V0SW50OCgwKSYmZE0uZ2V0SW50OCgxKXx8RHIoWXYse3NldEludDg6ZnVuY3Rpb24oZSx0KXtwTS5jYWxsKHRoaXMsZSx0PDwyND4+MjQpfSxzZXRVaW50ODpmdW5jdGlvbihlLHQpe3BNLmNhbGwodGhpcyxlLHQ8PDI0Pj4yNCl9fSx7dW5zYWZlOiEwfSl9ZWxzZSBqdj1mdW5jdGlvbihlKXtrcih0aGlzLGp2LFwiQXJyYXlCdWZmZXJcIik7dmFyIHQ9UnYoZSk7QnYodGhpcyx7Ynl0ZXM6cXYuY2FsbChuZXcgQXJyYXkodCksMCksYnl0ZUxlbmd0aDp0fSksYXx8KHRoaXMuYnl0ZUxlbmd0aD10KX0sV3Y9ZnVuY3Rpb24oZSx0LG4pe2tyKHRoaXMsV3YsXCJEYXRhVmlld1wiKSxrcihlLGp2LFwiRGF0YVZpZXdcIik7dmFyIG89S3YoZSkuYnl0ZUxlbmd0aCxyPWFlKHQpO2lmKHI8MHx8cj5vKXRocm93IHp2KFwiV3Jvbmcgb2Zmc2V0XCIpO2lmKHIrKG49dm9pZCAwPT09bj9vLXI6aWUobikpPm8pdGhyb3cgenYoXCJXcm9uZyBsZW5ndGhcIik7QnYodGhpcyx7YnVmZmVyOmUsYnl0ZUxlbmd0aDpuLGJ5dGVPZmZzZXQ6cn0pLGF8fCh0aGlzLmJ1ZmZlcj1lLHRoaXMuYnl0ZUxlbmd0aD1uLHRoaXMuYnl0ZU9mZnNldD1yKX0sYSYmKHJNKGp2LFwiYnl0ZUxlbmd0aFwiKSxyTShXdixcImJ1ZmZlclwiKSxyTShXdixcImJ5dGVMZW5ndGhcIiksck0oV3YsXCJieXRlT2Zmc2V0XCIpKSxEcihXdi5wcm90b3R5cGUse2dldEludDg6ZnVuY3Rpb24oZSl7cmV0dXJuIGFNKHRoaXMsMSxlKVswXTw8MjQ+PjI0fSxnZXRVaW50ODpmdW5jdGlvbihlKXtyZXR1cm4gYU0odGhpcywxLGUpWzBdfSxnZXRJbnQxNjpmdW5jdGlvbihlKXt2YXIgdD1hTSh0aGlzLDIsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCk7cmV0dXJuKHRbMV08PDh8dFswXSk8PDE2Pj4xNn0sZ2V0VWludDE2OmZ1bmN0aW9uKGUpe3ZhciB0PWFNKHRoaXMsMixlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKTtyZXR1cm4gdFsxXTw8OHx0WzBdfSxnZXRJbnQzMjpmdW5jdGlvbihlKXtyZXR1cm4gdE0oYU0odGhpcyw0LGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApKX0sZ2V0VWludDMyOmZ1bmN0aW9uKGUpe3JldHVybiB0TShhTSh0aGlzLDQsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCkpPj4+MH0sZ2V0RmxvYXQzMjpmdW5jdGlvbihlKXtyZXR1cm4gWHYoYU0odGhpcyw0LGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApLDIzKX0sZ2V0RmxvYXQ2NDpmdW5jdGlvbihlKXtyZXR1cm4gWHYoYU0odGhpcyw4LGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApLDUyKX0sc2V0SW50ODpmdW5jdGlvbihlLHQpe3NNKHRoaXMsMSxlLFF2LHQpfSxzZXRVaW50ODpmdW5jdGlvbihlLHQpe3NNKHRoaXMsMSxlLFF2LHQpfSxzZXRJbnQxNjpmdW5jdGlvbihlLHQpe3NNKHRoaXMsMixlLFp2LHQsYXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDApfSxzZXRVaW50MTY6ZnVuY3Rpb24oZSx0KXtzTSh0aGlzLDIsZSxadix0LGFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwKX0sc2V0SW50MzI6ZnVuY3Rpb24oZSx0KXtzTSh0aGlzLDQsZSxlTSx0LGFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwKX0sc2V0VWludDMyOmZ1bmN0aW9uKGUsdCl7c00odGhpcyw0LGUsZU0sdCxhcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCl9LHNldEZsb2F0MzI6ZnVuY3Rpb24oZSx0KXtzTSh0aGlzLDQsZSxuTSx0LGFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwKX0sc2V0RmxvYXQ2NDpmdW5jdGlvbihlLHQpe3NNKHRoaXMsOCxlLG9NLHQsYXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDApfX0pO3RuKGp2LFwiQXJyYXlCdWZmZXJcIiksdG4oV3YsXCJEYXRhVmlld1wiKTt2YXIgZ009e0FycmF5QnVmZmVyOmp2LERhdGFWaWV3Old2fSxoTT1nTS5BcnJheUJ1ZmZlcixmTT1nTS5EYXRhVmlldyxfTT1oTS5wcm90b3R5cGUuc2xpY2UsbU09cigoZnVuY3Rpb24oKXtyZXR1cm4hbmV3IGhNKDIpLnNsaWNlKDEsdm9pZCAwKS5ieXRlTGVuZ3RofSkpO2tlKHt0YXJnZXQ6XCJBcnJheUJ1ZmZlclwiLHByb3RvOiEwLHVuc2FmZTohMCxmb3JjZWQ6bU19LHtzbGljZTpmdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PV9NJiZ2b2lkIDA9PT10KXJldHVybiBfTS5jYWxsKEQodGhpcyksZSk7Zm9yKHZhciBuPUQodGhpcykuYnl0ZUxlbmd0aCxvPWxlKGUsbikscj1sZSh2b2lkIDA9PT10P246dCxuKSxhPW5ldyhPcih0aGlzLGhNKSkoaWUoci1vKSkscz1uZXcgZk0odGhpcyksaT1uZXcgZk0oYSksdT0wO288cjspaS5zZXRVaW50OCh1Kysscy5nZXRVaW50OChvKyspKTtyZXR1cm4gYX19KTt2YXIgdk09U3RyaW5nLmZyb21DaGFyQ29kZSxNTT1TdHJpbmcuZnJvbUNvZGVQb2ludCx5TT0hIU1NJiYxIT1NTS5sZW5ndGg7a2Uoe3RhcmdldDpcIlN0cmluZ1wiLHN0YXQ6ITAsZm9yY2VkOnlNfSx7ZnJvbUNvZGVQb2ludDpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj1bXSxvPWFyZ3VtZW50cy5sZW5ndGgscj0wO28+cjspe2lmKHQ9K2FyZ3VtZW50c1tyKytdLGxlKHQsMTExNDExMSkhPT10KXRocm93IFJhbmdlRXJyb3IodCtcIiBpcyBub3QgYSB2YWxpZCBjb2RlIHBvaW50XCIpO24ucHVzaCh0PDY1NTM2P3ZNKHQpOnZNKDU1Mjk2KygodC09NjU1MzYpPj4xMCksdCUxMDI0KzU2MzIwKSl9cmV0dXJuIG4uam9pbihcIlwiKX19KTt2YXIgSU0sRU09Qy5mLFRNPW8uSW50OEFycmF5LEFNPVRNJiZUTS5wcm90b3R5cGUsU009by5VaW50OENsYW1wZWRBcnJheSxETT1TTSYmU00ucHJvdG90eXBlLE5NPVRNJiZ6dChUTSksQ009QU0mJnp0KEFNKSxrTT1PYmplY3QucHJvdG90eXBlLExNPWtNLmlzUHJvdG90eXBlT2YsUk09cWUoXCJ0b1N0cmluZ1RhZ1wiKSxPTT1LKFwiVFlQRURfQVJSQVlfVEFHXCIpLEdNPUx2JiYhIWFuJiZcIk9wZXJhXCIhPT1kdChvLm9wZXJhKSxiTT0hMSx3TT17SW50OEFycmF5OjEsVWludDhBcnJheToxLFVpbnQ4Q2xhbXBlZEFycmF5OjEsSW50MTZBcnJheToyLFVpbnQxNkFycmF5OjIsSW50MzJBcnJheTo0LFVpbnQzMkFycmF5OjQsRmxvYXQzMkFycmF5OjQsRmxvYXQ2NEFycmF5Ojh9LFBNPWZ1bmN0aW9uKGUpe3JldHVybiBfKGUpJiZNKHdNLGR0KGUpKX07Zm9yKElNIGluIHdNKW9bSU1dfHwoR009ITEpO2lmKCghR018fFwiZnVuY3Rpb25cIiE9dHlwZW9mIE5NfHxOTT09PUZ1bmN0aW9uLnByb3RvdHlwZSkmJihOTT1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcihcIkluY29ycmVjdCBpbnZvY2F0aW9uXCIpfSxHTSkpZm9yKElNIGluIHdNKW9bSU1dJiZhbihvW0lNXSxOTSk7aWYoKCFHTXx8IUNNfHxDTT09PWtNKSYmKENNPU5NLnByb3RvdHlwZSxHTSkpZm9yKElNIGluIHdNKW9bSU1dJiZhbihvW0lNXS5wcm90b3R5cGUsQ00pO2lmKEdNJiZ6dChETSkhPT1DTSYmYW4oRE0sQ00pLGEmJiFNKENNLFJNKSlmb3IoSU0gaW4gYk09ITAsRU0oQ00sUk0se2dldDpmdW5jdGlvbigpe3JldHVybiBfKHRoaXMpP3RoaXNbT01dOnZvaWQgMH19KSx3TSlvW0lNXSYmayhvW0lNXSxPTSxJTSk7dmFyIFVNPXtOQVRJVkVfQVJSQVlfQlVGRkVSX1ZJRVdTOkdNLFRZUEVEX0FSUkFZX1RBRzpiTSYmT00sYVR5cGVkQXJyYXk6ZnVuY3Rpb24oZSl7aWYoUE0oZSkpcmV0dXJuIGU7dGhyb3cgVHlwZUVycm9yKFwiVGFyZ2V0IGlzIG5vdCBhIHR5cGVkIGFycmF5XCIpfSxhVHlwZWRBcnJheUNvbnN0cnVjdG9yOmZ1bmN0aW9uKGUpe2lmKGFuKXtpZihMTS5jYWxsKE5NLGUpKXJldHVybiBlfWVsc2UgZm9yKHZhciB0IGluIHdNKWlmKE0od00sSU0pKXt2YXIgbj1vW3RdO2lmKG4mJihlPT09bnx8TE0uY2FsbChuLGUpKSlyZXR1cm4gZX10aHJvdyBUeXBlRXJyb3IoXCJUYXJnZXQgaXMgbm90IGEgdHlwZWQgYXJyYXkgY29uc3RydWN0b3JcIil9LGV4cG9ydFR5cGVkQXJyYXlNZXRob2Q6ZnVuY3Rpb24oZSx0LG4pe2lmKGEpe2lmKG4pZm9yKHZhciByIGluIHdNKXt2YXIgcz1vW3JdO3MmJk0ocy5wcm90b3R5cGUsZSkmJmRlbGV0ZSBzLnByb3RvdHlwZVtlXX1DTVtlXSYmIW58fFooQ00sZSxuP3Q6R00mJkFNW2VdfHx0KX19LGV4cG9ydFR5cGVkQXJyYXlTdGF0aWNNZXRob2Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLHM7aWYoYSl7aWYoYW4pe2lmKG4pZm9yKHIgaW4gd00pKHM9b1tyXSkmJk0ocyxlKSYmZGVsZXRlIHNbZV07aWYoTk1bZV0mJiFuKXJldHVybjt0cnl7cmV0dXJuIFooTk0sZSxuP3Q6R00mJlRNW2VdfHx0KX1jYXRjaCh6SSl7fX1mb3IociBpbiB3TSkhKHM9b1tyXSl8fHNbZV0mJiFufHxaKHMsZSx0KX19LGlzVmlldzpmdW5jdGlvbihlKXt2YXIgdD1kdChlKTtyZXR1cm5cIkRhdGFWaWV3XCI9PT10fHxNKHdNLHQpfSxpc1R5cGVkQXJyYXk6UE0sVHlwZWRBcnJheTpOTSxUeXBlZEFycmF5UHJvdG90eXBlOkNNfSxGTT1VTS5OQVRJVkVfQVJSQVlfQlVGRkVSX1ZJRVdTLHFNPW8uQXJyYXlCdWZmZXIseE09by5JbnQ4QXJyYXksVk09IUZNfHwhcigoZnVuY3Rpb24oKXt4TSgxKX0pKXx8IXIoKGZ1bmN0aW9uKCl7bmV3IHhNKC0xKX0pKXx8IU10KChmdW5jdGlvbihlKXtuZXcgeE0sbmV3IHhNKG51bGwpLG5ldyB4TSgxLjUpLG5ldyB4TShlKX0pLCEwKXx8cigoZnVuY3Rpb24oKXtyZXR1cm4gMSE9PW5ldyB4TShuZXcgcU0oMiksMSx2b2lkIDApLmxlbmd0aH0pKSxLTT1mdW5jdGlvbihlLHQpe3ZhciBuPWZ1bmN0aW9uKGUpe3ZhciB0PWFlKGUpO2lmKHQ8MCl0aHJvdyBSYW5nZUVycm9yKFwiVGhlIGFyZ3VtZW50IGNhbid0IGJlIGxlc3MgdGhhbiAwXCIpO3JldHVybiB0fShlKTtpZihuJXQpdGhyb3cgUmFuZ2VFcnJvcihcIldyb25nIG9mZnNldFwiKTtyZXR1cm4gbn0sQk09VU0uYVR5cGVkQXJyYXlDb25zdHJ1Y3RvcixITT1mdW5jdGlvbihlKXt2YXIgdCxuLG8scixhLHMsaT1PZShlKSx1PWFyZ3VtZW50cy5sZW5ndGgsYz11PjE/YXJndW1lbnRzWzFdOnZvaWQgMCxsPXZvaWQgMCE9PWMsZD1ndChpKTtpZihudWxsIT1kJiYhYXQoZCkpZm9yKHM9KGE9ZC5jYWxsKGkpKS5uZXh0LGk9W107IShyPXMuY2FsbChhKSkuZG9uZTspaS5wdXNoKHIudmFsdWUpO2ZvcihsJiZ1PjImJihjPVJlKGMsYXJndW1lbnRzWzJdLDIpKSxuPWllKGkubGVuZ3RoKSxvPW5ldyhCTSh0aGlzKSkobiksdD0wO24+dDt0Kyspb1t0XT1sP2MoaVt0XSx0KTppW3RdO3JldHVybiBvfTt0KChmdW5jdGlvbihlKXt2YXIgdD1tZS5mLG49SGUuZm9yRWFjaCxyPVEuZ2V0LHM9US5zZXQsaT1DLmYsdT1TLmYsbD1NYXRoLnJvdW5kLGQ9by5SYW5nZUVycm9yLHA9Z00uQXJyYXlCdWZmZXIsZz1nTS5EYXRhVmlldyxoPVVNLk5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1MsZj1VTS5UWVBFRF9BUlJBWV9UQUcsdj1VTS5UeXBlZEFycmF5LHk9VU0uVHlwZWRBcnJheVByb3RvdHlwZSxJPVVNLmFUeXBlZEFycmF5Q29uc3RydWN0b3IsRT1VTS5pc1R5cGVkQXJyYXksVD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wLG89dC5sZW5ndGgscj1uZXcoSShlKSkobyk7bz5uOylyW25dPXRbbisrXTtyZXR1cm4gcn0sQT1mdW5jdGlvbihlLHQpe2koZSx0LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzKVt0XX19KX0sRD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIHB8fFwiQXJyYXlCdWZmZXJcIj09KHQ9ZHQoZSkpfHxcIlNoYXJlZEFycmF5QnVmZmVyXCI9PXR9LE49ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRShlKSYmXCJzeW1ib2xcIiE9dHlwZW9mIHQmJnQgaW4gZSYmU3RyaW5nKCt0KT09U3RyaW5nKHQpfSxMPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE4oZSx0PW0odCwhMCkpP2MoMixlW3RdKTp1KGUsdCl9LFI9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiEoTihlLHQ9bSh0LCEwKSkmJl8obikmJk0obixcInZhbHVlXCIpKXx8TShuLFwiZ2V0XCIpfHxNKG4sXCJzZXRcIil8fG4uY29uZmlndXJhYmxlfHxNKG4sXCJ3cml0YWJsZVwiKSYmIW4ud3JpdGFibGV8fE0obixcImVudW1lcmFibGVcIikmJiFuLmVudW1lcmFibGU/aShlLHQsbik6KGVbdF09bi52YWx1ZSxlKX07YT8oaHx8KFMuZj1MLEMuZj1SLEEoeSxcImJ1ZmZlclwiKSxBKHksXCJieXRlT2Zmc2V0XCIpLEEoeSxcImJ5dGVMZW5ndGhcIiksQSh5LFwibGVuZ3RoXCIpKSxrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6IWh9LHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6TCxkZWZpbmVQcm9wZXJ0eTpSfSksZS5leHBvcnRzPWZ1bmN0aW9uKGUsYSx1KXt2YXIgYz1lLm1hdGNoKC9cXGQrJC8pWzBdLzgsbT1lKyh1P1wiQ2xhbXBlZFwiOlwiXCIpK1wiQXJyYXlcIixNPVwiZ2V0XCIrZSxJPVwic2V0XCIrZSxBPW9bbV0sUz1BLE49UyYmUy5wcm90b3R5cGUsQz17fSxMPWZ1bmN0aW9uKGUsdCl7aShlLHQse2dldDpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPXIoZSk7cmV0dXJuIG4udmlld1tNXSh0KmMrbi5ieXRlT2Zmc2V0LCEwKX0odGhpcyx0KX0sc2V0OmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlLHQsbil7dmFyIG89cihlKTt1JiYobj0obj1sKG4pKTwwPzA6bj4yNTU/MjU1OjI1NSZuKSxvLnZpZXdbSV0odCpjK28uYnl0ZU9mZnNldCxuLCEwKX0odGhpcyx0LGUpfSxlbnVtZXJhYmxlOiEwfSl9O2g/Vk0mJihTPWEoKGZ1bmN0aW9uKGUsdCxuLG8pe3JldHVybiBrcihlLFMsbSksdHIoXyh0KT9EKHQpP3ZvaWQgMCE9PW8/bmV3IEEodCxLTShuLGMpLG8pOnZvaWQgMCE9PW4/bmV3IEEodCxLTShuLGMpKTpuZXcgQSh0KTpFKHQpP1QoUyx0KTpITS5jYWxsKFMsdCk6bmV3IEEoUnYodCkpLGUsUyl9KSksYW4mJmFuKFMsdiksbih0KEEpLChmdW5jdGlvbihlKXtlIGluIFN8fGsoUyxlLEFbZV0pfSkpLFMucHJvdG90eXBlPU4pOihTPWEoKGZ1bmN0aW9uKGUsdCxuLG8pe2tyKGUsUyxtKTt2YXIgcixhLGksdT0wLGw9MDtpZihfKHQpKXtpZighRCh0KSlyZXR1cm4gRSh0KT9UKFMsdCk6SE0uY2FsbChTLHQpO3I9dCxsPUtNKG4sYyk7dmFyIGg9dC5ieXRlTGVuZ3RoO2lmKHZvaWQgMD09PW8pe2lmKGglYyl0aHJvdyBkKFwiV3JvbmcgbGVuZ3RoXCIpO2lmKChhPWgtbCk8MCl0aHJvdyBkKFwiV3JvbmcgbGVuZ3RoXCIpfWVsc2UgaWYoKGE9aWUobykqYykrbD5oKXRocm93IGQoXCJXcm9uZyBsZW5ndGhcIik7aT1hL2N9ZWxzZSBpPVJ2KHQpLHI9bmV3IHAoYT1pKmMpO2ZvcihzKGUse2J1ZmZlcjpyLGJ5dGVPZmZzZXQ6bCxieXRlTGVuZ3RoOmEsbGVuZ3RoOmksdmlldzpuZXcgZyhyKX0pO3U8aTspTChlLHUrKyl9KSksYW4mJmFuKFMsdiksTj1TLnByb3RvdHlwZT1rdCh5KSksTi5jb25zdHJ1Y3RvciE9PVMmJmsoTixcImNvbnN0cnVjdG9yXCIsUyksZiYmayhOLGYsbSksQ1ttXT1TLGtlKHtnbG9iYWw6ITAsZm9yY2VkOlMhPUEsc2hhbTohaH0sQyksXCJCWVRFU19QRVJfRUxFTUVOVFwiaW4gU3x8ayhTLFwiQllURVNfUEVSX0VMRU1FTlRcIixjKSxcIkJZVEVTX1BFUl9FTEVNRU5UXCJpbiBOfHxrKE4sXCJCWVRFU19QRVJfRUxFTUVOVFwiLGMpLENyKG0pfSk6ZS5leHBvcnRzPWZ1bmN0aW9uKCl7fX0pKShcIlVpbnQ4XCIsKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4sbyl7cmV0dXJuIGUodGhpcyx0LG4sbyl9fSkpO3ZhciBqTT1NYXRoLm1pbixXTT1bXS5jb3B5V2l0aGlufHxmdW5jdGlvbihlLHQpe3ZhciBuPU9lKHRoaXMpLG89aWUobi5sZW5ndGgpLHI9bGUoZSxvKSxhPWxlKHQsbykscz1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCxpPWpNKCh2b2lkIDA9PT1zP286bGUocyxvKSktYSxvLXIpLHU9MTtmb3IoYTxyJiZyPGEraSYmKHU9LTEsYSs9aS0xLHIrPWktMSk7aS0tID4wOylhIGluIG4/bltyXT1uW2FdOmRlbGV0ZSBuW3JdLHIrPXUsYSs9dTtyZXR1cm4gbn0sWU09VU0uYVR5cGVkQXJyYXk7KDAsVU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJjb3B5V2l0aGluXCIsKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIFdNLmNhbGwoWU0odGhpcyksZSx0LGFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwKX0pKTt2YXIgJE09SGUuZXZlcnksek09VU0uYVR5cGVkQXJyYXk7KDAsVU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJldmVyeVwiLChmdW5jdGlvbihlKXtyZXR1cm4gJE0oek0odGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9KSk7dmFyIEpNPVVNLmFUeXBlZEFycmF5OygwLFVNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwiZmlsbFwiLChmdW5jdGlvbihlKXtyZXR1cm4gcXYuYXBwbHkoSk0odGhpcyksYXJndW1lbnRzKX0pKTt2YXIgWE09SGUuZmlsdGVyLFFNPVVNLmFUeXBlZEFycmF5LFpNPVVNLmFUeXBlZEFycmF5Q29uc3RydWN0b3I7KDAsVU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJmaWx0ZXJcIiwoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVhNKFFNKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApLG49T3IodGhpcyx0aGlzLmNvbnN0cnVjdG9yKSxvPTAscj10Lmxlbmd0aCxhPW5ldyhaTShuKSkocik7cj5vOylhW29dPXRbbysrXTtyZXR1cm4gYX0pKTt2YXIgZXk9SGUuZmluZCx0eT1VTS5hVHlwZWRBcnJheTsoMCxVTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcImZpbmRcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGV5KHR5KHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSkpO3ZhciBueT1IZS5maW5kSW5kZXgsb3k9VU0uYVR5cGVkQXJyYXk7KDAsVU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJmaW5kSW5kZXhcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIG55KG95KHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSkpO3ZhciByeT1IZS5mb3JFYWNoLGF5PVVNLmFUeXBlZEFycmF5OygwLFVNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwiZm9yRWFjaFwiLChmdW5jdGlvbihlKXtyeShheSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0pKTt2YXIgc3k9cGUuaW5jbHVkZXMsaXk9VU0uYVR5cGVkQXJyYXk7KDAsVU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJpbmNsdWRlc1wiLChmdW5jdGlvbihlKXtyZXR1cm4gc3koaXkodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9KSk7dmFyIHV5PXBlLmluZGV4T2YsY3k9VU0uYVR5cGVkQXJyYXk7KDAsVU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJpbmRleE9mXCIsKGZ1bmN0aW9uKGUpe3JldHVybiB1eShjeSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0pKTt2YXIgbHk9cWUoXCJpdGVyYXRvclwiKSxkeT1vLlVpbnQ4QXJyYXkscHk9Ym8udmFsdWVzLGd5PWJvLmtleXMsaHk9Ym8uZW50cmllcyxmeT1VTS5hVHlwZWRBcnJheSxfeT1VTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kLHZ5PWR5JiZkeS5wcm90b3R5cGVbbHldLE15PSEhdnkmJihcInZhbHVlc1wiPT12eS5uYW1lfHxudWxsPT12eS5uYW1lKSx5eT1mdW5jdGlvbigpe3JldHVybiBweS5jYWxsKGZ5KHRoaXMpKX07X3koXCJlbnRyaWVzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGh5LmNhbGwoZnkodGhpcykpfSkpLF95KFwia2V5c1wiLChmdW5jdGlvbigpe3JldHVybiBneS5jYWxsKGZ5KHRoaXMpKX0pKSxfeShcInZhbHVlc1wiLHl5LCFNeSksX3kobHkseXksIU15KTt2YXIgSXk9VU0uYVR5cGVkQXJyYXksRXk9W10uam9pbjsoMCxVTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcImpvaW5cIiwoZnVuY3Rpb24oZSl7cmV0dXJuIEV5LmFwcGx5KEl5KHRoaXMpLGFyZ3VtZW50cyl9KSk7dmFyIFR5PVVNLmFUeXBlZEFycmF5OygwLFVNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwibGFzdEluZGV4T2ZcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIEJfLmFwcGx5KFR5KHRoaXMpLGFyZ3VtZW50cyl9KSk7dmFyIEF5PUhlLm1hcCxTeT1VTS5hVHlwZWRBcnJheSxEeT1VTS5hVHlwZWRBcnJheUNvbnN0cnVjdG9yOygwLFVNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwibWFwXCIsKGZ1bmN0aW9uKGUpe3JldHVybiBBeShTeSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLChmdW5jdGlvbihlLHQpe3JldHVybiBuZXcoRHkoT3IoZSxlLmNvbnN0cnVjdG9yKSkpKHQpfSkpfSkpO3ZhciBOeT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuLG8scil7TGUobik7dmFyIGE9T2UodCkscz1nKGEpLGk9aWUoYS5sZW5ndGgpLHU9ZT9pLTE6MCxjPWU/LTE6MTtpZihvPDIpZm9yKDs7KXtpZih1IGluIHMpe3I9c1t1XSx1Kz1jO2JyZWFrfWlmKHUrPWMsZT91PDA6aTw9dSl0aHJvdyBUeXBlRXJyb3IoXCJSZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlXCIpfWZvcig7ZT91Pj0wOmk+dTt1Kz1jKXUgaW4gcyYmKHI9bihyLHNbdV0sdSxhKSk7cmV0dXJuIHJ9fSxDeT17bGVmdDpOeSghMSkscmlnaHQ6TnkoITApfSxreT1DeS5sZWZ0LEx5PVVNLmFUeXBlZEFycmF5OygwLFVNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwicmVkdWNlXCIsKGZ1bmN0aW9uKGUpe3JldHVybiBreShMeSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGgsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSkpO3ZhciBSeT1DeS5yaWdodCxPeT1VTS5hVHlwZWRBcnJheTsoMCxVTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcInJlZHVjZVJpZ2h0XCIsKGZ1bmN0aW9uKGUpe3JldHVybiBSeShPeSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGgsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSkpO3ZhciBHeT1VTS5hVHlwZWRBcnJheSxieT1VTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kLHd5PU1hdGguZmxvb3I7YnkoXCJyZXZlcnNlXCIsKGZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9R3kodGhpcykubGVuZ3RoLG49d3kodC8yKSxvPTA7bzxuOyllPXRoaXNbb10sdGhpc1tvKytdPXRoaXNbLS10XSx0aGlzW3RdPWU7cmV0dXJuIHRoaXN9KSk7dmFyIFB5PVVNLmFUeXBlZEFycmF5OygwLFVNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwic2V0XCIsKGZ1bmN0aW9uKGUpe1B5KHRoaXMpO3ZhciB0PUtNKGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLDEpLG49dGhpcy5sZW5ndGgsbz1PZShlKSxyPWllKG8ubGVuZ3RoKSxhPTA7aWYocit0Pm4pdGhyb3cgUmFuZ2VFcnJvcihcIldyb25nIGxlbmd0aFwiKTtmb3IoO2E8cjspdGhpc1t0K2FdPW9bYSsrXX0pLHIoKGZ1bmN0aW9uKCl7bmV3IEludDhBcnJheSgxKS5zZXQoe30pfSkpKTt2YXIgVXk9VU0uYVR5cGVkQXJyYXksRnk9VU0uYVR5cGVkQXJyYXlDb25zdHJ1Y3RvcixxeT1bXS5zbGljZTsoMCxVTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcInNsaWNlXCIsKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXF5LmNhbGwoVXkodGhpcyksZSx0KSxvPU9yKHRoaXMsdGhpcy5jb25zdHJ1Y3Rvcikscj0wLGE9bi5sZW5ndGgscz1uZXcoRnkobykpKGEpO2E+cjspc1tyXT1uW3IrK107cmV0dXJuIHN9KSxyKChmdW5jdGlvbigpe25ldyBJbnQ4QXJyYXkoMSkuc2xpY2UoKX0pKSk7dmFyIHh5PUhlLnNvbWUsVnk9VU0uYVR5cGVkQXJyYXk7KDAsVU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJzb21lXCIsKGZ1bmN0aW9uKGUpe3JldHVybiB4eShWeSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0pKTt2YXIgS3k9VU0uYVR5cGVkQXJyYXksQnk9W10uc29ydDsoMCxVTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcInNvcnRcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIEJ5LmNhbGwoS3kodGhpcyksZSl9KSk7dmFyIEh5PVVNLmFUeXBlZEFycmF5OygwLFVNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwic3ViYXJyYXlcIiwoZnVuY3Rpb24oZSx0KXt2YXIgbj1IeSh0aGlzKSxvPW4ubGVuZ3RoLHI9bGUoZSxvKTtyZXR1cm4gbmV3KE9yKG4sbi5jb25zdHJ1Y3RvcikpKG4uYnVmZmVyLG4uYnl0ZU9mZnNldCtyKm4uQllURVNfUEVSX0VMRU1FTlQsaWUoKHZvaWQgMD09PXQ/bzpsZSh0LG8pKS1yKSl9KSk7dmFyIGp5PW8uSW50OEFycmF5LFd5PVVNLmFUeXBlZEFycmF5LFl5PVVNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QsJHk9W10udG9Mb2NhbGVTdHJpbmcsenk9W10uc2xpY2UsSnk9ISFqeSYmcigoZnVuY3Rpb24oKXskeS5jYWxsKG5ldyBqeSgxKSl9KSk7WXkoXCJ0b0xvY2FsZVN0cmluZ1wiLChmdW5jdGlvbigpe3JldHVybiAkeS5hcHBseShKeT96eS5jYWxsKFd5KHRoaXMpKTpXeSh0aGlzKSxhcmd1bWVudHMpfSkscigoZnVuY3Rpb24oKXtyZXR1cm5bMSwyXS50b0xvY2FsZVN0cmluZygpIT1uZXcgankoWzEsMl0pLnRvTG9jYWxlU3RyaW5nKCl9KSl8fCFyKChmdW5jdGlvbigpe2p5LnByb3RvdHlwZS50b0xvY2FsZVN0cmluZy5jYWxsKFsxLDJdKX0pKSk7dmFyIFh5PVVNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QsUXk9by5VaW50OEFycmF5LFp5PVF5JiZReS5wcm90b3R5cGV8fHt9LGVJPVtdLnRvU3RyaW5nLHRJPVtdLmpvaW47cigoZnVuY3Rpb24oKXtlSS5jYWxsKHt9KX0pKSYmKGVJPWZ1bmN0aW9uKCl7cmV0dXJuIHRJLmNhbGwodGhpcyl9KTt2YXIgbkk9WnkudG9TdHJpbmchPWVJO1h5KFwidG9TdHJpbmdcIixlSSxuSSk7dmFyIG9JPVN0cmluZy5mcm9tQ2hhckNvZGUsckk9ZnVuY3Rpb24oZSl7dmFyIHQ9MHxlLmNoYXJDb2RlQXQoMCk7aWYoNTUyOTY8PXQpaWYodDw1NjMyMCl7dmFyIG49MHxlLmNoYXJDb2RlQXQoMSk7aWYoNTYzMjA8PW4mJm48PTU3MzQzKXtpZigodD0odDw8MTApK24tNTY2MTM4ODh8MCk+NjU1MzUpcmV0dXJuIG9JKDI0MHx0Pj4+MTgsMTI4fHQ+Pj4xMiY2MywxMjh8dD4+PjYmNjMsMTI4fDYzJnQpfWVsc2UgdD02NTUzM31lbHNlIHQ8PTU3MzQzJiYodD02NTUzMyk7cmV0dXJuIHQ8PTIwNDc/b0koMTkyfHQ+Pj42LDEyOHw2MyZ0KTpvSSgyMjR8dD4+PjEyLDEyOHx0Pj4+NiY2MywxMjh8NjMmdCl9LGFJPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD12b2lkIDA9PT1lP1wiXCI6KFwiXCIrZSkucmVwbGFjZSgvW1xceDgwLVxcdUQ3ZmZcXHVEQzAwLVxcdUZGRkZdfFtcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0/L2csckkpLG49MHx0Lmxlbmd0aCxvPW5ldyBVaW50OEFycmF5KG4pLHI9MDtyPG47cj1yKzF8MClvW3JdPTB8dC5jaGFyQ29kZUF0KHIpO3JldHVybiBvfSxzST1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZSksbj1cIlwiLG89MCxyPXQubGVuZ3RoO288cjspe3ZhciBhPXRbb10scz0wLGk9MDtpZihhPD0xMjc/KHM9MCxpPTI1NSZhKTphPD0yMjM/KHM9MSxpPTMxJmEpOmE8PTIzOT8ocz0yLGk9MTUmYSk6YTw9MjQ0JiYocz0zLGk9NyZhKSxyLW8tcz4wKWZvcih2YXIgdT0wO3U8czspaT1pPDw2fDYzJihhPXRbbyt1KzFdKSx1Kz0xO2Vsc2UgaT02NTUzMyxzPXItbztuKz1TdHJpbmcuZnJvbUNvZGVQb2ludChpKSxvKz1zKzF9cmV0dXJuIG59LGlJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX2hhbmRsZXI9dDt2YXIgbj10LmdldFVSTCgpO2lmKHRoaXMuX3NvY2tldD1udWxsLHRoaXMuX3dvcmtlclNvY2tldD1udWxsLHRoaXMuX2lkPVN1KCksdGhpcy5faGFuZGxlci5nZXRJc1dvcmtlckVuYWJsZWQoKSl7dmFyIG89VVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbJztsZXQgX3NvY2tldCA9IG51bGw7b25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHsgIGlmIChldmVudC5kYXRhLmNtZCA9PT0gXCJzdGFydFwiKSB7ICAgIGNvbnN0IHVybCA9IGV2ZW50LmRhdGEudXJsOyAgICBfc29ja2V0ID0gbmV3IFdlYlNvY2tldCh1cmwpOyAgICBfc29ja2V0LmJpbmFyeVR5cGUgPSBcImFycmF5YnVmZmVyXCI7ICAgIF9zb2NrZXQub25vcGVuID0gZnVuY3Rpb24oKSB7ICAgICAgcG9zdE1lc3NhZ2UoeyBjYWxsYmFjazogXCJvbk9wZW5cIiB9KTsgICAgfTsgICAgX3NvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24oZSkgeyAgICAgIHBvc3RNZXNzYWdlKHsgY2FsbGJhY2s6IFwib25PcGVuXCIsIGU6IHsgY29kZTogZS5jb2RlLCByZWFzb246IGUucmVhc29uIH0gfSk7ICAgIH07ICAgIF9zb2NrZXQub25tZXNzYWdlID0gZnVuY3Rpb24oZSkgeyAgICAgIHBvc3RNZXNzYWdlKHsgY2FsbGJhY2s6IFwib25NZXNzYWdlXCIsIGRhdGE6IGUuZGF0YSB9KTsgICAgfTsgICAgX3NvY2tldC5vbmVycm9yID0gZnVuY3Rpb24oZSkgeyAgICAgIHBvc3RNZXNzYWdlKHsgY2FsbGJhY2s6IFwib25FcnJvclwiLCBlOiB7IGlzVHJ1c3RlZDogXCJ0cnVlXCIgfSB9KTsgICAgfTsgIH0gZWxzZSBpZiAoZXZlbnQuZGF0YS5jbWQgPT09IFwic2VuZE1lc3NhZ2VcIikgeyAgICBpZiAoX3NvY2tldCAhPT0gbnVsbCkgeyAgICAgIF9zb2NrZXQuc2VuZChldmVudC5kYXRhLmRhdGEpOyAgICB9ICB9IGVsc2UgaWYgKGV2ZW50LmRhdGEuY21kID09PSBcInN0b3BcIikgeyAgICBpZiAoX3NvY2tldCAhPT0gbnVsbCkgeyAgICAgIF9zb2NrZXQuY2xvc2UoZXZlbnQuZGF0YS5jb2RlKTsgICAgICBfc29ja2V0ID0gbnVsbDsgICAgfSAgfX07J10se3R5cGU6XCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0OyBjaGFyc2V0PXV0Zi04XCJ9KSk7dGhpcy5fd29ya2VyU29ja2V0PW5ldyBXb3JrZXIobyk7dmFyIHI9dGhpczt0aGlzLl93b3JrZXJTb2NrZXQub25tZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YSxuPXQuY2FsbGJhY2ssbz10LmU7XCJvbk9wZW5cIj09PW4/ci5fb25PcGVuKCk6XCJvbkNsb3NlXCI9PT1uP3IuX29uQ2xvc2Uobyk6XCJvbkVycm9yXCI9PT1uP3IuX29uRXJyb3Iobyk6XCJvbk1lc3NhZ2VcIj09PW4mJnIuX29uTWVzc2FnZShlLmRhdGEpfSx0aGlzLl93b3JrZXJTb2NrZXQucG9zdE1lc3NhZ2Uoe2NtZDpcInN0YXJ0XCIsaWQ6dGhpcy5faWQsdXJsOm59KX1lbHNlIHBpP2NpPyhoaS5jb25uZWN0U29ja2V0KHt1cmw6bixoZWFkZXI6e1wiY29udGVudC10eXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uXCJ9fSksaGkub25Tb2NrZXRDbG9zZSh0aGlzLl9vbkNsb3NlLmJpbmQodGhpcykpLGhpLm9uU29ja2V0T3Blbih0aGlzLl9vbk9wZW4uYmluZCh0aGlzKSksaGkub25Tb2NrZXRNZXNzYWdlKHRoaXMuX29uTWVzc2FnZS5iaW5kKHRoaXMpKSxoaS5vblNvY2tldEVycm9yKHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKSkpOih0aGlzLl9zb2NrZXQ9aGkuY29ubmVjdFNvY2tldCh7dXJsOm4saGVhZGVyOntcImNvbnRlbnQtdHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwifSxjb21wbGV0ZTpmdW5jdGlvbigpe319KSx0aGlzLl9zb2NrZXQub25DbG9zZSh0aGlzLl9vbkNsb3NlLmJpbmQodGhpcykpLHRoaXMuX3NvY2tldC5vbk9wZW4odGhpcy5fb25PcGVuLmJpbmQodGhpcykpLHRoaXMuX3NvY2tldC5vbk1lc3NhZ2UodGhpcy5fb25NZXNzYWdlLmJpbmQodGhpcykpLHRoaXMuX3NvY2tldC5vbkVycm9yKHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKSkpOmdpJiYodGhpcy5fc29ja2V0PW5ldyBXZWJTb2NrZXQobiksdGhpcy5fc29ja2V0LmJpbmFyeVR5cGU9XCJhcnJheWJ1ZmZlclwiLHRoaXMuX3NvY2tldC5vbm9wZW49dGhpcy5fb25PcGVuLmJpbmQodGhpcyksdGhpcy5fc29ja2V0Lm9ubWVzc2FnZT10aGlzLl9vbk1lc3NhZ2UuYmluZCh0aGlzKSx0aGlzLl9zb2NrZXQub25jbG9zZT10aGlzLl9vbkNsb3NlLmJpbmQodGhpcyksdGhpcy5fc29ja2V0Lm9uZXJyb3I9dGhpcy5fb25FcnJvci5iaW5kKHRoaXMpKTt0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWU9dC5jYW5JVXNlQmluYXJ5RnJhbWUoKX1yZXR1cm4gRW4oZSxbe2tleTpcImdldElEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9fSx7a2V5OlwiX29uT3BlblwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faGFuZGxlci5vbk9wZW4oe2lkOnRoaXMuX2lkfSl9fSx7a2V5OlwiX29uQ2xvc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVyLm9uQ2xvc2Uoe2lkOnRoaXMuX2lkLGU6ZX0pfX0se2tleTpcIl9vbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVyLm9uTWVzc2FnZSh7ZGF0YTp0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWU/c0koZS5kYXRhKTplLmRhdGF9KX19LHtrZXk6XCJfb25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2hhbmRsZXIub25FcnJvcih7aWQ6dGhpcy5faWQsZTplfSl9fSx7a2V5Olwic2V0SXNXb3JrZXJFbmFibGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5faXNXb3JrZXJFbmFibGVkPSEwfX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5fd29ya2VyU29ja2V0JiYodGhpcy5fd29ya2VyU29ja2V0LnBvc3RNZXNzYWdlKHtjbWQ6XCJzdG9wXCIsY29kZTplfSksdGhpcy5fd29ya2VyU29ja2V0LnRlcm1pbmF0ZSgpLHRoaXMuX3dvcmtlclNvY2tldD1udWxsKSxjaSlyZXR1cm4gaGkub2ZmU29ja2V0Q2xvc2UoKSxoaS5vZmZTb2NrZXRNZXNzYWdlKCksaGkub2ZmU29ja2V0T3BlbigpLGhpLm9mZlNvY2tldEVycm9yKCksdm9pZCBoaS5jbG9zZVNvY2tldCgpO3RoaXMuX3NvY2tldCYmKHBpPyh0aGlzLl9zb2NrZXQub25DbG9zZSgoZnVuY3Rpb24oKXt9KSksdGhpcy5fc29ja2V0Lm9uT3BlbigoZnVuY3Rpb24oKXt9KSksdGhpcy5fc29ja2V0Lm9uTWVzc2FnZSgoZnVuY3Rpb24oKXt9KSksdGhpcy5fc29ja2V0Lm9uRXJyb3IoKGZ1bmN0aW9uKCl7fSkpKTpnaSYmKHRoaXMuX3NvY2tldC5vbm9wZW49bnVsbCx0aGlzLl9zb2NrZXQub25tZXNzYWdlPW51bGwsdGhpcy5fc29ja2V0Lm9uY2xvc2U9bnVsbCx0aGlzLl9zb2NrZXQub25lcnJvcj1udWxsKSx1aT90aGlzLl9zb2NrZXQuY2xvc2Uoe2NvZGU6ZX0pOnRoaXMuX3NvY2tldC5jbG9zZShlKSx0aGlzLl9zb2NrZXQ9bnVsbCl9fSx7a2V5Olwic2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX3dvcmtlclNvY2tldCl0aGlzLl93b3JrZXJTb2NrZXQucG9zdE1lc3NhZ2Uoe2NtZDpcInNlbmRNZXNzYWdlXCIsZGF0YTp0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWU/YUkoZS5kYXRhKS5idWZmZXI6ZS5kYXRhfSk7ZWxzZXtpZihjaSlyZXR1cm4gdm9pZCBoaS5zZW5kU29ja2V0TWVzc2FnZSh7ZGF0YTplLmRhdGEsZmFpbDpmdW5jdGlvbigpe2UuZmFpbCYmZS5yZXF1ZXN0SUQmJmUuZmFpbChlLnJlcXVlc3RJRCl9fSk7dGhpcy5fc29ja2V0JiYocGk/dGhpcy5fc29ja2V0LnNlbmQoe2RhdGE6dGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lP2FJKGUuZGF0YSkuYnVmZmVyOmUuZGF0YSxmYWlsOmZ1bmN0aW9uKCl7ZS5mYWlsJiZlLnJlcXVlc3RJRCYmZS5mYWlsKGUucmVxdWVzdElEKX19KTpnaSYmdGhpcy5fc29ja2V0LnNlbmQodGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lP2FJKGUuZGF0YSkuYnVmZmVyOmUuZGF0YSkpfX19XSksZX0oKSx1ST00ZTMsY0k9NDAwMSxsST1cImNvbm5lY3RlZFwiLGRJPVwiY29ubmVjdGluZ1wiLHBJPVwiZGlzY29ubmVjdGVkXCIsZ0k9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fY2hhbm5lbE1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIlNvY2tldEhhbmRsZXJcIix0aGlzLl9wcm9taXNlTWFwPW5ldyBNYXAsdGhpcy5fcmVhZHlTdGF0ZT1wSSx0aGlzLl9zaW1wbGVSZXF1ZXN0TWFwPW5ldyBNYXAsdGhpcy5NQVhfU0laRT0xMDAsdGhpcy5fc3RhcnRTZXF1ZW5jZT1TdSgpLHRoaXMuX3N0YXJ0VHM9MCx0aGlzLl9yZUNvbm5lY3RGbGFnPSExLHRoaXMuX25leHRQaW5nVHM9MCx0aGlzLl9yZUNvbm5lY3RDb3VudD0wLHRoaXMuTUFYX1JFQ09OTkVDVF9DT1VOVD0zLHRoaXMuX3NvY2tldElEPS0xLHRoaXMuX3JhbmRvbT0wLHRoaXMuX3NvY2tldD1udWxsLHRoaXMuX3VybD1cIlwiLHRoaXMuX29uT3BlblRzPTAsdGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lPSEwLHRoaXMuX2lzV29ya2VyRW5hYmxlZD0hMCx0aGlzLl9zZXRXZWJzb2NrZXRIb3N0KCksdGhpcy5faW5pdENvbm5lY3Rpb24oKX1yZXR1cm4gRW4oZSxbe2tleTpcIl9zZXRXZWJzb2NrZXRIb3N0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jaGFubmVsTW9kdWxlLmdldE1vZHVsZShkbCksdD0kczt0aGlzLl9jaGFubmVsTW9kdWxlLmlzT3ZlcnNlYSgpJiYodD16cyksZS5pc1NpbmdhcG9yZVNpdGUoKT90PUpzOmUuaXNLb3JlYVNpdGUoKT90PVhzOmUuaXNHZXJtYW55U2l0ZSgpP3Q9UXM6ZS5pc0luZGlhU2l0ZSgpJiYodD1acyksZWkuSE9TVC5zZXRDdXJyZW50KHQpfX0se2tleTpcIl9pbml0Q29ubmVjdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7aHUoZWkuSE9TVC5DVVJSRU5ULkJBQ0tVUCl8fFwiXCI9PT10aGlzLl91cmw/dGhpcy5fdXJsPWVpLkhPU1QuQ1VSUkVOVC5ERUZBVUxUOnRoaXMuX3VybD09PWVpLkhPU1QuQ1VSUkVOVC5ERUZBVUxUP3RoaXMuX3VybD1laS5IT1NULkNVUlJFTlQuQkFDS1VQOnRoaXMuX3VybD09PWVpLkhPU1QuQ1VSUkVOVC5CQUNLVVAmJih0aGlzLl91cmw9ZWkuSE9TVC5DVVJSRU5ULkRFRkFVTFQpO3ZhciBlPXRoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKGRsKS5nZXRQcm94eVNlcnZlcigpO1h1KGUpfHwodGhpcy5fdXJsPWUpLHRoaXMuX2Nvbm5lY3QoKSx0aGlzLl9uZXh0UGluZ1RzPTB9fSx7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSUxPT0wJiZ0aGlzLl9jaGVja1Byb21pc2VNYXAoKX19LHtrZXk6XCJfY2hlY2tQcm9taXNlTWFwXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzOzAhPT10aGlzLl9wcm9taXNlTWFwLnNpemUmJnRoaXMuX3Byb21pc2VNYXAuZm9yRWFjaCgoZnVuY3Rpb24odCxuKXt2YXIgbz10LnJlamVjdCxyPXQudGltZXN0YW1wO0RhdGUubm93KCktcj49MTVlMyYmKFFpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2NoZWNrUHJvbWlzZU1hcCByZXF1ZXN0IHRpbWVvdXQsIGRlbGV0ZSByZXF1ZXN0SUQ6XCIpLmNvbmNhdChuKSksZS5fcHJvbWlzZU1hcC5kZWxldGUobiksbyhuZXcgcm0oe2NvZGU6bHAuTkVUV09SS19USU1FT1VULG1lc3NhZ2U6ZHAuTkVUV09SS19USU1FT1VUfSkpLGUuX2NoYW5uZWxNb2R1bGUub25SZXF1ZXN0VGltZW91dChuKSl9KSl9fSx7a2V5Olwib25PcGVuXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25PcGVuVHM9RGF0ZS5ub3coKTt2YXIgdD1lLmlkO3RoaXMuX3NvY2tldElEPXQ7dmFyIG49RGF0ZS5ub3coKS10aGlzLl9zdGFydFRzO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uT3BlbiBjb3N0IFwiKS5jb25jYXQobixcIiBtcy4gc29ja2V0SUQ6XCIpLmNvbmNhdCh0KSksbmV3IERwKHdwKS5zZXRNZXNzYWdlKG4pLnNldENvc3RUaW1lKG4pLnNldE1vcmVNZXNzYWdlKFwic29ja2V0SUQ6XCIuY29uY2F0KHQpKS5lbmQoKSxlLmlkPT09dGhpcy5fc29ja2V0SUQmJih0aGlzLl9yZWFkeVN0YXRlPWxJLHRoaXMuX3JlQ29ubmVjdENvdW50PTAsdGhpcy5fcmVzZW5kKCksITA9PT10aGlzLl9yZUNvbm5lY3RGbGFnJiYodGhpcy5fY2hhbm5lbE1vZHVsZS5vblJlY29ubmVjdGVkKCksdGhpcy5fcmVDb25uZWN0RmxhZz0hMSksdGhpcy5fY2hhbm5lbE1vZHVsZS5vbk9wZW4oKSl9fSx7a2V5Olwib25DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBEcChQcCksbj1lLmlkLG89ZS5lLHI9XCJzb3VyY2VTb2NrZXRJRDpcIi5jb25jYXQobixcIiBjdXJyZW50U29ja2V0SUQ6XCIpLmNvbmNhdCh0aGlzLl9zb2NrZXRJRCxcIiBjb2RlOlwiKS5jb25jYXQoby5jb2RlLFwiIHJlYXNvbjpcIikuY29uY2F0KG8ucmVhc29uKSxhPTA7MCE9PXRoaXMuX29uT3BlblRzJiYoYT1EYXRlLm5vdygpLXRoaXMuX29uT3BlblRzKSx0LnNldE1lc3NhZ2UoYSkuc2V0Q29zdFRpbWUoYSkuc2V0TW9yZU1lc3NhZ2Uocikuc2V0Q29kZShvLmNvZGUpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uQ2xvc2UgXCIpLmNvbmNhdChyLFwiIG9ubGluZVRpbWU6XCIpLmNvbmNhdChhKSksbj09PXRoaXMuX3NvY2tldElEJiYodGhpcy5fcmVhZHlTdGF0ZT1wSSxhPDFlMz90aGlzLl9jaGFubmVsTW9kdWxlLm9uUmVjb25uZWN0RmFpbGVkKCk6dGhpcy5fY2hhbm5lbE1vZHVsZS5vbkNsb3NlKCkpfX0se2tleTpcIm9uRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmlkLG49ZS5lLG89XCJzb3VyY2VTb2NrZXRJRDpcIi5jb25jYXQodCxcIiBjdXJyZW50U29ja2V0SUQ6XCIpLmNvbmNhdCh0aGlzLl9zb2NrZXRJRCk7bmV3IERwKFVwKS5zZXRNZXNzYWdlKG4uZXJyTXNnfHxUdShuKSkuc2V0TW9yZU1lc3NhZ2Uobykuc2V0TGV2ZWwoXCJlcnJvclwiKS5lbmQoKSxRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25FcnJvclwiKSxuLG8pLHQ9PT10aGlzLl9zb2NrZXRJRCYmKHRoaXMuX3JlYWR5U3RhdGU9XCJcIix0aGlzLl9jaGFubmVsTW9kdWxlLm9uRXJyb3IoKSl9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9SlNPTi5wYXJzZShlLmRhdGEpfWNhdGNoKHpJKXtuZXcgRHAocmcpLnNldE1lc3NhZ2UoZS5kYXRhKS5lbmQoKX1pZih0JiZ0LmhlYWQpe3ZhciBuPXRoaXMuX2dldFJlcXVlc3RJREZyb21IZWFkKHQuaGVhZCksbz1XdSh0LmhlYWQpLHI9a3YodC5ib2R5LHRoaXMuX2dldFJlc3BvbnNlS2V5TWFwKG8pKTtpZihRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NZXNzYWdlIHJldDpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KHIpLFwiIHJlcXVlc3RJRDpcIikuY29uY2F0KG4sXCIgaGFzOlwiKS5jb25jYXQodGhpcy5fcHJvbWlzZU1hcC5oYXMobikpKSx0aGlzLl9zZXROZXh0UGluZ1RzKCksdGhpcy5fcHJvbWlzZU1hcC5oYXMobikpe3ZhciBhPXRoaXMuX3Byb21pc2VNYXAuZ2V0KG4pLHM9YS5yZXNvbHZlLGk9YS5yZWplY3QsdT1hLnRpbWVzdGFtcDtyZXR1cm4gdGhpcy5fcHJvbWlzZU1hcC5kZWxldGUobiksdGhpcy5fY2FsY1JUVCh1KSx2b2lkKHIuZXJyb3JDb2RlJiYwIT09ci5lcnJvckNvZGU/KHRoaXMuX2NoYW5uZWxNb2R1bGUub25FcnJvckNvZGVOb3RaZXJvKHIpLGkobmV3IHJtKHtjb2RlOnIuZXJyb3JDb2RlLG1lc3NhZ2U6ci5lcnJvckluZm98fFwiXCJ9KSkpOnMoUV8ocikpKX10aGlzLl9jaGFubmVsTW9kdWxlLm9uTWVzc2FnZSh7aGVhZDp0LmhlYWQsYm9keTpyfSl9fX0se2tleTpcIl9jYWxjUlRUXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9RGF0ZS5ub3coKS1lO3RoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKFNsKS5hZGRSVFQodCl9fSx7a2V5OlwiX2Nvbm5lY3RcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N0YXJ0VHM9RGF0ZS5ub3coKSx0aGlzLl9vbk9wZW5Ucz0wLHRoaXMuX3NvY2tldD1uZXcgaUkodGhpcyksdGhpcy5fc29ja2V0SUQ9dGhpcy5fc29ja2V0LmdldElEKCksdGhpcy5fcmVhZHlTdGF0ZT1kSSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jb25uZWN0IGlzV29ya2VyRW5hYmxlZDpcIikuY29uY2F0KHRoaXMuZ2V0SXNXb3JrZXJFbmFibGVkKCksXCIgc29ja2V0SUQ6XCIpLmNvbmNhdCh0aGlzLl9zb2NrZXRJRCxcIiB1cmw6XCIpLmNvbmNhdCh0aGlzLmdldFVSTCgpKSksbmV3IERwKGJwKS5zZXRNZXNzYWdlKFwic29ja2V0SUQ6XCIuY29uY2F0KHRoaXMuX3NvY2tldElELFwiIHVybDpcIikuY29uY2F0KHRoaXMuZ2V0VVJMKCkpKS5lbmQoKX19LHtrZXk6XCJnZXRVUkxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKGRsKTtlLmlzRGV2TW9kZSgpJiYodGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lPSExKTt2YXIgdD1CdSgpOyhjaXx8YWkmJlwid2luZG93c1wiPT09dHx8bGkpJiYodGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lPSExKTt2YXIgbj0tMTtcImlvc1wiPT09dD9uPUVpfHwtMTpcImFuZHJvaWRcIj09PXQmJihuPUFpfHwtMSk7dmFyIG89dGhpcy5fY2hhbm5lbE1vZHVsZS5nZXRQbGF0Zm9ybSgpLHI9ZS5nZXRTREtBcHBJRCgpLGE9ZS5nZXRJbnN0YW5jZUlEKCk7cmV0dXJuIHRoaXMuX2NhbklVc2VCaW5hcnlGcmFtZT9cIlwiLmNvbmNhdCh0aGlzLl91cmwsXCIvYmluZm8/c2RrYXBwaWQ9XCIpLmNvbmNhdChyLFwiJmluc3RhbmNlaWQ9XCIpLmNvbmNhdChhLFwiJnJhbmRvbT1cIikuY29uY2F0KHRoaXMuX2dldFJhbmRvbSgpLFwiJnBsYXRmb3JtPVwiKS5jb25jYXQobyxcIiZob3N0PVwiKS5jb25jYXQodCxcIiZ2ZXJzaW9uPVwiKS5jb25jYXQobik6XCJcIi5jb25jYXQodGhpcy5fdXJsLFwiL2luZm8/c2RrYXBwaWQ9XCIpLmNvbmNhdChyLFwiJmluc3RhbmNlaWQ9XCIpLmNvbmNhdChhLFwiJnJhbmRvbT1cIikuY29uY2F0KHRoaXMuX2dldFJhbmRvbSgpLFwiJnBsYXRmb3JtPVwiKS5jb25jYXQobyxcIiZob3N0PVwiKS5jb25jYXQodCxcIiZ2ZXJzaW9uPVwiKS5jb25jYXQobil9fSx7a2V5OlwiX2Nsb3NlQ29ubmVjdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2Nsb3NlQ29ubmVjdGlvblwiKSksdGhpcy5fc29ja2V0JiYodGhpcy5fc29ja2V0LmNsb3NlKGUpLHRoaXMuX3NvY2tldElEPS0xLHRoaXMuX3NvY2tldD1udWxsLHRoaXMuX3JlYWR5U3RhdGU9cEkpfX0se2tleTpcIl9yZXNlbmRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fcmVzZW5kIHJlQ29ubmVjdEZsYWc6XCIpLmNvbmNhdCh0aGlzLl9yZUNvbm5lY3RGbGFnKSxcInByb21pc2VNYXAuc2l6ZTpcIi5jb25jYXQodGhpcy5fcHJvbWlzZU1hcC5zaXplLFwiIHNpbXBsZVJlcXVlc3RNYXAuc2l6ZTpcIikuY29uY2F0KHRoaXMuX3NpbXBsZVJlcXVlc3RNYXAuc2l6ZSkpLHRoaXMuX3Byb21pc2VNYXAuc2l6ZT4wJiZ0aGlzLl9wcm9taXNlTWFwLmZvckVhY2goKGZ1bmN0aW9uKHQsbil7dmFyIG89dC51cGxpbmtEYXRhLHI9dC5yZXNvbHZlLGE9dC5yZWplY3Q7ZS5fcHJvbWlzZU1hcC5zZXQobix7cmVzb2x2ZTpyLHJlamVjdDphLHRpbWVzdGFtcDpEYXRlLm5vdygpLHVwbGlua0RhdGE6b30pLGUuX2V4ZWN1dGUobixvKX0pKSx0aGlzLl9zaW1wbGVSZXF1ZXN0TWFwLnNpemU+MCl7dmFyIHQsbj1Cbih0aGlzLl9zaW1wbGVSZXF1ZXN0TWFwKTt0cnl7Zm9yKG4ucygpOyEodD1uLm4oKSkuZG9uZTspe3ZhciBvPVBuKHQudmFsdWUsMikscj1vWzBdLGE9b1sxXTt0aGlzLl9leGVjdXRlKHIsYSl9fWNhdGNoKHMpe24uZShzKX1maW5hbGx5e24uZigpfXRoaXMuX3NpbXBsZVJlcXVlc3RNYXAuY2xlYXIoKX19fSx7a2V5Olwic2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5oZWFkLnNlcT10aGlzLl9nZXRTZXF1ZW5jZSgpLGUuaGVhZC5yZXF0aW1lPU1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpO2Uua2V5TWFwO3ZhciBuPU9uKGUsW1wia2V5TWFwXCJdKSxvPXRoaXMuX2dldFJlcXVlc3RJREZyb21IZWFkKGUuaGVhZCkscj1KU09OLnN0cmluZ2lmeShuKTtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsYSl7KHQuX3Byb21pc2VNYXAuc2V0KG8se3Jlc29sdmU6ZSxyZWplY3Q6YSx0aW1lc3RhbXA6RGF0ZS5ub3coKSx1cGxpbmtEYXRhOnJ9KSxRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuc2VuZCB1cGxpbmtEYXRhOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobiksXCIgcmVxdWVzdElEOlwiKS5jb25jYXQobyxcIiByZWFkeVN0YXRlOlwiKS5jb25jYXQodC5fcmVhZHlTdGF0ZSkpLHQuX3JlYWR5U3RhdGUhPT1sSSk/dC5fcmVDb25uZWN0KCk6KHQuX2V4ZWN1dGUobyxyKSx0Ll9jaGFubmVsTW9kdWxlLmdldE1vZHVsZShTbCkuYWRkUmVxdWVzdENvdW50KCkpfSkpfX0se2tleTpcInNpbXBseVNlbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtlLmhlYWQuc2VxPXRoaXMuX2dldFNlcXVlbmNlKCksZS5oZWFkLnJlcXRpbWU9TWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyk7ZS5rZXlNYXA7dmFyIHQ9T24oZSxbXCJrZXlNYXBcIl0pLG49dGhpcy5fZ2V0UmVxdWVzdElERnJvbUhlYWQoZS5oZWFkKSxvPUpTT04uc3RyaW5naWZ5KHQpO3RoaXMuX3JlYWR5U3RhdGUhPT1sST8odGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5zaXplPHRoaXMuTUFYX1NJWkU/dGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5zZXQobixvKTpRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNpbXBseVNlbmQuIHNpbXBsZVJlcXVlc3RNYXAgaXMgZnVsbCwgZHJvcCByZXF1ZXN0IVwiKSksdGhpcy5fcmVDb25uZWN0KCkpOnRoaXMuX2V4ZWN1dGUobixvKX19LHtrZXk6XCJfZXhlY3V0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fc29ja2V0LnNlbmQoe2RhdGE6dCxmYWlsOnBpP3RoaXMuX29uU2VuZEZhaWwuYmluZCh0aGlzKTp2b2lkIDAscmVxdWVzdElEOmV9KX19LHtrZXk6XCJfb25TZW5kRmFpbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uU2VuZEZhaWwgcmVxdWVzdElEOlwiKS5jb25jYXQoZSkpfX0se2tleTpcIl9nZXRTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU7aWYodGhpcy5fc3RhcnRTZXF1ZW5jZTwyNDE1OTE5MTAzKXJldHVybiBlPXRoaXMuX3N0YXJ0U2VxdWVuY2UsdGhpcy5fc3RhcnRTZXF1ZW5jZSs9MSwyNDE1OTE5MTAzPT09dGhpcy5fc3RhcnRTZXF1ZW5jZSYmKHRoaXMuX3N0YXJ0U2VxdWVuY2U9U3UoKSksZX19LHtrZXk6XCJfZ2V0UmVxdWVzdElERnJvbUhlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5zZXJ2Y21kK2Uuc2VxfX0se2tleTpcIl9nZXRSZXNwb25zZUtleU1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0S2V5TWFwKGUpO3JldHVybiBTbih7fSxBdi5yZXNwb25zZSx7fSx0LnJlc3BvbnNlKX19LHtrZXk6XCJfcmVDb25uZWN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZWFkeVN0YXRlIT09bEkmJnRoaXMuX3JlYWR5U3RhdGUhPT1kSSYmdGhpcy5mb3JjZWRSZWNvbm5lY3QoKX19LHtrZXk6XCJmb3JjZWRSZWNvbm5lY3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5mb3JjZWRSZWNvbm5lY3QgY291bnQ6XCIpLmNvbmNhdCh0aGlzLl9yZUNvbm5lY3RDb3VudCxcIiByZWFkeVN0YXRlOlwiKS5jb25jYXQodGhpcy5fcmVhZHlTdGF0ZSkpLHRoaXMuX3JlQ29ubmVjdEZsYWc9ITAsdGhpcy5fcmVzZXRSYW5kb20oKSx0aGlzLl9yZUNvbm5lY3RDb3VudDx0aGlzLk1BWF9SRUNPTk5FQ1RfQ09VTlQ/KHRoaXMuX3JlQ29ubmVjdENvdW50Kz0xLHRoaXMuX2Nsb3NlQ29ubmVjdGlvbihjSSksdGhpcy5faW5pdENvbm5lY3Rpb24oKSk6KHRoaXMuX3JlQ29ubmVjdENvdW50PTAsdGhpcy5fY2hhbm5lbE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXTtuWzFdO28/KFFpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLmZvcmNlZFJlY29ubmVjdCBkaXNjb25uZWN0ZWQgZnJvbSB3c3NlcnZlciBidXQgbmV0d29yayBpcyBvaywgY29udGludWUuLi5cIikpLGUuX2Nsb3NlQ29ubmVjdGlvbihjSSksZS5faW5pdENvbm5lY3Rpb24oKSk6ZS5fY2hhbm5lbE1vZHVsZS5vblJlY29ubmVjdEZhaWxlZCgpfSkpKX19LHtrZXk6XCJnZXRSZWNvbm5lY3RGbGFnXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVDb25uZWN0RmxhZ319LHtrZXk6XCJfc2V0TmV4dFBpbmdUc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fbmV4dFBpbmdUcz1EYXRlLm5vdygpKzFlNH19LHtrZXk6XCJnZXROZXh0UGluZ1RzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmV4dFBpbmdUc319LHtrZXk6XCJpc0Nvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlYWR5U3RhdGU9PT1sSX19LHtrZXk6XCJjYW5JVXNlQmluYXJ5RnJhbWVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWV9fSx7a2V5Olwic2V0SXNXb3JrZXJFbmFibGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRJc1dvcmtlckVuYWJsZWQgZmxhZzpcIikuY29uY2F0KGUpKSx0aGlzLl9pc1dvcmtlckVuYWJsZWQ9ZX19LHtrZXk6XCJnZXRJc1dvcmtlckVuYWJsZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1dvcmtlckVuYWJsZWQmJkdpfX0se2tleTpcIl9nZXRSYW5kb21cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5fcmFuZG9tJiYodGhpcy5fcmFuZG9tPU1hdGgucmFuZG9tKCkpLHRoaXMuX3JhbmRvbX19LHtrZXk6XCJfcmVzZXRSYW5kb21cIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JhbmRvbT0wfX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmNsb3NlXCIpKSx0aGlzLl9jbG9zZUNvbm5lY3Rpb24odUkpLHRoaXMuX3Byb21pc2VNYXAuY2xlYXIoKSx0aGlzLl9zdGFydFNlcXVlbmNlPVN1KCksdGhpcy5fcmVhZHlTdGF0ZT1wSSx0aGlzLl9zaW1wbGVSZXF1ZXN0TWFwLmNsZWFyKCksdGhpcy5fcmVDb25uZWN0RmxhZz0hMSx0aGlzLl9yZUNvbm5lY3RDb3VudD0wLHRoaXMuX29uT3BlblRzPTAsdGhpcy5fdXJsPVwiXCIsdGhpcy5fcmFuZG9tPTAsdGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lPSEwLHRoaXMuX2lzV29ya2VyRW5hYmxlZD0hMH19XSksZX0oKSxoST1mdW5jdGlvbihlKXtEbihuLGUpO3ZhciB0PXduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87aWYoeW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkNoYW5uZWxNb2R1bGVcIixvLl9zb2NrZXRIYW5kbGVyPW5ldyBnSShHbihvKSksby5fcHJvYmluZz0hMSxvLl9pc0FwcFNob3dpbmc9ITAsby5fcHJldmlvdXNTdGF0ZT1Zbi5ORVRfU1RBVEVfQ09OTkVDVEVELHBpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBoaS5vbkFwcFNob3cmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGhpLm9uQXBwSGlkZSl7dmFyIHI9by5fb25BcHBIaWRlLmJpbmQoR24obykpLGE9by5fb25BcHBTaG93LmJpbmQoR24obykpO1wiZnVuY3Rpb25cIj09dHlwZW9mIGhpLm9mZkFwcEhpZGUmJmhpLm9mZkFwcEhpZGUociksXCJmdW5jdGlvblwiPT10eXBlb2YgaGkub2ZmQXBwU2hvdyYmaGkub2ZmQXBwU2hvdyhhKSxoaS5vbkFwcEhpZGUociksaGkub25BcHBTaG93KGEpfXJldHVybiBvLl90aW1lckZvck5vdExvZ2dlZEluPS0xLG8uX3RpbWVyRm9yTm90TG9nZ2VkSW49c2V0SW50ZXJ2YWwoby5vbkNoZWNrVGltZXIuYmluZChHbihvKSksMWUzKSxvLl9mYXRhbEVycm9yRmxhZz0hMSxvfXJldHVybiBFbihuLFt7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc29ja2V0SGFuZGxlciYmKHRoaXMuaXNMb2dnZWRJbigpPyh0aGlzLl90aW1lckZvck5vdExvZ2dlZEluPjAmJihjbGVhckludGVydmFsKHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW4pLHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW49LTEpLHRoaXMuX3NvY2tldEhhbmRsZXIub25DaGVja1RpbWVyKGUpKTp0aGlzLl9zb2NrZXRIYW5kbGVyLm9uQ2hlY2tUaW1lcigxKSx0aGlzLl9jaGVja05leHRQaW5nKCkpfX0se2tleTpcIm9uRXJyb3JDb2RlTm90WmVyb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ2V0TW9kdWxlKE1sKS5vbkVycm9yQ29kZU5vdFplcm8oZSl9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5nZXRNb2R1bGUoTWwpLm9uTWVzc2FnZShlKX19LHtrZXk6XCJzZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NvY2tldEhhbmRsZXI/dGhpcy5fcHJldmlvdXNTdGF0ZSE9PVluLk5FVF9TVEFURV9DT05ORUNURUQmJmUuaGVhZC5zZXJ2Y21kLmluY2x1ZGVzKFhkKT8odGhpcy5yZUNvbm5lY3QoKSx0aGlzLl9zZW5kTG9nVmlhSFRUUChlKSk6dGhpcy5fc29ja2V0SGFuZGxlci5zZW5kKGUpOlByb21pc2UucmVqZWN0KCl9fSx7a2V5OlwiX3NlbmRMb2dWaWFIVFRQXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZWkuSE9TVC5DVVJSRU5ULlNUQVQ7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLG8pe3ZhciByPVwiXCIuY29uY2F0KHQsXCIvdjQvaW1vcGVuc3RhdC90aW1fd2ViX3JlcG9ydF92Mj9zZGthcHBpZD1cIikuY29uY2F0KGUuaGVhZC5zZGthcHBpZCxcIiZyZXF0aW1lPVwiKS5jb25jYXQoRGF0ZS5ub3coKSksYT1KU09OLnN0cmluZ2lmeShlLmJvZHkpLHM9XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOFwiO2lmKHBpKWhpLnJlcXVlc3Qoe3VybDpyLGRhdGE6YSxtZXRob2Q6XCJQT1NUXCIsdGltZW91dDozZTMsaGVhZGVyOntcImNvbnRlbnQtdHlwZVwiOnN9LHN1Y2Nlc3M6ZnVuY3Rpb24oKXtuKCl9LGZhaWw6ZnVuY3Rpb24oKXtvKG5ldyBybSh7Y29kZTpscC5ORVRXT1JLX0VSUk9SLG1lc3NhZ2U6ZHAuTkVUV09SS19FUlJPUn0pKX19KTtlbHNle3ZhciBpPW5ldyBYTUxIdHRwUmVxdWVzdCx1PXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aS5hYm9ydCgpLG8obmV3IHJtKHtjb2RlOmxwLk5FVFdPUktfVElNRU9VVCxtZXNzYWdlOmRwLk5FVFdPUktfVElNRU9VVH0pKX0pLDNlMyk7aS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09aS5yZWFkeVN0YXRlJiYoY2xlYXJUaW1lb3V0KHUpLDIwMD09PWkuc3RhdHVzfHwzMDQ9PT1pLnN0YXR1cz9uKCk6byhuZXcgcm0oe2NvZGU6bHAuTkVUV09SS19FUlJPUixtZXNzYWdlOmRwLk5FVFdPUktfRVJST1J9KSkpfSxpLm9wZW4oXCJQT1NUXCIsciwhMCksaS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIscyksaS5zZW5kKGEpfX0pKX19LHtrZXk6XCJzaW1wbHlTZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NvY2tldEhhbmRsZXI/dGhpcy5fc29ja2V0SGFuZGxlci5zaW1wbHlTZW5kKGUpOlByb21pc2UucmVqZWN0KCl9fSx7a2V5Olwib25PcGVuXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9waW5nKCl9fSx7a2V5Olwib25DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc29ja2V0SGFuZGxlciYmKHRoaXMuX3NvY2tldEhhbmRsZXIuZ2V0UmVjb25uZWN0RmxhZygpJiZ0aGlzLl9lbWl0TmV0U3RhdGVDaGFuZ2VFdmVudChZbi5ORVRfU1RBVEVfRElTQ09OTkVDVEVEKSk7dGhpcy5yZUNvbm5lY3QoKX19LHtrZXk6XCJvbkVycm9yXCIsdmFsdWU6ZnVuY3Rpb24oKXtwaSYmUWkuZXJyb3IoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uRXJyb3Ig5LuOdjIuMTEuMui1t++8jFNESyDmlK/mjIHkuoYgV2ViU29ja2V077yM5aaC5oKo5pyq5re75Yqg55u45YWz5Y+X5L+h5Z+f5ZCN77yM6K+35YWI5re75Yqg77yB5Y2H57qn5oyH5byVOiBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vdHV0b3JpYWwtMDItdXBncmFkZWd1aWRlbGluZS5odG1sXCIpKX19LHtrZXk6XCJnZXRLZXlNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoTWwpLmdldEtleU1hcChlKX19LHtrZXk6XCJfb25BcHBIaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pc0FwcFNob3dpbmc9ITF9fSx7a2V5OlwiX29uQXBwU2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNBcHBTaG93aW5nPSEwfX0se2tleTpcIm9uUmVxdWVzdFRpbWVvdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt9fSx7a2V5Olwib25SZWNvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblJlY29ubmVjdGVkXCIpKSx0aGlzLmdldE1vZHVsZShNbCkub25SZWNvbm5lY3RlZCgpLHRoaXMuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KFluLk5FVF9TVEFURV9DT05ORUNURUQpfX0se2tleTpcIm9uUmVjb25uZWN0RmFpbGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUmVjb25uZWN0RmFpbGVkXCIpKSx0aGlzLl9lbWl0TmV0U3RhdGVDaGFuZ2VFdmVudChZbi5ORVRfU1RBVEVfRElTQ09OTkVDVEVEKX19LHtrZXk6XCJzZXRJc1dvcmtlckVuYWJsZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zb2NrZXRIYW5kbGVyJiZ0aGlzLl9zb2NrZXRIYW5kbGVyLnNldElzV29ya2VyRW5hYmxlZCghMSl9fSx7a2V5OlwicmVDb25uZWN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdLHQ9ITE7dGhpcy5fc29ja2V0SGFuZGxlciYmKHQ9dGhpcy5fc29ja2V0SGFuZGxlci5nZXRSZWNvbm5lY3RGbGFnKCkpO3ZhciBuPVwiZm9yY2VkRmxhZzpcIi5jb25jYXQoZSxcIiBmYXRhbEVycm9yRmxhZzpcIikuY29uY2F0KHRoaXMuX2ZhdGFsRXJyb3JGbGFnLFwiIHByZXZpb3VzU3RhdGU6XCIpLmNvbmNhdCh0aGlzLl9wcmV2aW91c1N0YXRlLFwiIHJlY29ubmVjdEZsYWc6XCIpLmNvbmNhdCh0KTtpZihRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlQ29ubmVjdCBcIikuY29uY2F0KG4pKSwhdGhpcy5fZmF0YWxFcnJvckZsYWcmJnRoaXMuX3NvY2tldEhhbmRsZXIpe2lmKCEwPT09ZSl0aGlzLl9zb2NrZXRIYW5kbGVyLmZvcmNlZFJlY29ubmVjdCgpO2Vsc2V7aWYodGhpcy5fcHJldmlvdXNTdGF0ZT09PVluLk5FVF9TVEFURV9DT05ORUNUSU5HJiZ0KXJldHVybjt0aGlzLl9zb2NrZXRIYW5kbGVyLmZvcmNlZFJlY29ubmVjdCgpfXRoaXMuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KFluLk5FVF9TVEFURV9DT05ORUNUSU5HKX19fSx7a2V5OlwiX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcHJldmlvdXNTdGF0ZSE9PWUmJihRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9lbWl0TmV0U3RhdGVDaGFuZ2VFdmVudCBmcm9tIFwiKS5jb25jYXQodGhpcy5fcHJldmlvdXNTdGF0ZSxcIiB0byBcIikuY29uY2F0KGUpKSx0aGlzLl9wcmV2aW91c1N0YXRlPWUsdGhpcy5lbWl0T3V0ZXJFdmVudChXbi5ORVRfU1RBVEVfQ0hBTkdFLHtzdGF0ZTplfSkpfX0se2tleTpcIl9waW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCEwIT09dGhpcy5fcHJvYmluZyl7dGhpcy5fcHJvYmluZz0hMDt2YXIgdD10aGlzLmdldE1vZHVsZShNbCkuZ2V0UHJvdG9jb2xEYXRhKHtwcm90b2NvbE5hbWU6UWR9KTt0aGlzLnNlbmQodCkudGhlbigoZnVuY3Rpb24oKXtlLl9wcm9iaW5nPSExfSkpLmNhdGNoKChmdW5jdGlvbih0KXtpZihRaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fcGluZyBmYWlsZWQuIGVycm9yOlwiKSx0KSxlLl9wcm9iaW5nPSExLHQmJjYwMDAyPT09dC5jb2RlKXJldHVybiBuZXcgRHAoeWgpLnNldE1lc3NhZ2UoXCJjb2RlOlwiLmNvbmNhdCh0LmNvZGUsXCIgbWVzc2FnZTpcIikuY29uY2F0KHQubWVzc2FnZSkpLnNldE5ldHdvcmtUeXBlKGUuZ2V0TW9kdWxlKGhsKS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxlLl9mYXRhbEVycm9yRmxhZz0hMCx2b2lkIGUuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KFluLk5FVF9TVEFURV9ESVNDT05ORUNURUQpO2UucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO1FpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX3BpbmcgZmFpbGVkLiBwcm9iZSBuZXR3b3JrLCBpc0FwcFNob3dpbmc6XCIpLmNvbmNhdChlLl9pc0FwcFNob3dpbmcsXCIgb25saW5lOlwiKS5jb25jYXQobyxcIiBuZXR3b3JrVHlwZTpcIikuY29uY2F0KHIpKSxvP2UucmVDb25uZWN0KCk6ZS5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQoWW4uTkVUX1NUQVRFX0RJU0NPTk5FQ1RFRCl9KSl9KSl9fX0se2tleTpcIl9jaGVja05leHRQaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zb2NrZXRIYW5kbGVyJiYodGhpcy5fc29ja2V0SGFuZGxlci5pc0Nvbm5lY3RlZCgpJiZEYXRlLm5vdygpPj10aGlzLl9zb2NrZXRIYW5kbGVyLmdldE5leHRQaW5nVHMoKSYmdGhpcy5fcGluZygpKX19LHtrZXk6XCJkZWFsbG9jXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zb2NrZXRIYW5kbGVyJiYodGhpcy5fc29ja2V0SGFuZGxlci5jbG9zZSgpLHRoaXMuX3NvY2tldEhhbmRsZXI9bnVsbCksdGhpcy5fdGltZXJGb3JOb3RMb2dnZWRJbj4tMSYmY2xlYXJJbnRlcnZhbCh0aGlzLl90aW1lckZvck5vdExvZ2dlZEluKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fcHJldmlvdXNTdGF0ZT1Zbi5ORVRfU1RBVEVfQ09OTkVDVEVELHRoaXMuX3Byb2Jpbmc9ITEsdGhpcy5fZmF0YWxFcnJvckZsYWc9ITEsdGhpcy5fdGltZXJGb3JOb3RMb2dnZWRJbj1zZXRJbnRlcnZhbCh0aGlzLm9uQ2hlY2tUaW1lci5iaW5kKHRoaXMpLDFlMyl9fV0pLG59KE5sKSxmST1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9jbGFzc05hbWU9XCJQcm90b2NvbEhhbmRsZXJcIix0aGlzLl9zZXNzaW9uTW9kdWxlPXQsdGhpcy5fY29uZmlnTWFwPW5ldyBNYXAsdGhpcy5fZmlsbENvbmZpZ01hcCgpfXJldHVybiBFbihlLFt7a2V5OlwiX2ZpbGxDb25maWdNYXBcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbmZpZ01hcC5jbGVhcigpO3ZhciBlPXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2VuQ29tbW9uSGVhZCgpLHQ9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZW5Db3NTcGVjaWZpZWRIZWFkKCksbj10aGlzLl9zZXNzaW9uTW9kdWxlLmdlblNTT1JlcG9ydEhlYWQoKTt0aGlzLl9jb25maWdNYXAuc2V0KENsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5JTV9PUEVOX1NUQVRVUyxcIi5cIikuY29uY2F0KGVpLkNNRC5MT0dJTil9KSxib2R5OntzdGF0ZTpcIk9ubGluZVwifSxrZXlNYXA6e3Jlc3BvbnNlOntJbnN0SWQ6XCJpbnN0YW5jZUlEXCIsSGVsbG9JbnRlcnZhbDpcImhlbGxvSW50ZXJ2YWxcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoa2wsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX09QRU5fU1RBVFVTLFwiLlwiKS5jb25jYXQoZWkuQ01ELkxPR09VVCl9KSxib2R5Ont0eXBlOjB9LGtleU1hcDp7cmVxdWVzdDp7dHlwZTpcIndzbG9nb3V0X3R5cGVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX09QRU5fU1RBVFVTLFwiLlwiKS5jb25jYXQoZWkuQ01ELkhFTExPKX0pLGJvZHk6e30sa2V5TWFwOntyZXNwb25zZTp7TmV3SW5zdEluZm86XCJuZXdJbnN0YW5jZUluZm9cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoUmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLlNUQVRfU0VSVklDRSxcIi5cIikuY29uY2F0KGVpLkNNRC5LSUNLX09USEVSKX0pLGJvZHk6e319fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCgkZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSU1fQ09TX1NJR04sXCIuXCIpLmNvbmNhdChlaS5DTUQuQ09TX1NJR04pfSksYm9keTp7Y21kOlwib3Blbl9pbV9jb3Nfc3ZjXCIsc3ViQ21kOlwiZ2V0X2Nvc190b2tlblwiLGR1cmF0aW9uOjMwMCx2ZXJzaW9uOjJ9LGtleU1hcDp7cmVxdWVzdDp7dXNlclNpZzpcInVzZXJzaWdcIixzdWJDbWQ6XCJzdWJfY21kXCIsY21kOlwiY21kXCIsZHVyYXRpb246XCJkdXJhdGlvblwiLHZlcnNpb246XCJ2ZXJzaW9uXCJ9LHJlc3BvbnNlOntleHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwiLGJ1Y2tldF9uYW1lOlwiYnVja2V0TmFtZVwiLHNlc3Npb25fdG9rZW46XCJzZXNzaW9uVG9rZW5cIix0bXBfc2VjcmV0X2lkOlwic2VjcmV0SWRcIix0bXBfc2VjcmV0X2tleTpcInNlY3JldEtleVwifX19fSh0KSksdGhpcy5fY29uZmlnTWFwLnNldCh6ZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuQ1VTVE9NX1VQTE9BRCxcIi5cIikuY29uY2F0KGVpLkNNRC5DT1NfUFJFX1NJRyl9KSxib2R5OntmaWxlVHlwZTp2b2lkIDAsZmlsZU5hbWU6dm9pZCAwLHVwbG9hZE1ldGhvZDowLGR1cmF0aW9uOjkwMH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VyU2lnOlwidXNlcnNpZ1wiLGZpbGVUeXBlOlwiZmlsZV90eXBlXCIsZmlsZU5hbWU6XCJmaWxlX25hbWVcIix1cGxvYWRNZXRob2Q6XCJ1cGxvYWRfbWV0aG9kXCJ9LHJlc3BvbnNlOntleHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwiLHJlcXVlc3RfaWQ6XCJyZXF1ZXN0SWRcIixoZWFkX3VybDpcImhlYWRVcmxcIix1cGxvYWRfdXJsOlwidXBsb2FkVXJsXCIsZG93bmxvYWRfdXJsOlwiZG93bmxvYWRVcmxcIixjaV91cmw6XCJjaVVybFwiLHNuYXBzaG90X3VybDpcInJlcXVlc3RTbmFwc2hvdFVybFwifX19fSh0KSksdGhpcy5fY29uZmlnTWFwLnNldChKZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuQ1VTVE9NX1VQTE9BRCxcIi5cIikuY29uY2F0KGVpLkNNRC5WSURFT19DT1ZFUil9KSxib2R5Ont2ZXJzaW9uOjEscGxhdGZvcm06dm9pZCAwLGNvdmVyTmFtZTp2b2lkIDAscmVxdWVzdFNuYXBzaG90VXJsOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont2ZXJzaW9uOlwidmVyc2lvblwiLHBsYXRmb3JtOlwicGxhdGZvcm1cIixjb3Zlck5hbWU6XCJjb3Zlcl9uYW1lXCIscmVxdWVzdFNuYXBzaG90VXJsOlwic25hcHNob3RfdXJsXCJ9LHJlc3BvbnNlOntlcnJvcl9jb2RlOlwiZXJyb3JDb2RlXCIsZXJyb3JfbXNnOlwiZXJyb3JJbmZvXCIsZG93bmxvYWRfdXJsOlwic25hcHNob3RVcmxcIn19fX0odCkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoaXAsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX0NPTkZJR19NQU5BR0VSLFwiLlwiKS5jb25jYXQoZWkuQ01ELkZFVENIX0NPTU1FUkNJQUxfQ09ORklHKX0pLGJvZHk6e1NES0FwcElEOjB9LGtleU1hcDp7cmVxdWVzdDp7U0RLQXBwSUQ6XCJ1aW50MzJfc2RrYXBwaWRcIn0scmVzcG9uc2U6e2ludDMyX2Vycm9yX2NvZGU6XCJlcnJvckNvZGVcIixzdHJfZXJyb3JfbWVzc2FnZTpcImVycm9yTWVzc2FnZVwiLHN0cl9wdXJjaGFzZV9iaXRzOlwicHVyY2hhc2VCaXRzXCIsdWludDMyX2V4cGlyZWRfdGltZTpcImV4cGlyZWRUaW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHVwLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5JTV9DT05GSUdfTUFOQUdFUixcIi5cIikuY29uY2F0KGVpLkNNRC5QVVNIRURfQ09NTUVSQ0lBTF9DT05GSUcpfSksYm9keTp7fSxrZXlNYXA6e3Jlc3BvbnNlOntpbnQzMl9lcnJvcl9jb2RlOlwiZXJyb3JDb2RlXCIsc3RyX2Vycm9yX21lc3NhZ2U6XCJlcnJvck1lc3NhZ2VcIixzdHJfcHVyY2hhc2VfYml0czpcInB1cmNoYXNlQml0c1wiLHVpbnQzMl9leHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChhcCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSU1fQ09ORklHX01BTkFHRVIsXCIuXCIpLmNvbmNhdChlaS5DTUQuRkVUQ0hfQ0xPVURfQ09OVFJPTF9DT05GSUcpfSksYm9keTp7U0RLQXBwSUQ6MCx2ZXJzaW9uOjB9LGtleU1hcDp7cmVxdWVzdDp7U0RLQXBwSUQ6XCJ1aW50MzJfc2RrYXBwaWRcIix2ZXJzaW9uOlwidWludDY0X3ZlcnNpb25cIn0scmVzcG9uc2U6e2ludDMyX2Vycm9yX2NvZGU6XCJlcnJvckNvZGVcIixzdHJfZXJyb3JfbWVzc2FnZTpcImVycm9yTWVzc2FnZVwiLHN0cl9qc29uX2NvbmZpZzpcImNsb3VkQ29udHJvbENvbmZpZ1wiLHVpbnQzMl9leHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwiLHVpbnQzMl9zZGthcHBpZDpcIlNES0FwcElEXCIsdWludDY0X3ZlcnNpb246XCJ2ZXJzaW9uXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHNwLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5JTV9DT05GSUdfTUFOQUdFUixcIi5cIikuY29uY2F0KGVpLkNNRC5QVVNIRURfQ0xPVURfQ09OVFJPTF9DT05GSUcpfSksYm9keTp7fSxrZXlNYXA6e3Jlc3BvbnNlOntpbnQzMl9lcnJvcl9jb2RlOlwiZXJyb3JDb2RlXCIsc3RyX2Vycm9yX21lc3NhZ2U6XCJlcnJvck1lc3NhZ2VcIixzdHJfanNvbl9jb25maWc6XCJjbG91ZENvbnRyb2xDb25maWdcIix1aW50MzJfZXhwaXJlZF90aW1lOlwiZXhwaXJlZFRpbWVcIix1aW50MzJfc2RrYXBwaWQ6XCJTREtBcHBJRFwiLHVpbnQ2NF92ZXJzaW9uOlwidmVyc2lvblwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChjcCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuT1ZFUkxPQURfUFVTSCxcIi5cIikuY29uY2F0KGVpLkNNRC5PVkVSTE9BRF9OT1RJRlkpfSksYm9keTp7fSxrZXlNYXA6e3Jlc3BvbnNlOntPdmVyTG9hZFNlcnZDbWQ6XCJvdmVybG9hZENvbW1hbmRcIixEZWxheVNlY3M6XCJ3YWl0aW5nVGltZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChPbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfTUVTU0FHRVMpfSksYm9keTp7Y29va2llOlwiXCIsc3luY0ZsYWc6MCxuZWVkQWJzdHJhY3Q6MSxpc09ubGluZVN5bmM6MH0sa2V5TWFwOntyZXF1ZXN0Ontmcm9tQWNjb3VudDpcIkZyb21fQWNjb3VudFwiLHRvQWNjb3VudDpcIlRvX0FjY291bnRcIixmcm9tOlwiRnJvbV9BY2NvdW50XCIsdG86XCJUb19BY2NvdW50XCIsdGltZTpcIk1zZ1RpbWVTdGFtcFwiLHNlcXVlbmNlOlwiTXNnU2VxXCIscmFuZG9tOlwiTXNnUmFuZG9tXCIsZWxlbWVudHM6XCJNc2dCb2R5XCJ9LHJlc3BvbnNlOntNc2dMaXN0OlwibWVzc2FnZUxpc3RcIixTeW5jRmxhZzpcInN5bmNGbGFnXCIsVG9fQWNjb3VudDpcInRvXCIsRnJvbV9BY2NvdW50OlwiZnJvbVwiLENsaWVudFNlcTpcImNsaWVudFNlcXVlbmNlXCIsTXNnU2VxOlwic2VxdWVuY2VcIixOb3RpY2VTZXE6XCJub3RpY2VTZXF1ZW5jZVwiLE5vdGlmeVNlcTpcIm5vdGlmeVNlcXVlbmNlXCIsTXNnUmFuZG9tOlwicmFuZG9tXCIsTXNnVGltZVN0YW1wOlwidGltZVwiLE1zZ0NvbnRlbnQ6XCJjb250ZW50XCIsVG9Hcm91cElkOlwiZ3JvdXBJRFwiLE1zZ0tleTpcIm1lc3NhZ2VLZXlcIixHcm91cFRpcHM6XCJncm91cFRpcHNcIixNc2dCb2R5OlwiZWxlbWVudHNcIixNc2dUeXBlOlwidHlwZVwiLEMyQ1JlbWFpbmluZ1VucmVhZENvdW50OlwiQzJDUmVtYWluaW5nVW5yZWFkTGlzdFwiLEMyQ1BhaXJVbnJlYWRDb3VudDpcIkMyQ1BhaXJVbnJlYWRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEdsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELkJJR19EQVRBX0hBTExXQVlfQVVUSF9LRVkpfSksYm9keTp7fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGJsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELlNFTkRfTUVTU0FHRSl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHRvQWNjb3VudDpcIlwiLG1zZ1NlcTowLG1zZ1JhbmRvbTowLG1zZ0JvZHk6W10sY2xvdWRDdXN0b21EYXRhOnZvaWQgMCxuaWNrOlwiXCIsYXZhdGFyOlwiXCIsbXNnTGlmZVRpbWU6dm9pZCAwLG9mZmxpbmVQdXNoSW5mbzp7cHVzaEZsYWc6MCx0aXRsZTpcIlwiLGRlc2M6XCJcIixleHQ6XCJcIixhcG5zSW5mbzp7YmFkZ2VNb2RlOjB9LGFuZHJvaWRJbmZvOntPUFBPQ2hhbm5lbElEOlwiXCJ9fSxtZXNzYWdlQ29udHJvbEluZm86dm9pZCAwLGNsaWVudFRpbWU6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2Zyb21BY2NvdW50OlwiRnJvbV9BY2NvdW50XCIsdG9BY2NvdW50OlwiVG9fQWNjb3VudFwiLG1zZ1RpbWVTdGFtcDpcIk1zZ1RpbWVTdGFtcFwiLG1zZ1NlcTpcIk1zZ1NlcVwiLG1zZ1JhbmRvbTpcIk1zZ1JhbmRvbVwiLG1zZ0JvZHk6XCJNc2dCb2R5XCIsY291bnQ6XCJNYXhDbnRcIixsYXN0TWVzc2FnZVRpbWU6XCJMYXN0TXNnVGltZVwiLG1lc3NhZ2VLZXk6XCJNc2dLZXlcIixwZWVyQWNjb3VudDpcIlBlZXJfQWNjb3VudFwiLGRhdGE6XCJEYXRhXCIsZGVzY3JpcHRpb246XCJEZXNjXCIsZXh0ZW5zaW9uOlwiRXh0XCIsdHlwZTpcIk1zZ1R5cGVcIixjb250ZW50OlwiTXNnQ29udGVudFwiLHNpemVUeXBlOlwiVHlwZVwiLHV1aWQ6XCJVVUlEXCIsdXJsOlwiXCIsaW1hZ2VVcmw6XCJVUkxcIixmaWxlVXJsOlwiVXJsXCIscmVtb3RlQXVkaW9Vcmw6XCJVcmxcIixyZW1vdGVWaWRlb1VybDpcIlZpZGVvVXJsXCIsdGh1bWJVVUlEOlwiVGh1bWJVVUlEXCIsdmlkZW9VVUlEOlwiVmlkZW9VVUlEXCIsdmlkZW9Vcmw6XCJcIixkb3dubG9hZEZsYWc6XCJEb3dubG9hZF9GbGFnXCIsbmljazpcIkZyb21fQWNjb3VudE5pY2tcIixhdmF0YXI6XCJGcm9tX0FjY291bnRIZWFkdXJsXCIsZnJvbTpcIkZyb21fQWNjb3VudFwiLHRpbWU6XCJNc2dUaW1lU3RhbXBcIixtZXNzYWdlUmFuZG9tOlwiTXNnUmFuZG9tXCIsbWVzc2FnZVNlcXVlbmNlOlwiTXNnU2VxXCIsZWxlbWVudHM6XCJNc2dCb2R5XCIsY2xpZW50U2VxdWVuY2U6XCJDbGllbnRTZXFcIixwYXlsb2FkOlwiTXNnQ29udGVudFwiLG1lc3NhZ2VMaXN0OlwiTXNnTGlzdFwiLG1lc3NhZ2VOdW1iZXI6XCJNc2dOdW1cIixhYnN0cmFjdExpc3Q6XCJBYnN0cmFjdExpc3RcIixtZXNzYWdlQm9keTpcIk1zZ0JvZHlcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQod2wsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELlNFTkRfR1JPVVBfTUVTU0FHRSl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLGdyb3VwSUQ6XCJcIixyYW5kb206MCxjbGllbnRTZXF1ZW5jZTowLHByaW9yaXR5OlwiXCIsbXNnQm9keTpbXSxjbG91ZEN1c3RvbURhdGE6dm9pZCAwLG9ubGluZU9ubHlGbGFnOjAsb2ZmbGluZVB1c2hJbmZvOntwdXNoRmxhZzowLHRpdGxlOlwiXCIsZGVzYzpcIlwiLGV4dDpcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6MH0sYW5kcm9pZEluZm86e09QUE9DaGFubmVsSUQ6XCJcIn19LGdyb3VwQXRJbmZvOltdLG1lc3NhZ2VDb250cm9sSW5mbzp2b2lkIDAsY2xpZW50VGltZTp2b2lkIDAsbmVlZFJlYWRSZWNlaXB0OjB9LGtleU1hcDp7cmVxdWVzdDp7dG86XCJHcm91cElkXCIsZXh0ZW5zaW9uOlwiRXh0XCIsZGF0YTpcIkRhdGFcIixkZXNjcmlwdGlvbjpcIkRlc2NcIixyYW5kb206XCJSYW5kb21cIixzZXF1ZW5jZTpcIlJlcU1zZ1NlcVwiLGNvdW50OlwiUmVxTXNnTnVtYmVyXCIsdHlwZTpcIk1zZ1R5cGVcIixwcmlvcml0eTpcIk1zZ1ByaW9yaXR5XCIsY29udGVudDpcIk1zZ0NvbnRlbnRcIixlbGVtZW50czpcIk1zZ0JvZHlcIixzaXplVHlwZTpcIlR5cGVcIix1dWlkOlwiVVVJRFwiLHVybDpcIlwiLGltYWdlVXJsOlwiVVJMXCIsZmlsZVVybDpcIlVybFwiLHJlbW90ZUF1ZGlvVXJsOlwiVXJsXCIscmVtb3RlVmlkZW9Vcmw6XCJWaWRlb1VybFwiLHRodW1iVVVJRDpcIlRodW1iVVVJRFwiLHZpZGVvVVVJRDpcIlZpZGVvVVVJRFwiLHZpZGVvVXJsOlwiXCIsZG93bmxvYWRGbGFnOlwiRG93bmxvYWRfRmxhZ1wiLGNsaWVudFNlcXVlbmNlOlwiQ2xpZW50U2VxXCIsZnJvbTpcIkZyb21fQWNjb3VudFwiLHRpbWU6XCJNc2dUaW1lU3RhbXBcIixtZXNzYWdlUmFuZG9tOlwiTXNnUmFuZG9tXCIsbWVzc2FnZVNlcXVlbmNlOlwiTXNnU2VxXCIscGF5bG9hZDpcIk1zZ0NvbnRlbnRcIixtZXNzYWdlTGlzdDpcIk1zZ0xpc3RcIixtZXNzYWdlTnVtYmVyOlwiTXNnTnVtXCIsYWJzdHJhY3RMaXN0OlwiQWJzdHJhY3RMaXN0XCIsbWVzc2FnZUJvZHk6XCJNc2dCb2R5XCIsbmVlZFJlYWRSZWNlaXB0OlwiTmVlZFJlYWRSZWNlaXB0XCJ9LHJlc3BvbnNlOntNc2dUaW1lOlwidGltZVwiLE1zZ1NlcTpcInNlcXVlbmNlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHRkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELlJFVk9LRV9DMkNfTUVTU0FHRSl9KSxib2R5Onttc2dJbmZvOntmcm9tQWNjb3VudDpcIlwiLHRvQWNjb3VudDpcIlwiLG1zZ1RpbWVTdGFtcDowLG1zZ1NlcTowLG1zZ1JhbmRvbTowfX0sa2V5TWFwOntyZXF1ZXN0Onttc2dJbmZvOlwiTXNnSW5mb1wiLG1zZ1RpbWVTdGFtcDpcIk1zZ1RpbWVTdGFtcFwiLG1zZ1NlcTpcIk1zZ1NlcVwiLG1zZ1JhbmRvbTpcIk1zZ1JhbmRvbVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChTZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuUkVWT0tFX0dST1VQX01FU1NBR0UpfSksYm9keTp7Z3JvdXBJRDpcIlwiLG1zZ1NlcUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21zZ1NlcUxpc3Q6XCJNc2dTZXFMaXN0XCIsbXNnU2VxOlwiTXNnU2VxXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGFkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9DMkNfUk9BTV9NRVNTQUdFUyl9KSxib2R5OntwZWVyQWNjb3VudDpcIlwiLGNvdW50OjE1LGxhc3RNZXNzYWdlVGltZTowLG1lc3NhZ2VLZXk6XCJcIix3aXRoUmVjYWxsZWRNZXNzYWdlOjF9LGtleU1hcDp7cmVxdWVzdDp7bWVzc2FnZUtleTpcIk1zZ0tleVwiLHBlZXJBY2NvdW50OlwiUGVlcl9BY2NvdW50XCIsY291bnQ6XCJNYXhDbnRcIixsYXN0TWVzc2FnZVRpbWU6XCJMYXN0TXNnVGltZVwiLHdpdGhSZWNhbGxlZE1lc3NhZ2U6XCJXaXRoUmVjYWxsZWRNc2dcIn0scmVzcG9uc2U6e0xhc3RNc2dUaW1lOlwibGFzdE1lc3NhZ2VUaW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KENkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfR1JPVVBfUk9BTV9NRVNTQUdFUyl9KSxib2R5Ont3aXRoUmVjYWxsZWRNc2c6MSxncm91cElEOlwiXCIsY291bnQ6MTUsc2VxdWVuY2U6XCJcIn0sa2V5TWFwOntyZXF1ZXN0OntzZXF1ZW5jZTpcIlJlcU1zZ1NlcVwiLGNvdW50OlwiUmVxTXNnTnVtYmVyXCIsd2l0aFJlY2FsbGVkTWVzc2FnZTpcIldpdGhSZWNhbGxlZE1zZ1wifSxyZXNwb25zZTp7UmFuZG9tOlwicmFuZG9tXCIsTXNnVGltZTpcInRpbWVcIixNc2dTZXE6XCJzZXF1ZW5jZVwiLFJlcU1zZ1NlcTpcInNlcXVlbmNlXCIsUnNwTXNnTGlzdDpcIm1lc3NhZ2VMaXN0XCIsSXNQbGFjZU1zZzpcImlzUGxhY2VNZXNzYWdlXCIsSXNTeXN0ZW1Nc2c6XCJpc1N5c3RlbU1lc3NhZ2VcIixUb0dyb3VwSWQ6XCJ0b1wiLEVudW1Gcm9tX0FjY291bnRUeXBlOlwiZnJvbUFjY291bnRUeXBlXCIsRW51bVRvX0FjY291bnRUeXBlOlwidG9BY2NvdW50VHlwZVwiLEdyb3VwQ29kZTpcImdyb3VwQ29kZVwiLE1zZ1ByaW9yaXR5OlwicHJpb3JpdHlcIixNc2dCb2R5OlwiZWxlbWVudHNcIixNc2dUeXBlOlwidHlwZVwiLE1zZ0NvbnRlbnQ6XCJjb250ZW50XCIsSXNGaW5pc2hlZDpcImNvbXBsZXRlXCIsRG93bmxvYWRfRmxhZzpcImRvd25sb2FkRmxhZ1wiLENsaWVudFNlcTpcImNsaWVudFNlcXVlbmNlXCIsVGh1bWJVVUlEOlwidGh1bWJVVUlEXCIsVmlkZW9VVUlEOlwidmlkZW9VVUlEXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KG5kLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELlNFVF9DMkNfTUVTU0FHRV9SRUFEKX0pLGJvZHk6e0MyQ01zZ1JlYWRlZDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bGFzdE1lc3NhZ2VUaW1lOlwiTGFzdGVkTXNnVGltZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChvZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KGVpLkNNRC5TRVRfQzJDX1BFRVJfTVVURV9OT1RJRklDQVRJT05TKX0pLGJvZHk6e3VzZXJJRExpc3Q6dm9pZCAwLG11dGVGbGFnOjB9LGtleU1hcDp7cmVxdWVzdDp7dXNlcklETGlzdDpcIlBlZXJfQWNjb3VudFwiLG11dGVGbGFnOlwiTXV0ZV9Ob3RpZmljYXRpb25zXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHJkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9DMkNfUEVFUl9NVVRFX05PVElGSUNBVElPTlMpfSksYm9keTp7dXBkYXRlU2VxdWVuY2U6MH0sa2V5TWFwOntyZXNwb25zZTp7TXV0ZU5vdGlmaWNhdGlvbnNMaXN0OlwibXV0ZUZsYWdMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KERkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5TRVRfR1JPVVBfTUVTU0FHRV9SRUFEKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLG1lc3NhZ2VSZWFkU2VxOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OnttZXNzYWdlUmVhZFNlcTpcIk1zZ1JlYWRlZFNlcVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChOZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KGVpLkNNRC5TRVRfQUxMX01FU1NBR0VfUkVBRCl9KSxib2R5OntyZWFkQWxsQzJDTWVzc2FnZTowLGdyb3VwTWVzc2FnZVJlYWRJbmZvTGlzdDpbXX0sa2V5TWFwOntyZXF1ZXN0OntyZWFkQWxsQzJDTWVzc2FnZTpcIkMyQ1JlYWRBbGxNc2dcIixncm91cE1lc3NhZ2VSZWFkSW5mb0xpc3Q6XCJHcm91cFJlYWRJbmZvXCIsbWVzc2FnZVNlcXVlbmNlOlwiTXNnU2VxXCJ9LHJlc3BvbnNlOntDMkNSZWFkQWxsTXNnOlwicmVhZEFsbEMyQ01lc3NhZ2VcIixHcm91cFJlYWRJbmZvQXJyYXk6XCJncm91cE1lc3NhZ2VSZWFkSW5mb0xpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoaWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChlaS5DTUQuREVMRVRFX0MyQ19NRVNTQUdFKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG86XCJcIixrZXlMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntrZXlMaXN0OlwiTXNnS2V5TGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChVZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuREVMRVRFX0dST1VQX01FU1NBR0UpfSksYm9keTp7Z3JvdXBJRDpcIlwiLGRlbGV0ZXI6XCJcIixrZXlMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntkZWxldGVyOlwiRGVsZXRlcl9BY2NvdW50XCIsa2V5TGlzdDpcIlNlcXNcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoa2QsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9SRUFEX1JFQ0VJUFQpfSksYm9keTp7Z3JvdXBJRDpcIlwiLHNlcXVlbmNlTGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7c2VxdWVuY2U6XCJNc2dTZXFcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTGQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELlNFTkRfUkVBRF9SRUNFSVBUKX0pLGJvZHk6e2dyb3VwSUQ6XCJcIixzZXF1ZW5jZUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3NlcXVlbmNlTGlzdDpcIk1zZ1NlcUxpc3RcIixzZXF1ZW5jZTpcIk1zZ1NlcVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChSZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX1JFQURfUkVDRUlQVF9ERVRBSUwpfSksYm9keTp7Z3JvdXBJRDpcIlwiLHNlcXVlbmNlOnZvaWQgMCxmbGFnOjAsY3Vyc29yOjAsY291bnQ6MH0sa2V5TWFwOntyZXF1ZXN0OntzZXF1ZW5jZTpcIk1zZ1NlcVwiLGNvdW50OlwiTnVtXCJ9LHJlc3BvbnNlOntSZWFkTGlzdDpcInJlYWRVc2VySURMaXN0XCIsUmVhZF9BY2NvdW50OlwidXNlcklEXCIsVW5yZWFkTGlzdDpcInVucmVhZFVzZXJJRExpc3RcIixVbnJlYWRfQWNjb3VudDpcInVzZXJJRFwiLElzRmluaXNoOlwiaXNDb21wbGV0ZWRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoc2QsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX1BFRVJfUkVBRF9USU1FKX0pLGJvZHk6e3VzZXJJRExpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRExpc3Q6XCJUb19BY2NvdW50XCJ9LHJlc3BvbnNlOntSZWFkVGltZTpcInBlZXJSZWFkVGltZUxpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoY2QsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLlJFQ0VOVF9DT05UQUNULFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9DT05WRVJTQVRJT05fTElTVCl9KSxib2R5Ontmcm9tQWNjb3VudDp2b2lkIDAsY291bnQ6MH0sa2V5TWFwOntyZXF1ZXN0Ont9LHJlc3BvbnNlOntTZXNzaW9uSXRlbTpcImNvbnZlcnNhdGlvbnNcIixUb0FjY291bnQ6XCJncm91cElEXCIsVG9fQWNjb3VudDpcInVzZXJJRFwiLFVucmVhZE1zZ0NvdW50OlwidW5yZWFkQ291bnRcIixNc2dHcm91cFJlYWRlZFNlcTpcIm1lc3NhZ2VSZWFkU2VxXCIsQzJjUGVlclJlYWRUaW1lOlwiYzJjUGVlclJlYWRUaW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHVkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5SRUNFTlRfQ09OVEFDVCxcIi5cIikuY29uY2F0KGVpLkNNRC5QQUdJTkdfR0VUX0NPTlZFUlNBVElPTl9MSVNUKX0pLGJvZHk6e2Zyb21BY2NvdW50OnZvaWQgMCx0aW1lU3RhbXA6dm9pZCAwLHN0YXJ0SW5kZXg6dm9pZCAwLHBpbm5lZFRpbWVTdGFtcDp2b2lkIDAscGlubmVkU3RhcnRJbmRleDp2b2lkIDAsb3JkZXJUeXBlOnZvaWQgMCxtZXNzYWdlQXNzaXN0RmxhZzo0LGFzc2lzdEZsYWc6MTV9LGtleU1hcDp7cmVxdWVzdDp7bWVzc2FnZUFzc2lzdEZsYWc6XCJNc2dBc3Npc3RGbGFnc1wiLGFzc2lzdEZsYWc6XCJBc3Npc3RGbGFnc1wiLHBpbm5lZFRpbWVTdGFtcDpcIlRvcFRpbWVTdGFtcFwiLHBpbm5lZFN0YXJ0SW5kZXg6XCJUb3BTdGFydEluZGV4XCJ9LHJlc3BvbnNlOntTZXNzaW9uSXRlbTpcImNvbnZlcnNhdGlvbnNcIixUb0FjY291bnQ6XCJncm91cElEXCIsVG9fQWNjb3VudDpcInVzZXJJRFwiLFVucmVhZE1zZ0NvdW50OlwidW5yZWFkQ291bnRcIixNc2dHcm91cFJlYWRlZFNlcTpcIm1lc3NhZ2VSZWFkU2VxXCIsQzJjUGVlclJlYWRUaW1lOlwiYzJjUGVlclJlYWRUaW1lXCIsTGFzdE1zZ0ZsYWdzOlwibGFzdE1lc3NhZ2VGbGFnXCIsVG9wRmxhZ3M6XCJpc1Bpbm5lZFwiLFRvcFRpbWVTdGFtcDpcInBpbm5lZFRpbWVTdGFtcFwiLFRvcFN0YXJ0SW5kZXg6XCJwaW5uZWRTdGFydEluZGV4XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGxkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5SRUNFTlRfQ09OVEFDVCxcIi5cIikuY29uY2F0KGVpLkNNRC5ERUxFVEVfQ09OVkVSU0FUSU9OKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG9BY2NvdW50OnZvaWQgMCx0eXBlOjEsdG9Hcm91cElEOnZvaWQgMCxjbGVhckhpc3RvcnlNZXNzYWdlOjF9LGtleU1hcDp7cmVxdWVzdDp7dG9Hcm91cElEOlwiVG9Hcm91cGlkXCIsY2xlYXJIaXN0b3J5TWVzc2FnZTpcIkNsZWFyUmFtYmxlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGRkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5SRUNFTlRfQ09OVEFDVCxcIi5cIikuY29uY2F0KGVpLkNNRC5QSU5fQ09OVkVSU0FUSU9OKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsb3BlcmF0aW9uVHlwZToxLGl0ZW1MaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntpdGVtTGlzdDpcIlJlY2VudENvbnRhY3RJdGVtXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHBkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELkRFTEVURV9HUk9VUF9BVF9USVBTKX0pLGJvZHk6e21lc3NhZ2VMaXN0VG9EZWxldGU6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21lc3NhZ2VMaXN0VG9EZWxldGU6XCJEZWxNc2dMaXN0XCIsbWVzc2FnZVNlcTpcIk1zZ1NlcVwiLG1lc3NhZ2VSYW5kb206XCJNc2dSYW5kb21cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoUGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLlBST0ZJTEUsXCIuXCIpLmNvbmNhdChlaS5DTUQuUE9SVFJBSVRfR0VUKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdXNlckl0ZW06W119LGtleU1hcDp7cmVxdWVzdDp7dG9BY2NvdW50OlwiVG9fQWNjb3VudFwiLHN0YW5kYXJkU2VxdWVuY2U6XCJTdGFuZGFyZFNlcXVlbmNlXCIsY3VzdG9tU2VxdWVuY2U6XCJDdXN0b21TZXF1ZW5jZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChVbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuUFJPRklMRSxcIi5cIikuY29uY2F0KGVpLkNNRC5QT1JUUkFJVF9TRVQpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIixwcm9maWxlSXRlbTpbe3RhZzpldS5OSUNLLHZhbHVlOlwiXCJ9LHt0YWc6ZXUuR0VOREVSLHZhbHVlOlwiXCJ9LHt0YWc6ZXUuQUxMT1dUWVBFLHZhbHVlOlwiXCJ9LHt0YWc6ZXUuQVZBVEFSLHZhbHVlOlwiXCJ9XX0sa2V5TWFwOntyZXF1ZXN0Ont0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsc3RhbmRhcmRTZXF1ZW5jZTpcIlN0YW5kYXJkU2VxdWVuY2VcIixjdXN0b21TZXF1ZW5jZTpcIkN1c3RvbVNlcXVlbmNlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEZsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX0JMQUNLTElTVCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHN0YXJ0SW5kZXg6MCxtYXhMaW1pdGVkOjMwLGxhc3RTZXF1ZW5jZTowfSxrZXlNYXA6e3Jlc3BvbnNlOntDdXJydWVudFNlcXVlbmNlOlwiY3VycmVudFNlcXVlbmNlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHFsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuQUREX0JMQUNLTElTVCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHRvQWNjb3VudDpbXX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh4bCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuRlJJRU5ELFwiLlwiKS5jb25jYXQoZWkuQ01ELkRFTEVURV9CTEFDS0xJU1QpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIix0b0FjY291bnQ6W119fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoVmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfRlJJRU5EX0xJU1QpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIixzdGFydEluZGV4OjAsc3RhbmRhcmRTZXF1ZW5jZTowLGN1c3RvbVNlcXVlbmNlOjB9LGtleU1hcDp7cmVzcG9uc2U6e0ZyaWVuZE51bTpcImZyaWVuZENvdW50XCIsVXNlckRhdGFJdGVtOlwicmVzdWx0TGlzdFwiLFZhbHVlSXRlbTpcInRhZ1ZhbHVlTGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChqbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuRlJJRU5ELFwiLlwiKS5jb25jYXQoZWkuQ01ELkFERF9GUklFTkQpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIixhZGRGcmllbmRJdGVtOltdLHR5cGU6XCJcIn0sa2V5TWFwOntyZXF1ZXN0Ontzb3VyY2U6XCJBZGRTb3VyY2VcIix3b3JkaW5nOlwiQWRkV29yZGluZ1wiLHR5cGU6XCJBZGRUeXBlXCJ9LHJlc3BvbnNlOntSZXN1bHRJdGVtOlwicmVzdWx0TGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChXbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuRlJJRU5ELFwiLlwiKS5jb25jYXQoZWkuQ01ELlVQREFURV9GUklFTkQpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIix1cGRhdGVJdGVtOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntzbnNJdGVtOlwiU25zSXRlbVwifSxyZXNwb25zZTp7UmVzdWx0SXRlbTpcInJlc3VsdExpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoSGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KGVpLkNNRC5ERUxFVEVfRlJJRU5EKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdXNlcklETGlzdDpbXSx0eXBlOlwiXCJ9LGtleU1hcDp7cmVxdWVzdDp7dHlwZTpcIkRlbGV0ZVR5cGVcIn0scmVzcG9uc2U6e1Jlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEtsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX0ZSSUVORF9QUk9GSUxFKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdXNlcklETGlzdDp2b2lkIDAsdGFnTGlzdDp2b2lkIDB9LGtleU1hcDp7cmVzcG9uc2U6e0luZm9JdGVtOlwicmVzdWx0TGlzdFwiLFNuc1Byb2ZpbGVJdGVtOlwidGFnVmFsdWVMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEJsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuQ0hFQ0tfRlJJRU5EKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdXNlcklETGlzdDpbXSx0eXBlOlwiXCJ9LGtleU1hcDp7cmVxdWVzdDp7dHlwZTpcIkNoZWNrVHlwZVwifSxyZXNwb25zZTp7SW5mb0l0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KCRsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX0ZSSUVORF9BUFBMSUNBVElPTl9MSVNUKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsYXBwbGljYXRpb25UeXBlOlwiXCIsc3RhcnRUaW1lOjAsbWF4TGltaXRlZDowLGxhc3RTZXF1ZW5jZTowfSxrZXlNYXA6e3Jlc3BvbnNlOntQZW5kZW5jeUl0ZW06XCJyZXN1bHRMaXN0XCIsQWRkU291cmNlOlwic291cmNlXCIsQWRkVGltZTpcInRpbWVcIixBZGRXb3JkaW5nOlwid29yZGluZ1wiLEltYWdlOlwiYXZhdGFyXCIsVW5yZWFkUGVuZGVuY3lDb3VudDpcInVucmVhZENvdW50XCIsVG9fQWNjb3VudDpcInVzZXJJRFwiLFBlbmRlbmN5VHlwZTpcInR5cGVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWWwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KGVpLkNNRC5SRVNQT05EX0ZSSUVORF9BUFBMSUNBVElPTil9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHJlc3BvbnNlRnJpZW5kSXRlbTpbXX0sa2V5TWFwOntyZXF1ZXN0Ont0YWc6XCJUYWdOYW1lXCIsYWN0aW9uOlwiUmVzcG9uc2VBY3Rpb25cIn0scmVzcG9uc2U6e1Jlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHpsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuREVMRVRFX0ZSSUVORF9BUFBMSUNBVElPTil9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHR5cGU6XCJcIix1c2VySURMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont0eXBlOlwiUGVuZGVuY3lUeXBlXCIsdXNlcklETGlzdDpcIlRvX0FjY291bnRcIn0scmVzcG9uc2U6e1Jlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEpsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuUkVQT1JUX0ZSSUVORF9BUFBMSUNBVElPTil9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLGxhdGVzdFRpbWVTdGFtcDpcIlwifSxrZXlNYXA6e3JlcXVlc3Q6e2xhdGVzdFRpbWVTdGFtcDpcIkxhdGVzdFBlbmRlbmN5VGltZVN0YW1wXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFFsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuQ1JFQVRFX0ZSSUVORF9HUk9VUCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLGdyb3VwTmFtZTp2b2lkIDAsdXNlcklETGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7Z3JvdXBOYW1lOlwiR3JvdXBOYW1lXCIsdXNlcklETGlzdDpcIlRvX0FjY291bnRcIn0scmVzcG9uc2U6e1Jlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFpsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuREVMRVRFX0ZSSUVORF9HUk9VUCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLG5hbWVMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntuYW1lTGlzdDpcIkdyb3VwTmFtZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChYbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuRlJJRU5ELFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9GUklFTkRfR1JPVVBfTElTVCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLGxhc3RTZXF1ZW5jZTowLG5lZWRGcmllbmQ6XCJOZWVkX0ZyaWVuZF9UeXBlX1llc1wifSxrZXlNYXA6e3Jlc3BvbnNlOntSZXN1bHRJdGVtOlwicmVzdWx0TGlzdFwiLEdyb3VwTmFtZTpcIm5hbWVcIixGcmllbmROdW1iZXI6XCJmcmllbmRDb3VudFwiLFRvX0FjY291bnQ6XCJ1c2VySURMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGVkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuVVBEQVRFX0ZSSUVORF9HUk9VUCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLG9sZE5hbWU6XCJcIixuZXdOYW1lOnZvaWQgMCx1cGRhdGVHcm91cEl0ZW06dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e29sZE5hbWU6XCJHcm91cE9sZE5hbWVcIixuZXdOYW1lOlwiR3JvdXBOZXdOYW1lXCJ9LHJlc3BvbnNlOntVcGRhdGVUeXBlOlwidHlwZVwiLFJlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGdkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfSk9JTkVEX0dST1VQUyl9KSxib2R5OnttZW1iZXJBY2NvdW50OlwiXCIsbGltaXQ6dm9pZCAwLG9mZnNldDp2b2lkIDAsZ3JvdXBUeXBlOnZvaWQgMCxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjp2b2lkIDAsc2VsZkluZm9GaWx0ZXI6dm9pZCAwfX0sa2V5TWFwOntyZXF1ZXN0OnttZW1iZXJBY2NvdW50OlwiTWVtYmVyX0FjY291bnRcIn0scmVzcG9uc2U6e0dyb3VwSWRMaXN0OlwiZ3JvdXBzXCIsTXNnRmxhZzpcIm1lc3NhZ2VSZW1pbmRUeXBlXCIsTm9VbnJlYWRTZXFMaXN0OlwiZXhjbHVkZWRVbnJlYWRTZXF1ZW5jZUxpc3RcIixNc2dTZXE6XCJyZWFkZWRTZXF1ZW5jZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChoZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX0dST1VQX0lORk8pfSksYm9keTp7Z3JvdXBJRExpc3Q6dm9pZCAwLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIixcIkludHJvZHVjdGlvblwiLFwiTm90aWZpY2F0aW9uXCIsXCJGYWNlVXJsXCIsXCJPd25lcl9BY2NvdW50XCIsXCJDcmVhdGVUaW1lXCIsXCJJbmZvU2VxXCIsXCJMYXN0SW5mb1RpbWVcIixcIkxhc3RNc2dUaW1lXCIsXCJNZW1iZXJOdW1cIixcIk1heE1lbWJlck51bVwiLFwiQXBwbHlKb2luT3B0aW9uXCIsXCJOZXh0TXNnU2VxXCIsXCJTaHV0VXBBbGxNZW1iZXJcIl0sZ3JvdXBDdXN0b21GaWVsZEZpbHRlcjp2b2lkIDAsbWVtYmVySW5mb0ZpbHRlcjp2b2lkIDAsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6dm9pZCAwfX0sa2V5TWFwOntyZXF1ZXN0Ontncm91cElETGlzdDpcIkdyb3VwSWRMaXN0XCIsZ3JvdXBDdXN0b21GaWVsZDpcIkFwcERlZmluZWREYXRhXCIsbWVtYmVyQ3VzdG9tRmllbGQ6XCJBcHBNZW1iZXJEZWZpbmVkRGF0YVwiLGdyb3VwQ3VzdG9tRmllbGRGaWx0ZXI6XCJBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cFwiLG1lbWJlckN1c3RvbUZpZWxkRmlsdGVyOlwiQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBNZW1iZXJcIn0scmVzcG9uc2U6e0dyb3VwSWRMaXN0OlwiZ3JvdXBzXCIsTXNnRmxhZzpcIm1lc3NhZ2VSZW1pbmRUeXBlXCIsQXBwRGVmaW5lZERhdGE6XCJncm91cEN1c3RvbUZpZWxkXCIsQXBwTWVtYmVyRGVmaW5lZERhdGE6XCJtZW1iZXJDdXN0b21GaWVsZFwiLEFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwOlwiZ3JvdXBDdXN0b21GaWVsZEZpbHRlclwiLEFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyOlwibWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXJcIixJbmZvU2VxOlwiaW5mb1NlcXVlbmNlXCIsTWVtYmVyTGlzdDpcIm1lbWJlcnNcIixHcm91cEluZm86XCJncm91cHNcIixTaHV0VXBVbnRpbDpcIm11dGVVbnRpbFwiLFNodXRVcEFsbE1lbWJlcjpcIm11dGVBbGxNZW1iZXJzXCIsQXBwbHlKb2luT3B0aW9uOlwiam9pbk9wdGlvblwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChmZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuQ1JFQVRFX0dST1VQKX0pLGJvZHk6e3R5cGU6dm9pZCAwLG5hbWU6dm9pZCAwLGdyb3VwSUQ6dm9pZCAwLG93bmVySUQ6dm9pZCAwLGludHJvZHVjdGlvbjp2b2lkIDAsbm90aWZpY2F0aW9uOnZvaWQgMCxtYXhNZW1iZXJOdW06dm9pZCAwLGpvaW5PcHRpb246dm9pZCAwLG1lbWJlckxpc3Q6dm9pZCAwLGdyb3VwQ3VzdG9tRmllbGQ6dm9pZCAwLG1lbWJlckN1c3RvbUZpZWxkOnZvaWQgMCx3ZWJQdXNoRmxhZzoxLGF2YXRhcjpcIkZhY2VVcmxcIn0sa2V5TWFwOntyZXF1ZXN0Ontvd25lcklEOlwiT3duZXJfQWNjb3VudFwiLHVzZXJJRDpcIk1lbWJlcl9BY2NvdW50XCIsYXZhdGFyOlwiRmFjZVVybFwiLG1heE1lbWJlck51bTpcIk1heE1lbWJlckNvdW50XCIsam9pbk9wdGlvbjpcIkFwcGx5Sm9pbk9wdGlvblwiLGdyb3VwQ3VzdG9tRmllbGQ6XCJBcHBEZWZpbmVkRGF0YVwiLG1lbWJlckN1c3RvbUZpZWxkOlwiQXBwTWVtYmVyRGVmaW5lZERhdGFcIn0scmVzcG9uc2U6e0h1Z2VHcm91cEZsYWc6XCJhdkNoYXRSb29tRmxhZ1wiLE92ZXJKb2luZWRHcm91cExpbWl0X0FjY291bnQ6XCJvdmVyTGltaXRVc2VySURMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KF9kLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5ERVNUUk9ZX0dST1VQKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KG1kLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5NT0RJRllfR1JPVVBfSU5GTyl9KSxib2R5Ontncm91cElEOnZvaWQgMCxuYW1lOnZvaWQgMCxpbnRyb2R1Y3Rpb246dm9pZCAwLG5vdGlmaWNhdGlvbjp2b2lkIDAsYXZhdGFyOnZvaWQgMCxtYXhNZW1iZXJOdW06dm9pZCAwLGpvaW5PcHRpb246dm9pZCAwLGdyb3VwQ3VzdG9tRmllbGQ6dm9pZCAwLG11dGVBbGxNZW1iZXJzOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OnttYXhNZW1iZXJOdW06XCJNYXhNZW1iZXJDb3VudFwiLGdyb3VwQ3VzdG9tRmllbGQ6XCJBcHBEZWZpbmVkRGF0YVwiLG11dGVBbGxNZW1iZXJzOlwiU2h1dFVwQWxsTWVtYmVyXCIsam9pbk9wdGlvbjpcIkFwcGx5Sm9pbk9wdGlvblwiLGF2YXRhcjpcIkZhY2VVcmxcIn0scmVzcG9uc2U6e0FwcERlZmluZWREYXRhOlwiZ3JvdXBDdXN0b21GaWVsZFwiLFNodXRVcEFsbE1lbWJlcjpcIm11dGVBbGxNZW1iZXJzXCIsQXBwbHlKb2luT3B0aW9uOlwiam9pbk9wdGlvblwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh2ZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuQVBQTFlfSk9JTl9HUk9VUCl9KSxib2R5Ontncm91cElEOnZvaWQgMCxhcHBseU1lc3NhZ2U6dm9pZCAwLHVzZXJEZWZpbmVkRmllbGQ6dm9pZCAwLHdlYlB1c2hGbGFnOjEsaGlzdG9yeU1lc3NhZ2VGbGFnOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OnthcHBseU1lc3NhZ2U6XCJBcHBseU1zZ1wiLGhpc3RvcnlNZXNzYWdlRmxhZzpcIkh1Z2VHcm91cEhpc3RvcnlNc2dGbGFnXCJ9LHJlc3BvbnNlOntIdWdlR3JvdXBGbGFnOlwiYXZDaGF0Um9vbUZsYWdcIixBVkNoYXRSb29tS2V5OlwiYXZDaGF0Um9vbUtleVwiLFJzcE1zZ0xpc3Q6XCJtZXNzYWdlTGlzdFwiLFRvR3JvdXBJZDpcInRvXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KE1kLGZ1bmN0aW9uKGUpe2UuYTIsZS50aW55aWQ7cmV0dXJue2hlYWQ6U24oe30sT24oZSxbXCJhMlwiLFwidGlueWlkXCJdKSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkJJR19HUk9VUF9OT19BVVRILFwiLlwiKS5jb25jYXQoZWkuQ01ELkFQUExZX0pPSU5fR1JPVVApfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsYXBwbHlNZXNzYWdlOnZvaWQgMCx1c2VyRGVmaW5lZEZpZWxkOnZvaWQgMCx3ZWJQdXNoRmxhZzoxfSxrZXlNYXA6e3JlcXVlc3Q6e2FwcGx5TWVzc2FnZTpcIkFwcGx5TXNnXCJ9LHJlc3BvbnNlOntIdWdlR3JvdXBGbGFnOlwiYXZDaGF0Um9vbUZsYWdcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoeWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELlFVSVRfR1JPVVApfSksYm9keTp7Z3JvdXBJRDp2b2lkIDB9fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoSWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELlNFQVJDSF9HUk9VUF9CWV9JRCl9KSxib2R5Ontncm91cElETGlzdDp2b2lkIDAscmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZVB1YmxpY0luZm9GaWx0ZXI6W1wiVHlwZVwiLFwiTmFtZVwiLFwiSW50cm9kdWN0aW9uXCIsXCJOb3RpZmljYXRpb25cIixcIkZhY2VVcmxcIixcIkNyZWF0ZVRpbWVcIixcIk93bmVyX0FjY291bnRcIixcIkxhc3RJbmZvVGltZVwiLFwiTGFzdE1zZ1RpbWVcIixcIk5leHRNc2dTZXFcIixcIk1lbWJlck51bVwiLFwiTWF4TWVtYmVyTnVtXCIsXCJBcHBseUpvaW5PcHRpb25cIl19fSxrZXlNYXA6e3Jlc3BvbnNlOntBcHBseUpvaW5PcHRpb246XCJqb2luT3B0aW9uXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEVkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5DSEFOR0VfR1JPVVBfT1dORVIpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsbmV3T3duZXJJRDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bmV3T3duZXJJRDpcIk5ld093bmVyX0FjY291bnRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoVGQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkhBTkRMRV9BUFBMWV9KT0lOX0dST1VQKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGFwcGxpY2FudDp2b2lkIDAsaGFuZGxlQWN0aW9uOnZvaWQgMCxoYW5kbGVNZXNzYWdlOnZvaWQgMCxhdXRoZW50aWNhdGlvbjp2b2lkIDAsbWVzc2FnZUtleTp2b2lkIDAsdXNlckRlZmluZWRGaWVsZDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7YXBwbGljYW50OlwiQXBwbGljYW50X0FjY291bnRcIixoYW5kbGVBY3Rpb246XCJIYW5kbGVNc2dcIixoYW5kbGVNZXNzYWdlOlwiQXBwcm92YWxNc2dcIixtZXNzYWdlS2V5OlwiTXNnS2V5XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEFkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5IQU5ETEVfR1JPVVBfSU5WSVRBVElPTil9KSxib2R5Ontncm91cElEOnZvaWQgMCxpbnZpdGVyOnZvaWQgMCxoYW5kbGVBY3Rpb246dm9pZCAwLGhhbmRsZU1lc3NhZ2U6dm9pZCAwLGF1dGhlbnRpY2F0aW9uOnZvaWQgMCxtZXNzYWdlS2V5OnZvaWQgMCx1c2VyRGVmaW5lZEZpZWxkOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntpbnZpdGVyOlwiSW52aXRlcl9BY2NvdW50XCIsaGFuZGxlQWN0aW9uOlwiSGFuZGxlTXNnXCIsaGFuZGxlTWVzc2FnZTpcIkFwcHJvdmFsTXNnXCIsbWVzc2FnZUtleTpcIk1zZ0tleVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChPZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX0dST1VQX0FQUExJQ0FUSU9OKX0pLGJvZHk6e3N0YXJ0VGltZTp2b2lkIDAsbGltaXQ6dm9pZCAwLGhhbmRsZUFjY291bnQ6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2hhbmRsZUFjY291bnQ6XCJIYW5kbGVfQWNjb3VudFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChHZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KGVpLkNNRC5ERUxFVEVfR1JPVVBfU1lTVEVNX01FU1NBR0UpfSksYm9keTp7bWVzc2FnZUxpc3RUb0RlbGV0ZTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bWVzc2FnZUxpc3RUb0RlbGV0ZTpcIkRlbE1zZ0xpc3RcIixtZXNzYWdlU2VxOlwiTXNnU2VxXCIsbWVzc2FnZVJhbmRvbTpcIk1zZ1JhbmRvbVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChiZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuQklHX0dST1VQX0xPTkdfUE9MTElORyxcIi5cIikuY29uY2F0KGVpLkNNRC5BVkNIQVRST09NX0xPTkdfUE9MTCl9KSxib2R5OntVU1A6MSxzdGFydFNlcToxLGhvbGRUaW1lOjkwLGtleTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7VVNQOlwiVVNQXCJ9LHJlc3BvbnNlOntUb0dyb3VwSWQ6XCJncm91cElEXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHdkLGZ1bmN0aW9uKGUpe2UuYTIsZS50aW55aWQ7cmV0dXJue2hlYWQ6U24oe30sT24oZSxbXCJhMlwiLFwidGlueWlkXCJdKSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkJJR19HUk9VUF9MT05HX1BPTExJTkdfTk9fQVVUSCxcIi5cIikuY29uY2F0KGVpLkNNRC5BVkNIQVRST09NX0xPTkdfUE9MTCl9KSxib2R5OntVU1A6MSxzdGFydFNlcToxLGhvbGRUaW1lOjkwLGtleTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7VVNQOlwiVVNQXCJ9LHJlc3BvbnNlOntUb0dyb3VwSWQ6XCJncm91cElEXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFBkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfT05MSU5FX01FTUJFUl9OVU0pfSksYm9keTp7Z3JvdXBJRDp2b2lkIDB9fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoRmQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELlNFVF9HUk9VUF9BVFRSSUJVVEVTKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGdyb3VwQXR0cmlidXRlTGlzdDp2b2lkIDAsbWFpblNlcXVlbmNlOnZvaWQgMCxhdkNoYXRSb29tS2V5OnZvaWQgMCxhdHRyaWJ1dGVDb250cm9sOltcIlJhY2VDb25mbGljdFwiXX0sa2V5TWFwOntyZXF1ZXN0OntrZXk6XCJrZXlcIix2YWx1ZTpcInZhbHVlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHFkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5NT0RJRllfR1JPVVBfQVRUUklCVVRFUyl9KSxib2R5Ontncm91cElEOnZvaWQgMCxncm91cEF0dHJpYnV0ZUxpc3Q6dm9pZCAwLG1haW5TZXF1ZW5jZTp2b2lkIDAsYXZDaGF0Um9vbUtleTp2b2lkIDAsYXR0cmlidXRlQ29udHJvbDpbXCJSYWNlQ29uZmxpY3RcIl19LGtleU1hcDp7cmVxdWVzdDp7a2V5Olwia2V5XCIsdmFsdWU6XCJ2YWx1ZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh4ZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuREVMRVRFX0dST1VQX0FUVFJJQlVURVMpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsZ3JvdXBBdHRyaWJ1dGVMaXN0OnZvaWQgMCxtYWluU2VxdWVuY2U6dm9pZCAwLGF2Q2hhdFJvb21LZXk6dm9pZCAwLGF0dHJpYnV0ZUNvbnRyb2w6W1wiUmFjZUNvbmZsaWN0XCJdfSxrZXlNYXA6e3JlcXVlc3Q6e2tleTpcImtleVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChWZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuQ0xFQVJfR1JPVVBfQVRUUklCVVRFUyl9KSxib2R5Ontncm91cElEOnZvaWQgMCxtYWluU2VxdWVuY2U6dm9pZCAwLGF2Q2hhdFJvb21LZXk6dm9pZCAwLGF0dHJpYnV0ZUNvbnRyb2w6W1wiUmFjZUNvbmZsaWN0XCJdfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEtkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUF9BVFRSLFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9HUk9VUF9BVFRSSUJVVEVTKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGF2Q2hhdFJvb21LZXk6dm9pZCAwLGdyb3VwVHlwZToxfSxrZXlNYXA6e3JlcXVlc3Q6e2F2Q2hhdFJvb21LZXk6XCJLZXlcIixncm91cFR5cGU6XCJHcm91cFR5cGVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQmQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9HUk9VUF9NRU1CRVJfTElTVCl9KSxib2R5Ontncm91cElEOnZvaWQgMCxsaW1pdDowLG9mZnNldDp2b2lkIDAsbmV4dDp2b2lkIDAsbWVtYmVyUm9sZUZpbHRlcjp2b2lkIDAsbWVtYmVySW5mb0ZpbHRlcjpbXCJSb2xlXCIsXCJOYW1lQ2FyZFwiLFwiU2h1dFVwVW50aWxcIixcIkpvaW5UaW1lXCJdLG1lbWJlckN1c3RvbUZpZWxkRmlsdGVyOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OnttZW1iZXJDdXN0b21GaWVsZEZpbHRlcjpcIkFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyXCJ9LHJlc3BvbnNlOntBcHBNZW1iZXJEZWZpbmVkRGF0YTpcIm1lbWJlckN1c3RvbUZpZWxkXCIsQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBNZW1iZXI6XCJtZW1iZXJDdXN0b21GaWVsZEZpbHRlclwiLE1lbWJlckxpc3Q6XCJtZW1iZXJzXCIsU2h1dFVwVW50aWw6XCJtdXRlVW50aWxcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoSGQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9HUk9VUF9NRU1CRVJfSU5GTyl9KSxib2R5Ontncm91cElEOnZvaWQgMCx1c2VySURMaXN0OnZvaWQgMCxtZW1iZXJJbmZvRmlsdGVyOnZvaWQgMCxtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dXNlcklETGlzdDpcIk1lbWJlcl9MaXN0X0FjY291bnRcIixtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjpcIkFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyXCJ9LHJlc3BvbnNlOntNZW1iZXJMaXN0OlwibWVtYmVyc1wiLFNodXRVcFVudGlsOlwibXV0ZVVudGlsXCIsQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBNZW1iZXI6XCJtZW1iZXJDdXN0b21GaWVsZEZpbHRlclwiLEFwcE1lbWJlckRlZmluZWREYXRhOlwibWVtYmVyQ3VzdG9tRmllbGRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoamQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkFERF9HUk9VUF9NRU1CRVIpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsc2lsZW5jZTp2b2lkIDAsdXNlcklETGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dXNlcklEOlwiTWVtYmVyX0FjY291bnRcIix1c2VySURMaXN0OlwiTWVtYmVyTGlzdFwifSxyZXNwb25zZTp7TWVtYmVyTGlzdDpcIm1lbWJlcnNcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoV2QsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkRFTEVURV9HUk9VUF9NRU1CRVIpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsdXNlcklETGlzdDp2b2lkIDAscmVhc29uOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VySURMaXN0OlwiTWVtYmVyVG9EZWxfQWNjb3VudFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChZZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuTU9ESUZZX0dST1VQX01FTUJFUl9JTkZPKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHVzZXJJRDp2b2lkIDAsbWVzc2FnZVJlbWluZFR5cGU6dm9pZCAwLG5hbWVDYXJkOnZvaWQgMCxyb2xlOnZvaWQgMCxtZW1iZXJDdXN0b21GaWVsZDp2b2lkIDAsbXV0ZVRpbWU6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRDpcIk1lbWJlcl9BY2NvdW50XCIsbWVtYmVyQ3VzdG9tRmllbGQ6XCJBcHBNZW1iZXJEZWZpbmVkRGF0YVwiLG11dGVUaW1lOlwiU2h1dFVwVGltZVwiLG1lc3NhZ2VSZW1pbmRUeXBlOlwiTXNnRmxhZ1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChYZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSU1fT1BFTl9TVEFULFwiLlwiKS5jb25jYXQoZWkuQ01ELlRJTV9XRUJfUkVQT1JUX1YyKX0pLGJvZHk6e2hlYWRlcjp7fSxldmVudDpbXSxxdWFsaXR5OltdfSxrZXlNYXA6e3JlcXVlc3Q6e1NES1R5cGU6XCJzZGtfdHlwZVwiLFNES1ZlcnNpb246XCJzZGtfdmVyc2lvblwiLGRldmljZVR5cGU6XCJkZXZpY2VfdHlwZVwiLHBsYXRmb3JtOlwicGxhdGZvcm1cIixpbnN0YW5jZUlEOlwiaW5zdGFuY2VfaWRcIix0cmFjZUlEOlwidHJhY2VfaWRcIixTREtBcHBJRDpcInNka19hcHBfaWRcIix1c2VySUQ6XCJ1c2VyX2lkXCIsdGlueUlEOlwidGlueV9pZFwiLGV4dGVuc2lvbjpcImV4dGVuc2lvblwiLHRpbWVzdGFtcDpcInRpbWVzdGFtcFwiLG5ldHdvcmtUeXBlOlwibmV0d29ya190eXBlXCIsZXZlbnRUeXBlOlwiZXZlbnRfdHlwZVwiLGNvZGU6XCJlcnJvcl9jb2RlXCIsbWVzc2FnZTpcImVycm9yX21lc3NhZ2VcIixtb3JlTWVzc2FnZTpcIm1vcmVfbWVzc2FnZVwiLGR1cGxpY2F0ZTpcImR1cGxpY2F0ZVwiLGNvc3RUaW1lOlwiY29zdF90aW1lXCIsbGV2ZWw6XCJsZXZlbFwiLHF1YWxpdHlUeXBlOlwicXVhbGl0eV90eXBlXCIscmVwb3J0SW5kZXg6XCJyZXBvcnRfaW5kZXhcIix3aG9sZVBlcmlvZDpcIndob2xlX3BlcmlvZFwiLHRvdGFsQ291bnQ6XCJ0b3RhbF9jb3VudFwiLHJ0dENvdW50Olwic3VjY2Vzc19jb3VudF9idXNpbmVzc1wiLHN1Y2Nlc3NSYXRlT2ZSZXF1ZXN0OlwicGVyY2VudF9idXNpbmVzc1wiLGNvdW50TGVzc1RoYW4xU2Vjb25kOlwic3VjY2Vzc19jb3VudF9idXNpbmVzc1wiLHBlcmNlbnRPZkNvdW50TGVzc1RoYW4xU2Vjb25kOlwicGVyY2VudF9idXNpbmVzc1wiLGNvdW50TGVzc1RoYW4zU2Vjb25kOlwic3VjY2Vzc19jb3VudF9wbGF0Zm9ybVwiLHBlcmNlbnRPZkNvdW50TGVzc1RoYW4zU2Vjb25kOlwicGVyY2VudF9wbGF0Zm9ybVwiLHN1Y2Nlc3NDb3VudE9mQnVzaW5lc3M6XCJzdWNjZXNzX2NvdW50X2J1c2luZXNzXCIsc3VjY2Vzc1JhdGVPZkJ1c2luZXNzOlwicGVyY2VudF9idXNpbmVzc1wiLHN1Y2Nlc3NDb3VudE9mUGxhdGZvcm06XCJzdWNjZXNzX2NvdW50X3BsYXRmb3JtXCIsc3VjY2Vzc1JhdGVPZlBsYXRmb3JtOlwicGVyY2VudF9wbGF0Zm9ybVwiLHN1Y2Nlc3NDb3VudE9mTWVzc2FnZVJlY2VpdmVkOlwic3VjY2Vzc19jb3VudF9idXNpbmVzc1wiLHN1Y2Nlc3NSYXRlT2ZNZXNzYWdlUmVjZWl2ZWQ6XCJwZXJjZW50X2J1c2luZXNzXCIsYXZnUlRUOlwiYXZlcmFnZV92YWx1ZVwiLGF2Z0RlbGF5OlwiYXZlcmFnZV92YWx1ZVwiLGF2Z1ZhbHVlOlwiYXZlcmFnZV92YWx1ZVwiLHVpUGxhdGZvcm06XCJ1aV9wbGF0Zm9ybVwifX19fShuKSksdGhpcy5fY29uZmlnTWFwLnNldChRZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSEVBUlRCRUFULFwiLlwiKS5jb25jYXQoZWkuQ01ELkFMSVZFKX0pLGJvZHk6e319fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChaZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSU1fT1BFTl9QVVNILFwiLlwiKS5jb25jYXQoZWkuQ01ELk1FU1NBR0VfUFVTSCl9KSxib2R5Ont9LGtleU1hcDp7cmVzcG9uc2U6e0MyY01zZ0FycmF5OlwiQzJDTWVzc2FnZUFycmF5XCIsR3JvdXBNc2dBcnJheTpcImdyb3VwTWVzc2FnZUFycmF5XCIsR3JvdXBUaXBzOlwiZ3JvdXBUaXBzXCIsQzJjTm90aWZ5TXNnQXJyYXk6XCJDMkNOb3RpZnlNZXNzYWdlQXJyYXlcIixDbGllbnRTZXE6XCJjbGllbnRTZXF1ZW5jZVwiLE1zZ1ByaW9yaXR5OlwicHJpb3JpdHlcIixOb3RpY2VTZXE6XCJub3RpY2VTZXF1ZW5jZVwiLE1zZ0NvbnRlbnQ6XCJjb250ZW50XCIsTXNnVHlwZTpcInR5cGVcIixNc2dCb2R5OlwiZWxlbWVudHNcIixUb0dyb3VwSWQ6XCJ0b1wiLERlc2M6XCJkZXNjcmlwdGlvblwiLEV4dDpcImV4dGVuc2lvblwiLElzU3luY01zZzpcImlzU3luY01lc3NhZ2VcIixGbGFnOlwibmVlZFN5bmNcIixOZWVkQWNrOlwibmVlZEFja1wiLFBlbmRlbmN5QWRkX0FjY291bnQ6XCJ1c2VySURcIixQcm9maWxlSW1OaWNrOlwibmlja1wiLFBlbmRlbmN5VHlwZTpcImFwcGxpY2F0aW9uVHlwZVwiLEMyQ1JlYWRBbGxNc2c6XCJyZWFkQWxsQzJDTWVzc2FnZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChlcCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSU1fT1BFTl9QVVNILFwiLlwiKS5jb25jYXQoZWkuQ01ELk1VTFRJX01FU1NBR0VfUFVTSCl9KSxib2R5Ont9LGtleU1hcDp7cmVzcG9uc2U6e0dyb3VwTXNnQXJyYXk6XCJncm91cE1lc3NhZ2VBcnJheVwiLEdyb3VwVGlwczpcImdyb3VwVGlwc1wiLENsaWVudFNlcTpcImNsaWVudFNlcXVlbmNlXCIsTXNnUHJpb3JpdHk6XCJwcmlvcml0eVwiLE5vdGljZVNlcTpcIm5vdGljZVNlcXVlbmNlXCIsTXNnQ29udGVudDpcImNvbnRlbnRcIixNc2dUeXBlOlwidHlwZVwiLE1zZ0JvZHk6XCJlbGVtZW50c1wiLFRvR3JvdXBJZDpcInRvXCIsRGVzYzpcImRlc2NyaXB0aW9uXCIsRXh0OlwiZXh0ZW5zaW9uXCIsSXNTeW5jTXNnOlwiaXNTeW5jTWVzc2FnZVwiLEZsYWc6XCJuZWVkU3luY1wiLE5lZWRBY2s6XCJuZWVkQWNrXCIsUGVuZGVuY3lUeXBlOlwiYXBwbGljYXRpb25UeXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHRwLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOlNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELk1FU1NBR0VfUFVTSF9BQ0spfSksYm9keTp7c2Vzc2lvbkRhdGE6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3Nlc3Npb25EYXRhOlwiU2Vzc2lvbkRhdGFcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQobnAsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6U24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX09QRU5fU1RBVFVTLFwiLlwiKS5jb25jYXQoZWkuQ01ELlNUQVRVU19GT1JDRU9GRkxJTkUpfSksYm9keTp7fSxrZXlNYXA6e3Jlc3BvbnNlOntDMmNOb3RpZnlNc2dBcnJheTpcIkMyQ05vdGlmeU1lc3NhZ2VBcnJheVwiLE5vdGljZVNlcTpcIm5vdGljZVNlcXVlbmNlXCIsS2lja291dE1zZ05vdGlmeTpcImtpY2tvdXRNc2dOb3RpZnlcIixOZXdJbnN0SW5mbzpcIm5ld0luc3RhbmNlSW5mb1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChycCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSU1fTE9OR19NRVNTQUdFLFwiLlwiKS5jb25jYXQoZWkuQ01ELkRPV05MT0FEX01FUkdFUl9NRVNTQUdFKX0pLGJvZHk6e2Rvd25sb2FkS2V5OlwiXCJ9LGtleU1hcDp7cmVzcG9uc2U6e0RhdGE6XCJkYXRhXCIsRGVzYzpcImRlc2NyaXB0aW9uXCIsRXh0OlwiZXh0ZW5zaW9uXCIsRG93bmxvYWRfRmxhZzpcImRvd25sb2FkRmxhZ1wiLFRodW1iVVVJRDpcInRodW1iVVVJRFwiLFZpZGVvVVVJRDpcInZpZGVvVVVJRFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChvcCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpTbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSU1fTE9OR19NRVNTQUdFLFwiLlwiKS5jb25jYXQoZWkuQ01ELlVQTE9BRF9NRVJHRVJfTUVTU0FHRSl9KSxib2R5OnttZXNzYWdlTGlzdDpbXX0sa2V5TWFwOntyZXF1ZXN0Ontmcm9tQWNjb3VudDpcIkZyb21fQWNjb3VudFwiLHRvQWNjb3VudDpcIlRvX0FjY291bnRcIixtc2dUaW1lU3RhbXA6XCJNc2dUaW1lU3RhbXBcIixtc2dTZXE6XCJNc2dTZXFcIixtc2dSYW5kb206XCJNc2dSYW5kb21cIixtc2dCb2R5OlwiTXNnQm9keVwiLHR5cGU6XCJNc2dUeXBlXCIsY29udGVudDpcIk1zZ0NvbnRlbnRcIixkYXRhOlwiRGF0YVwiLGRlc2NyaXB0aW9uOlwiRGVzY1wiLGV4dGVuc2lvbjpcIkV4dFwiLHNpemVUeXBlOlwiVHlwZVwiLHV1aWQ6XCJVVUlEXCIsdXJsOlwiXCIsaW1hZ2VVcmw6XCJVUkxcIixmaWxlVXJsOlwiVXJsXCIscmVtb3RlQXVkaW9Vcmw6XCJVcmxcIixyZW1vdGVWaWRlb1VybDpcIlZpZGVvVXJsXCIsdGh1bWJVVUlEOlwiVGh1bWJVVUlEXCIsdmlkZW9VVUlEOlwiVmlkZW9VVUlEXCIsdmlkZW9Vcmw6XCJcIixkb3dubG9hZEZsYWc6XCJEb3dubG9hZF9GbGFnXCIsZnJvbTpcIkZyb21fQWNjb3VudFwiLHRpbWU6XCJNc2dUaW1lU3RhbXBcIixtZXNzYWdlUmFuZG9tOlwiTXNnUmFuZG9tXCIsbWVzc2FnZVNlcXVlbmNlOlwiTXNnU2VxXCIsZWxlbWVudHM6XCJNc2dCb2R5XCIsY2xpZW50U2VxdWVuY2U6XCJDbGllbnRTZXFcIixwYXlsb2FkOlwiTXNnQ29udGVudFwiLG1lc3NhZ2VMaXN0OlwiTXNnTGlzdFwiLG1lc3NhZ2VOdW1iZXI6XCJNc2dOdW1cIixhYnN0cmFjdExpc3Q6XCJBYnN0cmFjdExpc3RcIixtZXNzYWdlQm9keTpcIk1zZ0JvZHlcIn19fX0oZSkpfX0se2tleTpcImhhc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb25maWdNYXAuaGFzKGUpfX0se2tleTpcImdldFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb25maWdNYXAuZ2V0KGUpfX0se2tleTpcInVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZmlsbENvbmZpZ01hcCgpfX0se2tleTpcImdldEtleU1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhhcyhlKT90aGlzLmdldChlKS5rZXlNYXB8fHt9OihRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRLZXlNYXAgdW5rbm93biBwcm90b2NvbE5hbWU6XCIpLmNvbmNhdChlKSkse30pfX0se2tleTpcImdldFByb3RvY29sRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucHJvdG9jb2xOYW1lLG49ZS5yZXF1ZXN0RGF0YSxvPXRoaXMuZ2V0KHQpLHI9bnVsbDtpZihuKXt2YXIgYT10aGlzLl9zaW1wbGVEZWVwQ29weShvKSxzPXRoaXMuX3VwZGF0ZVNlcnZpY2UobixhKSxpPXMuYm9keSx1PU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBjIGluIGkpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGksYykpe2lmKHVbY109aVtjXSx2b2lkIDA9PT1uW2NdKWNvbnRpbnVlO3VbY109bltjXX1zLmJvZHk9dSxyPXRoaXMuX2dldFVwbGlua0RhdGEocyl9ZWxzZSByPXRoaXMuX2dldFVwbGlua0RhdGEobyk7cmV0dXJuIHJ9fSx7a2V5OlwiX2dldFVwbGlua0RhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9yZXF1ZXN0RGF0YUNsZWFuZXIoZSksbj1XdSh0LmhlYWQpLG89Q3YodC5ib2R5LHRoaXMuX2dldFJlcXVlc3RLZXlNYXAobikpO3JldHVybiB0LmJvZHk9byx0fX0se2tleTpcIl91cGRhdGVTZXJ2aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1XdSh0LmhlYWQpO2lmKHQuaGVhZC5zZXJ2Y21kLmluY2x1ZGVzKGVpLk5BTUUuR1JPVVApKXt2YXIgbz1lLnR5cGUscj1lLmdyb3VwSUQsYT12b2lkIDA9PT1yP3ZvaWQgMDpyLHM9ZS5ncm91cElETGlzdCxpPXZvaWQgMD09PXM/W106cztodShhKSYmKGE9aVswXXx8XCJcIiksUHUoe3R5cGU6byxncm91cElEOmF9KSYmKHQuaGVhZC5zZXJ2Y21kPVwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVBfQ09NTVVOSVRZLFwiLlwiKS5jb25jYXQobikpfXJldHVybiB0fX0se2tleTpcIl9nZXRSZXF1ZXN0S2V5TWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRLZXlNYXAoZSk7cmV0dXJuIFNuKHt9LEF2LnJlcXVlc3Qse30sdC5yZXF1ZXN0KX19LHtrZXk6XCJfcmVxdWVzdERhdGFDbGVhbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9QXJyYXkuaXNBcnJheShlKT9bXTpPYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbiBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiZNdShuKSYmbnVsbCE9PWVbbl0mJnZvaWQgMCE9PWVbbl0mJihcIm9iamVjdFwiIT09TW4oZVtuXSk/dFtuXT1lW25dOnRbbl09dGhpcy5fcmVxdWVzdERhdGFDbGVhbmVyLmJpbmQodGhpcykoZVtuXSkpO3JldHVybiB0fX0se2tleTpcIl9zaW1wbGVEZWVwQ29weVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPU9iamVjdC5rZXlzKGUpLG89e30scj0wLGE9bi5sZW5ndGg7cjxhO3IrKyl0PW5bcl0sZ3UoZVt0XSk/b1t0XT1BcnJheS5mcm9tKGVbdF0pOmR1KGVbdF0pP29bdF09dGhpcy5fc2ltcGxlRGVlcENvcHkoZVt0XSk6b1t0XT1lW3RdO3JldHVybiBvfX1dKSxlfSgpLF9JPVt0cF0sbUk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fc2Vzc2lvbk1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIkRvd25saW5rSGFuZGxlclwiLHRoaXMuX2V2ZW50SGFuZGxlck1hcD1uZXcgTWFwLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5zZXQoXCJDMkNNZXNzYWdlQXJyYXlcIix0aGlzLl9jMmNNZXNzYWdlQXJyYXlIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5zZXQoXCJncm91cE1lc3NhZ2VBcnJheVwiLHRoaXMuX2dyb3VwTWVzc2FnZUFycmF5SGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwiZ3JvdXBUaXBzXCIsdGhpcy5fZ3JvdXBUaXBzSGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwiQzJDTm90aWZ5TWVzc2FnZUFycmF5XCIsdGhpcy5fQzJDTm90aWZ5TWVzc2FnZUFycmF5SGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwicHJvZmlsZU1vZGlmeVwiLHRoaXMuX3Byb2ZpbGVIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5zZXQoXCJmcmllbmRMaXN0TW9kXCIsdGhpcy5fcmVsYXRpb25DaGFpbkhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcInJlY2VudENvbnRhY3RNb2RcIix0aGlzLl9yZWNlbnRDb250YWN0SGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwicmVhZEFsbEMyQ01lc3NhZ2VcIix0aGlzLl9hbGxNZXNzYWdlUmVhZEhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fa2V5cz1Vbih0aGlzLl9ldmVudEhhbmRsZXJNYXAua2V5cygpKX1yZXR1cm4gRW4oZSxbe2tleTpcIl9jMmNNZXNzYWdlQXJyYXlIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoc2wpO2lmKHQpe2lmKGUuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoMT09PWUuaXNTeW5jTWVzc2FnZSl7dmFyIHQ9ZS5mcm9tO2UuZnJvbT1lLnRvLGUudG89dH19KSksMT09PWUubmVlZFN5bmMpdGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUodmwpLnN0YXJ0T25saW5lU3luYygpO3Qub25OZXdDMkNNZXNzYWdlKHtkYXRhTGlzdDplLmRhdGFMaXN0LGlzSW5zdGFudE1lc3NhZ2U6ITB9KX19fSx7a2V5OlwiX2dyb3VwTWVzc2FnZUFycmF5SGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGlsKTt0JiZ0Lm9uTmV3R3JvdXBNZXNzYWdlKHtldmVudDplLmV2ZW50LGRhdGFMaXN0OmUuZGF0YUxpc3QsaXNJbnN0YW50TWVzc2FnZTohMH0pfX0se2tleTpcIl9ncm91cFRpcHNIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoaWwpO2lmKHQpe3ZhciBuPWUuZXZlbnQsbz1lLmRhdGFMaXN0LHI9ZS5pc0luc3RhbnRNZXNzYWdlLGE9dm9pZCAwPT09cnx8cixzPWUuaXNTeW5jaW5nRW5kZWQ7c3dpdGNoKG4pe2Nhc2UgNDpjYXNlIDY6dC5vbk5ld0dyb3VwVGlwcyh7ZXZlbnQ6bixkYXRhTGlzdDpvfSk7YnJlYWs7Y2FzZSA1Om8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7Z3UoZS5lbGVtZW50cy5yZXZva2VkSW5mb3MpP3Qub25Hcm91cE1lc3NhZ2VSZXZva2VkKHtkYXRhTGlzdDpvfSk6Z3UoZS5lbGVtZW50cy5ncm91cE1lc3NhZ2VSZWFkTm90aWNlKT90Lm9uR3JvdXBNZXNzYWdlUmVhZE5vdGljZSh7ZGF0YUxpc3Q6b30pOmd1KGUuZWxlbWVudHMucmVhZFJlY2VpcHRMaXN0KT90Lm9uUmVhZFJlY2VpcHRMaXN0KHtkYXRhTGlzdDpvfSk6dC5vbk5ld0dyb3VwU3lzdGVtTm90aWNlKHtkYXRhTGlzdDpvLGlzSW5zdGFudE1lc3NhZ2U6YSxpc1N5bmNpbmdFbmRlZDpzfSl9KSk7YnJlYWs7Y2FzZSAxMjp0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShsbCkub25OZXdHcm91cEF0VGlwcyh7ZGF0YUxpc3Q6b30pO2JyZWFrO2RlZmF1bHQ6UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZ3JvdXBUaXBzSGFuZGxlciB1bmtub3duIGV2ZW50OlwiKS5jb25jYXQobixcIiBkYXRhTGlzdDpcIiksbyl9fX19LHtrZXk6XCJfQzJDTm90aWZ5TWVzc2FnZUFycmF5SGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmRhdGFMaXN0O2lmKGd1KG4pKXt2YXIgbz10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShzbCk7bi5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihwdShlKSlpZihlLmhhc093blByb3BlcnR5KFwia2lja291dE1zZ05vdGlmeVwiKSl7dmFyIHI9ZS5raWNrb3V0TXNnTm90aWZ5LGE9ci5raWNrVHlwZSxzPXIubmV3SW5zdGFuY2VJbmZvLGk9dm9pZCAwPT09cz97fTpzOzE9PT1hP3QuX3Nlc3Npb25Nb2R1bGUub25NdWx0aXBsZUFjY291bnRLaWNrZWRPdXQoaSk6Mj09PWEmJnQuX3Nlc3Npb25Nb2R1bGUub25NdWx0aXBsZURldmljZUtpY2tlZE91dChpKX1lbHNlIGlmKGUuaGFzT3duUHJvcGVydHkoXCJjMmNNZXNzYWdlUmV2b2tlZE5vdGlmeVwiKSlvJiZvLm9uQzJDTWVzc2FnZVJldm9rZWQoe2RhdGFMaXN0Om59KTtlbHNlIGlmKGUuaGFzT3duUHJvcGVydHkoXCJjMmNNZXNzYWdlUmVhZFJlY2VpcHRcIikpbyYmby5vbkMyQ01lc3NhZ2VSZWFkUmVjZWlwdCh7ZGF0YUxpc3Q6bn0pO2Vsc2UgaWYoZS5oYXNPd25Qcm9wZXJ0eShcImMyY01lc3NhZ2VSZWFkTm90aWNlXCIpKW8mJm8ub25DMkNNZXNzYWdlUmVhZE5vdGljZSh7ZGF0YUxpc3Q6bn0pO2Vsc2UgaWYoZS5oYXNPd25Qcm9wZXJ0eShcIm11dGVOb3RpZmljYXRpb25zU3luY1wiKSl7dC5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUobGwpLm9uQzJDTWVzc2FnZVJlbWluZFR5cGVTeW5jZWQoe2RhdGFMaXN0Om59KX19KSl9fX0se2tleTpcIl9wcm9maWxlSGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGFsKS5vblByb2ZpbGVNb2RpZmllZCh7ZGF0YUxpc3Q6ZS5kYXRhTGlzdH0pO3ZhciB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKHVsKTt0JiZ0Lm9uRnJpZW5kUHJvZmlsZU1vZGlmaWVkKHtkYXRhTGlzdDplLmRhdGFMaXN0fSl9fSx7a2V5OlwiX3JlbGF0aW9uQ2hhaW5IYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoYWwpLm9uUmVsYXRpb25DaGFpbk1vZGlmaWVkKHtkYXRhTGlzdDplLmRhdGFMaXN0fSk7dmFyIHQ9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUodWwpO3QmJnQub25SZWxhdGlvbkNoYWluTW9kaWZpZWQoe2RhdGFMaXN0OmUuZGF0YUxpc3R9KX19LHtrZXk6XCJfcmVjZW50Q29udGFjdEhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGFMaXN0O2lmKGd1KHQpKXt2YXIgbj10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShsbCk7biYmdC5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLnB1c2hUeXBlLG89ZS5yZWNlbnRDb250YWN0VG9wSXRlbSxyPWUucmVjZW50Q29udGFjdERlbGV0ZUl0ZW07MT09PXQ/bi5vbkNvbnZlcnNhdGlvbkRlbGV0ZWQoci5yZWNlbnRDb250YWN0TGlzdCk6Mj09PXQ/bi5vbkNvbnZlcnNhdGlvblBpbm5lZChvLnJlY2VudENvbnRhY3RMaXN0KTozPT09dCYmbi5vbkNvbnZlcnNhdGlvblVucGlubmVkKG8ucmVjZW50Q29udGFjdExpc3QpfSkpfX19LHtrZXk6XCJfYWxsTWVzc2FnZVJlYWRIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdCxuPXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGxsKTtuJiZuLm9uUHVzaGVkQWxsTWVzc2FnZVJlYWQodCl9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuYm9keTtpZih0aGlzLl9maWx0ZXJNZXNzYWdlRnJvbUlNT3BlblB1c2goZSkpe3ZhciBvPW4uZXZlbnRBcnJheSxyPW4uaXNJbnN0YW50TWVzc2FnZSxhPW4uaXNTeW5jaW5nRW5kZWQscz1uLm5lZWRTeW5jO2lmKGd1KG8pKWZvcih2YXIgaT1udWxsLHU9bnVsbCxjPTAsbD0wLGQ9by5sZW5ndGg7bDxkO2wrKyl7Yz0oaT1vW2xdKS5ldmVudDt2YXIgcD1PYmplY3Qua2V5cyhpKS5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4tMSE9PXQuX2tleXMuaW5kZXhPZihlKX0pKTtwPyh1PTE0IT09Yz9pW3BdOntyZWFkQWxsQzJDTWVzc2FnZTppW3BdLGdyb3VwTWVzc2FnZVJlYWRJbmZvTGlzdDppLmdyb3VwTWVzc2FnZVJlYWROb3RpY2V8fFtdfSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuZ2V0KHApKHtldmVudDpjLGRhdGFMaXN0OnUsaXNJbnN0YW50TWVzc2FnZTpyLGlzU3luY2luZ0VuZGVkOmEsbmVlZFN5bmM6c30pKTpRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTWVzc2FnZSB1bmtub3duIGV2ZW50SXRlbTpcIikuY29uY2F0KGkpKX19fX0se2tleTpcIl9maWx0ZXJNZXNzYWdlRnJvbUlNT3BlblB1c2hcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmhlYWQsbj1lLmJvZHksbz10LnNlcnZjbWQscj0hMTtpZihodShvKXx8KHI9by5pbmNsdWRlcyhlaS5OQU1FLklNX0NPTkZJR19NQU5BR0VSKXx8by5pbmNsdWRlcyhlaS5OQU1FLk9WRVJMT0FEX1BVU0gpfHxvLmluY2x1ZGVzKGVpLk5BTUUuU1RBVF9TRVJWSUNFKSksIXIpcmV0dXJuITA7aWYoby5pbmNsdWRlcyhlaS5DTUQuUFVTSEVEX0NMT1VEX0NPTlRST0xfQ09ORklHKSl0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShFbCkub25QdXNoZWRDbG91ZENvbnRyb2xDb25maWcobik7ZWxzZSBpZihvLmluY2x1ZGVzKGVpLkNNRC5QVVNIRURfQ09NTUVSQ0lBTF9DT05GSUcpKXt0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShEbCkub25QdXNoZWRDb25maWcobil9ZWxzZSBpZihvLmluY2x1ZGVzKGVpLkNNRC5PVkVSTE9BRF9OT1RJRlkpKXRoaXMuX3Nlc3Npb25Nb2R1bGUub25QdXNoZWRTZXJ2ZXJPdmVybG9hZChuKTtlbHNlIGlmKG8uaW5jbHVkZXMoZWkuQ01ELktJQ0tfT1RIRVIpKXt2YXIgYT1EYXRlLm5vdygpO3RoaXMuX3Nlc3Npb25Nb2R1bGUucmVMb2dpbk9uS2lja090aGVyKCk7dmFyIHM9bmV3IERwKEdwKSxpPXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKG9sKS5nZXRMYXN0V3NIZWxsb1RzKCksdT1hLWk7cy5zZXRNZXNzYWdlKFwibGFzdCB3c2hlbGxvIHRpbWU6XCIuY29uY2F0KGksXCIgZGlmZjpcIikuY29uY2F0KHUsXCJtc1wiKSkuc2V0TmV0d29ya1R5cGUodGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKX1yZXR1cm4hMX19XSksZX0oKSx2ST1be2NtZDplaS5DTUQuR0VUX0dST1VQX0lORk8saW50ZXJ2YWw6MSxjb3VudDoyMH0se2NtZDplaS5DTUQuU0VUX0dST1VQX0FUVFJJQlVURVMsaW50ZXJ2YWw6NSxjb3VudDoxMH0se2NtZDplaS5DTUQuTU9ESUZZX0dST1VQX0FUVFJJQlVURVMsaW50ZXJ2YWw6NSxjb3VudDoxMH0se2NtZDplaS5DTUQuREVMRVRFX0dST1VQX0FUVFJJQlVURVMsaW50ZXJ2YWw6NSxjb3VudDoxMH0se2NtZDplaS5DTUQuQ0xFQVJfR1JPVVBfQVRUUklCVVRFUyxpbnRlcnZhbDo1LGNvdW50OjEwfSx7Y21kOmVpLkNNRC5HRVRfR1JPVVBfQVRUUklCVVRFUyxpbnRlcnZhbDo1LGNvdW50OjIwfSx7Y21kOmVpLkNNRC5TRVRfQUxMX01FU1NBR0VfUkVBRCxpbnRlcnZhbDoxLGNvdW50OjF9XSxNST1mdW5jdGlvbihlKXtEbihuLGUpO3ZhciB0PXduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87cmV0dXJuIHluKHRoaXMsbiksKG89dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJTZXNzaW9uTW9kdWxlXCIsby5fcGxhdGZvcm09by5nZXRQbGF0Zm9ybSgpLG8uX3Byb3RvY29sSGFuZGxlcj1uZXcgZkkoR24obykpLG8uX21lc3NhZ2VEaXNwYXRjaGVyPW5ldyBtSShHbihvKSksby5fY29tbWFuZEZyZXF1ZW5jeUxpbWl0TWFwPW5ldyBNYXAsby5fY29tbWFuZFJlcXVlc3RJbmZvTWFwPW5ldyBNYXAsby5fc2VydmVyT3ZlcmxvYWRJbmZvTWFwPW5ldyBNYXAsby5faW5pdCgpLG8uZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbih5bSxvLl9vbkNsb3VkQ29uZmlnVXBkYXRlZCxHbihvKSksb31yZXR1cm4gRW4obixbe2tleTpcIl9pbml0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVDb21tYW5kRnJlcXVlbmN5TGltaXRNYXAodkkpfX0se2tleTpcIl9vbkNsb3VkQ29uZmlnVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRDbG91ZENvbmZpZyhcImNtZF9mcmVxdWVuY3lfbGltaXRcIik7aHUoZSl8fChlPUpTT04ucGFyc2UoZSksdGhpcy5fdXBkYXRlQ29tbWFuZEZyZXF1ZW5jeUxpbWl0TWFwKGUpKX19LHtrZXk6XCJfdXBkYXRlQ29tbWFuZEZyZXF1ZW5jeUxpbWl0TWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX2NvbW1hbmRGcmVxdWVuY3lMaW1pdE1hcC5zZXQoZS5jbWQse2ludGVydmFsOmUuaW50ZXJ2YWwsY291bnQ6ZS5jb3VudH0pfSkpfX0se2tleTpcInVwZGF0ZVByb3RvY29sQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9wcm90b2NvbEhhbmRsZXIudXBkYXRlKCl9fSx7a2V5OlwicmVxdWVzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXF1ZXN0IG9wdGlvbnM6XCIpLGUpO3ZhciB0PWUucHJvdG9jb2xOYW1lLG49ZS50amdJRDtpZighdGhpcy5fcHJvdG9jb2xIYW5kbGVyLmhhcyh0KSlyZXR1cm4gUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVxdWVzdCB1bmtub3duIHByb3RvY29sOlwiKS5jb25jYXQodCkpLHVtKHtjb2RlOmxwLkNBTk5PVF9GSU5EX1BST1RPQ09MLG1lc3NhZ2U6ZHAuQ0FOTk9UX0ZJTkRfUFJPVE9DT0x9KTt2YXIgbz10aGlzLmdldFByb3RvY29sRGF0YShlKSxyPW8uaGVhZC5zZXJ2Y21kO2lmKHRoaXMuX2lzRnJlcXVlbmN5T3ZlckxpbWl0KHIpKXJldHVybiB1bSh7Y29kZTpscC5PVkVSX0ZSRVFVRU5DWV9MSU1JVCxtZXNzYWdlOmRwLk9WRVJfRlJFUVVFTkNZX0xJTUlUfSk7aWYodGhpcy5faXNTZXJ2ZXJPdmVybG9hZChyKSlyZXR1cm4gdW0oe2NvZGU6bHAuT1BFTl9TRVJWSUNFX09WRVJMT0FEX0VSUk9SLG1lc3NhZ2U6ZHAuT1BFTl9TRVJWSUNFX09WRVJMT0FEX0VSUk9SfSk7WHUobil8fChvLmhlYWQudGpnSUQ9bik7dmFyIGE9dGhpcy5nZXRNb2R1bGUoeWwpO3JldHVybiBfSS5pbmNsdWRlcyh0KT9hLnNpbXBseVNlbmQobyk6YS5zZW5kKG8pfX0se2tleTpcImdldEtleU1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wcm90b2NvbEhhbmRsZXIuZ2V0S2V5TWFwKGUpfX0se2tleTpcImdlbkNvbW1vbkhlYWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TW9kdWxlKGRsKTtyZXR1cm57dmVyOlwidjRcIixwbGF0Zm9ybTp0aGlzLl9wbGF0Zm9ybSx3ZWJzZGthcHBpZDpZcyx3ZWJzZGt2ZXJzaW9uOldzLGEyOmUuZ2V0QTJLZXkoKXx8dm9pZCAwLHRpbnlpZDplLmdldFRpbnlJRCgpfHx2b2lkIDAsc3RhdHVzX2luc3RpZDplLmdldFN0YXR1c0luc3RhbmNlSUQoKSxzZGthcHBpZDplLmdldFNES0FwcElEKCksY29udGVudHR5cGU6ZS5nZXRDb250ZW50VHlwZSgpLHJlcXRpbWU6MCxpZGVudGlmaWVyOmUuZ2V0QTJLZXkoKT92b2lkIDA6ZS5nZXRVc2VySUQoKSx1c2Vyc2lnOmUuZ2V0QTJLZXkoKT92b2lkIDA6ZS5nZXRVc2VyU2lnKCksc2RrYWJpbGl0eTo1MSx0amdJRDpcIlwifX19LHtrZXk6XCJnZW5Db3NTcGVjaWZpZWRIZWFkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldE1vZHVsZShkbCk7cmV0dXJue3ZlcjpcInY0XCIscGxhdGZvcm06dGhpcy5fcGxhdGZvcm0sd2Vic2RrYXBwaWQ6WXMsd2Vic2RrdmVyc2lvbjpXcyxzZGthcHBpZDplLmdldFNES0FwcElEKCksY29udGVudHR5cGU6ZS5nZXRDb250ZW50VHlwZSgpLHJlcXRpbWU6MCxpZGVudGlmaWVyOmUuZ2V0VXNlcklEKCksdXNlcnNpZzplLmdldFVzZXJTaWcoKSxzdGF0dXNfaW5zdGlkOmUuZ2V0U3RhdHVzSW5zdGFuY2VJRCgpLHNka2FiaWxpdHk6NTF9fX0se2tleTpcImdlblNTT1JlcG9ydEhlYWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TW9kdWxlKGRsKTtyZXR1cm57dmVyOlwidjRcIixwbGF0Zm9ybTp0aGlzLl9wbGF0Zm9ybSx3ZWJzZGthcHBpZDpZcyx3ZWJzZGt2ZXJzaW9uOldzLHNka2FwcGlkOmUuZ2V0U0RLQXBwSUQoKSxjb250ZW50dHlwZTpcIlwiLHJlcXRpbWU6MCxpZGVudGlmaWVyOlwiXCIsdXNlcnNpZzpcIlwiLHN0YXR1c19pbnN0aWQ6ZS5nZXRTdGF0dXNJbnN0YW5jZUlEKCksc2RrYWJpbGl0eTo1MX19fSx7a2V5OlwiZ2V0UHJvdG9jb2xEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Byb3RvY29sSGFuZGxlci5nZXRQcm90b2NvbERhdGEoZSl9fSx7a2V5Olwib25FcnJvckNvZGVOb3RaZXJvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lcnJvckNvZGU7aWYodD09PWxwLkhFTExPX0FOU1dFUl9LSUNLRURfT1VUKXt2YXIgbj1lLmtpY2tUeXBlLG89ZS5uZXdJbnN0YW5jZUluZm8scj12b2lkIDA9PT1vP3t9Om87MT09PW4/dGhpcy5vbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dChyKToyPT09biYmdGhpcy5vbk11bHRpcGxlRGV2aWNlS2lja2VkT3V0KHIpfXQhPT1scC5NRVNTQUdFX0EyS0VZX0VYUElSRUQmJnQhPT1scC5BQ0NPVU5UX0EyS0VZX0VYUElSRUR8fCh0aGlzLl9vblVzZXJTaWdFeHBpcmVkKCksdGhpcy5nZXRNb2R1bGUoeWwpLnJlQ29ubmVjdCgpKX19LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmJvZHksbj10Lm5lZWRBY2ssbz12b2lkIDA9PT1uPzA6bixyPXQuc2Vzc2lvbkRhdGE7MT09PW8mJnRoaXMuX3NlbmRBQ0sociksdGhpcy5fbWVzc2FnZURpc3BhdGNoZXIub25NZXNzYWdlKGUpfX0se2tleTpcIm9uUmVjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlTG9naW5PblJlY29ubmVjdGVkKCl9fSx7a2V5OlwicmVMb2dpbk9uS2lja090aGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlTG9naW5PbktpY2tPdGhlclwiKSksdGhpcy5fcmVMb2dpbigpfX0se2tleTpcIl9yZUxvZ2luT25SZWNvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fcmVMb2dpbk9uUmVjb25uZWN0ZWRcIikpLHRoaXMuX3JlTG9naW4oKX19LHtrZXk6XCJfcmVMb2dpblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmlzTG9nZ2VkSW4oKSYmdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Q2x9KS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj10LmRhdGEuaW5zdGFuY2VJRDtlLmdldE1vZHVsZShkbCkuc2V0U3RhdHVzSW5zdGFuY2VJRChuKSxRaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9yZUxvZ2luIG9rLiBzdGFydCB0byBzeW5jIHVucmVhZCBtZXNzYWdlc1wiKSksZS5nZXRNb2R1bGUodmwpLnN0YXJ0U3luY09uUmVjb25uZWN0ZWQoKSxlLmdldE1vZHVsZShBbCkuc3RhcnRQdWxsKCksZS5nZXRNb2R1bGUoaWwpLnVwZGF0ZUxvY2FsTWFpblNlcXVlbmNlT25SZWNvbm5lY3RlZCgpfSkpfX0se2tleTpcIm9uTXVsdGlwbGVBY2NvdW50S2lja2VkT3V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5nZXRNb2R1bGUob2wpLm9uTXVsdGlwbGVBY2NvdW50S2lja2VkT3V0KGUpfX0se2tleTpcIm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdldE1vZHVsZShvbCkub25NdWx0aXBsZURldmljZUtpY2tlZE91dChlKX19LHtrZXk6XCJfb25Vc2VyU2lnRXhwaXJlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5nZXRNb2R1bGUob2wpLm9uVXNlclNpZ0V4cGlyZWQoKX19LHtrZXk6XCJfc2VuZEFDS1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnRwLHJlcXVlc3REYXRhOntzZXNzaW9uRGF0YTplfX0pfX0se2tleTpcIl9pc0ZyZXF1ZW5jeU92ZXJMaW1pdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoXCIuXCIpWzFdO2lmKCF0aGlzLl9jb21tYW5kRnJlcXVlbmN5TGltaXRNYXAuaGFzKHQpKXJldHVybiExO2lmKCF0aGlzLl9jb21tYW5kUmVxdWVzdEluZm9NYXAuaGFzKHQpKXJldHVybiB0aGlzLl9jb21tYW5kUmVxdWVzdEluZm9NYXAuc2V0KHQse3N0YXJ0VGltZTpEYXRlLm5vdygpLHJlcXVlc3RDb3VudDoxfSksITE7dmFyIG49dGhpcy5fY29tbWFuZEZyZXF1ZW5jeUxpbWl0TWFwLmdldCh0KSxvPW4uY291bnQscj1uLmludGVydmFsLGE9dGhpcy5fY29tbWFuZFJlcXVlc3RJbmZvTWFwLmdldCh0KSxzPWEuc3RhcnRUaW1lLGk9YS5yZXF1ZXN0Q291bnQ7aWYoRGF0ZS5ub3coKS1zPjFlMypyKXJldHVybiB0aGlzLl9jb21tYW5kUmVxdWVzdEluZm9NYXAuc2V0KHQse3N0YXJ0VGltZTpEYXRlLm5vdygpLHJlcXVlc3RDb3VudDoxfSksITE7aSs9MSx0aGlzLl9jb21tYW5kUmVxdWVzdEluZm9NYXAuc2V0KHQse3N0YXJ0VGltZTpzLHJlcXVlc3RDb3VudDppfSk7dmFyIHU9ITE7cmV0dXJuIGk+byYmKHU9ITApLHV9fSx7a2V5OlwiX2lzU2VydmVyT3ZlcmxvYWRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZighdGhpcy5fc2VydmVyT3ZlcmxvYWRJbmZvTWFwLmhhcyhlKSlyZXR1cm4hMTt2YXIgdD10aGlzLl9zZXJ2ZXJPdmVybG9hZEluZm9NYXAuZ2V0KGUpLG49dC5vdmVybG9hZFRpbWUsbz10LndhaXRpbmdUaW1lLHI9ITE7cmV0dXJuIERhdGUubm93KCktbjw9MWUzKm8/cj0hMDoodGhpcy5fc2VydmVyT3ZlcmxvYWRJbmZvTWFwLmRlbGV0ZShlKSxyPSExKSxyfX0se2tleTpcIm9uUHVzaGVkU2VydmVyT3ZlcmxvYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm92ZXJsb2FkQ29tbWFuZCxuPWUud2FpdGluZ1RpbWU7dGhpcy5fc2VydmVyT3ZlcmxvYWRJbmZvTWFwLnNldCh0LHtvdmVybG9hZFRpbWU6RGF0ZS5ub3coKSx3YWl0aW5nVGltZTpufSksUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25QdXNoZWRTZXJ2ZXJPdmVybG9hZCB3YWl0aW5nVGltZTpcIikuY29uY2F0KG4sXCJzXCIpKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fdXBkYXRlQ29tbWFuZEZyZXF1ZW5jeUxpbWl0TWFwKHZJKSx0aGlzLl9jb21tYW5kUmVxdWVzdEluZm9NYXAuY2xlYXIoKSx0aGlzLl9zZXJ2ZXJPdmVybG9hZEluZm9NYXAuY2xlYXIoKX19XSksbn0oTmwpLHlJPWZ1bmN0aW9uKGUpe0RuKG4sZSk7dmFyIHQ9d24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIk1lc3NhZ2VMb3NzRGV0ZWN0aW9uTW9kdWxlXCIsby5fbWF5YmVMb3N0U2VxdWVuY2VzTWFwPW5ldyBNYXAsb31yZXR1cm4gRW4obixbe2tleTpcIm9uTWVzc2FnZU1heWJlTG9zdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9tYXliZUxvc3RTZXF1ZW5jZXNNYXAuaGFzKGUpfHx0aGlzLl9tYXliZUxvc3RTZXF1ZW5jZXNNYXAuc2V0KGUsW10pO2Zvcih2YXIgbz10aGlzLl9tYXliZUxvc3RTZXF1ZW5jZXNNYXAuZ2V0KGUpLHI9MDtyPG47cisrKW8ucHVzaCh0K3IpO1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk1lc3NhZ2VNYXliZUxvc3QuIG1heWJlTG9zdFNlcXVlbmNlczpcIikuY29uY2F0KG8pKX19LHtrZXk6XCJkZXRlY3RNZXNzYWdlTG9zc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fbWF5YmVMb3N0U2VxdWVuY2VzTWFwLmdldChlKTtpZighWHUobikmJiFYdSh0KSl7dmFyIG89dC5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybi0xIT09bi5pbmRleE9mKGUpfSkpO2lmKFFpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZXRlY3RNZXNzYWdlTG9zcy4gbWF0Y2hlZFNlcXVlbmNlczpcIikuY29uY2F0KG8pKSxuLmxlbmd0aD09PW8ubGVuZ3RoKVFpLmluZm8oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRldGVjdE1lc3NhZ2VMb3NzIG5vIG1lc3NhZ2UgbG9zcy4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlKSk7ZWxzZXt2YXIgcixhPW4uZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4tMT09PW8uaW5kZXhPZihlKX0pKSxzPWEubGVuZ3RoO3M8PTU/cj1lK1wiLVwiK2Euam9pbihcIi1cIik6KGEuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS10fSkpLHI9ZStcIiBzdGFydDpcIithWzBdK1wiIGVuZDpcIithW3MtMV0rXCIgY291bnQ6XCIrcyksbmV3IERwKGpnKS5zZXRNZXNzYWdlKHIpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TGV2ZWwoXCJ3YXJuaW5nXCIpLmVuZCgpLFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRldGVjdE1lc3NhZ2VMb3NzIG1lc3NhZ2UgbG9zcyBkZXRlY3RlZC4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIGxvc3RTZXF1ZW5jZXM6XCIpLmNvbmNhdChhKSl9bi5sZW5ndGg9MH19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX21heWJlTG9zdFNlcXVlbmNlc01hcC5jbGVhcigpfX1dKSxufShObCksSUk9ZnVuY3Rpb24oZSl7RG4obixlKTt2YXIgdD13bihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiQ2xvdWRDb250cm9sTW9kdWxlXCIsby5fY2xvdWRDb25maWc9bmV3IE1hcCxvLl9leHBpcmVkVGltZT0wLG8uX3ZlcnNpb249MCxvLl9pc0ZldGNoaW5nPSExLG99cmV0dXJuIEVuKG4sW3trZXk6XCJnZXRDbG91ZENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBodShlKT90aGlzLl9jbG91ZENvbmZpZzp0aGlzLl9jbG91ZENvbmZpZy5oYXMoZSk/dGhpcy5fY2xvdWRDb25maWcuZ2V0KGUpOnZvaWQgMH19LHtrZXk6XCJfY2FuRmV0Y2hDb25maWdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTG9nZ2VkSW4oKSYmIXRoaXMuX2lzRmV0Y2hpbmcmJkRhdGUubm93KCk+PXRoaXMuX2V4cGlyZWRUaW1lfX0se2tleTpcImZldGNoQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5fY2FuRmV0Y2hDb25maWcoKTtpZihRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmZldGNoQ29uZmlnIGNhbkZldGNoQ29uZmlnOlwiKS5jb25jYXQodCkpLHQpe3ZhciBuPW5ldyBEcChfaCksbz10aGlzLmdldE1vZHVsZShkbCkuZ2V0U0RLQXBwSUQoKTt0aGlzLl9pc0ZldGNoaW5nPSEwLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmFwLHJlcXVlc3REYXRhOntTREtBcHBJRDpvLHZlcnNpb246dGhpcy5fdmVyc2lvbn19KS50aGVuKChmdW5jdGlvbih0KXtlLl9pc0ZldGNoaW5nPSExLG4uc2V0TWVzc2FnZShcInZlcnNpb246XCIuY29uY2F0KGUuX3ZlcnNpb24sXCIgbmV3VmVyc2lvbjpcIikuY29uY2F0KHQuZGF0YS52ZXJzaW9uLFwiIGNvbmZpZzpcIikuY29uY2F0KHQuZGF0YS5jbG91ZENvbnRyb2xDb25maWcpKS5zZXROZXR3b3JrVHlwZShlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuZmV0Y2hDb25maWcgb2tcIikpLGUuX3BhcnNlQ2xvdWRDb250cm9sQ29uZmlnKHQuZGF0YSl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe2UuX2lzRmV0Y2hpbmc9ITEsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz1QbihlLDIpLHI9b1swXSxhPW9bMV07bi5zZXRFcnJvcih0LHIsYSkuZW5kKCl9KSksUWkubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5mZXRjaENvbmZpZyBmYWlsZWQuIGVycm9yOlwiKSx0KSxlLl9zZXRFeHBpcmVkVGltZU9uUmVzcG9uc2VFcnJvcigxMmU0KX0pKX19fSx7a2V5Olwib25QdXNoZWRDbG91ZENvbnRyb2xDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUHVzaGVkQ2xvdWRDb250cm9sQ29uZmlnXCIpKSxuZXcgRHAobWgpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIm5ld1ZlcnNpb246XCIuY29uY2F0KGUudmVyc2lvbixcIiBjb25maWc6XCIpLmNvbmNhdChlLmNsb3VkQ29udHJvbENvbmZpZykpLmVuZCgpLHRoaXMuX3BhcnNlQ2xvdWRDb250cm9sQ29uZmlnKGUpfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2NhbkZldGNoQ29uZmlnKCkmJnRoaXMuZmV0Y2hDb25maWcoKX19LHtrZXk6XCJfcGFyc2VDbG91ZENvbnRyb2xDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9wYXJzZUNsb3VkQ29udHJvbENvbmZpZ1wiKSxvPWUuZXJyb3JDb2RlLHI9ZS5lcnJvck1lc3NhZ2UsYT1lLmNsb3VkQ29udHJvbENvbmZpZyxzPWUudmVyc2lvbixpPWUuZXhwaXJlZFRpbWU7aWYoMD09PW8pe2lmKHRoaXMuX3ZlcnNpb24hPT1zKXt2YXIgdT1udWxsO3RyeXt1PUpTT04ucGFyc2UoYSl9Y2F0Y2goekkpe1FpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgSlNPTiBwYXJzZSBlcnJvcjpcIikuY29uY2F0KGEpKX11JiYodGhpcy5fY2xvdWRDb25maWcuY2xlYXIoKSxPYmplY3Qua2V5cyh1KS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9jbG91ZENvbmZpZy5zZXQoZSx1W2VdKX0pKSx0aGlzLl92ZXJzaW9uPXMsdGhpcy5lbWl0SW5uZXJFdmVudCh5bSkpfXRoaXMuX2V4cGlyZWRUaW1lPURhdGUubm93KCkrMWUzKml9ZWxzZSBodShvKT8oUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBJbnZhbGlkIG1lc3NhZ2UgZm9ybWF0OlwiKSxlKSx0aGlzLl9zZXRFeHBpcmVkVGltZU9uUmVzcG9uc2VFcnJvcigzNmU1KSk6KFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZXJyb3JDb2RlOlwiKS5jb25jYXQobyxcIiBlcnJvck1lc3NhZ2U6XCIpLmNvbmNhdChyKSksdGhpcy5fc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3IoMTJlNCkpfX0se2tleTpcIl9zZXRFeHBpcmVkVGltZU9uUmVzcG9uc2VFcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2V4cGlyZWRUaW1lPURhdGUubm93KCkrZX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fY2xvdWRDb25maWcuY2xlYXIoKSx0aGlzLl9leHBpcmVkVGltZT0wLHRoaXMuX3ZlcnNpb249MCx0aGlzLl9pc0ZldGNoaW5nPSExfX1dKSxufShObCksRUk9ZnVuY3Rpb24oZSl7RG4obixlKTt2YXIgdD13bihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiUHVsbEdyb3VwTWVzc2FnZU1vZHVsZVwiLG8uX3JlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2VNYXA9bmV3IE1hcCxvLlBVTExfTElNSVRfQ09VTlQ9MTUsb31yZXR1cm4gRW4obixbe2tleTpcInN0YXJ0UHVsbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX2dldE5lZWRQdWxsQ29udmVyc2F0aW9uTGlzdCgpO3RoaXMuX2dldFJlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2VMaXN0KCkudGhlbigoZnVuY3Rpb24oKXt2YXIgbj1lLmdldE1vZHVsZShsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgbz10LmNvbnZlcnNhdGlvbklELHI9by5yZXBsYWNlKFluLkNPTlZfR1JPVVAsXCJcIiksYT1uLmdldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlKG8pLHM9ZS5fcmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZU1hcC5nZXQocil8fDAsaT1zLWE7UWkubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5zdGFydFB1bGwgZ3JvdXBJRDpcIikuY29uY2F0KHIsXCIgbG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlOlwiKS5jb25jYXQoYSxcIiBcIikrXCJyZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlOlwiLmNvbmNhdChzLFwiIGRpZmY6XCIpLmNvbmNhdChpKSksYT4wJiZpPj0xJiZpPDMwMCYmZS5fcHVsbE1pc3NpbmdNZXNzYWdlKHtncm91cElEOnIsbG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlOmEscmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZTpzLGRpZmY6aX0pfSkpfSkpfX0se2tleTpcIl9nZXROZWVkUHVsbENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE1vZHVsZShsbCkuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlPT09WW4uQ09OVl9HUk9VUCYmZS5ncm91cFByb2ZpbGUudHlwZSE9PVluLkdSUF9BVkNIQVRST09NfSkpfX0se2tleTpcIl9nZXRSZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5nZXRNb2R1bGUoaWwpLmdldEdyb3VwTGlzdCgpLnRoZW4oKGZ1bmN0aW9uKHQpe2Zvcih2YXIgbj10LmRhdGEuZ3JvdXBMaXN0LG89dm9pZCAwPT09bj9bXTpuLHI9MDtyPG8ubGVuZ3RoO3IrKyl7dmFyIGE9b1tyXSxzPWEuZ3JvdXBJRCxpPWEubmV4dE1lc3NhZ2VTZXE7aWYoYS50eXBlIT09WW4uR1JQX0FWQ0hBVFJPT00pe3ZhciB1PWktMTtlLl9yZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLnNldChzLHUpfX19KSl9fSx7a2V5OlwiX3B1bGxNaXNzaW5nTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmxvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZSxvPWUucmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZSxyPWUuZGlmZjtlLmNvdW50PXI+dGhpcy5QVUxMX0xJTUlUX0NPVU5UP3RoaXMuUFVMTF9MSU1JVF9DT1VOVDpyLGUuc2VxdWVuY2U9cj50aGlzLlBVTExfTElNSVRfQ09VTlQ/bit0aGlzLlBVTExfTElNSVRfQ09VTlQ6bityLHRoaXMuX2dldEdyb3VwTWlzc2luZ01lc3NhZ2UoZSkudGhlbigoZnVuY3Rpb24oYSl7YS5sZW5ndGg+MCYmKGFbMF0uc2VxdWVuY2UrMTw9byYmKGUubG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlPW4rdC5QVUxMX0xJTUlUX0NPVU5ULGUuZGlmZj1yLXQuUFVMTF9MSU1JVF9DT1VOVCx0Ll9wdWxsTWlzc2luZ01lc3NhZ2UoZSkpLHQuZ2V0TW9kdWxlKGlsKS5vbk5ld0dyb3VwTWVzc2FnZSh7ZGF0YUxpc3Q6YSxpc0luc3RhbnRNZXNzYWdlOiExfSkpfSkpfX0se2tleTpcIl9nZXRHcm91cE1pc3NpbmdNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPW5ldyBEcChOZyk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkNkLHJlcXVlc3REYXRhOntncm91cElEOmUuZ3JvdXBJRCxjb3VudDplLmNvdW50LHNlcXVlbmNlOmUuc2VxdWVuY2V9fSkudGhlbigoZnVuY3Rpb24obyl7dmFyIHI9by5kYXRhLm1lc3NhZ2VMaXN0LGE9dm9pZCAwPT09cj9bXTpyO3JldHVybiBuLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCxcIiBjb3VudDpcIikuY29uY2F0KGUuY291bnQsXCIgc2VxdWVuY2U6XCIpLmNvbmNhdChlLnNlcXVlbmNlLFwiIG1lc3NhZ2VMaXN0IGxlbmd0aDpcIikuY29uY2F0KGEubGVuZ3RoKSkuZW5kKCksYX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbz1Qbih0LDIpLHI9b1swXSxhPW9bMV07bi5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSl9KSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX3JlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2VNYXAuY2xlYXIoKX19XSksbn0oTmwpLFRJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3luKHRoaXMsZSksdGhpcy5fY2xhc3NOYW1lPVwiQXZnRTJFRGVsYXlcIix0aGlzLl9lMmVEZWxheUFycmF5PVtdfXJldHVybiBFbihlLFt7a2V5OlwiYWRkTWVzc2FnZURlbGF5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9JGkoKS1lO3Q+PTAmJnRoaXMuX2UyZURlbGF5QXJyYXkucHVzaCh0KX19LHtrZXk6XCJfY2FsY0F2Z1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoMD09PXQpcmV0dXJuIDA7dmFyIG49MDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXtuKz1lfSkpLFl1KG4vdCwxKX19LHtrZXk6XCJfY2FsY0NvdW50V2l0aExpbWl0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lMmVEZWxheUFycmF5LG49ZS5taW4sbz1lLm1heDtyZXR1cm4gdC5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBuPD1lJiZlPG99KSkubGVuZ3RofX0se2tleTpcIl9jYWxjUGVyY2VudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49WXUoZS90KjEwMCwyKTtyZXR1cm4gbj4xMDAmJihuPTEwMCksbn19LHtrZXk6XCJfY2hlY2tFMkVEZWxheUV4Y2VwdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlPnR9KSk7aWYobi5sZW5ndGg+MCl7dmFyIG89bi5sZW5ndGgscj1NYXRoLm1pbi5hcHBseShNYXRoLFVuKG4pKSxhPU1hdGgubWF4LmFwcGx5KE1hdGgsVW4obikpLHM9dGhpcy5fY2FsY0F2ZyhuLG8pLGk9WXUoby9lLmxlbmd0aCoxMDAsMik7aWYoaT41MCluZXcgRHAoYWcpLnNldE1lc3NhZ2UoXCJtZXNzYWdlIGUyZSBkZWxheSBleGNlcHRpb24uIGNvdW50OlwiLmNvbmNhdChvLFwiIG1pbjpcIikuY29uY2F0KHIsXCIgbWF4OlwiKS5jb25jYXQoYSxcIiBhdmc6XCIpLmNvbmNhdChzLFwiIHBlcmNlbnQ6XCIpLmNvbmNhdChpKSkuc2V0TGV2ZWwoXCJ3YXJuaW5nXCIpLmVuZCgpfX19LHtrZXk6XCJnZXRTdGF0UmVzdWx0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9lMmVEZWxheUFycmF5Lmxlbmd0aDtpZigwPT09ZSlyZXR1cm4gbnVsbDt2YXIgdD1Vbih0aGlzLl9lMmVEZWxheUFycmF5KSxuPXRoaXMuX2NhbGNDb3VudFdpdGhMaW1pdCh7ZTJlRGVsYXlBcnJheTp0LG1pbjowLG1heDoxfSksbz10aGlzLl9jYWxjQ291bnRXaXRoTGltaXQoe2UyZURlbGF5QXJyYXk6dCxtaW46MSxtYXg6M30pLHI9dGhpcy5fY2FsY1BlcmNlbnQobixlKSxhPXRoaXMuX2NhbGNQZXJjZW50KG8sZSkscz10aGlzLl9jYWxjQXZnKHQsZSk7cmV0dXJuIHRoaXMuX2NoZWNrRTJFRGVsYXlFeGNlcHRpb24odCwzKSx0Lmxlbmd0aD0wLHRoaXMucmVzZXQoKSx7dG90YWxDb3VudDplLGNvdW50TGVzc1RoYW4xU2Vjb25kOm4scGVyY2VudE9mQ291bnRMZXNzVGhhbjFTZWNvbmQ6cixjb3VudExlc3NUaGFuM1NlY29uZDpvLHBlcmNlbnRPZkNvdW50TGVzc1RoYW4zU2Vjb25kOmEsYXZnRGVsYXk6c319fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2UyZURlbGF5QXJyYXkubGVuZ3RoPTB9fV0pLGV9KCksQUk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7eW4odGhpcyxlKSx0aGlzLl9jbGFzc05hbWU9XCJBdmdSVFRcIix0aGlzLl9yZXF1ZXN0Q291bnQ9MCx0aGlzLl9ydHRBcnJheT1bXX1yZXR1cm4gRW4oZSxbe2tleTpcImFkZFJlcXVlc3RDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVxdWVzdENvdW50Kz0xfX0se2tleTpcImFkZFJUVFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3J0dEFycmF5LnB1c2goZSl9fSx7a2V5OlwiX2NhbGNUb3RhbENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVxdWVzdENvdW50fX0se2tleTpcIl9jYWxjUlRUQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5sZW5ndGh9fSx7a2V5OlwiX2NhbGNTdWNjZXNzUmF0ZU9mUmVxdWVzdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoMD09PXQpcmV0dXJuIDA7dmFyIG49WXUoZS90KjEwMCwyKTtyZXR1cm4gbj4xMDAmJihuPTEwMCksbn19LHtrZXk6XCJfY2FsY0F2Z1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoMD09PXQpcmV0dXJuIDA7dmFyIG49MDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXtuKz1lfSkpLHBhcnNlSW50KG4vdCl9fSx7a2V5OlwiX2NhbGNNYXhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1heC5hcHBseShNYXRoLFVuKHRoaXMuX3J0dEFycmF5KSl9fSx7a2V5OlwiX2NhbGNNaW5cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbi5hcHBseShNYXRoLFVuKHRoaXMuX3J0dEFycmF5KSl9fSx7a2V5OlwiZ2V0U3RhdFJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY2FsY1RvdGFsQ291bnQoKSx0PVVuKHRoaXMuX3J0dEFycmF5KTtpZigwPT09ZSlyZXR1cm4gbnVsbDt2YXIgbj10aGlzLl9jYWxjUlRUQ291bnQodCksbz10aGlzLl9jYWxjU3VjY2Vzc1JhdGVPZlJlcXVlc3QobixlKSxyPXRoaXMuX2NhbGNBdmcodCxuKTtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRTdGF0UmVzdWx0IG1heDpcIikuY29uY2F0KHRoaXMuX2NhbGNNYXgoKSxcIiBtaW46XCIpLmNvbmNhdCh0aGlzLl9jYWxjTWluKCksXCIgYXZnOlwiKS5jb25jYXQocikpLHRoaXMucmVzZXQoKSx7dG90YWxDb3VudDplLHJ0dENvdW50Om4sc3VjY2Vzc1JhdGVPZlJlcXVlc3Q6byxhdmdSVFQ6cn19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlcXVlc3RDb3VudD0wLHRoaXMuX3J0dEFycmF5Lmxlbmd0aD0wfX1dKSxlfSgpLFNJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3luKHRoaXMsZSksdGhpcy5fbWFwPW5ldyBNYXB9cmV0dXJuIEVuKGUsW3trZXk6XCJpbml0TWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX21hcC5zZXQoZSx7dG90YWxDb3VudDowLHN1Y2Nlc3NDb3VudDowLGZhaWxlZENvdW50T2ZVc2VyU2lkZTowLGNvc3RBcnJheTpbXSxmaWxlU2l6ZUFycmF5OltdfSl9KSl9fSx7a2V5OlwiYWRkVG90YWxDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEoaHUoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKSYmKHRoaXMuX21hcC5nZXQoZSkudG90YWxDb3VudCs9MSwhMCl9fSx7a2V5OlwiYWRkU3VjY2Vzc0NvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIShodShlKXx8IXRoaXMuX21hcC5oYXMoZSkpJiYodGhpcy5fbWFwLmdldChlKS5zdWNjZXNzQ291bnQrPTEsITApfX0se2tleTpcImFkZEZhaWxlZENvdW50T2ZVc2VyU2lkZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEoaHUoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKSYmKHRoaXMuX21hcC5nZXQoZSkuZmFpbGVkQ291bnRPZlVzZXJTaWRlKz0xLCEwKX19LHtrZXk6XCJhZGRDb3N0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hKGh1KGUpfHwhdGhpcy5fbWFwLmhhcyhlKSkmJih0aGlzLl9tYXAuZ2V0KGUpLmNvc3RBcnJheS5wdXNoKHQpLCEwKX19LHtrZXk6XCJhZGRGaWxlU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIShodShlKXx8IXRoaXMuX21hcC5oYXMoZSkpJiYodGhpcy5fbWFwLmdldChlKS5maWxlU2l6ZUFycmF5LnB1c2godCksITApfX0se2tleTpcIl9jYWxjU3VjY2Vzc1JhdGVPZkJ1c2luZXNzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoaHUoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKXJldHVybi0xO3ZhciB0PXRoaXMuX21hcC5nZXQoZSksbj1ZdSh0LnN1Y2Nlc3NDb3VudC90LnRvdGFsQ291bnQqMTAwLDIpO3JldHVybiBuPjEwMCYmKG49MTAwKSxufX0se2tleTpcIl9jYWxjU3VjY2Vzc1JhdGVPZlBsYXRmb3JtXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoaHUoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKXJldHVybi0xO3ZhciB0PXRoaXMuX21hcC5nZXQoZSksbj10aGlzLl9jYWxjU3VjY2Vzc0NvdW50T2ZQbGF0Zm9ybShlKS90LnRvdGFsQ291bnQqMTAwO3JldHVybihuPVl1KG4sMikpPjEwMCYmKG49MTAwKSxufX0se2tleTpcIl9jYWxjVG90YWxDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBodShlKXx8IXRoaXMuX21hcC5oYXMoZSk/LTE6dGhpcy5fbWFwLmdldChlKS50b3RhbENvdW50fX0se2tleTpcIl9jYWxjU3VjY2Vzc0NvdW50T2ZCdXNpbmVzc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBodShlKXx8IXRoaXMuX21hcC5oYXMoZSk/LTE6dGhpcy5fbWFwLmdldChlKS5zdWNjZXNzQ291bnR9fSx7a2V5OlwiX2NhbGNTdWNjZXNzQ291bnRPZlBsYXRmb3JtXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoaHUoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKXJldHVybi0xO3ZhciB0PXRoaXMuX21hcC5nZXQoZSk7cmV0dXJuIHQuc3VjY2Vzc0NvdW50K3QuZmFpbGVkQ291bnRPZlVzZXJTaWRlfX0se2tleTpcIl9jYWxjQXZnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGh1KGUpfHwhdGhpcy5fbWFwLmhhcyhlKT8tMTplPT09dnA/dGhpcy5fY2FsY0F2Z1NwZWVkKGUpOnRoaXMuX2NhbGNBdmdDb3N0KGUpfX0se2tleTpcIl9jYWxjQXZnQ29zdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21hcC5nZXQoZSkuY29zdEFycmF5Lmxlbmd0aDtpZigwPT09dClyZXR1cm4gMDt2YXIgbj0wO3JldHVybiB0aGlzLl9tYXAuZ2V0KGUpLmNvc3RBcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXtuKz1lfSkpLHBhcnNlSW50KG4vdCl9fSx7a2V5OlwiX2NhbGNBdmdTcGVlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj0wO3JldHVybiB0aGlzLl9tYXAuZ2V0KGUpLmNvc3RBcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Kz1lfSkpLHRoaXMuX21hcC5nZXQoZSkuZmlsZVNpemVBcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXtuKz1lfSkpLHBhcnNlSW50KDFlMypuL3QpfX0se2tleTpcImdldFN0YXRSZXN1bHRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jYWxjVG90YWxDb3VudChlKTtpZigwPT09dClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLl9jYWxjU3VjY2Vzc0NvdW50T2ZCdXNpbmVzcyhlKSxvPXRoaXMuX2NhbGNTdWNjZXNzUmF0ZU9mQnVzaW5lc3MoZSkscj10aGlzLl9jYWxjU3VjY2Vzc0NvdW50T2ZQbGF0Zm9ybShlKSxhPXRoaXMuX2NhbGNTdWNjZXNzUmF0ZU9mUGxhdGZvcm0oZSkscz10aGlzLl9jYWxjQXZnKGUpO3JldHVybiB0aGlzLnJlc2V0KGUpLHt0b3RhbENvdW50OnQsc3VjY2Vzc0NvdW50T2ZCdXNpbmVzczpuLHN1Y2Nlc3NSYXRlT2ZCdXNpbmVzczpvLHN1Y2Nlc3NDb3VudE9mUGxhdGZvcm06cixzdWNjZXNzUmF0ZU9mUGxhdGZvcm06YSxhdmdWYWx1ZTpzfX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2h1KGUpP3RoaXMuX21hcC5jbGVhcigpOnRoaXMuX21hcC5zZXQoZSx7dG90YWxDb3VudDowLHN1Y2Nlc3NDb3VudDowLGZhaWxlZENvdW50T2ZVc2VyU2lkZTowLGNvc3RBcnJheTpbXSxmaWxlU2l6ZUFycmF5OltdfSl9fV0pLGV9KCksREk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7eW4odGhpcyxlKSx0aGlzLl9sYXN0TWFwPW5ldyBNYXAsdGhpcy5fY3VycmVudE1hcD1uZXcgTWFwfXJldHVybiBFbihlLFt7a2V5OlwiaW5pdE1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9sYXN0TWFwLnNldChlLG5ldyBNYXApLHQuX2N1cnJlbnRNYXAuc2V0KGUsbmV3IE1hcCl9KSl9fSx7a2V5OlwiYWRkTWVzc2FnZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXksbj1lLm1lc3NhZ2U7aWYoaHUodCl8fCF0aGlzLl9sYXN0TWFwLmhhcyh0KXx8IXRoaXMuX2N1cnJlbnRNYXAuaGFzKHQpKXJldHVybiExO3ZhciBvPW4uY29udmVyc2F0aW9uSUQscj1uLnNlcXVlbmNlLGE9by5yZXBsYWNlKFluLkNPTlZfR1JPVVAsXCJcIik7aWYoMD09PXRoaXMuX2xhc3RNYXAuZ2V0KHQpLnNpemUpdGhpcy5fYWRkQ3VycmVudE1hcChlKTtlbHNlIGlmKHRoaXMuX2xhc3RNYXAuZ2V0KHQpLmhhcyhhKSl7dmFyIHM9dGhpcy5fbGFzdE1hcC5nZXQodCkuZ2V0KGEpLGk9cy5sZW5ndGgtMTtyPnNbMF0mJnI8c1tpXT8ocy5wdXNoKHIpLHMuc29ydCgpLHRoaXMuX2xhc3RNYXAuZ2V0KHQpLnNldChhLHMpKTp0aGlzLl9hZGRDdXJyZW50TWFwKGUpfWVsc2UgdGhpcy5fYWRkQ3VycmVudE1hcChlKTtyZXR1cm4hMH19LHtrZXk6XCJfYWRkQ3VycmVudE1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5LG49ZS5tZXNzYWdlLG89bi5jb252ZXJzYXRpb25JRCxyPW4uc2VxdWVuY2UsYT1vLnJlcGxhY2UoWW4uQ09OVl9HUk9VUCxcIlwiKTt0aGlzLl9jdXJyZW50TWFwLmdldCh0KS5oYXMoYSl8fHRoaXMuX2N1cnJlbnRNYXAuZ2V0KHQpLnNldChhLFtdKSx0aGlzLl9jdXJyZW50TWFwLmdldCh0KS5nZXQoYSkucHVzaChyKX19LHtrZXk6XCJfY29weURhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXtpZighaHUoZSkpe3RoaXMuX2xhc3RNYXAuc2V0KGUsbmV3IE1hcCk7dmFyIHQsbj10aGlzLl9sYXN0TWFwLmdldChlKSxvPUJuKHRoaXMuX2N1cnJlbnRNYXAuZ2V0KGUpKTt0cnl7Zm9yKG8ucygpOyEodD1vLm4oKSkuZG9uZTspe3ZhciByPVBuKHQudmFsdWUsMiksYT1yWzBdLHM9clsxXTtuLnNldChhLHMpfX1jYXRjaChpKXtvLmUoaSl9ZmluYWxseXtvLmYoKX1uPW51bGwsdGhpcy5fY3VycmVudE1hcC5zZXQoZSxuZXcgTWFwKX19fSx7a2V5OlwiZ2V0U3RhdFJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGh1KHRoaXMuX2N1cnJlbnRNYXAuZ2V0KGUpKXx8aHUodGhpcy5fbGFzdE1hcC5nZXQoZSkpKXJldHVybiBudWxsO2lmKDA9PT10aGlzLl9sYXN0TWFwLmdldChlKS5zaXplKXJldHVybiB0aGlzLl9jb3B5RGF0YShlKSxudWxsO3ZhciB0PTAsbj0wO2lmKHRoaXMuX2xhc3RNYXAuZ2V0KGUpLmZvckVhY2goKGZ1bmN0aW9uKGUsbyl7dmFyIHI9VW4oZS52YWx1ZXMoKSksYT1yLmxlbmd0aCxzPXJbYS0xXS1yWzBdKzE7dCs9cyxuKz1hfSkpLDA9PT10KXJldHVybiBudWxsO3ZhciBvPVl1KG4vdCoxMDAsMik7cmV0dXJuIG8+MTAwJiYobz0xMDApLHRoaXMuX2NvcHlEYXRhKGUpLHt0b3RhbENvdW50OnQsc3VjY2Vzc0NvdW50T2ZNZXNzYWdlUmVjZWl2ZWQ6bixzdWNjZXNzUmF0ZU9mTWVzc2FnZVJlY2VpdmVkOm99fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50TWFwLmNsZWFyKCksdGhpcy5fbGFzdE1hcC5jbGVhcigpfX1dKSxlfSgpLE5JPWZ1bmN0aW9uKGUpe0RuKG4sZSk7dmFyIHQ9d24obik7ZnVuY3Rpb24gbihlKXt2YXIgbzt5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiUXVhbGl0eVN0YXRNb2R1bGVcIixvLlRBRz1cImltLXNzb2xvZy1xdWFsaXR5LXN0YXRcIixvLnJlcG9ydEluZGV4PTAsby53aG9sZVBlcmlvZD0hMSxvLl9xdWFsaXR5SXRlbXM9W3BwLGdwLGhwLGZwLF9wLG1wLHZwLE1wLHlwLElwXSxvLl9tZXNzYWdlU2VudEl0ZW1zPVtocCxmcCxfcCxtcCx2cF0sby5fbWVzc2FnZVJlY2VpdmVkSXRlbXM9W01wLHlwLElwXSxvLlJFUE9SVF9JTlRFUlZBTD0xMjAsby5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPVtdLG8uUkVQT1JUX1RJTllJRF9XSElURUxJU1Q9W10sby5fc3RhdEluZm9BcnI9W10sby5fYXZnUlRUPW5ldyBBSSxvLl9hdmdFMkVEZWxheT1uZXcgVEksby5fcmF0ZU1lc3NhZ2VTZW50PW5ldyBTSSxvLl9yYXRlTWVzc2FnZVJlY2VpdmVkPW5ldyBESTt2YXIgcj1vLmdldElubmVyRW1pdHRlckluc3RhbmNlKCk7cmV0dXJuIHIub24oTW0sby5fb25Mb2dpblN1Y2Nlc3MsR24obykpLHIub24oeW0sby5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsR24obykpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJfb25Mb2dpblN1Y2Nlc3NcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmluaXRNYXAodGhpcy5fbWVzc2FnZVNlbnRJdGVtcyksdGhpcy5fcmF0ZU1lc3NhZ2VSZWNlaXZlZC5pbml0TWFwKHRoaXMuX21lc3NhZ2VSZWNlaXZlZEl0ZW1zKTt2YXIgdD10aGlzLmdldE1vZHVsZShwbCksbj10LmdldEl0ZW0odGhpcy5UQUcsITEpOyFYdShuKSYmX3Uobi5mb3JFYWNoKSYmKFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uTG9naW5TdWNjZXNzLmdldCBxdWFsaXR5IHN0YXQgbG9nIGluIHN0b3JhZ2UsIG51bXM9XCIpLmNvbmNhdChuLmxlbmd0aCkpLG4uZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5fc3RhdEluZm9BcnIucHVzaCh0KX0pKSx0LnJlbW92ZUl0ZW0odGhpcy5UQUcsITEpKX19LHtrZXk6XCJfb25DbG91ZENvbmZpZ1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJxX3JwdF9pbnRlcnZhbFwiKSx0PXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJxX3JwdF9zZGthcHBpZF9ibFwiKSxuPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJxX3JwdF90aW55aWRfd2xcIik7aHUoZSl8fCh0aGlzLlJFUE9SVF9JTlRFUlZBTD1OdW1iZXIoZSkpLGh1KHQpfHwodGhpcy5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPXQuc3BsaXQoXCIsXCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIE51bWJlcihlKX0pKSksaHUobil8fCh0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPW4uc3BsaXQoXCIsXCIpKX19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmlzTG9nZ2VkSW4oKSYmZSV0aGlzLlJFUE9SVF9JTlRFUlZBTD09MCYmKHRoaXMud2hvbGVQZXJpb2Q9ITAsdGhpcy5fcmVwb3J0KCkpfX0se2tleTpcImFkZFJlcXVlc3RDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYXZnUlRULmFkZFJlcXVlc3RDb3VudCgpfX0se2tleTpcImFkZFJUVFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2F2Z1JUVC5hZGRSVFQoZSl9fSx7a2V5OlwiYWRkTWVzc2FnZURlbGF5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fYXZnRTJFRGVsYXkuYWRkTWVzc2FnZURlbGF5KGUpfX0se2tleTpcImFkZFRvdGFsQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9yYXRlTWVzc2FnZVNlbnQuYWRkVG90YWxDb3VudChlKXx8UWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYWRkVG90YWxDb3VudCBpbnZhbGlkIGtleTpcIiksZSl9fSx7a2V5OlwiYWRkU3VjY2Vzc0NvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZFN1Y2Nlc3NDb3VudChlKXx8UWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYWRkU3VjY2Vzc0NvdW50IGludmFsaWQga2V5OlwiKSxlKX19LHtrZXk6XCJhZGRGYWlsZWRDb3VudE9mVXNlclNpZGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9yYXRlTWVzc2FnZVNlbnQuYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlKGUpfHxRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRGYWlsZWRDb3VudE9mVXNlclNpZGUgaW52YWxpZCBrZXk6XCIpLGUpfX0se2tleTpcImFkZENvc3RcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3JhdGVNZXNzYWdlU2VudC5hZGRDb3N0KGUsdCl8fFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZENvc3QgaW52YWxpZCBrZXkgb3IgY29zdDpcIiksZSx0KX19LHtrZXk6XCJhZGRGaWxlU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZEZpbGVTaXplKGUsdCl8fFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZEZpbGVTaXplIGludmFsaWQga2V5IG9yIHNpemU6XCIpLGUsdCl9fSx7a2V5OlwiYWRkTWVzc2FnZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcmF0ZU1lc3NhZ2VSZWNlaXZlZC5hZGRNZXNzYWdlU2VxdWVuY2UoZSl8fFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZE1lc3NhZ2VTZXF1ZW5jZSBpbnZhbGlkIGtleTpcIiksZS5rZXkpfX0se2tleTpcIl9nZXRRdWFsaXR5SXRlbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49QXBbdGhpcy5nZXROZXR3b3JrVHlwZSgpXTtodShuKSYmKG49OCk7dmFyIG89e3F1YWxpdHlUeXBlOkVwW2VdLHRpbWVzdGFtcDpXaSgpLG5ldHdvcmtUeXBlOm4sZXh0ZW5zaW9uOlwiXCJ9O3N3aXRjaChlKXtjYXNlIHBwOnQ9dGhpcy5fYXZnUlRULmdldFN0YXRSZXN1bHQoKTticmVhaztjYXNlIGdwOnQ9dGhpcy5fYXZnRTJFRGVsYXkuZ2V0U3RhdFJlc3VsdCgpO2JyZWFrO2Nhc2UgaHA6Y2FzZSBmcDpjYXNlIF9wOmNhc2UgbXA6Y2FzZSB2cDp0PXRoaXMuX3JhdGVNZXNzYWdlU2VudC5nZXRTdGF0UmVzdWx0KGUpO2JyZWFrO2Nhc2UgTXA6Y2FzZSB5cDpjYXNlIElwOnQ9dGhpcy5fcmF0ZU1lc3NhZ2VSZWNlaXZlZC5nZXRTdGF0UmVzdWx0KGUpfXJldHVybiBudWxsPT09dD9udWxsOlNuKHt9LG8se30sdCl9fSx7a2V5OlwiX3JlcG9ydFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1bXSxvPW51bGw7aHUoZSk/dGhpcy5fcXVhbGl0eUl0ZW1zLmZvckVhY2goKGZ1bmN0aW9uKGUpe251bGwhPT0obz10Ll9nZXRRdWFsaXR5SXRlbShlKSkmJihvLnJlcG9ydEluZGV4PXQucmVwb3J0SW5kZXgsby53aG9sZVBlcmlvZD10Lndob2xlUGVyaW9kLG4ucHVzaChvKSl9KSk6bnVsbCE9PShvPXRoaXMuX2dldFF1YWxpdHlJdGVtKGUpKSYmKG8ucmVwb3J0SW5kZXg9dGhpcy5yZXBvcnRJbmRleCxvLndob2xlUGVyaW9kPXRoaXMud2hvbGVQZXJpb2Qsbi5wdXNoKG8pKSxRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3JlcG9ydFwiKSxuKSx0aGlzLl9zdGF0SW5mb0Fyci5sZW5ndGg+MCYmKG49bi5jb25jYXQodGhpcy5fc3RhdEluZm9BcnIpLHRoaXMuX3N0YXRJbmZvQXJyPVtdKTt2YXIgcj10aGlzLmdldE1vZHVsZShkbCksYT1yLmdldFNES0FwcElEKCkscz1yLmdldFRpbnlJRCgpOyR1KHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVCxhKSYmIXp1KHRoaXMuUkVQT1JUX1RJTllJRF9XSElURUxJU1QscykmJihuPVtdKSxuLmxlbmd0aD4wJiZ0aGlzLl9kb1JlcG9ydChuKX19LHtrZXk6XCJfZG9SZXBvcnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49e2hlYWRlcjpsdih0aGlzKSxxdWFsaXR5OmV9O3RoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlhkLHJlcXVlc3REYXRhOlNuKHt9LG4pfSkudGhlbigoZnVuY3Rpb24oKXt0LnJlcG9ydEluZGV4KyssdC53aG9sZVBlcmlvZD0hMX0pKS5jYXRjaCgoZnVuY3Rpb24obil7UWkud2FybihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuX2RvUmVwb3J0LCBvbmxpbmU6XCIpLmNvbmNhdCh0LmdldE5ldHdvcmtUeXBlKCksXCIgZXJyb3I6XCIpLG4pLHQuX3N0YXRJbmZvQXJyPXQuX3N0YXRJbmZvQXJyLmNvbmNhdChlKSx0Ll9mbHVzaEF0T25jZSgpfSkpfX0se2tleTpcIl9mbHVzaEF0T25jZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRNb2R1bGUocGwpLHQ9ZS5nZXRJdGVtKHRoaXMuVEFHLCExKSxuPXRoaXMuX3N0YXRJbmZvQXJyO2lmKFh1KHQpKVFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2ZsdXNoQXRPbmNlIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKSxlLnNldEl0ZW0odGhpcy5UQUcsbiwhMCwhMSk7ZWxzZXt2YXIgbz1uLmNvbmNhdCh0KTtvLmxlbmd0aD4xMCYmKG89by5zbGljZSgwLDEwKSksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuY2xhc3NOYW1lLFwiLl9mbHVzaEF0T25jZSBjb3VudDpcIikuY29uY2F0KG8ubGVuZ3RoKSksZS5zZXRJdGVtKHRoaXMuVEFHLG8sITAsITEpfXRoaXMuX3N0YXRJbmZvQXJyPVtdfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9yZXBvcnQoKSx0aGlzLnJlcG9ydEluZGV4PTAsdGhpcy53aG9sZVBlcmlvZD0hMSx0aGlzLlJFUE9SVF9TREtBUFBJRF9CTEFDS0xJU1Q9W10sdGhpcy5SRVBPUlRfVElOWUlEX1dISVRFTElTVD1bXSx0aGlzLl9hdmdSVFQucmVzZXQoKSx0aGlzLl9hdmdFMkVEZWxheS5yZXNldCgpLHRoaXMuX3JhdGVNZXNzYWdlU2VudC5yZXNldCgpLHRoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQucmVzZXQoKX19XSksbn0oTmwpLENJPWZ1bmN0aW9uIGUodCl7eW4odGhpcyxlKSxYdSh0KXx8KHRoaXMudXNlcklEPXQudXNlcklEfHxcIlwiLHRoaXMubmljaz10Lm5pY2t8fFwiXCIsdGhpcy5hdmF0YXI9dC5hdmF0YXJ8fFwiXCIsdGhpcy50aW1lPXQudGltZXx8MCx0aGlzLnNvdXJjZT10LnNvdXJjZXx8XCJcIix0aGlzLndvcmRpbmc9dC53b3JkaW5nfHxcIlwiLHRoaXMudHlwZT10LnR5cGV8fFwiXCIpfSxrST1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9zbnNNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJGcmllbmRBcHBsaWNhdGlvbkhhbmRsZXJcIix0aGlzLl9zdGFydFRpbWU9MCx0aGlzLl9tYXhMaW1pdGVkPTEwMCx0aGlzLl9jdXJyZW50U2VxdWVuY2U9MCx0aGlzLl9mcmllbmRBcHBsaWNhdGlvbk1hcD1uZXcgTWFwLHRoaXMuX3VucmVhZENvdW50PTB9cmV0dXJuIEVuKGUsW3trZXk6XCJnZXRMb2NhbEZyaWVuZEFwcGxpY2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJue2ZyaWVuZEFwcGxpY2F0aW9uTGlzdDpVbih0aGlzLl9mcmllbmRBcHBsaWNhdGlvbk1hcC52YWx1ZXMoKSksdW5yZWFkQ291bnQ6dGhpcy5fdW5yZWFkQ291bnR9fX0se2tleTpcIl9vbkZyaWVuZEFwcGxpY2F0aW9uTGlzdFVwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3Nuc01vZHVsZS5lbWl0T3V0ZXJFdmVudChXbi5GUklFTkRfQVBQTElDQVRJT05fTElTVF9VUERBVEVELHtmcmllbmRBcHBsaWNhdGlvbkxpc3Q6VW4odGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAudmFsdWVzKCkpLHVucmVhZENvdW50OnRoaXMuX3VucmVhZENvdW50fSl9fSx7a2V5Olwib25GcmllbmRBcHBsaWNhdGlvblJlYWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3VucmVhZENvdW50PTAsdGhpcy5fb25GcmllbmRBcHBsaWNhdGlvbkxpc3RVcGRhdGVkKCl9fSx7a2V5Olwib25GcmllbmRBcHBsaWNhdGlvbkFkZGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2lmKCFYdShlKSl7dmFyIG89XCJcIjtvPXQ9PT10aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKT9Zbi5TTlNfQVBQTElDQVRJT05fU0VOVF9CWV9NRTpZbi5TTlNfQVBQTElDQVRJT05fU0VOVF9UT19NRTt2YXIgcj0hMTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIuY29uY2F0KGUudXNlcklELFwiX1wiKS5jb25jYXQobyk7byE9PVluLlNOU19BUFBMSUNBVElPTl9TRU5UX1RPX01FfHxuLl9mcmllbmRBcHBsaWNhdGlvbk1hcC5oYXModCl8fChuLl91bnJlYWRDb3VudCs9MSksbi5fZnJpZW5kQXBwbGljYXRpb25NYXAuc2V0KHQsbmV3IENJKFNuKHt9LGUse3R5cGU6b30pKSkscj0hMH0pKSxyJiZ0aGlzLl9vbkZyaWVuZEFwcGxpY2F0aW9uTGlzdFVwZGF0ZWQoKX19fSx7a2V5Olwib25GcmllbmRBcHBsaWNhdGlvbkRlbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtYdShlKXx8dGhpcy5nZXRGcmllbmRBcHBsaWNhdGlvbkxpc3QoKX19LHtrZXk6XCJnZXRGcmllbmRBcHBsaWNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgRHAocmgpLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEZyaWVuZEFwcGxpY2F0aW9uTGlzdFwiKTtyZXR1cm4gdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTokbCxyZXF1ZXN0RGF0YTp7YXBwbGljYXRpb25UeXBlOlluLlNOU19BUFBMSUNBVElPTl9UWVBFX0JPVEgsZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksbWF4TGltaXRlZDp0aGlzLl9tYXhMaW1pdGVkLHN0YXJ0VGltZTp0aGlzLl9zdGFydFRpbWUsbGFzdFNlcXVlbmNlOnRoaXMuX2N1cnJlbnRTZXF1ZW5jZX19KS50aGVuKChmdW5jdGlvbihvKXt2YXIgcj1vLmRhdGEsYT1yLnJlc3VsdExpc3Qscz1yLnVucmVhZENvdW50LGk9ci5zdGFydFRpbWUsdT1yLmN1cnJlbnRTZXF1ZW5jZTtlLl9zdGFydFRpbWU9aSxlLl9jdXJyZW50U2VxdWVuY2U9dSxlLl91bnJlYWRDb3VudD1zO3ZhciBjPWd1KGEpP2EubGVuZ3RoOjA7dC5zZXROZXR3b3JrVHlwZShlLl9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImFwcGxpY2F0aW9uQ291bnQ6XCIuY29uY2F0KGMsXCIgdW5yZWFkQ291bnQ6XCIpLmNvbmNhdChzKSkuZW5kKCksUWkuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rLiBhcHBsaWNhdGlvbkNvdW50OlwiKS5jb25jYXQoYyxcIiB1bnJlYWRDb3VudDpcIikuY29uY2F0KHMpKSxlLl9mcmllbmRBcHBsaWNhdGlvbk1hcC5jbGVhcigpLGd1KGEpJiZhLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBuPXQudXNlcklELG89dC50eXBlLHI9bmV3IENJKHQpO2UuX2ZyaWVuZEFwcGxpY2F0aW9uTWFwLnNldChcIlwiLmNvbmNhdChuLFwiX1wiKS5jb25jYXQobykscil9KSksZS5fb25GcmllbmRBcHBsaWNhdGlvbkxpc3RVcGRhdGVkKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKG8pe3JldHVybiBlLl9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49UG4oZSwyKSxyPW5bMF0sYT1uWzFdO3Quc2V0RXJyb3IobyxyLGEpLmVuZCgpfSkpLFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxvKSx1bShvKX0pKX19LHtrZXk6XCJkZWxldGVGcmllbmRBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlRnJpZW5kQXBwbGljYXRpb25cIiksbz1lLnVzZXJJRCxyPWUudHlwZTtpZigoIXJ8fHIhPT1Zbi5TTlNfQVBQTElDQVRJT05fU0VOVF9CWV9NRSYmciE9PVluLlNOU19BUFBMSUNBVElPTl9TRU5UX1RPX01FKSYmKHI9WW4uU05TX0FQUExJQ0FUSU9OX1NFTlRfVE9fTUUpLCF0aGlzLl9mcmllbmRBcHBsaWNhdGlvbk1hcC5oYXMoXCJcIi5jb25jYXQobyxcIl9cIikuY29uY2F0KHIpKSlyZXR1cm4gdW0oe2NvZGU6bHAuRlJJRU5EX0FQUExJQ0FUSU9OX05PVF9FWElTVCxtZXNzYWdlOmRwLkZSSUVORF9BUFBMSUNBVElPTl9OT1RfRVhJU1R9KTt2YXIgYT1uZXcgRHAoYWgpO3JldHVybiBhLnNldE1lc3NhZ2UoXCJ1c2VySUQ6XCIuY29uY2F0KG8sXCIgdHlwZTpcIikuY29uY2F0KHIpKSx0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnpsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSx1c2VySURMaXN0OltvXSx0eXBlOnJ9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHM9ZS5kYXRhLnJlc3VsdExpc3QsaT1zWzBdLHU9aS50byxjPWkucmVzdWx0Q29kZSxsPWkucmVzdWx0SW5mbztyZXR1cm4gYS5zZXROZXR3b3JrVHlwZSh0Ll9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TW9yZU1lc3NhZ2UoXCJyZXN1bHRMaXN0OlwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShzKSkpLmVuZCgpLFFpLmluZm8oXCJcIi5jb25jYXQobixcIiBvay4gdXNlcklEOlwiKS5jb25jYXQobyxcIiB0eXBlOlwiKS5jb25jYXQocikpLDA9PT1jP1FfKCk6dW0oe3VzZXJJRDp1LGNvZGU6YyxtZXNzYWdlOmx9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcImFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hY2NlcHRGcmllbmRBcHBsaWNhdGlvblwiKSxvPWUudXNlcklELHI9ZS5yZW1hcmssYT1lLnRhZyxzPWUudHlwZTsoIXN8fHMhPT1Zbi5TTlNfQVBQTElDQVRJT05fQUdSRUUmJnMhPT1Zbi5TTlNfQVBQTElDQVRJT05fQUdSRUVfQU5EX0FERCkmJihzPVluLlNOU19BUFBMSUNBVElPTl9BR1JFRV9BTkRfQUREKTt2YXIgaT1uZXcgRHAoc2gpO3JldHVybiBpLnNldE1lc3NhZ2UoXCJ1c2VySUQ6XCIuY29uY2F0KG8sXCIgdHlwZTpcIikuY29uY2F0KHMpKSx0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOllsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSxyZXNwb25zZUZyaWVuZEl0ZW06W3t1c2VySUQ6byxyZW1hcms6cix0YWc6YSxhY3Rpb246c31dfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe2kuc2V0TmV0d29ya1R5cGUodC5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpO3ZhciByPWUuZGF0YS5yZXN1bHRMaXN0WzBdLGE9ci5yZXN1bHRDb2RlLHU9ci5yZXN1bHRJbmZvO2lmKDAhPT1hKXJldHVybiB1bSh7Y29kZTphLG1lc3NhZ2U6dX0pO1FpLmluZm8oXCJcIi5jb25jYXQobixcIiBvay4gdXNlcklEOlwiKS5jb25jYXQobyxcIiB0eXBlOlwiKS5jb25jYXQocykpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtpLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwicmVmdXNlRnJpZW5kQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uXCIpLG89ZS51c2VySUQscj1uZXcgRHAoaWgpO3JldHVybiByLnNldE1lc3NhZ2UoXCJ1c2VySUQ6XCIuY29uY2F0KG8pKSx0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOllsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSxyZXNwb25zZUZyaWVuZEl0ZW06W3t1c2VySUQ6byxhY3Rpb246XCJSZXNwb25zZV9BY3Rpb25fUmVqZWN0XCJ9XX19KS50aGVuKChmdW5jdGlvbihlKXtyLnNldE5ldHdvcmtUeXBlKHQuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTt2YXIgYT1lLmRhdGEucmVzdWx0TGlzdFswXSxzPWEucmVzdWx0Q29kZSxpPWEucmVzdWx0SW5mbztpZigwIT09cylyZXR1cm4gdW0oe2NvZGU6cyxtZXNzYWdlOml9KTtRaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2suIHVzZXJJRDpcIikuY29uY2F0KG8pKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxhPW5bMV07ci5zZXRFcnJvcihlLG8sYSkuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcIl9vbkZyaWVuZEFwcGxpY2F0aW9uUHJvY2Vzc2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZigwIT09ZS5sZW5ndGgpe3ZhciBuPSExO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89XCJcIi5jb25jYXQoZS50byxcIl9cIikuY29uY2F0KFluLlNOU19BUFBMSUNBVElPTl9TRU5UX1RPX01FKTt0Ll9mcmllbmRBcHBsaWNhdGlvbk1hcC5oYXMobykmJih0Ll9mcmllbmRBcHBsaWNhdGlvbk1hcC5kZWxldGUobyksdC5fdW5yZWFkQ291bnQtPTEsbj0hMCl9KSksdGhpcy5fdW5yZWFkQ291bnQ8MCYmKHRoaXMuX3VucmVhZENvdW50PTApLG4mJnRoaXMuX29uRnJpZW5kQXBwbGljYXRpb25MaXN0VXBkYXRlZCgpfX19LHtrZXk6XCJzZXRGcmllbmRBcHBsaWNhdGlvblJlYWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0RnJpZW5kQXBwbGljYXRpb25SZWFkXCIpLG49bmV3IERwKHVoKTtyZXR1cm4gdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpKbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksbGF0ZXN0VGltZVN0YW1wOll1KFdpKCkvMWUzLDApfX0pLnRoZW4oKGZ1bmN0aW9uKG8pe24uc2V0TmV0d29ya1R5cGUoZS5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmluZm8oXCJcIi5jb25jYXQodCxcIiBva1wiKSksZS5fdW5yZWFkQ291bnQ9MH0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuIGUuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1QbihlLDIpLHI9dFswXSxhPXRbMV07bi5zZXRFcnJvcihvLHIsYSkuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdCh0LFwiIGZhaWxlZC4gZXJyb3I6XCIpLG8pLHVtKG8pfSkpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zdGFydEluZGV4PTAsdGhpcy5fbWF4TGltaXRlZD0xMDAsdGhpcy5fY3VycmVudFNlcXVlbmNlPTAsdGhpcy5fdW5yZWFkQ291bnQ9MCx0aGlzLl9mcmllbmRBcHBsaWNhdGlvbk1hcC5jbGVhcigpfX1dKSxlfSgpLExJPWVvKFwic3BsaWNlXCIpLFJJPXplKFwic3BsaWNlXCIse0FDQ0VTU09SUzohMCwwOjAsMToyfSksT0k9TWF0aC5tYXgsR0k9TWF0aC5taW47a2Uoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOiFMSXx8IVJJfSx7c3BsaWNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxyLGEscyxpLHU9T2UodGhpcyksYz1pZSh1Lmxlbmd0aCksbD1sZShlLGMpLGQ9YXJndW1lbnRzLmxlbmd0aDtpZigwPT09ZD9uPW89MDoxPT09ZD8obj0wLG89Yy1sKToobj1kLTIsbz1HSShPSShhZSh0KSwwKSxjLWwpKSxjK24tbz45MDA3MTk5MjU0NzQwOTkxKXRocm93IFR5cGVFcnJvcihcIk1heGltdW0gYWxsb3dlZCBsZW5ndGggZXhjZWVkZWRcIik7Zm9yKHI9VmUodSxvKSxhPTA7YTxvO2ErKykocz1sK2EpaW4gdSYmc3QocixhLHVbc10pO2lmKHIubGVuZ3RoPW8sbjxvKXtmb3IoYT1sO2E8Yy1vO2ErKylpPWErbiwocz1hK28paW4gdT91W2ldPXVbc106ZGVsZXRlIHVbaV07Zm9yKGE9YzthPmMtbytuO2EtLSlkZWxldGUgdVthLTFdfWVsc2UgaWYobj5vKWZvcihhPWMtbzthPmw7YS0tKWk9YStuLTEsKHM9YStvLTEpaW4gdT91W2ldPXVbc106ZGVsZXRlIHVbaV07Zm9yKGE9MDthPG47YSsrKXVbYStsXT1hcmd1bWVudHNbYSsyXTtyZXR1cm4gdS5sZW5ndGg9Yy1vK24scn19KTt2YXIgYkk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7eW4odGhpcyxlKSx0aGlzLnVzZXJJRD10LHRoaXMucmVtYXJrPVwiXCIsdGhpcy5ncm91cExpc3Q9W10sdGhpcy5zb3VyY2U9XCJcIix0aGlzLmFkZFRpbWU9MCx0aGlzLmZyaWVuZEN1c3RvbUZpZWxkPVtdLHRoaXMudGltZXN0YW1wPTA7dmFyIG89e307aWYoby51c2VySUQ9dCwhWHUobikpZm9yKHZhciByPVwiXCIsYT1cIlwiLHM9MCxpPW4ubGVuZ3RoO3M8aTtzKyspaWYocj1uW3NdLnRhZyxhPW5bc10udmFsdWUsci5pbmRleE9mKFwiVGFnX1NOU19DdXN0b21cIik+LTEpdGhpcy5mcmllbmRDdXN0b21GaWVsZC5wdXNoKHtrZXk6cix2YWx1ZTphfSk7ZWxzZSBzd2l0Y2gocil7Y2FzZSBldS5OSUNLOm8ubmljaz1hO2JyZWFrO2Nhc2UgZXUuR0VOREVSOm8uZ2VuZGVyPWE7YnJlYWs7Y2FzZSBldS5CSVJUSERBWTpvLmJpcnRoZGF5PWE7YnJlYWs7Y2FzZSBldS5MT0NBVElPTjpvLmxvY2F0aW9uPWE7YnJlYWs7Y2FzZSBldS5TRUxGU0lHTkFUVVJFOm8uc2VsZlNpZ25hdHVyZT1hO2JyZWFrO2Nhc2UgZXUuQUxMT1dUWVBFOm8uYWxsb3dUeXBlPWE7YnJlYWs7Y2FzZSBldS5MQU5HVUFHRTpvLmxhbmd1YWdlPWE7YnJlYWs7Y2FzZSBldS5BVkFUQVI6by5hdmF0YXI9YTticmVhaztjYXNlIGV1Lk1FU1NBR0VTRVRUSU5HUzpvLm1lc3NhZ2VTZXR0aW5ncz1hO2JyZWFrO2Nhc2UgZXUuQURNSU5GT1JCSURUWVBFOm8uYWRtaW5Gb3JiaWRUeXBlPWE7YnJlYWs7Y2FzZSBldS5MRVZFTDpvLmxldmVsPWE7YnJlYWs7Y2FzZSBldS5ST0xFOm8ucm9sZT1hO2JyZWFrO2Nhc2UgdHUuUkVNQVJLOnRoaXMucmVtYXJrPWE7YnJlYWs7Y2FzZSB0dS5BRERUSU1FOnRoaXMuYWRkVGltZT1hO2JyZWFrO2Nhc2UgdHUuR1JPVVA6dGhpcy5ncm91cExpc3Q9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhKSk7YnJlYWs7Y2FzZSB0dS5BRERTT1VSQ0U6dGhpcy5zb3VyY2U9YTticmVhaztjYXNlIHR1LkFERFdPUkRJTkc6YnJlYWs7ZGVmYXVsdDpRaS5sb2coXCJzbnNQcm9maWxlSXRlbSB1bmtvd24gdGFnLT5cIixuW3NdLnRhZyl9dGhpcy5wcm9maWxlPW5ldyBrbShvKX1yZXR1cm4gRW4oZSxbe2tleTpcInZhbGlkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ITAsbj1cIlwiO2lmKFh1KGUpKXJldHVybnt2YWxpZDohMSx0aXBzOlwiZW1wdHkgb3B0aW9uc1wifTtpZihlLnByb2ZpbGVDdXN0b21GaWVsZClmb3IodmFyIG89ZS5wcm9maWxlQ3VzdG9tRmllbGQubGVuZ3RoLHI9bnVsbCxhPTA7YTxvO2ErKyl7aWYocj1lLnByb2ZpbGVDdXN0b21GaWVsZFthXSwhbHUoci5rZXkpfHwtMT09PXIua2V5LmluZGV4T2YoXCJUYWdfUHJvZmlsZV9DdXN0b21cIikpcmV0dXJue3ZhbGlkOiExLHRpcHM6XCLoh6rlrprkuYnotYTmlpnlrZfmrrXnmoTliY3nvIDlv4XpobvmmK8gVGFnX1Byb2ZpbGVfQ3VzdG9tXCJ9O2lmKCFsdShyLnZhbHVlKSlyZXR1cm57dmFsaWQ6ITEsdGlwczpcIuiHquWumuS5iei1hOaWmeWtl+auteeahCB2YWx1ZSDlv4XpobvmmK/lrZfnrKbkuLJcIn19Zm9yKHZhciBzIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscykpe2lmKFwicHJvZmlsZUN1c3RvbUZpZWxkXCI9PT1zKWNvbnRpbnVlO2lmKFh1KGVbc10pJiYhbHUoZVtzXSkmJiFjdShlW3NdKSl7bj1cImtleTpcIitzK1wiLCBpbnZhbGlkIHZhbHVlOlwiK2Vbc10sdD0hMTtjb250aW51ZX1zd2l0Y2gocyl7Y2FzZVwibmlja1wiOmx1KGVbc10pfHwobj1cIm5pY2sgc2hvdWxkIGJlIGEgc3RyaW5nXCIsdD0hMSksQXUoZVtzXSk+NTAwJiYobj1cIm5pY2sgbmFtZSBsaW1pdGVkOiBtdXN0IGxlc3MgdGhhbiBvciBlcXVhbCB0byBcIi5jb25jYXQoNTAwLFwiIGJ5dGVzLCBjdXJyZW50IHNpemU6IFwiKS5jb25jYXQoQXUoZVtzXSksXCIgYnl0ZXNcIiksdD0hMSk7YnJlYWs7Y2FzZVwiZ2VuZGVyXCI6Q3UobnUsZS5nZW5kZXIpfHwobj1cImtleTpnZW5kZXIsIGludmFsaWQgdmFsdWU6XCIrZS5nZW5kZXIsdD0hMSk7YnJlYWs7Y2FzZVwiYmlydGhkYXlcIjpjdShlLmJpcnRoZGF5KXx8KG49XCJiaXJ0aGRheSBzaG91bGQgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztjYXNlXCJsb2NhdGlvblwiOmx1KGUubG9jYXRpb24pfHwobj1cImxvY2F0aW9uIHNob3VsZCBiZSBhIHN0cmluZ1wiLHQ9ITEpO2JyZWFrO2Nhc2VcInNlbGZTaWduYXR1cmVcIjpsdShlLnNlbGZTaWduYXR1cmUpfHwobj1cInNlbGZTaWduYXR1cmUgc2hvdWxkIGJlIGEgc3RyaW5nXCIsdD0hMSk7YnJlYWs7Y2FzZVwiYWxsb3dUeXBlXCI6Q3UocnUsZS5hbGxvd1R5cGUpfHwobj1cImtleTphbGxvd1R5cGUsIGludmFsaWQgdmFsdWU6XCIrZS5hbGxvd1R5cGUsdD0hMSk7YnJlYWs7Y2FzZVwibGFuZ3VhZ2VcIjpjdShlLmxhbmd1YWdlKXx8KG49XCJsYW5ndWFnZSBzaG91bGQgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztjYXNlXCJhdmF0YXJcIjpsdShlLmF2YXRhcil8fChuPVwiYXZhdGFyIHNob3VsZCBiZSBhIHN0cmluZ1wiLHQ9ITEpO2JyZWFrO2Nhc2VcIm1lc3NhZ2VTZXR0aW5nc1wiOjAhPT1lLm1lc3NhZ2VTZXR0aW5ncyYmMSE9PWUubWVzc2FnZVNldHRpbmdzJiYobj1cIm1lc3NhZ2VTZXR0aW5ncyBzaG91bGQgYmUgMCBvciAxXCIsdD0hMSk7YnJlYWs7Y2FzZVwiYWRtaW5Gb3JiaWRUeXBlXCI6Q3Uob3UsZS5hZG1pbkZvcmJpZFR5cGUpfHwobj1cImtleTphZG1pbkZvcmJpZFR5cGUsIGludmFsaWQgdmFsdWU6XCIrZS5hZG1pbkZvcmJpZFR5cGUsdD0hMSk7YnJlYWs7Y2FzZVwibGV2ZWxcIjpjdShlLmxldmVsKXx8KG49XCJsZXZlbCBzaG91bGQgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztjYXNlXCJyb2xlXCI6Y3UoZS5yb2xlKXx8KG49XCJyb2xlIHNob3VsZCBiZSBhIG51bWJlclwiLHQ9ITEpO2JyZWFrO2RlZmF1bHQ6bj1cInVua25vd24ga2V5OlwiK3MrXCIgIFwiK2Vbc10sdD0hMX19cmV0dXJue3ZhbGlkOnQsdGlwczpufX19LHtrZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9XCJcIixuPVwiXCIsbz0wLHI9ZS5sZW5ndGg7bzxyO28rKylpZih0PWVbb10udGFnLG49ZVtvXS52YWx1ZSx0LmluZGV4T2YoXCJUYWdfU05TX0N1c3RvbVwiKT4tMSl0aGlzLmZyaWVuZEN1c3RvbUZpZWxkLmZvckVhY2goKGZ1bmN0aW9uKGUpe2Uua2V5PT09dCYmKGUudmFsdWU9bil9KSk7ZWxzZSBpZih0LmluZGV4T2YoXCJUYWdfUHJvZmlsZV9DdXN0b21cIik+LTEpdGhpcy5wcm9maWxlLnByb2ZpbGVDdXN0b21GaWVsZC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmtleT09PXQmJihlLnZhbHVlPW4pfSkpO2Vsc2Ugc3dpdGNoKHQpe2Nhc2UgZXUuTklDSzp0aGlzLnByb2ZpbGUubmljaz1uO2JyZWFrO2Nhc2UgZXUuR0VOREVSOnRoaXMucHJvZmlsZS5nZW5kZXI9bjticmVhaztjYXNlIGV1LkJJUlRIREFZOnRoaXMucHJvZmlsZS5iaXJ0aGRheT1uO2JyZWFrO2Nhc2UgZXUuTE9DQVRJT046dGhpcy5wcm9maWxlLmxvY2F0aW9uPW47YnJlYWs7Y2FzZSBldS5TRUxGU0lHTkFUVVJFOnRoaXMucHJvZmlsZS5zZWxmU2lnbmF0dXJlPW47YnJlYWs7Y2FzZSBldS5BTExPV1RZUEU6dGhpcy5wcm9maWxlLmFsbG93VHlwZT1uO2JyZWFrO2Nhc2UgZXUuTEFOR1VBR0U6dGhpcy5wcm9maWxlLmxhbmd1YWdlPW47YnJlYWs7Y2FzZSBldS5BVkFUQVI6dGhpcy5wcm9maWxlLmF2YXRhcj1uO2JyZWFrO2Nhc2UgZXUuTUVTU0FHRVNFVFRJTkdTOnRoaXMucHJvZmlsZS5tZXNzYWdlU2V0dGluZ3M9bjticmVhaztjYXNlIGV1LkFETUlORk9SQklEVFlQRTp0aGlzLnByb2ZpbGUuYWRtaW5Gb3JiaWRUeXBlPW47YnJlYWs7Y2FzZSBldS5MRVZFTDp0aGlzLnByb2ZpbGUubGV2ZWw9bjticmVhaztjYXNlIGV1LlJPTEU6dGhpcy5wcm9maWxlLnJvbGU9bjticmVhaztjYXNlIHR1LlJFTUFSSzp0aGlzLnJlbWFyaz1uO2JyZWFrO2Nhc2UgdHUuQUREVElNRTp0aGlzLmFkZFRpbWU9bjticmVhaztjYXNlIHR1LkdST1VQOnRoaXMuZ3JvdXBMaXN0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobikpO2JyZWFrO2Nhc2UgdHUuQUREU09VUkNFOnRoaXMuc291cmNlPW47YnJlYWs7Y2FzZSB0dS5BRERXT1JESU5HOmJyZWFrO2RlZmF1bHQ6UWkubG9nKFwic25zUHJvZmlsZUl0ZW0gdW5rb3duIHRhZy0+XCIsZVtvXS50YWcpfXRoaXMudGltZXN0YW1wPURhdGUubm93KCl9fSx7a2V5OlwidXBkYXRlUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMucHJvZmlsZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSx0aGlzLnRpbWVzdGFtcD1EYXRlLm5vdygpfX0se2tleTpcImFkZFRvR3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7LTE9PT10aGlzLmdyb3VwTGlzdC5pbmRleE9mKGUpJiYodGhpcy5ncm91cExpc3QucHVzaChlKSx0aGlzLmNvdW50PXRoaXMuZ3JvdXBMaXN0Lmxlbmd0aCl9fSx7a2V5OlwicmVtb3ZlRnJvbUdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ3JvdXBMaXN0LmluZGV4T2YoZSk7dD4tMSYmKHRoaXMuZ3JvdXBMaXN0LnNwbGljZSh0LDEpLHRoaXMuY291bnQ9dGhpcy5ncm91cExpc3QubGVuZ3RoKX19XSksZX0oKSx3ST1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9zbnNNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJGcmllbmRIYW5kbGVyXCIsdGhpcy5fZnJpZW5kTWFwPW5ldyBNYXAsdGhpcy5fc3RhcnRJbmRleD0wLHRoaXMuX3N0YW5kYXJkU2VxdWVuY2U9MCx0aGlzLl9jdXN0b21TZXF1ZW5jZT0wLHRoaXMuX2V4cGlyYXRpb25UaW1lPTE4ZTR9cmV0dXJuIEVuKGUsW3trZXk6XCJnZXRMb2NhbEZyaWVuZExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBVbih0aGlzLl9mcmllbmRNYXAudmFsdWVzKCkpfX0se2tleTpcImdldEZyaWVuZFJlbWFya1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRNYXAuaGFzKGUpP3RoaXMuX2ZyaWVuZE1hcC5nZXQoZSkucmVtYXJrOlwiXCJ9fSx7a2V5Olwib25GcmllbmRQcm9maWxlTW9kaWZpZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5kYXRhTGlzdDtpZighWHUobikpe3ZhciBvPXRoaXMuX3Nuc01vZHVsZS5nZXRNb2R1bGUobGwpO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS51c2VySUQscj1lLnByb2ZpbGVMaXN0O2lmKHQuaXNNeUZyaWVuZChuKSl7UWkubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5vbkZyaWVuZFByb2ZpbGVNb2RpZmllZC4gZnJpZW5kIHVzZXJJRDpcIikuY29uY2F0KG4pKTt2YXIgYT10Ll9mcmllbmRNYXAuZ2V0KG4pO2EudXBkYXRlKHIpLG8ubW9kaWZ5TWVzc2FnZVNlbnRCeVBlZXIoe2NvbnZlcnNhdGlvbklEOlwiXCIuY29uY2F0KFluLkNPTlZfQzJDKS5jb25jYXQobiksbGF0ZXN0TmljazphLnByb2ZpbGUubmljayxsYXRlc3RBdmF0YXI6YS5wcm9maWxlLmF2YXRhcn0pfX0pKX19fSx7a2V5Olwib25GcmllbmRBZGRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7MCE9PWUubGVuZ3RoJiYoUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbkZyaWVuZEFkZGVkIHVzZXJJRExpc3Q6XCIpLmNvbmNhdChlKSksZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9mcmllbmRNYXAuc2V0KGUsbmV3IGJJKGUpKX0pKSx0aGlzLmdldEZyaWVuZFByb2ZpbGUoe3VzZXJJRExpc3Q6ZX0pLnRoZW4oKGZ1bmN0aW9uKG4pe2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49dC5fZnJpZW5kTWFwLmdldChlKTtuLmdyb3VwTGlzdC5sZW5ndGg+MCYmdC5fc25zTW9kdWxlLnVwZGF0ZVdoZW5GcmllbmRBZGRlZCh7bmFtZUxpc3Q6bi5ncm91cExpc3QsdXNlcklEOmV9KX0pKSx0Ll9vbkZyaWVuZExpc3RVcGRhdGVkKCl9KSkpfX0se2tleTpcIm9uRnJpZW5kRGVsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7MCE9PWUubGVuZ3RoJiYoUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbkZyaWVuZERlbGV0ZWQgdXNlcklETGlzdDpcIikuY29uY2F0KGUpKSxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPXQuX2ZyaWVuZE1hcC5nZXQoZSk7bi5ncm91cExpc3QubGVuZ3RoPjAmJnQuX3Nuc01vZHVsZS51cGRhdGVXaGVuRnJpZW5kRGVsZXRlZCh7bmFtZUxpc3Q6bi5ncm91cExpc3QsdXNlcklEOmV9KSx0Ll9mcmllbmRNYXAuZGVsZXRlKGUpfSkpLHRoaXMuX29uRnJpZW5kTGlzdFVwZGF0ZWQoKSl9fSx7a2V5OlwiX29uRnJpZW5kTGlzdFVwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3Nuc01vZHVsZS5lbWl0T3V0ZXJFdmVudChXbi5GUklFTkRfTElTVF9VUERBVEVEKSx0aGlzLl9zbnNNb2R1bGUuZ2V0TW9kdWxlKGxsKS5jaGVja0FuZFBhdGNoUmVtYXJrKCl9fSx7a2V5OlwiZ2V0RnJpZW5kUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0RnJpZW5kUHJvZmlsZVwiKSxvPWUudXNlcklETGlzdCxyPVtdLGE9W10scz1bXTtpZihvLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKHQuX2ZyaWVuZE1hcC5oYXMoZSkpe3ZhciBuPXQuX2ZyaWVuZE1hcC5nZXQoZSk7RGF0ZS5ub3coKS1uLnRpbWVzdGFtcDx0Ll9leHBpcmF0aW9uVGltZT9hLnB1c2gobik6cy5wdXNoKGUpfWVsc2Ugci5wdXNoKHt1c2VySUQ6ZSxjb2RlOmxwLk5PVF9NWV9GUklFTkQsbWVzc2FnZTpkcC5OT1RfTVlfRlJJRU5EfSl9KSksMD09PXMubGVuZ3RoKXJldHVybiBRaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgbmV3VXNlcklETGlzdCBpcyBlbXB0eVwiKSksaW0oe2ZyaWVuZExpc3Q6YSxmYWlsdXJlVXNlcklETGlzdDpyfSk7dmFyIGk9bmV3IERwKHRoKTtpLnNldE1lc3NhZ2UoXCJ1c2VySURMaXN0OlwiLmNvbmNhdChzKSksUWkuaW5mbyhcIlwiLmNvbmNhdChuLFwiIHVzZXJJRExpc3Q6XCIpLmNvbmNhdChzKSk7dmFyIHU9T2JqZWN0LnZhbHVlcyh0dSkuY29uY2F0KE9iamVjdC52YWx1ZXMoZXUpKTtyZXR1cm4gdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpLbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksdXNlcklETGlzdDpzLHRhZ0xpc3Q6dX19KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gaS5zZXROZXR3b3JrVHlwZSh0Ll9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSxlLmRhdGEucmVzdWx0TGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbixvPWUudG8scz1lLnJlc3VsdENvZGUsaT1lLnJlc3VsdEluZm8sdT1lLnRhZ1ZhbHVlTGlzdDtodShzKXx8MD09PXM/KHQuX2ZyaWVuZE1hcC5oYXMobyk/KG49dC5fZnJpZW5kTWFwLmdldChvKSkudXBkYXRlKHUpOihuPW5ldyBiSShvLHUpLHQuX2ZyaWVuZE1hcC5zZXQobyxuKSksYS5wdXNoKG4pKTpyLnB1c2goe3VzZXJJRDpvLGNvZGU6cyxtZXNzYWdlOml9KX0pKSxRXyh7ZnJpZW5kTGlzdDphLGZhaWx1cmVVc2VySURMaXN0OnJ9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07aS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcImlzTXlGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kTWFwLmhhcyhlKX19LHtrZXk6XCJwYWdpbmdHZXRGcmllbmRMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IERwKG5oKSxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRGcmllbmRMaXN0XCIpLG89RGF0ZS5ub3coKTt0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlZsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSxzdGFydEluZGV4OnRoaXMuX3N0YXJ0SW5kZXgsc3RhbmRhcmRTZXF1ZW5jZTp0aGlzLl9zdGFuZGFyZFNlcXVlbmNlLGN1c3RvbVNlcXVlbmNlOnRoaXMuX2N1c3RvbVNlcXVlbmNlfX0pLnRoZW4oKGZ1bmN0aW9uKHIpe3ZhciBhPXIuZGF0YSxzPWEuZnJpZW5kQ291bnQsaT1hLnJlc3VsdExpc3QsdT1hLm5leHRTdGFydEluZGV4LGM9YS5zdGFuZGFyZFNlcXVlbmNlLGw9YS5jdXN0b21TZXF1ZW5jZSxkPWEuY29tcGxldGVGbGFnO2UuX3N0YXJ0SW5kZXg9dSxlLl9zdGFuZGFyZFNlcXVlbmNlPWMsZS5fY3VzdG9tU2VxdWVuY2U9bDt2YXIgcD1EYXRlLm5vdygpLW8sZz1cImZyaWVuZENvdW50OlwiLmNvbmNhdChzLFwiIG5leHRTdGFydEluZGV4OlwiKS5jb25jYXQodSxcIiBzdGFuZGFyZFNlcXVlbmNlOlwiKS5jb25jYXQoYyxcIiBcIikrXCJjdXN0b21TZXF1ZW5jZTpcIi5jb25jYXQobCxcIiBjb21wbGV0ZUZsYWc6XCIpLmNvbmNhdChkLFwiIGNvc3QgXCIpLmNvbmNhdChwLFwiIG1zXCIpO3Quc2V0TmV0d29ya1R5cGUoZS5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoZykuZW5kKCksUWkuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rLlwiKSxnKSxYdShpKXx8aS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgbj10LnRvLG89dC50YWdWYWx1ZUxpc3Q7ZS5fZnJpZW5kTWFwLnNldChuLG5ldyBiSShuLG8pKX0pKSwwPT09ZD9lLnBhZ2luZ0dldEZyaWVuZExpc3QoKTooZS5fc25zTW9kdWxlLmVtaXRPdXRlckV2ZW50KFduLkZSSUVORF9MSVNUX1VQREFURUQpLGUuX3BhZ2luZ0dldEZyaWVuZFByb2ZpbGUoKSl9KSkuY2F0Y2goKGZ1bmN0aW9uKG8pe3JldHVybiBlLl9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49UG4oZSwyKSxyPW5bMF0sYT1uWzFdO3Quc2V0RXJyb3IobyxyLGEpLmVuZCgpfSkpLFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxvKSx1bShvKX0pKX19LHtrZXk6XCJfcGFnaW5nR2V0RnJpZW5kUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVVuKHRoaXMuX2ZyaWVuZE1hcC5rZXlzKCkpLG49dGhpcy5fc25zTW9kdWxlLmdldE1vZHVsZShhbCksbz10Lmxlbmd0aCxyPW88PTEwMD8xOk1hdGguY2VpbChvLzEwMCk7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fcGFnaW5nR2V0RnJpZW5kUHJvZmlsZSBmcmllbmRDb3VudDpcIikuY29uY2F0KG8sXCIgcGFnZUNvdW50OlwiKS5jb25jYXQocikpO2Zvcih2YXIgYT0wO2E8cjthKyspbi5nZXRVc2VyUHJvZmlsZSh7dXNlcklETGlzdDp0LnNsaWNlKDEwMCphLDEwMCooYSsxKSl9KS50aGVuKChmdW5jdGlvbih0KXt0LmRhdGEuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49ZS5fZnJpZW5kTWFwLmdldCh0LnVzZXJJRCk7biYmbi51cGRhdGVQcm9maWxlKHQpfSkpLGUuX29uRnJpZW5kTGlzdFVwZGF0ZWQoKX0pKX19LHtrZXk6XCJhZGRGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZEZyaWVuZFwiKSxvPWUudG8scj1lLnNvdXJjZSxhPWUudHlwZSxzPWUud29yZGluZyxpPWUucmVtYXJrLHU9ZS5ncm91cE5hbWU7aWYodGhpcy5fZnJpZW5kTWFwLmhhcyhvKSlyZXR1cm4gdW0oe2NvZGU6bHAuQUxSRUFEWV9NWV9GUklFTkQsbWVzc2FnZTpkcC5BTFJFQURZX01ZX0ZSSUVORH0pO3ZhciBjPWE7KCFjfHxjIT09WW4uU05TX0FERF9UWVBFX1NJTkdMRSYmYyE9PVluLlNOU19BRERfVFlQRV9CT1RIKSYmKGM9WW4uU05TX0FERF9UWVBFX0JPVEgpO3ZhciBsPW5ldyBEcChRZyk7cmV0dXJuIGwuc2V0TWVzc2FnZShcInRvOlwiLmNvbmNhdChvLFwiIHNvdXJjZTpcIikuY29uY2F0KHIsXCIgdHlwZTpcIikuY29uY2F0KGMpKSx0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmpsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSxhZGRGcmllbmRJdGVtOlt7dG86byxzb3VyY2U6cix3b3JkaW5nOnMscmVtYXJrOmksZ3JvdXBOYW1lOnV9XSx0eXBlOmN9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89ZS5kYXRhLnJlc3VsdExpc3Q7bC5zZXROZXR3b3JrVHlwZSh0Ll9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TW9yZU1lc3NhZ2UoXCJyZXN1bHRMaXN0OlwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShvKSkpLmVuZCgpO3ZhciByPW9bMF0sYT1yLnRvLHM9ci5yZXN1bHRDb2RlLGk9ci5yZXN1bHRJbmZvO3JldHVybiBRaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2suIHRvOlwiKS5jb25jYXQoYSxcIiB0eXBlOlwiKS5jb25jYXQoYyxcIiBjb2RlOlwiKS5jb25jYXQocykpLGh1KHMpfHwwPT09cz9RXyh7dXNlcklEOmEsY29kZTowfSk6MzA1Mzk9PT1zP1FfKHt1c2VySUQ6YSxjb2RlOnMsbWVzc2FnZTpvbVtzXX0pOnVtKHt1c2VySUQ6YSxjb2RlOnMsbWVzc2FnZTpvbVtzXXx8aX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtsLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiZGVsZXRlRnJpZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVGcmllbmRcIiksbz1lLnVzZXJJRExpc3Qscj1lLnR5cGU7by5sZW5ndGg+MWUzJiYoUWkud2FybihcIlwiLmNvbmNhdChuLFwiIOWIoOmZpOWlveWPi+S6uuaVsOS4jeiDvei2hei/hzEwMDDkurpcIikpLG8ubGVuZ3RoPTFlMyk7dmFyIGE9W10scz1bXSxpPVtdO2lmKG8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fZnJpZW5kTWFwLmhhcyhlKT9pLnB1c2goZSk6YS5wdXNoKHt1c2VySUQ6ZSxjb2RlOmxwLk5PVF9NWV9GUklFTkQsbWVzc2FnZTpkcC5OT1RfTVlfRlJJRU5EfSl9KSksMD09PWkubGVuZ3RoKXJldHVybiBpbSh7c3VjY2Vzc1VzZXJJRExpc3Q6cyxmYWlsdXJlVXNlcklETGlzdDphfSk7dmFyIHU9cjsoIXV8fHUhPT1Zbi5TTlNfREVMRVRFX1RZUEVfU0lOR0xFJiZ1IT09WW4uU05TX0RFTEVURV9UWVBFX0JPVEgpJiYodT1Zbi5TTlNfREVMRVRFX1RZUEVfQk9USCk7dmFyIGM9bmV3IERwKGVoKTtyZXR1cm4gYy5zZXRNZXNzYWdlKFwidXNlcklETGlzdDpcIi5jb25jYXQoaSxcIiB0eXBlOlwiKS5jb25jYXQodSkpLHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6SGwscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLHVzZXJJRExpc3Q6aSx0eXBlOnV9fSkudGhlbigoZnVuY3Rpb24oZSl7Yy5zZXROZXR3b3JrVHlwZSh0Ll9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKTt2YXIgbz1lLmRhdGEucmVzdWx0TGlzdDtyZXR1cm4gWHUobyl8fG8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS50byxuPWUucmVzdWx0Q29kZSxvPWUucmVzdWx0SW5mbztodShuKXx8MD09PW4/cy5wdXNoKHt1c2VySUQ6dH0pOmEucHVzaCh7dXNlcklEOnQsY29kZTpuLG1lc3NhZ2U6b30pfSkpLFFfKHtzdWNjZXNzVXNlcklETGlzdDpzLGZhaWx1cmVVc2VySURMaXN0OmF9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07Yy5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJ1cGRhdGVGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS51c2VySUQsbz1lLnJlbWFyayxyPWUuZnJpZW5kQ3VzdG9tRmllbGQ7aWYoIXRoaXMuX2ZyaWVuZE1hcC5oYXMobikpcmV0dXJuIHVtKHtjb2RlOmxwLk5PVF9NWV9GUklFTkQsbWVzc2FnZTpkcC5OT1RfTVlfRlJJRU5EfSk7dmFyIGE9bmV3IERwKG9oKTthLnNldE1lc3NhZ2UoXCJ1c2VySUQ6XCIuY29uY2F0KG4sXCIgcmVtYXJrOlwiKS5jb25jYXQobyxcIiBmcmllbmRDdXN0b21GaWVsZDpcIikuY29uY2F0KHIpKTt2YXIgcz1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIudXBkYXRlRnJpZW5kXCIpLGk9W107cmV0dXJuIGh1KG8pfHxpLnB1c2goe3RhZzp0dS5SRU1BUkssdmFsdWU6b30pLGd1KHIpJiZyLmxlbmd0aD4wJiZyLmZvckVhY2goKGZ1bmN0aW9uKGUpe2kucHVzaCh7dGFnOmUua2V5LHZhbHVlOmUudmFsdWV9KX0pKSx0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOldsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSx1cGRhdGVJdGVtOlt7dG86bixzbnNJdGVtOml9XX19KS50aGVuKChmdW5jdGlvbihlKXthLnNldE5ldHdvcmtUeXBlKHQuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5pbmZvKFwiXCIuY29uY2F0KHMsXCIgb2tcIikpO3ZhciBuPWUuZGF0YS5yZXN1bHRMaXN0WzBdLGk9bi50byx1PW4ucmVzdWx0Q29kZSxjPW4ucmVzdWx0SW5mbztpZihodSh1KXx8MD09PXUpe3ZhciBsPXQuX2ZyaWVuZE1hcC5nZXQoaSk7cmV0dXJuIGwmJihodShvKXx8KGwucmVtYXJrPW8pLGd1KHIpJiZyLmxlbmd0aD4wJiZHdShsLmZyaWVuZEN1c3RvbUZpZWxkLHIpLHQuX29uRnJpZW5kTGlzdFVwZGF0ZWQoKSksUV8obCl9cmV0dXJuIHVtKHtjb2RlOnUsbWVzc2FnZTpjfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLndhcm4oXCJcIi5jb25jYXQocyxcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJjaGVja0ZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY2hlY2tGcmllbmRcIiksbz1lLnVzZXJJRExpc3Qscj1lLnR5cGU7KCFyfHxyIT09WW4uU05TX0NIRUNLX1RZUEVfU0lOR0xFJiZyIT09WW4uU05TX0NIRUNLX1RZUEVfQk9USCkmJihyPVluLlNOU19DSEVDS19UWVBFX0JPVEgpO3ZhciBhPW5ldyBEcChaZyk7cmV0dXJuIGEuc2V0TWVzc2FnZShcInVzZXJJRExpc3Q6XCIuY29uY2F0KG8sXCIgdHlwZTpcIikuY29uY2F0KHIpKSx0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkJsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSx1c2VySURMaXN0Om8sdHlwZTpyfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe2Euc2V0TmV0d29ya1R5cGUodC5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmluZm8oXCJcIi5jb25jYXQobixcIiBvay4gdXNlcklETGlzdDpcIikuY29uY2F0KG8sXCIgdHlwZTpcIikuY29uY2F0KHIpKTt2YXIgcz1bXSxpPVtdLHU9ZS5kYXRhLnJlc3VsdExpc3Q7cmV0dXJuIGd1KHUpJiZ1LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudG8sbj1lLnJlbGF0aW9uLG89ZS5yZXN1bHRDb2RlLHI9ZS5yZXN1bHRJbmZvO2h1KG8pfHwwPT09bz9zLnB1c2goe3VzZXJJRDp0LGNvZGU6MCxyZWxhdGlvbjpufSk6aS5wdXNoKHt1c2VySUQ6dCxjb2RlOm8sbWVzc2FnZTpyfSl9KSksUV8oe3N1Y2Nlc3NVc2VySURMaXN0OnMsZmFpbHVyZVVzZXJJRExpc3Q6aX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwidXBkYXRlV2hlbkFkZGVkVG9GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLm5hbWUsbz1lLnVzZXJJRExpc3Q7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGRhdGVXaGVuQWRkZWRUb0ZyaWVuZEdyb3VwIGdyb3VwTmFtZTpcIikuY29uY2F0KG4sXCIgdXNlcklETGlzdDpcIikuY29uY2F0KG8pKSxuJiYhWHUobykmJm8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fZnJpZW5kTWFwLmhhcyhlKSYmdC5fZnJpZW5kTWFwLmdldChlKS5hZGRUb0dyb3VwTGlzdChuKX0pKX19LHtrZXk6XCJ1cGRhdGVXaGVuUmVtb3ZlZEZyb21GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLm5hbWUsbz1lLnVzZXJJRExpc3Q7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGRhdGVXaGVuUmVtb3ZlZEZyb21GcmllbmRHcm91cCBncm91cE5hbWU6XCIpLmNvbmNhdChuLFwiIHVzZXJJRExpc3Q6XCIpLmNvbmNhdChvKSksbiYmIVh1KG8pJiZvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX2ZyaWVuZE1hcC5oYXMoZSkmJnQuX2ZyaWVuZE1hcC5nZXQoZSkucmVtb3ZlRnJvbUdyb3VwTGlzdChuKX0pKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZnJpZW5kTWFwLmNsZWFyKCksdGhpcy5fc3RhcnRJbmRleD0wLHRoaXMuX3N0YW5kYXJkU2VxdWVuY2U9MCx0aGlzLl9jdXN0b21TZXF1ZW5jZT0wfX1dKSxlfSgpLFBJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLFh1KHQpfHwodGhpcy5uYW1lPXQubmFtZXx8XCJcIix0aGlzLnVzZXJJRExpc3Q9dC51c2VySURMaXN0fHxbXSx0aGlzLmNvdW50PXRoaXMudXNlcklETGlzdC5sZW5ndGh8fDApfXJldHVybiBFbihlLFt7a2V5OlwiYWRkVG9Vc2VySURMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7LTE9PT10aGlzLnVzZXJJRExpc3QuaW5kZXhPZihlKSYmKHRoaXMudXNlcklETGlzdC5wdXNoKGUpLHRoaXMuY291bnQ9dGhpcy51c2VySURMaXN0Lmxlbmd0aCl9fSx7a2V5OlwicmVtb3ZlRnJvbVVzZXJJRExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnVzZXJJRExpc3QuaW5kZXhPZihlKTt0Pi0xJiYodGhpcy51c2VySURMaXN0LnNwbGljZSh0LDEpLHRoaXMuY291bnQ9dGhpcy51c2VySURMaXN0Lmxlbmd0aCl9fV0pLGV9KCksVUk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fc25zTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiRnJpZW5kR3JvdXBIYW5kbGVyXCIsdGhpcy5fZnJpZW5kR3JvdXBNYXA9bmV3IE1hcH1yZXR1cm4gRW4oZSxbe2tleTpcImdldExvY2FsRnJpZW5kR3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gVW4odGhpcy5fZnJpZW5kR3JvdXBNYXAudmFsdWVzKCkpfX0se2tleTpcIl9lbWl0RnJpZW5kR3JvdXBMaXN0VXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9VW4odGhpcy5fZnJpZW5kR3JvdXBNYXAudmFsdWVzKCkpO3RoaXMuX3Nuc01vZHVsZS5lbWl0T3V0ZXJFdmVudChXbi5GUklFTkRfR1JPVVBfTElTVF9VUERBVEVELGUpfX0se2tleTpcImdldEZyaWVuZEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBEcChoaCksbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0RnJpZW5kR3JvdXBMaXN0XCIpO3JldHVybiB0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlhsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKX19KS50aGVuKChmdW5jdGlvbihvKXt0LnNldE5ldHdvcmtUeXBlKGUuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTt2YXIgcj1vLmRhdGEucmVzdWx0TGlzdDtYdShyKT9RaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2suIGZyaWVuZCBncm91cCBjb3VudDowXCIpKTooUWkuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rLiBmcmllbmQgZ3JvdXAgY291bnQ6XCIpLmNvbmNhdChyLmxlbmd0aCkpLGUuX2ZyaWVuZEdyb3VwTWFwLmNsZWFyKCksci5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgbj1uZXcgUEkodCk7ZS5fZnJpZW5kR3JvdXBNYXAuc2V0KHQubmFtZSxuKX0pKSxlLl9lbWl0RnJpZW5kR3JvdXBMaXN0VXBkYXRlZCgpKX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuIGUuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1QbihlLDIpLHI9blswXSxhPW5bMV07dC5zZXRFcnJvcihvLHIsYSkuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGVycm9yOlwiKSxvKSx1bShvKX0pKX19LHtrZXk6XCJjcmVhdGVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY3JlYXRlRnJpZW5kR3JvdXBcIiksbz1lLm5hbWUscj1lLnVzZXJJRExpc3Q7aWYodGhpcy5fZnJpZW5kR3JvdXBNYXAuaGFzKG8pKXJldHVybiBRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIg5aW95Y+L5YiG57uEIFwiKS5jb25jYXQobyxcIiDlt7Lnu4/lrZjlnKjvvIFcIikpLHVtKHtjb2RlOmxwLkZSSUVORF9HUk9VUF9FWElTVEVELG1lc3NhZ2U6ZHAuRlJJRU5EX0dST1VQX0VYSVNURUR9KTt2YXIgYT1uZXcgRHAoY2gpO3JldHVybiBhLnNldE1lc3NhZ2UoXCJuYW1lOlwiLmNvbmNhdChvLFwiIHVzZXJJRExpc3Q6XCIpLmNvbmNhdChyKSksdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpRbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksZ3JvdXBOYW1lOltvXSx1c2VySURMaXN0Omd1KHIpP3I6dm9pZCAwfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe2Euc2V0TmV0d29ya1R5cGUodC5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBuYW1lOlwiKS5jb25jYXQobyxcIiB1c2VySURMaXN0OlwiKS5jb25jYXQocikpO3ZhciBzPWUuZGF0YS5yZXN1bHRMaXN0LGk9W10sdT1bXTtzJiZzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudG8sbj1lLnJlc3VsdENvZGUsbz1lLnJlc3VsdEluZm87aWYoaHUobil8fDA9PT1uKWkucHVzaCh0KTtlbHNle3ZhciByPXt1c2VySUQ6ZS50byxjb2RlOm4sbWVzc2FnZTpvfTt1LnB1c2gocil9fSkpO3ZhciBjPW5ldyBQSSh7bmFtZTpvLHVzZXJJRExpc3Q6aX0pO3JldHVybiB0Ll9mcmllbmRHcm91cE1hcC5zZXQobyxjKSx0Ll9zbnNNb2R1bGUudXBkYXRlV2hlbkFkZGVkVG9GcmllbmRHcm91cCh7bmFtZTpvLHVzZXJJRExpc3Q6aX0pLHQuX2VtaXRGcmllbmRHcm91cExpc3RVcGRhdGVkKCksUV8oe2ZyaWVuZEdyb3VwOmMsZmFpbHVyZVVzZXJJRExpc3Q6dX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiZGVsZXRlRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUZyaWVuZEdyb3VwXCIpLG89ZS5uYW1lO2lmKCF0aGlzLl9mcmllbmRHcm91cE1hcC5oYXMobykpcmV0dXJuIHRoaXMuX29uRnJpZW5kR3JvdXBOb3RFeGlzdChvKTt2YXIgcj1uZXcgRHAobGgpO3JldHVybiByLnNldE1lc3NhZ2UoXCJuYW1lOlwiLmNvbmNhdChvKSksdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpabCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksbmFtZUxpc3Q6W29dfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3Iuc2V0TmV0d29ya1R5cGUodC5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBuYW1lOlwiKS5jb25jYXQobykpO3ZhciBhPXQuX2ZyaWVuZEdyb3VwTWFwLmdldChvKTtyZXR1cm4gYSYmKHQuX3Nuc01vZHVsZS51cGRhdGVXaGVuUmVtb3ZlZEZyb21GcmllbmRHcm91cCh7bmFtZTpvLHVzZXJJRExpc3Q6YS51c2VySURMaXN0fSksdC5fZnJpZW5kR3JvdXBNYXAuZGVsZXRlKG8pLGEudXNlcklETGlzdC5sZW5ndGg9MCksdC5fZW1pdEZyaWVuZEdyb3VwTGlzdFVwZGF0ZWQoKSxRXyhhKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxhPW5bMV07ci5zZXRFcnJvcihlLG8sYSkuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcIl9vbkZyaWVuZEdyb3VwTm90RXhpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uRnJpZW5kR3JvdXBOb3RFeGlzdCDlpb3lj4vliIbnu4QgXCIpLmNvbmNhdChlLFwiIOS4jeWtmOWcqO+8gVwiKSksdW0oe2NvZGU6bHAuRlJJRU5EX0dST1VQX05PVF9FWElTVCxtZXNzYWdlOmRwLkZSSUVORF9HUk9VUF9OT1RfRVhJU1R9KX19LHtrZXk6XCJyZW5hbWVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVuYW1lRnJpZW5kR3JvdXBcIiksbz1lLm9sZE5hbWUscj1lLm5ld05hbWU7aWYoIXRoaXMuX2ZyaWVuZEdyb3VwTWFwLmhhcyhvKSlyZXR1cm4gdGhpcy5fb25GcmllbmRHcm91cE5vdEV4aXN0KCk7dmFyIGE9bmV3IERwKGRoKS5zZXRNZXNzYWdlKFwib2xkTmFtZTpcIi5jb25jYXQobyxcIiBuZXdOYW1lOlwiKS5jb25jYXQocikpO3JldHVybiB0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmVkLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSxvbGROYW1lOm8sbmV3TmFtZTpyfX0pLnRoZW4oKGZ1bmN0aW9uKCl7aWYoYS5zZXROZXR3b3JrVHlwZSh0Ll9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIG9sZE5hbWU6XCIpLmNvbmNhdChvLFwiIG5ld05hbWU6XCIpLmNvbmNhdChyKSksdC5fZnJpZW5kR3JvdXBNYXAuaGFzKG8pKXt2YXIgZT10Ll9mcmllbmRHcm91cE1hcC5nZXQobyk7cmV0dXJuIGUubmFtZT1yLHQuX2ZyaWVuZEdyb3VwTWFwLmRlbGV0ZShvKSx0Ll9mcmllbmRHcm91cE1hcC5zZXQocixlKSx0Ll9zbnNNb2R1bGUudXBkYXRlV2hlblJlbW92ZWRGcm9tRnJpZW5kR3JvdXAoe25hbWU6byx1c2VySURMaXN0OmUudXNlcklETGlzdH0pLHQuX3Nuc01vZHVsZS51cGRhdGVXaGVuQWRkZWRUb0ZyaWVuZEdyb3VwKHtuYW1lOnIsdXNlcklETGlzdDplLnVzZXJJRExpc3R9KSx0Ll9lbWl0RnJpZW5kR3JvdXBMaXN0VXBkYXRlZCgpLFFfKGUpfXJldHVybiBRXygpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksdW0oZSl9KSl9fSx7a2V5OlwiYWRkVG9GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYWRkVG9GcmllbmRHcm91cFwiKSxvPWUubmFtZSxyPWUudXNlcklETGlzdDtpZighdGhpcy5fZnJpZW5kR3JvdXBNYXAuaGFzKG8pKXJldHVybiB0aGlzLl9vbkZyaWVuZEdyb3VwTm90RXhpc3Qobyk7dmFyIGE9bmV3IERwKHBoKTtyZXR1cm4gYS5zZXRNZXNzYWdlKFwibmFtZTpcIi5jb25jYXQobyxcIiB1c2VySURMaXN0OlwiKS5jb25jYXQocikpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYWRkVG9GcmllbmRHcm91cCBuYW1lOlwiKS5jb25jYXQobyxcIiB1c2VySURMaXN0OlwiKS5jb25jYXQocikpLHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6ZWQscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLG9sZE5hbWU6byx1cGRhdGVHcm91cEl0ZW06ci5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zbnNNb2R1bGUuaXNNeUZyaWVuZChlKX0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt0bzplLHVwZGF0ZVR5cGU6XCJVcGRhdGVfVHlwZV9BZGRcIn19KSl9fSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUodC5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLHQuX29uRnJpZW5kR3JvdXBVcGRhdGVkKG8sZSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSx1bShlKX0pKX19LHtrZXk6XCJyZW1vdmVGcm9tRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlbW92ZUZyb21GcmllbmRHcm91cFwiKSxvPWUubmFtZSxyPWUudXNlcklETGlzdDtpZighdGhpcy5fZnJpZW5kR3JvdXBNYXAuaGFzKG8pKXJldHVybiB0aGlzLl9vbkZyaWVuZEdyb3VwTm90RXhpc3Qobyk7dmFyIGE9bmV3IERwKGdoKTtyZXR1cm4gYS5zZXRNZXNzYWdlKFwibmFtZTpcIi5jb25jYXQobyxcIiB1c2VySURMaXN0OlwiKS5jb25jYXQocikpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG5hbWU6XCIpLmNvbmNhdChvLFwiIHVzZXJJRExpc3Q6XCIpLmNvbmNhdChyKSksdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTplZCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksb2xkTmFtZTpvLHVwZGF0ZUdyb3VwSXRlbTpyLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5pc015RnJpZW5kKGUpfSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3RvOmUsdXBkYXRlVHlwZTpcIlVwZGF0ZV9UeXBlX0RlbGV0ZVwifX0pKX19KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZSh0Ll9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksdC5fb25GcmllbmRHcm91cFVwZGF0ZWQobyxlKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLHVtKGUpfSkpfX0se2tleTpcIl9vbkZyaWVuZEdyb3VwVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dC5kYXRhLnJlc3VsdExpc3Qsbz10aGlzLl9mcmllbmRHcm91cE1hcC5nZXQoZSkscj1bXSxhPVtdLHM9W107cmV0dXJuIGd1KG4pJiZuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudG8sbj1lLnJlc3VsdENvZGUsaT1lLnJlc3VsdEluZm8sdT1lLnR5cGU7MD09PW4/XCJVcGRhdGVfVHlwZV9BZGRcIj09PXU/byYmKG8uYWRkVG9Vc2VySURMaXN0KHQpLGEucHVzaCh0KSk6XCJVcGRhdGVfVHlwZV9EZWxldGVcIj09PXUmJm8mJihvLnJlbW92ZUZyb21Vc2VySURMaXN0KHQpLHMucHVzaCh0KSk6ci5wdXNoKHt0bzplLnRvLGNvZGU6bixtZXNzYWdlOml9KX0pKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbkZyaWVuZEdyb3VwVXBkYXRlZCBuYW1lOlwiKS5jb25jYXQoZSxcIiB1c2VySURMaXN0OlwiKS5jb25jYXQoby51c2VySURMaXN0KSksYS5sZW5ndGg+MCYmdGhpcy5fc25zTW9kdWxlLnVwZGF0ZVdoZW5BZGRlZFRvRnJpZW5kR3JvdXAoe25hbWU6ZSx1c2VySURMaXN0OmF9KSxzLmxlbmd0aD4wJiZ0aGlzLl9zbnNNb2R1bGUudXBkYXRlV2hlblJlbW92ZWRGcm9tRnJpZW5kR3JvdXAoe25hbWU6ZSx1c2VySURMaXN0OnN9KSxRXyh7ZnJpZW5kR3JvdXA6byxmYWlsdXJlVXNlcklETGlzdDpyfSl9fSx7a2V5OlwidXBkYXRlV2hlbkZyaWVuZEFkZGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUubmFtZUxpc3Qsbz1lLnVzZXJJRDtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZVdoZW5GcmllbmRBZGRlZCB1c2VySUQ6XCIpLmNvbmNhdChvLFwiIG5hbWVMaXN0OlwiKS5jb25jYXQobikpLFh1KG4pfHxuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX2ZyaWVuZEdyb3VwTWFwLmhhcyhlKSYmdC5fZnJpZW5kR3JvdXBNYXAuZ2V0KGUpLmFkZFRvVXNlcklETGlzdChvKX0pKX19LHtrZXk6XCJ1cGRhdGVXaGVuRnJpZW5kRGVsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLm5hbWVMaXN0LG89ZS51c2VySUQ7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGRhdGVXaGVuRnJpZW5kRGVsZXRlZCB1c2VySUQ6XCIpLmNvbmNhdChvLFwiIG5hbWVMaXN0OlwiKS5jb25jYXQobikpLFh1KG4pfHxuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX2ZyaWVuZEdyb3VwTWFwLmhhcyhlKSYmdC5fZnJpZW5kR3JvdXBNYXAuZ2V0KGUpLnJlbW92ZUZyb21Vc2VySURMaXN0KG8pfSkpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9mcmllbmRHcm91cE1hcC5jbGVhcigpfX1dKSxlfSgpLEZJPWZ1bmN0aW9uKGUpe0RuKG4sZSk7dmFyIHQ9d24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlNuc01vZHVsZVwiLG8uX2ZyaWVuZEhhbmRsZXI9bmV3IHdJKEduKG8pKSxvLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXI9bmV3IGtJKEduKG8pKSxvLl9mcmllbmRHcm91cEhhbmRsZXI9bmV3IFVJKEduKG8pKSxvLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oTW0sby5vbkNvbnRleHRVcGRhdGVkLEduKG8pKSxvfXJldHVybiBFbihuLFt7a2V5Olwib25Db250ZXh0VXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2ZyaWVuZEhhbmRsZXIucGFnaW5nR2V0RnJpZW5kTGlzdCgpLHRoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci5nZXRGcmllbmRHcm91cExpc3QoKSx0aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIuZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0KCl9fSx7a2V5Olwib25SZWxhdGlvbkNoYWluTW9kaWZpZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGFMaXN0O2lmKCFYdSh0KSl7dmFyIG49W10sbz1bXSxyPVtdLGE9W10scz0hMSxpPVwiXCI7dC5mb3JFYWNoKChmdW5jdGlvbihlKXszIT09ZS5wdXNoVHlwZSYmNCE9PWUucHVzaFR5cGV8fCFlLmZyb218fChpPWUuZnJvbSksZS5mcmllbmRBZGRBY2NvdW50JiYobi5wdXNoLmFwcGx5KG4sVW4oZS5mcmllbmRBZGRBY2NvdW50KSksYS5wdXNoLmFwcGx5KGEsVW4oZS5mcmllbmRBZGRBY2NvdW50KSkpLGUuZnJpZW5kRGVsQWNjb3VudCYmby5wdXNoLmFwcGx5KG8sVW4oZS5mcmllbmREZWxBY2NvdW50KSksZS5mcmllbmRBcHBsaWNhdGlvbkFkZGVkJiZyLnB1c2guYXBwbHkocixVbihlLmZyaWVuZEFwcGxpY2F0aW9uQWRkZWQpKSxlLmZyaWVuZEFwcGxpY2F0aW9uRGVsZXRlZFVzZXJJRExpc3QmJmEucHVzaC5hcHBseShhLFVuKGUuZnJpZW5kQXBwbGljYXRpb25EZWxldGVkVXNlcklETGlzdCkpLGUucmVwb3J0VGltZSYmNz09PWUucHVzaFR5cGUmJihzPSEwKX0pKSxzJiZ0aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIub25GcmllbmRBcHBsaWNhdGlvblJlYWQoKSx0aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIub25GcmllbmRBcHBsaWNhdGlvbkFkZGVkKHIsaSksdGhpcy5fZnJpZW5kQXBwbGljYXRpb25IYW5kbGVyLm9uRnJpZW5kQXBwbGljYXRpb25EZWxldGVkKGEpLHRoaXMuX2ZyaWVuZEhhbmRsZXIub25GcmllbmRBZGRlZChuKSx0aGlzLl9mcmllbmRIYW5kbGVyLm9uRnJpZW5kRGVsZXRlZChvKX19fSx7a2V5OlwiaXNNeUZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRIYW5kbGVyLmlzTXlGcmllbmQoZSl9fSx7a2V5Olwib25GcmllbmRQcm9maWxlTW9kaWZpZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9mcmllbmRIYW5kbGVyLm9uRnJpZW5kUHJvZmlsZU1vZGlmaWVkKGUpfX0se2tleTpcImdldExvY2FsRnJpZW5kTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXSx0PXRoaXMuX2ZyaWVuZEhhbmRsZXIuZ2V0TG9jYWxGcmllbmRMaXN0KCk7cmV0dXJuIGU/aW0odCk6dH19LHtrZXk6XCJnZXRGcmllbmRSZW1hcmtcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kSGFuZGxlci5nZXRGcmllbmRSZW1hcmsoZSl9fSx7a2V5OlwiZ2V0RnJpZW5kTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZyaWVuZEhhbmRsZXIucGFnaW5nR2V0RnJpZW5kTGlzdCgpfX0se2tleTpcImFkZEZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRIYW5kbGVyLmFkZEZyaWVuZChlKX19LHtrZXk6XCJkZWxldGVGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kSGFuZGxlci5kZWxldGVGcmllbmQoZSl9fSx7a2V5OlwiY2hlY2tGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kSGFuZGxlci5jaGVja0ZyaWVuZChlKX19LHtrZXk6XCJnZXRGcmllbmRQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEhhbmRsZXIuZ2V0RnJpZW5kUHJvZmlsZShlKX19LHtrZXk6XCJ1cGRhdGVGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kSGFuZGxlci51cGRhdGVGcmllbmQoZSl9fSx7a2V5OlwidXBkYXRlV2hlbkFkZGVkVG9GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2ZyaWVuZEhhbmRsZXIudXBkYXRlV2hlbkFkZGVkVG9GcmllbmRHcm91cChlKX19LHtrZXk6XCJ1cGRhdGVXaGVuUmVtb3ZlZEZyb21GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2ZyaWVuZEhhbmRsZXIudXBkYXRlV2hlblJlbW92ZWRGcm9tRnJpZW5kR3JvdXAoZSl9fSx7a2V5OlwiZ2V0TG9jYWxGcmllbmRBcHBsaWNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlci5nZXRMb2NhbEZyaWVuZEFwcGxpY2F0aW9uTGlzdCgpO3JldHVybiBpbShlKX19LHtrZXk6XCJkZWxldGVGcmllbmRBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIuZGVsZXRlRnJpZW5kQXBwbGljYXRpb24oZSl9fSx7a2V5OlwicmVmdXNlRnJpZW5kQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kQXBwbGljYXRpb25IYW5kbGVyLnJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uKGUpfX0se2tleTpcImFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlci5hY2NlcHRGcmllbmRBcHBsaWNhdGlvbihlKX19LHtrZXk6XCJzZXRGcmllbmRBcHBsaWNhdGlvblJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kQXBwbGljYXRpb25IYW5kbGVyLnNldEZyaWVuZEFwcGxpY2F0aW9uUmVhZChlKX19LHtrZXk6XCJnZXRMb2NhbEZyaWVuZEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLmdldExvY2FsRnJpZW5kR3JvdXBMaXN0KCk7cmV0dXJuIGltKGUpfX0se2tleTpcImNyZWF0ZUZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci5jcmVhdGVGcmllbmRHcm91cChlKX19LHtrZXk6XCJkZWxldGVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRHcm91cEhhbmRsZXIuZGVsZXRlRnJpZW5kR3JvdXAoZSl9fSx7a2V5OlwiYWRkVG9GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRHcm91cEhhbmRsZXIuYWRkVG9GcmllbmRHcm91cChlKX19LHtrZXk6XCJyZW1vdmVGcm9tRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLnJlbW92ZUZyb21GcmllbmRHcm91cChlKX19LHtrZXk6XCJyZW5hbWVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRHcm91cEhhbmRsZXIucmVuYW1lRnJpZW5kR3JvdXAoZSl9fSx7a2V5Olwib25BZGRUb0ZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci5vbkFkZFRvRnJpZW5kR3JvdXAoZSl9fSx7a2V5OlwidXBkYXRlV2hlbkZyaWVuZEFkZGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLnVwZGF0ZVdoZW5GcmllbmRBZGRlZChlKX19LHtrZXk6XCJ1cGRhdGVXaGVuRnJpZW5kRGVsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci51cGRhdGVXaGVuRnJpZW5kRGVsZXRlZChlKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fZnJpZW5kSGFuZGxlci5yZXNldCgpLHRoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci5yZXNldCgpLHRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlci5yZXNldCgpfX1dKSxufShObCkscUk9ZnVuY3Rpb24oZSl7RG4obixlKTt2YXIgdD13bihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiV29ya2VyVGltZXJNb2R1bGVcIixvLl9pc1dvcmtlckVuYWJsZWQ9ITAsby5fd29ya2VyVGltZXI9bnVsbCxvLl9pbml0KCksby5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKHltLG8uX29uQ2xvdWRDb25maWdVcGRhdGVkLEduKG8pKSxvfXJldHVybiBFbihuLFt7a2V5OlwiaXNXb3JrZXJFbmFibGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNXb3JrZXJFbmFibGVkJiZHaX19LHtrZXk6XCJzdGFydFdvcmtlclRpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnN0YXJ0V29ya2VyVGltZXJcIikpLHRoaXMuX3dvcmtlclRpbWVyJiZ0aGlzLl93b3JrZXJUaW1lci5wb3N0TWVzc2FnZShcInN0YXJ0XCIpfX0se2tleTpcInN0b3BXb3JrZXJUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zdG9wV29ya2VyVGltZXJcIikpLHRoaXMuX3dvcmtlclRpbWVyJiZ0aGlzLl93b3JrZXJUaW1lci5wb3N0TWVzc2FnZShcInN0b3BcIil9fSx7a2V5OlwiX2luaXRcIix2YWx1ZTpmdW5jdGlvbigpe2lmKEdpKXt2YXIgZT1VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFsnbGV0IGludGVydmFsID0gLTE7b25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHsgIGlmIChldmVudC5kYXRhID09PSBcInN0YXJ0XCIpIHsgICAgaWYgKGludGVydmFsID4gMCkgeyAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOyAgICB9ICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4geyAgICAgIHBvc3RNZXNzYWdlKFwiXCIpOyAgICB9LCAxMDAwKSAgfSBlbHNlIGlmIChldmVudC5kYXRhID09PSBcInN0b3BcIikgeyAgICBjbGVhckludGVydmFsKGludGVydmFsKTsgICAgaW50ZXJ2YWwgPSAtMTsgIH19OyddLHt0eXBlOlwiYXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOFwifSkpO3RoaXMuX3dvcmtlclRpbWVyPW5ldyBXb3JrZXIoZSk7dmFyIHQ9dGhpczt0aGlzLl93b3JrZXJUaW1lci5vbm1lc3NhZ2U9ZnVuY3Rpb24oKXt0Ll9tb2R1bGVNYW5hZ2VyLm9uQ2hlY2tUaW1lcigpfX19fSx7a2V5OlwiX29uQ2xvdWRDb25maWdVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldENsb3VkQ29uZmlnKFwiZW5hYmxlX3dvcmtlclwiKTtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbkNsb3VkQ29uZmlnVXBkYXRlZCBlbmFibGVXb3JrZXI6XCIpLmNvbmNhdChlKSksXCIxXCI9PT1lPyF0aGlzLl9pc1dvcmtlckVuYWJsZWQmJkdpJiYodGhpcy5faXNXb3JrZXJFbmFibGVkPSEwLHRoaXMuc3RhcnRXb3JrZXJUaW1lcigpLHRoaXMuX21vZHVsZU1hbmFnZXIub25Xb3JrZXJUaW1lckVuYWJsZWQoKSk6dGhpcy5faXNXb3JrZXJFbmFibGVkJiZHaSYmKHRoaXMuX2lzV29ya2VyRW5hYmxlZD0hMSx0aGlzLnN0b3BXb3JrZXJUaW1lcigpLHRoaXMuX21vZHVsZU1hbmFnZXIub25Xb3JrZXJUaW1lckRpc2FibGVkKCkpfX0se2tleTpcInRlcm1pbmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi50ZXJtaW5hdGVcIikpLHRoaXMuX3dvcmtlclRpbWVyJiYodGhpcy5fd29ya2VyVGltZXIudGVybWluYXRlKCksdGhpcy5fd29ya2VyVGltZXI9bnVsbCl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpfX1dKSxufShObCkseEk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7eW4odGhpcyxlKSx0aGlzLl9jbGFzc05hbWU9XCJQdXJjaGFzZWRGZWF0dXJlSGFuZGxlclwiLHRoaXMuX3B1cmNoYXNlZEZlYXR1cmVNYXA9bmV3IE1hcH1yZXR1cm4gRW4oZSxbe2tleTpcImlzVmFsaWRQdXJjaGFzZUJpdHNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJzdHJpbmdcIj09dHlwZW9mIGUmJmUubGVuZ3RoPj0xJiZlLmxlbmd0aDw9NjQmJi9bMDFdezEsNjR9Ly50ZXN0KGUpfX0se2tleTpcInBhcnNlUHVyY2hhc2VCaXRzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnBhcnNlUHVyY2hhc2VCaXRzXCIpO2lmKHRoaXMuaXNWYWxpZFB1cmNoYXNlQml0cyhlKSl7dGhpcy5fcHVyY2hhc2VkRmVhdHVyZU1hcC5jbGVhcigpO2Zvcih2YXIgbj1PYmplY3QudmFsdWVzKHRpKSxvPW51bGwscj1lLmxlbmd0aC0xLGE9MDtyPj0wO3ItLSxhKyspbz1hPDMyP25ldyBCcygwLE1hdGgucG93KDIsYSkpLnRvU3RyaW5nKCk6bmV3IEJzKE1hdGgucG93KDIsYS0zMiksMCkudG9TdHJpbmcoKSwtMSE9PW4uaW5kZXhPZihvKSYmKFwiMVwiPT09ZVtyXT90aGlzLl9wdXJjaGFzZWRGZWF0dXJlTWFwLnNldChvLCEwKTp0aGlzLl9wdXJjaGFzZWRGZWF0dXJlTWFwLnNldChvLCExKSl9ZWxzZSBRaS53YXJuKFwiXCIuY29uY2F0KHQsXCIgaW52YWxpZCBwdXJjaGFzZSBiaXRzOlwiKS5jb25jYXQoZSkpfX0se2tleTpcImhhc1B1cmNoYXNlZEZlYXR1cmVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMuX3B1cmNoYXNlZEZlYXR1cmVNYXAuZ2V0KGUpfX0se2tleTpcImNsZWFyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9wdXJjaGFzZWRGZWF0dXJlTWFwLmNsZWFyKCl9fV0pLGV9KCksVkk9ZnVuY3Rpb24oZSl7RG4obixlKTt2YXIgdD13bihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiQ29tbWVyY2lhbENvbmZpZ01vZHVsZVwiLG8uX2V4cGlyZWRUaW1lPTAsby5faXNGZXRjaGluZz0hMSxvLl9wdXJjaGFzZWRGZWF0dXJlSGFuZGxlcj1uZXcgeEksb31yZXR1cm4gRW4obixbe2tleTpcIl9jYW5GZXRjaFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMb2dnZWRJbigpPyF0aGlzLl9pc0ZldGNoaW5nJiZEYXRlLm5vdygpPj10aGlzLl9leHBpcmVkVGltZToodGhpcy5fZXhwaXJlZFRpbWU9RGF0ZS5ub3coKSsyZTMsITEpfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2NhbkZldGNoKCkmJnRoaXMuZmV0Y2hDb25maWcoKX19LHtrZXk6XCJmZXRjaENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX2NhbkZldGNoKCksbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZmV0Y2hDb25maWdcIik7aWYoUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgY2FuRmV0Y2g6XCIpLmNvbmNhdCh0KSksdCl7dmFyIG89bmV3IERwKHZoKTtvLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSk7dmFyIHI9dGhpcy5nZXRNb2R1bGUoZGwpLmdldFNES0FwcElEKCk7dGhpcy5faXNGZXRjaGluZz0hMCx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTppcCxyZXF1ZXN0RGF0YTp7U0RLQXBwSUQ6cn19KS50aGVuKChmdW5jdGlvbih0KXtvLnNldE1lc3NhZ2UoXCJwdXJjaGFzZUJpdHM6XCIuY29uY2F0KHQuZGF0YS5wdXJjaGFzZUJpdHMpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBvay5cIikpLGUuX3BhcnNlQ29uZmlnKHQuZGF0YSksZS5faXNGZXRjaGluZz0hMX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7ZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1QbihlLDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcih0LHIsYSkuZW5kKCl9KSksZS5faXNGZXRjaGluZz0hMX0pKX19fSx7a2V5Olwib25QdXNoZWRDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25QdXNoZWRDb25maWdcIik7UWkubG9nKFwiXCIuY29uY2F0KHQpKSxuZXcgRHAoTWgpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcInB1cmNoYXNlQml0czpcIi5jb25jYXQoZS5wdXJjaGFzZUJpdHMpKS5lbmQoKSx0aGlzLl9wYXJzZUNvbmZpZyhlKX19LHtrZXk6XCJfcGFyc2VDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3BhcnNlQ29uZmlnXCIpLG49ZS5lcnJvckNvZGUsbz1lLmVycm9yTWVzc2FnZSxyPWUucHVyY2hhc2VCaXRzLGE9ZS5leHBpcmVkVGltZTswPT09bj8odGhpcy5fcHVyY2hhc2VkRmVhdHVyZUhhbmRsZXIucGFyc2VQdXJjaGFzZUJpdHMociksdGhpcy5fZXhwaXJlZFRpbWU9RGF0ZS5ub3coKSsxZTMqYSk6aHUobik/KFFpLmxvZyhcIlwiLmNvbmNhdCh0LFwiIGZhaWxlZC4gSW52YWxpZCBtZXNzYWdlIGZvcm1hdDpcIiksZSksdGhpcy5fc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3IoMzZlNSkpOihRaS5lcnJvcihcIlwiLmNvbmNhdCh0LFwiIGVycm9yQ29kZTpcIikuY29uY2F0KG4sXCIgZXJyb3JNZXNzYWdlOlwiKS5jb25jYXQobykpLHRoaXMuX3NldEV4cGlyZWRUaW1lT25SZXNwb25zZUVycm9yKDEyZTQpKX19LHtrZXk6XCJfc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9leHBpcmVkVGltZT1EYXRlLm5vdygpK2V9fSx7a2V5OlwiaGFzUHVyY2hhc2VkRmVhdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wdXJjaGFzZWRGZWF0dXJlSGFuZGxlci5oYXNQdXJjaGFzZWRGZWF0dXJlKGUpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9leHBpcmVkVGltZT0wLHRoaXMuX2lzRmV0Y2hpbmc9ITEsdGhpcy5fcHVyY2hhc2VkRmVhdHVyZUhhbmRsZXIuY2xlYXIoKX19XSksbn0oTmwpLEtJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpO3ZhciBuPW5ldyBEcChOcCk7dGhpcy5fY2xhc3NOYW1lPVwiTW9kdWxlTWFuYWdlclwiLHRoaXMuX2lzUmVhZHk9ITEsdGhpcy5fcmVhc29uPWxwLlVTRVJfTk9UX0xPR0dFRF9JTix0aGlzLl9zdGFydExvZ2luVHM9MCx0aGlzLl9tb2R1bGVNYXA9bmV3IE1hcCx0aGlzLl9pbm5lckVtaXR0ZXI9bnVsbCx0aGlzLl9vdXRlckVtaXR0ZXI9bnVsbCx0aGlzLl9jaGVja0NvdW50PTAsdGhpcy5fY2hlY2tUaW1lcj0tMSx0aGlzLl9tb2R1bGVNYXAuc2V0KGRsLG5ldyBhdih0aGlzLHQpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KERsLG5ldyBWSSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChFbCxuZXcgSUkodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoVGwsbmV3IHFJKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KFNsLG5ldyBOSSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldCh5bCxuZXcgaEkodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoTWwsbmV3IE1JKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KG9sLG5ldyBzdih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChybCxuZXcgSXYodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoYWwsbmV3IHJ2KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KHNsLG5ldyBjbSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChsbCxuZXcgRm0odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoaWwsbmV3IFFtKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGNsLG5ldyBldih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChwbCxuZXcgdXYodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoZ2wsbmV3IGR2KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGhsLG5ldyBodih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChmbCxuZXcgX3YodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoX2wsbmV3IG12KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KG1sLG5ldyBFdih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldCh2bCxuZXcgVHYodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoSWwsbmV3IHlJKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KEFsLG5ldyBFSSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldCh1bCxuZXcgRkkodGhpcykpLHRoaXMuX2V2ZW50VGhyb3R0bGVNYXA9bmV3IE1hcDt2YXIgbz10Lmluc3RhbmNlSUQscj10Lm92ZXJzZWEsYT10LlNES0FwcElELHM9XCJpbnN0YW5jZUlEOlwiLmNvbmNhdChvLFwiIFNES0FwcElEOlwiKS5jb25jYXQoYSxcIiBob3N0OlwiKS5jb25jYXQoQnUoKSxcIiBvdmVyc2VhOlwiKS5jb25jYXQocixcIiBpbkJyb3dzZXI6XCIpLmNvbmNhdChnaSxcIiBpbk1pbmlBcHA6XCIpLmNvbmNhdChwaSkrXCIgd29ya2VyQXZhaWxhYmxlOlwiLmNvbmNhdChHaSxcIiBVc2VyQWdlbnQ6XCIpLmNvbmNhdChfaSk7RHAuYmluZEV2ZW50U3RhdE1vZHVsZSh0aGlzLl9tb2R1bGVNYXAuZ2V0KGdsKSksbi5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KHMsXCIgXCIpLmNvbmNhdChmdW5jdGlvbigpe3ZhciBlPVwiXCI7aWYocGkpdHJ5e3ZhciB0PWhpLmdldFN5c3RlbUluZm9TeW5jKCksbj10Lm1vZGVsLG89dC52ZXJzaW9uLHI9dC5zeXN0ZW0sYT10LnBsYXRmb3JtLHM9dC5TREtWZXJzaW9uO2U9XCJtb2RlbDpcIi5jb25jYXQobixcIiB2ZXJzaW9uOlwiKS5jb25jYXQobyxcIiBzeXN0ZW06XCIpLmNvbmNhdChyLFwiIHBsYXRmb3JtOlwiKS5jb25jYXQoYSxcIiBTREtWZXJzaW9uOlwiKS5jb25jYXQocyl9Y2F0Y2goekkpe2U9XCJcIn1yZXR1cm4gZX0oKSkpLmVuZCgpLFFpLmluZm8oXCJTREsgXCIuY29uY2F0KHMpKSx0aGlzLl9yZWFkeUxpc3Q9dm9pZCAwLHRoaXMuX3Nzb0xvZ0ZvclJlYWR5PW51bGwsdGhpcy5faW5pdFJlYWR5TGlzdCgpfXJldHVybiBFbihlLFt7a2V5OlwiX3N0YXJ0VGltZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZHVsZU1hcC5nZXQoVGwpLHQ9ZS5pc1dvcmtlckVuYWJsZWQoKTtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnN0YXJ0VGltZXIgaXNXb3JrZXJFbmFibGVkOlwiKS5jb25jYXQodCxcIiBzZWVkOlwiKS5jb25jYXQodGhpcy5fY2hlY2tUaW1lcikpLHQ/ZS5zdGFydFdvcmtlclRpbWVyKCk6dGhpcy5fc3RhcnRNYWluVGhyZWFkVGltZXIoKX19LHtrZXk6XCJfc3RhcnRNYWluVGhyZWFkVGltZXJcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3N0YXJ0TWFpblRocmVhZFRpbWVyXCIpKSx0aGlzLl9jaGVja1RpbWVyPDAmJih0aGlzLl9jaGVja1RpbWVyPXNldEludGVydmFsKHRoaXMub25DaGVja1RpbWVyLmJpbmQodGhpcyksMWUzKSl9fSx7a2V5Olwic3RvcFRpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2R1bGVNYXAuZ2V0KFRsKSx0PWUuaXNXb3JrZXJFbmFibGVkKCk7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zdG9wVGltZXIgaXNXb3JrZXJFbmFibGVkOlwiKS5jb25jYXQodCxcIiBzZWVkOlwiKS5jb25jYXQodGhpcy5fY2hlY2tUaW1lcikpLHQ/ZS5zdG9wV29ya2VyVGltZXIoKTp0aGlzLl9zdG9wTWFpblRocmVhZFRpbWVyKCl9fSx7a2V5OlwiX3N0b3BNYWluVGhyZWFkVGltZXJcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3N0b3BNYWluVGhyZWFkVGltZXJcIikpLHRoaXMuX2NoZWNrVGltZXI+MCYmKGNsZWFySW50ZXJ2YWwodGhpcy5fY2hlY2tUaW1lciksdGhpcy5fY2hlY2tUaW1lcj0tMSx0aGlzLl9jaGVja0NvdW50PTApfX0se2tleTpcIl9zdG9wTWFpblRocmVhZFNvY2tldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fc3RvcE1haW5UaHJlYWRTb2NrZXRcIikpO3ZhciBlPXRoaXMuX21vZHVsZU1hcC5nZXQoeWwpO2Uuc2V0SXNXb3JrZXJFbmFibGVkKCEwKSxlLnJlQ29ubmVjdCgpfX0se2tleTpcIl9zdGFydE1haW5UaHJlYWRTb2NrZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3N0YXJ0TWFpblRocmVhZFNvY2tldFwiKSk7dmFyIGU9dGhpcy5fbW9kdWxlTWFwLmdldCh5bCk7ZS5zZXRJc1dvcmtlckVuYWJsZWQoITEpLGUucmVDb25uZWN0KCl9fSx7a2V5Olwib25Xb3JrZXJUaW1lckVuYWJsZWRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Xb3JrZXJUaW1lckVuYWJsZWQsIGRpc2FibGUgbWFpbiB0aHJlYWQgdGltZXIgYW5kIHNvY2tldFwiKSksdGhpcy5fc3RvcE1haW5UaHJlYWRUaW1lcigpLHRoaXMuX3N0b3BNYWluVGhyZWFkU29ja2V0KCl9fSx7a2V5Olwib25Xb3JrZXJUaW1lckRpc2FibGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uV29ya2VyVGltZXJEaXNhYmxlZCwgZW5hYmxlIG1haW4gdGhyZWFkIHRpbWVyIGFuZCBzb2NrZXRcIikpLHRoaXMuX3N0YXJ0TWFpblRocmVhZFRpbWVyKCksdGhpcy5fc3RhcnRNYWluVGhyZWFkU29ja2V0KCl9fSx7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jaGVja0NvdW50Kz0xO3ZhciBlLHQ9Qm4odGhpcy5fbW9kdWxlTWFwKTt0cnl7Zm9yKHQucygpOyEoZT10Lm4oKSkuZG9uZTspe3ZhciBuPVBuKGUudmFsdWUsMilbMV07bi5vbkNoZWNrVGltZXImJm4ub25DaGVja1RpbWVyKHRoaXMuX2NoZWNrQ291bnQpfX1jYXRjaChvKXt0LmUobyl9ZmluYWxseXt0LmYoKX19fSx7a2V5OlwiX2luaXRSZWFkeUxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fcmVhZHlMaXN0PVt0aGlzLl9tb2R1bGVNYXAuZ2V0KG9sKSx0aGlzLl9tb2R1bGVNYXAuZ2V0KGxsKV0sdGhpcy5fcmVhZHlMaXN0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3QucmVhZHkoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX29uTW9kdWxlUmVhZHkoKX0pKX0pKX19LHtrZXk6XCJfb25Nb2R1bGVSZWFkeVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9ITA7aWYodGhpcy5fcmVhZHlMaXN0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3QuaXNSZWFkeSgpfHwoZT0hMSl9KSksZSYmIXRoaXMuX2lzUmVhZHkpe3RoaXMuX2lzUmVhZHk9ITAsdGhpcy5fb3V0ZXJFbWl0dGVyLmVtaXQoV24uU0RLX1JFQURZKTt2YXIgdD1EYXRlLm5vdygpLXRoaXMuX3N0YXJ0TG9naW5UcztRaS53YXJuKFwiU0RLIGlzIHJlYWR5LiBjb3N0IFwiLmNvbmNhdCh0LFwiIG1zXCIpKSx0aGlzLl9zdGFydExvZ2luVHM9RGF0ZS5ub3coKTt2YXIgbj10aGlzLl9tb2R1bGVNYXAuZ2V0KGhsKS5nZXROZXR3b3JrVHlwZSgpLG89dGhpcy5fc3NvTG9nRm9yUmVhZHkuZ2V0U3RhcnRUcygpK2ppO3RoaXMuX3Nzb0xvZ0ZvclJlYWR5LnNldE5ldHdvcmtUeXBlKG4pLnNldE1lc3NhZ2UodCkuc3RhcnQobykuZW5kKCl9fX0se2tleTpcImxvZ2luXCIsdmFsdWU6ZnVuY3Rpb24oKXswPT09dGhpcy5fc3RhcnRMb2dpblRzJiYoWWkoKSx0aGlzLl9zdGFydExvZ2luVHM9RGF0ZS5ub3coKSx0aGlzLl9zdGFydFRpbWVyKCksdGhpcy5fbW9kdWxlTWFwLmdldChobCkuc3RhcnQoKSx0aGlzLl9zc29Mb2dGb3JSZWFkeT1uZXcgRHAoQ3ApLHRoaXMuX3JlYXNvbj1scC5MT0dHSU5HX0lOKX19LHtrZXk6XCJvbkxvZ2luRmFpbGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zdGFydExvZ2luVHM9MH19LHtrZXk6XCJnZXRPdXRlckVtaXR0ZXJJbnN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLl9vdXRlckVtaXR0ZXImJih0aGlzLl9vdXRlckVtaXR0ZXI9bmV3IGZ2LHNtKHRoaXMuX291dGVyRW1pdHRlciksdGhpcy5fb3V0ZXJFbWl0dGVyLl9lbWl0PXRoaXMuX291dGVyRW1pdHRlci5lbWl0LHRoaXMuX291dGVyRW1pdHRlci5lbWl0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztpZihlPT09V24uQ09OVkVSU0FUSU9OX0xJU1RfVVBEQVRFRHx8ZT09PVduLkZSSUVORF9MSVNUX1VQREFURUR8fGU9PT1Xbi5HUk9VUF9MSVNUX1VQREFURUQpaWYodGhpcy5fZXZlbnRUaHJvdHRsZU1hcC5oYXMoZSkpe3ZhciBvPURhdGUubm93KCkscj10aGlzLl9ldmVudFRocm90dGxlTWFwLmdldChlKTtvLXIubGFzdDwxZTM/KHIudGltZW91dElEJiZjbGVhclRpbWVvdXQoci50aW1lb3V0SUQpLHIudGltZW91dElEPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ci5sYXN0PW8sbi5fb3V0ZXJFbWl0dGVyLl9lbWl0LmFwcGx5KG4uX291dGVyRW1pdHRlcixbZSx7bmFtZTplLGRhdGE6bi5fZ2V0RXZlbnREYXRhKGUpfV0pfSksNTAwKSk6KHIubGFzdD1vLHRoaXMuX291dGVyRW1pdHRlci5fZW1pdC5hcHBseSh0aGlzLl9vdXRlckVtaXR0ZXIsW2Use25hbWU6ZSxkYXRhOnRoaXMuX2dldEV2ZW50RGF0YShlKX1dKSl9ZWxzZSB0aGlzLl9ldmVudFRocm90dGxlTWFwLnNldChlLHtsYXN0OkRhdGUubm93KCksdGltZW91dElEOi0xfSksdGhpcy5fb3V0ZXJFbWl0dGVyLl9lbWl0LmFwcGx5KHRoaXMuX291dGVyRW1pdHRlcixbZSx7bmFtZTplLGRhdGE6dGhpcy5fZ2V0RXZlbnREYXRhKGUpfV0pO2Vsc2UgdGhpcy5fb3V0ZXJFbWl0dGVyLl9lbWl0LmFwcGx5KHRoaXMuX291dGVyRW1pdHRlcixbZSx7bmFtZTplLGRhdGE6YXJndW1lbnRzWzFdfV0pfS5iaW5kKHRoaXMpKSx0aGlzLl9vdXRlckVtaXR0ZXJ9fSx7a2V5OlwiX2dldEV2ZW50RGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09V24uQ09OVkVSU0FUSU9OX0xJU1RfVVBEQVRFRD90aGlzLl9tb2R1bGVNYXAuZ2V0KGxsKS5nZXRMb2NhbENvbnZlcnNhdGlvbkxpc3QoKTplPT09V24uRlJJRU5EX0xJU1RfVVBEQVRFRD90aGlzLl9tb2R1bGVNYXAuZ2V0KHVsKS5nZXRMb2NhbEZyaWVuZExpc3QoITEpOmU9PT1Xbi5HUk9VUF9MSVNUX1VQREFURUQ/dGhpcy5fbW9kdWxlTWFwLmdldChpbCkuZ2V0TG9jYWxHcm91cExpc3QoKTp2b2lkIDB9fSx7a2V5OlwiZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5faW5uZXJFbWl0dGVyJiYodGhpcy5faW5uZXJFbWl0dGVyPW5ldyBmdix0aGlzLl9pbm5lckVtaXR0ZXIuX2VtaXQ9dGhpcy5faW5uZXJFbWl0dGVyLmVtaXQsdGhpcy5faW5uZXJFbWl0dGVyLmVtaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbjtwdShhcmd1bWVudHNbMV0pJiZhcmd1bWVudHNbMV0uZGF0YT8oUWkud2FybihcImlubmVyIGV2ZW50RGF0YSBoYXMgZGF0YSBwcm9wZXJ0eSwgcGxlYXNlIGNoZWNrIVwiKSxuPVtlLHtuYW1lOmFyZ3VtZW50c1swXSxkYXRhOmFyZ3VtZW50c1sxXS5kYXRhfV0pOm49W2Use25hbWU6YXJndW1lbnRzWzBdLGRhdGE6YXJndW1lbnRzWzFdfV0sdGhpcy5faW5uZXJFbWl0dGVyLl9lbWl0LmFwcGx5KHRoaXMuX2lubmVyRW1pdHRlcixuKX0uYmluZCh0aGlzKSksdGhpcy5faW5uZXJFbWl0dGVyfX0se2tleTpcImhhc01vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYXAuaGFzKGUpfX0se2tleTpcImdldE1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYXAuZ2V0KGUpfX0se2tleTpcImlzUmVhZHlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1JlYWR5fX0se2tleTpcImdldE5vdFJlYWR5UmVhc29uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVhc29ufX0se2tleTpcInNldE5vdFJlYWR5UmVhc29uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcmVhc29uPWV9fSx7a2V5Olwib25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe1FpLndhcm4oXCJPb3BzISBjb2RlOlwiLmNvbmNhdChlLmNvZGUsXCIgbWVzc2FnZTpcIikuY29uY2F0KGUubWVzc2FnZSkpLG5ldyBEcCh5aCkuc2V0TWVzc2FnZShcImNvZGU6XCIuY29uY2F0KGUuY29kZSxcIiBtZXNzYWdlOlwiKS5jb25jYXQoZS5tZXNzYWdlKSkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXRNb2R1bGUoaGwpLmdldE5ldHdvcmtUeXBlKCkpLnNldExldmVsKFwiZXJyb3JcIikuZW5kKCksdGhpcy5nZXRPdXRlckVtaXR0ZXJJbnN0YW5jZSgpLmVtaXQoV24uRVJST1IsZSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLFlpKCk7dmFyIGUsdD1Cbih0aGlzLl9tb2R1bGVNYXApO3RyeXtmb3IodC5zKCk7IShlPXQubigpKS5kb25lOyl7dmFyIG49UG4oZS52YWx1ZSwyKVsxXTtuLnJlc2V0JiZuLnJlc2V0KCl9fWNhdGNoKHMpe3QuZShzKX1maW5hbGx5e3QuZigpfXRoaXMuX3N0YXJ0TG9naW5Ucz0wLHRoaXMuX2luaXRSZWFkeUxpc3QoKSx0aGlzLl9pc1JlYWR5PSExLHRoaXMuc3RvcFRpbWVyKCksdGhpcy5fb3V0ZXJFbWl0dGVyLmVtaXQoV24uU0RLX05PVF9SRUFEWSk7dmFyIG8scj1Cbih0aGlzLl9ldmVudFRocm90dGxlTWFwKTt0cnl7Zm9yKHIucygpOyEobz1yLm4oKSkuZG9uZTspe3ZhciBhPVBuKG8udmFsdWUsMilbMV07YS50aW1lb3V0SUQmJmNsZWFyVGltZW91dChhLnRpbWVvdXRJRCl9fWNhdGNoKHMpe3IuZShzKX1maW5hbGx5e3IuZigpfXRoaXMuX2V2ZW50VGhyb3R0bGVNYXAuY2xlYXIoKX19XSksZX0oKSxCST1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt5bih0aGlzLGUpLHRoaXMuX2Z1bmNNYXA9bmV3IE1hcH1yZXR1cm4gRW4oZSxbe2tleTpcImRlZmVuc2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp2b2lkIDA7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7aWYoMD09PWUubGVuZ3RoKXJldHVybiBudWxsO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpcmV0dXJuIG51bGw7aWYodGhpcy5fZnVuY01hcC5oYXMoZSkmJnRoaXMuX2Z1bmNNYXAuZ2V0KGUpLmhhcyh0KSlyZXR1cm4gdGhpcy5fZnVuY01hcC5nZXQoZSkuZ2V0KHQpO3RoaXMuX2Z1bmNNYXAuaGFzKGUpfHx0aGlzLl9mdW5jTWFwLnNldChlLG5ldyBNYXApO3ZhciBvPW51bGw7cmV0dXJuIHRoaXMuX2Z1bmNNYXAuZ2V0KGUpLmhhcyh0KT9vPXRoaXMuX2Z1bmNNYXAuZ2V0KGUpLmdldCh0KToobz10aGlzLl9wYWNrKGUsdCxuKSx0aGlzLl9mdW5jTWFwLmdldChlKS5zZXQodCxvKSksb319LHtrZXk6XCJkZWZlbnNlT25jZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnZvaWQgMDtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiB0P251bGw6dGhpcy5fcGFjayhlLHQsbil9fSx7a2V5OlwiZmluZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGV8fDA9PT1lLmxlbmd0aHx8XCJmdW5jdGlvblwiIT10eXBlb2YgdD9udWxsOnRoaXMuX2Z1bmNNYXAuaGFzKGUpP3RoaXMuX2Z1bmNNYXAuZ2V0KGUpLmhhcyh0KT90aGlzLl9mdW5jTWFwLmdldChlKS5nZXQodCk6KFFpLmxvZyhcIlNhZmV0eUNhbGxiYWNrLmZpbmQ6IOaJvuS4jeWIsCBmdW5jIOKAlOKAlCBcIi5jb25jYXQoZSxcIi9cIikuY29uY2F0KFwiXCIhPT10Lm5hbWU/dC5uYW1lOlwiW2Fub255bW91c11cIikpLG51bGwpOihRaS5sb2coXCJTYWZldHlDYWxsYmFjay5maW5kOiDmib7kuI3liLAgZXZlbnROYW1lLVwiLmNvbmNhdChlLFwiIOWvueW6lOeahCBmdW5jXCIpKSxudWxsKX19LHtrZXk6XCJkZWxldGVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJighIXRoaXMuX2Z1bmNNYXAuaGFzKGUpJiYoISF0aGlzLl9mdW5jTWFwLmdldChlKS5oYXModCkmJih0aGlzLl9mdW5jTWFwLmdldChlKS5kZWxldGUodCksMD09PXRoaXMuX2Z1bmNNYXAuZ2V0KGUpLnNpemUmJnRoaXMuX2Z1bmNNYXAuZGVsZXRlKGUpLCEwKSkpfX0se2tleTpcIl9wYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbigpe3RyeXt0LmFwcGx5KG4sQXJyYXkuZnJvbShhcmd1bWVudHMpKX1jYXRjaChzKXt2YXIgbz1PYmplY3QudmFsdWVzKFduKS5pbmRleE9mKGUpO2lmKC0xIT09byl7dmFyIHI9T2JqZWN0LmtleXMoV24pW29dO1FpLndhcm4oXCLmjqXlhaXkvqfkuovku7YgVElNLkVWRU5ULlwiLmNvbmNhdChyLFwiIOWvueW6lOeahOWbnuiwg+WHveaVsOmAu+i+keWtmOWcqOmXrumimO+8jOivt+ajgOafpe+8gVwiKSxzKX12YXIgYT1uZXcgRHAoZmgpO2Euc2V0TWVzc2FnZShcImV2ZW50TmFtZTpcIi5jb25jYXQoZSkpLnNldE1vcmVNZXNzYWdlKHMubWVzc2FnZSkuZW5kKCl9fX19XSksZX0oKSxIST1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKTt2YXIgbj17U0RLQXBwSUQ6dC5TREtBcHBJRCx1bmxpbWl0ZWRBVkNoYXRSb29tOnQudW5saW1pdGVkQVZDaGF0Um9vbXx8ITEsc2NlbmU6dC5zY2VuZXx8XCJcIixvdmVyc2VhOnQub3ZlcnNlYXx8ITEsaW5zdGFuY2VJRDpLdSgpLGRldk1vZGU6dC5kZXZNb2RlfHwhMSxwcm94eVNlcnZlcjp0LnByb3h5U2VydmVyfHx2b2lkIDB9O3RoaXMuX21vZHVsZU1hbmFnZXI9bmV3IEtJKG4pLHRoaXMuX3NhZmV0eUNhbGxiYWNrRmFjdG9yeT1uZXcgQkl9cmV0dXJuIEVuKGUsW3trZXk6XCJvbkVycm9yXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbW9kdWxlTWFuYWdlci5vbkVycm9yKGUpfX0se2tleTpcImxvZ2luXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIubG9naW4oKSx0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShvbCkubG9naW4oZSl9fSx7a2V5OlwibG9nb3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShvbCkubG9nb3V0KCkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGUuX21vZHVsZU1hbmFnZXIucmVzZXQoKSx0fSkpfX0se2tleTpcImlzUmVhZHlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmlzUmVhZHkoKX19LHtrZXk6XCJnZXROb3RSZWFkeVJlYXNvblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0Tm90UmVhZHlSZWFzb24oKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLmxvZ291dCgpLmZpbmFsbHkoKGZ1bmN0aW9uKCl7ZS5fbW9kdWxlTWFuYWdlci5zdG9wVGltZXIoKSxlLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShUbCkudGVybWluYXRlKCksZS5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoeWwpLmRlYWxsb2MoKTt2YXIgdD1lLl9tb2R1bGVNYW5hZ2VyLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCksbj1lLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShkbCk7dC5lbWl0KFduLlNES19ERVNUUk9ZLHtTREtBcHBJRDpuLmdldFNES0FwcElEKCl9KX0pKX19LHtrZXk6XCJvblwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtlPT09V24uR1JPVVBfU1lTVEVNX05PVElDRV9SRUNFSVZFRCYmUWkud2FybihcIu+8ge+8ge+8gVRJTS5FVkVOVC5HUk9VUF9TWVNURU1fTk9USUNFX1JFQ0VJVkVEIHYyLjYuMOi1t+W8g+eUqO+8jOS4uuS6huabtOWlveeahOS9k+mqjO+8jOivt+WcqCBUSU0uRVZFTlQuTUVTU0FHRV9SRUNFSVZFRCDkuovku7blm57osIPlhoXmjqXmlLblpITnkIbnvqTns7vnu5/pgJrnn6XvvIzor6bnu4bor7flj4LogIPvvJpodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vTWVzc2FnZS5odG1sIy5Hcm91cFN5c3RlbU5vdGljZVBheWxvYWRcIiksUWkuZGVidWcoXCJvblwiLFwiZXZlbnROYW1lOlwiLmNvbmNhdChlKSksdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRPdXRlckVtaXR0ZXJJbnN0YW5jZSgpLm9uKGUsdGhpcy5fc2FmZXR5Q2FsbGJhY2tGYWN0b3J5LmRlZmVuc2UoZSx0LG4pLG4pfX0se2tleTpcIm9uY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7UWkuZGVidWcoXCJvbmNlXCIsXCJldmVudE5hbWU6XCIuY29uY2F0KGUpKSx0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkub25jZShlLHRoaXMuX3NhZmV0eUNhbGxiYWNrRmFjdG9yeS5kZWZlbnNlT25jZShlLHQsbiksbnx8dGhpcyl9fSx7a2V5Olwib2ZmXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4sbyl7UWkuZGVidWcoXCJvZmZcIixcImV2ZW50TmFtZTpcIi5jb25jYXQoZSkpO3ZhciByPXRoaXMuX3NhZmV0eUNhbGxiYWNrRmFjdG9yeS5maW5kKGUsdCk7bnVsbCE9PXImJih0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkub2ZmKGUscixuLG8pLHRoaXMuX3NhZmV0eUNhbGxiYWNrRmFjdG9yeS5kZWxldGUoZSx0KSl9fSx7a2V5OlwicmVnaXN0ZXJQbHVnaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShtbCkucmVnaXN0ZXJQbHVnaW4oZSl9fSx7a2V5Olwic2V0TG9nTGV2ZWxcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihlPD0wKXtjb25zb2xlLmxvZyhbXCJcIixcIiBfX19fX19fXyAgX19fX19fICBfXyAgICAgICBfXyAgX18gICAgICAgX18gIF9fX19fX19fICBfX19fX19fXCIsXCJ8ICAgICAgICBcXFxcfCAgICAgIFxcXFx8ICBcXFxcICAgICAvICBcXFxcfCAgXFxcXCAgXyAgfCAgXFxcXHwgICAgICAgIFxcXFx8ICAgICAgIFxcXFxcIixcIiBcXFxcJCQkJCQkJCQgXFxcXCQkJCQkJHwgJCRcXFxcICAgLyAgJCR8ICQkIC8gXFxcXCB8ICQkfCAkJCQkJCQkJHwgJCQkJCQkJFxcXFxcIixcIiAgIHwgJCQgICAgIHwgJCQgIHwgJCQkXFxcXCAvICAkJCR8ICQkLyAgJFxcXFx8ICQkfCAkJF9fICAgIHwgJCRfXy8gJCRcIixcIiAgIHwgJCQgICAgIHwgJCQgIHwgJCQkJFxcXFwgICQkJCR8ICQkICAkJCRcXFxcICQkfCAkJCAgXFxcXCAgIHwgJCQgICAgJCRcIixcIiAgIHwgJCQgICAgIHwgJCQgIHwgJCRcXFxcJCQgJCQgJCR8ICQkICQkXFxcXCQkXFxcXCQkfCAkJCQkJCAgIHwgJCQkJCQkJFxcXFxcIixcIiAgIHwgJCQgICAgX3wgJCRfIHwgJCQgXFxcXCQkJHwgJCR8ICQkJCQgIFxcXFwkJCQkfCAkJF9fX19fIHwgJCRfXy8gJCRcIixcIiAgIHwgJCQgICB8ICAgJCQgXFxcXHwgJCQgIFxcXFwkIHwgJCR8ICQkJCAgICBcXFxcJCQkfCAkJCAgICAgXFxcXHwgJCQgICAgJCRcIixcIiAgICBcXFxcJCQgICAgXFxcXCQkJCQkJCBcXFxcJCQgICAgICBcXFxcJCQgXFxcXCQkICAgICAgXFxcXCQkIFxcXFwkJCQkJCQkJCBcXFxcJCQkJCQkJFwiLFwiXCIsXCJcIl0uam9pbihcIlxcblwiKSksY29uc29sZS5sb2coXCIlY0lNIOaZuuiDveWuouacje+8jOmaj+aXtumaj+WcsOino+WGs+aCqOeahOmXrumimCDihpJf4oaSIGh0dHBzOi8vY2xvdWQudGVuY2VudC5jb20vYWN0L2V2ZW50L3NtYXJ0eS1zZXJ2aWNlP2Zyb209aW0tZG9jXCIsXCJjb2xvcjojMDA2ZWZmXCIpLGNvbnNvbGUubG9nKFwiJWPku452Mi4xMS4y6LW377yMU0RLIOaUr+aMgeS6hiBXZWJTb2NrZXTvvIzlsI/nqIvluo/pnIDopoHmt7vliqDlj5fkv6Hln5/lkI3vvIHljYfnuqfmjIflvJU6IGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi90dXRvcmlhbC0wMi11cGdyYWRlZ3VpZGVsaW5lLmh0bWxcIixcImNvbG9yOiNmZjAwMDBcIik7Y29uc29sZS5sb2coW1wiXCIsXCLlj4LogIPku6XkuIvmlofmoaPvvIzkvJrmm7Tlv6vop6PlhrPpl67popjlk6bvvIEoI14uXiMpXFxuXCIsXCJTREsg5pu05paw5pel5b+XOiBodHRwczovL2Nsb3VkLnRlbmNlbnQuY29tL2RvY3VtZW50L3Byb2R1Y3QvMjY5LzM4NDkyXFxuXCIsXCJTREsg5o6l5Y+j5paH5qGjOiBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWxcXG5cIixcIuW4uOingemXrumimDogaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL3R1dG9yaWFsLTAxLWZhcS5odG1sXFxuXCIsXCLlj43ppojpl67popjvvJ/miLPmiJHmj5AgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS90ZW5jZW50eXVuL1RJTVNESy9pc3N1ZXNcXG5cIixcIuWmguaenOaCqOmcgOimgeWcqOeUn+S6p+eOr+Wig+WFs+mXreS4iumdoueahOaXpeW/l++8jOivtyB0aW0uc2V0TG9nTGV2ZWwoMSlcXG5cIl0uam9pbihcIlxcblwiKSl9UWkuc2V0TGV2ZWwoZSl9fSx7a2V5OlwiY3JlYXRlVGV4dE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUocmwpLmNyZWF0ZVRleHRNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZVRleHRBdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUocmwpLmNyZWF0ZVRleHRNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShybCkuY3JlYXRlSW1hZ2VNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUF1ZGlvTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShybCkuY3JlYXRlQXVkaW9NZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShybCkuY3JlYXRlVmlkZW9NZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUocmwpLmNyZWF0ZUN1c3RvbU1lc3NhZ2UoZSl9fSx7a2V5OlwiY3JlYXRlRmFjZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUocmwpLmNyZWF0ZUZhY2VNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHJsKS5jcmVhdGVGaWxlTWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVMb2NhdGlvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUocmwpLmNyZWF0ZUxvY2F0aW9uTWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHJsKS5jcmVhdGVNZXJnZXJNZXNzYWdlKGUpfX0se2tleTpcImRvd25sb2FkTWVyZ2VyTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGUhPT1Zbi5NU0dfTUVSR0VSP3VtKG5ldyBybSh7Y29kZTpscC5NRVNTQUdFX01FUkdFUl9UWVBFX0lOVkFMSUQsbWVzc2FnZTpkcC5NRVNTQUdFX01FUkdFUl9UWVBFX0lOVkFMSUR9KSk6WHUoZS5wYXlsb2FkLmRvd25sb2FkS2V5KT91bShuZXcgcm0oe2NvZGU6bHAuTUVTU0FHRV9NRVJHRVJfS0VZX0lOVkFMSUQsbWVzc2FnZTpkcC5NRVNTQUdFX01FUkdFUl9LRVlfSU5WQUxJRH0pKTp0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShybCkuZG93bmxvYWRNZXJnZXJNZXNzYWdlKGUpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdW0obmV3IHJtKHtjb2RlOmxwLk1FU1NBR0VfTUVSR0VSX0RPV05MT0FEX0ZBSUwsbWVzc2FnZTpkcC5NRVNTQUdFX01FUkdFUl9ET1dOTE9BRF9GQUlMfSkpfSkpfX0se2tleTpcImNyZWF0ZUZvcndhcmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHJsKS5jcmVhdGVGb3J3YXJkTWVzc2FnZShlKX19LHtrZXk6XCJzZW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUgaW5zdGFuY2VvZiBYXz90aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShybCkuc2VuZE1lc3NhZ2VJbnN0YW5jZShlLHQpOnVtKG5ldyBybSh7Y29kZTpscC5NRVNTQUdFX1NFTkRfTkVFRF9NRVNTQUdFX0lOU1RBTkNFLG1lc3NhZ2U6ZHAuTUVTU0FHRV9TRU5EX05FRURfTUVTU0FHRV9JTlNUQU5DRX0pKX19LHtrZXk6XCJjYWxsRXhwZXJpbWVudGFsQVBJXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm5cImhhbmRsZUdyb3VwSW52aXRhdGlvblwiPT09ZT90aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCkuaGFuZGxlR3JvdXBJbnZpdGF0aW9uKHQpOnVtKG5ldyBybSh7Y29kZTpscC5JTlZBTElEX09QRVJBVElPTixtZXNzYWdlOmRwLklOVkFMSURfT1BFUkFUSU9OfSkpfX0se2tleTpcInJldm9rZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUocmwpLnJldm9rZU1lc3NhZ2UoZSl9fSx7a2V5OlwicmVzZW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShybCkucmVzZW5kTWVzc2FnZShlKX19LHtrZXk6XCJkZWxldGVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHJsKS5kZWxldGVNZXNzYWdlKGUpfX0se2tleTpcImdldE1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGxsKS5nZXRNZXNzYWdlTGlzdChlKX19LHtrZXk6XCJzZW5kTWVzc2FnZVJlYWRSZWNlaXB0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGlsKS5zZW5kUmVhZFJlY2VpcHQoZSl9fSx7a2V5OlwiZ2V0TWVzc2FnZVJlYWRSZWNlaXB0TGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCkuZ2V0UmVhZFJlY2VpcHRMaXN0KGUpfX0se2tleTpcImdldEdyb3VwTWVzc2FnZVJlYWRNZW1iZXJMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGlsKS5nZXRSZWFkUmVjZWlwdERldGFpbChlKX19LHtrZXk6XCJmaW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShsbCkuZmluZE1lc3NhZ2UoZSl9fSx7a2V5Olwic2V0TWVzc2FnZVJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobGwpLnNldE1lc3NhZ2VSZWFkKGUpfX0se2tleTpcImdldENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobGwpLmdldENvbnZlcnNhdGlvbkxpc3QoZSl9fSx7a2V5OlwiZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShsbCkuZ2V0Q29udmVyc2F0aW9uUHJvZmlsZShlKX19LHtrZXk6XCJkZWxldGVDb252ZXJzYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobGwpLmRlbGV0ZUNvbnZlcnNhdGlvbihlKX19LHtrZXk6XCJwaW5Db252ZXJzYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobGwpLnBpbkNvbnZlcnNhdGlvbihlKX19LHtrZXk6XCJzZXRBbGxNZXNzYWdlUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShsbCkuc2V0QWxsTWVzc2FnZVJlYWQoZSl9fSx7a2V5Olwic2V0TWVzc2FnZVJlbWluZFR5cGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobGwpLnNldE1lc3NhZ2VSZW1pbmRUeXBlKGUpfX0se2tleTpcImdldE15UHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGFsKS5nZXRNeVByb2ZpbGUoKX19LHtrZXk6XCJnZXRVc2VyUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShhbCkuZ2V0VXNlclByb2ZpbGUoZSl9fSx7a2V5OlwidXBkYXRlTXlQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGFsKS51cGRhdGVNeVByb2ZpbGUoZSl9fSx7a2V5OlwiZ2V0QmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoYWwpLmdldExvY2FsQmxhY2tsaXN0KCl9fSx7a2V5OlwiYWRkVG9CbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoYWwpLmFkZEJsYWNrbGlzdChlKX19LHtrZXk6XCJyZW1vdmVGcm9tQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGFsKS5kZWxldGVCbGFja2xpc3QoZSl9fSx7a2V5OlwiZ2V0RnJpZW5kTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUodWwpO3JldHVybiBlP2UuZ2V0TG9jYWxGcmllbmRMaXN0KCk6dW0oe2NvZGU6bHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6ZHAuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5OlwiYWRkRnJpZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUodWwpO3JldHVybiB0P3QuYWRkRnJpZW5kKGUpOnVtKHtjb2RlOmxwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOmRwLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcImRlbGV0ZUZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKTtyZXR1cm4gdD90LmRlbGV0ZUZyaWVuZChlKTp1bSh7Y29kZTpscC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpkcC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJjaGVja0ZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKTtyZXR1cm4gdD90LmNoZWNrRnJpZW5kKGUpOnVtKHtjb2RlOmxwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOmRwLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcImdldEZyaWVuZFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh1bCk7cmV0dXJuIHQ/dC5nZXRGcmllbmRQcm9maWxlKGUpOnVtKHtjb2RlOmxwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOmRwLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcInVwZGF0ZUZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKTtyZXR1cm4gdD90LnVwZGF0ZUZyaWVuZChlKTp1bSh7Y29kZTpscC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpkcC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJnZXRGcmllbmRBcHBsaWNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKTtyZXR1cm4gZT9lLmdldExvY2FsRnJpZW5kQXBwbGljYXRpb25MaXN0KCk6dW0oe2NvZGU6bHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6ZHAuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5OlwiYWNjZXB0RnJpZW5kQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh1bCk7cmV0dXJuIHQ/dC5hY2NlcHRGcmllbmRBcHBsaWNhdGlvbihlKTp1bSh7Y29kZTpscC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpkcC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJyZWZ1c2VGcmllbmRBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKTtyZXR1cm4gdD90LnJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uKGUpOnVtKHtjb2RlOmxwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOmRwLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcImRlbGV0ZUZyaWVuZEFwcGxpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUodWwpO3JldHVybiB0P3QuZGVsZXRlRnJpZW5kQXBwbGljYXRpb24oZSk6dW0oe2NvZGU6bHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6ZHAuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5Olwic2V0RnJpZW5kQXBwbGljYXRpb25SZWFkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh1bCk7cmV0dXJuIGU/ZS5zZXRGcmllbmRBcHBsaWNhdGlvblJlYWQoKTp1bSh7Y29kZTpscC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpkcC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJnZXRGcmllbmRHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKTtyZXR1cm4gZT9lLmdldExvY2FsRnJpZW5kR3JvdXBMaXN0KCk6dW0oe2NvZGU6bHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6ZHAuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5OlwiY3JlYXRlRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh1bCk7cmV0dXJuIHQ/dC5jcmVhdGVGcmllbmRHcm91cChlKTp1bSh7Y29kZTpscC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpkcC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJkZWxldGVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKTtyZXR1cm4gdD90LmRlbGV0ZUZyaWVuZEdyb3VwKGUpOnVtKHtjb2RlOmxwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOmRwLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcImFkZFRvRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh1bCk7cmV0dXJuIHQ/dC5hZGRUb0ZyaWVuZEdyb3VwKGUpOnVtKHtjb2RlOmxwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOmRwLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcInJlbW92ZUZyb21GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKTtyZXR1cm4gdD90LnJlbW92ZUZyb21GcmllbmRHcm91cChlKTp1bSh7Y29kZTpscC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpkcC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJyZW5hbWVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKTtyZXR1cm4gdD90LnJlbmFtZUZyaWVuZEdyb3VwKGUpOnVtKHtjb2RlOmxwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOmRwLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcImdldEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCkuZ2V0R3JvdXBMaXN0KGUpfX0se2tleTpcImdldEdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCkuZ2V0R3JvdXBQcm9maWxlKGUpfX0se2tleTpcImNyZWF0ZUdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGlsKS5jcmVhdGVHcm91cChlKX19LHtrZXk6XCJkaXNtaXNzR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpLmRpc21pc3NHcm91cChlKX19LHtrZXk6XCJ1cGRhdGVHcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpLnVwZGF0ZUdyb3VwUHJvZmlsZShlKX19LHtrZXk6XCJqb2luR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpLmpvaW5Hcm91cChlKX19LHtrZXk6XCJxdWl0R3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpLnF1aXRHcm91cChlKX19LHtrZXk6XCJzZWFyY2hHcm91cEJ5SURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpLnNlYXJjaEdyb3VwQnlJRChlKX19LHtrZXk6XCJnZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGlsKS5nZXRHcm91cE9ubGluZU1lbWJlckNvdW50KGUpfX0se2tleTpcImNoYW5nZUdyb3VwT3duZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpLmNoYW5nZUdyb3VwT3duZXIoZSl9fSx7a2V5OlwiaGFuZGxlR3JvdXBBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCkuaGFuZGxlR3JvdXBBcHBsaWNhdGlvbihlKX19LHtrZXk6XCJpbml0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGlsKS5pbml0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcInNldEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCkuc2V0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCkuZGVsZXRlR3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcImdldEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCkuZ2V0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcImdldEdyb3VwTWVtYmVyTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShjbCkuZ2V0R3JvdXBNZW1iZXJMaXN0KGUpfX0se2tleTpcImdldEdyb3VwTWVtYmVyUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShjbCkuZ2V0R3JvdXBNZW1iZXJQcm9maWxlKGUpfX0se2tleTpcImFkZEdyb3VwTWVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGNsKS5hZGRHcm91cE1lbWJlcihlKX19LHtrZXk6XCJkZWxldGVHcm91cE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShjbCkuZGVsZXRlR3JvdXBNZW1iZXIoZSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJNdXRlVGltZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShjbCkuc2V0R3JvdXBNZW1iZXJNdXRlVGltZShlKX19LHtrZXk6XCJzZXRHcm91cE1lbWJlclJvbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoY2wpLnNldEdyb3VwTWVtYmVyUm9sZShlKX19LHtrZXk6XCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGNsKS5zZXRHcm91cE1lbWJlck5hbWVDYXJkKGUpfX0se2tleTpcInNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoY2wpLnNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGQoZSl9fV0pLGV9KCksakk9e2xvZ2luOlwibG9naW5cIixsb2dvdXQ6XCJsb2dvdXRcIixkZXN0cm95OlwiZGVzdHJveVwiLG9uOlwib25cIixvZmY6XCJvZmZcIixyZWFkeTpcInJlYWR5XCIsc2V0TG9nTGV2ZWw6XCJzZXRMb2dMZXZlbFwiLGpvaW5Hcm91cDpcImpvaW5Hcm91cFwiLHF1aXRHcm91cDpcInF1aXRHcm91cFwiLHJlZ2lzdGVyUGx1Z2luOlwicmVnaXN0ZXJQbHVnaW5cIixnZXRHcm91cE9ubGluZU1lbWJlckNvdW50OlwiZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwifTtmdW5jdGlvbiBXSShlLHQpe2lmKGUuaXNSZWFkeSgpfHx2b2lkIDAhPT1qSVt0XSlyZXR1cm4hMDt2YXIgbj1lLmdldE5vdFJlYWR5UmVhc29uKCksbz1cIlwiO09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGxwKS5mb3JFYWNoKChmdW5jdGlvbihlKXtscFtlXT09PW4mJihvPWRwW2VdKX0pKTt2YXIgcj17Y29kZTpuLG1lc3NhZ2U6XCJcIi5jb25jYXQobyxcIuWvvOiHtCBzZGsgbm90IHJlYWR544CCXCIpLmNvbmNhdCh0LFwiIFwiKS5jb25jYXQoZHAuU0RLX0lTX05PVF9SRUFEWSxcIu+8jOivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vbW9kdWxlLUVWRU5ULmh0bWwjLlNES19SRUFEWVwiKX07cmV0dXJuIGUub25FcnJvcihyKSxyfXZhciBZST17fSwkST17fTtyZXR1cm4gJEkuY3JlYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PTA7aWYoY3UoZS5TREtBcHBJRCkpdD1lLlNES0FwcElEO2Vsc2UgaWYoUWkud2FybihcIlRJTS5jcmVhdGUgU0RLQXBwSUQg55qE57G75Z6L5bqU6K+l5Li6IE51bWJlcu+8jOivt+S/ruaUue+8gVwiKSx0PXBhcnNlSW50KGUuU0RLQXBwSUQpLGlzTmFOKHQpKXJldHVybiBRaS5lcnJvcihcIlRJTS5jcmVhdGUgZmFpbGVkLiDop6PmnpAgU0RLQXBwSUQg5aSx6LSl77yM6K+35qOA5p+l5Lyg5Y+C77yBXCIpLG51bGw7aWYodCYmWUlbdF0pcmV0dXJuIFlJW3RdO1FpLmxvZyhcIlRJTS5jcmVhdGVcIik7dmFyIG49bmV3IEhJKFNuKHt9LGUse1NES0FwcElEOnR9KSk7bi5vbihXbi5TREtfREVTVFJPWSwoZnVuY3Rpb24oZSl7WUlbZS5kYXRhLlNES0FwcElEXT1udWxsLGRlbGV0ZSBZSVtlLmRhdGEuU0RLQXBwSURdfSkpO3ZhciBvPWZ1bmN0aW9uKGUpe3ZhciB0PU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIE9iamVjdC5rZXlzKCRjKS5mb3JFYWNoKChmdW5jdGlvbihuKXtpZihlW25dKXt2YXIgbz0kY1tuXSxyPW5ldyB1bzt0W29dPWZ1bmN0aW9uKCl7dmFyIHQ9QXJyYXkuZnJvbShhcmd1bWVudHMpO3JldHVybiByLnVzZSgoZnVuY3Rpb24odCxvKXt2YXIgcj1XSShlLG4pO3JldHVybiEwPT09cj9vKCk6dW0ocil9KSkudXNlKChmdW5jdGlvbihlLHQpe2lmKCEwPT09UXUoZSxZY1tuXSxvKSlyZXR1cm4gdCgpfSkpLnVzZSgoZnVuY3Rpb24odCxvKXtyZXR1cm4gZVtuXS5hcHBseShlLHQpfSkpLHIucnVuKHQpfX19KSksdH0obik7cmV0dXJuIFlJW3RdPW8sUWkubG9nKFwiVElNLmNyZWF0ZSBva1wiKSxvfSwkSS5UWVBFUz1ZbiwkSS5FVkVOVD1XbiwkSS5WRVJTSU9OPVwiMi4xOC4wXCIsUWkubG9nKFwiVElNLlZFUlNJT046IFwiLmNvbmNhdCgkSS5WRVJTSU9OKSksJEl9KSk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0EiLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///./node_modules/tim-js-sdk/tim-js-friendship.js\\n')},\"./node_modules/tim-js-sdk/tim-js.js\":\n/*!*******************************************!*\\\n  !*** ./node_modules/tim-js-sdk/tim-js.js ***!\n  \\*******************************************/\n/*! no static exports found */function(module,exports,__webpack_require__){\"use strict\";eval('/* WEBPACK VAR INJECTION */(function(global) {!function(e,t){ true?module.exports=t():undefined}(this,(function(){var e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=function(e){return e&&e.Math==Math&&e},o=n(\"object\"==typeof globalThis&&globalThis)||n(\"object\"==typeof window&&window)||n(\"object\"==typeof self&&self)||n(\"object\"==typeof e&&e)||Function(\"return this\")(),r=function(e){try{return!!e()}catch(t){return!0}},a=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,c={f:i&&!s.call({1:2},1)?function(e){var t=i(this,e);return!!t&&t.enumerable}:s},u=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},l={}.toString,d=function(e){return l.call(e).slice(8,-1)},p=\"\".split,g=r((function(){return!Object(\"z\").propertyIsEnumerable(0)}))?function(e){return\"String\"==d(e)?p.call(e,\"\"):Object(e)}:Object,h=function(e){if(null==e)throw TypeError(\"Can\\'t call method on \"+e);return e},f=function(e){return g(h(e))},_=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e},m=function(e,t){if(!_(e))return e;var n,o;if(t&&\"function\"==typeof(n=e.toString)&&!_(o=n.call(e)))return o;if(\"function\"==typeof(n=e.valueOf)&&!_(o=n.call(e)))return o;if(!t&&\"function\"==typeof(n=e.toString)&&!_(o=n.call(e)))return o;throw TypeError(\"Can\\'t convert object to primitive value\")},v={}.hasOwnProperty,M=function(e,t){return v.call(e,t)},y=o.document,I=_(y)&&_(y.createElement),E=function(e){return I?y.createElement(e):{}},T=!a&&!r((function(){return 7!=Object.defineProperty(E(\"div\"),\"a\",{get:function(){return 7}}).a})),S=Object.getOwnPropertyDescriptor,C={f:a?S:function(e,t){if(e=f(e),t=m(t,!0),T)try{return S(e,t)}catch(n){}if(M(e,t))return u(!c.f.call(e,t),e[t])}},A=function(e){if(!_(e))throw TypeError(String(e)+\" is not an object\");return e},D=Object.defineProperty,N={f:a?D:function(e,t,n){if(A(e),t=m(t,!0),A(n),T)try{return D(e,t,n)}catch(o){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported\");return\"value\"in n&&(e[t]=n.value),e}},k=a?function(e,t,n){return N.f(e,t,u(1,n))}:function(e,t,n){return e[t]=n,e},O=function(e,t){try{k(o,e,t)}catch(n){o[e]=t}return t},R=o[\"__core-js_shared__\"]||O(\"__core-js_shared__\",{}),L=Function.toString;\"function\"!=typeof R.inspectSource&&(R.inspectSource=function(e){return L.call(e)});var b,w,G,P=R.inspectSource,U=o.WeakMap,F=\"function\"==typeof U&&/native code/.test(P(U)),q=t((function(e){(e.exports=function(e,t){return R[e]||(R[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:\"3.6.4\",mode:\"global\",copyright:\"© 2020 Denis Pushkarev (zloirock.ru)\"})})),x=0,V=Math.random(),K=function(e){return\"Symbol(\"+String(void 0===e?\"\":e)+\")_\"+(++x+V).toString(36)},B=q(\"keys\"),H=function(e){return B[e]||(B[e]=K(e))},j={},W=o.WeakMap;if(F){var Y=new W,$=Y.get,z=Y.has,J=Y.set;b=function(e,t){return J.call(Y,e,t),t},w=function(e){return $.call(Y,e)||{}},G=function(e){return z.call(Y,e)}}else{var X=H(\"state\");j[X]=!0,b=function(e,t){return k(e,X,t),t},w=function(e){return M(e,X)?e[X]:{}},G=function(e){return M(e,X)}}var Q={set:b,get:w,has:G,enforce:function(e){return G(e)?w(e):b(e,{})},getterFor:function(e){return function(t){var n;if(!_(t)||(n=w(t)).type!==e)throw TypeError(\"Incompatible receiver, \"+e+\" required\");return n}}},Z=t((function(e){var t=Q.get,n=Q.enforce,r=String(String).split(\"String\");(e.exports=function(e,t,a,s){var i=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,u=!!s&&!!s.noTargetGet;\"function\"==typeof a&&(\"string\"!=typeof t||M(a,\"name\")||k(a,\"name\",t),n(a).source=r.join(\"string\"==typeof t?t:\"\")),e!==o?(i?!u&&e[t]&&(c=!0):delete e[t],c?e[t]=a:k(e,t,a)):c?e[t]=a:O(t,a)})(Function.prototype,\"toString\",(function(){return\"function\"==typeof this&&t(this).source||P(this)}))})),ee=o,te=function(e){return\"function\"==typeof e?e:void 0},ne=function(e,t){return arguments.length<2?te(ee[e])||te(o[e]):ee[e]&&ee[e][t]||o[e]&&o[e][t]},oe=Math.ceil,re=Math.floor,ae=function(e){return isNaN(e=+e)?0:(e>0?re:oe)(e)},se=Math.min,ie=function(e){return e>0?se(ae(e),9007199254740991):0},ce=Math.max,ue=Math.min,le=function(e,t){var n=ae(e);return n<0?ce(n+t,0):ue(n,t)},de=function(e){return function(t,n,o){var r,a=f(t),s=ie(a.length),i=le(o,s);if(e&&n!=n){for(;s>i;)if((r=a[i++])!=r)return!0}else for(;s>i;i++)if((e||i in a)&&a[i]===n)return e||i||0;return!e&&-1}},pe={includes:de(!0),indexOf:de(!1)},ge=pe.indexOf,he=function(e,t){var n,o=f(e),r=0,a=[];for(n in o)!M(j,n)&&M(o,n)&&a.push(n);for(;t.length>r;)M(o,n=t[r++])&&(~ge(a,n)||a.push(n));return a},fe=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"],_e=fe.concat(\"length\",\"prototype\"),me={f:Object.getOwnPropertyNames||function(e){return he(e,_e)}},ve={f:Object.getOwnPropertySymbols},Me=ne(\"Reflect\",\"ownKeys\")||function(e){var t=me.f(A(e)),n=ve.f;return n?t.concat(n(e)):t},ye=function(e,t){for(var n=Me(t),o=N.f,r=C.f,a=0;a<n.length;a++){var s=n[a];M(e,s)||o(e,s,r(t,s))}},Ie=/#|\\\\.prototype\\\\./,Ee=function(e,t){var n=Se[Te(e)];return n==Ae||n!=Ce&&(\"function\"==typeof t?r(t):!!t)},Te=Ee.normalize=function(e){return String(e).replace(Ie,\".\").toLowerCase()},Se=Ee.data={},Ce=Ee.NATIVE=\"N\",Ae=Ee.POLYFILL=\"P\",De=Ee,Ne=C.f,ke=function(e,t){var n,r,a,s,i,c=e.target,u=e.global,l=e.stat;if(n=u?o:l?o[c]||O(c,{}):(o[c]||{}).prototype)for(r in t){if(s=t[r],a=e.noTargetGet?(i=Ne(n,r))&&i.value:n[r],!De(u?r:c+(l?\".\":\"#\")+r,e.forced)&&void 0!==a){if(typeof s==typeof a)continue;ye(s,a)}(e.sham||a&&a.sham)&&k(s,\"sham\",!0),Z(n,r,s,e)}},Oe=function(e){if(\"function\"!=typeof e)throw TypeError(String(e)+\" is not a function\");return e},Re=function(e,t,n){if(Oe(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}},Le=function(e){return Object(h(e))},be=Array.isArray||function(e){return\"Array\"==d(e)},we=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())})),Ge=we&&!Symbol.sham&&\"symbol\"==typeof Symbol.iterator,Pe=q(\"wks\"),Ue=o.Symbol,Fe=Ge?Ue:Ue&&Ue.withoutSetter||K,qe=function(e){return M(Pe,e)||(we&&M(Ue,e)?Pe[e]=Ue[e]:Pe[e]=Fe(\"Symbol.\"+e)),Pe[e]},xe=qe(\"species\"),Ve=function(e,t){var n;return be(e)&&(\"function\"!=typeof(n=e.constructor)||n!==Array&&!be(n.prototype)?_(n)&&null===(n=n[xe])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Ke=[].push,Be=function(e){var t=1==e,n=2==e,o=3==e,r=4==e,a=6==e,s=5==e||a;return function(i,c,u,l){for(var d,p,h=Le(i),f=g(h),_=Re(c,u,3),m=ie(f.length),v=0,M=l||Ve,y=t?M(i,m):n?M(i,0):void 0;m>v;v++)if((s||v in f)&&(p=_(d=f[v],v,h),e))if(t)y[v]=p;else if(p)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:Ke.call(y,d)}else if(r)return!1;return a?-1:o||r?r:y}},He={forEach:Be(0),map:Be(1),filter:Be(2),some:Be(3),every:Be(4),find:Be(5),findIndex:Be(6)},je=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))},We=Object.defineProperty,Ye={},$e=function(e){throw e},ze=function(e,t){if(M(Ye,e))return Ye[e];t||(t={});var n=[][e],o=!!M(t,\"ACCESSORS\")&&t.ACCESSORS,s=M(t,0)?t[0]:$e,i=M(t,1)?t[1]:void 0;return Ye[e]=!!n&&!r((function(){if(o&&!a)return!0;var e={length:-1};o?We(e,1,{enumerable:!0,get:$e}):e[1]=1,n.call(e,s,i)}))},Je=He.forEach,Xe=je(\"forEach\"),Qe=ze(\"forEach\"),Ze=Xe&&Qe?[].forEach:function(e){return Je(this,e,arguments.length>1?arguments[1]:void 0)};ke({target:\"Array\",proto:!0,forced:[].forEach!=Ze},{forEach:Ze});var et=function(e,t,n,o){try{return o?t(A(n)[0],n[1]):t(n)}catch(a){var r=e.return;throw void 0!==r&&A(r.call(e)),a}},nt={},ot=qe(\"iterator\"),rt=Array.prototype,at=function(e){return void 0!==e&&(nt.Array===e||rt[ot]===e)},st=function(e,t,n){var o=m(t);o in e?N.f(e,o,u(0,n)):e[o]=n},it={};it[qe(\"toStringTag\")]=\"z\";var ct=\"[object z]\"===String(it),ut=qe(\"toStringTag\"),lt=\"Arguments\"==d(function(){return arguments}()),dt=ct?d:function(e){var t,n,o;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),ut))?n:lt?d(t):\"Object\"==(o=d(t))&&\"function\"==typeof t.callee?\"Arguments\":o},pt=qe(\"iterator\"),gt=function(e){if(null!=e)return e[pt]||e[\"@@iterator\"]||nt[dt(e)]},ht=function(e){var t,n,o,r,a,s,i=Le(e),c=\"function\"==typeof this?this:Array,u=arguments.length,l=u>1?arguments[1]:void 0,d=void 0!==l,p=gt(i),g=0;if(d&&(l=Re(l,u>2?arguments[2]:void 0,2)),null==p||c==Array&&at(p))for(n=new c(t=ie(i.length));t>g;g++)s=d?l(i[g],g):i[g],st(n,g,s);else for(a=(r=p.call(i)).next,n=new c;!(o=a.call(r)).done;g++)s=d?et(r,l,[o.value,g],!0):o.value,st(n,g,s);return n.length=g,n},ft=qe(\"iterator\"),_t=!1;try{var mt=0,vt={next:function(){return{done:!!mt++}},return:function(){_t=!0}};vt[ft]=function(){return this},Array.from(vt,(function(){throw 2}))}catch(sI){}var Mt=function(e,t){if(!t&&!_t)return!1;var n=!1;try{var o={};o[ft]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(sI){}return n},yt=!Mt((function(e){Array.from(e)}));ke({target:\"Array\",stat:!0,forced:yt},{from:ht});var It,Et=Object.keys||function(e){return he(e,fe)},Tt=a?Object.defineProperties:function(e,t){A(e);for(var n,o=Et(t),r=o.length,a=0;r>a;)N.f(e,n=o[a++],t[n]);return e},St=ne(\"document\",\"documentElement\"),Ct=H(\"IE_PROTO\"),At=function(){},Dt=function(e){return\"<script>\"+e+\"<\\\\/script>\"},Nt=function(){try{It=document.domain&&new ActiveXObject(\"htmlfile\")}catch(sI){}var e,t;Nt=It?function(e){e.write(Dt(\"\")),e.close();var t=e.parentWindow.Object;return e=null,t}(It):((t=E(\"iframe\")).style.display=\"none\",St.appendChild(t),t.src=String(\"javascript:\"),(e=t.contentWindow.document).open(),e.write(Dt(\"document.F=Object\")),e.close(),e.F);for(var n=fe.length;n--;)delete Nt.prototype[fe[n]];return Nt()};j[Ct]=!0;var kt=Object.create||function(e,t){var n;return null!==e?(At.prototype=A(e),n=new At,At.prototype=null,n[Ct]=e):n=Nt(),void 0===t?n:Tt(n,t)};ke({target:\"Object\",stat:!0,sham:!a},{create:kt});var Ot=r((function(){Et(1)}));ke({target:\"Object\",stat:!0,forced:Ot},{keys:function(e){return Et(Le(e))}});var Rt=\"\\\\t\\\\n\\\\v\\\\f\\\\r                　\\\\u2028\\\\u2029\\\\ufeff\",Lt=\"[\"+Rt+\"]\",bt=RegExp(\"^\"+Lt+Lt+\"*\"),wt=RegExp(Lt+Lt+\"*$\"),Gt=function(e){return function(t){var n=String(h(t));return 1&e&&(n=n.replace(bt,\"\")),2&e&&(n=n.replace(wt,\"\")),n}},Pt={start:Gt(1),end:Gt(2),trim:Gt(3)},Ut=Pt.trim,Ft=o.parseInt,qt=/^[+-]?0[Xx]/,xt=8!==Ft(Rt+\"08\")||22!==Ft(Rt+\"0x16\")?function(e,t){var n=Ut(String(e));return Ft(n,t>>>0||(qt.test(n)?16:10))}:Ft;ke({global:!0,forced:parseInt!=xt},{parseInt:xt});var Vt,Kt,Bt,Ht=function(e){return function(t,n){var o,r,a=String(h(t)),s=ae(n),i=a.length;return s<0||s>=i?e?\"\":void 0:(o=a.charCodeAt(s))<55296||o>56319||s+1===i||(r=a.charCodeAt(s+1))<56320||r>57343?e?a.charAt(s):o:e?a.slice(s,s+2):r-56320+(o-55296<<10)+65536}},jt={codeAt:Ht(!1),charAt:Ht(!0)},Wt=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Yt=H(\"IE_PROTO\"),$t=Object.prototype,zt=Wt?Object.getPrototypeOf:function(e){return e=Le(e),M(e,Yt)?e[Yt]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?$t:null},Jt=qe(\"iterator\"),Xt=!1;[].keys&&(\"next\"in(Bt=[].keys())?(Kt=zt(zt(Bt)))!==Object.prototype&&(Vt=Kt):Xt=!0),null==Vt&&(Vt={}),M(Vt,Jt)||k(Vt,Jt,(function(){return this}));var Qt={IteratorPrototype:Vt,BUGGY_SAFARI_ITERATORS:Xt},Zt=N.f,en=qe(\"toStringTag\"),tn=function(e,t,n){e&&!M(e=n?e:e.prototype,en)&&Zt(e,en,{configurable:!0,value:t})},nn=Qt.IteratorPrototype,on=function(){return this},rn=function(e,t,n){var o=t+\" Iterator\";return e.prototype=kt(nn,{next:u(1,n)}),tn(e,o,!1),nt[o]=on,e},an=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set).call(n,[]),t=n instanceof Array}catch(sI){}return function(n,o){return A(n),function(e){if(!_(e)&&null!==e)throw TypeError(\"Can\\'t set \"+String(e)+\" as a prototype\")}(o),t?e.call(n,o):n.__proto__=o,n}}():void 0),sn=Qt.IteratorPrototype,cn=Qt.BUGGY_SAFARI_ITERATORS,un=qe(\"iterator\"),ln=function(){return this},dn=function(e,t,n,o,r,a,s){rn(n,t,o);var i,c,u,l=function(e){if(e===r&&f)return f;if(!cn&&e in g)return g[e];switch(e){case\"keys\":case\"values\":case\"entries\":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+\" Iterator\",p=!1,g=e.prototype,h=g[un]||g[\"@@iterator\"]||r&&g[r],f=!cn&&h||l(r),_=\"Array\"==t&&g.entries||h;if(_&&(i=zt(_.call(new e)),sn!==Object.prototype&&i.next&&(zt(i)!==sn&&(an?an(i,sn):\"function\"!=typeof i[un]&&k(i,un,ln)),tn(i,d,!0))),\"values\"==r&&h&&\"values\"!==h.name&&(p=!0,f=function(){return h.call(this)}),g[un]!==f&&k(g,un,f),nt[t]=f,r)if(c={values:l(\"values\"),keys:a?f:l(\"keys\"),entries:l(\"entries\")},s)for(u in c)(cn||p||!(u in g))&&Z(g,u,c[u]);else ke({target:t,proto:!0,forced:cn||p},c);return c},pn=jt.charAt,gn=Q.set,hn=Q.getterFor(\"String Iterator\");dn(String,\"String\",(function(e){gn(this,{type:\"String Iterator\",string:String(e),index:0})}),(function(){var e,t=hn(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=pn(n,o),t.index+=e.length,{value:e,done:!1})}));var fn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var _n in fn){var mn=o[_n],vn=mn&&mn.prototype;if(vn&&vn.forEach!==Ze)try{k(vn,\"forEach\",Ze)}catch(sI){vn.forEach=Ze}}function Mn(e){return(Mn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function yn(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function In(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function En(e,t,n){return t&&In(e.prototype,t),n&&In(e,n),e}function Tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){Tn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function An(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kn(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function On(e,t,n){return(On=kn()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&Nn(r,n.prototype),r}).apply(null,arguments)}function Rn(e){var t=\"function\"==typeof Map?new Map:void 0;return(Rn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return On(e,arguments,Dn(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Nn(o,e)})(e)}function Ln(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bn(e){if(void 0===e)throw new ReferenceError(\"this hasn\\'t been initialised - super() hasn\\'t been called\");return e}function wn(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?bn(e):t}function Gn(e){return function(){var t,n=Dn(e);if(kn()){var o=Dn(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return wn(this,t)}}function Pn(e,t){return Fn(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(o=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(c){r=!0,a=c}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}return n}(e,t)||xn(e,t)||Kn()}function Un(e){return function(e){if(Array.isArray(e))return Vn(e)}(e)||qn(e)||xn(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Fn(e){if(Array.isArray(e))return e}function qn(e){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function xn(e,t){if(e){if(\"string\"==typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(e,t):void 0}}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Kn(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function Bn(e){if(\"undefined\"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=xn(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,r,a=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}var Hn,jn,Wn={SDK_READY:\"sdkStateReady\",SDK_NOT_READY:\"sdkStateNotReady\",SDK_DESTROY:\"sdkDestroy\",MESSAGE_RECEIVED:\"onMessageReceived\",MESSAGE_MODIFIED:\"onMessageModified\",MESSAGE_REVOKED:\"onMessageRevoked\",MESSAGE_READ_BY_PEER:\"onMessageReadByPeer\",MESSAGE_READ_RECEIPT_RECEIVED:\"onMessageReadReceiptReceived\",CONVERSATION_LIST_UPDATED:\"onConversationListUpdated\",GROUP_LIST_UPDATED:\"onGroupListUpdated\",GROUP_SYSTEM_NOTICE_RECEIVED:\"receiveGroupSystemNotice\",GROUP_ATTRIBUTES_UPDATED:\"groupAttributesUpdated\",PROFILE_UPDATED:\"onProfileUpdated\",BLACKLIST_UPDATED:\"blacklistUpdated\",FRIEND_LIST_UPDATED:\"onFriendListUpdated\",FRIEND_GROUP_LIST_UPDATED:\"onFriendGroupListUpdated\",FRIEND_APPLICATION_LIST_UPDATED:\"onFriendApplicationListUpdated\",KICKED_OUT:\"kickedOut\",ERROR:\"error\",NET_STATE_CHANGE:\"netStateChange\",SDK_RELOAD:\"sdkReload\"},Yn={MSG_TEXT:\"TIMTextElem\",MSG_IMAGE:\"TIMImageElem\",MSG_SOUND:\"TIMSoundElem\",MSG_AUDIO:\"TIMSoundElem\",MSG_FILE:\"TIMFileElem\",MSG_FACE:\"TIMFaceElem\",MSG_VIDEO:\"TIMVideoFileElem\",MSG_GEO:\"TIMLocationElem\",MSG_LOCATION:\"TIMLocationElem\",MSG_GRP_TIP:\"TIMGroupTipElem\",MSG_GRP_SYS_NOTICE:\"TIMGroupSystemNoticeElem\",MSG_CUSTOM:\"TIMCustomElem\",MSG_MERGER:\"TIMRelayElem\",MSG_PRIORITY_HIGH:\"High\",MSG_PRIORITY_NORMAL:\"Normal\",MSG_PRIORITY_LOW:\"Low\",MSG_PRIORITY_LOWEST:\"Lowest\",CONV_C2C:\"C2C\",CONV_GROUP:\"GROUP\",CONV_SYSTEM:\"@TIM#SYSTEM\",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,GRP_PRIVATE:\"Private\",GRP_WORK:\"Private\",GRP_PUBLIC:\"Public\",GRP_CHATROOM:\"ChatRoom\",GRP_MEETING:\"ChatRoom\",GRP_AVCHATROOM:\"AVChatRoom\",GRP_COMMUNITY:\"Community\",GRP_MBR_ROLE_OWNER:\"Owner\",GRP_MBR_ROLE_ADMIN:\"Admin\",GRP_MBR_ROLE_MEMBER:\"Member\",GRP_MBR_ROLE_CUSTOM:\"Custom\",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,MSG_REMIND_ACPT_AND_NOTE:\"AcceptAndNotify\",MSG_REMIND_ACPT_NOT_NOTE:\"AcceptNotNotify\",MSG_REMIND_DISCARD:\"Discard\",GENDER_UNKNOWN:\"Gender_Type_Unknown\",GENDER_FEMALE:\"Gender_Type_Female\",GENDER_MALE:\"Gender_Type_Male\",KICKED_OUT_MULT_ACCOUNT:\"multipleAccount\",KICKED_OUT_MULT_DEVICE:\"multipleDevice\",KICKED_OUT_USERSIG_EXPIRED:\"userSigExpired\",ALLOW_TYPE_ALLOW_ANY:\"AllowType_Type_AllowAny\",ALLOW_TYPE_NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_TYPE_DENY_ANY:\"AllowType_Type_DenyAny\",FORBID_TYPE_NONE:\"AdminForbid_Type_None\",FORBID_TYPE_SEND_OUT:\"AdminForbid_Type_SendOut\",JOIN_OPTIONS_FREE_ACCESS:\"FreeAccess\",JOIN_OPTIONS_NEED_PERMISSION:\"NeedPermission\",JOIN_OPTIONS_DISABLE_APPLY:\"DisableApply\",JOIN_STATUS_SUCCESS:\"JoinedSuccess\",JOIN_STATUS_ALREADY_IN_GROUP:\"AlreadyInGroup\",JOIN_STATUS_WAIT_APPROVAL:\"WaitAdminApproval\",GRP_PROFILE_OWNER_ID:\"ownerID\",GRP_PROFILE_CREATE_TIME:\"createTime\",GRP_PROFILE_LAST_INFO_TIME:\"lastInfoTime\",GRP_PROFILE_MEMBER_NUM:\"memberNum\",GRP_PROFILE_MAX_MEMBER_NUM:\"maxMemberNum\",GRP_PROFILE_JOIN_OPTION:\"joinOption\",GRP_PROFILE_INTRODUCTION:\"introduction\",GRP_PROFILE_NOTIFICATION:\"notification\",GRP_PROFILE_MUTE_ALL_MBRS:\"muteAllMembers\",SNS_ADD_TYPE_SINGLE:\"Add_Type_Single\",SNS_ADD_TYPE_BOTH:\"Add_Type_Both\",SNS_DELETE_TYPE_SINGLE:\"Delete_Type_Single\",SNS_DELETE_TYPE_BOTH:\"Delete_Type_Both\",SNS_APPLICATION_TYPE_BOTH:\"Pendency_Type_Both\",SNS_APPLICATION_SENT_TO_ME:\"Pendency_Type_ComeIn\",SNS_APPLICATION_SENT_BY_ME:\"Pendency_Type_SendOut\",SNS_APPLICATION_AGREE:\"Response_Action_Agree\",SNS_APPLICATION_AGREE_AND_ADD:\"Response_Action_AgreeAndAdd\",SNS_CHECK_TYPE_BOTH:\"CheckResult_Type_Both\",SNS_CHECK_TYPE_SINGLE:\"CheckResult_Type_Single\",SNS_TYPE_NO_RELATION:\"CheckResult_Type_NoRelation\",SNS_TYPE_A_WITH_B:\"CheckResult_Type_AWithB\",SNS_TYPE_B_WITH_A:\"CheckResult_Type_BWithA\",SNS_TYPE_BOTH_WAY:\"CheckResult_Type_BothWay\",NET_STATE_CONNECTED:\"connected\",NET_STATE_CONNECTING:\"connecting\",NET_STATE_DISCONNECTED:\"disconnected\",MSG_AT_ALL:\"__kImSDK_MesssageAtALL__\",READ_ALL_C2C_MSG:\"readAllC2CMessage\",READ_ALL_GROUP_MSG:\"readAllGroupMessage\",READ_ALL_MSG:\"readAllMessage\"},$n=ne(\"navigator\",\"userAgent\")||\"\",zn=o.process,Jn=zn&&zn.versions,Xn=Jn&&Jn.v8;Xn?jn=(Hn=Xn.split(\".\"))[0]+Hn[1]:$n&&(!(Hn=$n.match(/Edge\\\\/(\\\\d+)/))||Hn[1]>=74)&&(Hn=$n.match(/Chrome\\\\/(\\\\d+)/))&&(jn=Hn[1]);var Qn=jn&&+jn,Zn=qe(\"species\"),eo=function(e){return Qn>=51||!r((function(){var t=[];return(t.constructor={})[Zn]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},to=He.map,no=eo(\"map\"),oo=ze(\"map\");ke({target:\"Array\",proto:!0,forced:!no||!oo},{map:function(e){return to(this,e,arguments.length>1?arguments[1]:void 0)}});var ro=[].slice,ao={},so=function(e,t,n){if(!(t in ao)){for(var o=[],r=0;r<t;r++)o[r]=\"a[\"+r+\"]\";ao[t]=Function(\"C,a\",\"return new C(\"+o.join(\",\")+\")\")}return ao[t](e,n)},io=Function.bind||function(e){var t=Oe(this),n=ro.call(arguments,1),o=function(){var r=n.concat(ro.call(arguments));return this instanceof o?so(t,r.length,r):t.apply(e,r)};return _(t.prototype)&&(o.prototype=t.prototype),o};ke({target:\"Function\",proto:!0},{bind:io});var co=function(){function e(){yn(this,e),this.cache=[],this.options=null}return En(e,[{key:\"use\",value:function(e){if(\"function\"!=typeof e)throw\"middleware must be a function\";return this.cache.push(e),this}},{key:\"next\",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:\"run\",value:function(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}]),e}(),uo=qe(\"isConcatSpreadable\"),lo=Qn>=51||!r((function(){var e=[];return e[uo]=!1,e.concat()[0]!==e})),po=eo(\"concat\"),go=function(e){if(!_(e))return!1;var t=e[uo];return void 0!==t?!!t:be(e)};ke({target:\"Array\",proto:!0,forced:!lo||!po},{concat:function(e){var t,n,o,r,a,s=Le(this),i=Ve(s,0),c=0;for(t=-1,o=arguments.length;t<o;t++)if(a=-1===t?s:arguments[t],go(a)){if(c+(r=ie(a.length))>9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");for(n=0;n<r;n++,c++)n in a&&st(i,c,a[n])}else{if(c>=9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");st(i,c++,a)}return i.length=c,i}});var ho=N.f,fo=Function.prototype,_o=fo.toString,mo=/^\\\\s*function ([^ (]*)/;a&&!(\"name\"in fo)&&ho(fo,\"name\",{configurable:!0,get:function(){try{return _o.call(this).match(mo)[1]}catch(sI){return\"\"}}});var vo=t((function(t,n){var o,r,a,s,i,c,u,l,d,p,g,h,f,_,m,v,M,y;t.exports=(o=\"function\"==typeof Promise,r=\"object\"==typeof self?self:e,a=\"undefined\"!=typeof Symbol,s=\"undefined\"!=typeof Map,i=\"undefined\"!=typeof Set,c=\"undefined\"!=typeof WeakMap,u=\"undefined\"!=typeof WeakSet,l=\"undefined\"!=typeof DataView,d=a&&void 0!==Symbol.iterator,p=a&&void 0!==Symbol.toStringTag,g=i&&\"function\"==typeof Set.prototype.entries,h=s&&\"function\"==typeof Map.prototype.entries,f=g&&Object.getPrototypeOf((new Set).entries()),_=h&&Object.getPrototypeOf((new Map).entries()),m=d&&\"function\"==typeof Array.prototype[Symbol.iterator],v=m&&Object.getPrototypeOf([][Symbol.iterator]()),M=d&&\"function\"==typeof String.prototype[Symbol.iterator],y=M&&Object.getPrototypeOf(\"\"[Symbol.iterator]()),function(e){var t=typeof e;if(\"object\"!==t)return t;if(null===e)return\"null\";if(e===r)return\"global\";if(Array.isArray(e)&&(!1===p||!(Symbol.toStringTag in e)))return\"Array\";if(\"object\"==typeof window&&null!==window){if(\"object\"==typeof window.location&&e===window.location)return\"Location\";if(\"object\"==typeof window.document&&e===window.document)return\"Document\";if(\"object\"==typeof window.navigator){if(\"object\"==typeof window.navigator.mimeTypes&&e===window.navigator.mimeTypes)return\"MimeTypeArray\";if(\"object\"==typeof window.navigator.plugins&&e===window.navigator.plugins)return\"PluginArray\"}if((\"function\"==typeof window.HTMLElement||\"object\"==typeof window.HTMLElement)&&e instanceof window.HTMLElement){if(\"BLOCKQUOTE\"===e.tagName)return\"HTMLQuoteElement\";if(\"TD\"===e.tagName)return\"HTMLTableDataCellElement\";if(\"TH\"===e.tagName)return\"HTMLTableHeaderCellElement\"}}var n=p&&e[Symbol.toStringTag];if(\"string\"==typeof n)return n;var a=Object.getPrototypeOf(e);return a===RegExp.prototype?\"RegExp\":a===Date.prototype?\"Date\":o&&a===Promise.prototype?\"Promise\":i&&a===Set.prototype?\"Set\":s&&a===Map.prototype?\"Map\":u&&a===WeakSet.prototype?\"WeakSet\":c&&a===WeakMap.prototype?\"WeakMap\":l&&a===DataView.prototype?\"DataView\":s&&a===_?\"Map Iterator\":i&&a===f?\"Set Iterator\":m&&a===v?\"Array Iterator\":M&&a===y?\"String Iterator\":null===a?\"Object\":Object.prototype.toString.call(e).slice(8,-1)})}));ke({target:\"Array\",stat:!0},{isArray:be});var Mo=qe(\"unscopables\"),yo=Array.prototype;null==yo[Mo]&&N.f(yo,Mo,{configurable:!0,value:kt(null)});var Io=function(e){yo[Mo][e]=!0},Eo=He.find,To=!0,So=ze(\"find\");\"find\"in[]&&Array(1).find((function(){To=!1})),ke({target:\"Array\",proto:!0,forced:To||!So},{find:function(e){return Eo(this,e,arguments.length>1?arguments[1]:void 0)}}),Io(\"find\");var Co=pe.includes,Ao=ze(\"indexOf\",{ACCESSORS:!0,1:0});ke({target:\"Array\",proto:!0,forced:!Ao},{includes:function(e){return Co(this,e,arguments.length>1?arguments[1]:void 0)}}),Io(\"includes\");var Do=pe.indexOf,No=[].indexOf,ko=!!No&&1/[1].indexOf(1,-0)<0,Oo=je(\"indexOf\"),Ro=ze(\"indexOf\",{ACCESSORS:!0,1:0});ke({target:\"Array\",proto:!0,forced:ko||!Oo||!Ro},{indexOf:function(e){return ko?No.apply(this,arguments)||0:Do(this,e,arguments.length>1?arguments[1]:void 0)}});var Lo=Q.set,bo=Q.getterFor(\"Array Iterator\"),wo=dn(Array,\"Array\",(function(e,t){Lo(this,{type:\"Array Iterator\",target:f(e),index:0,kind:t})}),(function(){var e=bo(this),t=e.target,n=e.kind,o=e.index++;return!t||o>=t.length?(e.target=void 0,{value:void 0,done:!0}):\"keys\"==n?{value:o,done:!1}:\"values\"==n?{value:t[o],done:!1}:{value:[o,t[o]],done:!1}}),\"values\");nt.Arguments=nt.Array,Io(\"keys\"),Io(\"values\"),Io(\"entries\");var Go=[].join,Po=g!=Object,Uo=je(\"join\",\",\");ke({target:\"Array\",proto:!0,forced:Po||!Uo},{join:function(e){return Go.call(f(this),void 0===e?\",\":e)}});var Fo=eo(\"slice\"),qo=ze(\"slice\",{ACCESSORS:!0,0:0,1:2}),xo=qe(\"species\"),Vo=[].slice,Ko=Math.max;ke({target:\"Array\",proto:!0,forced:!Fo||!qo},{slice:function(e,t){var n,o,r,a=f(this),s=ie(a.length),i=le(e,s),c=le(void 0===t?s:t,s);if(be(a)&&(\"function\"!=typeof(n=a.constructor)||n!==Array&&!be(n.prototype)?_(n)&&null===(n=n[xo])&&(n=void 0):n=void 0,n===Array||void 0===n))return Vo.call(a,i,c);for(o=new(void 0===n?Array:n)(Ko(c-i,0)),r=0;i<c;i++,r++)i in a&&st(o,r,a[i]);return o.length=r,o}}),ke({target:\"Date\",stat:!0},{now:function(){return(new Date).getTime()}});var Bo=\"\".repeat||function(e){var t=String(h(this)),n=\"\",o=ae(e);if(o<0||Infinity==o)throw RangeError(\"Wrong number of repetitions\");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n},Ho=Math.ceil,jo=function(e){return function(t,n,o){var r,a,s=String(h(t)),i=s.length,c=void 0===o?\" \":String(o),u=ie(n);return u<=i||\"\"==c?s:(r=u-i,(a=Bo.call(c,Ho(r/c.length))).length>r&&(a=a.slice(0,r)),e?s+a:a+s)}},Wo={start:jo(!1),end:jo(!0)}.start,Yo=Math.abs,$o=Date.prototype,zo=$o.getTime,Jo=$o.toISOString,Xo=r((function(){return\"0385-07-25T07:06:39.999Z\"!=Jo.call(new Date(-50000000000001))}))||!r((function(){Jo.call(new Date(NaN))}))?function(){if(!isFinite(zo.call(this)))throw RangeError(\"Invalid time value\");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?\"-\":e>9999?\"+\":\"\";return n+Wo(Yo(e),n?6:4,0)+\"-\"+Wo(this.getUTCMonth()+1,2,0)+\"-\"+Wo(this.getUTCDate(),2,0)+\"T\"+Wo(this.getUTCHours(),2,0)+\":\"+Wo(this.getUTCMinutes(),2,0)+\":\"+Wo(this.getUTCSeconds(),2,0)+\".\"+Wo(t,3,0)+\"Z\"}:Jo;ke({target:\"Date\",proto:!0,forced:Date.prototype.toISOString!==Xo},{toISOString:Xo});var Qo=Date.prototype,Zo=Qo.toString,er=Qo.getTime;new Date(NaN)+\"\"!=\"Invalid Date\"&&Z(Qo,\"toString\",(function(){var e=er.call(this);return e==e?Zo.call(this):\"Invalid Date\"}));var tr=function(e,t,n){var o,r;return an&&\"function\"==typeof(o=t.constructor)&&o!==n&&_(r=o.prototype)&&r!==n.prototype&&an(e,r),e},nr=me.f,or=C.f,rr=N.f,ar=Pt.trim,sr=o.Number,ir=sr.prototype,cr=\"Number\"==d(kt(ir)),ur=function(e){var t,n,o,r,a,s,i,c,u=m(e,!1);if(\"string\"==typeof u&&u.length>2)if(43===(t=(u=ar(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+u}for(s=(a=u.slice(2)).length,i=0;i<s;i++)if((c=a.charCodeAt(i))<48||c>r)return NaN;return parseInt(a,o)}return+u};if(De(\"Number\",!sr(\" 0o1\")||!sr(\"0b1\")||sr(\"+0x1\"))){for(var lr,dr=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof dr&&(cr?r((function(){ir.valueOf.call(n)})):\"Number\"!=d(n))?tr(new sr(ur(t)),n,dr):ur(t)},pr=a?nr(sr):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),gr=0;pr.length>gr;gr++)M(sr,lr=pr[gr])&&!M(dr,lr)&&rr(dr,lr,or(sr,lr));dr.prototype=ir,ir.constructor=dr,Z(o,\"Number\",dr)}var hr=me.f,fr={}.toString,_r=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],mr={f:function(e){return _r&&\"[object Window]\"==fr.call(e)?function(e){try{return hr(e)}catch(sI){return _r.slice()}}(e):hr(f(e))}},vr=mr.f,Mr=r((function(){return!Object.getOwnPropertyNames(1)}));ke({target:\"Object\",stat:!0,forced:Mr},{getOwnPropertyNames:vr});var yr=r((function(){zt(1)}));ke({target:\"Object\",stat:!0,forced:yr,sham:!Wt},{getPrototypeOf:function(e){return zt(Le(e))}});var Ir=ct?{}.toString:function(){return\"[object \"+dt(this)+\"]\"};ct||Z(Object.prototype,\"toString\",Ir,{unsafe:!0});var Er,Tr,Sr,Cr=o.Promise,Ar=function(e,t,n){for(var o in t)Z(e,o,t[o],n);return e},Dr=qe(\"species\"),Nr=function(e){var t=ne(e),n=N.f;a&&t&&!t[Dr]&&n(t,Dr,{configurable:!0,get:function(){return this}})},kr=function(e,t,n){if(!(e instanceof t))throw TypeError(\"Incorrect \"+(n?n+\" \":\"\")+\"invocation\");return e},Or=t((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,o,r,a){var s,i,c,u,l,d,p,g=Re(n,o,r?2:1);if(a)s=e;else{if(\"function\"!=typeof(i=gt(e)))throw TypeError(\"Target is not iterable\");if(at(i)){for(c=0,u=ie(e.length);u>c;c++)if((l=r?g(A(p=e[c])[0],p[1]):g(e[c]))&&l instanceof t)return l;return new t(!1)}s=i.call(e)}for(d=s.next;!(p=d.call(s)).done;)if(\"object\"==typeof(l=et(s,g,p.value,r))&&l&&l instanceof t)return l;return new t(!1)}).stop=function(e){return new t(!0,e)}})),Rr=qe(\"species\"),Lr=function(e,t){var n,o=A(e).constructor;return void 0===o||null==(n=A(o)[Rr])?t:Oe(n)},br=/(iphone|ipod|ipad).*applewebkit/i.test($n),wr=o.location,Gr=o.setImmediate,Pr=o.clearImmediate,Ur=o.process,Fr=o.MessageChannel,qr=o.Dispatch,xr=0,Vr={},Kr=function(e){if(Vr.hasOwnProperty(e)){var t=Vr[e];delete Vr[e],t()}},Br=function(e){return function(){Kr(e)}},Hr=function(e){Kr(e.data)},jr=function(e){o.postMessage(e+\"\",wr.protocol+\"//\"+wr.host)};Gr&&Pr||(Gr=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Vr[++xr]=function(){(\"function\"==typeof e?e:Function(e)).apply(void 0,t)},Er(xr),xr},Pr=function(e){delete Vr[e]},\"process\"==d(Ur)?Er=function(e){Ur.nextTick(Br(e))}:qr&&qr.now?Er=function(e){qr.now(Br(e))}:Fr&&!br?(Sr=(Tr=new Fr).port2,Tr.port1.onmessage=Hr,Er=Re(Sr.postMessage,Sr,1)):!o.addEventListener||\"function\"!=typeof postMessage||o.importScripts||r(jr)?Er=\"onreadystatechange\"in E(\"script\")?function(e){St.appendChild(E(\"script\")).onreadystatechange=function(){St.removeChild(this),Kr(e)}}:function(e){setTimeout(Br(e),0)}:(Er=jr,o.addEventListener(\"message\",Hr,!1)));var Wr,Yr,$r,zr,Jr,Xr,Qr,Zr,ea={set:Gr,clear:Pr},ta=C.f,na=ea.set,oa=o.MutationObserver||o.WebKitMutationObserver,ra=o.process,aa=o.Promise,sa=\"process\"==d(ra),ia=ta(o,\"queueMicrotask\"),ca=ia&&ia.value;ca||(Wr=function(){var e,t;for(sa&&(e=ra.domain)&&e.exit();Yr;){t=Yr.fn,Yr=Yr.next;try{t()}catch(sI){throw Yr?zr():$r=void 0,sI}}$r=void 0,e&&e.enter()},sa?zr=function(){ra.nextTick(Wr)}:oa&&!br?(Jr=!0,Xr=document.createTextNode(\"\"),new oa(Wr).observe(Xr,{characterData:!0}),zr=function(){Xr.data=Jr=!Jr}):aa&&aa.resolve?(Qr=aa.resolve(void 0),Zr=Qr.then,zr=function(){Zr.call(Qr,Wr)}):zr=function(){na.call(o,Wr)});var ua,la,da,pa,ga=ca||function(e){var t={fn:e,next:void 0};$r&&($r.next=t),Yr||(Yr=t,zr()),$r=t},ha=function(e){var t,n;this.promise=new e((function(e,o){if(void 0!==t||void 0!==n)throw TypeError(\"Bad Promise constructor\");t=e,n=o})),this.resolve=Oe(t),this.reject=Oe(n)},fa={f:function(e){return new ha(e)}},_a=function(e,t){if(A(e),_(t)&&t.constructor===e)return t;var n=fa.f(e);return(0,n.resolve)(t),n.promise},ma=function(e){try{return{error:!1,value:e()}}catch(sI){return{error:!0,value:sI}}},va=ea.set,Ma=qe(\"species\"),ya=\"Promise\",Ia=Q.get,Ea=Q.set,Ta=Q.getterFor(ya),Sa=Cr,Ca=o.TypeError,Aa=o.document,Da=o.process,Na=ne(\"fetch\"),ka=fa.f,Oa=ka,Ra=\"process\"==d(Da),La=!!(Aa&&Aa.createEvent&&o.dispatchEvent),ba=De(ya,(function(){if(!(P(Sa)!==String(Sa))){if(66===Qn)return!0;if(!Ra&&\"function\"!=typeof PromiseRejectionEvent)return!0}if(Qn>=51&&/native code/.test(Sa))return!1;var e=Sa.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Ma]=t,!(e.then((function(){}))instanceof t)})),wa=ba||!Mt((function(e){Sa.all(e).catch((function(){}))})),Ga=function(e){var t;return!(!_(e)||\"function\"!=typeof(t=e.then))&&t},Pa=function(e,t,n){if(!t.notified){t.notified=!0;var o=t.reactions;ga((function(){for(var r=t.value,a=1==t.state,s=0;o.length>s;){var i,c,u,l=o[s++],d=a?l.ok:l.fail,p=l.resolve,g=l.reject,h=l.domain;try{d?(a||(2===t.rejection&&xa(e,t),t.rejection=1),!0===d?i=r:(h&&h.enter(),i=d(r),h&&(h.exit(),u=!0)),i===l.promise?g(Ca(\"Promise-chain cycle\")):(c=Ga(i))?c.call(i,p,g):p(i)):g(r)}catch(sI){h&&!u&&h.exit(),g(sI)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Fa(e,t)}))}},Ua=function(e,t,n){var r,a;La?((r=Aa.createEvent(\"Event\")).promise=t,r.reason=n,r.initEvent(e,!1,!0),o.dispatchEvent(r)):r={promise:t,reason:n},(a=o[\"on\"+e])?a(r):\"unhandledrejection\"===e&&function(e,t){var n=o.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}(\"Unhandled promise rejection\",n)},Fa=function(e,t){va.call(o,(function(){var n,o=t.value;if(qa(t)&&(n=ma((function(){Ra?Da.emit(\"unhandledRejection\",o,e):Ua(\"unhandledrejection\",e,o)})),t.rejection=Ra||qa(t)?2:1,n.error))throw n.value}))},qa=function(e){return 1!==e.rejection&&!e.parent},xa=function(e,t){va.call(o,(function(){Ra?Da.emit(\"rejectionHandled\",e):Ua(\"rejectionhandled\",e,t.value)}))},Va=function(e,t,n,o){return function(r){e(t,n,r,o)}},Ka=function(e,t,n,o){t.done||(t.done=!0,o&&(t=o),t.value=n,t.state=2,Pa(e,t,!0))},Ba=function(e,t,n,o){if(!t.done){t.done=!0,o&&(t=o);try{if(e===n)throw Ca(\"Promise can\\'t be resolved itself\");var r=Ga(n);r?ga((function(){var o={done:!1};try{r.call(n,Va(Ba,e,o,t),Va(Ka,e,o,t))}catch(sI){Ka(e,o,sI,t)}})):(t.value=n,t.state=1,Pa(e,t,!1))}catch(sI){Ka(e,{done:!1},sI,t)}}};ba&&(Sa=function(e){kr(this,Sa,ya),Oe(e),ua.call(this);var t=Ia(this);try{e(Va(Ba,this,t),Va(Ka,this,t))}catch(sI){Ka(this,t,sI)}},(ua=function(e){Ea(this,{type:ya,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ar(Sa.prototype,{then:function(e,t){var n=Ta(this),o=ka(Lr(this,Sa));return o.ok=\"function\"!=typeof e||e,o.fail=\"function\"==typeof t&&t,o.domain=Ra?Da.domain:void 0,n.parent=!0,n.reactions.push(o),0!=n.state&&Pa(this,n,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),la=function(){var e=new ua,t=Ia(e);this.promise=e,this.resolve=Va(Ba,e,t),this.reject=Va(Ka,e,t)},fa.f=ka=function(e){return e===Sa||e===da?new la(e):Oa(e)},\"function\"==typeof Cr&&(pa=Cr.prototype.then,Z(Cr.prototype,\"then\",(function(e,t){var n=this;return new Sa((function(e,t){pa.call(n,e,t)})).then(e,t)}),{unsafe:!0}),\"function\"==typeof Na&&ke({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return _a(Sa,Na.apply(o,arguments))}}))),ke({global:!0,wrap:!0,forced:ba},{Promise:Sa}),tn(Sa,ya,!1),Nr(ya),da=ne(ya),ke({target:ya,stat:!0,forced:ba},{reject:function(e){var t=ka(this);return t.reject.call(void 0,e),t.promise}}),ke({target:ya,stat:!0,forced:ba},{resolve:function(e){return _a(this,e)}}),ke({target:ya,stat:!0,forced:wa},{all:function(e){var t=this,n=ka(t),o=n.resolve,r=n.reject,a=ma((function(){var n=Oe(t.resolve),a=[],s=0,i=1;Or(e,(function(e){var c=s++,u=!1;a.push(void 0),i++,n.call(t,e).then((function(e){u||(u=!0,a[c]=e,--i||o(a))}),r)})),--i||o(a)}));return a.error&&r(a.value),n.promise},race:function(e){var t=this,n=ka(t),o=n.reject,r=ma((function(){var r=Oe(t.resolve);Or(e,(function(e){r.call(t,e).then(n.resolve,o)}))}));return r.error&&o(r.value),n.promise}});var Ha=function(){var e=A(this),t=\"\";return e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),e.dotAll&&(t+=\"s\"),e.unicode&&(t+=\"u\"),e.sticky&&(t+=\"y\"),t};function ja(e,t){return RegExp(e,t)}var Wa,Ya,$a={UNSUPPORTED_Y:r((function(){var e=ja(\"a\",\"y\");return e.lastIndex=2,null!=e.exec(\"abcd\")})),BROKEN_CARET:r((function(){var e=ja(\"^r\",\"gy\");return e.lastIndex=2,null!=e.exec(\"str\")}))},za=RegExp.prototype.exec,Ja=String.prototype.replace,Xa=za,Qa=(Wa=/a/,Ya=/b*/g,za.call(Wa,\"a\"),za.call(Ya,\"a\"),0!==Wa.lastIndex||0!==Ya.lastIndex),Za=$a.UNSUPPORTED_Y||$a.BROKEN_CARET,es=void 0!==/()??/.exec(\"\")[1];(Qa||es||Za)&&(Xa=function(e){var t,n,o,r,a=this,s=Za&&a.sticky,i=Ha.call(a),c=a.source,u=0,l=e;return s&&(-1===(i=i.replace(\"y\",\"\")).indexOf(\"g\")&&(i+=\"g\"),l=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&\"\\\\n\"!==e[a.lastIndex-1])&&(c=\"(?: \"+c+\")\",l=\" \"+l,u++),n=new RegExp(\"^(?:\"+c+\")\",i)),es&&(n=new RegExp(\"^\"+c+\"$(?!\\\\\\\\s)\",i)),Qa&&(t=a.lastIndex),o=za.call(s?n:a,l),s?o?(o.input=o.input.slice(u),o[0]=o[0].slice(u),o.index=a.lastIndex,a.lastIndex+=o[0].length):a.lastIndex=0:Qa&&o&&(a.lastIndex=a.global?o.index+o[0].length:t),es&&o&&o.length>1&&Ja.call(o[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(o[r]=void 0)})),o});var ts=Xa;ke({target:\"RegExp\",proto:!0,forced:/./.exec!==ts},{exec:ts});var ns=RegExp.prototype,os=ns.toString,rs=r((function(){return\"/a/b\"!=os.call({source:\"a\",flags:\"b\"})})),as=\"toString\"!=os.name;(rs||as)&&Z(RegExp.prototype,\"toString\",(function(){var e=A(this),t=String(e.source),n=e.flags;return\"/\"+t+\"/\"+String(void 0===n&&e instanceof RegExp&&!(\"flags\"in ns)?Ha.call(e):n)}),{unsafe:!0});var ss=jt.codeAt;ke({target:\"String\",proto:!0},{codePointAt:function(e){return ss(this,e)}});var is=qe(\"match\"),cs=function(e){var t;return _(e)&&(void 0!==(t=e[is])?!!t:\"RegExp\"==d(e))},us=function(e){if(cs(e))throw TypeError(\"The method doesn\\'t accept regular expressions\");return e},ls=qe(\"match\"),ds=function(e){var t=/./;try{\"/./\"[e](t)}catch(n){try{return t[ls]=!1,\"/./\"[e](t)}catch(o){}}return!1};ke({target:\"String\",proto:!0,forced:!ds(\"includes\")},{includes:function(e){return!!~String(h(this)).indexOf(us(e),arguments.length>1?arguments[1]:void 0)}});var ps=qe(\"species\"),gs=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:\"7\"},e},\"7\"!==\"\".replace(e,\"$<a>\")})),hs=\"$0\"===\"a\".replace(/./,\"$0\"),fs=qe(\"replace\"),_s=!!/./[fs]&&\"\"===/./[fs](\"a\",\"$0\"),ms=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n=\"ab\".split(e);return 2!==n.length||\"a\"!==n[0]||\"b\"!==n[1]})),vs=function(e,t,n,o){var a=qe(e),s=!r((function(){var t={};return t[a]=function(){return 7},7!=\"\"[e](t)})),i=s&&!r((function(){var t=!1,n=/a/;return\"split\"===e&&((n={}).constructor={},n.constructor[ps]=function(){return n},n.flags=\"\",n[a]=/./[a]),n.exec=function(){return t=!0,null},n[a](\"\"),!t}));if(!s||!i||\"replace\"===e&&(!gs||!hs||_s)||\"split\"===e&&!ms){var c=/./[a],u=n(a,\"\"[e],(function(e,t,n,o,r){return t.exec===ts?s&&!r?{done:!0,value:c.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}),{REPLACE_KEEPS_$0:hs,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:_s}),l=u[0],d=u[1];Z(String.prototype,e,l),Z(RegExp.prototype,a,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}o&&k(RegExp.prototype[a],\"sham\",!0)},Ms=jt.charAt,ys=function(e,t,n){return t+(n?Ms(e,t).length:1)},Is=function(e,t){var n=e.exec;if(\"function\"==typeof n){var o=n.call(e,t);if(\"object\"!=typeof o)throw TypeError(\"RegExp exec method returned something other than an Object or null\");return o}if(\"RegExp\"!==d(e))throw TypeError(\"RegExp#exec called on incompatible receiver\");return ts.call(e,t)};vs(\"match\",1,(function(e,t,n){return[function(t){var n=h(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,n):new RegExp(t)[e](String(n))},function(e){var o=n(t,e,this);if(o.done)return o.value;var r=A(e),a=String(this);if(!r.global)return Is(r,a);var s=r.unicode;r.lastIndex=0;for(var i,c=[],u=0;null!==(i=Is(r,a));){var l=String(i[0]);c[u]=l,\"\"===l&&(r.lastIndex=ys(a,ie(r.lastIndex),s)),u++}return 0===u?null:c}]}));var Es=Math.max,Ts=Math.min,Ss=Math.floor,Cs=/\\\\$([$&\\'`]|\\\\d\\\\d?|<[^>]*>)/g,As=/\\\\$([$&\\'`]|\\\\d\\\\d?)/g;vs(\"replace\",2,(function(e,t,n,o){var r=o.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,a=o.REPLACE_KEEPS_$0,s=r?\"$\":\"$0\";return[function(n,o){var r=h(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,r,o):t.call(String(r),n,o)},function(e,o){if(!r&&a||\"string\"==typeof o&&-1===o.indexOf(s)){var c=n(t,e,this,o);if(c.done)return c.value}var u=A(e),l=String(this),d=\"function\"==typeof o;d||(o=String(o));var p=u.global;if(p){var g=u.unicode;u.lastIndex=0}for(var h=[];;){var f=Is(u,l);if(null===f)break;if(h.push(f),!p)break;\"\"===String(f[0])&&(u.lastIndex=ys(l,ie(u.lastIndex),g))}for(var _,m=\"\",v=0,M=0;M<h.length;M++){f=h[M];for(var y=String(f[0]),I=Es(Ts(ae(f.index),l.length),0),E=[],T=1;T<f.length;T++)E.push(void 0===(_=f[T])?_:String(_));var S=f.groups;if(d){var C=[y].concat(E,I,l);void 0!==S&&C.push(S);var D=String(o.apply(void 0,C))}else D=i(y,l,I,E,S,o);I>=v&&(m+=l.slice(v,I)+D,v=I+y.length)}return m+l.slice(v)}];function i(e,n,o,r,a,s){var i=o+e.length,c=r.length,u=As;return void 0!==a&&(a=Le(a),u=Cs),t.call(s,u,(function(t,s){var u;switch(s.charAt(0)){case\"$\":return\"$\";case\"&\":return e;case\"`\":return n.slice(0,o);case\"\\'\":return n.slice(i);case\"<\":u=a[s.slice(1,-1)];break;default:var l=+s;if(0===l)return t;if(l>c){var d=Ss(l/10);return 0===d?t:d<=c?void 0===r[d-1]?s.charAt(1):r[d-1]+s.charAt(1):t}u=r[l-1]}return void 0===u?\"\":u}))}}));var Ds,Ns=C.f,ks=\"\".startsWith,Os=Math.min,Rs=ds(\"startsWith\"),Ls=!(Rs||(Ds=Ns(String.prototype,\"startsWith\"),!Ds||Ds.writable));ke({target:\"String\",proto:!0,forced:!Ls&&!Rs},{startsWith:function(e){var t=String(h(this));us(e);var n=ie(Os(arguments.length>1?arguments[1]:void 0,t.length)),o=String(e);return ks?ks.call(t,o,n):t.slice(n,n+o.length)===o}});var bs=qe(\"iterator\"),ws=qe(\"toStringTag\"),Gs=wo.values;for(var Ps in fn){var Us=o[Ps],Fs=Us&&Us.prototype;if(Fs){if(Fs[bs]!==Gs)try{k(Fs,bs,Gs)}catch(sI){Fs[bs]=Gs}if(Fs[ws]||k(Fs,ws,Ps),fn[Ps])for(var qs in wo)if(Fs[qs]!==wo[qs])try{k(Fs,qs,wo[qs])}catch(sI){Fs[qs]=wo[qs]}}}var xs=Pt.trim,Vs=o.parseFloat,Ks=1/Vs(Rt+\"-0\")!=-Infinity?function(e){var t=xs(String(e)),n=Vs(t);return 0===n&&\"-\"==t.charAt(0)?-0:n}:Vs;ke({global:!0,forced:parseFloat!=Ks},{parseFloat:Ks});var Bs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;yn(this,e),this.high=t,this.low=n}return En(e,[{key:\"equal\",value:function(e){return null!==e&&(this.low===e.low&&this.high===e.high)}},{key:\"toString\",value:function(){var e=Number(this.high).toString(16),t=Number(this.low).toString(16);if(t.length<8)for(var n=8-t.length;n;)t=\"0\"+t,n--;return e+t}}]),e}(),Hs={TEST:{CHINA:{DEFAULT:\"wss://wss-dev.tim.qq.com\"},OVERSEA:{DEFAULT:\"wss://wss-dev.tim.qq.com\"},SINGAPORE:{DEFAULT:\"wss://wsssgp-dev.im.qcloud.com\"},KOREA:{DEFAULT:\"wss://wsskr-dev.im.qcloud.com\"},GERMANY:{DEFAULT:\"wss://wssger-dev.im.qcloud.com\"},IND:{DEFAULT:\"wss://wssind-dev.im.qcloud.com\"}},PRODUCTION:{CHINA:{DEFAULT:\"wss://wss.im.qcloud.com\",BACKUP:\"wss://wss.tim.qq.com\",STAT:\"https://api.im.qcloud.com\"},OVERSEA:{DEFAULT:\"wss://wss.im.qcloud.com\",BACKUP:\"wss://wss.my-imcloud.com\",STAT:\"https://api.my-imcloud.com\"},SINGAPORE:{DEFAULT:\"wss://wsssgp.im.qcloud.com\",BACKUP:\"wss://wsssgp.my-imcloud.com\",STAT:\"https://apisgp.my-imcloud.com\"},KOREA:{DEFAULT:\"wss://wsskr.im.qcloud.com\",BACKUP:\"wss://wsskr.my-imcloud.com\",STAT:\"https://apikr.my-imcloud.com\"},GERMANY:{DEFAULT:\"wss://wssger.im.qcloud.com\",BACKUP:\"wss://wssger.my-imcloud.com\",STAT:\"https://apiger.my-imcloud.com\"},IND:{DEFAULT:\"wss://wssind.im.qcloud.com\",BACKUP:\"wss://wssind.my-imcloud.com\",STAT:\"https://apiind.my-imcloud.com\"}}},js={WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,UNI_NATIVE_APP:15},Ws=\"1.7.3\",Ys=537048168,$s=\"CHINA\",zs=\"OVERSEA\",Js=\"SINGAPORE\",Xs=\"KOREA\",Qs=\"GERMANY\",Zs=\"IND\",ei={HOST:{CURRENT:{DEFAULT:\"wss://wss.im.qcloud.com\",STAT:\"https://api.im.qcloud.com\"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s;this.CURRENT=Hs.PRODUCTION[e]}},NAME:{OPEN_IM:\"openim\",GROUP:\"group_open_http_svc\",GROUP_COMMUNITY:\"million_group_open_http_svc\",GROUP_ATTR:\"group_open_attr_http_svc\",FRIEND:\"sns\",PROFILE:\"profile\",RECENT_CONTACT:\"recentcontact\",PIC:\"openpic\",BIG_GROUP_NO_AUTH:\"group_open_http_noauth_svc\",BIG_GROUP_LONG_POLLING:\"group_open_long_polling_http_svc\",BIG_GROUP_LONG_POLLING_NO_AUTH:\"group_open_long_polling_http_noauth_svc\",IM_OPEN_STAT:\"imopenstat\",WEB_IM:\"webim\",IM_COS_SIGN:\"im_cos_sign_svr\",CUSTOM_UPLOAD:\"im_cos_msg\",HEARTBEAT:\"heartbeat\",IM_OPEN_PUSH:\"im_open_push\",IM_OPEN_STATUS:\"im_open_status\",IM_LONG_MESSAGE:\"im_long_msg\",IM_CONFIG_MANAGER:\"im_sdk_config_mgr\",STAT_SERVICE:\"StatSvc\",OVERLOAD_PUSH:\"OverLoadPush\"},CMD:{ACCESS_LAYER:\"accesslayer\",LOGIN:\"wslogin\",LOGOUT_LONG_POLL:\"longpollinglogout\",LOGOUT:\"wslogout\",HELLO:\"wshello\",PORTRAIT_GET:\"portrait_get_all\",PORTRAIT_SET:\"portrait_set\",GET_LONG_POLL_ID:\"getlongpollingid\",LONG_POLL:\"longpolling\",AVCHATROOM_LONG_POLL:\"get_msg\",ADD_FRIEND:\"friend_add\",UPDATE_FRIEND:\"friend_update\",GET_FRIEND_LIST:\"friend_get\",GET_FRIEND_PROFILE:\"friend_get_list\",DELETE_FRIEND:\"friend_delete\",CHECK_FRIEND:\"friend_check\",GET_FRIEND_GROUP_LIST:\"group_get\",RESPOND_FRIEND_APPLICATION:\"friend_response\",GET_FRIEND_APPLICATION_LIST:\"pendency_get\",DELETE_FRIEND_APPLICATION:\"pendency_delete\",REPORT_FRIEND_APPLICATION:\"pendency_report\",GET_GROUP_APPLICATION:\"get_pendency\",CREATE_FRIEND_GROUP:\"group_add\",DELETE_FRIEND_GROUP:\"group_delete\",UPDATE_FRIEND_GROUP:\"group_update\",GET_BLACKLIST:\"black_list_get\",ADD_BLACKLIST:\"black_list_add\",DELETE_BLACKLIST:\"black_list_delete\",CREATE_GROUP:\"create_group\",GET_JOINED_GROUPS:\"get_joined_group_list\",SET_GROUP_ATTRIBUTES:\"set_group_attr\",MODIFY_GROUP_ATTRIBUTES:\"modify_group_attr\",DELETE_GROUP_ATTRIBUTES:\"delete_group_attr\",CLEAR_GROUP_ATTRIBUTES:\"clear_group_attr\",GET_GROUP_ATTRIBUTES:\"get_group_attr\",SEND_MESSAGE:\"sendmsg\",REVOKE_C2C_MESSAGE:\"msgwithdraw\",DELETE_C2C_MESSAGE:\"delete_c2c_msg_ramble\",SEND_GROUP_MESSAGE:\"send_group_msg\",REVOKE_GROUP_MESSAGE:\"group_msg_recall\",DELETE_GROUP_MESSAGE:\"delete_group_ramble_msg_by_seq\",GET_GROUP_INFO:\"get_group_self_member_info\",GET_GROUP_MEMBER_INFO:\"get_specified_group_member_info\",GET_GROUP_MEMBER_LIST:\"get_group_member_info\",QUIT_GROUP:\"quit_group\",CHANGE_GROUP_OWNER:\"change_group_owner\",DESTROY_GROUP:\"destroy_group\",ADD_GROUP_MEMBER:\"add_group_member\",DELETE_GROUP_MEMBER:\"delete_group_member\",SEARCH_GROUP_BY_ID:\"get_group_public_info\",APPLY_JOIN_GROUP:\"apply_join_group\",HANDLE_APPLY_JOIN_GROUP:\"handle_apply_join_group\",HANDLE_GROUP_INVITATION:\"handle_invite_join_group\",MODIFY_GROUP_INFO:\"modify_group_base_info\",MODIFY_GROUP_MEMBER_INFO:\"modify_group_member_info\",DELETE_GROUP_SYSTEM_MESSAGE:\"deletemsg\",DELETE_GROUP_AT_TIPS:\"deletemsg\",GET_CONVERSATION_LIST:\"get\",PAGING_GET_CONVERSATION_LIST:\"page_get\",DELETE_CONVERSATION:\"delete\",PIN_CONVERSATION:\"top\",GET_MESSAGES:\"getmsg\",GET_C2C_ROAM_MESSAGES:\"getroammsg\",SET_C2C_PEER_MUTE_NOTIFICATIONS:\"set_c2c_peer_mute_notifications\",GET_C2C_PEER_MUTE_NOTIFICATIONS:\"get_c2c_peer_mute_notifications\",GET_GROUP_ROAM_MESSAGES:\"group_msg_get\",GET_READ_RECEIPT:\"get_group_msg_receipt\",GET_READ_RECEIPT_DETAIL:\"get_group_msg_receipt_detail\",SEND_READ_RECEIPT:\"group_msg_receipt\",SET_C2C_MESSAGE_READ:\"msgreaded\",GET_PEER_READ_TIME:\"get_peer_read_time\",SET_GROUP_MESSAGE_READ:\"msg_read_report\",FILE_READ_AND_WRITE_AUTHKEY:\"authkey\",FILE_UPLOAD:\"pic_up\",COS_SIGN:\"cos\",COS_PRE_SIG:\"pre_sig\",VIDEO_COVER:\"video_cover\",TIM_WEB_REPORT_V2:\"tim_web_report_v2\",BIG_DATA_HALLWAY_AUTH_KEY:\"authkey\",GET_ONLINE_MEMBER_NUM:\"get_online_member_num\",ALIVE:\"alive\",MESSAGE_PUSH:\"msg_push\",MULTI_MESSAGE_PUSH:\"multi_msg_push_ws\",MESSAGE_PUSH_ACK:\"ws_msg_push_ack\",STATUS_FORCEOFFLINE:\"stat_forceoffline\",DOWNLOAD_MERGER_MESSAGE:\"get_relay_json_msg\",UPLOAD_MERGER_MESSAGE:\"save_relay_json_msg\",FETCH_CLOUD_CONTROL_CONFIG:\"fetch_config\",PUSHED_CLOUD_CONTROL_CONFIG:\"push_configv2\",FETCH_COMMERCIAL_CONFIG:\"fetch_imsdk_purchase_bitsv2\",PUSHED_COMMERCIAL_CONFIG:\"push_imsdk_purchase_bitsv2\",KICK_OTHER:\"KickOther\",OVERLOAD_NOTIFY:\"notify2\",SET_ALL_MESSAGE_READ:\"read_all_unread_msg\"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:\"v4\",group_open_http_svc:\"v4\",sns:\"v4\",profile:\"v4\",recentcontact:\"v4\",openpic:\"v4\",group_open_http_noauth_svc:\"v4\",group_open_long_polling_http_svc:\"v4\",group_open_long_polling_http_noauth_svc:\"v4\",imopenstat:\"v4\",im_cos_sign_svr:\"v4\",im_cos_msg:\"v4\",webim:\"v4\",im_open_push:\"v4\",im_open_status:\"v4\"}},ti={SEARCH_MSG:new Bs(0,Math.pow(2,0)).toString(),SEARCH_GRP_SNS:new Bs(0,Math.pow(2,1)).toString(),AVCHATROOM_HISTORY_MSG:new Bs(0,Math.pow(2,2)).toString(),GRP_COMMUNITY:new Bs(0,Math.pow(2,3)).toString(),MSG_TO_SPECIFIED_GRP_MBR:new Bs(0,Math.pow(2,4)).toString()};ei.HOST.setCurrent($s);var ni,oi,ri,ai=\"undefined\"!=typeof wx&&\"function\"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting),si=\"undefined\"!=typeof qq&&\"function\"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),ii=\"undefined\"!=typeof tt&&\"function\"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),ci=\"undefined\"!=typeof swan&&\"function\"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),ui=\"undefined\"!=typeof my&&\"function\"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),li=\"undefined\"!=typeof uni&&\"undefined\"==typeof window,di=\"undefined\"!=typeof uni,pi=ai||si||ii||ci||ui||li,gi=(\"undefined\"!=typeof uni||\"undefined\"!=typeof window)&&!pi,hi=si?qq:ii?tt:ci?swan:ui?my:ai?wx:li?uni:{},fi=(ni=\"WEB\",Oi?ni=\"WEB\":si?ni=\"QQ_MP\":ii?ni=\"TT_MP\":ci?ni=\"BAIDU_MP\":ui?ni=\"ALI_MP\":ai?ni=\"WX_MP\":li&&(ni=\"UNI_NATIVE_APP\"),js[ni]),_i=gi&&window&&window.navigator&&window.navigator.userAgent||\"\",mi=/AppleWebKit\\\\/([\\\\d.]+)/i.exec(_i),vi=(mi&&parseFloat(mi.pop()),/iPad/i.test(_i)),Mi=/iPhone/i.test(_i)&&!vi,yi=/iPod/i.test(_i),Ii=Mi||vi||yi,Ei=function(){var e=_i.match(/OS (\\\\d+)_/i);return e&&e[1]?e[1]:null}(),Ti=/Android/i.test(_i),Si=function(){var e=_i.match(/Android (\\\\d+)(?:\\\\.(\\\\d+))?(?:\\\\.(\\\\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+\".\"+e[2]):t||null}(),Ci=(Ti&&/webkit/i.test(_i),/Firefox/i.test(_i),/Edge/i.test(_i)),Ai=!Ci&&/Chrome/i.test(_i),Di=(function(){var e=_i.match(/Chrome\\\\/(\\\\d+)/);e&&e[1]&&parseFloat(e[1])}(),/MSIE/.test(_i)||_i.indexOf(\"Trident\")>-1&&_i.indexOf(\"rv:11.0\")>-1),Ni=(/MSIE\\\\s8\\\\.0/.test(_i),function(){var e=/MSIE\\\\s(\\\\d+)\\\\.\\\\d/.exec(_i),t=e&&parseFloat(e[1]);return!t&&/Trident\\\\/7.0/i.test(_i)&&/rv:11.0/.test(_i)&&(t=11),t}()),ki=(/Safari/i.test(_i),/TBS\\\\/\\\\d+/i.test(_i)),Oi=(function(){var e=_i.match(/TBS\\\\/(\\\\d+)/i);if(e&&e[1])e[1]}(),!ki&&/MQQBrowser\\\\/\\\\d+/i.test(_i),!ki&&/ QQBrowser\\\\/\\\\d+/i.test(_i),/(micromessenger|webbrowser)/i.test(_i)),Ri=/Windows/i.test(_i),Li=/MAC OS X/i.test(_i),bi=(/MicroMessenger/i.test(_i),gi&&\"undefined\"!=typeof Worker&&!Di),wi=!r((function(){return Object.isExtensible(Object.preventExtensions({}))})),Gi=t((function(e){var t=N.f,n=K(\"meta\"),o=0,r=Object.isExtensible||function(){return!0},a=function(e){t(e,n,{value:{objectID:\"O\"+ ++o,weakData:{}}})},s=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!_(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!M(e,n)){if(!r(e))return\"F\";if(!t)return\"E\";a(e)}return e[n].objectID},getWeakData:function(e,t){if(!M(e,n)){if(!r(e))return!0;if(!t)return!1;a(e)}return e[n].weakData},onFreeze:function(e){return wi&&s.REQUIRED&&r(e)&&!M(e,n)&&a(e),e}};j[n]=!0})),Pi=(Gi.REQUIRED,Gi.fastKey,Gi.getWeakData,Gi.onFreeze,N.f),Ui=Gi.fastKey,Fi=Q.set,qi=Q.getterFor,xi=(function(e,t,n){var a=-1!==e.indexOf(\"Map\"),s=-1!==e.indexOf(\"Weak\"),i=a?\"set\":\"add\",c=o[e],u=c&&c.prototype,l=c,d={},p=function(e){var t=u[e];Z(u,e,\"add\"==e?function(e){return t.call(this,0===e?0:e),this}:\"delete\"==e?function(e){return!(s&&!_(e))&&t.call(this,0===e?0:e)}:\"get\"==e?function(e){return s&&!_(e)?void 0:t.call(this,0===e?0:e)}:\"has\"==e?function(e){return!(s&&!_(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(De(e,\"function\"!=typeof c||!(s||u.forEach&&!r((function(){(new c).entries().next()})))))l=n.getConstructor(t,e,a,i),Gi.REQUIRED=!0;else if(De(e,!0)){var g=new l,h=g[i](s?{}:-0,1)!=g,f=r((function(){g.has(1)})),m=Mt((function(e){new c(e)})),v=!s&&r((function(){for(var e=new c,t=5;t--;)e[i](t,t);return!e.has(-0)}));m||((l=t((function(t,n){kr(t,l,e);var o=tr(new c,t,l);return null!=n&&Or(n,o[i],o,a),o}))).prototype=u,u.constructor=l),(f||v)&&(p(\"delete\"),p(\"has\"),a&&p(\"get\")),(v||h)&&p(i),s&&u.clear&&delete u.clear}d[e]=l,ke({global:!0,forced:l!=c},d),tn(l,e),s||n.setStrong(l,e,a)}(\"Map\",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,n,o){var r=e((function(e,s){kr(e,r,t),Fi(e,{type:t,index:kt(null),first:void 0,last:void 0,size:0}),a||(e.size=0),null!=s&&Or(s,e[o],e,n)})),s=qi(t),i=function(e,t,n){var o,r,i=s(e),u=c(e,t);return u?u.value=n:(i.last=u={index:r=Ui(t,!0),key:t,value:n,previous:o=i.last,next:void 0,removed:!1},i.first||(i.first=u),o&&(o.next=u),a?i.size++:e.size++,\"F\"!==r&&(i.index[r]=u)),e},c=function(e,t){var n,o=s(e),r=Ui(t);if(\"F\"!==r)return o.index[r];for(n=o.first;n;n=n.next)if(n.key==t)return n};return Ar(r.prototype,{clear:function(){for(var e=s(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,a?e.size=0:this.size=0},delete:function(e){var t=s(this),n=c(this,e);if(n){var o=n.next,r=n.previous;delete t.index[n.index],n.removed=!0,r&&(r.next=o),o&&(o.previous=r),t.first==n&&(t.first=o),t.last==n&&(t.last=r),a?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=s(this),o=Re(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(o(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),Ar(r.prototype,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return i(this,0===e?0:e,t)}}:{add:function(e){return i(this,e=0===e?0:e,e)}}),a&&Pi(r.prototype,\"size\",{get:function(){return s(this).size}}),r},setStrong:function(e,t,n){var o=t+\" Iterator\",r=qi(t),a=qi(o);dn(e,t,(function(e,t){Fi(this,{type:o,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?\"keys\"==t?{value:n.key,done:!1}:\"values\"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?\"entries\":\"values\",!n,!0),Nr(t)}}),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{});oi=\"undefined\"!=typeof console?console:void 0!==xi&&xi.console?xi.console:\"undefined\"!=typeof window&&window.console?window.console:{};for(var Vi=function(){},Ki=[\"assert\",\"clear\",\"count\",\"debug\",\"dir\",\"dirxml\",\"error\",\"exception\",\"group\",\"groupCollapsed\",\"groupEnd\",\"info\",\"log\",\"markTimeline\",\"profile\",\"profileEnd\",\"table\",\"time\",\"timeEnd\",\"timeStamp\",\"trace\",\"warn\"],Bi=Ki.length;Bi--;)ri=Ki[Bi],console[ri]||(oi[ri]=Vi);oi.methods=Ki;var Hi=oi,ji=0,Wi=function(){return(new Date).getTime()+ji},Yi=function(){ji=0},$i=function(){return Math.floor(Wi()/1e3)},zi=0,Ji=new Map;function Xi(){var e,t=((e=new Date).setTime(Wi()),e);return\"TIM \"+t.toLocaleTimeString(\"en-US\",{hour12:!1})+\".\"+function(e){var t;switch(e.toString().length){case 1:t=\"00\"+e;break;case 2:t=\"0\"+e;break;default:t=e}return t}(t.getMilliseconds())+\":\"}var Qi={arguments2String:function(e){var t;if(1===e.length)t=Xi()+e[0];else{t=Xi();for(var n=0,o=e.length;n<o;n++)hc(e[n])?_c(e[n])?t+=Ec(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=\" \"}return t},debug:function(){if(zi<=-1){var e=this.arguments2String(arguments);Hi.debug(e)}},log:function(){if(zi<=0){var e=this.arguments2String(arguments);Hi.log(e)}},info:function(){if(zi<=1){var e=this.arguments2String(arguments);Hi.info(e)}},warn:function(){if(zi<=2){var e=this.arguments2String(arguments);Hi.warn(e)}},error:function(){if(zi<=3){var e=this.arguments2String(arguments);Hi.error(e)}},time:function(e){Ji.set(e,yc.now())},timeEnd:function(e){if(Ji.has(e)){var t=yc.now()-Ji.get(e);return Ji.delete(e),t}return Hi.warn(\"未找到对应label: \".concat(e,\", 请在调用 logger.timeEnd 前，调用 logger.time\")),0},setLevel:function(e){e<4&&Hi.log(Xi()+\"set level from \"+zi+\" to \"+e),zi=e},getLevel:function(){return zi}},Zi={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255},ec={NICK:\"Tag_Profile_IM_Nick\",GENDER:\"Tag_Profile_IM_Gender\",BIRTHDAY:\"Tag_Profile_IM_BirthDay\",LOCATION:\"Tag_Profile_IM_Location\",SELFSIGNATURE:\"Tag_Profile_IM_SelfSignature\",ALLOWTYPE:\"Tag_Profile_IM_AllowType\",LANGUAGE:\"Tag_Profile_IM_Language\",AVATAR:\"Tag_Profile_IM_Image\",MESSAGESETTINGS:\"Tag_Profile_IM_MsgSettings\",ADMINFORBIDTYPE:\"Tag_Profile_IM_AdminForbidType\",LEVEL:\"Tag_Profile_IM_Level\",ROLE:\"Tag_Profile_IM_Role\"},tc={UNKNOWN:\"Gender_Type_Unknown\",FEMALE:\"Gender_Type_Female\",MALE:\"Gender_Type_Male\"},nc={NONE:\"AdminForbid_Type_None\",SEND_OUT:\"AdminForbid_Type_SendOut\"},oc={NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_ANY:\"AllowType_Type_AllowAny\",DENY_ANY:\"AllowType_Type_DenyAny\"},rc=\"JoinedSuccess\",ac=\"WaitAdminApproval\",sc=\"@TGS#_\",ic=function(e){return\"file\"===mc(e)},cc=function(e){return null!==e&&(\"number\"==typeof e&&!isNaN(e-0)||\"object\"===Mn(e)&&e.constructor===Number)},uc=function(e){return\"string\"==typeof e},lc=function(e){return null!==e&&\"object\"===Mn(e)},dc=function(e){if(\"object\"!==Mn(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n},pc=function(e){return\"function\"==typeof Array.isArray?Array.isArray(e):\"array\"===mc(e)},gc=function(e){return void 0===e},hc=function(e){return pc(e)||lc(e)},fc=function(e){return\"function\"==typeof e},_c=function(e){return e instanceof Error},mc=function(e){return Object.prototype.toString.call(e).match(/^\\\\[object (.*)\\\\]$/)[1].toLowerCase()},vc=function(e){if(\"string\"!=typeof e)return!1;var t=e[0];return!/[^a-zA-Z0-9]/.test(t)},Mc=0;Date.now||(Date.now=function(){return(new Date).getTime()});var yc={now:function(){0===Mc&&(Mc=Date.now()-1);var e=Date.now()-Mc;return e>4294967295?(Mc+=4294967295,Date.now()-Mc):e},utc:function(){return Math.round(Date.now()/1e3)}},Ic=function e(t,n,o,r){if(!hc(t)||!hc(n))return 0;for(var a,s=0,i=Object.keys(n),c=0,u=i.length;c<u;c++)if(a=i[c],!(gc(n[a])||o&&o.includes(a)))if(hc(t[a])&&hc(n[a]))s+=e(t[a],n[a],o,r);else{if(r&&r.includes(n[a]))continue;t[a]!==n[a]&&(t[a]=n[a],s+=1)}return s},Ec=function(e){return JSON.stringify(e,[\"message\",\"code\"])},Tc=function(e){if(0===e.length)return 0;for(var t=0,n=0,o=\"undefined\"!=typeof document&&void 0!==document.characterSet?document.characterSet:\"UTF-8\";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:!1===o?3:2;return n},Sc=function(e){var t=e||99999999;return Math.round(Math.random()*t)},Cc=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",Ac=Cc.length,Dc=function(e,t){for(var n in e)if(e[n]===t)return!0;return!1},Nc={},kc=function(){if(pi)return\"https:\";if(gi&&\"undefined\"==typeof window)return\"https:\";var e=window.location.protocol;return[\"http:\",\"https:\"].indexOf(e)<0&&(e=\"http:\"),e},Oc=function(e){return-1===e.indexOf(\"http://\")||-1===e.indexOf(\"https://\")?\"https://\"+e:e.replace(/https|http/,\"https\")},Rc=function e(t){if(0===Object.getOwnPropertyNames(t).length)return Object.create(null);var n=Array.isArray(t)?[]:Object.create(null),o=\"\";for(var r in t)null!==t[r]?void 0!==t[r]?(o=Mn(t[r]),[\"string\",\"number\",\"function\",\"boolean\"].indexOf(o)>=0?n[r]=t[r]:n[r]=e(t[r])):n[r]=void 0:n[r]=null;return n};function Lc(e,t){pc(e)&&pc(t)?t.forEach((function(t){var n=t.key,o=t.value,r=e.find((function(e){return e.key===n}));r?r.value=o:e.push({key:n,value:o})})):Qi.warn(\"updateCustomField target 或 source 不是数组，忽略此次更新。\")}var bc=function(e){return e===Yn.GRP_PUBLIC},wc=function(e){return e===Yn.GRP_AVCHATROOM},Gc=function(e){var t=e.type,n=e.groupID;return t===Yn.GRP_COMMUNITY||\"\".concat(n).startsWith(sc)},Pc=function(e){return uc(e)&&e.slice(0,3)===Yn.CONV_C2C},Uc=function(e){return uc(e)&&e.slice(0,5)===Yn.CONV_GROUP},Fc=function(e){return uc(e)&&e===Yn.CONV_SYSTEM};function qc(e,t){var n={};return Object.keys(e).forEach((function(o){n[o]=t(e[o],o)})),n}function xc(e){return pi?new Promise((function(t,n){hi.getImageInfo({src:e,success:function(e){t({width:e.width,height:e.height})},fail:function(){t({width:0,height:0})}})})):Di&&9===Ni?Promise.resolve({width:0,height:0}):new Promise((function(t,n){var o=new Image;o.onload=function(){t({width:this.width,height:this.height}),o=null},o.onerror=function(){t({width:0,height:0}),o=null},o.src=e}))}function Vc(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return\"\".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())}function Kc(){var e=\"unknown\";if(Li&&(e=\"mac\"),Ri&&(e=\"windows\"),Ii&&(e=\"ios\"),Ti&&(e=\"android\"),pi)try{var t=hi.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(sI){}return e}function Bc(e){var t=e.originUrl,n=void 0===t?void 0:t,o=e.originWidth,r=e.originHeight,a=e.min,s=void 0===a?198:a,i=parseInt(o),c=parseInt(r),u={url:void 0,width:0,height:0};if((i<=c?i:c)<=s)u.url=n,u.width=i,u.height=c;else{c<=i?(u.width=Math.ceil(i*s/c),u.height=s):(u.width=s,u.height=Math.ceil(c*s/i));var l=n&&n.indexOf(\"?\")>-1?\"\".concat(n,\"&\"):\"\".concat(n,\"?\");u.url=\"\".concat(l,198===s?\"imageView2/3/w/198/h/198\":\"imageView2/3/w/720/h/720\")}return gc(n)?Ln(u,[\"url\"]):u}function Hc(e){var t=e[2];e[2]=e[1],e[1]=t;for(var n=0;n<e.length;n++)e[n].setType(n)}function jc(e){var t=e.servcmd;return t.slice(t.indexOf(\".\")+1)}function Wc(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function Yc(e,t){return e.includes(t)}function $c(e,t){return e.includes(t)}var zc=Object.prototype.hasOwnProperty;function Jc(e){if(null==e)return!0;if(\"boolean\"==typeof e)return!1;if(\"number\"==typeof e)return 0===e;if(\"string\"==typeof e)return 0===e.length;if(\"function\"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return\"\"===e.message;if(dc(e)){for(var t in e)if(zc.call(e,t))return!1;return!0}return!(\"map\"!==mc(e)&&!function(e){return\"set\"===mc(e)}(e)&&!ic(e))&&0===e.size}function Xc(e,t,n){if(void 0===t)return!0;var o=!0;if(\"object\"===vo(t).toLowerCase())Object.keys(t).forEach((function(r){var a=1===e.length?e[0][r]:void 0;o=!!Qc(a,t[r],n,r)&&o}));else if(\"array\"===vo(t).toLowerCase())for(var r=0;r<t.length;r++)o=!!Qc(e[r],t[r],n,t[r].name)&&o;if(o)return o;throw new Error(\"Params validate failed.\")}function Qc(e,t,n,o){if(void 0===t)return!0;var r=!0;return t.required&&Jc(e)&&(Hi.error(\"TIM [\".concat(n,\\'] Missing required params: \"\\').concat(o,\\'\".\\')),r=!1),Jc(e)||vo(e).toLowerCase()===t.type.toLowerCase()||(Hi.error(\"TIM [\".concat(n,\\'] Invalid params: type check failed for \"\\').concat(o,\\'\".Expected \\').concat(t.type,\".\")),r=!1),t.validator&&!t.validator(e)&&(Hi.error(\"TIM [\".concat(n,\"] Invalid params: custom validator check failed for params.\")),r=!1),r}var Zc={f:qe},eu=N.f,tu=He.forEach,nu=H(\"hidden\"),ou=qe(\"toPrimitive\"),ru=Q.set,au=Q.getterFor(\"Symbol\"),su=Object.prototype,iu=o.Symbol,cu=ne(\"JSON\",\"stringify\"),uu=C.f,lu=N.f,du=mr.f,pu=c.f,gu=q(\"symbols\"),hu=q(\"op-symbols\"),fu=q(\"string-to-symbol-registry\"),_u=q(\"symbol-to-string-registry\"),mu=q(\"wks\"),vu=o.QObject,Mu=!vu||!vu.prototype||!vu.prototype.findChild,yu=a&&r((function(){return 7!=kt(lu({},\"a\",{get:function(){return lu(this,\"a\",{value:7}).a}})).a}))?function(e,t,n){var o=uu(su,t);o&&delete su[t],lu(e,t,n),o&&e!==su&&lu(su,t,o)}:lu,Iu=function(e,t){var n=gu[e]=kt(iu.prototype);return ru(n,{type:\"Symbol\",tag:e,description:t}),a||(n.description=t),n},Eu=Ge?function(e){return\"symbol\"==typeof e}:function(e){return Object(e)instanceof iu},Tu=function(e,t,n){e===su&&Tu(hu,t,n),A(e);var o=m(t,!0);return A(n),M(gu,o)?(n.enumerable?(M(e,nu)&&e[nu][o]&&(e[nu][o]=!1),n=kt(n,{enumerable:u(0,!1)})):(M(e,nu)||lu(e,nu,u(1,{})),e[nu][o]=!0),yu(e,o,n)):lu(e,o,n)},Su=function(e,t){A(e);var n=f(t),o=Et(n).concat(Nu(n));return tu(o,(function(t){a&&!Cu.call(n,t)||Tu(e,t,n[t])})),e},Cu=function(e){var t=m(e,!0),n=pu.call(this,t);return!(this===su&&M(gu,t)&&!M(hu,t))&&(!(n||!M(this,t)||!M(gu,t)||M(this,nu)&&this[nu][t])||n)},Au=function(e,t){var n=f(e),o=m(t,!0);if(n!==su||!M(gu,o)||M(hu,o)){var r=uu(n,o);return!r||!M(gu,o)||M(n,nu)&&n[nu][o]||(r.enumerable=!0),r}},Du=function(e){var t=du(f(e)),n=[];return tu(t,(function(e){M(gu,e)||M(j,e)||n.push(e)})),n},Nu=function(e){var t=e===su,n=du(t?hu:f(e)),o=[];return tu(n,(function(e){!M(gu,e)||t&&!M(su,e)||o.push(gu[e])})),o};if(we||(Z((iu=function(){if(this instanceof iu)throw TypeError(\"Symbol is not a constructor\");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=K(e),n=function(e){this===su&&n.call(hu,e),M(this,nu)&&M(this[nu],t)&&(this[nu][t]=!1),yu(this,t,u(1,e))};return a&&Mu&&yu(su,t,{configurable:!0,set:n}),Iu(t,e)}).prototype,\"toString\",(function(){return au(this).tag})),Z(iu,\"withoutSetter\",(function(e){return Iu(K(e),e)})),c.f=Cu,N.f=Tu,C.f=Au,me.f=mr.f=Du,ve.f=Nu,Zc.f=function(e){return Iu(qe(e),e)},a&&(lu(iu.prototype,\"description\",{configurable:!0,get:function(){return au(this).description}}),Z(su,\"propertyIsEnumerable\",Cu,{unsafe:!0}))),ke({global:!0,wrap:!0,forced:!we,sham:!we},{Symbol:iu}),tu(Et(mu),(function(e){!function(e){var t=ee.Symbol||(ee.Symbol={});M(t,e)||eu(t,e,{value:Zc.f(e)})}(e)})),ke({target:\"Symbol\",stat:!0,forced:!we},{for:function(e){var t=String(e);if(M(fu,t))return fu[t];var n=iu(t);return fu[t]=n,_u[n]=t,n},keyFor:function(e){if(!Eu(e))throw TypeError(e+\" is not a symbol\");if(M(_u,e))return _u[e]},useSetter:function(){Mu=!0},useSimple:function(){Mu=!1}}),ke({target:\"Object\",stat:!0,forced:!we,sham:!a},{create:function(e,t){return void 0===t?kt(e):Su(kt(e),t)},defineProperty:Tu,defineProperties:Su,getOwnPropertyDescriptor:Au}),ke({target:\"Object\",stat:!0,forced:!we},{getOwnPropertyNames:Du,getOwnPropertySymbols:Nu}),ke({target:\"Object\",stat:!0,forced:r((function(){ve.f(1)}))},{getOwnPropertySymbols:function(e){return ve.f(Le(e))}}),cu){var ku=!we||r((function(){var e=iu();return\"[null]\"!=cu([e])||\"{}\"!=cu({a:e})||\"{}\"!=cu(Object(e))}));ke({target:\"JSON\",stat:!0,forced:ku},{stringify:function(e,t,n){for(var o,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(o=t,(_(t)||void 0!==e)&&!Eu(e))return be(t)||(t=function(e,t){if(\"function\"==typeof o&&(t=o.call(this,e,t)),!Eu(t))return t}),r[1]=t,cu.apply(null,r)}})}iu.prototype[ou]||k(iu.prototype,ou,iu.prototype.valueOf),tn(iu,\"Symbol\"),j[nu]=!0;var Ou=N.f,Ru=o.Symbol;if(a&&\"function\"==typeof Ru&&(!(\"description\"in Ru.prototype)||void 0!==Ru().description)){var Lu={},bu=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof bu?new Ru(e):void 0===e?Ru():Ru(e);return\"\"===e&&(Lu[t]=!0),t};ye(bu,Ru);var wu=bu.prototype=Ru.prototype;wu.constructor=bu;var Gu=wu.toString,Pu=\"Symbol(test)\"==String(Ru(\"test\")),Uu=/^Symbol\\\\((.*)\\\\)[^)]+$/;Ou(wu,\"description\",{configurable:!0,get:function(){var e=_(this)?this.valueOf():this,t=Gu.call(e);if(M(Lu,e))return\"\";var n=Pu?t.slice(7,-1):t.replace(Uu,\"$1\");return\"\"===n?void 0:n}}),ke({global:!0,forced:!0},{Symbol:bu})}var Fu={UNSEND:\"unSend\",SUCCESS:\"success\",FAIL:\"fail\"},qu={NOT_START:\"notStart\",PENDING:\"pengding\",RESOLVED:\"resolved\",REJECTED:\"rejected\"},xu=function(e){return!!e&&(!!(Pc(e)||Uc(e)||Fc(e))||(console.warn(\"非法的会话 ID:\".concat(e,\"。会话 ID 组成方式：C2C + userID（单聊）GROUP + groupID（群聊）@TIM#SYSTEM（系统通知会话）\")),!1))},Vu=\"请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#\",Ku=function(e){return e.param?\"\".concat(e.api,\" \").concat(e.param,\" \").concat(e.desc,\"。\").concat(Vu).concat(e.api):\"\".concat(e.api,\" \").concat(e.desc,\"。\").concat(Vu).concat(e.api)},Bu={type:\"String\",required:!0},Hu={type:\"Array\",required:!0},ju={type:\"Object\",required:!0},Wu={login:{userID:Bu,userSig:Bu},addToBlacklist:{userIDList:Hu},on:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Ku({api:\"on\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Ku({api:\"on\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"on 接口的 handler 参数推荐使用具名函数。具名函数可以使用 off 接口取消订阅，匿名函数无法取消订阅。\"),!0)}}],once:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Ku({api:\"once\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Ku({api:\"once\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"once 接口的 handler 参数推荐使用具名函数。\"),!0)}}],off:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Ku({api:\"off\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Ku({api:\"off\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"off 接口无法为匿名函数取消监听事件。\"),!0)}}],sendMessage:[Cn({name:\"message\"},ju)],getMessageList:{conversationID:Cn({},Bu,{validator:function(e){return xu(e)}}),nextReqMessageID:{type:\"String\"},count:{type:\"Number\",validator:function(e){return!(!gc(e)&&!/^[1-9][0-9]*$/.test(e))||(console.warn(Ku({api:\"getMessageList\",param:\"count\",desc:\"必须为正整数\"})),!1)}}},setMessageRead:{conversationID:Cn({},Bu,{validator:function(e){return xu(e)}})},setAllMessageRead:{scope:{type:\"String\",required:!1,validator:function(e){return!e||-1!==[Yn.READ_ALL_C2C_MSG,Yn.READ_ALL_GROUP_MSG,Yn.READ_ALL_MSG].indexOf(e)||(console.warn(Ku({api:\"setAllMessageRead\",param:\"scope\",desc:\"取值必须为 TIM.TYPES.READ_ALL_C2C_MSG, TIM.TYPES.READ_ALL_GROUP_MSG 或 TIM.TYPES.READ_ALL_MSG\"})),!1)}}},getConversationProfile:[Cn({name:\"conversationID\"},Bu,{validator:function(e){return xu(e)}})],deleteConversation:[Cn({name:\"conversationID\"},Bu,{validator:function(e){return xu(e)}})],pinConversation:{conversationID:Cn({},Bu,{validator:function(e){return xu(e)}}),isPinned:Cn({},{type:\"Boolean\",required:!0})},getConversationList:[{name:\"options\",type:\"Array\",validator:function(e){return!!gc(e)||(0!==e.length||(console.warn(Ku({api:\"getConversationList\",desc:\"获取指定会话时不能传入空数组\"})),!1))}}],getGroupList:{groupProfileFilter:{type:\"Array\"}},getGroupProfile:{groupID:Bu,groupCustomFieldFilter:{type:\"Array\"},memberCustomFieldFilter:{type:\"Array\"}},getGroupProfileAdvance:{groupIDList:Hu},createGroup:{name:Bu},joinGroup:{groupID:Bu,type:{type:\"String\"},applyMessage:{type:\"String\"}},quitGroup:[Cn({name:\"groupID\"},Bu)],handleApplication:{message:ju,handleAction:Bu,handleMessage:{type:\"String\"}},changeGroupOwner:{groupID:Bu,newOwnerID:Bu},updateGroupProfile:{groupID:Bu,muteAllMembers:{type:\"Boolean\"}},dismissGroup:[Cn({name:\"groupID\"},Bu)],searchGroupByID:[Cn({name:\"groupID\"},Bu)],initGroupAttributes:{groupID:Bu,groupAttributes:Cn({},ju,{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!uc(e[n]))return console.warn(Ku({api:\"initGroupAttributes\",desc:\"群属性 value 必须是字符串\"})),t=!1})),t}})},setGroupAttributes:{groupID:Bu,groupAttributes:Cn({},ju,{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!uc(e[n]))return console.warn(Ku({api:\"setGroupAttributes\",desc:\"群属性 value 必须是字符串\"})),t=!1})),t}})},deleteGroupAttributes:{groupID:Bu,keyList:{type:\"Array\",validator:function(e){if(gc(e))return console.warn(Ku({api:\"deleteGroupAttributes\",desc:\"缺少必填参数：keyList\"})),!1;if(!pc(e))return!1;if(!Jc(e)){var t=!0;return e.forEach((function(e){if(!uc(e))return console.warn(Ku({api:\"deleteGroupAttributes\",desc:\"群属性 key 必须是字符串\"})),t=!1})),t}return!0}}},getGroupAttributes:{groupID:Bu,keyList:{type:\"Array\",validator:function(e){if(gc(e))return console.warn(Ku({api:\"getGroupAttributes\",desc:\"缺少必填参数：keyList\"})),!1;if(!pc(e))return!1;if(!Jc(e)){var t=!0;return e.forEach((function(e){if(!uc(e))return console.warn(Ku({api:\"getGroupAttributes\",desc:\"群属性 key 必须是字符串\"})),t=!1})),t}return!0}}},getGroupMemberList:{groupID:Bu,count:{type:\"Number\"}},getGroupMemberProfile:{groupID:Bu,userIDList:Hu,memberCustomFieldFilter:{type:\"Array\"}},addGroupMember:{groupID:Bu,userIDList:Hu},setGroupMemberRole:{groupID:Bu,userID:Bu,role:Bu},setGroupMemberMuteTime:{groupID:Bu,userID:Bu,muteTime:{type:\"Number\",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:Bu,userID:{type:\"String\"},nameCard:{type:\"String\",validator:function(e){return uc(e)?(e.length,!0):(console.warn(Ku({api:\"setGroupMemberNameCard\",param:\"nameCard\",desc:\"类型必须为 String\"})),!1)}}},setGroupMemberCustomField:{groupID:Bu,userID:{type:\"String\"},memberCustomField:Hu},deleteGroupMember:{groupID:Bu},createTextMessage:{to:Bu,conversationType:Bu,payload:Cn({},ju,{validator:function(e){return dc(e)?uc(e.text)?0!==e.text.length||(console.warn(Ku({api:\"createTextMessage\",desc:\"消息内容不能为空\"})),!1):(console.warn(Ku({api:\"createTextMessage\",param:\"payload.text\",desc:\"类型必须为 String\"})),!1):(console.warn(Ku({api:\"createTextMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createTextAtMessage:{to:Bu,conversationType:Bu,payload:Cn({},ju,{validator:function(e){return dc(e)?uc(e.text)?0===e.text.length?(console.warn(Ku({api:\"createTextAtMessage\",desc:\"消息内容不能为空\"})),!1):!(e.atUserList&&!pc(e.atUserList))||(console.warn(Ku({api:\"createTextAtMessage\",desc:\"payload.atUserList 类型必须为数组\"})),!1):(console.warn(Ku({api:\"createTextAtMessage\",param:\"payload.text\",desc:\"类型必须为 String\"})),!1):(console.warn(Ku({api:\"createTextAtMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createCustomMessage:{to:Bu,conversationType:Bu,payload:Cn({},ju,{validator:function(e){return dc(e)?e.data&&!uc(e.data)?(console.warn(Ku({api:\"createCustomMessage\",param:\"payload.data\",desc:\"类型必须为 String\"})),!1):e.description&&!uc(e.description)?(console.warn(Ku({api:\"createCustomMessage\",param:\"payload.description\",desc:\"类型必须为 String\"})),!1):!(e.extension&&!uc(e.extension))||(console.warn(Ku({api:\"createCustomMessage\",param:\"payload.extension\",desc:\"类型必须为 String\"})),!1):(console.warn(Ku({api:\"createCustomMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createImageMessage:{to:Bu,conversationType:Bu,payload:Cn({},ju,{validator:function(e){if(!dc(e))return console.warn(Ku({api:\"createImageMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(gc(e.file))return console.warn(Ku({api:\"createImageMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(gi){if(!(e.file instanceof HTMLInputElement||ic(e.file)))return dc(e.file)&&\"undefined\"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(console.warn(Ku({api:\"createImageMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Ku({api:\"createImageMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Ku({api:\"createImageMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1}return!0},onProgress:{type:\"Function\",required:!1,validator:function(e){return gc(e)&&console.warn(Ku({api:\"createImageMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}})},createAudioMessage:{to:Bu,conversationType:Bu,payload:Cn({},ju,{validator:function(e){return!!dc(e)||(console.warn(Ku({api:\"createAudioMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return gc(e)&&console.warn(Ku({api:\"createAudioMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createVideoMessage:{to:Bu,conversationType:Bu,payload:Cn({},ju,{validator:function(e){if(!dc(e))return console.warn(Ku({api:\"createVideoMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(gc(e.file))return console.warn(Ku({api:\"createVideoMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(gi){if(!(e.file instanceof HTMLInputElement||ic(e.file)))return dc(e.file)&&\"undefined\"!=typeof uni?!!ic(e.file.tempFile)||(console.warn(Ku({api:\"createVideoMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Ku({api:\"createVideoMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Ku({api:\"createVideoMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1}return!0}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return gc(e)&&console.warn(Ku({api:\"createVideoMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createFaceMessage:{to:Bu,conversationType:Bu,payload:Cn({},ju,{validator:function(e){return dc(e)?cc(e.index)?!!uc(e.data)||(console.warn(Ku({api:\"createFaceMessage\",param:\"payload.data\",desc:\"类型必须为 String\"})),!1):(console.warn(Ku({api:\"createFaceMessage\",param:\"payload.index\",desc:\"类型必须为 Number\"})),!1):(console.warn(Ku({api:\"createFaceMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createFileMessage:{to:Bu,conversationType:Bu,payload:Cn({},ju,{validator:function(e){if(!dc(e))return console.warn(Ku({api:\"createFileMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(gc(e.file))return console.warn(Ku({api:\"createFileMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(gi){if(!(e.file instanceof HTMLInputElement||ic(e.file)))return dc(e.file)&&\"undefined\"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(console.warn(Ku({api:\"createFileMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Ku({api:\"createFileMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Ku({api:\"createFileMessage\",desc:\"您没有选择文件，无法发送\"})),!1}return!0}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return gc(e)&&console.warn(Ku({api:\"createFileMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createLocationMessage:{to:Bu,conversationType:Bu,payload:Cn({},ju,{validator:function(e){return dc(e)?uc(e.description)?cc(e.longitude)?!!cc(e.latitude)||(console.warn(Ku({api:\"createLocationMessage\",param:\"payload.latitude\",desc:\"类型必须为 Number\"})),!1):(console.warn(Ku({api:\"createLocationMessage\",param:\"payload.longitude\",desc:\"类型必须为 Number\"})),!1):(console.warn(Ku({api:\"createLocationMessage\",param:\"payload.description\",desc:\"类型必须为 String\"})),!1):(console.warn(Ku({api:\"createLocationMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createMergerMessage:{to:Bu,conversationType:Bu,payload:Cn({},ju,{validator:function(e){if(Jc(e.messageList))return console.warn(Ku({api:\"createMergerMessage\",desc:\"不能为空数组\"})),!1;if(Jc(e.compatibleText))return console.warn(Ku({api:\"createMergerMessage\",desc:\"类型必须为 String，且不能为空\"})),!1;var t=!1;return e.messageList.forEach((function(e){e.status===Fu.FAIL&&(t=!0)})),!t||(console.warn(Ku({api:\"createMergerMessage\",desc:\"不支持合并已发送失败的消息\"})),!1)}})},revokeMessage:[Cn({name:\"message\"},ju,{validator:function(e){return Jc(e)?(console.warn(\"revokeMessage 请传入消息（Message）实例\"),!1):e.conversationType===Yn.CONV_SYSTEM?(console.warn(\"revokeMessage 不能撤回系统会话消息，只能撤回单聊消息或群消息\"),!1):!0!==e.isRevoked||(console.warn(\"revokeMessage 消息已经被撤回，请勿重复操作\"),!1)}})],deleteMessage:[Cn({name:\"messageList\"},Hu,{validator:function(e){return!Jc(e)||(console.warn(Ku({api:\"deleteMessage\",param:\"messageList\",desc:\"不能为空数组\"})),!1)}})],getUserProfile:{userIDList:{type:\"Array\",validator:function(e){return pc(e)?(0===e.length&&console.warn(Ku({api:\"getUserProfile\",param:\"userIDList\",desc:\"不能为空数组\"})),!0):(console.warn(Ku({api:\"getUserProfile\",param:\"userIDList\",desc:\"必须为数组\"})),!1)}}},updateMyProfile:{profileCustomField:{type:\"Array\",validator:function(e){return!!gc(e)||(!!pc(e)||(console.warn(Ku({api:\"updateMyProfile\",param:\"profileCustomField\",desc:\"必须为数组\"})),!1))}}},addFriend:{to:Bu,source:{type:\"String\",required:!0,validator:function(e){return!!e&&(e.startsWith(\"AddSource_Type_\")?!(e.replace(\"AddSource_Type_\",\"\").length>8)||(console.warn(Ku({api:\"addFriend\",desc:\"加好友来源字段的关键字长度不得超过8字节\"})),!1):(console.warn(Ku({api:\"addFriend\",desc:\"加好友来源字段的前缀必须是：AddSource_Type_\"})),!1))}},remark:{type:\"String\",required:!1,validator:function(e){return!(uc(e)&&e.length>96)||(console.warn(Ku({api:\"updateFriend\",desc:\" 备注长度最长不得超过 96 个字节\"})),!1)}}},deleteFriend:{userIDList:Hu},checkFriend:{userIDList:Hu},getFriendProfile:{userIDList:Hu},updateFriend:{userID:Bu,remark:{type:\"String\",required:!1,validator:function(e){return!(uc(e)&&e.length>96)||(console.warn(Ku({api:\"updateFriend\",desc:\" 备注长度最长不得超过 96 个字节\"})),!1)}},friendCustomField:{type:\"Array\",required:!1,validator:function(e){if(e){if(!pc(e))return console.warn(Ku({api:\"updateFriend\",param:\"friendCustomField\",desc:\"必须为数组\"})),!1;var t=!0;return e.forEach((function(e){return uc(e.key)&&-1!==e.key.indexOf(\"Tag_SNS_Custom\")?uc(e.value)?e.value.length>8?(console.warn(Ku({api:\"updateFriend\",desc:\"好友自定义字段的关键字长度不得超过8字节\"})),t=!1):void 0:(console.warn(Ku({api:\"updateFriend\",desc:\"类型必须为 String\"})),t=!1):(console.warn(Ku({api:\"updateFriend\",desc:\"好友自定义字段的前缀必须是 Tag_SNS_Custom\"})),t=!1)})),t}return!0}}},acceptFriendApplication:{userID:Bu},refuseFriendApplication:{userID:Bu},deleteFriendApplication:{userID:Bu},createFriendGroup:{name:Bu},deleteFriendGroup:{name:Bu},addToFriendGroup:{name:Bu,userIDList:Hu},removeFromFriendGroup:{name:Bu,userIDList:Hu},renameFriendGroup:{oldName:Bu,newName:Bu},sendMessageReadReceipt:[{name:\"messageList\",type:\"Array\",validator:function(e){return pc(e)?0===e.length?(console.warn(Ku({api:\"sendMessageReadReceipt\",param:\"messageList\",desc:\"不能为空数组\"})),!1):(e.forEach((function(e){if(e.conversationType===Yn.CONV_C2C)return console.warn(Ku({api:\"sendMessageReadReceipt\",param:\"messageList\",desc:\"仅支持群消息\"})),!1})),!0):(console.warn(Ku({api:\"sendMessageReadReceipt\",param:\"messageList\",desc:\"必须为数组\"})),!1)}}],getMessageReadReceiptList:[{name:\"messageList\",type:\"Array\",validator:function(e){return pc(e)?0===e.length?(console.warn(Ku({api:\"getMessageReadReceiptList\",param:\"messageList\",desc:\"不能为空数组\"})),!1):(e.forEach((function(e){if(e.conversationType===Yn.CONV_C2C)return console.warn(Ku({api:\"getMessageReadReceiptList\",param:\"messageList\",desc:\"仅支持群消息\"})),!1})),!0):(console.warn(Ku({api:\"getMessageReadReceiptList\",param:\"messageList\",desc:\"必须为数组\"})),!1)}}]},Yu={login:\"login\",logout:\"logout\",on:\"on\",once:\"once\",off:\"off\",setLogLevel:\"setLogLevel\",registerPlugin:\"registerPlugin\",destroy:\"destroy\",createTextMessage:\"createTextMessage\",createTextAtMessage:\"createTextAtMessage\",createImageMessage:\"createImageMessage\",createAudioMessage:\"createAudioMessage\",createVideoMessage:\"createVideoMessage\",createCustomMessage:\"createCustomMessage\",createFaceMessage:\"createFaceMessage\",createFileMessage:\"createFileMessage\",createLocationMessage:\"createLocationMessage\",createMergerMessage:\"createMergerMessage\",downloadMergerMessage:\"downloadMergerMessage\",createForwardMessage:\"createForwardMessage\",sendMessage:\"sendMessage\",resendMessage:\"resendMessage\",revokeMessage:\"revokeMessage\",deleteMessage:\"deleteMessage\",sendMessageReadReceipt:\"sendMessageReadReceipt\",getGroupMessageReadMemberList:\"getGroupMessageReadMemberList\",getMessageReadReceiptList:\"getMessageReadReceiptList\",getMessageList:\"getMessageList\",findMessage:\"findMessage\",setMessageRead:\"setMessageRead\",setAllMessageRead:\"setAllMessageRead\",getConversationList:\"getConversationList\",getConversationProfile:\"getConversationProfile\",deleteConversation:\"deleteConversation\",pinConversation:\"pinConversation\",getGroupList:\"getGroupList\",getGroupProfile:\"getGroupProfile\",createGroup:\"createGroup\",joinGroup:\"joinGroup\",updateGroupProfile:\"updateGroupProfile\",quitGroup:\"quitGroup\",dismissGroup:\"dismissGroup\",changeGroupOwner:\"changeGroupOwner\",searchGroupByID:\"searchGroupByID\",setMessageRemindType:\"setMessageRemindType\",handleGroupApplication:\"handleGroupApplication\",initGroupAttributes:\"initGroupAttributes\",setGroupAttributes:\"setGroupAttributes\",deleteGroupAttributes:\"deleteGroupAttributes\",getGroupAttributes:\"getGroupAttributes\",getGroupMemberProfile:\"getGroupMemberProfile\",getGroupMemberList:\"getGroupMemberList\",addGroupMember:\"addGroupMember\",deleteGroupMember:\"deleteGroupMember\",setGroupMemberNameCard:\"setGroupMemberNameCard\",setGroupMemberMuteTime:\"setGroupMemberMuteTime\",setGroupMemberRole:\"setGroupMemberRole\",setGroupMemberCustomField:\"setGroupMemberCustomField\",getGroupOnlineMemberCount:\"getGroupOnlineMemberCount\",getMyProfile:\"getMyProfile\",getUserProfile:\"getUserProfile\",updateMyProfile:\"updateMyProfile\",getBlacklist:\"getBlacklist\",addToBlacklist:\"addToBlacklist\",removeFromBlacklist:\"removeFromBlacklist\",getFriendList:\"getFriendList\",addFriend:\"addFriend\",deleteFriend:\"deleteFriend\",checkFriend:\"checkFriend\",updateFriend:\"updateFriend\",getFriendProfile:\"getFriendProfile\",getFriendApplicationList:\"getFriendApplicationList\",refuseFriendApplication:\"refuseFriendApplication\",deleteFriendApplication:\"deleteFriendApplication\",acceptFriendApplication:\"acceptFriendApplication\",setFriendApplicationRead:\"setFriendApplicationRead\",getFriendGroupList:\"getFriendGroupList\",createFriendGroup:\"createFriendGroup\",renameFriendGroup:\"renameFriendGroup\",deleteFriendGroup:\"deleteFriendGroup\",addToFriendGroup:\"addToFriendGroup\",removeFromFriendGroup:\"removeFromFriendGroup\",callExperimentalAPI:\"callExperimentalAPI\"},$u=!!Cr&&r((function(){Cr.prototype.finally.call({then:function(){}},(function(){}))}));ke({target:\"Promise\",proto:!0,real:!0,forced:$u},{finally:function(e){var t=Lr(this,ne(\"Promise\")),n=\"function\"==typeof e;return this.then(n?function(n){return _a(t,e()).then((function(){return n}))}:e,n?function(n){return _a(t,e()).then((function(){throw n}))}:e)}}),\"function\"!=typeof Cr||Cr.prototype.finally||Z(Cr.prototype,\"finally\",ne(\"Promise\").prototype.finally);var zu=[].slice,Ju=/MSIE .\\\\./.test($n),Xu=function(e){return function(t,n){var o=arguments.length>2,r=o?zu.call(arguments,2):void 0;return e(o?function(){(\"function\"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};ke({global:!0,bind:!0,forced:Ju},{setTimeout:Xu(o.setTimeout),setInterval:Xu(o.setInterval)});var Qu=He.filter,Zu=eo(\"filter\"),el=ze(\"filter\");ke({target:\"Array\",proto:!0,forced:!Zu||!el},{filter:function(e){return Qu(this,e,arguments.length>1?arguments[1]:void 0)}});var tl,nl=\"sign\",ol=\"message\",rl=\"user\",al=\"c2c\",sl=\"group\",il=\"sns\",cl=\"groupMember\",ul=\"conversation\",ll=\"context\",dl=\"storage\",pl=\"eventStat\",gl=\"netMonitor\",hl=\"bigDataChannel\",fl=\"upload\",_l=\"plugin\",ml=\"syncUnreadMessage\",vl=\"session\",Ml=\"channel\",yl=\"message_loss_detection\",Il=\"cloudControl\",El=\"workerTimer\",Tl=\"pullGroupMessage\",Sl=\"qualityStat\",Cl=\"commercialConfig\",Al=function(){function e(t){yn(this,e),this._moduleManager=t,this._className=\"\"}return En(e,[{key:\"isLoggedIn\",value:function(){return this._moduleManager.getModule(ll).isLoggedIn()}},{key:\"isOversea\",value:function(){return this._moduleManager.getModule(ll).isOversea()}},{key:\"getMyUserID\",value:function(){return this._moduleManager.getModule(ll).getUserID()}},{key:\"getMyTinyID\",value:function(){return this._moduleManager.getModule(ll).getTinyID()}},{key:\"getModule\",value:function(e){return this._moduleManager.getModule(e)}},{key:\"getPlatform\",value:function(){return fi}},{key:\"getNetworkType\",value:function(){return this._moduleManager.getModule(gl).getNetworkType()}},{key:\"probeNetwork\",value:function(){return this._moduleManager.getModule(gl).probe()}},{key:\"getCloudConfig\",value:function(e){return this._moduleManager.getModule(Il).getCloudConfig(e)}},{key:\"emitOuterEvent\",value:function(e,t){this._moduleManager.getOuterEmitterInstance().emit(e,t)}},{key:\"emitInnerEvent\",value:function(e,t){this._moduleManager.getInnerEmitterInstance().emit(e,t)}},{key:\"getInnerEmitterInstance\",value:function(){return this._moduleManager.getInnerEmitterInstance()}},{key:\"generateTjgID\",value:function(e){return this._moduleManager.getModule(ll).getTinyID()+\"-\"+e.random}},{key:\"filterModifiedMessage\",value:function(e){if(!Jc(e)){var t=e.filter((function(e){return!0===e.isModified}));t.length>0&&this.emitOuterEvent(Wn.MESSAGE_MODIFIED,t)}}},{key:\"filterUnmodifiedMessage\",value:function(e){return Jc(e)?[]:e.filter((function(e){return!1===e.isModified}))}},{key:\"request\",value:function(e){return this._moduleManager.getModule(vl).request(e)}},{key:\"canIUse\",value:function(e){return this._moduleManager.getModule(Cl).hasPurchasedFeature(e)}}]),e}(),Dl=\"wslogin\",Nl=\"wslogout\",kl=\"wshello\",Ol=\"KickOther\",Rl=\"getmsg\",Ll=\"authkey\",bl=\"sendmsg\",wl=\"send_group_msg\",Gl=\"portrait_get_all\",Pl=\"portrait_set\",Ul=\"black_list_get\",Fl=\"black_list_add\",ql=\"black_list_delete\",xl=\"msgwithdraw\",Vl=\"msgreaded\",Kl=\"set_c2c_peer_mute_notifications\",Bl=\"get_c2c_peer_mute_notifications\",Hl=\"getroammsg\",jl=\"get_peer_read_time\",Wl=\"delete_c2c_msg_ramble\",Yl=\"page_get\",$l=\"get\",zl=\"delete\",Jl=\"top\",Xl=\"deletemsg\",Ql=\"get_joined_group_list\",Zl=\"get_group_self_member_info\",ed=\"create_group\",td=\"destroy_group\",nd=\"modify_group_base_info\",od=\"apply_join_group\",rd=\"apply_join_group_noauth\",ad=\"quit_group\",sd=\"get_group_public_info\",id=\"change_group_owner\",cd=\"handle_apply_join_group\",ud=\"handle_invite_join_group\",ld=\"group_msg_recall\",dd=\"msg_read_report\",pd=\"read_all_unread_msg\",gd=\"group_msg_get\",hd=\"get_group_msg_receipt\",fd=\"group_msg_receipt\",_d=\"get_group_msg_receipt_detail\",md=\"get_pendency\",vd=\"deletemsg\",Md=\"get_msg\",yd=\"get_msg_noauth\",Id=\"get_online_member_num\",Ed=\"delete_group_ramble_msg_by_seq\",Td=\"set_group_attr\",Sd=\"modify_group_attr\",Cd=\"delete_group_attr\",Ad=\"clear_group_attr\",Dd=\"get_group_attr\",Nd=\"get_group_member_info\",kd=\"get_specified_group_member_info\",Od=\"add_group_member\",Rd=\"delete_group_member\",Ld=\"modify_group_member_info\",bd=\"cos\",wd=\"pre_sig\",Gd=\"video_cover\",Pd=\"tim_web_report_v2\",Ud=\"alive\",Fd=\"msg_push\",qd=\"multi_msg_push_ws\",xd=\"ws_msg_push_ack\",Vd=\"stat_forceoffline\",Kd=\"save_relay_json_msg\",Bd=\"get_relay_json_msg\",Hd=\"fetch_config\",jd=\"push_configv2\",Wd=\"fetch_imsdk_purchase_bitsv2\",Yd=\"push_imsdk_purchase_bitsv2\",$d=\"notify2\",zd={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_TINYID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,REPEAT_LOGIN:2025,COS_UNDETECTED:2040,COS_GET_SIG_FAIL:2041,MESSAGE_SEND_FAIL:2100,MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:2103,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_ONPROGRESS_FUNCTION_ERROR:2109,MESSAGE_REVOKE_FAIL:2110,MESSAGE_DELETE_FAIL:2111,MESSAGE_UNREAD_ALL_FAIL:2112,MESSAGE_CONTROL_INFO_FAIL:2113,READ_RECEIPT_SEQUENCE_LIST_EMPTY:2114,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_VIDEO_UPLOAD_FAIL:2350,MESSAGE_VIDEO_SIZE_LIMIT:2351,MESSAGE_VIDEO_TYPES_LIMIT:2352,MESSAGE_FILE_UPLOAD_FAIL:2400,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_MERGER_TYPE_INVALID:2450,MESSAGE_MERGER_KEY_INVALID:2451,MESSAGE_MERGER_DOWNLOAD_FAIL:2452,MESSAGE_FORWARD_TYPE_INVALID:2453,MESSAGE_AT_TYPE_INVALID:2454,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_WORK:2601,ILLEGAL_GROUP_ID:2602,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_Work:2622,MEMBER_NOT_IN_GROUP:2623,CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM:2641,CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN:2642,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:2662,CANNOT_KICK_MEMBER_IN_AVCHATROOM:2680,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,CANNOT_MUTE_SELF:2685,NOT_MY_FRIEND:2700,ALREADY_MY_FRIEND:2701,FRIEND_GROUP_EXISTED:2710,FRIEND_GROUP_NOT_EXIST:2711,FRIEND_APPLICATION_NOT_EXIST:2716,UPDATE_PROFILE_INVALID_PARAM:2721,UPDATE_PROFILE_NO_KEY:2722,ADD_BLACKLIST_INVALID_PARAM:2740,DEL_BLACKLIST_INVALID_PARAM:2741,CANNOT_ADD_SELF_TO_BLACKLIST:2742,ADD_FRIEND_INVALID_PARAM:2760,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NETWORK_BASE_OPTIONS_NO_URL:2802,NETWORK_UNDEFINED_SERVER_NAME:2803,NETWORK_PACKAGE_UNDEFINED:2804,NO_NETWORK:2805,CONVERTOR_IRREGULAR_PARAMS:2900,NOTICE_RUNLOOP_UNEXPECTED_CONDITION:2901,NOTICE_RUNLOOP_OFFSET_LOST:2902,UNCAUGHT_ERROR:2903,GET_LONGPOLL_ID_FAILED:2904,INVALID_OPERATION:2905,OVER_FREQUENCY_LIMIT:2996,CANNOT_FIND_PROTOCOL:2997,CANNOT_FIND_MODULE:2998,SDK_IS_NOT_READY:2999,LOGGING_IN:3e3,LOGIN_FAILED:3001,KICKED_OUT_MULT_DEVICE:3002,KICKED_OUT_MULT_ACCOUNT:3003,KICKED_OUT_USERSIG_EXPIRED:3004,LOGGED_OUT:3005,LONG_POLL_KICK_OUT:91101,MESSAGE_A2KEY_EXPIRED:20002,ACCOUNT_A2KEY_EXPIRED:70001,LONG_POLL_API_PARAM_ERROR:90001,HELLO_ANSWER_KICKED_OUT:1002,OPEN_SERVICE_OVERLOAD_ERROR:60022},Jd={NO_SDKAPPID:\"无 SDKAppID\",NO_ACCOUNT_TYPE:\"无 accountType\",NO_IDENTIFIER:\"无 userID\",NO_USERSIG:\"无 userSig\",NO_TINYID:\"无 tinyID\",NO_A2KEY:\"无 a2key\",USER_NOT_LOGGED_IN:\"用户未登录\",REPEAT_LOGIN:\"重复登录\",COS_UNDETECTED:\"未检测到 COS 上传插件\",COS_GET_SIG_FAIL:\"获取 COS 预签名 URL 失败\",MESSAGE_SEND_FAIL:\"消息发送失败\",MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:\"MessageController.constructor() 需要参数 options\",MESSAGE_SEND_NEED_MESSAGE_INSTANCE:\"需要 Message 的实例\",MESSAGE_SEND_INVALID_CONVERSATION_TYPE:\\'Message.conversationType 只能为 \"C2C\" 或 \"GROUP\"\\',MESSAGE_FILE_IS_EMPTY:\"无法发送空文件\",MESSAGE_ONPROGRESS_FUNCTION_ERROR:\"回调函数运行时遇到错误，请检查接入侧代码\",MESSAGE_REVOKE_FAIL:\"消息撤回失败\",MESSAGE_DELETE_FAIL:\"消息删除失败\",MESSAGE_UNREAD_ALL_FAIL:\"设置所有未读消息为已读处理失败\",MESSAGE_CONTROL_INFO_FAIL:\"社群不支持消息发送控制选项\",READ_RECEIPT_SEQUENCE_LIST_EMPTY:\"发送群已读回执时 sequenceList 为空\",MESSAGE_IMAGE_SELECT_FILE_FIRST:\"请先选择一个图片\",MESSAGE_IMAGE_TYPES_LIMIT:\"只允许上传 jpg png jpeg gif bmp image webp 格式的图片\",MESSAGE_IMAGE_SIZE_LIMIT:\"图片大小超过20M，无法发送\",MESSAGE_AUDIO_UPLOAD_FAIL:\"语音上传失败\",MESSAGE_AUDIO_SIZE_LIMIT:\"语音大小大于20M，无法发送\",MESSAGE_VIDEO_UPLOAD_FAIL:\"视频上传失败\",MESSAGE_VIDEO_SIZE_LIMIT:\"视频大小超过100M，无法发送\",MESSAGE_VIDEO_TYPES_LIMIT:\"只允许上传 mp4 格式的视频\",MESSAGE_FILE_UPLOAD_FAIL:\"文件上传失败\",MESSAGE_FILE_SELECT_FILE_FIRST:\"请先选择一个文件\",MESSAGE_FILE_SIZE_LIMIT:\"文件大小超过100M，无法发送 \",MESSAGE_FILE_URL_IS_EMPTY:\"缺少必要的参数文件 URL\",MESSAGE_MERGER_TYPE_INVALID:\"非合并消息\",MESSAGE_MERGER_KEY_INVALID:\"合并消息的 messageKey 无效\",MESSAGE_MERGER_DOWNLOAD_FAIL:\"下载合并消息失败\",MESSAGE_FORWARD_TYPE_INVALID:\"选择的消息类型（如群提示消息）不可以转发\",MESSAGE_AT_TYPE_INVALID:\"社群不支持 @ 所有人\",CONVERSATION_NOT_FOUND:\"没有找到相应的会话，请检查传入参数\",USER_OR_GROUP_NOT_FOUND:\"没有找到相应的用户或群组，请检查传入参数\",CONVERSATION_UN_RECORDED_TYPE:\"未记录的会话类型\",ILLEGAL_GROUP_TYPE:\"非法的群类型，请检查传入参数\",CANNOT_JOIN_WORK:\"不能加入 Work 类型的群组\",ILLEGAL_GROUP_ID:\"群组 ID 非法，Public/Work/Meeting/AVChatRoom 类型群组不能以 @TGS#_ 为前缀，社群必须以 @TGS#_ 为前缀\",CANNOT_CHANGE_OWNER_IN_AVCHATROOM:\"AVChatRoom 类型的群组不能转让群主\",CANNOT_CHANGE_OWNER_TO_SELF:\"不能把群主转让给自己\",CANNOT_DISMISS_WORK:\"不能解散 Work 类型的群组\",MEMBER_NOT_IN_GROUP:\"用户不在该群组内\",JOIN_GROUP_FAIL:\"加群失败，请检查传入参数或重试\",CANNOT_ADD_MEMBER_IN_AVCHATROOM:\"AVChatRoom 类型的群不支持邀请群成员\",CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:\"非 AVChatRoom 类型的群组不允许匿名加群，请先登录后再加群\",CANNOT_KICK_MEMBER_IN_AVCHATROOM:\"不能在 AVChatRoom 类型的群组踢人\",NOT_OWNER:\"你不是群主，只有群主才有权限操作\",CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:\"不能在 Work / AVChatRoom 类型的群中设置群成员身份\",INVALID_MEMBER_ROLE:\"不合法的群成员身份，请检查传入参数\",CANNOT_SET_SELF_MEMBER_ROLE:\"不能设置自己的群成员身份，请检查传入参数\",CANNOT_MUTE_SELF:\"不能将自己禁言，请检查传入参数\",NOT_MY_FRIEND:\"非好友关系\",ALREADY_MY_FRIEND:\"已经是好友关系\",FRIEND_GROUP_EXISTED:\"好友分组已存在\",FRIEND_GROUP_NOT_EXIST:\"好友分组不存在\",FRIEND_APPLICATION_NOT_EXIST:\"好友申请不存在\",UPDATE_PROFILE_INVALID_PARAM:\"传入 updateMyProfile 接口的参数无效\",UPDATE_PROFILE_NO_KEY:\"updateMyProfile 无标配资料字段或自定义资料字段\",ADD_BLACKLIST_INVALID_PARAM:\"传入 addToBlacklist 接口的参数无效\",DEL_BLACKLIST_INVALID_PARAM:\"传入 removeFromBlacklist 接口的参数无效\",CANNOT_ADD_SELF_TO_BLACKLIST:\"不能拉黑自己\",ADD_FRIEND_INVALID_PARAM:\"传入 addFriend 接口的参数无效\",NETWORK_ERROR:\"网络错误\",NETWORK_TIMEOUT:\"请求超时\",NETWORK_BASE_OPTIONS_NO_URL:\"网络层初始化错误，缺少 URL 参数\",NETWORK_UNDEFINED_SERVER_NAME:\"打包错误，未定义的 serverName\",NETWORK_PACKAGE_UNDEFINED:\"未定义的 packageConfig\",NO_NETWORK:\"未连接到网络\",CONVERTOR_IRREGULAR_PARAMS:\"不规范的参数名称\",NOTICE_RUNLOOP_UNEXPECTED_CONDITION:\"意料外的通知条件\",NOTICE_RUNLOOP_OFFSET_LOST:\"_syncOffset 丢失\",GET_LONGPOLL_ID_FAILED:\"获取 longpolling id 失败\",UNCAUGHT_ERROR:\"未经明确定义的错误\",INVALID_OPERATION:\"无效操作，如调用了未定义或者未实现的方法等\",CANNOT_FIND_PROTOCOL:\"无法找到协议\",CANNOT_FIND_MODULE:\"无法找到模块，请参考：https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-03-sns.html\",SDK_IS_NOT_READY:\"接口需要 SDK 处于 ready 状态后才能调用\",LOGGING:\"用户正在登录中\",LOGIN_FAILED:\"用户登录失败\",KICKED_OUT_MULT_DEVICE:\"用户多终端登录被踢出\",KICKED_OUT_MULT_ACCOUNT:\"用户多实例登录被踢出\",KICKED_OUT_USERSIG_EXPIRED:\"用户 userSig 过期被踢出\",LOGGED_OUT:\"用户已登出\",OVER_FREQUENCY_LIMIT:\"超出 SDK 频率控制\",LONG_POLL_KICK_OUT:\"检测到多个 web 实例登录，消息通道下线\",OPEN_SERVICE_OVERLOAD_ERROR:\"后台服务正忙，请稍后再试\",MESSAGE_A2KEY_EXPIRED:\"消息错误码：UserSig 或 A2 失效。\",ACCOUNT_A2KEY_EXPIRED:\"帐号错误码：UserSig 已过期，请重新生成。建议 UserSig 有效期设置不小于24小时。\",LONG_POLL_API_PARAM_ERROR:\"longPoll API parameters error\"},Xd=\"networkRTT\",Qd=\"messageE2EDelay\",Zd=\"sendMessageC2C\",ep=\"sendMessageGroup\",tp=\"sendMessageGroupAV\",np=\"sendMessageRichMedia\",op=\"cosUpload\",rp=\"messageReceivedGroup\",ap=\"messageReceivedGroupAVPush\",sp=\"messageReceivedGroupAVPull\",ip=(Tn(tl={},Xd,2),Tn(tl,Qd,3),Tn(tl,Zd,4),Tn(tl,ep,5),Tn(tl,tp,6),Tn(tl,np,7),Tn(tl,rp,8),Tn(tl,ap,9),Tn(tl,sp,10),Tn(tl,op,11),tl),cp={info:4,warning:5,error:6},up={wifi:1,\"2g\":2,\"3g\":3,\"4g\":4,\"5g\":5,unknown:6,none:7,online:8},lp={login:4},dp=function(){function e(t){yn(this,e),this.eventType=lp[t]||0,this.timestamp=0,this.networkType=8,this.code=0,this.message=\"\",this.moreMessage=\"\",this.extension=t,this.costTime=0,this.duplicate=!1,this.level=4,this.uiPlatform=void 0,this._sentFlag=!1,this._startts=Wi()}return En(e,[{key:\"updateTimeStamp\",value:function(){this.timestamp=Wi()}},{key:\"start\",value:function(e){return this._startts=e,this}},{key:\"end\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._sentFlag){var n=Wi();0===this.costTime&&(this.costTime=n-this._startts),this.setMoreMessage(\"startts:\".concat(this._startts,\" endts:\").concat(n)),t?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout((function(){e._sentFlag=!0,e._eventStatModule&&e._eventStatModule.pushIn(e)}),0)}}},{key:\"setError\",value:function(e,t,n){return e instanceof Error?(this._sentFlag||(this.setNetworkType(n),t?(e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message)):(this.setCode(zd.NO_NETWORK),this.setMoreMessage(Jd.NO_NETWORK)),this.setLevel(\"error\")),this):(Qi.warn(\"SSOLogData.setError value not instanceof Error, please check!\"),this)}},{key:\"setCode\",value:function(e){return gc(e)||this._sentFlag||(\"ECONNABORTED\"===e&&(this.code=103),cc(e)?this.code=e:Qi.warn(\"SSOLogData.setCode value not a number, please check!\",e,Mn(e))),this}},{key:\"setMessage\",value:function(e){return gc(e)||this._sentFlag||(cc(e)&&(this.message=e.toString()),uc(e)&&(this.message=e)),this}},{key:\"setCostTime\",value:function(e){return this.costTime=e,this}},{key:\"setLevel\",value:function(e){return gc(e)||this._sentFlag||(this.level=cp[e]),this}},{key:\"setMoreMessage\",value:function(e){return Jc(this.moreMessage)?this.moreMessage=\"\".concat(e):this.moreMessage+=\" \".concat(e),this}},{key:\"setNetworkType\",value:function(e){if(gc(e))Qi.warn(\"SSOLogData.setNetworkType value is undefined, please check!\");else{var t=up[e.toLowerCase()];gc(t)||(this.networkType=t)}return this}},{key:\"getStartTs\",value:function(){return this._startts}},{key:\"setUIPlatform\",value:function(e){this.uiPlatform=e}}],[{key:\"bindEventStatModule\",value:function(t){e.prototype._eventStatModule=t}}]),e}(),pp=\"sdkConstruct\",gp=\"sdkReady\",hp=\"login\",fp=\"logout\",_p=\"kickedOut\",mp=\"registerPlugin\",vp=\"kickOther\",Mp=\"wsConnect\",yp=\"wsOnOpen\",Ip=\"wsOnClose\",Ep=\"wsOnError\",Tp=\"networkChange\",Sp=\"getCosAuthKey\",Cp=\"getCosPreSigUrl\",Ap=\"getSnapshotInfo\",Dp=\"upload\",Np=\"sendMessage\",kp=\"sendMessageWithReceipt\",Op=\"getC2CRoamingMessages\",Rp=\"getGroupRoamingMessages\",Lp=\"getReadReceipt\",bp=\"getReadReceiptDetail\",wp=\"sendReadReceipt\",Gp=\"revokeMessage\",Pp=\"deleteMessage\",Up=\"setC2CMessageRead\",Fp=\"setGroupMessageRead\",qp=\"emptyMessageBody\",xp=\"getPeerReadTime\",Vp=\"uploadMergerMessage\",Kp=\"downloadMergerMessage\",Bp=\"jsonParseError\",Hp=\"messageE2EDelayException\",jp=\"getConversationList\",Wp=\"getConversationProfile\",Yp=\"deleteConversation\",$p=\"pinConversation\",zp=\"getConversationListInStorage\",Jp=\"syncConversationList\",Xp=\"setAllMessageRead\",Qp=\"createGroup\",Zp=\"applyJoinGroup\",eg=\"quitGroup\",tg=\"searchGroupByID\",ng=\"changeGroupOwner\",og=\"handleGroupApplication\",rg=\"handleGroupInvitation\",ag=\"setMessageRemindType\",sg=\"dismissGroup\",ig=\"updateGroupProfile\",cg=\"getGroupList\",ug=\"getGroupProfile\",lg=\"getGroupListInStorage\",dg=\"getGroupLastSequence\",pg=\"getGroupMissingMessage\",gg=\"pagingGetGroupList\",hg=\"getGroupSimplifiedInfo\",fg=\"joinWithoutAuth\",_g=\"initGroupAttributes\",mg=\"setGroupAttributes\",vg=\"deleteGroupAttributes\",Mg=\"getGroupAttributes\",yg=\"getGroupMemberList\",Ig=\"getGroupMemberProfile\",Eg=\"addGroupMember\",Tg=\"deleteGroupMember\",Sg=\"setGroupMemberMuteTime\",Cg=\"setGroupMemberNameCard\",Ag=\"setGroupMemberRole\",Dg=\"setGroupMemberCustomField\",Ng=\"getGroupOnlineMemberCount\",kg=\"longPollingAVError\",Og=\"messageLoss\",Rg=\"messageStacked\",Lg=\"getUserProfile\",bg=\"updateMyProfile\",wg=\"getBlacklist\",Gg=\"addToBlacklist\",Pg=\"removeFromBlacklist\",Ug=\"callbackFunctionError\",Fg=\"fetchCloudControlConfig\",qg=\"pushedCloudControlConfig\",xg=\"fetchCommercialConfig\",Vg=\"pushedCommercialConfig\",Kg=\"error\",Bg=\"lastMessageNotExist\",Hg=c.f,jg=function(e){return function(t){for(var n,o=f(t),r=Et(o),s=r.length,i=0,c=[];s>i;)n=r[i++],a&&!Hg.call(o,n)||c.push(e?[n,o[n]]:o[n]);return c}},Wg={entries:jg(!0),values:jg(!1)}.values;ke({target:\"Object\",stat:!0},{values:function(e){return Wg(e)}});var Yg=function(){function e(t){yn(this,e),this.type=Yn.MSG_TEXT,this.content={text:t.text||\"\"}}return En(e,[{key:\"setText\",value:function(e){this.content.text=e}},{key:\"sendable\",value:function(){return 0!==this.content.text.length}}]),e}(),$g=Object.assign,zg=Object.defineProperty,Jg=!$g||r((function(){if(a&&1!==$g({b:1},$g(zg({},\"a\",{enumerable:!0,get:function(){zg(this,\"b\",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,\"abcdefghijklmnopqrst\".split(\"\").forEach((function(e){t[e]=e})),7!=$g({},e)[n]||\"abcdefghijklmnopqrst\"!=Et($g({},t)).join(\"\")}))?function(e,t){for(var n=Le(e),o=arguments.length,r=1,s=ve.f,i=c.f;o>r;)for(var u,l=g(arguments[r++]),d=s?Et(l).concat(s(l)):Et(l),p=d.length,h=0;p>h;)u=d[h++],a&&!i.call(l,u)||(n[u]=l[u]);return n}:$g;ke({target:\"Object\",stat:!0,forced:Object.assign!==Jg},{assign:Jg});var Xg=qe(\"iterator\"),Qg=!r((function(){var e=new URL(\"b?a=1&b=2&c=3\",\"http://a\"),t=e.searchParams,n=\"\";return e.pathname=\"c%20d\",t.forEach((function(e,o){t.delete(\"b\"),n+=o+e})),!t.sort||\"http://a/c%20d?a=1&c=3\"!==e.href||\"3\"!==t.get(\"c\")||\"a=1\"!==String(new URLSearchParams(\"?a=1\"))||!t[Xg]||\"a\"!==new URL(\"https://a@b\").username||\"b\"!==new URLSearchParams(new URLSearchParams(\"a=b\")).get(\"a\")||\"xn--e1aybc\"!==new URL(\"http://тест\").host||\"#%D0%B1\"!==new URL(\"http://a#б\").hash||\"a1c3\"!==n||\"x\"!==new URL(\"http://x\",void 0).host})),Zg=/[^\\\\0-\\\\u007E]/,eh=/[.\\\\u3002\\\\uFF0E\\\\uFF61]/g,th=\"Overflow: input needs wider integers to process\",nh=Math.floor,oh=String.fromCharCode,rh=function(e){return e+22+75*(e<26)},ah=function(e,t,n){var o=0;for(e=n?nh(e/700):e>>1,e+=nh(e/t);e>455;o+=36)e=nh(e/35);return nh(o+36*e/(e+38))},sh=function(e){var t,n,o=[],r=(e=function(e){for(var t=[],n=0,o=e.length;n<o;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<o){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&r)<<10)+(1023&a)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,a=128,s=0,i=72;for(t=0;t<e.length;t++)(n=e[t])<128&&o.push(oh(n));var c=o.length,u=c;for(c&&o.push(\"-\");u<r;){var l=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=a&&n<l&&(l=n);var d=u+1;if(l-a>nh((2147483647-s)/d))throw RangeError(th);for(s+=(l-a)*d,a=l,t=0;t<e.length;t++){if((n=e[t])<a&&++s>2147483647)throw RangeError(th);if(n==a){for(var p=s,g=36;;g+=36){var h=g<=i?1:g>=i+26?26:g-i;if(p<h)break;var f=p-h,_=36-h;o.push(oh(rh(h+f%_))),p=nh(f/_)}o.push(oh(rh(p))),i=ah(s,d,u==c),s=0,++u}}++s,++a}return o.join(\"\")},ih=function(e){var t=gt(e);if(\"function\"!=typeof t)throw TypeError(String(e)+\" is not iterable\");return A(t.call(e))},ch=ne(\"fetch\"),uh=ne(\"Headers\"),lh=qe(\"iterator\"),dh=Q.set,ph=Q.getterFor(\"URLSearchParams\"),gh=Q.getterFor(\"URLSearchParamsIterator\"),hh=/\\\\+/g,fh=Array(4),_h=function(e){return fh[e-1]||(fh[e-1]=RegExp(\"((?:%[\\\\\\\\da-f]{2}){\"+e+\"})\",\"gi\"))},mh=function(e){try{return decodeURIComponent(e)}catch(sI){return e}},vh=function(e){var t=e.replace(hh,\" \"),n=4;try{return decodeURIComponent(t)}catch(sI){for(;n;)t=t.replace(_h(n--),mh);return t}},Mh=/[!\\'()~]|%20/g,yh={\"!\":\"%21\",\"\\'\":\"%27\",\"(\":\"%28\",\")\":\"%29\",\"~\":\"%7E\",\"%20\":\"+\"},Ih=function(e){return yh[e]},Eh=function(e){return encodeURIComponent(e).replace(Mh,Ih)},Th=function(e,t){if(t)for(var n,o,r=t.split(\"&\"),a=0;a<r.length;)(n=r[a++]).length&&(o=n.split(\"=\"),e.push({key:vh(o.shift()),value:vh(o.join(\"=\"))}))},Sh=function(e){this.entries.length=0,Th(this.entries,e)},Ch=function(e,t){if(e<t)throw TypeError(\"Not enough arguments\")},Ah=rn((function(e,t){dh(this,{type:\"URLSearchParamsIterator\",iterator:ih(ph(e).entries),kind:t})}),\"Iterator\",(function(){var e=gh(this),t=e.kind,n=e.iterator.next(),o=n.value;return n.done||(n.value=\"keys\"===t?o.key:\"values\"===t?o.value:[o.key,o.value]),n})),Dh=function(){kr(this,Dh,\"URLSearchParams\");var e,t,n,o,r,a,s,i,c,u=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(dh(l,{type:\"URLSearchParams\",entries:d,updateURL:function(){},updateSearchParams:Sh}),void 0!==u)if(_(u))if(\"function\"==typeof(e=gt(u)))for(n=(t=e.call(u)).next;!(o=n.call(t)).done;){if((s=(a=(r=ih(A(o.value))).next).call(r)).done||(i=a.call(r)).done||!a.call(r).done)throw TypeError(\"Expected sequence with length 2\");d.push({key:s.value+\"\",value:i.value+\"\"})}else for(c in u)M(u,c)&&d.push({key:c,value:u[c]+\"\"});else Th(d,\"string\"==typeof u?\"?\"===u.charAt(0)?u.slice(1):u:u+\"\")},Nh=Dh.prototype;Ar(Nh,{append:function(e,t){Ch(arguments.length,2);var n=ph(this);n.entries.push({key:e+\"\",value:t+\"\"}),n.updateURL()},delete:function(e){Ch(arguments.length,1);for(var t=ph(this),n=t.entries,o=e+\"\",r=0;r<n.length;)n[r].key===o?n.splice(r,1):r++;t.updateURL()},get:function(e){Ch(arguments.length,1);for(var t=ph(this).entries,n=e+\"\",o=0;o<t.length;o++)if(t[o].key===n)return t[o].value;return null},getAll:function(e){Ch(arguments.length,1);for(var t=ph(this).entries,n=e+\"\",o=[],r=0;r<t.length;r++)t[r].key===n&&o.push(t[r].value);return o},has:function(e){Ch(arguments.length,1);for(var t=ph(this).entries,n=e+\"\",o=0;o<t.length;)if(t[o++].key===n)return!0;return!1},set:function(e,t){Ch(arguments.length,1);for(var n,o=ph(this),r=o.entries,a=!1,s=e+\"\",i=t+\"\",c=0;c<r.length;c++)(n=r[c]).key===s&&(a?r.splice(c--,1):(a=!0,n.value=i));a||r.push({key:s,value:i}),o.updateURL()},sort:function(){var e,t,n,o=ph(this),r=o.entries,a=r.slice();for(r.length=0,n=0;n<a.length;n++){for(e=a[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}o.updateURL()},forEach:function(e){for(var t,n=ph(this).entries,o=Re(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)o((t=n[r++]).value,t.key,this)},keys:function(){return new Ah(this,\"keys\")},values:function(){return new Ah(this,\"values\")},entries:function(){return new Ah(this,\"entries\")}},{enumerable:!0}),Z(Nh,lh,Nh.entries),Z(Nh,\"toString\",(function(){for(var e,t=ph(this).entries,n=[],o=0;o<t.length;)e=t[o++],n.push(Eh(e.key)+\"=\"+Eh(e.value));return n.join(\"&\")}),{enumerable:!0}),tn(Dh,\"URLSearchParams\"),ke({global:!0,forced:!Qg},{URLSearchParams:Dh}),Qg||\"function\"!=typeof ch||\"function\"!=typeof uh||ke({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,o,r=[e];return arguments.length>1&&(t=arguments[1],_(t)&&(n=t.body,\"URLSearchParams\"===dt(n)&&((o=t.headers?new uh(t.headers):new uh).has(\"content-type\")||o.set(\"content-type\",\"application/x-www-form-urlencoded;charset=UTF-8\"),t=kt(t,{body:u(0,String(n)),headers:u(0,o)}))),r.push(t)),ch.apply(this,r)}});var kh,Oh={URLSearchParams:Dh,getState:ph},Rh=jt.codeAt,Lh=o.URL,bh=Oh.URLSearchParams,wh=Oh.getState,Gh=Q.set,Ph=Q.getterFor(\"URL\"),Uh=Math.floor,Fh=Math.pow,qh=/[A-Za-z]/,xh=/[\\\\d+\\\\-.A-Za-z]/,Vh=/\\\\d/,Kh=/^(0x|0X)/,Bh=/^[0-7]+$/,Hh=/^\\\\d+$/,jh=/^[\\\\dA-Fa-f]+$/,Wh=/[\\\\u0000\\\\u0009\\\\u000A\\\\u000D #%/:?@[\\\\\\\\]]/,Yh=/[\\\\u0000\\\\u0009\\\\u000A\\\\u000D #/:?@[\\\\\\\\]]/,$h=/^[\\\\u0000-\\\\u001F ]+|[\\\\u0000-\\\\u001F ]+$/g,zh=/[\\\\u0009\\\\u000A\\\\u000D]/g,Jh=function(e,t){var n,o,r;if(\"[\"==t.charAt(0)){if(\"]\"!=t.charAt(t.length-1))return\"Invalid host\";if(!(n=Qh(t.slice(1,-1))))return\"Invalid host\";e.host=n}else if(sf(e)){if(t=function(e){var t,n,o=[],r=e.toLowerCase().replace(eh,\".\").split(\".\");for(t=0;t<r.length;t++)n=r[t],o.push(Zg.test(n)?\"xn--\"+sh(n):n);return o.join(\".\")}(t),Wh.test(t))return\"Invalid host\";if(null===(n=Xh(t)))return\"Invalid host\";e.host=n}else{if(Yh.test(t))return\"Invalid host\";for(n=\"\",o=ht(t),r=0;r<o.length;r++)n+=rf(o[r],ef);e.host=n}},Xh=function(e){var t,n,o,r,a,s,i,c=e.split(\".\");if(c.length&&\"\"==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(n=[],o=0;o<t;o++){if(\"\"==(r=c[o]))return e;if(a=10,r.length>1&&\"0\"==r.charAt(0)&&(a=Kh.test(r)?16:8,r=r.slice(8==a?1:2)),\"\"===r)s=0;else{if(!(10==a?Hh:8==a?Bh:jh).test(r))return e;s=parseInt(r,a)}n.push(s)}for(o=0;o<t;o++)if(s=n[o],o==t-1){if(s>=Fh(256,5-t))return null}else if(s>255)return null;for(i=n.pop(),o=0;o<n.length;o++)i+=n[o]*Fh(256,3-o);return i},Qh=function(e){var t,n,o,r,a,s,i,c=[0,0,0,0,0,0,0,0],u=0,l=null,d=0,p=function(){return e.charAt(d)};if(\":\"==p()){if(\":\"!=e.charAt(1))return;d+=2,l=++u}for(;p();){if(8==u)return;if(\":\"!=p()){for(t=n=0;n<4&&jh.test(p());)t=16*t+parseInt(p(),16),d++,n++;if(\".\"==p()){if(0==n)return;if(d-=n,u>6)return;for(o=0;p();){if(r=null,o>0){if(!(\".\"==p()&&o<4))return;d++}if(!Vh.test(p()))return;for(;Vh.test(p());){if(a=parseInt(p(),10),null===r)r=a;else{if(0==r)return;r=10*r+a}if(r>255)return;d++}c[u]=256*c[u]+r,2!=++o&&4!=o||u++}if(4!=o)return;break}if(\":\"==p()){if(d++,!p())return}else if(p())return;c[u++]=t}else{if(null!==l)return;d++,l=++u}}if(null!==l)for(s=u-l,u=7;0!=u&&s>0;)i=c[u],c[u--]=c[l+s-1],c[l+--s]=i;else if(8!=u)return;return c},Zh=function(e){var t,n,o,r;if(\"number\"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=Uh(e/256);return t.join(\".\")}if(\"object\"==typeof e){for(t=\"\",o=function(e){for(var t=null,n=1,o=null,r=0,a=0;a<8;a++)0!==e[a]?(r>n&&(t=o,n=r),o=null,r=0):(null===o&&(o=a),++r);return r>n&&(t=o,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),o===n?(t+=n?\":\":\"::\",r=!0):(t+=e[n].toString(16),n<7&&(t+=\":\")));return\"[\"+t+\"]\"}return e},ef={},tf=Jg({},ef,{\" \":1,\\'\"\\':1,\"<\":1,\">\":1,\"`\":1}),nf=Jg({},tf,{\"#\":1,\"?\":1,\"{\":1,\"}\":1}),of=Jg({},nf,{\"/\":1,\":\":1,\";\":1,\"=\":1,\"@\":1,\"[\":1,\"\\\\\\\\\":1,\"]\":1,\"^\":1,\"|\":1}),rf=function(e,t){var n=Rh(e,0);return n>32&&n<127&&!M(t,e)?e:encodeURIComponent(e)},af={ftp:21,file:null,http:80,https:443,ws:80,wss:443},sf=function(e){return M(af,e.scheme)},cf=function(e){return\"\"!=e.username||\"\"!=e.password},uf=function(e){return!e.host||e.cannotBeABaseURL||\"file\"==e.scheme},lf=function(e,t){var n;return 2==e.length&&qh.test(e.charAt(0))&&(\":\"==(n=e.charAt(1))||!t&&\"|\"==n)},df=function(e){var t;return e.length>1&&lf(e.slice(0,2))&&(2==e.length||\"/\"===(t=e.charAt(2))||\"\\\\\\\\\"===t||\"?\"===t||\"#\"===t)},pf=function(e){var t=e.path,n=t.length;!n||\"file\"==e.scheme&&1==n&&lf(t[0],!0)||t.pop()},gf=function(e){return\".\"===e||\"%2e\"===e.toLowerCase()},hf={},ff={},_f={},mf={},vf={},Mf={},yf={},If={},Ef={},Tf={},Sf={},Cf={},Af={},Df={},Nf={},kf={},Of={},Rf={},Lf={},bf={},wf={},Gf=function(e,t,n,o){var r,a,s,i,c,u=n||hf,l=0,d=\"\",p=!1,g=!1,h=!1;for(n||(e.scheme=\"\",e.username=\"\",e.password=\"\",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace($h,\"\")),t=t.replace(zh,\"\"),r=ht(t);l<=r.length;){switch(a=r[l],u){case hf:if(!a||!qh.test(a)){if(n)return\"Invalid scheme\";u=_f;continue}d+=a.toLowerCase(),u=ff;break;case ff:if(a&&(xh.test(a)||\"+\"==a||\"-\"==a||\".\"==a))d+=a.toLowerCase();else{if(\":\"!=a){if(n)return\"Invalid scheme\";d=\"\",u=_f,l=0;continue}if(n&&(sf(e)!=M(af,d)||\"file\"==d&&(cf(e)||null!==e.port)||\"file\"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(sf(e)&&af[e.scheme]==e.port&&(e.port=null));d=\"\",\"file\"==e.scheme?u=Df:sf(e)&&o&&o.scheme==e.scheme?u=mf:sf(e)?u=If:\"/\"==r[l+1]?(u=vf,l++):(e.cannotBeABaseURL=!0,e.path.push(\"\"),u=Lf)}break;case _f:if(!o||o.cannotBeABaseURL&&\"#\"!=a)return\"Invalid scheme\";if(o.cannotBeABaseURL&&\"#\"==a){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",e.cannotBeABaseURL=!0,u=wf;break}u=\"file\"==o.scheme?Df:Mf;continue;case mf:if(\"/\"!=a||\"/\"!=r[l+1]){u=Mf;continue}u=Ef,l++;break;case vf:if(\"/\"==a){u=Tf;break}u=Rf;continue;case Mf:if(e.scheme=o.scheme,a==kh)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if(\"/\"==a||\"\\\\\\\\\"==a&&sf(e))u=yf;else if(\"?\"==a)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=\"\",u=bf;else{if(\"#\"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),u=Rf;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",u=wf}break;case yf:if(!sf(e)||\"/\"!=a&&\"\\\\\\\\\"!=a){if(\"/\"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,u=Rf;continue}u=Tf}else u=Ef;break;case If:if(u=Ef,\"/\"!=a||\"/\"!=d.charAt(l+1))continue;l++;break;case Ef:if(\"/\"!=a&&\"\\\\\\\\\"!=a){u=Tf;continue}break;case Tf:if(\"@\"==a){p&&(d=\"%40\"+d),p=!0,s=ht(d);for(var f=0;f<s.length;f++){var _=s[f];if(\":\"!=_||h){var m=rf(_,of);h?e.password+=m:e.username+=m}else h=!0}d=\"\"}else if(a==kh||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&sf(e)){if(p&&\"\"==d)return\"Invalid authority\";l-=ht(d).length+1,d=\"\",u=Sf}else d+=a;break;case Sf:case Cf:if(n&&\"file\"==e.scheme){u=kf;continue}if(\":\"!=a||g){if(a==kh||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&sf(e)){if(sf(e)&&\"\"==d)return\"Invalid host\";if(n&&\"\"==d&&(cf(e)||null!==e.port))return;if(i=Jh(e,d))return i;if(d=\"\",u=Of,n)return;continue}\"[\"==a?g=!0:\"]\"==a&&(g=!1),d+=a}else{if(\"\"==d)return\"Invalid host\";if(i=Jh(e,d))return i;if(d=\"\",u=Af,n==Cf)return}break;case Af:if(!Vh.test(a)){if(a==kh||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&sf(e)||n){if(\"\"!=d){var v=parseInt(d,10);if(v>65535)return\"Invalid port\";e.port=sf(e)&&v===af[e.scheme]?null:v,d=\"\"}if(n)return;u=Of;continue}return\"Invalid port\"}d+=a;break;case Df:if(e.scheme=\"file\",\"/\"==a||\"\\\\\\\\\"==a)u=Nf;else{if(!o||\"file\"!=o.scheme){u=Rf;continue}if(a==kh)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if(\"?\"==a)e.host=o.host,e.path=o.path.slice(),e.query=\"\",u=bf;else{if(\"#\"!=a){df(r.slice(l).join(\"\"))||(e.host=o.host,e.path=o.path.slice(),pf(e)),u=Rf;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",u=wf}}break;case Nf:if(\"/\"==a||\"\\\\\\\\\"==a){u=kf;break}o&&\"file\"==o.scheme&&!df(r.slice(l).join(\"\"))&&(lf(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),u=Rf;continue;case kf:if(a==kh||\"/\"==a||\"\\\\\\\\\"==a||\"?\"==a||\"#\"==a){if(!n&&lf(d))u=Rf;else if(\"\"==d){if(e.host=\"\",n)return;u=Of}else{if(i=Jh(e,d))return i;if(\"localhost\"==e.host&&(e.host=\"\"),n)return;d=\"\",u=Of}continue}d+=a;break;case Of:if(sf(e)){if(u=Rf,\"/\"!=a&&\"\\\\\\\\\"!=a)continue}else if(n||\"?\"!=a)if(n||\"#\"!=a){if(a!=kh&&(u=Rf,\"/\"!=a))continue}else e.fragment=\"\",u=wf;else e.query=\"\",u=bf;break;case Rf:if(a==kh||\"/\"==a||\"\\\\\\\\\"==a&&sf(e)||!n&&(\"?\"==a||\"#\"==a)){if(\"..\"===(c=(c=d).toLowerCase())||\"%2e.\"===c||\".%2e\"===c||\"%2e%2e\"===c?(pf(e),\"/\"==a||\"\\\\\\\\\"==a&&sf(e)||e.path.push(\"\")):gf(d)?\"/\"==a||\"\\\\\\\\\"==a&&sf(e)||e.path.push(\"\"):(\"file\"==e.scheme&&!e.path.length&&lf(d)&&(e.host&&(e.host=\"\"),d=d.charAt(0)+\":\"),e.path.push(d)),d=\"\",\"file\"==e.scheme&&(a==kh||\"?\"==a||\"#\"==a))for(;e.path.length>1&&\"\"===e.path[0];)e.path.shift();\"?\"==a?(e.query=\"\",u=bf):\"#\"==a&&(e.fragment=\"\",u=wf)}else d+=rf(a,nf);break;case Lf:\"?\"==a?(e.query=\"\",u=bf):\"#\"==a?(e.fragment=\"\",u=wf):a!=kh&&(e.path[0]+=rf(a,ef));break;case bf:n||\"#\"!=a?a!=kh&&(\"\\'\"==a&&sf(e)?e.query+=\"%27\":e.query+=\"#\"==a?\"%23\":rf(a,ef)):(e.fragment=\"\",u=wf);break;case wf:a!=kh&&(e.fragment+=rf(a,tf))}l++}},Pf=function(e){var t,n,o=kr(this,Pf,\"URL\"),r=arguments.length>1?arguments[1]:void 0,s=String(e),i=Gh(o,{type:\"URL\"});if(void 0!==r)if(r instanceof Pf)t=Ph(r);else if(n=Gf(t={},String(r)))throw TypeError(n);if(n=Gf(i,s,null,t))throw TypeError(n);var c=i.searchParams=new bh,u=wh(c);u.updateSearchParams(i.query),u.updateURL=function(){i.query=String(c)||null},a||(o.href=Ff.call(o),o.origin=qf.call(o),o.protocol=xf.call(o),o.username=Vf.call(o),o.password=Kf.call(o),o.host=Bf.call(o),o.hostname=Hf.call(o),o.port=jf.call(o),o.pathname=Wf.call(o),o.search=Yf.call(o),o.searchParams=$f.call(o),o.hash=zf.call(o))},Uf=Pf.prototype,Ff=function(){var e=Ph(this),t=e.scheme,n=e.username,o=e.password,r=e.host,a=e.port,s=e.path,i=e.query,c=e.fragment,u=t+\":\";return null!==r?(u+=\"//\",cf(e)&&(u+=n+(o?\":\"+o:\"\")+\"@\"),u+=Zh(r),null!==a&&(u+=\":\"+a)):\"file\"==t&&(u+=\"//\"),u+=e.cannotBeABaseURL?s[0]:s.length?\"/\"+s.join(\"/\"):\"\",null!==i&&(u+=\"?\"+i),null!==c&&(u+=\"#\"+c),u},qf=function(){var e=Ph(this),t=e.scheme,n=e.port;if(\"blob\"==t)try{return new URL(t.path[0]).origin}catch(sI){return\"null\"}return\"file\"!=t&&sf(e)?t+\"://\"+Zh(e.host)+(null!==n?\":\"+n:\"\"):\"null\"},xf=function(){return Ph(this).scheme+\":\"},Vf=function(){return Ph(this).username},Kf=function(){return Ph(this).password},Bf=function(){var e=Ph(this),t=e.host,n=e.port;return null===t?\"\":null===n?Zh(t):Zh(t)+\":\"+n},Hf=function(){var e=Ph(this).host;return null===e?\"\":Zh(e)},jf=function(){var e=Ph(this).port;return null===e?\"\":String(e)},Wf=function(){var e=Ph(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?\"/\"+t.join(\"/\"):\"\"},Yf=function(){var e=Ph(this).query;return e?\"?\"+e:\"\"},$f=function(){return Ph(this).searchParams},zf=function(){var e=Ph(this).fragment;return e?\"#\"+e:\"\"},Jf=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&Tt(Uf,{href:Jf(Ff,(function(e){var t=Ph(this),n=String(e),o=Gf(t,n);if(o)throw TypeError(o);wh(t.searchParams).updateSearchParams(t.query)})),origin:Jf(qf),protocol:Jf(xf,(function(e){var t=Ph(this);Gf(t,String(e)+\":\",hf)})),username:Jf(Vf,(function(e){var t=Ph(this),n=ht(String(e));if(!uf(t)){t.username=\"\";for(var o=0;o<n.length;o++)t.username+=rf(n[o],of)}})),password:Jf(Kf,(function(e){var t=Ph(this),n=ht(String(e));if(!uf(t)){t.password=\"\";for(var o=0;o<n.length;o++)t.password+=rf(n[o],of)}})),host:Jf(Bf,(function(e){var t=Ph(this);t.cannotBeABaseURL||Gf(t,String(e),Sf)})),hostname:Jf(Hf,(function(e){var t=Ph(this);t.cannotBeABaseURL||Gf(t,String(e),Cf)})),port:Jf(jf,(function(e){var t=Ph(this);uf(t)||(\"\"==(e=String(e))?t.port=null:Gf(t,e,Af))})),pathname:Jf(Wf,(function(e){var t=Ph(this);t.cannotBeABaseURL||(t.path=[],Gf(t,e+\"\",Of))})),search:Jf(Yf,(function(e){var t=Ph(this);\"\"==(e=String(e))?t.query=null:(\"?\"==e.charAt(0)&&(e=e.slice(1)),t.query=\"\",Gf(t,e,bf)),wh(t.searchParams).updateSearchParams(t.query)})),searchParams:Jf($f),hash:Jf(zf,(function(e){var t=Ph(this);\"\"!=(e=String(e))?(\"#\"==e.charAt(0)&&(e=e.slice(1)),t.fragment=\"\",Gf(t,e,wf)):t.fragment=null}))}),Z(Uf,\"toJSON\",(function(){return Ff.call(this)}),{enumerable:!0}),Z(Uf,\"toString\",(function(){return Ff.call(this)}),{enumerable:!0}),Lh){var Xf=Lh.createObjectURL,Qf=Lh.revokeObjectURL;Xf&&Z(Pf,\"createObjectURL\",(function(e){return Xf.apply(Lh,arguments)})),Qf&&Z(Pf,\"revokeObjectURL\",(function(e){return Qf.apply(Lh,arguments)}))}tn(Pf,\"URL\"),ke({global:!0,forced:!Qg,sham:!a},{URL:Pf});var Zf=function(){function e(t){yn(this,e),this._imageMemoryURL=\"\",pi?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=Yn.MSG_IMAGE,this._percent=0,this.content={imageFormat:t.imageFormat||Zi.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._defaultImage=\"http://imgcache.qq.com/open/qcloud/video/act/webim-images/default.jpg\",this._autoFixUrl()}return En(e,[{key:\"_initImageInfoModel\",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=Sc(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||\"\",this.url=t.url||e._imageMemoryURL||e._defaultImage},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:\"initImageInfoArray\",value:function(e){for(var t=0,n=null,o=null;t<=2;)o=gc(e)||gc(e[t])?{type:0,size:0,width:0,height:0,url:\"\"}:e[t],(n=new this._ImageInfoModel(o)).setSizeType(t+1),n.setType(t),this.addImageInfo(n),t++;this.updateAccessSideImageInfoArray()}},{key:\"updateImageInfoArray\",value:function(e){for(var t,n=this.content.imageInfoArray.length,o=0;o<n;o++)t=this.content.imageInfoArray[o],e[o].size&&(t.size=e[o].size),e[o].url&&t.setImageUrl(e[o].url),e[o].width&&(t.width=e[o].width),e[o].height&&(t.height=e[o].height)}},{key:\"_autoFixUrl\",value:function(){for(var e=this.content.imageInfoArray.length,t=\"\",n=\"\",o=[\"http\",\"https\"],r=null,a=0;a<e;a++)this.content.imageInfoArray[a].url&&\"\"!==(r=this.content.imageInfoArray[a]).imageUrl&&(n=r.imageUrl.slice(0,r.imageUrl.indexOf(\"://\")+1),t=r.imageUrl.slice(r.imageUrl.indexOf(\"://\")+1),o.indexOf(n)<0&&(n=\"https:\"),this.content.imageInfoArray[a].setImageUrl([n,t].join(\"\")))}},{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateImageFormat\",value:function(e){this.content.imageFormat=Zi[e.toUpperCase()]||Zi.UNKNOWN}},{key:\"createImageDataASURLInWeb\",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:\"createImageDataASURLInWXMiniApp\",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:\"replaceImageInfo\",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:\"addImageInfo\",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:\"updateAccessSideImageInfoArray\",value:function(){var e=this.content.imageInfoArray,t=e[0],n=t.width,o=void 0===n?0:n,r=t.height,a=void 0===r?0:r;0!==o&&0!==a&&(Hc(e),Object.assign(e[2],Bc({originWidth:o,originHeight:a,min:720})))}},{key:\"sendable\",value:function(){return 0!==this.content.imageInfoArray.length&&(\"\"!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size)}}]),e}(),e_=function(){function e(t){yn(this,e),this.type=Yn.MSG_FACE,this.content=t||null}return En(e,[{key:\"sendable\",value:function(){return null!==this.content}}]),e}(),t_=function(){function e(t){yn(this,e),this.type=Yn.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:t.url,remoteAudioUrl:t.url||\"\",uuid:t.uuid}}return En(e,[{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateAudioUrl\",value:function(e){this.content.remoteAudioUrl=e}},{key:\"sendable\",value:function(){return\"\"!==this.content.remoteAudioUrl}}]),e}(),n_={from:!0,groupID:!0,groupName:!0,to:!0},o_=function(){function e(t){yn(this,e),this.type=Yn.MSG_GRP_TIP,this.content={},this._initContent(t)}return En(e,[{key:\"_initContent\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"remarkInfo\":break;case\"groupProfile\":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case\"operatorInfo\":break;case\"memberInfoList\":case\"msgMemberInfo\":t._updateMemberList(e[n]);break;case\"onlineMemberInfo\":break;case\"memberNum\":t.content[n]=e[n],t.content.memberCount=e[n];break;default:t.content[n]=e[n]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:\"_initGroupProfile\",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];n_[o]&&(this.content.groupProfile[o]=e[o])}}},{key:\"_updateMemberList\",value:function(e){Jc(this.content.memberList)?this.content.memberList=e:this.content.memberList.forEach((function(t){e.forEach((function(e){t.userID===e.userID&&Object.assign(t,e)}))}))}}]),e}(),r_={from:!0,groupID:!0,groupName:!0,to:!0},a_=function(){function e(t){yn(this,e),this.type=Yn.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return En(e,[{key:\"_initContent\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"memberInfoList\":break;case\"remarkInfo\":t.content.handleMessage=e[n];break;case\"groupProfile\":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}}))}},{key:\"_initGroupProfile\",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];r_[o]&&(\"groupName\"===o?this.content.groupProfile.name=e[o]:this.content.groupProfile[o]=e[o])}}}]),e}(),s_=Math.min,i_=[].lastIndexOf,c_=!!i_&&1/[1].lastIndexOf(1,-0)<0,u_=je(\"lastIndexOf\"),l_=ze(\"indexOf\",{ACCESSORS:!0,1:0}),d_=c_||!u_||!l_?function(e){if(c_)return i_.apply(this,arguments)||0;var t=f(this),n=ie(t.length),o=n-1;for(arguments.length>1&&(o=s_(o,ae(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:i_;ke({target:\"Array\",proto:!0,forced:d_!==[].lastIndexOf},{lastIndexOf:d_});var p_=function(){function e(t){yn(this,e),this.type=Yn.MSG_FILE,this._percent=0;var n=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:t.url||\"\",uuid:t.uuid,fileName:n.name||\"\",fileSize:n.size||0}}return En(e,[{key:\"_getFileInfo\",value:function(e){if(!gc(e.fileName)&&!gc(e.fileSize))return{size:e.fileSize,name:e.fileName};var t=e.file.files[0];if(li){if(t.path&&-1!==t.path.indexOf(\".\")){var n=t.path.slice(t.path.lastIndexOf(\".\")+1).toLowerCase();t.type=n,t.name||(t.name=\"\".concat(Sc(999999),\".\").concat(n))}t.name||(t.type=\"\",t.name=t.path.slice(t.path.lastIndexOf(\"/\")+1).toLowerCase()),t.suffix&&(t.type=t.suffix),t.url||(t.url=t.path)}return{size:t.size,name:t.name}}},{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateFileUrl\",value:function(e){this.content.fileUrl=e}},{key:\"sendable\",value:function(){return\"\"!==this.content.fileUrl&&(\"\"!==this.content.fileName&&0!==this.content.fileSize)}}]),e}(),g_=function(){function e(t){yn(this,e),this.type=Yn.MSG_CUSTOM,this.content={data:t.data||\"\",description:t.description||\"\",extension:t.extension||\"\"}}return En(e,[{key:\"setData\",value:function(e){return this.content.data=e,this}},{key:\"setDescription\",value:function(e){return this.content.description=e,this}},{key:\"setExtension\",value:function(e){return this.content.extension=e,this}},{key:\"sendable\",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),e}(),h_=function(){function e(t){yn(this,e),this.type=Yn.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl||t.videoUrl||\"\",videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:t.videoUrl,videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,snapshotWidth:t.thumbWidth,thumbHeight:t.thumbHeight,snapshotHeight:t.thumbHeight,thumbSize:t.thumbSize,snapshotSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:t.thumbUrl,snapshotUrl:t.thumbUrl}}return En(e,[{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateVideoUrl\",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:\"updateSnapshotInfo\",value:function(e){var t=e.snapshotUrl,n=e.snapshotWidth,o=e.snapshotHeight;Jc(t)||(this.content.thumbUrl=this.content.snapshotUrl=t),Jc(n)||(this.content.thumbWidth=this.content.snapshotWidth=Number(n)),Jc(o)||(this.content.thumbHeight=this.content.snapshotHeight=Number(o))}},{key:\"sendable\",value:function(){return\"\"!==this.content.remoteVideoUrl}}]),e}(),f_=function(){function e(t){yn(this,e),this.type=Yn.MSG_LOCATION;var n=t.description,o=t.longitude,r=t.latitude;this.content={description:n,longitude:o,latitude:r}}return En(e,[{key:\"sendable\",value:function(){return!0}}]),e}(),__=function(){function e(t){if(yn(this,e),this.from=t.from,this.messageSender=t.from,this.time=t.time,this.messageSequence=t.sequence,this.clientSequence=t.clientSequence||t.sequence,this.messageRandom=t.random,this.cloudCustomData=t.cloudCustomData||\"\",t.ID)this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.messageBody=[{type:t.type,payload:t.payload}],t.conversationType.startsWith(Yn.CONV_C2C)?this.receiverUserID=t.to:t.conversationType.startsWith(Yn.CONV_GROUP)&&(this.receiverGroupID=t.to),this.messageReceiver=t.to;else{this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.messageBody=[];var n=t.elements[0].type,o=t.elements[0].content;this._patchRichMediaPayload(n,o),n===Yn.MSG_MERGER?this.messageBody.push({type:n,payload:new m_(o).content}):this.messageBody.push({type:n,payload:o}),t.groupID&&(this.receiverGroupID=t.groupID,this.messageReceiver=t.groupID),t.to&&(this.receiverUserID=t.to,this.messageReceiver=t.to)}}return En(e,[{key:\"_patchRichMediaPayload\",value:function(e,t){e===Yn.MSG_IMAGE?t.imageInfoArray.forEach((function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))})):e===Yn.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===Yn.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===Yn.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}}]),e}(),m_=function(){function e(t){if(yn(this,e),this.type=Yn.MSG_MERGER,this.content={downloadKey:\"\",pbDownloadKey:\"\",messageList:[],title:\"\",abstractList:[],compatibleText:\"\",version:0,layersOverLimit:!1},t.downloadKey){var n=t.downloadKey,o=t.pbDownloadKey,r=t.title,a=t.abstractList,s=t.compatibleText,i=t.version;this.content.downloadKey=n,this.content.pbDownloadKey=o,this.content.title=r,this.content.abstractList=a,this.content.compatibleText=s,this.content.version=i||0}else if(Jc(t.messageList))1===t.layersOverLimit&&(this.content.layersOverLimit=!0);else{var c=t.messageList,u=t.title,l=t.abstractList,d=t.compatibleText,p=t.version,g=[];c.forEach((function(e){if(!Jc(e)){var t=new __(e);g.push(t)}})),this.content.messageList=g,this.content.title=u,this.content.abstractList=l,this.content.compatibleText=d,this.content.version=p||0}Qi.debug(\"MergerElement.content:\",this.content)}return En(e,[{key:\"sendable\",value:function(){return!Jc(this.content.messageList)||!Jc(this.content.downloadKey)}}]),e}(),v_={1:Yn.MSG_PRIORITY_HIGH,2:Yn.MSG_PRIORITY_NORMAL,3:Yn.MSG_PRIORITY_LOW,4:Yn.MSG_PRIORITY_LOWEST},M_=function(){function e(t){yn(this,e),this.ID=\"\",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||Yn.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||0===t.random?t.random:Sc(),this.priority=this._computePriority(t.priority),this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.isPeerRead=!1,this.nameCard=\"\",this._elements=[],this.isPlaceMessage=t.isPlaceMessage||0,this.isRevoked=2===t.isPlaceMessage||8===t.msgFlagBits,this.from=t.from||null,this.to=t.to||null,this.flow=\"\",this.isSystemMessage=t.isSystemMessage||!1,this.protocol=t.protocol||\"JSON\",this.isResend=!1,this.isRead=!1,this.status=t.status||Fu.SUCCESS,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=t.cloudCustomData||\"\",this.isDeleted=!1,this.isModified=!1,this._isExcludedFromUnreadCount=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromUnreadCount),this._isExcludedFromLastMessage=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromLastMessage),this.clientTime=t.clientTime||$i()||0,this.senderTinyID=t.senderTinyID||t.tinyID||\"\",this.readReceiptInfo=t.readReceiptInfo||{readCount:void 0,unreadCount:void 0},this.needReadReceipt=!0===t.needReadReceipt||1===t.needReadReceipt,this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null),this.handleGroupAtInfo(t)}return En(e,[{key:\"getElements\",value:function(){return this._elements}},{key:\"extractGroupInfo\",value:function(e){if(null!==e){uc(e.nick)&&(this.nick=e.nick),uc(e.avatar)&&(this.avatar=e.avatar);var t=e.messageFromAccountExtraInformation;dc(t)&&uc(t.nameCard)&&(this.nameCard=t.nameCard)}}},{key:\"handleGroupAtInfo\",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach((function(e){e!==Yn.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(Yn.MSG_AT_ALL))})),pc(e.groupAtInfo)&&e.groupAtInfo.forEach((function(e){0===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):1===e.groupAtAllFlag&&t.atUserList.push(Yn.MSG_AT_ALL)}))}},{key:\"getGroupAtInfoList\",value:function(){return this._groupAtInfoList}},{key:\"_initProxy\",value:function(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}},{key:\"reInitialize\",value:function(e){e&&(this.status=this.from?Fu.SUCCESS:Fu.UNSEND,!this.from&&(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID()}},{key:\"isSendable\",value:function(){return 0!==this._elements.length&&(\"function\"!=typeof this._elements[0].sendable?(Qi.warn(\"\".concat(this._elements[0].type,\\' need \"boolean : sendable()\" method\\')),!1):this._elements[0].sendable())}},{key:\"_initTo\",value:function(e){this.conversationType===Yn.CONV_GROUP&&(this.to=e.groupID)}},{key:\"_initSequence\",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return Qi.error(\"autoIncrementIndex(string: key) need key parameter\"),!1;if(void 0===Nc[e]){var t=new Date,n=\"3\".concat(t.getHours()).slice(-2),o=\"0\".concat(t.getMinutes()).slice(-2),r=\"0\".concat(t.getSeconds()).slice(-2);Nc[e]=parseInt([n,o,r,\"0001\"].join(\"\")),n=null,o=null,r=null,Qi.log(\"autoIncrementIndex start index:\".concat(Nc[e]))}return Nc[e]++}(e)),0===this.sequence&&this.conversationType===Yn.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:\"generateMessageID\",value:function(){this.from===Yn.CONV_SYSTEM&&(this.senderTinyID=\"144115198244471703\"),this.ID=\"\".concat(this.senderTinyID,\"-\").concat(this.clientTime,\"-\").concat(this.random)}},{key:\"_initFlow\",value:function(e){\"\"!==e&&(e===this.from?(this.flow=\"out\",this.isRead=!0):this.flow=\"in\")}},{key:\"_concatConversationID\",value:function(e){var t=this.to,n=\"\",o=this.conversationType;o!==Yn.CONV_SYSTEM?(n=o===Yn.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID=\"\".concat(o).concat(n)):this.conversationID=Yn.CONV_SYSTEM}},{key:\"isElement\",value:function(e){return e instanceof Yg||e instanceof Zf||e instanceof e_||e instanceof t_||e instanceof p_||e instanceof h_||e instanceof o_||e instanceof a_||e instanceof g_||e instanceof f_||e instanceof m_}},{key:\"setElement\",value:function(e){var t=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var n=function(e){if(e.type&&e.content)switch(e.type){case Yn.MSG_TEXT:t.setTextElement(e.content);break;case Yn.MSG_IMAGE:t.setImageElement(e.content);break;case Yn.MSG_AUDIO:t.setAudioElement(e.content);break;case Yn.MSG_FILE:t.setFileElement(e.content);break;case Yn.MSG_VIDEO:t.setVideoElement(e.content);break;case Yn.MSG_CUSTOM:t.setCustomElement(e.content);break;case Yn.MSG_LOCATION:t.setLocationElement(e.content);break;case Yn.MSG_GRP_TIP:t.setGroupTipElement(e.content);break;case Yn.MSG_GRP_SYS_NOTICE:t.setGroupSystemNoticeElement(e.content);break;case Yn.MSG_FACE:t.setFaceElement(e.content);break;case Yn.MSG_MERGER:t.setMergerElement(e.content);break;default:Qi.warn(e.type,e.content,\"no operation......\")}};if(pc(e))for(var o=0;o<e.length;o++)n(e[o]);else n(e);this._initProxy()}},{key:\"clearElement\",value:function(){this._elements.length=0}},{key:\"setTextElement\",value:function(e){var t=\"string\"==typeof e?e:e.text,n=new Yg({text:t});this._elements.push(n)}},{key:\"setImageElement\",value:function(e){var t=new Zf(e);this._elements.push(t)}},{key:\"setAudioElement\",value:function(e){var t=new t_(e);this._elements.push(t)}},{key:\"setFileElement\",value:function(e){var t=new p_(e);this._elements.push(t)}},{key:\"setVideoElement\",value:function(e){var t=new h_(e);this._elements.push(t)}},{key:\"setLocationElement\",value:function(e){var t=new f_(e);this._elements.push(t)}},{key:\"setCustomElement\",value:function(e){var t=new g_(e);this._elements.push(t)}},{key:\"setGroupTipElement\",value:function(e){var t={},n=e.operationType;Jc(e.memberInfoList)?e.operatorInfo&&(t=e.operatorInfo):n!==Yn.GRP_TIP_MBR_JOIN&&n!==Yn.GRP_TIP_MBR_KICKED_OUT&&n!==Yn.GRP_TIP_MBR_SET_ADMIN&&n!==Yn.GRP_TIP_MBR_CANCELED_ADMIN||(t=e.memberInfoList[0]);var o=t,r=o.nick,a=o.avatar;uc(r)&&(this.nick=r),uc(a)&&(this.avatar=a);var s=new o_(e);this._elements.push(s)}},{key:\"setGroupSystemNoticeElement\",value:function(e){var t=new a_(e);this._elements.push(t)}},{key:\"setFaceElement\",value:function(e){var t=new e_(e);this._elements.push(t)}},{key:\"setMergerElement\",value:function(e){var t=new m_(e);this._elements.push(t)}},{key:\"setIsRead\",value:function(e){this.isRead=e}},{key:\"setRelayFlag\",value:function(e){this._relayFlag=e}},{key:\"getRelayFlag\",value:function(){return this._relayFlag}},{key:\"_computePriority\",value:function(e){if(gc(e))return Yn.MSG_PRIORITY_NORMAL;if(uc(e)&&-1!==Object.values(v_).indexOf(e))return e;if(cc(e)){var t=\"\"+e;if(-1!==Object.keys(v_).indexOf(t))return v_[t]}return Yn.MSG_PRIORITY_NORMAL}},{key:\"setNickAndAvatar\",value:function(e){var t=e.nick,n=e.avatar;uc(t)&&(this.nick=t),uc(n)&&(this.avatar=n)}},{key:\"setNameCard\",value:function(e){uc(e)&&(this.nameCard=e)}},{key:\"elements\",get:function(){return Qi.warn(\"！！！Message 实例的 elements 属性即将废弃，请尽快修改。使用 type 和 payload 属性处理单条消息，兼容组合消息使用 _elements 属性！！！\"),this._elements}}]),e}(),y_=function(e){return{code:0,data:e||{}}},I_=\"https://cloud.tencent.com/document/product/\",E_=\"您可以在即时通信 IM 控制台的【开发辅助工具(https://console.cloud.tencent.com/im-detail/tool-usersig)】 页面校验 UserSig。\",T_=\"UserSig 非法，请使用官网提供的 API 重新生成 UserSig(\".concat(I_,\"269/32688)。\"),S_=\"#.E6.B6.88.E6.81.AF.E5.85.83.E7.B4.A0-timmsgelement\",C_={70001:\"UserSig 已过期，请重新生成。建议 UserSig 有效期设置不小于24小时。\",70002:\"UserSig 长度为0，请检查传入的 UserSig 是否正确。\",70003:T_,70005:T_,70009:\"UserSig 验证失败，可能因为生成 UserSig 时混用了其他 SDKAppID 的私钥或密钥导致，请使用对应 SDKAppID 下的私钥或密钥重新生成 UserSig(\".concat(I_,\"269/32688)。\"),70013:\"请求中的 UserID 与生成 UserSig 时使用的 UserID 不匹配。\".concat(E_),70014:\"请求中的 SDKAppID 与生成 UserSig 时使用的 SDKAppID 不匹配。\".concat(E_),70016:\"密钥不存在，UserSig 验证失败，请在即时通信 IM 控制台获取密钥(\".concat(I_,\"269/32578#.E8.8E.B7.E5.8F.96.E5.AF.86.E9.92.A5)。\"),70020:\"SDKAppID 未找到，请在即时通信 IM 控制台确认应用信息。\",70050:\"UserSig 验证次数过于频繁。请检查 UserSig 是否正确，并于1分钟后重新验证。\".concat(E_),70051:\"帐号被拉入黑名单。\",70052:\"UserSig 已经失效，请重新生成，再次尝试。\",70107:\"因安全原因被限制登录，请不要频繁登录。\",70169:\"请求的用户帐号不存在。\",70114:\"\".concat(\"服务端内部超时，请稍后重试。\"),70202:\"\".concat(\"服务端内部超时，请稍后重试。\"),70206:\"请求中批量数量不合法。\",70402:\"参数非法，请检查必填字段是否填充，或者字段的填充是否满足协议要求。\",70403:\"请求失败，需要 App 管理员权限。\",70398:\"帐号数超限。如需创建多于100个帐号，请将应用升级为专业版，具体操作指引请参见购买指引(\".concat(I_,\"269/32458)。\"),70500:\"\".concat(\"服务端内部错误，请重试。\"),71e3:\"删除帐号失败。仅支持删除体验版帐号，您当前应用为专业版，暂不支持帐号删除。\",20001:\"请求包非法。\",20002:\"UserSig 或 A2 失效。\",20003:\"消息发送方或接收方 UserID 无效或不存在，请检查 UserID 是否已导入即时通信 IM。\",20004:\"网络异常，请重试。\",20005:\"\".concat(\"服务端内部错误，请重试。\"),20006:\"触发发送\".concat(\"单聊消息\",\"之前回调，App 后台返回禁止下发该消息。\"),20007:\"发送\".concat(\"单聊消息\",\"，被对方拉黑，禁止发送。消息发送状态默认展示为失败，您可以登录控制台修改该场景下的消息发送状态展示结果，具体操作请参见消息保留设置(\").concat(I_,\"269/38656)。\"),20009:\"消息发送双方互相不是好友，禁止发送（配置\".concat(\"单聊消息\",\"校验好友关系才会出现）。\"),20010:\"发送\".concat(\"单聊消息\",\"，自己不是对方的好友（单向关系），禁止发送。\"),20011:\"发送\".concat(\"单聊消息\",\"，对方不是自己的好友（单向关系），禁止发送。\"),20012:\"发送方被禁言，该条消息被禁止发送。\",20016:\"消息撤回超过了时间限制（默认2分钟）。\",20018:\"删除漫游内部错误。\",90001:\"JSON 格式解析失败，请检查请求包是否符合 JSON 规范。\",90002:\"\".concat(\"JSON 格式请求包体\",\"中 MsgBody 不符合消息格式描述，或者 MsgBody 不是 Array 类型，请参考 TIMMsgElement 对象的定义(\").concat(I_,\"269/2720\").concat(S_,\")。\"),90003:\"\".concat(\"JSON 格式请求包体\",\"中缺少 To_Account 字段或者 To_Account 帐号不存在。\"),90005:\"\".concat(\"JSON 格式请求包体\",\"中缺少 MsgRandom 字段或者 MsgRandom 字段不是 Integer 类型。\"),90006:\"\".concat(\"JSON 格式请求包体\",\"中缺少 MsgTimeStamp 字段或者 MsgTimeStamp 字段不是 Integer 类型。\"),90007:\"\".concat(\"JSON 格式请求包体\",\"中 MsgBody 类型不是 Array 类型，请将其修改为 Array 类型。\"),90008:\"\".concat(\"JSON 格式请求包体\",\"中缺少 From_Account 字段或者 From_Account 帐号不存在。\"),90009:\"请求需要 App 管理员权限。\",90010:\"\".concat(\"JSON 格式请求包体\",\"不符合消息格式描述，请参考 TIMMsgElement 对象的定义(\").concat(I_,\"269/2720\").concat(S_,\")。\"),90011:\"批量发消息目标帐号超过500，请减少 To_Account 中目标帐号数量。\",90012:\"To_Account 没有注册或不存在，请确认 To_Account 是否导入即时通信 IM 或者是否拼写错误。\",90026:\"消息离线存储时间错误（最多不能超过7天）。\",90031:\"\".concat(\"JSON 格式请求包体\",\"中 SyncOtherMachine 字段不是 Integer 类型。\"),90044:\"\".concat(\"JSON 格式请求包体\",\"中 MsgLifeTime 字段不是 Integer 类型。\"),90048:\"请求的用户帐号不存在。\",90054:\"撤回请求中的 MsgKey 不合法。\",90994:\"\".concat(\"服务端内部错误，请重试。\"),90995:\"\".concat(\"服务端内部错误，请重试。\"),91e3:\"\".concat(\"服务端内部错误，请重试。\"),90992:\"\".concat(\"服务端内部错误，请重试。\",\"如果所有请求都返回该错误码，且 App 配置了第三方回调，请检查 App 服务端是否正常向即时通信 IM 后台服务端返回回调结果。\"),93e3:\"JSON 数据包超长，消息包体请不要超过8k。\",91101:\"Web 端长轮询被踢（Web 端同时在线实例个数超出限制）。\",10002:\"\".concat(\"服务端内部错误，请重试。\"),10003:\"请求中的接口名称错误，请核对接口名称并重试。\",10004:\"参数非法，请根据错误描述检查请求是否正确。\",10005:\"请求包体中携带的帐号数量过多。\",10006:\"操作频率限制，请尝试降低调用的频率。\",10007:\"操作权限不足，例如 Work \".concat(\"群组\",\"中普通成员尝试执行踢人操作，但只有 App 管理员才有权限。\"),10008:\"请求非法，可能是请求中携带的签名信息验证不正确，请再次尝试。\",10009:\"该群不允许群主主动退出。\",10010:\"\".concat(\"群组\",\"不存在，或者曾经存在过，但是目前已经被解散。\"),10011:\"解析 JSON 包体失败，请检查包体的格式是否符合 JSON 格式。\",10012:\"发起操作的 UserID 非法，请检查发起操作的用户 UserID 是否填写正确。\",10013:\"被邀请加入的用户已经是群成员。\",10014:\"群已满员，无法将请求中的用户加入\".concat(\"群组\",\"，如果是批量加人，可以尝试减少加入用户的数量。\"),10015:\"找不到指定 ID 的\".concat(\"群组\",\"。\"),10016:\"App 后台通过第三方回调拒绝本次操作。\",10017:\"因被禁言而不能发送消息，请检查发送者是否被设置禁言。\",10018:\"应答包长度超过最大包长（1MB），请求的内容过多，请尝试减少单次请求的数据量。\",10019:\"请求的用户帐号不存在。\",10021:\"\".concat(\"群组\",\" ID 已被使用，请选择其他的\").concat(\"群组\",\" ID。\"),10023:\"发消息的频率超限，请延长两次发消息时间的间隔。\",10024:\"此邀请或者申请请求已经被处理。\",10025:\"\".concat(\"群组\",\" ID 已被使用，并且操作者为群主，可以直接使用。\"),10026:\"该 SDKAppID 请求的命令字已被禁用。\",10030:\"请求撤回的消息不存在。\",10031:\"消息撤回超过了时间限制（默认2分钟）。\",10032:\"请求撤回的消息不支持撤回操作。\",10033:\"\".concat(\"群组\",\"类型不支持消息撤回操作。\"),10034:\"该消息类型不支持删除操作。\",10035:\"直播群和在线成员广播大群不支持删除消息。\",10036:\"直播群创建数量超过了限制，请参考价格说明(\".concat(I_,\"269/11673)购买预付费套餐“IM直播群”。\"),10037:\"单个用户可创建和加入的\".concat(\"群组\",\"数量超过了限制，请参考价格说明(\").concat(I_,\"269/11673)购买或升级预付费套餐“单人可创建与加入\").concat(\"群组\",\"数”。\"),10038:\"群成员数量超过限制，请参考价格说明(\".concat(I_,\"269/11673)购买或升级预付费套餐“扩展群人数上限”。\"),10041:\"该应用（SDKAppID）已配置不支持群消息撤回。\",10050:\"群属性 key 不存在\",10056:\"请在写入群属性前先使用 getGroupAttributes 接口更新本地群属性，避免冲突。\",10059:\"非旗舰版\",10060:\"群人数超过已读回执人数上限\",10061:\"在线消息不支持已读回执\",10062:\"找不到群消息的已读回执信息\",30001:\"请求参数错误，请根据错误描述检查请求参数\",30002:\"SDKAppID 不匹配\",30003:\"请求的用户帐号不存在\",30004:\"请求需要 App 管理员权限\",30005:\"关系链字段中包含敏感词\",30006:\"\".concat(\"服务端内部错误，请重试。\"),30007:\"\".concat(\"网络超时，请稍后重试. \"),30008:\"并发写导致写冲突，建议使用批量方式\",30009:\"后台禁止该用户发起加好友请求\",30010:\"自己的好友数已达系统上限\",30011:\"分组已达系统上限\",30012:\"未决数已达系统上限\",30014:\"对方的好友数已达系统上限\",30515:\"请求添加好友时，对方在自己的黑名单中，不允许加好友\",30516:\"请求添加好友时，对方的加好友验证方式是不允许任何人添加自己为好友\",30525:\"请求添加好友时，自己在对方的黑名单中，不允许加好友\",30539:\"等待对方同意\",30540:\"添加好友请求被安全策略打击，请勿频繁发起添加好友请求\",31704:\"与请求删除的帐号之间不存在好友关系\",31707:\"删除好友请求被安全策略打击，请勿频繁发起删除好友请求\"},A_=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this)).code=e.code,o.message=C_[e.code]||e.message,o.data=e.data||{},o}return n}(Rn(Error)),D_=null,N_=function(e){D_=e},k_=function(e){return Promise.resolve(y_(e))},O_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof A_)return t&&null!==D_&&D_.emit(Wn.ERROR,e),Promise.reject(e);if(e instanceof Error){var n=new A_({code:zd.UNCAUGHT_ERROR,message:e.message});return t&&null!==D_&&D_.emit(Wn.ERROR,n),Promise.reject(n)}if(gc(e)||gc(e.code)||gc(e.message))Qi.error(\"IMPromise.reject 必须指定code(错误码)和message(错误信息)!!!\");else{if(cc(e.code)&&uc(e.message)){var o=new A_(e);return t&&null!==D_&&D_.emit(Wn.ERROR,o),Promise.reject(o)}Qi.error(\"IMPromise.reject code(错误码)必须为数字，message(错误信息)必须为字符串!!!\")}},R_=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"C2CModule\",o}return En(n,[{key:\"onNewC2CMessage\",value:function(e){var t=e.dataList,n=e.isInstantMessage,o=e.C2CRemainingUnreadList,r=e.C2CPairUnreadList;Qi.debug(\"\".concat(this._className,\".onNewC2CMessage count:\").concat(t.length,\" isInstantMessage:\").concat(n));var a=this._newC2CMessageStoredAndSummary({dataList:t,C2CRemainingUnreadList:o,C2CPairUnreadList:r,isInstantMessage:n}),s=a.conversationOptionsList,i=a.messageList,c=a.isUnreadC2CMessage;(this.filterModifiedMessage(i),s.length>0)&&this.getModule(ul).onNewMessage({conversationOptionsList:s,isInstantMessage:n,isUnreadC2CMessage:c});var u=this.filterUnmodifiedMessage(i);n&&u.length>0&&this.emitOuterEvent(Wn.MESSAGE_RECEIVED,u),i.length=0}},{key:\"_newC2CMessageStoredAndSummary\",value:function(e){for(var t=e.dataList,n=e.C2CRemainingUnreadList,o=e.C2CPairUnreadList,r=e.isInstantMessage,a=null,s=[],i=[],c={},u=this.getModule(hl),l=this.getModule(Sl),d=!1,p=0,g=t.length;p<g;p++){var h=t[p];h.currentUser=this.getMyUserID(),h.conversationType=Yn.CONV_C2C,h.isSystemMessage=!!h.isSystemMessage,(gc(h.nick)||gc(h.avatar))&&(d=!0,Qi.debug(\"\".concat(this._className,\"._newC2CMessageStoredAndSummary nick or avatar missing!\"))),a=new M_(h),h.elements=u.parseElements(h.elements,h.from),a.setElement(h.elements),a.setNickAndAvatar({nick:h.nick,avatar:h.avatar});var f=a.conversationID;if(r){var _=!1,m=this.getModule(ul);if(a.from!==this.getMyUserID()){var v=m.getLatestMessageSentByPeer(f);if(v){var M=v.nick,y=v.avatar;d?a.setNickAndAvatar({nick:M,avatar:y}):M===a.nick&&y===a.avatar||(_=!0)}}else{var I=m.getLatestMessageSentByMe(f);if(I){var E=I.nick,T=I.avatar;E===a.nick&&T===a.avatar||m.modifyMessageSentByMe({conversationID:f,latestNick:a.nick,latestAvatar:a.avatar})}}var S=1===t[p].isModified;if(m.isMessageSentByCurrentInstance(a)?a.isModified=S:S=!1,0===h.msgLifeTime)a._onlineOnlyFlag=!0,i.push(a);else{if(!m.pushIntoMessageList(i,a,S))continue;_&&(m.modifyMessageSentByPeer({conversationID:f,latestNick:a.nick,latestAvatar:a.avatar}),m.updateUserProfileSpecifiedKey({conversationID:f,nick:a.nick,avatar:a.avatar}))}r&&a.clientTime>0&&l.addMessageDelay(a.clientTime)}if(0!==h.msgLifeTime){if(!1===a._onlineOnlyFlag)if(gc(c[f])){var C=0;\"in\"===a.flow&&(a._isExcludedFromUnreadCount||(C=1)),c[f]=s.push({conversationID:f,unreadCount:C,type:a.conversationType,subType:a.conversationSubType,lastMessage:a._isExcludedFromLastMessage?\"\":a})-1}else{var A=c[f];s[A].type=a.conversationType,s[A].subType=a.conversationSubType,s[A].lastMessage=a._isExcludedFromLastMessage?\"\":a,\"in\"===a.flow&&(a._isExcludedFromUnreadCount||s[A].unreadCount++)}}else a._onlineOnlyFlag=!0}var D=!1;if(pc(o))for(var N=function(e,t){if(o[e].unreadCount>0){D=!0;var n=s.find((function(t){return t.conversationID===\"C2C\".concat(o[e].from)}));n?n.unreadCount=o[e].unreadCount:s.push({conversationID:\"C2C\".concat(o[e].from),unreadCount:o[e].unreadCount,type:Yn.CONV_C2C})}},k=0,O=o.length;k<O;k++)N(k);if(pc(n))for(var R=function(e,t){s.find((function(t){return t.conversationID===\"C2C\".concat(n[e].from)}))||s.push({conversationID:\"C2C\".concat(n[e].from),type:Yn.CONV_C2C,lastMsgTime:n[e].lastMsgTime})},L=0,b=n.length;L<b;L++)R(L);return{conversationOptionsList:s,messageList:i,isUnreadC2CMessage:D}}},{key:\"onC2CMessageRevoked\",value:function(e){var t=this;Qi.debug(\"\".concat(this._className,\".onC2CMessageRevoked count:\").concat(e.dataList.length));var n=this.getModule(ul),o=[],r=null;e.dataList.forEach((function(e){if(e.c2cMessageRevokedNotify){var a=e.c2cMessageRevokedNotify.revokedInfos;gc(a)||a.forEach((function(e){var a=t.getMyUserID()===e.from?\"\".concat(Yn.CONV_C2C).concat(e.to):\"\".concat(Yn.CONV_C2C).concat(e.from);(r=n.revoke(a,e.sequence,e.random))&&o.push(r)}))}})),0!==o.length&&(n.onMessageRevoked(o),this.emitOuterEvent(Wn.MESSAGE_REVOKED,o))}},{key:\"onC2CMessageReadReceipt\",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Jc(e.c2cMessageReadReceipt)){var n=e.c2cMessageReadReceipt.to;e.c2cMessageReadReceipt.uinPairReadArray.forEach((function(e){var o=e.peerReadTime;Qi.debug(\"\".concat(t._className,\"._onC2CMessageReadReceipt to:\").concat(n,\" peerReadTime:\").concat(o));var r=\"\".concat(Yn.CONV_C2C).concat(n),a=t.getModule(ul);a.recordPeerReadTime(r,o),a.updateMessageIsPeerReadProperty(r,o)}))}}))}},{key:\"onC2CMessageReadNotice\",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Jc(e.c2cMessageReadNotice)){var n=t.getModule(ul);e.c2cMessageReadNotice.uinPairReadArray.forEach((function(e){var o=e.from,r=e.peerReadTime;Qi.debug(\"\".concat(t._className,\".onC2CMessageReadNotice from:\").concat(o,\" lastReadTime:\").concat(r));var a=\"\".concat(Yn.CONV_C2C).concat(o);n.updateIsReadAfterReadReport({conversationID:a,lastMessageTime:r}),n.updateUnreadCount(a)}))}}))}},{key:\"sendMessage\",value:function(e,t){var n=this._createC2CMessagePack(e,t);return this.request(n)}},{key:\"_createC2CMessagePack\",value:function(e,t){var n=null;t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0}));var o=\"\";uc(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var r=[];if(dc(t)&&dc(t.messageControlInfo)){var a=t.messageControlInfo,s=a.excludedFromUnreadCount,i=a.excludedFromLastMessage;!0===s&&r.push(\"NoUnread\"),!0===i&&r.push(\"NoLastMsg\")}return{protocolName:bl,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),toAccount:e.to,msgBody:e.getElements(),cloudCustomData:o,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:this.isOnlineMessage(e,t)?0:void 0,nick:e.nick,avatar:e.avatar,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||\"\",desc:n.description||\"\",ext:n.extension||\"\",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||\"\"}}:void 0,messageControlInfo:r,clientTime:e.clientTime}}}},{key:\"isOnlineMessage\",value:function(e,t){return!(!t||!0!==t.onlineUserOnly)}},{key:\"revokeMessage\",value:function(e){return this.request({protocolName:xl,requestData:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}},{key:\"deleteMessage\",value:function(e){var t=e.to,n=e.keyList;return Qi.log(\"\".concat(this._className,\".deleteMessage toAccount:\").concat(t,\" count:\").concat(n.length)),this.request({protocolName:Wl,requestData:{fromAccount:this.getMyUserID(),to:t,keyList:n}})}},{key:\"setMessageRead\",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageTime,r=\"\".concat(this._className,\".setMessageRead\");Qi.log(\"\".concat(r,\" conversationID:\").concat(n,\" lastMessageTime:\").concat(o)),cc(o)||Qi.warn(\"\".concat(r,\" 请勿修改 Conversation.lastMessage.lastTime，否则可能会导致已读上报结果不准确\"));var a=new dp(Up);return a.setMessage(\"conversationID:\".concat(n,\" lastMessageTime:\").concat(o)),this.request({protocolName:Vl,requestData:{C2CMsgReaded:{cookie:\"\",C2CMsgReadedItem:[{toAccount:n.replace(\"C2C\",\"\"),lastMessageTime:o,receipt:1}]}}}).then((function(){a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(r,\" ok\"));var e=t.getModule(ul);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:o}),e.updateUnreadCount(n),y_()})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.log(\"\".concat(r,\" failed. error:\"),e),O_(e)}))}},{key:\"getRoamingMessage\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRoamingMessage\"),o=e.peerAccount,r=e.conversationID,a=e.count,s=e.lastMessageTime,i=e.messageKey,c=\"peerAccount:\".concat(o,\" count:\").concat(a||15,\" lastMessageTime:\").concat(s||0,\" messageKey:\").concat(i);Qi.log(\"\".concat(n,\" \").concat(c));var u=new dp(Op);return this.request({protocolName:Hl,requestData:{peerAccount:o,count:a||15,lastMessageTime:s||0,messageKey:i}}).then((function(e){var o=e.data,a=o.complete,s=o.messageList,i=o.messageKey,l=o.lastMessageTime;gc(s)?Qi.log(\"\".concat(n,\" ok. complete:\").concat(a,\" but messageList is undefined!\")):Qi.log(\"\".concat(n,\" ok. complete:\").concat(a,\" count:\").concat(s.length)),u.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(c,\" complete:\").concat(a,\" length:\").concat(s.length)).end();var d=t.getModule(ul);1===a&&d.setCompleted(r);var p=d.storeRoamingMessage(s,r);d.modifyMessageList(r),d.updateIsRead(r),d.updateRoamingMessageKeyAndTime(r,i,l);var g=d.getPeerReadTime(r);if(Qi.log(\"\".concat(n,\" update isPeerRead property. conversationID:\").concat(r,\" peerReadTime:\").concat(g)),g)d.updateMessageIsPeerReadProperty(r,g);else{var h=r.replace(Yn.CONV_C2C,\"\");t.getRemotePeerReadTime([h]).then((function(){d.updateMessageIsPeerReadProperty(r,d.getPeerReadTime(r))}))}return p})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];u.setMessage(c).setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"getRemotePeerReadTime\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRemotePeerReadTime\");if(Jc(e))return Qi.warn(\"\".concat(n,\" userIDList is empty!\")),Promise.resolve();var o=new dp(xp);return Qi.log(\"\".concat(n,\" userIDList:\").concat(e)),this.request({protocolName:jl,requestData:{userIDList:e}}).then((function(r){var a=r.data.peerReadTimeList;Qi.log(\"\".concat(n,\" ok. peerReadTimeList:\").concat(a));for(var s=\"\",i=t.getModule(ul),c=0;c<e.length;c++)s+=\"\".concat(e[c],\"-\").concat(a[c],\" \"),a[c]>0&&i.recordPeerReadTime(\"C2C\".concat(e[c]),a[c]);o.setNetworkType(t.getNetworkType()).setMessage(s).end()})).catch((function(e){t.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e)}))}}]),n}(Al),L_=He.findIndex,b_=!0,w_=ze(\"findIndex\");\"findIndex\"in[]&&Array(1).findIndex((function(){b_=!1})),ke({target:\"Array\",proto:!0,forced:b_||!w_},{findIndex:function(e){return L_(this,e,arguments.length>1?arguments[1]:void 0)}}),Io(\"findIndex\");var G_=[],P_=G_.sort,U_=r((function(){G_.sort(void 0)})),F_=r((function(){G_.sort(null)})),q_=je(\"sort\");ke({target:\"Array\",proto:!0,forced:U_||!F_||!q_},{sort:function(e){return void 0===e?P_.call(Le(this)):P_.call(Le(this),Oe(e))}});var x_=function(){function e(t){yn(this,e),this.list=new Map,this._className=\"MessageListHandler\",this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map,this._groupLocalLastMessageSequenceMap=new Map}return En(e,[{key:\"getLocalOldestMessageByConversationID\",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:\"pushIn\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.conversationID,o=e.ID,r=!0;this.list.has(n)||this.list.set(n,new Map);var a=this.list.get(n).has(o);if(a){var s=this.list.get(n).get(o);if(!t||!0===s.isModified)return r=!1}return this.list.get(n).set(o,e),this._setLatestMessageSentByPeer(n,e),this._setLatestMessageSentByMe(n,e),this._setGroupLocalLastMessageSequence(n,e),r}},{key:\"unshift\",value:function(e){var t;if(pc(e)){if(e.length>0){t=e[0].conversationID;var n=e.length;this._unshiftMultipleMessages(e),this._setGroupLocalLastMessageSequence(t,e[n-1])}}else t=e.conversationID,this._unshiftSingleMessage(e),this._setGroupLocalLastMessageSequence(t,e);if(t&&t.startsWith(Yn.CONV_C2C)){var o=Array.from(this.list.get(t).values()),r=o.length;if(0===r)return;for(var a=r-1;a>=0;a--)if(\"out\"===o[a].flow){this._setLatestMessageSentByMe(t,o[a]);break}for(var s=r-1;s>=0;s--)if(\"in\"===o[s].flow){this._setLatestMessageSentByPeer(t,o[s]);break}}}},{key:\"_unshiftSingleMessage\",value:function(e){var t=e.conversationID,n=e.ID;if(!this.list.has(t))return this.list.set(t,new Map),void this.list.get(t).set(n,e);var o=Array.from(this.list.get(t));o.unshift([n,e]),this.list.set(t,new Map(o))}},{key:\"_unshiftMultipleMessages\",value:function(e){for(var t=e.length,n=[],o=e[0].conversationID,r=this.list.has(o)?Array.from(this.list.get(o)):[],a=0;a<t;a++)n.push([e[a].ID,e[a]]);this.list.set(o,new Map(n.concat(r)))}},{key:\"remove\",value:function(e){var t=e.conversationID,n=e.ID;this.list.has(t)&&this.list.get(t).delete(n)}},{key:\"revoke\",value:function(e,t,n){if(Qi.debug(\"revoke message\",e,t,n),this.list.has(e)){var o,r=Bn(this.list.get(e));try{for(r.s();!(o=r.n()).done;){var a=Pn(o.value,2)[1];if(a.sequence===t&&!a.isRevoked&&(gc(n)||a.random===n))return a.isRevoked=!0,a}}catch(s){r.e(s)}finally{r.f()}}return null}},{key:\"removeByConversationID\",value:function(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}},{key:\"findMessage\",value:function(e){var t,n=null,o=Bn(this.list);try{for(o.s();!(t=o.n()).done;){var r=Pn(t.value,2)[1];r.has(e)&&(n=r.get(e))}}catch(a){o.e(a)}finally{o.f()}return n}},{key:\"updateMessageIsPeerReadProperty\",value:function(e,t){var n=[];if(this.list.has(e)){var o,r=Bn(this.list.get(e));try{for(r.s();!(o=r.n()).done;){var a=Pn(o.value,2)[1];a.time<=t&&!a.isPeerRead&&\"out\"===a.flow&&(a.isPeerRead=!0,n.push(a))}}catch(s){r.e(s)}finally{r.f()}Qi.log(\"\".concat(this._className,\".updateMessageIsPeerReadProperty conversationID:\").concat(e,\" peerReadTime:\").concat(t,\" count:\").concat(n.length))}return n}},{key:\"updateMessageIsModifiedProperty\",value:function(e){var t=e.conversationID,n=e.ID;if(this.list.has(t)){var o=this.list.get(t).get(n);o&&(o.isModified=!0)}}},{key:\"hasLocalMessageList\",value:function(e){return this.list.has(e)}},{key:\"getLocalMessageList\",value:function(e){return this.hasLocalMessageList(e)?Un(this.list.get(e).values()):[]}},{key:\"hasLocalMessage\",value:function(e,t){return!!this.hasLocalMessageList(e)&&this.list.get(e).has(t)}},{key:\"getLocalMessage\",value:function(e,t){return this.hasLocalMessage(e,t)?this.list.get(e).get(t):null}},{key:\"getLocalLastMessage\",value:function(e){var t=this.getLocalMessageList(e);return t[t.length-1]}},{key:\"_setLatestMessageSentByPeer\",value:function(e,t){e.startsWith(Yn.CONV_C2C)&&\"in\"===t.flow&&this._latestMessageSentByPeerMap.set(e,t)}},{key:\"_setLatestMessageSentByMe\",value:function(e,t){e.startsWith(Yn.CONV_C2C)&&\"out\"===t.flow&&this._latestMessageSentByMeMap.set(e,t)}},{key:\"_setGroupLocalLastMessageSequence\",value:function(e,t){e.startsWith(Yn.CONV_GROUP)&&this._groupLocalLastMessageSequenceMap.set(e,t.sequence)}},{key:\"getLatestMessageSentByPeer\",value:function(e){return this._latestMessageSentByPeerMap.get(e)}},{key:\"getLatestMessageSentByMe\",value:function(e){return this._latestMessageSentByMeMap.get(e)}},{key:\"getGroupLocalLastMessageSequence\",value:function(e){return this._groupLocalLastMessageSequenceMap.get(e)||0}},{key:\"modifyMessageSentByPeer\",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,r=this.list.get(t);if(!Jc(r)){var a=Array.from(r.values()),s=a.length;if(0!==s){for(var i=null,c=0,u=!1,l=s-1;l>=0;l--)\"in\"===a[l].flow&&((i=a[l]).nick!==n&&(i.setNickAndAvatar({nick:n}),u=!0),i.avatar!==o&&(i.setNickAndAvatar({avatar:o}),u=!0),u&&(c+=1));Qi.log(\"\".concat(this._className,\".modifyMessageSentByPeer conversationID:\").concat(t,\" count:\").concat(c))}}}},{key:\"modifyMessageSentByMe\",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,r=this.list.get(t);if(!Jc(r)){var a=Array.from(r.values()),s=a.length;if(0!==s){for(var i=null,c=0,u=!1,l=s-1;l>=0;l--)\"out\"===a[l].flow&&((i=a[l]).nick!==n&&(i.setNickAndAvatar({nick:n}),u=!0),i.avatar!==o&&(i.setNickAndAvatar({avatar:o}),u=!0),u&&(c+=1));Qi.log(\"\".concat(this._className,\".modifyMessageSentByMe conversationID:\").concat(t,\" count:\").concat(c))}}}},{key:\"traversal\",value:function(){if(0!==this.list.size&&-1===Qi.getLevel()){console.group(\"conversationID-messageCount\");var e,t=Bn(this.list);try{for(t.s();!(e=t.n()).done;){var n=Pn(e.value,2),o=n[0],r=n[1];console.log(\"\".concat(o,\"-\").concat(r.size))}}catch(a){t.e(a)}finally{t.f()}console.groupEnd()}}},{key:\"reset\",value:function(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear(),this._groupLocalLastMessageSequenceMap.clear()}}]),e}(),V_=\"_a2KeyAndTinyIDUpdated\",K_=\"_cloudConfigUpdated\",B_=\"_profileUpdated\";function H_(e){this.mixin(e)}H_.mixin=function(e){var t=e.prototype||e;t._isReady=!1,t.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=!0,setTimeout((function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach((function(e){e.call(this)}),e)}),1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var j_=[\"jpg\",\"jpeg\",\"gif\",\"png\",\"bmp\",\"image\",\"webp\"],W_=[\"mp4\"],Y_=1,$_=2,z_=3,J_=255,X_=function(){function e(t){var n=this;yn(this,e),Jc(t)||(this.userID=t.userID||\"\",this.nick=t.nick||\"\",this.gender=t.gender||\"\",this.birthday=t.birthday||0,this.location=t.location||\"\",this.selfSignature=t.selfSignature||\"\",this.allowType=t.allowType||Yn.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||\"\",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||Yn.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],Jc(t.profileCustomField)||t.profileCustomField.forEach((function(e){n.profileCustomField.push({key:e.key,value:e.value})})))}return En(e,[{key:\"validate\",value:function(e){var t=!0,n=\"\";if(Jc(e))return{valid:!1,tips:\"empty options\"};if(e.profileCustomField)for(var o=e.profileCustomField.length,r=null,a=0;a<o;a++){if(r=e.profileCustomField[a],!uc(r.key)||-1===r.key.indexOf(\"Tag_Profile_Custom\"))return{valid:!1,tips:\"自定义资料字段的前缀必须是 Tag_Profile_Custom\"};if(!uc(r.value))return{valid:!1,tips:\"自定义资料字段的 value 必须是字符串\"}}for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(\"profileCustomField\"===s)continue;if(Jc(e[s])&&!uc(e[s])&&!cc(e[s])){n=\"key:\"+s+\", invalid value:\"+e[s],t=!1;continue}switch(s){case\"nick\":uc(e[s])||(n=\"nick should be a string\",t=!1),Tc(e[s])>500&&(n=\"nick name limited: must less than or equal to \".concat(500,\" bytes, current size: \").concat(Tc(e[s]),\" bytes\"),t=!1);break;case\"gender\":Dc(tc,e.gender)||(n=\"key:gender, invalid value:\"+e.gender,t=!1);break;case\"birthday\":cc(e.birthday)||(n=\"birthday should be a number\",t=!1);break;case\"location\":uc(e.location)||(n=\"location should be a string\",t=!1);break;case\"selfSignature\":uc(e.selfSignature)||(n=\"selfSignature should be a string\",t=!1);break;case\"allowType\":Dc(oc,e.allowType)||(n=\"key:allowType, invalid value:\"+e.allowType,t=!1);break;case\"language\":cc(e.language)||(n=\"language should be a number\",t=!1);break;case\"avatar\":uc(e.avatar)||(n=\"avatar should be a string\",t=!1);break;case\"messageSettings\":0!==e.messageSettings&&1!==e.messageSettings&&(n=\"messageSettings should be 0 or 1\",t=!1);break;case\"adminForbidType\":Dc(nc,e.adminForbidType)||(n=\"key:adminForbidType, invalid value:\"+e.adminForbidType,t=!1);break;case\"level\":cc(e.level)||(n=\"level should be a number\",t=!1);break;case\"role\":cc(e.role)||(n=\"role should be a number\",t=!1);break;default:n=\"unknown key:\"+s+\"  \"+e[s],t=!1}}return{valid:t,tips:n}}}]),e}(),Q_=function e(t){yn(this,e),this.value=t,this.next=null},Z_=function(){function e(t){yn(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map,Qi.debug(\"SinglyLinkedList init MAX_LENGTH:\".concat(this.MAX_LENGTH))}return En(e,[{key:\"set\",value:function(e){var t=new Q_(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var n=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(n.value),n.next=null,n=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:\"has\",value:function(e){return this.map.has(e)}},{key:\"delete\",value:function(e){this.has(e)&&this.map.delete(e)}},{key:\"tail\",value:function(){return this.pTail}},{key:\"size\",value:function(){return this.map.size}},{key:\"data\",value:function(){return Array.from(this.map.keys())}},{key:\"reset\",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),em=[\"groupID\",\"name\",\"avatar\",\"type\",\"introduction\",\"notification\",\"ownerID\",\"selfInfo\",\"createTime\",\"infoSequence\",\"lastInfoTime\",\"lastMessage\",\"nextMessageSeq\",\"memberNum\",\"maxMemberNum\",\"memberList\",\"joinOption\",\"groupCustomField\",\"muteAllMembers\"],tm=function(){function e(t){yn(this,e),this.groupID=\"\",this.name=\"\",this.avatar=\"\",this.type=\"\",this.introduction=\"\",this.notification=\"\",this.ownerID=\"\",this.createTime=\"\",this.infoSequence=\"\",this.lastInfoTime=\"\",this.selfInfo={messageRemindType:\"\",joinTime:\"\",nameCard:\"\",role:\"\",userID:\"\",memberCustomField:void 0,readedSequence:0,excludedUnreadSequenceList:void 0},this.lastMessage={lastTime:\"\",lastSequence:\"\",fromAccount:\"\",messageForShow:\"\"},this.nextMessageSeq=\"\",this.memberNum=\"\",this.memberCount=\"\",this.maxMemberNum=\"\",this.maxMemberCount=\"\",this.joinOption=\"\",this.groupCustomField=[],this.muteAllMembers=void 0,this._initGroup(t)}return En(e,[{key:\"_initGroup\",value:function(e){for(var t in e)em.indexOf(t)<0||(\"selfInfo\"!==t?(\"memberNum\"===t&&(this.memberCount=e[t]),\"maxMemberNum\"===t&&(this.maxMemberCount=e[t]),this[t]=e[t]):this.updateSelfInfo(e[t]))}},{key:\"updateGroup\",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e));n.lastMsgTime&&(this.lastMessage.lastTime=n.lastMsgTime),gc(n.muteAllMembers)||(\"On\"===n.muteAllMembers?n.muteAllMembers=!0:n.muteAllMembers=!1),n.groupCustomField&&Lc(this.groupCustomField,n.groupCustomField),gc(n.memberNum)||(this.memberCount=n.memberNum),gc(n.maxMemberNum)||(this.maxMemberCount=n.maxMemberNum),Ic(this,n,[\"members\",\"errorCode\",\"lastMsgTime\",\"groupCustomField\",\"memberNum\",\"maxMemberNum\"]),pc(n.members)&&n.members.length>0&&n.members.forEach((function(e){e.userID===t.selfInfo.userID&&Ic(t.selfInfo,e,[\"sequence\"])}))}},{key:\"updateSelfInfo\",value:function(e){var t=e.nameCard,n=e.joinTime,o=e.role,r=e.messageRemindType,a=e.readedSequence,s=e.excludedUnreadSequenceList;Ic(this.selfInfo,{nameCard:t,joinTime:n,role:o,messageRemindType:r,readedSequence:a,excludedUnreadSequenceList:s},[],[\"\",null,void 0,0,NaN])}},{key:\"setSelfNameCard\",value:function(e){this.selfInfo.nameCard=e}},{key:\"memberNum\",set:function(e){},get:function(){return Qi.warn(\"！！！v2.8.0起弃用memberNum，请使用 memberCount\"),this.memberCount}},{key:\"maxMemberNum\",set:function(e){},get:function(){return Qi.warn(\"！！！v2.8.0起弃用maxMemberNum，请使用 maxMemberCount\"),this.maxMemberCount}}]),e}(),nm=function(e,t){if(gc(t))return\"\";switch(e){case Yn.MSG_TEXT:return t.text;case Yn.MSG_IMAGE:return\"[图片]\";case Yn.MSG_LOCATION:return\"[位置]\";case Yn.MSG_AUDIO:return\"[语音]\";case Yn.MSG_VIDEO:return\"[视频]\";case Yn.MSG_FILE:return\"[文件]\";case Yn.MSG_CUSTOM:return\"[自定义消息]\";case Yn.MSG_GRP_TIP:return\"[群提示消息]\";case Yn.MSG_GRP_SYS_NOTICE:return\"[群系统通知]\";case Yn.MSG_FACE:return\"[动画表情]\";case Yn.MSG_MERGER:return\"[聊天记录]\";default:return\"\"}},om=function(e){return gc(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:\"\",payload:null,type:\"\",isRevoked:!1,cloudCustomData:\"\",onlineOnlyFlag:!1,nick:\"\",nameCard:\"\"}:e instanceof M_?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||\"\",messageForShow:nm(e.type,e.payload),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||\"\",onlineOnlyFlag:e._onlineOnlyFlag||!1,nick:e.nick||\"\",nameCard:e.nameCard||\"\"}:Cn({},e,{messageForShow:nm(e.type,e.payload)})},rm=function(){function e(t){yn(this,e),this.conversationID=t.conversationID||\"\",this.unreadCount=t.unreadCount||0,this.type=t.type||\"\",this.lastMessage=om(t.lastMessage),t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=t.peerReadTime||0,this.groupAtInfoList=[],this.remark=\"\",this.isPinned=t.isPinned||!1,this.messageRemindType=\"\",this._initProfile(t)}return En(e,[{key:\"_initProfile\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"userProfile\":t.userProfile=e.userProfile;break;case\"groupProfile\":t.groupProfile=e.groupProfile}})),gc(this.userProfile)&&this.type===Yn.CONV_C2C?this.userProfile=new X_({userID:e.conversationID.replace(\"C2C\",\"\")}):gc(this.groupProfile)&&this.type===Yn.CONV_GROUP&&(this.groupProfile=new tm({groupID:e.conversationID.replace(\"GROUP\",\"\")}))}},{key:\"updateUnreadCount\",value:function(e){var t=e.nextUnreadCount,n=e.isFromGetConversations,o=e.isUnreadC2CMessage;gc(t)||(wc(this.subType)?this.unreadCount=0:n&&this.type===Yn.CONV_GROUP||o&&this.type===Yn.CONV_C2C?this.unreadCount=t:this.unreadCount=this.unreadCount+t)}},{key:\"updateLastMessage\",value:function(e){this.lastMessage=om(e)}},{key:\"updateGroupAtInfoList\",value:function(e){var t,n=(Fn(t=e.groupAtType)||qn(t)||xn(t)||Kn()).slice(0);-1!==n.indexOf(Yn.CONV_AT_ME)&&-1!==n.indexOf(Yn.CONV_AT_ALL)&&(n=[Yn.CONV_AT_ALL_AT_ME]);var o={from:e.from,groupID:e.groupID,messageSequence:e.sequence,atTypeArray:n,__random:e.__random,__sequence:e.__sequence};this.groupAtInfoList.push(o),Qi.debug(\"Conversation.updateGroupAtInfoList conversationID:\".concat(this.conversationID),this.groupAtInfoList)}},{key:\"clearGroupAtInfoList\",value:function(){this.groupAtInfoList.length=0}},{key:\"reduceUnreadCount\",value:function(){this.unreadCount>=1&&(this.unreadCount-=1)}},{key:\"isLastMessageRevoked\",value:function(e){var t=e.sequence,n=e.time;return this.type===Yn.CONV_C2C&&t===this.lastMessage.lastSequence&&n===this.lastMessage.lastTime||this.type===Yn.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:\"setLastMessageRevoked\",value:function(e){this.lastMessage.isRevoked=e}},{key:\"toAccount\",get:function(){return this.conversationID.startsWith(Yn.CONV_C2C)?this.conversationID.replace(Yn.CONV_C2C,\"\"):this.conversationID.startsWith(Yn.CONV_GROUP)?this.conversationID.replace(Yn.CONV_GROUP,\"\"):\"\"}},{key:\"subType\",get:function(){return this.groupProfile?this.groupProfile.type:\"\"}}]),e}(),am=function(){function e(t){yn(this,e),this._conversationModule=t,this._className=\"MessageRemindHandler\",this._updateSequence=0}return En(e,[{key:\"getC2CMessageRemindType\",value:function(){var e=this,t=\"\".concat(this._className,\".getC2CMessageRemindType\");return this._conversationModule.request({protocolName:Bl,updateSequence:this._updateSequence}).then((function(n){Qi.log(\"\".concat(t,\" ok\"));var o=n.data,r=o.updateSequence,a=o.muteFlagList;e._updateSequence=r,e._patchC2CMessageRemindType(a)})).catch((function(e){Qi.error(\"\".concat(t,\" failed. error:\"),e)}))}},{key:\"_patchC2CMessageRemindType\",value:function(e){var t=this,n=0,o=\"\";pc(e)&&e.length>0&&e.forEach((function(e){var r=e.userID,a=e.muteFlag;0===a?o=Yn.MSG_REMIND_ACPT_AND_NOTE:1===a?o=Yn.MSG_REMIND_DISCARD:2===a&&(o=Yn.MSG_REMIND_ACPT_NOT_NOTE),!0===t._conversationModule.patchMessageRemindType({ID:r,isC2CConversation:!0,messageRemindType:o})&&(n+=1)})),Qi.log(\"\".concat(this._className,\"._patchC2CMessageRemindType count:\").concat(n))}},{key:\"set\",value:function(e){return e.groupID?this._setGroupMessageRemindType(e):pc(e.userIDList)?this._setC2CMessageRemindType(e):void 0}},{key:\"_setGroupMessageRemindType\",value:function(e){var t=this,n=\"\".concat(this._className,\"._setGroupMessageRemindType\"),o=e.groupID,r=e.messageRemindType,a=\"groupID:\".concat(o,\" messageRemindType:\").concat(r),s=new dp(ag);return s.setMessage(a),this._getModule(cl).modifyGroupMemberInfo({groupID:o,messageRemindType:r,userID:this._conversationModule.getMyUserID()}).then((function(){s.setNetworkType(t._conversationModule.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok. \").concat(a));var e=t._getModule(sl).getLocalGroupProfile(o);return e&&(e.selfInfo.messageRemindType=r),t._conversationModule.patchMessageRemindType({ID:o,isC2CConversation:!1,messageRemindType:r})&&t._emitConversationUpdate(),y_({group:e})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"_setC2CMessageRemindType\",value:function(e){var t=this,n=\"\".concat(this._className,\"._setC2CMessageRemindType\"),o=e.userIDList,r=e.messageRemindType,a=o.slice(0,30),s=0;r===Yn.MSG_REMIND_DISCARD?s=1:r===Yn.MSG_REMIND_ACPT_NOT_NOTE&&(s=2);var i=\"userIDList:\".concat(a,\" messageRemindType:\").concat(r),c=new dp(ag);return c.setMessage(i),this._conversationModule.request({protocolName:Kl,requestData:{userIDList:a,muteFlag:s}}).then((function(e){c.setNetworkType(t._conversationModule.getNetworkType()).end();var o=e.data,s=o.updateSequence,i=o.errorList;t._updateSequence=s;var u=[],l=[];pc(i)&&i.forEach((function(e){u.push(e.userID),l.push({userID:e.userID,code:e.errorCode})}));var d=a.filter((function(e){return-1===u.indexOf(e)}));Qi.log(\"\".concat(n,\" ok. successUserIDList:\").concat(d,\" failureUserIDList:\").concat(JSON.stringify(l)));var p=0;return d.forEach((function(e){t._conversationModule.patchMessageRemindType({ID:e,isC2CConversation:!0,messageRemindType:r})&&(p+=1)})),p>=1&&t._emitConversationUpdate(),a.length=u.length=0,k_({successUserIDList:d.map((function(e){return{userID:e}})),failureUserIDList:l})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"_getModule\",value:function(e){return this._conversationModule.getModule(e)}},{key:\"_emitConversationUpdate\",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:\"setUpdateSequence\",value:function(e){this._updateSequence=e}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._updateSequence=0}}]),e}(),sm=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"ConversationModule\",H_.mixin(bn(o)),o._messageListHandler=new x_,o._messageRemindHandler=new am(bn(o)),o.singlyLinkedList=new Z_(100),o._pagingStatus=qu.NOT_START,o._pagingTimeStamp=0,o._pagingStartIndex=0,o._pagingPinnedTimeStamp=0,o._pagingPinnedStartIndex=0,o._conversationMap=new Map,o._tmpGroupList=[],o._tmpGroupAtTipsList=[],o._peerReadTimeMap=new Map,o._completedMap=new Map,o._roamingMessageKeyAndTimeMap=new Map,o._remoteGroupReadSequenceMap=new Map,o._initListeners(),o}return En(n,[{key:\"_initListeners\",value:function(){var e=this.getInnerEmitterInstance();e.on(V_,this._initLocalConversationList,this),e.on(B_,this._onProfileUpdated,this)}},{key:\"onCheckTimer\",value:function(e){e%60==0&&this._messageListHandler.traversal()}},{key:\"_initLocalConversationList\",value:function(){var e=this,t=new dp(zp);Qi.log(\"\".concat(this._className,\"._initLocalConversationList.\"));var n=\"\",o=this._getStorageConversationList();if(o){for(var r=o.length,a=0;a<r;a++){var s=o[a];if(s){if(s.conversationID===\"\".concat(Yn.CONV_C2C,\"@TLS#ERROR\")||s.conversationID===\"\".concat(Yn.CONV_C2C,\"@TLS#NOT_FOUND\"))continue;if(s.groupProfile){var i=s.groupProfile.type;if(wc(i))continue}}this._conversationMap.set(o[a].conversationID,new rm(o[a]))}this.emitConversationUpdate(!0,!1),n=\"count:\".concat(r)}else n=\"count:0\";t.setNetworkType(this.getNetworkType()).setMessage(n).end(),this.getModule(al)||this.triggerReady(),this.ready((function(){e._tmpGroupList.length>0&&(e.updateConversationGroupProfile(e._tmpGroupList),e._tmpGroupList.length=0)})),this._syncConversationList()}},{key:\"onMessageSent\",value:function(e){this._onSendOrReceiveMessage({conversationOptionsList:e.conversationOptionsList,isInstantMessage:!0})}},{key:\"onNewMessage\",value:function(e){this._onSendOrReceiveMessage(e)}},{key:\"_onSendOrReceiveMessage\",value:function(e){var t=this,n=e.conversationOptionsList,o=e.isInstantMessage,r=void 0===o||o,a=e.isUnreadC2CMessage,s=void 0!==a&&a;this._isReady?0!==n.length&&(this._getC2CPeerReadTime(n),this._updateLocalConversationList({conversationOptionsList:n,isInstantMessage:r,isUnreadC2CMessage:s,isFromGetConversations:!1}),this._setStorageConversationList(),this.emitConversationUpdate()):this.ready((function(){t._onSendOrReceiveMessage(e)}))}},{key:\"updateConversationGroupProfile\",value:function(e){var t=this;pc(e)&&0===e.length||(0!==this._conversationMap.size?(e.forEach((function(e){var n=\"GROUP\".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);o.groupProfile=JSON.parse(JSON.stringify(e)),o.lastMessage.lastSequence<e.nextMessageSeq&&(o.lastMessage.lastSequence=e.nextMessageSeq-1),o.subType||(o.subType=e.type)}})),this.emitConversationUpdate(!0,!1)):this._tmpGroupList=e)}},{key:\"_updateConversationUserProfile\",value:function(e){var t=this;e.data.forEach((function(e){var n=\"C2C\".concat(e.userID);t._conversationMap.has(n)&&(t._conversationMap.get(n).userProfile=e)})),this.emitConversationUpdate(!0,!1)}},{key:\"onMessageRevoked\",value:function(e){var t=this;if(0!==e.length){var n=null,o=!1;e.forEach((function(e){(n=t._conversationMap.get(e.conversationID))&&(n.reduceUnreadCount(),n.isLastMessageRevoked(e)&&(o=!0,n.setLastMessageRevoked(!0)))})),o&&this.emitConversationUpdate(!0,!1)}}},{key:\"onMessageDeleted\",value:function(e){if(0!==e.length){e.forEach((function(e){e.isDeleted=!0}));for(var t=e[0].conversationID,n=this._messageListHandler.getLocalMessageList(t),o={},r=n.length-1;r>=0;r--)if(!n[r].isDeleted){o=n[r];break}var a=this._conversationMap.get(t);if(a){var s=!1;a.lastMessage.lastSequence===o.sequence&&a.lastMessage.lastTime===o.time||(Jc(o)&&(o=void 0),a.updateLastMessage(o),s=!0,Qi.log(\"\".concat(this._className,\".onMessageDeleted. update conversationID:\").concat(t,\" with lastMessage:\"),a.lastMessage)),t.startsWith(Yn.CONV_C2C)&&this.updateUnreadCount(t),s&&this.emitConversationUpdate(!0,!1)}}}},{key:\"onNewGroupAtTips\",value:function(e){var t=this,n=e.dataList,o=null;n.forEach((function(e){e.groupAtTips?o=e.groupAtTips:e.elements&&(o=e.elements),o.__random=e.random,o.__sequence=e.clientSequence,t._tmpGroupAtTipsList.push(o)})),Qi.debug(\"\".concat(this._className,\".onNewGroupAtTips isReady:\").concat(this._isReady),this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:\"_handleGroupAtTipsList\",value:function(){var e=this;if(0!==this._tmpGroupAtTipsList.length){var t=!1;this._tmpGroupAtTipsList.forEach((function(n){var o=n.groupID;if(n.from!==e.getMyUserID()){var r=e._conversationMap.get(\"\".concat(Yn.CONV_GROUP).concat(o));r&&(r.updateGroupAtInfoList(n),t=!0)}})),t&&this.emitConversationUpdate(!0,!1),this._tmpGroupAtTipsList.length=0}}},{key:\"_getC2CPeerReadTime\",value:function(e){var t=this,n=[];if(e.forEach((function(e){t._conversationMap.has(e.conversationID)||e.type!==Yn.CONV_C2C||n.push(e.conversationID.replace(Yn.CONV_C2C,\"\"))})),n.length>0){Qi.debug(\"\".concat(this._className,\"._getC2CPeerReadTime userIDList:\").concat(n));var o=this.getModule(al);o&&o.getRemotePeerReadTime(n)}}},{key:\"_getStorageConversationList\",value:function(){return this.getModule(dl).getItem(\"conversationMap\")}},{key:\"_setStorageConversationList\",value:function(){var e=this.getLocalConversationList().slice(0,20).map((function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}}));this.getModule(dl).setItem(\"conversationMap\",e)}},{key:\"emitConversationUpdate\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Un(this._conversationMap.values());if(t){var o=this.getModule(sl);o&&o.updateGroupLastMessage(n)}e&&this.emitOuterEvent(Wn.CONVERSATION_LIST_UPDATED)}},{key:\"getLocalConversationList\",value:function(){return Un(this._conversationMap.values())}},{key:\"getLocalConversation\",value:function(e){return this._conversationMap.get(e)}},{key:\"_syncConversationList\",value:function(){var e=this,t=new dp(Jp);return this._pagingStatus===qu.NOT_START&&this._conversationMap.clear(),this._pagingGetConversationList().then((function(n){return e._pagingStatus=qu.RESOLVED,e._setStorageConversationList(),e._handleC2CPeerReadTime(),e._patchConversationProperties(),t.setMessage(e._conversationMap.size).setNetworkType(e.getNetworkType()).end(),n})).catch((function(n){return e._pagingStatus=qu.REJECTED,t.setMessage(e._pagingTimeStamp),e.probeNetwork().then((function(e){var o=Pn(e,2),r=o[0],a=o[1];t.setError(n,r,a).end()})),O_(n)}))}},{key:\"_patchConversationProperties\",value:function(){var e=this,t=Date.now(),n=this.checkAndPatchRemark(),o=this._messageRemindHandler.getC2CMessageRemindType(),r=this.getModule(sl).getGroupList();Promise.all([n,o,r]).then((function(){var n=Date.now()-t;Qi.log(\"\".concat(e._className,\"._patchConversationProperties ok. cost \").concat(n,\" ms\")),e.emitConversationUpdate(!0,!1)}))}},{key:\"_pagingGetConversationList\",value:function(){var e=this,t=\"\".concat(this._className,\"._pagingGetConversationList\");return Qi.log(\"\".concat(t,\" timeStamp:\").concat(this._pagingTimeStamp,\" startIndex:\").concat(this._pagingStartIndex)+\" pinnedTimeStamp:\".concat(this._pagingPinnedTimeStamp,\" pinnedStartIndex:\").concat(this._pagingPinnedStartIndex)),this._pagingStatus=qu.PENDING,this.request({protocolName:Yl,requestData:{fromAccount:this.getMyUserID(),timeStamp:this._pagingTimeStamp,startIndex:this._pagingStartIndex,pinnedTimeStamp:this._pagingPinnedTimeStamp,pinnedStartIndex:this._pagingStartIndex,orderType:1}}).then((function(n){var o=n.data,r=o.completeFlag,a=o.conversations,s=void 0===a?[]:a,i=o.timeStamp,c=o.startIndex,u=o.pinnedTimeStamp,l=o.pinnedStartIndex;if(Qi.log(\"\".concat(t,\" ok. completeFlag:\").concat(r,\" count:\").concat(s.length,\" isReady:\").concat(e._isReady)),s.length>0){var d=e._getConversationOptions(s);e._updateLocalConversationList({conversationOptionsList:d,isFromGetConversations:!0}),e.isLoggedIn()&&e.emitConversationUpdate()}if(!e._isReady){if(!e.isLoggedIn())return k_();e.triggerReady()}return e._pagingTimeStamp=i,e._pagingStartIndex=c,e._pagingPinnedTimeStamp=u,e._pagingPinnedStartIndex=l,1!==r?e._pagingGetConversationList():(e._handleGroupAtTipsList(),k_())})).catch((function(n){throw e.isLoggedIn()&&(e._isReady||(Qi.warn(\"\".concat(t,\" failed. error:\"),n),e.triggerReady())),n}))}},{key:\"_updateLocalConversationList\",value:function(e){var t,n=e.isFromGetConversations,o=Date.now();t=this._getTmpConversationListMapping(e),this._conversationMap=new Map(this._sortConversationList([].concat(Un(t.toBeUpdatedConversationList),Un(this._conversationMap)))),n||this._updateUserOrGroupProfile(t.newConversationList),Qi.debug(\"\".concat(this._className,\"._updateLocalConversationList cost \").concat(Date.now()-o,\" ms\"))}},{key:\"_getTmpConversationListMapping\",value:function(e){for(var t=e.conversationOptionsList,n=e.isFromGetConversations,o=e.isInstantMessage,r=e.isUnreadC2CMessage,a=void 0!==r&&r,s=[],i=[],c=this.getModule(sl),u=this.getModule(il),l=0,d=t.length;l<d;l++){var p=new rm(t[l]),g=p.conversationID;if(g!==\"\".concat(Yn.CONV_C2C,\"@TLS#ERROR\")&&g!==\"\".concat(Yn.CONV_C2C,\"@TLS#NOT_FOUND\"))if(this._conversationMap.has(g)){var h=this._conversationMap.get(g),f=[\"unreadCount\",\"allowType\",\"adminForbidType\",\"payload\",\"isPinned\"];!1===o&&f.push(\"lastMessage\");var _=t[l].lastMessage,m=!gc(_);m||this._onLastMessageNotExist(t[l]),gc(o)&&m&&null===h.lastMessage.payload&&(h.lastMessage.payload=_.payload),Ic(h,p,f,[null,void 0,\"\",0,NaN]),h.updateUnreadCount({nextUnreadCount:p.unreadCount,isFromGetConversations:n,isUnreadC2CMessage:a}),o&&m&&(h.lastMessage.payload=_.payload,h.type===Yn.CONV_GROUP&&(h.lastMessage.nameCard=_.nameCard,h.lastMessage.nick=_.nick)),m&&h.lastMessage.cloudCustomData!==_.cloudCustomData&&(h.lastMessage.cloudCustomData=_.cloudCustomData||\"\"),this._conversationMap.delete(g),s.push([g,h])}else{if(p.type===Yn.CONV_GROUP&&c){var v=p.groupProfile.groupID,M=c.getLocalGroupProfile(v);M&&(p.groupProfile=M,p.updateUnreadCount({nextUnreadCount:0}))}else if(p.type===Yn.CONV_C2C){var y=g.replace(Yn.CONV_C2C,\"\");u&&u.isMyFriend(y)&&(p.remark=u.getFriendRemark(y))}i.push(p),s.push([g,p])}}return{toBeUpdatedConversationList:s,newConversationList:i}}},{key:\"_onLastMessageNotExist\",value:function(e){new dp(Bg).setMessage(\"\".concat(JSON.stringify(e))).setNetworkType(this.getNetworkType()).end()}},{key:\"_sortConversationList\",value:function(e){var t=[],n=[];return e.forEach((function(e){!0===e[1].isPinned?t.push(e):n.push(e)})),t.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})).concat(n.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})))}},{key:\"_sortConversationListAndEmitEvent\",value:function(){this._conversationMap=new Map(this._sortConversationList(Un(this._conversationMap))),this.emitConversationUpdate(!0,!1)}},{key:\"_updateUserOrGroupProfile\",value:function(e){var t=this;if(0!==e.length){var n=[],o=[],r=this.getModule(rl),a=this.getModule(sl);e.forEach((function(e){if(e.type===Yn.CONV_C2C)n.push(e.toAccount);else if(e.type===Yn.CONV_GROUP){var t=e.toAccount;a.hasLocalGroup(t)?e.groupProfile=a.getLocalGroupProfile(t):o.push(t)}})),Qi.log(\"\".concat(this._className,\"._updateUserOrGroupProfile c2cUserIDList:\").concat(n,\" groupIDList:\").concat(o)),n.length>0&&r.getUserProfile({userIDList:n}).then((function(e){var n=e.data;pc(n)?n.forEach((function(e){t._conversationMap.get(\"C2C\".concat(e.userID)).userProfile=e})):t._conversationMap.get(\"C2C\".concat(n.userID)).userProfile=n})),o.length>0&&a.getGroupProfileAdvance({groupIDList:o,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"FaceUrl\"]}}).then((function(e){e.data.successGroupList.forEach((function(e){var n=\"GROUP\".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);Ic(o.groupProfile,e,[],[null,void 0,\"\",0,NaN]),!o.subType&&e.type&&(o.subType=e.type)}}))}))}}},{key:\"_getConversationOptions\",value:function(e){var t=this,n=[],o=e.filter((function(e){var t=e.lastMsg;return dc(t)})).filter((function(e){var t=e.type,n=e.userID;return 1===t&&\"@TLS#NOT_FOUND\"!==n&&\"@TLS#ERROR\"!==n||2===t})).map((function(e){if(1===e.type){var o={userID:e.userID,nick:e.peerNick,avatar:e.peerAvatar};return n.push(o),{conversationID:\"C2C\".concat(e.userID),type:\"C2C\",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,cloudCustomData:e.lastMsg.cloudCustomData||\"\",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1,nick:\"\",nameCard:\"\"},userProfile:new X_(o),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned,messageRemindType:\"\"}}return{conversationID:\"GROUP\".concat(e.groupID),type:\"GROUP\",lastMessage:Cn({lastTime:e.time,lastSequence:e.messageReadSeq+e.unreadCount,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow},t._patchTypeAndPayload(e),{cloudCustomData:e.lastMsg.cloudCustomData||\"\",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1,nick:e.senderNick||\"\",nameCard:e.senderNameCard||\"\"}),groupProfile:new tm({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0,isPinned:1===e.isPinned,messageRemindType:\"\"}}));n.length>0&&this.getModule(rl).onConversationsProfileUpdated(n);return o}},{key:\"_patchTypeAndPayload\",value:function(e){var t=e.lastMsg,n=t.event,o=void 0===n?void 0:n,r=t.elements,a=void 0===r?[]:r,s=t.groupTips,i=void 0===s?{}:s;if(!gc(o)&&!Jc(i)){var c=new M_(i);c.setElement({type:Yn.MSG_GRP_TIP,content:Cn({},i.elements,{groupProfile:i.groupProfile})});var u=JSON.parse(JSON.stringify(c.payload));return c=null,{type:Yn.MSG_GRP_TIP,payload:u}}return{type:a[0]?a[0].type:null,payload:a[0]?a[0].content:null}}},{key:\"getLocalMessageList\",value:function(e){return this._messageListHandler.getLocalMessageList(e)}},{key:\"deleteLocalMessage\",value:function(e){e instanceof M_&&this._messageListHandler.remove(e)}},{key:\"onConversationDeleted\",value:function(e){var t=this;Qi.log(\"\".concat(this._className,\".onConversationDeleted\")),pc(e)&&e.forEach((function(e){var n=e.type,o=e.userID,r=e.groupID,a=\"\";1===n?a=\"\".concat(Yn.CONV_C2C).concat(o):2===n&&(a=\"\".concat(Yn.CONV_GROUP).concat(r)),t.deleteLocalConversation(a)}))}},{key:\"onConversationPinned\",value:function(e){var t=this;if(pc(e)){var n=!1;e.forEach((function(e){var o,r=e.type,a=e.userID,s=e.groupID;1===r?o=t.getLocalConversation(\"\".concat(Yn.CONV_C2C).concat(a)):2===r&&(o=t.getLocalConversation(\"\".concat(Yn.CONV_GROUP).concat(s))),o&&(Qi.log(\"\".concat(t._className,\".onConversationPinned conversationID:\").concat(o.conversationID,\" isPinned:\").concat(o.isPinned)),o.isPinned||(o.isPinned=!0,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:\"onConversationUnpinned\",value:function(e){var t=this;if(pc(e)){var n=!1;e.forEach((function(e){var o,r=e.type,a=e.userID,s=e.groupID;1===r?o=t.getLocalConversation(\"\".concat(Yn.CONV_C2C).concat(a)):2===r&&(o=t.getLocalConversation(\"\".concat(Yn.CONV_GROUP).concat(s))),o&&(Qi.log(\"\".concat(t._className,\".onConversationUnpinned conversationID:\").concat(o.conversationID,\" isPinned:\").concat(o.isPinned)),o.isPinned&&(o.isPinned=!1,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:\"getMessageList\",value:function(e){var t=this,n=e.conversationID,o=e.nextReqMessageID,r=e.count,a=\"\".concat(this._className,\".getMessageList\"),s=this.getLocalConversation(n),i=\"\";if(s&&s.groupProfile&&(i=s.groupProfile.type),wc(i))return Qi.log(\"\".concat(a,\" not available in avchatroom. conversationID:\").concat(n)),k_({messageList:[],nextReqMessageID:\"\",isCompleted:!0});(gc(r)||r>15)&&(r=15);var c=this._computeLeftCount({conversationID:n,nextReqMessageID:o});return Qi.log(\"\".concat(a,\" conversationID:\").concat(n,\" leftCount:\").concat(c,\" count:\").concat(r,\" nextReqMessageID:\").concat(o)),this._needGetHistory({conversationID:n,leftCount:c,count:r})?this.getHistoryMessages({conversationID:n,nextReqMessageID:o,count:20}).then((function(){return c=t._computeLeftCount({conversationID:n,nextReqMessageID:o}),y_(t._computeResult({conversationID:n,nextReqMessageID:o,count:r,leftCount:c}))})):(Qi.log(\"\".concat(a,\".getMessageList get message list from memory\")),this.modifyMessageList(n),k_(this._computeResult({conversationID:n,nextReqMessageID:o,count:r,leftCount:c})))}},{key:\"_computeLeftCount\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;return n?this._messageListHandler.getLocalMessageList(t).findIndex((function(e){return e.ID===n})):this._getMessageListSize(t)}},{key:\"_getMessageListSize\",value:function(e){return this._messageListHandler.getLocalMessageList(e).length}},{key:\"_needGetHistory\",value:function(e){var t=e.conversationID,n=e.leftCount,o=e.count,r=this.getLocalConversation(t),a=\"\";return r&&r.groupProfile&&(a=r.groupProfile.type),!Fc(t)&&!wc(a)&&(n<o&&!this._completedMap.has(t))}},{key:\"_computeResult\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,r=e.leftCount,a=this._computeMessageList({conversationID:t,nextReqMessageID:n,count:o}),s=this._computeIsCompleted({conversationID:t,leftCount:r,count:o}),i=this._computeNextReqMessageID({messageList:a,isCompleted:s,conversationID:t}),c=\"\".concat(this._className,\"._computeResult. conversationID:\").concat(t);return Qi.log(\"\".concat(c,\" leftCount:\").concat(r,\" count:\").concat(o,\" nextReqMessageID:\").concat(i,\" isCompleted:\").concat(s)),{messageList:a,nextReqMessageID:i,isCompleted:s}}},{key:\"_computeMessageList\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,r=this._messageListHandler.getLocalMessageList(t),a=this._computeIndexEnd({nextReqMessageID:n,messageList:r}),s=this._computeIndexStart({indexEnd:a,count:o});return r.slice(s,a)}},{key:\"_computeNextReqMessageID\",value:function(e){var t=e.messageList,n=e.isCompleted,o=e.conversationID;if(!n)return 0===t.length?\"\":t[0].ID;var r=this._messageListHandler.getLocalMessageList(o);return 0===r.length?\"\":r[0].ID}},{key:\"_computeIndexEnd\",value:function(e){var t=e.messageList,n=void 0===t?[]:t,o=e.nextReqMessageID;return o?n.findIndex((function(e){return e.ID===o})):n.length}},{key:\"_computeIndexStart\",value:function(e){var t=e.indexEnd,n=e.count;return t>n?t-n:0}},{key:\"_computeIsCompleted\",value:function(e){var t=e.conversationID;return!!(e.leftCount<=e.count&&this._completedMap.has(t))}},{key:\"getHistoryMessages\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;if(t===Yn.CONV_SYSTEM)return k_();e.count?e.count>20&&(e.count=20):e.count=15;var o=this._messageListHandler.getLocalOldestMessageByConversationID(t);o||((o={}).time=0,o.sequence=0,0===t.indexOf(Yn.CONV_C2C)?(o.to=t.replace(Yn.CONV_C2C,\"\"),o.conversationType=Yn.CONV_C2C):0===t.indexOf(Yn.CONV_GROUP)&&(o.to=t.replace(Yn.CONV_GROUP,\"\"),o.conversationType=Yn.CONV_GROUP));var r=\"\",a=null,s=this._roamingMessageKeyAndTimeMap.has(t);switch(o.conversationType){case Yn.CONV_C2C:return r=t.replace(Yn.CONV_C2C,\"\"),(a=this.getModule(al))?a.getRoamingMessage({conversationID:e.conversationID,peerAccount:r,count:e.count,lastMessageTime:s?this._roamingMessageKeyAndTimeMap.get(t).lastMessageTime:0,messageKey:s?this._roamingMessageKeyAndTimeMap.get(t).messageKey:\"\"}):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE});case Yn.CONV_GROUP:return(a=this.getModule(sl))?a.getRoamingMessage({conversationID:e.conversationID,groupID:o.to,count:e.count,sequence:n&&!1===o._onlineOnlyFlag?o.sequence-1:o.sequence}):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE});default:return k_()}}},{key:\"patchConversationLastMessage\",value:function(e){var t=this.getLocalConversation(e);if(t){var n=t.lastMessage,o=n.messageForShow,r=n.payload;if(Jc(o)||Jc(r)){var a=this._messageListHandler.getLocalMessageList(e);if(0===a.length)return;var s=a[a.length-1];Qi.log(\"\".concat(this._className,\".patchConversationLastMessage conversationID:\").concat(e,\" payload:\"),s.payload),t.updateLastMessage(s)}}}},{key:\"storeRoamingMessage\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.startsWith(Yn.CONV_C2C)?Yn.CONV_C2C:Yn.CONV_GROUP,o=null,r=[],a=0,s=e.length,i=null,c=n===Yn.CONV_GROUP,u=this.getModule(hl),l=function(){a=c?e.length-1:0,s=c?0:e.length},d=function(){c?--a:++a},p=function(){return c?a>=s:a<s};for(l();p();d())if(c&&1===e[a].sequence&&this.setCompleted(t),1!==e[a].isPlaceMessage)if((o=new M_(e[a])).to=e[a].to,o.isSystemMessage=!!e[a].isSystemMessage,o.conversationType=n,4===e[a].event?i={type:Yn.MSG_GRP_TIP,content:Cn({},e[a].elements,{groupProfile:e[a].groupProfile})}:(e[a].elements=u.parseElements(e[a].elements,e[a].from),i=e[a].elements),c||o.setNickAndAvatar({nick:e[a].nick,avatar:e[a].avatar}),Jc(i)){var g=new dp(qp);g.setMessage(\"from:\".concat(o.from,\" to:\").concat(o.to,\" sequence:\").concat(o.sequence,\" event:\").concat(e[a].event)),g.setNetworkType(this.getNetworkType()).setLevel(\"warning\").end()}else o.setElement(i),o.reInitialize(this.getMyUserID()),r.push(o);return this._messageListHandler.unshift(r),l=d=p=null,r}},{key:\"findMessage\",value:function(e){return this._messageListHandler.findMessage(e)}},{key:\"setMessageRead\",value:function(e){var t=e.conversationID,n=(e.messageID,this.getLocalConversation(t));if(Qi.log(\"\".concat(this._className,\".setMessageRead conversationID:\").concat(t,\" unreadCount:\").concat(n?n.unreadCount:0)),!n)return k_();if(n.type!==Yn.CONV_GROUP||Jc(n.groupAtInfoList)||this.deleteGroupAtTips(t),0===n.unreadCount)return k_();var o=this._messageListHandler.getLocalLastMessage(t),r=n.lastMessage.lastTime;o&&r<o.time&&(r=o.time);var a=n.lastMessage.lastSequence;o&&a<o.sequence&&(a=o.sequence);var s=null;switch(n.type){case Yn.CONV_C2C:return(s=this.getModule(al))?s.setMessageRead({conversationID:t,lastMessageTime:r}):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE});case Yn.CONV_GROUP:return(s=this._moduleManager.getModule(sl))?s.setMessageRead({conversationID:t,lastMessageSeq:a}):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE});case Yn.CONV_SYSTEM:return n.unreadCount=0,this.emitConversationUpdate(!0,!1),k_();default:return k_()}}},{key:\"setAllMessageRead\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=\"\".concat(this._className,\".setAllMessageRead\");t.scope||(t.scope=Yn.READ_ALL_MSG),Qi.log(\"\".concat(n,\" options:\"),t);var o=this._createSetAllMessageReadPack(t);if(0===o.readAllC2CMessage&&0===o.groupMessageReadInfoList.length)return k_();var r=new dp(Xp);return this.request({protocolName:pd,requestData:o}).then((function(n){var o=n.data,a=e._handleAllMessageRead(o);return r.setMessage(\"scope:\".concat(t.scope,\" failureGroups:\").concat(JSON.stringify(a))).setNetworkType(e.getNetworkType()).end(),k_()})).catch((function(t){return e.probeNetwork().then((function(e){var n=Pn(e,2),o=n[0],a=n[1];r.setError(t,o,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),t),O_({code:t&&t.code?t.code:zd.MESSAGE_UNREAD_ALL_FAIL,message:t&&t.message?t.message:Jd.MESSAGE_UNREAD_ALL_FAIL})}))}},{key:\"_getConversationLastMessageSequence\",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastSequence;return t&&n<t.sequence&&(n=t.sequence),n}},{key:\"_getConversationLastMessageTime\",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastTime;return t&&n<t.time&&(n=t.time),n}},{key:\"_createSetAllMessageReadPack\",value:function(e){var t,n={readAllC2CMessage:0,groupMessageReadInfoList:[]},o=e.scope,r=Bn(this._conversationMap);try{for(r.s();!(t=r.n()).done;){var a=Pn(t.value,2)[1];if(a.unreadCount>0)if(a.type===Yn.CONV_C2C&&0===n.readAllC2CMessage){if(o===Yn.READ_ALL_MSG)n.readAllC2CMessage=1;else if(o===Yn.READ_ALL_C2C_MSG){n.readAllC2CMessage=1;break}}else if(a.type===Yn.CONV_GROUP&&(o===Yn.READ_ALL_GROUP_MSG||o===Yn.READ_ALL_MSG)){var s=this._getConversationLastMessageSequence(a);n.groupMessageReadInfoList.push({groupID:a.groupProfile.groupID,messageSequence:s})}}}catch(i){r.e(i)}finally{r.f()}return n}},{key:\"onPushedAllMessageRead\",value:function(e){this._handleAllMessageRead(e)}},{key:\"_handleAllMessageRead\",value:function(e){var t=e.groupMessageReadInfoList,n=e.readAllC2CMessage,o=this._parseGroupReadInfo(t);return this._updateAllConversationUnreadCount({readAllC2CMessage:n})>=1&&this.emitConversationUpdate(!0,!1),o}},{key:\"_parseGroupReadInfo\",value:function(e){var t=[];if(e&&e.length)for(var n=0,o=e.length;n<o;n++){var r=e[n],a=r.groupID,s=r.sequence,i=r.retCode,c=r.lastMessageSeq;gc(i)?this._remoteGroupReadSequenceMap.set(a,c):(this._remoteGroupReadSequenceMap.set(a,s),0!==i&&t.push(\"\".concat(a,\"-\").concat(s,\"-\").concat(i)))}return t}},{key:\"_updateAllConversationUnreadCount\",value:function(e){var t,n=e.readAllC2CMessage,o=0,r=Bn(this._conversationMap);try{for(r.s();!(t=r.n()).done;){var a=Pn(t.value,2),s=a[0],i=a[1];if(i.unreadCount>=1){if(1===n&&i.type===Yn.CONV_C2C){var c=this._getConversationLastMessageTime(i);this.updateIsReadAfterReadReport({conversationID:s,lastMessageTime:c})}else if(i.type===Yn.CONV_GROUP){var u=s.replace(Yn.CONV_GROUP,\"\");if(this._remoteGroupReadSequenceMap.has(u)){var l=this._remoteGroupReadSequenceMap.get(u),d=this._getConversationLastMessageSequence(i);this.updateIsReadAfterReadReport({conversationID:s,remoteReadSequence:l}),d>=l&&this._remoteGroupReadSequenceMap.delete(u)}}this.updateUnreadCount(s,!1)&&(o+=1)}}}catch(p){r.e(p)}finally{r.f()}return o}},{key:\"isRemoteRead\",value:function(e){var t=e.conversationID,n=e.sequence,o=t.replace(Yn.CONV_GROUP,\"\"),r=!1;if(this._remoteGroupReadSequenceMap.has(o)){var a=this._remoteGroupReadSequenceMap.get(o);n<=a&&(r=!0,Qi.log(\"\".concat(this._className,\".isRemoteRead conversationID:\").concat(t,\" messageSequence:\").concat(n,\" remoteReadSequence:\").concat(a))),n>=a+10&&this._remoteGroupReadSequenceMap.delete(o)}return r}},{key:\"updateIsReadAfterReadReport\",value:function(e){var t=e.conversationID,n=e.lastMessageSeq,o=e.lastMessageTime,r=this._messageListHandler.getLocalMessageList(t);if(0!==r.length)for(var a,s=r.length-1;s>=0;s--)if(a=r[s],!(o&&a.time>o||n&&a.sequence>n)){if(\"in\"===a.flow&&a.isRead)break;a.setIsRead(!0)}}},{key:\"updateUnreadCount\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!1,o=this.getLocalConversation(e),r=this._messageListHandler.getLocalMessageList(e);if(o){var a=o.unreadCount,s=r.filter((function(e){return!e.isRead&&!e._onlineOnlyFlag&&!e.isDeleted})).length;return a!==s&&(o.unreadCount=s,n=!0,Qi.log(\"\".concat(this._className,\".updateUnreadCount from \").concat(a,\" to \").concat(s,\", conversationID:\").concat(e)),!0===t&&this.emitConversationUpdate(!0,!1)),n}}},{key:\"updateReadReceiptInfo\",value:function(e,t){var n=this;if(!Jc(t)){var o=[],r=\"\".concat(Yn.CONV_GROUP).concat(e);t.forEach((function(t){var a=t.tinyID,s=t.clientTime,i=t.random,c=t.readCount,u=t.unreadCount,l=\"\".concat(a,\"-\").concat(s,\"-\").concat(i),d=n._messageListHandler.getLocalMessage(r,l),p={groupID:e,messageID:l,readCount:0,unreadCount:0};d&&(cc(c)&&(d.readReceiptInfo.readCount=c,p.readCount=c),cc(u)&&(d.readReceiptInfo.unreadCount=u,p.unreadCount=u),o.push(p))})),o.length>0&&this.emitOuterEvent(Wn.MESSAGE_READ_RECEIPT_RECEIVED,o)}}},{key:\"recomputeGroupUnreadCount\",value:function(e){var t=e.conversationID,n=e.count,o=this.getLocalConversation(t);if(o){var r=o.unreadCount,a=r-n;a<0&&(a=0),o.unreadCount=a,Qi.log(\"\".concat(this._className,\".recomputeGroupUnreadCount from \").concat(r,\" to \").concat(a,\", conversationID:\").concat(t))}}},{key:\"updateIsRead\",value:function(e){var t=this.getLocalConversation(e),n=this.getLocalMessageList(e);if(t&&0!==n.length&&!Fc(t.type)){for(var o=[],r=0,a=n.length;r<a;r++)\"in\"!==n[r].flow?\"out\"!==n[r].flow||n[r].isRead||n[r].setIsRead(!0):o.push(n[r]);var s=0;if(t.type===Yn.CONV_C2C){var i=o.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;s=o.length-t.unreadCount-i}else s=o.length-t.unreadCount;for(var c=0;c<s&&!o[c].isRead;c++)o[c].setIsRead(!0)}}},{key:\"deleteGroupAtTips\",value:function(e){var t=\"\".concat(this._className,\".deleteGroupAtTips\");Qi.log(\"\".concat(t));var n=this._conversationMap.get(e);if(!n)return Promise.resolve();var o=n.groupAtInfoList;if(0===o.length)return Promise.resolve();var r=this.getMyUserID();return this.request({protocolName:Xl,requestData:{messageListToDelete:o.map((function(e){return{from:e.from,to:r,messageSeq:e.__sequence,messageRandom:e.__random,groupID:e.groupID}}))}}).then((function(){return Qi.log(\"\".concat(t,\" ok. count:\").concat(o.length)),n.clearGroupAtInfoList(),Promise.resolve()})).catch((function(e){return Qi.error(\"\".concat(t,\" failed. error:\"),e),O_(e)}))}},{key:\"appendToMessageList\",value:function(e){this._messageListHandler.pushIn(e)}},{key:\"setMessageRandom\",value:function(e){this.singlyLinkedList.set(e.random)}},{key:\"deleteMessageRandom\",value:function(e){this.singlyLinkedList.delete(e.random)}},{key:\"pushIntoMessageList\",value:function(e,t,n){return!(!this._messageListHandler.pushIn(t,n)||this._isMessageFromCurrentInstance(t)&&!n)&&(e.push(t),!0)}},{key:\"_isMessageFromCurrentInstance\",value:function(e){return this.singlyLinkedList.has(e.random)}},{key:\"revoke\",value:function(e,t,n){return this._messageListHandler.revoke(e,t,n)}},{key:\"getPeerReadTime\",value:function(e){return this._peerReadTimeMap.get(e)}},{key:\"recordPeerReadTime\",value:function(e,t){this._peerReadTimeMap.has(e)?this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t):this._peerReadTimeMap.set(e,t)}},{key:\"updateMessageIsPeerReadProperty\",value:function(e,t){if(e.startsWith(Yn.CONV_C2C)&&t>0){var n=this._messageListHandler.updateMessageIsPeerReadProperty(e,t);n.length>0&&this.emitOuterEvent(Wn.MESSAGE_READ_BY_PEER,n)}}},{key:\"updateMessageIsModifiedProperty\",value:function(e){this._messageListHandler.updateMessageIsModifiedProperty(e)}},{key:\"setCompleted\",value:function(e){Qi.log(\"\".concat(this._className,\".setCompleted. conversationID:\").concat(e)),this._completedMap.set(e,!0)}},{key:\"updateRoamingMessageKeyAndTime\",value:function(e,t,n){this._roamingMessageKeyAndTimeMap.set(e,{messageKey:t,lastMessageTime:n})}},{key:\"getConversationList\",value:function(e){var t=this,n=\"\".concat(this._className,\".getConversationList\"),o=\"pagingStatus:\".concat(this._pagingStatus,\", local conversation count:\").concat(this._conversationMap.size,\", options:\").concat(e);if(Qi.log(\"\".concat(n,\". \").concat(o)),this._pagingStatus===qu.REJECTED){var r=new dp(jp);return r.setMessage(o),this._syncConversationList().then((function(){r.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return y_({conversationList:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}if(0===this._conversationMap.size){var a=new dp(jp);return a.setMessage(o),this._syncConversationList().then((function(){a.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return y_({conversationList:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}var s=this._getConversationList(e);return Qi.log(\"\".concat(n,\". returned conversation count:\").concat(s.length)),k_({conversationList:s})}},{key:\"_getConversationList\",value:function(e){var t=this;if(gc(e))return this.getLocalConversationList();if(pc(e)){var n=[];return e.forEach((function(e){if(t._conversationMap.has(e)){var o=t.getLocalConversation(e);n.push(o)}})),n}}},{key:\"_handleC2CPeerReadTime\",value:function(){var e,t=Bn(this._conversationMap);try{for(t.s();!(e=t.n()).done;){var n=Pn(e.value,2),o=n[0],r=n[1];r.type===Yn.CONV_C2C&&(Qi.debug(\"\".concat(this._className,\"._handleC2CPeerReadTime conversationID:\").concat(o,\" peerReadTime:\").concat(r.peerReadTime)),this.recordPeerReadTime(o,r.peerReadTime))}}catch(a){t.e(a)}finally{t.f()}}},{key:\"getConversationProfile\",value:function(e){var t,n=this;if((t=this._conversationMap.has(e)?this._conversationMap.get(e):new rm({conversationID:e,type:e.slice(0,3)===Yn.CONV_C2C?Yn.CONV_C2C:Yn.CONV_GROUP}))._isInfoCompleted||t.type===Yn.CONV_SYSTEM)return k_({conversation:t});var o=new dp(Wp),r=\"\".concat(this._className,\".getConversationProfile\");return Qi.log(\"\".concat(r,\". conversationID:\").concat(e,\" remark:\").concat(t.remark,\" lastMessage:\"),t.lastMessage),this._updateUserOrGroupProfileCompletely(t).then((function(a){o.setNetworkType(n.getNetworkType()).setMessage(\"conversationID:\".concat(e,\" unreadCount:\").concat(a.data.conversation.unreadCount)).end();var s=n.getModule(il);if(s&&t.type===Yn.CONV_C2C){var i=e.replace(Yn.CONV_C2C,\"\");if(s.isMyFriend(i)){var c=s.getFriendRemark(i);t.remark!==c&&(t.remark=c,Qi.log(\"\".concat(r,\". conversationID:\").concat(e,\" patch remark:\").concat(t.remark)))}}return Qi.log(\"\".concat(r,\" ok. conversationID:\").concat(e)),a})).catch((function(t){return n.probeNetwork().then((function(n){var r=Pn(n,2),a=r[0],s=r[1];o.setError(t,a,s).setMessage(\"conversationID:\".concat(e)).end()})),Qi.error(\"\".concat(r,\" failed. error:\"),t),O_(t)}))}},{key:\"_updateUserOrGroupProfileCompletely\",value:function(e){var t=this;return e.type===Yn.CONV_C2C?this.getModule(rl).getUserProfile({userIDList:[e.toAccount]}).then((function(n){var o=n.data;return 0===o.length?O_(new A_({code:zd.USER_OR_GROUP_NOT_FOUND,message:Jd.USER_OR_GROUP_NOT_FOUND})):(e.userProfile=o[0],e._isInfoCompleted=!0,t._unshiftConversation(e),k_({conversation:e}))})):this.getModule(sl).getGroupProfile({groupID:e.toAccount}).then((function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=!0,t._unshiftConversation(e),k_({conversation:e})}))}},{key:\"_unshiftConversation\",value:function(e){e instanceof rm&&!this._conversationMap.has(e.conversationID)&&(this._conversationMap=new Map([[e.conversationID,e]].concat(Un(this._conversationMap))),this._setStorageConversationList(),this.emitConversationUpdate(!0,!1))}},{key:\"_onProfileUpdated\",value:function(e){var t=this;e.data.forEach((function(e){var n=e.userID;if(n===t.getMyUserID())t._onMyProfileModified({latestNick:e.nick,latestAvatar:e.avatar});else{var o=t._conversationMap.get(\"\".concat(Yn.CONV_C2C).concat(n));o&&(o.userProfile=e)}}))}},{key:\"deleteConversation\",value:function(e){var t=this,n={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0};if(!this._conversationMap.has(e)){var o=new A_({code:zd.CONVERSATION_NOT_FOUND,message:Jd.CONVERSATION_NOT_FOUND});return O_(o)}switch(this._conversationMap.get(e).type){case Yn.CONV_C2C:n.type=1,n.toAccount=e.replace(Yn.CONV_C2C,\"\");break;case Yn.CONV_GROUP:n.type=2,n.toGroupID=e.replace(Yn.CONV_GROUP,\"\");break;case Yn.CONV_SYSTEM:return this.getModule(sl).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),this.deleteLocalConversation(e),k_({conversationID:e});default:var r=new A_({code:zd.CONVERSATION_UN_RECORDED_TYPE,message:Jd.CONVERSATION_UN_RECORDED_TYPE});return O_(r)}var a=new dp(Yp);a.setMessage(\"conversationID:\".concat(e));var s=\"\".concat(this._className,\".deleteConversation\");return Qi.log(\"\".concat(s,\". conversationID:\").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.request({protocolName:zl,requestData:n})})).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(s,\" ok\")),t.deleteLocalConversation(e),k_({conversationID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.error(\"\".concat(s,\" failed. error:\"),e),O_(e)}))}},{key:\"pinConversation\",value:function(e){var t=this,n=e.conversationID,o=e.isPinned;if(!this._conversationMap.has(n))return O_({code:zd.CONVERSATION_NOT_FOUND,message:Jd.CONVERSATION_NOT_FOUND});var r=this.getLocalConversation(n);if(r.isPinned===o)return k_({conversationID:n});var a=new dp($p);a.setMessage(\"conversationID:\".concat(n,\" isPinned:\").concat(o));var s=\"\".concat(this._className,\".pinConversation\");Qi.log(\"\".concat(s,\". conversationID:\").concat(n,\" isPinned:\").concat(o));var i=null;return Pc(n)?i={type:1,toAccount:n.replace(Yn.CONV_C2C,\"\")}:Uc(n)&&(i={type:2,groupID:n.replace(Yn.CONV_GROUP,\"\")}),this.request({protocolName:Jl,requestData:{fromAccount:this.getMyUserID(),operationType:!0===o?1:2,itemList:[i]}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(s,\" ok\")),r.isPinned!==o&&(r.isPinned=o,t._sortConversationListAndEmitEvent()),y_({conversationID:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.error(\"\".concat(s,\" failed. error:\"),e),O_(e)}))}},{key:\"setMessageRemindType\",value:function(e){return this._messageRemindHandler.set(e)}},{key:\"patchMessageRemindType\",value:function(e){var t=e.ID,n=e.isC2CConversation,o=e.messageRemindType,r=!1,a=this.getLocalConversation(n?\"\".concat(Yn.CONV_C2C).concat(t):\"\".concat(Yn.CONV_GROUP).concat(t));return a&&a.messageRemindType!==o&&(a.messageRemindType=o,r=!0),r}},{key:\"onC2CMessageRemindTypeSynced\",value:function(e){var t=this;Qi.debug(\"\".concat(this._className,\".onC2CMessageRemindTypeSynced options:\"),e),e.dataList.forEach((function(e){if(!Jc(e.muteNotificationsSync)){var n,o=e.muteNotificationsSync,r=o.to,a=o.updateSequence,s=o.muteFlag;t._messageRemindHandler.setUpdateSequence(a),0===s?n=Yn.MSG_REMIND_ACPT_AND_NOTE:1===s?n=Yn.MSG_REMIND_DISCARD:2===s&&(n=Yn.MSG_REMIND_ACPT_NOT_NOTE);var i=0;t.patchMessageRemindType({ID:r,isC2CConversation:!0,messageRemindType:n})&&(i+=1),Qi.log(\"\".concat(t._className,\".onC2CMessageRemindTypeSynced updateCount:\").concat(i)),i>=1&&t.emitConversationUpdate(!0,!1)}}))}},{key:\"deleteLocalConversation\",value:function(e){var t=this._conversationMap.has(e);Qi.log(\"\".concat(this._className,\".deleteLocalConversation conversationID:\").concat(e,\" has:\").concat(t)),t&&(this._conversationMap.delete(e),this._roamingMessageKeyAndTimeMap.delete(e),this._setStorageConversationList(),this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),this.emitConversationUpdate(!0,!1))}},{key:\"isMessageSentByCurrentInstance\",value:function(e){return!(!this._messageListHandler.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}},{key:\"modifyMessageList\",value:function(e){if(e.startsWith(Yn.CONV_C2C)&&this._conversationMap.has(e)){var t=this._conversationMap.get(e),n=Date.now();this._messageListHandler.modifyMessageSentByPeer({conversationID:e,latestNick:t.userProfile.nick,latestAvatar:t.userProfile.avatar});var o=this.getModule(rl).getNickAndAvatarByUserID(this.getMyUserID());this._messageListHandler.modifyMessageSentByMe({conversationID:e,latestNick:o.nick,latestAvatar:o.avatar}),Qi.log(\"\".concat(this._className,\".modifyMessageList conversationID:\").concat(e,\" cost \").concat(Date.now()-n,\" ms\"))}}},{key:\"updateUserProfileSpecifiedKey\",value:function(e){Qi.log(\"\".concat(this._className,\".updateUserProfileSpecifiedKey options:\"),e);var t=e.conversationID,n=e.nick,o=e.avatar;if(this._conversationMap.has(t)){var r=this._conversationMap.get(t).userProfile;uc(n)&&r.nick!==n&&(r.nick=n),uc(o)&&r.avatar!==o&&(r.avatar=o),this.emitConversationUpdate(!0,!1)}}},{key:\"_onMyProfileModified\",value:function(e){var t=this,n=this.getLocalConversationList(),o=Date.now();n.forEach((function(n){t.modifyMessageSentByMe(Cn({conversationID:n.conversationID},e))})),Qi.log(\"\".concat(this._className,\"._onMyProfileModified. modify all messages sent by me, cost \").concat(Date.now()-o,\" ms\"))}},{key:\"modifyMessageSentByMe\",value:function(e){this._messageListHandler.modifyMessageSentByMe(e)}},{key:\"getLatestMessageSentByMe\",value:function(e){return this._messageListHandler.getLatestMessageSentByMe(e)}},{key:\"modifyMessageSentByPeer\",value:function(e){this._messageListHandler.modifyMessageSentByPeer(e)}},{key:\"getLatestMessageSentByPeer\",value:function(e){return this._messageListHandler.getLatestMessageSentByPeer(e)}},{key:\"pushIntoNoticeResult\",value:function(e,t){return!(!this._messageListHandler.pushIn(t)||this.singlyLinkedList.has(t.random))&&(e.push(t),!0)}},{key:\"getGroupLocalLastMessageSequence\",value:function(e){return this._messageListHandler.getGroupLocalLastMessageSequence(e)}},{key:\"checkAndPatchRemark\",value:function(){var e=Promise.resolve();if(0===this._conversationMap.size)return e;var t=this.getModule(il);if(!t)return e;var n=Un(this._conversationMap.values()).filter((function(e){return e.type===Yn.CONV_C2C}));if(0===n.length)return e;var o=0;return n.forEach((function(e){var n=e.conversationID.replace(Yn.CONV_C2C,\"\");if(t.isMyFriend(n)){var r=t.getFriendRemark(n);e.remark!==r&&(e.remark=r,o+=1)}})),Qi.log(\"\".concat(this._className,\".checkAndPatchRemark. c2c conversation count:\").concat(n.length,\", patched count:\").concat(o)),e}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._pagingStatus=qu.NOT_START,this._messageListHandler.reset(),this._messageRemindHandler.reset(),this._roamingMessageKeyAndTimeMap.clear(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._conversationMap.clear(),this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this._remoteGroupReadSequenceMap.clear(),this.resetReady()}}]),n}(Al),im=function(){function e(t){yn(this,e),this._groupModule=t,this._className=\"GroupTipsHandler\",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4}return En(e,[{key:\"onCheckTimer\",value:function(e){e%1==0&&this._cachedGroupTipsMap.size>0&&this._checkCachedGroupTips()}},{key:\"_checkCachedGroupTips\",value:function(){var e=this;this._cachedGroupTipsMap.forEach((function(t,n){var o=e._checkCountMap.get(n),r=e._groupModule.hasLocalGroup(n);Qi.log(\"\".concat(e._className,\"._checkCachedGroupTips groupID:\").concat(n,\" hasLocalGroup:\").concat(r,\" checkCount:\").concat(o)),r?(e._notifyCachedGroupTips(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupTips(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:\"onNewGroupTips\",value:function(e){Qi.debug(\"\".concat(this._className,\".onReceiveGroupTips count:\").concat(e.dataList.length));var t=this.newGroupTipsStoredAndSummary(e),n=t.eventDataList,o=t.result,r=t.AVChatRoomMessageList;(r.length>0&&this._groupModule.onAVChatRoomMessage(r),n.length>0)&&(this._groupModule.getModule(ul).onNewMessage({conversationOptionsList:n,isInstantMessage:!0}),this._groupModule.updateNextMessageSeq(n));o.length>0&&(this._groupModule.emitOuterEvent(Wn.MESSAGE_RECEIVED,o),this.handleMessageList(o))}},{key:\"newGroupTipsStoredAndSummary\",value:function(e){for(var t=e.event,n=e.dataList,o=null,r=[],a=[],s={},i=[],c=0,u=n.length;c<u;c++){var l=n[c],d=l.groupProfile.groupID,p=this._groupModule.hasLocalGroup(d);if(p||!this._groupModule.isUnjoinedAVChatRoom(d))if(p)if(this._groupModule.isMessageFromOrToAVChatroom(d)){var g=Rc(l);g.event=t,i.push(g)}else{l.currentUser=this._groupModule.getMyUserID(),l.conversationType=Yn.CONV_GROUP,(o=new M_(l)).setElement({type:Yn.MSG_GRP_TIP,content:Cn({},l.elements,{groupProfile:l.groupProfile})}),o.isSystemMessage=!1;var h=this._groupModule.getModule(ul),f=o,_=f.conversationID,m=f.sequence;if(6===t)o._onlineOnlyFlag=!0,a.push(o);else if(!h.pushIntoNoticeResult(a,o))continue;if(6!==t||!h.getLocalConversation(_)){if(6!==t)this._groupModule.getModule(Sl).addMessageSequence({key:rp,message:o});var v=h.isRemoteRead({conversationID:_,sequence:m});if(gc(s[_]))s[_]=r.push({conversationID:_,unreadCount:\"in\"!==o.flow||o._onlineOnlyFlag||v?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})-1;else{var M=s[_];r[M].type=o.conversationType,r[M].subType=o.conversationSubType,r[M].lastMessage=o,\"in\"!==o.flow||o._onlineOnlyFlag||v||r[M].unreadCount++}}}else this._cacheGroupTipsAndProbe({groupID:d,event:t,item:l})}return{eventDataList:r,result:a,AVChatRoomMessageList:i}}},{key:\"handleMessageList\",value:function(e){var t=this;e.forEach((function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;default:Qi.warn(\"\".concat(t._className,\".handleMessageList unknown operationType:\").concat(e.payload.operationType))}}))}},{key:\"_onNewMemberComeIn\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&cc(n)&&r.memberCount!==n&&(r.memberCount=n,this._updateConversationGroupProfile(r))}},{key:\"_onMemberQuit\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&cc(n)&&r.memberCount!==n&&(r.memberCount=n,this._updateConversationGroupProfile(r)),this._groupModule.getModule(cl).deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:\"_onMemberKickedOut\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&cc(n)&&r.memberCount!==n&&(r.memberCount=n,this._updateConversationGroupProfile(r)),this._groupModule.getModule(cl).deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:\"_updateConversationGroupProfile\",value:function(e){this._groupModule.getModule(ul).updateConversationGroupProfile([e])}},{key:\"_onMemberSetAdmin\",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(cl);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(Yn.GRP_MBR_ROLE_ADMIN)}))}},{key:\"_onMemberCancelledAdmin\",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(cl);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(Yn.GRP_MBR_ROLE_MEMBER)}))}},{key:\"_onGroupProfileModified\",value:function(e){var t=this,n=e.payload,o=n.newGroupProfile,r=n.groupProfile.groupID,a=this._groupModule.getLocalGroupProfile(r);Object.keys(o).forEach((function(e){switch(e){case\"ownerID\":t._ownerChanged(a,o);break;default:a[e]=o[e]}})),this._groupModule.emitGroupListUpdate(!0,!0)}},{key:\"_ownerChanged\",value:function(e,t){var n=e.groupID,o=this._groupModule.getLocalGroupProfile(n),r=this._groupModule.getMyUserID();if(r===t.ownerID){o.updateGroup({selfInfo:{role:Yn.GRP_MBR_ROLE_OWNER}});var a=this._groupModule.getModule(cl),s=a.getLocalGroupMemberInfo(n,r),i=this._groupModule.getLocalGroupProfile(n).ownerID,c=a.getLocalGroupMemberInfo(n,i);s&&s.updateRole(Yn.GRP_MBR_ROLE_OWNER),c&&c.updateRole(Yn.GRP_MBR_ROLE_MEMBER)}}},{key:\"_onMemberInfoModified\",value:function(e){var t=e.payload.groupProfile.groupID,n=this._groupModule.getModule(cl);e.payload.memberList.forEach((function(e){var o=n.getLocalGroupMemberInfo(t,e.userID);o&&cc(e.muteTime)&&o.updateMuteUntil(e.muteTime)}))}},{key:\"_cacheGroupTips\",value:function(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}},{key:\"_deleteCachedGroupTips\",value:function(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}},{key:\"_notifyCachedGroupTips\",value:function(e){var t=this,n=this._cachedGroupTipsMap.get(e)||[];n.forEach((function(e){t.onNewGroupTips(e)})),this._deleteCachedGroupTips(e),Qi.log(\"\".concat(this._className,\"._notifyCachedGroupTips groupID:\").concat(e,\" count:\").concat(n.length))}},{key:\"_cacheGroupTipsAndProbe\",value:function(e){var t=this,n=e.groupID,o=e.event,r=e.item;this._cacheGroupTips(n,{event:o,dataList:[r]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===Yn.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupTips(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupTips(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Qi.log(\"\".concat(this._className,\"._cacheGroupTipsAndProbe groupID:\").concat(n))}},{key:\"reset\",value:function(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear()}}]),e}(),cm=[].push,um=Math.min,lm=!r((function(){return!RegExp(4294967295,\"y\")}));vs(\"split\",2,(function(e,t,n){var o;return o=\"c\"==\"abbc\".split(/(b)*/)[1]||4!=\"test\".split(/(?:)/,-1).length||2!=\"ab\".split(/(?:ab)*/).length||4!=\".\".split(/(.?)(.?)/).length||\".\".split(/()()/).length>1||\"\".split(/.?/).length?function(e,n){var o=String(h(this)),r=void 0===n?4294967295:n>>>0;if(0===r)return[];if(void 0===e)return[o];if(!cs(e))return t.call(o,e,r);for(var a,s,i,c=[],u=(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.unicode?\"u\":\"\")+(e.sticky?\"y\":\"\"),l=0,d=new RegExp(e.source,u+\"g\");(a=ts.call(d,o))&&!((s=d.lastIndex)>l&&(c.push(o.slice(l,a.index)),a.length>1&&a.index<o.length&&cm.apply(c,a.slice(1)),i=a[0].length,l=s,c.length>=r));)d.lastIndex===a.index&&d.lastIndex++;return l===o.length?!i&&d.test(\"\")||c.push(\"\"):c.push(o.slice(l)),c.length>r?c.slice(0,r):c}:\"0\".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=h(this),a=null==t?void 0:t[e];return void 0!==a?a.call(t,r,n):o.call(String(r),t,n)},function(e,r){var a=n(o,e,this,r,o!==t);if(a.done)return a.value;var s=A(e),i=String(this),c=Lr(s,RegExp),u=s.unicode,l=(s.ignoreCase?\"i\":\"\")+(s.multiline?\"m\":\"\")+(s.unicode?\"u\":\"\")+(lm?\"y\":\"g\"),d=new c(lm?s:\"^(?:\"+s.source+\")\",l),p=void 0===r?4294967295:r>>>0;if(0===p)return[];if(0===i.length)return null===Is(d,i)?[i]:[];for(var g=0,h=0,f=[];h<i.length;){d.lastIndex=lm?h:0;var _,m=Is(d,lm?i:i.slice(h));if(null===m||(_=um(ie(d.lastIndex+(lm?0:h)),i.length))===g)h=ys(i,h,u);else{if(f.push(i.slice(g,h)),f.length===p)return f;for(var v=1;v<=m.length-1;v++)if(f.push(m[v]),f.length===p)return f;h=g=_}}return f.push(i.slice(g)),f}]}),!lm);var dm=function(){function e(t){yn(this,e),this._groupModule=t,this._className=\"CommonGroupHandler\",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,t.getInnerEmitterInstance().once(V_,this._initGroupList,this)}return En(e,[{key:\"onCheckTimer\",value:function(e){e%1==0&&this._cachedGroupMessageMap.size>0&&this._checkCachedGroupMessage()}},{key:\"_checkCachedGroupMessage\",value:function(){var e=this;this._cachedGroupMessageMap.forEach((function(t,n){var o=e._checkCountMap.get(n),r=e._groupModule.hasLocalGroup(n);Qi.log(\"\".concat(e._className,\"._checkCachedGroupMessage groupID:\").concat(n,\" hasLocalGroup:\").concat(r,\" checkCount:\").concat(o)),r?(e._notifyCachedGroupMessage(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupMessage(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:\"_initGroupList\",value:function(){var e=this;Qi.log(\"\".concat(this._className,\"._initGroupList\"));var t=new dp(lg),n=this._groupModule.getStorageGroupList();if(pc(n)&&n.length>0){n.forEach((function(t){e._groupModule.initGroupMap(t)})),this._groupModule.emitGroupListUpdate(!0,!1);var o=this._groupModule.getLocalGroupList().length;t.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"group count:\".concat(o)).end()}else t.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"group count:0\").end();Qi.log(\"\".concat(this._className,\"._initGroupList ok\"))}},{key:\"handleUpdateGroupLastMessage\",value:function(e){var t=\"\".concat(this._className,\".handleUpdateGroupLastMessage\");if(Qi.debug(\"\".concat(t,\" conversation count:\").concat(e.length,\", local group count:\").concat(this._groupModule.getLocalGroupList().length)),0!==this._groupModule.getGroupMap().size){for(var n,o,r,a=!1,s=0,i=e.length;s<i;s++)(n=e[s]).type===Yn.CONV_GROUP&&(o=n.conversationID.split(/^GROUP/)[1],(r=this._groupModule.getLocalGroupProfile(o))&&(r.lastMessage=n.lastMessage,a=!0));a&&(this._groupModule.sortLocalGroupList(),this._groupModule.emitGroupListUpdate(!0,!1))}else this.tempConversationList=e}},{key:\"onNewGroupMessage\",value:function(e){Qi.debug(\"\".concat(this._className,\".onNewGroupMessage count:\").concat(e.dataList.length));var t=this._newGroupMessageStoredAndSummary(e),n=t.conversationOptionsList,o=t.messageList,r=t.AVChatRoomMessageList;(r.length>0&&this._groupModule.onAVChatRoomMessage(r),this._groupModule.filterModifiedMessage(o),n.length>0)&&(this._groupModule.getModule(ul).onNewMessage({conversationOptionsList:n,isInstantMessage:!0}),this._groupModule.updateNextMessageSeq(n));var a=this._groupModule.filterUnmodifiedMessage(o);a.length>0&&this._groupModule.emitOuterEvent(Wn.MESSAGE_RECEIVED,a),o.length=0}},{key:\"_newGroupMessageStoredAndSummary\",value:function(e){var t=e.dataList,n=e.event,o=e.isInstantMessage,r=null,a=[],s=[],i=[],c={},u=Yn.CONV_GROUP,l=this._groupModule.getModule(hl),d=this._groupModule.getModule(Sl),p=t.length;p>1&&t.sort((function(e,t){return e.sequence-t.sequence}));for(var g=0;g<p;g++){var h=t[g],f=h.groupProfile.groupID,_=this._groupModule.hasLocalGroup(f);if(_||!this._groupModule.isUnjoinedAVChatRoom(f))if(_)if(this._groupModule.isMessageFromOrToAVChatroom(f)){var m=Rc(h);m.event=n,i.push(m)}else{h.currentUser=this._groupModule.getMyUserID(),h.conversationType=u,h.isSystemMessage=!!h.isSystemMessage,r=new M_(h),h.elements=l.parseElements(h.elements,h.from),r.setElement(h.elements);var v=1===t[g].isModified,M=this._groupModule.getModule(ul);if(M.isMessageSentByCurrentInstance(r)?r.isModified=v:v=!1,1===h.onlineOnlyFlag)r._onlineOnlyFlag=!0,s.push(r);else{if(!M.pushIntoMessageList(s,r,v))continue;d.addMessageSequence({key:rp,message:r}),o&&r.clientTime>0&&d.addMessageDelay(r.clientTime);var y=r,I=y.conversationID,E=y.sequence,T=M.isRemoteRead({conversationID:I,sequence:E});if(gc(c[I])){var S=0;\"in\"===r.flow&&(r._isExcludedFromUnreadCount||T||(S=1)),c[I]=a.push({conversationID:I,unreadCount:S,type:r.conversationType,subType:r.conversationSubType,lastMessage:r._isExcludedFromLastMessage?\"\":r})-1}else{var C=c[I];a[C].type=r.conversationType,a[C].subType=r.conversationSubType,a[C].lastMessage=r._isExcludedFromLastMessage?\"\":r,\"in\"===r.flow&&(r._isExcludedFromUnreadCount||T||a[C].unreadCount++)}}}else this._cacheGroupMessageAndProbe({groupID:f,event:n,item:h})}return{conversationOptionsList:a,messageList:s,AVChatRoomMessageList:i}}},{key:\"onGroupMessageRevoked\",value:function(e){Qi.debug(\"\".concat(this._className,\".onGroupMessageRevoked nums:\").concat(e.dataList.length));var t=this._groupModule.getModule(ul),n=[],o=null;e.dataList.forEach((function(e){var r=e.elements.revokedInfos;gc(r)||r.forEach((function(e){(o=t.revoke(\"GROUP\".concat(e.groupID),e.sequence,e.random))&&n.push(o)}))})),0!==n.length&&(t.onMessageRevoked(n),this._groupModule.emitOuterEvent(Wn.MESSAGE_REVOKED,n))}},{key:\"_groupListTreeShaking\",value:function(e){for(var t=new Map(Un(this._groupModule.getGroupMap())),n=0,o=e.length;n<o;n++)t.delete(e[n].groupID);this._groupModule.hasJoinedAVChatRoom()&&this._groupModule.getJoinedAVChatRoom().forEach((function(e){t.delete(e)}));for(var r=Un(t.keys()),a=0,s=r.length;a<s;a++)this._groupModule.deleteGroup(r[a])}},{key:\"getGroupList\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupList\"),o=new dp(cg);Qi.log(\"\".concat(n));var r={introduction:\"Introduction\",notification:\"Notification\",createTime:\"CreateTime\",ownerID:\"Owner_Account\",lastInfoTime:\"LastInfoTime\",memberNum:\"MemberNum\",maxMemberNum:\"MaxMemberNum\",joinOption:\"ApplyJoinOption\",muteAllMembers:\"ShutUpAllMember\"},a=[\"Type\",\"Name\",\"FaceUrl\",\"NextMsgSeq\",\"LastMsgTime\"],s=[];return e&&e.groupProfileFilter&&e.groupProfileFilter.forEach((function(e){r[e]&&a.push(r[e])})),this._pagingGetGroupList({limit:50,offset:0,groupBaseInfoFilter:a,groupList:s}).then((function(){Qi.log(\"\".concat(n,\" ok. count:\").concat(s.length)),t._groupListTreeShaking(s),t._groupModule.updateGroupMap(s);var e=t._groupModule.getLocalGroupList().length;return o.setNetworkType(t._groupModule.getNetworkType()).setMessage(\"remote count:\".concat(s.length,\", after tree shaking, local count:\").concat(e)).end(),t.tempConversationList&&(Qi.log(\"\".concat(n,\" update last message with tempConversationList, count:\").concat(t.tempConversationList.length)),t.handleUpdateGroupLastMessage({data:t.tempConversationList}),t.tempConversationList=null),t._groupModule.emitGroupListUpdate(),t._groupModule.patchGroupMessageRemindType(),t._groupModule.recomputeUnreadCount(),y_({groupList:t._groupModule.getLocalGroupList()})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"_pagingGetGroupList\",value:function(e){var t=this,n=\"\".concat(this._className,\"._pagingGetGroupList\"),o=e.isCommunityRelay,r=void 0!==o&&o,a=e.limit,s=e.offset,i=e.groupBaseInfoFilter,c=e.groupList,u=new dp(gg);return this._groupModule.request({protocolName:Ql,requestData:{type:r?Yn.GRP_COMMUNITY:void 0,memberAccount:this._groupModule.getMyUserID(),limit:a,offset:s,responseFilter:{groupBaseInfoFilter:i,selfInfoFilter:[\"Role\",\"JoinTime\",\"MsgFlag\",\"MsgSeq\"]}}}).then((function(e){var o=e.data,l=o.groups,d=void 0===l?[]:l,p=o.totalCount;c.push.apply(c,Un(d));var g=s+a,h=!(p>g),f=\"offset:\".concat(s,\" totalCount:\").concat(p,\" isCompleted:\").concat(h,\" \")+\"currentCount:\".concat(c.length,\" isCommunityRelay:\").concat(r);return u.setNetworkType(t._groupModule.getNetworkType()).setMessage(\"\".concat(f)).end(),r||h?!r&&h?(Qi.log(\"\".concat(n,\" start to get community list\")),s=0,t._pagingGetGroupList({limit:a,offset:s,groupBaseInfoFilter:i,groupList:c,isCommunityRelay:!0})):r&&!h?(s=g,t._pagingGetGroupList({limit:a,offset:s,groupBaseInfoFilter:i,groupList:c,isCommunityRelay:!0})):(Qi.log(\"\".concat(n,\" ok. totalCount:\").concat(c.length)),y_({groupList:c})):(s=g,t._pagingGetGroupList({limit:a,offset:s,groupBaseInfoFilter:i,groupList:c}))})).catch((function(e){return 11e3!==e.code&&t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],a=n[1];u.setMessage(\"isCommunityRelay:\".concat(r)).setError(e,o,a).end()})),r?(11e3===e.code&&(u=null,Qi.log(\"\".concat(n,\" ok. community unavailable\"))),k_({groupList:c})):O_(e)}))}},{key:\"_cacheGroupMessage\",value:function(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}},{key:\"_deleteCachedGroupMessage\",value:function(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}},{key:\"_notifyCachedGroupMessage\",value:function(e){var t=this,n=this._cachedGroupMessageMap.get(e)||[];n.forEach((function(e){t.onNewGroupMessage(e)})),this._deleteCachedGroupMessage(e),Qi.log(\"\".concat(this._className,\"._notifyCachedGroupMessage groupID:\").concat(e,\" count:\").concat(n.length))}},{key:\"_cacheGroupMessageAndProbe\",value:function(e){var t=this,n=e.groupID,o=e.event,r=e.item;this._cacheGroupMessage(n,{event:o,dataList:[r]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===Yn.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupMessage(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupMessage(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Qi.log(\"\".concat(this._className,\"._cacheGroupMessageAndProbe groupID:\").concat(n))}},{key:\"reset\",value:function(){this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._groupModule.getInnerEmitterInstance().once(V_,this._initGroupList,this)}}]),e}(),pm={1:\"init\",2:\"modify\",3:\"clear\",4:\"delete\"},gm=function(){function e(t){yn(this,e),this._groupModule=t,this._className=\"GroupAttributesHandler\",this._groupAttributesMap=new Map,this.CACHE_EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(K_,this._onCloudConfigUpdated,this)}return En(e,[{key:\"_onCloudConfigUpdated\",value:function(){var e=this._groupModule.getCloudConfig(\"grp_attr_cache_time\");gc(e)||(this.CACHE_EXPIRE_TIME=Number(e))}},{key:\"updateLocalMainSequenceOnReconnected\",value:function(){this._groupAttributesMap.forEach((function(e){e.localMainSequence=0}))}},{key:\"onGroupAttributesUpdated\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributeOption,r=o.mainSequence,a=o.hasChangedAttributeInfo,s=o.groupAttributeList,i=void 0===s?[]:s,c=o.operationType;if(Qi.log(\"\".concat(this._className,\".onGroupAttributesUpdated. hasChangedAttributeInfo:\").concat(a,\" operationType:\").concat(c)),!gc(c)){if(1===a){if(4===c){var u=[];i.forEach((function(e){u.push(e.key)})),i=Un(u),u=null}return this._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:r,groupAttributeList:i,operationType:pm[c]}),void this._emitGroupAttributesUpdated(n)}if(this._groupAttributesMap.has(n)){var l=this._groupAttributesMap.get(n).avChatRoomKey;this._getGroupAttributes({groupID:n,avChatRoomKey:l}).then((function(){t._emitGroupAttributesUpdated(n)}))}}}},{key:\"initGroupAttributesCache\",value:function(e){var t=e.groupID,n=e.avChatRoomKey;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:n}),Qi.log(\"\".concat(this._className,\".initGroupAttributesCache groupID:\").concat(t,\" avChatRoomKey:\").concat(n))}},{key:\"initGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,r=this._checkCachedGroupAttributes({groupID:n,funcName:\"initGroupAttributes\"});if(!0!==r)return O_(r);var a=this._groupAttributesMap.get(n),s=a.remoteMainSequence,i=a.avChatRoomKey,c=new dp(_g);return c.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(s,\" groupAttributes:\").concat(JSON.stringify(o))),this._groupModule.request({protocolName:Td,requestData:{groupID:n,avChatRoomKey:i,mainSequence:s,groupAttributeList:this._transformGroupAttributes(o)}}).then((function(e){var r=e.data,a=r.mainSequence,s=Un(r.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:a,groupAttributeList:s,operationType:\"init\"}),c.setNetworkType(t._groupModule.getNetworkType()).end(),Qi.log(\"\".concat(t._className,\".initGroupAttributes ok. groupID:\").concat(n)),y_({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),O_(e)}))}},{key:\"setGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,r=this._checkCachedGroupAttributes({groupID:n,funcName:\"setGroupAttributes\"});if(!0!==r)return O_(r);var a=this._groupAttributesMap.get(n),s=a.remoteMainSequence,i=a.avChatRoomKey,c=a.attributes,u=this._transformGroupAttributes(o);u.forEach((function(e){var t=e.key;e.sequence=0,c.has(t)&&(e.sequence=c.get(t).sequence)}));var l=new dp(mg);return l.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(s,\" groupAttributes:\").concat(JSON.stringify(o))),this._groupModule.request({protocolName:Sd,requestData:{groupID:n,avChatRoomKey:i,mainSequence:s,groupAttributeList:u}}).then((function(e){var r=e.data,a=r.mainSequence,s=Un(r.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:a,groupAttributeList:s,operationType:\"modify\"}),l.setNetworkType(t._groupModule.getNetworkType()).end(),Qi.log(\"\".concat(t._className,\".setGroupAttributes ok. groupID:\").concat(n)),y_({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),O_(e)}))}},{key:\"deleteGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.keyList,r=void 0===o?[]:o,a=this._checkCachedGroupAttributes({groupID:n,funcName:\"deleteGroupAttributes\"});if(!0!==a)return O_(a);var s=this._groupAttributesMap.get(n),i=s.remoteMainSequence,c=s.avChatRoomKey,u=s.attributes,l=Un(u.keys()),d=Ad,p=\"clear\",g={groupID:n,avChatRoomKey:c,mainSequence:i};if(r.length>0){var h=[];l=[],d=Cd,p=\"delete\",r.forEach((function(e){var t=0;u.has(e)&&(t=u.get(e).sequence,l.push(e)),h.push({key:e,sequence:t})})),g.groupAttributeList=h}var f=new dp(vg);return f.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(i,\" keyList:\").concat(r,\" protocolName:\").concat(d)),this._groupModule.request({protocolName:d,requestData:g}).then((function(e){var o=e.data.mainSequence;return t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:o,groupAttributeList:r,operationType:p}),f.setNetworkType(t._groupModule.getNetworkType()).end(),Qi.log(\"\".concat(t._className,\".deleteGroupAttributes ok. groupID:\").concat(n)),y_({keyList:l})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];f.setError(e,o,r).end()})),O_(e)}))}},{key:\"getGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=this._checkCachedGroupAttributes({groupID:n,funcName:\"getGroupAttributes\"});if(!0!==o)return O_(o);var r=this._groupAttributesMap.get(n),a=r.avChatRoomKey,s=r.lastUpdateTime,i=r.localMainSequence,c=r.remoteMainSequence,u=new dp(Mg);if(u.setMessage(\"groupID:\".concat(n,\" localMainSequence:\").concat(i,\" remoteMainSequence:\").concat(c,\" keyList:\").concat(e.keyList)),Date.now()-s>=this.CACHE_EXPIRE_TIME||i<c)return this._getGroupAttributes({groupID:n,avChatRoomKey:a}).then((function(o){u.setMoreMessage(\"get attributes from remote. count:\".concat(o.length)).setNetworkType(t._groupModule.getNetworkType()).end(),Qi.log(\"\".concat(t._className,\".getGroupAttributes from remote. groupID:\").concat(n));var r=t._getLocalGroupAttributes(e);return y_({groupAttributes:r})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),O_(e)}));u.setMoreMessage(\"get attributes from cache\").setNetworkType(this._groupModule.getNetworkType()).end(),Qi.log(\"\".concat(this._className,\".getGroupAttributes from cache. groupID:\").concat(n));var l=this._getLocalGroupAttributes(e);return k_({groupAttributes:l})}},{key:\"_getGroupAttributes\",value:function(e){var t=this;return this._groupModule.request({protocolName:Dd,requestData:Cn({},e)}).then((function(n){var o=n.data,r=o.mainSequence,a=o.groupAttributeList,s=Un(a);return gc(r)||t._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:r,groupAttributeList:s,operationType:\"get\"}),Qi.log(\"\".concat(t._className,\"._getGroupAttributes ok. groupID:\").concat(e.groupID)),a})).catch((function(e){return O_(e)}))}},{key:\"_getLocalGroupAttributes\",value:function(e){var t=e.groupID,n=e.keyList,o=void 0===n?[]:n,r={};if(!this._groupAttributesMap.has(t))return r;var a=this._groupAttributesMap.get(t).attributes;if(o.length>0)o.forEach((function(e){a.has(e)&&(r[e]=a.get(e).value)}));else{var s,i=Bn(a.keys());try{for(i.s();!(s=i.n()).done;){var c=s.value;r[c]=a.get(c).value}}catch(u){i.e(u)}finally{i.f()}}return r}},{key:\"_refreshCachedGroupAttributes\",value:function(e){var t=e.groupID,n=e.remoteMainSequence,o=e.groupAttributeList,r=e.operationType;if(this._groupAttributesMap.has(t)){var a=this._groupAttributesMap.get(t),s=a.localMainSequence;if(\"get\"===r||n-s==1)a.remoteMainSequence=n,a.localMainSequence=n,a.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:a,groupAttributeList:o,operationType:r});else{if(s===n)return;a.remoteMainSequence=n}this._groupAttributesMap.set(t,a);var i=\"operationType:\".concat(r,\" localMainSequence:\").concat(s,\" remoteMainSequence:\").concat(n);Qi.log(\"\".concat(this._className,\"._refreshCachedGroupAttributes. \").concat(i))}}},{key:\"_updateCachedAttributes\",value:function(e){var t=e.groupAttributes,n=e.groupAttributeList,o=e.operationType;\"clear\"!==o?\"delete\"!==o?(\"init\"===o&&t.attributes.clear(),n.forEach((function(e){var n=e.key,o=e.value,r=e.sequence;t.attributes.set(n,{value:o,sequence:r})}))):n.forEach((function(e){t.attributes.delete(e)})):t.attributes.clear()}},{key:\"_checkCachedGroupAttributes\",value:function(e){var t=e.groupID,n=e.funcName;if(this._groupModule.hasLocalGroup(t)&&this._groupModule.getLocalGroupProfile(t).type!==Yn.GRP_AVCHATROOM){return Qi.warn(\"\".concat(this._className,\"._checkCachedGroupAttributes. \").concat(\"非直播群不能使用群属性 API\")),new A_({code:zd.CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM,message:\"非直播群不能使用群属性 API\"})}var o=this._groupAttributesMap.get(t);if(gc(o)){var r=\"如果 groupID:\".concat(t,\" 是直播群，使用 \").concat(n,\" 前先使用 joinGroup 接口申请加入群组，详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup\");return Qi.warn(\"\".concat(this._className,\"._checkCachedGroupAttributes. \").concat(r)),new A_({code:zd.CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN,message:r})}return!0}},{key:\"_transformGroupAttributes\",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:\"_emitGroupAttributesUpdated\",value:function(e){var t=this._getLocalGroupAttributes({groupID:e});this._groupModule.emitOuterEvent(Wn.GROUP_ATTRIBUTES_UPDATED,{groupID:e,groupAttributes:t})}},{key:\"reset\",value:function(){this._groupAttributesMap.clear(),this.CACHE_EXPIRE_TIME=3e4}}]),e}(),hm=function(){function e(t){yn(this,e);var n=t.manager,o=t.groupID,r=t.onInit,a=t.onSuccess,s=t.onFail;this._className=\"Polling\",this._manager=n,this._groupModule=n._groupModule,this._onInit=r,this._onSuccess=a,this._onFail=s,this._groupID=o,this._timeoutID=-1,this._isRunning=!1,this._protocolName=Md}return En(e,[{key:\"start\",value:function(){var e=this._groupModule.isLoggedIn();e||(this._protocolName=yd),Qi.log(\"\".concat(this._className,\".start pollingInterval:\").concat(this._manager.getPollingInterval(),\" isLoggedIn:\").concat(e)),this._isRunning=!0,this._request()}},{key:\"isRunning\",value:function(){return this._isRunning}},{key:\"_request\",value:function(){var e=this,t=this._onInit(this._groupID);this._groupModule.request({protocolName:this._protocolName,requestData:t}).then((function(t){e._onSuccess(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.getPollingInterval()))})).catch((function(t){e._onFail(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.MAX_POLLING_INTERVAL))}))}},{key:\"stop\",value:function(){Qi.log(\"\".concat(this._className,\".stop\")),this._timeoutID>0&&(clearTimeout(this._timeoutID),this._timeoutID=-1),this._isRunning=!1}}]),e}(),fm={3:!0,4:!0,5:!0,6:!0},_m=function(){function e(t){yn(this,e),this._groupModule=t,this._className=\"AVChatRoomHandler\",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this.sequencesLinkedList=new Z_(100),this.messageIDLinkedList=new Z_(100),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60,this.DEFAULT_POLLING_INTERVAL=300,this.MAX_POLLING_INTERVAL=2e3,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL}return En(e,[{key:\"hasJoinedAVChatRoom\",value:function(){return this._joinedGroupMap.size>0}},{key:\"checkJoinedAVChatRoomByID\",value:function(e){return this._joinedGroupMap.has(e)}},{key:\"getJoinedAVChatRoom\",value:function(){return this._joinedGroupMap.size>0?Un(this._joinedGroupMap.keys()):null}},{key:\"_updateRequestData\",value:function(e){return Cn({},this._pollingRequestInfoMap.get(e))}},{key:\"_handleSuccess\",value:function(e,t){var n=t.data,o=n.key,r=n.nextSeq,a=n.rspMsgList;if(0!==n.errorCode){var s=this._pollingRequestInfoMap.get(e),i=new dp(kg),c=s?\"\".concat(s.key,\"-\").concat(s.startSeq):\"requestInfo is undefined\";i.setMessage(\"\".concat(e,\"-\").concat(c,\"-\").concat(t.errorInfo)).setCode(t.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(!0)}else{if(!this.checkJoinedAVChatRoomByID(e))return;uc(o)&&cc(r)&&this._pollingRequestInfoMap.set(e,{key:o,startSeq:r}),pc(a)&&a.length>0&&(a.forEach((function(e){e.to=e.groupID})),this.onMessage(a))}}},{key:\"_handleFailure\",value:function(e,t){}},{key:\"onMessage\",value:function(e){if(pc(e)&&0!==e.length){var t=null,n=[],o=this._getModule(ul),r=this._getModule(Sl),a=e.length;a>1&&e.sort((function(e,t){return e.sequence-t.sequence}));for(var s=this._getModule(ll),i=0;i<a;i++)if(fm[e[i].event]){this.receivedMessageCount+=1,t=this.packMessage(e[i],e[i].event);var c=1===e[i].isModified,u=1===e[i].isHistoryMessage;if((s.isUnlimitedAVChatRoom()||!this.sequencesLinkedList.has(t.sequence))&&!this.messageIDLinkedList.has(t.ID)){var l=t.conversationID;if(this.receivedMessageCount%40==0&&this._getModule(yl).detectMessageLoss(l,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){var d=this.sequencesLinkedList.tail().value,p=t.sequence-d;p>1&&p<=20?this._getModule(yl).onMessageMaybeLost(l,d+1,p-1):p<-1&&p>=-20&&this._getModule(yl).onMessageMaybeLost(l,t.sequence+1,Math.abs(p)-1)}this.sequencesLinkedList.set(t.sequence),this.messageIDLinkedList.set(t.ID);var g=!1;if(this._isMessageSentByCurrentInstance(t)?c&&(g=!0,t.isModified=c,o.updateMessageIsModifiedProperty(t)):g=!0,g){if(t.conversationType,Yn.CONV_SYSTEM,!u&&t.conversationType!==Yn.CONV_SYSTEM){var h=t.conversationID.replace(Yn.CONV_GROUP,\"\");this._pollingInstanceMap.has(h)?r.addMessageSequence({key:sp,message:t}):(t.type!==Yn.MSG_GRP_TIP&&t.clientTime>0&&r.addMessageDelay(t.clientTime),r.addMessageSequence({key:ap,message:t}))}n.push(t)}}}else Qi.warn(\"\".concat(this._className,\".onMessage 未处理的 event 类型: \").concat(e[i].event));if(0!==n.length){this._groupModule.filterModifiedMessage(n);var f=this.packConversationOption(n);if(f.length>0)this._getModule(ul).onNewMessage({conversationOptionsList:f,isInstantMessage:!0});Qi.debug(\"\".concat(this._className,\".onMessage count:\").concat(n.length)),this._checkMessageStacked(n);var _=this._groupModule.filterUnmodifiedMessage(n);_.length>0&&this._groupModule.emitOuterEvent(Wn.MESSAGE_RECEIVED,_),n.length=0}}}},{key:\"_checkMessageStacked\",value:function(e){var t=e.length;t>=100&&(Qi.warn(\"\".concat(this._className,\"._checkMessageStacked 直播群消息堆积数:\").concat(e.length,\\'！可能会导致微信小程序渲染时遇到 \"Dom limit exceeded\" 的错误，建议接入侧此时只渲染最近的10条消息\\')),this._reportMessageStackedCount<5&&(new dp(Rg).setNetworkType(this._groupModule.getNetworkType()).setMessage(\"count:\".concat(t,\" groupID:\").concat(Un(this._joinedGroupMap.keys()))).setLevel(\"warning\").end(),this._reportMessageStackedCount+=1))}},{key:\"_isMessageSentByCurrentInstance\",value:function(e){return!!this._getModule(ul).isMessageSentByCurrentInstance(e)}},{key:\"packMessage\",value:function(e,t){e.currentUser=this._groupModule.getMyUserID(),e.conversationType=5===t?Yn.CONV_SYSTEM:Yn.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var n=new M_(e),o=this.packElements(e,t);return n.setElement(o),n}},{key:\"packElements\",value:function(e,t){return 4===t||6===t?(this._updateMemberCountByGroupTips(e),this._onGroupAttributesUpdated(e),{type:Yn.MSG_GRP_TIP,content:Cn({},e.elements,{groupProfile:e.groupProfile})}):5===t?{type:Yn.MSG_GRP_SYS_NOTICE,content:Cn({},e.elements,{groupProfile:e.groupProfile})}:this._getModule(hl).parseElements(e.elements,e.from)}},{key:\"packConversationOption\",value:function(e){for(var t=new Map,n=0;n<e.length;n++){var o=e[n],r=o.conversationID;if(t.has(r)){var a=t.get(r);a.lastMessage=o,\"in\"===o.flow&&a.unreadCount++}else t.set(r,{conversationID:o.conversationID,unreadCount:\"out\"===o.flow?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})}return Un(t.values())}},{key:\"_updateMemberCountByGroupTips\",value:function(e){var t=e.groupProfile.groupID,n=e.elements.onlineMemberInfo,o=void 0===n?void 0:n;if(!Jc(o)){var r=o.onlineMemberNum,a=void 0===r?0:r,s=o.expireTime,i=void 0===s?this.DEFAULT_EXPIRE_TIME:s,c=this._onlineMemberCountMap.get(t)||{},u=Date.now();Jc(c)?Object.assign(c,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:u,memberCount:a,expireTime:i}):(c.latestUpdateTime=u,c.memberCount=a),Qi.debug(\"\".concat(this._className,\"._updateMemberCountByGroupTips info:\"),c),this._onlineMemberCountMap.set(t,c)}}},{key:\"start\",value:function(e){if(this._pollingInstanceMap.has(e)){var t=this._pollingInstanceMap.get(e);t.isRunning()||t.start()}else{var n=new hm({manager:this,groupID:e,onInit:this._updateRequestData.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)});n.start(),this._pollingInstanceMap.set(e,n),Qi.log(\"\".concat(this._className,\".start groupID:\").concat(e))}}},{key:\"handleJoinResult\",value:function(e){var t=this;return this._preCheck().then((function(){var n=e.longPollingKey,o=e.group,r=o.groupID;return t._joinedGroupMap.set(r,o),t._groupModule.updateGroupMap([o]),t._groupModule.deleteUnjoinedAVChatRoom(r),t._groupModule.emitGroupListUpdate(!0,!1),gc(n)?k_({status:rc,group:o}):Promise.resolve()}))}},{key:\"startRunLoop\",value:function(e){var t=this;return this.handleJoinResult(e).then((function(){var n=e.longPollingKey,o=e.group,r=o.groupID;return t._pollingRequestInfoMap.set(r,{key:n,startSeq:0}),t.start(r),t._groupModule.isLoggedIn()?k_({status:rc,group:o}):k_({status:rc})}))}},{key:\"_preCheck\",value:function(){if(this._getModule(ll).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();var e=Pn(this._joinedGroupMap.entries().next().value,2),t=e[0],n=e[1];if(this._groupModule.isLoggedIn()){if(!(n.selfInfo.role===Yn.GRP_MBR_ROLE_OWNER||n.ownerID===this._groupModule.getMyUserID()))return this._groupModule.quitGroup(t);this._groupModule.deleteLocalGroupAndConversation(t)}else this._groupModule.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:\"joinWithoutAuth\",value:function(e){var t=this,n=e.groupID,o=\"\".concat(this._className,\".joinWithoutAuth\"),r=new dp(fg);return this._groupModule.request({protocolName:rd,requestData:e}).then((function(e){var a=e.data.longPollingKey;if(t._groupModule.probeNetwork().then((function(e){var t=Pn(e,2),o=(t[0],t[1]);r.setNetworkType(o).setMessage(\"groupID:\".concat(n,\" longPollingKey:\").concat(a)).end(!0)})),gc(a))return O_(new A_({code:zd.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN,message:Jd.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN}));Qi.log(\"\".concat(o,\" ok. groupID:\").concat(n)),t._getModule(ul).setCompleted(\"\".concat(Yn.CONV_GROUP).concat(n));var s=new tm({groupID:n});return t.startRunLoop({group:s,longPollingKey:a}),y_({status:rc})})).catch((function(e){return Qi.error(\"\".concat(o,\" failed. groupID:\").concat(n,\" error:\"),e),t._groupModule.probeNetwork().then((function(t){var o=Pn(t,2),a=o[0],s=o[1];r.setError(e,a,s).setMessage(\"groupID:\".concat(n)).end(!0)})),O_(e)})).finally((function(){t._groupModule.getModule(pl).reportAtOnce()}))}},{key:\"getGroupOnlineMemberCount\",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},n=Date.now();return Jc(t)||n-t.lastSyncTime>1e3*t.expireTime&&n-t.latestUpdateTime>1e4&&n-t.lastReqTime>3e3?(t.lastReqTime=n,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then((function(e){return y_({memberCount:e.memberCount})})).catch((function(e){return O_(e)}))):k_({memberCount:t.memberCount})}},{key:\"_getGroupOnlineMemberCount\",value:function(e){var t=this,n=\"\".concat(this._className,\"._getGroupOnlineMemberCount\");return this._groupModule.request({protocolName:Id,requestData:{groupID:e}}).then((function(o){var r=t._onlineMemberCountMap.get(e)||{},a=o.data,s=a.onlineMemberNum,i=void 0===s?0:s,c=a.expireTime,u=void 0===c?t.DEFAULT_EXPIRE_TIME:c;Qi.log(\"\".concat(n,\" ok. groupID:\").concat(e,\" memberCount:\").concat(i,\" expireTime:\").concat(u));var l=Date.now();return Jc(r)&&(r.lastReqTime=l),t._onlineMemberCountMap.set(e,Object.assign(r,{lastSyncTime:l,latestUpdateTime:l,memberCount:i,expireTime:u})),{memberCount:i}})).catch((function(o){return Qi.warn(\"\".concat(n,\" failed. error:\"),o),new dp(Ng).setCode(o.code).setMessage(\"groupID:\".concat(e,\" error:\").concat(JSON.stringify(o))).setNetworkType(t._groupModule.getNetworkType()).end(),Promise.reject(o)}))}},{key:\"_onGroupAttributesUpdated\",value:function(e){var t=e.groupProfile.groupID,n=e.elements,o=n.operationType,r=n.newGroupProfile;if(6===o){var a=(void 0===r?void 0:r).groupAttributeOption;Jc(a)||this._groupModule.onGroupAttributesUpdated({groupID:t,groupAttributeOption:a})}}},{key:\"_getModule\",value:function(e){return this._groupModule.getModule(e)}},{key:\"setPollingInterval\",value:function(e){gc(e)||cc(e)||(this._pollingInterval=parseInt(e,10),Qi.log(\"\".concat(this._className,\".setPollingInterval value:\").concat(this._pollingInterval)))}},{key:\"getPollingInterval\",value:function(){return this._pollingInterval}},{key:\"reset\",value:function(e){if(e){Qi.log(\"\".concat(this._className,\".reset groupID:\").concat(e));var t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{Qi.log(\"\".concat(this._className,\".reset all\"));var n,o=Bn(this._pollingInstanceMap.values());try{for(o.s();!(n=o.n()).done;){n.value.stop()}}catch(r){o.e(r)}finally{o.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear()}this.sequencesLinkedList.reset(),this.messageIDLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL}}]),e}(),mm=1,vm=15,Mm=function(){function e(t){yn(this,e),this._groupModule=t,this._className=\"GroupSystemNoticeHandler\",this.pendencyMap=new Map}return En(e,[{key:\"onNewGroupSystemNotice\",value:function(e){var t=e.dataList,n=e.isSyncingEnded,o=e.isInstantMessage;Qi.debug(\"\".concat(this._className,\".onReceiveSystemNotice count:\").concat(t.length));var r=this.newSystemNoticeStoredAndSummary({notifiesList:t,isInstantMessage:o}),a=r.eventDataList,s=r.result;a.length>0&&(this._groupModule.getModule(ul).onNewMessage({conversationOptionsList:a,isInstantMessage:o}),this._onReceivedGroupSystemNotice({result:s,isInstantMessage:o}));o?s.length>0&&this._groupModule.emitOuterEvent(Wn.MESSAGE_RECEIVED,s):!0===n&&this._clearGroupSystemNotice()}},{key:\"newSystemNoticeStoredAndSummary\",value:function(e){var t=e.notifiesList,n=e.isInstantMessage,o=null,r=t.length,a=0,s=[],i={conversationID:Yn.CONV_SYSTEM,unreadCount:0,type:Yn.CONV_SYSTEM,subType:null,lastMessage:null};for(a=0;a<r;a++){var c=t[a];if(c.elements.operationType!==vm)c.currentUser=this._groupModule.getMyUserID(),c.conversationType=Yn.CONV_SYSTEM,c.conversationID=Yn.CONV_SYSTEM,(o=new M_(c)).setElement({type:Yn.MSG_GRP_SYS_NOTICE,content:Cn({},c.elements,{groupProfile:c.groupProfile})}),o.isSystemMessage=!0,(1===o.sequence&&1===o.random||2===o.sequence&&2===o.random)&&(o.sequence=Sc(),o.random=Sc(),o.generateMessageID(),Qi.log(\"\".concat(this._className,\".newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:\").concat(o.ID))),this._groupModule.getModule(ul).pushIntoNoticeResult(s,o)&&(n?i.unreadCount++:o.setIsRead(!0),i.subType=o.conversationSubType)}return i.lastMessage=s[s.length-1],{eventDataList:s.length>0?[i]:[],result:s}}},{key:\"_clearGroupSystemNotice\",value:function(){var e=this;this.getPendencyList().then((function(t){t.forEach((function(t){e.pendencyMap.set(\"\".concat(t.from,\"_\").concat(t.groupID,\"_\").concat(t.to),t)}));var n=e._groupModule.getModule(ul).getLocalMessageList(Yn.CONV_SYSTEM),o=[];n.forEach((function(t){var n=t.payload,r=n.operatorID,a=n.operationType,s=n.groupProfile;if(a===mm){var i=\"\".concat(r,\"_\").concat(s.groupID,\"_\").concat(s.to),c=e.pendencyMap.get(i);c&&cc(c.handled)&&0!==c.handled&&o.push(t)}})),e.deleteGroupSystemNotice({messageList:o})}))}},{key:\"deleteGroupSystemNotice\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteGroupSystemNotice\");return pc(e.messageList)&&0!==e.messageList.length?(Qi.log(\"\".concat(n)+e.messageList.map((function(e){return e.ID}))),this._groupModule.request({protocolName:vd,requestData:{messageListToDelete:e.messageList.map((function(e){return{from:Yn.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}}))}}).then((function(){Qi.log(\"\".concat(n,\" ok\"));var o=t._groupModule.getModule(ul);return e.messageList.forEach((function(e){o.deleteLocalMessage(e)})),y_()})).catch((function(e){return Qi.error(\"\".concat(n,\" error:\"),e),O_(e)}))):k_()}},{key:\"getPendencyList\",value:function(e){var t=this;return this._groupModule.request({protocolName:md,requestData:{startTime:e&&e.startTime?e.startTime:0,limit:e&&e.limit?e.limit:10,handleAccount:this._groupModule.getMyUserID()}}).then((function(e){var n=e.data.pendencyList;return 0!==e.data.nextStartTime?t.getPendencyList({startTime:e.data.nextStartTime}).then((function(e){return[].concat(Un(n),Un(e))})):n}))}},{key:\"_onReceivedGroupSystemNotice\",value:function(e){var t=this,n=e.result;e.isInstantMessage&&n.forEach((function(e){switch(e.payload.operationType){case 1:break;case 2:t._onApplyGroupRequestAgreed(e);break;case 3:break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 6:break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e)}}))}},{key:\"_onApplyGroupRequestAgreed\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:\"_onMemberKicked\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:\"_onGroupDismissed\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t);var n=this._groupModule._AVChatRoomHandler;n&&n.checkJoinedAVChatRoomByID(t)&&n.reset(t)}},{key:\"_onInviteGroup\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:\"_onQuitGroup\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:\"_onSetManager\",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,r=this._groupModule.getModule(cl).getLocalGroupMemberInfo(o,n);r&&r.updateRole(Yn.GRP_MBR_ROLE_ADMIN)}},{key:\"_onDeleteManager\",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,r=this._groupModule.getModule(cl).getLocalGroupMemberInfo(o,n);r&&r.updateRole(Yn.GRP_MBR_ROLE_MEMBER)}},{key:\"reset\",value:function(){this.pendencyMap.clear()}}]),e}(),ym=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"GroupModule\",o._commonGroupHandler=null,o._AVChatRoomHandler=null,o._groupSystemNoticeHandler=null,o._commonGroupHandler=new dm(bn(o)),o._groupAttributesHandler=new gm(bn(o)),o._AVChatRoomHandler=new _m(bn(o)),o._groupTipsHandler=new im(bn(o)),o._groupSystemNoticeHandler=new Mm(bn(o)),o.groupMap=new Map,o._unjoinedAVChatRoomList=new Map,o._receiptDetailCompleteMap=new Map,o.getInnerEmitterInstance().on(K_,o._onCloudConfigUpdated,bn(o)),o}return En(n,[{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"polling_interval\");this._AVChatRoomHandler&&this._AVChatRoomHandler.setPollingInterval(e)}},{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}},{key:\"guardForAVChatRoom\",value:function(e){var t=this;if(e.conversationType===Yn.CONV_GROUP){var n=e.to;return this.hasLocalGroup(n)?k_():this.getGroupProfile({groupID:n}).then((function(o){var r=o.data.group.type;if(Qi.log(\"\".concat(t._className,\".guardForAVChatRoom. groupID:\").concat(n,\" type:\").concat(r)),r===Yn.GRP_AVCHATROOM){var a=\"userId:\".concat(e.from,\" 未加入群 groupID:\").concat(n,\"。发消息前先使用 joinGroup 接口申请加群，详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup\");return Qi.warn(\"\".concat(t._className,\".guardForAVChatRoom sendMessage not allowed. \").concat(a)),O_(new A_({code:zd.MESSAGE_SEND_FAIL,message:a,data:{message:e}}))}return k_()}))}return k_()}},{key:\"checkJoinedAVChatRoomByID\",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:\"onNewGroupMessage\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onNewGroupMessage(e)}},{key:\"updateNextMessageSeq\",value:function(e){var t=this;pc(e)&&e.forEach((function(e){var n=e.conversationID.replace(Yn.CONV_GROUP,\"\");t.groupMap.has(n)&&(t.groupMap.get(n).nextMessageSeq=e.lastMessage.sequence+1)}))}},{key:\"onNewGroupTips\",value:function(e){this._groupTipsHandler&&this._groupTipsHandler.onNewGroupTips(e)}},{key:\"onGroupMessageRevoked\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onGroupMessageRevoked(e)}},{key:\"onNewGroupSystemNotice\",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}},{key:\"onGroupMessageReadNotice\",value:function(e){var t=this;e.dataList.forEach((function(e){var n=e.elements.groupMessageReadNotice;if(!gc(n)){var o=t.getModule(ul);n.forEach((function(e){var n=e.groupID,r=e.lastMessageSeq;Qi.debug(\"\".concat(t._className,\".onGroupMessageReadNotice groupID:\").concat(n,\" lastMessageSeq:\").concat(r));var a=\"\".concat(Yn.CONV_GROUP).concat(n);o.updateIsReadAfterReadReport({conversationID:a,lastMessageSeq:r}),o.updateUnreadCount(a)}))}}))}},{key:\"onReadReceiptList\",value:function(e){var t=this;Qi.debug(\"\".concat(this._className,\".onReadReceiptList options:\"),JSON.stringify(e)),e.dataList.forEach((function(e){var n=e.groupProfile,o=e.elements,r=n.groupID,a=t.getModule(ul),s=o.readReceiptList;a.updateReadReceiptInfo(r,s)}))}},{key:\"deleteGroupSystemNotice\",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}},{key:\"initGroupMap\",value:function(e){this.groupMap.set(e.groupID,new tm(e))}},{key:\"deleteGroup\",value:function(e){this.groupMap.delete(e)}},{key:\"updateGroupMap\",value:function(e){var t=this;e.forEach((function(e){t.groupMap.has(e.groupID)?t.groupMap.get(e.groupID).updateGroup(e):t.groupMap.set(e.groupID,new tm(e))}));var n,o=this.getMyUserID(),r=Bn(this.groupMap);try{for(r.s();!(n=r.n()).done;){Pn(n.value,2)[1].selfInfo.userID=o}}catch(a){r.e(a)}finally{r.f()}this._setStorageGroupList()}},{key:\"getStorageGroupList\",value:function(){return this.getModule(dl).getItem(\"groupMap\")}},{key:\"_setStorageGroupList\",value:function(){var e=this.getLocalGroupList().filter((function(e){var t=e.type;return!wc(t)})).slice(0,20).map((function(e){return{groupID:e.groupID,name:e.name,avatar:e.avatar,type:e.type}}));this.getModule(dl).setItem(\"groupMap\",e)}},{key:\"getGroupMap\",value:function(){return this.groupMap}},{key:\"getLocalGroupList\",value:function(){return Un(this.groupMap.values())}},{key:\"getLocalGroupProfile\",value:function(e){return this.groupMap.get(e)}},{key:\"sortLocalGroupList\",value:function(){var e=Un(this.groupMap).filter((function(e){var t=Pn(e,2);t[0];return!Jc(t[1].lastMessage)}));e.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})),this.groupMap=new Map(Un(e))}},{key:\"updateGroupLastMessage\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.handleUpdateGroupLastMessage(e)}},{key:\"emitGroupListUpdate\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalGroupList();if(e&&this.emitOuterEvent(Wn.GROUP_LIST_UPDATED),t){var o=JSON.parse(JSON.stringify(n)),r=this.getModule(ul);r.updateConversationGroupProfile(o)}}},{key:\"patchGroupMessageRemindType\",value:function(){var e=this.getLocalGroupList(),t=this.getModule(ul),n=0;e.forEach((function(e){!0===t.patchMessageRemindType({ID:e.groupID,isC2CConversation:!1,messageRemindType:e.selfInfo.messageRemindType})&&(n+=1)})),Qi.log(\"\".concat(this._className,\".patchGroupMessageRemindType count:\").concat(n))}},{key:\"recomputeUnreadCount\",value:function(){var e=this.getLocalGroupList(),t=this.getModule(ul);e.forEach((function(e){var n=e.groupID,o=e.selfInfo,r=o.excludedUnreadSequenceList,a=o.readedSequence;if(pc(r)){var s=0;r.forEach((function(t){t>=a&&t<=e.nextMessageSeq-1&&(s+=1)})),s>=1&&t.recomputeGroupUnreadCount({conversationID:\"\".concat(Yn.CONV_GROUP).concat(n),count:s})}}))}},{key:\"getMyNameCardByGroupID\",value:function(e){var t=this.getLocalGroupProfile(e);return t?t.selfInfo.nameCard:\"\"}},{key:\"getGroupList\",value:function(e){return this._commonGroupHandler?this._commonGroupHandler.getGroupList(e):k_()}},{key:\"getGroupProfile\",value:function(e){var t=this,n=new dp(ug),o=\"\".concat(this._className,\".getGroupProfile\"),r=e.groupID,a=e.groupCustomFieldFilter;Qi.log(\"\".concat(o,\" groupID:\").concat(r));var s={groupIDList:[r],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\",\"ShutUpAllMember\"],groupCustomFieldFilter:a,memberInfoFilter:[\"Role\",\"JoinTime\",\"MsgSeq\",\"MsgFlag\",\"NameCard\"]}};return this.getGroupProfileAdvance(s).then((function(e){var a,s=e.data,i=s.successGroupList,c=s.failureGroupList;return Qi.log(\"\".concat(o,\" ok\")),c.length>0?O_(c[0]):(wc(i[0].type)&&!t.hasLocalGroup(r)?a=new tm(i[0]):(t.updateGroupMap(i),a=t.getLocalGroupProfile(r)),t.getModule(ul).updateConversationGroupProfile([a]),n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(r,\" type:\").concat(a.type,\" muteAllMembers:\").concat(a.muteAllMembers,\" ownerID:\").concat(a.ownerID)).end(),y_({group:a}))})).catch((function(r){return t.probeNetwork().then((function(t){var o=Pn(t,2),a=o[0],s=o[1];n.setError(r,a,s).setMessage(\"groupID:\".concat(e.groupID)).end()})),Qi.error(\"\".concat(o,\" failed. error:\"),r),O_(r)}))}},{key:\"getGroupProfileAdvance\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupProfileAdvance\"),o=e.groupIDList;pc(o)&&o.length>50&&(Qi.warn(\"\".concat(n,\" 获取群资料的数量不能超过50个\")),o.length=50);var r=[],a=[];o.forEach((function(e){Gc({groupID:e})?a.push(e):r.push(e)}));var s=[];if(r.length>0){var i=this._getGroupProfileAdvance(Cn({},e,{groupIDList:r}));s.push(i)}if(a.length>0){var c=this._getGroupProfileAdvance(Cn({},e,{groupIDList:a,relayFlag:r.length>0}));s.push(c)}return Promise.all(s).then((function(e){var t=[],n=[];return e.forEach((function(e){t.push.apply(t,Un(e.successGroupList)),n.push.apply(n,Un(e.failureGroupList))})),y_({successGroupList:t,failureGroupList:n})})).catch((function(e){return Qi.error(\"\".concat(t._className,\"._getGroupProfileAdvance failed. error:\"),e),O_(e)}))}},{key:\"_getGroupProfileAdvance\",value:function(e){var t=this,n=e.relayFlag,o=void 0!==n&&n,r=Ln(e,[\"relayFlag\"]);return this.request({protocolName:Zl,requestData:r}).then((function(e){Qi.log(\"\".concat(t._className,\"._getGroupProfileAdvance ok.\"));var n=e.data.groups;return{successGroupList:n.filter((function(e){return gc(e.errorCode)||0===e.errorCode})),failureGroupList:n.filter((function(e){return e.errorCode&&0!==e.errorCode})).map((function(e){return new A_({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})}))}})).catch((function(t){return o&&Gc({groupID:e.groupIDList[0]})?{successGroupList:[],failureGroupList:[]}:O_(t)}))}},{key:\"createGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".createGroup\"),o=e.type,r=e.groupID;if(![\"Public\",\"Private\",\"ChatRoom\",\"AVChatRoom\",\"Community\"].includes(o))return O_({code:zd.ILLEGAL_GROUP_TYPE,message:Jd.ILLEGAL_GROUP_TYPE});if(!Gc({type:o})&&!Jc(r)&&Gc({groupID:r}))return O_({code:zd.ILLEGAL_GROUP_ID,message:Jd.ILLEGAL_GROUP_ID});if(wc(o)&&!gc(e.memberList)&&e.memberList.length>0&&(Qi.warn(\"\".concat(n,\" 创建 AVChatRoom 时不能添加群成员，自动忽略该字段\")),e.memberList=void 0),bc(o)||gc(e.joinOption)||(Qi.warn(\"\".concat(n,\" 创建 Work/Meeting/AVChatRoom/Community 群时不能设置字段 joinOption，自动忽略该字段\")),e.joinOption=void 0),Gc({type:o})&&!Jc(r)&&!Gc({groupID:r}))return O_({code:zd.ILLEGAL_GROUP_ID,message:Jd.ILLEGAL_GROUP_ID});var a=new dp(Qp);Qi.log(\"\".concat(n,\" options:\"),e);var s=[];return this.request({protocolName:ed,requestData:Cn({},e,{ownerID:this.getMyUserID(),webPushFlag:1})}).then((function(o){var r=o.data,i=r.groupID,c=r.overLimitUserIDList,u=void 0===c?[]:c;if(s=u,a.setNetworkType(t.getNetworkType()).setMessage(\"groupType:\".concat(e.type,\" groupID:\").concat(i,\" overLimitUserIDList=\").concat(u)).end(),Qi.log(\"\".concat(n,\" ok groupID:\").concat(i,\" overLimitUserIDList:\"),u),e.type===Yn.GRP_AVCHATROOM)return t.getGroupProfile({groupID:i});Jc(e.memberList)||Jc(u)||(e.memberList=e.memberList.filter((function(e){return-1===u.indexOf(e.userID)}))),t.updateGroupMap([Cn({},e,{groupID:i})]);var l=t.getModule(ol),d=l.createCustomMessage({to:i,conversationType:Yn.CONV_GROUP,payload:{data:\"group_create\",extension:\"\".concat(t.getMyUserID(),\"创建群组\")}});return l.sendMessageInstance(d),t.emitGroupListUpdate(),t.getGroupProfile({groupID:i})})).then((function(e){var t=e.data.group,n=t.selfInfo,o=n.nameCard,r=n.joinTime;return t.updateSelfInfo({nameCard:o,joinTime:r,messageRemindType:Yn.MSG_REMIND_ACPT_AND_NOTE,role:Yn.GRP_MBR_ROLE_OWNER}),y_({group:t,overLimitUserIDList:s})})).catch((function(o){return a.setMessage(\"groupType:\".concat(e.type)),t.probeNetwork().then((function(e){var t=Pn(e,2),n=t[0],r=t[1];a.setError(o,n,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),o),O_(o)}))}},{key:\"dismissGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".dismissGroup\");if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===Yn.GRP_WORK)return O_(new A_({code:zd.CANNOT_DISMISS_WORK,message:Jd.CANNOT_DISMISS_WORK}));var o=new dp(sg);return o.setMessage(\"groupID:\".concat(e)),Qi.log(\"\".concat(n,\" groupID:\").concat(e)),this.request({protocolName:td,requestData:{groupID:e}}).then((function(){return o.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t._AVChatRoomHandler.reset(e),y_({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"updateGroupProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".updateGroupProfile\");!this.hasLocalGroup(e.groupID)||bc(this.getLocalGroupProfile(e.groupID).type)||gc(e.joinOption)||(Qi.warn(\"\".concat(n,\" Work/Meeting/AVChatRoom/Community 群不能设置字段 joinOption，自动忽略该字段\")),e.joinOption=void 0),gc(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers=\"On\":e.muteAllMembers=\"Off\");var o=new dp(ig);return o.setMessage(JSON.stringify(e)),Qi.log(\"\".concat(n,\" groupID:\").concat(e.groupID)),this.request({protocolName:nd,requestData:e}).then((function(){(o.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),t.hasLocalGroup(e.groupID))&&(t.groupMap.get(e.groupID).updateGroup(e),t._setStorageGroupList());return y_({group:t.groupMap.get(e.groupID)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.log(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"joinGroup\",value:function(e){var t=this,n=e.groupID,o=e.type,r=\"\".concat(this._className,\".joinGroup\");if(o===Yn.GRP_WORK){var a=new A_({code:zd.CANNOT_JOIN_WORK,message:Jd.CANNOT_JOIN_WORK});return O_(a)}if(this.deleteUnjoinedAVChatRoom(n),this.hasLocalGroup(n)){if(!this.isLoggedIn())return k_({status:Yn.JOIN_STATUS_ALREADY_IN_GROUP});var s=new dp(Zp);return this.getGroupProfile({groupID:n}).then((function(){return s.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" joinedStatus:\").concat(Yn.JOIN_STATUS_ALREADY_IN_GROUP)).end(),k_({status:Yn.JOIN_STATUS_ALREADY_IN_GROUP})})).catch((function(o){return s.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" unjoined\")).end(),Qi.warn(\"\".concat(r,\" \").concat(n,\" was unjoined, now join!\")),t.groupMap.delete(n),t.applyJoinGroup(e)}))}return Qi.log(\"\".concat(r,\" groupID:\").concat(n)),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}},{key:\"applyJoinGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".applyJoinGroup\"),o=e.groupID,r=new dp(Zp),a=Cn({},e),s=this.canIUse(ti.AVCHATROOM_HISTORY_MSG);return s&&(a.historyMessageFlag=1),this.request({protocolName:od,requestData:a}).then((function(e){var a=e.data,i=a.joinedStatus,c=a.longPollingKey,u=a.avChatRoomFlag,l=a.avChatRoomKey,d=a.messageList,p=\"groupID:\".concat(o,\" joinedStatus:\").concat(i,\" longPollingKey:\").concat(c)+\" avChatRoomFlag:\".concat(u,\" canGetAVChatRoomHistoryMessage:\").concat(s);switch(r.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(p)).end(),Qi.log(\"\".concat(n,\" ok. \").concat(p)),i){case ac:return y_({status:ac});case rc:return t.getGroupProfile({groupID:o}).then((function(e){var n,r=e.data.group,a={status:rc,group:r};return 1===u?(t.getModule(ul).setCompleted(\"\".concat(Yn.CONV_GROUP).concat(o)),t._groupAttributesHandler.initGroupAttributesCache({groupID:o,avChatRoomKey:l}),(n=gc(c)?t._AVChatRoomHandler.handleJoinResult({group:r}):t._AVChatRoomHandler.startRunLoop({longPollingKey:c,group:r})).then((function(){t._onAVChatRoomHistoryMessage(d)})),n):(t.emitGroupListUpdate(!0,!1),y_(a))}));default:var g=new A_({code:zd.JOIN_GROUP_FAIL,message:Jd.JOIN_GROUP_FAIL});return Qi.error(\"\".concat(n,\" error:\"),g),O_(g)}})).catch((function(o){return r.setMessage(\"groupID:\".concat(e.groupID)),t.probeNetwork().then((function(e){var t=Pn(e,2),n=t[0],a=t[1];r.setError(o,n,a).end()})),Qi.error(\"\".concat(n,\" error:\"),o),O_(o)}))}},{key:\"quitGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".quitGroup\");Qi.log(\"\".concat(n,\" groupID:\").concat(e));var o=this.checkJoinedAVChatRoomByID(e);if(!o&&!this.hasLocalGroup(e)){var r=new A_({code:zd.MEMBER_NOT_IN_GROUP,message:Jd.MEMBER_NOT_IN_GROUP});return O_(r)}if(o&&!this.isLoggedIn())return Qi.log(\"\".concat(n,\" anonymously ok. groupID:\").concat(e)),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),k_({groupID:e});var a=new dp(eg);return a.setMessage(\"groupID:\".concat(e)),this.request({protocolName:ad,requestData:{groupID:e}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),o&&t._AVChatRoomHandler.reset(e),t.deleteLocalGroupAndConversation(e),y_({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"searchGroupByID\",value:function(e){var t=this,n=\"\".concat(this._className,\".searchGroupByID\"),o={groupIDList:[e]},r=new dp(tg);return r.setMessage(\"groupID:\".concat(e)),Qi.log(\"\".concat(n,\" groupID:\").concat(e)),this.request({protocolName:sd,requestData:o}).then((function(e){var o=e.data.groupProfile;if(0!==o[0].errorCode)throw new A_({code:o[0].errorCode,message:o[0].errorInfo});return r.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),y_({group:new tm(o[0])})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"changeGroupOwner\",value:function(e){var t=this,n=\"\".concat(this._className,\".changeGroupOwner\");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===Yn.GRP_AVCHATROOM)return O_(new A_({code:zd.CANNOT_CHANGE_OWNER_IN_AVCHATROOM,message:Jd.CANNOT_CHANGE_OWNER_IN_AVCHATROOM}));if(e.newOwnerID===this.getMyUserID())return O_(new A_({code:zd.CANNOT_CHANGE_OWNER_TO_SELF,message:Jd.CANNOT_CHANGE_OWNER_TO_SELF}));var o=new dp(ng);return o.setMessage(\"groupID:\".concat(e.groupID,\" newOwnerID:\").concat(e.newOwnerID)),Qi.log(\"\".concat(n,\" groupID:\").concat(e.groupID)),this.request({protocolName:id,requestData:e}).then((function(){o.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\"));var r=e.groupID,a=e.newOwnerID;t.groupMap.get(r).ownerID=a;var s=t.getModule(cl).getLocalGroupMemberList(r);if(s instanceof Map){var i=s.get(t.getMyUserID());gc(i)||(i.updateRole(\"Member\"),t.groupMap.get(r).selfInfo.role=\"Member\");var c=s.get(a);gc(c)||c.updateRole(\"Owner\")}return t.emitGroupListUpdate(!0,!1),y_({group:t.groupMap.get(r)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"handleGroupApplication\",value:function(e){var t=this,n=\"\".concat(this._className,\".handleGroupApplication\"),o=e.message.payload,r=o.groupProfile.groupID,a=o.authentication,s=o.messageKey,i=o.operatorID,c=new dp(og);return c.setMessage(\"groupID:\".concat(r)),Qi.log(\"\".concat(n,\" groupID:\").concat(r)),this.request({protocolName:cd,requestData:Cn({},e,{applicant:i,groupID:r,authentication:a,messageKey:s})}).then((function(){return c.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),t._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),y_({group:t.getLocalGroupProfile(r)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error\"),e),O_(e)}))}},{key:\"handleGroupInvitation\",value:function(e){var t=this,n=\"\".concat(this._className,\".handleGroupInvitation\"),o=e.message.payload,r=o.groupProfile.groupID,a=o.authentication,s=o.messageKey,i=o.operatorID,c=e.handleAction,u=new dp(rg);return u.setMessage(\"groupID:\".concat(r,\" inviter:\").concat(i,\" handleAction:\").concat(c)),Qi.log(\"\".concat(n,\" groupID:\").concat(r,\" inviter:\").concat(i,\" handleAction:\").concat(c)),this.request({protocolName:ud,requestData:Cn({},e,{inviter:i,groupID:r,authentication:a,messageKey:s})}).then((function(){return u.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),t._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),y_({group:t.getLocalGroupProfile(r)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error\"),e),O_(e)}))}},{key:\"getGroupOnlineMemberCount\",value:function(e){return this._AVChatRoomHandler?this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this._AVChatRoomHandler.getGroupOnlineMemberCount(e):k_({memberCount:0}):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"hasLocalGroup\",value:function(e){return this.groupMap.has(e)}},{key:\"deleteLocalGroupAndConversation\",value:function(e){this._deleteLocalGroup(e),this.getModule(ul).deleteLocalConversation(\"GROUP\".concat(e)),this.emitGroupListUpdate(!0,!1)}},{key:\"_deleteLocalGroup\",value:function(e){this.groupMap.delete(e),this.getModule(cl).deleteGroupMemberList(e),this._setStorageGroupList()}},{key:\"sendMessage\",value:function(e,t){var n=this.createGroupMessagePack(e,t);return this.request(n)}},{key:\"createGroupMessagePack\",value:function(e,t){var n=null;t&&t.offlinePushInfo&&(n=t.offlinePushInfo);var o=\"\";uc(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var r=[];if(dc(t)&&dc(t.messageControlInfo)){var a=t.messageControlInfo,s=a.excludedFromUnreadCount,i=a.excludedFromLastMessage;!0===s&&r.push(\"NoUnread\"),!0===i&&r.push(\"NoLastMsg\")}var c=e.getGroupAtInfoList();return{protocolName:wl,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),groupID:e.to,msgBody:e.getElements(),cloudCustomData:o,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==Yn.MSG_TEXT||Jc(c)?void 0:c,onlineOnlyFlag:this.isOnlineMessage(e,t)?1:0,clientTime:e.clientTime,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||\"\",desc:n.description||\"\",ext:n.extension||\"\",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||\"\"}}:void 0,messageControlInfo:r,needReadReceipt:!0!==e.needReadReceipt||this.isMessageFromOrToAVChatroom(e.to)?0:1}}}},{key:\"revokeMessage\",value:function(e){return this.request({protocolName:ld,requestData:{groupID:e.to,msgSeqList:[{msgSeq:e.sequence}]}})}},{key:\"deleteMessage\",value:function(e){var t=e.to,n=e.keyList;return Qi.log(\"\".concat(this._className,\".deleteMessage groupID:\").concat(t,\" count:\").concat(n.length)),this.request({protocolName:Ed,requestData:{groupID:t,deleter:this.getMyUserID(),keyList:n}})}},{key:\"getRoamingMessage\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRoamingMessage\"),o=new dp(Rp),r=0;return this._computeLastSequence(e).then((function(o){return r=o,Qi.log(\"\".concat(n,\" groupID:\").concat(e.groupID,\" lastSequence:\").concat(r)),t.request({protocolName:gd,requestData:{groupID:e.groupID,count:21,sequence:r}})})).then((function(a){var s=a.data,i=s.messageList,c=s.complete;gc(i)?Qi.log(\"\".concat(n,\" ok. complete:\").concat(c,\" but messageList is undefined!\")):Qi.log(\"\".concat(n,\" ok. complete:\").concat(c,\" count:\").concat(i.length)),o.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e.groupID,\" lastSequence:\").concat(r,\" complete:\").concat(c,\" count:\").concat(i?i.length:\"undefined\")).end();var u=\"GROUP\".concat(e.groupID),l=t.getModule(ul);if(2===c||Jc(i))return l.setCompleted(u),[];var d=l.storeRoamingMessage(i,u);return l.updateIsRead(u),l.patchConversationLastMessage(u),d})).catch((function(a){return t.probeNetwork().then((function(t){var n=Pn(t,2),s=n[0],i=n[1];o.setError(a,s,i).setMessage(\"groupID:\".concat(e.groupID,\" lastSequence:\").concat(r)).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),a),O_(a)}))}},{key:\"_getGroupIDOfMessage\",value:function(e){return e.conversationID.replace(Yn.CONV_GROUP,\"\")}},{key:\"getReadReceiptList\",value:function(e){var t=this,n=\"\".concat(this._className,\".getReadReceiptList\"),o=this._getGroupIDOfMessage(e[0]),r=this.getMyUserID(),a=e.filter((function(e){return e.from===r&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));if(Qi.log(\"\".concat(n,\" groupID:\").concat(o,\" sequenceList:\").concat(JSON.stringify(a))),0===a.length)return k_({messageList:e});var s=new dp(Lp);return s.setMessage(\"groupID:\".concat(o)),this.request({protocolName:hd,requestData:{groupID:o,sequenceList:a}}).then((function(t){s.end(),Qi.log(\"\".concat(n,\" ok\"));var o=t.data.readReceiptList;return pc(o)&&o.forEach((function(t){e.forEach((function(e){0===t.code&&t.sequence===e.sequence&&(e.readReceiptInfo.readCount=t.readCount,e.readReceiptInfo.unreadCount=t.unreadCount)}))})),y_({messageList:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"sendReadReceipt\",value:function(e){var t=this,n=this._getGroupIDOfMessage(e[0]),o=new dp(wp);o.setMessage(\"groupID:\".concat(n));var r=this.getMyUserID(),a=e.filter((function(e){return e.from!==r&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));if(0===a.length)return O_({code:zd.READ_RECEIPT_SEQUENCE_LIST_EMPTY,message:Jd.READ_RECEIPT_SEQUENCE_LIST_EMPTY});var s=\"\".concat(this._className,\".sendReadReceipt\");return Qi.log(\"\".concat(s,\". sequenceList:\").concat(JSON.stringify(a))),this.request({protocolName:fd,requestData:{groupID:n,sequenceList:a}}).then((function(e){return o.end(),Qi.log(\"\".concat(s,\" ok\")),y_()})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.warn(\"\".concat(s,\" failed. error:\"),e),O_(e)}))}},{key:\"getReadReceiptDetail\",value:function(e){var t=this,n=e.message,o=e.filter,r=e.cursor,a=e.count,s=this._getGroupIDOfMessage(n),i=n.ID,c=n.sequence,u=\"\".concat(this._className,\".getReadReceiptDetail\"),l=this._receiptDetailCompleteMap.get(i)||!1,d=0!==o&&1!==o?0:o,p=uc(r)?r:\"\",g=!cc(a)||a<=0||a>=100?100:a,h=\"groupID:\".concat(s,\" sequence:\").concat(c,\" cursor:\").concat(p,\" filter:\").concat(d,\" completeFlag:\").concat(l);Qi.log(\"\".concat(u,\" \").concat(h));var f={cursor:\"\",isCompleted:!1,messageID:i,unreadUserIDList:[],readUserIDList:[]};if(!0===l)return f.isCompleted=!0,k_(f);var _=new dp(bp);return _.setMessage(h),this.request({protocolName:_d,requestData:{groupID:s,sequence:c,flag:d,cursor:p,count:g}}).then((function(e){_.end();var n=e.data,o=n.cursor,r=n.isCompleted,a=n.unreadUserIDList,s=n.readUserIDList;return f.cursor=o,1===r&&(f.isCompleted=!0,t._receiptDetailCompleteMap.set(i,!0)),0===d?f.readUserIDList=s.map((function(e){return e.userID})):1===d&&(f.unreadUserIDList=a.map((function(e){return e.userID}))),Qi.log(\"\".concat(u,\" ok\")),y_(f)})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];_.setError(e,o,r).end()})),Qi.warn(\"\".concat(u,\" failed. error:\"),e),O_(e)}))}},{key:\"setMessageRead\",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageSeq,r=\"\".concat(this._className,\".setMessageRead\");Qi.log(\"\".concat(r,\" conversationID:\").concat(n,\" lastMessageSeq:\").concat(o)),cc(o)||Qi.warn(\"\".concat(r,\" 请勿修改 Conversation.lastMessage.lastSequence，否则可能会导致已读上报结果不准确\"));var a=new dp(Fp);return a.setMessage(\"\".concat(n,\"-\").concat(o)),this.request({protocolName:dd,requestData:{groupID:n.replace(Yn.CONV_GROUP,\"\"),messageReadSeq:o}}).then((function(){a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(r,\" ok.\"));var e=t.getModule(ul);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:o}),e.updateUnreadCount(n),y_()})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.log(\"\".concat(r,\" failed. error:\"),e),O_(e)}))}},{key:\"_computeLastSequence\",value:function(e){return e.sequence>0?Promise.resolve(e.sequence):this.getGroupLastSequence(e.groupID)}},{key:\"getGroupLastSequence\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupLastSequence\"),o=new dp(dg),r=0,a=\"\";if(this.hasLocalGroup(e)){var s=this.getLocalGroupProfile(e),i=s.lastMessage;if(i.lastSequence>0&&!1===i.onlineOnlyFlag)return r=i.lastSequence,a=\"got lastSequence:\".concat(r,\" from local group profile[lastMessage.lastSequence]. groupID:\").concat(e),Qi.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r);if(s.nextMessageSeq>1)return r=s.nextMessageSeq-1,a=\"got lastSequence:\".concat(r,\" from local group profile[nextMessageSeq]. groupID:\").concat(e),Qi.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r)}var c=\"GROUP\".concat(e),u=this.getModule(ul).getLocalConversation(c);if(u&&u.lastMessage.lastSequence&&!1===u.lastMessage.onlineOnlyFlag)return r=u.lastMessage.lastSequence,a=\"got lastSequence:\".concat(r,\" from local conversation profile[lastMessage.lastSequence]. groupID:\").concat(e),Qi.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r);var l={groupIDList:[e],responseFilter:{groupBaseInfoFilter:[\"NextMsgSeq\"]}};return this.getGroupProfileAdvance(l).then((function(s){var i=s.data.successGroupList;return Jc(i)?Qi.log(\"\".concat(n,\" successGroupList is empty. groupID:\").concat(e)):(r=i[0].nextMessageSeq-1,a=\"got lastSequence:\".concat(r,\" from getGroupProfileAdvance. groupID:\").concat(e),Qi.log(\"\".concat(n,\" \").concat(a))),o.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(a)).end(),r})).catch((function(r){return t.probeNetwork().then((function(t){var n=Pn(t,2),a=n[0],s=n[1];o.setError(r,a,s).setMessage(\"get lastSequence failed from getGroupProfileAdvance. groupID:\".concat(e)).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),r),O_(r)}))}},{key:\"isMessageFromOrToAVChatroom\",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:\"hasJoinedAVChatRoom\",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.hasJoinedAVChatRoom():0}},{key:\"getJoinedAVChatRoom\",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.getJoinedAVChatRoom():[]}},{key:\"isOnlineMessage\",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:\"_canIUseOnlineOnlyFlag\",value:function(e){var t=this.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==Yn.CONV_GROUP}},{key:\"_onAVChatRoomHistoryMessage\",value:function(e){if(!Jc(e)){Qi.log(\"\".concat(this._className,\"._onAVChatRoomHistoryMessage count:\").concat(e.length));var t=[];e.forEach((function(e){t.push(Cn({},e,{isHistoryMessage:1}))})),this.onAVChatRoomMessage(t)}}},{key:\"onAVChatRoomMessage\",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onMessage(e)}},{key:\"getGroupSimplifiedInfo\",value:function(e){var t=this,n=new dp(hg),o={groupIDList:[e],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\"]}};return this.getGroupProfileAdvance(o).then((function(o){var r=o.data.successGroupList;return n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e,\" type:\").concat(r[0].type)).end(),r[0]})).catch((function(o){t.probeNetwork().then((function(t){var r=Pn(t,2),a=r[0],s=r[1];n.setError(o,a,s).setMessage(\"groupID:\".concat(e)).end()}))}))}},{key:\"setUnjoinedAVChatRoom\",value:function(e){this._unjoinedAVChatRoomList.set(e,1)}},{key:\"deleteUnjoinedAVChatRoom\",value:function(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}},{key:\"isUnjoinedAVChatRoom\",value:function(e){return this._unjoinedAVChatRoomList.has(e)}},{key:\"onGroupAttributesUpdated\",value:function(e){this._groupAttributesHandler&&this._groupAttributesHandler.onGroupAttributesUpdated(e)}},{key:\"updateLocalMainSequenceOnReconnected\",value:function(){this._groupAttributesHandler&&this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}},{key:\"initGroupAttributes\",value:function(e){return this._groupAttributesHandler.initGroupAttributes(e)}},{key:\"setGroupAttributes\",value:function(e){return this._groupAttributesHandler.setGroupAttributes(e)}},{key:\"deleteGroupAttributes\",value:function(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}},{key:\"getGroupAttributes\",value:function(e){return this._groupAttributesHandler.getGroupAttributes(e)}},{key:\"reset\",value:function(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._receiptDetailCompleteMap.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._AVChatRoomHandler&&this._AVChatRoomHandler.reset()}}]),n}(Al),Im=function(){function e(t){yn(this,e),this.userID=\"\",this.avatar=\"\",this.nick=\"\",this.role=\"\",this.joinTime=\"\",this.lastSendMsgTime=\"\",this.nameCard=\"\",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return En(e,[{key:\"_initMember\",value:function(e){this.updateMember(e)}},{key:\"updateMember\",value:function(e){var t=[null,void 0,\"\",0,NaN];e.memberCustomField&&Lc(this.memberCustomField,e.memberCustomField),Ic(this,e,[\"memberCustomField\"],t)}},{key:\"updateRole\",value:function(e){[\"Owner\",\"Admin\",\"Member\"].indexOf(e)<0||(this.role=e)}},{key:\"updateMuteUntil\",value:function(e){gc(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:\"updateNameCard\",value:function(e){gc(e)||(this.nameCard=e)}},{key:\"updateMemberCustomField\",value:function(e){e&&Lc(this.memberCustomField,e)}}]),e}(),Em=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"GroupMemberModule\",o.groupMemberListMap=new Map,o.getInnerEmitterInstance().on(B_,o._onProfileUpdated,bn(o)),o}return En(n,[{key:\"_onProfileUpdated\",value:function(e){for(var t=this,n=e.data,o=function(e){var o=n[e];t.groupMemberListMap.forEach((function(e){e.has(o.userID)&&e.get(o.userID).updateMember({nick:o.nick,avatar:o.avatar})}))},r=0;r<n.length;r++)o(r)}},{key:\"deleteGroupMemberList\",value:function(e){this.groupMemberListMap.delete(e)}},{key:\"getGroupMemberList\",value:function(e){var t=this,n=e.groupID,o=e.offset,r=void 0===o?0:o,a=e.count,s=void 0===a?15:a,i=\"\".concat(this._className,\".getGroupMemberList\"),c=new dp(yg);Qi.log(\"\".concat(i,\" groupID:\").concat(n,\" offset:\").concat(r,\" count:\").concat(s));var u=0,l={groupID:n,limit:s>100?100:s};Gc({groupID:n})?l.next=\"\".concat(r):(l.offset=r,u=r+1);var d=[];return this.request({protocolName:Nd,requestData:l}).then((function(e){var o=e.data,r=o.members,a=o.memberNum,s=o.next,i=void 0===s?void 0:s;if(gc(i)||(u=Jc(i)?0:i),!pc(r)||0===r.length)return u=0,Promise.resolve([]);var c=t.getModule(sl);return c.hasLocalGroup(n)&&(c.getLocalGroupProfile(n).memberNum=a),d=t._updateLocalGroupMemberMap(n,r),t.getModule(rl).getUserProfile({userIDList:r.map((function(e){return e.userID})),tagList:[ec.NICK,ec.AVATAR]})})).then((function(e){var o=e.data;if(!pc(o)||0===o.length)return k_({memberList:[],offset:u});var r=o.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));return t._updateLocalGroupMemberMap(n,r),c.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" offset:\").concat(u,\" count:\").concat(s)).end(),Qi.log(\"\".concat(i,\" ok.\")),y_({memberList:d,offset:u})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Qi.error(\"\".concat(i,\" failed. error:\"),e),O_(e)}))}},{key:\"getGroupMemberProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupMemberProfile\"),o=new dp(Ig);o.setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)),Qi.log(\"\".concat(n,\" groupID:\").concat(e.groupID,\" userIDList:\").concat(e.userIDList.join(\",\"))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var r=e.groupID,a=e.userIDList;return this._getGroupMemberProfileAdvance(Cn({},e,{userIDList:a})).then((function(e){var n=e.data.members;return pc(n)&&0!==n.length?(t._updateLocalGroupMemberMap(r,n),t.getModule(rl).getUserProfile({userIDList:n.map((function(e){return e.userID})),tagList:[ec.NICK,ec.AVATAR]})):k_([])})).then((function(e){var n=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));t._updateLocalGroupMemberMap(r,n);var s=a.filter((function(e){return t.hasLocalGroupMember(r,e)})).map((function(e){return t.getLocalGroupMemberInfo(r,e)}));return o.setNetworkType(t.getNetworkType()).end(),y_({memberList:s})}))}},{key:\"addGroupMember\",value:function(e){var t=this,n=\"\".concat(this._className,\".addGroupMember\"),o=e.groupID,r=this.getModule(sl).getLocalGroupProfile(o),a=r.type,s=new dp(Eg);if(s.setMessage(\"groupID:\".concat(o,\" groupType:\").concat(a)),wc(a)){var i=new A_({code:zd.CANNOT_ADD_MEMBER_IN_AVCHATROOM,message:Jd.CANNOT_ADD_MEMBER_IN_AVCHATROOM});return s.setCode(zd.CANNOT_ADD_MEMBER_IN_AVCHATROOM).setError(Jd.CANNOT_ADD_MEMBER_IN_AVCHATROOM).setNetworkType(this.getNetworkType()).end(),O_(i)}return e.userIDList=e.userIDList.map((function(e){return{userID:e}})),Qi.log(\"\".concat(n,\" groupID:\").concat(o)),this.request({protocolName:Od,requestData:e}).then((function(o){var a=o.data.members;Qi.log(\"\".concat(n,\" ok\"));var i=a.filter((function(e){return 1===e.result})).map((function(e){return e.userID})),c=a.filter((function(e){return 0===e.result})).map((function(e){return e.userID})),u=a.filter((function(e){return 2===e.result})).map((function(e){return e.userID})),l=a.filter((function(e){return 4===e.result})).map((function(e){return e.userID})),d=\"groupID:\".concat(e.groupID,\", \")+\"successUserIDList:\".concat(i,\", \")+\"failureUserIDList:\".concat(c,\", \")+\"existedUserIDList:\".concat(u,\", \")+\"overLimitUserIDList:\".concat(l);return s.setNetworkType(t.getNetworkType()).setMoreMessage(d).end(),0===i.length?y_({successUserIDList:i,failureUserIDList:c,existedUserIDList:u,overLimitUserIDList:l}):(r.memberCount+=i.length,t._updateConversationGroupProfile(r),y_({successUserIDList:i,failureUserIDList:c,existedUserIDList:u,overLimitUserIDList:l,group:r}))})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"deleteGroupMember\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteGroupMember\"),o=e.groupID,r=e.userIDList,a=new dp(Tg),s=\"groupID:\".concat(o,\" \").concat(r.length>5?\"userIDList.length:\".concat(r.length):\"userIDList:\".concat(r));a.setMessage(s),Qi.log(\"\".concat(n,\" groupID:\").concat(o,\" userIDList:\"),r);var i=this.getModule(sl).getLocalGroupProfile(o);return wc(i.type)?O_(new A_({code:zd.CANNOT_KICK_MEMBER_IN_AVCHATROOM,message:Jd.CANNOT_KICK_MEMBER_IN_AVCHATROOM})):this.request({protocolName:Rd,requestData:e}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),i.memberCount-=1,t._updateConversationGroupProfile(i),t.deleteLocalGroupMembers(o,r),y_({group:i,userIDList:r})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"_updateConversationGroupProfile\",value:function(e){this.getModule(ul).updateConversationGroupProfile([e])}},{key:\"setGroupMemberMuteTime\",value:function(e){var t=this,n=e.groupID,o=e.userID,r=e.muteTime,a=\"\".concat(this._className,\".setGroupMemberMuteTime\");if(o===this.getMyUserID())return O_(new A_({code:zd.CANNOT_MUTE_SELF,message:Jd.CANNOT_MUTE_SELF}));Qi.log(\"\".concat(a,\" groupID:\").concat(n,\" userID:\").concat(o));var s=new dp(Sg);return s.setMessage(\"groupID:\".concat(n,\" userID:\").concat(o,\" muteTime:\").concat(r)),this.modifyGroupMemberInfo({groupID:n,userID:o,muteTime:r}).then((function(e){s.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(a,\" ok\"));var o=t.getModule(sl);return y_({group:o.getLocalGroupProfile(n),member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Qi.error(\"\".concat(a,\" failed. error:\"),e),O_(e)}))}},{key:\"setGroupMemberRole\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberRole\"),o=e.groupID,r=e.userID,a=e.role,s=this.getModule(sl).getLocalGroupProfile(o);if(s.selfInfo.role!==Yn.GRP_MBR_ROLE_OWNER)return O_({code:zd.NOT_OWNER,message:Jd.NOT_OWNER});if([Yn.GRP_WORK,Yn.GRP_AVCHATROOM].includes(s.type))return O_({code:zd.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM,message:Jd.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM});var i=[Yn.GRP_MBR_ROLE_ADMIN,Yn.GRP_MBR_ROLE_MEMBER];if(Gc({groupID:o})&&i.push(Yn.GRP_MBR_ROLE_CUSTOM),i.indexOf(a)<0)return O_({code:zd.INVALID_MEMBER_ROLE,message:Jd.INVALID_MEMBER_ROLE});if(r===this.getMyUserID())return O_({code:zd.CANNOT_SET_SELF_MEMBER_ROLE,message:Jd.CANNOT_SET_SELF_MEMBER_ROLE});var c=new dp(Ag);return c.setMessage(\"groupID:\".concat(o,\" userID:\").concat(r,\" role:\").concat(a)),Qi.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(r)),this.modifyGroupMemberInfo({groupID:o,userID:r,role:a}).then((function(e){return c.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\")),y_({group:s,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"setGroupMemberNameCard\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberNameCard\"),o=e.groupID,r=e.userID,a=void 0===r?this.getMyUserID():r,s=e.nameCard;Qi.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(a));var i=new dp(Cg);return i.setMessage(\"groupID:\".concat(o,\" userID:\").concat(a,\" nameCard:\").concat(s)),this.modifyGroupMemberInfo({groupID:o,userID:a,nameCard:s}).then((function(e){Qi.log(\"\".concat(n,\" ok\")),i.setNetworkType(t.getNetworkType()).end();var r=t.getModule(sl).getLocalGroupProfile(o);return a===t.getMyUserID()&&r&&r.setSelfNameCard(s),y_({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"setGroupMemberCustomField\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberCustomField\"),o=e.groupID,r=e.userID,a=void 0===r?this.getMyUserID():r,s=e.memberCustomField;Qi.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(a));var i=new dp(Dg);return i.setMessage(\"groupID:\".concat(o,\" userID:\").concat(a,\" memberCustomField:\").concat(JSON.stringify(s))),this.modifyGroupMemberInfo({groupID:o,userID:a,memberCustomField:s}).then((function(e){i.setNetworkType(t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" ok\"));var r=t.getModule(sl).getLocalGroupProfile(o);return y_({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"modifyGroupMemberInfo\",value:function(e){var t=this,n=e.groupID,o=e.userID;return this.request({protocolName:Ld,requestData:e}).then((function(){if(t.hasLocalGroupMember(n,o)){var r=t.getLocalGroupMemberInfo(n,o);return gc(e.muteTime)||r.updateMuteUntil(e.muteTime),gc(e.role)||r.updateRole(e.role),gc(e.nameCard)||r.updateNameCard(e.nameCard),gc(e.memberCustomField)||r.updateMemberCustomField(e.memberCustomField),r}return t.getGroupMemberProfile({groupID:n,userIDList:[o]}).then((function(e){return Pn(e.data.memberList,1)[0]}))}))}},{key:\"_getGroupMemberProfileAdvance\",value:function(e){return this.request({protocolName:kd,requestData:Cn({},e,{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:[\"Role\",\"JoinTime\",\"NameCard\",\"ShutUpUntil\"]})})}},{key:\"_updateLocalGroupMemberMap\",value:function(e,t){var n=this;return pc(t)&&0!==t.length?t.map((function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new Im(t)),n.getLocalGroupMemberInfo(e,t.userID)})):[]}},{key:\"deleteLocalGroupMembers\",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach((function(e){n.delete(e)}))}},{key:\"getLocalGroupMemberInfo\",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:\"setLocalGroupMember\",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var n=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,n)}}},{key:\"getLocalGroupMemberList\",value:function(e){return this.groupMemberListMap.get(e)}},{key:\"hasLocalGroupMember\",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:\"hasLocalGroupMemberMap\",value:function(e){return this.groupMemberListMap.has(e)}},{key:\"reset\",value:function(){this.groupMemberListMap.clear()}}]),n}(Al),Tm=function(){function e(t){yn(this,e),this._userModule=t,this._className=\"ProfileHandler\",this.TAG=\"profile\",this.accountProfileMap=new Map,this.expirationTime=864e5}return En(e,[{key:\"setExpirationTime\",value:function(e){this.expirationTime=e}},{key:\"getUserProfile\",value:function(e){var t=this,n=e.userIDList;e.fromAccount=this._userModule.getMyAccount(),n.length>100&&(Qi.warn(\"\".concat(this._className,\".getUserProfile 获取用户资料人数不能超过100人\")),n.length=100);for(var o,r=[],a=[],s=0,i=n.length;s<i;s++)o=n[s],this._userModule.isMyFriend(o)&&this._containsAccount(o)?a.push(this._getProfileFromMap(o)):r.push(o);if(0===r.length)return k_(a);e.toAccount=r;var c=e.bFromGetMyProfile||!1,u=[];e.toAccount.forEach((function(e){u.push({toAccount:e,standardSequence:0,customSequence:0})})),e.userItem=u;var l=new dp(Lg);return l.setMessage(n.length>5?\"userIDList.length:\".concat(n.length):\"userIDList:\".concat(n)),this._userModule.request({protocolName:Gl,requestData:e}).then((function(e){l.setNetworkType(t._userModule.getNetworkType()).end(),Qi.info(\"\".concat(t._className,\".getUserProfile ok\"));var n=t._handleResponse(e).concat(a);return y_(c?n[0]:n)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),Qi.error(\"\".concat(t._className,\".getUserProfile failed. error:\"),e),O_(e)}))}},{key:\"getMyProfile\",value:function(){var e=this._userModule.getMyAccount();if(Qi.log(\"\".concat(this._className,\".getMyProfile myAccount:\").concat(e)),this._fillMap(),this._containsAccount(e)){var t=this._getProfileFromMap(e);return Qi.debug(\"\".concat(this._className,\".getMyProfile from cache, myProfile:\")+JSON.stringify(t)),k_(t)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}},{key:\"_handleResponse\",value:function(e){for(var t,n,o=yc.now(),r=e.data.userProfileItem,a=[],s=0,i=r.length;s<i;s++)\"@TLS#NOT_FOUND\"!==r[s].to&&\"\"!==r[s].to&&(t=r[s].to,n=this._updateMap(t,this._getLatestProfileFromResponse(t,r[s].profileItem)),a.push(n));return Qi.log(\"\".concat(this._className,\"._handleResponse cost \").concat(yc.now()-o,\" ms\")),a}},{key:\"_getLatestProfileFromResponse\",value:function(e,t){var n={};if(n.userID=e,n.profileCustomField=[],!Jc(t))for(var o=0,r=t.length;o<r;o++)if(t[o].tag.indexOf(\"Tag_Profile_Custom\")>-1)n.profileCustomField.push({key:t[o].tag,value:t[o].value});else switch(t[o].tag){case ec.NICK:n.nick=t[o].value;break;case ec.GENDER:n.gender=t[o].value;break;case ec.BIRTHDAY:n.birthday=t[o].value;break;case ec.LOCATION:n.location=t[o].value;break;case ec.SELFSIGNATURE:n.selfSignature=t[o].value;break;case ec.ALLOWTYPE:n.allowType=t[o].value;break;case ec.LANGUAGE:n.language=t[o].value;break;case ec.AVATAR:n.avatar=t[o].value;break;case ec.MESSAGESETTINGS:n.messageSettings=t[o].value;break;case ec.ADMINFORBIDTYPE:n.adminForbidType=t[o].value;break;case ec.LEVEL:n.level=t[o].value;break;case ec.ROLE:n.role=t[o].value;break;default:Qi.warn(\"\".concat(this._className,\"._handleResponse unknown tag:\"),t[o].tag,t[o].value)}return n}},{key:\"updateMyProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".updateMyProfile\"),o=new dp(bg);o.setMessage(JSON.stringify(e));var r=(new X_).validate(e);if(!r.valid)return o.setCode(zd.UPDATE_PROFILE_INVALID_PARAM).setMoreMessage(\"\".concat(n,\" info:\").concat(r.tips)).setNetworkType(this._userModule.getNetworkType()).end(),Qi.error(\"\".concat(n,\" info:\").concat(r.tips,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile\")),O_({code:zd.UPDATE_PROFILE_INVALID_PARAM,message:Jd.UPDATE_PROFILE_INVALID_PARAM});var a=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(\"profileCustomField\"===s?e.profileCustomField.forEach((function(e){a.push({tag:e.key,value:e.value})})):a.push({tag:ec[s.toUpperCase()],value:e[s]}));return 0===a.length?(o.setCode(zd.UPDATE_PROFILE_NO_KEY).setMoreMessage(Jd.UPDATE_PROFILE_NO_KEY).setNetworkType(this._userModule.getNetworkType()).end(),Qi.error(\"\".concat(n,\" info:\").concat(Jd.UPDATE_PROFILE_NO_KEY,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile\")),O_({code:zd.UPDATE_PROFILE_NO_KEY,message:Jd.UPDATE_PROFILE_NO_KEY})):this._userModule.request({protocolName:Pl,requestData:{fromAccount:this._userModule.getMyAccount(),profileItem:a}}).then((function(r){o.setNetworkType(t._userModule.getNetworkType()).end(),Qi.info(\"\".concat(n,\" ok\"));var a=t._updateMap(t._userModule.getMyAccount(),e);return t._userModule.emitOuterEvent(Wn.PROFILE_UPDATED,[a]),k_(a)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))}},{key:\"onProfileModified\",value:function(e){var t=e.dataList;if(!Jc(t)){var n,o,r=t.length;Qi.debug(\"\".concat(this._className,\".onProfileModified count:\").concat(r,\" dataList:\"),e.dataList);for(var a=[],s=0;s<r;s++)n=t[s].userID,o=this._updateMap(n,this._getLatestProfileFromResponse(n,t[s].profileList)),a.push(o);a.length>0&&(this._userModule.emitInnerEvent(B_,a),this._userModule.emitOuterEvent(Wn.PROFILE_UPDATED,a))}}},{key:\"_fillMap\",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,o=e.length;n<o;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);Qi.log(\"\".concat(this._className,\"._fillMap from cache, map.size:\").concat(this.accountProfileMap.size))}}},{key:\"_updateMap\",value:function(e,t){var n,o=Date.now();return this._containsAccount(e)?(n=this._getProfileFromMap(e),t.profileCustomField&&Lc(n.profileCustomField,t.profileCustomField),Ic(n,t,[\"profileCustomField\"]),n.lastUpdatedTime=o):(n=new X_(t),(this._userModule.isMyFriend(e)||e===this._userModule.getMyAccount())&&(n.lastUpdatedTime=o,this.accountProfileMap.set(e,n))),this._flushMap(e===this._userModule.getMyAccount()),n}},{key:\"_flushMap\",value:function(e){var t=Un(this.accountProfileMap.values()),n=this._userModule.getStorageModule();Qi.debug(\"\".concat(this._className,\"._flushMap length:\").concat(t.length,\" flushAtOnce:\").concat(e)),n.setItem(this.TAG,t,e)}},{key:\"_containsAccount\",value:function(e){return this.accountProfileMap.has(e)}},{key:\"_getProfileFromMap\",value:function(e){return this.accountProfileMap.get(e)}},{key:\"_getCachedProfiles\",value:function(){var e=this._userModule.getStorageModule().getItem(this.TAG);return Jc(e)?[]:e}},{key:\"onConversationsProfileUpdated\",value:function(e){for(var t,n,o,r=[],a=0,s=e.length;a<s;a++)n=(t=e[a]).userID,this._userModule.isMyFriend(n)||(this._containsAccount(n)?(o=this._getProfileFromMap(n),Ic(o,t)>0&&r.push(n)):r.push(t.userID));0!==r.length&&(Qi.info(\"\".concat(this._className,\".onConversationsProfileUpdated toAccountList:\").concat(r)),this.getUserProfile({userIDList:r}))}},{key:\"getNickAndAvatarByUserID\",value:function(e){if(this._containsAccount(e)){var t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:\"\",avatar:\"\"}}},{key:\"reset\",value:function(){this._flushMap(!0),this.accountProfileMap.clear()}}]),e}(),Sm=function e(t){yn(this,e),Jc||(this.userID=t.userID||\"\",this.timeStamp=t.timeStamp||0)},Cm=function(){function e(t){yn(this,e),this._userModule=t,this._className=\"BlacklistHandler\",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}return En(e,[{key:\"getLocalBlacklist\",value:function(){return Un(this._blacklistMap.keys())}},{key:\"getBlacklist\",value:function(){var e=this,t=\"\".concat(this._className,\".getBlacklist\"),n={fromAccount:this._userModule.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},o=new dp(wg);return this._userModule.request({protocolName:Ul,requestData:n}).then((function(n){var r=n.data,a=r.blackListItem,s=r.currentSequence,i=Jc(a)?0:a.length;o.setNetworkType(e._userModule.getNetworkType()).setMessage(\"blackList count:\".concat(i)).end(),Qi.info(\"\".concat(t,\" ok\")),e.currentSequence=s,e._handleResponse(a,!0),e._userModule.emitOuterEvent(Wn.BLACKLIST_UPDATED,Un(e._blacklistMap.keys()))})).catch((function(n){return e._userModule.probeNetwork().then((function(e){var t=Pn(e,2),r=t[0],a=t[1];o.setError(n,r,a).end()})),Qi.error(\"\".concat(t,\" failed. error:\"),n),O_(n)}))}},{key:\"addBlacklist\",value:function(e){var t=this,n=\"\".concat(this._className,\".addBlacklist\"),o=new dp(Gg);if(!pc(e.userIDList))return o.setCode(zd.ADD_BLACKLIST_INVALID_PARAM).setMessage(Jd.ADD_BLACKLIST_INVALID_PARAM).setNetworkType(this._userModule.getNetworkType()).end(),Qi.error(\"\".concat(n,\" options.userIDList 必需是数组\")),O_({code:zd.ADD_BLACKLIST_INVALID_PARAM,message:Jd.ADD_BLACKLIST_INVALID_PARAM});var r=this._userModule.getMyAccount();return 1===e.userIDList.length&&e.userIDList[0]===r?(o.setCode(zd.CANNOT_ADD_SELF_TO_BLACKLIST).setMessage(Jd.CANNOT_ADD_SELF_TO_BLACKLIST).setNetworkType(this._userModule.getNetworkType()).end(),Qi.error(\"\".concat(n,\" 不能把自己拉黑\")),O_({code:zd.CANNOT_ADD_SELF_TO_BLACKLIST,message:Jd.CANNOT_ADD_SELF_TO_BLACKLIST})):(e.userIDList.includes(r)&&(e.userIDList=e.userIDList.filter((function(e){return e!==r})),Qi.warn(\"\".concat(n,\" 不能把自己拉黑，已过滤\"))),e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Fl,requestData:e}).then((function(r){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)).end(),Qi.info(\"\".concat(n,\" ok\")),t._handleResponse(r.resultItem,!0),y_(Un(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)})))}},{key:\"_handleResponse\",value:function(e,t){if(!Jc(e))for(var n,o,r,a=0,s=e.length;a<s;a++)o=e[a].to,r=e[a].resultCode,(gc(r)||0===r)&&(t?((n=this._blacklistMap.has(o)?this._blacklistMap.get(o):new Sm).userID=o,!Jc(e[a].addBlackTimeStamp)&&(n.timeStamp=e[a].addBlackTimeStamp),this._blacklistMap.set(o,n)):this._blacklistMap.has(o)&&(n=this._blacklistMap.get(o),this._blacklistMap.delete(o)));Qi.log(\"\".concat(this._className,\"._handleResponse total:\").concat(this._blacklistMap.size,\" bAdd:\").concat(t))}},{key:\"deleteBlacklist\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteBlacklist\"),o=new dp(Pg);return pc(e.userIDList)?(e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:ql,requestData:e}).then((function(r){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)).end(),Qi.info(\"\".concat(n,\" ok\")),t._handleResponse(r.data.resultItem,!1),y_(Un(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Qi.error(\"\".concat(n,\" failed. error:\"),e),O_(e)}))):(o.setCode(zd.DEL_BLACKLIST_INVALID_PARAM).setMessage(Jd.DEL_BLACKLIST_INVALID_PARAM).setNetworkType(this._userModule.getNetworkType()).end(),Qi.error(\"\".concat(n,\" options.userIDList 必需是数组\")),O_({code:zd.DEL_BLACKLIST_INVALID_PARAM,message:Jd.DEL_BLACKLIST_INVALID_PARAM}))}},{key:\"onAccountDeleted\",value:function(e){for(var t,n=[],o=0,r=e.length;o<r;o++)t=e[o],this._blacklistMap.has(t)&&(this._blacklistMap.delete(t),n.push(t));n.length>0&&(Qi.log(\"\".concat(this._className,\".onAccountDeleted count:\").concat(n.length,\" userIDList:\"),n),this._userModule.emitOuterEvent(Wn.BLACKLIST_UPDATED,Un(this._blacklistMap.keys())))}},{key:\"onAccountAdded\",value:function(e){for(var t,n=[],o=0,r=e.length;o<r;o++)t=e[o],this._blacklistMap.has(t)||(this._blacklistMap.set(t,new Sm({userID:t})),n.push(t));n.length>0&&(Qi.log(\"\".concat(this._className,\".onAccountAdded count:\").concat(n.length,\" userIDList:\"),n),this._userModule.emitOuterEvent(Wn.BLACKLIST_UPDATED,Un(this._blacklistMap.keys())))}},{key:\"reset\",value:function(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}]),e}(),Am=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"UserModule\",o._profileHandler=new Tm(bn(o)),o._blacklistHandler=new Cm(bn(o)),o.getInnerEmitterInstance().on(V_,o.onContextUpdated,bn(o)),o}return En(n,[{key:\"onContextUpdated\",value:function(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}},{key:\"onProfileModified\",value:function(e){this._profileHandler.onProfileModified(e)}},{key:\"onRelationChainModified\",value:function(e){var t=e.dataList;if(!Jc(t)){var n=[];t.forEach((function(e){e.blackListDelAccount&&n.push.apply(n,Un(e.blackListDelAccount))})),n.length>0&&this._blacklistHandler.onAccountDeleted(n);var o=[];t.forEach((function(e){e.blackListAddAccount&&o.push.apply(o,Un(e.blackListAddAccount))})),o.length>0&&this._blacklistHandler.onAccountAdded(o)}}},{key:\"onConversationsProfileUpdated\",value:function(e){this._profileHandler.onConversationsProfileUpdated(e)}},{key:\"getMyAccount\",value:function(){return this.getMyUserID()}},{key:\"getMyProfile\",value:function(){return this._profileHandler.getMyProfile()}},{key:\"getStorageModule\",value:function(){return this.getModule(dl)}},{key:\"isMyFriend\",value:function(e){var t=this.getModule(il);return!!t&&t.isMyFriend(e)}},{key:\"getUserProfile\",value:function(e){return this._profileHandler.getUserProfile(e)}},{key:\"updateMyProfile\",value:function(e){return this._profileHandler.updateMyProfile(e)}},{key:\"getNickAndAvatarByUserID\",value:function(e){return this._profileHandler.getNickAndAvatarByUserID(e)}},{key:\"getLocalBlacklist\",value:function(){var e=this._blacklistHandler.getLocalBlacklist();return k_(e)}},{key:\"addBlacklist\",value:function(e){return this._blacklistHandler.addBlacklist(e)}},{key:\"deleteBlacklist\",value:function(e){return this._blacklistHandler.deleteBlacklist(e)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._profileHandler.reset(),this._blacklistHandler.reset()}}]),n}(Al),Dm=function(){function e(t,n){yn(this,e),this._moduleManager=t,this._isLoggedIn=!1,this._SDKAppID=n.SDKAppID,this._userID=n.userID||\"\",this._userSig=n.userSig||\"\",this._version=\"2.18.0\",this._a2Key=\"\",this._tinyID=\"\",this._contentType=\"json\",this._unlimitedAVChatRoom=n.unlimitedAVChatRoom,this._scene=n.scene||\"\",this._oversea=n.oversea,this._instanceID=n.instanceID,this._statusInstanceID=0,this._isDevMode=n.devMode,this._proxyServer=n.proxyServer}return En(e,[{key:\"isLoggedIn\",value:function(){return this._isLoggedIn}},{key:\"isOversea\",value:function(){return this._oversea}},{key:\"isDevMode\",value:function(){return this._isDevMode}},{key:\"isSingaporeSite\",value:function(){return this._SDKAppID>=2e7&&this._SDKAppID<3e7}},{key:\"isKoreaSite\",value:function(){return this._SDKAppID>=3e7&&this._SDKAppID<4e7}},{key:\"isGermanySite\",value:function(){return this._SDKAppID>=4e7&&this._SDKAppID<5e7}},{key:\"isIndiaSite\",value:function(){return this._SDKAppID>=5e7&&this._SDKAppID<6e7}},{key:\"isUnlimitedAVChatRoom\",value:function(){return this._unlimitedAVChatRoom}},{key:\"getUserID\",value:function(){return this._userID}},{key:\"setUserID\",value:function(e){this._userID=e}},{key:\"setUserSig\",value:function(e){this._userSig=e}},{key:\"getUserSig\",value:function(){return this._userSig}},{key:\"getSDKAppID\",value:function(){return this._SDKAppID}},{key:\"getTinyID\",value:function(){return this._tinyID}},{key:\"setTinyID\",value:function(e){this._tinyID=e,this._isLoggedIn=!0}},{key:\"getScene\",value:function(){return this._isTUIKit()?\"tuikit\":this._scene}},{key:\"getInstanceID\",value:function(){return this._instanceID}},{key:\"getStatusInstanceID\",value:function(){return this._statusInstanceID}},{key:\"setStatusInstanceID\",value:function(e){this._statusInstanceID=e}},{key:\"getVersion\",value:function(){return this._version}},{key:\"getA2Key\",value:function(){return this._a2Key}},{key:\"setA2Key\",value:function(e){this._a2Key=e}},{key:\"getContentType\",value:function(){return this._contentType}},{key:\"getProxyServer\",value:function(){return this._proxyServer}},{key:\"_isTUIKit\",value:function(){var e=!1,t=!1,n=!1,o=!1,r=[];pi&&(r=Object.keys(hi)),gi&&(r=di?Object.keys(uni):Object.keys(window));for(var a=0,s=r.length;a<s;a++)if(r[a].toLowerCase().includes(\"uikit\")){e=!0;break}if(r=null,pi&&fc(getApp)){var i=getApp().globalData;dc(i)&&!0===i.isTUIKit&&(t=!0)}!0===this._moduleManager.getModule(dl).getStorageSync(\"TIM_\".concat(this._SDKAppID,\"_isTUIKit\"))&&(n=!0);var c=null;if(ai&&\"undefined\"==typeof uni&&__wxConfig&&(c=__wxConfig.pages),si&&\"undefined\"==typeof uni&&__qqConfig&&(c=__qqConfig.pages),pc(c)&&c.length>0){for(var u=0,l=c.length;u<l;u++)if(c[u].toLowerCase().includes(\"tui\")){o=!0;break}c=null}return e||t||n||o}},{key:\"reset\",value:function(){this._isLoggedIn=!1,this._userSig=\"\",this._a2Key=\"\",this._tinyID=\"\",this._statusInstanceID=0}}]),e}(),Nm=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"SignModule\",o._helloInterval=120,o._lastLoginTs=0,o._lastWsHelloTs=0,H_.mixin(bn(o)),o}return En(n,[{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}},{key:\"login\",value:function(e){if(this.isLoggedIn()){var t=\"您已经登录账号\".concat(e.userID,\"！如需切换账号登录，请先调用 logout 接口登出，再调用 login 接口登录。\");return Qi.warn(t),k_({actionStatus:\"OK\",errorCode:0,errorInfo:t,repeatLogin:!0})}if(Date.now()-this._lastLoginTs<=15e3)return Qi.warn(\"您正在尝试登录账号\".concat(e.userID,\"！请勿重复登录。\")),O_({code:zd.REPEAT_LOGIN,message:Jd.REPEAT_LOGIN});Qi.log(\"\".concat(this._className,\".login userID:\").concat(e.userID));var n=this._checkLoginInfo(e);if(0!==n.code)return O_(n);var o=this.getModule(ll),r=e.userID,a=e.userSig;return o.setUserID(r),o.setUserSig(a),this.getModule(vl).updateProtocolConfig(),this._login()}},{key:\"_login\",value:function(){var e=this,t=this.getModule(ll),n=t.getScene(),o=new dp(hp);return o.setMessage(\"\".concat(n)).setMoreMessage(\"identifier:\".concat(this.getMyUserID())),di?\"tuikit\"===n?o.setUIPlatform(4):o.setUIPlatform(3):pi?\"tuikit\"===n?o.setUIPlatform(12):o.setUIPlatform(11):gi&&(\"tuikit\"===n?o.setUIPlatform(14):o.setUIPlatform(13)),this._lastLoginTs=Date.now(),this.request({protocolName:Dl}).then((function(r){e._lastLoginTs=0;var a=Date.now(),s=null,i=r.data,c=i.a2Key,u=i.tinyID,l=i.helloInterval,d=i.instanceID,p=i.timeStamp;Qi.log(\"\".concat(e._className,\".login ok. scene:\").concat(n,\" helloInterval:\").concat(l,\" instanceID:\").concat(d,\" timeStamp:\").concat(p));var g=1e3*p,h=a-o.getStartTs(),f=g+parseInt(h/2)-a,_=o.getStartTs()+f;if(o.start(_),function(e,t){ji=t;var n=new Date;n.setTime(e),Qi.info(\"baseTime from server: \".concat(n,\" offset: \").concat(ji))}(g,f),!u)throw s=new A_({code:zd.NO_TINYID,message:Jd.NO_TINYID}),o.setError(s,!0,e.getNetworkType()).end(),s;if(!c)throw s=new A_({code:zd.NO_A2KEY,message:Jd.NO_A2KEY}),o.setError(s,!0,e.getNetworkType()).end(),s;return o.setNetworkType(e.getNetworkType()).setMoreMessage(\"helloInterval:\".concat(l,\" instanceID:\").concat(d,\" offset:\").concat(f)).end(),t.setA2Key(c),t.setTinyID(u),t.setStatusInstanceID(d),e.getModule(vl).updateProtocolConfig(),e.emitInnerEvent(V_),e._helloInterval=l,e.triggerReady(),e._fetchCloudControlConfig(),r})).catch((function(t){return e.probeNetwork().then((function(e){var n=Pn(e,2),r=n[0],a=n[1];o.setError(t,r,a).end(!0)})),e._moduleManager.setNotReadyReason(zd.LOGIN_FAILED),Qi.error(\"\".concat(e._className,\".login failed. error:\"),t),e._lastLoginTs=0,e._moduleManager.onLoginFailed(),O_(t)}))}},{key:\"logout\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isLoggedIn())return O_({code:zd.USER_NOT_LOGGED_IN,message:Jd.USER_NOT_LOGGED_IN});var n=new dp(fp);return n.setNetworkType(this.getNetworkType()).setMessage(\"identifier:\".concat(this.getMyUserID())).end(!0),Qi.info(\"\".concat(this._className,\".logout type:\").concat(t)),0===t&&this._moduleManager.setNotReadyReason(zd.LOGGED_OUT),this.request({protocolName:Nl,requestData:{type:t}}).then((function(){return e.resetReady(),k_({})})).catch((function(t){return Qi.error(\"\".concat(e._className,\"._logout error:\"),t),e.resetReady(),k_({})}))}},{key:\"_fetchCloudControlConfig\",value:function(){this.getModule(Il).fetchConfig()}},{key:\"_hello\",value:function(){var e=this;this._lastWsHelloTs=Date.now(),this.request({protocolName:kl}).catch((function(t){Qi.warn(\"\".concat(e._className,\"._hello error:\"),t)}))}},{key:\"getLastWsHelloTs\",value:function(){return this._lastWsHelloTs}},{key:\"_checkLoginInfo\",value:function(e){var t=0,n=\"\";return Jc(this.getModule(ll).getSDKAppID())?(t=zd.NO_SDKAPPID,n=Jd.NO_SDKAPPID):Jc(e.userID)?(t=zd.NO_IDENTIFIER,n=Jd.NO_IDENTIFIER):Jc(e.userSig)&&(t=zd.NO_USERSIG,n=Jd.NO_USERSIG),{code:t,message:n}}},{key:\"onMultipleAccountKickedOut\",value:function(e){var t=this;new dp(_p).setNetworkType(this.getNetworkType()).setMessage(\"type:\".concat(Yn.KICKED_OUT_MULT_ACCOUNT,\" newInstanceInfo:\").concat(JSON.stringify(e))).end(!0),Qi.warn(\"\".concat(this._className,\".onMultipleAccountKickedOut userID:\").concat(this.getMyUserID(),\" newInstanceInfo:\"),e),this.logout(1).then((function(){t.emitOuterEvent(Wn.KICKED_OUT,{type:Yn.KICKED_OUT_MULT_ACCOUNT}),t._moduleManager.setNotReadyReason(zd.KICKED_OUT_MULT_ACCOUNT),t._moduleManager.reset()}))}},{key:\"onMultipleDeviceKickedOut\",value:function(e){var t=this;new dp(_p).setNetworkType(this.getNetworkType()).setMessage(\"type:\".concat(Yn.KICKED_OUT_MULT_DEVICE,\" newInstanceInfo:\").concat(JSON.stringify(e))).end(!0),Qi.warn(\"\".concat(this._className,\".onMultipleDeviceKickedOut userID:\").concat(this.getMyUserID(),\" newInstanceInfo:\"),e),this.logout(1).then((function(){t.emitOuterEvent(Wn.KICKED_OUT,{type:Yn.KICKED_OUT_MULT_DEVICE}),t._moduleManager.setNotReadyReason(zd.KICKED_OUT_MULT_DEVICE),t._moduleManager.reset()}))}},{key:\"onUserSigExpired\",value:function(){new dp(_p).setNetworkType(this.getNetworkType()).setMessage(Yn.KICKED_OUT_USERSIG_EXPIRED).end(!0),Qi.warn(\"\".concat(this._className,\".onUserSigExpired: userSig 签名过期被踢下线\")),0!==this.getModule(ll).getStatusInstanceID()&&(this.emitOuterEvent(Wn.KICKED_OUT,{type:Yn.KICKED_OUT_USERSIG_EXPIRED}),this._moduleManager.setNotReadyReason(zd.KICKED_OUT_USERSIG_EXPIRED),this._moduleManager.reset())}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0,this._lastWsHelloTs=0}}]),n}(Al);function km(){return null}ke({target:\"Object\",stat:!0,forced:!a,sham:!a},{defineProperty:N.f});var Om=function(){function e(t){yn(this,e),this._moduleManager=t,this._className=\"StorageModule\",this._storageQueue=new Map,this._errorTolerantHandle()}return En(e,[{key:\"_errorTolerantHandle\",value:function(){pi||!gc(window)&&!gc(window.localStorage)||(this.getItem=km,this.setItem=km,this.removeItem=km,this.clear=km)}},{key:\"onCheckTimer\",value:function(e){if(e%20==0){if(0===this._storageQueue.size)return;this._doFlush()}}},{key:\"_doFlush\",value:function(){try{var e,t=Bn(this._storageQueue);try{for(t.s();!(e=t.n()).done;){var n=Pn(e.value,2),o=n[0],r=n[1];this._setStorageSync(this._getKey(o),r)}}catch(a){t.e(a)}finally{t.f()}this._storageQueue.clear()}catch(sI){Qi.warn(\"\".concat(this._className,\"._doFlush error:\"),sI)}}},{key:\"_getPrefix\",value:function(){var e=this._moduleManager.getModule(ll);return\"TIM_\".concat(e.getSDKAppID(),\"_\").concat(e.getUserID(),\"_\")}},{key:\"_getKey\",value:function(e){return\"\".concat(this._getPrefix()).concat(e)}},{key:\"getItem\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;return this.getStorageSync(n)}catch(sI){return Qi.warn(\"\".concat(this._className,\".getItem error:\"),sI),{}}}},{key:\"setItem\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n){var r=o?this._getKey(e):e;this._setStorageSync(r,t)}else this._storageQueue.set(e,t)}},{key:\"clear\",value:function(){try{pi?hi.clearStorageSync():localStorage&&localStorage.clear()}catch(sI){Qi.warn(\"\".concat(this._className,\".clear error:\"),sI)}}},{key:\"removeItem\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;this._removeStorageSync(n)}catch(sI){Qi.warn(\"\".concat(this._className,\".removeItem error:\"),sI)}}},{key:\"getSize\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"b\";try{var o={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(o,\"leftSize\",{enumerable:!0,get:function(){return o.limitSize-o.size}}),pi&&(o.limitSize=1024*hi.getStorageInfoSync().limitSize),e)o.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(pi){var r=hi.getStorageInfoSync(),a=r.keys;a.forEach((function(e){o.size+=JSON.stringify(t.getStorageSync(e)).length+t._getKey(e).length}))}else if(localStorage)for(var s in localStorage)localStorage.hasOwnProperty(s)&&(o.size+=localStorage.getItem(s).length+s.length);return this._convertUnit(o)}catch(sI){Qi.warn(\"\".concat(this._className,\" error:\"),sI)}}},{key:\"_convertUnit\",value:function(e){var t={},n=e.unit;for(var o in t.unit=n,e)\"number\"==typeof e[o]&&(\"kb\"===n.toLowerCase()?t[o]=Math.round(e[o]/1024):\"mb\"===n.toLowerCase()?t[o]=Math.round(e[o]/1024/1024):t[o]=e[o]);return t}},{key:\"_setStorageSync\",value:function(e,t){pi?ui?my.setStorageSync({key:e,data:t}):hi.setStorageSync(e,t):localStorage&&localStorage.setItem(e,JSON.stringify(t))}},{key:\"getStorageSync\",value:function(e){return pi?ui?my.getStorageSync({key:e}).data:hi.getStorageSync(e):localStorage?JSON.parse(localStorage.getItem(e)):{}}},{key:\"_removeStorageSync\",value:function(e){pi?ui?my.removeStorageSync({key:e}):hi.removeStorageSync(e):localStorage&&localStorage.removeItem(e)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._doFlush()}}]),e}(),Rm=function(){function e(t){yn(this,e),this._className=\"SSOLogBody\",this._report=[]}return En(e,[{key:\"pushIn\",value:function(e){Qi.debug(\"\".concat(this._className,\".pushIn\"),this._report.length,e),this._report.push(e)}},{key:\"backfill\",value:function(e){var t;pc(e)&&0!==e.length&&(Qi.debug(\"\".concat(this._className,\".backfill\"),this._report.length,e.length),(t=this._report).unshift.apply(t,Un(e)))}},{key:\"getLogsNumInMemory\",value:function(){return this._report.length}},{key:\"isEmpty\",value:function(){return 0===this._report.length}},{key:\"_reset\",value:function(){this._report.length=0,this._report=[]}},{key:\"getLogsInMemory\",value:function(){var e=this._report.slice();return this._reset(),e}}]),e}(),Lm=function(e){var t=e.getModule(ll);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:Wi()}},bm=function(e){An(n,e);var t=Gn(n);function n(e){var o;yn(this,n),(o=t.call(this,e))._className=\"EventStatModule\",o.TAG=\"im-ssolog-event\",o._reportBody=new Rm,o.MIN_THRESHOLD=20,o.MAX_THRESHOLD=100,o.WAITING_TIME=6e4,o.REPORT_LEVEL=[4,5,6],o.REPORT_SDKAPPID_BLACKLIST=[],o.REPORT_TINYID_WHITELIST=[],o._lastReportTime=Date.now();var r=o.getInnerEmitterInstance();return r.on(V_,o._onLoginSuccess,bn(o)),r.on(K_,o._onCloudConfigUpdated,bn(o)),o}return En(n,[{key:\"reportAtOnce\",value:function(){Qi.debug(\"\".concat(this._className,\".reportAtOnce\")),this._report()}},{key:\"_onLoginSuccess\",value:function(){var e=this,t=this.getModule(dl),n=t.getItem(this.TAG,!1);!Jc(n)&&fc(n.forEach)&&(Qi.log(\"\".concat(this._className,\"._onLoginSuccess get ssolog in storage, count:\").concat(n.length)),n.forEach((function(t){e._reportBody.pushIn(t)})),t.removeItem(this.TAG,!1))}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"evt_rpt_threshold\"),t=this.getCloudConfig(\"evt_rpt_waiting\"),n=this.getCloudConfig(\"evt_rpt_level\"),o=this.getCloudConfig(\"evt_rpt_sdkappid_bl\"),r=this.getCloudConfig(\"evt_rpt_tinyid_wl\");gc(e)||(this.MIN_THRESHOLD=Number(e)),gc(t)||(this.WAITING_TIME=Number(t)),gc(n)||(this.REPORT_LEVEL=n.split(\",\").map((function(e){return Number(e)}))),gc(o)||(this.REPORT_SDKAPPID_BLACKLIST=o.split(\",\").map((function(e){return Number(e)}))),gc(r)||(this.REPORT_TINYID_WHITELIST=r.split(\",\"))}},{key:\"pushIn\",value:function(e){e instanceof dp&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:\"onCheckTimer\",value:function(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}},{key:\"_filterLogs\",value:function(e){var t=this,n=this.getModule(ll),o=n.getSDKAppID(),r=n.getTinyID();return Yc(this.REPORT_SDKAPPID_BLACKLIST,o)&&!$c(this.REPORT_TINYID_WHITELIST,r)?[]:e.filter((function(e){return t.REPORT_LEVEL.includes(e.level)}))}},{key:\"_report\",value:function(){var e=this;if(!this._reportBody.isEmpty()){var t=this._reportBody.getLogsInMemory(),n=this._filterLogs(t);if(0!==n.length){var o={header:Lm(this),event:n};this.request({protocolName:Pd,requestData:Cn({},o)}).then((function(){e._lastReportTime=Date.now()})).catch((function(n){Qi.warn(\"\".concat(e._className,\".report failed. networkType:\").concat(e.getNetworkType(),\" error:\"),n),e._reportBody.backfill(t),e._reportBody.getLogsNumInMemory()>e.MAX_THRESHOLD&&e._flushAtOnce()}))}else this._lastReportTime=Date.now()}}},{key:\"_flushAtOnce\",value:function(){var e=this.getModule(dl),t=e.getItem(this.TAG,!1),n=this._reportBody.getLogsInMemory();if(Jc(t))Qi.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var o=n.concat(t);o.length>this.MAX_THRESHOLD&&(o=o.slice(0,this.MAX_THRESHOLD)),Qi.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}]),n}(Al),wm=\"none\",Gm=\"online\",Pm=function(){function e(t){yn(this,e),this._moduleManager=t,this._networkType=\"\",this._className=\"NetMonitorModule\",this.MAX_WAIT_TIME=3e3,this._mpNetworkStatusCallback=null,this._webOnlineCallback=null,this._webOfflineCallback=null}return En(e,[{key:\"start\",value:function(){var e=this;pi?(hi.getNetworkType({success:function(t){e._networkType=t.networkType,t.networkType===wm?Qi.warn(\"\".concat(e._className,\".start no network, please check!\")):Qi.info(\"\".concat(e._className,\".start networkType:\").concat(t.networkType))}}),this._mpNetworkStatusCallback=this._onNetworkStatusChange.bind(this),hi.onNetworkStatusChange(this._mpNetworkStatusCallback)):(this._networkType=Gm,this._webOnlineCallback=this._onWebOnline.bind(this),this._webOfflineCallback=this._onWebOffline.bind(this),window&&(window.addEventListener(\"online\",this._webOnlineCallback),window.addEventListener(\"offline\",this._webOfflineCallback)))}},{key:\"_onWebOnline\",value:function(){this._onNetworkStatusChange({isConnected:!0,networkType:Gm})}},{key:\"_onWebOffline\",value:function(){this._onNetworkStatusChange({isConnected:!1,networkType:wm})}},{key:\"_onNetworkStatusChange\",value:function(e){var t=e.isConnected,n=e.networkType,o=!1;t?(Qi.info(\"\".concat(this._className,\"._onNetworkStatusChange previousNetworkType:\").concat(this._networkType,\" currentNetworkType:\").concat(n)),this._networkType!==n&&(o=!0,this._moduleManager.getModule(Ml).reConnect(!0))):this._networkType!==n&&(o=!0,Qi.warn(\"\".concat(this._className,\"._onNetworkStatusChange no network, please check!\")));o&&(new dp(Tp).setMessage(\"isConnected:\".concat(t,\" previousNetworkType:\").concat(this._networkType,\" networkType:\").concat(n)).end(),this._networkType=n)}},{key:\"probe\",value:function(){var e=this;return new Promise((function(t,n){if(pi)hi.getNetworkType({success:function(n){e._networkType=n.networkType,n.networkType===wm?(Qi.warn(\"\".concat(e._className,\".probe no network, please check!\")),t([!1,n.networkType])):(Qi.info(\"\".concat(e._className,\".probe networkType:\").concat(n.networkType)),t([!0,n.networkType]))}});else if(window&&window.fetch)fetch(\"\".concat(kc(),\"//web.sdk.qcloud.com/im/assets/speed.xml?random=\").concat(Math.random())).then((function(e){e.ok?t([!0,Gm]):t([!1,wm])})).catch((function(e){t([!1,wm])}));else{var o=new XMLHttpRequest,r=setTimeout((function(){Qi.warn(\"\".concat(e._className,\".probe fetch timeout. Probably no network, please check!\")),o.abort(),e._networkType=wm,t([!1,wm])}),e.MAX_WAIT_TIME);o.onreadystatechange=function(){4===o.readyState&&(clearTimeout(r),200===o.status||304===o.status||514===o.status?(this._networkType=Gm,t([!0,Gm])):(Qi.warn(\"\".concat(this.className,\".probe fetch status:\").concat(o.status,\". Probably no network, please check!\")),this._networkType=wm,t([!1,wm])))},o.open(\"GET\",\"\".concat(kc(),\"//web.sdk.qcloud.com/im/assets/speed.xml?random=\").concat(Math.random())),o.send()}}))}},{key:\"getNetworkType\",value:function(){return this._networkType}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),pi?null!==this._mpNetworkStatusCallback&&(hi.offNetworkStatusChange&&(li||ii?hi.offNetworkStatusChange(this._mpNetworkStatusCallback):hi.offNetworkStatusChange()),this._mpNetworkStatusCallback=null):window&&(null!==this._webOnlineCallback&&(window.removeEventListener(\"online\",this._webOnlineCallback),this._webOnlineCallback=null),null!==this._onWebOffline&&(window.removeEventListener(\"offline\",this._webOfflineCallback),this._webOfflineCallback=null))}}]),e}(),Um=t((function(e){var t=Object.prototype.hasOwnProperty,n=\"~\";function o(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,o,a,s){if(\"function\"!=typeof o)throw new TypeError(\"The listener must be a function\");var i=new r(o,a||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],i]:e._events[c].push(i):(e._events[c]=i,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function i(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),i.prototype.eventNames=function(){var e,o,r=[];if(0===this._eventsCount)return r;for(o in e=this._events)t.call(e,o)&&r.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},i.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,a=o.length,s=new Array(a);r<a;r++)s[r]=o[r].fn;return s},i.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},i.prototype.emit=function(e,t,o,r,a,s){var i=n?n+e:e;if(!this._events[i])return!1;var c,u,l=this._events[i],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,o),!0;case 4:return l.fn.call(l.context,t,o,r),!0;case 5:return l.fn.call(l.context,t,o,r,a),!0;case 6:return l.fn.call(l.context,t,o,r,a,s),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,g=l.length;for(u=0;u<g;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,o);break;case 4:l[u].fn.call(l[u].context,t,o,r);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},i.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},i.prototype.removeListener=function(e,t,o,r){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var i=this._events[a];if(i.fn)i.fn!==t||r&&!i.once||o&&i.context!==o||s(this,a);else{for(var c=0,u=[],l=i.length;c<l;c++)(i[c].fn!==t||r&&!i[c].once||o&&i[c].context!==o)&&u.push(i[c]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=n,i.EventEmitter=i,e.exports=i})),Fm=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"BigDataChannelModule\",o.FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},o._bdh_download_server=\"grouptalk.c2c.qq.com\",o._BDHBizID=10001,o._authKey=\"\",o._expireTime=0,o.getInnerEmitterInstance().on(V_,o._getAuthKey,bn(o)),o}return En(n,[{key:\"_getAuthKey\",value:function(){var e=this;this.request({protocolName:Ll}).then((function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))}))}},{key:\"_isFromOlderVersion\",value:function(e){return!(!e.content||2===e.content.downloadFlag)}},{key:\"parseElements\",value:function(e,t){if(!pc(e)||!t)return[];for(var n=[],o=null,r=0;r<e.length;r++)o=e[r],this._needParse(o)?n.push(this._parseElement(o,t)):n.push(e[r]);return n}},{key:\"_needParse\",value:function(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==Yn.MSG_AUDIO&&e.type!==Yn.MSG_FILE&&e.type!==Yn.MSG_VIDEO)}},{key:\"_parseElement\",value:function(e,t){switch(e.type){case Yn.MSG_AUDIO:return this._parseAudioElement(e,t);case Yn.MSG_FILE:return this._parseFileElement(e,t);case Yn.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:\"_parseAudioElement\",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:\"_parseFileElement\",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:\"_parseVideoElement\",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:\"_genAudioUrl\",value:function(e,t){if(\"\"===this._authKey)return Qi.warn(\"\".concat(this._className,\"._genAudioUrl no authKey!\")),\"\";var n=this.getModule(ll).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(n,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.SOUND,\"&openid=\").concat(t,\"&ver=0\")}},{key:\"_genFileUrl\",value:function(e,t,n){if(\"\"===this._authKey)return Qi.warn(\"\".concat(this._className,\"._genFileUrl no authKey!\")),\"\";n||(n=\"\".concat(Math.floor(1e5*Math.random()),\"-\").concat(Date.now()));var o=this.getModule(ll).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(o,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.FILE,\"&openid=\").concat(t,\"&ver=0&filename=\").concat(encodeURIComponent(n))}},{key:\"_genVideoUrl\",value:function(e,t){if(\"\"===this._authKey)return Qi.warn(\"\".concat(this._className,\"._genVideoUrl no authKey!\")),\"\";var n=this.getModule(ll).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(n,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.VIDEO,\"&openid=\").concat(t,\"&ver=0\")}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._authKey=\"\",this.expireTime=0}}]),n}(Al),qm=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"UploadModule\",o.TIMUploadPlugin=null,o.timUploadPlugin=null,o.COSSDK=null,o._cosUploadMethod=null,o.expiredTimeLimit=600,o.appid=0,o.bucketName=\"\",o.ciUrl=\"\",o.directory=\"\",o.downloadUrl=\"\",o.uploadUrl=\"\",o.region=\"ap-shanghai\",o.cos=null,o.cosOptions={secretId:\"\",secretKey:\"\",sessionToken:\"\",expiredTime:0},o.uploadFileType=\"\",o.duration=900,o.tryCount=0,o.getInnerEmitterInstance().on(V_,o._init,bn(o)),o}return En(n,[{key:\"_init\",value:function(){var e=\"\".concat(this._className,\"._init\"),t=this.getModule(_l);if(this.TIMUploadPlugin=t.getPlugin(\"tim-upload-plugin\"),this.TIMUploadPlugin)this._initUploaderMethod();else{var n=pi?\"cos-wx-sdk\":\"cos-js-sdk\";this.COSSDK=t.getPlugin(n),this.COSSDK?(this._getAuthorizationKey(),Qi.warn(\"\".concat(e,\" v2.9.2起推荐使用 tim-upload-plugin 代替 \").concat(n,\"，上传更快更安全。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\"))):Qi.warn(\"\".concat(e,\" 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\"))}}},{key:\"_getAuthorizationKey\",value:function(){var e=this,t=new dp(Sp),n=Math.ceil(Date.now()/1e3);this.request({protocolName:bd,requestData:{duration:this.expiredTimeLimit}}).then((function(o){var r=o.data;Qi.log(\"\".concat(e._className,\"._getAuthorizationKey ok. data:\"),r);var a=r.expiredTime-n;t.setMessage(\"requestId:\".concat(r.requestId,\" requestTime:\").concat(n,\" expiredTime:\").concat(r.expiredTime,\" diff:\").concat(a,\"s\")).setNetworkType(e.getNetworkType()).end(),!pi&&r.region&&(e.region=r.region),e.appid=r.appid,e.bucketName=r.bucketName,e.ciUrl=r.ciUrl,e.directory=r.directory,e.downloadUrl=r.downloadUrl,e.uploadUrl=r.uploadUrl,e.cosOptions={secretId:r.secretId,secretKey:r.secretKey,sessionToken:r.sessionToken,expiredTime:r.expiredTime},Qi.log(\"\".concat(e._className,\"._getAuthorizationKey ok. region:\").concat(e.region,\" bucketName:\").concat(e.bucketName)),e._initUploaderMethod()})).catch((function(n){e.probeNetwork().then((function(e){var o=Pn(e,2),r=o[0],a=o[1];t.setError(n,r,a).end()})),Qi.warn(\"\".concat(e._className,\"._getAuthorizationKey failed. error:\"),n)}))}},{key:\"_getCosPreSigUrl\",value:function(e){var t=this,n=\"\".concat(this._className,\"._getCosPreSigUrl\"),o=Math.ceil(Date.now()/1e3),r=new dp(Cp);return this.request({protocolName:wd,requestData:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then((function(e){t.tryCount=0;var a=e.data||{},s=a.expiredTime-o;return Qi.log(\"\".concat(n,\" ok. data:\"),a),r.setMessage(\"requestId:\".concat(a.requestId,\" expiredTime:\").concat(a.expiredTime,\" diff:\").concat(s,\"s\")).setNetworkType(t.getNetworkType()).end(),a})).catch((function(o){return-1===o.code&&(o.code=zd.COS_GET_SIG_FAIL),t.probeNetwork().then((function(e){var t=Pn(e,2),n=t[0],a=t[1];r.setError(o,n,a).end()})),Qi.warn(\"\".concat(n,\" failed. error:\"),o),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,O_({code:zd.COS_GET_SIG_FAIL,message:Jd.COS_GET_SIG_FAIL}))}))}},{key:\"_initUploaderMethod\",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,n){e.timUploadPlugin.uploadFile(t,n)});this.appid&&(this.cos=pi?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=pi?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)})}},{key:\"onCheckTimer\",value:function(e){this.COSSDK&&(this.TIMUploadPlugin||this.isLoggedIn()&&e%60==0&&Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey())}},{key:\"_getAuthorization\",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:\"upload\",value:function(e){if(!0===e.getRelayFlag())return Promise.resolve();var t=this.getModule(Sl);switch(e.type){case Yn.MSG_IMAGE:return t.addTotalCount(op),this._uploadImage(e);case Yn.MSG_FILE:return t.addTotalCount(op),this._uploadFile(e);case Yn.MSG_AUDIO:return t.addTotalCount(op),this._uploadAudio(e);case Yn.MSG_VIDEO:return t.addTotalCount(op),this._uploadVideo(e);default:return Promise.resolve()}}},{key:\"_uploadImage\",value:function(e){var t=this.getModule(ol),n=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadImage({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),fc(o.onProgress))try{o.onProgress(e)}catch(t){return O_({code:zd.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Jd.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(t){var o=t.location,r=t.fileType,a=t.fileSize,s=t.width,i=t.height,c=Oc(o);n.updateImageFormat(r);var u=Bc({originUrl:c,originWidth:s,originHeight:i,min:198}),l=Bc({originUrl:c,originWidth:s,originHeight:i,min:720});return n.updateImageInfoArray([{size:a,url:c,width:s,height:i},Cn({},l),Cn({},u)]),e}))}},{key:\"_uploadFile\",value:function(e){var t=this.getModule(ol),n=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadFile({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),fc(o.onProgress))try{o.onProgress(e)}catch(t){return O_({code:zd.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Jd.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(t){var o=t.location,r=Oc(o);return n.updateFileUrl(r),e}))}},{key:\"_uploadAudio\",value:function(e){var t=this.getModule(ol),n=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadAudio({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),fc(o.onProgress))try{o.onProgress(e)}catch(t){return O_({code:zd.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Jd.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(t){var o=t.location,r=Oc(o);return n.updateAudioUrl(r),e}))}},{key:\"_uploadVideo\",value:function(e){var t=this.getModule(ol),n=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadVideo({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),fc(o.onProgress))try{o.onProgress(e)}catch(t){return O_({code:zd.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Jd.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(t){var o=t.location,r=t.snapshotInfo,a=Oc(o);return n.updateVideoUrl(a),Jc(r)||n.updateSnapshotInfo(r),e}))}},{key:\"doUploadImage\",value:function(e){if(!e.file)return O_({code:zd.MESSAGE_IMAGE_SELECT_FILE_FIRST,message:Jd.MESSAGE_IMAGE_SELECT_FILE_FIRST});var t=this._checkImageType(e.file);if(!0!==t)return t;var n=this._checkImageSize(e.file);if(!0!==n)return n;var o=null;return this._setUploadFileType(Y_),this.uploadByCOS(e).then((function(e){return o=e,xc(\"https://\".concat(e.location))})).then((function(e){return o.width=e.width,o.height=e.height,Promise.resolve(o)}))}},{key:\"_checkImageType\",value:function(e){var t=\"\";return t=pi?e.url.slice(e.url.lastIndexOf(\".\")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(\".\")+1),j_.indexOf(t.toLowerCase())>=0||O_({code:zd.MESSAGE_IMAGE_TYPES_LIMIT,message:Jd.MESSAGE_IMAGE_TYPES_LIMIT})}},{key:\"_checkImageSize\",value:function(e){var t=0;return 0===(t=pi?e.size:e.files[0].size)?O_({code:zd.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(Jd.MESSAGE_FILE_IS_EMPTY)}):t<20971520||O_({code:zd.MESSAGE_IMAGE_SIZE_LIMIT,message:\"\".concat(Jd.MESSAGE_IMAGE_SIZE_LIMIT)})}},{key:\"doUploadFile\",value:function(e){var t=null;return e.file?e.file.files[0].size>104857600?O_(t={code:zd.MESSAGE_FILE_SIZE_LIMIT,message:Jd.MESSAGE_FILE_SIZE_LIMIT}):0===e.file.files[0].size?(t={code:zd.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(Jd.MESSAGE_FILE_IS_EMPTY)},O_(t)):(this._setUploadFileType(J_),this.uploadByCOS(e)):O_(t={code:zd.MESSAGE_FILE_SELECT_FILE_FIRST,message:Jd.MESSAGE_FILE_SELECT_FILE_FIRST})}},{key:\"doUploadVideo\",value:function(e){return e.file.videoFile.size>104857600?O_({code:zd.MESSAGE_VIDEO_SIZE_LIMIT,message:\"\".concat(Jd.MESSAGE_VIDEO_SIZE_LIMIT)}):0===e.file.videoFile.size?O_({code:zd.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(Jd.MESSAGE_FILE_IS_EMPTY)}):-1===W_.indexOf(e.file.videoFile.type)?O_({code:zd.MESSAGE_VIDEO_TYPES_LIMIT,message:\"\".concat(Jd.MESSAGE_VIDEO_TYPES_LIMIT)}):(this._setUploadFileType($_),pi?this.handleVideoUpload({file:e.file.videoFile,onProgress:e.onProgress}):gi?this.handleVideoUpload(e):void 0)}},{key:\"handleVideoUpload\",value:function(e){var t=this;return new Promise((function(n,o){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){o(new A_({code:zd.MESSAGE_VIDEO_UPLOAD_FAIL,message:Jd.MESSAGE_VIDEO_UPLOAD_FAIL}))}))}))}))}},{key:\"doUploadAudio\",value:function(e){return e.file?e.file.size>20971520?O_(new A_({code:zd.MESSAGE_AUDIO_SIZE_LIMIT,message:\"\".concat(Jd.MESSAGE_AUDIO_SIZE_LIMIT)})):0===e.file.size?O_(new A_({code:zd.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(Jd.MESSAGE_FILE_IS_EMPTY)})):(this._setUploadFileType(z_),this.uploadByCOS(e)):O_(new A_({code:zd.MESSAGE_AUDIO_UPLOAD_FAIL,message:Jd.MESSAGE_AUDIO_UPLOAD_FAIL}))}},{key:\"uploadByCOS\",value:function(e){var t=this,n=\"\".concat(this._className,\".uploadByCOS\");if(!fc(this._cosUploadMethod))return Qi.warn(\"\".concat(n,\" 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\")),O_({code:zd.COS_UNDETECTED,message:Jd.COS_UNDETECTED});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var o=new dp(Dp),r=Date.now(),a=this._getFile(e);return new Promise((function(s,i){var c=pi?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),u=t;t._cosUploadMethod(c,(function(e,c){var l=Object.create(null);if(c){if(e||pc(c.files)&&c.files[0].error){var d=new A_({code:zd.MESSAGE_FILE_UPLOAD_FAIL,message:Jd.MESSAGE_FILE_UPLOAD_FAIL});return o.setError(d,!0,t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" failed. error:\"),c.files[0].error),403===c.files[0].error.statusCode&&(Qi.warn(\"\".concat(n,\" failed. cos AccessKeyId was invalid, regain auth key!\")),t._getAuthorizationKey()),void i(d)}l.fileName=a.name,l.fileSize=a.size,l.fileType=a.type.slice(a.type.indexOf(\"/\")+1).toLowerCase(),l.location=pi?c.Location:c.files[0].data.Location;var p=Date.now()-r,g=u._formatFileSize(a.size),h=u._formatSpeed(1e3*a.size/p),f=\"size:\".concat(g,\" time:\").concat(p,\"ms speed:\").concat(h);Qi.log(\"\".concat(n,\" success. name:\").concat(a.name,\" \").concat(f)),s(l);var _=t.getModule(Sl);return _.addCost(op,p),_.addFileSize(op,a.size),void o.setNetworkType(t.getNetworkType()).setMessage(f).end()}var m=new A_({code:zd.MESSAGE_FILE_UPLOAD_FAIL,message:Jd.MESSAGE_FILE_UPLOAD_FAIL});o.setError(m,!0,u.getNetworkType()).end(),Qi.warn(\"\".concat(n,\" failed. error:\"),e),403===e.statusCode&&(Qi.warn(\"\".concat(n,\" failed. cos AccessKeyId was invalid, regain auth key!\")),t._getAuthorizationKey()),i(m)}))}))}},{key:\"_uploadWithPreSigUrl\",value:function(e){var t=this,n=\"\".concat(this._className,\"._uploadWithPreSigUrl\"),o=this._getFile(e);return this._createCosOptionsPreSigUrl(e).then((function(e){return new Promise((function(r,a){var s=new dp(Dp),i=e.requestSnapshotUrl,c=void 0===i?void 0:i,u=Ln(e,[\"requestSnapshotUrl\"]),l=Date.now();t._cosUploadMethod(u,(function(e,i){var u=Object.create(null);if(e||403===i.statusCode){var d=new A_({code:zd.MESSAGE_FILE_UPLOAD_FAIL,message:Jd.MESSAGE_FILE_UPLOAD_FAIL});return s.setError(d,!0,t.getNetworkType()).end(),Qi.log(\"\".concat(n,\" failed, error:\"),e),void a(d)}var p=i.data.location||\"\";0!==p.indexOf(\"https://\")&&0!==p.indexOf(\"http://\")||(p=p.split(\"//\")[1]),u.fileName=o.name,u.fileSize=o.size,u.fileType=o.type.slice(o.type.indexOf(\"/\")+1).toLowerCase(),u.location=p;var g=Date.now()-l,h=t._formatFileSize(o.size),f=t._formatSpeed(1e3*o.size/g),_=\"size:\".concat(h,\",time:\").concat(g,\"ms,speed:\").concat(f,\" res:\").concat(JSON.stringify(i.data));Qi.log(\"\".concat(n,\" success name:\").concat(o.name,\",\").concat(_)),s.setNetworkType(t.getNetworkType()).setMessage(_).end();var m=t.getModule(Sl);if(m.addCost(op,g),m.addFileSize(op,o.size),!Jc(c))return t._getSnapshotInfoByUrl(c).then((function(e){u.snapshotInfo=e,r(u)}));r(u)}))}))}))}},{key:\"_getFile\",value:function(e){var t=null;return pi?t=li&&pc(e.file.files)?e.file.files[0]:e.file:gi&&(t=e.file.files[0]),t}},{key:\"_formatFileSize\",value:function(e){return e<1024?e+\"B\":e<1048576?Math.floor(e/1024)+\"KB\":Math.floor(e/1048576)+\"MB\"}},{key:\"_formatSpeed\",value:function(e){return e<=1048576?Wc(e/1024,1)+\"KB/s\":Wc(e/1048576,1)+\"MB/s\"}},{key:\"_createCosOptionsWeb\",value:function(e){var t=e.file.files[0].name,n=t.slice(t.lastIndexOf(\".\")),o=this._genFileName(\"\".concat(Sc(999999)).concat(n));return{files:[{Bucket:\"\".concat(this.bucketName,\"-\").concat(this.appid),Region:this.region,Key:\"\".concat(this.directory,\"/\").concat(o),Body:e.file.files[0]}],SliceSize:1048576,onProgress:function(t){if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Qi.warn(\"onProgress callback error:\",n)}},onFileFinish:function(e,t,n){}}}},{key:\"_createCosOptionsWXMiniApp\",value:function(e){var t=this._getFile(e),n=this._genFileName(t.name),o=t.url;return{Bucket:\"\".concat(this.bucketName,\"-\").concat(this.appid),Region:this.region,Key:\"\".concat(this.directory,\"/\").concat(n),FilePath:o,onProgress:function(t){if(Qi.log(JSON.stringify(t)),\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Qi.warn(\"onProgress callback error:\",n)}}}}},{key:\"_createCosOptionsPreSigUrl\",value:function(e){var t=this,n=\"\",o=\"\",r=0;if(pi){var a=this._getFile(e);n=this._genFileName(a.name),o=a.url,r=1}else{var s=e.file.files[0].name,i=s.slice(s.lastIndexOf(\".\"));n=this._genFileName(\"\".concat(Sc(999999)).concat(i)),o=e.file.files[0],r=0}return this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:n,uploadMethod:r,duration:this.duration}).then((function(r){var a=r.uploadUrl,s=r.downloadUrl,i=r.requestSnapshotUrl,c=void 0===i?void 0:i;return{url:a,fileType:t.uploadFileType,fileName:n,resources:o,downloadUrl:s,requestSnapshotUrl:c,onProgress:function(t){if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Qi.warn(\"onProgress callback error:\",n),Qi.error(n)}}}}))}},{key:\"_genFileName\",value:function(e){return\"\".concat(Vc(),\"-\").concat(e)}},{key:\"_setUploadFileType\",value:function(e){this.uploadFileType=e}},{key:\"_getSnapshotInfoByUrl\",value:function(e){var t=this,n=new dp(Ap);return this.request({protocolName:Gd,requestData:{platform:this.getPlatform(),coverName:this._genFileName(Sc(99999)),requestSnapshotUrl:e}}).then((function(e){var t=(e.data||{}).snapshotUrl;return n.setMessage(\"snapshotUrl:\".concat(t)).end(),Jc(t)?{}:xc(t).then((function(e){return{snapshotUrl:t,snapshotWidth:e.width,snapshotHeight:e.height}}))})).catch((function(e){return Qi.warn(\"\".concat(t._className,\"._getSnapshotInfoByUrl failed. error:\"),e),n.setCode(e.errorCode).setMessage(e.errorInfo).end(),{}}))}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\"))}}]),n}(Al),xm=function(){function e(t){yn(this,e),this._className=\"MergerMessageHandler\",this._messageModule=t}return En(e,[{key:\"uploadMergerMessage\",value:function(e,t){var n=this;Qi.debug(\"\".concat(this._className,\".uploadMergerMessage message:\"),e,\"messageBytes:\".concat(t));var o=e.payload.messageList,r=o.length,a=new dp(Vp);return this._messageModule.request({protocolName:Kd,requestData:{messageList:o}}).then((function(e){Qi.debug(\"\".concat(n._className,\".uploadMergerMessage ok. response:\"),e.data);var o=e.data,s=o.pbDownloadKey,i=o.downloadKey,c={pbDownloadKey:s,downloadKey:i,messageNumber:r};return a.setNetworkType(n._messageModule.getNetworkType()).setMessage(\"\".concat(r,\"-\").concat(t,\"-\").concat(i)).end(),c})).catch((function(e){throw Qi.warn(\"\".concat(n._className,\".uploadMergerMessage failed. error:\"),e),n._messageModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),e}))}},{key:\"downloadMergerMessage\",value:function(e){var t=this;Qi.debug(\"\".concat(this._className,\".downloadMergerMessage message:\"),e);var n=e.payload.downloadKey,o=new dp(Kp);return o.setMessage(\"downloadKey:\".concat(n)),this._messageModule.request({protocolName:Bd,requestData:{downloadKey:n}}).then((function(n){if(Qi.debug(\"\".concat(t._className,\".downloadMergerMessage ok. response:\"),n.data),fc(e.clearElement)){var r=e.payload,a=(r.downloadKey,r.pbDownloadKey,r.messageList,Ln(r,[\"downloadKey\",\"pbDownloadKey\",\"messageList\"]));e.clearElement(),e.setElement({type:e.type,content:Cn({messageList:n.data.messageList},a)})}else{var s=[];n.data.messageList.forEach((function(e){if(!Jc(e)){var t=new __(e);s.push(t)}})),e.payload.messageList=s,e.payload.downloadKey=\"\",e.payload.pbDownloadKey=\"\"}return o.setNetworkType(t._messageModule.getNetworkType()).end(),e})).catch((function(e){throw Qi.warn(\"\".concat(t._className,\".downloadMergerMessage failed. key:\").concat(n,\" error:\"),e),t._messageModule.probeNetwork().then((function(t){var n=Pn(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),e}))}},{key:\"createMergerMessagePack\",value:function(e,t,n){return e.conversationType===Yn.CONV_C2C?this._createC2CMergerMessagePack(e,t,n):this._createGroupMergerMessagePack(e,t,n)}},{key:\"_createC2CMergerMessagePack\",value:function(e,t,n){var o=null;t&&(t.offlinePushInfo&&(o=t.offlinePushInfo),!0===t.onlineUserOnly&&(o?o.disablePush=!0:o={disablePush:!0}));var r=\"\";uc(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var a=n.pbDownloadKey,s=n.downloadKey,i=n.messageNumber,c=e.payload,u=c.title,l=c.abstractList,d=c.compatibleText,p=this._messageModule.getModule(al);return{protocolName:bl,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:a,downloadKey:s,title:u,abstractList:l,compatibleText:d,messageNumber:i}}],cloudCustomData:r,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:p&&p.isOnlineMessage(e,t)?0:void 0,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0}}}},{key:\"_createGroupMergerMessagePack\",value:function(e,t,n){var o=null;t&&t.offlinePushInfo&&(o=t.offlinePushInfo);var r=\"\";uc(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var a=n.pbDownloadKey,s=n.downloadKey,i=n.messageNumber,c=e.payload,u=c.title,l=c.abstractList,d=c.compatibleText,p=this._messageModule.getModule(sl);return{protocolName:wl,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:a,downloadKey:s,title:u,abstractList:l,compatibleText:d,messageNumber:i}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:r,onlineOnlyFlag:p&&p.isOnlineMessage(e,t)?1:0,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0,clientTime:e.clientTime,needReadReceipt:!0!==e.needReadReceipt||p.isMessageFromOrToAVChatroom(e.to)?0:1}}}}]),e}(),Vm={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,OPEN_SERVICE_OVERLOAD_ERROR:60022,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MESSAGE_SEND_FAIL:2100,OVER_FREQUENCY_LIMIT:2996},Km=[zd.MESSAGE_ONPROGRESS_FUNCTION_ERROR,zd.MESSAGE_IMAGE_SELECT_FILE_FIRST,zd.MESSAGE_IMAGE_TYPES_LIMIT,zd.MESSAGE_FILE_IS_EMPTY,zd.MESSAGE_IMAGE_SIZE_LIMIT,zd.MESSAGE_FILE_SELECT_FILE_FIRST,zd.MESSAGE_FILE_SIZE_LIMIT,zd.MESSAGE_VIDEO_SIZE_LIMIT,zd.MESSAGE_VIDEO_TYPES_LIMIT,zd.MESSAGE_AUDIO_UPLOAD_FAIL,zd.MESSAGE_AUDIO_SIZE_LIMIT,zd.COS_UNDETECTED];var Bm=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"MessageModule\",o._messageOptionsMap=new Map,o._mergerMessageHandler=new xm(bn(o)),o}return En(n,[{key:\"createTextMessage\",value:function(e){var t=e.to,n=e.payload.atUserList,o=void 0===n?[]:n;if(Gc({groupID:t})&&o.includes(Yn.MSG_AT_ALL))return O_({code:zd.MESSAGE_AT_TYPE_INVALID,message:Jd.MESSAGE_AT_TYPE_INVALID});var r=this.getMyUserID();e.currentUser=r,e.senderTinyID=this.getMyTinyID();var a=new M_(e),s=\"string\"==typeof e.payload?e.payload:e.payload.text,i=new Yg({text:s}),c=this._getNickAndAvatarByUserID(r);return a.setElement(i),a.setNickAndAvatar(c),a.setNameCard(this._getNameCardByGroupID(a)),a}},{key:\"createImageMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new M_(e);if(pi){var o=e.payload.file;if(ic(o))return void Qi.warn(\"小程序环境下调用 createImageMessage 接口时，payload.file 不支持传入 File 对象\");var r=o.tempFilePaths[0],a={url:r,name:r.slice(r.lastIndexOf(\"/\")+1),size:o.tempFiles&&o.tempFiles[0].size||1,type:r.slice(r.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=a}else if(gi)if(ic(e.payload.file)){var s=e.payload.file;e.payload.file={files:[s]}}else if(dc(e.payload.file)&&\"undefined\"!=typeof uni){var i=e.payload.file.tempFiles[0];e.payload.file={files:[i]}}var c=new Zf({imageFormat:Zi.UNKNOWN,uuid:this._generateUUID(),file:e.payload.file}),u=this._getNickAndAvatarByUserID(t);return n.setElement(c),n.setNickAndAvatar(u),n.setNameCard(this._getNameCardByGroupID(n)),this._messageOptionsMap.set(n.clientSequence,e),n}},{key:\"createAudioMessage\",value:function(e){if(pi){var t=e.payload.file;if(pi){var n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\"/\")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=n}var o=this.getMyUserID();e.currentUser=o,e.senderTinyID=this.getMyTinyID();var r=new M_(e),a=new t_({second:Math.floor(t.duration/1e3),size:t.fileSize,url:t.tempFilePath,uuid:this._generateUUID()}),s=this._getNickAndAvatarByUserID(o);return r.setElement(a),r.setNickAndAvatar(s),r.setNameCard(this._getNameCardByGroupID(r)),this._messageOptionsMap.set(r.clientSequence,e),r}Qi.warn(\"createAudioMessage 目前只支持小程序环境下发语音消息\")}},{key:\"createVideoMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID(),e.payload.file.thumbUrl=\"https://web.sdk.qcloud.com/im/assets/images/transparent.png\",e.payload.file.thumbSize=1668;var n={};if(pi){if(ui)return void Qi.warn(\"createVideoMessage 不支持在支付宝小程序环境下使用\");if(ic(e.payload.file))return void Qi.warn(\"小程序环境下调用 createVideoMessage 接口时，payload.file 不支持传入 File 对象\");var o=e.payload.file;n.url=o.tempFilePath,n.name=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(\"/\")+1),n.size=o.size,n.second=o.duration,n.type=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()}else if(gi){if(ic(e.payload.file)){var r=e.payload.file;e.payload.file.files=[r]}else if(dc(e.payload.file)&&\"undefined\"!=typeof uni){var a=e.payload.file.tempFile;e.payload.file.files=[a]}var s=e.payload.file;n.url=window.URL.createObjectURL(s.files[0]),n.name=s.files[0].name,n.size=s.files[0].size,n.second=s.files[0].duration||0,n.type=s.files[0].type.split(\"/\")[1]}e.payload.file.videoFile=n;var i=new M_(e),c=new h_({videoFormat:n.type,videoSecond:Wc(n.second,0),videoSize:n.size,remoteVideoUrl:\"\",videoUrl:n.url,videoUUID:this._generateUUID(),thumbUUID:this._generateUUID(),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(\".\")+1).toLowerCase()}),u=this._getNickAndAvatarByUserID(t);return i.setElement(c),i.setNickAndAvatar(u),i.setNameCard(this._getNameCardByGroupID(i)),this._messageOptionsMap.set(i.clientSequence,e),i}},{key:\"createCustomMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new M_(e),o=new g_({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"createFaceMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new M_(e),o=new e_(e.payload),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"createMergerMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=this._getNickAndAvatarByUserID(t),o=new M_(e),r=new m_(e.payload);return o.setElement(r),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),o.setRelayFlag(!0),o}},{key:\"createForwardMessage\",value:function(e){var t=e.to,n=e.conversationType,o=e.priority,r=e.payload,a=e.needReadReceipt,s=this.getMyUserID(),i=this._getNickAndAvatarByUserID(s);if(r.type===Yn.MSG_GRP_TIP)return O_(new A_({code:zd.MESSAGE_FORWARD_TYPE_INVALID,message:Jd.MESSAGE_FORWARD_TYPE_INVALID}));var c={to:t,conversationType:n,conversationID:\"\".concat(n).concat(t),priority:o,isPlaceMessage:0,status:Fu.UNSEND,currentUser:s,senderTinyID:this.getMyTinyID(),cloudCustomData:e.cloudCustomData||r.cloudCustomData||\"\",needReadReceipt:a},u=new M_(c);return u.setElement(r.getElements()[0]),u.setNickAndAvatar(i),u.setNameCard(this._getNameCardByGroupID(r)),u.setRelayFlag(!0),u}},{key:\"downloadMergerMessage\",value:function(e){return this._mergerMessageHandler.downloadMergerMessage(e)}},{key:\"createFileMessage\",value:function(e){if(!pi||li){if(gi||li)if(ic(e.payload.file)){var t=e.payload.file;e.payload.file={files:[t]}}else if(dc(e.payload.file)&&\"undefined\"!=typeof uni){var n=e.payload.file,o=n.tempFiles,r=n.files,a=null;pc(o)?a=o[0]:pc(r)&&(a=r[0]),e.payload.file={files:[a]}}var s=this.getMyUserID();e.currentUser=s,e.senderTinyID=this.getMyTinyID();var i=new M_(e),c=new p_({uuid:this._generateUUID(),file:e.payload.file}),u=this._getNickAndAvatarByUserID(s);return i.setElement(c),i.setNickAndAvatar(u),i.setNameCard(this._getNameCardByGroupID(i)),this._messageOptionsMap.set(i.clientSequence,e),i}Qi.warn(\"小程序目前不支持选择文件， createFileMessage 接口不可用！\")}},{key:\"createLocationMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new M_(e),o=new f_(e.payload),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"_onCannotFindModule\",value:function(){return O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"sendMessageInstance\",value:function(e,t){var n,o=this,r=null;switch(e.conversationType){case Yn.CONV_C2C:if(!(r=this.getModule(al)))return this._onCannotFindModule();break;case Yn.CONV_GROUP:if(!(r=this.getModule(sl)))return this._onCannotFindModule();if(Gc({groupID:e.to})&&!gc(t)&&!gc(t.messageControlInfo))return O_({code:zd.MESSAGE_CONTROL_INFO_FAIL,message:Jd.MESSAGE_CONTROL_INFO_FAIL});break;default:return O_({code:zd.MESSAGE_SEND_INVALID_CONVERSATION_TYPE,message:Jd.MESSAGE_SEND_INVALID_CONVERSATION_TYPE})}var a=this.getModule(fl),s=this.getModule(sl);return a.upload(e).then((function(){o._getSendMessageSpecifiedKey(e)===np&&o.getModule(Sl).addSuccessCount(op);return s.guardForAVChatRoom(e).then((function(){if(!e.isSendable())return O_({code:zd.MESSAGE_FILE_URL_IS_EMPTY,message:Jd.MESSAGE_FILE_URL_IS_EMPTY});o._addSendMessageTotalCount(e),n=Date.now();var a=function(e){var t=\"utf-8\";gi&&document&&(t=document.charset.toLowerCase());var n,o,r=0;if(o=e.length,\"utf-8\"===t||\"utf8\"===t)for(var a=0;a<o;a++)(n=e.codePointAt(a))<=127?r+=1:n<=2047?r+=2:n<=65535?r+=3:(r+=4,a++);else if(\"utf-16\"===t||\"utf16\"===t)for(var s=0;s<o;s++)(n=e.codePointAt(s))<=65535?r+=2:(r+=4,s++);else r=e.replace(/[^\\\\x00-\\\\xff]/g,\"aa\").length;return r}(JSON.stringify(e));return e.type===Yn.MSG_MERGER&&a>7e3?o._mergerMessageHandler.uploadMergerMessage(e,a).then((function(n){var r=o._mergerMessageHandler.createMergerMessagePack(e,t,n);return o.request(r)})):(o.getModule(ul).setMessageRandom(e),e.conversationType===Yn.CONV_C2C||e.conversationType===Yn.CONV_GROUP?r.sendMessage(e,t):void 0)})).then((function(a){var s=a.data,i=s.time,c=s.sequence,u=s.readReceiptCode;cc(u)&&0!==u&&(new dp(kp).setMessage(\"from:\".concat(e.from,\" to:\").concat(e.to,\" sequence:\").concat(c,\" readReceiptCode:\").concat(u)).end(),Qi.warn(\"\".concat(o._className,\".sendMessageInstance readReceiptCode:\").concat(u,\" message:\").concat(C_[u])));o._addSendMessageSuccessCount(e,n),o._messageOptionsMap.delete(e.clientSequence);var l=o.getModule(ul);e.status=Fu.SUCCESS,e.time=i;var d=!1;if(e.conversationType===Yn.CONV_GROUP)e.sequence=c;else if(e.conversationType===Yn.CONV_C2C){var p=l.getLatestMessageSentByMe(e.conversationID);if(p){var g=p.nick,h=p.avatar;g===e.nick&&h===e.avatar||(d=!0)}}if(l.appendToMessageList(e),d&&l.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),r.isOnlineMessage(e,t))e._onlineOnlyFlag=!0;else{var f=e;dc(t)&&dc(t.messageControlInfo)&&(!0===t.messageControlInfo.excludedFromLastMessage&&(e._isExcludedFromLastMessage=!0,f=\"\"),!0===t.messageControlInfo.excludedFromUnreadCount&&(e._isExcludedFromUnreadCount=!0)),l.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:e.conversationType,subType:e.conversationSubType,lastMessage:f}]})}return e.getRelayFlag()||\"TIMImageElem\"!==e.type||Hc(e.payload.imageInfoArray),y_({message:e})}))})).catch((function(t){return o._onSendMessageFailed(e,t)}))}},{key:\"_onSendMessageFailed\",value:function(e,t){e.status=Fu.FAIL,this.getModule(ul).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new dp(Np);return n.setMessage(\"tjg_id:\".concat(this.generateTjgID(e),\" type:\").concat(e.type,\" from:\").concat(e.from,\" to:\").concat(e.to)),this.probeNetwork().then((function(e){var o=Pn(e,2),r=o[0],a=o[1];n.setError(t,r,a).end()})),Qi.error(\"\".concat(this._className,\"._onSendMessageFailed error:\"),t),O_(new A_({code:t&&t.code?t.code:zd.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:Jd.MESSAGE_SEND_FAIL,data:{message:e}}))}},{key:\"_getSendMessageSpecifiedKey\",value:function(e){if([Yn.MSG_IMAGE,Yn.MSG_AUDIO,Yn.MSG_VIDEO,Yn.MSG_FILE].includes(e.type))return np;if(e.conversationType===Yn.CONV_C2C)return Zd;if(e.conversationType===Yn.CONV_GROUP){var t=this.getModule(sl).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return wc(n)?tp:ep}}},{key:\"_addSendMessageTotalCount\",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(Sl).addTotalCount(t)}},{key:\"_addSendMessageSuccessCount\",value:function(e,t){var n=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){var r=this.getModule(Sl);r.addSuccessCount(o),r.addCost(o,n)}}},{key:\"_addSendMessageFailCountOnUser\",value:function(e,t){var n,o,r=t.code,a=void 0===r?-1:r,s=this.getModule(Sl),i=this._getSendMessageSpecifiedKey(e);i===np&&(n=a,o=!1,Km.includes(n)&&(o=!0),o)?s.addFailedCountOfUserSide(op):function(e){var t=!1;return Object.values(Vm).includes(e)&&(t=!0),(e>=120001&&e<=13e4||e>=10100&&e<=10200)&&(t=!0),t}(a)&&i&&s.addFailedCountOfUserSide(i)}},{key:\"resendMessage\",value:function(e){return e.isResend=!0,e.status=Fu.UNSEND,e.random=Sc(),e.clientTime=$i(),e.generateMessageID(),this.sendMessageInstance(e)}},{key:\"revokeMessage\",value:function(e){var t=this,n=null;if(e.conversationType===Yn.CONV_C2C){if(!(n=this.getModule(al)))return this._onCannotFindModule()}else if(e.conversationType===Yn.CONV_GROUP&&!(n=this.getModule(sl)))return this._onCannotFindModule();var o=new dp(Gp);return o.setMessage(\"tjg_id:\".concat(this.generateTjgID(e),\" type:\").concat(e.type,\" from:\").concat(e.from,\" to:\").concat(e.to)),n.revokeMessage(e).then((function(n){var r=n.data.recallRetList;if(!Jc(r)&&0!==r[0].retCode){var a=new A_({code:r[0].retCode,message:C_[r[0].retCode]||Jd.MESSAGE_REVOKE_FAIL,data:{message:e}});return o.setCode(a.code).setMoreMessage(a.message).end(),O_(a)}return Qi.info(\"\".concat(t._className,\".revokeMessage ok. ID:\").concat(e.ID)),e.isRevoked=!0,o.end(),t.getModule(ul).onMessageRevoked([e]),y_({message:e})})).catch((function(n){t.probeNetwork().then((function(e){var t=Pn(e,2),r=t[0],a=t[1];o.setError(n,r,a).end()}));var r=new A_({code:n&&n.code?n.code:zd.MESSAGE_REVOKE_FAIL,message:n&&n.message?n.message:Jd.MESSAGE_REVOKE_FAIL,data:{message:e}});return Qi.warn(\"\".concat(t._className,\".revokeMessage failed. error:\"),n),O_(r)}))}},{key:\"deleteMessage\",value:function(e){var t=this,n=null,o=e[0],r=o.conversationID,a=\"\",s=[],i=[];if(o.conversationType===Yn.CONV_C2C?(n=this.getModule(al),a=r.replace(Yn.CONV_C2C,\"\"),e.forEach((function(e){e&&e.status===Fu.SUCCESS&&e.conversationID===r&&(e._onlineOnlyFlag||s.push(\"\".concat(e.sequence,\"_\").concat(e.random,\"_\").concat(e.time)),i.push(e))}))):o.conversationType===Yn.CONV_GROUP&&(n=this.getModule(sl),a=r.replace(Yn.CONV_GROUP,\"\"),e.forEach((function(e){e&&e.status===Fu.SUCCESS&&e.conversationID===r&&(e._onlineOnlyFlag||s.push(\"\".concat(e.sequence)),i.push(e))}))),!n)return this._onCannotFindModule();if(0===s.length)return this._onMessageDeleted(i);s.length>30&&(s=s.slice(0,30),i=i.slice(0,30));var c=new dp(Pp);return c.setMessage(\"to:\".concat(a,\" count:\").concat(s.length)),n.deleteMessage({to:a,keyList:s}).then((function(e){return c.end(),Qi.info(\"\".concat(t._className,\".deleteMessage ok\")),t._onMessageDeleted(i)})).catch((function(e){t.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Qi.warn(\"\".concat(t._className,\".deleteMessage failed. error:\"),e);var n=new A_({code:e&&e.code?e.code:zd.MESSAGE_DELETE_FAIL,message:e&&e.message?e.message:Jd.MESSAGE_DELETE_FAIL});return O_(n)}))}},{key:\"_onMessageDeleted\",value:function(e){return this.getModule(ul).onMessageDeleted(e),k_({messageList:e})}},{key:\"_generateUUID\",value:function(){var e=this.getModule(ll);return\"\".concat(e.getSDKAppID(),\"-\").concat(e.getUserID(),\"-\").concat(function(){for(var e=\"\",t=32;t>0;--t)e+=Cc[Math.floor(Math.random()*Ac)];return e}())}},{key:\"getMessageOption\",value:function(e){return this._messageOptionsMap.get(e)}},{key:\"_getNickAndAvatarByUserID\",value:function(e){return this.getModule(rl).getNickAndAvatarByUserID(e)}},{key:\"_getNameCardByGroupID\",value:function(e){if(e.conversationType===Yn.CONV_GROUP){var t=this.getModule(sl);if(t)return t.getMyNameCardByGroupID(e.to)}return\"\"}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._messageOptionsMap.clear()}}]),n}(Al),Hm=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"PluginModule\",o.plugins={},o}return En(n,[{key:\"registerPlugin\",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.plugins[n]=e[n]})),new dp(mp).setMessage(\"key=\".concat(Object.keys(e))).end()}},{key:\"getPlugin\",value:function(e){return this.plugins[e]}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\"))}}]),n}(Al),jm=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"SyncUnreadMessageModule\",o._cookie=\"\",o._onlineSyncFlag=!1,o.getInnerEmitterInstance().on(V_,o._onLoginSuccess,bn(o)),o}return En(n,[{key:\"_onLoginSuccess\",value:function(e){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:\"_startSync\",value:function(e){var t=this,n=e.cookie,o=e.syncFlag,r=e.isOnlineSync;Qi.log(\"\".concat(this._className,\"._startSync cookie:\").concat(n,\" syncFlag:\").concat(o,\" isOnlineSync:\").concat(r)),this.request({protocolName:Rl,requestData:{cookie:n,syncFlag:o,isOnlineSync:r}}).then((function(e){var n=e.data,o=n.cookie,r=n.syncFlag,a=n.eventArray,s=n.messageList,i=n.C2CRemainingUnreadList,c=n.C2CPairUnreadList;if(t._cookie=o,Jc(o));else if(0===r||1===r){if(a)t.getModule(vl).onMessage({head:{},body:{eventArray:a,isInstantMessage:t._onlineSyncFlag,isSyncingEnded:!1}});t.getModule(al).onNewC2CMessage({dataList:s,isInstantMessage:!1,C2CRemainingUnreadList:i,C2CPairUnreadList:c}),t._startSync({cookie:o,syncFlag:r,isOnlineSync:0})}else if(2===r){if(a)t.getModule(vl).onMessage({head:{},body:{eventArray:a,isInstantMessage:t._onlineSyncFlag,isSyncingEnded:!0}});t.getModule(al).onNewC2CMessage({dataList:s,isInstantMessage:t._onlineSyncFlag,C2CRemainingUnreadList:i,C2CPairUnreadList:c})}})).catch((function(e){Qi.error(\"\".concat(t._className,\"._startSync failed. error:\"),e)}))}},{key:\"startOnlineSync\",value:function(){Qi.log(\"\".concat(this._className,\".startOnlineSync\")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}},{key:\"startSyncOnReconnected\",value:function(){Qi.log(\"\".concat(this._className,\".startSyncOnReconnected.\")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._onlineSyncFlag=!1,this._cookie=\"\"}}]),n}(Al),Wm={request:{toAccount:\"To_Account\",fromAccount:\"From_Account\",to:\"To_Account\",from:\"From_Account\",groupID:\"GroupId\",groupAtUserID:\"GroupAt_Account\",extension:\"Ext\",data:\"Data\",description:\"Desc\",elements:\"MsgBody\",sizeType:\"Type\",downloadFlag:\"Download_Flag\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",videoUrl:\"\",imageUrl:\"URL\",fileUrl:\"Url\",uuid:\"UUID\",priority:\"MsgPriority\",receiverUserID:\"To_Account\",receiverGroupID:\"GroupId\",messageSender:\"SenderId\",messageReceiver:\"ReceiverId\",nick:\"From_AccountNick\",avatar:\"From_AccountHeadurl\",messageNumber:\"MsgNum\",pbDownloadKey:\"PbMsgKey\",downloadKey:\"JsonMsgKey\",applicationType:\"PendencyType\",userIDList:\"To_Account\",groupNameList:\"GroupName\",userID:\"To_Account\",groupAttributeList:\"GroupAttr\",mainSequence:\"AttrMainSeq\",avChatRoomKey:\"BytesKey\",attributeControl:\"AttrControl\",sequence:\"seq\",messageControlInfo:\"SendMsgControl\",updateSequence:\"UpdateSeq\",clientTime:\"MsgClientTime\",sequenceList:\"MsgSeqList\"},response:{MsgPriority:\"priority\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\",Download_Flag:\"downloadFlag\",GroupId:\"groupID\",Member_Account:\"userID\",MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",MsgSeq:\"sequence\",MsgRandom:\"random\",MsgTime:\"time\",MsgTimeStamp:\"time\",MsgContent:\"content\",MsgBody:\"elements\",From_AccountNick:\"nick\",From_AccountHeadurl:\"avatar\",GroupWithdrawInfoArray:\"revokedInfos\",GroupReadInfoArray:\"groupMessageReadNotice\",LastReadMsgSeq:\"lastMessageSeq\",WithdrawC2cMsgNotify:\"c2cMessageRevokedNotify\",C2cWithdrawInfoArray:\"revokedInfos\",C2cReadedReceipt:\"c2cMessageReadReceipt\",ReadC2cMsgNotify:\"c2cMessageReadNotice\",LastReadTime:\"peerReadTime\",MsgRand:\"random\",MsgType:\"type\",MsgShow:\"messageShow\",NextMsgSeq:\"nextMessageSeq\",FaceUrl:\"avatar\",ProfileDataMod:\"profileModify\",Profile_Account:\"userID\",ValueBytes:\"value\",ValueNum:\"value\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgFrom_AccountExtraInfo:\"messageFromAccountExtraInformation\",Operator_Account:\"operatorID\",OpType:\"operationType\",ReportType:\"operationType\",UserId:\"userID\",User_Account:\"userID\",List_Account:\"userIDList\",MsgOperatorMemberExtraInfo:\"operatorInfo\",MsgMemberExtraInfo:\"memberInfoList\",ImageUrl:\"avatar\",NickName:\"nick\",MsgGroupNewInfo:\"newGroupProfile\",MsgAppDefinedData:\"groupCustomField\",Owner_Account:\"ownerID\",GroupFaceUrl:\"avatar\",GroupIntroduction:\"introduction\",GroupNotification:\"notification\",GroupApplyJoinOption:\"joinOption\",MsgKey:\"messageKey\",GroupInfo:\"groupProfile\",ShutupTime:\"muteTime\",Desc:\"description\",Ext:\"extension\",GroupAt_Account:\"groupAtUserID\",MsgNum:\"messageNumber\",PbMsgKey:\"pbDownloadKey\",JsonMsgKey:\"downloadKey\",MsgModifiedFlag:\"isModified\",PendencyItem:\"applicationItem\",PendencyType:\"applicationType\",AddTime:\"time\",AddSource:\"source\",AddWording:\"wording\",ProfileImImage:\"avatar\",PendencyAdd:\"friendApplicationAdded\",FrienPencydDel_Account:\"friendApplicationDeletedUserIDList\",Peer_Account:\"userID\",GroupAttr:\"groupAttributeList\",GroupAttrAry:\"groupAttributeList\",AttrMainSeq:\"mainSequence\",seq:\"sequence\",GroupAttrOption:\"groupAttributeOption\",BytesChangedKeys:\"changedKeyList\",GroupAttrInfo:\"groupAttributeList\",GroupAttrSeq:\"mainSequence\",PushChangedAttrValFlag:\"hasChangedAttributeInfo\",SubKeySeq:\"sequence\",Val:\"value\",MsgGroupFromCardName:\"senderNameCard\",MsgGroupFromNickName:\"senderNick\",C2cNick:\"peerNick\",C2cImage:\"peerAvatar\",SendMsgControl:\"messageControlInfo\",NoLastMsg:\"excludedFromLastMessage\",NoUnread:\"excludedFromUnreadCount\",UpdateSeq:\"updateSequence\",MuteNotifications:\"muteFlag\",MsgClientTime:\"clientTime\",TinyId:\"tinyID\",GroupMsgReceiptList:\"readReceiptList\",ReadNum:\"readCount\",UnreadNum:\"unreadCount\"},ignoreKeyWord:[\"C2C\",\"ID\",\"USP\"]},Ym=Pt.trim;function $m(e,t){if(\"string\"!=typeof e&&!Array.isArray(e))throw new TypeError(\"Expected the input to be `string | string[]`\");t=Object.assign({pascalCase:!1},t);var n;return 0===(e=Array.isArray(e)?e.map((function(e){return e.trim()})).filter((function(e){return e.length})).join(\"-\"):e.trim()).length?\"\":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=zm(e)),e=e.replace(/^[_.\\\\- ]+/,\"\").toLowerCase().replace(/[_.\\\\- ]+(\\\\w|$)/g,(function(e,t){return t.toUpperCase()})).replace(/\\\\d+(\\\\w|$)/g,(function(e){return e.toUpperCase()})),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)}ke({target:\"String\",proto:!0,forced:function(e){return r((function(){return!!Rt[e]()||\"​᠎\"!=\"​᠎\"[e]()||Rt[e].name!==e}))}(\"trim\")},{trim:function(){return Ym(this)}});var zm=function(e){for(var t=!1,n=!1,o=!1,r=0;r<e.length;r++){var a=e[r];t&&/[a-zA-Z]/.test(a)&&a.toUpperCase()===a?(e=e.slice(0,r)+\"-\"+e.slice(r),t=!1,o=n,n=!0,r++):n&&o&&/[a-zA-Z]/.test(a)&&a.toLowerCase()===a?(e=e.slice(0,r-1)+\"-\"+e.slice(r-1),o=n,n=!1,t=!0):(t=a.toLowerCase()===a&&a.toUpperCase()!==a,o=n,n=a.toUpperCase()===a&&a.toLowerCase()!==a)}return e};function Jm(e,t){var n=0;return function e(t,o){if(++n>100)return n--,t;if(pc(t)){var r=t.map((function(t){return lc(t)?e(t,o):t}));return n--,r}if(lc(t)){var a=(s=t,i=function(e,t){if(!vc(t))return!1;if((r=t)!==$m(r))for(var n=0;n<Wm.ignoreKeyWord.length&&!t.includes(Wm.ignoreKeyWord[n]);n++);var r;return gc(o[t])?function(e){return\"OPPOChannelID\"===e?e:e[0].toUpperCase()+$m(e).slice(1)}(t):o[t]},c=Object.create(null),Object.keys(s).forEach((function(e){var t=i(s[e],e);t&&(c[t]=s[e])})),c);return a=qc(a,(function(t,n){return pc(t)||lc(t)?e(t,o):t})),n--,a}var s,i,c}(e,t)}function Xm(e,t){if(pc(e))return e.map((function(e){return lc(e)?Xm(e,t):e}));if(lc(e)){var n=(o=e,r=function(e,n){return gc(t[n])?$m(n):t[n]},a={},Object.keys(o).forEach((function(e){a[r(o[e],e)]=o[e]})),a);return n=qc(n,(function(e){return pc(e)||lc(e)?Xm(e,t):e}))}var o,r,a}var Qm=\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof DataView,Zm=function(e){if(void 0===e)return 0;var t=ae(e),n=ie(t);if(t!==n)throw RangeError(\"Wrong length or index\");return n},ev=Math.abs,tv=Math.pow,nv=Math.floor,ov=Math.log,rv=Math.LN2,av=function(e,t,n){var o,r,a,s=new Array(n),i=8*n-t-1,c=(1<<i)-1,u=c>>1,l=23===t?tv(2,-24)-tv(2,-77):0,d=e<0||0===e&&1/e<0?1:0,p=0;for((e=ev(e))!=e||e===1/0?(r=e!=e?1:0,o=c):(o=nv(ov(e)/rv),e*(a=tv(2,-o))<1&&(o--,a*=2),(e+=o+u>=1?l/a:l*tv(2,1-u))*a>=2&&(o++,a/=2),o+u>=c?(r=0,o=c):o+u>=1?(r=(e*a-1)*tv(2,t),o+=u):(r=e*tv(2,u-1)*tv(2,t),o=0));t>=8;s[p++]=255&r,r/=256,t-=8);for(o=o<<t|r,i+=t;i>0;s[p++]=255&o,o/=256,i-=8);return s[--p]|=128*d,s},sv=function(e,t){var n,o=e.length,r=8*o-t-1,a=(1<<r)-1,s=a>>1,i=r-7,c=o-1,u=e[c--],l=127&u;for(u>>=7;i>0;l=256*l+e[c],c--,i-=8);for(n=l&(1<<-i)-1,l>>=-i,i+=t;i>0;n=256*n+e[c],c--,i-=8);if(0===l)l=1-s;else{if(l===a)return n?NaN:u?-1/0:1/0;n+=tv(2,t),l-=s}return(u?-1:1)*n*tv(2,l-t)},iv=function(e){for(var t=Le(this),n=ie(t.length),o=arguments.length,r=le(o>1?arguments[1]:void 0,n),a=o>2?arguments[2]:void 0,s=void 0===a?n:le(a,n);s>r;)t[r++]=e;return t},cv=me.f,uv=N.f,lv=Q.get,dv=Q.set,pv=o.ArrayBuffer,gv=pv,hv=o.DataView,fv=hv&&hv.prototype,_v=Object.prototype,mv=o.RangeError,vv=av,Mv=sv,yv=function(e){return[255&e]},Iv=function(e){return[255&e,e>>8&255]},Ev=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Tv=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Sv=function(e){return vv(e,23,4)},Cv=function(e){return vv(e,52,8)},Av=function(e,t){uv(e.prototype,t,{get:function(){return lv(this)[t]}})},Dv=function(e,t,n,o){var r=Zm(n),a=lv(e);if(r+t>a.byteLength)throw mv(\"Wrong index\");var s=lv(a.buffer).bytes,i=r+a.byteOffset,c=s.slice(i,i+t);return o?c:c.reverse()},Nv=function(e,t,n,o,r,a){var s=Zm(n),i=lv(e);if(s+t>i.byteLength)throw mv(\"Wrong index\");for(var c=lv(i.buffer).bytes,u=s+i.byteOffset,l=o(+r),d=0;d<t;d++)c[u+d]=l[a?d:t-d-1]};if(Qm){if(!r((function(){pv(1)}))||!r((function(){new pv(-1)}))||r((function(){return new pv,new pv(1.5),new pv(NaN),\"ArrayBuffer\"!=pv.name}))){for(var kv,Ov=(gv=function(e){return kr(this,gv),new pv(Zm(e))}).prototype=pv.prototype,Rv=cv(pv),Lv=0;Rv.length>Lv;)(kv=Rv[Lv++])in gv||k(gv,kv,pv[kv]);Ov.constructor=gv}an&&zt(fv)!==_v&&an(fv,_v);var bv=new hv(new gv(2)),wv=fv.setInt8;bv.setInt8(0,2147483648),bv.setInt8(1,2147483649),!bv.getInt8(0)&&bv.getInt8(1)||Ar(fv,{setInt8:function(e,t){wv.call(this,e,t<<24>>24)},setUint8:function(e,t){wv.call(this,e,t<<24>>24)}},{unsafe:!0})}else gv=function(e){kr(this,gv,\"ArrayBuffer\");var t=Zm(e);dv(this,{bytes:iv.call(new Array(t),0),byteLength:t}),a||(this.byteLength=t)},hv=function(e,t,n){kr(this,hv,\"DataView\"),kr(e,gv,\"DataView\");var o=lv(e).byteLength,r=ae(t);if(r<0||r>o)throw mv(\"Wrong offset\");if(r+(n=void 0===n?o-r:ie(n))>o)throw mv(\"Wrong length\");dv(this,{buffer:e,byteLength:n,byteOffset:r}),a||(this.buffer=e,this.byteLength=n,this.byteOffset=r)},a&&(Av(gv,\"byteLength\"),Av(hv,\"buffer\"),Av(hv,\"byteLength\"),Av(hv,\"byteOffset\")),Ar(hv.prototype,{getInt8:function(e){return Dv(this,1,e)[0]<<24>>24},getUint8:function(e){return Dv(this,1,e)[0]},getInt16:function(e){var t=Dv(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Dv(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Tv(Dv(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Tv(Dv(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Mv(Dv(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Mv(Dv(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Nv(this,1,e,yv,t)},setUint8:function(e,t){Nv(this,1,e,yv,t)},setInt16:function(e,t){Nv(this,2,e,Iv,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Nv(this,2,e,Iv,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Nv(this,4,e,Ev,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Nv(this,4,e,Ev,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Nv(this,4,e,Sv,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Nv(this,8,e,Cv,t,arguments.length>2?arguments[2]:void 0)}});tn(gv,\"ArrayBuffer\"),tn(hv,\"DataView\");var Gv={ArrayBuffer:gv,DataView:hv},Pv=Gv.ArrayBuffer,Uv=Gv.DataView,Fv=Pv.prototype.slice,qv=r((function(){return!new Pv(2).slice(1,void 0).byteLength}));ke({target:\"ArrayBuffer\",proto:!0,unsafe:!0,forced:qv},{slice:function(e,t){if(void 0!==Fv&&void 0===t)return Fv.call(A(this),e);for(var n=A(this).byteLength,o=le(e,n),r=le(void 0===t?n:t,n),a=new(Lr(this,Pv))(ie(r-o)),s=new Uv(this),i=new Uv(a),c=0;o<r;)i.setUint8(c++,s.getUint8(o++));return a}});var xv=String.fromCharCode,Vv=String.fromCodePoint,Kv=!!Vv&&1!=Vv.length;ke({target:\"String\",stat:!0,forced:Kv},{fromCodePoint:function(e){for(var t,n=[],o=arguments.length,r=0;o>r;){if(t=+arguments[r++],le(t,1114111)!==t)throw RangeError(t+\" is not a valid code point\");n.push(t<65536?xv(t):xv(55296+((t-=65536)>>10),t%1024+56320))}return n.join(\"\")}});var Bv,Hv=N.f,jv=o.Int8Array,Wv=jv&&jv.prototype,Yv=o.Uint8ClampedArray,$v=Yv&&Yv.prototype,zv=jv&&zt(jv),Jv=Wv&&zt(Wv),Xv=Object.prototype,Qv=Xv.isPrototypeOf,Zv=qe(\"toStringTag\"),eM=K(\"TYPED_ARRAY_TAG\"),tM=Qm&&!!an&&\"Opera\"!==dt(o.opera),nM=!1,oM={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},rM=function(e){return _(e)&&M(oM,dt(e))};for(Bv in oM)o[Bv]||(tM=!1);if((!tM||\"function\"!=typeof zv||zv===Function.prototype)&&(zv=function(){throw TypeError(\"Incorrect invocation\")},tM))for(Bv in oM)o[Bv]&&an(o[Bv],zv);if((!tM||!Jv||Jv===Xv)&&(Jv=zv.prototype,tM))for(Bv in oM)o[Bv]&&an(o[Bv].prototype,Jv);if(tM&&zt($v)!==Jv&&an($v,Jv),a&&!M(Jv,Zv))for(Bv in nM=!0,Hv(Jv,Zv,{get:function(){return _(this)?this[eM]:void 0}}),oM)o[Bv]&&k(o[Bv],eM,Bv);var aM={NATIVE_ARRAY_BUFFER_VIEWS:tM,TYPED_ARRAY_TAG:nM&&eM,aTypedArray:function(e){if(rM(e))return e;throw TypeError(\"Target is not a typed array\")},aTypedArrayConstructor:function(e){if(an){if(Qv.call(zv,e))return e}else for(var t in oM)if(M(oM,Bv)){var n=o[t];if(n&&(e===n||Qv.call(n,e)))return e}throw TypeError(\"Target is not a typed array constructor\")},exportTypedArrayMethod:function(e,t,n){if(a){if(n)for(var r in oM){var s=o[r];s&&M(s.prototype,e)&&delete s.prototype[e]}Jv[e]&&!n||Z(Jv,e,n?t:tM&&Wv[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,s;if(a){if(an){if(n)for(r in oM)(s=o[r])&&M(s,e)&&delete s[e];if(zv[e]&&!n)return;try{return Z(zv,e,n?t:tM&&jv[e]||t)}catch(sI){}}for(r in oM)!(s=o[r])||s[e]&&!n||Z(s,e,t)}},isView:function(e){var t=dt(e);return\"DataView\"===t||M(oM,t)},isTypedArray:rM,TypedArray:zv,TypedArrayPrototype:Jv},sM=aM.NATIVE_ARRAY_BUFFER_VIEWS,iM=o.ArrayBuffer,cM=o.Int8Array,uM=!sM||!r((function(){cM(1)}))||!r((function(){new cM(-1)}))||!Mt((function(e){new cM,new cM(null),new cM(1.5),new cM(e)}),!0)||r((function(){return 1!==new cM(new iM(2),1,void 0).length})),lM=function(e,t){var n=function(e){var t=ae(e);if(t<0)throw RangeError(\"The argument can\\'t be less than 0\");return t}(e);if(n%t)throw RangeError(\"Wrong offset\");return n},dM=aM.aTypedArrayConstructor,pM=function(e){var t,n,o,r,a,s,i=Le(e),c=arguments.length,u=c>1?arguments[1]:void 0,l=void 0!==u,d=gt(i);if(null!=d&&!at(d))for(s=(a=d.call(i)).next,i=[];!(r=s.call(a)).done;)i.push(r.value);for(l&&c>2&&(u=Re(u,arguments[2],2)),n=ie(i.length),o=new(dM(this))(n),t=0;n>t;t++)o[t]=l?u(i[t],t):i[t];return o};t((function(e){var t=me.f,n=He.forEach,r=Q.get,s=Q.set,i=N.f,c=C.f,l=Math.round,d=o.RangeError,p=Gv.ArrayBuffer,g=Gv.DataView,h=aM.NATIVE_ARRAY_BUFFER_VIEWS,f=aM.TYPED_ARRAY_TAG,v=aM.TypedArray,y=aM.TypedArrayPrototype,I=aM.aTypedArrayConstructor,E=aM.isTypedArray,T=function(e,t){for(var n=0,o=t.length,r=new(I(e))(o);o>n;)r[n]=t[n++];return r},S=function(e,t){i(e,t,{get:function(){return r(this)[t]}})},A=function(e){var t;return e instanceof p||\"ArrayBuffer\"==(t=dt(e))||\"SharedArrayBuffer\"==t},D=function(e,t){return E(e)&&\"symbol\"!=typeof t&&t in e&&String(+t)==String(t)},O=function(e,t){return D(e,t=m(t,!0))?u(2,e[t]):c(e,t)},R=function(e,t,n){return!(D(e,t=m(t,!0))&&_(n)&&M(n,\"value\"))||M(n,\"get\")||M(n,\"set\")||n.configurable||M(n,\"writable\")&&!n.writable||M(n,\"enumerable\")&&!n.enumerable?i(e,t,n):(e[t]=n.value,e)};a?(h||(C.f=O,N.f=R,S(y,\"buffer\"),S(y,\"byteOffset\"),S(y,\"byteLength\"),S(y,\"length\")),ke({target:\"Object\",stat:!0,forced:!h},{getOwnPropertyDescriptor:O,defineProperty:R}),e.exports=function(e,a,c){var u=e.match(/\\\\d+$/)[0]/8,m=e+(c?\"Clamped\":\"\")+\"Array\",M=\"get\"+e,I=\"set\"+e,S=o[m],C=S,D=C&&C.prototype,N={},O=function(e,t){i(e,t,{get:function(){return function(e,t){var n=r(e);return n.view[M](t*u+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var o=r(e);c&&(n=(n=l(n))<0?0:n>255?255:255&n),o.view[I](t*u+o.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};h?uM&&(C=a((function(e,t,n,o){return kr(e,C,m),tr(_(t)?A(t)?void 0!==o?new S(t,lM(n,u),o):void 0!==n?new S(t,lM(n,u)):new S(t):E(t)?T(C,t):pM.call(C,t):new S(Zm(t)),e,C)})),an&&an(C,v),n(t(S),(function(e){e in C||k(C,e,S[e])})),C.prototype=D):(C=a((function(e,t,n,o){kr(e,C,m);var r,a,i,c=0,l=0;if(_(t)){if(!A(t))return E(t)?T(C,t):pM.call(C,t);r=t,l=lM(n,u);var h=t.byteLength;if(void 0===o){if(h%u)throw d(\"Wrong length\");if((a=h-l)<0)throw d(\"Wrong length\")}else if((a=ie(o)*u)+l>h)throw d(\"Wrong length\");i=a/u}else i=Zm(t),r=new p(a=i*u);for(s(e,{buffer:r,byteOffset:l,byteLength:a,length:i,view:new g(r)});c<i;)O(e,c++)})),an&&an(C,v),D=C.prototype=kt(y)),D.constructor!==C&&k(D,\"constructor\",C),f&&k(D,f,m),N[m]=C,ke({global:!0,forced:C!=S,sham:!h},N),\"BYTES_PER_ELEMENT\"in C||k(C,\"BYTES_PER_ELEMENT\",u),\"BYTES_PER_ELEMENT\"in D||k(D,\"BYTES_PER_ELEMENT\",u),Nr(m)}):e.exports=function(){}}))(\"Uint8\",(function(e){return function(t,n,o){return e(this,t,n,o)}}));var gM=Math.min,hM=[].copyWithin||function(e,t){var n=Le(this),o=ie(n.length),r=le(e,o),a=le(t,o),s=arguments.length>2?arguments[2]:void 0,i=gM((void 0===s?o:le(s,o))-a,o-r),c=1;for(a<r&&r<a+i&&(c=-1,a+=i-1,r+=i-1);i-- >0;)a in n?n[r]=n[a]:delete n[r],r+=c,a+=c;return n},fM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"copyWithin\",(function(e,t){return hM.call(fM(this),e,t,arguments.length>2?arguments[2]:void 0)}));var _M=He.every,mM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"every\",(function(e){return _M(mM(this),e,arguments.length>1?arguments[1]:void 0)}));var vM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"fill\",(function(e){return iv.apply(vM(this),arguments)}));var MM=He.filter,yM=aM.aTypedArray,IM=aM.aTypedArrayConstructor;(0,aM.exportTypedArrayMethod)(\"filter\",(function(e){for(var t=MM(yM(this),e,arguments.length>1?arguments[1]:void 0),n=Lr(this,this.constructor),o=0,r=t.length,a=new(IM(n))(r);r>o;)a[o]=t[o++];return a}));var EM=He.find,TM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"find\",(function(e){return EM(TM(this),e,arguments.length>1?arguments[1]:void 0)}));var SM=He.findIndex,CM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"findIndex\",(function(e){return SM(CM(this),e,arguments.length>1?arguments[1]:void 0)}));var AM=He.forEach,DM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"forEach\",(function(e){AM(DM(this),e,arguments.length>1?arguments[1]:void 0)}));var NM=pe.includes,kM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"includes\",(function(e){return NM(kM(this),e,arguments.length>1?arguments[1]:void 0)}));var OM=pe.indexOf,RM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"indexOf\",(function(e){return OM(RM(this),e,arguments.length>1?arguments[1]:void 0)}));var LM=qe(\"iterator\"),bM=o.Uint8Array,wM=wo.values,GM=wo.keys,PM=wo.entries,UM=aM.aTypedArray,FM=aM.exportTypedArrayMethod,qM=bM&&bM.prototype[LM],xM=!!qM&&(\"values\"==qM.name||null==qM.name),VM=function(){return wM.call(UM(this))};FM(\"entries\",(function(){return PM.call(UM(this))})),FM(\"keys\",(function(){return GM.call(UM(this))})),FM(\"values\",VM,!xM),FM(LM,VM,!xM);var KM=aM.aTypedArray,BM=[].join;(0,aM.exportTypedArrayMethod)(\"join\",(function(e){return BM.apply(KM(this),arguments)}));var HM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"lastIndexOf\",(function(e){return d_.apply(HM(this),arguments)}));var jM=He.map,WM=aM.aTypedArray,YM=aM.aTypedArrayConstructor;(0,aM.exportTypedArrayMethod)(\"map\",(function(e){return jM(WM(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(YM(Lr(e,e.constructor)))(t)}))}));var $M=function(e){return function(t,n,o,r){Oe(n);var a=Le(t),s=g(a),i=ie(a.length),c=e?i-1:0,u=e?-1:1;if(o<2)for(;;){if(c in s){r=s[c],c+=u;break}if(c+=u,e?c<0:i<=c)throw TypeError(\"Reduce of empty array with no initial value\")}for(;e?c>=0:i>c;c+=u)c in s&&(r=n(r,s[c],c,a));return r}},zM={left:$M(!1),right:$M(!0)},JM=zM.left,XM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"reduce\",(function(e){return JM(XM(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var QM=zM.right,ZM=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"reduceRight\",(function(e){return QM(ZM(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var ey=aM.aTypedArray,ty=aM.exportTypedArrayMethod,ny=Math.floor;ty(\"reverse\",(function(){for(var e,t=ey(this).length,n=ny(t/2),o=0;o<n;)e=this[o],this[o++]=this[--t],this[t]=e;return this}));var oy=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"set\",(function(e){oy(this);var t=lM(arguments.length>1?arguments[1]:void 0,1),n=this.length,o=Le(e),r=ie(o.length),a=0;if(r+t>n)throw RangeError(\"Wrong length\");for(;a<r;)this[t+a]=o[a++]}),r((function(){new Int8Array(1).set({})})));var ry=aM.aTypedArray,ay=aM.aTypedArrayConstructor,sy=[].slice;(0,aM.exportTypedArrayMethod)(\"slice\",(function(e,t){for(var n=sy.call(ry(this),e,t),o=Lr(this,this.constructor),r=0,a=n.length,s=new(ay(o))(a);a>r;)s[r]=n[r++];return s}),r((function(){new Int8Array(1).slice()})));var iy=He.some,cy=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"some\",(function(e){return iy(cy(this),e,arguments.length>1?arguments[1]:void 0)}));var uy=aM.aTypedArray,ly=[].sort;(0,aM.exportTypedArrayMethod)(\"sort\",(function(e){return ly.call(uy(this),e)}));var dy=aM.aTypedArray;(0,aM.exportTypedArrayMethod)(\"subarray\",(function(e,t){var n=dy(this),o=n.length,r=le(e,o);return new(Lr(n,n.constructor))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,ie((void 0===t?o:le(t,o))-r))}));var py=o.Int8Array,gy=aM.aTypedArray,hy=aM.exportTypedArrayMethod,fy=[].toLocaleString,_y=[].slice,vy=!!py&&r((function(){fy.call(new py(1))}));hy(\"toLocaleString\",(function(){return fy.apply(vy?_y.call(gy(this)):gy(this),arguments)}),r((function(){return[1,2].toLocaleString()!=new py([1,2]).toLocaleString()}))||!r((function(){py.prototype.toLocaleString.call([1,2])})));var My=aM.exportTypedArrayMethod,yy=o.Uint8Array,Iy=yy&&yy.prototype||{},Ey=[].toString,Ty=[].join;r((function(){Ey.call({})}))&&(Ey=function(){return Ty.call(this)});var Sy=Iy.toString!=Ey;My(\"toString\",Ey,Sy);var Cy=String.fromCharCode,Ay=function(e){var t=0|e.charCodeAt(0);if(55296<=t)if(t<56320){var n=0|e.charCodeAt(1);if(56320<=n&&n<=57343){if((t=(t<<10)+n-56613888|0)>65535)return Cy(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533}else t<=57343&&(t=65533);return t<=2047?Cy(192|t>>>6,128|63&t):Cy(224|t>>>12,128|t>>>6&63,128|63&t)},Dy=function(e){for(var t=void 0===e?\"\":(\"\"+e).replace(/[\\\\x80-\\\\uD7ff\\\\uDC00-\\\\uFFFF]|[\\\\uD800-\\\\uDBFF][\\\\uDC00-\\\\uDFFF]?/g,Ay),n=0|t.length,o=new Uint8Array(n),r=0;r<n;r=r+1|0)o[r]=0|t.charCodeAt(r);return o},Ny=function(e){for(var t=new Uint8Array(e),n=\"\",o=0,r=t.length;o<r;){var a=t[o],s=0,i=0;if(a<=127?(s=0,i=255&a):a<=223?(s=1,i=31&a):a<=239?(s=2,i=15&a):a<=244&&(s=3,i=7&a),r-o-s>0)for(var c=0;c<s;)i=i<<6|63&(a=t[o+c+1]),c+=1;else i=65533,s=r-o;n+=String.fromCodePoint(i),o+=s+1}return n},ky=function(){function e(t){yn(this,e),this._handler=t;var n=t.getURL();if(this._socket=null,this._workerSocket=null,this._id=Sc(),this._handler.getIsWorkerEnabled()){var o=URL.createObjectURL(new Blob([\\';let _socket = null;onmessage = function(event) {  if (event.data.cmd === \"start\") {    const url = event.data.url;    _socket = new WebSocket(url);    _socket.binaryType = \"arraybuffer\";    _socket.onopen = function() {      postMessage({ callback: \"onOpen\" });    };    _socket.onclose = function(e) {      postMessage({ callback: \"onOpen\", e: { code: e.code, reason: e.reason } });    };    _socket.onmessage = function(e) {      postMessage({ callback: \"onMessage\", data: e.data });    };    _socket.onerror = function(e) {      postMessage({ callback: \"onError\", e: { isTrusted: \"true\" } });    };  } else if (event.data.cmd === \"sendMessage\") {    if (_socket !== null) {      _socket.send(event.data.data);    }  } else if (event.data.cmd === \"stop\") {    if (_socket !== null) {      _socket.close(event.data.code);      _socket = null;    }  }};\\'],{type:\"application/javascript; charset=utf-8\"}));this._workerSocket=new Worker(o);var r=this;this._workerSocket.onmessage=function(e){var t=e.data,n=t.callback,o=t.e;\"onOpen\"===n?r._onOpen():\"onClose\"===n?r._onClose(o):\"onError\"===n?r._onError(o):\"onMessage\"===n&&r._onMessage(e.data)},this._workerSocket.postMessage({cmd:\"start\",id:this._id,url:n})}else pi?ui?(hi.connectSocket({url:n,header:{\"content-type\":\"application/json\"}}),hi.onSocketClose(this._onClose.bind(this)),hi.onSocketOpen(this._onOpen.bind(this)),hi.onSocketMessage(this._onMessage.bind(this)),hi.onSocketError(this._onError.bind(this))):(this._socket=hi.connectSocket({url:n,header:{\"content-type\":\"application/json\"},complete:function(){}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):gi&&(this._socket=new WebSocket(n),this._socket.binaryType=\"arraybuffer\",this._socket.onopen=this._onOpen.bind(this),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this));this._canIUseBinaryFrame=t.canIUseBinaryFrame()}return En(e,[{key:\"getID\",value:function(){return this._id}},{key:\"_onOpen\",value:function(){this._handler.onOpen({id:this._id})}},{key:\"_onClose\",value:function(e){this._handler.onClose({id:this._id,e:e})}},{key:\"_onMessage\",value:function(e){this._handler.onMessage({data:this._canIUseBinaryFrame?Ny(e.data):e.data})}},{key:\"_onError\",value:function(e){this._handler.onError({id:this._id,e:e})}},{key:\"setIsWorkerEnabled\",value:function(e){this._isWorkerEnabled=!0}},{key:\"close\",value:function(e){if(this._workerSocket&&(this._workerSocket.postMessage({cmd:\"stop\",code:e}),this._workerSocket.terminate(),this._workerSocket=null),ui)return hi.offSocketClose(),hi.offSocketMessage(),hi.offSocketOpen(),hi.offSocketError(),void hi.closeSocket();this._socket&&(pi?(this._socket.onClose((function(){})),this._socket.onOpen((function(){})),this._socket.onMessage((function(){})),this._socket.onError((function(){}))):gi&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),ci?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}},{key:\"send\",value:function(e){if(this._workerSocket)this._workerSocket.postMessage({cmd:\"sendMessage\",data:this._canIUseBinaryFrame?Dy(e.data).buffer:e.data});else{if(ui)return void hi.sendSocketMessage({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}});this._socket&&(pi?this._socket.send({data:this._canIUseBinaryFrame?Dy(e.data).buffer:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):gi&&this._socket.send(this._canIUseBinaryFrame?Dy(e.data).buffer:e.data))}}}]),e}(),Oy=4e3,Ry=4001,Ly=\"connected\",by=\"connecting\",wy=\"disconnected\",Gy=function(){function e(t){yn(this,e),this._channelModule=t,this._className=\"SocketHandler\",this._promiseMap=new Map,this._readyState=wy,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=Sc(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url=\"\",this._onOpenTs=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0,this._setWebsocketHost(),this._initConnection()}return En(e,[{key:\"_setWebsocketHost\",value:function(){var e=this._channelModule.getModule(ll),t=$s;this._channelModule.isOversea()&&(t=zs),e.isSingaporeSite()?t=Js:e.isKoreaSite()?t=Xs:e.isGermanySite()?t=Qs:e.isIndiaSite()&&(t=Zs),ei.HOST.setCurrent(t)}},{key:\"_initConnection\",value:function(){gc(ei.HOST.CURRENT.BACKUP)||\"\"===this._url?this._url=ei.HOST.CURRENT.DEFAULT:this._url===ei.HOST.CURRENT.DEFAULT?this._url=ei.HOST.CURRENT.BACKUP:this._url===ei.HOST.CURRENT.BACKUP&&(this._url=ei.HOST.CURRENT.DEFAULT);var e=this._channelModule.getModule(ll).getProxyServer();Jc(e)||(this._url=e),this._connect(),this._nextPingTs=0}},{key:\"onCheckTimer\",value:function(e){e%1==0&&this._checkPromiseMap()}},{key:\"_checkPromiseMap\",value:function(){var e=this;0!==this._promiseMap.size&&this._promiseMap.forEach((function(t,n){var o=t.reject,r=t.timestamp;Date.now()-r>=15e3&&(Qi.log(\"\".concat(e._className,\"._checkPromiseMap request timeout, delete requestID:\").concat(n)),e._promiseMap.delete(n),o(new A_({code:zd.NETWORK_TIMEOUT,message:Jd.NETWORK_TIMEOUT})),e._channelModule.onRequestTimeout(n))}))}},{key:\"onOpen\",value:function(e){this._onOpenTs=Date.now();var t=e.id;this._socketID=t;var n=Date.now()-this._startTs;Qi.log(\"\".concat(this._className,\"._onOpen cost \").concat(n,\" ms. socketID:\").concat(t)),new dp(yp).setMessage(n).setCostTime(n).setMoreMessage(\"socketID:\".concat(t)).end(),e.id===this._socketID&&(this._readyState=Ly,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._channelModule.onReconnected(),this._reConnectFlag=!1),this._channelModule.onOpen())}},{key:\"onClose\",value:function(e){var t=new dp(Ip),n=e.id,o=e.e,r=\"sourceSocketID:\".concat(n,\" currentSocketID:\").concat(this._socketID,\" code:\").concat(o.code,\" reason:\").concat(o.reason),a=0;0!==this._onOpenTs&&(a=Date.now()-this._onOpenTs),t.setMessage(a).setCostTime(a).setMoreMessage(r).setCode(o.code).end(),Qi.log(\"\".concat(this._className,\"._onClose \").concat(r,\" onlineTime:\").concat(a)),n===this._socketID&&(this._readyState=wy,a<1e3?this._channelModule.onReconnectFailed():this._channelModule.onClose())}},{key:\"onError\",value:function(e){var t=e.id,n=e.e,o=\"sourceSocketID:\".concat(t,\" currentSocketID:\").concat(this._socketID);new dp(Ep).setMessage(n.errMsg||Ec(n)).setMoreMessage(o).setLevel(\"error\").end(),Qi.warn(\"\".concat(this._className,\"._onError\"),n,o),t===this._socketID&&(this._readyState=\"\",this._channelModule.onError())}},{key:\"onMessage\",value:function(e){var t;try{t=JSON.parse(e.data)}catch(sI){new dp(Bp).setMessage(e.data).end()}if(t&&t.head){var n=this._getRequestIDFromHead(t.head),o=jc(t.head),r=Xm(t.body,this._getResponseKeyMap(o));if(Qi.debug(\"\".concat(this._className,\".onMessage ret:\").concat(JSON.stringify(r),\" requestID:\").concat(n,\" has:\").concat(this._promiseMap.has(n))),this._setNextPingTs(),this._promiseMap.has(n)){var a=this._promiseMap.get(n),s=a.resolve,i=a.reject,c=a.timestamp;return this._promiseMap.delete(n),this._calcRTT(c),void(r.errorCode&&0!==r.errorCode?(this._channelModule.onErrorCodeNotZero(r),i(new A_({code:r.errorCode,message:r.errorInfo||\"\"}))):s(y_(r)))}this._channelModule.onMessage({head:t.head,body:r})}}},{key:\"_calcRTT\",value:function(e){var t=Date.now()-e;this._channelModule.getModule(Sl).addRTT(t)}},{key:\"_connect\",value:function(){this._startTs=Date.now(),this._onOpenTs=0,this._socket=new ky(this),this._socketID=this._socket.getID(),this._readyState=by,Qi.log(\"\".concat(this._className,\"._connect isWorkerEnabled:\").concat(this.getIsWorkerEnabled(),\" socketID:\").concat(this._socketID,\" url:\").concat(this.getURL())),new dp(Mp).setMessage(\"socketID:\".concat(this._socketID,\" url:\").concat(this.getURL())).end()}},{key:\"getURL\",value:function(){var e=this._channelModule.getModule(ll);e.isDevMode()&&(this._canIUseBinaryFrame=!1);var t=Kc();(ui||ai&&\"windows\"===t||li)&&(this._canIUseBinaryFrame=!1);var n=-1;\"ios\"===t?n=Ei||-1:\"android\"===t&&(n=Si||-1);var o=this._channelModule.getPlatform(),r=e.getSDKAppID(),a=e.getInstanceID();return this._canIUseBinaryFrame?\"\".concat(this._url,\"/binfo?sdkappid=\").concat(r,\"&instanceid=\").concat(a,\"&random=\").concat(this._getRandom(),\"&platform=\").concat(o,\"&host=\").concat(t,\"&version=\").concat(n):\"\".concat(this._url,\"/info?sdkappid=\").concat(r,\"&instanceid=\").concat(a,\"&random=\").concat(this._getRandom(),\"&platform=\").concat(o,\"&host=\").concat(t,\"&version=\").concat(n)}},{key:\"_closeConnection\",value:function(e){Qi.log(\"\".concat(this._className,\"._closeConnection\")),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=wy)}},{key:\"_resend\",value:function(){var e=this;if(Qi.log(\"\".concat(this._className,\"._resend reConnectFlag:\").concat(this._reConnectFlag),\"promiseMap.size:\".concat(this._promiseMap.size,\" simpleRequestMap.size:\").concat(this._simpleRequestMap.size)),this._promiseMap.size>0&&this._promiseMap.forEach((function(t,n){var o=t.uplinkData,r=t.resolve,a=t.reject;e._promiseMap.set(n,{resolve:r,reject:a,timestamp:Date.now(),uplinkData:o}),e._execute(n,o)})),this._simpleRequestMap.size>0){var t,n=Bn(this._simpleRequestMap);try{for(n.s();!(t=n.n()).done;){var o=Pn(t.value,2),r=o[0],a=o[1];this._execute(r,a)}}catch(s){n.e(s)}finally{n.f()}this._simpleRequestMap.clear()}}},{key:\"send\",value:function(e){var t=this;e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3);e.keyMap;var n=Ln(e,[\"keyMap\"]),o=this._getRequestIDFromHead(e.head),r=JSON.stringify(n);return new Promise((function(e,a){(t._promiseMap.set(o,{resolve:e,reject:a,timestamp:Date.now(),uplinkData:r}),Qi.debug(\"\".concat(t._className,\".send uplinkData:\").concat(JSON.stringify(n),\" requestID:\").concat(o,\" readyState:\").concat(t._readyState)),t._readyState!==Ly)?t._reConnect():(t._execute(o,r),t._channelModule.getModule(Sl).addRequestCount())}))}},{key:\"simplySend\",value:function(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3);e.keyMap;var t=Ln(e,[\"keyMap\"]),n=this._getRequestIDFromHead(e.head),o=JSON.stringify(t);this._readyState!==Ly?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(n,o):Qi.log(\"\".concat(this._className,\".simplySend. simpleRequestMap is full, drop request!\")),this._reConnect()):this._execute(n,o)}},{key:\"_execute\",value:function(e,t){this._socket.send({data:t,fail:pi?this._onSendFail.bind(this):void 0,requestID:e})}},{key:\"_onSendFail\",value:function(e){Qi.log(\"\".concat(this._className,\"._onSendFail requestID:\").concat(e))}},{key:\"_getSequence\",value:function(){var e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=Sc()),e}},{key:\"_getRequestIDFromHead\",value:function(e){return e.servcmd+e.seq}},{key:\"_getResponseKeyMap\",value:function(e){var t=this._channelModule.getKeyMap(e);return Cn({},Wm.response,{},t.response)}},{key:\"_reConnect\",value:function(){this._readyState!==Ly&&this._readyState!==by&&this.forcedReconnect()}},{key:\"forcedReconnect\",value:function(){var e=this;Qi.log(\"\".concat(this._className,\".forcedReconnect count:\").concat(this._reConnectCount,\" readyState:\").concat(this._readyState)),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(Ry),this._initConnection()):(this._reConnectCount=0,this._channelModule.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0];n[1];o?(Qi.warn(\"\".concat(e._className,\".forcedReconnect disconnected from wsserver but network is ok, continue...\")),e._closeConnection(Ry),e._initConnection()):e._channelModule.onReconnectFailed()})))}},{key:\"getReconnectFlag\",value:function(){return this._reConnectFlag}},{key:\"_setNextPingTs\",value:function(){this._nextPingTs=Date.now()+1e4}},{key:\"getNextPingTs\",value:function(){return this._nextPingTs}},{key:\"isConnected\",value:function(){return this._readyState===Ly}},{key:\"canIUseBinaryFrame\",value:function(){return this._canIUseBinaryFrame}},{key:\"setIsWorkerEnabled\",value:function(e){Qi.log(\"\".concat(this._className,\".setIsWorkerEnabled flag:\").concat(e)),this._isWorkerEnabled=e}},{key:\"getIsWorkerEnabled\",value:function(){return this._isWorkerEnabled&&bi}},{key:\"_getRandom\",value:function(){return 0===this._random&&(this._random=Math.random()),this._random}},{key:\"_resetRandom\",value:function(){this._random=0}},{key:\"close\",value:function(){Qi.log(\"\".concat(this._className,\".close\")),this._closeConnection(Oy),this._promiseMap.clear(),this._startSequence=Sc(),this._readyState=wy,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url=\"\",this._random=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0}}]),e}(),Py=function(e){An(n,e);var t=Gn(n);function n(e){var o;if(yn(this,n),(o=t.call(this,e))._className=\"ChannelModule\",o._socketHandler=new Gy(bn(o)),o._probing=!1,o._isAppShowing=!0,o._previousState=Yn.NET_STATE_CONNECTED,pi&&\"function\"==typeof hi.onAppShow&&\"function\"==typeof hi.onAppHide){var r=o._onAppHide.bind(bn(o)),a=o._onAppShow.bind(bn(o));\"function\"==typeof hi.offAppHide&&hi.offAppHide(r),\"function\"==typeof hi.offAppShow&&hi.offAppShow(a),hi.onAppHide(r),hi.onAppShow(a)}return o._timerForNotLoggedIn=-1,o._timerForNotLoggedIn=setInterval(o.onCheckTimer.bind(bn(o)),1e3),o._fatalErrorFlag=!1,o}return En(n,[{key:\"onCheckTimer\",value:function(e){this._socketHandler&&(this.isLoggedIn()?(this._timerForNotLoggedIn>0&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}},{key:\"onErrorCodeNotZero\",value:function(e){this.getModule(vl).onErrorCodeNotZero(e)}},{key:\"onMessage\",value:function(e){this.getModule(vl).onMessage(e)}},{key:\"send\",value:function(e){return this._socketHandler?this._previousState!==Yn.NET_STATE_CONNECTED&&e.head.servcmd.includes(Pd)?(this.reConnect(),this._sendLogViaHTTP(e)):this._socketHandler.send(e):Promise.reject()}},{key:\"_sendLogViaHTTP\",value:function(e){var t=ei.HOST.CURRENT.STAT;return new Promise((function(n,o){var r=\"\".concat(t,\"/v4/imopenstat/tim_web_report_v2?sdkappid=\").concat(e.head.sdkappid,\"&reqtime=\").concat(Date.now()),a=JSON.stringify(e.body),s=\"application/x-www-form-urlencoded;charset=UTF-8\";if(pi)hi.request({url:r,data:a,method:\"POST\",timeout:3e3,header:{\"content-type\":s},success:function(){n()},fail:function(){o(new A_({code:zd.NETWORK_ERROR,message:Jd.NETWORK_ERROR}))}});else{var i=new XMLHttpRequest,c=setTimeout((function(){i.abort(),o(new A_({code:zd.NETWORK_TIMEOUT,message:Jd.NETWORK_TIMEOUT}))}),3e3);i.onreadystatechange=function(){4===i.readyState&&(clearTimeout(c),200===i.status||304===i.status?n():o(new A_({code:zd.NETWORK_ERROR,message:Jd.NETWORK_ERROR})))},i.open(\"POST\",r,!0),i.setRequestHeader(\"Content-type\",s),i.send(a)}}))}},{key:\"simplySend\",value:function(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}},{key:\"onOpen\",value:function(){this._ping()}},{key:\"onClose\",value:function(){this._socketHandler&&(this._socketHandler.getReconnectFlag()&&this._emitNetStateChangeEvent(Yn.NET_STATE_DISCONNECTED));this.reConnect()}},{key:\"onError\",value:function(){pi&&Qi.error(\"\".concat(this._className,\".onError 从v2.11.2起，SDK 支持了 WebSocket，如您未添加相关受信域名，请先添加！升级指引: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html\"))}},{key:\"getKeyMap\",value:function(e){return this.getModule(vl).getKeyMap(e)}},{key:\"_onAppHide\",value:function(){this._isAppShowing=!1}},{key:\"_onAppShow\",value:function(){this._isAppShowing=!0}},{key:\"onRequestTimeout\",value:function(e){}},{key:\"onReconnected\",value:function(){Qi.log(\"\".concat(this._className,\".onReconnected\")),this.getModule(vl).onReconnected(),this._emitNetStateChangeEvent(Yn.NET_STATE_CONNECTED)}},{key:\"onReconnectFailed\",value:function(){Qi.log(\"\".concat(this._className,\".onReconnectFailed\")),this._emitNetStateChangeEvent(Yn.NET_STATE_DISCONNECTED)}},{key:\"setIsWorkerEnabled\",value:function(e){this._socketHandler&&this._socketHandler.setIsWorkerEnabled(!1)}},{key:\"reConnect\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!1;this._socketHandler&&(t=this._socketHandler.getReconnectFlag());var n=\"forcedFlag:\".concat(e,\" fatalErrorFlag:\").concat(this._fatalErrorFlag,\" previousState:\").concat(this._previousState,\" reconnectFlag:\").concat(t);if(Qi.log(\"\".concat(this._className,\".reConnect \").concat(n)),!this._fatalErrorFlag&&this._socketHandler){if(!0===e)this._socketHandler.forcedReconnect();else{if(this._previousState===Yn.NET_STATE_CONNECTING&&t)return;this._socketHandler.forcedReconnect()}this._emitNetStateChangeEvent(Yn.NET_STATE_CONNECTING)}}},{key:\"_emitNetStateChangeEvent\",value:function(e){this._previousState!==e&&(Qi.log(\"\".concat(this._className,\"._emitNetStateChangeEvent from \").concat(this._previousState,\" to \").concat(e)),this._previousState=e,this.emitOuterEvent(Wn.NET_STATE_CHANGE,{state:e}))}},{key:\"_ping\",value:function(){var e=this;if(!0!==this._probing){this._probing=!0;var t=this.getModule(vl).getProtocolData({protocolName:Ud});this.send(t).then((function(){e._probing=!1})).catch((function(t){if(Qi.warn(\"\".concat(e._className,\"._ping failed. error:\"),t),e._probing=!1,t&&60002===t.code)return new dp(Kg).setMessage(\"code:\".concat(t.code,\" message:\").concat(t.message)).setNetworkType(e.getModule(gl).getNetworkType()).end(),e._fatalErrorFlag=!0,void e._emitNetStateChangeEvent(Yn.NET_STATE_DISCONNECTED);e.probeNetwork().then((function(t){var n=Pn(t,2),o=n[0],r=n[1];Qi.log(\"\".concat(e._className,\"._ping failed. probe network, isAppShowing:\").concat(e._isAppShowing,\" online:\").concat(o,\" networkType:\").concat(r)),o?e.reConnect():e._emitNetStateChangeEvent(Yn.NET_STATE_DISCONNECTED)}))}))}}},{key:\"_checkNextPing\",value:function(){this._socketHandler&&(this._socketHandler.isConnected()&&Date.now()>=this._socketHandler.getNextPingTs()&&this._ping())}},{key:\"dealloc\",value:function(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),this._timerForNotLoggedIn>-1&&clearInterval(this._timerForNotLoggedIn)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._previousState=Yn.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3)}}]),n}(Al),Uy=function(){function e(t){yn(this,e),this._className=\"ProtocolHandler\",this._sessionModule=t,this._configMap=new Map,this._fillConfigMap()}return En(e,[{key:\"_fillConfigMap\",value:function(){this._configMap.clear();var e=this._sessionModule.genCommonHead(),t=this._sessionModule.genCosSpecifiedHead(),n=this._sessionModule.genSSOReportHead();this._configMap.set(Dl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_STATUS,\".\").concat(ei.CMD.LOGIN)}),body:{state:\"Online\"},keyMap:{response:{InstId:\"instanceID\",HelloInterval:\"helloInterval\"}}}}(e)),this._configMap.set(Nl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_STATUS,\".\").concat(ei.CMD.LOGOUT)}),body:{type:0},keyMap:{request:{type:\"wslogout_type\"}}}}(e)),this._configMap.set(kl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_STATUS,\".\").concat(ei.CMD.HELLO)}),body:{},keyMap:{response:{NewInstInfo:\"newInstanceInfo\"}}}}(e)),this._configMap.set(Ol,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.STAT_SERVICE,\".\").concat(ei.CMD.KICK_OTHER)}),body:{}}}(e)),this._configMap.set(bd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_COS_SIGN,\".\").concat(ei.CMD.COS_SIGN)}),body:{cmd:\"open_im_cos_svc\",subCmd:\"get_cos_token\",duration:300,version:2},keyMap:{request:{userSig:\"usersig\",subCmd:\"sub_cmd\",cmd:\"cmd\",duration:\"duration\",version:\"version\"},response:{expired_time:\"expiredTime\",bucket_name:\"bucketName\",session_token:\"sessionToken\",tmp_secret_id:\"secretId\",tmp_secret_key:\"secretKey\"}}}}(t)),this._configMap.set(wd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.CUSTOM_UPLOAD,\".\").concat(ei.CMD.COS_PRE_SIG)}),body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{request:{userSig:\"usersig\",fileType:\"file_type\",fileName:\"file_name\",uploadMethod:\"upload_method\"},response:{expired_time:\"expiredTime\",request_id:\"requestId\",head_url:\"headUrl\",upload_url:\"uploadUrl\",download_url:\"downloadUrl\",ci_url:\"ciUrl\",snapshot_url:\"requestSnapshotUrl\"}}}}(t)),this._configMap.set(Gd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.CUSTOM_UPLOAD,\".\").concat(ei.CMD.VIDEO_COVER)}),body:{version:1,platform:void 0,coverName:void 0,requestSnapshotUrl:void 0},keyMap:{request:{version:\"version\",platform:\"platform\",coverName:\"cover_name\",requestSnapshotUrl:\"snapshot_url\"},response:{error_code:\"errorCode\",error_msg:\"errorInfo\",download_url:\"snapshotUrl\"}}}}(t)),this._configMap.set(Wd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_CONFIG_MANAGER,\".\").concat(ei.CMD.FETCH_COMMERCIAL_CONFIG)}),body:{SDKAppID:0},keyMap:{request:{SDKAppID:\"uint32_sdkappid\"},response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_purchase_bits:\"purchaseBits\",uint32_expired_time:\"expiredTime\"}}}}(e)),this._configMap.set(Yd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_CONFIG_MANAGER,\".\").concat(ei.CMD.PUSHED_COMMERCIAL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_purchase_bits:\"purchaseBits\",uint32_expired_time:\"expiredTime\"}}}}(e)),this._configMap.set(Hd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_CONFIG_MANAGER,\".\").concat(ei.CMD.FETCH_CLOUD_CONTROL_CONFIG)}),body:{SDKAppID:0,version:0},keyMap:{request:{SDKAppID:\"uint32_sdkappid\",version:\"uint64_version\"},response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_json_config:\"cloudControlConfig\",uint32_expired_time:\"expiredTime\",uint32_sdkappid:\"SDKAppID\",uint64_version:\"version\"}}}}(e)),this._configMap.set(jd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_CONFIG_MANAGER,\".\").concat(ei.CMD.PUSHED_CLOUD_CONTROL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_json_config:\"cloudControlConfig\",uint32_expired_time:\"expiredTime\",uint32_sdkappid:\"SDKAppID\",uint64_version:\"version\"}}}}(e)),this._configMap.set($d,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OVERLOAD_PUSH,\".\").concat(ei.CMD.OVERLOAD_NOTIFY)}),body:{},keyMap:{response:{OverLoadServCmd:\"overloadCommand\",DelaySecs:\"waitingTime\"}}}}(e)),this._configMap.set(Rl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.GET_MESSAGES)}),body:{cookie:\"\",syncFlag:0,needAbstract:1,isOnlineSync:0},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",from:\"From_Account\",to:\"To_Account\",time:\"MsgTimeStamp\",sequence:\"MsgSeq\",random:\"MsgRandom\",elements:\"MsgBody\"},response:{MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",ClientSeq:\"clientSequence\",MsgSeq:\"sequence\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgRandom:\"random\",MsgTimeStamp:\"time\",MsgContent:\"content\",ToGroupId:\"groupID\",MsgKey:\"messageKey\",GroupTips:\"groupTips\",MsgBody:\"elements\",MsgType:\"type\",C2CRemainingUnreadCount:\"C2CRemainingUnreadList\",C2CPairUnreadCount:\"C2CPairUnreadList\"}}}}(e)),this._configMap.set(Ll,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.BIG_DATA_HALLWAY_AUTH_KEY)}),body:{}}}(e)),this._configMap.set(bl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.SEND_MESSAGE)}),body:{fromAccount:\"\",toAccount:\"\",msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:\"\",avatar:\"\",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:\"\",desc:\"\",ext:\"\",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:\"\"}},messageControlInfo:void 0,clientTime:void 0},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",data:\"Data\",description:\"Desc\",extension:\"Ext\",type:\"MsgType\",content:\"MsgContent\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",nick:\"From_AccountNick\",avatar:\"From_AccountHeadurl\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",elements:\"MsgBody\",clientSequence:\"ClientSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"}}}}(e)),this._configMap.set(wl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.SEND_GROUP_MESSAGE)}),body:{fromAccount:\"\",groupID:\"\",random:0,clientSequence:0,priority:\"\",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:\"\",desc:\"\",ext:\"\",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:\"\"}},groupAtInfo:[],messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0},keyMap:{request:{to:\"GroupId\",extension:\"Ext\",data:\"Data\",description:\"Desc\",random:\"Random\",sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",type:\"MsgType\",priority:\"MsgPriority\",content:\"MsgContent\",elements:\"MsgBody\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",clientSequence:\"ClientSeq\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\",needReadReceipt:\"NeedReadReceipt\"},response:{MsgTime:\"time\",MsgSeq:\"sequence\"}}}}(e)),this._configMap.set(xl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.REVOKE_C2C_MESSAGE)}),body:{msgInfo:{fromAccount:\"\",toAccount:\"\",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{request:{msgInfo:\"MsgInfo\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(ld,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.REVOKE_GROUP_MESSAGE)}),body:{groupID:\"\",msgSeqList:void 0},keyMap:{request:{msgSeqList:\"MsgSeqList\",msgSeq:\"MsgSeq\"}}}}(e)),this._configMap.set(Hl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.GET_C2C_ROAM_MESSAGES)}),body:{peerAccount:\"\",count:15,lastMessageTime:0,messageKey:\"\",withRecalledMessage:1},keyMap:{request:{messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",withRecalledMessage:\"WithRecalledMsg\"},response:{LastMsgTime:\"lastMessageTime\"}}}}(e)),this._configMap.set(gd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_GROUP_ROAM_MESSAGES)}),body:{withRecalledMsg:1,groupID:\"\",count:15,sequence:\"\"},keyMap:{request:{sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",withRecalledMessage:\"WithRecalledMsg\"},response:{Random:\"random\",MsgTime:\"time\",MsgSeq:\"sequence\",ReqMsgSeq:\"sequence\",RspMsgList:\"messageList\",IsPlaceMsg:\"isPlaceMessage\",IsSystemMsg:\"isSystemMessage\",ToGroupId:\"to\",EnumFrom_AccountType:\"fromAccountType\",EnumTo_AccountType:\"toAccountType\",GroupCode:\"groupCode\",MsgPriority:\"priority\",MsgBody:\"elements\",MsgType:\"type\",MsgContent:\"content\",IsFinished:\"complete\",Download_Flag:\"downloadFlag\",ClientSeq:\"clientSequence\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\"}}}}(e)),this._configMap.set(Vl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.SET_C2C_MESSAGE_READ)}),body:{C2CMsgReaded:void 0},keyMap:{request:{lastMessageTime:\"LastedMsgTime\"}}}}(e)),this._configMap.set(Kl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.SET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{userIDList:void 0,muteFlag:0},keyMap:{request:{userIDList:\"Peer_Account\",muteFlag:\"Mute_Notifications\"}}}}(e)),this._configMap.set(Bl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.GET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{updateSequence:0},keyMap:{response:{MuteNotificationsList:\"muteFlagList\"}}}}(e)),this._configMap.set(dd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.SET_GROUP_MESSAGE_READ)}),body:{groupID:void 0,messageReadSeq:void 0},keyMap:{request:{messageReadSeq:\"MsgReadedSeq\"}}}}(e)),this._configMap.set(pd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.SET_ALL_MESSAGE_READ)}),body:{readAllC2CMessage:0,groupMessageReadInfoList:[]},keyMap:{request:{readAllC2CMessage:\"C2CReadAllMsg\",groupMessageReadInfoList:\"GroupReadInfo\",messageSequence:\"MsgSeq\"},response:{C2CReadAllMsg:\"readAllC2CMessage\",GroupReadInfoArray:\"groupMessageReadInfoList\"}}}}(e)),this._configMap.set(Wl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.DELETE_C2C_MESSAGE)}),body:{fromAccount:\"\",to:\"\",keyList:void 0},keyMap:{request:{keyList:\"MsgKeyList\"}}}}(e)),this._configMap.set(Ed,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.DELETE_GROUP_MESSAGE)}),body:{groupID:\"\",deleter:\"\",keyList:void 0},keyMap:{request:{deleter:\"Deleter_Account\",keyList:\"Seqs\"}}}}(e)),this._configMap.set(hd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_READ_RECEIPT)}),body:{groupID:\"\",sequenceList:void 0},keyMap:{request:{sequence:\"MsgSeq\"}}}}(e)),this._configMap.set(fd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.SEND_READ_RECEIPT)}),body:{groupID:\"\",sequenceList:void 0},keyMap:{request:{sequenceList:\"MsgSeqList\",sequence:\"MsgSeq\"}}}}(e)),this._configMap.set(_d,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_READ_RECEIPT_DETAIL)}),body:{groupID:\"\",sequence:void 0,flag:0,cursor:0,count:0},keyMap:{request:{sequence:\"MsgSeq\",count:\"Num\"},response:{ReadList:\"readUserIDList\",Read_Account:\"userID\",UnreadList:\"unreadUserIDList\",Unread_Account:\"userID\",IsFinish:\"isCompleted\"}}}}(e)),this._configMap.set(jl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.GET_PEER_READ_TIME)}),body:{userIDList:void 0},keyMap:{request:{userIDList:\"To_Account\"},response:{ReadTime:\"peerReadTimeList\"}}}}(e)),this._configMap.set($l,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.RECENT_CONTACT,\".\").concat(ei.CMD.GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,count:0},keyMap:{request:{},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\",C2cPeerReadTime:\"c2cPeerReadTime\"}}}}(e)),this._configMap.set(Yl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.RECENT_CONTACT,\".\").concat(ei.CMD.PAGING_GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:4,assistFlag:15},keyMap:{request:{messageAssistFlag:\"MsgAssistFlags\",assistFlag:\"AssistFlags\",pinnedTimeStamp:\"TopTimeStamp\",pinnedStartIndex:\"TopStartIndex\"},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\",C2cPeerReadTime:\"c2cPeerReadTime\",LastMsgFlags:\"lastMessageFlag\",TopFlags:\"isPinned\",TopTimeStamp:\"pinnedTimeStamp\",TopStartIndex:\"pinnedStartIndex\"}}}}(e)),this._configMap.set(zl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.RECENT_CONTACT,\".\").concat(ei.CMD.DELETE_CONVERSATION)}),body:{fromAccount:\"\",toAccount:void 0,type:1,toGroupID:void 0,clearHistoryMessage:1},keyMap:{request:{toGroupID:\"ToGroupid\",clearHistoryMessage:\"ClearRamble\"}}}}(e)),this._configMap.set(Jl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.RECENT_CONTACT,\".\").concat(ei.CMD.PIN_CONVERSATION)}),body:{fromAccount:\"\",operationType:1,itemList:void 0},keyMap:{request:{itemList:\"RecentContactItem\"}}}}(e)),this._configMap.set(Xl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.DELETE_GROUP_AT_TIPS)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(Gl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.PROFILE,\".\").concat(ei.CMD.PORTRAIT_GET)}),body:{fromAccount:\"\",userItem:[]},keyMap:{request:{toAccount:\"To_Account\",standardSequence:\"StandardSequence\",customSequence:\"CustomSequence\"}}}}(e)),this._configMap.set(Pl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.PROFILE,\".\").concat(ei.CMD.PORTRAIT_SET)}),body:{fromAccount:\"\",profileItem:[{tag:ec.NICK,value:\"\"},{tag:ec.GENDER,value:\"\"},{tag:ec.ALLOWTYPE,value:\"\"},{tag:ec.AVATAR,value:\"\"}]},keyMap:{request:{toAccount:\"To_Account\",standardSequence:\"StandardSequence\",customSequence:\"CustomSequence\"}}}}(e)),this._configMap.set(Ul,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.GET_BLACKLIST)}),body:{fromAccount:\"\",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{response:{CurruentSequence:\"currentSequence\"}}}}(e)),this._configMap.set(Fl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.ADD_BLACKLIST)}),body:{fromAccount:\"\",toAccount:[]}}}(e)),this._configMap.set(ql,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.FRIEND,\".\").concat(ei.CMD.DELETE_BLACKLIST)}),body:{fromAccount:\"\",toAccount:[]}}}(e)),this._configMap.set(Ql,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_JOINED_GROUPS)}),body:{memberAccount:\"\",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0}},keyMap:{request:{memberAccount:\"Member_Account\"},response:{GroupIdList:\"groups\",MsgFlag:\"messageRemindType\",NoUnreadSeqList:\"excludedUnreadSequenceList\",MsgSeq:\"readedSequence\"}}}}(e)),this._configMap.set(Zl,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_GROUP_INFO)}),body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\",\"ShutUpAllMember\"],groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{request:{groupIDList:\"GroupIdList\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\",groupCustomFieldFilter:\"AppDefinedDataFilter_Group\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{GroupIdList:\"groups\",MsgFlag:\"messageRemindType\",AppDefinedData:\"groupCustomField\",AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_Group:\"groupCustomFieldFilter\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",InfoSeq:\"infoSequence\",MemberList:\"members\",GroupInfo:\"groups\",ShutUpUntil:\"muteUntil\",ShutUpAllMember:\"muteAllMembers\",ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(ed,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.CREATE_GROUP)}),body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:\"FaceUrl\"},keyMap:{request:{ownerID:\"Owner_Account\",userID:\"Member_Account\",avatar:\"FaceUrl\",maxMemberNum:\"MaxMemberCount\",joinOption:\"ApplyJoinOption\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\"},response:{HugeGroupFlag:\"avChatRoomFlag\",OverJoinedGroupLimit_Account:\"overLimitUserIDList\"}}}}(e)),this._configMap.set(td,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.DESTROY_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(nd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.MODIFY_GROUP_INFO)}),body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0},keyMap:{request:{maxMemberNum:\"MaxMemberCount\",groupCustomField:\"AppDefinedData\",muteAllMembers:\"ShutUpAllMember\",joinOption:\"ApplyJoinOption\",avatar:\"FaceUrl\"},response:{AppDefinedData:\"groupCustomField\",ShutUpAllMember:\"muteAllMembers\",ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(od,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1,historyMessageFlag:void 0},keyMap:{request:{applyMessage:\"ApplyMsg\",historyMessageFlag:\"HugeGroupHistoryMsgFlag\"},response:{HugeGroupFlag:\"avChatRoomFlag\",AVChatRoomKey:\"avChatRoomKey\",RspMsgList:\"messageList\",ToGroupId:\"to\"}}}}(e)),this._configMap.set(rd,function(e){e.a2,e.tinyid;return{head:Cn({},Ln(e,[\"a2\",\"tinyid\"]),{servcmd:\"\".concat(ei.NAME.BIG_GROUP_NO_AUTH,\".\").concat(ei.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:\"ApplyMsg\"},response:{HugeGroupFlag:\"avChatRoomFlag\"}}}}(e)),this._configMap.set(ad,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.QUIT_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(sd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.SEARCH_GROUP_BY_ID)}),body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"CreateTime\",\"Owner_Account\",\"LastInfoTime\",\"LastMsgTime\",\"NextMsgSeq\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\"]}},keyMap:{response:{ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(id,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.CHANGE_GROUP_OWNER)}),body:{groupID:void 0,newOwnerID:void 0},keyMap:{request:{newOwnerID:\"NewOwner_Account\"}}}}(e)),this._configMap.set(cd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.HANDLE_APPLY_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{applicant:\"Applicant_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"}}}}(e)),this._configMap.set(ud,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.HANDLE_GROUP_INVITATION)}),body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{inviter:\"Inviter_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"}}}}(e)),this._configMap.set(md,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_GROUP_APPLICATION)}),body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{request:{handleAccount:\"Handle_Account\"}}}}(e)),this._configMap.set(vd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.DELETE_GROUP_SYSTEM_MESSAGE)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(Md,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.BIG_GROUP_LONG_POLLING,\".\").concat(ei.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\"}}}}(e)),this._configMap.set(yd,function(e){e.a2,e.tinyid;return{head:Cn({},Ln(e,[\"a2\",\"tinyid\"]),{servcmd:\"\".concat(ei.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,\".\").concat(ei.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\"}}}}(e)),this._configMap.set(Id,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_ONLINE_MEMBER_NUM)}),body:{groupID:void 0}}}(e)),this._configMap.set(Td,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.SET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\",value:\"value\"}}}}(e)),this._configMap.set(Sd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.MODIFY_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\",value:\"value\"}}}}(e)),this._configMap.set(Cd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.DELETE_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\"}}}}(e)),this._configMap.set(Ad,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.CLEAR_GROUP_ATTRIBUTES)}),body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]}}}(e)),this._configMap.set(Dd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP_ATTR,\".\").concat(ei.CMD.GET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{request:{avChatRoomKey:\"Key\",groupType:\"GroupType\"}}}}(e)),this._configMap.set(Nd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_GROUP_MEMBER_LIST)}),body:{groupID:void 0,limit:0,offset:void 0,next:void 0,memberRoleFilter:void 0,memberInfoFilter:[\"Role\",\"NameCard\",\"ShutUpUntil\",\"JoinTime\"],memberCustomFieldFilter:void 0},keyMap:{request:{memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",MemberList:\"members\",ShutUpUntil:\"muteUntil\"}}}}(e)),this._configMap.set(kd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.GET_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{request:{userIDList:\"Member_List_Account\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{MemberList:\"members\",ShutUpUntil:\"muteUntil\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",AppMemberDefinedData:\"memberCustomField\"}}}}(e)),this._configMap.set(Od,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.ADD_GROUP_MEMBER)}),body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{request:{userID:\"Member_Account\",userIDList:\"MemberList\"},response:{MemberList:\"members\"}}}}(e)),this._configMap.set(Rd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.DELETE_GROUP_MEMBER)}),body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{request:{userIDList:\"MemberToDel_Account\"}}}}(e)),this._configMap.set(Ld,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.GROUP,\".\").concat(ei.CMD.MODIFY_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{request:{userID:\"Member_Account\",memberCustomField:\"AppMemberDefinedData\",muteTime:\"ShutUpTime\",messageRemindType:\"MsgFlag\"}}}}(e)),this._configMap.set(Pd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_STAT,\".\").concat(ei.CMD.TIM_WEB_REPORT_V2)}),body:{header:{},event:[],quality:[]},keyMap:{request:{SDKType:\"sdk_type\",SDKVersion:\"sdk_version\",deviceType:\"device_type\",platform:\"platform\",instanceID:\"instance_id\",traceID:\"trace_id\",SDKAppID:\"sdk_app_id\",userID:\"user_id\",tinyID:\"tiny_id\",extension:\"extension\",timestamp:\"timestamp\",networkType:\"network_type\",eventType:\"event_type\",code:\"error_code\",message:\"error_message\",moreMessage:\"more_message\",duplicate:\"duplicate\",costTime:\"cost_time\",level:\"level\",qualityType:\"quality_type\",reportIndex:\"report_index\",wholePeriod:\"whole_period\",totalCount:\"total_count\",rttCount:\"success_count_business\",successRateOfRequest:\"percent_business\",countLessThan1Second:\"success_count_business\",percentOfCountLessThan1Second:\"percent_business\",countLessThan3Second:\"success_count_platform\",percentOfCountLessThan3Second:\"percent_platform\",successCountOfBusiness:\"success_count_business\",successRateOfBusiness:\"percent_business\",successCountOfPlatform:\"success_count_platform\",successRateOfPlatform:\"percent_platform\",successCountOfMessageReceived:\"success_count_business\",successRateOfMessageReceived:\"percent_business\",avgRTT:\"average_value\",avgDelay:\"average_value\",avgValue:\"average_value\",uiPlatform:\"ui_platform\"}}}}(n)),this._configMap.set(Ud,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.HEARTBEAT,\".\").concat(ei.CMD.ALIVE)}),body:{}}}(e)),this._configMap.set(Fd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_PUSH,\".\").concat(ei.CMD.MESSAGE_PUSH)}),body:{},keyMap:{response:{C2cMsgArray:\"C2CMessageArray\",GroupMsgArray:\"groupMessageArray\",GroupTips:\"groupTips\",C2cNotifyMsgArray:\"C2CNotifyMessageArray\",ClientSeq:\"clientSequence\",MsgPriority:\"priority\",NoticeSeq:\"noticeSequence\",MsgContent:\"content\",MsgType:\"type\",MsgBody:\"elements\",ToGroupId:\"to\",Desc:\"description\",Ext:\"extension\",IsSyncMsg:\"isSyncMessage\",Flag:\"needSync\",NeedAck:\"needAck\",PendencyAdd_Account:\"userID\",ProfileImNick:\"nick\",PendencyType:\"applicationType\",C2CReadAllMsg:\"readAllC2CMessage\"}}}}(e)),this._configMap.set(qd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_PUSH,\".\").concat(ei.CMD.MULTI_MESSAGE_PUSH)}),body:{},keyMap:{response:{GroupMsgArray:\"groupMessageArray\",GroupTips:\"groupTips\",ClientSeq:\"clientSequence\",MsgPriority:\"priority\",NoticeSeq:\"noticeSequence\",MsgContent:\"content\",MsgType:\"type\",MsgBody:\"elements\",ToGroupId:\"to\",Desc:\"description\",Ext:\"extension\",IsSyncMsg:\"isSyncMessage\",Flag:\"needSync\",NeedAck:\"needAck\",PendencyType:\"applicationType\"}}}}(e)),this._configMap.set(xd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.OPEN_IM,\".\").concat(ei.CMD.MESSAGE_PUSH_ACK)}),body:{sessionData:void 0},keyMap:{request:{sessionData:\"SessionData\"}}}}(e)),this._configMap.set(Vd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_OPEN_STATUS,\".\").concat(ei.CMD.STATUS_FORCEOFFLINE)}),body:{},keyMap:{response:{C2cNotifyMsgArray:\"C2CNotifyMessageArray\",NoticeSeq:\"noticeSequence\",KickoutMsgNotify:\"kickoutMsgNotify\",NewInstInfo:\"newInstanceInfo\"}}}}(e)),this._configMap.set(Bd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_LONG_MESSAGE,\".\").concat(ei.CMD.DOWNLOAD_MERGER_MESSAGE)}),body:{downloadKey:\"\"},keyMap:{response:{Data:\"data\",Desc:\"description\",Ext:\"extension\",Download_Flag:\"downloadFlag\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\"}}}}(e)),this._configMap.set(Kd,function(e){return{head:Cn({},e,{servcmd:\"\".concat(ei.NAME.IM_LONG_MESSAGE,\".\").concat(ei.CMD.UPLOAD_MERGER_MESSAGE)}),body:{messageList:[]},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",type:\"MsgType\",content:\"MsgContent\",data:\"Data\",description:\"Desc\",extension:\"Ext\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",elements:\"MsgBody\",clientSequence:\"ClientSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"}}}}(e))}},{key:\"has\",value:function(e){return this._configMap.has(e)}},{key:\"get\",value:function(e){return this._configMap.get(e)}},{key:\"update\",value:function(){this._fillConfigMap()}},{key:\"getKeyMap\",value:function(e){return this.has(e)?this.get(e).keyMap||{}:(Qi.warn(\"\".concat(this._className,\".getKeyMap unknown protocolName:\").concat(e)),{})}},{key:\"getProtocolData\",value:function(e){var t=e.protocolName,n=e.requestData,o=this.get(t),r=null;if(n){var a=this._simpleDeepCopy(o),s=this._updateService(n,a),i=s.body,c=Object.create(null);for(var u in i)if(Object.prototype.hasOwnProperty.call(i,u)){if(c[u]=i[u],void 0===n[u])continue;c[u]=n[u]}s.body=c,r=this._getUplinkData(s)}else r=this._getUplinkData(o);return r}},{key:\"_getUplinkData\",value:function(e){var t=this._requestDataCleaner(e),n=jc(t.head),o=Jm(t.body,this._getRequestKeyMap(n));return t.body=o,t}},{key:\"_updateService\",value:function(e,t){var n=jc(t.head);if(t.head.servcmd.includes(ei.NAME.GROUP)){var o=e.type,r=e.groupID,a=void 0===r?void 0:r,s=e.groupIDList,i=void 0===s?[]:s;gc(a)&&(a=i[0]||\"\"),Gc({type:o,groupID:a})&&(t.head.servcmd=\"\".concat(ei.NAME.GROUP_COMMUNITY,\".\").concat(n))}return t}},{key:\"_getRequestKeyMap\",value:function(e){var t=this.getKeyMap(e);return Cn({},Wm.request,{},t.request)}},{key:\"_requestDataCleaner\",value:function(e){var t=Array.isArray(e)?[]:Object.create(null);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&vc(n)&&null!==e[n]&&void 0!==e[n]&&(\"object\"!==Mn(e[n])?t[n]=e[n]:t[n]=this._requestDataCleaner.bind(this)(e[n]));return t}},{key:\"_simpleDeepCopy\",value:function(e){for(var t,n=Object.keys(e),o={},r=0,a=n.length;r<a;r++)t=n[r],pc(e[t])?o[t]=Array.from(e[t]):lc(e[t])?o[t]=this._simpleDeepCopy(e[t]):o[t]=e[t];return o}}]),e}(),Fy=[xd],qy=function(){function e(t){yn(this,e),this._sessionModule=t,this._className=\"DownlinkHandler\",this._eventHandlerMap=new Map,this._eventHandlerMap.set(\"C2CMessageArray\",this._c2cMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"groupMessageArray\",this._groupMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"groupTips\",this._groupTipsHandler.bind(this)),this._eventHandlerMap.set(\"C2CNotifyMessageArray\",this._C2CNotifyMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"profileModify\",this._profileHandler.bind(this)),this._eventHandlerMap.set(\"friendListMod\",this._relationChainHandler.bind(this)),this._eventHandlerMap.set(\"recentContactMod\",this._recentContactHandler.bind(this)),this._eventHandlerMap.set(\"readAllC2CMessage\",this._allMessageReadHandler.bind(this)),this._keys=Un(this._eventHandlerMap.keys())}return En(e,[{key:\"_c2cMessageArrayHandler\",value:function(e){var t=this._sessionModule.getModule(al);if(t){if(e.dataList.forEach((function(e){if(1===e.isSyncMessage){var t=e.from;e.from=e.to,e.to=t}})),1===e.needSync)this._sessionModule.getModule(ml).startOnlineSync();t.onNewC2CMessage({dataList:e.dataList,isInstantMessage:!0})}}},{key:\"_groupMessageArrayHandler\",value:function(e){var t=this._sessionModule.getModule(sl);t&&t.onNewGroupMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}},{key:\"_groupTipsHandler\",value:function(e){var t=this._sessionModule.getModule(sl);if(t){var n=e.event,o=e.dataList,r=e.isInstantMessage,a=void 0===r||r,s=e.isSyncingEnded;switch(n){case 4:case 6:t.onNewGroupTips({event:n,dataList:o});break;case 5:o.forEach((function(e){pc(e.elements.revokedInfos)?t.onGroupMessageRevoked({dataList:o}):pc(e.elements.groupMessageReadNotice)?t.onGroupMessageReadNotice({dataList:o}):pc(e.elements.readReceiptList)?t.onReadReceiptList({dataList:o}):t.onNewGroupSystemNotice({dataList:o,isInstantMessage:a,isSyncingEnded:s})}));break;case 12:this._sessionModule.getModule(ul).onNewGroupAtTips({dataList:o});break;default:Qi.log(\"\".concat(this._className,\"._groupTipsHandler unknown event:\").concat(n,\" dataList:\"),o)}}}},{key:\"_C2CNotifyMessageArrayHandler\",value:function(e){var t=this,n=e.dataList;if(pc(n)){var o=this._sessionModule.getModule(al);n.forEach((function(e){if(dc(e))if(e.hasOwnProperty(\"kickoutMsgNotify\")){var r=e.kickoutMsgNotify,a=r.kickType,s=r.newInstanceInfo,i=void 0===s?{}:s;1===a?t._sessionModule.onMultipleAccountKickedOut(i):2===a&&t._sessionModule.onMultipleDeviceKickedOut(i)}else if(e.hasOwnProperty(\"c2cMessageRevokedNotify\"))o&&o.onC2CMessageRevoked({dataList:n});else if(e.hasOwnProperty(\"c2cMessageReadReceipt\"))o&&o.onC2CMessageReadReceipt({dataList:n});else if(e.hasOwnProperty(\"c2cMessageReadNotice\"))o&&o.onC2CMessageReadNotice({dataList:n});else if(e.hasOwnProperty(\"muteNotificationsSync\")){t._sessionModule.getModule(ul).onC2CMessageRemindTypeSynced({dataList:n})}}))}}},{key:\"_profileHandler\",value:function(e){this._sessionModule.getModule(rl).onProfileModified({dataList:e.dataList});var t=this._sessionModule.getModule(il);t&&t.onFriendProfileModified({dataList:e.dataList})}},{key:\"_relationChainHandler\",value:function(e){this._sessionModule.getModule(rl).onRelationChainModified({dataList:e.dataList});var t=this._sessionModule.getModule(il);t&&t.onRelationChainModified({dataList:e.dataList})}},{key:\"_recentContactHandler\",value:function(e){var t=e.dataList;if(pc(t)){var n=this._sessionModule.getModule(ul);n&&t.forEach((function(e){var t=e.pushType,o=e.recentContactTopItem,r=e.recentContactDeleteItem;1===t?n.onConversationDeleted(r.recentContactList):2===t?n.onConversationPinned(o.recentContactList):3===t&&n.onConversationUnpinned(o.recentContactList)}))}}},{key:\"_allMessageReadHandler\",value:function(e){var t=e.dataList,n=this._sessionModule.getModule(ul);n&&n.onPushedAllMessageRead(t)}},{key:\"onMessage\",value:function(e){var t=this,n=e.body;if(this._filterMessageFromIMOpenPush(e)){var o=n.eventArray,r=n.isInstantMessage,a=n.isSyncingEnded,s=n.needSync;if(pc(o))for(var i=null,c=null,u=0,l=0,d=o.length;l<d;l++){u=(i=o[l]).event;var p=Object.keys(i).find((function(e){return-1!==t._keys.indexOf(e)}));p?(c=14!==u?i[p]:{readAllC2CMessage:i[p],groupMessageReadInfoList:i.groupMessageReadNotice||[]},this._eventHandlerMap.get(p)({event:u,dataList:c,isInstantMessage:r,isSyncingEnded:a,needSync:s})):Qi.log(\"\".concat(this._className,\".onMessage unknown eventItem:\").concat(i))}}}},{key:\"_filterMessageFromIMOpenPush\",value:function(e){var t=e.head,n=e.body,o=t.servcmd,r=!1;if(gc(o)||(r=o.includes(ei.NAME.IM_CONFIG_MANAGER)||o.includes(ei.NAME.OVERLOAD_PUSH)||o.includes(ei.NAME.STAT_SERVICE)),!r)return!0;if(o.includes(ei.CMD.PUSHED_CLOUD_CONTROL_CONFIG))this._sessionModule.getModule(Il).onPushedCloudControlConfig(n);else if(o.includes(ei.CMD.PUSHED_COMMERCIAL_CONFIG)){this._sessionModule.getModule(Cl).onPushedConfig(n)}else if(o.includes(ei.CMD.OVERLOAD_NOTIFY))this._sessionModule.onPushedServerOverload(n);else if(o.includes(ei.CMD.KICK_OTHER)){var a=Date.now();this._sessionModule.reLoginOnKickOther();var s=new dp(vp),i=this._sessionModule.getModule(nl).getLastWsHelloTs(),c=a-i;s.setMessage(\"last wshello time:\".concat(i,\" diff:\").concat(c,\"ms\")).setNetworkType(this._sessionModule.getNetworkType()).end()}return!1}}]),e}(),xy=[{cmd:ei.CMD.GET_GROUP_INFO,interval:1,count:20},{cmd:ei.CMD.SET_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:ei.CMD.MODIFY_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:ei.CMD.DELETE_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:ei.CMD.CLEAR_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:ei.CMD.GET_GROUP_ATTRIBUTES,interval:5,count:20},{cmd:ei.CMD.SET_ALL_MESSAGE_READ,interval:1,count:1}],Vy=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"SessionModule\",o._platform=o.getPlatform(),o._protocolHandler=new Uy(bn(o)),o._messageDispatcher=new qy(bn(o)),o._commandFrequencyLimitMap=new Map,o._commandRequestInfoMap=new Map,o._serverOverloadInfoMap=new Map,o._init(),o.getInnerEmitterInstance().on(K_,o._onCloudConfigUpdated,bn(o)),o}return En(n,[{key:\"_init\",value:function(){this._updateCommandFrequencyLimitMap(xy)}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"cmd_frequency_limit\");gc(e)||(e=JSON.parse(e),this._updateCommandFrequencyLimitMap(e))}},{key:\"_updateCommandFrequencyLimitMap\",value:function(e){var t=this;e.forEach((function(e){t._commandFrequencyLimitMap.set(e.cmd,{interval:e.interval,count:e.count})}))}},{key:\"updateProtocolConfig\",value:function(){this._protocolHandler.update()}},{key:\"request\",value:function(e){Qi.debug(\"\".concat(this._className,\".request options:\"),e);var t=e.protocolName,n=e.tjgID;if(!this._protocolHandler.has(t))return Qi.warn(\"\".concat(this._className,\".request unknown protocol:\").concat(t)),O_({code:zd.CANNOT_FIND_PROTOCOL,message:Jd.CANNOT_FIND_PROTOCOL});var o=this.getProtocolData(e),r=o.head.servcmd;if(this._isFrequencyOverLimit(r))return O_({code:zd.OVER_FREQUENCY_LIMIT,message:Jd.OVER_FREQUENCY_LIMIT});if(this._isServerOverload(r))return O_({code:zd.OPEN_SERVICE_OVERLOAD_ERROR,message:Jd.OPEN_SERVICE_OVERLOAD_ERROR});Jc(n)||(o.head.tjgID=n);var a=this.getModule(Ml);return Fy.includes(t)?a.simplySend(o):a.send(o)}},{key:\"getKeyMap\",value:function(e){return this._protocolHandler.getKeyMap(e)}},{key:\"genCommonHead\",value:function(){var e=this.getModule(ll);return{ver:\"v4\",platform:this._platform,websdkappid:Ys,websdkversion:Ws,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:51,tjgID:\"\"}}},{key:\"genCosSpecifiedHead\",value:function(){var e=this.getModule(ll);return{ver:\"v4\",platform:this._platform,websdkappid:Ys,websdkversion:Ws,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:51}}},{key:\"genSSOReportHead\",value:function(){var e=this.getModule(ll);return{ver:\"v4\",platform:this._platform,websdkappid:Ys,websdkversion:Ws,sdkappid:e.getSDKAppID(),contenttype:\"\",reqtime:0,identifier:\"\",usersig:\"\",status_instid:e.getStatusInstanceID(),sdkability:51}}},{key:\"getProtocolData\",value:function(e){return this._protocolHandler.getProtocolData(e)}},{key:\"onErrorCodeNotZero\",value:function(e){var t=e.errorCode;if(t===zd.HELLO_ANSWER_KICKED_OUT){var n=e.kickType,o=e.newInstanceInfo,r=void 0===o?{}:o;1===n?this.onMultipleAccountKickedOut(r):2===n&&this.onMultipleDeviceKickedOut(r)}t!==zd.MESSAGE_A2KEY_EXPIRED&&t!==zd.ACCOUNT_A2KEY_EXPIRED||(this._onUserSigExpired(),this.getModule(Ml).reConnect())}},{key:\"onMessage\",value:function(e){var t=e.body,n=t.needAck,o=void 0===n?0:n,r=t.sessionData;1===o&&this._sendACK(r),this._messageDispatcher.onMessage(e)}},{key:\"onReconnected\",value:function(){this._reLoginOnReconnected()}},{key:\"reLoginOnKickOther\",value:function(){Qi.log(\"\".concat(this._className,\".reLoginOnKickOther\")),this._reLogin()}},{key:\"_reLoginOnReconnected\",value:function(){Qi.log(\"\".concat(this._className,\"._reLoginOnReconnected\")),this._reLogin()}},{key:\"_reLogin\",value:function(){var e=this;this.isLoggedIn()&&this.request({protocolName:Dl}).then((function(t){var n=t.data.instanceID;e.getModule(ll).setStatusInstanceID(n),Qi.log(\"\".concat(e._className,\"._reLogin ok. start to sync unread messages\")),e.getModule(ml).startSyncOnReconnected(),e.getModule(Tl).startPull(),e.getModule(sl).updateLocalMainSequenceOnReconnected()}))}},{key:\"onMultipleAccountKickedOut\",value:function(e){this.getModule(nl).onMultipleAccountKickedOut(e)}},{key:\"onMultipleDeviceKickedOut\",value:function(e){this.getModule(nl).onMultipleDeviceKickedOut(e)}},{key:\"_onUserSigExpired\",value:function(){this.getModule(nl).onUserSigExpired()}},{key:\"_sendACK\",value:function(e){this.request({protocolName:xd,requestData:{sessionData:e}})}},{key:\"_isFrequencyOverLimit\",value:function(e){var t=e.split(\".\")[1];if(!this._commandFrequencyLimitMap.has(t))return!1;if(!this._commandRequestInfoMap.has(t))return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;var n=this._commandFrequencyLimitMap.get(t),o=n.count,r=n.interval,a=this._commandRequestInfoMap.get(t),s=a.startTime,i=a.requestCount;if(Date.now()-s>1e3*r)return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;i+=1,this._commandRequestInfoMap.set(t,{startTime:s,requestCount:i});var c=!1;return i>o&&(c=!0),c}},{key:\"_isServerOverload\",value:function(e){if(!this._serverOverloadInfoMap.has(e))return!1;var t=this._serverOverloadInfoMap.get(e),n=t.overloadTime,o=t.waitingTime,r=!1;return Date.now()-n<=1e3*o?r=!0:(this._serverOverloadInfoMap.delete(e),r=!1),r}},{key:\"onPushedServerOverload\",value:function(e){var t=e.overloadCommand,n=e.waitingTime;this._serverOverloadInfoMap.set(t,{overloadTime:Date.now(),waitingTime:n}),Qi.warn(\"\".concat(this._className,\".onPushedServerOverload waitingTime:\").concat(n,\"s\"))}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._updateCommandFrequencyLimitMap(xy),this._commandRequestInfoMap.clear(),this._serverOverloadInfoMap.clear()}}]),n}(Al),Ky=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"MessageLossDetectionModule\",o._maybeLostSequencesMap=new Map,o}return En(n,[{key:\"onMessageMaybeLost\",value:function(e,t,n){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);for(var o=this._maybeLostSequencesMap.get(e),r=0;r<n;r++)o.push(t+r);Qi.debug(\"\".concat(this._className,\".onMessageMaybeLost. maybeLostSequences:\").concat(o))}},{key:\"detectMessageLoss\",value:function(e,t){var n=this._maybeLostSequencesMap.get(e);if(!Jc(n)&&!Jc(t)){var o=t.filter((function(e){return-1!==n.indexOf(e)}));if(Qi.debug(\"\".concat(this._className,\".detectMessageLoss. matchedSequences:\").concat(o)),n.length===o.length)Qi.info(\"\".concat(this._className,\".detectMessageLoss no message loss. conversationID:\").concat(e));else{var r,a=n.filter((function(e){return-1===o.indexOf(e)})),s=a.length;s<=5?r=e+\"-\"+a.join(\"-\"):(a.sort((function(e,t){return e-t})),r=e+\" start:\"+a[0]+\" end:\"+a[s-1]+\" count:\"+s),new dp(Og).setMessage(r).setNetworkType(this.getNetworkType()).setLevel(\"warning\").end(),Qi.warn(\"\".concat(this._className,\".detectMessageLoss message loss detected. conversationID:\").concat(e,\" lostSequences:\").concat(a))}n.length=0}}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._maybeLostSequencesMap.clear()}}]),n}(Al),By=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"CloudControlModule\",o._cloudConfig=new Map,o._expiredTime=0,o._version=0,o._isFetching=!1,o}return En(n,[{key:\"getCloudConfig\",value:function(e){return gc(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}},{key:\"_canFetchConfig\",value:function(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}},{key:\"fetchConfig\",value:function(){var e=this,t=this._canFetchConfig();if(Qi.log(\"\".concat(this._className,\".fetchConfig canFetchConfig:\").concat(t)),t){var n=new dp(Fg),o=this.getModule(ll).getSDKAppID();this._isFetching=!0,this.request({protocolName:Hd,requestData:{SDKAppID:o,version:this._version}}).then((function(t){e._isFetching=!1,n.setMessage(\"version:\".concat(e._version,\" newVersion:\").concat(t.data.version,\" config:\").concat(t.data.cloudControlConfig)).setNetworkType(e.getNetworkType()).end(),Qi.log(\"\".concat(e._className,\".fetchConfig ok\")),e._parseCloudControlConfig(t.data)})).catch((function(t){e._isFetching=!1,e.probeNetwork().then((function(e){var o=Pn(e,2),r=o[0],a=o[1];n.setError(t,r,a).end()})),Qi.log(\"\".concat(e._className,\".fetchConfig failed. error:\"),t),e._setExpiredTimeOnResponseError(12e4)}))}}},{key:\"onPushedCloudControlConfig\",value:function(e){Qi.log(\"\".concat(this._className,\".onPushedCloudControlConfig\")),new dp(qg).setNetworkType(this.getNetworkType()).setMessage(\"newVersion:\".concat(e.version,\" config:\").concat(e.cloudControlConfig)).end(),this._parseCloudControlConfig(e)}},{key:\"onCheckTimer\",value:function(e){this._canFetchConfig()&&this.fetchConfig()}},{key:\"_parseCloudControlConfig\",value:function(e){var t=this,n=\"\".concat(this._className,\"._parseCloudControlConfig\"),o=e.errorCode,r=e.errorMessage,a=e.cloudControlConfig,s=e.version,i=e.expiredTime;if(0===o){if(this._version!==s){var c=null;try{c=JSON.parse(a)}catch(sI){Qi.error(\"\".concat(n,\" JSON parse error:\").concat(a))}c&&(this._cloudConfig.clear(),Object.keys(c).forEach((function(e){t._cloudConfig.set(e,c[e])})),this._version=s,this.emitInnerEvent(K_))}this._expiredTime=Date.now()+1e3*i}else gc(o)?(Qi.log(\"\".concat(n,\" failed. Invalid message format:\"),e),this._setExpiredTimeOnResponseError(36e5)):(Qi.error(\"\".concat(n,\" errorCode:\").concat(o,\" errorMessage:\").concat(r)),this._setExpiredTimeOnResponseError(12e4))}},{key:\"_setExpiredTimeOnResponseError\",value:function(e){this._expiredTime=Date.now()+e}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}]),n}(Al),Hy=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"PullGroupMessageModule\",o._remoteLastMessageSequenceMap=new Map,o.PULL_LIMIT_COUNT=15,o}return En(n,[{key:\"startPull\",value:function(){var e=this,t=this._getNeedPullConversationList();this._getRemoteLastMessageSequenceList().then((function(){var n=e.getModule(ul);t.forEach((function(t){var o=t.conversationID,r=o.replace(Yn.CONV_GROUP,\"\"),a=n.getGroupLocalLastMessageSequence(o),s=e._remoteLastMessageSequenceMap.get(r)||0,i=s-a;Qi.log(\"\".concat(e._className,\".startPull groupID:\").concat(r,\" localLastMessageSequence:\").concat(a,\" \")+\"remoteLastMessageSequence:\".concat(s,\" diff:\").concat(i)),a>0&&i>=1&&i<300&&e._pullMissingMessage({groupID:r,localLastMessageSequence:a,remoteLastMessageSequence:s,diff:i})}))}))}},{key:\"_getNeedPullConversationList\",value:function(){return this.getModule(ul).getLocalConversationList().filter((function(e){return e.type===Yn.CONV_GROUP&&e.groupProfile.type!==Yn.GRP_AVCHATROOM}))}},{key:\"_getRemoteLastMessageSequenceList\",value:function(){var e=this;return this.getModule(sl).getGroupList().then((function(t){for(var n=t.data.groupList,o=void 0===n?[]:n,r=0;r<o.length;r++){var a=o[r],s=a.groupID,i=a.nextMessageSeq;if(a.type!==Yn.GRP_AVCHATROOM){var c=i-1;e._remoteLastMessageSequenceMap.set(s,c)}}}))}},{key:\"_pullMissingMessage\",value:function(e){var t=this,n=e.localLastMessageSequence,o=e.remoteLastMessageSequence,r=e.diff;e.count=r>this.PULL_LIMIT_COUNT?this.PULL_LIMIT_COUNT:r,e.sequence=r>this.PULL_LIMIT_COUNT?n+this.PULL_LIMIT_COUNT:n+r,this._getGroupMissingMessage(e).then((function(a){a.length>0&&(a[0].sequence+1<=o&&(e.localLastMessageSequence=n+t.PULL_LIMIT_COUNT,e.diff=r-t.PULL_LIMIT_COUNT,t._pullMissingMessage(e)),t.getModule(sl).onNewGroupMessage({dataList:a,isInstantMessage:!1}))}))}},{key:\"_getGroupMissingMessage\",value:function(e){var t=this,n=new dp(pg);return this.request({protocolName:gd,requestData:{groupID:e.groupID,count:e.count,sequence:e.sequence}}).then((function(o){var r=o.data.messageList,a=void 0===r?[]:r;return n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e.groupID,\" count:\").concat(e.count,\" sequence:\").concat(e.sequence,\" messageList length:\").concat(a.length)).end(),a})).catch((function(e){t.probeNetwork().then((function(t){var o=Pn(t,2),r=o[0],a=o[1];n.setError(e,r,a).end()}))}))}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._remoteLastMessageSequenceMap.clear()}}]),n}(Al),jy=function(){function e(){yn(this,e),this._className=\"AvgE2EDelay\",this._e2eDelayArray=[]}return En(e,[{key:\"addMessageDelay\",value:function(e){var t=$i()-e;t>=0&&this._e2eDelayArray.push(t)}},{key:\"_calcAvg\",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),Wc(n/t,1)}},{key:\"_calcCountWithLimit\",value:function(e){var t=e.e2eDelayArray,n=e.min,o=e.max;return t.filter((function(e){return n<=e&&e<o})).length}},{key:\"_calcPercent\",value:function(e,t){var n=Wc(e/t*100,2);return n>100&&(n=100),n}},{key:\"_checkE2EDelayException\",value:function(e,t){var n=e.filter((function(e){return e>t}));if(n.length>0){var o=n.length,r=Math.min.apply(Math,Un(n)),a=Math.max.apply(Math,Un(n)),s=this._calcAvg(n,o),i=Wc(o/e.length*100,2);if(i>50)new dp(Hp).setMessage(\"message e2e delay exception. count:\".concat(o,\" min:\").concat(r,\" max:\").concat(a,\" avg:\").concat(s,\" percent:\").concat(i)).setLevel(\"warning\").end()}}},{key:\"getStatResult\",value:function(){var e=this._e2eDelayArray.length;if(0===e)return null;var t=Un(this._e2eDelayArray),n=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),o=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),r=this._calcPercent(n,e),a=this._calcPercent(o,e),s=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),t.length=0,this.reset(),{totalCount:e,countLessThan1Second:n,percentOfCountLessThan1Second:r,countLessThan3Second:o,percentOfCountLessThan3Second:a,avgDelay:s}}},{key:\"reset\",value:function(){this._e2eDelayArray.length=0}}]),e}(),Wy=function(){function e(){yn(this,e),this._className=\"AvgRTT\",this._requestCount=0,this._rttArray=[]}return En(e,[{key:\"addRequestCount\",value:function(){this._requestCount+=1}},{key:\"addRTT\",value:function(e){this._rttArray.push(e)}},{key:\"_calcTotalCount\",value:function(){return this._requestCount}},{key:\"_calcRTTCount\",value:function(e){return e.length}},{key:\"_calcSuccessRateOfRequest\",value:function(e,t){if(0===t)return 0;var n=Wc(e/t*100,2);return n>100&&(n=100),n}},{key:\"_calcAvg\",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),parseInt(n/t)}},{key:\"_calcMax\",value:function(){return Math.max.apply(Math,Un(this._rttArray))}},{key:\"_calcMin\",value:function(){return Math.min.apply(Math,Un(this._rttArray))}},{key:\"getStatResult\",value:function(){var e=this._calcTotalCount(),t=Un(this._rttArray);if(0===e)return null;var n=this._calcRTTCount(t),o=this._calcSuccessRateOfRequest(n,e),r=this._calcAvg(t,n);return Qi.log(\"\".concat(this._className,\".getStatResult max:\").concat(this._calcMax(),\" min:\").concat(this._calcMin(),\" avg:\").concat(r)),this.reset(),{totalCount:e,rttCount:n,successRateOfRequest:o,avgRTT:r}}},{key:\"reset\",value:function(){this._requestCount=0,this._rttArray.length=0}}]),e}(),Yy=function(){function e(){yn(this,e),this._map=new Map}return En(e,[{key:\"initMap\",value:function(e){var t=this;e.forEach((function(e){t._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}))}},{key:\"addTotalCount\",value:function(e){return!(gc(e)||!this._map.has(e))&&(this._map.get(e).totalCount+=1,!0)}},{key:\"addSuccessCount\",value:function(e){return!(gc(e)||!this._map.has(e))&&(this._map.get(e).successCount+=1,!0)}},{key:\"addFailedCountOfUserSide\",value:function(e){return!(gc(e)||!this._map.has(e))&&(this._map.get(e).failedCountOfUserSide+=1,!0)}},{key:\"addCost\",value:function(e,t){return!(gc(e)||!this._map.has(e))&&(this._map.get(e).costArray.push(t),!0)}},{key:\"addFileSize\",value:function(e,t){return!(gc(e)||!this._map.has(e))&&(this._map.get(e).fileSizeArray.push(t),!0)}},{key:\"_calcSuccessRateOfBusiness\",value:function(e){if(gc(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=Wc(t.successCount/t.totalCount*100,2);return n>100&&(n=100),n}},{key:\"_calcSuccessRateOfPlatform\",value:function(e){if(gc(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return(n=Wc(n,2))>100&&(n=100),n}},{key:\"_calcTotalCount\",value:function(e){return gc(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:\"_calcSuccessCountOfBusiness\",value:function(e){return gc(e)||!this._map.has(e)?-1:this._map.get(e).successCount}},{key:\"_calcSuccessCountOfPlatform\",value:function(e){if(gc(e)||!this._map.has(e))return-1;var t=this._map.get(e);return t.successCount+t.failedCountOfUserSide}},{key:\"_calcAvg\",value:function(e){return gc(e)||!this._map.has(e)?-1:e===op?this._calcAvgSpeed(e):this._calcAvgCost(e)}},{key:\"_calcAvgCost\",value:function(e){var t=this._map.get(e).costArray.length;if(0===t)return 0;var n=0;return this._map.get(e).costArray.forEach((function(e){n+=e})),parseInt(n/t)}},{key:\"_calcAvgSpeed\",value:function(e){var t=0,n=0;return this._map.get(e).costArray.forEach((function(e){t+=e})),this._map.get(e).fileSizeArray.forEach((function(e){n+=e})),parseInt(1e3*n/t)}},{key:\"getStatResult\",value:function(e){var t=this._calcTotalCount(e);if(0===t)return null;var n=this._calcSuccessCountOfBusiness(e),o=this._calcSuccessRateOfBusiness(e),r=this._calcSuccessCountOfPlatform(e),a=this._calcSuccessRateOfPlatform(e),s=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:n,successRateOfBusiness:o,successCountOfPlatform:r,successRateOfPlatform:a,avgValue:s}}},{key:\"reset\",value:function(e){gc(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}]),e}(),$y=function(){function e(){yn(this,e),this._lastMap=new Map,this._currentMap=new Map}return En(e,[{key:\"initMap\",value:function(e){var t=this;e.forEach((function(e){t._lastMap.set(e,new Map),t._currentMap.set(e,new Map)}))}},{key:\"addMessageSequence\",value:function(e){var t=e.key,n=e.message;if(gc(t)||!this._lastMap.has(t)||!this._currentMap.has(t))return!1;var o=n.conversationID,r=n.sequence,a=o.replace(Yn.CONV_GROUP,\"\");if(0===this._lastMap.get(t).size)this._addCurrentMap(e);else if(this._lastMap.get(t).has(a)){var s=this._lastMap.get(t).get(a),i=s.length-1;r>s[0]&&r<s[i]?(s.push(r),s.sort(),this._lastMap.get(t).set(a,s)):this._addCurrentMap(e)}else this._addCurrentMap(e);return!0}},{key:\"_addCurrentMap\",value:function(e){var t=e.key,n=e.message,o=n.conversationID,r=n.sequence,a=o.replace(Yn.CONV_GROUP,\"\");this._currentMap.get(t).has(a)||this._currentMap.get(t).set(a,[]),this._currentMap.get(t).get(a).push(r)}},{key:\"_copyData\",value:function(e){if(!gc(e)){this._lastMap.set(e,new Map);var t,n=this._lastMap.get(e),o=Bn(this._currentMap.get(e));try{for(o.s();!(t=o.n()).done;){var r=Pn(t.value,2),a=r[0],s=r[1];n.set(a,s)}}catch(i){o.e(i)}finally{o.f()}n=null,this._currentMap.set(e,new Map)}}},{key:\"getStatResult\",value:function(e){if(gc(this._currentMap.get(e))||gc(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;var t=0,n=0;if(this._lastMap.get(e).forEach((function(e,o){var r=Un(e.values()),a=r.length,s=r[a-1]-r[0]+1;t+=s,n+=a})),0===t)return null;var o=Wc(n/t*100,2);return o>100&&(o=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:n,successRateOfMessageReceived:o}}},{key:\"reset\",value:function(){this._currentMap.clear(),this._lastMap.clear()}}]),e}(),zy=function(e){An(n,e);var t=Gn(n);function n(e){var o;yn(this,n),(o=t.call(this,e))._className=\"QualityStatModule\",o.TAG=\"im-ssolog-quality-stat\",o.reportIndex=0,o.wholePeriod=!1,o._qualityItems=[Xd,Qd,Zd,ep,tp,np,op,rp,ap,sp],o._messageSentItems=[Zd,ep,tp,np,op],o._messageReceivedItems=[rp,ap,sp],o.REPORT_INTERVAL=120,o.REPORT_SDKAPPID_BLACKLIST=[],o.REPORT_TINYID_WHITELIST=[],o._statInfoArr=[],o._avgRTT=new Wy,o._avgE2EDelay=new jy,o._rateMessageSent=new Yy,o._rateMessageReceived=new $y;var r=o.getInnerEmitterInstance();return r.on(V_,o._onLoginSuccess,bn(o)),r.on(K_,o._onCloudConfigUpdated,bn(o)),o}return En(n,[{key:\"_onLoginSuccess\",value:function(){var e=this;this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems);var t=this.getModule(dl),n=t.getItem(this.TAG,!1);!Jc(n)&&fc(n.forEach)&&(Qi.log(\"\".concat(this._className,\"._onLoginSuccess.get quality stat log in storage, nums=\").concat(n.length)),n.forEach((function(t){e._statInfoArr.push(t)})),t.removeItem(this.TAG,!1))}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"q_rpt_interval\"),t=this.getCloudConfig(\"q_rpt_sdkappid_bl\"),n=this.getCloudConfig(\"q_rpt_tinyid_wl\");gc(e)||(this.REPORT_INTERVAL=Number(e)),gc(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(\",\").map((function(e){return Number(e)}))),gc(n)||(this.REPORT_TINYID_WHITELIST=n.split(\",\"))}},{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}},{key:\"addRequestCount\",value:function(){this._avgRTT.addRequestCount()}},{key:\"addRTT\",value:function(e){this._avgRTT.addRTT(e)}},{key:\"addMessageDelay\",value:function(e){this._avgE2EDelay.addMessageDelay(e)}},{key:\"addTotalCount\",value:function(e){this._rateMessageSent.addTotalCount(e)||Qi.warn(\"\".concat(this._className,\".addTotalCount invalid key:\"),e)}},{key:\"addSuccessCount\",value:function(e){this._rateMessageSent.addSuccessCount(e)||Qi.warn(\"\".concat(this._className,\".addSuccessCount invalid key:\"),e)}},{key:\"addFailedCountOfUserSide\",value:function(e){this._rateMessageSent.addFailedCountOfUserSide(e)||Qi.warn(\"\".concat(this._className,\".addFailedCountOfUserSide invalid key:\"),e)}},{key:\"addCost\",value:function(e,t){this._rateMessageSent.addCost(e,t)||Qi.warn(\"\".concat(this._className,\".addCost invalid key or cost:\"),e,t)}},{key:\"addFileSize\",value:function(e,t){this._rateMessageSent.addFileSize(e,t)||Qi.warn(\"\".concat(this._className,\".addFileSize invalid key or size:\"),e,t)}},{key:\"addMessageSequence\",value:function(e){this._rateMessageReceived.addMessageSequence(e)||Qi.warn(\"\".concat(this._className,\".addMessageSequence invalid key:\"),e.key)}},{key:\"_getQualityItem\",value:function(e){var t={},n=up[this.getNetworkType()];gc(n)&&(n=8);var o={qualityType:ip[e],timestamp:Wi(),networkType:n,extension:\"\"};switch(e){case Xd:t=this._avgRTT.getStatResult();break;case Qd:t=this._avgE2EDelay.getStatResult();break;case Zd:case ep:case tp:case np:case op:t=this._rateMessageSent.getStatResult(e);break;case rp:case ap:case sp:t=this._rateMessageReceived.getStatResult(e)}return null===t?null:Cn({},o,{},t)}},{key:\"_report\",value:function(e){var t=this,n=[],o=null;gc(e)?this._qualityItems.forEach((function(e){null!==(o=t._getQualityItem(e))&&(o.reportIndex=t.reportIndex,o.wholePeriod=t.wholePeriod,n.push(o))})):null!==(o=this._getQualityItem(e))&&(o.reportIndex=this.reportIndex,o.wholePeriod=this.wholePeriod,n.push(o)),Qi.debug(\"\".concat(this._className,\"._report\"),n),this._statInfoArr.length>0&&(n=n.concat(this._statInfoArr),this._statInfoArr=[]);var r=this.getModule(ll),a=r.getSDKAppID(),s=r.getTinyID();Yc(this.REPORT_SDKAPPID_BLACKLIST,a)&&!$c(this.REPORT_TINYID_WHITELIST,s)&&(n=[]),n.length>0&&this._doReport(n)}},{key:\"_doReport\",value:function(e){var t=this,n={header:Lm(this),quality:e};this.request({protocolName:Pd,requestData:Cn({},n)}).then((function(){t.reportIndex++,t.wholePeriod=!1})).catch((function(n){Qi.warn(\"\".concat(t._className,\"._doReport, online:\").concat(t.getNetworkType(),\" error:\"),n),t._statInfoArr=t._statInfoArr.concat(e),t._flushAtOnce()}))}},{key:\"_flushAtOnce\",value:function(){var e=this.getModule(dl),t=e.getItem(this.TAG,!1),n=this._statInfoArr;if(Jc(t))Qi.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var o=n.concat(t);o.length>10&&(o=o.slice(0,10)),Qi.log(\"\".concat(this.className,\"._flushAtOnce count:\").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}this._statInfoArr=[]}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}]),n}(Al),Jy=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"WorkerTimerModule\",o._isWorkerEnabled=!0,o._workerTimer=null,o._init(),o.getInnerEmitterInstance().on(K_,o._onCloudConfigUpdated,bn(o)),o}return En(n,[{key:\"isWorkerEnabled\",value:function(){return this._isWorkerEnabled&&bi}},{key:\"startWorkerTimer\",value:function(){Qi.log(\"\".concat(this._className,\".startWorkerTimer\")),this._workerTimer&&this._workerTimer.postMessage(\"start\")}},{key:\"stopWorkerTimer\",value:function(){Qi.log(\"\".concat(this._className,\".stopWorkerTimer\")),this._workerTimer&&this._workerTimer.postMessage(\"stop\")}},{key:\"_init\",value:function(){if(bi){var e=URL.createObjectURL(new Blob([\\'let interval = -1;onmessage = function(event) {  if (event.data === \"start\") {    if (interval > 0) {      clearInterval(interval);    }    interval = setInterval(() => {      postMessage(\"\");    }, 1000)  } else if (event.data === \"stop\") {    clearInterval(interval);    interval = -1;  }};\\'],{type:\"application/javascript; charset=utf-8\"}));this._workerTimer=new Worker(e);var t=this;this._workerTimer.onmessage=function(){t._moduleManager.onCheckTimer()}}}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"enable_worker\");Qi.log(\"\".concat(this._className,\"._onCloudConfigUpdated enableWorker:\").concat(e)),\"1\"===e?!this._isWorkerEnabled&&bi&&(this._isWorkerEnabled=!0,this.startWorkerTimer(),this._moduleManager.onWorkerTimerEnabled()):this._isWorkerEnabled&&bi&&(this._isWorkerEnabled=!1,this.stopWorkerTimer(),this._moduleManager.onWorkerTimerDisabled())}},{key:\"terminate\",value:function(){Qi.log(\"\".concat(this._className,\".terminate\")),this._workerTimer&&(this._workerTimer.terminate(),this._workerTimer=null)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\"))}}]),n}(Al),Xy=function(){function e(){yn(this,e),this._className=\"PurchasedFeatureHandler\",this._purchasedFeatureMap=new Map}return En(e,[{key:\"isValidPurchaseBits\",value:function(e){return e&&\"string\"==typeof e&&e.length>=1&&e.length<=64&&/[01]{1,64}/.test(e)}},{key:\"parsePurchaseBits\",value:function(e){var t=\"\".concat(this._className,\".parsePurchaseBits\");if(this.isValidPurchaseBits(e)){this._purchasedFeatureMap.clear();for(var n=Object.values(ti),o=null,r=e.length-1,a=0;r>=0;r--,a++)o=a<32?new Bs(0,Math.pow(2,a)).toString():new Bs(Math.pow(2,a-32),0).toString(),-1!==n.indexOf(o)&&(\"1\"===e[r]?this._purchasedFeatureMap.set(o,!0):this._purchasedFeatureMap.set(o,!1))}else Qi.warn(\"\".concat(t,\" invalid purchase bits:\").concat(e))}},{key:\"hasPurchasedFeature\",value:function(e){return!!this._purchasedFeatureMap.get(e)}},{key:\"clear\",value:function(){this._purchasedFeatureMap.clear()}}]),e}(),Qy=function(e){An(n,e);var t=Gn(n);function n(e){var o;return yn(this,n),(o=t.call(this,e))._className=\"CommercialConfigModule\",o._expiredTime=0,o._isFetching=!1,o._purchasedFeatureHandler=new Xy,o}return En(n,[{key:\"_canFetch\",value:function(){return this.isLoggedIn()?!this._isFetching&&Date.now()>=this._expiredTime:(this._expiredTime=Date.now()+2e3,!1)}},{key:\"onCheckTimer\",value:function(e){this._canFetch()&&this.fetchConfig()}},{key:\"fetchConfig\",value:function(){var e=this,t=this._canFetch(),n=\"\".concat(this._className,\".fetchConfig\");if(Qi.log(\"\".concat(n,\" canFetch:\").concat(t)),t){var o=new dp(xg);o.setNetworkType(this.getNetworkType());var r=this.getModule(ll).getSDKAppID();this._isFetching=!0,this.request({protocolName:Wd,requestData:{SDKAppID:r}}).then((function(t){o.setMessage(\"purchaseBits:\".concat(t.data.purchaseBits)).end(),Qi.log(\"\".concat(n,\" ok.\")),e._parseConfig(t.data),e._isFetching=!1})).catch((function(t){e.probeNetwork().then((function(e){var n=Pn(e,2),r=n[0],a=n[1];o.setError(t,r,a).end()})),e._isFetching=!1}))}}},{key:\"onPushedConfig\",value:function(e){var t=\"\".concat(this._className,\".onPushedConfig\");Qi.log(\"\".concat(t)),new dp(Vg).setNetworkType(this.getNetworkType()).setMessage(\"purchaseBits:\".concat(e.purchaseBits)).end(),this._parseConfig(e)}},{key:\"_parseConfig\",value:function(e){var t=\"\".concat(this._className,\"._parseConfig\"),n=e.errorCode,o=e.errorMessage,r=e.purchaseBits,a=e.expiredTime;0===n?(this._purchasedFeatureHandler.parsePurchaseBits(r),this._expiredTime=Date.now()+1e3*a):gc(n)?(Qi.log(\"\".concat(t,\" failed. Invalid message format:\"),e),this._setExpiredTimeOnResponseError(36e5)):(Qi.error(\"\".concat(t,\" errorCode:\").concat(n,\" errorMessage:\").concat(o)),this._setExpiredTimeOnResponseError(12e4))}},{key:\"_setExpiredTimeOnResponseError\",value:function(e){this._expiredTime=Date.now()+e}},{key:\"hasPurchasedFeature\",value:function(e){return this._purchasedFeatureHandler.hasPurchasedFeature(e)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler.clear()}}]),n}(Al),Zy=function(){function e(t){yn(this,e);var n=new dp(pp);this._className=\"ModuleManager\",this._isReady=!1,this._reason=zd.USER_NOT_LOGGED_IN,this._startLoginTs=0,this._moduleMap=new Map,this._innerEmitter=null,this._outerEmitter=null,this._checkCount=0,this._checkTimer=-1,this._moduleMap.set(ll,new Dm(this,t)),this._moduleMap.set(Cl,new Qy(this)),this._moduleMap.set(Il,new By(this)),this._moduleMap.set(El,new Jy(this)),this._moduleMap.set(Sl,new zy(this)),this._moduleMap.set(Ml,new Py(this)),this._moduleMap.set(vl,new Vy(this)),this._moduleMap.set(nl,new Nm(this)),this._moduleMap.set(ol,new Bm(this)),this._moduleMap.set(rl,new Am(this)),this._moduleMap.set(al,new R_(this)),this._moduleMap.set(ul,new sm(this)),this._moduleMap.set(sl,new ym(this)),this._moduleMap.set(cl,new Em(this)),this._moduleMap.set(dl,new Om(this)),this._moduleMap.set(pl,new bm(this)),this._moduleMap.set(gl,new Pm(this)),this._moduleMap.set(hl,new Fm(this)),this._moduleMap.set(fl,new qm(this)),this._moduleMap.set(_l,new Hm(this)),this._moduleMap.set(ml,new jm(this)),this._moduleMap.set(yl,new Ky(this)),this._moduleMap.set(Tl,new Hy(this)),this._eventThrottleMap=new Map;var o=t.instanceID,r=t.oversea,a=t.SDKAppID,s=\"instanceID:\".concat(o,\" SDKAppID:\").concat(a,\" host:\").concat(Kc(),\" oversea:\").concat(r,\" inBrowser:\").concat(gi,\" inMiniApp:\").concat(pi)+\" workerAvailable:\".concat(bi,\" UserAgent:\").concat(_i);dp.bindEventStatModule(this._moduleMap.get(pl)),n.setMessage(\"\".concat(s,\" \").concat(function(){var e=\"\";if(pi)try{var t=hi.getSystemInfoSync(),n=t.model,o=t.version,r=t.system,a=t.platform,s=t.SDKVersion;e=\"model:\".concat(n,\" version:\").concat(o,\" system:\").concat(r,\" platform:\").concat(a,\" SDKVersion:\").concat(s)}catch(sI){e=\"\"}return e}())).end(),Qi.info(\"SDK \".concat(s)),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}return En(e,[{key:\"_startTimer\",value:function(){var e=this._moduleMap.get(El),t=e.isWorkerEnabled();Qi.log(\"\".concat(this._className,\".startTimer isWorkerEnabled:\").concat(t,\" seed:\").concat(this._checkTimer)),t?e.startWorkerTimer():this._startMainThreadTimer()}},{key:\"_startMainThreadTimer\",value:function(){Qi.log(\"\".concat(this._className,\"._startMainThreadTimer\")),this._checkTimer<0&&(this._checkTimer=setInterval(this.onCheckTimer.bind(this),1e3))}},{key:\"stopTimer\",value:function(){var e=this._moduleMap.get(El),t=e.isWorkerEnabled();Qi.log(\"\".concat(this._className,\".stopTimer isWorkerEnabled:\").concat(t,\" seed:\").concat(this._checkTimer)),t?e.stopWorkerTimer():this._stopMainThreadTimer()}},{key:\"_stopMainThreadTimer\",value:function(){Qi.log(\"\".concat(this._className,\"._stopMainThreadTimer\")),this._checkTimer>0&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}},{key:\"_stopMainThreadSocket\",value:function(){Qi.log(\"\".concat(this._className,\"._stopMainThreadSocket\"));var e=this._moduleMap.get(Ml);e.setIsWorkerEnabled(!0),e.reConnect()}},{key:\"_startMainThreadSocket\",value:function(){Qi.log(\"\".concat(this._className,\"._startMainThreadSocket\"));var e=this._moduleMap.get(Ml);e.setIsWorkerEnabled(!1),e.reConnect()}},{key:\"onWorkerTimerEnabled\",value:function(){Qi.log(\"\".concat(this._className,\".onWorkerTimerEnabled, disable main thread timer and socket\")),this._stopMainThreadTimer(),this._stopMainThreadSocket()}},{key:\"onWorkerTimerDisabled\",value:function(){Qi.log(\"\".concat(this._className,\".onWorkerTimerDisabled, enable main thread timer and socket\")),this._startMainThreadTimer(),this._startMainThreadSocket()}},{key:\"onCheckTimer\",value:function(){this._checkCount+=1;var e,t=Bn(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=Pn(e.value,2)[1];n.onCheckTimer&&n.onCheckTimer(this._checkCount)}}catch(o){t.e(o)}finally{t.f()}}},{key:\"_initReadyList\",value:function(){var e=this;this._readyList=[this._moduleMap.get(nl),this._moduleMap.get(ul)],this._readyList.forEach((function(t){t.ready((function(){return e._onModuleReady()}))}))}},{key:\"_onModuleReady\",value:function(){var e=!0;if(this._readyList.forEach((function(t){t.isReady()||(e=!1)})),e&&!this._isReady){this._isReady=!0,this._outerEmitter.emit(Wn.SDK_READY);var t=Date.now()-this._startLoginTs;Qi.warn(\"SDK is ready. cost \".concat(t,\" ms\")),this._startLoginTs=Date.now();var n=this._moduleMap.get(gl).getNetworkType(),o=this._ssoLogForReady.getStartTs()+ji;this._ssoLogForReady.setNetworkType(n).setMessage(t).start(o).end()}}},{key:\"login\",value:function(){0===this._startLoginTs&&(Yi(),this._startLoginTs=Date.now(),this._startTimer(),this._moduleMap.get(gl).start(),this._ssoLogForReady=new dp(gp),this._reason=zd.LOGGING_IN)}},{key:\"onLoginFailed\",value:function(){this._startLoginTs=0}},{key:\"getOuterEmitterInstance\",value:function(){return null===this._outerEmitter&&(this._outerEmitter=new Um,N_(this._outerEmitter),this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(e,t){var n=this;if(e===Wn.CONVERSATION_LIST_UPDATED||e===Wn.FRIEND_LIST_UPDATED||e===Wn.GROUP_LIST_UPDATED)if(this._eventThrottleMap.has(e)){var o=Date.now(),r=this._eventThrottleMap.get(e);o-r.last<1e3?(r.timeoutID&&clearTimeout(r.timeoutID),r.timeoutID=setTimeout((function(){r.last=o,n._outerEmitter._emit.apply(n._outerEmitter,[e,{name:e,data:n._getEventData(e)}])}),500)):(r.last=o,this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]))}else this._eventThrottleMap.set(e,{last:Date.now(),timeoutID:-1}),this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]);else this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:arguments[1]}])}.bind(this)),this._outerEmitter}},{key:\"_getEventData\",value:function(e){return e===Wn.CONVERSATION_LIST_UPDATED?this._moduleMap.get(ul).getLocalConversationList():e===Wn.FRIEND_LIST_UPDATED?this._moduleMap.get(il).getLocalFriendList(!1):e===Wn.GROUP_LIST_UPDATED?this._moduleMap.get(sl).getLocalGroupList():void 0}},{key:\"getInnerEmitterInstance\",value:function(){return null===this._innerEmitter&&(this._innerEmitter=new Um,this._innerEmitter._emit=this._innerEmitter.emit,this._innerEmitter.emit=function(e,t){var n;dc(arguments[1])&&arguments[1].data?(Qi.warn(\"inner eventData has data property, please check!\"),n=[e,{name:arguments[0],data:arguments[1].data}]):n=[e,{name:arguments[0],data:arguments[1]}],this._innerEmitter._emit.apply(this._innerEmitter,n)}.bind(this)),this._innerEmitter}},{key:\"hasModule\",value:function(e){return this._moduleMap.has(e)}},{key:\"getModule\",value:function(e){return this._moduleMap.get(e)}},{key:\"isReady\",value:function(){return this._isReady}},{key:\"getNotReadyReason\",value:function(){return this._reason}},{key:\"setNotReadyReason\",value:function(e){this._reason=e}},{key:\"onError\",value:function(e){Qi.warn(\"Oops! code:\".concat(e.code,\" message:\").concat(e.message)),new dp(Kg).setMessage(\"code:\".concat(e.code,\" message:\").concat(e.message)).setNetworkType(this.getModule(gl).getNetworkType()).setLevel(\"error\").end(),this.getOuterEmitterInstance().emit(Wn.ERROR,e)}},{key:\"reset\",value:function(){Qi.log(\"\".concat(this._className,\".reset\")),Yi();var e,t=Bn(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=Pn(e.value,2)[1];n.reset&&n.reset()}}catch(s){t.e(s)}finally{t.f()}this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._outerEmitter.emit(Wn.SDK_NOT_READY);var o,r=Bn(this._eventThrottleMap);try{for(r.s();!(o=r.n()).done;){var a=Pn(o.value,2)[1];a.timeoutID&&clearTimeout(a.timeoutID)}}catch(s){r.e(s)}finally{r.f()}this._eventThrottleMap.clear()}}]),e}(),eI=function(){function e(){yn(this,e),this._funcMap=new Map}return En(e,[{key:\"defense\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(\"string\"!=typeof e)return null;if(0===e.length)return null;if(\"function\"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var o=null;return this._funcMap.get(e).has(t)?o=this._funcMap.get(e).get(t):(o=this._pack(e,t,n),this._funcMap.get(e).set(t,o)),o}},{key:\"defenseOnce\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return\"function\"!=typeof t?null:this._pack(e,t,n)}},{key:\"find\",value:function(e,t){return\"string\"!=typeof e||0===e.length||\"function\"!=typeof t?null:this._funcMap.has(e)?this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(Qi.log(\"SafetyCallback.find: 找不到 func —— \".concat(e,\"/\").concat(\"\"!==t.name?t.name:\"[anonymous]\")),null):(Qi.log(\"SafetyCallback.find: 找不到 eventName-\".concat(e,\" 对应的 func\")),null)}},{key:\"delete\",value:function(e,t){return\"function\"==typeof t&&(!!this._funcMap.has(e)&&(!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)))}},{key:\"_pack\",value:function(e,t,n){return function(){try{t.apply(n,Array.from(arguments))}catch(s){var o=Object.values(Wn).indexOf(e);if(-1!==o){var r=Object.keys(Wn)[o];Qi.warn(\"接入侧事件 TIM.EVENT.\".concat(r,\" 对应的回调函数逻辑存在问题，请检查！\"),s)}var a=new dp(Ug);a.setMessage(\"eventName:\".concat(e)).setMoreMessage(s.message).end()}}}}]),e}(),tI=function(){function e(t){yn(this,e);var n={SDKAppID:t.SDKAppID,unlimitedAVChatRoom:t.unlimitedAVChatRoom||!1,scene:t.scene||\"\",oversea:t.oversea||!1,instanceID:Vc(),devMode:t.devMode||!1,proxyServer:t.proxyServer||void 0};this._moduleManager=new Zy(n),this._safetyCallbackFactory=new eI}return En(e,[{key:\"onError\",value:function(e){this._moduleManager.onError(e)}},{key:\"login\",value:function(e){return this._moduleManager.login(),this._moduleManager.getModule(nl).login(e)}},{key:\"logout\",value:function(){var e=this;return this._moduleManager.getModule(nl).logout().then((function(t){return e._moduleManager.reset(),t}))}},{key:\"isReady\",value:function(){return this._moduleManager.isReady()}},{key:\"getNotReadyReason\",value:function(){return this._moduleManager.getNotReadyReason()}},{key:\"destroy\",value:function(){var e=this;return this.logout().finally((function(){e._moduleManager.stopTimer(),e._moduleManager.getModule(El).terminate(),e._moduleManager.getModule(Ml).dealloc();var t=e._moduleManager.getOuterEmitterInstance(),n=e._moduleManager.getModule(ll);t.emit(Wn.SDK_DESTROY,{SDKAppID:n.getSDKAppID()})}))}},{key:\"on\",value:function(e,t,n){e===Wn.GROUP_SYSTEM_NOTICE_RECEIVED&&Qi.warn(\"！！！TIM.EVENT.GROUP_SYSTEM_NOTICE_RECEIVED v2.6.0起弃用，为了更好的体验，请在 TIM.EVENT.MESSAGE_RECEIVED 事件回调内接收处理群系统通知，详细请参考：https://web.sdk.qcloud.com/im/doc/zh-cn/Message.html#.GroupSystemNoticePayload\"),Qi.debug(\"on\",\"eventName:\".concat(e)),this._moduleManager.getOuterEmitterInstance().on(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:\"once\",value:function(e,t,n){Qi.debug(\"once\",\"eventName:\".concat(e)),this._moduleManager.getOuterEmitterInstance().once(e,this._safetyCallbackFactory.defenseOnce(e,t,n),n||this)}},{key:\"off\",value:function(e,t,n,o){Qi.debug(\"off\",\"eventName:\".concat(e));var r=this._safetyCallbackFactory.find(e,t);null!==r&&(this._moduleManager.getOuterEmitterInstance().off(e,r,n,o),this._safetyCallbackFactory.delete(e,t))}},{key:\"registerPlugin\",value:function(e){this._moduleManager.getModule(_l).registerPlugin(e)}},{key:\"setLogLevel\",value:function(e){if(e<=0){console.log([\"\",\" ________  ______  __       __  __       __  ________  _______\",\"|        \\\\\\\\|      \\\\\\\\|  \\\\\\\\     /  \\\\\\\\|  \\\\\\\\  _  |  \\\\\\\\|        \\\\\\\\|       \\\\\\\\\",\" \\\\\\\\$$$$$$$$ \\\\\\\\$$$$$$| $$\\\\\\\\   /  $$| $$ / \\\\\\\\ | $$| $$$$$$$$| $$$$$$$\\\\\\\\\",\"   | $$     | $$  | $$$\\\\\\\\ /  $$$| $$/  $\\\\\\\\| $$| $$__    | $$__/ $$\",\"   | $$     | $$  | $$$$\\\\\\\\  $$$$| $$  $$$\\\\\\\\ $$| $$  \\\\\\\\   | $$    $$\",\"   | $$     | $$  | $$\\\\\\\\$$ $$ $$| $$ $$\\\\\\\\$$\\\\\\\\$$| $$$$$   | $$$$$$$\\\\\\\\\",\"   | $$    _| $$_ | $$ \\\\\\\\$$$| $$| $$$$  \\\\\\\\$$$$| $$_____ | $$__/ $$\",\"   | $$   |   $$ \\\\\\\\| $$  \\\\\\\\$ | $$| $$$    \\\\\\\\$$$| $$     \\\\\\\\| $$    $$\",\"    \\\\\\\\$$    \\\\\\\\$$$$$$ \\\\\\\\$$      \\\\\\\\$$ \\\\\\\\$$      \\\\\\\\$$ \\\\\\\\$$$$$$$$ \\\\\\\\$$$$$$$\",\"\",\"\"].join(\"\\\\n\")),console.log(\"%cIM 智能客服，随时随地解决您的问题 →_→ https://cloud.tencent.com/act/event/smarty-service?from=im-doc\",\"color:#006eff\"),console.log(\"%c从v2.11.2起，SDK 支持了 WebSocket，小程序需要添加受信域名！升级指引: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html\",\"color:#ff0000\");console.log([\"\",\"参考以下文档，会更快解决问题哦！(#^.^#)\\\\n\",\"SDK 更新日志: https://cloud.tencent.com/document/product/269/38492\\\\n\",\"SDK 接口文档: https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html\\\\n\",\"常见问题: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-01-faq.html\\\\n\",\"反馈问题？戳我提 issue: https://github.com/tencentyun/TIMSDK/issues\\\\n\",\"如果您需要在生产环境关闭上面的日志，请 tim.setLogLevel(1)\\\\n\"].join(\"\\\\n\"))}Qi.setLevel(e)}},{key:\"createTextMessage\",value:function(e){return this._moduleManager.getModule(ol).createTextMessage(e)}},{key:\"createTextAtMessage\",value:function(e){return this._moduleManager.getModule(ol).createTextMessage(e)}},{key:\"createImageMessage\",value:function(e){return this._moduleManager.getModule(ol).createImageMessage(e)}},{key:\"createAudioMessage\",value:function(e){return this._moduleManager.getModule(ol).createAudioMessage(e)}},{key:\"createVideoMessage\",value:function(e){return this._moduleManager.getModule(ol).createVideoMessage(e)}},{key:\"createCustomMessage\",value:function(e){return this._moduleManager.getModule(ol).createCustomMessage(e)}},{key:\"createFaceMessage\",value:function(e){return this._moduleManager.getModule(ol).createFaceMessage(e)}},{key:\"createFileMessage\",value:function(e){return this._moduleManager.getModule(ol).createFileMessage(e)}},{key:\"createLocationMessage\",value:function(e){return this._moduleManager.getModule(ol).createLocationMessage(e)}},{key:\"createMergerMessage\",value:function(e){return this._moduleManager.getModule(ol).createMergerMessage(e)}},{key:\"downloadMergerMessage\",value:function(e){return e.type!==Yn.MSG_MERGER?O_(new A_({code:zd.MESSAGE_MERGER_TYPE_INVALID,message:Jd.MESSAGE_MERGER_TYPE_INVALID})):Jc(e.payload.downloadKey)?O_(new A_({code:zd.MESSAGE_MERGER_KEY_INVALID,message:Jd.MESSAGE_MERGER_KEY_INVALID})):this._moduleManager.getModule(ol).downloadMergerMessage(e).catch((function(e){return O_(new A_({code:zd.MESSAGE_MERGER_DOWNLOAD_FAIL,message:Jd.MESSAGE_MERGER_DOWNLOAD_FAIL}))}))}},{key:\"createForwardMessage\",value:function(e){return this._moduleManager.getModule(ol).createForwardMessage(e)}},{key:\"sendMessage\",value:function(e,t){return e instanceof M_?this._moduleManager.getModule(ol).sendMessageInstance(e,t):O_(new A_({code:zd.MESSAGE_SEND_NEED_MESSAGE_INSTANCE,message:Jd.MESSAGE_SEND_NEED_MESSAGE_INSTANCE}))}},{key:\"callExperimentalAPI\",value:function(e,t){return\"handleGroupInvitation\"===e?this._moduleManager.getModule(sl).handleGroupInvitation(t):O_(new A_({code:zd.INVALID_OPERATION,message:Jd.INVALID_OPERATION}))}},{key:\"revokeMessage\",value:function(e){return this._moduleManager.getModule(ol).revokeMessage(e)}},{key:\"resendMessage\",value:function(e){return this._moduleManager.getModule(ol).resendMessage(e)}},{key:\"deleteMessage\",value:function(e){return this._moduleManager.getModule(ol).deleteMessage(e)}},{key:\"getMessageList\",value:function(e){return this._moduleManager.getModule(ul).getMessageList(e)}},{key:\"sendMessageReadReceipt\",value:function(e){return this._moduleManager.getModule(sl).sendReadReceipt(e)}},{key:\"getMessageReadReceiptList\",value:function(e){return this._moduleManager.getModule(sl).getReadReceiptList(e)}},{key:\"getGroupMessageReadMemberList\",value:function(e){return this._moduleManager.getModule(sl).getReadReceiptDetail(e)}},{key:\"findMessage\",value:function(e){return this._moduleManager.getModule(ul).findMessage(e)}},{key:\"setMessageRead\",value:function(e){return this._moduleManager.getModule(ul).setMessageRead(e)}},{key:\"getConversationList\",value:function(e){return this._moduleManager.getModule(ul).getConversationList(e)}},{key:\"getConversationProfile\",value:function(e){return this._moduleManager.getModule(ul).getConversationProfile(e)}},{key:\"deleteConversation\",value:function(e){return this._moduleManager.getModule(ul).deleteConversation(e)}},{key:\"pinConversation\",value:function(e){return this._moduleManager.getModule(ul).pinConversation(e)}},{key:\"setAllMessageRead\",value:function(e){return this._moduleManager.getModule(ul).setAllMessageRead(e)}},{key:\"setMessageRemindType\",value:function(e){return this._moduleManager.getModule(ul).setMessageRemindType(e)}},{key:\"getMyProfile\",value:function(){return this._moduleManager.getModule(rl).getMyProfile()}},{key:\"getUserProfile\",value:function(e){return this._moduleManager.getModule(rl).getUserProfile(e)}},{key:\"updateMyProfile\",value:function(e){return this._moduleManager.getModule(rl).updateMyProfile(e)}},{key:\"getBlacklist\",value:function(){return this._moduleManager.getModule(rl).getLocalBlacklist()}},{key:\"addToBlacklist\",value:function(e){return this._moduleManager.getModule(rl).addBlacklist(e)}},{key:\"removeFromBlacklist\",value:function(e){return this._moduleManager.getModule(rl).deleteBlacklist(e)}},{key:\"getFriendList\",value:function(){var e=this._moduleManager.getModule(il);return e?e.getLocalFriendList():O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"addFriend\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.addFriend(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"deleteFriend\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.deleteFriend(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"checkFriend\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.checkFriend(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"getFriendProfile\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.getFriendProfile(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"updateFriend\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.updateFriend(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"getFriendApplicationList\",value:function(){var e=this._moduleManager.getModule(il);return e?e.getLocalFriendApplicationList():O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"acceptFriendApplication\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.acceptFriendApplication(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"refuseFriendApplication\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.refuseFriendApplication(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"deleteFriendApplication\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.deleteFriendApplication(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"setFriendApplicationRead\",value:function(){var e=this._moduleManager.getModule(il);return e?e.setFriendApplicationRead():O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"getFriendGroupList\",value:function(){var e=this._moduleManager.getModule(il);return e?e.getLocalFriendGroupList():O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"createFriendGroup\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.createFriendGroup(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"deleteFriendGroup\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.deleteFriendGroup(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"addToFriendGroup\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.addToFriendGroup(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"removeFromFriendGroup\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.removeFromFriendGroup(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"renameFriendGroup\",value:function(e){var t=this._moduleManager.getModule(il);return t?t.renameFriendGroup(e):O_({code:zd.CANNOT_FIND_MODULE,message:Jd.CANNOT_FIND_MODULE})}},{key:\"getGroupList\",value:function(e){return this._moduleManager.getModule(sl).getGroupList(e)}},{key:\"getGroupProfile\",value:function(e){return this._moduleManager.getModule(sl).getGroupProfile(e)}},{key:\"createGroup\",value:function(e){return this._moduleManager.getModule(sl).createGroup(e)}},{key:\"dismissGroup\",value:function(e){return this._moduleManager.getModule(sl).dismissGroup(e)}},{key:\"updateGroupProfile\",value:function(e){return this._moduleManager.getModule(sl).updateGroupProfile(e)}},{key:\"joinGroup\",value:function(e){return this._moduleManager.getModule(sl).joinGroup(e)}},{key:\"quitGroup\",value:function(e){return this._moduleManager.getModule(sl).quitGroup(e)}},{key:\"searchGroupByID\",value:function(e){return this._moduleManager.getModule(sl).searchGroupByID(e)}},{key:\"getGroupOnlineMemberCount\",value:function(e){return this._moduleManager.getModule(sl).getGroupOnlineMemberCount(e)}},{key:\"changeGroupOwner\",value:function(e){return this._moduleManager.getModule(sl).changeGroupOwner(e)}},{key:\"handleGroupApplication\",value:function(e){return this._moduleManager.getModule(sl).handleGroupApplication(e)}},{key:\"initGroupAttributes\",value:function(e){return this._moduleManager.getModule(sl).initGroupAttributes(e)}},{key:\"setGroupAttributes\",value:function(e){return this._moduleManager.getModule(sl).setGroupAttributes(e)}},{key:\"deleteGroupAttributes\",value:function(e){return this._moduleManager.getModule(sl).deleteGroupAttributes(e)}},{key:\"getGroupAttributes\",value:function(e){return this._moduleManager.getModule(sl).getGroupAttributes(e)}},{key:\"getGroupMemberList\",value:function(e){return this._moduleManager.getModule(cl).getGroupMemberList(e)}},{key:\"getGroupMemberProfile\",value:function(e){return this._moduleManager.getModule(cl).getGroupMemberProfile(e)}},{key:\"addGroupMember\",value:function(e){return this._moduleManager.getModule(cl).addGroupMember(e)}},{key:\"deleteGroupMember\",value:function(e){return this._moduleManager.getModule(cl).deleteGroupMember(e)}},{key:\"setGroupMemberMuteTime\",value:function(e){return this._moduleManager.getModule(cl).setGroupMemberMuteTime(e)}},{key:\"setGroupMemberRole\",value:function(e){return this._moduleManager.getModule(cl).setGroupMemberRole(e)}},{key:\"setGroupMemberNameCard\",value:function(e){return this._moduleManager.getModule(cl).setGroupMemberNameCard(e)}},{key:\"setGroupMemberCustomField\",value:function(e){return this._moduleManager.getModule(cl).setGroupMemberCustomField(e)}}]),e}(),nI={login:\"login\",logout:\"logout\",destroy:\"destroy\",on:\"on\",off:\"off\",ready:\"ready\",setLogLevel:\"setLogLevel\",joinGroup:\"joinGroup\",quitGroup:\"quitGroup\",registerPlugin:\"registerPlugin\",getGroupOnlineMemberCount:\"getGroupOnlineMemberCount\"};function oI(e,t){if(e.isReady()||void 0!==nI[t])return!0;var n=e.getNotReadyReason(),o=\"\";Object.getOwnPropertyNames(zd).forEach((function(e){zd[e]===n&&(o=Jd[e])}));var r={code:n,message:\"\".concat(o,\"导致 sdk not ready。\").concat(t,\" \").concat(Jd.SDK_IS_NOT_READY,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/module-EVENT.html#.SDK_READY\")};return e.onError(r),r}var rI={},aI={};return aI.create=function(e){var t=0;if(cc(e.SDKAppID))t=e.SDKAppID;else if(Qi.warn(\"TIM.create SDKAppID 的类型应该为 Number，请修改！\"),t=parseInt(e.SDKAppID),isNaN(t))return Qi.error(\"TIM.create failed. 解析 SDKAppID 失败，请检查传参！\"),null;if(t&&rI[t])return rI[t];Qi.log(\"TIM.create\");var n=new tI(Cn({},e,{SDKAppID:t}));n.on(Wn.SDK_DESTROY,(function(e){rI[e.data.SDKAppID]=null,delete rI[e.data.SDKAppID]}));var o=function(e){var t=Object.create(null);return Object.keys(Yu).forEach((function(n){if(e[n]){var o=Yu[n],r=new co;t[o]=function(){var t=Array.from(arguments);return r.use((function(t,o){var r=oI(e,n);return!0===r?o():O_(r)})).use((function(e,t){if(!0===Xc(e,Wu[n],o))return t()})).use((function(t,o){return e[n].apply(e,t)})),r.run(t)}}})),t}(n);return rI[t]=o,Qi.log(\"TIM.create ok\"),o},aI.TYPES=Yn,aI.EVENT=Wn,aI.VERSION=\"2.18.0\",Qi.log(\"TIM.VERSION: \".concat(aI.VERSION)),aI}));\\r\\n\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGltLWpzLXNkay90aW0tanMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGltLWpzLXNkay90aW0tanMuanM/ZTIzZSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7IWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuVElNPXQoKX0odGhpcywoZnVuY3Rpb24oKXt2YXIgZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6e307ZnVuY3Rpb24gdChlLHQpe3JldHVybiBlKHQ9e2V4cG9ydHM6e319LHQuZXhwb3J0cyksdC5leHBvcnRzfXZhciBuPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLk1hdGg9PU1hdGgmJmV9LG89bihcIm9iamVjdFwiPT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcyl8fG4oXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93KXx8bihcIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmc2VsZil8fG4oXCJvYmplY3RcIj09dHlwZW9mIGUmJmUpfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkscj1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fSxhPSFyKChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sMSx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSlbMV19KSkscz17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsYz17ZjppJiYhcy5jYWxsKHsxOjJ9LDEpP2Z1bmN0aW9uKGUpe3ZhciB0PWkodGhpcyxlKTtyZXR1cm4hIXQmJnQuZW51bWVyYWJsZX06c30sdT1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX0sbD17fS50b1N0cmluZyxkPWZ1bmN0aW9uKGUpe3JldHVybiBsLmNhbGwoZSkuc2xpY2UoOCwtMSl9LHA9XCJcIi5zcGxpdCxnPXIoKGZ1bmN0aW9uKCl7cmV0dXJuIU9iamVjdChcInpcIikucHJvcGVydHlJc0VudW1lcmFibGUoMCl9KSk/ZnVuY3Rpb24oZSl7cmV0dXJuXCJTdHJpbmdcIj09ZChlKT9wLmNhbGwoZSxcIlwiKTpPYmplY3QoZSl9Ok9iamVjdCxoPWZ1bmN0aW9uKGUpe2lmKG51bGw9PWUpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gXCIrZSk7cmV0dXJuIGV9LGY9ZnVuY3Rpb24oZSl7cmV0dXJuIGcoaChlKSl9LF89ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGU/bnVsbCE9PWU6XCJmdW5jdGlvblwiPT10eXBlb2YgZX0sbT1mdW5jdGlvbihlLHQpe2lmKCFfKGUpKXJldHVybiBlO3ZhciBuLG87aWYodCYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj1lLnRvU3RyaW5nKSYmIV8obz1uLmNhbGwoZSkpKXJldHVybiBvO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mKG49ZS52YWx1ZU9mKSYmIV8obz1uLmNhbGwoZSkpKXJldHVybiBvO2lmKCF0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZihuPWUudG9TdHJpbmcpJiYhXyhvPW4uY2FsbChlKSkpcmV0dXJuIG87dGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpfSx2PXt9Lmhhc093blByb3BlcnR5LE09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdi5jYWxsKGUsdCl9LHk9by5kb2N1bWVudCxJPV8oeSkmJl8oeS5jcmVhdGVFbGVtZW50KSxFPWZ1bmN0aW9uKGUpe3JldHVybiBJP3kuY3JlYXRlRWxlbWVudChlKTp7fX0sVD0hYSYmIXIoKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFKFwiZGl2XCIpLFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSkpLFM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixDPXtmOmE/UzpmdW5jdGlvbihlLHQpe2lmKGU9ZihlKSx0PW0odCwhMCksVCl0cnl7cmV0dXJuIFMoZSx0KX1jYXRjaChuKXt9aWYoTShlLHQpKXJldHVybiB1KCFjLmYuY2FsbChlLHQpLGVbdF0pfX0sQT1mdW5jdGlvbihlKXtpZighXyhlKSl0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGUpK1wiIGlzIG5vdCBhbiBvYmplY3RcIik7cmV0dXJuIGV9LEQ9T2JqZWN0LmRlZmluZVByb3BlcnR5LE49e2Y6YT9EOmZ1bmN0aW9uKGUsdCxuKXtpZihBKGUpLHQ9bSh0LCEwKSxBKG4pLFQpdHJ5e3JldHVybiBEKGUsdCxuKX1jYXRjaChvKXt9aWYoXCJnZXRcImluIG58fFwic2V0XCJpbiBuKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkXCIpO3JldHVyblwidmFsdWVcImluIG4mJihlW3RdPW4udmFsdWUpLGV9fSxrPWE/ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBOLmYoZSx0LHUoMSxuKSl9OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZVt0XT1uLGV9LE89ZnVuY3Rpb24oZSx0KXt0cnl7ayhvLGUsdCl9Y2F0Y2gobil7b1tlXT10fXJldHVybiB0fSxSPW9bXCJfX2NvcmUtanNfc2hhcmVkX19cIl18fE8oXCJfX2NvcmUtanNfc2hhcmVkX19cIix7fSksTD1GdW5jdGlvbi50b1N0cmluZztcImZ1bmN0aW9uXCIhPXR5cGVvZiBSLmluc3BlY3RTb3VyY2UmJihSLmluc3BlY3RTb3VyY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIEwuY2FsbChlKX0pO3ZhciBiLHcsRyxQPVIuaW5zcGVjdFNvdXJjZSxVPW8uV2Vha01hcCxGPVwiZnVuY3Rpb25cIj09dHlwZW9mIFUmJi9uYXRpdmUgY29kZS8udGVzdChQKFUpKSxxPXQoKGZ1bmN0aW9uKGUpeyhlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUltlXXx8KFJbZV09dm9pZCAwIT09dD90Ont9KX0pKFwidmVyc2lvbnNcIixbXSkucHVzaCh7dmVyc2lvbjpcIjMuNi40XCIsbW9kZTpcImdsb2JhbFwiLGNvcHlyaWdodDpcIsKpIDIwMjAgRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSlcIn0pfSkpLHg9MCxWPU1hdGgucmFuZG9tKCksSz1mdW5jdGlvbihlKXtyZXR1cm5cIlN5bWJvbChcIitTdHJpbmcodm9pZCAwPT09ZT9cIlwiOmUpK1wiKV9cIisoKyt4K1YpLnRvU3RyaW5nKDM2KX0sQj1xKFwia2V5c1wiKSxIPWZ1bmN0aW9uKGUpe3JldHVybiBCW2VdfHwoQltlXT1LKGUpKX0saj17fSxXPW8uV2Vha01hcDtpZihGKXt2YXIgWT1uZXcgVywkPVkuZ2V0LHo9WS5oYXMsSj1ZLnNldDtiPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEouY2FsbChZLGUsdCksdH0sdz1mdW5jdGlvbihlKXtyZXR1cm4gJC5jYWxsKFksZSl8fHt9fSxHPWZ1bmN0aW9uKGUpe3JldHVybiB6LmNhbGwoWSxlKX19ZWxzZXt2YXIgWD1IKFwic3RhdGVcIik7altYXT0hMCxiPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGsoZSxYLHQpLHR9LHc9ZnVuY3Rpb24oZSl7cmV0dXJuIE0oZSxYKT9lW1hdOnt9fSxHPWZ1bmN0aW9uKGUpe3JldHVybiBNKGUsWCl9fXZhciBRPXtzZXQ6YixnZXQ6dyxoYXM6RyxlbmZvcmNlOmZ1bmN0aW9uKGUpe3JldHVybiBHKGUpP3coZSk6YihlLHt9KX0sZ2V0dGVyRm9yOmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbjtpZighXyh0KXx8KG49dyh0KSkudHlwZSE9PWUpdGhyb3cgVHlwZUVycm9yKFwiSW5jb21wYXRpYmxlIHJlY2VpdmVyLCBcIitlK1wiIHJlcXVpcmVkXCIpO3JldHVybiBufX19LFo9dCgoZnVuY3Rpb24oZSl7dmFyIHQ9US5nZXQsbj1RLmVuZm9yY2Uscj1TdHJpbmcoU3RyaW5nKS5zcGxpdChcIlN0cmluZ1wiKTsoZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxhLHMpe3ZhciBpPSEhcyYmISFzLnVuc2FmZSxjPSEhcyYmISFzLmVudW1lcmFibGUsdT0hIXMmJiEhcy5ub1RhcmdldEdldDtcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiYoXCJzdHJpbmdcIiE9dHlwZW9mIHR8fE0oYSxcIm5hbWVcIil8fGsoYSxcIm5hbWVcIix0KSxuKGEpLnNvdXJjZT1yLmpvaW4oXCJzdHJpbmdcIj09dHlwZW9mIHQ/dDpcIlwiKSksZSE9PW8/KGk/IXUmJmVbdF0mJihjPSEwKTpkZWxldGUgZVt0XSxjP2VbdF09YTprKGUsdCxhKSk6Yz9lW3RdPWE6Tyh0LGEpfSkoRnVuY3Rpb24ucHJvdG90eXBlLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzJiZ0KHRoaXMpLnNvdXJjZXx8UCh0aGlzKX0pKX0pKSxlZT1vLHRlPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTp2b2lkIDB9LG5lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8Mj90ZShlZVtlXSl8fHRlKG9bZV0pOmVlW2VdJiZlZVtlXVt0XXx8b1tlXSYmb1tlXVt0XX0sb2U9TWF0aC5jZWlsLHJlPU1hdGguZmxvb3IsYWU9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTmFOKGU9K2UpPzA6KGU+MD9yZTpvZSkoZSl9LHNlPU1hdGgubWluLGllPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/c2UoYWUoZSksOTAwNzE5OTI1NDc0MDk5MSk6MH0sY2U9TWF0aC5tYXgsdWU9TWF0aC5taW4sbGU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1hZShlKTtyZXR1cm4gbjwwP2NlKG4rdCwwKTp1ZShuLHQpfSxkZT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuLG8pe3ZhciByLGE9Zih0KSxzPWllKGEubGVuZ3RoKSxpPWxlKG8scyk7aWYoZSYmbiE9bil7Zm9yKDtzPmk7KWlmKChyPWFbaSsrXSkhPXIpcmV0dXJuITB9ZWxzZSBmb3IoO3M+aTtpKyspaWYoKGV8fGkgaW4gYSkmJmFbaV09PT1uKXJldHVybiBlfHxpfHwwO3JldHVybiFlJiYtMX19LHBlPXtpbmNsdWRlczpkZSghMCksaW5kZXhPZjpkZSghMSl9LGdlPXBlLmluZGV4T2YsaGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixvPWYoZSkscj0wLGE9W107Zm9yKG4gaW4gbykhTShqLG4pJiZNKG8sbikmJmEucHVzaChuKTtmb3IoO3QubGVuZ3RoPnI7KU0obyxuPXRbcisrXSkmJih+Z2UoYSxuKXx8YS5wdXNoKG4pKTtyZXR1cm4gYX0sZmU9W1wiY29uc3RydWN0b3JcIixcImhhc093blByb3BlcnR5XCIsXCJpc1Byb3RvdHlwZU9mXCIsXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLFwidG9Mb2NhbGVTdHJpbmdcIixcInRvU3RyaW5nXCIsXCJ2YWx1ZU9mXCJdLF9lPWZlLmNvbmNhdChcImxlbmd0aFwiLFwicHJvdG90eXBlXCIpLG1lPXtmOk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbihlKXtyZXR1cm4gaGUoZSxfZSl9fSx2ZT17ZjpPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSxNZT1uZShcIlJlZmxlY3RcIixcIm93bktleXNcIil8fGZ1bmN0aW9uKGUpe3ZhciB0PW1lLmYoQShlKSksbj12ZS5mO3JldHVybiBuP3QuY29uY2F0KG4oZSkpOnR9LHllPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPU1lKHQpLG89Ti5mLHI9Qy5mLGE9MDthPG4ubGVuZ3RoO2ErKyl7dmFyIHM9blthXTtNKGUscyl8fG8oZSxzLHIodCxzKSl9fSxJZT0vI3xcXC5wcm90b3R5cGVcXC4vLEVlPWZ1bmN0aW9uKGUsdCl7dmFyIG49U2VbVGUoZSldO3JldHVybiBuPT1BZXx8biE9Q2UmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3IodCk6ISF0KX0sVGU9RWUubm9ybWFsaXplPWZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcoZSkucmVwbGFjZShJZSxcIi5cIikudG9Mb3dlckNhc2UoKX0sU2U9RWUuZGF0YT17fSxDZT1FZS5OQVRJVkU9XCJOXCIsQWU9RWUuUE9MWUZJTEw9XCJQXCIsRGU9RWUsTmU9Qy5mLGtlPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixhLHMsaSxjPWUudGFyZ2V0LHU9ZS5nbG9iYWwsbD1lLnN0YXQ7aWYobj11P286bD9vW2NdfHxPKGMse30pOihvW2NdfHx7fSkucHJvdG90eXBlKWZvcihyIGluIHQpe2lmKHM9dFtyXSxhPWUubm9UYXJnZXRHZXQ/KGk9TmUobixyKSkmJmkudmFsdWU6bltyXSwhRGUodT9yOmMrKGw/XCIuXCI6XCIjXCIpK3IsZS5mb3JjZWQpJiZ2b2lkIDAhPT1hKXtpZih0eXBlb2Ygcz09dHlwZW9mIGEpY29udGludWU7eWUocyxhKX0oZS5zaGFtfHxhJiZhLnNoYW0pJiZrKHMsXCJzaGFtXCIsITApLFoobixyLHMsZSl9fSxPZT1mdW5jdGlvbihlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihTdHJpbmcoZSkrXCIgaXMgbm90IGEgZnVuY3Rpb25cIik7cmV0dXJuIGV9LFJlPWZ1bmN0aW9uKGUsdCxuKXtpZihPZShlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChuKXtjYXNlIDA6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuY2FsbCh0KX07Y2FzZSAxOnJldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gZS5jYWxsKHQsbil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24obixvKXtyZXR1cm4gZS5jYWxsKHQsbixvKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihuLG8scil7cmV0dXJuIGUuY2FsbCh0LG4sbyxyKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX0sTGU9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChoKGUpKX0sYmU9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuXCJBcnJheVwiPT1kKGUpfSx3ZT0hIU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMmJiFyKChmdW5jdGlvbigpe3JldHVybiFTdHJpbmcoU3ltYm9sKCkpfSkpLEdlPXdlJiYhU3ltYm9sLnNoYW0mJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3IsUGU9cShcIndrc1wiKSxVZT1vLlN5bWJvbCxGZT1HZT9VZTpVZSYmVWUud2l0aG91dFNldHRlcnx8SyxxZT1mdW5jdGlvbihlKXtyZXR1cm4gTShQZSxlKXx8KHdlJiZNKFVlLGUpP1BlW2VdPVVlW2VdOlBlW2VdPUZlKFwiU3ltYm9sLlwiK2UpKSxQZVtlXX0seGU9cWUoXCJzcGVjaWVzXCIpLFZlPWZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuIGJlKGUpJiYoXCJmdW5jdGlvblwiIT10eXBlb2Yobj1lLmNvbnN0cnVjdG9yKXx8biE9PUFycmF5JiYhYmUobi5wcm90b3R5cGUpP18obikmJm51bGw9PT0obj1uW3hlXSkmJihuPXZvaWQgMCk6bj12b2lkIDApLG5ldyh2b2lkIDA9PT1uP0FycmF5Om4pKDA9PT10PzA6dCl9LEtlPVtdLnB1c2gsQmU9ZnVuY3Rpb24oZSl7dmFyIHQ9MT09ZSxuPTI9PWUsbz0zPT1lLHI9ND09ZSxhPTY9PWUscz01PT1lfHxhO3JldHVybiBmdW5jdGlvbihpLGMsdSxsKXtmb3IodmFyIGQscCxoPUxlKGkpLGY9ZyhoKSxfPVJlKGMsdSwzKSxtPWllKGYubGVuZ3RoKSx2PTAsTT1sfHxWZSx5PXQ/TShpLG0pOm4/TShpLDApOnZvaWQgMDttPnY7disrKWlmKChzfHx2IGluIGYpJiYocD1fKGQ9Zlt2XSx2LGgpLGUpKWlmKHQpeVt2XT1wO2Vsc2UgaWYocClzd2l0Y2goZSl7Y2FzZSAzOnJldHVybiEwO2Nhc2UgNTpyZXR1cm4gZDtjYXNlIDY6cmV0dXJuIHY7Y2FzZSAyOktlLmNhbGwoeSxkKX1lbHNlIGlmKHIpcmV0dXJuITE7cmV0dXJuIGE/LTE6b3x8cj9yOnl9fSxIZT17Zm9yRWFjaDpCZSgwKSxtYXA6QmUoMSksZmlsdGVyOkJlKDIpLHNvbWU6QmUoMyksZXZlcnk6QmUoNCksZmluZDpCZSg1KSxmaW5kSW5kZXg6QmUoNil9LGplPWZ1bmN0aW9uKGUsdCl7dmFyIG49W11bZV07cmV0dXJuISFuJiZyKChmdW5jdGlvbigpe24uY2FsbChudWxsLHR8fGZ1bmN0aW9uKCl7dGhyb3cgMX0sMSl9KSl9LFdlPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxZZT17fSwkZT1mdW5jdGlvbihlKXt0aHJvdyBlfSx6ZT1mdW5jdGlvbihlLHQpe2lmKE0oWWUsZSkpcmV0dXJuIFllW2VdO3R8fCh0PXt9KTt2YXIgbj1bXVtlXSxvPSEhTSh0LFwiQUNDRVNTT1JTXCIpJiZ0LkFDQ0VTU09SUyxzPU0odCwwKT90WzBdOiRlLGk9TSh0LDEpP3RbMV06dm9pZCAwO3JldHVybiBZZVtlXT0hIW4mJiFyKChmdW5jdGlvbigpe2lmKG8mJiFhKXJldHVybiEwO3ZhciBlPXtsZW5ndGg6LTF9O28/V2UoZSwxLHtlbnVtZXJhYmxlOiEwLGdldDokZX0pOmVbMV09MSxuLmNhbGwoZSxzLGkpfSkpfSxKZT1IZS5mb3JFYWNoLFhlPWplKFwiZm9yRWFjaFwiKSxRZT16ZShcImZvckVhY2hcIiksWmU9WGUmJlFlP1tdLmZvckVhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIEplKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9O2tlKHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDpbXS5mb3JFYWNoIT1aZX0se2ZvckVhY2g6WmV9KTt2YXIgZXQ9ZnVuY3Rpb24oZSx0LG4sbyl7dHJ5e3JldHVybiBvP3QoQShuKVswXSxuWzFdKTp0KG4pfWNhdGNoKGEpe3ZhciByPWUucmV0dXJuO3Rocm93IHZvaWQgMCE9PXImJkEoci5jYWxsKGUpKSxhfX0sbnQ9e30sb3Q9cWUoXCJpdGVyYXRvclwiKSxydD1BcnJheS5wcm90b3R5cGUsYXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihudC5BcnJheT09PWV8fHJ0W290XT09PWUpfSxzdD1mdW5jdGlvbihlLHQsbil7dmFyIG89bSh0KTtvIGluIGU/Ti5mKGUsbyx1KDAsbikpOmVbb109bn0saXQ9e307aXRbcWUoXCJ0b1N0cmluZ1RhZ1wiKV09XCJ6XCI7dmFyIGN0PVwiW29iamVjdCB6XVwiPT09U3RyaW5nKGl0KSx1dD1xZShcInRvU3RyaW5nVGFnXCIpLGx0PVwiQXJndW1lbnRzXCI9PWQoZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxkdD1jdD9kOmZ1bmN0aW9uKGUpe3ZhciB0LG4sbztyZXR1cm4gdm9pZCAwPT09ZT9cIlVuZGVmaW5lZFwiOm51bGw9PT1lP1wiTnVsbFwiOlwic3RyaW5nXCI9PXR5cGVvZihuPWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlW3RdfWNhdGNoKG4pe319KHQ9T2JqZWN0KGUpLHV0KSk/bjpsdD9kKHQpOlwiT2JqZWN0XCI9PShvPWQodCkpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNhbGxlZT9cIkFyZ3VtZW50c1wiOm99LHB0PXFlKFwiaXRlcmF0b3JcIiksZ3Q9ZnVuY3Rpb24oZSl7aWYobnVsbCE9ZSlyZXR1cm4gZVtwdF18fGVbXCJAQGl0ZXJhdG9yXCJdfHxudFtkdChlKV19LGh0PWZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyLGEscyxpPUxlKGUpLGM9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcz90aGlzOkFycmF5LHU9YXJndW1lbnRzLmxlbmd0aCxsPXU+MT9hcmd1bWVudHNbMV06dm9pZCAwLGQ9dm9pZCAwIT09bCxwPWd0KGkpLGc9MDtpZihkJiYobD1SZShsLHU+Mj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSxudWxsPT1wfHxjPT1BcnJheSYmYXQocCkpZm9yKG49bmV3IGModD1pZShpLmxlbmd0aCkpO3Q+ZztnKyspcz1kP2woaVtnXSxnKTppW2ddLHN0KG4sZyxzKTtlbHNlIGZvcihhPShyPXAuY2FsbChpKSkubmV4dCxuPW5ldyBjOyEobz1hLmNhbGwocikpLmRvbmU7ZysrKXM9ZD9ldChyLGwsW28udmFsdWUsZ10sITApOm8udmFsdWUsc3QobixnLHMpO3JldHVybiBuLmxlbmd0aD1nLG59LGZ0PXFlKFwiaXRlcmF0b3JcIiksX3Q9ITE7dHJ5e3ZhciBtdD0wLHZ0PXtuZXh0OmZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6ISFtdCsrfX0scmV0dXJuOmZ1bmN0aW9uKCl7X3Q9ITB9fTt2dFtmdF09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sQXJyYXkuZnJvbSh2dCwoZnVuY3Rpb24oKXt0aHJvdyAyfSkpfWNhdGNoKHNJKXt9dmFyIE10PWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFfdClyZXR1cm4hMTt2YXIgbj0hMTt0cnl7dmFyIG89e307b1tmdF09ZnVuY3Rpb24oKXtyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybntkb25lOm49ITB9fX19LGUobyl9Y2F0Y2goc0kpe31yZXR1cm4gbn0seXQ9IU10KChmdW5jdGlvbihlKXtBcnJheS5mcm9tKGUpfSkpO2tlKHt0YXJnZXQ6XCJBcnJheVwiLHN0YXQ6ITAsZm9yY2VkOnl0fSx7ZnJvbTpodH0pO3ZhciBJdCxFdD1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oZSl7cmV0dXJuIGhlKGUsZmUpfSxUdD1hP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKGUsdCl7QShlKTtmb3IodmFyIG4sbz1FdCh0KSxyPW8ubGVuZ3RoLGE9MDtyPmE7KU4uZihlLG49b1thKytdLHRbbl0pO3JldHVybiBlfSxTdD1uZShcImRvY3VtZW50XCIsXCJkb2N1bWVudEVsZW1lbnRcIiksQ3Q9SChcIklFX1BST1RPXCIpLEF0PWZ1bmN0aW9uKCl7fSxEdD1mdW5jdGlvbihlKXtyZXR1cm5cIjxzY3JpcHQ+XCIrZStcIjxcXC9zY3JpcHQ+XCJ9LE50PWZ1bmN0aW9uKCl7dHJ5e0l0PWRvY3VtZW50LmRvbWFpbiYmbmV3IEFjdGl2ZVhPYmplY3QoXCJodG1sZmlsZVwiKX1jYXRjaChzSSl7fXZhciBlLHQ7TnQ9SXQ/ZnVuY3Rpb24oZSl7ZS53cml0ZShEdChcIlwiKSksZS5jbG9zZSgpO3ZhciB0PWUucGFyZW50V2luZG93Lk9iamVjdDtyZXR1cm4gZT1udWxsLHR9KEl0KTooKHQ9RShcImlmcmFtZVwiKSkuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixTdC5hcHBlbmRDaGlsZCh0KSx0LnNyYz1TdHJpbmcoXCJqYXZhc2NyaXB0OlwiKSwoZT10LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpLm9wZW4oKSxlLndyaXRlKER0KFwiZG9jdW1lbnQuRj1PYmplY3RcIikpLGUuY2xvc2UoKSxlLkYpO2Zvcih2YXIgbj1mZS5sZW5ndGg7bi0tOylkZWxldGUgTnQucHJvdG90eXBlW2ZlW25dXTtyZXR1cm4gTnQoKX07altDdF09ITA7dmFyIGt0PU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuIG51bGwhPT1lPyhBdC5wcm90b3R5cGU9QShlKSxuPW5ldyBBdCxBdC5wcm90b3R5cGU9bnVsbCxuW0N0XT1lKTpuPU50KCksdm9pZCAwPT09dD9uOlR0KG4sdCl9O2tlKHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLHNoYW06IWF9LHtjcmVhdGU6a3R9KTt2YXIgT3Q9cigoZnVuY3Rpb24oKXtFdCgxKX0pKTtrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6T3R9LHtrZXlzOmZ1bmN0aW9uKGUpe3JldHVybiBFdChMZShlKSl9fSk7dmFyIFJ0PVwiXFx0XFxuXFx2XFxmXFxyIMKg4ZqA4oCA4oCB4oCC4oCD4oCE4oCF4oCG4oCH4oCI4oCJ4oCK4oCv4oGf44CAXFx1MjAyOFxcdTIwMjlcXHVmZWZmXCIsTHQ9XCJbXCIrUnQrXCJdXCIsYnQ9UmVnRXhwKFwiXlwiK0x0K0x0K1wiKlwiKSx3dD1SZWdFeHAoTHQrTHQrXCIqJFwiKSxHdD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49U3RyaW5nKGgodCkpO3JldHVybiAxJmUmJihuPW4ucmVwbGFjZShidCxcIlwiKSksMiZlJiYobj1uLnJlcGxhY2Uod3QsXCJcIikpLG59fSxQdD17c3RhcnQ6R3QoMSksZW5kOkd0KDIpLHRyaW06R3QoMyl9LFV0PVB0LnRyaW0sRnQ9by5wYXJzZUludCxxdD0vXlsrLV0/MFtYeF0vLHh0PTghPT1GdChSdCtcIjA4XCIpfHwyMiE9PUZ0KFJ0K1wiMHgxNlwiKT9mdW5jdGlvbihlLHQpe3ZhciBuPVV0KFN0cmluZyhlKSk7cmV0dXJuIEZ0KG4sdD4+PjB8fChxdC50ZXN0KG4pPzE2OjEwKSl9OkZ0O2tlKHtnbG9iYWw6ITAsZm9yY2VkOnBhcnNlSW50IT14dH0se3BhcnNlSW50Onh0fSk7dmFyIFZ0LEt0LEJ0LEh0PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe3ZhciBvLHIsYT1TdHJpbmcoaCh0KSkscz1hZShuKSxpPWEubGVuZ3RoO3JldHVybiBzPDB8fHM+PWk/ZT9cIlwiOnZvaWQgMDoobz1hLmNoYXJDb2RlQXQocykpPDU1Mjk2fHxvPjU2MzE5fHxzKzE9PT1pfHwocj1hLmNoYXJDb2RlQXQocysxKSk8NTYzMjB8fHI+NTczNDM/ZT9hLmNoYXJBdChzKTpvOmU/YS5zbGljZShzLHMrMik6ci01NjMyMCsoby01NTI5Njw8MTApKzY1NTM2fX0sanQ9e2NvZGVBdDpIdCghMSksY2hhckF0Okh0KCEwKX0sV3Q9IXIoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5wcm90b3R5cGUuY29uc3RydWN0b3I9bnVsbCxPYmplY3QuZ2V0UHJvdG90eXBlT2YobmV3IGUpIT09ZS5wcm90b3R5cGV9KSksWXQ9SChcIklFX1BST1RPXCIpLCR0PU9iamVjdC5wcm90b3R5cGUsenQ9V3Q/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlPUxlKGUpLE0oZSxZdCk/ZVtZdF06XCJmdW5jdGlvblwiPT10eXBlb2YgZS5jb25zdHJ1Y3RvciYmZSBpbnN0YW5jZW9mIGUuY29uc3RydWN0b3I/ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6ZSBpbnN0YW5jZW9mIE9iamVjdD8kdDpudWxsfSxKdD1xZShcIml0ZXJhdG9yXCIpLFh0PSExO1tdLmtleXMmJihcIm5leHRcImluKEJ0PVtdLmtleXMoKSk/KEt0PXp0KHp0KEJ0KSkpIT09T2JqZWN0LnByb3RvdHlwZSYmKFZ0PUt0KTpYdD0hMCksbnVsbD09VnQmJihWdD17fSksTShWdCxKdCl8fGsoVnQsSnQsKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSk7dmFyIFF0PXtJdGVyYXRvclByb3RvdHlwZTpWdCxCVUdHWV9TQUZBUklfSVRFUkFUT1JTOlh0fSxadD1OLmYsZW49cWUoXCJ0b1N0cmluZ1RhZ1wiKSx0bj1mdW5jdGlvbihlLHQsbil7ZSYmIU0oZT1uP2U6ZS5wcm90b3R5cGUsZW4pJiZadChlLGVuLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfSxubj1RdC5JdGVyYXRvclByb3RvdHlwZSxvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxybj1mdW5jdGlvbihlLHQsbil7dmFyIG89dCtcIiBJdGVyYXRvclwiO3JldHVybiBlLnByb3RvdHlwZT1rdChubix7bmV4dDp1KDEsbil9KSx0bihlLG8sITEpLG50W29dPW9uLGV9LGFuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8KFwiX19wcm90b19fXCJpbnt9P2Z1bmN0aW9uKCl7dmFyIGUsdD0hMSxuPXt9O3RyeXsoZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5wcm90b3R5cGUsXCJfX3Byb3RvX19cIikuc2V0KS5jYWxsKG4sW10pLHQ9biBpbnN0YW5jZW9mIEFycmF5fWNhdGNoKHNJKXt9cmV0dXJuIGZ1bmN0aW9uKG4sbyl7cmV0dXJuIEEobiksZnVuY3Rpb24oZSl7aWYoIV8oZSkmJm51bGwhPT1lKXRocm93IFR5cGVFcnJvcihcIkNhbid0IHNldCBcIitTdHJpbmcoZSkrXCIgYXMgYSBwcm90b3R5cGVcIil9KG8pLHQ/ZS5jYWxsKG4sbyk6bi5fX3Byb3RvX189byxufX0oKTp2b2lkIDApLHNuPVF0Lkl0ZXJhdG9yUHJvdG90eXBlLGNuPVF0LkJVR0dZX1NBRkFSSV9JVEVSQVRPUlMsdW49cWUoXCJpdGVyYXRvclwiKSxsbj1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxkbj1mdW5jdGlvbihlLHQsbixvLHIsYSxzKXtybihuLHQsbyk7dmFyIGksYyx1LGw9ZnVuY3Rpb24oZSl7aWYoZT09PXImJmYpcmV0dXJuIGY7aWYoIWNuJiZlIGluIGcpcmV0dXJuIGdbZV07c3dpdGNoKGUpe2Nhc2VcImtleXNcIjpjYXNlXCJ2YWx1ZXNcIjpjYXNlXCJlbnRyaWVzXCI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzKX19LGQ9dCtcIiBJdGVyYXRvclwiLHA9ITEsZz1lLnByb3RvdHlwZSxoPWdbdW5dfHxnW1wiQEBpdGVyYXRvclwiXXx8ciYmZ1tyXSxmPSFjbiYmaHx8bChyKSxfPVwiQXJyYXlcIj09dCYmZy5lbnRyaWVzfHxoO2lmKF8mJihpPXp0KF8uY2FsbChuZXcgZSkpLHNuIT09T2JqZWN0LnByb3RvdHlwZSYmaS5uZXh0JiYoenQoaSkhPT1zbiYmKGFuP2FuKGksc24pOlwiZnVuY3Rpb25cIiE9dHlwZW9mIGlbdW5dJiZrKGksdW4sbG4pKSx0bihpLGQsITApKSksXCJ2YWx1ZXNcIj09ciYmaCYmXCJ2YWx1ZXNcIiE9PWgubmFtZSYmKHA9ITAsZj1mdW5jdGlvbigpe3JldHVybiBoLmNhbGwodGhpcyl9KSxnW3VuXSE9PWYmJmsoZyx1bixmKSxudFt0XT1mLHIpaWYoYz17dmFsdWVzOmwoXCJ2YWx1ZXNcIiksa2V5czphP2Y6bChcImtleXNcIiksZW50cmllczpsKFwiZW50cmllc1wiKX0scylmb3IodSBpbiBjKShjbnx8cHx8ISh1IGluIGcpKSYmWihnLHUsY1t1XSk7ZWxzZSBrZSh7dGFyZ2V0OnQscHJvdG86ITAsZm9yY2VkOmNufHxwfSxjKTtyZXR1cm4gY30scG49anQuY2hhckF0LGduPVEuc2V0LGhuPVEuZ2V0dGVyRm9yKFwiU3RyaW5nIEl0ZXJhdG9yXCIpO2RuKFN0cmluZyxcIlN0cmluZ1wiLChmdW5jdGlvbihlKXtnbih0aGlzLHt0eXBlOlwiU3RyaW5nIEl0ZXJhdG9yXCIsc3RyaW5nOlN0cmluZyhlKSxpbmRleDowfSl9KSwoZnVuY3Rpb24oKXt2YXIgZSx0PWhuKHRoaXMpLG49dC5zdHJpbmcsbz10LmluZGV4O3JldHVybiBvPj1uLmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPXBuKG4sbyksdC5pbmRleCs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSkpO3ZhciBmbj17Q1NTUnVsZUxpc3Q6MCxDU1NTdHlsZURlY2xhcmF0aW9uOjAsQ1NTVmFsdWVMaXN0OjAsQ2xpZW50UmVjdExpc3Q6MCxET01SZWN0TGlzdDowLERPTVN0cmluZ0xpc3Q6MCxET01Ub2tlbkxpc3Q6MSxEYXRhVHJhbnNmZXJJdGVtTGlzdDowLEZpbGVMaXN0OjAsSFRNTEFsbENvbGxlY3Rpb246MCxIVE1MQ29sbGVjdGlvbjowLEhUTUxGb3JtRWxlbWVudDowLEhUTUxTZWxlY3RFbGVtZW50OjAsTWVkaWFMaXN0OjAsTWltZVR5cGVBcnJheTowLE5hbWVkTm9kZU1hcDowLE5vZGVMaXN0OjEsUGFpbnRSZXF1ZXN0TGlzdDowLFBsdWdpbjowLFBsdWdpbkFycmF5OjAsU1ZHTGVuZ3RoTGlzdDowLFNWR051bWJlckxpc3Q6MCxTVkdQYXRoU2VnTGlzdDowLFNWR1BvaW50TGlzdDowLFNWR1N0cmluZ0xpc3Q6MCxTVkdUcmFuc2Zvcm1MaXN0OjAsU291cmNlQnVmZmVyTGlzdDowLFN0eWxlU2hlZXRMaXN0OjAsVGV4dFRyYWNrQ3VlTGlzdDowLFRleHRUcmFja0xpc3Q6MCxUb3VjaExpc3Q6MH07Zm9yKHZhciBfbiBpbiBmbil7dmFyIG1uPW9bX25dLHZuPW1uJiZtbi5wcm90b3R5cGU7aWYodm4mJnZuLmZvckVhY2ghPT1aZSl0cnl7ayh2bixcImZvckVhY2hcIixaZSl9Y2F0Y2goc0kpe3ZuLmZvckVhY2g9WmV9fWZ1bmN0aW9uIE1uKGUpe3JldHVybihNbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24geW4oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIEluKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBvPXRbbl07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8ua2V5LG8pfX1mdW5jdGlvbiBFbihlLHQsbil7cmV0dXJuIHQmJkluKGUucHJvdG90eXBlLHQpLG4mJkluKGUsbiksZX1mdW5jdGlvbiBUbihlLHQsbil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1uLGV9ZnVuY3Rpb24gU24oZSx0KXt2YXIgbj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihvPW8uZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSkpLG4ucHVzaC5hcHBseShuLG8pfXJldHVybiBufWZ1bmN0aW9uIENuKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPW51bGwhPWFyZ3VtZW50c1t0XT9hcmd1bWVudHNbdF06e307dCUyP1NuKE9iamVjdChuKSwhMCkuZm9yRWFjaCgoZnVuY3Rpb24odCl7VG4oZSx0LG5bdF0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOlNuKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sdCkpfSkpfXJldHVybiBlfWZ1bmN0aW9uIEFuKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiZObihlLHQpfWZ1bmN0aW9uIERuKGUpe3JldHVybihEbj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSkoZSl9ZnVuY3Rpb24gTm4oZSx0KXtyZXR1cm4oTm49T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9KShlLHQpfWZ1bmN0aW9uIGtuKCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4hMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIE9uKGUsdCxuKXtyZXR1cm4oT249a24oKT9SZWZsZWN0LmNvbnN0cnVjdDpmdW5jdGlvbihlLHQsbil7dmFyIG89W251bGxdO28ucHVzaC5hcHBseShvLHQpO3ZhciByPW5ldyhGdW5jdGlvbi5iaW5kLmFwcGx5KGUsbykpO3JldHVybiBuJiZObihyLG4ucHJvdG90eXBlKSxyfSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIFJuKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIE1hcD9uZXcgTWFwOnZvaWQgMDtyZXR1cm4oUm49ZnVuY3Rpb24oZSl7aWYobnVsbD09PWV8fChuPWUsLTE9PT1GdW5jdGlvbi50b1N0cmluZy5jYWxsKG4pLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpKSlyZXR1cm4gZTt2YXIgbjtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtpZih2b2lkIDAhPT10KXtpZih0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dC5zZXQoZSxvKX1mdW5jdGlvbiBvKCl7cmV0dXJuIE9uKGUsYXJndW1lbnRzLERuKHRoaXMpLmNvbnN0cnVjdG9yKX1yZXR1cm4gby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOm8sZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksTm4obyxlKX0pKGUpfWZ1bmN0aW9uIExuKGUsdCl7aWYobnVsbD09ZSlyZXR1cm57fTt2YXIgbixvLHI9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT1lKXJldHVybnt9O3ZhciBuLG8scj17fSxhPU9iamVjdC5rZXlzKGUpO2ZvcihvPTA7bzxhLmxlbmd0aDtvKyspbj1hW29dLHQuaW5kZXhPZihuKT49MHx8KHJbbl09ZVtuXSk7cmV0dXJuIHJ9KGUsdCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIGE9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtmb3Iobz0wO288YS5sZW5ndGg7bysrKW49YVtvXSx0LmluZGV4T2Yobik+PTB8fE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLG4pJiYocltuXT1lW25dKX1yZXR1cm4gcn1mdW5jdGlvbiBibihlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4gZX1mdW5jdGlvbiB3bihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9ibihlKTp0fWZ1bmN0aW9uIEduKGUpe3JldHVybiBmdW5jdGlvbigpe3ZhciB0LG49RG4oZSk7aWYoa24oKSl7dmFyIG89RG4odGhpcykuY29uc3RydWN0b3I7dD1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxvKX1lbHNlIHQ9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHduKHRoaXMsdCl9fWZ1bmN0aW9uIFBuKGUsdCl7cmV0dXJuIEZuKGUpfHxmdW5jdGlvbihlLHQpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBTeW1ib2x8fCEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKSkpcmV0dXJuO3ZhciBuPVtdLG89ITAscj0hMSxhPXZvaWQgMDt0cnl7Zm9yKHZhciBzLGk9ZVtTeW1ib2wuaXRlcmF0b3JdKCk7IShvPShzPWkubmV4dCgpKS5kb25lKSYmKG4ucHVzaChzLnZhbHVlKSwhdHx8bi5sZW5ndGghPT10KTtvPSEwKTt9Y2F0Y2goYyl7cj0hMCxhPWN9ZmluYWxseXt0cnl7b3x8bnVsbD09aS5yZXR1cm58fGkucmV0dXJuKCl9ZmluYWxseXtpZihyKXRocm93IGF9fXJldHVybiBufShlLHQpfHx4bihlLHQpfHxLbigpfWZ1bmN0aW9uIFVuKGUpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBWbihlKX0oZSl8fHFuKGUpfHx4bihlKXx8ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX0oKX1mdW5jdGlvbiBGbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlfWZ1bmN0aW9uIHFuKGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpcmV0dXJuIEFycmF5LmZyb20oZSl9ZnVuY3Rpb24geG4oZSx0KXtpZihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gVm4oZSx0KTt2YXIgbj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwtMSk7cmV0dXJuXCJPYmplY3RcIj09PW4mJmUuY29uc3RydWN0b3ImJihuPWUuY29uc3RydWN0b3IubmFtZSksXCJNYXBcIj09PW58fFwiU2V0XCI9PT1uP0FycmF5LmZyb20obik6XCJBcmd1bWVudHNcIj09PW58fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pP1ZuKGUsdCk6dm9pZCAwfX1mdW5jdGlvbiBWbihlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgbj0wLG89bmV3IEFycmF5KHQpO248dDtuKyspb1tuXT1lW25dO3JldHVybiBvfWZ1bmN0aW9uIEtuKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX1mdW5jdGlvbiBCbihlKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHxudWxsPT1lW1N5bWJvbC5pdGVyYXRvcl0pe2lmKEFycmF5LmlzQXJyYXkoZSl8fChlPXhuKGUpKSl7dmFyIHQ9MCxuPWZ1bmN0aW9uKCl7fTtyZXR1cm57czpuLG46ZnVuY3Rpb24oKXtyZXR1cm4gdD49ZS5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOmVbdCsrXX19LGU6ZnVuY3Rpb24oZSl7dGhyb3cgZX0sZjpufX10aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9dmFyIG8scixhPSEwLHM9ITE7cmV0dXJue3M6ZnVuY3Rpb24oKXtvPWVbU3ltYm9sLml0ZXJhdG9yXSgpfSxuOmZ1bmN0aW9uKCl7dmFyIGU9by5uZXh0KCk7cmV0dXJuIGE9ZS5kb25lLGV9LGU6ZnVuY3Rpb24oZSl7cz0hMCxyPWV9LGY6ZnVuY3Rpb24oKXt0cnl7YXx8bnVsbD09by5yZXR1cm58fG8ucmV0dXJuKCl9ZmluYWxseXtpZihzKXRocm93IHJ9fX19dmFyIEhuLGpuLFduPXtTREtfUkVBRFk6XCJzZGtTdGF0ZVJlYWR5XCIsU0RLX05PVF9SRUFEWTpcInNka1N0YXRlTm90UmVhZHlcIixTREtfREVTVFJPWTpcInNka0Rlc3Ryb3lcIixNRVNTQUdFX1JFQ0VJVkVEOlwib25NZXNzYWdlUmVjZWl2ZWRcIixNRVNTQUdFX01PRElGSUVEOlwib25NZXNzYWdlTW9kaWZpZWRcIixNRVNTQUdFX1JFVk9LRUQ6XCJvbk1lc3NhZ2VSZXZva2VkXCIsTUVTU0FHRV9SRUFEX0JZX1BFRVI6XCJvbk1lc3NhZ2VSZWFkQnlQZWVyXCIsTUVTU0FHRV9SRUFEX1JFQ0VJUFRfUkVDRUlWRUQ6XCJvbk1lc3NhZ2VSZWFkUmVjZWlwdFJlY2VpdmVkXCIsQ09OVkVSU0FUSU9OX0xJU1RfVVBEQVRFRDpcIm9uQ29udmVyc2F0aW9uTGlzdFVwZGF0ZWRcIixHUk9VUF9MSVNUX1VQREFURUQ6XCJvbkdyb3VwTGlzdFVwZGF0ZWRcIixHUk9VUF9TWVNURU1fTk9USUNFX1JFQ0VJVkVEOlwicmVjZWl2ZUdyb3VwU3lzdGVtTm90aWNlXCIsR1JPVVBfQVRUUklCVVRFU19VUERBVEVEOlwiZ3JvdXBBdHRyaWJ1dGVzVXBkYXRlZFwiLFBST0ZJTEVfVVBEQVRFRDpcIm9uUHJvZmlsZVVwZGF0ZWRcIixCTEFDS0xJU1RfVVBEQVRFRDpcImJsYWNrbGlzdFVwZGF0ZWRcIixGUklFTkRfTElTVF9VUERBVEVEOlwib25GcmllbmRMaXN0VXBkYXRlZFwiLEZSSUVORF9HUk9VUF9MSVNUX1VQREFURUQ6XCJvbkZyaWVuZEdyb3VwTGlzdFVwZGF0ZWRcIixGUklFTkRfQVBQTElDQVRJT05fTElTVF9VUERBVEVEOlwib25GcmllbmRBcHBsaWNhdGlvbkxpc3RVcGRhdGVkXCIsS0lDS0VEX09VVDpcImtpY2tlZE91dFwiLEVSUk9SOlwiZXJyb3JcIixORVRfU1RBVEVfQ0hBTkdFOlwibmV0U3RhdGVDaGFuZ2VcIixTREtfUkVMT0FEOlwic2RrUmVsb2FkXCJ9LFluPXtNU0dfVEVYVDpcIlRJTVRleHRFbGVtXCIsTVNHX0lNQUdFOlwiVElNSW1hZ2VFbGVtXCIsTVNHX1NPVU5EOlwiVElNU291bmRFbGVtXCIsTVNHX0FVRElPOlwiVElNU291bmRFbGVtXCIsTVNHX0ZJTEU6XCJUSU1GaWxlRWxlbVwiLE1TR19GQUNFOlwiVElNRmFjZUVsZW1cIixNU0dfVklERU86XCJUSU1WaWRlb0ZpbGVFbGVtXCIsTVNHX0dFTzpcIlRJTUxvY2F0aW9uRWxlbVwiLE1TR19MT0NBVElPTjpcIlRJTUxvY2F0aW9uRWxlbVwiLE1TR19HUlBfVElQOlwiVElNR3JvdXBUaXBFbGVtXCIsTVNHX0dSUF9TWVNfTk9USUNFOlwiVElNR3JvdXBTeXN0ZW1Ob3RpY2VFbGVtXCIsTVNHX0NVU1RPTTpcIlRJTUN1c3RvbUVsZW1cIixNU0dfTUVSR0VSOlwiVElNUmVsYXlFbGVtXCIsTVNHX1BSSU9SSVRZX0hJR0g6XCJIaWdoXCIsTVNHX1BSSU9SSVRZX05PUk1BTDpcIk5vcm1hbFwiLE1TR19QUklPUklUWV9MT1c6XCJMb3dcIixNU0dfUFJJT1JJVFlfTE9XRVNUOlwiTG93ZXN0XCIsQ09OVl9DMkM6XCJDMkNcIixDT05WX0dST1VQOlwiR1JPVVBcIixDT05WX1NZU1RFTTpcIkBUSU0jU1lTVEVNXCIsQ09OVl9BVF9NRToxLENPTlZfQVRfQUxMOjIsQ09OVl9BVF9BTExfQVRfTUU6MyxHUlBfUFJJVkFURTpcIlByaXZhdGVcIixHUlBfV09SSzpcIlByaXZhdGVcIixHUlBfUFVCTElDOlwiUHVibGljXCIsR1JQX0NIQVRST09NOlwiQ2hhdFJvb21cIixHUlBfTUVFVElORzpcIkNoYXRSb29tXCIsR1JQX0FWQ0hBVFJPT006XCJBVkNoYXRSb29tXCIsR1JQX0NPTU1VTklUWTpcIkNvbW11bml0eVwiLEdSUF9NQlJfUk9MRV9PV05FUjpcIk93bmVyXCIsR1JQX01CUl9ST0xFX0FETUlOOlwiQWRtaW5cIixHUlBfTUJSX1JPTEVfTUVNQkVSOlwiTWVtYmVyXCIsR1JQX01CUl9ST0xFX0NVU1RPTTpcIkN1c3RvbVwiLEdSUF9USVBfTUJSX0pPSU46MSxHUlBfVElQX01CUl9RVUlUOjIsR1JQX1RJUF9NQlJfS0lDS0VEX09VVDozLEdSUF9USVBfTUJSX1NFVF9BRE1JTjo0LEdSUF9USVBfTUJSX0NBTkNFTEVEX0FETUlOOjUsR1JQX1RJUF9HUlBfUFJPRklMRV9VUERBVEVEOjYsR1JQX1RJUF9NQlJfUFJPRklMRV9VUERBVEVEOjcsTVNHX1JFTUlORF9BQ1BUX0FORF9OT1RFOlwiQWNjZXB0QW5kTm90aWZ5XCIsTVNHX1JFTUlORF9BQ1BUX05PVF9OT1RFOlwiQWNjZXB0Tm90Tm90aWZ5XCIsTVNHX1JFTUlORF9ESVNDQVJEOlwiRGlzY2FyZFwiLEdFTkRFUl9VTktOT1dOOlwiR2VuZGVyX1R5cGVfVW5rbm93blwiLEdFTkRFUl9GRU1BTEU6XCJHZW5kZXJfVHlwZV9GZW1hbGVcIixHRU5ERVJfTUFMRTpcIkdlbmRlcl9UeXBlX01hbGVcIixLSUNLRURfT1VUX01VTFRfQUNDT1VOVDpcIm11bHRpcGxlQWNjb3VudFwiLEtJQ0tFRF9PVVRfTVVMVF9ERVZJQ0U6XCJtdWx0aXBsZURldmljZVwiLEtJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEOlwidXNlclNpZ0V4cGlyZWRcIixBTExPV19UWVBFX0FMTE9XX0FOWTpcIkFsbG93VHlwZV9UeXBlX0FsbG93QW55XCIsQUxMT1dfVFlQRV9ORUVEX0NPTkZJUk06XCJBbGxvd1R5cGVfVHlwZV9OZWVkQ29uZmlybVwiLEFMTE9XX1RZUEVfREVOWV9BTlk6XCJBbGxvd1R5cGVfVHlwZV9EZW55QW55XCIsRk9SQklEX1RZUEVfTk9ORTpcIkFkbWluRm9yYmlkX1R5cGVfTm9uZVwiLEZPUkJJRF9UWVBFX1NFTkRfT1VUOlwiQWRtaW5Gb3JiaWRfVHlwZV9TZW5kT3V0XCIsSk9JTl9PUFRJT05TX0ZSRUVfQUNDRVNTOlwiRnJlZUFjY2Vzc1wiLEpPSU5fT1BUSU9OU19ORUVEX1BFUk1JU1NJT046XCJOZWVkUGVybWlzc2lvblwiLEpPSU5fT1BUSU9OU19ESVNBQkxFX0FQUExZOlwiRGlzYWJsZUFwcGx5XCIsSk9JTl9TVEFUVVNfU1VDQ0VTUzpcIkpvaW5lZFN1Y2Nlc3NcIixKT0lOX1NUQVRVU19BTFJFQURZX0lOX0dST1VQOlwiQWxyZWFkeUluR3JvdXBcIixKT0lOX1NUQVRVU19XQUlUX0FQUFJPVkFMOlwiV2FpdEFkbWluQXBwcm92YWxcIixHUlBfUFJPRklMRV9PV05FUl9JRDpcIm93bmVySURcIixHUlBfUFJPRklMRV9DUkVBVEVfVElNRTpcImNyZWF0ZVRpbWVcIixHUlBfUFJPRklMRV9MQVNUX0lORk9fVElNRTpcImxhc3RJbmZvVGltZVwiLEdSUF9QUk9GSUxFX01FTUJFUl9OVU06XCJtZW1iZXJOdW1cIixHUlBfUFJPRklMRV9NQVhfTUVNQkVSX05VTTpcIm1heE1lbWJlck51bVwiLEdSUF9QUk9GSUxFX0pPSU5fT1BUSU9OOlwiam9pbk9wdGlvblwiLEdSUF9QUk9GSUxFX0lOVFJPRFVDVElPTjpcImludHJvZHVjdGlvblwiLEdSUF9QUk9GSUxFX05PVElGSUNBVElPTjpcIm5vdGlmaWNhdGlvblwiLEdSUF9QUk9GSUxFX01VVEVfQUxMX01CUlM6XCJtdXRlQWxsTWVtYmVyc1wiLFNOU19BRERfVFlQRV9TSU5HTEU6XCJBZGRfVHlwZV9TaW5nbGVcIixTTlNfQUREX1RZUEVfQk9USDpcIkFkZF9UeXBlX0JvdGhcIixTTlNfREVMRVRFX1RZUEVfU0lOR0xFOlwiRGVsZXRlX1R5cGVfU2luZ2xlXCIsU05TX0RFTEVURV9UWVBFX0JPVEg6XCJEZWxldGVfVHlwZV9Cb3RoXCIsU05TX0FQUExJQ0FUSU9OX1RZUEVfQk9USDpcIlBlbmRlbmN5X1R5cGVfQm90aFwiLFNOU19BUFBMSUNBVElPTl9TRU5UX1RPX01FOlwiUGVuZGVuY3lfVHlwZV9Db21lSW5cIixTTlNfQVBQTElDQVRJT05fU0VOVF9CWV9NRTpcIlBlbmRlbmN5X1R5cGVfU2VuZE91dFwiLFNOU19BUFBMSUNBVElPTl9BR1JFRTpcIlJlc3BvbnNlX0FjdGlvbl9BZ3JlZVwiLFNOU19BUFBMSUNBVElPTl9BR1JFRV9BTkRfQUREOlwiUmVzcG9uc2VfQWN0aW9uX0FncmVlQW5kQWRkXCIsU05TX0NIRUNLX1RZUEVfQk9USDpcIkNoZWNrUmVzdWx0X1R5cGVfQm90aFwiLFNOU19DSEVDS19UWVBFX1NJTkdMRTpcIkNoZWNrUmVzdWx0X1R5cGVfU2luZ2xlXCIsU05TX1RZUEVfTk9fUkVMQVRJT046XCJDaGVja1Jlc3VsdF9UeXBlX05vUmVsYXRpb25cIixTTlNfVFlQRV9BX1dJVEhfQjpcIkNoZWNrUmVzdWx0X1R5cGVfQVdpdGhCXCIsU05TX1RZUEVfQl9XSVRIX0E6XCJDaGVja1Jlc3VsdF9UeXBlX0JXaXRoQVwiLFNOU19UWVBFX0JPVEhfV0FZOlwiQ2hlY2tSZXN1bHRfVHlwZV9Cb3RoV2F5XCIsTkVUX1NUQVRFX0NPTk5FQ1RFRDpcImNvbm5lY3RlZFwiLE5FVF9TVEFURV9DT05ORUNUSU5HOlwiY29ubmVjdGluZ1wiLE5FVF9TVEFURV9ESVNDT05ORUNURUQ6XCJkaXNjb25uZWN0ZWRcIixNU0dfQVRfQUxMOlwiX19rSW1TREtfTWVzc3NhZ2VBdEFMTF9fXCIsUkVBRF9BTExfQzJDX01TRzpcInJlYWRBbGxDMkNNZXNzYWdlXCIsUkVBRF9BTExfR1JPVVBfTVNHOlwicmVhZEFsbEdyb3VwTWVzc2FnZVwiLFJFQURfQUxMX01TRzpcInJlYWRBbGxNZXNzYWdlXCJ9LCRuPW5lKFwibmF2aWdhdG9yXCIsXCJ1c2VyQWdlbnRcIil8fFwiXCIsem49by5wcm9jZXNzLEpuPXpuJiZ6bi52ZXJzaW9ucyxYbj1KbiYmSm4udjg7WG4/am49KEhuPVhuLnNwbGl0KFwiLlwiKSlbMF0rSG5bMV06JG4mJighKEhuPSRuLm1hdGNoKC9FZGdlXFwvKFxcZCspLykpfHxIblsxXT49NzQpJiYoSG49JG4ubWF0Y2goL0Nocm9tZVxcLyhcXGQrKS8pKSYmKGpuPUhuWzFdKTt2YXIgUW49am4mJitqbixabj1xZShcInNwZWNpZXNcIiksZW89ZnVuY3Rpb24oZSl7cmV0dXJuIFFuPj01MXx8IXIoKGZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuKHQuY29uc3RydWN0b3I9e30pW1puXT1mdW5jdGlvbigpe3JldHVybntmb286MX19LDEhPT10W2VdKEJvb2xlYW4pLmZvb30pKX0sdG89SGUubWFwLG5vPWVvKFwibWFwXCIpLG9vPXplKFwibWFwXCIpO2tlKHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDohbm98fCFvb30se21hcDpmdW5jdGlvbihlKXtyZXR1cm4gdG8odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KTt2YXIgcm89W10uc2xpY2UsYW89e30sc289ZnVuY3Rpb24oZSx0LG4pe2lmKCEodCBpbiBhbykpe2Zvcih2YXIgbz1bXSxyPTA7cjx0O3IrKylvW3JdPVwiYVtcIityK1wiXVwiO2FvW3RdPUZ1bmN0aW9uKFwiQyxhXCIsXCJyZXR1cm4gbmV3IEMoXCIrby5qb2luKFwiLFwiKStcIilcIil9cmV0dXJuIGFvW3RdKGUsbil9LGlvPUZ1bmN0aW9uLmJpbmR8fGZ1bmN0aW9uKGUpe3ZhciB0PU9lKHRoaXMpLG49cm8uY2FsbChhcmd1bWVudHMsMSksbz1mdW5jdGlvbigpe3ZhciByPW4uY29uY2F0KHJvLmNhbGwoYXJndW1lbnRzKSk7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBvP3NvKHQsci5sZW5ndGgscik6dC5hcHBseShlLHIpfTtyZXR1cm4gXyh0LnByb3RvdHlwZSkmJihvLnByb3RvdHlwZT10LnByb3RvdHlwZSksb307a2Uoe3RhcmdldDpcIkZ1bmN0aW9uXCIscHJvdG86ITB9LHtiaW5kOmlvfSk7dmFyIGNvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3luKHRoaXMsZSksdGhpcy5jYWNoZT1bXSx0aGlzLm9wdGlvbnM9bnVsbH1yZXR1cm4gRW4oZSxbe2tleTpcInVzZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3dcIm1pZGRsZXdhcmUgbXVzdCBiZSBhIGZ1bmN0aW9uXCI7cmV0dXJuIHRoaXMuY2FjaGUucHVzaChlKSx0aGlzfX0se2tleTpcIm5leHRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLm1pZGRsZXdhcmVzJiZ0aGlzLm1pZGRsZXdhcmVzLmxlbmd0aD4wKXJldHVybiB0aGlzLm1pZGRsZXdhcmVzLnNoaWZ0KCkuY2FsbCh0aGlzLHRoaXMub3B0aW9ucyx0aGlzLm5leHQuYmluZCh0aGlzKSl9fSx7a2V5OlwicnVuXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubWlkZGxld2FyZXM9dGhpcy5jYWNoZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlfSkpLHRoaXMub3B0aW9ucz1lLHRoaXMubmV4dCgpfX1dKSxlfSgpLHVvPXFlKFwiaXNDb25jYXRTcHJlYWRhYmxlXCIpLGxvPVFuPj01MXx8IXIoKGZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIGVbdW9dPSExLGUuY29uY2F0KClbMF0hPT1lfSkpLHBvPWVvKFwiY29uY2F0XCIpLGdvPWZ1bmN0aW9uKGUpe2lmKCFfKGUpKXJldHVybiExO3ZhciB0PWVbdW9dO3JldHVybiB2b2lkIDAhPT10PyEhdDpiZShlKX07a2Uoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOiFsb3x8IXBvfSx7Y29uY2F0OmZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyLGEscz1MZSh0aGlzKSxpPVZlKHMsMCksYz0wO2Zvcih0PS0xLG89YXJndW1lbnRzLmxlbmd0aDt0PG87dCsrKWlmKGE9LTE9PT10P3M6YXJndW1lbnRzW3RdLGdvKGEpKXtpZihjKyhyPWllKGEubGVuZ3RoKSk+OTAwNzE5OTI1NDc0MDk5MSl0aHJvdyBUeXBlRXJyb3IoXCJNYXhpbXVtIGFsbG93ZWQgaW5kZXggZXhjZWVkZWRcIik7Zm9yKG49MDtuPHI7bisrLGMrKyluIGluIGEmJnN0KGksYyxhW25dKX1lbHNle2lmKGM+PTkwMDcxOTkyNTQ3NDA5OTEpdGhyb3cgVHlwZUVycm9yKFwiTWF4aW11bSBhbGxvd2VkIGluZGV4IGV4Y2VlZGVkXCIpO3N0KGksYysrLGEpfXJldHVybiBpLmxlbmd0aD1jLGl9fSk7dmFyIGhvPU4uZixmbz1GdW5jdGlvbi5wcm90b3R5cGUsX289Zm8udG9TdHJpbmcsbW89L15cXHMqZnVuY3Rpb24gKFteIChdKikvO2EmJiEoXCJuYW1lXCJpbiBmbykmJmhvKGZvLFwibmFtZVwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBfby5jYWxsKHRoaXMpLm1hdGNoKG1vKVsxXX1jYXRjaChzSSl7cmV0dXJuXCJcIn19fSk7dmFyIHZvPXQoKGZ1bmN0aW9uKHQsbil7dmFyIG8scixhLHMsaSxjLHUsbCxkLHAsZyxoLGYsXyxtLHYsTSx5O3QuZXhwb3J0cz0obz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm9taXNlLHI9XCJvYmplY3RcIj09dHlwZW9mIHNlbGY/c2VsZjplLGE9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCxzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBNYXAsaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgU2V0LGM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdlYWtNYXAsdT1cInVuZGVmaW5lZFwiIT10eXBlb2YgV2Vha1NldCxsPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBEYXRhVmlldyxkPWEmJnZvaWQgMCE9PVN5bWJvbC5pdGVyYXRvcixwPWEmJnZvaWQgMCE9PVN5bWJvbC50b1N0cmluZ1RhZyxnPWkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFNldC5wcm90b3R5cGUuZW50cmllcyxoPXMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE1hcC5wcm90b3R5cGUuZW50cmllcyxmPWcmJk9iamVjdC5nZXRQcm90b3R5cGVPZigobmV3IFNldCkuZW50cmllcygpKSxfPWgmJk9iamVjdC5nZXRQcm90b3R5cGVPZigobmV3IE1hcCkuZW50cmllcygpKSxtPWQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIEFycmF5LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdLHY9bSYmT2JqZWN0LmdldFByb3RvdHlwZU9mKFtdW1N5bWJvbC5pdGVyYXRvcl0oKSksTT1kJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTdHJpbmcucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0seT1NJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YoXCJcIltTeW1ib2wuaXRlcmF0b3JdKCkpLGZ1bmN0aW9uKGUpe3ZhciB0PXR5cGVvZiBlO2lmKFwib2JqZWN0XCIhPT10KXJldHVybiB0O2lmKG51bGw9PT1lKXJldHVyblwibnVsbFwiO2lmKGU9PT1yKXJldHVyblwiZ2xvYmFsXCI7aWYoQXJyYXkuaXNBcnJheShlKSYmKCExPT09cHx8IShTeW1ib2wudG9TdHJpbmdUYWcgaW4gZSkpKXJldHVyblwiQXJyYXlcIjtpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZudWxsIT09d2luZG93KXtpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93LmxvY2F0aW9uJiZlPT09d2luZG93LmxvY2F0aW9uKXJldHVyblwiTG9jYXRpb25cIjtpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93LmRvY3VtZW50JiZlPT09d2luZG93LmRvY3VtZW50KXJldHVyblwiRG9jdW1lbnRcIjtpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93Lm5hdmlnYXRvcil7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3IubWltZVR5cGVzJiZlPT09d2luZG93Lm5hdmlnYXRvci5taW1lVHlwZXMpcmV0dXJuXCJNaW1lVHlwZUFycmF5XCI7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3IucGx1Z2lucyYmZT09PXdpbmRvdy5uYXZpZ2F0b3IucGx1Z2lucylyZXR1cm5cIlBsdWdpbkFycmF5XCJ9aWYoKFwiZnVuY3Rpb25cIj09dHlwZW9mIHdpbmRvdy5IVE1MRWxlbWVudHx8XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5IVE1MRWxlbWVudCkmJmUgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTEVsZW1lbnQpe2lmKFwiQkxPQ0tRVU9URVwiPT09ZS50YWdOYW1lKXJldHVyblwiSFRNTFF1b3RlRWxlbWVudFwiO2lmKFwiVERcIj09PWUudGFnTmFtZSlyZXR1cm5cIkhUTUxUYWJsZURhdGFDZWxsRWxlbWVudFwiO2lmKFwiVEhcIj09PWUudGFnTmFtZSlyZXR1cm5cIkhUTUxUYWJsZUhlYWRlckNlbGxFbGVtZW50XCJ9fXZhciBuPXAmJmVbU3ltYm9sLnRvU3RyaW5nVGFnXTtpZihcInN0cmluZ1wiPT10eXBlb2YgbilyZXR1cm4gbjt2YXIgYT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIGE9PT1SZWdFeHAucHJvdG90eXBlP1wiUmVnRXhwXCI6YT09PURhdGUucHJvdG90eXBlP1wiRGF0ZVwiOm8mJmE9PT1Qcm9taXNlLnByb3RvdHlwZT9cIlByb21pc2VcIjppJiZhPT09U2V0LnByb3RvdHlwZT9cIlNldFwiOnMmJmE9PT1NYXAucHJvdG90eXBlP1wiTWFwXCI6dSYmYT09PVdlYWtTZXQucHJvdG90eXBlP1wiV2Vha1NldFwiOmMmJmE9PT1XZWFrTWFwLnByb3RvdHlwZT9cIldlYWtNYXBcIjpsJiZhPT09RGF0YVZpZXcucHJvdG90eXBlP1wiRGF0YVZpZXdcIjpzJiZhPT09Xz9cIk1hcCBJdGVyYXRvclwiOmkmJmE9PT1mP1wiU2V0IEl0ZXJhdG9yXCI6bSYmYT09PXY/XCJBcnJheSBJdGVyYXRvclwiOk0mJmE9PT15P1wiU3RyaW5nIEl0ZXJhdG9yXCI6bnVsbD09PWE/XCJPYmplY3RcIjpPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwtMSl9KX0pKTtrZSh7dGFyZ2V0OlwiQXJyYXlcIixzdGF0OiEwfSx7aXNBcnJheTpiZX0pO3ZhciBNbz1xZShcInVuc2NvcGFibGVzXCIpLHlvPUFycmF5LnByb3RvdHlwZTtudWxsPT15b1tNb10mJk4uZih5byxNbyx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOmt0KG51bGwpfSk7dmFyIElvPWZ1bmN0aW9uKGUpe3lvW01vXVtlXT0hMH0sRW89SGUuZmluZCxUbz0hMCxTbz16ZShcImZpbmRcIik7XCJmaW5kXCJpbltdJiZBcnJheSgxKS5maW5kKChmdW5jdGlvbigpe1RvPSExfSkpLGtlKHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDpUb3x8IVNvfSx7ZmluZDpmdW5jdGlvbihlKXtyZXR1cm4gRW8odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxJbyhcImZpbmRcIik7dmFyIENvPXBlLmluY2x1ZGVzLEFvPXplKFwiaW5kZXhPZlwiLHtBQ0NFU1NPUlM6ITAsMTowfSk7a2Uoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOiFBb30se2luY2x1ZGVzOmZ1bmN0aW9uKGUpe3JldHVybiBDbyh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLElvKFwiaW5jbHVkZXNcIik7dmFyIERvPXBlLmluZGV4T2YsTm89W10uaW5kZXhPZixrbz0hIU5vJiYxL1sxXS5pbmRleE9mKDEsLTApPDAsT289amUoXCJpbmRleE9mXCIpLFJvPXplKFwiaW5kZXhPZlwiLHtBQ0NFU1NPUlM6ITAsMTowfSk7a2Uoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOmtvfHwhT298fCFSb30se2luZGV4T2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGtvP05vLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8MDpEbyh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pO3ZhciBMbz1RLnNldCxibz1RLmdldHRlckZvcihcIkFycmF5IEl0ZXJhdG9yXCIpLHdvPWRuKEFycmF5LFwiQXJyYXlcIiwoZnVuY3Rpb24oZSx0KXtMbyh0aGlzLHt0eXBlOlwiQXJyYXkgSXRlcmF0b3JcIix0YXJnZXQ6ZihlKSxpbmRleDowLGtpbmQ6dH0pfSksKGZ1bmN0aW9uKCl7dmFyIGU9Ym8odGhpcyksdD1lLnRhcmdldCxuPWUua2luZCxvPWUuaW5kZXgrKztyZXR1cm4hdHx8bz49dC5sZW5ndGg/KGUudGFyZ2V0PXZvaWQgMCx7dmFsdWU6dm9pZCAwLGRvbmU6ITB9KTpcImtleXNcIj09bj97dmFsdWU6byxkb25lOiExfTpcInZhbHVlc1wiPT1uP3t2YWx1ZTp0W29dLGRvbmU6ITF9Ont2YWx1ZTpbbyx0W29dXSxkb25lOiExfX0pLFwidmFsdWVzXCIpO250LkFyZ3VtZW50cz1udC5BcnJheSxJbyhcImtleXNcIiksSW8oXCJ2YWx1ZXNcIiksSW8oXCJlbnRyaWVzXCIpO3ZhciBHbz1bXS5qb2luLFBvPWchPU9iamVjdCxVbz1qZShcImpvaW5cIixcIixcIik7a2Uoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOlBvfHwhVW99LHtqb2luOmZ1bmN0aW9uKGUpe3JldHVybiBHby5jYWxsKGYodGhpcyksdm9pZCAwPT09ZT9cIixcIjplKX19KTt2YXIgRm89ZW8oXCJzbGljZVwiKSxxbz16ZShcInNsaWNlXCIse0FDQ0VTU09SUzohMCwwOjAsMToyfSkseG89cWUoXCJzcGVjaWVzXCIpLFZvPVtdLnNsaWNlLEtvPU1hdGgubWF4O2tlKHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDohRm98fCFxb30se3NsaWNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxyLGE9Zih0aGlzKSxzPWllKGEubGVuZ3RoKSxpPWxlKGUscyksYz1sZSh2b2lkIDA9PT10P3M6dCxzKTtpZihiZShhKSYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mKG49YS5jb25zdHJ1Y3Rvcil8fG4hPT1BcnJheSYmIWJlKG4ucHJvdG90eXBlKT9fKG4pJiZudWxsPT09KG49blt4b10pJiYobj12b2lkIDApOm49dm9pZCAwLG49PT1BcnJheXx8dm9pZCAwPT09bikpcmV0dXJuIFZvLmNhbGwoYSxpLGMpO2ZvcihvPW5ldyh2b2lkIDA9PT1uP0FycmF5Om4pKEtvKGMtaSwwKSkscj0wO2k8YztpKysscisrKWkgaW4gYSYmc3QobyxyLGFbaV0pO3JldHVybiBvLmxlbmd0aD1yLG99fSksa2Uoe3RhcmdldDpcIkRhdGVcIixzdGF0OiEwfSx7bm93OmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9fSk7dmFyIEJvPVwiXCIucmVwZWF0fHxmdW5jdGlvbihlKXt2YXIgdD1TdHJpbmcoaCh0aGlzKSksbj1cIlwiLG89YWUoZSk7aWYobzwwfHxJbmZpbml0eT09byl0aHJvdyBSYW5nZUVycm9yKFwiV3JvbmcgbnVtYmVyIG9mIHJlcGV0aXRpb25zXCIpO2Zvcig7bz4wOyhvPj4+PTEpJiYodCs9dCkpMSZvJiYobis9dCk7cmV0dXJuIG59LEhvPU1hdGguY2VpbCxqbz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuLG8pe3ZhciByLGEscz1TdHJpbmcoaCh0KSksaT1zLmxlbmd0aCxjPXZvaWQgMD09PW8/XCIgXCI6U3RyaW5nKG8pLHU9aWUobik7cmV0dXJuIHU8PWl8fFwiXCI9PWM/czoocj11LWksKGE9Qm8uY2FsbChjLEhvKHIvYy5sZW5ndGgpKSkubGVuZ3RoPnImJihhPWEuc2xpY2UoMCxyKSksZT9zK2E6YStzKX19LFdvPXtzdGFydDpqbyghMSksZW5kOmpvKCEwKX0uc3RhcnQsWW89TWF0aC5hYnMsJG89RGF0ZS5wcm90b3R5cGUsem89JG8uZ2V0VGltZSxKbz0kby50b0lTT1N0cmluZyxYbz1yKChmdW5jdGlvbigpe3JldHVyblwiMDM4NS0wNy0yNVQwNzowNjozOS45OTlaXCIhPUpvLmNhbGwobmV3IERhdGUoLTUwMDAwMDAwMDAwMDAxKSl9KSl8fCFyKChmdW5jdGlvbigpe0pvLmNhbGwobmV3IERhdGUoTmFOKSl9KSk/ZnVuY3Rpb24oKXtpZighaXNGaW5pdGUoem8uY2FsbCh0aGlzKSkpdGhyb3cgUmFuZ2VFcnJvcihcIkludmFsaWQgdGltZSB2YWx1ZVwiKTt2YXIgZT10aGlzLmdldFVUQ0Z1bGxZZWFyKCksdD10aGlzLmdldFVUQ01pbGxpc2Vjb25kcygpLG49ZTwwP1wiLVwiOmU+OTk5OT9cIitcIjpcIlwiO3JldHVybiBuK1dvKFlvKGUpLG4/Njo0LDApK1wiLVwiK1dvKHRoaXMuZ2V0VVRDTW9udGgoKSsxLDIsMCkrXCItXCIrV28odGhpcy5nZXRVVENEYXRlKCksMiwwKStcIlRcIitXbyh0aGlzLmdldFVUQ0hvdXJzKCksMiwwKStcIjpcIitXbyh0aGlzLmdldFVUQ01pbnV0ZXMoKSwyLDApK1wiOlwiK1dvKHRoaXMuZ2V0VVRDU2Vjb25kcygpLDIsMCkrXCIuXCIrV28odCwzLDApK1wiWlwifTpKbztrZSh7dGFyZ2V0OlwiRGF0ZVwiLHByb3RvOiEwLGZvcmNlZDpEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyE9PVhvfSx7dG9JU09TdHJpbmc6WG99KTt2YXIgUW89RGF0ZS5wcm90b3R5cGUsWm89UW8udG9TdHJpbmcsZXI9UW8uZ2V0VGltZTtuZXcgRGF0ZShOYU4pK1wiXCIhPVwiSW52YWxpZCBEYXRlXCImJlooUW8sXCJ0b1N0cmluZ1wiLChmdW5jdGlvbigpe3ZhciBlPWVyLmNhbGwodGhpcyk7cmV0dXJuIGU9PWU/Wm8uY2FsbCh0aGlzKTpcIkludmFsaWQgRGF0ZVwifSkpO3ZhciB0cj1mdW5jdGlvbihlLHQsbil7dmFyIG8scjtyZXR1cm4gYW4mJlwiZnVuY3Rpb25cIj09dHlwZW9mKG89dC5jb25zdHJ1Y3RvcikmJm8hPT1uJiZfKHI9by5wcm90b3R5cGUpJiZyIT09bi5wcm90b3R5cGUmJmFuKGUsciksZX0sbnI9bWUuZixvcj1DLmYscnI9Ti5mLGFyPVB0LnRyaW0sc3I9by5OdW1iZXIsaXI9c3IucHJvdG90eXBlLGNyPVwiTnVtYmVyXCI9PWQoa3QoaXIpKSx1cj1mdW5jdGlvbihlKXt2YXIgdCxuLG8scixhLHMsaSxjLHU9bShlLCExKTtpZihcInN0cmluZ1wiPT10eXBlb2YgdSYmdS5sZW5ndGg+MilpZig0Mz09PSh0PSh1PWFyKHUpKS5jaGFyQ29kZUF0KDApKXx8NDU9PT10KXtpZig4OD09PShuPXUuY2hhckNvZGVBdCgyKSl8fDEyMD09PW4pcmV0dXJuIE5hTn1lbHNlIGlmKDQ4PT09dCl7c3dpdGNoKHUuY2hhckNvZGVBdCgxKSl7Y2FzZSA2NjpjYXNlIDk4Om89MixyPTQ5O2JyZWFrO2Nhc2UgNzk6Y2FzZSAxMTE6bz04LHI9NTU7YnJlYWs7ZGVmYXVsdDpyZXR1cm4rdX1mb3Iocz0oYT11LnNsaWNlKDIpKS5sZW5ndGgsaT0wO2k8cztpKyspaWYoKGM9YS5jaGFyQ29kZUF0KGkpKTw0OHx8Yz5yKXJldHVybiBOYU47cmV0dXJuIHBhcnNlSW50KGEsbyl9cmV0dXJuK3V9O2lmKERlKFwiTnVtYmVyXCIsIXNyKFwiIDBvMVwiKXx8IXNyKFwiMGIxXCIpfHxzcihcIisweDFcIikpKXtmb3IodmFyIGxyLGRyPWZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg8MT8wOmUsbj10aGlzO3JldHVybiBuIGluc3RhbmNlb2YgZHImJihjcj9yKChmdW5jdGlvbigpe2lyLnZhbHVlT2YuY2FsbChuKX0pKTpcIk51bWJlclwiIT1kKG4pKT90cihuZXcgc3IodXIodCkpLG4sZHIpOnVyKHQpfSxwcj1hP25yKHNyKTpcIk1BWF9WQUxVRSxNSU5fVkFMVUUsTmFOLE5FR0FUSVZFX0lORklOSVRZLFBPU0lUSVZFX0lORklOSVRZLEVQU0lMT04saXNGaW5pdGUsaXNJbnRlZ2VyLGlzTmFOLGlzU2FmZUludGVnZXIsTUFYX1NBRkVfSU5URUdFUixNSU5fU0FGRV9JTlRFR0VSLHBhcnNlRmxvYXQscGFyc2VJbnQsaXNJbnRlZ2VyXCIuc3BsaXQoXCIsXCIpLGdyPTA7cHIubGVuZ3RoPmdyO2dyKyspTShzcixscj1wcltncl0pJiYhTShkcixscikmJnJyKGRyLGxyLG9yKHNyLGxyKSk7ZHIucHJvdG90eXBlPWlyLGlyLmNvbnN0cnVjdG9yPWRyLFoobyxcIk51bWJlclwiLGRyKX12YXIgaHI9bWUuZixmcj17fS50b1N0cmluZyxfcj1cIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10sbXI9e2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIF9yJiZcIltvYmplY3QgV2luZG93XVwiPT1mci5jYWxsKGUpP2Z1bmN0aW9uKGUpe3RyeXtyZXR1cm4gaHIoZSl9Y2F0Y2goc0kpe3JldHVybiBfci5zbGljZSgpfX0oZSk6aHIoZihlKSl9fSx2cj1tci5mLE1yPXIoKGZ1bmN0aW9uKCl7cmV0dXJuIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKDEpfSkpO2tlKHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLGZvcmNlZDpNcn0se2dldE93blByb3BlcnR5TmFtZXM6dnJ9KTt2YXIgeXI9cigoZnVuY3Rpb24oKXt6dCgxKX0pKTtrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6eXIsc2hhbTohV3R9LHtnZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4genQoTGUoZSkpfX0pO3ZhciBJcj1jdD97fS50b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBcIitkdCh0aGlzKStcIl1cIn07Y3R8fFooT2JqZWN0LnByb3RvdHlwZSxcInRvU3RyaW5nXCIsSXIse3Vuc2FmZTohMH0pO3ZhciBFcixUcixTcixDcj1vLlByb21pc2UsQXI9ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgbyBpbiB0KVooZSxvLHRbb10sbik7cmV0dXJuIGV9LERyPXFlKFwic3BlY2llc1wiKSxOcj1mdW5jdGlvbihlKXt2YXIgdD1uZShlKSxuPU4uZjthJiZ0JiYhdFtEcl0mJm4odCxEcix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfSxrcj1mdW5jdGlvbihlLHQsbil7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgVHlwZUVycm9yKFwiSW5jb3JyZWN0IFwiKyhuP24rXCIgXCI6XCJcIikrXCJpbnZvY2F0aW9uXCIpO3JldHVybiBlfSxPcj10KChmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlLHQpe3RoaXMuc3RvcHBlZD1lLHRoaXMucmVzdWx0PXR9OyhlLmV4cG9ydHM9ZnVuY3Rpb24oZSxuLG8scixhKXt2YXIgcyxpLGMsdSxsLGQscCxnPVJlKG4sbyxyPzI6MSk7aWYoYSlzPWU7ZWxzZXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZihpPWd0KGUpKSl0aHJvdyBUeXBlRXJyb3IoXCJUYXJnZXQgaXMgbm90IGl0ZXJhYmxlXCIpO2lmKGF0KGkpKXtmb3IoYz0wLHU9aWUoZS5sZW5ndGgpO3U+YztjKyspaWYoKGw9cj9nKEEocD1lW2NdKVswXSxwWzFdKTpnKGVbY10pKSYmbCBpbnN0YW5jZW9mIHQpcmV0dXJuIGw7cmV0dXJuIG5ldyB0KCExKX1zPWkuY2FsbChlKX1mb3IoZD1zLm5leHQ7IShwPWQuY2FsbChzKSkuZG9uZTspaWYoXCJvYmplY3RcIj09dHlwZW9mKGw9ZXQocyxnLHAudmFsdWUscikpJiZsJiZsIGluc3RhbmNlb2YgdClyZXR1cm4gbDtyZXR1cm4gbmV3IHQoITEpfSkuc3RvcD1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoITAsZSl9fSkpLFJyPXFlKFwic3BlY2llc1wiKSxMcj1mdW5jdGlvbihlLHQpe3ZhciBuLG89QShlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09b3x8bnVsbD09KG49QShvKVtScl0pP3Q6T2Uobil9LGJyPS8oaXBob25lfGlwb2R8aXBhZCkuKmFwcGxld2Via2l0L2kudGVzdCgkbiksd3I9by5sb2NhdGlvbixHcj1vLnNldEltbWVkaWF0ZSxQcj1vLmNsZWFySW1tZWRpYXRlLFVyPW8ucHJvY2VzcyxGcj1vLk1lc3NhZ2VDaGFubmVsLHFyPW8uRGlzcGF0Y2gseHI9MCxWcj17fSxLcj1mdW5jdGlvbihlKXtpZihWci5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9VnJbZV07ZGVsZXRlIFZyW2VdLHQoKX19LEJyPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe0tyKGUpfX0sSHI9ZnVuY3Rpb24oZSl7S3IoZS5kYXRhKX0sanI9ZnVuY3Rpb24oZSl7by5wb3N0TWVzc2FnZShlK1wiXCIsd3IucHJvdG9jb2wrXCIvL1wiK3dyLmhvc3QpfTtHciYmUHJ8fChHcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO2FyZ3VtZW50cy5sZW5ndGg+bjspdC5wdXNoKGFyZ3VtZW50c1tuKytdKTtyZXR1cm4gVnJbKyt4cl09ZnVuY3Rpb24oKXsoXCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpKS5hcHBseSh2b2lkIDAsdCl9LEVyKHhyKSx4cn0sUHI9ZnVuY3Rpb24oZSl7ZGVsZXRlIFZyW2VdfSxcInByb2Nlc3NcIj09ZChVcik/RXI9ZnVuY3Rpb24oZSl7VXIubmV4dFRpY2soQnIoZSkpfTpxciYmcXIubm93P0VyPWZ1bmN0aW9uKGUpe3FyLm5vdyhCcihlKSl9OkZyJiYhYnI/KFNyPShUcj1uZXcgRnIpLnBvcnQyLFRyLnBvcnQxLm9ubWVzc2FnZT1IcixFcj1SZShTci5wb3N0TWVzc2FnZSxTciwxKSk6IW8uYWRkRXZlbnRMaXN0ZW5lcnx8XCJmdW5jdGlvblwiIT10eXBlb2YgcG9zdE1lc3NhZ2V8fG8uaW1wb3J0U2NyaXB0c3x8cihqcik/RXI9XCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIEUoXCJzY3JpcHRcIik/ZnVuY3Rpb24oZSl7U3QuYXBwZW5kQ2hpbGQoRShcInNjcmlwdFwiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7U3QucmVtb3ZlQ2hpbGQodGhpcyksS3IoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KEJyKGUpLDApfTooRXI9anIsby5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLEhyLCExKSkpO3ZhciBXcixZciwkcix6cixKcixYcixRcixacixlYT17c2V0OkdyLGNsZWFyOlByfSx0YT1DLmYsbmE9ZWEuc2V0LG9hPW8uTXV0YXRpb25PYnNlcnZlcnx8by5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLHJhPW8ucHJvY2VzcyxhYT1vLlByb21pc2Usc2E9XCJwcm9jZXNzXCI9PWQocmEpLGlhPXRhKG8sXCJxdWV1ZU1pY3JvdGFza1wiKSxjYT1pYSYmaWEudmFsdWU7Y2F8fChXcj1mdW5jdGlvbigpe3ZhciBlLHQ7Zm9yKHNhJiYoZT1yYS5kb21haW4pJiZlLmV4aXQoKTtZcjspe3Q9WXIuZm4sWXI9WXIubmV4dDt0cnl7dCgpfWNhdGNoKHNJKXt0aHJvdyBZcj96cigpOiRyPXZvaWQgMCxzSX19JHI9dm9pZCAwLGUmJmUuZW50ZXIoKX0sc2E/enI9ZnVuY3Rpb24oKXtyYS5uZXh0VGljayhXcil9Om9hJiYhYnI/KEpyPSEwLFhyPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpLG5ldyBvYShXcikub2JzZXJ2ZShYcix7Y2hhcmFjdGVyRGF0YTohMH0pLHpyPWZ1bmN0aW9uKCl7WHIuZGF0YT1Kcj0hSnJ9KTphYSYmYWEucmVzb2x2ZT8oUXI9YWEucmVzb2x2ZSh2b2lkIDApLFpyPVFyLnRoZW4senI9ZnVuY3Rpb24oKXtaci5jYWxsKFFyLFdyKX0pOnpyPWZ1bmN0aW9uKCl7bmEuY2FsbChvLFdyKX0pO3ZhciB1YSxsYSxkYSxwYSxnYT1jYXx8ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDB9OyRyJiYoJHIubmV4dD10KSxZcnx8KFlyPXQsenIoKSksJHI9dH0saGE9ZnVuY3Rpb24oZSl7dmFyIHQsbjt0aGlzLnByb21pc2U9bmV3IGUoKGZ1bmN0aW9uKGUsbyl7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09bil0aHJvdyBUeXBlRXJyb3IoXCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvclwiKTt0PWUsbj1vfSkpLHRoaXMucmVzb2x2ZT1PZSh0KSx0aGlzLnJlamVjdD1PZShuKX0sZmE9e2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBoYShlKX19LF9hPWZ1bmN0aW9uKGUsdCl7aWYoQShlKSxfKHQpJiZ0LmNvbnN0cnVjdG9yPT09ZSlyZXR1cm4gdDt2YXIgbj1mYS5mKGUpO3JldHVybigwLG4ucmVzb2x2ZSkodCksbi5wcm9taXNlfSxtYT1mdW5jdGlvbihlKXt0cnl7cmV0dXJue2Vycm9yOiExLHZhbHVlOmUoKX19Y2F0Y2goc0kpe3JldHVybntlcnJvcjohMCx2YWx1ZTpzSX19fSx2YT1lYS5zZXQsTWE9cWUoXCJzcGVjaWVzXCIpLHlhPVwiUHJvbWlzZVwiLElhPVEuZ2V0LEVhPVEuc2V0LFRhPVEuZ2V0dGVyRm9yKHlhKSxTYT1DcixDYT1vLlR5cGVFcnJvcixBYT1vLmRvY3VtZW50LERhPW8ucHJvY2VzcyxOYT1uZShcImZldGNoXCIpLGthPWZhLmYsT2E9a2EsUmE9XCJwcm9jZXNzXCI9PWQoRGEpLExhPSEhKEFhJiZBYS5jcmVhdGVFdmVudCYmby5kaXNwYXRjaEV2ZW50KSxiYT1EZSh5YSwoZnVuY3Rpb24oKXtpZighKFAoU2EpIT09U3RyaW5nKFNhKSkpe2lmKDY2PT09UW4pcmV0dXJuITA7aWYoIVJhJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQpcmV0dXJuITB9aWYoUW4+PTUxJiYvbmF0aXZlIGNvZGUvLnRlc3QoU2EpKXJldHVybiExO3ZhciBlPVNhLnJlc29sdmUoMSksdD1mdW5jdGlvbihlKXtlKChmdW5jdGlvbigpe30pLChmdW5jdGlvbigpe30pKX07cmV0dXJuKGUuY29uc3RydWN0b3I9e30pW01hXT10LCEoZS50aGVuKChmdW5jdGlvbigpe30pKWluc3RhbmNlb2YgdCl9KSksd2E9YmF8fCFNdCgoZnVuY3Rpb24oZSl7U2EuYWxsKGUpLmNhdGNoKChmdW5jdGlvbigpe30pKX0pKSxHYT1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4hKCFfKGUpfHxcImZ1bmN0aW9uXCIhPXR5cGVvZih0PWUudGhlbikpJiZ0fSxQYT1mdW5jdGlvbihlLHQsbil7aWYoIXQubm90aWZpZWQpe3Qubm90aWZpZWQ9ITA7dmFyIG89dC5yZWFjdGlvbnM7Z2EoKGZ1bmN0aW9uKCl7Zm9yKHZhciByPXQudmFsdWUsYT0xPT10LnN0YXRlLHM9MDtvLmxlbmd0aD5zOyl7dmFyIGksYyx1LGw9b1tzKytdLGQ9YT9sLm9rOmwuZmFpbCxwPWwucmVzb2x2ZSxnPWwucmVqZWN0LGg9bC5kb21haW47dHJ5e2Q/KGF8fCgyPT09dC5yZWplY3Rpb24mJnhhKGUsdCksdC5yZWplY3Rpb249MSksITA9PT1kP2k9cjooaCYmaC5lbnRlcigpLGk9ZChyKSxoJiYoaC5leGl0KCksdT0hMCkpLGk9PT1sLnByb21pc2U/ZyhDYShcIlByb21pc2UtY2hhaW4gY3ljbGVcIikpOihjPUdhKGkpKT9jLmNhbGwoaSxwLGcpOnAoaSkpOmcocil9Y2F0Y2goc0kpe2gmJiF1JiZoLmV4aXQoKSxnKHNJKX19dC5yZWFjdGlvbnM9W10sdC5ub3RpZmllZD0hMSxuJiYhdC5yZWplY3Rpb24mJkZhKGUsdCl9KSl9fSxVYT1mdW5jdGlvbihlLHQsbil7dmFyIHIsYTtMYT8oKHI9QWEuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSkucHJvbWlzZT10LHIucmVhc29uPW4sci5pbml0RXZlbnQoZSwhMSwhMCksby5kaXNwYXRjaEV2ZW50KHIpKTpyPXtwcm9taXNlOnQscmVhc29uOm59LChhPW9bXCJvblwiK2VdKT9hKHIpOlwidW5oYW5kbGVkcmVqZWN0aW9uXCI9PT1lJiZmdW5jdGlvbihlLHQpe3ZhciBuPW8uY29uc29sZTtuJiZuLmVycm9yJiYoMT09PWFyZ3VtZW50cy5sZW5ndGg/bi5lcnJvcihlKTpuLmVycm9yKGUsdCkpfShcIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblwiLG4pfSxGYT1mdW5jdGlvbihlLHQpe3ZhLmNhbGwobywoZnVuY3Rpb24oKXt2YXIgbixvPXQudmFsdWU7aWYocWEodCkmJihuPW1hKChmdW5jdGlvbigpe1JhP0RhLmVtaXQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixvLGUpOlVhKFwidW5oYW5kbGVkcmVqZWN0aW9uXCIsZSxvKX0pKSx0LnJlamVjdGlvbj1SYXx8cWEodCk/MjoxLG4uZXJyb3IpKXRocm93IG4udmFsdWV9KSl9LHFhPWZ1bmN0aW9uKGUpe3JldHVybiAxIT09ZS5yZWplY3Rpb24mJiFlLnBhcmVudH0seGE9ZnVuY3Rpb24oZSx0KXt2YS5jYWxsKG8sKGZ1bmN0aW9uKCl7UmE/RGEuZW1pdChcInJlamVjdGlvbkhhbmRsZWRcIixlKTpVYShcInJlamVjdGlvbmhhbmRsZWRcIixlLHQudmFsdWUpfSkpfSxWYT1mdW5jdGlvbihlLHQsbixvKXtyZXR1cm4gZnVuY3Rpb24ocil7ZSh0LG4scixvKX19LEthPWZ1bmN0aW9uKGUsdCxuLG8pe3QuZG9uZXx8KHQuZG9uZT0hMCxvJiYodD1vKSx0LnZhbHVlPW4sdC5zdGF0ZT0yLFBhKGUsdCwhMCkpfSxCYT1mdW5jdGlvbihlLHQsbixvKXtpZighdC5kb25lKXt0LmRvbmU9ITAsbyYmKHQ9byk7dHJ5e2lmKGU9PT1uKXRocm93IENhKFwiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGZcIik7dmFyIHI9R2Eobik7cj9nYSgoZnVuY3Rpb24oKXt2YXIgbz17ZG9uZTohMX07dHJ5e3IuY2FsbChuLFZhKEJhLGUsbyx0KSxWYShLYSxlLG8sdCkpfWNhdGNoKHNJKXtLYShlLG8sc0ksdCl9fSkpOih0LnZhbHVlPW4sdC5zdGF0ZT0xLFBhKGUsdCwhMSkpfWNhdGNoKHNJKXtLYShlLHtkb25lOiExfSxzSSx0KX19fTtiYSYmKFNhPWZ1bmN0aW9uKGUpe2tyKHRoaXMsU2EseWEpLE9lKGUpLHVhLmNhbGwodGhpcyk7dmFyIHQ9SWEodGhpcyk7dHJ5e2UoVmEoQmEsdGhpcyx0KSxWYShLYSx0aGlzLHQpKX1jYXRjaChzSSl7S2EodGhpcyx0LHNJKX19LCh1YT1mdW5jdGlvbihlKXtFYSh0aGlzLHt0eXBlOnlhLGRvbmU6ITEsbm90aWZpZWQ6ITEscGFyZW50OiExLHJlYWN0aW9uczpbXSxyZWplY3Rpb246ITEsc3RhdGU6MCx2YWx1ZTp2b2lkIDB9KX0pLnByb3RvdHlwZT1BcihTYS5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oZSx0KXt2YXIgbj1UYSh0aGlzKSxvPWthKExyKHRoaXMsU2EpKTtyZXR1cm4gby5vaz1cImZ1bmN0aW9uXCIhPXR5cGVvZiBlfHxlLG8uZmFpbD1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LG8uZG9tYWluPVJhP0RhLmRvbWFpbjp2b2lkIDAsbi5wYXJlbnQ9ITAsbi5yZWFjdGlvbnMucHVzaChvKSwwIT1uLnN0YXRlJiZQYSh0aGlzLG4sITEpLG8ucHJvbWlzZX0sY2F0Y2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSksbGE9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgdWEsdD1JYShlKTt0aGlzLnByb21pc2U9ZSx0aGlzLnJlc29sdmU9VmEoQmEsZSx0KSx0aGlzLnJlamVjdD1WYShLYSxlLHQpfSxmYS5mPWthPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09U2F8fGU9PT1kYT9uZXcgbGEoZSk6T2EoZSl9LFwiZnVuY3Rpb25cIj09dHlwZW9mIENyJiYocGE9Q3IucHJvdG90eXBlLnRoZW4sWihDci5wcm90b3R5cGUsXCJ0aGVuXCIsKGZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztyZXR1cm4gbmV3IFNhKChmdW5jdGlvbihlLHQpe3BhLmNhbGwobixlLHQpfSkpLnRoZW4oZSx0KX0pLHt1bnNhZmU6ITB9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBOYSYma2Uoe2dsb2JhbDohMCxlbnVtZXJhYmxlOiEwLGZvcmNlZDohMH0se2ZldGNoOmZ1bmN0aW9uKGUpe3JldHVybiBfYShTYSxOYS5hcHBseShvLGFyZ3VtZW50cykpfX0pKSksa2Uoe2dsb2JhbDohMCx3cmFwOiEwLGZvcmNlZDpiYX0se1Byb21pc2U6U2F9KSx0bihTYSx5YSwhMSksTnIoeWEpLGRhPW5lKHlhKSxrZSh7dGFyZ2V0OnlhLHN0YXQ6ITAsZm9yY2VkOmJhfSx7cmVqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PWthKHRoaXMpO3JldHVybiB0LnJlamVjdC5jYWxsKHZvaWQgMCxlKSx0LnByb21pc2V9fSksa2Uoe3RhcmdldDp5YSxzdGF0OiEwLGZvcmNlZDpiYX0se3Jlc29sdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIF9hKHRoaXMsZSl9fSksa2Uoe3RhcmdldDp5YSxzdGF0OiEwLGZvcmNlZDp3YX0se2FsbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49a2EodCksbz1uLnJlc29sdmUscj1uLnJlamVjdCxhPW1hKChmdW5jdGlvbigpe3ZhciBuPU9lKHQucmVzb2x2ZSksYT1bXSxzPTAsaT0xO09yKGUsKGZ1bmN0aW9uKGUpe3ZhciBjPXMrKyx1PSExO2EucHVzaCh2b2lkIDApLGkrKyxuLmNhbGwodCxlKS50aGVuKChmdW5jdGlvbihlKXt1fHwodT0hMCxhW2NdPWUsLS1pfHxvKGEpKX0pLHIpfSkpLC0taXx8byhhKX0pKTtyZXR1cm4gYS5lcnJvciYmcihhLnZhbHVlKSxuLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWthKHQpLG89bi5yZWplY3Qscj1tYSgoZnVuY3Rpb24oKXt2YXIgcj1PZSh0LnJlc29sdmUpO09yKGUsKGZ1bmN0aW9uKGUpe3IuY2FsbCh0LGUpLnRoZW4obi5yZXNvbHZlLG8pfSkpfSkpO3JldHVybiByLmVycm9yJiZvKHIudmFsdWUpLG4ucHJvbWlzZX19KTt2YXIgSGE9ZnVuY3Rpb24oKXt2YXIgZT1BKHRoaXMpLHQ9XCJcIjtyZXR1cm4gZS5nbG9iYWwmJih0Kz1cImdcIiksZS5pZ25vcmVDYXNlJiYodCs9XCJpXCIpLGUubXVsdGlsaW5lJiYodCs9XCJtXCIpLGUuZG90QWxsJiYodCs9XCJzXCIpLGUudW5pY29kZSYmKHQrPVwidVwiKSxlLnN0aWNreSYmKHQrPVwieVwiKSx0fTtmdW5jdGlvbiBqYShlLHQpe3JldHVybiBSZWdFeHAoZSx0KX12YXIgV2EsWWEsJGE9e1VOU1VQUE9SVEVEX1k6cigoZnVuY3Rpb24oKXt2YXIgZT1qYShcImFcIixcInlcIik7cmV0dXJuIGUubGFzdEluZGV4PTIsbnVsbCE9ZS5leGVjKFwiYWJjZFwiKX0pKSxCUk9LRU5fQ0FSRVQ6cigoZnVuY3Rpb24oKXt2YXIgZT1qYShcIl5yXCIsXCJneVwiKTtyZXR1cm4gZS5sYXN0SW5kZXg9MixudWxsIT1lLmV4ZWMoXCJzdHJcIil9KSl9LHphPVJlZ0V4cC5wcm90b3R5cGUuZXhlYyxKYT1TdHJpbmcucHJvdG90eXBlLnJlcGxhY2UsWGE9emEsUWE9KFdhPS9hLyxZYT0vYiovZyx6YS5jYWxsKFdhLFwiYVwiKSx6YS5jYWxsKFlhLFwiYVwiKSwwIT09V2EubGFzdEluZGV4fHwwIT09WWEubGFzdEluZGV4KSxaYT0kYS5VTlNVUFBPUlRFRF9ZfHwkYS5CUk9LRU5fQ0FSRVQsZXM9dm9pZCAwIT09LygpPz8vLmV4ZWMoXCJcIilbMV07KFFhfHxlc3x8WmEpJiYoWGE9ZnVuY3Rpb24oZSl7dmFyIHQsbixvLHIsYT10aGlzLHM9WmEmJmEuc3RpY2t5LGk9SGEuY2FsbChhKSxjPWEuc291cmNlLHU9MCxsPWU7cmV0dXJuIHMmJigtMT09PShpPWkucmVwbGFjZShcInlcIixcIlwiKSkuaW5kZXhPZihcImdcIikmJihpKz1cImdcIiksbD1TdHJpbmcoZSkuc2xpY2UoYS5sYXN0SW5kZXgpLGEubGFzdEluZGV4PjAmJighYS5tdWx0aWxpbmV8fGEubXVsdGlsaW5lJiZcIlxcblwiIT09ZVthLmxhc3RJbmRleC0xXSkmJihjPVwiKD86IFwiK2MrXCIpXCIsbD1cIiBcIitsLHUrKyksbj1uZXcgUmVnRXhwKFwiXig/OlwiK2MrXCIpXCIsaSkpLGVzJiYobj1uZXcgUmVnRXhwKFwiXlwiK2MrXCIkKD8hXFxcXHMpXCIsaSkpLFFhJiYodD1hLmxhc3RJbmRleCksbz16YS5jYWxsKHM/bjphLGwpLHM/bz8oby5pbnB1dD1vLmlucHV0LnNsaWNlKHUpLG9bMF09b1swXS5zbGljZSh1KSxvLmluZGV4PWEubGFzdEluZGV4LGEubGFzdEluZGV4Kz1vWzBdLmxlbmd0aCk6YS5sYXN0SW5kZXg9MDpRYSYmbyYmKGEubGFzdEluZGV4PWEuZ2xvYmFsP28uaW5kZXgrb1swXS5sZW5ndGg6dCksZXMmJm8mJm8ubGVuZ3RoPjEmJkphLmNhbGwob1swXSxuLChmdW5jdGlvbigpe2ZvcihyPTE7cjxhcmd1bWVudHMubGVuZ3RoLTI7cisrKXZvaWQgMD09PWFyZ3VtZW50c1tyXSYmKG9bcl09dm9pZCAwKX0pKSxvfSk7dmFyIHRzPVhhO2tlKHt0YXJnZXQ6XCJSZWdFeHBcIixwcm90bzohMCxmb3JjZWQ6Ly4vLmV4ZWMhPT10c30se2V4ZWM6dHN9KTt2YXIgbnM9UmVnRXhwLnByb3RvdHlwZSxvcz1ucy50b1N0cmluZyxycz1yKChmdW5jdGlvbigpe3JldHVyblwiL2EvYlwiIT1vcy5jYWxsKHtzb3VyY2U6XCJhXCIsZmxhZ3M6XCJiXCJ9KX0pKSxhcz1cInRvU3RyaW5nXCIhPW9zLm5hbWU7KHJzfHxhcykmJlooUmVnRXhwLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsKGZ1bmN0aW9uKCl7dmFyIGU9QSh0aGlzKSx0PVN0cmluZyhlLnNvdXJjZSksbj1lLmZsYWdzO3JldHVyblwiL1wiK3QrXCIvXCIrU3RyaW5nKHZvaWQgMD09PW4mJmUgaW5zdGFuY2VvZiBSZWdFeHAmJiEoXCJmbGFnc1wiaW4gbnMpP0hhLmNhbGwoZSk6bil9KSx7dW5zYWZlOiEwfSk7dmFyIHNzPWp0LmNvZGVBdDtrZSh7dGFyZ2V0OlwiU3RyaW5nXCIscHJvdG86ITB9LHtjb2RlUG9pbnRBdDpmdW5jdGlvbihlKXtyZXR1cm4gc3ModGhpcyxlKX19KTt2YXIgaXM9cWUoXCJtYXRjaFwiKSxjcz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gXyhlKSYmKHZvaWQgMCE9PSh0PWVbaXNdKT8hIXQ6XCJSZWdFeHBcIj09ZChlKSl9LHVzPWZ1bmN0aW9uKGUpe2lmKGNzKGUpKXRocm93IFR5cGVFcnJvcihcIlRoZSBtZXRob2QgZG9lc24ndCBhY2NlcHQgcmVndWxhciBleHByZXNzaW9uc1wiKTtyZXR1cm4gZX0sbHM9cWUoXCJtYXRjaFwiKSxkcz1mdW5jdGlvbihlKXt2YXIgdD0vLi87dHJ5e1wiLy4vXCJbZV0odCl9Y2F0Y2gobil7dHJ5e3JldHVybiB0W2xzXT0hMSxcIi8uL1wiW2VdKHQpfWNhdGNoKG8pe319cmV0dXJuITF9O2tlKHt0YXJnZXQ6XCJTdHJpbmdcIixwcm90bzohMCxmb3JjZWQ6IWRzKFwiaW5jbHVkZXNcIil9LHtpbmNsdWRlczpmdW5jdGlvbihlKXtyZXR1cm4hIX5TdHJpbmcoaCh0aGlzKSkuaW5kZXhPZih1cyhlKSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSk7dmFyIHBzPXFlKFwic3BlY2llc1wiKSxncz0hcigoZnVuY3Rpb24oKXt2YXIgZT0vLi87cmV0dXJuIGUuZXhlYz1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBlLmdyb3Vwcz17YTpcIjdcIn0sZX0sXCI3XCIhPT1cIlwiLnJlcGxhY2UoZSxcIiQ8YT5cIil9KSksaHM9XCIkMFwiPT09XCJhXCIucmVwbGFjZSgvLi8sXCIkMFwiKSxmcz1xZShcInJlcGxhY2VcIiksX3M9ISEvLi9bZnNdJiZcIlwiPT09Ly4vW2ZzXShcImFcIixcIiQwXCIpLG1zPSFyKChmdW5jdGlvbigpe3ZhciBlPS8oPzopLyx0PWUuZXhlYztlLmV4ZWM9ZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3ZhciBuPVwiYWJcIi5zcGxpdChlKTtyZXR1cm4gMiE9PW4ubGVuZ3RofHxcImFcIiE9PW5bMF18fFwiYlwiIT09blsxXX0pKSx2cz1mdW5jdGlvbihlLHQsbixvKXt2YXIgYT1xZShlKSxzPSFyKChmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0W2FdPWZ1bmN0aW9uKCl7cmV0dXJuIDd9LDchPVwiXCJbZV0odCl9KSksaT1zJiYhcigoZnVuY3Rpb24oKXt2YXIgdD0hMSxuPS9hLztyZXR1cm5cInNwbGl0XCI9PT1lJiYoKG49e30pLmNvbnN0cnVjdG9yPXt9LG4uY29uc3RydWN0b3JbcHNdPWZ1bmN0aW9uKCl7cmV0dXJuIG59LG4uZmxhZ3M9XCJcIixuW2FdPS8uL1thXSksbi5leGVjPWZ1bmN0aW9uKCl7cmV0dXJuIHQ9ITAsbnVsbH0sblthXShcIlwiKSwhdH0pKTtpZighc3x8IWl8fFwicmVwbGFjZVwiPT09ZSYmKCFnc3x8IWhzfHxfcyl8fFwic3BsaXRcIj09PWUmJiFtcyl7dmFyIGM9Ly4vW2FdLHU9bihhLFwiXCJbZV0sKGZ1bmN0aW9uKGUsdCxuLG8scil7cmV0dXJuIHQuZXhlYz09PXRzP3MmJiFyP3tkb25lOiEwLHZhbHVlOmMuY2FsbCh0LG4sbyl9Ontkb25lOiEwLHZhbHVlOmUuY2FsbChuLHQsbyl9Ontkb25lOiExfX0pLHtSRVBMQUNFX0tFRVBTXyQwOmhzLFJFR0VYUF9SRVBMQUNFX1NVQlNUSVRVVEVTX1VOREVGSU5FRF9DQVBUVVJFOl9zfSksbD11WzBdLGQ9dVsxXTtaKFN0cmluZy5wcm90b3R5cGUsZSxsKSxaKFJlZ0V4cC5wcm90b3R5cGUsYSwyPT10P2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGQuY2FsbChlLHRoaXMsdCl9OmZ1bmN0aW9uKGUpe3JldHVybiBkLmNhbGwoZSx0aGlzKX0pfW8mJmsoUmVnRXhwLnByb3RvdHlwZVthXSxcInNoYW1cIiwhMCl9LE1zPWp0LmNoYXJBdCx5cz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHQrKG4/TXMoZSx0KS5sZW5ndGg6MSl9LElzPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5leGVjO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pe3ZhciBvPW4uY2FsbChlLHQpO2lmKFwib2JqZWN0XCIhPXR5cGVvZiBvKXRocm93IFR5cGVFcnJvcihcIlJlZ0V4cCBleGVjIG1ldGhvZCByZXR1cm5lZCBzb21ldGhpbmcgb3RoZXIgdGhhbiBhbiBPYmplY3Qgb3IgbnVsbFwiKTtyZXR1cm4gb31pZihcIlJlZ0V4cFwiIT09ZChlKSl0aHJvdyBUeXBlRXJyb3IoXCJSZWdFeHAjZXhlYyBjYWxsZWQgb24gaW5jb21wYXRpYmxlIHJlY2VpdmVyXCIpO3JldHVybiB0cy5jYWxsKGUsdCl9O3ZzKFwibWF0Y2hcIiwxLChmdW5jdGlvbihlLHQsbil7cmV0dXJuW2Z1bmN0aW9uKHQpe3ZhciBuPWgodGhpcyksbz1udWxsPT10P3ZvaWQgMDp0W2VdO3JldHVybiB2b2lkIDAhPT1vP28uY2FsbCh0LG4pOm5ldyBSZWdFeHAodClbZV0oU3RyaW5nKG4pKX0sZnVuY3Rpb24oZSl7dmFyIG89bih0LGUsdGhpcyk7aWYoby5kb25lKXJldHVybiBvLnZhbHVlO3ZhciByPUEoZSksYT1TdHJpbmcodGhpcyk7aWYoIXIuZ2xvYmFsKXJldHVybiBJcyhyLGEpO3ZhciBzPXIudW5pY29kZTtyLmxhc3RJbmRleD0wO2Zvcih2YXIgaSxjPVtdLHU9MDtudWxsIT09KGk9SXMocixhKSk7KXt2YXIgbD1TdHJpbmcoaVswXSk7Y1t1XT1sLFwiXCI9PT1sJiYoci5sYXN0SW5kZXg9eXMoYSxpZShyLmxhc3RJbmRleCkscykpLHUrK31yZXR1cm4gMD09PXU/bnVsbDpjfV19KSk7dmFyIEVzPU1hdGgubWF4LFRzPU1hdGgubWluLFNzPU1hdGguZmxvb3IsQ3M9L1xcJChbJCYnYF18XFxkXFxkP3w8W14+XSo+KS9nLEFzPS9cXCQoWyQmJ2BdfFxcZFxcZD8pL2c7dnMoXCJyZXBsYWNlXCIsMiwoZnVuY3Rpb24oZSx0LG4sbyl7dmFyIHI9by5SRUdFWFBfUkVQTEFDRV9TVUJTVElUVVRFU19VTkRFRklORURfQ0FQVFVSRSxhPW8uUkVQTEFDRV9LRUVQU18kMCxzPXI/XCIkXCI6XCIkMFwiO3JldHVybltmdW5jdGlvbihuLG8pe3ZhciByPWgodGhpcyksYT1udWxsPT1uP3ZvaWQgMDpuW2VdO3JldHVybiB2b2lkIDAhPT1hP2EuY2FsbChuLHIsbyk6dC5jYWxsKFN0cmluZyhyKSxuLG8pfSxmdW5jdGlvbihlLG8pe2lmKCFyJiZhfHxcInN0cmluZ1wiPT10eXBlb2YgbyYmLTE9PT1vLmluZGV4T2Yocykpe3ZhciBjPW4odCxlLHRoaXMsbyk7aWYoYy5kb25lKXJldHVybiBjLnZhbHVlfXZhciB1PUEoZSksbD1TdHJpbmcodGhpcyksZD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBvO2R8fChvPVN0cmluZyhvKSk7dmFyIHA9dS5nbG9iYWw7aWYocCl7dmFyIGc9dS51bmljb2RlO3UubGFzdEluZGV4PTB9Zm9yKHZhciBoPVtdOzspe3ZhciBmPUlzKHUsbCk7aWYobnVsbD09PWYpYnJlYWs7aWYoaC5wdXNoKGYpLCFwKWJyZWFrO1wiXCI9PT1TdHJpbmcoZlswXSkmJih1Lmxhc3RJbmRleD15cyhsLGllKHUubGFzdEluZGV4KSxnKSl9Zm9yKHZhciBfLG09XCJcIix2PTAsTT0wO008aC5sZW5ndGg7TSsrKXtmPWhbTV07Zm9yKHZhciB5PVN0cmluZyhmWzBdKSxJPUVzKFRzKGFlKGYuaW5kZXgpLGwubGVuZ3RoKSwwKSxFPVtdLFQ9MTtUPGYubGVuZ3RoO1QrKylFLnB1c2godm9pZCAwPT09KF89ZltUXSk/XzpTdHJpbmcoXykpO3ZhciBTPWYuZ3JvdXBzO2lmKGQpe3ZhciBDPVt5XS5jb25jYXQoRSxJLGwpO3ZvaWQgMCE9PVMmJkMucHVzaChTKTt2YXIgRD1TdHJpbmcoby5hcHBseSh2b2lkIDAsQykpfWVsc2UgRD1pKHksbCxJLEUsUyxvKTtJPj12JiYobSs9bC5zbGljZSh2LEkpK0Qsdj1JK3kubGVuZ3RoKX1yZXR1cm4gbStsLnNsaWNlKHYpfV07ZnVuY3Rpb24gaShlLG4sbyxyLGEscyl7dmFyIGk9bytlLmxlbmd0aCxjPXIubGVuZ3RoLHU9QXM7cmV0dXJuIHZvaWQgMCE9PWEmJihhPUxlKGEpLHU9Q3MpLHQuY2FsbChzLHUsKGZ1bmN0aW9uKHQscyl7dmFyIHU7c3dpdGNoKHMuY2hhckF0KDApKXtjYXNlXCIkXCI6cmV0dXJuXCIkXCI7Y2FzZVwiJlwiOnJldHVybiBlO2Nhc2VcImBcIjpyZXR1cm4gbi5zbGljZSgwLG8pO2Nhc2VcIidcIjpyZXR1cm4gbi5zbGljZShpKTtjYXNlXCI8XCI6dT1hW3Muc2xpY2UoMSwtMSldO2JyZWFrO2RlZmF1bHQ6dmFyIGw9K3M7aWYoMD09PWwpcmV0dXJuIHQ7aWYobD5jKXt2YXIgZD1TcyhsLzEwKTtyZXR1cm4gMD09PWQ/dDpkPD1jP3ZvaWQgMD09PXJbZC0xXT9zLmNoYXJBdCgxKTpyW2QtMV0rcy5jaGFyQXQoMSk6dH11PXJbbC0xXX1yZXR1cm4gdm9pZCAwPT09dT9cIlwiOnV9KSl9fSkpO3ZhciBEcyxOcz1DLmYsa3M9XCJcIi5zdGFydHNXaXRoLE9zPU1hdGgubWluLFJzPWRzKFwic3RhcnRzV2l0aFwiKSxMcz0hKFJzfHwoRHM9TnMoU3RyaW5nLnByb3RvdHlwZSxcInN0YXJ0c1dpdGhcIiksIURzfHxEcy53cml0YWJsZSkpO2tlKHt0YXJnZXQ6XCJTdHJpbmdcIixwcm90bzohMCxmb3JjZWQ6IUxzJiYhUnN9LHtzdGFydHNXaXRoOmZ1bmN0aW9uKGUpe3ZhciB0PVN0cmluZyhoKHRoaXMpKTt1cyhlKTt2YXIgbj1pZShPcyhhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCx0Lmxlbmd0aCkpLG89U3RyaW5nKGUpO3JldHVybiBrcz9rcy5jYWxsKHQsbyxuKTp0LnNsaWNlKG4sbitvLmxlbmd0aCk9PT1vfX0pO3ZhciBicz1xZShcIml0ZXJhdG9yXCIpLHdzPXFlKFwidG9TdHJpbmdUYWdcIiksR3M9d28udmFsdWVzO2Zvcih2YXIgUHMgaW4gZm4pe3ZhciBVcz1vW1BzXSxGcz1VcyYmVXMucHJvdG90eXBlO2lmKEZzKXtpZihGc1tic10hPT1Hcyl0cnl7ayhGcyxicyxHcyl9Y2F0Y2goc0kpe0ZzW2JzXT1Hc31pZihGc1t3c118fGsoRnMsd3MsUHMpLGZuW1BzXSlmb3IodmFyIHFzIGluIHdvKWlmKEZzW3FzXSE9PXdvW3FzXSl0cnl7ayhGcyxxcyx3b1txc10pfWNhdGNoKHNJKXtGc1txc109d29bcXNdfX19dmFyIHhzPVB0LnRyaW0sVnM9by5wYXJzZUZsb2F0LEtzPTEvVnMoUnQrXCItMFwiKSE9LUluZmluaXR5P2Z1bmN0aW9uKGUpe3ZhciB0PXhzKFN0cmluZyhlKSksbj1Wcyh0KTtyZXR1cm4gMD09PW4mJlwiLVwiPT10LmNoYXJBdCgwKT8tMDpufTpWcztrZSh7Z2xvYmFsOiEwLGZvcmNlZDpwYXJzZUZsb2F0IT1Lc30se3BhcnNlRmxvYXQ6S3N9KTt2YXIgQnM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MDt5bih0aGlzLGUpLHRoaXMuaGlnaD10LHRoaXMubG93PW59cmV0dXJuIEVuKGUsW3trZXk6XCJlcXVhbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT09ZSYmKHRoaXMubG93PT09ZS5sb3cmJnRoaXMuaGlnaD09PWUuaGlnaCl9fSx7a2V5OlwidG9TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPU51bWJlcih0aGlzLmhpZ2gpLnRvU3RyaW5nKDE2KSx0PU51bWJlcih0aGlzLmxvdykudG9TdHJpbmcoMTYpO2lmKHQubGVuZ3RoPDgpZm9yKHZhciBuPTgtdC5sZW5ndGg7bjspdD1cIjBcIit0LG4tLTtyZXR1cm4gZSt0fX1dKSxlfSgpLEhzPXtURVNUOntDSElOQTp7REVGQVVMVDpcIndzczovL3dzcy1kZXYudGltLnFxLmNvbVwifSxPVkVSU0VBOntERUZBVUxUOlwid3NzOi8vd3NzLWRldi50aW0ucXEuY29tXCJ9LFNJTkdBUE9SRTp7REVGQVVMVDpcIndzczovL3dzc3NncC1kZXYuaW0ucWNsb3VkLmNvbVwifSxLT1JFQTp7REVGQVVMVDpcIndzczovL3dzc2tyLWRldi5pbS5xY2xvdWQuY29tXCJ9LEdFUk1BTlk6e0RFRkFVTFQ6XCJ3c3M6Ly93c3NnZXItZGV2LmltLnFjbG91ZC5jb21cIn0sSU5EOntERUZBVUxUOlwid3NzOi8vd3NzaW5kLWRldi5pbS5xY2xvdWQuY29tXCJ9fSxQUk9EVUNUSU9OOntDSElOQTp7REVGQVVMVDpcIndzczovL3dzcy5pbS5xY2xvdWQuY29tXCIsQkFDS1VQOlwid3NzOi8vd3NzLnRpbS5xcS5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGkuaW0ucWNsb3VkLmNvbVwifSxPVkVSU0VBOntERUZBVUxUOlwid3NzOi8vd3NzLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3MubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGkubXktaW1jbG91ZC5jb21cIn0sU0lOR0FQT1JFOntERUZBVUxUOlwid3NzOi8vd3Nzc2dwLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3NzZ3AubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGlzZ3AubXktaW1jbG91ZC5jb21cIn0sS09SRUE6e0RFRkFVTFQ6XCJ3c3M6Ly93c3Nrci5pbS5xY2xvdWQuY29tXCIsQkFDS1VQOlwid3NzOi8vd3Nza3IubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGlrci5teS1pbWNsb3VkLmNvbVwifSxHRVJNQU5ZOntERUZBVUxUOlwid3NzOi8vd3NzZ2VyLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3NnZXIubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGlnZXIubXktaW1jbG91ZC5jb21cIn0sSU5EOntERUZBVUxUOlwid3NzOi8vd3NzaW5kLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3NpbmQubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGlpbmQubXktaW1jbG91ZC5jb21cIn19fSxqcz17V0VCOjcsV1hfTVA6OCxRUV9NUDo5LFRUX01QOjEwLEJBSURVX01QOjExLEFMSV9NUDoxMixVTklfTkFUSVZFX0FQUDoxNX0sV3M9XCIxLjcuM1wiLFlzPTUzNzA0ODE2OCwkcz1cIkNISU5BXCIsenM9XCJPVkVSU0VBXCIsSnM9XCJTSU5HQVBPUkVcIixYcz1cIktPUkVBXCIsUXM9XCJHRVJNQU5ZXCIsWnM9XCJJTkRcIixlaT17SE9TVDp7Q1VSUkVOVDp7REVGQVVMVDpcIndzczovL3dzcy5pbS5xY2xvdWQuY29tXCIsU1RBVDpcImh0dHBzOi8vYXBpLmltLnFjbG91ZC5jb21cIn0sc2V0Q3VycmVudDpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTokczt0aGlzLkNVUlJFTlQ9SHMuUFJPRFVDVElPTltlXX19LE5BTUU6e09QRU5fSU06XCJvcGVuaW1cIixHUk9VUDpcImdyb3VwX29wZW5faHR0cF9zdmNcIixHUk9VUF9DT01NVU5JVFk6XCJtaWxsaW9uX2dyb3VwX29wZW5faHR0cF9zdmNcIixHUk9VUF9BVFRSOlwiZ3JvdXBfb3Blbl9hdHRyX2h0dHBfc3ZjXCIsRlJJRU5EOlwic25zXCIsUFJPRklMRTpcInByb2ZpbGVcIixSRUNFTlRfQ09OVEFDVDpcInJlY2VudGNvbnRhY3RcIixQSUM6XCJvcGVucGljXCIsQklHX0dST1VQX05PX0FVVEg6XCJncm91cF9vcGVuX2h0dHBfbm9hdXRoX3N2Y1wiLEJJR19HUk9VUF9MT05HX1BPTExJTkc6XCJncm91cF9vcGVuX2xvbmdfcG9sbGluZ19odHRwX3N2Y1wiLEJJR19HUk9VUF9MT05HX1BPTExJTkdfTk9fQVVUSDpcImdyb3VwX29wZW5fbG9uZ19wb2xsaW5nX2h0dHBfbm9hdXRoX3N2Y1wiLElNX09QRU5fU1RBVDpcImltb3BlbnN0YXRcIixXRUJfSU06XCJ3ZWJpbVwiLElNX0NPU19TSUdOOlwiaW1fY29zX3NpZ25fc3ZyXCIsQ1VTVE9NX1VQTE9BRDpcImltX2Nvc19tc2dcIixIRUFSVEJFQVQ6XCJoZWFydGJlYXRcIixJTV9PUEVOX1BVU0g6XCJpbV9vcGVuX3B1c2hcIixJTV9PUEVOX1NUQVRVUzpcImltX29wZW5fc3RhdHVzXCIsSU1fTE9OR19NRVNTQUdFOlwiaW1fbG9uZ19tc2dcIixJTV9DT05GSUdfTUFOQUdFUjpcImltX3Nka19jb25maWdfbWdyXCIsU1RBVF9TRVJWSUNFOlwiU3RhdFN2Y1wiLE9WRVJMT0FEX1BVU0g6XCJPdmVyTG9hZFB1c2hcIn0sQ01EOntBQ0NFU1NfTEFZRVI6XCJhY2Nlc3NsYXllclwiLExPR0lOOlwid3Nsb2dpblwiLExPR09VVF9MT05HX1BPTEw6XCJsb25ncG9sbGluZ2xvZ291dFwiLExPR09VVDpcIndzbG9nb3V0XCIsSEVMTE86XCJ3c2hlbGxvXCIsUE9SVFJBSVRfR0VUOlwicG9ydHJhaXRfZ2V0X2FsbFwiLFBPUlRSQUlUX1NFVDpcInBvcnRyYWl0X3NldFwiLEdFVF9MT05HX1BPTExfSUQ6XCJnZXRsb25ncG9sbGluZ2lkXCIsTE9OR19QT0xMOlwibG9uZ3BvbGxpbmdcIixBVkNIQVRST09NX0xPTkdfUE9MTDpcImdldF9tc2dcIixBRERfRlJJRU5EOlwiZnJpZW5kX2FkZFwiLFVQREFURV9GUklFTkQ6XCJmcmllbmRfdXBkYXRlXCIsR0VUX0ZSSUVORF9MSVNUOlwiZnJpZW5kX2dldFwiLEdFVF9GUklFTkRfUFJPRklMRTpcImZyaWVuZF9nZXRfbGlzdFwiLERFTEVURV9GUklFTkQ6XCJmcmllbmRfZGVsZXRlXCIsQ0hFQ0tfRlJJRU5EOlwiZnJpZW5kX2NoZWNrXCIsR0VUX0ZSSUVORF9HUk9VUF9MSVNUOlwiZ3JvdXBfZ2V0XCIsUkVTUE9ORF9GUklFTkRfQVBQTElDQVRJT046XCJmcmllbmRfcmVzcG9uc2VcIixHRVRfRlJJRU5EX0FQUExJQ0FUSU9OX0xJU1Q6XCJwZW5kZW5jeV9nZXRcIixERUxFVEVfRlJJRU5EX0FQUExJQ0FUSU9OOlwicGVuZGVuY3lfZGVsZXRlXCIsUkVQT1JUX0ZSSUVORF9BUFBMSUNBVElPTjpcInBlbmRlbmN5X3JlcG9ydFwiLEdFVF9HUk9VUF9BUFBMSUNBVElPTjpcImdldF9wZW5kZW5jeVwiLENSRUFURV9GUklFTkRfR1JPVVA6XCJncm91cF9hZGRcIixERUxFVEVfRlJJRU5EX0dST1VQOlwiZ3JvdXBfZGVsZXRlXCIsVVBEQVRFX0ZSSUVORF9HUk9VUDpcImdyb3VwX3VwZGF0ZVwiLEdFVF9CTEFDS0xJU1Q6XCJibGFja19saXN0X2dldFwiLEFERF9CTEFDS0xJU1Q6XCJibGFja19saXN0X2FkZFwiLERFTEVURV9CTEFDS0xJU1Q6XCJibGFja19saXN0X2RlbGV0ZVwiLENSRUFURV9HUk9VUDpcImNyZWF0ZV9ncm91cFwiLEdFVF9KT0lORURfR1JPVVBTOlwiZ2V0X2pvaW5lZF9ncm91cF9saXN0XCIsU0VUX0dST1VQX0FUVFJJQlVURVM6XCJzZXRfZ3JvdXBfYXR0clwiLE1PRElGWV9HUk9VUF9BVFRSSUJVVEVTOlwibW9kaWZ5X2dyb3VwX2F0dHJcIixERUxFVEVfR1JPVVBfQVRUUklCVVRFUzpcImRlbGV0ZV9ncm91cF9hdHRyXCIsQ0xFQVJfR1JPVVBfQVRUUklCVVRFUzpcImNsZWFyX2dyb3VwX2F0dHJcIixHRVRfR1JPVVBfQVRUUklCVVRFUzpcImdldF9ncm91cF9hdHRyXCIsU0VORF9NRVNTQUdFOlwic2VuZG1zZ1wiLFJFVk9LRV9DMkNfTUVTU0FHRTpcIm1zZ3dpdGhkcmF3XCIsREVMRVRFX0MyQ19NRVNTQUdFOlwiZGVsZXRlX2MyY19tc2dfcmFtYmxlXCIsU0VORF9HUk9VUF9NRVNTQUdFOlwic2VuZF9ncm91cF9tc2dcIixSRVZPS0VfR1JPVVBfTUVTU0FHRTpcImdyb3VwX21zZ19yZWNhbGxcIixERUxFVEVfR1JPVVBfTUVTU0FHRTpcImRlbGV0ZV9ncm91cF9yYW1ibGVfbXNnX2J5X3NlcVwiLEdFVF9HUk9VUF9JTkZPOlwiZ2V0X2dyb3VwX3NlbGZfbWVtYmVyX2luZm9cIixHRVRfR1JPVVBfTUVNQkVSX0lORk86XCJnZXRfc3BlY2lmaWVkX2dyb3VwX21lbWJlcl9pbmZvXCIsR0VUX0dST1VQX01FTUJFUl9MSVNUOlwiZ2V0X2dyb3VwX21lbWJlcl9pbmZvXCIsUVVJVF9HUk9VUDpcInF1aXRfZ3JvdXBcIixDSEFOR0VfR1JPVVBfT1dORVI6XCJjaGFuZ2VfZ3JvdXBfb3duZXJcIixERVNUUk9ZX0dST1VQOlwiZGVzdHJveV9ncm91cFwiLEFERF9HUk9VUF9NRU1CRVI6XCJhZGRfZ3JvdXBfbWVtYmVyXCIsREVMRVRFX0dST1VQX01FTUJFUjpcImRlbGV0ZV9ncm91cF9tZW1iZXJcIixTRUFSQ0hfR1JPVVBfQllfSUQ6XCJnZXRfZ3JvdXBfcHVibGljX2luZm9cIixBUFBMWV9KT0lOX0dST1VQOlwiYXBwbHlfam9pbl9ncm91cFwiLEhBTkRMRV9BUFBMWV9KT0lOX0dST1VQOlwiaGFuZGxlX2FwcGx5X2pvaW5fZ3JvdXBcIixIQU5ETEVfR1JPVVBfSU5WSVRBVElPTjpcImhhbmRsZV9pbnZpdGVfam9pbl9ncm91cFwiLE1PRElGWV9HUk9VUF9JTkZPOlwibW9kaWZ5X2dyb3VwX2Jhc2VfaW5mb1wiLE1PRElGWV9HUk9VUF9NRU1CRVJfSU5GTzpcIm1vZGlmeV9ncm91cF9tZW1iZXJfaW5mb1wiLERFTEVURV9HUk9VUF9TWVNURU1fTUVTU0FHRTpcImRlbGV0ZW1zZ1wiLERFTEVURV9HUk9VUF9BVF9USVBTOlwiZGVsZXRlbXNnXCIsR0VUX0NPTlZFUlNBVElPTl9MSVNUOlwiZ2V0XCIsUEFHSU5HX0dFVF9DT05WRVJTQVRJT05fTElTVDpcInBhZ2VfZ2V0XCIsREVMRVRFX0NPTlZFUlNBVElPTjpcImRlbGV0ZVwiLFBJTl9DT05WRVJTQVRJT046XCJ0b3BcIixHRVRfTUVTU0FHRVM6XCJnZXRtc2dcIixHRVRfQzJDX1JPQU1fTUVTU0FHRVM6XCJnZXRyb2FtbXNnXCIsU0VUX0MyQ19QRUVSX01VVEVfTk9USUZJQ0FUSU9OUzpcInNldF9jMmNfcGVlcl9tdXRlX25vdGlmaWNhdGlvbnNcIixHRVRfQzJDX1BFRVJfTVVURV9OT1RJRklDQVRJT05TOlwiZ2V0X2MyY19wZWVyX211dGVfbm90aWZpY2F0aW9uc1wiLEdFVF9HUk9VUF9ST0FNX01FU1NBR0VTOlwiZ3JvdXBfbXNnX2dldFwiLEdFVF9SRUFEX1JFQ0VJUFQ6XCJnZXRfZ3JvdXBfbXNnX3JlY2VpcHRcIixHRVRfUkVBRF9SRUNFSVBUX0RFVEFJTDpcImdldF9ncm91cF9tc2dfcmVjZWlwdF9kZXRhaWxcIixTRU5EX1JFQURfUkVDRUlQVDpcImdyb3VwX21zZ19yZWNlaXB0XCIsU0VUX0MyQ19NRVNTQUdFX1JFQUQ6XCJtc2dyZWFkZWRcIixHRVRfUEVFUl9SRUFEX1RJTUU6XCJnZXRfcGVlcl9yZWFkX3RpbWVcIixTRVRfR1JPVVBfTUVTU0FHRV9SRUFEOlwibXNnX3JlYWRfcmVwb3J0XCIsRklMRV9SRUFEX0FORF9XUklURV9BVVRIS0VZOlwiYXV0aGtleVwiLEZJTEVfVVBMT0FEOlwicGljX3VwXCIsQ09TX1NJR046XCJjb3NcIixDT1NfUFJFX1NJRzpcInByZV9zaWdcIixWSURFT19DT1ZFUjpcInZpZGVvX2NvdmVyXCIsVElNX1dFQl9SRVBPUlRfVjI6XCJ0aW1fd2ViX3JlcG9ydF92MlwiLEJJR19EQVRBX0hBTExXQVlfQVVUSF9LRVk6XCJhdXRoa2V5XCIsR0VUX09OTElORV9NRU1CRVJfTlVNOlwiZ2V0X29ubGluZV9tZW1iZXJfbnVtXCIsQUxJVkU6XCJhbGl2ZVwiLE1FU1NBR0VfUFVTSDpcIm1zZ19wdXNoXCIsTVVMVElfTUVTU0FHRV9QVVNIOlwibXVsdGlfbXNnX3B1c2hfd3NcIixNRVNTQUdFX1BVU0hfQUNLOlwid3NfbXNnX3B1c2hfYWNrXCIsU1RBVFVTX0ZPUkNFT0ZGTElORTpcInN0YXRfZm9yY2VvZmZsaW5lXCIsRE9XTkxPQURfTUVSR0VSX01FU1NBR0U6XCJnZXRfcmVsYXlfanNvbl9tc2dcIixVUExPQURfTUVSR0VSX01FU1NBR0U6XCJzYXZlX3JlbGF5X2pzb25fbXNnXCIsRkVUQ0hfQ0xPVURfQ09OVFJPTF9DT05GSUc6XCJmZXRjaF9jb25maWdcIixQVVNIRURfQ0xPVURfQ09OVFJPTF9DT05GSUc6XCJwdXNoX2NvbmZpZ3YyXCIsRkVUQ0hfQ09NTUVSQ0lBTF9DT05GSUc6XCJmZXRjaF9pbXNka19wdXJjaGFzZV9iaXRzdjJcIixQVVNIRURfQ09NTUVSQ0lBTF9DT05GSUc6XCJwdXNoX2ltc2RrX3B1cmNoYXNlX2JpdHN2MlwiLEtJQ0tfT1RIRVI6XCJLaWNrT3RoZXJcIixPVkVSTE9BRF9OT1RJRlk6XCJub3RpZnkyXCIsU0VUX0FMTF9NRVNTQUdFX1JFQUQ6XCJyZWFkX2FsbF91bnJlYWRfbXNnXCJ9LENIQU5ORUw6e1NPQ0tFVDoxLFhIUjoyLEFVVE86MH0sTkFNRV9WRVJTSU9OOntvcGVuaW06XCJ2NFwiLGdyb3VwX29wZW5faHR0cF9zdmM6XCJ2NFwiLHNuczpcInY0XCIscHJvZmlsZTpcInY0XCIscmVjZW50Y29udGFjdDpcInY0XCIsb3BlbnBpYzpcInY0XCIsZ3JvdXBfb3Blbl9odHRwX25vYXV0aF9zdmM6XCJ2NFwiLGdyb3VwX29wZW5fbG9uZ19wb2xsaW5nX2h0dHBfc3ZjOlwidjRcIixncm91cF9vcGVuX2xvbmdfcG9sbGluZ19odHRwX25vYXV0aF9zdmM6XCJ2NFwiLGltb3BlbnN0YXQ6XCJ2NFwiLGltX2Nvc19zaWduX3N2cjpcInY0XCIsaW1fY29zX21zZzpcInY0XCIsd2ViaW06XCJ2NFwiLGltX29wZW5fcHVzaDpcInY0XCIsaW1fb3Blbl9zdGF0dXM6XCJ2NFwifX0sdGk9e1NFQVJDSF9NU0c6bmV3IEJzKDAsTWF0aC5wb3coMiwwKSkudG9TdHJpbmcoKSxTRUFSQ0hfR1JQX1NOUzpuZXcgQnMoMCxNYXRoLnBvdygyLDEpKS50b1N0cmluZygpLEFWQ0hBVFJPT01fSElTVE9SWV9NU0c6bmV3IEJzKDAsTWF0aC5wb3coMiwyKSkudG9TdHJpbmcoKSxHUlBfQ09NTVVOSVRZOm5ldyBCcygwLE1hdGgucG93KDIsMykpLnRvU3RyaW5nKCksTVNHX1RPX1NQRUNJRklFRF9HUlBfTUJSOm5ldyBCcygwLE1hdGgucG93KDIsNCkpLnRvU3RyaW5nKCl9O2VpLkhPU1Quc2V0Q3VycmVudCgkcyk7dmFyIG5pLG9pLHJpLGFpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3eCYmXCJmdW5jdGlvblwiPT10eXBlb2Ygd3guZ2V0U3lzdGVtSW5mb1N5bmMmJkJvb2xlYW4od3guZ2V0U3lzdGVtSW5mb1N5bmMoKS5mb250U2l6ZVNldHRpbmcpLHNpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBxcSYmXCJmdW5jdGlvblwiPT10eXBlb2YgcXEuZ2V0U3lzdGVtSW5mb1N5bmMmJkJvb2xlYW4ocXEuZ2V0U3lzdGVtSW5mb1N5bmMoKS5mb250U2l6ZVNldHRpbmcpLGlpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB0dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdHQuZ2V0U3lzdGVtSW5mb1N5bmMmJkJvb2xlYW4odHQuZ2V0U3lzdGVtSW5mb1N5bmMoKS5mb250U2l6ZVNldHRpbmcpLGNpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBzd2FuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBzd2FuLmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKHN3YW4uZ2V0U3lzdGVtSW5mb1N5bmMoKS5mb250U2l6ZVNldHRpbmcpLHVpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBteSYmXCJmdW5jdGlvblwiPT10eXBlb2YgbXkuZ2V0U3lzdGVtSW5mb1N5bmMmJkJvb2xlYW4obXkuZ2V0U3lzdGVtSW5mb1N5bmMoKS5mb250U2l6ZVNldHRpbmcpLGxpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmkmJlwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3csZGk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaSxwaT1haXx8c2l8fGlpfHxjaXx8dWl8fGxpLGdpPShcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pfHxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KSYmIXBpLGhpPXNpP3FxOmlpP3R0OmNpP3N3YW46dWk/bXk6YWk/d3g6bGk/dW5pOnt9LGZpPShuaT1cIldFQlwiLE9pP25pPVwiV0VCXCI6c2k/bmk9XCJRUV9NUFwiOmlpP25pPVwiVFRfTVBcIjpjaT9uaT1cIkJBSURVX01QXCI6dWk/bmk9XCJBTElfTVBcIjphaT9uaT1cIldYX01QXCI6bGkmJihuaT1cIlVOSV9OQVRJVkVfQVBQXCIpLGpzW25pXSksX2k9Z2kmJndpbmRvdyYmd2luZG93Lm5hdmlnYXRvciYmd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnR8fFwiXCIsbWk9L0FwcGxlV2ViS2l0XFwvKFtcXGQuXSspL2kuZXhlYyhfaSksdmk9KG1pJiZwYXJzZUZsb2F0KG1pLnBvcCgpKSwvaVBhZC9pLnRlc3QoX2kpKSxNaT0vaVBob25lL2kudGVzdChfaSkmJiF2aSx5aT0vaVBvZC9pLnRlc3QoX2kpLElpPU1pfHx2aXx8eWksRWk9ZnVuY3Rpb24oKXt2YXIgZT1faS5tYXRjaCgvT1MgKFxcZCspXy9pKTtyZXR1cm4gZSYmZVsxXT9lWzFdOm51bGx9KCksVGk9L0FuZHJvaWQvaS50ZXN0KF9pKSxTaT1mdW5jdGlvbigpe3ZhciBlPV9pLm1hdGNoKC9BbmRyb2lkIChcXGQrKSg/OlxcLihcXGQrKSk/KD86XFwuKFxcZCspKSovaSk7aWYoIWUpcmV0dXJuIG51bGw7dmFyIHQ9ZVsxXSYmcGFyc2VGbG9hdChlWzFdKSxuPWVbMl0mJnBhcnNlRmxvYXQoZVsyXSk7cmV0dXJuIHQmJm4/cGFyc2VGbG9hdChlWzFdK1wiLlwiK2VbMl0pOnR8fG51bGx9KCksQ2k9KFRpJiYvd2Via2l0L2kudGVzdChfaSksL0ZpcmVmb3gvaS50ZXN0KF9pKSwvRWRnZS9pLnRlc3QoX2kpKSxBaT0hQ2kmJi9DaHJvbWUvaS50ZXN0KF9pKSxEaT0oZnVuY3Rpb24oKXt2YXIgZT1faS5tYXRjaCgvQ2hyb21lXFwvKFxcZCspLyk7ZSYmZVsxXSYmcGFyc2VGbG9hdChlWzFdKX0oKSwvTVNJRS8udGVzdChfaSl8fF9pLmluZGV4T2YoXCJUcmlkZW50XCIpPi0xJiZfaS5pbmRleE9mKFwicnY6MTEuMFwiKT4tMSksTmk9KC9NU0lFXFxzOFxcLjAvLnRlc3QoX2kpLGZ1bmN0aW9uKCl7dmFyIGU9L01TSUVcXHMoXFxkKylcXC5cXGQvLmV4ZWMoX2kpLHQ9ZSYmcGFyc2VGbG9hdChlWzFdKTtyZXR1cm4hdCYmL1RyaWRlbnRcXC83LjAvaS50ZXN0KF9pKSYmL3J2OjExLjAvLnRlc3QoX2kpJiYodD0xMSksdH0oKSksa2k9KC9TYWZhcmkvaS50ZXN0KF9pKSwvVEJTXFwvXFxkKy9pLnRlc3QoX2kpKSxPaT0oZnVuY3Rpb24oKXt2YXIgZT1faS5tYXRjaCgvVEJTXFwvKFxcZCspL2kpO2lmKGUmJmVbMV0pZVsxXX0oKSwha2kmJi9NUVFCcm93c2VyXFwvXFxkKy9pLnRlc3QoX2kpLCFraSYmLyBRUUJyb3dzZXJcXC9cXGQrL2kudGVzdChfaSksLyhtaWNyb21lc3Nlbmdlcnx3ZWJicm93c2VyKS9pLnRlc3QoX2kpKSxSaT0vV2luZG93cy9pLnRlc3QoX2kpLExpPS9NQUMgT1MgWC9pLnRlc3QoX2kpLGJpPSgvTWljcm9NZXNzZW5nZXIvaS50ZXN0KF9pKSxnaSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdvcmtlciYmIURpKSx3aT0hcigoZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pKSxHaT10KChmdW5jdGlvbihlKXt2YXIgdD1OLmYsbj1LKFwibWV0YVwiKSxvPTAscj1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxhPWZ1bmN0aW9uKGUpe3QoZSxuLHt2YWx1ZTp7b2JqZWN0SUQ6XCJPXCIrICsrbyx3ZWFrRGF0YTp7fX19KX0scz1lLmV4cG9ydHM9e1JFUVVJUkVEOiExLGZhc3RLZXk6ZnVuY3Rpb24oZSx0KXtpZighXyhlKSlyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZT9lOihcInN0cmluZ1wiPT10eXBlb2YgZT9cIlNcIjpcIlBcIikrZTtpZighTShlLG4pKXtpZighcihlKSlyZXR1cm5cIkZcIjtpZighdClyZXR1cm5cIkVcIjthKGUpfXJldHVybiBlW25dLm9iamVjdElEfSxnZXRXZWFrRGF0YTpmdW5jdGlvbihlLHQpe2lmKCFNKGUsbikpe2lmKCFyKGUpKXJldHVybiEwO2lmKCF0KXJldHVybiExO2EoZSl9cmV0dXJuIGVbbl0ud2Vha0RhdGF9LG9uRnJlZXplOmZ1bmN0aW9uKGUpe3JldHVybiB3aSYmcy5SRVFVSVJFRCYmcihlKSYmIU0oZSxuKSYmYShlKSxlfX07altuXT0hMH0pKSxQaT0oR2kuUkVRVUlSRUQsR2kuZmFzdEtleSxHaS5nZXRXZWFrRGF0YSxHaS5vbkZyZWV6ZSxOLmYpLFVpPUdpLmZhc3RLZXksRmk9US5zZXQscWk9US5nZXR0ZXJGb3IseGk9KGZ1bmN0aW9uKGUsdCxuKXt2YXIgYT0tMSE9PWUuaW5kZXhPZihcIk1hcFwiKSxzPS0xIT09ZS5pbmRleE9mKFwiV2Vha1wiKSxpPWE/XCJzZXRcIjpcImFkZFwiLGM9b1tlXSx1PWMmJmMucHJvdG90eXBlLGw9YyxkPXt9LHA9ZnVuY3Rpb24oZSl7dmFyIHQ9dVtlXTtaKHUsZSxcImFkZFwiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiB0LmNhbGwodGhpcywwPT09ZT8wOmUpLHRoaXN9OlwiZGVsZXRlXCI9PWU/ZnVuY3Rpb24oZSl7cmV0dXJuIShzJiYhXyhlKSkmJnQuY2FsbCh0aGlzLDA9PT1lPzA6ZSl9OlwiZ2V0XCI9PWU/ZnVuY3Rpb24oZSl7cmV0dXJuIHMmJiFfKGUpP3ZvaWQgMDp0LmNhbGwodGhpcywwPT09ZT8wOmUpfTpcImhhc1wiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiEocyYmIV8oZSkpJiZ0LmNhbGwodGhpcywwPT09ZT8wOmUpfTpmdW5jdGlvbihlLG4pe3JldHVybiB0LmNhbGwodGhpcywwPT09ZT8wOmUsbiksdGhpc30pfTtpZihEZShlLFwiZnVuY3Rpb25cIiE9dHlwZW9mIGN8fCEoc3x8dS5mb3JFYWNoJiYhcigoZnVuY3Rpb24oKXsobmV3IGMpLmVudHJpZXMoKS5uZXh0KCl9KSkpKSlsPW4uZ2V0Q29uc3RydWN0b3IodCxlLGEsaSksR2kuUkVRVUlSRUQ9ITA7ZWxzZSBpZihEZShlLCEwKSl7dmFyIGc9bmV3IGwsaD1nW2ldKHM/e306LTAsMSkhPWcsZj1yKChmdW5jdGlvbigpe2cuaGFzKDEpfSkpLG09TXQoKGZ1bmN0aW9uKGUpe25ldyBjKGUpfSkpLHY9IXMmJnIoKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPW5ldyBjLHQ9NTt0LS07KWVbaV0odCx0KTtyZXR1cm4hZS5oYXMoLTApfSkpO218fCgobD10KChmdW5jdGlvbih0LG4pe2tyKHQsbCxlKTt2YXIgbz10cihuZXcgYyx0LGwpO3JldHVybiBudWxsIT1uJiZPcihuLG9baV0sbyxhKSxvfSkpKS5wcm90b3R5cGU9dSx1LmNvbnN0cnVjdG9yPWwpLChmfHx2KSYmKHAoXCJkZWxldGVcIikscChcImhhc1wiKSxhJiZwKFwiZ2V0XCIpKSwodnx8aCkmJnAoaSkscyYmdS5jbGVhciYmZGVsZXRlIHUuY2xlYXJ9ZFtlXT1sLGtlKHtnbG9iYWw6ITAsZm9yY2VkOmwhPWN9LGQpLHRuKGwsZSksc3x8bi5zZXRTdHJvbmcobCxlLGEpfShcIk1hcFwiLChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSkse2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKGUsdCxuLG8pe3ZhciByPWUoKGZ1bmN0aW9uKGUscyl7a3IoZSxyLHQpLEZpKGUse3R5cGU6dCxpbmRleDprdChudWxsKSxmaXJzdDp2b2lkIDAsbGFzdDp2b2lkIDAsc2l6ZTowfSksYXx8KGUuc2l6ZT0wKSxudWxsIT1zJiZPcihzLGVbb10sZSxuKX0pKSxzPXFpKHQpLGk9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvLHIsaT1zKGUpLHU9YyhlLHQpO3JldHVybiB1P3UudmFsdWU9bjooaS5sYXN0PXU9e2luZGV4OnI9VWkodCwhMCksa2V5OnQsdmFsdWU6bixwcmV2aW91czpvPWkubGFzdCxuZXh0OnZvaWQgMCxyZW1vdmVkOiExfSxpLmZpcnN0fHwoaS5maXJzdD11KSxvJiYoby5uZXh0PXUpLGE/aS5zaXplKys6ZS5zaXplKyssXCJGXCIhPT1yJiYoaS5pbmRleFtyXT11KSksZX0sYz1mdW5jdGlvbihlLHQpe3ZhciBuLG89cyhlKSxyPVVpKHQpO2lmKFwiRlwiIT09cilyZXR1cm4gby5pbmRleFtyXTtmb3Iobj1vLmZpcnN0O247bj1uLm5leHQpaWYobi5rZXk9PXQpcmV0dXJuIG59O3JldHVybiBBcihyLnByb3RvdHlwZSx7Y2xlYXI6ZnVuY3Rpb24oKXtmb3IodmFyIGU9cyh0aGlzKSx0PWUuaW5kZXgsbj1lLmZpcnN0O247KW4ucmVtb3ZlZD0hMCxuLnByZXZpb3VzJiYobi5wcmV2aW91cz1uLnByZXZpb3VzLm5leHQ9dm9pZCAwKSxkZWxldGUgdFtuLmluZGV4XSxuPW4ubmV4dDtlLmZpcnN0PWUubGFzdD12b2lkIDAsYT9lLnNpemU9MDp0aGlzLnNpemU9MH0sZGVsZXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXModGhpcyksbj1jKHRoaXMsZSk7aWYobil7dmFyIG89bi5uZXh0LHI9bi5wcmV2aW91cztkZWxldGUgdC5pbmRleFtuLmluZGV4XSxuLnJlbW92ZWQ9ITAsciYmKHIubmV4dD1vKSxvJiYoby5wcmV2aW91cz1yKSx0LmZpcnN0PT1uJiYodC5maXJzdD1vKSx0Lmxhc3Q9PW4mJih0Lmxhc3Q9ciksYT90LnNpemUtLTp0aGlzLnNpemUtLX1yZXR1cm4hIW59LGZvckVhY2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49cyh0aGlzKSxvPVJlKGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyk7dD10P3QubmV4dDpuLmZpcnN0Oylmb3Iobyh0LnZhbHVlLHQua2V5LHRoaXMpO3QmJnQucmVtb3ZlZDspdD10LnByZXZpb3VzfSxoYXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFjKHRoaXMsZSl9fSksQXIoci5wcm90b3R5cGUsbj97Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWModGhpcyxlKTtyZXR1cm4gdCYmdC52YWx1ZX0sc2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkodGhpcywwPT09ZT8wOmUsdCl9fTp7YWRkOmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZT0wPT09ZT8wOmUsZSl9fSksYSYmUGkoci5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBzKHRoaXMpLnNpemV9fSkscn0sc2V0U3Ryb25nOmZ1bmN0aW9uKGUsdCxuKXt2YXIgbz10K1wiIEl0ZXJhdG9yXCIscj1xaSh0KSxhPXFpKG8pO2RuKGUsdCwoZnVuY3Rpb24oZSx0KXtGaSh0aGlzLHt0eXBlOm8sdGFyZ2V0OmUsc3RhdGU6cihlKSxraW5kOnQsbGFzdDp2b2lkIDB9KX0pLChmdW5jdGlvbigpe2Zvcih2YXIgZT1hKHRoaXMpLHQ9ZS5raW5kLG49ZS5sYXN0O24mJm4ucmVtb3ZlZDspbj1uLnByZXZpb3VzO3JldHVybiBlLnRhcmdldCYmKGUubGFzdD1uPW4/bi5uZXh0OmUuc3RhdGUuZmlyc3QpP1wia2V5c1wiPT10P3t2YWx1ZTpuLmtleSxkb25lOiExfTpcInZhbHVlc1wiPT10P3t2YWx1ZTpuLnZhbHVlLGRvbmU6ITF9Ont2YWx1ZTpbbi5rZXksbi52YWx1ZV0sZG9uZTohMX06KGUudGFyZ2V0PXZvaWQgMCx7dmFsdWU6dm9pZCAwLGRvbmU6ITB9KX0pLG4/XCJlbnRyaWVzXCI6XCJ2YWx1ZXNcIiwhbiwhMCksTnIodCl9fSksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSk7b2k9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGU/Y29uc29sZTp2b2lkIDAhPT14aSYmeGkuY29uc29sZT94aS5jb25zb2xlOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5jb25zb2xlP3dpbmRvdy5jb25zb2xlOnt9O2Zvcih2YXIgVmk9ZnVuY3Rpb24oKXt9LEtpPVtcImFzc2VydFwiLFwiY2xlYXJcIixcImNvdW50XCIsXCJkZWJ1Z1wiLFwiZGlyXCIsXCJkaXJ4bWxcIixcImVycm9yXCIsXCJleGNlcHRpb25cIixcImdyb3VwXCIsXCJncm91cENvbGxhcHNlZFwiLFwiZ3JvdXBFbmRcIixcImluZm9cIixcImxvZ1wiLFwibWFya1RpbWVsaW5lXCIsXCJwcm9maWxlXCIsXCJwcm9maWxlRW5kXCIsXCJ0YWJsZVwiLFwidGltZVwiLFwidGltZUVuZFwiLFwidGltZVN0YW1wXCIsXCJ0cmFjZVwiLFwid2FyblwiXSxCaT1LaS5sZW5ndGg7QmktLTspcmk9S2lbQmldLGNvbnNvbGVbcmldfHwob2lbcmldPVZpKTtvaS5tZXRob2RzPUtpO3ZhciBIaT1vaSxqaT0wLFdpPWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCkraml9LFlpPWZ1bmN0aW9uKCl7amk9MH0sJGk9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5mbG9vcihXaSgpLzFlMyl9LHppPTAsSmk9bmV3IE1hcDtmdW5jdGlvbiBYaSgpe3ZhciBlLHQ9KChlPW5ldyBEYXRlKS5zZXRUaW1lKFdpKCkpLGUpO3JldHVyblwiVElNIFwiK3QudG9Mb2NhbGVUaW1lU3RyaW5nKFwiZW4tVVNcIix7aG91cjEyOiExfSkrXCIuXCIrZnVuY3Rpb24oZSl7dmFyIHQ7c3dpdGNoKGUudG9TdHJpbmcoKS5sZW5ndGgpe2Nhc2UgMTp0PVwiMDBcIitlO2JyZWFrO2Nhc2UgMjp0PVwiMFwiK2U7YnJlYWs7ZGVmYXVsdDp0PWV9cmV0dXJuIHR9KHQuZ2V0TWlsbGlzZWNvbmRzKCkpK1wiOlwifXZhciBRaT17YXJndW1lbnRzMlN0cmluZzpmdW5jdGlvbihlKXt2YXIgdDtpZigxPT09ZS5sZW5ndGgpdD1YaSgpK2VbMF07ZWxzZXt0PVhpKCk7Zm9yKHZhciBuPTAsbz1lLmxlbmd0aDtuPG87bisrKWhjKGVbbl0pP19jKGVbbl0pP3QrPUVjKGVbbl0pOnQrPUpTT04uc3RyaW5naWZ5KGVbbl0pOnQrPWVbbl0sdCs9XCIgXCJ9cmV0dXJuIHR9LGRlYnVnOmZ1bmN0aW9uKCl7aWYoemk8PS0xKXt2YXIgZT10aGlzLmFyZ3VtZW50czJTdHJpbmcoYXJndW1lbnRzKTtIaS5kZWJ1ZyhlKX19LGxvZzpmdW5jdGlvbigpe2lmKHppPD0wKXt2YXIgZT10aGlzLmFyZ3VtZW50czJTdHJpbmcoYXJndW1lbnRzKTtIaS5sb2coZSl9fSxpbmZvOmZ1bmN0aW9uKCl7aWYoemk8PTEpe3ZhciBlPXRoaXMuYXJndW1lbnRzMlN0cmluZyhhcmd1bWVudHMpO0hpLmluZm8oZSl9fSx3YXJuOmZ1bmN0aW9uKCl7aWYoemk8PTIpe3ZhciBlPXRoaXMuYXJndW1lbnRzMlN0cmluZyhhcmd1bWVudHMpO0hpLndhcm4oZSl9fSxlcnJvcjpmdW5jdGlvbigpe2lmKHppPD0zKXt2YXIgZT10aGlzLmFyZ3VtZW50czJTdHJpbmcoYXJndW1lbnRzKTtIaS5lcnJvcihlKX19LHRpbWU6ZnVuY3Rpb24oZSl7Smkuc2V0KGUseWMubm93KCkpfSx0aW1lRW5kOmZ1bmN0aW9uKGUpe2lmKEppLmhhcyhlKSl7dmFyIHQ9eWMubm93KCktSmkuZ2V0KGUpO3JldHVybiBKaS5kZWxldGUoZSksdH1yZXR1cm4gSGkud2FybihcIuacquaJvuWIsOWvueW6lGxhYmVsOiBcIi5jb25jYXQoZSxcIiwg6K+35Zyo6LCD55SoIGxvZ2dlci50aW1lRW5kIOWJje+8jOiwg+eUqCBsb2dnZXIudGltZVwiKSksMH0sc2V0TGV2ZWw6ZnVuY3Rpb24oZSl7ZTw0JiZIaS5sb2coWGkoKStcInNldCBsZXZlbCBmcm9tIFwiK3ppK1wiIHRvIFwiK2UpLHppPWV9LGdldExldmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHppfX0sWmk9e0pQRzoxLEpQRUc6MSxHSUY6MixQTkc6MyxCTVA6NCxVTktOT1dOOjI1NX0sZWM9e05JQ0s6XCJUYWdfUHJvZmlsZV9JTV9OaWNrXCIsR0VOREVSOlwiVGFnX1Byb2ZpbGVfSU1fR2VuZGVyXCIsQklSVEhEQVk6XCJUYWdfUHJvZmlsZV9JTV9CaXJ0aERheVwiLExPQ0FUSU9OOlwiVGFnX1Byb2ZpbGVfSU1fTG9jYXRpb25cIixTRUxGU0lHTkFUVVJFOlwiVGFnX1Byb2ZpbGVfSU1fU2VsZlNpZ25hdHVyZVwiLEFMTE9XVFlQRTpcIlRhZ19Qcm9maWxlX0lNX0FsbG93VHlwZVwiLExBTkdVQUdFOlwiVGFnX1Byb2ZpbGVfSU1fTGFuZ3VhZ2VcIixBVkFUQVI6XCJUYWdfUHJvZmlsZV9JTV9JbWFnZVwiLE1FU1NBR0VTRVRUSU5HUzpcIlRhZ19Qcm9maWxlX0lNX01zZ1NldHRpbmdzXCIsQURNSU5GT1JCSURUWVBFOlwiVGFnX1Byb2ZpbGVfSU1fQWRtaW5Gb3JiaWRUeXBlXCIsTEVWRUw6XCJUYWdfUHJvZmlsZV9JTV9MZXZlbFwiLFJPTEU6XCJUYWdfUHJvZmlsZV9JTV9Sb2xlXCJ9LHRjPXtVTktOT1dOOlwiR2VuZGVyX1R5cGVfVW5rbm93blwiLEZFTUFMRTpcIkdlbmRlcl9UeXBlX0ZlbWFsZVwiLE1BTEU6XCJHZW5kZXJfVHlwZV9NYWxlXCJ9LG5jPXtOT05FOlwiQWRtaW5Gb3JiaWRfVHlwZV9Ob25lXCIsU0VORF9PVVQ6XCJBZG1pbkZvcmJpZF9UeXBlX1NlbmRPdXRcIn0sb2M9e05FRURfQ09ORklSTTpcIkFsbG93VHlwZV9UeXBlX05lZWRDb25maXJtXCIsQUxMT1dfQU5ZOlwiQWxsb3dUeXBlX1R5cGVfQWxsb3dBbnlcIixERU5ZX0FOWTpcIkFsbG93VHlwZV9UeXBlX0RlbnlBbnlcIn0scmM9XCJKb2luZWRTdWNjZXNzXCIsYWM9XCJXYWl0QWRtaW5BcHByb3ZhbFwiLHNjPVwiQFRHUyNfXCIsaWM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmaWxlXCI9PT1tYyhlKX0sY2M9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lJiYoXCJudW1iZXJcIj09dHlwZW9mIGUmJiFpc05hTihlLTApfHxcIm9iamVjdFwiPT09TW4oZSkmJmUuY29uc3RydWN0b3I9PT1OdW1iZXIpfSx1Yz1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZX0sbGM9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lJiZcIm9iamVjdFwiPT09TW4oZSl9LGRjPWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPT1NbihlKXx8bnVsbD09PWUpcmV0dXJuITE7dmFyIHQ9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2lmKG51bGw9PT10KXJldHVybiEwO2Zvcih2YXIgbj10O251bGwhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobik7KW49T2JqZWN0LmdldFByb3RvdHlwZU9mKG4pO3JldHVybiB0PT09bn0scGM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgQXJyYXkuaXNBcnJheT9BcnJheS5pc0FycmF5KGUpOlwiYXJyYXlcIj09PW1jKGUpfSxnYz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZX0saGM9ZnVuY3Rpb24oZSl7cmV0dXJuIHBjKGUpfHxsYyhlKX0sZmM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZX0sX2M9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvcn0sbWM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5tYXRjaCgvXlxcW29iamVjdCAoLiopXFxdJC8pWzFdLnRvTG93ZXJDYXNlKCl9LHZjPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciB0PWVbMF07cmV0dXJuIS9bXmEtekEtWjAtOV0vLnRlc3QodCl9LE1jPTA7RGF0ZS5ub3d8fChEYXRlLm5vdz1mdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfSk7dmFyIHljPXtub3c6ZnVuY3Rpb24oKXswPT09TWMmJihNYz1EYXRlLm5vdygpLTEpO3ZhciBlPURhdGUubm93KCktTWM7cmV0dXJuIGU+NDI5NDk2NzI5NT8oTWMrPTQyOTQ5NjcyOTUsRGF0ZS5ub3coKS1NYyk6ZX0sdXRjOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucm91bmQoRGF0ZS5ub3coKS8xZTMpfX0sSWM9ZnVuY3Rpb24gZSh0LG4sbyxyKXtpZighaGModCl8fCFoYyhuKSlyZXR1cm4gMDtmb3IodmFyIGEscz0wLGk9T2JqZWN0LmtleXMobiksYz0wLHU9aS5sZW5ndGg7Yzx1O2MrKylpZihhPWlbY10sIShnYyhuW2FdKXx8byYmby5pbmNsdWRlcyhhKSkpaWYoaGModFthXSkmJmhjKG5bYV0pKXMrPWUodFthXSxuW2FdLG8scik7ZWxzZXtpZihyJiZyLmluY2x1ZGVzKG5bYV0pKWNvbnRpbnVlO3RbYV0hPT1uW2FdJiYodFthXT1uW2FdLHMrPTEpfXJldHVybiBzfSxFYz1mdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSxbXCJtZXNzYWdlXCIsXCJjb2RlXCJdKX0sVGM9ZnVuY3Rpb24oZSl7aWYoMD09PWUubGVuZ3RoKXJldHVybiAwO2Zvcih2YXIgdD0wLG49MCxvPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmdm9pZCAwIT09ZG9jdW1lbnQuY2hhcmFjdGVyU2V0P2RvY3VtZW50LmNoYXJhY3RlclNldDpcIlVURi04XCI7dm9pZCAwIT09ZVt0XTspbis9ZVt0KytdLmNoYXJDb2RlQXRbdF08PTI1NT8xOiExPT09bz8zOjI7cmV0dXJuIG59LFNjPWZ1bmN0aW9uKGUpe3ZhciB0PWV8fDk5OTk5OTk5O3JldHVybiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqdCl9LENjPVwiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIixBYz1DYy5sZW5ndGgsRGM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlpZihlW25dPT09dClyZXR1cm4hMDtyZXR1cm4hMX0sTmM9e30sa2M9ZnVuY3Rpb24oKXtpZihwaSlyZXR1cm5cImh0dHBzOlwiO2lmKGdpJiZcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93KXJldHVyblwiaHR0cHM6XCI7dmFyIGU9d2luZG93LmxvY2F0aW9uLnByb3RvY29sO3JldHVybltcImh0dHA6XCIsXCJodHRwczpcIl0uaW5kZXhPZihlKTwwJiYoZT1cImh0dHA6XCIpLGV9LE9jPWZ1bmN0aW9uKGUpe3JldHVybi0xPT09ZS5pbmRleE9mKFwiaHR0cDovL1wiKXx8LTE9PT1lLmluZGV4T2YoXCJodHRwczovL1wiKT9cImh0dHBzOi8vXCIrZTplLnJlcGxhY2UoL2h0dHBzfGh0dHAvLFwiaHR0cHNcIil9LFJjPWZ1bmN0aW9uIGUodCl7aWYoMD09PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpLmxlbmd0aClyZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgbj1BcnJheS5pc0FycmF5KHQpP1tdOk9iamVjdC5jcmVhdGUobnVsbCksbz1cIlwiO2Zvcih2YXIgciBpbiB0KW51bGwhPT10W3JdP3ZvaWQgMCE9PXRbcl0/KG89TW4odFtyXSksW1wic3RyaW5nXCIsXCJudW1iZXJcIixcImZ1bmN0aW9uXCIsXCJib29sZWFuXCJdLmluZGV4T2Yobyk+PTA/bltyXT10W3JdOm5bcl09ZSh0W3JdKSk6bltyXT12b2lkIDA6bltyXT1udWxsO3JldHVybiBufTtmdW5jdGlvbiBMYyhlLHQpe3BjKGUpJiZwYyh0KT90LmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBuPXQua2V5LG89dC52YWx1ZSxyPWUuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5PT09bn0pKTtyP3IudmFsdWU9bzplLnB1c2goe2tleTpuLHZhbHVlOm99KX0pKTpRaS53YXJuKFwidXBkYXRlQ3VzdG9tRmllbGQgdGFyZ2V0IOaIliBzb3VyY2Ug5LiN5piv5pWw57uE77yM5b+955Wl5q2k5qyh5pu05paw44CCXCIpfXZhciBiYz1mdW5jdGlvbihlKXtyZXR1cm4gZT09PVluLkdSUF9QVUJMSUN9LHdjPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09WW4uR1JQX0FWQ0hBVFJPT019LEdjPWZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZSxuPWUuZ3JvdXBJRDtyZXR1cm4gdD09PVluLkdSUF9DT01NVU5JVFl8fFwiXCIuY29uY2F0KG4pLnN0YXJ0c1dpdGgoc2MpfSxQYz1mdW5jdGlvbihlKXtyZXR1cm4gdWMoZSkmJmUuc2xpY2UoMCwzKT09PVluLkNPTlZfQzJDfSxVYz1mdW5jdGlvbihlKXtyZXR1cm4gdWMoZSkmJmUuc2xpY2UoMCw1KT09PVluLkNPTlZfR1JPVVB9LEZjPWZ1bmN0aW9uKGUpe3JldHVybiB1YyhlKSYmZT09PVluLkNPTlZfU1lTVEVNfTtmdW5jdGlvbiBxYyhlLHQpe3ZhciBuPXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihvKXtuW29dPXQoZVtvXSxvKX0pKSxufWZ1bmN0aW9uIHhjKGUpe3JldHVybiBwaT9uZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXtoaS5nZXRJbWFnZUluZm8oe3NyYzplLHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dCh7d2lkdGg6ZS53aWR0aCxoZWlnaHQ6ZS5oZWlnaHR9KX0sZmFpbDpmdW5jdGlvbigpe3Qoe3dpZHRoOjAsaGVpZ2h0OjB9KX19KX0pKTpEaSYmOT09PU5pP1Byb21pc2UucmVzb2x2ZSh7d2lkdGg6MCxoZWlnaHQ6MH0pOm5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3ZhciBvPW5ldyBJbWFnZTtvLm9ubG9hZD1mdW5jdGlvbigpe3Qoe3dpZHRoOnRoaXMud2lkdGgsaGVpZ2h0OnRoaXMuaGVpZ2h0fSksbz1udWxsfSxvLm9uZXJyb3I9ZnVuY3Rpb24oKXt0KHt3aWR0aDowLGhlaWdodDowfSksbz1udWxsfSxvLnNyYz1lfSkpfWZ1bmN0aW9uIFZjKCl7ZnVuY3Rpb24gZSgpe3JldHVybig2NTUzNiooMStNYXRoLnJhbmRvbSgpKXwwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpfXJldHVyblwiXCIuY29uY2F0KGUoKStlKCkpLmNvbmNhdChlKCkpLmNvbmNhdChlKCkpLmNvbmNhdChlKCkpLmNvbmNhdChlKCkpLmNvbmNhdChlKCkpLmNvbmNhdChlKCkpfWZ1bmN0aW9uIEtjKCl7dmFyIGU9XCJ1bmtub3duXCI7aWYoTGkmJihlPVwibWFjXCIpLFJpJiYoZT1cIndpbmRvd3NcIiksSWkmJihlPVwiaW9zXCIpLFRpJiYoZT1cImFuZHJvaWRcIikscGkpdHJ5e3ZhciB0PWhpLmdldFN5c3RlbUluZm9TeW5jKCkucGxhdGZvcm07dm9pZCAwIT09dCYmKGU9dCl9Y2F0Y2goc0kpe31yZXR1cm4gZX1mdW5jdGlvbiBCYyhlKXt2YXIgdD1lLm9yaWdpblVybCxuPXZvaWQgMD09PXQ/dm9pZCAwOnQsbz1lLm9yaWdpbldpZHRoLHI9ZS5vcmlnaW5IZWlnaHQsYT1lLm1pbixzPXZvaWQgMD09PWE/MTk4OmEsaT1wYXJzZUludChvKSxjPXBhcnNlSW50KHIpLHU9e3VybDp2b2lkIDAsd2lkdGg6MCxoZWlnaHQ6MH07aWYoKGk8PWM/aTpjKTw9cyl1LnVybD1uLHUud2lkdGg9aSx1LmhlaWdodD1jO2Vsc2V7Yzw9aT8odS53aWR0aD1NYXRoLmNlaWwoaSpzL2MpLHUuaGVpZ2h0PXMpOih1LndpZHRoPXMsdS5oZWlnaHQ9TWF0aC5jZWlsKGMqcy9pKSk7dmFyIGw9biYmbi5pbmRleE9mKFwiP1wiKT4tMT9cIlwiLmNvbmNhdChuLFwiJlwiKTpcIlwiLmNvbmNhdChuLFwiP1wiKTt1LnVybD1cIlwiLmNvbmNhdChsLDE5OD09PXM/XCJpbWFnZVZpZXcyLzMvdy8xOTgvaC8xOThcIjpcImltYWdlVmlldzIvMy93LzcyMC9oLzcyMFwiKX1yZXR1cm4gZ2Mobik/TG4odSxbXCJ1cmxcIl0pOnV9ZnVuY3Rpb24gSGMoZSl7dmFyIHQ9ZVsyXTtlWzJdPWVbMV0sZVsxXT10O2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWVbbl0uc2V0VHlwZShuKX1mdW5jdGlvbiBqYyhlKXt2YXIgdD1lLnNlcnZjbWQ7cmV0dXJuIHQuc2xpY2UodC5pbmRleE9mKFwiLlwiKSsxKX1mdW5jdGlvbiBXYyhlLHQpe3JldHVybiBNYXRoLnJvdW5kKE51bWJlcihlKSpNYXRoLnBvdygxMCx0KSkvTWF0aC5wb3coMTAsdCl9ZnVuY3Rpb24gWWMoZSx0KXtyZXR1cm4gZS5pbmNsdWRlcyh0KX1mdW5jdGlvbiAkYyhlLHQpe3JldHVybiBlLmluY2x1ZGVzKHQpfXZhciB6Yz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIEpjKGUpe2lmKG51bGw9PWUpcmV0dXJuITA7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBlKXJldHVybiExO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXJldHVybiAwPT09ZTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gMD09PWUubGVuZ3RoO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpcmV0dXJuIDA9PT1lLmxlbmd0aDtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiAwPT09ZS5sZW5ndGg7aWYoZSBpbnN0YW5jZW9mIEVycm9yKXJldHVyblwiXCI9PT1lLm1lc3NhZ2U7aWYoZGMoZSkpe2Zvcih2YXIgdCBpbiBlKWlmKHpjLmNhbGwoZSx0KSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hKFwibWFwXCIhPT1tYyhlKSYmIWZ1bmN0aW9uKGUpe3JldHVyblwic2V0XCI9PT1tYyhlKX0oZSkmJiFpYyhlKSkmJjA9PT1lLnNpemV9ZnVuY3Rpb24gWGMoZSx0LG4pe2lmKHZvaWQgMD09PXQpcmV0dXJuITA7dmFyIG89ITA7aWYoXCJvYmplY3RcIj09PXZvKHQpLnRvTG93ZXJDYXNlKCkpT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZnVuY3Rpb24ocil7dmFyIGE9MT09PWUubGVuZ3RoP2VbMF1bcl06dm9pZCAwO289ISFRYyhhLHRbcl0sbixyKSYmb30pKTtlbHNlIGlmKFwiYXJyYXlcIj09PXZvKHQpLnRvTG93ZXJDYXNlKCkpZm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspbz0hIVFjKGVbcl0sdFtyXSxuLHRbcl0ubmFtZSkmJm87aWYobylyZXR1cm4gbzt0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbXMgdmFsaWRhdGUgZmFpbGVkLlwiKX1mdW5jdGlvbiBRYyhlLHQsbixvKXtpZih2b2lkIDA9PT10KXJldHVybiEwO3ZhciByPSEwO3JldHVybiB0LnJlcXVpcmVkJiZKYyhlKSYmKEhpLmVycm9yKFwiVElNIFtcIi5jb25jYXQobiwnXSBNaXNzaW5nIHJlcXVpcmVkIHBhcmFtczogXCInKS5jb25jYXQobywnXCIuJykpLHI9ITEpLEpjKGUpfHx2byhlKS50b0xvd2VyQ2FzZSgpPT09dC50eXBlLnRvTG93ZXJDYXNlKCl8fChIaS5lcnJvcihcIlRJTSBbXCIuY29uY2F0KG4sJ10gSW52YWxpZCBwYXJhbXM6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBcIicpLmNvbmNhdChvLCdcIi5FeHBlY3RlZCAnKS5jb25jYXQodC50eXBlLFwiLlwiKSkscj0hMSksdC52YWxpZGF0b3ImJiF0LnZhbGlkYXRvcihlKSYmKEhpLmVycm9yKFwiVElNIFtcIi5jb25jYXQobixcIl0gSW52YWxpZCBwYXJhbXM6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwYXJhbXMuXCIpKSxyPSExKSxyfXZhciBaYz17ZjpxZX0sZXU9Ti5mLHR1PUhlLmZvckVhY2gsbnU9SChcImhpZGRlblwiKSxvdT1xZShcInRvUHJpbWl0aXZlXCIpLHJ1PVEuc2V0LGF1PVEuZ2V0dGVyRm9yKFwiU3ltYm9sXCIpLHN1PU9iamVjdC5wcm90b3R5cGUsaXU9by5TeW1ib2wsY3U9bmUoXCJKU09OXCIsXCJzdHJpbmdpZnlcIiksdXU9Qy5mLGx1PU4uZixkdT1tci5mLHB1PWMuZixndT1xKFwic3ltYm9sc1wiKSxodT1xKFwib3Atc3ltYm9sc1wiKSxmdT1xKFwic3RyaW5nLXRvLXN5bWJvbC1yZWdpc3RyeVwiKSxfdT1xKFwic3ltYm9sLXRvLXN0cmluZy1yZWdpc3RyeVwiKSxtdT1xKFwid2tzXCIpLHZ1PW8uUU9iamVjdCxNdT0hdnV8fCF2dS5wcm90b3R5cGV8fCF2dS5wcm90b3R5cGUuZmluZENoaWxkLHl1PWEmJnIoKGZ1bmN0aW9uKCl7cmV0dXJuIDchPWt0KGx1KHt9LFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbHUodGhpcyxcImFcIix7dmFsdWU6N30pLmF9fSkpLmF9KSk/ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPXV1KHN1LHQpO28mJmRlbGV0ZSBzdVt0XSxsdShlLHQsbiksbyYmZSE9PXN1JiZsdShzdSx0LG8pfTpsdSxJdT1mdW5jdGlvbihlLHQpe3ZhciBuPWd1W2VdPWt0KGl1LnByb3RvdHlwZSk7cmV0dXJuIHJ1KG4se3R5cGU6XCJTeW1ib2xcIix0YWc6ZSxkZXNjcmlwdGlvbjp0fSksYXx8KG4uZGVzY3JpcHRpb249dCksbn0sRXU9R2U/ZnVuY3Rpb24oZSl7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QoZSlpbnN0YW5jZW9mIGl1fSxUdT1mdW5jdGlvbihlLHQsbil7ZT09PXN1JiZUdShodSx0LG4pLEEoZSk7dmFyIG89bSh0LCEwKTtyZXR1cm4gQShuKSxNKGd1LG8pPyhuLmVudW1lcmFibGU/KE0oZSxudSkmJmVbbnVdW29dJiYoZVtudV1bb109ITEpLG49a3Qobix7ZW51bWVyYWJsZTp1KDAsITEpfSkpOihNKGUsbnUpfHxsdShlLG51LHUoMSx7fSkpLGVbbnVdW29dPSEwKSx5dShlLG8sbikpOmx1KGUsbyxuKX0sU3U9ZnVuY3Rpb24oZSx0KXtBKGUpO3ZhciBuPWYodCksbz1FdChuKS5jb25jYXQoTnUobikpO3JldHVybiB0dShvLChmdW5jdGlvbih0KXthJiYhQ3UuY2FsbChuLHQpfHxUdShlLHQsblt0XSl9KSksZX0sQ3U9ZnVuY3Rpb24oZSl7dmFyIHQ9bShlLCEwKSxuPXB1LmNhbGwodGhpcyx0KTtyZXR1cm4hKHRoaXM9PT1zdSYmTShndSx0KSYmIU0oaHUsdCkpJiYoIShufHwhTSh0aGlzLHQpfHwhTShndSx0KXx8TSh0aGlzLG51KSYmdGhpc1tudV1bdF0pfHxuKX0sQXU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1mKGUpLG89bSh0LCEwKTtpZihuIT09c3V8fCFNKGd1LG8pfHxNKGh1LG8pKXt2YXIgcj11dShuLG8pO3JldHVybiFyfHwhTShndSxvKXx8TShuLG51KSYmbltudV1bb118fChyLmVudW1lcmFibGU9ITApLHJ9fSxEdT1mdW5jdGlvbihlKXt2YXIgdD1kdShmKGUpKSxuPVtdO3JldHVybiB0dSh0LChmdW5jdGlvbihlKXtNKGd1LGUpfHxNKGosZSl8fG4ucHVzaChlKX0pKSxufSxOdT1mdW5jdGlvbihlKXt2YXIgdD1lPT09c3Usbj1kdSh0P2h1OmYoZSkpLG89W107cmV0dXJuIHR1KG4sKGZ1bmN0aW9uKGUpeyFNKGd1LGUpfHx0JiYhTShzdSxlKXx8by5wdXNoKGd1W2VdKX0pKSxvfTtpZih3ZXx8KFooKGl1PWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIGl1KXRocm93IFR5cGVFcnJvcihcIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvclwiKTt2YXIgZT1hcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/U3RyaW5nKGFyZ3VtZW50c1swXSk6dm9pZCAwLHQ9SyhlKSxuPWZ1bmN0aW9uKGUpe3RoaXM9PT1zdSYmbi5jYWxsKGh1LGUpLE0odGhpcyxudSkmJk0odGhpc1tudV0sdCkmJih0aGlzW251XVt0XT0hMSkseXUodGhpcyx0LHUoMSxlKSl9O3JldHVybiBhJiZNdSYmeXUoc3UsdCx7Y29uZmlndXJhYmxlOiEwLHNldDpufSksSXUodCxlKX0pLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGF1KHRoaXMpLnRhZ30pKSxaKGl1LFwid2l0aG91dFNldHRlclwiLChmdW5jdGlvbihlKXtyZXR1cm4gSXUoSyhlKSxlKX0pKSxjLmY9Q3UsTi5mPVR1LEMuZj1BdSxtZS5mPW1yLmY9RHUsdmUuZj1OdSxaYy5mPWZ1bmN0aW9uKGUpe3JldHVybiBJdShxZShlKSxlKX0sYSYmKGx1KGl1LnByb3RvdHlwZSxcImRlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYXUodGhpcykuZGVzY3JpcHRpb259fSksWihzdSxcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsQ3Use3Vuc2FmZTohMH0pKSksa2Uoe2dsb2JhbDohMCx3cmFwOiEwLGZvcmNlZDohd2Usc2hhbTohd2V9LHtTeW1ib2w6aXV9KSx0dShFdChtdSksKGZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgdD1lZS5TeW1ib2x8fChlZS5TeW1ib2w9e30pO00odCxlKXx8ZXUodCxlLHt2YWx1ZTpaYy5mKGUpfSl9KGUpfSkpLGtlKHt0YXJnZXQ6XCJTeW1ib2xcIixzdGF0OiEwLGZvcmNlZDohd2V9LHtmb3I6ZnVuY3Rpb24oZSl7dmFyIHQ9U3RyaW5nKGUpO2lmKE0oZnUsdCkpcmV0dXJuIGZ1W3RdO3ZhciBuPWl1KHQpO3JldHVybiBmdVt0XT1uLF91W25dPXQsbn0sa2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKCFFdShlKSl0aHJvdyBUeXBlRXJyb3IoZStcIiBpcyBub3QgYSBzeW1ib2xcIik7aWYoTShfdSxlKSlyZXR1cm4gX3VbZV19LHVzZVNldHRlcjpmdW5jdGlvbigpe011PSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtNdT0hMX19KSxrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6IXdlLHNoYW06IWF9LHtjcmVhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9rdChlKTpTdShrdChlKSx0KX0sZGVmaW5lUHJvcGVydHk6VHUsZGVmaW5lUHJvcGVydGllczpTdSxnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6QXV9KSxrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6IXdlfSx7Z2V0T3duUHJvcGVydHlOYW1lczpEdSxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6TnV9KSxrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6cigoZnVuY3Rpb24oKXt2ZS5mKDEpfSkpfSx7Z2V0T3duUHJvcGVydHlTeW1ib2xzOmZ1bmN0aW9uKGUpe3JldHVybiB2ZS5mKExlKGUpKX19KSxjdSl7dmFyIGt1PSF3ZXx8cigoZnVuY3Rpb24oKXt2YXIgZT1pdSgpO3JldHVyblwiW251bGxdXCIhPWN1KFtlXSl8fFwie31cIiE9Y3Uoe2E6ZX0pfHxcInt9XCIhPWN1KE9iamVjdChlKSl9KSk7a2Uoe3RhcmdldDpcIkpTT05cIixzdGF0OiEwLGZvcmNlZDprdX0se3N0cmluZ2lmeTpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBvLHI9W2VdLGE9MTthcmd1bWVudHMubGVuZ3RoPmE7KXIucHVzaChhcmd1bWVudHNbYSsrXSk7aWYobz10LChfKHQpfHx2b2lkIDAhPT1lKSYmIUV1KGUpKXJldHVybiBiZSh0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBvJiYodD1vLmNhbGwodGhpcyxlLHQpKSwhRXUodCkpcmV0dXJuIHR9KSxyWzFdPXQsY3UuYXBwbHkobnVsbCxyKX19KX1pdS5wcm90b3R5cGVbb3VdfHxrKGl1LnByb3RvdHlwZSxvdSxpdS5wcm90b3R5cGUudmFsdWVPZiksdG4oaXUsXCJTeW1ib2xcIiksaltudV09ITA7dmFyIE91PU4uZixSdT1vLlN5bWJvbDtpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSdSYmKCEoXCJkZXNjcmlwdGlvblwiaW4gUnUucHJvdG90eXBlKXx8dm9pZCAwIT09UnUoKS5kZXNjcmlwdGlvbikpe3ZhciBMdT17fSxidT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg8MXx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3ZvaWQgMDpTdHJpbmcoYXJndW1lbnRzWzBdKSx0PXRoaXMgaW5zdGFuY2VvZiBidT9uZXcgUnUoZSk6dm9pZCAwPT09ZT9SdSgpOlJ1KGUpO3JldHVyblwiXCI9PT1lJiYoTHVbdF09ITApLHR9O3llKGJ1LFJ1KTt2YXIgd3U9YnUucHJvdG90eXBlPVJ1LnByb3RvdHlwZTt3dS5jb25zdHJ1Y3Rvcj1idTt2YXIgR3U9d3UudG9TdHJpbmcsUHU9XCJTeW1ib2wodGVzdClcIj09U3RyaW5nKFJ1KFwidGVzdFwiKSksVXU9L15TeW1ib2xcXCgoLiopXFwpW14pXSskLztPdSh3dSxcImRlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT1fKHRoaXMpP3RoaXMudmFsdWVPZigpOnRoaXMsdD1HdS5jYWxsKGUpO2lmKE0oTHUsZSkpcmV0dXJuXCJcIjt2YXIgbj1QdT90LnNsaWNlKDcsLTEpOnQucmVwbGFjZShVdSxcIiQxXCIpO3JldHVyblwiXCI9PT1uP3ZvaWQgMDpufX0pLGtlKHtnbG9iYWw6ITAsZm9yY2VkOiEwfSx7U3ltYm9sOmJ1fSl9dmFyIEZ1PXtVTlNFTkQ6XCJ1blNlbmRcIixTVUNDRVNTOlwic3VjY2Vzc1wiLEZBSUw6XCJmYWlsXCJ9LHF1PXtOT1RfU1RBUlQ6XCJub3RTdGFydFwiLFBFTkRJTkc6XCJwZW5nZGluZ1wiLFJFU09MVkVEOlwicmVzb2x2ZWRcIixSRUpFQ1RFRDpcInJlamVjdGVkXCJ9LHh1PWZ1bmN0aW9uKGUpe3JldHVybiEhZSYmKCEhKFBjKGUpfHxVYyhlKXx8RmMoZSkpfHwoY29uc29sZS53YXJuKFwi6Z2e5rOV55qE5Lya6K+dIElEOlwiLmNvbmNhdChlLFwi44CC5Lya6K+dIElEIOe7hOaIkOaWueW8j++8mkMyQyArIHVzZXJJRO+8iOWNleiBiu+8iUdST1VQICsgZ3JvdXBJRO+8iOe+pOiBiu+8iUBUSU0jU1lTVEVN77yI57O757uf6YCa55+l5Lya6K+d77yJXCIpKSwhMSkpfSxWdT1cIuivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjXCIsS3U9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyYW0/XCJcIi5jb25jYXQoZS5hcGksXCIgXCIpLmNvbmNhdChlLnBhcmFtLFwiIFwiKS5jb25jYXQoZS5kZXNjLFwi44CCXCIpLmNvbmNhdChWdSkuY29uY2F0KGUuYXBpKTpcIlwiLmNvbmNhdChlLmFwaSxcIiBcIikuY29uY2F0KGUuZGVzYyxcIuOAglwiKS5jb25jYXQoVnUpLmNvbmNhdChlLmFwaSl9LEJ1PXt0eXBlOlwiU3RyaW5nXCIscmVxdWlyZWQ6ITB9LEh1PXt0eXBlOlwiQXJyYXlcIixyZXF1aXJlZDohMH0sanU9e3R5cGU6XCJPYmplY3RcIixyZXF1aXJlZDohMH0sV3U9e2xvZ2luOnt1c2VySUQ6QnUsdXNlclNpZzpCdX0sYWRkVG9CbGFja2xpc3Q6e3VzZXJJRExpc3Q6SHV9LG9uOlt7bmFtZTpcImV2ZW50TmFtZVwiLHR5cGU6XCJTdHJpbmdcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJjAhPT1lLmxlbmd0aHx8KGNvbnNvbGUud2FybihLdSh7YXBpOlwib25cIixwYXJhbTpcImV2ZW50TmFtZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5n77yM5LiU5LiN6IO95Li656m6XCJ9KSksITEpfX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KGNvbnNvbGUud2FybihLdSh7YXBpOlwib25cIixwYXJhbTpcImhhbmRsZXJcIixkZXNjOlwi5Y+C5pWw5b+F6aG75Li6IEZ1bmN0aW9uXCJ9KSksITEpOihcIlwiPT09ZS5uYW1lJiZjb25zb2xlLndhcm4oXCJvbiDmjqXlj6PnmoQgaGFuZGxlciDlj4LmlbDmjqjojZDkvb/nlKjlhbflkI3lh73mlbDjgILlhbflkI3lh73mlbDlj6/ku6Xkvb/nlKggb2ZmIOaOpeWPo+WPlua2iOiuoumYhe+8jOWMv+WQjeWHveaVsOaXoOazleWPlua2iOiuoumYheOAglwiKSwhMCl9fV0sb25jZTpbe25hbWU6XCJldmVudE5hbWVcIix0eXBlOlwiU3RyaW5nXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiYwIT09ZS5sZW5ndGh8fChjb25zb2xlLndhcm4oS3Uoe2FwaTpcIm9uY2VcIixwYXJhbTpcImV2ZW50TmFtZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5n77yM5LiU5LiN6IO95Li656m6XCJ9KSksITEpfX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KGNvbnNvbGUud2FybihLdSh7YXBpOlwib25jZVwiLHBhcmFtOlwiaGFuZGxlclwiLGRlc2M6XCLlj4LmlbDlv4XpobvkuLogRnVuY3Rpb25cIn0pKSwhMSk6KFwiXCI9PT1lLm5hbWUmJmNvbnNvbGUud2FybihcIm9uY2Ug5o6l5Y+j55qEIGhhbmRsZXIg5Y+C5pWw5o6o6I2Q5L2/55So5YW35ZCN5Ye95pWw44CCXCIpLCEwKX19XSxvZmY6W3tuYW1lOlwiZXZlbnROYW1lXCIsdHlwZTpcIlN0cmluZ1wiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmMCE9PWUubGVuZ3RofHwoY29uc29sZS53YXJuKEt1KHthcGk6XCJvZmZcIixwYXJhbTpcImV2ZW50TmFtZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5n77yM5LiU5LiN6IO95Li656m6XCJ9KSksITEpfX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KGNvbnNvbGUud2FybihLdSh7YXBpOlwib2ZmXCIscGFyYW06XCJoYW5kbGVyXCIsZGVzYzpcIuWPguaVsOW/hemhu+S4uiBGdW5jdGlvblwifSkpLCExKTooXCJcIj09PWUubmFtZSYmY29uc29sZS53YXJuKFwib2ZmIOaOpeWPo+aXoOazleS4uuWMv+WQjeWHveaVsOWPlua2iOebkeWQrOS6i+S7tuOAglwiKSwhMCl9fV0sc2VuZE1lc3NhZ2U6W0NuKHtuYW1lOlwibWVzc2FnZVwifSxqdSldLGdldE1lc3NhZ2VMaXN0Ontjb252ZXJzYXRpb25JRDpDbih7fSxCdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiB4dShlKX19KSxuZXh0UmVxTWVzc2FnZUlEOnt0eXBlOlwiU3RyaW5nXCJ9LGNvdW50Ont0eXBlOlwiTnVtYmVyXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiEoIWdjKGUpJiYhL15bMS05XVswLTldKiQvLnRlc3QoZSkpfHwoY29uc29sZS53YXJuKEt1KHthcGk6XCJnZXRNZXNzYWdlTGlzdFwiLHBhcmFtOlwiY291bnRcIixkZXNjOlwi5b+F6aG75Li65q2j5pW05pWwXCJ9KSksITEpfX19LHNldE1lc3NhZ2VSZWFkOntjb252ZXJzYXRpb25JRDpDbih7fSxCdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiB4dShlKX19KX0sc2V0QWxsTWVzc2FnZVJlYWQ6e3Njb3BlOnt0eXBlOlwiU3RyaW5nXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiFlfHwtMSE9PVtZbi5SRUFEX0FMTF9DMkNfTVNHLFluLlJFQURfQUxMX0dST1VQX01TRyxZbi5SRUFEX0FMTF9NU0ddLmluZGV4T2YoZSl8fChjb25zb2xlLndhcm4oS3Uoe2FwaTpcInNldEFsbE1lc3NhZ2VSZWFkXCIscGFyYW06XCJzY29wZVwiLGRlc2M6XCLlj5blgLzlv4XpobvkuLogVElNLlRZUEVTLlJFQURfQUxMX0MyQ19NU0csIFRJTS5UWVBFUy5SRUFEX0FMTF9HUk9VUF9NU0cg5oiWIFRJTS5UWVBFUy5SRUFEX0FMTF9NU0dcIn0pKSwhMSl9fX0sZ2V0Q29udmVyc2F0aW9uUHJvZmlsZTpbQ24oe25hbWU6XCJjb252ZXJzYXRpb25JRFwifSxCdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiB4dShlKX19KV0sZGVsZXRlQ29udmVyc2F0aW9uOltDbih7bmFtZTpcImNvbnZlcnNhdGlvbklEXCJ9LEJ1LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIHh1KGUpfX0pXSxwaW5Db252ZXJzYXRpb246e2NvbnZlcnNhdGlvbklEOkNuKHt9LEJ1LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIHh1KGUpfX0pLGlzUGlubmVkOkNuKHt9LHt0eXBlOlwiQm9vbGVhblwiLHJlcXVpcmVkOiEwfSl9LGdldENvbnZlcnNhdGlvbkxpc3Q6W3tuYW1lOlwib3B0aW9uc1wiLHR5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hIWdjKGUpfHwoMCE9PWUubGVuZ3RofHwoY29uc29sZS53YXJuKEt1KHthcGk6XCJnZXRDb252ZXJzYXRpb25MaXN0XCIsZGVzYzpcIuiOt+WPluaMh+WumuS8muivneaXtuS4jeiDveS8oOWFpeepuuaVsOe7hFwifSkpLCExKSl9fV0sZ2V0R3JvdXBMaXN0Ontncm91cFByb2ZpbGVGaWx0ZXI6e3R5cGU6XCJBcnJheVwifX0sZ2V0R3JvdXBQcm9maWxlOntncm91cElEOkJ1LGdyb3VwQ3VzdG9tRmllbGRGaWx0ZXI6e3R5cGU6XCJBcnJheVwifSxtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjp7dHlwZTpcIkFycmF5XCJ9fSxnZXRHcm91cFByb2ZpbGVBZHZhbmNlOntncm91cElETGlzdDpIdX0sY3JlYXRlR3JvdXA6e25hbWU6QnV9LGpvaW5Hcm91cDp7Z3JvdXBJRDpCdSx0eXBlOnt0eXBlOlwiU3RyaW5nXCJ9LGFwcGx5TWVzc2FnZTp7dHlwZTpcIlN0cmluZ1wifX0scXVpdEdyb3VwOltDbih7bmFtZTpcImdyb3VwSURcIn0sQnUpXSxoYW5kbGVBcHBsaWNhdGlvbjp7bWVzc2FnZTpqdSxoYW5kbGVBY3Rpb246QnUsaGFuZGxlTWVzc2FnZTp7dHlwZTpcIlN0cmluZ1wifX0sY2hhbmdlR3JvdXBPd25lcjp7Z3JvdXBJRDpCdSxuZXdPd25lcklEOkJ1fSx1cGRhdGVHcm91cFByb2ZpbGU6e2dyb3VwSUQ6QnUsbXV0ZUFsbE1lbWJlcnM6e3R5cGU6XCJCb29sZWFuXCJ9fSxkaXNtaXNzR3JvdXA6W0NuKHtuYW1lOlwiZ3JvdXBJRFwifSxCdSldLHNlYXJjaEdyb3VwQnlJRDpbQ24oe25hbWU6XCJncm91cElEXCJ9LEJ1KV0saW5pdEdyb3VwQXR0cmlidXRlczp7Z3JvdXBJRDpCdSxncm91cEF0dHJpYnV0ZXM6Q24oe30sanUse3ZhbGlkYXRvcjpmdW5jdGlvbihlKXt2YXIgdD0hMDtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7aWYoIXVjKGVbbl0pKXJldHVybiBjb25zb2xlLndhcm4oS3Uoe2FwaTpcImluaXRHcm91cEF0dHJpYnV0ZXNcIixkZXNjOlwi576k5bGe5oCnIHZhbHVlIOW/hemhu+aYr+Wtl+espuS4slwifSkpLHQ9ITF9KSksdH19KX0sc2V0R3JvdXBBdHRyaWJ1dGVzOntncm91cElEOkJ1LGdyb3VwQXR0cmlidXRlczpDbih7fSxqdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3ZhciB0PSEwO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXtpZighdWMoZVtuXSkpcmV0dXJuIGNvbnNvbGUud2FybihLdSh7YXBpOlwic2V0R3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpcIue+pOWxnuaApyB2YWx1ZSDlv4XpobvmmK/lrZfnrKbkuLJcIn0pKSx0PSExfSkpLHR9fSl9LGRlbGV0ZUdyb3VwQXR0cmlidXRlczp7Z3JvdXBJRDpCdSxrZXlMaXN0Ont0eXBlOlwiQXJyYXlcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7aWYoZ2MoZSkpcmV0dXJuIGNvbnNvbGUud2FybihLdSh7YXBpOlwiZGVsZXRlR3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpcIue8uuWwkeW/heWhq+WPguaVsO+8mmtleUxpc3RcIn0pKSwhMTtpZighcGMoZSkpcmV0dXJuITE7aWYoIUpjKGUpKXt2YXIgdD0hMDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZighdWMoZSkpcmV0dXJuIGNvbnNvbGUud2FybihLdSh7YXBpOlwiZGVsZXRlR3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpcIue+pOWxnuaApyBrZXkg5b+F6aG75piv5a2X56ym5LiyXCJ9KSksdD0hMX0pKSx0fXJldHVybiEwfX19LGdldEdyb3VwQXR0cmlidXRlczp7Z3JvdXBJRDpCdSxrZXlMaXN0Ont0eXBlOlwiQXJyYXlcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7aWYoZ2MoZSkpcmV0dXJuIGNvbnNvbGUud2FybihLdSh7YXBpOlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpcIue8uuWwkeW/heWhq+WPguaVsO+8mmtleUxpc3RcIn0pKSwhMTtpZighcGMoZSkpcmV0dXJuITE7aWYoIUpjKGUpKXt2YXIgdD0hMDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZighdWMoZSkpcmV0dXJuIGNvbnNvbGUud2FybihLdSh7YXBpOlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpcIue+pOWxnuaApyBrZXkg5b+F6aG75piv5a2X56ym5LiyXCJ9KSksdD0hMX0pKSx0fXJldHVybiEwfX19LGdldEdyb3VwTWVtYmVyTGlzdDp7Z3JvdXBJRDpCdSxjb3VudDp7dHlwZTpcIk51bWJlclwifX0sZ2V0R3JvdXBNZW1iZXJQcm9maWxlOntncm91cElEOkJ1LHVzZXJJRExpc3Q6SHUsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6e3R5cGU6XCJBcnJheVwifX0sYWRkR3JvdXBNZW1iZXI6e2dyb3VwSUQ6QnUsdXNlcklETGlzdDpIdX0sc2V0R3JvdXBNZW1iZXJSb2xlOntncm91cElEOkJ1LHVzZXJJRDpCdSxyb2xlOkJ1fSxzZXRHcm91cE1lbWJlck11dGVUaW1lOntncm91cElEOkJ1LHVzZXJJRDpCdSxtdXRlVGltZTp7dHlwZTpcIk51bWJlclwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gZT49MH19fSxzZXRHcm91cE1lbWJlck5hbWVDYXJkOntncm91cElEOkJ1LHVzZXJJRDp7dHlwZTpcIlN0cmluZ1wifSxuYW1lQ2FyZDp7dHlwZTpcIlN0cmluZ1wiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gdWMoZSk/KGUubGVuZ3RoLCEwKTooY29uc29sZS53YXJuKEt1KHthcGk6XCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIscGFyYW06XCJuYW1lQ2FyZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpfX19LHNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGQ6e2dyb3VwSUQ6QnUsdXNlcklEOnt0eXBlOlwiU3RyaW5nXCJ9LG1lbWJlckN1c3RvbUZpZWxkOkh1fSxkZWxldGVHcm91cE1lbWJlcjp7Z3JvdXBJRDpCdX0sY3JlYXRlVGV4dE1lc3NhZ2U6e3RvOkJ1LGNvbnZlcnNhdGlvblR5cGU6QnUscGF5bG9hZDpDbih7fSxqdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBkYyhlKT91YyhlLnRleHQpPzAhPT1lLnRleHQubGVuZ3RofHwoY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVUZXh0TWVzc2FnZVwiLGRlc2M6XCLmtojmga/lhoXlrrnkuI3og73kuLrnqbpcIn0pKSwhMSk6KGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlVGV4dE1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQudGV4dFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOihjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZVRleHRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMSl9fSl9LGNyZWF0ZVRleHRBdE1lc3NhZ2U6e3RvOkJ1LGNvbnZlcnNhdGlvblR5cGU6QnUscGF5bG9hZDpDbih7fSxqdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBkYyhlKT91YyhlLnRleHQpPzA9PT1lLnRleHQubGVuZ3RoPyhjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZVRleHRBdE1lc3NhZ2VcIixkZXNjOlwi5raI5oGv5YaF5a655LiN6IO95Li656m6XCJ9KSksITEpOiEoZS5hdFVzZXJMaXN0JiYhcGMoZS5hdFVzZXJMaXN0KSl8fChjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZVRleHRBdE1lc3NhZ2VcIixkZXNjOlwicGF5bG9hZC5hdFVzZXJMaXN0IOexu+Wei+W/hemhu+S4uuaVsOe7hFwifSkpLCExKTooY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLnRleHRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ1wifSkpLCExKTooY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMSl9fSl9LGNyZWF0ZUN1c3RvbU1lc3NhZ2U6e3RvOkJ1LGNvbnZlcnNhdGlvblR5cGU6QnUscGF5bG9hZDpDbih7fSxqdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBkYyhlKT9lLmRhdGEmJiF1YyhlLmRhdGEpPyhjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZGF0YVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOmUuZGVzY3JpcHRpb24mJiF1YyhlLmRlc2NyaXB0aW9uKT8oY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVDdXN0b21NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmRlc2NyaXB0aW9uXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSwhMSk6IShlLmV4dGVuc2lvbiYmIXVjKGUuZXh0ZW5zaW9uKSl8fChjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZXh0ZW5zaW9uXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSwhMSk6KGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlQ3VzdG9tTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITEpfX0pfSxjcmVhdGVJbWFnZU1lc3NhZ2U6e3RvOkJ1LGNvbnZlcnNhdGlvblR5cGU6QnUscGF5bG9hZDpDbih7fSxqdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe2lmKCFkYyhlKSlyZXR1cm4gY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExO2lmKGdjKGUuZmlsZSkpcmV0dXJuIGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5LiN6IO95Li6IHVuZGVmaW5lZFwifSkpLCExO2lmKGdpKXtpZighKGUuZmlsZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fGljKGUuZmlsZSkpKXJldHVybiBkYyhlLmZpbGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pPzAhPT1lLmZpbGUudGVtcEZpbGVQYXRocy5sZW5ndGgmJjAhPT1lLmZpbGUudGVtcEZpbGVzLmxlbmd0aHx8KGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5oKo5rKh5pyJ6YCJ5oup5paH5Lu277yM5peg5rOV5Y+R6YCBXCJ9KSksITEpOihjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuexu+Wei+W/hemhu+aYryBIVE1MSW5wdXRFbGVtZW50IOaIliBGaWxlXCJ9KSksITEpO2lmKGUuZmlsZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJjA9PT1lLmZpbGUuZmlsZXMubGVuZ3RoKXJldHVybiBjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuaCqOayoeaciemAieaLqeaWh+S7tu+8jOaXoOazleWPkemAgVwifSkpLCExfXJldHVybiEwfSxvblByb2dyZXNzOnt0eXBlOlwiRnVuY3Rpb25cIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGdjKGUpJiZjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLGRlc2M6XCLmsqHmnIkgb25Qcm9ncmVzcyDlm57osIPvvIzmgqjlsIbml6Dms5Xojrflj5bkuIrkvKDov5vluqZcIn0pKSwhMH19fSl9LGNyZWF0ZUF1ZGlvTWVzc2FnZTp7dG86QnUsY29udmVyc2F0aW9uVHlwZTpCdSxwYXlsb2FkOkNuKHt9LGp1LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuISFkYyhlKXx8KGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlQXVkaW9NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMSl9fSksb25Qcm9ncmVzczp7dHlwZTpcIkZ1bmN0aW9uXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBnYyhlKSYmY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVBdWRpb01lc3NhZ2VcIixkZXNjOlwi5rKh5pyJIG9uUHJvZ3Jlc3Mg5Zue6LCD77yM5oKo5bCG5peg5rOV6I635Y+W5LiK5Lyg6L+b5bqmXCJ9KSksITB9fX0sY3JlYXRlVmlkZW9NZXNzYWdlOnt0bzpCdSxjb252ZXJzYXRpb25UeXBlOkJ1LHBheWxvYWQ6Q24oe30sanUse3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtpZighZGMoZSkpcmV0dXJuIGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMTtpZihnYyhlLmZpbGUpKXJldHVybiBjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuS4jeiDveS4uiB1bmRlZmluZWRcIn0pKSwhMTtpZihnaSl7aWYoIShlLmZpbGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50fHxpYyhlLmZpbGUpKSlyZXR1cm4gZGMoZS5maWxlKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaT8hIWljKGUuZmlsZS50ZW1wRmlsZSl8fChjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuaCqOayoeaciemAieaLqeaWh+S7tu+8jOaXoOazleWPkemAgVwifSkpLCExKTooY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLnsbvlnovlv4XpobvmmK8gSFRNTElucHV0RWxlbWVudCDmiJYgRmlsZVwifSkpLCExKTtpZihlLmZpbGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiYwPT09ZS5maWxlLmZpbGVzLmxlbmd0aClyZXR1cm4gY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLmgqjmsqHmnInpgInmi6nmlofku7bvvIzml6Dms5Xlj5HpgIFcIn0pKSwhMX1yZXR1cm4hMH19KSxvblByb2dyZXNzOnt0eXBlOlwiRnVuY3Rpb25cIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGdjKGUpJiZjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLGRlc2M6XCLmsqHmnIkgb25Qcm9ncmVzcyDlm57osIPvvIzmgqjlsIbml6Dms5Xojrflj5bkuIrkvKDov5vluqZcIn0pKSwhMH19fSxjcmVhdGVGYWNlTWVzc2FnZTp7dG86QnUsY29udmVyc2F0aW9uVHlwZTpCdSxwYXlsb2FkOkNuKHt9LGp1LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGRjKGUpP2NjKGUuaW5kZXgpPyEhdWMoZS5kYXRhKXx8KGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlRmFjZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZGF0YVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOihjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmluZGV4XCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBOdW1iZXJcIn0pKSwhMSk6KGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlRmFjZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExKX19KX0sY3JlYXRlRmlsZU1lc3NhZ2U6e3RvOkJ1LGNvbnZlcnNhdGlvblR5cGU6QnUscGF5bG9hZDpDbih7fSxqdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe2lmKCFkYyhlKSlyZXR1cm4gY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITE7aWYoZ2MoZS5maWxlKSlyZXR1cm4gY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuS4jeiDveS4uiB1bmRlZmluZWRcIn0pKSwhMTtpZihnaSl7aWYoIShlLmZpbGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50fHxpYyhlLmZpbGUpKSlyZXR1cm4gZGMoZS5maWxlKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaT8wIT09ZS5maWxlLnRlbXBGaWxlUGF0aHMubGVuZ3RoJiYwIT09ZS5maWxlLnRlbXBGaWxlcy5sZW5ndGh8fChjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5oKo5rKh5pyJ6YCJ5oup5paH5Lu277yM5peg5rOV5Y+R6YCBXCJ9KSksITEpOihjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi57G75Z6L5b+F6aG75pivIEhUTUxJbnB1dEVsZW1lbnQg5oiWIEZpbGVcIn0pKSwhMSk7aWYoZS5maWxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmMD09PWUuZmlsZS5maWxlcy5sZW5ndGgpcmV0dXJuIGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlRmlsZU1lc3NhZ2VcIixkZXNjOlwi5oKo5rKh5pyJ6YCJ5oup5paH5Lu277yM5peg5rOV5Y+R6YCBXCJ9KSksITF9cmV0dXJuITB9fSksb25Qcm9ncmVzczp7dHlwZTpcIkZ1bmN0aW9uXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBnYyhlKSYmY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLGRlc2M6XCLmsqHmnIkgb25Qcm9ncmVzcyDlm57osIPvvIzmgqjlsIbml6Dms5Xojrflj5bkuIrkvKDov5vluqZcIn0pKSwhMH19fSxjcmVhdGVMb2NhdGlvbk1lc3NhZ2U6e3RvOkJ1LGNvbnZlcnNhdGlvblR5cGU6QnUscGF5bG9hZDpDbih7fSxqdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBkYyhlKT91YyhlLmRlc2NyaXB0aW9uKT9jYyhlLmxvbmdpdHVkZSk/ISFjYyhlLmxhdGl0dWRlKXx8KGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlTG9jYXRpb25NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmxhdGl0dWRlXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBOdW1iZXJcIn0pKSwhMSk6KGNvbnNvbGUud2FybihLdSh7YXBpOlwiY3JlYXRlTG9jYXRpb25NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmxvbmdpdHVkZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogTnVtYmVyXCJ9KSksITEpOihjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZUxvY2F0aW9uTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5kZXNjcmlwdGlvblwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOihjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZUxvY2F0aW9uTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITEpfX0pfSxjcmVhdGVNZXJnZXJNZXNzYWdlOnt0bzpCdSxjb252ZXJzYXRpb25UeXBlOkJ1LHBheWxvYWQ6Q24oe30sanUse3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtpZihKYyhlLm1lc3NhZ2VMaXN0KSlyZXR1cm4gY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsZGVzYzpcIuS4jeiDveS4uuepuuaVsOe7hFwifSkpLCExO2lmKEpjKGUuY29tcGF0aWJsZVRleHQpKXJldHVybiBjb25zb2xlLndhcm4oS3Uoe2FwaTpcImNyZWF0ZU1lcmdlck1lc3NhZ2VcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ++8jOS4lOS4jeiDveS4uuepulwifSkpLCExO3ZhciB0PSExO3JldHVybiBlLm1lc3NhZ2VMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2Uuc3RhdHVzPT09RnUuRkFJTCYmKHQ9ITApfSkpLCF0fHwoY29uc29sZS53YXJuKEt1KHthcGk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsZGVzYzpcIuS4jeaUr+aMgeWQiOW5tuW3suWPkemAgeWksei0peeahOa2iOaBr1wifSkpLCExKX19KX0scmV2b2tlTWVzc2FnZTpbQ24oe25hbWU6XCJtZXNzYWdlXCJ9LGp1LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIEpjKGUpPyhjb25zb2xlLndhcm4oXCJyZXZva2VNZXNzYWdlIOivt+S8oOWFpea2iOaBr++8iE1lc3NhZ2XvvInlrp7kvotcIiksITEpOmUuY29udmVyc2F0aW9uVHlwZT09PVluLkNPTlZfU1lTVEVNPyhjb25zb2xlLndhcm4oXCJyZXZva2VNZXNzYWdlIOS4jeiDveaSpOWbnuezu+e7n+S8muivnea2iOaBr++8jOWPquiDveaSpOWbnuWNleiBiua2iOaBr+aIlue+pOa2iOaBr1wiKSwhMSk6ITAhPT1lLmlzUmV2b2tlZHx8KGNvbnNvbGUud2FybihcInJldm9rZU1lc3NhZ2Ug5raI5oGv5bey57uP6KKr5pKk5Zue77yM6K+35Yu/6YeN5aSN5pON5L2cXCIpLCExKX19KV0sZGVsZXRlTWVzc2FnZTpbQ24oe25hbWU6XCJtZXNzYWdlTGlzdFwifSxIdSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiFKYyhlKXx8KGNvbnNvbGUud2FybihLdSh7YXBpOlwiZGVsZXRlTWVzc2FnZVwiLHBhcmFtOlwibWVzc2FnZUxpc3RcIixkZXNjOlwi5LiN6IO95Li656m65pWw57uEXCJ9KSksITEpfX0pXSxnZXRVc2VyUHJvZmlsZTp7dXNlcklETGlzdDp7dHlwZTpcIkFycmF5XCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBwYyhlKT8oMD09PWUubGVuZ3RoJiZjb25zb2xlLndhcm4oS3Uoe2FwaTpcImdldFVzZXJQcm9maWxlXCIscGFyYW06XCJ1c2VySURMaXN0XCIsZGVzYzpcIuS4jeiDveS4uuepuuaVsOe7hFwifSkpLCEwKTooY29uc29sZS53YXJuKEt1KHthcGk6XCJnZXRVc2VyUHJvZmlsZVwiLHBhcmFtOlwidXNlcklETGlzdFwiLGRlc2M6XCLlv4XpobvkuLrmlbDnu4RcIn0pKSwhMSl9fX0sdXBkYXRlTXlQcm9maWxlOntwcm9maWxlQ3VzdG9tRmllbGQ6e3R5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hIWdjKGUpfHwoISFwYyhlKXx8KGNvbnNvbGUud2FybihLdSh7YXBpOlwidXBkYXRlTXlQcm9maWxlXCIscGFyYW06XCJwcm9maWxlQ3VzdG9tRmllbGRcIixkZXNjOlwi5b+F6aG75Li65pWw57uEXCJ9KSksITEpKX19fSxhZGRGcmllbmQ6e3RvOkJ1LHNvdXJjZTp7dHlwZTpcIlN0cmluZ1wiLHJlcXVpcmVkOiEwLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hIWUmJihlLnN0YXJ0c1dpdGgoXCJBZGRTb3VyY2VfVHlwZV9cIik/IShlLnJlcGxhY2UoXCJBZGRTb3VyY2VfVHlwZV9cIixcIlwiKS5sZW5ndGg+OCl8fChjb25zb2xlLndhcm4oS3Uoe2FwaTpcImFkZEZyaWVuZFwiLGRlc2M6XCLliqDlpb3lj4vmnaXmupDlrZfmrrXnmoTlhbPplK7lrZfplb/luqbkuI3lvpfotoXov4c45a2X6IqCXCJ9KSksITEpOihjb25zb2xlLndhcm4oS3Uoe2FwaTpcImFkZEZyaWVuZFwiLGRlc2M6XCLliqDlpb3lj4vmnaXmupDlrZfmrrXnmoTliY3nvIDlv4XpobvmmK/vvJpBZGRTb3VyY2VfVHlwZV9cIn0pKSwhMSkpfX0scmVtYXJrOnt0eXBlOlwiU3RyaW5nXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiEodWMoZSkmJmUubGVuZ3RoPjk2KXx8KGNvbnNvbGUud2FybihLdSh7YXBpOlwidXBkYXRlRnJpZW5kXCIsZGVzYzpcIiDlpIfms6jplb/luqbmnIDplb/kuI3lvpfotoXov4cgOTYg5Liq5a2X6IqCXCJ9KSksITEpfX19LGRlbGV0ZUZyaWVuZDp7dXNlcklETGlzdDpIdX0sY2hlY2tGcmllbmQ6e3VzZXJJRExpc3Q6SHV9LGdldEZyaWVuZFByb2ZpbGU6e3VzZXJJRExpc3Q6SHV9LHVwZGF0ZUZyaWVuZDp7dXNlcklEOkJ1LHJlbWFyazp7dHlwZTpcIlN0cmluZ1wiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hKHVjKGUpJiZlLmxlbmd0aD45Nil8fChjb25zb2xlLndhcm4oS3Uoe2FwaTpcInVwZGF0ZUZyaWVuZFwiLGRlc2M6XCIg5aSH5rOo6ZW/5bqm5pyA6ZW/5LiN5b6X6LaF6L+HIDk2IOS4quWtl+iKglwifSkpLCExKX19LGZyaWVuZEN1c3RvbUZpZWxkOnt0eXBlOlwiQXJyYXlcIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7aWYoZSl7aWYoIXBjKGUpKXJldHVybiBjb25zb2xlLndhcm4oS3Uoe2FwaTpcInVwZGF0ZUZyaWVuZFwiLHBhcmFtOlwiZnJpZW5kQ3VzdG9tRmllbGRcIixkZXNjOlwi5b+F6aG75Li65pWw57uEXCJ9KSksITE7dmFyIHQ9ITA7cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHVjKGUua2V5KSYmLTEhPT1lLmtleS5pbmRleE9mKFwiVGFnX1NOU19DdXN0b21cIik/dWMoZS52YWx1ZSk/ZS52YWx1ZS5sZW5ndGg+OD8oY29uc29sZS53YXJuKEt1KHthcGk6XCJ1cGRhdGVGcmllbmRcIixkZXNjOlwi5aW95Y+L6Ieq5a6a5LmJ5a2X5q6155qE5YWz6ZSu5a2X6ZW/5bqm5LiN5b6X6LaF6L+HOOWtl+iKglwifSkpLHQ9ITEpOnZvaWQgMDooY29uc29sZS53YXJuKEt1KHthcGk6XCJ1cGRhdGVGcmllbmRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ1wifSkpLHQ9ITEpOihjb25zb2xlLndhcm4oS3Uoe2FwaTpcInVwZGF0ZUZyaWVuZFwiLGRlc2M6XCLlpb3lj4voh6rlrprkuYnlrZfmrrXnmoTliY3nvIDlv4XpobvmmK8gVGFnX1NOU19DdXN0b21cIn0pKSx0PSExKX0pKSx0fXJldHVybiEwfX19LGFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uOnt1c2VySUQ6QnV9LHJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uOnt1c2VySUQ6QnV9LGRlbGV0ZUZyaWVuZEFwcGxpY2F0aW9uOnt1c2VySUQ6QnV9LGNyZWF0ZUZyaWVuZEdyb3VwOntuYW1lOkJ1fSxkZWxldGVGcmllbmRHcm91cDp7bmFtZTpCdX0sYWRkVG9GcmllbmRHcm91cDp7bmFtZTpCdSx1c2VySURMaXN0Okh1fSxyZW1vdmVGcm9tRnJpZW5kR3JvdXA6e25hbWU6QnUsdXNlcklETGlzdDpIdX0scmVuYW1lRnJpZW5kR3JvdXA6e29sZE5hbWU6QnUsbmV3TmFtZTpCdX0sc2VuZE1lc3NhZ2VSZWFkUmVjZWlwdDpbe25hbWU6XCJtZXNzYWdlTGlzdFwiLHR5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gcGMoZSk/MD09PWUubGVuZ3RoPyhjb25zb2xlLndhcm4oS3Uoe2FwaTpcInNlbmRNZXNzYWdlUmVhZFJlY2VpcHRcIixwYXJhbTpcIm1lc3NhZ2VMaXN0XCIsZGVzYzpcIuS4jeiDveS4uuepuuaVsOe7hFwifSkpLCExKTooZS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0MyQylyZXR1cm4gY29uc29sZS53YXJuKEt1KHthcGk6XCJzZW5kTWVzc2FnZVJlYWRSZWNlaXB0XCIscGFyYW06XCJtZXNzYWdlTGlzdFwiLGRlc2M6XCLku4XmlK/mjIHnvqTmtojmga9cIn0pKSwhMX0pKSwhMCk6KGNvbnNvbGUud2FybihLdSh7YXBpOlwic2VuZE1lc3NhZ2VSZWFkUmVjZWlwdFwiLHBhcmFtOlwibWVzc2FnZUxpc3RcIixkZXNjOlwi5b+F6aG75Li65pWw57uEXCJ9KSksITEpfX1dLGdldE1lc3NhZ2VSZWFkUmVjZWlwdExpc3Q6W3tuYW1lOlwibWVzc2FnZUxpc3RcIix0eXBlOlwiQXJyYXlcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIHBjKGUpPzA9PT1lLmxlbmd0aD8oY29uc29sZS53YXJuKEt1KHthcGk6XCJnZXRNZXNzYWdlUmVhZFJlY2VpcHRMaXN0XCIscGFyYW06XCJtZXNzYWdlTGlzdFwiLGRlc2M6XCLkuI3og73kuLrnqbrmlbDnu4RcIn0pKSwhMSk6KGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZS5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9DMkMpcmV0dXJuIGNvbnNvbGUud2FybihLdSh7YXBpOlwiZ2V0TWVzc2FnZVJlYWRSZWNlaXB0TGlzdFwiLHBhcmFtOlwibWVzc2FnZUxpc3RcIixkZXNjOlwi5LuF5pSv5oyB576k5raI5oGvXCJ9KSksITF9KSksITApOihjb25zb2xlLndhcm4oS3Uoe2FwaTpcImdldE1lc3NhZ2VSZWFkUmVjZWlwdExpc3RcIixwYXJhbTpcIm1lc3NhZ2VMaXN0XCIsZGVzYzpcIuW/hemhu+S4uuaVsOe7hFwifSkpLCExKX19XX0sWXU9e2xvZ2luOlwibG9naW5cIixsb2dvdXQ6XCJsb2dvdXRcIixvbjpcIm9uXCIsb25jZTpcIm9uY2VcIixvZmY6XCJvZmZcIixzZXRMb2dMZXZlbDpcInNldExvZ0xldmVsXCIscmVnaXN0ZXJQbHVnaW46XCJyZWdpc3RlclBsdWdpblwiLGRlc3Ryb3k6XCJkZXN0cm95XCIsY3JlYXRlVGV4dE1lc3NhZ2U6XCJjcmVhdGVUZXh0TWVzc2FnZVwiLGNyZWF0ZVRleHRBdE1lc3NhZ2U6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIsY3JlYXRlSW1hZ2VNZXNzYWdlOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIsY3JlYXRlQXVkaW9NZXNzYWdlOlwiY3JlYXRlQXVkaW9NZXNzYWdlXCIsY3JlYXRlVmlkZW9NZXNzYWdlOlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIsY3JlYXRlQ3VzdG9tTWVzc2FnZTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixjcmVhdGVGYWNlTWVzc2FnZTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIsY3JlYXRlRmlsZU1lc3NhZ2U6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLGNyZWF0ZUxvY2F0aW9uTWVzc2FnZTpcImNyZWF0ZUxvY2F0aW9uTWVzc2FnZVwiLGNyZWF0ZU1lcmdlck1lc3NhZ2U6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsZG93bmxvYWRNZXJnZXJNZXNzYWdlOlwiZG93bmxvYWRNZXJnZXJNZXNzYWdlXCIsY3JlYXRlRm9yd2FyZE1lc3NhZ2U6XCJjcmVhdGVGb3J3YXJkTWVzc2FnZVwiLHNlbmRNZXNzYWdlOlwic2VuZE1lc3NhZ2VcIixyZXNlbmRNZXNzYWdlOlwicmVzZW5kTWVzc2FnZVwiLHJldm9rZU1lc3NhZ2U6XCJyZXZva2VNZXNzYWdlXCIsZGVsZXRlTWVzc2FnZTpcImRlbGV0ZU1lc3NhZ2VcIixzZW5kTWVzc2FnZVJlYWRSZWNlaXB0Olwic2VuZE1lc3NhZ2VSZWFkUmVjZWlwdFwiLGdldEdyb3VwTWVzc2FnZVJlYWRNZW1iZXJMaXN0OlwiZ2V0R3JvdXBNZXNzYWdlUmVhZE1lbWJlckxpc3RcIixnZXRNZXNzYWdlUmVhZFJlY2VpcHRMaXN0OlwiZ2V0TWVzc2FnZVJlYWRSZWNlaXB0TGlzdFwiLGdldE1lc3NhZ2VMaXN0OlwiZ2V0TWVzc2FnZUxpc3RcIixmaW5kTWVzc2FnZTpcImZpbmRNZXNzYWdlXCIsc2V0TWVzc2FnZVJlYWQ6XCJzZXRNZXNzYWdlUmVhZFwiLHNldEFsbE1lc3NhZ2VSZWFkOlwic2V0QWxsTWVzc2FnZVJlYWRcIixnZXRDb252ZXJzYXRpb25MaXN0OlwiZ2V0Q29udmVyc2F0aW9uTGlzdFwiLGdldENvbnZlcnNhdGlvblByb2ZpbGU6XCJnZXRDb252ZXJzYXRpb25Qcm9maWxlXCIsZGVsZXRlQ29udmVyc2F0aW9uOlwiZGVsZXRlQ29udmVyc2F0aW9uXCIscGluQ29udmVyc2F0aW9uOlwicGluQ29udmVyc2F0aW9uXCIsZ2V0R3JvdXBMaXN0OlwiZ2V0R3JvdXBMaXN0XCIsZ2V0R3JvdXBQcm9maWxlOlwiZ2V0R3JvdXBQcm9maWxlXCIsY3JlYXRlR3JvdXA6XCJjcmVhdGVHcm91cFwiLGpvaW5Hcm91cDpcImpvaW5Hcm91cFwiLHVwZGF0ZUdyb3VwUHJvZmlsZTpcInVwZGF0ZUdyb3VwUHJvZmlsZVwiLHF1aXRHcm91cDpcInF1aXRHcm91cFwiLGRpc21pc3NHcm91cDpcImRpc21pc3NHcm91cFwiLGNoYW5nZUdyb3VwT3duZXI6XCJjaGFuZ2VHcm91cE93bmVyXCIsc2VhcmNoR3JvdXBCeUlEOlwic2VhcmNoR3JvdXBCeUlEXCIsc2V0TWVzc2FnZVJlbWluZFR5cGU6XCJzZXRNZXNzYWdlUmVtaW5kVHlwZVwiLGhhbmRsZUdyb3VwQXBwbGljYXRpb246XCJoYW5kbGVHcm91cEFwcGxpY2F0aW9uXCIsaW5pdEdyb3VwQXR0cmlidXRlczpcImluaXRHcm91cEF0dHJpYnV0ZXNcIixzZXRHcm91cEF0dHJpYnV0ZXM6XCJzZXRHcm91cEF0dHJpYnV0ZXNcIixkZWxldGVHcm91cEF0dHJpYnV0ZXM6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIixnZXRHcm91cEF0dHJpYnV0ZXM6XCJnZXRHcm91cEF0dHJpYnV0ZXNcIixnZXRHcm91cE1lbWJlclByb2ZpbGU6XCJnZXRHcm91cE1lbWJlclByb2ZpbGVcIixnZXRHcm91cE1lbWJlckxpc3Q6XCJnZXRHcm91cE1lbWJlckxpc3RcIixhZGRHcm91cE1lbWJlcjpcImFkZEdyb3VwTWVtYmVyXCIsZGVsZXRlR3JvdXBNZW1iZXI6XCJkZWxldGVHcm91cE1lbWJlclwiLHNldEdyb3VwTWVtYmVyTmFtZUNhcmQ6XCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIsc2V0R3JvdXBNZW1iZXJNdXRlVGltZTpcInNldEdyb3VwTWVtYmVyTXV0ZVRpbWVcIixzZXRHcm91cE1lbWJlclJvbGU6XCJzZXRHcm91cE1lbWJlclJvbGVcIixzZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkOlwic2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZFwiLGdldEdyb3VwT25saW5lTWVtYmVyQ291bnQ6XCJnZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIsZ2V0TXlQcm9maWxlOlwiZ2V0TXlQcm9maWxlXCIsZ2V0VXNlclByb2ZpbGU6XCJnZXRVc2VyUHJvZmlsZVwiLHVwZGF0ZU15UHJvZmlsZTpcInVwZGF0ZU15UHJvZmlsZVwiLGdldEJsYWNrbGlzdDpcImdldEJsYWNrbGlzdFwiLGFkZFRvQmxhY2tsaXN0OlwiYWRkVG9CbGFja2xpc3RcIixyZW1vdmVGcm9tQmxhY2tsaXN0OlwicmVtb3ZlRnJvbUJsYWNrbGlzdFwiLGdldEZyaWVuZExpc3Q6XCJnZXRGcmllbmRMaXN0XCIsYWRkRnJpZW5kOlwiYWRkRnJpZW5kXCIsZGVsZXRlRnJpZW5kOlwiZGVsZXRlRnJpZW5kXCIsY2hlY2tGcmllbmQ6XCJjaGVja0ZyaWVuZFwiLHVwZGF0ZUZyaWVuZDpcInVwZGF0ZUZyaWVuZFwiLGdldEZyaWVuZFByb2ZpbGU6XCJnZXRGcmllbmRQcm9maWxlXCIsZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0OlwiZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0XCIscmVmdXNlRnJpZW5kQXBwbGljYXRpb246XCJyZWZ1c2VGcmllbmRBcHBsaWNhdGlvblwiLGRlbGV0ZUZyaWVuZEFwcGxpY2F0aW9uOlwiZGVsZXRlRnJpZW5kQXBwbGljYXRpb25cIixhY2NlcHRGcmllbmRBcHBsaWNhdGlvbjpcImFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uXCIsc2V0RnJpZW5kQXBwbGljYXRpb25SZWFkOlwic2V0RnJpZW5kQXBwbGljYXRpb25SZWFkXCIsZ2V0RnJpZW5kR3JvdXBMaXN0OlwiZ2V0RnJpZW5kR3JvdXBMaXN0XCIsY3JlYXRlRnJpZW5kR3JvdXA6XCJjcmVhdGVGcmllbmRHcm91cFwiLHJlbmFtZUZyaWVuZEdyb3VwOlwicmVuYW1lRnJpZW5kR3JvdXBcIixkZWxldGVGcmllbmRHcm91cDpcImRlbGV0ZUZyaWVuZEdyb3VwXCIsYWRkVG9GcmllbmRHcm91cDpcImFkZFRvRnJpZW5kR3JvdXBcIixyZW1vdmVGcm9tRnJpZW5kR3JvdXA6XCJyZW1vdmVGcm9tRnJpZW5kR3JvdXBcIixjYWxsRXhwZXJpbWVudGFsQVBJOlwiY2FsbEV4cGVyaW1lbnRhbEFQSVwifSwkdT0hIUNyJiZyKChmdW5jdGlvbigpe0NyLnByb3RvdHlwZS5maW5hbGx5LmNhbGwoe3RoZW46ZnVuY3Rpb24oKXt9fSwoZnVuY3Rpb24oKXt9KSl9KSk7a2Uoe3RhcmdldDpcIlByb21pc2VcIixwcm90bzohMCxyZWFsOiEwLGZvcmNlZDokdX0se2ZpbmFsbHk6ZnVuY3Rpb24oZSl7dmFyIHQ9THIodGhpcyxuZShcIlByb21pc2VcIikpLG49XCJmdW5jdGlvblwiPT10eXBlb2YgZTtyZXR1cm4gdGhpcy50aGVuKG4/ZnVuY3Rpb24obil7cmV0dXJuIF9hKHQsZSgpKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBufSkpfTplLG4/ZnVuY3Rpb24obil7cmV0dXJuIF9hKHQsZSgpKS50aGVuKChmdW5jdGlvbigpe3Rocm93IG59KSl9OmUpfX0pLFwiZnVuY3Rpb25cIiE9dHlwZW9mIENyfHxDci5wcm90b3R5cGUuZmluYWxseXx8WihDci5wcm90b3R5cGUsXCJmaW5hbGx5XCIsbmUoXCJQcm9taXNlXCIpLnByb3RvdHlwZS5maW5hbGx5KTt2YXIgenU9W10uc2xpY2UsSnU9L01TSUUgLlxcLi8udGVzdCgkbiksWHU9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIG89YXJndW1lbnRzLmxlbmd0aD4yLHI9bz96dS5jYWxsKGFyZ3VtZW50cywyKTp2b2lkIDA7cmV0dXJuIGUobz9mdW5jdGlvbigpeyhcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6RnVuY3Rpb24odCkpLmFwcGx5KHRoaXMscil9OnQsbil9fTtrZSh7Z2xvYmFsOiEwLGJpbmQ6ITAsZm9yY2VkOkp1fSx7c2V0VGltZW91dDpYdShvLnNldFRpbWVvdXQpLHNldEludGVydmFsOlh1KG8uc2V0SW50ZXJ2YWwpfSk7dmFyIFF1PUhlLmZpbHRlcixadT1lbyhcImZpbHRlclwiKSxlbD16ZShcImZpbHRlclwiKTtrZSh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6IVp1fHwhZWx9LHtmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIFF1KHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSk7dmFyIHRsLG5sPVwic2lnblwiLG9sPVwibWVzc2FnZVwiLHJsPVwidXNlclwiLGFsPVwiYzJjXCIsc2w9XCJncm91cFwiLGlsPVwic25zXCIsY2w9XCJncm91cE1lbWJlclwiLHVsPVwiY29udmVyc2F0aW9uXCIsbGw9XCJjb250ZXh0XCIsZGw9XCJzdG9yYWdlXCIscGw9XCJldmVudFN0YXRcIixnbD1cIm5ldE1vbml0b3JcIixobD1cImJpZ0RhdGFDaGFubmVsXCIsZmw9XCJ1cGxvYWRcIixfbD1cInBsdWdpblwiLG1sPVwic3luY1VucmVhZE1lc3NhZ2VcIix2bD1cInNlc3Npb25cIixNbD1cImNoYW5uZWxcIix5bD1cIm1lc3NhZ2VfbG9zc19kZXRlY3Rpb25cIixJbD1cImNsb3VkQ29udHJvbFwiLEVsPVwid29ya2VyVGltZXJcIixUbD1cInB1bGxHcm91cE1lc3NhZ2VcIixTbD1cInF1YWxpdHlTdGF0XCIsQ2w9XCJjb21tZXJjaWFsQ29uZmlnXCIsQWw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fbW9kdWxlTWFuYWdlcj10LHRoaXMuX2NsYXNzTmFtZT1cIlwifXJldHVybiBFbihlLFt7a2V5OlwiaXNMb2dnZWRJblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGxsKS5pc0xvZ2dlZEluKCl9fSx7a2V5OlwiaXNPdmVyc2VhXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobGwpLmlzT3ZlcnNlYSgpfX0se2tleTpcImdldE15VXNlcklEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobGwpLmdldFVzZXJJRCgpfX0se2tleTpcImdldE15VGlueUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobGwpLmdldFRpbnlJRCgpfX0se2tleTpcImdldE1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShlKX19LHtrZXk6XCJnZXRQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGZpfX0se2tleTpcImdldE5ldHdvcmtUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoZ2wpLmdldE5ldHdvcmtUeXBlKCl9fSx7a2V5OlwicHJvYmVOZXR3b3JrXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoZ2wpLnByb2JlKCl9fSx7a2V5OlwiZ2V0Q2xvdWRDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSWwpLmdldENsb3VkQ29uZmlnKGUpfX0se2tleTpcImVtaXRPdXRlckV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkuZW1pdChlLHQpfX0se2tleTpcImVtaXRJbm5lckV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkuZW1pdChlLHQpfX0se2tleTpcImdldElubmVyRW1pdHRlckluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpfX0se2tleTpcImdlbmVyYXRlVGpnSURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobGwpLmdldFRpbnlJRCgpK1wiLVwiK2UucmFuZG9tfX0se2tleTpcImZpbHRlck1vZGlmaWVkTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFKYyhlKSl7dmFyIHQ9ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiEwPT09ZS5pc01vZGlmaWVkfSkpO3QubGVuZ3RoPjAmJnRoaXMuZW1pdE91dGVyRXZlbnQoV24uTUVTU0FHRV9NT0RJRklFRCx0KX19fSx7a2V5OlwiZmlsdGVyVW5tb2RpZmllZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gSmMoZSk/W106ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiExPT09ZS5pc01vZGlmaWVkfSkpfX0se2tleTpcInJlcXVlc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUodmwpLnJlcXVlc3QoZSl9fSx7a2V5OlwiY2FuSVVzZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShDbCkuaGFzUHVyY2hhc2VkRmVhdHVyZShlKX19XSksZX0oKSxEbD1cIndzbG9naW5cIixObD1cIndzbG9nb3V0XCIsa2w9XCJ3c2hlbGxvXCIsT2w9XCJLaWNrT3RoZXJcIixSbD1cImdldG1zZ1wiLExsPVwiYXV0aGtleVwiLGJsPVwic2VuZG1zZ1wiLHdsPVwic2VuZF9ncm91cF9tc2dcIixHbD1cInBvcnRyYWl0X2dldF9hbGxcIixQbD1cInBvcnRyYWl0X3NldFwiLFVsPVwiYmxhY2tfbGlzdF9nZXRcIixGbD1cImJsYWNrX2xpc3RfYWRkXCIscWw9XCJibGFja19saXN0X2RlbGV0ZVwiLHhsPVwibXNnd2l0aGRyYXdcIixWbD1cIm1zZ3JlYWRlZFwiLEtsPVwic2V0X2MyY19wZWVyX211dGVfbm90aWZpY2F0aW9uc1wiLEJsPVwiZ2V0X2MyY19wZWVyX211dGVfbm90aWZpY2F0aW9uc1wiLEhsPVwiZ2V0cm9hbW1zZ1wiLGpsPVwiZ2V0X3BlZXJfcmVhZF90aW1lXCIsV2w9XCJkZWxldGVfYzJjX21zZ19yYW1ibGVcIixZbD1cInBhZ2VfZ2V0XCIsJGw9XCJnZXRcIix6bD1cImRlbGV0ZVwiLEpsPVwidG9wXCIsWGw9XCJkZWxldGVtc2dcIixRbD1cImdldF9qb2luZWRfZ3JvdXBfbGlzdFwiLFpsPVwiZ2V0X2dyb3VwX3NlbGZfbWVtYmVyX2luZm9cIixlZD1cImNyZWF0ZV9ncm91cFwiLHRkPVwiZGVzdHJveV9ncm91cFwiLG5kPVwibW9kaWZ5X2dyb3VwX2Jhc2VfaW5mb1wiLG9kPVwiYXBwbHlfam9pbl9ncm91cFwiLHJkPVwiYXBwbHlfam9pbl9ncm91cF9ub2F1dGhcIixhZD1cInF1aXRfZ3JvdXBcIixzZD1cImdldF9ncm91cF9wdWJsaWNfaW5mb1wiLGlkPVwiY2hhbmdlX2dyb3VwX293bmVyXCIsY2Q9XCJoYW5kbGVfYXBwbHlfam9pbl9ncm91cFwiLHVkPVwiaGFuZGxlX2ludml0ZV9qb2luX2dyb3VwXCIsbGQ9XCJncm91cF9tc2dfcmVjYWxsXCIsZGQ9XCJtc2dfcmVhZF9yZXBvcnRcIixwZD1cInJlYWRfYWxsX3VucmVhZF9tc2dcIixnZD1cImdyb3VwX21zZ19nZXRcIixoZD1cImdldF9ncm91cF9tc2dfcmVjZWlwdFwiLGZkPVwiZ3JvdXBfbXNnX3JlY2VpcHRcIixfZD1cImdldF9ncm91cF9tc2dfcmVjZWlwdF9kZXRhaWxcIixtZD1cImdldF9wZW5kZW5jeVwiLHZkPVwiZGVsZXRlbXNnXCIsTWQ9XCJnZXRfbXNnXCIseWQ9XCJnZXRfbXNnX25vYXV0aFwiLElkPVwiZ2V0X29ubGluZV9tZW1iZXJfbnVtXCIsRWQ9XCJkZWxldGVfZ3JvdXBfcmFtYmxlX21zZ19ieV9zZXFcIixUZD1cInNldF9ncm91cF9hdHRyXCIsU2Q9XCJtb2RpZnlfZ3JvdXBfYXR0clwiLENkPVwiZGVsZXRlX2dyb3VwX2F0dHJcIixBZD1cImNsZWFyX2dyb3VwX2F0dHJcIixEZD1cImdldF9ncm91cF9hdHRyXCIsTmQ9XCJnZXRfZ3JvdXBfbWVtYmVyX2luZm9cIixrZD1cImdldF9zcGVjaWZpZWRfZ3JvdXBfbWVtYmVyX2luZm9cIixPZD1cImFkZF9ncm91cF9tZW1iZXJcIixSZD1cImRlbGV0ZV9ncm91cF9tZW1iZXJcIixMZD1cIm1vZGlmeV9ncm91cF9tZW1iZXJfaW5mb1wiLGJkPVwiY29zXCIsd2Q9XCJwcmVfc2lnXCIsR2Q9XCJ2aWRlb19jb3ZlclwiLFBkPVwidGltX3dlYl9yZXBvcnRfdjJcIixVZD1cImFsaXZlXCIsRmQ9XCJtc2dfcHVzaFwiLHFkPVwibXVsdGlfbXNnX3B1c2hfd3NcIix4ZD1cIndzX21zZ19wdXNoX2Fja1wiLFZkPVwic3RhdF9mb3JjZW9mZmxpbmVcIixLZD1cInNhdmVfcmVsYXlfanNvbl9tc2dcIixCZD1cImdldF9yZWxheV9qc29uX21zZ1wiLEhkPVwiZmV0Y2hfY29uZmlnXCIsamQ9XCJwdXNoX2NvbmZpZ3YyXCIsV2Q9XCJmZXRjaF9pbXNka19wdXJjaGFzZV9iaXRzdjJcIixZZD1cInB1c2hfaW1zZGtfcHVyY2hhc2VfYml0c3YyXCIsJGQ9XCJub3RpZnkyXCIsemQ9e05PX1NES0FQUElEOjJlMyxOT19BQ0NPVU5UX1RZUEU6MjAwMSxOT19JREVOVElGSUVSOjIwMDIsTk9fVVNFUlNJRzoyMDAzLE5PX1RJTllJRDoyMDIyLE5PX0EyS0VZOjIwMjMsVVNFUl9OT1RfTE9HR0VEX0lOOjIwMjQsUkVQRUFUX0xPR0lOOjIwMjUsQ09TX1VOREVURUNURUQ6MjA0MCxDT1NfR0VUX1NJR19GQUlMOjIwNDEsTUVTU0FHRV9TRU5EX0ZBSUw6MjEwMCxNRVNTQUdFX0xJU1RfQ09OU1RSVUNUT1JfTkVFRF9PUFRJT05TOjIxMDMsTUVTU0FHRV9TRU5EX05FRURfTUVTU0FHRV9JTlNUQU5DRToyMTA1LE1FU1NBR0VfU0VORF9JTlZBTElEX0NPTlZFUlNBVElPTl9UWVBFOjIxMDYsTUVTU0FHRV9GSUxFX0lTX0VNUFRZOjIxMDgsTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SOjIxMDksTUVTU0FHRV9SRVZPS0VfRkFJTDoyMTEwLE1FU1NBR0VfREVMRVRFX0ZBSUw6MjExMSxNRVNTQUdFX1VOUkVBRF9BTExfRkFJTDoyMTEyLE1FU1NBR0VfQ09OVFJPTF9JTkZPX0ZBSUw6MjExMyxSRUFEX1JFQ0VJUFRfU0VRVUVOQ0VfTElTVF9FTVBUWToyMTE0LE1FU1NBR0VfSU1BR0VfU0VMRUNUX0ZJTEVfRklSU1Q6MjI1MSxNRVNTQUdFX0lNQUdFX1RZUEVTX0xJTUlUOjIyNTIsTUVTU0FHRV9JTUFHRV9TSVpFX0xJTUlUOjIyNTMsTUVTU0FHRV9BVURJT19VUExPQURfRkFJTDoyMzAwLE1FU1NBR0VfQVVESU9fU0laRV9MSU1JVDoyMzAxLE1FU1NBR0VfVklERU9fVVBMT0FEX0ZBSUw6MjM1MCxNRVNTQUdFX1ZJREVPX1NJWkVfTElNSVQ6MjM1MSxNRVNTQUdFX1ZJREVPX1RZUEVTX0xJTUlUOjIzNTIsTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMOjI0MDAsTUVTU0FHRV9GSUxFX1NFTEVDVF9GSUxFX0ZJUlNUOjI0MDEsTUVTU0FHRV9GSUxFX1NJWkVfTElNSVQ6MjQwMixNRVNTQUdFX0ZJTEVfVVJMX0lTX0VNUFRZOjI0MDMsTUVTU0FHRV9NRVJHRVJfVFlQRV9JTlZBTElEOjI0NTAsTUVTU0FHRV9NRVJHRVJfS0VZX0lOVkFMSUQ6MjQ1MSxNRVNTQUdFX01FUkdFUl9ET1dOTE9BRF9GQUlMOjI0NTIsTUVTU0FHRV9GT1JXQVJEX1RZUEVfSU5WQUxJRDoyNDUzLE1FU1NBR0VfQVRfVFlQRV9JTlZBTElEOjI0NTQsQ09OVkVSU0FUSU9OX05PVF9GT1VORDoyNTAwLFVTRVJfT1JfR1JPVVBfTk9UX0ZPVU5EOjI1MDEsQ09OVkVSU0FUSU9OX1VOX1JFQ09SREVEX1RZUEU6MjUwMixJTExFR0FMX0dST1VQX1RZUEU6MjYwMCxDQU5OT1RfSk9JTl9XT1JLOjI2MDEsSUxMRUdBTF9HUk9VUF9JRDoyNjAyLENBTk5PVF9DSEFOR0VfT1dORVJfSU5fQVZDSEFUUk9PTToyNjIwLENBTk5PVF9DSEFOR0VfT1dORVJfVE9fU0VMRjoyNjIxLENBTk5PVF9ESVNNSVNTX1dvcms6MjYyMixNRU1CRVJfTk9UX0lOX0dST1VQOjI2MjMsQ0FOTk9UX1VTRV9HUlBfQVRUUl9OT1RfQVZDSEFUUk9PTToyNjQxLENBTk5PVF9VU0VfR1JQX0FUVFJfQVZDSEFUUk9PTV9VTkpPSU46MjY0MixKT0lOX0dST1VQX0ZBSUw6MjY2MCxDQU5OT1RfQUREX01FTUJFUl9JTl9BVkNIQVRST09NOjI2NjEsQ0FOTk9UX0pPSU5fTk9OX0FWQ0hBVFJPT01fV0lUSE9VVF9MT0dJTjoyNjYyLENBTk5PVF9LSUNLX01FTUJFUl9JTl9BVkNIQVRST09NOjI2ODAsTk9UX09XTkVSOjI2ODEsQ0FOTk9UX1NFVF9NRU1CRVJfUk9MRV9JTl9XT1JLX0FORF9BVkNIQVRST09NOjI2ODIsSU5WQUxJRF9NRU1CRVJfUk9MRToyNjgzLENBTk5PVF9TRVRfU0VMRl9NRU1CRVJfUk9MRToyNjg0LENBTk5PVF9NVVRFX1NFTEY6MjY4NSxOT1RfTVlfRlJJRU5EOjI3MDAsQUxSRUFEWV9NWV9GUklFTkQ6MjcwMSxGUklFTkRfR1JPVVBfRVhJU1RFRDoyNzEwLEZSSUVORF9HUk9VUF9OT1RfRVhJU1Q6MjcxMSxGUklFTkRfQVBQTElDQVRJT05fTk9UX0VYSVNUOjI3MTYsVVBEQVRFX1BST0ZJTEVfSU5WQUxJRF9QQVJBTToyNzIxLFVQREFURV9QUk9GSUxFX05PX0tFWToyNzIyLEFERF9CTEFDS0xJU1RfSU5WQUxJRF9QQVJBTToyNzQwLERFTF9CTEFDS0xJU1RfSU5WQUxJRF9QQVJBTToyNzQxLENBTk5PVF9BRERfU0VMRl9UT19CTEFDS0xJU1Q6Mjc0MixBRERfRlJJRU5EX0lOVkFMSURfUEFSQU06Mjc2MCxORVRXT1JLX0VSUk9SOjI4MDAsTkVUV09SS19USU1FT1VUOjI4MDEsTkVUV09SS19CQVNFX09QVElPTlNfTk9fVVJMOjI4MDIsTkVUV09SS19VTkRFRklORURfU0VSVkVSX05BTUU6MjgwMyxORVRXT1JLX1BBQ0tBR0VfVU5ERUZJTkVEOjI4MDQsTk9fTkVUV09SSzoyODA1LENPTlZFUlRPUl9JUlJFR1VMQVJfUEFSQU1TOjI5MDAsTk9USUNFX1JVTkxPT1BfVU5FWFBFQ1RFRF9DT05ESVRJT046MjkwMSxOT1RJQ0VfUlVOTE9PUF9PRkZTRVRfTE9TVDoyOTAyLFVOQ0FVR0hUX0VSUk9SOjI5MDMsR0VUX0xPTkdQT0xMX0lEX0ZBSUxFRDoyOTA0LElOVkFMSURfT1BFUkFUSU9OOjI5MDUsT1ZFUl9GUkVRVUVOQ1lfTElNSVQ6Mjk5NixDQU5OT1RfRklORF9QUk9UT0NPTDoyOTk3LENBTk5PVF9GSU5EX01PRFVMRToyOTk4LFNES19JU19OT1RfUkVBRFk6Mjk5OSxMT0dHSU5HX0lOOjNlMyxMT0dJTl9GQUlMRUQ6MzAwMSxLSUNLRURfT1VUX01VTFRfREVWSUNFOjMwMDIsS0lDS0VEX09VVF9NVUxUX0FDQ09VTlQ6MzAwMyxLSUNLRURfT1VUX1VTRVJTSUdfRVhQSVJFRDozMDA0LExPR0dFRF9PVVQ6MzAwNSxMT05HX1BPTExfS0lDS19PVVQ6OTExMDEsTUVTU0FHRV9BMktFWV9FWFBJUkVEOjIwMDAyLEFDQ09VTlRfQTJLRVlfRVhQSVJFRDo3MDAwMSxMT05HX1BPTExfQVBJX1BBUkFNX0VSUk9SOjkwMDAxLEhFTExPX0FOU1dFUl9LSUNLRURfT1VUOjEwMDIsT1BFTl9TRVJWSUNFX09WRVJMT0FEX0VSUk9SOjYwMDIyfSxKZD17Tk9fU0RLQVBQSUQ6XCLml6AgU0RLQXBwSURcIixOT19BQ0NPVU5UX1RZUEU6XCLml6AgYWNjb3VudFR5cGVcIixOT19JREVOVElGSUVSOlwi5pegIHVzZXJJRFwiLE5PX1VTRVJTSUc6XCLml6AgdXNlclNpZ1wiLE5PX1RJTllJRDpcIuaXoCB0aW55SURcIixOT19BMktFWTpcIuaXoCBhMmtleVwiLFVTRVJfTk9UX0xPR0dFRF9JTjpcIueUqOaIt+acqueZu+W9lVwiLFJFUEVBVF9MT0dJTjpcIumHjeWkjeeZu+W9lVwiLENPU19VTkRFVEVDVEVEOlwi5pyq5qOA5rWL5YiwIENPUyDkuIrkvKDmj5Lku7ZcIixDT1NfR0VUX1NJR19GQUlMOlwi6I635Y+WIENPUyDpooTnrb7lkI0gVVJMIOWksei0pVwiLE1FU1NBR0VfU0VORF9GQUlMOlwi5raI5oGv5Y+R6YCB5aSx6LSlXCIsTUVTU0FHRV9MSVNUX0NPTlNUUlVDVE9SX05FRURfT1BUSU9OUzpcIk1lc3NhZ2VDb250cm9sbGVyLmNvbnN0cnVjdG9yKCkg6ZyA6KaB5Y+C5pWwIG9wdGlvbnNcIixNRVNTQUdFX1NFTkRfTkVFRF9NRVNTQUdFX0lOU1RBTkNFOlwi6ZyA6KaBIE1lc3NhZ2Ug55qE5a6e5L6LXCIsTUVTU0FHRV9TRU5EX0lOVkFMSURfQ09OVkVSU0FUSU9OX1RZUEU6J01lc3NhZ2UuY29udmVyc2F0aW9uVHlwZSDlj6rog73kuLogXCJDMkNcIiDmiJYgXCJHUk9VUFwiJyxNRVNTQUdFX0ZJTEVfSVNfRU1QVFk6XCLml6Dms5Xlj5HpgIHnqbrmlofku7ZcIixNRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1I6XCLlm57osIPlh73mlbDov5DooYzml7bpgYfliLDplJnor6/vvIzor7fmo4Dmn6XmjqXlhaXkvqfku6PnoIFcIixNRVNTQUdFX1JFVk9LRV9GQUlMOlwi5raI5oGv5pKk5Zue5aSx6LSlXCIsTUVTU0FHRV9ERUxFVEVfRkFJTDpcIua2iOaBr+WIoOmZpOWksei0pVwiLE1FU1NBR0VfVU5SRUFEX0FMTF9GQUlMOlwi6K6+572u5omA5pyJ5pyq6K+75raI5oGv5Li65bey6K+75aSE55CG5aSx6LSlXCIsTUVTU0FHRV9DT05UUk9MX0lORk9fRkFJTDpcIuekvue+pOS4jeaUr+aMgea2iOaBr+WPkemAgeaOp+WItumAiemhuVwiLFJFQURfUkVDRUlQVF9TRVFVRU5DRV9MSVNUX0VNUFRZOlwi5Y+R6YCB576k5bey6K+75Zue5omn5pe2IHNlcXVlbmNlTGlzdCDkuLrnqbpcIixNRVNTQUdFX0lNQUdFX1NFTEVDVF9GSUxFX0ZJUlNUOlwi6K+35YWI6YCJ5oup5LiA5Liq5Zu+54mHXCIsTUVTU0FHRV9JTUFHRV9UWVBFU19MSU1JVDpcIuWPquWFgeiuuOS4iuS8oCBqcGcgcG5nIGpwZWcgZ2lmIGJtcCBpbWFnZSB3ZWJwIOagvOW8j+eahOWbvueJh1wiLE1FU1NBR0VfSU1BR0VfU0laRV9MSU1JVDpcIuWbvueJh+Wkp+Wwj+i2hei/hzIwTe+8jOaXoOazleWPkemAgVwiLE1FU1NBR0VfQVVESU9fVVBMT0FEX0ZBSUw6XCLor63pn7PkuIrkvKDlpLHotKVcIixNRVNTQUdFX0FVRElPX1NJWkVfTElNSVQ6XCLor63pn7PlpKflsI/lpKfkuo4yME3vvIzml6Dms5Xlj5HpgIFcIixNRVNTQUdFX1ZJREVPX1VQTE9BRF9GQUlMOlwi6KeG6aKR5LiK5Lyg5aSx6LSlXCIsTUVTU0FHRV9WSURFT19TSVpFX0xJTUlUOlwi6KeG6aKR5aSn5bCP6LaF6L+HMTAwTe+8jOaXoOazleWPkemAgVwiLE1FU1NBR0VfVklERU9fVFlQRVNfTElNSVQ6XCLlj6rlhYHorrjkuIrkvKAgbXA0IOagvOW8j+eahOinhumikVwiLE1FU1NBR0VfRklMRV9VUExPQURfRkFJTDpcIuaWh+S7tuS4iuS8oOWksei0pVwiLE1FU1NBR0VfRklMRV9TRUxFQ1RfRklMRV9GSVJTVDpcIuivt+WFiOmAieaLqeS4gOS4quaWh+S7tlwiLE1FU1NBR0VfRklMRV9TSVpFX0xJTUlUOlwi5paH5Lu25aSn5bCP6LaF6L+HMTAwTe+8jOaXoOazleWPkemAgSBcIixNRVNTQUdFX0ZJTEVfVVJMX0lTX0VNUFRZOlwi57y65bCR5b+F6KaB55qE5Y+C5pWw5paH5Lu2IFVSTFwiLE1FU1NBR0VfTUVSR0VSX1RZUEVfSU5WQUxJRDpcIumdnuWQiOW5tua2iOaBr1wiLE1FU1NBR0VfTUVSR0VSX0tFWV9JTlZBTElEOlwi5ZCI5bm25raI5oGv55qEIG1lc3NhZ2VLZXkg5peg5pWIXCIsTUVTU0FHRV9NRVJHRVJfRE9XTkxPQURfRkFJTDpcIuS4i+i9veWQiOW5tua2iOaBr+Wksei0pVwiLE1FU1NBR0VfRk9SV0FSRF9UWVBFX0lOVkFMSUQ6XCLpgInmi6nnmoTmtojmga/nsbvlnovvvIjlpoLnvqTmj5DnpLrmtojmga/vvInkuI3lj6/ku6Xovazlj5FcIixNRVNTQUdFX0FUX1RZUEVfSU5WQUxJRDpcIuekvue+pOS4jeaUr+aMgSBAIOaJgOacieS6ulwiLENPTlZFUlNBVElPTl9OT1RfRk9VTkQ6XCLmsqHmnInmib7liLDnm7jlupTnmoTkvJror53vvIzor7fmo4Dmn6XkvKDlhaXlj4LmlbBcIixVU0VSX09SX0dST1VQX05PVF9GT1VORDpcIuayoeacieaJvuWIsOebuOW6lOeahOeUqOaIt+aIlue+pOe7hO+8jOivt+ajgOafpeS8oOWFpeWPguaVsFwiLENPTlZFUlNBVElPTl9VTl9SRUNPUkRFRF9UWVBFOlwi5pyq6K6w5b2V55qE5Lya6K+d57G75Z6LXCIsSUxMRUdBTF9HUk9VUF9UWVBFOlwi6Z2e5rOV55qE576k57G75Z6L77yM6K+35qOA5p+l5Lyg5YWl5Y+C5pWwXCIsQ0FOTk9UX0pPSU5fV09SSzpcIuS4jeiDveWKoOWFpSBXb3JrIOexu+Wei+eahOe+pOe7hFwiLElMTEVHQUxfR1JPVVBfSUQ6XCLnvqTnu4QgSUQg6Z2e5rOV77yMUHVibGljL1dvcmsvTWVldGluZy9BVkNoYXRSb29tIOexu+Wei+e+pOe7hOS4jeiDveS7pSBAVEdTI18g5Li65YmN57yA77yM56S+576k5b+F6aG75LulIEBUR1MjXyDkuLrliY3nvIBcIixDQU5OT1RfQ0hBTkdFX09XTkVSX0lOX0FWQ0hBVFJPT006XCJBVkNoYXRSb29tIOexu+Wei+eahOe+pOe7hOS4jeiDvei9rOiuqee+pOS4u1wiLENBTk5PVF9DSEFOR0VfT1dORVJfVE9fU0VMRjpcIuS4jeiDveaKiue+pOS4u+i9rOiuqee7meiHquW3sVwiLENBTk5PVF9ESVNNSVNTX1dPUks6XCLkuI3og73op6PmlaMgV29yayDnsbvlnovnmoTnvqTnu4RcIixNRU1CRVJfTk9UX0lOX0dST1VQOlwi55So5oi35LiN5Zyo6K+l576k57uE5YaFXCIsSk9JTl9HUk9VUF9GQUlMOlwi5Yqg576k5aSx6LSl77yM6K+35qOA5p+l5Lyg5YWl5Y+C5pWw5oiW6YeN6K+VXCIsQ0FOTk9UX0FERF9NRU1CRVJfSU5fQVZDSEFUUk9PTTpcIkFWQ2hhdFJvb20g57G75Z6L55qE576k5LiN5pSv5oyB6YKA6K+3576k5oiQ5ZGYXCIsQ0FOTk9UX0pPSU5fTk9OX0FWQ0hBVFJPT01fV0lUSE9VVF9MT0dJTjpcIumdniBBVkNoYXRSb29tIOexu+Wei+eahOe+pOe7hOS4jeWFgeiuuOWMv+WQjeWKoOe+pO+8jOivt+WFiOeZu+W9leWQjuWGjeWKoOe+pFwiLENBTk5PVF9LSUNLX01FTUJFUl9JTl9BVkNIQVRST09NOlwi5LiN6IO95ZyoIEFWQ2hhdFJvb20g57G75Z6L55qE576k57uE6Lii5Lq6XCIsTk9UX09XTkVSOlwi5L2g5LiN5piv576k5Li777yM5Y+q5pyJ576k5Li75omN5pyJ5p2D6ZmQ5pON5L2cXCIsQ0FOTk9UX1NFVF9NRU1CRVJfUk9MRV9JTl9XT1JLX0FORF9BVkNIQVRST09NOlwi5LiN6IO95ZyoIFdvcmsgLyBBVkNoYXRSb29tIOexu+Wei+eahOe+pOS4reiuvue9rue+pOaIkOWRmOi6q+S7vVwiLElOVkFMSURfTUVNQkVSX1JPTEU6XCLkuI3lkIjms5XnmoTnvqTmiJDlkZjouqvku73vvIzor7fmo4Dmn6XkvKDlhaXlj4LmlbBcIixDQU5OT1RfU0VUX1NFTEZfTUVNQkVSX1JPTEU6XCLkuI3og73orr7nva7oh6rlt7HnmoTnvqTmiJDlkZjouqvku73vvIzor7fmo4Dmn6XkvKDlhaXlj4LmlbBcIixDQU5OT1RfTVVURV9TRUxGOlwi5LiN6IO95bCG6Ieq5bex56aB6KiA77yM6K+35qOA5p+l5Lyg5YWl5Y+C5pWwXCIsTk9UX01ZX0ZSSUVORDpcIumdnuWlveWPi+WFs+ezu1wiLEFMUkVBRFlfTVlfRlJJRU5EOlwi5bey57uP5piv5aW95Y+L5YWz57O7XCIsRlJJRU5EX0dST1VQX0VYSVNURUQ6XCLlpb3lj4vliIbnu4Tlt7LlrZjlnKhcIixGUklFTkRfR1JPVVBfTk9UX0VYSVNUOlwi5aW95Y+L5YiG57uE5LiN5a2Y5ZyoXCIsRlJJRU5EX0FQUExJQ0FUSU9OX05PVF9FWElTVDpcIuWlveWPi+eUs+ivt+S4jeWtmOWcqFwiLFVQREFURV9QUk9GSUxFX0lOVkFMSURfUEFSQU06XCLkvKDlhaUgdXBkYXRlTXlQcm9maWxlIOaOpeWPo+eahOWPguaVsOaXoOaViFwiLFVQREFURV9QUk9GSUxFX05PX0tFWTpcInVwZGF0ZU15UHJvZmlsZSDml6DmoIfphY3otYTmlpnlrZfmrrXmiJboh6rlrprkuYnotYTmlpnlrZfmrrVcIixBRERfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU06XCLkvKDlhaUgYWRkVG9CbGFja2xpc3Qg5o6l5Y+j55qE5Y+C5pWw5peg5pWIXCIsREVMX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNOlwi5Lyg5YWlIHJlbW92ZUZyb21CbGFja2xpc3Qg5o6l5Y+j55qE5Y+C5pWw5peg5pWIXCIsQ0FOTk9UX0FERF9TRUxGX1RPX0JMQUNLTElTVDpcIuS4jeiDveaLiem7keiHquW3sVwiLEFERF9GUklFTkRfSU5WQUxJRF9QQVJBTTpcIuS8oOWFpSBhZGRGcmllbmQg5o6l5Y+j55qE5Y+C5pWw5peg5pWIXCIsTkVUV09SS19FUlJPUjpcIue9kee7nOmUmeivr1wiLE5FVFdPUktfVElNRU9VVDpcIuivt+axgui2heaXtlwiLE5FVFdPUktfQkFTRV9PUFRJT05TX05PX1VSTDpcIue9kee7nOWxguWIneWni+WMlumUmeivr++8jOe8uuWwkSBVUkwg5Y+C5pWwXCIsTkVUV09SS19VTkRFRklORURfU0VSVkVSX05BTUU6XCLmiZPljIXplJnor6/vvIzmnKrlrprkuYnnmoQgc2VydmVyTmFtZVwiLE5FVFdPUktfUEFDS0FHRV9VTkRFRklORUQ6XCLmnKrlrprkuYnnmoQgcGFja2FnZUNvbmZpZ1wiLE5PX05FVFdPUks6XCLmnKrov57mjqXliLDnvZHnu5xcIixDT05WRVJUT1JfSVJSRUdVTEFSX1BBUkFNUzpcIuS4jeinhOiMg+eahOWPguaVsOWQjeensFwiLE5PVElDRV9SVU5MT09QX1VORVhQRUNURURfQ09ORElUSU9OOlwi5oSP5paZ5aSW55qE6YCa55+l5p2h5Lu2XCIsTk9USUNFX1JVTkxPT1BfT0ZGU0VUX0xPU1Q6XCJfc3luY09mZnNldCDkuKLlpLFcIixHRVRfTE9OR1BPTExfSURfRkFJTEVEOlwi6I635Y+WIGxvbmdwb2xsaW5nIGlkIOWksei0pVwiLFVOQ0FVR0hUX0VSUk9SOlwi5pyq57uP5piO56Gu5a6a5LmJ55qE6ZSZ6K+vXCIsSU5WQUxJRF9PUEVSQVRJT046XCLml6DmlYjmk43kvZzvvIzlpoLosIPnlKjkuobmnKrlrprkuYnmiJbogIXmnKrlrp7njrDnmoTmlrnms5XnrYlcIixDQU5OT1RfRklORF9QUk9UT0NPTDpcIuaXoOazleaJvuWIsOWNj+iurlwiLENBTk5PVF9GSU5EX01PRFVMRTpcIuaXoOazleaJvuWIsOaooeWdl++8jOivt+WPguiAg++8mmh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi90dXRvcmlhbC0wMy1zbnMuaHRtbFwiLFNES19JU19OT1RfUkVBRFk6XCLmjqXlj6PpnIDopoEgU0RLIOWkhOS6jiByZWFkeSDnirbmgIHlkI7miY3og73osIPnlKhcIixMT0dHSU5HOlwi55So5oi35q2j5Zyo55m75b2V5LitXCIsTE9HSU5fRkFJTEVEOlwi55So5oi355m75b2V5aSx6LSlXCIsS0lDS0VEX09VVF9NVUxUX0RFVklDRTpcIueUqOaIt+Wkmue7iOerr+eZu+W9leiiq+i4ouWHulwiLEtJQ0tFRF9PVVRfTVVMVF9BQ0NPVU5UOlwi55So5oi35aSa5a6e5L6L55m75b2V6KKr6Lii5Ye6XCIsS0lDS0VEX09VVF9VU0VSU0lHX0VYUElSRUQ6XCLnlKjmiLcgdXNlclNpZyDov4fmnJ/ooqvouKLlh7pcIixMT0dHRURfT1VUOlwi55So5oi35bey55m75Ye6XCIsT1ZFUl9GUkVRVUVOQ1lfTElNSVQ6XCLotoXlh7ogU0RLIOmikeeOh+aOp+WItlwiLExPTkdfUE9MTF9LSUNLX09VVDpcIuajgOa1i+WIsOWkmuS4qiB3ZWIg5a6e5L6L55m75b2V77yM5raI5oGv6YCa6YGT5LiL57q/XCIsT1BFTl9TRVJWSUNFX09WRVJMT0FEX0VSUk9SOlwi5ZCO5Y+w5pyN5Yqh5q2j5b+Z77yM6K+356iN5ZCO5YaN6K+VXCIsTUVTU0FHRV9BMktFWV9FWFBJUkVEOlwi5raI5oGv6ZSZ6K+v56CB77yaVXNlclNpZyDmiJYgQTIg5aSx5pWI44CCXCIsQUNDT1VOVF9BMktFWV9FWFBJUkVEOlwi5biQ5Y+36ZSZ6K+v56CB77yaVXNlclNpZyDlt7Lov4fmnJ/vvIzor7fph43mlrDnlJ/miJDjgILlu7rorq4gVXNlclNpZyDmnInmlYjmnJ/orr7nva7kuI3lsI/kuo4yNOWwj+aXtuOAglwiLExPTkdfUE9MTF9BUElfUEFSQU1fRVJST1I6XCJsb25nUG9sbCBBUEkgcGFyYW1ldGVycyBlcnJvclwifSxYZD1cIm5ldHdvcmtSVFRcIixRZD1cIm1lc3NhZ2VFMkVEZWxheVwiLFpkPVwic2VuZE1lc3NhZ2VDMkNcIixlcD1cInNlbmRNZXNzYWdlR3JvdXBcIix0cD1cInNlbmRNZXNzYWdlR3JvdXBBVlwiLG5wPVwic2VuZE1lc3NhZ2VSaWNoTWVkaWFcIixvcD1cImNvc1VwbG9hZFwiLHJwPVwibWVzc2FnZVJlY2VpdmVkR3JvdXBcIixhcD1cIm1lc3NhZ2VSZWNlaXZlZEdyb3VwQVZQdXNoXCIsc3A9XCJtZXNzYWdlUmVjZWl2ZWRHcm91cEFWUHVsbFwiLGlwPShUbih0bD17fSxYZCwyKSxUbih0bCxRZCwzKSxUbih0bCxaZCw0KSxUbih0bCxlcCw1KSxUbih0bCx0cCw2KSxUbih0bCxucCw3KSxUbih0bCxycCw4KSxUbih0bCxhcCw5KSxUbih0bCxzcCwxMCksVG4odGwsb3AsMTEpLHRsKSxjcD17aW5mbzo0LHdhcm5pbmc6NSxlcnJvcjo2fSx1cD17d2lmaToxLFwiMmdcIjoyLFwiM2dcIjozLFwiNGdcIjo0LFwiNWdcIjo1LHVua25vd246Nixub25lOjcsb25saW5lOjh9LGxwPXtsb2dpbjo0fSxkcD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLmV2ZW50VHlwZT1scFt0XXx8MCx0aGlzLnRpbWVzdGFtcD0wLHRoaXMubmV0d29ya1R5cGU9OCx0aGlzLmNvZGU9MCx0aGlzLm1lc3NhZ2U9XCJcIix0aGlzLm1vcmVNZXNzYWdlPVwiXCIsdGhpcy5leHRlbnNpb249dCx0aGlzLmNvc3RUaW1lPTAsdGhpcy5kdXBsaWNhdGU9ITEsdGhpcy5sZXZlbD00LHRoaXMudWlQbGF0Zm9ybT12b2lkIDAsdGhpcy5fc2VudEZsYWc9ITEsdGhpcy5fc3RhcnR0cz1XaSgpfXJldHVybiBFbihlLFt7a2V5OlwidXBkYXRlVGltZVN0YW1wXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRpbWVzdGFtcD1XaSgpfX0se2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3N0YXJ0dHM9ZSx0aGlzfX0se2tleTpcImVuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF07aWYoIXRoaXMuX3NlbnRGbGFnKXt2YXIgbj1XaSgpOzA9PT10aGlzLmNvc3RUaW1lJiYodGhpcy5jb3N0VGltZT1uLXRoaXMuX3N0YXJ0dHMpLHRoaXMuc2V0TW9yZU1lc3NhZ2UoXCJzdGFydHRzOlwiLmNvbmNhdCh0aGlzLl9zdGFydHRzLFwiIGVuZHRzOlwiKS5jb25jYXQobikpLHQ/KHRoaXMuX3NlbnRGbGFnPSEwLHRoaXMuX2V2ZW50U3RhdE1vZHVsZSYmdGhpcy5fZXZlbnRTdGF0TW9kdWxlLnB1c2hJbih0aGlzKSk6c2V0VGltZW91dCgoZnVuY3Rpb24oKXtlLl9zZW50RmxhZz0hMCxlLl9ldmVudFN0YXRNb2R1bGUmJmUuX2V2ZW50U3RhdE1vZHVsZS5wdXNoSW4oZSl9KSwwKX19fSx7a2V5Olwic2V0RXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvcj8odGhpcy5fc2VudEZsYWd8fCh0aGlzLnNldE5ldHdvcmtUeXBlKG4pLHQ/KGUuY29kZSYmdGhpcy5zZXRDb2RlKGUuY29kZSksZS5tZXNzYWdlJiZ0aGlzLnNldE1vcmVNZXNzYWdlKGUubWVzc2FnZSkpOih0aGlzLnNldENvZGUoemQuTk9fTkVUV09SSyksdGhpcy5zZXRNb3JlTWVzc2FnZShKZC5OT19ORVRXT1JLKSksdGhpcy5zZXRMZXZlbChcImVycm9yXCIpKSx0aGlzKTooUWkud2FybihcIlNTT0xvZ0RhdGEuc2V0RXJyb3IgdmFsdWUgbm90IGluc3RhbmNlb2YgRXJyb3IsIHBsZWFzZSBjaGVjayFcIiksdGhpcyl9fSx7a2V5Olwic2V0Q29kZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnYyhlKXx8dGhpcy5fc2VudEZsYWd8fChcIkVDT05OQUJPUlRFRFwiPT09ZSYmKHRoaXMuY29kZT0xMDMpLGNjKGUpP3RoaXMuY29kZT1lOlFpLndhcm4oXCJTU09Mb2dEYXRhLnNldENvZGUgdmFsdWUgbm90IGEgbnVtYmVyLCBwbGVhc2UgY2hlY2shXCIsZSxNbihlKSkpLHRoaXN9fSx7a2V5Olwic2V0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnYyhlKXx8dGhpcy5fc2VudEZsYWd8fChjYyhlKSYmKHRoaXMubWVzc2FnZT1lLnRvU3RyaW5nKCkpLHVjKGUpJiYodGhpcy5tZXNzYWdlPWUpKSx0aGlzfX0se2tleTpcInNldENvc3RUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29zdFRpbWU9ZSx0aGlzfX0se2tleTpcInNldExldmVsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGdjKGUpfHx0aGlzLl9zZW50RmxhZ3x8KHRoaXMubGV2ZWw9Y3BbZV0pLHRoaXN9fSx7a2V5Olwic2V0TW9yZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gSmModGhpcy5tb3JlTWVzc2FnZSk/dGhpcy5tb3JlTWVzc2FnZT1cIlwiLmNvbmNhdChlKTp0aGlzLm1vcmVNZXNzYWdlKz1cIiBcIi5jb25jYXQoZSksdGhpc319LHtrZXk6XCJzZXROZXR3b3JrVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGdjKGUpKVFpLndhcm4oXCJTU09Mb2dEYXRhLnNldE5ldHdvcmtUeXBlIHZhbHVlIGlzIHVuZGVmaW5lZCwgcGxlYXNlIGNoZWNrIVwiKTtlbHNle3ZhciB0PXVwW2UudG9Mb3dlckNhc2UoKV07Z2ModCl8fCh0aGlzLm5ldHdvcmtUeXBlPXQpfXJldHVybiB0aGlzfX0se2tleTpcImdldFN0YXJ0VHNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFydHRzfX0se2tleTpcInNldFVJUGxhdGZvcm1cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnVpUGxhdGZvcm09ZX19XSxbe2tleTpcImJpbmRFdmVudFN0YXRNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbih0KXtlLnByb3RvdHlwZS5fZXZlbnRTdGF0TW9kdWxlPXR9fV0pLGV9KCkscHA9XCJzZGtDb25zdHJ1Y3RcIixncD1cInNka1JlYWR5XCIsaHA9XCJsb2dpblwiLGZwPVwibG9nb3V0XCIsX3A9XCJraWNrZWRPdXRcIixtcD1cInJlZ2lzdGVyUGx1Z2luXCIsdnA9XCJraWNrT3RoZXJcIixNcD1cIndzQ29ubmVjdFwiLHlwPVwid3NPbk9wZW5cIixJcD1cIndzT25DbG9zZVwiLEVwPVwid3NPbkVycm9yXCIsVHA9XCJuZXR3b3JrQ2hhbmdlXCIsU3A9XCJnZXRDb3NBdXRoS2V5XCIsQ3A9XCJnZXRDb3NQcmVTaWdVcmxcIixBcD1cImdldFNuYXBzaG90SW5mb1wiLERwPVwidXBsb2FkXCIsTnA9XCJzZW5kTWVzc2FnZVwiLGtwPVwic2VuZE1lc3NhZ2VXaXRoUmVjZWlwdFwiLE9wPVwiZ2V0QzJDUm9hbWluZ01lc3NhZ2VzXCIsUnA9XCJnZXRHcm91cFJvYW1pbmdNZXNzYWdlc1wiLExwPVwiZ2V0UmVhZFJlY2VpcHRcIixicD1cImdldFJlYWRSZWNlaXB0RGV0YWlsXCIsd3A9XCJzZW5kUmVhZFJlY2VpcHRcIixHcD1cInJldm9rZU1lc3NhZ2VcIixQcD1cImRlbGV0ZU1lc3NhZ2VcIixVcD1cInNldEMyQ01lc3NhZ2VSZWFkXCIsRnA9XCJzZXRHcm91cE1lc3NhZ2VSZWFkXCIscXA9XCJlbXB0eU1lc3NhZ2VCb2R5XCIseHA9XCJnZXRQZWVyUmVhZFRpbWVcIixWcD1cInVwbG9hZE1lcmdlck1lc3NhZ2VcIixLcD1cImRvd25sb2FkTWVyZ2VyTWVzc2FnZVwiLEJwPVwianNvblBhcnNlRXJyb3JcIixIcD1cIm1lc3NhZ2VFMkVEZWxheUV4Y2VwdGlvblwiLGpwPVwiZ2V0Q29udmVyc2F0aW9uTGlzdFwiLFdwPVwiZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiLFlwPVwiZGVsZXRlQ29udmVyc2F0aW9uXCIsJHA9XCJwaW5Db252ZXJzYXRpb25cIix6cD1cImdldENvbnZlcnNhdGlvbkxpc3RJblN0b3JhZ2VcIixKcD1cInN5bmNDb252ZXJzYXRpb25MaXN0XCIsWHA9XCJzZXRBbGxNZXNzYWdlUmVhZFwiLFFwPVwiY3JlYXRlR3JvdXBcIixacD1cImFwcGx5Sm9pbkdyb3VwXCIsZWc9XCJxdWl0R3JvdXBcIix0Zz1cInNlYXJjaEdyb3VwQnlJRFwiLG5nPVwiY2hhbmdlR3JvdXBPd25lclwiLG9nPVwiaGFuZGxlR3JvdXBBcHBsaWNhdGlvblwiLHJnPVwiaGFuZGxlR3JvdXBJbnZpdGF0aW9uXCIsYWc9XCJzZXRNZXNzYWdlUmVtaW5kVHlwZVwiLHNnPVwiZGlzbWlzc0dyb3VwXCIsaWc9XCJ1cGRhdGVHcm91cFByb2ZpbGVcIixjZz1cImdldEdyb3VwTGlzdFwiLHVnPVwiZ2V0R3JvdXBQcm9maWxlXCIsbGc9XCJnZXRHcm91cExpc3RJblN0b3JhZ2VcIixkZz1cImdldEdyb3VwTGFzdFNlcXVlbmNlXCIscGc9XCJnZXRHcm91cE1pc3NpbmdNZXNzYWdlXCIsZ2c9XCJwYWdpbmdHZXRHcm91cExpc3RcIixoZz1cImdldEdyb3VwU2ltcGxpZmllZEluZm9cIixmZz1cImpvaW5XaXRob3V0QXV0aFwiLF9nPVwiaW5pdEdyb3VwQXR0cmlidXRlc1wiLG1nPVwic2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmc9XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIixNZz1cImdldEdyb3VwQXR0cmlidXRlc1wiLHlnPVwiZ2V0R3JvdXBNZW1iZXJMaXN0XCIsSWc9XCJnZXRHcm91cE1lbWJlclByb2ZpbGVcIixFZz1cImFkZEdyb3VwTWVtYmVyXCIsVGc9XCJkZWxldGVHcm91cE1lbWJlclwiLFNnPVwic2V0R3JvdXBNZW1iZXJNdXRlVGltZVwiLENnPVwic2V0R3JvdXBNZW1iZXJOYW1lQ2FyZFwiLEFnPVwic2V0R3JvdXBNZW1iZXJSb2xlXCIsRGc9XCJzZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkXCIsTmc9XCJnZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIsa2c9XCJsb25nUG9sbGluZ0FWRXJyb3JcIixPZz1cIm1lc3NhZ2VMb3NzXCIsUmc9XCJtZXNzYWdlU3RhY2tlZFwiLExnPVwiZ2V0VXNlclByb2ZpbGVcIixiZz1cInVwZGF0ZU15UHJvZmlsZVwiLHdnPVwiZ2V0QmxhY2tsaXN0XCIsR2c9XCJhZGRUb0JsYWNrbGlzdFwiLFBnPVwicmVtb3ZlRnJvbUJsYWNrbGlzdFwiLFVnPVwiY2FsbGJhY2tGdW5jdGlvbkVycm9yXCIsRmc9XCJmZXRjaENsb3VkQ29udHJvbENvbmZpZ1wiLHFnPVwicHVzaGVkQ2xvdWRDb250cm9sQ29uZmlnXCIseGc9XCJmZXRjaENvbW1lcmNpYWxDb25maWdcIixWZz1cInB1c2hlZENvbW1lcmNpYWxDb25maWdcIixLZz1cImVycm9yXCIsQmc9XCJsYXN0TWVzc2FnZU5vdEV4aXN0XCIsSGc9Yy5mLGpnPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtmb3IodmFyIG4sbz1mKHQpLHI9RXQobykscz1yLmxlbmd0aCxpPTAsYz1bXTtzPmk7KW49cltpKytdLGEmJiFIZy5jYWxsKG8sbil8fGMucHVzaChlP1tuLG9bbl1dOm9bbl0pO3JldHVybiBjfX0sV2c9e2VudHJpZXM6amcoITApLHZhbHVlczpqZyghMSl9LnZhbHVlcztrZSh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMH0se3ZhbHVlczpmdW5jdGlvbihlKXtyZXR1cm4gV2coZSl9fSk7dmFyIFlnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMudHlwZT1Zbi5NU0dfVEVYVCx0aGlzLmNvbnRlbnQ9e3RleHQ6dC50ZXh0fHxcIlwifX1yZXR1cm4gRW4oZSxbe2tleTpcInNldFRleHRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbnRlbnQudGV4dD1lfX0se2tleTpcInNlbmRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuY29udGVudC50ZXh0Lmxlbmd0aH19XSksZX0oKSwkZz1PYmplY3QuYXNzaWduLHpnPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxKZz0hJGd8fHIoKGZ1bmN0aW9uKCl7aWYoYSYmMSE9PSRnKHtiOjF9LCRnKHpnKHt9LFwiYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3pnKHRoaXMsXCJiXCIse3ZhbHVlOjMsZW51bWVyYWJsZTohMX0pfX0pLHtiOjJ9KSkuYilyZXR1cm4hMDt2YXIgZT17fSx0PXt9LG49U3ltYm9sKCk7cmV0dXJuIGVbbl09NyxcImFiY2RlZmdoaWprbG1ub3BxcnN0XCIuc3BsaXQoXCJcIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXT1lfSkpLDchPSRnKHt9LGUpW25dfHxcImFiY2RlZmdoaWprbG1ub3BxcnN0XCIhPUV0KCRnKHt9LHQpKS5qb2luKFwiXCIpfSkpP2Z1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPUxlKGUpLG89YXJndW1lbnRzLmxlbmd0aCxyPTEscz12ZS5mLGk9Yy5mO28+cjspZm9yKHZhciB1LGw9Zyhhcmd1bWVudHNbcisrXSksZD1zP0V0KGwpLmNvbmNhdChzKGwpKTpFdChsKSxwPWQubGVuZ3RoLGg9MDtwPmg7KXU9ZFtoKytdLGEmJiFpLmNhbGwobCx1KXx8KG5bdV09bFt1XSk7cmV0dXJuIG59OiRnO2tlKHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLGZvcmNlZDpPYmplY3QuYXNzaWduIT09Smd9LHthc3NpZ246Smd9KTt2YXIgWGc9cWUoXCJpdGVyYXRvclwiKSxRZz0hcigoZnVuY3Rpb24oKXt2YXIgZT1uZXcgVVJMKFwiYj9hPTEmYj0yJmM9M1wiLFwiaHR0cDovL2FcIiksdD1lLnNlYXJjaFBhcmFtcyxuPVwiXCI7cmV0dXJuIGUucGF0aG5hbWU9XCJjJTIwZFwiLHQuZm9yRWFjaCgoZnVuY3Rpb24oZSxvKXt0LmRlbGV0ZShcImJcIiksbis9bytlfSkpLCF0LnNvcnR8fFwiaHR0cDovL2EvYyUyMGQ/YT0xJmM9M1wiIT09ZS5ocmVmfHxcIjNcIiE9PXQuZ2V0KFwiY1wiKXx8XCJhPTFcIiE9PVN0cmluZyhuZXcgVVJMU2VhcmNoUGFyYW1zKFwiP2E9MVwiKSl8fCF0W1hnXXx8XCJhXCIhPT1uZXcgVVJMKFwiaHR0cHM6Ly9hQGJcIikudXNlcm5hbWV8fFwiYlwiIT09bmV3IFVSTFNlYXJjaFBhcmFtcyhuZXcgVVJMU2VhcmNoUGFyYW1zKFwiYT1iXCIpKS5nZXQoXCJhXCIpfHxcInhuLS1lMWF5YmNcIiE9PW5ldyBVUkwoXCJodHRwOi8v0YLQtdGB0YJcIikuaG9zdHx8XCIjJUQwJUIxXCIhPT1uZXcgVVJMKFwiaHR0cDovL2Ej0LFcIikuaGFzaHx8XCJhMWMzXCIhPT1ufHxcInhcIiE9PW5ldyBVUkwoXCJodHRwOi8veFwiLHZvaWQgMCkuaG9zdH0pKSxaZz0vW15cXDAtXFx1MDA3RV0vLGVoPS9bLlxcdTMwMDJcXHVGRjBFXFx1RkY2MV0vZyx0aD1cIk92ZXJmbG93OiBpbnB1dCBuZWVkcyB3aWRlciBpbnRlZ2VycyB0byBwcm9jZXNzXCIsbmg9TWF0aC5mbG9vcixvaD1TdHJpbmcuZnJvbUNoYXJDb2RlLHJoPWZ1bmN0aW9uKGUpe3JldHVybiBlKzIyKzc1KihlPDI2KX0sYWg9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPTA7Zm9yKGU9bj9uaChlLzcwMCk6ZT4+MSxlKz1uaChlL3QpO2U+NDU1O28rPTM2KWU9bmgoZS8zNSk7cmV0dXJuIG5oKG8rMzYqZS8oZSszOCkpfSxzaD1mdW5jdGlvbihlKXt2YXIgdCxuLG89W10scj0oZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0wLG89ZS5sZW5ndGg7bjxvOyl7dmFyIHI9ZS5jaGFyQ29kZUF0KG4rKyk7aWYocj49NTUyOTYmJnI8PTU2MzE5JiZuPG8pe3ZhciBhPWUuY2hhckNvZGVBdChuKyspOzU2MzIwPT0oNjQ1MTImYSk/dC5wdXNoKCgoMTAyMyZyKTw8MTApKygxMDIzJmEpKzY1NTM2KToodC5wdXNoKHIpLG4tLSl9ZWxzZSB0LnB1c2gocil9cmV0dXJuIHR9KGUpKS5sZW5ndGgsYT0xMjgscz0wLGk9NzI7Zm9yKHQ9MDt0PGUubGVuZ3RoO3QrKykobj1lW3RdKTwxMjgmJm8ucHVzaChvaChuKSk7dmFyIGM9by5sZW5ndGgsdT1jO2ZvcihjJiZvLnB1c2goXCItXCIpO3U8cjspe3ZhciBsPTIxNDc0ODM2NDc7Zm9yKHQ9MDt0PGUubGVuZ3RoO3QrKykobj1lW3RdKT49YSYmbjxsJiYobD1uKTt2YXIgZD11KzE7aWYobC1hPm5oKCgyMTQ3NDgzNjQ3LXMpL2QpKXRocm93IFJhbmdlRXJyb3IodGgpO2ZvcihzKz0obC1hKSpkLGE9bCx0PTA7dDxlLmxlbmd0aDt0Kyspe2lmKChuPWVbdF0pPGEmJisrcz4yMTQ3NDgzNjQ3KXRocm93IFJhbmdlRXJyb3IodGgpO2lmKG49PWEpe2Zvcih2YXIgcD1zLGc9MzY7O2crPTM2KXt2YXIgaD1nPD1pPzE6Zz49aSsyNj8yNjpnLWk7aWYocDxoKWJyZWFrO3ZhciBmPXAtaCxfPTM2LWg7by5wdXNoKG9oKHJoKGgrZiVfKSkpLHA9bmgoZi9fKX1vLnB1c2gob2gocmgocCkpKSxpPWFoKHMsZCx1PT1jKSxzPTAsKyt1fX0rK3MsKythfXJldHVybiBvLmpvaW4oXCJcIil9LGloPWZ1bmN0aW9uKGUpe3ZhciB0PWd0KGUpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKFN0cmluZyhlKStcIiBpcyBub3QgaXRlcmFibGVcIik7cmV0dXJuIEEodC5jYWxsKGUpKX0sY2g9bmUoXCJmZXRjaFwiKSx1aD1uZShcIkhlYWRlcnNcIiksbGg9cWUoXCJpdGVyYXRvclwiKSxkaD1RLnNldCxwaD1RLmdldHRlckZvcihcIlVSTFNlYXJjaFBhcmFtc1wiKSxnaD1RLmdldHRlckZvcihcIlVSTFNlYXJjaFBhcmFtc0l0ZXJhdG9yXCIpLGhoPS9cXCsvZyxmaD1BcnJheSg0KSxfaD1mdW5jdGlvbihlKXtyZXR1cm4gZmhbZS0xXXx8KGZoW2UtMV09UmVnRXhwKFwiKCg/OiVbXFxcXGRhLWZdezJ9KXtcIitlK1wifSlcIixcImdpXCIpKX0sbWg9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZSl9Y2F0Y2goc0kpe3JldHVybiBlfX0sdmg9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKGhoLFwiIFwiKSxuPTQ7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQodCl9Y2F0Y2goc0kpe2Zvcig7bjspdD10LnJlcGxhY2UoX2gobi0tKSxtaCk7cmV0dXJuIHR9fSxNaD0vWyEnKCl+XXwlMjAvZyx5aD17XCIhXCI6XCIlMjFcIixcIidcIjpcIiUyN1wiLFwiKFwiOlwiJTI4XCIsXCIpXCI6XCIlMjlcIixcIn5cIjpcIiU3RVwiLFwiJTIwXCI6XCIrXCJ9LEloPWZ1bmN0aW9uKGUpe3JldHVybiB5aFtlXX0sRWg9ZnVuY3Rpb24oZSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKS5yZXBsYWNlKE1oLEloKX0sVGg9ZnVuY3Rpb24oZSx0KXtpZih0KWZvcih2YXIgbixvLHI9dC5zcGxpdChcIiZcIiksYT0wO2E8ci5sZW5ndGg7KShuPXJbYSsrXSkubGVuZ3RoJiYobz1uLnNwbGl0KFwiPVwiKSxlLnB1c2goe2tleTp2aChvLnNoaWZ0KCkpLHZhbHVlOnZoKG8uam9pbihcIj1cIikpfSkpfSxTaD1mdW5jdGlvbihlKXt0aGlzLmVudHJpZXMubGVuZ3RoPTAsVGgodGhpcy5lbnRyaWVzLGUpfSxDaD1mdW5jdGlvbihlLHQpe2lmKGU8dCl0aHJvdyBUeXBlRXJyb3IoXCJOb3QgZW5vdWdoIGFyZ3VtZW50c1wiKX0sQWg9cm4oKGZ1bmN0aW9uKGUsdCl7ZGgodGhpcyx7dHlwZTpcIlVSTFNlYXJjaFBhcmFtc0l0ZXJhdG9yXCIsaXRlcmF0b3I6aWgocGgoZSkuZW50cmllcyksa2luZDp0fSl9KSxcIkl0ZXJhdG9yXCIsKGZ1bmN0aW9uKCl7dmFyIGU9Z2godGhpcyksdD1lLmtpbmQsbj1lLml0ZXJhdG9yLm5leHQoKSxvPW4udmFsdWU7cmV0dXJuIG4uZG9uZXx8KG4udmFsdWU9XCJrZXlzXCI9PT10P28ua2V5OlwidmFsdWVzXCI9PT10P28udmFsdWU6W28ua2V5LG8udmFsdWVdKSxufSkpLERoPWZ1bmN0aW9uKCl7a3IodGhpcyxEaCxcIlVSTFNlYXJjaFBhcmFtc1wiKTt2YXIgZSx0LG4sbyxyLGEscyxpLGMsdT1hcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCxsPXRoaXMsZD1bXTtpZihkaChsLHt0eXBlOlwiVVJMU2VhcmNoUGFyYW1zXCIsZW50cmllczpkLHVwZGF0ZVVSTDpmdW5jdGlvbigpe30sdXBkYXRlU2VhcmNoUGFyYW1zOlNofSksdm9pZCAwIT09dSlpZihfKHUpKWlmKFwiZnVuY3Rpb25cIj09dHlwZW9mKGU9Z3QodSkpKWZvcihuPSh0PWUuY2FsbCh1KSkubmV4dDshKG89bi5jYWxsKHQpKS5kb25lOyl7aWYoKHM9KGE9KHI9aWgoQShvLnZhbHVlKSkpLm5leHQpLmNhbGwocikpLmRvbmV8fChpPWEuY2FsbChyKSkuZG9uZXx8IWEuY2FsbChyKS5kb25lKXRocm93IFR5cGVFcnJvcihcIkV4cGVjdGVkIHNlcXVlbmNlIHdpdGggbGVuZ3RoIDJcIik7ZC5wdXNoKHtrZXk6cy52YWx1ZStcIlwiLHZhbHVlOmkudmFsdWUrXCJcIn0pfWVsc2UgZm9yKGMgaW4gdSlNKHUsYykmJmQucHVzaCh7a2V5OmMsdmFsdWU6dVtjXStcIlwifSk7ZWxzZSBUaChkLFwic3RyaW5nXCI9PXR5cGVvZiB1P1wiP1wiPT09dS5jaGFyQXQoMCk/dS5zbGljZSgxKTp1OnUrXCJcIil9LE5oPURoLnByb3RvdHlwZTtBcihOaCx7YXBwZW5kOmZ1bmN0aW9uKGUsdCl7Q2goYXJndW1lbnRzLmxlbmd0aCwyKTt2YXIgbj1waCh0aGlzKTtuLmVudHJpZXMucHVzaCh7a2V5OmUrXCJcIix2YWx1ZTp0K1wiXCJ9KSxuLnVwZGF0ZVVSTCgpfSxkZWxldGU6ZnVuY3Rpb24oZSl7Q2goYXJndW1lbnRzLmxlbmd0aCwxKTtmb3IodmFyIHQ9cGgodGhpcyksbj10LmVudHJpZXMsbz1lK1wiXCIscj0wO3I8bi5sZW5ndGg7KW5bcl0ua2V5PT09bz9uLnNwbGljZShyLDEpOnIrKzt0LnVwZGF0ZVVSTCgpfSxnZXQ6ZnVuY3Rpb24oZSl7Q2goYXJndW1lbnRzLmxlbmd0aCwxKTtmb3IodmFyIHQ9cGgodGhpcykuZW50cmllcyxuPWUrXCJcIixvPTA7bzx0Lmxlbmd0aDtvKyspaWYodFtvXS5rZXk9PT1uKXJldHVybiB0W29dLnZhbHVlO3JldHVybiBudWxsfSxnZXRBbGw6ZnVuY3Rpb24oZSl7Q2goYXJndW1lbnRzLmxlbmd0aCwxKTtmb3IodmFyIHQ9cGgodGhpcykuZW50cmllcyxuPWUrXCJcIixvPVtdLHI9MDtyPHQubGVuZ3RoO3IrKyl0W3JdLmtleT09PW4mJm8ucHVzaCh0W3JdLnZhbHVlKTtyZXR1cm4gb30saGFzOmZ1bmN0aW9uKGUpe0NoKGFyZ3VtZW50cy5sZW5ndGgsMSk7Zm9yKHZhciB0PXBoKHRoaXMpLmVudHJpZXMsbj1lK1wiXCIsbz0wO288dC5sZW5ndGg7KWlmKHRbbysrXS5rZXk9PT1uKXJldHVybiEwO3JldHVybiExfSxzZXQ6ZnVuY3Rpb24oZSx0KXtDaChhcmd1bWVudHMubGVuZ3RoLDEpO2Zvcih2YXIgbixvPXBoKHRoaXMpLHI9by5lbnRyaWVzLGE9ITEscz1lK1wiXCIsaT10K1wiXCIsYz0wO2M8ci5sZW5ndGg7YysrKShuPXJbY10pLmtleT09PXMmJihhP3Iuc3BsaWNlKGMtLSwxKTooYT0hMCxuLnZhbHVlPWkpKTthfHxyLnB1c2goe2tleTpzLHZhbHVlOml9KSxvLnVwZGF0ZVVSTCgpfSxzb3J0OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLG89cGgodGhpcykscj1vLmVudHJpZXMsYT1yLnNsaWNlKCk7Zm9yKHIubGVuZ3RoPTAsbj0wO248YS5sZW5ndGg7bisrKXtmb3IoZT1hW25dLHQ9MDt0PG47dCsrKWlmKHJbdF0ua2V5PmUua2V5KXtyLnNwbGljZSh0LDAsZSk7YnJlYWt9dD09PW4mJnIucHVzaChlKX1vLnVwZGF0ZVVSTCgpfSxmb3JFYWNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPXBoKHRoaXMpLmVudHJpZXMsbz1SZShlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLDMpLHI9MDtyPG4ubGVuZ3RoOylvKCh0PW5bcisrXSkudmFsdWUsdC5rZXksdGhpcyl9LGtleXM6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFoKHRoaXMsXCJrZXlzXCIpfSx2YWx1ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFoKHRoaXMsXCJ2YWx1ZXNcIil9LGVudHJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFoKHRoaXMsXCJlbnRyaWVzXCIpfX0se2VudW1lcmFibGU6ITB9KSxaKE5oLGxoLE5oLmVudHJpZXMpLFooTmgsXCJ0b1N0cmluZ1wiLChmdW5jdGlvbigpe2Zvcih2YXIgZSx0PXBoKHRoaXMpLmVudHJpZXMsbj1bXSxvPTA7bzx0Lmxlbmd0aDspZT10W28rK10sbi5wdXNoKEVoKGUua2V5KStcIj1cIitFaChlLnZhbHVlKSk7cmV0dXJuIG4uam9pbihcIiZcIil9KSx7ZW51bWVyYWJsZTohMH0pLHRuKERoLFwiVVJMU2VhcmNoUGFyYW1zXCIpLGtlKHtnbG9iYWw6ITAsZm9yY2VkOiFRZ30se1VSTFNlYXJjaFBhcmFtczpEaH0pLFFnfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBjaHx8XCJmdW5jdGlvblwiIT10eXBlb2YgdWh8fGtlKHtnbG9iYWw6ITAsZW51bWVyYWJsZTohMCxmb3JjZWQ6ITB9LHtmZXRjaDpmdW5jdGlvbihlKXt2YXIgdCxuLG8scj1bZV07cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MSYmKHQ9YXJndW1lbnRzWzFdLF8odCkmJihuPXQuYm9keSxcIlVSTFNlYXJjaFBhcmFtc1wiPT09ZHQobikmJigobz10LmhlYWRlcnM/bmV3IHVoKHQuaGVhZGVycyk6bmV3IHVoKS5oYXMoXCJjb250ZW50LXR5cGVcIil8fG8uc2V0KFwiY29udGVudC10eXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOFwiKSx0PWt0KHQse2JvZHk6dSgwLFN0cmluZyhuKSksaGVhZGVyczp1KDAsbyl9KSkpLHIucHVzaCh0KSksY2guYXBwbHkodGhpcyxyKX19KTt2YXIga2gsT2g9e1VSTFNlYXJjaFBhcmFtczpEaCxnZXRTdGF0ZTpwaH0sUmg9anQuY29kZUF0LExoPW8uVVJMLGJoPU9oLlVSTFNlYXJjaFBhcmFtcyx3aD1PaC5nZXRTdGF0ZSxHaD1RLnNldCxQaD1RLmdldHRlckZvcihcIlVSTFwiKSxVaD1NYXRoLmZsb29yLEZoPU1hdGgucG93LHFoPS9bQS1aYS16XS8seGg9L1tcXGQrXFwtLkEtWmEtel0vLFZoPS9cXGQvLEtoPS9eKDB4fDBYKS8sQmg9L15bMC03XSskLyxIaD0vXlxcZCskLyxqaD0vXltcXGRBLUZhLWZdKyQvLFdoPS9bXFx1MDAwMFxcdTAwMDlcXHUwMDBBXFx1MDAwRCAjJS86P0BbXFxcXF1dLyxZaD0vW1xcdTAwMDBcXHUwMDA5XFx1MDAwQVxcdTAwMEQgIy86P0BbXFxcXF1dLywkaD0vXltcXHUwMDAwLVxcdTAwMUYgXSt8W1xcdTAwMDAtXFx1MDAxRiBdKyQvZyx6aD0vW1xcdTAwMDlcXHUwMDBBXFx1MDAwRF0vZyxKaD1mdW5jdGlvbihlLHQpe3ZhciBuLG8scjtpZihcIltcIj09dC5jaGFyQXQoMCkpe2lmKFwiXVwiIT10LmNoYXJBdCh0Lmxlbmd0aC0xKSlyZXR1cm5cIkludmFsaWQgaG9zdFwiO2lmKCEobj1RaCh0LnNsaWNlKDEsLTEpKSkpcmV0dXJuXCJJbnZhbGlkIGhvc3RcIjtlLmhvc3Q9bn1lbHNlIGlmKHNmKGUpKXtpZih0PWZ1bmN0aW9uKGUpe3ZhciB0LG4sbz1bXSxyPWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKGVoLFwiLlwiKS5zcGxpdChcIi5cIik7Zm9yKHQ9MDt0PHIubGVuZ3RoO3QrKyluPXJbdF0sby5wdXNoKFpnLnRlc3Qobik/XCJ4bi0tXCIrc2gobik6bik7cmV0dXJuIG8uam9pbihcIi5cIil9KHQpLFdoLnRlc3QodCkpcmV0dXJuXCJJbnZhbGlkIGhvc3RcIjtpZihudWxsPT09KG49WGgodCkpKXJldHVyblwiSW52YWxpZCBob3N0XCI7ZS5ob3N0PW59ZWxzZXtpZihZaC50ZXN0KHQpKXJldHVyblwiSW52YWxpZCBob3N0XCI7Zm9yKG49XCJcIixvPWh0KHQpLHI9MDtyPG8ubGVuZ3RoO3IrKyluKz1yZihvW3JdLGVmKTtlLmhvc3Q9bn19LFhoPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyLGEscyxpLGM9ZS5zcGxpdChcIi5cIik7aWYoYy5sZW5ndGgmJlwiXCI9PWNbYy5sZW5ndGgtMV0mJmMucG9wKCksKHQ9Yy5sZW5ndGgpPjQpcmV0dXJuIGU7Zm9yKG49W10sbz0wO288dDtvKyspe2lmKFwiXCI9PShyPWNbb10pKXJldHVybiBlO2lmKGE9MTAsci5sZW5ndGg+MSYmXCIwXCI9PXIuY2hhckF0KDApJiYoYT1LaC50ZXN0KHIpPzE2Ojgscj1yLnNsaWNlKDg9PWE/MToyKSksXCJcIj09PXIpcz0wO2Vsc2V7aWYoISgxMD09YT9IaDo4PT1hP0JoOmpoKS50ZXN0KHIpKXJldHVybiBlO3M9cGFyc2VJbnQocixhKX1uLnB1c2gocyl9Zm9yKG89MDtvPHQ7bysrKWlmKHM9bltvXSxvPT10LTEpe2lmKHM+PUZoKDI1Niw1LXQpKXJldHVybiBudWxsfWVsc2UgaWYocz4yNTUpcmV0dXJuIG51bGw7Zm9yKGk9bi5wb3AoKSxvPTA7bzxuLmxlbmd0aDtvKyspaSs9bltvXSpGaCgyNTYsMy1vKTtyZXR1cm4gaX0sUWg9ZnVuY3Rpb24oZSl7dmFyIHQsbixvLHIsYSxzLGksYz1bMCwwLDAsMCwwLDAsMCwwXSx1PTAsbD1udWxsLGQ9MCxwPWZ1bmN0aW9uKCl7cmV0dXJuIGUuY2hhckF0KGQpfTtpZihcIjpcIj09cCgpKXtpZihcIjpcIiE9ZS5jaGFyQXQoMSkpcmV0dXJuO2QrPTIsbD0rK3V9Zm9yKDtwKCk7KXtpZig4PT11KXJldHVybjtpZihcIjpcIiE9cCgpKXtmb3IodD1uPTA7bjw0JiZqaC50ZXN0KHAoKSk7KXQ9MTYqdCtwYXJzZUludChwKCksMTYpLGQrKyxuKys7aWYoXCIuXCI9PXAoKSl7aWYoMD09bilyZXR1cm47aWYoZC09bix1PjYpcmV0dXJuO2ZvcihvPTA7cCgpOyl7aWYocj1udWxsLG8+MCl7aWYoIShcIi5cIj09cCgpJiZvPDQpKXJldHVybjtkKyt9aWYoIVZoLnRlc3QocCgpKSlyZXR1cm47Zm9yKDtWaC50ZXN0KHAoKSk7KXtpZihhPXBhcnNlSW50KHAoKSwxMCksbnVsbD09PXIpcj1hO2Vsc2V7aWYoMD09cilyZXR1cm47cj0xMCpyK2F9aWYocj4yNTUpcmV0dXJuO2QrK31jW3VdPTI1NipjW3VdK3IsMiE9KytvJiY0IT1vfHx1Kyt9aWYoNCE9bylyZXR1cm47YnJlYWt9aWYoXCI6XCI9PXAoKSl7aWYoZCsrLCFwKCkpcmV0dXJufWVsc2UgaWYocCgpKXJldHVybjtjW3UrK109dH1lbHNle2lmKG51bGwhPT1sKXJldHVybjtkKyssbD0rK3V9fWlmKG51bGwhPT1sKWZvcihzPXUtbCx1PTc7MCE9dSYmcz4wOylpPWNbdV0sY1t1LS1dPWNbbCtzLTFdLGNbbCstLXNdPWk7ZWxzZSBpZig4IT11KXJldHVybjtyZXR1cm4gY30sWmg9ZnVuY3Rpb24oZSl7dmFyIHQsbixvLHI7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUpe2Zvcih0PVtdLG49MDtuPDQ7bisrKXQudW5zaGlmdChlJTI1NiksZT1VaChlLzI1Nik7cmV0dXJuIHQuam9pbihcIi5cIil9aWYoXCJvYmplY3RcIj09dHlwZW9mIGUpe2Zvcih0PVwiXCIsbz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bnVsbCxuPTEsbz1udWxsLHI9MCxhPTA7YTw4O2ErKykwIT09ZVthXT8ocj5uJiYodD1vLG49ciksbz1udWxsLHI9MCk6KG51bGw9PT1vJiYobz1hKSwrK3IpO3JldHVybiByPm4mJih0PW8sbj1yKSx0fShlKSxuPTA7bjw4O24rKylyJiYwPT09ZVtuXXx8KHImJihyPSExKSxvPT09bj8odCs9bj9cIjpcIjpcIjo6XCIscj0hMCk6KHQrPWVbbl0udG9TdHJpbmcoMTYpLG48NyYmKHQrPVwiOlwiKSkpO3JldHVyblwiW1wiK3QrXCJdXCJ9cmV0dXJuIGV9LGVmPXt9LHRmPUpnKHt9LGVmLHtcIiBcIjoxLCdcIic6MSxcIjxcIjoxLFwiPlwiOjEsXCJgXCI6MX0pLG5mPUpnKHt9LHRmLHtcIiNcIjoxLFwiP1wiOjEsXCJ7XCI6MSxcIn1cIjoxfSksb2Y9Smcoe30sbmYse1wiL1wiOjEsXCI6XCI6MSxcIjtcIjoxLFwiPVwiOjEsXCJAXCI6MSxcIltcIjoxLFwiXFxcXFwiOjEsXCJdXCI6MSxcIl5cIjoxLFwifFwiOjF9KSxyZj1mdW5jdGlvbihlLHQpe3ZhciBuPVJoKGUsMCk7cmV0dXJuIG4+MzImJm48MTI3JiYhTSh0LGUpP2U6ZW5jb2RlVVJJQ29tcG9uZW50KGUpfSxhZj17ZnRwOjIxLGZpbGU6bnVsbCxodHRwOjgwLGh0dHBzOjQ0Myx3czo4MCx3c3M6NDQzfSxzZj1mdW5jdGlvbihlKXtyZXR1cm4gTShhZixlLnNjaGVtZSl9LGNmPWZ1bmN0aW9uKGUpe3JldHVyblwiXCIhPWUudXNlcm5hbWV8fFwiXCIhPWUucGFzc3dvcmR9LHVmPWZ1bmN0aW9uKGUpe3JldHVybiFlLmhvc3R8fGUuY2Fubm90QmVBQmFzZVVSTHx8XCJmaWxlXCI9PWUuc2NoZW1lfSxsZj1mdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiAyPT1lLmxlbmd0aCYmcWgudGVzdChlLmNoYXJBdCgwKSkmJihcIjpcIj09KG49ZS5jaGFyQXQoMSkpfHwhdCYmXCJ8XCI9PW4pfSxkZj1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZS5sZW5ndGg+MSYmbGYoZS5zbGljZSgwLDIpKSYmKDI9PWUubGVuZ3RofHxcIi9cIj09PSh0PWUuY2hhckF0KDIpKXx8XCJcXFxcXCI9PT10fHxcIj9cIj09PXR8fFwiI1wiPT09dCl9LHBmPWZ1bmN0aW9uKGUpe3ZhciB0PWUucGF0aCxuPXQubGVuZ3RoOyFufHxcImZpbGVcIj09ZS5zY2hlbWUmJjE9PW4mJmxmKHRbMF0sITApfHx0LnBvcCgpfSxnZj1mdW5jdGlvbihlKXtyZXR1cm5cIi5cIj09PWV8fFwiJTJlXCI9PT1lLnRvTG93ZXJDYXNlKCl9LGhmPXt9LGZmPXt9LF9mPXt9LG1mPXt9LHZmPXt9LE1mPXt9LHlmPXt9LElmPXt9LEVmPXt9LFRmPXt9LFNmPXt9LENmPXt9LEFmPXt9LERmPXt9LE5mPXt9LGtmPXt9LE9mPXt9LFJmPXt9LExmPXt9LGJmPXt9LHdmPXt9LEdmPWZ1bmN0aW9uKGUsdCxuLG8pe3ZhciByLGEscyxpLGMsdT1ufHxoZixsPTAsZD1cIlwiLHA9ITEsZz0hMSxoPSExO2ZvcihufHwoZS5zY2hlbWU9XCJcIixlLnVzZXJuYW1lPVwiXCIsZS5wYXNzd29yZD1cIlwiLGUuaG9zdD1udWxsLGUucG9ydD1udWxsLGUucGF0aD1bXSxlLnF1ZXJ5PW51bGwsZS5mcmFnbWVudD1udWxsLGUuY2Fubm90QmVBQmFzZVVSTD0hMSx0PXQucmVwbGFjZSgkaCxcIlwiKSksdD10LnJlcGxhY2UoemgsXCJcIikscj1odCh0KTtsPD1yLmxlbmd0aDspe3N3aXRjaChhPXJbbF0sdSl7Y2FzZSBoZjppZighYXx8IXFoLnRlc3QoYSkpe2lmKG4pcmV0dXJuXCJJbnZhbGlkIHNjaGVtZVwiO3U9X2Y7Y29udGludWV9ZCs9YS50b0xvd2VyQ2FzZSgpLHU9ZmY7YnJlYWs7Y2FzZSBmZjppZihhJiYoeGgudGVzdChhKXx8XCIrXCI9PWF8fFwiLVwiPT1hfHxcIi5cIj09YSkpZCs9YS50b0xvd2VyQ2FzZSgpO2Vsc2V7aWYoXCI6XCIhPWEpe2lmKG4pcmV0dXJuXCJJbnZhbGlkIHNjaGVtZVwiO2Q9XCJcIix1PV9mLGw9MDtjb250aW51ZX1pZihuJiYoc2YoZSkhPU0oYWYsZCl8fFwiZmlsZVwiPT1kJiYoY2YoZSl8fG51bGwhPT1lLnBvcnQpfHxcImZpbGVcIj09ZS5zY2hlbWUmJiFlLmhvc3QpKXJldHVybjtpZihlLnNjaGVtZT1kLG4pcmV0dXJuIHZvaWQoc2YoZSkmJmFmW2Uuc2NoZW1lXT09ZS5wb3J0JiYoZS5wb3J0PW51bGwpKTtkPVwiXCIsXCJmaWxlXCI9PWUuc2NoZW1lP3U9RGY6c2YoZSkmJm8mJm8uc2NoZW1lPT1lLnNjaGVtZT91PW1mOnNmKGUpP3U9SWY6XCIvXCI9PXJbbCsxXT8odT12ZixsKyspOihlLmNhbm5vdEJlQUJhc2VVUkw9ITAsZS5wYXRoLnB1c2goXCJcIiksdT1MZil9YnJlYWs7Y2FzZSBfZjppZighb3x8by5jYW5ub3RCZUFCYXNlVVJMJiZcIiNcIiE9YSlyZXR1cm5cIkludmFsaWQgc2NoZW1lXCI7aWYoby5jYW5ub3RCZUFCYXNlVVJMJiZcIiNcIj09YSl7ZS5zY2hlbWU9by5zY2hlbWUsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9by5xdWVyeSxlLmZyYWdtZW50PVwiXCIsZS5jYW5ub3RCZUFCYXNlVVJMPSEwLHU9d2Y7YnJlYWt9dT1cImZpbGVcIj09by5zY2hlbWU/RGY6TWY7Y29udGludWU7Y2FzZSBtZjppZihcIi9cIiE9YXx8XCIvXCIhPXJbbCsxXSl7dT1NZjtjb250aW51ZX11PUVmLGwrKzticmVhaztjYXNlIHZmOmlmKFwiL1wiPT1hKXt1PVRmO2JyZWFrfXU9UmY7Y29udGludWU7Y2FzZSBNZjppZihlLnNjaGVtZT1vLnNjaGVtZSxhPT1raCllLnVzZXJuYW1lPW8udXNlcm5hbWUsZS5wYXNzd29yZD1vLnBhc3N3b3JkLGUuaG9zdD1vLmhvc3QsZS5wb3J0PW8ucG9ydCxlLnBhdGg9by5wYXRoLnNsaWNlKCksZS5xdWVyeT1vLnF1ZXJ5O2Vsc2UgaWYoXCIvXCI9PWF8fFwiXFxcXFwiPT1hJiZzZihlKSl1PXlmO2Vsc2UgaWYoXCI/XCI9PWEpZS51c2VybmFtZT1vLnVzZXJuYW1lLGUucGFzc3dvcmQ9by5wYXNzd29yZCxlLmhvc3Q9by5ob3N0LGUucG9ydD1vLnBvcnQsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9XCJcIix1PWJmO2Vsc2V7aWYoXCIjXCIhPWEpe2UudXNlcm5hbWU9by51c2VybmFtZSxlLnBhc3N3b3JkPW8ucGFzc3dvcmQsZS5ob3N0PW8uaG9zdCxlLnBvcnQ9by5wb3J0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxlLnBhdGgucG9wKCksdT1SZjtjb250aW51ZX1lLnVzZXJuYW1lPW8udXNlcm5hbWUsZS5wYXNzd29yZD1vLnBhc3N3b3JkLGUuaG9zdD1vLmhvc3QsZS5wb3J0PW8ucG9ydCxlLnBhdGg9by5wYXRoLnNsaWNlKCksZS5xdWVyeT1vLnF1ZXJ5LGUuZnJhZ21lbnQ9XCJcIix1PXdmfWJyZWFrO2Nhc2UgeWY6aWYoIXNmKGUpfHxcIi9cIiE9YSYmXCJcXFxcXCIhPWEpe2lmKFwiL1wiIT1hKXtlLnVzZXJuYW1lPW8udXNlcm5hbWUsZS5wYXNzd29yZD1vLnBhc3N3b3JkLGUuaG9zdD1vLmhvc3QsZS5wb3J0PW8ucG9ydCx1PVJmO2NvbnRpbnVlfXU9VGZ9ZWxzZSB1PUVmO2JyZWFrO2Nhc2UgSWY6aWYodT1FZixcIi9cIiE9YXx8XCIvXCIhPWQuY2hhckF0KGwrMSkpY29udGludWU7bCsrO2JyZWFrO2Nhc2UgRWY6aWYoXCIvXCIhPWEmJlwiXFxcXFwiIT1hKXt1PVRmO2NvbnRpbnVlfWJyZWFrO2Nhc2UgVGY6aWYoXCJAXCI9PWEpe3AmJihkPVwiJTQwXCIrZCkscD0hMCxzPWh0KGQpO2Zvcih2YXIgZj0wO2Y8cy5sZW5ndGg7ZisrKXt2YXIgXz1zW2ZdO2lmKFwiOlwiIT1ffHxoKXt2YXIgbT1yZihfLG9mKTtoP2UucGFzc3dvcmQrPW06ZS51c2VybmFtZSs9bX1lbHNlIGg9ITB9ZD1cIlwifWVsc2UgaWYoYT09a2h8fFwiL1wiPT1hfHxcIj9cIj09YXx8XCIjXCI9PWF8fFwiXFxcXFwiPT1hJiZzZihlKSl7aWYocCYmXCJcIj09ZClyZXR1cm5cIkludmFsaWQgYXV0aG9yaXR5XCI7bC09aHQoZCkubGVuZ3RoKzEsZD1cIlwiLHU9U2Z9ZWxzZSBkKz1hO2JyZWFrO2Nhc2UgU2Y6Y2FzZSBDZjppZihuJiZcImZpbGVcIj09ZS5zY2hlbWUpe3U9a2Y7Y29udGludWV9aWYoXCI6XCIhPWF8fGcpe2lmKGE9PWtofHxcIi9cIj09YXx8XCI/XCI9PWF8fFwiI1wiPT1hfHxcIlxcXFxcIj09YSYmc2YoZSkpe2lmKHNmKGUpJiZcIlwiPT1kKXJldHVyblwiSW52YWxpZCBob3N0XCI7aWYobiYmXCJcIj09ZCYmKGNmKGUpfHxudWxsIT09ZS5wb3J0KSlyZXR1cm47aWYoaT1KaChlLGQpKXJldHVybiBpO2lmKGQ9XCJcIix1PU9mLG4pcmV0dXJuO2NvbnRpbnVlfVwiW1wiPT1hP2c9ITA6XCJdXCI9PWEmJihnPSExKSxkKz1hfWVsc2V7aWYoXCJcIj09ZClyZXR1cm5cIkludmFsaWQgaG9zdFwiO2lmKGk9SmgoZSxkKSlyZXR1cm4gaTtpZihkPVwiXCIsdT1BZixuPT1DZilyZXR1cm59YnJlYWs7Y2FzZSBBZjppZighVmgudGVzdChhKSl7aWYoYT09a2h8fFwiL1wiPT1hfHxcIj9cIj09YXx8XCIjXCI9PWF8fFwiXFxcXFwiPT1hJiZzZihlKXx8bil7aWYoXCJcIiE9ZCl7dmFyIHY9cGFyc2VJbnQoZCwxMCk7aWYodj42NTUzNSlyZXR1cm5cIkludmFsaWQgcG9ydFwiO2UucG9ydD1zZihlKSYmdj09PWFmW2Uuc2NoZW1lXT9udWxsOnYsZD1cIlwifWlmKG4pcmV0dXJuO3U9T2Y7Y29udGludWV9cmV0dXJuXCJJbnZhbGlkIHBvcnRcIn1kKz1hO2JyZWFrO2Nhc2UgRGY6aWYoZS5zY2hlbWU9XCJmaWxlXCIsXCIvXCI9PWF8fFwiXFxcXFwiPT1hKXU9TmY7ZWxzZXtpZighb3x8XCJmaWxlXCIhPW8uc2NoZW1lKXt1PVJmO2NvbnRpbnVlfWlmKGE9PWtoKWUuaG9zdD1vLmhvc3QsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9by5xdWVyeTtlbHNlIGlmKFwiP1wiPT1hKWUuaG9zdD1vLmhvc3QsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9XCJcIix1PWJmO2Vsc2V7aWYoXCIjXCIhPWEpe2RmKHIuc2xpY2UobCkuam9pbihcIlwiKSl8fChlLmhvc3Q9by5ob3N0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxwZihlKSksdT1SZjtjb250aW51ZX1lLmhvc3Q9by5ob3N0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxlLnF1ZXJ5PW8ucXVlcnksZS5mcmFnbWVudD1cIlwiLHU9d2Z9fWJyZWFrO2Nhc2UgTmY6aWYoXCIvXCI9PWF8fFwiXFxcXFwiPT1hKXt1PWtmO2JyZWFrfW8mJlwiZmlsZVwiPT1vLnNjaGVtZSYmIWRmKHIuc2xpY2UobCkuam9pbihcIlwiKSkmJihsZihvLnBhdGhbMF0sITApP2UucGF0aC5wdXNoKG8ucGF0aFswXSk6ZS5ob3N0PW8uaG9zdCksdT1SZjtjb250aW51ZTtjYXNlIGtmOmlmKGE9PWtofHxcIi9cIj09YXx8XCJcXFxcXCI9PWF8fFwiP1wiPT1hfHxcIiNcIj09YSl7aWYoIW4mJmxmKGQpKXU9UmY7ZWxzZSBpZihcIlwiPT1kKXtpZihlLmhvc3Q9XCJcIixuKXJldHVybjt1PU9mfWVsc2V7aWYoaT1KaChlLGQpKXJldHVybiBpO2lmKFwibG9jYWxob3N0XCI9PWUuaG9zdCYmKGUuaG9zdD1cIlwiKSxuKXJldHVybjtkPVwiXCIsdT1PZn1jb250aW51ZX1kKz1hO2JyZWFrO2Nhc2UgT2Y6aWYoc2YoZSkpe2lmKHU9UmYsXCIvXCIhPWEmJlwiXFxcXFwiIT1hKWNvbnRpbnVlfWVsc2UgaWYobnx8XCI/XCIhPWEpaWYobnx8XCIjXCIhPWEpe2lmKGEhPWtoJiYodT1SZixcIi9cIiE9YSkpY29udGludWV9ZWxzZSBlLmZyYWdtZW50PVwiXCIsdT13ZjtlbHNlIGUucXVlcnk9XCJcIix1PWJmO2JyZWFrO2Nhc2UgUmY6aWYoYT09a2h8fFwiL1wiPT1hfHxcIlxcXFxcIj09YSYmc2YoZSl8fCFuJiYoXCI/XCI9PWF8fFwiI1wiPT1hKSl7aWYoXCIuLlwiPT09KGM9KGM9ZCkudG9Mb3dlckNhc2UoKSl8fFwiJTJlLlwiPT09Y3x8XCIuJTJlXCI9PT1jfHxcIiUyZSUyZVwiPT09Yz8ocGYoZSksXCIvXCI9PWF8fFwiXFxcXFwiPT1hJiZzZihlKXx8ZS5wYXRoLnB1c2goXCJcIikpOmdmKGQpP1wiL1wiPT1hfHxcIlxcXFxcIj09YSYmc2YoZSl8fGUucGF0aC5wdXNoKFwiXCIpOihcImZpbGVcIj09ZS5zY2hlbWUmJiFlLnBhdGgubGVuZ3RoJiZsZihkKSYmKGUuaG9zdCYmKGUuaG9zdD1cIlwiKSxkPWQuY2hhckF0KDApK1wiOlwiKSxlLnBhdGgucHVzaChkKSksZD1cIlwiLFwiZmlsZVwiPT1lLnNjaGVtZSYmKGE9PWtofHxcIj9cIj09YXx8XCIjXCI9PWEpKWZvcig7ZS5wYXRoLmxlbmd0aD4xJiZcIlwiPT09ZS5wYXRoWzBdOyllLnBhdGguc2hpZnQoKTtcIj9cIj09YT8oZS5xdWVyeT1cIlwiLHU9YmYpOlwiI1wiPT1hJiYoZS5mcmFnbWVudD1cIlwiLHU9d2YpfWVsc2UgZCs9cmYoYSxuZik7YnJlYWs7Y2FzZSBMZjpcIj9cIj09YT8oZS5xdWVyeT1cIlwiLHU9YmYpOlwiI1wiPT1hPyhlLmZyYWdtZW50PVwiXCIsdT13Zik6YSE9a2gmJihlLnBhdGhbMF0rPXJmKGEsZWYpKTticmVhaztjYXNlIGJmOm58fFwiI1wiIT1hP2EhPWtoJiYoXCInXCI9PWEmJnNmKGUpP2UucXVlcnkrPVwiJTI3XCI6ZS5xdWVyeSs9XCIjXCI9PWE/XCIlMjNcIjpyZihhLGVmKSk6KGUuZnJhZ21lbnQ9XCJcIix1PXdmKTticmVhaztjYXNlIHdmOmEhPWtoJiYoZS5mcmFnbWVudCs9cmYoYSx0ZikpfWwrK319LFBmPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbz1rcih0aGlzLFBmLFwiVVJMXCIpLHI9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAscz1TdHJpbmcoZSksaT1HaChvLHt0eXBlOlwiVVJMXCJ9KTtpZih2b2lkIDAhPT1yKWlmKHIgaW5zdGFuY2VvZiBQZil0PVBoKHIpO2Vsc2UgaWYobj1HZih0PXt9LFN0cmluZyhyKSkpdGhyb3cgVHlwZUVycm9yKG4pO2lmKG49R2YoaSxzLG51bGwsdCkpdGhyb3cgVHlwZUVycm9yKG4pO3ZhciBjPWkuc2VhcmNoUGFyYW1zPW5ldyBiaCx1PXdoKGMpO3UudXBkYXRlU2VhcmNoUGFyYW1zKGkucXVlcnkpLHUudXBkYXRlVVJMPWZ1bmN0aW9uKCl7aS5xdWVyeT1TdHJpbmcoYyl8fG51bGx9LGF8fChvLmhyZWY9RmYuY2FsbChvKSxvLm9yaWdpbj1xZi5jYWxsKG8pLG8ucHJvdG9jb2w9eGYuY2FsbChvKSxvLnVzZXJuYW1lPVZmLmNhbGwobyksby5wYXNzd29yZD1LZi5jYWxsKG8pLG8uaG9zdD1CZi5jYWxsKG8pLG8uaG9zdG5hbWU9SGYuY2FsbChvKSxvLnBvcnQ9amYuY2FsbChvKSxvLnBhdGhuYW1lPVdmLmNhbGwobyksby5zZWFyY2g9WWYuY2FsbChvKSxvLnNlYXJjaFBhcmFtcz0kZi5jYWxsKG8pLG8uaGFzaD16Zi5jYWxsKG8pKX0sVWY9UGYucHJvdG90eXBlLEZmPWZ1bmN0aW9uKCl7dmFyIGU9UGgodGhpcyksdD1lLnNjaGVtZSxuPWUudXNlcm5hbWUsbz1lLnBhc3N3b3JkLHI9ZS5ob3N0LGE9ZS5wb3J0LHM9ZS5wYXRoLGk9ZS5xdWVyeSxjPWUuZnJhZ21lbnQsdT10K1wiOlwiO3JldHVybiBudWxsIT09cj8odSs9XCIvL1wiLGNmKGUpJiYodSs9bisobz9cIjpcIitvOlwiXCIpK1wiQFwiKSx1Kz1aaChyKSxudWxsIT09YSYmKHUrPVwiOlwiK2EpKTpcImZpbGVcIj09dCYmKHUrPVwiLy9cIiksdSs9ZS5jYW5ub3RCZUFCYXNlVVJMP3NbMF06cy5sZW5ndGg/XCIvXCIrcy5qb2luKFwiL1wiKTpcIlwiLG51bGwhPT1pJiYodSs9XCI/XCIraSksbnVsbCE9PWMmJih1Kz1cIiNcIitjKSx1fSxxZj1mdW5jdGlvbigpe3ZhciBlPVBoKHRoaXMpLHQ9ZS5zY2hlbWUsbj1lLnBvcnQ7aWYoXCJibG9iXCI9PXQpdHJ5e3JldHVybiBuZXcgVVJMKHQucGF0aFswXSkub3JpZ2lufWNhdGNoKHNJKXtyZXR1cm5cIm51bGxcIn1yZXR1cm5cImZpbGVcIiE9dCYmc2YoZSk/dCtcIjovL1wiK1poKGUuaG9zdCkrKG51bGwhPT1uP1wiOlwiK246XCJcIik6XCJudWxsXCJ9LHhmPWZ1bmN0aW9uKCl7cmV0dXJuIFBoKHRoaXMpLnNjaGVtZStcIjpcIn0sVmY9ZnVuY3Rpb24oKXtyZXR1cm4gUGgodGhpcykudXNlcm5hbWV9LEtmPWZ1bmN0aW9uKCl7cmV0dXJuIFBoKHRoaXMpLnBhc3N3b3JkfSxCZj1mdW5jdGlvbigpe3ZhciBlPVBoKHRoaXMpLHQ9ZS5ob3N0LG49ZS5wb3J0O3JldHVybiBudWxsPT09dD9cIlwiOm51bGw9PT1uP1poKHQpOlpoKHQpK1wiOlwiK259LEhmPWZ1bmN0aW9uKCl7dmFyIGU9UGgodGhpcykuaG9zdDtyZXR1cm4gbnVsbD09PWU/XCJcIjpaaChlKX0samY9ZnVuY3Rpb24oKXt2YXIgZT1QaCh0aGlzKS5wb3J0O3JldHVybiBudWxsPT09ZT9cIlwiOlN0cmluZyhlKX0sV2Y9ZnVuY3Rpb24oKXt2YXIgZT1QaCh0aGlzKSx0PWUucGF0aDtyZXR1cm4gZS5jYW5ub3RCZUFCYXNlVVJMP3RbMF06dC5sZW5ndGg/XCIvXCIrdC5qb2luKFwiL1wiKTpcIlwifSxZZj1mdW5jdGlvbigpe3ZhciBlPVBoKHRoaXMpLnF1ZXJ5O3JldHVybiBlP1wiP1wiK2U6XCJcIn0sJGY9ZnVuY3Rpb24oKXtyZXR1cm4gUGgodGhpcykuc2VhcmNoUGFyYW1zfSx6Zj1mdW5jdGlvbigpe3ZhciBlPVBoKHRoaXMpLmZyYWdtZW50O3JldHVybiBlP1wiI1wiK2U6XCJcIn0sSmY9ZnVuY3Rpb24oZSx0KXtyZXR1cm57Z2V0OmUsc2V0OnQsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9fTtpZihhJiZUdChVZix7aHJlZjpKZihGZiwoZnVuY3Rpb24oZSl7dmFyIHQ9UGgodGhpcyksbj1TdHJpbmcoZSksbz1HZih0LG4pO2lmKG8pdGhyb3cgVHlwZUVycm9yKG8pO3doKHQuc2VhcmNoUGFyYW1zKS51cGRhdGVTZWFyY2hQYXJhbXModC5xdWVyeSl9KSksb3JpZ2luOkpmKHFmKSxwcm90b2NvbDpKZih4ZiwoZnVuY3Rpb24oZSl7dmFyIHQ9UGgodGhpcyk7R2YodCxTdHJpbmcoZSkrXCI6XCIsaGYpfSkpLHVzZXJuYW1lOkpmKFZmLChmdW5jdGlvbihlKXt2YXIgdD1QaCh0aGlzKSxuPWh0KFN0cmluZyhlKSk7aWYoIXVmKHQpKXt0LnVzZXJuYW1lPVwiXCI7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdC51c2VybmFtZSs9cmYobltvXSxvZil9fSkpLHBhc3N3b3JkOkpmKEtmLChmdW5jdGlvbihlKXt2YXIgdD1QaCh0aGlzKSxuPWh0KFN0cmluZyhlKSk7aWYoIXVmKHQpKXt0LnBhc3N3b3JkPVwiXCI7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdC5wYXNzd29yZCs9cmYobltvXSxvZil9fSkpLGhvc3Q6SmYoQmYsKGZ1bmN0aW9uKGUpe3ZhciB0PVBoKHRoaXMpO3QuY2Fubm90QmVBQmFzZVVSTHx8R2YodCxTdHJpbmcoZSksU2YpfSkpLGhvc3RuYW1lOkpmKEhmLChmdW5jdGlvbihlKXt2YXIgdD1QaCh0aGlzKTt0LmNhbm5vdEJlQUJhc2VVUkx8fEdmKHQsU3RyaW5nKGUpLENmKX0pKSxwb3J0OkpmKGpmLChmdW5jdGlvbihlKXt2YXIgdD1QaCh0aGlzKTt1Zih0KXx8KFwiXCI9PShlPVN0cmluZyhlKSk/dC5wb3J0PW51bGw6R2YodCxlLEFmKSl9KSkscGF0aG5hbWU6SmYoV2YsKGZ1bmN0aW9uKGUpe3ZhciB0PVBoKHRoaXMpO3QuY2Fubm90QmVBQmFzZVVSTHx8KHQucGF0aD1bXSxHZih0LGUrXCJcIixPZikpfSkpLHNlYXJjaDpKZihZZiwoZnVuY3Rpb24oZSl7dmFyIHQ9UGgodGhpcyk7XCJcIj09KGU9U3RyaW5nKGUpKT90LnF1ZXJ5PW51bGw6KFwiP1wiPT1lLmNoYXJBdCgwKSYmKGU9ZS5zbGljZSgxKSksdC5xdWVyeT1cIlwiLEdmKHQsZSxiZikpLHdoKHQuc2VhcmNoUGFyYW1zKS51cGRhdGVTZWFyY2hQYXJhbXModC5xdWVyeSl9KSksc2VhcmNoUGFyYW1zOkpmKCRmKSxoYXNoOkpmKHpmLChmdW5jdGlvbihlKXt2YXIgdD1QaCh0aGlzKTtcIlwiIT0oZT1TdHJpbmcoZSkpPyhcIiNcIj09ZS5jaGFyQXQoMCkmJihlPWUuc2xpY2UoMSkpLHQuZnJhZ21lbnQ9XCJcIixHZih0LGUsd2YpKTp0LmZyYWdtZW50PW51bGx9KSl9KSxaKFVmLFwidG9KU09OXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZmLmNhbGwodGhpcyl9KSx7ZW51bWVyYWJsZTohMH0pLFooVWYsXCJ0b1N0cmluZ1wiLChmdW5jdGlvbigpe3JldHVybiBGZi5jYWxsKHRoaXMpfSkse2VudW1lcmFibGU6ITB9KSxMaCl7dmFyIFhmPUxoLmNyZWF0ZU9iamVjdFVSTCxRZj1MaC5yZXZva2VPYmplY3RVUkw7WGYmJlooUGYsXCJjcmVhdGVPYmplY3RVUkxcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIFhmLmFwcGx5KExoLGFyZ3VtZW50cyl9KSksUWYmJlooUGYsXCJyZXZva2VPYmplY3RVUkxcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIFFmLmFwcGx5KExoLGFyZ3VtZW50cyl9KSl9dG4oUGYsXCJVUkxcIiksa2Uoe2dsb2JhbDohMCxmb3JjZWQ6IVFnLHNoYW06IWF9LHtVUkw6UGZ9KTt2YXIgWmY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5faW1hZ2VNZW1vcnlVUkw9XCJcIixwaT90aGlzLmNyZWF0ZUltYWdlRGF0YUFTVVJMSW5XWE1pbmlBcHAodC5maWxlKTp0aGlzLmNyZWF0ZUltYWdlRGF0YUFTVVJMSW5XZWIodC5maWxlKSx0aGlzLl9pbml0SW1hZ2VJbmZvTW9kZWwoKSx0aGlzLnR5cGU9WW4uTVNHX0lNQUdFLHRoaXMuX3BlcmNlbnQ9MCx0aGlzLmNvbnRlbnQ9e2ltYWdlRm9ybWF0OnQuaW1hZ2VGb3JtYXR8fFppLlVOS05PV04sdXVpZDp0LnV1aWQsaW1hZ2VJbmZvQXJyYXk6W119LHRoaXMuaW5pdEltYWdlSW5mb0FycmF5KHQuaW1hZ2VJbmZvQXJyYXkpLHRoaXMuX2RlZmF1bHRJbWFnZT1cImh0dHA6Ly9pbWdjYWNoZS5xcS5jb20vb3Blbi9xY2xvdWQvdmlkZW8vYWN0L3dlYmltLWltYWdlcy9kZWZhdWx0LmpwZ1wiLHRoaXMuX2F1dG9GaXhVcmwoKX1yZXR1cm4gRW4oZSxbe2tleTpcIl9pbml0SW1hZ2VJbmZvTW9kZWxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fSW1hZ2VJbmZvTW9kZWw9ZnVuY3Rpb24odCl7dGhpcy5pbnN0YW5jZUlEPVNjKDk5OTk5OTkpLHRoaXMuc2l6ZVR5cGU9dC50eXBlfHwwLHRoaXMudHlwZT0wLHRoaXMuc2l6ZT10LnNpemV8fDAsdGhpcy53aWR0aD10LndpZHRofHwwLHRoaXMuaGVpZ2h0PXQuaGVpZ2h0fHwwLHRoaXMuaW1hZ2VVcmw9dC51cmx8fFwiXCIsdGhpcy51cmw9dC51cmx8fGUuX2ltYWdlTWVtb3J5VVJMfHxlLl9kZWZhdWx0SW1hZ2V9LHRoaXMuX0ltYWdlSW5mb01vZGVsLnByb3RvdHlwZT17c2V0U2l6ZVR5cGU6ZnVuY3Rpb24oZSl7dGhpcy5zaXplVHlwZT1lfSxzZXRUeXBlOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1lfSxzZXRJbWFnZVVybDpmdW5jdGlvbihlKXtlJiYodGhpcy5pbWFnZVVybD1lKX0sZ2V0SW1hZ2VVcmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbWFnZVVybH19fX0se2tleTpcImluaXRJbWFnZUluZm9BcnJheVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49bnVsbCxvPW51bGw7dDw9Mjspbz1nYyhlKXx8Z2MoZVt0XSk/e3R5cGU6MCxzaXplOjAsd2lkdGg6MCxoZWlnaHQ6MCx1cmw6XCJcIn06ZVt0XSwobj1uZXcgdGhpcy5fSW1hZ2VJbmZvTW9kZWwobykpLnNldFNpemVUeXBlKHQrMSksbi5zZXRUeXBlKHQpLHRoaXMuYWRkSW1hZ2VJbmZvKG4pLHQrKzt0aGlzLnVwZGF0ZUFjY2Vzc1NpZGVJbWFnZUluZm9BcnJheSgpfX0se2tleTpcInVwZGF0ZUltYWdlSW5mb0FycmF5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5Lmxlbmd0aCxvPTA7bzxuO28rKyl0PXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVtvXSxlW29dLnNpemUmJih0LnNpemU9ZVtvXS5zaXplKSxlW29dLnVybCYmdC5zZXRJbWFnZVVybChlW29dLnVybCksZVtvXS53aWR0aCYmKHQud2lkdGg9ZVtvXS53aWR0aCksZVtvXS5oZWlnaHQmJih0LmhlaWdodD1lW29dLmhlaWdodCl9fSx7a2V5OlwiX2F1dG9GaXhVcmxcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXkubGVuZ3RoLHQ9XCJcIixuPVwiXCIsbz1bXCJodHRwXCIsXCJodHRwc1wiXSxyPW51bGwsYT0wO2E8ZTthKyspdGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5W2FdLnVybCYmXCJcIiE9PShyPXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVthXSkuaW1hZ2VVcmwmJihuPXIuaW1hZ2VVcmwuc2xpY2UoMCxyLmltYWdlVXJsLmluZGV4T2YoXCI6Ly9cIikrMSksdD1yLmltYWdlVXJsLnNsaWNlKHIuaW1hZ2VVcmwuaW5kZXhPZihcIjovL1wiKSsxKSxvLmluZGV4T2Yobik8MCYmKG49XCJodHRwczpcIiksdGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5W2FdLnNldEltYWdlVXJsKFtuLHRdLmpvaW4oXCJcIikpKX19LHtrZXk6XCJ1cGRhdGVQZXJjZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcGVyY2VudD1lLHRoaXMuX3BlcmNlbnQ+MSYmKHRoaXMuX3BlcmNlbnQ9MSl9fSx7a2V5OlwidXBkYXRlSW1hZ2VGb3JtYXRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbnRlbnQuaW1hZ2VGb3JtYXQ9WmlbZS50b1VwcGVyQ2FzZSgpXXx8WmkuVU5LTk9XTn19LHtrZXk6XCJjcmVhdGVJbWFnZURhdGFBU1VSTEluV2ViXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZSYmZS5maWxlcy5sZW5ndGg+MCYmKHRoaXMuX2ltYWdlTWVtb3J5VVJMPXdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGUuZmlsZXNbMF0pKX19LHtrZXk6XCJjcmVhdGVJbWFnZURhdGFBU1VSTEluV1hNaW5pQXBwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSYmZS51cmwmJih0aGlzLl9pbWFnZU1lbW9yeVVSTD1lLnVybCl9fSx7a2V5OlwicmVwbGFjZUltYWdlSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5W3RdaW5zdGFuY2VvZiB0aGlzLl9JbWFnZUluZm9Nb2RlbHx8KHRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVt0XT1lKX19LHtrZXk6XCJhZGRJbWFnZUluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXkubGVuZ3RoPj0zfHx0aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXkucHVzaChlKX19LHtrZXk6XCJ1cGRhdGVBY2Nlc3NTaWRlSW1hZ2VJbmZvQXJyYXlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheSx0PWVbMF0sbj10LndpZHRoLG89dm9pZCAwPT09bj8wOm4scj10LmhlaWdodCxhPXZvaWQgMD09PXI/MDpyOzAhPT1vJiYwIT09YSYmKEhjKGUpLE9iamVjdC5hc3NpZ24oZVsyXSxCYyh7b3JpZ2luV2lkdGg6byxvcmlnaW5IZWlnaHQ6YSxtaW46NzIwfSkpKX19LHtrZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXkubGVuZ3RoJiYoXCJcIiE9PXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVswXS5pbWFnZVVybCYmMCE9PXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVswXS5zaXplKX19XSksZX0oKSxlXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLnR5cGU9WW4uTVNHX0ZBQ0UsdGhpcy5jb250ZW50PXR8fG51bGx9cmV0dXJuIEVuKGUsW3trZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmNvbnRlbnR9fV0pLGV9KCksdF89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy50eXBlPVluLk1TR19BVURJTyx0aGlzLl9wZXJjZW50PTAsdGhpcy5jb250ZW50PXtkb3dubG9hZEZsYWc6MixzZWNvbmQ6dC5zZWNvbmQsc2l6ZTp0LnNpemUsdXJsOnQudXJsLHJlbW90ZUF1ZGlvVXJsOnQudXJsfHxcIlwiLHV1aWQ6dC51dWlkfX1yZXR1cm4gRW4oZSxbe2tleTpcInVwZGF0ZVBlcmNlbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9wZXJjZW50PWUsdGhpcy5fcGVyY2VudD4xJiYodGhpcy5fcGVyY2VudD0xKX19LHtrZXk6XCJ1cGRhdGVBdWRpb1VybFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY29udGVudC5yZW1vdGVBdWRpb1VybD1lfX0se2tleTpcInNlbmRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cIlwiIT09dGhpcy5jb250ZW50LnJlbW90ZUF1ZGlvVXJsfX1dKSxlfSgpLG5fPXtmcm9tOiEwLGdyb3VwSUQ6ITAsZ3JvdXBOYW1lOiEwLHRvOiEwfSxvXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLnR5cGU9WW4uTVNHX0dSUF9USVAsdGhpcy5jb250ZW50PXt9LHRoaXMuX2luaXRDb250ZW50KHQpfXJldHVybiBFbihlLFt7a2V5OlwiX2luaXRDb250ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXtzd2l0Y2gobil7Y2FzZVwicmVtYXJrSW5mb1wiOmJyZWFrO2Nhc2VcImdyb3VwUHJvZmlsZVwiOnQuY29udGVudC5ncm91cFByb2ZpbGU9e30sdC5faW5pdEdyb3VwUHJvZmlsZShlW25dKTticmVhaztjYXNlXCJvcGVyYXRvckluZm9cIjpicmVhaztjYXNlXCJtZW1iZXJJbmZvTGlzdFwiOmNhc2VcIm1zZ01lbWJlckluZm9cIjp0Ll91cGRhdGVNZW1iZXJMaXN0KGVbbl0pO2JyZWFrO2Nhc2VcIm9ubGluZU1lbWJlckluZm9cIjpicmVhaztjYXNlXCJtZW1iZXJOdW1cIjp0LmNvbnRlbnRbbl09ZVtuXSx0LmNvbnRlbnQubWVtYmVyQ291bnQ9ZVtuXTticmVhaztkZWZhdWx0OnQuY29udGVudFtuXT1lW25dfX0pKSx0aGlzLmNvbnRlbnQudXNlcklETGlzdHx8KHRoaXMuY29udGVudC51c2VySURMaXN0PVt0aGlzLmNvbnRlbnQub3BlcmF0b3JJRF0pfX0se2tleTpcIl9pbml0R3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIG89dFtuXTtuX1tvXSYmKHRoaXMuY29udGVudC5ncm91cFByb2ZpbGVbb109ZVtvXSl9fX0se2tleTpcIl91cGRhdGVNZW1iZXJMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7SmModGhpcy5jb250ZW50Lm1lbWJlckxpc3QpP3RoaXMuY29udGVudC5tZW1iZXJMaXN0PWU6dGhpcy5jb250ZW50Lm1lbWJlckxpc3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LnVzZXJJRD09PWUudXNlcklEJiZPYmplY3QuYXNzaWduKHQsZSl9KSl9KSl9fV0pLGV9KCkscl89e2Zyb206ITAsZ3JvdXBJRDohMCxncm91cE5hbWU6ITAsdG86ITB9LGFfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMudHlwZT1Zbi5NU0dfR1JQX1NZU19OT1RJQ0UsdGhpcy5jb250ZW50PXt9LHRoaXMuX2luaXRDb250ZW50KHQpfXJldHVybiBFbihlLFt7a2V5OlwiX2luaXRDb250ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXtzd2l0Y2gobil7Y2FzZVwibWVtYmVySW5mb0xpc3RcIjpicmVhaztjYXNlXCJyZW1hcmtJbmZvXCI6dC5jb250ZW50LmhhbmRsZU1lc3NhZ2U9ZVtuXTticmVhaztjYXNlXCJncm91cFByb2ZpbGVcIjp0LmNvbnRlbnQuZ3JvdXBQcm9maWxlPXt9LHQuX2luaXRHcm91cFByb2ZpbGUoZVtuXSk7YnJlYWs7ZGVmYXVsdDp0LmNvbnRlbnRbbl09ZVtuXX19KSl9fSx7a2V5OlwiX2luaXRHcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbj0wO248dC5sZW5ndGg7bisrKXt2YXIgbz10W25dO3JfW29dJiYoXCJncm91cE5hbWVcIj09PW8/dGhpcy5jb250ZW50Lmdyb3VwUHJvZmlsZS5uYW1lPWVbb106dGhpcy5jb250ZW50Lmdyb3VwUHJvZmlsZVtvXT1lW29dKX19fV0pLGV9KCksc189TWF0aC5taW4saV89W10ubGFzdEluZGV4T2YsY189ISFpXyYmMS9bMV0ubGFzdEluZGV4T2YoMSwtMCk8MCx1Xz1qZShcImxhc3RJbmRleE9mXCIpLGxfPXplKFwiaW5kZXhPZlwiLHtBQ0NFU1NPUlM6ITAsMTowfSksZF89Y198fCF1X3x8IWxfP2Z1bmN0aW9uKGUpe2lmKGNfKXJldHVybiBpXy5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fDA7dmFyIHQ9Zih0aGlzKSxuPWllKHQubGVuZ3RoKSxvPW4tMTtmb3IoYXJndW1lbnRzLmxlbmd0aD4xJiYobz1zXyhvLGFlKGFyZ3VtZW50c1sxXSkpKSxvPDAmJihvPW4rbyk7bz49MDtvLS0paWYobyBpbiB0JiZ0W29dPT09ZSlyZXR1cm4gb3x8MDtyZXR1cm4tMX06aV87a2Uoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOmRfIT09W10ubGFzdEluZGV4T2Z9LHtsYXN0SW5kZXhPZjpkX30pO3ZhciBwXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLnR5cGU9WW4uTVNHX0ZJTEUsdGhpcy5fcGVyY2VudD0wO3ZhciBuPXRoaXMuX2dldEZpbGVJbmZvKHQpO3RoaXMuY29udGVudD17ZG93bmxvYWRGbGFnOjIsZmlsZVVybDp0LnVybHx8XCJcIix1dWlkOnQudXVpZCxmaWxlTmFtZTpuLm5hbWV8fFwiXCIsZmlsZVNpemU6bi5zaXplfHwwfX1yZXR1cm4gRW4oZSxbe2tleTpcIl9nZXRGaWxlSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFnYyhlLmZpbGVOYW1lKSYmIWdjKGUuZmlsZVNpemUpKXJldHVybntzaXplOmUuZmlsZVNpemUsbmFtZTplLmZpbGVOYW1lfTt2YXIgdD1lLmZpbGUuZmlsZXNbMF07aWYobGkpe2lmKHQucGF0aCYmLTEhPT10LnBhdGguaW5kZXhPZihcIi5cIikpe3ZhciBuPXQucGF0aC5zbGljZSh0LnBhdGgubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCk7dC50eXBlPW4sdC5uYW1lfHwodC5uYW1lPVwiXCIuY29uY2F0KFNjKDk5OTk5OSksXCIuXCIpLmNvbmNhdChuKSl9dC5uYW1lfHwodC50eXBlPVwiXCIsdC5uYW1lPXQucGF0aC5zbGljZSh0LnBhdGgubGFzdEluZGV4T2YoXCIvXCIpKzEpLnRvTG93ZXJDYXNlKCkpLHQuc3VmZml4JiYodC50eXBlPXQuc3VmZml4KSx0LnVybHx8KHQudXJsPXQucGF0aCl9cmV0dXJue3NpemU6dC5zaXplLG5hbWU6dC5uYW1lfX19LHtrZXk6XCJ1cGRhdGVQZXJjZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcGVyY2VudD1lLHRoaXMuX3BlcmNlbnQ+MSYmKHRoaXMuX3BlcmNlbnQ9MSl9fSx7a2V5OlwidXBkYXRlRmlsZVVybFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY29udGVudC5maWxlVXJsPWV9fSx7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiXCIhPT10aGlzLmNvbnRlbnQuZmlsZVVybCYmKFwiXCIhPT10aGlzLmNvbnRlbnQuZmlsZU5hbWUmJjAhPT10aGlzLmNvbnRlbnQuZmlsZVNpemUpfX1dKSxlfSgpLGdfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMudHlwZT1Zbi5NU0dfQ1VTVE9NLHRoaXMuY29udGVudD17ZGF0YTp0LmRhdGF8fFwiXCIsZGVzY3JpcHRpb246dC5kZXNjcmlwdGlvbnx8XCJcIixleHRlbnNpb246dC5leHRlbnNpb258fFwiXCJ9fXJldHVybiBFbihlLFt7a2V5Olwic2V0RGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbnRlbnQuZGF0YT1lLHRoaXN9fSx7a2V5Olwic2V0RGVzY3JpcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb250ZW50LmRlc2NyaXB0aW9uPWUsdGhpc319LHtrZXk6XCJzZXRFeHRlbnNpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb250ZW50LmV4dGVuc2lvbj1lLHRoaXN9fSx7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy5jb250ZW50LmRhdGEubGVuZ3RofHwwIT09dGhpcy5jb250ZW50LmRlc2NyaXB0aW9uLmxlbmd0aHx8MCE9PXRoaXMuY29udGVudC5leHRlbnNpb24ubGVuZ3RofX1dKSxlfSgpLGhfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMudHlwZT1Zbi5NU0dfVklERU8sdGhpcy5fcGVyY2VudD0wLHRoaXMuY29udGVudD17cmVtb3RlVmlkZW9Vcmw6dC5yZW1vdGVWaWRlb1VybHx8dC52aWRlb1VybHx8XCJcIix2aWRlb0Zvcm1hdDp0LnZpZGVvRm9ybWF0LHZpZGVvU2Vjb25kOnBhcnNlSW50KHQudmlkZW9TZWNvbmQsMTApLHZpZGVvU2l6ZTp0LnZpZGVvU2l6ZSx2aWRlb1VybDp0LnZpZGVvVXJsLHZpZGVvRG93bmxvYWRGbGFnOjIsdmlkZW9VVUlEOnQudmlkZW9VVUlELHRodW1iVVVJRDp0LnRodW1iVVVJRCx0aHVtYkZvcm1hdDp0LnRodW1iRm9ybWF0LHRodW1iV2lkdGg6dC50aHVtYldpZHRoLHNuYXBzaG90V2lkdGg6dC50aHVtYldpZHRoLHRodW1iSGVpZ2h0OnQudGh1bWJIZWlnaHQsc25hcHNob3RIZWlnaHQ6dC50aHVtYkhlaWdodCx0aHVtYlNpemU6dC50aHVtYlNpemUsc25hcHNob3RTaXplOnQudGh1bWJTaXplLHRodW1iRG93bmxvYWRGbGFnOjIsdGh1bWJVcmw6dC50aHVtYlVybCxzbmFwc2hvdFVybDp0LnRodW1iVXJsfX1yZXR1cm4gRW4oZSxbe2tleTpcInVwZGF0ZVBlcmNlbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9wZXJjZW50PWUsdGhpcy5fcGVyY2VudD4xJiYodGhpcy5fcGVyY2VudD0xKX19LHtrZXk6XCJ1cGRhdGVWaWRlb1VybFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UmJih0aGlzLmNvbnRlbnQucmVtb3RlVmlkZW9Vcmw9ZSl9fSx7a2V5OlwidXBkYXRlU25hcHNob3RJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zbmFwc2hvdFVybCxuPWUuc25hcHNob3RXaWR0aCxvPWUuc25hcHNob3RIZWlnaHQ7SmModCl8fCh0aGlzLmNvbnRlbnQudGh1bWJVcmw9dGhpcy5jb250ZW50LnNuYXBzaG90VXJsPXQpLEpjKG4pfHwodGhpcy5jb250ZW50LnRodW1iV2lkdGg9dGhpcy5jb250ZW50LnNuYXBzaG90V2lkdGg9TnVtYmVyKG4pKSxKYyhvKXx8KHRoaXMuY29udGVudC50aHVtYkhlaWdodD10aGlzLmNvbnRlbnQuc25hcHNob3RIZWlnaHQ9TnVtYmVyKG8pKX19LHtrZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJcIiE9PXRoaXMuY29udGVudC5yZW1vdGVWaWRlb1VybH19XSksZX0oKSxmXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLnR5cGU9WW4uTVNHX0xPQ0FUSU9OO3ZhciBuPXQuZGVzY3JpcHRpb24sbz10LmxvbmdpdHVkZSxyPXQubGF0aXR1ZGU7dGhpcy5jb250ZW50PXtkZXNjcmlwdGlvbjpuLGxvbmdpdHVkZTpvLGxhdGl0dWRlOnJ9fXJldHVybiBFbihlLFt7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiEwfX1dKSxlfSgpLF9fPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtpZih5bih0aGlzLGUpLHRoaXMuZnJvbT10LmZyb20sdGhpcy5tZXNzYWdlU2VuZGVyPXQuZnJvbSx0aGlzLnRpbWU9dC50aW1lLHRoaXMubWVzc2FnZVNlcXVlbmNlPXQuc2VxdWVuY2UsdGhpcy5jbGllbnRTZXF1ZW5jZT10LmNsaWVudFNlcXVlbmNlfHx0LnNlcXVlbmNlLHRoaXMubWVzc2FnZVJhbmRvbT10LnJhbmRvbSx0aGlzLmNsb3VkQ3VzdG9tRGF0YT10LmNsb3VkQ3VzdG9tRGF0YXx8XCJcIix0LklEKXRoaXMubmljaz10Lm5pY2t8fFwiXCIsdGhpcy5hdmF0YXI9dC5hdmF0YXJ8fFwiXCIsdGhpcy5tZXNzYWdlQm9keT1be3R5cGU6dC50eXBlLHBheWxvYWQ6dC5wYXlsb2FkfV0sdC5jb252ZXJzYXRpb25UeXBlLnN0YXJ0c1dpdGgoWW4uQ09OVl9DMkMpP3RoaXMucmVjZWl2ZXJVc2VySUQ9dC50bzp0LmNvbnZlcnNhdGlvblR5cGUuc3RhcnRzV2l0aChZbi5DT05WX0dST1VQKSYmKHRoaXMucmVjZWl2ZXJHcm91cElEPXQudG8pLHRoaXMubWVzc2FnZVJlY2VpdmVyPXQudG87ZWxzZXt0aGlzLm5pY2s9dC5uaWNrfHxcIlwiLHRoaXMuYXZhdGFyPXQuYXZhdGFyfHxcIlwiLHRoaXMubWVzc2FnZUJvZHk9W107dmFyIG49dC5lbGVtZW50c1swXS50eXBlLG89dC5lbGVtZW50c1swXS5jb250ZW50O3RoaXMuX3BhdGNoUmljaE1lZGlhUGF5bG9hZChuLG8pLG49PT1Zbi5NU0dfTUVSR0VSP3RoaXMubWVzc2FnZUJvZHkucHVzaCh7dHlwZTpuLHBheWxvYWQ6bmV3IG1fKG8pLmNvbnRlbnR9KTp0aGlzLm1lc3NhZ2VCb2R5LnB1c2goe3R5cGU6bixwYXlsb2FkOm99KSx0Lmdyb3VwSUQmJih0aGlzLnJlY2VpdmVyR3JvdXBJRD10Lmdyb3VwSUQsdGhpcy5tZXNzYWdlUmVjZWl2ZXI9dC5ncm91cElEKSx0LnRvJiYodGhpcy5yZWNlaXZlclVzZXJJRD10LnRvLHRoaXMubWVzc2FnZVJlY2VpdmVyPXQudG8pfX1yZXR1cm4gRW4oZSxbe2tleTpcIl9wYXRjaFJpY2hNZWRpYVBheWxvYWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2U9PT1Zbi5NU0dfSU1BR0U/dC5pbWFnZUluZm9BcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXshZS5pbWFnZVVybCYmZS51cmwmJihlLmltYWdlVXJsPWUudXJsLGUuc2l6ZVR5cGU9ZS50eXBlLDE9PT1lLnR5cGU/ZS50eXBlPTA6Mz09PWUudHlwZSYmKGUudHlwZT0xKSl9KSk6ZT09PVluLk1TR19WSURFTz8hdC5yZW1vdGVWaWRlb1VybCYmdC52aWRlb1VybCYmKHQucmVtb3RlVmlkZW9Vcmw9dC52aWRlb1VybCk6ZT09PVluLk1TR19BVURJTz8hdC5yZW1vdGVBdWRpb1VybCYmdC51cmwmJih0LnJlbW90ZUF1ZGlvVXJsPXQudXJsKTplPT09WW4uTVNHX0ZJTEUmJiF0LmZpbGVVcmwmJnQudXJsJiYodC5maWxlVXJsPXQudXJsLHQudXJsPXZvaWQgMCl9fV0pLGV9KCksbV89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2lmKHluKHRoaXMsZSksdGhpcy50eXBlPVluLk1TR19NRVJHRVIsdGhpcy5jb250ZW50PXtkb3dubG9hZEtleTpcIlwiLHBiRG93bmxvYWRLZXk6XCJcIixtZXNzYWdlTGlzdDpbXSx0aXRsZTpcIlwiLGFic3RyYWN0TGlzdDpbXSxjb21wYXRpYmxlVGV4dDpcIlwiLHZlcnNpb246MCxsYXllcnNPdmVyTGltaXQ6ITF9LHQuZG93bmxvYWRLZXkpe3ZhciBuPXQuZG93bmxvYWRLZXksbz10LnBiRG93bmxvYWRLZXkscj10LnRpdGxlLGE9dC5hYnN0cmFjdExpc3Qscz10LmNvbXBhdGlibGVUZXh0LGk9dC52ZXJzaW9uO3RoaXMuY29udGVudC5kb3dubG9hZEtleT1uLHRoaXMuY29udGVudC5wYkRvd25sb2FkS2V5PW8sdGhpcy5jb250ZW50LnRpdGxlPXIsdGhpcy5jb250ZW50LmFic3RyYWN0TGlzdD1hLHRoaXMuY29udGVudC5jb21wYXRpYmxlVGV4dD1zLHRoaXMuY29udGVudC52ZXJzaW9uPWl8fDB9ZWxzZSBpZihKYyh0Lm1lc3NhZ2VMaXN0KSkxPT09dC5sYXllcnNPdmVyTGltaXQmJih0aGlzLmNvbnRlbnQubGF5ZXJzT3ZlckxpbWl0PSEwKTtlbHNle3ZhciBjPXQubWVzc2FnZUxpc3QsdT10LnRpdGxlLGw9dC5hYnN0cmFjdExpc3QsZD10LmNvbXBhdGlibGVUZXh0LHA9dC52ZXJzaW9uLGc9W107Yy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZighSmMoZSkpe3ZhciB0PW5ldyBfXyhlKTtnLnB1c2godCl9fSkpLHRoaXMuY29udGVudC5tZXNzYWdlTGlzdD1nLHRoaXMuY29udGVudC50aXRsZT11LHRoaXMuY29udGVudC5hYnN0cmFjdExpc3Q9bCx0aGlzLmNvbnRlbnQuY29tcGF0aWJsZVRleHQ9ZCx0aGlzLmNvbnRlbnQudmVyc2lvbj1wfHwwfVFpLmRlYnVnKFwiTWVyZ2VyRWxlbWVudC5jb250ZW50OlwiLHRoaXMuY29udGVudCl9cmV0dXJuIEVuKGUsW3trZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIUpjKHRoaXMuY29udGVudC5tZXNzYWdlTGlzdCl8fCFKYyh0aGlzLmNvbnRlbnQuZG93bmxvYWRLZXkpfX1dKSxlfSgpLHZfPXsxOlluLk1TR19QUklPUklUWV9ISUdILDI6WW4uTVNHX1BSSU9SSVRZX05PUk1BTCwzOlluLk1TR19QUklPUklUWV9MT1csNDpZbi5NU0dfUFJJT1JJVFlfTE9XRVNUfSxNXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLklEPVwiXCIsdGhpcy5jb252ZXJzYXRpb25JRD10LmNvbnZlcnNhdGlvbklEfHxudWxsLHRoaXMuY29udmVyc2F0aW9uVHlwZT10LmNvbnZlcnNhdGlvblR5cGV8fFluLkNPTlZfQzJDLHRoaXMuY29udmVyc2F0aW9uU3ViVHlwZT10LmNvbnZlcnNhdGlvblN1YlR5cGUsdGhpcy50aW1lPXQudGltZXx8TWF0aC5jZWlsKERhdGUubm93KCkvMWUzKSx0aGlzLnNlcXVlbmNlPXQuc2VxdWVuY2V8fDAsdGhpcy5jbGllbnRTZXF1ZW5jZT10LmNsaWVudFNlcXVlbmNlfHx0LnNlcXVlbmNlfHwwLHRoaXMucmFuZG9tPXQucmFuZG9tfHwwPT09dC5yYW5kb20/dC5yYW5kb206U2MoKSx0aGlzLnByaW9yaXR5PXRoaXMuX2NvbXB1dGVQcmlvcml0eSh0LnByaW9yaXR5KSx0aGlzLm5pY2s9dC5uaWNrfHxcIlwiLHRoaXMuYXZhdGFyPXQuYXZhdGFyfHxcIlwiLHRoaXMuaXNQZWVyUmVhZD0hMSx0aGlzLm5hbWVDYXJkPVwiXCIsdGhpcy5fZWxlbWVudHM9W10sdGhpcy5pc1BsYWNlTWVzc2FnZT10LmlzUGxhY2VNZXNzYWdlfHwwLHRoaXMuaXNSZXZva2VkPTI9PT10LmlzUGxhY2VNZXNzYWdlfHw4PT09dC5tc2dGbGFnQml0cyx0aGlzLmZyb209dC5mcm9tfHxudWxsLHRoaXMudG89dC50b3x8bnVsbCx0aGlzLmZsb3c9XCJcIix0aGlzLmlzU3lzdGVtTWVzc2FnZT10LmlzU3lzdGVtTWVzc2FnZXx8ITEsdGhpcy5wcm90b2NvbD10LnByb3RvY29sfHxcIkpTT05cIix0aGlzLmlzUmVzZW5kPSExLHRoaXMuaXNSZWFkPSExLHRoaXMuc3RhdHVzPXQuc3RhdHVzfHxGdS5TVUNDRVNTLHRoaXMuX29ubGluZU9ubHlGbGFnPSExLHRoaXMuX2dyb3VwQXRJbmZvTGlzdD1bXSx0aGlzLl9yZWxheUZsYWc9ITEsdGhpcy5hdFVzZXJMaXN0PVtdLHRoaXMuY2xvdWRDdXN0b21EYXRhPXQuY2xvdWRDdXN0b21EYXRhfHxcIlwiLHRoaXMuaXNEZWxldGVkPSExLHRoaXMuaXNNb2RpZmllZD0hMSx0aGlzLl9pc0V4Y2x1ZGVkRnJvbVVucmVhZENvdW50PSEoIXQubWVzc2FnZUNvbnRyb2xJbmZvfHwxIT09dC5tZXNzYWdlQ29udHJvbEluZm8uZXhjbHVkZWRGcm9tVW5yZWFkQ291bnQpLHRoaXMuX2lzRXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2U9ISghdC5tZXNzYWdlQ29udHJvbEluZm98fDEhPT10Lm1lc3NhZ2VDb250cm9sSW5mby5leGNsdWRlZEZyb21MYXN0TWVzc2FnZSksdGhpcy5jbGllbnRUaW1lPXQuY2xpZW50VGltZXx8JGkoKXx8MCx0aGlzLnNlbmRlclRpbnlJRD10LnNlbmRlclRpbnlJRHx8dC50aW55SUR8fFwiXCIsdGhpcy5yZWFkUmVjZWlwdEluZm89dC5yZWFkUmVjZWlwdEluZm98fHtyZWFkQ291bnQ6dm9pZCAwLHVucmVhZENvdW50OnZvaWQgMH0sdGhpcy5uZWVkUmVhZFJlY2VpcHQ9ITA9PT10Lm5lZWRSZWFkUmVjZWlwdHx8MT09PXQubmVlZFJlYWRSZWNlaXB0LHRoaXMucmVJbml0aWFsaXplKHQuY3VycmVudFVzZXIpLHRoaXMuZXh0cmFjdEdyb3VwSW5mbyh0Lmdyb3VwUHJvZmlsZXx8bnVsbCksdGhpcy5oYW5kbGVHcm91cEF0SW5mbyh0KX1yZXR1cm4gRW4oZSxbe2tleTpcImdldEVsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudHN9fSx7a2V5OlwiZXh0cmFjdEdyb3VwSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKG51bGwhPT1lKXt1YyhlLm5pY2spJiYodGhpcy5uaWNrPWUubmljayksdWMoZS5hdmF0YXIpJiYodGhpcy5hdmF0YXI9ZS5hdmF0YXIpO3ZhciB0PWUubWVzc2FnZUZyb21BY2NvdW50RXh0cmFJbmZvcm1hdGlvbjtkYyh0KSYmdWModC5uYW1lQ2FyZCkmJih0aGlzLm5hbWVDYXJkPXQubmFtZUNhcmQpfX19LHtrZXk6XCJoYW5kbGVHcm91cEF0SW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5wYXlsb2FkJiZlLnBheWxvYWQuYXRVc2VyTGlzdCYmZS5wYXlsb2FkLmF0VXNlckxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZSE9PVluLk1TR19BVF9BTEw/KHQuX2dyb3VwQXRJbmZvTGlzdC5wdXNoKHtncm91cEF0QWxsRmxhZzowLGdyb3VwQXRVc2VySUQ6ZX0pLHQuYXRVc2VyTGlzdC5wdXNoKGUpKToodC5fZ3JvdXBBdEluZm9MaXN0LnB1c2goe2dyb3VwQXRBbGxGbGFnOjF9KSx0LmF0VXNlckxpc3QucHVzaChZbi5NU0dfQVRfQUxMKSl9KSkscGMoZS5ncm91cEF0SW5mbykmJmUuZ3JvdXBBdEluZm8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7MD09PWUuZ3JvdXBBdEFsbEZsYWc/dC5hdFVzZXJMaXN0LnB1c2goZS5ncm91cEF0VXNlcklEKToxPT09ZS5ncm91cEF0QWxsRmxhZyYmdC5hdFVzZXJMaXN0LnB1c2goWW4uTVNHX0FUX0FMTCl9KSl9fSx7a2V5OlwiZ2V0R3JvdXBBdEluZm9MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ3JvdXBBdEluZm9MaXN0fX0se2tleTpcIl9pbml0UHJveHlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2VsZW1lbnRzWzBdJiYodGhpcy5wYXlsb2FkPXRoaXMuX2VsZW1lbnRzWzBdLmNvbnRlbnQsdGhpcy50eXBlPXRoaXMuX2VsZW1lbnRzWzBdLnR5cGUpfX0se2tleTpcInJlSW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UmJih0aGlzLnN0YXR1cz10aGlzLmZyb20/RnUuU1VDQ0VTUzpGdS5VTlNFTkQsIXRoaXMuZnJvbSYmKHRoaXMuZnJvbT1lKSksdGhpcy5faW5pdEZsb3coZSksdGhpcy5faW5pdFNlcXVlbmNlKGUpLHRoaXMuX2NvbmNhdENvbnZlcnNhdGlvbklEKGUpLHRoaXMuZ2VuZXJhdGVNZXNzYWdlSUQoKX19LHtrZXk6XCJpc1NlbmRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuX2VsZW1lbnRzLmxlbmd0aCYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMuX2VsZW1lbnRzWzBdLnNlbmRhYmxlPyhRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2VsZW1lbnRzWzBdLnR5cGUsJyBuZWVkIFwiYm9vbGVhbiA6IHNlbmRhYmxlKClcIiBtZXRob2QnKSksITEpOnRoaXMuX2VsZW1lbnRzWzBdLnNlbmRhYmxlKCkpfX0se2tleTpcIl9pbml0VG9cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0dST1VQJiYodGhpcy50bz1lLmdyb3VwSUQpfX0se2tleTpcIl9pbml0U2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXswPT09dGhpcy5jbGllbnRTZXF1ZW5jZSYmZSYmKHRoaXMuY2xpZW50U2VxdWVuY2U9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIFFpLmVycm9yKFwiYXV0b0luY3JlbWVudEluZGV4KHN0cmluZzoga2V5KSBuZWVkIGtleSBwYXJhbWV0ZXJcIiksITE7aWYodm9pZCAwPT09TmNbZV0pe3ZhciB0PW5ldyBEYXRlLG49XCIzXCIuY29uY2F0KHQuZ2V0SG91cnMoKSkuc2xpY2UoLTIpLG89XCIwXCIuY29uY2F0KHQuZ2V0TWludXRlcygpKS5zbGljZSgtMikscj1cIjBcIi5jb25jYXQodC5nZXRTZWNvbmRzKCkpLnNsaWNlKC0yKTtOY1tlXT1wYXJzZUludChbbixvLHIsXCIwMDAxXCJdLmpvaW4oXCJcIikpLG49bnVsbCxvPW51bGwscj1udWxsLFFpLmxvZyhcImF1dG9JbmNyZW1lbnRJbmRleCBzdGFydCBpbmRleDpcIi5jb25jYXQoTmNbZV0pKX1yZXR1cm4gTmNbZV0rK30oZSkpLDA9PT10aGlzLnNlcXVlbmNlJiZ0aGlzLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0MyQyYmKHRoaXMuc2VxdWVuY2U9dGhpcy5jbGllbnRTZXF1ZW5jZSl9fSx7a2V5OlwiZ2VuZXJhdGVNZXNzYWdlSURcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZnJvbT09PVluLkNPTlZfU1lTVEVNJiYodGhpcy5zZW5kZXJUaW55SUQ9XCIxNDQxMTUxOTgyNDQ0NzE3MDNcIiksdGhpcy5JRD1cIlwiLmNvbmNhdCh0aGlzLnNlbmRlclRpbnlJRCxcIi1cIikuY29uY2F0KHRoaXMuY2xpZW50VGltZSxcIi1cIikuY29uY2F0KHRoaXMucmFuZG9tKX19LHtrZXk6XCJfaW5pdEZsb3dcIix2YWx1ZTpmdW5jdGlvbihlKXtcIlwiIT09ZSYmKGU9PT10aGlzLmZyb20/KHRoaXMuZmxvdz1cIm91dFwiLHRoaXMuaXNSZWFkPSEwKTp0aGlzLmZsb3c9XCJpblwiKX19LHtrZXk6XCJfY29uY2F0Q29udmVyc2F0aW9uSURcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnRvLG49XCJcIixvPXRoaXMuY29udmVyc2F0aW9uVHlwZTtvIT09WW4uQ09OVl9TWVNURU0/KG49bz09PVluLkNPTlZfQzJDP2U9PT10aGlzLmZyb20/dDp0aGlzLmZyb206dGhpcy50byx0aGlzLmNvbnZlcnNhdGlvbklEPVwiXCIuY29uY2F0KG8pLmNvbmNhdChuKSk6dGhpcy5jb252ZXJzYXRpb25JRD1Zbi5DT05WX1NZU1RFTX19LHtrZXk6XCJpc0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIFlnfHxlIGluc3RhbmNlb2YgWmZ8fGUgaW5zdGFuY2VvZiBlX3x8ZSBpbnN0YW5jZW9mIHRffHxlIGluc3RhbmNlb2YgcF98fGUgaW5zdGFuY2VvZiBoX3x8ZSBpbnN0YW5jZW9mIG9ffHxlIGluc3RhbmNlb2YgYV98fGUgaW5zdGFuY2VvZiBnX3x8ZSBpbnN0YW5jZW9mIGZffHxlIGluc3RhbmNlb2YgbV99fSx7a2V5Olwic2V0RWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5pc0VsZW1lbnQoZSkpcmV0dXJuIHRoaXMuX2VsZW1lbnRzPVtlXSx2b2lkIHRoaXMuX2luaXRQcm94eSgpO3ZhciBuPWZ1bmN0aW9uKGUpe2lmKGUudHlwZSYmZS5jb250ZW50KXN3aXRjaChlLnR5cGUpe2Nhc2UgWW4uTVNHX1RFWFQ6dC5zZXRUZXh0RWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2UgWW4uTVNHX0lNQUdFOnQuc2V0SW1hZ2VFbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSBZbi5NU0dfQVVESU86dC5zZXRBdWRpb0VsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIFluLk1TR19GSUxFOnQuc2V0RmlsZUVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIFluLk1TR19WSURFTzp0LnNldFZpZGVvRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2UgWW4uTVNHX0NVU1RPTTp0LnNldEN1c3RvbUVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIFluLk1TR19MT0NBVElPTjp0LnNldExvY2F0aW9uRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2UgWW4uTVNHX0dSUF9USVA6dC5zZXRHcm91cFRpcEVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIFluLk1TR19HUlBfU1lTX05PVElDRTp0LnNldEdyb3VwU3lzdGVtTm90aWNlRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2UgWW4uTVNHX0ZBQ0U6dC5zZXRGYWNlRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2UgWW4uTVNHX01FUkdFUjp0LnNldE1lcmdlckVsZW1lbnQoZS5jb250ZW50KTticmVhaztkZWZhdWx0OlFpLndhcm4oZS50eXBlLGUuY29udGVudCxcIm5vIG9wZXJhdGlvbi4uLi4uLlwiKX19O2lmKHBjKGUpKWZvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKW4oZVtvXSk7ZWxzZSBuKGUpO3RoaXMuX2luaXRQcm94eSgpfX0se2tleTpcImNsZWFyRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZWxlbWVudHMubGVuZ3RoPTB9fSx7a2V5Olwic2V0VGV4dEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cInN0cmluZ1wiPT10eXBlb2YgZT9lOmUudGV4dCxuPW5ldyBZZyh7dGV4dDp0fSk7dGhpcy5fZWxlbWVudHMucHVzaChuKX19LHtrZXk6XCJzZXRJbWFnZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgWmYoZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRBdWRpb0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgdF8oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRGaWxlRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBwXyhlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfX0se2tleTpcInNldFZpZGVvRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBoXyhlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfX0se2tleTpcInNldExvY2F0aW9uRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBmXyhlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfX0se2tleTpcInNldEN1c3RvbUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgZ18oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRHcm91cFRpcEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxuPWUub3BlcmF0aW9uVHlwZTtKYyhlLm1lbWJlckluZm9MaXN0KT9lLm9wZXJhdG9ySW5mbyYmKHQ9ZS5vcGVyYXRvckluZm8pOm4hPT1Zbi5HUlBfVElQX01CUl9KT0lOJiZuIT09WW4uR1JQX1RJUF9NQlJfS0lDS0VEX09VVCYmbiE9PVluLkdSUF9USVBfTUJSX1NFVF9BRE1JTiYmbiE9PVluLkdSUF9USVBfTUJSX0NBTkNFTEVEX0FETUlOfHwodD1lLm1lbWJlckluZm9MaXN0WzBdKTt2YXIgbz10LHI9by5uaWNrLGE9by5hdmF0YXI7dWMocikmJih0aGlzLm5pY2s9ciksdWMoYSkmJih0aGlzLmF2YXRhcj1hKTt2YXIgcz1uZXcgb18oZSk7dGhpcy5fZWxlbWVudHMucHVzaChzKX19LHtrZXk6XCJzZXRHcm91cFN5c3RlbU5vdGljZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgYV8oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRGYWNlRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBlXyhlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfX0se2tleTpcInNldE1lcmdlckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgbV8oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRJc1JlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmlzUmVhZD1lfX0se2tleTpcInNldFJlbGF5RmxhZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3JlbGF5RmxhZz1lfX0se2tleTpcImdldFJlbGF5RmxhZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbGF5RmxhZ319LHtrZXk6XCJfY29tcHV0ZVByaW9yaXR5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZ2MoZSkpcmV0dXJuIFluLk1TR19QUklPUklUWV9OT1JNQUw7aWYodWMoZSkmJi0xIT09T2JqZWN0LnZhbHVlcyh2XykuaW5kZXhPZihlKSlyZXR1cm4gZTtpZihjYyhlKSl7dmFyIHQ9XCJcIitlO2lmKC0xIT09T2JqZWN0LmtleXModl8pLmluZGV4T2YodCkpcmV0dXJuIHZfW3RdfXJldHVybiBZbi5NU0dfUFJJT1JJVFlfTk9STUFMfX0se2tleTpcInNldE5pY2tBbmRBdmF0YXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm5pY2ssbj1lLmF2YXRhcjt1Yyh0KSYmKHRoaXMubmljaz10KSx1YyhuKSYmKHRoaXMuYXZhdGFyPW4pfX0se2tleTpcInNldE5hbWVDYXJkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dWMoZSkmJih0aGlzLm5hbWVDYXJkPWUpfX0se2tleTpcImVsZW1lbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFFpLndhcm4oXCLvvIHvvIHvvIFNZXNzYWdlIOWunuS+i+eahCBlbGVtZW50cyDlsZ7mgKfljbPlsIblup/lvIPvvIzor7flsL3lv6vkv67mlLnjgILkvb/nlKggdHlwZSDlkowgcGF5bG9hZCDlsZ7mgKflpITnkIbljZXmnaHmtojmga/vvIzlhbzlrrnnu4TlkIjmtojmga/kvb/nlKggX2VsZW1lbnRzIOWxnuaAp++8ge+8ge+8gVwiKSx0aGlzLl9lbGVtZW50c319XSksZX0oKSx5Xz1mdW5jdGlvbihlKXtyZXR1cm57Y29kZTowLGRhdGE6ZXx8e319fSxJXz1cImh0dHBzOi8vY2xvdWQudGVuY2VudC5jb20vZG9jdW1lbnQvcHJvZHVjdC9cIixFXz1cIuaCqOWPr+S7peWcqOWNs+aXtumAmuS/oSBJTSDmjqfliLblj7DnmoTjgJDlvIDlj5HovoXliqnlt6XlhbcoaHR0cHM6Ly9jb25zb2xlLmNsb3VkLnRlbmNlbnQuY29tL2ltLWRldGFpbC90b29sLXVzZXJzaWcp44CRIOmhtemdouagoemqjCBVc2VyU2ln44CCXCIsVF89XCJVc2VyU2lnIOmdnuazle+8jOivt+S9v+eUqOWumOe9keaPkOS+m+eahCBBUEkg6YeN5paw55Sf5oiQIFVzZXJTaWcoXCIuY29uY2F0KElfLFwiMjY5LzMyNjg4KeOAglwiKSxTXz1cIiMuRTYuQjYuODguRTYuODEuQUYuRTUuODUuODMuRTcuQjQuQTAtdGltbXNnZWxlbWVudFwiLENfPXs3MDAwMTpcIlVzZXJTaWcg5bey6L+H5pyf77yM6K+36YeN5paw55Sf5oiQ44CC5bu66K6uIFVzZXJTaWcg5pyJ5pWI5pyf6K6+572u5LiN5bCP5LqOMjTlsI/ml7bjgIJcIiw3MDAwMjpcIlVzZXJTaWcg6ZW/5bqm5Li6MO+8jOivt+ajgOafpeS8oOWFpeeahCBVc2VyU2lnIOaYr+WQpuato+ehruOAglwiLDcwMDAzOlRfLDcwMDA1OlRfLDcwMDA5OlwiVXNlclNpZyDpqozor4HlpLHotKXvvIzlj6/og73lm6DkuLrnlJ/miJAgVXNlclNpZyDml7bmt7fnlKjkuoblhbbku5YgU0RLQXBwSUQg55qE56eB6ZKl5oiW5a+G6ZKl5a+86Ie077yM6K+35L2/55So5a+55bqUIFNES0FwcElEIOS4i+eahOengemSpeaIluWvhumSpemHjeaWsOeUn+aIkCBVc2VyU2lnKFwiLmNvbmNhdChJXyxcIjI2OS8zMjY4OCnjgIJcIiksNzAwMTM6XCLor7fmsYLkuK3nmoQgVXNlcklEIOS4jueUn+aIkCBVc2VyU2lnIOaXtuS9v+eUqOeahCBVc2VySUQg5LiN5Yy56YWN44CCXCIuY29uY2F0KEVfKSw3MDAxNDpcIuivt+axguS4reeahCBTREtBcHBJRCDkuI7nlJ/miJAgVXNlclNpZyDml7bkvb/nlKjnmoQgU0RLQXBwSUQg5LiN5Yy56YWN44CCXCIuY29uY2F0KEVfKSw3MDAxNjpcIuWvhumSpeS4jeWtmOWcqO+8jFVzZXJTaWcg6aqM6K+B5aSx6LSl77yM6K+35Zyo5Y2z5pe26YCa5L+hIElNIOaOp+WItuWPsOiOt+WPluWvhumSpShcIi5jb25jYXQoSV8sXCIyNjkvMzI1NzgjLkU4LjhFLkI3LkU1LjhGLjk2LkU1LkFGLjg2LkU5LjkyLkE1KeOAglwiKSw3MDAyMDpcIlNES0FwcElEIOacquaJvuWIsO+8jOivt+WcqOWNs+aXtumAmuS/oSBJTSDmjqfliLblj7Dnoa7orqTlupTnlKjkv6Hmga/jgIJcIiw3MDA1MDpcIlVzZXJTaWcg6aqM6K+B5qyh5pWw6L+H5LqO6aKR57mB44CC6K+35qOA5p+lIFVzZXJTaWcg5piv5ZCm5q2j56Gu77yM5bm25LqOMeWIhumSn+WQjumHjeaWsOmqjOivgeOAglwiLmNvbmNhdChFXyksNzAwNTE6XCLluJDlj7fooqvmi4nlhaXpu5HlkI3ljZXjgIJcIiw3MDA1MjpcIlVzZXJTaWcg5bey57uP5aSx5pWI77yM6K+36YeN5paw55Sf5oiQ77yM5YaN5qyh5bCd6K+V44CCXCIsNzAxMDc6XCLlm6Dlronlhajljp/lm6DooqvpmZDliLbnmbvlvZXvvIzor7fkuI3opoHpopHnuYHnmbvlvZXjgIJcIiw3MDE2OTpcIuivt+axgueahOeUqOaIt+W4kOWPt+S4jeWtmOWcqOOAglwiLDcwMTE0OlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6LaF5pe277yM6K+356iN5ZCO6YeN6K+V44CCXCIpLDcwMjAyOlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6LaF5pe277yM6K+356iN5ZCO6YeN6K+V44CCXCIpLDcwMjA2Olwi6K+35rGC5Lit5om56YeP5pWw6YeP5LiN5ZCI5rOV44CCXCIsNzA0MDI6XCLlj4LmlbDpnZ7ms5XvvIzor7fmo4Dmn6Xlv4XloavlrZfmrrXmmK/lkKbloavlhYXvvIzmiJbogIXlrZfmrrXnmoTloavlhYXmmK/lkKbmu6HotrPljY/orq7opoHmsYLjgIJcIiw3MDQwMzpcIuivt+axguWksei0pe+8jOmcgOimgSBBcHAg566h55CG5ZGY5p2D6ZmQ44CCXCIsNzAzOTg6XCLluJDlj7fmlbDotoXpmZDjgILlpoLpnIDliJvlu7rlpJrkuo4xMDDkuKrluJDlj7fvvIzor7flsIblupTnlKjljYfnuqfkuLrkuJPkuJrniYjvvIzlhbfkvZPmk43kvZzmjIflvJXor7flj4Lop4HotK3kubDmjIflvJUoXCIuY29uY2F0KElfLFwiMjY5LzMyNDU4KeOAglwiKSw3MDUwMDpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiKSw3MWUzOlwi5Yig6Zmk5biQ5Y+35aSx6LSl44CC5LuF5pSv5oyB5Yig6Zmk5L2T6aqM54mI5biQ5Y+377yM5oKo5b2T5YmN5bqU55So5Li65LiT5Lia54mI77yM5pqC5LiN5pSv5oyB5biQ5Y+35Yig6Zmk44CCXCIsMjAwMDE6XCLor7fmsYLljIXpnZ7ms5XjgIJcIiwyMDAwMjpcIlVzZXJTaWcg5oiWIEEyIOWkseaViOOAglwiLDIwMDAzOlwi5raI5oGv5Y+R6YCB5pa55oiW5o6l5pS25pa5IFVzZXJJRCDml6DmlYjmiJbkuI3lrZjlnKjvvIzor7fmo4Dmn6UgVXNlcklEIOaYr+WQpuW3suWvvOWFpeWNs+aXtumAmuS/oSBJTeOAglwiLDIwMDA0Olwi572R57uc5byC5bi477yM6K+36YeN6K+V44CCXCIsMjAwMDU6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jplJnor6/vvIzor7fph43or5XjgIJcIiksMjAwMDY6XCLop6blj5Hlj5HpgIFcIi5jb25jYXQoXCLljZXogYrmtojmga9cIixcIuS5i+WJjeWbnuiwg++8jEFwcCDlkI7lj7Dov5Tlm57npoHmraLkuIvlj5Hor6Xmtojmga/jgIJcIiksMjAwMDc6XCLlj5HpgIFcIi5jb25jYXQoXCLljZXogYrmtojmga9cIixcIu+8jOiiq+WvueaWueaLiem7ke+8jOemgeatouWPkemAgeOAgua2iOaBr+WPkemAgeeKtuaAgem7mOiupOWxleekuuS4uuWksei0pe+8jOaCqOWPr+S7peeZu+W9leaOp+WItuWPsOS/ruaUueivpeWcuuaZr+S4i+eahOa2iOaBr+WPkemAgeeKtuaAgeWxleekuue7k+aenO+8jOWFt+S9k+aTjeS9nOivt+WPguingea2iOaBr+S/neeVmeiuvue9rihcIikuY29uY2F0KElfLFwiMjY5LzM4NjU2KeOAglwiKSwyMDAwOTpcIua2iOaBr+WPkemAgeWPjOaWueS6kuebuOS4jeaYr+WlveWPi++8jOemgeatouWPkemAge+8iOmFjee9rlwiLmNvbmNhdChcIuWNleiBiua2iOaBr1wiLFwi5qCh6aqM5aW95Y+L5YWz57O75omN5Lya5Ye6546w77yJ44CCXCIpLDIwMDEwOlwi5Y+R6YCBXCIuY29uY2F0KFwi5Y2V6IGK5raI5oGvXCIsXCLvvIzoh6rlt7HkuI3mmK/lr7nmlrnnmoTlpb3lj4vvvIjljZXlkJHlhbPns7vvvInvvIznpoHmraLlj5HpgIHjgIJcIiksMjAwMTE6XCLlj5HpgIFcIi5jb25jYXQoXCLljZXogYrmtojmga9cIixcIu+8jOWvueaWueS4jeaYr+iHquW3seeahOWlveWPi++8iOWNleWQkeWFs+ezu++8ie+8jOemgeatouWPkemAgeOAglwiKSwyMDAxMjpcIuWPkemAgeaWueiiq+emgeiogO+8jOivpeadoea2iOaBr+iiq+emgeatouWPkemAgeOAglwiLDIwMDE2Olwi5raI5oGv5pKk5Zue6LaF6L+H5LqG5pe26Ze06ZmQ5Yi277yI6buY6K6kMuWIhumSn++8ieOAglwiLDIwMDE4Olwi5Yig6Zmk5ryr5ri45YaF6YOo6ZSZ6K+v44CCXCIsOTAwMDE6XCJKU09OIOagvOW8j+ino+aekOWksei0pe+8jOivt+ajgOafpeivt+axguWMheaYr+WQpuespuWQiCBKU09OIOinhOiMg+OAglwiLDkwMDAyOlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4rSBNc2dCb2R5IOS4jeespuWQiOa2iOaBr+agvOW8j+aPj+i/sO+8jOaIluiAhSBNc2dCb2R5IOS4jeaYryBBcnJheSDnsbvlnovvvIzor7flj4LogIMgVElNTXNnRWxlbWVudCDlr7nosaHnmoTlrprkuYkoXCIpLmNvbmNhdChJXyxcIjI2OS8yNzIwXCIpLmNvbmNhdChTXyxcIinjgIJcIiksOTAwMDM6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5Lit57y65bCRIFRvX0FjY291bnQg5a2X5q615oiW6ICFIFRvX0FjY291bnQg5biQ5Y+35LiN5a2Y5Zyo44CCXCIpLDkwMDA1OlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4ree8uuWwkSBNc2dSYW5kb20g5a2X5q615oiW6ICFIE1zZ1JhbmRvbSDlrZfmrrXkuI3mmK8gSW50ZWdlciDnsbvlnovjgIJcIiksOTAwMDY6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5Lit57y65bCRIE1zZ1RpbWVTdGFtcCDlrZfmrrXmiJbogIUgTXNnVGltZVN0YW1wIOWtl+auteS4jeaYryBJbnRlZ2VyIOexu+Wei+OAglwiKSw5MDAwNzpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK0gTXNnQm9keSDnsbvlnovkuI3mmK8gQXJyYXkg57G75Z6L77yM6K+35bCG5YW25L+u5pS55Li6IEFycmF5IOexu+Wei+OAglwiKSw5MDAwODpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK3nvLrlsJEgRnJvbV9BY2NvdW50IOWtl+auteaIluiAhSBGcm9tX0FjY291bnQg5biQ5Y+35LiN5a2Y5Zyo44CCXCIpLDkwMDA5Olwi6K+35rGC6ZyA6KaBIEFwcCDnrqHnkIblkZjmnYPpmZDjgIJcIiw5MDAxMDpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuI3nrKblkIjmtojmga/moLzlvI/mj4/ov7DvvIzor7flj4LogIMgVElNTXNnRWxlbWVudCDlr7nosaHnmoTlrprkuYkoXCIpLmNvbmNhdChJXyxcIjI2OS8yNzIwXCIpLmNvbmNhdChTXyxcIinjgIJcIiksOTAwMTE6XCLmibnph4/lj5Hmtojmga/nm67moIfluJDlj7fotoXov4c1MDDvvIzor7flh4/lsJEgVG9fQWNjb3VudCDkuK3nm67moIfluJDlj7fmlbDph4/jgIJcIiw5MDAxMjpcIlRvX0FjY291bnQg5rKh5pyJ5rOo5YaM5oiW5LiN5a2Y5Zyo77yM6K+356Gu6K6kIFRvX0FjY291bnQg5piv5ZCm5a+85YWl5Y2z5pe26YCa5L+hIElNIOaIluiAheaYr+WQpuaLvOWGmemUmeivr+OAglwiLDkwMDI2Olwi5raI5oGv56a757q/5a2Y5YKo5pe26Ze06ZSZ6K+v77yI5pyA5aSa5LiN6IO96LaF6L+HN+Wkqe+8ieOAglwiLDkwMDMxOlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4rSBTeW5jT3RoZXJNYWNoaW5lIOWtl+auteS4jeaYryBJbnRlZ2VyIOexu+Wei+OAglwiKSw5MDA0NDpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK0gTXNnTGlmZVRpbWUg5a2X5q615LiN5pivIEludGVnZXIg57G75Z6L44CCXCIpLDkwMDQ4Olwi6K+35rGC55qE55So5oi35biQ5Y+35LiN5a2Y5Zyo44CCXCIsOTAwNTQ6XCLmkqTlm57or7fmsYLkuK3nmoQgTXNnS2V5IOS4jeWQiOazleOAglwiLDkwOTk0OlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIpLDkwOTk1OlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIpLDkxZTM6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jplJnor6/vvIzor7fph43or5XjgIJcIiksOTA5OTI6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jplJnor6/vvIzor7fph43or5XjgIJcIixcIuWmguaenOaJgOacieivt+axgumDvei/lOWbnuivpemUmeivr+egge+8jOS4lCBBcHAg6YWN572u5LqG56ys5LiJ5pa55Zue6LCD77yM6K+35qOA5p+lIEFwcCDmnI3liqHnq6/mmK/lkKbmraPluLjlkJHljbPml7bpgJrkv6EgSU0g5ZCO5Y+w5pyN5Yqh56uv6L+U5Zue5Zue6LCD57uT5p6c44CCXCIpLDkzZTM6XCJKU09OIOaVsOaNruWMhei2hemVv++8jOa2iOaBr+WMheS9k+ivt+S4jeimgei2hei/hzhr44CCXCIsOTExMDE6XCJXZWIg56uv6ZW/6L2u6K+i6KKr6Lii77yIV2ViIOerr+WQjOaXtuWcqOe6v+WunuS+i+S4quaVsOi2heWHuumZkOWItu+8ieOAglwiLDEwMDAyOlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIpLDEwMDAzOlwi6K+35rGC5Lit55qE5o6l5Y+j5ZCN56ew6ZSZ6K+v77yM6K+35qC45a+55o6l5Y+j5ZCN56ew5bm26YeN6K+V44CCXCIsMTAwMDQ6XCLlj4LmlbDpnZ7ms5XvvIzor7fmoLnmja7plJnor6/mj4/ov7Dmo4Dmn6Xor7fmsYLmmK/lkKbmraPnoa7jgIJcIiwxMDAwNTpcIuivt+axguWMheS9k+S4reaQuuW4pueahOW4kOWPt+aVsOmHj+i/h+WkmuOAglwiLDEwMDA2Olwi5pON5L2c6aKR546H6ZmQ5Yi277yM6K+35bCd6K+V6ZmN5L2O6LCD55So55qE6aKR546H44CCXCIsMTAwMDc6XCLmk43kvZzmnYPpmZDkuI3otrPvvIzkvovlpoIgV29yayBcIi5jb25jYXQoXCLnvqTnu4RcIixcIuS4reaZrumAmuaIkOWRmOWwneivleaJp+ihjOi4ouS6uuaTjeS9nO+8jOS9huWPquaciSBBcHAg566h55CG5ZGY5omN5pyJ5p2D6ZmQ44CCXCIpLDEwMDA4Olwi6K+35rGC6Z2e5rOV77yM5Y+v6IO95piv6K+35rGC5Lit5pC65bim55qE562+5ZCN5L+h5oGv6aqM6K+B5LiN5q2j56Gu77yM6K+35YaN5qyh5bCd6K+V44CCXCIsMTAwMDk6XCLor6XnvqTkuI3lhYHorrjnvqTkuLvkuLvliqjpgIDlh7rjgIJcIiwxMDAxMDpcIlwiLmNvbmNhdChcIue+pOe7hFwiLFwi5LiN5a2Y5Zyo77yM5oiW6ICF5pu+57uP5a2Y5Zyo6L+H77yM5L2G5piv55uu5YmN5bey57uP6KKr6Kej5pWj44CCXCIpLDEwMDExOlwi6Kej5p6QIEpTT04g5YyF5L2T5aSx6LSl77yM6K+35qOA5p+l5YyF5L2T55qE5qC85byP5piv5ZCm56ym5ZCIIEpTT04g5qC85byP44CCXCIsMTAwMTI6XCLlj5Hotbfmk43kvZznmoQgVXNlcklEIOmdnuazle+8jOivt+ajgOafpeWPkei1t+aTjeS9nOeahOeUqOaItyBVc2VySUQg5piv5ZCm5aGr5YaZ5q2j56Gu44CCXCIsMTAwMTM6XCLooqvpgoDor7fliqDlhaXnmoTnlKjmiLflt7Lnu4/mmK/nvqTmiJDlkZjjgIJcIiwxMDAxNDpcIue+pOW3sua7oeWRmO+8jOaXoOazleWwhuivt+axguS4reeahOeUqOaIt+WKoOWFpVwiLmNvbmNhdChcIue+pOe7hFwiLFwi77yM5aaC5p6c5piv5om56YeP5Yqg5Lq677yM5Y+v5Lul5bCd6K+V5YeP5bCR5Yqg5YWl55So5oi355qE5pWw6YeP44CCXCIpLDEwMDE1Olwi5om+5LiN5Yiw5oyH5a6aIElEIOeahFwiLmNvbmNhdChcIue+pOe7hFwiLFwi44CCXCIpLDEwMDE2OlwiQXBwIOWQjuWPsOmAmui/h+esrOS4ieaWueWbnuiwg+aLkue7neacrOasoeaTjeS9nOOAglwiLDEwMDE3Olwi5Zug6KKr56aB6KiA6ICM5LiN6IO95Y+R6YCB5raI5oGv77yM6K+35qOA5p+l5Y+R6YCB6ICF5piv5ZCm6KKr6K6+572u56aB6KiA44CCXCIsMTAwMTg6XCLlupTnrZTljIXplb/luqbotoXov4fmnIDlpKfljIXplb/vvIgxTULvvInvvIzor7fmsYLnmoTlhoXlrrnov4flpJrvvIzor7flsJ3or5Xlh4/lsJHljZXmrKHor7fmsYLnmoTmlbDmja7ph4/jgIJcIiwxMDAxOTpcIuivt+axgueahOeUqOaIt+W4kOWPt+S4jeWtmOWcqOOAglwiLDEwMDIxOlwiXCIuY29uY2F0KFwi576k57uEXCIsXCIgSUQg5bey6KKr5L2/55So77yM6K+36YCJ5oup5YW25LuW55qEXCIpLmNvbmNhdChcIue+pOe7hFwiLFwiIElE44CCXCIpLDEwMDIzOlwi5Y+R5raI5oGv55qE6aKR546H6LaF6ZmQ77yM6K+35bu26ZW/5Lik5qyh5Y+R5raI5oGv5pe26Ze055qE6Ze06ZqU44CCXCIsMTAwMjQ6XCLmraTpgoDor7fmiJbogIXnlLPor7for7fmsYLlt7Lnu4/ooqvlpITnkIbjgIJcIiwxMDAyNTpcIlwiLmNvbmNhdChcIue+pOe7hFwiLFwiIElEIOW3suiiq+S9v+eUqO+8jOW5tuS4lOaTjeS9nOiAheS4uue+pOS4u++8jOWPr+S7peebtOaOpeS9v+eUqOOAglwiKSwxMDAyNjpcIuivpSBTREtBcHBJRCDor7fmsYLnmoTlkb3ku6TlrZflt7LooqvnpoHnlKjjgIJcIiwxMDAzMDpcIuivt+axguaSpOWbnueahOa2iOaBr+S4jeWtmOWcqOOAglwiLDEwMDMxOlwi5raI5oGv5pKk5Zue6LaF6L+H5LqG5pe26Ze06ZmQ5Yi277yI6buY6K6kMuWIhumSn++8ieOAglwiLDEwMDMyOlwi6K+35rGC5pKk5Zue55qE5raI5oGv5LiN5pSv5oyB5pKk5Zue5pON5L2c44CCXCIsMTAwMzM6XCJcIi5jb25jYXQoXCLnvqTnu4RcIixcIuexu+Wei+S4jeaUr+aMgea2iOaBr+aSpOWbnuaTjeS9nOOAglwiKSwxMDAzNDpcIuivpea2iOaBr+exu+Wei+S4jeaUr+aMgeWIoOmZpOaTjeS9nOOAglwiLDEwMDM1Olwi55u05pKt576k5ZKM5Zyo57q/5oiQ5ZGY5bm/5pKt5aSn576k5LiN5pSv5oyB5Yig6Zmk5raI5oGv44CCXCIsMTAwMzY6XCLnm7Tmkq3nvqTliJvlu7rmlbDph4/otoXov4fkuobpmZDliLbvvIzor7flj4LogIPku7fmoLzor7TmmI4oXCIuY29uY2F0KElfLFwiMjY5LzExNjczKei0reS5sOmihOS7mOi0ueWll+mkkOKAnElN55u05pKt576k4oCd44CCXCIpLDEwMDM3Olwi5Y2V5Liq55So5oi35Y+v5Yib5bu65ZKM5Yqg5YWl55qEXCIuY29uY2F0KFwi576k57uEXCIsXCLmlbDph4/otoXov4fkuobpmZDliLbvvIzor7flj4LogIPku7fmoLzor7TmmI4oXCIpLmNvbmNhdChJXyxcIjI2OS8xMTY3MynotK3kubDmiJbljYfnuqfpooTku5jotLnlpZfppJDigJzljZXkurrlj6/liJvlu7rkuI7liqDlhaVcIikuY29uY2F0KFwi576k57uEXCIsXCLmlbDigJ3jgIJcIiksMTAwMzg6XCLnvqTmiJDlkZjmlbDph4/otoXov4fpmZDliLbvvIzor7flj4LogIPku7fmoLzor7TmmI4oXCIuY29uY2F0KElfLFwiMjY5LzExNjczKei0reS5sOaIluWNh+e6p+mihOS7mOi0ueWll+mkkOKAnOaJqeWxlee+pOS6uuaVsOS4iumZkOKAneOAglwiKSwxMDA0MTpcIuivpeW6lOeUqO+8iFNES0FwcElE77yJ5bey6YWN572u5LiN5pSv5oyB576k5raI5oGv5pKk5Zue44CCXCIsMTAwNTA6XCLnvqTlsZ7mgKcga2V5IOS4jeWtmOWcqFwiLDEwMDU2Olwi6K+35Zyo5YaZ5YWl576k5bGe5oCn5YmN5YWI5L2/55SoIGdldEdyb3VwQXR0cmlidXRlcyDmjqXlj6Pmm7TmlrDmnKzlnLDnvqTlsZ7mgKfvvIzpgb/lhY3lhrLnqoHjgIJcIiwxMDA1OTpcIumdnuaXl+iIsOeJiFwiLDEwMDYwOlwi576k5Lq65pWw6LaF6L+H5bey6K+75Zue5omn5Lq65pWw5LiK6ZmQXCIsMTAwNjE6XCLlnKjnur/mtojmga/kuI3mlK/mjIHlt7Lor7vlm57miadcIiwxMDA2MjpcIuaJvuS4jeWIsOe+pOa2iOaBr+eahOW3suivu+WbnuaJp+S/oeaBr1wiLDMwMDAxOlwi6K+35rGC5Y+C5pWw6ZSZ6K+v77yM6K+35qC55o2u6ZSZ6K+v5o+P6L+w5qOA5p+l6K+35rGC5Y+C5pWwXCIsMzAwMDI6XCJTREtBcHBJRCDkuI3ljLnphY1cIiwzMDAwMzpcIuivt+axgueahOeUqOaIt+W4kOWPt+S4jeWtmOWcqFwiLDMwMDA0Olwi6K+35rGC6ZyA6KaBIEFwcCDnrqHnkIblkZjmnYPpmZBcIiwzMDAwNTpcIuWFs+ezu+mTvuWtl+auteS4reWMheWQq+aVj+aEn+ivjVwiLDMwMDA2OlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIpLDMwMDA3OlwiXCIuY29uY2F0KFwi572R57uc6LaF5pe277yM6K+356iN5ZCO6YeN6K+VLiBcIiksMzAwMDg6XCLlubblj5Hlhpnlr7zoh7TlhpnlhrLnqoHvvIzlu7rorq7kvb/nlKjmibnph4/mlrnlvI9cIiwzMDAwOTpcIuWQjuWPsOemgeatouivpeeUqOaIt+WPkei1t+WKoOWlveWPi+ivt+axglwiLDMwMDEwOlwi6Ieq5bex55qE5aW95Y+L5pWw5bey6L6+57O757uf5LiK6ZmQXCIsMzAwMTE6XCLliIbnu4Tlt7Lovr7ns7vnu5/kuIrpmZBcIiwzMDAxMjpcIuacquWGs+aVsOW3sui+vuezu+e7n+S4iumZkFwiLDMwMDE0Olwi5a+55pa555qE5aW95Y+L5pWw5bey6L6+57O757uf5LiK6ZmQXCIsMzA1MTU6XCLor7fmsYLmt7vliqDlpb3lj4vml7bvvIzlr7nmlrnlnKjoh6rlt7HnmoTpu5HlkI3ljZXkuK3vvIzkuI3lhYHorrjliqDlpb3lj4tcIiwzMDUxNjpcIuivt+axgua3u+WKoOWlveWPi+aXtu+8jOWvueaWueeahOWKoOWlveWPi+mqjOivgeaWueW8j+aYr+S4jeWFgeiuuOS7u+S9leS6uua3u+WKoOiHquW3seS4uuWlveWPi1wiLDMwNTI1Olwi6K+35rGC5re75Yqg5aW95Y+L5pe277yM6Ieq5bex5Zyo5a+55pa555qE6buR5ZCN5Y2V5Lit77yM5LiN5YWB6K645Yqg5aW95Y+LXCIsMzA1Mzk6XCLnrYnlvoXlr7nmlrnlkIzmhI9cIiwzMDU0MDpcIua3u+WKoOWlveWPi+ivt+axguiiq+WuieWFqOetlueVpeaJk+WHu++8jOivt+WLv+mikee5geWPkei1t+a3u+WKoOWlveWPi+ivt+axglwiLDMxNzA0Olwi5LiO6K+35rGC5Yig6Zmk55qE5biQ5Y+35LmL6Ze05LiN5a2Y5Zyo5aW95Y+L5YWz57O7XCIsMzE3MDc6XCLliKDpmaTlpb3lj4vor7fmsYLooqvlronlhajnrZbnlaXmiZPlh7vvvIzor7fli7/popHnuYHlj5HotbfliKDpmaTlpb3lj4vor7fmsYJcIn0sQV89ZnVuY3Rpb24oZSl7QW4obixlKTt2YXIgdD1HbihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzKSkuY29kZT1lLmNvZGUsby5tZXNzYWdlPUNfW2UuY29kZV18fGUubWVzc2FnZSxvLmRhdGE9ZS5kYXRhfHx7fSxvfXJldHVybiBufShSbihFcnJvcikpLERfPW51bGwsTl89ZnVuY3Rpb24oZSl7RF89ZX0sa189ZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh5XyhlKSl9LE9fPWZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV07aWYoZSBpbnN0YW5jZW9mIEFfKXJldHVybiB0JiZudWxsIT09RF8mJkRfLmVtaXQoV24uRVJST1IsZSksUHJvbWlzZS5yZWplY3QoZSk7aWYoZSBpbnN0YW5jZW9mIEVycm9yKXt2YXIgbj1uZXcgQV8oe2NvZGU6emQuVU5DQVVHSFRfRVJST1IsbWVzc2FnZTplLm1lc3NhZ2V9KTtyZXR1cm4gdCYmbnVsbCE9PURfJiZEXy5lbWl0KFduLkVSUk9SLG4pLFByb21pc2UucmVqZWN0KG4pfWlmKGdjKGUpfHxnYyhlLmNvZGUpfHxnYyhlLm1lc3NhZ2UpKVFpLmVycm9yKFwiSU1Qcm9taXNlLnJlamVjdCDlv4XpobvmjIflrppjb2RlKOmUmeivr+eggSnlkoxtZXNzYWdlKOmUmeivr+S/oeaBrykhISFcIik7ZWxzZXtpZihjYyhlLmNvZGUpJiZ1YyhlLm1lc3NhZ2UpKXt2YXIgbz1uZXcgQV8oZSk7cmV0dXJuIHQmJm51bGwhPT1EXyYmRF8uZW1pdChXbi5FUlJPUixvKSxQcm9taXNlLnJlamVjdChvKX1RaS5lcnJvcihcIklNUHJvbWlzZS5yZWplY3QgY29kZSjplJnor6/noIEp5b+F6aG75Li65pWw5a2X77yMbWVzc2FnZSjplJnor6/kv6Hmga8p5b+F6aG75Li65a2X56ym5LiyISEhXCIpfX0sUl89ZnVuY3Rpb24oZSl7QW4obixlKTt2YXIgdD1HbihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiQzJDTW9kdWxlXCIsb31yZXR1cm4gRW4obixbe2tleTpcIm9uTmV3QzJDTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YUxpc3Qsbj1lLmlzSW5zdGFudE1lc3NhZ2Usbz1lLkMyQ1JlbWFpbmluZ1VucmVhZExpc3Qscj1lLkMyQ1BhaXJVbnJlYWRMaXN0O1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk5ld0MyQ01lc3NhZ2UgY291bnQ6XCIpLmNvbmNhdCh0Lmxlbmd0aCxcIiBpc0luc3RhbnRNZXNzYWdlOlwiKS5jb25jYXQobikpO3ZhciBhPXRoaXMuX25ld0MyQ01lc3NhZ2VTdG9yZWRBbmRTdW1tYXJ5KHtkYXRhTGlzdDp0LEMyQ1JlbWFpbmluZ1VucmVhZExpc3Q6byxDMkNQYWlyVW5yZWFkTGlzdDpyLGlzSW5zdGFudE1lc3NhZ2U6bn0pLHM9YS5jb252ZXJzYXRpb25PcHRpb25zTGlzdCxpPWEubWVzc2FnZUxpc3QsYz1hLmlzVW5yZWFkQzJDTWVzc2FnZTsodGhpcy5maWx0ZXJNb2RpZmllZE1lc3NhZ2UoaSkscy5sZW5ndGg+MCkmJnRoaXMuZ2V0TW9kdWxlKHVsKS5vbk5ld01lc3NhZ2Uoe2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0OnMsaXNJbnN0YW50TWVzc2FnZTpuLGlzVW5yZWFkQzJDTWVzc2FnZTpjfSk7dmFyIHU9dGhpcy5maWx0ZXJVbm1vZGlmaWVkTWVzc2FnZShpKTtuJiZ1Lmxlbmd0aD4wJiZ0aGlzLmVtaXRPdXRlckV2ZW50KFduLk1FU1NBR0VfUkVDRUlWRUQsdSksaS5sZW5ndGg9MH19LHtrZXk6XCJfbmV3QzJDTWVzc2FnZVN0b3JlZEFuZFN1bW1hcnlcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5kYXRhTGlzdCxuPWUuQzJDUmVtYWluaW5nVW5yZWFkTGlzdCxvPWUuQzJDUGFpclVucmVhZExpc3Qscj1lLmlzSW5zdGFudE1lc3NhZ2UsYT1udWxsLHM9W10saT1bXSxjPXt9LHU9dGhpcy5nZXRNb2R1bGUoaGwpLGw9dGhpcy5nZXRNb2R1bGUoU2wpLGQ9ITEscD0wLGc9dC5sZW5ndGg7cDxnO3ArKyl7dmFyIGg9dFtwXTtoLmN1cnJlbnRVc2VyPXRoaXMuZ2V0TXlVc2VySUQoKSxoLmNvbnZlcnNhdGlvblR5cGU9WW4uQ09OVl9DMkMsaC5pc1N5c3RlbU1lc3NhZ2U9ISFoLmlzU3lzdGVtTWVzc2FnZSwoZ2MoaC5uaWNrKXx8Z2MoaC5hdmF0YXIpKSYmKGQ9ITAsUWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9uZXdDMkNNZXNzYWdlU3RvcmVkQW5kU3VtbWFyeSBuaWNrIG9yIGF2YXRhciBtaXNzaW5nIVwiKSkpLGE9bmV3IE1fKGgpLGguZWxlbWVudHM9dS5wYXJzZUVsZW1lbnRzKGguZWxlbWVudHMsaC5mcm9tKSxhLnNldEVsZW1lbnQoaC5lbGVtZW50cyksYS5zZXROaWNrQW5kQXZhdGFyKHtuaWNrOmgubmljayxhdmF0YXI6aC5hdmF0YXJ9KTt2YXIgZj1hLmNvbnZlcnNhdGlvbklEO2lmKHIpe3ZhciBfPSExLG09dGhpcy5nZXRNb2R1bGUodWwpO2lmKGEuZnJvbSE9PXRoaXMuZ2V0TXlVc2VySUQoKSl7dmFyIHY9bS5nZXRMYXRlc3RNZXNzYWdlU2VudEJ5UGVlcihmKTtpZih2KXt2YXIgTT12Lm5pY2sseT12LmF2YXRhcjtkP2Euc2V0Tmlja0FuZEF2YXRhcih7bmljazpNLGF2YXRhcjp5fSk6TT09PWEubmljayYmeT09PWEuYXZhdGFyfHwoXz0hMCl9fWVsc2V7dmFyIEk9bS5nZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWUoZik7aWYoSSl7dmFyIEU9SS5uaWNrLFQ9SS5hdmF0YXI7RT09PWEubmljayYmVD09PWEuYXZhdGFyfHxtLm1vZGlmeU1lc3NhZ2VTZW50QnlNZSh7Y29udmVyc2F0aW9uSUQ6ZixsYXRlc3ROaWNrOmEubmljayxsYXRlc3RBdmF0YXI6YS5hdmF0YXJ9KX19dmFyIFM9MT09PXRbcF0uaXNNb2RpZmllZDtpZihtLmlzTWVzc2FnZVNlbnRCeUN1cnJlbnRJbnN0YW5jZShhKT9hLmlzTW9kaWZpZWQ9UzpTPSExLDA9PT1oLm1zZ0xpZmVUaW1lKWEuX29ubGluZU9ubHlGbGFnPSEwLGkucHVzaChhKTtlbHNle2lmKCFtLnB1c2hJbnRvTWVzc2FnZUxpc3QoaSxhLFMpKWNvbnRpbnVlO18mJihtLm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyKHtjb252ZXJzYXRpb25JRDpmLGxhdGVzdE5pY2s6YS5uaWNrLGxhdGVzdEF2YXRhcjphLmF2YXRhcn0pLG0udXBkYXRlVXNlclByb2ZpbGVTcGVjaWZpZWRLZXkoe2NvbnZlcnNhdGlvbklEOmYsbmljazphLm5pY2ssYXZhdGFyOmEuYXZhdGFyfSkpfXImJmEuY2xpZW50VGltZT4wJiZsLmFkZE1lc3NhZ2VEZWxheShhLmNsaWVudFRpbWUpfWlmKDAhPT1oLm1zZ0xpZmVUaW1lKXtpZighMT09PWEuX29ubGluZU9ubHlGbGFnKWlmKGdjKGNbZl0pKXt2YXIgQz0wO1wiaW5cIj09PWEuZmxvdyYmKGEuX2lzRXhjbHVkZWRGcm9tVW5yZWFkQ291bnR8fChDPTEpKSxjW2ZdPXMucHVzaCh7Y29udmVyc2F0aW9uSUQ6Zix1bnJlYWRDb3VudDpDLHR5cGU6YS5jb252ZXJzYXRpb25UeXBlLHN1YlR5cGU6YS5jb252ZXJzYXRpb25TdWJUeXBlLGxhc3RNZXNzYWdlOmEuX2lzRXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2U/XCJcIjphfSktMX1lbHNle3ZhciBBPWNbZl07c1tBXS50eXBlPWEuY29udmVyc2F0aW9uVHlwZSxzW0FdLnN1YlR5cGU9YS5jb252ZXJzYXRpb25TdWJUeXBlLHNbQV0ubGFzdE1lc3NhZ2U9YS5faXNFeGNsdWRlZEZyb21MYXN0TWVzc2FnZT9cIlwiOmEsXCJpblwiPT09YS5mbG93JiYoYS5faXNFeGNsdWRlZEZyb21VbnJlYWRDb3VudHx8c1tBXS51bnJlYWRDb3VudCsrKX19ZWxzZSBhLl9vbmxpbmVPbmx5RmxhZz0hMH12YXIgRD0hMTtpZihwYyhvKSlmb3IodmFyIE49ZnVuY3Rpb24oZSx0KXtpZihvW2VdLnVucmVhZENvdW50PjApe0Q9ITA7dmFyIG49cy5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jb252ZXJzYXRpb25JRD09PVwiQzJDXCIuY29uY2F0KG9bZV0uZnJvbSl9KSk7bj9uLnVucmVhZENvdW50PW9bZV0udW5yZWFkQ291bnQ6cy5wdXNoKHtjb252ZXJzYXRpb25JRDpcIkMyQ1wiLmNvbmNhdChvW2VdLmZyb20pLHVucmVhZENvdW50Om9bZV0udW5yZWFkQ291bnQsdHlwZTpZbi5DT05WX0MyQ30pfX0saz0wLE89by5sZW5ndGg7azxPO2srKylOKGspO2lmKHBjKG4pKWZvcih2YXIgUj1mdW5jdGlvbihlLHQpe3MuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udmVyc2F0aW9uSUQ9PT1cIkMyQ1wiLmNvbmNhdChuW2VdLmZyb20pfSkpfHxzLnB1c2goe2NvbnZlcnNhdGlvbklEOlwiQzJDXCIuY29uY2F0KG5bZV0uZnJvbSksdHlwZTpZbi5DT05WX0MyQyxsYXN0TXNnVGltZTpuW2VdLmxhc3RNc2dUaW1lfSl9LEw9MCxiPW4ubGVuZ3RoO0w8YjtMKyspUihMKTtyZXR1cm57Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6cyxtZXNzYWdlTGlzdDppLGlzVW5yZWFkQzJDTWVzc2FnZTpEfX19LHtrZXk6XCJvbkMyQ01lc3NhZ2VSZXZva2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25DMkNNZXNzYWdlUmV2b2tlZCBjb3VudDpcIikuY29uY2F0KGUuZGF0YUxpc3QubGVuZ3RoKSk7dmFyIG49dGhpcy5nZXRNb2R1bGUodWwpLG89W10scj1udWxsO2UuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZS5jMmNNZXNzYWdlUmV2b2tlZE5vdGlmeSl7dmFyIGE9ZS5jMmNNZXNzYWdlUmV2b2tlZE5vdGlmeS5yZXZva2VkSW5mb3M7Z2MoYSl8fGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIGE9dC5nZXRNeVVzZXJJRCgpPT09ZS5mcm9tP1wiXCIuY29uY2F0KFluLkNPTlZfQzJDKS5jb25jYXQoZS50byk6XCJcIi5jb25jYXQoWW4uQ09OVl9DMkMpLmNvbmNhdChlLmZyb20pOyhyPW4ucmV2b2tlKGEsZS5zZXF1ZW5jZSxlLnJhbmRvbSkpJiZvLnB1c2gocil9KSl9fSkpLDAhPT1vLmxlbmd0aCYmKG4ub25NZXNzYWdlUmV2b2tlZChvKSx0aGlzLmVtaXRPdXRlckV2ZW50KFduLk1FU1NBR0VfUkVWT0tFRCxvKSl9fSx7a2V5Olwib25DMkNNZXNzYWdlUmVhZFJlY2VpcHRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoIUpjKGUuYzJjTWVzc2FnZVJlYWRSZWNlaXB0KSl7dmFyIG49ZS5jMmNNZXNzYWdlUmVhZFJlY2VpcHQudG87ZS5jMmNNZXNzYWdlUmVhZFJlY2VpcHQudWluUGFpclJlYWRBcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1lLnBlZXJSZWFkVGltZTtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuX29uQzJDTWVzc2FnZVJlYWRSZWNlaXB0IHRvOlwiKS5jb25jYXQobixcIiBwZWVyUmVhZFRpbWU6XCIpLmNvbmNhdChvKSk7dmFyIHI9XCJcIi5jb25jYXQoWW4uQ09OVl9DMkMpLmNvbmNhdChuKSxhPXQuZ2V0TW9kdWxlKHVsKTthLnJlY29yZFBlZXJSZWFkVGltZShyLG8pLGEudXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eShyLG8pfSkpfX0pKX19LHtrZXk6XCJvbkMyQ01lc3NhZ2VSZWFkTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmRhdGFMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKCFKYyhlLmMyY01lc3NhZ2VSZWFkTm90aWNlKSl7dmFyIG49dC5nZXRNb2R1bGUodWwpO2UuYzJjTWVzc2FnZVJlYWROb3RpY2UudWluUGFpclJlYWRBcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1lLmZyb20scj1lLnBlZXJSZWFkVGltZTtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIub25DMkNNZXNzYWdlUmVhZE5vdGljZSBmcm9tOlwiKS5jb25jYXQobyxcIiBsYXN0UmVhZFRpbWU6XCIpLmNvbmNhdChyKSk7dmFyIGE9XCJcIi5jb25jYXQoWW4uQ09OVl9DMkMpLmNvbmNhdChvKTtuLnVwZGF0ZUlzUmVhZEFmdGVyUmVhZFJlcG9ydCh7Y29udmVyc2F0aW9uSUQ6YSxsYXN0TWVzc2FnZVRpbWU6cn0pLG4udXBkYXRlVW5yZWFkQ291bnQoYSl9KSl9fSkpfX0se2tleTpcInNlbmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9jcmVhdGVDMkNNZXNzYWdlUGFjayhlLHQpO3JldHVybiB0aGlzLnJlcXVlc3Qobil9fSx7a2V5OlwiX2NyZWF0ZUMyQ01lc3NhZ2VQYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1udWxsO3QmJih0Lm9mZmxpbmVQdXNoSW5mbyYmKG49dC5vZmZsaW5lUHVzaEluZm8pLCEwPT09dC5vbmxpbmVVc2VyT25seSYmKG4/bi5kaXNhYmxlUHVzaD0hMDpuPXtkaXNhYmxlUHVzaDohMH0pKTt2YXIgbz1cIlwiO3VjKGUuY2xvdWRDdXN0b21EYXRhKSYmZS5jbG91ZEN1c3RvbURhdGEubGVuZ3RoPjAmJihvPWUuY2xvdWRDdXN0b21EYXRhKTt2YXIgcj1bXTtpZihkYyh0KSYmZGModC5tZXNzYWdlQ29udHJvbEluZm8pKXt2YXIgYT10Lm1lc3NhZ2VDb250cm9sSW5mbyxzPWEuZXhjbHVkZWRGcm9tVW5yZWFkQ291bnQsaT1hLmV4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlOyEwPT09cyYmci5wdXNoKFwiTm9VbnJlYWRcIiksITA9PT1pJiZyLnB1c2goXCJOb0xhc3RNc2dcIil9cmV0dXJue3Byb3RvY29sTmFtZTpibCx0amdJRDp0aGlzLmdlbmVyYXRlVGpnSUQoZSkscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSx0b0FjY291bnQ6ZS50byxtc2dCb2R5OmUuZ2V0RWxlbWVudHMoKSxjbG91ZEN1c3RvbURhdGE6byxtc2dTZXE6ZS5zZXF1ZW5jZSxtc2dSYW5kb206ZS5yYW5kb20sbXNnTGlmZVRpbWU6dGhpcy5pc09ubGluZU1lc3NhZ2UoZSx0KT8wOnZvaWQgMCxuaWNrOmUubmljayxhdmF0YXI6ZS5hdmF0YXIsb2ZmbGluZVB1c2hJbmZvOm4/e3B1c2hGbGFnOiEwPT09bi5kaXNhYmxlUHVzaD8xOjAsdGl0bGU6bi50aXRsZXx8XCJcIixkZXNjOm4uZGVzY3JpcHRpb258fFwiXCIsZXh0Om4uZXh0ZW5zaW9ufHxcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6ITA9PT1uLmlnbm9yZUlPU0JhZGdlPzE6MH0sYW5kcm9pZEluZm86e09QUE9DaGFubmVsSUQ6bi5hbmRyb2lkT1BQT0NoYW5uZWxJRHx8XCJcIn19OnZvaWQgMCxtZXNzYWdlQ29udHJvbEluZm86cixjbGllbnRUaW1lOmUuY2xpZW50VGltZX19fX0se2tleTpcImlzT25saW5lTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISghdHx8ITAhPT10Lm9ubGluZVVzZXJPbmx5KX19LHtrZXk6XCJyZXZva2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnhsLHJlcXVlc3REYXRhOnttc2dJbmZvOntmcm9tQWNjb3VudDplLmZyb20sdG9BY2NvdW50OmUudG8sbXNnU2VxOmUuc2VxdWVuY2UsbXNnUmFuZG9tOmUucmFuZG9tLG1zZ1RpbWVTdGFtcDplLnRpbWV9fX0pfX0se2tleTpcImRlbGV0ZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnRvLG49ZS5rZXlMaXN0O3JldHVybiBRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZU1lc3NhZ2UgdG9BY2NvdW50OlwiKS5jb25jYXQodCxcIiBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6V2wscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSx0bzp0LGtleUxpc3Q6bn19KX19LHtrZXk6XCJzZXRNZXNzYWdlUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvbnZlcnNhdGlvbklELG89ZS5sYXN0TWVzc2FnZVRpbWUscj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0TWVzc2FnZVJlYWRcIik7UWkubG9nKFwiXCIuY29uY2F0KHIsXCIgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChuLFwiIGxhc3RNZXNzYWdlVGltZTpcIikuY29uY2F0KG8pKSxjYyhvKXx8UWkud2FybihcIlwiLmNvbmNhdChyLFwiIOivt+WLv+S/ruaUuSBDb252ZXJzYXRpb24ubGFzdE1lc3NhZ2UubGFzdFRpbWXvvIzlkKbliJnlj6/og73kvJrlr7zoh7Tlt7Lor7vkuIrmiqXnu5PmnpzkuI3lh4bnoa5cIikpO3ZhciBhPW5ldyBkcChVcCk7cmV0dXJuIGEuc2V0TWVzc2FnZShcImNvbnZlcnNhdGlvbklEOlwiLmNvbmNhdChuLFwiIGxhc3RNZXNzYWdlVGltZTpcIikuY29uY2F0KG8pKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpWbCxyZXF1ZXN0RGF0YTp7QzJDTXNnUmVhZGVkOntjb29raWU6XCJcIixDMkNNc2dSZWFkZWRJdGVtOlt7dG9BY2NvdW50Om4ucmVwbGFjZShcIkMyQ1wiLFwiXCIpLGxhc3RNZXNzYWdlVGltZTpvLHJlY2VpcHQ6MX1dfX19KS50aGVuKChmdW5jdGlvbigpe2Euc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQocixcIiBva1wiKSk7dmFyIGU9dC5nZXRNb2R1bGUodWwpO3JldHVybiBlLnVwZGF0ZUlzUmVhZEFmdGVyUmVhZFJlcG9ydCh7Y29udmVyc2F0aW9uSUQ6bixsYXN0TWVzc2FnZVRpbWU6b30pLGUudXBkYXRlVW5yZWFkQ291bnQobikseV8oKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmxvZyhcIlwiLmNvbmNhdChyLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfX0se2tleTpcImdldFJvYW1pbmdNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRSb2FtaW5nTWVzc2FnZVwiKSxvPWUucGVlckFjY291bnQscj1lLmNvbnZlcnNhdGlvbklELGE9ZS5jb3VudCxzPWUubGFzdE1lc3NhZ2VUaW1lLGk9ZS5tZXNzYWdlS2V5LGM9XCJwZWVyQWNjb3VudDpcIi5jb25jYXQobyxcIiBjb3VudDpcIikuY29uY2F0KGF8fDE1LFwiIGxhc3RNZXNzYWdlVGltZTpcIikuY29uY2F0KHN8fDAsXCIgbWVzc2FnZUtleTpcIikuY29uY2F0KGkpO1FpLmxvZyhcIlwiLmNvbmNhdChuLFwiIFwiKS5jb25jYXQoYykpO3ZhciB1PW5ldyBkcChPcCk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkhsLHJlcXVlc3REYXRhOntwZWVyQWNjb3VudDpvLGNvdW50OmF8fDE1LGxhc3RNZXNzYWdlVGltZTpzfHwwLG1lc3NhZ2VLZXk6aX19KS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz1lLmRhdGEsYT1vLmNvbXBsZXRlLHM9by5tZXNzYWdlTGlzdCxpPW8ubWVzc2FnZUtleSxsPW8ubGFzdE1lc3NhZ2VUaW1lO2djKHMpP1FpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBjb21wbGV0ZTpcIikuY29uY2F0KGEsXCIgYnV0IG1lc3NhZ2VMaXN0IGlzIHVuZGVmaW5lZCFcIikpOlFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBjb21wbGV0ZTpcIikuY29uY2F0KGEsXCIgY291bnQ6XCIpLmNvbmNhdChzLmxlbmd0aCkpLHUuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KGMsXCIgY29tcGxldGU6XCIpLmNvbmNhdChhLFwiIGxlbmd0aDpcIikuY29uY2F0KHMubGVuZ3RoKSkuZW5kKCk7dmFyIGQ9dC5nZXRNb2R1bGUodWwpOzE9PT1hJiZkLnNldENvbXBsZXRlZChyKTt2YXIgcD1kLnN0b3JlUm9hbWluZ01lc3NhZ2UocyxyKTtkLm1vZGlmeU1lc3NhZ2VMaXN0KHIpLGQudXBkYXRlSXNSZWFkKHIpLGQudXBkYXRlUm9hbWluZ01lc3NhZ2VLZXlBbmRUaW1lKHIsaSxsKTt2YXIgZz1kLmdldFBlZXJSZWFkVGltZShyKTtpZihRaS5sb2coXCJcIi5jb25jYXQobixcIiB1cGRhdGUgaXNQZWVyUmVhZCBwcm9wZXJ0eS4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChyLFwiIHBlZXJSZWFkVGltZTpcIikuY29uY2F0KGcpKSxnKWQudXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eShyLGcpO2Vsc2V7dmFyIGg9ci5yZXBsYWNlKFluLkNPTlZfQzJDLFwiXCIpO3QuZ2V0UmVtb3RlUGVlclJlYWRUaW1lKFtoXSkudGhlbigoZnVuY3Rpb24oKXtkLnVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkocixkLmdldFBlZXJSZWFkVGltZShyKSl9KSl9cmV0dXJuIHB9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTt1LnNldE1lc3NhZ2UoYykuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJnZXRSZW1vdGVQZWVyUmVhZFRpbWVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldFJlbW90ZVBlZXJSZWFkVGltZVwiKTtpZihKYyhlKSlyZXR1cm4gUWkud2FybihcIlwiLmNvbmNhdChuLFwiIHVzZXJJRExpc3QgaXMgZW1wdHkhXCIpKSxQcm9taXNlLnJlc29sdmUoKTt2YXIgbz1uZXcgZHAoeHApO3JldHVybiBRaS5sb2coXCJcIi5jb25jYXQobixcIiB1c2VySURMaXN0OlwiKS5jb25jYXQoZSkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmpsLHJlcXVlc3REYXRhOnt1c2VySURMaXN0OmV9fSkudGhlbigoZnVuY3Rpb24ocil7dmFyIGE9ci5kYXRhLnBlZXJSZWFkVGltZUxpc3Q7UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIHBlZXJSZWFkVGltZUxpc3Q6XCIpLmNvbmNhdChhKSk7Zm9yKHZhciBzPVwiXCIsaT10LmdldE1vZHVsZSh1bCksYz0wO2M8ZS5sZW5ndGg7YysrKXMrPVwiXCIuY29uY2F0KGVbY10sXCItXCIpLmNvbmNhdChhW2NdLFwiIFwiKSxhW2NdPjAmJmkucmVjb3JkUGVlclJlYWRUaW1lKFwiQzJDXCIuY29uY2F0KGVbY10pLGFbY10pO28uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKHMpLmVuZCgpfSkpLmNhdGNoKChmdW5jdGlvbihlKXt0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSl9KSl9fV0pLG59KEFsKSxMXz1IZS5maW5kSW5kZXgsYl89ITAsd189emUoXCJmaW5kSW5kZXhcIik7XCJmaW5kSW5kZXhcImluW10mJkFycmF5KDEpLmZpbmRJbmRleCgoZnVuY3Rpb24oKXtiXz0hMX0pKSxrZSh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6Yl98fCF3X30se2ZpbmRJbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gTF8odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxJbyhcImZpbmRJbmRleFwiKTt2YXIgR189W10sUF89R18uc29ydCxVXz1yKChmdW5jdGlvbigpe0dfLnNvcnQodm9pZCAwKX0pKSxGXz1yKChmdW5jdGlvbigpe0dfLnNvcnQobnVsbCl9KSkscV89amUoXCJzb3J0XCIpO2tlKHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDpVX3x8IUZffHwhcV99LHtzb3J0OmZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP1BfLmNhbGwoTGUodGhpcykpOlBfLmNhbGwoTGUodGhpcyksT2UoZSkpfX0pO3ZhciB4Xz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLmxpc3Q9bmV3IE1hcCx0aGlzLl9jbGFzc05hbWU9XCJNZXNzYWdlTGlzdEhhbmRsZXJcIix0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5UGVlck1hcD1uZXcgTWFwLHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlNZU1hcD1uZXcgTWFwLHRoaXMuX2dyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlTWFwPW5ldyBNYXB9cmV0dXJuIEVuKGUsW3trZXk6XCJnZXRMb2NhbE9sZGVzdE1lc3NhZ2VCeUNvbnZlcnNhdGlvbklEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIG51bGw7aWYoIXRoaXMubGlzdC5oYXMoZSkpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5saXN0LmdldChlKS52YWx1ZXMoKTtyZXR1cm4gdD90Lm5leHQoKS52YWx1ZTpudWxsfX0se2tleTpcInB1c2hJblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0sbj1lLmNvbnZlcnNhdGlvbklELG89ZS5JRCxyPSEwO3RoaXMubGlzdC5oYXMobil8fHRoaXMubGlzdC5zZXQobixuZXcgTWFwKTt2YXIgYT10aGlzLmxpc3QuZ2V0KG4pLmhhcyhvKTtpZihhKXt2YXIgcz10aGlzLmxpc3QuZ2V0KG4pLmdldChvKTtpZighdHx8ITA9PT1zLmlzTW9kaWZpZWQpcmV0dXJuIHI9ITF9cmV0dXJuIHRoaXMubGlzdC5nZXQobikuc2V0KG8sZSksdGhpcy5fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIobixlKSx0aGlzLl9zZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWUobixlKSx0aGlzLl9zZXRHcm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZShuLGUpLHJ9fSx7a2V5OlwidW5zaGlmdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKHBjKGUpKXtpZihlLmxlbmd0aD4wKXt0PWVbMF0uY29udmVyc2F0aW9uSUQ7dmFyIG49ZS5sZW5ndGg7dGhpcy5fdW5zaGlmdE11bHRpcGxlTWVzc2FnZXMoZSksdGhpcy5fc2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2UodCxlW24tMV0pfX1lbHNlIHQ9ZS5jb252ZXJzYXRpb25JRCx0aGlzLl91bnNoaWZ0U2luZ2xlTWVzc2FnZShlKSx0aGlzLl9zZXRHcm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZSh0LGUpO2lmKHQmJnQuc3RhcnRzV2l0aChZbi5DT05WX0MyQykpe3ZhciBvPUFycmF5LmZyb20odGhpcy5saXN0LmdldCh0KS52YWx1ZXMoKSkscj1vLmxlbmd0aDtpZigwPT09cilyZXR1cm47Zm9yKHZhciBhPXItMTthPj0wO2EtLSlpZihcIm91dFwiPT09b1thXS5mbG93KXt0aGlzLl9zZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWUodCxvW2FdKTticmVha31mb3IodmFyIHM9ci0xO3M+PTA7cy0tKWlmKFwiaW5cIj09PW9bc10uZmxvdyl7dGhpcy5fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIodCxvW3NdKTticmVha319fX0se2tleTpcIl91bnNoaWZ0U2luZ2xlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLklEO2lmKCF0aGlzLmxpc3QuaGFzKHQpKXJldHVybiB0aGlzLmxpc3Quc2V0KHQsbmV3IE1hcCksdm9pZCB0aGlzLmxpc3QuZ2V0KHQpLnNldChuLGUpO3ZhciBvPUFycmF5LmZyb20odGhpcy5saXN0LmdldCh0KSk7by51bnNoaWZ0KFtuLGVdKSx0aGlzLmxpc3Quc2V0KHQsbmV3IE1hcChvKSl9fSx7a2V5OlwiX3Vuc2hpZnRNdWx0aXBsZU1lc3NhZ2VzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLG49W10sbz1lWzBdLmNvbnZlcnNhdGlvbklELHI9dGhpcy5saXN0LmhhcyhvKT9BcnJheS5mcm9tKHRoaXMubGlzdC5nZXQobykpOltdLGE9MDthPHQ7YSsrKW4ucHVzaChbZVthXS5JRCxlW2FdXSk7dGhpcy5saXN0LnNldChvLG5ldyBNYXAobi5jb25jYXQocikpKX19LHtrZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5JRDt0aGlzLmxpc3QuaGFzKHQpJiZ0aGlzLmxpc3QuZ2V0KHQpLmRlbGV0ZShuKX19LHtrZXk6XCJyZXZva2VcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7aWYoUWkuZGVidWcoXCJyZXZva2UgbWVzc2FnZVwiLGUsdCxuKSx0aGlzLmxpc3QuaGFzKGUpKXt2YXIgbyxyPUJuKHRoaXMubGlzdC5nZXQoZSkpO3RyeXtmb3Ioci5zKCk7IShvPXIubigpKS5kb25lOyl7dmFyIGE9UG4oby52YWx1ZSwyKVsxXTtpZihhLnNlcXVlbmNlPT09dCYmIWEuaXNSZXZva2VkJiYoZ2Mobil8fGEucmFuZG9tPT09bikpcmV0dXJuIGEuaXNSZXZva2VkPSEwLGF9fWNhdGNoKHMpe3IuZShzKX1maW5hbGx5e3IuZigpfX1yZXR1cm4gbnVsbH19LHtrZXk6XCJyZW1vdmVCeUNvbnZlcnNhdGlvbklEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5saXN0LmhhcyhlKSYmKHRoaXMubGlzdC5kZWxldGUoZSksdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJNYXAuZGVsZXRlKGUpLHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlNZU1hcC5kZWxldGUoZSkpfX0se2tleTpcImZpbmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQsbj1udWxsLG89Qm4odGhpcy5saXN0KTt0cnl7Zm9yKG8ucygpOyEodD1vLm4oKSkuZG9uZTspe3ZhciByPVBuKHQudmFsdWUsMilbMV07ci5oYXMoZSkmJihuPXIuZ2V0KGUpKX19Y2F0Y2goYSl7by5lKGEpfWZpbmFsbHl7by5mKCl9cmV0dXJuIG59fSx7a2V5OlwidXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49W107aWYodGhpcy5saXN0LmhhcyhlKSl7dmFyIG8scj1Cbih0aGlzLmxpc3QuZ2V0KGUpKTt0cnl7Zm9yKHIucygpOyEobz1yLm4oKSkuZG9uZTspe3ZhciBhPVBuKG8udmFsdWUsMilbMV07YS50aW1lPD10JiYhYS5pc1BlZXJSZWFkJiZcIm91dFwiPT09YS5mbG93JiYoYS5pc1BlZXJSZWFkPSEwLG4ucHVzaChhKSl9fWNhdGNoKHMpe3IuZShzKX1maW5hbGx5e3IuZigpfVFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIudXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eSBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgcGVlclJlYWRUaW1lOlwiKS5jb25jYXQodCxcIiBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSl9cmV0dXJuIG59fSx7a2V5OlwidXBkYXRlTWVzc2FnZUlzTW9kaWZpZWRQcm9wZXJ0eVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLklEO2lmKHRoaXMubGlzdC5oYXModCkpe3ZhciBvPXRoaXMubGlzdC5nZXQodCkuZ2V0KG4pO28mJihvLmlzTW9kaWZpZWQ9ITApfX19LHtrZXk6XCJoYXNMb2NhbE1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubGlzdC5oYXMoZSl9fSx7a2V5OlwiZ2V0TG9jYWxNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhhc0xvY2FsTWVzc2FnZUxpc3QoZSk/VW4odGhpcy5saXN0LmdldChlKS52YWx1ZXMoKSk6W119fSx7a2V5OlwiaGFzTG9jYWxNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIXRoaXMuaGFzTG9jYWxNZXNzYWdlTGlzdChlKSYmdGhpcy5saXN0LmdldChlKS5oYXModCl9fSx7a2V5OlwiZ2V0TG9jYWxNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5oYXNMb2NhbE1lc3NhZ2UoZSx0KT90aGlzLmxpc3QuZ2V0KGUpLmdldCh0KTpudWxsfX0se2tleTpcImdldExvY2FsTGFzdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldExvY2FsTWVzc2FnZUxpc3QoZSk7cmV0dXJuIHRbdC5sZW5ndGgtMV19fSx7a2V5OlwiX3NldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLnN0YXJ0c1dpdGgoWW4uQ09OVl9DMkMpJiZcImluXCI9PT10LmZsb3cmJnRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlQZWVyTWFwLnNldChlLHQpfX0se2tleTpcIl9zZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Uuc3RhcnRzV2l0aChZbi5DT05WX0MyQykmJlwib3V0XCI9PT10LmZsb3cmJnRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlNZU1hcC5zZXQoZSx0KX19LHtrZXk6XCJfc2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Uuc3RhcnRzV2l0aChZbi5DT05WX0dST1VQKSYmdGhpcy5fZ3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2VNYXAuc2V0KGUsdC5zZXF1ZW5jZSl9fSx7a2V5OlwiZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJNYXAuZ2V0KGUpfX0se2tleTpcImdldExhdGVzdE1lc3NhZ2VTZW50QnlNZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXAuZ2V0KGUpfX0se2tleTpcImdldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2dyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLmdldChlKXx8MH19LHtrZXk6XCJtb2RpZnlNZXNzYWdlU2VudEJ5UGVlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLmxhdGVzdE5pY2ssbz1lLmxhdGVzdEF2YXRhcixyPXRoaXMubGlzdC5nZXQodCk7aWYoIUpjKHIpKXt2YXIgYT1BcnJheS5mcm9tKHIudmFsdWVzKCkpLHM9YS5sZW5ndGg7aWYoMCE9PXMpe2Zvcih2YXIgaT1udWxsLGM9MCx1PSExLGw9cy0xO2w+PTA7bC0tKVwiaW5cIj09PWFbbF0uZmxvdyYmKChpPWFbbF0pLm5pY2shPT1uJiYoaS5zZXROaWNrQW5kQXZhdGFyKHtuaWNrOm59KSx1PSEwKSxpLmF2YXRhciE9PW8mJihpLnNldE5pY2tBbmRBdmF0YXIoe2F2YXRhcjpvfSksdT0hMCksdSYmKGMrPTEpKTtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQodCxcIiBjb3VudDpcIikuY29uY2F0KGMpKX19fX0se2tleTpcIm1vZGlmeU1lc3NhZ2VTZW50QnlNZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLmxhdGVzdE5pY2ssbz1lLmxhdGVzdEF2YXRhcixyPXRoaXMubGlzdC5nZXQodCk7aWYoIUpjKHIpKXt2YXIgYT1BcnJheS5mcm9tKHIudmFsdWVzKCkpLHM9YS5sZW5ndGg7aWYoMCE9PXMpe2Zvcih2YXIgaT1udWxsLGM9MCx1PSExLGw9cy0xO2w+PTA7bC0tKVwib3V0XCI9PT1hW2xdLmZsb3cmJigoaT1hW2xdKS5uaWNrIT09biYmKGkuc2V0Tmlja0FuZEF2YXRhcih7bmljazpufSksdT0hMCksaS5hdmF0YXIhPT1vJiYoaS5zZXROaWNrQW5kQXZhdGFyKHthdmF0YXI6b30pLHU9ITApLHUmJihjKz0xKSk7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5tb2RpZnlNZXNzYWdlU2VudEJ5TWUgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdCh0LFwiIGNvdW50OlwiKS5jb25jYXQoYykpfX19fSx7a2V5OlwidHJhdmVyc2FsXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZigwIT09dGhpcy5saXN0LnNpemUmJi0xPT09UWkuZ2V0TGV2ZWwoKSl7Y29uc29sZS5ncm91cChcImNvbnZlcnNhdGlvbklELW1lc3NhZ2VDb3VudFwiKTt2YXIgZSx0PUJuKHRoaXMubGlzdCk7dHJ5e2Zvcih0LnMoKTshKGU9dC5uKCkpLmRvbmU7KXt2YXIgbj1QbihlLnZhbHVlLDIpLG89blswXSxyPW5bMV07Y29uc29sZS5sb2coXCJcIi5jb25jYXQobyxcIi1cIikuY29uY2F0KHIuc2l6ZSkpfX1jYXRjaChhKXt0LmUoYSl9ZmluYWxseXt0LmYoKX1jb25zb2xlLmdyb3VwRW5kKCl9fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmxpc3QuY2xlYXIoKSx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5UGVlck1hcC5jbGVhcigpLHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlNZU1hcC5jbGVhcigpLHRoaXMuX2dyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLmNsZWFyKCl9fV0pLGV9KCksVl89XCJfYTJLZXlBbmRUaW55SURVcGRhdGVkXCIsS189XCJfY2xvdWRDb25maWdVcGRhdGVkXCIsQl89XCJfcHJvZmlsZVVwZGF0ZWRcIjtmdW5jdGlvbiBIXyhlKXt0aGlzLm1peGluKGUpfUhfLm1peGluPWZ1bmN0aW9uKGUpe3ZhciB0PWUucHJvdG90eXBlfHxlO3QuX2lzUmVhZHk9ITEsdC5yZWFkeT1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdO2lmKGUpcmV0dXJuIHRoaXMuX2lzUmVhZHk/dm9pZCh0P2UuY2FsbCh0aGlzKTpzZXRUaW1lb3V0KGUsMSkpOih0aGlzLl9yZWFkeVF1ZXVlPXRoaXMuX3JlYWR5UXVldWV8fFtdLHZvaWQgdGhpcy5fcmVhZHlRdWV1ZS5wdXNoKGUpKX0sdC50cmlnZ2VyUmVhZHk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2lzUmVhZHk9ITAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXt2YXIgdD1lLl9yZWFkeVF1ZXVlO2UuX3JlYWR5UXVldWU9W10sdCYmdC5sZW5ndGg+MCYmdC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmNhbGwodGhpcyl9KSxlKX0pLDEpfSx0LnJlc2V0UmVhZHk9ZnVuY3Rpb24oKXt0aGlzLl9pc1JlYWR5PSExLHRoaXMuX3JlYWR5UXVldWU9W119LHQuaXNSZWFkeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1JlYWR5fX07dmFyIGpfPVtcImpwZ1wiLFwianBlZ1wiLFwiZ2lmXCIsXCJwbmdcIixcImJtcFwiLFwiaW1hZ2VcIixcIndlYnBcIl0sV189W1wibXA0XCJdLFlfPTEsJF89Mix6Xz0zLEpfPTI1NSxYXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dmFyIG49dGhpczt5bih0aGlzLGUpLEpjKHQpfHwodGhpcy51c2VySUQ9dC51c2VySUR8fFwiXCIsdGhpcy5uaWNrPXQubmlja3x8XCJcIix0aGlzLmdlbmRlcj10LmdlbmRlcnx8XCJcIix0aGlzLmJpcnRoZGF5PXQuYmlydGhkYXl8fDAsdGhpcy5sb2NhdGlvbj10LmxvY2F0aW9ufHxcIlwiLHRoaXMuc2VsZlNpZ25hdHVyZT10LnNlbGZTaWduYXR1cmV8fFwiXCIsdGhpcy5hbGxvd1R5cGU9dC5hbGxvd1R5cGV8fFluLkFMTE9XX1RZUEVfQUxMT1dfQU5ZLHRoaXMubGFuZ3VhZ2U9dC5sYW5ndWFnZXx8MCx0aGlzLmF2YXRhcj10LmF2YXRhcnx8XCJcIix0aGlzLm1lc3NhZ2VTZXR0aW5ncz10Lm1lc3NhZ2VTZXR0aW5nc3x8MCx0aGlzLmFkbWluRm9yYmlkVHlwZT10LmFkbWluRm9yYmlkVHlwZXx8WW4uRk9SQklEX1RZUEVfTk9ORSx0aGlzLmxldmVsPXQubGV2ZWx8fDAsdGhpcy5yb2xlPXQucm9sZXx8MCx0aGlzLmxhc3RVcGRhdGVkVGltZT0wLHRoaXMucHJvZmlsZUN1c3RvbUZpZWxkPVtdLEpjKHQucHJvZmlsZUN1c3RvbUZpZWxkKXx8dC5wcm9maWxlQ3VzdG9tRmllbGQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bi5wcm9maWxlQ3VzdG9tRmllbGQucHVzaCh7a2V5OmUua2V5LHZhbHVlOmUudmFsdWV9KX0pKSl9cmV0dXJuIEVuKGUsW3trZXk6XCJ2YWxpZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSEwLG49XCJcIjtpZihKYyhlKSlyZXR1cm57dmFsaWQ6ITEsdGlwczpcImVtcHR5IG9wdGlvbnNcIn07aWYoZS5wcm9maWxlQ3VzdG9tRmllbGQpZm9yKHZhciBvPWUucHJvZmlsZUN1c3RvbUZpZWxkLmxlbmd0aCxyPW51bGwsYT0wO2E8bzthKyspe2lmKHI9ZS5wcm9maWxlQ3VzdG9tRmllbGRbYV0sIXVjKHIua2V5KXx8LTE9PT1yLmtleS5pbmRleE9mKFwiVGFnX1Byb2ZpbGVfQ3VzdG9tXCIpKXJldHVybnt2YWxpZDohMSx0aXBzOlwi6Ieq5a6a5LmJ6LWE5paZ5a2X5q6155qE5YmN57yA5b+F6aG75pivIFRhZ19Qcm9maWxlX0N1c3RvbVwifTtpZighdWMoci52YWx1ZSkpcmV0dXJue3ZhbGlkOiExLHRpcHM6XCLoh6rlrprkuYnotYTmlpnlrZfmrrXnmoQgdmFsdWUg5b+F6aG75piv5a2X56ym5LiyXCJ9fWZvcih2YXIgcyBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHMpKXtpZihcInByb2ZpbGVDdXN0b21GaWVsZFwiPT09cyljb250aW51ZTtpZihKYyhlW3NdKSYmIXVjKGVbc10pJiYhY2MoZVtzXSkpe249XCJrZXk6XCIrcytcIiwgaW52YWxpZCB2YWx1ZTpcIitlW3NdLHQ9ITE7Y29udGludWV9c3dpdGNoKHMpe2Nhc2VcIm5pY2tcIjp1YyhlW3NdKXx8KG49XCJuaWNrIHNob3VsZCBiZSBhIHN0cmluZ1wiLHQ9ITEpLFRjKGVbc10pPjUwMCYmKG49XCJuaWNrIG5hbWUgbGltaXRlZDogbXVzdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gXCIuY29uY2F0KDUwMCxcIiBieXRlcywgY3VycmVudCBzaXplOiBcIikuY29uY2F0KFRjKGVbc10pLFwiIGJ5dGVzXCIpLHQ9ITEpO2JyZWFrO2Nhc2VcImdlbmRlclwiOkRjKHRjLGUuZ2VuZGVyKXx8KG49XCJrZXk6Z2VuZGVyLCBpbnZhbGlkIHZhbHVlOlwiK2UuZ2VuZGVyLHQ9ITEpO2JyZWFrO2Nhc2VcImJpcnRoZGF5XCI6Y2MoZS5iaXJ0aGRheSl8fChuPVwiYmlydGhkYXkgc2hvdWxkIGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwibG9jYXRpb25cIjp1YyhlLmxvY2F0aW9uKXx8KG49XCJsb2NhdGlvbiBzaG91bGQgYmUgYSBzdHJpbmdcIix0PSExKTticmVhaztjYXNlXCJzZWxmU2lnbmF0dXJlXCI6dWMoZS5zZWxmU2lnbmF0dXJlKXx8KG49XCJzZWxmU2lnbmF0dXJlIHNob3VsZCBiZSBhIHN0cmluZ1wiLHQ9ITEpO2JyZWFrO2Nhc2VcImFsbG93VHlwZVwiOkRjKG9jLGUuYWxsb3dUeXBlKXx8KG49XCJrZXk6YWxsb3dUeXBlLCBpbnZhbGlkIHZhbHVlOlwiK2UuYWxsb3dUeXBlLHQ9ITEpO2JyZWFrO2Nhc2VcImxhbmd1YWdlXCI6Y2MoZS5sYW5ndWFnZSl8fChuPVwibGFuZ3VhZ2Ugc2hvdWxkIGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwiYXZhdGFyXCI6dWMoZS5hdmF0YXIpfHwobj1cImF2YXRhciBzaG91bGQgYmUgYSBzdHJpbmdcIix0PSExKTticmVhaztjYXNlXCJtZXNzYWdlU2V0dGluZ3NcIjowIT09ZS5tZXNzYWdlU2V0dGluZ3MmJjEhPT1lLm1lc3NhZ2VTZXR0aW5ncyYmKG49XCJtZXNzYWdlU2V0dGluZ3Mgc2hvdWxkIGJlIDAgb3IgMVwiLHQ9ITEpO2JyZWFrO2Nhc2VcImFkbWluRm9yYmlkVHlwZVwiOkRjKG5jLGUuYWRtaW5Gb3JiaWRUeXBlKXx8KG49XCJrZXk6YWRtaW5Gb3JiaWRUeXBlLCBpbnZhbGlkIHZhbHVlOlwiK2UuYWRtaW5Gb3JiaWRUeXBlLHQ9ITEpO2JyZWFrO2Nhc2VcImxldmVsXCI6Y2MoZS5sZXZlbCl8fChuPVwibGV2ZWwgc2hvdWxkIGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwicm9sZVwiOmNjKGUucm9sZSl8fChuPVwicm9sZSBzaG91bGQgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztkZWZhdWx0Om49XCJ1bmtub3duIGtleTpcIitzK1wiICBcIitlW3NdLHQ9ITF9fXJldHVybnt2YWxpZDp0LHRpcHM6bn19fV0pLGV9KCksUV89ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMudmFsdWU9dCx0aGlzLm5leHQ9bnVsbH0sWl89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5NQVhfTEVOR1RIPXQsdGhpcy5wVGFpbD1udWxsLHRoaXMucE5vZGVUb0RlbD1udWxsLHRoaXMubWFwPW5ldyBNYXAsUWkuZGVidWcoXCJTaW5nbHlMaW5rZWRMaXN0IGluaXQgTUFYX0xFTkdUSDpcIi5jb25jYXQodGhpcy5NQVhfTEVOR1RIKSl9cmV0dXJuIEVuKGUsW3trZXk6XCJzZXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUV8oZSk7aWYodGhpcy5tYXAuc2l6ZTx0aGlzLk1BWF9MRU5HVEgpbnVsbD09PXRoaXMucFRhaWw/KHRoaXMucFRhaWw9dCx0aGlzLnBOb2RlVG9EZWw9dCk6KHRoaXMucFRhaWwubmV4dD10LHRoaXMucFRhaWw9dCksdGhpcy5tYXAuc2V0KGUsMSk7ZWxzZXt2YXIgbj10aGlzLnBOb2RlVG9EZWw7dGhpcy5wTm9kZVRvRGVsPXRoaXMucE5vZGVUb0RlbC5uZXh0LHRoaXMubWFwLmRlbGV0ZShuLnZhbHVlKSxuLm5leHQ9bnVsbCxuPW51bGwsdGhpcy5wVGFpbC5uZXh0PXQsdGhpcy5wVGFpbD10LHRoaXMubWFwLnNldChlLDEpfX19LHtrZXk6XCJoYXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tYXAuaGFzKGUpfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaGFzKGUpJiZ0aGlzLm1hcC5kZWxldGUoZSl9fSx7a2V5OlwidGFpbFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucFRhaWx9fSx7a2V5Olwic2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwLnNpemV9fSx7a2V5OlwiZGF0YVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5tYXAua2V5cygpKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlO251bGwhPT10aGlzLnBOb2RlVG9EZWw7KWU9dGhpcy5wTm9kZVRvRGVsLHRoaXMucE5vZGVUb0RlbD10aGlzLnBOb2RlVG9EZWwubmV4dCxlLm5leHQ9bnVsbCxlPW51bGw7dGhpcy5wVGFpbD1udWxsLHRoaXMubWFwLmNsZWFyKCl9fV0pLGV9KCksZW09W1wiZ3JvdXBJRFwiLFwibmFtZVwiLFwiYXZhdGFyXCIsXCJ0eXBlXCIsXCJpbnRyb2R1Y3Rpb25cIixcIm5vdGlmaWNhdGlvblwiLFwib3duZXJJRFwiLFwic2VsZkluZm9cIixcImNyZWF0ZVRpbWVcIixcImluZm9TZXF1ZW5jZVwiLFwibGFzdEluZm9UaW1lXCIsXCJsYXN0TWVzc2FnZVwiLFwibmV4dE1lc3NhZ2VTZXFcIixcIm1lbWJlck51bVwiLFwibWF4TWVtYmVyTnVtXCIsXCJtZW1iZXJMaXN0XCIsXCJqb2luT3B0aW9uXCIsXCJncm91cEN1c3RvbUZpZWxkXCIsXCJtdXRlQWxsTWVtYmVyc1wiXSx0bT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLmdyb3VwSUQ9XCJcIix0aGlzLm5hbWU9XCJcIix0aGlzLmF2YXRhcj1cIlwiLHRoaXMudHlwZT1cIlwiLHRoaXMuaW50cm9kdWN0aW9uPVwiXCIsdGhpcy5ub3RpZmljYXRpb249XCJcIix0aGlzLm93bmVySUQ9XCJcIix0aGlzLmNyZWF0ZVRpbWU9XCJcIix0aGlzLmluZm9TZXF1ZW5jZT1cIlwiLHRoaXMubGFzdEluZm9UaW1lPVwiXCIsdGhpcy5zZWxmSW5mbz17bWVzc2FnZVJlbWluZFR5cGU6XCJcIixqb2luVGltZTpcIlwiLG5hbWVDYXJkOlwiXCIscm9sZTpcIlwiLHVzZXJJRDpcIlwiLG1lbWJlckN1c3RvbUZpZWxkOnZvaWQgMCxyZWFkZWRTZXF1ZW5jZTowLGV4Y2x1ZGVkVW5yZWFkU2VxdWVuY2VMaXN0OnZvaWQgMH0sdGhpcy5sYXN0TWVzc2FnZT17bGFzdFRpbWU6XCJcIixsYXN0U2VxdWVuY2U6XCJcIixmcm9tQWNjb3VudDpcIlwiLG1lc3NhZ2VGb3JTaG93OlwiXCJ9LHRoaXMubmV4dE1lc3NhZ2VTZXE9XCJcIix0aGlzLm1lbWJlck51bT1cIlwiLHRoaXMubWVtYmVyQ291bnQ9XCJcIix0aGlzLm1heE1lbWJlck51bT1cIlwiLHRoaXMubWF4TWVtYmVyQ291bnQ9XCJcIix0aGlzLmpvaW5PcHRpb249XCJcIix0aGlzLmdyb3VwQ3VzdG9tRmllbGQ9W10sdGhpcy5tdXRlQWxsTWVtYmVycz12b2lkIDAsdGhpcy5faW5pdEdyb3VwKHQpfXJldHVybiBFbihlLFt7a2V5OlwiX2luaXRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKWVtLmluZGV4T2YodCk8MHx8KFwic2VsZkluZm9cIiE9PXQ/KFwibWVtYmVyTnVtXCI9PT10JiYodGhpcy5tZW1iZXJDb3VudD1lW3RdKSxcIm1heE1lbWJlck51bVwiPT09dCYmKHRoaXMubWF4TWVtYmVyQ291bnQ9ZVt0XSksdGhpc1t0XT1lW3RdKTp0aGlzLnVwZGF0ZVNlbGZJbmZvKGVbdF0pKX19LHtrZXk6XCJ1cGRhdGVHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTtuLmxhc3RNc2dUaW1lJiYodGhpcy5sYXN0TWVzc2FnZS5sYXN0VGltZT1uLmxhc3RNc2dUaW1lKSxnYyhuLm11dGVBbGxNZW1iZXJzKXx8KFwiT25cIj09PW4ubXV0ZUFsbE1lbWJlcnM/bi5tdXRlQWxsTWVtYmVycz0hMDpuLm11dGVBbGxNZW1iZXJzPSExKSxuLmdyb3VwQ3VzdG9tRmllbGQmJkxjKHRoaXMuZ3JvdXBDdXN0b21GaWVsZCxuLmdyb3VwQ3VzdG9tRmllbGQpLGdjKG4ubWVtYmVyTnVtKXx8KHRoaXMubWVtYmVyQ291bnQ9bi5tZW1iZXJOdW0pLGdjKG4ubWF4TWVtYmVyTnVtKXx8KHRoaXMubWF4TWVtYmVyQ291bnQ9bi5tYXhNZW1iZXJOdW0pLEljKHRoaXMsbixbXCJtZW1iZXJzXCIsXCJlcnJvckNvZGVcIixcImxhc3RNc2dUaW1lXCIsXCJncm91cEN1c3RvbUZpZWxkXCIsXCJtZW1iZXJOdW1cIixcIm1heE1lbWJlck51bVwiXSkscGMobi5tZW1iZXJzKSYmbi5tZW1iZXJzLmxlbmd0aD4wJiZuLm1lbWJlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS51c2VySUQ9PT10LnNlbGZJbmZvLnVzZXJJRCYmSWModC5zZWxmSW5mbyxlLFtcInNlcXVlbmNlXCJdKX0pKX19LHtrZXk6XCJ1cGRhdGVTZWxmSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUubmFtZUNhcmQsbj1lLmpvaW5UaW1lLG89ZS5yb2xlLHI9ZS5tZXNzYWdlUmVtaW5kVHlwZSxhPWUucmVhZGVkU2VxdWVuY2Uscz1lLmV4Y2x1ZGVkVW5yZWFkU2VxdWVuY2VMaXN0O0ljKHRoaXMuc2VsZkluZm8se25hbWVDYXJkOnQsam9pblRpbWU6bixyb2xlOm8sbWVzc2FnZVJlbWluZFR5cGU6cixyZWFkZWRTZXF1ZW5jZTphLGV4Y2x1ZGVkVW5yZWFkU2VxdWVuY2VMaXN0OnN9LFtdLFtcIlwiLG51bGwsdm9pZCAwLDAsTmFOXSl9fSx7a2V5Olwic2V0U2VsZk5hbWVDYXJkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zZWxmSW5mby5uYW1lQ2FyZD1lfX0se2tleTpcIm1lbWJlck51bVwiLHNldDpmdW5jdGlvbihlKXt9LGdldDpmdW5jdGlvbigpe3JldHVybiBRaS53YXJuKFwi77yB77yB77yBdjIuOC4w6LW35byD55SobWVtYmVyTnVt77yM6K+35L2/55SoIG1lbWJlckNvdW50XCIpLHRoaXMubWVtYmVyQ291bnR9fSx7a2V5OlwibWF4TWVtYmVyTnVtXCIsc2V0OmZ1bmN0aW9uKGUpe30sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFFpLndhcm4oXCLvvIHvvIHvvIF2Mi44LjDotbflvIPnlKhtYXhNZW1iZXJOdW3vvIzor7fkvb/nlKggbWF4TWVtYmVyQ291bnRcIiksdGhpcy5tYXhNZW1iZXJDb3VudH19XSksZX0oKSxubT1mdW5jdGlvbihlLHQpe2lmKGdjKHQpKXJldHVyblwiXCI7c3dpdGNoKGUpe2Nhc2UgWW4uTVNHX1RFWFQ6cmV0dXJuIHQudGV4dDtjYXNlIFluLk1TR19JTUFHRTpyZXR1cm5cIlvlm77niYddXCI7Y2FzZSBZbi5NU0dfTE9DQVRJT046cmV0dXJuXCJb5L2N572uXVwiO2Nhc2UgWW4uTVNHX0FVRElPOnJldHVyblwiW+ivremfs11cIjtjYXNlIFluLk1TR19WSURFTzpyZXR1cm5cIlvop4bpopFdXCI7Y2FzZSBZbi5NU0dfRklMRTpyZXR1cm5cIlvmlofku7ZdXCI7Y2FzZSBZbi5NU0dfQ1VTVE9NOnJldHVyblwiW+iHquWumuS5iea2iOaBr11cIjtjYXNlIFluLk1TR19HUlBfVElQOnJldHVyblwiW+e+pOaPkOekuua2iOaBr11cIjtjYXNlIFluLk1TR19HUlBfU1lTX05PVElDRTpyZXR1cm5cIlvnvqTns7vnu5/pgJrnn6VdXCI7Y2FzZSBZbi5NU0dfRkFDRTpyZXR1cm5cIlvliqjnlLvooajmg4VdXCI7Y2FzZSBZbi5NU0dfTUVSR0VSOnJldHVyblwiW+iBiuWkqeiusOW9lV1cIjtkZWZhdWx0OnJldHVyblwiXCJ9fSxvbT1mdW5jdGlvbihlKXtyZXR1cm4gZ2MoZSk/e2xhc3RUaW1lOjAsbGFzdFNlcXVlbmNlOjAsZnJvbUFjY291bnQ6MCxtZXNzYWdlRm9yU2hvdzpcIlwiLHBheWxvYWQ6bnVsbCx0eXBlOlwiXCIsaXNSZXZva2VkOiExLGNsb3VkQ3VzdG9tRGF0YTpcIlwiLG9ubGluZU9ubHlGbGFnOiExLG5pY2s6XCJcIixuYW1lQ2FyZDpcIlwifTplIGluc3RhbmNlb2YgTV8/e2xhc3RUaW1lOmUudGltZXx8MCxsYXN0U2VxdWVuY2U6ZS5zZXF1ZW5jZXx8MCxmcm9tQWNjb3VudDplLmZyb218fFwiXCIsbWVzc2FnZUZvclNob3c6bm0oZS50eXBlLGUucGF5bG9hZCkscGF5bG9hZDplLnBheWxvYWR8fG51bGwsdHlwZTplLnR5cGV8fG51bGwsaXNSZXZva2VkOmUuaXNSZXZva2VkfHwhMSxjbG91ZEN1c3RvbURhdGE6ZS5jbG91ZEN1c3RvbURhdGF8fFwiXCIsb25saW5lT25seUZsYWc6ZS5fb25saW5lT25seUZsYWd8fCExLG5pY2s6ZS5uaWNrfHxcIlwiLG5hbWVDYXJkOmUubmFtZUNhcmR8fFwiXCJ9OkNuKHt9LGUse21lc3NhZ2VGb3JTaG93Om5tKGUudHlwZSxlLnBheWxvYWQpfSl9LHJtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuY29udmVyc2F0aW9uSUQ9dC5jb252ZXJzYXRpb25JRHx8XCJcIix0aGlzLnVucmVhZENvdW50PXQudW5yZWFkQ291bnR8fDAsdGhpcy50eXBlPXQudHlwZXx8XCJcIix0aGlzLmxhc3RNZXNzYWdlPW9tKHQubGFzdE1lc3NhZ2UpLHQubGFzdE1zZ1RpbWUmJih0aGlzLmxhc3RNZXNzYWdlLmxhc3RUaW1lPXQubGFzdE1zZ1RpbWUpLHRoaXMuX2lzSW5mb0NvbXBsZXRlZD0hMSx0aGlzLnBlZXJSZWFkVGltZT10LnBlZXJSZWFkVGltZXx8MCx0aGlzLmdyb3VwQXRJbmZvTGlzdD1bXSx0aGlzLnJlbWFyaz1cIlwiLHRoaXMuaXNQaW5uZWQ9dC5pc1Bpbm5lZHx8ITEsdGhpcy5tZXNzYWdlUmVtaW5kVHlwZT1cIlwiLHRoaXMuX2luaXRQcm9maWxlKHQpfXJldHVybiBFbihlLFt7a2V5OlwiX2luaXRQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXtzd2l0Y2gobil7Y2FzZVwidXNlclByb2ZpbGVcIjp0LnVzZXJQcm9maWxlPWUudXNlclByb2ZpbGU7YnJlYWs7Y2FzZVwiZ3JvdXBQcm9maWxlXCI6dC5ncm91cFByb2ZpbGU9ZS5ncm91cFByb2ZpbGV9fSkpLGdjKHRoaXMudXNlclByb2ZpbGUpJiZ0aGlzLnR5cGU9PT1Zbi5DT05WX0MyQz90aGlzLnVzZXJQcm9maWxlPW5ldyBYXyh7dXNlcklEOmUuY29udmVyc2F0aW9uSUQucmVwbGFjZShcIkMyQ1wiLFwiXCIpfSk6Z2ModGhpcy5ncm91cFByb2ZpbGUpJiZ0aGlzLnR5cGU9PT1Zbi5DT05WX0dST1VQJiYodGhpcy5ncm91cFByb2ZpbGU9bmV3IHRtKHtncm91cElEOmUuY29udmVyc2F0aW9uSUQucmVwbGFjZShcIkdST1VQXCIsXCJcIil9KSl9fSx7a2V5OlwidXBkYXRlVW5yZWFkQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm5leHRVbnJlYWRDb3VudCxuPWUuaXNGcm9tR2V0Q29udmVyc2F0aW9ucyxvPWUuaXNVbnJlYWRDMkNNZXNzYWdlO2djKHQpfHwod2ModGhpcy5zdWJUeXBlKT90aGlzLnVucmVhZENvdW50PTA6biYmdGhpcy50eXBlPT09WW4uQ09OVl9HUk9VUHx8byYmdGhpcy50eXBlPT09WW4uQ09OVl9DMkM/dGhpcy51bnJlYWRDb3VudD10OnRoaXMudW5yZWFkQ291bnQ9dGhpcy51bnJlYWRDb3VudCt0KX19LHtrZXk6XCJ1cGRhdGVMYXN0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMubGFzdE1lc3NhZ2U9b20oZSl9fSx7a2V5OlwidXBkYXRlR3JvdXBBdEluZm9MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQsbj0oRm4odD1lLmdyb3VwQXRUeXBlKXx8cW4odCl8fHhuKHQpfHxLbigpKS5zbGljZSgwKTstMSE9PW4uaW5kZXhPZihZbi5DT05WX0FUX01FKSYmLTEhPT1uLmluZGV4T2YoWW4uQ09OVl9BVF9BTEwpJiYobj1bWW4uQ09OVl9BVF9BTExfQVRfTUVdKTt2YXIgbz17ZnJvbTplLmZyb20sZ3JvdXBJRDplLmdyb3VwSUQsbWVzc2FnZVNlcXVlbmNlOmUuc2VxdWVuY2UsYXRUeXBlQXJyYXk6bixfX3JhbmRvbTplLl9fcmFuZG9tLF9fc2VxdWVuY2U6ZS5fX3NlcXVlbmNlfTt0aGlzLmdyb3VwQXRJbmZvTGlzdC5wdXNoKG8pLFFpLmRlYnVnKFwiQ29udmVyc2F0aW9uLnVwZGF0ZUdyb3VwQXRJbmZvTGlzdCBjb252ZXJzYXRpb25JRDpcIi5jb25jYXQodGhpcy5jb252ZXJzYXRpb25JRCksdGhpcy5ncm91cEF0SW5mb0xpc3QpfX0se2tleTpcImNsZWFyR3JvdXBBdEluZm9MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmdyb3VwQXRJbmZvTGlzdC5sZW5ndGg9MH19LHtrZXk6XCJyZWR1Y2VVbnJlYWRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy51bnJlYWRDb3VudD49MSYmKHRoaXMudW5yZWFkQ291bnQtPTEpfX0se2tleTpcImlzTGFzdE1lc3NhZ2VSZXZva2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZXF1ZW5jZSxuPWUudGltZTtyZXR1cm4gdGhpcy50eXBlPT09WW4uQ09OVl9DMkMmJnQ9PT10aGlzLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZSYmbj09PXRoaXMubGFzdE1lc3NhZ2UubGFzdFRpbWV8fHRoaXMudHlwZT09PVluLkNPTlZfR1JPVVAmJnQ9PT10aGlzLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZX19LHtrZXk6XCJzZXRMYXN0TWVzc2FnZVJldm9rZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmxhc3RNZXNzYWdlLmlzUmV2b2tlZD1lfX0se2tleTpcInRvQWNjb3VudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnZlcnNhdGlvbklELnN0YXJ0c1dpdGgoWW4uQ09OVl9DMkMpP3RoaXMuY29udmVyc2F0aW9uSUQucmVwbGFjZShZbi5DT05WX0MyQyxcIlwiKTp0aGlzLmNvbnZlcnNhdGlvbklELnN0YXJ0c1dpdGgoWW4uQ09OVl9HUk9VUCk/dGhpcy5jb252ZXJzYXRpb25JRC5yZXBsYWNlKFluLkNPTlZfR1JPVVAsXCJcIik6XCJcIn19LHtrZXk6XCJzdWJUeXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3JvdXBQcm9maWxlP3RoaXMuZ3JvdXBQcm9maWxlLnR5cGU6XCJcIn19XSksZX0oKSxhbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJNZXNzYWdlUmVtaW5kSGFuZGxlclwiLHRoaXMuX3VwZGF0ZVNlcXVlbmNlPTB9cmV0dXJuIEVuKGUsW3trZXk6XCJnZXRDMkNNZXNzYWdlUmVtaW5kVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRDMkNNZXNzYWdlUmVtaW5kVHlwZVwiKTtyZXR1cm4gdGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpCbCx1cGRhdGVTZXF1ZW5jZTp0aGlzLl91cGRhdGVTZXF1ZW5jZX0pLnRoZW4oKGZ1bmN0aW9uKG4pe1FpLmxvZyhcIlwiLmNvbmNhdCh0LFwiIG9rXCIpKTt2YXIgbz1uLmRhdGEscj1vLnVwZGF0ZVNlcXVlbmNlLGE9by5tdXRlRmxhZ0xpc3Q7ZS5fdXBkYXRlU2VxdWVuY2U9cixlLl9wYXRjaEMyQ01lc3NhZ2VSZW1pbmRUeXBlKGEpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtRaS5lcnJvcihcIlwiLmNvbmNhdCh0LFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpfSkpfX0se2tleTpcIl9wYXRjaEMyQ01lc3NhZ2VSZW1pbmRUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPTAsbz1cIlwiO3BjKGUpJiZlLmxlbmd0aD4wJiZlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciByPWUudXNlcklELGE9ZS5tdXRlRmxhZzswPT09YT9vPVluLk1TR19SRU1JTkRfQUNQVF9BTkRfTk9URToxPT09YT9vPVluLk1TR19SRU1JTkRfRElTQ0FSRDoyPT09YSYmKG89WW4uTVNHX1JFTUlORF9BQ1BUX05PVF9OT1RFKSwhMD09PXQuX2NvbnZlcnNhdGlvbk1vZHVsZS5wYXRjaE1lc3NhZ2VSZW1pbmRUeXBlKHtJRDpyLGlzQzJDQ29udmVyc2F0aW9uOiEwLG1lc3NhZ2VSZW1pbmRUeXBlOm99KSYmKG4rPTEpfSkpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3BhdGNoQzJDTWVzc2FnZVJlbWluZFR5cGUgY291bnQ6XCIpLmNvbmNhdChuKSl9fSx7a2V5Olwic2V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ3JvdXBJRD90aGlzLl9zZXRHcm91cE1lc3NhZ2VSZW1pbmRUeXBlKGUpOnBjKGUudXNlcklETGlzdCk/dGhpcy5fc2V0QzJDTWVzc2FnZVJlbWluZFR5cGUoZSk6dm9pZCAwfX0se2tleTpcIl9zZXRHcm91cE1lc3NhZ2VSZW1pbmRUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fc2V0R3JvdXBNZXNzYWdlUmVtaW5kVHlwZVwiKSxvPWUuZ3JvdXBJRCxyPWUubWVzc2FnZVJlbWluZFR5cGUsYT1cImdyb3VwSUQ6XCIuY29uY2F0KG8sXCIgbWVzc2FnZVJlbWluZFR5cGU6XCIpLmNvbmNhdChyKSxzPW5ldyBkcChhZyk7cmV0dXJuIHMuc2V0TWVzc2FnZShhKSx0aGlzLl9nZXRNb2R1bGUoY2wpLm1vZGlmeUdyb3VwTWVtYmVySW5mbyh7Z3JvdXBJRDpvLG1lc3NhZ2VSZW1pbmRUeXBlOnIsdXNlcklEOnRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5nZXRNeVVzZXJJRCgpfSkudGhlbigoZnVuY3Rpb24oKXtzLnNldE5ldHdvcmtUeXBlKHQuX2NvbnZlcnNhdGlvbk1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gXCIpLmNvbmNhdChhKSk7dmFyIGU9dC5fZ2V0TW9kdWxlKHNsKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtyZXR1cm4gZSYmKGUuc2VsZkluZm8ubWVzc2FnZVJlbWluZFR5cGU9ciksdC5fY29udmVyc2F0aW9uTW9kdWxlLnBhdGNoTWVzc2FnZVJlbWluZFR5cGUoe0lEOm8saXNDMkNDb252ZXJzYXRpb246ITEsbWVzc2FnZVJlbWluZFR5cGU6cn0pJiZ0Ll9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCkseV8oe2dyb3VwOmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2NvbnZlcnNhdGlvbk1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07cy5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJfc2V0QzJDTWVzc2FnZVJlbWluZFR5cGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9zZXRDMkNNZXNzYWdlUmVtaW5kVHlwZVwiKSxvPWUudXNlcklETGlzdCxyPWUubWVzc2FnZVJlbWluZFR5cGUsYT1vLnNsaWNlKDAsMzApLHM9MDtyPT09WW4uTVNHX1JFTUlORF9ESVNDQVJEP3M9MTpyPT09WW4uTVNHX1JFTUlORF9BQ1BUX05PVF9OT1RFJiYocz0yKTt2YXIgaT1cInVzZXJJRExpc3Q6XCIuY29uY2F0KGEsXCIgbWVzc2FnZVJlbWluZFR5cGU6XCIpLmNvbmNhdChyKSxjPW5ldyBkcChhZyk7cmV0dXJuIGMuc2V0TWVzc2FnZShpKSx0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOktsLHJlcXVlc3REYXRhOnt1c2VySURMaXN0OmEsbXV0ZUZsYWc6c319KS50aGVuKChmdW5jdGlvbihlKXtjLnNldE5ldHdvcmtUeXBlKHQuX2NvbnZlcnNhdGlvbk1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTt2YXIgbz1lLmRhdGEscz1vLnVwZGF0ZVNlcXVlbmNlLGk9by5lcnJvckxpc3Q7dC5fdXBkYXRlU2VxdWVuY2U9czt2YXIgdT1bXSxsPVtdO3BjKGkpJiZpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3UucHVzaChlLnVzZXJJRCksbC5wdXNoKHt1c2VySUQ6ZS51c2VySUQsY29kZTplLmVycm9yQ29kZX0pfSkpO3ZhciBkPWEuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4tMT09PXUuaW5kZXhPZihlKX0pKTtRaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gc3VjY2Vzc1VzZXJJRExpc3Q6XCIpLmNvbmNhdChkLFwiIGZhaWx1cmVVc2VySURMaXN0OlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobCkpKTt2YXIgcD0wO3JldHVybiBkLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX2NvbnZlcnNhdGlvbk1vZHVsZS5wYXRjaE1lc3NhZ2VSZW1pbmRUeXBlKHtJRDplLGlzQzJDQ29udmVyc2F0aW9uOiEwLG1lc3NhZ2VSZW1pbmRUeXBlOnJ9KSYmKHArPTEpfSkpLHA+PTEmJnQuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoKSxhLmxlbmd0aD11Lmxlbmd0aD0wLGtfKHtzdWNjZXNzVXNlcklETGlzdDpkLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3VzZXJJRDplfX0pKSxmYWlsdXJlVXNlcklETGlzdDpsfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9jb252ZXJzYXRpb25Nb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksT18oZSl9KSl9fSx7a2V5OlwiX2dldE1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0TW9kdWxlKGUpfX0se2tleTpcIl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSl9fSx7a2V5Olwic2V0VXBkYXRlU2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl91cGRhdGVTZXF1ZW5jZT1lfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl91cGRhdGVTZXF1ZW5jZT0wfX1dKSxlfSgpLHNtPWZ1bmN0aW9uKGUpe0FuKG4sZSk7dmFyIHQ9R24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkNvbnZlcnNhdGlvbk1vZHVsZVwiLEhfLm1peGluKGJuKG8pKSxvLl9tZXNzYWdlTGlzdEhhbmRsZXI9bmV3IHhfLG8uX21lc3NhZ2VSZW1pbmRIYW5kbGVyPW5ldyBhbShibihvKSksby5zaW5nbHlMaW5rZWRMaXN0PW5ldyBaXygxMDApLG8uX3BhZ2luZ1N0YXR1cz1xdS5OT1RfU1RBUlQsby5fcGFnaW5nVGltZVN0YW1wPTAsby5fcGFnaW5nU3RhcnRJbmRleD0wLG8uX3BhZ2luZ1Bpbm5lZFRpbWVTdGFtcD0wLG8uX3BhZ2luZ1Bpbm5lZFN0YXJ0SW5kZXg9MCxvLl9jb252ZXJzYXRpb25NYXA9bmV3IE1hcCxvLl90bXBHcm91cExpc3Q9W10sby5fdG1wR3JvdXBBdFRpcHNMaXN0PVtdLG8uX3BlZXJSZWFkVGltZU1hcD1uZXcgTWFwLG8uX2NvbXBsZXRlZE1hcD1uZXcgTWFwLG8uX3JvYW1pbmdNZXNzYWdlS2V5QW5kVGltZU1hcD1uZXcgTWFwLG8uX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwPW5ldyBNYXAsby5faW5pdExpc3RlbmVycygpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJfaW5pdExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpO2Uub24oVl8sdGhpcy5faW5pdExvY2FsQ29udmVyc2F0aW9uTGlzdCx0aGlzKSxlLm9uKEJfLHRoaXMuX29uUHJvZmlsZVVwZGF0ZWQsdGhpcyl9fSx7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSU2MD09MCYmdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnRyYXZlcnNhbCgpfX0se2tleTpcIl9pbml0TG9jYWxDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IGRwKHpwKTtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9pbml0TG9jYWxDb252ZXJzYXRpb25MaXN0LlwiKSk7dmFyIG49XCJcIixvPXRoaXMuX2dldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0KCk7aWYobyl7Zm9yKHZhciByPW8ubGVuZ3RoLGE9MDthPHI7YSsrKXt2YXIgcz1vW2FdO2lmKHMpe2lmKHMuY29udmVyc2F0aW9uSUQ9PT1cIlwiLmNvbmNhdChZbi5DT05WX0MyQyxcIkBUTFMjRVJST1JcIil8fHMuY29udmVyc2F0aW9uSUQ9PT1cIlwiLmNvbmNhdChZbi5DT05WX0MyQyxcIkBUTFMjTk9UX0ZPVU5EXCIpKWNvbnRpbnVlO2lmKHMuZ3JvdXBQcm9maWxlKXt2YXIgaT1zLmdyb3VwUHJvZmlsZS50eXBlO2lmKHdjKGkpKWNvbnRpbnVlfX10aGlzLl9jb252ZXJzYXRpb25NYXAuc2V0KG9bYV0uY29udmVyc2F0aW9uSUQsbmV3IHJtKG9bYV0pKX10aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpLG49XCJjb3VudDpcIi5jb25jYXQocil9ZWxzZSBuPVwiY291bnQ6MFwiO3Quc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKG4pLmVuZCgpLHRoaXMuZ2V0TW9kdWxlKGFsKXx8dGhpcy50cmlnZ2VyUmVhZHkoKSx0aGlzLnJlYWR5KChmdW5jdGlvbigpe2UuX3RtcEdyb3VwTGlzdC5sZW5ndGg+MCYmKGUudXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKGUuX3RtcEdyb3VwTGlzdCksZS5fdG1wR3JvdXBMaXN0Lmxlbmd0aD0wKX0pKSx0aGlzLl9zeW5jQ29udmVyc2F0aW9uTGlzdCgpfX0se2tleTpcIm9uTWVzc2FnZVNlbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblNlbmRPclJlY2VpdmVNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDplLmNvbnZlcnNhdGlvbk9wdGlvbnNMaXN0LGlzSW5zdGFudE1lc3NhZ2U6ITB9KX19LHtrZXk6XCJvbk5ld01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblNlbmRPclJlY2VpdmVNZXNzYWdlKGUpfX0se2tleTpcIl9vblNlbmRPclJlY2VpdmVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY29udmVyc2F0aW9uT3B0aW9uc0xpc3Qsbz1lLmlzSW5zdGFudE1lc3NhZ2Uscj12b2lkIDA9PT1vfHxvLGE9ZS5pc1VucmVhZEMyQ01lc3NhZ2Uscz12b2lkIDAhPT1hJiZhO3RoaXMuX2lzUmVhZHk/MCE9PW4ubGVuZ3RoJiYodGhpcy5fZ2V0QzJDUGVlclJlYWRUaW1lKG4pLHRoaXMuX3VwZGF0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdCh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6bixpc0luc3RhbnRNZXNzYWdlOnIsaXNVbnJlYWRDMkNNZXNzYWdlOnMsaXNGcm9tR2V0Q29udmVyc2F0aW9uczohMX0pLHRoaXMuX3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0KCksdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCkpOnRoaXMucmVhZHkoKGZ1bmN0aW9uKCl7dC5fb25TZW5kT3JSZWNlaXZlTWVzc2FnZShlKX0pKX19LHtrZXk6XCJ1cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3BjKGUpJiYwPT09ZS5sZW5ndGh8fCgwIT09dGhpcy5fY29udmVyc2F0aW9uTWFwLnNpemU/KGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49XCJHUk9VUFwiLmNvbmNhdChlLmdyb3VwSUQpO2lmKHQuX2NvbnZlcnNhdGlvbk1hcC5oYXMobikpe3ZhciBvPXQuX2NvbnZlcnNhdGlvbk1hcC5nZXQobik7by5ncm91cFByb2ZpbGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSksby5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2U8ZS5uZXh0TWVzc2FnZVNlcSYmKG8ubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlPWUubmV4dE1lc3NhZ2VTZXEtMSksby5zdWJUeXBlfHwoby5zdWJUeXBlPWUudHlwZSl9fSkpLHRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSkpOnRoaXMuX3RtcEdyb3VwTGlzdD1lKX19LHtrZXk6XCJfdXBkYXRlQ29udmVyc2F0aW9uVXNlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZGF0YS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1cIkMyQ1wiLmNvbmNhdChlLnVzZXJJRCk7dC5fY29udmVyc2F0aW9uTWFwLmhhcyhuKSYmKHQuX2NvbnZlcnNhdGlvbk1hcC5nZXQobikudXNlclByb2ZpbGU9ZSl9KSksdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX19LHtrZXk6XCJvbk1lc3NhZ2VSZXZva2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZigwIT09ZS5sZW5ndGgpe3ZhciBuPW51bGwsbz0hMTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpeyhuPXQuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZS5jb252ZXJzYXRpb25JRCkpJiYobi5yZWR1Y2VVbnJlYWRDb3VudCgpLG4uaXNMYXN0TWVzc2FnZVJldm9rZWQoZSkmJihvPSEwLG4uc2V0TGFzdE1lc3NhZ2VSZXZva2VkKCEwKSkpfSkpLG8mJnRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSl9fX0se2tleTpcIm9uTWVzc2FnZURlbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZigwIT09ZS5sZW5ndGgpe2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5pc0RlbGV0ZWQ9ITB9KSk7Zm9yKHZhciB0PWVbMF0uY29udmVyc2F0aW9uSUQsbj10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdCh0KSxvPXt9LHI9bi5sZW5ndGgtMTtyPj0wO3ItLSlpZighbltyXS5pc0RlbGV0ZWQpe289bltyXTticmVha312YXIgYT10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KHQpO2lmKGEpe3ZhciBzPSExO2EubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlPT09by5zZXF1ZW5jZSYmYS5sYXN0TWVzc2FnZS5sYXN0VGltZT09PW8udGltZXx8KEpjKG8pJiYobz12b2lkIDApLGEudXBkYXRlTGFzdE1lc3NhZ2Uobykscz0hMCxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTWVzc2FnZURlbGV0ZWQuIHVwZGF0ZSBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KHQsXCIgd2l0aCBsYXN0TWVzc2FnZTpcIiksYS5sYXN0TWVzc2FnZSkpLHQuc3RhcnRzV2l0aChZbi5DT05WX0MyQykmJnRoaXMudXBkYXRlVW5yZWFkQ291bnQodCkscyYmdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX19fX0se2tleTpcIm9uTmV3R3JvdXBBdFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5kYXRhTGlzdCxvPW51bGw7bi5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmdyb3VwQXRUaXBzP289ZS5ncm91cEF0VGlwczplLmVsZW1lbnRzJiYobz1lLmVsZW1lbnRzKSxvLl9fcmFuZG9tPWUucmFuZG9tLG8uX19zZXF1ZW5jZT1lLmNsaWVudFNlcXVlbmNlLHQuX3RtcEdyb3VwQXRUaXBzTGlzdC5wdXNoKG8pfSkpLFFpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk5ld0dyb3VwQXRUaXBzIGlzUmVhZHk6XCIpLmNvbmNhdCh0aGlzLl9pc1JlYWR5KSx0aGlzLl90bXBHcm91cEF0VGlwc0xpc3QpLHRoaXMuX2lzUmVhZHkmJnRoaXMuX2hhbmRsZUdyb3VwQXRUaXBzTGlzdCgpfX0se2tleTpcIl9oYW5kbGVHcm91cEF0VGlwc0xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoMCE9PXRoaXMuX3RtcEdyb3VwQXRUaXBzTGlzdC5sZW5ndGgpe3ZhciB0PSExO3RoaXMuX3RtcEdyb3VwQXRUaXBzTGlzdC5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgbz1uLmdyb3VwSUQ7aWYobi5mcm9tIT09ZS5nZXRNeVVzZXJJRCgpKXt2YXIgcj1lLl9jb252ZXJzYXRpb25NYXAuZ2V0KFwiXCIuY29uY2F0KFluLkNPTlZfR1JPVVApLmNvbmNhdChvKSk7ciYmKHIudXBkYXRlR3JvdXBBdEluZm9MaXN0KG4pLHQ9ITApfX0pKSx0JiZ0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpLHRoaXMuX3RtcEdyb3VwQXRUaXBzTGlzdC5sZW5ndGg9MH19fSx7a2V5OlwiX2dldEMyQ1BlZXJSZWFkVGltZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1bXTtpZihlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX2NvbnZlcnNhdGlvbk1hcC5oYXMoZS5jb252ZXJzYXRpb25JRCl8fGUudHlwZSE9PVluLkNPTlZfQzJDfHxuLnB1c2goZS5jb252ZXJzYXRpb25JRC5yZXBsYWNlKFluLkNPTlZfQzJDLFwiXCIpKX0pKSxuLmxlbmd0aD4wKXtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2dldEMyQ1BlZXJSZWFkVGltZSB1c2VySURMaXN0OlwiKS5jb25jYXQobikpO3ZhciBvPXRoaXMuZ2V0TW9kdWxlKGFsKTtvJiZvLmdldFJlbW90ZVBlZXJSZWFkVGltZShuKX19fSx7a2V5OlwiX2dldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoZGwpLmdldEl0ZW0oXCJjb252ZXJzYXRpb25NYXBcIil9fSx7a2V5OlwiX3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpLnNsaWNlKDAsMjApLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2NvbnZlcnNhdGlvbklEOmUuY29udmVyc2F0aW9uSUQsdHlwZTplLnR5cGUsc3ViVHlwZTplLnN1YlR5cGUsbGFzdE1lc3NhZ2U6ZS5sYXN0TWVzc2FnZSxncm91cFByb2ZpbGU6ZS5ncm91cFByb2ZpbGUsdXNlclByb2ZpbGU6ZS51c2VyUHJvZmlsZX19KSk7dGhpcy5nZXRNb2R1bGUoZGwpLnNldEl0ZW0oXCJjb252ZXJzYXRpb25NYXBcIixlKX19LHtrZXk6XCJlbWl0Q29udmVyc2F0aW9uVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdLHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxuPVVuKHRoaXMuX2NvbnZlcnNhdGlvbk1hcC52YWx1ZXMoKSk7aWYodCl7dmFyIG89dGhpcy5nZXRNb2R1bGUoc2wpO28mJm8udXBkYXRlR3JvdXBMYXN0TWVzc2FnZShuKX1lJiZ0aGlzLmVtaXRPdXRlckV2ZW50KFduLkNPTlZFUlNBVElPTl9MSVNUX1VQREFURUQpfX0se2tleTpcImdldExvY2FsQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIFVuKHRoaXMuX2NvbnZlcnNhdGlvbk1hcC52YWx1ZXMoKSl9fSx7a2V5OlwiZ2V0TG9jYWxDb252ZXJzYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udmVyc2F0aW9uTWFwLmdldChlKX19LHtrZXk6XCJfc3luY0NvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgZHAoSnApO3JldHVybiB0aGlzLl9wYWdpbmdTdGF0dXM9PT1xdS5OT1RfU1RBUlQmJnRoaXMuX2NvbnZlcnNhdGlvbk1hcC5jbGVhcigpLHRoaXMuX3BhZ2luZ0dldENvbnZlcnNhdGlvbkxpc3QoKS50aGVuKChmdW5jdGlvbihuKXtyZXR1cm4gZS5fcGFnaW5nU3RhdHVzPXF1LlJFU09MVkVELGUuX3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0KCksZS5faGFuZGxlQzJDUGVlclJlYWRUaW1lKCksZS5fcGF0Y2hDb252ZXJzYXRpb25Qcm9wZXJ0aWVzKCksdC5zZXRNZXNzYWdlKGUuX2NvbnZlcnNhdGlvbk1hcC5zaXplKS5zZXROZXR3b3JrVHlwZShlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLG59KSkuY2F0Y2goKGZ1bmN0aW9uKG4pe3JldHVybiBlLl9wYWdpbmdTdGF0dXM9cXUuUkVKRUNURUQsdC5zZXRNZXNzYWdlKGUuX3BhZ2luZ1RpbWVTdGFtcCksZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz1QbihlLDIpLHI9b1swXSxhPW9bMV07dC5zZXRFcnJvcihuLHIsYSkuZW5kKCl9KSksT18obil9KSl9fSx7a2V5OlwiX3BhdGNoQ29udmVyc2F0aW9uUHJvcGVydGllc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PURhdGUubm93KCksbj10aGlzLmNoZWNrQW5kUGF0Y2hSZW1hcmsoKSxvPXRoaXMuX21lc3NhZ2VSZW1pbmRIYW5kbGVyLmdldEMyQ01lc3NhZ2VSZW1pbmRUeXBlKCkscj10aGlzLmdldE1vZHVsZShzbCkuZ2V0R3JvdXBMaXN0KCk7UHJvbWlzZS5hbGwoW24sbyxyXSkudGhlbigoZnVuY3Rpb24oKXt2YXIgbj1EYXRlLm5vdygpLXQ7UWkubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fcGF0Y2hDb252ZXJzYXRpb25Qcm9wZXJ0aWVzIG9rLiBjb3N0IFwiKS5jb25jYXQobixcIiBtc1wiKSksZS5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX0pKX19LHtrZXk6XCJfcGFnaW5nR2V0Q29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fcGFnaW5nR2V0Q29udmVyc2F0aW9uTGlzdFwiKTtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KHQsXCIgdGltZVN0YW1wOlwiKS5jb25jYXQodGhpcy5fcGFnaW5nVGltZVN0YW1wLFwiIHN0YXJ0SW5kZXg6XCIpLmNvbmNhdCh0aGlzLl9wYWdpbmdTdGFydEluZGV4KStcIiBwaW5uZWRUaW1lU3RhbXA6XCIuY29uY2F0KHRoaXMuX3BhZ2luZ1Bpbm5lZFRpbWVTdGFtcCxcIiBwaW5uZWRTdGFydEluZGV4OlwiKS5jb25jYXQodGhpcy5fcGFnaW5nUGlubmVkU3RhcnRJbmRleCkpLHRoaXMuX3BhZ2luZ1N0YXR1cz1xdS5QRU5ESU5HLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOllsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLmdldE15VXNlcklEKCksdGltZVN0YW1wOnRoaXMuX3BhZ2luZ1RpbWVTdGFtcCxzdGFydEluZGV4OnRoaXMuX3BhZ2luZ1N0YXJ0SW5kZXgscGlubmVkVGltZVN0YW1wOnRoaXMuX3BhZ2luZ1Bpbm5lZFRpbWVTdGFtcCxwaW5uZWRTdGFydEluZGV4OnRoaXMuX3BhZ2luZ1N0YXJ0SW5kZXgsb3JkZXJUeXBlOjF9fSkudGhlbigoZnVuY3Rpb24obil7dmFyIG89bi5kYXRhLHI9by5jb21wbGV0ZUZsYWcsYT1vLmNvbnZlcnNhdGlvbnMscz12b2lkIDA9PT1hP1tdOmEsaT1vLnRpbWVTdGFtcCxjPW8uc3RhcnRJbmRleCx1PW8ucGlubmVkVGltZVN0YW1wLGw9by5waW5uZWRTdGFydEluZGV4O2lmKFFpLmxvZyhcIlwiLmNvbmNhdCh0LFwiIG9rLiBjb21wbGV0ZUZsYWc6XCIpLmNvbmNhdChyLFwiIGNvdW50OlwiKS5jb25jYXQocy5sZW5ndGgsXCIgaXNSZWFkeTpcIikuY29uY2F0KGUuX2lzUmVhZHkpKSxzLmxlbmd0aD4wKXt2YXIgZD1lLl9nZXRDb252ZXJzYXRpb25PcHRpb25zKHMpO2UuX3VwZGF0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdCh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6ZCxpc0Zyb21HZXRDb252ZXJzYXRpb25zOiEwfSksZS5pc0xvZ2dlZEluKCkmJmUuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpfWlmKCFlLl9pc1JlYWR5KXtpZighZS5pc0xvZ2dlZEluKCkpcmV0dXJuIGtfKCk7ZS50cmlnZ2VyUmVhZHkoKX1yZXR1cm4gZS5fcGFnaW5nVGltZVN0YW1wPWksZS5fcGFnaW5nU3RhcnRJbmRleD1jLGUuX3BhZ2luZ1Bpbm5lZFRpbWVTdGFtcD11LGUuX3BhZ2luZ1Bpbm5lZFN0YXJ0SW5kZXg9bCwxIT09cj9lLl9wYWdpbmdHZXRDb252ZXJzYXRpb25MaXN0KCk6KGUuX2hhbmRsZUdyb3VwQXRUaXBzTGlzdCgpLGtfKCkpfSkpLmNhdGNoKChmdW5jdGlvbihuKXt0aHJvdyBlLmlzTG9nZ2VkSW4oKSYmKGUuX2lzUmVhZHl8fChRaS53YXJuKFwiXCIuY29uY2F0KHQsXCIgZmFpbGVkLiBlcnJvcjpcIiksbiksZS50cmlnZ2VyUmVhZHkoKSkpLG59KSl9fSx7a2V5OlwiX3VwZGF0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5pc0Zyb21HZXRDb252ZXJzYXRpb25zLG89RGF0ZS5ub3coKTt0PXRoaXMuX2dldFRtcENvbnZlcnNhdGlvbkxpc3RNYXBwaW5nKGUpLHRoaXMuX2NvbnZlcnNhdGlvbk1hcD1uZXcgTWFwKHRoaXMuX3NvcnRDb252ZXJzYXRpb25MaXN0KFtdLmNvbmNhdChVbih0LnRvQmVVcGRhdGVkQ29udmVyc2F0aW9uTGlzdCksVW4odGhpcy5fY29udmVyc2F0aW9uTWFwKSkpKSxufHx0aGlzLl91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGUodC5uZXdDb252ZXJzYXRpb25MaXN0KSxRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3VwZGF0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdCBjb3N0IFwiKS5jb25jYXQoRGF0ZS5ub3coKS1vLFwiIG1zXCIpKX19LHtrZXk6XCJfZ2V0VG1wQ29udmVyc2F0aW9uTGlzdE1hcHBpbmdcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5jb252ZXJzYXRpb25PcHRpb25zTGlzdCxuPWUuaXNGcm9tR2V0Q29udmVyc2F0aW9ucyxvPWUuaXNJbnN0YW50TWVzc2FnZSxyPWUuaXNVbnJlYWRDMkNNZXNzYWdlLGE9dm9pZCAwIT09ciYmcixzPVtdLGk9W10sYz10aGlzLmdldE1vZHVsZShzbCksdT10aGlzLmdldE1vZHVsZShpbCksbD0wLGQ9dC5sZW5ndGg7bDxkO2wrKyl7dmFyIHA9bmV3IHJtKHRbbF0pLGc9cC5jb252ZXJzYXRpb25JRDtpZihnIT09XCJcIi5jb25jYXQoWW4uQ09OVl9DMkMsXCJAVExTI0VSUk9SXCIpJiZnIT09XCJcIi5jb25jYXQoWW4uQ09OVl9DMkMsXCJAVExTI05PVF9GT1VORFwiKSlpZih0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGcpKXt2YXIgaD10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGcpLGY9W1widW5yZWFkQ291bnRcIixcImFsbG93VHlwZVwiLFwiYWRtaW5Gb3JiaWRUeXBlXCIsXCJwYXlsb2FkXCIsXCJpc1Bpbm5lZFwiXTshMT09PW8mJmYucHVzaChcImxhc3RNZXNzYWdlXCIpO3ZhciBfPXRbbF0ubGFzdE1lc3NhZ2UsbT0hZ2MoXyk7bXx8dGhpcy5fb25MYXN0TWVzc2FnZU5vdEV4aXN0KHRbbF0pLGdjKG8pJiZtJiZudWxsPT09aC5sYXN0TWVzc2FnZS5wYXlsb2FkJiYoaC5sYXN0TWVzc2FnZS5wYXlsb2FkPV8ucGF5bG9hZCksSWMoaCxwLGYsW251bGwsdm9pZCAwLFwiXCIsMCxOYU5dKSxoLnVwZGF0ZVVucmVhZENvdW50KHtuZXh0VW5yZWFkQ291bnQ6cC51bnJlYWRDb3VudCxpc0Zyb21HZXRDb252ZXJzYXRpb25zOm4saXNVbnJlYWRDMkNNZXNzYWdlOmF9KSxvJiZtJiYoaC5sYXN0TWVzc2FnZS5wYXlsb2FkPV8ucGF5bG9hZCxoLnR5cGU9PT1Zbi5DT05WX0dST1VQJiYoaC5sYXN0TWVzc2FnZS5uYW1lQ2FyZD1fLm5hbWVDYXJkLGgubGFzdE1lc3NhZ2Uubmljaz1fLm5pY2spKSxtJiZoLmxhc3RNZXNzYWdlLmNsb3VkQ3VzdG9tRGF0YSE9PV8uY2xvdWRDdXN0b21EYXRhJiYoaC5sYXN0TWVzc2FnZS5jbG91ZEN1c3RvbURhdGE9Xy5jbG91ZEN1c3RvbURhdGF8fFwiXCIpLHRoaXMuX2NvbnZlcnNhdGlvbk1hcC5kZWxldGUoZykscy5wdXNoKFtnLGhdKX1lbHNle2lmKHAudHlwZT09PVluLkNPTlZfR1JPVVAmJmMpe3ZhciB2PXAuZ3JvdXBQcm9maWxlLmdyb3VwSUQsTT1jLmdldExvY2FsR3JvdXBQcm9maWxlKHYpO00mJihwLmdyb3VwUHJvZmlsZT1NLHAudXBkYXRlVW5yZWFkQ291bnQoe25leHRVbnJlYWRDb3VudDowfSkpfWVsc2UgaWYocC50eXBlPT09WW4uQ09OVl9DMkMpe3ZhciB5PWcucmVwbGFjZShZbi5DT05WX0MyQyxcIlwiKTt1JiZ1LmlzTXlGcmllbmQoeSkmJihwLnJlbWFyaz11LmdldEZyaWVuZFJlbWFyayh5KSl9aS5wdXNoKHApLHMucHVzaChbZyxwXSl9fXJldHVybnt0b0JlVXBkYXRlZENvbnZlcnNhdGlvbkxpc3Q6cyxuZXdDb252ZXJzYXRpb25MaXN0Oml9fX0se2tleTpcIl9vbkxhc3RNZXNzYWdlTm90RXhpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtuZXcgZHAoQmcpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoZSkpKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpfX0se2tleTpcIl9zb3J0Q29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W107cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ITA9PT1lWzFdLmlzUGlubmVkP3QucHVzaChlKTpuLnB1c2goZSl9KSksdC5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiB0WzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lLWVbMV0ubGFzdE1lc3NhZ2UubGFzdFRpbWV9KSkuY29uY2F0KG4uc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdFsxXS5sYXN0TWVzc2FnZS5sYXN0VGltZS1lWzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lfSkpKX19LHtrZXk6XCJfc29ydENvbnZlcnNhdGlvbkxpc3RBbmRFbWl0RXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnZlcnNhdGlvbk1hcD1uZXcgTWFwKHRoaXMuX3NvcnRDb252ZXJzYXRpb25MaXN0KFVuKHRoaXMuX2NvbnZlcnNhdGlvbk1hcCkpKSx0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX0se2tleTpcIl91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKDAhPT1lLmxlbmd0aCl7dmFyIG49W10sbz1bXSxyPXRoaXMuZ2V0TW9kdWxlKHJsKSxhPXRoaXMuZ2V0TW9kdWxlKHNsKTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKGUudHlwZT09PVluLkNPTlZfQzJDKW4ucHVzaChlLnRvQWNjb3VudCk7ZWxzZSBpZihlLnR5cGU9PT1Zbi5DT05WX0dST1VQKXt2YXIgdD1lLnRvQWNjb3VudDthLmhhc0xvY2FsR3JvdXAodCk/ZS5ncm91cFByb2ZpbGU9YS5nZXRMb2NhbEdyb3VwUHJvZmlsZSh0KTpvLnB1c2godCl9fSkpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3VwZGF0ZVVzZXJPckdyb3VwUHJvZmlsZSBjMmNVc2VySURMaXN0OlwiKS5jb25jYXQobixcIiBncm91cElETGlzdDpcIikuY29uY2F0KG8pKSxuLmxlbmd0aD4wJiZyLmdldFVzZXJQcm9maWxlKHt1c2VySURMaXN0Om59KS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1lLmRhdGE7cGMobik/bi5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9jb252ZXJzYXRpb25NYXAuZ2V0KFwiQzJDXCIuY29uY2F0KGUudXNlcklEKSkudXNlclByb2ZpbGU9ZX0pKTp0Ll9jb252ZXJzYXRpb25NYXAuZ2V0KFwiQzJDXCIuY29uY2F0KG4udXNlcklEKSkudXNlclByb2ZpbGU9bn0pKSxvLmxlbmd0aD4wJiZhLmdldEdyb3VwUHJvZmlsZUFkdmFuY2Uoe2dyb3VwSURMaXN0Om8scmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZUluZm9GaWx0ZXI6W1wiVHlwZVwiLFwiTmFtZVwiLFwiRmFjZVVybFwiXX19KS50aGVuKChmdW5jdGlvbihlKXtlLmRhdGEuc3VjY2Vzc0dyb3VwTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1cIkdST1VQXCIuY29uY2F0KGUuZ3JvdXBJRCk7aWYodC5fY29udmVyc2F0aW9uTWFwLmhhcyhuKSl7dmFyIG89dC5fY29udmVyc2F0aW9uTWFwLmdldChuKTtJYyhvLmdyb3VwUHJvZmlsZSxlLFtdLFtudWxsLHZvaWQgMCxcIlwiLDAsTmFOXSksIW8uc3ViVHlwZSYmZS50eXBlJiYoby5zdWJUeXBlPWUudHlwZSl9fSkpfSkpfX19LHtrZXk6XCJfZ2V0Q29udmVyc2F0aW9uT3B0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1bXSxvPWUuZmlsdGVyKChmdW5jdGlvbihlKXt2YXIgdD1lLmxhc3RNc2c7cmV0dXJuIGRjKHQpfSkpLmZpbHRlcigoZnVuY3Rpb24oZSl7dmFyIHQ9ZS50eXBlLG49ZS51c2VySUQ7cmV0dXJuIDE9PT10JiZcIkBUTFMjTk9UX0ZPVU5EXCIhPT1uJiZcIkBUTFMjRVJST1JcIiE9PW58fDI9PT10fSkpLm1hcCgoZnVuY3Rpb24oZSl7aWYoMT09PWUudHlwZSl7dmFyIG89e3VzZXJJRDplLnVzZXJJRCxuaWNrOmUucGVlck5pY2ssYXZhdGFyOmUucGVlckF2YXRhcn07cmV0dXJuIG4ucHVzaChvKSx7Y29udmVyc2F0aW9uSUQ6XCJDMkNcIi5jb25jYXQoZS51c2VySUQpLHR5cGU6XCJDMkNcIixsYXN0TWVzc2FnZTp7bGFzdFRpbWU6ZS50aW1lLGxhc3RTZXF1ZW5jZTplLnNlcXVlbmNlLGZyb21BY2NvdW50OmUubGFzdEMyQ01zZ0Zyb21BY2NvdW50LG1lc3NhZ2VGb3JTaG93OmUubWVzc2FnZVNob3csdHlwZTplLmxhc3RNc2cuZWxlbWVudHNbMF0/ZS5sYXN0TXNnLmVsZW1lbnRzWzBdLnR5cGU6bnVsbCxwYXlsb2FkOmUubGFzdE1zZy5lbGVtZW50c1swXT9lLmxhc3RNc2cuZWxlbWVudHNbMF0uY29udGVudDpudWxsLGNsb3VkQ3VzdG9tRGF0YTplLmxhc3RNc2cuY2xvdWRDdXN0b21EYXRhfHxcIlwiLGlzUmV2b2tlZDo4PT09ZS5sYXN0TWVzc2FnZUZsYWcsb25saW5lT25seUZsYWc6ITEsbmljazpcIlwiLG5hbWVDYXJkOlwiXCJ9LHVzZXJQcm9maWxlOm5ldyBYXyhvKSxwZWVyUmVhZFRpbWU6ZS5jMmNQZWVyUmVhZFRpbWUsaXNQaW5uZWQ6MT09PWUuaXNQaW5uZWQsbWVzc2FnZVJlbWluZFR5cGU6XCJcIn19cmV0dXJue2NvbnZlcnNhdGlvbklEOlwiR1JPVVBcIi5jb25jYXQoZS5ncm91cElEKSx0eXBlOlwiR1JPVVBcIixsYXN0TWVzc2FnZTpDbih7bGFzdFRpbWU6ZS50aW1lLGxhc3RTZXF1ZW5jZTplLm1lc3NhZ2VSZWFkU2VxK2UudW5yZWFkQ291bnQsZnJvbUFjY291bnQ6ZS5tc2dHcm91cEZyb21BY2NvdW50LG1lc3NhZ2VGb3JTaG93OmUubWVzc2FnZVNob3d9LHQuX3BhdGNoVHlwZUFuZFBheWxvYWQoZSkse2Nsb3VkQ3VzdG9tRGF0YTplLmxhc3RNc2cuY2xvdWRDdXN0b21EYXRhfHxcIlwiLGlzUmV2b2tlZDoyPT09ZS5sYXN0TWVzc2FnZUZsYWcsb25saW5lT25seUZsYWc6ITEsbmljazplLnNlbmRlck5pY2t8fFwiXCIsbmFtZUNhcmQ6ZS5zZW5kZXJOYW1lQ2FyZHx8XCJcIn0pLGdyb3VwUHJvZmlsZTpuZXcgdG0oe2dyb3VwSUQ6ZS5ncm91cElELG5hbWU6ZS5ncm91cE5pY2ssYXZhdGFyOmUuZ3JvdXBJbWFnZX0pLHVucmVhZENvdW50OmUudW5yZWFkQ291bnQscGVlclJlYWRUaW1lOjAsaXNQaW5uZWQ6MT09PWUuaXNQaW5uZWQsbWVzc2FnZVJlbWluZFR5cGU6XCJcIn19KSk7bi5sZW5ndGg+MCYmdGhpcy5nZXRNb2R1bGUocmwpLm9uQ29udmVyc2F0aW9uc1Byb2ZpbGVVcGRhdGVkKG4pO3JldHVybiBvfX0se2tleTpcIl9wYXRjaFR5cGVBbmRQYXlsb2FkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sYXN0TXNnLG49dC5ldmVudCxvPXZvaWQgMD09PW4/dm9pZCAwOm4scj10LmVsZW1lbnRzLGE9dm9pZCAwPT09cj9bXTpyLHM9dC5ncm91cFRpcHMsaT12b2lkIDA9PT1zP3t9OnM7aWYoIWdjKG8pJiYhSmMoaSkpe3ZhciBjPW5ldyBNXyhpKTtjLnNldEVsZW1lbnQoe3R5cGU6WW4uTVNHX0dSUF9USVAsY29udGVudDpDbih7fSxpLmVsZW1lbnRzLHtncm91cFByb2ZpbGU6aS5ncm91cFByb2ZpbGV9KX0pO3ZhciB1PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYy5wYXlsb2FkKSk7cmV0dXJuIGM9bnVsbCx7dHlwZTpZbi5NU0dfR1JQX1RJUCxwYXlsb2FkOnV9fXJldHVybnt0eXBlOmFbMF0/YVswXS50eXBlOm51bGwscGF5bG9hZDphWzBdP2FbMF0uY29udGVudDpudWxsfX19LHtrZXk6XCJnZXRMb2NhbE1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpfX0se2tleTpcImRlbGV0ZUxvY2FsTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UgaW5zdGFuY2VvZiBNXyYmdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnJlbW92ZShlKX19LHtrZXk6XCJvbkNvbnZlcnNhdGlvbkRlbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Db252ZXJzYXRpb25EZWxldGVkXCIpKSxwYyhlKSYmZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnR5cGUsbz1lLnVzZXJJRCxyPWUuZ3JvdXBJRCxhPVwiXCI7MT09PW4/YT1cIlwiLmNvbmNhdChZbi5DT05WX0MyQykuY29uY2F0KG8pOjI9PT1uJiYoYT1cIlwiLmNvbmNhdChZbi5DT05WX0dST1VQKS5jb25jYXQocikpLHQuZGVsZXRlTG9jYWxDb252ZXJzYXRpb24oYSl9KSl9fSx7a2V5Olwib25Db252ZXJzYXRpb25QaW5uZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHBjKGUpKXt2YXIgbj0hMTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvLHI9ZS50eXBlLGE9ZS51c2VySUQscz1lLmdyb3VwSUQ7MT09PXI/bz10LmdldExvY2FsQ29udmVyc2F0aW9uKFwiXCIuY29uY2F0KFluLkNPTlZfQzJDKS5jb25jYXQoYSkpOjI9PT1yJiYobz10LmdldExvY2FsQ29udmVyc2F0aW9uKFwiXCIuY29uY2F0KFluLkNPTlZfR1JPVVApLmNvbmNhdChzKSkpLG8mJihRaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLm9uQ29udmVyc2F0aW9uUGlubmVkIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoby5jb252ZXJzYXRpb25JRCxcIiBpc1Bpbm5lZDpcIikuY29uY2F0KG8uaXNQaW5uZWQpKSxvLmlzUGlubmVkfHwoby5pc1Bpbm5lZD0hMCxuPSEwKSl9KSksbiYmdGhpcy5fc29ydENvbnZlcnNhdGlvbkxpc3RBbmRFbWl0RXZlbnQoKX19fSx7a2V5Olwib25Db252ZXJzYXRpb25VbnBpbm5lZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYocGMoZSkpe3ZhciBuPSExO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG8scj1lLnR5cGUsYT1lLnVzZXJJRCxzPWUuZ3JvdXBJRDsxPT09cj9vPXQuZ2V0TG9jYWxDb252ZXJzYXRpb24oXCJcIi5jb25jYXQoWW4uQ09OVl9DMkMpLmNvbmNhdChhKSk6Mj09PXImJihvPXQuZ2V0TG9jYWxDb252ZXJzYXRpb24oXCJcIi5jb25jYXQoWW4uQ09OVl9HUk9VUCkuY29uY2F0KHMpKSksbyYmKFFpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIub25Db252ZXJzYXRpb25VbnBpbm5lZCBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KG8uY29udmVyc2F0aW9uSUQsXCIgaXNQaW5uZWQ6XCIpLmNvbmNhdChvLmlzUGlubmVkKSksby5pc1Bpbm5lZCYmKG8uaXNQaW5uZWQ9ITEsbj0hMCkpfSkpLG4mJnRoaXMuX3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50KCl9fX0se2tleTpcImdldE1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY29udmVyc2F0aW9uSUQsbz1lLm5leHRSZXFNZXNzYWdlSUQscj1lLmNvdW50LGE9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldE1lc3NhZ2VMaXN0XCIpLHM9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihuKSxpPVwiXCI7aWYocyYmcy5ncm91cFByb2ZpbGUmJihpPXMuZ3JvdXBQcm9maWxlLnR5cGUpLHdjKGkpKXJldHVybiBRaS5sb2coXCJcIi5jb25jYXQoYSxcIiBub3QgYXZhaWxhYmxlIGluIGF2Y2hhdHJvb20uIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobikpLGtfKHttZXNzYWdlTGlzdDpbXSxuZXh0UmVxTWVzc2FnZUlEOlwiXCIsaXNDb21wbGV0ZWQ6ITB9KTsoZ2Mocil8fHI+MTUpJiYocj0xNSk7dmFyIGM9dGhpcy5fY29tcHV0ZUxlZnRDb3VudCh7Y29udmVyc2F0aW9uSUQ6bixuZXh0UmVxTWVzc2FnZUlEOm99KTtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KGEsXCIgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChuLFwiIGxlZnRDb3VudDpcIikuY29uY2F0KGMsXCIgY291bnQ6XCIpLmNvbmNhdChyLFwiIG5leHRSZXFNZXNzYWdlSUQ6XCIpLmNvbmNhdChvKSksdGhpcy5fbmVlZEdldEhpc3Rvcnkoe2NvbnZlcnNhdGlvbklEOm4sbGVmdENvdW50OmMsY291bnQ6cn0pP3RoaXMuZ2V0SGlzdG9yeU1lc3NhZ2VzKHtjb252ZXJzYXRpb25JRDpuLG5leHRSZXFNZXNzYWdlSUQ6byxjb3VudDoyMH0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGM9dC5fY29tcHV0ZUxlZnRDb3VudCh7Y29udmVyc2F0aW9uSUQ6bixuZXh0UmVxTWVzc2FnZUlEOm99KSx5Xyh0Ll9jb21wdXRlUmVzdWx0KHtjb252ZXJzYXRpb25JRDpuLG5leHRSZXFNZXNzYWdlSUQ6byxjb3VudDpyLGxlZnRDb3VudDpjfSkpfSkpOihRaS5sb2coXCJcIi5jb25jYXQoYSxcIi5nZXRNZXNzYWdlTGlzdCBnZXQgbWVzc2FnZSBsaXN0IGZyb20gbWVtb3J5XCIpKSx0aGlzLm1vZGlmeU1lc3NhZ2VMaXN0KG4pLGtfKHRoaXMuX2NvbXB1dGVSZXN1bHQoe2NvbnZlcnNhdGlvbklEOm4sbmV4dFJlcU1lc3NhZ2VJRDpvLGNvdW50OnIsbGVmdENvdW50OmN9KSkpfX0se2tleTpcIl9jb21wdXRlTGVmdENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubmV4dFJlcU1lc3NhZ2VJRDtyZXR1cm4gbj90aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdCh0KS5maW5kSW5kZXgoKGZ1bmN0aW9uKGUpe3JldHVybiBlLklEPT09bn0pKTp0aGlzLl9nZXRNZXNzYWdlTGlzdFNpemUodCl9fSx7a2V5OlwiX2dldE1lc3NhZ2VMaXN0U2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKS5sZW5ndGh9fSx7a2V5OlwiX25lZWRHZXRIaXN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubGVmdENvdW50LG89ZS5jb3VudCxyPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24odCksYT1cIlwiO3JldHVybiByJiZyLmdyb3VwUHJvZmlsZSYmKGE9ci5ncm91cFByb2ZpbGUudHlwZSksIUZjKHQpJiYhd2MoYSkmJihuPG8mJiF0aGlzLl9jb21wbGV0ZWRNYXAuaGFzKHQpKX19LHtrZXk6XCJfY29tcHV0ZVJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLm5leHRSZXFNZXNzYWdlSUQsbz1lLmNvdW50LHI9ZS5sZWZ0Q291bnQsYT10aGlzLl9jb21wdXRlTWVzc2FnZUxpc3Qoe2NvbnZlcnNhdGlvbklEOnQsbmV4dFJlcU1lc3NhZ2VJRDpuLGNvdW50Om99KSxzPXRoaXMuX2NvbXB1dGVJc0NvbXBsZXRlZCh7Y29udmVyc2F0aW9uSUQ6dCxsZWZ0Q291bnQ6cixjb3VudDpvfSksaT10aGlzLl9jb21wdXRlTmV4dFJlcU1lc3NhZ2VJRCh7bWVzc2FnZUxpc3Q6YSxpc0NvbXBsZXRlZDpzLGNvbnZlcnNhdGlvbklEOnR9KSxjPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fY29tcHV0ZVJlc3VsdC4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdCh0KTtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KGMsXCIgbGVmdENvdW50OlwiKS5jb25jYXQocixcIiBjb3VudDpcIikuY29uY2F0KG8sXCIgbmV4dFJlcU1lc3NhZ2VJRDpcIikuY29uY2F0KGksXCIgaXNDb21wbGV0ZWQ6XCIpLmNvbmNhdChzKSkse21lc3NhZ2VMaXN0OmEsbmV4dFJlcU1lc3NhZ2VJRDppLGlzQ29tcGxldGVkOnN9fX0se2tleTpcIl9jb21wdXRlTWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5uZXh0UmVxTWVzc2FnZUlELG89ZS5jb3VudCxyPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KHQpLGE9dGhpcy5fY29tcHV0ZUluZGV4RW5kKHtuZXh0UmVxTWVzc2FnZUlEOm4sbWVzc2FnZUxpc3Q6cn0pLHM9dGhpcy5fY29tcHV0ZUluZGV4U3RhcnQoe2luZGV4RW5kOmEsY291bnQ6b30pO3JldHVybiByLnNsaWNlKHMsYSl9fSx7a2V5OlwiX2NvbXB1dGVOZXh0UmVxTWVzc2FnZUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXNzYWdlTGlzdCxuPWUuaXNDb21wbGV0ZWQsbz1lLmNvbnZlcnNhdGlvbklEO2lmKCFuKXJldHVybiAwPT09dC5sZW5ndGg/XCJcIjp0WzBdLklEO3ZhciByPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KG8pO3JldHVybiAwPT09ci5sZW5ndGg/XCJcIjpyWzBdLklEfX0se2tleTpcIl9jb21wdXRlSW5kZXhFbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm1lc3NhZ2VMaXN0LG49dm9pZCAwPT09dD9bXTp0LG89ZS5uZXh0UmVxTWVzc2FnZUlEO3JldHVybiBvP24uZmluZEluZGV4KChmdW5jdGlvbihlKXtyZXR1cm4gZS5JRD09PW99KSk6bi5sZW5ndGh9fSx7a2V5OlwiX2NvbXB1dGVJbmRleFN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbmRleEVuZCxuPWUuY291bnQ7cmV0dXJuIHQ+bj90LW46MH19LHtrZXk6XCJfY29tcHV0ZUlzQ29tcGxldGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRDtyZXR1cm4hIShlLmxlZnRDb3VudDw9ZS5jb3VudCYmdGhpcy5fY29tcGxldGVkTWFwLmhhcyh0KSl9fSx7a2V5OlwiZ2V0SGlzdG9yeU1lc3NhZ2VzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubmV4dFJlcU1lc3NhZ2VJRDtpZih0PT09WW4uQ09OVl9TWVNURU0pcmV0dXJuIGtfKCk7ZS5jb3VudD9lLmNvdW50PjIwJiYoZS5jb3VudD0yMCk6ZS5jb3VudD0xNTt2YXIgbz10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxPbGRlc3RNZXNzYWdlQnlDb252ZXJzYXRpb25JRCh0KTtvfHwoKG89e30pLnRpbWU9MCxvLnNlcXVlbmNlPTAsMD09PXQuaW5kZXhPZihZbi5DT05WX0MyQyk/KG8udG89dC5yZXBsYWNlKFluLkNPTlZfQzJDLFwiXCIpLG8uY29udmVyc2F0aW9uVHlwZT1Zbi5DT05WX0MyQyk6MD09PXQuaW5kZXhPZihZbi5DT05WX0dST1VQKSYmKG8udG89dC5yZXBsYWNlKFluLkNPTlZfR1JPVVAsXCJcIiksby5jb252ZXJzYXRpb25UeXBlPVluLkNPTlZfR1JPVVApKTt2YXIgcj1cIlwiLGE9bnVsbCxzPXRoaXMuX3JvYW1pbmdNZXNzYWdlS2V5QW5kVGltZU1hcC5oYXModCk7c3dpdGNoKG8uY29udmVyc2F0aW9uVHlwZSl7Y2FzZSBZbi5DT05WX0MyQzpyZXR1cm4gcj10LnJlcGxhY2UoWW4uQ09OVl9DMkMsXCJcIiksKGE9dGhpcy5nZXRNb2R1bGUoYWwpKT9hLmdldFJvYW1pbmdNZXNzYWdlKHtjb252ZXJzYXRpb25JRDplLmNvbnZlcnNhdGlvbklELHBlZXJBY2NvdW50OnIsY291bnQ6ZS5jb3VudCxsYXN0TWVzc2FnZVRpbWU6cz90aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuZ2V0KHQpLmxhc3RNZXNzYWdlVGltZTowLG1lc3NhZ2VLZXk6cz90aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuZ2V0KHQpLm1lc3NhZ2VLZXk6XCJcIn0pOk9fKHtjb2RlOnpkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOkpkLkNBTk5PVF9GSU5EX01PRFVMRX0pO2Nhc2UgWW4uQ09OVl9HUk9VUDpyZXR1cm4oYT10aGlzLmdldE1vZHVsZShzbCkpP2EuZ2V0Um9hbWluZ01lc3NhZ2Uoe2NvbnZlcnNhdGlvbklEOmUuY29udmVyc2F0aW9uSUQsZ3JvdXBJRDpvLnRvLGNvdW50OmUuY291bnQsc2VxdWVuY2U6biYmITE9PT1vLl9vbmxpbmVPbmx5RmxhZz9vLnNlcXVlbmNlLTE6by5zZXF1ZW5jZX0pOk9fKHtjb2RlOnpkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOkpkLkNBTk5PVF9GSU5EX01PRFVMRX0pO2RlZmF1bHQ6cmV0dXJuIGtfKCl9fX0se2tleTpcInBhdGNoQ29udmVyc2F0aW9uTGFzdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpO2lmKHQpe3ZhciBuPXQubGFzdE1lc3NhZ2Usbz1uLm1lc3NhZ2VGb3JTaG93LHI9bi5wYXlsb2FkO2lmKEpjKG8pfHxKYyhyKSl7dmFyIGE9dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSk7aWYoMD09PWEubGVuZ3RoKXJldHVybjt2YXIgcz1hW2EubGVuZ3RoLTFdO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucGF0Y2hDb252ZXJzYXRpb25MYXN0TWVzc2FnZSBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgcGF5bG9hZDpcIikscy5wYXlsb2FkKSx0LnVwZGF0ZUxhc3RNZXNzYWdlKHMpfX19fSx7a2V5Olwic3RvcmVSb2FtaW5nTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOltdLHQ9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsbj10LnN0YXJ0c1dpdGgoWW4uQ09OVl9DMkMpP1luLkNPTlZfQzJDOlluLkNPTlZfR1JPVVAsbz1udWxsLHI9W10sYT0wLHM9ZS5sZW5ndGgsaT1udWxsLGM9bj09PVluLkNPTlZfR1JPVVAsdT10aGlzLmdldE1vZHVsZShobCksbD1mdW5jdGlvbigpe2E9Yz9lLmxlbmd0aC0xOjAscz1jPzA6ZS5sZW5ndGh9LGQ9ZnVuY3Rpb24oKXtjPy0tYTorK2F9LHA9ZnVuY3Rpb24oKXtyZXR1cm4gYz9hPj1zOmE8c307Zm9yKGwoKTtwKCk7ZCgpKWlmKGMmJjE9PT1lW2FdLnNlcXVlbmNlJiZ0aGlzLnNldENvbXBsZXRlZCh0KSwxIT09ZVthXS5pc1BsYWNlTWVzc2FnZSlpZigobz1uZXcgTV8oZVthXSkpLnRvPWVbYV0udG8sby5pc1N5c3RlbU1lc3NhZ2U9ISFlW2FdLmlzU3lzdGVtTWVzc2FnZSxvLmNvbnZlcnNhdGlvblR5cGU9biw0PT09ZVthXS5ldmVudD9pPXt0eXBlOlluLk1TR19HUlBfVElQLGNvbnRlbnQ6Q24oe30sZVthXS5lbGVtZW50cyx7Z3JvdXBQcm9maWxlOmVbYV0uZ3JvdXBQcm9maWxlfSl9OihlW2FdLmVsZW1lbnRzPXUucGFyc2VFbGVtZW50cyhlW2FdLmVsZW1lbnRzLGVbYV0uZnJvbSksaT1lW2FdLmVsZW1lbnRzKSxjfHxvLnNldE5pY2tBbmRBdmF0YXIoe25pY2s6ZVthXS5uaWNrLGF2YXRhcjplW2FdLmF2YXRhcn0pLEpjKGkpKXt2YXIgZz1uZXcgZHAocXApO2cuc2V0TWVzc2FnZShcImZyb206XCIuY29uY2F0KG8uZnJvbSxcIiB0bzpcIikuY29uY2F0KG8udG8sXCIgc2VxdWVuY2U6XCIpLmNvbmNhdChvLnNlcXVlbmNlLFwiIGV2ZW50OlwiKS5jb25jYXQoZVthXS5ldmVudCkpLGcuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRMZXZlbChcIndhcm5pbmdcIikuZW5kKCl9ZWxzZSBvLnNldEVsZW1lbnQoaSksby5yZUluaXRpYWxpemUodGhpcy5nZXRNeVVzZXJJRCgpKSxyLnB1c2gobyk7cmV0dXJuIHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci51bnNoaWZ0KHIpLGw9ZD1wPW51bGwscn19LHtrZXk6XCJmaW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZmluZE1lc3NhZ2UoZSl9fSx7a2V5Olwic2V0TWVzc2FnZVJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49KGUubWVzc2FnZUlELHRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24odCkpO2lmKFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0TWVzc2FnZVJlYWQgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdCh0LFwiIHVucmVhZENvdW50OlwiKS5jb25jYXQobj9uLnVucmVhZENvdW50OjApKSwhbilyZXR1cm4ga18oKTtpZihuLnR5cGUhPT1Zbi5DT05WX0dST1VQfHxKYyhuLmdyb3VwQXRJbmZvTGlzdCl8fHRoaXMuZGVsZXRlR3JvdXBBdFRpcHModCksMD09PW4udW5yZWFkQ291bnQpcmV0dXJuIGtfKCk7dmFyIG89dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTGFzdE1lc3NhZ2UodCkscj1uLmxhc3RNZXNzYWdlLmxhc3RUaW1lO28mJnI8by50aW1lJiYocj1vLnRpbWUpO3ZhciBhPW4ubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlO28mJmE8by5zZXF1ZW5jZSYmKGE9by5zZXF1ZW5jZSk7dmFyIHM9bnVsbDtzd2l0Y2gobi50eXBlKXtjYXNlIFluLkNPTlZfQzJDOnJldHVybihzPXRoaXMuZ2V0TW9kdWxlKGFsKSk/cy5zZXRNZXNzYWdlUmVhZCh7Y29udmVyc2F0aW9uSUQ6dCxsYXN0TWVzc2FnZVRpbWU6cn0pOk9fKHtjb2RlOnpkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOkpkLkNBTk5PVF9GSU5EX01PRFVMRX0pO2Nhc2UgWW4uQ09OVl9HUk9VUDpyZXR1cm4ocz10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShzbCkpP3Muc2V0TWVzc2FnZVJlYWQoe2NvbnZlcnNhdGlvbklEOnQsbGFzdE1lc3NhZ2VTZXE6YX0pOk9fKHtjb2RlOnpkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOkpkLkNBTk5PVF9GSU5EX01PRFVMRX0pO2Nhc2UgWW4uQ09OVl9TWVNURU06cmV0dXJuIG4udW5yZWFkQ291bnQ9MCx0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpLGtfKCk7ZGVmYXVsdDpyZXR1cm4ga18oKX19fSx7a2V5Olwic2V0QWxsTWVzc2FnZVJlYWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0QWxsTWVzc2FnZVJlYWRcIik7dC5zY29wZXx8KHQuc2NvcGU9WW4uUkVBRF9BTExfTVNHKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBvcHRpb25zOlwiKSx0KTt2YXIgbz10aGlzLl9jcmVhdGVTZXRBbGxNZXNzYWdlUmVhZFBhY2sodCk7aWYoMD09PW8ucmVhZEFsbEMyQ01lc3NhZ2UmJjA9PT1vLmdyb3VwTWVzc2FnZVJlYWRJbmZvTGlzdC5sZW5ndGgpcmV0dXJuIGtfKCk7dmFyIHI9bmV3IGRwKFhwKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6cGQscmVxdWVzdERhdGE6b30pLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciBvPW4uZGF0YSxhPWUuX2hhbmRsZUFsbE1lc3NhZ2VSZWFkKG8pO3JldHVybiByLnNldE1lc3NhZ2UoXCJzY29wZTpcIi5jb25jYXQodC5zY29wZSxcIiBmYWlsdXJlR3JvdXBzOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoYSkpKS5zZXROZXR3b3JrVHlwZShlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLGtfKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3JldHVybiBlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPVBuKGUsMiksbz1uWzBdLGE9blsxXTtyLnNldEVycm9yKHQsbyxhKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksdCksT18oe2NvZGU6dCYmdC5jb2RlP3QuY29kZTp6ZC5NRVNTQUdFX1VOUkVBRF9BTExfRkFJTCxtZXNzYWdlOnQmJnQubWVzc2FnZT90Lm1lc3NhZ2U6SmQuTUVTU0FHRV9VTlJFQURfQUxMX0ZBSUx9KX0pKX19LHtrZXk6XCJfZ2V0Q29udmVyc2F0aW9uTGFzdE1lc3NhZ2VTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbExhc3RNZXNzYWdlKGUuY29udmVyc2F0aW9uSUQpLG49ZS5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2U7cmV0dXJuIHQmJm48dC5zZXF1ZW5jZSYmKG49dC5zZXF1ZW5jZSksbn19LHtrZXk6XCJfZ2V0Q29udmVyc2F0aW9uTGFzdE1lc3NhZ2VUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTGFzdE1lc3NhZ2UoZS5jb252ZXJzYXRpb25JRCksbj1lLmxhc3RNZXNzYWdlLmxhc3RUaW1lO3JldHVybiB0JiZuPHQudGltZSYmKG49dC50aW1lKSxufX0se2tleTpcIl9jcmVhdGVTZXRBbGxNZXNzYWdlUmVhZFBhY2tcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdCxuPXtyZWFkQWxsQzJDTWVzc2FnZTowLGdyb3VwTWVzc2FnZVJlYWRJbmZvTGlzdDpbXX0sbz1lLnNjb3BlLHI9Qm4odGhpcy5fY29udmVyc2F0aW9uTWFwKTt0cnl7Zm9yKHIucygpOyEodD1yLm4oKSkuZG9uZTspe3ZhciBhPVBuKHQudmFsdWUsMilbMV07aWYoYS51bnJlYWRDb3VudD4wKWlmKGEudHlwZT09PVluLkNPTlZfQzJDJiYwPT09bi5yZWFkQWxsQzJDTWVzc2FnZSl7aWYobz09PVluLlJFQURfQUxMX01TRyluLnJlYWRBbGxDMkNNZXNzYWdlPTE7ZWxzZSBpZihvPT09WW4uUkVBRF9BTExfQzJDX01TRyl7bi5yZWFkQWxsQzJDTWVzc2FnZT0xO2JyZWFrfX1lbHNlIGlmKGEudHlwZT09PVluLkNPTlZfR1JPVVAmJihvPT09WW4uUkVBRF9BTExfR1JPVVBfTVNHfHxvPT09WW4uUkVBRF9BTExfTVNHKSl7dmFyIHM9dGhpcy5fZ2V0Q29udmVyc2F0aW9uTGFzdE1lc3NhZ2VTZXF1ZW5jZShhKTtuLmdyb3VwTWVzc2FnZVJlYWRJbmZvTGlzdC5wdXNoKHtncm91cElEOmEuZ3JvdXBQcm9maWxlLmdyb3VwSUQsbWVzc2FnZVNlcXVlbmNlOnN9KX19fWNhdGNoKGkpe3IuZShpKX1maW5hbGx5e3IuZigpfXJldHVybiBufX0se2tleTpcIm9uUHVzaGVkQWxsTWVzc2FnZVJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVBbGxNZXNzYWdlUmVhZChlKX19LHtrZXk6XCJfaGFuZGxlQWxsTWVzc2FnZVJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdyb3VwTWVzc2FnZVJlYWRJbmZvTGlzdCxuPWUucmVhZEFsbEMyQ01lc3NhZ2Usbz10aGlzLl9wYXJzZUdyb3VwUmVhZEluZm8odCk7cmV0dXJuIHRoaXMuX3VwZGF0ZUFsbENvbnZlcnNhdGlvblVucmVhZENvdW50KHtyZWFkQWxsQzJDTWVzc2FnZTpufSk+PTEmJnRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSksb319LHtrZXk6XCJfcGFyc2VHcm91cFJlYWRJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9W107aWYoZSYmZS5sZW5ndGgpZm9yKHZhciBuPTAsbz1lLmxlbmd0aDtuPG87bisrKXt2YXIgcj1lW25dLGE9ci5ncm91cElELHM9ci5zZXF1ZW5jZSxpPXIucmV0Q29kZSxjPXIubGFzdE1lc3NhZ2VTZXE7Z2MoaSk/dGhpcy5fcmVtb3RlR3JvdXBSZWFkU2VxdWVuY2VNYXAuc2V0KGEsYyk6KHRoaXMuX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwLnNldChhLHMpLDAhPT1pJiZ0LnB1c2goXCJcIi5jb25jYXQoYSxcIi1cIikuY29uY2F0KHMsXCItXCIpLmNvbmNhdChpKSkpfXJldHVybiB0fX0se2tleTpcIl91cGRhdGVBbGxDb252ZXJzYXRpb25VbnJlYWRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5yZWFkQWxsQzJDTWVzc2FnZSxvPTAscj1Cbih0aGlzLl9jb252ZXJzYXRpb25NYXApO3RyeXtmb3Ioci5zKCk7ISh0PXIubigpKS5kb25lOyl7dmFyIGE9UG4odC52YWx1ZSwyKSxzPWFbMF0saT1hWzFdO2lmKGkudW5yZWFkQ291bnQ+PTEpe2lmKDE9PT1uJiZpLnR5cGU9PT1Zbi5DT05WX0MyQyl7dmFyIGM9dGhpcy5fZ2V0Q29udmVyc2F0aW9uTGFzdE1lc3NhZ2VUaW1lKGkpO3RoaXMudXBkYXRlSXNSZWFkQWZ0ZXJSZWFkUmVwb3J0KHtjb252ZXJzYXRpb25JRDpzLGxhc3RNZXNzYWdlVGltZTpjfSl9ZWxzZSBpZihpLnR5cGU9PT1Zbi5DT05WX0dST1VQKXt2YXIgdT1zLnJlcGxhY2UoWW4uQ09OVl9HUk9VUCxcIlwiKTtpZih0aGlzLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcC5oYXModSkpe3ZhciBsPXRoaXMuX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwLmdldCh1KSxkPXRoaXMuX2dldENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlU2VxdWVuY2UoaSk7dGhpcy51cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnQoe2NvbnZlcnNhdGlvbklEOnMscmVtb3RlUmVhZFNlcXVlbmNlOmx9KSxkPj1sJiZ0aGlzLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcC5kZWxldGUodSl9fXRoaXMudXBkYXRlVW5yZWFkQ291bnQocywhMSkmJihvKz0xKX19fWNhdGNoKHApe3IuZShwKX1maW5hbGx5e3IuZigpfXJldHVybiBvfX0se2tleTpcImlzUmVtb3RlUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLnNlcXVlbmNlLG89dC5yZXBsYWNlKFluLkNPTlZfR1JPVVAsXCJcIikscj0hMTtpZih0aGlzLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcC5oYXMobykpe3ZhciBhPXRoaXMuX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwLmdldChvKTtuPD1hJiYocj0hMCxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmlzUmVtb3RlUmVhZCBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KHQsXCIgbWVzc2FnZVNlcXVlbmNlOlwiKS5jb25jYXQobixcIiByZW1vdGVSZWFkU2VxdWVuY2U6XCIpLmNvbmNhdChhKSkpLG4+PWErMTAmJnRoaXMuX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwLmRlbGV0ZShvKX1yZXR1cm4gcn19LHtrZXk6XCJ1cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5sYXN0TWVzc2FnZVNlcSxvPWUubGFzdE1lc3NhZ2VUaW1lLHI9dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QodCk7aWYoMCE9PXIubGVuZ3RoKWZvcih2YXIgYSxzPXIubGVuZ3RoLTE7cz49MDtzLS0paWYoYT1yW3NdLCEobyYmYS50aW1lPm98fG4mJmEuc2VxdWVuY2U+bikpe2lmKFwiaW5cIj09PWEuZmxvdyYmYS5pc1JlYWQpYnJlYWs7YS5zZXRJc1JlYWQoITApfX19LHtrZXk6XCJ1cGRhdGVVbnJlYWRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0sbj0hMSxvPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24oZSkscj10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKTtpZihvKXt2YXIgYT1vLnVucmVhZENvdW50LHM9ci5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiFlLmlzUmVhZCYmIWUuX29ubGluZU9ubHlGbGFnJiYhZS5pc0RlbGV0ZWR9KSkubGVuZ3RoO3JldHVybiBhIT09cyYmKG8udW5yZWFkQ291bnQ9cyxuPSEwLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIudXBkYXRlVW5yZWFkQ291bnQgZnJvbSBcIikuY29uY2F0KGEsXCIgdG8gXCIpLmNvbmNhdChzLFwiLCBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUpKSwhMD09PXQmJnRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSkpLG59fX0se2tleTpcInVwZGF0ZVJlYWRSZWNlaXB0SW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztpZighSmModCkpe3ZhciBvPVtdLHI9XCJcIi5jb25jYXQoWW4uQ09OVl9HUk9VUCkuY29uY2F0KGUpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIGE9dC50aW55SUQscz10LmNsaWVudFRpbWUsaT10LnJhbmRvbSxjPXQucmVhZENvdW50LHU9dC51bnJlYWRDb3VudCxsPVwiXCIuY29uY2F0KGEsXCItXCIpLmNvbmNhdChzLFwiLVwiKS5jb25jYXQoaSksZD1uLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlKHIsbCkscD17Z3JvdXBJRDplLG1lc3NhZ2VJRDpsLHJlYWRDb3VudDowLHVucmVhZENvdW50OjB9O2QmJihjYyhjKSYmKGQucmVhZFJlY2VpcHRJbmZvLnJlYWRDb3VudD1jLHAucmVhZENvdW50PWMpLGNjKHUpJiYoZC5yZWFkUmVjZWlwdEluZm8udW5yZWFkQ291bnQ9dSxwLnVucmVhZENvdW50PXUpLG8ucHVzaChwKSl9KSksby5sZW5ndGg+MCYmdGhpcy5lbWl0T3V0ZXJFdmVudChXbi5NRVNTQUdFX1JFQURfUkVDRUlQVF9SRUNFSVZFRCxvKX19fSx7a2V5OlwicmVjb21wdXRlR3JvdXBVbnJlYWRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLmNvdW50LG89dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbih0KTtpZihvKXt2YXIgcj1vLnVucmVhZENvdW50LGE9ci1uO2E8MCYmKGE9MCksby51bnJlYWRDb3VudD1hLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVjb21wdXRlR3JvdXBVbnJlYWRDb3VudCBmcm9tIFwiKS5jb25jYXQocixcIiB0byBcIikuY29uY2F0KGEsXCIsIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQodCkpfX19LHtrZXk6XCJ1cGRhdGVJc1JlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpLG49dGhpcy5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpO2lmKHQmJjAhPT1uLmxlbmd0aCYmIUZjKHQudHlwZSkpe2Zvcih2YXIgbz1bXSxyPTAsYT1uLmxlbmd0aDtyPGE7cisrKVwiaW5cIiE9PW5bcl0uZmxvdz9cIm91dFwiIT09bltyXS5mbG93fHxuW3JdLmlzUmVhZHx8bltyXS5zZXRJc1JlYWQoITApOm8ucHVzaChuW3JdKTt2YXIgcz0wO2lmKHQudHlwZT09PVluLkNPTlZfQzJDKXt2YXIgaT1vLnNsaWNlKC10LnVucmVhZENvdW50KS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlzUmV2b2tlZH0pKS5sZW5ndGg7cz1vLmxlbmd0aC10LnVucmVhZENvdW50LWl9ZWxzZSBzPW8ubGVuZ3RoLXQudW5yZWFkQ291bnQ7Zm9yKHZhciBjPTA7YzxzJiYhb1tjXS5pc1JlYWQ7YysrKW9bY10uc2V0SXNSZWFkKCEwKX19fSx7a2V5OlwiZGVsZXRlR3JvdXBBdFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlR3JvdXBBdFRpcHNcIik7UWkubG9nKFwiXCIuY29uY2F0KHQpKTt2YXIgbj10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGUpO2lmKCFuKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt2YXIgbz1uLmdyb3VwQXRJbmZvTGlzdDtpZigwPT09by5sZW5ndGgpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3ZhciByPXRoaXMuZ2V0TXlVc2VySUQoKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6WGwscmVxdWVzdERhdGE6e21lc3NhZ2VMaXN0VG9EZWxldGU6by5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntmcm9tOmUuZnJvbSx0bzpyLG1lc3NhZ2VTZXE6ZS5fX3NlcXVlbmNlLG1lc3NhZ2VSYW5kb206ZS5fX3JhbmRvbSxncm91cElEOmUuZ3JvdXBJRH19KSl9fSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KHQsXCIgb2suIGNvdW50OlwiKS5jb25jYXQoby5sZW5ndGgpKSxuLmNsZWFyR3JvdXBBdEluZm9MaXN0KCksUHJvbWlzZS5yZXNvbHZlKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBRaS5lcnJvcihcIlwiLmNvbmNhdCh0LFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfX0se2tleTpcImFwcGVuZFRvTWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucHVzaEluKGUpfX0se2tleTpcInNldE1lc3NhZ2VSYW5kb21cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnNpbmdseUxpbmtlZExpc3Quc2V0KGUucmFuZG9tKX19LHtrZXk6XCJkZWxldGVNZXNzYWdlUmFuZG9tXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zaW5nbHlMaW5rZWRMaXN0LmRlbGV0ZShlLnJhbmRvbSl9fSx7a2V5OlwicHVzaEludG9NZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4hKCF0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucHVzaEluKHQsbil8fHRoaXMuX2lzTWVzc2FnZUZyb21DdXJyZW50SW5zdGFuY2UodCkmJiFuKSYmKGUucHVzaCh0KSwhMCl9fSx7a2V5OlwiX2lzTWVzc2FnZUZyb21DdXJyZW50SW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaW5nbHlMaW5rZWRMaXN0LmhhcyhlLnJhbmRvbSl9fSx7a2V5OlwicmV2b2tlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucmV2b2tlKGUsdCxuKX19LHtrZXk6XCJnZXRQZWVyUmVhZFRpbWVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcGVlclJlYWRUaW1lTWFwLmdldChlKX19LHtrZXk6XCJyZWNvcmRQZWVyUmVhZFRpbWVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3BlZXJSZWFkVGltZU1hcC5oYXMoZSk/dGhpcy5fcGVlclJlYWRUaW1lTWFwLmdldChlKTx0JiZ0aGlzLl9wZWVyUmVhZFRpbWVNYXAuc2V0KGUsdCk6dGhpcy5fcGVlclJlYWRUaW1lTWFwLnNldChlLHQpfX0se2tleTpcInVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHlcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKGUuc3RhcnRzV2l0aChZbi5DT05WX0MyQykmJnQ+MCl7dmFyIG49dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkoZSx0KTtuLmxlbmd0aD4wJiZ0aGlzLmVtaXRPdXRlckV2ZW50KFduLk1FU1NBR0VfUkVBRF9CWV9QRUVSLG4pfX19LHtrZXk6XCJ1cGRhdGVNZXNzYWdlSXNNb2RpZmllZFByb3BlcnR5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnVwZGF0ZU1lc3NhZ2VJc01vZGlmaWVkUHJvcGVydHkoZSl9fSx7a2V5Olwic2V0Q29tcGxldGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRDb21wbGV0ZWQuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSkpLHRoaXMuX2NvbXBsZXRlZE1hcC5zZXQoZSwhMCl9fSx7a2V5OlwidXBkYXRlUm9hbWluZ01lc3NhZ2VLZXlBbmRUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX3JvYW1pbmdNZXNzYWdlS2V5QW5kVGltZU1hcC5zZXQoZSx7bWVzc2FnZUtleTp0LGxhc3RNZXNzYWdlVGltZTpufSl9fSx7a2V5OlwiZ2V0Q29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0Q29udmVyc2F0aW9uTGlzdFwiKSxvPVwicGFnaW5nU3RhdHVzOlwiLmNvbmNhdCh0aGlzLl9wYWdpbmdTdGF0dXMsXCIsIGxvY2FsIGNvbnZlcnNhdGlvbiBjb3VudDpcIikuY29uY2F0KHRoaXMuX2NvbnZlcnNhdGlvbk1hcC5zaXplLFwiLCBvcHRpb25zOlwiKS5jb25jYXQoZSk7aWYoUWkubG9nKFwiXCIuY29uY2F0KG4sXCIuIFwiKS5jb25jYXQobykpLHRoaXMuX3BhZ2luZ1N0YXR1cz09PXF1LlJFSkVDVEVEKXt2YXIgcj1uZXcgZHAoanApO3JldHVybiByLnNldE1lc3NhZ2UobyksdGhpcy5fc3luY0NvbnZlcnNhdGlvbkxpc3QoKS50aGVuKChmdW5jdGlvbigpe3Iuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTt2YXIgbj10Ll9nZXRDb252ZXJzYXRpb25MaXN0KGUpO3JldHVybiB5Xyh7Y29udmVyc2F0aW9uTGlzdDpufSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLGE9blsxXTtyLnNldEVycm9yKGUsbyxhKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfWlmKDA9PT10aGlzLl9jb252ZXJzYXRpb25NYXAuc2l6ZSl7dmFyIGE9bmV3IGRwKGpwKTtyZXR1cm4gYS5zZXRNZXNzYWdlKG8pLHRoaXMuX3N5bmNDb252ZXJzYXRpb25MaXN0KCkudGhlbigoZnVuY3Rpb24oKXthLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCk7dmFyIG49dC5fZ2V0Q29udmVyc2F0aW9uTGlzdChlKTtyZXR1cm4geV8oe2NvbnZlcnNhdGlvbkxpc3Q6bn0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX12YXIgcz10aGlzLl9nZXRDb252ZXJzYXRpb25MaXN0KGUpO3JldHVybiBRaS5sb2coXCJcIi5jb25jYXQobixcIi4gcmV0dXJuZWQgY29udmVyc2F0aW9uIGNvdW50OlwiKS5jb25jYXQocy5sZW5ndGgpKSxrXyh7Y29udmVyc2F0aW9uTGlzdDpzfSl9fSx7a2V5OlwiX2dldENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKGdjKGUpKXJldHVybiB0aGlzLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpO2lmKHBjKGUpKXt2YXIgbj1bXTtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZih0Ll9jb252ZXJzYXRpb25NYXAuaGFzKGUpKXt2YXIgbz10LmdldExvY2FsQ29udmVyc2F0aW9uKGUpO24ucHVzaChvKX19KSksbn19fSx7a2V5OlwiX2hhbmRsZUMyQ1BlZXJSZWFkVGltZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsdD1Cbih0aGlzLl9jb252ZXJzYXRpb25NYXApO3RyeXtmb3IodC5zKCk7IShlPXQubigpKS5kb25lOyl7dmFyIG49UG4oZS52YWx1ZSwyKSxvPW5bMF0scj1uWzFdO3IudHlwZT09PVluLkNPTlZfQzJDJiYoUWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9oYW5kbGVDMkNQZWVyUmVhZFRpbWUgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChvLFwiIHBlZXJSZWFkVGltZTpcIikuY29uY2F0KHIucGVlclJlYWRUaW1lKSksdGhpcy5yZWNvcmRQZWVyUmVhZFRpbWUobyxyLnBlZXJSZWFkVGltZSkpfX1jYXRjaChhKXt0LmUoYSl9ZmluYWxseXt0LmYoKX19fSx7a2V5OlwiZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcztpZigodD10aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGUpP3RoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZSk6bmV3IHJtKHtjb252ZXJzYXRpb25JRDplLHR5cGU6ZS5zbGljZSgwLDMpPT09WW4uQ09OVl9DMkM/WW4uQ09OVl9DMkM6WW4uQ09OVl9HUk9VUH0pKS5faXNJbmZvQ29tcGxldGVkfHx0LnR5cGU9PT1Zbi5DT05WX1NZU1RFTSlyZXR1cm4ga18oe2NvbnZlcnNhdGlvbjp0fSk7dmFyIG89bmV3IGRwKFdwKSxyPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRDb252ZXJzYXRpb25Qcm9maWxlXCIpO3JldHVybiBRaS5sb2coXCJcIi5jb25jYXQocixcIi4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIHJlbWFyazpcIikuY29uY2F0KHQucmVtYXJrLFwiIGxhc3RNZXNzYWdlOlwiKSx0Lmxhc3RNZXNzYWdlKSx0aGlzLl91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGVDb21wbGV0ZWx5KHQpLnRoZW4oKGZ1bmN0aW9uKGEpe28uc2V0TmV0d29ya1R5cGUobi5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiY29udmVyc2F0aW9uSUQ6XCIuY29uY2F0KGUsXCIgdW5yZWFkQ291bnQ6XCIpLmNvbmNhdChhLmRhdGEuY29udmVyc2F0aW9uLnVucmVhZENvdW50KSkuZW5kKCk7dmFyIHM9bi5nZXRNb2R1bGUoaWwpO2lmKHMmJnQudHlwZT09PVluLkNPTlZfQzJDKXt2YXIgaT1lLnJlcGxhY2UoWW4uQ09OVl9DMkMsXCJcIik7aWYocy5pc015RnJpZW5kKGkpKXt2YXIgYz1zLmdldEZyaWVuZFJlbWFyayhpKTt0LnJlbWFyayE9PWMmJih0LnJlbWFyaz1jLFFpLmxvZyhcIlwiLmNvbmNhdChyLFwiLiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgcGF0Y2ggcmVtYXJrOlwiKS5jb25jYXQodC5yZW1hcmspKSl9fXJldHVybiBRaS5sb2coXCJcIi5jb25jYXQocixcIiBvay4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlKSksYX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7cmV0dXJuIG4ucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24obil7dmFyIHI9UG4obiwyKSxhPXJbMF0scz1yWzFdO28uc2V0RXJyb3IodCxhLHMpLnNldE1lc3NhZ2UoXCJjb252ZXJzYXRpb25JRDpcIi5jb25jYXQoZSkpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KHIsXCIgZmFpbGVkLiBlcnJvcjpcIiksdCksT18odCl9KSl9fSx7a2V5OlwiX3VwZGF0ZVVzZXJPckdyb3VwUHJvZmlsZUNvbXBsZXRlbHlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBlLnR5cGU9PT1Zbi5DT05WX0MyQz90aGlzLmdldE1vZHVsZShybCkuZ2V0VXNlclByb2ZpbGUoe3VzZXJJRExpc3Q6W2UudG9BY2NvdW50XX0pLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciBvPW4uZGF0YTtyZXR1cm4gMD09PW8ubGVuZ3RoP09fKG5ldyBBXyh7Y29kZTp6ZC5VU0VSX09SX0dST1VQX05PVF9GT1VORCxtZXNzYWdlOkpkLlVTRVJfT1JfR1JPVVBfTk9UX0ZPVU5EfSkpOihlLnVzZXJQcm9maWxlPW9bMF0sZS5faXNJbmZvQ29tcGxldGVkPSEwLHQuX3Vuc2hpZnRDb252ZXJzYXRpb24oZSksa18oe2NvbnZlcnNhdGlvbjplfSkpfSkpOnRoaXMuZ2V0TW9kdWxlKHNsKS5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6ZS50b0FjY291bnR9KS50aGVuKChmdW5jdGlvbihuKXtyZXR1cm4gZS5ncm91cFByb2ZpbGU9bi5kYXRhLmdyb3VwLGUuX2lzSW5mb0NvbXBsZXRlZD0hMCx0Ll91bnNoaWZ0Q29udmVyc2F0aW9uKGUpLGtfKHtjb252ZXJzYXRpb246ZX0pfSkpfX0se2tleTpcIl91bnNoaWZ0Q29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSBpbnN0YW5jZW9mIHJtJiYhdGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhlLmNvbnZlcnNhdGlvbklEKSYmKHRoaXMuX2NvbnZlcnNhdGlvbk1hcD1uZXcgTWFwKFtbZS5jb252ZXJzYXRpb25JRCxlXV0uY29uY2F0KFVuKHRoaXMuX2NvbnZlcnNhdGlvbk1hcCkpKSx0aGlzLl9zZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdCgpLHRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSkpfX0se2tleTpcIl9vblByb2ZpbGVVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmRhdGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS51c2VySUQ7aWYobj09PXQuZ2V0TXlVc2VySUQoKSl0Ll9vbk15UHJvZmlsZU1vZGlmaWVkKHtsYXRlc3ROaWNrOmUubmljayxsYXRlc3RBdmF0YXI6ZS5hdmF0YXJ9KTtlbHNle3ZhciBvPXQuX2NvbnZlcnNhdGlvbk1hcC5nZXQoXCJcIi5jb25jYXQoWW4uQ09OVl9DMkMpLmNvbmNhdChuKSk7byYmKG8udXNlclByb2ZpbGU9ZSl9fSkpfX0se2tleTpcImRlbGV0ZUNvbnZlcnNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLHRvQWNjb3VudDp2b2lkIDAsdHlwZTp2b2lkIDB9O2lmKCF0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGUpKXt2YXIgbz1uZXcgQV8oe2NvZGU6emQuQ09OVkVSU0FUSU9OX05PVF9GT1VORCxtZXNzYWdlOkpkLkNPTlZFUlNBVElPTl9OT1RfRk9VTkR9KTtyZXR1cm4gT18obyl9c3dpdGNoKHRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZSkudHlwZSl7Y2FzZSBZbi5DT05WX0MyQzpuLnR5cGU9MSxuLnRvQWNjb3VudD1lLnJlcGxhY2UoWW4uQ09OVl9DMkMsXCJcIik7YnJlYWs7Y2FzZSBZbi5DT05WX0dST1VQOm4udHlwZT0yLG4udG9Hcm91cElEPWUucmVwbGFjZShZbi5DT05WX0dST1VQLFwiXCIpO2JyZWFrO2Nhc2UgWW4uQ09OVl9TWVNURU06cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKHNsKS5kZWxldGVHcm91cFN5c3RlbU5vdGljZSh7bWVzc2FnZUxpc3Q6dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSl9KSx0aGlzLmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uKGUpLGtfKHtjb252ZXJzYXRpb25JRDplfSk7ZGVmYXVsdDp2YXIgcj1uZXcgQV8oe2NvZGU6emQuQ09OVkVSU0FUSU9OX1VOX1JFQ09SREVEX1RZUEUsbWVzc2FnZTpKZC5DT05WRVJTQVRJT05fVU5fUkVDT1JERURfVFlQRX0pO3JldHVybiBPXyhyKX12YXIgYT1uZXcgZHAoWXApO2Euc2V0TWVzc2FnZShcImNvbnZlcnNhdGlvbklEOlwiLmNvbmNhdChlKSk7dmFyIHM9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUNvbnZlcnNhdGlvblwiKTtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KHMsXCIuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSkpLHRoaXMuc2V0TWVzc2FnZVJlYWQoe2NvbnZlcnNhdGlvbklEOmV9KS50aGVuKChmdW5jdGlvbigpe3JldHVybiB0LnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp6bCxyZXF1ZXN0RGF0YTpufSl9KSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChzLFwiIG9rXCIpKSx0LmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uKGUpLGtfKHtjb252ZXJzYXRpb25JRDplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChzLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfX0se2tleTpcInBpbkNvbnZlcnNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvbnZlcnNhdGlvbklELG89ZS5pc1Bpbm5lZDtpZighdGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhuKSlyZXR1cm4gT18oe2NvZGU6emQuQ09OVkVSU0FUSU9OX05PVF9GT1VORCxtZXNzYWdlOkpkLkNPTlZFUlNBVElPTl9OT1RfRk9VTkR9KTt2YXIgcj10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKG4pO2lmKHIuaXNQaW5uZWQ9PT1vKXJldHVybiBrXyh7Y29udmVyc2F0aW9uSUQ6bn0pO3ZhciBhPW5ldyBkcCgkcCk7YS5zZXRNZXNzYWdlKFwiY29udmVyc2F0aW9uSUQ6XCIuY29uY2F0KG4sXCIgaXNQaW5uZWQ6XCIpLmNvbmNhdChvKSk7dmFyIHM9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnBpbkNvbnZlcnNhdGlvblwiKTtRaS5sb2coXCJcIi5jb25jYXQocyxcIi4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChuLFwiIGlzUGlubmVkOlwiKS5jb25jYXQobykpO3ZhciBpPW51bGw7cmV0dXJuIFBjKG4pP2k9e3R5cGU6MSx0b0FjY291bnQ6bi5yZXBsYWNlKFluLkNPTlZfQzJDLFwiXCIpfTpVYyhuKSYmKGk9e3R5cGU6Mixncm91cElEOm4ucmVwbGFjZShZbi5DT05WX0dST1VQLFwiXCIpfSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6SmwscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSxvcGVyYXRpb25UeXBlOiEwPT09bz8xOjIsaXRlbUxpc3Q6W2ldfX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQocyxcIiBva1wiKSksci5pc1Bpbm5lZCE9PW8mJihyLmlzUGlubmVkPW8sdC5fc29ydENvbnZlcnNhdGlvbkxpc3RBbmRFbWl0RXZlbnQoKSkseV8oe2NvbnZlcnNhdGlvbklEOm59KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KHMsXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksT18oZSl9KSl9fSx7a2V5Olwic2V0TWVzc2FnZVJlbWluZFR5cGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZVJlbWluZEhhbmRsZXIuc2V0KGUpfX0se2tleTpcInBhdGNoTWVzc2FnZVJlbWluZFR5cGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLklELG49ZS5pc0MyQ0NvbnZlcnNhdGlvbixvPWUubWVzc2FnZVJlbWluZFR5cGUscj0hMSxhPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24obj9cIlwiLmNvbmNhdChZbi5DT05WX0MyQykuY29uY2F0KHQpOlwiXCIuY29uY2F0KFluLkNPTlZfR1JPVVApLmNvbmNhdCh0KSk7cmV0dXJuIGEmJmEubWVzc2FnZVJlbWluZFR5cGUhPT1vJiYoYS5tZXNzYWdlUmVtaW5kVHlwZT1vLHI9ITApLHJ9fSx7a2V5Olwib25DMkNNZXNzYWdlUmVtaW5kVHlwZVN5bmNlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7UWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uQzJDTWVzc2FnZVJlbWluZFR5cGVTeW5jZWQgb3B0aW9uczpcIiksZSksZS5kYXRhTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtpZighSmMoZS5tdXRlTm90aWZpY2F0aW9uc1N5bmMpKXt2YXIgbixvPWUubXV0ZU5vdGlmaWNhdGlvbnNTeW5jLHI9by50byxhPW8udXBkYXRlU2VxdWVuY2Uscz1vLm11dGVGbGFnO3QuX21lc3NhZ2VSZW1pbmRIYW5kbGVyLnNldFVwZGF0ZVNlcXVlbmNlKGEpLDA9PT1zP249WW4uTVNHX1JFTUlORF9BQ1BUX0FORF9OT1RFOjE9PT1zP249WW4uTVNHX1JFTUlORF9ESVNDQVJEOjI9PT1zJiYobj1Zbi5NU0dfUkVNSU5EX0FDUFRfTk9UX05PVEUpO3ZhciBpPTA7dC5wYXRjaE1lc3NhZ2VSZW1pbmRUeXBlKHtJRDpyLGlzQzJDQ29udmVyc2F0aW9uOiEwLG1lc3NhZ2VSZW1pbmRUeXBlOm59KSYmKGkrPTEpLFFpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIub25DMkNNZXNzYWdlUmVtaW5kVHlwZVN5bmNlZCB1cGRhdGVDb3VudDpcIikuY29uY2F0KGkpKSxpPj0xJiZ0LmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX0pKX19LHtrZXk6XCJkZWxldGVMb2NhbENvbnZlcnNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXMoZSk7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVMb2NhbENvbnZlcnNhdGlvbiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgaGFzOlwiKS5jb25jYXQodCkpLHQmJih0aGlzLl9jb252ZXJzYXRpb25NYXAuZGVsZXRlKGUpLHRoaXMuX3JvYW1pbmdNZXNzYWdlS2V5QW5kVGltZU1hcC5kZWxldGUoZSksdGhpcy5fc2V0U3RvcmFnZUNvbnZlcnNhdGlvbkxpc3QoKSx0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucmVtb3ZlQnlDb252ZXJzYXRpb25JRChlKSx0aGlzLl9jb21wbGV0ZWRNYXAuZGVsZXRlKGUpLHRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSkpfX0se2tleTpcImlzTWVzc2FnZVNlbnRCeUN1cnJlbnRJbnN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEoIXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5oYXNMb2NhbE1lc3NhZ2UoZS5jb252ZXJzYXRpb25JRCxlLklEKSYmIXRoaXMuc2luZ2x5TGlua2VkTGlzdC5oYXMoZS5yYW5kb20pKX19LHtrZXk6XCJtb2RpZnlNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUuc3RhcnRzV2l0aChZbi5DT05WX0MyQykmJnRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXMoZSkpe3ZhciB0PXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZSksbj1EYXRlLm5vdygpO3RoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5tb2RpZnlNZXNzYWdlU2VudEJ5UGVlcih7Y29udmVyc2F0aW9uSUQ6ZSxsYXRlc3ROaWNrOnQudXNlclByb2ZpbGUubmljayxsYXRlc3RBdmF0YXI6dC51c2VyUHJvZmlsZS5hdmF0YXJ9KTt2YXIgbz10aGlzLmdldE1vZHVsZShybCkuZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHRoaXMuZ2V0TXlVc2VySUQoKSk7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLm1vZGlmeU1lc3NhZ2VTZW50QnlNZSh7Y29udmVyc2F0aW9uSUQ6ZSxsYXRlc3ROaWNrOm8ubmljayxsYXRlc3RBdmF0YXI6by5hdmF0YXJ9KSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm1vZGlmeU1lc3NhZ2VMaXN0IGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSxcIiBjb3N0IFwiKS5jb25jYXQoRGF0ZS5ub3coKS1uLFwiIG1zXCIpKX19fSx7a2V5OlwidXBkYXRlVXNlclByb2ZpbGVTcGVjaWZpZWRLZXlcIix2YWx1ZTpmdW5jdGlvbihlKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZVVzZXJQcm9maWxlU3BlY2lmaWVkS2V5IG9wdGlvbnM6XCIpLGUpO3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLm5pY2ssbz1lLmF2YXRhcjtpZih0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKHQpKXt2YXIgcj10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KHQpLnVzZXJQcm9maWxlO3VjKG4pJiZyLm5pY2shPT1uJiYoci5uaWNrPW4pLHVjKG8pJiZyLmF2YXRhciE9PW8mJihyLmF2YXRhcj1vKSx0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX19LHtrZXk6XCJfb25NeVByb2ZpbGVNb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpLG89RGF0ZS5ub3coKTtuLmZvckVhY2goKGZ1bmN0aW9uKG4pe3QubW9kaWZ5TWVzc2FnZVNlbnRCeU1lKENuKHtjb252ZXJzYXRpb25JRDpuLmNvbnZlcnNhdGlvbklEfSxlKSl9KSksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25NeVByb2ZpbGVNb2RpZmllZC4gbW9kaWZ5IGFsbCBtZXNzYWdlcyBzZW50IGJ5IG1lLCBjb3N0IFwiKS5jb25jYXQoRGF0ZS5ub3coKS1vLFwiIG1zXCIpKX19LHtrZXk6XCJtb2RpZnlNZXNzYWdlU2VudEJ5TWVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIubW9kaWZ5TWVzc2FnZVNlbnRCeU1lKGUpfX0se2tleTpcImdldExhdGVzdE1lc3NhZ2VTZW50QnlNZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKGUpfX0se2tleTpcIm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyKGUpfX0se2tleTpcImdldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMYXRlc3RNZXNzYWdlU2VudEJ5UGVlcihlKX19LHtrZXk6XCJwdXNoSW50b05vdGljZVJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISghdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnB1c2hJbih0KXx8dGhpcy5zaW5nbHlMaW5rZWRMaXN0Lmhhcyh0LnJhbmRvbSkpJiYoZS5wdXNoKHQpLCEwKX19LHtrZXk6XCJnZXRHcm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2UoZSl9fSx7a2V5OlwiY2hlY2tBbmRQYXRjaFJlbWFya1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9UHJvbWlzZS5yZXNvbHZlKCk7aWYoMD09PXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5zaXplKXJldHVybiBlO3ZhciB0PXRoaXMuZ2V0TW9kdWxlKGlsKTtpZighdClyZXR1cm4gZTt2YXIgbj1Vbih0aGlzLl9jb252ZXJzYXRpb25NYXAudmFsdWVzKCkpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZT09PVluLkNPTlZfQzJDfSkpO2lmKDA9PT1uLmxlbmd0aClyZXR1cm4gZTt2YXIgbz0wO3JldHVybiBuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUuY29udmVyc2F0aW9uSUQucmVwbGFjZShZbi5DT05WX0MyQyxcIlwiKTtpZih0LmlzTXlGcmllbmQobikpe3ZhciByPXQuZ2V0RnJpZW5kUmVtYXJrKG4pO2UucmVtYXJrIT09ciYmKGUucmVtYXJrPXIsbys9MSl9fSkpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY2hlY2tBbmRQYXRjaFJlbWFyay4gYzJjIGNvbnZlcnNhdGlvbiBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoLFwiLCBwYXRjaGVkIGNvdW50OlwiKS5jb25jYXQobykpLGV9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX3BhZ2luZ1N0YXR1cz1xdS5OT1RfU1RBUlQsdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnJlc2V0KCksdGhpcy5fbWVzc2FnZVJlbWluZEhhbmRsZXIucmVzZXQoKSx0aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuY2xlYXIoKSx0aGlzLnNpbmdseUxpbmtlZExpc3QucmVzZXQoKSx0aGlzLl9wZWVyUmVhZFRpbWVNYXAuY2xlYXIoKSx0aGlzLl9jb21wbGV0ZWRNYXAuY2xlYXIoKSx0aGlzLl9jb252ZXJzYXRpb25NYXAuY2xlYXIoKSx0aGlzLl9wYWdpbmdUaW1lU3RhbXA9MCx0aGlzLl9wYWdpbmdTdGFydEluZGV4PTAsdGhpcy5fcGFnaW5nUGlubmVkVGltZVN0YW1wPTAsdGhpcy5fcGFnaW5nUGlubmVkU3RhcnRJbmRleD0wLHRoaXMuX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwLmNsZWFyKCksdGhpcy5yZXNldFJlYWR5KCl9fV0pLG59KEFsKSxpbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9ncm91cE1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIkdyb3VwVGlwc0hhbmRsZXJcIix0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXA9bmV3IE1hcCx0aGlzLl9jaGVja0NvdW50TWFwPW5ldyBNYXAsdGhpcy5NQVhfQ0hFQ0tfQ09VTlQ9NH1yZXR1cm4gRW4oZSxbe2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UlMT09MCYmdGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLnNpemU+MCYmdGhpcy5fY2hlY2tDYWNoZWRHcm91cFRpcHMoKX19LHtrZXk6XCJfY2hlY2tDYWNoZWRHcm91cFRpcHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmZvckVhY2goKGZ1bmN0aW9uKHQsbil7dmFyIG89ZS5fY2hlY2tDb3VudE1hcC5nZXQobikscj1lLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pO1FpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2NoZWNrQ2FjaGVkR3JvdXBUaXBzIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIGhhc0xvY2FsR3JvdXA6XCIpLmNvbmNhdChyLFwiIGNoZWNrQ291bnQ6XCIpLmNvbmNhdChvKSkscj8oZS5fbm90aWZ5Q2FjaGVkR3JvdXBUaXBzKG4pLGUuX2NoZWNrQ291bnRNYXAuZGVsZXRlKG4pLGUuX2dyb3VwTW9kdWxlLmRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbShuKSk6bz49ZS5NQVhfQ0hFQ0tfQ09VTlQ/KGUuX2RlbGV0ZUNhY2hlZEdyb3VwVGlwcyhuKSxlLl9jaGVja0NvdW50TWFwLmRlbGV0ZShuKSk6KG8rKyxlLl9jaGVja0NvdW50TWFwLnNldChuLG8pKX0pKX19LHtrZXk6XCJvbk5ld0dyb3VwVGlwc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblJlY2VpdmVHcm91cFRpcHMgY291bnQ6XCIpLmNvbmNhdChlLmRhdGFMaXN0Lmxlbmd0aCkpO3ZhciB0PXRoaXMubmV3R3JvdXBUaXBzU3RvcmVkQW5kU3VtbWFyeShlKSxuPXQuZXZlbnREYXRhTGlzdCxvPXQucmVzdWx0LHI9dC5BVkNoYXRSb29tTWVzc2FnZUxpc3Q7KHIubGVuZ3RoPjAmJnRoaXMuX2dyb3VwTW9kdWxlLm9uQVZDaGF0Um9vbU1lc3NhZ2Uociksbi5sZW5ndGg+MCkmJih0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUodWwpLm9uTmV3TWVzc2FnZSh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6bixpc0luc3RhbnRNZXNzYWdlOiEwfSksdGhpcy5fZ3JvdXBNb2R1bGUudXBkYXRlTmV4dE1lc3NhZ2VTZXEobikpO28ubGVuZ3RoPjAmJih0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChXbi5NRVNTQUdFX1JFQ0VJVkVELG8pLHRoaXMuaGFuZGxlTWVzc2FnZUxpc3QobykpfX0se2tleTpcIm5ld0dyb3VwVGlwc1N0b3JlZEFuZFN1bW1hcnlcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5ldmVudCxuPWUuZGF0YUxpc3Qsbz1udWxsLHI9W10sYT1bXSxzPXt9LGk9W10sYz0wLHU9bi5sZW5ndGg7Yzx1O2MrKyl7dmFyIGw9bltjXSxkPWwuZ3JvdXBQcm9maWxlLmdyb3VwSUQscD10aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKGQpO2lmKHB8fCF0aGlzLl9ncm91cE1vZHVsZS5pc1Vuam9pbmVkQVZDaGF0Um9vbShkKSlpZihwKWlmKHRoaXMuX2dyb3VwTW9kdWxlLmlzTWVzc2FnZUZyb21PclRvQVZDaGF0cm9vbShkKSl7dmFyIGc9UmMobCk7Zy5ldmVudD10LGkucHVzaChnKX1lbHNle2wuY3VycmVudFVzZXI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSxsLmNvbnZlcnNhdGlvblR5cGU9WW4uQ09OVl9HUk9VUCwobz1uZXcgTV8obCkpLnNldEVsZW1lbnQoe3R5cGU6WW4uTVNHX0dSUF9USVAsY29udGVudDpDbih7fSxsLmVsZW1lbnRzLHtncm91cFByb2ZpbGU6bC5ncm91cFByb2ZpbGV9KX0pLG8uaXNTeXN0ZW1NZXNzYWdlPSExO3ZhciBoPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZSh1bCksZj1vLF89Zi5jb252ZXJzYXRpb25JRCxtPWYuc2VxdWVuY2U7aWYoNj09PXQpby5fb25saW5lT25seUZsYWc9ITAsYS5wdXNoKG8pO2Vsc2UgaWYoIWgucHVzaEludG9Ob3RpY2VSZXN1bHQoYSxvKSljb250aW51ZTtpZig2IT09dHx8IWguZ2V0TG9jYWxDb252ZXJzYXRpb24oXykpe2lmKDYhPT10KXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShTbCkuYWRkTWVzc2FnZVNlcXVlbmNlKHtrZXk6cnAsbWVzc2FnZTpvfSk7dmFyIHY9aC5pc1JlbW90ZVJlYWQoe2NvbnZlcnNhdGlvbklEOl8sc2VxdWVuY2U6bX0pO2lmKGdjKHNbX10pKXNbX109ci5wdXNoKHtjb252ZXJzYXRpb25JRDpfLHVucmVhZENvdW50OlwiaW5cIiE9PW8uZmxvd3x8by5fb25saW5lT25seUZsYWd8fHY/MDoxLHR5cGU6by5jb252ZXJzYXRpb25UeXBlLHN1YlR5cGU6by5jb252ZXJzYXRpb25TdWJUeXBlLGxhc3RNZXNzYWdlOm99KS0xO2Vsc2V7dmFyIE09c1tfXTtyW01dLnR5cGU9by5jb252ZXJzYXRpb25UeXBlLHJbTV0uc3ViVHlwZT1vLmNvbnZlcnNhdGlvblN1YlR5cGUscltNXS5sYXN0TWVzc2FnZT1vLFwiaW5cIiE9PW8uZmxvd3x8by5fb25saW5lT25seUZsYWd8fHZ8fHJbTV0udW5yZWFkQ291bnQrK319fWVsc2UgdGhpcy5fY2FjaGVHcm91cFRpcHNBbmRQcm9iZSh7Z3JvdXBJRDpkLGV2ZW50OnQsaXRlbTpsfSl9cmV0dXJue2V2ZW50RGF0YUxpc3Q6cixyZXN1bHQ6YSxBVkNoYXRSb29tTWVzc2FnZUxpc3Q6aX19fSx7a2V5OlwiaGFuZGxlTWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7c3dpdGNoKGUucGF5bG9hZC5vcGVyYXRpb25UeXBlKXtjYXNlIDE6dC5fb25OZXdNZW1iZXJDb21lSW4oZSk7YnJlYWs7Y2FzZSAyOnQuX29uTWVtYmVyUXVpdChlKTticmVhaztjYXNlIDM6dC5fb25NZW1iZXJLaWNrZWRPdXQoZSk7YnJlYWs7Y2FzZSA0OnQuX29uTWVtYmVyU2V0QWRtaW4oZSk7YnJlYWs7Y2FzZSA1OnQuX29uTWVtYmVyQ2FuY2VsbGVkQWRtaW4oZSk7YnJlYWs7Y2FzZSA2OnQuX29uR3JvdXBQcm9maWxlTW9kaWZpZWQoZSk7YnJlYWs7Y2FzZSA3OnQuX29uTWVtYmVySW5mb01vZGlmaWVkKGUpO2JyZWFrO2RlZmF1bHQ6UWkud2FybihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuaGFuZGxlTWVzc2FnZUxpc3QgdW5rbm93biBvcGVyYXRpb25UeXBlOlwiKS5jb25jYXQoZS5wYXlsb2FkLm9wZXJhdGlvblR5cGUpKX19KSl9fSx7a2V5OlwiX29uTmV3TWVtYmVyQ29tZUluXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLG49dC5tZW1iZXJOdW0sbz10Lmdyb3VwUHJvZmlsZS5ncm91cElELHI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7ciYmY2MobikmJnIubWVtYmVyQ291bnQhPT1uJiYoci5tZW1iZXJDb3VudD1uLHRoaXMuX3VwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShyKSl9fSx7a2V5OlwiX29uTWVtYmVyUXVpdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZCxuPXQubWVtYmVyTnVtLG89dC5ncm91cFByb2ZpbGUuZ3JvdXBJRCxyPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKG8pO3ImJmNjKG4pJiZyLm1lbWJlckNvdW50IT09biYmKHIubWVtYmVyQ291bnQ9bix0aGlzLl91cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUocikpLHRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShjbCkuZGVsZXRlTG9jYWxHcm91cE1lbWJlcnMobyxlLnBheWxvYWQudXNlcklETGlzdCl9fSx7a2V5OlwiX29uTWVtYmVyS2lja2VkT3V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLG49dC5tZW1iZXJOdW0sbz10Lmdyb3VwUHJvZmlsZS5ncm91cElELHI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7ciYmY2MobikmJnIubWVtYmVyQ291bnQhPT1uJiYoci5tZW1iZXJDb3VudD1uLHRoaXMuX3VwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShyKSksdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGNsKS5kZWxldGVMb2NhbEdyb3VwTWVtYmVycyhvLGUucGF5bG9hZC51c2VySURMaXN0KX19LHtrZXk6XCJfdXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKHVsKS51cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUoW2VdKX19LHtrZXk6XCJfb25NZW1iZXJTZXRBZG1pblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRCxuPWUucGF5bG9hZC51c2VySURMaXN0LG89dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGNsKTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPW8uZ2V0TG9jYWxHcm91cE1lbWJlckluZm8odCxlKTtuJiZuLnVwZGF0ZVJvbGUoWW4uR1JQX01CUl9ST0xFX0FETUlOKX0pKX19LHtrZXk6XCJfb25NZW1iZXJDYW5jZWxsZWRBZG1pblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRCxuPWUucGF5bG9hZC51c2VySURMaXN0LG89dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGNsKTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPW8uZ2V0TG9jYWxHcm91cE1lbWJlckluZm8odCxlKTtuJiZuLnVwZGF0ZVJvbGUoWW4uR1JQX01CUl9ST0xFX01FTUJFUil9KSl9fSx7a2V5OlwiX29uR3JvdXBQcm9maWxlTW9kaWZpZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5wYXlsb2FkLG89bi5uZXdHcm91cFByb2ZpbGUscj1uLmdyb3VwUHJvZmlsZS5ncm91cElELGE9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUocik7T2JqZWN0LmtleXMobykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2VcIm93bmVySURcIjp0Ll9vd25lckNoYW5nZWQoYSxvKTticmVhaztkZWZhdWx0OmFbZV09b1tlXX19KSksdGhpcy5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhMCl9fSx7a2V5OlwiX293bmVyQ2hhbmdlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5ncm91cElELG89dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUobikscj10aGlzLl9ncm91cE1vZHVsZS5nZXRNeVVzZXJJRCgpO2lmKHI9PT10Lm93bmVySUQpe28udXBkYXRlR3JvdXAoe3NlbGZJbmZvOntyb2xlOlluLkdSUF9NQlJfUk9MRV9PV05FUn19KTt2YXIgYT10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoY2wpLHM9YS5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhuLHIpLGk9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUobikub3duZXJJRCxjPWEuZ2V0TG9jYWxHcm91cE1lbWJlckluZm8obixpKTtzJiZzLnVwZGF0ZVJvbGUoWW4uR1JQX01CUl9ST0xFX09XTkVSKSxjJiZjLnVwZGF0ZVJvbGUoWW4uR1JQX01CUl9ST0xFX01FTUJFUil9fX0se2tleTpcIl9vbk1lbWJlckluZm9Nb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRCxuPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShjbCk7ZS5wYXlsb2FkLm1lbWJlckxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89bi5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyh0LGUudXNlcklEKTtvJiZjYyhlLm11dGVUaW1lKSYmby51cGRhdGVNdXRlVW50aWwoZS5tdXRlVGltZSl9KSl9fSx7a2V5OlwiX2NhY2hlR3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuaGFzKGUpfHx0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuc2V0KGUsW10pLHRoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5nZXQoZSkucHVzaCh0KX19LHtrZXk6XCJfZGVsZXRlQ2FjaGVkR3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmhhcyhlKSYmdGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmRlbGV0ZShlKX19LHtrZXk6XCJfbm90aWZ5Q2FjaGVkR3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXRoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5nZXQoZSl8fFtdO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5vbk5ld0dyb3VwVGlwcyhlKX0pKSx0aGlzLl9kZWxldGVDYWNoZWRHcm91cFRpcHMoZSksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fbm90aWZ5Q2FjaGVkR3JvdXBUaXBzIGdyb3VwSUQ6XCIpLmNvbmNhdChlLFwiIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKX19LHtrZXk6XCJfY2FjaGVHcm91cFRpcHNBbmRQcm9iZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLmV2ZW50LHI9ZS5pdGVtO3RoaXMuX2NhY2hlR3JvdXBUaXBzKG4se2V2ZW50Om8sZGF0YUxpc3Q6W3JdfSksdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBTaW1wbGlmaWVkSW5mbyhuKS50aGVuKChmdW5jdGlvbihlKXtlLnR5cGU9PT1Zbi5HUlBfQVZDSEFUUk9PTT90Ll9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pP3QuX25vdGlmeUNhY2hlZEdyb3VwVGlwcyhuKTp0Ll9ncm91cE1vZHVsZS5zZXRVbmpvaW5lZEFWQ2hhdFJvb20obik6KHQuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKFtlXSksdC5fbm90aWZ5Q2FjaGVkR3JvdXBUaXBzKG4pKX0pKSx0aGlzLl9jaGVja0NvdW50TWFwLmhhcyhuKXx8dGhpcy5fY2hlY2tDb3VudE1hcC5zZXQobiwwKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jYWNoZUdyb3VwVGlwc0FuZFByb2JlIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5jbGVhcigpLHRoaXMuX2NoZWNrQ291bnRNYXAuY2xlYXIoKX19XSksZX0oKSxjbT1bXS5wdXNoLHVtPU1hdGgubWluLGxtPSFyKChmdW5jdGlvbigpe3JldHVybiFSZWdFeHAoNDI5NDk2NzI5NSxcInlcIil9KSk7dnMoXCJzcGxpdFwiLDIsKGZ1bmN0aW9uKGUsdCxuKXt2YXIgbztyZXR1cm4gbz1cImNcIj09XCJhYmJjXCIuc3BsaXQoLyhiKSovKVsxXXx8NCE9XCJ0ZXN0XCIuc3BsaXQoLyg/OikvLC0xKS5sZW5ndGh8fDIhPVwiYWJcIi5zcGxpdCgvKD86YWIpKi8pLmxlbmd0aHx8NCE9XCIuXCIuc3BsaXQoLyguPykoLj8pLykubGVuZ3RofHxcIi5cIi5zcGxpdCgvKCkoKS8pLmxlbmd0aD4xfHxcIlwiLnNwbGl0KC8uPy8pLmxlbmd0aD9mdW5jdGlvbihlLG4pe3ZhciBvPVN0cmluZyhoKHRoaXMpKSxyPXZvaWQgMD09PW4/NDI5NDk2NzI5NTpuPj4+MDtpZigwPT09cilyZXR1cm5bXTtpZih2b2lkIDA9PT1lKXJldHVybltvXTtpZighY3MoZSkpcmV0dXJuIHQuY2FsbChvLGUscik7Zm9yKHZhciBhLHMsaSxjPVtdLHU9KGUuaWdub3JlQ2FzZT9cImlcIjpcIlwiKSsoZS5tdWx0aWxpbmU/XCJtXCI6XCJcIikrKGUudW5pY29kZT9cInVcIjpcIlwiKSsoZS5zdGlja3k/XCJ5XCI6XCJcIiksbD0wLGQ9bmV3IFJlZ0V4cChlLnNvdXJjZSx1K1wiZ1wiKTsoYT10cy5jYWxsKGQsbykpJiYhKChzPWQubGFzdEluZGV4KT5sJiYoYy5wdXNoKG8uc2xpY2UobCxhLmluZGV4KSksYS5sZW5ndGg+MSYmYS5pbmRleDxvLmxlbmd0aCYmY20uYXBwbHkoYyxhLnNsaWNlKDEpKSxpPWFbMF0ubGVuZ3RoLGw9cyxjLmxlbmd0aD49cikpOylkLmxhc3RJbmRleD09PWEuaW5kZXgmJmQubGFzdEluZGV4Kys7cmV0dXJuIGw9PT1vLmxlbmd0aD8haSYmZC50ZXN0KFwiXCIpfHxjLnB1c2goXCJcIik6Yy5wdXNoKG8uc2xpY2UobCkpLGMubGVuZ3RoPnI/Yy5zbGljZSgwLHIpOmN9OlwiMFwiLnNwbGl0KHZvaWQgMCwwKS5sZW5ndGg/ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmMD09PW4/W106dC5jYWxsKHRoaXMsZSxuKX06dCxbZnVuY3Rpb24odCxuKXt2YXIgcj1oKHRoaXMpLGE9bnVsbD09dD92b2lkIDA6dFtlXTtyZXR1cm4gdm9pZCAwIT09YT9hLmNhbGwodCxyLG4pOm8uY2FsbChTdHJpbmcociksdCxuKX0sZnVuY3Rpb24oZSxyKXt2YXIgYT1uKG8sZSx0aGlzLHIsbyE9PXQpO2lmKGEuZG9uZSlyZXR1cm4gYS52YWx1ZTt2YXIgcz1BKGUpLGk9U3RyaW5nKHRoaXMpLGM9THIocyxSZWdFeHApLHU9cy51bmljb2RlLGw9KHMuaWdub3JlQ2FzZT9cImlcIjpcIlwiKSsocy5tdWx0aWxpbmU/XCJtXCI6XCJcIikrKHMudW5pY29kZT9cInVcIjpcIlwiKSsobG0/XCJ5XCI6XCJnXCIpLGQ9bmV3IGMobG0/czpcIl4oPzpcIitzLnNvdXJjZStcIilcIixsKSxwPXZvaWQgMD09PXI/NDI5NDk2NzI5NTpyPj4+MDtpZigwPT09cClyZXR1cm5bXTtpZigwPT09aS5sZW5ndGgpcmV0dXJuIG51bGw9PT1JcyhkLGkpP1tpXTpbXTtmb3IodmFyIGc9MCxoPTAsZj1bXTtoPGkubGVuZ3RoOyl7ZC5sYXN0SW5kZXg9bG0/aDowO3ZhciBfLG09SXMoZCxsbT9pOmkuc2xpY2UoaCkpO2lmKG51bGw9PT1tfHwoXz11bShpZShkLmxhc3RJbmRleCsobG0/MDpoKSksaS5sZW5ndGgpKT09PWcpaD15cyhpLGgsdSk7ZWxzZXtpZihmLnB1c2goaS5zbGljZShnLGgpKSxmLmxlbmd0aD09PXApcmV0dXJuIGY7Zm9yKHZhciB2PTE7djw9bS5sZW5ndGgtMTt2KyspaWYoZi5wdXNoKG1bdl0pLGYubGVuZ3RoPT09cClyZXR1cm4gZjtoPWc9X319cmV0dXJuIGYucHVzaChpLnNsaWNlKGcpKSxmfV19KSwhbG0pO3ZhciBkbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9ncm91cE1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIkNvbW1vbkdyb3VwSGFuZGxlclwiLHRoaXMudGVtcENvbnZlcnNhdGlvbkxpc3Q9bnVsbCx0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXA9bmV3IE1hcCx0aGlzLl9jaGVja0NvdW50TWFwPW5ldyBNYXAsdGhpcy5NQVhfQ0hFQ0tfQ09VTlQ9NCx0LmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub25jZShWXyx0aGlzLl9pbml0R3JvdXBMaXN0LHRoaXMpfXJldHVybiBFbihlLFt7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSUxPT0wJiZ0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuc2l6ZT4wJiZ0aGlzLl9jaGVja0NhY2hlZEdyb3VwTWVzc2FnZSgpfX0se2tleTpcIl9jaGVja0NhY2hlZEdyb3VwTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuZm9yRWFjaCgoZnVuY3Rpb24odCxuKXt2YXIgbz1lLl9jaGVja0NvdW50TWFwLmdldChuKSxyPWUuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAobik7UWkubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fY2hlY2tDYWNoZWRHcm91cE1lc3NhZ2UgZ3JvdXBJRDpcIikuY29uY2F0KG4sXCIgaGFzTG9jYWxHcm91cDpcIikuY29uY2F0KHIsXCIgY2hlY2tDb3VudDpcIikuY29uY2F0KG8pKSxyPyhlLl9ub3RpZnlDYWNoZWRHcm91cE1lc3NhZ2UobiksZS5fY2hlY2tDb3VudE1hcC5kZWxldGUobiksZS5fZ3JvdXBNb2R1bGUuZGVsZXRlVW5qb2luZWRBVkNoYXRSb29tKG4pKTpvPj1lLk1BWF9DSEVDS19DT1VOVD8oZS5fZGVsZXRlQ2FjaGVkR3JvdXBNZXNzYWdlKG4pLGUuX2NoZWNrQ291bnRNYXAuZGVsZXRlKG4pKToobysrLGUuX2NoZWNrQ291bnRNYXAuc2V0KG4sbykpfSkpfX0se2tleTpcIl9pbml0R3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2luaXRHcm91cExpc3RcIikpO3ZhciB0PW5ldyBkcChsZyksbj10aGlzLl9ncm91cE1vZHVsZS5nZXRTdG9yYWdlR3JvdXBMaXN0KCk7aWYocGMobikmJm4ubGVuZ3RoPjApe24uZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5fZ3JvdXBNb2R1bGUuaW5pdEdyb3VwTWFwKHQpfSkpLHRoaXMuX2dyb3VwTW9kdWxlLmVtaXRHcm91cExpc3RVcGRhdGUoITAsITEpO3ZhciBvPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBMaXN0KCkubGVuZ3RoO3Quc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwIGNvdW50OlwiLmNvbmNhdChvKSkuZW5kKCl9ZWxzZSB0LnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cCBjb3VudDowXCIpLmVuZCgpO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2luaXRHcm91cExpc3Qgb2tcIikpfX0se2tleTpcImhhbmRsZVVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuaGFuZGxlVXBkYXRlR3JvdXBMYXN0TWVzc2FnZVwiKTtpZihRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0LFwiIGNvbnZlcnNhdGlvbiBjb3VudDpcIikuY29uY2F0KGUubGVuZ3RoLFwiLCBsb2NhbCBncm91cCBjb3VudDpcIikuY29uY2F0KHRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBMaXN0KCkubGVuZ3RoKSksMCE9PXRoaXMuX2dyb3VwTW9kdWxlLmdldEdyb3VwTWFwKCkuc2l6ZSl7Zm9yKHZhciBuLG8scixhPSExLHM9MCxpPWUubGVuZ3RoO3M8aTtzKyspKG49ZVtzXSkudHlwZT09PVluLkNPTlZfR1JPVVAmJihvPW4uY29udmVyc2F0aW9uSUQuc3BsaXQoL15HUk9VUC8pWzFdLChyPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKG8pKSYmKHIubGFzdE1lc3NhZ2U9bi5sYXN0TWVzc2FnZSxhPSEwKSk7YSYmKHRoaXMuX2dyb3VwTW9kdWxlLnNvcnRMb2NhbEdyb3VwTGlzdCgpLHRoaXMuX2dyb3VwTW9kdWxlLmVtaXRHcm91cExpc3RVcGRhdGUoITAsITEpKX1lbHNlIHRoaXMudGVtcENvbnZlcnNhdGlvbkxpc3Q9ZX19LHtrZXk6XCJvbk5ld0dyb3VwTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk5ld0dyb3VwTWVzc2FnZSBjb3VudDpcIikuY29uY2F0KGUuZGF0YUxpc3QubGVuZ3RoKSk7dmFyIHQ9dGhpcy5fbmV3R3JvdXBNZXNzYWdlU3RvcmVkQW5kU3VtbWFyeShlKSxuPXQuY29udmVyc2F0aW9uT3B0aW9uc0xpc3Qsbz10Lm1lc3NhZ2VMaXN0LHI9dC5BVkNoYXRSb29tTWVzc2FnZUxpc3Q7KHIubGVuZ3RoPjAmJnRoaXMuX2dyb3VwTW9kdWxlLm9uQVZDaGF0Um9vbU1lc3NhZ2UociksdGhpcy5fZ3JvdXBNb2R1bGUuZmlsdGVyTW9kaWZpZWRNZXNzYWdlKG8pLG4ubGVuZ3RoPjApJiYodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKHVsKS5vbk5ld01lc3NhZ2Uoe2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0Om4saXNJbnN0YW50TWVzc2FnZTohMH0pLHRoaXMuX2dyb3VwTW9kdWxlLnVwZGF0ZU5leHRNZXNzYWdlU2VxKG4pKTt2YXIgYT10aGlzLl9ncm91cE1vZHVsZS5maWx0ZXJVbm1vZGlmaWVkTWVzc2FnZShvKTthLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChXbi5NRVNTQUdFX1JFQ0VJVkVELGEpLG8ubGVuZ3RoPTB9fSx7a2V5OlwiX25ld0dyb3VwTWVzc2FnZVN0b3JlZEFuZFN1bW1hcnlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGFMaXN0LG49ZS5ldmVudCxvPWUuaXNJbnN0YW50TWVzc2FnZSxyPW51bGwsYT1bXSxzPVtdLGk9W10sYz17fSx1PVluLkNPTlZfR1JPVVAsbD10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoaGwpLGQ9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKFNsKSxwPXQubGVuZ3RoO3A+MSYmdC5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiBlLnNlcXVlbmNlLXQuc2VxdWVuY2V9KSk7Zm9yKHZhciBnPTA7ZzxwO2crKyl7dmFyIGg9dFtnXSxmPWguZ3JvdXBQcm9maWxlLmdyb3VwSUQsXz10aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKGYpO2lmKF98fCF0aGlzLl9ncm91cE1vZHVsZS5pc1Vuam9pbmVkQVZDaGF0Um9vbShmKSlpZihfKWlmKHRoaXMuX2dyb3VwTW9kdWxlLmlzTWVzc2FnZUZyb21PclRvQVZDaGF0cm9vbShmKSl7dmFyIG09UmMoaCk7bS5ldmVudD1uLGkucHVzaChtKX1lbHNle2guY3VycmVudFVzZXI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSxoLmNvbnZlcnNhdGlvblR5cGU9dSxoLmlzU3lzdGVtTWVzc2FnZT0hIWguaXNTeXN0ZW1NZXNzYWdlLHI9bmV3IE1fKGgpLGguZWxlbWVudHM9bC5wYXJzZUVsZW1lbnRzKGguZWxlbWVudHMsaC5mcm9tKSxyLnNldEVsZW1lbnQoaC5lbGVtZW50cyk7dmFyIHY9MT09PXRbZ10uaXNNb2RpZmllZCxNPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZSh1bCk7aWYoTS5pc01lc3NhZ2VTZW50QnlDdXJyZW50SW5zdGFuY2Uocik/ci5pc01vZGlmaWVkPXY6dj0hMSwxPT09aC5vbmxpbmVPbmx5RmxhZylyLl9vbmxpbmVPbmx5RmxhZz0hMCxzLnB1c2gocik7ZWxzZXtpZighTS5wdXNoSW50b01lc3NhZ2VMaXN0KHMscix2KSljb250aW51ZTtkLmFkZE1lc3NhZ2VTZXF1ZW5jZSh7a2V5OnJwLG1lc3NhZ2U6cn0pLG8mJnIuY2xpZW50VGltZT4wJiZkLmFkZE1lc3NhZ2VEZWxheShyLmNsaWVudFRpbWUpO3ZhciB5PXIsST15LmNvbnZlcnNhdGlvbklELEU9eS5zZXF1ZW5jZSxUPU0uaXNSZW1vdGVSZWFkKHtjb252ZXJzYXRpb25JRDpJLHNlcXVlbmNlOkV9KTtpZihnYyhjW0ldKSl7dmFyIFM9MDtcImluXCI9PT1yLmZsb3cmJihyLl9pc0V4Y2x1ZGVkRnJvbVVucmVhZENvdW50fHxUfHwoUz0xKSksY1tJXT1hLnB1c2goe2NvbnZlcnNhdGlvbklEOkksdW5yZWFkQ291bnQ6Uyx0eXBlOnIuY29udmVyc2F0aW9uVHlwZSxzdWJUeXBlOnIuY29udmVyc2F0aW9uU3ViVHlwZSxsYXN0TWVzc2FnZTpyLl9pc0V4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlP1wiXCI6cn0pLTF9ZWxzZXt2YXIgQz1jW0ldO2FbQ10udHlwZT1yLmNvbnZlcnNhdGlvblR5cGUsYVtDXS5zdWJUeXBlPXIuY29udmVyc2F0aW9uU3ViVHlwZSxhW0NdLmxhc3RNZXNzYWdlPXIuX2lzRXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2U/XCJcIjpyLFwiaW5cIj09PXIuZmxvdyYmKHIuX2lzRXhjbHVkZWRGcm9tVW5yZWFkQ291bnR8fFR8fGFbQ10udW5yZWFkQ291bnQrKyl9fX1lbHNlIHRoaXMuX2NhY2hlR3JvdXBNZXNzYWdlQW5kUHJvYmUoe2dyb3VwSUQ6ZixldmVudDpuLGl0ZW06aH0pfXJldHVybntjb252ZXJzYXRpb25PcHRpb25zTGlzdDphLG1lc3NhZ2VMaXN0OnMsQVZDaGF0Um9vbU1lc3NhZ2VMaXN0Oml9fX0se2tleTpcIm9uR3JvdXBNZXNzYWdlUmV2b2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbkdyb3VwTWVzc2FnZVJldm9rZWQgbnVtczpcIikuY29uY2F0KGUuZGF0YUxpc3QubGVuZ3RoKSk7dmFyIHQ9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKHVsKSxuPVtdLG89bnVsbDtlLmRhdGFMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciByPWUuZWxlbWVudHMucmV2b2tlZEluZm9zO2djKHIpfHxyLmZvckVhY2goKGZ1bmN0aW9uKGUpeyhvPXQucmV2b2tlKFwiR1JPVVBcIi5jb25jYXQoZS5ncm91cElEKSxlLnNlcXVlbmNlLGUucmFuZG9tKSkmJm4ucHVzaChvKX0pKX0pKSwwIT09bi5sZW5ndGgmJih0Lm9uTWVzc2FnZVJldm9rZWQobiksdGhpcy5fZ3JvdXBNb2R1bGUuZW1pdE91dGVyRXZlbnQoV24uTUVTU0FHRV9SRVZPS0VELG4pKX19LHtrZXk6XCJfZ3JvdXBMaXN0VHJlZVNoYWtpbmdcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IE1hcChVbih0aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cE1hcCgpKSksbj0wLG89ZS5sZW5ndGg7bjxvO24rKyl0LmRlbGV0ZShlW25dLmdyb3VwSUQpO3RoaXMuX2dyb3VwTW9kdWxlLmhhc0pvaW5lZEFWQ2hhdFJvb20oKSYmdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0Sm9pbmVkQVZDaGF0Um9vbSgpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuZGVsZXRlKGUpfSkpO2Zvcih2YXIgcj1Vbih0LmtleXMoKSksYT0wLHM9ci5sZW5ndGg7YTxzO2ErKyl0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVHcm91cChyW2FdKX19LHtrZXk6XCJnZXRHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwTGlzdFwiKSxvPW5ldyBkcChjZyk7UWkubG9nKFwiXCIuY29uY2F0KG4pKTt2YXIgcj17aW50cm9kdWN0aW9uOlwiSW50cm9kdWN0aW9uXCIsbm90aWZpY2F0aW9uOlwiTm90aWZpY2F0aW9uXCIsY3JlYXRlVGltZTpcIkNyZWF0ZVRpbWVcIixvd25lcklEOlwiT3duZXJfQWNjb3VudFwiLGxhc3RJbmZvVGltZTpcIkxhc3RJbmZvVGltZVwiLG1lbWJlck51bTpcIk1lbWJlck51bVwiLG1heE1lbWJlck51bTpcIk1heE1lbWJlck51bVwiLGpvaW5PcHRpb246XCJBcHBseUpvaW5PcHRpb25cIixtdXRlQWxsTWVtYmVyczpcIlNodXRVcEFsbE1lbWJlclwifSxhPVtcIlR5cGVcIixcIk5hbWVcIixcIkZhY2VVcmxcIixcIk5leHRNc2dTZXFcIixcIkxhc3RNc2dUaW1lXCJdLHM9W107cmV0dXJuIGUmJmUuZ3JvdXBQcm9maWxlRmlsdGVyJiZlLmdyb3VwUHJvZmlsZUZpbHRlci5mb3JFYWNoKChmdW5jdGlvbihlKXtyW2VdJiZhLnB1c2gocltlXSl9KSksdGhpcy5fcGFnaW5nR2V0R3JvdXBMaXN0KHtsaW1pdDo1MCxvZmZzZXQ6MCxncm91cEJhc2VJbmZvRmlsdGVyOmEsZ3JvdXBMaXN0OnN9KS50aGVuKChmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBjb3VudDpcIikuY29uY2F0KHMubGVuZ3RoKSksdC5fZ3JvdXBMaXN0VHJlZVNoYWtpbmcocyksdC5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAocyk7dmFyIGU9dC5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cExpc3QoKS5sZW5ndGg7cmV0dXJuIG8uc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcInJlbW90ZSBjb3VudDpcIi5jb25jYXQocy5sZW5ndGgsXCIsIGFmdGVyIHRyZWUgc2hha2luZywgbG9jYWwgY291bnQ6XCIpLmNvbmNhdChlKSkuZW5kKCksdC50ZW1wQ29udmVyc2F0aW9uTGlzdCYmKFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIHVwZGF0ZSBsYXN0IG1lc3NhZ2Ugd2l0aCB0ZW1wQ29udmVyc2F0aW9uTGlzdCwgY291bnQ6XCIpLmNvbmNhdCh0LnRlbXBDb252ZXJzYXRpb25MaXN0Lmxlbmd0aCkpLHQuaGFuZGxlVXBkYXRlR3JvdXBMYXN0TWVzc2FnZSh7ZGF0YTp0LnRlbXBDb252ZXJzYXRpb25MaXN0fSksdC50ZW1wQ29udmVyc2F0aW9uTGlzdD1udWxsKSx0Ll9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCksdC5fZ3JvdXBNb2R1bGUucGF0Y2hHcm91cE1lc3NhZ2VSZW1pbmRUeXBlKCksdC5fZ3JvdXBNb2R1bGUucmVjb21wdXRlVW5yZWFkQ291bnQoKSx5Xyh7Z3JvdXBMaXN0OnQuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBMaXN0KCl9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfX0se2tleTpcIl9wYWdpbmdHZXRHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9wYWdpbmdHZXRHcm91cExpc3RcIiksbz1lLmlzQ29tbXVuaXR5UmVsYXkscj12b2lkIDAhPT1vJiZvLGE9ZS5saW1pdCxzPWUub2Zmc2V0LGk9ZS5ncm91cEJhc2VJbmZvRmlsdGVyLGM9ZS5ncm91cExpc3QsdT1uZXcgZHAoZ2cpO3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6UWwscmVxdWVzdERhdGE6e3R5cGU6cj9Zbi5HUlBfQ09NTVVOSVRZOnZvaWQgMCxtZW1iZXJBY2NvdW50OnRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCksbGltaXQ6YSxvZmZzZXQ6cyxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjppLHNlbGZJbmZvRmlsdGVyOltcIlJvbGVcIixcIkpvaW5UaW1lXCIsXCJNc2dGbGFnXCIsXCJNc2dTZXFcIl19fX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZGF0YSxsPW8uZ3JvdXBzLGQ9dm9pZCAwPT09bD9bXTpsLHA9by50b3RhbENvdW50O2MucHVzaC5hcHBseShjLFVuKGQpKTt2YXIgZz1zK2EsaD0hKHA+ZyksZj1cIm9mZnNldDpcIi5jb25jYXQocyxcIiB0b3RhbENvdW50OlwiKS5jb25jYXQocCxcIiBpc0NvbXBsZXRlZDpcIikuY29uY2F0KGgsXCIgXCIpK1wiY3VycmVudENvdW50OlwiLmNvbmNhdChjLmxlbmd0aCxcIiBpc0NvbW11bml0eVJlbGF5OlwiKS5jb25jYXQocik7cmV0dXJuIHUuc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChmKSkuZW5kKCkscnx8aD8hciYmaD8oUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgc3RhcnQgdG8gZ2V0IGNvbW11bml0eSBsaXN0XCIpKSxzPTAsdC5fcGFnaW5nR2V0R3JvdXBMaXN0KHtsaW1pdDphLG9mZnNldDpzLGdyb3VwQmFzZUluZm9GaWx0ZXI6aSxncm91cExpc3Q6Yyxpc0NvbW11bml0eVJlbGF5OiEwfSkpOnImJiFoPyhzPWcsdC5fcGFnaW5nR2V0R3JvdXBMaXN0KHtsaW1pdDphLG9mZnNldDpzLGdyb3VwQmFzZUluZm9GaWx0ZXI6aSxncm91cExpc3Q6Yyxpc0NvbW11bml0eVJlbGF5OiEwfSkpOihRaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gdG90YWxDb3VudDpcIikuY29uY2F0KGMubGVuZ3RoKSkseV8oe2dyb3VwTGlzdDpjfSkpOihzPWcsdC5fcGFnaW5nR2V0R3JvdXBMaXN0KHtsaW1pdDphLG9mZnNldDpzLGdyb3VwQmFzZUluZm9GaWx0ZXI6aSxncm91cExpc3Q6Y30pKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIDExZTMhPT1lLmNvZGUmJnQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLGE9blsxXTt1LnNldE1lc3NhZ2UoXCJpc0NvbW11bml0eVJlbGF5OlwiLmNvbmNhdChyKSkuc2V0RXJyb3IoZSxvLGEpLmVuZCgpfSkpLHI/KDExZTM9PT1lLmNvZGUmJih1PW51bGwsUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIGNvbW11bml0eSB1bmF2YWlsYWJsZVwiKSkpLGtfKHtncm91cExpc3Q6Y30pKTpPXyhlKX0pKX19LHtrZXk6XCJfY2FjaGVHcm91cE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5oYXMoZSl8fHRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5zZXQoZSxbXSksdGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmdldChlKS5wdXNoKHQpfX0se2tleTpcIl9kZWxldGVDYWNoZWRHcm91cE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuaGFzKGUpJiZ0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuZGVsZXRlKGUpfX0se2tleTpcIl9ub3RpZnlDYWNoZWRHcm91cE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmdldChlKXx8W107bi5mb3JFYWNoKChmdW5jdGlvbihlKXt0Lm9uTmV3R3JvdXBNZXNzYWdlKGUpfSkpLHRoaXMuX2RlbGV0ZUNhY2hlZEdyb3VwTWVzc2FnZShlKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9ub3RpZnlDYWNoZWRHcm91cE1lc3NhZ2UgZ3JvdXBJRDpcIikuY29uY2F0KGUsXCIgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCkpfX0se2tleTpcIl9jYWNoZUdyb3VwTWVzc2FnZUFuZFByb2JlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUuZXZlbnQscj1lLml0ZW07dGhpcy5fY2FjaGVHcm91cE1lc3NhZ2Uobix7ZXZlbnQ6byxkYXRhTGlzdDpbcl19KSx0aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cFNpbXBsaWZpZWRJbmZvKG4pLnRoZW4oKGZ1bmN0aW9uKGUpe2UudHlwZT09PVluLkdSUF9BVkNIQVRST09NP3QuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAobik/dC5fbm90aWZ5Q2FjaGVkR3JvdXBNZXNzYWdlKG4pOnQuX2dyb3VwTW9kdWxlLnNldFVuam9pbmVkQVZDaGF0Um9vbShuKToodC5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAoW2VdKSx0Ll9ub3RpZnlDYWNoZWRHcm91cE1lc3NhZ2UobikpfSkpLHRoaXMuX2NoZWNrQ291bnRNYXAuaGFzKG4pfHx0aGlzLl9jaGVja0NvdW50TWFwLnNldChuLDApLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2NhY2hlR3JvdXBNZXNzYWdlQW5kUHJvYmUgZ3JvdXBJRDpcIikuY29uY2F0KG4pKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmNsZWFyKCksdGhpcy5fY2hlY2tDb3VudE1hcC5jbGVhcigpLHRoaXMuX2dyb3VwTW9kdWxlLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub25jZShWXyx0aGlzLl9pbml0R3JvdXBMaXN0LHRoaXMpfX1dKSxlfSgpLHBtPXsxOlwiaW5pdFwiLDI6XCJtb2RpZnlcIiwzOlwiY2xlYXJcIiw0OlwiZGVsZXRlXCJ9LGdtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX2dyb3VwTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiR3JvdXBBdHRyaWJ1dGVzSGFuZGxlclwiLHRoaXMuX2dyb3VwQXR0cmlidXRlc01hcD1uZXcgTWFwLHRoaXMuQ0FDSEVfRVhQSVJFX1RJTUU9M2U0LHRoaXMuX2dyb3VwTW9kdWxlLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oS18sdGhpcy5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsdGhpcyl9cmV0dXJuIEVuKGUsW3trZXk6XCJfb25DbG91ZENvbmZpZ1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dyb3VwTW9kdWxlLmdldENsb3VkQ29uZmlnKFwiZ3JwX2F0dHJfY2FjaGVfdGltZVwiKTtnYyhlKXx8KHRoaXMuQ0FDSEVfRVhQSVJFX1RJTUU9TnVtYmVyKGUpKX19LHtrZXk6XCJ1cGRhdGVMb2NhbE1haW5TZXF1ZW5jZU9uUmVjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmxvY2FsTWFpblNlcXVlbmNlPTB9KSl9fSx7a2V5Olwib25Hcm91cEF0dHJpYnV0ZXNVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUuZ3JvdXBBdHRyaWJ1dGVPcHRpb24scj1vLm1haW5TZXF1ZW5jZSxhPW8uaGFzQ2hhbmdlZEF0dHJpYnV0ZUluZm8scz1vLmdyb3VwQXR0cmlidXRlTGlzdCxpPXZvaWQgMD09PXM/W106cyxjPW8ub3BlcmF0aW9uVHlwZTtpZihRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZC4gaGFzQ2hhbmdlZEF0dHJpYnV0ZUluZm86XCIpLmNvbmNhdChhLFwiIG9wZXJhdGlvblR5cGU6XCIpLmNvbmNhdChjKSksIWdjKGMpKXtpZigxPT09YSl7aWYoND09PWMpe3ZhciB1PVtdO2kuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dS5wdXNoKGUua2V5KX0pKSxpPVVuKHUpLHU9bnVsbH1yZXR1cm4gdGhpcy5fcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpuLHJlbW90ZU1haW5TZXF1ZW5jZTpyLGdyb3VwQXR0cmlidXRlTGlzdDppLG9wZXJhdGlvblR5cGU6cG1bY119KSx2b2lkIHRoaXMuX2VtaXRHcm91cEF0dHJpYnV0ZXNVcGRhdGVkKG4pfWlmKHRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5oYXMobikpe3ZhciBsPXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5nZXQobikuYXZDaGF0Um9vbUtleTt0aGlzLl9nZXRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixhdkNoYXRSb29tS2V5Omx9KS50aGVuKChmdW5jdGlvbigpe3QuX2VtaXRHcm91cEF0dHJpYnV0ZXNVcGRhdGVkKG4pfSkpfX19fSx7a2V5OlwiaW5pdEdyb3VwQXR0cmlidXRlc0NhY2hlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncm91cElELG49ZS5hdkNoYXRSb29tS2V5O3RoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5zZXQodCx7bGFzdFVwZGF0ZVRpbWU6MCxsb2NhbE1haW5TZXF1ZW5jZTowLHJlbW90ZU1haW5TZXF1ZW5jZTowLGF0dHJpYnV0ZXM6bmV3IE1hcCxhdkNoYXRSb29tS2V5Om59KSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmluaXRHcm91cEF0dHJpYnV0ZXNDYWNoZSBncm91cElEOlwiKS5jb25jYXQodCxcIiBhdkNoYXRSb29tS2V5OlwiKS5jb25jYXQobikpfX0se2tleTpcImluaXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS5ncm91cEF0dHJpYnV0ZXMscj10aGlzLl9jaGVja0NhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpuLGZ1bmNOYW1lOlwiaW5pdEdyb3VwQXR0cmlidXRlc1wifSk7aWYoITAhPT1yKXJldHVybiBPXyhyKTt2YXIgYT10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZ2V0KG4pLHM9YS5yZW1vdGVNYWluU2VxdWVuY2UsaT1hLmF2Q2hhdFJvb21LZXksYz1uZXcgZHAoX2cpO3JldHVybiBjLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIG1haW5TZXF1ZW5jZTpcIikuY29uY2F0KHMsXCIgZ3JvdXBBdHRyaWJ1dGVzOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobykpKSx0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6VGQscmVxdWVzdERhdGE6e2dyb3VwSUQ6bixhdkNoYXRSb29tS2V5OmksbWFpblNlcXVlbmNlOnMsZ3JvdXBBdHRyaWJ1dGVMaXN0OnRoaXMuX3RyYW5zZm9ybUdyb3VwQXR0cmlidXRlcyhvKX19KS50aGVuKChmdW5jdGlvbihlKXt2YXIgcj1lLmRhdGEsYT1yLm1haW5TZXF1ZW5jZSxzPVVuKHIuZ3JvdXBBdHRyaWJ1dGVMaXN0KTtyZXR1cm4gcy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnZhbHVlPW9bZS5rZXldfSkpLHQuX3JlZnJlc2hDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixyZW1vdGVNYWluU2VxdWVuY2U6YSxncm91cEF0dHJpYnV0ZUxpc3Q6cyxvcGVyYXRpb25UeXBlOlwiaW5pdFwifSksYy5zZXROZXR3b3JrVHlwZSh0Ll9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmluaXRHcm91cEF0dHJpYnV0ZXMgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSkseV8oe2dyb3VwQXR0cmlidXRlczpvfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07Yy5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksT18oZSl9KSl9fSx7a2V5Olwic2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUuZ3JvdXBBdHRyaWJ1dGVzLHI9dGhpcy5fY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixmdW5jTmFtZTpcInNldEdyb3VwQXR0cmlidXRlc1wifSk7aWYoITAhPT1yKXJldHVybiBPXyhyKTt2YXIgYT10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZ2V0KG4pLHM9YS5yZW1vdGVNYWluU2VxdWVuY2UsaT1hLmF2Q2hhdFJvb21LZXksYz1hLmF0dHJpYnV0ZXMsdT10aGlzLl90cmFuc2Zvcm1Hcm91cEF0dHJpYnV0ZXMobyk7dS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLmtleTtlLnNlcXVlbmNlPTAsYy5oYXModCkmJihlLnNlcXVlbmNlPWMuZ2V0KHQpLnNlcXVlbmNlKX0pKTt2YXIgbD1uZXcgZHAobWcpO3JldHVybiBsLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIG1haW5TZXF1ZW5jZTpcIikuY29uY2F0KHMsXCIgZ3JvdXBBdHRyaWJ1dGVzOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobykpKSx0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6U2QscmVxdWVzdERhdGE6e2dyb3VwSUQ6bixhdkNoYXRSb29tS2V5OmksbWFpblNlcXVlbmNlOnMsZ3JvdXBBdHRyaWJ1dGVMaXN0OnV9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHI9ZS5kYXRhLGE9ci5tYWluU2VxdWVuY2Uscz1VbihyLmdyb3VwQXR0cmlidXRlTGlzdCk7cmV0dXJuIHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS52YWx1ZT1vW2Uua2V5XX0pKSx0Ll9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4scmVtb3RlTWFpblNlcXVlbmNlOmEsZ3JvdXBBdHRyaWJ1dGVMaXN0OnMsb3BlcmF0aW9uVHlwZTpcIm1vZGlmeVwifSksbC5zZXROZXR3b3JrVHlwZSh0Ll9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLnNldEdyb3VwQXR0cmlidXRlcyBvay4gZ3JvdXBJRDpcIikuY29uY2F0KG4pKSx5Xyh7Z3JvdXBBdHRyaWJ1dGVzOm99KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtsLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxPXyhlKX0pKX19LHtrZXk6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS5rZXlMaXN0LHI9dm9pZCAwPT09bz9bXTpvLGE9dGhpcy5fY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixmdW5jTmFtZTpcImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wifSk7aWYoITAhPT1hKXJldHVybiBPXyhhKTt2YXIgcz10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZ2V0KG4pLGk9cy5yZW1vdGVNYWluU2VxdWVuY2UsYz1zLmF2Q2hhdFJvb21LZXksdT1zLmF0dHJpYnV0ZXMsbD1Vbih1LmtleXMoKSksZD1BZCxwPVwiY2xlYXJcIixnPXtncm91cElEOm4sYXZDaGF0Um9vbUtleTpjLG1haW5TZXF1ZW5jZTppfTtpZihyLmxlbmd0aD4wKXt2YXIgaD1bXTtsPVtdLGQ9Q2QscD1cImRlbGV0ZVwiLHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9MDt1LmhhcyhlKSYmKHQ9dS5nZXQoZSkuc2VxdWVuY2UsbC5wdXNoKGUpKSxoLnB1c2goe2tleTplLHNlcXVlbmNlOnR9KX0pKSxnLmdyb3VwQXR0cmlidXRlTGlzdD1ofXZhciBmPW5ldyBkcCh2Zyk7cmV0dXJuIGYuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgbWFpblNlcXVlbmNlOlwiKS5jb25jYXQoaSxcIiBrZXlMaXN0OlwiKS5jb25jYXQocixcIiBwcm90b2NvbE5hbWU6XCIpLmNvbmNhdChkKSksdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmQscmVxdWVzdERhdGE6Z30pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZGF0YS5tYWluU2VxdWVuY2U7cmV0dXJuIHQuX3JlZnJlc2hDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixyZW1vdGVNYWluU2VxdWVuY2U6byxncm91cEF0dHJpYnV0ZUxpc3Q6cixvcGVyYXRpb25UeXBlOnB9KSxmLnNldE5ldHdvcmtUeXBlKHQuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZGVsZXRlR3JvdXBBdHRyaWJ1dGVzIG9rLiBncm91cElEOlwiKS5jb25jYXQobikpLHlfKHtrZXlMaXN0Omx9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtmLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxPXyhlKX0pKX19LHtrZXk6XCJnZXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89dGhpcy5fY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixmdW5jTmFtZTpcImdldEdyb3VwQXR0cmlidXRlc1wifSk7aWYoITAhPT1vKXJldHVybiBPXyhvKTt2YXIgcj10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZ2V0KG4pLGE9ci5hdkNoYXRSb29tS2V5LHM9ci5sYXN0VXBkYXRlVGltZSxpPXIubG9jYWxNYWluU2VxdWVuY2UsYz1yLnJlbW90ZU1haW5TZXF1ZW5jZSx1PW5ldyBkcChNZyk7aWYodS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiBsb2NhbE1haW5TZXF1ZW5jZTpcIikuY29uY2F0KGksXCIgcmVtb3RlTWFpblNlcXVlbmNlOlwiKS5jb25jYXQoYyxcIiBrZXlMaXN0OlwiKS5jb25jYXQoZS5rZXlMaXN0KSksRGF0ZS5ub3coKS1zPj10aGlzLkNBQ0hFX0VYUElSRV9USU1FfHxpPGMpcmV0dXJuIHRoaXMuX2dldEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpuLGF2Q2hhdFJvb21LZXk6YX0pLnRoZW4oKGZ1bmN0aW9uKG8pe3Uuc2V0TW9yZU1lc3NhZ2UoXCJnZXQgYXR0cmlidXRlcyBmcm9tIHJlbW90ZS4gY291bnQ6XCIuY29uY2F0KG8ubGVuZ3RoKSkuc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5nZXRHcm91cEF0dHJpYnV0ZXMgZnJvbSByZW1vdGUuIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSk7dmFyIHI9dC5fZ2V0TG9jYWxHcm91cEF0dHJpYnV0ZXMoZSk7cmV0dXJuIHlfKHtncm91cEF0dHJpYnV0ZXM6cn0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO3Uuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLE9fKGUpfSkpO3Uuc2V0TW9yZU1lc3NhZ2UoXCJnZXQgYXR0cmlidXRlcyBmcm9tIGNhY2hlXCIpLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBBdHRyaWJ1dGVzIGZyb20gY2FjaGUuIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSk7dmFyIGw9dGhpcy5fZ2V0TG9jYWxHcm91cEF0dHJpYnV0ZXMoZSk7cmV0dXJuIGtfKHtncm91cEF0dHJpYnV0ZXM6bH0pfX0se2tleTpcIl9nZXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6RGQscmVxdWVzdERhdGE6Q24oe30sZSl9KS50aGVuKChmdW5jdGlvbihuKXt2YXIgbz1uLmRhdGEscj1vLm1haW5TZXF1ZW5jZSxhPW8uZ3JvdXBBdHRyaWJ1dGVMaXN0LHM9VW4oYSk7cmV0dXJuIGdjKHIpfHx0Ll9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOmUuZ3JvdXBJRCxyZW1vdGVNYWluU2VxdWVuY2U6cixncm91cEF0dHJpYnV0ZUxpc3Q6cyxvcGVyYXRpb25UeXBlOlwiZ2V0XCJ9KSxRaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLl9nZXRHcm91cEF0dHJpYnV0ZXMgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChlLmdyb3VwSUQpKSxhfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gT18oZSl9KSl9fSx7a2V5OlwiX2dldExvY2FsR3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncm91cElELG49ZS5rZXlMaXN0LG89dm9pZCAwPT09bj9bXTpuLHI9e307aWYoIXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5oYXModCkpcmV0dXJuIHI7dmFyIGE9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldCh0KS5hdHRyaWJ1dGVzO2lmKG8ubGVuZ3RoPjApby5mb3JFYWNoKChmdW5jdGlvbihlKXthLmhhcyhlKSYmKHJbZV09YS5nZXQoZSkudmFsdWUpfSkpO2Vsc2V7dmFyIHMsaT1CbihhLmtleXMoKSk7dHJ5e2ZvcihpLnMoKTshKHM9aS5uKCkpLmRvbmU7KXt2YXIgYz1zLnZhbHVlO3JbY109YS5nZXQoYykudmFsdWV9fWNhdGNoKHUpe2kuZSh1KX1maW5hbGx5e2kuZigpfX1yZXR1cm4gcn19LHtrZXk6XCJfcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBJRCxuPWUucmVtb3RlTWFpblNlcXVlbmNlLG89ZS5ncm91cEF0dHJpYnV0ZUxpc3Qscj1lLm9wZXJhdGlvblR5cGU7aWYodGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmhhcyh0KSl7dmFyIGE9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldCh0KSxzPWEubG9jYWxNYWluU2VxdWVuY2U7aWYoXCJnZXRcIj09PXJ8fG4tcz09MSlhLnJlbW90ZU1haW5TZXF1ZW5jZT1uLGEubG9jYWxNYWluU2VxdWVuY2U9bixhLmxhc3RVcGRhdGVUaW1lPURhdGUubm93KCksdGhpcy5fdXBkYXRlQ2FjaGVkQXR0cmlidXRlcyh7Z3JvdXBBdHRyaWJ1dGVzOmEsZ3JvdXBBdHRyaWJ1dGVMaXN0Om8sb3BlcmF0aW9uVHlwZTpyfSk7ZWxzZXtpZihzPT09bilyZXR1cm47YS5yZW1vdGVNYWluU2VxdWVuY2U9bn10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuc2V0KHQsYSk7dmFyIGk9XCJvcGVyYXRpb25UeXBlOlwiLmNvbmNhdChyLFwiIGxvY2FsTWFpblNlcXVlbmNlOlwiKS5jb25jYXQocyxcIiByZW1vdGVNYWluU2VxdWVuY2U6XCIpLmNvbmNhdChuKTtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzLiBcIikuY29uY2F0KGkpKX19fSx7a2V5OlwiX3VwZGF0ZUNhY2hlZEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdyb3VwQXR0cmlidXRlcyxuPWUuZ3JvdXBBdHRyaWJ1dGVMaXN0LG89ZS5vcGVyYXRpb25UeXBlO1wiY2xlYXJcIiE9PW8/XCJkZWxldGVcIiE9PW8/KFwiaW5pdFwiPT09byYmdC5hdHRyaWJ1dGVzLmNsZWFyKCksbi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLmtleSxvPWUudmFsdWUscj1lLnNlcXVlbmNlO3QuYXR0cmlidXRlcy5zZXQobix7dmFsdWU6byxzZXF1ZW5jZTpyfSl9KSkpOm4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5hdHRyaWJ1dGVzLmRlbGV0ZShlKX0pKTp0LmF0dHJpYnV0ZXMuY2xlYXIoKX19LHtrZXk6XCJfY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdyb3VwSUQsbj1lLmZ1bmNOYW1lO2lmKHRoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAodCkmJnRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKHQpLnR5cGUhPT1Zbi5HUlBfQVZDSEFUUk9PTSl7cmV0dXJuIFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jaGVja0NhY2hlZEdyb3VwQXR0cmlidXRlcy4gXCIpLmNvbmNhdChcIumdnuebtOaSree+pOS4jeiDveS9v+eUqOe+pOWxnuaApyBBUElcIikpLG5ldyBBXyh7Y29kZTp6ZC5DQU5OT1RfVVNFX0dSUF9BVFRSX05PVF9BVkNIQVRST09NLG1lc3NhZ2U6XCLpnZ7nm7Tmkq3nvqTkuI3og73kvb/nlKjnvqTlsZ7mgKcgQVBJXCJ9KX12YXIgbz10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZ2V0KHQpO2lmKGdjKG8pKXt2YXIgcj1cIuWmguaenCBncm91cElEOlwiLmNvbmNhdCh0LFwiIOaYr+ebtOaSree+pO+8jOS9v+eUqCBcIikuY29uY2F0KG4sXCIg5YmN5YWI5L2/55SoIGpvaW5Hcm91cCDmjqXlj6PnlLPor7fliqDlhaXnvqTnu4TvvIzor6bnu4bor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI2pvaW5Hcm91cFwiKTtyZXR1cm4gUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2NoZWNrQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzLiBcIikuY29uY2F0KHIpKSxuZXcgQV8oe2NvZGU6emQuQ0FOTk9UX1VTRV9HUlBfQVRUUl9BVkNIQVRST09NX1VOSk9JTixtZXNzYWdlOnJ9KX1yZXR1cm4hMH19LHtrZXk6XCJfdHJhbnNmb3JtR3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3QucHVzaCh7a2V5Om4sdmFsdWU6ZVtuXX0pfSkpLHR9fSx7a2V5OlwiX2VtaXRHcm91cEF0dHJpYnV0ZXNVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0TG9jYWxHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6ZX0pO3RoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KFduLkdST1VQX0FUVFJJQlVURVNfVVBEQVRFRCx7Z3JvdXBJRDplLGdyb3VwQXR0cmlidXRlczp0fSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5jbGVhcigpLHRoaXMuQ0FDSEVfRVhQSVJFX1RJTUU9M2U0fX1dKSxlfSgpLGhtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpO3ZhciBuPXQubWFuYWdlcixvPXQuZ3JvdXBJRCxyPXQub25Jbml0LGE9dC5vblN1Y2Nlc3Mscz10Lm9uRmFpbDt0aGlzLl9jbGFzc05hbWU9XCJQb2xsaW5nXCIsdGhpcy5fbWFuYWdlcj1uLHRoaXMuX2dyb3VwTW9kdWxlPW4uX2dyb3VwTW9kdWxlLHRoaXMuX29uSW5pdD1yLHRoaXMuX29uU3VjY2Vzcz1hLHRoaXMuX29uRmFpbD1zLHRoaXMuX2dyb3VwSUQ9byx0aGlzLl90aW1lb3V0SUQ9LTEsdGhpcy5faXNSdW5uaW5nPSExLHRoaXMuX3Byb3RvY29sTmFtZT1NZH1yZXR1cm4gRW4oZSxbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9ncm91cE1vZHVsZS5pc0xvZ2dlZEluKCk7ZXx8KHRoaXMuX3Byb3RvY29sTmFtZT15ZCksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zdGFydCBwb2xsaW5nSW50ZXJ2YWw6XCIpLmNvbmNhdCh0aGlzLl9tYW5hZ2VyLmdldFBvbGxpbmdJbnRlcnZhbCgpLFwiIGlzTG9nZ2VkSW46XCIpLmNvbmNhdChlKSksdGhpcy5faXNSdW5uaW5nPSEwLHRoaXMuX3JlcXVlc3QoKX19LHtrZXk6XCJpc1J1bm5pbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1J1bm5pbmd9fSx7a2V5OlwiX3JlcXVlc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLl9vbkluaXQodGhpcy5fZ3JvdXBJRCk7dGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnRoaXMuX3Byb3RvY29sTmFtZSxyZXF1ZXN0RGF0YTp0fSkudGhlbigoZnVuY3Rpb24odCl7ZS5fb25TdWNjZXNzKGUuX2dyb3VwSUQsdCksZS5pc1J1bm5pbmcoKSYmKGNsZWFyVGltZW91dChlLl90aW1lb3V0SUQpLGUuX3RpbWVvdXRJRD1zZXRUaW1lb3V0KGUuX3JlcXVlc3QuYmluZChlKSxlLl9tYW5hZ2VyLmdldFBvbGxpbmdJbnRlcnZhbCgpKSl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe2UuX29uRmFpbChlLl9ncm91cElELHQpLGUuaXNSdW5uaW5nKCkmJihjbGVhclRpbWVvdXQoZS5fdGltZW91dElEKSxlLl90aW1lb3V0SUQ9c2V0VGltZW91dChlLl9yZXF1ZXN0LmJpbmQoZSksZS5fbWFuYWdlci5NQVhfUE9MTElOR19JTlRFUlZBTCkpfSkpfX0se2tleTpcInN0b3BcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RvcFwiKSksdGhpcy5fdGltZW91dElEPjAmJihjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dElEKSx0aGlzLl90aW1lb3V0SUQ9LTEpLHRoaXMuX2lzUnVubmluZz0hMX19XSksZX0oKSxmbT17MzohMCw0OiEwLDU6ITAsNjohMH0sX209ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fZ3JvdXBNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJBVkNoYXRSb29tSGFuZGxlclwiLHRoaXMuX2pvaW5lZEdyb3VwTWFwPW5ldyBNYXAsdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwPW5ldyBNYXAsdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwPW5ldyBNYXAsdGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0PW5ldyBaXygxMDApLHRoaXMubWVzc2FnZUlETGlua2VkTGlzdD1uZXcgWl8oMTAwKSx0aGlzLnJlY2VpdmVkTWVzc2FnZUNvdW50PTAsdGhpcy5fcmVwb3J0TWVzc2FnZVN0YWNrZWRDb3VudD0wLHRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwPW5ldyBNYXAsdGhpcy5ERUZBVUxUX0VYUElSRV9USU1FPTYwLHRoaXMuREVGQVVMVF9QT0xMSU5HX0lOVEVSVkFMPTMwMCx0aGlzLk1BWF9QT0xMSU5HX0lOVEVSVkFMPTJlMyx0aGlzLl9wb2xsaW5nSW50ZXJ2YWw9dGhpcy5ERUZBVUxUX1BPTExJTkdfSU5URVJWQUx9cmV0dXJuIEVuKGUsW3trZXk6XCJoYXNKb2luZWRBVkNoYXRSb29tXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fam9pbmVkR3JvdXBNYXAuc2l6ZT4wfX0se2tleTpcImNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fam9pbmVkR3JvdXBNYXAuaGFzKGUpfX0se2tleTpcImdldEpvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9qb2luZWRHcm91cE1hcC5zaXplPjA/VW4odGhpcy5fam9pbmVkR3JvdXBNYXAua2V5cygpKTpudWxsfX0se2tleTpcIl91cGRhdGVSZXF1ZXN0RGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBDbih7fSx0aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXAuZ2V0KGUpKX19LHtrZXk6XCJfaGFuZGxlU3VjY2Vzc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dC5kYXRhLG89bi5rZXkscj1uLm5leHRTZXEsYT1uLnJzcE1zZ0xpc3Q7aWYoMCE9PW4uZXJyb3JDb2RlKXt2YXIgcz10aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXAuZ2V0KGUpLGk9bmV3IGRwKGtnKSxjPXM/XCJcIi5jb25jYXQocy5rZXksXCItXCIpLmNvbmNhdChzLnN0YXJ0U2VxKTpcInJlcXVlc3RJbmZvIGlzIHVuZGVmaW5lZFwiO2kuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChlLFwiLVwiKS5jb25jYXQoYyxcIi1cIikuY29uY2F0KHQuZXJyb3JJbmZvKSkuc2V0Q29kZSh0LmVycm9yQ29kZSkuc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCEwKX1lbHNle2lmKCF0aGlzLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSkpcmV0dXJuO3VjKG8pJiZjYyhyKSYmdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLnNldChlLHtrZXk6byxzdGFydFNlcTpyfSkscGMoYSkmJmEubGVuZ3RoPjAmJihhLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UudG89ZS5ncm91cElEfSkpLHRoaXMub25NZXNzYWdlKGEpKX19fSx7a2V5OlwiX2hhbmRsZUZhaWx1cmVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe319LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihwYyhlKSYmMCE9PWUubGVuZ3RoKXt2YXIgdD1udWxsLG49W10sbz10aGlzLl9nZXRNb2R1bGUodWwpLHI9dGhpcy5fZ2V0TW9kdWxlKFNsKSxhPWUubGVuZ3RoO2E+MSYmZS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiBlLnNlcXVlbmNlLXQuc2VxdWVuY2V9KSk7Zm9yKHZhciBzPXRoaXMuX2dldE1vZHVsZShsbCksaT0wO2k8YTtpKyspaWYoZm1bZVtpXS5ldmVudF0pe3RoaXMucmVjZWl2ZWRNZXNzYWdlQ291bnQrPTEsdD10aGlzLnBhY2tNZXNzYWdlKGVbaV0sZVtpXS5ldmVudCk7dmFyIGM9MT09PWVbaV0uaXNNb2RpZmllZCx1PTE9PT1lW2ldLmlzSGlzdG9yeU1lc3NhZ2U7aWYoKHMuaXNVbmxpbWl0ZWRBVkNoYXRSb29tKCl8fCF0aGlzLnNlcXVlbmNlc0xpbmtlZExpc3QuaGFzKHQuc2VxdWVuY2UpKSYmIXRoaXMubWVzc2FnZUlETGlua2VkTGlzdC5oYXModC5JRCkpe3ZhciBsPXQuY29udmVyc2F0aW9uSUQ7aWYodGhpcy5yZWNlaXZlZE1lc3NhZ2VDb3VudCU0MD09MCYmdGhpcy5fZ2V0TW9kdWxlKHlsKS5kZXRlY3RNZXNzYWdlTG9zcyhsLHRoaXMuc2VxdWVuY2VzTGlua2VkTGlzdC5kYXRhKCkpLG51bGwhPT10aGlzLnNlcXVlbmNlc0xpbmtlZExpc3QudGFpbCgpKXt2YXIgZD10aGlzLnNlcXVlbmNlc0xpbmtlZExpc3QudGFpbCgpLnZhbHVlLHA9dC5zZXF1ZW5jZS1kO3A+MSYmcDw9MjA/dGhpcy5fZ2V0TW9kdWxlKHlsKS5vbk1lc3NhZ2VNYXliZUxvc3QobCxkKzEscC0xKTpwPC0xJiZwPj0tMjAmJnRoaXMuX2dldE1vZHVsZSh5bCkub25NZXNzYWdlTWF5YmVMb3N0KGwsdC5zZXF1ZW5jZSsxLE1hdGguYWJzKHApLTEpfXRoaXMuc2VxdWVuY2VzTGlua2VkTGlzdC5zZXQodC5zZXF1ZW5jZSksdGhpcy5tZXNzYWdlSURMaW5rZWRMaXN0LnNldCh0LklEKTt2YXIgZz0hMTtpZih0aGlzLl9pc01lc3NhZ2VTZW50QnlDdXJyZW50SW5zdGFuY2UodCk/YyYmKGc9ITAsdC5pc01vZGlmaWVkPWMsby51cGRhdGVNZXNzYWdlSXNNb2RpZmllZFByb3BlcnR5KHQpKTpnPSEwLGcpe2lmKHQuY29udmVyc2F0aW9uVHlwZSxZbi5DT05WX1NZU1RFTSwhdSYmdC5jb252ZXJzYXRpb25UeXBlIT09WW4uQ09OVl9TWVNURU0pe3ZhciBoPXQuY29udmVyc2F0aW9uSUQucmVwbGFjZShZbi5DT05WX0dST1VQLFwiXCIpO3RoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5oYXMoaCk/ci5hZGRNZXNzYWdlU2VxdWVuY2Uoe2tleTpzcCxtZXNzYWdlOnR9KToodC50eXBlIT09WW4uTVNHX0dSUF9USVAmJnQuY2xpZW50VGltZT4wJiZyLmFkZE1lc3NhZ2VEZWxheSh0LmNsaWVudFRpbWUpLHIuYWRkTWVzc2FnZVNlcXVlbmNlKHtrZXk6YXAsbWVzc2FnZTp0fSkpfW4ucHVzaCh0KX19fWVsc2UgUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NZXNzYWdlIOacquWkhOeQhueahCBldmVudCDnsbvlnos6IFwiKS5jb25jYXQoZVtpXS5ldmVudCkpO2lmKDAhPT1uLmxlbmd0aCl7dGhpcy5fZ3JvdXBNb2R1bGUuZmlsdGVyTW9kaWZpZWRNZXNzYWdlKG4pO3ZhciBmPXRoaXMucGFja0NvbnZlcnNhdGlvbk9wdGlvbihuKTtpZihmLmxlbmd0aD4wKXRoaXMuX2dldE1vZHVsZSh1bCkub25OZXdNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpmLGlzSW5zdGFudE1lc3NhZ2U6ITB9KTtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NZXNzYWdlIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKSx0aGlzLl9jaGVja01lc3NhZ2VTdGFja2VkKG4pO3ZhciBfPXRoaXMuX2dyb3VwTW9kdWxlLmZpbHRlclVubW9kaWZpZWRNZXNzYWdlKG4pO18ubGVuZ3RoPjAmJnRoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KFduLk1FU1NBR0VfUkVDRUlWRUQsXyksbi5sZW5ndGg9MH19fX0se2tleTpcIl9jaGVja01lc3NhZ2VTdGFja2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7dD49MTAwJiYoUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2NoZWNrTWVzc2FnZVN0YWNrZWQg55u05pKt576k5raI5oGv5aCG56ev5pWwOlwiKS5jb25jYXQoZS5sZW5ndGgsJ++8geWPr+iDveS8muWvvOiHtOW+ruS/oeWwj+eoi+W6j+a4suafk+aXtumBh+WIsCBcIkRvbSBsaW1pdCBleGNlZWRlZFwiIOeahOmUmeivr++8jOW7uuiuruaOpeWFpeS+p+atpOaXtuWPqua4suafk+acgOi/keeahDEw5p2h5raI5oGvJykpLHRoaXMuX3JlcG9ydE1lc3NhZ2VTdGFja2VkQ291bnQ8NSYmKG5ldyBkcChSZykuc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImNvdW50OlwiLmNvbmNhdCh0LFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChVbih0aGlzLl9qb2luZWRHcm91cE1hcC5rZXlzKCkpKSkuc2V0TGV2ZWwoXCJ3YXJuaW5nXCIpLmVuZCgpLHRoaXMuX3JlcG9ydE1lc3NhZ2VTdGFja2VkQ291bnQrPTEpKX19LHtrZXk6XCJfaXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLl9nZXRNb2R1bGUodWwpLmlzTWVzc2FnZVNlbnRCeUN1cnJlbnRJbnN0YW5jZShlKX19LHtrZXk6XCJwYWNrTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZS5jdXJyZW50VXNlcj10aGlzLl9ncm91cE1vZHVsZS5nZXRNeVVzZXJJRCgpLGUuY29udmVyc2F0aW9uVHlwZT01PT09dD9Zbi5DT05WX1NZU1RFTTpZbi5DT05WX0dST1VQLGUuaXNTeXN0ZW1NZXNzYWdlPSEhZS5pc1N5c3RlbU1lc3NhZ2U7dmFyIG49bmV3IE1fKGUpLG89dGhpcy5wYWNrRWxlbWVudHMoZSx0KTtyZXR1cm4gbi5zZXRFbGVtZW50KG8pLG59fSx7a2V5OlwicGFja0VsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gND09PXR8fDY9PT10Pyh0aGlzLl91cGRhdGVNZW1iZXJDb3VudEJ5R3JvdXBUaXBzKGUpLHRoaXMuX29uR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZChlKSx7dHlwZTpZbi5NU0dfR1JQX1RJUCxjb250ZW50OkNuKHt9LGUuZWxlbWVudHMse2dyb3VwUHJvZmlsZTplLmdyb3VwUHJvZmlsZX0pfSk6NT09PXQ/e3R5cGU6WW4uTVNHX0dSUF9TWVNfTk9USUNFLGNvbnRlbnQ6Q24oe30sZS5lbGVtZW50cyx7Z3JvdXBQcm9maWxlOmUuZ3JvdXBQcm9maWxlfSl9OnRoaXMuX2dldE1vZHVsZShobCkucGFyc2VFbGVtZW50cyhlLmVsZW1lbnRzLGUuZnJvbSl9fSx7a2V5OlwicGFja0NvbnZlcnNhdGlvbk9wdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgTWFwLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89ZVtuXSxyPW8uY29udmVyc2F0aW9uSUQ7aWYodC5oYXMocikpe3ZhciBhPXQuZ2V0KHIpO2EubGFzdE1lc3NhZ2U9byxcImluXCI9PT1vLmZsb3cmJmEudW5yZWFkQ291bnQrK31lbHNlIHQuc2V0KHIse2NvbnZlcnNhdGlvbklEOm8uY29udmVyc2F0aW9uSUQsdW5yZWFkQ291bnQ6XCJvdXRcIj09PW8uZmxvdz8wOjEsdHlwZTpvLmNvbnZlcnNhdGlvblR5cGUsc3ViVHlwZTpvLmNvbnZlcnNhdGlvblN1YlR5cGUsbGFzdE1lc3NhZ2U6b30pfXJldHVybiBVbih0LnZhbHVlcygpKX19LHtrZXk6XCJfdXBkYXRlTWVtYmVyQ291bnRCeUdyb3VwVGlwc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBQcm9maWxlLmdyb3VwSUQsbj1lLmVsZW1lbnRzLm9ubGluZU1lbWJlckluZm8sbz12b2lkIDA9PT1uP3ZvaWQgMDpuO2lmKCFKYyhvKSl7dmFyIHI9by5vbmxpbmVNZW1iZXJOdW0sYT12b2lkIDA9PT1yPzA6cixzPW8uZXhwaXJlVGltZSxpPXZvaWQgMD09PXM/dGhpcy5ERUZBVUxUX0VYUElSRV9USU1FOnMsYz10aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5nZXQodCl8fHt9LHU9RGF0ZS5ub3coKTtKYyhjKT9PYmplY3QuYXNzaWduKGMse2xhc3RSZXFUaW1lOjAsbGFzdFN5bmNUaW1lOjAsbGF0ZXN0VXBkYXRlVGltZTp1LG1lbWJlckNvdW50OmEsZXhwaXJlVGltZTppfSk6KGMubGF0ZXN0VXBkYXRlVGltZT11LGMubWVtYmVyQ291bnQ9YSksUWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl91cGRhdGVNZW1iZXJDb3VudEJ5R3JvdXBUaXBzIGluZm86XCIpLGMpLHRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLnNldCh0LGMpfX19LHtrZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5oYXMoZSkpe3ZhciB0PXRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5nZXQoZSk7dC5pc1J1bm5pbmcoKXx8dC5zdGFydCgpfWVsc2V7dmFyIG49bmV3IGhtKHttYW5hZ2VyOnRoaXMsZ3JvdXBJRDplLG9uSW5pdDp0aGlzLl91cGRhdGVSZXF1ZXN0RGF0YS5iaW5kKHRoaXMpLG9uU3VjY2Vzczp0aGlzLl9oYW5kbGVTdWNjZXNzLmJpbmQodGhpcyksb25GYWlsOnRoaXMuX2hhbmRsZUZhaWx1cmUuYmluZCh0aGlzKX0pO24uc3RhcnQoKSx0aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAuc2V0KGUsbiksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zdGFydCBncm91cElEOlwiKS5jb25jYXQoZSkpfX19LHtrZXk6XCJoYW5kbGVKb2luUmVzdWx0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5fcHJlQ2hlY2soKS50aGVuKChmdW5jdGlvbigpe3ZhciBuPWUubG9uZ1BvbGxpbmdLZXksbz1lLmdyb3VwLHI9by5ncm91cElEO3JldHVybiB0Ll9qb2luZWRHcm91cE1hcC5zZXQocixvKSx0Ll9ncm91cE1vZHVsZS51cGRhdGVHcm91cE1hcChbb10pLHQuX2dyb3VwTW9kdWxlLmRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbShyKSx0Ll9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKSxnYyhuKT9rXyh7c3RhdHVzOnJjLGdyb3VwOm99KTpQcm9taXNlLnJlc29sdmUoKX0pKX19LHtrZXk6XCJzdGFydFJ1bkxvb3BcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLmhhbmRsZUpvaW5SZXN1bHQoZSkudGhlbigoZnVuY3Rpb24oKXt2YXIgbj1lLmxvbmdQb2xsaW5nS2V5LG89ZS5ncm91cCxyPW8uZ3JvdXBJRDtyZXR1cm4gdC5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLnNldChyLHtrZXk6bixzdGFydFNlcTowfSksdC5zdGFydChyKSx0Ll9ncm91cE1vZHVsZS5pc0xvZ2dlZEluKCk/a18oe3N0YXR1czpyYyxncm91cDpvfSk6a18oe3N0YXR1czpyY30pfSkpfX0se2tleTpcIl9wcmVDaGVja1wiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5fZ2V0TW9kdWxlKGxsKS5pc1VubGltaXRlZEFWQ2hhdFJvb20oKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7aWYoIXRoaXMuaGFzSm9pbmVkQVZDaGF0Um9vbSgpKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt2YXIgZT1Qbih0aGlzLl9qb2luZWRHcm91cE1hcC5lbnRyaWVzKCkubmV4dCgpLnZhbHVlLDIpLHQ9ZVswXSxuPWVbMV07aWYodGhpcy5fZ3JvdXBNb2R1bGUuaXNMb2dnZWRJbigpKXtpZighKG4uc2VsZkluZm8ucm9sZT09PVluLkdSUF9NQlJfUk9MRV9PV05FUnx8bi5vd25lcklEPT09dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSkpcmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLnF1aXRHcm91cCh0KTt0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKHQpfWVsc2UgdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbih0KTtyZXR1cm4gdGhpcy5yZXNldCh0KSxQcm9taXNlLnJlc29sdmUoKX19LHtrZXk6XCJqb2luV2l0aG91dEF1dGhcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmpvaW5XaXRob3V0QXV0aFwiKSxyPW5ldyBkcChmZyk7cmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpyZCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIGE9ZS5kYXRhLmxvbmdQb2xsaW5nS2V5O2lmKHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PVBuKGUsMiksbz0odFswXSx0WzFdKTtyLnNldE5ldHdvcmtUeXBlKG8pLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIGxvbmdQb2xsaW5nS2V5OlwiKS5jb25jYXQoYSkpLmVuZCghMCl9KSksZ2MoYSkpcmV0dXJuIE9fKG5ldyBBXyh7Y29kZTp6ZC5DQU5OT1RfSk9JTl9OT05fQVZDSEFUUk9PTV9XSVRIT1VUX0xPR0lOLG1lc3NhZ2U6SmQuQ0FOTk9UX0pPSU5fTk9OX0FWQ0hBVFJPT01fV0lUSE9VVF9MT0dJTn0pKTtRaS5sb2coXCJcIi5jb25jYXQobyxcIiBvay4gZ3JvdXBJRDpcIikuY29uY2F0KG4pKSx0Ll9nZXRNb2R1bGUodWwpLnNldENvbXBsZXRlZChcIlwiLmNvbmNhdChZbi5DT05WX0dST1VQKS5jb25jYXQobikpO3ZhciBzPW5ldyB0bSh7Z3JvdXBJRDpufSk7cmV0dXJuIHQuc3RhcnRSdW5Mb29wKHtncm91cDpzLGxvbmdQb2xsaW5nS2V5OmF9KSx5Xyh7c3RhdHVzOnJjfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBRaS5lcnJvcihcIlwiLmNvbmNhdChvLFwiIGZhaWxlZC4gZ3JvdXBJRDpcIikuY29uY2F0KG4sXCIgZXJyb3I6XCIpLGUpLHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBvPVBuKHQsMiksYT1vWzBdLHM9b1sxXTtyLnNldEVycm9yKGUsYSxzKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobikpLmVuZCghMCl9KSksT18oZSl9KSkuZmluYWxseSgoZnVuY3Rpb24oKXt0Ll9ncm91cE1vZHVsZS5nZXRNb2R1bGUocGwpLnJlcG9ydEF0T25jZSgpfSkpfX0se2tleTpcImdldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5nZXQoZSl8fHt9LG49RGF0ZS5ub3coKTtyZXR1cm4gSmModCl8fG4tdC5sYXN0U3luY1RpbWU+MWUzKnQuZXhwaXJlVGltZSYmbi10LmxhdGVzdFVwZGF0ZVRpbWU+MWU0JiZuLXQubGFzdFJlcVRpbWU+M2UzPyh0Lmxhc3RSZXFUaW1lPW4sdGhpcy5fb25saW5lTWVtYmVyQ291bnRNYXAuc2V0KGUsdCksdGhpcy5fZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudChlKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4geV8oe21lbWJlckNvdW50OmUubWVtYmVyQ291bnR9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIE9fKGUpfSkpKTprXyh7bWVtYmVyQ291bnQ6dC5tZW1iZXJDb3VudH0pfX0se2tleTpcIl9nZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwiKTtyZXR1cm4gdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOklkLHJlcXVlc3REYXRhOntncm91cElEOmV9fSkudGhlbigoZnVuY3Rpb24obyl7dmFyIHI9dC5fb25saW5lTWVtYmVyQ291bnRNYXAuZ2V0KGUpfHx7fSxhPW8uZGF0YSxzPWEub25saW5lTWVtYmVyTnVtLGk9dm9pZCAwPT09cz8wOnMsYz1hLmV4cGlyZVRpbWUsdT12b2lkIDA9PT1jP3QuREVGQVVMVF9FWFBJUkVfVElNRTpjO1FpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBncm91cElEOlwiKS5jb25jYXQoZSxcIiBtZW1iZXJDb3VudDpcIikuY29uY2F0KGksXCIgZXhwaXJlVGltZTpcIikuY29uY2F0KHUpKTt2YXIgbD1EYXRlLm5vdygpO3JldHVybiBKYyhyKSYmKHIubGFzdFJlcVRpbWU9bCksdC5fb25saW5lTWVtYmVyQ291bnRNYXAuc2V0KGUsT2JqZWN0LmFzc2lnbihyLHtsYXN0U3luY1RpbWU6bCxsYXRlc3RVcGRhdGVUaW1lOmwsbWVtYmVyQ291bnQ6aSxleHBpcmVUaW1lOnV9KSkse21lbWJlckNvdW50Oml9fSkpLmNhdGNoKChmdW5jdGlvbihvKXtyZXR1cm4gUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLG8pLG5ldyBkcChOZykuc2V0Q29kZShvLmNvZGUpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlLFwiIGVycm9yOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobykpKS5zZXROZXR3b3JrVHlwZSh0Ll9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxQcm9taXNlLnJlamVjdChvKX0pKX19LHtrZXk6XCJfb25Hcm91cEF0dHJpYnV0ZXNVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncm91cFByb2ZpbGUuZ3JvdXBJRCxuPWUuZWxlbWVudHMsbz1uLm9wZXJhdGlvblR5cGUscj1uLm5ld0dyb3VwUHJvZmlsZTtpZig2PT09byl7dmFyIGE9KHZvaWQgMD09PXI/dm9pZCAwOnIpLmdyb3VwQXR0cmlidXRlT3B0aW9uO0pjKGEpfHx0aGlzLl9ncm91cE1vZHVsZS5vbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWQoe2dyb3VwSUQ6dCxncm91cEF0dHJpYnV0ZU9wdGlvbjphfSl9fX0se2tleTpcIl9nZXRNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGUpfX0se2tleTpcInNldFBvbGxpbmdJbnRlcnZhbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2djKGUpfHxjYyhlKXx8KHRoaXMuX3BvbGxpbmdJbnRlcnZhbD1wYXJzZUludChlLDEwKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldFBvbGxpbmdJbnRlcnZhbCB2YWx1ZTpcIikuY29uY2F0KHRoaXMuX3BvbGxpbmdJbnRlcnZhbCkpKX19LHtrZXk6XCJnZXRQb2xsaW5nSW50ZXJ2YWxcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2xsaW5nSW50ZXJ2YWx9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihlKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0IGdyb3VwSUQ6XCIpLmNvbmNhdChlKSk7dmFyIHQ9dGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmdldChlKTt0JiZ0LnN0b3AoKSx0aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAuZGVsZXRlKGUpLHRoaXMuX2pvaW5lZEdyb3VwTWFwLmRlbGV0ZShlKSx0aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXAuZGVsZXRlKGUpLHRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLmRlbGV0ZShlKX1lbHNle1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXQgYWxsXCIpKTt2YXIgbixvPUJuKHRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC52YWx1ZXMoKSk7dHJ5e2ZvcihvLnMoKTshKG49by5uKCkpLmRvbmU7KXtuLnZhbHVlLnN0b3AoKX19Y2F0Y2gocil7by5lKHIpfWZpbmFsbHl7by5mKCl9dGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmNsZWFyKCksdGhpcy5fam9pbmVkR3JvdXBNYXAuY2xlYXIoKSx0aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXAuY2xlYXIoKSx0aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5jbGVhcigpfXRoaXMuc2VxdWVuY2VzTGlua2VkTGlzdC5yZXNldCgpLHRoaXMubWVzc2FnZUlETGlua2VkTGlzdC5yZXNldCgpLHRoaXMucmVjZWl2ZWRNZXNzYWdlQ291bnQ9MCx0aGlzLl9yZXBvcnRNZXNzYWdlU3RhY2tlZENvdW50PTAsdGhpcy5fcG9sbGluZ0ludGVydmFsPXRoaXMuREVGQVVMVF9QT0xMSU5HX0lOVEVSVkFMfX1dKSxlfSgpLG1tPTEsdm09MTUsTW09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fZ3JvdXBNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJHcm91cFN5c3RlbU5vdGljZUhhbmRsZXJcIix0aGlzLnBlbmRlbmN5TWFwPW5ldyBNYXB9cmV0dXJuIEVuKGUsW3trZXk6XCJvbk5ld0dyb3VwU3lzdGVtTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdCxuPWUuaXNTeW5jaW5nRW5kZWQsbz1lLmlzSW5zdGFudE1lc3NhZ2U7UWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUmVjZWl2ZVN5c3RlbU5vdGljZSBjb3VudDpcIikuY29uY2F0KHQubGVuZ3RoKSk7dmFyIHI9dGhpcy5uZXdTeXN0ZW1Ob3RpY2VTdG9yZWRBbmRTdW1tYXJ5KHtub3RpZmllc0xpc3Q6dCxpc0luc3RhbnRNZXNzYWdlOm99KSxhPXIuZXZlbnREYXRhTGlzdCxzPXIucmVzdWx0O2EubGVuZ3RoPjAmJih0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUodWwpLm9uTmV3TWVzc2FnZSh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6YSxpc0luc3RhbnRNZXNzYWdlOm99KSx0aGlzLl9vblJlY2VpdmVkR3JvdXBTeXN0ZW1Ob3RpY2Uoe3Jlc3VsdDpzLGlzSW5zdGFudE1lc3NhZ2U6b30pKTtvP3MubGVuZ3RoPjAmJnRoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KFduLk1FU1NBR0VfUkVDRUlWRUQscyk6ITA9PT1uJiZ0aGlzLl9jbGVhckdyb3VwU3lzdGVtTm90aWNlKCl9fSx7a2V5OlwibmV3U3lzdGVtTm90aWNlU3RvcmVkQW5kU3VtbWFyeVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm90aWZpZXNMaXN0LG49ZS5pc0luc3RhbnRNZXNzYWdlLG89bnVsbCxyPXQubGVuZ3RoLGE9MCxzPVtdLGk9e2NvbnZlcnNhdGlvbklEOlluLkNPTlZfU1lTVEVNLHVucmVhZENvdW50OjAsdHlwZTpZbi5DT05WX1NZU1RFTSxzdWJUeXBlOm51bGwsbGFzdE1lc3NhZ2U6bnVsbH07Zm9yKGE9MDthPHI7YSsrKXt2YXIgYz10W2FdO2lmKGMuZWxlbWVudHMub3BlcmF0aW9uVHlwZSE9PXZtKWMuY3VycmVudFVzZXI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSxjLmNvbnZlcnNhdGlvblR5cGU9WW4uQ09OVl9TWVNURU0sYy5jb252ZXJzYXRpb25JRD1Zbi5DT05WX1NZU1RFTSwobz1uZXcgTV8oYykpLnNldEVsZW1lbnQoe3R5cGU6WW4uTVNHX0dSUF9TWVNfTk9USUNFLGNvbnRlbnQ6Q24oe30sYy5lbGVtZW50cyx7Z3JvdXBQcm9maWxlOmMuZ3JvdXBQcm9maWxlfSl9KSxvLmlzU3lzdGVtTWVzc2FnZT0hMCwoMT09PW8uc2VxdWVuY2UmJjE9PT1vLnJhbmRvbXx8Mj09PW8uc2VxdWVuY2UmJjI9PT1vLnJhbmRvbSkmJihvLnNlcXVlbmNlPVNjKCksby5yYW5kb209U2MoKSxvLmdlbmVyYXRlTWVzc2FnZUlEKCksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5uZXdTeXN0ZW1Ob3RpY2VTdG9yZWRBbmRTdW1tYXJ5IHNlcXVlbmNlIGFuZCByYW5kb20gbWF5YmUgZHVwbGljYXRlZCwgcmVnZW5lcmF0ZS4gSUQ6XCIpLmNvbmNhdChvLklEKSkpLHRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZSh1bCkucHVzaEludG9Ob3RpY2VSZXN1bHQocyxvKSYmKG4/aS51bnJlYWRDb3VudCsrOm8uc2V0SXNSZWFkKCEwKSxpLnN1YlR5cGU9by5jb252ZXJzYXRpb25TdWJUeXBlKX1yZXR1cm4gaS5sYXN0TWVzc2FnZT1zW3MubGVuZ3RoLTFdLHtldmVudERhdGFMaXN0OnMubGVuZ3RoPjA/W2ldOltdLHJlc3VsdDpzfX19LHtrZXk6XCJfY2xlYXJHcm91cFN5c3RlbU5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmdldFBlbmRlbmN5TGlzdCgpLnRoZW4oKGZ1bmN0aW9uKHQpe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5wZW5kZW5jeU1hcC5zZXQoXCJcIi5jb25jYXQodC5mcm9tLFwiX1wiKS5jb25jYXQodC5ncm91cElELFwiX1wiKS5jb25jYXQodC50byksdCl9KSk7dmFyIG49ZS5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKHVsKS5nZXRMb2NhbE1lc3NhZ2VMaXN0KFluLkNPTlZfU1lTVEVNKSxvPVtdO24uZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49dC5wYXlsb2FkLHI9bi5vcGVyYXRvcklELGE9bi5vcGVyYXRpb25UeXBlLHM9bi5ncm91cFByb2ZpbGU7aWYoYT09PW1tKXt2YXIgaT1cIlwiLmNvbmNhdChyLFwiX1wiKS5jb25jYXQocy5ncm91cElELFwiX1wiKS5jb25jYXQocy50byksYz1lLnBlbmRlbmN5TWFwLmdldChpKTtjJiZjYyhjLmhhbmRsZWQpJiYwIT09Yy5oYW5kbGVkJiZvLnB1c2godCl9fSkpLGUuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2Uoe21lc3NhZ2VMaXN0Om99KX0pKX19LHtrZXk6XCJkZWxldGVHcm91cFN5c3RlbU5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2VcIik7cmV0dXJuIHBjKGUubWVzc2FnZUxpc3QpJiYwIT09ZS5tZXNzYWdlTGlzdC5sZW5ndGg/KFFpLmxvZyhcIlwiLmNvbmNhdChuKStlLm1lc3NhZ2VMaXN0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuSUR9KSkpLHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp2ZCxyZXF1ZXN0RGF0YTp7bWVzc2FnZUxpc3RUb0RlbGV0ZTplLm1lc3NhZ2VMaXN0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2Zyb206WW4uQ09OVl9TWVNURU0sbWVzc2FnZVNlcTplLmNsaWVudFNlcXVlbmNlLG1lc3NhZ2VSYW5kb206ZS5yYW5kb219fSkpfX0pLnRoZW4oKGZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpO3ZhciBvPXQuX2dyb3VwTW9kdWxlLmdldE1vZHVsZSh1bCk7cmV0dXJuIGUubWVzc2FnZUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5kZWxldGVMb2NhbE1lc3NhZ2UoZSl9KSkseV8oKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZXJyb3I6XCIpLGUpLE9fKGUpfSkpKTprXygpfX0se2tleTpcImdldFBlbmRlbmN5TGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTptZCxyZXF1ZXN0RGF0YTp7c3RhcnRUaW1lOmUmJmUuc3RhcnRUaW1lP2Uuc3RhcnRUaW1lOjAsbGltaXQ6ZSYmZS5saW1pdD9lLmxpbWl0OjEwLGhhbmRsZUFjY291bnQ6dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKX19KS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1lLmRhdGEucGVuZGVuY3lMaXN0O3JldHVybiAwIT09ZS5kYXRhLm5leHRTdGFydFRpbWU/dC5nZXRQZW5kZW5jeUxpc3Qoe3N0YXJ0VGltZTplLmRhdGEubmV4dFN0YXJ0VGltZX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybltdLmNvbmNhdChVbihuKSxVbihlKSl9KSk6bn0pKX19LHtrZXk6XCJfb25SZWNlaXZlZEdyb3VwU3lzdGVtTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUucmVzdWx0O2UuaXNJbnN0YW50TWVzc2FnZSYmbi5mb3JFYWNoKChmdW5jdGlvbihlKXtzd2l0Y2goZS5wYXlsb2FkLm9wZXJhdGlvblR5cGUpe2Nhc2UgMTpicmVhaztjYXNlIDI6dC5fb25BcHBseUdyb3VwUmVxdWVzdEFncmVlZChlKTticmVhaztjYXNlIDM6YnJlYWs7Y2FzZSA0OnQuX29uTWVtYmVyS2lja2VkKGUpO2JyZWFrO2Nhc2UgNTp0Ll9vbkdyb3VwRGlzbWlzc2VkKGUpO2JyZWFrO2Nhc2UgNjpicmVhaztjYXNlIDc6dC5fb25JbnZpdGVHcm91cChlKTticmVhaztjYXNlIDg6dC5fb25RdWl0R3JvdXAoZSk7YnJlYWs7Y2FzZSA5OnQuX29uU2V0TWFuYWdlcihlKTticmVhaztjYXNlIDEwOnQuX29uRGVsZXRlTWFuYWdlcihlKX19KSl9fSx7a2V5OlwiX29uQXBwbHlHcm91cFJlcXVlc3RBZ3JlZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElEO3RoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAobil8fHRoaXMuX2dyb3VwTW9kdWxlLmdldEdyb3VwUHJvZmlsZSh7Z3JvdXBJRDpufSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhLmdyb3VwO24mJih0Ll9ncm91cE1vZHVsZS51cGRhdGVHcm91cE1hcChbbl0pLHQuX2dyb3VwTW9kdWxlLmVtaXRHcm91cExpc3RVcGRhdGUoKSl9KSl9fSx7a2V5OlwiX29uTWVtYmVyS2lja2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElEO3RoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAodCkmJnRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24odCl9fSx7a2V5OlwiX29uR3JvdXBEaXNtaXNzZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQ7dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cCh0KSYmdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbih0KTt2YXIgbj10aGlzLl9ncm91cE1vZHVsZS5fQVZDaGF0Um9vbUhhbmRsZXI7biYmbi5jaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEKHQpJiZuLnJlc2V0KHQpfX0se2tleTpcIl9vbkludml0ZUdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pfHx0aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6bn0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YS5ncm91cDtuJiYodC5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAoW25dKSx0Ll9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCkpfSkpfX0se2tleTpcIl9vblF1aXRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKHQpJiZ0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKHQpfX0se2tleTpcIl9vblNldE1hbmFnZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLG49dC50byxvPXQuZ3JvdXBJRCxyPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShjbCkuZ2V0TG9jYWxHcm91cE1lbWJlckluZm8obyxuKTtyJiZyLnVwZGF0ZVJvbGUoWW4uR1JQX01CUl9ST0xFX0FETUlOKX19LHtrZXk6XCJfb25EZWxldGVNYW5hZ2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZSxuPXQudG8sbz10Lmdyb3VwSUQscj10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoY2wpLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKG8sbik7ciYmci51cGRhdGVSb2xlKFluLkdSUF9NQlJfUk9MRV9NRU1CRVIpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnBlbmRlbmN5TWFwLmNsZWFyKCl9fV0pLGV9KCkseW09ZnVuY3Rpb24oZSl7QW4obixlKTt2YXIgdD1HbihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiR3JvdXBNb2R1bGVcIixvLl9jb21tb25Hcm91cEhhbmRsZXI9bnVsbCxvLl9BVkNoYXRSb29tSGFuZGxlcj1udWxsLG8uX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlcj1udWxsLG8uX2NvbW1vbkdyb3VwSGFuZGxlcj1uZXcgZG0oYm4obykpLG8uX2dyb3VwQXR0cmlidXRlc0hhbmRsZXI9bmV3IGdtKGJuKG8pKSxvLl9BVkNoYXRSb29tSGFuZGxlcj1uZXcgX20oYm4obykpLG8uX2dyb3VwVGlwc0hhbmRsZXI9bmV3IGltKGJuKG8pKSxvLl9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXI9bmV3IE1tKGJuKG8pKSxvLmdyb3VwTWFwPW5ldyBNYXAsby5fdW5qb2luZWRBVkNoYXRSb29tTGlzdD1uZXcgTWFwLG8uX3JlY2VpcHREZXRhaWxDb21wbGV0ZU1hcD1uZXcgTWFwLG8uZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihLXyxvLl9vbkNsb3VkQ29uZmlnVXBkYXRlZCxibihvKSksb31yZXR1cm4gRW4obixbe2tleTpcIl9vbkNsb3VkQ29uZmlnVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRDbG91ZENvbmZpZyhcInBvbGxpbmdfaW50ZXJ2YWxcIik7dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXImJnRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLnNldFBvbGxpbmdJbnRlcnZhbChlKX19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmlzTG9nZ2VkSW4oKSYmKHRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5vbkNoZWNrVGltZXIoZSksdGhpcy5fZ3JvdXBUaXBzSGFuZGxlci5vbkNoZWNrVGltZXIoZSkpfX0se2tleTpcImd1YXJkRm9yQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoZS5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9HUk9VUCl7dmFyIG49ZS50bztyZXR1cm4gdGhpcy5oYXNMb2NhbEdyb3VwKG4pP2tfKCk6dGhpcy5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6bn0pLnRoZW4oKGZ1bmN0aW9uKG8pe3ZhciByPW8uZGF0YS5ncm91cC50eXBlO2lmKFFpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZ3VhcmRGb3JBVkNoYXRSb29tLiBncm91cElEOlwiKS5jb25jYXQobixcIiB0eXBlOlwiKS5jb25jYXQocikpLHI9PT1Zbi5HUlBfQVZDSEFUUk9PTSl7dmFyIGE9XCJ1c2VySWQ6XCIuY29uY2F0KGUuZnJvbSxcIiDmnKrliqDlhaXnvqQgZ3JvdXBJRDpcIikuY29uY2F0KG4sXCLjgILlj5Hmtojmga/liY3lhYjkvb/nlKggam9pbkdyb3VwIOaOpeWPo+eUs+ivt+WKoOe+pO+8jOivpue7huivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjam9pbkdyb3VwXCIpO3JldHVybiBRaS53YXJuKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5ndWFyZEZvckFWQ2hhdFJvb20gc2VuZE1lc3NhZ2Ugbm90IGFsbG93ZWQuIFwiKS5jb25jYXQoYSkpLE9fKG5ldyBBXyh7Y29kZTp6ZC5NRVNTQUdFX1NFTkRfRkFJTCxtZXNzYWdlOmEsZGF0YTp7bWVzc2FnZTplfX0pKX1yZXR1cm4ga18oKX0pKX1yZXR1cm4ga18oKX19LHtrZXk6XCJjaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLl9BVkNoYXRSb29tSGFuZGxlciYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKX19LHtrZXk6XCJvbk5ld0dyb3VwTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2NvbW1vbkdyb3VwSGFuZGxlciYmdGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyLm9uTmV3R3JvdXBNZXNzYWdlKGUpfX0se2tleTpcInVwZGF0ZU5leHRNZXNzYWdlU2VxXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztwYyhlKSYmZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLmNvbnZlcnNhdGlvbklELnJlcGxhY2UoWW4uQ09OVl9HUk9VUCxcIlwiKTt0Lmdyb3VwTWFwLmhhcyhuKSYmKHQuZ3JvdXBNYXAuZ2V0KG4pLm5leHRNZXNzYWdlU2VxPWUubGFzdE1lc3NhZ2Uuc2VxdWVuY2UrMSl9KSl9fSx7a2V5Olwib25OZXdHcm91cFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9ncm91cFRpcHNIYW5kbGVyJiZ0aGlzLl9ncm91cFRpcHNIYW5kbGVyLm9uTmV3R3JvdXBUaXBzKGUpfX0se2tleTpcIm9uR3JvdXBNZXNzYWdlUmV2b2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2NvbW1vbkdyb3VwSGFuZGxlciYmdGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyLm9uR3JvdXBNZXNzYWdlUmV2b2tlZChlKX19LHtrZXk6XCJvbk5ld0dyb3VwU3lzdGVtTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyJiZ0aGlzLl9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXIub25OZXdHcm91cFN5c3RlbU5vdGljZShlKX19LHtrZXk6XCJvbkdyb3VwTWVzc2FnZVJlYWROb3RpY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5lbGVtZW50cy5ncm91cE1lc3NhZ2VSZWFkTm90aWNlO2lmKCFnYyhuKSl7dmFyIG89dC5nZXRNb2R1bGUodWwpO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5ncm91cElELHI9ZS5sYXN0TWVzc2FnZVNlcTtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIub25Hcm91cE1lc3NhZ2VSZWFkTm90aWNlIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIGxhc3RNZXNzYWdlU2VxOlwiKS5jb25jYXQocikpO3ZhciBhPVwiXCIuY29uY2F0KFluLkNPTlZfR1JPVVApLmNvbmNhdChuKTtvLnVwZGF0ZUlzUmVhZEFmdGVyUmVhZFJlcG9ydCh7Y29udmVyc2F0aW9uSUQ6YSxsYXN0TWVzc2FnZVNlcTpyfSksby51cGRhdGVVbnJlYWRDb3VudChhKX0pKX19KSl9fSx7a2V5Olwib25SZWFkUmVjZWlwdExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblJlYWRSZWNlaXB0TGlzdCBvcHRpb25zOlwiKSxKU09OLnN0cmluZ2lmeShlKSksZS5kYXRhTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLmdyb3VwUHJvZmlsZSxvPWUuZWxlbWVudHMscj1uLmdyb3VwSUQsYT10LmdldE1vZHVsZSh1bCkscz1vLnJlYWRSZWNlaXB0TGlzdDthLnVwZGF0ZVJlYWRSZWNlaXB0SW5mbyhyLHMpfSkpfX0se2tleTpcImRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyJiZ0aGlzLl9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXIuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2UoZSl9fSx7a2V5OlwiaW5pdEdyb3VwTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ncm91cE1hcC5zZXQoZS5ncm91cElELG5ldyB0bShlKSl9fSx7a2V5OlwiZGVsZXRlR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdyb3VwTWFwLmRlbGV0ZShlKX19LHtrZXk6XCJ1cGRhdGVHcm91cE1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Lmdyb3VwTWFwLmhhcyhlLmdyb3VwSUQpP3QuZ3JvdXBNYXAuZ2V0KGUuZ3JvdXBJRCkudXBkYXRlR3JvdXAoZSk6dC5ncm91cE1hcC5zZXQoZS5ncm91cElELG5ldyB0bShlKSl9KSk7dmFyIG4sbz10aGlzLmdldE15VXNlcklEKCkscj1Cbih0aGlzLmdyb3VwTWFwKTt0cnl7Zm9yKHIucygpOyEobj1yLm4oKSkuZG9uZTspe1BuKG4udmFsdWUsMilbMV0uc2VsZkluZm8udXNlcklEPW99fWNhdGNoKGEpe3IuZShhKX1maW5hbGx5e3IuZigpfXRoaXMuX3NldFN0b3JhZ2VHcm91cExpc3QoKX19LHtrZXk6XCJnZXRTdG9yYWdlR3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoZGwpLmdldEl0ZW0oXCJncm91cE1hcFwiKX19LHtrZXk6XCJfc2V0U3RvcmFnZUdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRMb2NhbEdyb3VwTGlzdCgpLmZpbHRlcigoZnVuY3Rpb24oZSl7dmFyIHQ9ZS50eXBlO3JldHVybiF3Yyh0KX0pKS5zbGljZSgwLDIwKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntncm91cElEOmUuZ3JvdXBJRCxuYW1lOmUubmFtZSxhdmF0YXI6ZS5hdmF0YXIsdHlwZTplLnR5cGV9fSkpO3RoaXMuZ2V0TW9kdWxlKGRsKS5zZXRJdGVtKFwiZ3JvdXBNYXBcIixlKX19LHtrZXk6XCJnZXRHcm91cE1hcFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3JvdXBNYXB9fSx7a2V5OlwiZ2V0TG9jYWxHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBVbih0aGlzLmdyb3VwTWFwLnZhbHVlcygpKX19LHtrZXk6XCJnZXRMb2NhbEdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdyb3VwTWFwLmdldChlKX19LHtrZXk6XCJzb3J0TG9jYWxHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVVuKHRoaXMuZ3JvdXBNYXApLmZpbHRlcigoZnVuY3Rpb24oZSl7dmFyIHQ9UG4oZSwyKTt0WzBdO3JldHVybiFKYyh0WzFdLmxhc3RNZXNzYWdlKX0pKTtlLnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRbMV0ubGFzdE1lc3NhZ2UubGFzdFRpbWUtZVsxXS5sYXN0TWVzc2FnZS5sYXN0VGltZX0pKSx0aGlzLmdyb3VwTWFwPW5ldyBNYXAoVW4oZSkpfX0se2tleTpcInVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jb21tb25Hcm91cEhhbmRsZXImJnRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5oYW5kbGVVcGRhdGVHcm91cExhc3RNZXNzYWdlKGUpfX0se2tleTpcImVtaXRHcm91cExpc3RVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF0sdD0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLG49dGhpcy5nZXRMb2NhbEdyb3VwTGlzdCgpO2lmKGUmJnRoaXMuZW1pdE91dGVyRXZlbnQoV24uR1JPVVBfTElTVF9VUERBVEVEKSx0KXt2YXIgbz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG4pKSxyPXRoaXMuZ2V0TW9kdWxlKHVsKTtyLnVwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShvKX19fSx7a2V5OlwicGF0Y2hHcm91cE1lc3NhZ2VSZW1pbmRUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldExvY2FsR3JvdXBMaXN0KCksdD10aGlzLmdldE1vZHVsZSh1bCksbj0wO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ITA9PT10LnBhdGNoTWVzc2FnZVJlbWluZFR5cGUoe0lEOmUuZ3JvdXBJRCxpc0MyQ0NvbnZlcnNhdGlvbjohMSxtZXNzYWdlUmVtaW5kVHlwZTplLnNlbGZJbmZvLm1lc3NhZ2VSZW1pbmRUeXBlfSkmJihuKz0xKX0pKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnBhdGNoR3JvdXBNZXNzYWdlUmVtaW5kVHlwZSBjb3VudDpcIikuY29uY2F0KG4pKX19LHtrZXk6XCJyZWNvbXB1dGVVbnJlYWRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRMb2NhbEdyb3VwTGlzdCgpLHQ9dGhpcy5nZXRNb2R1bGUodWwpO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5ncm91cElELG89ZS5zZWxmSW5mbyxyPW8uZXhjbHVkZWRVbnJlYWRTZXF1ZW5jZUxpc3QsYT1vLnJlYWRlZFNlcXVlbmNlO2lmKHBjKHIpKXt2YXIgcz0wO3IuZm9yRWFjaCgoZnVuY3Rpb24odCl7dD49YSYmdDw9ZS5uZXh0TWVzc2FnZVNlcS0xJiYocys9MSl9KSkscz49MSYmdC5yZWNvbXB1dGVHcm91cFVucmVhZENvdW50KHtjb252ZXJzYXRpb25JRDpcIlwiLmNvbmNhdChZbi5DT05WX0dST1VQKS5jb25jYXQobiksY291bnQ6c30pfX0pKX19LHtrZXk6XCJnZXRNeU5hbWVDYXJkQnlHcm91cElEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShlKTtyZXR1cm4gdD90LnNlbGZJbmZvLm5hbWVDYXJkOlwiXCJ9fSx7a2V5OlwiZ2V0R3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlcj90aGlzLl9jb21tb25Hcm91cEhhbmRsZXIuZ2V0R3JvdXBMaXN0KGUpOmtfKCl9fSx7a2V5OlwiZ2V0R3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPW5ldyBkcCh1Zyksbz1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBQcm9maWxlXCIpLHI9ZS5ncm91cElELGE9ZS5ncm91cEN1c3RvbUZpZWxkRmlsdGVyO1FpLmxvZyhcIlwiLmNvbmNhdChvLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChyKSk7dmFyIHM9e2dyb3VwSURMaXN0OltyXSxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjpbXCJUeXBlXCIsXCJOYW1lXCIsXCJJbnRyb2R1Y3Rpb25cIixcIk5vdGlmaWNhdGlvblwiLFwiRmFjZVVybFwiLFwiT3duZXJfQWNjb3VudFwiLFwiQ3JlYXRlVGltZVwiLFwiSW5mb1NlcVwiLFwiTGFzdEluZm9UaW1lXCIsXCJMYXN0TXNnVGltZVwiLFwiTWVtYmVyTnVtXCIsXCJNYXhNZW1iZXJOdW1cIixcIkFwcGx5Sm9pbk9wdGlvblwiLFwiTmV4dE1zZ1NlcVwiLFwiU2h1dFVwQWxsTWVtYmVyXCJdLGdyb3VwQ3VzdG9tRmllbGRGaWx0ZXI6YSxtZW1iZXJJbmZvRmlsdGVyOltcIlJvbGVcIixcIkpvaW5UaW1lXCIsXCJNc2dTZXFcIixcIk1zZ0ZsYWdcIixcIk5hbWVDYXJkXCJdfX07cmV0dXJuIHRoaXMuZ2V0R3JvdXBQcm9maWxlQWR2YW5jZShzKS50aGVuKChmdW5jdGlvbihlKXt2YXIgYSxzPWUuZGF0YSxpPXMuc3VjY2Vzc0dyb3VwTGlzdCxjPXMuZmFpbHVyZUdyb3VwTGlzdDtyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KG8sXCIgb2tcIikpLGMubGVuZ3RoPjA/T18oY1swXSk6KHdjKGlbMF0udHlwZSkmJiF0Lmhhc0xvY2FsR3JvdXAocik/YT1uZXcgdG0oaVswXSk6KHQudXBkYXRlR3JvdXBNYXAoaSksYT10LmdldExvY2FsR3JvdXBQcm9maWxlKHIpKSx0LmdldE1vZHVsZSh1bCkudXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKFthXSksbi5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChyLFwiIHR5cGU6XCIpLmNvbmNhdChhLnR5cGUsXCIgbXV0ZUFsbE1lbWJlcnM6XCIpLmNvbmNhdChhLm11dGVBbGxNZW1iZXJzLFwiIG93bmVySUQ6XCIpLmNvbmNhdChhLm93bmVySUQpKS5lbmQoKSx5Xyh7Z3JvdXA6YX0pKX0pKS5jYXRjaCgoZnVuY3Rpb24ocil7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG89UG4odCwyKSxhPW9bMF0scz1vWzFdO24uc2V0RXJyb3IocixhLHMpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlLmdyb3VwSUQpKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChvLFwiIGZhaWxlZC4gZXJyb3I6XCIpLHIpLE9fKHIpfSkpfX0se2tleTpcImdldEdyb3VwUHJvZmlsZUFkdmFuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwUHJvZmlsZUFkdmFuY2VcIiksbz1lLmdyb3VwSURMaXN0O3BjKG8pJiZvLmxlbmd0aD41MCYmKFFpLndhcm4oXCJcIi5jb25jYXQobixcIiDojrflj5bnvqTotYTmlpnnmoTmlbDph4/kuI3og73otoXov4c1MOS4qlwiKSksby5sZW5ndGg9NTApO3ZhciByPVtdLGE9W107by5mb3JFYWNoKChmdW5jdGlvbihlKXtHYyh7Z3JvdXBJRDplfSk/YS5wdXNoKGUpOnIucHVzaChlKX0pKTt2YXIgcz1bXTtpZihyLmxlbmd0aD4wKXt2YXIgaT10aGlzLl9nZXRHcm91cFByb2ZpbGVBZHZhbmNlKENuKHt9LGUse2dyb3VwSURMaXN0OnJ9KSk7cy5wdXNoKGkpfWlmKGEubGVuZ3RoPjApe3ZhciBjPXRoaXMuX2dldEdyb3VwUHJvZmlsZUFkdmFuY2UoQ24oe30sZSx7Z3JvdXBJRExpc3Q6YSxyZWxheUZsYWc6ci5sZW5ndGg+MH0pKTtzLnB1c2goYyl9cmV0dXJuIFByb21pc2UuYWxsKHMpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W107cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5wdXNoLmFwcGx5KHQsVW4oZS5zdWNjZXNzR3JvdXBMaXN0KSksbi5wdXNoLmFwcGx5KG4sVW4oZS5mYWlsdXJlR3JvdXBMaXN0KSl9KSkseV8oe3N1Y2Nlc3NHcm91cExpc3Q6dCxmYWlsdXJlR3JvdXBMaXN0Om59KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIFFpLmVycm9yKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5fZ2V0R3JvdXBQcm9maWxlQWR2YW5jZSBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJfZ2V0R3JvdXBQcm9maWxlQWR2YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnJlbGF5RmxhZyxvPXZvaWQgMCE9PW4mJm4scj1MbihlLFtcInJlbGF5RmxhZ1wiXSk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlpsLHJlcXVlc3REYXRhOnJ9KS50aGVuKChmdW5jdGlvbihlKXtRaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLl9nZXRHcm91cFByb2ZpbGVBZHZhbmNlIG9rLlwiKSk7dmFyIG49ZS5kYXRhLmdyb3VwcztyZXR1cm57c3VjY2Vzc0dyb3VwTGlzdDpuLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGdjKGUuZXJyb3JDb2RlKXx8MD09PWUuZXJyb3JDb2RlfSkpLGZhaWx1cmVHcm91cExpc3Q6bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmVycm9yQ29kZSYmMCE9PWUuZXJyb3JDb2RlfSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBBXyh7Y29kZTplLmVycm9yQ29kZSxtZXNzYWdlOmUuZXJyb3JJbmZvLGRhdGE6e2dyb3VwSUQ6ZS5ncm91cElEfX0pfSkpfX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7cmV0dXJuIG8mJkdjKHtncm91cElEOmUuZ3JvdXBJRExpc3RbMF19KT97c3VjY2Vzc0dyb3VwTGlzdDpbXSxmYWlsdXJlR3JvdXBMaXN0OltdfTpPXyh0KX0pKX19LHtrZXk6XCJjcmVhdGVHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY3JlYXRlR3JvdXBcIiksbz1lLnR5cGUscj1lLmdyb3VwSUQ7aWYoIVtcIlB1YmxpY1wiLFwiUHJpdmF0ZVwiLFwiQ2hhdFJvb21cIixcIkFWQ2hhdFJvb21cIixcIkNvbW11bml0eVwiXS5pbmNsdWRlcyhvKSlyZXR1cm4gT18oe2NvZGU6emQuSUxMRUdBTF9HUk9VUF9UWVBFLG1lc3NhZ2U6SmQuSUxMRUdBTF9HUk9VUF9UWVBFfSk7aWYoIUdjKHt0eXBlOm99KSYmIUpjKHIpJiZHYyh7Z3JvdXBJRDpyfSkpcmV0dXJuIE9fKHtjb2RlOnpkLklMTEVHQUxfR1JPVVBfSUQsbWVzc2FnZTpKZC5JTExFR0FMX0dST1VQX0lEfSk7aWYod2MobykmJiFnYyhlLm1lbWJlckxpc3QpJiZlLm1lbWJlckxpc3QubGVuZ3RoPjAmJihRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIg5Yib5bu6IEFWQ2hhdFJvb20g5pe25LiN6IO95re75Yqg576k5oiQ5ZGY77yM6Ieq5Yqo5b+955Wl6K+l5a2X5q61XCIpKSxlLm1lbWJlckxpc3Q9dm9pZCAwKSxiYyhvKXx8Z2MoZS5qb2luT3B0aW9uKXx8KFFpLndhcm4oXCJcIi5jb25jYXQobixcIiDliJvlu7ogV29yay9NZWV0aW5nL0FWQ2hhdFJvb20vQ29tbXVuaXR5IOe+pOaXtuS4jeiDveiuvue9ruWtl+autSBqb2luT3B0aW9u77yM6Ieq5Yqo5b+955Wl6K+l5a2X5q61XCIpKSxlLmpvaW5PcHRpb249dm9pZCAwKSxHYyh7dHlwZTpvfSkmJiFKYyhyKSYmIUdjKHtncm91cElEOnJ9KSlyZXR1cm4gT18oe2NvZGU6emQuSUxMRUdBTF9HUk9VUF9JRCxtZXNzYWdlOkpkLklMTEVHQUxfR1JPVVBfSUR9KTt2YXIgYT1uZXcgZHAoUXApO1FpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9wdGlvbnM6XCIpLGUpO3ZhciBzPVtdO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTplZCxyZXF1ZXN0RGF0YTpDbih7fSxlLHtvd25lcklEOnRoaXMuZ2V0TXlVc2VySUQoKSx3ZWJQdXNoRmxhZzoxfSl9KS50aGVuKChmdW5jdGlvbihvKXt2YXIgcj1vLmRhdGEsaT1yLmdyb3VwSUQsYz1yLm92ZXJMaW1pdFVzZXJJRExpc3QsdT12b2lkIDA9PT1jP1tdOmM7aWYocz11LGEuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBUeXBlOlwiLmNvbmNhdChlLnR5cGUsXCIgZ3JvdXBJRDpcIikuY29uY2F0KGksXCIgb3ZlckxpbWl0VXNlcklETGlzdD1cIikuY29uY2F0KHUpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBvayBncm91cElEOlwiKS5jb25jYXQoaSxcIiBvdmVyTGltaXRVc2VySURMaXN0OlwiKSx1KSxlLnR5cGU9PT1Zbi5HUlBfQVZDSEFUUk9PTSlyZXR1cm4gdC5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6aX0pO0pjKGUubWVtYmVyTGlzdCl8fEpjKHUpfHwoZS5tZW1iZXJMaXN0PWUubWVtYmVyTGlzdC5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybi0xPT09dS5pbmRleE9mKGUudXNlcklEKX0pKSksdC51cGRhdGVHcm91cE1hcChbQ24oe30sZSx7Z3JvdXBJRDppfSldKTt2YXIgbD10LmdldE1vZHVsZShvbCksZD1sLmNyZWF0ZUN1c3RvbU1lc3NhZ2Uoe3RvOmksY29udmVyc2F0aW9uVHlwZTpZbi5DT05WX0dST1VQLHBheWxvYWQ6e2RhdGE6XCJncm91cF9jcmVhdGVcIixleHRlbnNpb246XCJcIi5jb25jYXQodC5nZXRNeVVzZXJJRCgpLFwi5Yib5bu6576k57uEXCIpfX0pO3JldHVybiBsLnNlbmRNZXNzYWdlSW5zdGFuY2UoZCksdC5lbWl0R3JvdXBMaXN0VXBkYXRlKCksdC5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6aX0pfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YS5ncm91cCxuPXQuc2VsZkluZm8sbz1uLm5hbWVDYXJkLHI9bi5qb2luVGltZTtyZXR1cm4gdC51cGRhdGVTZWxmSW5mbyh7bmFtZUNhcmQ6byxqb2luVGltZTpyLG1lc3NhZ2VSZW1pbmRUeXBlOlluLk1TR19SRU1JTkRfQUNQVF9BTkRfTk9URSxyb2xlOlluLkdSUF9NQlJfUk9MRV9PV05FUn0pLHlfKHtncm91cDp0LG92ZXJMaW1pdFVzZXJJRExpc3Q6c30pfSkpLmNhdGNoKChmdW5jdGlvbihvKXtyZXR1cm4gYS5zZXRNZXNzYWdlKFwiZ3JvdXBUeXBlOlwiLmNvbmNhdChlLnR5cGUpKSx0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PVBuKGUsMiksbj10WzBdLHI9dFsxXTthLnNldEVycm9yKG8sbixyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLG8pLE9fKG8pfSkpfX0se2tleTpcImRpc21pc3NHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGlzbWlzc0dyb3VwXCIpO2lmKHRoaXMuaGFzTG9jYWxHcm91cChlKSYmdGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShlKS50eXBlPT09WW4uR1JQX1dPUkspcmV0dXJuIE9fKG5ldyBBXyh7Y29kZTp6ZC5DQU5OT1RfRElTTUlTU19XT1JLLG1lc3NhZ2U6SmQuQ0FOTk9UX0RJU01JU1NfV09SS30pKTt2YXIgbz1uZXcgZHAoc2cpO3JldHVybiBvLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlKSksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp0ZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDplfX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIG8uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSksdC5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKGUpLHQuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKSYmdC5fQVZDaGF0Um9vbUhhbmRsZXIucmVzZXQoZSkseV8oe2dyb3VwSUQ6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJ1cGRhdGVHcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZUdyb3VwUHJvZmlsZVwiKTshdGhpcy5oYXNMb2NhbEdyb3VwKGUuZ3JvdXBJRCl8fGJjKHRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZS5ncm91cElEKS50eXBlKXx8Z2MoZS5qb2luT3B0aW9uKXx8KFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBXb3JrL01lZXRpbmcvQVZDaGF0Um9vbS9Db21tdW5pdHkg576k5LiN6IO96K6+572u5a2X5q61IGpvaW5PcHRpb27vvIzoh6rliqjlv73nlaXor6XlrZfmrrVcIikpLGUuam9pbk9wdGlvbj12b2lkIDApLGdjKGUubXV0ZUFsbE1lbWJlcnMpfHwoZS5tdXRlQWxsTWVtYmVycz9lLm11dGVBbGxNZW1iZXJzPVwiT25cIjplLm11dGVBbGxNZW1iZXJzPVwiT2ZmXCIpO3ZhciBvPW5ldyBkcChpZyk7cmV0dXJuIG8uc2V0TWVzc2FnZShKU09OLnN0cmluZ2lmeShlKSksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUuZ3JvdXBJRCkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOm5kLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbigpeyhvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpLHQuaGFzTG9jYWxHcm91cChlLmdyb3VwSUQpKSYmKHQuZ3JvdXBNYXAuZ2V0KGUuZ3JvdXBJRCkudXBkYXRlR3JvdXAoZSksdC5fc2V0U3RvcmFnZUdyb3VwTGlzdCgpKTtyZXR1cm4geV8oe2dyb3VwOnQuZ3JvdXBNYXAuZ2V0KGUuZ3JvdXBJRCl9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfX0se2tleTpcImpvaW5Hcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLnR5cGUscj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuam9pbkdyb3VwXCIpO2lmKG89PT1Zbi5HUlBfV09SSyl7dmFyIGE9bmV3IEFfKHtjb2RlOnpkLkNBTk5PVF9KT0lOX1dPUkssbWVzc2FnZTpKZC5DQU5OT1RfSk9JTl9XT1JLfSk7cmV0dXJuIE9fKGEpfWlmKHRoaXMuZGVsZXRlVW5qb2luZWRBVkNoYXRSb29tKG4pLHRoaXMuaGFzTG9jYWxHcm91cChuKSl7aWYoIXRoaXMuaXNMb2dnZWRJbigpKXJldHVybiBrXyh7c3RhdHVzOlluLkpPSU5fU1RBVFVTX0FMUkVBRFlfSU5fR1JPVVB9KTt2YXIgcz1uZXcgZHAoWnApO3JldHVybiB0aGlzLmdldEdyb3VwUHJvZmlsZSh7Z3JvdXBJRDpufSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gcy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIGpvaW5lZFN0YXR1czpcIikuY29uY2F0KFluLkpPSU5fU1RBVFVTX0FMUkVBRFlfSU5fR1JPVVApKS5lbmQoKSxrXyh7c3RhdHVzOlluLkpPSU5fU1RBVFVTX0FMUkVBRFlfSU5fR1JPVVB9KX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuIHMuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiB1bmpvaW5lZFwiKSkuZW5kKCksUWkud2FybihcIlwiLmNvbmNhdChyLFwiIFwiKS5jb25jYXQobixcIiB3YXMgdW5qb2luZWQsIG5vdyBqb2luIVwiKSksdC5ncm91cE1hcC5kZWxldGUobiksdC5hcHBseUpvaW5Hcm91cChlKX0pKX1yZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KHIsXCIgZ3JvdXBJRDpcIikuY29uY2F0KG4pKSx0aGlzLmlzTG9nZ2VkSW4oKT90aGlzLmFwcGx5Sm9pbkdyb3VwKGUpOnRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmpvaW5XaXRob3V0QXV0aChlKX19LHtrZXk6XCJhcHBseUpvaW5Hcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYXBwbHlKb2luR3JvdXBcIiksbz1lLmdyb3VwSUQscj1uZXcgZHAoWnApLGE9Q24oe30sZSkscz10aGlzLmNhbklVc2UodGkuQVZDSEFUUk9PTV9ISVNUT1JZX01TRyk7cmV0dXJuIHMmJihhLmhpc3RvcnlNZXNzYWdlRmxhZz0xKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpvZCxyZXF1ZXN0RGF0YTphfSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIGE9ZS5kYXRhLGk9YS5qb2luZWRTdGF0dXMsYz1hLmxvbmdQb2xsaW5nS2V5LHU9YS5hdkNoYXRSb29tRmxhZyxsPWEuYXZDaGF0Um9vbUtleSxkPWEubWVzc2FnZUxpc3QscD1cImdyb3VwSUQ6XCIuY29uY2F0KG8sXCIgam9pbmVkU3RhdHVzOlwiKS5jb25jYXQoaSxcIiBsb25nUG9sbGluZ0tleTpcIikuY29uY2F0KGMpK1wiIGF2Q2hhdFJvb21GbGFnOlwiLmNvbmNhdCh1LFwiIGNhbkdldEFWQ2hhdFJvb21IaXN0b3J5TWVzc2FnZTpcIikuY29uY2F0KHMpO3N3aXRjaChyLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChwKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIFwiKS5jb25jYXQocCkpLGkpe2Nhc2UgYWM6cmV0dXJuIHlfKHtzdGF0dXM6YWN9KTtjYXNlIHJjOnJldHVybiB0LmdldEdyb3VwUHJvZmlsZSh7Z3JvdXBJRDpvfSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG4scj1lLmRhdGEuZ3JvdXAsYT17c3RhdHVzOnJjLGdyb3VwOnJ9O3JldHVybiAxPT09dT8odC5nZXRNb2R1bGUodWwpLnNldENvbXBsZXRlZChcIlwiLmNvbmNhdChZbi5DT05WX0dST1VQKS5jb25jYXQobykpLHQuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXIuaW5pdEdyb3VwQXR0cmlidXRlc0NhY2hlKHtncm91cElEOm8sYXZDaGF0Um9vbUtleTpsfSksKG49Z2MoYyk/dC5fQVZDaGF0Um9vbUhhbmRsZXIuaGFuZGxlSm9pblJlc3VsdCh7Z3JvdXA6cn0pOnQuX0FWQ2hhdFJvb21IYW5kbGVyLnN0YXJ0UnVuTG9vcCh7bG9uZ1BvbGxpbmdLZXk6Yyxncm91cDpyfSkpLnRoZW4oKGZ1bmN0aW9uKCl7dC5fb25BVkNoYXRSb29tSGlzdG9yeU1lc3NhZ2UoZCl9KSksbik6KHQuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhMSkseV8oYSkpfSkpO2RlZmF1bHQ6dmFyIGc9bmV3IEFfKHtjb2RlOnpkLkpPSU5fR1JPVVBfRkFJTCxtZXNzYWdlOkpkLkpPSU5fR1JPVVBfRkFJTH0pO3JldHVybiBRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGVycm9yOlwiKSxnKSxPXyhnKX19KSkuY2F0Y2goKGZ1bmN0aW9uKG8pe3JldHVybiByLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlLmdyb3VwSUQpKSx0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PVBuKGUsMiksbj10WzBdLGE9dFsxXTtyLnNldEVycm9yKG8sbixhKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGVycm9yOlwiKSxvKSxPXyhvKX0pKX19LHtrZXk6XCJxdWl0R3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnF1aXRHcm91cFwiKTtRaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQoZSkpO3ZhciBvPXRoaXMuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKTtpZighbyYmIXRoaXMuaGFzTG9jYWxHcm91cChlKSl7dmFyIHI9bmV3IEFfKHtjb2RlOnpkLk1FTUJFUl9OT1RfSU5fR1JPVVAsbWVzc2FnZTpKZC5NRU1CRVJfTk9UX0lOX0dST1VQfSk7cmV0dXJuIE9fKHIpfWlmKG8mJiF0aGlzLmlzTG9nZ2VkSW4oKSlyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgYW5vbnltb3VzbHkgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChlKSksdGhpcy5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKGUpLHRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLnJlc2V0KGUpLGtfKHtncm91cElEOmV9KTt2YXIgYT1uZXcgZHAoZWcpO3JldHVybiBhLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6YWQscmVxdWVzdERhdGE6e2dyb3VwSUQ6ZX19KS50aGVuKChmdW5jdGlvbigpe3JldHVybiBhLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpLG8mJnQuX0FWQ2hhdFJvb21IYW5kbGVyLnJlc2V0KGUpLHQuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbihlKSx5Xyh7Z3JvdXBJRDplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfX0se2tleTpcInNlYXJjaEdyb3VwQnlJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2VhcmNoR3JvdXBCeUlEXCIpLG89e2dyb3VwSURMaXN0OltlXX0scj1uZXcgZHAodGcpO3JldHVybiByLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlKSksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpzZCxyZXF1ZXN0RGF0YTpvfSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89ZS5kYXRhLmdyb3VwUHJvZmlsZTtpZigwIT09b1swXS5lcnJvckNvZGUpdGhyb3cgbmV3IEFfKHtjb2RlOm9bMF0uZXJyb3JDb2RlLG1lc3NhZ2U6b1swXS5lcnJvckluZm99KTtyZXR1cm4gci5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx5Xyh7Z3JvdXA6bmV3IHRtKG9bMF0pfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLGE9blsxXTtyLnNldEVycm9yKGUsbyxhKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksT18oZSl9KSl9fSx7a2V5OlwiY2hhbmdlR3JvdXBPd25lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY2hhbmdlR3JvdXBPd25lclwiKTtpZih0aGlzLmhhc0xvY2FsR3JvdXAoZS5ncm91cElEKSYmdGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShlLmdyb3VwSUQpLnR5cGU9PT1Zbi5HUlBfQVZDSEFUUk9PTSlyZXR1cm4gT18obmV3IEFfKHtjb2RlOnpkLkNBTk5PVF9DSEFOR0VfT1dORVJfSU5fQVZDSEFUUk9PTSxtZXNzYWdlOkpkLkNBTk5PVF9DSEFOR0VfT1dORVJfSU5fQVZDSEFUUk9PTX0pKTtpZihlLm5ld093bmVySUQ9PT10aGlzLmdldE15VXNlcklEKCkpcmV0dXJuIE9fKG5ldyBBXyh7Y29kZTp6ZC5DQU5OT1RfQ0hBTkdFX09XTkVSX1RPX1NFTEYsbWVzc2FnZTpKZC5DQU5OT1RfQ0hBTkdFX09XTkVSX1RPX1NFTEZ9KSk7dmFyIG89bmV3IGRwKG5nKTtyZXR1cm4gby5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZS5ncm91cElELFwiIG5ld093bmVySUQ6XCIpLmNvbmNhdChlLm5ld093bmVySUQpKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQoZS5ncm91cElEKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6aWQscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKCl7by5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKTt2YXIgcj1lLmdyb3VwSUQsYT1lLm5ld093bmVySUQ7dC5ncm91cE1hcC5nZXQocikub3duZXJJRD1hO3ZhciBzPXQuZ2V0TW9kdWxlKGNsKS5nZXRMb2NhbEdyb3VwTWVtYmVyTGlzdChyKTtpZihzIGluc3RhbmNlb2YgTWFwKXt2YXIgaT1zLmdldCh0LmdldE15VXNlcklEKCkpO2djKGkpfHwoaS51cGRhdGVSb2xlKFwiTWVtYmVyXCIpLHQuZ3JvdXBNYXAuZ2V0KHIpLnNlbGZJbmZvLnJvbGU9XCJNZW1iZXJcIik7dmFyIGM9cy5nZXQoYSk7Z2MoYyl8fGMudXBkYXRlUm9sZShcIk93bmVyXCIpfXJldHVybiB0LmVtaXRHcm91cExpc3RVcGRhdGUoITAsITEpLHlfKHtncm91cDp0Lmdyb3VwTWFwLmdldChyKX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJoYW5kbGVHcm91cEFwcGxpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5oYW5kbGVHcm91cEFwcGxpY2F0aW9uXCIpLG89ZS5tZXNzYWdlLnBheWxvYWQscj1vLmdyb3VwUHJvZmlsZS5ncm91cElELGE9by5hdXRoZW50aWNhdGlvbixzPW8ubWVzc2FnZUtleSxpPW8ub3BlcmF0b3JJRCxjPW5ldyBkcChvZyk7cmV0dXJuIGMuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KHIpKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQocikpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmNkLHJlcXVlc3REYXRhOkNuKHt9LGUse2FwcGxpY2FudDppLGdyb3VwSUQ6cixhdXRoZW50aWNhdGlvbjphLG1lc3NhZ2VLZXk6c30pfSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gYy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx0Ll9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXIuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2Uoe21lc3NhZ2VMaXN0OltlLm1lc3NhZ2VdfSkseV8oe2dyb3VwOnQuZ2V0TG9jYWxHcm91cFByb2ZpbGUocil9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvclwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJoYW5kbGVHcm91cEludml0YXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmhhbmRsZUdyb3VwSW52aXRhdGlvblwiKSxvPWUubWVzc2FnZS5wYXlsb2FkLHI9by5ncm91cFByb2ZpbGUuZ3JvdXBJRCxhPW8uYXV0aGVudGljYXRpb24scz1vLm1lc3NhZ2VLZXksaT1vLm9wZXJhdG9ySUQsYz1lLmhhbmRsZUFjdGlvbix1PW5ldyBkcChyZyk7cmV0dXJuIHUuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KHIsXCIgaW52aXRlcjpcIikuY29uY2F0KGksXCIgaGFuZGxlQWN0aW9uOlwiKS5jb25jYXQoYykpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChyLFwiIGludml0ZXI6XCIpLmNvbmNhdChpLFwiIGhhbmRsZUFjdGlvbjpcIikuY29uY2F0KGMpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp1ZCxyZXF1ZXN0RGF0YTpDbih7fSxlLHtpbnZpdGVyOmksZ3JvdXBJRDpyLGF1dGhlbnRpY2F0aW9uOmEsbWVzc2FnZUtleTpzfSl9KS50aGVuKChmdW5jdGlvbigpe3JldHVybiB1LnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpLHQuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlci5kZWxldGVHcm91cFN5c3RlbU5vdGljZSh7bWVzc2FnZUxpc3Q6W2UubWVzc2FnZV19KSx5Xyh7Z3JvdXA6dC5nZXRMb2NhbEdyb3VwUHJvZmlsZShyKX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07dS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yXCIpLGUpLE9fKGUpfSkpfX0se2tleTpcImdldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXI/dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKT90aGlzLl9BVkNoYXRSb29tSGFuZGxlci5nZXRHcm91cE9ubGluZU1lbWJlckNvdW50KGUpOmtfKHttZW1iZXJDb3VudDowfSk6T18oe2NvZGU6emQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6SmQuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5OlwiaGFzTG9jYWxHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdyb3VwTWFwLmhhcyhlKX19LHtrZXk6XCJkZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZGVsZXRlTG9jYWxHcm91cChlKSx0aGlzLmdldE1vZHVsZSh1bCkuZGVsZXRlTG9jYWxDb252ZXJzYXRpb24oXCJHUk9VUFwiLmNvbmNhdChlKSksdGhpcy5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKX19LHtrZXk6XCJfZGVsZXRlTG9jYWxHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ3JvdXBNYXAuZGVsZXRlKGUpLHRoaXMuZ2V0TW9kdWxlKGNsKS5kZWxldGVHcm91cE1lbWJlckxpc3QoZSksdGhpcy5fc2V0U3RvcmFnZUdyb3VwTGlzdCgpfX0se2tleTpcInNlbmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNyZWF0ZUdyb3VwTWVzc2FnZVBhY2soZSx0KTtyZXR1cm4gdGhpcy5yZXF1ZXN0KG4pfX0se2tleTpcImNyZWF0ZUdyb3VwTWVzc2FnZVBhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPW51bGw7dCYmdC5vZmZsaW5lUHVzaEluZm8mJihuPXQub2ZmbGluZVB1c2hJbmZvKTt2YXIgbz1cIlwiO3VjKGUuY2xvdWRDdXN0b21EYXRhKSYmZS5jbG91ZEN1c3RvbURhdGEubGVuZ3RoPjAmJihvPWUuY2xvdWRDdXN0b21EYXRhKTt2YXIgcj1bXTtpZihkYyh0KSYmZGModC5tZXNzYWdlQ29udHJvbEluZm8pKXt2YXIgYT10Lm1lc3NhZ2VDb250cm9sSW5mbyxzPWEuZXhjbHVkZWRGcm9tVW5yZWFkQ291bnQsaT1hLmV4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlOyEwPT09cyYmci5wdXNoKFwiTm9VbnJlYWRcIiksITA9PT1pJiZyLnB1c2goXCJOb0xhc3RNc2dcIil9dmFyIGM9ZS5nZXRHcm91cEF0SW5mb0xpc3QoKTtyZXR1cm57cHJvdG9jb2xOYW1lOndsLHRqZ0lEOnRoaXMuZ2VuZXJhdGVUamdJRChlKSxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLGdyb3VwSUQ6ZS50byxtc2dCb2R5OmUuZ2V0RWxlbWVudHMoKSxjbG91ZEN1c3RvbURhdGE6byxyYW5kb206ZS5yYW5kb20scHJpb3JpdHk6ZS5wcmlvcml0eSxjbGllbnRTZXF1ZW5jZTplLmNsaWVudFNlcXVlbmNlLGdyb3VwQXRJbmZvOmUudHlwZSE9PVluLk1TR19URVhUfHxKYyhjKT92b2lkIDA6YyxvbmxpbmVPbmx5RmxhZzp0aGlzLmlzT25saW5lTWVzc2FnZShlLHQpPzE6MCxjbGllbnRUaW1lOmUuY2xpZW50VGltZSxvZmZsaW5lUHVzaEluZm86bj97cHVzaEZsYWc6ITA9PT1uLmRpc2FibGVQdXNoPzE6MCx0aXRsZTpuLnRpdGxlfHxcIlwiLGRlc2M6bi5kZXNjcmlwdGlvbnx8XCJcIixleHQ6bi5leHRlbnNpb258fFwiXCIsYXBuc0luZm86e2JhZGdlTW9kZTohMD09PW4uaWdub3JlSU9TQmFkZ2U/MTowfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpuLmFuZHJvaWRPUFBPQ2hhbm5lbElEfHxcIlwifX06dm9pZCAwLG1lc3NhZ2VDb250cm9sSW5mbzpyLG5lZWRSZWFkUmVjZWlwdDohMCE9PWUubmVlZFJlYWRSZWNlaXB0fHx0aGlzLmlzTWVzc2FnZUZyb21PclRvQVZDaGF0cm9vbShlLnRvKT8wOjF9fX19LHtrZXk6XCJyZXZva2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmxkLHJlcXVlc3REYXRhOntncm91cElEOmUudG8sbXNnU2VxTGlzdDpbe21zZ1NlcTplLnNlcXVlbmNlfV19fSl9fSx7a2V5OlwiZGVsZXRlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUudG8sbj1lLmtleUxpc3Q7cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlTWVzc2FnZSBncm91cElEOlwiKS5jb25jYXQodCxcIiBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6RWQscmVxdWVzdERhdGE6e2dyb3VwSUQ6dCxkZWxldGVyOnRoaXMuZ2V0TXlVc2VySUQoKSxrZXlMaXN0Om59fSl9fSx7a2V5OlwiZ2V0Um9hbWluZ01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldFJvYW1pbmdNZXNzYWdlXCIpLG89bmV3IGRwKFJwKSxyPTA7cmV0dXJuIHRoaXMuX2NvbXB1dGVMYXN0U2VxdWVuY2UoZSkudGhlbigoZnVuY3Rpb24obyl7cmV0dXJuIHI9byxRaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQoZS5ncm91cElELFwiIGxhc3RTZXF1ZW5jZTpcIikuY29uY2F0KHIpKSx0LnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpnZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDplLmdyb3VwSUQsY291bnQ6MjEsc2VxdWVuY2U6cn19KX0pKS50aGVuKChmdW5jdGlvbihhKXt2YXIgcz1hLmRhdGEsaT1zLm1lc3NhZ2VMaXN0LGM9cy5jb21wbGV0ZTtnYyhpKT9RaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gY29tcGxldGU6XCIpLmNvbmNhdChjLFwiIGJ1dCBtZXNzYWdlTGlzdCBpcyB1bmRlZmluZWQhXCIpKTpRaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gY29tcGxldGU6XCIpLmNvbmNhdChjLFwiIGNvdW50OlwiKS5jb25jYXQoaS5sZW5ndGgpKSxvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCxcIiBsYXN0U2VxdWVuY2U6XCIpLmNvbmNhdChyLFwiIGNvbXBsZXRlOlwiKS5jb25jYXQoYyxcIiBjb3VudDpcIikuY29uY2F0KGk/aS5sZW5ndGg6XCJ1bmRlZmluZWRcIikpLmVuZCgpO3ZhciB1PVwiR1JPVVBcIi5jb25jYXQoZS5ncm91cElEKSxsPXQuZ2V0TW9kdWxlKHVsKTtpZigyPT09Y3x8SmMoaSkpcmV0dXJuIGwuc2V0Q29tcGxldGVkKHUpLFtdO3ZhciBkPWwuc3RvcmVSb2FtaW5nTWVzc2FnZShpLHUpO3JldHVybiBsLnVwZGF0ZUlzUmVhZCh1KSxsLnBhdGNoQ29udmVyc2F0aW9uTGFzdE1lc3NhZ2UodSksZH0pKS5jYXRjaCgoZnVuY3Rpb24oYSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxzPW5bMF0saT1uWzFdO28uc2V0RXJyb3IoYSxzLGkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlLmdyb3VwSUQsXCIgbGFzdFNlcXVlbmNlOlwiKS5jb25jYXQocikpLmVuZCgpfSkpLFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxhKSxPXyhhKX0pKX19LHtrZXk6XCJfZ2V0R3JvdXBJRE9mTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnZlcnNhdGlvbklELnJlcGxhY2UoWW4uQ09OVl9HUk9VUCxcIlwiKX19LHtrZXk6XCJnZXRSZWFkUmVjZWlwdExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldFJlYWRSZWNlaXB0TGlzdFwiKSxvPXRoaXMuX2dldEdyb3VwSURPZk1lc3NhZ2UoZVswXSkscj10aGlzLmdldE15VXNlcklEKCksYT1lLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZnJvbT09PXImJiEwPT09ZS5uZWVkUmVhZFJlY2VpcHR9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm57c2VxdWVuY2U6ZS5zZXF1ZW5jZX19KSk7aWYoUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KG8sXCIgc2VxdWVuY2VMaXN0OlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoYSkpKSwwPT09YS5sZW5ndGgpcmV0dXJuIGtfKHttZXNzYWdlTGlzdDplfSk7dmFyIHM9bmV3IGRwKExwKTtyZXR1cm4gcy5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobykpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmhkLHJlcXVlc3REYXRhOntncm91cElEOm8sc2VxdWVuY2VMaXN0OmF9fSkudGhlbigoZnVuY3Rpb24odCl7cy5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSk7dmFyIG89dC5kYXRhLnJlYWRSZWNlaXB0TGlzdDtyZXR1cm4gcGMobykmJm8uZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXswPT09dC5jb2RlJiZ0LnNlcXVlbmNlPT09ZS5zZXF1ZW5jZSYmKGUucmVhZFJlY2VpcHRJbmZvLnJlYWRDb3VudD10LnJlYWRDb3VudCxlLnJlYWRSZWNlaXB0SW5mby51bnJlYWRDb3VudD10LnVucmVhZENvdW50KX0pKX0pKSx5Xyh7bWVzc2FnZUxpc3Q6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07cy5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfX0se2tleTpcInNlbmRSZWFkUmVjZWlwdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLl9nZXRHcm91cElET2ZNZXNzYWdlKGVbMF0pLG89bmV3IGRwKHdwKTtvLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuKSk7dmFyIHI9dGhpcy5nZXRNeVVzZXJJRCgpLGE9ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmZyb20hPT1yJiYhMD09PWUubmVlZFJlYWRSZWNlaXB0fSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3NlcXVlbmNlOmUuc2VxdWVuY2V9fSkpO2lmKDA9PT1hLmxlbmd0aClyZXR1cm4gT18oe2NvZGU6emQuUkVBRF9SRUNFSVBUX1NFUVVFTkNFX0xJU1RfRU1QVFksbWVzc2FnZTpKZC5SRUFEX1JFQ0VJUFRfU0VRVUVOQ0VfTElTVF9FTVBUWX0pO3ZhciBzPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZW5kUmVhZFJlY2VpcHRcIik7cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdChzLFwiLiBzZXF1ZW5jZUxpc3Q6XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShhKSkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmZkLHJlcXVlc3REYXRhOntncm91cElEOm4sc2VxdWVuY2VMaXN0OmF9fSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIG8uZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KHMsXCIgb2tcIikpLHlfKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KHMsXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksT18oZSl9KSl9fSx7a2V5OlwiZ2V0UmVhZFJlY2VpcHREZXRhaWxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5tZXNzYWdlLG89ZS5maWx0ZXIscj1lLmN1cnNvcixhPWUuY291bnQscz10aGlzLl9nZXRHcm91cElET2ZNZXNzYWdlKG4pLGk9bi5JRCxjPW4uc2VxdWVuY2UsdT1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0UmVhZFJlY2VpcHREZXRhaWxcIiksbD10aGlzLl9yZWNlaXB0RGV0YWlsQ29tcGxldGVNYXAuZ2V0KGkpfHwhMSxkPTAhPT1vJiYxIT09bz8wOm8scD11YyhyKT9yOlwiXCIsZz0hY2MoYSl8fGE8PTB8fGE+PTEwMD8xMDA6YSxoPVwiZ3JvdXBJRDpcIi5jb25jYXQocyxcIiBzZXF1ZW5jZTpcIikuY29uY2F0KGMsXCIgY3Vyc29yOlwiKS5jb25jYXQocCxcIiBmaWx0ZXI6XCIpLmNvbmNhdChkLFwiIGNvbXBsZXRlRmxhZzpcIikuY29uY2F0KGwpO1FpLmxvZyhcIlwiLmNvbmNhdCh1LFwiIFwiKS5jb25jYXQoaCkpO3ZhciBmPXtjdXJzb3I6XCJcIixpc0NvbXBsZXRlZDohMSxtZXNzYWdlSUQ6aSx1bnJlYWRVc2VySURMaXN0OltdLHJlYWRVc2VySURMaXN0OltdfTtpZighMD09PWwpcmV0dXJuIGYuaXNDb21wbGV0ZWQ9ITAsa18oZik7dmFyIF89bmV3IGRwKGJwKTtyZXR1cm4gXy5zZXRNZXNzYWdlKGgpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOl9kLHJlcXVlc3REYXRhOntncm91cElEOnMsc2VxdWVuY2U6YyxmbGFnOmQsY3Vyc29yOnAsY291bnQ6Z319KS50aGVuKChmdW5jdGlvbihlKXtfLmVuZCgpO3ZhciBuPWUuZGF0YSxvPW4uY3Vyc29yLHI9bi5pc0NvbXBsZXRlZCxhPW4udW5yZWFkVXNlcklETGlzdCxzPW4ucmVhZFVzZXJJRExpc3Q7cmV0dXJuIGYuY3Vyc29yPW8sMT09PXImJihmLmlzQ29tcGxldGVkPSEwLHQuX3JlY2VpcHREZXRhaWxDb21wbGV0ZU1hcC5zZXQoaSwhMCkpLDA9PT1kP2YucmVhZFVzZXJJRExpc3Q9cy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKToxPT09ZCYmKGYudW5yZWFkVXNlcklETGlzdD1hLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudXNlcklEfSkpKSxRaS5sb2coXCJcIi5jb25jYXQodSxcIiBva1wiKSkseV8oZil9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtfLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KHUsXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksT18oZSl9KSl9fSx7a2V5Olwic2V0TWVzc2FnZVJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5jb252ZXJzYXRpb25JRCxvPWUubGFzdE1lc3NhZ2VTZXEscj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0TWVzc2FnZVJlYWRcIik7UWkubG9nKFwiXCIuY29uY2F0KHIsXCIgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChuLFwiIGxhc3RNZXNzYWdlU2VxOlwiKS5jb25jYXQobykpLGNjKG8pfHxRaS53YXJuKFwiXCIuY29uY2F0KHIsXCIg6K+35Yu/5L+u5pS5IENvbnZlcnNhdGlvbi5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2XvvIzlkKbliJnlj6/og73kvJrlr7zoh7Tlt7Lor7vkuIrmiqXnu5PmnpzkuI3lh4bnoa5cIikpO3ZhciBhPW5ldyBkcChGcCk7cmV0dXJuIGEuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChuLFwiLVwiKS5jb25jYXQobykpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmRkLHJlcXVlc3REYXRhOntncm91cElEOm4ucmVwbGFjZShZbi5DT05WX0dST1VQLFwiXCIpLG1lc3NhZ2VSZWFkU2VxOm99fSkudGhlbigoZnVuY3Rpb24oKXthLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KHIsXCIgb2suXCIpKTt2YXIgZT10LmdldE1vZHVsZSh1bCk7cmV0dXJuIGUudXBkYXRlSXNSZWFkQWZ0ZXJSZWFkUmVwb3J0KHtjb252ZXJzYXRpb25JRDpuLGxhc3RNZXNzYWdlU2VxOm99KSxlLnVwZGF0ZVVucmVhZENvdW50KG4pLHlfKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5sb2coXCJcIi5jb25jYXQocixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJfY29tcHV0ZUxhc3RTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnNlcXVlbmNlPjA/UHJvbWlzZS5yZXNvbHZlKGUuc2VxdWVuY2UpOnRoaXMuZ2V0R3JvdXBMYXN0U2VxdWVuY2UoZS5ncm91cElEKX19LHtrZXk6XCJnZXRHcm91cExhc3RTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBMYXN0U2VxdWVuY2VcIiksbz1uZXcgZHAoZGcpLHI9MCxhPVwiXCI7aWYodGhpcy5oYXNMb2NhbEdyb3VwKGUpKXt2YXIgcz10aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKGUpLGk9cy5sYXN0TWVzc2FnZTtpZihpLmxhc3RTZXF1ZW5jZT4wJiYhMT09PWkub25saW5lT25seUZsYWcpcmV0dXJuIHI9aS5sYXN0U2VxdWVuY2UsYT1cImdvdCBsYXN0U2VxdWVuY2U6XCIuY29uY2F0KHIsXCIgZnJvbSBsb2NhbCBncm91cCBwcm9maWxlW2xhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZV0uIGdyb3VwSUQ6XCIpLmNvbmNhdChlKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBcIikuY29uY2F0KGEpKSxvLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChhKSkuZW5kKCksUHJvbWlzZS5yZXNvbHZlKHIpO2lmKHMubmV4dE1lc3NhZ2VTZXE+MSlyZXR1cm4gcj1zLm5leHRNZXNzYWdlU2VxLTEsYT1cImdvdCBsYXN0U2VxdWVuY2U6XCIuY29uY2F0KHIsXCIgZnJvbSBsb2NhbCBncm91cCBwcm9maWxlW25leHRNZXNzYWdlU2VxXS4gZ3JvdXBJRDpcIikuY29uY2F0KGUpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIFwiKS5jb25jYXQoYSkpLG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KGEpKS5lbmQoKSxQcm9taXNlLnJlc29sdmUocil9dmFyIGM9XCJHUk9VUFwiLmNvbmNhdChlKSx1PXRoaXMuZ2V0TW9kdWxlKHVsKS5nZXRMb2NhbENvbnZlcnNhdGlvbihjKTtpZih1JiZ1Lmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZSYmITE9PT11Lmxhc3RNZXNzYWdlLm9ubGluZU9ubHlGbGFnKXJldHVybiByPXUubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlLGE9XCJnb3QgbGFzdFNlcXVlbmNlOlwiLmNvbmNhdChyLFwiIGZyb20gbG9jYWwgY29udmVyc2F0aW9uIHByb2ZpbGVbbGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlXS4gZ3JvdXBJRDpcIikuY29uY2F0KGUpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIFwiKS5jb25jYXQoYSkpLG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KGEpKS5lbmQoKSxQcm9taXNlLnJlc29sdmUocik7dmFyIGw9e2dyb3VwSURMaXN0OltlXSxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjpbXCJOZXh0TXNnU2VxXCJdfX07cmV0dXJuIHRoaXMuZ2V0R3JvdXBQcm9maWxlQWR2YW5jZShsKS50aGVuKChmdW5jdGlvbihzKXt2YXIgaT1zLmRhdGEuc3VjY2Vzc0dyb3VwTGlzdDtyZXR1cm4gSmMoaSk/UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgc3VjY2Vzc0dyb3VwTGlzdCBpcyBlbXB0eS4gZ3JvdXBJRDpcIikuY29uY2F0KGUpKToocj1pWzBdLm5leHRNZXNzYWdlU2VxLTEsYT1cImdvdCBsYXN0U2VxdWVuY2U6XCIuY29uY2F0KHIsXCIgZnJvbSBnZXRHcm91cFByb2ZpbGVBZHZhbmNlLiBncm91cElEOlwiKS5jb25jYXQoZSksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgXCIpLmNvbmNhdChhKSkpLG8uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KGEpKS5lbmQoKSxyfSkpLmNhdGNoKChmdW5jdGlvbihyKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLGE9blswXSxzPW5bMV07by5zZXRFcnJvcihyLGEscykuc2V0TWVzc2FnZShcImdldCBsYXN0U2VxdWVuY2UgZmFpbGVkIGZyb20gZ2V0R3JvdXBQcm9maWxlQWR2YW5jZS4gZ3JvdXBJRDpcIi5jb25jYXQoZSkpLmVuZCgpfSkpLFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxyKSxPXyhyKX0pKX19LHtrZXk6XCJpc01lc3NhZ2VGcm9tT3JUb0FWQ2hhdHJvb21cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyJiZ0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5jaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEKGUpfX0se2tleTpcImhhc0pvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9BVkNoYXRSb29tSGFuZGxlcj90aGlzLl9BVkNoYXRSb29tSGFuZGxlci5oYXNKb2luZWRBVkNoYXRSb29tKCk6MH19LHtrZXk6XCJnZXRKb2luZWRBVkNoYXRSb29tXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXI/dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuZ2V0Sm9pbmVkQVZDaGF0Um9vbSgpOltdfX0se2tleTpcImlzT25saW5lTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISghdGhpcy5fY2FuSVVzZU9ubGluZU9ubHlGbGFnKGUpfHwhdHx8ITAhPT10Lm9ubGluZVVzZXJPbmx5KX19LHtrZXk6XCJfY2FuSVVzZU9ubGluZU9ubHlGbGFnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRKb2luZWRBVkNoYXRSb29tKCk7cmV0dXJuIXR8fCF0LmluY2x1ZGVzKGUudG8pfHxlLmNvbnZlcnNhdGlvblR5cGUhPT1Zbi5DT05WX0dST1VQfX0se2tleTpcIl9vbkFWQ2hhdFJvb21IaXN0b3J5TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFKYyhlKSl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25BVkNoYXRSb29tSGlzdG9yeU1lc3NhZ2UgY291bnQ6XCIpLmNvbmNhdChlLmxlbmd0aCkpO3ZhciB0PVtdO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5wdXNoKENuKHt9LGUse2lzSGlzdG9yeU1lc3NhZ2U6MX0pKX0pKSx0aGlzLm9uQVZDaGF0Um9vbU1lc3NhZ2UodCl9fX0se2tleTpcIm9uQVZDaGF0Um9vbU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9BVkNoYXRSb29tSGFuZGxlciYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIub25NZXNzYWdlKGUpfX0se2tleTpcImdldEdyb3VwU2ltcGxpZmllZEluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49bmV3IGRwKGhnKSxvPXtncm91cElETGlzdDpbZV0scmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZUluZm9GaWx0ZXI6W1wiVHlwZVwiLFwiTmFtZVwiXX19O3JldHVybiB0aGlzLmdldEdyb3VwUHJvZmlsZUFkdmFuY2UobykudGhlbigoZnVuY3Rpb24obyl7dmFyIHI9by5kYXRhLnN1Y2Nlc3NHcm91cExpc3Q7cmV0dXJuIG4uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZSxcIiB0eXBlOlwiKS5jb25jYXQoclswXS50eXBlKSkuZW5kKCksclswXX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7dC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgcj1Qbih0LDIpLGE9clswXSxzPXJbMV07bi5zZXRFcnJvcihvLGEscykuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUpKS5lbmQoKX0pKX0pKX19LHtrZXk6XCJzZXRVbmpvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LnNldChlLDEpfX0se2tleTpcImRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Vuam9pbmVkQVZDaGF0Um9vbUxpc3QuaGFzKGUpJiZ0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LmRlbGV0ZShlKX19LHtrZXk6XCJpc1Vuam9pbmVkQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LmhhcyhlKX19LHtrZXk6XCJvbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyJiZ0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLm9uR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZChlKX19LHtrZXk6XCJ1cGRhdGVMb2NhbE1haW5TZXF1ZW5jZU9uUmVjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXImJnRoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXIudXBkYXRlTG9jYWxNYWluU2VxdWVuY2VPblJlY29ubmVjdGVkKCl9fSx7a2V5OlwiaW5pdEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLmluaXRHcm91cEF0dHJpYnV0ZXMoZSl9fSx7a2V5Olwic2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXIuc2V0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLmRlbGV0ZUdyb3VwQXR0cmlidXRlcyhlKX19LHtrZXk6XCJnZXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5nZXRHcm91cEF0dHJpYnV0ZXMoZSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ3JvdXBNYXAuY2xlYXIoKSx0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LmNsZWFyKCksdGhpcy5fcmVjZWlwdERldGFpbENvbXBsZXRlTWFwLmNsZWFyKCksdGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyLnJlc2V0KCksdGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyLnJlc2V0KCksdGhpcy5fZ3JvdXBUaXBzSGFuZGxlci5yZXNldCgpLHRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyJiZ0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5yZXNldCgpfX1dKSxufShBbCksSW09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy51c2VySUQ9XCJcIix0aGlzLmF2YXRhcj1cIlwiLHRoaXMubmljaz1cIlwiLHRoaXMucm9sZT1cIlwiLHRoaXMuam9pblRpbWU9XCJcIix0aGlzLmxhc3RTZW5kTXNnVGltZT1cIlwiLHRoaXMubmFtZUNhcmQ9XCJcIix0aGlzLm11dGVVbnRpbD0wLHRoaXMubWVtYmVyQ3VzdG9tRmllbGQ9W10sdGhpcy5faW5pdE1lbWJlcih0KX1yZXR1cm4gRW4oZSxbe2tleTpcIl9pbml0TWVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy51cGRhdGVNZW1iZXIoZSl9fSx7a2V5OlwidXBkYXRlTWVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9W251bGwsdm9pZCAwLFwiXCIsMCxOYU5dO2UubWVtYmVyQ3VzdG9tRmllbGQmJkxjKHRoaXMubWVtYmVyQ3VzdG9tRmllbGQsZS5tZW1iZXJDdXN0b21GaWVsZCksSWModGhpcyxlLFtcIm1lbWJlckN1c3RvbUZpZWxkXCJdLHQpfX0se2tleTpcInVwZGF0ZVJvbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtbXCJPd25lclwiLFwiQWRtaW5cIixcIk1lbWJlclwiXS5pbmRleE9mKGUpPDB8fCh0aGlzLnJvbGU9ZSl9fSx7a2V5OlwidXBkYXRlTXV0ZVVudGlsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Z2MoZSl8fCh0aGlzLm11dGVVbnRpbD1NYXRoLmZsb29yKChEYXRlLm5vdygpKzFlMyplKS8xZTMpKX19LHtrZXk6XCJ1cGRhdGVOYW1lQ2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2djKGUpfHwodGhpcy5uYW1lQ2FyZD1lKX19LHtrZXk6XCJ1cGRhdGVNZW1iZXJDdXN0b21GaWVsZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UmJkxjKHRoaXMubWVtYmVyQ3VzdG9tRmllbGQsZSl9fV0pLGV9KCksRW09ZnVuY3Rpb24oZSl7QW4obixlKTt2YXIgdD1HbihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiR3JvdXBNZW1iZXJNb2R1bGVcIixvLmdyb3VwTWVtYmVyTGlzdE1hcD1uZXcgTWFwLG8uZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihCXyxvLl9vblByb2ZpbGVVcGRhdGVkLGJuKG8pKSxvfXJldHVybiBFbihuLFt7a2V5OlwiX29uUHJvZmlsZVVwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcyxuPWUuZGF0YSxvPWZ1bmN0aW9uKGUpe3ZhciBvPW5bZV07dC5ncm91cE1lbWJlckxpc3RNYXAuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5oYXMoby51c2VySUQpJiZlLmdldChvLnVzZXJJRCkudXBkYXRlTWVtYmVyKHtuaWNrOm8ubmljayxhdmF0YXI6by5hdmF0YXJ9KX0pKX0scj0wO3I8bi5sZW5ndGg7cisrKW8ocil9fSx7a2V5OlwiZGVsZXRlR3JvdXBNZW1iZXJMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZGVsZXRlKGUpfX0se2tleTpcImdldEdyb3VwTWVtYmVyTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLm9mZnNldCxyPXZvaWQgMD09PW8/MDpvLGE9ZS5jb3VudCxzPXZvaWQgMD09PWE/MTU6YSxpPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRHcm91cE1lbWJlckxpc3RcIiksYz1uZXcgZHAoeWcpO1FpLmxvZyhcIlwiLmNvbmNhdChpLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIG9mZnNldDpcIikuY29uY2F0KHIsXCIgY291bnQ6XCIpLmNvbmNhdChzKSk7dmFyIHU9MCxsPXtncm91cElEOm4sbGltaXQ6cz4xMDA/MTAwOnN9O0djKHtncm91cElEOm59KT9sLm5leHQ9XCJcIi5jb25jYXQocik6KGwub2Zmc2V0PXIsdT1yKzEpO3ZhciBkPVtdO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpOZCxyZXF1ZXN0RGF0YTpsfSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89ZS5kYXRhLHI9by5tZW1iZXJzLGE9by5tZW1iZXJOdW0scz1vLm5leHQsaT12b2lkIDA9PT1zP3ZvaWQgMDpzO2lmKGdjKGkpfHwodT1KYyhpKT8wOmkpLCFwYyhyKXx8MD09PXIubGVuZ3RoKXJldHVybiB1PTAsUHJvbWlzZS5yZXNvbHZlKFtdKTt2YXIgYz10LmdldE1vZHVsZShzbCk7cmV0dXJuIGMuaGFzTG9jYWxHcm91cChuKSYmKGMuZ2V0TG9jYWxHcm91cFByb2ZpbGUobikubWVtYmVyTnVtPWEpLGQ9dC5fdXBkYXRlTG9jYWxHcm91cE1lbWJlck1hcChuLHIpLHQuZ2V0TW9kdWxlKHJsKS5nZXRVc2VyUHJvZmlsZSh7dXNlcklETGlzdDpyLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudXNlcklEfSkpLHRhZ0xpc3Q6W2VjLk5JQ0ssZWMuQVZBVEFSXX0pfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZGF0YTtpZighcGMobyl8fDA9PT1vLmxlbmd0aClyZXR1cm4ga18oe21lbWJlckxpc3Q6W10sb2Zmc2V0OnV9KTt2YXIgcj1vLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3VzZXJJRDplLnVzZXJJRCxuaWNrOmUubmljayxhdmF0YXI6ZS5hdmF0YXJ9fSkpO3JldHVybiB0Ll91cGRhdGVMb2NhbEdyb3VwTWVtYmVyTWFwKG4sciksYy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIG9mZnNldDpcIikuY29uY2F0KHUsXCIgY291bnQ6XCIpLmNvbmNhdChzKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KGksXCIgb2suXCIpKSx5Xyh7bWVtYmVyTGlzdDpkLG9mZnNldDp1fSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtjLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChpLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfX0se2tleTpcImdldEdyb3VwTWVtYmVyUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBNZW1iZXJQcm9maWxlXCIpLG89bmV3IGRwKElnKTtvLnNldE1lc3NhZ2UoZS51c2VySURMaXN0Lmxlbmd0aD41P1widXNlcklETGlzdC5sZW5ndGg6XCIuY29uY2F0KGUudXNlcklETGlzdC5sZW5ndGgpOlwidXNlcklETGlzdDpcIi5jb25jYXQoZS51c2VySURMaXN0KSksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUuZ3JvdXBJRCxcIiB1c2VySURMaXN0OlwiKS5jb25jYXQoZS51c2VySURMaXN0LmpvaW4oXCIsXCIpKSksZS51c2VySURMaXN0Lmxlbmd0aD41MCYmKGUudXNlcklETGlzdD1lLnVzZXJJRExpc3Quc2xpY2UoMCw1MCkpO3ZhciByPWUuZ3JvdXBJRCxhPWUudXNlcklETGlzdDtyZXR1cm4gdGhpcy5fZ2V0R3JvdXBNZW1iZXJQcm9maWxlQWR2YW5jZShDbih7fSxlLHt1c2VySURMaXN0OmF9KSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhLm1lbWJlcnM7cmV0dXJuIHBjKG4pJiYwIT09bi5sZW5ndGg/KHQuX3VwZGF0ZUxvY2FsR3JvdXBNZW1iZXJNYXAocixuKSx0LmdldE1vZHVsZShybCkuZ2V0VXNlclByb2ZpbGUoe3VzZXJJRExpc3Q6bi5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKSx0YWdMaXN0OltlYy5OSUNLLGVjLkFWQVRBUl19KSk6a18oW10pfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt1c2VySUQ6ZS51c2VySUQsbmljazplLm5pY2ssYXZhdGFyOmUuYXZhdGFyfX0pKTt0Ll91cGRhdGVMb2NhbEdyb3VwTWVtYmVyTWFwKHIsbik7dmFyIHM9YS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB0Lmhhc0xvY2FsR3JvdXBNZW1iZXIocixlKX0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKHIsZSl9KSk7cmV0dXJuIG8uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSx5Xyh7bWVtYmVyTGlzdDpzfSl9KSl9fSx7a2V5OlwiYWRkR3JvdXBNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZEdyb3VwTWVtYmVyXCIpLG89ZS5ncm91cElELHI9dGhpcy5nZXRNb2R1bGUoc2wpLmdldExvY2FsR3JvdXBQcm9maWxlKG8pLGE9ci50eXBlLHM9bmV3IGRwKEVnKTtpZihzLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChvLFwiIGdyb3VwVHlwZTpcIikuY29uY2F0KGEpKSx3YyhhKSl7dmFyIGk9bmV3IEFfKHtjb2RlOnpkLkNBTk5PVF9BRERfTUVNQkVSX0lOX0FWQ0hBVFJPT00sbWVzc2FnZTpKZC5DQU5OT1RfQUREX01FTUJFUl9JTl9BVkNIQVRST09NfSk7cmV0dXJuIHMuc2V0Q29kZSh6ZC5DQU5OT1RfQUREX01FTUJFUl9JTl9BVkNIQVRST09NKS5zZXRFcnJvcihKZC5DQU5OT1RfQUREX01FTUJFUl9JTl9BVkNIQVRST09NKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLE9fKGkpfXJldHVybiBlLnVzZXJJRExpc3Q9ZS51c2VySURMaXN0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3VzZXJJRDplfX0pKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQobykpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOk9kLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbihvKXt2YXIgYT1vLmRhdGEubWVtYmVycztRaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSk7dmFyIGk9YS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5yZXN1bHR9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS51c2VySUR9KSksYz1hLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1lLnJlc3VsdH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKSx1PWEuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gMj09PWUucmVzdWx0fSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudXNlcklEfSkpLGw9YS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiA0PT09ZS5yZXN1bHR9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS51c2VySUR9KSksZD1cImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCxcIiwgXCIpK1wic3VjY2Vzc1VzZXJJRExpc3Q6XCIuY29uY2F0KGksXCIsIFwiKStcImZhaWx1cmVVc2VySURMaXN0OlwiLmNvbmNhdChjLFwiLCBcIikrXCJleGlzdGVkVXNlcklETGlzdDpcIi5jb25jYXQodSxcIiwgXCIpK1wib3ZlckxpbWl0VXNlcklETGlzdDpcIi5jb25jYXQobCk7cmV0dXJuIHMuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNb3JlTWVzc2FnZShkKS5lbmQoKSwwPT09aS5sZW5ndGg/eV8oe3N1Y2Nlc3NVc2VySURMaXN0OmksZmFpbHVyZVVzZXJJRExpc3Q6YyxleGlzdGVkVXNlcklETGlzdDp1LG92ZXJMaW1pdFVzZXJJRExpc3Q6bH0pOihyLm1lbWJlckNvdW50Kz1pLmxlbmd0aCx0Ll91cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUocikseV8oe3N1Y2Nlc3NVc2VySURMaXN0OmksZmFpbHVyZVVzZXJJRExpc3Q6YyxleGlzdGVkVXNlcklETGlzdDp1LG92ZXJMaW1pdFVzZXJJRExpc3Q6bCxncm91cDpyfSkpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07cy5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJkZWxldGVHcm91cE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlR3JvdXBNZW1iZXJcIiksbz1lLmdyb3VwSUQscj1lLnVzZXJJRExpc3QsYT1uZXcgZHAoVGcpLHM9XCJncm91cElEOlwiLmNvbmNhdChvLFwiIFwiKS5jb25jYXQoci5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiLmNvbmNhdChyLmxlbmd0aCk6XCJ1c2VySURMaXN0OlwiLmNvbmNhdChyKSk7YS5zZXRNZXNzYWdlKHMpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChvLFwiIHVzZXJJRExpc3Q6XCIpLHIpO3ZhciBpPXRoaXMuZ2V0TW9kdWxlKHNsKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtyZXR1cm4gd2MoaS50eXBlKT9PXyhuZXcgQV8oe2NvZGU6emQuQ0FOTk9UX0tJQ0tfTUVNQkVSX0lOX0FWQ0hBVFJPT00sbWVzc2FnZTpKZC5DQU5OT1RfS0lDS19NRU1CRVJfSU5fQVZDSEFUUk9PTX0pKTp0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpSZCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSxpLm1lbWJlckNvdW50LT0xLHQuX3VwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShpKSx0LmRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzKG8scikseV8oe2dyb3VwOmksdXNlcklETGlzdDpyfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfX0se2tleTpcIl91cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdldE1vZHVsZSh1bCkudXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKFtlXSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJNdXRlVGltZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLnVzZXJJRCxyPWUubXV0ZVRpbWUsYT1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0R3JvdXBNZW1iZXJNdXRlVGltZVwiKTtpZihvPT09dGhpcy5nZXRNeVVzZXJJRCgpKXJldHVybiBPXyhuZXcgQV8oe2NvZGU6emQuQ0FOTk9UX01VVEVfU0VMRixtZXNzYWdlOkpkLkNBTk5PVF9NVVRFX1NFTEZ9KSk7UWkubG9nKFwiXCIuY29uY2F0KGEsXCIgZ3JvdXBJRDpcIikuY29uY2F0KG4sXCIgdXNlcklEOlwiKS5jb25jYXQobykpO3ZhciBzPW5ldyBkcChTZyk7cmV0dXJuIHMuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgdXNlcklEOlwiKS5jb25jYXQobyxcIiBtdXRlVGltZTpcIikuY29uY2F0KHIpKSx0aGlzLm1vZGlmeUdyb3VwTWVtYmVySW5mbyh7Z3JvdXBJRDpuLHVzZXJJRDpvLG11dGVUaW1lOnJ9KS50aGVuKChmdW5jdGlvbihlKXtzLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KGEsXCIgb2tcIikpO3ZhciBvPXQuZ2V0TW9kdWxlKHNsKTtyZXR1cm4geV8oe2dyb3VwOm8uZ2V0TG9jYWxHcm91cFByb2ZpbGUobiksbWVtYmVyOmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO3Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KGEsXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksT18oZSl9KSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJSb2xlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRHcm91cE1lbWJlclJvbGVcIiksbz1lLmdyb3VwSUQscj1lLnVzZXJJRCxhPWUucm9sZSxzPXRoaXMuZ2V0TW9kdWxlKHNsKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtpZihzLnNlbGZJbmZvLnJvbGUhPT1Zbi5HUlBfTUJSX1JPTEVfT1dORVIpcmV0dXJuIE9fKHtjb2RlOnpkLk5PVF9PV05FUixtZXNzYWdlOkpkLk5PVF9PV05FUn0pO2lmKFtZbi5HUlBfV09SSyxZbi5HUlBfQVZDSEFUUk9PTV0uaW5jbHVkZXMocy50eXBlKSlyZXR1cm4gT18oe2NvZGU6emQuQ0FOTk9UX1NFVF9NRU1CRVJfUk9MRV9JTl9XT1JLX0FORF9BVkNIQVRST09NLG1lc3NhZ2U6SmQuQ0FOTk9UX1NFVF9NRU1CRVJfUk9MRV9JTl9XT1JLX0FORF9BVkNIQVRST09NfSk7dmFyIGk9W1luLkdSUF9NQlJfUk9MRV9BRE1JTixZbi5HUlBfTUJSX1JPTEVfTUVNQkVSXTtpZihHYyh7Z3JvdXBJRDpvfSkmJmkucHVzaChZbi5HUlBfTUJSX1JPTEVfQ1VTVE9NKSxpLmluZGV4T2YoYSk8MClyZXR1cm4gT18oe2NvZGU6emQuSU5WQUxJRF9NRU1CRVJfUk9MRSxtZXNzYWdlOkpkLklOVkFMSURfTUVNQkVSX1JPTEV9KTtpZihyPT09dGhpcy5nZXRNeVVzZXJJRCgpKXJldHVybiBPXyh7Y29kZTp6ZC5DQU5OT1RfU0VUX1NFTEZfTUVNQkVSX1JPTEUsbWVzc2FnZTpKZC5DQU5OT1RfU0VUX1NFTEZfTUVNQkVSX1JPTEV9KTt2YXIgYz1uZXcgZHAoQWcpO3JldHVybiBjLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChvLFwiIHVzZXJJRDpcIikuY29uY2F0KHIsXCIgcm9sZTpcIikuY29uY2F0KGEpKSxRaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQobyxcIiB1c2VySUQ6XCIpLmNvbmNhdChyKSksdGhpcy5tb2RpZnlHcm91cE1lbWJlckluZm8oe2dyb3VwSUQ6byx1c2VySUQ6cixyb2xlOmF9KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gYy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx5Xyh7Z3JvdXA6cyxtZW1iZXI6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07Yy5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRHcm91cE1lbWJlck5hbWVDYXJkXCIpLG89ZS5ncm91cElELHI9ZS51c2VySUQsYT12b2lkIDA9PT1yP3RoaXMuZ2V0TXlVc2VySUQoKTpyLHM9ZS5uYW1lQ2FyZDtRaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQobyxcIiB1c2VySUQ6XCIpLmNvbmNhdChhKSk7dmFyIGk9bmV3IGRwKENnKTtyZXR1cm4gaS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobyxcIiB1c2VySUQ6XCIpLmNvbmNhdChhLFwiIG5hbWVDYXJkOlwiKS5jb25jYXQocykpLHRoaXMubW9kaWZ5R3JvdXBNZW1iZXJJbmZvKHtncm91cElEOm8sdXNlcklEOmEsbmFtZUNhcmQ6c30pLnRoZW4oKGZ1bmN0aW9uKGUpe1FpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSxpLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCk7dmFyIHI9dC5nZXRNb2R1bGUoc2wpLmdldExvY2FsR3JvdXBQcm9maWxlKG8pO3JldHVybiBhPT09dC5nZXRNeVVzZXJJRCgpJiZyJiZyLnNldFNlbGZOYW1lQ2FyZChzKSx5Xyh7Z3JvdXA6cixtZW1iZXI6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07aS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJzZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkXCIpLG89ZS5ncm91cElELHI9ZS51c2VySUQsYT12b2lkIDA9PT1yP3RoaXMuZ2V0TXlVc2VySUQoKTpyLHM9ZS5tZW1iZXJDdXN0b21GaWVsZDtRaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQobyxcIiB1c2VySUQ6XCIpLmNvbmNhdChhKSk7dmFyIGk9bmV3IGRwKERnKTtyZXR1cm4gaS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobyxcIiB1c2VySUQ6XCIpLmNvbmNhdChhLFwiIG1lbWJlckN1c3RvbUZpZWxkOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkocykpKSx0aGlzLm1vZGlmeUdyb3VwTWVtYmVySW5mbyh7Z3JvdXBJRDpvLHVzZXJJRDphLG1lbWJlckN1c3RvbUZpZWxkOnN9KS50aGVuKChmdW5jdGlvbihlKXtpLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpO3ZhciByPXQuZ2V0TW9kdWxlKHNsKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtyZXR1cm4geV8oe2dyb3VwOnIsbWVtYmVyOmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2kuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksT18oZSl9KSl9fSx7a2V5OlwibW9kaWZ5R3JvdXBNZW1iZXJJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUudXNlcklEO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpMZCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oKXtpZih0Lmhhc0xvY2FsR3JvdXBNZW1iZXIobixvKSl7dmFyIHI9dC5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhuLG8pO3JldHVybiBnYyhlLm11dGVUaW1lKXx8ci51cGRhdGVNdXRlVW50aWwoZS5tdXRlVGltZSksZ2MoZS5yb2xlKXx8ci51cGRhdGVSb2xlKGUucm9sZSksZ2MoZS5uYW1lQ2FyZCl8fHIudXBkYXRlTmFtZUNhcmQoZS5uYW1lQ2FyZCksZ2MoZS5tZW1iZXJDdXN0b21GaWVsZCl8fHIudXBkYXRlTWVtYmVyQ3VzdG9tRmllbGQoZS5tZW1iZXJDdXN0b21GaWVsZCkscn1yZXR1cm4gdC5nZXRHcm91cE1lbWJlclByb2ZpbGUoe2dyb3VwSUQ6bix1c2VySURMaXN0OltvXX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBQbihlLmRhdGEubWVtYmVyTGlzdCwxKVswXX0pKX0pKX19LHtrZXk6XCJfZ2V0R3JvdXBNZW1iZXJQcm9maWxlQWR2YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTprZCxyZXF1ZXN0RGF0YTpDbih7fSxlLHttZW1iZXJJbmZvRmlsdGVyOmUubWVtYmVySW5mb0ZpbHRlcj9lLm1lbWJlckluZm9GaWx0ZXI6W1wiUm9sZVwiLFwiSm9pblRpbWVcIixcIk5hbWVDYXJkXCIsXCJTaHV0VXBVbnRpbFwiXX0pfSl9fSx7a2V5OlwiX3VwZGF0ZUxvY2FsR3JvdXBNZW1iZXJNYXBcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7cmV0dXJuIHBjKHQpJiYwIT09dC5sZW5ndGg/dC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBuLmhhc0xvY2FsR3JvdXBNZW1iZXIoZSx0LnVzZXJJRCk/bi5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhlLHQudXNlcklEKS51cGRhdGVNZW1iZXIodCk6bi5zZXRMb2NhbEdyb3VwTWVtYmVyKGUsbmV3IEltKHQpKSxuLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKGUsdC51c2VySUQpfSkpOltdfX0se2tleTpcImRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSk7biYmdC5mb3JFYWNoKChmdW5jdGlvbihlKXtuLmRlbGV0ZShlKX0pKX19LHtrZXk6XCJnZXRMb2NhbEdyb3VwTWVtYmVySW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmhhcyhlKT90aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSkuZ2V0KHQpOm51bGx9fSx7a2V5Olwic2V0TG9jYWxHcm91cE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYodGhpcy5ncm91cE1lbWJlckxpc3RNYXAuaGFzKGUpKXRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmdldChlKS5zZXQodC51c2VySUQsdCk7ZWxzZXt2YXIgbj0obmV3IE1hcCkuc2V0KHQudXNlcklELHQpO3RoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLnNldChlLG4pfX19LHtrZXk6XCJnZXRMb2NhbEdyb3VwTWVtYmVyTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSl9fSx7a2V5OlwiaGFzTG9jYWxHcm91cE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmhhcyhlKSYmdGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZ2V0KGUpLmhhcyh0KX19LHtrZXk6XCJoYXNMb2NhbEdyb3VwTWVtYmVyTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmhhcyhlKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5ncm91cE1lbWJlckxpc3RNYXAuY2xlYXIoKX19XSksbn0oQWwpLFRtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX3VzZXJNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJQcm9maWxlSGFuZGxlclwiLHRoaXMuVEFHPVwicHJvZmlsZVwiLHRoaXMuYWNjb3VudFByb2ZpbGVNYXA9bmV3IE1hcCx0aGlzLmV4cGlyYXRpb25UaW1lPTg2NGU1fXJldHVybiBFbihlLFt7a2V5Olwic2V0RXhwaXJhdGlvblRpbWVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmV4cGlyYXRpb25UaW1lPWV9fSx7a2V5OlwiZ2V0VXNlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS51c2VySURMaXN0O2UuZnJvbUFjY291bnQ9dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKSxuLmxlbmd0aD4xMDAmJihRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRVc2VyUHJvZmlsZSDojrflj5bnlKjmiLfotYTmlpnkurrmlbDkuI3og73otoXov4cxMDDkurpcIikpLG4ubGVuZ3RoPTEwMCk7Zm9yKHZhciBvLHI9W10sYT1bXSxzPTAsaT1uLmxlbmd0aDtzPGk7cysrKW89bltzXSx0aGlzLl91c2VyTW9kdWxlLmlzTXlGcmllbmQobykmJnRoaXMuX2NvbnRhaW5zQWNjb3VudChvKT9hLnB1c2godGhpcy5fZ2V0UHJvZmlsZUZyb21NYXAobykpOnIucHVzaChvKTtpZigwPT09ci5sZW5ndGgpcmV0dXJuIGtfKGEpO2UudG9BY2NvdW50PXI7dmFyIGM9ZS5iRnJvbUdldE15UHJvZmlsZXx8ITEsdT1bXTtlLnRvQWNjb3VudC5mb3JFYWNoKChmdW5jdGlvbihlKXt1LnB1c2goe3RvQWNjb3VudDplLHN0YW5kYXJkU2VxdWVuY2U6MCxjdXN0b21TZXF1ZW5jZTowfSl9KSksZS51c2VySXRlbT11O3ZhciBsPW5ldyBkcChMZyk7cmV0dXJuIGwuc2V0TWVzc2FnZShuLmxlbmd0aD41P1widXNlcklETGlzdC5sZW5ndGg6XCIuY29uY2F0KG4ubGVuZ3RoKTpcInVzZXJJRExpc3Q6XCIuY29uY2F0KG4pKSx0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpHbCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oZSl7bC5zZXROZXR3b3JrVHlwZSh0Ll91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmluZm8oXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmdldFVzZXJQcm9maWxlIG9rXCIpKTt2YXIgbj10Ll9oYW5kbGVSZXNwb25zZShlKS5jb25jYXQoYSk7cmV0dXJuIHlfKGM/blswXTpuKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2wuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5nZXRVc2VyUHJvZmlsZSBmYWlsZWQuIGVycm9yOlwiKSxlKSxPXyhlKX0pKX19LHtrZXk6XCJnZXRNeVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCk7aWYoUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRNeVByb2ZpbGUgbXlBY2NvdW50OlwiKS5jb25jYXQoZSkpLHRoaXMuX2ZpbGxNYXAoKSx0aGlzLl9jb250YWluc0FjY291bnQoZSkpe3ZhciB0PXRoaXMuX2dldFByb2ZpbGVGcm9tTWFwKGUpO3JldHVybiBRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0TXlQcm9maWxlIGZyb20gY2FjaGUsIG15UHJvZmlsZTpcIikrSlNPTi5zdHJpbmdpZnkodCkpLGtfKHQpfXJldHVybiB0aGlzLmdldFVzZXJQcm9maWxlKHtmcm9tQWNjb3VudDplLHVzZXJJRExpc3Q6W2VdLGJGcm9tR2V0TXlQcm9maWxlOiEwfSl9fSx7a2V5OlwiX2hhbmRsZVJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4sbz15Yy5ub3coKSxyPWUuZGF0YS51c2VyUHJvZmlsZUl0ZW0sYT1bXSxzPTAsaT1yLmxlbmd0aDtzPGk7cysrKVwiQFRMUyNOT1RfRk9VTkRcIiE9PXJbc10udG8mJlwiXCIhPT1yW3NdLnRvJiYodD1yW3NdLnRvLG49dGhpcy5fdXBkYXRlTWFwKHQsdGhpcy5fZ2V0TGF0ZXN0UHJvZmlsZUZyb21SZXNwb25zZSh0LHJbc10ucHJvZmlsZUl0ZW0pKSxhLnB1c2gobikpO3JldHVybiBRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9oYW5kbGVSZXNwb25zZSBjb3N0IFwiKS5jb25jYXQoeWMubm93KCktbyxcIiBtc1wiKSksYX19LHtrZXk6XCJfZ2V0TGF0ZXN0UHJvZmlsZUZyb21SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49e307aWYobi51c2VySUQ9ZSxuLnByb2ZpbGVDdXN0b21GaWVsZD1bXSwhSmModCkpZm9yKHZhciBvPTAscj10Lmxlbmd0aDtvPHI7bysrKWlmKHRbb10udGFnLmluZGV4T2YoXCJUYWdfUHJvZmlsZV9DdXN0b21cIik+LTEpbi5wcm9maWxlQ3VzdG9tRmllbGQucHVzaCh7a2V5OnRbb10udGFnLHZhbHVlOnRbb10udmFsdWV9KTtlbHNlIHN3aXRjaCh0W29dLnRhZyl7Y2FzZSBlYy5OSUNLOm4ubmljaz10W29dLnZhbHVlO2JyZWFrO2Nhc2UgZWMuR0VOREVSOm4uZ2VuZGVyPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBlYy5CSVJUSERBWTpuLmJpcnRoZGF5PXRbb10udmFsdWU7YnJlYWs7Y2FzZSBlYy5MT0NBVElPTjpuLmxvY2F0aW9uPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBlYy5TRUxGU0lHTkFUVVJFOm4uc2VsZlNpZ25hdHVyZT10W29dLnZhbHVlO2JyZWFrO2Nhc2UgZWMuQUxMT1dUWVBFOm4uYWxsb3dUeXBlPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBlYy5MQU5HVUFHRTpuLmxhbmd1YWdlPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBlYy5BVkFUQVI6bi5hdmF0YXI9dFtvXS52YWx1ZTticmVhaztjYXNlIGVjLk1FU1NBR0VTRVRUSU5HUzpuLm1lc3NhZ2VTZXR0aW5ncz10W29dLnZhbHVlO2JyZWFrO2Nhc2UgZWMuQURNSU5GT1JCSURUWVBFOm4uYWRtaW5Gb3JiaWRUeXBlPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBlYy5MRVZFTDpuLmxldmVsPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBlYy5ST0xFOm4ucm9sZT10W29dLnZhbHVlO2JyZWFrO2RlZmF1bHQ6UWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2hhbmRsZVJlc3BvbnNlIHVua25vd24gdGFnOlwiKSx0W29dLnRhZyx0W29dLnZhbHVlKX1yZXR1cm4gbn19LHtrZXk6XCJ1cGRhdGVNeVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZU15UHJvZmlsZVwiKSxvPW5ldyBkcChiZyk7by5zZXRNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGUpKTt2YXIgcj0obmV3IFhfKS52YWxpZGF0ZShlKTtpZighci52YWxpZClyZXR1cm4gby5zZXRDb2RlKHpkLlVQREFURV9QUk9GSUxFX0lOVkFMSURfUEFSQU0pLnNldE1vcmVNZXNzYWdlKFwiXCIuY29uY2F0KG4sXCIgaW5mbzpcIikuY29uY2F0KHIudGlwcykpLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBpbmZvOlwiKS5jb25jYXQoci50aXBzLFwi77yM6K+35Y+C6ICDIGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9TREsuaHRtbCN1cGRhdGVNeVByb2ZpbGVcIikpLE9fKHtjb2RlOnpkLlVQREFURV9QUk9GSUxFX0lOVkFMSURfUEFSQU0sbWVzc2FnZTpKZC5VUERBVEVfUFJPRklMRV9JTlZBTElEX1BBUkFNfSk7dmFyIGE9W107Zm9yKHZhciBzIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscykmJihcInByb2ZpbGVDdXN0b21GaWVsZFwiPT09cz9lLnByb2ZpbGVDdXN0b21GaWVsZC5mb3JFYWNoKChmdW5jdGlvbihlKXthLnB1c2goe3RhZzplLmtleSx2YWx1ZTplLnZhbHVlfSl9KSk6YS5wdXNoKHt0YWc6ZWNbcy50b1VwcGVyQ2FzZSgpXSx2YWx1ZTplW3NdfSkpO3JldHVybiAwPT09YS5sZW5ndGg/KG8uc2V0Q29kZSh6ZC5VUERBVEVfUFJPRklMRV9OT19LRVkpLnNldE1vcmVNZXNzYWdlKEpkLlVQREFURV9QUk9GSUxFX05PX0tFWSkuc2V0TmV0d29ya1R5cGUodGhpcy5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGluZm86XCIpLmNvbmNhdChKZC5VUERBVEVfUFJPRklMRV9OT19LRVksXCLvvIzor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI3VwZGF0ZU15UHJvZmlsZVwiKSksT18oe2NvZGU6emQuVVBEQVRFX1BST0ZJTEVfTk9fS0VZLG1lc3NhZ2U6SmQuVVBEQVRFX1BST0ZJTEVfTk9fS0VZfSkpOnRoaXMuX3VzZXJNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlBsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpLHByb2ZpbGVJdGVtOmF9fSkudGhlbigoZnVuY3Rpb24ocil7by5zZXROZXR3b3JrVHlwZSh0Ll91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmluZm8oXCJcIi5jb25jYXQobixcIiBva1wiKSk7dmFyIGE9dC5fdXBkYXRlTWFwKHQuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCksZSk7cmV0dXJuIHQuX3VzZXJNb2R1bGUuZW1pdE91dGVyRXZlbnQoV24uUFJPRklMRV9VUERBVEVELFthXSksa18oYSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll91c2VyTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpfX0se2tleTpcIm9uUHJvZmlsZU1vZGlmaWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdDtpZighSmModCkpe3ZhciBuLG8scj10Lmxlbmd0aDtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Qcm9maWxlTW9kaWZpZWQgY291bnQ6XCIpLmNvbmNhdChyLFwiIGRhdGFMaXN0OlwiKSxlLmRhdGFMaXN0KTtmb3IodmFyIGE9W10scz0wO3M8cjtzKyspbj10W3NdLnVzZXJJRCxvPXRoaXMuX3VwZGF0ZU1hcChuLHRoaXMuX2dldExhdGVzdFByb2ZpbGVGcm9tUmVzcG9uc2Uobix0W3NdLnByb2ZpbGVMaXN0KSksYS5wdXNoKG8pO2EubGVuZ3RoPjAmJih0aGlzLl91c2VyTW9kdWxlLmVtaXRJbm5lckV2ZW50KEJfLGEpLHRoaXMuX3VzZXJNb2R1bGUuZW1pdE91dGVyRXZlbnQoV24uUFJPRklMRV9VUERBVEVELGEpKX19fSx7a2V5OlwiX2ZpbGxNYXBcIix2YWx1ZTpmdW5jdGlvbigpe2lmKDA9PT10aGlzLmFjY291bnRQcm9maWxlTWFwLnNpemUpe2Zvcih2YXIgZT10aGlzLl9nZXRDYWNoZWRQcm9maWxlcygpLHQ9RGF0ZS5ub3coKSxuPTAsbz1lLmxlbmd0aDtuPG87bisrKXQtZVtuXS5sYXN0VXBkYXRlZFRpbWU8dGhpcy5leHBpcmF0aW9uVGltZSYmdGhpcy5hY2NvdW50UHJvZmlsZU1hcC5zZXQoZVtuXS51c2VySUQsZVtuXSk7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZmlsbE1hcCBmcm9tIGNhY2hlLCBtYXAuc2l6ZTpcIikuY29uY2F0KHRoaXMuYWNjb3VudFByb2ZpbGVNYXAuc2l6ZSkpfX19LHtrZXk6XCJfdXBkYXRlTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbixvPURhdGUubm93KCk7cmV0dXJuIHRoaXMuX2NvbnRhaW5zQWNjb3VudChlKT8obj10aGlzLl9nZXRQcm9maWxlRnJvbU1hcChlKSx0LnByb2ZpbGVDdXN0b21GaWVsZCYmTGMobi5wcm9maWxlQ3VzdG9tRmllbGQsdC5wcm9maWxlQ3VzdG9tRmllbGQpLEljKG4sdCxbXCJwcm9maWxlQ3VzdG9tRmllbGRcIl0pLG4ubGFzdFVwZGF0ZWRUaW1lPW8pOihuPW5ldyBYXyh0KSwodGhpcy5fdXNlck1vZHVsZS5pc015RnJpZW5kKGUpfHxlPT09dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKSkmJihuLmxhc3RVcGRhdGVkVGltZT1vLHRoaXMuYWNjb3VudFByb2ZpbGVNYXAuc2V0KGUsbikpKSx0aGlzLl9mbHVzaE1hcChlPT09dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKSksbn19LHtrZXk6XCJfZmx1c2hNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1Vbih0aGlzLmFjY291bnRQcm9maWxlTWFwLnZhbHVlcygpKSxuPXRoaXMuX3VzZXJNb2R1bGUuZ2V0U3RvcmFnZU1vZHVsZSgpO1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZmx1c2hNYXAgbGVuZ3RoOlwiKS5jb25jYXQodC5sZW5ndGgsXCIgZmx1c2hBdE9uY2U6XCIpLmNvbmNhdChlKSksbi5zZXRJdGVtKHRoaXMuVEFHLHQsZSl9fSx7a2V5OlwiX2NvbnRhaW5zQWNjb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFjY291bnRQcm9maWxlTWFwLmhhcyhlKX19LHtrZXk6XCJfZ2V0UHJvZmlsZUZyb21NYXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hY2NvdW50UHJvZmlsZU1hcC5nZXQoZSl9fSx7a2V5OlwiX2dldENhY2hlZFByb2ZpbGVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl91c2VyTW9kdWxlLmdldFN0b3JhZ2VNb2R1bGUoKS5nZXRJdGVtKHRoaXMuVEFHKTtyZXR1cm4gSmMoZSk/W106ZX19LHtrZXk6XCJvbkNvbnZlcnNhdGlvbnNQcm9maWxlVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLG8scj1bXSxhPTAscz1lLmxlbmd0aDthPHM7YSsrKW49KHQ9ZVthXSkudXNlcklELHRoaXMuX3VzZXJNb2R1bGUuaXNNeUZyaWVuZChuKXx8KHRoaXMuX2NvbnRhaW5zQWNjb3VudChuKT8obz10aGlzLl9nZXRQcm9maWxlRnJvbU1hcChuKSxJYyhvLHQpPjAmJnIucHVzaChuKSk6ci5wdXNoKHQudXNlcklEKSk7MCE9PXIubGVuZ3RoJiYoUWkuaW5mbyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Db252ZXJzYXRpb25zUHJvZmlsZVVwZGF0ZWQgdG9BY2NvdW50TGlzdDpcIikuY29uY2F0KHIpKSx0aGlzLmdldFVzZXJQcm9maWxlKHt1c2VySURMaXN0OnJ9KSl9fSx7a2V5OlwiZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5fY29udGFpbnNBY2NvdW50KGUpKXt2YXIgdD10aGlzLl9nZXRQcm9maWxlRnJvbU1hcChlKTtyZXR1cm57bmljazp0Lm5pY2ssYXZhdGFyOnQuYXZhdGFyfX1yZXR1cm57bmljazpcIlwiLGF2YXRhcjpcIlwifX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZmx1c2hNYXAoITApLHRoaXMuYWNjb3VudFByb2ZpbGVNYXAuY2xlYXIoKX19XSksZX0oKSxTbT1mdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksSmN8fCh0aGlzLnVzZXJJRD10LnVzZXJJRHx8XCJcIix0aGlzLnRpbWVTdGFtcD10LnRpbWVTdGFtcHx8MCl9LENtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX3VzZXJNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJCbGFja2xpc3RIYW5kbGVyXCIsdGhpcy5fYmxhY2tsaXN0TWFwPW5ldyBNYXAsdGhpcy5zdGFydEluZGV4PTAsdGhpcy5tYXhMaW1pdGVkPTEwMCx0aGlzLmN1cnJlbnRTZXF1ZW5jZT0wfXJldHVybiBFbihlLFt7a2V5OlwiZ2V0TG9jYWxCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBVbih0aGlzLl9ibGFja2xpc3RNYXAua2V5cygpKX19LHtrZXk6XCJnZXRCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0QmxhY2tsaXN0XCIpLG49e2Zyb21BY2NvdW50OnRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCksbWF4TGltaXRlZDp0aGlzLm1heExpbWl0ZWQsc3RhcnRJbmRleDowLGxhc3RTZXF1ZW5jZTp0aGlzLmN1cnJlbnRTZXF1ZW5jZX0sbz1uZXcgZHAod2cpO3JldHVybiB0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpVbCxyZXF1ZXN0RGF0YTpufSkudGhlbigoZnVuY3Rpb24obil7dmFyIHI9bi5kYXRhLGE9ci5ibGFja0xpc3RJdGVtLHM9ci5jdXJyZW50U2VxdWVuY2UsaT1KYyhhKT8wOmEubGVuZ3RoO28uc2V0TmV0d29ya1R5cGUoZS5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiYmxhY2tMaXN0IGNvdW50OlwiLmNvbmNhdChpKSkuZW5kKCksUWkuaW5mbyhcIlwiLmNvbmNhdCh0LFwiIG9rXCIpKSxlLmN1cnJlbnRTZXF1ZW5jZT1zLGUuX2hhbmRsZVJlc3BvbnNlKGEsITApLGUuX3VzZXJNb2R1bGUuZW1pdE91dGVyRXZlbnQoV24uQkxBQ0tMSVNUX1VQREFURUQsVW4oZS5fYmxhY2tsaXN0TWFwLmtleXMoKSkpfSkpLmNhdGNoKChmdW5jdGlvbihuKXtyZXR1cm4gZS5fdXNlck1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1QbihlLDIpLHI9dFswXSxhPXRbMV07by5zZXRFcnJvcihuLHIsYSkuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQodCxcIiBmYWlsZWQuIGVycm9yOlwiKSxuKSxPXyhuKX0pKX19LHtrZXk6XCJhZGRCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZEJsYWNrbGlzdFwiKSxvPW5ldyBkcChHZyk7aWYoIXBjKGUudXNlcklETGlzdCkpcmV0dXJuIG8uc2V0Q29kZSh6ZC5BRERfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU0pLnNldE1lc3NhZ2UoSmQuQUREX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNKS5zZXROZXR3b3JrVHlwZSh0aGlzLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgb3B0aW9ucy51c2VySURMaXN0IOW/hemcgOaYr+aVsOe7hFwiKSksT18oe2NvZGU6emQuQUREX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNLG1lc3NhZ2U6SmQuQUREX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNfSk7dmFyIHI9dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKTtyZXR1cm4gMT09PWUudXNlcklETGlzdC5sZW5ndGgmJmUudXNlcklETGlzdFswXT09PXI/KG8uc2V0Q29kZSh6ZC5DQU5OT1RfQUREX1NFTEZfVE9fQkxBQ0tMSVNUKS5zZXRNZXNzYWdlKEpkLkNBTk5PVF9BRERfU0VMRl9UT19CTEFDS0xJU1QpLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiDkuI3og73mioroh6rlt7Hmi4npu5FcIikpLE9fKHtjb2RlOnpkLkNBTk5PVF9BRERfU0VMRl9UT19CTEFDS0xJU1QsbWVzc2FnZTpKZC5DQU5OT1RfQUREX1NFTEZfVE9fQkxBQ0tMSVNUfSkpOihlLnVzZXJJRExpc3QuaW5jbHVkZXMocikmJihlLnVzZXJJRExpc3Q9ZS51c2VySURMaXN0LmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT1yfSkpLFFpLndhcm4oXCJcIi5jb25jYXQobixcIiDkuI3og73mioroh6rlt7Hmi4npu5HvvIzlt7Lov4fmu6RcIikpKSxlLmZyb21BY2NvdW50PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCksZS50b0FjY291bnQ9ZS51c2VySURMaXN0LHRoaXMuX3VzZXJNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkZsLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbihyKXtyZXR1cm4gby5zZXROZXR3b3JrVHlwZSh0Ll91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoZS51c2VySURMaXN0Lmxlbmd0aD41P1widXNlcklETGlzdC5sZW5ndGg6XCIuY29uY2F0KGUudXNlcklETGlzdC5sZW5ndGgpOlwidXNlcklETGlzdDpcIi5jb25jYXQoZS51c2VySURMaXN0KSkuZW5kKCksUWkuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx0Ll9oYW5kbGVSZXNwb25zZShyLnJlc3VsdEl0ZW0sITApLHlfKFVuKHQuX2JsYWNrbGlzdE1hcC5rZXlzKCkpKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLFFpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksT18oZSl9KSkpfX0se2tleTpcIl9oYW5kbGVSZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoIUpjKGUpKWZvcih2YXIgbixvLHIsYT0wLHM9ZS5sZW5ndGg7YTxzO2ErKylvPWVbYV0udG8scj1lW2FdLnJlc3VsdENvZGUsKGdjKHIpfHwwPT09cikmJih0Pygobj10aGlzLl9ibGFja2xpc3RNYXAuaGFzKG8pP3RoaXMuX2JsYWNrbGlzdE1hcC5nZXQobyk6bmV3IFNtKS51c2VySUQ9bywhSmMoZVthXS5hZGRCbGFja1RpbWVTdGFtcCkmJihuLnRpbWVTdGFtcD1lW2FdLmFkZEJsYWNrVGltZVN0YW1wKSx0aGlzLl9ibGFja2xpc3RNYXAuc2V0KG8sbikpOnRoaXMuX2JsYWNrbGlzdE1hcC5oYXMobykmJihuPXRoaXMuX2JsYWNrbGlzdE1hcC5nZXQobyksdGhpcy5fYmxhY2tsaXN0TWFwLmRlbGV0ZShvKSkpO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2hhbmRsZVJlc3BvbnNlIHRvdGFsOlwiKS5jb25jYXQodGhpcy5fYmxhY2tsaXN0TWFwLnNpemUsXCIgYkFkZDpcIikuY29uY2F0KHQpKX19LHtrZXk6XCJkZWxldGVCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUJsYWNrbGlzdFwiKSxvPW5ldyBkcChQZyk7cmV0dXJuIHBjKGUudXNlcklETGlzdCk/KGUuZnJvbUFjY291bnQ9dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKSxlLnRvQWNjb3VudD1lLnVzZXJJRExpc3QsdGhpcy5fdXNlck1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6cWwscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKHIpe3JldHVybiBvLnNldE5ldHdvcmtUeXBlKHQuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShlLnVzZXJJRExpc3QubGVuZ3RoPjU/XCJ1c2VySURMaXN0Lmxlbmd0aDpcIi5jb25jYXQoZS51c2VySURMaXN0Lmxlbmd0aCk6XCJ1c2VySURMaXN0OlwiLmNvbmNhdChlLnVzZXJJRExpc3QpKS5lbmQoKSxRaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpLHQuX2hhbmRsZVJlc3BvbnNlKHIuZGF0YS5yZXN1bHRJdGVtLCExKSx5XyhVbih0Ll9ibGFja2xpc3RNYXAua2V5cygpKSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll91c2VyTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLE9fKGUpfSkpKTooby5zZXRDb2RlKHpkLkRFTF9CTEFDS0xJU1RfSU5WQUxJRF9QQVJBTSkuc2V0TWVzc2FnZShKZC5ERUxfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU0pLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkuZXJyb3IoXCJcIi5jb25jYXQobixcIiBvcHRpb25zLnVzZXJJRExpc3Qg5b+F6ZyA5piv5pWw57uEXCIpKSxPXyh7Y29kZTp6ZC5ERUxfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU0sbWVzc2FnZTpKZC5ERUxfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU19KSl9fSx7a2V5Olwib25BY2NvdW50RGVsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPVtdLG89MCxyPWUubGVuZ3RoO288cjtvKyspdD1lW29dLHRoaXMuX2JsYWNrbGlzdE1hcC5oYXModCkmJih0aGlzLl9ibGFja2xpc3RNYXAuZGVsZXRlKHQpLG4ucHVzaCh0KSk7bi5sZW5ndGg+MCYmKFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25BY2NvdW50RGVsZXRlZCBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoLFwiIHVzZXJJRExpc3Q6XCIpLG4pLHRoaXMuX3VzZXJNb2R1bGUuZW1pdE91dGVyRXZlbnQoV24uQkxBQ0tMSVNUX1VQREFURUQsVW4odGhpcy5fYmxhY2tsaXN0TWFwLmtleXMoKSkpKX19LHtrZXk6XCJvbkFjY291bnRBZGRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPVtdLG89MCxyPWUubGVuZ3RoO288cjtvKyspdD1lW29dLHRoaXMuX2JsYWNrbGlzdE1hcC5oYXModCl8fCh0aGlzLl9ibGFja2xpc3RNYXAuc2V0KHQsbmV3IFNtKHt1c2VySUQ6dH0pKSxuLnB1c2godCkpO24ubGVuZ3RoPjAmJihRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uQWNjb3VudEFkZGVkIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgsXCIgdXNlcklETGlzdDpcIiksbiksdGhpcy5fdXNlck1vZHVsZS5lbWl0T3V0ZXJFdmVudChXbi5CTEFDS0xJU1RfVVBEQVRFRCxVbih0aGlzLl9ibGFja2xpc3RNYXAua2V5cygpKSkpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9ibGFja2xpc3RNYXAuY2xlYXIoKSx0aGlzLnN0YXJ0SW5kZXg9MCx0aGlzLm1heExpbWl0ZWQ9MTAwLHRoaXMuY3VycmVudFNlcXVlbmNlPTB9fV0pLGV9KCksQW09ZnVuY3Rpb24oZSl7QW4obixlKTt2YXIgdD1HbihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiVXNlck1vZHVsZVwiLG8uX3Byb2ZpbGVIYW5kbGVyPW5ldyBUbShibihvKSksby5fYmxhY2tsaXN0SGFuZGxlcj1uZXcgQ20oYm4obykpLG8uZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihWXyxvLm9uQ29udGV4dFVwZGF0ZWQsYm4obykpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJvbkNvbnRleHRVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcHJvZmlsZUhhbmRsZXIuZ2V0TXlQcm9maWxlKCksdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5nZXRCbGFja2xpc3QoKX19LHtrZXk6XCJvblByb2ZpbGVNb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Byb2ZpbGVIYW5kbGVyLm9uUHJvZmlsZU1vZGlmaWVkKGUpfX0se2tleTpcIm9uUmVsYXRpb25DaGFpbk1vZGlmaWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdDtpZighSmModCkpe3ZhciBuPVtdO3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5ibGFja0xpc3REZWxBY2NvdW50JiZuLnB1c2guYXBwbHkobixVbihlLmJsYWNrTGlzdERlbEFjY291bnQpKX0pKSxuLmxlbmd0aD4wJiZ0aGlzLl9ibGFja2xpc3RIYW5kbGVyLm9uQWNjb3VudERlbGV0ZWQobik7dmFyIG89W107dC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmJsYWNrTGlzdEFkZEFjY291bnQmJm8ucHVzaC5hcHBseShvLFVuKGUuYmxhY2tMaXN0QWRkQWNjb3VudCkpfSkpLG8ubGVuZ3RoPjAmJnRoaXMuX2JsYWNrbGlzdEhhbmRsZXIub25BY2NvdW50QWRkZWQobyl9fX0se2tleTpcIm9uQ29udmVyc2F0aW9uc1Byb2ZpbGVVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcHJvZmlsZUhhbmRsZXIub25Db252ZXJzYXRpb25zUHJvZmlsZVVwZGF0ZWQoZSl9fSx7a2V5OlwiZ2V0TXlBY2NvdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNeVVzZXJJRCgpfX0se2tleTpcImdldE15UHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb2ZpbGVIYW5kbGVyLmdldE15UHJvZmlsZSgpfX0se2tleTpcImdldFN0b3JhZ2VNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE1vZHVsZShkbCl9fSx7a2V5OlwiaXNNeUZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TW9kdWxlKGlsKTtyZXR1cm4hIXQmJnQuaXNNeUZyaWVuZChlKX19LHtrZXk6XCJnZXRVc2VyUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wcm9maWxlSGFuZGxlci5nZXRVc2VyUHJvZmlsZShlKX19LHtrZXk6XCJ1cGRhdGVNeVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcHJvZmlsZUhhbmRsZXIudXBkYXRlTXlQcm9maWxlKGUpfX0se2tleTpcImdldE5pY2tBbmRBdmF0YXJCeVVzZXJJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wcm9maWxlSGFuZGxlci5nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQoZSl9fSx7a2V5OlwiZ2V0TG9jYWxCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2JsYWNrbGlzdEhhbmRsZXIuZ2V0TG9jYWxCbGFja2xpc3QoKTtyZXR1cm4ga18oZSl9fSx7a2V5OlwiYWRkQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2JsYWNrbGlzdEhhbmRsZXIuYWRkQmxhY2tsaXN0KGUpfX0se2tleTpcImRlbGV0ZUJsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ibGFja2xpc3RIYW5kbGVyLmRlbGV0ZUJsYWNrbGlzdChlKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fcHJvZmlsZUhhbmRsZXIucmVzZXQoKSx0aGlzLl9ibGFja2xpc3RIYW5kbGVyLnJlc2V0KCl9fV0pLG59KEFsKSxEbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuKXt5bih0aGlzLGUpLHRoaXMuX21vZHVsZU1hbmFnZXI9dCx0aGlzLl9pc0xvZ2dlZEluPSExLHRoaXMuX1NES0FwcElEPW4uU0RLQXBwSUQsdGhpcy5fdXNlcklEPW4udXNlcklEfHxcIlwiLHRoaXMuX3VzZXJTaWc9bi51c2VyU2lnfHxcIlwiLHRoaXMuX3ZlcnNpb249XCIyLjE4LjBcIix0aGlzLl9hMktleT1cIlwiLHRoaXMuX3RpbnlJRD1cIlwiLHRoaXMuX2NvbnRlbnRUeXBlPVwianNvblwiLHRoaXMuX3VubGltaXRlZEFWQ2hhdFJvb209bi51bmxpbWl0ZWRBVkNoYXRSb29tLHRoaXMuX3NjZW5lPW4uc2NlbmV8fFwiXCIsdGhpcy5fb3ZlcnNlYT1uLm92ZXJzZWEsdGhpcy5faW5zdGFuY2VJRD1uLmluc3RhbmNlSUQsdGhpcy5fc3RhdHVzSW5zdGFuY2VJRD0wLHRoaXMuX2lzRGV2TW9kZT1uLmRldk1vZGUsdGhpcy5fcHJveHlTZXJ2ZXI9bi5wcm94eVNlcnZlcn1yZXR1cm4gRW4oZSxbe2tleTpcImlzTG9nZ2VkSW5cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0xvZ2dlZElufX0se2tleTpcImlzT3ZlcnNlYVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX292ZXJzZWF9fSx7a2V5OlwiaXNEZXZNb2RlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNEZXZNb2RlfX0se2tleTpcImlzU2luZ2Fwb3JlU2l0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX1NES0FwcElEPj0yZTcmJnRoaXMuX1NES0FwcElEPDNlN319LHtrZXk6XCJpc0tvcmVhU2l0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX1NES0FwcElEPj0zZTcmJnRoaXMuX1NES0FwcElEPDRlN319LHtrZXk6XCJpc0dlcm1hbnlTaXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fU0RLQXBwSUQ+PTRlNyYmdGhpcy5fU0RLQXBwSUQ8NWU3fX0se2tleTpcImlzSW5kaWFTaXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fU0RLQXBwSUQ+PTVlNyYmdGhpcy5fU0RLQXBwSUQ8NmU3fX0se2tleTpcImlzVW5saW1pdGVkQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VubGltaXRlZEFWQ2hhdFJvb219fSx7a2V5OlwiZ2V0VXNlcklEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlcklEfX0se2tleTpcInNldFVzZXJJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3VzZXJJRD1lfX0se2tleTpcInNldFVzZXJTaWdcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl91c2VyU2lnPWV9fSx7a2V5OlwiZ2V0VXNlclNpZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZXJTaWd9fSx7a2V5OlwiZ2V0U0RLQXBwSURcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9TREtBcHBJRH19LHtrZXk6XCJnZXRUaW55SURcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW55SUR9fSx7a2V5Olwic2V0VGlueUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fdGlueUlEPWUsdGhpcy5faXNMb2dnZWRJbj0hMH19LHtrZXk6XCJnZXRTY2VuZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVFVJS2l0KCk/XCJ0dWlraXRcIjp0aGlzLl9zY2VuZX19LHtrZXk6XCJnZXRJbnN0YW5jZUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5zdGFuY2VJRH19LHtrZXk6XCJnZXRTdGF0dXNJbnN0YW5jZUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdHVzSW5zdGFuY2VJRH19LHtrZXk6XCJzZXRTdGF0dXNJbnN0YW5jZUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdHVzSW5zdGFuY2VJRD1lfX0se2tleTpcImdldFZlcnNpb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92ZXJzaW9ufX0se2tleTpcImdldEEyS2V5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYTJLZXl9fSx7a2V5Olwic2V0QTJLZXlcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9hMktleT1lfX0se2tleTpcImdldENvbnRlbnRUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGVudFR5cGV9fSx7a2V5OlwiZ2V0UHJveHlTZXJ2ZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm94eVNlcnZlcn19LHtrZXk6XCJfaXNUVUlLaXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSExLHQ9ITEsbj0hMSxvPSExLHI9W107cGkmJihyPU9iamVjdC5rZXlzKGhpKSksZ2kmJihyPWRpP09iamVjdC5rZXlzKHVuaSk6T2JqZWN0LmtleXMod2luZG93KSk7Zm9yKHZhciBhPTAscz1yLmxlbmd0aDthPHM7YSsrKWlmKHJbYV0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInVpa2l0XCIpKXtlPSEwO2JyZWFrfWlmKHI9bnVsbCxwaSYmZmMoZ2V0QXBwKSl7dmFyIGk9Z2V0QXBwKCkuZ2xvYmFsRGF0YTtkYyhpKSYmITA9PT1pLmlzVFVJS2l0JiYodD0hMCl9ITA9PT10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShkbCkuZ2V0U3RvcmFnZVN5bmMoXCJUSU1fXCIuY29uY2F0KHRoaXMuX1NES0FwcElELFwiX2lzVFVJS2l0XCIpKSYmKG49ITApO3ZhciBjPW51bGw7aWYoYWkmJlwidW5kZWZpbmVkXCI9PXR5cGVvZiB1bmkmJl9fd3hDb25maWcmJihjPV9fd3hDb25maWcucGFnZXMpLHNpJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgdW5pJiZfX3FxQ29uZmlnJiYoYz1fX3FxQ29uZmlnLnBhZ2VzKSxwYyhjKSYmYy5sZW5ndGg+MCl7Zm9yKHZhciB1PTAsbD1jLmxlbmd0aDt1PGw7dSsrKWlmKGNbdV0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInR1aVwiKSl7bz0hMDticmVha31jPW51bGx9cmV0dXJuIGV8fHR8fG58fG99fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzTG9nZ2VkSW49ITEsdGhpcy5fdXNlclNpZz1cIlwiLHRoaXMuX2EyS2V5PVwiXCIsdGhpcy5fdGlueUlEPVwiXCIsdGhpcy5fc3RhdHVzSW5zdGFuY2VJRD0wfX1dKSxlfSgpLE5tPWZ1bmN0aW9uKGUpe0FuKG4sZSk7dmFyIHQ9R24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlNpZ25Nb2R1bGVcIixvLl9oZWxsb0ludGVydmFsPTEyMCxvLl9sYXN0TG9naW5Ucz0wLG8uX2xhc3RXc0hlbGxvVHM9MCxIXy5taXhpbihibihvKSksb31yZXR1cm4gRW4obixbe2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaXNMb2dnZWRJbigpJiZlJXRoaXMuX2hlbGxvSW50ZXJ2YWw9PTAmJnRoaXMuX2hlbGxvKCl9fSx7a2V5OlwibG9naW5cIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLmlzTG9nZ2VkSW4oKSl7dmFyIHQ9XCLmgqjlt7Lnu4/nmbvlvZXotKblj7dcIi5jb25jYXQoZS51c2VySUQsXCLvvIHlpoLpnIDliIfmjaLotKblj7fnmbvlvZXvvIzor7flhYjosIPnlKggbG9nb3V0IOaOpeWPo+eZu+WHuu+8jOWGjeiwg+eUqCBsb2dpbiDmjqXlj6PnmbvlvZXjgIJcIik7cmV0dXJuIFFpLndhcm4odCksa18oe2FjdGlvblN0YXR1czpcIk9LXCIsZXJyb3JDb2RlOjAsZXJyb3JJbmZvOnQscmVwZWF0TG9naW46ITB9KX1pZihEYXRlLm5vdygpLXRoaXMuX2xhc3RMb2dpblRzPD0xNWUzKXJldHVybiBRaS53YXJuKFwi5oKo5q2j5Zyo5bCd6K+V55m75b2V6LSm5Y+3XCIuY29uY2F0KGUudXNlcklELFwi77yB6K+35Yu/6YeN5aSN55m75b2V44CCXCIpKSxPXyh7Y29kZTp6ZC5SRVBFQVRfTE9HSU4sbWVzc2FnZTpKZC5SRVBFQVRfTE9HSU59KTtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmxvZ2luIHVzZXJJRDpcIikuY29uY2F0KGUudXNlcklEKSk7dmFyIG49dGhpcy5fY2hlY2tMb2dpbkluZm8oZSk7aWYoMCE9PW4uY29kZSlyZXR1cm4gT18obik7dmFyIG89dGhpcy5nZXRNb2R1bGUobGwpLHI9ZS51c2VySUQsYT1lLnVzZXJTaWc7cmV0dXJuIG8uc2V0VXNlcklEKHIpLG8uc2V0VXNlclNpZyhhKSx0aGlzLmdldE1vZHVsZSh2bCkudXBkYXRlUHJvdG9jb2xDb25maWcoKSx0aGlzLl9sb2dpbigpfX0se2tleTpcIl9sb2dpblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuZ2V0TW9kdWxlKGxsKSxuPXQuZ2V0U2NlbmUoKSxvPW5ldyBkcChocCk7cmV0dXJuIG8uc2V0TWVzc2FnZShcIlwiLmNvbmNhdChuKSkuc2V0TW9yZU1lc3NhZ2UoXCJpZGVudGlmaWVyOlwiLmNvbmNhdCh0aGlzLmdldE15VXNlcklEKCkpKSxkaT9cInR1aWtpdFwiPT09bj9vLnNldFVJUGxhdGZvcm0oNCk6by5zZXRVSVBsYXRmb3JtKDMpOnBpP1widHVpa2l0XCI9PT1uP28uc2V0VUlQbGF0Zm9ybSgxMik6by5zZXRVSVBsYXRmb3JtKDExKTpnaSYmKFwidHVpa2l0XCI9PT1uP28uc2V0VUlQbGF0Zm9ybSgxNCk6by5zZXRVSVBsYXRmb3JtKDEzKSksdGhpcy5fbGFzdExvZ2luVHM9RGF0ZS5ub3coKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpEbH0pLnRoZW4oKGZ1bmN0aW9uKHIpe2UuX2xhc3RMb2dpblRzPTA7dmFyIGE9RGF0ZS5ub3coKSxzPW51bGwsaT1yLmRhdGEsYz1pLmEyS2V5LHU9aS50aW55SUQsbD1pLmhlbGxvSW50ZXJ2YWwsZD1pLmluc3RhbmNlSUQscD1pLnRpbWVTdGFtcDtRaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLmxvZ2luIG9rLiBzY2VuZTpcIikuY29uY2F0KG4sXCIgaGVsbG9JbnRlcnZhbDpcIikuY29uY2F0KGwsXCIgaW5zdGFuY2VJRDpcIikuY29uY2F0KGQsXCIgdGltZVN0YW1wOlwiKS5jb25jYXQocCkpO3ZhciBnPTFlMypwLGg9YS1vLmdldFN0YXJ0VHMoKSxmPWcrcGFyc2VJbnQoaC8yKS1hLF89by5nZXRTdGFydFRzKCkrZjtpZihvLnN0YXJ0KF8pLGZ1bmN0aW9uKGUsdCl7amk9dDt2YXIgbj1uZXcgRGF0ZTtuLnNldFRpbWUoZSksUWkuaW5mbyhcImJhc2VUaW1lIGZyb20gc2VydmVyOiBcIi5jb25jYXQobixcIiBvZmZzZXQ6IFwiKS5jb25jYXQoamkpKX0oZyxmKSwhdSl0aHJvdyBzPW5ldyBBXyh7Y29kZTp6ZC5OT19USU5ZSUQsbWVzc2FnZTpKZC5OT19USU5ZSUR9KSxvLnNldEVycm9yKHMsITAsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxzO2lmKCFjKXRocm93IHM9bmV3IEFfKHtjb2RlOnpkLk5PX0EyS0VZLG1lc3NhZ2U6SmQuTk9fQTJLRVl9KSxvLnNldEVycm9yKHMsITAsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxzO3JldHVybiBvLnNldE5ldHdvcmtUeXBlKGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TW9yZU1lc3NhZ2UoXCJoZWxsb0ludGVydmFsOlwiLmNvbmNhdChsLFwiIGluc3RhbmNlSUQ6XCIpLmNvbmNhdChkLFwiIG9mZnNldDpcIikuY29uY2F0KGYpKS5lbmQoKSx0LnNldEEyS2V5KGMpLHQuc2V0VGlueUlEKHUpLHQuc2V0U3RhdHVzSW5zdGFuY2VJRChkKSxlLmdldE1vZHVsZSh2bCkudXBkYXRlUHJvdG9jb2xDb25maWcoKSxlLmVtaXRJbm5lckV2ZW50KFZfKSxlLl9oZWxsb0ludGVydmFsPWwsZS50cmlnZ2VyUmVhZHkoKSxlLl9mZXRjaENsb3VkQ29udHJvbENvbmZpZygpLHJ9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3JldHVybiBlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPVBuKGUsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKHQscixhKS5lbmQoITApfSkpLGUuX21vZHVsZU1hbmFnZXIuc2V0Tm90UmVhZHlSZWFzb24oemQuTE9HSU5fRkFJTEVEKSxRaS5lcnJvcihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIubG9naW4gZmFpbGVkLiBlcnJvcjpcIiksdCksZS5fbGFzdExvZ2luVHM9MCxlLl9tb2R1bGVNYW5hZ2VyLm9uTG9naW5GYWlsZWQoKSxPXyh0KX0pKX19LHtrZXk6XCJsb2dvdXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MDtpZighdGhpcy5pc0xvZ2dlZEluKCkpcmV0dXJuIE9fKHtjb2RlOnpkLlVTRVJfTk9UX0xPR0dFRF9JTixtZXNzYWdlOkpkLlVTRVJfTk9UX0xPR0dFRF9JTn0pO3ZhciBuPW5ldyBkcChmcCk7cmV0dXJuIG4uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiaWRlbnRpZmllcjpcIi5jb25jYXQodGhpcy5nZXRNeVVzZXJJRCgpKSkuZW5kKCEwKSxRaS5pbmZvKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5sb2dvdXQgdHlwZTpcIikuY29uY2F0KHQpKSwwPT09dCYmdGhpcy5fbW9kdWxlTWFuYWdlci5zZXROb3RSZWFkeVJlYXNvbih6ZC5MT0dHRURfT1VUKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpObCxyZXF1ZXN0RGF0YTp7dHlwZTp0fX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGUucmVzZXRSZWFkeSgpLGtfKHt9KX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7cmV0dXJuIFFpLmVycm9yKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fbG9nb3V0IGVycm9yOlwiKSx0KSxlLnJlc2V0UmVhZHkoKSxrXyh7fSl9KSl9fSx7a2V5OlwiX2ZldGNoQ2xvdWRDb250cm9sQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmdldE1vZHVsZShJbCkuZmV0Y2hDb25maWcoKX19LHtrZXk6XCJfaGVsbG9cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fbGFzdFdzSGVsbG9Ucz1EYXRlLm5vdygpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmtsfSkuY2F0Y2goKGZ1bmN0aW9uKHQpe1FpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9oZWxsbyBlcnJvcjpcIiksdCl9KSl9fSx7a2V5OlwiZ2V0TGFzdFdzSGVsbG9Uc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhc3RXc0hlbGxvVHN9fSx7a2V5OlwiX2NoZWNrTG9naW5JbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPVwiXCI7cmV0dXJuIEpjKHRoaXMuZ2V0TW9kdWxlKGxsKS5nZXRTREtBcHBJRCgpKT8odD16ZC5OT19TREtBUFBJRCxuPUpkLk5PX1NES0FQUElEKTpKYyhlLnVzZXJJRCk/KHQ9emQuTk9fSURFTlRJRklFUixuPUpkLk5PX0lERU5USUZJRVIpOkpjKGUudXNlclNpZykmJih0PXpkLk5PX1VTRVJTSUcsbj1KZC5OT19VU0VSU0lHKSx7Y29kZTp0LG1lc3NhZ2U6bn19fSx7a2V5Olwib25NdWx0aXBsZUFjY291bnRLaWNrZWRPdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO25ldyBkcChfcCkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwidHlwZTpcIi5jb25jYXQoWW4uS0lDS0VEX09VVF9NVUxUX0FDQ09VTlQsXCIgbmV3SW5zdGFuY2VJbmZvOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoZSkpKS5lbmQoITApLFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTXVsdGlwbGVBY2NvdW50S2lja2VkT3V0IHVzZXJJRDpcIikuY29uY2F0KHRoaXMuZ2V0TXlVc2VySUQoKSxcIiBuZXdJbnN0YW5jZUluZm86XCIpLGUpLHRoaXMubG9nb3V0KDEpLnRoZW4oKGZ1bmN0aW9uKCl7dC5lbWl0T3V0ZXJFdmVudChXbi5LSUNLRURfT1VULHt0eXBlOlluLktJQ0tFRF9PVVRfTVVMVF9BQ0NPVU5UfSksdC5fbW9kdWxlTWFuYWdlci5zZXROb3RSZWFkeVJlYXNvbih6ZC5LSUNLRURfT1VUX01VTFRfQUNDT1VOVCksdC5fbW9kdWxlTWFuYWdlci5yZXNldCgpfSkpfX0se2tleTpcIm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO25ldyBkcChfcCkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwidHlwZTpcIi5jb25jYXQoWW4uS0lDS0VEX09VVF9NVUxUX0RFVklDRSxcIiBuZXdJbnN0YW5jZUluZm86XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShlKSkpLmVuZCghMCksUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NdWx0aXBsZURldmljZUtpY2tlZE91dCB1c2VySUQ6XCIpLmNvbmNhdCh0aGlzLmdldE15VXNlcklEKCksXCIgbmV3SW5zdGFuY2VJbmZvOlwiKSxlKSx0aGlzLmxvZ291dCgxKS50aGVuKChmdW5jdGlvbigpe3QuZW1pdE91dGVyRXZlbnQoV24uS0lDS0VEX09VVCx7dHlwZTpZbi5LSUNLRURfT1VUX01VTFRfREVWSUNFfSksdC5fbW9kdWxlTWFuYWdlci5zZXROb3RSZWFkeVJlYXNvbih6ZC5LSUNLRURfT1VUX01VTFRfREVWSUNFKSx0Ll9tb2R1bGVNYW5hZ2VyLnJlc2V0KCl9KSl9fSx7a2V5Olwib25Vc2VyU2lnRXhwaXJlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7bmV3IGRwKF9wKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoWW4uS0lDS0VEX09VVF9VU0VSU0lHX0VYUElSRUQpLmVuZCghMCksUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Vc2VyU2lnRXhwaXJlZDogdXNlclNpZyDnrb7lkI3ov4fmnJ/ooqvouKLkuIvnur9cIikpLDAhPT10aGlzLmdldE1vZHVsZShsbCkuZ2V0U3RhdHVzSW5zdGFuY2VJRCgpJiYodGhpcy5lbWl0T3V0ZXJFdmVudChXbi5LSUNLRURfT1VULHt0eXBlOlluLktJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEfSksdGhpcy5fbW9kdWxlTWFuYWdlci5zZXROb3RSZWFkeVJlYXNvbih6ZC5LSUNLRURfT1VUX1VTRVJTSUdfRVhQSVJFRCksdGhpcy5fbW9kdWxlTWFuYWdlci5yZXNldCgpKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5yZXNldFJlYWR5KCksdGhpcy5faGVsbG9JbnRlcnZhbD0xMjAsdGhpcy5fbGFzdExvZ2luVHM9MCx0aGlzLl9sYXN0V3NIZWxsb1RzPTB9fV0pLG59KEFsKTtmdW5jdGlvbiBrbSgpe3JldHVybiBudWxsfWtlKHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLGZvcmNlZDohYSxzaGFtOiFhfSx7ZGVmaW5lUHJvcGVydHk6Ti5mfSk7dmFyIE9tPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX21vZHVsZU1hbmFnZXI9dCx0aGlzLl9jbGFzc05hbWU9XCJTdG9yYWdlTW9kdWxlXCIsdGhpcy5fc3RvcmFnZVF1ZXVlPW5ldyBNYXAsdGhpcy5fZXJyb3JUb2xlcmFudEhhbmRsZSgpfXJldHVybiBFbihlLFt7a2V5OlwiX2Vycm9yVG9sZXJhbnRIYW5kbGVcIix2YWx1ZTpmdW5jdGlvbigpe3BpfHwhZ2Mod2luZG93KSYmIWdjKHdpbmRvdy5sb2NhbFN0b3JhZ2UpfHwodGhpcy5nZXRJdGVtPWttLHRoaXMuc2V0SXRlbT1rbSx0aGlzLnJlbW92ZUl0ZW09a20sdGhpcy5jbGVhcj1rbSl9fSx7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZSUyMD09MCl7aWYoMD09PXRoaXMuX3N0b3JhZ2VRdWV1ZS5zaXplKXJldHVybjt0aGlzLl9kb0ZsdXNoKCl9fX0se2tleTpcIl9kb0ZsdXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXt0cnl7dmFyIGUsdD1Cbih0aGlzLl9zdG9yYWdlUXVldWUpO3RyeXtmb3IodC5zKCk7IShlPXQubigpKS5kb25lOyl7dmFyIG49UG4oZS52YWx1ZSwyKSxvPW5bMF0scj1uWzFdO3RoaXMuX3NldFN0b3JhZ2VTeW5jKHRoaXMuX2dldEtleShvKSxyKX19Y2F0Y2goYSl7dC5lKGEpfWZpbmFsbHl7dC5mKCl9dGhpcy5fc3RvcmFnZVF1ZXVlLmNsZWFyKCl9Y2F0Y2goc0kpe1FpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9kb0ZsdXNoIGVycm9yOlwiKSxzSSl9fX0se2tleTpcIl9nZXRQcmVmaXhcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGxsKTtyZXR1cm5cIlRJTV9cIi5jb25jYXQoZS5nZXRTREtBcHBJRCgpLFwiX1wiKS5jb25jYXQoZS5nZXRVc2VySUQoKSxcIl9cIil9fSx7a2V5OlwiX2dldEtleVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVyblwiXCIuY29uY2F0KHRoaXMuX2dldFByZWZpeCgpKS5jb25jYXQoZSl9fSx7a2V5OlwiZ2V0SXRlbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07dHJ5e3ZhciBuPXQ/dGhpcy5fZ2V0S2V5KGUpOmU7cmV0dXJuIHRoaXMuZ2V0U3RvcmFnZVN5bmMobil9Y2F0Y2goc0kpe3JldHVybiBRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRJdGVtIGVycm9yOlwiKSxzSSkse319fX0se2tleTpcInNldEl0ZW1cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl0sbz0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdO2lmKG4pe3ZhciByPW8/dGhpcy5fZ2V0S2V5KGUpOmU7dGhpcy5fc2V0U3RvcmFnZVN5bmMocix0KX1lbHNlIHRoaXMuX3N0b3JhZ2VRdWV1ZS5zZXQoZSx0KX19LHtrZXk6XCJjbGVhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dHJ5e3BpP2hpLmNsZWFyU3RvcmFnZVN5bmMoKTpsb2NhbFN0b3JhZ2UmJmxvY2FsU3RvcmFnZS5jbGVhcigpfWNhdGNoKHNJKXtRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5jbGVhciBlcnJvcjpcIiksc0kpfX19LHtrZXk6XCJyZW1vdmVJdGVtXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTt0cnl7dmFyIG49dD90aGlzLl9nZXRLZXkoZSk6ZTt0aGlzLl9yZW1vdmVTdG9yYWdlU3luYyhuKX1jYXRjaChzSSl7UWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVtb3ZlSXRlbSBlcnJvcjpcIiksc0kpfX19LHtrZXk6XCJnZXRTaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcImJcIjt0cnl7dmFyIG89e3NpemU6MCxsaW1pdFNpemU6NTI0Mjg4MCx1bml0Om59O2lmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLFwibGVmdFNpemVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5saW1pdFNpemUtby5zaXplfX0pLHBpJiYoby5saW1pdFNpemU9MTAyNCpoaS5nZXRTdG9yYWdlSW5mb1N5bmMoKS5saW1pdFNpemUpLGUpby5zaXplPUpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0SXRlbShlKSkubGVuZ3RoK3RoaXMuX2dldEtleShlKS5sZW5ndGg7ZWxzZSBpZihwaSl7dmFyIHI9aGkuZ2V0U3RvcmFnZUluZm9TeW5jKCksYT1yLmtleXM7YS5mb3JFYWNoKChmdW5jdGlvbihlKXtvLnNpemUrPUpTT04uc3RyaW5naWZ5KHQuZ2V0U3RvcmFnZVN5bmMoZSkpLmxlbmd0aCt0Ll9nZXRLZXkoZSkubGVuZ3RofSkpfWVsc2UgaWYobG9jYWxTdG9yYWdlKWZvcih2YXIgcyBpbiBsb2NhbFN0b3JhZ2UpbG9jYWxTdG9yYWdlLmhhc093blByb3BlcnR5KHMpJiYoby5zaXplKz1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShzKS5sZW5ndGgrcy5sZW5ndGgpO3JldHVybiB0aGlzLl9jb252ZXJ0VW5pdChvKX1jYXRjaChzSSl7UWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIgZXJyb3I6XCIpLHNJKX19fSx7a2V5OlwiX2NvbnZlcnRVbml0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30sbj1lLnVuaXQ7Zm9yKHZhciBvIGluIHQudW5pdD1uLGUpXCJudW1iZXJcIj09dHlwZW9mIGVbb10mJihcImtiXCI9PT1uLnRvTG93ZXJDYXNlKCk/dFtvXT1NYXRoLnJvdW5kKGVbb10vMTAyNCk6XCJtYlwiPT09bi50b0xvd2VyQ2FzZSgpP3Rbb109TWF0aC5yb3VuZChlW29dLzEwMjQvMTAyNCk6dFtvXT1lW29dKTtyZXR1cm4gdH19LHtrZXk6XCJfc2V0U3RvcmFnZVN5bmNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3BpP3VpP215LnNldFN0b3JhZ2VTeW5jKHtrZXk6ZSxkYXRhOnR9KTpoaS5zZXRTdG9yYWdlU3luYyhlLHQpOmxvY2FsU3RvcmFnZSYmbG9jYWxTdG9yYWdlLnNldEl0ZW0oZSxKU09OLnN0cmluZ2lmeSh0KSl9fSx7a2V5OlwiZ2V0U3RvcmFnZVN5bmNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gcGk/dWk/bXkuZ2V0U3RvcmFnZVN5bmMoe2tleTplfSkuZGF0YTpoaS5nZXRTdG9yYWdlU3luYyhlKTpsb2NhbFN0b3JhZ2U/SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKSk6e319fSx7a2V5OlwiX3JlbW92ZVN0b3JhZ2VTeW5jXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cGk/dWk/bXkucmVtb3ZlU3RvcmFnZVN5bmMoe2tleTplfSk6aGkucmVtb3ZlU3RvcmFnZVN5bmMoZSk6bG9jYWxTdG9yYWdlJiZsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShlKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fZG9GbHVzaCgpfX1dKSxlfSgpLFJtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX2NsYXNzTmFtZT1cIlNTT0xvZ0JvZHlcIix0aGlzLl9yZXBvcnQ9W119cmV0dXJuIEVuKGUsW3trZXk6XCJwdXNoSW5cIix2YWx1ZTpmdW5jdGlvbihlKXtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucHVzaEluXCIpLHRoaXMuX3JlcG9ydC5sZW5ndGgsZSksdGhpcy5fcmVwb3J0LnB1c2goZSl9fSx7a2V5OlwiYmFja2ZpbGxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdDtwYyhlKSYmMCE9PWUubGVuZ3RoJiYoUWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmJhY2tmaWxsXCIpLHRoaXMuX3JlcG9ydC5sZW5ndGgsZS5sZW5ndGgpLCh0PXRoaXMuX3JlcG9ydCkudW5zaGlmdC5hcHBseSh0LFVuKGUpKSl9fSx7a2V5OlwiZ2V0TG9nc051bUluTWVtb3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwb3J0Lmxlbmd0aH19LHtrZXk6XCJpc0VtcHR5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuX3JlcG9ydC5sZW5ndGh9fSx7a2V5OlwiX3Jlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZXBvcnQubGVuZ3RoPTAsdGhpcy5fcmVwb3J0PVtdfX0se2tleTpcImdldExvZ3NJbk1lbW9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcmVwb3J0LnNsaWNlKCk7cmV0dXJuIHRoaXMuX3Jlc2V0KCksZX19XSksZX0oKSxMbT1mdW5jdGlvbihlKXt2YXIgdD1lLmdldE1vZHVsZShsbCk7cmV0dXJue1NES1R5cGU6MTAsU0RLQXBwSUQ6dC5nZXRTREtBcHBJRCgpLFNES1ZlcnNpb246dC5nZXRWZXJzaW9uKCksdGlueUlEOk51bWJlcih0LmdldFRpbnlJRCgpKSx1c2VySUQ6dC5nZXRVc2VySUQoKSxwbGF0Zm9ybTplLmdldFBsYXRmb3JtKCksaW5zdGFuY2VJRDp0LmdldEluc3RhbmNlSUQoKSx0cmFjZUlEOldpKCl9fSxibT1mdW5jdGlvbihlKXtBbihuLGUpO3ZhciB0PUduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87eW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkV2ZW50U3RhdE1vZHVsZVwiLG8uVEFHPVwiaW0tc3NvbG9nLWV2ZW50XCIsby5fcmVwb3J0Qm9keT1uZXcgUm0sby5NSU5fVEhSRVNIT0xEPTIwLG8uTUFYX1RIUkVTSE9MRD0xMDAsby5XQUlUSU5HX1RJTUU9NmU0LG8uUkVQT1JUX0xFVkVMPVs0LDUsNl0sby5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPVtdLG8uUkVQT1JUX1RJTllJRF9XSElURUxJU1Q9W10sby5fbGFzdFJlcG9ydFRpbWU9RGF0ZS5ub3coKTt2YXIgcj1vLmdldElubmVyRW1pdHRlckluc3RhbmNlKCk7cmV0dXJuIHIub24oVl8sby5fb25Mb2dpblN1Y2Nlc3MsYm4obykpLHIub24oS18sby5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsYm4obykpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJyZXBvcnRBdE9uY2VcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXBvcnRBdE9uY2VcIikpLHRoaXMuX3JlcG9ydCgpfX0se2tleTpcIl9vbkxvZ2luU3VjY2Vzc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuZ2V0TW9kdWxlKGRsKSxuPXQuZ2V0SXRlbSh0aGlzLlRBRywhMSk7IUpjKG4pJiZmYyhuLmZvckVhY2gpJiYoUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25Mb2dpblN1Y2Nlc3MgZ2V0IHNzb2xvZyBpbiBzdG9yYWdlLCBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksbi5mb3JFYWNoKChmdW5jdGlvbih0KXtlLl9yZXBvcnRCb2R5LnB1c2hJbih0KX0pKSx0LnJlbW92ZUl0ZW0odGhpcy5UQUcsITEpKX19LHtrZXk6XCJfb25DbG91ZENvbmZpZ1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJldnRfcnB0X3RocmVzaG9sZFwiKSx0PXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJldnRfcnB0X3dhaXRpbmdcIiksbj10aGlzLmdldENsb3VkQ29uZmlnKFwiZXZ0X3JwdF9sZXZlbFwiKSxvPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJldnRfcnB0X3Nka2FwcGlkX2JsXCIpLHI9dGhpcy5nZXRDbG91ZENvbmZpZyhcImV2dF9ycHRfdGlueWlkX3dsXCIpO2djKGUpfHwodGhpcy5NSU5fVEhSRVNIT0xEPU51bWJlcihlKSksZ2ModCl8fCh0aGlzLldBSVRJTkdfVElNRT1OdW1iZXIodCkpLGdjKG4pfHwodGhpcy5SRVBPUlRfTEVWRUw9bi5zcGxpdChcIixcIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gTnVtYmVyKGUpfSkpKSxnYyhvKXx8KHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD1vLnNwbGl0KFwiLFwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBOdW1iZXIoZSl9KSkpLGdjKHIpfHwodGhpcy5SRVBPUlRfVElOWUlEX1dISVRFTElTVD1yLnNwbGl0KFwiLFwiKSl9fSx7a2V5OlwicHVzaEluXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSBpbnN0YW5jZW9mIGRwJiYoZS51cGRhdGVUaW1lU3RhbXAoKSx0aGlzLl9yZXBvcnRCb2R5LnB1c2hJbihlKSx0aGlzLl9yZXBvcnRCb2R5LmdldExvZ3NOdW1Jbk1lbW9yeSgpPj10aGlzLk1JTl9USFJFU0hPTEQmJnRoaXMuX3JlcG9ydCgpKX19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbigpe0RhdGUubm93KCk8dGhpcy5fbGFzdFJlcG9ydFRpbWUrdGhpcy5XQUlUSU5HX1RJTUV8fHRoaXMuX3JlcG9ydEJvZHkuaXNFbXB0eSgpfHx0aGlzLl9yZXBvcnQoKX19LHtrZXk6XCJfZmlsdGVyTG9nc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLmdldE1vZHVsZShsbCksbz1uLmdldFNES0FwcElEKCkscj1uLmdldFRpbnlJRCgpO3JldHVybiBZYyh0aGlzLlJFUE9SVF9TREtBUFBJRF9CTEFDS0xJU1QsbykmJiEkYyh0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNULHIpP1tdOmUuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gdC5SRVBPUlRfTEVWRUwuaW5jbHVkZXMoZS5sZXZlbCl9KSl9fSx7a2V5OlwiX3JlcG9ydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighdGhpcy5fcmVwb3J0Qm9keS5pc0VtcHR5KCkpe3ZhciB0PXRoaXMuX3JlcG9ydEJvZHkuZ2V0TG9nc0luTWVtb3J5KCksbj10aGlzLl9maWx0ZXJMb2dzKHQpO2lmKDAhPT1uLmxlbmd0aCl7dmFyIG89e2hlYWRlcjpMbSh0aGlzKSxldmVudDpufTt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpQZCxyZXF1ZXN0RGF0YTpDbih7fSxvKX0pLnRoZW4oKGZ1bmN0aW9uKCl7ZS5fbGFzdFJlcG9ydFRpbWU9RGF0ZS5ub3coKX0pKS5jYXRjaCgoZnVuY3Rpb24obil7UWkud2FybihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIucmVwb3J0IGZhaWxlZC4gbmV0d29ya1R5cGU6XCIpLmNvbmNhdChlLmdldE5ldHdvcmtUeXBlKCksXCIgZXJyb3I6XCIpLG4pLGUuX3JlcG9ydEJvZHkuYmFja2ZpbGwodCksZS5fcmVwb3J0Qm9keS5nZXRMb2dzTnVtSW5NZW1vcnkoKT5lLk1BWF9USFJFU0hPTEQmJmUuX2ZsdXNoQXRPbmNlKCl9KSl9ZWxzZSB0aGlzLl9sYXN0UmVwb3J0VGltZT1EYXRlLm5vdygpfX19LHtrZXk6XCJfZmx1c2hBdE9uY2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TW9kdWxlKGRsKSx0PWUuZ2V0SXRlbSh0aGlzLlRBRywhMSksbj10aGlzLl9yZXBvcnRCb2R5LmdldExvZ3NJbk1lbW9yeSgpO2lmKEpjKHQpKVFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2ZsdXNoQXRPbmNlIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKSxlLnNldEl0ZW0odGhpcy5UQUcsbiwhMCwhMSk7ZWxzZXt2YXIgbz1uLmNvbmNhdCh0KTtvLmxlbmd0aD50aGlzLk1BWF9USFJFU0hPTEQmJihvPW8uc2xpY2UoMCx0aGlzLk1BWF9USFJFU0hPTEQpKSxRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9mbHVzaEF0T25jZSBjb3VudDpcIikuY29uY2F0KG8ubGVuZ3RoKSksZS5zZXRJdGVtKHRoaXMuVEFHLG8sITAsITEpfX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fbGFzdFJlcG9ydFRpbWU9MCx0aGlzLl9yZXBvcnQoKSx0aGlzLlJFUE9SVF9TREtBUFBJRF9CTEFDS0xJU1Q9W10sdGhpcy5SRVBPUlRfVElOWUlEX1dISVRFTElTVD1bXX19XSksbn0oQWwpLHdtPVwibm9uZVwiLEdtPVwib25saW5lXCIsUG09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5fbW9kdWxlTWFuYWdlcj10LHRoaXMuX25ldHdvcmtUeXBlPVwiXCIsdGhpcy5fY2xhc3NOYW1lPVwiTmV0TW9uaXRvck1vZHVsZVwiLHRoaXMuTUFYX1dBSVRfVElNRT0zZTMsdGhpcy5fbXBOZXR3b3JrU3RhdHVzQ2FsbGJhY2s9bnVsbCx0aGlzLl93ZWJPbmxpbmVDYWxsYmFjaz1udWxsLHRoaXMuX3dlYk9mZmxpbmVDYWxsYmFjaz1udWxsfXJldHVybiBFbihlLFt7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cGk/KGhpLmdldE5ldHdvcmtUeXBlKHtzdWNjZXNzOmZ1bmN0aW9uKHQpe2UuX25ldHdvcmtUeXBlPXQubmV0d29ya1R5cGUsdC5uZXR3b3JrVHlwZT09PXdtP1FpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLnN0YXJ0IG5vIG5ldHdvcmssIHBsZWFzZSBjaGVjayFcIikpOlFpLmluZm8oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLnN0YXJ0IG5ldHdvcmtUeXBlOlwiKS5jb25jYXQodC5uZXR3b3JrVHlwZSkpfX0pLHRoaXMuX21wTmV0d29ya1N0YXR1c0NhbGxiYWNrPXRoaXMuX29uTmV0d29ya1N0YXR1c0NoYW5nZS5iaW5kKHRoaXMpLGhpLm9uTmV0d29ya1N0YXR1c0NoYW5nZSh0aGlzLl9tcE5ldHdvcmtTdGF0dXNDYWxsYmFjaykpOih0aGlzLl9uZXR3b3JrVHlwZT1HbSx0aGlzLl93ZWJPbmxpbmVDYWxsYmFjaz10aGlzLl9vbldlYk9ubGluZS5iaW5kKHRoaXMpLHRoaXMuX3dlYk9mZmxpbmVDYWxsYmFjaz10aGlzLl9vbldlYk9mZmxpbmUuYmluZCh0aGlzKSx3aW5kb3cmJih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLHRoaXMuX3dlYk9ubGluZUNhbGxiYWNrKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIix0aGlzLl93ZWJPZmZsaW5lQ2FsbGJhY2spKSl9fSx7a2V5OlwiX29uV2ViT25saW5lXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9vbk5ldHdvcmtTdGF0dXNDaGFuZ2Uoe2lzQ29ubmVjdGVkOiEwLG5ldHdvcmtUeXBlOkdtfSl9fSx7a2V5OlwiX29uV2ViT2ZmbGluZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fb25OZXR3b3JrU3RhdHVzQ2hhbmdlKHtpc0Nvbm5lY3RlZDohMSxuZXR3b3JrVHlwZTp3bX0pfX0se2tleTpcIl9vbk5ldHdvcmtTdGF0dXNDaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmlzQ29ubmVjdGVkLG49ZS5uZXR3b3JrVHlwZSxvPSExO3Q/KFFpLmluZm8oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbk5ldHdvcmtTdGF0dXNDaGFuZ2UgcHJldmlvdXNOZXR3b3JrVHlwZTpcIikuY29uY2F0KHRoaXMuX25ldHdvcmtUeXBlLFwiIGN1cnJlbnROZXR3b3JrVHlwZTpcIikuY29uY2F0KG4pKSx0aGlzLl9uZXR3b3JrVHlwZSE9PW4mJihvPSEwLHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKE1sKS5yZUNvbm5lY3QoITApKSk6dGhpcy5fbmV0d29ya1R5cGUhPT1uJiYobz0hMCxRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25OZXR3b3JrU3RhdHVzQ2hhbmdlIG5vIG5ldHdvcmssIHBsZWFzZSBjaGVjayFcIikpKTtvJiYobmV3IGRwKFRwKS5zZXRNZXNzYWdlKFwiaXNDb25uZWN0ZWQ6XCIuY29uY2F0KHQsXCIgcHJldmlvdXNOZXR3b3JrVHlwZTpcIikuY29uY2F0KHRoaXMuX25ldHdvcmtUeXBlLFwiIG5ldHdvcmtUeXBlOlwiKS5jb25jYXQobikpLmVuZCgpLHRoaXMuX25ldHdvcmtUeXBlPW4pfX0se2tleTpcInByb2JlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXtpZihwaSloaS5nZXROZXR3b3JrVHlwZSh7c3VjY2VzczpmdW5jdGlvbihuKXtlLl9uZXR3b3JrVHlwZT1uLm5ldHdvcmtUeXBlLG4ubmV0d29ya1R5cGU9PT13bT8oUWkud2FybihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIucHJvYmUgbm8gbmV0d29yaywgcGxlYXNlIGNoZWNrIVwiKSksdChbITEsbi5uZXR3b3JrVHlwZV0pKTooUWkuaW5mbyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIucHJvYmUgbmV0d29ya1R5cGU6XCIpLmNvbmNhdChuLm5ldHdvcmtUeXBlKSksdChbITAsbi5uZXR3b3JrVHlwZV0pKX19KTtlbHNlIGlmKHdpbmRvdyYmd2luZG93LmZldGNoKWZldGNoKFwiXCIuY29uY2F0KGtjKCksXCIvL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9hc3NldHMvc3BlZWQueG1sP3JhbmRvbT1cIikuY29uY2F0KE1hdGgucmFuZG9tKCkpKS50aGVuKChmdW5jdGlvbihlKXtlLm9rP3QoWyEwLEdtXSk6dChbITEsd21dKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dChbITEsd21dKX0pKTtlbHNle3ZhciBvPW5ldyBYTUxIdHRwUmVxdWVzdCxyPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7UWkud2FybihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIucHJvYmUgZmV0Y2ggdGltZW91dC4gUHJvYmFibHkgbm8gbmV0d29yaywgcGxlYXNlIGNoZWNrIVwiKSksby5hYm9ydCgpLGUuX25ldHdvcmtUeXBlPXdtLHQoWyExLHdtXSl9KSxlLk1BWF9XQUlUX1RJTUUpO28ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PW8ucmVhZHlTdGF0ZSYmKGNsZWFyVGltZW91dChyKSwyMDA9PT1vLnN0YXR1c3x8MzA0PT09by5zdGF0dXN8fDUxND09PW8uc3RhdHVzPyh0aGlzLl9uZXR3b3JrVHlwZT1HbSx0KFshMCxHbV0pKTooUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLmNsYXNzTmFtZSxcIi5wcm9iZSBmZXRjaCBzdGF0dXM6XCIpLmNvbmNhdChvLnN0YXR1cyxcIi4gUHJvYmFibHkgbm8gbmV0d29yaywgcGxlYXNlIGNoZWNrIVwiKSksdGhpcy5fbmV0d29ya1R5cGU9d20sdChbITEsd21dKSkpfSxvLm9wZW4oXCJHRVRcIixcIlwiLmNvbmNhdChrYygpLFwiLy93ZWIuc2RrLnFjbG91ZC5jb20vaW0vYXNzZXRzL3NwZWVkLnhtbD9yYW5kb209XCIpLmNvbmNhdChNYXRoLnJhbmRvbSgpKSksby5zZW5kKCl9fSkpfX0se2tleTpcImdldE5ldHdvcmtUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmV0d29ya1R5cGV9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHBpP251bGwhPT10aGlzLl9tcE5ldHdvcmtTdGF0dXNDYWxsYmFjayYmKGhpLm9mZk5ldHdvcmtTdGF0dXNDaGFuZ2UmJihsaXx8aWk/aGkub2ZmTmV0d29ya1N0YXR1c0NoYW5nZSh0aGlzLl9tcE5ldHdvcmtTdGF0dXNDYWxsYmFjayk6aGkub2ZmTmV0d29ya1N0YXR1c0NoYW5nZSgpKSx0aGlzLl9tcE5ldHdvcmtTdGF0dXNDYWxsYmFjaz1udWxsKTp3aW5kb3cmJihudWxsIT09dGhpcy5fd2ViT25saW5lQ2FsbGJhY2smJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLHRoaXMuX3dlYk9ubGluZUNhbGxiYWNrKSx0aGlzLl93ZWJPbmxpbmVDYWxsYmFjaz1udWxsKSxudWxsIT09dGhpcy5fb25XZWJPZmZsaW5lJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsdGhpcy5fd2ViT2ZmbGluZUNhbGxiYWNrKSx0aGlzLl93ZWJPZmZsaW5lQ2FsbGJhY2s9bnVsbCkpfX1dKSxlfSgpLFVtPXQoKGZ1bmN0aW9uKGUpe3ZhciB0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksbj1cIn5cIjtmdW5jdGlvbiBvKCl7fWZ1bmN0aW9uIHIoZSx0LG4pe3RoaXMuZm49ZSx0aGlzLmNvbnRleHQ9dCx0aGlzLm9uY2U9bnx8ITF9ZnVuY3Rpb24gYShlLHQsbyxhLHMpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG8pdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dmFyIGk9bmV3IHIobyxhfHxlLHMpLGM9bj9uK3Q6dDtyZXR1cm4gZS5fZXZlbnRzW2NdP2UuX2V2ZW50c1tjXS5mbj9lLl9ldmVudHNbY109W2UuX2V2ZW50c1tjXSxpXTplLl9ldmVudHNbY10ucHVzaChpKTooZS5fZXZlbnRzW2NdPWksZS5fZXZlbnRzQ291bnQrKyksZX1mdW5jdGlvbiBzKGUsdCl7MD09LS1lLl9ldmVudHNDb3VudD9lLl9ldmVudHM9bmV3IG86ZGVsZXRlIGUuX2V2ZW50c1t0XX1mdW5jdGlvbiBpKCl7dGhpcy5fZXZlbnRzPW5ldyBvLHRoaXMuX2V2ZW50c0NvdW50PTB9T2JqZWN0LmNyZWF0ZSYmKG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCksKG5ldyBvKS5fX3Byb3RvX198fChuPSExKSksaS5wcm90b3R5cGUuZXZlbnROYW1lcz1mdW5jdGlvbigpe3ZhciBlLG8scj1bXTtpZigwPT09dGhpcy5fZXZlbnRzQ291bnQpcmV0dXJuIHI7Zm9yKG8gaW4gZT10aGlzLl9ldmVudHMpdC5jYWxsKGUsbykmJnIucHVzaChuP28uc2xpY2UoMSk6byk7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/ci5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSk6cn0saS5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PW4/bitlOmUsbz10aGlzLl9ldmVudHNbdF07aWYoIW8pcmV0dXJuW107aWYoby5mbilyZXR1cm5bby5mbl07Zm9yKHZhciByPTAsYT1vLmxlbmd0aCxzPW5ldyBBcnJheShhKTtyPGE7cisrKXNbcl09b1tyXS5mbjtyZXR1cm4gc30saS5wcm90b3R5cGUubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlKXt2YXIgdD1uP24rZTplLG89dGhpcy5fZXZlbnRzW3RdO3JldHVybiBvP28uZm4/MTpvLmxlbmd0aDowfSxpLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUsdCxvLHIsYSxzKXt2YXIgaT1uP24rZTplO2lmKCF0aGlzLl9ldmVudHNbaV0pcmV0dXJuITE7dmFyIGMsdSxsPXRoaXMuX2V2ZW50c1tpXSxkPWFyZ3VtZW50cy5sZW5ndGg7aWYobC5mbil7c3dpdGNoKGwub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGwuZm4sdm9pZCAwLCEwKSxkKXtjYXNlIDE6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQpLCEwO2Nhc2UgMjpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCx0KSwhMDtjYXNlIDM6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQsdCxvKSwhMDtjYXNlIDQ6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQsdCxvLHIpLCEwO2Nhc2UgNTpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCx0LG8scixhKSwhMDtjYXNlIDY6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQsdCxvLHIsYSxzKSwhMH1mb3IodT0xLGM9bmV3IEFycmF5KGQtMSk7dTxkO3UrKyljW3UtMV09YXJndW1lbnRzW3VdO2wuZm4uYXBwbHkobC5jb250ZXh0LGMpfWVsc2V7dmFyIHAsZz1sLmxlbmd0aDtmb3IodT0wO3U8Zzt1Kyspc3dpdGNoKGxbdV0ub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGxbdV0uZm4sdm9pZCAwLCEwKSxkKXtjYXNlIDE6bFt1XS5mbi5jYWxsKGxbdV0uY29udGV4dCk7YnJlYWs7Y2FzZSAyOmxbdV0uZm4uY2FsbChsW3VdLmNvbnRleHQsdCk7YnJlYWs7Y2FzZSAzOmxbdV0uZm4uY2FsbChsW3VdLmNvbnRleHQsdCxvKTticmVhaztjYXNlIDQ6bFt1XS5mbi5jYWxsKGxbdV0uY29udGV4dCx0LG8scik7YnJlYWs7ZGVmYXVsdDppZighYylmb3IocD0xLGM9bmV3IEFycmF5KGQtMSk7cDxkO3ArKyljW3AtMV09YXJndW1lbnRzW3BdO2xbdV0uZm4uYXBwbHkobFt1XS5jb250ZXh0LGMpfX1yZXR1cm4hMH0saS5wcm90b3R5cGUub249ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBhKHRoaXMsZSx0LG4sITEpfSxpLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYSh0aGlzLGUsdCxuLCEwKX0saS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0LG8scil7dmFyIGE9bj9uK2U6ZTtpZighdGhpcy5fZXZlbnRzW2FdKXJldHVybiB0aGlzO2lmKCF0KXJldHVybiBzKHRoaXMsYSksdGhpczt2YXIgaT10aGlzLl9ldmVudHNbYV07aWYoaS5mbilpLmZuIT09dHx8ciYmIWkub25jZXx8byYmaS5jb250ZXh0IT09b3x8cyh0aGlzLGEpO2Vsc2V7Zm9yKHZhciBjPTAsdT1bXSxsPWkubGVuZ3RoO2M8bDtjKyspKGlbY10uZm4hPT10fHxyJiYhaVtjXS5vbmNlfHxvJiZpW2NdLmNvbnRleHQhPT1vKSYmdS5wdXNoKGlbY10pO3UubGVuZ3RoP3RoaXMuX2V2ZW50c1thXT0xPT09dS5sZW5ndGg/dVswXTp1OnModGhpcyxhKX1yZXR1cm4gdGhpc30saS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlPyh0PW4/bitlOmUsdGhpcy5fZXZlbnRzW3RdJiZzKHRoaXMsdCkpOih0aGlzLl9ldmVudHM9bmV3IG8sdGhpcy5fZXZlbnRzQ291bnQ9MCksdGhpc30saS5wcm90b3R5cGUub2ZmPWkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLGkucHJvdG90eXBlLmFkZExpc3RlbmVyPWkucHJvdG90eXBlLm9uLGkucHJlZml4ZWQ9bixpLkV2ZW50RW1pdHRlcj1pLGUuZXhwb3J0cz1pfSkpLEZtPWZ1bmN0aW9uKGUpe0FuKG4sZSk7dmFyIHQ9R24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkJpZ0RhdGFDaGFubmVsTW9kdWxlXCIsby5GSUxFVFlQRT17U09VTkQ6MjEwNixGSUxFOjIxMDcsVklERU86MjExM30sby5fYmRoX2Rvd25sb2FkX3NlcnZlcj1cImdyb3VwdGFsay5jMmMucXEuY29tXCIsby5fQkRIQml6SUQ9MTAwMDEsby5fYXV0aEtleT1cIlwiLG8uX2V4cGlyZVRpbWU9MCxvLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oVl8sby5fZ2V0QXV0aEtleSxibihvKSksb31yZXR1cm4gRW4obixbe2tleTpcIl9nZXRBdXRoS2V5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkxsfSkudGhlbigoZnVuY3Rpb24odCl7dC5kYXRhLmF1dGhLZXkmJihlLl9hdXRoS2V5PXQuZGF0YS5hdXRoS2V5LGUuX2V4cGlyZVRpbWU9cGFyc2VJbnQodC5kYXRhLmV4cGlyZVRpbWUpKX0pKX19LHtrZXk6XCJfaXNGcm9tT2xkZXJWZXJzaW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuISghZS5jb250ZW50fHwyPT09ZS5jb250ZW50LmRvd25sb2FkRmxhZyl9fSx7a2V5OlwicGFyc2VFbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoIXBjKGUpfHwhdClyZXR1cm5bXTtmb3IodmFyIG49W10sbz1udWxsLHI9MDtyPGUubGVuZ3RoO3IrKylvPWVbcl0sdGhpcy5fbmVlZFBhcnNlKG8pP24ucHVzaCh0aGlzLl9wYXJzZUVsZW1lbnQobyx0KSk6bi5wdXNoKGVbcl0pO3JldHVybiBufX0se2tleTpcIl9uZWVkUGFyc2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hZS5jbG91ZEN1c3RvbURhdGEmJiEoIXRoaXMuX2lzRnJvbU9sZGVyVmVyc2lvbihlKXx8ZS50eXBlIT09WW4uTVNHX0FVRElPJiZlLnR5cGUhPT1Zbi5NU0dfRklMRSYmZS50eXBlIT09WW4uTVNHX1ZJREVPKX19LHtrZXk6XCJfcGFyc2VFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtzd2l0Y2goZS50eXBlKXtjYXNlIFluLk1TR19BVURJTzpyZXR1cm4gdGhpcy5fcGFyc2VBdWRpb0VsZW1lbnQoZSx0KTtjYXNlIFluLk1TR19GSUxFOnJldHVybiB0aGlzLl9wYXJzZUZpbGVFbGVtZW50KGUsdCk7Y2FzZSBZbi5NU0dfVklERU86cmV0dXJuIHRoaXMuX3BhcnNlVmlkZW9FbGVtZW50KGUsdCl9fX0se2tleTpcIl9wYXJzZUF1ZGlvRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29udGVudC51cmw9dGhpcy5fZ2VuQXVkaW9VcmwoZS5jb250ZW50LnV1aWQsdCksZX19LHtrZXk6XCJfcGFyc2VGaWxlRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29udGVudC51cmw9dGhpcy5fZ2VuRmlsZVVybChlLmNvbnRlbnQudXVpZCx0LGUuY29udGVudC5maWxlTmFtZSksZX19LHtrZXk6XCJfcGFyc2VWaWRlb0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLmNvbnRlbnQudXJsPXRoaXMuX2dlblZpZGVvVXJsKGUuY29udGVudC51dWlkLHQpLGV9fSx7a2V5OlwiX2dlbkF1ZGlvVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZihcIlwiPT09dGhpcy5fYXV0aEtleSlyZXR1cm4gUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2dlbkF1ZGlvVXJsIG5vIGF1dGhLZXkhXCIpKSxcIlwiO3ZhciBuPXRoaXMuZ2V0TW9kdWxlKGxsKS5nZXRTREtBcHBJRCgpO3JldHVyblwiaHR0cHM6Ly9cIi5jb25jYXQodGhpcy5fYmRoX2Rvd25sb2FkX3NlcnZlcixcIi9hc24uY29tL3N0ZGRvd25sb2FkX2NvbW1vbl9maWxlP2F1dGhrZXk9XCIpLmNvbmNhdCh0aGlzLl9hdXRoS2V5LFwiJmJpZD1cIikuY29uY2F0KHRoaXMuX0JESEJpeklELFwiJnN1YmJpZD1cIikuY29uY2F0KG4sXCImZmlsZWlkPVwiKS5jb25jYXQoZSxcIiZmaWxldHlwZT1cIikuY29uY2F0KHRoaXMuRklMRVRZUEUuU09VTkQsXCImb3BlbmlkPVwiKS5jb25jYXQodCxcIiZ2ZXI9MFwiKX19LHtrZXk6XCJfZ2VuRmlsZVVybFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtpZihcIlwiPT09dGhpcy5fYXV0aEtleSlyZXR1cm4gUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2dlbkZpbGVVcmwgbm8gYXV0aEtleSFcIikpLFwiXCI7bnx8KG49XCJcIi5jb25jYXQoTWF0aC5mbG9vcigxZTUqTWF0aC5yYW5kb20oKSksXCItXCIpLmNvbmNhdChEYXRlLm5vdygpKSk7dmFyIG89dGhpcy5nZXRNb2R1bGUobGwpLmdldFNES0FwcElEKCk7cmV0dXJuXCJodHRwczovL1wiLmNvbmNhdCh0aGlzLl9iZGhfZG93bmxvYWRfc2VydmVyLFwiL2Fzbi5jb20vc3RkZG93bmxvYWRfY29tbW9uX2ZpbGU/YXV0aGtleT1cIikuY29uY2F0KHRoaXMuX2F1dGhLZXksXCImYmlkPVwiKS5jb25jYXQodGhpcy5fQkRIQml6SUQsXCImc3ViYmlkPVwiKS5jb25jYXQobyxcIiZmaWxlaWQ9XCIpLmNvbmNhdChlLFwiJmZpbGV0eXBlPVwiKS5jb25jYXQodGhpcy5GSUxFVFlQRS5GSUxFLFwiJm9wZW5pZD1cIikuY29uY2F0KHQsXCImdmVyPTAmZmlsZW5hbWU9XCIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQobikpfX0se2tleTpcIl9nZW5WaWRlb1VybFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoXCJcIj09PXRoaXMuX2F1dGhLZXkpcmV0dXJuIFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9nZW5WaWRlb1VybCBubyBhdXRoS2V5IVwiKSksXCJcIjt2YXIgbj10aGlzLmdldE1vZHVsZShsbCkuZ2V0U0RLQXBwSUQoKTtyZXR1cm5cImh0dHBzOi8vXCIuY29uY2F0KHRoaXMuX2JkaF9kb3dubG9hZF9zZXJ2ZXIsXCIvYXNuLmNvbS9zdGRkb3dubG9hZF9jb21tb25fZmlsZT9hdXRoa2V5PVwiKS5jb25jYXQodGhpcy5fYXV0aEtleSxcIiZiaWQ9XCIpLmNvbmNhdCh0aGlzLl9CREhCaXpJRCxcIiZzdWJiaWQ9XCIpLmNvbmNhdChuLFwiJmZpbGVpZD1cIikuY29uY2F0KGUsXCImZmlsZXR5cGU9XCIpLmNvbmNhdCh0aGlzLkZJTEVUWVBFLlZJREVPLFwiJm9wZW5pZD1cIikuY29uY2F0KHQsXCImdmVyPTBcIil9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX2F1dGhLZXk9XCJcIix0aGlzLmV4cGlyZVRpbWU9MH19XSksbn0oQWwpLHFtPWZ1bmN0aW9uKGUpe0FuKG4sZSk7dmFyIHQ9R24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlVwbG9hZE1vZHVsZVwiLG8uVElNVXBsb2FkUGx1Z2luPW51bGwsby50aW1VcGxvYWRQbHVnaW49bnVsbCxvLkNPU1NESz1udWxsLG8uX2Nvc1VwbG9hZE1ldGhvZD1udWxsLG8uZXhwaXJlZFRpbWVMaW1pdD02MDAsby5hcHBpZD0wLG8uYnVja2V0TmFtZT1cIlwiLG8uY2lVcmw9XCJcIixvLmRpcmVjdG9yeT1cIlwiLG8uZG93bmxvYWRVcmw9XCJcIixvLnVwbG9hZFVybD1cIlwiLG8ucmVnaW9uPVwiYXAtc2hhbmdoYWlcIixvLmNvcz1udWxsLG8uY29zT3B0aW9ucz17c2VjcmV0SWQ6XCJcIixzZWNyZXRLZXk6XCJcIixzZXNzaW9uVG9rZW46XCJcIixleHBpcmVkVGltZTowfSxvLnVwbG9hZEZpbGVUeXBlPVwiXCIsby5kdXJhdGlvbj05MDAsby50cnlDb3VudD0wLG8uZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihWXyxvLl9pbml0LGJuKG8pKSxvfXJldHVybiBFbihuLFt7a2V5OlwiX2luaXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5faW5pdFwiKSx0PXRoaXMuZ2V0TW9kdWxlKF9sKTtpZih0aGlzLlRJTVVwbG9hZFBsdWdpbj10LmdldFBsdWdpbihcInRpbS11cGxvYWQtcGx1Z2luXCIpLHRoaXMuVElNVXBsb2FkUGx1Z2luKXRoaXMuX2luaXRVcGxvYWRlck1ldGhvZCgpO2Vsc2V7dmFyIG49cGk/XCJjb3Mtd3gtc2RrXCI6XCJjb3MtanMtc2RrXCI7dGhpcy5DT1NTREs9dC5nZXRQbHVnaW4obiksdGhpcy5DT1NTREs/KHRoaXMuX2dldEF1dGhvcml6YXRpb25LZXkoKSxRaS53YXJuKFwiXCIuY29uY2F0KGUsXCIgdjIuOS4y6LW35o6o6I2Q5L2/55SoIHRpbS11cGxvYWQtcGx1Z2luIOS7o+abvyBcIikuY29uY2F0KG4sXCLvvIzkuIrkvKDmm7Tlv6vmm7TlronlhajjgILor6bnu4bor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI3JlZ2lzdGVyUGx1Z2luXCIpKSk6UWkud2FybihcIlwiLmNvbmNhdChlLFwiIOayoeacieajgOa1i+WIsOS4iuS8oOaPkuS7tu+8jOWwhuaXoOazleWPkemAgeWbvueJh+OAgemfs+mikeOAgeinhumikeOAgeaWh+S7tuetieexu+Wei+eahOa2iOaBr+OAguivpue7huivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjcmVnaXN0ZXJQbHVnaW5cIikpfX19LHtrZXk6XCJfZ2V0QXV0aG9yaXphdGlvbktleVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBkcChTcCksbj1NYXRoLmNlaWwoRGF0ZS5ub3coKS8xZTMpO3RoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmJkLHJlcXVlc3REYXRhOntkdXJhdGlvbjp0aGlzLmV4cGlyZWRUaW1lTGltaXR9fSkudGhlbigoZnVuY3Rpb24obyl7dmFyIHI9by5kYXRhO1FpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2dldEF1dGhvcml6YXRpb25LZXkgb2suIGRhdGE6XCIpLHIpO3ZhciBhPXIuZXhwaXJlZFRpbWUtbjt0LnNldE1lc3NhZ2UoXCJyZXF1ZXN0SWQ6XCIuY29uY2F0KHIucmVxdWVzdElkLFwiIHJlcXVlc3RUaW1lOlwiKS5jb25jYXQobixcIiBleHBpcmVkVGltZTpcIikuY29uY2F0KHIuZXhwaXJlZFRpbWUsXCIgZGlmZjpcIikuY29uY2F0KGEsXCJzXCIpKS5zZXROZXR3b3JrVHlwZShlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLCFwaSYmci5yZWdpb24mJihlLnJlZ2lvbj1yLnJlZ2lvbiksZS5hcHBpZD1yLmFwcGlkLGUuYnVja2V0TmFtZT1yLmJ1Y2tldE5hbWUsZS5jaVVybD1yLmNpVXJsLGUuZGlyZWN0b3J5PXIuZGlyZWN0b3J5LGUuZG93bmxvYWRVcmw9ci5kb3dubG9hZFVybCxlLnVwbG9hZFVybD1yLnVwbG9hZFVybCxlLmNvc09wdGlvbnM9e3NlY3JldElkOnIuc2VjcmV0SWQsc2VjcmV0S2V5OnIuc2VjcmV0S2V5LHNlc3Npb25Ub2tlbjpyLnNlc3Npb25Ub2tlbixleHBpcmVkVGltZTpyLmV4cGlyZWRUaW1lfSxRaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9nZXRBdXRob3JpemF0aW9uS2V5IG9rLiByZWdpb246XCIpLmNvbmNhdChlLnJlZ2lvbixcIiBidWNrZXROYW1lOlwiKS5jb25jYXQoZS5idWNrZXROYW1lKSksZS5faW5pdFVwbG9hZGVyTWV0aG9kKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKG4pe2UucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89UG4oZSwyKSxyPW9bMF0sYT1vWzFdO3Quc2V0RXJyb3IobixyLGEpLmVuZCgpfSkpLFFpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9nZXRBdXRob3JpemF0aW9uS2V5IGZhaWxlZC4gZXJyb3I6XCIpLG4pfSkpfX0se2tleTpcIl9nZXRDb3NQcmVTaWdVcmxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9nZXRDb3NQcmVTaWdVcmxcIiksbz1NYXRoLmNlaWwoRGF0ZS5ub3coKS8xZTMpLHI9bmV3IGRwKENwKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6d2QscmVxdWVzdERhdGE6e2ZpbGVUeXBlOmUuZmlsZVR5cGUsZmlsZU5hbWU6ZS5maWxlTmFtZSx1cGxvYWRNZXRob2Q6ZS51cGxvYWRNZXRob2QsZHVyYXRpb246ZS5kdXJhdGlvbn19KS50aGVuKChmdW5jdGlvbihlKXt0LnRyeUNvdW50PTA7dmFyIGE9ZS5kYXRhfHx7fSxzPWEuZXhwaXJlZFRpbWUtbztyZXR1cm4gUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIGRhdGE6XCIpLGEpLHIuc2V0TWVzc2FnZShcInJlcXVlc3RJZDpcIi5jb25jYXQoYS5yZXF1ZXN0SWQsXCIgZXhwaXJlZFRpbWU6XCIpLmNvbmNhdChhLmV4cGlyZWRUaW1lLFwiIGRpZmY6XCIpLmNvbmNhdChzLFwic1wiKSkuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxhfSkpLmNhdGNoKChmdW5jdGlvbihvKXtyZXR1cm4tMT09PW8uY29kZSYmKG8uY29kZT16ZC5DT1NfR0VUX1NJR19GQUlMKSx0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PVBuKGUsMiksbj10WzBdLGE9dFsxXTtyLnNldEVycm9yKG8sbixhKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksbyksdC50cnlDb3VudDwxPyh0LnRyeUNvdW50KyssdC5fZ2V0Q29zUHJlU2lnVXJsKGUpKToodC50cnlDb3VudD0wLE9fKHtjb2RlOnpkLkNPU19HRVRfU0lHX0ZBSUwsbWVzc2FnZTpKZC5DT1NfR0VUX1NJR19GQUlMfSkpfSkpfX0se2tleTpcIl9pbml0VXBsb2FkZXJNZXRob2RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy5USU1VcGxvYWRQbHVnaW4pcmV0dXJuIHRoaXMudGltVXBsb2FkUGx1Z2luPW5ldyB0aGlzLlRJTVVwbG9hZFBsdWdpbix2b2lkKHRoaXMuX2Nvc1VwbG9hZE1ldGhvZD1mdW5jdGlvbih0LG4pe2UudGltVXBsb2FkUGx1Z2luLnVwbG9hZEZpbGUodCxuKX0pO3RoaXMuYXBwaWQmJih0aGlzLmNvcz1waT9uZXcgdGhpcy5DT1NTREsoe0ZvcmNlUGF0aFN0eWxlOiEwLGdldEF1dGhvcml6YXRpb246dGhpcy5fZ2V0QXV0aG9yaXphdGlvbi5iaW5kKHRoaXMpfSk6bmV3IHRoaXMuQ09TU0RLKHtnZXRBdXRob3JpemF0aW9uOnRoaXMuX2dldEF1dGhvcml6YXRpb24uYmluZCh0aGlzKX0pLHRoaXMuX2Nvc1VwbG9hZE1ldGhvZD1waT9mdW5jdGlvbih0LG4pe2UuY29zLnBvc3RPYmplY3QodCxuKX06ZnVuY3Rpb24odCxuKXtlLmNvcy51cGxvYWRGaWxlcyh0LG4pfSl9fSx7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5DT1NTREsmJih0aGlzLlRJTVVwbG9hZFBsdWdpbnx8dGhpcy5pc0xvZ2dlZEluKCkmJmUlNjA9PTAmJk1hdGguY2VpbChEYXRlLm5vdygpLzFlMyk+PXRoaXMuY29zT3B0aW9ucy5leHBpcmVkVGltZS0xMjAmJnRoaXMuX2dldEF1dGhvcml6YXRpb25LZXkoKSl9fSx7a2V5OlwiX2dldEF1dGhvcml6YXRpb25cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3Qoe1RtcFNlY3JldElkOnRoaXMuY29zT3B0aW9ucy5zZWNyZXRJZCxUbXBTZWNyZXRLZXk6dGhpcy5jb3NPcHRpb25zLnNlY3JldEtleSxYQ29zU2VjdXJpdHlUb2tlbjp0aGlzLmNvc09wdGlvbnMuc2Vzc2lvblRva2VuLEV4cGlyZWRUaW1lOnRoaXMuY29zT3B0aW9ucy5leHBpcmVkVGltZX0pfX0se2tleTpcInVwbG9hZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCEwPT09ZS5nZXRSZWxheUZsYWcoKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dmFyIHQ9dGhpcy5nZXRNb2R1bGUoU2wpO3N3aXRjaChlLnR5cGUpe2Nhc2UgWW4uTVNHX0lNQUdFOnJldHVybiB0LmFkZFRvdGFsQ291bnQob3ApLHRoaXMuX3VwbG9hZEltYWdlKGUpO2Nhc2UgWW4uTVNHX0ZJTEU6cmV0dXJuIHQuYWRkVG90YWxDb3VudChvcCksdGhpcy5fdXBsb2FkRmlsZShlKTtjYXNlIFluLk1TR19BVURJTzpyZXR1cm4gdC5hZGRUb3RhbENvdW50KG9wKSx0aGlzLl91cGxvYWRBdWRpbyhlKTtjYXNlIFluLk1TR19WSURFTzpyZXR1cm4gdC5hZGRUb3RhbENvdW50KG9wKSx0aGlzLl91cGxvYWRWaWRlbyhlKTtkZWZhdWx0OnJldHVybiBQcm9taXNlLnJlc29sdmUoKX19fSx7a2V5OlwiX3VwbG9hZEltYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNb2R1bGUob2wpLG49ZS5nZXRFbGVtZW50cygpWzBdLG89dC5nZXRNZXNzYWdlT3B0aW9uKGUuY2xpZW50U2VxdWVuY2UpO3JldHVybiB0aGlzLmRvVXBsb2FkSW1hZ2Uoe2ZpbGU6by5wYXlsb2FkLmZpbGUsdG86by50byxvblByb2dyZXNzOmZ1bmN0aW9uKGUpe2lmKG4udXBkYXRlUGVyY2VudChlKSxmYyhvLm9uUHJvZ3Jlc3MpKXRyeXtvLm9uUHJvZ3Jlc3MoZSl9Y2F0Y2godCl7cmV0dXJuIE9fKHtjb2RlOnpkLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUixtZXNzYWdlOkpkLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUn0pfX19KS50aGVuKChmdW5jdGlvbih0KXt2YXIgbz10LmxvY2F0aW9uLHI9dC5maWxlVHlwZSxhPXQuZmlsZVNpemUscz10LndpZHRoLGk9dC5oZWlnaHQsYz1PYyhvKTtuLnVwZGF0ZUltYWdlRm9ybWF0KHIpO3ZhciB1PUJjKHtvcmlnaW5Vcmw6YyxvcmlnaW5XaWR0aDpzLG9yaWdpbkhlaWdodDppLG1pbjoxOTh9KSxsPUJjKHtvcmlnaW5Vcmw6YyxvcmlnaW5XaWR0aDpzLG9yaWdpbkhlaWdodDppLG1pbjo3MjB9KTtyZXR1cm4gbi51cGRhdGVJbWFnZUluZm9BcnJheShbe3NpemU6YSx1cmw6Yyx3aWR0aDpzLGhlaWdodDppfSxDbih7fSxsKSxDbih7fSx1KV0pLGV9KSl9fSx7a2V5OlwiX3VwbG9hZEZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE1vZHVsZShvbCksbj1lLmdldEVsZW1lbnRzKClbMF0sbz10LmdldE1lc3NhZ2VPcHRpb24oZS5jbGllbnRTZXF1ZW5jZSk7cmV0dXJuIHRoaXMuZG9VcGxvYWRGaWxlKHtmaWxlOm8ucGF5bG9hZC5maWxlLHRvOm8udG8sb25Qcm9ncmVzczpmdW5jdGlvbihlKXtpZihuLnVwZGF0ZVBlcmNlbnQoZSksZmMoby5vblByb2dyZXNzKSl0cnl7by5vblByb2dyZXNzKGUpfWNhdGNoKHQpe3JldHVybiBPXyh7Y29kZTp6ZC5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1IsbWVzc2FnZTpKZC5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1J9KX19fSkudGhlbigoZnVuY3Rpb24odCl7dmFyIG89dC5sb2NhdGlvbixyPU9jKG8pO3JldHVybiBuLnVwZGF0ZUZpbGVVcmwociksZX0pKX19LHtrZXk6XCJfdXBsb2FkQXVkaW9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE1vZHVsZShvbCksbj1lLmdldEVsZW1lbnRzKClbMF0sbz10LmdldE1lc3NhZ2VPcHRpb24oZS5jbGllbnRTZXF1ZW5jZSk7cmV0dXJuIHRoaXMuZG9VcGxvYWRBdWRpbyh7ZmlsZTpvLnBheWxvYWQuZmlsZSx0bzpvLnRvLG9uUHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7aWYobi51cGRhdGVQZXJjZW50KGUpLGZjKG8ub25Qcm9ncmVzcykpdHJ5e28ub25Qcm9ncmVzcyhlKX1jYXRjaCh0KXtyZXR1cm4gT18oe2NvZGU6emQuTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SLG1lc3NhZ2U6SmQuTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SfSl9fX0pLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBvPXQubG9jYXRpb24scj1PYyhvKTtyZXR1cm4gbi51cGRhdGVBdWRpb1VybChyKSxlfSkpfX0se2tleTpcIl91cGxvYWRWaWRlb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TW9kdWxlKG9sKSxuPWUuZ2V0RWxlbWVudHMoKVswXSxvPXQuZ2V0TWVzc2FnZU9wdGlvbihlLmNsaWVudFNlcXVlbmNlKTtyZXR1cm4gdGhpcy5kb1VwbG9hZFZpZGVvKHtmaWxlOm8ucGF5bG9hZC5maWxlLHRvOm8udG8sb25Qcm9ncmVzczpmdW5jdGlvbihlKXtpZihuLnVwZGF0ZVBlcmNlbnQoZSksZmMoby5vblByb2dyZXNzKSl0cnl7by5vblByb2dyZXNzKGUpfWNhdGNoKHQpe3JldHVybiBPXyh7Y29kZTp6ZC5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1IsbWVzc2FnZTpKZC5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1J9KX19fSkudGhlbigoZnVuY3Rpb24odCl7dmFyIG89dC5sb2NhdGlvbixyPXQuc25hcHNob3RJbmZvLGE9T2Mobyk7cmV0dXJuIG4udXBkYXRlVmlkZW9VcmwoYSksSmMocil8fG4udXBkYXRlU25hcHNob3RJbmZvKHIpLGV9KSl9fSx7a2V5OlwiZG9VcGxvYWRJbWFnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlLmZpbGUpcmV0dXJuIE9fKHtjb2RlOnpkLk1FU1NBR0VfSU1BR0VfU0VMRUNUX0ZJTEVfRklSU1QsbWVzc2FnZTpKZC5NRVNTQUdFX0lNQUdFX1NFTEVDVF9GSUxFX0ZJUlNUfSk7dmFyIHQ9dGhpcy5fY2hlY2tJbWFnZVR5cGUoZS5maWxlKTtpZighMCE9PXQpcmV0dXJuIHQ7dmFyIG49dGhpcy5fY2hlY2tJbWFnZVNpemUoZS5maWxlKTtpZighMCE9PW4pcmV0dXJuIG47dmFyIG89bnVsbDtyZXR1cm4gdGhpcy5fc2V0VXBsb2FkRmlsZVR5cGUoWV8pLHRoaXMudXBsb2FkQnlDT1MoZSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIG89ZSx4YyhcImh0dHBzOi8vXCIuY29uY2F0KGUubG9jYXRpb24pKX0pKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gby53aWR0aD1lLndpZHRoLG8uaGVpZ2h0PWUuaGVpZ2h0LFByb21pc2UucmVzb2x2ZShvKX0pKX19LHtrZXk6XCJfY2hlY2tJbWFnZVR5cGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiO3JldHVybiB0PXBpP2UudXJsLnNsaWNlKGUudXJsLmxhc3RJbmRleE9mKFwiLlwiKSsxKTplLmZpbGVzWzBdLm5hbWUuc2xpY2UoZS5maWxlc1swXS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSsxKSxqXy5pbmRleE9mKHQudG9Mb3dlckNhc2UoKSk+PTB8fE9fKHtjb2RlOnpkLk1FU1NBR0VfSU1BR0VfVFlQRVNfTElNSVQsbWVzc2FnZTpKZC5NRVNTQUdFX0lNQUdFX1RZUEVTX0xJTUlUfSl9fSx7a2V5OlwiX2NoZWNrSW1hZ2VTaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9MDtyZXR1cm4gMD09PSh0PXBpP2Uuc2l6ZTplLmZpbGVzWzBdLnNpemUpP09fKHtjb2RlOnpkLk1FU1NBR0VfRklMRV9JU19FTVBUWSxtZXNzYWdlOlwiXCIuY29uY2F0KEpkLk1FU1NBR0VfRklMRV9JU19FTVBUWSl9KTp0PDIwOTcxNTIwfHxPXyh7Y29kZTp6ZC5NRVNTQUdFX0lNQUdFX1NJWkVfTElNSVQsbWVzc2FnZTpcIlwiLmNvbmNhdChKZC5NRVNTQUdFX0lNQUdFX1NJWkVfTElNSVQpfSl9fSx7a2V5OlwiZG9VcGxvYWRGaWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbDtyZXR1cm4gZS5maWxlP2UuZmlsZS5maWxlc1swXS5zaXplPjEwNDg1NzYwMD9PXyh0PXtjb2RlOnpkLk1FU1NBR0VfRklMRV9TSVpFX0xJTUlULG1lc3NhZ2U6SmQuTUVTU0FHRV9GSUxFX1NJWkVfTElNSVR9KTowPT09ZS5maWxlLmZpbGVzWzBdLnNpemU/KHQ9e2NvZGU6emQuTUVTU0FHRV9GSUxFX0lTX0VNUFRZLG1lc3NhZ2U6XCJcIi5jb25jYXQoSmQuTUVTU0FHRV9GSUxFX0lTX0VNUFRZKX0sT18odCkpOih0aGlzLl9zZXRVcGxvYWRGaWxlVHlwZShKXyksdGhpcy51cGxvYWRCeUNPUyhlKSk6T18odD17Y29kZTp6ZC5NRVNTQUdFX0ZJTEVfU0VMRUNUX0ZJTEVfRklSU1QsbWVzc2FnZTpKZC5NRVNTQUdFX0ZJTEVfU0VMRUNUX0ZJTEVfRklSU1R9KX19LHtrZXk6XCJkb1VwbG9hZFZpZGVvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmlsZS52aWRlb0ZpbGUuc2l6ZT4xMDQ4NTc2MDA/T18oe2NvZGU6emQuTUVTU0FHRV9WSURFT19TSVpFX0xJTUlULG1lc3NhZ2U6XCJcIi5jb25jYXQoSmQuTUVTU0FHRV9WSURFT19TSVpFX0xJTUlUKX0pOjA9PT1lLmZpbGUudmlkZW9GaWxlLnNpemU/T18oe2NvZGU6emQuTUVTU0FHRV9GSUxFX0lTX0VNUFRZLG1lc3NhZ2U6XCJcIi5jb25jYXQoSmQuTUVTU0FHRV9GSUxFX0lTX0VNUFRZKX0pOi0xPT09V18uaW5kZXhPZihlLmZpbGUudmlkZW9GaWxlLnR5cGUpP09fKHtjb2RlOnpkLk1FU1NBR0VfVklERU9fVFlQRVNfTElNSVQsbWVzc2FnZTpcIlwiLmNvbmNhdChKZC5NRVNTQUdFX1ZJREVPX1RZUEVTX0xJTUlUKX0pOih0aGlzLl9zZXRVcGxvYWRGaWxlVHlwZSgkXykscGk/dGhpcy5oYW5kbGVWaWRlb1VwbG9hZCh7ZmlsZTplLmZpbGUudmlkZW9GaWxlLG9uUHJvZ3Jlc3M6ZS5vblByb2dyZXNzfSk6Z2k/dGhpcy5oYW5kbGVWaWRlb1VwbG9hZChlKTp2b2lkIDApfX0se2tleTpcImhhbmRsZVZpZGVvVXBsb2FkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4sbyl7dC51cGxvYWRCeUNPUyhlKS50aGVuKChmdW5jdGlvbihlKXtuKGUpfSkpLmNhdGNoKChmdW5jdGlvbigpe3QudXBsb2FkQnlDT1MoZSkudGhlbigoZnVuY3Rpb24oZSl7bihlKX0pKS5jYXRjaCgoZnVuY3Rpb24oKXtvKG5ldyBBXyh7Y29kZTp6ZC5NRVNTQUdFX1ZJREVPX1VQTE9BRF9GQUlMLG1lc3NhZ2U6SmQuTUVTU0FHRV9WSURFT19VUExPQURfRkFJTH0pKX0pKX0pKX0pKX19LHtrZXk6XCJkb1VwbG9hZEF1ZGlvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmlsZT9lLmZpbGUuc2l6ZT4yMDk3MTUyMD9PXyhuZXcgQV8oe2NvZGU6emQuTUVTU0FHRV9BVURJT19TSVpFX0xJTUlULG1lc3NhZ2U6XCJcIi5jb25jYXQoSmQuTUVTU0FHRV9BVURJT19TSVpFX0xJTUlUKX0pKTowPT09ZS5maWxlLnNpemU/T18obmV3IEFfKHtjb2RlOnpkLk1FU1NBR0VfRklMRV9JU19FTVBUWSxtZXNzYWdlOlwiXCIuY29uY2F0KEpkLk1FU1NBR0VfRklMRV9JU19FTVBUWSl9KSk6KHRoaXMuX3NldFVwbG9hZEZpbGVUeXBlKHpfKSx0aGlzLnVwbG9hZEJ5Q09TKGUpKTpPXyhuZXcgQV8oe2NvZGU6emQuTUVTU0FHRV9BVURJT19VUExPQURfRkFJTCxtZXNzYWdlOkpkLk1FU1NBR0VfQVVESU9fVVBMT0FEX0ZBSUx9KSl9fSx7a2V5OlwidXBsb2FkQnlDT1NcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwbG9hZEJ5Q09TXCIpO2lmKCFmYyh0aGlzLl9jb3NVcGxvYWRNZXRob2QpKXJldHVybiBRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIg5rKh5pyJ5qOA5rWL5Yiw5LiK5Lyg5o+S5Lu277yM5bCG5peg5rOV5Y+R6YCB5Zu+54mH44CB6Z+z6aKR44CB6KeG6aKR44CB5paH5Lu2562J57G75Z6L55qE5raI5oGv44CC6K+m57uG6K+35Y+C6ICDIGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9TREsuaHRtbCNyZWdpc3RlclBsdWdpblwiKSksT18oe2NvZGU6emQuQ09TX1VOREVURUNURUQsbWVzc2FnZTpKZC5DT1NfVU5ERVRFQ1RFRH0pO2lmKHRoaXMudGltVXBsb2FkUGx1Z2luKXJldHVybiB0aGlzLl91cGxvYWRXaXRoUHJlU2lnVXJsKGUpO3ZhciBvPW5ldyBkcChEcCkscj1EYXRlLm5vdygpLGE9dGhpcy5fZ2V0RmlsZShlKTtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHMsaSl7dmFyIGM9cGk/dC5fY3JlYXRlQ29zT3B0aW9uc1dYTWluaUFwcChlKTp0Ll9jcmVhdGVDb3NPcHRpb25zV2ViKGUpLHU9dDt0Ll9jb3NVcGxvYWRNZXRob2QoYywoZnVuY3Rpb24oZSxjKXt2YXIgbD1PYmplY3QuY3JlYXRlKG51bGwpO2lmKGMpe2lmKGV8fHBjKGMuZmlsZXMpJiZjLmZpbGVzWzBdLmVycm9yKXt2YXIgZD1uZXcgQV8oe2NvZGU6emQuTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMLG1lc3NhZ2U6SmQuTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMfSk7cmV0dXJuIG8uc2V0RXJyb3IoZCwhMCx0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGMuZmlsZXNbMF0uZXJyb3IpLDQwMz09PWMuZmlsZXNbMF0uZXJyb3Iuc3RhdHVzQ29kZSYmKFFpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGNvcyBBY2Nlc3NLZXlJZCB3YXMgaW52YWxpZCwgcmVnYWluIGF1dGgga2V5IVwiKSksdC5fZ2V0QXV0aG9yaXphdGlvbktleSgpKSx2b2lkIGkoZCl9bC5maWxlTmFtZT1hLm5hbWUsbC5maWxlU2l6ZT1hLnNpemUsbC5maWxlVHlwZT1hLnR5cGUuc2xpY2UoYS50eXBlLmluZGV4T2YoXCIvXCIpKzEpLnRvTG93ZXJDYXNlKCksbC5sb2NhdGlvbj1waT9jLkxvY2F0aW9uOmMuZmlsZXNbMF0uZGF0YS5Mb2NhdGlvbjt2YXIgcD1EYXRlLm5vdygpLXIsZz11Ll9mb3JtYXRGaWxlU2l6ZShhLnNpemUpLGg9dS5fZm9ybWF0U3BlZWQoMWUzKmEuc2l6ZS9wKSxmPVwic2l6ZTpcIi5jb25jYXQoZyxcIiB0aW1lOlwiKS5jb25jYXQocCxcIm1zIHNwZWVkOlwiKS5jb25jYXQoaCk7UWkubG9nKFwiXCIuY29uY2F0KG4sXCIgc3VjY2Vzcy4gbmFtZTpcIikuY29uY2F0KGEubmFtZSxcIiBcIikuY29uY2F0KGYpKSxzKGwpO3ZhciBfPXQuZ2V0TW9kdWxlKFNsKTtyZXR1cm4gXy5hZGRDb3N0KG9wLHApLF8uYWRkRmlsZVNpemUob3AsYS5zaXplKSx2b2lkIG8uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGYpLmVuZCgpfXZhciBtPW5ldyBBXyh7Y29kZTp6ZC5NRVNTQUdFX0ZJTEVfVVBMT0FEX0ZBSUwsbWVzc2FnZTpKZC5NRVNTQUdFX0ZJTEVfVVBMT0FEX0ZBSUx9KTtvLnNldEVycm9yKG0sITAsdS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksNDAzPT09ZS5zdGF0dXNDb2RlJiYoUWkud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gY29zIEFjY2Vzc0tleUlkIHdhcyBpbnZhbGlkLCByZWdhaW4gYXV0aCBrZXkhXCIpKSx0Ll9nZXRBdXRob3JpemF0aW9uS2V5KCkpLGkobSl9KSl9KSl9fSx7a2V5OlwiX3VwbG9hZFdpdGhQcmVTaWdVcmxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl91cGxvYWRXaXRoUHJlU2lnVXJsXCIpLG89dGhpcy5fZ2V0RmlsZShlKTtyZXR1cm4gdGhpcy5fY3JlYXRlQ29zT3B0aW9uc1ByZVNpZ1VybChlKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHIsYSl7dmFyIHM9bmV3IGRwKERwKSxpPWUucmVxdWVzdFNuYXBzaG90VXJsLGM9dm9pZCAwPT09aT92b2lkIDA6aSx1PUxuKGUsW1wicmVxdWVzdFNuYXBzaG90VXJsXCJdKSxsPURhdGUubm93KCk7dC5fY29zVXBsb2FkTWV0aG9kKHUsKGZ1bmN0aW9uKGUsaSl7dmFyIHU9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihlfHw0MDM9PT1pLnN0YXR1c0NvZGUpe3ZhciBkPW5ldyBBXyh7Y29kZTp6ZC5NRVNTQUdFX0ZJTEVfVVBMT0FEX0ZBSUwsbWVzc2FnZTpKZC5NRVNTQUdFX0ZJTEVfVVBMT0FEX0ZBSUx9KTtyZXR1cm4gcy5zZXRFcnJvcihkLCEwLHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLCBlcnJvcjpcIiksZSksdm9pZCBhKGQpfXZhciBwPWkuZGF0YS5sb2NhdGlvbnx8XCJcIjswIT09cC5pbmRleE9mKFwiaHR0cHM6Ly9cIikmJjAhPT1wLmluZGV4T2YoXCJodHRwOi8vXCIpfHwocD1wLnNwbGl0KFwiLy9cIilbMV0pLHUuZmlsZU5hbWU9by5uYW1lLHUuZmlsZVNpemU9by5zaXplLHUuZmlsZVR5cGU9by50eXBlLnNsaWNlKG8udHlwZS5pbmRleE9mKFwiL1wiKSsxKS50b0xvd2VyQ2FzZSgpLHUubG9jYXRpb249cDt2YXIgZz1EYXRlLm5vdygpLWwsaD10Ll9mb3JtYXRGaWxlU2l6ZShvLnNpemUpLGY9dC5fZm9ybWF0U3BlZWQoMWUzKm8uc2l6ZS9nKSxfPVwic2l6ZTpcIi5jb25jYXQoaCxcIix0aW1lOlwiKS5jb25jYXQoZyxcIm1zLHNwZWVkOlwiKS5jb25jYXQoZixcIiByZXM6XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShpLmRhdGEpKTtRaS5sb2coXCJcIi5jb25jYXQobixcIiBzdWNjZXNzIG5hbWU6XCIpLmNvbmNhdChvLm5hbWUsXCIsXCIpLmNvbmNhdChfKSkscy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXykuZW5kKCk7dmFyIG09dC5nZXRNb2R1bGUoU2wpO2lmKG0uYWRkQ29zdChvcCxnKSxtLmFkZEZpbGVTaXplKG9wLG8uc2l6ZSksIUpjKGMpKXJldHVybiB0Ll9nZXRTbmFwc2hvdEluZm9CeVVybChjKS50aGVuKChmdW5jdGlvbihlKXt1LnNuYXBzaG90SW5mbz1lLHIodSl9KSk7cih1KX0pKX0pKX0pKX19LHtrZXk6XCJfZ2V0RmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7cmV0dXJuIHBpP3Q9bGkmJnBjKGUuZmlsZS5maWxlcyk/ZS5maWxlLmZpbGVzWzBdOmUuZmlsZTpnaSYmKHQ9ZS5maWxlLmZpbGVzWzBdKSx0fX0se2tleTpcIl9mb3JtYXRGaWxlU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPDEwMjQ/ZStcIkJcIjplPDEwNDg1NzY/TWF0aC5mbG9vcihlLzEwMjQpK1wiS0JcIjpNYXRoLmZsb29yKGUvMTA0ODU3NikrXCJNQlwifX0se2tleTpcIl9mb3JtYXRTcGVlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPD0xMDQ4NTc2P1djKGUvMTAyNCwxKStcIktCL3NcIjpXYyhlLzEwNDg1NzYsMSkrXCJNQi9zXCJ9fSx7a2V5OlwiX2NyZWF0ZUNvc09wdGlvbnNXZWJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmZpbGUuZmlsZXNbMF0ubmFtZSxuPXQuc2xpY2UodC5sYXN0SW5kZXhPZihcIi5cIikpLG89dGhpcy5fZ2VuRmlsZU5hbWUoXCJcIi5jb25jYXQoU2MoOTk5OTk5KSkuY29uY2F0KG4pKTtyZXR1cm57ZmlsZXM6W3tCdWNrZXQ6XCJcIi5jb25jYXQodGhpcy5idWNrZXROYW1lLFwiLVwiKS5jb25jYXQodGhpcy5hcHBpZCksUmVnaW9uOnRoaXMucmVnaW9uLEtleTpcIlwiLmNvbmNhdCh0aGlzLmRpcmVjdG9yeSxcIi9cIikuY29uY2F0KG8pLEJvZHk6ZS5maWxlLmZpbGVzWzBdfV0sU2xpY2VTaXplOjEwNDg1NzYsb25Qcm9ncmVzczpmdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uUHJvZ3Jlc3MpdHJ5e2Uub25Qcm9ncmVzcyh0LnBlcmNlbnQpfWNhdGNoKG4pe1FpLndhcm4oXCJvblByb2dyZXNzIGNhbGxiYWNrIGVycm9yOlwiLG4pfX0sb25GaWxlRmluaXNoOmZ1bmN0aW9uKGUsdCxuKXt9fX19LHtrZXk6XCJfY3JlYXRlQ29zT3B0aW9uc1dYTWluaUFwcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldEZpbGUoZSksbj10aGlzLl9nZW5GaWxlTmFtZSh0Lm5hbWUpLG89dC51cmw7cmV0dXJue0J1Y2tldDpcIlwiLmNvbmNhdCh0aGlzLmJ1Y2tldE5hbWUsXCItXCIpLmNvbmNhdCh0aGlzLmFwcGlkKSxSZWdpb246dGhpcy5yZWdpb24sS2V5OlwiXCIuY29uY2F0KHRoaXMuZGlyZWN0b3J5LFwiL1wiKS5jb25jYXQobiksRmlsZVBhdGg6byxvblByb2dyZXNzOmZ1bmN0aW9uKHQpe2lmKFFpLmxvZyhKU09OLnN0cmluZ2lmeSh0KSksXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vblByb2dyZXNzKXRyeXtlLm9uUHJvZ3Jlc3ModC5wZXJjZW50KX1jYXRjaChuKXtRaS53YXJuKFwib25Qcm9ncmVzcyBjYWxsYmFjayBlcnJvcjpcIixuKX19fX19LHtrZXk6XCJfY3JlYXRlQ29zT3B0aW9uc1ByZVNpZ1VybFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLG89XCJcIixyPTA7aWYocGkpe3ZhciBhPXRoaXMuX2dldEZpbGUoZSk7bj10aGlzLl9nZW5GaWxlTmFtZShhLm5hbWUpLG89YS51cmwscj0xfWVsc2V7dmFyIHM9ZS5maWxlLmZpbGVzWzBdLm5hbWUsaT1zLnNsaWNlKHMubGFzdEluZGV4T2YoXCIuXCIpKTtuPXRoaXMuX2dlbkZpbGVOYW1lKFwiXCIuY29uY2F0KFNjKDk5OTk5OSkpLmNvbmNhdChpKSksbz1lLmZpbGUuZmlsZXNbMF0scj0wfXJldHVybiB0aGlzLl9nZXRDb3NQcmVTaWdVcmwoe2ZpbGVUeXBlOnRoaXMudXBsb2FkRmlsZVR5cGUsZmlsZU5hbWU6bix1cGxvYWRNZXRob2Q6cixkdXJhdGlvbjp0aGlzLmR1cmF0aW9ufSkudGhlbigoZnVuY3Rpb24ocil7dmFyIGE9ci51cGxvYWRVcmwscz1yLmRvd25sb2FkVXJsLGk9ci5yZXF1ZXN0U25hcHNob3RVcmwsYz12b2lkIDA9PT1pP3ZvaWQgMDppO3JldHVybnt1cmw6YSxmaWxlVHlwZTp0LnVwbG9hZEZpbGVUeXBlLGZpbGVOYW1lOm4scmVzb3VyY2VzOm8sZG93bmxvYWRVcmw6cyxyZXF1ZXN0U25hcHNob3RVcmw6YyxvblByb2dyZXNzOmZ1bmN0aW9uKHQpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUub25Qcm9ncmVzcyl0cnl7ZS5vblByb2dyZXNzKHQucGVyY2VudCl9Y2F0Y2gobil7UWkud2FybihcIm9uUHJvZ3Jlc3MgY2FsbGJhY2sgZXJyb3I6XCIsbiksUWkuZXJyb3Iobil9fX19KSl9fSx7a2V5OlwiX2dlbkZpbGVOYW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuXCJcIi5jb25jYXQoVmMoKSxcIi1cIikuY29uY2F0KGUpfX0se2tleTpcIl9zZXRVcGxvYWRGaWxlVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMudXBsb2FkRmlsZVR5cGU9ZX19LHtrZXk6XCJfZ2V0U25hcHNob3RJbmZvQnlVcmxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49bmV3IGRwKEFwKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6R2QscmVxdWVzdERhdGE6e3BsYXRmb3JtOnRoaXMuZ2V0UGxhdGZvcm0oKSxjb3Zlck5hbWU6dGhpcy5fZ2VuRmlsZU5hbWUoU2MoOTk5OTkpKSxyZXF1ZXN0U25hcHNob3RVcmw6ZX19KS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD0oZS5kYXRhfHx7fSkuc25hcHNob3RVcmw7cmV0dXJuIG4uc2V0TWVzc2FnZShcInNuYXBzaG90VXJsOlwiLmNvbmNhdCh0KSkuZW5kKCksSmModCk/e306eGModCkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJue3NuYXBzaG90VXJsOnQsc25hcHNob3RXaWR0aDplLndpZHRoLHNuYXBzaG90SGVpZ2h0OmUuaGVpZ2h0fX0pKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIFFpLndhcm4oXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLl9nZXRTbmFwc2hvdEluZm9CeVVybCBmYWlsZWQuIGVycm9yOlwiKSxlKSxuLnNldENvZGUoZS5lcnJvckNvZGUpLnNldE1lc3NhZ2UoZS5lcnJvckluZm8pLmVuZCgpLHt9fSkpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKX19XSksbn0oQWwpLHhtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX2NsYXNzTmFtZT1cIk1lcmdlck1lc3NhZ2VIYW5kbGVyXCIsdGhpcy5fbWVzc2FnZU1vZHVsZT10fXJldHVybiBFbihlLFt7a2V5OlwidXBsb2FkTWVyZ2VyTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIudXBsb2FkTWVyZ2VyTWVzc2FnZSBtZXNzYWdlOlwiKSxlLFwibWVzc2FnZUJ5dGVzOlwiLmNvbmNhdCh0KSk7dmFyIG89ZS5wYXlsb2FkLm1lc3NhZ2VMaXN0LHI9by5sZW5ndGgsYT1uZXcgZHAoVnApO3JldHVybiB0aGlzLl9tZXNzYWdlTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpLZCxyZXF1ZXN0RGF0YTp7bWVzc2FnZUxpc3Q6b319KS50aGVuKChmdW5jdGlvbihlKXtRaS5kZWJ1ZyhcIlwiLmNvbmNhdChuLl9jbGFzc05hbWUsXCIudXBsb2FkTWVyZ2VyTWVzc2FnZSBvay4gcmVzcG9uc2U6XCIpLGUuZGF0YSk7dmFyIG89ZS5kYXRhLHM9by5wYkRvd25sb2FkS2V5LGk9by5kb3dubG9hZEtleSxjPXtwYkRvd25sb2FkS2V5OnMsZG93bmxvYWRLZXk6aSxtZXNzYWdlTnVtYmVyOnJ9O3JldHVybiBhLnNldE5ldHdvcmtUeXBlKG4uX21lc3NhZ2VNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChyLFwiLVwiKS5jb25jYXQodCxcIi1cIikuY29uY2F0KGkpKS5lbmQoKSxjfSkpLmNhdGNoKChmdW5jdGlvbihlKXt0aHJvdyBRaS53YXJuKFwiXCIuY29uY2F0KG4uX2NsYXNzTmFtZSxcIi51cGxvYWRNZXJnZXJNZXNzYWdlIGZhaWxlZC4gZXJyb3I6XCIpLGUpLG4uX21lc3NhZ2VNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49UG4odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLGV9KSl9fSx7a2V5OlwiZG93bmxvYWRNZXJnZXJNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZG93bmxvYWRNZXJnZXJNZXNzYWdlIG1lc3NhZ2U6XCIpLGUpO3ZhciBuPWUucGF5bG9hZC5kb3dubG9hZEtleSxvPW5ldyBkcChLcCk7cmV0dXJuIG8uc2V0TWVzc2FnZShcImRvd25sb2FkS2V5OlwiLmNvbmNhdChuKSksdGhpcy5fbWVzc2FnZU1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6QmQscmVxdWVzdERhdGE6e2Rvd25sb2FkS2V5Om59fSkudGhlbigoZnVuY3Rpb24obil7aWYoUWkuZGVidWcoXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmRvd25sb2FkTWVyZ2VyTWVzc2FnZSBvay4gcmVzcG9uc2U6XCIpLG4uZGF0YSksZmMoZS5jbGVhckVsZW1lbnQpKXt2YXIgcj1lLnBheWxvYWQsYT0oci5kb3dubG9hZEtleSxyLnBiRG93bmxvYWRLZXksci5tZXNzYWdlTGlzdCxMbihyLFtcImRvd25sb2FkS2V5XCIsXCJwYkRvd25sb2FkS2V5XCIsXCJtZXNzYWdlTGlzdFwiXSkpO2UuY2xlYXJFbGVtZW50KCksZS5zZXRFbGVtZW50KHt0eXBlOmUudHlwZSxjb250ZW50OkNuKHttZXNzYWdlTGlzdDpuLmRhdGEubWVzc2FnZUxpc3R9LGEpfSl9ZWxzZXt2YXIgcz1bXTtuLmRhdGEubWVzc2FnZUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoIUpjKGUpKXt2YXIgdD1uZXcgX18oZSk7cy5wdXNoKHQpfX0pKSxlLnBheWxvYWQubWVzc2FnZUxpc3Q9cyxlLnBheWxvYWQuZG93bmxvYWRLZXk9XCJcIixlLnBheWxvYWQucGJEb3dubG9hZEtleT1cIlwifXJldHVybiBvLnNldE5ldHdvcmtUeXBlKHQuX21lc3NhZ2VNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksZX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dGhyb3cgUWkud2FybihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZG93bmxvYWRNZXJnZXJNZXNzYWdlIGZhaWxlZC4ga2V5OlwiKS5jb25jYXQobixcIiBlcnJvcjpcIiksZSksdC5fbWVzc2FnZU1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksZX0pKX19LHtrZXk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlUGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9DMkM/dGhpcy5fY3JlYXRlQzJDTWVyZ2VyTWVzc2FnZVBhY2soZSx0LG4pOnRoaXMuX2NyZWF0ZUdyb3VwTWVyZ2VyTWVzc2FnZVBhY2soZSx0LG4pfX0se2tleTpcIl9jcmVhdGVDMkNNZXJnZXJNZXNzYWdlUGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgbz1udWxsO3QmJih0Lm9mZmxpbmVQdXNoSW5mbyYmKG89dC5vZmZsaW5lUHVzaEluZm8pLCEwPT09dC5vbmxpbmVVc2VyT25seSYmKG8/by5kaXNhYmxlUHVzaD0hMDpvPXtkaXNhYmxlUHVzaDohMH0pKTt2YXIgcj1cIlwiO3VjKGUuY2xvdWRDdXN0b21EYXRhKSYmZS5jbG91ZEN1c3RvbURhdGEubGVuZ3RoPjAmJihyPWUuY2xvdWRDdXN0b21EYXRhKTt2YXIgYT1uLnBiRG93bmxvYWRLZXkscz1uLmRvd25sb2FkS2V5LGk9bi5tZXNzYWdlTnVtYmVyLGM9ZS5wYXlsb2FkLHU9Yy50aXRsZSxsPWMuYWJzdHJhY3RMaXN0LGQ9Yy5jb21wYXRpYmxlVGV4dCxwPXRoaXMuX21lc3NhZ2VNb2R1bGUuZ2V0TW9kdWxlKGFsKTtyZXR1cm57cHJvdG9jb2xOYW1lOmJsLHRqZ0lEOnRoaXMuX21lc3NhZ2VNb2R1bGUuZ2VuZXJhdGVUamdJRChlKSxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fbWVzc2FnZU1vZHVsZS5nZXRNeVVzZXJJRCgpLHRvQWNjb3VudDplLnRvLG1zZ0JvZHk6W3ttc2dUeXBlOmUudHlwZSxtc2dDb250ZW50OntwYkRvd25sb2FkS2V5OmEsZG93bmxvYWRLZXk6cyx0aXRsZTp1LGFic3RyYWN0TGlzdDpsLGNvbXBhdGlibGVUZXh0OmQsbWVzc2FnZU51bWJlcjppfX1dLGNsb3VkQ3VzdG9tRGF0YTpyLG1zZ1NlcTplLnNlcXVlbmNlLG1zZ1JhbmRvbTplLnJhbmRvbSxtc2dMaWZlVGltZTpwJiZwLmlzT25saW5lTWVzc2FnZShlLHQpPzA6dm9pZCAwLG9mZmxpbmVQdXNoSW5mbzpvP3twdXNoRmxhZzohMD09PW8uZGlzYWJsZVB1c2g/MTowLHRpdGxlOm8udGl0bGV8fFwiXCIsZGVzYzpvLmRlc2NyaXB0aW9ufHxcIlwiLGV4dDpvLmV4dGVuc2lvbnx8XCJcIixhcG5zSW5mbzp7YmFkZ2VNb2RlOiEwPT09by5pZ25vcmVJT1NCYWRnZT8xOjB9LGFuZHJvaWRJbmZvOntPUFBPQ2hhbm5lbElEOm8uYW5kcm9pZE9QUE9DaGFubmVsSUR8fFwiXCJ9fTp2b2lkIDB9fX19LHtrZXk6XCJfY3JlYXRlR3JvdXBNZXJnZXJNZXNzYWdlUGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgbz1udWxsO3QmJnQub2ZmbGluZVB1c2hJbmZvJiYobz10Lm9mZmxpbmVQdXNoSW5mbyk7dmFyIHI9XCJcIjt1YyhlLmNsb3VkQ3VzdG9tRGF0YSkmJmUuY2xvdWRDdXN0b21EYXRhLmxlbmd0aD4wJiYocj1lLmNsb3VkQ3VzdG9tRGF0YSk7dmFyIGE9bi5wYkRvd25sb2FkS2V5LHM9bi5kb3dubG9hZEtleSxpPW4ubWVzc2FnZU51bWJlcixjPWUucGF5bG9hZCx1PWMudGl0bGUsbD1jLmFic3RyYWN0TGlzdCxkPWMuY29tcGF0aWJsZVRleHQscD10aGlzLl9tZXNzYWdlTW9kdWxlLmdldE1vZHVsZShzbCk7cmV0dXJue3Byb3RvY29sTmFtZTp3bCx0amdJRDp0aGlzLl9tZXNzYWdlTW9kdWxlLmdlbmVyYXRlVGpnSUQoZSkscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX21lc3NhZ2VNb2R1bGUuZ2V0TXlVc2VySUQoKSxncm91cElEOmUudG8sbXNnQm9keTpbe21zZ1R5cGU6ZS50eXBlLG1zZ0NvbnRlbnQ6e3BiRG93bmxvYWRLZXk6YSxkb3dubG9hZEtleTpzLHRpdGxlOnUsYWJzdHJhY3RMaXN0OmwsY29tcGF0aWJsZVRleHQ6ZCxtZXNzYWdlTnVtYmVyOml9fV0scmFuZG9tOmUucmFuZG9tLHByaW9yaXR5OmUucHJpb3JpdHksY2xpZW50U2VxdWVuY2U6ZS5jbGllbnRTZXF1ZW5jZSxncm91cEF0SW5mbzp2b2lkIDAsY2xvdWRDdXN0b21EYXRhOnIsb25saW5lT25seUZsYWc6cCYmcC5pc09ubGluZU1lc3NhZ2UoZSx0KT8xOjAsb2ZmbGluZVB1c2hJbmZvOm8/e3B1c2hGbGFnOiEwPT09by5kaXNhYmxlUHVzaD8xOjAsdGl0bGU6by50aXRsZXx8XCJcIixkZXNjOm8uZGVzY3JpcHRpb258fFwiXCIsZXh0Om8uZXh0ZW5zaW9ufHxcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6ITA9PT1vLmlnbm9yZUlPU0JhZGdlPzE6MH0sYW5kcm9pZEluZm86e09QUE9DaGFubmVsSUQ6by5hbmRyb2lkT1BQT0NoYW5uZWxJRHx8XCJcIn19OnZvaWQgMCxjbGllbnRUaW1lOmUuY2xpZW50VGltZSxuZWVkUmVhZFJlY2VpcHQ6ITAhPT1lLm5lZWRSZWFkUmVjZWlwdHx8cC5pc01lc3NhZ2VGcm9tT3JUb0FWQ2hhdHJvb20oZS50byk/MDoxfX19fV0pLGV9KCksVm09e0VSUl9TVlJfQ09NTV9TRU5TSVRJVkVfVEVYVDo4MDAwMSxFUlJfU1ZSX0NPTU1fQk9EWV9TSVpFX0xJTUlUOjgwMDAyLE9QRU5fU0VSVklDRV9PVkVSTE9BRF9FUlJPUjo2MDAyMixFUlJfU1ZSX01TR19QS0dfUEFSU0VfRkFJTEVEOjIwMDAxLEVSUl9TVlJfTVNHX0lOVEVSTkFMX0FVVEhfRkFJTEVEOjIwMDAyLEVSUl9TVlJfTVNHX0lOVkFMSURfSUQ6MjAwMDMsRVJSX1NWUl9NU0dfUFVTSF9ERU5ZOjIwMDA2LEVSUl9TVlJfTVNHX0lOX1BFRVJfQkxBQ0tMSVNUOjIwMDA3LEVSUl9TVlJfTVNHX0JPVEhfTk9UX0ZSSUVORDoyMDAwOSxFUlJfU1ZSX01TR19OT1RfUEVFUl9GUklFTkQ6MjAwMTAsRVJSX1NWUl9NU0dfTk9UX1NFTEZfRlJJRU5EOjIwMDExLEVSUl9TVlJfTVNHX1NIVVRVUF9ERU5ZOjIwMDEyLEVSUl9TVlJfR1JPVVBfSU5WQUxJRF9QQVJBTUVURVJTOjEwMDA0LEVSUl9TVlJfR1JPVVBfUEVSTUlTU0lPTl9ERU5ZOjEwMDA3LEVSUl9TVlJfR1JPVVBfTk9UX0ZPVU5EOjEwMDEwLEVSUl9TVlJfR1JPVVBfSU5WQUxJRF9HUk9VUElEOjEwMDE1LEVSUl9TVlJfR1JPVVBfUkVKRUNUX0ZST01fVEhJUkRQQVJUWToxMDAxNixFUlJfU1ZSX0dST1VQX1NIVVRVUF9ERU5ZOjEwMDE3LE1FU1NBR0VfU0VORF9GQUlMOjIxMDAsT1ZFUl9GUkVRVUVOQ1lfTElNSVQ6Mjk5Nn0sS209W3pkLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUix6ZC5NRVNTQUdFX0lNQUdFX1NFTEVDVF9GSUxFX0ZJUlNULHpkLk1FU1NBR0VfSU1BR0VfVFlQRVNfTElNSVQsemQuTUVTU0FHRV9GSUxFX0lTX0VNUFRZLHpkLk1FU1NBR0VfSU1BR0VfU0laRV9MSU1JVCx6ZC5NRVNTQUdFX0ZJTEVfU0VMRUNUX0ZJTEVfRklSU1QsemQuTUVTU0FHRV9GSUxFX1NJWkVfTElNSVQsemQuTUVTU0FHRV9WSURFT19TSVpFX0xJTUlULHpkLk1FU1NBR0VfVklERU9fVFlQRVNfTElNSVQsemQuTUVTU0FHRV9BVURJT19VUExPQURfRkFJTCx6ZC5NRVNTQUdFX0FVRElPX1NJWkVfTElNSVQsemQuQ09TX1VOREVURUNURURdO3ZhciBCbT1mdW5jdGlvbihlKXtBbihuLGUpO3ZhciB0PUduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87cmV0dXJuIHluKHRoaXMsbiksKG89dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJNZXNzYWdlTW9kdWxlXCIsby5fbWVzc2FnZU9wdGlvbnNNYXA9bmV3IE1hcCxvLl9tZXJnZXJNZXNzYWdlSGFuZGxlcj1uZXcgeG0oYm4obykpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJjcmVhdGVUZXh0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUudG8sbj1lLnBheWxvYWQuYXRVc2VyTGlzdCxvPXZvaWQgMD09PW4/W106bjtpZihHYyh7Z3JvdXBJRDp0fSkmJm8uaW5jbHVkZXMoWW4uTVNHX0FUX0FMTCkpcmV0dXJuIE9fKHtjb2RlOnpkLk1FU1NBR0VfQVRfVFlQRV9JTlZBTElELG1lc3NhZ2U6SmQuTUVTU0FHRV9BVF9UWVBFX0lOVkFMSUR9KTt2YXIgcj10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj1yLGUuc2VuZGVyVGlueUlEPXRoaXMuZ2V0TXlUaW55SUQoKTt2YXIgYT1uZXcgTV8oZSkscz1cInN0cmluZ1wiPT10eXBlb2YgZS5wYXlsb2FkP2UucGF5bG9hZDplLnBheWxvYWQudGV4dCxpPW5ldyBZZyh7dGV4dDpzfSksYz10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQocik7cmV0dXJuIGEuc2V0RWxlbWVudChpKSxhLnNldE5pY2tBbmRBdmF0YXIoYyksYS5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChhKSksYX19LHtrZXk6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10LGUuc2VuZGVyVGlueUlEPXRoaXMuZ2V0TXlUaW55SUQoKTt2YXIgbj1uZXcgTV8oZSk7aWYocGkpe3ZhciBvPWUucGF5bG9hZC5maWxlO2lmKGljKG8pKXJldHVybiB2b2lkIFFpLndhcm4oXCLlsI/nqIvluo/njq/looPkuIvosIPnlKggY3JlYXRlSW1hZ2VNZXNzYWdlIOaOpeWPo+aXtu+8jHBheWxvYWQuZmlsZSDkuI3mlK/mjIHkvKDlhaUgRmlsZSDlr7nosaFcIik7dmFyIHI9by50ZW1wRmlsZVBhdGhzWzBdLGE9e3VybDpyLG5hbWU6ci5zbGljZShyLmxhc3RJbmRleE9mKFwiL1wiKSsxKSxzaXplOm8udGVtcEZpbGVzJiZvLnRlbXBGaWxlc1swXS5zaXplfHwxLHR5cGU6ci5zbGljZShyLmxhc3RJbmRleE9mKFwiLlwiKSsxKS50b0xvd2VyQ2FzZSgpfTtlLnBheWxvYWQuZmlsZT1hfWVsc2UgaWYoZ2kpaWYoaWMoZS5wYXlsb2FkLmZpbGUpKXt2YXIgcz1lLnBheWxvYWQuZmlsZTtlLnBheWxvYWQuZmlsZT17ZmlsZXM6W3NdfX1lbHNlIGlmKGRjKGUucGF5bG9hZC5maWxlKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaSl7dmFyIGk9ZS5wYXlsb2FkLmZpbGUudGVtcEZpbGVzWzBdO2UucGF5bG9hZC5maWxlPXtmaWxlczpbaV19fXZhciBjPW5ldyBaZih7aW1hZ2VGb3JtYXQ6WmkuVU5LTk9XTix1dWlkOnRoaXMuX2dlbmVyYXRlVVVJRCgpLGZpbGU6ZS5wYXlsb2FkLmZpbGV9KSx1PXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gbi5zZXRFbGVtZW50KGMpLG4uc2V0Tmlja0FuZEF2YXRhcih1KSxuLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKG4pKSx0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5zZXQobi5jbGllbnRTZXF1ZW5jZSxlKSxufX0se2tleTpcImNyZWF0ZUF1ZGlvTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHBpKXt2YXIgdD1lLnBheWxvYWQuZmlsZTtpZihwaSl7dmFyIG49e3VybDp0LnRlbXBGaWxlUGF0aCxuYW1lOnQudGVtcEZpbGVQYXRoLnNsaWNlKHQudGVtcEZpbGVQYXRoLmxhc3RJbmRleE9mKFwiL1wiKSsxKSxzaXplOnQuZmlsZVNpemUsc2Vjb25kOnBhcnNlSW50KHQuZHVyYXRpb24pLzFlMyx0eXBlOnQudGVtcEZpbGVQYXRoLnNsaWNlKHQudGVtcEZpbGVQYXRoLmxhc3RJbmRleE9mKFwiLlwiKSsxKS50b0xvd2VyQ2FzZSgpfTtlLnBheWxvYWQuZmlsZT1ufXZhciBvPXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPW8sZS5zZW5kZXJUaW55SUQ9dGhpcy5nZXRNeVRpbnlJRCgpO3ZhciByPW5ldyBNXyhlKSxhPW5ldyB0Xyh7c2Vjb25kOk1hdGguZmxvb3IodC5kdXJhdGlvbi8xZTMpLHNpemU6dC5maWxlU2l6ZSx1cmw6dC50ZW1wRmlsZVBhdGgsdXVpZDp0aGlzLl9nZW5lcmF0ZVVVSUQoKX0pLHM9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKG8pO3JldHVybiByLnNldEVsZW1lbnQoYSksci5zZXROaWNrQW5kQXZhdGFyKHMpLHIuc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQocikpLHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwLnNldChyLmNsaWVudFNlcXVlbmNlLGUpLHJ9UWkud2FybihcImNyZWF0ZUF1ZGlvTWVzc2FnZSDnm67liY3lj6rmlK/mjIHlsI/nqIvluo/njq/looPkuIvlj5Hor63pn7Pmtojmga9cIil9fSx7a2V5OlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dCxlLnNlbmRlclRpbnlJRD10aGlzLmdldE15VGlueUlEKCksZS5wYXlsb2FkLmZpbGUudGh1bWJVcmw9XCJodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9hc3NldHMvaW1hZ2VzL3RyYW5zcGFyZW50LnBuZ1wiLGUucGF5bG9hZC5maWxlLnRodW1iU2l6ZT0xNjY4O3ZhciBuPXt9O2lmKHBpKXtpZih1aSlyZXR1cm4gdm9pZCBRaS53YXJuKFwiY3JlYXRlVmlkZW9NZXNzYWdlIOS4jeaUr+aMgeWcqOaUr+S7mOWuneWwj+eoi+W6j+eOr+Wig+S4i+S9v+eUqFwiKTtpZihpYyhlLnBheWxvYWQuZmlsZSkpcmV0dXJuIHZvaWQgUWkud2FybihcIuWwj+eoi+W6j+eOr+Wig+S4i+iwg+eUqCBjcmVhdGVWaWRlb01lc3NhZ2Ug5o6l5Y+j5pe277yMcGF5bG9hZC5maWxlIOS4jeaUr+aMgeS8oOWFpSBGaWxlIOWvueixoVwiKTt2YXIgbz1lLnBheWxvYWQuZmlsZTtuLnVybD1vLnRlbXBGaWxlUGF0aCxuLm5hbWU9by50ZW1wRmlsZVBhdGguc2xpY2Uoby50ZW1wRmlsZVBhdGgubGFzdEluZGV4T2YoXCIvXCIpKzEpLG4uc2l6ZT1vLnNpemUsbi5zZWNvbmQ9by5kdXJhdGlvbixuLnR5cGU9by50ZW1wRmlsZVBhdGguc2xpY2Uoby50ZW1wRmlsZVBhdGgubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCl9ZWxzZSBpZihnaSl7aWYoaWMoZS5wYXlsb2FkLmZpbGUpKXt2YXIgcj1lLnBheWxvYWQuZmlsZTtlLnBheWxvYWQuZmlsZS5maWxlcz1bcl19ZWxzZSBpZihkYyhlLnBheWxvYWQuZmlsZSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmkpe3ZhciBhPWUucGF5bG9hZC5maWxlLnRlbXBGaWxlO2UucGF5bG9hZC5maWxlLmZpbGVzPVthXX12YXIgcz1lLnBheWxvYWQuZmlsZTtuLnVybD13aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChzLmZpbGVzWzBdKSxuLm5hbWU9cy5maWxlc1swXS5uYW1lLG4uc2l6ZT1zLmZpbGVzWzBdLnNpemUsbi5zZWNvbmQ9cy5maWxlc1swXS5kdXJhdGlvbnx8MCxuLnR5cGU9cy5maWxlc1swXS50eXBlLnNwbGl0KFwiL1wiKVsxXX1lLnBheWxvYWQuZmlsZS52aWRlb0ZpbGU9bjt2YXIgaT1uZXcgTV8oZSksYz1uZXcgaF8oe3ZpZGVvRm9ybWF0Om4udHlwZSx2aWRlb1NlY29uZDpXYyhuLnNlY29uZCwwKSx2aWRlb1NpemU6bi5zaXplLHJlbW90ZVZpZGVvVXJsOlwiXCIsdmlkZW9Vcmw6bi51cmwsdmlkZW9VVUlEOnRoaXMuX2dlbmVyYXRlVVVJRCgpLHRodW1iVVVJRDp0aGlzLl9nZW5lcmF0ZVVVSUQoKSx0aHVtYldpZHRoOmUucGF5bG9hZC5maWxlLndpZHRofHwyMDAsdGh1bWJIZWlnaHQ6ZS5wYXlsb2FkLmZpbGUuaGVpZ2h0fHwyMDAsdGh1bWJVcmw6ZS5wYXlsb2FkLmZpbGUudGh1bWJVcmwsdGh1bWJTaXplOmUucGF5bG9hZC5maWxlLnRodW1iU2l6ZSx0aHVtYkZvcm1hdDplLnBheWxvYWQuZmlsZS50aHVtYlVybC5zbGljZShlLnBheWxvYWQuZmlsZS50aHVtYlVybC5sYXN0SW5kZXhPZihcIi5cIikrMSkudG9Mb3dlckNhc2UoKX0pLHU9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHQpO3JldHVybiBpLnNldEVsZW1lbnQoYyksaS5zZXROaWNrQW5kQXZhdGFyKHUpLGkuc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQoaSkpLHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwLnNldChpLmNsaWVudFNlcXVlbmNlLGUpLGl9fSx7a2V5OlwiY3JlYXRlQ3VzdG9tTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPXQsZS5zZW5kZXJUaW55SUQ9dGhpcy5nZXRNeVRpbnlJRCgpO3ZhciBuPW5ldyBNXyhlKSxvPW5ldyBnXyh7ZGF0YTplLnBheWxvYWQuZGF0YSxkZXNjcmlwdGlvbjplLnBheWxvYWQuZGVzY3JpcHRpb24sZXh0ZW5zaW9uOmUucGF5bG9hZC5leHRlbnNpb259KSxyPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gbi5zZXRFbGVtZW50KG8pLG4uc2V0Tmlja0FuZEF2YXRhcihyKSxuLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKG4pKSxufX0se2tleTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dCxlLnNlbmRlclRpbnlJRD10aGlzLmdldE15VGlueUlEKCk7dmFyIG49bmV3IE1fKGUpLG89bmV3IGVfKGUucGF5bG9hZCkscj10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQodCk7cmV0dXJuIG4uc2V0RWxlbWVudChvKSxuLnNldE5pY2tBbmRBdmF0YXIociksbi5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChuKSksbn19LHtrZXk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dCxlLnNlbmRlclRpbnlJRD10aGlzLmdldE15VGlueUlEKCk7dmFyIG49dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHQpLG89bmV3IE1fKGUpLHI9bmV3IG1fKGUucGF5bG9hZCk7cmV0dXJuIG8uc2V0RWxlbWVudChyKSxvLnNldE5pY2tBbmRBdmF0YXIobiksby5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChvKSksby5zZXRSZWxheUZsYWcoITApLG99fSx7a2V5OlwiY3JlYXRlRm9yd2FyZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnRvLG49ZS5jb252ZXJzYXRpb25UeXBlLG89ZS5wcmlvcml0eSxyPWUucGF5bG9hZCxhPWUubmVlZFJlYWRSZWNlaXB0LHM9dGhpcy5nZXRNeVVzZXJJRCgpLGk9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHMpO2lmKHIudHlwZT09PVluLk1TR19HUlBfVElQKXJldHVybiBPXyhuZXcgQV8oe2NvZGU6emQuTUVTU0FHRV9GT1JXQVJEX1RZUEVfSU5WQUxJRCxtZXNzYWdlOkpkLk1FU1NBR0VfRk9SV0FSRF9UWVBFX0lOVkFMSUR9KSk7dmFyIGM9e3RvOnQsY29udmVyc2F0aW9uVHlwZTpuLGNvbnZlcnNhdGlvbklEOlwiXCIuY29uY2F0KG4pLmNvbmNhdCh0KSxwcmlvcml0eTpvLGlzUGxhY2VNZXNzYWdlOjAsc3RhdHVzOkZ1LlVOU0VORCxjdXJyZW50VXNlcjpzLHNlbmRlclRpbnlJRDp0aGlzLmdldE15VGlueUlEKCksY2xvdWRDdXN0b21EYXRhOmUuY2xvdWRDdXN0b21EYXRhfHxyLmNsb3VkQ3VzdG9tRGF0YXx8XCJcIixuZWVkUmVhZFJlY2VpcHQ6YX0sdT1uZXcgTV8oYyk7cmV0dXJuIHUuc2V0RWxlbWVudChyLmdldEVsZW1lbnRzKClbMF0pLHUuc2V0Tmlja0FuZEF2YXRhcihpKSx1LnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKHIpKSx1LnNldFJlbGF5RmxhZyghMCksdX19LHtrZXk6XCJkb3dubG9hZE1lcmdlck1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVyZ2VyTWVzc2FnZUhhbmRsZXIuZG93bmxvYWRNZXJnZXJNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIXBpfHxsaSl7aWYoZ2l8fGxpKWlmKGljKGUucGF5bG9hZC5maWxlKSl7dmFyIHQ9ZS5wYXlsb2FkLmZpbGU7ZS5wYXlsb2FkLmZpbGU9e2ZpbGVzOlt0XX19ZWxzZSBpZihkYyhlLnBheWxvYWQuZmlsZSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmkpe3ZhciBuPWUucGF5bG9hZC5maWxlLG89bi50ZW1wRmlsZXMscj1uLmZpbGVzLGE9bnVsbDtwYyhvKT9hPW9bMF06cGMocikmJihhPXJbMF0pLGUucGF5bG9hZC5maWxlPXtmaWxlczpbYV19fXZhciBzPXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPXMsZS5zZW5kZXJUaW55SUQ9dGhpcy5nZXRNeVRpbnlJRCgpO3ZhciBpPW5ldyBNXyhlKSxjPW5ldyBwXyh7dXVpZDp0aGlzLl9nZW5lcmF0ZVVVSUQoKSxmaWxlOmUucGF5bG9hZC5maWxlfSksdT10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQocyk7cmV0dXJuIGkuc2V0RWxlbWVudChjKSxpLnNldE5pY2tBbmRBdmF0YXIodSksaS5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChpKSksdGhpcy5fbWVzc2FnZU9wdGlvbnNNYXAuc2V0KGkuY2xpZW50U2VxdWVuY2UsZSksaX1RaS53YXJuKFwi5bCP56iL5bqP55uu5YmN5LiN5pSv5oyB6YCJ5oup5paH5Lu277yMIGNyZWF0ZUZpbGVNZXNzYWdlIOaOpeWPo+S4jeWPr+eUqO+8gVwiKX19LHtrZXk6XCJjcmVhdGVMb2NhdGlvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10LGUuc2VuZGVyVGlueUlEPXRoaXMuZ2V0TXlUaW55SUQoKTt2YXIgbj1uZXcgTV8oZSksbz1uZXcgZl8oZS5wYXlsb2FkKSxyPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gbi5zZXRFbGVtZW50KG8pLG4uc2V0Tmlja0FuZEF2YXRhcihyKSxuLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKG4pKSxufX0se2tleTpcIl9vbkNhbm5vdEZpbmRNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBPXyh7Y29kZTp6ZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpKZC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJzZW5kTWVzc2FnZUluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbixvPXRoaXMscj1udWxsO3N3aXRjaChlLmNvbnZlcnNhdGlvblR5cGUpe2Nhc2UgWW4uQ09OVl9DMkM6aWYoIShyPXRoaXMuZ2V0TW9kdWxlKGFsKSkpcmV0dXJuIHRoaXMuX29uQ2Fubm90RmluZE1vZHVsZSgpO2JyZWFrO2Nhc2UgWW4uQ09OVl9HUk9VUDppZighKHI9dGhpcy5nZXRNb2R1bGUoc2wpKSlyZXR1cm4gdGhpcy5fb25DYW5ub3RGaW5kTW9kdWxlKCk7aWYoR2Moe2dyb3VwSUQ6ZS50b30pJiYhZ2ModCkmJiFnYyh0Lm1lc3NhZ2VDb250cm9sSW5mbykpcmV0dXJuIE9fKHtjb2RlOnpkLk1FU1NBR0VfQ09OVFJPTF9JTkZPX0ZBSUwsbWVzc2FnZTpKZC5NRVNTQUdFX0NPTlRST0xfSU5GT19GQUlMfSk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gT18oe2NvZGU6emQuTUVTU0FHRV9TRU5EX0lOVkFMSURfQ09OVkVSU0FUSU9OX1RZUEUsbWVzc2FnZTpKZC5NRVNTQUdFX1NFTkRfSU5WQUxJRF9DT05WRVJTQVRJT05fVFlQRX0pfXZhciBhPXRoaXMuZ2V0TW9kdWxlKGZsKSxzPXRoaXMuZ2V0TW9kdWxlKHNsKTtyZXR1cm4gYS51cGxvYWQoZSkudGhlbigoZnVuY3Rpb24oKXtvLl9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKT09PW5wJiZvLmdldE1vZHVsZShTbCkuYWRkU3VjY2Vzc0NvdW50KG9wKTtyZXR1cm4gcy5ndWFyZEZvckFWQ2hhdFJvb20oZSkudGhlbigoZnVuY3Rpb24oKXtpZighZS5pc1NlbmRhYmxlKCkpcmV0dXJuIE9fKHtjb2RlOnpkLk1FU1NBR0VfRklMRV9VUkxfSVNfRU1QVFksbWVzc2FnZTpKZC5NRVNTQUdFX0ZJTEVfVVJMX0lTX0VNUFRZfSk7by5fYWRkU2VuZE1lc3NhZ2VUb3RhbENvdW50KGUpLG49RGF0ZS5ub3coKTt2YXIgYT1mdW5jdGlvbihlKXt2YXIgdD1cInV0Zi04XCI7Z2kmJmRvY3VtZW50JiYodD1kb2N1bWVudC5jaGFyc2V0LnRvTG93ZXJDYXNlKCkpO3ZhciBuLG8scj0wO2lmKG89ZS5sZW5ndGgsXCJ1dGYtOFwiPT09dHx8XCJ1dGY4XCI9PT10KWZvcih2YXIgYT0wO2E8bzthKyspKG49ZS5jb2RlUG9pbnRBdChhKSk8PTEyNz9yKz0xOm48PTIwNDc/cis9MjpuPD02NTUzNT9yKz0zOihyKz00LGErKyk7ZWxzZSBpZihcInV0Zi0xNlwiPT09dHx8XCJ1dGYxNlwiPT09dClmb3IodmFyIHM9MDtzPG87cysrKShuPWUuY29kZVBvaW50QXQocykpPD02NTUzNT9yKz0yOihyKz00LHMrKyk7ZWxzZSByPWUucmVwbGFjZSgvW15cXHgwMC1cXHhmZl0vZyxcImFhXCIpLmxlbmd0aDtyZXR1cm4gcn0oSlNPTi5zdHJpbmdpZnkoZSkpO3JldHVybiBlLnR5cGU9PT1Zbi5NU0dfTUVSR0VSJiZhPjdlMz9vLl9tZXJnZXJNZXNzYWdlSGFuZGxlci51cGxvYWRNZXJnZXJNZXNzYWdlKGUsYSkudGhlbigoZnVuY3Rpb24obil7dmFyIHI9by5fbWVyZ2VyTWVzc2FnZUhhbmRsZXIuY3JlYXRlTWVyZ2VyTWVzc2FnZVBhY2soZSx0LG4pO3JldHVybiBvLnJlcXVlc3Qocil9KSk6KG8uZ2V0TW9kdWxlKHVsKS5zZXRNZXNzYWdlUmFuZG9tKGUpLGUuY29udmVyc2F0aW9uVHlwZT09PVluLkNPTlZfQzJDfHxlLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0dST1VQP3Iuc2VuZE1lc3NhZ2UoZSx0KTp2b2lkIDApfSkpLnRoZW4oKGZ1bmN0aW9uKGEpe3ZhciBzPWEuZGF0YSxpPXMudGltZSxjPXMuc2VxdWVuY2UsdT1zLnJlYWRSZWNlaXB0Q29kZTtjYyh1KSYmMCE9PXUmJihuZXcgZHAoa3ApLnNldE1lc3NhZ2UoXCJmcm9tOlwiLmNvbmNhdChlLmZyb20sXCIgdG86XCIpLmNvbmNhdChlLnRvLFwiIHNlcXVlbmNlOlwiKS5jb25jYXQoYyxcIiByZWFkUmVjZWlwdENvZGU6XCIpLmNvbmNhdCh1KSkuZW5kKCksUWkud2FybihcIlwiLmNvbmNhdChvLl9jbGFzc05hbWUsXCIuc2VuZE1lc3NhZ2VJbnN0YW5jZSByZWFkUmVjZWlwdENvZGU6XCIpLmNvbmNhdCh1LFwiIG1lc3NhZ2U6XCIpLmNvbmNhdChDX1t1XSkpKTtvLl9hZGRTZW5kTWVzc2FnZVN1Y2Nlc3NDb3VudChlLG4pLG8uX21lc3NhZ2VPcHRpb25zTWFwLmRlbGV0ZShlLmNsaWVudFNlcXVlbmNlKTt2YXIgbD1vLmdldE1vZHVsZSh1bCk7ZS5zdGF0dXM9RnUuU1VDQ0VTUyxlLnRpbWU9aTt2YXIgZD0hMTtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0dST1VQKWUuc2VxdWVuY2U9YztlbHNlIGlmKGUuY29udmVyc2F0aW9uVHlwZT09PVluLkNPTlZfQzJDKXt2YXIgcD1sLmdldExhdGVzdE1lc3NhZ2VTZW50QnlNZShlLmNvbnZlcnNhdGlvbklEKTtpZihwKXt2YXIgZz1wLm5pY2ssaD1wLmF2YXRhcjtnPT09ZS5uaWNrJiZoPT09ZS5hdmF0YXJ8fChkPSEwKX19aWYobC5hcHBlbmRUb01lc3NhZ2VMaXN0KGUpLGQmJmwubW9kaWZ5TWVzc2FnZVNlbnRCeU1lKHtjb252ZXJzYXRpb25JRDplLmNvbnZlcnNhdGlvbklELGxhdGVzdE5pY2s6ZS5uaWNrLGxhdGVzdEF2YXRhcjplLmF2YXRhcn0pLHIuaXNPbmxpbmVNZXNzYWdlKGUsdCkpZS5fb25saW5lT25seUZsYWc9ITA7ZWxzZXt2YXIgZj1lO2RjKHQpJiZkYyh0Lm1lc3NhZ2VDb250cm9sSW5mbykmJighMD09PXQubWVzc2FnZUNvbnRyb2xJbmZvLmV4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlJiYoZS5faXNFeGNsdWRlZEZyb21MYXN0TWVzc2FnZT0hMCxmPVwiXCIpLCEwPT09dC5tZXNzYWdlQ29udHJvbEluZm8uZXhjbHVkZWRGcm9tVW5yZWFkQ291bnQmJihlLl9pc0V4Y2x1ZGVkRnJvbVVucmVhZENvdW50PSEwKSksbC5vbk1lc3NhZ2VTZW50KHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpbe2NvbnZlcnNhdGlvbklEOmUuY29udmVyc2F0aW9uSUQsdW5yZWFkQ291bnQ6MCx0eXBlOmUuY29udmVyc2F0aW9uVHlwZSxzdWJUeXBlOmUuY29udmVyc2F0aW9uU3ViVHlwZSxsYXN0TWVzc2FnZTpmfV19KX1yZXR1cm4gZS5nZXRSZWxheUZsYWcoKXx8XCJUSU1JbWFnZUVsZW1cIiE9PWUudHlwZXx8SGMoZS5wYXlsb2FkLmltYWdlSW5mb0FycmF5KSx5Xyh7bWVzc2FnZTplfSl9KSl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3JldHVybiBvLl9vblNlbmRNZXNzYWdlRmFpbGVkKGUsdCl9KSl9fSx7a2V5OlwiX29uU2VuZE1lc3NhZ2VGYWlsZWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Uuc3RhdHVzPUZ1LkZBSUwsdGhpcy5nZXRNb2R1bGUodWwpLmRlbGV0ZU1lc3NhZ2VSYW5kb20oZSksdGhpcy5fYWRkU2VuZE1lc3NhZ2VGYWlsQ291bnRPblVzZXIoZSx0KTt2YXIgbj1uZXcgZHAoTnApO3JldHVybiBuLnNldE1lc3NhZ2UoXCJ0amdfaWQ6XCIuY29uY2F0KHRoaXMuZ2VuZXJhdGVUamdJRChlKSxcIiB0eXBlOlwiKS5jb25jYXQoZS50eXBlLFwiIGZyb206XCIpLmNvbmNhdChlLmZyb20sXCIgdG86XCIpLmNvbmNhdChlLnRvKSksdGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz1QbihlLDIpLHI9b1swXSxhPW9bMV07bi5zZXRFcnJvcih0LHIsYSkuZW5kKCl9KSksUWkuZXJyb3IoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vblNlbmRNZXNzYWdlRmFpbGVkIGVycm9yOlwiKSx0KSxPXyhuZXcgQV8oe2NvZGU6dCYmdC5jb2RlP3QuY29kZTp6ZC5NRVNTQUdFX1NFTkRfRkFJTCxtZXNzYWdlOnQmJnQubWVzc2FnZT90Lm1lc3NhZ2U6SmQuTUVTU0FHRV9TRU5EX0ZBSUwsZGF0YTp7bWVzc2FnZTplfX0pKX19LHtrZXk6XCJfZ2V0U2VuZE1lc3NhZ2VTcGVjaWZpZWRLZXlcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihbWW4uTVNHX0lNQUdFLFluLk1TR19BVURJTyxZbi5NU0dfVklERU8sWW4uTVNHX0ZJTEVdLmluY2x1ZGVzKGUudHlwZSkpcmV0dXJuIG5wO2lmKGUuY29udmVyc2F0aW9uVHlwZT09PVluLkNPTlZfQzJDKXJldHVybiBaZDtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0dST1VQKXt2YXIgdD10aGlzLmdldE1vZHVsZShzbCkuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZS50byk7aWYoIXQpcmV0dXJuO3ZhciBuPXQudHlwZTtyZXR1cm4gd2Mobik/dHA6ZXB9fX0se2tleTpcIl9hZGRTZW5kTWVzc2FnZVRvdGFsQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKTt0JiZ0aGlzLmdldE1vZHVsZShTbCkuYWRkVG90YWxDb3VudCh0KX19LHtrZXk6XCJfYWRkU2VuZE1lc3NhZ2VTdWNjZXNzQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPU1hdGguYWJzKERhdGUubm93KCktdCksbz10aGlzLl9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKTtpZihvKXt2YXIgcj10aGlzLmdldE1vZHVsZShTbCk7ci5hZGRTdWNjZXNzQ291bnQobyksci5hZGRDb3N0KG8sbil9fX0se2tleTpcIl9hZGRTZW5kTWVzc2FnZUZhaWxDb3VudE9uVXNlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxyPXQuY29kZSxhPXZvaWQgMD09PXI/LTE6cixzPXRoaXMuZ2V0TW9kdWxlKFNsKSxpPXRoaXMuX2dldFNlbmRNZXNzYWdlU3BlY2lmaWVkS2V5KGUpO2k9PT1ucCYmKG49YSxvPSExLEttLmluY2x1ZGVzKG4pJiYobz0hMCksbyk/cy5hZGRGYWlsZWRDb3VudE9mVXNlclNpZGUob3ApOmZ1bmN0aW9uKGUpe3ZhciB0PSExO3JldHVybiBPYmplY3QudmFsdWVzKFZtKS5pbmNsdWRlcyhlKSYmKHQ9ITApLChlPj0xMjAwMDEmJmU8PTEzZTR8fGU+PTEwMTAwJiZlPD0xMDIwMCkmJih0PSEwKSx0fShhKSYmaSYmcy5hZGRGYWlsZWRDb3VudE9mVXNlclNpZGUoaSl9fSx7a2V5OlwicmVzZW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmlzUmVzZW5kPSEwLGUuc3RhdHVzPUZ1LlVOU0VORCxlLnJhbmRvbT1TYygpLGUuY2xpZW50VGltZT0kaSgpLGUuZ2VuZXJhdGVNZXNzYWdlSUQoKSx0aGlzLnNlbmRNZXNzYWdlSW5zdGFuY2UoZSl9fSx7a2V5OlwicmV2b2tlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1udWxsO2lmKGUuY29udmVyc2F0aW9uVHlwZT09PVluLkNPTlZfQzJDKXtpZighKG49dGhpcy5nZXRNb2R1bGUoYWwpKSlyZXR1cm4gdGhpcy5fb25DYW5ub3RGaW5kTW9kdWxlKCl9ZWxzZSBpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0dST1VQJiYhKG49dGhpcy5nZXRNb2R1bGUoc2wpKSlyZXR1cm4gdGhpcy5fb25DYW5ub3RGaW5kTW9kdWxlKCk7dmFyIG89bmV3IGRwKEdwKTtyZXR1cm4gby5zZXRNZXNzYWdlKFwidGpnX2lkOlwiLmNvbmNhdCh0aGlzLmdlbmVyYXRlVGpnSUQoZSksXCIgdHlwZTpcIikuY29uY2F0KGUudHlwZSxcIiBmcm9tOlwiKS5jb25jYXQoZS5mcm9tLFwiIHRvOlwiKS5jb25jYXQoZS50bykpLG4ucmV2b2tlTWVzc2FnZShlKS50aGVuKChmdW5jdGlvbihuKXt2YXIgcj1uLmRhdGEucmVjYWxsUmV0TGlzdDtpZighSmMocikmJjAhPT1yWzBdLnJldENvZGUpe3ZhciBhPW5ldyBBXyh7Y29kZTpyWzBdLnJldENvZGUsbWVzc2FnZTpDX1tyWzBdLnJldENvZGVdfHxKZC5NRVNTQUdFX1JFVk9LRV9GQUlMLGRhdGE6e21lc3NhZ2U6ZX19KTtyZXR1cm4gby5zZXRDb2RlKGEuY29kZSkuc2V0TW9yZU1lc3NhZ2UoYS5tZXNzYWdlKS5lbmQoKSxPXyhhKX1yZXR1cm4gUWkuaW5mbyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIucmV2b2tlTWVzc2FnZSBvay4gSUQ6XCIpLmNvbmNhdChlLklEKSksZS5pc1Jldm9rZWQ9ITAsby5lbmQoKSx0LmdldE1vZHVsZSh1bCkub25NZXNzYWdlUmV2b2tlZChbZV0pLHlfKHttZXNzYWdlOmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24obil7dC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1QbihlLDIpLHI9dFswXSxhPXRbMV07by5zZXRFcnJvcihuLHIsYSkuZW5kKCl9KSk7dmFyIHI9bmV3IEFfKHtjb2RlOm4mJm4uY29kZT9uLmNvZGU6emQuTUVTU0FHRV9SRVZPS0VfRkFJTCxtZXNzYWdlOm4mJm4ubWVzc2FnZT9uLm1lc3NhZ2U6SmQuTUVTU0FHRV9SRVZPS0VfRkFJTCxkYXRhOnttZXNzYWdlOmV9fSk7cmV0dXJuIFFpLndhcm4oXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLnJldm9rZU1lc3NhZ2UgZmFpbGVkLiBlcnJvcjpcIiksbiksT18ocil9KSl9fSx7a2V5OlwiZGVsZXRlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1udWxsLG89ZVswXSxyPW8uY29udmVyc2F0aW9uSUQsYT1cIlwiLHM9W10saT1bXTtpZihvLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0MyQz8obj10aGlzLmdldE1vZHVsZShhbCksYT1yLnJlcGxhY2UoWW4uQ09OVl9DMkMsXCJcIiksZS5mb3JFYWNoKChmdW5jdGlvbihlKXtlJiZlLnN0YXR1cz09PUZ1LlNVQ0NFU1MmJmUuY29udmVyc2F0aW9uSUQ9PT1yJiYoZS5fb25saW5lT25seUZsYWd8fHMucHVzaChcIlwiLmNvbmNhdChlLnNlcXVlbmNlLFwiX1wiKS5jb25jYXQoZS5yYW5kb20sXCJfXCIpLmNvbmNhdChlLnRpbWUpKSxpLnB1c2goZSkpfSkpKTpvLmNvbnZlcnNhdGlvblR5cGU9PT1Zbi5DT05WX0dST1VQJiYobj10aGlzLmdldE1vZHVsZShzbCksYT1yLnJlcGxhY2UoWW4uQ09OVl9HUk9VUCxcIlwiKSxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UmJmUuc3RhdHVzPT09RnUuU1VDQ0VTUyYmZS5jb252ZXJzYXRpb25JRD09PXImJihlLl9vbmxpbmVPbmx5RmxhZ3x8cy5wdXNoKFwiXCIuY29uY2F0KGUuc2VxdWVuY2UpKSxpLnB1c2goZSkpfSkpKSwhbilyZXR1cm4gdGhpcy5fb25DYW5ub3RGaW5kTW9kdWxlKCk7aWYoMD09PXMubGVuZ3RoKXJldHVybiB0aGlzLl9vbk1lc3NhZ2VEZWxldGVkKGkpO3MubGVuZ3RoPjMwJiYocz1zLnNsaWNlKDAsMzApLGk9aS5zbGljZSgwLDMwKSk7dmFyIGM9bmV3IGRwKFBwKTtyZXR1cm4gYy5zZXRNZXNzYWdlKFwidG86XCIuY29uY2F0KGEsXCIgY291bnQ6XCIpLmNvbmNhdChzLmxlbmd0aCkpLG4uZGVsZXRlTWVzc2FnZSh7dG86YSxrZXlMaXN0OnN9KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gYy5lbmQoKSxRaS5pbmZvKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5kZWxldGVNZXNzYWdlIG9rXCIpKSx0Ll9vbk1lc3NhZ2VEZWxldGVkKGkpfSkpLmNhdGNoKChmdW5jdGlvbihlKXt0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdLHI9blsxXTtjLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxRaS53YXJuKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5kZWxldGVNZXNzYWdlIGZhaWxlZC4gZXJyb3I6XCIpLGUpO3ZhciBuPW5ldyBBXyh7Y29kZTplJiZlLmNvZGU/ZS5jb2RlOnpkLk1FU1NBR0VfREVMRVRFX0ZBSUwsbWVzc2FnZTplJiZlLm1lc3NhZ2U/ZS5tZXNzYWdlOkpkLk1FU1NBR0VfREVMRVRFX0ZBSUx9KTtyZXR1cm4gT18obil9KSl9fSx7a2V5OlwiX29uTWVzc2FnZURlbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUodWwpLm9uTWVzc2FnZURlbGV0ZWQoZSksa18oe21lc3NhZ2VMaXN0OmV9KX19LHtrZXk6XCJfZ2VuZXJhdGVVVUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldE1vZHVsZShsbCk7cmV0dXJuXCJcIi5jb25jYXQoZS5nZXRTREtBcHBJRCgpLFwiLVwiKS5jb25jYXQoZS5nZXRVc2VySUQoKSxcIi1cIikuY29uY2F0KGZ1bmN0aW9uKCl7Zm9yKHZhciBlPVwiXCIsdD0zMjt0PjA7LS10KWUrPUNjW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpBYyldO3JldHVybiBlfSgpKX19LHtrZXk6XCJnZXRNZXNzYWdlT3B0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwLmdldChlKX19LHtrZXk6XCJfZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKHJsKS5nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQoZSl9fSx7a2V5OlwiX2dldE5hbWVDYXJkQnlHcm91cElEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZS5jb252ZXJzYXRpb25UeXBlPT09WW4uQ09OVl9HUk9VUCl7dmFyIHQ9dGhpcy5nZXRNb2R1bGUoc2wpO2lmKHQpcmV0dXJuIHQuZ2V0TXlOYW1lQ2FyZEJ5R3JvdXBJRChlLnRvKX1yZXR1cm5cIlwifX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5jbGVhcigpfX1dKSxufShBbCksSG09ZnVuY3Rpb24oZSl7QW4obixlKTt2YXIgdD1HbihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiUGx1Z2luTW9kdWxlXCIsby5wbHVnaW5zPXt9LG99cmV0dXJuIEVuKG4sW3trZXk6XCJyZWdpc3RlclBsdWdpblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7dC5wbHVnaW5zW25dPWVbbl19KSksbmV3IGRwKG1wKS5zZXRNZXNzYWdlKFwia2V5PVwiLmNvbmNhdChPYmplY3Qua2V5cyhlKSkpLmVuZCgpfX0se2tleTpcImdldFBsdWdpblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBsdWdpbnNbZV19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpfX1dKSxufShBbCksam09ZnVuY3Rpb24oZSl7QW4obixlKTt2YXIgdD1HbihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiU3luY1VucmVhZE1lc3NhZ2VNb2R1bGVcIixvLl9jb29raWU9XCJcIixvLl9vbmxpbmVTeW5jRmxhZz0hMSxvLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oVl8sby5fb25Mb2dpblN1Y2Nlc3MsYm4obykpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJfb25Mb2dpblN1Y2Nlc3NcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zdGFydFN5bmMoe2Nvb2tpZTp0aGlzLl9jb29raWUsc3luY0ZsYWc6MCxpc09ubGluZVN5bmM6MH0pfX0se2tleTpcIl9zdGFydFN5bmNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5jb29raWUsbz1lLnN5bmNGbGFnLHI9ZS5pc09ubGluZVN5bmM7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fc3RhcnRTeW5jIGNvb2tpZTpcIikuY29uY2F0KG4sXCIgc3luY0ZsYWc6XCIpLmNvbmNhdChvLFwiIGlzT25saW5lU3luYzpcIikuY29uY2F0KHIpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpSbCxyZXF1ZXN0RGF0YTp7Y29va2llOm4sc3luY0ZsYWc6byxpc09ubGluZVN5bmM6cn19KS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1lLmRhdGEsbz1uLmNvb2tpZSxyPW4uc3luY0ZsYWcsYT1uLmV2ZW50QXJyYXkscz1uLm1lc3NhZ2VMaXN0LGk9bi5DMkNSZW1haW5pbmdVbnJlYWRMaXN0LGM9bi5DMkNQYWlyVW5yZWFkTGlzdDtpZih0Ll9jb29raWU9byxKYyhvKSk7ZWxzZSBpZigwPT09cnx8MT09PXIpe2lmKGEpdC5nZXRNb2R1bGUodmwpLm9uTWVzc2FnZSh7aGVhZDp7fSxib2R5OntldmVudEFycmF5OmEsaXNJbnN0YW50TWVzc2FnZTp0Ll9vbmxpbmVTeW5jRmxhZyxpc1N5bmNpbmdFbmRlZDohMX19KTt0LmdldE1vZHVsZShhbCkub25OZXdDMkNNZXNzYWdlKHtkYXRhTGlzdDpzLGlzSW5zdGFudE1lc3NhZ2U6ITEsQzJDUmVtYWluaW5nVW5yZWFkTGlzdDppLEMyQ1BhaXJVbnJlYWRMaXN0OmN9KSx0Ll9zdGFydFN5bmMoe2Nvb2tpZTpvLHN5bmNGbGFnOnIsaXNPbmxpbmVTeW5jOjB9KX1lbHNlIGlmKDI9PT1yKXtpZihhKXQuZ2V0TW9kdWxlKHZsKS5vbk1lc3NhZ2Uoe2hlYWQ6e30sYm9keTp7ZXZlbnRBcnJheTphLGlzSW5zdGFudE1lc3NhZ2U6dC5fb25saW5lU3luY0ZsYWcsaXNTeW5jaW5nRW5kZWQ6ITB9fSk7dC5nZXRNb2R1bGUoYWwpLm9uTmV3QzJDTWVzc2FnZSh7ZGF0YUxpc3Q6cyxpc0luc3RhbnRNZXNzYWdlOnQuX29ubGluZVN5bmNGbGFnLEMyQ1JlbWFpbmluZ1VucmVhZExpc3Q6aSxDMkNQYWlyVW5yZWFkTGlzdDpjfSl9fSkpLmNhdGNoKChmdW5jdGlvbihlKXtRaS5lcnJvcihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuX3N0YXJ0U3luYyBmYWlsZWQuIGVycm9yOlwiKSxlKX0pKX19LHtrZXk6XCJzdGFydE9ubGluZVN5bmNcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RhcnRPbmxpbmVTeW5jXCIpKSx0aGlzLl9vbmxpbmVTeW5jRmxhZz0hMCx0aGlzLl9zdGFydFN5bmMoe2Nvb2tpZTp0aGlzLl9jb29raWUsc3luY0ZsYWc6MCxpc09ubGluZVN5bmM6MX0pfX0se2tleTpcInN0YXJ0U3luY09uUmVjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RhcnRTeW5jT25SZWNvbm5lY3RlZC5cIikpLHRoaXMuX29ubGluZVN5bmNGbGFnPSEwLHRoaXMuX3N0YXJ0U3luYyh7Y29va2llOnRoaXMuX2Nvb2tpZSxzeW5jRmxhZzowLGlzT25saW5lU3luYzowfSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX29ubGluZVN5bmNGbGFnPSExLHRoaXMuX2Nvb2tpZT1cIlwifX1dKSxufShBbCksV209e3JlcXVlc3Q6e3RvQWNjb3VudDpcIlRvX0FjY291bnRcIixmcm9tQWNjb3VudDpcIkZyb21fQWNjb3VudFwiLHRvOlwiVG9fQWNjb3VudFwiLGZyb206XCJGcm9tX0FjY291bnRcIixncm91cElEOlwiR3JvdXBJZFwiLGdyb3VwQXRVc2VySUQ6XCJHcm91cEF0X0FjY291bnRcIixleHRlbnNpb246XCJFeHRcIixkYXRhOlwiRGF0YVwiLGRlc2NyaXB0aW9uOlwiRGVzY1wiLGVsZW1lbnRzOlwiTXNnQm9keVwiLHNpemVUeXBlOlwiVHlwZVwiLGRvd25sb2FkRmxhZzpcIkRvd25sb2FkX0ZsYWdcIix0aHVtYlVVSUQ6XCJUaHVtYlVVSURcIix2aWRlb1VVSUQ6XCJWaWRlb1VVSURcIixyZW1vdGVBdWRpb1VybDpcIlVybFwiLHJlbW90ZVZpZGVvVXJsOlwiVmlkZW9VcmxcIix2aWRlb1VybDpcIlwiLGltYWdlVXJsOlwiVVJMXCIsZmlsZVVybDpcIlVybFwiLHV1aWQ6XCJVVUlEXCIscHJpb3JpdHk6XCJNc2dQcmlvcml0eVwiLHJlY2VpdmVyVXNlcklEOlwiVG9fQWNjb3VudFwiLHJlY2VpdmVyR3JvdXBJRDpcIkdyb3VwSWRcIixtZXNzYWdlU2VuZGVyOlwiU2VuZGVySWRcIixtZXNzYWdlUmVjZWl2ZXI6XCJSZWNlaXZlcklkXCIsbmljazpcIkZyb21fQWNjb3VudE5pY2tcIixhdmF0YXI6XCJGcm9tX0FjY291bnRIZWFkdXJsXCIsbWVzc2FnZU51bWJlcjpcIk1zZ051bVwiLHBiRG93bmxvYWRLZXk6XCJQYk1zZ0tleVwiLGRvd25sb2FkS2V5OlwiSnNvbk1zZ0tleVwiLGFwcGxpY2F0aW9uVHlwZTpcIlBlbmRlbmN5VHlwZVwiLHVzZXJJRExpc3Q6XCJUb19BY2NvdW50XCIsZ3JvdXBOYW1lTGlzdDpcIkdyb3VwTmFtZVwiLHVzZXJJRDpcIlRvX0FjY291bnRcIixncm91cEF0dHJpYnV0ZUxpc3Q6XCJHcm91cEF0dHJcIixtYWluU2VxdWVuY2U6XCJBdHRyTWFpblNlcVwiLGF2Q2hhdFJvb21LZXk6XCJCeXRlc0tleVwiLGF0dHJpYnV0ZUNvbnRyb2w6XCJBdHRyQ29udHJvbFwiLHNlcXVlbmNlOlwic2VxXCIsbWVzc2FnZUNvbnRyb2xJbmZvOlwiU2VuZE1zZ0NvbnRyb2xcIix1cGRhdGVTZXF1ZW5jZTpcIlVwZGF0ZVNlcVwiLGNsaWVudFRpbWU6XCJNc2dDbGllbnRUaW1lXCIsc2VxdWVuY2VMaXN0OlwiTXNnU2VxTGlzdFwifSxyZXNwb25zZTp7TXNnUHJpb3JpdHk6XCJwcmlvcml0eVwiLFRodW1iVVVJRDpcInRodW1iVVVJRFwiLFZpZGVvVVVJRDpcInZpZGVvVVVJRFwiLERvd25sb2FkX0ZsYWc6XCJkb3dubG9hZEZsYWdcIixHcm91cElkOlwiZ3JvdXBJRFwiLE1lbWJlcl9BY2NvdW50OlwidXNlcklEXCIsTXNnTGlzdDpcIm1lc3NhZ2VMaXN0XCIsU3luY0ZsYWc6XCJzeW5jRmxhZ1wiLFRvX0FjY291bnQ6XCJ0b1wiLEZyb21fQWNjb3VudDpcImZyb21cIixNc2dTZXE6XCJzZXF1ZW5jZVwiLE1zZ1JhbmRvbTpcInJhbmRvbVwiLE1zZ1RpbWU6XCJ0aW1lXCIsTXNnVGltZVN0YW1wOlwidGltZVwiLE1zZ0NvbnRlbnQ6XCJjb250ZW50XCIsTXNnQm9keTpcImVsZW1lbnRzXCIsRnJvbV9BY2NvdW50TmljazpcIm5pY2tcIixGcm9tX0FjY291bnRIZWFkdXJsOlwiYXZhdGFyXCIsR3JvdXBXaXRoZHJhd0luZm9BcnJheTpcInJldm9rZWRJbmZvc1wiLEdyb3VwUmVhZEluZm9BcnJheTpcImdyb3VwTWVzc2FnZVJlYWROb3RpY2VcIixMYXN0UmVhZE1zZ1NlcTpcImxhc3RNZXNzYWdlU2VxXCIsV2l0aGRyYXdDMmNNc2dOb3RpZnk6XCJjMmNNZXNzYWdlUmV2b2tlZE5vdGlmeVwiLEMyY1dpdGhkcmF3SW5mb0FycmF5OlwicmV2b2tlZEluZm9zXCIsQzJjUmVhZGVkUmVjZWlwdDpcImMyY01lc3NhZ2VSZWFkUmVjZWlwdFwiLFJlYWRDMmNNc2dOb3RpZnk6XCJjMmNNZXNzYWdlUmVhZE5vdGljZVwiLExhc3RSZWFkVGltZTpcInBlZXJSZWFkVGltZVwiLE1zZ1JhbmQ6XCJyYW5kb21cIixNc2dUeXBlOlwidHlwZVwiLE1zZ1Nob3c6XCJtZXNzYWdlU2hvd1wiLE5leHRNc2dTZXE6XCJuZXh0TWVzc2FnZVNlcVwiLEZhY2VVcmw6XCJhdmF0YXJcIixQcm9maWxlRGF0YU1vZDpcInByb2ZpbGVNb2RpZnlcIixQcm9maWxlX0FjY291bnQ6XCJ1c2VySURcIixWYWx1ZUJ5dGVzOlwidmFsdWVcIixWYWx1ZU51bTpcInZhbHVlXCIsTm90aWNlU2VxOlwibm90aWNlU2VxdWVuY2VcIixOb3RpZnlTZXE6XCJub3RpZnlTZXF1ZW5jZVwiLE1zZ0Zyb21fQWNjb3VudEV4dHJhSW5mbzpcIm1lc3NhZ2VGcm9tQWNjb3VudEV4dHJhSW5mb3JtYXRpb25cIixPcGVyYXRvcl9BY2NvdW50Olwib3BlcmF0b3JJRFwiLE9wVHlwZTpcIm9wZXJhdGlvblR5cGVcIixSZXBvcnRUeXBlOlwib3BlcmF0aW9uVHlwZVwiLFVzZXJJZDpcInVzZXJJRFwiLFVzZXJfQWNjb3VudDpcInVzZXJJRFwiLExpc3RfQWNjb3VudDpcInVzZXJJRExpc3RcIixNc2dPcGVyYXRvck1lbWJlckV4dHJhSW5mbzpcIm9wZXJhdG9ySW5mb1wiLE1zZ01lbWJlckV4dHJhSW5mbzpcIm1lbWJlckluZm9MaXN0XCIsSW1hZ2VVcmw6XCJhdmF0YXJcIixOaWNrTmFtZTpcIm5pY2tcIixNc2dHcm91cE5ld0luZm86XCJuZXdHcm91cFByb2ZpbGVcIixNc2dBcHBEZWZpbmVkRGF0YTpcImdyb3VwQ3VzdG9tRmllbGRcIixPd25lcl9BY2NvdW50Olwib3duZXJJRFwiLEdyb3VwRmFjZVVybDpcImF2YXRhclwiLEdyb3VwSW50cm9kdWN0aW9uOlwiaW50cm9kdWN0aW9uXCIsR3JvdXBOb3RpZmljYXRpb246XCJub3RpZmljYXRpb25cIixHcm91cEFwcGx5Sm9pbk9wdGlvbjpcImpvaW5PcHRpb25cIixNc2dLZXk6XCJtZXNzYWdlS2V5XCIsR3JvdXBJbmZvOlwiZ3JvdXBQcm9maWxlXCIsU2h1dHVwVGltZTpcIm11dGVUaW1lXCIsRGVzYzpcImRlc2NyaXB0aW9uXCIsRXh0OlwiZXh0ZW5zaW9uXCIsR3JvdXBBdF9BY2NvdW50OlwiZ3JvdXBBdFVzZXJJRFwiLE1zZ051bTpcIm1lc3NhZ2VOdW1iZXJcIixQYk1zZ0tleTpcInBiRG93bmxvYWRLZXlcIixKc29uTXNnS2V5OlwiZG93bmxvYWRLZXlcIixNc2dNb2RpZmllZEZsYWc6XCJpc01vZGlmaWVkXCIsUGVuZGVuY3lJdGVtOlwiYXBwbGljYXRpb25JdGVtXCIsUGVuZGVuY3lUeXBlOlwiYXBwbGljYXRpb25UeXBlXCIsQWRkVGltZTpcInRpbWVcIixBZGRTb3VyY2U6XCJzb3VyY2VcIixBZGRXb3JkaW5nOlwid29yZGluZ1wiLFByb2ZpbGVJbUltYWdlOlwiYXZhdGFyXCIsUGVuZGVuY3lBZGQ6XCJmcmllbmRBcHBsaWNhdGlvbkFkZGVkXCIsRnJpZW5QZW5jeWREZWxfQWNjb3VudDpcImZyaWVuZEFwcGxpY2F0aW9uRGVsZXRlZFVzZXJJRExpc3RcIixQZWVyX0FjY291bnQ6XCJ1c2VySURcIixHcm91cEF0dHI6XCJncm91cEF0dHJpYnV0ZUxpc3RcIixHcm91cEF0dHJBcnk6XCJncm91cEF0dHJpYnV0ZUxpc3RcIixBdHRyTWFpblNlcTpcIm1haW5TZXF1ZW5jZVwiLHNlcTpcInNlcXVlbmNlXCIsR3JvdXBBdHRyT3B0aW9uOlwiZ3JvdXBBdHRyaWJ1dGVPcHRpb25cIixCeXRlc0NoYW5nZWRLZXlzOlwiY2hhbmdlZEtleUxpc3RcIixHcm91cEF0dHJJbmZvOlwiZ3JvdXBBdHRyaWJ1dGVMaXN0XCIsR3JvdXBBdHRyU2VxOlwibWFpblNlcXVlbmNlXCIsUHVzaENoYW5nZWRBdHRyVmFsRmxhZzpcImhhc0NoYW5nZWRBdHRyaWJ1dGVJbmZvXCIsU3ViS2V5U2VxOlwic2VxdWVuY2VcIixWYWw6XCJ2YWx1ZVwiLE1zZ0dyb3VwRnJvbUNhcmROYW1lOlwic2VuZGVyTmFtZUNhcmRcIixNc2dHcm91cEZyb21OaWNrTmFtZTpcInNlbmRlck5pY2tcIixDMmNOaWNrOlwicGVlck5pY2tcIixDMmNJbWFnZTpcInBlZXJBdmF0YXJcIixTZW5kTXNnQ29udHJvbDpcIm1lc3NhZ2VDb250cm9sSW5mb1wiLE5vTGFzdE1zZzpcImV4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlXCIsTm9VbnJlYWQ6XCJleGNsdWRlZEZyb21VbnJlYWRDb3VudFwiLFVwZGF0ZVNlcTpcInVwZGF0ZVNlcXVlbmNlXCIsTXV0ZU5vdGlmaWNhdGlvbnM6XCJtdXRlRmxhZ1wiLE1zZ0NsaWVudFRpbWU6XCJjbGllbnRUaW1lXCIsVGlueUlkOlwidGlueUlEXCIsR3JvdXBNc2dSZWNlaXB0TGlzdDpcInJlYWRSZWNlaXB0TGlzdFwiLFJlYWROdW06XCJyZWFkQ291bnRcIixVbnJlYWROdW06XCJ1bnJlYWRDb3VudFwifSxpZ25vcmVLZXlXb3JkOltcIkMyQ1wiLFwiSURcIixcIlVTUFwiXX0sWW09UHQudHJpbTtmdW5jdGlvbiAkbShlLHQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlJiYhQXJyYXkuaXNBcnJheShlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgdGhlIGlucHV0IHRvIGJlIGBzdHJpbmcgfCBzdHJpbmdbXWBcIik7dD1PYmplY3QuYXNzaWduKHtwYXNjYWxDYXNlOiExfSx0KTt2YXIgbjtyZXR1cm4gMD09PShlPUFycmF5LmlzQXJyYXkoZSk/ZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0oKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxlbmd0aH0pKS5qb2luKFwiLVwiKTplLnRyaW0oKSkubGVuZ3RoP1wiXCI6MT09PWUubGVuZ3RoP3QucGFzY2FsQ2FzZT9lLnRvVXBwZXJDYXNlKCk6ZS50b0xvd2VyQ2FzZSgpOihlIT09ZS50b0xvd2VyQ2FzZSgpJiYoZT16bShlKSksZT1lLnJlcGxhY2UoL15bXy5cXC0gXSsvLFwiXCIpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW18uXFwtIF0rKFxcd3wkKS9nLChmdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9KSkucmVwbGFjZSgvXFxkKyhcXHd8JCkvZywoZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9VcHBlckNhc2UoKX0pKSxuPWUsdC5wYXNjYWxDYXNlP24uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrbi5zbGljZSgxKTpuKX1rZSh7dGFyZ2V0OlwiU3RyaW5nXCIscHJvdG86ITAsZm9yY2VkOmZ1bmN0aW9uKGUpe3JldHVybiByKChmdW5jdGlvbigpe3JldHVybiEhUnRbZV0oKXx8XCLigIvCheGgjlwiIT1cIuKAi8KF4aCOXCJbZV0oKXx8UnRbZV0ubmFtZSE9PWV9KSl9KFwidHJpbVwiKX0se3RyaW06ZnVuY3Rpb24oKXtyZXR1cm4gWW0odGhpcyl9fSk7dmFyIHptPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0hMSxuPSExLG89ITEscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgYT1lW3JdO3QmJi9bYS16QS1aXS8udGVzdChhKSYmYS50b1VwcGVyQ2FzZSgpPT09YT8oZT1lLnNsaWNlKDAscikrXCItXCIrZS5zbGljZShyKSx0PSExLG89bixuPSEwLHIrKyk6biYmbyYmL1thLXpBLVpdLy50ZXN0KGEpJiZhLnRvTG93ZXJDYXNlKCk9PT1hPyhlPWUuc2xpY2UoMCxyLTEpK1wiLVwiK2Uuc2xpY2Uoci0xKSxvPW4sbj0hMSx0PSEwKToodD1hLnRvTG93ZXJDYXNlKCk9PT1hJiZhLnRvVXBwZXJDYXNlKCkhPT1hLG89bixuPWEudG9VcHBlckNhc2UoKT09PWEmJmEudG9Mb3dlckNhc2UoKSE9PWEpfXJldHVybiBlfTtmdW5jdGlvbiBKbShlLHQpe3ZhciBuPTA7cmV0dXJuIGZ1bmN0aW9uIGUodCxvKXtpZigrK24+MTAwKXJldHVybiBuLS0sdDtpZihwYyh0KSl7dmFyIHI9dC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBsYyh0KT9lKHQsbyk6dH0pKTtyZXR1cm4gbi0tLHJ9aWYobGModCkpe3ZhciBhPShzPXQsaT1mdW5jdGlvbihlLHQpe2lmKCF2Yyh0KSlyZXR1cm4hMTtpZigocj10KSE9PSRtKHIpKWZvcih2YXIgbj0wO248V20uaWdub3JlS2V5V29yZC5sZW5ndGgmJiF0LmluY2x1ZGVzKFdtLmlnbm9yZUtleVdvcmRbbl0pO24rKyk7dmFyIHI7cmV0dXJuIGdjKG9bdF0pP2Z1bmN0aW9uKGUpe3JldHVyblwiT1BQT0NoYW5uZWxJRFwiPT09ZT9lOmVbMF0udG9VcHBlckNhc2UoKSskbShlKS5zbGljZSgxKX0odCk6b1t0XX0sYz1PYmplY3QuY3JlYXRlKG51bGwpLE9iamVjdC5rZXlzKHMpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWkoc1tlXSxlKTt0JiYoY1t0XT1zW2VdKX0pKSxjKTtyZXR1cm4gYT1xYyhhLChmdW5jdGlvbih0LG4pe3JldHVybiBwYyh0KXx8bGModCk/ZSh0LG8pOnR9KSksbi0tLGF9dmFyIHMsaSxjfShlLHQpfWZ1bmN0aW9uIFhtKGUsdCl7aWYocGMoZSkpcmV0dXJuIGUubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbGMoZSk/WG0oZSx0KTplfSkpO2lmKGxjKGUpKXt2YXIgbj0obz1lLHI9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gZ2ModFtuXSk/JG0obik6dFtuXX0sYT17fSxPYmplY3Qua2V5cyhvKS5mb3JFYWNoKChmdW5jdGlvbihlKXthW3Iob1tlXSxlKV09b1tlXX0pKSxhKTtyZXR1cm4gbj1xYyhuLChmdW5jdGlvbihlKXtyZXR1cm4gcGMoZSl8fGxjKGUpP1htKGUsdCk6ZX0pKX12YXIgbyxyLGF9dmFyIFFtPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIERhdGFWaWV3LFptPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWUpcmV0dXJuIDA7dmFyIHQ9YWUoZSksbj1pZSh0KTtpZih0IT09bil0aHJvdyBSYW5nZUVycm9yKFwiV3JvbmcgbGVuZ3RoIG9yIGluZGV4XCIpO3JldHVybiBufSxldj1NYXRoLmFicyx0dj1NYXRoLnBvdyxudj1NYXRoLmZsb29yLG92PU1hdGgubG9nLHJ2PU1hdGguTE4yLGF2PWZ1bmN0aW9uKGUsdCxuKXt2YXIgbyxyLGEscz1uZXcgQXJyYXkobiksaT04Km4tdC0xLGM9KDE8PGkpLTEsdT1jPj4xLGw9MjM9PT10P3R2KDIsLTI0KS10digyLC03Nyk6MCxkPWU8MHx8MD09PWUmJjEvZTwwPzE6MCxwPTA7Zm9yKChlPWV2KGUpKSE9ZXx8ZT09PTEvMD8ocj1lIT1lPzE6MCxvPWMpOihvPW52KG92KGUpL3J2KSxlKihhPXR2KDIsLW8pKTwxJiYoby0tLGEqPTIpLChlKz1vK3U+PTE/bC9hOmwqdHYoMiwxLXUpKSphPj0yJiYobysrLGEvPTIpLG8rdT49Yz8ocj0wLG89Yyk6byt1Pj0xPyhyPShlKmEtMSkqdHYoMix0KSxvKz11KToocj1lKnR2KDIsdS0xKSp0digyLHQpLG89MCkpO3Q+PTg7c1twKytdPTI1NSZyLHIvPTI1Nix0LT04KTtmb3Iobz1vPDx0fHIsaSs9dDtpPjA7c1twKytdPTI1NSZvLG8vPTI1NixpLT04KTtyZXR1cm4gc1stLXBdfD0xMjgqZCxzfSxzdj1mdW5jdGlvbihlLHQpe3ZhciBuLG89ZS5sZW5ndGgscj04Km8tdC0xLGE9KDE8PHIpLTEscz1hPj4xLGk9ci03LGM9by0xLHU9ZVtjLS1dLGw9MTI3JnU7Zm9yKHU+Pj03O2k+MDtsPTI1NipsK2VbY10sYy0tLGktPTgpO2ZvcihuPWwmKDE8PC1pKS0xLGw+Pj0taSxpKz10O2k+MDtuPTI1NipuK2VbY10sYy0tLGktPTgpO2lmKDA9PT1sKWw9MS1zO2Vsc2V7aWYobD09PWEpcmV0dXJuIG4/TmFOOnU/LTEvMDoxLzA7bis9dHYoMix0KSxsLT1zfXJldHVybih1Py0xOjEpKm4qdHYoMixsLXQpfSxpdj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9TGUodGhpcyksbj1pZSh0Lmxlbmd0aCksbz1hcmd1bWVudHMubGVuZ3RoLHI9bGUobz4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsbiksYT1vPjI/YXJndW1lbnRzWzJdOnZvaWQgMCxzPXZvaWQgMD09PWE/bjpsZShhLG4pO3M+cjspdFtyKytdPWU7cmV0dXJuIHR9LGN2PW1lLmYsdXY9Ti5mLGx2PVEuZ2V0LGR2PVEuc2V0LHB2PW8uQXJyYXlCdWZmZXIsZ3Y9cHYsaHY9by5EYXRhVmlldyxmdj1odiYmaHYucHJvdG90eXBlLF92PU9iamVjdC5wcm90b3R5cGUsbXY9by5SYW5nZUVycm9yLHZ2PWF2LE12PXN2LHl2PWZ1bmN0aW9uKGUpe3JldHVyblsyNTUmZV19LEl2PWZ1bmN0aW9uKGUpe3JldHVyblsyNTUmZSxlPj44JjI1NV19LEV2PWZ1bmN0aW9uKGUpe3JldHVyblsyNTUmZSxlPj44JjI1NSxlPj4xNiYyNTUsZT4+MjQmMjU1XX0sVHY9ZnVuY3Rpb24oZSl7cmV0dXJuIGVbM108PDI0fGVbMl08PDE2fGVbMV08PDh8ZVswXX0sU3Y9ZnVuY3Rpb24oZSl7cmV0dXJuIHZ2KGUsMjMsNCl9LEN2PWZ1bmN0aW9uKGUpe3JldHVybiB2dihlLDUyLDgpfSxBdj1mdW5jdGlvbihlLHQpe3V2KGUucHJvdG90eXBlLHQse2dldDpmdW5jdGlvbigpe3JldHVybiBsdih0aGlzKVt0XX19KX0sRHY9ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIHI9Wm0obiksYT1sdihlKTtpZihyK3Q+YS5ieXRlTGVuZ3RoKXRocm93IG12KFwiV3JvbmcgaW5kZXhcIik7dmFyIHM9bHYoYS5idWZmZXIpLmJ5dGVzLGk9cithLmJ5dGVPZmZzZXQsYz1zLnNsaWNlKGksaSt0KTtyZXR1cm4gbz9jOmMucmV2ZXJzZSgpfSxOdj1mdW5jdGlvbihlLHQsbixvLHIsYSl7dmFyIHM9Wm0obiksaT1sdihlKTtpZihzK3Q+aS5ieXRlTGVuZ3RoKXRocm93IG12KFwiV3JvbmcgaW5kZXhcIik7Zm9yKHZhciBjPWx2KGkuYnVmZmVyKS5ieXRlcyx1PXMraS5ieXRlT2Zmc2V0LGw9bygrciksZD0wO2Q8dDtkKyspY1t1K2RdPWxbYT9kOnQtZC0xXX07aWYoUW0pe2lmKCFyKChmdW5jdGlvbigpe3B2KDEpfSkpfHwhcigoZnVuY3Rpb24oKXtuZXcgcHYoLTEpfSkpfHxyKChmdW5jdGlvbigpe3JldHVybiBuZXcgcHYsbmV3IHB2KDEuNSksbmV3IHB2KE5hTiksXCJBcnJheUJ1ZmZlclwiIT1wdi5uYW1lfSkpKXtmb3IodmFyIGt2LE92PShndj1mdW5jdGlvbihlKXtyZXR1cm4ga3IodGhpcyxndiksbmV3IHB2KFptKGUpKX0pLnByb3RvdHlwZT1wdi5wcm90b3R5cGUsUnY9Y3YocHYpLEx2PTA7UnYubGVuZ3RoPkx2Oykoa3Y9UnZbTHYrK10paW4gZ3Z8fGsoZ3Ysa3YscHZba3ZdKTtPdi5jb25zdHJ1Y3Rvcj1ndn1hbiYmenQoZnYpIT09X3YmJmFuKGZ2LF92KTt2YXIgYnY9bmV3IGh2KG5ldyBndigyKSksd3Y9ZnYuc2V0SW50ODtidi5zZXRJbnQ4KDAsMjE0NzQ4MzY0OCksYnYuc2V0SW50OCgxLDIxNDc0ODM2NDkpLCFidi5nZXRJbnQ4KDApJiZidi5nZXRJbnQ4KDEpfHxBcihmdix7c2V0SW50ODpmdW5jdGlvbihlLHQpe3d2LmNhbGwodGhpcyxlLHQ8PDI0Pj4yNCl9LHNldFVpbnQ4OmZ1bmN0aW9uKGUsdCl7d3YuY2FsbCh0aGlzLGUsdDw8MjQ+PjI0KX19LHt1bnNhZmU6ITB9KX1lbHNlIGd2PWZ1bmN0aW9uKGUpe2tyKHRoaXMsZ3YsXCJBcnJheUJ1ZmZlclwiKTt2YXIgdD1abShlKTtkdih0aGlzLHtieXRlczppdi5jYWxsKG5ldyBBcnJheSh0KSwwKSxieXRlTGVuZ3RoOnR9KSxhfHwodGhpcy5ieXRlTGVuZ3RoPXQpfSxodj1mdW5jdGlvbihlLHQsbil7a3IodGhpcyxodixcIkRhdGFWaWV3XCIpLGtyKGUsZ3YsXCJEYXRhVmlld1wiKTt2YXIgbz1sdihlKS5ieXRlTGVuZ3RoLHI9YWUodCk7aWYocjwwfHxyPm8pdGhyb3cgbXYoXCJXcm9uZyBvZmZzZXRcIik7aWYocisobj12b2lkIDA9PT1uP28tcjppZShuKSk+byl0aHJvdyBtdihcIldyb25nIGxlbmd0aFwiKTtkdih0aGlzLHtidWZmZXI6ZSxieXRlTGVuZ3RoOm4sYnl0ZU9mZnNldDpyfSksYXx8KHRoaXMuYnVmZmVyPWUsdGhpcy5ieXRlTGVuZ3RoPW4sdGhpcy5ieXRlT2Zmc2V0PXIpfSxhJiYoQXYoZ3YsXCJieXRlTGVuZ3RoXCIpLEF2KGh2LFwiYnVmZmVyXCIpLEF2KGh2LFwiYnl0ZUxlbmd0aFwiKSxBdihodixcImJ5dGVPZmZzZXRcIikpLEFyKGh2LnByb3RvdHlwZSx7Z2V0SW50ODpmdW5jdGlvbihlKXtyZXR1cm4gRHYodGhpcywxLGUpWzBdPDwyND4+MjR9LGdldFVpbnQ4OmZ1bmN0aW9uKGUpe3JldHVybiBEdih0aGlzLDEsZSlbMF19LGdldEludDE2OmZ1bmN0aW9uKGUpe3ZhciB0PUR2KHRoaXMsMixlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKTtyZXR1cm4odFsxXTw8OHx0WzBdKTw8MTY+PjE2fSxnZXRVaW50MTY6ZnVuY3Rpb24oZSl7dmFyIHQ9RHYodGhpcywyLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApO3JldHVybiB0WzFdPDw4fHRbMF19LGdldEludDMyOmZ1bmN0aW9uKGUpe3JldHVybiBUdihEdih0aGlzLDQsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCkpfSxnZXRVaW50MzI6ZnVuY3Rpb24oZSl7cmV0dXJuIFR2KER2KHRoaXMsNCxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKSk+Pj4wfSxnZXRGbG9hdDMyOmZ1bmN0aW9uKGUpe3JldHVybiBNdihEdih0aGlzLDQsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCksMjMpfSxnZXRGbG9hdDY0OmZ1bmN0aW9uKGUpe3JldHVybiBNdihEdih0aGlzLDgsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCksNTIpfSxzZXRJbnQ4OmZ1bmN0aW9uKGUsdCl7TnYodGhpcywxLGUseXYsdCl9LHNldFVpbnQ4OmZ1bmN0aW9uKGUsdCl7TnYodGhpcywxLGUseXYsdCl9LHNldEludDE2OmZ1bmN0aW9uKGUsdCl7TnYodGhpcywyLGUsSXYsdCxhcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCl9LHNldFVpbnQxNjpmdW5jdGlvbihlLHQpe052KHRoaXMsMixlLEl2LHQsYXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDApfSxzZXRJbnQzMjpmdW5jdGlvbihlLHQpe052KHRoaXMsNCxlLEV2LHQsYXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDApfSxzZXRVaW50MzI6ZnVuY3Rpb24oZSx0KXtOdih0aGlzLDQsZSxFdix0LGFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwKX0sc2V0RmxvYXQzMjpmdW5jdGlvbihlLHQpe052KHRoaXMsNCxlLFN2LHQsYXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDApfSxzZXRGbG9hdDY0OmZ1bmN0aW9uKGUsdCl7TnYodGhpcyw4LGUsQ3YsdCxhcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCl9fSk7dG4oZ3YsXCJBcnJheUJ1ZmZlclwiKSx0bihodixcIkRhdGFWaWV3XCIpO3ZhciBHdj17QXJyYXlCdWZmZXI6Z3YsRGF0YVZpZXc6aHZ9LFB2PUd2LkFycmF5QnVmZmVyLFV2PUd2LkRhdGFWaWV3LEZ2PVB2LnByb3RvdHlwZS5zbGljZSxxdj1yKChmdW5jdGlvbigpe3JldHVybiFuZXcgUHYoMikuc2xpY2UoMSx2b2lkIDApLmJ5dGVMZW5ndGh9KSk7a2Uoe3RhcmdldDpcIkFycmF5QnVmZmVyXCIscHJvdG86ITAsdW5zYWZlOiEwLGZvcmNlZDpxdn0se3NsaWNlOmZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09RnYmJnZvaWQgMD09PXQpcmV0dXJuIEZ2LmNhbGwoQSh0aGlzKSxlKTtmb3IodmFyIG49QSh0aGlzKS5ieXRlTGVuZ3RoLG89bGUoZSxuKSxyPWxlKHZvaWQgMD09PXQ/bjp0LG4pLGE9bmV3KExyKHRoaXMsUHYpKShpZShyLW8pKSxzPW5ldyBVdih0aGlzKSxpPW5ldyBVdihhKSxjPTA7bzxyOylpLnNldFVpbnQ4KGMrKyxzLmdldFVpbnQ4KG8rKykpO3JldHVybiBhfX0pO3ZhciB4dj1TdHJpbmcuZnJvbUNoYXJDb2RlLFZ2PVN0cmluZy5mcm9tQ29kZVBvaW50LEt2PSEhVnYmJjEhPVZ2Lmxlbmd0aDtrZSh7dGFyZ2V0OlwiU3RyaW5nXCIsc3RhdDohMCxmb3JjZWQ6S3Z9LHtmcm9tQ29kZVBvaW50OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPVtdLG89YXJndW1lbnRzLmxlbmd0aCxyPTA7bz5yOyl7aWYodD0rYXJndW1lbnRzW3IrK10sbGUodCwxMTE0MTExKSE9PXQpdGhyb3cgUmFuZ2VFcnJvcih0K1wiIGlzIG5vdCBhIHZhbGlkIGNvZGUgcG9pbnRcIik7bi5wdXNoKHQ8NjU1MzY/eHYodCk6eHYoNTUyOTYrKCh0LT02NTUzNik+PjEwKSx0JTEwMjQrNTYzMjApKX1yZXR1cm4gbi5qb2luKFwiXCIpfX0pO3ZhciBCdixIdj1OLmYsanY9by5JbnQ4QXJyYXksV3Y9anYmJmp2LnByb3RvdHlwZSxZdj1vLlVpbnQ4Q2xhbXBlZEFycmF5LCR2PVl2JiZZdi5wcm90b3R5cGUsenY9anYmJnp0KGp2KSxKdj1XdiYmenQoV3YpLFh2PU9iamVjdC5wcm90b3R5cGUsUXY9WHYuaXNQcm90b3R5cGVPZixadj1xZShcInRvU3RyaW5nVGFnXCIpLGVNPUsoXCJUWVBFRF9BUlJBWV9UQUdcIiksdE09UW0mJiEhYW4mJlwiT3BlcmFcIiE9PWR0KG8ub3BlcmEpLG5NPSExLG9NPXtJbnQ4QXJyYXk6MSxVaW50OEFycmF5OjEsVWludDhDbGFtcGVkQXJyYXk6MSxJbnQxNkFycmF5OjIsVWludDE2QXJyYXk6MixJbnQzMkFycmF5OjQsVWludDMyQXJyYXk6NCxGbG9hdDMyQXJyYXk6NCxGbG9hdDY0QXJyYXk6OH0sck09ZnVuY3Rpb24oZSl7cmV0dXJuIF8oZSkmJk0ob00sZHQoZSkpfTtmb3IoQnYgaW4gb00pb1tCdl18fCh0TT0hMSk7aWYoKCF0TXx8XCJmdW5jdGlvblwiIT10eXBlb2YgenZ8fHp2PT09RnVuY3Rpb24ucHJvdG90eXBlKSYmKHp2PWZ1bmN0aW9uKCl7dGhyb3cgVHlwZUVycm9yKFwiSW5jb3JyZWN0IGludm9jYXRpb25cIil9LHRNKSlmb3IoQnYgaW4gb00pb1tCdl0mJmFuKG9bQnZdLHp2KTtpZigoIXRNfHwhSnZ8fEp2PT09WHYpJiYoSnY9enYucHJvdG90eXBlLHRNKSlmb3IoQnYgaW4gb00pb1tCdl0mJmFuKG9bQnZdLnByb3RvdHlwZSxKdik7aWYodE0mJnp0KCR2KSE9PUp2JiZhbigkdixKdiksYSYmIU0oSnYsWnYpKWZvcihCdiBpbiBuTT0hMCxIdihKdixadix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIF8odGhpcyk/dGhpc1tlTV06dm9pZCAwfX0pLG9NKW9bQnZdJiZrKG9bQnZdLGVNLEJ2KTt2YXIgYU09e05BVElWRV9BUlJBWV9CVUZGRVJfVklFV1M6dE0sVFlQRURfQVJSQVlfVEFHOm5NJiZlTSxhVHlwZWRBcnJheTpmdW5jdGlvbihlKXtpZihyTShlKSlyZXR1cm4gZTt0aHJvdyBUeXBlRXJyb3IoXCJUYXJnZXQgaXMgbm90IGEgdHlwZWQgYXJyYXlcIil9LGFUeXBlZEFycmF5Q29uc3RydWN0b3I6ZnVuY3Rpb24oZSl7aWYoYW4pe2lmKFF2LmNhbGwoenYsZSkpcmV0dXJuIGV9ZWxzZSBmb3IodmFyIHQgaW4gb00paWYoTShvTSxCdikpe3ZhciBuPW9bdF07aWYobiYmKGU9PT1ufHxRdi5jYWxsKG4sZSkpKXJldHVybiBlfXRocm93IFR5cGVFcnJvcihcIlRhcmdldCBpcyBub3QgYSB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvclwiKX0sZXhwb3J0VHlwZWRBcnJheU1ldGhvZDpmdW5jdGlvbihlLHQsbil7aWYoYSl7aWYobilmb3IodmFyIHIgaW4gb00pe3ZhciBzPW9bcl07cyYmTShzLnByb3RvdHlwZSxlKSYmZGVsZXRlIHMucHJvdG90eXBlW2VdfUp2W2VdJiYhbnx8WihKdixlLG4/dDp0TSYmV3ZbZV18fHQpfX0sZXhwb3J0VHlwZWRBcnJheVN0YXRpY01ldGhvZDpmdW5jdGlvbihlLHQsbil7dmFyIHIscztpZihhKXtpZihhbil7aWYobilmb3IociBpbiBvTSkocz1vW3JdKSYmTShzLGUpJiZkZWxldGUgc1tlXTtpZih6dltlXSYmIW4pcmV0dXJuO3RyeXtyZXR1cm4gWih6dixlLG4/dDp0TSYmanZbZV18fHQpfWNhdGNoKHNJKXt9fWZvcihyIGluIG9NKSEocz1vW3JdKXx8c1tlXSYmIW58fFoocyxlLHQpfX0saXNWaWV3OmZ1bmN0aW9uKGUpe3ZhciB0PWR0KGUpO3JldHVyblwiRGF0YVZpZXdcIj09PXR8fE0ob00sdCl9LGlzVHlwZWRBcnJheTpyTSxUeXBlZEFycmF5Onp2LFR5cGVkQXJyYXlQcm90b3R5cGU6SnZ9LHNNPWFNLk5BVElWRV9BUlJBWV9CVUZGRVJfVklFV1MsaU09by5BcnJheUJ1ZmZlcixjTT1vLkludDhBcnJheSx1TT0hc018fCFyKChmdW5jdGlvbigpe2NNKDEpfSkpfHwhcigoZnVuY3Rpb24oKXtuZXcgY00oLTEpfSkpfHwhTXQoKGZ1bmN0aW9uKGUpe25ldyBjTSxuZXcgY00obnVsbCksbmV3IGNNKDEuNSksbmV3IGNNKGUpfSksITApfHxyKChmdW5jdGlvbigpe3JldHVybiAxIT09bmV3IGNNKG5ldyBpTSgyKSwxLHZvaWQgMCkubGVuZ3RofSkpLGxNPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24oZSl7dmFyIHQ9YWUoZSk7aWYodDwwKXRocm93IFJhbmdlRXJyb3IoXCJUaGUgYXJndW1lbnQgY2FuJ3QgYmUgbGVzcyB0aGFuIDBcIik7cmV0dXJuIHR9KGUpO2lmKG4ldCl0aHJvdyBSYW5nZUVycm9yKFwiV3Jvbmcgb2Zmc2V0XCIpO3JldHVybiBufSxkTT1hTS5hVHlwZWRBcnJheUNvbnN0cnVjdG9yLHBNPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyLGEscyxpPUxlKGUpLGM9YXJndW1lbnRzLmxlbmd0aCx1PWM+MT9hcmd1bWVudHNbMV06dm9pZCAwLGw9dm9pZCAwIT09dSxkPWd0KGkpO2lmKG51bGwhPWQmJiFhdChkKSlmb3Iocz0oYT1kLmNhbGwoaSkpLm5leHQsaT1bXTshKHI9cy5jYWxsKGEpKS5kb25lOylpLnB1c2goci52YWx1ZSk7Zm9yKGwmJmM+MiYmKHU9UmUodSxhcmd1bWVudHNbMl0sMikpLG49aWUoaS5sZW5ndGgpLG89bmV3KGRNKHRoaXMpKShuKSx0PTA7bj50O3QrKylvW3RdPWw/dShpW3RdLHQpOmlbdF07cmV0dXJuIG99O3QoKGZ1bmN0aW9uKGUpe3ZhciB0PW1lLmYsbj1IZS5mb3JFYWNoLHI9US5nZXQscz1RLnNldCxpPU4uZixjPUMuZixsPU1hdGgucm91bmQsZD1vLlJhbmdlRXJyb3IscD1Hdi5BcnJheUJ1ZmZlcixnPUd2LkRhdGFWaWV3LGg9YU0uTkFUSVZFX0FSUkFZX0JVRkZFUl9WSUVXUyxmPWFNLlRZUEVEX0FSUkFZX1RBRyx2PWFNLlR5cGVkQXJyYXkseT1hTS5UeXBlZEFycmF5UHJvdG90eXBlLEk9YU0uYVR5cGVkQXJyYXlDb25zdHJ1Y3RvcixFPWFNLmlzVHlwZWRBcnJheSxUPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTAsbz10Lmxlbmd0aCxyPW5ldyhJKGUpKShvKTtvPm47KXJbbl09dFtuKytdO3JldHVybiByfSxTPWZ1bmN0aW9uKGUsdCl7aShlLHQse2dldDpmdW5jdGlvbigpe3JldHVybiByKHRoaXMpW3RdfX0pfSxBPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlIGluc3RhbmNlb2YgcHx8XCJBcnJheUJ1ZmZlclwiPT0odD1kdChlKSl8fFwiU2hhcmVkQXJyYXlCdWZmZXJcIj09dH0sRD1mdW5jdGlvbihlLHQpe3JldHVybiBFKGUpJiZcInN5bWJvbFwiIT10eXBlb2YgdCYmdCBpbiBlJiZTdHJpbmcoK3QpPT1TdHJpbmcodCl9LE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRChlLHQ9bSh0LCEwKSk/dSgyLGVbdF0pOmMoZSx0KX0sUj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIShEKGUsdD1tKHQsITApKSYmXyhuKSYmTShuLFwidmFsdWVcIikpfHxNKG4sXCJnZXRcIil8fE0obixcInNldFwiKXx8bi5jb25maWd1cmFibGV8fE0obixcIndyaXRhYmxlXCIpJiYhbi53cml0YWJsZXx8TShuLFwiZW51bWVyYWJsZVwiKSYmIW4uZW51bWVyYWJsZT9pKGUsdCxuKTooZVt0XT1uLnZhbHVlLGUpfTthPyhofHwoQy5mPU8sTi5mPVIsUyh5LFwiYnVmZmVyXCIpLFMoeSxcImJ5dGVPZmZzZXRcIiksUyh5LFwiYnl0ZUxlbmd0aFwiKSxTKHksXCJsZW5ndGhcIikpLGtlKHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLGZvcmNlZDohaH0se2dldE93blByb3BlcnR5RGVzY3JpcHRvcjpPLGRlZmluZVByb3BlcnR5OlJ9KSxlLmV4cG9ydHM9ZnVuY3Rpb24oZSxhLGMpe3ZhciB1PWUubWF0Y2goL1xcZCskLylbMF0vOCxtPWUrKGM/XCJDbGFtcGVkXCI6XCJcIikrXCJBcnJheVwiLE09XCJnZXRcIitlLEk9XCJzZXRcIitlLFM9b1ttXSxDPVMsRD1DJiZDLnByb3RvdHlwZSxOPXt9LE89ZnVuY3Rpb24oZSx0KXtpKGUsdCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dmFyIG49cihlKTtyZXR1cm4gbi52aWV3W01dKHQqdStuLmJ5dGVPZmZzZXQsITApfSh0aGlzLHQpfSxzZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuKXt2YXIgbz1yKGUpO2MmJihuPShuPWwobikpPDA/MDpuPjI1NT8yNTU6MjU1Jm4pLG8udmlld1tJXSh0KnUrby5ieXRlT2Zmc2V0LG4sITApfSh0aGlzLHQsZSl9LGVudW1lcmFibGU6ITB9KX07aD91TSYmKEM9YSgoZnVuY3Rpb24oZSx0LG4sbyl7cmV0dXJuIGtyKGUsQyxtKSx0cihfKHQpP0EodCk/dm9pZCAwIT09bz9uZXcgUyh0LGxNKG4sdSksbyk6dm9pZCAwIT09bj9uZXcgUyh0LGxNKG4sdSkpOm5ldyBTKHQpOkUodCk/VChDLHQpOnBNLmNhbGwoQyx0KTpuZXcgUyhabSh0KSksZSxDKX0pKSxhbiYmYW4oQyx2KSxuKHQoUyksKGZ1bmN0aW9uKGUpe2UgaW4gQ3x8ayhDLGUsU1tlXSl9KSksQy5wcm90b3R5cGU9RCk6KEM9YSgoZnVuY3Rpb24oZSx0LG4sbyl7a3IoZSxDLG0pO3ZhciByLGEsaSxjPTAsbD0wO2lmKF8odCkpe2lmKCFBKHQpKXJldHVybiBFKHQpP1QoQyx0KTpwTS5jYWxsKEMsdCk7cj10LGw9bE0obix1KTt2YXIgaD10LmJ5dGVMZW5ndGg7aWYodm9pZCAwPT09byl7aWYoaCV1KXRocm93IGQoXCJXcm9uZyBsZW5ndGhcIik7aWYoKGE9aC1sKTwwKXRocm93IGQoXCJXcm9uZyBsZW5ndGhcIil9ZWxzZSBpZigoYT1pZShvKSp1KStsPmgpdGhyb3cgZChcIldyb25nIGxlbmd0aFwiKTtpPWEvdX1lbHNlIGk9Wm0odCkscj1uZXcgcChhPWkqdSk7Zm9yKHMoZSx7YnVmZmVyOnIsYnl0ZU9mZnNldDpsLGJ5dGVMZW5ndGg6YSxsZW5ndGg6aSx2aWV3Om5ldyBnKHIpfSk7YzxpOylPKGUsYysrKX0pKSxhbiYmYW4oQyx2KSxEPUMucHJvdG90eXBlPWt0KHkpKSxELmNvbnN0cnVjdG9yIT09QyYmayhELFwiY29uc3RydWN0b3JcIixDKSxmJiZrKEQsZixtKSxOW21dPUMsa2Uoe2dsb2JhbDohMCxmb3JjZWQ6QyE9UyxzaGFtOiFofSxOKSxcIkJZVEVTX1BFUl9FTEVNRU5UXCJpbiBDfHxrKEMsXCJCWVRFU19QRVJfRUxFTUVOVFwiLHUpLFwiQllURVNfUEVSX0VMRU1FTlRcImluIER8fGsoRCxcIkJZVEVTX1BFUl9FTEVNRU5UXCIsdSksTnIobSl9KTplLmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSkpKFwiVWludDhcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixvKXtyZXR1cm4gZSh0aGlzLHQsbixvKX19KSk7dmFyIGdNPU1hdGgubWluLGhNPVtdLmNvcHlXaXRoaW58fGZ1bmN0aW9uKGUsdCl7dmFyIG49TGUodGhpcyksbz1pZShuLmxlbmd0aCkscj1sZShlLG8pLGE9bGUodCxvKSxzPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGk9Z00oKHZvaWQgMD09PXM/bzpsZShzLG8pKS1hLG8tciksYz0xO2ZvcihhPHImJnI8YStpJiYoYz0tMSxhKz1pLTEscis9aS0xKTtpLS0gPjA7KWEgaW4gbj9uW3JdPW5bYV06ZGVsZXRlIG5bcl0scis9YyxhKz1jO3JldHVybiBufSxmTT1hTS5hVHlwZWRBcnJheTsoMCxhTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcImNvcHlXaXRoaW5cIiwoZnVuY3Rpb24oZSx0KXtyZXR1cm4gaE0uY2FsbChmTSh0aGlzKSxlLHQsYXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDApfSkpO3ZhciBfTT1IZS5ldmVyeSxtTT1hTS5hVHlwZWRBcnJheTsoMCxhTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcImV2ZXJ5XCIsKGZ1bmN0aW9uKGUpe3JldHVybiBfTShtTSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0pKTt2YXIgdk09YU0uYVR5cGVkQXJyYXk7KDAsYU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJmaWxsXCIsKGZ1bmN0aW9uKGUpe3JldHVybiBpdi5hcHBseSh2TSh0aGlzKSxhcmd1bWVudHMpfSkpO3ZhciBNTT1IZS5maWx0ZXIseU09YU0uYVR5cGVkQXJyYXksSU09YU0uYVR5cGVkQXJyYXlDb25zdHJ1Y3RvcjsoMCxhTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcImZpbHRlclwiLChmdW5jdGlvbihlKXtmb3IodmFyIHQ9TU0oeU0odGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCksbj1Mcih0aGlzLHRoaXMuY29uc3RydWN0b3IpLG89MCxyPXQubGVuZ3RoLGE9bmV3KElNKG4pKShyKTtyPm87KWFbb109dFtvKytdO3JldHVybiBhfSkpO3ZhciBFTT1IZS5maW5kLFRNPWFNLmFUeXBlZEFycmF5OygwLGFNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwiZmluZFwiLChmdW5jdGlvbihlKXtyZXR1cm4gRU0oVE0odGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9KSk7dmFyIFNNPUhlLmZpbmRJbmRleCxDTT1hTS5hVHlwZWRBcnJheTsoMCxhTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcImZpbmRJbmRleFwiLChmdW5jdGlvbihlKXtyZXR1cm4gU00oQ00odGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9KSk7dmFyIEFNPUhlLmZvckVhY2gsRE09YU0uYVR5cGVkQXJyYXk7KDAsYU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJmb3JFYWNoXCIsKGZ1bmN0aW9uKGUpe0FNKERNKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSkpO3ZhciBOTT1wZS5pbmNsdWRlcyxrTT1hTS5hVHlwZWRBcnJheTsoMCxhTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcImluY2x1ZGVzXCIsKGZ1bmN0aW9uKGUpe3JldHVybiBOTShrTSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0pKTt2YXIgT009cGUuaW5kZXhPZixSTT1hTS5hVHlwZWRBcnJheTsoMCxhTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcImluZGV4T2ZcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIE9NKFJNKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSkpO3ZhciBMTT1xZShcIml0ZXJhdG9yXCIpLGJNPW8uVWludDhBcnJheSx3TT13by52YWx1ZXMsR009d28ua2V5cyxQTT13by5lbnRyaWVzLFVNPWFNLmFUeXBlZEFycmF5LEZNPWFNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QscU09Yk0mJmJNLnByb3RvdHlwZVtMTV0seE09ISFxTSYmKFwidmFsdWVzXCI9PXFNLm5hbWV8fG51bGw9PXFNLm5hbWUpLFZNPWZ1bmN0aW9uKCl7cmV0dXJuIHdNLmNhbGwoVU0odGhpcykpfTtGTShcImVudHJpZXNcIiwoZnVuY3Rpb24oKXtyZXR1cm4gUE0uY2FsbChVTSh0aGlzKSl9KSksRk0oXCJrZXlzXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEdNLmNhbGwoVU0odGhpcykpfSkpLEZNKFwidmFsdWVzXCIsVk0sIXhNKSxGTShMTSxWTSwheE0pO3ZhciBLTT1hTS5hVHlwZWRBcnJheSxCTT1bXS5qb2luOygwLGFNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwiam9pblwiLChmdW5jdGlvbihlKXtyZXR1cm4gQk0uYXBwbHkoS00odGhpcyksYXJndW1lbnRzKX0pKTt2YXIgSE09YU0uYVR5cGVkQXJyYXk7KDAsYU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJsYXN0SW5kZXhPZlwiLChmdW5jdGlvbihlKXtyZXR1cm4gZF8uYXBwbHkoSE0odGhpcyksYXJndW1lbnRzKX0pKTt2YXIgak09SGUubWFwLFdNPWFNLmFUeXBlZEFycmF5LFlNPWFNLmFUeXBlZEFycmF5Q29uc3RydWN0b3I7KDAsYU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJtYXBcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGpNKFdNKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyhZTShMcihlLGUuY29uc3RydWN0b3IpKSkodCl9KSl9KSk7dmFyICRNPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4sbyxyKXtPZShuKTt2YXIgYT1MZSh0KSxzPWcoYSksaT1pZShhLmxlbmd0aCksYz1lP2ktMTowLHU9ZT8tMToxO2lmKG88Milmb3IoOzspe2lmKGMgaW4gcyl7cj1zW2NdLGMrPXU7YnJlYWt9aWYoYys9dSxlP2M8MDppPD1jKXRocm93IFR5cGVFcnJvcihcIlJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIil9Zm9yKDtlP2M+PTA6aT5jO2MrPXUpYyBpbiBzJiYocj1uKHIsc1tjXSxjLGEpKTtyZXR1cm4gcn19LHpNPXtsZWZ0OiRNKCExKSxyaWdodDokTSghMCl9LEpNPXpNLmxlZnQsWE09YU0uYVR5cGVkQXJyYXk7KDAsYU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJyZWR1Y2VcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIEpNKFhNKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9KSk7dmFyIFFNPXpNLnJpZ2h0LFpNPWFNLmFUeXBlZEFycmF5OygwLGFNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwicmVkdWNlUmlnaHRcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIFFNKFpNKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9KSk7dmFyIGV5PWFNLmFUeXBlZEFycmF5LHR5PWFNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2Qsbnk9TWF0aC5mbG9vcjt0eShcInJldmVyc2VcIiwoZnVuY3Rpb24oKXtmb3IodmFyIGUsdD1leSh0aGlzKS5sZW5ndGgsbj1ueSh0LzIpLG89MDtvPG47KWU9dGhpc1tvXSx0aGlzW28rK109dGhpc1stLXRdLHRoaXNbdF09ZTtyZXR1cm4gdGhpc30pKTt2YXIgb3k9YU0uYVR5cGVkQXJyYXk7KDAsYU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJzZXRcIiwoZnVuY3Rpb24oZSl7b3kodGhpcyk7dmFyIHQ9bE0oYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsMSksbj10aGlzLmxlbmd0aCxvPUxlKGUpLHI9aWUoby5sZW5ndGgpLGE9MDtpZihyK3Q+bil0aHJvdyBSYW5nZUVycm9yKFwiV3JvbmcgbGVuZ3RoXCIpO2Zvcig7YTxyOyl0aGlzW3QrYV09b1thKytdfSkscigoZnVuY3Rpb24oKXtuZXcgSW50OEFycmF5KDEpLnNldCh7fSl9KSkpO3ZhciByeT1hTS5hVHlwZWRBcnJheSxheT1hTS5hVHlwZWRBcnJheUNvbnN0cnVjdG9yLHN5PVtdLnNsaWNlOygwLGFNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwic2xpY2VcIiwoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49c3kuY2FsbChyeSh0aGlzKSxlLHQpLG89THIodGhpcyx0aGlzLmNvbnN0cnVjdG9yKSxyPTAsYT1uLmxlbmd0aCxzPW5ldyhheShvKSkoYSk7YT5yOylzW3JdPW5bcisrXTtyZXR1cm4gc30pLHIoKGZ1bmN0aW9uKCl7bmV3IEludDhBcnJheSgxKS5zbGljZSgpfSkpKTt2YXIgaXk9SGUuc29tZSxjeT1hTS5hVHlwZWRBcnJheTsoMCxhTS5leHBvcnRUeXBlZEFycmF5TWV0aG9kKShcInNvbWVcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGl5KGN5KHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSkpO3ZhciB1eT1hTS5hVHlwZWRBcnJheSxseT1bXS5zb3J0OygwLGFNLmV4cG9ydFR5cGVkQXJyYXlNZXRob2QpKFwic29ydFwiLChmdW5jdGlvbihlKXtyZXR1cm4gbHkuY2FsbCh1eSh0aGlzKSxlKX0pKTt2YXIgZHk9YU0uYVR5cGVkQXJyYXk7KDAsYU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCkoXCJzdWJhcnJheVwiLChmdW5jdGlvbihlLHQpe3ZhciBuPWR5KHRoaXMpLG89bi5sZW5ndGgscj1sZShlLG8pO3JldHVybiBuZXcoTHIobixuLmNvbnN0cnVjdG9yKSkobi5idWZmZXIsbi5ieXRlT2Zmc2V0K3Iqbi5CWVRFU19QRVJfRUxFTUVOVCxpZSgodm9pZCAwPT09dD9vOmxlKHQsbykpLXIpKX0pKTt2YXIgcHk9by5JbnQ4QXJyYXksZ3k9YU0uYVR5cGVkQXJyYXksaHk9YU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCxmeT1bXS50b0xvY2FsZVN0cmluZyxfeT1bXS5zbGljZSx2eT0hIXB5JiZyKChmdW5jdGlvbigpe2Z5LmNhbGwobmV3IHB5KDEpKX0pKTtoeShcInRvTG9jYWxlU3RyaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZ5LmFwcGx5KHZ5P195LmNhbGwoZ3kodGhpcykpOmd5KHRoaXMpLGFyZ3VtZW50cyl9KSxyKChmdW5jdGlvbigpe3JldHVyblsxLDJdLnRvTG9jYWxlU3RyaW5nKCkhPW5ldyBweShbMSwyXSkudG9Mb2NhbGVTdHJpbmcoKX0pKXx8IXIoKGZ1bmN0aW9uKCl7cHkucHJvdG90eXBlLnRvTG9jYWxlU3RyaW5nLmNhbGwoWzEsMl0pfSkpKTt2YXIgTXk9YU0uZXhwb3J0VHlwZWRBcnJheU1ldGhvZCx5eT1vLlVpbnQ4QXJyYXksSXk9eXkmJnl5LnByb3RvdHlwZXx8e30sRXk9W10udG9TdHJpbmcsVHk9W10uam9pbjtyKChmdW5jdGlvbigpe0V5LmNhbGwoe30pfSkpJiYoRXk9ZnVuY3Rpb24oKXtyZXR1cm4gVHkuY2FsbCh0aGlzKX0pO3ZhciBTeT1JeS50b1N0cmluZyE9RXk7TXkoXCJ0b1N0cmluZ1wiLEV5LFN5KTt2YXIgQ3k9U3RyaW5nLmZyb21DaGFyQ29kZSxBeT1mdW5jdGlvbihlKXt2YXIgdD0wfGUuY2hhckNvZGVBdCgwKTtpZig1NTI5Njw9dClpZih0PDU2MzIwKXt2YXIgbj0wfGUuY2hhckNvZGVBdCgxKTtpZig1NjMyMDw9biYmbjw9NTczNDMpe2lmKCh0PSh0PDwxMCkrbi01NjYxMzg4OHwwKT42NTUzNSlyZXR1cm4gQ3koMjQwfHQ+Pj4xOCwxMjh8dD4+PjEyJjYzLDEyOHx0Pj4+NiY2MywxMjh8NjMmdCl9ZWxzZSB0PTY1NTMzfWVsc2UgdDw9NTczNDMmJih0PTY1NTMzKTtyZXR1cm4gdDw9MjA0Nz9DeSgxOTJ8dD4+PjYsMTI4fDYzJnQpOkN5KDIyNHx0Pj4+MTIsMTI4fHQ+Pj42JjYzLDEyOHw2MyZ0KX0sRHk9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXZvaWQgMD09PWU/XCJcIjooXCJcIitlKS5yZXBsYWNlKC9bXFx4ODAtXFx1RDdmZlxcdURDMDAtXFx1RkZGRl18W1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGXT8vZyxBeSksbj0wfHQubGVuZ3RoLG89bmV3IFVpbnQ4QXJyYXkobikscj0wO3I8bjtyPXIrMXwwKW9bcl09MHx0LmNoYXJDb2RlQXQocik7cmV0dXJuIG99LE55PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgVWludDhBcnJheShlKSxuPVwiXCIsbz0wLHI9dC5sZW5ndGg7bzxyOyl7dmFyIGE9dFtvXSxzPTAsaT0wO2lmKGE8PTEyNz8ocz0wLGk9MjU1JmEpOmE8PTIyMz8ocz0xLGk9MzEmYSk6YTw9MjM5PyhzPTIsaT0xNSZhKTphPD0yNDQmJihzPTMsaT03JmEpLHItby1zPjApZm9yKHZhciBjPTA7YzxzOylpPWk8PDZ8NjMmKGE9dFtvK2MrMV0pLGMrPTE7ZWxzZSBpPTY1NTMzLHM9ci1vO24rPVN0cmluZy5mcm9tQ29kZVBvaW50KGkpLG8rPXMrMX1yZXR1cm4gbn0sa3k9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSksdGhpcy5faGFuZGxlcj10O3ZhciBuPXQuZ2V0VVJMKCk7aWYodGhpcy5fc29ja2V0PW51bGwsdGhpcy5fd29ya2VyU29ja2V0PW51bGwsdGhpcy5faWQ9U2MoKSx0aGlzLl9oYW5kbGVyLmdldElzV29ya2VyRW5hYmxlZCgpKXt2YXIgbz1VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFsnO2xldCBfc29ja2V0ID0gbnVsbDtvbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgeyAgaWYgKGV2ZW50LmRhdGEuY21kID09PSBcInN0YXJ0XCIpIHsgICAgY29uc3QgdXJsID0gZXZlbnQuZGF0YS51cmw7ICAgIF9zb2NrZXQgPSBuZXcgV2ViU29ja2V0KHVybCk7ICAgIF9zb2NrZXQuYmluYXJ5VHlwZSA9IFwiYXJyYXlidWZmZXJcIjsgICAgX3NvY2tldC5vbm9wZW4gPSBmdW5jdGlvbigpIHsgICAgICBwb3N0TWVzc2FnZSh7IGNhbGxiYWNrOiBcIm9uT3BlblwiIH0pOyAgICB9OyAgICBfc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbihlKSB7ICAgICAgcG9zdE1lc3NhZ2UoeyBjYWxsYmFjazogXCJvbk9wZW5cIiwgZTogeyBjb2RlOiBlLmNvZGUsIHJlYXNvbjogZS5yZWFzb24gfSB9KTsgICAgfTsgICAgX3NvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7ICAgICAgcG9zdE1lc3NhZ2UoeyBjYWxsYmFjazogXCJvbk1lc3NhZ2VcIiwgZGF0YTogZS5kYXRhIH0pOyAgICB9OyAgICBfc29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7ICAgICAgcG9zdE1lc3NhZ2UoeyBjYWxsYmFjazogXCJvbkVycm9yXCIsIGU6IHsgaXNUcnVzdGVkOiBcInRydWVcIiB9IH0pOyAgICB9OyAgfSBlbHNlIGlmIChldmVudC5kYXRhLmNtZCA9PT0gXCJzZW5kTWVzc2FnZVwiKSB7ICAgIGlmIChfc29ja2V0ICE9PSBudWxsKSB7ICAgICAgX3NvY2tldC5zZW5kKGV2ZW50LmRhdGEuZGF0YSk7ICAgIH0gIH0gZWxzZSBpZiAoZXZlbnQuZGF0YS5jbWQgPT09IFwic3RvcFwiKSB7ICAgIGlmIChfc29ja2V0ICE9PSBudWxsKSB7ICAgICAgX3NvY2tldC5jbG9zZShldmVudC5kYXRhLmNvZGUpOyAgICAgIF9zb2NrZXQgPSBudWxsOyAgICB9ICB9fTsnXSx7dHlwZTpcImFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7IGNoYXJzZXQ9dXRmLThcIn0pKTt0aGlzLl93b3JrZXJTb2NrZXQ9bmV3IFdvcmtlcihvKTt2YXIgcj10aGlzO3RoaXMuX3dvcmtlclNvY2tldC5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhLG49dC5jYWxsYmFjayxvPXQuZTtcIm9uT3BlblwiPT09bj9yLl9vbk9wZW4oKTpcIm9uQ2xvc2VcIj09PW4/ci5fb25DbG9zZShvKTpcIm9uRXJyb3JcIj09PW4/ci5fb25FcnJvcihvKTpcIm9uTWVzc2FnZVwiPT09biYmci5fb25NZXNzYWdlKGUuZGF0YSl9LHRoaXMuX3dvcmtlclNvY2tldC5wb3N0TWVzc2FnZSh7Y21kOlwic3RhcnRcIixpZDp0aGlzLl9pZCx1cmw6bn0pfWVsc2UgcGk/dWk/KGhpLmNvbm5lY3RTb2NrZXQoe3VybDpuLGhlYWRlcjp7XCJjb250ZW50LXR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn19KSxoaS5vblNvY2tldENsb3NlKHRoaXMuX29uQ2xvc2UuYmluZCh0aGlzKSksaGkub25Tb2NrZXRPcGVuKHRoaXMuX29uT3Blbi5iaW5kKHRoaXMpKSxoaS5vblNvY2tldE1lc3NhZ2UodGhpcy5fb25NZXNzYWdlLmJpbmQodGhpcykpLGhpLm9uU29ja2V0RXJyb3IodGhpcy5fb25FcnJvci5iaW5kKHRoaXMpKSk6KHRoaXMuX3NvY2tldD1oaS5jb25uZWN0U29ja2V0KHt1cmw6bixoZWFkZXI6e1wiY29udGVudC10eXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uXCJ9LGNvbXBsZXRlOmZ1bmN0aW9uKCl7fX0pLHRoaXMuX3NvY2tldC5vbkNsb3NlKHRoaXMuX29uQ2xvc2UuYmluZCh0aGlzKSksdGhpcy5fc29ja2V0Lm9uT3Blbih0aGlzLl9vbk9wZW4uYmluZCh0aGlzKSksdGhpcy5fc29ja2V0Lm9uTWVzc2FnZSh0aGlzLl9vbk1lc3NhZ2UuYmluZCh0aGlzKSksdGhpcy5fc29ja2V0Lm9uRXJyb3IodGhpcy5fb25FcnJvci5iaW5kKHRoaXMpKSk6Z2kmJih0aGlzLl9zb2NrZXQ9bmV3IFdlYlNvY2tldChuKSx0aGlzLl9zb2NrZXQuYmluYXJ5VHlwZT1cImFycmF5YnVmZmVyXCIsdGhpcy5fc29ja2V0Lm9ub3Blbj10aGlzLl9vbk9wZW4uYmluZCh0aGlzKSx0aGlzLl9zb2NrZXQub25tZXNzYWdlPXRoaXMuX29uTWVzc2FnZS5iaW5kKHRoaXMpLHRoaXMuX3NvY2tldC5vbmNsb3NlPXRoaXMuX29uQ2xvc2UuYmluZCh0aGlzKSx0aGlzLl9zb2NrZXQub25lcnJvcj10aGlzLl9vbkVycm9yLmJpbmQodGhpcykpO3RoaXMuX2NhbklVc2VCaW5hcnlGcmFtZT10LmNhbklVc2VCaW5hcnlGcmFtZSgpfXJldHVybiBFbihlLFt7a2V5OlwiZ2V0SURcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH19LHtrZXk6XCJfb25PcGVuXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9oYW5kbGVyLm9uT3Blbih7aWQ6dGhpcy5faWR9KX19LHtrZXk6XCJfb25DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2hhbmRsZXIub25DbG9zZSh7aWQ6dGhpcy5faWQsZTplfSl9fSx7a2V5OlwiX29uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2hhbmRsZXIub25NZXNzYWdlKHtkYXRhOnRoaXMuX2NhbklVc2VCaW5hcnlGcmFtZT9OeShlLmRhdGEpOmUuZGF0YX0pfX0se2tleTpcIl9vbkVycm9yXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5faGFuZGxlci5vbkVycm9yKHtpZDp0aGlzLl9pZCxlOmV9KX19LHtrZXk6XCJzZXRJc1dvcmtlckVuYWJsZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9pc1dvcmtlckVuYWJsZWQ9ITB9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLl93b3JrZXJTb2NrZXQmJih0aGlzLl93b3JrZXJTb2NrZXQucG9zdE1lc3NhZ2Uoe2NtZDpcInN0b3BcIixjb2RlOmV9KSx0aGlzLl93b3JrZXJTb2NrZXQudGVybWluYXRlKCksdGhpcy5fd29ya2VyU29ja2V0PW51bGwpLHVpKXJldHVybiBoaS5vZmZTb2NrZXRDbG9zZSgpLGhpLm9mZlNvY2tldE1lc3NhZ2UoKSxoaS5vZmZTb2NrZXRPcGVuKCksaGkub2ZmU29ja2V0RXJyb3IoKSx2b2lkIGhpLmNsb3NlU29ja2V0KCk7dGhpcy5fc29ja2V0JiYocGk/KHRoaXMuX3NvY2tldC5vbkNsb3NlKChmdW5jdGlvbigpe30pKSx0aGlzLl9zb2NrZXQub25PcGVuKChmdW5jdGlvbigpe30pKSx0aGlzLl9zb2NrZXQub25NZXNzYWdlKChmdW5jdGlvbigpe30pKSx0aGlzLl9zb2NrZXQub25FcnJvcigoZnVuY3Rpb24oKXt9KSkpOmdpJiYodGhpcy5fc29ja2V0Lm9ub3Blbj1udWxsLHRoaXMuX3NvY2tldC5vbm1lc3NhZ2U9bnVsbCx0aGlzLl9zb2NrZXQub25jbG9zZT1udWxsLHRoaXMuX3NvY2tldC5vbmVycm9yPW51bGwpLGNpP3RoaXMuX3NvY2tldC5jbG9zZSh7Y29kZTplfSk6dGhpcy5fc29ja2V0LmNsb3NlKGUpLHRoaXMuX3NvY2tldD1udWxsKX19LHtrZXk6XCJzZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5fd29ya2VyU29ja2V0KXRoaXMuX3dvcmtlclNvY2tldC5wb3N0TWVzc2FnZSh7Y21kOlwic2VuZE1lc3NhZ2VcIixkYXRhOnRoaXMuX2NhbklVc2VCaW5hcnlGcmFtZT9EeShlLmRhdGEpLmJ1ZmZlcjplLmRhdGF9KTtlbHNle2lmKHVpKXJldHVybiB2b2lkIGhpLnNlbmRTb2NrZXRNZXNzYWdlKHtkYXRhOmUuZGF0YSxmYWlsOmZ1bmN0aW9uKCl7ZS5mYWlsJiZlLnJlcXVlc3RJRCYmZS5mYWlsKGUucmVxdWVzdElEKX19KTt0aGlzLl9zb2NrZXQmJihwaT90aGlzLl9zb2NrZXQuc2VuZCh7ZGF0YTp0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWU/RHkoZS5kYXRhKS5idWZmZXI6ZS5kYXRhLGZhaWw6ZnVuY3Rpb24oKXtlLmZhaWwmJmUucmVxdWVzdElEJiZlLmZhaWwoZS5yZXF1ZXN0SUQpfX0pOmdpJiZ0aGlzLl9zb2NrZXQuc2VuZCh0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWU/RHkoZS5kYXRhKS5idWZmZXI6ZS5kYXRhKSl9fX1dKSxlfSgpLE95PTRlMyxSeT00MDAxLEx5PVwiY29ubmVjdGVkXCIsYnk9XCJjb25uZWN0aW5nXCIsd3k9XCJkaXNjb25uZWN0ZWRcIixHeT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7eW4odGhpcyxlKSx0aGlzLl9jaGFubmVsTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiU29ja2V0SGFuZGxlclwiLHRoaXMuX3Byb21pc2VNYXA9bmV3IE1hcCx0aGlzLl9yZWFkeVN0YXRlPXd5LHRoaXMuX3NpbXBsZVJlcXVlc3RNYXA9bmV3IE1hcCx0aGlzLk1BWF9TSVpFPTEwMCx0aGlzLl9zdGFydFNlcXVlbmNlPVNjKCksdGhpcy5fc3RhcnRUcz0wLHRoaXMuX3JlQ29ubmVjdEZsYWc9ITEsdGhpcy5fbmV4dFBpbmdUcz0wLHRoaXMuX3JlQ29ubmVjdENvdW50PTAsdGhpcy5NQVhfUkVDT05ORUNUX0NPVU5UPTMsdGhpcy5fc29ja2V0SUQ9LTEsdGhpcy5fcmFuZG9tPTAsdGhpcy5fc29ja2V0PW51bGwsdGhpcy5fdXJsPVwiXCIsdGhpcy5fb25PcGVuVHM9MCx0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWU9ITAsdGhpcy5faXNXb3JrZXJFbmFibGVkPSEwLHRoaXMuX3NldFdlYnNvY2tldEhvc3QoKSx0aGlzLl9pbml0Q29ubmVjdGlvbigpfXJldHVybiBFbihlLFt7a2V5OlwiX3NldFdlYnNvY2tldEhvc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKGxsKSx0PSRzO3RoaXMuX2NoYW5uZWxNb2R1bGUuaXNPdmVyc2VhKCkmJih0PXpzKSxlLmlzU2luZ2Fwb3JlU2l0ZSgpP3Q9SnM6ZS5pc0tvcmVhU2l0ZSgpP3Q9WHM6ZS5pc0dlcm1hbnlTaXRlKCk/dD1RczplLmlzSW5kaWFTaXRlKCkmJih0PVpzKSxlaS5IT1NULnNldEN1cnJlbnQodCl9fSx7a2V5OlwiX2luaXRDb25uZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtnYyhlaS5IT1NULkNVUlJFTlQuQkFDS1VQKXx8XCJcIj09PXRoaXMuX3VybD90aGlzLl91cmw9ZWkuSE9TVC5DVVJSRU5ULkRFRkFVTFQ6dGhpcy5fdXJsPT09ZWkuSE9TVC5DVVJSRU5ULkRFRkFVTFQ/dGhpcy5fdXJsPWVpLkhPU1QuQ1VSUkVOVC5CQUNLVVA6dGhpcy5fdXJsPT09ZWkuSE9TVC5DVVJSRU5ULkJBQ0tVUCYmKHRoaXMuX3VybD1laS5IT1NULkNVUlJFTlQuREVGQVVMVCk7dmFyIGU9dGhpcy5fY2hhbm5lbE1vZHVsZS5nZXRNb2R1bGUobGwpLmdldFByb3h5U2VydmVyKCk7SmMoZSl8fCh0aGlzLl91cmw9ZSksdGhpcy5fY29ubmVjdCgpLHRoaXMuX25leHRQaW5nVHM9MH19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtlJTE9PTAmJnRoaXMuX2NoZWNrUHJvbWlzZU1hcCgpfX0se2tleTpcIl9jaGVja1Byb21pc2VNYXBcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7MCE9PXRoaXMuX3Byb21pc2VNYXAuc2l6ZSYmdGhpcy5fcHJvbWlzZU1hcC5mb3JFYWNoKChmdW5jdGlvbih0LG4pe3ZhciBvPXQucmVqZWN0LHI9dC50aW1lc3RhbXA7RGF0ZS5ub3coKS1yPj0xNWUzJiYoUWkubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fY2hlY2tQcm9taXNlTWFwIHJlcXVlc3QgdGltZW91dCwgZGVsZXRlIHJlcXVlc3RJRDpcIikuY29uY2F0KG4pKSxlLl9wcm9taXNlTWFwLmRlbGV0ZShuKSxvKG5ldyBBXyh7Y29kZTp6ZC5ORVRXT1JLX1RJTUVPVVQsbWVzc2FnZTpKZC5ORVRXT1JLX1RJTUVPVVR9KSksZS5fY2hhbm5lbE1vZHVsZS5vblJlcXVlc3RUaW1lb3V0KG4pKX0pKX19LHtrZXk6XCJvbk9wZW5cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk9wZW5Ucz1EYXRlLm5vdygpO3ZhciB0PWUuaWQ7dGhpcy5fc29ja2V0SUQ9dDt2YXIgbj1EYXRlLm5vdygpLXRoaXMuX3N0YXJ0VHM7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25PcGVuIGNvc3QgXCIpLmNvbmNhdChuLFwiIG1zLiBzb2NrZXRJRDpcIikuY29uY2F0KHQpKSxuZXcgZHAoeXApLnNldE1lc3NhZ2Uobikuc2V0Q29zdFRpbWUobikuc2V0TW9yZU1lc3NhZ2UoXCJzb2NrZXRJRDpcIi5jb25jYXQodCkpLmVuZCgpLGUuaWQ9PT10aGlzLl9zb2NrZXRJRCYmKHRoaXMuX3JlYWR5U3RhdGU9THksdGhpcy5fcmVDb25uZWN0Q291bnQ9MCx0aGlzLl9yZXNlbmQoKSwhMD09PXRoaXMuX3JlQ29ubmVjdEZsYWcmJih0aGlzLl9jaGFubmVsTW9kdWxlLm9uUmVjb25uZWN0ZWQoKSx0aGlzLl9yZUNvbm5lY3RGbGFnPSExKSx0aGlzLl9jaGFubmVsTW9kdWxlLm9uT3BlbigpKX19LHtrZXk6XCJvbkNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGRwKElwKSxuPWUuaWQsbz1lLmUscj1cInNvdXJjZVNvY2tldElEOlwiLmNvbmNhdChuLFwiIGN1cnJlbnRTb2NrZXRJRDpcIikuY29uY2F0KHRoaXMuX3NvY2tldElELFwiIGNvZGU6XCIpLmNvbmNhdChvLmNvZGUsXCIgcmVhc29uOlwiKS5jb25jYXQoby5yZWFzb24pLGE9MDswIT09dGhpcy5fb25PcGVuVHMmJihhPURhdGUubm93KCktdGhpcy5fb25PcGVuVHMpLHQuc2V0TWVzc2FnZShhKS5zZXRDb3N0VGltZShhKS5zZXRNb3JlTWVzc2FnZShyKS5zZXRDb2RlKG8uY29kZSkuZW5kKCksUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25DbG9zZSBcIikuY29uY2F0KHIsXCIgb25saW5lVGltZTpcIikuY29uY2F0KGEpKSxuPT09dGhpcy5fc29ja2V0SUQmJih0aGlzLl9yZWFkeVN0YXRlPXd5LGE8MWUzP3RoaXMuX2NoYW5uZWxNb2R1bGUub25SZWNvbm5lY3RGYWlsZWQoKTp0aGlzLl9jaGFubmVsTW9kdWxlLm9uQ2xvc2UoKSl9fSx7a2V5Olwib25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQsbj1lLmUsbz1cInNvdXJjZVNvY2tldElEOlwiLmNvbmNhdCh0LFwiIGN1cnJlbnRTb2NrZXRJRDpcIikuY29uY2F0KHRoaXMuX3NvY2tldElEKTtuZXcgZHAoRXApLnNldE1lc3NhZ2Uobi5lcnJNc2d8fEVjKG4pKS5zZXRNb3JlTWVzc2FnZShvKS5zZXRMZXZlbChcImVycm9yXCIpLmVuZCgpLFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbkVycm9yXCIpLG4sbyksdD09PXRoaXMuX3NvY2tldElEJiYodGhpcy5fcmVhZHlTdGF0ZT1cIlwiLHRoaXMuX2NoYW5uZWxNb2R1bGUub25FcnJvcigpKX19LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdDt0cnl7dD1KU09OLnBhcnNlKGUuZGF0YSl9Y2F0Y2goc0kpe25ldyBkcChCcCkuc2V0TWVzc2FnZShlLmRhdGEpLmVuZCgpfWlmKHQmJnQuaGVhZCl7dmFyIG49dGhpcy5fZ2V0UmVxdWVzdElERnJvbUhlYWQodC5oZWFkKSxvPWpjKHQuaGVhZCkscj1YbSh0LmJvZHksdGhpcy5fZ2V0UmVzcG9uc2VLZXlNYXAobykpO2lmKFFpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk1lc3NhZ2UgcmV0OlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkociksXCIgcmVxdWVzdElEOlwiKS5jb25jYXQobixcIiBoYXM6XCIpLmNvbmNhdCh0aGlzLl9wcm9taXNlTWFwLmhhcyhuKSkpLHRoaXMuX3NldE5leHRQaW5nVHMoKSx0aGlzLl9wcm9taXNlTWFwLmhhcyhuKSl7dmFyIGE9dGhpcy5fcHJvbWlzZU1hcC5nZXQobikscz1hLnJlc29sdmUsaT1hLnJlamVjdCxjPWEudGltZXN0YW1wO3JldHVybiB0aGlzLl9wcm9taXNlTWFwLmRlbGV0ZShuKSx0aGlzLl9jYWxjUlRUKGMpLHZvaWQoci5lcnJvckNvZGUmJjAhPT1yLmVycm9yQ29kZT8odGhpcy5fY2hhbm5lbE1vZHVsZS5vbkVycm9yQ29kZU5vdFplcm8ociksaShuZXcgQV8oe2NvZGU6ci5lcnJvckNvZGUsbWVzc2FnZTpyLmVycm9ySW5mb3x8XCJcIn0pKSk6cyh5XyhyKSkpfXRoaXMuX2NoYW5uZWxNb2R1bGUub25NZXNzYWdlKHtoZWFkOnQuaGVhZCxib2R5OnJ9KX19fSx7a2V5OlwiX2NhbGNSVFRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1EYXRlLm5vdygpLWU7dGhpcy5fY2hhbm5lbE1vZHVsZS5nZXRNb2R1bGUoU2wpLmFkZFJUVCh0KX19LHtrZXk6XCJfY29ubmVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3RhcnRUcz1EYXRlLm5vdygpLHRoaXMuX29uT3BlblRzPTAsdGhpcy5fc29ja2V0PW5ldyBreSh0aGlzKSx0aGlzLl9zb2NrZXRJRD10aGlzLl9zb2NrZXQuZ2V0SUQoKSx0aGlzLl9yZWFkeVN0YXRlPWJ5LFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2Nvbm5lY3QgaXNXb3JrZXJFbmFibGVkOlwiKS5jb25jYXQodGhpcy5nZXRJc1dvcmtlckVuYWJsZWQoKSxcIiBzb2NrZXRJRDpcIikuY29uY2F0KHRoaXMuX3NvY2tldElELFwiIHVybDpcIikuY29uY2F0KHRoaXMuZ2V0VVJMKCkpKSxuZXcgZHAoTXApLnNldE1lc3NhZ2UoXCJzb2NrZXRJRDpcIi5jb25jYXQodGhpcy5fc29ja2V0SUQsXCIgdXJsOlwiKS5jb25jYXQodGhpcy5nZXRVUkwoKSkpLmVuZCgpfX0se2tleTpcImdldFVSTFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY2hhbm5lbE1vZHVsZS5nZXRNb2R1bGUobGwpO2UuaXNEZXZNb2RlKCkmJih0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWU9ITEpO3ZhciB0PUtjKCk7KHVpfHxhaSYmXCJ3aW5kb3dzXCI9PT10fHxsaSkmJih0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWU9ITEpO3ZhciBuPS0xO1wiaW9zXCI9PT10P249RWl8fC0xOlwiYW5kcm9pZFwiPT09dCYmKG49U2l8fC0xKTt2YXIgbz10aGlzLl9jaGFubmVsTW9kdWxlLmdldFBsYXRmb3JtKCkscj1lLmdldFNES0FwcElEKCksYT1lLmdldEluc3RhbmNlSUQoKTtyZXR1cm4gdGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lP1wiXCIuY29uY2F0KHRoaXMuX3VybCxcIi9iaW5mbz9zZGthcHBpZD1cIikuY29uY2F0KHIsXCImaW5zdGFuY2VpZD1cIikuY29uY2F0KGEsXCImcmFuZG9tPVwiKS5jb25jYXQodGhpcy5fZ2V0UmFuZG9tKCksXCImcGxhdGZvcm09XCIpLmNvbmNhdChvLFwiJmhvc3Q9XCIpLmNvbmNhdCh0LFwiJnZlcnNpb249XCIpLmNvbmNhdChuKTpcIlwiLmNvbmNhdCh0aGlzLl91cmwsXCIvaW5mbz9zZGthcHBpZD1cIikuY29uY2F0KHIsXCImaW5zdGFuY2VpZD1cIikuY29uY2F0KGEsXCImcmFuZG9tPVwiKS5jb25jYXQodGhpcy5fZ2V0UmFuZG9tKCksXCImcGxhdGZvcm09XCIpLmNvbmNhdChvLFwiJmhvc3Q9XCIpLmNvbmNhdCh0LFwiJnZlcnNpb249XCIpLmNvbmNhdChuKX19LHtrZXk6XCJfY2xvc2VDb25uZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fY2xvc2VDb25uZWN0aW9uXCIpKSx0aGlzLl9zb2NrZXQmJih0aGlzLl9zb2NrZXQuY2xvc2UoZSksdGhpcy5fc29ja2V0SUQ9LTEsdGhpcy5fc29ja2V0PW51bGwsdGhpcy5fcmVhZHlTdGF0ZT13eSl9fSx7a2V5OlwiX3Jlc2VuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9yZXNlbmQgcmVDb25uZWN0RmxhZzpcIikuY29uY2F0KHRoaXMuX3JlQ29ubmVjdEZsYWcpLFwicHJvbWlzZU1hcC5zaXplOlwiLmNvbmNhdCh0aGlzLl9wcm9taXNlTWFwLnNpemUsXCIgc2ltcGxlUmVxdWVzdE1hcC5zaXplOlwiKS5jb25jYXQodGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5zaXplKSksdGhpcy5fcHJvbWlzZU1hcC5zaXplPjAmJnRoaXMuX3Byb21pc2VNYXAuZm9yRWFjaCgoZnVuY3Rpb24odCxuKXt2YXIgbz10LnVwbGlua0RhdGEscj10LnJlc29sdmUsYT10LnJlamVjdDtlLl9wcm9taXNlTWFwLnNldChuLHtyZXNvbHZlOnIscmVqZWN0OmEsdGltZXN0YW1wOkRhdGUubm93KCksdXBsaW5rRGF0YTpvfSksZS5fZXhlY3V0ZShuLG8pfSkpLHRoaXMuX3NpbXBsZVJlcXVlc3RNYXAuc2l6ZT4wKXt2YXIgdCxuPUJuKHRoaXMuX3NpbXBsZVJlcXVlc3RNYXApO3RyeXtmb3Iobi5zKCk7ISh0PW4ubigpKS5kb25lOyl7dmFyIG89UG4odC52YWx1ZSwyKSxyPW9bMF0sYT1vWzFdO3RoaXMuX2V4ZWN1dGUocixhKX19Y2F0Y2gocyl7bi5lKHMpfWZpbmFsbHl7bi5mKCl9dGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5jbGVhcigpfX19LHtrZXk6XCJzZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmhlYWQuc2VxPXRoaXMuX2dldFNlcXVlbmNlKCksZS5oZWFkLnJlcXRpbWU9TWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyk7ZS5rZXlNYXA7dmFyIG49TG4oZSxbXCJrZXlNYXBcIl0pLG89dGhpcy5fZ2V0UmVxdWVzdElERnJvbUhlYWQoZS5oZWFkKSxyPUpTT04uc3RyaW5naWZ5KG4pO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxhKXsodC5fcHJvbWlzZU1hcC5zZXQobyx7cmVzb2x2ZTplLHJlamVjdDphLHRpbWVzdGFtcDpEYXRlLm5vdygpLHVwbGlua0RhdGE6cn0pLFFpLmRlYnVnKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5zZW5kIHVwbGlua0RhdGE6XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShuKSxcIiByZXF1ZXN0SUQ6XCIpLmNvbmNhdChvLFwiIHJlYWR5U3RhdGU6XCIpLmNvbmNhdCh0Ll9yZWFkeVN0YXRlKSksdC5fcmVhZHlTdGF0ZSE9PUx5KT90Ll9yZUNvbm5lY3QoKToodC5fZXhlY3V0ZShvLHIpLHQuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKFNsKS5hZGRSZXF1ZXN0Q291bnQoKSl9KSl9fSx7a2V5Olwic2ltcGx5U2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UuaGVhZC5zZXE9dGhpcy5fZ2V0U2VxdWVuY2UoKSxlLmhlYWQucmVxdGltZT1NYXRoLmZsb29yKERhdGUubm93KCkvMWUzKTtlLmtleU1hcDt2YXIgdD1MbihlLFtcImtleU1hcFwiXSksbj10aGlzLl9nZXRSZXF1ZXN0SURGcm9tSGVhZChlLmhlYWQpLG89SlNPTi5zdHJpbmdpZnkodCk7dGhpcy5fcmVhZHlTdGF0ZSE9PUx5Pyh0aGlzLl9zaW1wbGVSZXF1ZXN0TWFwLnNpemU8dGhpcy5NQVhfU0laRT90aGlzLl9zaW1wbGVSZXF1ZXN0TWFwLnNldChuLG8pOlFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2ltcGx5U2VuZC4gc2ltcGxlUmVxdWVzdE1hcCBpcyBmdWxsLCBkcm9wIHJlcXVlc3QhXCIpKSx0aGlzLl9yZUNvbm5lY3QoKSk6dGhpcy5fZXhlY3V0ZShuLG8pfX0se2tleTpcIl9leGVjdXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9zb2NrZXQuc2VuZCh7ZGF0YTp0LGZhaWw6cGk/dGhpcy5fb25TZW5kRmFpbC5iaW5kKHRoaXMpOnZvaWQgMCxyZXF1ZXN0SUQ6ZX0pfX0se2tleTpcIl9vblNlbmRGYWlsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25TZW5kRmFpbCByZXF1ZXN0SUQ6XCIpLmNvbmNhdChlKSl9fSx7a2V5OlwiX2dldFNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZTtpZih0aGlzLl9zdGFydFNlcXVlbmNlPDI0MTU5MTkxMDMpcmV0dXJuIGU9dGhpcy5fc3RhcnRTZXF1ZW5jZSx0aGlzLl9zdGFydFNlcXVlbmNlKz0xLDI0MTU5MTkxMDM9PT10aGlzLl9zdGFydFNlcXVlbmNlJiYodGhpcy5fc3RhcnRTZXF1ZW5jZT1TYygpKSxlfX0se2tleTpcIl9nZXRSZXF1ZXN0SURGcm9tSGVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnNlcnZjbWQrZS5zZXF9fSx7a2V5OlwiX2dldFJlc3BvbnNlS2V5TWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY2hhbm5lbE1vZHVsZS5nZXRLZXlNYXAoZSk7cmV0dXJuIENuKHt9LFdtLnJlc3BvbnNlLHt9LHQucmVzcG9uc2UpfX0se2tleTpcIl9yZUNvbm5lY3RcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlYWR5U3RhdGUhPT1MeSYmdGhpcy5fcmVhZHlTdGF0ZSE9PWJ5JiZ0aGlzLmZvcmNlZFJlY29ubmVjdCgpfX0se2tleTpcImZvcmNlZFJlY29ubmVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmZvcmNlZFJlY29ubmVjdCBjb3VudDpcIikuY29uY2F0KHRoaXMuX3JlQ29ubmVjdENvdW50LFwiIHJlYWR5U3RhdGU6XCIpLmNvbmNhdCh0aGlzLl9yZWFkeVN0YXRlKSksdGhpcy5fcmVDb25uZWN0RmxhZz0hMCx0aGlzLl9yZXNldFJhbmRvbSgpLHRoaXMuX3JlQ29ubmVjdENvdW50PHRoaXMuTUFYX1JFQ09OTkVDVF9DT1VOVD8odGhpcy5fcmVDb25uZWN0Q291bnQrPTEsdGhpcy5fY2xvc2VDb25uZWN0aW9uKFJ5KSx0aGlzLl9pbml0Q29ubmVjdGlvbigpKToodGhpcy5fcmVDb25uZWN0Q291bnQ9MCx0aGlzLl9jaGFubmVsTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPVBuKHQsMiksbz1uWzBdO25bMV07bz8oUWkud2FybihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuZm9yY2VkUmVjb25uZWN0IGRpc2Nvbm5lY3RlZCBmcm9tIHdzc2VydmVyIGJ1dCBuZXR3b3JrIGlzIG9rLCBjb250aW51ZS4uLlwiKSksZS5fY2xvc2VDb25uZWN0aW9uKFJ5KSxlLl9pbml0Q29ubmVjdGlvbigpKTplLl9jaGFubmVsTW9kdWxlLm9uUmVjb25uZWN0RmFpbGVkKCl9KSkpfX0se2tleTpcImdldFJlY29ubmVjdEZsYWdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZUNvbm5lY3RGbGFnfX0se2tleTpcIl9zZXROZXh0UGluZ1RzXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9uZXh0UGluZ1RzPURhdGUubm93KCkrMWU0fX0se2tleTpcImdldE5leHRQaW5nVHNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZXh0UGluZ1RzfX0se2tleTpcImlzQ29ubmVjdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVhZHlTdGF0ZT09PUx5fX0se2tleTpcImNhbklVc2VCaW5hcnlGcmFtZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhbklVc2VCaW5hcnlGcmFtZX19LHtrZXk6XCJzZXRJc1dvcmtlckVuYWJsZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldElzV29ya2VyRW5hYmxlZCBmbGFnOlwiKS5jb25jYXQoZSkpLHRoaXMuX2lzV29ya2VyRW5hYmxlZD1lfX0se2tleTpcImdldElzV29ya2VyRW5hYmxlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzV29ya2VyRW5hYmxlZCYmYml9fSx7a2V5OlwiX2dldFJhbmRvbVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLl9yYW5kb20mJih0aGlzLl9yYW5kb209TWF0aC5yYW5kb20oKSksdGhpcy5fcmFuZG9tfX0se2tleTpcIl9yZXNldFJhbmRvbVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmFuZG9tPTB9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY2xvc2VcIikpLHRoaXMuX2Nsb3NlQ29ubmVjdGlvbihPeSksdGhpcy5fcHJvbWlzZU1hcC5jbGVhcigpLHRoaXMuX3N0YXJ0U2VxdWVuY2U9U2MoKSx0aGlzLl9yZWFkeVN0YXRlPXd5LHRoaXMuX3NpbXBsZVJlcXVlc3RNYXAuY2xlYXIoKSx0aGlzLl9yZUNvbm5lY3RGbGFnPSExLHRoaXMuX3JlQ29ubmVjdENvdW50PTAsdGhpcy5fb25PcGVuVHM9MCx0aGlzLl91cmw9XCJcIix0aGlzLl9yYW5kb209MCx0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWU9ITAsdGhpcy5faXNXb3JrZXJFbmFibGVkPSEwfX1dKSxlfSgpLFB5PWZ1bmN0aW9uKGUpe0FuKG4sZSk7dmFyIHQ9R24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztpZih5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiQ2hhbm5lbE1vZHVsZVwiLG8uX3NvY2tldEhhbmRsZXI9bmV3IEd5KGJuKG8pKSxvLl9wcm9iaW5nPSExLG8uX2lzQXBwU2hvd2luZz0hMCxvLl9wcmV2aW91c1N0YXRlPVluLk5FVF9TVEFURV9DT05ORUNURUQscGkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGhpLm9uQXBwU2hvdyYmXCJmdW5jdGlvblwiPT10eXBlb2YgaGkub25BcHBIaWRlKXt2YXIgcj1vLl9vbkFwcEhpZGUuYmluZChibihvKSksYT1vLl9vbkFwcFNob3cuYmluZChibihvKSk7XCJmdW5jdGlvblwiPT10eXBlb2YgaGkub2ZmQXBwSGlkZSYmaGkub2ZmQXBwSGlkZShyKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBoaS5vZmZBcHBTaG93JiZoaS5vZmZBcHBTaG93KGEpLGhpLm9uQXBwSGlkZShyKSxoaS5vbkFwcFNob3coYSl9cmV0dXJuIG8uX3RpbWVyRm9yTm90TG9nZ2VkSW49LTEsby5fdGltZXJGb3JOb3RMb2dnZWRJbj1zZXRJbnRlcnZhbChvLm9uQ2hlY2tUaW1lci5iaW5kKGJuKG8pKSwxZTMpLG8uX2ZhdGFsRXJyb3JGbGFnPSExLG99cmV0dXJuIEVuKG4sW3trZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zb2NrZXRIYW5kbGVyJiYodGhpcy5pc0xvZ2dlZEluKCk/KHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW4+MCYmKGNsZWFySW50ZXJ2YWwodGhpcy5fdGltZXJGb3JOb3RMb2dnZWRJbiksdGhpcy5fdGltZXJGb3JOb3RMb2dnZWRJbj0tMSksdGhpcy5fc29ja2V0SGFuZGxlci5vbkNoZWNrVGltZXIoZSkpOnRoaXMuX3NvY2tldEhhbmRsZXIub25DaGVja1RpbWVyKDEpLHRoaXMuX2NoZWNrTmV4dFBpbmcoKSl9fSx7a2V5Olwib25FcnJvckNvZGVOb3RaZXJvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5nZXRNb2R1bGUodmwpLm9uRXJyb3JDb2RlTm90WmVybyhlKX19LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdldE1vZHVsZSh2bCkub25NZXNzYWdlKGUpfX0se2tleTpcInNlbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc29ja2V0SGFuZGxlcj90aGlzLl9wcmV2aW91c1N0YXRlIT09WW4uTkVUX1NUQVRFX0NPTk5FQ1RFRCYmZS5oZWFkLnNlcnZjbWQuaW5jbHVkZXMoUGQpPyh0aGlzLnJlQ29ubmVjdCgpLHRoaXMuX3NlbmRMb2dWaWFIVFRQKGUpKTp0aGlzLl9zb2NrZXRIYW5kbGVyLnNlbmQoZSk6UHJvbWlzZS5yZWplY3QoKX19LHtrZXk6XCJfc2VuZExvZ1ZpYUhUVFBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1laS5IT1NULkNVUlJFTlQuU1RBVDtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4sbyl7dmFyIHI9XCJcIi5jb25jYXQodCxcIi92NC9pbW9wZW5zdGF0L3RpbV93ZWJfcmVwb3J0X3YyP3Nka2FwcGlkPVwiKS5jb25jYXQoZS5oZWFkLnNka2FwcGlkLFwiJnJlcXRpbWU9XCIpLmNvbmNhdChEYXRlLm5vdygpKSxhPUpTT04uc3RyaW5naWZ5KGUuYm9keSkscz1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04XCI7aWYocGkpaGkucmVxdWVzdCh7dXJsOnIsZGF0YTphLG1ldGhvZDpcIlBPU1RcIix0aW1lb3V0OjNlMyxoZWFkZXI6e1wiY29udGVudC10eXBlXCI6c30sc3VjY2VzczpmdW5jdGlvbigpe24oKX0sZmFpbDpmdW5jdGlvbigpe28obmV3IEFfKHtjb2RlOnpkLk5FVFdPUktfRVJST1IsbWVzc2FnZTpKZC5ORVRXT1JLX0VSUk9SfSkpfX0pO2Vsc2V7dmFyIGk9bmV3IFhNTEh0dHBSZXF1ZXN0LGM9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtpLmFib3J0KCksbyhuZXcgQV8oe2NvZGU6emQuTkVUV09SS19USU1FT1VULG1lc3NhZ2U6SmQuTkVUV09SS19USU1FT1VUfSkpfSksM2UzKTtpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1pLnJlYWR5U3RhdGUmJihjbGVhclRpbWVvdXQoYyksMjAwPT09aS5zdGF0dXN8fDMwND09PWkuc3RhdHVzP24oKTpvKG5ldyBBXyh7Y29kZTp6ZC5ORVRXT1JLX0VSUk9SLG1lc3NhZ2U6SmQuTkVUV09SS19FUlJPUn0pKSl9LGkub3BlbihcIlBPU1RcIixyLCEwKSxpLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixzKSxpLnNlbmQoYSl9fSkpfX0se2tleTpcInNpbXBseVNlbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc29ja2V0SGFuZGxlcj90aGlzLl9zb2NrZXRIYW5kbGVyLnNpbXBseVNlbmQoZSk6UHJvbWlzZS5yZWplY3QoKX19LHtrZXk6XCJvbk9wZW5cIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3BpbmcoKX19LHtrZXk6XCJvbkNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zb2NrZXRIYW5kbGVyJiYodGhpcy5fc29ja2V0SGFuZGxlci5nZXRSZWNvbm5lY3RGbGFnKCkmJnRoaXMuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KFluLk5FVF9TVEFURV9ESVNDT05ORUNURUQpKTt0aGlzLnJlQ29ubmVjdCgpfX0se2tleTpcIm9uRXJyb3JcIix2YWx1ZTpmdW5jdGlvbigpe3BpJiZRaS5lcnJvcihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25FcnJvciDku452Mi4xMS4y6LW377yMU0RLIOaUr+aMgeS6hiBXZWJTb2NrZXTvvIzlpoLmgqjmnKrmt7vliqDnm7jlhbPlj5fkv6Hln5/lkI3vvIzor7flhYjmt7vliqDvvIHljYfnuqfmjIflvJU6IGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi90dXRvcmlhbC0wMi11cGdyYWRlZ3VpZGVsaW5lLmh0bWxcIikpfX0se2tleTpcImdldEtleU1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldE1vZHVsZSh2bCkuZ2V0S2V5TWFwKGUpfX0se2tleTpcIl9vbkFwcEhpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzQXBwU2hvd2luZz0hMX19LHtrZXk6XCJfb25BcHBTaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pc0FwcFNob3dpbmc9ITB9fSx7a2V5Olwib25SZXF1ZXN0VGltZW91dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe319LHtrZXk6XCJvblJlY29ubmVjdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUmVjb25uZWN0ZWRcIikpLHRoaXMuZ2V0TW9kdWxlKHZsKS5vblJlY29ubmVjdGVkKCksdGhpcy5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQoWW4uTkVUX1NUQVRFX0NPTk5FQ1RFRCl9fSx7a2V5Olwib25SZWNvbm5lY3RGYWlsZWRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25SZWNvbm5lY3RGYWlsZWRcIikpLHRoaXMuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KFluLk5FVF9TVEFURV9ESVNDT05ORUNURUQpfX0se2tleTpcInNldElzV29ya2VyRW5hYmxlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3NvY2tldEhhbmRsZXImJnRoaXMuX3NvY2tldEhhbmRsZXIuc2V0SXNXb3JrZXJFbmFibGVkKCExKX19LHtrZXk6XCJyZUNvbm5lY3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF0sdD0hMTt0aGlzLl9zb2NrZXRIYW5kbGVyJiYodD10aGlzLl9zb2NrZXRIYW5kbGVyLmdldFJlY29ubmVjdEZsYWcoKSk7dmFyIG49XCJmb3JjZWRGbGFnOlwiLmNvbmNhdChlLFwiIGZhdGFsRXJyb3JGbGFnOlwiKS5jb25jYXQodGhpcy5fZmF0YWxFcnJvckZsYWcsXCIgcHJldmlvdXNTdGF0ZTpcIikuY29uY2F0KHRoaXMuX3ByZXZpb3VzU3RhdGUsXCIgcmVjb25uZWN0RmxhZzpcIikuY29uY2F0KHQpO2lmKFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVDb25uZWN0IFwiKS5jb25jYXQobikpLCF0aGlzLl9mYXRhbEVycm9yRmxhZyYmdGhpcy5fc29ja2V0SGFuZGxlcil7aWYoITA9PT1lKXRoaXMuX3NvY2tldEhhbmRsZXIuZm9yY2VkUmVjb25uZWN0KCk7ZWxzZXtpZih0aGlzLl9wcmV2aW91c1N0YXRlPT09WW4uTkVUX1NUQVRFX0NPTk5FQ1RJTkcmJnQpcmV0dXJuO3RoaXMuX3NvY2tldEhhbmRsZXIuZm9yY2VkUmVjb25uZWN0KCl9dGhpcy5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQoWW4uTkVUX1NUQVRFX0NPTk5FQ1RJTkcpfX19LHtrZXk6XCJfZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9wcmV2aW91c1N0YXRlIT09ZSYmKFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50IGZyb20gXCIpLmNvbmNhdCh0aGlzLl9wcmV2aW91c1N0YXRlLFwiIHRvIFwiKS5jb25jYXQoZSkpLHRoaXMuX3ByZXZpb3VzU3RhdGU9ZSx0aGlzLmVtaXRPdXRlckV2ZW50KFduLk5FVF9TVEFURV9DSEFOR0Use3N0YXRlOmV9KSl9fSx7a2V5OlwiX3BpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoITAhPT10aGlzLl9wcm9iaW5nKXt0aGlzLl9wcm9iaW5nPSEwO3ZhciB0PXRoaXMuZ2V0TW9kdWxlKHZsKS5nZXRQcm90b2NvbERhdGEoe3Byb3RvY29sTmFtZTpVZH0pO3RoaXMuc2VuZCh0KS50aGVuKChmdW5jdGlvbigpe2UuX3Byb2Jpbmc9ITF9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe2lmKFFpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9waW5nIGZhaWxlZC4gZXJyb3I6XCIpLHQpLGUuX3Byb2Jpbmc9ITEsdCYmNjAwMDI9PT10LmNvZGUpcmV0dXJuIG5ldyBkcChLZykuc2V0TWVzc2FnZShcImNvZGU6XCIuY29uY2F0KHQuY29kZSxcIiBtZXNzYWdlOlwiKS5jb25jYXQodC5tZXNzYWdlKSkuc2V0TmV0d29ya1R5cGUoZS5nZXRNb2R1bGUoZ2wpLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLGUuX2ZhdGFsRXJyb3JGbGFnPSEwLHZvaWQgZS5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQoWW4uTkVUX1NUQVRFX0RJU0NPTk5FQ1RFRCk7ZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1Qbih0LDIpLG89blswXSxyPW5bMV07UWkubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fcGluZyBmYWlsZWQuIHByb2JlIG5ldHdvcmssIGlzQXBwU2hvd2luZzpcIikuY29uY2F0KGUuX2lzQXBwU2hvd2luZyxcIiBvbmxpbmU6XCIpLmNvbmNhdChvLFwiIG5ldHdvcmtUeXBlOlwiKS5jb25jYXQocikpLG8/ZS5yZUNvbm5lY3QoKTplLl9lbWl0TmV0U3RhdGVDaGFuZ2VFdmVudChZbi5ORVRfU1RBVEVfRElTQ09OTkVDVEVEKX0pKX0pKX19fSx7a2V5OlwiX2NoZWNrTmV4dFBpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3NvY2tldEhhbmRsZXImJih0aGlzLl9zb2NrZXRIYW5kbGVyLmlzQ29ubmVjdGVkKCkmJkRhdGUubm93KCk+PXRoaXMuX3NvY2tldEhhbmRsZXIuZ2V0TmV4dFBpbmdUcygpJiZ0aGlzLl9waW5nKCkpfX0se2tleTpcImRlYWxsb2NcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3NvY2tldEhhbmRsZXImJih0aGlzLl9zb2NrZXRIYW5kbGVyLmNsb3NlKCksdGhpcy5fc29ja2V0SGFuZGxlcj1udWxsKSx0aGlzLl90aW1lckZvck5vdExvZ2dlZEluPi0xJiZjbGVhckludGVydmFsKHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW4pfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9wcmV2aW91c1N0YXRlPVluLk5FVF9TVEFURV9DT05ORUNURUQsdGhpcy5fcHJvYmluZz0hMSx0aGlzLl9mYXRhbEVycm9yRmxhZz0hMSx0aGlzLl90aW1lckZvck5vdExvZ2dlZEluPXNldEludGVydmFsKHRoaXMub25DaGVja1RpbWVyLmJpbmQodGhpcyksMWUzKX19XSksbn0oQWwpLFV5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX2NsYXNzTmFtZT1cIlByb3RvY29sSGFuZGxlclwiLHRoaXMuX3Nlc3Npb25Nb2R1bGU9dCx0aGlzLl9jb25maWdNYXA9bmV3IE1hcCx0aGlzLl9maWxsQ29uZmlnTWFwKCl9cmV0dXJuIEVuKGUsW3trZXk6XCJfZmlsbENvbmZpZ01hcFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29uZmlnTWFwLmNsZWFyKCk7dmFyIGU9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZW5Db21tb25IZWFkKCksdD10aGlzLl9zZXNzaW9uTW9kdWxlLmdlbkNvc1NwZWNpZmllZEhlYWQoKSxuPXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2VuU1NPUmVwb3J0SGVhZCgpO3RoaXMuX2NvbmZpZ01hcC5zZXQoRGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX09QRU5fU1RBVFVTLFwiLlwiKS5jb25jYXQoZWkuQ01ELkxPR0lOKX0pLGJvZHk6e3N0YXRlOlwiT25saW5lXCJ9LGtleU1hcDp7cmVzcG9uc2U6e0luc3RJZDpcImluc3RhbmNlSURcIixIZWxsb0ludGVydmFsOlwiaGVsbG9JbnRlcnZhbFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChObCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSU1fT1BFTl9TVEFUVVMsXCIuXCIpLmNvbmNhdChlaS5DTUQuTE9HT1VUKX0pLGJvZHk6e3R5cGU6MH0sa2V5TWFwOntyZXF1ZXN0Ont0eXBlOlwid3Nsb2dvdXRfdHlwZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChrbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSU1fT1BFTl9TVEFUVVMsXCIuXCIpLmNvbmNhdChlaS5DTUQuSEVMTE8pfSksYm9keTp7fSxrZXlNYXA6e3Jlc3BvbnNlOntOZXdJbnN0SW5mbzpcIm5ld0luc3RhbmNlSW5mb1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChPbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuU1RBVF9TRVJWSUNFLFwiLlwiKS5jb25jYXQoZWkuQ01ELktJQ0tfT1RIRVIpfSksYm9keTp7fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGJkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5JTV9DT1NfU0lHTixcIi5cIikuY29uY2F0KGVpLkNNRC5DT1NfU0lHTil9KSxib2R5OntjbWQ6XCJvcGVuX2ltX2Nvc19zdmNcIixzdWJDbWQ6XCJnZXRfY29zX3Rva2VuXCIsZHVyYXRpb246MzAwLHZlcnNpb246Mn0sa2V5TWFwOntyZXF1ZXN0Ont1c2VyU2lnOlwidXNlcnNpZ1wiLHN1YkNtZDpcInN1Yl9jbWRcIixjbWQ6XCJjbWRcIixkdXJhdGlvbjpcImR1cmF0aW9uXCIsdmVyc2lvbjpcInZlcnNpb25cIn0scmVzcG9uc2U6e2V4cGlyZWRfdGltZTpcImV4cGlyZWRUaW1lXCIsYnVja2V0X25hbWU6XCJidWNrZXROYW1lXCIsc2Vzc2lvbl90b2tlbjpcInNlc3Npb25Ub2tlblwiLHRtcF9zZWNyZXRfaWQ6XCJzZWNyZXRJZFwiLHRtcF9zZWNyZXRfa2V5Olwic2VjcmV0S2V5XCJ9fX19KHQpKSx0aGlzLl9jb25maWdNYXAuc2V0KHdkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5DVVNUT01fVVBMT0FELFwiLlwiKS5jb25jYXQoZWkuQ01ELkNPU19QUkVfU0lHKX0pLGJvZHk6e2ZpbGVUeXBlOnZvaWQgMCxmaWxlTmFtZTp2b2lkIDAsdXBsb2FkTWV0aG9kOjAsZHVyYXRpb246OTAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJTaWc6XCJ1c2Vyc2lnXCIsZmlsZVR5cGU6XCJmaWxlX3R5cGVcIixmaWxlTmFtZTpcImZpbGVfbmFtZVwiLHVwbG9hZE1ldGhvZDpcInVwbG9hZF9tZXRob2RcIn0scmVzcG9uc2U6e2V4cGlyZWRfdGltZTpcImV4cGlyZWRUaW1lXCIscmVxdWVzdF9pZDpcInJlcXVlc3RJZFwiLGhlYWRfdXJsOlwiaGVhZFVybFwiLHVwbG9hZF91cmw6XCJ1cGxvYWRVcmxcIixkb3dubG9hZF91cmw6XCJkb3dubG9hZFVybFwiLGNpX3VybDpcImNpVXJsXCIsc25hcHNob3RfdXJsOlwicmVxdWVzdFNuYXBzaG90VXJsXCJ9fX19KHQpKSx0aGlzLl9jb25maWdNYXAuc2V0KEdkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5DVVNUT01fVVBMT0FELFwiLlwiKS5jb25jYXQoZWkuQ01ELlZJREVPX0NPVkVSKX0pLGJvZHk6e3ZlcnNpb246MSxwbGF0Zm9ybTp2b2lkIDAsY292ZXJOYW1lOnZvaWQgMCxyZXF1ZXN0U25hcHNob3RVcmw6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3ZlcnNpb246XCJ2ZXJzaW9uXCIscGxhdGZvcm06XCJwbGF0Zm9ybVwiLGNvdmVyTmFtZTpcImNvdmVyX25hbWVcIixyZXF1ZXN0U25hcHNob3RVcmw6XCJzbmFwc2hvdF91cmxcIn0scmVzcG9uc2U6e2Vycm9yX2NvZGU6XCJlcnJvckNvZGVcIixlcnJvcl9tc2c6XCJlcnJvckluZm9cIixkb3dubG9hZF91cmw6XCJzbmFwc2hvdFVybFwifX19fSh0KSksdGhpcy5fY29uZmlnTWFwLnNldChXZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuSU1fQ09ORklHX01BTkFHRVIsXCIuXCIpLmNvbmNhdChlaS5DTUQuRkVUQ0hfQ09NTUVSQ0lBTF9DT05GSUcpfSksYm9keTp7U0RLQXBwSUQ6MH0sa2V5TWFwOntyZXF1ZXN0OntTREtBcHBJRDpcInVpbnQzMl9zZGthcHBpZFwifSxyZXNwb25zZTp7aW50MzJfZXJyb3JfY29kZTpcImVycm9yQ29kZVwiLHN0cl9lcnJvcl9tZXNzYWdlOlwiZXJyb3JNZXNzYWdlXCIsc3RyX3B1cmNoYXNlX2JpdHM6XCJwdXJjaGFzZUJpdHNcIix1aW50MzJfZXhwaXJlZF90aW1lOlwiZXhwaXJlZFRpbWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX0NPTkZJR19NQU5BR0VSLFwiLlwiKS5jb25jYXQoZWkuQ01ELlBVU0hFRF9DT01NRVJDSUFMX0NPTkZJRyl9KSxib2R5Ont9LGtleU1hcDp7cmVzcG9uc2U6e2ludDMyX2Vycm9yX2NvZGU6XCJlcnJvckNvZGVcIixzdHJfZXJyb3JfbWVzc2FnZTpcImVycm9yTWVzc2FnZVwiLHN0cl9wdXJjaGFzZV9iaXRzOlwicHVyY2hhc2VCaXRzXCIsdWludDMyX2V4cGlyZWRfdGltZTpcImV4cGlyZWRUaW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEhkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5JTV9DT05GSUdfTUFOQUdFUixcIi5cIikuY29uY2F0KGVpLkNNRC5GRVRDSF9DTE9VRF9DT05UUk9MX0NPTkZJRyl9KSxib2R5OntTREtBcHBJRDowLHZlcnNpb246MH0sa2V5TWFwOntyZXF1ZXN0OntTREtBcHBJRDpcInVpbnQzMl9zZGthcHBpZFwiLHZlcnNpb246XCJ1aW50NjRfdmVyc2lvblwifSxyZXNwb25zZTp7aW50MzJfZXJyb3JfY29kZTpcImVycm9yQ29kZVwiLHN0cl9lcnJvcl9tZXNzYWdlOlwiZXJyb3JNZXNzYWdlXCIsc3RyX2pzb25fY29uZmlnOlwiY2xvdWRDb250cm9sQ29uZmlnXCIsdWludDMyX2V4cGlyZWRfdGltZTpcImV4cGlyZWRUaW1lXCIsdWludDMyX3Nka2FwcGlkOlwiU0RLQXBwSURcIix1aW50NjRfdmVyc2lvbjpcInZlcnNpb25cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoamQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX0NPTkZJR19NQU5BR0VSLFwiLlwiKS5jb25jYXQoZWkuQ01ELlBVU0hFRF9DTE9VRF9DT05UUk9MX0NPTkZJRyl9KSxib2R5Ont9LGtleU1hcDp7cmVzcG9uc2U6e2ludDMyX2Vycm9yX2NvZGU6XCJlcnJvckNvZGVcIixzdHJfZXJyb3JfbWVzc2FnZTpcImVycm9yTWVzc2FnZVwiLHN0cl9qc29uX2NvbmZpZzpcImNsb3VkQ29udHJvbENvbmZpZ1wiLHVpbnQzMl9leHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwiLHVpbnQzMl9zZGthcHBpZDpcIlNES0FwcElEXCIsdWludDY0X3ZlcnNpb246XCJ2ZXJzaW9uXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KCRkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PVkVSTE9BRF9QVVNILFwiLlwiKS5jb25jYXQoZWkuQ01ELk9WRVJMT0FEX05PVElGWSl9KSxib2R5Ont9LGtleU1hcDp7cmVzcG9uc2U6e092ZXJMb2FkU2VydkNtZDpcIm92ZXJsb2FkQ29tbWFuZFwiLERlbGF5U2VjczpcIndhaXRpbmdUaW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFJsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9NRVNTQUdFUyl9KSxib2R5Ontjb29raWU6XCJcIixzeW5jRmxhZzowLG5lZWRBYnN0cmFjdDoxLGlzT25saW5lU3luYzowfSxrZXlNYXA6e3JlcXVlc3Q6e2Zyb21BY2NvdW50OlwiRnJvbV9BY2NvdW50XCIsdG9BY2NvdW50OlwiVG9fQWNjb3VudFwiLGZyb206XCJGcm9tX0FjY291bnRcIix0bzpcIlRvX0FjY291bnRcIix0aW1lOlwiTXNnVGltZVN0YW1wXCIsc2VxdWVuY2U6XCJNc2dTZXFcIixyYW5kb206XCJNc2dSYW5kb21cIixlbGVtZW50czpcIk1zZ0JvZHlcIn0scmVzcG9uc2U6e01zZ0xpc3Q6XCJtZXNzYWdlTGlzdFwiLFN5bmNGbGFnOlwic3luY0ZsYWdcIixUb19BY2NvdW50OlwidG9cIixGcm9tX0FjY291bnQ6XCJmcm9tXCIsQ2xpZW50U2VxOlwiY2xpZW50U2VxdWVuY2VcIixNc2dTZXE6XCJzZXF1ZW5jZVwiLE5vdGljZVNlcTpcIm5vdGljZVNlcXVlbmNlXCIsTm90aWZ5U2VxOlwibm90aWZ5U2VxdWVuY2VcIixNc2dSYW5kb206XCJyYW5kb21cIixNc2dUaW1lU3RhbXA6XCJ0aW1lXCIsTXNnQ29udGVudDpcImNvbnRlbnRcIixUb0dyb3VwSWQ6XCJncm91cElEXCIsTXNnS2V5OlwibWVzc2FnZUtleVwiLEdyb3VwVGlwczpcImdyb3VwVGlwc1wiLE1zZ0JvZHk6XCJlbGVtZW50c1wiLE1zZ1R5cGU6XCJ0eXBlXCIsQzJDUmVtYWluaW5nVW5yZWFkQ291bnQ6XCJDMkNSZW1haW5pbmdVbnJlYWRMaXN0XCIsQzJDUGFpclVucmVhZENvdW50OlwiQzJDUGFpclVucmVhZExpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChlaS5DTUQuQklHX0RBVEFfSEFMTFdBWV9BVVRIX0tFWSl9KSxib2R5Ont9fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoYmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChlaS5DTUQuU0VORF9NRVNTQUdFKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG9BY2NvdW50OlwiXCIsbXNnU2VxOjAsbXNnUmFuZG9tOjAsbXNnQm9keTpbXSxjbG91ZEN1c3RvbURhdGE6dm9pZCAwLG5pY2s6XCJcIixhdmF0YXI6XCJcIixtc2dMaWZlVGltZTp2b2lkIDAsb2ZmbGluZVB1c2hJbmZvOntwdXNoRmxhZzowLHRpdGxlOlwiXCIsZGVzYzpcIlwiLGV4dDpcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6MH0sYW5kcm9pZEluZm86e09QUE9DaGFubmVsSUQ6XCJcIn19LG1lc3NhZ2VDb250cm9sSW5mbzp2b2lkIDAsY2xpZW50VGltZTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7ZnJvbUFjY291bnQ6XCJGcm9tX0FjY291bnRcIix0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsbXNnVGltZVN0YW1wOlwiTXNnVGltZVN0YW1wXCIsbXNnU2VxOlwiTXNnU2VxXCIsbXNnUmFuZG9tOlwiTXNnUmFuZG9tXCIsbXNnQm9keTpcIk1zZ0JvZHlcIixjb3VudDpcIk1heENudFwiLGxhc3RNZXNzYWdlVGltZTpcIkxhc3RNc2dUaW1lXCIsbWVzc2FnZUtleTpcIk1zZ0tleVwiLHBlZXJBY2NvdW50OlwiUGVlcl9BY2NvdW50XCIsZGF0YTpcIkRhdGFcIixkZXNjcmlwdGlvbjpcIkRlc2NcIixleHRlbnNpb246XCJFeHRcIix0eXBlOlwiTXNnVHlwZVwiLGNvbnRlbnQ6XCJNc2dDb250ZW50XCIsc2l6ZVR5cGU6XCJUeXBlXCIsdXVpZDpcIlVVSURcIix1cmw6XCJcIixpbWFnZVVybDpcIlVSTFwiLGZpbGVVcmw6XCJVcmxcIixyZW1vdGVBdWRpb1VybDpcIlVybFwiLHJlbW90ZVZpZGVvVXJsOlwiVmlkZW9VcmxcIix0aHVtYlVVSUQ6XCJUaHVtYlVVSURcIix2aWRlb1VVSUQ6XCJWaWRlb1VVSURcIix2aWRlb1VybDpcIlwiLGRvd25sb2FkRmxhZzpcIkRvd25sb2FkX0ZsYWdcIixuaWNrOlwiRnJvbV9BY2NvdW50Tmlja1wiLGF2YXRhcjpcIkZyb21fQWNjb3VudEhlYWR1cmxcIixmcm9tOlwiRnJvbV9BY2NvdW50XCIsdGltZTpcIk1zZ1RpbWVTdGFtcFwiLG1lc3NhZ2VSYW5kb206XCJNc2dSYW5kb21cIixtZXNzYWdlU2VxdWVuY2U6XCJNc2dTZXFcIixlbGVtZW50czpcIk1zZ0JvZHlcIixjbGllbnRTZXF1ZW5jZTpcIkNsaWVudFNlcVwiLHBheWxvYWQ6XCJNc2dDb250ZW50XCIsbWVzc2FnZUxpc3Q6XCJNc2dMaXN0XCIsbWVzc2FnZU51bWJlcjpcIk1zZ051bVwiLGFic3RyYWN0TGlzdDpcIkFic3RyYWN0TGlzdFwiLG1lc3NhZ2VCb2R5OlwiTXNnQm9keVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh3bCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuU0VORF9HUk9VUF9NRVNTQUdFKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsZ3JvdXBJRDpcIlwiLHJhbmRvbTowLGNsaWVudFNlcXVlbmNlOjAscHJpb3JpdHk6XCJcIixtc2dCb2R5OltdLGNsb3VkQ3VzdG9tRGF0YTp2b2lkIDAsb25saW5lT25seUZsYWc6MCxvZmZsaW5lUHVzaEluZm86e3B1c2hGbGFnOjAsdGl0bGU6XCJcIixkZXNjOlwiXCIsZXh0OlwiXCIsYXBuc0luZm86e2JhZGdlTW9kZTowfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpcIlwifX0sZ3JvdXBBdEluZm86W10sbWVzc2FnZUNvbnRyb2xJbmZvOnZvaWQgMCxjbGllbnRUaW1lOnZvaWQgMCxuZWVkUmVhZFJlY2VpcHQ6MH0sa2V5TWFwOntyZXF1ZXN0Ont0bzpcIkdyb3VwSWRcIixleHRlbnNpb246XCJFeHRcIixkYXRhOlwiRGF0YVwiLGRlc2NyaXB0aW9uOlwiRGVzY1wiLHJhbmRvbTpcIlJhbmRvbVwiLHNlcXVlbmNlOlwiUmVxTXNnU2VxXCIsY291bnQ6XCJSZXFNc2dOdW1iZXJcIix0eXBlOlwiTXNnVHlwZVwiLHByaW9yaXR5OlwiTXNnUHJpb3JpdHlcIixjb250ZW50OlwiTXNnQ29udGVudFwiLGVsZW1lbnRzOlwiTXNnQm9keVwiLHNpemVUeXBlOlwiVHlwZVwiLHV1aWQ6XCJVVUlEXCIsdXJsOlwiXCIsaW1hZ2VVcmw6XCJVUkxcIixmaWxlVXJsOlwiVXJsXCIscmVtb3RlQXVkaW9Vcmw6XCJVcmxcIixyZW1vdGVWaWRlb1VybDpcIlZpZGVvVXJsXCIsdGh1bWJVVUlEOlwiVGh1bWJVVUlEXCIsdmlkZW9VVUlEOlwiVmlkZW9VVUlEXCIsdmlkZW9Vcmw6XCJcIixkb3dubG9hZEZsYWc6XCJEb3dubG9hZF9GbGFnXCIsY2xpZW50U2VxdWVuY2U6XCJDbGllbnRTZXFcIixmcm9tOlwiRnJvbV9BY2NvdW50XCIsdGltZTpcIk1zZ1RpbWVTdGFtcFwiLG1lc3NhZ2VSYW5kb206XCJNc2dSYW5kb21cIixtZXNzYWdlU2VxdWVuY2U6XCJNc2dTZXFcIixwYXlsb2FkOlwiTXNnQ29udGVudFwiLG1lc3NhZ2VMaXN0OlwiTXNnTGlzdFwiLG1lc3NhZ2VOdW1iZXI6XCJNc2dOdW1cIixhYnN0cmFjdExpc3Q6XCJBYnN0cmFjdExpc3RcIixtZXNzYWdlQm9keTpcIk1zZ0JvZHlcIixuZWVkUmVhZFJlY2VpcHQ6XCJOZWVkUmVhZFJlY2VpcHRcIn0scmVzcG9uc2U6e01zZ1RpbWU6XCJ0aW1lXCIsTXNnU2VxOlwic2VxdWVuY2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoeGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChlaS5DTUQuUkVWT0tFX0MyQ19NRVNTQUdFKX0pLGJvZHk6e21zZ0luZm86e2Zyb21BY2NvdW50OlwiXCIsdG9BY2NvdW50OlwiXCIsbXNnVGltZVN0YW1wOjAsbXNnU2VxOjAsbXNnUmFuZG9tOjB9fSxrZXlNYXA6e3JlcXVlc3Q6e21zZ0luZm86XCJNc2dJbmZvXCIsbXNnVGltZVN0YW1wOlwiTXNnVGltZVN0YW1wXCIsbXNnU2VxOlwiTXNnU2VxXCIsbXNnUmFuZG9tOlwiTXNnUmFuZG9tXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGxkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5SRVZPS0VfR1JPVVBfTUVTU0FHRSl9KSxib2R5Ontncm91cElEOlwiXCIsbXNnU2VxTGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bXNnU2VxTGlzdDpcIk1zZ1NlcUxpc3RcIixtc2dTZXE6XCJNc2dTZXFcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoSGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX0MyQ19ST0FNX01FU1NBR0VTKX0pLGJvZHk6e3BlZXJBY2NvdW50OlwiXCIsY291bnQ6MTUsbGFzdE1lc3NhZ2VUaW1lOjAsbWVzc2FnZUtleTpcIlwiLHdpdGhSZWNhbGxlZE1lc3NhZ2U6MX0sa2V5TWFwOntyZXF1ZXN0OnttZXNzYWdlS2V5OlwiTXNnS2V5XCIscGVlckFjY291bnQ6XCJQZWVyX0FjY291bnRcIixjb3VudDpcIk1heENudFwiLGxhc3RNZXNzYWdlVGltZTpcIkxhc3RNc2dUaW1lXCIsd2l0aFJlY2FsbGVkTWVzc2FnZTpcIldpdGhSZWNhbGxlZE1zZ1wifSxyZXNwb25zZTp7TGFzdE1zZ1RpbWU6XCJsYXN0TWVzc2FnZVRpbWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZ2QsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9HUk9VUF9ST0FNX01FU1NBR0VTKX0pLGJvZHk6e3dpdGhSZWNhbGxlZE1zZzoxLGdyb3VwSUQ6XCJcIixjb3VudDoxNSxzZXF1ZW5jZTpcIlwifSxrZXlNYXA6e3JlcXVlc3Q6e3NlcXVlbmNlOlwiUmVxTXNnU2VxXCIsY291bnQ6XCJSZXFNc2dOdW1iZXJcIix3aXRoUmVjYWxsZWRNZXNzYWdlOlwiV2l0aFJlY2FsbGVkTXNnXCJ9LHJlc3BvbnNlOntSYW5kb206XCJyYW5kb21cIixNc2dUaW1lOlwidGltZVwiLE1zZ1NlcTpcInNlcXVlbmNlXCIsUmVxTXNnU2VxOlwic2VxdWVuY2VcIixSc3BNc2dMaXN0OlwibWVzc2FnZUxpc3RcIixJc1BsYWNlTXNnOlwiaXNQbGFjZU1lc3NhZ2VcIixJc1N5c3RlbU1zZzpcImlzU3lzdGVtTWVzc2FnZVwiLFRvR3JvdXBJZDpcInRvXCIsRW51bUZyb21fQWNjb3VudFR5cGU6XCJmcm9tQWNjb3VudFR5cGVcIixFbnVtVG9fQWNjb3VudFR5cGU6XCJ0b0FjY291bnRUeXBlXCIsR3JvdXBDb2RlOlwiZ3JvdXBDb2RlXCIsTXNnUHJpb3JpdHk6XCJwcmlvcml0eVwiLE1zZ0JvZHk6XCJlbGVtZW50c1wiLE1zZ1R5cGU6XCJ0eXBlXCIsTXNnQ29udGVudDpcImNvbnRlbnRcIixJc0ZpbmlzaGVkOlwiY29tcGxldGVcIixEb3dubG9hZF9GbGFnOlwiZG93bmxvYWRGbGFnXCIsQ2xpZW50U2VxOlwiY2xpZW50U2VxdWVuY2VcIixUaHVtYlVVSUQ6XCJ0aHVtYlVVSURcIixWaWRlb1VVSUQ6XCJ2aWRlb1VVSURcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoVmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChlaS5DTUQuU0VUX0MyQ19NRVNTQUdFX1JFQUQpfSksYm9keTp7QzJDTXNnUmVhZGVkOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntsYXN0TWVzc2FnZVRpbWU6XCJMYXN0ZWRNc2dUaW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEtsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELlNFVF9DMkNfUEVFUl9NVVRFX05PVElGSUNBVElPTlMpfSksYm9keTp7dXNlcklETGlzdDp2b2lkIDAsbXV0ZUZsYWc6MH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VySURMaXN0OlwiUGVlcl9BY2NvdW50XCIsbXV0ZUZsYWc6XCJNdXRlX05vdGlmaWNhdGlvbnNcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX0MyQ19QRUVSX01VVEVfTk9USUZJQ0FUSU9OUyl9KSxib2R5Ont1cGRhdGVTZXF1ZW5jZTowfSxrZXlNYXA6e3Jlc3BvbnNlOntNdXRlTm90aWZpY2F0aW9uc0xpc3Q6XCJtdXRlRmxhZ0xpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZGQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELlNFVF9HUk9VUF9NRVNTQUdFX1JFQUQpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsbWVzc2FnZVJlYWRTZXE6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21lc3NhZ2VSZWFkU2VxOlwiTXNnUmVhZGVkU2VxXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHBkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoZWkuQ01ELlNFVF9BTExfTUVTU0FHRV9SRUFEKX0pLGJvZHk6e3JlYWRBbGxDMkNNZXNzYWdlOjAsZ3JvdXBNZXNzYWdlUmVhZEluZm9MaXN0OltdfSxrZXlNYXA6e3JlcXVlc3Q6e3JlYWRBbGxDMkNNZXNzYWdlOlwiQzJDUmVhZEFsbE1zZ1wiLGdyb3VwTWVzc2FnZVJlYWRJbmZvTGlzdDpcIkdyb3VwUmVhZEluZm9cIixtZXNzYWdlU2VxdWVuY2U6XCJNc2dTZXFcIn0scmVzcG9uc2U6e0MyQ1JlYWRBbGxNc2c6XCJyZWFkQWxsQzJDTWVzc2FnZVwiLEdyb3VwUmVhZEluZm9BcnJheTpcImdyb3VwTWVzc2FnZVJlYWRJbmZvTGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChXbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KGVpLkNNRC5ERUxFVEVfQzJDX01FU1NBR0UpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIix0bzpcIlwiLGtleUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2tleUxpc3Q6XCJNc2dLZXlMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEVkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5ERUxFVEVfR1JPVVBfTUVTU0FHRSl9KSxib2R5Ontncm91cElEOlwiXCIsZGVsZXRlcjpcIlwiLGtleUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2RlbGV0ZXI6XCJEZWxldGVyX0FjY291bnRcIixrZXlMaXN0OlwiU2Vxc1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChoZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX1JFQURfUkVDRUlQVCl9KSxib2R5Ontncm91cElEOlwiXCIsc2VxdWVuY2VMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntzZXF1ZW5jZTpcIk1zZ1NlcVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChmZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuU0VORF9SRUFEX1JFQ0VJUFQpfSksYm9keTp7Z3JvdXBJRDpcIlwiLHNlcXVlbmNlTGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7c2VxdWVuY2VMaXN0OlwiTXNnU2VxTGlzdFwiLHNlcXVlbmNlOlwiTXNnU2VxXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KF9kLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfUkVBRF9SRUNFSVBUX0RFVEFJTCl9KSxib2R5Ontncm91cElEOlwiXCIsc2VxdWVuY2U6dm9pZCAwLGZsYWc6MCxjdXJzb3I6MCxjb3VudDowfSxrZXlNYXA6e3JlcXVlc3Q6e3NlcXVlbmNlOlwiTXNnU2VxXCIsY291bnQ6XCJOdW1cIn0scmVzcG9uc2U6e1JlYWRMaXN0OlwicmVhZFVzZXJJRExpc3RcIixSZWFkX0FjY291bnQ6XCJ1c2VySURcIixVbnJlYWRMaXN0OlwidW5yZWFkVXNlcklETGlzdFwiLFVucmVhZF9BY2NvdW50OlwidXNlcklEXCIsSXNGaW5pc2g6XCJpc0NvbXBsZXRlZFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChqbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfUEVFUl9SRUFEX1RJTUUpfSksYm9keTp7dXNlcklETGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dXNlcklETGlzdDpcIlRvX0FjY291bnRcIn0scmVzcG9uc2U6e1JlYWRUaW1lOlwicGVlclJlYWRUaW1lTGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCgkbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuUkVDRU5UX0NPTlRBQ1QsXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX0NPTlZFUlNBVElPTl9MSVNUKX0pLGJvZHk6e2Zyb21BY2NvdW50OnZvaWQgMCxjb3VudDowfSxrZXlNYXA6e3JlcXVlc3Q6e30scmVzcG9uc2U6e1Nlc3Npb25JdGVtOlwiY29udmVyc2F0aW9uc1wiLFRvQWNjb3VudDpcImdyb3VwSURcIixUb19BY2NvdW50OlwidXNlcklEXCIsVW5yZWFkTXNnQ291bnQ6XCJ1bnJlYWRDb3VudFwiLE1zZ0dyb3VwUmVhZGVkU2VxOlwibWVzc2FnZVJlYWRTZXFcIixDMmNQZWVyUmVhZFRpbWU6XCJjMmNQZWVyUmVhZFRpbWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWWwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLlJFQ0VOVF9DT05UQUNULFwiLlwiKS5jb25jYXQoZWkuQ01ELlBBR0lOR19HRVRfQ09OVkVSU0FUSU9OX0xJU1QpfSksYm9keTp7ZnJvbUFjY291bnQ6dm9pZCAwLHRpbWVTdGFtcDp2b2lkIDAsc3RhcnRJbmRleDp2b2lkIDAscGlubmVkVGltZVN0YW1wOnZvaWQgMCxwaW5uZWRTdGFydEluZGV4OnZvaWQgMCxvcmRlclR5cGU6dm9pZCAwLG1lc3NhZ2VBc3Npc3RGbGFnOjQsYXNzaXN0RmxhZzoxNX0sa2V5TWFwOntyZXF1ZXN0OnttZXNzYWdlQXNzaXN0RmxhZzpcIk1zZ0Fzc2lzdEZsYWdzXCIsYXNzaXN0RmxhZzpcIkFzc2lzdEZsYWdzXCIscGlubmVkVGltZVN0YW1wOlwiVG9wVGltZVN0YW1wXCIscGlubmVkU3RhcnRJbmRleDpcIlRvcFN0YXJ0SW5kZXhcIn0scmVzcG9uc2U6e1Nlc3Npb25JdGVtOlwiY29udmVyc2F0aW9uc1wiLFRvQWNjb3VudDpcImdyb3VwSURcIixUb19BY2NvdW50OlwidXNlcklEXCIsVW5yZWFkTXNnQ291bnQ6XCJ1bnJlYWRDb3VudFwiLE1zZ0dyb3VwUmVhZGVkU2VxOlwibWVzc2FnZVJlYWRTZXFcIixDMmNQZWVyUmVhZFRpbWU6XCJjMmNQZWVyUmVhZFRpbWVcIixMYXN0TXNnRmxhZ3M6XCJsYXN0TWVzc2FnZUZsYWdcIixUb3BGbGFnczpcImlzUGlubmVkXCIsVG9wVGltZVN0YW1wOlwicGlubmVkVGltZVN0YW1wXCIsVG9wU3RhcnRJbmRleDpcInBpbm5lZFN0YXJ0SW5kZXhcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoemwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLlJFQ0VOVF9DT05UQUNULFwiLlwiKS5jb25jYXQoZWkuQ01ELkRFTEVURV9DT05WRVJTQVRJT04pfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIix0b0FjY291bnQ6dm9pZCAwLHR5cGU6MSx0b0dyb3VwSUQ6dm9pZCAwLGNsZWFySGlzdG9yeU1lc3NhZ2U6MX0sa2V5TWFwOntyZXF1ZXN0Ont0b0dyb3VwSUQ6XCJUb0dyb3VwaWRcIixjbGVhckhpc3RvcnlNZXNzYWdlOlwiQ2xlYXJSYW1ibGVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoSmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLlJFQ0VOVF9DT05UQUNULFwiLlwiKS5jb25jYXQoZWkuQ01ELlBJTl9DT05WRVJTQVRJT04pfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIixvcGVyYXRpb25UeXBlOjEsaXRlbUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2l0ZW1MaXN0OlwiUmVjZW50Q29udGFjdEl0ZW1cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChlaS5DTUQuREVMRVRFX0dST1VQX0FUX1RJUFMpfSksYm9keTp7bWVzc2FnZUxpc3RUb0RlbGV0ZTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bWVzc2FnZUxpc3RUb0RlbGV0ZTpcIkRlbE1zZ0xpc3RcIixtZXNzYWdlU2VxOlwiTXNnU2VxXCIsbWVzc2FnZVJhbmRvbTpcIk1zZ1JhbmRvbVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChHbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuUFJPRklMRSxcIi5cIikuY29uY2F0KGVpLkNNRC5QT1JUUkFJVF9HRVQpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIix1c2VySXRlbTpbXX0sa2V5TWFwOntyZXF1ZXN0Ont0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsc3RhbmRhcmRTZXF1ZW5jZTpcIlN0YW5kYXJkU2VxdWVuY2VcIixjdXN0b21TZXF1ZW5jZTpcIkN1c3RvbVNlcXVlbmNlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFBsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5QUk9GSUxFLFwiLlwiKS5jb25jYXQoZWkuQ01ELlBPUlRSQUlUX1NFVCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHByb2ZpbGVJdGVtOlt7dGFnOmVjLk5JQ0ssdmFsdWU6XCJcIn0se3RhZzplYy5HRU5ERVIsdmFsdWU6XCJcIn0se3RhZzplYy5BTExPV1RZUEUsdmFsdWU6XCJcIn0se3RhZzplYy5BVkFUQVIsdmFsdWU6XCJcIn1dfSxrZXlNYXA6e3JlcXVlc3Q6e3RvQWNjb3VudDpcIlRvX0FjY291bnRcIixzdGFuZGFyZFNlcXVlbmNlOlwiU3RhbmRhcmRTZXF1ZW5jZVwiLGN1c3RvbVNlcXVlbmNlOlwiQ3VzdG9tU2VxdWVuY2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoVWwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfQkxBQ0tMSVNUKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsc3RhcnRJbmRleDowLG1heExpbWl0ZWQ6MzAsbGFzdFNlcXVlbmNlOjB9LGtleU1hcDp7cmVzcG9uc2U6e0N1cnJ1ZW50U2VxdWVuY2U6XCJjdXJyZW50U2VxdWVuY2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoRmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KGVpLkNNRC5BRERfQkxBQ0tMSVNUKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG9BY2NvdW50OltdfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHFsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChlaS5DTUQuREVMRVRFX0JMQUNLTElTVCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHRvQWNjb3VudDpbXX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChRbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX0pPSU5FRF9HUk9VUFMpfSksYm9keTp7bWVtYmVyQWNjb3VudDpcIlwiLGxpbWl0OnZvaWQgMCxvZmZzZXQ6dm9pZCAwLGdyb3VwVHlwZTp2b2lkIDAscmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZUluZm9GaWx0ZXI6dm9pZCAwLHNlbGZJbmZvRmlsdGVyOnZvaWQgMH19LGtleU1hcDp7cmVxdWVzdDp7bWVtYmVyQWNjb3VudDpcIk1lbWJlcl9BY2NvdW50XCJ9LHJlc3BvbnNlOntHcm91cElkTGlzdDpcImdyb3Vwc1wiLE1zZ0ZsYWc6XCJtZXNzYWdlUmVtaW5kVHlwZVwiLE5vVW5yZWFkU2VxTGlzdDpcImV4Y2x1ZGVkVW5yZWFkU2VxdWVuY2VMaXN0XCIsTXNnU2VxOlwicmVhZGVkU2VxdWVuY2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9HUk9VUF9JTkZPKX0pLGJvZHk6e2dyb3VwSURMaXN0OnZvaWQgMCxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjpbXCJUeXBlXCIsXCJOYW1lXCIsXCJJbnRyb2R1Y3Rpb25cIixcIk5vdGlmaWNhdGlvblwiLFwiRmFjZVVybFwiLFwiT3duZXJfQWNjb3VudFwiLFwiQ3JlYXRlVGltZVwiLFwiSW5mb1NlcVwiLFwiTGFzdEluZm9UaW1lXCIsXCJMYXN0TXNnVGltZVwiLFwiTWVtYmVyTnVtXCIsXCJNYXhNZW1iZXJOdW1cIixcIkFwcGx5Sm9pbk9wdGlvblwiLFwiTmV4dE1zZ1NlcVwiLFwiU2h1dFVwQWxsTWVtYmVyXCJdLGdyb3VwQ3VzdG9tRmllbGRGaWx0ZXI6dm9pZCAwLG1lbWJlckluZm9GaWx0ZXI6dm9pZCAwLG1lbWJlckN1c3RvbUZpZWxkRmlsdGVyOnZvaWQgMH19LGtleU1hcDp7cmVxdWVzdDp7Z3JvdXBJRExpc3Q6XCJHcm91cElkTGlzdFwiLGdyb3VwQ3VzdG9tRmllbGQ6XCJBcHBEZWZpbmVkRGF0YVwiLG1lbWJlckN1c3RvbUZpZWxkOlwiQXBwTWVtYmVyRGVmaW5lZERhdGFcIixncm91cEN1c3RvbUZpZWxkRmlsdGVyOlwiQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBcIixtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjpcIkFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyXCJ9LHJlc3BvbnNlOntHcm91cElkTGlzdDpcImdyb3Vwc1wiLE1zZ0ZsYWc6XCJtZXNzYWdlUmVtaW5kVHlwZVwiLEFwcERlZmluZWREYXRhOlwiZ3JvdXBDdXN0b21GaWVsZFwiLEFwcE1lbWJlckRlZmluZWREYXRhOlwibWVtYmVyQ3VzdG9tRmllbGRcIixBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cDpcImdyb3VwQ3VzdG9tRmllbGRGaWx0ZXJcIixBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cE1lbWJlcjpcIm1lbWJlckN1c3RvbUZpZWxkRmlsdGVyXCIsSW5mb1NlcTpcImluZm9TZXF1ZW5jZVwiLE1lbWJlckxpc3Q6XCJtZW1iZXJzXCIsR3JvdXBJbmZvOlwiZ3JvdXBzXCIsU2h1dFVwVW50aWw6XCJtdXRlVW50aWxcIixTaHV0VXBBbGxNZW1iZXI6XCJtdXRlQWxsTWVtYmVyc1wiLEFwcGx5Sm9pbk9wdGlvbjpcImpvaW5PcHRpb25cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkNSRUFURV9HUk9VUCl9KSxib2R5Ont0eXBlOnZvaWQgMCxuYW1lOnZvaWQgMCxncm91cElEOnZvaWQgMCxvd25lcklEOnZvaWQgMCxpbnRyb2R1Y3Rpb246dm9pZCAwLG5vdGlmaWNhdGlvbjp2b2lkIDAsbWF4TWVtYmVyTnVtOnZvaWQgMCxqb2luT3B0aW9uOnZvaWQgMCxtZW1iZXJMaXN0OnZvaWQgMCxncm91cEN1c3RvbUZpZWxkOnZvaWQgMCxtZW1iZXJDdXN0b21GaWVsZDp2b2lkIDAsd2ViUHVzaEZsYWc6MSxhdmF0YXI6XCJGYWNlVXJsXCJ9LGtleU1hcDp7cmVxdWVzdDp7b3duZXJJRDpcIk93bmVyX0FjY291bnRcIix1c2VySUQ6XCJNZW1iZXJfQWNjb3VudFwiLGF2YXRhcjpcIkZhY2VVcmxcIixtYXhNZW1iZXJOdW06XCJNYXhNZW1iZXJDb3VudFwiLGpvaW5PcHRpb246XCJBcHBseUpvaW5PcHRpb25cIixncm91cEN1c3RvbUZpZWxkOlwiQXBwRGVmaW5lZERhdGFcIixtZW1iZXJDdXN0b21GaWVsZDpcIkFwcE1lbWJlckRlZmluZWREYXRhXCJ9LHJlc3BvbnNlOntIdWdlR3JvdXBGbGFnOlwiYXZDaGF0Um9vbUZsYWdcIixPdmVySm9pbmVkR3JvdXBMaW1pdF9BY2NvdW50Olwib3ZlckxpbWl0VXNlcklETGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh0ZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuREVTVFJPWV9HUk9VUCl9KSxib2R5Ontncm91cElEOnZvaWQgMH19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChuZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuTU9ESUZZX0dST1VQX0lORk8pfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsbmFtZTp2b2lkIDAsaW50cm9kdWN0aW9uOnZvaWQgMCxub3RpZmljYXRpb246dm9pZCAwLGF2YXRhcjp2b2lkIDAsbWF4TWVtYmVyTnVtOnZvaWQgMCxqb2luT3B0aW9uOnZvaWQgMCxncm91cEN1c3RvbUZpZWxkOnZvaWQgMCxtdXRlQWxsTWVtYmVyczp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bWF4TWVtYmVyTnVtOlwiTWF4TWVtYmVyQ291bnRcIixncm91cEN1c3RvbUZpZWxkOlwiQXBwRGVmaW5lZERhdGFcIixtdXRlQWxsTWVtYmVyczpcIlNodXRVcEFsbE1lbWJlclwiLGpvaW5PcHRpb246XCJBcHBseUpvaW5PcHRpb25cIixhdmF0YXI6XCJGYWNlVXJsXCJ9LHJlc3BvbnNlOntBcHBEZWZpbmVkRGF0YTpcImdyb3VwQ3VzdG9tRmllbGRcIixTaHV0VXBBbGxNZW1iZXI6XCJtdXRlQWxsTWVtYmVyc1wiLEFwcGx5Sm9pbk9wdGlvbjpcImpvaW5PcHRpb25cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQob2QsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkFQUExZX0pPSU5fR1JPVVApfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsYXBwbHlNZXNzYWdlOnZvaWQgMCx1c2VyRGVmaW5lZEZpZWxkOnZvaWQgMCx3ZWJQdXNoRmxhZzoxLGhpc3RvcnlNZXNzYWdlRmxhZzp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7YXBwbHlNZXNzYWdlOlwiQXBwbHlNc2dcIixoaXN0b3J5TWVzc2FnZUZsYWc6XCJIdWdlR3JvdXBIaXN0b3J5TXNnRmxhZ1wifSxyZXNwb25zZTp7SHVnZUdyb3VwRmxhZzpcImF2Q2hhdFJvb21GbGFnXCIsQVZDaGF0Um9vbUtleTpcImF2Q2hhdFJvb21LZXlcIixSc3BNc2dMaXN0OlwibWVzc2FnZUxpc3RcIixUb0dyb3VwSWQ6XCJ0b1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChyZCxmdW5jdGlvbihlKXtlLmEyLGUudGlueWlkO3JldHVybntoZWFkOkNuKHt9LExuKGUsW1wiYTJcIixcInRpbnlpZFwiXSkse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5CSUdfR1JPVVBfTk9fQVVUSCxcIi5cIikuY29uY2F0KGVpLkNNRC5BUFBMWV9KT0lOX0dST1VQKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGFwcGx5TWVzc2FnZTp2b2lkIDAsdXNlckRlZmluZWRGaWVsZDp2b2lkIDAsd2ViUHVzaEZsYWc6MX0sa2V5TWFwOntyZXF1ZXN0OnthcHBseU1lc3NhZ2U6XCJBcHBseU1zZ1wifSxyZXNwb25zZTp7SHVnZUdyb3VwRmxhZzpcImF2Q2hhdFJvb21GbGFnXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGFkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5RVUlUX0dST1VQKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHNkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5TRUFSQ0hfR1JPVVBfQllfSUQpfSksYm9keTp7Z3JvdXBJRExpc3Q6dm9pZCAwLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VQdWJsaWNJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIixcIkludHJvZHVjdGlvblwiLFwiTm90aWZpY2F0aW9uXCIsXCJGYWNlVXJsXCIsXCJDcmVhdGVUaW1lXCIsXCJPd25lcl9BY2NvdW50XCIsXCJMYXN0SW5mb1RpbWVcIixcIkxhc3RNc2dUaW1lXCIsXCJOZXh0TXNnU2VxXCIsXCJNZW1iZXJOdW1cIixcIk1heE1lbWJlck51bVwiLFwiQXBwbHlKb2luT3B0aW9uXCJdfX0sa2V5TWFwOntyZXNwb25zZTp7QXBwbHlKb2luT3B0aW9uOlwiam9pbk9wdGlvblwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChpZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuQ0hBTkdFX0dST1VQX09XTkVSKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLG5ld093bmVySUQ6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e25ld093bmVySUQ6XCJOZXdPd25lcl9BY2NvdW50XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGNkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5IQU5ETEVfQVBQTFlfSk9JTl9HUk9VUCl9KSxib2R5Ontncm91cElEOnZvaWQgMCxhcHBsaWNhbnQ6dm9pZCAwLGhhbmRsZUFjdGlvbjp2b2lkIDAsaGFuZGxlTWVzc2FnZTp2b2lkIDAsYXV0aGVudGljYXRpb246dm9pZCAwLG1lc3NhZ2VLZXk6dm9pZCAwLHVzZXJEZWZpbmVkRmllbGQ6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2FwcGxpY2FudDpcIkFwcGxpY2FudF9BY2NvdW50XCIsaGFuZGxlQWN0aW9uOlwiSGFuZGxlTXNnXCIsaGFuZGxlTWVzc2FnZTpcIkFwcHJvdmFsTXNnXCIsbWVzc2FnZUtleTpcIk1zZ0tleVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh1ZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuSEFORExFX0dST1VQX0lOVklUQVRJT04pfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsaW52aXRlcjp2b2lkIDAsaGFuZGxlQWN0aW9uOnZvaWQgMCxoYW5kbGVNZXNzYWdlOnZvaWQgMCxhdXRoZW50aWNhdGlvbjp2b2lkIDAsbWVzc2FnZUtleTp2b2lkIDAsdXNlckRlZmluZWRGaWVsZDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7aW52aXRlcjpcIkludml0ZXJfQWNjb3VudFwiLGhhbmRsZUFjdGlvbjpcIkhhbmRsZU1zZ1wiLGhhbmRsZU1lc3NhZ2U6XCJBcHByb3ZhbE1zZ1wiLG1lc3NhZ2VLZXk6XCJNc2dLZXlcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQobWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkdFVF9HUk9VUF9BUFBMSUNBVElPTil9KSxib2R5OntzdGFydFRpbWU6dm9pZCAwLGxpbWl0OnZvaWQgMCxoYW5kbGVBY2NvdW50OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntoYW5kbGVBY2NvdW50OlwiSGFuZGxlX0FjY291bnRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQodmQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChlaS5DTUQuREVMRVRFX0dST1VQX1NZU1RFTV9NRVNTQUdFKX0pLGJvZHk6e21lc3NhZ2VMaXN0VG9EZWxldGU6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21lc3NhZ2VMaXN0VG9EZWxldGU6XCJEZWxNc2dMaXN0XCIsbWVzc2FnZVNlcTpcIk1zZ1NlcVwiLG1lc3NhZ2VSYW5kb206XCJNc2dSYW5kb21cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkJJR19HUk9VUF9MT05HX1BPTExJTkcsXCIuXCIpLmNvbmNhdChlaS5DTUQuQVZDSEFUUk9PTV9MT05HX1BPTEwpfSksYm9keTp7VVNQOjEsc3RhcnRTZXE6MSxob2xkVGltZTo5MCxrZXk6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e1VTUDpcIlVTUFwifSxyZXNwb25zZTp7VG9Hcm91cElkOlwiZ3JvdXBJRFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh5ZCxmdW5jdGlvbihlKXtlLmEyLGUudGlueWlkO3JldHVybntoZWFkOkNuKHt9LExuKGUsW1wiYTJcIixcInRpbnlpZFwiXSkse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5CSUdfR1JPVVBfTE9OR19QT0xMSU5HX05PX0FVVEgsXCIuXCIpLmNvbmNhdChlaS5DTUQuQVZDSEFUUk9PTV9MT05HX1BPTEwpfSksYm9keTp7VVNQOjEsc3RhcnRTZXE6MSxob2xkVGltZTo5MCxrZXk6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e1VTUDpcIlVTUFwifSxyZXNwb25zZTp7VG9Hcm91cElkOlwiZ3JvdXBJRFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChJZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuR0VUX09OTElORV9NRU1CRVJfTlVNKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFRkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5TRVRfR1JPVVBfQVRUUklCVVRFUyl9KSxib2R5Ontncm91cElEOnZvaWQgMCxncm91cEF0dHJpYnV0ZUxpc3Q6dm9pZCAwLG1haW5TZXF1ZW5jZTp2b2lkIDAsYXZDaGF0Um9vbUtleTp2b2lkIDAsYXR0cmlidXRlQ29udHJvbDpbXCJSYWNlQ29uZmxpY3RcIl19LGtleU1hcDp7cmVxdWVzdDp7a2V5Olwia2V5XCIsdmFsdWU6XCJ2YWx1ZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChTZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChlaS5DTUQuTU9ESUZZX0dST1VQX0FUVFJJQlVURVMpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsZ3JvdXBBdHRyaWJ1dGVMaXN0OnZvaWQgMCxtYWluU2VxdWVuY2U6dm9pZCAwLGF2Q2hhdFJvb21LZXk6dm9pZCAwLGF0dHJpYnV0ZUNvbnRyb2w6W1wiUmFjZUNvbmZsaWN0XCJdfSxrZXlNYXA6e3JlcXVlc3Q6e2tleTpcImtleVwiLHZhbHVlOlwidmFsdWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQ2QsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkRFTEVURV9HUk9VUF9BVFRSSUJVVEVTKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGdyb3VwQXR0cmlidXRlTGlzdDp2b2lkIDAsbWFpblNlcXVlbmNlOnZvaWQgMCxhdkNoYXRSb29tS2V5OnZvaWQgMCxhdHRyaWJ1dGVDb250cm9sOltcIlJhY2VDb25mbGljdFwiXX0sa2V5TWFwOntyZXF1ZXN0OntrZXk6XCJrZXlcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELkNMRUFSX0dST1VQX0FUVFJJQlVURVMpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsbWFpblNlcXVlbmNlOnZvaWQgMCxhdkNoYXRSb29tS2V5OnZvaWQgMCxhdHRyaWJ1dGVDb250cm9sOltcIlJhY2VDb25mbGljdFwiXX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChEZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuR1JPVVBfQVRUUixcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfR1JPVVBfQVRUUklCVVRFUyl9KSxib2R5Ontncm91cElEOnZvaWQgMCxhdkNoYXRSb29tS2V5OnZvaWQgMCxncm91cFR5cGU6MX0sa2V5TWFwOntyZXF1ZXN0OnthdkNoYXRSb29tS2V5OlwiS2V5XCIsZ3JvdXBUeXBlOlwiR3JvdXBUeXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KE5kLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfR1JPVVBfTUVNQkVSX0xJU1QpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsbGltaXQ6MCxvZmZzZXQ6dm9pZCAwLG5leHQ6dm9pZCAwLG1lbWJlclJvbGVGaWx0ZXI6dm9pZCAwLG1lbWJlckluZm9GaWx0ZXI6W1wiUm9sZVwiLFwiTmFtZUNhcmRcIixcIlNodXRVcFVudGlsXCIsXCJKb2luVGltZVwiXSxtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6XCJBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cE1lbWJlclwifSxyZXNwb25zZTp7QXBwTWVtYmVyRGVmaW5lZERhdGE6XCJtZW1iZXJDdXN0b21GaWVsZFwiLEFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyOlwibWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXJcIixNZW1iZXJMaXN0OlwibWVtYmVyc1wiLFNodXRVcFVudGlsOlwibXV0ZVVudGlsXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGtkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5HRVRfR1JPVVBfTUVNQkVSX0lORk8pfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsdXNlcklETGlzdDp2b2lkIDAsbWVtYmVySW5mb0ZpbHRlcjp2b2lkIDAsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRExpc3Q6XCJNZW1iZXJfTGlzdF9BY2NvdW50XCIsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6XCJBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cE1lbWJlclwifSxyZXNwb25zZTp7TWVtYmVyTGlzdDpcIm1lbWJlcnNcIixTaHV0VXBVbnRpbDpcIm11dGVVbnRpbFwiLEFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyOlwibWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXJcIixBcHBNZW1iZXJEZWZpbmVkRGF0YTpcIm1lbWJlckN1c3RvbUZpZWxkXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KE9kLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5BRERfR1JPVVBfTUVNQkVSKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHNpbGVuY2U6dm9pZCAwLHVzZXJJRExpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRDpcIk1lbWJlcl9BY2NvdW50XCIsdXNlcklETGlzdDpcIk1lbWJlckxpc3RcIn0scmVzcG9uc2U6e01lbWJlckxpc3Q6XCJtZW1iZXJzXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFJkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KGVpLkNNRC5ERUxFVEVfR1JPVVBfTUVNQkVSKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHVzZXJJRExpc3Q6dm9pZCAwLHJlYXNvbjp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dXNlcklETGlzdDpcIk1lbWJlclRvRGVsX0FjY291bnRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTGQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoZWkuQ01ELk1PRElGWV9HUk9VUF9NRU1CRVJfSU5GTyl9KSxib2R5Ontncm91cElEOnZvaWQgMCx1c2VySUQ6dm9pZCAwLG1lc3NhZ2VSZW1pbmRUeXBlOnZvaWQgMCxuYW1lQ2FyZDp2b2lkIDAscm9sZTp2b2lkIDAsbWVtYmVyQ3VzdG9tRmllbGQ6dm9pZCAwLG11dGVUaW1lOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VySUQ6XCJNZW1iZXJfQWNjb3VudFwiLG1lbWJlckN1c3RvbUZpZWxkOlwiQXBwTWVtYmVyRGVmaW5lZERhdGFcIixtdXRlVGltZTpcIlNodXRVcFRpbWVcIixtZXNzYWdlUmVtaW5kVHlwZTpcIk1zZ0ZsYWdcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoUGQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX09QRU5fU1RBVCxcIi5cIikuY29uY2F0KGVpLkNNRC5USU1fV0VCX1JFUE9SVF9WMil9KSxib2R5OntoZWFkZXI6e30sZXZlbnQ6W10scXVhbGl0eTpbXX0sa2V5TWFwOntyZXF1ZXN0OntTREtUeXBlOlwic2RrX3R5cGVcIixTREtWZXJzaW9uOlwic2RrX3ZlcnNpb25cIixkZXZpY2VUeXBlOlwiZGV2aWNlX3R5cGVcIixwbGF0Zm9ybTpcInBsYXRmb3JtXCIsaW5zdGFuY2VJRDpcImluc3RhbmNlX2lkXCIsdHJhY2VJRDpcInRyYWNlX2lkXCIsU0RLQXBwSUQ6XCJzZGtfYXBwX2lkXCIsdXNlcklEOlwidXNlcl9pZFwiLHRpbnlJRDpcInRpbnlfaWRcIixleHRlbnNpb246XCJleHRlbnNpb25cIix0aW1lc3RhbXA6XCJ0aW1lc3RhbXBcIixuZXR3b3JrVHlwZTpcIm5ldHdvcmtfdHlwZVwiLGV2ZW50VHlwZTpcImV2ZW50X3R5cGVcIixjb2RlOlwiZXJyb3JfY29kZVwiLG1lc3NhZ2U6XCJlcnJvcl9tZXNzYWdlXCIsbW9yZU1lc3NhZ2U6XCJtb3JlX21lc3NhZ2VcIixkdXBsaWNhdGU6XCJkdXBsaWNhdGVcIixjb3N0VGltZTpcImNvc3RfdGltZVwiLGxldmVsOlwibGV2ZWxcIixxdWFsaXR5VHlwZTpcInF1YWxpdHlfdHlwZVwiLHJlcG9ydEluZGV4OlwicmVwb3J0X2luZGV4XCIsd2hvbGVQZXJpb2Q6XCJ3aG9sZV9wZXJpb2RcIix0b3RhbENvdW50OlwidG90YWxfY291bnRcIixydHRDb3VudDpcInN1Y2Nlc3NfY291bnRfYnVzaW5lc3NcIixzdWNjZXNzUmF0ZU9mUmVxdWVzdDpcInBlcmNlbnRfYnVzaW5lc3NcIixjb3VudExlc3NUaGFuMVNlY29uZDpcInN1Y2Nlc3NfY291bnRfYnVzaW5lc3NcIixwZXJjZW50T2ZDb3VudExlc3NUaGFuMVNlY29uZDpcInBlcmNlbnRfYnVzaW5lc3NcIixjb3VudExlc3NUaGFuM1NlY29uZDpcInN1Y2Nlc3NfY291bnRfcGxhdGZvcm1cIixwZXJjZW50T2ZDb3VudExlc3NUaGFuM1NlY29uZDpcInBlcmNlbnRfcGxhdGZvcm1cIixzdWNjZXNzQ291bnRPZkJ1c2luZXNzOlwic3VjY2Vzc19jb3VudF9idXNpbmVzc1wiLHN1Y2Nlc3NSYXRlT2ZCdXNpbmVzczpcInBlcmNlbnRfYnVzaW5lc3NcIixzdWNjZXNzQ291bnRPZlBsYXRmb3JtOlwic3VjY2Vzc19jb3VudF9wbGF0Zm9ybVwiLHN1Y2Nlc3NSYXRlT2ZQbGF0Zm9ybTpcInBlcmNlbnRfcGxhdGZvcm1cIixzdWNjZXNzQ291bnRPZk1lc3NhZ2VSZWNlaXZlZDpcInN1Y2Nlc3NfY291bnRfYnVzaW5lc3NcIixzdWNjZXNzUmF0ZU9mTWVzc2FnZVJlY2VpdmVkOlwicGVyY2VudF9idXNpbmVzc1wiLGF2Z1JUVDpcImF2ZXJhZ2VfdmFsdWVcIixhdmdEZWxheTpcImF2ZXJhZ2VfdmFsdWVcIixhdmdWYWx1ZTpcImF2ZXJhZ2VfdmFsdWVcIix1aVBsYXRmb3JtOlwidWlfcGxhdGZvcm1cIn19fX0obikpLHRoaXMuX2NvbmZpZ01hcC5zZXQoVWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLkhFQVJUQkVBVCxcIi5cIikuY29uY2F0KGVpLkNNRC5BTElWRSl9KSxib2R5Ont9fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoRmQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX09QRU5fUFVTSCxcIi5cIikuY29uY2F0KGVpLkNNRC5NRVNTQUdFX1BVU0gpfSksYm9keTp7fSxrZXlNYXA6e3Jlc3BvbnNlOntDMmNNc2dBcnJheTpcIkMyQ01lc3NhZ2VBcnJheVwiLEdyb3VwTXNnQXJyYXk6XCJncm91cE1lc3NhZ2VBcnJheVwiLEdyb3VwVGlwczpcImdyb3VwVGlwc1wiLEMyY05vdGlmeU1zZ0FycmF5OlwiQzJDTm90aWZ5TWVzc2FnZUFycmF5XCIsQ2xpZW50U2VxOlwiY2xpZW50U2VxdWVuY2VcIixNc2dQcmlvcml0eTpcInByaW9yaXR5XCIsTm90aWNlU2VxOlwibm90aWNlU2VxdWVuY2VcIixNc2dDb250ZW50OlwiY29udGVudFwiLE1zZ1R5cGU6XCJ0eXBlXCIsTXNnQm9keTpcImVsZW1lbnRzXCIsVG9Hcm91cElkOlwidG9cIixEZXNjOlwiZGVzY3JpcHRpb25cIixFeHQ6XCJleHRlbnNpb25cIixJc1N5bmNNc2c6XCJpc1N5bmNNZXNzYWdlXCIsRmxhZzpcIm5lZWRTeW5jXCIsTmVlZEFjazpcIm5lZWRBY2tcIixQZW5kZW5jeUFkZF9BY2NvdW50OlwidXNlcklEXCIsUHJvZmlsZUltTmljazpcIm5pY2tcIixQZW5kZW5jeVR5cGU6XCJhcHBsaWNhdGlvblR5cGVcIixDMkNSZWFkQWxsTXNnOlwicmVhZEFsbEMyQ01lc3NhZ2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQocWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX09QRU5fUFVTSCxcIi5cIikuY29uY2F0KGVpLkNNRC5NVUxUSV9NRVNTQUdFX1BVU0gpfSksYm9keTp7fSxrZXlNYXA6e3Jlc3BvbnNlOntHcm91cE1zZ0FycmF5OlwiZ3JvdXBNZXNzYWdlQXJyYXlcIixHcm91cFRpcHM6XCJncm91cFRpcHNcIixDbGllbnRTZXE6XCJjbGllbnRTZXF1ZW5jZVwiLE1zZ1ByaW9yaXR5OlwicHJpb3JpdHlcIixOb3RpY2VTZXE6XCJub3RpY2VTZXF1ZW5jZVwiLE1zZ0NvbnRlbnQ6XCJjb250ZW50XCIsTXNnVHlwZTpcInR5cGVcIixNc2dCb2R5OlwiZWxlbWVudHNcIixUb0dyb3VwSWQ6XCJ0b1wiLERlc2M6XCJkZXNjcmlwdGlvblwiLEV4dDpcImV4dGVuc2lvblwiLElzU3luY01zZzpcImlzU3luY01lc3NhZ2VcIixGbGFnOlwibmVlZFN5bmNcIixOZWVkQWNrOlwibmVlZEFja1wiLFBlbmRlbmN5VHlwZTpcImFwcGxpY2F0aW9uVHlwZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh4ZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDpDbih7fSxlLHtzZXJ2Y21kOlwiXCIuY29uY2F0KGVpLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KGVpLkNNRC5NRVNTQUdFX1BVU0hfQUNLKX0pLGJvZHk6e3Nlc3Npb25EYXRhOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntzZXNzaW9uRGF0YTpcIlNlc3Npb25EYXRhXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFZkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOkNuKHt9LGUse3NlcnZjbWQ6XCJcIi5jb25jYXQoZWkuTkFNRS5JTV9PUEVOX1NUQVRVUyxcIi5cIikuY29uY2F0KGVpLkNNRC5TVEFUVVNfRk9SQ0VPRkZMSU5FKX0pLGJvZHk6e30sa2V5TWFwOntyZXNwb25zZTp7QzJjTm90aWZ5TXNnQXJyYXk6XCJDMkNOb3RpZnlNZXNzYWdlQXJyYXlcIixOb3RpY2VTZXE6XCJub3RpY2VTZXF1ZW5jZVwiLEtpY2tvdXRNc2dOb3RpZnk6XCJraWNrb3V0TXNnTm90aWZ5XCIsTmV3SW5zdEluZm86XCJuZXdJbnN0YW5jZUluZm9cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQmQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX0xPTkdfTUVTU0FHRSxcIi5cIikuY29uY2F0KGVpLkNNRC5ET1dOTE9BRF9NRVJHRVJfTUVTU0FHRSl9KSxib2R5Ontkb3dubG9hZEtleTpcIlwifSxrZXlNYXA6e3Jlc3BvbnNlOntEYXRhOlwiZGF0YVwiLERlc2M6XCJkZXNjcmlwdGlvblwiLEV4dDpcImV4dGVuc2lvblwiLERvd25sb2FkX0ZsYWc6XCJkb3dubG9hZEZsYWdcIixUaHVtYlVVSUQ6XCJ0aHVtYlVVSURcIixWaWRlb1VVSUQ6XCJ2aWRlb1VVSURcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoS2QsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6Q24oe30sZSx7c2VydmNtZDpcIlwiLmNvbmNhdChlaS5OQU1FLklNX0xPTkdfTUVTU0FHRSxcIi5cIikuY29uY2F0KGVpLkNNRC5VUExPQURfTUVSR0VSX01FU1NBR0UpfSksYm9keTp7bWVzc2FnZUxpc3Q6W119LGtleU1hcDp7cmVxdWVzdDp7ZnJvbUFjY291bnQ6XCJGcm9tX0FjY291bnRcIix0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsbXNnVGltZVN0YW1wOlwiTXNnVGltZVN0YW1wXCIsbXNnU2VxOlwiTXNnU2VxXCIsbXNnUmFuZG9tOlwiTXNnUmFuZG9tXCIsbXNnQm9keTpcIk1zZ0JvZHlcIix0eXBlOlwiTXNnVHlwZVwiLGNvbnRlbnQ6XCJNc2dDb250ZW50XCIsZGF0YTpcIkRhdGFcIixkZXNjcmlwdGlvbjpcIkRlc2NcIixleHRlbnNpb246XCJFeHRcIixzaXplVHlwZTpcIlR5cGVcIix1dWlkOlwiVVVJRFwiLHVybDpcIlwiLGltYWdlVXJsOlwiVVJMXCIsZmlsZVVybDpcIlVybFwiLHJlbW90ZUF1ZGlvVXJsOlwiVXJsXCIscmVtb3RlVmlkZW9Vcmw6XCJWaWRlb1VybFwiLHRodW1iVVVJRDpcIlRodW1iVVVJRFwiLHZpZGVvVVVJRDpcIlZpZGVvVVVJRFwiLHZpZGVvVXJsOlwiXCIsZG93bmxvYWRGbGFnOlwiRG93bmxvYWRfRmxhZ1wiLGZyb206XCJGcm9tX0FjY291bnRcIix0aW1lOlwiTXNnVGltZVN0YW1wXCIsbWVzc2FnZVJhbmRvbTpcIk1zZ1JhbmRvbVwiLG1lc3NhZ2VTZXF1ZW5jZTpcIk1zZ1NlcVwiLGVsZW1lbnRzOlwiTXNnQm9keVwiLGNsaWVudFNlcXVlbmNlOlwiQ2xpZW50U2VxXCIscGF5bG9hZDpcIk1zZ0NvbnRlbnRcIixtZXNzYWdlTGlzdDpcIk1zZ0xpc3RcIixtZXNzYWdlTnVtYmVyOlwiTXNnTnVtXCIsYWJzdHJhY3RMaXN0OlwiQWJzdHJhY3RMaXN0XCIsbWVzc2FnZUJvZHk6XCJNc2dCb2R5XCJ9fX19KGUpKX19LHtrZXk6XCJoYXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29uZmlnTWFwLmhhcyhlKX19LHtrZXk6XCJnZXRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29uZmlnTWFwLmdldChlKX19LHtrZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2ZpbGxDb25maWdNYXAoKX19LHtrZXk6XCJnZXRLZXlNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXMoZSk/dGhpcy5nZXQoZSkua2V5TWFwfHx7fTooUWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0S2V5TWFwIHVua25vd24gcHJvdG9jb2xOYW1lOlwiKS5jb25jYXQoZSkpLHt9KX19LHtrZXk6XCJnZXRQcm90b2NvbERhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnByb3RvY29sTmFtZSxuPWUucmVxdWVzdERhdGEsbz10aGlzLmdldCh0KSxyPW51bGw7aWYobil7dmFyIGE9dGhpcy5fc2ltcGxlRGVlcENvcHkobykscz10aGlzLl91cGRhdGVTZXJ2aWNlKG4sYSksaT1zLmJvZHksYz1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgdSBpbiBpKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpLHUpKXtpZihjW3VdPWlbdV0sdm9pZCAwPT09blt1XSljb250aW51ZTtjW3VdPW5bdV19cy5ib2R5PWMscj10aGlzLl9nZXRVcGxpbmtEYXRhKHMpfWVsc2Ugcj10aGlzLl9nZXRVcGxpbmtEYXRhKG8pO3JldHVybiByfX0se2tleTpcIl9nZXRVcGxpbmtEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcmVxdWVzdERhdGFDbGVhbmVyKGUpLG49amModC5oZWFkKSxvPUptKHQuYm9keSx0aGlzLl9nZXRSZXF1ZXN0S2V5TWFwKG4pKTtyZXR1cm4gdC5ib2R5PW8sdH19LHtrZXk6XCJfdXBkYXRlU2VydmljZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49amModC5oZWFkKTtpZih0LmhlYWQuc2VydmNtZC5pbmNsdWRlcyhlaS5OQU1FLkdST1VQKSl7dmFyIG89ZS50eXBlLHI9ZS5ncm91cElELGE9dm9pZCAwPT09cj92b2lkIDA6cixzPWUuZ3JvdXBJRExpc3QsaT12b2lkIDA9PT1zP1tdOnM7Z2MoYSkmJihhPWlbMF18fFwiXCIpLEdjKHt0eXBlOm8sZ3JvdXBJRDphfSkmJih0LmhlYWQuc2VydmNtZD1cIlwiLmNvbmNhdChlaS5OQU1FLkdST1VQX0NPTU1VTklUWSxcIi5cIikuY29uY2F0KG4pKX1yZXR1cm4gdH19LHtrZXk6XCJfZ2V0UmVxdWVzdEtleU1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0S2V5TWFwKGUpO3JldHVybiBDbih7fSxXbS5yZXF1ZXN0LHt9LHQucmVxdWVzdCl9fSx7a2V5OlwiX3JlcXVlc3REYXRhQ2xlYW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PUFycmF5LmlzQXJyYXkoZSk/W106T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmdmMobikmJm51bGwhPT1lW25dJiZ2b2lkIDAhPT1lW25dJiYoXCJvYmplY3RcIiE9PU1uKGVbbl0pP3Rbbl09ZVtuXTp0W25dPXRoaXMuX3JlcXVlc3REYXRhQ2xlYW5lci5iaW5kKHRoaXMpKGVbbl0pKTtyZXR1cm4gdH19LHtrZXk6XCJfc2ltcGxlRGVlcENvcHlcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj1PYmplY3Qua2V5cyhlKSxvPXt9LHI9MCxhPW4ubGVuZ3RoO3I8YTtyKyspdD1uW3JdLHBjKGVbdF0pP29bdF09QXJyYXkuZnJvbShlW3RdKTpsYyhlW3RdKT9vW3RdPXRoaXMuX3NpbXBsZURlZXBDb3B5KGVbdF0pOm9bdF09ZVt0XTtyZXR1cm4gb319XSksZX0oKSxGeT1beGRdLHF5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt5bih0aGlzLGUpLHRoaXMuX3Nlc3Npb25Nb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJEb3dubGlua0hhbmRsZXJcIix0aGlzLl9ldmVudEhhbmRsZXJNYXA9bmV3IE1hcCx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwiQzJDTWVzc2FnZUFycmF5XCIsdGhpcy5fYzJjTWVzc2FnZUFycmF5SGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwiZ3JvdXBNZXNzYWdlQXJyYXlcIix0aGlzLl9ncm91cE1lc3NhZ2VBcnJheUhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcImdyb3VwVGlwc1wiLHRoaXMuX2dyb3VwVGlwc0hhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcIkMyQ05vdGlmeU1lc3NhZ2VBcnJheVwiLHRoaXMuX0MyQ05vdGlmeU1lc3NhZ2VBcnJheUhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcInByb2ZpbGVNb2RpZnlcIix0aGlzLl9wcm9maWxlSGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwiZnJpZW5kTGlzdE1vZFwiLHRoaXMuX3JlbGF0aW9uQ2hhaW5IYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5zZXQoXCJyZWNlbnRDb250YWN0TW9kXCIsdGhpcy5fcmVjZW50Q29udGFjdEhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcInJlYWRBbGxDMkNNZXNzYWdlXCIsdGhpcy5fYWxsTWVzc2FnZVJlYWRIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2tleXM9VW4odGhpcy5fZXZlbnRIYW5kbGVyTWFwLmtleXMoKSl9cmV0dXJuIEVuKGUsW3trZXk6XCJfYzJjTWVzc2FnZUFycmF5SGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGFsKTtpZih0KXtpZihlLmRhdGFMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKDE9PT1lLmlzU3luY01lc3NhZ2Upe3ZhciB0PWUuZnJvbTtlLmZyb209ZS50byxlLnRvPXR9fSkpLDE9PT1lLm5lZWRTeW5jKXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKG1sKS5zdGFydE9ubGluZVN5bmMoKTt0Lm9uTmV3QzJDTWVzc2FnZSh7ZGF0YUxpc3Q6ZS5kYXRhTGlzdCxpc0luc3RhbnRNZXNzYWdlOiEwfSl9fX0se2tleTpcIl9ncm91cE1lc3NhZ2VBcnJheUhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShzbCk7dCYmdC5vbk5ld0dyb3VwTWVzc2FnZSh7ZXZlbnQ6ZS5ldmVudCxkYXRhTGlzdDplLmRhdGFMaXN0LGlzSW5zdGFudE1lc3NhZ2U6ITB9KX19LHtrZXk6XCJfZ3JvdXBUaXBzSGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKHNsKTtpZih0KXt2YXIgbj1lLmV2ZW50LG89ZS5kYXRhTGlzdCxyPWUuaXNJbnN0YW50TWVzc2FnZSxhPXZvaWQgMD09PXJ8fHIscz1lLmlzU3luY2luZ0VuZGVkO3N3aXRjaChuKXtjYXNlIDQ6Y2FzZSA2OnQub25OZXdHcm91cFRpcHMoe2V2ZW50Om4sZGF0YUxpc3Q6b30pO2JyZWFrO2Nhc2UgNTpvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3BjKGUuZWxlbWVudHMucmV2b2tlZEluZm9zKT90Lm9uR3JvdXBNZXNzYWdlUmV2b2tlZCh7ZGF0YUxpc3Q6b30pOnBjKGUuZWxlbWVudHMuZ3JvdXBNZXNzYWdlUmVhZE5vdGljZSk/dC5vbkdyb3VwTWVzc2FnZVJlYWROb3RpY2Uoe2RhdGFMaXN0Om99KTpwYyhlLmVsZW1lbnRzLnJlYWRSZWNlaXB0TGlzdCk/dC5vblJlYWRSZWNlaXB0TGlzdCh7ZGF0YUxpc3Q6b30pOnQub25OZXdHcm91cFN5c3RlbU5vdGljZSh7ZGF0YUxpc3Q6byxpc0luc3RhbnRNZXNzYWdlOmEsaXNTeW5jaW5nRW5kZWQ6c30pfSkpO2JyZWFrO2Nhc2UgMTI6dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUodWwpLm9uTmV3R3JvdXBBdFRpcHMoe2RhdGFMaXN0Om99KTticmVhaztkZWZhdWx0OlFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2dyb3VwVGlwc0hhbmRsZXIgdW5rbm93biBldmVudDpcIikuY29uY2F0KG4sXCIgZGF0YUxpc3Q6XCIpLG8pfX19fSx7a2V5OlwiX0MyQ05vdGlmeU1lc3NhZ2VBcnJheUhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5kYXRhTGlzdDtpZihwYyhuKSl7dmFyIG89dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoYWwpO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZGMoZSkpaWYoZS5oYXNPd25Qcm9wZXJ0eShcImtpY2tvdXRNc2dOb3RpZnlcIikpe3ZhciByPWUua2lja291dE1zZ05vdGlmeSxhPXIua2lja1R5cGUscz1yLm5ld0luc3RhbmNlSW5mbyxpPXZvaWQgMD09PXM/e306czsxPT09YT90Ll9zZXNzaW9uTW9kdWxlLm9uTXVsdGlwbGVBY2NvdW50S2lja2VkT3V0KGkpOjI9PT1hJiZ0Ll9zZXNzaW9uTW9kdWxlLm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXQoaSl9ZWxzZSBpZihlLmhhc093blByb3BlcnR5KFwiYzJjTWVzc2FnZVJldm9rZWROb3RpZnlcIikpbyYmby5vbkMyQ01lc3NhZ2VSZXZva2VkKHtkYXRhTGlzdDpufSk7ZWxzZSBpZihlLmhhc093blByb3BlcnR5KFwiYzJjTWVzc2FnZVJlYWRSZWNlaXB0XCIpKW8mJm8ub25DMkNNZXNzYWdlUmVhZFJlY2VpcHQoe2RhdGFMaXN0Om59KTtlbHNlIGlmKGUuaGFzT3duUHJvcGVydHkoXCJjMmNNZXNzYWdlUmVhZE5vdGljZVwiKSlvJiZvLm9uQzJDTWVzc2FnZVJlYWROb3RpY2Uoe2RhdGFMaXN0Om59KTtlbHNlIGlmKGUuaGFzT3duUHJvcGVydHkoXCJtdXRlTm90aWZpY2F0aW9uc1N5bmNcIikpe3QuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKHVsKS5vbkMyQ01lc3NhZ2VSZW1pbmRUeXBlU3luY2VkKHtkYXRhTGlzdDpufSl9fSkpfX19LHtrZXk6XCJfcHJvZmlsZUhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShybCkub25Qcm9maWxlTW9kaWZpZWQoe2RhdGFMaXN0OmUuZGF0YUxpc3R9KTt2YXIgdD10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShpbCk7dCYmdC5vbkZyaWVuZFByb2ZpbGVNb2RpZmllZCh7ZGF0YUxpc3Q6ZS5kYXRhTGlzdH0pfX0se2tleTpcIl9yZWxhdGlvbkNoYWluSGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKHJsKS5vblJlbGF0aW9uQ2hhaW5Nb2RpZmllZCh7ZGF0YUxpc3Q6ZS5kYXRhTGlzdH0pO3ZhciB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGlsKTt0JiZ0Lm9uUmVsYXRpb25DaGFpbk1vZGlmaWVkKHtkYXRhTGlzdDplLmRhdGFMaXN0fSl9fSx7a2V5OlwiX3JlY2VudENvbnRhY3RIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdDtpZihwYyh0KSl7dmFyIG49dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUodWwpO24mJnQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wdXNoVHlwZSxvPWUucmVjZW50Q29udGFjdFRvcEl0ZW0scj1lLnJlY2VudENvbnRhY3REZWxldGVJdGVtOzE9PT10P24ub25Db252ZXJzYXRpb25EZWxldGVkKHIucmVjZW50Q29udGFjdExpc3QpOjI9PT10P24ub25Db252ZXJzYXRpb25QaW5uZWQoby5yZWNlbnRDb250YWN0TGlzdCk6Mz09PXQmJm4ub25Db252ZXJzYXRpb25VbnBpbm5lZChvLnJlY2VudENvbnRhY3RMaXN0KX0pKX19fSx7a2V5OlwiX2FsbE1lc3NhZ2VSZWFkSGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YUxpc3Qsbj10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZSh1bCk7biYmbi5vblB1c2hlZEFsbE1lc3NhZ2VSZWFkKHQpfX0se2tleTpcIm9uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmJvZHk7aWYodGhpcy5fZmlsdGVyTWVzc2FnZUZyb21JTU9wZW5QdXNoKGUpKXt2YXIgbz1uLmV2ZW50QXJyYXkscj1uLmlzSW5zdGFudE1lc3NhZ2UsYT1uLmlzU3luY2luZ0VuZGVkLHM9bi5uZWVkU3luYztpZihwYyhvKSlmb3IodmFyIGk9bnVsbCxjPW51bGwsdT0wLGw9MCxkPW8ubGVuZ3RoO2w8ZDtsKyspe3U9KGk9b1tsXSkuZXZlbnQ7dmFyIHA9T2JqZWN0LmtleXMoaSkuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT10Ll9rZXlzLmluZGV4T2YoZSl9KSk7cD8oYz0xNCE9PXU/aVtwXTp7cmVhZEFsbEMyQ01lc3NhZ2U6aVtwXSxncm91cE1lc3NhZ2VSZWFkSW5mb0xpc3Q6aS5ncm91cE1lc3NhZ2VSZWFkTm90aWNlfHxbXX0sdGhpcy5fZXZlbnRIYW5kbGVyTWFwLmdldChwKSh7ZXZlbnQ6dSxkYXRhTGlzdDpjLGlzSW5zdGFudE1lc3NhZ2U6cixpc1N5bmNpbmdFbmRlZDphLG5lZWRTeW5jOnN9KSk6UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk1lc3NhZ2UgdW5rbm93biBldmVudEl0ZW06XCIpLmNvbmNhdChpKSl9fX19LHtrZXk6XCJfZmlsdGVyTWVzc2FnZUZyb21JTU9wZW5QdXNoXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5oZWFkLG49ZS5ib2R5LG89dC5zZXJ2Y21kLHI9ITE7aWYoZ2Mobyl8fChyPW8uaW5jbHVkZXMoZWkuTkFNRS5JTV9DT05GSUdfTUFOQUdFUil8fG8uaW5jbHVkZXMoZWkuTkFNRS5PVkVSTE9BRF9QVVNIKXx8by5pbmNsdWRlcyhlaS5OQU1FLlNUQVRfU0VSVklDRSkpLCFyKXJldHVybiEwO2lmKG8uaW5jbHVkZXMoZWkuQ01ELlBVU0hFRF9DTE9VRF9DT05UUk9MX0NPTkZJRykpdGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoSWwpLm9uUHVzaGVkQ2xvdWRDb250cm9sQ29uZmlnKG4pO2Vsc2UgaWYoby5pbmNsdWRlcyhlaS5DTUQuUFVTSEVEX0NPTU1FUkNJQUxfQ09ORklHKSl7dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoQ2wpLm9uUHVzaGVkQ29uZmlnKG4pfWVsc2UgaWYoby5pbmNsdWRlcyhlaS5DTUQuT1ZFUkxPQURfTk9USUZZKSl0aGlzLl9zZXNzaW9uTW9kdWxlLm9uUHVzaGVkU2VydmVyT3ZlcmxvYWQobik7ZWxzZSBpZihvLmluY2x1ZGVzKGVpLkNNRC5LSUNLX09USEVSKSl7dmFyIGE9RGF0ZS5ub3coKTt0aGlzLl9zZXNzaW9uTW9kdWxlLnJlTG9naW5PbktpY2tPdGhlcigpO3ZhciBzPW5ldyBkcCh2cCksaT10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShubCkuZ2V0TGFzdFdzSGVsbG9UcygpLGM9YS1pO3Muc2V0TWVzc2FnZShcImxhc3Qgd3NoZWxsbyB0aW1lOlwiLmNvbmNhdChpLFwiIGRpZmY6XCIpLmNvbmNhdChjLFwibXNcIikpLnNldE5ldHdvcmtUeXBlKHRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCl9cmV0dXJuITF9fV0pLGV9KCkseHk9W3tjbWQ6ZWkuQ01ELkdFVF9HUk9VUF9JTkZPLGludGVydmFsOjEsY291bnQ6MjB9LHtjbWQ6ZWkuQ01ELlNFVF9HUk9VUF9BVFRSSUJVVEVTLGludGVydmFsOjUsY291bnQ6MTB9LHtjbWQ6ZWkuQ01ELk1PRElGWV9HUk9VUF9BVFRSSUJVVEVTLGludGVydmFsOjUsY291bnQ6MTB9LHtjbWQ6ZWkuQ01ELkRFTEVURV9HUk9VUF9BVFRSSUJVVEVTLGludGVydmFsOjUsY291bnQ6MTB9LHtjbWQ6ZWkuQ01ELkNMRUFSX0dST1VQX0FUVFJJQlVURVMsaW50ZXJ2YWw6NSxjb3VudDoxMH0se2NtZDplaS5DTUQuR0VUX0dST1VQX0FUVFJJQlVURVMsaW50ZXJ2YWw6NSxjb3VudDoyMH0se2NtZDplaS5DTUQuU0VUX0FMTF9NRVNTQUdFX1JFQUQsaW50ZXJ2YWw6MSxjb3VudDoxfV0sVnk9ZnVuY3Rpb24oZSl7QW4obixlKTt2YXIgdD1HbihuKTtmdW5jdGlvbiBuKGUpe3ZhciBvO3JldHVybiB5bih0aGlzLG4pLChvPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiU2Vzc2lvbk1vZHVsZVwiLG8uX3BsYXRmb3JtPW8uZ2V0UGxhdGZvcm0oKSxvLl9wcm90b2NvbEhhbmRsZXI9bmV3IFV5KGJuKG8pKSxvLl9tZXNzYWdlRGlzcGF0Y2hlcj1uZXcgcXkoYm4obykpLG8uX2NvbW1hbmRGcmVxdWVuY3lMaW1pdE1hcD1uZXcgTWFwLG8uX2NvbW1hbmRSZXF1ZXN0SW5mb01hcD1uZXcgTWFwLG8uX3NlcnZlck92ZXJsb2FkSW5mb01hcD1uZXcgTWFwLG8uX2luaXQoKSxvLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oS18sby5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsYm4obykpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJfaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlQ29tbWFuZEZyZXF1ZW5jeUxpbWl0TWFwKHh5KX19LHtrZXk6XCJfb25DbG91ZENvbmZpZ1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJjbWRfZnJlcXVlbmN5X2xpbWl0XCIpO2djKGUpfHwoZT1KU09OLnBhcnNlKGUpLHRoaXMuX3VwZGF0ZUNvbW1hbmRGcmVxdWVuY3lMaW1pdE1hcChlKSl9fSx7a2V5OlwiX3VwZGF0ZUNvbW1hbmRGcmVxdWVuY3lMaW1pdE1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9jb21tYW5kRnJlcXVlbmN5TGltaXRNYXAuc2V0KGUuY21kLHtpbnRlcnZhbDplLmludGVydmFsLGNvdW50OmUuY291bnR9KX0pKX19LHtrZXk6XCJ1cGRhdGVQcm90b2NvbENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcHJvdG9jb2xIYW5kbGVyLnVwZGF0ZSgpfX0se2tleTpcInJlcXVlc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVxdWVzdCBvcHRpb25zOlwiKSxlKTt2YXIgdD1lLnByb3RvY29sTmFtZSxuPWUudGpnSUQ7aWYoIXRoaXMuX3Byb3RvY29sSGFuZGxlci5oYXModCkpcmV0dXJuIFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlcXVlc3QgdW5rbm93biBwcm90b2NvbDpcIikuY29uY2F0KHQpKSxPXyh7Y29kZTp6ZC5DQU5OT1RfRklORF9QUk9UT0NPTCxtZXNzYWdlOkpkLkNBTk5PVF9GSU5EX1BST1RPQ09MfSk7dmFyIG89dGhpcy5nZXRQcm90b2NvbERhdGEoZSkscj1vLmhlYWQuc2VydmNtZDtpZih0aGlzLl9pc0ZyZXF1ZW5jeU92ZXJMaW1pdChyKSlyZXR1cm4gT18oe2NvZGU6emQuT1ZFUl9GUkVRVUVOQ1lfTElNSVQsbWVzc2FnZTpKZC5PVkVSX0ZSRVFVRU5DWV9MSU1JVH0pO2lmKHRoaXMuX2lzU2VydmVyT3ZlcmxvYWQocikpcmV0dXJuIE9fKHtjb2RlOnpkLk9QRU5fU0VSVklDRV9PVkVSTE9BRF9FUlJPUixtZXNzYWdlOkpkLk9QRU5fU0VSVklDRV9PVkVSTE9BRF9FUlJPUn0pO0pjKG4pfHwoby5oZWFkLnRqZ0lEPW4pO3ZhciBhPXRoaXMuZ2V0TW9kdWxlKE1sKTtyZXR1cm4gRnkuaW5jbHVkZXModCk/YS5zaW1wbHlTZW5kKG8pOmEuc2VuZChvKX19LHtrZXk6XCJnZXRLZXlNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcHJvdG9jb2xIYW5kbGVyLmdldEtleU1hcChlKX19LHtrZXk6XCJnZW5Db21tb25IZWFkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldE1vZHVsZShsbCk7cmV0dXJue3ZlcjpcInY0XCIscGxhdGZvcm06dGhpcy5fcGxhdGZvcm0sd2Vic2RrYXBwaWQ6WXMsd2Vic2RrdmVyc2lvbjpXcyxhMjplLmdldEEyS2V5KCl8fHZvaWQgMCx0aW55aWQ6ZS5nZXRUaW55SUQoKXx8dm9pZCAwLHN0YXR1c19pbnN0aWQ6ZS5nZXRTdGF0dXNJbnN0YW5jZUlEKCksc2RrYXBwaWQ6ZS5nZXRTREtBcHBJRCgpLGNvbnRlbnR0eXBlOmUuZ2V0Q29udGVudFR5cGUoKSxyZXF0aW1lOjAsaWRlbnRpZmllcjplLmdldEEyS2V5KCk/dm9pZCAwOmUuZ2V0VXNlcklEKCksdXNlcnNpZzplLmdldEEyS2V5KCk/dm9pZCAwOmUuZ2V0VXNlclNpZygpLHNka2FiaWxpdHk6NTEsdGpnSUQ6XCJcIn19fSx7a2V5OlwiZ2VuQ29zU3BlY2lmaWVkSGVhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRNb2R1bGUobGwpO3JldHVybnt2ZXI6XCJ2NFwiLHBsYXRmb3JtOnRoaXMuX3BsYXRmb3JtLHdlYnNka2FwcGlkOllzLHdlYnNka3ZlcnNpb246V3Msc2RrYXBwaWQ6ZS5nZXRTREtBcHBJRCgpLGNvbnRlbnR0eXBlOmUuZ2V0Q29udGVudFR5cGUoKSxyZXF0aW1lOjAsaWRlbnRpZmllcjplLmdldFVzZXJJRCgpLHVzZXJzaWc6ZS5nZXRVc2VyU2lnKCksc3RhdHVzX2luc3RpZDplLmdldFN0YXR1c0luc3RhbmNlSUQoKSxzZGthYmlsaXR5OjUxfX19LHtrZXk6XCJnZW5TU09SZXBvcnRIZWFkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldE1vZHVsZShsbCk7cmV0dXJue3ZlcjpcInY0XCIscGxhdGZvcm06dGhpcy5fcGxhdGZvcm0sd2Vic2RrYXBwaWQ6WXMsd2Vic2RrdmVyc2lvbjpXcyxzZGthcHBpZDplLmdldFNES0FwcElEKCksY29udGVudHR5cGU6XCJcIixyZXF0aW1lOjAsaWRlbnRpZmllcjpcIlwiLHVzZXJzaWc6XCJcIixzdGF0dXNfaW5zdGlkOmUuZ2V0U3RhdHVzSW5zdGFuY2VJRCgpLHNka2FiaWxpdHk6NTF9fX0se2tleTpcImdldFByb3RvY29sRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wcm90b2NvbEhhbmRsZXIuZ2V0UHJvdG9jb2xEYXRhKGUpfX0se2tleTpcIm9uRXJyb3JDb2RlTm90WmVyb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZXJyb3JDb2RlO2lmKHQ9PT16ZC5IRUxMT19BTlNXRVJfS0lDS0VEX09VVCl7dmFyIG49ZS5raWNrVHlwZSxvPWUubmV3SW5zdGFuY2VJbmZvLHI9dm9pZCAwPT09bz97fTpvOzE9PT1uP3RoaXMub25NdWx0aXBsZUFjY291bnRLaWNrZWRPdXQocik6Mj09PW4mJnRoaXMub25NdWx0aXBsZURldmljZUtpY2tlZE91dChyKX10IT09emQuTUVTU0FHRV9BMktFWV9FWFBJUkVEJiZ0IT09emQuQUNDT1VOVF9BMktFWV9FWFBJUkVEfHwodGhpcy5fb25Vc2VyU2lnRXhwaXJlZCgpLHRoaXMuZ2V0TW9kdWxlKE1sKS5yZUNvbm5lY3QoKSl9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ib2R5LG49dC5uZWVkQWNrLG89dm9pZCAwPT09bj8wOm4scj10LnNlc3Npb25EYXRhOzE9PT1vJiZ0aGlzLl9zZW5kQUNLKHIpLHRoaXMuX21lc3NhZ2VEaXNwYXRjaGVyLm9uTWVzc2FnZShlKX19LHtrZXk6XCJvblJlY29ubmVjdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZUxvZ2luT25SZWNvbm5lY3RlZCgpfX0se2tleTpcInJlTG9naW5PbktpY2tPdGhlclwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZUxvZ2luT25LaWNrT3RoZXJcIikpLHRoaXMuX3JlTG9naW4oKX19LHtrZXk6XCJfcmVMb2dpbk9uUmVjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3JlTG9naW5PblJlY29ubmVjdGVkXCIpKSx0aGlzLl9yZUxvZ2luKCl9fSx7a2V5OlwiX3JlTG9naW5cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5pc0xvZ2dlZEluKCkmJnRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkRsfSkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49dC5kYXRhLmluc3RhbmNlSUQ7ZS5nZXRNb2R1bGUobGwpLnNldFN0YXR1c0luc3RhbmNlSUQobiksUWkubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fcmVMb2dpbiBvay4gc3RhcnQgdG8gc3luYyB1bnJlYWQgbWVzc2FnZXNcIikpLGUuZ2V0TW9kdWxlKG1sKS5zdGFydFN5bmNPblJlY29ubmVjdGVkKCksZS5nZXRNb2R1bGUoVGwpLnN0YXJ0UHVsbCgpLGUuZ2V0TW9kdWxlKHNsKS51cGRhdGVMb2NhbE1haW5TZXF1ZW5jZU9uUmVjb25uZWN0ZWQoKX0pKX19LHtrZXk6XCJvbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ2V0TW9kdWxlKG5sKS5vbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dChlKX19LHtrZXk6XCJvbk11bHRpcGxlRGV2aWNlS2lja2VkT3V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5nZXRNb2R1bGUobmwpLm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXQoZSl9fSx7a2V5OlwiX29uVXNlclNpZ0V4cGlyZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ2V0TW9kdWxlKG5sKS5vblVzZXJTaWdFeHBpcmVkKCl9fSx7a2V5OlwiX3NlbmRBQ0tcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp4ZCxyZXF1ZXN0RGF0YTp7c2Vzc2lvbkRhdGE6ZX19KX19LHtrZXk6XCJfaXNGcmVxdWVuY3lPdmVyTGltaXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KFwiLlwiKVsxXTtpZighdGhpcy5fY29tbWFuZEZyZXF1ZW5jeUxpbWl0TWFwLmhhcyh0KSlyZXR1cm4hMTtpZighdGhpcy5fY29tbWFuZFJlcXVlc3RJbmZvTWFwLmhhcyh0KSlyZXR1cm4gdGhpcy5fY29tbWFuZFJlcXVlc3RJbmZvTWFwLnNldCh0LHtzdGFydFRpbWU6RGF0ZS5ub3coKSxyZXF1ZXN0Q291bnQ6MX0pLCExO3ZhciBuPXRoaXMuX2NvbW1hbmRGcmVxdWVuY3lMaW1pdE1hcC5nZXQodCksbz1uLmNvdW50LHI9bi5pbnRlcnZhbCxhPXRoaXMuX2NvbW1hbmRSZXF1ZXN0SW5mb01hcC5nZXQodCkscz1hLnN0YXJ0VGltZSxpPWEucmVxdWVzdENvdW50O2lmKERhdGUubm93KCktcz4xZTMqcilyZXR1cm4gdGhpcy5fY29tbWFuZFJlcXVlc3RJbmZvTWFwLnNldCh0LHtzdGFydFRpbWU6RGF0ZS5ub3coKSxyZXF1ZXN0Q291bnQ6MX0pLCExO2krPTEsdGhpcy5fY29tbWFuZFJlcXVlc3RJbmZvTWFwLnNldCh0LHtzdGFydFRpbWU6cyxyZXF1ZXN0Q291bnQ6aX0pO3ZhciBjPSExO3JldHVybiBpPm8mJihjPSEwKSxjfX0se2tleTpcIl9pc1NlcnZlck92ZXJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX3NlcnZlck92ZXJsb2FkSW5mb01hcC5oYXMoZSkpcmV0dXJuITE7dmFyIHQ9dGhpcy5fc2VydmVyT3ZlcmxvYWRJbmZvTWFwLmdldChlKSxuPXQub3ZlcmxvYWRUaW1lLG89dC53YWl0aW5nVGltZSxyPSExO3JldHVybiBEYXRlLm5vdygpLW48PTFlMypvP3I9ITA6KHRoaXMuX3NlcnZlck92ZXJsb2FkSW5mb01hcC5kZWxldGUoZSkscj0hMSkscn19LHtrZXk6XCJvblB1c2hlZFNlcnZlck92ZXJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vdmVybG9hZENvbW1hbmQsbj1lLndhaXRpbmdUaW1lO3RoaXMuX3NlcnZlck92ZXJsb2FkSW5mb01hcC5zZXQodCx7b3ZlcmxvYWRUaW1lOkRhdGUubm93KCksd2FpdGluZ1RpbWU6bn0pLFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUHVzaGVkU2VydmVyT3ZlcmxvYWQgd2FpdGluZ1RpbWU6XCIpLmNvbmNhdChuLFwic1wiKSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX3VwZGF0ZUNvbW1hbmRGcmVxdWVuY3lMaW1pdE1hcCh4eSksdGhpcy5fY29tbWFuZFJlcXVlc3RJbmZvTWFwLmNsZWFyKCksdGhpcy5fc2VydmVyT3ZlcmxvYWRJbmZvTWFwLmNsZWFyKCl9fV0pLG59KEFsKSxLeT1mdW5jdGlvbihlKXtBbihuLGUpO3ZhciB0PUduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87cmV0dXJuIHluKHRoaXMsbiksKG89dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJNZXNzYWdlTG9zc0RldGVjdGlvbk1vZHVsZVwiLG8uX21heWJlTG9zdFNlcXVlbmNlc01hcD1uZXcgTWFwLG99cmV0dXJuIEVuKG4sW3trZXk6XCJvbk1lc3NhZ2VNYXliZUxvc3RcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dGhpcy5fbWF5YmVMb3N0U2VxdWVuY2VzTWFwLmhhcyhlKXx8dGhpcy5fbWF5YmVMb3N0U2VxdWVuY2VzTWFwLnNldChlLFtdKTtmb3IodmFyIG89dGhpcy5fbWF5YmVMb3N0U2VxdWVuY2VzTWFwLmdldChlKSxyPTA7cjxuO3IrKylvLnB1c2godCtyKTtRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NZXNzYWdlTWF5YmVMb3N0LiBtYXliZUxvc3RTZXF1ZW5jZXM6XCIpLmNvbmNhdChvKSl9fSx7a2V5OlwiZGV0ZWN0TWVzc2FnZUxvc3NcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX21heWJlTG9zdFNlcXVlbmNlc01hcC5nZXQoZSk7aWYoIUpjKG4pJiYhSmModCkpe3ZhciBvPXQuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4tMSE9PW4uaW5kZXhPZihlKX0pKTtpZihRaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGV0ZWN0TWVzc2FnZUxvc3MuIG1hdGNoZWRTZXF1ZW5jZXM6XCIpLmNvbmNhdChvKSksbi5sZW5ndGg9PT1vLmxlbmd0aClRaS5pbmZvKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZXRlY3RNZXNzYWdlTG9zcyBubyBtZXNzYWdlIGxvc3MuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSkpO2Vsc2V7dmFyIHIsYT1uLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1vLmluZGV4T2YoZSl9KSkscz1hLmxlbmd0aDtzPD01P3I9ZStcIi1cIithLmpvaW4oXCItXCIpOihhLnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUtdH0pKSxyPWUrXCIgc3RhcnQ6XCIrYVswXStcIiBlbmQ6XCIrYVtzLTFdK1wiIGNvdW50OlwiK3MpLG5ldyBkcChPZykuc2V0TWVzc2FnZShyKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldExldmVsKFwid2FybmluZ1wiKS5lbmQoKSxRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZXRlY3RNZXNzYWdlTG9zcyBtZXNzYWdlIGxvc3MgZGV0ZWN0ZWQuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSxcIiBsb3N0U2VxdWVuY2VzOlwiKS5jb25jYXQoYSkpfW4ubGVuZ3RoPTB9fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9tYXliZUxvc3RTZXF1ZW5jZXNNYXAuY2xlYXIoKX19XSksbn0oQWwpLEJ5PWZ1bmN0aW9uKGUpe0FuKG4sZSk7dmFyIHQ9R24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkNsb3VkQ29udHJvbE1vZHVsZVwiLG8uX2Nsb3VkQ29uZmlnPW5ldyBNYXAsby5fZXhwaXJlZFRpbWU9MCxvLl92ZXJzaW9uPTAsby5faXNGZXRjaGluZz0hMSxvfXJldHVybiBFbihuLFt7a2V5OlwiZ2V0Q2xvdWRDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2MoZSk/dGhpcy5fY2xvdWRDb25maWc6dGhpcy5fY2xvdWRDb25maWcuaGFzKGUpP3RoaXMuX2Nsb3VkQ29uZmlnLmdldChlKTp2b2lkIDB9fSx7a2V5OlwiX2NhbkZldGNoQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xvZ2dlZEluKCkmJiF0aGlzLl9pc0ZldGNoaW5nJiZEYXRlLm5vdygpPj10aGlzLl9leHBpcmVkVGltZX19LHtrZXk6XCJmZXRjaENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX2NhbkZldGNoQ29uZmlnKCk7aWYoUWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5mZXRjaENvbmZpZyBjYW5GZXRjaENvbmZpZzpcIikuY29uY2F0KHQpKSx0KXt2YXIgbj1uZXcgZHAoRmcpLG89dGhpcy5nZXRNb2R1bGUobGwpLmdldFNES0FwcElEKCk7dGhpcy5faXNGZXRjaGluZz0hMCx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpIZCxyZXF1ZXN0RGF0YTp7U0RLQXBwSUQ6byx2ZXJzaW9uOnRoaXMuX3ZlcnNpb259fSkudGhlbigoZnVuY3Rpb24odCl7ZS5faXNGZXRjaGluZz0hMSxuLnNldE1lc3NhZ2UoXCJ2ZXJzaW9uOlwiLmNvbmNhdChlLl92ZXJzaW9uLFwiIG5ld1ZlcnNpb246XCIpLmNvbmNhdCh0LmRhdGEudmVyc2lvbixcIiBjb25maWc6XCIpLmNvbmNhdCh0LmRhdGEuY2xvdWRDb250cm9sQ29uZmlnKSkuc2V0TmV0d29ya1R5cGUoZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxRaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLmZldGNoQ29uZmlnIG9rXCIpKSxlLl9wYXJzZUNsb3VkQ29udHJvbENvbmZpZyh0LmRhdGEpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtlLl9pc0ZldGNoaW5nPSExLGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89UG4oZSwyKSxyPW9bMF0sYT1vWzFdO24uc2V0RXJyb3IodCxyLGEpLmVuZCgpfSkpLFFpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuZmV0Y2hDb25maWcgZmFpbGVkLiBlcnJvcjpcIiksdCksZS5fc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3IoMTJlNCl9KSl9fX0se2tleTpcIm9uUHVzaGVkQ2xvdWRDb250cm9sQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblB1c2hlZENsb3VkQ29udHJvbENvbmZpZ1wiKSksbmV3IGRwKHFnKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJuZXdWZXJzaW9uOlwiLmNvbmNhdChlLnZlcnNpb24sXCIgY29uZmlnOlwiKS5jb25jYXQoZS5jbG91ZENvbnRyb2xDb25maWcpKS5lbmQoKSx0aGlzLl9wYXJzZUNsb3VkQ29udHJvbENvbmZpZyhlKX19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jYW5GZXRjaENvbmZpZygpJiZ0aGlzLmZldGNoQ29uZmlnKCl9fSx7a2V5OlwiX3BhcnNlQ2xvdWRDb250cm9sQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fcGFyc2VDbG91ZENvbnRyb2xDb25maWdcIiksbz1lLmVycm9yQ29kZSxyPWUuZXJyb3JNZXNzYWdlLGE9ZS5jbG91ZENvbnRyb2xDb25maWcscz1lLnZlcnNpb24saT1lLmV4cGlyZWRUaW1lO2lmKDA9PT1vKXtpZih0aGlzLl92ZXJzaW9uIT09cyl7dmFyIGM9bnVsbDt0cnl7Yz1KU09OLnBhcnNlKGEpfWNhdGNoKHNJKXtRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIEpTT04gcGFyc2UgZXJyb3I6XCIpLmNvbmNhdChhKSl9YyYmKHRoaXMuX2Nsb3VkQ29uZmlnLmNsZWFyKCksT2JqZWN0LmtleXMoYykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fY2xvdWRDb25maWcuc2V0KGUsY1tlXSl9KSksdGhpcy5fdmVyc2lvbj1zLHRoaXMuZW1pdElubmVyRXZlbnQoS18pKX10aGlzLl9leHBpcmVkVGltZT1EYXRlLm5vdygpKzFlMyppfWVsc2UgZ2Mobyk/KFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gSW52YWxpZCBtZXNzYWdlIGZvcm1hdDpcIiksZSksdGhpcy5fc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3IoMzZlNSkpOihRaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGVycm9yQ29kZTpcIikuY29uY2F0KG8sXCIgZXJyb3JNZXNzYWdlOlwiKS5jb25jYXQocikpLHRoaXMuX3NldEV4cGlyZWRUaW1lT25SZXNwb25zZUVycm9yKDEyZTQpKX19LHtrZXk6XCJfc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9leHBpcmVkVGltZT1EYXRlLm5vdygpK2V9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX2Nsb3VkQ29uZmlnLmNsZWFyKCksdGhpcy5fZXhwaXJlZFRpbWU9MCx0aGlzLl92ZXJzaW9uPTAsdGhpcy5faXNGZXRjaGluZz0hMX19XSksbn0oQWwpLEh5PWZ1bmN0aW9uKGUpe0FuKG4sZSk7dmFyIHQ9R24obik7ZnVuY3Rpb24gbihlKXt2YXIgbztyZXR1cm4geW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlB1bGxHcm91cE1lc3NhZ2VNb2R1bGVcIixvLl9yZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlTWFwPW5ldyBNYXAsby5QVUxMX0xJTUlUX0NPVU5UPTE1LG99cmV0dXJuIEVuKG4sW3trZXk6XCJzdGFydFB1bGxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLl9nZXROZWVkUHVsbENvbnZlcnNhdGlvbkxpc3QoKTt0aGlzLl9nZXRSZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlTGlzdCgpLnRoZW4oKGZ1bmN0aW9uKCl7dmFyIG49ZS5nZXRNb2R1bGUodWwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG89dC5jb252ZXJzYXRpb25JRCxyPW8ucmVwbGFjZShZbi5DT05WX0dST1VQLFwiXCIpLGE9bi5nZXRHcm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZShvKSxzPWUuX3JlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2VNYXAuZ2V0KHIpfHwwLGk9cy1hO1FpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuc3RhcnRQdWxsIGdyb3VwSUQ6XCIpLmNvbmNhdChyLFwiIGxvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZTpcIikuY29uY2F0KGEsXCIgXCIpK1wicmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZTpcIi5jb25jYXQocyxcIiBkaWZmOlwiKS5jb25jYXQoaSkpLGE+MCYmaT49MSYmaTwzMDAmJmUuX3B1bGxNaXNzaW5nTWVzc2FnZSh7Z3JvdXBJRDpyLGxvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZTphLHJlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2U6cyxkaWZmOml9KX0pKX0pKX19LHtrZXk6XCJfZ2V0TmVlZFB1bGxDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUodWwpLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZT09PVluLkNPTlZfR1JPVVAmJmUuZ3JvdXBQcm9maWxlLnR5cGUhPT1Zbi5HUlBfQVZDSEFUUk9PTX0pKX19LHtrZXk6XCJfZ2V0UmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZUxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKHNsKS5nZXRHcm91cExpc3QoKS50aGVuKChmdW5jdGlvbih0KXtmb3IodmFyIG49dC5kYXRhLmdyb3VwTGlzdCxvPXZvaWQgMD09PW4/W106bixyPTA7cjxvLmxlbmd0aDtyKyspe3ZhciBhPW9bcl0scz1hLmdyb3VwSUQsaT1hLm5leHRNZXNzYWdlU2VxO2lmKGEudHlwZSE9PVluLkdSUF9BVkNIQVRST09NKXt2YXIgYz1pLTE7ZS5fcmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZU1hcC5zZXQocyxjKX19fSkpfX0se2tleTpcIl9wdWxsTWlzc2luZ01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5sb2NhbExhc3RNZXNzYWdlU2VxdWVuY2Usbz1lLnJlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2Uscj1lLmRpZmY7ZS5jb3VudD1yPnRoaXMuUFVMTF9MSU1JVF9DT1VOVD90aGlzLlBVTExfTElNSVRfQ09VTlQ6cixlLnNlcXVlbmNlPXI+dGhpcy5QVUxMX0xJTUlUX0NPVU5UP24rdGhpcy5QVUxMX0xJTUlUX0NPVU5UOm4rcix0aGlzLl9nZXRHcm91cE1pc3NpbmdNZXNzYWdlKGUpLnRoZW4oKGZ1bmN0aW9uKGEpe2EubGVuZ3RoPjAmJihhWzBdLnNlcXVlbmNlKzE8PW8mJihlLmxvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZT1uK3QuUFVMTF9MSU1JVF9DT1VOVCxlLmRpZmY9ci10LlBVTExfTElNSVRfQ09VTlQsdC5fcHVsbE1pc3NpbmdNZXNzYWdlKGUpKSx0LmdldE1vZHVsZShzbCkub25OZXdHcm91cE1lc3NhZ2Uoe2RhdGFMaXN0OmEsaXNJbnN0YW50TWVzc2FnZTohMX0pKX0pKX19LHtrZXk6XCJfZ2V0R3JvdXBNaXNzaW5nTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1uZXcgZHAocGcpO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpnZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDplLmdyb3VwSUQsY291bnQ6ZS5jb3VudCxzZXF1ZW5jZTplLnNlcXVlbmNlfX0pLnRoZW4oKGZ1bmN0aW9uKG8pe3ZhciByPW8uZGF0YS5tZXNzYWdlTGlzdCxhPXZvaWQgMD09PXI/W106cjtyZXR1cm4gbi5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlLmdyb3VwSUQsXCIgY291bnQ6XCIpLmNvbmNhdChlLmNvdW50LFwiIHNlcXVlbmNlOlwiKS5jb25jYXQoZS5zZXF1ZW5jZSxcIiBtZXNzYWdlTGlzdCBsZW5ndGg6XCIpLmNvbmNhdChhLmxlbmd0aCkpLmVuZCgpLGF9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3QucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG89UG4odCwyKSxyPW9bMF0sYT1vWzFdO24uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpfSkpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9yZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLmNsZWFyKCl9fV0pLG59KEFsKSxqeT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt5bih0aGlzLGUpLHRoaXMuX2NsYXNzTmFtZT1cIkF2Z0UyRURlbGF5XCIsdGhpcy5fZTJlRGVsYXlBcnJheT1bXX1yZXR1cm4gRW4oZSxbe2tleTpcImFkZE1lc3NhZ2VEZWxheVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSRpKCktZTt0Pj0wJiZ0aGlzLl9lMmVEZWxheUFycmF5LnB1c2godCl9fSx7a2V5OlwiX2NhbGNBdmdcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKDA9PT10KXJldHVybiAwO3ZhciBuPTA7cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bis9ZX0pKSxXYyhuL3QsMSl9fSx7a2V5OlwiX2NhbGNDb3VudFdpdGhMaW1pdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZTJlRGVsYXlBcnJheSxuPWUubWluLG89ZS5tYXg7cmV0dXJuIHQuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gbjw9ZSYmZTxvfSkpLmxlbmd0aH19LHtrZXk6XCJfY2FsY1BlcmNlbnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPVdjKGUvdCoxMDAsMik7cmV0dXJuIG4+MTAwJiYobj0xMDApLG59fSx7a2V5OlwiX2NoZWNrRTJFRGVsYXlFeGNlcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWUuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZT50fSkpO2lmKG4ubGVuZ3RoPjApe3ZhciBvPW4ubGVuZ3RoLHI9TWF0aC5taW4uYXBwbHkoTWF0aCxVbihuKSksYT1NYXRoLm1heC5hcHBseShNYXRoLFVuKG4pKSxzPXRoaXMuX2NhbGNBdmcobixvKSxpPVdjKG8vZS5sZW5ndGgqMTAwLDIpO2lmKGk+NTApbmV3IGRwKEhwKS5zZXRNZXNzYWdlKFwibWVzc2FnZSBlMmUgZGVsYXkgZXhjZXB0aW9uLiBjb3VudDpcIi5jb25jYXQobyxcIiBtaW46XCIpLmNvbmNhdChyLFwiIG1heDpcIikuY29uY2F0KGEsXCIgYXZnOlwiKS5jb25jYXQocyxcIiBwZXJjZW50OlwiKS5jb25jYXQoaSkpLnNldExldmVsKFwid2FybmluZ1wiKS5lbmQoKX19fSx7a2V5OlwiZ2V0U3RhdFJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZTJlRGVsYXlBcnJheS5sZW5ndGg7aWYoMD09PWUpcmV0dXJuIG51bGw7dmFyIHQ9VW4odGhpcy5fZTJlRGVsYXlBcnJheSksbj10aGlzLl9jYWxjQ291bnRXaXRoTGltaXQoe2UyZURlbGF5QXJyYXk6dCxtaW46MCxtYXg6MX0pLG89dGhpcy5fY2FsY0NvdW50V2l0aExpbWl0KHtlMmVEZWxheUFycmF5OnQsbWluOjEsbWF4OjN9KSxyPXRoaXMuX2NhbGNQZXJjZW50KG4sZSksYT10aGlzLl9jYWxjUGVyY2VudChvLGUpLHM9dGhpcy5fY2FsY0F2Zyh0LGUpO3JldHVybiB0aGlzLl9jaGVja0UyRURlbGF5RXhjZXB0aW9uKHQsMyksdC5sZW5ndGg9MCx0aGlzLnJlc2V0KCkse3RvdGFsQ291bnQ6ZSxjb3VudExlc3NUaGFuMVNlY29uZDpuLHBlcmNlbnRPZkNvdW50TGVzc1RoYW4xU2Vjb25kOnIsY291bnRMZXNzVGhhbjNTZWNvbmQ6byxwZXJjZW50T2ZDb3VudExlc3NUaGFuM1NlY29uZDphLGF2Z0RlbGF5OnN9fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9lMmVEZWxheUFycmF5Lmxlbmd0aD0wfX1dKSxlfSgpLFd5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3luKHRoaXMsZSksdGhpcy5fY2xhc3NOYW1lPVwiQXZnUlRUXCIsdGhpcy5fcmVxdWVzdENvdW50PTAsdGhpcy5fcnR0QXJyYXk9W119cmV0dXJuIEVuKGUsW3trZXk6XCJhZGRSZXF1ZXN0Q291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlcXVlc3RDb3VudCs9MX19LHtrZXk6XCJhZGRSVFRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9ydHRBcnJheS5wdXNoKGUpfX0se2tleTpcIl9jYWxjVG90YWxDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcXVlc3RDb3VudH19LHtrZXk6XCJfY2FsY1JUVENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RofX0se2tleTpcIl9jYWxjU3VjY2Vzc1JhdGVPZlJlcXVlc3RcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKDA9PT10KXJldHVybiAwO3ZhciBuPVdjKGUvdCoxMDAsMik7cmV0dXJuIG4+MTAwJiYobj0xMDApLG59fSx7a2V5OlwiX2NhbGNBdmdcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKDA9PT10KXJldHVybiAwO3ZhciBuPTA7cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bis9ZX0pKSxwYXJzZUludChuL3QpfX0se2tleTpcIl9jYWxjTWF4XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCxVbih0aGlzLl9ydHRBcnJheSkpfX0se2tleTpcIl9jYWxjTWluXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5taW4uYXBwbHkoTWF0aCxVbih0aGlzLl9ydHRBcnJheSkpfX0se2tleTpcImdldFN0YXRSZXN1bHRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NhbGNUb3RhbENvdW50KCksdD1Vbih0aGlzLl9ydHRBcnJheSk7aWYoMD09PWUpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5fY2FsY1JUVENvdW50KHQpLG89dGhpcy5fY2FsY1N1Y2Nlc3NSYXRlT2ZSZXF1ZXN0KG4sZSkscj10aGlzLl9jYWxjQXZnKHQsbik7cmV0dXJuIFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0U3RhdFJlc3VsdCBtYXg6XCIpLmNvbmNhdCh0aGlzLl9jYWxjTWF4KCksXCIgbWluOlwiKS5jb25jYXQodGhpcy5fY2FsY01pbigpLFwiIGF2ZzpcIikuY29uY2F0KHIpKSx0aGlzLnJlc2V0KCkse3RvdGFsQ291bnQ6ZSxydHRDb3VudDpuLHN1Y2Nlc3NSYXRlT2ZSZXF1ZXN0Om8sYXZnUlRUOnJ9fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZXF1ZXN0Q291bnQ9MCx0aGlzLl9ydHRBcnJheS5sZW5ndGg9MH19XSksZX0oKSxZeT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt5bih0aGlzLGUpLHRoaXMuX21hcD1uZXcgTWFwfXJldHVybiBFbihlLFt7a2V5OlwiaW5pdE1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9tYXAuc2V0KGUse3RvdGFsQ291bnQ6MCxzdWNjZXNzQ291bnQ6MCxmYWlsZWRDb3VudE9mVXNlclNpZGU6MCxjb3N0QXJyYXk6W10sZmlsZVNpemVBcnJheTpbXX0pfSkpfX0se2tleTpcImFkZFRvdGFsQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hKGdjKGUpfHwhdGhpcy5fbWFwLmhhcyhlKSkmJih0aGlzLl9tYXAuZ2V0KGUpLnRvdGFsQ291bnQrPTEsITApfX0se2tleTpcImFkZFN1Y2Nlc3NDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEoZ2MoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKSYmKHRoaXMuX21hcC5nZXQoZSkuc3VjY2Vzc0NvdW50Kz0xLCEwKX19LHtrZXk6XCJhZGRGYWlsZWRDb3VudE9mVXNlclNpZGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hKGdjKGUpfHwhdGhpcy5fbWFwLmhhcyhlKSkmJih0aGlzLl9tYXAuZ2V0KGUpLmZhaWxlZENvdW50T2ZVc2VyU2lkZSs9MSwhMCl9fSx7a2V5OlwiYWRkQ29zdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIShnYyhlKXx8IXRoaXMuX21hcC5oYXMoZSkpJiYodGhpcy5fbWFwLmdldChlKS5jb3N0QXJyYXkucHVzaCh0KSwhMCl9fSx7a2V5OlwiYWRkRmlsZVNpemVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEoZ2MoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKSYmKHRoaXMuX21hcC5nZXQoZSkuZmlsZVNpemVBcnJheS5wdXNoKHQpLCEwKX19LHtrZXk6XCJfY2FsY1N1Y2Nlc3NSYXRlT2ZCdXNpbmVzc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGdjKGUpfHwhdGhpcy5fbWFwLmhhcyhlKSlyZXR1cm4tMTt2YXIgdD10aGlzLl9tYXAuZ2V0KGUpLG49V2ModC5zdWNjZXNzQ291bnQvdC50b3RhbENvdW50KjEwMCwyKTtyZXR1cm4gbj4xMDAmJihuPTEwMCksbn19LHtrZXk6XCJfY2FsY1N1Y2Nlc3NSYXRlT2ZQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGdjKGUpfHwhdGhpcy5fbWFwLmhhcyhlKSlyZXR1cm4tMTt2YXIgdD10aGlzLl9tYXAuZ2V0KGUpLG49dGhpcy5fY2FsY1N1Y2Nlc3NDb3VudE9mUGxhdGZvcm0oZSkvdC50b3RhbENvdW50KjEwMDtyZXR1cm4obj1XYyhuLDIpKT4xMDAmJihuPTEwMCksbn19LHtrZXk6XCJfY2FsY1RvdGFsQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2MoZSl8fCF0aGlzLl9tYXAuaGFzKGUpPy0xOnRoaXMuX21hcC5nZXQoZSkudG90YWxDb3VudH19LHtrZXk6XCJfY2FsY1N1Y2Nlc3NDb3VudE9mQnVzaW5lc3NcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2MoZSl8fCF0aGlzLl9tYXAuaGFzKGUpPy0xOnRoaXMuX21hcC5nZXQoZSkuc3VjY2Vzc0NvdW50fX0se2tleTpcIl9jYWxjU3VjY2Vzc0NvdW50T2ZQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGdjKGUpfHwhdGhpcy5fbWFwLmhhcyhlKSlyZXR1cm4tMTt2YXIgdD10aGlzLl9tYXAuZ2V0KGUpO3JldHVybiB0LnN1Y2Nlc3NDb3VudCt0LmZhaWxlZENvdW50T2ZVc2VyU2lkZX19LHtrZXk6XCJfY2FsY0F2Z1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBnYyhlKXx8IXRoaXMuX21hcC5oYXMoZSk/LTE6ZT09PW9wP3RoaXMuX2NhbGNBdmdTcGVlZChlKTp0aGlzLl9jYWxjQXZnQ29zdChlKX19LHtrZXk6XCJfY2FsY0F2Z0Nvc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tYXAuZ2V0KGUpLmNvc3RBcnJheS5sZW5ndGg7aWYoMD09PXQpcmV0dXJuIDA7dmFyIG49MDtyZXR1cm4gdGhpcy5fbWFwLmdldChlKS5jb3N0QXJyYXkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bis9ZX0pKSxwYXJzZUludChuL3QpfX0se2tleTpcIl9jYWxjQXZnU3BlZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD0wLG49MDtyZXR1cm4gdGhpcy5fbWFwLmdldChlKS5jb3N0QXJyYXkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dCs9ZX0pKSx0aGlzLl9tYXAuZ2V0KGUpLmZpbGVTaXplQXJyYXkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bis9ZX0pKSxwYXJzZUludCgxZTMqbi90KX19LHtrZXk6XCJnZXRTdGF0UmVzdWx0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY2FsY1RvdGFsQ291bnQoZSk7aWYoMD09PXQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5fY2FsY1N1Y2Nlc3NDb3VudE9mQnVzaW5lc3MoZSksbz10aGlzLl9jYWxjU3VjY2Vzc1JhdGVPZkJ1c2luZXNzKGUpLHI9dGhpcy5fY2FsY1N1Y2Nlc3NDb3VudE9mUGxhdGZvcm0oZSksYT10aGlzLl9jYWxjU3VjY2Vzc1JhdGVPZlBsYXRmb3JtKGUpLHM9dGhpcy5fY2FsY0F2ZyhlKTtyZXR1cm4gdGhpcy5yZXNldChlKSx7dG90YWxDb3VudDp0LHN1Y2Nlc3NDb3VudE9mQnVzaW5lc3M6bixzdWNjZXNzUmF0ZU9mQnVzaW5lc3M6byxzdWNjZXNzQ291bnRPZlBsYXRmb3JtOnIsc3VjY2Vzc1JhdGVPZlBsYXRmb3JtOmEsYXZnVmFsdWU6c319fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbihlKXtnYyhlKT90aGlzLl9tYXAuY2xlYXIoKTp0aGlzLl9tYXAuc2V0KGUse3RvdGFsQ291bnQ6MCxzdWNjZXNzQ291bnQ6MCxmYWlsZWRDb3VudE9mVXNlclNpZGU6MCxjb3N0QXJyYXk6W10sZmlsZVNpemVBcnJheTpbXX0pfX1dKSxlfSgpLCR5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3luKHRoaXMsZSksdGhpcy5fbGFzdE1hcD1uZXcgTWFwLHRoaXMuX2N1cnJlbnRNYXA9bmV3IE1hcH1yZXR1cm4gRW4oZSxbe2tleTpcImluaXRNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fbGFzdE1hcC5zZXQoZSxuZXcgTWFwKSx0Ll9jdXJyZW50TWFwLnNldChlLG5ldyBNYXApfSkpfX0se2tleTpcImFkZE1lc3NhZ2VTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5LG49ZS5tZXNzYWdlO2lmKGdjKHQpfHwhdGhpcy5fbGFzdE1hcC5oYXModCl8fCF0aGlzLl9jdXJyZW50TWFwLmhhcyh0KSlyZXR1cm4hMTt2YXIgbz1uLmNvbnZlcnNhdGlvbklELHI9bi5zZXF1ZW5jZSxhPW8ucmVwbGFjZShZbi5DT05WX0dST1VQLFwiXCIpO2lmKDA9PT10aGlzLl9sYXN0TWFwLmdldCh0KS5zaXplKXRoaXMuX2FkZEN1cnJlbnRNYXAoZSk7ZWxzZSBpZih0aGlzLl9sYXN0TWFwLmdldCh0KS5oYXMoYSkpe3ZhciBzPXRoaXMuX2xhc3RNYXAuZ2V0KHQpLmdldChhKSxpPXMubGVuZ3RoLTE7cj5zWzBdJiZyPHNbaV0/KHMucHVzaChyKSxzLnNvcnQoKSx0aGlzLl9sYXN0TWFwLmdldCh0KS5zZXQoYSxzKSk6dGhpcy5fYWRkQ3VycmVudE1hcChlKX1lbHNlIHRoaXMuX2FkZEN1cnJlbnRNYXAoZSk7cmV0dXJuITB9fSx7a2V5OlwiX2FkZEN1cnJlbnRNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmtleSxuPWUubWVzc2FnZSxvPW4uY29udmVyc2F0aW9uSUQscj1uLnNlcXVlbmNlLGE9by5yZXBsYWNlKFluLkNPTlZfR1JPVVAsXCJcIik7dGhpcy5fY3VycmVudE1hcC5nZXQodCkuaGFzKGEpfHx0aGlzLl9jdXJyZW50TWFwLmdldCh0KS5zZXQoYSxbXSksdGhpcy5fY3VycmVudE1hcC5nZXQodCkuZ2V0KGEpLnB1c2gocil9fSx7a2V5OlwiX2NvcHlEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWdjKGUpKXt0aGlzLl9sYXN0TWFwLnNldChlLG5ldyBNYXApO3ZhciB0LG49dGhpcy5fbGFzdE1hcC5nZXQoZSksbz1Cbih0aGlzLl9jdXJyZW50TWFwLmdldChlKSk7dHJ5e2ZvcihvLnMoKTshKHQ9by5uKCkpLmRvbmU7KXt2YXIgcj1Qbih0LnZhbHVlLDIpLGE9clswXSxzPXJbMV07bi5zZXQoYSxzKX19Y2F0Y2goaSl7by5lKGkpfWZpbmFsbHl7by5mKCl9bj1udWxsLHRoaXMuX2N1cnJlbnRNYXAuc2V0KGUsbmV3IE1hcCl9fX0se2tleTpcImdldFN0YXRSZXN1bHRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihnYyh0aGlzLl9jdXJyZW50TWFwLmdldChlKSl8fGdjKHRoaXMuX2xhc3RNYXAuZ2V0KGUpKSlyZXR1cm4gbnVsbDtpZigwPT09dGhpcy5fbGFzdE1hcC5nZXQoZSkuc2l6ZSlyZXR1cm4gdGhpcy5fY29weURhdGEoZSksbnVsbDt2YXIgdD0wLG49MDtpZih0aGlzLl9sYXN0TWFwLmdldChlKS5mb3JFYWNoKChmdW5jdGlvbihlLG8pe3ZhciByPVVuKGUudmFsdWVzKCkpLGE9ci5sZW5ndGgscz1yW2EtMV0tclswXSsxO3QrPXMsbis9YX0pKSwwPT09dClyZXR1cm4gbnVsbDt2YXIgbz1XYyhuL3QqMTAwLDIpO3JldHVybiBvPjEwMCYmKG89MTAwKSx0aGlzLl9jb3B5RGF0YShlKSx7dG90YWxDb3VudDp0LHN1Y2Nlc3NDb3VudE9mTWVzc2FnZVJlY2VpdmVkOm4sc3VjY2Vzc1JhdGVPZk1lc3NhZ2VSZWNlaXZlZDpvfX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudE1hcC5jbGVhcigpLHRoaXMuX2xhc3RNYXAuY2xlYXIoKX19XSksZX0oKSx6eT1mdW5jdGlvbihlKXtBbihuLGUpO3ZhciB0PUduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87eW4odGhpcyxuKSwobz10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlF1YWxpdHlTdGF0TW9kdWxlXCIsby5UQUc9XCJpbS1zc29sb2ctcXVhbGl0eS1zdGF0XCIsby5yZXBvcnRJbmRleD0wLG8ud2hvbGVQZXJpb2Q9ITEsby5fcXVhbGl0eUl0ZW1zPVtYZCxRZCxaZCxlcCx0cCxucCxvcCxycCxhcCxzcF0sby5fbWVzc2FnZVNlbnRJdGVtcz1bWmQsZXAsdHAsbnAsb3BdLG8uX21lc3NhZ2VSZWNlaXZlZEl0ZW1zPVtycCxhcCxzcF0sby5SRVBPUlRfSU5URVJWQUw9MTIwLG8uUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD1bXSxvLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPVtdLG8uX3N0YXRJbmZvQXJyPVtdLG8uX2F2Z1JUVD1uZXcgV3ksby5fYXZnRTJFRGVsYXk9bmV3IGp5LG8uX3JhdGVNZXNzYWdlU2VudD1uZXcgWXksby5fcmF0ZU1lc3NhZ2VSZWNlaXZlZD1uZXcgJHk7dmFyIHI9by5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpO3JldHVybiByLm9uKFZfLG8uX29uTG9naW5TdWNjZXNzLGJuKG8pKSxyLm9uKEtfLG8uX29uQ2xvdWRDb25maWdVcGRhdGVkLGJuKG8pKSxvfXJldHVybiBFbihuLFt7a2V5OlwiX29uTG9naW5TdWNjZXNzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3JhdGVNZXNzYWdlU2VudC5pbml0TWFwKHRoaXMuX21lc3NhZ2VTZW50SXRlbXMpLHRoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQuaW5pdE1hcCh0aGlzLl9tZXNzYWdlUmVjZWl2ZWRJdGVtcyk7dmFyIHQ9dGhpcy5nZXRNb2R1bGUoZGwpLG49dC5nZXRJdGVtKHRoaXMuVEFHLCExKTshSmMobikmJmZjKG4uZm9yRWFjaCkmJihRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbkxvZ2luU3VjY2Vzcy5nZXQgcXVhbGl0eSBzdGF0IGxvZyBpbiBzdG9yYWdlLCBudW1zPVwiKS5jb25jYXQobi5sZW5ndGgpKSxuLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UuX3N0YXRJbmZvQXJyLnB1c2godCl9KSksdC5yZW1vdmVJdGVtKHRoaXMuVEFHLCExKSl9fSx7a2V5OlwiX29uQ2xvdWRDb25maWdVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldENsb3VkQ29uZmlnKFwicV9ycHRfaW50ZXJ2YWxcIiksdD10aGlzLmdldENsb3VkQ29uZmlnKFwicV9ycHRfc2RrYXBwaWRfYmxcIiksbj10aGlzLmdldENsb3VkQ29uZmlnKFwicV9ycHRfdGlueWlkX3dsXCIpO2djKGUpfHwodGhpcy5SRVBPUlRfSU5URVJWQUw9TnVtYmVyKGUpKSxnYyh0KXx8KHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD10LnNwbGl0KFwiLFwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBOdW1iZXIoZSl9KSkpLGdjKG4pfHwodGhpcy5SRVBPUlRfVElOWUlEX1dISVRFTElTVD1uLnNwbGl0KFwiLFwiKSl9fSx7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5pc0xvZ2dlZEluKCkmJmUldGhpcy5SRVBPUlRfSU5URVJWQUw9PTAmJih0aGlzLndob2xlUGVyaW9kPSEwLHRoaXMuX3JlcG9ydCgpKX19LHtrZXk6XCJhZGRSZXF1ZXN0Q291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2F2Z1JUVC5hZGRSZXF1ZXN0Q291bnQoKX19LHtrZXk6XCJhZGRSVFRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9hdmdSVFQuYWRkUlRUKGUpfX0se2tleTpcImFkZE1lc3NhZ2VEZWxheVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2F2Z0UyRURlbGF5LmFkZE1lc3NhZ2VEZWxheShlKX19LHtrZXk6XCJhZGRUb3RhbENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZFRvdGFsQ291bnQoZSl8fFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZFRvdGFsQ291bnQgaW52YWxpZCBrZXk6XCIpLGUpfX0se2tleTpcImFkZFN1Y2Nlc3NDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3JhdGVNZXNzYWdlU2VudC5hZGRTdWNjZXNzQ291bnQoZSl8fFFpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZFN1Y2Nlc3NDb3VudCBpbnZhbGlkIGtleTpcIiksZSl9fSx7a2V5OlwiYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZEZhaWxlZENvdW50T2ZVc2VyU2lkZShlKXx8UWkud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlIGludmFsaWQga2V5OlwiKSxlKX19LHtrZXk6XCJhZGRDb3N0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9yYXRlTWVzc2FnZVNlbnQuYWRkQ29zdChlLHQpfHxRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRDb3N0IGludmFsaWQga2V5IG9yIGNvc3Q6XCIpLGUsdCl9fSx7a2V5OlwiYWRkRmlsZVNpemVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3JhdGVNZXNzYWdlU2VudC5hZGRGaWxlU2l6ZShlLHQpfHxRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRGaWxlU2l6ZSBpbnZhbGlkIGtleSBvciBzaXplOlwiKSxlLHQpfX0se2tleTpcImFkZE1lc3NhZ2VTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQuYWRkTWVzc2FnZVNlcXVlbmNlKGUpfHxRaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRNZXNzYWdlU2VxdWVuY2UgaW52YWxpZCBrZXk6XCIpLGUua2V5KX19LHtrZXk6XCJfZ2V0UXVhbGl0eUl0ZW1cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxuPXVwW3RoaXMuZ2V0TmV0d29ya1R5cGUoKV07Z2MobikmJihuPTgpO3ZhciBvPXtxdWFsaXR5VHlwZTppcFtlXSx0aW1lc3RhbXA6V2koKSxuZXR3b3JrVHlwZTpuLGV4dGVuc2lvbjpcIlwifTtzd2l0Y2goZSl7Y2FzZSBYZDp0PXRoaXMuX2F2Z1JUVC5nZXRTdGF0UmVzdWx0KCk7YnJlYWs7Y2FzZSBRZDp0PXRoaXMuX2F2Z0UyRURlbGF5LmdldFN0YXRSZXN1bHQoKTticmVhaztjYXNlIFpkOmNhc2UgZXA6Y2FzZSB0cDpjYXNlIG5wOmNhc2Ugb3A6dD10aGlzLl9yYXRlTWVzc2FnZVNlbnQuZ2V0U3RhdFJlc3VsdChlKTticmVhaztjYXNlIHJwOmNhc2UgYXA6Y2FzZSBzcDp0PXRoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQuZ2V0U3RhdFJlc3VsdChlKX1yZXR1cm4gbnVsbD09PXQ/bnVsbDpDbih7fSxvLHt9LHQpfX0se2tleTpcIl9yZXBvcnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49W10sbz1udWxsO2djKGUpP3RoaXMuX3F1YWxpdHlJdGVtcy5mb3JFYWNoKChmdW5jdGlvbihlKXtudWxsIT09KG89dC5fZ2V0UXVhbGl0eUl0ZW0oZSkpJiYoby5yZXBvcnRJbmRleD10LnJlcG9ydEluZGV4LG8ud2hvbGVQZXJpb2Q9dC53aG9sZVBlcmlvZCxuLnB1c2gobykpfSkpOm51bGwhPT0obz10aGlzLl9nZXRRdWFsaXR5SXRlbShlKSkmJihvLnJlcG9ydEluZGV4PXRoaXMucmVwb3J0SW5kZXgsby53aG9sZVBlcmlvZD10aGlzLndob2xlUGVyaW9kLG4ucHVzaChvKSksUWkuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9yZXBvcnRcIiksbiksdGhpcy5fc3RhdEluZm9BcnIubGVuZ3RoPjAmJihuPW4uY29uY2F0KHRoaXMuX3N0YXRJbmZvQXJyKSx0aGlzLl9zdGF0SW5mb0Fycj1bXSk7dmFyIHI9dGhpcy5nZXRNb2R1bGUobGwpLGE9ci5nZXRTREtBcHBJRCgpLHM9ci5nZXRUaW55SUQoKTtZYyh0aGlzLlJFUE9SVF9TREtBUFBJRF9CTEFDS0xJU1QsYSkmJiEkYyh0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNULHMpJiYobj1bXSksbi5sZW5ndGg+MCYmdGhpcy5fZG9SZXBvcnQobil9fSx7a2V5OlwiX2RvUmVwb3J0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXtoZWFkZXI6TG0odGhpcykscXVhbGl0eTplfTt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpQZCxyZXF1ZXN0RGF0YTpDbih7fSxuKX0pLnRoZW4oKGZ1bmN0aW9uKCl7dC5yZXBvcnRJbmRleCsrLHQud2hvbGVQZXJpb2Q9ITF9KSkuY2F0Y2goKGZ1bmN0aW9uKG4pe1FpLndhcm4oXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLl9kb1JlcG9ydCwgb25saW5lOlwiKS5jb25jYXQodC5nZXROZXR3b3JrVHlwZSgpLFwiIGVycm9yOlwiKSxuKSx0Ll9zdGF0SW5mb0Fycj10Ll9zdGF0SW5mb0Fyci5jb25jYXQoZSksdC5fZmx1c2hBdE9uY2UoKX0pKX19LHtrZXk6XCJfZmx1c2hBdE9uY2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TW9kdWxlKGRsKSx0PWUuZ2V0SXRlbSh0aGlzLlRBRywhMSksbj10aGlzLl9zdGF0SW5mb0FycjtpZihKYyh0KSlRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9mbHVzaEF0T25jZSBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksZS5zZXRJdGVtKHRoaXMuVEFHLG4sITAsITEpO2Vsc2V7dmFyIG89bi5jb25jYXQodCk7by5sZW5ndGg+MTAmJihvPW8uc2xpY2UoMCwxMCkpLFFpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLmNsYXNzTmFtZSxcIi5fZmx1c2hBdE9uY2UgY291bnQ6XCIpLmNvbmNhdChvLmxlbmd0aCkpLGUuc2V0SXRlbSh0aGlzLlRBRyxvLCEwLCExKX10aGlzLl9zdGF0SW5mb0Fycj1bXX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fcmVwb3J0KCksdGhpcy5yZXBvcnRJbmRleD0wLHRoaXMud2hvbGVQZXJpb2Q9ITEsdGhpcy5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPVtdLHRoaXMuUkVQT1JUX1RJTllJRF9XSElURUxJU1Q9W10sdGhpcy5fYXZnUlRULnJlc2V0KCksdGhpcy5fYXZnRTJFRGVsYXkucmVzZXQoKSx0aGlzLl9yYXRlTWVzc2FnZVNlbnQucmVzZXQoKSx0aGlzLl9yYXRlTWVzc2FnZVJlY2VpdmVkLnJlc2V0KCl9fV0pLG59KEFsKSxKeT1mdW5jdGlvbihlKXtBbihuLGUpO3ZhciB0PUduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87cmV0dXJuIHluKHRoaXMsbiksKG89dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJXb3JrZXJUaW1lck1vZHVsZVwiLG8uX2lzV29ya2VyRW5hYmxlZD0hMCxvLl93b3JrZXJUaW1lcj1udWxsLG8uX2luaXQoKSxvLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oS18sby5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsYm4obykpLG99cmV0dXJuIEVuKG4sW3trZXk6XCJpc1dvcmtlckVuYWJsZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1dvcmtlckVuYWJsZWQmJmJpfX0se2tleTpcInN0YXJ0V29ya2VyVGltZXJcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RhcnRXb3JrZXJUaW1lclwiKSksdGhpcy5fd29ya2VyVGltZXImJnRoaXMuX3dvcmtlclRpbWVyLnBvc3RNZXNzYWdlKFwic3RhcnRcIil9fSx7a2V5Olwic3RvcFdvcmtlclRpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnN0b3BXb3JrZXJUaW1lclwiKSksdGhpcy5fd29ya2VyVGltZXImJnRoaXMuX3dvcmtlclRpbWVyLnBvc3RNZXNzYWdlKFwic3RvcFwiKX19LHtrZXk6XCJfaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoYmkpe3ZhciBlPVVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoWydsZXQgaW50ZXJ2YWwgPSAtMTtvbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgeyAgaWYgKGV2ZW50LmRhdGEgPT09IFwic3RhcnRcIikgeyAgICBpZiAoaW50ZXJ2YWwgPiAwKSB7ICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7ICAgIH0gICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7ICAgICAgcG9zdE1lc3NhZ2UoXCJcIik7ICAgIH0sIDEwMDApICB9IGVsc2UgaWYgKGV2ZW50LmRhdGEgPT09IFwic3RvcFwiKSB7ICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOyAgICBpbnRlcnZhbCA9IC0xOyAgfX07J10se3R5cGU6XCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0OyBjaGFyc2V0PXV0Zi04XCJ9KSk7dGhpcy5fd29ya2VyVGltZXI9bmV3IFdvcmtlcihlKTt2YXIgdD10aGlzO3RoaXMuX3dvcmtlclRpbWVyLm9ubWVzc2FnZT1mdW5jdGlvbigpe3QuX21vZHVsZU1hbmFnZXIub25DaGVja1RpbWVyKCl9fX19LHtrZXk6XCJfb25DbG91ZENvbmZpZ1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJlbmFibGVfd29ya2VyXCIpO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uQ2xvdWRDb25maWdVcGRhdGVkIGVuYWJsZVdvcmtlcjpcIikuY29uY2F0KGUpKSxcIjFcIj09PWU/IXRoaXMuX2lzV29ya2VyRW5hYmxlZCYmYmkmJih0aGlzLl9pc1dvcmtlckVuYWJsZWQ9ITAsdGhpcy5zdGFydFdvcmtlclRpbWVyKCksdGhpcy5fbW9kdWxlTWFuYWdlci5vbldvcmtlclRpbWVyRW5hYmxlZCgpKTp0aGlzLl9pc1dvcmtlckVuYWJsZWQmJmJpJiYodGhpcy5faXNXb3JrZXJFbmFibGVkPSExLHRoaXMuc3RvcFdvcmtlclRpbWVyKCksdGhpcy5fbW9kdWxlTWFuYWdlci5vbldvcmtlclRpbWVyRGlzYWJsZWQoKSl9fSx7a2V5OlwidGVybWluYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnRlcm1pbmF0ZVwiKSksdGhpcy5fd29ya2VyVGltZXImJih0aGlzLl93b3JrZXJUaW1lci50ZXJtaW5hdGUoKSx0aGlzLl93b3JrZXJUaW1lcj1udWxsKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSl9fV0pLG59KEFsKSxYeT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt5bih0aGlzLGUpLHRoaXMuX2NsYXNzTmFtZT1cIlB1cmNoYXNlZEZlYXR1cmVIYW5kbGVyXCIsdGhpcy5fcHVyY2hhc2VkRmVhdHVyZU1hcD1uZXcgTWFwfXJldHVybiBFbihlLFt7a2V5OlwiaXNWYWxpZFB1cmNoYXNlQml0c1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcInN0cmluZ1wiPT10eXBlb2YgZSYmZS5sZW5ndGg+PTEmJmUubGVuZ3RoPD02NCYmL1swMV17MSw2NH0vLnRlc3QoZSl9fSx7a2V5OlwicGFyc2VQdXJjaGFzZUJpdHNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucGFyc2VQdXJjaGFzZUJpdHNcIik7aWYodGhpcy5pc1ZhbGlkUHVyY2hhc2VCaXRzKGUpKXt0aGlzLl9wdXJjaGFzZWRGZWF0dXJlTWFwLmNsZWFyKCk7Zm9yKHZhciBuPU9iamVjdC52YWx1ZXModGkpLG89bnVsbCxyPWUubGVuZ3RoLTEsYT0wO3I+PTA7ci0tLGErKylvPWE8MzI/bmV3IEJzKDAsTWF0aC5wb3coMixhKSkudG9TdHJpbmcoKTpuZXcgQnMoTWF0aC5wb3coMixhLTMyKSwwKS50b1N0cmluZygpLC0xIT09bi5pbmRleE9mKG8pJiYoXCIxXCI9PT1lW3JdP3RoaXMuX3B1cmNoYXNlZEZlYXR1cmVNYXAuc2V0KG8sITApOnRoaXMuX3B1cmNoYXNlZEZlYXR1cmVNYXAuc2V0KG8sITEpKX1lbHNlIFFpLndhcm4oXCJcIi5jb25jYXQodCxcIiBpbnZhbGlkIHB1cmNoYXNlIGJpdHM6XCIpLmNvbmNhdChlKSl9fSx7a2V5OlwiaGFzUHVyY2hhc2VkRmVhdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5fcHVyY2hhc2VkRmVhdHVyZU1hcC5nZXQoZSl9fSx7a2V5OlwiY2xlYXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3B1cmNoYXNlZEZlYXR1cmVNYXAuY2xlYXIoKX19XSksZX0oKSxReT1mdW5jdGlvbihlKXtBbihuLGUpO3ZhciB0PUduKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIG87cmV0dXJuIHluKHRoaXMsbiksKG89dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJDb21tZXJjaWFsQ29uZmlnTW9kdWxlXCIsby5fZXhwaXJlZFRpbWU9MCxvLl9pc0ZldGNoaW5nPSExLG8uX3B1cmNoYXNlZEZlYXR1cmVIYW5kbGVyPW5ldyBYeSxvfXJldHVybiBFbihuLFt7a2V5OlwiX2NhbkZldGNoXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xvZ2dlZEluKCk/IXRoaXMuX2lzRmV0Y2hpbmcmJkRhdGUubm93KCk+PXRoaXMuX2V4cGlyZWRUaW1lOih0aGlzLl9leHBpcmVkVGltZT1EYXRlLm5vdygpKzJlMywhMSl9fSx7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fY2FuRmV0Y2goKSYmdGhpcy5mZXRjaENvbmZpZygpfX0se2tleTpcImZldGNoQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5fY2FuRmV0Y2goKSxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5mZXRjaENvbmZpZ1wiKTtpZihRaS5sb2coXCJcIi5jb25jYXQobixcIiBjYW5GZXRjaDpcIikuY29uY2F0KHQpKSx0KXt2YXIgbz1uZXcgZHAoeGcpO28uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKTt2YXIgcj10aGlzLmdldE1vZHVsZShsbCkuZ2V0U0RLQXBwSUQoKTt0aGlzLl9pc0ZldGNoaW5nPSEwLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOldkLHJlcXVlc3REYXRhOntTREtBcHBJRDpyfX0pLnRoZW4oKGZ1bmN0aW9uKHQpe28uc2V0TWVzc2FnZShcInB1cmNoYXNlQml0czpcIi5jb25jYXQodC5kYXRhLnB1cmNoYXNlQml0cykpLmVuZCgpLFFpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLlwiKSksZS5fcGFyc2VDb25maWcodC5kYXRhKSxlLl9pc0ZldGNoaW5nPSExfSkpLmNhdGNoKChmdW5jdGlvbih0KXtlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPVBuKGUsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKHQscixhKS5lbmQoKX0pKSxlLl9pc0ZldGNoaW5nPSExfSkpfX19LHtrZXk6XCJvblB1c2hlZENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblB1c2hlZENvbmZpZ1wiKTtRaS5sb2coXCJcIi5jb25jYXQodCkpLG5ldyBkcChWZykuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwicHVyY2hhc2VCaXRzOlwiLmNvbmNhdChlLnB1cmNoYXNlQml0cykpLmVuZCgpLHRoaXMuX3BhcnNlQ29uZmlnKGUpfX0se2tleTpcIl9wYXJzZUNvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fcGFyc2VDb25maWdcIiksbj1lLmVycm9yQ29kZSxvPWUuZXJyb3JNZXNzYWdlLHI9ZS5wdXJjaGFzZUJpdHMsYT1lLmV4cGlyZWRUaW1lOzA9PT1uPyh0aGlzLl9wdXJjaGFzZWRGZWF0dXJlSGFuZGxlci5wYXJzZVB1cmNoYXNlQml0cyhyKSx0aGlzLl9leHBpcmVkVGltZT1EYXRlLm5vdygpKzFlMyphKTpnYyhuKT8oUWkubG9nKFwiXCIuY29uY2F0KHQsXCIgZmFpbGVkLiBJbnZhbGlkIG1lc3NhZ2UgZm9ybWF0OlwiKSxlKSx0aGlzLl9zZXRFeHBpcmVkVGltZU9uUmVzcG9uc2VFcnJvcigzNmU1KSk6KFFpLmVycm9yKFwiXCIuY29uY2F0KHQsXCIgZXJyb3JDb2RlOlwiKS5jb25jYXQobixcIiBlcnJvck1lc3NhZ2U6XCIpLmNvbmNhdChvKSksdGhpcy5fc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3IoMTJlNCkpfX0se2tleTpcIl9zZXRFeHBpcmVkVGltZU9uUmVzcG9uc2VFcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2V4cGlyZWRUaW1lPURhdGUubm93KCkrZX19LHtrZXk6XCJoYXNQdXJjaGFzZWRGZWF0dXJlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3B1cmNoYXNlZEZlYXR1cmVIYW5kbGVyLmhhc1B1cmNoYXNlZEZlYXR1cmUoZSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX2V4cGlyZWRUaW1lPTAsdGhpcy5faXNGZXRjaGluZz0hMSx0aGlzLl9wdXJjaGFzZWRGZWF0dXJlSGFuZGxlci5jbGVhcigpfX1dKSxufShBbCksWnk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSk7dmFyIG49bmV3IGRwKHBwKTt0aGlzLl9jbGFzc05hbWU9XCJNb2R1bGVNYW5hZ2VyXCIsdGhpcy5faXNSZWFkeT0hMSx0aGlzLl9yZWFzb249emQuVVNFUl9OT1RfTE9HR0VEX0lOLHRoaXMuX3N0YXJ0TG9naW5Ucz0wLHRoaXMuX21vZHVsZU1hcD1uZXcgTWFwLHRoaXMuX2lubmVyRW1pdHRlcj1udWxsLHRoaXMuX291dGVyRW1pdHRlcj1udWxsLHRoaXMuX2NoZWNrQ291bnQ9MCx0aGlzLl9jaGVja1RpbWVyPS0xLHRoaXMuX21vZHVsZU1hcC5zZXQobGwsbmV3IERtKHRoaXMsdCkpLHRoaXMuX21vZHVsZU1hcC5zZXQoQ2wsbmV3IFF5KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KElsLG5ldyBCeSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChFbCxuZXcgSnkodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoU2wsbmV3IHp5KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KE1sLG5ldyBQeSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldCh2bCxuZXcgVnkodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQobmwsbmV3IE5tKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KG9sLG5ldyBCbSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChybCxuZXcgQW0odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoYWwsbmV3IFJfKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KHVsLG5ldyBzbSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChzbCxuZXcgeW0odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoY2wsbmV3IEVtKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGRsLG5ldyBPbSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChwbCxuZXcgYm0odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoZ2wsbmV3IFBtKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGhsLG5ldyBGbSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChmbCxuZXcgcW0odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoX2wsbmV3IEhtKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KG1sLG5ldyBqbSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldCh5bCxuZXcgS3kodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoVGwsbmV3IEh5KHRoaXMpKSx0aGlzLl9ldmVudFRocm90dGxlTWFwPW5ldyBNYXA7dmFyIG89dC5pbnN0YW5jZUlELHI9dC5vdmVyc2VhLGE9dC5TREtBcHBJRCxzPVwiaW5zdGFuY2VJRDpcIi5jb25jYXQobyxcIiBTREtBcHBJRDpcIikuY29uY2F0KGEsXCIgaG9zdDpcIikuY29uY2F0KEtjKCksXCIgb3ZlcnNlYTpcIikuY29uY2F0KHIsXCIgaW5Ccm93c2VyOlwiKS5jb25jYXQoZ2ksXCIgaW5NaW5pQXBwOlwiKS5jb25jYXQocGkpK1wiIHdvcmtlckF2YWlsYWJsZTpcIi5jb25jYXQoYmksXCIgVXNlckFnZW50OlwiKS5jb25jYXQoX2kpO2RwLmJpbmRFdmVudFN0YXRNb2R1bGUodGhpcy5fbW9kdWxlTWFwLmdldChwbCkpLG4uc2V0TWVzc2FnZShcIlwiLmNvbmNhdChzLFwiIFwiKS5jb25jYXQoZnVuY3Rpb24oKXt2YXIgZT1cIlwiO2lmKHBpKXRyeXt2YXIgdD1oaS5nZXRTeXN0ZW1JbmZvU3luYygpLG49dC5tb2RlbCxvPXQudmVyc2lvbixyPXQuc3lzdGVtLGE9dC5wbGF0Zm9ybSxzPXQuU0RLVmVyc2lvbjtlPVwibW9kZWw6XCIuY29uY2F0KG4sXCIgdmVyc2lvbjpcIikuY29uY2F0KG8sXCIgc3lzdGVtOlwiKS5jb25jYXQocixcIiBwbGF0Zm9ybTpcIikuY29uY2F0KGEsXCIgU0RLVmVyc2lvbjpcIikuY29uY2F0KHMpfWNhdGNoKHNJKXtlPVwiXCJ9cmV0dXJuIGV9KCkpKS5lbmQoKSxRaS5pbmZvKFwiU0RLIFwiLmNvbmNhdChzKSksdGhpcy5fcmVhZHlMaXN0PXZvaWQgMCx0aGlzLl9zc29Mb2dGb3JSZWFkeT1udWxsLHRoaXMuX2luaXRSZWFkeUxpc3QoKX1yZXR1cm4gRW4oZSxbe2tleTpcIl9zdGFydFRpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2R1bGVNYXAuZ2V0KEVsKSx0PWUuaXNXb3JrZXJFbmFibGVkKCk7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zdGFydFRpbWVyIGlzV29ya2VyRW5hYmxlZDpcIikuY29uY2F0KHQsXCIgc2VlZDpcIikuY29uY2F0KHRoaXMuX2NoZWNrVGltZXIpKSx0P2Uuc3RhcnRXb3JrZXJUaW1lcigpOnRoaXMuX3N0YXJ0TWFpblRocmVhZFRpbWVyKCl9fSx7a2V5OlwiX3N0YXJ0TWFpblRocmVhZFRpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9zdGFydE1haW5UaHJlYWRUaW1lclwiKSksdGhpcy5fY2hlY2tUaW1lcjwwJiYodGhpcy5fY2hlY2tUaW1lcj1zZXRJbnRlcnZhbCh0aGlzLm9uQ2hlY2tUaW1lci5iaW5kKHRoaXMpLDFlMykpfX0se2tleTpcInN0b3BUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kdWxlTWFwLmdldChFbCksdD1lLmlzV29ya2VyRW5hYmxlZCgpO1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RvcFRpbWVyIGlzV29ya2VyRW5hYmxlZDpcIikuY29uY2F0KHQsXCIgc2VlZDpcIikuY29uY2F0KHRoaXMuX2NoZWNrVGltZXIpKSx0P2Uuc3RvcFdvcmtlclRpbWVyKCk6dGhpcy5fc3RvcE1haW5UaHJlYWRUaW1lcigpfX0se2tleTpcIl9zdG9wTWFpblRocmVhZFRpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9zdG9wTWFpblRocmVhZFRpbWVyXCIpKSx0aGlzLl9jaGVja1RpbWVyPjAmJihjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVGltZXIpLHRoaXMuX2NoZWNrVGltZXI9LTEsdGhpcy5fY2hlY2tDb3VudD0wKX19LHtrZXk6XCJfc3RvcE1haW5UaHJlYWRTb2NrZXRcIix2YWx1ZTpmdW5jdGlvbigpe1FpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3N0b3BNYWluVGhyZWFkU29ja2V0XCIpKTt2YXIgZT10aGlzLl9tb2R1bGVNYXAuZ2V0KE1sKTtlLnNldElzV29ya2VyRW5hYmxlZCghMCksZS5yZUNvbm5lY3QoKX19LHtrZXk6XCJfc3RhcnRNYWluVGhyZWFkU29ja2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9zdGFydE1haW5UaHJlYWRTb2NrZXRcIikpO3ZhciBlPXRoaXMuX21vZHVsZU1hcC5nZXQoTWwpO2Uuc2V0SXNXb3JrZXJFbmFibGVkKCExKSxlLnJlQ29ubmVjdCgpfX0se2tleTpcIm9uV29ya2VyVGltZXJFbmFibGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uV29ya2VyVGltZXJFbmFibGVkLCBkaXNhYmxlIG1haW4gdGhyZWFkIHRpbWVyIGFuZCBzb2NrZXRcIikpLHRoaXMuX3N0b3BNYWluVGhyZWFkVGltZXIoKSx0aGlzLl9zdG9wTWFpblRocmVhZFNvY2tldCgpfX0se2tleTpcIm9uV29ya2VyVGltZXJEaXNhYmxlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7UWkubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbldvcmtlclRpbWVyRGlzYWJsZWQsIGVuYWJsZSBtYWluIHRocmVhZCB0aW1lciBhbmQgc29ja2V0XCIpKSx0aGlzLl9zdGFydE1haW5UaHJlYWRUaW1lcigpLHRoaXMuX3N0YXJ0TWFpblRocmVhZFNvY2tldCgpfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY2hlY2tDb3VudCs9MTt2YXIgZSx0PUJuKHRoaXMuX21vZHVsZU1hcCk7dHJ5e2Zvcih0LnMoKTshKGU9dC5uKCkpLmRvbmU7KXt2YXIgbj1QbihlLnZhbHVlLDIpWzFdO24ub25DaGVja1RpbWVyJiZuLm9uQ2hlY2tUaW1lcih0aGlzLl9jaGVja0NvdW50KX19Y2F0Y2gobyl7dC5lKG8pfWZpbmFsbHl7dC5mKCl9fX0se2tleTpcIl9pbml0UmVhZHlMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3JlYWR5TGlzdD1bdGhpcy5fbW9kdWxlTWFwLmdldChubCksdGhpcy5fbW9kdWxlTWFwLmdldCh1bCldLHRoaXMuX3JlYWR5TGlzdC5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnJlYWR5KChmdW5jdGlvbigpe3JldHVybiBlLl9vbk1vZHVsZVJlYWR5KCl9KSl9KSl9fSx7a2V5OlwiX29uTW9kdWxlUmVhZHlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSEwO2lmKHRoaXMuX3JlYWR5TGlzdC5mb3JFYWNoKChmdW5jdGlvbih0KXt0LmlzUmVhZHkoKXx8KGU9ITEpfSkpLGUmJiF0aGlzLl9pc1JlYWR5KXt0aGlzLl9pc1JlYWR5PSEwLHRoaXMuX291dGVyRW1pdHRlci5lbWl0KFduLlNES19SRUFEWSk7dmFyIHQ9RGF0ZS5ub3coKS10aGlzLl9zdGFydExvZ2luVHM7UWkud2FybihcIlNESyBpcyByZWFkeS4gY29zdCBcIi5jb25jYXQodCxcIiBtc1wiKSksdGhpcy5fc3RhcnRMb2dpblRzPURhdGUubm93KCk7dmFyIG49dGhpcy5fbW9kdWxlTWFwLmdldChnbCkuZ2V0TmV0d29ya1R5cGUoKSxvPXRoaXMuX3Nzb0xvZ0ZvclJlYWR5LmdldFN0YXJ0VHMoKStqaTt0aGlzLl9zc29Mb2dGb3JSZWFkeS5zZXROZXR3b3JrVHlwZShuKS5zZXRNZXNzYWdlKHQpLnN0YXJ0KG8pLmVuZCgpfX19LHtrZXk6XCJsb2dpblwiLHZhbHVlOmZ1bmN0aW9uKCl7MD09PXRoaXMuX3N0YXJ0TG9naW5UcyYmKFlpKCksdGhpcy5fc3RhcnRMb2dpblRzPURhdGUubm93KCksdGhpcy5fc3RhcnRUaW1lcigpLHRoaXMuX21vZHVsZU1hcC5nZXQoZ2wpLnN0YXJ0KCksdGhpcy5fc3NvTG9nRm9yUmVhZHk9bmV3IGRwKGdwKSx0aGlzLl9yZWFzb249emQuTE9HR0lOR19JTil9fSx7a2V5Olwib25Mb2dpbkZhaWxlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3RhcnRMb2dpblRzPTB9fSx7a2V5OlwiZ2V0T3V0ZXJFbWl0dGVySW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fb3V0ZXJFbWl0dGVyJiYodGhpcy5fb3V0ZXJFbWl0dGVyPW5ldyBVbSxOXyh0aGlzLl9vdXRlckVtaXR0ZXIpLHRoaXMuX291dGVyRW1pdHRlci5fZW1pdD10aGlzLl9vdXRlckVtaXR0ZXIuZW1pdCx0aGlzLl9vdXRlckVtaXR0ZXIuZW1pdD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYoZT09PVduLkNPTlZFUlNBVElPTl9MSVNUX1VQREFURUR8fGU9PT1Xbi5GUklFTkRfTElTVF9VUERBVEVEfHxlPT09V24uR1JPVVBfTElTVF9VUERBVEVEKWlmKHRoaXMuX2V2ZW50VGhyb3R0bGVNYXAuaGFzKGUpKXt2YXIgbz1EYXRlLm5vdygpLHI9dGhpcy5fZXZlbnRUaHJvdHRsZU1hcC5nZXQoZSk7by1yLmxhc3Q8MWUzPyhyLnRpbWVvdXRJRCYmY2xlYXJUaW1lb3V0KHIudGltZW91dElEKSxyLnRpbWVvdXRJRD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3IubGFzdD1vLG4uX291dGVyRW1pdHRlci5fZW1pdC5hcHBseShuLl9vdXRlckVtaXR0ZXIsW2Use25hbWU6ZSxkYXRhOm4uX2dldEV2ZW50RGF0YShlKX1dKX0pLDUwMCkpOihyLmxhc3Q9byx0aGlzLl9vdXRlckVtaXR0ZXIuX2VtaXQuYXBwbHkodGhpcy5fb3V0ZXJFbWl0dGVyLFtlLHtuYW1lOmUsZGF0YTp0aGlzLl9nZXRFdmVudERhdGEoZSl9XSkpfWVsc2UgdGhpcy5fZXZlbnRUaHJvdHRsZU1hcC5zZXQoZSx7bGFzdDpEYXRlLm5vdygpLHRpbWVvdXRJRDotMX0pLHRoaXMuX291dGVyRW1pdHRlci5fZW1pdC5hcHBseSh0aGlzLl9vdXRlckVtaXR0ZXIsW2Use25hbWU6ZSxkYXRhOnRoaXMuX2dldEV2ZW50RGF0YShlKX1dKTtlbHNlIHRoaXMuX291dGVyRW1pdHRlci5fZW1pdC5hcHBseSh0aGlzLl9vdXRlckVtaXR0ZXIsW2Use25hbWU6ZSxkYXRhOmFyZ3VtZW50c1sxXX1dKX0uYmluZCh0aGlzKSksdGhpcy5fb3V0ZXJFbWl0dGVyfX0se2tleTpcIl9nZXRFdmVudERhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZT09PVduLkNPTlZFUlNBVElPTl9MSVNUX1VQREFURUQ/dGhpcy5fbW9kdWxlTWFwLmdldCh1bCkuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCk6ZT09PVduLkZSSUVORF9MSVNUX1VQREFURUQ/dGhpcy5fbW9kdWxlTWFwLmdldChpbCkuZ2V0TG9jYWxGcmllbmRMaXN0KCExKTplPT09V24uR1JPVVBfTElTVF9VUERBVEVEP3RoaXMuX21vZHVsZU1hcC5nZXQoc2wpLmdldExvY2FsR3JvdXBMaXN0KCk6dm9pZCAwfX0se2tleTpcImdldElubmVyRW1pdHRlckluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX2lubmVyRW1pdHRlciYmKHRoaXMuX2lubmVyRW1pdHRlcj1uZXcgVW0sdGhpcy5faW5uZXJFbWl0dGVyLl9lbWl0PXRoaXMuX2lubmVyRW1pdHRlci5lbWl0LHRoaXMuX2lubmVyRW1pdHRlci5lbWl0PWZ1bmN0aW9uKGUsdCl7dmFyIG47ZGMoYXJndW1lbnRzWzFdKSYmYXJndW1lbnRzWzFdLmRhdGE/KFFpLndhcm4oXCJpbm5lciBldmVudERhdGEgaGFzIGRhdGEgcHJvcGVydHksIHBsZWFzZSBjaGVjayFcIiksbj1bZSx7bmFtZTphcmd1bWVudHNbMF0sZGF0YTphcmd1bWVudHNbMV0uZGF0YX1dKTpuPVtlLHtuYW1lOmFyZ3VtZW50c1swXSxkYXRhOmFyZ3VtZW50c1sxXX1dLHRoaXMuX2lubmVyRW1pdHRlci5fZW1pdC5hcHBseSh0aGlzLl9pbm5lckVtaXR0ZXIsbil9LmJpbmQodGhpcykpLHRoaXMuX2lubmVyRW1pdHRlcn19LHtrZXk6XCJoYXNNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFwLmhhcyhlKX19LHtrZXk6XCJnZXRNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFwLmdldChlKX19LHtrZXk6XCJpc1JlYWR5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNSZWFkeX19LHtrZXk6XCJnZXROb3RSZWFkeVJlYXNvblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlYXNvbn19LHtrZXk6XCJzZXROb3RSZWFkeVJlYXNvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3JlYXNvbj1lfX0se2tleTpcIm9uRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXtRaS53YXJuKFwiT29wcyEgY29kZTpcIi5jb25jYXQoZS5jb2RlLFwiIG1lc3NhZ2U6XCIpLmNvbmNhdChlLm1lc3NhZ2UpKSxuZXcgZHAoS2cpLnNldE1lc3NhZ2UoXCJjb2RlOlwiLmNvbmNhdChlLmNvZGUsXCIgbWVzc2FnZTpcIikuY29uY2F0KGUubWVzc2FnZSkpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TW9kdWxlKGdsKS5nZXROZXR3b3JrVHlwZSgpKS5zZXRMZXZlbChcImVycm9yXCIpLmVuZCgpLHRoaXMuZ2V0T3V0ZXJFbWl0dGVySW5zdGFuY2UoKS5lbWl0KFduLkVSUk9SLGUpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtRaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSxZaSgpO3ZhciBlLHQ9Qm4odGhpcy5fbW9kdWxlTWFwKTt0cnl7Zm9yKHQucygpOyEoZT10Lm4oKSkuZG9uZTspe3ZhciBuPVBuKGUudmFsdWUsMilbMV07bi5yZXNldCYmbi5yZXNldCgpfX1jYXRjaChzKXt0LmUocyl9ZmluYWxseXt0LmYoKX10aGlzLl9zdGFydExvZ2luVHM9MCx0aGlzLl9pbml0UmVhZHlMaXN0KCksdGhpcy5faXNSZWFkeT0hMSx0aGlzLnN0b3BUaW1lcigpLHRoaXMuX291dGVyRW1pdHRlci5lbWl0KFduLlNES19OT1RfUkVBRFkpO3ZhciBvLHI9Qm4odGhpcy5fZXZlbnRUaHJvdHRsZU1hcCk7dHJ5e2ZvcihyLnMoKTshKG89ci5uKCkpLmRvbmU7KXt2YXIgYT1QbihvLnZhbHVlLDIpWzFdO2EudGltZW91dElEJiZjbGVhclRpbWVvdXQoYS50aW1lb3V0SUQpfX1jYXRjaChzKXtyLmUocyl9ZmluYWxseXtyLmYoKX10aGlzLl9ldmVudFRocm90dGxlTWFwLmNsZWFyKCl9fV0pLGV9KCksZUk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7eW4odGhpcyxlKSx0aGlzLl9mdW5jTWFwPW5ldyBNYXB9cmV0dXJuIEVuKGUsW3trZXk6XCJkZWZlbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06dm9pZCAwO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiBudWxsO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbnVsbDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXJldHVybiBudWxsO2lmKHRoaXMuX2Z1bmNNYXAuaGFzKGUpJiZ0aGlzLl9mdW5jTWFwLmdldChlKS5oYXModCkpcmV0dXJuIHRoaXMuX2Z1bmNNYXAuZ2V0KGUpLmdldCh0KTt0aGlzLl9mdW5jTWFwLmhhcyhlKXx8dGhpcy5fZnVuY01hcC5zZXQoZSxuZXcgTWFwKTt2YXIgbz1udWxsO3JldHVybiB0aGlzLl9mdW5jTWFwLmdldChlKS5oYXModCk/bz10aGlzLl9mdW5jTWFwLmdldChlKS5nZXQodCk6KG89dGhpcy5fcGFjayhlLHQsbiksdGhpcy5fZnVuY01hcC5nZXQoZSkuc2V0KHQsbykpLG99fSx7a2V5OlwiZGVmZW5zZU9uY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp2b2lkIDA7cmV0dXJuXCJmdW5jdGlvblwiIT10eXBlb2YgdD9udWxsOnRoaXMuX3BhY2soZSx0LG4pfX0se2tleTpcImZpbmRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlfHwwPT09ZS5sZW5ndGh8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/bnVsbDp0aGlzLl9mdW5jTWFwLmhhcyhlKT90aGlzLl9mdW5jTWFwLmdldChlKS5oYXModCk/dGhpcy5fZnVuY01hcC5nZXQoZSkuZ2V0KHQpOihRaS5sb2coXCJTYWZldHlDYWxsYmFjay5maW5kOiDmib7kuI3liLAgZnVuYyDigJTigJQgXCIuY29uY2F0KGUsXCIvXCIpLmNvbmNhdChcIlwiIT09dC5uYW1lP3QubmFtZTpcIlthbm9ueW1vdXNdXCIpKSxudWxsKTooUWkubG9nKFwiU2FmZXR5Q2FsbGJhY2suZmluZDog5om+5LiN5YiwIGV2ZW50TmFtZS1cIi5jb25jYXQoZSxcIiDlr7nlupTnmoQgZnVuY1wiKSksbnVsbCl9fSx7a2V5OlwiZGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiYoISF0aGlzLl9mdW5jTWFwLmhhcyhlKSYmKCEhdGhpcy5fZnVuY01hcC5nZXQoZSkuaGFzKHQpJiYodGhpcy5fZnVuY01hcC5nZXQoZSkuZGVsZXRlKHQpLDA9PT10aGlzLl9mdW5jTWFwLmdldChlKS5zaXplJiZ0aGlzLl9mdW5jTWFwLmRlbGV0ZShlKSwhMCkpKX19LHtrZXk6XCJfcGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24oKXt0cnl7dC5hcHBseShuLEFycmF5LmZyb20oYXJndW1lbnRzKSl9Y2F0Y2gocyl7dmFyIG89T2JqZWN0LnZhbHVlcyhXbikuaW5kZXhPZihlKTtpZigtMSE9PW8pe3ZhciByPU9iamVjdC5rZXlzKFduKVtvXTtRaS53YXJuKFwi5o6l5YWl5L6n5LqL5Lu2IFRJTS5FVkVOVC5cIi5jb25jYXQocixcIiDlr7nlupTnmoTlm57osIPlh73mlbDpgLvovpHlrZjlnKjpl67popjvvIzor7fmo4Dmn6XvvIFcIikscyl9dmFyIGE9bmV3IGRwKFVnKTthLnNldE1lc3NhZ2UoXCJldmVudE5hbWU6XCIuY29uY2F0KGUpKS5zZXRNb3JlTWVzc2FnZShzLm1lc3NhZ2UpLmVuZCgpfX19fV0pLGV9KCksdEk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3luKHRoaXMsZSk7dmFyIG49e1NES0FwcElEOnQuU0RLQXBwSUQsdW5saW1pdGVkQVZDaGF0Um9vbTp0LnVubGltaXRlZEFWQ2hhdFJvb218fCExLHNjZW5lOnQuc2NlbmV8fFwiXCIsb3ZlcnNlYTp0Lm92ZXJzZWF8fCExLGluc3RhbmNlSUQ6VmMoKSxkZXZNb2RlOnQuZGV2TW9kZXx8ITEscHJveHlTZXJ2ZXI6dC5wcm94eVNlcnZlcnx8dm9pZCAwfTt0aGlzLl9tb2R1bGVNYW5hZ2VyPW5ldyBaeShuKSx0aGlzLl9zYWZldHlDYWxsYmFja0ZhY3Rvcnk9bmV3IGVJfXJldHVybiBFbihlLFt7a2V5Olwib25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX21vZHVsZU1hbmFnZXIub25FcnJvcihlKX19LHtrZXk6XCJsb2dpblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmxvZ2luKCksdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobmwpLmxvZ2luKGUpfX0se2tleTpcImxvZ291dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobmwpLmxvZ291dCgpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9tb2R1bGVNYW5hZ2VyLnJlc2V0KCksdH0pKX19LHtrZXk6XCJpc1JlYWR5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5pc1JlYWR5KCl9fSx7a2V5OlwiZ2V0Tm90UmVhZHlSZWFzb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE5vdFJlYWR5UmVhc29uKCl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5sb2dvdXQoKS5maW5hbGx5KChmdW5jdGlvbigpe2UuX21vZHVsZU1hbmFnZXIuc3RvcFRpbWVyKCksZS5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoRWwpLnRlcm1pbmF0ZSgpLGUuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKE1sKS5kZWFsbG9jKCk7dmFyIHQ9ZS5fbW9kdWxlTWFuYWdlci5nZXRPdXRlckVtaXR0ZXJJbnN0YW5jZSgpLG49ZS5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUobGwpO3QuZW1pdChXbi5TREtfREVTVFJPWSx7U0RLQXBwSUQ6bi5nZXRTREtBcHBJRCgpfSl9KSl9fSx7a2V5Olwib25cIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7ZT09PVduLkdST1VQX1NZU1RFTV9OT1RJQ0VfUkVDRUlWRUQmJlFpLndhcm4oXCLvvIHvvIHvvIFUSU0uRVZFTlQuR1JPVVBfU1lTVEVNX05PVElDRV9SRUNFSVZFRCB2Mi42LjDotbflvIPnlKjvvIzkuLrkuobmm7Tlpb3nmoTkvZPpqozvvIzor7flnKggVElNLkVWRU5ULk1FU1NBR0VfUkVDRUlWRUQg5LqL5Lu25Zue6LCD5YaF5o6l5pS25aSE55CG576k57O757uf6YCa55+l77yM6K+m57uG6K+35Y+C6ICD77yaaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL01lc3NhZ2UuaHRtbCMuR3JvdXBTeXN0ZW1Ob3RpY2VQYXlsb2FkXCIpLFFpLmRlYnVnKFwib25cIixcImV2ZW50TmFtZTpcIi5jb25jYXQoZSkpLHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0T3V0ZXJFbWl0dGVySW5zdGFuY2UoKS5vbihlLHRoaXMuX3NhZmV0eUNhbGxiYWNrRmFjdG9yeS5kZWZlbnNlKGUsdCxuKSxuKX19LHtrZXk6XCJvbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe1FpLmRlYnVnKFwib25jZVwiLFwiZXZlbnROYW1lOlwiLmNvbmNhdChlKSksdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRPdXRlckVtaXR0ZXJJbnN0YW5jZSgpLm9uY2UoZSx0aGlzLl9zYWZldHlDYWxsYmFja0ZhY3RvcnkuZGVmZW5zZU9uY2UoZSx0LG4pLG58fHRoaXMpfX0se2tleTpcIm9mZlwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLG8pe1FpLmRlYnVnKFwib2ZmXCIsXCJldmVudE5hbWU6XCIuY29uY2F0KGUpKTt2YXIgcj10aGlzLl9zYWZldHlDYWxsYmFja0ZhY3RvcnkuZmluZChlLHQpO251bGwhPT1yJiYodGhpcy5fbW9kdWxlTWFuYWdlci5nZXRPdXRlckVtaXR0ZXJJbnN0YW5jZSgpLm9mZihlLHIsbixvKSx0aGlzLl9zYWZldHlDYWxsYmFja0ZhY3RvcnkuZGVsZXRlKGUsdCkpfX0se2tleTpcInJlZ2lzdGVyUGx1Z2luXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoX2wpLnJlZ2lzdGVyUGx1Z2luKGUpfX0se2tleTpcInNldExvZ0xldmVsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZTw9MCl7Y29uc29sZS5sb2coW1wiXCIsXCIgX19fX19fX18gIF9fX19fXyAgX18gICAgICAgX18gIF9fICAgICAgIF9fICBfX19fX19fXyAgX19fX19fX1wiLFwifCAgICAgICAgXFxcXHwgICAgICBcXFxcfCAgXFxcXCAgICAgLyAgXFxcXHwgIFxcXFwgIF8gIHwgIFxcXFx8ICAgICAgICBcXFxcfCAgICAgICBcXFxcXCIsXCIgXFxcXCQkJCQkJCQkIFxcXFwkJCQkJCR8ICQkXFxcXCAgIC8gICQkfCAkJCAvIFxcXFwgfCAkJHwgJCQkJCQkJCR8ICQkJCQkJCRcXFxcXCIsXCIgICB8ICQkICAgICB8ICQkICB8ICQkJFxcXFwgLyAgJCQkfCAkJC8gICRcXFxcfCAkJHwgJCRfXyAgICB8ICQkX18vICQkXCIsXCIgICB8ICQkICAgICB8ICQkICB8ICQkJCRcXFxcICAkJCQkfCAkJCAgJCQkXFxcXCAkJHwgJCQgIFxcXFwgICB8ICQkICAgICQkXCIsXCIgICB8ICQkICAgICB8ICQkICB8ICQkXFxcXCQkICQkICQkfCAkJCAkJFxcXFwkJFxcXFwkJHwgJCQkJCQgICB8ICQkJCQkJCRcXFxcXCIsXCIgICB8ICQkICAgIF98ICQkXyB8ICQkIFxcXFwkJCR8ICQkfCAkJCQkICBcXFxcJCQkJHwgJCRfX19fXyB8ICQkX18vICQkXCIsXCIgICB8ICQkICAgfCAgICQkIFxcXFx8ICQkICBcXFxcJCB8ICQkfCAkJCQgICAgXFxcXCQkJHwgJCQgICAgIFxcXFx8ICQkICAgICQkXCIsXCIgICAgXFxcXCQkICAgIFxcXFwkJCQkJCQgXFxcXCQkICAgICAgXFxcXCQkIFxcXFwkJCAgICAgIFxcXFwkJCBcXFxcJCQkJCQkJCQgXFxcXCQkJCQkJCRcIixcIlwiLFwiXCJdLmpvaW4oXCJcXG5cIikpLGNvbnNvbGUubG9nKFwiJWNJTSDmmbrog73lrqLmnI3vvIzpmo/ml7bpmo/lnLDop6PlhrPmgqjnmoTpl67popgg4oaSX+KGkiBodHRwczovL2Nsb3VkLnRlbmNlbnQuY29tL2FjdC9ldmVudC9zbWFydHktc2VydmljZT9mcm9tPWltLWRvY1wiLFwiY29sb3I6IzAwNmVmZlwiKSxjb25zb2xlLmxvZyhcIiVj5LuOdjIuMTEuMui1t++8jFNESyDmlK/mjIHkuoYgV2ViU29ja2V077yM5bCP56iL5bqP6ZyA6KaB5re75Yqg5Y+X5L+h5Z+f5ZCN77yB5Y2H57qn5oyH5byVOiBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vdHV0b3JpYWwtMDItdXBncmFkZWd1aWRlbGluZS5odG1sXCIsXCJjb2xvcjojZmYwMDAwXCIpO2NvbnNvbGUubG9nKFtcIlwiLFwi5Y+C6ICD5Lul5LiL5paH5qGj77yM5Lya5pu05b+r6Kej5Yaz6Zeu6aKY5ZOm77yBKCNeLl4jKVxcblwiLFwiU0RLIOabtOaWsOaXpeW/lzogaHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kb2N1bWVudC9wcm9kdWN0LzI2OS8zODQ5MlxcblwiLFwiU0RLIOaOpeWPo+aWh+ahozogaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sXFxuXCIsXCLluLjop4Hpl67popg6IGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi90dXRvcmlhbC0wMS1mYXEuaHRtbFxcblwiLFwi5Y+N6aaI6Zeu6aKY77yf5oiz5oiR5o+QIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vdGVuY2VudHl1bi9USU1TREsvaXNzdWVzXFxuXCIsXCLlpoLmnpzmgqjpnIDopoHlnKjnlJ/kuqfnjq/looPlhbPpl63kuIrpnaLnmoTml6Xlv5fvvIzor7cgdGltLnNldExvZ0xldmVsKDEpXFxuXCJdLmpvaW4oXCJcXG5cIikpfVFpLnNldExldmVsKGUpfX0se2tleTpcImNyZWF0ZVRleHRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKG9sKS5jcmVhdGVUZXh0TWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKG9sKS5jcmVhdGVUZXh0TWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUob2wpLmNyZWF0ZUltYWdlTWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVBdWRpb01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUob2wpLmNyZWF0ZUF1ZGlvTWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUob2wpLmNyZWF0ZVZpZGVvTWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVDdXN0b21NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKG9sKS5jcmVhdGVDdXN0b21NZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKG9sKS5jcmVhdGVGYWNlTWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShvbCkuY3JlYXRlRmlsZU1lc3NhZ2UoZSl9fSx7a2V5OlwiY3JlYXRlTG9jYXRpb25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKG9sKS5jcmVhdGVMb2NhdGlvbk1lc3NhZ2UoZSl9fSx7a2V5OlwiY3JlYXRlTWVyZ2VyTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShvbCkuY3JlYXRlTWVyZ2VyTWVzc2FnZShlKX19LHtrZXk6XCJkb3dubG9hZE1lcmdlck1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlIT09WW4uTVNHX01FUkdFUj9PXyhuZXcgQV8oe2NvZGU6emQuTUVTU0FHRV9NRVJHRVJfVFlQRV9JTlZBTElELG1lc3NhZ2U6SmQuTUVTU0FHRV9NRVJHRVJfVFlQRV9JTlZBTElEfSkpOkpjKGUucGF5bG9hZC5kb3dubG9hZEtleSk/T18obmV3IEFfKHtjb2RlOnpkLk1FU1NBR0VfTUVSR0VSX0tFWV9JTlZBTElELG1lc3NhZ2U6SmQuTUVTU0FHRV9NRVJHRVJfS0VZX0lOVkFMSUR9KSk6dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUob2wpLmRvd25sb2FkTWVyZ2VyTWVzc2FnZShlKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIE9fKG5ldyBBXyh7Y29kZTp6ZC5NRVNTQUdFX01FUkdFUl9ET1dOTE9BRF9GQUlMLG1lc3NhZ2U6SmQuTUVTU0FHRV9NRVJHRVJfRE9XTkxPQURfRkFJTH0pKX0pKX19LHtrZXk6XCJjcmVhdGVGb3J3YXJkTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShvbCkuY3JlYXRlRm9yd2FyZE1lc3NhZ2UoZSl9fSx7a2V5Olwic2VuZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgTV8/dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUob2wpLnNlbmRNZXNzYWdlSW5zdGFuY2UoZSx0KTpPXyhuZXcgQV8oe2NvZGU6emQuTUVTU0FHRV9TRU5EX05FRURfTUVTU0FHRV9JTlNUQU5DRSxtZXNzYWdlOkpkLk1FU1NBR0VfU0VORF9ORUVEX01FU1NBR0VfSU5TVEFOQ0V9KSl9fSx7a2V5OlwiY2FsbEV4cGVyaW1lbnRhbEFQSVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJoYW5kbGVHcm91cEludml0YXRpb25cIj09PWU/dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoc2wpLmhhbmRsZUdyb3VwSW52aXRhdGlvbih0KTpPXyhuZXcgQV8oe2NvZGU6emQuSU5WQUxJRF9PUEVSQVRJT04sbWVzc2FnZTpKZC5JTlZBTElEX09QRVJBVElPTn0pKX19LHtrZXk6XCJyZXZva2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKG9sKS5yZXZva2VNZXNzYWdlKGUpfX0se2tleTpcInJlc2VuZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUob2wpLnJlc2VuZE1lc3NhZ2UoZSl9fSx7a2V5OlwiZGVsZXRlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShvbCkuZGVsZXRlTWVzc2FnZShlKX19LHtrZXk6XCJnZXRNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh1bCkuZ2V0TWVzc2FnZUxpc3QoZSl9fSx7a2V5Olwic2VuZE1lc3NhZ2VSZWFkUmVjZWlwdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShzbCkuc2VuZFJlYWRSZWNlaXB0KGUpfX0se2tleTpcImdldE1lc3NhZ2VSZWFkUmVjZWlwdExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoc2wpLmdldFJlYWRSZWNlaXB0TGlzdChlKX19LHtrZXk6XCJnZXRHcm91cE1lc3NhZ2VSZWFkTWVtYmVyTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShzbCkuZ2V0UmVhZFJlY2VpcHREZXRhaWwoZSl9fSx7a2V5OlwiZmluZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUodWwpLmZpbmRNZXNzYWdlKGUpfX0se2tleTpcInNldE1lc3NhZ2VSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKS5zZXRNZXNzYWdlUmVhZChlKX19LHtrZXk6XCJnZXRDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKS5nZXRDb252ZXJzYXRpb25MaXN0KGUpfX0se2tleTpcImdldENvbnZlcnNhdGlvblByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUodWwpLmdldENvbnZlcnNhdGlvblByb2ZpbGUoZSl9fSx7a2V5OlwiZGVsZXRlQ29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKS5kZWxldGVDb252ZXJzYXRpb24oZSl9fSx7a2V5OlwicGluQ29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKS5waW5Db252ZXJzYXRpb24oZSl9fSx7a2V5Olwic2V0QWxsTWVzc2FnZVJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUodWwpLnNldEFsbE1lc3NhZ2VSZWFkKGUpfX0se2tleTpcInNldE1lc3NhZ2VSZW1pbmRUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKS5zZXRNZXNzYWdlUmVtaW5kVHlwZShlKX19LHtrZXk6XCJnZXRNeVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShybCkuZ2V0TXlQcm9maWxlKCl9fSx7a2V5OlwiZ2V0VXNlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUocmwpLmdldFVzZXJQcm9maWxlKGUpfX0se2tleTpcInVwZGF0ZU15UHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShybCkudXBkYXRlTXlQcm9maWxlKGUpfX0se2tleTpcImdldEJsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHJsKS5nZXRMb2NhbEJsYWNrbGlzdCgpfX0se2tleTpcImFkZFRvQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHJsKS5hZGRCbGFja2xpc3QoZSl9fSx7a2V5OlwicmVtb3ZlRnJvbUJsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShybCkuZGVsZXRlQmxhY2tsaXN0KGUpfX0se2tleTpcImdldEZyaWVuZExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGlsKTtyZXR1cm4gZT9lLmdldExvY2FsRnJpZW5kTGlzdCgpOk9fKHtjb2RlOnpkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOkpkLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcImFkZEZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGlsKTtyZXR1cm4gdD90LmFkZEZyaWVuZChlKTpPXyh7Y29kZTp6ZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpKZC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJkZWxldGVGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCk7cmV0dXJuIHQ/dC5kZWxldGVGcmllbmQoZSk6T18oe2NvZGU6emQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6SmQuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5OlwiY2hlY2tGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCk7cmV0dXJuIHQ/dC5jaGVja0ZyaWVuZChlKTpPXyh7Y29kZTp6ZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpKZC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJnZXRGcmllbmRQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpO3JldHVybiB0P3QuZ2V0RnJpZW5kUHJvZmlsZShlKTpPXyh7Y29kZTp6ZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpKZC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJ1cGRhdGVGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCk7cmV0dXJuIHQ/dC51cGRhdGVGcmllbmQoZSk6T18oe2NvZGU6emQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6SmQuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5OlwiZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCk7cmV0dXJuIGU/ZS5nZXRMb2NhbEZyaWVuZEFwcGxpY2F0aW9uTGlzdCgpOk9fKHtjb2RlOnpkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOkpkLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcImFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpO3JldHVybiB0P3QuYWNjZXB0RnJpZW5kQXBwbGljYXRpb24oZSk6T18oe2NvZGU6emQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6SmQuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5OlwicmVmdXNlRnJpZW5kQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCk7cmV0dXJuIHQ/dC5yZWZ1c2VGcmllbmRBcHBsaWNhdGlvbihlKTpPXyh7Y29kZTp6ZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpKZC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJkZWxldGVGcmllbmRBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGlsKTtyZXR1cm4gdD90LmRlbGV0ZUZyaWVuZEFwcGxpY2F0aW9uKGUpOk9fKHtjb2RlOnpkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOkpkLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcInNldEZyaWVuZEFwcGxpY2F0aW9uUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpO3JldHVybiBlP2Uuc2V0RnJpZW5kQXBwbGljYXRpb25SZWFkKCk6T18oe2NvZGU6emQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6SmQuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5OlwiZ2V0RnJpZW5kR3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCk7cmV0dXJuIGU/ZS5nZXRMb2NhbEZyaWVuZEdyb3VwTGlzdCgpOk9fKHtjb2RlOnpkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOkpkLkNBTk5PVF9GSU5EX01PRFVMRX0pfX0se2tleTpcImNyZWF0ZUZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpO3JldHVybiB0P3QuY3JlYXRlRnJpZW5kR3JvdXAoZSk6T18oe2NvZGU6emQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6SmQuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5OlwiZGVsZXRlRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCk7cmV0dXJuIHQ/dC5kZWxldGVGcmllbmRHcm91cChlKTpPXyh7Y29kZTp6ZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpKZC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJhZGRUb0ZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoaWwpO3JldHVybiB0P3QuYWRkVG9GcmllbmRHcm91cChlKTpPXyh7Y29kZTp6ZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpKZC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJyZW1vdmVGcm9tRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCk7cmV0dXJuIHQ/dC5yZW1vdmVGcm9tRnJpZW5kR3JvdXAoZSk6T18oe2NvZGU6emQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6SmQuQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9fSx7a2V5OlwicmVuYW1lRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShpbCk7cmV0dXJuIHQ/dC5yZW5hbWVGcmllbmRHcm91cChlKTpPXyh7Y29kZTp6ZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpKZC5DQU5OT1RfRklORF9NT0RVTEV9KX19LHtrZXk6XCJnZXRHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoc2wpLmdldEdyb3VwTGlzdChlKX19LHtrZXk6XCJnZXRHcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoc2wpLmdldEdyb3VwUHJvZmlsZShlKX19LHtrZXk6XCJjcmVhdGVHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShzbCkuY3JlYXRlR3JvdXAoZSl9fSx7a2V5OlwiZGlzbWlzc0dyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHNsKS5kaXNtaXNzR3JvdXAoZSl9fSx7a2V5OlwidXBkYXRlR3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHNsKS51cGRhdGVHcm91cFByb2ZpbGUoZSl9fSx7a2V5Olwiam9pbkdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHNsKS5qb2luR3JvdXAoZSl9fSx7a2V5OlwicXVpdEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHNsKS5xdWl0R3JvdXAoZSl9fSx7a2V5Olwic2VhcmNoR3JvdXBCeUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHNsKS5zZWFyY2hHcm91cEJ5SUQoZSl9fSx7a2V5OlwiZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShzbCkuZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudChlKX19LHtrZXk6XCJjaGFuZ2VHcm91cE93bmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHNsKS5jaGFuZ2VHcm91cE93bmVyKGUpfX0se2tleTpcImhhbmRsZUdyb3VwQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoc2wpLmhhbmRsZUdyb3VwQXBwbGljYXRpb24oZSl9fSx7a2V5OlwiaW5pdEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShzbCkuaW5pdEdyb3VwQXR0cmlidXRlcyhlKX19LHtrZXk6XCJzZXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoc2wpLnNldEdyb3VwQXR0cmlidXRlcyhlKX19LHtrZXk6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoc2wpLmRlbGV0ZUdyb3VwQXR0cmlidXRlcyhlKX19LHtrZXk6XCJnZXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoc2wpLmdldEdyb3VwQXR0cmlidXRlcyhlKX19LHtrZXk6XCJnZXRHcm91cE1lbWJlckxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoY2wpLmdldEdyb3VwTWVtYmVyTGlzdChlKX19LHtrZXk6XCJnZXRHcm91cE1lbWJlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoY2wpLmdldEdyb3VwTWVtYmVyUHJvZmlsZShlKX19LHtrZXk6XCJhZGRHcm91cE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShjbCkuYWRkR3JvdXBNZW1iZXIoZSl9fSx7a2V5OlwiZGVsZXRlR3JvdXBNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoY2wpLmRlbGV0ZUdyb3VwTWVtYmVyKGUpfX0se2tleTpcInNldEdyb3VwTWVtYmVyTXV0ZVRpbWVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoY2wpLnNldEdyb3VwTWVtYmVyTXV0ZVRpbWUoZSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJSb2xlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGNsKS5zZXRHcm91cE1lbWJlclJvbGUoZSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJOYW1lQ2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShjbCkuc2V0R3JvdXBNZW1iZXJOYW1lQ2FyZChlKX19LHtrZXk6XCJzZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGNsKS5zZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkKGUpfX1dKSxlfSgpLG5JPXtsb2dpbjpcImxvZ2luXCIsbG9nb3V0OlwibG9nb3V0XCIsZGVzdHJveTpcImRlc3Ryb3lcIixvbjpcIm9uXCIsb2ZmOlwib2ZmXCIscmVhZHk6XCJyZWFkeVwiLHNldExvZ0xldmVsOlwic2V0TG9nTGV2ZWxcIixqb2luR3JvdXA6XCJqb2luR3JvdXBcIixxdWl0R3JvdXA6XCJxdWl0R3JvdXBcIixyZWdpc3RlclBsdWdpbjpcInJlZ2lzdGVyUGx1Z2luXCIsZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudDpcImdldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIn07ZnVuY3Rpb24gb0koZSx0KXtpZihlLmlzUmVhZHkoKXx8dm9pZCAwIT09bklbdF0pcmV0dXJuITA7dmFyIG49ZS5nZXROb3RSZWFkeVJlYXNvbigpLG89XCJcIjtPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh6ZCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7emRbZV09PT1uJiYobz1KZFtlXSl9KSk7dmFyIHI9e2NvZGU6bixtZXNzYWdlOlwiXCIuY29uY2F0KG8sXCLlr7zoh7Qgc2RrIG5vdCByZWFkeeOAglwiKS5jb25jYXQodCxcIiBcIikuY29uY2F0KEpkLlNES19JU19OT1RfUkVBRFksXCLvvIzor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL21vZHVsZS1FVkVOVC5odG1sIy5TREtfUkVBRFlcIil9O3JldHVybiBlLm9uRXJyb3Iocikscn12YXIgckk9e30sYUk9e307cmV0dXJuIGFJLmNyZWF0ZT1mdW5jdGlvbihlKXt2YXIgdD0wO2lmKGNjKGUuU0RLQXBwSUQpKXQ9ZS5TREtBcHBJRDtlbHNlIGlmKFFpLndhcm4oXCJUSU0uY3JlYXRlIFNES0FwcElEIOeahOexu+Wei+W6lOivpeS4uiBOdW1iZXLvvIzor7fkv67mlLnvvIFcIiksdD1wYXJzZUludChlLlNES0FwcElEKSxpc05hTih0KSlyZXR1cm4gUWkuZXJyb3IoXCJUSU0uY3JlYXRlIGZhaWxlZC4g6Kej5p6QIFNES0FwcElEIOWksei0pe+8jOivt+ajgOafpeS8oOWPgu+8gVwiKSxudWxsO2lmKHQmJnJJW3RdKXJldHVybiBySVt0XTtRaS5sb2coXCJUSU0uY3JlYXRlXCIpO3ZhciBuPW5ldyB0SShDbih7fSxlLHtTREtBcHBJRDp0fSkpO24ub24oV24uU0RLX0RFU1RST1ksKGZ1bmN0aW9uKGUpe3JJW2UuZGF0YS5TREtBcHBJRF09bnVsbCxkZWxldGUgcklbZS5kYXRhLlNES0FwcElEXX0pKTt2YXIgbz1mdW5jdGlvbihlKXt2YXIgdD1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBPYmplY3Qua2V5cyhZdSkuZm9yRWFjaCgoZnVuY3Rpb24obil7aWYoZVtuXSl7dmFyIG89WXVbbl0scj1uZXcgY287dFtvXT1mdW5jdGlvbigpe3ZhciB0PUFycmF5LmZyb20oYXJndW1lbnRzKTtyZXR1cm4gci51c2UoKGZ1bmN0aW9uKHQsbyl7dmFyIHI9b0koZSxuKTtyZXR1cm4hMD09PXI/bygpOk9fKHIpfSkpLnVzZSgoZnVuY3Rpb24oZSx0KXtpZighMD09PVhjKGUsV3Vbbl0sbykpcmV0dXJuIHQoKX0pKS51c2UoKGZ1bmN0aW9uKHQsbyl7cmV0dXJuIGVbbl0uYXBwbHkoZSx0KX0pKSxyLnJ1bih0KX19fSkpLHR9KG4pO3JldHVybiBySVt0XT1vLFFpLmxvZyhcIlRJTS5jcmVhdGUgb2tcIiksb30sYUkuVFlQRVM9WW4sYUkuRVZFTlQ9V24sYUkuVkVSU0lPTj1cIjIuMTguMFwiLFFpLmxvZyhcIlRJTS5WRVJTSU9OOiBcIi5jb25jYXQoYUkuVkVSU0lPTikpLGFJfSkpO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBIiwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///./node_modules/tim-js-sdk/tim-js.js\\n')}});","extractedComments":[]}