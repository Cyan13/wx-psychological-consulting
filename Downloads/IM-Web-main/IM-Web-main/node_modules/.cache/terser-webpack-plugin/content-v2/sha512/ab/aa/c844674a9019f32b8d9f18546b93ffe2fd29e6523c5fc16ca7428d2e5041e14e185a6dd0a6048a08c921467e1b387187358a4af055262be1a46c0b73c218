{"map":"{\"version\":3,\"sources\":[\"vendors~app.41562c2fa840b4993081.hot-update.js\"],\"names\":[\"webpackHotUpdate\",\"./node_modules/tim-js-sdk/tim-js-friendship.js\",\"module\",\"exports\",\"__webpack_require__\",\"eval\",\"./node_modules/tim-js-sdk/tim-js.js\"],\"mappings\":\"AAAAA,iBAAiB,cAAc,CAEzBC;;;;8BAKA,SAAUC,OAAQC,QAASC,qBAEjCC,KAAK,82umCAICC;;;;8BAKA,SAAUJ,OAAQC,QAASC,qBAEjCC,KAAK\"}","code":"webpackHotUpdate(\"vendors~app\",{\"./node_modules/tim-js-sdk/tim-js-friendship.js\":\n/*!******************************************************!*\\\n  !*** ./node_modules/tim-js-sdk/tim-js-friendship.js ***!\n  \\******************************************************/\n/*! no static exports found */function(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(global) {!function(e,t){ true?module.exports=t():undefined}(this,(function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e){return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,n){return(d=l()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&c(r,n.prototype),r}).apply(null,arguments)}function p(e){var t=\"function\"==typeof Map?new Map:void 0;return(p=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return d(e,arguments,u(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),c(o,e)})(e)}function g(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function h(e){if(void 0===e)throw new ReferenceError(\"this hasn\\'t been initialised - super() hasn\\'t been called\");return e}function f(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?h(e):t}function _(e){var t=l();return function(){var n,o=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f(this,n)}}function m(e,t){return M(e)||function(e,t){var n=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null==n)return;var o,r,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);s=!0);}catch(u){i=!0,r=u}finally{try{s||null==n.return||n.return()}finally{if(i)throw r}}return a}(e,t)||I(e,t)||D()}function v(e){return function(e){if(Array.isArray(e))return T(e)}(e)||y(e)||I(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function M(e){if(Array.isArray(e))return e}function y(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}function I(e,t){if(e){if(\"string\"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function D(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function S(e,t){var n=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=I(e))||t&&e&&\"number\"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}var E=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function A(e,t){return e(t={exports:{}},t.exports),t.exports}var k,N,C=function(e){return e&&e.Math==Math&&e},L=C(\"object\"==typeof globalThis&&globalThis)||C(\"object\"==typeof window&&window)||C(\"object\"==typeof self&&self)||C(\"object\"==typeof E&&E)||function(){return this}()||Function(\"return this\")(),O=function(e){try{return!!e()}catch(t){return!0}},R=!O((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),b={}.propertyIsEnumerable,w=Object.getOwnPropertyDescriptor,G={f:w&&!b.call({1:2},1)?function(e){var t=w(this,e);return!!t&&t.enumerable}:b},P=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},U={}.toString,F=function(e){return U.call(e).slice(8,-1)},q=\"\".split,x=O((function(){return!Object(\"z\").propertyIsEnumerable(0)}))?function(e){return\"String\"==F(e)?q.call(e,\"\"):Object(e)}:Object,V=function(e){if(null==e)throw TypeError(\"Can\\'t call method on \"+e);return e},K=function(e){return x(V(e))},B=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e},H=function(e){return\"function\"==typeof e?e:void 0},j=function(e,t){return arguments.length<2?H(L[e]):L[e]&&L[e][t]},Y=j(\"navigator\",\"userAgent\")||\"\",$=L.process,W=L.Deno,z=$&&$.versions||W&&W.version,J=z&&z.v8;J?N=(k=J.split(\".\"))[0]<4?1:k[0]+k[1]:Y&&(!(k=Y.match(/Edge\\\\/(\\\\d+)/))||k[1]>=74)&&(k=Y.match(/Chrome\\\\/(\\\\d+)/))&&(N=k[1]);var X=N&&+N,Q=!!Object.getOwnPropertySymbols&&!O((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&X&&X<41})),Z=Q&&!Symbol.sham&&\"symbol\"==typeof Symbol.iterator,ee=Z?function(e){return\"symbol\"==typeof e}:function(e){var t=j(\"Symbol\");return\"function\"==typeof t&&Object(e)instanceof t},te=function(e,t){try{Object.defineProperty(L,e,{value:t,configurable:!0,writable:!0})}catch(n){L[e]=t}return t},ne=L[\"__core-js_shared__\"]||te(\"__core-js_shared__\",{}),oe=A((function(e){(e.exports=function(e,t){return ne[e]||(ne[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:\"3.16.1\",mode:\"global\",copyright:\"© 2021 Denis Pushkarev (zloirock.ru)\"})})),re=function(e){return Object(V(e))},ae={}.hasOwnProperty,se=Object.hasOwn||function(e,t){return ae.call(re(e),t)},ie=0,ue=Math.random(),ce=function(e){return\"Symbol(\"+String(void 0===e?\"\":e)+\")_\"+(++ie+ue).toString(36)},le=oe(\"wks\"),de=L.Symbol,pe=Z?de:de&&de.withoutSetter||ce,ge=function(e){return se(le,e)&&(Q||\"string\"==typeof le[e])||(Q&&se(de,e)?le[e]=de[e]:le[e]=pe(\"Symbol.\"+e)),le[e]},he=ge(\"toPrimitive\"),fe=function(e,t){if(!B(e)||ee(e))return e;var n,o=e[he];if(void 0!==o){if(void 0===t&&(t=\"default\"),n=o.call(e,t),!B(n)||ee(n))return n;throw TypeError(\"Can\\'t convert object to primitive value\")}return void 0===t&&(t=\"number\"),function(e,t){var n,o;if(\"string\"===t&&\"function\"==typeof(n=e.toString)&&!B(o=n.call(e)))return o;if(\"function\"==typeof(n=e.valueOf)&&!B(o=n.call(e)))return o;if(\"string\"!==t&&\"function\"==typeof(n=e.toString)&&!B(o=n.call(e)))return o;throw TypeError(\"Can\\'t convert object to primitive value\")}(e,t)},_e=function(e){var t=fe(e,\"string\");return ee(t)?t:String(t)},me=L.document,ve=B(me)&&B(me.createElement),Me=function(e){return ve?me.createElement(e):{}},ye=!R&&!O((function(){return 7!=Object.defineProperty(Me(\"div\"),\"a\",{get:function(){return 7}}).a})),Ie=Object.getOwnPropertyDescriptor,Te={f:R?Ie:function(e,t){if(e=K(e),t=_e(t),ye)try{return Ie(e,t)}catch(n){}if(se(e,t))return P(!G.f.call(e,t),e[t])}},De=function(e){if(!B(e))throw TypeError(String(e)+\" is not an object\");return e},Se=Object.defineProperty,Ee={f:R?Se:function(e,t,n){if(De(e),t=_e(t),De(n),ye)try{return Se(e,t,n)}catch(o){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported\");return\"value\"in n&&(e[t]=n.value),e}},Ae=R?function(e,t,n){return Ee.f(e,t,P(1,n))}:function(e,t,n){return e[t]=n,e},ke=Function.toString;\"function\"!=typeof ne.inspectSource&&(ne.inspectSource=function(e){return ke.call(e)});var Ne,Ce,Le,Oe=ne.inspectSource,Re=L.WeakMap,be=\"function\"==typeof Re&&/native code/.test(Oe(Re)),we=oe(\"keys\"),Ge=function(e){return we[e]||(we[e]=ce(e))},Pe={},Ue=L.WeakMap;if(be||ne.state){var Fe=ne.state||(ne.state=new Ue),qe=Fe.get,xe=Fe.has,Ve=Fe.set;Ne=function(e,t){if(xe.call(Fe,e))throw new TypeError(\"Object already initialized\");return t.facade=e,Ve.call(Fe,e,t),t},Ce=function(e){return qe.call(Fe,e)||{}},Le=function(e){return xe.call(Fe,e)}}else{var Ke=Ge(\"state\");Pe[Ke]=!0,Ne=function(e,t){if(se(e,Ke))throw new TypeError(\"Object already initialized\");return t.facade=e,Ae(e,Ke,t),t},Ce=function(e){return se(e,Ke)?e[Ke]:{}},Le=function(e){return se(e,Ke)}}var Be={set:Ne,get:Ce,has:Le,enforce:function(e){return Le(e)?Ce(e):Ne(e,{})},getterFor:function(e){return function(t){var n;if(!B(t)||(n=Ce(t)).type!==e)throw TypeError(\"Incompatible receiver, \"+e+\" required\");return n}}},He=A((function(e){var t=Be.get,n=Be.enforce,o=String(String).split(\"String\");(e.exports=function(e,t,r,a){var s,i=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet;\"function\"==typeof r&&(\"string\"!=typeof t||se(r,\"name\")||Ae(r,\"name\",t),(s=n(r)).source||(s.source=o.join(\"string\"==typeof t?t:\"\"))),e!==L?(i?!c&&e[t]&&(u=!0):delete e[t],u?e[t]=r:Ae(e,t,r)):u?e[t]=r:te(t,r)})(Function.prototype,\"toString\",(function(){return\"function\"==typeof this&&t(this).source||Oe(this)}))})),je=Math.ceil,Ye=Math.floor,$e=function(e){return isNaN(e=+e)?0:(e>0?Ye:je)(e)},We=Math.min,ze=function(e){return e>0?We($e(e),9007199254740991):0},Je=Math.max,Xe=Math.min,Qe=function(e,t){var n=$e(e);return n<0?Je(n+t,0):Xe(n,t)},Ze=function(e){return function(t,n,o){var r,a=K(t),s=ze(a.length),i=Qe(o,s);if(e&&n!=n){for(;s>i;)if((r=a[i++])!=r)return!0}else for(;s>i;i++)if((e||i in a)&&a[i]===n)return e||i||0;return!e&&-1}},et={includes:Ze(!0),indexOf:Ze(!1)},nt=et.indexOf,ot=function(e,t){var n,o=K(e),r=0,a=[];for(n in o)!se(Pe,n)&&se(o,n)&&a.push(n);for(;t.length>r;)se(o,n=t[r++])&&(~nt(a,n)||a.push(n));return a},rt=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"],at=rt.concat(\"length\",\"prototype\"),st={f:Object.getOwnPropertyNames||function(e){return ot(e,at)}},it={f:Object.getOwnPropertySymbols},ut=j(\"Reflect\",\"ownKeys\")||function(e){var t=st.f(De(e)),n=it.f;return n?t.concat(n(e)):t},ct=function(e,t){for(var n=ut(t),o=Ee.f,r=Te.f,a=0;a<n.length;a++){var s=n[a];se(e,s)||o(e,s,r(t,s))}},lt=/#|\\\\.prototype\\\\./,dt=function(e,t){var n=gt[pt(e)];return n==ft||n!=ht&&(\"function\"==typeof t?O(t):!!t)},pt=dt.normalize=function(e){return String(e).replace(lt,\".\").toLowerCase()},gt=dt.data={},ht=dt.NATIVE=\"N\",ft=dt.POLYFILL=\"P\",_t=dt,mt=Te.f,vt=function(e,t){var n,o,r,a,s,i=e.target,u=e.global,c=e.stat;if(n=u?L:c?L[i]||te(i,{}):(L[i]||{}).prototype)for(o in t){if(a=t[o],r=e.noTargetGet?(s=mt(n,o))&&s.value:n[o],!_t(u?o:i+(c?\".\":\"#\")+o,e.forced)&&void 0!==r){if(typeof a==typeof r)continue;ct(a,r)}(e.sham||r&&r.sham)&&Ae(a,\"sham\",!0),He(n,o,a,e)}},Mt=function(e){if(ee(e))throw TypeError(\"Cannot convert a Symbol value to a string\");return String(e)},yt=\"\\\\t\\\\n\\\\v\\\\f\\\\r                　\\\\u2028\\\\u2029\\\\ufeff\",It=\"[\"+yt+\"]\",Tt=RegExp(\"^\"+It+It+\"*\"),Dt=RegExp(It+It+\"*$\"),St=function(e){return function(t){var n=Mt(V(t));return 1&e&&(n=n.replace(Tt,\"\")),2&e&&(n=n.replace(Dt,\"\")),n}},Et={start:St(1),end:St(2),trim:St(3)},At=Et.trim,kt=L.parseInt,Nt=/^[+-]?0[Xx]/,Ct=8!==kt(yt+\"08\")||22!==kt(yt+\"0x16\")?function(e,t){var n=At(Mt(e));return kt(n,t>>>0||(Nt.test(n)?16:10))}:kt;vt({global:!0,forced:parseInt!=Ct},{parseInt:Ct});var Lt,Ot=Object.keys||function(e){return ot(e,rt)},Rt=R?Object.defineProperties:function(e,t){De(e);for(var n,o=Ot(t),r=o.length,a=0;r>a;)Ee.f(e,n=o[a++],t[n]);return e},bt=j(\"document\",\"documentElement\"),wt=Ge(\"IE_PROTO\"),Gt=function(){},Pt=function(e){return\"<script>\"+e+\"<\\\\/script>\"},Ut=function(e){e.write(Pt(\"\")),e.close();var t=e.parentWindow.Object;return e=null,t},Ft=function(){try{Lt=new ActiveXObject(\"htmlfile\")}catch(t){}Ft=document.domain&&Lt?Ut(Lt):function(){var e,t=Me(\"iframe\");if(t.style)return t.style.display=\"none\",bt.appendChild(t),t.src=String(\"javascript:\"),(e=t.contentWindow.document).open(),e.write(Pt(\"document.F=Object\")),e.close(),e.F}()||Ut(Lt);for(var e=rt.length;e--;)delete Ft.prototype[rt[e]];return Ft()};Pe[wt]=!0;var qt=Object.create||function(e,t){var n;return null!==e?(Gt.prototype=De(e),n=new Gt,Gt.prototype=null,n[wt]=e):n=Ft(),void 0===t?n:Rt(n,t)};vt({target:\"Object\",stat:!0,sham:!R},{create:qt});var xt=function(e){if(\"function\"!=typeof e)throw TypeError(String(e)+\" is not a function\");return e},Vt=function(e,t,n){if(xt(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}},Kt=Array.isArray||function(e){return\"Array\"==F(e)},Bt=ge(\"species\"),Ht=function(e,t){return new(function(e){var t;return Kt(e)&&(\"function\"!=typeof(t=e.constructor)||t!==Array&&!Kt(t.prototype)?B(t)&&null===(t=t[Bt])&&(t=void 0):t=void 0),void 0===t?Array:t}(e))(0===t?0:t)},jt=[].push,Yt=function(e){var t=1==e,n=2==e,o=3==e,r=4==e,a=6==e,s=7==e,i=5==e||a;return function(u,c,l,d){for(var p,g,h=re(u),f=x(h),_=Vt(c,l,3),m=ze(f.length),v=0,M=d||Ht,y=t?M(u,m):n||s?M(u,0):void 0;m>v;v++)if((i||v in f)&&(g=_(p=f[v],v,h),e))if(t)y[v]=g;else if(g)switch(e){case 3:return!0;case 5:return p;case 6:return v;case 2:jt.call(y,p)}else switch(e){case 4:return!1;case 7:jt.call(y,p)}return a?-1:o||r?r:y}},$t={forEach:Yt(0),map:Yt(1),filter:Yt(2),some:Yt(3),every:Yt(4),find:Yt(5),findIndex:Yt(6),filterReject:Yt(7)},Wt=function(e,t){var n=[][e];return!!n&&O((function(){n.call(null,t||function(){throw 1},1)}))},zt=$t.forEach,Jt=Wt(\"forEach\")?[].forEach:function(e){return zt(this,e,arguments.length>1?arguments[1]:void 0)};vt({target:\"Array\",proto:!0,forced:[].forEach!=Jt},{forEach:Jt});var Xt={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Qt in Xt){var Zt=L[Qt],en=Zt&&Zt.prototype;if(en&&en.forEach!==Jt)try{Ae(en,\"forEach\",Jt)}catch(cy){en.forEach=Jt}}var tn=O((function(){Ot(1)}));vt({target:\"Object\",stat:!0,forced:tn},{keys:function(e){return Ot(re(e))}});var nn=function(e){var t=e.return;if(void 0!==t)return De(t.call(e)).value},on=function(e,t,n,o){try{return o?t(De(n)[0],n[1]):t(n)}catch(cy){throw nn(e),cy}},rn={},an=ge(\"iterator\"),sn=Array.prototype,un=function(e){return void 0!==e&&(rn.Array===e||sn[an]===e)},cn=function(e,t,n){var o=_e(t);o in e?Ee.f(e,o,P(0,n)):e[o]=n},ln={};ln[ge(\"toStringTag\")]=\"z\";var dn=\"[object z]\"===String(ln),pn=ge(\"toStringTag\"),gn=\"Arguments\"==F(function(){return arguments}()),hn=dn?F:function(e){var t,n,o;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(n=function(e,t){try{return e[t]}catch(cy){}}(t=Object(e),pn))?n:gn?F(t):\"Object\"==(o=F(t))&&\"function\"==typeof t.callee?\"Arguments\":o},fn=ge(\"iterator\"),_n=function(e){if(null!=e)return e[fn]||e[\"@@iterator\"]||rn[hn(e)]},mn=function(e){var t,n,o,r,a,s,i=re(e),u=\"function\"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,d=void 0!==l,p=_n(i),g=0;if(d&&(l=Vt(l,c>2?arguments[2]:void 0,2)),null==p||u==Array&&un(p))for(n=new u(t=ze(i.length));t>g;g++)s=d?l(i[g],g):i[g],cn(n,g,s);else for(a=(r=p.call(i)).next,n=new u;!(o=a.call(r)).done;g++)s=d?on(r,l,[o.value,g],!0):o.value,cn(n,g,s);return n.length=g,n},vn=ge(\"iterator\"),Mn=!1;try{var yn=0,In={next:function(){return{done:!!yn++}},return:function(){Mn=!0}};In[vn]=function(){return this},Array.from(In,(function(){throw 2}))}catch(cy){}var Tn=function(e,t){if(!t&&!Mn)return!1;var n=!1;try{var o={};o[vn]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(cy){}return n},Dn=!Tn((function(e){Array.from(e)}));vt({target:\"Array\",stat:!0,forced:Dn},{from:mn});var Sn,En,An,kn=function(e){return function(t,n){var o,r,a=Mt(V(t)),s=$e(n),i=a.length;return s<0||s>=i?e?\"\":void 0:(o=a.charCodeAt(s))<55296||o>56319||s+1===i||(r=a.charCodeAt(s+1))<56320||r>57343?e?a.charAt(s):o:e?a.slice(s,s+2):r-56320+(o-55296<<10)+65536}},Nn={codeAt:kn(!1),charAt:kn(!0)},Cn=!O((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ln=Ge(\"IE_PROTO\"),On=Object.prototype,Rn=Cn?Object.getPrototypeOf:function(e){return e=re(e),se(e,Ln)?e[Ln]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?On:null},bn=ge(\"iterator\"),wn=!1;[].keys&&(\"next\"in(An=[].keys())?(En=Rn(Rn(An)))!==Object.prototype&&(Sn=En):wn=!0),(null==Sn||O((function(){var e={};return Sn[bn].call(e)!==e})))&&(Sn={}),se(Sn,bn)||Ae(Sn,bn,(function(){return this}));var Gn={IteratorPrototype:Sn,BUGGY_SAFARI_ITERATORS:wn},Pn=Ee.f,Un=ge(\"toStringTag\"),Fn=function(e,t,n){e&&!se(e=n?e:e.prototype,Un)&&Pn(e,Un,{configurable:!0,value:t})},qn=Gn.IteratorPrototype,xn=function(){return this},Vn=function(e,t,n){var o=t+\" Iterator\";return e.prototype=qt(qn,{next:P(1,n)}),Fn(e,o,!1),rn[o]=xn,e},Kn=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set).call(n,[]),t=n instanceof Array}catch(cy){}return function(n,o){return De(n),function(e){if(!B(e)&&null!==e)throw TypeError(\"Can\\'t set \"+String(e)+\" as a prototype\")}(o),t?e.call(n,o):n.__proto__=o,n}}():void 0),Bn=Gn.IteratorPrototype,Hn=Gn.BUGGY_SAFARI_ITERATORS,jn=ge(\"iterator\"),Yn=function(){return this},$n=function(e,t,n,o,r,a,s){Vn(n,t,o);var i,u,c,l=function(e){if(e===r&&f)return f;if(!Hn&&e in g)return g[e];switch(e){case\"keys\":case\"values\":case\"entries\":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+\" Iterator\",p=!1,g=e.prototype,h=g[jn]||g[\"@@iterator\"]||r&&g[r],f=!Hn&&h||l(r),_=\"Array\"==t&&g.entries||h;if(_&&(i=Rn(_.call(new e)),Bn!==Object.prototype&&i.next&&(Rn(i)!==Bn&&(Kn?Kn(i,Bn):\"function\"!=typeof i[jn]&&Ae(i,jn,Yn)),Fn(i,d,!0))),\"values\"==r&&h&&\"values\"!==h.name&&(p=!0,f=function(){return h.call(this)}),g[jn]!==f&&Ae(g,jn,f),rn[t]=f,r)if(u={values:l(\"values\"),keys:a?f:l(\"keys\"),entries:l(\"entries\")},s)for(c in u)(Hn||p||!(c in g))&&He(g,c,u[c]);else vt({target:t,proto:!0,forced:Hn||p},u);return u},Wn=Nn.charAt,zn=Be.set,Jn=Be.getterFor(\"String Iterator\");$n(String,\"String\",(function(e){zn(this,{type:\"String Iterator\",string:Mt(e),index:0})}),(function(){var e,t=Jn(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=Wn(n,o),t.index+=e.length,{value:e,done:!1})}));var Xn=ge(\"species\"),Qn=function(e){return X>=51||!O((function(){var t=[];return(t.constructor={})[Xn]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Zn=ge(\"isConcatSpreadable\"),eo=X>=51||!O((function(){var e=[];return e[Zn]=!1,e.concat()[0]!==e})),to=Qn(\"concat\"),no=function(e){if(!B(e))return!1;var t=e[Zn];return void 0!==t?!!t:Kt(e)};vt({target:\"Array\",proto:!0,forced:!eo||!to},{concat:function(e){var t,n,o,r,a,s=re(this),i=Ht(s,0),u=0;for(t=-1,o=arguments.length;t<o;t++)if(no(a=-1===t?s:arguments[t])){if(u+(r=ze(a.length))>9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");for(n=0;n<r;n++,u++)n in a&&cn(i,u,a[n])}else{if(u>=9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");cn(i,u++,a)}return i.length=u,i}});var oo={SDK_READY:\"sdkStateReady\",SDK_NOT_READY:\"sdkStateNotReady\",SDK_DESTROY:\"sdkDestroy\",MESSAGE_RECEIVED:\"onMessageReceived\",MESSAGE_MODIFIED:\"onMessageModified\",MESSAGE_REVOKED:\"onMessageRevoked\",MESSAGE_READ_BY_PEER:\"onMessageReadByPeer\",CONVERSATION_LIST_UPDATED:\"onConversationListUpdated\",GROUP_LIST_UPDATED:\"onGroupListUpdated\",GROUP_SYSTEM_NOTICE_RECEIVED:\"receiveGroupSystemNotice\",GROUP_ATTRIBUTES_UPDATED:\"groupAttributesUpdated\",PROFILE_UPDATED:\"onProfileUpdated\",BLACKLIST_UPDATED:\"blacklistUpdated\",FRIEND_LIST_UPDATED:\"onFriendListUpdated\",FRIEND_GROUP_LIST_UPDATED:\"onFriendGroupListUpdated\",FRIEND_APPLICATION_LIST_UPDATED:\"onFriendApplicationListUpdated\",KICKED_OUT:\"kickedOut\",ERROR:\"error\",NET_STATE_CHANGE:\"netStateChange\",SDK_RELOAD:\"sdkReload\"},ro={MSG_TEXT:\"TIMTextElem\",MSG_IMAGE:\"TIMImageElem\",MSG_SOUND:\"TIMSoundElem\",MSG_AUDIO:\"TIMSoundElem\",MSG_FILE:\"TIMFileElem\",MSG_FACE:\"TIMFaceElem\",MSG_VIDEO:\"TIMVideoFileElem\",MSG_GEO:\"TIMLocationElem\",MSG_GRP_TIP:\"TIMGroupTipElem\",MSG_GRP_SYS_NOTICE:\"TIMGroupSystemNoticeElem\",MSG_CUSTOM:\"TIMCustomElem\",MSG_MERGER:\"TIMRelayElem\",MSG_PRIORITY_HIGH:\"High\",MSG_PRIORITY_NORMAL:\"Normal\",MSG_PRIORITY_LOW:\"Low\",MSG_PRIORITY_LOWEST:\"Lowest\",CONV_C2C:\"C2C\",CONV_GROUP:\"GROUP\",CONV_SYSTEM:\"@TIM#SYSTEM\",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,GRP_PRIVATE:\"Private\",GRP_WORK:\"Private\",GRP_PUBLIC:\"Public\",GRP_CHATROOM:\"ChatRoom\",GRP_MEETING:\"ChatRoom\",GRP_AVCHATROOM:\"AVChatRoom\",GRP_MBR_ROLE_OWNER:\"Owner\",GRP_MBR_ROLE_ADMIN:\"Admin\",GRP_MBR_ROLE_MEMBER:\"Member\",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,MSG_REMIND_ACPT_AND_NOTE:\"AcceptAndNotify\",MSG_REMIND_ACPT_NOT_NOTE:\"AcceptNotNotify\",MSG_REMIND_DISCARD:\"Discard\",GENDER_UNKNOWN:\"Gender_Type_Unknown\",GENDER_FEMALE:\"Gender_Type_Female\",GENDER_MALE:\"Gender_Type_Male\",KICKED_OUT_MULT_ACCOUNT:\"multipleAccount\",KICKED_OUT_MULT_DEVICE:\"multipleDevice\",KICKED_OUT_USERSIG_EXPIRED:\"userSigExpired\",ALLOW_TYPE_ALLOW_ANY:\"AllowType_Type_AllowAny\",ALLOW_TYPE_NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_TYPE_DENY_ANY:\"AllowType_Type_DenyAny\",FORBID_TYPE_NONE:\"AdminForbid_Type_None\",FORBID_TYPE_SEND_OUT:\"AdminForbid_Type_SendOut\",JOIN_OPTIONS_FREE_ACCESS:\"FreeAccess\",JOIN_OPTIONS_NEED_PERMISSION:\"NeedPermission\",JOIN_OPTIONS_DISABLE_APPLY:\"DisableApply\",JOIN_STATUS_SUCCESS:\"JoinedSuccess\",JOIN_STATUS_ALREADY_IN_GROUP:\"AlreadyInGroup\",JOIN_STATUS_WAIT_APPROVAL:\"WaitAdminApproval\",GRP_PROFILE_OWNER_ID:\"ownerID\",GRP_PROFILE_CREATE_TIME:\"createTime\",GRP_PROFILE_LAST_INFO_TIME:\"lastInfoTime\",GRP_PROFILE_MEMBER_NUM:\"memberNum\",GRP_PROFILE_MAX_MEMBER_NUM:\"maxMemberNum\",GRP_PROFILE_JOIN_OPTION:\"joinOption\",GRP_PROFILE_INTRODUCTION:\"introduction\",GRP_PROFILE_NOTIFICATION:\"notification\",GRP_PROFILE_MUTE_ALL_MBRS:\"muteAllMembers\",SNS_ADD_TYPE_SINGLE:\"Add_Type_Single\",SNS_ADD_TYPE_BOTH:\"Add_Type_Both\",SNS_DELETE_TYPE_SINGLE:\"Delete_Type_Single\",SNS_DELETE_TYPE_BOTH:\"Delete_Type_Both\",SNS_APPLICATION_TYPE_BOTH:\"Pendency_Type_Both\",SNS_APPLICATION_SENT_TO_ME:\"Pendency_Type_ComeIn\",SNS_APPLICATION_SENT_BY_ME:\"Pendency_Type_SendOut\",SNS_APPLICATION_AGREE:\"Response_Action_Agree\",SNS_APPLICATION_AGREE_AND_ADD:\"Response_Action_AgreeAndAdd\",SNS_CHECK_TYPE_BOTH:\"CheckResult_Type_Both\",SNS_CHECK_TYPE_SINGLE:\"CheckResult_Type_Single\",SNS_TYPE_NO_RELATION:\"CheckResult_Type_NoRelation\",SNS_TYPE_A_WITH_B:\"CheckResult_Type_AWithB\",SNS_TYPE_B_WITH_A:\"CheckResult_Type_BWithA\",SNS_TYPE_BOTH_WAY:\"CheckResult_Type_BothWay\",NET_STATE_CONNECTED:\"connected\",NET_STATE_CONNECTING:\"connecting\",NET_STATE_DISCONNECTED:\"disconnected\",MSG_AT_ALL:\"__kImSDK_MesssageAtALL__\"},ao=[].slice,so={},io=function(e,t,n){if(!(t in so)){for(var o=[],r=0;r<t;r++)o[r]=\"a[\"+r+\"]\";so[t]=Function(\"C,a\",\"return new C(\"+o.join(\",\")+\")\")}return so[t](e,n)},uo=Function.bind||function(e){var t=xt(this),n=ao.call(arguments,1),o=function(){var r=n.concat(ao.call(arguments));return this instanceof o?io(t,r.length,r):t.apply(e,r)};return B(t.prototype)&&(o.prototype=t.prototype),o};vt({target:\"Function\",proto:!0},{bind:uo});var co=$t.map,lo=Qn(\"map\");vt({target:\"Array\",proto:!0,forced:!lo},{map:function(e){return co(this,e,arguments.length>1?arguments[1]:void 0)}});var po=function(){function e(){o(this,e),this.cache=[],this.options=null}return a(e,[{key:\"use\",value:function(e){if(\"function\"!=typeof e)throw\"middleware must be a function\";return this.cache.push(e),this}},{key:\"next\",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:\"run\",value:function(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}]),e}(),go=Ee.f,ho=Function.prototype,fo=ho.toString,_o=/^\\\\s*function ([^ (]*)/;R&&!(\"name\"in ho)&&go(ho,\"name\",{configurable:!0,get:function(){try{return fo.call(this).match(_o)[1]}catch(cy){return\"\"}}});var mo=A((function(e,t){var n,o,r,a,s,i,u,c,l,d,p,g,h,f,_,m,v,M;e.exports=(n=\"function\"==typeof Promise,o=\"object\"==typeof self?self:E,r=\"undefined\"!=typeof Symbol,a=\"undefined\"!=typeof Map,s=\"undefined\"!=typeof Set,i=\"undefined\"!=typeof WeakMap,u=\"undefined\"!=typeof WeakSet,c=\"undefined\"!=typeof DataView,l=r&&void 0!==Symbol.iterator,d=r&&void 0!==Symbol.toStringTag,p=s&&\"function\"==typeof Set.prototype.entries,g=a&&\"function\"==typeof Map.prototype.entries,h=p&&Object.getPrototypeOf((new Set).entries()),f=g&&Object.getPrototypeOf((new Map).entries()),_=l&&\"function\"==typeof Array.prototype[Symbol.iterator],m=_&&Object.getPrototypeOf([][Symbol.iterator]()),v=l&&\"function\"==typeof String.prototype[Symbol.iterator],M=v&&Object.getPrototypeOf(\"\"[Symbol.iterator]()),function(e){var t=typeof e;if(\"object\"!==t)return t;if(null===e)return\"null\";if(e===o)return\"global\";if(Array.isArray(e)&&(!1===d||!(Symbol.toStringTag in e)))return\"Array\";if(\"object\"==typeof window&&null!==window){if(\"object\"==typeof window.location&&e===window.location)return\"Location\";if(\"object\"==typeof window.document&&e===window.document)return\"Document\";if(\"object\"==typeof window.navigator){if(\"object\"==typeof window.navigator.mimeTypes&&e===window.navigator.mimeTypes)return\"MimeTypeArray\";if(\"object\"==typeof window.navigator.plugins&&e===window.navigator.plugins)return\"PluginArray\"}if((\"function\"==typeof window.HTMLElement||\"object\"==typeof window.HTMLElement)&&e instanceof window.HTMLElement){if(\"BLOCKQUOTE\"===e.tagName)return\"HTMLQuoteElement\";if(\"TD\"===e.tagName)return\"HTMLTableDataCellElement\";if(\"TH\"===e.tagName)return\"HTMLTableHeaderCellElement\"}}var r=d&&e[Symbol.toStringTag];if(\"string\"==typeof r)return r;var l=Object.getPrototypeOf(e);return l===RegExp.prototype?\"RegExp\":l===Date.prototype?\"Date\":n&&l===Promise.prototype?\"Promise\":s&&l===Set.prototype?\"Set\":a&&l===Map.prototype?\"Map\":u&&l===WeakSet.prototype?\"WeakSet\":i&&l===WeakMap.prototype?\"WeakMap\":c&&l===DataView.prototype?\"DataView\":a&&l===f?\"Map Iterator\":s&&l===h?\"Set Iterator\":_&&l===m?\"Array Iterator\":v&&l===M?\"String Iterator\":null===l?\"Object\":Object.prototype.toString.call(e).slice(8,-1)})}));vt({target:\"Array\",stat:!0},{isArray:Kt});var vo=function(e,t,n){var o,r;return Kn&&\"function\"==typeof(o=t.constructor)&&o!==n&&B(r=o.prototype)&&r!==n.prototype&&Kn(e,r),e},Mo=st.f,yo=Te.f,Io=Ee.f,To=Et.trim,Do=L.Number,So=Do.prototype,Eo=\"Number\"==F(qt(So)),Ao=function(e){if(ee(e))throw TypeError(\"Cannot convert a Symbol value to a number\");var t,n,o,r,a,s,i,u,c=fe(e,\"number\");if(\"string\"==typeof c&&c.length>2)if(43===(t=(c=To(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+c}for(s=(a=c.slice(2)).length,i=0;i<s;i++)if((u=a.charCodeAt(i))<48||u>r)return NaN;return parseInt(a,o)}return+c};if(_t(\"Number\",!Do(\" 0o1\")||!Do(\"0b1\")||Do(\"+0x1\"))){for(var ko,No=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof No&&(Eo?O((function(){So.valueOf.call(n)})):\"Number\"!=F(n))?vo(new Do(Ao(t)),n,No):Ao(t)},Co=R?Mo(Do):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range\".split(\",\"),Lo=0;Co.length>Lo;Lo++)se(Do,ko=Co[Lo])&&!se(No,ko)&&Io(No,ko,yo(Do,ko));No.prototype=So,So.constructor=No,He(L,\"Number\",No)}var Oo=O((function(){Rn(1)}));vt({target:\"Object\",stat:!0,forced:Oo,sham:!Cn},{getPrototypeOf:function(e){return Rn(re(e))}});var Ro=Date.prototype,bo=Ro.toString,wo=Ro.getTime;\"Invalid Date\"!=String(new Date(NaN))&&He(Ro,\"toString\",(function(){var e=wo.call(this);return e==e?bo.call(this):\"Invalid Date\"}));var Go=dn?{}.toString:function(){return\"[object \"+hn(this)+\"]\"};dn||He(Object.prototype,\"toString\",Go,{unsafe:!0});var Po=function(){var e=De(this),t=\"\";return e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),e.dotAll&&(t+=\"s\"),e.unicode&&(t+=\"u\"),e.sticky&&(t+=\"y\"),t},Uo=RegExp.prototype,Fo=Uo.toString,qo=O((function(){return\"/a/b\"!=Fo.call({source:\"a\",flags:\"b\"})})),xo=\"toString\"!=Fo.name;(qo||xo)&&He(RegExp.prototype,\"toString\",(function(){var e=De(this),t=Mt(e.source),n=e.flags;return\"/\"+t+\"/\"+Mt(void 0===n&&e instanceof RegExp&&!(\"flags\"in Uo)?Po.call(e):n)}),{unsafe:!0});var Vo,Ko,Bo=function(e,t){return RegExp(e,t)},Ho={UNSUPPORTED_Y:O((function(){var e=Bo(\"a\",\"y\");return e.lastIndex=2,null!=e.exec(\"abcd\")})),BROKEN_CARET:O((function(){var e=Bo(\"^r\",\"gy\");return e.lastIndex=2,null!=e.exec(\"str\")}))},jo=O((function(){var e=RegExp(\".\",\"string\".charAt(0));return!(e.dotAll&&e.exec(\"\\\\n\")&&\"s\"===e.flags)})),Yo=O((function(){var e=RegExp(\"(?<a>b)\",\"string\".charAt(5));return\"b\"!==e.exec(\"b\").groups.a||\"bc\"!==\"b\".replace(e,\"$<a>c\")})),$o=Be.get,Wo=RegExp.prototype.exec,zo=oe(\"native-string-replace\",String.prototype.replace),Jo=Wo,Xo=(Vo=/a/,Ko=/b*/g,Wo.call(Vo,\"a\"),Wo.call(Ko,\"a\"),0!==Vo.lastIndex||0!==Ko.lastIndex),Qo=Ho.UNSUPPORTED_Y||Ho.BROKEN_CARET,Zo=void 0!==/()??/.exec(\"\")[1];(Xo||Zo||Qo||jo||Yo)&&(Jo=function(e){var t,n,o,r,a,s,i,u=this,c=$o(u),l=Mt(e),d=c.raw;if(d)return d.lastIndex=u.lastIndex,t=Jo.call(d,l),u.lastIndex=d.lastIndex,t;var p=c.groups,g=Qo&&u.sticky,h=Po.call(u),f=u.source,_=0,m=l;if(g&&(-1===(h=h.replace(\"y\",\"\")).indexOf(\"g\")&&(h+=\"g\"),m=l.slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&\"\\\\n\"!==l.charAt(u.lastIndex-1))&&(f=\"(?: \"+f+\")\",m=\" \"+m,_++),n=new RegExp(\"^(?:\"+f+\")\",h)),Zo&&(n=new RegExp(\"^\"+f+\"$(?!\\\\\\\\s)\",h)),Xo&&(o=u.lastIndex),r=Wo.call(g?n:u,m),g?r?(r.input=r.input.slice(_),r[0]=r[0].slice(_),r.index=u.lastIndex,u.lastIndex+=r[0].length):u.lastIndex=0:Xo&&r&&(u.lastIndex=u.global?r.index+r[0].length:o),Zo&&r&&r.length>1&&zo.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r&&p)for(r.groups=s=qt(null),a=0;a<p.length;a++)s[(i=p[a])[0]]=r[i[1]];return r});var er=Jo;vt({target:\"RegExp\",proto:!0,forced:/./.exec!==er},{exec:er});var tr=ge(\"species\"),nr=RegExp.prototype,or=function(e,t,n,o){var r=ge(e),a=!O((function(){var t={};return t[r]=function(){return 7},7!=\"\"[e](t)})),s=a&&!O((function(){var t=!1,n=/a/;return\"split\"===e&&((n={}).constructor={},n.constructor[tr]=function(){return n},n.flags=\"\",n[r]=/./[r]),n.exec=function(){return t=!0,null},n[r](\"\"),!t}));if(!a||!s||n){var i=/./[r],u=t(r,\"\"[e],(function(e,t,n,o,r){var s=t.exec;return s===er||s===nr.exec?a&&!r?{done:!0,value:i.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}));He(String.prototype,e,u[0]),He(nr,r,u[1])}o&&Ae(nr[r],\"sham\",!0)},rr=Nn.charAt,ar=function(e,t,n){return t+(n?rr(e,t).length:1)},sr=function(e,t){var n=e.exec;if(\"function\"==typeof n){var o=n.call(e,t);if(\"object\"!=typeof o)throw TypeError(\"RegExp exec method returned something other than an Object or null\");return o}if(\"RegExp\"!==F(e))throw TypeError(\"RegExp#exec called on incompatible receiver\");return er.call(e,t)};or(\"match\",(function(e,t,n){return[function(t){var n=V(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,n):new RegExp(t)[e](Mt(n))},function(e){var o=De(this),r=Mt(e),a=n(t,o,r);if(a.done)return a.value;if(!o.global)return sr(o,r);var s=o.unicode;o.lastIndex=0;for(var i,u=[],c=0;null!==(i=sr(o,r));){var l=Mt(i[0]);u[c]=l,\"\"===l&&(o.lastIndex=ar(r,ze(o.lastIndex),s)),c++}return 0===c?null:u}]})),vt({target:\"Date\",stat:!0},{now:function(){return(new Date).getTime()}});var ir=ge(\"unscopables\"),ur=Array.prototype;null==ur[ir]&&Ee.f(ur,ir,{configurable:!0,value:qt(null)});var cr=function(e){ur[ir][e]=!0},lr=et.includes;vt({target:\"Array\",proto:!0},{includes:function(e){return lr(this,e,arguments.length>1?arguments[1]:void 0)}}),cr(\"includes\");var dr=ge(\"match\"),pr=function(e){var t;return B(e)&&(void 0!==(t=e[dr])?!!t:\"RegExp\"==F(e))},gr=function(e){if(pr(e))throw TypeError(\"The method doesn\\'t accept regular expressions\");return e},hr=ge(\"match\"),fr=function(e){var t=/./;try{\"/./\"[e](t)}catch(n){try{return t[hr]=!1,\"/./\"[e](t)}catch(o){}}return!1};vt({target:\"String\",proto:!0,forced:!fr(\"includes\")},{includes:function(e){return!!~Mt(V(this)).indexOf(Mt(gr(e)),arguments.length>1?arguments[1]:void 0)}});var _r=function(e){var t=Mt(V(this)),n=\"\",o=$e(e);if(o<0||Infinity==o)throw RangeError(\"Wrong number of repetitions\");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n},mr=Math.ceil,vr=function(e){return function(t,n,o){var r,a,s=Mt(V(t)),i=s.length,u=void 0===o?\" \":Mt(o),c=ze(n);return c<=i||\"\"==u?s:((a=_r.call(u,mr((r=c-i)/u.length))).length>r&&(a=a.slice(0,r)),e?s+a:a+s)}},Mr={start:vr(!1),end:vr(!0)}.start,yr=Math.abs,Ir=Date.prototype,Tr=Ir.getTime,Dr=Ir.toISOString,Sr=O((function(){return\"0385-07-25T07:06:39.999Z\"!=Dr.call(new Date(-50000000000001))}))||!O((function(){Dr.call(new Date(NaN))}))?function(){if(!isFinite(Tr.call(this)))throw RangeError(\"Invalid time value\");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?\"-\":e>9999?\"+\":\"\";return n+Mr(yr(e),n?6:4,0)+\"-\"+Mr(this.getUTCMonth()+1,2,0)+\"-\"+Mr(this.getUTCDate(),2,0)+\"T\"+Mr(this.getUTCHours(),2,0)+\":\"+Mr(this.getUTCMinutes(),2,0)+\":\"+Mr(this.getUTCSeconds(),2,0)+\".\"+Mr(t,3,0)+\"Z\"}:Dr;vt({target:\"Date\",proto:!0,forced:Date.prototype.toISOString!==Sr},{toISOString:Sr});var Er=Math.floor,Ar=\"\".replace,kr=/\\\\$([$&\\'`]|\\\\d{1,2}|<[^>]*>)/g,Nr=/\\\\$([$&\\'`]|\\\\d{1,2})/g,Cr=function(e,t,n,o,r,a){var s=n+e.length,i=o.length,u=Nr;return void 0!==r&&(r=re(r),u=kr),Ar.call(a,u,(function(a,u){var c;switch(u.charAt(0)){case\"$\":return\"$\";case\"&\":return e;case\"`\":return t.slice(0,n);case\"\\'\":return t.slice(s);case\"<\":c=r[u.slice(1,-1)];break;default:var l=+u;if(0===l)return a;if(l>i){var d=Er(l/10);return 0===d?a:d<=i?void 0===o[d-1]?u.charAt(1):o[d-1]+u.charAt(1):a}c=o[l-1]}return void 0===c?\"\":c}))},Lr=ge(\"replace\"),Or=Math.max,Rr=Math.min,br=\"$0\"===\"a\".replace(/./,\"$0\"),wr=!!/./[Lr]&&\"\"===/./[Lr](\"a\",\"$0\");or(\"replace\",(function(e,t,n){var o=wr?\"$\":\"$0\";return[function(e,n){var o=V(this),r=null==e?void 0:e[Lr];return void 0!==r?r.call(e,o,n):t.call(Mt(o),e,n)},function(e,r){var a=De(this),s=Mt(e);if(\"string\"==typeof r&&-1===r.indexOf(o)&&-1===r.indexOf(\"$<\")){var i=n(t,a,s,r);if(i.done)return i.value}var u=\"function\"==typeof r;u||(r=Mt(r));var c=a.global;if(c){var l=a.unicode;a.lastIndex=0}for(var d=[];;){var p=sr(a,s);if(null===p)break;if(d.push(p),!c)break;\"\"===Mt(p[0])&&(a.lastIndex=ar(s,ze(a.lastIndex),l))}for(var g,h=\"\",f=0,_=0;_<d.length;_++){p=d[_];for(var m=Mt(p[0]),v=Or(Rr($e(p.index),s.length),0),M=[],y=1;y<p.length;y++)M.push(void 0===(g=p[y])?g:String(g));var I=p.groups;if(u){var T=[m].concat(M,v,s);void 0!==I&&T.push(I);var D=Mt(r.apply(void 0,T))}else D=Cr(m,s,v,M,I,r);v>=f&&(h+=s.slice(f,v)+D,f=v+m.length)}return h+s.slice(f)}]}),!!O((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:\"7\"},e},\"7\"!==\"\".replace(e,\"$<a>\")}))||!br||wr);var Gr=Be.set,Pr=Be.getterFor(\"Array Iterator\"),Ur=$n(Array,\"Array\",(function(e,t){Gr(this,{type:\"Array Iterator\",target:K(e),index:0,kind:t})}),(function(){var e=Pr(this),t=e.target,n=e.kind,o=e.index++;return!t||o>=t.length?(e.target=void 0,{value:void 0,done:!0}):\"keys\"==n?{value:o,done:!1}:\"values\"==n?{value:t[o],done:!1}:{value:[o,t[o]],done:!1}}),\"values\");rn.Arguments=rn.Array,cr(\"keys\"),cr(\"values\"),cr(\"entries\");var Fr=ge(\"iterator\"),qr=ge(\"toStringTag\"),xr=Ur.values;for(var Vr in Xt){var Kr=L[Vr],Br=Kr&&Kr.prototype;if(Br){if(Br[Fr]!==xr)try{Ae(Br,Fr,xr)}catch(cy){Br[Fr]=xr}if(Br[qr]||Ae(Br,qr,Vr),Xt[Vr])for(var Hr in Ur)if(Br[Hr]!==Ur[Hr])try{Ae(Br,Hr,Ur[Hr])}catch(cy){Br[Hr]=Ur[Hr]}}}var jr=Qn(\"slice\"),Yr=ge(\"species\"),$r=[].slice,Wr=Math.max;vt({target:\"Array\",proto:!0,forced:!jr},{slice:function(e,t){var n,o,r,a=K(this),s=ze(a.length),i=Qe(e,s),u=Qe(void 0===t?s:t,s);if(Kt(a)&&(\"function\"!=typeof(n=a.constructor)||n!==Array&&!Kt(n.prototype)?B(n)&&null===(n=n[Yr])&&(n=void 0):n=void 0,n===Array||void 0===n))return $r.call(a,i,u);for(o=new(void 0===n?Array:n)(Wr(u-i,0)),r=0;i<u;i++,r++)i in a&&cn(o,r,a[i]);return o.length=r,o}});var zr=[].join,Jr=x!=Object,Xr=Wt(\"join\",\",\");vt({target:\"Array\",proto:!0,forced:Jr||!Xr},{join:function(e){return zr.call(K(this),void 0===e?\",\":e)}});var Qr=et.indexOf,Zr=[].indexOf,ea=!!Zr&&1/[1].indexOf(1,-0)<0,ta=Wt(\"indexOf\");vt({target:\"Array\",proto:!0,forced:ea||!ta},{indexOf:function(e){return ea?Zr.apply(this,arguments)||0:Qr(this,e,arguments.length>1?arguments[1]:void 0)}});var na=st.f,oa={}.toString,ra=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],aa={f:function(e){return ra&&\"[object Window]\"==oa.call(e)?function(e){try{return na(e)}catch(cy){return ra.slice()}}(e):na(K(e))}},sa=aa.f,ia=O((function(){return!Object.getOwnPropertyNames(1)}));vt({target:\"Object\",stat:!0,forced:ia},{getOwnPropertyNames:sa});var ua=$t.find,ca=!0;\"find\"in[]&&Array(1).find((function(){ca=!1})),vt({target:\"Array\",proto:!0,forced:ca},{find:function(e){return ua(this,e,arguments.length>1?arguments[1]:void 0)}}),cr(\"find\");var la,da,pa,ga,ha=L.Promise,fa=function(e,t,n){for(var o in t)He(e,o,t[o],n);return e},_a=ge(\"species\"),ma=function(e){var t=j(e),n=Ee.f;R&&t&&!t[_a]&&n(t,_a,{configurable:!0,get:function(){return this}})},va=function(e,t,n){if(!(e instanceof t))throw TypeError(\"Incorrect \"+(n?n+\" \":\"\")+\"invocation\");return e},Ma=function(e,t){this.stopped=e,this.result=t},ya=function(e,t,n){var o,r,a,s,i,u,c,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),g=!(!n||!n.INTERRUPTED),h=Vt(t,l,1+d+g),f=function(e){return o&&nn(o),new Ma(!0,e)},_=function(e){return d?(De(e),g?h(e[0],e[1],f):h(e[0],e[1])):g?h(e,f):h(e)};if(p)o=e;else{if(\"function\"!=typeof(r=_n(e)))throw TypeError(\"Target is not iterable\");if(un(r)){for(a=0,s=ze(e.length);s>a;a++)if((i=_(e[a]))&&i instanceof Ma)return i;return new Ma(!1)}o=r.call(e)}for(u=o.next;!(c=u.call(o)).done;){try{i=_(c.value)}catch(cy){throw nn(o),cy}if(\"object\"==typeof i&&i&&i instanceof Ma)return i}return new Ma(!1)},Ia=ge(\"species\"),Ta=function(e,t){var n,o=De(e).constructor;return void 0===o||null==(n=De(o)[Ia])?t:xt(n)},Da=/(?:iphone|ipod|ipad).*applewebkit/i.test(Y),Sa=\"process\"==F(L.process),Ea=L.setImmediate,Aa=L.clearImmediate,ka=L.process,Na=L.MessageChannel,Ca=L.Dispatch,La=0,Oa={};try{la=L.location}catch(cy){}var Ra=function(e){if(Oa.hasOwnProperty(e)){var t=Oa[e];delete Oa[e],t()}},ba=function(e){return function(){Ra(e)}},wa=function(e){Ra(e.data)},Ga=function(e){L.postMessage(String(e),la.protocol+\"//\"+la.host)};Ea&&Aa||(Ea=function(e){for(var t=[],n=arguments.length,o=1;n>o;)t.push(arguments[o++]);return Oa[++La]=function(){(\"function\"==typeof e?e:Function(e)).apply(void 0,t)},da(La),La},Aa=function(e){delete Oa[e]},Sa?da=function(e){ka.nextTick(ba(e))}:Ca&&Ca.now?da=function(e){Ca.now(ba(e))}:Na&&!Da?(ga=(pa=new Na).port2,pa.port1.onmessage=wa,da=Vt(ga.postMessage,ga,1)):L.addEventListener&&\"function\"==typeof postMessage&&!L.importScripts&&la&&\"file:\"!==la.protocol&&!O(Ga)?(da=Ga,L.addEventListener(\"message\",wa,!1)):da=\"onreadystatechange\"in Me(\"script\")?function(e){bt.appendChild(Me(\"script\")).onreadystatechange=function(){bt.removeChild(this),Ra(e)}}:function(e){setTimeout(ba(e),0)});var Pa,Ua,Fa,qa,xa,Va,Ka,Ba,Ha={set:Ea,clear:Aa},ja=/iphone|ipod|ipad/i.test(Y)&&void 0!==L.Pebble,Ya=/web0s(?!.*chrome)/i.test(Y),$a=Te.f,Wa=Ha.set,za=L.MutationObserver||L.WebKitMutationObserver,Ja=L.document,Xa=L.process,Qa=L.Promise,Za=$a(L,\"queueMicrotask\"),es=Za&&Za.value;es||(Pa=function(){var e,t;for(Sa&&(e=Xa.domain)&&e.exit();Ua;){t=Ua.fn,Ua=Ua.next;try{t()}catch(cy){throw Ua?qa():Fa=void 0,cy}}Fa=void 0,e&&e.enter()},Da||Sa||Ya||!za||!Ja?!ja&&Qa&&Qa.resolve?((Ka=Qa.resolve(void 0)).constructor=Qa,Ba=Ka.then,qa=function(){Ba.call(Ka,Pa)}):qa=Sa?function(){Xa.nextTick(Pa)}:function(){Wa.call(L,Pa)}:(xa=!0,Va=Ja.createTextNode(\"\"),new za(Pa).observe(Va,{characterData:!0}),qa=function(){Va.data=xa=!xa}));var ts,ns,os,rs,as=es||function(e){var t={fn:e,next:void 0};Fa&&(Fa.next=t),Ua||(Ua=t,qa()),Fa=t},ss=function(e){var t,n;this.promise=new e((function(e,o){if(void 0!==t||void 0!==n)throw TypeError(\"Bad Promise constructor\");t=e,n=o})),this.resolve=xt(t),this.reject=xt(n)},is={f:function(e){return new ss(e)}},us=function(e,t){if(De(e),B(t)&&t.constructor===e)return t;var n=is.f(e);return(0,n.resolve)(t),n.promise},cs=function(e){try{return{error:!1,value:e()}}catch(cy){return{error:!0,value:cy}}},ls=\"object\"==typeof window,ds=Ha.set,ps=ge(\"species\"),gs=\"Promise\",hs=Be.get,fs=Be.set,_s=Be.getterFor(gs),ms=ha&&ha.prototype,vs=ha,Ms=ms,ys=L.TypeError,Is=L.document,Ts=L.process,Ds=is.f,Ss=Ds,Es=!!(Is&&Is.createEvent&&L.dispatchEvent),As=\"function\"==typeof PromiseRejectionEvent,ks=!1,Ns=_t(gs,(function(){var e=Oe(vs),t=e!==String(vs);if(!t&&66===X)return!0;if(X>=51&&/native code/.test(e))return!1;var n=new vs((function(e){e(1)})),o=function(e){e((function(){}),(function(){}))};return(n.constructor={})[ps]=o,!(ks=n.then((function(){}))instanceof o)||!t&&ls&&!As})),Cs=Ns||!Tn((function(e){vs.all(e).catch((function(){}))})),Ls=function(e){var t;return!(!B(e)||\"function\"!=typeof(t=e.then))&&t},Os=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;as((function(){for(var o=e.value,r=1==e.state,a=0;n.length>a;){var s,i,u,c=n[a++],l=r?c.ok:c.fail,d=c.resolve,p=c.reject,g=c.domain;try{l?(r||(2===e.rejection&&Gs(e),e.rejection=1),!0===l?s=o:(g&&g.enter(),s=l(o),g&&(g.exit(),u=!0)),s===c.promise?p(ys(\"Promise-chain cycle\")):(i=Ls(s))?i.call(s,d,p):d(s)):p(o)}catch(cy){g&&!u&&g.exit(),p(cy)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&bs(e)}))}},Rs=function(e,t,n){var o,r;Es?((o=Is.createEvent(\"Event\")).promise=t,o.reason=n,o.initEvent(e,!1,!0),L.dispatchEvent(o)):o={promise:t,reason:n},!As&&(r=L[\"on\"+e])?r(o):\"unhandledrejection\"===e&&function(e,t){var n=L.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}(\"Unhandled promise rejection\",n)},bs=function(e){ds.call(L,(function(){var t,n=e.facade,o=e.value;if(ws(e)&&(t=cs((function(){Sa?Ts.emit(\"unhandledRejection\",o,n):Rs(\"unhandledrejection\",n,o)})),e.rejection=Sa||ws(e)?2:1,t.error))throw t.value}))},ws=function(e){return 1!==e.rejection&&!e.parent},Gs=function(e){ds.call(L,(function(){var t=e.facade;Sa?Ts.emit(\"rejectionHandled\",t):Rs(\"rejectionhandled\",t,e.value)}))},Ps=function(e,t,n){return function(o){e(t,o,n)}},Us=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Os(e,!0))},Fs=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw ys(\"Promise can\\'t be resolved itself\");var o=Ls(t);o?as((function(){var n={done:!1};try{o.call(t,Ps(Fs,n,e),Ps(Us,n,e))}catch(cy){Us(n,cy,e)}})):(e.value=t,e.state=1,Os(e,!1))}catch(cy){Us({done:!1},cy,e)}}};if(Ns&&(Ms=(vs=function(e){va(this,vs,gs),xt(e),ts.call(this);var t=hs(this);try{e(Ps(Fs,t),Ps(Us,t))}catch(cy){Us(t,cy)}}).prototype,(ts=function(e){fs(this,{type:gs,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=fa(Ms,{then:function(e,t){var n=_s(this),o=Ds(Ta(this,vs));return o.ok=\"function\"!=typeof e||e,o.fail=\"function\"==typeof t&&t,o.domain=Sa?Ts.domain:void 0,n.parent=!0,n.reactions.push(o),0!=n.state&&Os(n,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),ns=function(){var e=new ts,t=hs(e);this.promise=e,this.resolve=Ps(Fs,t),this.reject=Ps(Us,t)},is.f=Ds=function(e){return e===vs||e===os?new ns(e):Ss(e)},\"function\"==typeof ha&&ms!==Object.prototype)){rs=ms.then,ks||(He(ms,\"then\",(function(e,t){var n=this;return new vs((function(e,t){rs.call(n,e,t)})).then(e,t)}),{unsafe:!0}),He(ms,\"catch\",Ms.catch,{unsafe:!0}));try{delete ms.constructor}catch(cy){}Kn&&Kn(ms,Ms)}vt({global:!0,wrap:!0,forced:Ns},{Promise:vs}),Fn(vs,gs,!1),ma(gs),os=j(gs),vt({target:gs,stat:!0,forced:Ns},{reject:function(e){var t=Ds(this);return t.reject.call(void 0,e),t.promise}}),vt({target:gs,stat:!0,forced:Ns},{resolve:function(e){return us(this,e)}}),vt({target:gs,stat:!0,forced:Cs},{all:function(e){var t=this,n=Ds(t),o=n.resolve,r=n.reject,a=cs((function(){var n=xt(t.resolve),a=[],s=0,i=1;ya(e,(function(e){var u=s++,c=!1;a.push(void 0),i++,n.call(t,e).then((function(e){c||(c=!0,a[u]=e,--i||o(a))}),r)})),--i||o(a)}));return a.error&&r(a.value),n.promise},race:function(e){var t=this,n=Ds(t),o=n.reject,r=cs((function(){var r=xt(t.resolve);ya(e,(function(e){r.call(t,e).then(n.resolve,o)}))}));return r.error&&o(r.value),n.promise}});var qs=Nn.codeAt;vt({target:\"String\",proto:!0},{codePointAt:function(e){return qs(this,e)}});var xs=Et.trim,Vs=L.parseFloat,Ks=1/Vs(yt+\"-0\")!=-Infinity?function(e){var t=xs(Mt(e)),n=Vs(t);return 0===n&&\"-\"==t.charAt(0)?-0:n}:Vs;vt({global:!0,forced:parseFloat!=Ks},{parseFloat:Ks});var Bs={WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,UNI_NATIVE_APP:14},Hs=\"1.7.3\",js=537048168,Ys=1,$s=2,Ws=3,zs={HOST:{CURRENT:{DEFAULT:\"\",BACKUP:\"\"},TEST:{DEFAULT:\"wss://wss-dev.tim.qq.com\",BACKUP:\"wss://wss-dev.tim.qq.com\"},PRODUCTION:{DEFAULT:\"wss://wss.im.qcloud.com\",BACKUP:\"wss://wss.tim.qq.com\"},OVERSEA_PRODUCTION:{DEFAULT:\"wss://wss.im.qcloud.com\",BACKUP:\"wss://wss.im.qcloud.com\"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;e===Ys?this.CURRENT=this.TEST:e===$s?this.CURRENT=this.PRODUCTION:e===Ws&&(this.CURRENT=this.OVERSEA_PRODUCTION)}},NAME:{OPEN_IM:\"openim\",GROUP:\"group_open_http_svc\",GROUP_ATTR:\"group_open_attr_http_svc\",FRIEND:\"sns\",PROFILE:\"profile\",RECENT_CONTACT:\"recentcontact\",PIC:\"openpic\",BIG_GROUP_NO_AUTH:\"group_open_http_noauth_svc\",BIG_GROUP_LONG_POLLING:\"group_open_long_polling_http_svc\",BIG_GROUP_LONG_POLLING_NO_AUTH:\"group_open_long_polling_http_noauth_svc\",IM_OPEN_STAT:\"imopenstat\",WEB_IM:\"webim\",IM_COS_SIGN:\"im_cos_sign_svr\",CUSTOM_UPLOAD:\"im_cos_msg\",HEARTBEAT:\"heartbeat\",IM_OPEN_PUSH:\"im_open_push\",IM_OPEN_STATUS:\"im_open_status\",IM_LONG_MESSAGE:\"im_long_msg\",CLOUD_CONTROL:\"im_sdk_config_mgr\"},CMD:{ACCESS_LAYER:\"accesslayer\",LOGIN:\"wslogin\",LOGOUT_LONG_POLL:\"longpollinglogout\",LOGOUT:\"wslogout\",HELLO:\"wshello\",PORTRAIT_GET:\"portrait_get_all\",PORTRAIT_SET:\"portrait_set\",GET_LONG_POLL_ID:\"getlongpollingid\",LONG_POLL:\"longpolling\",AVCHATROOM_LONG_POLL:\"get_msg\",ADD_FRIEND:\"friend_add\",UPDATE_FRIEND:\"friend_update\",GET_FRIEND_LIST:\"friend_get\",GET_FRIEND_PROFILE:\"friend_get_list\",DELETE_FRIEND:\"friend_delete\",CHECK_FRIEND:\"friend_check\",GET_FRIEND_GROUP_LIST:\"group_get\",RESPOND_FRIEND_APPLICATION:\"friend_response\",GET_FRIEND_APPLICATION_LIST:\"pendency_get\",DELETE_FRIEND_APPLICATION:\"pendency_delete\",REPORT_FRIEND_APPLICATION:\"pendency_report\",GET_GROUP_APPLICATION:\"get_pendency\",CREATE_FRIEND_GROUP:\"group_add\",DELETE_FRIEND_GROUP:\"group_delete\",UPDATE_FRIEND_GROUP:\"group_update\",GET_BLACKLIST:\"black_list_get\",ADD_BLACKLIST:\"black_list_add\",DELETE_BLACKLIST:\"black_list_delete\",CREATE_GROUP:\"create_group\",GET_JOINED_GROUPS:\"get_joined_group_list\",SET_GROUP_ATTRIBUTES:\"set_group_attr\",MODIFY_GROUP_ATTRIBUTES:\"modify_group_attr\",DELETE_GROUP_ATTRIBUTES:\"delete_group_attr\",CLEAR_GROUP_ATTRIBUTES:\"clear_group_attr\",GET_GROUP_ATTRIBUTES:\"get_group_attr\",SEND_MESSAGE:\"sendmsg\",REVOKE_C2C_MESSAGE:\"msgwithdraw\",DELETE_C2C_MESSAGE:\"delete_c2c_msg_ramble\",SEND_GROUP_MESSAGE:\"send_group_msg\",REVOKE_GROUP_MESSAGE:\"group_msg_recall\",DELETE_GROUP_MESSAGE:\"delete_group_ramble_msg_by_seq\",GET_GROUP_INFO:\"get_group_info\",GET_GROUP_MEMBER_INFO:\"get_specified_group_member_info\",GET_GROUP_MEMBER_LIST:\"get_group_member_info\",QUIT_GROUP:\"quit_group\",CHANGE_GROUP_OWNER:\"change_group_owner\",DESTROY_GROUP:\"destroy_group\",ADD_GROUP_MEMBER:\"add_group_member\",DELETE_GROUP_MEMBER:\"delete_group_member\",SEARCH_GROUP_BY_ID:\"get_group_public_info\",APPLY_JOIN_GROUP:\"apply_join_group\",HANDLE_APPLY_JOIN_GROUP:\"handle_apply_join_group\",HANDLE_GROUP_INVITATION:\"handle_invite_join_group\",MODIFY_GROUP_INFO:\"modify_group_base_info\",MODIFY_GROUP_MEMBER_INFO:\"modify_group_member_info\",DELETE_GROUP_SYSTEM_MESSAGE:\"deletemsg\",DELETE_GROUP_AT_TIPS:\"deletemsg\",GET_CONVERSATION_LIST:\"get\",PAGING_GET_CONVERSATION_LIST:\"page_get\",DELETE_CONVERSATION:\"delete\",PIN_CONVERSATION:\"top\",GET_MESSAGES:\"getmsg\",GET_C2C_ROAM_MESSAGES:\"getroammsg\",GET_GROUP_ROAM_MESSAGES:\"group_msg_get\",SET_C2C_MESSAGE_READ:\"msgreaded\",GET_PEER_READ_TIME:\"get_peer_read_time\",SET_GROUP_MESSAGE_READ:\"msg_read_report\",FILE_READ_AND_WRITE_AUTHKEY:\"authkey\",FILE_UPLOAD:\"pic_up\",COS_SIGN:\"cos\",COS_PRE_SIG:\"pre_sig\",TIM_WEB_REPORT_V2:\"tim_web_report_v2\",BIG_DATA_HALLWAY_AUTH_KEY:\"authkey\",GET_ONLINE_MEMBER_NUM:\"get_online_member_num\",ALIVE:\"alive\",MESSAGE_PUSH:\"msg_push\",MESSAGE_PUSH_ACK:\"ws_msg_push_ack\",STATUS_FORCEOFFLINE:\"stat_forceoffline\",DOWNLOAD_MERGER_MESSAGE:\"get_relay_json_msg\",UPLOAD_MERGER_MESSAGE:\"save_relay_json_msg\",FETCH_CLOUD_CONTROL_CONFIG:\"fetch_config\",PUSHED_CLOUD_CONTROL_CONFIG:\"push_configv2\"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:\"v4\",group_open_http_svc:\"v4\",sns:\"v4\",profile:\"v4\",recentcontact:\"v4\",openpic:\"v4\",group_open_http_noauth_svc:\"v4\",group_open_long_polling_http_svc:\"v4\",group_open_long_polling_http_noauth_svc:\"v4\",imopenstat:\"v4\",im_cos_sign_svr:\"v4\",im_cos_msg:\"v4\",webim:\"v4\",im_open_push:\"v4\",im_open_status:\"v4\"}};zs.HOST.setCurrent($s);var Js,Xs,Qs,Zs=\"undefined\"!=typeof wx&&\"function\"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting),ei=\"undefined\"!=typeof qq&&\"function\"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),ti=\"undefined\"!=typeof tt&&\"function\"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),ni=\"undefined\"!=typeof swan&&\"function\"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),oi=\"undefined\"!=typeof my&&\"function\"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),ri=\"undefined\"!=typeof uni&&\"undefined\"==typeof window,ai=Zs||ei||ti||ni||oi||ri,si=(\"undefined\"!=typeof uni||\"undefined\"!=typeof window)&&!ai,ii=ei?qq:ti?tt:ni?swan:oi?my:Zs?wx:ri?uni:{},ui=(Js=\"WEB\",Ti?Js=\"WEB\":ei?Js=\"QQ_MP\":ti?Js=\"TT_MP\":ni?Js=\"BAIDU_MP\":oi?Js=\"ALI_MP\":Zs?Js=\"WX_MP\":ri&&(Js=\"UNI_NATIVE_APP\"),Bs[Js]),ci=si&&window&&window.navigator&&window.navigator.userAgent||\"\",li=/AppleWebKit\\\\/([\\\\d.]+)/i.exec(ci),di=(li&&parseFloat(li.pop()),/iPad/i.test(ci)),pi=/iPhone/i.test(ci)&&!di,gi=/iPod/i.test(ci),hi=pi||di||gi,fi=(function(){var e=ci.match(/OS (\\\\d+)_/i);e&&e[1]&&e[1]}(),/Android/i.test(ci)),_i=function(){var e=ci.match(/Android (\\\\d+)(?:\\\\.(\\\\d+))?(?:\\\\.(\\\\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+\".\"+e[2]):t||null}(),mi=(fi&&/webkit/i.test(ci),/Firefox/i.test(ci),/Edge/i.test(ci)),vi=!mi&&/Chrome/i.test(ci),Mi=(function(){var e=ci.match(/Chrome\\\\/(\\\\d+)/);e&&e[1]&&parseFloat(e[1])}(),/MSIE/.test(ci)),yi=(/MSIE\\\\s8\\\\.0/.test(ci),function(){var e=/MSIE\\\\s(\\\\d+)\\\\.\\\\d/.exec(ci),t=e&&parseFloat(e[1]);return!t&&/Trident\\\\/7.0/i.test(ci)&&/rv:11.0/.test(ci)&&(t=11),t}()),Ii=(/Safari/i.test(ci),/TBS\\\\/\\\\d+/i.test(ci)),Ti=(function(){var e=ci.match(/TBS\\\\/(\\\\d+)/i);if(e&&e[1])e[1]}(),!Ii&&/MQQBrowser\\\\/\\\\d+/i.test(ci),!Ii&&/ QQBrowser\\\\/\\\\d+/i.test(ci),/(micromessenger|webbrowser)/i.test(ci)),Di=/Windows/i.test(ci),Si=/MAC OS X/i.test(ci),Ei=(/MicroMessenger/i.test(ci),!O((function(){return Object.isExtensible(Object.preventExtensions({}))}))),Ai=A((function(e){var t=Ee.f,n=!1,o=ce(\"meta\"),r=0,a=Object.isExtensible||function(){return!0},s=function(e){t(e,o,{value:{objectID:\"O\"+r++,weakData:{}}})},i=e.exports={enable:function(){i.enable=function(){},n=!0;var e=st.f,t=[].splice,r={};r[o]=1,e(r).length&&(st.f=function(n){for(var r=e(n),a=0,s=r.length;a<s;a++)if(r[a]===o){t.call(r,a,1);break}return r},vt({target:\"Object\",stat:!0,forced:!0},{getOwnPropertyNames:aa.f}))},fastKey:function(e,t){if(!B(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!se(e,o)){if(!a(e))return\"F\";if(!t)return\"E\";s(e)}return e[o].objectID},getWeakData:function(e,t){if(!se(e,o)){if(!a(e))return!0;if(!t)return!1;s(e)}return e[o].weakData},onFreeze:function(e){return Ei&&n&&a(e)&&!se(e,o)&&s(e),e}};Pe[o]=!0})),ki=(Ai.enable,Ai.fastKey,Ai.getWeakData,Ai.onFreeze,Ee.f),Ni=Ai.fastKey,Ci=Be.set,Li=Be.getterFor,Oi=(function(e,t,n){var o=-1!==e.indexOf(\"Map\"),r=-1!==e.indexOf(\"Weak\"),a=o?\"set\":\"add\",s=L[e],i=s&&s.prototype,u=s,c={},l=function(e){var t=i[e];He(i,e,\"add\"==e?function(e){return t.call(this,0===e?0:e),this}:\"delete\"==e?function(e){return!(r&&!B(e))&&t.call(this,0===e?0:e)}:\"get\"==e?function(e){return r&&!B(e)?void 0:t.call(this,0===e?0:e)}:\"has\"==e?function(e){return!(r&&!B(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(_t(e,\"function\"!=typeof s||!(r||i.forEach&&!O((function(){(new s).entries().next()})))))u=n.getConstructor(t,e,o,a),Ai.enable();else if(_t(e,!0)){var d=new u,p=d[a](r?{}:-0,1)!=d,g=O((function(){d.has(1)})),h=Tn((function(e){new s(e)})),f=!r&&O((function(){for(var e=new s,t=5;t--;)e[a](t,t);return!e.has(-0)}));h||((u=t((function(t,n){va(t,u,e);var r=vo(new s,t,u);return null!=n&&ya(n,r[a],{that:r,AS_ENTRIES:o}),r}))).prototype=i,i.constructor=u),(g||f)&&(l(\"delete\"),l(\"has\"),o&&l(\"get\")),(f||p)&&l(a),r&&i.clear&&delete i.clear}c[e]=u,vt({global:!0,forced:u!=s},c),Fn(u,e),r||n.setStrong(u,e,o)}(\"Map\",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,n,o){var r=e((function(e,a){va(e,r,t),Ci(e,{type:t,index:qt(null),first:void 0,last:void 0,size:0}),R||(e.size=0),null!=a&&ya(a,e[o],{that:e,AS_ENTRIES:n})})),a=Li(t),s=function(e,t,n){var o,r,s=a(e),u=i(e,t);return u?u.value=n:(s.last=u={index:r=Ni(t,!0),key:t,value:n,previous:o=s.last,next:void 0,removed:!1},s.first||(s.first=u),o&&(o.next=u),R?s.size++:e.size++,\"F\"!==r&&(s.index[r]=u)),e},i=function(e,t){var n,o=a(e),r=Ni(t);if(\"F\"!==r)return o.index[r];for(n=o.first;n;n=n.next)if(n.key==t)return n};return fa(r.prototype,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,R?e.size=0:this.size=0},delete:function(e){var t=a(this),n=i(this,e);if(n){var o=n.next,r=n.previous;delete t.index[n.index],n.removed=!0,r&&(r.next=o),o&&(o.previous=r),t.first==n&&(t.first=o),t.last==n&&(t.last=r),R?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=a(this),o=Vt(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(o(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!i(this,e)}}),fa(r.prototype,n?{get:function(e){var t=i(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),R&&ki(r.prototype,\"size\",{get:function(){return a(this).size}}),r},setStrong:function(e,t,n){var o=t+\" Iterator\",r=Li(t),a=Li(o);$n(e,t,(function(e,t){Ci(this,{type:o,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?\"keys\"==t?{value:n.key,done:!1}:\"values\"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?\"entries\":\"values\",!n,!0),ma(t)}}),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{});Xs=\"undefined\"!=typeof console?console:void 0!==Oi&&Oi.console?Oi.console:\"undefined\"!=typeof window&&window.console?window.console:{};for(var Ri=function(){},bi=[\"assert\",\"clear\",\"count\",\"debug\",\"dir\",\"dirxml\",\"error\",\"exception\",\"group\",\"groupCollapsed\",\"groupEnd\",\"info\",\"log\",\"markTimeline\",\"profile\",\"profileEnd\",\"table\",\"time\",\"timeEnd\",\"timeStamp\",\"trace\",\"warn\"],wi=bi.length;wi--;)Qs=bi[wi],console[Qs]||(Xs[Qs]=Ri);Xs.methods=bi;var Gi=Xs,Pi=0,Ui=function(){return(new Date).getTime()+Pi},Fi=function(){Pi=0},qi=0,xi=new Map;function Vi(){var e,t=((e=new Date).setTime(Ui()),e);return\"TIM \"+t.toLocaleTimeString(\"en-US\",{hour12:!1})+\".\"+function(e){var t;switch(e.toString().length){case 1:t=\"00\"+e;break;case 2:t=\"0\"+e;break;default:t=e}return t}(t.getMilliseconds())+\":\"}var Ki={arguments2String:function(e){var t;if(1===e.length)t=Vi()+e[0];else{t=Vi();for(var n=0,o=e.length;n<o;n++)Xi(e[n])?Zi(e[n])?t+=au(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=\" \"}return t},debug:function(){if(qi<=-1){var e=this.arguments2String(arguments);Gi.debug(e)}},log:function(){if(qi<=0){var e=this.arguments2String(arguments);Gi.log(e)}},info:function(){if(qi<=1){var e=this.arguments2String(arguments);Gi.info(e)}},warn:function(){if(qi<=2){var e=this.arguments2String(arguments);Gi.warn(e)}},error:function(){if(qi<=3){var e=this.arguments2String(arguments);Gi.error(e)}},time:function(e){xi.set(e,ou.now())},timeEnd:function(e){if(xi.has(e)){var t=ou.now()-xi.get(e);return xi.delete(e),t}return Gi.warn(\"未找到对应label: \".concat(e,\", 请在调用 logger.timeEnd 前，调用 logger.time\")),0},setLevel:function(e){e<4&&Gi.log(Vi()+\"set level from \"+qi+\" to \"+e),qi=e},getLevel:function(){return qi}},Bi=[\"url\"],Hi=function(e){return\"file\"===eu(e)},ji=function(e){return null!==e&&(\"number\"==typeof e&&!isNaN(e-0)||\"object\"===n(e)&&e.constructor===Number)},Yi=function(e){return\"string\"==typeof e},$i=function(e){return null!==e&&\"object\"===n(e)},Wi=function(e){if(\"object\"!==n(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var o=t;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return t===o},zi=function(e){return\"function\"==typeof Array.isArray?Array.isArray(e):\"array\"===eu(e)},Ji=function(e){return void 0===e},Xi=function(e){return zi(e)||$i(e)},Qi=function(e){return\"function\"==typeof e},Zi=function(e){return e instanceof Error},eu=function(e){return Object.prototype.toString.call(e).match(/^\\\\[object (.*)\\\\]$/)[1].toLowerCase()},tu=function(e){if(\"string\"!=typeof e)return!1;var t=e[0];return!/[^a-zA-Z0-9]/.test(t)},nu=0;Date.now||(Date.now=function(){return(new Date).getTime()});var ou={now:function(){0===nu&&(nu=Date.now()-1);var e=Date.now()-nu;return e>4294967295?(nu+=4294967295,Date.now()-nu):e},utc:function(){return Math.round(Date.now()/1e3)}},ru=function e(t,n,o,r){if(!Xi(t)||!Xi(n))return 0;for(var a,s=0,i=Object.keys(n),u=0,c=i.length;u<c;u++)if(a=i[u],!(Ji(n[a])||o&&o.includes(a)))if(Xi(t[a])&&Xi(n[a]))s+=e(t[a],n[a],o,r);else{if(r&&r.includes(n[a]))continue;t[a]!==n[a]&&(t[a]=n[a],s+=1)}return s},au=function(e){return JSON.stringify(e,[\"message\",\"code\"])},su=function(e){if(0===e.length)return 0;for(var t=0,n=0,o=\"undefined\"!=typeof document&&void 0!==document.characterSet?document.characterSet:\"UTF-8\";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:!1===o?3:2;return n},iu=function(e){var t=e||99999999;return Math.round(Math.random()*t)},uu=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",cu=uu.length,lu=function(e,t){for(var n in e)if(e[n]===t)return!0;return!1},du={},pu=function(){if(ai)return\"https:\";if(si&&\"undefined\"==typeof window)return\"https:\";var e=window.location.protocol;return[\"http:\",\"https:\"].indexOf(e)<0&&(e=\"http:\"),e},gu=function(e){return-1===e.indexOf(\"http://\")||-1===e.indexOf(\"https://\")?\"https://\"+e:e.replace(/https|http/,\"https\")},hu=function e(t){if(0===Object.getOwnPropertyNames(t).length)return Object.create(null);var o=Array.isArray(t)?[]:Object.create(null),r=\"\";for(var a in t)null!==t[a]?void 0!==t[a]?(r=n(t[a]),[\"string\",\"number\",\"function\",\"boolean\"].indexOf(r)>=0?o[a]=t[a]:o[a]=e(t[a])):o[a]=void 0:o[a]=null;return o};function fu(e,t){zi(e)&&zi(t)?t.forEach((function(t){var n=t.key,o=t.value,r=e.find((function(e){return e.key===n}));r?r.value=o:e.push({key:n,value:o})})):Ki.warn(\"updateCustomField target 或 source 不是数组，忽略此次更新。\")}var _u=function(e){return e===ro.GRP_PUBLIC},mu=function(e){return e===ro.GRP_AVCHATROOM},vu=function(e){return Yi(e)&&e.slice(0,3)===ro.CONV_C2C},Mu=function(e){return Yi(e)&&e.slice(0,5)===ro.CONV_GROUP},yu=function(e){return Yi(e)&&e===ro.CONV_SYSTEM};function Iu(e,t){var n={};return Object.keys(e).forEach((function(o){n[o]=t(e[o],o)})),n}function Tu(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return\"\".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())}function Du(){var e=\"unknown\";if(Si&&(e=\"mac\"),Di&&(e=\"windows\"),hi&&(e=\"ios\"),fi&&(e=\"android\"),ai)try{var t=ii.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(cy){}return e}function Su(e){var t=e.originUrl,n=void 0===t?void 0:t,o=e.originWidth,r=e.originHeight,a=e.min,s=void 0===a?198:a,i=parseInt(o),u=parseInt(r),c={url:void 0,width:0,height:0};return(i<=u?i:u)<=s?(c.url=n,c.width=i,c.height=u):(u<=i?(c.width=Math.ceil(i*s/u),c.height=s):(c.width=s,c.height=Math.ceil(u*s/i)),c.url=\"\".concat(n,198===s?\"?imageView2/3/w/198/h/198\":\"?imageView2/3/w/720/h/720\")),Ji(n)?g(c,Bi):c}function Eu(e){var t=e[2];e[2]=e[1],e[1]=t;for(var n=0;n<e.length;n++)e[n].setType(n)}function Au(e){var t=e.servcmd;return t.slice(t.indexOf(\".\")+1)}function ku(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function Nu(e,t){return e.includes(t)}function Cu(e,t){return e.includes(t)}var Lu=Object.prototype.hasOwnProperty;function Ou(e){if(null==e)return!0;if(\"boolean\"==typeof e)return!1;if(\"number\"==typeof e)return 0===e;if(\"string\"==typeof e)return 0===e.length;if(\"function\"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return\"\"===e.message;if(Wi(e)){for(var t in e)if(Lu.call(e,t))return!1;return!0}return!(\"map\"!==eu(e)&&!function(e){return\"set\"===eu(e)}(e)&&!Hi(e))&&0===e.size}function Ru(e,t,n){if(void 0===t)return!0;var o=!0;if(\"object\"===mo(t).toLowerCase())Object.keys(t).forEach((function(r){var a=1===e.length?e[0][r]:void 0;o=!!bu(a,t[r],n,r)&&o}));else if(\"array\"===mo(t).toLowerCase())for(var r=0;r<t.length;r++)o=!!bu(e[r],t[r],n,t[r].name)&&o;if(o)return o;throw new Error(\"Params validate failed.\")}function bu(e,t,n,o){if(void 0===t)return!0;var r=!0;return t.required&&Ou(e)&&(Gi.error(\"TIM [\".concat(n,\\'] Missing required params: \"\\').concat(o,\\'\".\\')),r=!1),Ou(e)||mo(e).toLowerCase()===t.type.toLowerCase()||(Gi.error(\"TIM [\".concat(n,\\'] Invalid params: type check failed for \"\\').concat(o,\\'\".Expected \\').concat(t.type,\".\")),r=!1),t.validator&&!t.validator(e)&&(Gi.error(\"TIM [\".concat(n,\"] Invalid params: custom validator check failed for params.\")),r=!1),r}var wu={f:ge},Gu=L,Pu=Ee.f,Uu=$t.forEach,Fu=Ge(\"hidden\"),qu=ge(\"toPrimitive\"),xu=Be.set,Vu=Be.getterFor(\"Symbol\"),Ku=Object.prototype,Bu=L.Symbol,Hu=j(\"JSON\",\"stringify\"),ju=Te.f,Yu=Ee.f,$u=aa.f,Wu=G.f,zu=oe(\"symbols\"),Ju=oe(\"op-symbols\"),Xu=oe(\"string-to-symbol-registry\"),Qu=oe(\"symbol-to-string-registry\"),Zu=oe(\"wks\"),ec=L.QObject,tc=!ec||!ec.prototype||!ec.prototype.findChild,nc=R&&O((function(){return 7!=qt(Yu({},\"a\",{get:function(){return Yu(this,\"a\",{value:7}).a}})).a}))?function(e,t,n){var o=ju(Ku,t);o&&delete Ku[t],Yu(e,t,n),o&&e!==Ku&&Yu(Ku,t,o)}:Yu,oc=function(e,t){var n=zu[e]=qt(Bu.prototype);return xu(n,{type:\"Symbol\",tag:e,description:t}),R||(n.description=t),n},rc=function(e,t,n){e===Ku&&rc(Ju,t,n),De(e);var o=_e(t);return De(n),se(zu,o)?(n.enumerable?(se(e,Fu)&&e[Fu][o]&&(e[Fu][o]=!1),n=qt(n,{enumerable:P(0,!1)})):(se(e,Fu)||Yu(e,Fu,P(1,{})),e[Fu][o]=!0),nc(e,o,n)):Yu(e,o,n)},ac=function(e,t){De(e);var n=K(t),o=Ot(n).concat(cc(n));return Uu(o,(function(t){R&&!sc.call(n,t)||rc(e,t,n[t])})),e},sc=function(e){var t=_e(e),n=Wu.call(this,t);return!(this===Ku&&se(zu,t)&&!se(Ju,t))&&(!(n||!se(this,t)||!se(zu,t)||se(this,Fu)&&this[Fu][t])||n)},ic=function(e,t){var n=K(e),o=_e(t);if(n!==Ku||!se(zu,o)||se(Ju,o)){var r=ju(n,o);return!r||!se(zu,o)||se(n,Fu)&&n[Fu][o]||(r.enumerable=!0),r}},uc=function(e){var t=$u(K(e)),n=[];return Uu(t,(function(e){se(zu,e)||se(Pe,e)||n.push(e)})),n},cc=function(e){var t=e===Ku,n=$u(t?Ju:K(e)),o=[];return Uu(n,(function(e){!se(zu,e)||t&&!se(Ku,e)||o.push(zu[e])})),o};if(Q||(He((Bu=function(){if(this instanceof Bu)throw TypeError(\"Symbol is not a constructor\");var e=arguments.length&&void 0!==arguments[0]?Mt(arguments[0]):void 0,t=ce(e),n=function(e){this===Ku&&n.call(Ju,e),se(this,Fu)&&se(this[Fu],t)&&(this[Fu][t]=!1),nc(this,t,P(1,e))};return R&&tc&&nc(Ku,t,{configurable:!0,set:n}),oc(t,e)}).prototype,\"toString\",(function(){return Vu(this).tag})),He(Bu,\"withoutSetter\",(function(e){return oc(ce(e),e)})),G.f=sc,Ee.f=rc,Te.f=ic,st.f=aa.f=uc,it.f=cc,wu.f=function(e){return oc(ge(e),e)},R&&(Yu(Bu.prototype,\"description\",{configurable:!0,get:function(){return Vu(this).description}}),He(Ku,\"propertyIsEnumerable\",sc,{unsafe:!0}))),vt({global:!0,wrap:!0,forced:!Q,sham:!Q},{Symbol:Bu}),Uu(Ot(Zu),(function(e){!function(e){var t=Gu.Symbol||(Gu.Symbol={});se(t,e)||Pu(t,e,{value:wu.f(e)})}(e)})),vt({target:\"Symbol\",stat:!0,forced:!Q},{for:function(e){var t=Mt(e);if(se(Xu,t))return Xu[t];var n=Bu(t);return Xu[t]=n,Qu[n]=t,n},keyFor:function(e){if(!ee(e))throw TypeError(e+\" is not a symbol\");if(se(Qu,e))return Qu[e]},useSetter:function(){tc=!0},useSimple:function(){tc=!1}}),vt({target:\"Object\",stat:!0,forced:!Q,sham:!R},{create:function(e,t){return void 0===t?qt(e):ac(qt(e),t)},defineProperty:rc,defineProperties:ac,getOwnPropertyDescriptor:ic}),vt({target:\"Object\",stat:!0,forced:!Q},{getOwnPropertyNames:uc,getOwnPropertySymbols:cc}),vt({target:\"Object\",stat:!0,forced:O((function(){it.f(1)}))},{getOwnPropertySymbols:function(e){return it.f(re(e))}}),Hu){var lc=!Q||O((function(){var e=Bu();return\"[null]\"!=Hu([e])||\"{}\"!=Hu({a:e})||\"{}\"!=Hu(Object(e))}));vt({target:\"JSON\",stat:!0,forced:lc},{stringify:function(e,t,n){for(var o,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(o=t,(B(t)||void 0!==e)&&!ee(e))return Kt(t)||(t=function(e,t){if(\"function\"==typeof o&&(t=o.call(this,e,t)),!ee(t))return t}),r[1]=t,Hu.apply(null,r)}})}Bu.prototype[qu]||Ae(Bu.prototype,qu,Bu.prototype.valueOf),Fn(Bu,\"Symbol\"),Pe[Fu]=!0;var dc=Ee.f,pc=L.Symbol;if(R&&\"function\"==typeof pc&&(!(\"description\"in pc.prototype)||void 0!==pc().description)){var gc={},hc=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof hc?new pc(e):void 0===e?pc():pc(e);return\"\"===e&&(gc[t]=!0),t};ct(hc,pc);var fc=hc.prototype=pc.prototype;fc.constructor=hc;var _c=fc.toString,mc=\"Symbol(test)\"==String(pc(\"test\")),vc=/^Symbol\\\\((.*)\\\\)[^)]+$/;dc(fc,\"description\",{configurable:!0,get:function(){var e=B(this)?this.valueOf():this,t=_c.call(e);if(se(gc,e))return\"\";var n=mc?t.slice(7,-1):t.replace(vc,\"$1\");return\"\"===n?void 0:n}}),vt({global:!0,forced:!0},{Symbol:hc})}var Mc,yc=Te.f,Ic=\"\".startsWith,Tc=Math.min,Dc=fr(\"startsWith\"),Sc=!(Dc||(Mc=yc(String.prototype,\"startsWith\"),!Mc||Mc.writable));vt({target:\"String\",proto:!0,forced:!Sc&&!Dc},{startsWith:function(e){var t=Mt(V(this));gr(e);var n=ze(Tc(arguments.length>1?arguments[1]:void 0,t.length)),o=Mt(e);return Ic?Ic.call(t,o,n):t.slice(n,n+o.length)===o}});var Ec={UNSEND:\"unSend\",SUCCESS:\"success\",FAIL:\"fail\"},Ac={NOT_START:\"notStart\",PENDING:\"pengding\",RESOLVED:\"resolved\",REJECTED:\"rejected\"},kc=function(e){return!!e&&(!!(vu(e)||Mu(e)||yu(e))||(console.warn(\"非法的会话 ID:\".concat(e,\"。会话 ID 组成方式：C2C + userID（单聊）GROUP + groupID（群聊）@TIM#SYSTEM（系统通知会话）\")),!1))},Nc=\"请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#\",Cc=function(e){return e.param?\"\".concat(e.api,\" \").concat(e.param,\" \").concat(e.desc,\"。\").concat(Nc).concat(e.api):\"\".concat(e.api,\" \").concat(e.desc,\"。\").concat(Nc).concat(e.api)},Lc={type:\"String\",required:!0},Oc={type:\"Array\",required:!0},Rc={type:\"Object\",required:!0},bc={login:{userID:Lc,userSig:Lc},addToBlacklist:{userIDList:Oc},on:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Cc({api:\"on\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Cc({api:\"on\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"on 接口的 handler 参数推荐使用具名函数。具名函数可以使用 off 接口取消订阅，匿名函数无法取消订阅。\"),!0)}}],once:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Cc({api:\"once\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Cc({api:\"once\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"once 接口的 handler 参数推荐使用具名函数。\"),!0)}}],off:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Cc({api:\"off\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Cc({api:\"off\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"off 接口无法为匿名函数取消监听事件。\"),!0)}}],sendMessage:[t({name:\"message\"},Rc)],getMessageList:{conversationID:t(t({},Lc),{},{validator:function(e){return kc(e)}}),nextReqMessageID:{type:\"String\"},count:{type:\"Number\",validator:function(e){return!(!Ji(e)&&!/^[1-9][0-9]*$/.test(e))||(console.warn(Cc({api:\"getMessageList\",param:\"count\",desc:\"必须为正整数\"})),!1)}}},setMessageRead:{conversationID:t(t({},Lc),{},{validator:function(e){return kc(e)}})},getConversationProfile:[t(t({name:\"conversationID\"},Lc),{},{validator:function(e){return kc(e)}})],deleteConversation:[t(t({name:\"conversationID\"},Lc),{},{validator:function(e){return kc(e)}})],pinConversation:{conversationID:t(t({},Lc),{},{validator:function(e){return kc(e)}}),isPinned:t({},{type:\"Boolean\",required:!0})},getGroupList:{groupProfileFilter:{type:\"Array\"}},getGroupProfile:{groupID:Lc,groupCustomFieldFilter:{type:\"Array\"},memberCustomFieldFilter:{type:\"Array\"}},getGroupProfileAdvance:{groupIDList:Oc},createGroup:{name:Lc},joinGroup:{groupID:Lc,type:{type:\"String\"},applyMessage:{type:\"String\"}},quitGroup:[t({name:\"groupID\"},Lc)],handleApplication:{message:Rc,handleAction:Lc,handleMessage:{type:\"String\"}},changeGroupOwner:{groupID:Lc,newOwnerID:Lc},updateGroupProfile:{groupID:Lc,muteAllMembers:{type:\"Boolean\"}},dismissGroup:[t({name:\"groupID\"},Lc)],searchGroupByID:[t({name:\"groupID\"},Lc)],initGroupAttributes:{groupID:Lc,groupAttributes:t(t({},Rc),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!Yi(e[n]))return console.warn(Cc({api:\"initGroupAttributes\",desc:\"群属性 value 必须是字符串\"})),t=!1})),t}})},setGroupAttributes:{groupID:Lc,groupAttributes:t(t({},Rc),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!Yi(e[n]))return console.warn(Cc({api:\"setGroupAttributes\",desc:\"群属性 value 必须是字符串\"})),t=!1})),t}})},deleteGroupAttributes:{groupID:Lc,keyList:{type:\"Array\",validator:function(e){if(Ji(e))return console.warn(Cc({api:\"deleteGroupAttributes\",desc:\"缺少必填参数：keyList\"})),!1;if(!zi(e))return!1;if(!Ou(e)){var t=!0;return e.forEach((function(e){if(!Yi(e))return console.warn(Cc({api:\"deleteGroupAttributes\",desc:\"群属性 key 必须是字符串\"})),t=!1})),t}return!0}}},getGroupAttributes:{groupID:Lc,keyList:{type:\"Array\",validator:function(e){if(Ji(e))return console.warn(Cc({api:\"getGroupAttributes\",desc:\"缺少必填参数：keyList\"})),!1;if(!zi(e))return!1;if(!Ou(e)){var t=!0;return e.forEach((function(e){if(!Yi(e))return console.warn(Cc({api:\"getGroupAttributes\",desc:\"群属性 key 必须是字符串\"})),t=!1})),t}return!0}}},getGroupMemberList:{groupID:Lc,offset:{type:\"Number\"},count:{type:\"Number\"}},getGroupMemberProfile:{groupID:Lc,userIDList:Oc,memberCustomFieldFilter:{type:\"Array\"}},addGroupMember:{groupID:Lc,userIDList:Oc},setGroupMemberRole:{groupID:Lc,userID:Lc,role:Lc},setGroupMemberMuteTime:{groupID:Lc,userID:Lc,muteTime:{type:\"Number\",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:Lc,userID:{type:\"String\"},nameCard:{type:\"String\",validator:function(e){return Yi(e)?(e.length,!0):(console.warn(Cc({api:\"setGroupMemberNameCard\",param:\"nameCard\",desc:\"类型必须为 String\"})),!1)}}},setMessageRemindType:{groupID:Lc,messageRemindType:Lc},setGroupMemberCustomField:{groupID:Lc,userID:{type:\"String\"},memberCustomField:Oc},deleteGroupMember:{groupID:Lc},createTextMessage:{to:Lc,conversationType:Lc,payload:t(t({},Rc),{},{validator:function(e){return Wi(e)?Yi(e.text)?0!==e.text.length||(console.warn(Cc({api:\"createTextMessage\",desc:\"消息内容不能为空\"})),!1):(console.warn(Cc({api:\"createTextMessage\",param:\"payload.text\",desc:\"类型必须为 String\"})),!1):(console.warn(Cc({api:\"createTextMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createTextAtMessage:{to:Lc,conversationType:Lc,payload:t(t({},Rc),{},{validator:function(e){return Wi(e)?Yi(e.text)?0===e.text.length?(console.warn(Cc({api:\"createTextAtMessage\",desc:\"消息内容不能为空\"})),!1):!(e.atUserList&&!zi(e.atUserList))||(console.warn(Cc({api:\"createTextAtMessage\",desc:\"payload.atUserList 类型必须为数组\"})),!1):(console.warn(Cc({api:\"createTextAtMessage\",param:\"payload.text\",desc:\"类型必须为 String\"})),!1):(console.warn(Cc({api:\"createTextAtMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createCustomMessage:{to:Lc,conversationType:Lc,payload:t(t({},Rc),{},{validator:function(e){return Wi(e)?e.data&&!Yi(e.data)?(console.warn(Cc({api:\"createCustomMessage\",param:\"payload.data\",desc:\"类型必须为 String\"})),!1):e.description&&!Yi(e.description)?(console.warn(Cc({api:\"createCustomMessage\",param:\"payload.description\",desc:\"类型必须为 String\"})),!1):!(e.extension&&!Yi(e.extension))||(console.warn(Cc({api:\"createCustomMessage\",param:\"payload.extension\",desc:\"类型必须为 String\"})),!1):(console.warn(Cc({api:\"createCustomMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createImageMessage:{to:Lc,conversationType:Lc,payload:t(t({},Rc),{},{validator:function(e){if(!Wi(e))return console.warn(Cc({api:\"createImageMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(Ji(e.file))return console.warn(Cc({api:\"createImageMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(si){if(!(e.file instanceof HTMLInputElement||Hi(e.file)))return Wi(e.file)&&\"undefined\"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(console.warn(Cc({api:\"createImageMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Cc({api:\"createImageMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Cc({api:\"createImageMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1}return!0},onProgress:{type:\"Function\",required:!1,validator:function(e){return Ji(e)&&console.warn(Cc({api:\"createImageMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}})},createAudioMessage:{to:Lc,conversationType:Lc,payload:t(t({},Rc),{},{validator:function(e){return!!Wi(e)||(console.warn(Cc({api:\"createAudioMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return Ji(e)&&console.warn(Cc({api:\"createAudioMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createVideoMessage:{to:Lc,conversationType:Lc,payload:t(t({},Rc),{},{validator:function(e){if(!Wi(e))return console.warn(Cc({api:\"createVideoMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(Ji(e.file))return console.warn(Cc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(si){if(!(e.file instanceof HTMLInputElement||Hi(e.file)))return Wi(e.file)&&\"undefined\"!=typeof uni?!!Hi(e.file.tempFile)||(console.warn(Cc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Cc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Cc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1}return!0}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return Ji(e)&&console.warn(Cc({api:\"createVideoMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createFaceMessage:{to:Lc,conversationType:Lc,payload:t(t({},Rc),{},{validator:function(e){return Wi(e)?ji(e.index)?!!Yi(e.data)||(console.warn(Cc({api:\"createFaceMessage\",param:\"payload.data\",desc:\"类型必须为 String\"})),!1):(console.warn(Cc({api:\"createFaceMessage\",param:\"payload.index\",desc:\"类型必须为 Number\"})),!1):(console.warn(Cc({api:\"createFaceMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createFileMessage:{to:Lc,conversationType:Lc,payload:t(t({},Rc),{},{validator:function(e){if(!Wi(e))return console.warn(Cc({api:\"createFileMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(Ji(e.file))return console.warn(Cc({api:\"createFileMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(si){if(!(e.file instanceof HTMLInputElement||Hi(e.file)))return Wi(e.file)&&\"undefined\"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(console.warn(Cc({api:\"createFileMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Cc({api:\"createFileMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Cc({api:\"createFileMessage\",desc:\"您没有选择文件，无法发送\"})),!1}return!0}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return Ji(e)&&console.warn(Cc({api:\"createFileMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createMergerMessage:{to:Lc,conversationType:Lc,payload:t(t({},Rc),{},{validator:function(e){if(Ou(e.messageList))return console.warn(Cc({api:\"createMergerMessage\",desc:\"不能为空数组\"})),!1;if(Ou(e.compatibleText))return console.warn(Cc({api:\"createMergerMessage\",desc:\"类型必须为 String，且不能为空\"})),!1;var t=!1;return e.messageList.forEach((function(e){e.status===Ec.FAIL&&(t=!0)})),!t||(console.warn(Cc({api:\"createMergerMessage\",desc:\"不支持合并已发送失败的消息\"})),!1)}})},revokeMessage:[t(t({name:\"message\"},Rc),{},{validator:function(e){return Ou(e)?(console.warn(\"revokeMessage 请传入消息（Message）实例\"),!1):e.conversationType===ro.CONV_SYSTEM?(console.warn(\"revokeMessage 不能撤回系统会话消息，只能撤回单聊消息或群消息\"),!1):!0!==e.isRevoked||(console.warn(\"revokeMessage 消息已经被撤回，请勿重复操作\"),!1)}})],deleteMessage:[t(t({name:\"messageList\"},Oc),{},{validator:function(e){return!Ou(e)||(console.warn(Cc({api:\"deleteMessage\",param:\"messageList\",desc:\"不能为空数组\"})),!1)}})],getUserProfile:{userIDList:{type:\"Array\",validator:function(e){return zi(e)?(0===e.length&&console.warn(Cc({api:\"getUserProfile\",param:\"userIDList\",desc:\"不能为空数组\"})),!0):(console.warn(Cc({api:\"getUserProfile\",param:\"userIDList\",desc:\"必须为数组\"})),!1)}}},updateMyProfile:{profileCustomField:{type:\"Array\",validator:function(e){return!!Ji(e)||(!!zi(e)||(console.warn(Cc({api:\"updateMyProfile\",param:\"profileCustomField\",desc:\"必须为数组\"})),!1))}}},addFriend:{to:Lc,source:{type:\"String\",required:!0,validator:function(e){return!!e&&(e.startsWith(\"AddSource_Type_\")?!(e.replace(\"AddSource_Type_\",\"\").length>8)||(console.warn(Cc({api:\"addFriend\",desc:\"加好友来源字段的关键字长度不得超过8字节\"})),!1):(console.warn(Cc({api:\"addFriend\",desc:\"加好友来源字段的前缀必须是：AddSource_Type_\"})),!1))}},remark:{type:\"String\",required:!1,validator:function(e){return!(Yi(e)&&e.length>96)||(console.warn(Cc({api:\"updateFriend\",desc:\" 备注长度最长不得超过 96 个字节\"})),!1)}}},deleteFriend:{userIDList:Oc},checkFriend:{userIDList:Oc},getFriendProfile:{userIDList:Oc},updateFriend:{userID:Lc,remark:{type:\"String\",required:!1,validator:function(e){return!(Yi(e)&&e.length>96)||(console.warn(Cc({api:\"updateFriend\",desc:\" 备注长度最长不得超过 96 个字节\"})),!1)}},friendCustomField:{type:\"Array\",required:!1,validator:function(e){if(e){if(!zi(e))return console.warn(Cc({api:\"updateFriend\",param:\"friendCustomField\",desc:\"必须为数组\"})),!1;var t=!0;return e.forEach((function(e){return Yi(e.key)&&-1!==e.key.indexOf(\"Tag_SNS_Custom\")?Yi(e.value)?e.value.length>8?(console.warn(Cc({api:\"updateFriend\",desc:\"好友自定义字段的关键字长度不得超过8字节\"})),t=!1):void 0:(console.warn(Cc({api:\"updateFriend\",desc:\"类型必须为 String\"})),t=!1):(console.warn(Cc({api:\"updateFriend\",desc:\"好友自定义字段的前缀必须是 Tag_SNS_Custom\"})),t=!1)})),t}return!0}}},acceptFriendApplication:{userID:Lc},refuseFriendApplication:{userID:Lc},deleteFriendApplication:{userID:Lc},createFriendGroup:{name:Lc},deleteFriendGroup:{name:Lc},addToFriendGroup:{name:Lc,userIDList:Oc},removeFromFriendGroup:{name:Lc,userIDList:Oc},renameFriendGroup:{oldName:Lc,newName:Lc}},wc={login:\"login\",logout:\"logout\",on:\"on\",once:\"once\",off:\"off\",setLogLevel:\"setLogLevel\",registerPlugin:\"registerPlugin\",destroy:\"destroy\",createTextMessage:\"createTextMessage\",createTextAtMessage:\"createTextAtMessage\",createImageMessage:\"createImageMessage\",createAudioMessage:\"createAudioMessage\",createVideoMessage:\"createVideoMessage\",createCustomMessage:\"createCustomMessage\",createFaceMessage:\"createFaceMessage\",createFileMessage:\"createFileMessage\",createMergerMessage:\"createMergerMessage\",downloadMergerMessage:\"downloadMergerMessage\",createForwardMessage:\"createForwardMessage\",sendMessage:\"sendMessage\",resendMessage:\"resendMessage\",revokeMessage:\"revokeMessage\",deleteMessage:\"deleteMessage\",getMessageList:\"getMessageList\",setMessageRead:\"setMessageRead\",getConversationList:\"getConversationList\",getConversationProfile:\"getConversationProfile\",deleteConversation:\"deleteConversation\",pinConversation:\"pinConversation\",getGroupList:\"getGroupList\",getGroupProfile:\"getGroupProfile\",createGroup:\"createGroup\",joinGroup:\"joinGroup\",updateGroupProfile:\"updateGroupProfile\",quitGroup:\"quitGroup\",dismissGroup:\"dismissGroup\",changeGroupOwner:\"changeGroupOwner\",searchGroupByID:\"searchGroupByID\",setMessageRemindType:\"setMessageRemindType\",handleGroupApplication:\"handleGroupApplication\",initGroupAttributes:\"initGroupAttributes\",setGroupAttributes:\"setGroupAttributes\",deleteGroupAttributes:\"deleteGroupAttributes\",getGroupAttributes:\"getGroupAttributes\",getGroupMemberProfile:\"getGroupMemberProfile\",getGroupMemberList:\"getGroupMemberList\",addGroupMember:\"addGroupMember\",deleteGroupMember:\"deleteGroupMember\",setGroupMemberNameCard:\"setGroupMemberNameCard\",setGroupMemberMuteTime:\"setGroupMemberMuteTime\",setGroupMemberRole:\"setGroupMemberRole\",setGroupMemberCustomField:\"setGroupMemberCustomField\",getGroupOnlineMemberCount:\"getGroupOnlineMemberCount\",getMyProfile:\"getMyProfile\",getUserProfile:\"getUserProfile\",updateMyProfile:\"updateMyProfile\",getBlacklist:\"getBlacklist\",addToBlacklist:\"addToBlacklist\",removeFromBlacklist:\"removeFromBlacklist\",getFriendList:\"getFriendList\",addFriend:\"addFriend\",deleteFriend:\"deleteFriend\",checkFriend:\"checkFriend\",updateFriend:\"updateFriend\",getFriendProfile:\"getFriendProfile\",getFriendApplicationList:\"getFriendApplicationList\",refuseFriendApplication:\"refuseFriendApplication\",deleteFriendApplication:\"deleteFriendApplication\",acceptFriendApplication:\"acceptFriendApplication\",setFriendApplicationRead:\"setFriendApplicationRead\",getFriendGroupList:\"getFriendGroupList\",createFriendGroup:\"createFriendGroup\",renameFriendGroup:\"renameFriendGroup\",deleteFriendGroup:\"deleteFriendGroup\",addToFriendGroup:\"addToFriendGroup\",removeFromFriendGroup:\"removeFromFriendGroup\",callExperimentalAPI:\"callExperimentalAPI\"},Gc=!!ha&&O((function(){ha.prototype.finally.call({then:function(){}},(function(){}))}));if(vt({target:\"Promise\",proto:!0,real:!0,forced:Gc},{finally:function(e){var t=Ta(this,j(\"Promise\")),n=\"function\"==typeof e;return this.then(n?function(n){return us(t,e()).then((function(){return n}))}:e,n?function(n){return us(t,e()).then((function(){throw n}))}:e)}}),\"function\"==typeof ha){var Pc=j(\"Promise\").prototype.finally;ha.prototype.finally!==Pc&&He(ha.prototype,\"finally\",Pc,{unsafe:!0})}var Uc=[].slice,Fc=/MSIE .\\\\./.test(Y),qc=function(e){return function(t,n){var o=arguments.length>2,r=o?Uc.call(arguments,2):void 0;return e(o?function(){(\"function\"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};vt({global:!0,bind:!0,forced:Fc},{setTimeout:qc(L.setTimeout),setInterval:qc(L.setInterval)});var xc=$t.filter,Vc=Qn(\"filter\");vt({target:\"Array\",proto:!0,forced:!Vc},{filter:function(e){return xc(this,e,arguments.length>1?arguments[1]:void 0)}});var Kc,Bc=\"sign\",Hc=\"message\",jc=\"user\",Yc=\"c2c\",$c=\"group\",Wc=\"sns\",zc=\"groupMember\",Jc=\"conversation\",Xc=\"context\",Qc=\"storage\",Zc=\"eventStat\",el=\"netMonitor\",tl=\"bigDataChannel\",nl=\"upload\",ol=\"plugin\",rl=\"syncUnreadMessage\",al=\"session\",sl=\"channel\",il=\"message_loss_detection\",ul=\"cloudControl\",cl=\"pullGroupMessage\",ll=\"qualityStat\",dl=function(){function e(t){o(this,e),this._moduleManager=t,this._className=\"\"}return a(e,[{key:\"isLoggedIn\",value:function(){return this._moduleManager.getModule(Xc).isLoggedIn()}},{key:\"isOversea\",value:function(){return this._moduleManager.getModule(Xc).isOversea()}},{key:\"getMyUserID\",value:function(){return this._moduleManager.getModule(Xc).getUserID()}},{key:\"getModule\",value:function(e){return this._moduleManager.getModule(e)}},{key:\"getPlatform\",value:function(){return ui}},{key:\"getNetworkType\",value:function(){return this._moduleManager.getModule(el).getNetworkType()}},{key:\"probeNetwork\",value:function(){return this._moduleManager.getModule(el).probe()}},{key:\"getCloudConfig\",value:function(e){return this._moduleManager.getModule(ul).getCloudConfig(e)}},{key:\"emitOuterEvent\",value:function(e,t){this._moduleManager.getOuterEmitterInstance().emit(e,t)}},{key:\"emitInnerEvent\",value:function(e,t){this._moduleManager.getInnerEmitterInstance().emit(e,t)}},{key:\"getInnerEmitterInstance\",value:function(){return this._moduleManager.getInnerEmitterInstance()}},{key:\"generateTjgID\",value:function(e){return this._moduleManager.getModule(Xc).getTinyID()+\"-\"+e.random}},{key:\"filterModifiedMessage\",value:function(e){if(!Ou(e)){var t=e.filter((function(e){return!0===e.isModified}));t.length>0&&this.emitOuterEvent(oo.MESSAGE_MODIFIED,t)}}},{key:\"filterUnmodifiedMessage\",value:function(e){return Ou(e)?[]:e.filter((function(e){return!1===e.isModified}))}},{key:\"request\",value:function(e){return this._moduleManager.getModule(al).request(e)}}]),e}(),pl=\"wslogin\",gl=\"wslogout\",hl=\"wshello\",fl=\"getmsg\",_l=\"authkey\",ml=\"sendmsg\",vl=\"send_group_msg\",Ml=\"portrait_get_all\",yl=\"portrait_set\",Il=\"black_list_get\",Tl=\"black_list_add\",Dl=\"black_list_delete\",Sl=\"friend_get\",El=\"friend_get_list\",Al=\"friend_check\",kl=\"friend_delete\",Nl=\"friend_add\",Cl=\"friend_update\",Ll=\"friend_response\",Ol=\"pendency_get\",Rl=\"pendency_delete\",bl=\"pendency_report\",wl=\"group_get\",Gl=\"group_add\",Pl=\"group_delete\",Ul=\"group_update\",Fl=\"msgwithdraw\",ql=\"msgreaded\",xl=\"getroammsg\",Vl=\"get_peer_read_time\",Kl=\"delete_c2c_msg_ramble\",Bl=\"page_get\",Hl=\"get\",jl=\"delete\",Yl=\"top\",$l=\"deletemsg\",Wl=\"get_joined_group_list\",zl=\"get_group_info\",Jl=\"create_group\",Xl=\"destroy_group\",Ql=\"modify_group_base_info\",Zl=\"apply_join_group\",ed=\"apply_join_group_noauth\",td=\"quit_group\",nd=\"get_group_public_info\",od=\"change_group_owner\",rd=\"handle_apply_join_group\",ad=\"handle_invite_join_group\",sd=\"group_msg_recall\",id=\"msg_read_report\",ud=\"group_msg_get\",cd=\"get_pendency\",ld=\"deletemsg\",dd=\"get_msg\",pd=\"get_msg_noauth\",gd=\"get_online_member_num\",hd=\"delete_group_ramble_msg_by_seq\",fd=\"set_group_attr\",_d=\"modify_group_attr\",md=\"delete_group_attr\",vd=\"clear_group_attr\",Md=\"get_group_attr\",yd=\"get_group_member_info\",Id=\"get_specified_group_member_info\",Td=\"add_group_member\",Dd=\"delete_group_member\",Sd=\"modify_group_member_info\",Ed=\"cos\",Ad=\"pre_sig\",kd=\"tim_web_report_v2\",Nd=\"alive\",Cd=\"msg_push\",Ld=\"ws_msg_push_ack\",Od=\"stat_forceoffline\",Rd=\"save_relay_json_msg\",bd=\"get_relay_json_msg\",wd=\"fetch_config\",Gd=\"push_configv2\",Pd={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_TINYID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,REPEAT_LOGIN:2025,COS_UNDETECTED:2040,COS_GET_SIG_FAIL:2041,MESSAGE_SEND_FAIL:2100,MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:2103,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_ONPROGRESS_FUNCTION_ERROR:2109,MESSAGE_REVOKE_FAIL:2110,MESSAGE_DELETE_FAIL:2111,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_VIDEO_UPLOAD_FAIL:2350,MESSAGE_VIDEO_SIZE_LIMIT:2351,MESSAGE_VIDEO_TYPES_LIMIT:2352,MESSAGE_FILE_UPLOAD_FAIL:2400,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_MERGER_TYPE_INVALID:2450,MESSAGE_MERGER_KEY_INVALID:2451,MESSAGE_MERGER_DOWNLOAD_FAIL:2452,MESSAGE_FORWARD_TYPE_INVALID:2453,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_WORK:2601,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_Work:2622,MEMBER_NOT_IN_GROUP:2623,CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM:2641,CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN:2642,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:2662,CANNOT_KICK_MEMBER_IN_AVCHATROOM:2680,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,CANNOT_MUTE_SELF:2685,NOT_MY_FRIEND:2700,ALREADY_MY_FRIEND:2701,FRIEND_GROUP_EXISTED:2710,FRIEND_GROUP_NOT_EXIST:2711,FRIEND_APPLICATION_NOT_EXIST:2716,UPDATE_PROFILE_INVALID_PARAM:2721,UPDATE_PROFILE_NO_KEY:2722,ADD_BLACKLIST_INVALID_PARAM:2740,DEL_BLACKLIST_INVALID_PARAM:2741,CANNOT_ADD_SELF_TO_BLACKLIST:2742,ADD_FRIEND_INVALID_PARAM:2760,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NETWORK_BASE_OPTIONS_NO_URL:2802,NETWORK_UNDEFINED_SERVER_NAME:2803,NETWORK_PACKAGE_UNDEFINED:2804,NO_NETWORK:2805,CONVERTOR_IRREGULAR_PARAMS:2900,NOTICE_RUNLOOP_UNEXPECTED_CONDITION:2901,NOTICE_RUNLOOP_OFFSET_LOST:2902,UNCAUGHT_ERROR:2903,GET_LONGPOLL_ID_FAILED:2904,INVALID_OPERATION:2905,CANNOT_FIND_PROTOCOL:2997,CANNOT_FIND_MODULE:2998,SDK_IS_NOT_READY:2999,LONG_POLL_KICK_OUT:91101,MESSAGE_A2KEY_EXPIRED:20002,ACCOUNT_A2KEY_EXPIRED:70001,LONG_POLL_API_PARAM_ERROR:90001,HELLO_ANSWER_KICKED_OUT:1002},Ud=\"无 SDKAppID\",Fd=\"无 userID\",qd=\"无 userSig\",xd=\"无 tinyID\",Vd=\"无 a2key\",Kd=\"用户未登录\",Bd=\"重复登录\",Hd=\"未检测到 COS 上传插件\",jd=\"获取 COS 预签名 URL 失败\",Yd=\"消息发送失败\",$d=\"需要 Message 的实例\",Wd=\\'Message.conversationType 只能为 \"C2C\" 或 \"GROUP\"\\',zd=\"无法发送空文件\",Jd=\"回调函数运行时遇到错误，请检查接入侧代码\",Xd=\"消息撤回失败\",Qd=\"消息删除失败\",Zd=\"请先选择一个图片\",ep=\"只允许上传 jpg png jpeg gif bmp格式的图片\",tp=\"图片大小超过20M，无法发送\",np=\"语音上传失败\",op=\"语音大小大于20M，无法发送\",rp=\"视频上传失败\",ap=\"视频大小超过100M，无法发送\",sp=\"只允许上传 mp4 格式的视频\",ip=\"文件上传失败\",up=\"请先选择一个文件\",cp=\"文件大小超过100M，无法发送 \",lp=\"缺少必要的参数文件 URL\",dp=\"非合并消息\",pp=\"合并消息的 messageKey 无效\",gp=\"下载合并消息失败\",hp=\"选择的消息类型（如群提示消息）不可以转发\",fp=\"没有找到相应的会话，请检查传入参数\",_p=\"没有找到相应的用户或群组，请检查传入参数\",mp=\"未记录的会话类型\",vp=\"非法的群类型，请检查传入参数\",Mp=\"不能加入 Work 类型的群组\",yp=\"AVChatRoom 类型的群组不能转让群主\",Ip=\"不能把群主转让给自己\",Tp=\"不能解散 Work 类型的群组\",Dp=\"用户不在该群组内\",Sp=\"加群失败，请检查传入参数或重试\",Ep=\"AVChatRoom 类型的群不支持邀请群成员\",Ap=\"非 AVChatRoom 类型的群组不允许匿名加群，请先登录后再加群\",kp=\"不能在 AVChatRoom 类型的群组踢人\",Np=\"你不是群主，只有群主才有权限操作\",Cp=\"不能在 Work / AVChatRoom 类型的群中设置群成员身份\",Lp=\"不合法的群成员身份，请检查传入参数\",Op=\"不能设置自己的群成员身份，请检查传入参数\",Rp=\"不能将自己禁言，请检查传入参数\",bp=\"非好友关系\",wp=\"已经是好友关系\",Gp=\"好友分组已存在\",Pp=\"好友分组不存在\",Up=\"好友申请不存在\",Fp=\"传入 updateMyProfile 接口的参数无效\",qp=\"updateMyProfile 无标配资料字段或自定义资料字段\",xp=\"传入 addToBlacklist 接口的参数无效\",Vp=\"传入 removeFromBlacklist 接口的参数无效\",Kp=\"不能拉黑自己\",Bp=\"网络错误\",Hp=\"请求超时\",jp=\"未连接到网络\",Yp=\"无效操作，如调用了未定义或者未实现的方法等\",$p=\"无法找到协议\",Wp=\"无法找到模块\",zp=\"接口需要 SDK 处于 ready 状态后才能调用\",Jp=\"upload\",Xp=\"networkRTT\",Qp=\"messageE2EDelay\",Zp=\"sendMessageC2C\",eg=\"sendMessageGroup\",tg=\"sendMessageGroupAV\",ng=\"sendMessageRichMedia\",og=\"cosUpload\",rg=\"messageReceivedGroup\",ag=\"messageReceivedGroupAVPush\",sg=\"messageReceivedGroupAVPull\",ig=(s(Kc={},Xp,2),s(Kc,Qp,3),s(Kc,Zp,4),s(Kc,eg,5),s(Kc,tg,6),s(Kc,ng,7),s(Kc,rg,8),s(Kc,ag,9),s(Kc,sg,10),s(Kc,og,11),Kc),ug={info:4,warning:5,error:6},cg={wifi:1,\"2g\":2,\"3g\":3,\"4g\":4,\"5g\":5,unknown:6,none:7,online:8},lg=function(){function e(t){o(this,e),this.eventType=0,this.timestamp=0,this.networkType=8,this.code=0,this.message=\"\",this.moreMessage=\"\",this.extension=t,this.costTime=0,this.duplicate=!1,this.level=4,this._sentFlag=!1,this._startts=Ui()}return a(e,[{key:\"updateTimeStamp\",value:function(){this.timestamp=Ui()}},{key:\"start\",value:function(e){return this._startts=e,this}},{key:\"end\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._sentFlag){var n=Ui();this.costTime=n-this._startts,this.setMoreMessage(\"host:\".concat(Du(),\" startts:\").concat(this._startts,\" endts:\").concat(n)),t?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout((function(){e._sentFlag=!0,e._eventStatModule&&e._eventStatModule.pushIn(e)}),0)}}},{key:\"setError\",value:function(e,t,n){return e instanceof Error?(this._sentFlag||(this.setNetworkType(n),t?(e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message)):(this.setCode(Pd.NO_NETWORK),this.setMoreMessage(jp)),this.setLevel(\"error\")),this):(Ki.warn(\"SSOLogData.setError value not instanceof Error, please check!\"),this)}},{key:\"setCode\",value:function(e){return Ji(e)||this._sentFlag||(\"ECONNABORTED\"===e&&(this.code=103),ji(e)?this.code=e:Ki.warn(\"SSOLogData.setCode value not a number, please check!\",e,n(e))),this}},{key:\"setMessage\",value:function(e){return Ji(e)||this._sentFlag||(ji(e)&&(this.message=e.toString()),Yi(e)&&(this.message=e)),this}},{key:\"setLevel\",value:function(e){return Ji(e)||this._sentFlag||(this.level=ug[e]),this}},{key:\"setMoreMessage\",value:function(e){return Ou(this.moreMessage)?this.moreMessage=\"\".concat(e):this.moreMessage+=\" \".concat(e),this}},{key:\"setNetworkType\",value:function(e){return Ji(e)||Ji(cg[e])?Ki.warn(\"SSOLogData.setNetworkType value is undefined, please check!\"):this.networkType=cg[e],this}},{key:\"getStartTs\",value:function(){return this._startts}}],[{key:\"bindEventStatModule\",value:function(t){e.prototype._eventStatModule=t}}]),e}(),dg=\"sdkConstruct\",pg=\"sdkReady\",gg=\"login\",hg=\"logout\",fg=\"kickedOut\",_g=\"registerPlugin\",mg=\"wsConnect\",vg=\"wsOnOpen\",Mg=\"wsOnClose\",yg=\"wsOnError\",Ig=\"getCosAuthKey\",Tg=\"getCosPreSigUrl\",Dg=\"upload\",Sg=\"sendMessage\",Eg=\"getC2CRoamingMessages\",Ag=\"getGroupRoamingMessages\",kg=\"revokeMessage\",Ng=\"deleteMessage\",Cg=\"setC2CMessageRead\",Lg=\"setGroupMessageRead\",Og=\"emptyMessageBody\",Rg=\"getPeerReadTime\",bg=\"uploadMergerMessage\",wg=\"downloadMergerMessage\",Gg=\"jsonParseError\",Pg=\"messageE2EDelayException\",Ug=\"getConversationList\",Fg=\"getConversationProfile\",qg=\"deleteConversation\",xg=\"pinConversation\",Vg=\"getConversationListInStorage\",Kg=\"syncConversationList\",Bg=\"createGroup\",Hg=\"applyJoinGroup\",jg=\"quitGroup\",Yg=\"searchGroupByID\",$g=\"changeGroupOwner\",Wg=\"handleGroupApplication\",zg=\"handleGroupInvitation\",Jg=\"setMessageRemindType\",Xg=\"dismissGroup\",Qg=\"updateGroupProfile\",Zg=\"getGroupList\",eh=\"getGroupProfile\",th=\"getGroupListInStorage\",nh=\"getGroupLastSequence\",oh=\"getGroupMissingMessage\",rh=\"pagingGetGroupList\",ah=\"getGroupSimplifiedInfo\",sh=\"joinWithoutAuth\",ih=\"initGroupAttributes\",uh=\"setGroupAttributes\",ch=\"deleteGroupAttributes\",lh=\"getGroupAttributes\",dh=\"getGroupMemberList\",ph=\"getGroupMemberProfile\",gh=\"addGroupMember\",hh=\"deleteGroupMember\",fh=\"setGroupMemberMuteTime\",_h=\"setGroupMemberNameCard\",mh=\"setGroupMemberRole\",vh=\"setGroupMemberCustomField\",Mh=\"getGroupOnlineMemberCount\",yh=\"longPollingAVError\",Ih=\"messageLoss\",Th=\"messageStacked\",Dh=\"getUserProfile\",Sh=\"updateMyProfile\",Eh=\"getBlacklist\",Ah=\"addToBlacklist\",kh=\"removeFromBlacklist\",Nh=\"addFriend\",Ch=\"checkFriend\",Lh=\"removeFromFriendList\",Oh=\"getFriendProfile\",Rh=\"getFriendList\",bh=\"updateFriend\",wh=\"getFriendApplicationList\",Gh=\"deleteFriendApplication\",Ph=\"acceptFriendApplication\",Uh=\"refuseFriendApplication\",Fh=\"setFriendApplicationRead\",qh=\"createFriendGroup\",xh=\"deleteFriendGroup\",Vh=\"renameFriendGroup\",Kh=\"addToFriendGroup\",Bh=\"removeFromFriendGroup\",Hh=\"getFriendGroupList\",jh=\"callbackFunctionError\",Yh=\"fetchCloudControlConfig\",$h=\"pushedCloudControlConfig\",Wh=\"error\",zh=G.f,Jh=function(e){return function(t){for(var n,o=K(t),r=Ot(o),a=r.length,s=0,i=[];a>s;)n=r[s++],R&&!zh.call(o,n)||i.push(e?[n,o[n]]:o[n]);return i}},Xh={entries:Jh(!0),values:Jh(!1)}.values;vt({target:\"Object\",stat:!0},{values:function(e){return Xh(e)}});var Qh=function(){function e(t){o(this,e),this.type=ro.MSG_TEXT,this.content={text:t.text||\"\"}}return a(e,[{key:\"setText\",value:function(e){this.content.text=e}},{key:\"sendable\",value:function(){return 0!==this.content.text.length}}]),e}(),Zh=ge(\"iterator\"),ef=!O((function(){var e=new URL(\"b?a=1&b=2&c=3\",\"http://a\"),t=e.searchParams,n=\"\";return e.pathname=\"c%20d\",t.forEach((function(e,o){t.delete(\"b\"),n+=o+e})),!t.sort||\"http://a/c%20d?a=1&c=3\"!==e.href||\"3\"!==t.get(\"c\")||\"a=1\"!==String(new URLSearchParams(\"?a=1\"))||!t[Zh]||\"a\"!==new URL(\"https://a@b\").username||\"b\"!==new URLSearchParams(new URLSearchParams(\"a=b\")).get(\"a\")||\"xn--e1aybc\"!==new URL(\"http://тест\").host||\"#%D0%B1\"!==new URL(\"http://a#б\").hash||\"a1c3\"!==n||\"x\"!==new URL(\"http://x\",void 0).host})),tf=Object.assign,nf=Object.defineProperty,of=!tf||O((function(){if(R&&1!==tf({b:1},tf(nf({},\"a\",{enumerable:!0,get:function(){nf(this,\"b\",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,\"abcdefghijklmnopqrst\".split(\"\").forEach((function(e){t[e]=e})),7!=tf({},e)[n]||\"abcdefghijklmnopqrst\"!=Ot(tf({},t)).join(\"\")}))?function(e,t){for(var n=re(e),o=arguments.length,r=1,a=it.f,s=G.f;o>r;)for(var i,u=x(arguments[r++]),c=a?Ot(u).concat(a(u)):Ot(u),l=c.length,d=0;l>d;)i=c[d++],R&&!s.call(u,i)||(n[i]=u[i]);return n}:tf,rf=/[^\\\\0-\\\\u007E]/,af=/[.\\\\u3002\\\\uFF0E\\\\uFF61]/g,sf=\"Overflow: input needs wider integers to process\",uf=Math.floor,cf=String.fromCharCode,lf=function(e){return e+22+75*(e<26)},df=function(e,t,n){var o=0;for(e=n?uf(e/700):e>>1,e+=uf(e/t);e>455;o+=36)e=uf(e/35);return uf(o+36*e/(e+38))},pf=function(e){var t,n,o=[],r=(e=function(e){for(var t=[],n=0,o=e.length;n<o;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<o){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&r)<<10)+(1023&a)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,a=128,s=0,i=72;for(t=0;t<e.length;t++)(n=e[t])<128&&o.push(cf(n));var u=o.length,c=u;for(u&&o.push(\"-\");c<r;){var l=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=a&&n<l&&(l=n);var d=c+1;if(l-a>uf((2147483647-s)/d))throw RangeError(sf);for(s+=(l-a)*d,a=l,t=0;t<e.length;t++){if((n=e[t])<a&&++s>2147483647)throw RangeError(sf);if(n==a){for(var p=s,g=36;;g+=36){var h=g<=i?1:g>=i+26?26:g-i;if(p<h)break;var f=p-h,_=36-h;o.push(cf(lf(h+f%_))),p=uf(f/_)}o.push(cf(lf(p))),i=df(s,d,c==u),s=0,++c}}++s,++a}return o.join(\"\")},gf=function(e){var t=_n(e);if(\"function\"!=typeof t)throw TypeError(String(e)+\" is not iterable\");return De(t.call(e))},hf=j(\"fetch\"),ff=j(\"Request\"),_f=ff&&ff.prototype,mf=j(\"Headers\"),vf=ge(\"iterator\"),Mf=Be.set,yf=Be.getterFor(\"URLSearchParams\"),If=Be.getterFor(\"URLSearchParamsIterator\"),Tf=/\\\\+/g,Df=Array(4),Sf=function(e){return Df[e-1]||(Df[e-1]=RegExp(\"((?:%[\\\\\\\\da-f]{2}){\"+e+\"})\",\"gi\"))},Ef=function(e){try{return decodeURIComponent(e)}catch(cy){return e}},Af=function(e){var t=e.replace(Tf,\" \"),n=4;try{return decodeURIComponent(t)}catch(cy){for(;n;)t=t.replace(Sf(n--),Ef);return t}},kf=/[!\\'()~]|%20/g,Nf={\"!\":\"%21\",\"\\'\":\"%27\",\"(\":\"%28\",\")\":\"%29\",\"~\":\"%7E\",\"%20\":\"+\"},Cf=function(e){return Nf[e]},Lf=function(e){return encodeURIComponent(e).replace(kf,Cf)},Of=function(e,t){if(t)for(var n,o,r=t.split(\"&\"),a=0;a<r.length;)(n=r[a++]).length&&(o=n.split(\"=\"),e.push({key:Af(o.shift()),value:Af(o.join(\"=\"))}))},Rf=function(e){this.entries.length=0,Of(this.entries,e)},bf=function(e,t){if(e<t)throw TypeError(\"Not enough arguments\")},wf=Vn((function(e,t){Mf(this,{type:\"URLSearchParamsIterator\",iterator:gf(yf(e).entries),kind:t})}),\"Iterator\",(function(){var e=If(this),t=e.kind,n=e.iterator.next(),o=n.value;return n.done||(n.value=\"keys\"===t?o.key:\"values\"===t?o.value:[o.key,o.value]),n})),Gf=function(){va(this,Gf,\"URLSearchParams\");var e,t,n,o,r,a,s,i,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(Mf(l,{type:\"URLSearchParams\",entries:d,updateURL:function(){},updateSearchParams:Rf}),void 0!==c)if(B(c))if(\"function\"==typeof(e=_n(c)))for(n=(t=e.call(c)).next;!(o=n.call(t)).done;){if((s=(a=(r=gf(De(o.value))).next).call(r)).done||(i=a.call(r)).done||!a.call(r).done)throw TypeError(\"Expected sequence with length 2\");d.push({key:Mt(s.value),value:Mt(i.value)})}else for(u in c)se(c,u)&&d.push({key:u,value:Mt(c[u])});else Of(d,\"string\"==typeof c?\"?\"===c.charAt(0)?c.slice(1):c:Mt(c))},Pf=Gf.prototype;if(fa(Pf,{append:function(e,t){bf(arguments.length,2);var n=yf(this);n.entries.push({key:Mt(e),value:Mt(t)}),n.updateURL()},delete:function(e){bf(arguments.length,1);for(var t=yf(this),n=t.entries,o=Mt(e),r=0;r<n.length;)n[r].key===o?n.splice(r,1):r++;t.updateURL()},get:function(e){bf(arguments.length,1);for(var t=yf(this).entries,n=Mt(e),o=0;o<t.length;o++)if(t[o].key===n)return t[o].value;return null},getAll:function(e){bf(arguments.length,1);for(var t=yf(this).entries,n=Mt(e),o=[],r=0;r<t.length;r++)t[r].key===n&&o.push(t[r].value);return o},has:function(e){bf(arguments.length,1);for(var t=yf(this).entries,n=Mt(e),o=0;o<t.length;)if(t[o++].key===n)return!0;return!1},set:function(e,t){bf(arguments.length,1);for(var n,o=yf(this),r=o.entries,a=!1,s=Mt(e),i=Mt(t),u=0;u<r.length;u++)(n=r[u]).key===s&&(a?r.splice(u--,1):(a=!0,n.value=i));a||r.push({key:s,value:i}),o.updateURL()},sort:function(){var e,t,n,o=yf(this),r=o.entries,a=r.slice();for(r.length=0,n=0;n<a.length;n++){for(e=a[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}o.updateURL()},forEach:function(e){for(var t,n=yf(this).entries,o=Vt(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)o((t=n[r++]).value,t.key,this)},keys:function(){return new wf(this,\"keys\")},values:function(){return new wf(this,\"values\")},entries:function(){return new wf(this,\"entries\")}},{enumerable:!0}),He(Pf,vf,Pf.entries),He(Pf,\"toString\",(function(){for(var e,t=yf(this).entries,n=[],o=0;o<t.length;)e=t[o++],n.push(Lf(e.key)+\"=\"+Lf(e.value));return n.join(\"&\")}),{enumerable:!0}),Fn(Gf,\"URLSearchParams\"),vt({global:!0,forced:!ef},{URLSearchParams:Gf}),!ef&&\"function\"==typeof mf){var Uf=function(e){if(B(e)){var t,n=e.body;if(\"URLSearchParams\"===hn(n))return(t=e.headers?new mf(e.headers):new mf).has(\"content-type\")||t.set(\"content-type\",\"application/x-www-form-urlencoded;charset=UTF-8\"),qt(e,{body:P(0,String(n)),headers:P(0,t)})}return e};if(\"function\"==typeof hf&&vt({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return hf(e,arguments.length>1?Uf(arguments[1]):{})}}),\"function\"==typeof ff){var Ff=function(e){return va(this,Ff,\"Request\"),new ff(e,arguments.length>1?Uf(arguments[1]):{})};_f.constructor=Ff,Ff.prototype=_f,vt({global:!0,forced:!0},{Request:Ff})}}var qf,xf={URLSearchParams:Gf,getState:yf},Vf=Nn.codeAt,Kf=L.URL,Bf=xf.URLSearchParams,Hf=xf.getState,jf=Be.set,Yf=Be.getterFor(\"URL\"),$f=Math.floor,Wf=Math.pow,zf=/[A-Za-z]/,Jf=/[\\\\d+-.A-Za-z]/,Xf=/\\\\d/,Qf=/^0x/i,Zf=/^[0-7]+$/,e_=/^\\\\d+$/,t_=/^[\\\\dA-Fa-f]+$/,n_=/[\\\\0\\\\t\\\\n\\\\r #%/:<>?@[\\\\\\\\\\\\]^|]/,o_=/[\\\\0\\\\t\\\\n\\\\r #/:<>?@[\\\\\\\\\\\\]^|]/,r_=/^[\\\\u0000-\\\\u0020]+|[\\\\u0000-\\\\u0020]+$/g,a_=/[\\\\t\\\\n\\\\r]/g,s_=function(e,t){var n,o,r;if(\"[\"==t.charAt(0)){if(\"]\"!=t.charAt(t.length-1))return\"Invalid host\";if(!(n=u_(t.slice(1,-1))))return\"Invalid host\";e.host=n}else if(__(e)){if(t=function(e){var t,n,o=[],r=e.toLowerCase().replace(af,\".\").split(\".\");for(t=0;t<r.length;t++)n=r[t],o.push(rf.test(n)?\"xn--\"+pf(n):n);return o.join(\".\")}(t),n_.test(t))return\"Invalid host\";if(null===(n=i_(t)))return\"Invalid host\";e.host=n}else{if(o_.test(t))return\"Invalid host\";for(n=\"\",o=mn(t),r=0;r<o.length;r++)n+=h_(o[r],l_);e.host=n}},i_=function(e){var t,n,o,r,a,s,i,u=e.split(\".\");if(u.length&&\"\"==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],o=0;o<t;o++){if(\"\"==(r=u[o]))return e;if(a=10,r.length>1&&\"0\"==r.charAt(0)&&(a=Qf.test(r)?16:8,r=r.slice(8==a?1:2)),\"\"===r)s=0;else{if(!(10==a?e_:8==a?Zf:t_).test(r))return e;s=parseInt(r,a)}n.push(s)}for(o=0;o<t;o++)if(s=n[o],o==t-1){if(s>=Wf(256,5-t))return null}else if(s>255)return null;for(i=n.pop(),o=0;o<n.length;o++)i+=n[o]*Wf(256,3-o);return i},u_=function(e){var t,n,o,r,a,s,i,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,p=function(){return e.charAt(d)};if(\":\"==p()){if(\":\"!=e.charAt(1))return;d+=2,l=++c}for(;p();){if(8==c)return;if(\":\"!=p()){for(t=n=0;n<4&&t_.test(p());)t=16*t+parseInt(p(),16),d++,n++;if(\".\"==p()){if(0==n)return;if(d-=n,c>6)return;for(o=0;p();){if(r=null,o>0){if(!(\".\"==p()&&o<4))return;d++}if(!Xf.test(p()))return;for(;Xf.test(p());){if(a=parseInt(p(),10),null===r)r=a;else{if(0==r)return;r=10*r+a}if(r>255)return;d++}u[c]=256*u[c]+r,2!=++o&&4!=o||c++}if(4!=o)return;break}if(\":\"==p()){if(d++,!p())return}else if(p())return;u[c++]=t}else{if(null!==l)return;d++,l=++c}}if(null!==l)for(s=c-l,c=7;0!=c&&s>0;)i=u[c],u[c--]=u[l+s-1],u[l+--s]=i;else if(8!=c)return;return u},c_=function(e){var t,n,o,r;if(\"number\"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=$f(e/256);return t.join(\".\")}if(\"object\"==typeof e){for(t=\"\",o=function(e){for(var t=null,n=1,o=null,r=0,a=0;a<8;a++)0!==e[a]?(r>n&&(t=o,n=r),o=null,r=0):(null===o&&(o=a),++r);return r>n&&(t=o,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),o===n?(t+=n?\":\":\"::\",r=!0):(t+=e[n].toString(16),n<7&&(t+=\":\")));return\"[\"+t+\"]\"}return e},l_={},d_=of({},l_,{\" \":1,\\'\"\\':1,\"<\":1,\">\":1,\"`\":1}),p_=of({},d_,{\"#\":1,\"?\":1,\"{\":1,\"}\":1}),g_=of({},p_,{\"/\":1,\":\":1,\";\":1,\"=\":1,\"@\":1,\"[\":1,\"\\\\\\\\\":1,\"]\":1,\"^\":1,\"|\":1}),h_=function(e,t){var n=Vf(e,0);return n>32&&n<127&&!se(t,e)?e:encodeURIComponent(e)},f_={ftp:21,file:null,http:80,https:443,ws:80,wss:443},__=function(e){return se(f_,e.scheme)},m_=function(e){return\"\"!=e.username||\"\"!=e.password},v_=function(e){return!e.host||e.cannotBeABaseURL||\"file\"==e.scheme},M_=function(e,t){var n;return 2==e.length&&zf.test(e.charAt(0))&&(\":\"==(n=e.charAt(1))||!t&&\"|\"==n)},y_=function(e){var t;return e.length>1&&M_(e.slice(0,2))&&(2==e.length||\"/\"===(t=e.charAt(2))||\"\\\\\\\\\"===t||\"?\"===t||\"#\"===t)},I_=function(e){var t=e.path,n=t.length;!n||\"file\"==e.scheme&&1==n&&M_(t[0],!0)||t.pop()},T_=function(e){return\".\"===e||\"%2e\"===e.toLowerCase()},D_={},S_={},E_={},A_={},k_={},N_={},C_={},L_={},O_={},R_={},b_={},w_={},G_={},P_={},U_={},F_={},q_={},x_={},V_={},K_={},B_={},H_=function(e,t,n,o){var r,a,s,i,u,c=n||D_,l=0,d=\"\",p=!1,g=!1,h=!1;for(n||(e.scheme=\"\",e.username=\"\",e.password=\"\",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(r_,\"\")),t=t.replace(a_,\"\"),r=mn(t);l<=r.length;){switch(a=r[l],c){case D_:if(!a||!zf.test(a)){if(n)return\"Invalid scheme\";c=E_;continue}d+=a.toLowerCase(),c=S_;break;case S_:if(a&&(Jf.test(a)||\"+\"==a||\"-\"==a||\".\"==a))d+=a.toLowerCase();else{if(\":\"!=a){if(n)return\"Invalid scheme\";d=\"\",c=E_,l=0;continue}if(n&&(__(e)!=se(f_,d)||\"file\"==d&&(m_(e)||null!==e.port)||\"file\"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(__(e)&&f_[e.scheme]==e.port&&(e.port=null));d=\"\",\"file\"==e.scheme?c=P_:__(e)&&o&&o.scheme==e.scheme?c=A_:__(e)?c=L_:\"/\"==r[l+1]?(c=k_,l++):(e.cannotBeABaseURL=!0,e.path.push(\"\"),c=V_)}break;case E_:if(!o||o.cannotBeABaseURL&&\"#\"!=a)return\"Invalid scheme\";if(o.cannotBeABaseURL&&\"#\"==a){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",e.cannotBeABaseURL=!0,c=B_;break}c=\"file\"==o.scheme?P_:N_;continue;case A_:if(\"/\"!=a||\"/\"!=r[l+1]){c=N_;continue}c=O_,l++;break;case k_:if(\"/\"==a){c=R_;break}c=x_;continue;case N_:if(e.scheme=o.scheme,a==qf)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if(\"/\"==a||\"\\\\\\\\\"==a&&__(e))c=C_;else if(\"?\"==a)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=\"\",c=K_;else{if(\"#\"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),c=x_;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",c=B_}break;case C_:if(!__(e)||\"/\"!=a&&\"\\\\\\\\\"!=a){if(\"/\"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,c=x_;continue}c=R_}else c=O_;break;case L_:if(c=O_,\"/\"!=a||\"/\"!=d.charAt(l+1))continue;l++;break;case O_:if(\"/\"!=a&&\"\\\\\\\\\"!=a){c=R_;continue}break;case R_:if(\"@\"==a){p&&(d=\"%40\"+d),p=!0,s=mn(d);for(var f=0;f<s.length;f++){var _=s[f];if(\":\"!=_||h){var m=h_(_,g_);h?e.password+=m:e.username+=m}else h=!0}d=\"\"}else if(a==qf||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&__(e)){if(p&&\"\"==d)return\"Invalid authority\";l-=mn(d).length+1,d=\"\",c=b_}else d+=a;break;case b_:case w_:if(n&&\"file\"==e.scheme){c=F_;continue}if(\":\"!=a||g){if(a==qf||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&__(e)){if(__(e)&&\"\"==d)return\"Invalid host\";if(n&&\"\"==d&&(m_(e)||null!==e.port))return;if(i=s_(e,d))return i;if(d=\"\",c=q_,n)return;continue}\"[\"==a?g=!0:\"]\"==a&&(g=!1),d+=a}else{if(\"\"==d)return\"Invalid host\";if(i=s_(e,d))return i;if(d=\"\",c=G_,n==w_)return}break;case G_:if(!Xf.test(a)){if(a==qf||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&__(e)||n){if(\"\"!=d){var v=parseInt(d,10);if(v>65535)return\"Invalid port\";e.port=__(e)&&v===f_[e.scheme]?null:v,d=\"\"}if(n)return;c=q_;continue}return\"Invalid port\"}d+=a;break;case P_:if(e.scheme=\"file\",\"/\"==a||\"\\\\\\\\\"==a)c=U_;else{if(!o||\"file\"!=o.scheme){c=x_;continue}if(a==qf)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if(\"?\"==a)e.host=o.host,e.path=o.path.slice(),e.query=\"\",c=K_;else{if(\"#\"!=a){y_(r.slice(l).join(\"\"))||(e.host=o.host,e.path=o.path.slice(),I_(e)),c=x_;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",c=B_}}break;case U_:if(\"/\"==a||\"\\\\\\\\\"==a){c=F_;break}o&&\"file\"==o.scheme&&!y_(r.slice(l).join(\"\"))&&(M_(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),c=x_;continue;case F_:if(a==qf||\"/\"==a||\"\\\\\\\\\"==a||\"?\"==a||\"#\"==a){if(!n&&M_(d))c=x_;else if(\"\"==d){if(e.host=\"\",n)return;c=q_}else{if(i=s_(e,d))return i;if(\"localhost\"==e.host&&(e.host=\"\"),n)return;d=\"\",c=q_}continue}d+=a;break;case q_:if(__(e)){if(c=x_,\"/\"!=a&&\"\\\\\\\\\"!=a)continue}else if(n||\"?\"!=a)if(n||\"#\"!=a){if(a!=qf&&(c=x_,\"/\"!=a))continue}else e.fragment=\"\",c=B_;else e.query=\"\",c=K_;break;case x_:if(a==qf||\"/\"==a||\"\\\\\\\\\"==a&&__(e)||!n&&(\"?\"==a||\"#\"==a)){if(\"..\"===(u=(u=d).toLowerCase())||\"%2e.\"===u||\".%2e\"===u||\"%2e%2e\"===u?(I_(e),\"/\"==a||\"\\\\\\\\\"==a&&__(e)||e.path.push(\"\")):T_(d)?\"/\"==a||\"\\\\\\\\\"==a&&__(e)||e.path.push(\"\"):(\"file\"==e.scheme&&!e.path.length&&M_(d)&&(e.host&&(e.host=\"\"),d=d.charAt(0)+\":\"),e.path.push(d)),d=\"\",\"file\"==e.scheme&&(a==qf||\"?\"==a||\"#\"==a))for(;e.path.length>1&&\"\"===e.path[0];)e.path.shift();\"?\"==a?(e.query=\"\",c=K_):\"#\"==a&&(e.fragment=\"\",c=B_)}else d+=h_(a,p_);break;case V_:\"?\"==a?(e.query=\"\",c=K_):\"#\"==a?(e.fragment=\"\",c=B_):a!=qf&&(e.path[0]+=h_(a,l_));break;case K_:n||\"#\"!=a?a!=qf&&(\"\\'\"==a&&__(e)?e.query+=\"%27\":e.query+=\"#\"==a?\"%23\":h_(a,l_)):(e.fragment=\"\",c=B_);break;case B_:a!=qf&&(e.fragment+=h_(a,d_))}l++}},j_=function(e){var t,n,o=va(this,j_,\"URL\"),r=arguments.length>1?arguments[1]:void 0,a=Mt(e),s=jf(o,{type:\"URL\"});if(void 0!==r)if(r instanceof j_)t=Yf(r);else if(n=H_(t={},Mt(r)))throw TypeError(n);if(n=H_(s,a,null,t))throw TypeError(n);var i=s.searchParams=new Bf,u=Hf(i);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(i)||null},R||(o.href=$_.call(o),o.origin=W_.call(o),o.protocol=z_.call(o),o.username=J_.call(o),o.password=X_.call(o),o.host=Q_.call(o),o.hostname=Z_.call(o),o.port=em.call(o),o.pathname=tm.call(o),o.search=nm.call(o),o.searchParams=om.call(o),o.hash=rm.call(o))},Y_=j_.prototype,$_=function(){var e=Yf(this),t=e.scheme,n=e.username,o=e.password,r=e.host,a=e.port,s=e.path,i=e.query,u=e.fragment,c=t+\":\";return null!==r?(c+=\"//\",m_(e)&&(c+=n+(o?\":\"+o:\"\")+\"@\"),c+=c_(r),null!==a&&(c+=\":\"+a)):\"file\"==t&&(c+=\"//\"),c+=e.cannotBeABaseURL?s[0]:s.length?\"/\"+s.join(\"/\"):\"\",null!==i&&(c+=\"?\"+i),null!==u&&(c+=\"#\"+u),c},W_=function(){var e=Yf(this),t=e.scheme,n=e.port;if(\"blob\"==t)try{return new j_(t.path[0]).origin}catch(cy){return\"null\"}return\"file\"!=t&&__(e)?t+\"://\"+c_(e.host)+(null!==n?\":\"+n:\"\"):\"null\"},z_=function(){return Yf(this).scheme+\":\"},J_=function(){return Yf(this).username},X_=function(){return Yf(this).password},Q_=function(){var e=Yf(this),t=e.host,n=e.port;return null===t?\"\":null===n?c_(t):c_(t)+\":\"+n},Z_=function(){var e=Yf(this).host;return null===e?\"\":c_(e)},em=function(){var e=Yf(this).port;return null===e?\"\":String(e)},tm=function(){var e=Yf(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?\"/\"+t.join(\"/\"):\"\"},nm=function(){var e=Yf(this).query;return e?\"?\"+e:\"\"},om=function(){return Yf(this).searchParams},rm=function(){var e=Yf(this).fragment;return e?\"#\"+e:\"\"},am=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(R&&Rt(Y_,{href:am($_,(function(e){var t=Yf(this),n=Mt(e),o=H_(t,n);if(o)throw TypeError(o);Hf(t.searchParams).updateSearchParams(t.query)})),origin:am(W_),protocol:am(z_,(function(e){var t=Yf(this);H_(t,Mt(e)+\":\",D_)})),username:am(J_,(function(e){var t=Yf(this),n=mn(Mt(e));if(!v_(t)){t.username=\"\";for(var o=0;o<n.length;o++)t.username+=h_(n[o],g_)}})),password:am(X_,(function(e){var t=Yf(this),n=mn(Mt(e));if(!v_(t)){t.password=\"\";for(var o=0;o<n.length;o++)t.password+=h_(n[o],g_)}})),host:am(Q_,(function(e){var t=Yf(this);t.cannotBeABaseURL||H_(t,Mt(e),b_)})),hostname:am(Z_,(function(e){var t=Yf(this);t.cannotBeABaseURL||H_(t,Mt(e),w_)})),port:am(em,(function(e){var t=Yf(this);v_(t)||(\"\"==(e=Mt(e))?t.port=null:H_(t,e,G_))})),pathname:am(tm,(function(e){var t=Yf(this);t.cannotBeABaseURL||(t.path=[],H_(t,Mt(e),q_))})),search:am(nm,(function(e){var t=Yf(this);\"\"==(e=Mt(e))?t.query=null:(\"?\"==e.charAt(0)&&(e=e.slice(1)),t.query=\"\",H_(t,e,K_)),Hf(t.searchParams).updateSearchParams(t.query)})),searchParams:am(om),hash:am(rm,(function(e){var t=Yf(this);\"\"!=(e=Mt(e))?(\"#\"==e.charAt(0)&&(e=e.slice(1)),t.fragment=\"\",H_(t,e,B_)):t.fragment=null}))}),He(Y_,\"toJSON\",(function(){return $_.call(this)}),{enumerable:!0}),He(Y_,\"toString\",(function(){return $_.call(this)}),{enumerable:!0}),Kf){var sm=Kf.createObjectURL,im=Kf.revokeObjectURL;sm&&He(j_,\"createObjectURL\",(function(e){return sm.apply(Kf,arguments)})),im&&He(j_,\"revokeObjectURL\",(function(e){return im.apply(Kf,arguments)}))}Fn(j_,\"URL\"),vt({global:!0,forced:!ef,sham:!R},{URL:j_}),vt({target:\"Object\",stat:!0,forced:Object.assign!==of},{assign:of});var um={JSON:{TYPE:{C2C:{NOTICE:1,COMMON:9,EVENT:10},GROUP:{COMMON:3,TIP:4,SYSTEM:5,TIP2:6},FRIEND:{NOTICE:7},PROFILE:{NOTICE:8}},SUBTYPE:{C2C:{COMMON:0,READED:92,KICKEDOUT:96},GROUP:{COMMON:0,LOVEMESSAGE:1,TIP:2,REDPACKET:3}},OPTIONS:{GROUP:{JOIN:1,QUIT:2,KICK:3,SET_ADMIN:4,CANCEL_ADMIN:5,MODIFY_GROUP_INFO:6,MODIFY_MEMBER_INFO:7}}},PROTOBUF:{},IMAGE_TYPES:{ORIGIN:1,LARGE:2,SMALL:3},IMAGE_FORMAT:{JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255}},cm={NICK:\"Tag_Profile_IM_Nick\",GENDER:\"Tag_Profile_IM_Gender\",BIRTHDAY:\"Tag_Profile_IM_BirthDay\",LOCATION:\"Tag_Profile_IM_Location\",SELFSIGNATURE:\"Tag_Profile_IM_SelfSignature\",ALLOWTYPE:\"Tag_Profile_IM_AllowType\",LANGUAGE:\"Tag_Profile_IM_Language\",AVATAR:\"Tag_Profile_IM_Image\",MESSAGESETTINGS:\"Tag_Profile_IM_MsgSettings\",ADMINFORBIDTYPE:\"Tag_Profile_IM_AdminForbidType\",LEVEL:\"Tag_Profile_IM_Level\",ROLE:\"Tag_Profile_IM_Role\"},lm={GROUP:\"Tag_SNS_IM_Group\",REMARK:\"Tag_SNS_IM_Remark\",ADDSOURCE:\"Tag_SNS_IM_AddSource\",ADDWORDING:\"Tag_SNS_IM_AddWording\",ADDTIME:\"Tag_SNS_IM_AddTime\"},dm={UNKNOWN:\"Gender_Type_Unknown\",FEMALE:\"Gender_Type_Female\",MALE:\"Gender_Type_Male\"},pm={NONE:\"AdminForbid_Type_None\",SEND_OUT:\"AdminForbid_Type_SendOut\"},gm={NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_ANY:\"AllowType_Type_AllowAny\",DENY_ANY:\"AllowType_Type_DenyAny\"},hm=\"JoinedSuccess\",fm=\"WaitAdminApproval\",_m=function(){function e(t){o(this,e),this._imageMemoryURL=\"\",ai?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=ro.MSG_IMAGE,this._percent=0,this.content={imageFormat:t.imageFormat||um.IMAGE_FORMAT.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._defaultImage=\"http://imgcache.qq.com/open/qcloud/video/act/webim-images/default.jpg\",this._autoFixUrl()}return a(e,[{key:\"_initImageInfoModel\",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=iu(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||\"\",this.url=t.url||e._imageMemoryURL||e._defaultImage},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:\"initImageInfoArray\",value:function(e){for(var t=0,n=null,o=null;t<=2;)o=Ji(e)||Ji(e[t])?{type:0,size:0,width:0,height:0,url:\"\"}:e[t],(n=new this._ImageInfoModel(o)).setSizeType(t+1),n.setType(t),this.addImageInfo(n),t++;this.updateAccessSideImageInfoArray()}},{key:\"updateImageInfoArray\",value:function(e){for(var t,n=this.content.imageInfoArray.length,o=0;o<n;o++)t=this.content.imageInfoArray[o],e[o].size&&(t.size=e[o].size),e[o].url&&t.setImageUrl(e[o].url),e[o].width&&(t.width=e[o].width),e[o].height&&(t.height=e[o].height)}},{key:\"_autoFixUrl\",value:function(){for(var e=this.content.imageInfoArray.length,t=\"\",n=\"\",o=[\"http\",\"https\"],r=null,a=0;a<e;a++)this.content.imageInfoArray[a].url&&\"\"!==(r=this.content.imageInfoArray[a]).imageUrl&&(n=r.imageUrl.slice(0,r.imageUrl.indexOf(\"://\")+1),t=r.imageUrl.slice(r.imageUrl.indexOf(\"://\")+1),o.indexOf(n)<0&&(n=\"https:\"),this.content.imageInfoArray[a].setImageUrl([n,t].join(\"\")))}},{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateImageFormat\",value:function(e){this.content.imageFormat=um.IMAGE_FORMAT[e.toUpperCase()]||um.IMAGE_FORMAT.UNKNOWN}},{key:\"createImageDataASURLInWeb\",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:\"createImageDataASURLInWXMiniApp\",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:\"replaceImageInfo\",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:\"addImageInfo\",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:\"updateAccessSideImageInfoArray\",value:function(){var e=this.content.imageInfoArray,t=e[0],n=t.width,o=void 0===n?0:n,r=t.height,a=void 0===r?0:r;0!==o&&0!==a&&(Eu(e),Object.assign(e[2],Su({originWidth:o,originHeight:a,min:720})))}},{key:\"sendable\",value:function(){return 0!==this.content.imageInfoArray.length&&(\"\"!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size)}}]),e}(),mm=function(){function e(t){o(this,e),this.type=ro.MSG_FACE,this.content=t||null}return a(e,[{key:\"sendable\",value:function(){return null!==this.content}}]),e}(),vm=function(){function e(t){o(this,e),this.type=ro.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:t.url,remoteAudioUrl:t.url||\"\",uuid:t.uuid}}return a(e,[{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateAudioUrl\",value:function(e){this.content.remoteAudioUrl=e}},{key:\"sendable\",value:function(){return\"\"!==this.content.remoteAudioUrl}}]),e}();vt({target:\"Object\",stat:!0,forced:!R,sham:!R},{defineProperty:Ee.f});var Mm={from:!0,groupID:!0,groupName:!0,to:!0},ym=function(){function e(t){o(this,e),this.type=ro.MSG_GRP_TIP,this.content={},this._initContent(t)}return a(e,[{key:\"_initContent\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"remarkInfo\":break;case\"groupProfile\":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case\"operatorInfo\":case\"memberInfoList\":break;case\"msgMemberInfo\":t.content.memberList=e[n],Object.defineProperty(t.content,\"msgMemberInfo\",{get:function(){return Ki.warn(\"!!! 禁言的群提示消息中的 payload.msgMemberInfo 属性即将废弃，请使用 payload.memberList 属性替代。 \\\\n\",\"msgMemberInfo 中的 shutupTime 属性对应更改为 memberList 中的 muteTime 属性，表示禁言时长。 \\\\n\",\"参考：群提示消息 https://web.sdk.qcloud.com/im/doc/zh-cn/Message.html#.GroupTipPayload\"),t.content.memberList.map((function(e){return{userID:e.userID,shutupTime:e.muteTime}}))}});break;case\"onlineMemberInfo\":break;case\"memberNum\":t.content[n]=e[n],t.content.memberCount=e[n];break;default:t.content[n]=e[n]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:\"_initGroupProfile\",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];Mm[o]&&(this.content.groupProfile[o]=e[o])}}}]),e}(),Im={from:!0,groupID:!0,groupName:!0,to:!0},Tm=function(){function e(t){o(this,e),this.type=ro.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return a(e,[{key:\"_initContent\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"memberInfoList\":break;case\"remarkInfo\":t.content.handleMessage=e[n];break;case\"groupProfile\":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}}))}},{key:\"_initGroupProfile\",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];Im[o]&&(\"groupName\"===o?this.content.groupProfile.name=e[o]:this.content.groupProfile[o]=e[o])}}}]),e}(),Dm=Math.min,Sm=[].lastIndexOf,Em=!!Sm&&1/[1].lastIndexOf(1,-0)<0,Am=Wt(\"lastIndexOf\"),km=Em||!Am?function(e){if(Em)return Sm.apply(this,arguments)||0;var t=K(this),n=ze(t.length),o=n-1;for(arguments.length>1&&(o=Dm(o,$e(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:Sm;vt({target:\"Array\",proto:!0,forced:km!==[].lastIndexOf},{lastIndexOf:km});var Nm=function(){function e(t){o(this,e),this.type=ro.MSG_FILE,this._percent=0;var n=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:t.url||\"\",uuid:t.uuid,fileName:n.name||\"\",fileSize:n.size||0}}return a(e,[{key:\"_getFileInfo\",value:function(e){if(e.fileName&&e.fileSize)return{size:e.fileSize,name:e.fileName};if(ai)return{};var t=e.file.files[0];return{size:t.size,name:t.name,type:t.type.slice(t.type.lastIndexOf(\"/\")+1).toLowerCase()}}},{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateFileUrl\",value:function(e){this.content.fileUrl=e}},{key:\"sendable\",value:function(){return\"\"!==this.content.fileUrl&&(\"\"!==this.content.fileName&&0!==this.content.fileSize)}}]),e}(),Cm=function(){function e(t){o(this,e),this.type=ro.MSG_CUSTOM,this.content={data:t.data||\"\",description:t.description||\"\",extension:t.extension||\"\"}}return a(e,[{key:\"setData\",value:function(e){return this.content.data=e,this}},{key:\"setDescription\",value:function(e){return this.content.description=e,this}},{key:\"setExtension\",value:function(e){return this.content.extension=e,this}},{key:\"sendable\",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),e}(),Lm=function(){function e(t){o(this,e),this.type=ro.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl||t.videoUrl||\"\",videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:t.videoUrl,videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,thumbHeight:t.thumbHeight,thumbSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:t.thumbUrl}}return a(e,[{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateVideoUrl\",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:\"sendable\",value:function(){return\"\"!==this.content.remoteVideoUrl}}]),e}(),Om=function e(t){o(this,e),this.type=ro.MSG_GEO,this.content=t},Rm=function(){function e(t){if(o(this,e),this.from=t.from,this.messageSender=t.from,this.time=t.time,this.messageSequence=t.sequence,this.clientSequence=t.clientSequence||t.sequence,this.messageRandom=t.random,this.cloudCustomData=t.cloudCustomData||\"\",t.ID)this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.messageBody=[{type:t.type,payload:t.payload}],t.conversationType.startsWith(ro.CONV_C2C)?this.receiverUserID=t.to:t.conversationType.startsWith(ro.CONV_GROUP)&&(this.receiverGroupID=t.to),this.messageReceiver=t.to;else{this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.messageBody=[];var n=t.elements[0].type,r=t.elements[0].content;this._patchRichMediaPayload(n,r),n===ro.MSG_MERGER?this.messageBody.push({type:n,payload:new bm(r).content}):this.messageBody.push({type:n,payload:r}),t.groupID&&(this.receiverGroupID=t.groupID,this.messageReceiver=t.groupID),t.to&&(this.receiverUserID=t.to,this.messageReceiver=t.to)}}return a(e,[{key:\"_patchRichMediaPayload\",value:function(e,t){e===ro.MSG_IMAGE?t.imageInfoArray.forEach((function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))})):e===ro.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===ro.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===ro.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}}]),e}(),bm=function(){function e(t){if(o(this,e),this.type=ro.MSG_MERGER,this.content={downloadKey:\"\",pbDownloadKey:\"\",messageList:[],title:\"\",abstractList:[],compatibleText:\"\",version:0,layersOverLimit:!1},t.downloadKey){var n=t.downloadKey,r=t.pbDownloadKey,a=t.title,s=t.abstractList,i=t.compatibleText,u=t.version;this.content.downloadKey=n,this.content.pbDownloadKey=r,this.content.title=a,this.content.abstractList=s,this.content.compatibleText=i,this.content.version=u||0}else if(Ou(t.messageList))1===t.layersOverLimit&&(this.content.layersOverLimit=!0);else{var c=t.messageList,l=t.title,d=t.abstractList,p=t.compatibleText,g=t.version,h=[];c.forEach((function(e){if(!Ou(e)){var t=new Rm(e);h.push(t)}})),this.content.messageList=h,this.content.title=l,this.content.abstractList=d,this.content.compatibleText=p,this.content.version=g||0}Ki.debug(\"MergerElement.content:\",this.content)}return a(e,[{key:\"sendable\",value:function(){return!Ou(this.content.messageList)||!Ou(this.content.downloadKey)}}]),e}(),wm={1:ro.MSG_PRIORITY_HIGH,2:ro.MSG_PRIORITY_NORMAL,3:ro.MSG_PRIORITY_LOW,4:ro.MSG_PRIORITY_LOWEST},Gm=function(){function e(t){o(this,e),this.ID=\"\",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||ro.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||0===t.random?t.random:iu(),this.priority=this._computePriority(t.priority),this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.isPeerRead=!1,this.nameCard=\"\",this._elements=[],this.isPlaceMessage=t.isPlaceMessage||0,this.isRevoked=2===t.isPlaceMessage||8===t.msgFlagBits,this.geo={},this.from=t.from||null,this.to=t.to||null,this.flow=\"\",this.isSystemMessage=t.isSystemMessage||!1,this.protocol=t.protocol||\"JSON\",this.isResend=!1,this.isRead=!1,this.status=t.status||Ec.SUCCESS,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=t.cloudCustomData||\"\",this.isDeleted=!1,this.isModified=!1,this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null),this.handleGroupAtInfo(t)}return a(e,[{key:\"elements\",get:function(){return Ki.warn(\"！！！Message 实例的 elements 属性即将废弃，请尽快修改。使用 type 和 payload 属性处理单条消息，兼容组合消息使用 _elements 属性！！！\"),this._elements}},{key:\"getElements\",value:function(){return this._elements}},{key:\"extractGroupInfo\",value:function(e){if(null!==e){Yi(e.nick)&&(this.nick=e.nick),Yi(e.avatar)&&(this.avatar=e.avatar);var t=e.messageFromAccountExtraInformation;Wi(t)&&Yi(t.nameCard)&&(this.nameCard=t.nameCard)}}},{key:\"handleGroupAtInfo\",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach((function(e){e!==ro.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(ro.MSG_AT_ALL))})),zi(e.groupAtInfo)&&e.groupAtInfo.forEach((function(e){1===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):2===e.groupAtAllFlag&&t.atUserList.push(ro.MSG_AT_ALL)}))}},{key:\"getGroupAtInfoList\",value:function(){return this._groupAtInfoList}},{key:\"_initProxy\",value:function(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}},{key:\"reInitialize\",value:function(e){e&&(this.status=this.from?Ec.SUCCESS:Ec.UNSEND,!this.from&&(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID(e)}},{key:\"isSendable\",value:function(){return 0!==this._elements.length&&(\"function\"!=typeof this._elements[0].sendable?(Ki.warn(\"\".concat(this._elements[0].type,\\' need \"boolean : sendable()\" method\\')),!1):this._elements[0].sendable())}},{key:\"_initTo\",value:function(e){this.conversationType===ro.CONV_GROUP&&(this.to=e.groupID)}},{key:\"_initSequence\",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return Ki.error(\"autoIncrementIndex(string: key) need key parameter\"),!1;if(void 0===du[e]){var t=new Date,n=\"3\".concat(t.getHours()).slice(-2),o=\"0\".concat(t.getMinutes()).slice(-2),r=\"0\".concat(t.getSeconds()).slice(-2);du[e]=parseInt([n,o,r,\"0001\"].join(\"\")),n=null,o=null,r=null,Ki.log(\"autoIncrementIndex start index:\".concat(du[e]))}return du[e]++}(e)),0===this.sequence&&this.conversationType===ro.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:\"generateMessageID\",value:function(e){var t=e===this.from?1:0,n=this.sequence>0?this.sequence:this.clientSequence;this.ID=\"\".concat(this.conversationID,\"-\").concat(n,\"-\").concat(this.random,\"-\").concat(t)}},{key:\"_initFlow\",value:function(e){\"\"!==e&&(e===this.from?(this.flow=\"out\",this.isRead=!0):this.flow=\"in\")}},{key:\"_concatConversationID\",value:function(e){var t=this.to,n=\"\",o=this.conversationType;o!==ro.CONV_SYSTEM?(n=o===ro.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID=\"\".concat(o).concat(n)):this.conversationID=ro.CONV_SYSTEM}},{key:\"isElement\",value:function(e){return e instanceof Qh||e instanceof _m||e instanceof mm||e instanceof vm||e instanceof Nm||e instanceof Lm||e instanceof ym||e instanceof Tm||e instanceof Cm||e instanceof Om||e instanceof bm}},{key:\"setElement\",value:function(e){var t=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var n=function(e){if(e.type&&e.content)switch(e.type){case ro.MSG_TEXT:t.setTextElement(e.content);break;case ro.MSG_IMAGE:t.setImageElement(e.content);break;case ro.MSG_AUDIO:t.setAudioElement(e.content);break;case ro.MSG_FILE:t.setFileElement(e.content);break;case ro.MSG_VIDEO:t.setVideoElement(e.content);break;case ro.MSG_CUSTOM:t.setCustomElement(e.content);break;case ro.MSG_GEO:t.setGEOElement(e.content);break;case ro.MSG_GRP_TIP:t.setGroupTipElement(e.content);break;case ro.MSG_GRP_SYS_NOTICE:t.setGroupSystemNoticeElement(e.content);break;case ro.MSG_FACE:t.setFaceElement(e.content);break;case ro.MSG_MERGER:t.setMergerElement(e.content);break;default:Ki.warn(e.type,e.content,\"no operation......\")}};if(zi(e))for(var o=0;o<e.length;o++)n(e[o]);else n(e);this._initProxy()}},{key:\"clearElement\",value:function(){this._elements.length=0}},{key:\"setTextElement\",value:function(e){var t=\"string\"==typeof e?e:e.text,n=new Qh({text:t});this._elements.push(n)}},{key:\"setImageElement\",value:function(e){var t=new _m(e);this._elements.push(t)}},{key:\"setAudioElement\",value:function(e){var t=new vm(e);this._elements.push(t)}},{key:\"setFileElement\",value:function(e){var t=new Nm(e);this._elements.push(t)}},{key:\"setVideoElement\",value:function(e){var t=new Lm(e);this._elements.push(t)}},{key:\"setGEOElement\",value:function(e){var t=new Om(e);this._elements.push(t)}},{key:\"setCustomElement\",value:function(e){var t=new Cm(e);this._elements.push(t)}},{key:\"setGroupTipElement\",value:function(e){var t={},n=e.operationType;Ou(e.memberInfoList)?e.operatorInfo&&(t=e.operatorInfo):n!==ro.GRP_TIP_MBR_JOIN&&n!==ro.GRP_TIP_MBR_KICKED_OUT&&n!==ro.GRP_TIP_MBR_SET_ADMIN&&n!==ro.GRP_TIP_MBR_CANCELED_ADMIN||(t=e.memberInfoList[0]);var o=t,r=o.nick,a=o.avatar;Yi(r)&&(this.nick=r),Yi(a)&&(this.avatar=a);var s=new ym(e);this._elements.push(s)}},{key:\"setGroupSystemNoticeElement\",value:function(e){var t=new Tm(e);this._elements.push(t)}},{key:\"setFaceElement\",value:function(e){var t=new mm(e);this._elements.push(t)}},{key:\"setMergerElement\",value:function(e){var t=new bm(e);this._elements.push(t)}},{key:\"setIsRead\",value:function(e){this.isRead=e}},{key:\"setRelayFlag\",value:function(e){this._relayFlag=e}},{key:\"getRelayFlag\",value:function(){return this._relayFlag}},{key:\"setOnlineOnlyFlag\",value:function(e){this._onlineOnlyFlag=e}},{key:\"getOnlineOnlyFlag\",value:function(){return this._onlineOnlyFlag}},{key:\"_computePriority\",value:function(e){if(Ji(e))return ro.MSG_PRIORITY_NORMAL;if(Yi(e)&&-1!==Object.values(wm).indexOf(e))return e;if(ji(e)){var t=\"\"+e;if(-1!==Object.keys(wm).indexOf(t))return wm[t]}return ro.MSG_PRIORITY_NORMAL}},{key:\"setNickAndAvatar\",value:function(e){var t=e.nick,n=e.avatar;Yi(t)&&(this.nick=t),Yi(n)&&(this.avatar=n)}},{key:\"setNameCard\",value:function(e){Yi(e)&&(this.nameCard=e)}}]),e}(),Pm=function(e){return{code:0,data:e||{}}},Um=\"https://cloud.tencent.com/document/product/\",Fm=\"您可以在即时通信 IM 控制台的【开发辅助工具(https://console.cloud.tencent.com/im-detail/tool-usersig)】页面校验 UserSig。\",qm=\"UserSig 非法，请使用官网提供的 API 重新生成 UserSig(\".concat(Um,\"269/32688)。\"),xm=\"#.E6.B6.88.E6.81.AF.E5.85.83.E7.B4.A0-timmsgelement\",Vm={70001:\"UserSig 已过期，请重新生成。建议 UserSig 有效期设置不小于24小时。\",70002:\"UserSig 长度为0，请检查传入的 UserSig 是否正确。\",70003:qm,70005:qm,70009:\"UserSig 验证失败，可能因为生成 UserSig 时混用了其他 SDKAppID 的私钥或密钥导致，请使用对应 SDKAppID 下的私钥或密钥重新生成 UserSig(\".concat(Um,\"269/32688)。\"),70013:\"请求中的 UserID 与生成 UserSig 时使用的 UserID 不匹配。\".concat(Fm),70014:\"请求中的 SDKAppID 与生成 UserSig 时使用的 SDKAppID 不匹配。\".concat(Fm),70016:\"密钥不存在，UserSig 验证失败，请在即时通信 IM 控制台获取密钥(\".concat(Um,\"269/32578#.E8.8E.B7.E5.8F.96.E5.AF.86.E9.92.A5)。\"),70020:\"SDKAppID 未找到，请在即时通信 IM 控制台确认应用信息。\",70050:\"UserSig 验证次数过于频繁。请检查 UserSig 是否正确，并于1分钟后重新验证。\".concat(Fm),70051:\"帐号被拉入黑名单。\",70052:\"UserSig 已经失效，请重新生成，再次尝试。\",70107:\"因安全原因被限制登录，请不要频繁登录。\",70169:\"请求的用户帐号不存在。\",70114:\"\".concat(\"服务端内部超时，请稍后重试。\"),70202:\"\".concat(\"服务端内部超时，请稍后重试。\"),70206:\"请求中批量数量不合法。\",70402:\"参数非法，请检查必填字段是否填充，或者字段的填充是否满足协议要求。\",70403:\"请求失败，需要 App 管理员权限。\",70398:\"帐号数超限。如需创建多于100个帐号，请将应用升级为专业版，具体操作指引请参见购买指引(\".concat(Um,\"269/32458)。\"),70500:\"\".concat(\"服务端内部错误，请重试。\"),71e3:\"删除帐号失败。仅支持删除体验版帐号，您当前应用为专业版，暂不支持帐号删除。\",20001:\"请求包非法。\",20002:\"UserSig 或 A2 失效。\",20003:\"消息发送方或接收方 UserID 无效或不存在，请检查 UserID 是否已导入即时通信 IM。\",20004:\"网络异常，请重试。\",20005:\"\".concat(\"服务端内部错误，请重试。\"),20006:\"触发发送\".concat(\"单聊消息\",\"之前回调，App 后台返回禁止下发该消息。\"),20007:\"发送\".concat(\"单聊消息\",\"，被对方拉黑，禁止发送。消息发送状态默认展示为失败，您可以登录控制台修改该场景下的消息发送状态展示结果，具体操作请参见消息保留设置(\").concat(Um,\"269/38656)。\"),20009:\"消息发送双方互相不是好友，禁止发送（配置\".concat(\"单聊消息\",\"校验好友关系才会出现）。\"),20010:\"发送\".concat(\"单聊消息\",\"，自己不是对方的好友（单向关系），禁止发送。\"),20011:\"发送\".concat(\"单聊消息\",\"，对方不是自己的好友（单向关系），禁止发送。\"),20012:\"发送方被禁言，该条消息被禁止发送。\",20016:\"消息撤回超过了时间限制（默认2分钟）。\",20018:\"删除漫游内部错误。\",90001:\"JSON 格式解析失败，请检查请求包是否符合 JSON 规范。\",90002:\"\".concat(\"JSON 格式请求包体\",\"中 MsgBody 不符合消息格式描述，或者 MsgBody 不是 Array 类型，请参考 TIMMsgElement 对象的定义(\").concat(Um,\"269/2720\").concat(xm,\")。\"),90003:\"\".concat(\"JSON 格式请求包体\",\"中缺少 To_Account 字段或者 To_Account 帐号不存在。\"),90005:\"\".concat(\"JSON 格式请求包体\",\"中缺少 MsgRandom 字段或者 MsgRandom 字段不是 Integer 类型。\"),90006:\"\".concat(\"JSON 格式请求包体\",\"中缺少 MsgTimeStamp 字段或者 MsgTimeStamp 字段不是 Integer 类型。\"),90007:\"\".concat(\"JSON 格式请求包体\",\"中 MsgBody 类型不是 Array 类型，请将其修改为 Array 类型。\"),90008:\"\".concat(\"JSON 格式请求包体\",\"中缺少 From_Account 字段或者 From_Account 帐号不存在。\"),90009:\"请求需要 App 管理员权限。\",90010:\"\".concat(\"JSON 格式请求包体\",\"不符合消息格式描述，请参考 TIMMsgElement 对象的定义(\").concat(Um,\"269/2720\").concat(xm,\")。\"),90011:\"批量发消息目标帐号超过500，请减少 To_Account 中目标帐号数量。\",90012:\"To_Account 没有注册或不存在，请确认 To_Account 是否导入即时通信 IM 或者是否拼写错误。\",90026:\"消息离线存储时间错误（最多不能超过7天）。\",90031:\"\".concat(\"JSON 格式请求包体\",\"中 SyncOtherMachine 字段不是 Integer 类型。\"),90044:\"\".concat(\"JSON 格式请求包体\",\"中 MsgLifeTime 字段不是 Integer 类型。\"),90048:\"请求的用户帐号不存在。\",90054:\"撤回请求中的 MsgKey 不合法。\",90994:\"\".concat(\"服务端内部错误，请重试。\"),90995:\"\".concat(\"服务端内部错误，请重试。\"),91e3:\"\".concat(\"服务端内部错误，请重试。\"),90992:\"\".concat(\"服务端内部错误，请重试。\",\"如果所有请求都返回该错误码，且 App 配置了第三方回调，请检查 App 服务端是否正常向即时通信 IM 后台服务端返回回调结果。\"),93e3:\"JSON 数据包超长，消息包体请不要超过8k。\",91101:\"Web 端长轮询被踢（Web 端同时在线实例个数超出限制）。\",10002:\"\".concat(\"服务端内部错误，请重试。\"),10003:\"请求中的接口名称错误，请核对接口名称并重试。\",10004:\"参数非法，请根据错误描述检查请求是否正确。\",10005:\"请求包体中携带的帐号数量过多。\",10006:\"操作频率限制，请尝试降低调用的频率。\",10007:\"操作权限不足，例如 Work \".concat(\"群组\",\"中普通成员尝试执行踢人操作，但只有 App 管理员才有权限。\"),10008:\"请求非法，可能是请求中携带的签名信息验证不正确，请再次尝试。\",10009:\"该群不允许群主主动退出。\",10010:\"\".concat(\"群组\",\"不存在，或者曾经存在过，但是目前已经被解散。\"),10011:\"解析 JSON 包体失败，请检查包体的格式是否符合 JSON 格式。\",10012:\"发起操作的 UserID 非法，请检查发起操作的用户 UserID 是否填写正确。\",10013:\"被邀请加入的用户已经是群成员。\",10014:\"群已满员，无法将请求中的用户加入\".concat(\"群组\",\"，如果是批量加人，可以尝试减少加入用户的数量。\"),10015:\"找不到指定 ID 的\".concat(\"群组\",\"。\"),10016:\"App 后台通过第三方回调拒绝本次操作。\",10017:\"因被禁言而不能发送消息，请检查发送者是否被设置禁言。\",10018:\"应答包长度超过最大包长（1MB），请求的内容过多，请尝试减少单次请求的数据量。\",10019:\"请求的用户帐号不存在。\",10021:\"\".concat(\"群组\",\" ID 已被使用，请选择其他的\").concat(\"群组\",\" ID。\"),10023:\"发消息的频率超限，请延长两次发消息时间的间隔。\",10024:\"此邀请或者申请请求已经被处理。\",10025:\"\".concat(\"群组\",\" ID 已被使用，并且操作者为群主，可以直接使用。\"),10026:\"该 SDKAppID 请求的命令字已被禁用。\",10030:\"请求撤回的消息不存在。\",10031:\"消息撤回超过了时间限制（默认2分钟）。\",10032:\"请求撤回的消息不支持撤回操作。\",10033:\"\".concat(\"群组\",\"类型不支持消息撤回操作。\"),10034:\"该消息类型不支持删除操作。\",10035:\"直播群和在线成员广播大群不支持删除消息。\",10036:\"直播群创建数量超过了限制，请参考价格说明(\".concat(Um,\"269/11673)购买预付费套餐“IM直播群”。\"),10037:\"单个用户可创建和加入的\".concat(\"群组\",\"数量超过了限制，请参考价格说明(\").concat(Um,\"269/11673)购买或升级预付费套餐“单人可创建与加入\").concat(\"群组\",\"数”。\"),10038:\"群成员数量超过限制，请参考价格说明(\".concat(Um,\"269/11673)购买或升级预付费套餐“扩展群人数上限”。\"),10041:\"该应用（SDKAppID）已配置不支持群消息撤回。\",10050:\"群属性 key 不存在\",10056:\"请在写入群属性前先使用 getGroupAttributes 接口更新本地群属性，避免冲突。\",30001:\"请求参数错误，请根据错误描述检查请求参数\",30002:\"SDKAppID 不匹配\",30003:\"请求的用户帐号不存在\",30004:\"请求需要 App 管理员权限\",30005:\"关系链字段中包含敏感词\",30006:\"\".concat(\"服务端内部错误，请重试。\"),30007:\"\".concat(\"网络超时，请稍后重试. \"),30008:\"并发写导致写冲突，建议使用批量方式\",30009:\"后台禁止该用户发起加好友请求\",30010:\"自己的好友数已达系统上限\",30011:\"分组已达系统上限\",30012:\"未决数已达系统上限\",30014:\"对方的好友数已达系统上限\",30515:\"请求添加好友时，对方在自己的黑名单中，不允许加好友\",30516:\"请求添加好友时，对方的加好友验证方式是不允许任何人添加自己为好友\",30525:\"请求添加好友时，自己在对方的黑名单中，不允许加好友\",30539:\"等待对方同意\",30540:\"添加好友请求被安全策略打击，请勿频繁发起添加好友请求\",31704:\"与请求删除的帐号之间不存在好友关系\",31707:\"删除好友请求被安全策略打击，请勿频繁发起删除好友请求\"},Km=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this)).code=e.code,r.message=Vm[e.code]||e.message,r.data=e.data||{},r}return n}(p(Error)),Bm=null,Hm=function(e){Bm=e},jm=function(e){return Promise.resolve(Pm(e))},Ym=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof Km)return t&&null!==Bm&&Bm.emit(oo.ERROR,e),Promise.reject(e);if(e instanceof Error){var n=new Km({code:Pd.UNCAUGHT_ERROR,message:e.message});return t&&null!==Bm&&Bm.emit(oo.ERROR,n),Promise.reject(n)}if(Ji(e)||Ji(e.code)||Ji(e.message))Ki.error(\"IMPromise.reject 必须指定code(错误码)和message(错误信息)!!!\");else{if(ji(e.code)&&Yi(e.message)){var o=new Km(e);return t&&null!==Bm&&Bm.emit(oo.ERROR,o),Promise.reject(o)}Ki.error(\"IMPromise.reject code(错误码)必须为数字，message(错误信息)必须为字符串!!!\")}},$m=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"C2CModule\",r}return a(n,[{key:\"onNewC2CMessage\",value:function(e){var t=e.dataList,n=e.isInstantMessage,o=e.C2CRemainingUnreadList;Ki.debug(\"\".concat(this._className,\".onNewC2CMessage count:\").concat(t.length,\" isInstantMessage:\").concat(n));var r=this._newC2CMessageStoredAndSummary({dataList:t,C2CRemainingUnreadList:o,isInstantMessage:n}),a=r.conversationOptionsList,s=r.messageList;(this.filterModifiedMessage(s),a.length>0)&&this.getModule(Jc).onNewMessage({conversationOptionsList:a,isInstantMessage:n});var i=this.filterUnmodifiedMessage(s);n&&i.length>0&&this.emitOuterEvent(oo.MESSAGE_RECEIVED,i),s.length=0}},{key:\"_newC2CMessageStoredAndSummary\",value:function(e){for(var t=e.dataList,n=e.C2CRemainingUnreadList,o=e.isInstantMessage,r=null,a=[],s=[],i={},u=this.getModule(tl),c=0,l=t.length;c<l;c++){var d=t[c];d.currentUser=this.getMyUserID(),d.conversationType=ro.CONV_C2C,d.isSystemMessage=!!d.isSystemMessage,r=new Gm(d),d.elements=u.parseElements(d.elements,d.from),r.setElement(d.elements),r.setNickAndAvatar({nick:d.nick,avatar:d.avatar});var p=r.conversationID;if(o){var g=!1,h=this.getModule(Jc);if(r.from!==this.getMyUserID()){var f=h.getLatestMessageSentByPeer(p);if(f){var _=f.nick,m=f.avatar;_===r.nick&&m===r.avatar||(g=!0)}}else{var v=h.getLatestMessageSentByMe(p);if(v){var M=v.nick,y=v.avatar;M===r.nick&&y===r.avatar||h.modifyMessageSentByMe({conversationID:p,latestNick:r.nick,latestAvatar:r.avatar})}}var I=1===t[c].isModified;if(h.isMessageSentByCurrentInstance(r)?r.isModified=I:I=!1,0===d.msgLifeTime)r.setOnlineOnlyFlag(!0),s.push(r);else{if(!h.pushIntoMessageList(s,r,I))continue;g&&(h.modifyMessageSentByPeer(p),h.updateUserProfileSpecifiedKey({conversationID:p,nick:r.nick,avatar:r.avatar}))}this.getModule(ll).addMessageDelay({currentTime:Date.now(),time:r.time})}if(0!==d.msgLifeTime){if(!1===r.getOnlineOnlyFlag())if(Ji(i[p]))i[p]=a.push({conversationID:p,unreadCount:\"out\"===r.flow?0:1,type:r.conversationType,subType:r.conversationSubType,lastMessage:r})-1;else{var T=i[p];a[T].type=r.conversationType,a[T].subType=r.conversationSubType,a[T].lastMessage=r,\"in\"===r.flow&&a[T].unreadCount++}}else r.setOnlineOnlyFlag(!0)}if(zi(n))for(var D=function(e,t){var o=a.find((function(t){return t.conversationID===\"C2C\".concat(n[e].from)}));o?o.unreadCount+=n[e].count:a.push({conversationID:\"C2C\".concat(n[e].from),unreadCount:n[e].count,type:ro.CONV_C2C,lastMsgTime:n[e].lastMsgTime})},S=0,E=n.length;S<E;S++)D(S);return{conversationOptionsList:a,messageList:s}}},{key:\"onC2CMessageRevoked\",value:function(e){var t=this;Ki.debug(\"\".concat(this._className,\".onC2CMessageRevoked count:\").concat(e.dataList.length));var n=this.getModule(Jc),o=[],r=null;e.dataList.forEach((function(e){if(e.c2cMessageRevokedNotify){var a=e.c2cMessageRevokedNotify.revokedInfos;Ji(a)||a.forEach((function(e){var a=t.getMyUserID()===e.from?\"\".concat(ro.CONV_C2C).concat(e.to):\"\".concat(ro.CONV_C2C).concat(e.from);(r=n.revoke(a,e.sequence,e.random))&&o.push(r)}))}})),0!==o.length&&(n.onMessageRevoked(o),this.emitOuterEvent(oo.MESSAGE_REVOKED,o))}},{key:\"onC2CMessageReadReceipt\",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Ou(e.c2cMessageReadReceipt)){var n=e.c2cMessageReadReceipt.to;e.c2cMessageReadReceipt.uinPairReadArray.forEach((function(e){var o=e.peerReadTime;Ki.debug(\"\".concat(t._className,\"._onC2CMessageReadReceipt to:\").concat(n,\" peerReadTime:\").concat(o));var r=\"\".concat(ro.CONV_C2C).concat(n),a=t.getModule(Jc);a.recordPeerReadTime(r,o),a.updateMessageIsPeerReadProperty(r,o)}))}}))}},{key:\"onC2CMessageReadNotice\",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Ou(e.c2cMessageReadNotice)){var n=t.getModule(Jc);e.c2cMessageReadNotice.uinPairReadArray.forEach((function(e){var o=e.from,r=e.peerReadTime;Ki.debug(\"\".concat(t._className,\".onC2CMessageReadNotice from:\").concat(o,\" lastReadTime:\").concat(r));var a=\"\".concat(ro.CONV_C2C).concat(o);n.updateIsReadAfterReadReport({conversationID:a,lastMessageTime:r}),n.updateUnreadCount(a)}))}}))}},{key:\"sendMessage\",value:function(e,t){var n=this._createC2CMessagePack(e,t);return this.request(n)}},{key:\"_createC2CMessagePack\",value:function(e,t){var n=null;t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0}));var o=\"\";return Yi(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData),{protocolName:ml,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),toAccount:e.to,msgTimeStamp:Math.ceil(Date.now()/1e3),msgBody:e.getElements(),cloudCustomData:o,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:this.isOnlineMessage(e,t)?0:void 0,nick:e.nick,avatar:e.avatar,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||\"\",desc:n.description||\"\",ext:n.extension||\"\",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||\"\"}}:void 0}}}},{key:\"isOnlineMessage\",value:function(e,t){return!(!t||!0!==t.onlineUserOnly)}},{key:\"revokeMessage\",value:function(e){return this.request({protocolName:Fl,requestData:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}},{key:\"deleteMessage\",value:function(e){var t=e.to,n=e.keyList;return Ki.log(\"\".concat(this._className,\".deleteMessage toAccount:\").concat(t,\" count:\").concat(n.length)),this.request({protocolName:Kl,requestData:{fromAccount:this.getMyUserID(),to:t,keyList:n}})}},{key:\"setMessageRead\",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageTime,r=\"\".concat(this._className,\".setMessageRead\");Ki.log(\"\".concat(r,\" conversationID:\").concat(n,\" lastMessageTime:\").concat(o)),ji(o)||Ki.warn(\"\".concat(r,\" 请勿修改 Conversation.lastMessage.lastTime，否则可能会导致已读上报结果不准确\"));var a=new lg(Cg);return a.setMessage(\"conversationID:\".concat(n,\" lastMessageTime:\").concat(o)),this.request({protocolName:ql,requestData:{C2CMsgReaded:{cookie:\"\",C2CMsgReadedItem:[{toAccount:n.replace(\"C2C\",\"\"),lastMessageTime:o,receipt:1}]}}}).then((function(){a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(r,\" ok\"));var e=t.getModule(Jc);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:o}),e.updateUnreadCount(n),Pm()})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.log(\"\".concat(r,\" failed. error:\"),e),Ym(e)}))}},{key:\"getRoamingMessage\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRoamingMessage\"),o=e.peerAccount,r=e.conversationID,a=e.count,s=e.lastMessageTime,i=e.messageKey,u=\"peerAccount:\".concat(o,\" count:\").concat(a||15,\" lastMessageTime:\").concat(s||0,\" messageKey:\").concat(i);Ki.log(\"\".concat(n,\" \").concat(u));var c=new lg(Eg);return this.request({protocolName:xl,requestData:{peerAccount:o,count:a||15,lastMessageTime:s||0,messageKey:i}}).then((function(e){var o=e.data,a=o.complete,s=o.messageList,i=o.messageKey;Ji(s)?Ki.log(\"\".concat(n,\" ok. complete:\").concat(a,\" but messageList is undefined!\")):Ki.log(\"\".concat(n,\" ok. complete:\").concat(a,\" count:\").concat(s.length)),c.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(u,\" complete:\").concat(a,\" length:\").concat(s.length)).end();var l=t.getModule(Jc);1===a&&l.setCompleted(r);var d=l.storeRoamingMessage(s,r);l.modifyMessageList(r),l.updateIsRead(r),l.updateRoamingMessageKey(r,i);var p=l.getPeerReadTime(r);if(Ki.log(\"\".concat(n,\" update isPeerRead property. conversationID:\").concat(r,\" peerReadTime:\").concat(p)),p)l.updateMessageIsPeerReadProperty(r,p);else{var g=r.replace(ro.CONV_C2C,\"\");t.getRemotePeerReadTime([g]).then((function(){l.updateMessageIsPeerReadProperty(r,l.getPeerReadTime(r))}))}return d})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setMessage(u).setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"getRemotePeerReadTime\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRemotePeerReadTime\");if(Ou(e))return Ki.warn(\"\".concat(n,\" userIDList is empty!\")),Promise.resolve();var o=new lg(Rg);return Ki.log(\"\".concat(n,\" userIDList:\").concat(e)),this.request({protocolName:Vl,requestData:{userIDList:e}}).then((function(r){var a=r.data.peerReadTimeList;Ki.log(\"\".concat(n,\" ok. peerReadTimeList:\").concat(a));for(var s=\"\",i=t.getModule(Jc),u=0;u<e.length;u++)s+=\"\".concat(e[u],\"-\").concat(a[u],\" \"),a[u]>0&&i.recordPeerReadTime(\"C2C\".concat(e[u]),a[u]);o.setNetworkType(t.getNetworkType()).setMessage(s).end()})).catch((function(e){t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e)}))}}]),n}(dl),Wm=Math.floor,zm=function(e,t){var n=e.length,o=Wm(n/2);return n<8?Jm(e,t):Xm(zm(e.slice(0,o),t),zm(e.slice(o),t),t)},Jm=function(e,t){for(var n,o,r=e.length,a=1;a<r;){for(o=a,n=e[a];o&&t(e[o-1],n)>0;)e[o]=e[--o];o!==a++&&(e[o]=n)}return e},Xm=function(e,t,n){for(var o=e.length,r=t.length,a=0,s=0,i=[];a<o||s<r;)a<o&&s<r?i.push(n(e[a],t[s])<=0?e[a++]:t[s++]):i.push(a<o?e[a++]:t[s++]);return i},Qm=zm,Zm=Y.match(/firefox\\\\/(\\\\d+)/i),ev=!!Zm&&+Zm[1],tv=/MSIE|Trident/.test(Y),nv=Y.match(/AppleWebKit\\\\/(\\\\d+)\\\\./),ov=!!nv&&+nv[1],rv=[],av=rv.sort,sv=O((function(){rv.sort(void 0)})),iv=O((function(){rv.sort(null)})),uv=Wt(\"sort\"),cv=!O((function(){if(X)return X<70;if(!(ev&&ev>3)){if(tv)return!0;if(ov)return ov<603;var e,t,n,o,r=\"\";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)rv.push({k:t+o,v:n})}for(rv.sort((function(e,t){return t.v-e.v})),o=0;o<rv.length;o++)t=rv[o].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return\"DGBEFHACIJK\"!==r}}));vt({target:\"Array\",proto:!0,forced:sv||!iv||!uv||!cv},{sort:function(e){void 0!==e&&xt(e);var t=re(this);if(cv)return void 0===e?av.call(t):av.call(t,e);var n,o,r=[],a=ze(t.length);for(o=0;o<a;o++)o in t&&r.push(t[o]);for(n=(r=Qm(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Mt(t)>Mt(n)?1:-1}}(e))).length,o=0;o<n;)t[o]=r[o++];for(;o<a;)delete t[o++];return t}});var lv=$t.findIndex,dv=!0;\"findIndex\"in[]&&Array(1).findIndex((function(){dv=!1})),vt({target:\"Array\",proto:!0,forced:dv},{findIndex:function(e){return lv(this,e,arguments.length>1?arguments[1]:void 0)}}),cr(\"findIndex\");var pv=function(){function e(t){o(this,e),this.list=new Map,this._className=\"MessageListHandler\",this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map,this._groupLocalLastMessageSequenceMap=new Map}return a(e,[{key:\"getLocalOldestMessageByConversationID\",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:\"pushIn\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.conversationID,o=e.ID,r=!0;this.list.has(n)||this.list.set(n,new Map);var a=this.list.get(n).has(o);if(a){var s=this.list.get(n).get(o);if(!t||!0===s.isModified)return r=!1}return this.list.get(n).set(o,e),this._setLatestMessageSentByPeer(n,e),this._setLatestMessageSentByMe(n,e),this._setGroupLocalLastMessageSequence(n,e),r}},{key:\"unshift\",value:function(e){var t;if(zi(e)){if(e.length>0){t=e[0].conversationID;var n=e.length;this._unshiftMultipleMessages(e),this._setGroupLocalLastMessageSequence(t,e[n-1])}}else t=e.conversationID,this._unshiftSingleMessage(e),this._setGroupLocalLastMessageSequence(t,e);if(t&&t.startsWith(ro.CONV_C2C)){var o=Array.from(this.list.get(t).values()),r=o.length;if(0===r)return;for(var a=r-1;a>=0;a--)if(\"out\"===o[a].flow){this._setLatestMessageSentByMe(t,o[a]);break}for(var s=r-1;s>=0;s--)if(\"in\"===o[s].flow){this._setLatestMessageSentByPeer(t,o[s]);break}}}},{key:\"_unshiftSingleMessage\",value:function(e){var t=e.conversationID,n=e.ID;if(!this.list.has(t))return this.list.set(t,new Map),void this.list.get(t).set(n,e);var o=Array.from(this.list.get(t));o.unshift([n,e]),this.list.set(t,new Map(o))}},{key:\"_unshiftMultipleMessages\",value:function(e){for(var t=e.length,n=[],o=e[0].conversationID,r=this.list.has(o)?Array.from(this.list.get(o)):[],a=0;a<t;a++)n.push([e[a].ID,e[a]]);this.list.set(o,new Map(n.concat(r)))}},{key:\"remove\",value:function(e){var t=e.conversationID,n=e.ID;this.list.has(t)&&this.list.get(t).delete(n)}},{key:\"revoke\",value:function(e,t,n){if(Ki.debug(\"revoke message\",e,t,n),this.list.has(e)){var o,r=S(this.list.get(e));try{for(r.s();!(o=r.n()).done;){var a=m(o.value,2)[1];if(a.sequence===t&&!a.isRevoked&&(Ji(n)||a.random===n))return a.isRevoked=!0,a}}catch(s){r.e(s)}finally{r.f()}}return null}},{key:\"removeByConversationID\",value:function(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}},{key:\"updateMessageIsPeerReadProperty\",value:function(e,t){var n=[];if(this.list.has(e)){var o,r=S(this.list.get(e));try{for(r.s();!(o=r.n()).done;){var a=m(o.value,2)[1];a.time<=t&&!a.isPeerRead&&\"out\"===a.flow&&(a.isPeerRead=!0,n.push(a))}}catch(s){r.e(s)}finally{r.f()}Ki.log(\"\".concat(this._className,\".updateMessageIsPeerReadProperty conversationID:\").concat(e,\" peerReadTime:\").concat(t,\" count:\").concat(n.length))}return n}},{key:\"updateMessageIsModifiedProperty\",value:function(e){var t=e.conversationID,n=e.ID;if(this.list.has(t)){var o=this.list.get(t).get(n);o&&(o.isModified=!0)}}},{key:\"hasLocalMessageList\",value:function(e){return this.list.has(e)}},{key:\"getLocalMessageList\",value:function(e){return this.hasLocalMessageList(e)?v(this.list.get(e).values()):[]}},{key:\"hasLocalMessage\",value:function(e,t){return!!this.hasLocalMessageList(e)&&this.list.get(e).has(t)}},{key:\"getLocalMessage\",value:function(e,t){return this.hasLocalMessage(e,t)?this.list.get(e).get(t):null}},{key:\"_setLatestMessageSentByPeer\",value:function(e,t){e.startsWith(ro.CONV_C2C)&&\"in\"===t.flow&&this._latestMessageSentByPeerMap.set(e,t)}},{key:\"_setLatestMessageSentByMe\",value:function(e,t){e.startsWith(ro.CONV_C2C)&&\"out\"===t.flow&&this._latestMessageSentByMeMap.set(e,t)}},{key:\"_setGroupLocalLastMessageSequence\",value:function(e,t){e.startsWith(ro.CONV_GROUP)&&this._groupLocalLastMessageSequenceMap.set(e,t.sequence)}},{key:\"getLatestMessageSentByPeer\",value:function(e){return this._latestMessageSentByPeerMap.get(e)}},{key:\"getLatestMessageSentByMe\",value:function(e){return this._latestMessageSentByMeMap.get(e)}},{key:\"getGroupLocalLastMessageSequence\",value:function(e){return this._groupLocalLastMessageSequenceMap.get(e)||0}},{key:\"modifyMessageSentByPeer\",value:function(e,t){var n=this.list.get(e);if(!Ou(n)){var o=Array.from(n.values()),r=o.length;if(0!==r){var a=null,s=null;t&&(s=t);for(var i=0,u=!1,c=r-1;c>=0;c--)\"in\"===o[c].flow&&(null===s?s=o[c]:((a=o[c]).nick!==s.nick&&(a.setNickAndAvatar({nick:s.nick}),u=!0),a.avatar!==s.avatar&&(a.setNickAndAvatar({avatar:s.avatar}),u=!0),u&&(i+=1)));Ki.log(\"\".concat(this._className,\".modifyMessageSentByPeer conversationID:\").concat(e,\" count:\").concat(i))}}}},{key:\"modifyMessageSentByMe\",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,r=this.list.get(t);if(!Ou(r)){var a=Array.from(r.values()),s=a.length;if(0!==s){for(var i=null,u=0,c=!1,l=s-1;l>=0;l--)\"out\"===a[l].flow&&((i=a[l]).nick!==n&&(i.setNickAndAvatar({nick:n}),c=!0),i.avatar!==o&&(i.setNickAndAvatar({avatar:o}),c=!0),c&&(u+=1));Ki.log(\"\".concat(this._className,\".modifyMessageSentByMe conversationID:\").concat(t,\" count:\").concat(u))}}}},{key:\"traversal\",value:function(){if(0!==this.list.size&&-1===Ki.getLevel()){console.group(\"conversationID-messageCount\");var e,t=S(this.list);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],r=n[1];console.log(\"\".concat(o,\"-\").concat(r.size))}}catch(a){t.e(a)}finally{t.f()}console.groupEnd()}}},{key:\"reset\",value:function(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear(),this._groupLocalLastMessageSequenceMap.clear()}}]),e}(),gv={CONTEXT_A2KEY_AND_TINYID_UPDATED:\"_a2KeyAndTinyIDUpdated\",CLOUD_CONFIG_UPDATED:\"_cloudConfigUpdated\"};function hv(e){this.mixin(e)}hv.mixin=function(e){var t=e.prototype||e;t._isReady=!1,t.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=!0,setTimeout((function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach((function(e){e.call(this)}),e)}),1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var fv=[\"jpg\",\"jpeg\",\"gif\",\"png\",\"bmp\"],_v=[\"mp4\"],mv=1,vv=2,Mv=3,yv=255,Iv=function(){function e(t){var n=this;o(this,e),Ou(t)||(this.userID=t.userID||\"\",this.nick=t.nick||\"\",this.gender=t.gender||\"\",this.birthday=t.birthday||0,this.location=t.location||\"\",this.selfSignature=t.selfSignature||\"\",this.allowType=t.allowType||ro.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||\"\",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||ro.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],Ou(t.profileCustomField)||t.profileCustomField.forEach((function(e){n.profileCustomField.push({key:e.key,value:e.value})})))}return a(e,[{key:\"validate\",value:function(e){var t=!0,n=\"\";if(Ou(e))return{valid:!1,tips:\"empty options\"};if(e.profileCustomField)for(var o=e.profileCustomField.length,r=null,a=0;a<o;a++){if(r=e.profileCustomField[a],!Yi(r.key)||-1===r.key.indexOf(\"Tag_Profile_Custom\"))return{valid:!1,tips:\"自定义资料字段的前缀必须是 Tag_Profile_Custom\"};if(!Yi(r.value))return{valid:!1,tips:\"自定义资料字段的 value 必须是字符串\"}}for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(\"profileCustomField\"===s)continue;if(Ou(e[s])&&!Yi(e[s])&&!ji(e[s])){n=\"key:\"+s+\", invalid value:\"+e[s],t=!1;continue}switch(s){case\"nick\":Yi(e[s])||(n=\"nick should be a string\",t=!1),su(e[s])>500&&(n=\"nick name limited: must less than or equal to \".concat(500,\" bytes, current size: \").concat(su(e[s]),\" bytes\"),t=!1);break;case\"gender\":lu(dm,e.gender)||(n=\"key:gender, invalid value:\"+e.gender,t=!1);break;case\"birthday\":ji(e.birthday)||(n=\"birthday should be a number\",t=!1);break;case\"location\":Yi(e.location)||(n=\"location should be a string\",t=!1);break;case\"selfSignature\":Yi(e.selfSignature)||(n=\"selfSignature should be a string\",t=!1);break;case\"allowType\":lu(gm,e.allowType)||(n=\"key:allowType, invalid value:\"+e.allowType,t=!1);break;case\"language\":ji(e.language)||(n=\"language should be a number\",t=!1);break;case\"avatar\":Yi(e.avatar)||(n=\"avatar should be a string\",t=!1);break;case\"messageSettings\":0!==e.messageSettings&&1!==e.messageSettings&&(n=\"messageSettings should be 0 or 1\",t=!1);break;case\"adminForbidType\":lu(pm,e.adminForbidType)||(n=\"key:adminForbidType, invalid value:\"+e.adminForbidType,t=!1);break;case\"level\":ji(e.level)||(n=\"level should be a number\",t=!1);break;case\"role\":ji(e.role)||(n=\"role should be a number\",t=!1);break;default:n=\"unknown key:\"+s+\"  \"+e[s],t=!1}}return{valid:t,tips:n}}}]),e}(),Tv=function e(t){o(this,e),this.value=t,this.next=null},Dv=function(){function e(t){o(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map,Ki.debug(\"SinglyLinkedList init MAX_LENGTH:\".concat(this.MAX_LENGTH))}return a(e,[{key:\"set\",value:function(e){var t=new Tv(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var n=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(n.value),n.next=null,n=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:\"has\",value:function(e){return this.map.has(e)}},{key:\"delete\",value:function(e){this.has(e)&&this.map.delete(e)}},{key:\"tail\",value:function(){return this.pTail}},{key:\"size\",value:function(){return this.map.size}},{key:\"data\",value:function(){return Array.from(this.map.keys())}},{key:\"reset\",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),Sv=[\"groupID\",\"name\",\"avatar\",\"type\",\"introduction\",\"notification\",\"ownerID\",\"selfInfo\",\"createTime\",\"infoSequence\",\"lastInfoTime\",\"lastMessage\",\"nextMessageSeq\",\"memberNum\",\"maxMemberNum\",\"memberList\",\"joinOption\",\"groupCustomField\",\"muteAllMembers\"],Ev=function(){function e(t){o(this,e),this.groupID=\"\",this.name=\"\",this.avatar=\"\",this.type=\"\",this.introduction=\"\",this.notification=\"\",this.ownerID=\"\",this.createTime=\"\",this.infoSequence=\"\",this.lastInfoTime=\"\",this.selfInfo={messageRemindType:\"\",joinTime:\"\",nameCard:\"\",role:\"\"},this.lastMessage={lastTime:\"\",lastSequence:\"\",fromAccount:\"\",messageForShow:\"\"},this.nextMessageSeq=\"\",this.memberNum=\"\",this.memberCount=\"\",this.maxMemberNum=\"\",this.maxMemberCount=\"\",this.joinOption=\"\",this.groupCustomField=[],this.muteAllMembers=void 0,this._initGroup(t)}return a(e,[{key:\"memberNum\",get:function(){return Ki.warn(\"！！！v2.8.0起弃用memberNum，请使用 memberCount\"),this.memberCount},set:function(e){}},{key:\"maxMemberNum\",get:function(){return Ki.warn(\"！！！v2.8.0起弃用maxMemberNum，请使用 maxMemberCount\"),this.maxMemberCount},set:function(e){}},{key:\"_initGroup\",value:function(e){for(var t in e)Sv.indexOf(t)<0||(\"selfInfo\"!==t?(\"memberNum\"===t&&(this.memberCount=e[t]),\"maxMemberNum\"===t&&(this.maxMemberCount=e[t]),this[t]=e[t]):this.updateSelfInfo(e[t]))}},{key:\"updateGroup\",value:function(e){var t=JSON.parse(JSON.stringify(e));t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),Ji(t.muteAllMembers)||(\"On\"===t.muteAllMembers?t.muteAllMembers=!0:t.muteAllMembers=!1),t.groupCustomField&&fu(this.groupCustomField,t.groupCustomField),Ji(t.memberNum)||(this.memberCount=t.memberNum),Ji(t.maxMemberNum)||(this.maxMemberCount=t.maxMemberNum),ru(this,t,[\"members\",\"errorCode\",\"lastMsgTime\",\"groupCustomField\",\"memberNum\",\"maxMemberNum\"])}},{key:\"updateSelfInfo\",value:function(e){var t=e.nameCard,n=e.joinTime,o=e.role,r=e.messageRemindType;ru(this.selfInfo,{nameCard:t,joinTime:n,role:o,messageRemindType:r},[],[\"\",null,void 0,0,NaN])}},{key:\"setSelfNameCard\",value:function(e){this.selfInfo.nameCard=e}}]),e}(),Av=function(e,t){if(Ji(t))return\"\";switch(e){case ro.MSG_TEXT:return t.text;case ro.MSG_IMAGE:return\"[图片]\";case ro.MSG_GEO:return\"[位置]\";case ro.MSG_AUDIO:return\"[语音]\";case ro.MSG_VIDEO:return\"[视频]\";case ro.MSG_FILE:return\"[文件]\";case ro.MSG_CUSTOM:return\"[自定义消息]\";case ro.MSG_GRP_TIP:return\"[群提示消息]\";case ro.MSG_GRP_SYS_NOTICE:return\"[群系统通知]\";case ro.MSG_FACE:return\"[动画表情]\";case ro.MSG_MERGER:return\"[聊天记录]\";default:return\"\"}},kv=function(e){return Ji(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:\"\",payload:null,type:\"\",isRevoked:!1,cloudCustomData:\"\",onlineOnlyFlag:!1}:e instanceof Gm?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||\"\",messageForShow:Av(e.type,e.payload),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||\"\",onlineOnlyFlag:!!Qi(e.getOnlineOnlyFlag)&&e.getOnlineOnlyFlag()}:t(t({},e),{},{messageForShow:Av(e.type,e.payload)})},Nv=function(){function e(t){o(this,e),this.conversationID=t.conversationID||\"\",this.unreadCount=t.unreadCount||0,this.type=t.type||\"\",this.lastMessage=kv(t.lastMessage),t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=t.peerReadTime||0,this.groupAtInfoList=[],this.remark=\"\",this.isPinned=t.isPinned||!1,this._initProfile(t)}return a(e,[{key:\"toAccount\",get:function(){return this.conversationID.startsWith(ro.CONV_C2C)?this.conversationID.replace(ro.CONV_C2C,\"\"):this.conversationID.startsWith(ro.CONV_GROUP)?this.conversationID.replace(ro.CONV_GROUP,\"\"):\"\"}},{key:\"subType\",get:function(){return this.groupProfile?this.groupProfile.type:\"\"}},{key:\"_initProfile\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"userProfile\":t.userProfile=e.userProfile;break;case\"groupProfile\":t.groupProfile=e.groupProfile}})),Ji(this.userProfile)&&this.type===ro.CONV_C2C?this.userProfile=new Iv({userID:e.conversationID.replace(\"C2C\",\"\")}):Ji(this.groupProfile)&&this.type===ro.CONV_GROUP&&(this.groupProfile=new Ev({groupID:e.conversationID.replace(\"GROUP\",\"\")}))}},{key:\"updateUnreadCount\",value:function(e,t){Ji(e)||(mu(this.subType)?this.unreadCount=0:t&&this.type===ro.CONV_GROUP?this.unreadCount=e:this.unreadCount=this.unreadCount+e)}},{key:\"updateLastMessage\",value:function(e){this.lastMessage=kv(e)}},{key:\"updateGroupAtInfoList\",value:function(e){var t,n=(M(t=e.groupAtType)||y(t)||I(t)||D()).slice(0);-1!==n.indexOf(ro.CONV_AT_ME)&&-1!==n.indexOf(ro.CONV_AT_ALL)&&(n=[ro.CONV_AT_ALL_AT_ME]);var o={from:e.from,groupID:e.groupID,messageSequence:e.sequence,atTypeArray:n,__random:e.__random,__sequence:e.__sequence};this.groupAtInfoList.push(o),Ki.debug(\"Conversation.updateGroupAtInfoList conversationID:\".concat(this.conversationID),this.groupAtInfoList)}},{key:\"clearGroupAtInfoList\",value:function(){this.groupAtInfoList.length=0}},{key:\"reduceUnreadCount\",value:function(){this.unreadCount>=1&&(this.unreadCount-=1)}},{key:\"isLastMessageRevoked\",value:function(e){var t=e.sequence,n=e.time;return this.type===ro.CONV_C2C&&t===this.lastMessage.lastSequence&&n===this.lastMessage.lastTime||this.type===ro.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:\"setLastMessageRevoked\",value:function(e){this.lastMessage.isRevoked=e}}]),e}(),Cv=function(e){i(r,e);var n=_(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._className=\"ConversationModule\",hv.mixin(h(t)),t._messageListHandler=new pv,t.singlyLinkedList=new Dv(100),t._pagingStatus=Ac.NOT_START,t._pagingTimeStamp=0,t._pagingStartIndex=0,t._pagingPinnedTimeStamp=0,t._pagingPinnedStartIndex=0,t._conversationMap=new Map,t._tmpGroupList=[],t._tmpGroupAtTipsList=[],t._peerReadTimeMap=new Map,t._completedMap=new Map,t._roamingMessageKeyMap=new Map,t._initListeners(),t}return a(r,[{key:\"_initListeners\",value:function(){this.getInnerEmitterInstance().on(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initLocalConversationList,this)}},{key:\"onCheckTimer\",value:function(e){e%60==0&&this._messageListHandler.traversal()}},{key:\"_initLocalConversationList\",value:function(){var e=this,t=new lg(Vg);Ki.log(\"\".concat(this._className,\"._initLocalConversationList.\"));var n=\"\",o=this._getStorageConversationList();if(o){for(var r=o.length,a=0;a<r;a++){var s=o[a];if(s&&s.groupProfile){var i=s.groupProfile.type;if(mu(i))continue}this._conversationMap.set(o[a].conversationID,new Nv(o[a]))}this._emitConversationUpdate(!0,!1),n=\"count:\".concat(r)}else n=\"count:0\";t.setNetworkType(this.getNetworkType()).setMessage(n).end(),this.getModule(Yc)||this.triggerReady(),this.ready((function(){e._tmpGroupList.length>0&&(e.updateConversationGroupProfile(e._tmpGroupList),e._tmpGroupList.length=0)})),this._syncConversationList()}},{key:\"onMessageSent\",value:function(e){this._onSendOrReceiveMessage(e.conversationOptionsList,!0)}},{key:\"onNewMessage\",value:function(e){this._onSendOrReceiveMessage(e.conversationOptionsList,e.isInstantMessage)}},{key:\"_onSendOrReceiveMessage\",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._isReady?0!==e.length&&(this._getC2CPeerReadTime(e),this._updateLocalConversationList(e,!1,n),this._setStorageConversationList(),this._emitConversationUpdate()):this.ready((function(){t._onSendOrReceiveMessage(e,n)}))}},{key:\"updateConversationGroupProfile\",value:function(e){var t=this;zi(e)&&0===e.length||(0!==this._conversationMap.size?(e.forEach((function(e){var n=\"GROUP\".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);o.groupProfile=e,o.lastMessage.lastSequence<e.nextMessageSeq&&(o.lastMessage.lastSequence=e.nextMessageSeq-1),o.subType||(o.subType=e.type)}})),this._emitConversationUpdate(!0,!1)):this._tmpGroupList=e)}},{key:\"_updateConversationUserProfile\",value:function(e){var t=this;e.data.forEach((function(e){var n=\"C2C\".concat(e.userID);t._conversationMap.has(n)&&(t._conversationMap.get(n).userProfile=e)})),this._emitConversationUpdate(!0,!1)}},{key:\"onMessageRevoked\",value:function(e){var t=this;if(0!==e.length){var n=null,o=!1;e.forEach((function(e){(n=t._conversationMap.get(e.conversationID))&&n.isLastMessageRevoked(e)&&(o=!0,n.setLastMessageRevoked(!0))})),o&&this._emitConversationUpdate(!0,!1)}}},{key:\"onMessageDeleted\",value:function(e){if(0!==e.length){e.forEach((function(e){e.isDeleted=!0}));for(var t=e[0].conversationID,n=this._messageListHandler.getLocalMessageList(t),o={},r=n.length-1;r>0;r--)if(!n[r].isDeleted){o=n[r];break}var a=this._conversationMap.get(t);if(a){var s=!1;a.lastMessage.lastSequence!==o.sequence&&a.lastMessage.lastTime!==o.time&&(a.updateLastMessage(o),s=!0,Ki.log(\"\".concat(this._className,\".onMessageDeleted. update conversationID:\").concat(t,\" with lastMessage:\"),a.lastMessage)),t.startsWith(ro.CONV_C2C)&&this.updateUnreadCount(t),s&&this._emitConversationUpdate(!0,!1)}}}},{key:\"onNewGroupAtTips\",value:function(e){var t=this,n=e.dataList,o=null;n.forEach((function(e){e.groupAtTips?o=e.groupAtTips:e.elements&&(o=e.elements),o.__random=e.random,o.__sequence=e.clientSequence,t._tmpGroupAtTipsList.push(o)})),Ki.debug(\"\".concat(this._className,\".onNewGroupAtTips isReady:\").concat(this._isReady),this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:\"_handleGroupAtTipsList\",value:function(){var e=this;if(0!==this._tmpGroupAtTipsList.length){var t=!1;this._tmpGroupAtTipsList.forEach((function(n){var o=n.groupID;if(n.from!==e.getMyUserID()){var r=e._conversationMap.get(\"\".concat(ro.CONV_GROUP).concat(o));r&&(r.updateGroupAtInfoList(n),t=!0)}})),t&&this._emitConversationUpdate(!0,!1),this._tmpGroupAtTipsList.length=0}}},{key:\"_getC2CPeerReadTime\",value:function(e){var t=this,n=[];if(e.forEach((function(e){t._conversationMap.has(e.conversationID)||e.type!==ro.CONV_C2C||n.push(e.conversationID.replace(ro.CONV_C2C,\"\"))})),n.length>0){Ki.debug(\"\".concat(this._className,\"._getC2CPeerReadTime userIDList:\").concat(n));var o=this.getModule(Yc);o&&o.getRemotePeerReadTime(n)}}},{key:\"_getStorageConversationList\",value:function(){return this.getModule(Qc).getItem(\"conversationMap\")}},{key:\"_setStorageConversationList\",value:function(){var e=this.getLocalConversationList().slice(0,20).map((function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}}));this.getModule(Qc).setItem(\"conversationMap\",e)}},{key:\"_emitConversationUpdate\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=v(this._conversationMap.values());if(t){var o=this.getModule($c);o&&o.updateGroupLastMessage(n)}e&&this.emitOuterEvent(oo.CONVERSATION_LIST_UPDATED,n)}},{key:\"getLocalConversationList\",value:function(){return v(this._conversationMap.values())}},{key:\"getLocalConversation\",value:function(e){return this._conversationMap.get(e)}},{key:\"_syncConversationList\",value:function(){var e=this,t=new lg(Kg);return this._pagingStatus===Ac.NOT_START&&this._conversationMap.clear(),this._pagingGetConversationList().then((function(n){return e._pagingStatus=Ac.RESOLVED,e._setStorageConversationList(),e._handleC2CPeerReadTime(),e.checkAndPatchRemark(),t.setMessage(e._conversationMap.size).setNetworkType(e.getNetworkType()).end(),n})).catch((function(n){return e._pagingStatus=Ac.REJECTED,t.setMessage(e._pagingTimeStamp),e.probeNetwork().then((function(e){var o=m(e,2),r=o[0],a=o[1];t.setError(n,r,a).end()})),Ym(n)}))}},{key:\"_pagingGetConversationList\",value:function(){var e=this,t=\"\".concat(this._className,\"._pagingGetConversationList\");return Ki.log(\"\".concat(t,\" timeStamp:\").concat(this._pagingTimeStamp,\" startIndex:\").concat(this._pagingStartIndex)+\" pinnedTimeStamp:\".concat(this._pagingPinnedTimeStamp,\" pinnedStartIndex:\").concat(this._pagingPinnedStartIndex)),this._pagingStatus=Ac.PENDING,this.request({protocolName:Bl,requestData:{fromAccount:this.getMyUserID(),timeStamp:this._pagingTimeStamp,startIndex:this._pagingStartIndex,pinnedTimeStamp:this._pagingPinnedTimeStamp,pinnedStartIndex:this._pagingStartIndex,orderType:1}}).then((function(n){var o=n.data,r=o.completeFlag,a=o.conversations,s=void 0===a?[]:a,i=o.timeStamp,u=o.startIndex,c=o.pinnedTimeStamp,l=o.pinnedStartIndex;if(Ki.log(\"\".concat(t,\" ok. completeFlag:\").concat(r,\" count:\").concat(s.length)),s.length>0){var d=e._getConversationOptions(s);e._updateLocalConversationList(d,!0)}if(e._isReady)e._emitConversationUpdate();else{if(!e.isLoggedIn())return jm();e.triggerReady()}return e._pagingTimeStamp=i,e._pagingStartIndex=u,e._pagingPinnedTimeStamp=c,e._pagingPinnedStartIndex=l,1!==r?e._pagingGetConversationList():(e._handleGroupAtTipsList(),jm())})).catch((function(n){throw e.isLoggedIn()&&(e._isReady||(Ki.warn(\"\".concat(t,\" failed. error:\"),n),e.triggerReady())),n}))}},{key:\"_updateLocalConversationList\",value:function(e,t,n){var o,r=Date.now();o=this._getTmpConversationListMapping(e,t,n),this._conversationMap=new Map(this._sortConversationList([].concat(v(o.toBeUpdatedConversationList),v(this._conversationMap)))),t||this._updateUserOrGroupProfile(o.newConversationList),Ki.debug(\"\".concat(this._className,\"._updateLocalConversationList cost \").concat(Date.now()-r,\" ms\"))}},{key:\"_getTmpConversationListMapping\",value:function(e,t,n){for(var o=[],r=[],a=this.getModule($c),s=this.getModule(Wc),i=0,u=e.length;i<u;i++){var c=new Nv(e[i]),l=c.conversationID;if(this._conversationMap.has(l)){var d=this._conversationMap.get(l),p=[\"unreadCount\",\"allowType\",\"adminForbidType\",\"payload\",\"isPinned\"];n||p.push(\"lastMessage\"),ru(d,c,p,[null,void 0,\"\",0,NaN]),d.updateUnreadCount(c.unreadCount,t),n&&(d.lastMessage.payload=e[i].lastMessage.payload),e[i].lastMessage&&d.lastMessage.cloudCustomData!==e[i].lastMessage.cloudCustomData&&(d.lastMessage.cloudCustomData=e[i].lastMessage.cloudCustomData||\"\"),this._conversationMap.delete(l),o.push([l,d])}else{if(c.type===ro.CONV_GROUP&&a){var g=c.groupProfile.groupID,h=a.getLocalGroupProfile(g);h&&(c.groupProfile=h,c.updateUnreadCount(0))}else if(c.type===ro.CONV_C2C){var f=l.replace(ro.CONV_C2C,\"\");s&&s.isMyFriend(f)&&(c.remark=s.getFriendRemark(f))}r.push(c),o.push([l,c])}}return{toBeUpdatedConversationList:o,newConversationList:r}}},{key:\"_sortConversationList\",value:function(e){var t=[],n=[];return e.forEach((function(e){!0===e[1].isPinned?t.push(e):n.push(e)})),t.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})).concat(n.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})))}},{key:\"_sortConversationListAndEmitEvent\",value:function(){this._conversationMap=new Map(this._sortConversationList(v(this._conversationMap))),this._emitConversationUpdate(!0,!1)}},{key:\"_updateUserOrGroupProfile\",value:function(e){var t=this;if(0!==e.length){var n=[],o=[],r=this.getModule(jc),a=this.getModule($c);e.forEach((function(e){if(e.type===ro.CONV_C2C)n.push(e.toAccount);else if(e.type===ro.CONV_GROUP){var t=e.toAccount;a.hasLocalGroup(t)?e.groupProfile=a.getLocalGroupProfile(t):o.push(t)}})),Ki.log(\"\".concat(this._className,\"._updateUserOrGroupProfile c2cUserIDList:\").concat(n,\" groupIDList:\").concat(o)),n.length>0&&r.getUserProfile({userIDList:n}).then((function(e){var n=e.data;zi(n)?n.forEach((function(e){t._conversationMap.get(\"C2C\".concat(e.userID)).userProfile=e})):t._conversationMap.get(\"C2C\".concat(n.userID)).userProfile=n})),o.length>0&&a.getGroupProfileAdvance({groupIDList:o,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"FaceUrl\"]}}).then((function(e){e.data.successGroupList.forEach((function(e){var n=\"GROUP\".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);ru(o.groupProfile,e,[],[null,void 0,\"\",0,NaN]),!o.subType&&e.type&&(o.subType=e.type)}}))}))}}},{key:\"_getConversationOptions\",value:function(e){var t=[],n=e.filter((function(e){var t=e.lastMsg;return Wi(t)})).map((function(e){if(1===e.type){var n={userID:e.userID,nick:e.c2CNick,avatar:e.c2CImage};return t.push(n),{conversationID:\"C2C\".concat(e.userID),type:\"C2C\",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,cloudCustomData:e.cloudCustomData||\"\",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1},userProfile:new Iv(n),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned}}return{conversationID:\"GROUP\".concat(e.groupID),type:\"GROUP\",lastMessage:{lastTime:e.time,lastSequence:e.messageReadSeq+e.unreadCount,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,cloudCustomData:e.cloudCustomData||\"\",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1},groupProfile:new Ev({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0,isPinned:1===e.isPinned}}));t.length>0&&this.getModule(jc).onConversationsProfileUpdated(t);return n}},{key:\"getLocalMessageList\",value:function(e){return this._messageListHandler.getLocalMessageList(e)}},{key:\"deleteLocalMessage\",value:function(e){e instanceof Gm&&this._messageListHandler.remove(e)}},{key:\"onConversationDeleted\",value:function(e){var t=this;Ki.log(\"\".concat(this._className,\".onConversationDeleted\")),zi(e)&&e.forEach((function(e){var n=e.type,o=e.userID,r=e.groupID,a=\"\";1===n?a=\"\".concat(ro.CONV_C2C).concat(o):2===n&&(a=\"\".concat(ro.CONV_GROUP).concat(r)),t.deleteLocalConversation(a)}))}},{key:\"onConversationPinned\",value:function(e){var t=this;if(zi(e)){var n=!1;e.forEach((function(e){var o,r=e.type,a=e.userID,s=e.groupID;1===r?o=t.getLocalConversation(\"\".concat(ro.CONV_C2C).concat(a)):2===r&&(o=t.getLocalConversation(\"\".concat(ro.CONV_GROUP).concat(s))),o&&(Ki.log(\"\".concat(t._className,\".onConversationPinned conversationID:\").concat(o.conversationID,\" isPinned:\").concat(o.isPinned)),o.isPinned||(o.isPinned=!0,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:\"onConversationUnpinned\",value:function(e){var t=this;if(zi(e)){var n=!1;e.forEach((function(e){var o,r=e.type,a=e.userID,s=e.groupID;1===r?o=t.getLocalConversation(\"\".concat(ro.CONV_C2C).concat(a)):2===r&&(o=t.getLocalConversation(\"\".concat(ro.CONV_GROUP).concat(s))),o&&(Ki.log(\"\".concat(t._className,\".onConversationUnpinned conversationID:\").concat(o.conversationID,\" isPinned:\").concat(o.isPinned)),o.isPinned&&(o.isPinned=!1,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:\"getMessageList\",value:function(e){var t=this,n=e.conversationID,o=e.nextReqMessageID,r=e.count,a=\"\".concat(this._className,\".getMessageList\"),s=this.getLocalConversation(n),i=\"\";if(s&&s.groupProfile&&(i=s.groupProfile.type),mu(i))return Ki.log(\"\".concat(a,\" not available in avchatroom. conversationID:\").concat(n)),jm({messageList:[],nextReqMessageID:\"\",isCompleted:!0});(Ji(r)||r>15)&&(r=15);var u=this._computeLeftCount({conversationID:n,nextReqMessageID:o});return Ki.log(\"\".concat(a,\" conversationID:\").concat(n,\" leftCount:\").concat(u,\" count:\").concat(r,\" nextReqMessageID:\").concat(o)),this._needGetHistory({conversationID:n,leftCount:u,count:r})?this.getHistoryMessages({conversationID:n,nextReqMessageID:o,count:20}).then((function(){return u=t._computeLeftCount({conversationID:n,nextReqMessageID:o}),Pm(t._computeResult({conversationID:n,nextReqMessageID:o,count:r,leftCount:u}))})):(Ki.log(\"\".concat(a,\".getMessageList get message list from memory\")),this.modifyMessageList(n),jm(this._computeResult({conversationID:n,nextReqMessageID:o,count:r,leftCount:u})))}},{key:\"_computeLeftCount\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;return n?this._messageListHandler.getLocalMessageList(t).findIndex((function(e){return e.ID===n})):this._getMessageListSize(t)}},{key:\"_getMessageListSize\",value:function(e){return this._messageListHandler.getLocalMessageList(e).length}},{key:\"_needGetHistory\",value:function(e){var t=e.conversationID,n=e.leftCount,o=e.count,r=this.getLocalConversation(t),a=\"\";return r&&r.groupProfile&&(a=r.groupProfile.type),!yu(t)&&!mu(a)&&(n<o&&!this._completedMap.has(t))}},{key:\"_computeResult\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,r=e.leftCount,a=this._computeMessageList({conversationID:t,nextReqMessageID:n,count:o}),s=this._computeIsCompleted({conversationID:t,leftCount:r,count:o}),i=this._computeNextReqMessageID({messageList:a,isCompleted:s,conversationID:t}),u=\"\".concat(this._className,\"._computeResult. conversationID:\").concat(t);return Ki.log(\"\".concat(u,\" leftCount:\").concat(r,\" count:\").concat(o,\" nextReqMessageID:\").concat(i,\" isCompleted:\").concat(s)),{messageList:a,nextReqMessageID:i,isCompleted:s}}},{key:\"_computeMessageList\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,r=this._messageListHandler.getLocalMessageList(t),a=this._computeIndexEnd({nextReqMessageID:n,messageList:r}),s=this._computeIndexStart({indexEnd:a,count:o});return r.slice(s,a)}},{key:\"_computeNextReqMessageID\",value:function(e){var t=e.messageList,n=e.isCompleted,o=e.conversationID;if(!n)return 0===t.length?\"\":t[0].ID;var r=this._messageListHandler.getLocalMessageList(o);return 0===r.length?\"\":r[0].ID}},{key:\"_computeIndexEnd\",value:function(e){var t=e.messageList,n=void 0===t?[]:t,o=e.nextReqMessageID;return o?n.findIndex((function(e){return e.ID===o})):n.length}},{key:\"_computeIndexStart\",value:function(e){var t=e.indexEnd,n=e.count;return t>n?t-n:0}},{key:\"_computeIsCompleted\",value:function(e){var t=e.conversationID;return!!(e.leftCount<=e.count&&this._completedMap.has(t))}},{key:\"getHistoryMessages\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;if(t===ro.CONV_SYSTEM)return jm();e.count?e.count>20&&(e.count=20):e.count=15;var o=this._messageListHandler.getLocalOldestMessageByConversationID(t);o||((o={}).time=0,o.sequence=0,0===t.indexOf(ro.CONV_C2C)?(o.to=t.replace(ro.CONV_C2C,\"\"),o.conversationType=ro.CONV_C2C):0===t.indexOf(ro.CONV_GROUP)&&(o.to=t.replace(ro.CONV_GROUP,\"\"),o.conversationType=ro.CONV_GROUP));var r=\"\",a=null;switch(o.conversationType){case ro.CONV_C2C:return r=t.replace(ro.CONV_C2C,\"\"),(a=this.getModule(Yc))?a.getRoamingMessage({conversationID:e.conversationID,peerAccount:r,count:e.count,lastMessageTime:this._roamingMessageKeyMap.has(t)?o.time:0,messageKey:this._roamingMessageKeyMap.get(t)}):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp});case ro.CONV_GROUP:return(a=this.getModule($c))?a.getRoamingMessage({conversationID:e.conversationID,groupID:o.to,count:e.count,sequence:n&&!1===o.getOnlineOnlyFlag()?o.sequence-1:o.sequence}):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp});default:return jm()}}},{key:\"patchConversationLastMessage\",value:function(e){var t=this.getLocalConversation(e);if(t){var n=t.lastMessage,o=n.messageForShow,r=n.payload;if(Ou(o)||Ou(r)){var a=this._messageListHandler.getLocalMessageList(e);if(0===a.length)return;var s=a[a.length-1];Ki.log(\"\".concat(this._className,\".patchConversationLastMessage conversationID:\").concat(e,\" payload:\"),s.payload),t.updateLastMessage(s)}}}},{key:\"storeRoamingMessage\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,o=n.startsWith(ro.CONV_C2C)?ro.CONV_C2C:ro.CONV_GROUP,r=null,a=[],s=0,i=e.length,u=null,c=o===ro.CONV_GROUP,l=this.getModule(tl),d=function(){s=c?e.length-1:0,i=c?0:e.length},p=function(){c?--s:++s},g=function(){return c?s>=i:s<i};for(d();g();p())if(c&&1===e[s].sequence&&this.setCompleted(n),1!==e[s].isPlaceMessage)if((r=new Gm(e[s])).to=e[s].to,r.isSystemMessage=!!e[s].isSystemMessage,r.conversationType=o,4===e[s].event?u={type:ro.MSG_GRP_TIP,content:t(t({},e[s].elements),{},{groupProfile:e[s].groupProfile})}:(e[s].elements=l.parseElements(e[s].elements,e[s].from),u=e[s].elements),c||r.setNickAndAvatar({nick:e[s].nick,avatar:e[s].avatar}),Ou(u)){var h=new lg(Og);h.setMessage(\"from:\".concat(r.from,\" to:\").concat(r.to,\" sequence:\").concat(r.sequence,\" event:\").concat(e[s].event)),h.setNetworkType(this.getNetworkType()).setLevel(\"warning\").end()}else r.setElement(u),r.reInitialize(this.getMyUserID()),a.push(r);return this._messageListHandler.unshift(a),d=p=g=null,a}},{key:\"setMessageRead\",value:function(e){var t=e.conversationID,n=e.messageID,o=this.getLocalConversation(t);if(Ki.log(\"\".concat(this._className,\".setMessageRead conversationID:\").concat(t,\" unreadCount:\").concat(o?o.unreadCount:0)),!o)return jm();if(o.type!==ro.CONV_GROUP||Ou(o.groupAtInfoList)||this.deleteGroupAtTips(t),0===o.unreadCount)return jm();var r=this._messageListHandler.getLocalMessage(t,n),a=null;switch(o.type){case ro.CONV_C2C:return(a=this.getModule(Yc))?a.setMessageRead({conversationID:t,lastMessageTime:r?r.time:o.lastMessage.lastTime}):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp});case ro.CONV_GROUP:return(a=this._moduleManager.getModule($c))?a.setMessageRead({conversationID:t,lastMessageSeq:r?r.sequence:o.lastMessage.lastSequence}):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp});case ro.CONV_SYSTEM:return o.unreadCount=0,this._emitConversationUpdate(!0,!1),jm();default:return jm()}}},{key:\"updateIsReadAfterReadReport\",value:function(e){var t=e.conversationID,n=e.lastMessageSeq,o=e.lastMessageTime,r=this._messageListHandler.getLocalMessageList(t);if(0!==r.length)for(var a,s=r.length-1;s>=0;s--)if(a=r[s],!(o&&a.time>o||n&&a.sequence>n)){if(\"in\"===a.flow&&a.isRead)break;a.setIsRead(!0)}}},{key:\"updateUnreadCount\",value:function(e){var t=this.getLocalConversation(e),n=this._messageListHandler.getLocalMessageList(e);if(t){var o=t.unreadCount,r=n.filter((function(e){return!e.isRead&&!e.getOnlineOnlyFlag()&&!e.isDeleted})).length;o!==r&&(t.unreadCount=r,Ki.log(\"\".concat(this._className,\".updateUnreadCount from \").concat(o,\" to \").concat(r,\", conversationID:\").concat(e)),this._emitConversationUpdate(!0,!1))}}},{key:\"updateIsRead\",value:function(e){var t=this.getLocalConversation(e),n=this.getLocalMessageList(e);if(t&&0!==n.length&&!yu(t.type)){for(var o=[],r=0,a=n.length;r<a;r++)\"in\"!==n[r].flow?\"out\"!==n[r].flow||n[r].isRead||n[r].setIsRead(!0):o.push(n[r]);var s=0;if(t.type===ro.CONV_C2C){var i=o.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;s=o.length-t.unreadCount-i}else s=o.length-t.unreadCount;for(var u=0;u<s&&!o[u].isRead;u++)o[u].setIsRead(!0)}}},{key:\"deleteGroupAtTips\",value:function(e){var t=\"\".concat(this._className,\".deleteGroupAtTips\");Ki.log(\"\".concat(t));var n=this._conversationMap.get(e);if(!n)return Promise.resolve();var o=n.groupAtInfoList;if(0===o.length)return Promise.resolve();var r=this.getMyUserID();return this.request({protocolName:$l,requestData:{messageListToDelete:o.map((function(e){return{from:e.from,to:r,messageSeq:e.__sequence,messageRandom:e.__random,groupID:e.groupID}}))}}).then((function(){return Ki.log(\"\".concat(t,\" ok. count:\").concat(o.length)),n.clearGroupAtInfoList(),Promise.resolve()})).catch((function(e){return Ki.error(\"\".concat(t,\" failed. error:\"),e),Ym(e)}))}},{key:\"appendToMessageList\",value:function(e){this._messageListHandler.pushIn(e)}},{key:\"setMessageRandom\",value:function(e){this.singlyLinkedList.set(e.random)}},{key:\"deleteMessageRandom\",value:function(e){this.singlyLinkedList.delete(e.random)}},{key:\"pushIntoMessageList\",value:function(e,t,n){return!(!this._messageListHandler.pushIn(t,n)||this._isMessageFromCurrentInstance(t)&&!n)&&(e.push(t),!0)}},{key:\"_isMessageFromCurrentInstance\",value:function(e){return this.singlyLinkedList.has(e.random)}},{key:\"revoke\",value:function(e,t,n){return this._messageListHandler.revoke(e,t,n)}},{key:\"getPeerReadTime\",value:function(e){return this._peerReadTimeMap.get(e)}},{key:\"recordPeerReadTime\",value:function(e,t){this._peerReadTimeMap.has(e)?this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t):this._peerReadTimeMap.set(e,t)}},{key:\"updateMessageIsPeerReadProperty\",value:function(e,t){if(e.startsWith(ro.CONV_C2C)&&t>0){var n=this._messageListHandler.updateMessageIsPeerReadProperty(e,t);n.length>0&&this.emitOuterEvent(oo.MESSAGE_READ_BY_PEER,n)}}},{key:\"updateMessageIsReadProperty\",value:function(e){var t=this.getLocalConversation(e),n=this._messageListHandler.getLocalMessageList(e);if(t&&0!==n.length&&!yu(t.type)){for(var o=[],r=0;r<n.length;r++)\"in\"!==n[r].flow?\"out\"!==n[r].flow||n[r].isRead||n[r].setIsRead(!0):o.push(n[r]);var a=0;if(t.type===ro.CONV_C2C){var s=o.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;a=o.length-t.unreadCount-s}else a=o.length-t.unreadCount;for(var i=0;i<a&&!o[i].isRead;i++)o[i].setIsRead(!0)}}},{key:\"updateMessageIsModifiedProperty\",value:function(e){this._messageListHandler.updateMessageIsModifiedProperty(e)}},{key:\"setCompleted\",value:function(e){Ki.log(\"\".concat(this._className,\".setCompleted. conversationID:\").concat(e)),this._completedMap.set(e,!0)}},{key:\"updateRoamingMessageKey\",value:function(e,t){this._roamingMessageKeyMap.set(e,t)}},{key:\"getConversationList\",value:function(){var e=this,t=\"\".concat(this._className,\".getConversationList\");Ki.log(t),this._pagingStatus===Ac.REJECTED&&(Ki.log(\"\".concat(t,\". continue to sync conversationList\")),this._syncConversationList());var n=new lg(Ug);return this.request({protocolName:Hl,requestData:{fromAccount:this.getMyUserID()}}).then((function(o){var r=o.data.conversations,a=void 0===r?[]:r,s=e._getConversationOptions(a);return e._updateLocalConversationList(s,!0),e._setStorageConversationList(),e._handleC2CPeerReadTime(),n.setMessage(\"conversation count: \".concat(a.length)).setNetworkType(e.getNetworkType()).end(),Ki.log(\"\".concat(t,\" ok\")),jm({conversationList:e.getLocalConversationList()})})).catch((function(o){return e.probeNetwork().then((function(e){var t=m(e,2),r=t[0],a=t[1];n.setError(o,r,a).end()})),Ki.error(\"\".concat(t,\" failed. error:\"),o),Ym(o)}))}},{key:\"_handleC2CPeerReadTime\",value:function(){var e,t=S(this._conversationMap);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],r=n[1];r.type===ro.CONV_C2C&&(Ki.debug(\"\".concat(this._className,\"._handleC2CPeerReadTime conversationID:\").concat(o,\" peerReadTime:\").concat(r.peerReadTime)),this.recordPeerReadTime(o,r.peerReadTime))}}catch(a){t.e(a)}finally{t.f()}}},{key:\"getConversationProfile\",value:function(e){var t,n=this;if((t=this._conversationMap.has(e)?this._conversationMap.get(e):new Nv({conversationID:e,type:e.slice(0,3)===ro.CONV_C2C?ro.CONV_C2C:ro.CONV_GROUP}))._isInfoCompleted||t.type===ro.CONV_SYSTEM)return jm({conversation:t});var o=new lg(Fg),r=\"\".concat(this._className,\".getConversationProfile\");return Ki.log(\"\".concat(r,\". conversationID:\").concat(e,\" remark:\").concat(t.remark,\" lastMessage:\"),t.lastMessage),this._updateUserOrGroupProfileCompletely(t).then((function(a){o.setNetworkType(n.getNetworkType()).setMessage(\"conversationID:\".concat(e,\" unreadCount:\").concat(a.data.conversation.unreadCount)).end();var s=n.getModule(Wc);if(s&&t.type===ro.CONV_C2C){var i=e.replace(ro.CONV_C2C,\"\");if(s.isMyFriend(i)){var u=s.getFriendRemark(i);t.remark!==u&&(t.remark=u,Ki.log(\"\".concat(r,\". conversationID:\").concat(e,\" patch remark:\").concat(t.remark)))}}return Ki.log(\"\".concat(r,\" ok. conversationID:\").concat(e)),a})).catch((function(t){return n.probeNetwork().then((function(n){var r=m(n,2),a=r[0],s=r[1];o.setError(t,a,s).setMessage(\"conversationID:\".concat(e)).end()})),Ki.error(\"\".concat(r,\" failed. error:\"),t),Ym(t)}))}},{key:\"_updateUserOrGroupProfileCompletely\",value:function(e){var t=this;return e.type===ro.CONV_C2C?this.getModule(jc).getUserProfile({userIDList:[e.toAccount]}).then((function(n){var o=n.data;return 0===o.length?Ym(new Km({code:Pd.USER_OR_GROUP_NOT_FOUND,message:_p})):(e.userProfile=o[0],e._isInfoCompleted=!0,t._unshiftConversation(e),jm({conversation:e}))})):this.getModule($c).getGroupProfile({groupID:e.toAccount}).then((function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=!0,t._unshiftConversation(e),jm({conversation:e})}))}},{key:\"_unshiftConversation\",value:function(e){e instanceof Nv&&!this._conversationMap.has(e.conversationID)&&(this._conversationMap=new Map([[e.conversationID,e]].concat(v(this._conversationMap))),this._setStorageConversationList(),this._emitConversationUpdate(!0,!1))}},{key:\"deleteConversation\",value:function(e){var t=this,n={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0};if(!this._conversationMap.has(e)){var o=new Km({code:Pd.CONVERSATION_NOT_FOUND,message:fp});return Ym(o)}switch(this._conversationMap.get(e).type){case ro.CONV_C2C:n.type=1,n.toAccount=e.replace(ro.CONV_C2C,\"\");break;case ro.CONV_GROUP:n.type=2,n.toGroupID=e.replace(ro.CONV_GROUP,\"\");break;case ro.CONV_SYSTEM:return this.getModule($c).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),this.deleteLocalConversation(e),jm({conversationID:e});default:var r=new Km({code:Pd.CONVERSATION_UN_RECORDED_TYPE,message:mp});return Ym(r)}var a=new lg(qg);a.setMessage(\"conversationID:\".concat(e));var s=\"\".concat(this._className,\".deleteConversation\");return Ki.log(\"\".concat(s,\". conversationID:\").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.request({protocolName:jl,requestData:n})})).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(s,\" ok\")),t.deleteLocalConversation(e),jm({conversationID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.error(\"\".concat(s,\" failed. error:\"),e),Ym(e)}))}},{key:\"pinConversation\",value:function(e){var t=this,n=e.conversationID,o=e.isPinned;if(!this._conversationMap.has(n))return Ym({code:Pd.CONVERSATION_NOT_FOUND,message:fp});var r=this.getLocalConversation(n);if(r.isPinned===o)return jm({conversationID:n});var a=new lg(xg);a.setMessage(\"conversationID:\".concat(n,\" isPinned:\").concat(o));var s=\"\".concat(this._className,\".pinConversation\");Ki.log(\"\".concat(s,\". conversationID:\").concat(n,\" isPinned:\").concat(o));var i=null;return vu(n)?i={type:1,toAccount:n.replace(ro.CONV_C2C,\"\")}:Mu(n)&&(i={type:2,groupID:n.replace(ro.CONV_GROUP,\"\")}),this.request({protocolName:Yl,requestData:{fromAccount:this.getMyUserID(),operationType:!0===o?1:2,itemList:[i]}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(s,\" ok\")),r.isPinned!==o&&(r.isPinned=o,t._sortConversationListAndEmitEvent()),Pm({conversationID:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.error(\"\".concat(s,\" failed. error:\"),e),Ym(e)}))}},{key:\"deleteLocalConversation\",value:function(e){var t=this._conversationMap.has(e);Ki.log(\"\".concat(this._className,\".deleteLocalConversation conversationID:\").concat(e,\" has:\").concat(t)),t&&(this._conversationMap.delete(e),this._roamingMessageKeyMap.delete(e),this._setStorageConversationList(),this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),this._emitConversationUpdate(!0,!1))}},{key:\"isMessageSentByCurrentInstance\",value:function(e){return!(!this._messageListHandler.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}},{key:\"modifyMessageList\",value:function(e){if(e.startsWith(ro.CONV_C2C)){var t=Date.now();this._messageListHandler.modifyMessageSentByPeer(e);var n=this.getModule(jc).getNickAndAvatarByUserID(this.getMyUserID());this._messageListHandler.modifyMessageSentByMe({conversationID:e,latestNick:n.nick,latestAvatar:n.avatar}),Ki.log(\"\".concat(this._className,\".modifyMessageList conversationID:\").concat(e,\" cost \").concat(Date.now()-t,\" ms\"))}}},{key:\"updateUserProfileSpecifiedKey\",value:function(e){Ki.log(\"\".concat(this._className,\".updateUserProfileSpecifiedKey options:\"),e);var t=e.conversationID,n=e.nick,o=e.avatar;if(this._conversationMap.has(t)){var r=this._conversationMap.get(t).userProfile;Yi(n)&&r.nick!==n&&(r.nick=n),Yi(o)&&r.avatar!==o&&(r.avatar=o),this._emitConversationUpdate(!0,!1)}}},{key:\"onMyProfileModified\",value:function(e){var n=this,o=this.getLocalConversationList(),r=Date.now();o.forEach((function(o){n.modifyMessageSentByMe(t({conversationID:o.conversationID},e))})),Ki.log(\"\".concat(this._className,\".onMyProfileModified. modify all messages sent by me, cost \").concat(Date.now()-r,\" ms\"))}},{key:\"modifyMessageSentByMe\",value:function(e){this._messageListHandler.modifyMessageSentByMe(e)}},{key:\"getLatestMessageSentByMe\",value:function(e){return this._messageListHandler.getLatestMessageSentByMe(e)}},{key:\"modifyMessageSentByPeer\",value:function(e,t){this._messageListHandler.modifyMessageSentByPeer(e,t)}},{key:\"getLatestMessageSentByPeer\",value:function(e){return this._messageListHandler.getLatestMessageSentByPeer(e)}},{key:\"pushIntoNoticeResult\",value:function(e,t){return!(!this._messageListHandler.pushIn(t)||this.singlyLinkedList.has(t.random))&&(e.push(t),!0)}},{key:\"getGroupLocalLastMessageSequence\",value:function(e){return this._messageListHandler.getGroupLocalLastMessageSequence(e)}},{key:\"checkAndPatchRemark\",value:function(){if(0!==this._conversationMap.size){var e=this.getModule(Wc);if(e){var t=v(this._conversationMap.values()).filter((function(e){return e.type===ro.CONV_C2C}));if(0!==t.length){var n=!1,o=0;t.forEach((function(t){var r=t.conversationID.replace(ro.CONV_C2C,\"\");if(e.isMyFriend(r)){var a=e.getFriendRemark(r);t.remark!==a&&(t.remark=a,o+=1,n=!0)}})),Ki.log(\"\".concat(this._className,\".checkAndPatchRemark. c2c conversation count:\").concat(t.length,\", patched count:\").concat(o)),n&&this._emitConversationUpdate(!0,!1)}}}}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._pagingStatus=Ac.NOT_START,this._messageListHandler.reset(),this._roamingMessageKeyMap.clear(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._conversationMap.clear(),this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this.resetReady()}}]),r}(dl),Lv=function(){function e(t){o(this,e),this._groupModule=t,this._className=\"GroupTipsHandler\",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4}return a(e,[{key:\"onCheckTimer\",value:function(e){e%1==0&&this._cachedGroupTipsMap.size>0&&this._checkCachedGroupTips()}},{key:\"_checkCachedGroupTips\",value:function(){var e=this;this._cachedGroupTipsMap.forEach((function(t,n){var o=e._checkCountMap.get(n),r=e._groupModule.hasLocalGroup(n);Ki.log(\"\".concat(e._className,\"._checkCachedGroupTips groupID:\").concat(n,\" hasLocalGroup:\").concat(r,\" checkCount:\").concat(o)),r?(e._notifyCachedGroupTips(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupTips(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:\"onNewGroupTips\",value:function(e){Ki.debug(\"\".concat(this._className,\".onReceiveGroupTips count:\").concat(e.dataList.length));var t=this.newGroupTipsStoredAndSummary(e),n=t.eventDataList,o=t.result,r=t.AVChatRoomMessageList;(r.length>0&&this._groupModule.onAVChatRoomMessage(r),n.length>0)&&(this._groupModule.getModule(Jc).onNewMessage({conversationOptionsList:n,isInstantMessage:!0}),this._groupModule.updateNextMessageSeq(n));o.length>0&&(this._groupModule.emitOuterEvent(oo.MESSAGE_RECEIVED,o),this.handleMessageList(o))}},{key:\"newGroupTipsStoredAndSummary\",value:function(e){for(var n=e.event,o=e.dataList,r=null,a=[],s=[],i={},u=[],c=0,l=o.length;c<l;c++){var d=o[c],p=d.groupProfile.groupID,g=this._groupModule.hasLocalGroup(p);if(g||!this._groupModule.isUnjoinedAVChatRoom(p))if(g)if(this._groupModule.isMessageFromAVChatroom(p)){var h=hu(d);h.event=n,u.push(h)}else{d.currentUser=this._groupModule.getMyUserID(),d.conversationType=ro.CONV_GROUP,(r=new Gm(d)).setElement({type:ro.MSG_GRP_TIP,content:t(t({},d.elements),{},{groupProfile:d.groupProfile})}),r.isSystemMessage=!1;var f=this._groupModule.getModule(Jc),_=r.conversationID;if(6===n)r.setOnlineOnlyFlag(!0),s.push(r);else if(!f.pushIntoNoticeResult(s,r))continue;if(6!==n||!f.getLocalConversation(_)){if(6!==n)this._groupModule.getModule(ll).addMessageSequence({key:rg,message:r});if(Ji(i[_]))i[_]=a.push({conversationID:_,unreadCount:\"in\"===r.flow&&r.getOnlineOnlyFlag()?0:1,type:r.conversationType,subType:r.conversationSubType,lastMessage:r})-1;else{var m=i[_];a[m].type=r.conversationType,a[m].subType=r.conversationSubType,a[m].lastMessage=r,\"in\"!==r.flow||r.getOnlineOnlyFlag()||a[m].unreadCount++}}}else this._cacheGroupTipsAndProbe({groupID:p,event:n,item:d})}return{eventDataList:a,result:s,AVChatRoomMessageList:u}}},{key:\"handleMessageList\",value:function(e){var t=this;e.forEach((function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;default:Ki.warn(\"\".concat(t._className,\".handleMessageList unknown operationType:\").concat(e.payload.operationType))}}))}},{key:\"_onNewMemberComeIn\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&ji(n)&&(r.memberNum=n)}},{key:\"_onMemberQuit\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&ji(n)&&(r.memberNum=n),this._groupModule.deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:\"_onMemberKickedOut\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&ji(n)&&(r.memberNum=n),this._groupModule.deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:\"_onMemberSetAdmin\",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(zc);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(ro.GRP_MBR_ROLE_ADMIN)}))}},{key:\"_onMemberCancelledAdmin\",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(zc);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(ro.GRP_MBR_ROLE_MEMBER)}))}},{key:\"_onGroupProfileModified\",value:function(e){var t=this,n=e.payload,o=n.newGroupProfile,r=n.groupProfile.groupID,a=this._groupModule.getLocalGroupProfile(r);Object.keys(o).forEach((function(e){switch(e){case\"ownerID\":t._ownerChanged(a,o);break;default:a[e]=o[e]}})),this._groupModule.emitGroupListUpdate(!0,!0)}},{key:\"_ownerChanged\",value:function(e,t){var n=e.groupID,o=this._groupModule.getLocalGroupProfile(n),r=this.tim.context.identifier;if(r===t.ownerID){o.updateGroup({selfInfo:{role:ro.GRP_MBR_ROLE_OWNER}});var a=this._groupModule.getModule(zc),s=a.getLocalGroupMemberInfo(n,r),i=this._groupModule.getLocalGroupProfile(n).ownerID,u=a.getLocalGroupMemberInfo(n,i);s&&s.updateRole(ro.GRP_MBR_ROLE_OWNER),u&&u.updateRole(ro.GRP_MBR_ROLE_MEMBER)}}},{key:\"_onMemberInfoModified\",value:function(e){var t=e.payload.groupProfile.groupID,n=this._groupModule.getModule(zc);e.payload.memberList.forEach((function(e){var o=n.getLocalGroupMemberInfo(t,e.userID);o&&e.muteTime&&o.updateMuteUntil(e.muteTime)}))}},{key:\"_cacheGroupTips\",value:function(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}},{key:\"_deleteCachedGroupTips\",value:function(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}},{key:\"_notifyCachedGroupTips\",value:function(e){var t=this,n=this._cachedGroupTipsMap.get(e)||[];n.forEach((function(e){t.onNewGroupTips(e)})),this._deleteCachedGroupTips(e),Ki.log(\"\".concat(this._className,\"._notifyCachedGroupTips groupID:\").concat(e,\" count:\").concat(n.length))}},{key:\"_cacheGroupTipsAndProbe\",value:function(e){var t=this,n=e.groupID,o=e.event,r=e.item;this._cacheGroupTips(n,{event:o,dataList:[r]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===ro.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupTips(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupTips(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Ki.log(\"\".concat(this._className,\"._cacheGroupTipsAndProbe groupID:\").concat(n))}},{key:\"reset\",value:function(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear()}}]),e}(),Ov=Ho.UNSUPPORTED_Y,Rv=[].push,bv=Math.min;or(\"split\",(function(e,t,n){var o;return o=\"c\"==\"abbc\".split(/(b)*/)[1]||4!=\"test\".split(/(?:)/,-1).length||2!=\"ab\".split(/(?:ab)*/).length||4!=\".\".split(/(.?)(.?)/).length||\".\".split(/()()/).length>1||\"\".split(/.?/).length?function(e,n){var o=Mt(V(this)),r=void 0===n?4294967295:n>>>0;if(0===r)return[];if(void 0===e)return[o];if(!pr(e))return t.call(o,e,r);for(var a,s,i,u=[],c=(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.unicode?\"u\":\"\")+(e.sticky?\"y\":\"\"),l=0,d=new RegExp(e.source,c+\"g\");(a=er.call(d,o))&&!((s=d.lastIndex)>l&&(u.push(o.slice(l,a.index)),a.length>1&&a.index<o.length&&Rv.apply(u,a.slice(1)),i=a[0].length,l=s,u.length>=r));)d.lastIndex===a.index&&d.lastIndex++;return l===o.length?!i&&d.test(\"\")||u.push(\"\"):u.push(o.slice(l)),u.length>r?u.slice(0,r):u}:\"0\".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=V(this),a=null==t?void 0:t[e];return void 0!==a?a.call(t,r,n):o.call(Mt(r),t,n)},function(e,r){var a=De(this),s=Mt(e),i=n(o,a,s,r,o!==t);if(i.done)return i.value;var u=Ta(a,RegExp),c=a.unicode,l=(a.ignoreCase?\"i\":\"\")+(a.multiline?\"m\":\"\")+(a.unicode?\"u\":\"\")+(Ov?\"g\":\"y\"),d=new u(Ov?\"^(?:\"+a.source+\")\":a,l),p=void 0===r?4294967295:r>>>0;if(0===p)return[];if(0===s.length)return null===sr(d,s)?[s]:[];for(var g=0,h=0,f=[];h<s.length;){d.lastIndex=Ov?0:h;var _,m=sr(d,Ov?s.slice(h):s);if(null===m||(_=bv(ze(d.lastIndex+(Ov?h:0)),s.length))===g)h=ar(s,h,c);else{if(f.push(s.slice(g,h)),f.length===p)return f;for(var v=1;v<=m.length-1;v++)if(f.push(m[v]),f.length===p)return f;h=g=_}}return f.push(s.slice(g)),f}]}),!!O((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n=\"ab\".split(e);return 2!==n.length||\"a\"!==n[0]||\"b\"!==n[1]})),Ov);var wv=function(){function e(t){o(this,e),this._groupModule=t,this._className=\"CommonGroupHandler\",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,t.getInnerEmitterInstance().once(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initGroupList,this)}return a(e,[{key:\"onCheckTimer\",value:function(e){e%1==0&&this._cachedGroupMessageMap.size>0&&this._checkCachedGroupMessage()}},{key:\"_checkCachedGroupMessage\",value:function(){var e=this;this._cachedGroupMessageMap.forEach((function(t,n){var o=e._checkCountMap.get(n),r=e._groupModule.hasLocalGroup(n);Ki.log(\"\".concat(e._className,\"._checkCachedGroupMessage groupID:\").concat(n,\" hasLocalGroup:\").concat(r,\" checkCount:\").concat(o)),r?(e._notifyCachedGroupMessage(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupMessage(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:\"_initGroupList\",value:function(){var e=this;Ki.log(\"\".concat(this._className,\"._initGroupList\"));var t=new lg(th),n=this._groupModule.getStorageGroupList();if(zi(n)&&n.length>0){n.forEach((function(t){e._groupModule.initGroupMap(t)})),this._groupModule.emitGroupListUpdate(!0,!1);var o=this._groupModule.getLocalGroupList().length;t.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"group count:\".concat(o)).end()}else t.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"group count:0\").end();Ki.log(\"\".concat(this._className,\"._initGroupList ok\")),this.getGroupList()}},{key:\"handleUpdateGroupLastMessage\",value:function(e){var t=\"\".concat(this._className,\".handleUpdateGroupLastMessage\");if(Ki.debug(\"\".concat(t,\" conversation count:\").concat(e.length,\", local group count:\").concat(this._groupModule.getLocalGroupList().length)),0!==this._groupModule.getGroupMap().size){for(var n,o,r,a=!1,s=0,i=e.length;s<i;s++)(n=e[s]).type===ro.CONV_GROUP&&(o=n.conversationID.split(/^GROUP/)[1],(r=this._groupModule.getLocalGroupProfile(o))&&(r.lastMessage=n.lastMessage,a=!0));a&&(this._groupModule.sortLocalGroupList(),this._groupModule.emitGroupListUpdate(!0,!1))}else this.tempConversationList=e}},{key:\"onNewGroupMessage\",value:function(e){Ki.debug(\"\".concat(this._className,\".onNewGroupMessage count:\").concat(e.dataList.length));var t=this._newGroupMessageStoredAndSummary(e),n=t.conversationOptionsList,o=t.messageList,r=t.AVChatRoomMessageList;(r.length>0&&this._groupModule.onAVChatRoomMessage(r),this._groupModule.filterModifiedMessage(o),n.length>0)&&(this._groupModule.getModule(Jc).onNewMessage({conversationOptionsList:n,isInstantMessage:!0}),this._groupModule.updateNextMessageSeq(n));var a=this._groupModule.filterUnmodifiedMessage(o);a.length>0&&this._groupModule.emitOuterEvent(oo.MESSAGE_RECEIVED,a),o.length=0}},{key:\"_newGroupMessageStoredAndSummary\",value:function(e){var t=e.dataList,n=e.event,o=e.isInstantMessage,r=null,a=[],s=[],i=[],u={},c=ro.CONV_GROUP,l=this._groupModule.getModule(tl),d=t.length;d>1&&t.sort((function(e,t){return e.sequence-t.sequence}));for(var p=0;p<d;p++){var g=t[p],h=g.groupProfile.groupID,f=this._groupModule.hasLocalGroup(h);if(f||!this._groupModule.isUnjoinedAVChatRoom(h))if(f)if(this._groupModule.isMessageFromAVChatroom(h)){var _=hu(g);_.event=n,i.push(_)}else{g.currentUser=this._groupModule.getMyUserID(),g.conversationType=c,g.isSystemMessage=!!g.isSystemMessage,r=new Gm(g),g.elements=l.parseElements(g.elements,g.from),r.setElement(g.elements);var m=1===t[p].isModified,v=this._groupModule.getModule(Jc);v.isMessageSentByCurrentInstance(r)?r.isModified=m:m=!1;var M=this._groupModule.getModule(ll);if(o&&M.addMessageDelay({currentTime:Date.now(),time:r.time}),1===g.onlineOnlyFlag)r.setOnlineOnlyFlag(!0),s.push(r);else{if(!v.pushIntoMessageList(s,r,m))continue;M.addMessageSequence({key:rg,message:r});var y=r.conversationID;if(Ji(u[y]))u[y]=a.push({conversationID:y,unreadCount:\"out\"===r.flow?0:1,type:r.conversationType,subType:r.conversationSubType,lastMessage:r})-1;else{var I=u[y];a[I].type=r.conversationType,a[I].subType=r.conversationSubType,a[I].lastMessage=r,\"in\"===r.flow&&a[I].unreadCount++}}}else this._cacheGroupMessageAndProbe({groupID:h,event:n,item:g})}return{conversationOptionsList:a,messageList:s,AVChatRoomMessageList:i}}},{key:\"onGroupMessageRevoked\",value:function(e){Ki.debug(\"\".concat(this._className,\".onGroupMessageRevoked nums:\").concat(e.dataList.length));var t=this._groupModule.getModule(Jc),n=[],o=null;e.dataList.forEach((function(e){var r=e.elements.revokedInfos;Ji(r)||r.forEach((function(e){(o=t.revoke(\"GROUP\".concat(e.groupID),e.sequence,e.random))&&n.push(o)}))})),0!==n.length&&(t.onMessageRevoked(n),this._groupModule.emitOuterEvent(oo.MESSAGE_REVOKED,n))}},{key:\"_groupListTreeShaking\",value:function(e){for(var t=new Map(v(this._groupModule.getGroupMap())),n=0,o=e.length;n<o;n++)t.delete(e[n].groupID);this._groupModule.hasJoinedAVChatRoom()&&this._groupModule.getJoinedAVChatRoom().forEach((function(e){t.delete(e)}));for(var r=v(t.keys()),a=0,s=r.length;a<s;a++)this._groupModule.deleteGroup(r[a])}},{key:\"getGroupList\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupList\"),o=new lg(Zg);Ki.log(\"\".concat(n));var r={introduction:\"Introduction\",notification:\"Notification\",createTime:\"CreateTime\",ownerID:\"Owner_Account\",lastInfoTime:\"LastInfoTime\",memberNum:\"MemberNum\",maxMemberNum:\"MaxMemberNum\",joinOption:\"ApplyJoinOption\",muteAllMembers:\"ShutUpAllMember\"},a=[\"Type\",\"Name\",\"FaceUrl\",\"NextMsgSeq\",\"LastMsgTime\"],s=[];return e&&e.groupProfileFilter&&e.groupProfileFilter.forEach((function(e){r[e]&&a.push(r[e])})),this._pagingGetGroupList({limit:50,offset:0,groupBaseInfoFilter:a,groupList:s}).then((function(){Ki.log(\"\".concat(n,\" ok. count:\").concat(s.length)),t._groupListTreeShaking(s),t._groupModule.updateGroupMap(s);var e=t._groupModule.getLocalGroupList().length;return o.setNetworkType(t._groupModule.getNetworkType()).setMessage(\"remote count:\".concat(s.length,\", after tree shaking, local count:\").concat(e)).end(),t.tempConversationList&&(Ki.log(\"\".concat(n,\" update last message with tempConversationList, count:\").concat(t.tempConversationList.length)),t.handleUpdateGroupLastMessage({data:t.tempConversationList}),t.tempConversationList=null),t._groupModule.emitGroupListUpdate(),Pm({groupList:t._groupModule.getLocalGroupList()})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"_pagingGetGroupList\",value:function(e){var t=this,n=\"\".concat(this._className,\"._pagingGetGroupList\"),o=e.limit,r=e.offset,a=e.groupBaseInfoFilter,s=e.groupList,i=new lg(rh);return this._groupModule.request({protocolName:Wl,requestData:{memberAccount:this._groupModule.getMyUserID(),limit:o,offset:r,responseFilter:{groupBaseInfoFilter:a,selfInfoFilter:[\"Role\",\"JoinTime\",\"MsgFlag\"]}}}).then((function(e){var u=e.data,c=u.groups,l=u.totalCount;s.push.apply(s,v(c));var d=r+o,p=!(l>d);return i.setNetworkType(t._groupModule.getNetworkType()).setMessage(\"offset:\".concat(r,\" totalCount:\").concat(l,\" isCompleted:\").concat(p,\" currentCount:\").concat(s.length)).end(),p?(Ki.log(\"\".concat(n,\" ok. totalCount:\").concat(l)),Pm({groupList:s})):(r=d,t._pagingGetGroupList({limit:o,offset:r,groupBaseInfoFilter:a,groupList:s}))})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Ym(e)}))}},{key:\"_cacheGroupMessage\",value:function(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}},{key:\"_deleteCachedGroupMessage\",value:function(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}},{key:\"_notifyCachedGroupMessage\",value:function(e){var t=this,n=this._cachedGroupMessageMap.get(e)||[];n.forEach((function(e){t.onNewGroupMessage(e)})),this._deleteCachedGroupMessage(e),Ki.log(\"\".concat(this._className,\"._notifyCachedGroupMessage groupID:\").concat(e,\" count:\").concat(n.length))}},{key:\"_cacheGroupMessageAndProbe\",value:function(e){var t=this,n=e.groupID,o=e.event,r=e.item;this._cacheGroupMessage(n,{event:o,dataList:[r]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===ro.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupMessage(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupMessage(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Ki.log(\"\".concat(this._className,\"._cacheGroupMessageAndProbe groupID:\").concat(n))}},{key:\"reset\",value:function(){this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._groupModule.getInnerEmitterInstance().once(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initGroupList,this)}}]),e}(),Gv={1:\"init\",2:\"modify\",3:\"clear\",4:\"delete\"},Pv=function(){function e(t){o(this,e),this._groupModule=t,this._className=\"GroupAttributesHandler\",this._groupAttributesMap=new Map,this.CACHE_EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(gv.CLOUD_CONFIG_UPDATED,this._onCloudConfigUpdated,this)}return a(e,[{key:\"_onCloudConfigUpdated\",value:function(){var e=this._groupModule.getCloudConfig(\"grp_attr_cache_time\");Ji(e)||(this.CACHE_EXPIRE_TIME=Number(e))}},{key:\"updateLocalMainSequenceOnReconnected\",value:function(){this._groupAttributesMap.forEach((function(e){e.localMainSequence=0}))}},{key:\"onGroupAttributesUpdated\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributeOption,r=o.mainSequence,a=o.hasChangedAttributeInfo,s=o.groupAttributeList,i=void 0===s?[]:s,u=o.operationType;if(Ki.log(\"\".concat(this._className,\".onGroupAttributesUpdated. hasChangedAttributeInfo:\").concat(a,\" operationType:\").concat(u)),1===a){if(4===u){var c=[];i.forEach((function(e){c.push(e.key)})),i=v(c),c=null}return this._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:r,groupAttributeList:i,operationType:Gv[u]}),void this._emitGroupAttributesUpdated(n)}if(this._groupAttributesMap.has(n)){var l=this._groupAttributesMap.get(n).avChatRoomKey;this._getGroupAttributes({groupID:n,avChatRoomKey:l}).then((function(){t._emitGroupAttributesUpdated(n)}))}}},{key:\"initGroupAttributesCache\",value:function(e){var t=e.groupID,n=e.avChatRoomKey;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:n}),Ki.log(\"\".concat(this._className,\".initGroupAttributesCache groupID:\").concat(t,\" avChatRoomKey:\").concat(n))}},{key:\"initGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,r=this._checkCachedGroupAttributes({groupID:n,funcName:\"initGroupAttributes\"});if(!0!==r)return Ym(r);var a=this._groupAttributesMap.get(n),s=a.remoteMainSequence,i=a.avChatRoomKey,u=new lg(ih);return u.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(s,\" groupAttributes:\").concat(JSON.stringify(o))),this._groupModule.request({protocolName:fd,requestData:{groupID:n,avChatRoomKey:i,mainSequence:s,groupAttributeList:this._transformGroupAttributes(o)}}).then((function(e){var r=e.data,a=r.mainSequence,s=v(r.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:a,groupAttributeList:s,operationType:\"init\"}),u.setNetworkType(t._groupModule.getNetworkType()).end(),Ki.log(\"\".concat(t._className,\".initGroupAttributes ok. groupID:\").concat(n)),Pm({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Ym(e)}))}},{key:\"setGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,r=this._checkCachedGroupAttributes({groupID:n,funcName:\"setGroupAttributes\"});if(!0!==r)return Ym(r);var a=this._groupAttributesMap.get(n),s=a.remoteMainSequence,i=a.avChatRoomKey,u=a.attributes,c=this._transformGroupAttributes(o);c.forEach((function(e){var t=e.key;e.sequence=0,u.has(t)&&(e.sequence=u.get(t).sequence)}));var l=new lg(uh);return l.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(s,\" groupAttributes:\").concat(JSON.stringify(o))),this._groupModule.request({protocolName:_d,requestData:{groupID:n,avChatRoomKey:i,mainSequence:s,groupAttributeList:c}}).then((function(e){var r=e.data,a=r.mainSequence,s=v(r.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:a,groupAttributeList:s,operationType:\"modify\"}),l.setNetworkType(t._groupModule.getNetworkType()).end(),Ki.log(\"\".concat(t._className,\".setGroupAttributes ok. groupID:\").concat(n)),Pm({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),Ym(e)}))}},{key:\"deleteGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.keyList,r=void 0===o?[]:o,a=this._checkCachedGroupAttributes({groupID:n,funcName:\"deleteGroupAttributes\"});if(!0!==a)return Ym(a);var s=this._groupAttributesMap.get(n),i=s.remoteMainSequence,u=s.avChatRoomKey,c=s.attributes,l=v(c.keys()),d=vd,p=\"clear\",g={groupID:n,avChatRoomKey:u,mainSequence:i};if(r.length>0){var h=[];l=[],d=md,p=\"delete\",r.forEach((function(e){var t=0;c.has(e)&&(t=c.get(e).sequence,l.push(e)),h.push({key:e,sequence:t})})),g.groupAttributeList=h}var f=new lg(ch);return f.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(i,\" keyList:\").concat(r,\" protocolName:\").concat(d)),this._groupModule.request({protocolName:d,requestData:g}).then((function(e){var o=e.data.mainSequence;return t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:o,groupAttributeList:r,operationType:p}),f.setNetworkType(t._groupModule.getNetworkType()).end(),Ki.log(\"\".concat(t._className,\".deleteGroupAttributes ok. groupID:\").concat(n)),Pm({keyList:l})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];f.setError(e,o,r).end()})),Ym(e)}))}},{key:\"getGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=this._checkCachedGroupAttributes({groupID:n,funcName:\"getGroupAttributes\"});if(!0!==o)return Ym(o);var r=this._groupAttributesMap.get(n),a=r.avChatRoomKey,s=r.lastUpdateTime,i=r.localMainSequence,u=r.remoteMainSequence,c=new lg(lh);if(c.setMessage(\"groupID:\".concat(n,\" localMainSequence:\").concat(i,\" remoteMainSequence:\").concat(u,\" keyList:\").concat(e.keyList)),Date.now()-s>=this.CACHE_EXPIRE_TIME||i<u)return this._getGroupAttributes({groupID:n,avChatRoomKey:a}).then((function(o){c.setMoreMessage(\"get attributes from remote. count:\".concat(o.length)).setNetworkType(t._groupModule.getNetworkType()).end(),Ki.log(\"\".concat(t._className,\".getGroupAttributes from remote. groupID:\").concat(n));var r=t._getLocalGroupAttributes(e);return Pm({groupAttributes:r})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Ym(e)}));c.setMoreMessage(\"get attributes from cache\").setNetworkType(this._groupModule.getNetworkType()).end(),Ki.log(\"\".concat(this._className,\".getGroupAttributes from cache. groupID:\").concat(n));var l=this._getLocalGroupAttributes(e);return jm({groupAttributes:l})}},{key:\"_getGroupAttributes\",value:function(e){var n=this;return this._groupModule.request({protocolName:Md,requestData:t({},e)}).then((function(t){var o=t.data,r=o.mainSequence,a=o.groupAttributeList,s=v(a);return Ki.log(\"\".concat(n._className,\"._getGroupAttributes ok. groupID:\").concat(e.groupID)),n._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:r,groupAttributeList:s,operationType:\"get\"}),a})).catch((function(e){return Ym(e)}))}},{key:\"_getLocalGroupAttributes\",value:function(e){var t=e.groupID,n=e.keyList,o=void 0===n?[]:n,r={};if(!this._groupAttributesMap.has(t))return r;var a=this._groupAttributesMap.get(t).attributes;if(o.length>0)o.forEach((function(e){a.has(e)&&(r[e]=a.get(e).value)}));else{var s,i=S(a.keys());try{for(i.s();!(s=i.n()).done;){var u=s.value;r[u]=a.get(u).value}}catch(c){i.e(c)}finally{i.f()}}return r}},{key:\"_refreshCachedGroupAttributes\",value:function(e){var t=e.groupID,n=e.remoteMainSequence,o=e.groupAttributeList,r=e.operationType;if(this._groupAttributesMap.has(t)){var a=this._groupAttributesMap.get(t),s=a.localMainSequence;if(\"get\"===r||n-s==1)a.remoteMainSequence=n,a.localMainSequence=n,a.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:a,groupAttributeList:o,operationType:r});else{if(s===n)return;a.remoteMainSequence=n}this._groupAttributesMap.set(t,a);var i=\"operationType:\".concat(r,\" localMainSequence:\").concat(s,\" remoteMainSequence:\").concat(n);Ki.log(\"\".concat(this._className,\"._refreshCachedGroupAttributes. \").concat(i))}}},{key:\"_updateCachedAttributes\",value:function(e){var t=e.groupAttributes,n=e.groupAttributeList,o=e.operationType;\"clear\"!==o?\"delete\"!==o?(\"init\"===o&&t.attributes.clear(),n.forEach((function(e){var n=e.key,o=e.value,r=e.sequence;t.attributes.set(n,{value:o,sequence:r})}))):n.forEach((function(e){t.attributes.delete(e)})):t.attributes.clear()}},{key:\"_checkCachedGroupAttributes\",value:function(e){var t=e.groupID,n=e.funcName;if(this._groupModule.hasLocalGroup(t)&&this._groupModule.getLocalGroupProfile(t).type!==ro.GRP_AVCHATROOM){return Ki.warn(\"\".concat(this._className,\"._checkCachedGroupAttributes. \").concat(\"非直播群不能使用群属性 API\")),new Km({code:Pd.CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM,message:\"非直播群不能使用群属性 API\"})}var o=this._groupAttributesMap.get(t);if(Ji(o)){var r=\"如果 groupID:\".concat(t,\" 是直播群，使用 \").concat(n,\" 前先使用 joinGroup 接口申请加入群组，详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup\");return Ki.warn(\"\".concat(this._className,\"._checkCachedGroupAttributes. \").concat(r)),new Km({code:Pd.CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN,message:r})}return!0}},{key:\"_transformGroupAttributes\",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:\"_emitGroupAttributesUpdated\",value:function(e){var t=this._getLocalGroupAttributes({groupID:e});this._groupModule.emitOuterEvent(oo.GROUP_ATTRIBUTES_UPDATED,{groupID:e,groupAttributes:t})}},{key:\"reset\",value:function(){this._groupAttributesMap.clear(),this.CACHE_EXPIRE_TIME=3e4}}]),e}(),Uv=function(){function e(t){o(this,e);var n=t.groupModule,r=t.groupID,a=t.onInit,s=t.onSuccess,i=t.onFail;this._groupModule=n,this._className=\"Polling\",this._onInit=a,this._onSuccess=s,this._onFail=i,this._groupID=r,this._timeoutID=-1,this._isRunning=!1,this._pollingInterval=0,this.MAX_POLLING_INTERVAL=2e3}return a(e,[{key:\"start\",value:function(){Ki.log(\"\".concat(this._className,\".start\")),this._isRunning=!0,this._request()}},{key:\"isRunning\",value:function(){return this._isRunning}},{key:\"_request\",value:function(){var e=this,t=this._onInit(this._groupID),n=dd;this._groupModule.isLoggedIn()||(n=pd),this._groupModule.request({protocolName:n,requestData:t}).then((function(t){e._onSuccess(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),0))})).catch((function(t){e._onFail(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e.MAX_POLLING_INTERVAL))}))}},{key:\"stop\",value:function(){Ki.log(\"\".concat(this._className,\".stop\")),this._timeoutID>0&&(clearTimeout(this._timeoutID),this._timeoutID=-1,this._pollingInterval=0),this._isRunning=!1}}]),e}(),Fv={3:!0,4:!0,5:!0,6:!0},qv=function(){function e(t){o(this,e),this._groupModule=t,this._className=\"AVChatRoomHandler\",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this.sequencesLinkedList=new Dv(100),this.messageIDLinkedList=new Dv(100),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60}return a(e,[{key:\"hasJoinedAVChatRoom\",value:function(){return this._joinedGroupMap.size>0}},{key:\"checkJoinedAVChatRoomByID\",value:function(e){return this._joinedGroupMap.has(e)}},{key:\"getJoinedAVChatRoom\",value:function(){return this._joinedGroupMap.size>0?v(this._joinedGroupMap.keys()):null}},{key:\"_updateRequestData\",value:function(e){return t({},this._pollingRequestInfoMap.get(e))}},{key:\"_handleSuccess\",value:function(e,t){var n=t.data,o=n.key,r=n.nextSeq,a=n.rspMsgList;if(0!==n.errorCode){var s=this._pollingRequestInfoMap.get(e),i=new lg(yh),u=s?\"\".concat(s.key,\"-\").concat(s.startSeq):\"requestInfo is undefined\";i.setMessage(\"\".concat(e,\"-\").concat(u,\"-\").concat(t.errorInfo)).setCode(t.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(!0)}else{if(!this.checkJoinedAVChatRoomByID(e))return;Yi(o)&&ji(r)&&this._pollingRequestInfoMap.set(e,{key:o,startSeq:r}),zi(a)&&a.length>0&&(a.forEach((function(e){e.to=e.groupID})),this.onMessage(a))}}},{key:\"_handleFailure\",value:function(e,t){}},{key:\"onMessage\",value:function(e){if(zi(e)&&0!==e.length){var t=null,n=[],o=this._getModule(Jc),r=e.length;r>1&&e.sort((function(e,t){return e.sequence-t.sequence}));for(var a=this._getModule(Xc),s=0;s<r;s++)if(Fv[e[s].event]){this.receivedMessageCount+=1,t=this.packMessage(e[s],e[s].event);var i=1===e[s].isModified;if((a.isUnlimitedAVChatRoom()||!this.sequencesLinkedList.has(t.sequence))&&!this.messageIDLinkedList.has(t.ID)){var u=t.conversationID;if(this.receivedMessageCount%40==0&&this._getModule(il).detectMessageLoss(u,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){var c=this.sequencesLinkedList.tail().value,l=t.sequence-c;l>1&&l<=20?this._getModule(il).onMessageMaybeLost(u,c+1,l-1):l<-1&&l>=-20&&this._getModule(il).onMessageMaybeLost(u,t.sequence+1,Math.abs(l)-1)}this.sequencesLinkedList.set(t.sequence),this.messageIDLinkedList.set(t.ID);var d=!1;if(this._isMessageSentByCurrentInstance(t)?i&&(d=!0,t.isModified=i,o.updateMessageIsModifiedProperty(t)):d=!0,d){if(t.conversationType,ro.CONV_SYSTEM,t.conversationType!==ro.CONV_SYSTEM){var p=this._getModule(ll),g=t.conversationID.replace(ro.CONV_GROUP,\"\");this._pollingInstanceMap.has(g)?p.addMessageSequence({key:sg,message:t}):(t.type!==ro.MSG_GRP_TIP&&p.addMessageDelay({currentTime:Date.now(),time:t.time}),p.addMessageSequence({key:ag,message:t}))}n.push(t)}}}else Ki.warn(\"\".concat(this._className,\".onMessage 未处理的 event 类型: \").concat(e[s].event));if(0!==n.length){this._groupModule.filterModifiedMessage(n);var h=this.packConversationOption(n);if(h.length>0)this._getModule(Jc).onNewMessage({conversationOptionsList:h,isInstantMessage:!0});Ki.debug(\"\".concat(this._className,\".onMessage count:\").concat(n.length)),this._checkMessageStacked(n);var f=this._groupModule.filterUnmodifiedMessage(n);f.length>0&&this._groupModule.emitOuterEvent(oo.MESSAGE_RECEIVED,f),n.length=0}}}},{key:\"_checkMessageStacked\",value:function(e){var t=e.length;t>=100&&(Ki.warn(\"\".concat(this._className,\"._checkMessageStacked 直播群消息堆积数:\").concat(e.length,\\'！可能会导致微信小程序渲染时遇到 \"Dom limit exceeded\" 的错误，建议接入侧此时只渲染最近的10条消息\\')),this._reportMessageStackedCount<5&&(new lg(Th).setNetworkType(this._groupModule.getNetworkType()).setMessage(\"count:\".concat(t,\" groupID:\").concat(v(this._joinedGroupMap.keys()))).setLevel(\"warning\").end(),this._reportMessageStackedCount+=1))}},{key:\"_isMessageSentByCurrentInstance\",value:function(e){return!!this._getModule(Jc).isMessageSentByCurrentInstance(e)}},{key:\"packMessage\",value:function(e,t){e.currentUser=this._groupModule.getMyUserID(),e.conversationType=5===t?ro.CONV_SYSTEM:ro.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var n=new Gm(e),o=this.packElements(e,t);return n.setElement(o),n}},{key:\"packElements\",value:function(e,n){return 4===n||6===n?(this._updateMemberCountByGroupTips(e),this._onGroupAttributesUpdated(e),{type:ro.MSG_GRP_TIP,content:t(t({},e.elements),{},{groupProfile:e.groupProfile})}):5===n?{type:ro.MSG_GRP_SYS_NOTICE,content:t(t({},e.elements),{},{groupProfile:e.groupProfile})}:this._getModule(tl).parseElements(e.elements,e.from)}},{key:\"packConversationOption\",value:function(e){for(var t=new Map,n=0;n<e.length;n++){var o=e[n],r=o.conversationID;if(t.has(r)){var a=t.get(r);a.lastMessage=o,\"in\"===o.flow&&a.unreadCount++}else t.set(r,{conversationID:o.conversationID,unreadCount:\"out\"===o.flow?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})}return v(t.values())}},{key:\"_updateMemberCountByGroupTips\",value:function(e){var t=e.groupProfile.groupID,n=e.elements.onlineMemberInfo,o=void 0===n?void 0:n;if(!Ou(o)){var r=o.onlineMemberNum,a=void 0===r?0:r,s=o.expireTime,i=void 0===s?this.DEFAULT_EXPIRE_TIME:s,u=this._onlineMemberCountMap.get(t)||{},c=Date.now();Ou(u)?Object.assign(u,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:c,memberCount:a,expireTime:i}):(u.latestUpdateTime=c,u.memberCount=a),Ki.debug(\"\".concat(this._className,\"._updateMemberCountByGroupTips info:\"),u),this._onlineMemberCountMap.set(t,u)}}},{key:\"start\",value:function(e){if(this._pollingInstanceMap.has(e)){var t=this._pollingInstanceMap.get(e);t.isRunning()||t.start()}else{var n=new Uv({groupModule:this._groupModule,groupID:e,onInit:this._updateRequestData.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)});n.start(),this._pollingInstanceMap.set(e,n),Ki.log(\"\".concat(this._className,\".start groupID:\").concat(e))}}},{key:\"handleJoinResult\",value:function(e){var t=this;return this._preCheck().then((function(){var n=e.longPollingKey,o=e.group,r=o.groupID;return t._joinedGroupMap.set(r,o),t._groupModule.updateGroupMap([o]),t._groupModule.deleteUnjoinedAVChatRoom(r),t._groupModule.emitGroupListUpdate(!0,!1),Ji(n)?jm({status:hm,group:o}):Promise.resolve()}))}},{key:\"startRunLoop\",value:function(e){var t=this;return this.handleJoinResult(e).then((function(){var n=e.longPollingKey,o=e.group,r=o.groupID;return t._pollingRequestInfoMap.set(r,{key:n,startSeq:0}),t.start(r),t._groupModule.isLoggedIn()?jm({status:hm,group:o}):jm({status:hm})}))}},{key:\"_preCheck\",value:function(){if(this._getModule(Xc).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();var e=m(this._joinedGroupMap.entries().next().value,2),t=e[0],n=e[1];if(this._groupModule.isLoggedIn()){if(!(n.selfInfo.role===ro.GRP_MBR_ROLE_OWNER||n.ownerID===this._groupModule.getMyUserID()))return this._groupModule.quitGroup(t);this._groupModule.deleteLocalGroupAndConversation(t)}else this._groupModule.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:\"joinWithoutAuth\",value:function(e){var t=this,n=e.groupID,o=\"\".concat(this._className,\".joinWithoutAuth\"),r=new lg(sh);return this._groupModule.request({protocolName:ed,requestData:e}).then((function(e){var a=e.data.longPollingKey;if(r.setNetworkType(t._groupModule.getNetworkType()).setMessage(\"groupID:\".concat(n,\" longPollingKey:\").concat(a)).end(!0),Ji(a))return Ym(new Km({code:Pd.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN,message:Ap}));Ki.log(\"\".concat(o,\" ok. groupID:\").concat(n)),t._getModule(Jc).setCompleted(\"\".concat(ro.CONV_GROUP).concat(n));var s=new Ev({groupID:n});return t.startRunLoop({group:s,longPollingKey:a}),Pm({status:hm})})).catch((function(e){return Ki.error(\"\".concat(o,\" failed. groupID:\").concat(n,\" error:\"),e),t._groupModule.probeNetwork().then((function(t){var o=m(t,2),a=o[0],s=o[1];r.setError(e,a,s).setMessage(\"groupID:\".concat(n)).end(!0)})),Ym(e)})).finally((function(){t._groupModule.getModule(Zc).reportAtOnce()}))}},{key:\"getGroupOnlineMemberCount\",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},n=Date.now();return Ou(t)||n-t.lastSyncTime>1e3*t.expireTime&&n-t.latestUpdateTime>1e4&&n-t.lastReqTime>3e3?(t.lastReqTime=n,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then((function(e){return Pm({memberCount:e.memberCount})})).catch((function(e){return Ym(e)}))):jm({memberCount:t.memberCount})}},{key:\"_getGroupOnlineMemberCount\",value:function(e){var t=this,n=\"\".concat(this._className,\"._getGroupOnlineMemberCount\");return this._groupModule.request({protocolName:gd,requestData:{groupID:e}}).then((function(o){var r=t._onlineMemberCountMap.get(e)||{},a=o.data,s=a.onlineMemberNum,i=void 0===s?0:s,u=a.expireTime,c=void 0===u?t.DEFAULT_EXPIRE_TIME:u;Ki.log(\"\".concat(n,\" ok. groupID:\").concat(e,\" memberCount:\").concat(i,\" expireTime:\").concat(c));var l=Date.now();return Ou(r)&&(r.lastReqTime=l),t._onlineMemberCountMap.set(e,Object.assign(r,{lastSyncTime:l,latestUpdateTime:l,memberCount:i,expireTime:c})),{memberCount:i}})).catch((function(o){return Ki.warn(\"\".concat(n,\" failed. error:\"),o),new lg(Mh).setCode(o.code).setMessage(\"groupID:\".concat(e,\" error:\").concat(JSON.stringify(o))).setNetworkType(t._groupModule.getNetworkType()).end(),Promise.reject(o)}))}},{key:\"_onGroupAttributesUpdated\",value:function(e){var t=e.groupProfile.groupID,n=e.elements,o=n.operationType,r=n.newGroupProfile;if(6===o){var a=(void 0===r?void 0:r).groupAttributeOption;Ji(a)||this._groupModule.onGroupAttributesUpdated({groupID:t,groupAttributeOption:a})}}},{key:\"_getModule\",value:function(e){return this._groupModule.getModule(e)}},{key:\"reset\",value:function(e){if(e){Ki.log(\"\".concat(this._className,\".reset groupID:\").concat(e));var t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{Ki.log(\"\".concat(this._className,\".reset all\"));var n,o=S(this._pollingInstanceMap.values());try{for(o.s();!(n=o.n()).done;){n.value.stop()}}catch(r){o.e(r)}finally{o.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear()}this.sequencesLinkedList.reset(),this.messageIDLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0}}]),e}(),xv=1,Vv=15,Kv=function(){function e(t){o(this,e),this._groupModule=t,this._className=\"GroupSystemNoticeHandler\",this.pendencyMap=new Map}return a(e,[{key:\"onNewGroupSystemNotice\",value:function(e){var t=e.dataList,n=e.isSyncingEnded,o=e.isInstantMessage;Ki.debug(\"\".concat(this._className,\".onReceiveSystemNotice count:\").concat(t.length));var r=this.newSystemNoticeStoredAndSummary({notifiesList:t,isInstantMessage:o}),a=r.eventDataList,s=r.result;a.length>0&&(this._groupModule.getModule(Jc).onNewMessage({conversationOptionsList:a,isInstantMessage:o}),this._onReceivedGroupSystemNotice({result:s,isInstantMessage:o}));o?s.length>0&&this._groupModule.emitOuterEvent(oo.MESSAGE_RECEIVED,s):!0===n&&this._clearGroupSystemNotice()}},{key:\"newSystemNoticeStoredAndSummary\",value:function(e){var n=e.notifiesList,o=e.isInstantMessage,r=null,a=n.length,s=0,i=[],u={conversationID:ro.CONV_SYSTEM,unreadCount:0,type:ro.CONV_SYSTEM,subType:null,lastMessage:null};for(s=0;s<a;s++){var c=n[s];if(c.elements.operationType!==Vv)c.currentUser=this._groupModule.getMyUserID(),c.conversationType=ro.CONV_SYSTEM,c.conversationID=ro.CONV_SYSTEM,(r=new Gm(c)).setElement({type:ro.MSG_GRP_SYS_NOTICE,content:t(t({},c.elements),{},{groupProfile:c.groupProfile})}),r.isSystemMessage=!0,(1===r.sequence&&1===r.random||2===r.sequence&&2===r.random)&&(r.sequence=iu(),r.random=iu(),r.generateMessageID(c.currentUser),Ki.log(\"\".concat(this._className,\".newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:\").concat(r.ID))),this._groupModule.getModule(Jc).pushIntoNoticeResult(i,r)&&(o?u.unreadCount++:r.setIsRead(!0),u.subType=r.conversationSubType)}return u.lastMessage=i[i.length-1],{eventDataList:i.length>0?[u]:[],result:i}}},{key:\"_clearGroupSystemNotice\",value:function(){var e=this;this.getPendencyList().then((function(t){t.forEach((function(t){e.pendencyMap.set(\"\".concat(t.from,\"_\").concat(t.groupID,\"_\").concat(t.to),t)}));var n=e._groupModule.getModule(Jc).getLocalMessageList(ro.CONV_SYSTEM),o=[];n.forEach((function(t){var n=t.payload,r=n.operatorID,a=n.operationType,s=n.groupProfile;if(a===xv){var i=\"\".concat(r,\"_\").concat(s.groupID,\"_\").concat(s.to),u=e.pendencyMap.get(i);u&&ji(u.handled)&&0!==u.handled&&o.push(t)}})),e.deleteGroupSystemNotice({messageList:o})}))}},{key:\"deleteGroupSystemNotice\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteGroupSystemNotice\");return zi(e.messageList)&&0!==e.messageList.length?(Ki.log(\"\".concat(n)+e.messageList.map((function(e){return e.ID}))),this._groupModule.request({protocolName:ld,requestData:{messageListToDelete:e.messageList.map((function(e){return{from:ro.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}}))}}).then((function(){Ki.log(\"\".concat(n,\" ok\"));var o=t._groupModule.getModule(Jc);return e.messageList.forEach((function(e){o.deleteLocalMessage(e)})),Pm()})).catch((function(e){return Ki.error(\"\".concat(n,\" error:\"),e),Ym(e)}))):jm()}},{key:\"getPendencyList\",value:function(e){var t=this;return this._groupModule.request({protocolName:cd,requestData:{startTime:e&&e.startTime?e.startTime:0,limit:e&&e.limit?e.limit:10,handleAccount:this._groupModule.getMyUserID()}}).then((function(e){var n=e.data.pendencyList;return 0!==e.data.nextStartTime?t.getPendencyList({startTime:e.data.nextStartTime}).then((function(e){return[].concat(v(n),v(e))})):n}))}},{key:\"_onReceivedGroupSystemNotice\",value:function(e){var t=this,n=e.result;e.isInstantMessage&&n.forEach((function(e){switch(e.payload.operationType){case 1:break;case 2:t._onApplyGroupRequestAgreed(e);break;case 3:break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 6:break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e)}}))}},{key:\"_onApplyGroupRequestAgreed\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:\"_onMemberKicked\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:\"_onGroupDismissed\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t);var n=this._groupModule._AVChatRoomHandler;n&&n.checkJoinedAVChatRoomByID(t)&&n.reset(t)}},{key:\"_onInviteGroup\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:\"_onQuitGroup\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:\"_onSetManager\",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,r=this._groupModule.getModule(zc).getLocalGroupMemberInfo(o,n);r&&r.updateRole(ro.GRP_MBR_ROLE_ADMIN)}},{key:\"_onDeleteManager\",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,r=this._groupModule.getModule(zc).getLocalGroupMemberInfo(o,n);r&&r.updateRole(ro.GRP_MBR_ROLE_MEMBER)}},{key:\"reset\",value:function(){this.pendencyMap.clear()}}]),e}(),Bv=function(e){i(r,e);var n=_(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._className=\"GroupModule\",t._commonGroupHandler=null,t._AVChatRoomHandler=null,t._groupSystemNoticeHandler=null,t._commonGroupHandler=new wv(h(t)),t._groupAttributesHandler=new Pv(h(t)),t._AVChatRoomHandler=new qv(h(t)),t._groupTipsHandler=new Lv(h(t)),t._groupSystemNoticeHandler=new Kv(h(t)),t.groupMap=new Map,t._unjoinedAVChatRoomList=new Map,t}return a(r,[{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}},{key:\"guardForAVChatRoom\",value:function(e){var t=this;if(e.conversationType===ro.CONV_GROUP){var n=e.to;return this.hasLocalGroup(n)?jm():this.getGroupProfile({groupID:n}).then((function(o){var r=o.data.group.type;if(Ki.log(\"\".concat(t._className,\".guardForAVChatRoom. groupID:\").concat(n,\" type:\").concat(r)),r===ro.GRP_AVCHATROOM){var a=\"userId:\".concat(e.from,\" 未加入群 groupID:\").concat(n,\"。发消息前先使用 joinGroup 接口申请加群，详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup\");return Ki.warn(\"\".concat(t._className,\".guardForAVChatRoom sendMessage not allowed. \").concat(a)),Ym(new Km({code:Pd.MESSAGE_SEND_FAIL,message:a,data:{message:e}}))}return jm()}))}return jm()}},{key:\"checkJoinedAVChatRoomByID\",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:\"onNewGroupMessage\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onNewGroupMessage(e)}},{key:\"updateNextMessageSeq\",value:function(e){var t=this;zi(e)&&e.forEach((function(e){var n=e.conversationID.replace(ro.CONV_GROUP,\"\");t.groupMap.has(n)&&(t.groupMap.get(n).nextMessageSeq=e.lastMessage.sequence+1)}))}},{key:\"onNewGroupTips\",value:function(e){this._groupTipsHandler&&this._groupTipsHandler.onNewGroupTips(e)}},{key:\"onGroupMessageRevoked\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onGroupMessageRevoked(e)}},{key:\"onNewGroupSystemNotice\",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}},{key:\"onGroupMessageReadNotice\",value:function(e){var t=this;e.dataList.forEach((function(e){var n=e.elements.groupMessageReadNotice;if(!Ji(n)){var o=t.getModule(Jc);n.forEach((function(e){var n=e.groupID,r=e.lastMessageSeq;Ki.debug(\"\".concat(t._className,\".onGroupMessageReadNotice groupID:\").concat(n,\" lastMessageSeq:\").concat(r));var a=\"\".concat(ro.CONV_GROUP).concat(n);o.updateIsReadAfterReadReport({conversationID:a,lastMessageSeq:r}),o.updateUnreadCount(a)}))}}))}},{key:\"deleteGroupSystemNotice\",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}},{key:\"initGroupMap\",value:function(e){this.groupMap.set(e.groupID,new Ev(e))}},{key:\"deleteGroup\",value:function(e){this.groupMap.delete(e)}},{key:\"updateGroupMap\",value:function(e){var t=this;e.forEach((function(e){t.groupMap.has(e.groupID)?t.groupMap.get(e.groupID).updateGroup(e):t.groupMap.set(e.groupID,new Ev(e))})),this._setStorageGroupList()}},{key:\"getStorageGroupList\",value:function(){return this.getModule(Qc).getItem(\"groupMap\")}},{key:\"_setStorageGroupList\",value:function(){var e=this.getLocalGroupList().filter((function(e){var t=e.type;return!mu(t)})).slice(0,20).map((function(e){return{groupID:e.groupID,name:e.name,avatar:e.avatar,type:e.type}}));this.getModule(Qc).setItem(\"groupMap\",e)}},{key:\"getGroupMap\",value:function(){return this.groupMap}},{key:\"getLocalGroupList\",value:function(){return v(this.groupMap.values())}},{key:\"getLocalGroupProfile\",value:function(e){return this.groupMap.get(e)}},{key:\"sortLocalGroupList\",value:function(){var e=v(this.groupMap).filter((function(e){var t=m(e,2);t[0];return!Ou(t[1].lastMessage)}));e.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})),this.groupMap=new Map(v(e))}},{key:\"updateGroupLastMessage\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.handleUpdateGroupLastMessage(e)}},{key:\"emitGroupListUpdate\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalGroupList();if(e&&this.emitOuterEvent(oo.GROUP_LIST_UPDATED,n),t){var o=JSON.parse(JSON.stringify(n)),r=this.getModule(Jc);r.updateConversationGroupProfile(o)}}},{key:\"getMyNameCardByGroupID\",value:function(e){var t=this.getLocalGroupProfile(e);return t?t.selfInfo.nameCard:\"\"}},{key:\"getGroupList\",value:function(e){return this._commonGroupHandler?this._commonGroupHandler.getGroupList(e):jm()}},{key:\"getGroupProfile\",value:function(e){var t=this,n=new lg(eh),o=\"\".concat(this._className,\".getGroupProfile\"),r=e.groupID,a=e.groupCustomFieldFilter;Ki.log(\"\".concat(o,\" groupID:\").concat(r));var s={groupIDList:[r],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\",\"ShutUpAllMember\"],groupCustomFieldFilter:a}};return this.getGroupProfileAdvance(s).then((function(e){var a,s=e.data,i=s.successGroupList,u=s.failureGroupList;return Ki.log(\"\".concat(o,\" ok\")),u.length>0?Ym(u[0]):(mu(i[0].type)&&!t.hasLocalGroup(r)?a=new Ev(i[0]):(t.updateGroupMap(i),a=t.getLocalGroupProfile(r)),n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(r,\" type:\").concat(a.type,\" muteAllMembers:\").concat(a.muteAllMembers,\" ownerID:\").concat(a.ownerID)).end(),a&&a.selfInfo&&!a.selfInfo.nameCard?t.updateSelfInfo(a).then((function(e){return Pm({group:e})})):Pm({group:a}))})).catch((function(r){return t.probeNetwork().then((function(t){var o=m(t,2),a=o[0],s=o[1];n.setError(r,a,s).setMessage(\"groupID:\".concat(e.groupID)).end()})),Ki.error(\"\".concat(o,\" failed. error:\"),r),Ym(r)}))}},{key:\"getGroupProfileAdvance\",value:function(e){var t=\"\".concat(this._className,\".getGroupProfileAdvance\");return zi(e.groupIDList)&&e.groupIDList.length>50&&(Ki.warn(\"\".concat(t,\" 获取群资料的数量不能超过50个\")),e.groupIDList.length=50),Ki.log(\"\".concat(t,\" groupIDList:\").concat(e.groupIDList)),this.request({protocolName:zl,requestData:e}).then((function(e){Ki.log(\"\".concat(t,\" ok\"));var n=e.data.groups,o=n.filter((function(e){return Ji(e.errorCode)||0===e.errorCode})),r=n.filter((function(e){return e.errorCode&&0!==e.errorCode})).map((function(e){return new Km({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})}));return Pm({successGroupList:o,failureGroupList:r})})).catch((function(e){return Ki.error(\"\".concat(t,\" failed. error:\"),e),Ym(e)}))}},{key:\"updateSelfInfo\",value:function(e){var t=\"\".concat(this._className,\".updateSelfInfo\"),n=e.groupID;return Ki.log(\"\".concat(t,\" groupID:\").concat(n)),this.getModule(zc).getGroupMemberProfile({groupID:n,userIDList:[this.getMyUserID()]}).then((function(n){var o=n.data.memberList;return Ki.log(\"\".concat(t,\" ok\")),e&&0!==o.length&&e.updateSelfInfo(o[0]),e}))}},{key:\"createGroup\",value:function(e){var n=this,o=\"\".concat(this._className,\".createGroup\");if(![\"Public\",\"Private\",\"ChatRoom\",\"AVChatRoom\"].includes(e.type)){var r=new Km({code:Pd.ILLEGAL_GROUP_TYPE,message:vp});return Ym(r)}mu(e.type)&&!Ji(e.memberList)&&e.memberList.length>0&&(Ki.warn(\"\".concat(o,\" 创建 AVChatRoom 时不能添加群成员，自动忽略该字段\")),e.memberList=void 0),_u(e.type)||Ji(e.joinOption)||(Ki.warn(\"\".concat(o,\" 创建 Work/Meeting/AVChatRoom 群时不能设置字段 joinOption，自动忽略该字段\")),e.joinOption=void 0);var a=new lg(Bg);Ki.log(\"\".concat(o,\" options:\"),e);var s=[];return this.request({protocolName:Jl,requestData:t(t({},e),{},{ownerID:this.getMyUserID(),webPushFlag:1})}).then((function(r){var i=r.data,u=i.groupID,c=i.overLimitUserIDList,l=void 0===c?[]:c;if(s=l,a.setNetworkType(n.getNetworkType()).setMessage(\"groupType:\".concat(e.type,\" groupID:\").concat(u,\" overLimitUserIDList=\").concat(l)).end(),Ki.log(\"\".concat(o,\" ok groupID:\").concat(u,\" overLimitUserIDList:\"),l),e.type===ro.GRP_AVCHATROOM)return n.getGroupProfile({groupID:u});Ou(e.memberList)||Ou(l)||(e.memberList=e.memberList.filter((function(e){return-1===l.indexOf(e.userID)}))),n.updateGroupMap([t(t({},e),{},{groupID:u})]);var d=n.getModule(Hc),p=d.createCustomMessage({to:u,conversationType:ro.CONV_GROUP,payload:{data:\"group_create\",extension:\"\".concat(n.getMyUserID(),\"创建群组\")}});return d.sendMessageInstance(p),n.emitGroupListUpdate(),n.getGroupProfile({groupID:u})})).then((function(e){var t=e.data.group,n=t.selfInfo,o=n.nameCard,r=n.joinTime;return t.updateSelfInfo({nameCard:o,joinTime:r,messageRemindType:ro.MSG_REMIND_ACPT_AND_NOTE,role:ro.GRP_MBR_ROLE_OWNER}),Pm({group:t,overLimitUserIDList:s})})).catch((function(t){return a.setMessage(\"groupType:\".concat(e.type)),n.probeNetwork().then((function(e){var n=m(e,2),o=n[0],r=n[1];a.setError(t,o,r).end()})),Ki.error(\"\".concat(o,\" failed. error:\"),t),Ym(t)}))}},{key:\"dismissGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".dismissGroup\");if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===ro.GRP_WORK)return Ym(new Km({code:Pd.CANNOT_DISMISS_WORK,message:Tp}));var o=new lg(Xg);return o.setMessage(\"groupID:\".concat(e)),Ki.log(\"\".concat(n,\" groupID:\").concat(e)),this.request({protocolName:Xl,requestData:{groupID:e}}).then((function(){return o.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t._AVChatRoomHandler.reset(e),Pm({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"updateGroupProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".updateGroupProfile\");!this.hasLocalGroup(e.groupID)||_u(this.getLocalGroupProfile(e.groupID).type)||Ji(e.joinOption)||(Ki.warn(\"\".concat(n,\" Work/Meeting/AVChatRoom 群不能设置字段 joinOption，自动忽略该字段\")),e.joinOption=void 0),Ji(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers=\"On\":e.muteAllMembers=\"Off\");var o=new lg(Qg);return o.setMessage(JSON.stringify(e)),Ki.log(\"\".concat(n,\" groupID:\").concat(e.groupID)),this.request({protocolName:Ql,requestData:e}).then((function(){(o.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),t.hasLocalGroup(e.groupID))&&(t.groupMap.get(e.groupID).updateGroup(e),t._setStorageGroupList());return Pm({group:t.groupMap.get(e.groupID)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.log(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"joinGroup\",value:function(e){var t=this,n=e.groupID,o=e.type,r=\"\".concat(this._className,\".joinGroup\");if(o===ro.GRP_WORK){var a=new Km({code:Pd.CANNOT_JOIN_WORK,message:Mp});return Ym(a)}if(this.deleteUnjoinedAVChatRoom(n),this.hasLocalGroup(n)){if(!this.isLoggedIn())return jm({status:ro.JOIN_STATUS_ALREADY_IN_GROUP});var s=new lg(Hg);return this.getGroupProfile({groupID:n}).then((function(){return s.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" joinedStatus:\").concat(ro.JOIN_STATUS_ALREADY_IN_GROUP)).end(),jm({status:ro.JOIN_STATUS_ALREADY_IN_GROUP})})).catch((function(o){return s.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" unjoined\")).end(),Ki.warn(\"\".concat(r,\" \").concat(n,\" was unjoined, now join!\")),t.groupMap.delete(n),t.applyJoinGroup(e)}))}return Ki.log(\"\".concat(r,\" groupID:\").concat(n)),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}},{key:\"applyJoinGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".applyJoinGroup\"),o=e.groupID,r=new lg(Hg);return this.request({protocolName:Zl,requestData:e}).then((function(e){var a=e.data,s=a.joinedStatus,i=a.longPollingKey,u=a.avChatRoomFlag,c=a.avChatRoomKey,l=\"groupID:\".concat(o,\" joinedStatus:\").concat(s,\" longPollingKey:\").concat(i,\" avChatRoomFlag:\").concat(u);switch(r.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(l)).end(),Ki.log(\"\".concat(n,\" ok. \").concat(l)),s){case fm:return Pm({status:fm});case hm:return t.getGroupProfile({groupID:o}).then((function(e){var n=e.data.group,r={status:hm,group:n};return 1===u?(t.getModule(Jc).setCompleted(\"\".concat(ro.CONV_GROUP).concat(o)),t._groupAttributesHandler.initGroupAttributesCache({groupID:o,avChatRoomKey:c}),Ji(i)?t._AVChatRoomHandler.handleJoinResult({group:n}):t._AVChatRoomHandler.startRunLoop({longPollingKey:i,group:n})):(t.emitGroupListUpdate(!0,!1),Pm(r))}));default:var d=new Km({code:Pd.JOIN_GROUP_FAIL,message:Sp});return Ki.error(\"\".concat(n,\" error:\"),d),Ym(d)}})).catch((function(o){return r.setMessage(\"groupID:\".concat(e.groupID)),t.probeNetwork().then((function(e){var t=m(e,2),n=t[0],a=t[1];r.setError(o,n,a).end()})),Ki.error(\"\".concat(n,\" error:\"),o),Ym(o)}))}},{key:\"quitGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".quitGroup\");Ki.log(\"\".concat(n,\" groupID:\").concat(e));var o=this.checkJoinedAVChatRoomByID(e);if(!o&&!this.hasLocalGroup(e)){var r=new Km({code:Pd.MEMBER_NOT_IN_GROUP,message:Dp});return Ym(r)}if(o&&!this.isLoggedIn())return Ki.log(\"\".concat(n,\" anonymously ok. groupID:\").concat(e)),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),jm({groupID:e});var a=new lg(jg);return a.setMessage(\"groupID:\".concat(e)),this.request({protocolName:td,requestData:{groupID:e}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),o&&t._AVChatRoomHandler.reset(e),t.deleteLocalGroupAndConversation(e),Pm({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"searchGroupByID\",value:function(e){var t=this,n=\"\".concat(this._className,\".searchGroupByID\"),o={groupIDList:[e]},r=new lg(Yg);return r.setMessage(\"groupID:\".concat(e)),Ki.log(\"\".concat(n,\" groupID:\").concat(e)),this.request({protocolName:nd,requestData:o}).then((function(e){var o=e.data.groupProfile;if(0!==o[0].errorCode)throw new Km({code:o[0].errorCode,message:o[0].errorInfo});return r.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),Pm({group:new Ev(o[0])})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"changeGroupOwner\",value:function(e){var t=this,n=\"\".concat(this._className,\".changeGroupOwner\");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===ro.GRP_AVCHATROOM)return Ym(new Km({code:Pd.CANNOT_CHANGE_OWNER_IN_AVCHATROOM,message:yp}));if(e.newOwnerID===this.getMyUserID())return Ym(new Km({code:Pd.CANNOT_CHANGE_OWNER_TO_SELF,message:Ip}));var o=new lg($g);return o.setMessage(\"groupID:\".concat(e.groupID,\" newOwnerID:\").concat(e.newOwnerID)),Ki.log(\"\".concat(n,\" groupID:\").concat(e.groupID)),this.request({protocolName:od,requestData:e}).then((function(){o.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\"));var r=e.groupID,a=e.newOwnerID;t.groupMap.get(r).ownerID=a;var s=t.getModule(zc).getLocalGroupMemberList(r);if(s instanceof Map){var i=s.get(t.getMyUserID());Ji(i)||(i.updateRole(\"Member\"),t.groupMap.get(r).selfInfo.role=\"Member\");var u=s.get(a);Ji(u)||u.updateRole(\"Owner\")}return t.emitGroupListUpdate(!0,!1),Pm({group:t.groupMap.get(r)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"handleGroupApplication\",value:function(e){var n=this,o=\"\".concat(this._className,\".handleGroupApplication\"),r=e.message.payload,a=r.groupProfile.groupID,s=r.authentication,i=r.messageKey,u=r.operatorID,c=new lg(Wg);return c.setMessage(\"groupID:\".concat(a)),Ki.log(\"\".concat(o,\" groupID:\").concat(a)),this.request({protocolName:rd,requestData:t(t({},e),{},{applicant:u,groupID:a,authentication:s,messageKey:i})}).then((function(){return c.setNetworkType(n.getNetworkType()).end(),Ki.log(\"\".concat(o,\" ok\")),n._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Pm({group:n.getLocalGroupProfile(a)})})).catch((function(e){return n.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Ki.error(\"\".concat(o,\" failed. error\"),e),Ym(e)}))}},{key:\"handleGroupInvitation\",value:function(e){var n=this,o=\"\".concat(this._className,\".handleGroupInvitation\"),r=e.message.payload,a=r.groupProfile.groupID,s=r.authentication,i=r.messageKey,u=r.operatorID,c=e.handleAction,l=new lg(zg);return l.setMessage(\"groupID:\".concat(a,\" inviter:\").concat(u,\" handleAction:\").concat(c)),Ki.log(\"\".concat(o,\" groupID:\").concat(a,\" inviter:\").concat(u,\" handleAction:\").concat(c)),this.request({protocolName:ad,requestData:t(t({},e),{},{inviter:u,groupID:a,authentication:s,messageKey:i})}).then((function(){return l.setNetworkType(n.getNetworkType()).end(),Ki.log(\"\".concat(o,\" ok\")),n._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Pm({group:n.getLocalGroupProfile(a)})})).catch((function(e){return n.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),Ki.error(\"\".concat(o,\" failed. error\"),e),Ym(e)}))}},{key:\"getGroupOnlineMemberCount\",value:function(e){return this._AVChatRoomHandler?this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this._AVChatRoomHandler.getGroupOnlineMemberCount(e):jm({memberCount:0}):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"hasLocalGroup\",value:function(e){return this.groupMap.has(e)}},{key:\"deleteLocalGroupAndConversation\",value:function(e){this._deleteLocalGroup(e),this.getModule(Jc).deleteLocalConversation(\"GROUP\".concat(e)),this.emitGroupListUpdate(!0,!1)}},{key:\"_deleteLocalGroup\",value:function(e){this.groupMap.delete(e),this.getModule(zc).deleteGroupMemberList(e),this._setStorageGroupList()}},{key:\"sendMessage\",value:function(e,t){var n=this.createGroupMessagePack(e,t);return this.request(n)}},{key:\"createGroupMessagePack\",value:function(e,t){var n=null;t&&t.offlinePushInfo&&(n=t.offlinePushInfo);var o=\"\";Yi(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var r=e.getGroupAtInfoList();return{protocolName:vl,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),groupID:e.to,msgBody:e.getElements(),cloudCustomData:o,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==ro.MSG_TEXT||Ou(r)?void 0:r,onlineOnlyFlag:this.isOnlineMessage(e,t)?1:0,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||\"\",desc:n.description||\"\",ext:n.extension||\"\",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||\"\"}}:void 0}}}},{key:\"revokeMessage\",value:function(e){return this.request({protocolName:sd,requestData:{to:e.to,msgSeqList:[{msgSeq:e.sequence}]}})}},{key:\"deleteMessage\",value:function(e){var t=e.to,n=e.keyList;return Ki.log(\"\".concat(this._className,\".deleteMessage groupID:\").concat(t,\" count:\").concat(n.length)),this.request({protocolName:hd,requestData:{groupID:t,deleter:this.getMyUserID(),keyList:n}})}},{key:\"getRoamingMessage\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRoamingMessage\"),o=new lg(Ag),r=0;return this._computeLastSequence(e).then((function(n){return r=n,Ki.log(\"\".concat(t._className,\".getRoamingMessage groupID:\").concat(e.groupID,\" lastSequence:\").concat(r)),t.request({protocolName:ud,requestData:{groupID:e.groupID,count:21,sequence:r}})})).then((function(a){var s=a.data,i=s.messageList,u=s.complete;Ji(i)?Ki.log(\"\".concat(n,\" ok. complete:\").concat(u,\" but messageList is undefined!\")):Ki.log(\"\".concat(n,\" ok. complete:\").concat(u,\" count:\").concat(i.length)),o.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e.groupID,\" lastSequence:\").concat(r,\" complete:\").concat(u,\" count:\").concat(i?i.length:\"undefined\")).end();var c=\"GROUP\".concat(e.groupID),l=t.getModule(Jc);if(2===u||Ou(i))return l.setCompleted(c),[];var d=l.storeRoamingMessage(i,c);return l.updateIsRead(c),l.patchConversationLastMessage(c),d})).catch((function(a){return t.probeNetwork().then((function(t){var n=m(t,2),s=n[0],i=n[1];o.setError(a,s,i).setMessage(\"groupID:\".concat(e.groupID,\" lastSequence:\").concat(r)).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),a),Ym(a)}))}},{key:\"setMessageRead\",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageSeq,r=\"\".concat(this._className,\".setMessageRead\");Ki.log(\"\".concat(r,\" conversationID:\").concat(n,\" lastMessageSeq:\").concat(o)),ji(o)||Ki.warn(\"\".concat(r,\" 请勿修改 Conversation.lastMessage.lastSequence，否则可能会导致已读上报结果不准确\"));var a=new lg(Lg);return a.setMessage(\"\".concat(n,\"-\").concat(o)),this.request({protocolName:id,requestData:{groupID:n.replace(\"GROUP\",\"\"),messageReadSeq:o}}).then((function(){a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(r,\" ok.\"));var e=t.getModule(Jc);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:o}),e.updateUnreadCount(n),Pm()})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.log(\"\".concat(r,\" failed. error:\"),e),Ym(e)}))}},{key:\"_computeLastSequence\",value:function(e){return e.sequence>0?Promise.resolve(e.sequence):this.getGroupLastSequence(e.groupID)}},{key:\"getGroupLastSequence\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupLastSequence\"),o=new lg(nh),r=0,a=\"\";if(this.hasLocalGroup(e)){var s=this.getLocalGroupProfile(e),i=s.lastMessage;if(i.lastSequence>0&&!1===i.onlineOnlyFlag)return r=i.lastSequence,a=\"got lastSequence:\".concat(r,\" from local group profile[lastMessage.lastSequence]. groupID:\").concat(e),Ki.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r);if(s.nextMessageSeq>1)return r=s.nextMessageSeq-1,a=\"got lastSequence:\".concat(r,\" from local group profile[nextMessageSeq]. groupID:\").concat(e),Ki.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r)}var u=\"GROUP\".concat(e),c=this.getModule(Jc).getLocalConversation(u);if(c&&c.lastMessage.lastSequence&&!1===c.lastMessage.onlineOnlyFlag)return r=c.lastMessage.lastSequence,a=\"got lastSequence:\".concat(r,\" from local conversation profile[lastMessage.lastSequence]. groupID:\").concat(e),Ki.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r);var l={groupIDList:[e],responseFilter:{groupBaseInfoFilter:[\"NextMsgSeq\"]}};return this.getGroupProfileAdvance(l).then((function(s){var i=s.data.successGroupList;return Ou(i)?Ki.log(\"\".concat(n,\" successGroupList is empty. groupID:\").concat(e)):(r=i[0].nextMessageSeq-1,a=\"got lastSequence:\".concat(r,\" from getGroupProfileAdvance. groupID:\").concat(e),Ki.log(\"\".concat(n,\" \").concat(a))),o.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(a)).end(),r})).catch((function(r){return t.probeNetwork().then((function(t){var n=m(t,2),a=n[0],s=n[1];o.setError(r,a,s).setMessage(\"get lastSequence failed from getGroupProfileAdvance. groupID:\".concat(e)).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),r),Ym(r)}))}},{key:\"isMessageFromAVChatroom\",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:\"hasJoinedAVChatRoom\",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.hasJoinedAVChatRoom():0}},{key:\"getJoinedAVChatRoom\",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.getJoinedAVChatRoom():[]}},{key:\"isOnlineMessage\",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:\"_canIUseOnlineOnlyFlag\",value:function(e){var t=this.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==ro.CONV_GROUP}},{key:\"deleteLocalGroupMembers\",value:function(e,t){this.getModule(zc).deleteLocalGroupMembers(e,t)}},{key:\"onAVChatRoomMessage\",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onMessage(e)}},{key:\"getGroupSimplifiedInfo\",value:function(e){var t=this,n=new lg(ah),o={groupIDList:[e],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\"]}};return this.getGroupProfileAdvance(o).then((function(o){var r=o.data.successGroupList;return n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e,\" type:\").concat(r[0].type)).end(),r[0]})).catch((function(o){t.probeNetwork().then((function(t){var r=m(t,2),a=r[0],s=r[1];n.setError(o,a,s).setMessage(\"groupID:\".concat(e)).end()}))}))}},{key:\"setUnjoinedAVChatRoom\",value:function(e){this._unjoinedAVChatRoomList.set(e,1)}},{key:\"deleteUnjoinedAVChatRoom\",value:function(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}},{key:\"isUnjoinedAVChatRoom\",value:function(e){return this._unjoinedAVChatRoomList.has(e)}},{key:\"onGroupAttributesUpdated\",value:function(e){this._groupAttributesHandler&&this._groupAttributesHandler.onGroupAttributesUpdated(e)}},{key:\"updateLocalMainSequenceOnReconnected\",value:function(){this._groupAttributesHandler&&this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}},{key:\"initGroupAttributes\",value:function(e){return this._groupAttributesHandler.initGroupAttributes(e)}},{key:\"setGroupAttributes\",value:function(e){return this._groupAttributesHandler.setGroupAttributes(e)}},{key:\"deleteGroupAttributes\",value:function(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}},{key:\"getGroupAttributes\",value:function(e){return this._groupAttributesHandler.getGroupAttributes(e)}},{key:\"reset\",value:function(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._AVChatRoomHandler&&this._AVChatRoomHandler.reset()}}]),r}(dl),Hv=function(){function e(t){o(this,e),this.userID=\"\",this.avatar=\"\",this.nick=\"\",this.role=\"\",this.joinTime=\"\",this.lastSendMsgTime=\"\",this.nameCard=\"\",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return a(e,[{key:\"_initMember\",value:function(e){this.updateMember(e)}},{key:\"updateMember\",value:function(e){var t=[null,void 0,\"\",0,NaN];e.memberCustomField&&fu(this.memberCustomField,e.memberCustomField),ru(this,e,[\"memberCustomField\"],t)}},{key:\"updateRole\",value:function(e){[\"Owner\",\"Admin\",\"Member\"].indexOf(e)<0||(this.role=e)}},{key:\"updateMuteUntil\",value:function(e){Ji(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:\"updateNameCard\",value:function(e){Ji(e)||(this.nameCard=e)}},{key:\"updateMemberCustomField\",value:function(e){e&&fu(this.memberCustomField,e)}}]),e}(),jv=function(e){i(r,e);var n=_(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._className=\"GroupMemberModule\",t.groupMemberListMap=new Map,t.getInnerEmitterInstance().on(gv.PROFILE_UPDATED,t._onProfileUpdated,h(t)),t}return a(r,[{key:\"_onProfileUpdated\",value:function(e){for(var t=this,n=e.data,o=function(e){var o=n[e];t.groupMemberListMap.forEach((function(e){e.has(o.userID)&&e.get(o.userID).updateMember({nick:o.nick,avatar:o.avatar})}))},r=0;r<n.length;r++)o(r)}},{key:\"deleteGroupMemberList\",value:function(e){this.groupMemberListMap.delete(e)}},{key:\"getGroupMemberList\",value:function(e){var t=this,n=e.groupID,o=e.offset,r=void 0===o?0:o,a=e.count,s=void 0===a?15:a,i=\"\".concat(this._className,\".getGroupMemberList\"),u=new lg(dh);Ki.log(\"\".concat(i,\" groupID:\").concat(n,\" offset:\").concat(r,\" count:\").concat(s));var c=[];return this.request({protocolName:yd,requestData:{groupID:n,offset:r,limit:s>100?100:s}}).then((function(e){var o=e.data,r=o.members,a=o.memberNum;if(!zi(r)||0===r.length)return Promise.resolve([]);var s=t.getModule($c);return s.hasLocalGroup(n)&&(s.getLocalGroupProfile(n).memberNum=a),c=t._updateLocalGroupMemberMap(n,r),t.getModule(jc).getUserProfile({userIDList:r.map((function(e){return e.userID})),tagList:[cm.NICK,cm.AVATAR]})})).then((function(e){var o=e.data;if(!zi(o)||0===o.length)return jm({memberList:[]});var a=o.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));return t._updateLocalGroupMemberMap(n,a),u.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" offset:\").concat(r,\" count:\").concat(s)).end(),Ki.log(\"\".concat(i,\" ok.\")),Pm({memberList:c})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Ki.error(\"\".concat(i,\" failed. error:\"),e),Ym(e)}))}},{key:\"getGroupMemberProfile\",value:function(e){var n=this,o=\"\".concat(this._className,\".getGroupMemberProfile\"),r=new lg(ph);r.setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)),Ki.log(\"\".concat(o,\" groupID:\").concat(e.groupID,\" userIDList:\").concat(e.userIDList.join(\",\"))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var a=e.groupID,s=e.userIDList;return this._getGroupMemberProfileAdvance(t(t({},e),{},{userIDList:s})).then((function(e){var t=e.data.members;return zi(t)&&0!==t.length?(n._updateLocalGroupMemberMap(a,t),n.getModule(jc).getUserProfile({userIDList:t.map((function(e){return e.userID})),tagList:[cm.NICK,cm.AVATAR]})):jm([])})).then((function(e){var t=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));n._updateLocalGroupMemberMap(a,t);var o=s.filter((function(e){return n.hasLocalGroupMember(a,e)})).map((function(e){return n.getLocalGroupMemberInfo(a,e)}));return r.setNetworkType(n.getNetworkType()).end(),Pm({memberList:o})}))}},{key:\"addGroupMember\",value:function(e){var t=this,n=\"\".concat(this._className,\".addGroupMember\"),o=e.groupID,r=this.getModule($c).getLocalGroupProfile(o),a=r.type,s=new lg(gh);if(s.setMessage(\"groupID:\".concat(o,\" groupType:\").concat(a)),mu(a)){var i=new Km({code:Pd.CANNOT_ADD_MEMBER_IN_AVCHATROOM,message:Ep});return s.setCode(Pd.CANNOT_ADD_MEMBER_IN_AVCHATROOM).setError(Ep).setNetworkType(this.getNetworkType()).end(),Ym(i)}return e.userIDList=e.userIDList.map((function(e){return{userID:e}})),Ki.log(\"\".concat(n,\" groupID:\").concat(o)),this.request({protocolName:Td,requestData:e}).then((function(o){var a=o.data.members;Ki.log(\"\".concat(n,\" ok\"));var i=a.filter((function(e){return 1===e.result})).map((function(e){return e.userID})),u=a.filter((function(e){return 0===e.result})).map((function(e){return e.userID})),c=a.filter((function(e){return 2===e.result})).map((function(e){return e.userID})),l=a.filter((function(e){return 4===e.result})).map((function(e){return e.userID})),d=\"groupID:\".concat(e.groupID,\", \")+\"successUserIDList:\".concat(i,\", \")+\"failureUserIDList:\".concat(u,\", \")+\"existedUserIDList:\".concat(c,\", \")+\"overLimitUserIDList:\".concat(l);return s.setNetworkType(t.getNetworkType()).setMoreMessage(d).end(),0===i.length?Pm({successUserIDList:i,failureUserIDList:u,existedUserIDList:c,overLimitUserIDList:l}):(r.memberNum+=i.length,Pm({successUserIDList:i,failureUserIDList:u,existedUserIDList:c,overLimitUserIDList:l,group:r}))})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"deleteGroupMember\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteGroupMember\"),o=e.groupID,r=e.userIDList,a=new lg(hh),s=\"groupID:\".concat(o,\" \").concat(r.length>5?\"userIDList.length:\".concat(r.length):\"userIDList:\".concat(r));a.setMessage(s),Ki.log(\"\".concat(n,\" groupID:\").concat(o,\" userIDList:\"),r);var i=this.getModule($c).getLocalGroupProfile(o);return mu(i.type)?Ym(new Km({code:Pd.CANNOT_KICK_MEMBER_IN_AVCHATROOM,message:kp})):this.request({protocolName:Dd,requestData:e}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),i.memberNum--,t.deleteLocalGroupMembers(o,r),Pm({group:i,userIDList:r})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"setGroupMemberMuteTime\",value:function(e){var t=this,n=e.groupID,o=e.userID,r=e.muteTime,a=\"\".concat(this._className,\".setGroupMemberMuteTime\");if(o===this.getMyUserID())return Ym(new Km({code:Pd.CANNOT_MUTE_SELF,message:Rp}));Ki.log(\"\".concat(a,\" groupID:\").concat(n,\" userID:\").concat(o));var s=new lg(fh);return s.setMessage(\"groupID:\".concat(n,\" userID:\").concat(o,\" muteTime:\").concat(r)),this._modifyGroupMemberInfo({groupID:n,userID:o,muteTime:r}).then((function(e){s.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(a,\" ok\"));var o=t.getModule($c);return Pm({group:o.getLocalGroupProfile(n),member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Ki.error(\"\".concat(a,\" failed. error:\"),e),Ym(e)}))}},{key:\"setGroupMemberRole\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberRole\"),o=e.groupID,r=e.userID,a=e.role,s=this.getModule($c).getLocalGroupProfile(o);if(s.selfInfo.role!==ro.GRP_MBR_ROLE_OWNER)return Ym(new Km({code:Pd.NOT_OWNER,message:Np}));if([ro.GRP_WORK,ro.GRP_AVCHATROOM].includes(s.type))return Ym(new Km({code:Pd.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM,message:Cp}));if([ro.GRP_MBR_ROLE_ADMIN,ro.GRP_MBR_ROLE_MEMBER].indexOf(a)<0)return Ym(new Km({code:Pd.INVALID_MEMBER_ROLE,message:Lp}));if(r===this.getMyUserID())return Ym(new Km({code:Pd.CANNOT_SET_SELF_MEMBER_ROLE,message:Op}));var i=new lg(mh);return i.setMessage(\"groupID:\".concat(o,\" userID:\").concat(r,\" role:\").concat(a)),Ki.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(r)),this._modifyGroupMemberInfo({groupID:o,userID:r,role:a}).then((function(e){return i.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),Pm({group:s,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"setGroupMemberNameCard\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberNameCard\"),o=e.groupID,r=e.userID,a=void 0===r?this.getMyUserID():r,s=e.nameCard;Ki.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(a));var i=new lg(_h);return i.setMessage(\"groupID:\".concat(o,\" userID:\").concat(a,\" nameCard:\").concat(s)),this._modifyGroupMemberInfo({groupID:o,userID:a,nameCard:s}).then((function(e){Ki.log(\"\".concat(n,\" ok\")),i.setNetworkType(t.getNetworkType()).end();var r=t.getModule($c).getLocalGroupProfile(o);return a===t.getMyUserID()&&r&&r.setSelfNameCard(s),Pm({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"setGroupMemberCustomField\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberCustomField\"),o=e.groupID,r=e.userID,a=void 0===r?this.getMyUserID():r,s=e.memberCustomField;Ki.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(a));var i=new lg(vh);return i.setMessage(\"groupID:\".concat(o,\" userID:\").concat(a,\" memberCustomField:\").concat(JSON.stringify(s))),this._modifyGroupMemberInfo({groupID:o,userID:a,memberCustomField:s}).then((function(e){i.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\"));var r=t.getModule($c).getLocalGroupProfile(o);return Pm({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"setMessageRemindType\",value:function(e){var t=this,n=\"\".concat(this._className,\".setMessageRemindType\"),o=new lg(Jg);o.setMessage(\"groupID:\".concat(e.groupID)),Ki.log(\"\".concat(n,\" groupID:\").concat(e.groupID));var r=e.groupID,a=e.messageRemindType;return this._modifyGroupMemberInfo({groupID:r,messageRemindType:a,userID:this.getMyUserID()}).then((function(){o.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok. groupID:\").concat(e.groupID));var r=t.getModule($c).getLocalGroupProfile(e.groupID);return r&&(r.selfInfo.messageRemindType=a),Pm({group:r})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"_modifyGroupMemberInfo\",value:function(e){var t=this,n=e.groupID,o=e.userID;return this.request({protocolName:Sd,requestData:e}).then((function(){if(t.hasLocalGroupMember(n,o)){var r=t.getLocalGroupMemberInfo(n,o);return Ji(e.muteTime)||r.updateMuteUntil(e.muteTime),Ji(e.role)||r.updateRole(e.role),Ji(e.nameCard)||r.updateNameCard(e.nameCard),Ji(e.memberCustomField)||r.updateMemberCustomField(e.memberCustomField),r}return t.getGroupMemberProfile({groupID:n,userIDList:[o]}).then((function(e){return m(e.data.memberList,1)[0]}))}))}},{key:\"_getGroupMemberProfileAdvance\",value:function(e){return this.request({protocolName:Id,requestData:t(t({},e),{},{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:[\"Role\",\"JoinTime\",\"NameCard\",\"ShutUpUntil\"]})})}},{key:\"_updateLocalGroupMemberMap\",value:function(e,t){var n=this;return zi(t)&&0!==t.length?t.map((function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new Hv(t)),n.getLocalGroupMemberInfo(e,t.userID)})):[]}},{key:\"deleteLocalGroupMembers\",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach((function(e){n.delete(e)}))}},{key:\"getLocalGroupMemberInfo\",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:\"setLocalGroupMember\",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var n=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,n)}}},{key:\"getLocalGroupMemberList\",value:function(e){return this.groupMemberListMap.get(e)}},{key:\"hasLocalGroupMember\",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:\"hasLocalGroupMemberMap\",value:function(e){return this.groupMemberListMap.has(e)}},{key:\"reset\",value:function(){this.groupMemberListMap.clear()}}]),r}(dl),Yv=function(){function e(t){o(this,e),this._userModule=t,this._className=\"ProfileHandler\",this.TAG=\"profile\",this.accountProfileMap=new Map,this.expirationTime=864e5}return a(e,[{key:\"setExpirationTime\",value:function(e){this.expirationTime=e}},{key:\"getUserProfile\",value:function(e){var t=this,n=e.userIDList;e.fromAccount=this._userModule.getMyAccount(),n.length>100&&(Ki.warn(\"\".concat(this._className,\".getUserProfile 获取用户资料人数不能超过100人\")),n.length=100);for(var o,r=[],a=[],s=0,i=n.length;s<i;s++)o=n[s],this._userModule.isMyFriend(o)&&this._containsAccount(o)?a.push(this._getProfileFromMap(o)):r.push(o);if(0===r.length)return jm(a);e.toAccount=r;var u=e.bFromGetMyProfile||!1,c=[];e.toAccount.forEach((function(e){c.push({toAccount:e,standardSequence:0,customSequence:0})})),e.userItem=c;var l=new lg(Dh);return l.setMessage(n.length>5?\"userIDList.length:\".concat(n.length):\"userIDList:\".concat(n)),this._userModule.request({protocolName:Ml,requestData:e}).then((function(e){l.setNetworkType(t._userModule.getNetworkType()).end(),Ki.info(\"\".concat(t._className,\".getUserProfile ok\"));var n=t._handleResponse(e).concat(a);return Pm(u?n[0]:n)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),Ki.error(\"\".concat(t._className,\".getUserProfile failed. error:\"),e),Ym(e)}))}},{key:\"getMyProfile\",value:function(){var e=this._userModule.getMyAccount();if(Ki.log(\"\".concat(this._className,\".getMyProfile myAccount:\").concat(e)),this._fillMap(),this._containsAccount(e)){var t=this._getProfileFromMap(e);return Ki.debug(\"\".concat(this._className,\".getMyProfile from cache, myProfile:\")+JSON.stringify(t)),jm(t)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}},{key:\"_handleResponse\",value:function(e){for(var t,n,o=ou.now(),r=e.data.userProfileItem,a=[],s=0,i=r.length;s<i;s++)\"@TLS#NOT_FOUND\"!==r[s].to&&\"\"!==r[s].to&&(t=r[s].to,n=this._updateMap(t,this._getLatestProfileFromResponse(t,r[s].profileItem)),a.push(n));return Ki.log(\"\".concat(this._className,\"._handleResponse cost \").concat(ou.now()-o,\" ms\")),a}},{key:\"_getLatestProfileFromResponse\",value:function(e,t){var n={};if(n.userID=e,n.profileCustomField=[],!Ou(t))for(var o=0,r=t.length;o<r;o++)if(t[o].tag.indexOf(\"Tag_Profile_Custom\")>-1)n.profileCustomField.push({key:t[o].tag,value:t[o].value});else switch(t[o].tag){case cm.NICK:n.nick=t[o].value;break;case cm.GENDER:n.gender=t[o].value;break;case cm.BIRTHDAY:n.birthday=t[o].value;break;case cm.LOCATION:n.location=t[o].value;break;case cm.SELFSIGNATURE:n.selfSignature=t[o].value;break;case cm.ALLOWTYPE:n.allowType=t[o].value;break;case cm.LANGUAGE:n.language=t[o].value;break;case cm.AVATAR:n.avatar=t[o].value;break;case cm.MESSAGESETTINGS:n.messageSettings=t[o].value;break;case cm.ADMINFORBIDTYPE:n.adminForbidType=t[o].value;break;case cm.LEVEL:n.level=t[o].value;break;case cm.ROLE:n.role=t[o].value;break;default:Ki.warn(\"\".concat(this._className,\"._handleResponse unknown tag:\"),t[o].tag,t[o].value)}return n}},{key:\"updateMyProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".updateMyProfile\"),o=new lg(Sh);o.setMessage(JSON.stringify(e));var r=(new Iv).validate(e);if(!r.valid)return o.setCode(Pd.UPDATE_PROFILE_INVALID_PARAM).setMoreMessage(\"\".concat(n,\" info:\").concat(r.tips)).setNetworkType(this._userModule.getNetworkType()).end(),Ki.error(\"\".concat(n,\" info:\").concat(r.tips,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile\")),Ym({code:Pd.UPDATE_PROFILE_INVALID_PARAM,message:Fp});var a=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(\"profileCustomField\"===s?e.profileCustomField.forEach((function(e){a.push({tag:e.key,value:e.value})})):a.push({tag:cm[s.toUpperCase()],value:e[s]}));return 0===a.length?(o.setCode(Pd.UPDATE_PROFILE_NO_KEY).setMoreMessage(qp).setNetworkType(this._userModule.getNetworkType()).end(),Ki.error(\"\".concat(n,\" info:\").concat(qp,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile\")),Ym({code:Pd.UPDATE_PROFILE_NO_KEY,message:qp})):this._userModule.request({protocolName:yl,requestData:{fromAccount:this._userModule.getMyAccount(),profileItem:a}}).then((function(r){o.setNetworkType(t._userModule.getNetworkType()).end(),Ki.info(\"\".concat(n,\" ok\"));var a=t._updateMap(t._userModule.getMyAccount(),e);return t._userModule.emitOuterEvent(oo.PROFILE_UPDATED,[a]),jm(a)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"onProfileModified\",value:function(e){var t=e.dataList;if(!Ou(t)){var n,o,r=t.length;Ki.info(\"\".concat(this._className,\".onProfileModified count:\").concat(r));for(var a=[],s=this._userModule.getModule(Jc),i=0;i<r;i++)n=t[i].userID,o=this._updateMap(n,this._getLatestProfileFromResponse(n,t[i].profileList)),a.push(o),n===this._userModule.getMyAccount()&&s.onMyProfileModified({latestNick:o.nick,latestAvatar:o.avatar});this._userModule.emitInnerEvent(gv.PROFILE_UPDATED,a),this._userModule.emitOuterEvent(oo.PROFILE_UPDATED,a)}}},{key:\"_fillMap\",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,o=e.length;n<o;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);Ki.log(\"\".concat(this._className,\"._fillMap from cache, map.size:\").concat(this.accountProfileMap.size))}}},{key:\"_updateMap\",value:function(e,t){var n,o=Date.now();return this._containsAccount(e)?(n=this._getProfileFromMap(e),t.profileCustomField&&fu(n.profileCustomField,t.profileCustomField),ru(n,t,[\"profileCustomField\"]),n.lastUpdatedTime=o):(n=new Iv(t),(this._userModule.isMyFriend(e)||e===this._userModule.getMyAccount())&&(n.lastUpdatedTime=o,this.accountProfileMap.set(e,n))),this._flushMap(e===this._userModule.getMyAccount()),n}},{key:\"_flushMap\",value:function(e){var t=v(this.accountProfileMap.values()),n=this._userModule.getStorageModule();Ki.debug(\"\".concat(this._className,\"._flushMap length:\").concat(t.length,\" flushAtOnce:\").concat(e)),n.setItem(this.TAG,t,e)}},{key:\"_containsAccount\",value:function(e){return this.accountProfileMap.has(e)}},{key:\"_getProfileFromMap\",value:function(e){return this.accountProfileMap.get(e)}},{key:\"_getCachedProfiles\",value:function(){var e=this._userModule.getStorageModule().getItem(this.TAG);return Ou(e)?[]:e}},{key:\"onConversationsProfileUpdated\",value:function(e){for(var t,n,o,r=[],a=0,s=e.length;a<s;a++)n=(t=e[a]).userID,this._userModule.isMyFriend(n)||(this._containsAccount(n)?(o=this._getProfileFromMap(n),ru(o,t)>0&&r.push(n)):r.push(t.userID));0!==r.length&&(Ki.info(\"\".concat(this._className,\".onConversationsProfileUpdated toAccountList:\").concat(r)),this.getUserProfile({userIDList:r}))}},{key:\"getNickAndAvatarByUserID\",value:function(e){if(this._containsAccount(e)){var t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:\"\",avatar:\"\"}}},{key:\"reset\",value:function(){this._flushMap(!0),this.accountProfileMap.clear()}}]),e}(),$v=function e(t){o(this,e),Ou||(this.userID=t.userID||\"\",this.timeStamp=t.timeStamp||0)},Wv=function(){function e(t){o(this,e),this._userModule=t,this._className=\"BlacklistHandler\",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}return a(e,[{key:\"getLocalBlacklist\",value:function(){return v(this._blacklistMap.keys())}},{key:\"getBlacklist\",value:function(){var e=this,t=\"\".concat(this._className,\".getBlacklist\"),n={fromAccount:this._userModule.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},o=new lg(Eh);return this._userModule.request({protocolName:Il,requestData:n}).then((function(n){var r=n.data,a=r.blackListItem,s=r.currentSequence,i=Ou(a)?0:a.length;o.setNetworkType(e._userModule.getNetworkType()).setMessage(\"blackList count:\".concat(i)).end(),Ki.info(\"\".concat(t,\" ok\")),e.currentSequence=s,e._handleResponse(a,!0),e._userModule.emitOuterEvent(oo.BLACKLIST_UPDATED,v(e._blacklistMap.keys()))})).catch((function(n){return e._userModule.probeNetwork().then((function(e){var t=m(e,2),r=t[0],a=t[1];o.setError(n,r,a).end()})),Ki.error(\"\".concat(t,\" failed. error:\"),n),Ym(n)}))}},{key:\"addBlacklist\",value:function(e){var t=this,n=\"\".concat(this._className,\".addBlacklist\"),o=new lg(Ah);if(!zi(e.userIDList))return o.setCode(Pd.ADD_BLACKLIST_INVALID_PARAM).setMessage(xp).setNetworkType(this._userModule.getNetworkType()).end(),Ki.error(\"\".concat(n,\" options.userIDList 必需是数组\")),Ym({code:Pd.ADD_BLACKLIST_INVALID_PARAM,message:xp});var r=this._userModule.getMyAccount();return 1===e.userIDList.length&&e.userIDList[0]===r?(o.setCode(Pd.CANNOT_ADD_SELF_TO_BLACKLIST).setMessage(Kp).setNetworkType(this._userModule.getNetworkType()).end(),Ki.error(\"\".concat(n,\" 不能把自己拉黑\")),Ym({code:Pd.CANNOT_ADD_SELF_TO_BLACKLIST,message:Kp})):(e.userIDList.includes(r)&&(e.userIDList=e.userIDList.filter((function(e){return e!==r})),Ki.warn(\"\".concat(n,\" 不能把自己拉黑，已过滤\"))),e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Tl,requestData:e}).then((function(r){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)).end(),Ki.info(\"\".concat(n,\" ok\")),t._handleResponse(r.resultItem,!0),Pm(v(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)})))}},{key:\"_handleResponse\",value:function(e,t){if(!Ou(e))for(var n,o,r,a=0,s=e.length;a<s;a++)o=e[a].to,r=e[a].resultCode,(Ji(r)||0===r)&&(t?((n=this._blacklistMap.has(o)?this._blacklistMap.get(o):new $v).userID=o,!Ou(e[a].addBlackTimeStamp)&&(n.timeStamp=e[a].addBlackTimeStamp),this._blacklistMap.set(o,n)):this._blacklistMap.has(o)&&(n=this._blacklistMap.get(o),this._blacklistMap.delete(o)));Ki.log(\"\".concat(this._className,\"._handleResponse total:\").concat(this._blacklistMap.size,\" bAdd:\").concat(t))}},{key:\"deleteBlacklist\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteBlacklist\"),o=new lg(kh);return zi(e.userIDList)?(e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Dl,requestData:e}).then((function(r){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)).end(),Ki.info(\"\".concat(n,\" ok\")),t._handleResponse(r.data.resultItem,!1),Pm(v(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))):(o.setCode(Pd.DEL_BLACKLIST_INVALID_PARAM).setMessage(Vp).setNetworkType(this._userModule.getNetworkType()).end(),Ki.error(\"\".concat(n,\" options.userIDList 必需是数组\")),Ym({code:Pd.DEL_BLACKLIST_INVALID_PARAM,message:Vp}))}},{key:\"onAccountDeleted\",value:function(e){for(var t,n=[],o=0,r=e.length;o<r;o++)t=e[o],this._blacklistMap.has(t)&&(this._blacklistMap.delete(t),n.push(t));n.length>0&&(Ki.log(\"\".concat(this._className,\".onAccountDeleted count:\").concat(n.length,\" userIDList:\"),n),this._userModule.emitOuterEvent(oo.BLACKLIST_UPDATED,v(this._blacklistMap.keys())))}},{key:\"onAccountAdded\",value:function(e){for(var t,n=[],o=0,r=e.length;o<r;o++)t=e[o],this._blacklistMap.has(t)||(this._blacklistMap.set(t,new $v({userID:t})),n.push(t));n.length>0&&(Ki.log(\"\".concat(this._className,\".onAccountAdded count:\").concat(n.length,\" userIDList:\"),n),this._userModule.emitOuterEvent(oo.BLACKLIST_UPDATED,v(this._blacklistMap.keys())))}},{key:\"reset\",value:function(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}]),e}(),zv=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"UserModule\",r._profileHandler=new Yv(h(r)),r._blacklistHandler=new Wv(h(r)),r.getInnerEmitterInstance().on(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED,r.onContextUpdated,h(r)),r}return a(n,[{key:\"onContextUpdated\",value:function(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}},{key:\"onProfileModified\",value:function(e){this._profileHandler.onProfileModified(e)}},{key:\"onRelationChainModified\",value:function(e){var t=e.dataList;if(!Ou(t)){var n=[];t.forEach((function(e){e.blackListDelAccount&&n.push.apply(n,v(e.blackListDelAccount))})),n.length>0&&this._blacklistHandler.onAccountDeleted(n);var o=[];t.forEach((function(e){e.blackListAddAccount&&o.push.apply(o,v(e.blackListAddAccount))})),o.length>0&&this._blacklistHandler.onAccountAdded(o)}}},{key:\"onConversationsProfileUpdated\",value:function(e){this._profileHandler.onConversationsProfileUpdated(e)}},{key:\"getMyAccount\",value:function(){return this.getMyUserID()}},{key:\"getMyProfile\",value:function(){return this._profileHandler.getMyProfile()}},{key:\"getStorageModule\",value:function(){return this.getModule(Qc)}},{key:\"isMyFriend\",value:function(e){var t=this.getModule(Wc);return!!t&&t.isMyFriend(e)}},{key:\"getUserProfile\",value:function(e){return this._profileHandler.getUserProfile(e)}},{key:\"updateMyProfile\",value:function(e){return this._profileHandler.updateMyProfile(e)}},{key:\"getNickAndAvatarByUserID\",value:function(e){return this._profileHandler.getNickAndAvatarByUserID(e)}},{key:\"getLocalBlacklist\",value:function(){var e=this._blacklistHandler.getLocalBlacklist();return jm(e)}},{key:\"addBlacklist\",value:function(e){return this._blacklistHandler.addBlacklist(e)}},{key:\"deleteBlacklist\",value:function(e){return this._blacklistHandler.deleteBlacklist(e)}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._profileHandler.reset(),this._blacklistHandler.reset()}}]),n}(dl),Jv=function(){function e(t,n){o(this,e),this._moduleManager=t,this._isLoggedIn=!1,this._SDKAppID=n.SDKAppID,this._userID=n.userID||\"\",this._userSig=n.userSig||\"\",this._version=\"2.14.0\",this._a2Key=\"\",this._tinyID=\"\",this._contentType=\"json\",this._unlimitedAVChatRoom=n.unlimitedAVChatRoom,this._scene=n.scene||\"\",this._oversea=n.oversea,this._instanceID=n.instanceID,this._statusInstanceID=0}return a(e,[{key:\"isLoggedIn\",value:function(){return this._isLoggedIn}},{key:\"isOversea\",value:function(){return this._oversea}},{key:\"isUnlimitedAVChatRoom\",value:function(){return this._unlimitedAVChatRoom}},{key:\"getUserID\",value:function(){return this._userID}},{key:\"setUserID\",value:function(e){this._userID=e}},{key:\"setUserSig\",value:function(e){this._userSig=e}},{key:\"getUserSig\",value:function(){return this._userSig}},{key:\"getSDKAppID\",value:function(){return this._SDKAppID}},{key:\"getTinyID\",value:function(){return this._tinyID}},{key:\"setTinyID\",value:function(e){this._tinyID=e,this._isLoggedIn=!0}},{key:\"getScene\",value:function(){return function(){var e=!1,t=[];ai&&(t=Object.keys(ii)),si&&(t=Object.keys(window));for(var n=0,o=t.length;n<o;n++)if(t[n].toLowerCase().includes(\"uikit\")){e=!0;break}return t=null,e}()?\"tuikit\":this._scene}},{key:\"getInstanceID\",value:function(){return this._instanceID}},{key:\"getStatusInstanceID\",value:function(){return this._statusInstanceID}},{key:\"setStatusInstanceID\",value:function(e){this._statusInstanceID=e}},{key:\"getVersion\",value:function(){return this._version}},{key:\"getA2Key\",value:function(){return this._a2Key}},{key:\"setA2Key\",value:function(e){this._a2Key=e}},{key:\"getContentType\",value:function(){return this._contentType}},{key:\"reset\",value:function(){this._isLoggedIn=!1,this._userSig=\"\",this._a2Key=\"\",this._tinyID=\"\",this._statusInstanceID=0}}]),e}(),Xv=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"SignModule\",r._helloInterval=120,r._lastLoginTs=0,hv.mixin(h(r)),r}return a(n,[{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}},{key:\"login\",value:function(e){if(this.isLoggedIn()){var t=\"您已经登录账号\".concat(e.userID,\"！如需切换账号登录，请先调用 logout 接口登出，再调用 login 接口登录。\");return Ki.warn(t),jm({actionStatus:\"OK\",errorCode:0,errorInfo:t,repeatLogin:!0})}if(Date.now()-this._lastLoginTs<=15e3)return Ki.warn(\"您正在尝试登录账号\".concat(e.userID,\"！请勿重复登录。\")),Ym({code:Pd.REPEAT_LOGIN,message:Bd});Ki.log(\"\".concat(this._className,\".login userID:\").concat(e.userID));var n=this._checkLoginInfo(e);if(0!==n.code)return Ym(n);var o=this.getModule(Xc),r=e.userID,a=e.userSig;return o.setUserID(r),o.setUserSig(a),this.getModule(al).updateProtocolConfig(),this._login()}},{key:\"_login\",value:function(){var e=this,t=this.getModule(Xc),n=new lg(gg);return n.setMessage(\"\".concat(t.getScene())).setMoreMessage(\"identifier:\".concat(this.getMyUserID())),this._lastLoginTs=Date.now(),this.request({protocolName:pl}).then((function(o){e._lastLoginTs=0;var r=Date.now(),a=null,s=o.data,i=s.a2Key,u=s.tinyID,c=s.helloInterval,l=s.instanceID,d=s.timeStamp;Ki.log(\"\".concat(e._className,\".login ok. helloInterval:\").concat(c,\" instanceID:\").concat(l,\" timeStamp:\").concat(d));var p=1e3*d,g=r-n.getStartTs(),h=p+parseInt(g/2)-r,f=n.getStartTs()+h;if(n.start(f),function(e,t){Pi=t;var n=new Date;n.setTime(e),Ki.info(\"baseTime from server: \".concat(n,\" offset: \").concat(Pi))}(p,h),!u)throw a=new Km({code:Pd.NO_TINYID,message:xd}),n.setError(a,!0,e.getNetworkType()).end(),a;if(!i)throw a=new Km({code:Pd.NO_A2KEY,message:Vd}),n.setError(a,!0,e.getNetworkType()).end(),a;return n.setNetworkType(e.getNetworkType()).setMoreMessage(\"helloInterval:\".concat(c,\" instanceID:\").concat(l,\" offset:\").concat(h)).end(),t.setA2Key(i),t.setTinyID(u),t.setStatusInstanceID(l),e.getModule(al).updateProtocolConfig(),e.emitInnerEvent(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED),e._helloInterval=c,e.triggerReady(),e._fetchCloudControlConfig(),o})).catch((function(t){return e.probeNetwork().then((function(e){var o=m(e,2),r=o[0],a=o[1];n.setError(t,r,a).end(!0)})),Ki.error(\"\".concat(e._className,\".login failed. error:\"),t),e._moduleManager.onLoginFailed(),Ym(t)}))}},{key:\"logout\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isLoggedIn())return Ym({code:Pd.USER_NOT_LOGGED_IN,message:Kd});var n=new lg(hg);return n.setNetworkType(this.getNetworkType()).setMessage(\"identifier:\".concat(this.getMyUserID())).end(!0),Ki.info(\"\".concat(this._className,\".logout type:\").concat(t)),this.request({protocolName:gl,requestData:{type:t}}).then((function(){return e.resetReady(),jm({})})).catch((function(t){return Ki.error(\"\".concat(e._className,\"._logout error:\"),t),e.resetReady(),jm({})}))}},{key:\"_fetchCloudControlConfig\",value:function(){this.getModule(ul).fetchConfig()}},{key:\"_hello\",value:function(){var e=this;this.request({protocolName:hl}).catch((function(t){Ki.warn(\"\".concat(e._className,\"._hello error:\"),t)}))}},{key:\"_checkLoginInfo\",value:function(e){var t=0,n=\"\";return Ou(this.getModule(Xc).getSDKAppID())?(t=Pd.NO_SDKAPPID,n=Ud):Ou(e.userID)?(t=Pd.NO_IDENTIFIER,n=Fd):Ou(e.userSig)&&(t=Pd.NO_USERSIG,n=qd),{code:t,message:n}}},{key:\"onMultipleAccountKickedOut\",value:function(e){var t=this;new lg(fg).setNetworkType(this.getNetworkType()).setMessage(\"type:\".concat(ro.KICKED_OUT_MULT_ACCOUNT,\" newInstanceInfo:\").concat(JSON.stringify(e))).end(!0),Ki.warn(\"\".concat(this._className,\".onMultipleAccountKickedOut userID:\").concat(this.getMyUserID(),\" newInstanceInfo:\"),e),this.logout(1).then((function(){t.emitOuterEvent(oo.KICKED_OUT,{type:ro.KICKED_OUT_MULT_ACCOUNT}),t._moduleManager.reset()}))}},{key:\"onMultipleDeviceKickedOut\",value:function(e){var t=this;new lg(fg).setNetworkType(this.getNetworkType()).setMessage(\"type:\".concat(ro.KICKED_OUT_MULT_DEVICE,\" newInstanceInfo:\").concat(JSON.stringify(e))).end(!0),Ki.warn(\"\".concat(this._className,\".onMultipleDeviceKickedOut userID:\").concat(this.getMyUserID(),\" newInstanceInfo:\"),e),this.logout(1).then((function(){t.emitOuterEvent(oo.KICKED_OUT,{type:ro.KICKED_OUT_MULT_DEVICE}),t._moduleManager.reset()}))}},{key:\"onUserSigExpired\",value:function(){new lg(fg).setNetworkType(this.getNetworkType()).setMessage(ro.KICKED_OUT_USERSIG_EXPIRED).end(!0),Ki.warn(\"\".concat(this._className,\".onUserSigExpired: userSig 签名过期被踢下线\")),0!==this.getModule(Xc).getStatusInstanceID()&&(this.emitOuterEvent(oo.KICKED_OUT,{type:ro.KICKED_OUT_USERSIG_EXPIRED}),this._moduleManager.reset())}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0}}]),n}(dl);function Qv(){return null}var Zv=function(){function e(t){o(this,e),this._moduleManager=t,this._className=\"StorageModule\",this._storageQueue=new Map,this._errorTolerantHandle()}return a(e,[{key:\"_errorTolerantHandle\",value:function(){ai||!Ji(window)&&!Ji(window.localStorage)||(this.getItem=Qv,this.setItem=Qv,this.removeItem=Qv,this.clear=Qv)}},{key:\"onCheckTimer\",value:function(e){if(e%20==0){if(0===this._storageQueue.size)return;this._doFlush()}}},{key:\"_doFlush\",value:function(){try{var e,t=S(this._storageQueue);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],r=n[1];this._setStorageSync(this._getKey(o),r)}}catch(a){t.e(a)}finally{t.f()}this._storageQueue.clear()}catch(cy){Ki.warn(\"\".concat(this._className,\"._doFlush error:\"),cy)}}},{key:\"_getPrefix\",value:function(){var e=this._moduleManager.getModule(Xc);return\"TIM_\".concat(e.getSDKAppID(),\"_\").concat(e.getUserID(),\"_\")}},{key:\"_getKey\",value:function(e){return\"\".concat(this._getPrefix()).concat(e)}},{key:\"getItem\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;return this._getStorageSync(n)}catch(cy){return Ki.warn(\"\".concat(this._className,\".getItem error:\"),cy),{}}}},{key:\"setItem\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n){var r=o?this._getKey(e):e;this._setStorageSync(r,t)}else this._storageQueue.set(e,t)}},{key:\"clear\",value:function(){try{ai?ii.clearStorageSync():localStorage&&localStorage.clear()}catch(cy){Ki.warn(\"\".concat(this._className,\".clear error:\"),cy)}}},{key:\"removeItem\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;this._removeStorageSync(n)}catch(cy){Ki.warn(\"\".concat(this._className,\".removeItem error:\"),cy)}}},{key:\"getSize\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"b\";try{var o={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(o,\"leftSize\",{enumerable:!0,get:function(){return o.limitSize-o.size}}),ai&&(o.limitSize=1024*ii.getStorageInfoSync().limitSize),e)o.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(ai){var r=ii.getStorageInfoSync(),a=r.keys;a.forEach((function(e){o.size+=JSON.stringify(t._getStorageSync(e)).length+t._getKey(e).length}))}else if(localStorage)for(var s in localStorage)localStorage.hasOwnProperty(s)&&(o.size+=localStorage.getItem(s).length+s.length);return this._convertUnit(o)}catch(cy){Ki.warn(\"\".concat(this._className,\" error:\"),cy)}}},{key:\"_convertUnit\",value:function(e){var t={},n=e.unit;for(var o in t.unit=n,e)\"number\"==typeof e[o]&&(\"kb\"===n.toLowerCase()?t[o]=Math.round(e[o]/1024):\"mb\"===n.toLowerCase()?t[o]=Math.round(e[o]/1024/1024):t[o]=e[o]);return t}},{key:\"_setStorageSync\",value:function(e,t){ai?oi?my.setStorageSync({key:e,data:t}):ii.setStorageSync(e,t):localStorage&&localStorage.setItem(e,JSON.stringify(t))}},{key:\"_getStorageSync\",value:function(e){return ai?oi?my.getStorageSync({key:e}).data:ii.getStorageSync(e):localStorage?JSON.parse(localStorage.getItem(e)):{}}},{key:\"_removeStorageSync\",value:function(e){ai?oi?my.removeStorageSync({key:e}):ii.removeStorageSync(e):localStorage&&localStorage.removeItem(e)}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._doFlush()}}]),e}(),eM=function(){function e(t){o(this,e),this._className=\"SSOLogBody\",this._report=[]}return a(e,[{key:\"pushIn\",value:function(e){Ki.debug(\"\".concat(this._className,\".pushIn\"),this._report.length,e),this._report.push(e)}},{key:\"backfill\",value:function(e){var t;zi(e)&&0!==e.length&&(Ki.debug(\"\".concat(this._className,\".backfill\"),this._report.length,e.length),(t=this._report).unshift.apply(t,v(e)))}},{key:\"getLogsNumInMemory\",value:function(){return this._report.length}},{key:\"isEmpty\",value:function(){return 0===this._report.length}},{key:\"_reset\",value:function(){this._report.length=0,this._report=[]}},{key:\"getLogsInMemory\",value:function(){var e=this._report.slice();return this._reset(),e}}]),e}(),tM=function(e){var t=e.getModule(Xc);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:Ui()}},nM=function(e){i(r,e);var n=_(r);function r(e){var t;o(this,r),(t=n.call(this,e))._className=\"EventStatModule\",t.TAG=\"im-ssolog-event\",t._reportBody=new eM,t.MIN_THRESHOLD=20,t.MAX_THRESHOLD=100,t.WAITING_TIME=6e4,t.REPORT_LEVEL=[4,5,6],t.REPORT_SDKAPPID_BLACKLIST=[],t.REPORT_TINYID_WHITELIST=[],t._lastReportTime=Date.now();var a=t.getInnerEmitterInstance();return a.on(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED,t._onLoginSuccess,h(t)),a.on(gv.CLOUD_CONFIG_UPDATED,t._onCloudConfigUpdated,h(t)),t}return a(r,[{key:\"reportAtOnce\",value:function(){Ki.debug(\"\".concat(this._className,\".reportAtOnce\")),this._report()}},{key:\"_onLoginSuccess\",value:function(){var e=this,t=this.getModule(Qc),n=t.getItem(this.TAG,!1);!Ou(n)&&Qi(n.forEach)&&(Ki.log(\"\".concat(this._className,\"._onLoginSuccess get ssolog in storage, count:\").concat(n.length)),n.forEach((function(t){e._reportBody.pushIn(t)})),t.removeItem(this.TAG,!1))}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"evt_rpt_threshold\"),t=this.getCloudConfig(\"evt_rpt_waiting\"),n=this.getCloudConfig(\"evt_rpt_level\"),o=this.getCloudConfig(\"evt_rpt_sdkappid_bl\"),r=this.getCloudConfig(\"evt_rpt_tinyid_wl\");Ji(e)||(this.MIN_THRESHOLD=Number(e)),Ji(t)||(this.WAITING_TIME=Number(t)),Ji(n)||(this.REPORT_LEVEL=n.split(\",\").map((function(e){return Number(e)}))),Ji(o)||(this.REPORT_SDKAPPID_BLACKLIST=o.split(\",\").map((function(e){return Number(e)}))),Ji(r)||(this.REPORT_TINYID_WHITELIST=r.split(\",\"))}},{key:\"pushIn\",value:function(e){e instanceof lg&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:\"onCheckTimer\",value:function(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}},{key:\"_filterLogs\",value:function(e){var t=this,n=this.getModule(Xc),o=n.getSDKAppID(),r=n.getTinyID();return Nu(this.REPORT_SDKAPPID_BLACKLIST,o)&&!Cu(this.REPORT_TINYID_WHITELIST,r)?[]:e.filter((function(e){return t.REPORT_LEVEL.includes(e.level)}))}},{key:\"_report\",value:function(){var e=this;if(!this._reportBody.isEmpty()){var n=this._reportBody.getLogsInMemory(),o=this._filterLogs(n);if(0!==o.length){var r={header:tM(this),event:o};this.request({protocolName:kd,requestData:t({},r)}).then((function(){e._lastReportTime=Date.now()})).catch((function(t){Ki.warn(\"\".concat(e._className,\".report failed. networkType:\").concat(e.getNetworkType(),\" error:\"),t),e._reportBody.backfill(n),e._reportBody.getLogsNumInMemory()>e.MAX_THRESHOLD&&e._flushAtOnce()}))}else this._lastReportTime=Date.now()}}},{key:\"_flushAtOnce\",value:function(){var e=this.getModule(Qc),t=e.getItem(this.TAG,!1),n=this._reportBody.getLogsInMemory();if(Ou(t))Ki.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var o=n.concat(t);o.length>this.MAX_THRESHOLD&&(o=o.slice(0,this.MAX_THRESHOLD)),Ki.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}]),r}(dl),oM=\"none\",rM=\"online\",aM=function(){function e(t){o(this,e),this._moduleManager=t,this._networkType=\"\",this._className=\"NetMonitorModule\",this.MAX_WAIT_TIME=3e3}return a(e,[{key:\"start\",value:function(){var e=this;if(ai){ii.getNetworkType({success:function(t){e._networkType=t.networkType,t.networkType===oM?Ki.warn(\"\".concat(e._className,\".start no network, please check!\")):Ki.info(\"\".concat(e._className,\".start networkType:\").concat(t.networkType))}});var t=this._onNetworkStatusChange.bind(this);ii.offNetworkStatusChange&&(ri||ti?ii.offNetworkStatusChange(t):ii.offNetworkStatusChange()),ii.onNetworkStatusChange(t)}else this._networkType=rM}},{key:\"_onNetworkStatusChange\",value:function(e){e.isConnected?(Ki.info(\"\".concat(this._className,\"._onNetworkStatusChange previousNetworkType:\").concat(this._networkType,\" currentNetworkType:\").concat(e.networkType)),this._networkType!==e.networkType&&this._moduleManager.getModule(sl).reConnect()):Ki.warn(\"\".concat(this._className,\"._onNetworkStatusChange no network, please check!\"));this._networkType=e.networkType}},{key:\"probe\",value:function(){var e=this;return new Promise((function(t,n){if(ai)ii.getNetworkType({success:function(n){e._networkType=n.networkType,n.networkType===oM?(Ki.warn(\"\".concat(e._className,\".probe no network, please check!\")),t([!1,n.networkType])):(Ki.info(\"\".concat(e._className,\".probe networkType:\").concat(n.networkType)),t([!0,n.networkType]))}});else if(window&&window.fetch)fetch(\"\".concat(pu(),\"//web.sdk.qcloud.com/im/assets/speed.xml?random=\").concat(Math.random())).then((function(e){e.ok?t([!0,rM]):t([!1,oM])})).catch((function(e){t([!1,oM])}));else{var o=new XMLHttpRequest,r=setTimeout((function(){Ki.warn(\"\".concat(e._className,\".probe fetch timeout. Probably no network, please check!\")),o.abort(),e._networkType=oM,t([!1,oM])}),e.MAX_WAIT_TIME);o.onreadystatechange=function(){4===o.readyState&&(clearTimeout(r),200===o.status||304===o.status?(this._networkType=rM,t([!0,rM])):(Ki.warn(\"\".concat(this.className,\".probe fetch status:\").concat(o.status,\". Probably no network, please check!\")),this._networkType=oM,t([!1,oM])))},o.open(\"GET\",\"\".concat(pu(),\"//web.sdk.qcloud.com/im/assets/speed.xml?random=\").concat(Math.random())),o.send()}}))}},{key:\"getNetworkType\",value:function(){return this._networkType}}]),e}(),sM=A((function(e){var t=Object.prototype.hasOwnProperty,n=\"~\";function o(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,o,a,s){if(\"function\"!=typeof o)throw new TypeError(\"The listener must be a function\");var i=new r(o,a||e,s),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],i]:e._events[u].push(i):(e._events[u]=i,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function i(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),i.prototype.eventNames=function(){var e,o,r=[];if(0===this._eventsCount)return r;for(o in e=this._events)t.call(e,o)&&r.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},i.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,a=o.length,s=new Array(a);r<a;r++)s[r]=o[r].fn;return s},i.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},i.prototype.emit=function(e,t,o,r,a,s){var i=n?n+e:e;if(!this._events[i])return!1;var u,c,l=this._events[i],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,o),!0;case 4:return l.fn.call(l.context,t,o,r),!0;case 5:return l.fn.call(l.context,t,o,r,a),!0;case 6:return l.fn.call(l.context,t,o,r,a,s),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,g=l.length;for(c=0;c<g;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,o);break;case 4:l[c].fn.call(l[c].context,t,o,r);break;default:if(!u)for(p=1,u=new Array(d-1);p<d;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},i.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},i.prototype.removeListener=function(e,t,o,r){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var i=this._events[a];if(i.fn)i.fn!==t||r&&!i.once||o&&i.context!==o||s(this,a);else{for(var u=0,c=[],l=i.length;u<l;u++)(i[u].fn!==t||r&&!i[u].once||o&&i[u].context!==o)&&c.push(i[u]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=n,i.EventEmitter=i,e.exports=i})),iM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"BigDataChannelModule\",r.FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},r._bdh_download_server=\"grouptalk.c2c.qq.com\",r._BDHBizID=10001,r._authKey=\"\",r._expireTime=0,r.getInnerEmitterInstance().on(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED,r._getAuthKey,h(r)),r}return a(n,[{key:\"_getAuthKey\",value:function(){var e=this;this.request({protocolName:_l}).then((function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))}))}},{key:\"_isFromOlderVersion\",value:function(e){return!(!e.content||2===e.content.downloadFlag)}},{key:\"parseElements\",value:function(e,t){if(!zi(e)||!t)return[];for(var n=[],o=null,r=0;r<e.length;r++)o=e[r],this._needParse(o)?n.push(this._parseElement(o,t)):n.push(e[r]);return n}},{key:\"_needParse\",value:function(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==ro.MSG_AUDIO&&e.type!==ro.MSG_FILE&&e.type!==ro.MSG_VIDEO)}},{key:\"_parseElement\",value:function(e,t){switch(e.type){case ro.MSG_AUDIO:return this._parseAudioElement(e,t);case ro.MSG_FILE:return this._parseFileElement(e,t);case ro.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:\"_parseAudioElement\",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:\"_parseFileElement\",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:\"_parseVideoElement\",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:\"_genAudioUrl\",value:function(e,t){if(\"\"===this._authKey)return Ki.warn(\"\".concat(this._className,\"._genAudioUrl no authKey!\")),\"\";var n=this.getModule(Xc).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(n,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.SOUND,\"&openid=\").concat(t,\"&ver=0\")}},{key:\"_genFileUrl\",value:function(e,t,n){if(\"\"===this._authKey)return Ki.warn(\"\".concat(this._className,\"._genFileUrl no authKey!\")),\"\";n||(n=\"\".concat(Math.floor(1e5*Math.random()),\"-\").concat(Date.now()));var o=this.getModule(Xc).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(o,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.FILE,\"&openid=\").concat(t,\"&ver=0&filename=\").concat(encodeURIComponent(n))}},{key:\"_genVideoUrl\",value:function(e,t){if(\"\"===this._authKey)return Ki.warn(\"\".concat(this._className,\"._genVideoUrl no authKey!\")),\"\";var n=this.getModule(Xc).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(n,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.VIDEO,\"&openid=\").concat(t,\"&ver=0\")}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._authKey=\"\",this.expireTime=0}}]),n}(dl),uM=function(e){i(r,e);var n=_(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._className=\"UploadModule\",t.TIMUploadPlugin=null,t.timUploadPlugin=null,t.COSSDK=null,t._cosUploadMethod=null,t.expiredTimeLimit=600,t.appid=0,t.bucketName=\"\",t.ciUrl=\"\",t.directory=\"\",t.downloadUrl=\"\",t.uploadUrl=\"\",t.region=\"ap-shanghai\",t.cos=null,t.cosOptions={secretId:\"\",secretKey:\"\",sessionToken:\"\",expiredTime:0},t.uploadFileType=\"\",t.duration=900,t.tryCount=0,t.getInnerEmitterInstance().on(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED,t._init,h(t)),t}return a(r,[{key:\"_init\",value:function(){var e=\"\".concat(this._className,\"._init\"),t=this.getModule(ol);if(this.TIMUploadPlugin=t.getPlugin(\"tim-upload-plugin\"),this.TIMUploadPlugin)this._initUploaderMethod();else{var n=ai?\"cos-wx-sdk\":\"cos-js-sdk\";this.COSSDK=t.getPlugin(n),this.COSSDK?(this._getAuthorizationKey(),Ki.warn(\"\".concat(e,\" v2.9.2起推荐使用 tim-upload-plugin 代替 \").concat(n,\"，上传更快更安全。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\"))):Ki.warn(\"\".concat(e,\" 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\"))}}},{key:\"_getAuthorizationKey\",value:function(){var e=this,t=new lg(Ig),n=Math.ceil(Date.now()/1e3);this.request({protocolName:Ed,requestData:{duration:this.expiredTimeLimit}}).then((function(o){var r=o.data;Ki.log(\"\".concat(e._className,\"._getAuthorizationKey ok. data:\"),r);var a=r.expiredTime-n;t.setMessage(\"requestId:\".concat(r.requestId,\" requestTime:\").concat(n,\" expiredTime:\").concat(r.expiredTime,\" diff:\").concat(a,\"s\")).setNetworkType(e.getNetworkType()).end(),!ai&&r.region&&(e.region=r.region),e.appid=r.appid,e.bucketName=r.bucketName,e.ciUrl=r.ciUrl,e.directory=r.directory,e.downloadUrl=r.downloadUrl,e.uploadUrl=r.uploadUrl,e.cosOptions={secretId:r.secretId,secretKey:r.secretKey,sessionToken:r.sessionToken,expiredTime:r.expiredTime},Ki.log(\"\".concat(e._className,\"._getAuthorizationKey ok. region:\").concat(e.region,\" bucketName:\").concat(e.bucketName)),e._initUploaderMethod()})).catch((function(n){e.probeNetwork().then((function(e){var o=m(e,2),r=o[0],a=o[1];t.setError(n,r,a).end()})),Ki.warn(\"\".concat(e._className,\"._getAuthorizationKey failed. error:\"),n)}))}},{key:\"_getCosPreSigUrl\",value:function(e){var t=this,n=\"\".concat(this._className,\"._getCosPreSigUrl\"),o=Math.ceil(Date.now()/1e3),r=new lg(Tg);return this.request({protocolName:Ad,requestData:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then((function(e){t.tryCount=0;var a=e.data||{},s=a.expiredTime-o;return Ki.log(\"\".concat(n,\" ok. data:\"),a),r.setMessage(\"requestId:\".concat(a.requestId,\" expiredTime:\").concat(a.expiredTime,\" diff:\").concat(s,\"s\")).setNetworkType(t.getNetworkType()).end(),a})).catch((function(o){return-1===o.code&&(o.code=Pd.COS_GET_SIG_FAIL),t.probeNetwork().then((function(e){var t=m(e,2),n=t[0],a=t[1];r.setError(o,n,a).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),o),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,Ym({code:Pd.COS_GET_SIG_FAIL,message:jd}))}))}},{key:\"_initUploaderMethod\",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,n){e.timUploadPlugin.uploadFile(t,n)});this.appid&&(this.cos=ai?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=ai?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)})}},{key:\"onCheckTimer\",value:function(e){this.COSSDK&&(this.TIMUploadPlugin||this.isLoggedIn()&&e%60==0&&Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey())}},{key:\"_getAuthorization\",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:\"upload\",value:function(e){if(!0===e.getRelayFlag())return Promise.resolve();var t=this.getModule(ll);switch(e.type){case ro.MSG_IMAGE:return t.addTotalCount(og),this._uploadImage(e);case ro.MSG_FILE:return t.addTotalCount(og),this._uploadFile(e);case ro.MSG_AUDIO:return t.addTotalCount(og),this._uploadAudio(e);case ro.MSG_VIDEO:return t.addTotalCount(og),this._uploadVideo(e);default:return Promise.resolve()}}},{key:\"_uploadImage\",value:function(e){var n=this.getModule(Hc),o=e.getElements()[0],r=n.getMessageOptionByID(e.ID);return this.doUploadImage({file:r.payload.file,to:r.to,onProgress:function(e){if(o.updatePercent(e),Qi(r.onProgress))try{r.onProgress(e)}catch(t){return Ym({code:Pd.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Jd})}}}).then((function(n){var r=n.location,a=n.fileType,s=n.fileSize,i=n.width,u=n.height,c=gu(r);o.updateImageFormat(a);var l=Su({originUrl:c,originWidth:i,originHeight:u,min:198}),d=Su({originUrl:c,originWidth:i,originHeight:u,min:720});return o.updateImageInfoArray([{size:s,url:c,width:i,height:u},t({},d),t({},l)]),e}))}},{key:\"_uploadFile\",value:function(e){var t=this.getModule(Hc),n=e.getElements()[0],o=t.getMessageOptionByID(e.ID);return this.doUploadFile({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),Qi(o.onProgress))try{o.onProgress(e)}catch(t){return Ym({code:Pd.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Jd})}}}).then((function(t){var o=t.location,r=gu(o);return n.updateFileUrl(r),e}))}},{key:\"_uploadAudio\",value:function(e){var t=this.getModule(Hc),n=e.getElements()[0],o=t.getMessageOptionByID(e.ID);return this.doUploadAudio({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),Qi(o.onProgress))try{o.onProgress(e)}catch(t){return Ym({code:Pd.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Jd})}}}).then((function(t){var o=t.location,r=gu(o);return n.updateAudioUrl(r),e}))}},{key:\"_uploadVideo\",value:function(e){var t=this.getModule(Hc),n=e.getElements()[0],o=t.getMessageOptionByID(e.ID);return this.doUploadVideo({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),Qi(o.onProgress))try{o.onProgress(e)}catch(t){return Ym({code:Pd.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Jd})}}}).then((function(t){var o=gu(t.location);return n.updateVideoUrl(o),e}))}},{key:\"doUploadImage\",value:function(e){if(!e.file)return Ym({code:Pd.MESSAGE_IMAGE_SELECT_FILE_FIRST,message:Zd});var t=this._checkImageType(e.file);if(!0!==t)return t;var n=this._checkImageSize(e.file);if(!0!==n)return n;var o=null;return this._setUploadFileType(mv),this.uploadByCOS(e).then((function(e){return o=e,t=\"https://\".concat(e.location),ai?new Promise((function(e,n){ii.getImageInfo({src:t,success:function(t){e({width:t.width,height:t.height})},fail:function(){e({width:0,height:0})}})})):Mi&&9===yi?Promise.resolve({width:0,height:0}):new Promise((function(e,n){var o=new Image;o.onload=function(){e({width:this.width,height:this.height}),o=null},o.onerror=function(){e({width:0,height:0}),o=null},o.src=t}));var t})).then((function(e){return o.width=e.width,o.height=e.height,Promise.resolve(o)}))}},{key:\"_checkImageType\",value:function(e){var t=\"\";return t=ai?e.url.slice(e.url.lastIndexOf(\".\")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(\".\")+1),fv.indexOf(t.toLowerCase())>=0||Ym({code:Pd.MESSAGE_IMAGE_TYPES_LIMIT,message:ep})}},{key:\"_checkImageSize\",value:function(e){var t=0;return 0===(t=ai?e.size:e.files[0].size)?Ym({code:Pd.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(zd)}):t<20971520||Ym({code:Pd.MESSAGE_IMAGE_SIZE_LIMIT,message:\"\".concat(tp)})}},{key:\"doUploadFile\",value:function(e){var t=null;return e.file?e.file.files[0].size>104857600?Ym(t={code:Pd.MESSAGE_FILE_SIZE_LIMIT,message:cp}):0===e.file.files[0].size?(t={code:Pd.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(zd)},Ym(t)):(this._setUploadFileType(yv),this.uploadByCOS(e)):Ym(t={code:Pd.MESSAGE_FILE_SELECT_FILE_FIRST,message:up})}},{key:\"doUploadVideo\",value:function(e){return e.file.videoFile.size>104857600?Ym({code:Pd.MESSAGE_VIDEO_SIZE_LIMIT,message:\"\".concat(ap)}):0===e.file.videoFile.size?Ym({code:Pd.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(zd)}):-1===_v.indexOf(e.file.videoFile.type)?Ym({code:Pd.MESSAGE_VIDEO_TYPES_LIMIT,message:\"\".concat(sp)}):(this._setUploadFileType(vv),ai?this.handleVideoUpload({file:e.file.videoFile,onProgress:e.onProgress}):si?this.handleVideoUpload(e):void 0)}},{key:\"handleVideoUpload\",value:function(e){var t=this;return new Promise((function(n,o){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){o(new Km({code:Pd.MESSAGE_VIDEO_UPLOAD_FAIL,message:rp}))}))}))}))}},{key:\"doUploadAudio\",value:function(e){return e.file?e.file.size>20971520?Ym(new Km({code:Pd.MESSAGE_AUDIO_SIZE_LIMIT,message:\"\".concat(op)})):0===e.file.size?Ym(new Km({code:Pd.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(zd)})):(this._setUploadFileType(Mv),this.uploadByCOS(e)):Ym(new Km({code:Pd.MESSAGE_AUDIO_UPLOAD_FAIL,message:np}))}},{key:\"uploadByCOS\",value:function(e){var t=this,n=\"\".concat(this._className,\".uploadByCOS\");if(!Qi(this._cosUploadMethod))return Ki.warn(\"\".concat(n,\" 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\")),Ym({code:Pd.COS_UNDETECTED,message:Hd});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var o=new lg(Dg),r=Date.now(),a=ai?e.file:e.file.files[0];return new Promise((function(s,i){var u=ai?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),c=t;t._cosUploadMethod(u,(function(e,u){var l=Object.create(null);if(u){if(e||zi(u.files)&&u.files[0].error){var d=new Km({code:Pd.MESSAGE_FILE_UPLOAD_FAIL,message:ip});return o.setError(d,!0,t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" failed. error:\"),u.files[0].error),403===u.files[0].error.statusCode&&(Ki.warn(\"\".concat(n,\" failed. cos AccessKeyId was invalid, regain auth key!\")),t._getAuthorizationKey()),void i(d)}l.fileName=a.name,l.fileSize=a.size,l.fileType=a.type.slice(a.type.indexOf(\"/\")+1).toLowerCase(),l.location=ai?u.Location:u.files[0].data.Location;var p=Date.now()-r,g=c._formatFileSize(a.size),h=c._formatSpeed(1e3*a.size/p),f=\"size:\".concat(g,\" time:\").concat(p,\"ms speed:\").concat(h);Ki.log(\"\".concat(n,\" success. name:\").concat(a.name,\" \").concat(f)),s(l);var _=t.getModule(ll);return _.addCost(og,p),_.addFileSize(og,a.size),void o.setNetworkType(t.getNetworkType()).setMessage(f).end()}var m=new Km({code:Pd.MESSAGE_FILE_UPLOAD_FAIL,message:ip});o.setError(m,!0,c.getNetworkType()).end(),Ki.warn(\"\".concat(n,\" failed. error:\"),e),403===e.statusCode&&(Ki.warn(\"\".concat(n,\" failed. cos AccessKeyId was invalid, regain auth key!\")),t._getAuthorizationKey()),i(m)}))}))}},{key:\"_uploadWithPreSigUrl\",value:function(e){var t=this,n=\"\".concat(this._className,\"._uploadWithPreSigUrl\"),o=ai?e.file:e.file.files[0];return this._createCosOptionsPreSigUrl(e).then((function(e){return new Promise((function(r,a){var s=new lg(Dg);Ki.time(Jp),t._cosUploadMethod(e,(function(e,i){var u=Object.create(null);if(e||403===i.statusCode){var c=new Km({code:Pd.MESSAGE_FILE_UPLOAD_FAIL,message:ip});return s.setError(c,!0,t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" failed, error:\"),e),void a(c)}var l=i.data.location||\"\";0!==l.indexOf(\"https://\")&&0!==l.indexOf(\"http://\")||(l=l.split(\"//\")[1]),u.fileName=o.name,u.fileSize=o.size,u.fileType=o.type.slice(o.type.indexOf(\"/\")+1).toLowerCase(),u.location=l;var d=Ki.timeEnd(Jp),p=t._formatFileSize(o.size),g=t._formatSpeed(1e3*o.size/d),h=\"size:\".concat(p,\",time:\").concat(d,\"ms,speed:\").concat(g);Ki.log(\"\".concat(n,\" success name:\").concat(o.name,\",\").concat(h)),s.setNetworkType(t.getNetworkType()).setMessage(h).end();var f=t.getModule(ll);f.addCost(og,d),f.addFileSize(og,o.size),r(u)}))}))}))}},{key:\"_formatFileSize\",value:function(e){return e<1024?e+\"B\":e<1048576?Math.floor(e/1024)+\"KB\":Math.floor(e/1048576)+\"MB\"}},{key:\"_formatSpeed\",value:function(e){return e<=1048576?ku(e/1024,1)+\"KB/s\":ku(e/1048576,1)+\"MB/s\"}},{key:\"_createCosOptionsWeb\",value:function(e){var t=this.getMyUserID(),n=this._genFileName(t,e.to,e.file.files[0].name);return{files:[{Bucket:\"\".concat(this.bucketName,\"-\").concat(this.appid),Region:this.region,Key:\"\".concat(this.directory,\"/\").concat(n),Body:e.file.files[0]}],SliceSize:1048576,onProgress:function(t){if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Ki.warn(\"onProgress callback error:\",n)}},onFileFinish:function(e,t,n){}}}},{key:\"_createCosOptionsWXMiniApp\",value:function(e){var t=this.getMyUserID(),n=this._genFileName(t,e.to,e.file.name),o=e.file.url;return{Bucket:\"\".concat(this.bucketName,\"-\").concat(this.appid),Region:this.region,Key:\"\".concat(this.directory,\"/\").concat(n),FilePath:o,onProgress:function(t){if(Ki.log(JSON.stringify(t)),\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Ki.warn(\"onProgress callback error:\",n)}}}}},{key:\"_createCosOptionsPreSigUrl\",value:function(e){var t=this,n=\"\",o=\"\",r=0;return ai?(n=this._genFileName(e.file.name),o=e.file.url,r=1):(n=this._genFileName(\"\".concat(iu(999999))),o=e.file.files[0],r=0),this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:n,uploadMethod:r,duration:this.duration}).then((function(r){var a=r.uploadUrl,s=r.downloadUrl;return{url:a,fileType:t.uploadFileType,fileName:n,resources:o,downloadUrl:s,onProgress:function(t){if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Ki.warn(\"onProgress callback error:\",n),Ki.error(n)}}}}))}},{key:\"_genFileName\",value:function(e){return\"\".concat(Tu(),\"-\").concat(e)}},{key:\"_setUploadFileType\",value:function(e){this.uploadFileType=e}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\"))}}]),r}(dl),cM=[\"downloadKey\",\"pbDownloadKey\",\"messageList\"],lM=function(){function e(t){o(this,e),this._className=\"MergerMessageHandler\",this._messageModule=t}return a(e,[{key:\"uploadMergerMessage\",value:function(e,t){var n=this;Ki.debug(\"\".concat(this._className,\".uploadMergerMessage message:\"),e,\"messageBytes:\".concat(t));var o=e.payload.messageList,r=o.length,a=new lg(bg);return this._messageModule.request({protocolName:Rd,requestData:{messageList:o}}).then((function(e){Ki.debug(\"\".concat(n._className,\".uploadMergerMessage ok. response:\"),e.data);var o=e.data,s=o.pbDownloadKey,i=o.downloadKey,u={pbDownloadKey:s,downloadKey:i,messageNumber:r};return a.setNetworkType(n._messageModule.getNetworkType()).setMessage(\"\".concat(r,\"-\").concat(t,\"-\").concat(i)).end(),u})).catch((function(e){throw Ki.warn(\"\".concat(n._className,\".uploadMergerMessage failed. error:\"),e),n._messageModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),e}))}},{key:\"downloadMergerMessage\",value:function(e){var n=this;Ki.debug(\"\".concat(this._className,\".downloadMergerMessage message:\"),e);var o=e.payload.downloadKey,r=new lg(wg);return r.setMessage(\"downloadKey:\".concat(o)),this._messageModule.request({protocolName:bd,requestData:{downloadKey:o}}).then((function(o){if(Ki.debug(\"\".concat(n._className,\".downloadMergerMessage ok. response:\"),o.data),Qi(e.clearElement)){var a=e.payload,s=(a.downloadKey,a.pbDownloadKey,a.messageList,g(a,cM));e.clearElement(),e.setElement({type:e.type,content:t({messageList:o.data.messageList},s)})}else{var i=[];o.data.messageList.forEach((function(e){if(!Ou(e)){var t=new Rm(e);i.push(t)}})),e.payload.messageList=i,e.payload.downloadKey=\"\",e.payload.pbDownloadKey=\"\"}return r.setNetworkType(n._messageModule.getNetworkType()).end(),e})).catch((function(e){throw Ki.warn(\"\".concat(n._className,\".downloadMergerMessage failed. key:\").concat(o,\" error:\"),e),n._messageModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),e}))}},{key:\"createMergerMessagePack\",value:function(e,t,n){return e.conversationType===ro.CONV_C2C?this._createC2CMergerMessagePack(e,t,n):this._createGroupMergerMessagePack(e,t,n)}},{key:\"_createC2CMergerMessagePack\",value:function(e,t,n){var o=null;t&&(t.offlinePushInfo&&(o=t.offlinePushInfo),!0===t.onlineUserOnly&&(o?o.disablePush=!0:o={disablePush:!0}));var r=\"\";Yi(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var a=n.pbDownloadKey,s=n.downloadKey,i=n.messageNumber,u=e.payload,c=u.title,l=u.abstractList,d=u.compatibleText,p=this._messageModule.getModule(Yc);return{protocolName:ml,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:a,downloadKey:s,title:c,abstractList:l,compatibleText:d,messageNumber:i}}],cloudCustomData:r,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:p&&p.isOnlineMessage(e,t)?0:void 0,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0}}}},{key:\"_createGroupMergerMessagePack\",value:function(e,t,n){var o=null;t&&t.offlinePushInfo&&(o=t.offlinePushInfo);var r=\"\";Yi(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var a=n.pbDownloadKey,s=n.downloadKey,i=n.messageNumber,u=e.payload,c=u.title,l=u.abstractList,d=u.compatibleText,p=this._messageModule.getModule($c);return{protocolName:vl,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:a,downloadKey:s,title:c,abstractList:l,compatibleText:d,messageNumber:i}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:r,onlineOnlyFlag:p&&p.isOnlineMessage(e,t)?1:0,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0}}}}]),e}(),dM={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MESSAGE_SEND_FAIL:2100},pM=[Pd.MESSAGE_ONPROGRESS_FUNCTION_ERROR,Pd.MESSAGE_IMAGE_SELECT_FILE_FIRST,Pd.MESSAGE_IMAGE_TYPES_LIMIT,Pd.MESSAGE_FILE_IS_EMPTY,Pd.MESSAGE_IMAGE_SIZE_LIMIT,Pd.MESSAGE_FILE_SELECT_FILE_FIRST,Pd.MESSAGE_FILE_SIZE_LIMIT,Pd.MESSAGE_VIDEO_SIZE_LIMIT,Pd.MESSAGE_VIDEO_TYPES_LIMIT,Pd.MESSAGE_AUDIO_UPLOAD_FAIL,Pd.MESSAGE_AUDIO_SIZE_LIMIT,Pd.COS_UNDETECTED];var gM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"MessageModule\",r._messageOptionsMap=new Map,r._mergerMessageHandler=new lM(h(r)),r}return a(n,[{key:\"createTextMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new Gm(e),o=\"string\"==typeof e.payload?e.payload:e.payload.text,r=new Qh({text:o}),a=this._getNickAndAvatarByUserID(t);return n.setElement(r),n.setNickAndAvatar(a),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"createImageMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new Gm(e);if(ai){var o=e.payload.file;if(Hi(o))return void Ki.warn(\"小程序环境下调用 createImageMessage 接口时，payload.file 不支持传入 File 对象\");var r=o.tempFilePaths[0],a={url:r,name:r.slice(r.lastIndexOf(\"/\")+1),size:o.tempFiles&&o.tempFiles[0].size||1,type:r.slice(r.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=a}else if(si)if(Hi(e.payload.file)){var s=e.payload.file;e.payload.file={files:[s]}}else if(Wi(e.payload.file)&&\"undefined\"!=typeof uni){var i=e.payload.file.tempFiles[0];e.payload.file={files:[i]}}var u=new _m({imageFormat:um.IMAGE_FORMAT.UNKNOWN,uuid:this._generateUUID(),file:e.payload.file}),c=this._getNickAndAvatarByUserID(t);return n.setElement(u),n.setNickAndAvatar(c),n.setNameCard(this._getNameCardByGroupID(n)),this._messageOptionsMap.set(n.ID,e),n}},{key:\"createAudioMessage\",value:function(e){if(ai){var t=e.payload.file;if(ai){var n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\"/\")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=n}var o=this.getMyUserID();e.currentUser=o;var r=new Gm(e),a=new vm({second:Math.floor(t.duration/1e3),size:t.fileSize,url:t.tempFilePath,uuid:this._generateUUID()}),s=this._getNickAndAvatarByUserID(o);return r.setElement(a),r.setNickAndAvatar(s),r.setNameCard(this._getNameCardByGroupID(r)),this._messageOptionsMap.set(r.ID,e),r}Ki.warn(\"createAudioMessage 目前只支持小程序环境下发语音消息\")}},{key:\"createVideoMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.payload.file.thumbUrl=\"https://web.sdk.qcloud.com/im/assets/images/transparent.png\",e.payload.file.thumbSize=1668;var n={};if(ai){if(oi)return void Ki.warn(\"createVideoMessage 不支持在支付宝小程序环境下使用\");if(Hi(e.payload.file))return void Ki.warn(\"小程序环境下调用 createVideoMessage 接口时，payload.file 不支持传入 File 对象\");var o=e.payload.file;n.url=o.tempFilePath,n.name=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(\"/\")+1),n.size=o.size,n.second=o.duration,n.type=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()}else if(si){if(Hi(e.payload.file)){var r=e.payload.file;e.payload.file.files=[r]}else if(Wi(e.payload.file)&&\"undefined\"!=typeof uni){var a=e.payload.file.tempFile;e.payload.file.files=[a]}var s=e.payload.file;n.url=window.URL.createObjectURL(s.files[0]),n.name=s.files[0].name,n.size=s.files[0].size,n.second=s.files[0].duration||0,n.type=s.files[0].type.split(\"/\")[1]}e.payload.file.videoFile=n;var i=new Gm(e),u=new Lm({videoFormat:n.type,videoSecond:ku(n.second,0),videoSize:n.size,remoteVideoUrl:\"\",videoUrl:n.url,videoUUID:this._generateUUID(),thumbUUID:this._generateUUID(),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(\".\")+1).toLowerCase()}),c=this._getNickAndAvatarByUserID(t);return i.setElement(u),i.setNickAndAvatar(c),i.setNameCard(this._getNameCardByGroupID(i)),this._messageOptionsMap.set(i.ID,e),i}},{key:\"createCustomMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new Gm(e),o=new Cm({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"createFaceMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new Gm(e),o=new mm(e.payload),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"createMergerMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=this._getNickAndAvatarByUserID(t),o=new Gm(e),r=new bm(e.payload);return o.setElement(r),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),o.setRelayFlag(!0),o}},{key:\"createForwardMessage\",value:function(e){var t=e.to,n=e.conversationType,o=e.priority,r=e.payload,a=this.getMyUserID(),s=this._getNickAndAvatarByUserID(a);if(r.type===ro.MSG_GRP_TIP)return Ym(new Km({code:Pd.MESSAGE_FORWARD_TYPE_INVALID,message:hp}));var i={to:t,conversationType:n,conversationID:\"\".concat(n).concat(t),priority:o,isPlaceMessage:0,status:Ec.UNSEND,currentUser:a,cloudCustomData:e.cloudCustomData||r.cloudCustomData||\"\"},u=new Gm(i);return u.setElement(r.getElements()[0]),u.setNickAndAvatar(s),u.setNameCard(this._getNameCardByGroupID(r)),u.setRelayFlag(!0),u}},{key:\"downloadMergerMessage\",value:function(e){return this._mergerMessageHandler.downloadMergerMessage(e)}},{key:\"createFileMessage\",value:function(e){if(!ai){if(si)if(Hi(e.payload.file)){var t=e.payload.file;e.payload.file={files:[t]}}else if(Wi(e.payload.file)&&\"undefined\"!=typeof uni){var n=e.payload.file.tempFiles[0];e.payload.file={files:[n]}}var o=this.getMyUserID();e.currentUser=o;var r=new Gm(e),a=new Nm({uuid:this._generateUUID(),file:e.payload.file}),s=this._getNickAndAvatarByUserID(o);return r.setElement(a),r.setNickAndAvatar(s),r.setNameCard(this._getNameCardByGroupID(r)),this._messageOptionsMap.set(r.ID,e),r}Ki.warn(\"小程序目前不支持选择文件， createFileMessage 接口不可用！\")}},{key:\"_onCannotFindModule\",value:function(){return Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"sendMessageInstance\",value:function(e,t){var n,o=this,r=null;switch(e.conversationType){case ro.CONV_C2C:if(!(r=this.getModule(Yc)))return this._onCannotFindModule();break;case ro.CONV_GROUP:if(!(r=this.getModule($c)))return this._onCannotFindModule();break;default:return Ym({code:Pd.MESSAGE_SEND_INVALID_CONVERSATION_TYPE,message:Wd})}var a=this.getModule(nl),s=this.getModule($c);return a.upload(e).then((function(){o._getSendMessageSpecifiedKey(e)===ng&&o.getModule(ll).addSuccessCount(og);return s.guardForAVChatRoom(e).then((function(){if(!e.isSendable())return Ym({code:Pd.MESSAGE_FILE_URL_IS_EMPTY,message:lp});o._addSendMessageTotalCount(e),n=Date.now();var a=function(e){var t=\"utf-8\";si&&document&&(t=document.charset.toLowerCase());var n,o,r=0;if(o=e.length,\"utf-8\"===t||\"utf8\"===t)for(var a=0;a<o;a++)(n=e.codePointAt(a))<=127?r+=1:n<=2047?r+=2:n<=65535?r+=3:(r+=4,a++);else if(\"utf-16\"===t||\"utf16\"===t)for(var s=0;s<o;s++)(n=e.codePointAt(s))<=65535?r+=2:(r+=4,s++);else r=e.replace(/[^\\\\x00-\\\\xff]/g,\"aa\").length;return r}(JSON.stringify(e));return e.type===ro.MSG_MERGER&&a>7e3?o._mergerMessageHandler.uploadMergerMessage(e,a).then((function(n){var r=o._mergerMessageHandler.createMergerMessagePack(e,t,n);return o.request(r)})):(o.getModule(Jc).setMessageRandom(e),e.conversationType===ro.CONV_C2C||e.conversationType===ro.CONV_GROUP?r.sendMessage(e,t):void 0)})).then((function(a){var s=a.data,i=s.time,u=s.sequence;o._addSendMessageSuccessCount(e,n),o._messageOptionsMap.delete(e.ID);var c=o.getModule(Jc);e.status=Ec.SUCCESS,e.time=i;var l=!1;if(e.conversationType===ro.CONV_GROUP)e.sequence=u,e.generateMessageID(o.getMyUserID());else if(e.conversationType===ro.CONV_C2C){var d=c.getLatestMessageSentByMe(e.conversationID);if(d){var p=d.nick,g=d.avatar;p===e.nick&&g===e.avatar||(l=!0)}}return c.appendToMessageList(e),l&&c.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),r.isOnlineMessage(e,t)?e.setOnlineOnlyFlag(!0):c.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:e.conversationType,subType:e.conversationSubType,lastMessage:e}]}),e.getRelayFlag()||\"TIMImageElem\"!==e.type||Eu(e.payload.imageInfoArray),Pm({message:e})}))})).catch((function(t){return o._onSendMessageFailed(e,t)}))}},{key:\"_onSendMessageFailed\",value:function(e,t){e.status=Ec.FAIL,this.getModule(Jc).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new lg(Sg);return n.setMessage(\"tjg_id:\".concat(this.generateTjgID(e),\" type:\").concat(e.type,\" from:\").concat(e.from,\" to:\").concat(e.to)),this.probeNetwork().then((function(e){var o=m(e,2),r=o[0],a=o[1];n.setError(t,r,a).end()})),Ki.error(\"\".concat(this._className,\"._onSendMessageFailed error:\"),t),Ym(new Km({code:t&&t.code?t.code:Pd.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:Yd,data:{message:e}}))}},{key:\"_getSendMessageSpecifiedKey\",value:function(e){if([ro.MSG_IMAGE,ro.MSG_AUDIO,ro.MSG_VIDEO,ro.MSG_FILE].includes(e.type))return ng;if(e.conversationType===ro.CONV_C2C)return Zp;if(e.conversationType===ro.CONV_GROUP){var t=this.getModule($c).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return mu(n)?tg:eg}}},{key:\"_addSendMessageTotalCount\",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(ll).addTotalCount(t)}},{key:\"_addSendMessageSuccessCount\",value:function(e,t){var n=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){var r=this.getModule(ll);r.addSuccessCount(o),r.addCost(o,n)}}},{key:\"_addSendMessageFailCountOnUser\",value:function(e,t){var n,o,r=t.code,a=void 0===r?-1:r,s=this.getModule(ll),i=this._getSendMessageSpecifiedKey(e);i===ng&&(n=a,o=!1,pM.includes(n)&&(o=!0),o)?s.addFailedCountOfUserSide(og):function(e){var t=!1;return Object.values(dM).includes(e)&&(t=!0),(e>=120001&&e<=13e4||e>=10100&&e<=10200)&&(t=!0),t}(a)&&i&&s.addFailedCountOfUserSide(i)}},{key:\"resendMessage\",value:function(e){return e.isResend=!0,e.status=Ec.UNSEND,this.sendMessageInstance(e)}},{key:\"revokeMessage\",value:function(e){var t=this,n=null;if(e.conversationType===ro.CONV_C2C){if(!(n=this.getModule(Yc)))return this._onCannotFindModule()}else if(e.conversationType===ro.CONV_GROUP&&!(n=this.getModule($c)))return this._onCannotFindModule();var o=new lg(kg);return o.setMessage(\"tjg_id:\".concat(this.generateTjgID(e),\" type:\").concat(e.type,\" from:\").concat(e.from,\" to:\").concat(e.to)),n.revokeMessage(e).then((function(n){var r=n.data.recallRetList;if(!Ou(r)&&0!==r[0].retCode){var a=new Km({code:r[0].retCode,message:Vm[r[0].retCode]||Xd,data:{message:e}});return o.setCode(a.code).setMoreMessage(a.message).end(),Ym(a)}return Ki.info(\"\".concat(t._className,\".revokeMessage ok. ID:\").concat(e.ID)),e.isRevoked=!0,o.end(),t.getModule(Jc).onMessageRevoked([e]),Pm({message:e})})).catch((function(n){t.probeNetwork().then((function(e){var t=m(e,2),r=t[0],a=t[1];o.setError(n,r,a).end()}));var r=new Km({code:n&&n.code?n.code:Pd.MESSAGE_REVOKE_FAIL,message:n&&n.message?n.message:Xd,data:{message:e}});return Ki.warn(\"\".concat(t._className,\".revokeMessage failed. error:\"),n),Ym(r)}))}},{key:\"deleteMessage\",value:function(e){var t=this,n=null,o=e[0],r=o.conversationID,a=\"\",s=[],i=[];if(o.conversationType===ro.CONV_C2C?(n=this.getModule(Yc),a=r.replace(ro.CONV_C2C,\"\"),e.forEach((function(e){e&&e.status===Ec.SUCCESS&&e.conversationID===r&&(e.getOnlineOnlyFlag()||s.push(\"\".concat(e.sequence,\"_\").concat(e.random,\"_\").concat(e.time)),i.push(e))}))):o.conversationType===ro.CONV_GROUP&&(n=this.getModule($c),a=r.replace(ro.CONV_GROUP,\"\"),e.forEach((function(e){e&&e.status===Ec.SUCCESS&&e.conversationID===r&&(e.getOnlineOnlyFlag()||s.push(\"\".concat(e.sequence)),i.push(e))}))),!n)return this._onCannotFindModule();if(0===s.length)return this._onMessageDeleted(i);s.length>30&&(s=s.slice(0,30),i=i.slice(0,30));var u=new lg(Ng);return u.setMessage(\"to:\".concat(a,\" count:\").concat(s.length)),n.deleteMessage({to:a,keyList:s}).then((function(e){return u.end(),Ki.info(\"\".concat(t._className,\".deleteMessage ok\")),t._onMessageDeleted(i)})).catch((function(e){t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Ki.warn(\"\".concat(t._className,\".deleteMessage failed. error:\"),e);var n=new Km({code:e&&e.code?e.code:Pd.MESSAGE_DELETE_FAIL,message:e&&e.message?e.message:Qd});return Ym(n)}))}},{key:\"_onMessageDeleted\",value:function(e){return this.getModule(Jc).onMessageDeleted(e),jm({messageList:e})}},{key:\"_generateUUID\",value:function(){var e=this.getModule(Xc);return\"\".concat(e.getSDKAppID(),\"-\").concat(e.getUserID(),\"-\").concat(function(){for(var e=\"\",t=32;t>0;--t)e+=uu[Math.floor(Math.random()*cu)];return e}())}},{key:\"getMessageOptionByID\",value:function(e){return this._messageOptionsMap.get(e)}},{key:\"_getNickAndAvatarByUserID\",value:function(e){return this.getModule(jc).getNickAndAvatarByUserID(e)}},{key:\"_getNameCardByGroupID\",value:function(e){if(e.conversationType===ro.CONV_GROUP){var t=this.getModule($c);if(t)return t.getMyNameCardByGroupID(e.to)}return\"\"}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._messageOptionsMap.clear()}}]),n}(dl),hM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"PluginModule\",r.plugins={},r}return a(n,[{key:\"registerPlugin\",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.plugins[n]=e[n]})),new lg(_g).setMessage(\"key=\".concat(Object.keys(e))).end()}},{key:\"getPlugin\",value:function(e){return this.plugins[e]}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\"))}}]),n}(dl),fM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"SyncUnreadMessageModule\",r._cookie=\"\",r._onlineSyncFlag=!1,r.getInnerEmitterInstance().on(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED,r._onLoginSuccess,h(r)),r}return a(n,[{key:\"_onLoginSuccess\",value:function(e){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:\"_startSync\",value:function(e){var t=this,n=e.cookie,o=e.syncFlag,r=e.isOnlineSync;Ki.log(\"\".concat(this._className,\"._startSync cookie:\").concat(n,\" syncFlag:\").concat(o,\" isOnlineSync:\").concat(r)),this.request({protocolName:fl,requestData:{cookie:n,syncFlag:o,isOnlineSync:r}}).then((function(e){var n=e.data,o=n.cookie,r=n.syncFlag,a=n.eventArray,s=n.messageList,i=n.C2CRemainingUnreadList;if(t._cookie=o,Ou(o));else if(0===r||1===r){if(a)t.getModule(al).onMessage({head:{},body:{eventArray:a,isInstantMessage:t._onlineSyncFlag,isSyncingEnded:!1}});t.getModule(Yc).onNewC2CMessage({dataList:s,isInstantMessage:!1,C2CRemainingUnreadList:i}),t._startSync({cookie:o,syncFlag:r,isOnlineSync:0})}else if(2===r){if(a)t.getModule(al).onMessage({head:{},body:{eventArray:a,isInstantMessage:t._onlineSyncFlag,isSyncingEnded:!0}});t.getModule(Yc).onNewC2CMessage({dataList:s,isInstantMessage:t._onlineSyncFlag,C2CRemainingUnreadList:i})}})).catch((function(e){Ki.error(\"\".concat(t._className,\"._startSync failed. error:\"),e)}))}},{key:\"startOnlineSync\",value:function(){Ki.log(\"\".concat(this._className,\".startOnlineSync\")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}},{key:\"startSyncOnReconnected\",value:function(){Ki.log(\"\".concat(this._className,\".startSyncOnReconnected.\")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._onlineSyncFlag=!1,this._cookie=\"\"}}]),n}(dl),_M={request:{toAccount:\"To_Account\",fromAccount:\"From_Account\",to:\"To_Account\",from:\"From_Account\",groupID:\"GroupId\",groupAtUserID:\"GroupAt_Account\",extension:\"Ext\",data:\"Data\",description:\"Desc\",elements:\"MsgBody\",sizeType:\"Type\",downloadFlag:\"Download_Flag\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",videoUrl:\"\",imageUrl:\"URL\",fileUrl:\"Url\",uuid:\"UUID\",priority:\"MsgPriority\",receiverUserID:\"To_Account\",receiverGroupID:\"GroupId\",messageSender:\"SenderId\",messageReceiver:\"ReceiverId\",nick:\"From_AccountNick\",avatar:\"From_AccountHeadurl\",messageNumber:\"MsgNum\",pbDownloadKey:\"PbMsgKey\",downloadKey:\"JsonMsgKey\",applicationType:\"PendencyType\",userIDList:\"To_Account\",groupNameList:\"GroupName\",userID:\"To_Account\",groupAttributeList:\"GroupAttr\",mainSequence:\"AttrMainSeq\",avChatRoomKey:\"BytesKey\",attributeControl:\"AttrControl\",sequence:\"seq\"},response:{MsgPriority:\"priority\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\",Download_Flag:\"downloadFlag\",GroupId:\"groupID\",Member_Account:\"userID\",MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",MsgSeq:\"sequence\",MsgRandom:\"random\",MsgTime:\"time\",MsgTimeStamp:\"time\",MsgContent:\"content\",MsgBody:\"elements\",From_AccountNick:\"nick\",From_AccountHeadurl:\"avatar\",GroupWithdrawInfoArray:\"revokedInfos\",GroupReadInfoArray:\"groupMessageReadNotice\",LastReadMsgSeq:\"lastMessageSeq\",WithdrawC2cMsgNotify:\"c2cMessageRevokedNotify\",C2cWithdrawInfoArray:\"revokedInfos\",C2cReadedReceipt:\"c2cMessageReadReceipt\",ReadC2cMsgNotify:\"c2cMessageReadNotice\",LastReadTime:\"peerReadTime\",MsgRand:\"random\",MsgType:\"type\",MsgShow:\"messageShow\",NextMsgSeq:\"nextMessageSeq\",FaceUrl:\"avatar\",ProfileDataMod:\"profileModify\",Profile_Account:\"userID\",ValueBytes:\"value\",ValueNum:\"value\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgFrom_AccountExtraInfo:\"messageFromAccountExtraInformation\",Operator_Account:\"operatorID\",OpType:\"operationType\",ReportType:\"operationType\",UserId:\"userID\",User_Account:\"userID\",List_Account:\"userIDList\",MsgOperatorMemberExtraInfo:\"operatorInfo\",MsgMemberExtraInfo:\"memberInfoList\",ImageUrl:\"avatar\",NickName:\"nick\",MsgGroupNewInfo:\"newGroupProfile\",MsgAppDefinedData:\"groupCustomField\",Owner_Account:\"ownerID\",GroupFaceUrl:\"avatar\",GroupIntroduction:\"introduction\",GroupNotification:\"notification\",GroupApplyJoinOption:\"joinOption\",MsgKey:\"messageKey\",GroupInfo:\"groupProfile\",ShutupTime:\"muteTime\",Desc:\"description\",Ext:\"extension\",GroupAt_Account:\"groupAtUserID\",MsgNum:\"messageNumber\",PbMsgKey:\"pbDownloadKey\",JsonMsgKey:\"downloadKey\",MsgModifiedFlag:\"isModified\",PendencyItem:\"applicationItem\",PendencyType:\"applicationType\",AddTime:\"time\",AddSource:\"source\",AddWording:\"wording\",ProfileImImage:\"avatar\",PendencyAdd:\"friendApplicationAdded\",FrienPencydDel_Account:\"friendApplicationDeletedUserIDList\",Peer_Account:\"userID\",GroupAttr:\"groupAttributeList\",GroupAttrAry:\"groupAttributeList\",AttrMainSeq:\"mainSequence\",seq:\"sequence\",GroupAttrOption:\"groupAttributeOption\",BytesChangedKeys:\"changedKeyList\",GroupAttrInfo:\"groupAttributeList\",GroupAttrSeq:\"mainSequence\",PushChangedAttrValFlag:\"hasChangedAttributeInfo\",SubKeySeq:\"sequence\",Val:\"value\"},ignoreKeyWord:[\"C2C\",\"ID\",\"USP\"]},mM=Et.trim;function vM(e,t){if(\"string\"!=typeof e&&!Array.isArray(e))throw new TypeError(\"Expected the input to be `string | string[]`\");t=Object.assign({pascalCase:!1},t);var n;return 0===(e=Array.isArray(e)?e.map((function(e){return e.trim()})).filter((function(e){return e.length})).join(\"-\"):e.trim()).length?\"\":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=MM(e)),e=e.replace(/^[_.\\\\- ]+/,\"\").toLowerCase().replace(/[_.\\\\- ]+(\\\\w|$)/g,(function(e,t){return t.toUpperCase()})).replace(/\\\\d+(\\\\w|$)/g,(function(e){return e.toUpperCase()})),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)}vt({target:\"String\",proto:!0,forced:function(e){return O((function(){return!!yt[e]()||\"​᠎\"!=\"​᠎\"[e]()||yt[e].name!==e}))}(\"trim\")},{trim:function(){return mM(this)}});var MM=function(e){for(var t=!1,n=!1,o=!1,r=0;r<e.length;r++){var a=e[r];t&&/[a-zA-Z]/.test(a)&&a.toUpperCase()===a?(e=e.slice(0,r)+\"-\"+e.slice(r),t=!1,o=n,n=!0,r++):n&&o&&/[a-zA-Z]/.test(a)&&a.toLowerCase()===a?(e=e.slice(0,r-1)+\"-\"+e.slice(r-1),o=n,n=!1,t=!0):(t=a.toLowerCase()===a&&a.toUpperCase()!==a,o=n,n=a.toUpperCase()===a&&a.toLowerCase()!==a)}return e};function yM(e,t){var n=0;return function e(t,o){if(++n>100)return n--,t;if(zi(t)){var r=t.map((function(t){return $i(t)?e(t,o):t}));return n--,r}if($i(t)){var a=(s=t,i=function(e,t){if(!tu(t))return!1;if((r=t)!==vM(r))for(var n=0;n<_M.ignoreKeyWord.length&&!t.includes(_M.ignoreKeyWord[n]);n++);var r;return Ji(o[t])?function(e){return\"OPPOChannelID\"===e?e:e[0].toUpperCase()+vM(e).slice(1)}(t):o[t]},u=Object.create(null),Object.keys(s).forEach((function(e){var t=i(s[e],e);t&&(u[t]=s[e])})),u);return a=Iu(a,(function(t,n){return zi(t)||$i(t)?e(t,o):t})),n--,a}var s,i,u}(e,t)}function IM(e,t){if(zi(e))return e.map((function(e){return $i(e)?IM(e,t):e}));if($i(e)){var n=(o=e,r=function(e,n){return Ji(t[n])?vM(n):t[n]},a={},Object.keys(o).forEach((function(e){a[r(o[e],e)]=o[e]})),a);return n=Iu(n,(function(e){return zi(e)||$i(e)?IM(e,t):e}))}var o,r,a}var TM=function(){function e(t){o(this,e),this._handler=t;var n=t.getURL();this._socket=null,this._id=iu(),ai?oi?(ii.connectSocket({url:n,header:{\"content-type\":\"application/json\"}}),ii.onSocketClose(this._onClose.bind(this)),ii.onSocketOpen(this._onOpen.bind(this)),ii.onSocketMessage(this._onMessage.bind(this)),ii.onSocketError(this._onError.bind(this))):(this._socket=ii.connectSocket({url:n,header:{\"content-type\":\"application/json\"},complete:function(){}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):si&&(this._socket=new WebSocket(n),this._socket.onopen=this._onOpen.bind(this),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this))}return a(e,[{key:\"getID\",value:function(){return this._id}},{key:\"_onOpen\",value:function(){this._handler.onOpen({id:this._id})}},{key:\"_onClose\",value:function(e){this._handler.onClose({id:this._id,e:e})}},{key:\"_onMessage\",value:function(e){this._handler.onMessage(e)}},{key:\"_onError\",value:function(e){this._handler.onError({id:this._id,e:e})}},{key:\"close\",value:function(e){if(oi)return ii.offSocketClose(),ii.offSocketMessage(),ii.offSocketOpen(),ii.offSocketError(),void ii.closeSocket();this._socket&&(ai?(this._socket.onClose((function(){})),this._socket.onOpen((function(){})),this._socket.onMessage((function(){})),this._socket.onError((function(){}))):si&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),ni?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}},{key:\"send\",value:function(e){oi?ii.sendSocketMessage({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):this._socket&&(ai?this._socket.send({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):si&&this._socket.send(e.data))}}]),e}(),DM=4e3,SM=4001,EM=[\"keyMap\"],AM=[\"keyMap\"],kM=\"connected\",NM=\"connecting\",CM=\"disconnected\",LM=function(){function e(t){o(this,e),this._channelModule=t,this._className=\"SocketHandler\",this._promiseMap=new Map,this._readyState=CM,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=iu(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url=\"\",this._onOpenTs=0,this._setOverseaHost(),this._initConnection()}return a(e,[{key:\"_setOverseaHost\",value:function(){this._channelModule.isOversea()&&zs.HOST.setCurrent(Ws)}},{key:\"_initConnection\",value:function(){\"\"===this._url?this._url=zs.HOST.CURRENT.DEFAULT:this._url===zs.HOST.CURRENT.DEFAULT?this._url=zs.HOST.CURRENT.BACKUP:this._url===zs.HOST.CURRENT.BACKUP&&(this._url=zs.HOST.CURRENT.DEFAULT),this._connect(),this._nextPingTs=0}},{key:\"onCheckTimer\",value:function(e){e%1==0&&this._checkPromiseMap()}},{key:\"_checkPromiseMap\",value:function(){var e=this;0!==this._promiseMap.size&&this._promiseMap.forEach((function(t,n){var o=t.reject,r=t.timestamp;Date.now()-r>=15e3&&(Ki.log(\"\".concat(e._className,\"._checkPromiseMap request timeout, delete requestID:\").concat(n)),e._promiseMap.delete(n),o(new Km({code:Pd.NETWORK_TIMEOUT,message:Hp})),e._channelModule.onRequestTimeout(n))}))}},{key:\"onOpen\",value:function(e){this._onOpenTs=Date.now();var t=e.id;this._socketID=t,new lg(vg).setMessage(n).setMessage(\"socketID:\".concat(t)).end();var n=Date.now()-this._startTs;Ki.log(\"\".concat(this._className,\"._onOpen cost \").concat(n,\" ms. socketID:\").concat(t)),e.id===this._socketID&&(this._readyState=kM,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._channelModule.onReconnected(),this._reConnectFlag=!1),this._channelModule.onOpen())}},{key:\"onClose\",value:function(e){var t=new lg(Mg),n=e.id,o=e.e,r=\"sourceSocketID:\".concat(n,\" currentSocketID:\").concat(this._socketID),a=0;0!==this._onOpenTs&&(a=Date.now()-this._onOpenTs),t.setMessage(a).setMoreMessage(r).setCode(o.code).end(),Ki.log(\"\".concat(this._className,\"._onClose code:\").concat(o.code,\" reason:\").concat(o.reason,\" \").concat(r,\" onlineTime:\").concat(a)),n===this._socketID&&(this._readyState=CM,a<1e3?this._channelModule.onReconnectFailed():this._channelModule.onClose())}},{key:\"onError\",value:function(e){var t=e.id,n=e.e,o=\"sourceSocketID:\".concat(t,\" currentSocketID:\").concat(this._socketID);new lg(yg).setMessage(n.errMsg||au(n)).setMoreMessage(o).setLevel(\"error\").end(),Ki.warn(\"\".concat(this._className,\"._onError\"),n,o),t===this._socketID&&(this._readyState=\"\",this._channelModule.onError())}},{key:\"onMessage\",value:function(e){var t;try{t=JSON.parse(e.data)}catch(cy){new lg(Gg).setMessage(e.data).end()}if(t&&t.head){var n=this._getRequestIDFromHead(t.head),o=Au(t.head),r=IM(t.body,this._getResponseKeyMap(o));if(Ki.debug(\"\".concat(this._className,\".onMessage ret:\").concat(JSON.stringify(r),\" requestID:\").concat(n,\" has:\").concat(this._promiseMap.has(n))),this._setNextPingTs(),this._promiseMap.has(n)){var a=this._promiseMap.get(n),s=a.resolve,i=a.reject,u=a.timestamp;return this._promiseMap.delete(n),this._calcRTT(u),void(r.errorCode&&0!==r.errorCode?(this._channelModule.onErrorCodeNotZero(r),i(new Km({code:r.errorCode,message:r.errorInfo||\"\"}))):s(Pm(r)))}this._channelModule.onMessage({head:t.head,body:r})}}},{key:\"_calcRTT\",value:function(e){var t=Date.now()-e;this._channelModule.getModule(ll).addRTT(t)}},{key:\"_connect\",value:function(){new lg(mg).setMessage(\"url:\".concat(this.getURL())).end(),Ki.log(\"\".concat(this._className,\"._connect url:\").concat(this.getURL())),this._startTs=Date.now(),this._socket=new TM(this),this._socketID=this._socket.getID(),this._readyState=NM}},{key:\"getURL\",value:function(){var e=this._channelModule.getModule(Xc);return\"\".concat(this._url,\"/info?sdkappid=\").concat(e.getSDKAppID(),\"&instanceid=\").concat(e.getInstanceID(),\"&random=\").concat(this._getRandom())}},{key:\"_closeConnection\",value:function(e){Ki.log(\"\".concat(this._className,\"._closeConnection\")),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=CM)}},{key:\"_resend\",value:function(){var e=this;if(Ki.log(\"\".concat(this._className,\"._resend reConnectFlag:\").concat(this._reConnectFlag),\"promiseMap.size:\".concat(this._promiseMap.size,\" simpleRequestMap.size:\").concat(this._simpleRequestMap.size)),this._promiseMap.size>0&&this._promiseMap.forEach((function(t,n){var o=t.uplinkData,r=t.resolve,a=t.reject;e._promiseMap.set(n,{resolve:r,reject:a,timestamp:Date.now(),uplinkData:o}),e._execute(n,o)})),this._simpleRequestMap.size>0){var t,n=S(this._simpleRequestMap);try{for(n.s();!(t=n.n()).done;){var o=m(t.value,2),r=o[0],a=o[1];this._execute(r,a)}}catch(s){n.e(s)}finally{n.f()}this._simpleRequestMap.clear()}}},{key:\"send\",value:function(e){var t=this;e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3);e.keyMap;var n=g(e,EM),o=this._getRequestIDFromHead(e.head),r=JSON.stringify(n);return new Promise((function(e,a){(t._promiseMap.set(o,{resolve:e,reject:a,timestamp:Date.now(),uplinkData:r}),Ki.debug(\"\".concat(t._className,\".send uplinkData:\").concat(JSON.stringify(n),\" requestID:\").concat(o,\" readyState:\").concat(t._readyState)),t._readyState!==kM)?t._reConnect():(t._execute(o,r),t._channelModule.getModule(ll).addRequestCount())}))}},{key:\"simplySend\",value:function(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3);e.keyMap;var t=g(e,AM),n=this._getRequestIDFromHead(e.head),o=JSON.stringify(t);this._readyState!==kM?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(n,o):Ki.log(\"\".concat(this._className,\".simplySend. simpleRequestMap is full, drop request!\")),this._reConnect()):this._execute(n,o)}},{key:\"_execute\",value:function(e,t){this._socket.send({data:t,fail:ai?this._onSendFail.bind(this):void 0,requestID:e})}},{key:\"_onSendFail\",value:function(e){Ki.log(\"\".concat(this._className,\"._onSendFail requestID:\").concat(e))}},{key:\"_getSequence\",value:function(){var e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=iu()),e}},{key:\"_getRequestIDFromHead\",value:function(e){return e.servcmd+e.seq}},{key:\"_getResponseKeyMap\",value:function(e){var n=this._channelModule.getKeyMap(e);return t(t({},_M.response),n.response)}},{key:\"_reConnect\",value:function(){this._readyState!==kM&&this._readyState!==NM&&this.forcedReconnect()}},{key:\"forcedReconnect\",value:function(){var e=this;Ki.log(\"\".concat(this._className,\".forcedReconnect count:\").concat(this._reConnectCount,\" readyState:\").concat(this._readyState)),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(SM),this._initConnection()):this._channelModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0];n[1];o?(Ki.warn(\"\".concat(e._className,\".forcedReconnect disconnected from wsserver but network is ok, continue...\")),e._reConnectCount=0,e._closeConnection(SM),e._initConnection()):e._channelModule.onReconnectFailed()}))}},{key:\"getReconnectFlag\",value:function(){return this._reConnectFlag}},{key:\"_setNextPingTs\",value:function(){this._nextPingTs=Date.now()+1e4}},{key:\"getNextPingTs\",value:function(){return this._nextPingTs}},{key:\"isConnected\",value:function(){return this._readyState===kM}},{key:\"_getRandom\",value:function(){return 0===this._random&&(this._random=Math.random()),this._random}},{key:\"_resetRandom\",value:function(){this._random=0}},{key:\"close\",value:function(){Ki.log(\"\".concat(this._className,\".close\")),this._closeConnection(DM),this._promiseMap.clear(),this._startSequence=iu(),this._readyState=CM,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url=\"\",this._random=0}}]),e}(),OM=function(e){i(n,e);var t=_(n);function n(e){var r;if(o(this,n),(r=t.call(this,e))._className=\"ChannelModule\",r._socketHandler=new LM(h(r)),r._probing=!1,r._isAppShowing=!0,r._previousState=ro.NET_STATE_CONNECTED,ai&&\"function\"==typeof ii.onAppShow&&\"function\"==typeof ii.onAppHide){var a=r._onAppHide.bind(h(r)),s=r._onAppShow.bind(h(r));\"function\"==typeof ii.offAppHide&&ii.offAppHide(a),\"function\"==typeof ii.offAppShow&&ii.offAppShow(s),ii.onAppHide(a),ii.onAppShow(s)}return r._timerForNotLoggedIn=-1,r._timerForNotLoggedIn=setInterval(r.onCheckTimer.bind(h(r)),1e3),r._fatalErrorFlag=!1,r}return a(n,[{key:\"onCheckTimer\",value:function(e){this._socketHandler&&(this.isLoggedIn()?(this._timerForNotLoggedIn>0&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}},{key:\"onErrorCodeNotZero\",value:function(e){this.getModule(al).onErrorCodeNotZero(e)}},{key:\"onMessage\",value:function(e){this.getModule(al).onMessage(e)}},{key:\"send\",value:function(e){return this._socketHandler?this._previousState!==ro.NET_STATE_CONNECTED&&e.head.servcmd.includes(kd)?this._sendLogViaHTTP(e):this._socketHandler.send(e):Promise.reject()}},{key:\"_sendLogViaHTTP\",value:function(e){return new Promise((function(t,n){var o=\"https://webim.tim.qq.com/v4/imopenstat/tim_web_report_v2?sdkappid=\".concat(e.head.sdkappid,\"&reqtime=\").concat(Date.now()),r=JSON.stringify(e.body),a=\"application/x-www-form-urlencoded;charset=UTF-8\";if(ai)ii.request({url:o,data:r,method:\"POST\",timeout:3e3,header:{\"content-type\":a},success:function(){t()},fail:function(){n(new Km({code:Pd.NETWORK_ERROR,message:Bp}))}});else{var s=new XMLHttpRequest,i=setTimeout((function(){s.abort(),n(new Km({code:Pd.NETWORK_TIMEOUT,message:Hp}))}),3e3);s.onreadystatechange=function(){4===s.readyState&&(clearTimeout(i),200===s.status||304===s.status?t():n(new Km({code:Pd.NETWORK_ERROR,message:Bp})))},s.open(\"POST\",o,!0),s.setRequestHeader(\"Content-type\",a),s.send(r)}}))}},{key:\"simplySend\",value:function(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}},{key:\"onOpen\",value:function(){this._ping()}},{key:\"onClose\",value:function(){this.reConnect()}},{key:\"onError\",value:function(){ai&&Ki.error(\"\".concat(this._className,\".onError 从v2.11.2起，SDK 支持了 WebSocket，如您未添加相关受信域名，请先添加！升级指引: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html\"))}},{key:\"getKeyMap\",value:function(e){return this.getModule(al).getKeyMap(e)}},{key:\"_onAppHide\",value:function(){this._isAppShowing=!1}},{key:\"_onAppShow\",value:function(){this._isAppShowing=!0}},{key:\"onRequestTimeout\",value:function(e){}},{key:\"onReconnected\",value:function(){Ki.log(\"\".concat(this._className,\".onReconnected\")),this.getModule(al).onReconnected(),this._emitNetStateChangeEvent(ro.NET_STATE_CONNECTED)}},{key:\"onReconnectFailed\",value:function(){Ki.log(\"\".concat(this._className,\".onReconnectFailed\")),this._emitNetStateChangeEvent(ro.NET_STATE_DISCONNECTED)}},{key:\"reConnect\",value:function(){if(!this._fatalErrorFlag&&this._socketHandler){var e=this._socketHandler.getReconnectFlag();if(Ki.log(\"\".concat(this._className,\".reConnect previousState:\").concat(this._previousState,\" reconnectFlag:\").concat(e)),this._previousState===ro.NET_STATE_CONNECTING&&e)return;this._socketHandler.forcedReconnect(),this._emitNetStateChangeEvent(ro.NET_STATE_CONNECTING)}}},{key:\"_emitNetStateChangeEvent\",value:function(e){this._previousState!==e&&(this._previousState=e,this.emitOuterEvent(oo.NET_STATE_CHANGE,{state:e}))}},{key:\"_ping\",value:function(){var e=this;if(!0!==this._probing){this._probing=!0;var t=this.getModule(al).getProtocolData({protocolName:Nd});this.send(t).then((function(){e._probing=!1})).catch((function(t){if(Ki.warn(\"\".concat(e._className,\"._ping failed. error:\"),t),e._probing=!1,t&&60002===t.code)return new lg(Wh).setMessage(\"code:\".concat(t.code,\" message:\").concat(t.message)).setNetworkType(e.getModule(el).getNetworkType()).end(),e._fatalErrorFlag=!0,void e._emitNetStateChangeEvent(ro.NET_STATE_DISCONNECTED);e.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];Ki.log(\"\".concat(e._className,\"._ping failed. isAppShowing:\").concat(e._isAppShowing,\" online:\").concat(o,\" networkType:\").concat(r)),o?e.reConnect():e._emitNetStateChangeEvent(ro.NET_STATE_DISCONNECTED)}))}))}}},{key:\"_checkNextPing\",value:function(){this._socketHandler&&(this._socketHandler.isConnected()&&Date.now()>=this._socketHandler.getNextPingTs()&&this._ping())}},{key:\"dealloc\",value:function(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),this._timerForNotLoggedIn>-1&&clearInterval(this._timerForNotLoggedIn)}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._previousState=ro.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3)}}]),n}(dl),RM=[\"a2\",\"tinyid\"],bM=[\"a2\",\"tinyid\"],wM=function(){function e(t){o(this,e),this._className=\"ProtocolHandler\",this._sessionModule=t,this._configMap=new Map,this._fillConfigMap()}return a(e,[{key:\"_fillConfigMap\",value:function(){this._configMap.clear();var e=this._sessionModule.genCommonHead(),n=this._sessionModule.genCosSpecifiedHead(),o=this._sessionModule.genSSOReportHead();this._configMap.set(pl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.IM_OPEN_STATUS,\".\").concat(zs.CMD.LOGIN)}),body:{state:\"Online\"},keyMap:{response:{TinyId:\"tinyID\",InstId:\"instanceID\",HelloInterval:\"helloInterval\"}}}}(e)),this._configMap.set(gl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.IM_OPEN_STATUS,\".\").concat(zs.CMD.LOGOUT)}),body:{type:0},keyMap:{request:{type:\"wslogout_type\"}}}}(e)),this._configMap.set(hl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.IM_OPEN_STATUS,\".\").concat(zs.CMD.HELLO)}),body:{},keyMap:{response:{NewInstInfo:\"newInstanceInfo\"}}}}(e)),this._configMap.set(Ed,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.IM_COS_SIGN,\".\").concat(zs.CMD.COS_SIGN)}),body:{cmd:\"open_im_cos_svc\",subCmd:\"get_cos_token\",duration:300,version:2},keyMap:{request:{userSig:\"usersig\",subCmd:\"sub_cmd\",cmd:\"cmd\",duration:\"duration\",version:\"version\"},response:{expired_time:\"expiredTime\",bucket_name:\"bucketName\",session_token:\"sessionToken\",tmp_secret_id:\"secretId\",tmp_secret_key:\"secretKey\"}}}}(n)),this._configMap.set(Ad,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.CUSTOM_UPLOAD,\".\").concat(zs.CMD.COS_PRE_SIG)}),body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{request:{userSig:\"usersig\",fileType:\"file_type\",fileName:\"file_name\",uploadMethod:\"upload_method\"},response:{expired_time:\"expiredTime\",request_id:\"requestId\",head_url:\"headUrl\",upload_url:\"uploadUrl\",download_url:\"downloadUrl\",ci_url:\"ciUrl\"}}}}(n)),this._configMap.set(wd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.CLOUD_CONTROL,\".\").concat(zs.CMD.FETCH_CLOUD_CONTROL_CONFIG)}),body:{SDKAppID:0,version:0},keyMap:{request:{SDKAppID:\"uint32_sdkappid\",version:\"uint64_version\"},response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_json_config:\"cloudControlConfig\",uint32_expired_time:\"expiredTime\",uint32_sdkappid:\"SDKAppID\",uint64_version:\"version\"}}}}(e)),this._configMap.set(Gd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.CLOUD_CONTROL,\".\").concat(zs.CMD.PUSHED_CLOUD_CONTROL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_json_config:\"cloudControlConfig\",uint32_expired_time:\"expiredTime\",uint32_sdkappid:\"SDKAppID\",uint64_version:\"version\"}}}}(e)),this._configMap.set(fl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.GET_MESSAGES)}),body:{cookie:\"\",syncFlag:0,needAbstract:1,isOnlineSync:0},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",from:\"From_Account\",to:\"To_Account\",time:\"MsgTimeStamp\",sequence:\"MsgSeq\",random:\"MsgRandom\",elements:\"MsgBody\"},response:{MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",ClientSeq:\"clientSequence\",MsgSeq:\"sequence\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgRandom:\"random\",MsgTimeStamp:\"time\",MsgContent:\"content\",ToGroupId:\"groupID\",MsgKey:\"messageKey\",GroupTips:\"groupTips\",MsgBody:\"elements\",MsgType:\"type\",C2CRemainingUnreadCount:\"C2CRemainingUnreadList\",C2CPairUnreadCount:\"C2CPairUnreadList\"}}}}(e)),this._configMap.set(_l,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.BIG_DATA_HALLWAY_AUTH_KEY)}),body:{}}}(e)),this._configMap.set(ml,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.SEND_MESSAGE)}),body:{fromAccount:\"\",toAccount:\"\",msgTimeStamp:void 0,msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:\"\",avatar:\"\",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:\"\",desc:\"\",ext:\"\",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:\"\"}}},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",data:\"Data\",description:\"Desc\",extension:\"Ext\",type:\"MsgType\",content:\"MsgContent\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",nick:\"From_AccountNick\",avatar:\"From_AccountHeadurl\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",elements:\"MsgBody\",clientSequence:\"ClientSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"}}}}(e)),this._configMap.set(vl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.SEND_GROUP_MESSAGE)}),body:{fromAccount:\"\",groupID:\"\",random:0,clientSequence:0,priority:\"\",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:\"\",desc:\"\",ext:\"\",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:\"\"}},groupAtInfo:[]},keyMap:{request:{to:\"GroupId\",extension:\"Ext\",data:\"Data\",description:\"Desc\",random:\"Random\",sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",type:\"MsgType\",priority:\"MsgPriority\",content:\"MsgContent\",elements:\"MsgBody\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",clientSequence:\"ClientSeq\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"},response:{MsgTime:\"time\",MsgSeq:\"sequence\"}}}}(e)),this._configMap.set(Fl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.REVOKE_C2C_MESSAGE)}),body:{msgInfo:{fromAccount:\"\",toAccount:\"\",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{request:{msgInfo:\"MsgInfo\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(sd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.REVOKE_GROUP_MESSAGE)}),body:{to:\"\",msgSeqList:void 0},keyMap:{request:{to:\"GroupId\",msgSeqList:\"MsgSeqList\",msgSeq:\"MsgSeq\"}}}}(e)),this._configMap.set(xl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.GET_C2C_ROAM_MESSAGES)}),body:{peerAccount:\"\",count:15,lastMessageTime:0,messageKey:\"\",withRecalledMessage:1},keyMap:{request:{messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",withRecalledMessage:\"WithRecalledMsg\"}}}}(e)),this._configMap.set(ud,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.GET_GROUP_ROAM_MESSAGES)}),body:{withRecalledMsg:1,groupID:\"\",count:15,sequence:\"\"},keyMap:{request:{sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",withRecalledMessage:\"WithRecalledMsg\"},response:{Random:\"random\",MsgTime:\"time\",MsgSeq:\"sequence\",ReqMsgSeq:\"sequence\",RspMsgList:\"messageList\",IsPlaceMsg:\"isPlaceMessage\",IsSystemMsg:\"isSystemMessage\",ToGroupId:\"to\",EnumFrom_AccountType:\"fromAccountType\",EnumTo_AccountType:\"toAccountType\",GroupCode:\"groupCode\",MsgPriority:\"priority\",MsgBody:\"elements\",MsgType:\"type\",MsgContent:\"content\",IsFinished:\"complete\",Download_Flag:\"downloadFlag\",ClientSeq:\"clientSequence\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\"}}}}(e)),this._configMap.set(ql,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.SET_C2C_MESSAGE_READ)}),body:{C2CMsgReaded:void 0},keyMap:{request:{lastMessageTime:\"LastedMsgTime\"}}}}(e)),this._configMap.set(id,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.SET_GROUP_MESSAGE_READ)}),body:{groupID:void 0,messageReadSeq:void 0},keyMap:{request:{messageReadSeq:\"MsgReadedSeq\"}}}}(e)),this._configMap.set(Kl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.DELETE_C2C_MESSAGE)}),body:{fromAccount:\"\",to:\"\",keyList:void 0},keyMap:{request:{keyList:\"MsgKeyList\"}}}}(e)),this._configMap.set(hd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.DELETE_GROUP_MESSAGE)}),body:{groupID:\"\",deleter:\"\",keyList:void 0},keyMap:{request:{deleter:\"Deleter_Account\",keyList:\"Seqs\"}}}}(e)),this._configMap.set(Vl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.GET_PEER_READ_TIME)}),body:{userIDList:void 0},keyMap:{request:{userIDList:\"To_Account\"},response:{ReadTime:\"peerReadTimeList\"}}}}(e)),this._configMap.set(Hl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.RECENT_CONTACT,\".\").concat(zs.CMD.GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,count:0},keyMap:{request:{},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\",C2cPeerReadTime:\"c2cPeerReadTime\"}}}}(e)),this._configMap.set(Bl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.RECENT_CONTACT,\".\").concat(zs.CMD.PAGING_GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:4,assistFlag:7},keyMap:{request:{messageAssistFlag:\"MsgAssistFlags\",assistFlag:\"AssistFlags\",pinnedTimeStamp:\"TopTimeStamp\",pinnedStartIndex:\"TopStartIndex\"},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\",C2cPeerReadTime:\"c2cPeerReadTime\",LastMsgFlags:\"lastMessageFlag\",TopFlags:\"isPinned\",TopTimeStamp:\"pinnedTimeStamp\",TopStartIndex:\"pinnedStartIndex\"}}}}(e)),this._configMap.set(jl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.RECENT_CONTACT,\".\").concat(zs.CMD.DELETE_CONVERSATION)}),body:{fromAccount:\"\",toAccount:void 0,type:1,toGroupID:void 0},keyMap:{request:{toGroupID:\"ToGroupid\"}}}}(e)),this._configMap.set(Yl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.RECENT_CONTACT,\".\").concat(zs.CMD.PIN_CONVERSATION)}),body:{fromAccount:\"\",operationType:1,itemList:void 0},keyMap:{request:{itemList:\"RecentContactItem\"}}}}(e)),this._configMap.set($l,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.DELETE_GROUP_AT_TIPS)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(Ml,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.PROFILE,\".\").concat(zs.CMD.PORTRAIT_GET)}),body:{fromAccount:\"\",userItem:[]},keyMap:{request:{toAccount:\"To_Account\",standardSequence:\"StandardSequence\",customSequence:\"CustomSequence\"}}}}(e)),this._configMap.set(yl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.PROFILE,\".\").concat(zs.CMD.PORTRAIT_SET)}),body:{fromAccount:\"\",profileItem:[{tag:cm.NICK,value:\"\"},{tag:cm.GENDER,value:\"\"},{tag:cm.ALLOWTYPE,value:\"\"},{tag:cm.AVATAR,value:\"\"}]},keyMap:{request:{toAccount:\"To_Account\",standardSequence:\"StandardSequence\",customSequence:\"CustomSequence\"}}}}(e)),this._configMap.set(Il,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.GET_BLACKLIST)}),body:{fromAccount:\"\",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{response:{CurruentSequence:\"currentSequence\"}}}}(e)),this._configMap.set(Tl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.ADD_BLACKLIST)}),body:{fromAccount:\"\",toAccount:[]}}}(e)),this._configMap.set(Dl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.DELETE_BLACKLIST)}),body:{fromAccount:\"\",toAccount:[]}}}(e)),this._configMap.set(Sl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.GET_FRIEND_LIST)}),body:{fromAccount:\"\",startIndex:0,standardSequence:0,customSequence:0},keyMap:{response:{FriendNum:\"friendCount\",UserDataItem:\"resultList\",ValueItem:\"tagValueList\"}}}}(e)),this._configMap.set(Nl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.ADD_FRIEND)}),body:{fromAccount:\"\",addFriendItem:[],type:\"\"},keyMap:{request:{source:\"AddSource\",wording:\"AddWording\",type:\"AddType\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(Cl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.UPDATE_FRIEND)}),body:{fromAccount:\"\",updateItem:void 0},keyMap:{request:{snsItem:\"SnsItem\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(kl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.DELETE_FRIEND)}),body:{fromAccount:\"\",userIDList:[],type:\"\"},keyMap:{request:{type:\"DeleteType\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(El,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.GET_FRIEND_PROFILE)}),body:{fromAccount:\"\",userIDList:void 0,tagList:void 0},keyMap:{response:{InfoItem:\"resultList\",SnsProfileItem:\"tagValueList\"}}}}(e)),this._configMap.set(Al,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.CHECK_FRIEND)}),body:{fromAccount:\"\",userIDList:[],type:\"\"},keyMap:{request:{type:\"CheckType\"},response:{InfoItem:\"resultList\"}}}}(e)),this._configMap.set(Ol,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.GET_FRIEND_APPLICATION_LIST)}),body:{fromAccount:\"\",applicationType:\"\",startTime:0,maxLimited:0,lastSequence:0},keyMap:{response:{PendencyItem:\"resultList\",AddSource:\"source\",AddTime:\"time\",AddWording:\"wording\",Image:\"avatar\",UnreadPendencyCount:\"unreadCount\",To_Account:\"userID\",PendencyType:\"type\"}}}}(e)),this._configMap.set(Ll,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.RESPOND_FRIEND_APPLICATION)}),body:{fromAccount:\"\",responseFriendItem:[]},keyMap:{request:{tag:\"TagName\",action:\"ResponseAction\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(Rl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.DELETE_FRIEND_APPLICATION)}),body:{fromAccount:\"\",type:\"\",userIDList:void 0},keyMap:{request:{type:\"PendencyType\",userIDList:\"To_Account\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(bl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.REPORT_FRIEND_APPLICATION)}),body:{fromAccount:\"\",latestTimeStamp:\"\"},keyMap:{request:{latestTimeStamp:\"LatestPendencyTimeStamp\"}}}}(e)),this._configMap.set(Gl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.CREATE_FRIEND_GROUP)}),body:{fromAccount:\"\",groupName:void 0,userIDList:void 0},keyMap:{request:{groupName:\"GroupName\",userIDList:\"To_Account\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(Pl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.DELETE_FRIEND_GROUP)}),body:{fromAccount:\"\",nameList:void 0},keyMap:{request:{nameList:\"GroupName\"}}}}(e)),this._configMap.set(wl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.GET_FRIEND_GROUP_LIST)}),body:{fromAccount:\"\",lastSequence:0,needFriend:\"Need_Friend_Type_Yes\"},keyMap:{response:{ResultItem:\"resultList\",GroupName:\"name\",FriendNumber:\"friendCount\",To_Account:\"userIDList\"}}}}(e)),this._configMap.set(Ul,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.FRIEND,\".\").concat(zs.CMD.UPDATE_FRIEND_GROUP)}),body:{fromAccount:\"\",oldName:\"\",newName:void 0,updateGroupItem:void 0},keyMap:{request:{oldName:\"GroupOldName\",newName:\"GroupNewName\"},response:{UpdateType:\"type\",ResultItem:\"resultList\"}}}}(e)),this._configMap.set(Wl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.GET_JOINED_GROUPS)}),body:{memberAccount:\"\",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0}},keyMap:{request:{memberAccount:\"Member_Account\"},response:{GroupIdList:\"groups\",MsgFlag:\"messageRemindType\"}}}}(e)),this._configMap.set(zl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.GET_GROUP_INFO)}),body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\",\"ShutUpAllMember\"],groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{request:{groupIDList:\"GroupIdList\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\",groupCustomFieldFilter:\"AppDefinedDataFilter_Group\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{GroupIdList:\"groups\",MsgFlag:\"messageRemindType\",AppDefinedData:\"groupCustomField\",AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_Group:\"groupCustomFieldFilter\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",InfoSeq:\"infoSequence\",MemberList:\"members\",GroupInfo:\"groups\",ShutUpUntil:\"muteUntil\",ShutUpAllMember:\"muteAllMembers\",ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(Jl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.CREATE_GROUP)}),body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:\"FaceUrl\"},keyMap:{request:{ownerID:\"Owner_Account\",userID:\"Member_Account\",avatar:\"FaceUrl\",maxMemberNum:\"MaxMemberCount\",joinOption:\"ApplyJoinOption\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\"},response:{HugeGroupFlag:\"avChatRoomFlag\",OverJoinedGroupLimit_Account:\"overLimitUserIDList\"}}}}(e)),this._configMap.set(Xl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.DESTROY_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(Ql,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.MODIFY_GROUP_INFO)}),body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0},keyMap:{request:{maxMemberNum:\"MaxMemberCount\",groupCustomField:\"AppDefinedData\",muteAllMembers:\"ShutUpAllMember\",joinOption:\"ApplyJoinOption\",avatar:\"FaceUrl\"},response:{AppDefinedData:\"groupCustomField\",ShutUpAllMember:\"muteAllMembers\",ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(Zl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:\"ApplyMsg\"},response:{HugeGroupFlag:\"avChatRoomFlag\",AVChatRoomKey:\"avChatRoomKey\"}}}}(e)),this._configMap.set(ed,function(e){e.a2,e.tinyid;return{head:t(t({},g(e,RM)),{},{servcmd:\"\".concat(zs.NAME.BIG_GROUP_NO_AUTH,\".\").concat(zs.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:\"ApplyMsg\"},response:{HugeGroupFlag:\"avChatRoomFlag\"}}}}(e)),this._configMap.set(td,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.QUIT_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(nd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.SEARCH_GROUP_BY_ID)}),body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"CreateTime\",\"Owner_Account\",\"LastInfoTime\",\"LastMsgTime\",\"NextMsgSeq\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\"]}},keyMap:{response:{ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(od,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.CHANGE_GROUP_OWNER)}),body:{groupID:void 0,newOwnerID:void 0},keyMap:{request:{newOwnerID:\"NewOwner_Account\"}}}}(e)),this._configMap.set(rd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.HANDLE_APPLY_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{applicant:\"Applicant_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"}}}}(e)),this._configMap.set(ad,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.HANDLE_GROUP_INVITATION)}),body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{inviter:\"Inviter_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"}}}}(e)),this._configMap.set(cd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.GET_GROUP_APPLICATION)}),body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{request:{handleAccount:\"Handle_Account\"}}}}(e)),this._configMap.set(ld,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.DELETE_GROUP_SYSTEM_MESSAGE)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(dd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.BIG_GROUP_LONG_POLLING,\".\").concat(zs.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\"}}}}(e)),this._configMap.set(pd,function(e){e.a2,e.tinyid;return{head:t(t({},g(e,bM)),{},{servcmd:\"\".concat(zs.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,\".\").concat(zs.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\"}}}}(e)),this._configMap.set(gd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.GET_ONLINE_MEMBER_NUM)}),body:{groupID:void 0}}}(e)),this._configMap.set(fd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.SET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\",value:\"value\"}}}}(e)),this._configMap.set(_d,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.MODIFY_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\",value:\"value\"}}}}(e)),this._configMap.set(md,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.DELETE_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\"}}}}(e)),this._configMap.set(vd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.CLEAR_GROUP_ATTRIBUTES)}),body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]}}}(e)),this._configMap.set(Md,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP_ATTR,\".\").concat(zs.CMD.GET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{request:{avChatRoomKey:\"Key\",groupType:\"GroupType\"}}}}(e)),this._configMap.set(yd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.GET_GROUP_MEMBER_LIST)}),body:{groupID:void 0,limit:0,offset:0,memberRoleFilter:void 0,memberInfoFilter:[\"Role\",\"NameCard\",\"ShutUpUntil\",\"JoinTime\"],memberCustomFieldFilter:void 0},keyMap:{request:{memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",MemberList:\"members\",ShutUpUntil:\"muteUntil\"}}}}(e)),this._configMap.set(Id,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.GET_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{request:{userIDList:\"Member_List_Account\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{MemberList:\"members\",ShutUpUntil:\"muteUntil\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",AppMemberDefinedData:\"memberCustomField\"}}}}(e)),this._configMap.set(Td,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.ADD_GROUP_MEMBER)}),body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{request:{userID:\"Member_Account\",userIDList:\"MemberList\"},response:{MemberList:\"members\"}}}}(e)),this._configMap.set(Dd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.DELETE_GROUP_MEMBER)}),body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{request:{userIDList:\"MemberToDel_Account\"}}}}(e)),this._configMap.set(Sd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.GROUP,\".\").concat(zs.CMD.MODIFY_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{request:{userID:\"Member_Account\",memberCustomField:\"AppMemberDefinedData\",muteTime:\"ShutUpTime\",messageRemindType:\"MsgFlag\"}}}}(e)),this._configMap.set(kd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.IM_OPEN_STAT,\".\").concat(zs.CMD.TIM_WEB_REPORT_V2)}),body:{header:{},event:[],quality:[]},keyMap:{request:{SDKType:\"sdk_type\",SDKVersion:\"sdk_version\",deviceType:\"device_type\",platform:\"platform\",instanceID:\"instance_id\",traceID:\"trace_id\",SDKAppID:\"sdk_app_id\",userID:\"user_id\",tinyID:\"tiny_id\",extension:\"extension\",timestamp:\"timestamp\",networkType:\"network_type\",eventType:\"event_type\",code:\"error_code\",message:\"error_message\",moreMessage:\"more_message\",duplicate:\"duplicate\",costTime:\"cost_time\",level:\"level\",qualityType:\"quality_type\",reportIndex:\"report_index\",wholePeriod:\"whole_period\",totalCount:\"total_count\",rttCount:\"success_count_business\",successRateOfRequest:\"percent_business\",countLessThan1Second:\"success_count_business\",percentOfCountLessThan1Second:\"percent_business\",countLessThan3Second:\"success_count_platform\",percentOfCountLessThan3Second:\"percent_platform\",successCountOfBusiness:\"success_count_business\",successRateOfBusiness:\"percent_business\",successCountOfPlatform:\"success_count_platform\",successRateOfPlatform:\"percent_platform\",successCountOfMessageReceived:\"success_count_business\",successRateOfMessageReceived:\"percent_business\",avgRTT:\"average_value\",avgDelay:\"average_value\",avgValue:\"average_value\"}}}}(o)),this._configMap.set(Nd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.HEARTBEAT,\".\").concat(zs.CMD.ALIVE)}),body:{}}}(e)),this._configMap.set(Cd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.IM_OPEN_PUSH,\".\").concat(zs.CMD.MESSAGE_PUSH)}),body:{},keyMap:{response:{C2cMsgArray:\"C2CMessageArray\",GroupMsgArray:\"groupMessageArray\",GroupTips:\"groupTips\",C2cNotifyMsgArray:\"C2CNotifyMessageArray\",ClientSeq:\"clientSequence\",MsgPriority:\"priority\",NoticeSeq:\"noticeSequence\",MsgContent:\"content\",MsgType:\"type\",MsgBody:\"elements\",ToGroupId:\"to\",Desc:\"description\",Ext:\"extension\",IsSyncMsg:\"isSyncMessage\",Flag:\"needSync\",NeedAck:\"needAck\",PendencyAdd_Account:\"userID\",ProfileImNick:\"nick\",PendencyType:\"applicationType\"}}}}(e)),this._configMap.set(Ld,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.OPEN_IM,\".\").concat(zs.CMD.MESSAGE_PUSH_ACK)}),body:{sessionData:void 0},keyMap:{request:{sessionData:\"SessionData\"}}}}(e)),this._configMap.set(Od,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.IM_OPEN_STATUS,\".\").concat(zs.CMD.STATUS_FORCEOFFLINE)}),body:{},keyMap:{response:{C2cNotifyMsgArray:\"C2CNotifyMessageArray\",NoticeSeq:\"noticeSequence\",KickoutMsgNotify:\"kickoutMsgNotify\",NewInstInfo:\"newInstanceInfo\"}}}}(e)),this._configMap.set(bd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.IM_LONG_MESSAGE,\".\").concat(zs.CMD.DOWNLOAD_MERGER_MESSAGE)}),body:{downloadKey:\"\"},keyMap:{response:{Data:\"data\",Desc:\"description\",Ext:\"extension\",Download_Flag:\"downloadFlag\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\"}}}}(e)),this._configMap.set(Rd,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(zs.NAME.IM_LONG_MESSAGE,\".\").concat(zs.CMD.UPLOAD_MERGER_MESSAGE)}),body:{messageList:[]},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",type:\"MsgType\",content:\"MsgContent\",data:\"Data\",description:\"Desc\",extension:\"Ext\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",elements:\"MsgBody\",clientSequence:\"ClientSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"}}}}(e))}},{key:\"has\",value:function(e){return this._configMap.has(e)}},{key:\"get\",value:function(e){return this._configMap.get(e)}},{key:\"update\",value:function(){this._fillConfigMap()}},{key:\"getKeyMap\",value:function(e){return this.has(e)?this.get(e).keyMap||{}:(Ki.warn(\"\".concat(this._className,\".getKeyMap unknown protocolName:\").concat(e)),{})}},{key:\"getProtocolData\",value:function(e){var t=e.protocolName,n=e.requestData,o=this.get(t),r=null;if(n){var a=this._simpleDeepCopy(o),s=a.body,i=Object.create(null);for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){if(i[u]=s[u],void 0===n[u])continue;i[u]=n[u]}a.body=i,r=this._getUplinkData(a)}else r=this._getUplinkData(o);return r}},{key:\"_getUplinkData\",value:function(e){var t=this._requestDataCleaner(e),n=Au(t.head),o=yM(t.body,this._getRequestKeyMap(n));return t.body=o,t}},{key:\"_getRequestKeyMap\",value:function(e){var n=this.getKeyMap(e);return t(t({},_M.request),n.request)}},{key:\"_requestDataCleaner\",value:function(e){var t=Array.isArray(e)?[]:Object.create(null);for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&tu(o)&&null!==e[o]&&void 0!==e[o]&&(\"object\"!==n(e[o])?t[o]=e[o]:t[o]=this._requestDataCleaner.bind(this)(e[o]));return t}},{key:\"_simpleDeepCopy\",value:function(e){for(var t,n=Object.keys(e),o={},r=0,a=n.length;r<a;r++)t=n[r],zi(e[t])?o[t]=Array.from(e[t]):$i(e[t])?o[t]=this._simpleDeepCopy(e[t]):o[t]=e[t];return o}}]),e}(),GM=[Ld],PM=function(){function e(t){o(this,e),this._sessionModule=t,this._className=\"DownlinkHandler\",this._eventHandlerMap=new Map,this._eventHandlerMap.set(\"C2CMessageArray\",this._c2cMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"groupMessageArray\",this._groupMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"groupTips\",this._groupTipsHandler.bind(this)),this._eventHandlerMap.set(\"C2CNotifyMessageArray\",this._C2CNotifyMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"profileModify\",this._profileHandler.bind(this)),this._eventHandlerMap.set(\"friendListMod\",this._relationChainHandler.bind(this)),this._eventHandlerMap.set(\"recentContactMod\",this._recentContactHandler.bind(this)),this._keys=v(this._eventHandlerMap.keys())}return a(e,[{key:\"_c2cMessageArrayHandler\",value:function(e){var t=this._sessionModule.getModule(Yc);if(t){if(e.dataList.forEach((function(e){if(1===e.isSyncMessage){var t=e.from;e.from=e.to,e.to=t}})),1===e.needSync)this._sessionModule.getModule(rl).startOnlineSync();t.onNewC2CMessage({dataList:e.dataList,isInstantMessage:!0})}}},{key:\"_groupMessageArrayHandler\",value:function(e){var t=this._sessionModule.getModule($c);t&&t.onNewGroupMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}},{key:\"_groupTipsHandler\",value:function(e){var t=this._sessionModule.getModule($c);if(t){var n=e.event,o=e.dataList,r=e.isInstantMessage,a=void 0===r||r,s=e.isSyncingEnded;switch(n){case 4:case 6:t.onNewGroupTips({event:n,dataList:o});break;case 5:o.forEach((function(e){zi(e.elements.revokedInfos)?t.onGroupMessageRevoked({dataList:o}):zi(e.elements.groupMessageReadNotice)?t.onGroupMessageReadNotice({dataList:o}):t.onNewGroupSystemNotice({dataList:o,isInstantMessage:a,isSyncingEnded:s})}));break;case 12:this._sessionModule.getModule(Jc).onNewGroupAtTips({dataList:o});break;default:Ki.log(\"\".concat(this._className,\"._groupTipsHandler unknown event:\").concat(n,\" dataList:\"),o)}}}},{key:\"_C2CNotifyMessageArrayHandler\",value:function(e){var t=this,n=e.dataList;if(zi(n)){var o=this._sessionModule.getModule(Yc);n.forEach((function(e){if(Wi(e))if(e.hasOwnProperty(\"kickoutMsgNotify\")){var r=e.kickoutMsgNotify,a=r.kickType,s=r.newInstanceInfo,i=void 0===s?{}:s;1===a?t._sessionModule.onMultipleAccountKickedOut(i):2===a&&t._sessionModule.onMultipleDeviceKickedOut(i)}else e.hasOwnProperty(\"c2cMessageRevokedNotify\")?o&&o.onC2CMessageRevoked({dataList:n}):e.hasOwnProperty(\"c2cMessageReadReceipt\")?o&&o.onC2CMessageReadReceipt({dataList:n}):e.hasOwnProperty(\"c2cMessageReadNotice\")&&o&&o.onC2CMessageReadNotice({dataList:n})}))}}},{key:\"_profileHandler\",value:function(e){this._sessionModule.getModule(jc).onProfileModified({dataList:e.dataList});var t=this._sessionModule.getModule(Wc);t&&t.onFriendProfileModified({dataList:e.dataList})}},{key:\"_relationChainHandler\",value:function(e){this._sessionModule.getModule(jc).onRelationChainModified({dataList:e.dataList});var t=this._sessionModule.getModule(Wc);t&&t.onRelationChainModified({dataList:e.dataList})}},{key:\"_recentContactHandler\",value:function(e){var t=e.dataList;if(zi(t)){var n=this._sessionModule.getModule(Jc);n&&t.forEach((function(e){var t=e.pushType,o=e.recentContactTopItem,r=e.recentContactDeleteItem;1===t?n.onConversationDeleted(r.recentContactList):2===t?n.onConversationPinned(o.recentContactList):3===t&&n.onConversationUnpinned(o.recentContactList)}))}}},{key:\"_cloudControlConfigHandler\",value:function(e){this._sessionModule.getModule(ul).onPushedCloudControlConfig(e)}},{key:\"onMessage\",value:function(e){var t=this,n=e.head,o=e.body;if(this._isPushedCloudControlConfig(n))this._cloudControlConfigHandler(o);else{var r=o.eventArray,a=o.isInstantMessage,s=o.isSyncingEnded,i=o.needSync;if(zi(r))for(var u=null,c=null,l=0,d=0,p=r.length;d<p;d++){l=(u=r[d]).event;var g=Object.keys(u).find((function(e){return-1!==t._keys.indexOf(e)}));g?(c=u[g],this._eventHandlerMap.get(g)({event:l,dataList:c,isInstantMessage:a,isSyncingEnded:s,needSync:i})):Ki.log(\"\".concat(this._className,\".onMessage unknown eventItem:\").concat(u))}}}},{key:\"_isPushedCloudControlConfig\",value:function(e){return e.servcmd&&e.servcmd.includes(Gd)}}]),e}(),UM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"SessionModule\",r._platform=r.getPlatform(),r._protocolHandler=new wM(h(r)),r._messageDispatcher=new PM(h(r)),r}return a(n,[{key:\"updateProtocolConfig\",value:function(){this._protocolHandler.update()}},{key:\"request\",value:function(e){Ki.debug(\"\".concat(this._className,\".request options:\"),e);var t=e.protocolName,n=e.tjgID;if(!this._protocolHandler.has(t))return Ki.warn(\"\".concat(this._className,\".request unknown protocol:\").concat(t)),Ym({code:Pd.CANNOT_FIND_PROTOCOL,message:$p});var o=this.getProtocolData(e);Ou(n)||(o.head.tjgID=n);var r=this.getModule(sl);return GM.includes(t)?r.simplySend(o):r.send(o)}},{key:\"getKeyMap\",value:function(e){return this._protocolHandler.getKeyMap(e)}},{key:\"genCommonHead\",value:function(){var e=this.getModule(Xc);return{ver:\"v4\",platform:this._platform,websdkappid:js,websdkversion:Hs,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:2,tjgID:\"\"}}},{key:\"genCosSpecifiedHead\",value:function(){var e=this.getModule(Xc);return{ver:\"v4\",platform:this._platform,websdkappid:js,websdkversion:Hs,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:2}}},{key:\"genSSOReportHead\",value:function(){var e=this.getModule(Xc);return{ver:\"v4\",platform:this._platform,websdkappid:js,websdkversion:Hs,sdkappid:e.getSDKAppID(),contenttype:\"\",reqtime:0,identifier:\"\",usersig:\"\",status_instid:e.getStatusInstanceID(),sdkability:2}}},{key:\"getProtocolData\",value:function(e){return this._protocolHandler.getProtocolData(e)}},{key:\"onErrorCodeNotZero\",value:function(e){var t=e.errorCode;if(t===Pd.HELLO_ANSWER_KICKED_OUT){var n=e.kickType,o=e.newInstanceInfo,r=void 0===o?{}:o;1===n?this.onMultipleAccountKickedOut(r):2===n&&this.onMultipleDeviceKickedOut(r)}t!==Pd.MESSAGE_A2KEY_EXPIRED&&t!==Pd.ACCOUNT_A2KEY_EXPIRED||(this._onUserSigExpired(),this.getModule(sl).reConnect())}},{key:\"onMessage\",value:function(e){var t=e.body,n=t.needAck,o=void 0===n?0:n,r=t.sessionData;1===o&&this._sendACK(r),this._messageDispatcher.onMessage(e)}},{key:\"onReconnected\",value:function(){var e=this;this.isLoggedIn()&&this.request({protocolName:pl}).then((function(t){var n=t.data.instanceID;e.getModule(Xc).setStatusInstanceID(n),Ki.log(\"\".concat(e._className,\".onReconnected, login ok. start to sync unread messages.\")),e.getModule(rl).startSyncOnReconnected(),e.getModule(cl).startPull(),e.getModule($c).updateLocalMainSequenceOnReconnected()}))}},{key:\"onMultipleAccountKickedOut\",value:function(e){this.getModule(Bc).onMultipleAccountKickedOut(e)}},{key:\"onMultipleDeviceKickedOut\",value:function(e){this.getModule(Bc).onMultipleDeviceKickedOut(e)}},{key:\"_onUserSigExpired\",value:function(){this.getModule(Bc).onUserSigExpired()}},{key:\"_sendACK\",value:function(e){this.request({protocolName:Ld,requestData:{sessionData:e}})}}]),n}(dl),FM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"MessageLossDetectionModule\",r._maybeLostSequencesMap=new Map,r}return a(n,[{key:\"onMessageMaybeLost\",value:function(e,t,n){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);for(var o=this._maybeLostSequencesMap.get(e),r=0;r<n;r++)o.push(t+r);Ki.debug(\"\".concat(this._className,\".onMessageMaybeLost. maybeLostSequences:\").concat(o))}},{key:\"detectMessageLoss\",value:function(e,t){var n=this._maybeLostSequencesMap.get(e);if(!Ou(n)&&!Ou(t)){var o=t.filter((function(e){return-1!==n.indexOf(e)}));if(Ki.debug(\"\".concat(this._className,\".detectMessageLoss. matchedSequences:\").concat(o)),n.length===o.length)Ki.info(\"\".concat(this._className,\".detectMessageLoss no message loss. conversationID:\").concat(e));else{var r,a=n.filter((function(e){return-1===o.indexOf(e)})),s=a.length;s<=5?r=e+\"-\"+a.join(\"-\"):(a.sort((function(e,t){return e-t})),r=e+\" start:\"+a[0]+\" end:\"+a[s-1]+\" count:\"+s),new lg(Ih).setMessage(r).setNetworkType(this.getNetworkType()).setLevel(\"warning\").end(),Ki.warn(\"\".concat(this._className,\".detectMessageLoss message loss detected. conversationID:\").concat(e,\" lostSequences:\").concat(a))}n.length=0}}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._maybeLostSequencesMap.clear()}}]),n}(dl),qM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"CloudControlModule\",r._cloudConfig=new Map,r._expiredTime=0,r._version=0,r._isFetching=!1,r}return a(n,[{key:\"getCloudConfig\",value:function(e){return Ji(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}},{key:\"_canFetchConfig\",value:function(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}},{key:\"fetchConfig\",value:function(){var e=this,t=this._canFetchConfig();if(Ki.log(\"\".concat(this._className,\".fetchConfig canFetchConfig:\").concat(t)),t){var n=new lg(Yh),o=this.getModule(Xc).getSDKAppID();this._isFetching=!0,this.request({protocolName:wd,requestData:{SDKAppID:o,version:this._version}}).then((function(t){e._isFetching=!1,n.setMessage(\"version:\".concat(e._version,\" newVersion:\").concat(t.data.version,\" config:\").concat(t.data.cloudControlConfig)).setNetworkType(e.getNetworkType()).end(),Ki.log(\"\".concat(e._className,\".fetchConfig ok\")),e._parseCloudControlConfig(t.data)})).catch((function(t){e._isFetching=!1,e.probeNetwork().then((function(e){var o=m(e,2),r=o[0],a=o[1];n.setError(t,r,a).end()})),Ki.log(\"\".concat(e._className,\".fetchConfig failed. error:\"),t),e._setExpiredTimeOnResponseError(12e4)}))}}},{key:\"onPushedCloudControlConfig\",value:function(e){Ki.log(\"\".concat(this._className,\".onPushedCloudControlConfig\")),new lg($h).setNetworkType(this.getNetworkType()).setMessage(\"newVersion:\".concat(e.version,\" config:\").concat(e.cloudControlConfig)).end(),this._parseCloudControlConfig(e)}},{key:\"onCheckTimer\",value:function(e){this._canFetchConfig()&&this.fetchConfig()}},{key:\"_parseCloudControlConfig\",value:function(e){var t=this,n=\"\".concat(this._className,\"._parseCloudControlConfig\"),o=e.errorCode,r=e.errorMessage,a=e.cloudControlConfig,s=e.version,i=e.expiredTime;if(0===o){if(this._version!==s){var u=null;try{u=JSON.parse(a)}catch(cy){Ki.error(\"\".concat(n,\" JSON parse error:\").concat(a))}u&&(this._cloudConfig.clear(),Object.keys(u).forEach((function(e){t._cloudConfig.set(e,u[e])})),this._version=s,this.emitInnerEvent(gv.CLOUD_CONFIG_UPDATED))}this._expiredTime=Date.now()+1e3*i}else Ji(o)?(Ki.log(\"\".concat(n,\" failed. Invalid message format:\"),e),this._setExpiredTimeOnResponseError(36e5)):(Ki.error(\"\".concat(n,\" errorCode:\").concat(o,\" errorMessage:\").concat(r)),this._setExpiredTimeOnResponseError(12e4))}},{key:\"_setExpiredTimeOnResponseError\",value:function(e){this._expiredTime=Date.now()+e}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}]),n}(dl),xM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"PullGroupMessageModule\",r._remoteLastMessageSequenceMap=new Map,r.PULL_LIMIT_COUNT=15,r}return a(n,[{key:\"startPull\",value:function(){var e=this,t=this._getNeedPullConversationList();this._getRemoteLastMessageSequenceList().then((function(){var n=e.getModule(Jc);t.forEach((function(t){var o=t.conversationID,r=o.replace(ro.CONV_GROUP,\"\"),a=n.getGroupLocalLastMessageSequence(o),s=e._remoteLastMessageSequenceMap.get(r)||0,i=s-a;Ki.log(\"\".concat(e._className,\".startPull groupID:\").concat(r,\" localLastMessageSequence:\").concat(a,\" \")+\"remoteLastMessageSequence:\".concat(s,\" diff:\").concat(i)),a>0&&i>=1&&i<300&&e._pullMissingMessage({groupID:r,localLastMessageSequence:a,remoteLastMessageSequence:s,diff:i})}))}))}},{key:\"_getNeedPullConversationList\",value:function(){return this.getModule(Jc).getLocalConversationList().filter((function(e){return e.type===ro.CONV_GROUP&&e.groupProfile.type!==ro.GRP_AVCHATROOM}))}},{key:\"_getRemoteLastMessageSequenceList\",value:function(){var e=this;return this.getModule($c).getGroupList().then((function(t){for(var n=t.data.groupList,o=void 0===n?[]:n,r=0;r<o.length;r++){var a=o[r],s=a.groupID,i=a.nextMessageSeq;if(a.type!==ro.GRP_AVCHATROOM){var u=i-1;e._remoteLastMessageSequenceMap.set(s,u)}}}))}},{key:\"_pullMissingMessage\",value:function(e){var t=this,n=e.localLastMessageSequence,o=e.remoteLastMessageSequence,r=e.diff;e.count=r>this.PULL_LIMIT_COUNT?this.PULL_LIMIT_COUNT:r,e.sequence=r>this.PULL_LIMIT_COUNT?n+this.PULL_LIMIT_COUNT:n+r,this._getGroupMissingMessage(e).then((function(a){a.length>0&&(a[0].sequence+1<=o&&(e.localLastMessageSequence=n+t.PULL_LIMIT_COUNT,e.diff=r-t.PULL_LIMIT_COUNT,t._pullMissingMessage(e)),t.getModule($c).onNewGroupMessage({dataList:a,isInstantMessage:!1}))}))}},{key:\"_getGroupMissingMessage\",value:function(e){var t=this,n=new lg(oh);return this.request({protocolName:ud,requestData:{groupID:e.groupID,count:e.count,sequence:e.sequence}}).then((function(o){var r=o.data.messageList,a=void 0===r?[]:r;return n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e.groupID,\" count:\").concat(e.count,\" sequence:\").concat(e.sequence,\" messageList length:\").concat(a.length)).end(),a})).catch((function(e){t.probeNetwork().then((function(t){var o=m(t,2),r=o[0],a=o[1];n.setError(e,r,a).end()}))}))}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._remoteLastMessageSequenceMap.clear()}}]),n}(dl),VM=function(){function e(){o(this,e),this._className=\"AvgE2EDelay\",this._e2eDelayArray=[]}return a(e,[{key:\"addMessageDelay\",value:function(e){var t=ku(e.currentTime/1e3-e.time,2);this._e2eDelayArray.push(t)}},{key:\"_calcAvg\",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),ku(n/t,1)}},{key:\"_calcTotalCount\",value:function(){return this._e2eDelayArray.length}},{key:\"_calcCountWithLimit\",value:function(e){var t=e.e2eDelayArray,n=e.min,o=e.max;return t.filter((function(e){return n<e&&e<=o})).length}},{key:\"_calcPercent\",value:function(e,t){var n=ku(e/t*100,2);return n>100&&(n=100),n}},{key:\"_checkE2EDelayException\",value:function(e,t){var n=e.filter((function(e){return e>t}));if(n.length>0){var o=n.length,r=Math.min.apply(Math,v(n)),a=Math.max.apply(Math,v(n)),s=this._calcAvg(n,o),i=ku(o/e.length*100,2);new lg(Pg).setMessage(\"message e2e delay exception. count:\".concat(o,\" min:\").concat(r,\" max:\").concat(a,\" avg:\").concat(s,\" percent:\").concat(i)).setLevel(\"warning\").end()}}},{key:\"getStatResult\",value:function(){var e=this._calcTotalCount();if(0===e)return null;var t=v(this._e2eDelayArray),n=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),o=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),r=this._calcPercent(n,e),a=this._calcPercent(o,e),s=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),this.reset(),{totalCount:e,countLessThan1Second:n,percentOfCountLessThan1Second:r,countLessThan3Second:o,percentOfCountLessThan3Second:a,avgDelay:s}}},{key:\"reset\",value:function(){this._e2eDelayArray.length=0}}]),e}(),KM=function(){function e(){o(this,e),this._className=\"AvgRTT\",this._requestCount=0,this._rttArray=[]}return a(e,[{key:\"addRequestCount\",value:function(){this._requestCount+=1}},{key:\"addRTT\",value:function(e){this._rttArray.push(e)}},{key:\"_calcTotalCount\",value:function(){return this._requestCount}},{key:\"_calcRTTCount\",value:function(e){return e.length}},{key:\"_calcSuccessRateOfRequest\",value:function(e,t){if(0===t)return 0;var n=ku(e/t*100,2);return n>100&&(n=100),n}},{key:\"_calcAvg\",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),parseInt(n/t)}},{key:\"_calcMax\",value:function(){return Math.max.apply(Math,v(this._rttArray))}},{key:\"_calcMin\",value:function(){return Math.min.apply(Math,v(this._rttArray))}},{key:\"getStatResult\",value:function(){var e=this._calcTotalCount(),t=v(this._rttArray);if(0===e)return null;var n=this._calcRTTCount(t),o=this._calcSuccessRateOfRequest(n,e),r=this._calcAvg(t,n);return Ki.log(\"\".concat(this._className,\".getStatResult max:\").concat(this._calcMax(),\" min:\").concat(this._calcMin(),\" avg:\").concat(r)),this.reset(),{totalCount:e,rttCount:n,successRateOfRequest:o,avgRTT:r}}},{key:\"reset\",value:function(){this._requestCount=0,this._rttArray.length=0}}]),e}(),BM=function(){function e(){o(this,e),this._map=new Map}return a(e,[{key:\"initMap\",value:function(e){var t=this;e.forEach((function(e){t._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}))}},{key:\"addTotalCount\",value:function(e){return!(Ji(e)||!this._map.has(e))&&(this._map.get(e).totalCount+=1,!0)}},{key:\"addSuccessCount\",value:function(e){return!(Ji(e)||!this._map.has(e))&&(this._map.get(e).successCount+=1,!0)}},{key:\"addFailedCountOfUserSide\",value:function(e){return!(Ji(e)||!this._map.has(e))&&(this._map.get(e).failedCountOfUserSide+=1,!0)}},{key:\"addCost\",value:function(e,t){return!(Ji(e)||!this._map.has(e))&&(this._map.get(e).costArray.push(t),!0)}},{key:\"addFileSize\",value:function(e,t){return!(Ji(e)||!this._map.has(e))&&(this._map.get(e).fileSizeArray.push(t),!0)}},{key:\"_calcSuccessRateOfBusiness\",value:function(e){if(Ji(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=ku(t.successCount/t.totalCount*100,2);return n>100&&(n=100),n}},{key:\"_calcSuccessRateOfPlatform\",value:function(e){if(Ji(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return(n=ku(n,2))>100&&(n=100),n}},{key:\"_calcTotalCount\",value:function(e){return Ji(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:\"_calcSuccessCountOfBusiness\",value:function(e){return Ji(e)||!this._map.has(e)?-1:this._map.get(e).successCount}},{key:\"_calcSuccessCountOfPlatform\",value:function(e){if(Ji(e)||!this._map.has(e))return-1;var t=this._map.get(e);return t.successCount+t.failedCountOfUserSide}},{key:\"_calcAvg\",value:function(e){return Ji(e)||!this._map.has(e)?-1:e===og?this._calcAvgSpeed(e):this._calcAvgCost(e)}},{key:\"_calcAvgCost\",value:function(e){var t=this._map.get(e).costArray.length;if(0===t)return 0;var n=0;return this._map.get(e).costArray.forEach((function(e){n+=e})),parseInt(n/t)}},{key:\"_calcAvgSpeed\",value:function(e){var t=0,n=0;return this._map.get(e).costArray.forEach((function(e){t+=e})),this._map.get(e).fileSizeArray.forEach((function(e){n+=e})),parseInt(1e3*n/t)}},{key:\"getStatResult\",value:function(e){var t=this._calcTotalCount(e);if(0===t)return null;var n=this._calcSuccessCountOfBusiness(e),o=this._calcSuccessRateOfBusiness(e),r=this._calcSuccessCountOfPlatform(e),a=this._calcSuccessRateOfPlatform(e),s=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:n,successRateOfBusiness:o,successCountOfPlatform:r,successRateOfPlatform:a,avgValue:s}}},{key:\"reset\",value:function(e){Ji(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}]),e}(),HM=function(){function e(){o(this,e),this._lastMap=new Map,this._currentMap=new Map}return a(e,[{key:\"initMap\",value:function(e){var t=this;e.forEach((function(e){t._lastMap.set(e,new Map),t._currentMap.set(e,new Map)}))}},{key:\"addMessageSequence\",value:function(e){var t=e.key,n=e.message;if(Ji(t)||!this._lastMap.has(t)||!this._currentMap.has(t))return!1;var o=n.conversationID,r=n.sequence,a=o.replace(ro.CONV_GROUP,\"\");if(0===this._lastMap.get(t).size)this._addCurrentMap(e);else if(this._lastMap.get(t).has(a)){var s=this._lastMap.get(t).get(a),i=s.length-1;r>s[0]&&r<s[i]?(s.push(r),s.sort(),this._lastMap.get(t).set(a,s)):this._addCurrentMap(e)}else this._addCurrentMap(e);return!0}},{key:\"_addCurrentMap\",value:function(e){var t=e.key,n=e.message,o=n.conversationID,r=n.sequence,a=o.replace(ro.CONV_GROUP,\"\");this._currentMap.get(t).has(a)||this._currentMap.get(t).set(a,[]),this._currentMap.get(t).get(a).push(r)}},{key:\"_copyData\",value:function(e){if(!Ji(e)){this._lastMap.set(e,new Map);var t,n=this._lastMap.get(e),o=S(this._currentMap.get(e));try{for(o.s();!(t=o.n()).done;){var r=m(t.value,2),a=r[0],s=r[1];n.set(a,s)}}catch(i){o.e(i)}finally{o.f()}n=null,this._currentMap.set(e,new Map)}}},{key:\"getStatResult\",value:function(e){if(Ji(this._currentMap.get(e))||Ji(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;var t=0,n=0;if(this._lastMap.get(e).forEach((function(e,o){var r=v(e.values()),a=r.length,s=r[a-1]-r[0]+1;t+=s,n+=a})),0===t)return null;var o=ku(n/t*100,2);return o>100&&(o=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:n,successRateOfMessageReceived:o}}},{key:\"reset\",value:function(){this._currentMap.clear(),this._lastMap.clear()}}]),e}(),jM=function(e){i(r,e);var n=_(r);function r(e){var t;o(this,r),(t=n.call(this,e))._className=\"QualityStatModule\",t.TAG=\"im-ssolog-quality-stat\",t.reportIndex=0,t.wholePeriod=!1,t._qualityItems=[Xp,Qp,Zp,eg,tg,ng,og,rg,ag,sg],t._messageSentItems=[Zp,eg,tg,ng,og],t._messageReceivedItems=[rg,ag,sg],t.REPORT_INTERVAL=120,t.REPORT_SDKAPPID_BLACKLIST=[],t.REPORT_TINYID_WHITELIST=[],t._statInfoArr=[],t._avgRTT=new KM,t._avgE2EDelay=new VM,t._rateMessageSent=new BM,t._rateMessageReceived=new HM;var a=t.getInnerEmitterInstance();return a.on(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED,t._onLoginSuccess,h(t)),a.on(gv.CLOUD_CONFIG_UPDATED,t._onCloudConfigUpdated,h(t)),t}return a(r,[{key:\"_onLoginSuccess\",value:function(){var e=this;this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems);var t=this.getModule(Qc),n=t.getItem(this.TAG,!1);!Ou(n)&&Qi(n.forEach)&&(Ki.log(\"\".concat(this._className,\"._onLoginSuccess.get quality stat log in storage, nums=\").concat(n.length)),n.forEach((function(t){e._statInfoArr.push(t)})),t.removeItem(this.TAG,!1))}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"q_rpt_interval\"),t=this.getCloudConfig(\"q_rpt_sdkappid_bl\"),n=this.getCloudConfig(\"q_rpt_tinyid_wl\");Ji(e)||(this.REPORT_INTERVAL=Number(e)),Ji(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(\",\").map((function(e){return Number(e)}))),Ji(n)||(this.REPORT_TINYID_WHITELIST=n.split(\",\"))}},{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}},{key:\"addRequestCount\",value:function(){this._avgRTT.addRequestCount()}},{key:\"addRTT\",value:function(e){this._avgRTT.addRTT(e)}},{key:\"addMessageDelay\",value:function(e){this._avgE2EDelay.addMessageDelay(e)}},{key:\"addTotalCount\",value:function(e){this._rateMessageSent.addTotalCount(e)||Ki.warn(\"\".concat(this._className,\".addTotalCount invalid key:\"),e)}},{key:\"addSuccessCount\",value:function(e){this._rateMessageSent.addSuccessCount(e)||Ki.warn(\"\".concat(this._className,\".addSuccessCount invalid key:\"),e)}},{key:\"addFailedCountOfUserSide\",value:function(e){this._rateMessageSent.addFailedCountOfUserSide(e)||Ki.warn(\"\".concat(this._className,\".addFailedCountOfUserSide invalid key:\"),e)}},{key:\"addCost\",value:function(e,t){this._rateMessageSent.addCost(e,t)||Ki.warn(\"\".concat(this._className,\".addCost invalid key or cost:\"),e,t)}},{key:\"addFileSize\",value:function(e,t){this._rateMessageSent.addFileSize(e,t)||Ki.warn(\"\".concat(this._className,\".addFileSize invalid key or size:\"),e,t)}},{key:\"addMessageSequence\",value:function(e){this._rateMessageReceived.addMessageSequence(e)||Ki.warn(\"\".concat(this._className,\".addMessageSequence invalid key:\"),e.key)}},{key:\"_getQualityItem\",value:function(e){var n={},o=cg[this.getNetworkType()];Ji(o)&&(o=8);var r={qualityType:ig[e],timestamp:Ui(),networkType:o,extension:\"\"};switch(e){case Xp:n=this._avgRTT.getStatResult();break;case Qp:n=this._avgE2EDelay.getStatResult();break;case Zp:case eg:case tg:case ng:case og:n=this._rateMessageSent.getStatResult(e);break;case rg:case ag:case sg:n=this._rateMessageReceived.getStatResult(e)}return null===n?null:t(t({},r),n)}},{key:\"_report\",value:function(e){var t=this,n=[],o=null;Ji(e)?this._qualityItems.forEach((function(e){null!==(o=t._getQualityItem(e))&&(o.reportIndex=t.reportIndex,o.wholePeriod=t.wholePeriod,n.push(o))})):null!==(o=this._getQualityItem(e))&&(o.reportIndex=this.reportIndex,o.wholePeriod=this.wholePeriod,n.push(o)),Ki.debug(\"\".concat(this._className,\"._report\"),n),this._statInfoArr.length>0&&(n=n.concat(this._statInfoArr),this._statInfoArr=[]);var r=this.getModule(Xc),a=r.getSDKAppID(),s=r.getTinyID();Nu(this.REPORT_SDKAPPID_BLACKLIST,a)&&!Cu(this.REPORT_TINYID_WHITELIST,s)&&(n=[]),n.length>0&&this._doReport(n)}},{key:\"_doReport\",value:function(e){var n=this,o={header:tM(this),quality:e};this.request({protocolName:kd,requestData:t({},o)}).then((function(){n.reportIndex++,n.wholePeriod=!1})).catch((function(t){Ki.warn(\"\".concat(n._className,\"._doReport, online:\").concat(n.getNetworkType(),\" error:\"),t),n._statInfoArr=n._statInfoArr.concat(e),n._flushAtOnce()}))}},{key:\"_flushAtOnce\",value:function(){var e=this.getModule(Qc),t=e.getItem(this.TAG,!1),n=this._statInfoArr;if(Ou(t))Ki.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var o=n.concat(t);o.length>10&&(o=o.slice(0,10)),Ki.log(\"\".concat(this.className,\"._flushAtOnce count:\").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}this._statInfoArr=[]}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}]),r}(dl),YM=function e(t){o(this,e),Ou(t)||(this.userID=t.userID||\"\",this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.time=t.time||0,this.source=t.source||\"\",this.wording=t.wording||\"\",this.type=t.type||\"\")},$M=function(){function e(t){o(this,e),this._snsModule=t,this._className=\"FriendApplicationHandler\",this._startTime=0,this._maxLimited=100,this._currentSequence=0,this._friendApplicationMap=new Map,this._unreadCount=0}return a(e,[{key:\"getLocalFriendApplicationList\",value:function(){return{friendApplicationList:v(this._friendApplicationMap.values()),unreadCount:this._unreadCount}}},{key:\"_onFriendApplicationListUpdated\",value:function(){this._snsModule.emitOuterEvent(oo.FRIEND_APPLICATION_LIST_UPDATED,{friendApplicationList:v(this._friendApplicationMap.values()),unreadCount:this._unreadCount})}},{key:\"onFriendApplicationRead\",value:function(){this._unreadCount=0,this._onFriendApplicationListUpdated()}},{key:\"onFriendApplicationAdded\",value:function(e,n){var o=this;if(!Ou(e)){var r=\"\";r=n===this._snsModule.getMyUserID()?ro.SNS_APPLICATION_SENT_BY_ME:ro.SNS_APPLICATION_SENT_TO_ME;var a=!1;e.forEach((function(e){var n=\"\".concat(e.userID,\"_\").concat(r);r!==ro.SNS_APPLICATION_SENT_TO_ME||o._friendApplicationMap.has(n)||(o._unreadCount+=1),o._friendApplicationMap.set(n,new YM(t(t({},e),{},{type:r}))),a=!0})),a&&this._onFriendApplicationListUpdated()}}},{key:\"onFriendApplicationDeleted\",value:function(e){Ou(e)||this.getFriendApplicationList()}},{key:\"getFriendApplicationList\",value:function(){var e=this,t=new lg(wh),n=\"\".concat(this._className,\".getFriendApplicationList\");return this._snsModule.request({protocolName:Ol,requestData:{applicationType:ro.SNS_APPLICATION_TYPE_BOTH,fromAccount:this._snsModule.getMyUserID(),maxLimited:this._maxLimited,startTime:this._startTime,lastSequence:this._currentSequence}}).then((function(o){var r=o.data,a=r.resultList,s=r.unreadCount,i=r.startTime,u=r.currentSequence;e._startTime=i,e._currentSequence=u,e._unreadCount=s;var c=zi(a)?a.length:0;t.setNetworkType(e._snsModule.getNetworkType()).setMessage(\"applicationCount:\".concat(c,\" unreadCount:\").concat(s)).end(),Ki.info(\"\".concat(n,\" ok. applicationCount:\").concat(c,\" unreadCount:\").concat(s)),e._friendApplicationMap.clear(),zi(a)&&a.forEach((function(t){var n=t.userID,o=t.type,r=new YM(t);e._friendApplicationMap.set(\"\".concat(n,\"_\").concat(o),r)})),e._onFriendApplicationListUpdated()})).catch((function(o){return e._snsModule.probeNetwork().then((function(e){var n=m(e,2),r=n[0],a=n[1];t.setError(o,r,a).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),o),Ym(o)}))}},{key:\"deleteFriendApplication\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteFriendApplication\"),o=e.userID,r=e.type;if((!r||r!==ro.SNS_APPLICATION_SENT_BY_ME&&r!==ro.SNS_APPLICATION_SENT_TO_ME)&&(r=ro.SNS_APPLICATION_SENT_TO_ME),!this._friendApplicationMap.has(\"\".concat(o,\"_\").concat(r)))return Ym({code:Pd.FRIEND_APPLICATION_NOT_EXIST,message:Up});var a=new lg(Gh);return a.setMessage(\"userID:\".concat(o,\" type:\").concat(r)),this._snsModule.request({protocolName:Rl,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:[o],type:r}}).then((function(e){var s=e.data.resultList,i=s[0],u=i.to,c=i.resultCode,l=i.resultInfo;return a.setNetworkType(t._snsModule.getNetworkType()).setMoreMessage(\"resultList:\".concat(JSON.stringify(s))).end(),Ki.info(\"\".concat(n,\" ok. userID:\").concat(o,\" type:\").concat(r)),0===c?Pm():Ym({userID:u,code:c,message:l})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"acceptFriendApplication\",value:function(e){var t=this,n=\"\".concat(this._className,\".acceptFriendApplication\"),o=e.userID,r=e.remark,a=e.tag,s=e.type;(!s||s!==ro.SNS_APPLICATION_AGREE&&s!==ro.SNS_APPLICATION_AGREE_AND_ADD)&&(s=ro.SNS_APPLICATION_AGREE_AND_ADD);var i=new lg(Ph);return i.setMessage(\"userID:\".concat(o,\" type:\").concat(s)),this._snsModule.request({protocolName:Ll,requestData:{fromAccount:this._snsModule.getMyUserID(),responseFriendItem:[{userID:o,remark:r,tag:a,action:s}]}}).then((function(e){i.setNetworkType(t._snsModule.getNetworkType()).end();var r=e.data.resultList[0],a=r.resultCode,u=r.resultInfo;if(0!==a)return Ym({code:a,message:u});Ki.info(\"\".concat(n,\" ok. userID:\").concat(o,\" type:\").concat(s))})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"refuseFriendApplication\",value:function(e){var t=this,n=\"\".concat(this._className,\".refuseFriendApplication\"),o=e.userID,r=new lg(Uh);return r.setMessage(\"userID:\".concat(o)),this._snsModule.request({protocolName:Ll,requestData:{fromAccount:this._snsModule.getMyUserID(),responseFriendItem:[{userID:o,action:\"Response_Action_Reject\"}]}}).then((function(e){r.setNetworkType(t._snsModule.getNetworkType()).end();var a=e.data.resultList[0],s=a.resultCode,i=a.resultInfo;if(0!==s)return Ym({code:s,message:i});Ki.info(\"\".concat(n,\" ok. userID:\").concat(o))})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"_onFriendApplicationProcessed\",value:function(e){var t=this;if(0!==e.length){var n=!1;e.forEach((function(e){var o=\"\".concat(e.to,\"_\").concat(ro.SNS_APPLICATION_SENT_TO_ME);t._friendApplicationMap.has(o)&&(t._friendApplicationMap.delete(o),t._unreadCount-=1,n=!0)})),this._unreadCount<0&&(this._unreadCount=0),n&&this._onFriendApplicationListUpdated()}}},{key:\"setFriendApplicationRead\",value:function(){var e=this,t=\"\".concat(this._className,\".setFriendApplicationRead\"),n=new lg(Fh);return this._snsModule.request({protocolName:bl,requestData:{fromAccount:this._snsModule.getMyUserID(),latestTimeStamp:ku(Ui()/1e3,0)}}).then((function(o){n.setNetworkType(e._snsModule.getNetworkType()).end(),Ki.info(\"\".concat(t,\" ok\")),e._unreadCount=0})).catch((function(o){return e._snsModule.probeNetwork().then((function(e){var t=m(e,2),r=t[0],a=t[1];n.setError(o,r,a).end()})),Ki.warn(\"\".concat(t,\" failed. error:\"),o),Ym(o)}))}},{key:\"reset\",value:function(){this._startIndex=0,this._maxLimited=100,this._currentSequence=0,this._unreadCount=0,this._friendApplicationMap.clear()}}]),e}(),WM=Qn(\"splice\"),zM=Math.max,JM=Math.min;vt({target:\"Array\",proto:!0,forced:!WM},{splice:function(e,t){var n,o,r,a,s,i,u=re(this),c=ze(u.length),l=Qe(e,c),d=arguments.length;if(0===d?n=o=0:1===d?(n=0,o=c-l):(n=d-2,o=JM(zM($e(t),0),c-l)),c+n-o>9007199254740991)throw TypeError(\"Maximum allowed length exceeded\");for(r=Ht(u,o),a=0;a<o;a++)(s=l+a)in u&&cn(r,a,u[s]);if(r.length=o,n<o){for(a=l;a<c-o;a++)i=a+n,(s=a+o)in u?u[i]=u[s]:delete u[i];for(a=c;a>c-o+n;a--)delete u[a-1]}else if(n>o)for(a=c-o;a>l;a--)i=a+n-1,(s=a+o-1)in u?u[i]=u[s]:delete u[i];for(a=0;a<n;a++)u[a+l]=arguments[a+2];return u.length=c-o+n,r}});var XM=function(){function e(t,n){o(this,e),this.userID=t,this.remark=\"\",this.groupList=[],this.source=\"\",this.addTime=0,this.friendCustomField=[],this.timestamp=0;var r={};if(r.userID=t,!Ou(n))for(var a=\"\",s=\"\",i=0,u=n.length;i<u;i++)if(a=n[i].tag,s=n[i].value,a.indexOf(\"Tag_SNS_Custom\")>-1)this.friendCustomField.push({key:a,value:s});else switch(a){case cm.NICK:r.nick=s;break;case cm.GENDER:r.gender=s;break;case cm.BIRTHDAY:r.birthday=s;break;case cm.LOCATION:r.location=s;break;case cm.SELFSIGNATURE:r.selfSignature=s;break;case cm.ALLOWTYPE:r.allowType=s;break;case cm.LANGUAGE:r.language=s;break;case cm.AVATAR:r.avatar=s;break;case cm.MESSAGESETTINGS:r.messageSettings=s;break;case cm.ADMINFORBIDTYPE:r.adminForbidType=s;break;case cm.LEVEL:r.level=s;break;case cm.ROLE:r.role=s;break;case lm.REMARK:this.remark=s;break;case lm.ADDTIME:this.addTime=s;break;case lm.GROUP:this.groupList=JSON.parse(JSON.stringify(s));break;case lm.ADDSOURCE:this.source=s;break;case lm.ADDWORDING:break;default:Ki.log(\"snsProfileItem unkown tag->\",n[i].tag)}this.profile=new Iv(r)}return a(e,[{key:\"validate\",value:function(e){var t=!0,n=\"\";if(Ou(e))return{valid:!1,tips:\"empty options\"};if(e.profileCustomField)for(var o=e.profileCustomField.length,r=null,a=0;a<o;a++){if(r=e.profileCustomField[a],!Yi(r.key)||-1===r.key.indexOf(\"Tag_Profile_Custom\"))return{valid:!1,tips:\"自定义资料字段的前缀必须是 Tag_Profile_Custom\"};if(!Yi(r.value))return{valid:!1,tips:\"自定义资料字段的 value 必须是字符串\"}}for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(\"profileCustomField\"===s)continue;if(Ou(e[s])&&!Yi(e[s])&&!ji(e[s])){n=\"key:\"+s+\", invalid value:\"+e[s],t=!1;continue}switch(s){case\"nick\":Yi(e[s])||(n=\"nick should be a string\",t=!1),su(e[s])>500&&(n=\"nick name limited: must less than or equal to \".concat(500,\" bytes, current size: \").concat(su(e[s]),\" bytes\"),t=!1);break;case\"gender\":lu(dm,e.gender)||(n=\"key:gender, invalid value:\"+e.gender,t=!1);break;case\"birthday\":ji(e.birthday)||(n=\"birthday should be a number\",t=!1);break;case\"location\":Yi(e.location)||(n=\"location should be a string\",t=!1);break;case\"selfSignature\":Yi(e.selfSignature)||(n=\"selfSignature should be a string\",t=!1);break;case\"allowType\":lu(gm,e.allowType)||(n=\"key:allowType, invalid value:\"+e.allowType,t=!1);break;case\"language\":ji(e.language)||(n=\"language should be a number\",t=!1);break;case\"avatar\":Yi(e.avatar)||(n=\"avatar should be a string\",t=!1);break;case\"messageSettings\":0!==e.messageSettings&&1!==e.messageSettings&&(n=\"messageSettings should be 0 or 1\",t=!1);break;case\"adminForbidType\":lu(pm,e.adminForbidType)||(n=\"key:adminForbidType, invalid value:\"+e.adminForbidType,t=!1);break;case\"level\":ji(e.level)||(n=\"level should be a number\",t=!1);break;case\"role\":ji(e.role)||(n=\"role should be a number\",t=!1);break;default:n=\"unknown key:\"+s+\"  \"+e[s],t=!1}}return{valid:t,tips:n}}},{key:\"update\",value:function(e){for(var t=\"\",n=\"\",o=0,r=e.length;o<r;o++)if(t=e[o].tag,n=e[o].value,t.indexOf(\"Tag_SNS_Custom\")>-1)this.friendCustomField.forEach((function(e){e.key===t&&(e.value=n)}));else if(t.indexOf(\"Tag_Profile_Custom\")>-1)this.profile.profileCustomField.forEach((function(e){e.key===t&&(e.value=n)}));else switch(t){case cm.NICK:this.profile.nick=n;break;case cm.GENDER:this.profile.gender=n;break;case cm.BIRTHDAY:this.profile.birthday=n;break;case cm.LOCATION:this.profile.location=n;break;case cm.SELFSIGNATURE:this.profile.selfSignature=n;break;case cm.ALLOWTYPE:this.profile.allowType=n;break;case cm.LANGUAGE:this.profile.language=n;break;case cm.AVATAR:this.profile.avatar=n;break;case cm.MESSAGESETTINGS:this.profile.messageSettings=n;break;case cm.ADMINFORBIDTYPE:this.profile.adminForbidType=n;break;case cm.LEVEL:this.profile.level=n;break;case cm.ROLE:this.profile.role=n;break;case lm.REMARK:this.remark=n;break;case lm.ADDTIME:this.addTime=n;break;case lm.GROUP:this.groupList=JSON.parse(JSON.stringify(n));break;case lm.ADDSOURCE:this.source=n;break;case lm.ADDWORDING:break;default:Ki.log(\"snsProfileItem unkown tag->\",e[o].tag)}this.timestamp=Date.now()}},{key:\"updateProfile\",value:function(e){this.profile=JSON.parse(JSON.stringify(e)),this.timestamp=Date.now()}},{key:\"addToGroupList\",value:function(e){-1===this.groupList.indexOf(e)&&(this.groupList.push(e),this.count=this.groupList.length)}},{key:\"removeFromGroupList\",value:function(e){var t=this.groupList.indexOf(e);t>-1&&(this.groupList.splice(t,1),this.count=this.groupList.length)}}]),e}(),QM=function(){function e(t){o(this,e),this._snsModule=t,this._className=\"FriendHandler\",this._friendMap=new Map,this._startIndex=0,this._standardSequence=0,this._customSequence=0,this._expirationTime=18e4}return a(e,[{key:\"getLocalFriendList\",value:function(){return v(this._friendMap.values())}},{key:\"getFriendRemark\",value:function(e){return this._friendMap.has(e)?this._friendMap.get(e).remark:\"\"}},{key:\"onFriendProfileModified\",value:function(e){var t=this,n=e.dataList;if(!Ou(n)){var o=this._snsModule.getModule(Jc);n.forEach((function(e){var n=e.userID,r=e.profileList;if(t.isMyFriend(n)){Ki.log(\"\".concat(t._className,\".onFriendProfileModified. friend userID:\").concat(n));var a=t._friendMap.get(n);a.update(r),o.modifyMessageSentByPeer(\"\".concat(ro.CONV_C2C).concat(n),{nick:a.profile.nick,avatar:a.profile.avatar})}}))}}},{key:\"onFriendAdded\",value:function(e){var t=this;0!==e.length&&(Ki.log(\"\".concat(this._className,\".onFriendAdded userIDList:\").concat(e)),e.forEach((function(e){t._friendMap.set(e,new XM(e))})),this.getFriendProfile({userIDList:e}).then((function(n){e.forEach((function(e){var n=t._friendMap.get(e);n.groupList.length>0&&t._snsModule.updateWhenFriendAdded({nameList:n.groupList,userID:e})})),t._onFriendListUpdated()})))}},{key:\"onFriendDeleted\",value:function(e){var t=this;0!==e.length&&(Ki.log(\"\".concat(this._className,\".onFriendDeleted userIDList:\").concat(e)),e.forEach((function(e){var n=t._friendMap.get(e);n.groupList.length>0&&t._snsModule.updateWhenFriendDeleted({nameList:n.groupList,userID:e}),t._friendMap.delete(e)})),this._onFriendListUpdated())}},{key:\"_onFriendListUpdated\",value:function(){this._snsModule.emitOuterEvent(oo.FRIEND_LIST_UPDATED,v(this._friendMap.values())),this._snsModule.getModule(Jc).checkAndPatchRemark()}},{key:\"getFriendProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".getFriendProfile\"),o=e.userIDList,r=[],a=[],s=[];if(o.forEach((function(e){if(t._friendMap.has(e)){var n=t._friendMap.get(e);Date.now()-n.timestamp<t._expirationTime?a.push(n):s.push(e)}else r.push({userID:e,code:Pd.NOT_MY_FRIEND,message:bp})})),0===s.length)return Ki.info(\"\".concat(n,\" newUserIDList is empty\")),jm({friendList:a,failureUserIDList:r});var i=new lg(Oh);i.setMessage(\"userIDList:\".concat(s)),Ki.info(\"\".concat(n,\" userIDList:\").concat(s));var u=Object.values(lm).concat(Object.values(cm));return this._snsModule.request({protocolName:El,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:s,tagList:u}}).then((function(e){return i.setNetworkType(t._snsModule.getNetworkType()).end(),Ki.info(\"\".concat(n,\" ok\")),e.data.resultList.forEach((function(e){var n,o=e.to,s=e.resultCode,i=e.resultInfo,u=e.tagValueList;Ji(s)||0===s?(t._friendMap.has(o)?(n=t._friendMap.get(o)).update(u):(n=new XM(o,u),t._friendMap.set(o,n)),a.push(n)):r.push({userID:o,code:s,message:i})})),Pm({friendList:a,failureUserIDList:r})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"isMyFriend\",value:function(e){return this._friendMap.has(e)}},{key:\"pagingGetFriendList\",value:function(){var e=this,t=new lg(Rh),n=\"\".concat(this._className,\".getFriendList\");this._snsModule.request({protocolName:Sl,requestData:{fromAccount:this._snsModule.getMyUserID(),startIndex:this._startIndex,standardSequence:this._standardSequence,customSequence:this._customSequence}}).then((function(o){var r=o.data,a=r.friendCount,s=r.resultList,i=r.nextStartIndex,u=r.standardSequence,c=r.customSequence,l=r.completeFlag;e._startIndex=i,e._standardSequence=u,e._customSequence=c;var d=\"friendCount:\".concat(a,\" nextStartIndex:\").concat(i,\" standardSequence:\").concat(u,\" \")+\"customSequence:\".concat(c,\" completeFlag:\").concat(l);t.setNetworkType(e._snsModule.getNetworkType()).setMessage(d).end(),Ki.info(\"\".concat(n,\" ok.\"),d),Ou(s)||s.forEach((function(t){var n=t.to,o=t.tagValueList;e._friendMap.set(n,new XM(n,o))})),0===l?e.pagingGetFriendList():e._pagingGetFriendProfile()})).catch((function(o){return e._snsModule.probeNetwork().then((function(e){var n=m(e,2),r=n[0],a=n[1];t.setError(o,r,a).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),o),Ym(o)}))}},{key:\"_pagingGetFriendProfile\",value:function(){var e=this,t=v(this._friendMap.keys()),n=this._snsModule.getModule(jc),o=t.length,r=o<=100?1:o%100;Ki.log(\"\".concat(this._className,\"._pagingGetFriendProfile friendCount:\").concat(o,\" pageCount:\").concat(r));for(var a=0;a<r;a++)n.getUserProfile({userIDList:t.slice(100*a,100)}).then((function(t){t.data.forEach((function(t){var n=e._friendMap.get(t.userID);n&&n.updateProfile(t)})),e._onFriendListUpdated()}))}},{key:\"addFriend\",value:function(e){var t=this,n=\"\".concat(this._className,\".addFriend\"),o=e.to,r=e.source,a=e.type,s=e.wording,i=e.remark,u=e.groupName;if(this._friendMap.has(o))return Ym({code:Pd.ALREADY_MY_FRIEND,message:wp});var c=a;(!c||c!==ro.SNS_ADD_TYPE_SINGLE&&c!==ro.SNS_ADD_TYPE_BOTH)&&(c=ro.SNS_ADD_TYPE_BOTH);var l=new lg(Nh);return l.setMessage(\"to:\".concat(o,\" source:\").concat(r,\" type:\").concat(c)),this._snsModule.request({protocolName:Nl,requestData:{fromAccount:this._snsModule.getMyUserID(),addFriendItem:[{to:o,source:r,wording:s,remark:i,groupName:u}],type:c}}).then((function(e){var o=e.data.resultList;l.setNetworkType(t._snsModule.getNetworkType()).setMoreMessage(\"resultList:\".concat(JSON.stringify(o))).end();var r=o[0],a=r.to,s=r.resultCode,i=r.resultInfo;return Ki.info(\"\".concat(n,\" ok. to:\").concat(a,\" type:\").concat(c,\" code:\").concat(s)),Ji(s)||0===s?Pm({userID:a,code:0}):30539===s?Pm({userID:a,code:s,message:Vm[s]}):Ym({userID:a,code:s,message:Vm[s]||i})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"deleteFriend\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteFriend\"),o=e.userIDList,r=e.type;o.length>1e3&&(Ki.warn(\"\".concat(n,\" 删除好友人数不能超过1000人\")),o.length=1e3);var a=[],s=[],i=[];if(o.forEach((function(e){t._friendMap.has(e)?i.push(e):a.push({userID:e,code:Pd.NOT_MY_FRIEND,message:bp})})),0===i.length)return jm({successUserIDList:s,failureUserIDList:a});var u=r;(!u||u!==ro.SNS_DELETE_TYPE_SINGLE&&u!==ro.SNS_DELETE_TYPE_BOTH)&&(u=ro.SNS_DELETE_TYPE_BOTH);var c=new lg(Lh);return c.setMessage(\"userIDList:\".concat(i,\" type:\").concat(u)),this._snsModule.request({protocolName:kl,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:i,type:u}}).then((function(e){c.setNetworkType(t._snsModule.getNetworkType()).end(),Ki.info(\"\".concat(n,\" ok\"));var o=e.data.resultList;return Ou(o)||o.forEach((function(e){var t=e.to,n=e.resultCode,o=e.resultInfo;Ji(n)||0===n?s.push({userID:t}):a.push({userID:t,code:n,message:o})})),Pm({successUserIDList:s,failureUserIDList:a})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" error:\"),e),Ym(e)}))}},{key:\"updateFriend\",value:function(e){var t=this,n=e.userID,o=e.remark,r=e.friendCustomField;if(!this._friendMap.has(n))return Ym({code:Pd.NOT_MY_FRIEND,message:bp});var a=new lg(bh);a.setMessage(\"userID:\".concat(n,\" remark:\").concat(o,\" friendCustomField:\").concat(r));var s=\"\".concat(this._className,\".updateFriend\"),i=[];return Ji(o)||i.push({tag:lm.REMARK,value:o}),zi(r)&&r.length>0&&r.forEach((function(e){i.push({tag:e.key,value:e.value})})),this._snsModule.request({protocolName:Cl,requestData:{fromAccount:this._snsModule.getMyUserID(),updateItem:[{to:n,snsItem:i}]}}).then((function(e){a.setNetworkType(t._snsModule.getNetworkType()).end(),Ki.info(\"\".concat(s,\" ok\"));var n=e.data.resultList[0],i=n.to,u=n.resultCode,c=n.resultInfo;if(Ji(u)||0===u){var l=t._friendMap.get(i);return l&&(Ji(o)||(l.remark=o),zi(r)&&r.length>0&&fu(l.friendCustomField,r),t._onFriendListUpdated()),Pm(l)}return Ym({code:u,message:c})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.warn(\"\".concat(s,\" failed. error:\"),e),Ym(e)}))}},{key:\"checkFriend\",value:function(e){var t=this,n=\"\".concat(this._className,\".checkFriend\"),o=e.userIDList,r=e.type;(!r||r!==ro.SNS_CHECK_TYPE_SINGLE&&r!==ro.SNS_CHECK_TYPE_BOTH)&&(r=ro.SNS_CHECK_TYPE_BOTH);var a=new lg(Ch);return a.setMessage(\"userIDList:\".concat(o,\" type:\").concat(r)),this._snsModule.request({protocolName:Al,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:o,type:r}}).then((function(e){a.setNetworkType(t._snsModule.getNetworkType()).end(),Ki.info(\"\".concat(n,\" ok. userIDList:\").concat(o,\" type:\").concat(r));var s=[],i=[],u=e.data.resultList;return zi(u)&&u.forEach((function(e){var t=e.to,n=e.relation,o=e.resultCode,r=e.resultInfo;Ji(o)||0===o?s.push({userID:t,code:0,relation:n}):i.push({userID:t,code:o,message:r})})),Pm({successUserIDList:s,failureUserIDList:i})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"updateWhenAddedToFriendGroup\",value:function(e){var t=this,n=e.name,o=e.userIDList;Ki.log(\"\".concat(this._className,\".updateWhenAddedToFriendGroup groupName:\").concat(n,\" userIDList:\").concat(o)),n&&!Ou(o)&&o.forEach((function(e){t._friendMap.has(e)&&t._friendMap.get(e).addToGroupList(n)}))}},{key:\"updateWhenRemovedFromFriendGroup\",value:function(e){var t=this,n=e.name,o=e.userIDList;Ki.log(\"\".concat(this._className,\".updateWhenRemovedFromFriendGroup groupName:\").concat(n,\" userIDList:\").concat(o)),n&&!Ou(o)&&o.forEach((function(e){t._friendMap.has(e)&&t._friendMap.get(e).removeFromGroupList(n)}))}},{key:\"reset\",value:function(){this._friendMap.clear(),this._startIndex=0,this._standardSequence=0,this._customSequence=0}}]),e}(),ZM=function(){function e(t){o(this,e),Ou(t)||(this.name=t.name||\"\",this.userIDList=t.userIDList||[],this.count=this.userIDList.length||0)}return a(e,[{key:\"addToUserIDList\",value:function(e){-1===this.userIDList.indexOf(e)&&(this.userIDList.push(e),this.count=this.userIDList.length)}},{key:\"removeFromUserIDList\",value:function(e){var t=this.userIDList.indexOf(e);t>-1&&(this.userIDList.splice(t,1),this.count=this.userIDList.length)}}]),e}(),ey=function(){function e(t){o(this,e),this._snsModule=t,this._className=\"FriendGroupHandler\",this._friendGroupMap=new Map}return a(e,[{key:\"getLocalFriendGroupList\",value:function(){return v(this._friendGroupMap.values())}},{key:\"_emitFriendGroupListUpdated\",value:function(){var e=v(this._friendGroupMap.values());this._snsModule.emitOuterEvent(oo.FRIEND_GROUP_LIST_UPDATED,e)}},{key:\"getFriendGroupList\",value:function(){var e=this,t=new lg(Hh),n=\"\".concat(this._className,\".getFriendGroupList\");return this._snsModule.request({protocolName:wl,requestData:{fromAccount:this._snsModule.getMyUserID()}}).then((function(o){t.setNetworkType(e._snsModule.getNetworkType()).end();var r=o.data.resultList;Ou(r)?Ki.info(\"\".concat(n,\" ok. friend group count:0\")):(Ki.info(\"\".concat(n,\" ok. friend group count:\").concat(r.length)),e._friendGroupMap.clear(),r.forEach((function(t){var n=new ZM(t);e._friendGroupMap.set(t.name,n)})),e._emitFriendGroupListUpdated())})).catch((function(o){return e._snsModule.probeNetwork().then((function(e){var n=m(e,2),r=n[0],a=n[1];t.setError(o,r,a).end()})),Ki.warn(\"\".concat(n,\" error:\"),o),Ym(o)}))}},{key:\"createFriendGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".createFriendGroup\"),o=e.name,r=e.userIDList;if(this._friendGroupMap.has(o))return Ki.warn(\"\".concat(n,\" 好友分组 \").concat(o,\" 已经存在！\")),Ym({code:Pd.FRIEND_GROUP_EXISTED,message:Gp});var a=new lg(qh);return a.setMessage(\"name:\".concat(o,\" userIDList:\").concat(r)),this._snsModule.request({protocolName:Gl,requestData:{fromAccount:this._snsModule.getMyUserID(),groupName:[o],userIDList:zi(r)?r:void 0}}).then((function(e){a.setNetworkType(t._snsModule.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok. name:\").concat(o,\" userIDList:\").concat(r));var s=e.data.resultList,i=[],u=[];s&&s.forEach((function(e){var t=e.to,n=e.resultCode,o=e.resultInfo;if(Ji(n)||0===n)i.push(t);else{var r={userID:e.to,code:n,message:o};u.push(r)}}));var c=new ZM({name:o,userIDList:i});return t._friendGroupMap.set(o,c),t._snsModule.updateWhenAddedToFriendGroup({name:o,userIDList:i}),t._emitFriendGroupListUpdated(),Pm({friendGroup:c,failureUserIDList:u})})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"deleteFriendGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteFriendGroup\"),o=e.name;if(!this._friendGroupMap.has(o))return this._onFriendGroupNotExist(o);var r=new lg(xh);return r.setMessage(\"name:\".concat(o)),this._snsModule.request({protocolName:Pl,requestData:{fromAccount:this._snsModule.getMyUserID(),nameList:[o]}}).then((function(e){r.setNetworkType(t._snsModule.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok. name:\").concat(o));var a=t._friendGroupMap.get(o);return a&&(t._snsModule.updateWhenRemovedFromFriendGroup({name:o,userIDList:a.userIDList}),t._friendGroupMap.delete(o),a.userIDList.length=0),t._emitFriendGroupListUpdated(),Pm(a)})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"_onFriendGroupNotExist\",value:function(e){return Ki.warn(\"\".concat(this._className,\"._onFriendGroupNotExist 好友分组 \").concat(e,\" 不存在！\")),Ym({code:Pd.FRIEND_GROUP_NOT_EXIST,message:Pp})}},{key:\"renameFriendGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".renameFriendGroup\"),o=e.oldName,r=e.newName;if(!this._friendGroupMap.has(o))return this._onFriendGroupNotExist();var a=new lg(Vh).setMessage(\"oldName:\".concat(o,\" newName:\").concat(r));return this._snsModule.request({protocolName:Ul,requestData:{fromAccount:this._snsModule.getMyUserID(),oldName:o,newName:r}}).then((function(){if(a.setNetworkType(t._snsModule.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok. oldName:\").concat(o,\" newName:\").concat(r)),t._friendGroupMap.has(o)){var e=t._friendGroupMap.get(o);return e.name=r,t._friendGroupMap.delete(o),t._friendGroupMap.set(r,e),t._snsModule.updateWhenRemovedFromFriendGroup({name:o,userIDList:e.userIDList}),t._snsModule.updateWhenAddedToFriendGroup({name:r,userIDList:e.userIDList}),t._emitFriendGroupListUpdated(),Pm(e)}return Pm()})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"addToFriendGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".addToFriendGroup\"),o=e.name,r=e.userIDList;if(!this._friendGroupMap.has(o))return this._onFriendGroupNotExist(o);var a=new lg(Kh);return a.setMessage(\"name:\".concat(o,\" userIDList:\").concat(r)),Ki.log(\"\".concat(this._className,\".addToFriendGroup name:\").concat(o,\" userIDList:\").concat(r)),this._snsModule.request({protocolName:Ul,requestData:{fromAccount:this._snsModule.getMyUserID(),oldName:o,updateGroupItem:r.filter((function(e){return t._snsModule.isMyFriend(e)})).map((function(e){return{to:e,updateType:\"Update_Type_Add\"}}))}}).then((function(e){return a.setNetworkType(t._snsModule.getNetworkType()).end(),t._onFriendGroupUpdated(o,e)})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"removeFromFriendGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".removeFromFriendGroup\"),o=e.name,r=e.userIDList;if(!this._friendGroupMap.has(o))return this._onFriendGroupNotExist(o);var a=new lg(Bh);return a.setMessage(\"name:\".concat(o,\" userIDList:\").concat(r)),Ki.log(\"\".concat(n,\" name:\").concat(o,\" userIDList:\").concat(r)),this._snsModule.request({protocolName:Ul,requestData:{fromAccount:this._snsModule.getMyUserID(),oldName:o,updateGroupItem:r.filter((function(e){return t._snsModule.isMyFriend(e)})).map((function(e){return{to:e,updateType:\"Update_Type_Delete\"}}))}}).then((function(e){return a.setNetworkType(t._snsModule.getNetworkType()).end(),t._onFriendGroupUpdated(o,e)})).catch((function(e){return t._snsModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),Ym(e)}))}},{key:\"_onFriendGroupUpdated\",value:function(e,t){var n=t.data.resultList,o=this._friendGroupMap.get(e),r=[],a=[],s=[];return zi(n)&&n.forEach((function(e){var t=e.to,n=e.resultCode,i=e.resultInfo,u=e.type;0===n?\"Update_Type_Add\"===u?o&&(o.addToUserIDList(t),a.push(t)):\"Update_Type_Delete\"===u&&o&&(o.removeFromUserIDList(t),s.push(t)):r.push({to:e.to,code:n,message:i})})),Ki.log(\"\".concat(this._className,\"._onFriendGroupUpdated name:\").concat(e,\" userIDList:\").concat(o.userIDList)),a.length>0&&this._snsModule.updateWhenAddedToFriendGroup({name:e,userIDList:a}),s.length>0&&this._snsModule.updateWhenRemovedFromFriendGroup({name:e,userIDList:s}),Pm({friendGroup:o,failureUserIDList:r})}},{key:\"updateWhenFriendAdded\",value:function(e){var t=this,n=e.nameList,o=e.userID;Ki.log(\"\".concat(this._className,\".updateWhenFriendAdded userID:\").concat(o,\" nameList:\").concat(n)),Ou(n)||n.forEach((function(e){t._friendGroupMap.has(e)&&t._friendGroupMap.get(e).addToUserIDList(o)}))}},{key:\"updateWhenFriendDeleted\",value:function(e){var t=this,n=e.nameList,o=e.userID;Ki.log(\"\".concat(this._className,\".updateWhenFriendDeleted userID:\").concat(o,\" nameList:\").concat(n)),Ou(n)||n.forEach((function(e){t._friendGroupMap.has(e)&&t._friendGroupMap.get(e).removeFromUserIDList(o)}))}},{key:\"reset\",value:function(){this._friendGroupMap.clear()}}]),e}(),ty=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"SnsModule\",r._friendHandler=new QM(h(r)),r._friendApplicationHandler=new $M(h(r)),r._friendGroupHandler=new ey(h(r)),r.getInnerEmitterInstance().on(gv.CONTEXT_A2KEY_AND_TINYID_UPDATED,r.onContextUpdated,h(r)),r}return a(n,[{key:\"onContextUpdated\",value:function(e){this._friendHandler.pagingGetFriendList(),this._friendGroupHandler.getFriendGroupList(),this._friendApplicationHandler.getFriendApplicationList()}},{key:\"onRelationChainModified\",value:function(e){var t=e.dataList;if(!Ou(t)){var n=[],o=[],r=[],a=[],s=!1,i=\"\";t.forEach((function(e){3!==e.pushType&&4!==e.pushType||!e.from||(i=e.from),e.friendAddAccount&&(n.push.apply(n,v(e.friendAddAccount)),a.push.apply(a,v(e.friendAddAccount))),e.friendDelAccount&&o.push.apply(o,v(e.friendDelAccount)),e.friendApplicationAdded&&r.push.apply(r,v(e.friendApplicationAdded)),e.friendApplicationDeletedUserIDList&&a.push.apply(a,v(e.friendApplicationDeletedUserIDList)),e.reportTime&&7===e.pushType&&(s=!0)})),s&&this._friendApplicationHandler.onFriendApplicationRead(),this._friendApplicationHandler.onFriendApplicationAdded(r,i),this._friendApplicationHandler.onFriendApplicationDeleted(a),this._friendHandler.onFriendAdded(n),this._friendHandler.onFriendDeleted(o)}}},{key:\"isMyFriend\",value:function(e){return this._friendHandler.isMyFriend(e)}},{key:\"onFriendProfileModified\",value:function(e){this._friendHandler.onFriendProfileModified(e)}},{key:\"getLocalFriendList\",value:function(){var e=this._friendHandler.getLocalFriendList();return jm(e)}},{key:\"getFriendRemark\",value:function(e){return this._friendHandler.getFriendRemark(e)}},{key:\"getFriendList\",value:function(){return this._friendHandler.pagingGetFriendList()}},{key:\"addFriend\",value:function(e){return this._friendHandler.addFriend(e)}},{key:\"deleteFriend\",value:function(e){return this._friendHandler.deleteFriend(e)}},{key:\"checkFriend\",value:function(e){return this._friendHandler.checkFriend(e)}},{key:\"getFriendProfile\",value:function(e){return this._friendHandler.getFriendProfile(e)}},{key:\"updateFriend\",value:function(e){return this._friendHandler.updateFriend(e)}},{key:\"updateWhenAddedToFriendGroup\",value:function(e){this._friendHandler.updateWhenAddedToFriendGroup(e)}},{key:\"updateWhenRemovedFromFriendGroup\",value:function(e){this._friendHandler.updateWhenRemovedFromFriendGroup(e)}},{key:\"getLocalFriendApplicationList\",value:function(){var e=this._friendApplicationHandler.getLocalFriendApplicationList();return jm(e)}},{key:\"deleteFriendApplication\",value:function(e){return this._friendApplicationHandler.deleteFriendApplication(e)}},{key:\"refuseFriendApplication\",value:function(e){return this._friendApplicationHandler.refuseFriendApplication(e)}},{key:\"acceptFriendApplication\",value:function(e){return this._friendApplicationHandler.acceptFriendApplication(e)}},{key:\"setFriendApplicationRead\",value:function(e){return this._friendApplicationHandler.setFriendApplicationRead(e)}},{key:\"getLocalFriendGroupList\",value:function(){var e=this._friendGroupHandler.getLocalFriendGroupList();return jm(e)}},{key:\"createFriendGroup\",value:function(e){return this._friendGroupHandler.createFriendGroup(e)}},{key:\"deleteFriendGroup\",value:function(e){return this._friendGroupHandler.deleteFriendGroup(e)}},{key:\"addToFriendGroup\",value:function(e){return this._friendGroupHandler.addToFriendGroup(e)}},{key:\"removeFromFriendGroup\",value:function(e){return this._friendGroupHandler.removeFromFriendGroup(e)}},{key:\"renameFriendGroup\",value:function(e){return this._friendGroupHandler.renameFriendGroup(e)}},{key:\"onAddToFriendGroup\",value:function(e){return this._friendGroupHandler.onAddToFriendGroup(e)}},{key:\"updateWhenFriendAdded\",value:function(e){this._friendGroupHandler.updateWhenFriendAdded(e)}},{key:\"updateWhenFriendDeleted\",value:function(e){this._friendGroupHandler.updateWhenFriendDeleted(e)}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._friendHandler.reset(),this._friendGroupHandler.reset(),this._friendApplicationHandler.reset()}}]),n}(dl),ny=function(){function e(t){o(this,e);var n=new lg(dg);this._className=\"ModuleManager\",this._isReady=!1,this._startLoginTs=0,this._moduleMap=new Map,this._innerEmitter=null,this._outerEmitter=null,this._checkCount=0,this._checkTimer=-1,this._moduleMap.set(Xc,new Jv(this,t)),this._moduleMap.set(ul,new qM(this)),this._moduleMap.set(ll,new jM(this)),this._moduleMap.set(sl,new OM(this)),this._moduleMap.set(al,new UM(this)),this._moduleMap.set(Bc,new Xv(this)),this._moduleMap.set(Hc,new gM(this)),this._moduleMap.set(jc,new zv(this)),this._moduleMap.set(Yc,new $m(this)),this._moduleMap.set(Jc,new Cv(this)),this._moduleMap.set($c,new Bv(this)),this._moduleMap.set(zc,new jv(this)),this._moduleMap.set(Qc,new Zv(this)),this._moduleMap.set(Zc,new nM(this)),this._moduleMap.set(el,new aM(this)),this._moduleMap.set(tl,new iM(this)),this._moduleMap.set(nl,new uM(this)),this._moduleMap.set(ol,new hM(this)),this._moduleMap.set(rl,new fM(this)),this._moduleMap.set(il,new FM(this)),this._moduleMap.set(cl,new xM(this)),this._moduleMap.set(Wc,new ty(this));var r=t.instanceID,a=t.oversea,s=t.SDKAppID,i=\"instanceID:\".concat(r,\" oversea:\").concat(a,\" host:\").concat(Du(),\" \")+\"inBrowser:\".concat(si,\" inMiniApp:\").concat(ai,\" SDKAppID:\").concat(s,\" UserAgent:\").concat(ci);lg.bindEventStatModule(this._moduleMap.get(Zc)),n.setMessage(\"\".concat(i)).end(),Ki.info(\"SDK \".concat(i)),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}return a(e,[{key:\"_startTimer\",value:function(){this._checkTimer<0&&(this._checkTimer=setInterval(this._onCheckTimer.bind(this),1e3))}},{key:\"stopTimer\",value:function(){this._checkTimer>0&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}},{key:\"_onCheckTimer\",value:function(){this._checkCount+=1;var e,t=S(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2)[1];n.onCheckTimer&&n.onCheckTimer(this._checkCount)}}catch(o){t.e(o)}finally{t.f()}}},{key:\"_initReadyList\",value:function(){var e=this;this._readyList=[this._moduleMap.get(Bc),this._moduleMap.get(Jc)],this._readyList.forEach((function(t){t.ready((function(){return e._onModuleReady()}))}))}},{key:\"_onModuleReady\",value:function(){var e=!0;if(this._readyList.forEach((function(t){t.isReady()||(e=!1)})),e&&!this._isReady){this._isReady=!0,this._outerEmitter.emit(oo.SDK_READY);var t=Date.now()-this._startLoginTs;Ki.warn(\"SDK is ready. cost \".concat(t,\" ms\")),this._startLoginTs=Date.now();var n=this._moduleMap.get(el).getNetworkType(),o=this._ssoLogForReady.getStartTs()+Pi;this._ssoLogForReady.setNetworkType(n).setMessage(t).start(o).end()}}},{key:\"login\",value:function(){0===this._startLoginTs&&(Fi(),this._startLoginTs=Date.now(),this._startTimer(),this._moduleMap.get(el).start(),this._ssoLogForReady=new lg(pg))}},{key:\"onLoginFailed\",value:function(){this._startLoginTs=0}},{key:\"getOuterEmitterInstance\",value:function(){return null===this._outerEmitter&&(this._outerEmitter=new sM,Hm(this._outerEmitter),this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(e,t){var n=arguments[0],o=[n,{name:arguments[0],data:arguments[1]}];this._outerEmitter._emit.apply(this._outerEmitter,o)}.bind(this)),this._outerEmitter}},{key:\"getInnerEmitterInstance\",value:function(){return null===this._innerEmitter&&(this._innerEmitter=new sM,this._innerEmitter._emit=this._innerEmitter.emit,this._innerEmitter.emit=function(e,t){var n;Wi(arguments[1])&&arguments[1].data?(Ki.warn(\"inner eventData has data property, please check!\"),n=[e,{name:arguments[0],data:arguments[1].data}]):n=[e,{name:arguments[0],data:arguments[1]}],this._innerEmitter._emit.apply(this._innerEmitter,n)}.bind(this)),this._innerEmitter}},{key:\"hasModule\",value:function(e){return this._moduleMap.has(e)}},{key:\"getModule\",value:function(e){return this._moduleMap.get(e)}},{key:\"isReady\",value:function(){return this._isReady}},{key:\"onError\",value:function(e){Ki.warn(\"Oops! code:\".concat(e.code,\" message:\").concat(e.message)),new lg(Wh).setMessage(\"code:\".concat(e.code,\" message:\").concat(e.message)).setNetworkType(this.getModule(el).getNetworkType()).setLevel(\"error\").end(),this.getOuterEmitterInstance().emit(oo.ERROR,e)}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),Fi();var e,t=S(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2)[1];n.reset&&n.reset()}}catch(o){t.e(o)}finally{t.f()}this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._outerEmitter.emit(oo.SDK_NOT_READY)}}]),e}(),oy=function(){function e(){o(this,e),this._funcMap=new Map}return a(e,[{key:\"defense\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(\"string\"!=typeof e)return null;if(0===e.length)return null;if(\"function\"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var o=null;return this._funcMap.get(e).has(t)?o=this._funcMap.get(e).get(t):(o=this._pack(e,t,n),this._funcMap.get(e).set(t,o)),o}},{key:\"defenseOnce\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return\"function\"!=typeof t?null:this._pack(e,t,n)}},{key:\"find\",value:function(e,t){return\"string\"!=typeof e||0===e.length||\"function\"!=typeof t?null:this._funcMap.has(e)?this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(Ki.log(\"SafetyCallback.find: 找不到 func —— \".concat(e,\"/\").concat(\"\"!==t.name?t.name:\"[anonymous]\")),null):(Ki.log(\"SafetyCallback.find: 找不到 eventName-\".concat(e,\" 对应的 func\")),null)}},{key:\"delete\",value:function(e,t){return\"function\"==typeof t&&(!!this._funcMap.has(e)&&(!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)))}},{key:\"_pack\",value:function(e,t,n){return function(){try{t.apply(n,Array.from(arguments))}catch(s){var o=Object.values(oo).indexOf(e);if(-1!==o){var r=Object.keys(oo)[o];Ki.warn(\"接入侧事件 TIM.EVENT.\".concat(r,\" 对应的回调函数逻辑存在问题，请检查！\"),s)}var a=new lg(jh);a.setMessage(\"eventName:\".concat(e)).setMoreMessage(s.message).end()}}}}]),e}(),ry=function(){function e(t){o(this,e);var n={SDKAppID:t.SDKAppID,unlimitedAVChatRoom:t.unlimitedAVChatRoom||!1,scene:t.scene||\"\",oversea:t.oversea||!1,instanceID:Tu()};this._moduleManager=new ny(n),this._safetyCallbackFactory=new oy}return a(e,[{key:\"isReady\",value:function(){return this._moduleManager.isReady()}},{key:\"onError\",value:function(e){this._moduleManager.onError(e)}},{key:\"login\",value:function(e){return this._moduleManager.login(),this._moduleManager.getModule(Bc).login(e)}},{key:\"logout\",value:function(){var e=this;return this._moduleManager.getModule(Bc).logout().then((function(t){return e._moduleManager.reset(),t}))}},{key:\"destroy\",value:function(){var e=this;return this.logout().finally((function(){e._moduleManager.stopTimer(),e._moduleManager.getModule(sl).dealloc();var t=e._moduleManager.getOuterEmitterInstance(),n=e._moduleManager.getModule(Xc);t.emit(oo.SDK_DESTROY,{SDKAppID:n.getSDKAppID()})}))}},{key:\"on\",value:function(e,t,n){e===oo.GROUP_SYSTEM_NOTICE_RECEIVED&&Ki.warn(\"！！！TIM.EVENT.GROUP_SYSTEM_NOTICE_RECEIVED v2.6.0起弃用，为了更好的体验，请在 TIM.EVENT.MESSAGE_RECEIVED 事件回调内接收处理群系统通知，详细请参考：https://web.sdk.qcloud.com/im/doc/zh-cn/Message.html#.GroupSystemNoticePayload\"),Ki.debug(\"on\",\"eventName:\".concat(e)),this._moduleManager.getOuterEmitterInstance().on(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:\"once\",value:function(e,t,n){Ki.debug(\"once\",\"eventName:\".concat(e)),this._moduleManager.getOuterEmitterInstance().once(e,this._safetyCallbackFactory.defenseOnce(e,t,n),n||this)}},{key:\"off\",value:function(e,t,n,o){Ki.debug(\"off\",\"eventName:\".concat(e));var r=this._safetyCallbackFactory.find(e,t);null!==r&&(this._moduleManager.getOuterEmitterInstance().off(e,r,n,o),this._safetyCallbackFactory.delete(e,t))}},{key:\"registerPlugin\",value:function(e){this._moduleManager.getModule(ol).registerPlugin(e)}},{key:\"setLogLevel\",value:function(e){if(e<=0){console.log([\"\",\" ________  ______  __       __  __       __  ________  _______\",\"|        \\\\\\\\|      \\\\\\\\|  \\\\\\\\     /  \\\\\\\\|  \\\\\\\\  _  |  \\\\\\\\|        \\\\\\\\|       \\\\\\\\\",\" \\\\\\\\$$$$$$$$ \\\\\\\\$$$$$$| $$\\\\\\\\   /  $$| $$ / \\\\\\\\ | $$| $$$$$$$$| $$$$$$$\\\\\\\\\",\"   | $$     | $$  | $$$\\\\\\\\ /  $$$| $$/  $\\\\\\\\| $$| $$__    | $$__/ $$\",\"   | $$     | $$  | $$$$\\\\\\\\  $$$$| $$  $$$\\\\\\\\ $$| $$  \\\\\\\\   | $$    $$\",\"   | $$     | $$  | $$\\\\\\\\$$ $$ $$| $$ $$\\\\\\\\$$\\\\\\\\$$| $$$$$   | $$$$$$$\\\\\\\\\",\"   | $$    _| $$_ | $$ \\\\\\\\$$$| $$| $$$$  \\\\\\\\$$$$| $$_____ | $$__/ $$\",\"   | $$   |   $$ \\\\\\\\| $$  \\\\\\\\$ | $$| $$$    \\\\\\\\$$$| $$     \\\\\\\\| $$    $$\",\"    \\\\\\\\$$    \\\\\\\\$$$$$$ \\\\\\\\$$      \\\\\\\\$$ \\\\\\\\$$      \\\\\\\\$$ \\\\\\\\$$$$$$$$ \\\\\\\\$$$$$$$\",\"\",\"\"].join(\"\\\\n\")),console.log(\"%cIM 智能客服，随时随地解决您的问题 →_→ https://cloud.tencent.com/act/event/smarty-service?from=im-doc\",\"color:#006eff\"),console.log(\"%c从v2.11.2起，SDK 支持了 WebSocket，小程序需要添加受信域名！升级指引: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html\",\"color:#ff0000\");console.log([\"\",\"参考以下文档，会更快解决问题哦！(#^.^#)\\\\n\",\"SDK 更新日志: https://cloud.tencent.com/document/product/269/38492\\\\n\",\"SDK 接口文档: https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html\\\\n\",\"常见问题: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-01-faq.html\\\\n\",\"反馈问题？戳我提 issue: https://github.com/tencentyun/TIMSDK/issues\\\\n\",\"如果您需要在生产环境关闭上面的日志，请 tim.setLogLevel(1)\\\\n\"].join(\"\\\\n\"))}Ki.setLevel(e)}},{key:\"createTextMessage\",value:function(e){return this._moduleManager.getModule(Hc).createTextMessage(e)}},{key:\"createTextAtMessage\",value:function(e){return this._moduleManager.getModule(Hc).createTextMessage(e)}},{key:\"createImageMessage\",value:function(e){return this._moduleManager.getModule(Hc).createImageMessage(e)}},{key:\"createAudioMessage\",value:function(e){return this._moduleManager.getModule(Hc).createAudioMessage(e)}},{key:\"createVideoMessage\",value:function(e){return this._moduleManager.getModule(Hc).createVideoMessage(e)}},{key:\"createCustomMessage\",value:function(e){return this._moduleManager.getModule(Hc).createCustomMessage(e)}},{key:\"createFaceMessage\",value:function(e){return this._moduleManager.getModule(Hc).createFaceMessage(e)}},{key:\"createFileMessage\",value:function(e){return this._moduleManager.getModule(Hc).createFileMessage(e)}},{key:\"createMergerMessage\",value:function(e){return this._moduleManager.getModule(Hc).createMergerMessage(e)}},{key:\"downloadMergerMessage\",value:function(e){return e.type!==ro.MSG_MERGER?Ym(new Km({code:Pd.MESSAGE_MERGER_TYPE_INVALID,message:dp})):Ou(e.payload.downloadKey)?Ym(new Km({code:Pd.MESSAGE_MERGER_KEY_INVALID,message:pp})):this._moduleManager.getModule(Hc).downloadMergerMessage(e).catch((function(e){return Ym(new Km({code:Pd.MESSAGE_MERGER_DOWNLOAD_FAIL,message:gp}))}))}},{key:\"createForwardMessage\",value:function(e){return this._moduleManager.getModule(Hc).createForwardMessage(e)}},{key:\"sendMessage\",value:function(e,t){return e instanceof Gm?this._moduleManager.getModule(Hc).sendMessageInstance(e,t):Ym(new Km({code:Pd.MESSAGE_SEND_NEED_MESSAGE_INSTANCE,message:$d}))}},{key:\"callExperimentalAPI\",value:function(e,t){return\"handleGroupInvitation\"===e?this._moduleManager.getModule($c).handleGroupInvitation(t):Ym(new Km({code:Pd.INVALID_OPERATION,message:Yp}))}},{key:\"revokeMessage\",value:function(e){return this._moduleManager.getModule(Hc).revokeMessage(e)}},{key:\"resendMessage\",value:function(e){return this._moduleManager.getModule(Hc).resendMessage(e)}},{key:\"deleteMessage\",value:function(e){return this._moduleManager.getModule(Hc).deleteMessage(e)}},{key:\"getMessageList\",value:function(e){return this._moduleManager.getModule(Jc).getMessageList(e)}},{key:\"setMessageRead\",value:function(e){return this._moduleManager.getModule(Jc).setMessageRead(e)}},{key:\"getConversationList\",value:function(){return this._moduleManager.getModule(Jc).getConversationList()}},{key:\"getConversationProfile\",value:function(e){return this._moduleManager.getModule(Jc).getConversationProfile(e)}},{key:\"deleteConversation\",value:function(e){return this._moduleManager.getModule(Jc).deleteConversation(e)}},{key:\"pinConversation\",value:function(e){return this._moduleManager.getModule(Jc).pinConversation(e)}},{key:\"getMyProfile\",value:function(){return this._moduleManager.getModule(jc).getMyProfile()}},{key:\"getUserProfile\",value:function(e){return this._moduleManager.getModule(jc).getUserProfile(e)}},{key:\"updateMyProfile\",value:function(e){return this._moduleManager.getModule(jc).updateMyProfile(e)}},{key:\"getBlacklist\",value:function(){return this._moduleManager.getModule(jc).getLocalBlacklist()}},{key:\"addToBlacklist\",value:function(e){return this._moduleManager.getModule(jc).addBlacklist(e)}},{key:\"removeFromBlacklist\",value:function(e){return this._moduleManager.getModule(jc).deleteBlacklist(e)}},{key:\"getFriendList\",value:function(){var e=this._moduleManager.getModule(Wc);return e?e.getLocalFriendList():Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"addFriend\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.addFriend(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"deleteFriend\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.deleteFriend(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"checkFriend\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.checkFriend(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"getFriendProfile\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.getFriendProfile(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"updateFriend\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.updateFriend(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"getFriendApplicationList\",value:function(){var e=this._moduleManager.getModule(Wc);return e?e.getLocalFriendApplicationList():Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"acceptFriendApplication\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.acceptFriendApplication(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"refuseFriendApplication\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.refuseFriendApplication(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"deleteFriendApplication\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.deleteFriendApplication(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"setFriendApplicationRead\",value:function(){var e=this._moduleManager.getModule(Wc);return e?e.setFriendApplicationRead():Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"getFriendGroupList\",value:function(){var e=this._moduleManager.getModule(Wc);return e?e.getLocalFriendGroupList():Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"createFriendGroup\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.createFriendGroup(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"deleteFriendGroup\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.deleteFriendGroup(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"addToFriendGroup\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.addToFriendGroup(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"removeFromFriendGroup\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.removeFromFriendGroup(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"renameFriendGroup\",value:function(e){var t=this._moduleManager.getModule(Wc);return t?t.renameFriendGroup(e):Ym({code:Pd.CANNOT_FIND_MODULE,message:Wp})}},{key:\"getGroupList\",value:function(e){return this._moduleManager.getModule($c).getGroupList(e)}},{key:\"getGroupProfile\",value:function(e){return this._moduleManager.getModule($c).getGroupProfile(e)}},{key:\"createGroup\",value:function(e){return this._moduleManager.getModule($c).createGroup(e)}},{key:\"dismissGroup\",value:function(e){return this._moduleManager.getModule($c).dismissGroup(e)}},{key:\"updateGroupProfile\",value:function(e){return this._moduleManager.getModule($c).updateGroupProfile(e)}},{key:\"joinGroup\",value:function(e){return this._moduleManager.getModule($c).joinGroup(e)}},{key:\"quitGroup\",value:function(e){return this._moduleManager.getModule($c).quitGroup(e)}},{key:\"searchGroupByID\",value:function(e){return this._moduleManager.getModule($c).searchGroupByID(e)}},{key:\"getGroupOnlineMemberCount\",value:function(e){return this._moduleManager.getModule($c).getGroupOnlineMemberCount(e)}},{key:\"changeGroupOwner\",value:function(e){return this._moduleManager.getModule($c).changeGroupOwner(e)}},{key:\"handleGroupApplication\",value:function(e){return this._moduleManager.getModule($c).handleGroupApplication(e)}},{key:\"initGroupAttributes\",value:function(e){return this._moduleManager.getModule($c).initGroupAttributes(e)}},{key:\"setGroupAttributes\",value:function(e){return this._moduleManager.getModule($c).setGroupAttributes(e)}},{key:\"deleteGroupAttributes\",value:function(e){return this._moduleManager.getModule($c).deleteGroupAttributes(e)}},{key:\"getGroupAttributes\",value:function(e){return this._moduleManager.getModule($c).getGroupAttributes(e)}},{key:\"getGroupMemberList\",value:function(e){return this._moduleManager.getModule(zc).getGroupMemberList(e)}},{key:\"getGroupMemberProfile\",value:function(e){return this._moduleManager.getModule(zc).getGroupMemberProfile(e)}},{key:\"addGroupMember\",value:function(e){return this._moduleManager.getModule(zc).addGroupMember(e)}},{key:\"deleteGroupMember\",value:function(e){return this._moduleManager.getModule(zc).deleteGroupMember(e)}},{key:\"setGroupMemberMuteTime\",value:function(e){return this._moduleManager.getModule(zc).setGroupMemberMuteTime(e)}},{key:\"setGroupMemberRole\",value:function(e){return this._moduleManager.getModule(zc).setGroupMemberRole(e)}},{key:\"setGroupMemberNameCard\",value:function(e){return this._moduleManager.getModule(zc).setGroupMemberNameCard(e)}},{key:\"setGroupMemberCustomField\",value:function(e){return this._moduleManager.getModule(zc).setGroupMemberCustomField(e)}},{key:\"setMessageRemindType\",value:function(e){return this._moduleManager.getModule(zc).setMessageRemindType(e)}}]),e}(),ay={login:\"login\",logout:\"logout\",destroy:\"destroy\",on:\"on\",off:\"off\",ready:\"ready\",setLogLevel:\"setLogLevel\",joinGroup:\"joinGroup\",quitGroup:\"quitGroup\",registerPlugin:\"registerPlugin\",getGroupOnlineMemberCount:\"getGroupOnlineMemberCount\"};function sy(e,t){if(e.isReady()||void 0!==ay[t])return!0;var n=new Km({code:Pd.SDK_IS_NOT_READY,message:\"\".concat(t,\" \").concat(zp,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/module-EVENT.html#.SDK_READY\")});return e.onError(n),!1}var iy={},uy={};return uy.create=function(e){var n=0;if(ji(e.SDKAppID))n=e.SDKAppID;else if(Ki.warn(\"TIM.create SDKAppID 的类型应该为 Number，请修改！\"),n=parseInt(e.SDKAppID),isNaN(n))return Ki.error(\"TIM.create failed. 解析 SDKAppID 失败，请检查传参！\"),null;if(n&&iy[n])return iy[n];Ki.log(\"TIM.create\");var o=new ry(t(t({},e),{},{SDKAppID:n}));o.on(oo.SDK_DESTROY,(function(e){iy[e.data.SDKAppID]=null,delete iy[e.data.SDKAppID]}));var r=function(e){var t=Object.create(null);return Object.keys(wc).forEach((function(n){if(e[n]){var o=wc[n],r=new po;t[o]=function(){var t=Array.from(arguments);return r.use((function(t,o){return sy(e,n)?o():Ym(new Km({code:Pd.SDK_IS_NOT_READY,message:\"\".concat(n,\" \").concat(zp,\"。\")}))})).use((function(e,t){if(!0===Ru(e,bc[n],o))return t()})).use((function(t,o){return e[n].apply(e,t)})),r.run(t)}}})),t}(o);return iy[n]=r,Ki.log(\"TIM.create ok\"),r},uy.TYPES=ro,uy.EVENT=oo,uy.VERSION=\"2.14.0\",Ki.log(\"TIM.VERSION: \".concat(uy.VERSION)),uy}));\\n\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGltLWpzLXNkay90aW0tanMtZnJpZW5kc2hpcC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90aW0tanMtc2RrL3RpbS1qcy1mcmllbmRzaGlwLmpzP2VhMWIiXSwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuVElNPXQoKX0odGhpcywoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIG49T2JqZWN0LmtleXMoZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIG89T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTt0JiYobz1vLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KS5lbnVtZXJhYmxlfSkpKSxuLnB1c2guYXBwbHkobixvKX1yZXR1cm4gbn1mdW5jdGlvbiB0KHQpe2Zvcih2YXIgbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspe3ZhciBvPW51bGwhPWFyZ3VtZW50c1tuXT9hcmd1bWVudHNbbl06e307biUyP2UoT2JqZWN0KG8pLCEwKS5mb3JFYWNoKChmdW5jdGlvbihlKXtzKHQsZSxvW2VdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG8pKTplKE9iamVjdChvKSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8sZSkpfSkpfXJldHVybiB0fWZ1bmN0aW9uIG4oZSl7cmV0dXJuKG49XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIHIoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIG89dFtuXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fWZ1bmN0aW9uIGEoZSx0LG4pe3JldHVybiB0JiZyKGUucHJvdG90eXBlLHQpLG4mJnIoZSxuKSxlfWZ1bmN0aW9uIHMoZSx0LG4pe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09bixlfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJmMoZSx0KX1mdW5jdGlvbiB1KGUpe3JldHVybih1PU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiBjKGUsdCl7cmV0dXJuKGM9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9KShlLHQpfWZ1bmN0aW9uIGwoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiExfX1mdW5jdGlvbiBkKGUsdCxuKXtyZXR1cm4oZD1sKCk/UmVmbGVjdC5jb25zdHJ1Y3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPVtudWxsXTtvLnB1c2guYXBwbHkobyx0KTt2YXIgcj1uZXcoRnVuY3Rpb24uYmluZC5hcHBseShlLG8pKTtyZXR1cm4gbiYmYyhyLG4ucHJvdG90eXBlKSxyfSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIHAoZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgTWFwP25ldyBNYXA6dm9pZCAwO3JldHVybihwPWZ1bmN0aW9uKGUpe2lmKG51bGw9PT1lfHwobj1lLC0xPT09RnVuY3Rpb24udG9TdHJpbmcuY2FsbChuKS5pbmRleE9mKFwiW25hdGl2ZSBjb2RlXVwiKSkpcmV0dXJuIGU7dmFyIG47aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7aWYodm9pZCAwIT09dCl7aWYodC5oYXMoZSkpcmV0dXJuIHQuZ2V0KGUpO3Quc2V0KGUsbyl9ZnVuY3Rpb24gbygpe3JldHVybiBkKGUsYXJndW1lbnRzLHUodGhpcykuY29uc3RydWN0b3IpfXJldHVybiBvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6byxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxjKG8sZSl9KShlKX1mdW5jdGlvbiBnKGUsdCl7aWYobnVsbD09ZSlyZXR1cm57fTt2YXIgbixvLHI9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT1lKXJldHVybnt9O3ZhciBuLG8scj17fSxhPU9iamVjdC5rZXlzKGUpO2ZvcihvPTA7bzxhLmxlbmd0aDtvKyspbj1hW29dLHQuaW5kZXhPZihuKT49MHx8KHJbbl09ZVtuXSk7cmV0dXJuIHJ9KGUsdCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIGE9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtmb3Iobz0wO288YS5sZW5ndGg7bysrKW49YVtvXSx0LmluZGV4T2Yobik+PTB8fE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLG4pJiYocltuXT1lW25dKX1yZXR1cm4gcn1mdW5jdGlvbiBoKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiBlfWZ1bmN0aW9uIGYoZSx0KXtyZXR1cm4hdHx8XCJvYmplY3RcIiE9dHlwZW9mIHQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/aChlKTp0fWZ1bmN0aW9uIF8oZSl7dmFyIHQ9bCgpO3JldHVybiBmdW5jdGlvbigpe3ZhciBuLG89dShlKTtpZih0KXt2YXIgcj11KHRoaXMpLmNvbnN0cnVjdG9yO249UmVmbGVjdC5jb25zdHJ1Y3Qobyxhcmd1bWVudHMscil9ZWxzZSBuPW8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBmKHRoaXMsbil9fWZ1bmN0aW9uIG0oZSx0KXtyZXR1cm4gTShlKXx8ZnVuY3Rpb24oZSx0KXt2YXIgbj1udWxsPT1lP251bGw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdfHxlW1wiQEBpdGVyYXRvclwiXTtpZihudWxsPT1uKXJldHVybjt2YXIgbyxyLGE9W10scz0hMCxpPSExO3RyeXtmb3Iobj1uLmNhbGwoZSk7IShzPShvPW4ubmV4dCgpKS5kb25lKSYmKGEucHVzaChvLnZhbHVlKSwhdHx8YS5sZW5ndGghPT10KTtzPSEwKTt9Y2F0Y2godSl7aT0hMCxyPXV9ZmluYWxseXt0cnl7c3x8bnVsbD09bi5yZXR1cm58fG4ucmV0dXJuKCl9ZmluYWxseXtpZihpKXRocm93IHJ9fXJldHVybiBhfShlLHQpfHxJKGUsdCl8fEQoKX1mdW5jdGlvbiB2KGUpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBUKGUpfShlKXx8eShlKXx8SShlKXx8ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX0oKX1mdW5jdGlvbiBNKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGV9ZnVuY3Rpb24geShlKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZudWxsIT1lW1N5bWJvbC5pdGVyYXRvcl18fG51bGwhPWVbXCJAQGl0ZXJhdG9yXCJdKXJldHVybiBBcnJheS5mcm9tKGUpfWZ1bmN0aW9uIEkoZSx0KXtpZihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gVChlLHQpO3ZhciBuPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LC0xKTtyZXR1cm5cIk9iamVjdFwiPT09biYmZS5jb25zdHJ1Y3RvciYmKG49ZS5jb25zdHJ1Y3Rvci5uYW1lKSxcIk1hcFwiPT09bnx8XCJTZXRcIj09PW4/QXJyYXkuZnJvbShlKTpcIkFyZ3VtZW50c1wiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobik/VChlLHQpOnZvaWQgMH19ZnVuY3Rpb24gVChlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgbj0wLG89bmV3IEFycmF5KHQpO248dDtuKyspb1tuXT1lW25dO3JldHVybiBvfWZ1bmN0aW9uIEQoKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfWZ1bmN0aW9uIFMoZSx0KXt2YXIgbj1cInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl18fGVbXCJAQGl0ZXJhdG9yXCJdO2lmKCFuKXtpZihBcnJheS5pc0FycmF5KGUpfHwobj1JKGUpKXx8dCYmZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXtuJiYoZT1uKTt2YXIgbz0wLHI9ZnVuY3Rpb24oKXt9O3JldHVybntzOnIsbjpmdW5jdGlvbigpe3JldHVybiBvPj1lLmxlbmd0aD97ZG9uZTohMH06e2RvbmU6ITEsdmFsdWU6ZVtvKytdfX0sZTpmdW5jdGlvbihlKXt0aHJvdyBlfSxmOnJ9fXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX12YXIgYSxzPSEwLGk9ITE7cmV0dXJue3M6ZnVuY3Rpb24oKXtuPW4uY2FsbChlKX0sbjpmdW5jdGlvbigpe3ZhciBlPW4ubmV4dCgpO3JldHVybiBzPWUuZG9uZSxlfSxlOmZ1bmN0aW9uKGUpe2k9ITAsYT1lfSxmOmZ1bmN0aW9uKCl7dHJ5e3N8fG51bGw9PW4ucmV0dXJufHxuLnJldHVybigpfWZpbmFsbHl7aWYoaSl0aHJvdyBhfX19fXZhciBFPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp7fTtmdW5jdGlvbiBBKGUsdCl7cmV0dXJuIGUodD17ZXhwb3J0czp7fX0sdC5leHBvcnRzKSx0LmV4cG9ydHN9dmFyIGssTixDPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLk1hdGg9PU1hdGgmJmV9LEw9QyhcIm9iamVjdFwiPT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcyl8fEMoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93KXx8QyhcIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmc2VsZil8fEMoXCJvYmplY3RcIj09dHlwZW9mIEUmJkUpfHxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCksTz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fSxSPSFPKChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sMSx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSlbMV19KSksYj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSx3PU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsRz17Zjp3JiYhYi5jYWxsKHsxOjJ9LDEpP2Z1bmN0aW9uKGUpe3ZhciB0PXcodGhpcyxlKTtyZXR1cm4hIXQmJnQuZW51bWVyYWJsZX06Yn0sUD1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX0sVT17fS50b1N0cmluZyxGPWZ1bmN0aW9uKGUpe3JldHVybiBVLmNhbGwoZSkuc2xpY2UoOCwtMSl9LHE9XCJcIi5zcGxpdCx4PU8oKGZ1bmN0aW9uKCl7cmV0dXJuIU9iamVjdChcInpcIikucHJvcGVydHlJc0VudW1lcmFibGUoMCl9KSk/ZnVuY3Rpb24oZSl7cmV0dXJuXCJTdHJpbmdcIj09RihlKT9xLmNhbGwoZSxcIlwiKTpPYmplY3QoZSl9Ok9iamVjdCxWPWZ1bmN0aW9uKGUpe2lmKG51bGw9PWUpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gXCIrZSk7cmV0dXJuIGV9LEs9ZnVuY3Rpb24oZSl7cmV0dXJuIHgoVihlKSl9LEI9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGU/bnVsbCE9PWU6XCJmdW5jdGlvblwiPT10eXBlb2YgZX0sSD1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2U6dm9pZCAwfSxqPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8Mj9IKExbZV0pOkxbZV0mJkxbZV1bdF19LFk9aihcIm5hdmlnYXRvclwiLFwidXNlckFnZW50XCIpfHxcIlwiLCQ9TC5wcm9jZXNzLFc9TC5EZW5vLHo9JCYmJC52ZXJzaW9uc3x8VyYmVy52ZXJzaW9uLEo9eiYmei52ODtKP049KGs9Si5zcGxpdChcIi5cIikpWzBdPDQ/MTprWzBdK2tbMV06WSYmKCEoaz1ZLm1hdGNoKC9FZGdlXFwvKFxcZCspLykpfHxrWzFdPj03NCkmJihrPVkubWF0Y2goL0Nocm9tZVxcLyhcXGQrKS8pKSYmKE49a1sxXSk7dmFyIFg9TiYmK04sUT0hIU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMmJiFPKChmdW5jdGlvbigpe3ZhciBlPVN5bWJvbCgpO3JldHVybiFTdHJpbmcoZSl8fCEoT2JqZWN0KGUpaW5zdGFuY2VvZiBTeW1ib2wpfHwhU3ltYm9sLnNoYW0mJlgmJlg8NDF9KSksWj1RJiYhU3ltYm9sLnNoYW0mJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3IsZWU9Wj9mdW5jdGlvbihlKXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZX06ZnVuY3Rpb24oZSl7dmFyIHQ9aihcIlN5bWJvbFwiKTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZPYmplY3QoZSlpbnN0YW5jZW9mIHR9LHRlPWZ1bmN0aW9uKGUsdCl7dHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eShMLGUse3ZhbHVlOnQsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSl9Y2F0Y2gobil7TFtlXT10fXJldHVybiB0fSxuZT1MW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdfHx0ZShcIl9fY29yZS1qc19zaGFyZWRfX1wiLHt9KSxvZT1BKChmdW5jdGlvbihlKXsoZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5lW2VdfHwobmVbZV09dm9pZCAwIT09dD90Ont9KX0pKFwidmVyc2lvbnNcIixbXSkucHVzaCh7dmVyc2lvbjpcIjMuMTYuMVwiLG1vZGU6XCJnbG9iYWxcIixjb3B5cmlnaHQ6XCLCqSAyMDIxIERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpXCJ9KX0pKSxyZT1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KFYoZSkpfSxhZT17fS5oYXNPd25Qcm9wZXJ0eSxzZT1PYmplY3QuaGFzT3dufHxmdW5jdGlvbihlLHQpe3JldHVybiBhZS5jYWxsKHJlKGUpLHQpfSxpZT0wLHVlPU1hdGgucmFuZG9tKCksY2U9ZnVuY3Rpb24oZSl7cmV0dXJuXCJTeW1ib2woXCIrU3RyaW5nKHZvaWQgMD09PWU/XCJcIjplKStcIilfXCIrKCsraWUrdWUpLnRvU3RyaW5nKDM2KX0sbGU9b2UoXCJ3a3NcIiksZGU9TC5TeW1ib2wscGU9Wj9kZTpkZSYmZGUud2l0aG91dFNldHRlcnx8Y2UsZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHNlKGxlLGUpJiYoUXx8XCJzdHJpbmdcIj09dHlwZW9mIGxlW2VdKXx8KFEmJnNlKGRlLGUpP2xlW2VdPWRlW2VdOmxlW2VdPXBlKFwiU3ltYm9sLlwiK2UpKSxsZVtlXX0saGU9Z2UoXCJ0b1ByaW1pdGl2ZVwiKSxmZT1mdW5jdGlvbihlLHQpe2lmKCFCKGUpfHxlZShlKSlyZXR1cm4gZTt2YXIgbixvPWVbaGVdO2lmKHZvaWQgMCE9PW8pe2lmKHZvaWQgMD09PXQmJih0PVwiZGVmYXVsdFwiKSxuPW8uY2FsbChlLHQpLCFCKG4pfHxlZShuKSlyZXR1cm4gbjt0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIil9cmV0dXJuIHZvaWQgMD09PXQmJih0PVwibnVtYmVyXCIpLGZ1bmN0aW9uKGUsdCl7dmFyIG4sbztpZihcInN0cmluZ1wiPT09dCYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj1lLnRvU3RyaW5nKSYmIUIobz1uLmNhbGwoZSkpKXJldHVybiBvO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mKG49ZS52YWx1ZU9mKSYmIUIobz1uLmNhbGwoZSkpKXJldHVybiBvO2lmKFwic3RyaW5nXCIhPT10JiZcImZ1bmN0aW9uXCI9PXR5cGVvZihuPWUudG9TdHJpbmcpJiYhQihvPW4uY2FsbChlKSkpcmV0dXJuIG87dGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpfShlLHQpfSxfZT1mdW5jdGlvbihlKXt2YXIgdD1mZShlLFwic3RyaW5nXCIpO3JldHVybiBlZSh0KT90OlN0cmluZyh0KX0sbWU9TC5kb2N1bWVudCx2ZT1CKG1lKSYmQihtZS5jcmVhdGVFbGVtZW50KSxNZT1mdW5jdGlvbihlKXtyZXR1cm4gdmU/bWUuY3JlYXRlRWxlbWVudChlKTp7fX0seWU9IVImJiFPKChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoTWUoXCJkaXZcIiksXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KSksSWU9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixUZT17ZjpSP0llOmZ1bmN0aW9uKGUsdCl7aWYoZT1LKGUpLHQ9X2UodCkseWUpdHJ5e3JldHVybiBJZShlLHQpfWNhdGNoKG4pe31pZihzZShlLHQpKXJldHVybiBQKCFHLmYuY2FsbChlLHQpLGVbdF0pfX0sRGU9ZnVuY3Rpb24oZSl7aWYoIUIoZSkpdGhyb3cgVHlwZUVycm9yKFN0cmluZyhlKStcIiBpcyBub3QgYW4gb2JqZWN0XCIpO3JldHVybiBlfSxTZT1PYmplY3QuZGVmaW5lUHJvcGVydHksRWU9e2Y6Uj9TZTpmdW5jdGlvbihlLHQsbil7aWYoRGUoZSksdD1fZSh0KSxEZShuKSx5ZSl0cnl7cmV0dXJuIFNlKGUsdCxuKX1jYXRjaChvKXt9aWYoXCJnZXRcImluIG58fFwic2V0XCJpbiBuKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkXCIpO3JldHVyblwidmFsdWVcImluIG4mJihlW3RdPW4udmFsdWUpLGV9fSxBZT1SP2Z1bmN0aW9uKGUsdCxuKXtyZXR1cm4gRWUuZihlLHQsUCgxLG4pKX06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlW3RdPW4sZX0sa2U9RnVuY3Rpb24udG9TdHJpbmc7XCJmdW5jdGlvblwiIT10eXBlb2YgbmUuaW5zcGVjdFNvdXJjZSYmKG5lLmluc3BlY3RTb3VyY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGtlLmNhbGwoZSl9KTt2YXIgTmUsQ2UsTGUsT2U9bmUuaW5zcGVjdFNvdXJjZSxSZT1MLldlYWtNYXAsYmU9XCJmdW5jdGlvblwiPT10eXBlb2YgUmUmJi9uYXRpdmUgY29kZS8udGVzdChPZShSZSkpLHdlPW9lKFwia2V5c1wiKSxHZT1mdW5jdGlvbihlKXtyZXR1cm4gd2VbZV18fCh3ZVtlXT1jZShlKSl9LFBlPXt9LFVlPUwuV2Vha01hcDtpZihiZXx8bmUuc3RhdGUpe3ZhciBGZT1uZS5zdGF0ZXx8KG5lLnN0YXRlPW5ldyBVZSkscWU9RmUuZ2V0LHhlPUZlLmhhcyxWZT1GZS5zZXQ7TmU9ZnVuY3Rpb24oZSx0KXtpZih4ZS5jYWxsKEZlLGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgYWxyZWFkeSBpbml0aWFsaXplZFwiKTtyZXR1cm4gdC5mYWNhZGU9ZSxWZS5jYWxsKEZlLGUsdCksdH0sQ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHFlLmNhbGwoRmUsZSl8fHt9fSxMZT1mdW5jdGlvbihlKXtyZXR1cm4geGUuY2FsbChGZSxlKX19ZWxzZXt2YXIgS2U9R2UoXCJzdGF0ZVwiKTtQZVtLZV09ITAsTmU9ZnVuY3Rpb24oZSx0KXtpZihzZShlLEtlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGFscmVhZHkgaW5pdGlhbGl6ZWRcIik7cmV0dXJuIHQuZmFjYWRlPWUsQWUoZSxLZSx0KSx0fSxDZT1mdW5jdGlvbihlKXtyZXR1cm4gc2UoZSxLZSk/ZVtLZV06e319LExlPWZ1bmN0aW9uKGUpe3JldHVybiBzZShlLEtlKX19dmFyIEJlPXtzZXQ6TmUsZ2V0OkNlLGhhczpMZSxlbmZvcmNlOmZ1bmN0aW9uKGUpe3JldHVybiBMZShlKT9DZShlKTpOZShlLHt9KX0sZ2V0dGVyRm9yOmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbjtpZighQih0KXx8KG49Q2UodCkpLnR5cGUhPT1lKXRocm93IFR5cGVFcnJvcihcIkluY29tcGF0aWJsZSByZWNlaXZlciwgXCIrZStcIiByZXF1aXJlZFwiKTtyZXR1cm4gbn19fSxIZT1BKChmdW5jdGlvbihlKXt2YXIgdD1CZS5nZXQsbj1CZS5lbmZvcmNlLG89U3RyaW5nKFN0cmluZykuc3BsaXQoXCJTdHJpbmdcIik7KGUuZXhwb3J0cz1mdW5jdGlvbihlLHQscixhKXt2YXIgcyxpPSEhYSYmISFhLnVuc2FmZSx1PSEhYSYmISFhLmVudW1lcmFibGUsYz0hIWEmJiEhYS5ub1RhcmdldEdldDtcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYoXCJzdHJpbmdcIiE9dHlwZW9mIHR8fHNlKHIsXCJuYW1lXCIpfHxBZShyLFwibmFtZVwiLHQpLChzPW4ocikpLnNvdXJjZXx8KHMuc291cmNlPW8uam9pbihcInN0cmluZ1wiPT10eXBlb2YgdD90OlwiXCIpKSksZSE9PUw/KGk/IWMmJmVbdF0mJih1PSEwKTpkZWxldGUgZVt0XSx1P2VbdF09cjpBZShlLHQscikpOnU/ZVt0XT1yOnRlKHQscil9KShGdW5jdGlvbi5wcm90b3R5cGUsXCJ0b1N0cmluZ1wiLChmdW5jdGlvbigpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMmJnQodGhpcykuc291cmNlfHxPZSh0aGlzKX0pKX0pKSxqZT1NYXRoLmNlaWwsWWU9TWF0aC5mbG9vciwkZT1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP1llOmplKShlKX0sV2U9TWF0aC5taW4semU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9XZSgkZShlKSw5MDA3MTk5MjU0NzQwOTkxKTowfSxKZT1NYXRoLm1heCxYZT1NYXRoLm1pbixRZT1mdW5jdGlvbihlLHQpe3ZhciBuPSRlKGUpO3JldHVybiBuPDA/SmUobit0LDApOlhlKG4sdCl9LFplPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4sbyl7dmFyIHIsYT1LKHQpLHM9emUoYS5sZW5ndGgpLGk9UWUobyxzKTtpZihlJiZuIT1uKXtmb3IoO3M+aTspaWYoKHI9YVtpKytdKSE9cilyZXR1cm4hMH1lbHNlIGZvcig7cz5pO2krKylpZigoZXx8aSBpbiBhKSYmYVtpXT09PW4pcmV0dXJuIGV8fGl8fDA7cmV0dXJuIWUmJi0xfX0sZXQ9e2luY2x1ZGVzOlplKCEwKSxpbmRleE9mOlplKCExKX0sbnQ9ZXQuaW5kZXhPZixvdD1mdW5jdGlvbihlLHQpe3ZhciBuLG89SyhlKSxyPTAsYT1bXTtmb3IobiBpbiBvKSFzZShQZSxuKSYmc2UobyxuKSYmYS5wdXNoKG4pO2Zvcig7dC5sZW5ndGg+cjspc2UobyxuPXRbcisrXSkmJih+bnQoYSxuKXx8YS5wdXNoKG4pKTtyZXR1cm4gYX0scnQ9W1wiY29uc3RydWN0b3JcIixcImhhc093blByb3BlcnR5XCIsXCJpc1Byb3RvdHlwZU9mXCIsXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLFwidG9Mb2NhbGVTdHJpbmdcIixcInRvU3RyaW5nXCIsXCJ2YWx1ZU9mXCJdLGF0PXJ0LmNvbmNhdChcImxlbmd0aFwiLFwicHJvdG90eXBlXCIpLHN0PXtmOk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbihlKXtyZXR1cm4gb3QoZSxhdCl9fSxpdD17ZjpPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSx1dD1qKFwiUmVmbGVjdFwiLFwib3duS2V5c1wiKXx8ZnVuY3Rpb24oZSl7dmFyIHQ9c3QuZihEZShlKSksbj1pdC5mO3JldHVybiBuP3QuY29uY2F0KG4oZSkpOnR9LGN0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXV0KHQpLG89RWUuZixyPVRlLmYsYT0wO2E8bi5sZW5ndGg7YSsrKXt2YXIgcz1uW2FdO3NlKGUscyl8fG8oZSxzLHIodCxzKSl9fSxsdD0vI3xcXC5wcm90b3R5cGVcXC4vLGR0PWZ1bmN0aW9uKGUsdCl7dmFyIG49Z3RbcHQoZSldO3JldHVybiBuPT1mdHx8biE9aHQmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P08odCk6ISF0KX0scHQ9ZHQubm9ybWFsaXplPWZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcoZSkucmVwbGFjZShsdCxcIi5cIikudG9Mb3dlckNhc2UoKX0sZ3Q9ZHQuZGF0YT17fSxodD1kdC5OQVRJVkU9XCJOXCIsZnQ9ZHQuUE9MWUZJTEw9XCJQXCIsX3Q9ZHQsbXQ9VGUuZix2dD1mdW5jdGlvbihlLHQpe3ZhciBuLG8scixhLHMsaT1lLnRhcmdldCx1PWUuZ2xvYmFsLGM9ZS5zdGF0O2lmKG49dT9MOmM/TFtpXXx8dGUoaSx7fSk6KExbaV18fHt9KS5wcm90b3R5cGUpZm9yKG8gaW4gdCl7aWYoYT10W29dLHI9ZS5ub1RhcmdldEdldD8ocz1tdChuLG8pKSYmcy52YWx1ZTpuW29dLCFfdCh1P286aSsoYz9cIi5cIjpcIiNcIikrbyxlLmZvcmNlZCkmJnZvaWQgMCE9PXIpe2lmKHR5cGVvZiBhPT10eXBlb2Ygciljb250aW51ZTtjdChhLHIpfShlLnNoYW18fHImJnIuc2hhbSkmJkFlKGEsXCJzaGFtXCIsITApLEhlKG4sbyxhLGUpfX0sTXQ9ZnVuY3Rpb24oZSl7aWYoZWUoZSkpdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgYSBTeW1ib2wgdmFsdWUgdG8gYSBzdHJpbmdcIik7cmV0dXJuIFN0cmluZyhlKX0seXQ9XCJcXHRcXG5cXHZcXGZcXHIgwqDhmoDigIDigIHigILigIPigITigIXigIbigIfigIjigInigIrigK/igZ/jgIBcXHUyMDI4XFx1MjAyOVxcdWZlZmZcIixJdD1cIltcIit5dCtcIl1cIixUdD1SZWdFeHAoXCJeXCIrSXQrSXQrXCIqXCIpLER0PVJlZ0V4cChJdCtJdCtcIiokXCIpLFN0PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj1NdChWKHQpKTtyZXR1cm4gMSZlJiYobj1uLnJlcGxhY2UoVHQsXCJcIikpLDImZSYmKG49bi5yZXBsYWNlKER0LFwiXCIpKSxufX0sRXQ9e3N0YXJ0OlN0KDEpLGVuZDpTdCgyKSx0cmltOlN0KDMpfSxBdD1FdC50cmltLGt0PUwucGFyc2VJbnQsTnQ9L15bKy1dPzBbWHhdLyxDdD04IT09a3QoeXQrXCIwOFwiKXx8MjIhPT1rdCh5dCtcIjB4MTZcIik/ZnVuY3Rpb24oZSx0KXt2YXIgbj1BdChNdChlKSk7cmV0dXJuIGt0KG4sdD4+PjB8fChOdC50ZXN0KG4pPzE2OjEwKSl9Omt0O3Z0KHtnbG9iYWw6ITAsZm9yY2VkOnBhcnNlSW50IT1DdH0se3BhcnNlSW50OkN0fSk7dmFyIEx0LE90PU9iamVjdC5rZXlzfHxmdW5jdGlvbihlKXtyZXR1cm4gb3QoZSxydCl9LFJ0PVI/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24oZSx0KXtEZShlKTtmb3IodmFyIG4sbz1PdCh0KSxyPW8ubGVuZ3RoLGE9MDtyPmE7KUVlLmYoZSxuPW9bYSsrXSx0W25dKTtyZXR1cm4gZX0sYnQ9aihcImRvY3VtZW50XCIsXCJkb2N1bWVudEVsZW1lbnRcIiksd3Q9R2UoXCJJRV9QUk9UT1wiKSxHdD1mdW5jdGlvbigpe30sUHQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCI8c2NyaXB0PlwiK2UrXCI8XFwvc2NyaXB0PlwifSxVdD1mdW5jdGlvbihlKXtlLndyaXRlKFB0KFwiXCIpKSxlLmNsb3NlKCk7dmFyIHQ9ZS5wYXJlbnRXaW5kb3cuT2JqZWN0O3JldHVybiBlPW51bGwsdH0sRnQ9ZnVuY3Rpb24oKXt0cnl7THQ9bmV3IEFjdGl2ZVhPYmplY3QoXCJodG1sZmlsZVwiKX1jYXRjaCh0KXt9RnQ9ZG9jdW1lbnQuZG9tYWluJiZMdD9VdChMdCk6ZnVuY3Rpb24oKXt2YXIgZSx0PU1lKFwiaWZyYW1lXCIpO2lmKHQuc3R5bGUpcmV0dXJuIHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixidC5hcHBlbmRDaGlsZCh0KSx0LnNyYz1TdHJpbmcoXCJqYXZhc2NyaXB0OlwiKSwoZT10LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpLm9wZW4oKSxlLndyaXRlKFB0KFwiZG9jdW1lbnQuRj1PYmplY3RcIikpLGUuY2xvc2UoKSxlLkZ9KCl8fFV0KEx0KTtmb3IodmFyIGU9cnQubGVuZ3RoO2UtLTspZGVsZXRlIEZ0LnByb3RvdHlwZVtydFtlXV07cmV0dXJuIEZ0KCl9O1BlW3d0XT0hMDt2YXIgcXQ9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gbnVsbCE9PWU/KEd0LnByb3RvdHlwZT1EZShlKSxuPW5ldyBHdCxHdC5wcm90b3R5cGU9bnVsbCxuW3d0XT1lKTpuPUZ0KCksdm9pZCAwPT09dD9uOlJ0KG4sdCl9O3Z0KHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLHNoYW06IVJ9LHtjcmVhdGU6cXR9KTt2YXIgeHQ9ZnVuY3Rpb24oZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGUpK1wiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO3JldHVybiBlfSxWdD1mdW5jdGlvbihlLHQsbil7aWYoeHQoZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gobil7Y2FzZSAwOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodCl9O2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIGUuY2FsbCh0LG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4sbyl7cmV0dXJuIGUuY2FsbCh0LG4sbyl9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixvLHIpe3JldHVybiBlLmNhbGwodCxuLG8scil9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19LEt0PUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVyblwiQXJyYXlcIj09RihlKX0sQnQ9Z2UoXCJzcGVjaWVzXCIpLEh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyhmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gS3QoZSkmJihcImZ1bmN0aW9uXCIhPXR5cGVvZih0PWUuY29uc3RydWN0b3IpfHx0IT09QXJyYXkmJiFLdCh0LnByb3RvdHlwZSk/Qih0KSYmbnVsbD09PSh0PXRbQnRdKSYmKHQ9dm9pZCAwKTp0PXZvaWQgMCksdm9pZCAwPT09dD9BcnJheTp0fShlKSkoMD09PXQ/MDp0KX0sanQ9W10ucHVzaCxZdD1mdW5jdGlvbihlKXt2YXIgdD0xPT1lLG49Mj09ZSxvPTM9PWUscj00PT1lLGE9Nj09ZSxzPTc9PWUsaT01PT1lfHxhO3JldHVybiBmdW5jdGlvbih1LGMsbCxkKXtmb3IodmFyIHAsZyxoPXJlKHUpLGY9eChoKSxfPVZ0KGMsbCwzKSxtPXplKGYubGVuZ3RoKSx2PTAsTT1kfHxIdCx5PXQ/TSh1LG0pOm58fHM/TSh1LDApOnZvaWQgMDttPnY7disrKWlmKChpfHx2IGluIGYpJiYoZz1fKHA9Zlt2XSx2LGgpLGUpKWlmKHQpeVt2XT1nO2Vsc2UgaWYoZylzd2l0Y2goZSl7Y2FzZSAzOnJldHVybiEwO2Nhc2UgNTpyZXR1cm4gcDtjYXNlIDY6cmV0dXJuIHY7Y2FzZSAyOmp0LmNhbGwoeSxwKX1lbHNlIHN3aXRjaChlKXtjYXNlIDQ6cmV0dXJuITE7Y2FzZSA3Omp0LmNhbGwoeSxwKX1yZXR1cm4gYT8tMTpvfHxyP3I6eX19LCR0PXtmb3JFYWNoOll0KDApLG1hcDpZdCgxKSxmaWx0ZXI6WXQoMiksc29tZTpZdCgzKSxldmVyeTpZdCg0KSxmaW5kOll0KDUpLGZpbmRJbmRleDpZdCg2KSxmaWx0ZXJSZWplY3Q6WXQoNyl9LFd0PWZ1bmN0aW9uKGUsdCl7dmFyIG49W11bZV07cmV0dXJuISFuJiZPKChmdW5jdGlvbigpe24uY2FsbChudWxsLHR8fGZ1bmN0aW9uKCl7dGhyb3cgMX0sMSl9KSl9LHp0PSR0LmZvckVhY2gsSnQ9V3QoXCJmb3JFYWNoXCIpP1tdLmZvckVhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHp0KHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9O3Z0KHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDpbXS5mb3JFYWNoIT1KdH0se2ZvckVhY2g6SnR9KTt2YXIgWHQ9e0NTU1J1bGVMaXN0OjAsQ1NTU3R5bGVEZWNsYXJhdGlvbjowLENTU1ZhbHVlTGlzdDowLENsaWVudFJlY3RMaXN0OjAsRE9NUmVjdExpc3Q6MCxET01TdHJpbmdMaXN0OjAsRE9NVG9rZW5MaXN0OjEsRGF0YVRyYW5zZmVySXRlbUxpc3Q6MCxGaWxlTGlzdDowLEhUTUxBbGxDb2xsZWN0aW9uOjAsSFRNTENvbGxlY3Rpb246MCxIVE1MRm9ybUVsZW1lbnQ6MCxIVE1MU2VsZWN0RWxlbWVudDowLE1lZGlhTGlzdDowLE1pbWVUeXBlQXJyYXk6MCxOYW1lZE5vZGVNYXA6MCxOb2RlTGlzdDoxLFBhaW50UmVxdWVzdExpc3Q6MCxQbHVnaW46MCxQbHVnaW5BcnJheTowLFNWR0xlbmd0aExpc3Q6MCxTVkdOdW1iZXJMaXN0OjAsU1ZHUGF0aFNlZ0xpc3Q6MCxTVkdQb2ludExpc3Q6MCxTVkdTdHJpbmdMaXN0OjAsU1ZHVHJhbnNmb3JtTGlzdDowLFNvdXJjZUJ1ZmZlckxpc3Q6MCxTdHlsZVNoZWV0TGlzdDowLFRleHRUcmFja0N1ZUxpc3Q6MCxUZXh0VHJhY2tMaXN0OjAsVG91Y2hMaXN0OjB9O2Zvcih2YXIgUXQgaW4gWHQpe3ZhciBadD1MW1F0XSxlbj1adCYmWnQucHJvdG90eXBlO2lmKGVuJiZlbi5mb3JFYWNoIT09SnQpdHJ5e0FlKGVuLFwiZm9yRWFjaFwiLEp0KX1jYXRjaChjeSl7ZW4uZm9yRWFjaD1KdH19dmFyIHRuPU8oKGZ1bmN0aW9uKCl7T3QoMSl9KSk7dnQoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOnRufSx7a2V5czpmdW5jdGlvbihlKXtyZXR1cm4gT3QocmUoZSkpfX0pO3ZhciBubj1mdW5jdGlvbihlKXt2YXIgdD1lLnJldHVybjtpZih2b2lkIDAhPT10KXJldHVybiBEZSh0LmNhbGwoZSkpLnZhbHVlfSxvbj1mdW5jdGlvbihlLHQsbixvKXt0cnl7cmV0dXJuIG8/dChEZShuKVswXSxuWzFdKTp0KG4pfWNhdGNoKGN5KXt0aHJvdyBubihlKSxjeX19LHJuPXt9LGFuPWdlKFwiaXRlcmF0b3JcIiksc249QXJyYXkucHJvdG90eXBlLHVuPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYocm4uQXJyYXk9PT1lfHxzblthbl09PT1lKX0sY249ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPV9lKHQpO28gaW4gZT9FZS5mKGUsbyxQKDAsbikpOmVbb109bn0sbG49e307bG5bZ2UoXCJ0b1N0cmluZ1RhZ1wiKV09XCJ6XCI7dmFyIGRuPVwiW29iamVjdCB6XVwiPT09U3RyaW5nKGxuKSxwbj1nZShcInRvU3RyaW5nVGFnXCIpLGduPVwiQXJndW1lbnRzXCI9PUYoZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxobj1kbj9GOmZ1bmN0aW9uKGUpe3ZhciB0LG4sbztyZXR1cm4gdm9pZCAwPT09ZT9cIlVuZGVmaW5lZFwiOm51bGw9PT1lP1wiTnVsbFwiOlwic3RyaW5nXCI9PXR5cGVvZihuPWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlW3RdfWNhdGNoKGN5KXt9fSh0PU9iamVjdChlKSxwbikpP246Z24/Rih0KTpcIk9iamVjdFwiPT0obz1GKHQpKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5jYWxsZWU/XCJBcmd1bWVudHNcIjpvfSxmbj1nZShcIml0ZXJhdG9yXCIpLF9uPWZ1bmN0aW9uKGUpe2lmKG51bGwhPWUpcmV0dXJuIGVbZm5dfHxlW1wiQEBpdGVyYXRvclwiXXx8cm5baG4oZSldfSxtbj1mdW5jdGlvbihlKXt2YXIgdCxuLG8scixhLHMsaT1yZShlKSx1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSxjPWFyZ3VtZW50cy5sZW5ndGgsbD1jPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxkPXZvaWQgMCE9PWwscD1fbihpKSxnPTA7aWYoZCYmKGw9VnQobCxjPjI/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSksbnVsbD09cHx8dT09QXJyYXkmJnVuKHApKWZvcihuPW5ldyB1KHQ9emUoaS5sZW5ndGgpKTt0Pmc7ZysrKXM9ZD9sKGlbZ10sZyk6aVtnXSxjbihuLGcscyk7ZWxzZSBmb3IoYT0ocj1wLmNhbGwoaSkpLm5leHQsbj1uZXcgdTshKG89YS5jYWxsKHIpKS5kb25lO2crKylzPWQ/b24ocixsLFtvLnZhbHVlLGddLCEwKTpvLnZhbHVlLGNuKG4sZyxzKTtyZXR1cm4gbi5sZW5ndGg9ZyxufSx2bj1nZShcIml0ZXJhdG9yXCIpLE1uPSExO3RyeXt2YXIgeW49MCxJbj17bmV4dDpmdW5jdGlvbigpe3JldHVybntkb25lOiEheW4rK319LHJldHVybjpmdW5jdGlvbigpe01uPSEwfX07SW5bdm5dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LEFycmF5LmZyb20oSW4sKGZ1bmN0aW9uKCl7dGhyb3cgMn0pKX1jYXRjaChjeSl7fXZhciBUbj1mdW5jdGlvbihlLHQpe2lmKCF0JiYhTW4pcmV0dXJuITE7dmFyIG49ITE7dHJ5e3ZhciBvPXt9O29bdm5dPWZ1bmN0aW9uKCl7cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpuPSEwfX19fSxlKG8pfWNhdGNoKGN5KXt9cmV0dXJuIG59LERuPSFUbigoZnVuY3Rpb24oZSl7QXJyYXkuZnJvbShlKX0pKTt2dCh7dGFyZ2V0OlwiQXJyYXlcIixzdGF0OiEwLGZvcmNlZDpEbn0se2Zyb206bW59KTt2YXIgU24sRW4sQW4sa249ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIG8scixhPU10KFYodCkpLHM9JGUobiksaT1hLmxlbmd0aDtyZXR1cm4gczwwfHxzPj1pP2U/XCJcIjp2b2lkIDA6KG89YS5jaGFyQ29kZUF0KHMpKTw1NTI5Nnx8bz41NjMxOXx8cysxPT09aXx8KHI9YS5jaGFyQ29kZUF0KHMrMSkpPDU2MzIwfHxyPjU3MzQzP2U/YS5jaGFyQXQocyk6bzplP2Euc2xpY2UocyxzKzIpOnItNTYzMjArKG8tNTUyOTY8PDEwKSs2NTUzNn19LE5uPXtjb2RlQXQ6a24oITEpLGNoYXJBdDprbighMCl9LENuPSFPKChmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPW51bGwsT2JqZWN0LmdldFByb3RvdHlwZU9mKG5ldyBlKSE9PWUucHJvdG90eXBlfSkpLExuPUdlKFwiSUVfUFJPVE9cIiksT249T2JqZWN0LnByb3RvdHlwZSxSbj1Dbj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9cmUoZSksc2UoZSxMbik/ZVtMbl06XCJmdW5jdGlvblwiPT10eXBlb2YgZS5jb25zdHJ1Y3RvciYmZSBpbnN0YW5jZW9mIGUuY29uc3RydWN0b3I/ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6ZSBpbnN0YW5jZW9mIE9iamVjdD9PbjpudWxsfSxibj1nZShcIml0ZXJhdG9yXCIpLHduPSExO1tdLmtleXMmJihcIm5leHRcImluKEFuPVtdLmtleXMoKSk/KEVuPVJuKFJuKEFuKSkpIT09T2JqZWN0LnByb3RvdHlwZSYmKFNuPUVuKTp3bj0hMCksKG51bGw9PVNufHxPKChmdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBTbltibl0uY2FsbChlKSE9PWV9KSkpJiYoU249e30pLHNlKFNuLGJuKXx8QWUoU24sYm4sKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSk7dmFyIEduPXtJdGVyYXRvclByb3RvdHlwZTpTbixCVUdHWV9TQUZBUklfSVRFUkFUT1JTOndufSxQbj1FZS5mLFVuPWdlKFwidG9TdHJpbmdUYWdcIiksRm49ZnVuY3Rpb24oZSx0LG4pe2UmJiFzZShlPW4/ZTplLnByb3RvdHlwZSxVbikmJlBuKGUsVW4se2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9LHFuPUduLkl0ZXJhdG9yUHJvdG90eXBlLHhuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LFZuPWZ1bmN0aW9uKGUsdCxuKXt2YXIgbz10K1wiIEl0ZXJhdG9yXCI7cmV0dXJuIGUucHJvdG90eXBlPXF0KHFuLHtuZXh0OlAoMSxuKX0pLEZuKGUsbywhMSkscm5bb109eG4sZX0sS249T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoXCJfX3Byb3RvX19cImlue30/ZnVuY3Rpb24oKXt2YXIgZSx0PSExLG49e307dHJ5eyhlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoT2JqZWN0LnByb3RvdHlwZSxcIl9fcHJvdG9fX1wiKS5zZXQpLmNhbGwobixbXSksdD1uIGluc3RhbmNlb2YgQXJyYXl9Y2F0Y2goY3kpe31yZXR1cm4gZnVuY3Rpb24obixvKXtyZXR1cm4gRGUobiksZnVuY3Rpb24oZSl7aWYoIUIoZSkmJm51bGwhPT1lKXRocm93IFR5cGVFcnJvcihcIkNhbid0IHNldCBcIitTdHJpbmcoZSkrXCIgYXMgYSBwcm90b3R5cGVcIil9KG8pLHQ/ZS5jYWxsKG4sbyk6bi5fX3Byb3RvX189byxufX0oKTp2b2lkIDApLEJuPUduLkl0ZXJhdG9yUHJvdG90eXBlLEhuPUduLkJVR0dZX1NBRkFSSV9JVEVSQVRPUlMsam49Z2UoXCJpdGVyYXRvclwiKSxZbj1mdW5jdGlvbigpe3JldHVybiB0aGlzfSwkbj1mdW5jdGlvbihlLHQsbixvLHIsYSxzKXtWbihuLHQsbyk7dmFyIGksdSxjLGw9ZnVuY3Rpb24oZSl7aWYoZT09PXImJmYpcmV0dXJuIGY7aWYoIUhuJiZlIGluIGcpcmV0dXJuIGdbZV07c3dpdGNoKGUpe2Nhc2VcImtleXNcIjpjYXNlXCJ2YWx1ZXNcIjpjYXNlXCJlbnRyaWVzXCI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzKX19LGQ9dCtcIiBJdGVyYXRvclwiLHA9ITEsZz1lLnByb3RvdHlwZSxoPWdbam5dfHxnW1wiQEBpdGVyYXRvclwiXXx8ciYmZ1tyXSxmPSFIbiYmaHx8bChyKSxfPVwiQXJyYXlcIj09dCYmZy5lbnRyaWVzfHxoO2lmKF8mJihpPVJuKF8uY2FsbChuZXcgZSkpLEJuIT09T2JqZWN0LnByb3RvdHlwZSYmaS5uZXh0JiYoUm4oaSkhPT1CbiYmKEtuP0tuKGksQm4pOlwiZnVuY3Rpb25cIiE9dHlwZW9mIGlbam5dJiZBZShpLGpuLFluKSksRm4oaSxkLCEwKSkpLFwidmFsdWVzXCI9PXImJmgmJlwidmFsdWVzXCIhPT1oLm5hbWUmJihwPSEwLGY9ZnVuY3Rpb24oKXtyZXR1cm4gaC5jYWxsKHRoaXMpfSksZ1tqbl0hPT1mJiZBZShnLGpuLGYpLHJuW3RdPWYscilpZih1PXt2YWx1ZXM6bChcInZhbHVlc1wiKSxrZXlzOmE/ZjpsKFwia2V5c1wiKSxlbnRyaWVzOmwoXCJlbnRyaWVzXCIpfSxzKWZvcihjIGluIHUpKEhufHxwfHwhKGMgaW4gZykpJiZIZShnLGMsdVtjXSk7ZWxzZSB2dCh7dGFyZ2V0OnQscHJvdG86ITAsZm9yY2VkOkhufHxwfSx1KTtyZXR1cm4gdX0sV249Tm4uY2hhckF0LHpuPUJlLnNldCxKbj1CZS5nZXR0ZXJGb3IoXCJTdHJpbmcgSXRlcmF0b3JcIik7JG4oU3RyaW5nLFwiU3RyaW5nXCIsKGZ1bmN0aW9uKGUpe3puKHRoaXMse3R5cGU6XCJTdHJpbmcgSXRlcmF0b3JcIixzdHJpbmc6TXQoZSksaW5kZXg6MH0pfSksKGZ1bmN0aW9uKCl7dmFyIGUsdD1Kbih0aGlzKSxuPXQuc3RyaW5nLG89dC5pbmRleDtyZXR1cm4gbz49bi5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1XbihuLG8pLHQuaW5kZXgrPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pKTt2YXIgWG49Z2UoXCJzcGVjaWVzXCIpLFFuPWZ1bmN0aW9uKGUpe3JldHVybiBYPj01MXx8IU8oKGZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuKHQuY29uc3RydWN0b3I9e30pW1huXT1mdW5jdGlvbigpe3JldHVybntmb286MX19LDEhPT10W2VdKEJvb2xlYW4pLmZvb30pKX0sWm49Z2UoXCJpc0NvbmNhdFNwcmVhZGFibGVcIiksZW89WD49NTF8fCFPKChmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBlW1puXT0hMSxlLmNvbmNhdCgpWzBdIT09ZX0pKSx0bz1RbihcImNvbmNhdFwiKSxubz1mdW5jdGlvbihlKXtpZighQihlKSlyZXR1cm4hMTt2YXIgdD1lW1puXTtyZXR1cm4gdm9pZCAwIT09dD8hIXQ6S3QoZSl9O3Z0KHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDohZW98fCF0b30se2NvbmNhdDpmdW5jdGlvbihlKXt2YXIgdCxuLG8scixhLHM9cmUodGhpcyksaT1IdChzLDApLHU9MDtmb3IodD0tMSxvPWFyZ3VtZW50cy5sZW5ndGg7dDxvO3QrKylpZihubyhhPS0xPT09dD9zOmFyZ3VtZW50c1t0XSkpe2lmKHUrKHI9emUoYS5sZW5ndGgpKT45MDA3MTk5MjU0NzQwOTkxKXRocm93IFR5cGVFcnJvcihcIk1heGltdW0gYWxsb3dlZCBpbmRleCBleGNlZWRlZFwiKTtmb3Iobj0wO248cjtuKyssdSsrKW4gaW4gYSYmY24oaSx1LGFbbl0pfWVsc2V7aWYodT49OTAwNzE5OTI1NDc0MDk5MSl0aHJvdyBUeXBlRXJyb3IoXCJNYXhpbXVtIGFsbG93ZWQgaW5kZXggZXhjZWVkZWRcIik7Y24oaSx1KyssYSl9cmV0dXJuIGkubGVuZ3RoPXUsaX19KTt2YXIgb289e1NES19SRUFEWTpcInNka1N0YXRlUmVhZHlcIixTREtfTk9UX1JFQURZOlwic2RrU3RhdGVOb3RSZWFkeVwiLFNES19ERVNUUk9ZOlwic2RrRGVzdHJveVwiLE1FU1NBR0VfUkVDRUlWRUQ6XCJvbk1lc3NhZ2VSZWNlaXZlZFwiLE1FU1NBR0VfTU9ESUZJRUQ6XCJvbk1lc3NhZ2VNb2RpZmllZFwiLE1FU1NBR0VfUkVWT0tFRDpcIm9uTWVzc2FnZVJldm9rZWRcIixNRVNTQUdFX1JFQURfQllfUEVFUjpcIm9uTWVzc2FnZVJlYWRCeVBlZXJcIixDT05WRVJTQVRJT05fTElTVF9VUERBVEVEOlwib25Db252ZXJzYXRpb25MaXN0VXBkYXRlZFwiLEdST1VQX0xJU1RfVVBEQVRFRDpcIm9uR3JvdXBMaXN0VXBkYXRlZFwiLEdST1VQX1NZU1RFTV9OT1RJQ0VfUkVDRUlWRUQ6XCJyZWNlaXZlR3JvdXBTeXN0ZW1Ob3RpY2VcIixHUk9VUF9BVFRSSUJVVEVTX1VQREFURUQ6XCJncm91cEF0dHJpYnV0ZXNVcGRhdGVkXCIsUFJPRklMRV9VUERBVEVEOlwib25Qcm9maWxlVXBkYXRlZFwiLEJMQUNLTElTVF9VUERBVEVEOlwiYmxhY2tsaXN0VXBkYXRlZFwiLEZSSUVORF9MSVNUX1VQREFURUQ6XCJvbkZyaWVuZExpc3RVcGRhdGVkXCIsRlJJRU5EX0dST1VQX0xJU1RfVVBEQVRFRDpcIm9uRnJpZW5kR3JvdXBMaXN0VXBkYXRlZFwiLEZSSUVORF9BUFBMSUNBVElPTl9MSVNUX1VQREFURUQ6XCJvbkZyaWVuZEFwcGxpY2F0aW9uTGlzdFVwZGF0ZWRcIixLSUNLRURfT1VUOlwia2lja2VkT3V0XCIsRVJST1I6XCJlcnJvclwiLE5FVF9TVEFURV9DSEFOR0U6XCJuZXRTdGF0ZUNoYW5nZVwiLFNES19SRUxPQUQ6XCJzZGtSZWxvYWRcIn0scm89e01TR19URVhUOlwiVElNVGV4dEVsZW1cIixNU0dfSU1BR0U6XCJUSU1JbWFnZUVsZW1cIixNU0dfU09VTkQ6XCJUSU1Tb3VuZEVsZW1cIixNU0dfQVVESU86XCJUSU1Tb3VuZEVsZW1cIixNU0dfRklMRTpcIlRJTUZpbGVFbGVtXCIsTVNHX0ZBQ0U6XCJUSU1GYWNlRWxlbVwiLE1TR19WSURFTzpcIlRJTVZpZGVvRmlsZUVsZW1cIixNU0dfR0VPOlwiVElNTG9jYXRpb25FbGVtXCIsTVNHX0dSUF9USVA6XCJUSU1Hcm91cFRpcEVsZW1cIixNU0dfR1JQX1NZU19OT1RJQ0U6XCJUSU1Hcm91cFN5c3RlbU5vdGljZUVsZW1cIixNU0dfQ1VTVE9NOlwiVElNQ3VzdG9tRWxlbVwiLE1TR19NRVJHRVI6XCJUSU1SZWxheUVsZW1cIixNU0dfUFJJT1JJVFlfSElHSDpcIkhpZ2hcIixNU0dfUFJJT1JJVFlfTk9STUFMOlwiTm9ybWFsXCIsTVNHX1BSSU9SSVRZX0xPVzpcIkxvd1wiLE1TR19QUklPUklUWV9MT1dFU1Q6XCJMb3dlc3RcIixDT05WX0MyQzpcIkMyQ1wiLENPTlZfR1JPVVA6XCJHUk9VUFwiLENPTlZfU1lTVEVNOlwiQFRJTSNTWVNURU1cIixDT05WX0FUX01FOjEsQ09OVl9BVF9BTEw6MixDT05WX0FUX0FMTF9BVF9NRTozLEdSUF9QUklWQVRFOlwiUHJpdmF0ZVwiLEdSUF9XT1JLOlwiUHJpdmF0ZVwiLEdSUF9QVUJMSUM6XCJQdWJsaWNcIixHUlBfQ0hBVFJPT006XCJDaGF0Um9vbVwiLEdSUF9NRUVUSU5HOlwiQ2hhdFJvb21cIixHUlBfQVZDSEFUUk9PTTpcIkFWQ2hhdFJvb21cIixHUlBfTUJSX1JPTEVfT1dORVI6XCJPd25lclwiLEdSUF9NQlJfUk9MRV9BRE1JTjpcIkFkbWluXCIsR1JQX01CUl9ST0xFX01FTUJFUjpcIk1lbWJlclwiLEdSUF9USVBfTUJSX0pPSU46MSxHUlBfVElQX01CUl9RVUlUOjIsR1JQX1RJUF9NQlJfS0lDS0VEX09VVDozLEdSUF9USVBfTUJSX1NFVF9BRE1JTjo0LEdSUF9USVBfTUJSX0NBTkNFTEVEX0FETUlOOjUsR1JQX1RJUF9HUlBfUFJPRklMRV9VUERBVEVEOjYsR1JQX1RJUF9NQlJfUFJPRklMRV9VUERBVEVEOjcsTVNHX1JFTUlORF9BQ1BUX0FORF9OT1RFOlwiQWNjZXB0QW5kTm90aWZ5XCIsTVNHX1JFTUlORF9BQ1BUX05PVF9OT1RFOlwiQWNjZXB0Tm90Tm90aWZ5XCIsTVNHX1JFTUlORF9ESVNDQVJEOlwiRGlzY2FyZFwiLEdFTkRFUl9VTktOT1dOOlwiR2VuZGVyX1R5cGVfVW5rbm93blwiLEdFTkRFUl9GRU1BTEU6XCJHZW5kZXJfVHlwZV9GZW1hbGVcIixHRU5ERVJfTUFMRTpcIkdlbmRlcl9UeXBlX01hbGVcIixLSUNLRURfT1VUX01VTFRfQUNDT1VOVDpcIm11bHRpcGxlQWNjb3VudFwiLEtJQ0tFRF9PVVRfTVVMVF9ERVZJQ0U6XCJtdWx0aXBsZURldmljZVwiLEtJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEOlwidXNlclNpZ0V4cGlyZWRcIixBTExPV19UWVBFX0FMTE9XX0FOWTpcIkFsbG93VHlwZV9UeXBlX0FsbG93QW55XCIsQUxMT1dfVFlQRV9ORUVEX0NPTkZJUk06XCJBbGxvd1R5cGVfVHlwZV9OZWVkQ29uZmlybVwiLEFMTE9XX1RZUEVfREVOWV9BTlk6XCJBbGxvd1R5cGVfVHlwZV9EZW55QW55XCIsRk9SQklEX1RZUEVfTk9ORTpcIkFkbWluRm9yYmlkX1R5cGVfTm9uZVwiLEZPUkJJRF9UWVBFX1NFTkRfT1VUOlwiQWRtaW5Gb3JiaWRfVHlwZV9TZW5kT3V0XCIsSk9JTl9PUFRJT05TX0ZSRUVfQUNDRVNTOlwiRnJlZUFjY2Vzc1wiLEpPSU5fT1BUSU9OU19ORUVEX1BFUk1JU1NJT046XCJOZWVkUGVybWlzc2lvblwiLEpPSU5fT1BUSU9OU19ESVNBQkxFX0FQUExZOlwiRGlzYWJsZUFwcGx5XCIsSk9JTl9TVEFUVVNfU1VDQ0VTUzpcIkpvaW5lZFN1Y2Nlc3NcIixKT0lOX1NUQVRVU19BTFJFQURZX0lOX0dST1VQOlwiQWxyZWFkeUluR3JvdXBcIixKT0lOX1NUQVRVU19XQUlUX0FQUFJPVkFMOlwiV2FpdEFkbWluQXBwcm92YWxcIixHUlBfUFJPRklMRV9PV05FUl9JRDpcIm93bmVySURcIixHUlBfUFJPRklMRV9DUkVBVEVfVElNRTpcImNyZWF0ZVRpbWVcIixHUlBfUFJPRklMRV9MQVNUX0lORk9fVElNRTpcImxhc3RJbmZvVGltZVwiLEdSUF9QUk9GSUxFX01FTUJFUl9OVU06XCJtZW1iZXJOdW1cIixHUlBfUFJPRklMRV9NQVhfTUVNQkVSX05VTTpcIm1heE1lbWJlck51bVwiLEdSUF9QUk9GSUxFX0pPSU5fT1BUSU9OOlwiam9pbk9wdGlvblwiLEdSUF9QUk9GSUxFX0lOVFJPRFVDVElPTjpcImludHJvZHVjdGlvblwiLEdSUF9QUk9GSUxFX05PVElGSUNBVElPTjpcIm5vdGlmaWNhdGlvblwiLEdSUF9QUk9GSUxFX01VVEVfQUxMX01CUlM6XCJtdXRlQWxsTWVtYmVyc1wiLFNOU19BRERfVFlQRV9TSU5HTEU6XCJBZGRfVHlwZV9TaW5nbGVcIixTTlNfQUREX1RZUEVfQk9USDpcIkFkZF9UeXBlX0JvdGhcIixTTlNfREVMRVRFX1RZUEVfU0lOR0xFOlwiRGVsZXRlX1R5cGVfU2luZ2xlXCIsU05TX0RFTEVURV9UWVBFX0JPVEg6XCJEZWxldGVfVHlwZV9Cb3RoXCIsU05TX0FQUExJQ0FUSU9OX1RZUEVfQk9USDpcIlBlbmRlbmN5X1R5cGVfQm90aFwiLFNOU19BUFBMSUNBVElPTl9TRU5UX1RPX01FOlwiUGVuZGVuY3lfVHlwZV9Db21lSW5cIixTTlNfQVBQTElDQVRJT05fU0VOVF9CWV9NRTpcIlBlbmRlbmN5X1R5cGVfU2VuZE91dFwiLFNOU19BUFBMSUNBVElPTl9BR1JFRTpcIlJlc3BvbnNlX0FjdGlvbl9BZ3JlZVwiLFNOU19BUFBMSUNBVElPTl9BR1JFRV9BTkRfQUREOlwiUmVzcG9uc2VfQWN0aW9uX0FncmVlQW5kQWRkXCIsU05TX0NIRUNLX1RZUEVfQk9USDpcIkNoZWNrUmVzdWx0X1R5cGVfQm90aFwiLFNOU19DSEVDS19UWVBFX1NJTkdMRTpcIkNoZWNrUmVzdWx0X1R5cGVfU2luZ2xlXCIsU05TX1RZUEVfTk9fUkVMQVRJT046XCJDaGVja1Jlc3VsdF9UeXBlX05vUmVsYXRpb25cIixTTlNfVFlQRV9BX1dJVEhfQjpcIkNoZWNrUmVzdWx0X1R5cGVfQVdpdGhCXCIsU05TX1RZUEVfQl9XSVRIX0E6XCJDaGVja1Jlc3VsdF9UeXBlX0JXaXRoQVwiLFNOU19UWVBFX0JPVEhfV0FZOlwiQ2hlY2tSZXN1bHRfVHlwZV9Cb3RoV2F5XCIsTkVUX1NUQVRFX0NPTk5FQ1RFRDpcImNvbm5lY3RlZFwiLE5FVF9TVEFURV9DT05ORUNUSU5HOlwiY29ubmVjdGluZ1wiLE5FVF9TVEFURV9ESVNDT05ORUNURUQ6XCJkaXNjb25uZWN0ZWRcIixNU0dfQVRfQUxMOlwiX19rSW1TREtfTWVzc3NhZ2VBdEFMTF9fXCJ9LGFvPVtdLnNsaWNlLHNvPXt9LGlvPWZ1bmN0aW9uKGUsdCxuKXtpZighKHQgaW4gc28pKXtmb3IodmFyIG89W10scj0wO3I8dDtyKyspb1tyXT1cImFbXCIrcitcIl1cIjtzb1t0XT1GdW5jdGlvbihcIkMsYVwiLFwicmV0dXJuIG5ldyBDKFwiK28uam9pbihcIixcIikrXCIpXCIpfXJldHVybiBzb1t0XShlLG4pfSx1bz1GdW5jdGlvbi5iaW5kfHxmdW5jdGlvbihlKXt2YXIgdD14dCh0aGlzKSxuPWFvLmNhbGwoYXJndW1lbnRzLDEpLG89ZnVuY3Rpb24oKXt2YXIgcj1uLmNvbmNhdChhby5jYWxsKGFyZ3VtZW50cykpO3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbz9pbyh0LHIubGVuZ3RoLHIpOnQuYXBwbHkoZSxyKX07cmV0dXJuIEIodC5wcm90b3R5cGUpJiYoby5wcm90b3R5cGU9dC5wcm90b3R5cGUpLG99O3Z0KHt0YXJnZXQ6XCJGdW5jdGlvblwiLHByb3RvOiEwfSx7YmluZDp1b30pO3ZhciBjbz0kdC5tYXAsbG89UW4oXCJtYXBcIik7dnQoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOiFsb30se21hcDpmdW5jdGlvbihlKXtyZXR1cm4gY28odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KTt2YXIgcG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpLHRoaXMuY2FjaGU9W10sdGhpcy5vcHRpb25zPW51bGx9cmV0dXJuIGEoZSxbe2tleTpcInVzZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3dcIm1pZGRsZXdhcmUgbXVzdCBiZSBhIGZ1bmN0aW9uXCI7cmV0dXJuIHRoaXMuY2FjaGUucHVzaChlKSx0aGlzfX0se2tleTpcIm5leHRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLm1pZGRsZXdhcmVzJiZ0aGlzLm1pZGRsZXdhcmVzLmxlbmd0aD4wKXJldHVybiB0aGlzLm1pZGRsZXdhcmVzLnNoaWZ0KCkuY2FsbCh0aGlzLHRoaXMub3B0aW9ucyx0aGlzLm5leHQuYmluZCh0aGlzKSl9fSx7a2V5OlwicnVuXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubWlkZGxld2FyZXM9dGhpcy5jYWNoZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlfSkpLHRoaXMub3B0aW9ucz1lLHRoaXMubmV4dCgpfX1dKSxlfSgpLGdvPUVlLmYsaG89RnVuY3Rpb24ucHJvdG90eXBlLGZvPWhvLnRvU3RyaW5nLF9vPS9eXFxzKmZ1bmN0aW9uIChbXiAoXSopLztSJiYhKFwibmFtZVwiaW4gaG8pJiZnbyhobyxcIm5hbWVcIix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3RyeXtyZXR1cm4gZm8uY2FsbCh0aGlzKS5tYXRjaChfbylbMV19Y2F0Y2goY3kpe3JldHVyblwiXCJ9fX0pO3ZhciBtbz1BKChmdW5jdGlvbihlLHQpe3ZhciBuLG8scixhLHMsaSx1LGMsbCxkLHAsZyxoLGYsXyxtLHYsTTtlLmV4cG9ydHM9KG49XCJmdW5jdGlvblwiPT10eXBlb2YgUHJvbWlzZSxvPVwib2JqZWN0XCI9PXR5cGVvZiBzZWxmP3NlbGY6RSxyPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wsYT1cInVuZGVmaW5lZFwiIT10eXBlb2YgTWFwLHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFNldCxpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBXZWFrTWFwLHU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdlYWtTZXQsYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgRGF0YVZpZXcsbD1yJiZ2b2lkIDAhPT1TeW1ib2wuaXRlcmF0b3IsZD1yJiZ2b2lkIDAhPT1TeW1ib2wudG9TdHJpbmdUYWcscD1zJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTZXQucHJvdG90eXBlLmVudHJpZXMsZz1hJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBNYXAucHJvdG90eXBlLmVudHJpZXMsaD1wJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YoKG5ldyBTZXQpLmVudHJpZXMoKSksZj1nJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YoKG5ldyBNYXApLmVudHJpZXMoKSksXz1sJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBBcnJheS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSxtPV8mJk9iamVjdC5nZXRQcm90b3R5cGVPZihbXVtTeW1ib2wuaXRlcmF0b3JdKCkpLHY9bCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3RyaW5nLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdLE09diYmT2JqZWN0LmdldFByb3RvdHlwZU9mKFwiXCJbU3ltYm9sLml0ZXJhdG9yXSgpKSxmdW5jdGlvbihlKXt2YXIgdD10eXBlb2YgZTtpZihcIm9iamVjdFwiIT09dClyZXR1cm4gdDtpZihudWxsPT09ZSlyZXR1cm5cIm51bGxcIjtpZihlPT09bylyZXR1cm5cImdsb2JhbFwiO2lmKEFycmF5LmlzQXJyYXkoZSkmJighMT09PWR8fCEoU3ltYm9sLnRvU3RyaW5nVGFnIGluIGUpKSlyZXR1cm5cIkFycmF5XCI7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmbnVsbCE9PXdpbmRvdyl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5sb2NhdGlvbiYmZT09PXdpbmRvdy5sb2NhdGlvbilyZXR1cm5cIkxvY2F0aW9uXCI7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5kb2N1bWVudCYmZT09PXdpbmRvdy5kb2N1bWVudClyZXR1cm5cIkRvY3VtZW50XCI7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3Ipe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cubmF2aWdhdG9yLm1pbWVUeXBlcyYmZT09PXdpbmRvdy5uYXZpZ2F0b3IubWltZVR5cGVzKXJldHVyblwiTWltZVR5cGVBcnJheVwiO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cubmF2aWdhdG9yLnBsdWdpbnMmJmU9PT13aW5kb3cubmF2aWdhdG9yLnBsdWdpbnMpcmV0dXJuXCJQbHVnaW5BcnJheVwifWlmKChcImZ1bmN0aW9uXCI9PXR5cGVvZiB3aW5kb3cuSFRNTEVsZW1lbnR8fFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cuSFRNTEVsZW1lbnQpJiZlIGluc3RhbmNlb2Ygd2luZG93LkhUTUxFbGVtZW50KXtpZihcIkJMT0NLUVVPVEVcIj09PWUudGFnTmFtZSlyZXR1cm5cIkhUTUxRdW90ZUVsZW1lbnRcIjtpZihcIlREXCI9PT1lLnRhZ05hbWUpcmV0dXJuXCJIVE1MVGFibGVEYXRhQ2VsbEVsZW1lbnRcIjtpZihcIlRIXCI9PT1lLnRhZ05hbWUpcmV0dXJuXCJIVE1MVGFibGVIZWFkZXJDZWxsRWxlbWVudFwifX12YXIgcj1kJiZlW1N5bWJvbC50b1N0cmluZ1RhZ107aWYoXCJzdHJpbmdcIj09dHlwZW9mIHIpcmV0dXJuIHI7dmFyIGw9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBsPT09UmVnRXhwLnByb3RvdHlwZT9cIlJlZ0V4cFwiOmw9PT1EYXRlLnByb3RvdHlwZT9cIkRhdGVcIjpuJiZsPT09UHJvbWlzZS5wcm90b3R5cGU/XCJQcm9taXNlXCI6cyYmbD09PVNldC5wcm90b3R5cGU/XCJTZXRcIjphJiZsPT09TWFwLnByb3RvdHlwZT9cIk1hcFwiOnUmJmw9PT1XZWFrU2V0LnByb3RvdHlwZT9cIldlYWtTZXRcIjppJiZsPT09V2Vha01hcC5wcm90b3R5cGU/XCJXZWFrTWFwXCI6YyYmbD09PURhdGFWaWV3LnByb3RvdHlwZT9cIkRhdGFWaWV3XCI6YSYmbD09PWY/XCJNYXAgSXRlcmF0b3JcIjpzJiZsPT09aD9cIlNldCBJdGVyYXRvclwiOl8mJmw9PT1tP1wiQXJyYXkgSXRlcmF0b3JcIjp2JiZsPT09TT9cIlN0cmluZyBJdGVyYXRvclwiOm51bGw9PT1sP1wiT2JqZWN0XCI6T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpfSl9KSk7dnQoe3RhcmdldDpcIkFycmF5XCIsc3RhdDohMH0se2lzQXJyYXk6S3R9KTt2YXIgdm89ZnVuY3Rpb24oZSx0LG4pe3ZhciBvLHI7cmV0dXJuIEtuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZihvPXQuY29uc3RydWN0b3IpJiZvIT09biYmQihyPW8ucHJvdG90eXBlKSYmciE9PW4ucHJvdG90eXBlJiZLbihlLHIpLGV9LE1vPXN0LmYseW89VGUuZixJbz1FZS5mLFRvPUV0LnRyaW0sRG89TC5OdW1iZXIsU289RG8ucHJvdG90eXBlLEVvPVwiTnVtYmVyXCI9PUYocXQoU28pKSxBbz1mdW5jdGlvbihlKXtpZihlZShlKSl0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCBhIFN5bWJvbCB2YWx1ZSB0byBhIG51bWJlclwiKTt2YXIgdCxuLG8scixhLHMsaSx1LGM9ZmUoZSxcIm51bWJlclwiKTtpZihcInN0cmluZ1wiPT10eXBlb2YgYyYmYy5sZW5ndGg+MilpZig0Mz09PSh0PShjPVRvKGMpKS5jaGFyQ29kZUF0KDApKXx8NDU9PT10KXtpZig4OD09PShuPWMuY2hhckNvZGVBdCgyKSl8fDEyMD09PW4pcmV0dXJuIE5hTn1lbHNlIGlmKDQ4PT09dCl7c3dpdGNoKGMuY2hhckNvZGVBdCgxKSl7Y2FzZSA2NjpjYXNlIDk4Om89MixyPTQ5O2JyZWFrO2Nhc2UgNzk6Y2FzZSAxMTE6bz04LHI9NTU7YnJlYWs7ZGVmYXVsdDpyZXR1cm4rY31mb3Iocz0oYT1jLnNsaWNlKDIpKS5sZW5ndGgsaT0wO2k8cztpKyspaWYoKHU9YS5jaGFyQ29kZUF0KGkpKTw0OHx8dT5yKXJldHVybiBOYU47cmV0dXJuIHBhcnNlSW50KGEsbyl9cmV0dXJuK2N9O2lmKF90KFwiTnVtYmVyXCIsIURvKFwiIDBvMVwiKXx8IURvKFwiMGIxXCIpfHxEbyhcIisweDFcIikpKXtmb3IodmFyIGtvLE5vPWZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg8MT8wOmUsbj10aGlzO3JldHVybiBuIGluc3RhbmNlb2YgTm8mJihFbz9PKChmdW5jdGlvbigpe1NvLnZhbHVlT2YuY2FsbChuKX0pKTpcIk51bWJlclwiIT1GKG4pKT92byhuZXcgRG8oQW8odCkpLG4sTm8pOkFvKHQpfSxDbz1SP01vKERvKTpcIk1BWF9WQUxVRSxNSU5fVkFMVUUsTmFOLE5FR0FUSVZFX0lORklOSVRZLFBPU0lUSVZFX0lORklOSVRZLEVQU0lMT04saXNGaW5pdGUsaXNJbnRlZ2VyLGlzTmFOLGlzU2FmZUludGVnZXIsTUFYX1NBRkVfSU5URUdFUixNSU5fU0FGRV9JTlRFR0VSLHBhcnNlRmxvYXQscGFyc2VJbnQsaXNJbnRlZ2VyLGZyb21TdHJpbmcscmFuZ2VcIi5zcGxpdChcIixcIiksTG89MDtDby5sZW5ndGg+TG87TG8rKylzZShEbyxrbz1Db1tMb10pJiYhc2UoTm8sa28pJiZJbyhObyxrbyx5byhEbyxrbykpO05vLnByb3RvdHlwZT1TbyxTby5jb25zdHJ1Y3Rvcj1ObyxIZShMLFwiTnVtYmVyXCIsTm8pfXZhciBPbz1PKChmdW5jdGlvbigpe1JuKDEpfSkpO3Z0KHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLGZvcmNlZDpPbyxzaGFtOiFDbn0se2dldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBSbihyZShlKSl9fSk7dmFyIFJvPURhdGUucHJvdG90eXBlLGJvPVJvLnRvU3RyaW5nLHdvPVJvLmdldFRpbWU7XCJJbnZhbGlkIERhdGVcIiE9U3RyaW5nKG5ldyBEYXRlKE5hTikpJiZIZShSbyxcInRvU3RyaW5nXCIsKGZ1bmN0aW9uKCl7dmFyIGU9d28uY2FsbCh0aGlzKTtyZXR1cm4gZT09ZT9iby5jYWxsKHRoaXMpOlwiSW52YWxpZCBEYXRlXCJ9KSk7dmFyIEdvPWRuP3t9LnRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCJbb2JqZWN0IFwiK2huKHRoaXMpK1wiXVwifTtkbnx8SGUoT2JqZWN0LnByb3RvdHlwZSxcInRvU3RyaW5nXCIsR28se3Vuc2FmZTohMH0pO3ZhciBQbz1mdW5jdGlvbigpe3ZhciBlPURlKHRoaXMpLHQ9XCJcIjtyZXR1cm4gZS5nbG9iYWwmJih0Kz1cImdcIiksZS5pZ25vcmVDYXNlJiYodCs9XCJpXCIpLGUubXVsdGlsaW5lJiYodCs9XCJtXCIpLGUuZG90QWxsJiYodCs9XCJzXCIpLGUudW5pY29kZSYmKHQrPVwidVwiKSxlLnN0aWNreSYmKHQrPVwieVwiKSx0fSxVbz1SZWdFeHAucHJvdG90eXBlLEZvPVVvLnRvU3RyaW5nLHFvPU8oKGZ1bmN0aW9uKCl7cmV0dXJuXCIvYS9iXCIhPUZvLmNhbGwoe3NvdXJjZTpcImFcIixmbGFnczpcImJcIn0pfSkpLHhvPVwidG9TdHJpbmdcIiE9Rm8ubmFtZTsocW98fHhvKSYmSGUoUmVnRXhwLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsKGZ1bmN0aW9uKCl7dmFyIGU9RGUodGhpcyksdD1NdChlLnNvdXJjZSksbj1lLmZsYWdzO3JldHVyblwiL1wiK3QrXCIvXCIrTXQodm9pZCAwPT09biYmZSBpbnN0YW5jZW9mIFJlZ0V4cCYmIShcImZsYWdzXCJpbiBVbyk/UG8uY2FsbChlKTpuKX0pLHt1bnNhZmU6ITB9KTt2YXIgVm8sS28sQm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUmVnRXhwKGUsdCl9LEhvPXtVTlNVUFBPUlRFRF9ZOk8oKGZ1bmN0aW9uKCl7dmFyIGU9Qm8oXCJhXCIsXCJ5XCIpO3JldHVybiBlLmxhc3RJbmRleD0yLG51bGwhPWUuZXhlYyhcImFiY2RcIil9KSksQlJPS0VOX0NBUkVUOk8oKGZ1bmN0aW9uKCl7dmFyIGU9Qm8oXCJeclwiLFwiZ3lcIik7cmV0dXJuIGUubGFzdEluZGV4PTIsbnVsbCE9ZS5leGVjKFwic3RyXCIpfSkpfSxqbz1PKChmdW5jdGlvbigpe3ZhciBlPVJlZ0V4cChcIi5cIixcInN0cmluZ1wiLmNoYXJBdCgwKSk7cmV0dXJuIShlLmRvdEFsbCYmZS5leGVjKFwiXFxuXCIpJiZcInNcIj09PWUuZmxhZ3MpfSkpLFlvPU8oKGZ1bmN0aW9uKCl7dmFyIGU9UmVnRXhwKFwiKD88YT5iKVwiLFwic3RyaW5nXCIuY2hhckF0KDUpKTtyZXR1cm5cImJcIiE9PWUuZXhlYyhcImJcIikuZ3JvdXBzLmF8fFwiYmNcIiE9PVwiYlwiLnJlcGxhY2UoZSxcIiQ8YT5jXCIpfSkpLCRvPUJlLmdldCxXbz1SZWdFeHAucHJvdG90eXBlLmV4ZWMsem89b2UoXCJuYXRpdmUtc3RyaW5nLXJlcGxhY2VcIixTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UpLEpvPVdvLFhvPShWbz0vYS8sS289L2IqL2csV28uY2FsbChWbyxcImFcIiksV28uY2FsbChLbyxcImFcIiksMCE9PVZvLmxhc3RJbmRleHx8MCE9PUtvLmxhc3RJbmRleCksUW89SG8uVU5TVVBQT1JURURfWXx8SG8uQlJPS0VOX0NBUkVULFpvPXZvaWQgMCE9PS8oKT8/Ly5leGVjKFwiXCIpWzFdOyhYb3x8Wm98fFFvfHxqb3x8WW8pJiYoSm89ZnVuY3Rpb24oZSl7dmFyIHQsbixvLHIsYSxzLGksdT10aGlzLGM9JG8odSksbD1NdChlKSxkPWMucmF3O2lmKGQpcmV0dXJuIGQubGFzdEluZGV4PXUubGFzdEluZGV4LHQ9Sm8uY2FsbChkLGwpLHUubGFzdEluZGV4PWQubGFzdEluZGV4LHQ7dmFyIHA9Yy5ncm91cHMsZz1RbyYmdS5zdGlja3ksaD1Qby5jYWxsKHUpLGY9dS5zb3VyY2UsXz0wLG09bDtpZihnJiYoLTE9PT0oaD1oLnJlcGxhY2UoXCJ5XCIsXCJcIikpLmluZGV4T2YoXCJnXCIpJiYoaCs9XCJnXCIpLG09bC5zbGljZSh1Lmxhc3RJbmRleCksdS5sYXN0SW5kZXg+MCYmKCF1Lm11bHRpbGluZXx8dS5tdWx0aWxpbmUmJlwiXFxuXCIhPT1sLmNoYXJBdCh1Lmxhc3RJbmRleC0xKSkmJihmPVwiKD86IFwiK2YrXCIpXCIsbT1cIiBcIittLF8rKyksbj1uZXcgUmVnRXhwKFwiXig/OlwiK2YrXCIpXCIsaCkpLFpvJiYobj1uZXcgUmVnRXhwKFwiXlwiK2YrXCIkKD8hXFxcXHMpXCIsaCkpLFhvJiYobz11Lmxhc3RJbmRleCkscj1Xby5jYWxsKGc/bjp1LG0pLGc/cj8oci5pbnB1dD1yLmlucHV0LnNsaWNlKF8pLHJbMF09clswXS5zbGljZShfKSxyLmluZGV4PXUubGFzdEluZGV4LHUubGFzdEluZGV4Kz1yWzBdLmxlbmd0aCk6dS5sYXN0SW5kZXg9MDpYbyYmciYmKHUubGFzdEluZGV4PXUuZ2xvYmFsP3IuaW5kZXgrclswXS5sZW5ndGg6byksWm8mJnImJnIubGVuZ3RoPjEmJnpvLmNhbGwoclswXSxuLChmdW5jdGlvbigpe2ZvcihhPTE7YTxhcmd1bWVudHMubGVuZ3RoLTI7YSsrKXZvaWQgMD09PWFyZ3VtZW50c1thXSYmKHJbYV09dm9pZCAwKX0pKSxyJiZwKWZvcihyLmdyb3Vwcz1zPXF0KG51bGwpLGE9MDthPHAubGVuZ3RoO2ErKylzWyhpPXBbYV0pWzBdXT1yW2lbMV1dO3JldHVybiByfSk7dmFyIGVyPUpvO3Z0KHt0YXJnZXQ6XCJSZWdFeHBcIixwcm90bzohMCxmb3JjZWQ6Ly4vLmV4ZWMhPT1lcn0se2V4ZWM6ZXJ9KTt2YXIgdHI9Z2UoXCJzcGVjaWVzXCIpLG5yPVJlZ0V4cC5wcm90b3R5cGUsb3I9ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIHI9Z2UoZSksYT0hTygoZnVuY3Rpb24oKXt2YXIgdD17fTtyZXR1cm4gdFtyXT1mdW5jdGlvbigpe3JldHVybiA3fSw3IT1cIlwiW2VdKHQpfSkpLHM9YSYmIU8oKGZ1bmN0aW9uKCl7dmFyIHQ9ITEsbj0vYS87cmV0dXJuXCJzcGxpdFwiPT09ZSYmKChuPXt9KS5jb25zdHJ1Y3Rvcj17fSxuLmNvbnN0cnVjdG9yW3RyXT1mdW5jdGlvbigpe3JldHVybiBufSxuLmZsYWdzPVwiXCIsbltyXT0vLi9bcl0pLG4uZXhlYz1mdW5jdGlvbigpe3JldHVybiB0PSEwLG51bGx9LG5bcl0oXCJcIiksIXR9KSk7aWYoIWF8fCFzfHxuKXt2YXIgaT0vLi9bcl0sdT10KHIsXCJcIltlXSwoZnVuY3Rpb24oZSx0LG4sbyxyKXt2YXIgcz10LmV4ZWM7cmV0dXJuIHM9PT1lcnx8cz09PW5yLmV4ZWM/YSYmIXI/e2RvbmU6ITAsdmFsdWU6aS5jYWxsKHQsbixvKX06e2RvbmU6ITAsdmFsdWU6ZS5jYWxsKG4sdCxvKX06e2RvbmU6ITF9fSkpO0hlKFN0cmluZy5wcm90b3R5cGUsZSx1WzBdKSxIZShucixyLHVbMV0pfW8mJkFlKG5yW3JdLFwic2hhbVwiLCEwKX0scnI9Tm4uY2hhckF0LGFyPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdCsobj9ycihlLHQpLmxlbmd0aDoxKX0sc3I9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmV4ZWM7aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygbil7dmFyIG89bi5jYWxsKGUsdCk7aWYoXCJvYmplY3RcIiE9dHlwZW9mIG8pdGhyb3cgVHlwZUVycm9yKFwiUmVnRXhwIGV4ZWMgbWV0aG9kIHJldHVybmVkIHNvbWV0aGluZyBvdGhlciB0aGFuIGFuIE9iamVjdCBvciBudWxsXCIpO3JldHVybiBvfWlmKFwiUmVnRXhwXCIhPT1GKGUpKXRocm93IFR5cGVFcnJvcihcIlJlZ0V4cCNleGVjIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgcmVjZWl2ZXJcIik7cmV0dXJuIGVyLmNhbGwoZSx0KX07b3IoXCJtYXRjaFwiLChmdW5jdGlvbihlLHQsbil7cmV0dXJuW2Z1bmN0aW9uKHQpe3ZhciBuPVYodGhpcyksbz1udWxsPT10P3ZvaWQgMDp0W2VdO3JldHVybiB2b2lkIDAhPT1vP28uY2FsbCh0LG4pOm5ldyBSZWdFeHAodClbZV0oTXQobikpfSxmdW5jdGlvbihlKXt2YXIgbz1EZSh0aGlzKSxyPU10KGUpLGE9bih0LG8scik7aWYoYS5kb25lKXJldHVybiBhLnZhbHVlO2lmKCFvLmdsb2JhbClyZXR1cm4gc3IobyxyKTt2YXIgcz1vLnVuaWNvZGU7by5sYXN0SW5kZXg9MDtmb3IodmFyIGksdT1bXSxjPTA7bnVsbCE9PShpPXNyKG8scikpOyl7dmFyIGw9TXQoaVswXSk7dVtjXT1sLFwiXCI9PT1sJiYoby5sYXN0SW5kZXg9YXIocix6ZShvLmxhc3RJbmRleCkscykpLGMrK31yZXR1cm4gMD09PWM/bnVsbDp1fV19KSksdnQoe3RhcmdldDpcIkRhdGVcIixzdGF0OiEwfSx7bm93OmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9fSk7dmFyIGlyPWdlKFwidW5zY29wYWJsZXNcIiksdXI9QXJyYXkucHJvdG90eXBlO251bGw9PXVyW2lyXSYmRWUuZih1cixpcix7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnF0KG51bGwpfSk7dmFyIGNyPWZ1bmN0aW9uKGUpe3VyW2lyXVtlXT0hMH0sbHI9ZXQuaW5jbHVkZXM7dnQoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITB9LHtpbmNsdWRlczpmdW5jdGlvbihlKXtyZXR1cm4gbHIodGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxjcihcImluY2x1ZGVzXCIpO3ZhciBkcj1nZShcIm1hdGNoXCIpLHByPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBCKGUpJiYodm9pZCAwIT09KHQ9ZVtkcl0pPyEhdDpcIlJlZ0V4cFwiPT1GKGUpKX0sZ3I9ZnVuY3Rpb24oZSl7aWYocHIoZSkpdGhyb3cgVHlwZUVycm9yKFwiVGhlIG1ldGhvZCBkb2Vzbid0IGFjY2VwdCByZWd1bGFyIGV4cHJlc3Npb25zXCIpO3JldHVybiBlfSxocj1nZShcIm1hdGNoXCIpLGZyPWZ1bmN0aW9uKGUpe3ZhciB0PS8uLzt0cnl7XCIvLi9cIltlXSh0KX1jYXRjaChuKXt0cnl7cmV0dXJuIHRbaHJdPSExLFwiLy4vXCJbZV0odCl9Y2F0Y2gobyl7fX1yZXR1cm4hMX07dnQoe3RhcmdldDpcIlN0cmluZ1wiLHByb3RvOiEwLGZvcmNlZDohZnIoXCJpbmNsdWRlc1wiKX0se2luY2x1ZGVzOmZ1bmN0aW9uKGUpe3JldHVybiEhfk10KFYodGhpcykpLmluZGV4T2YoTXQoZ3IoZSkpLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KTt2YXIgX3I9ZnVuY3Rpb24oZSl7dmFyIHQ9TXQoVih0aGlzKSksbj1cIlwiLG89JGUoZSk7aWYobzwwfHxJbmZpbml0eT09byl0aHJvdyBSYW5nZUVycm9yKFwiV3JvbmcgbnVtYmVyIG9mIHJlcGV0aXRpb25zXCIpO2Zvcig7bz4wOyhvPj4+PTEpJiYodCs9dCkpMSZvJiYobis9dCk7cmV0dXJuIG59LG1yPU1hdGguY2VpbCx2cj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuLG8pe3ZhciByLGEscz1NdChWKHQpKSxpPXMubGVuZ3RoLHU9dm9pZCAwPT09bz9cIiBcIjpNdChvKSxjPXplKG4pO3JldHVybiBjPD1pfHxcIlwiPT11P3M6KChhPV9yLmNhbGwodSxtcigocj1jLWkpL3UubGVuZ3RoKSkpLmxlbmd0aD5yJiYoYT1hLnNsaWNlKDAscikpLGU/cythOmErcyl9fSxNcj17c3RhcnQ6dnIoITEpLGVuZDp2cighMCl9LnN0YXJ0LHlyPU1hdGguYWJzLElyPURhdGUucHJvdG90eXBlLFRyPUlyLmdldFRpbWUsRHI9SXIudG9JU09TdHJpbmcsU3I9TygoZnVuY3Rpb24oKXtyZXR1cm5cIjAzODUtMDctMjVUMDc6MDY6MzkuOTk5WlwiIT1Eci5jYWxsKG5ldyBEYXRlKC01MDAwMDAwMDAwMDAwMSkpfSkpfHwhTygoZnVuY3Rpb24oKXtEci5jYWxsKG5ldyBEYXRlKE5hTikpfSkpP2Z1bmN0aW9uKCl7aWYoIWlzRmluaXRlKFRyLmNhbGwodGhpcykpKXRocm93IFJhbmdlRXJyb3IoXCJJbnZhbGlkIHRpbWUgdmFsdWVcIik7dmFyIGU9dGhpcy5nZXRVVENGdWxsWWVhcigpLHQ9dGhpcy5nZXRVVENNaWxsaXNlY29uZHMoKSxuPWU8MD9cIi1cIjplPjk5OTk/XCIrXCI6XCJcIjtyZXR1cm4gbitNcih5cihlKSxuPzY6NCwwKStcIi1cIitNcih0aGlzLmdldFVUQ01vbnRoKCkrMSwyLDApK1wiLVwiK01yKHRoaXMuZ2V0VVRDRGF0ZSgpLDIsMCkrXCJUXCIrTXIodGhpcy5nZXRVVENIb3VycygpLDIsMCkrXCI6XCIrTXIodGhpcy5nZXRVVENNaW51dGVzKCksMiwwKStcIjpcIitNcih0aGlzLmdldFVUQ1NlY29uZHMoKSwyLDApK1wiLlwiK01yKHQsMywwKStcIlpcIn06RHI7dnQoe3RhcmdldDpcIkRhdGVcIixwcm90bzohMCxmb3JjZWQ6RGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmchPT1Tcn0se3RvSVNPU3RyaW5nOlNyfSk7dmFyIEVyPU1hdGguZmxvb3IsQXI9XCJcIi5yZXBsYWNlLGtyPS9cXCQoWyQmJ2BdfFxcZHsxLDJ9fDxbXj5dKj4pL2csTnI9L1xcJChbJCYnYF18XFxkezEsMn0pL2csQ3I9ZnVuY3Rpb24oZSx0LG4sbyxyLGEpe3ZhciBzPW4rZS5sZW5ndGgsaT1vLmxlbmd0aCx1PU5yO3JldHVybiB2b2lkIDAhPT1yJiYocj1yZShyKSx1PWtyKSxBci5jYWxsKGEsdSwoZnVuY3Rpb24oYSx1KXt2YXIgYztzd2l0Y2godS5jaGFyQXQoMCkpe2Nhc2VcIiRcIjpyZXR1cm5cIiRcIjtjYXNlXCImXCI6cmV0dXJuIGU7Y2FzZVwiYFwiOnJldHVybiB0LnNsaWNlKDAsbik7Y2FzZVwiJ1wiOnJldHVybiB0LnNsaWNlKHMpO2Nhc2VcIjxcIjpjPXJbdS5zbGljZSgxLC0xKV07YnJlYWs7ZGVmYXVsdDp2YXIgbD0rdTtpZigwPT09bClyZXR1cm4gYTtpZihsPmkpe3ZhciBkPUVyKGwvMTApO3JldHVybiAwPT09ZD9hOmQ8PWk/dm9pZCAwPT09b1tkLTFdP3UuY2hhckF0KDEpOm9bZC0xXSt1LmNoYXJBdCgxKTphfWM9b1tsLTFdfXJldHVybiB2b2lkIDA9PT1jP1wiXCI6Y30pKX0sTHI9Z2UoXCJyZXBsYWNlXCIpLE9yPU1hdGgubWF4LFJyPU1hdGgubWluLGJyPVwiJDBcIj09PVwiYVwiLnJlcGxhY2UoLy4vLFwiJDBcIiksd3I9ISEvLi9bTHJdJiZcIlwiPT09Ly4vW0xyXShcImFcIixcIiQwXCIpO29yKFwicmVwbGFjZVwiLChmdW5jdGlvbihlLHQsbil7dmFyIG89d3I/XCIkXCI6XCIkMFwiO3JldHVybltmdW5jdGlvbihlLG4pe3ZhciBvPVYodGhpcykscj1udWxsPT1lP3ZvaWQgMDplW0xyXTtyZXR1cm4gdm9pZCAwIT09cj9yLmNhbGwoZSxvLG4pOnQuY2FsbChNdChvKSxlLG4pfSxmdW5jdGlvbihlLHIpe3ZhciBhPURlKHRoaXMpLHM9TXQoZSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHImJi0xPT09ci5pbmRleE9mKG8pJiYtMT09PXIuaW5kZXhPZihcIiQ8XCIpKXt2YXIgaT1uKHQsYSxzLHIpO2lmKGkuZG9uZSlyZXR1cm4gaS52YWx1ZX12YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByO3V8fChyPU10KHIpKTt2YXIgYz1hLmdsb2JhbDtpZihjKXt2YXIgbD1hLnVuaWNvZGU7YS5sYXN0SW5kZXg9MH1mb3IodmFyIGQ9W107Oyl7dmFyIHA9c3IoYSxzKTtpZihudWxsPT09cClicmVhaztpZihkLnB1c2gocCksIWMpYnJlYWs7XCJcIj09PU10KHBbMF0pJiYoYS5sYXN0SW5kZXg9YXIocyx6ZShhLmxhc3RJbmRleCksbCkpfWZvcih2YXIgZyxoPVwiXCIsZj0wLF89MDtfPGQubGVuZ3RoO18rKyl7cD1kW19dO2Zvcih2YXIgbT1NdChwWzBdKSx2PU9yKFJyKCRlKHAuaW5kZXgpLHMubGVuZ3RoKSwwKSxNPVtdLHk9MTt5PHAubGVuZ3RoO3krKylNLnB1c2godm9pZCAwPT09KGc9cFt5XSk/ZzpTdHJpbmcoZykpO3ZhciBJPXAuZ3JvdXBzO2lmKHUpe3ZhciBUPVttXS5jb25jYXQoTSx2LHMpO3ZvaWQgMCE9PUkmJlQucHVzaChJKTt2YXIgRD1NdChyLmFwcGx5KHZvaWQgMCxUKSl9ZWxzZSBEPUNyKG0scyx2LE0sSSxyKTt2Pj1mJiYoaCs9cy5zbGljZShmLHYpK0QsZj12K20ubGVuZ3RoKX1yZXR1cm4gaCtzLnNsaWNlKGYpfV19KSwhIU8oKGZ1bmN0aW9uKCl7dmFyIGU9Ly4vO3JldHVybiBlLmV4ZWM9ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gZS5ncm91cHM9e2E6XCI3XCJ9LGV9LFwiN1wiIT09XCJcIi5yZXBsYWNlKGUsXCIkPGE+XCIpfSkpfHwhYnJ8fHdyKTt2YXIgR3I9QmUuc2V0LFByPUJlLmdldHRlckZvcihcIkFycmF5IEl0ZXJhdG9yXCIpLFVyPSRuKEFycmF5LFwiQXJyYXlcIiwoZnVuY3Rpb24oZSx0KXtHcih0aGlzLHt0eXBlOlwiQXJyYXkgSXRlcmF0b3JcIix0YXJnZXQ6SyhlKSxpbmRleDowLGtpbmQ6dH0pfSksKGZ1bmN0aW9uKCl7dmFyIGU9UHIodGhpcyksdD1lLnRhcmdldCxuPWUua2luZCxvPWUuaW5kZXgrKztyZXR1cm4hdHx8bz49dC5sZW5ndGg/KGUudGFyZ2V0PXZvaWQgMCx7dmFsdWU6dm9pZCAwLGRvbmU6ITB9KTpcImtleXNcIj09bj97dmFsdWU6byxkb25lOiExfTpcInZhbHVlc1wiPT1uP3t2YWx1ZTp0W29dLGRvbmU6ITF9Ont2YWx1ZTpbbyx0W29dXSxkb25lOiExfX0pLFwidmFsdWVzXCIpO3JuLkFyZ3VtZW50cz1ybi5BcnJheSxjcihcImtleXNcIiksY3IoXCJ2YWx1ZXNcIiksY3IoXCJlbnRyaWVzXCIpO3ZhciBGcj1nZShcIml0ZXJhdG9yXCIpLHFyPWdlKFwidG9TdHJpbmdUYWdcIikseHI9VXIudmFsdWVzO2Zvcih2YXIgVnIgaW4gWHQpe3ZhciBLcj1MW1ZyXSxCcj1LciYmS3IucHJvdG90eXBlO2lmKEJyKXtpZihCcltGcl0hPT14cil0cnl7QWUoQnIsRnIseHIpfWNhdGNoKGN5KXtCcltGcl09eHJ9aWYoQnJbcXJdfHxBZShCcixxcixWciksWHRbVnJdKWZvcih2YXIgSHIgaW4gVXIpaWYoQnJbSHJdIT09VXJbSHJdKXRyeXtBZShCcixIcixVcltIcl0pfWNhdGNoKGN5KXtCcltIcl09VXJbSHJdfX19dmFyIGpyPVFuKFwic2xpY2VcIiksWXI9Z2UoXCJzcGVjaWVzXCIpLCRyPVtdLnNsaWNlLFdyPU1hdGgubWF4O3Z0KHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDohanJ9LHtzbGljZTpmdW5jdGlvbihlLHQpe3ZhciBuLG8scixhPUsodGhpcykscz16ZShhLmxlbmd0aCksaT1RZShlLHMpLHU9UWUodm9pZCAwPT09dD9zOnQscyk7aWYoS3QoYSkmJihcImZ1bmN0aW9uXCIhPXR5cGVvZihuPWEuY29uc3RydWN0b3IpfHxuIT09QXJyYXkmJiFLdChuLnByb3RvdHlwZSk/QihuKSYmbnVsbD09PShuPW5bWXJdKSYmKG49dm9pZCAwKTpuPXZvaWQgMCxuPT09QXJyYXl8fHZvaWQgMD09PW4pKXJldHVybiAkci5jYWxsKGEsaSx1KTtmb3Iobz1uZXcodm9pZCAwPT09bj9BcnJheTpuKShXcih1LWksMCkpLHI9MDtpPHU7aSsrLHIrKylpIGluIGEmJmNuKG8scixhW2ldKTtyZXR1cm4gby5sZW5ndGg9cixvfX0pO3ZhciB6cj1bXS5qb2luLEpyPXghPU9iamVjdCxYcj1XdChcImpvaW5cIixcIixcIik7dnQoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOkpyfHwhWHJ9LHtqb2luOmZ1bmN0aW9uKGUpe3JldHVybiB6ci5jYWxsKEsodGhpcyksdm9pZCAwPT09ZT9cIixcIjplKX19KTt2YXIgUXI9ZXQuaW5kZXhPZixacj1bXS5pbmRleE9mLGVhPSEhWnImJjEvWzFdLmluZGV4T2YoMSwtMCk8MCx0YT1XdChcImluZGV4T2ZcIik7dnQoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOmVhfHwhdGF9LHtpbmRleE9mOmZ1bmN0aW9uKGUpe3JldHVybiBlYT9aci5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fDA6UXIodGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KTt2YXIgbmE9c3QuZixvYT17fS50b1N0cmluZyxyYT1cIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10sYWE9e2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIHJhJiZcIltvYmplY3QgV2luZG93XVwiPT1vYS5jYWxsKGUpP2Z1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbmEoZSl9Y2F0Y2goY3kpe3JldHVybiByYS5zbGljZSgpfX0oZSk6bmEoSyhlKSl9fSxzYT1hYS5mLGlhPU8oKGZ1bmN0aW9uKCl7cmV0dXJuIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKDEpfSkpO3Z0KHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLGZvcmNlZDppYX0se2dldE93blByb3BlcnR5TmFtZXM6c2F9KTt2YXIgdWE9JHQuZmluZCxjYT0hMDtcImZpbmRcImluW10mJkFycmF5KDEpLmZpbmQoKGZ1bmN0aW9uKCl7Y2E9ITF9KSksdnQoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOmNhfSx7ZmluZDpmdW5jdGlvbihlKXtyZXR1cm4gdWEodGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxjcihcImZpbmRcIik7dmFyIGxhLGRhLHBhLGdhLGhhPUwuUHJvbWlzZSxmYT1mdW5jdGlvbihlLHQsbil7Zm9yKHZhciBvIGluIHQpSGUoZSxvLHRbb10sbik7cmV0dXJuIGV9LF9hPWdlKFwic3BlY2llc1wiKSxtYT1mdW5jdGlvbihlKXt2YXIgdD1qKGUpLG49RWUuZjtSJiZ0JiYhdFtfYV0mJm4odCxfYSx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfSx2YT1mdW5jdGlvbihlLHQsbil7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgVHlwZUVycm9yKFwiSW5jb3JyZWN0IFwiKyhuP24rXCIgXCI6XCJcIikrXCJpbnZvY2F0aW9uXCIpO3JldHVybiBlfSxNYT1mdW5jdGlvbihlLHQpe3RoaXMuc3RvcHBlZD1lLHRoaXMucmVzdWx0PXR9LHlhPWZ1bmN0aW9uKGUsdCxuKXt2YXIgbyxyLGEscyxpLHUsYyxsPW4mJm4udGhhdCxkPSEoIW58fCFuLkFTX0VOVFJJRVMpLHA9ISghbnx8IW4uSVNfSVRFUkFUT1IpLGc9ISghbnx8IW4uSU5URVJSVVBURUQpLGg9VnQodCxsLDErZCtnKSxmPWZ1bmN0aW9uKGUpe3JldHVybiBvJiZubihvKSxuZXcgTWEoITAsZSl9LF89ZnVuY3Rpb24oZSl7cmV0dXJuIGQ/KERlKGUpLGc/aChlWzBdLGVbMV0sZik6aChlWzBdLGVbMV0pKTpnP2goZSxmKTpoKGUpfTtpZihwKW89ZTtlbHNle2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mKHI9X24oZSkpKXRocm93IFR5cGVFcnJvcihcIlRhcmdldCBpcyBub3QgaXRlcmFibGVcIik7aWYodW4ocikpe2ZvcihhPTAscz16ZShlLmxlbmd0aCk7cz5hO2ErKylpZigoaT1fKGVbYV0pKSYmaSBpbnN0YW5jZW9mIE1hKXJldHVybiBpO3JldHVybiBuZXcgTWEoITEpfW89ci5jYWxsKGUpfWZvcih1PW8ubmV4dDshKGM9dS5jYWxsKG8pKS5kb25lOyl7dHJ5e2k9XyhjLnZhbHVlKX1jYXRjaChjeSl7dGhyb3cgbm4obyksY3l9aWYoXCJvYmplY3RcIj09dHlwZW9mIGkmJmkmJmkgaW5zdGFuY2VvZiBNYSlyZXR1cm4gaX1yZXR1cm4gbmV3IE1hKCExKX0sSWE9Z2UoXCJzcGVjaWVzXCIpLFRhPWZ1bmN0aW9uKGUsdCl7dmFyIG4sbz1EZShlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09b3x8bnVsbD09KG49RGUobylbSWFdKT90Onh0KG4pfSxEYT0vKD86aXBob25lfGlwb2R8aXBhZCkuKmFwcGxld2Via2l0L2kudGVzdChZKSxTYT1cInByb2Nlc3NcIj09RihMLnByb2Nlc3MpLEVhPUwuc2V0SW1tZWRpYXRlLEFhPUwuY2xlYXJJbW1lZGlhdGUsa2E9TC5wcm9jZXNzLE5hPUwuTWVzc2FnZUNoYW5uZWwsQ2E9TC5EaXNwYXRjaCxMYT0wLE9hPXt9O3RyeXtsYT1MLmxvY2F0aW9ufWNhdGNoKGN5KXt9dmFyIFJhPWZ1bmN0aW9uKGUpe2lmKE9hLmhhc093blByb3BlcnR5KGUpKXt2YXIgdD1PYVtlXTtkZWxldGUgT2FbZV0sdCgpfX0sYmE9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7UmEoZSl9fSx3YT1mdW5jdGlvbihlKXtSYShlLmRhdGEpfSxHYT1mdW5jdGlvbihlKXtMLnBvc3RNZXNzYWdlKFN0cmluZyhlKSxsYS5wcm90b2NvbCtcIi8vXCIrbGEuaG9zdCl9O0VhJiZBYXx8KEVhPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPWFyZ3VtZW50cy5sZW5ndGgsbz0xO24+bzspdC5wdXNoKGFyZ3VtZW50c1tvKytdKTtyZXR1cm4gT2FbKytMYV09ZnVuY3Rpb24oKXsoXCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpKS5hcHBseSh2b2lkIDAsdCl9LGRhKExhKSxMYX0sQWE9ZnVuY3Rpb24oZSl7ZGVsZXRlIE9hW2VdfSxTYT9kYT1mdW5jdGlvbihlKXtrYS5uZXh0VGljayhiYShlKSl9OkNhJiZDYS5ub3c/ZGE9ZnVuY3Rpb24oZSl7Q2Eubm93KGJhKGUpKX06TmEmJiFEYT8oZ2E9KHBhPW5ldyBOYSkucG9ydDIscGEucG9ydDEub25tZXNzYWdlPXdhLGRhPVZ0KGdhLnBvc3RNZXNzYWdlLGdhLDEpKTpMLmFkZEV2ZW50TGlzdGVuZXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhTC5pbXBvcnRTY3JpcHRzJiZsYSYmXCJmaWxlOlwiIT09bGEucHJvdG9jb2wmJiFPKEdhKT8oZGE9R2EsTC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHdhLCExKSk6ZGE9XCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIE1lKFwic2NyaXB0XCIpP2Z1bmN0aW9uKGUpe2J0LmFwcGVuZENoaWxkKE1lKFwic2NyaXB0XCIpKS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtidC5yZW1vdmVDaGlsZCh0aGlzKSxSYShlKX19OmZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoYmEoZSksMCl9KTt2YXIgUGEsVWEsRmEscWEseGEsVmEsS2EsQmEsSGE9e3NldDpFYSxjbGVhcjpBYX0samE9L2lwaG9uZXxpcG9kfGlwYWQvaS50ZXN0KFkpJiZ2b2lkIDAhPT1MLlBlYmJsZSxZYT0vd2ViMHMoPyEuKmNocm9tZSkvaS50ZXN0KFkpLCRhPVRlLmYsV2E9SGEuc2V0LHphPUwuTXV0YXRpb25PYnNlcnZlcnx8TC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLEphPUwuZG9jdW1lbnQsWGE9TC5wcm9jZXNzLFFhPUwuUHJvbWlzZSxaYT0kYShMLFwicXVldWVNaWNyb3Rhc2tcIiksZXM9WmEmJlphLnZhbHVlO2VzfHwoUGE9ZnVuY3Rpb24oKXt2YXIgZSx0O2ZvcihTYSYmKGU9WGEuZG9tYWluKSYmZS5leGl0KCk7VWE7KXt0PVVhLmZuLFVhPVVhLm5leHQ7dHJ5e3QoKX1jYXRjaChjeSl7dGhyb3cgVWE/cWEoKTpGYT12b2lkIDAsY3l9fUZhPXZvaWQgMCxlJiZlLmVudGVyKCl9LERhfHxTYXx8WWF8fCF6YXx8IUphPyFqYSYmUWEmJlFhLnJlc29sdmU/KChLYT1RYS5yZXNvbHZlKHZvaWQgMCkpLmNvbnN0cnVjdG9yPVFhLEJhPUthLnRoZW4scWE9ZnVuY3Rpb24oKXtCYS5jYWxsKEthLFBhKX0pOnFhPVNhP2Z1bmN0aW9uKCl7WGEubmV4dFRpY2soUGEpfTpmdW5jdGlvbigpe1dhLmNhbGwoTCxQYSl9Oih4YT0hMCxWYT1KYS5jcmVhdGVUZXh0Tm9kZShcIlwiKSxuZXcgemEoUGEpLm9ic2VydmUoVmEse2NoYXJhY3RlckRhdGE6ITB9KSxxYT1mdW5jdGlvbigpe1ZhLmRhdGE9eGE9IXhhfSkpO3ZhciB0cyxucyxvcyxycyxhcz1lc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDB9O0ZhJiYoRmEubmV4dD10KSxVYXx8KFVhPXQscWEoKSksRmE9dH0sc3M9ZnVuY3Rpb24oZSl7dmFyIHQsbjt0aGlzLnByb21pc2U9bmV3IGUoKGZ1bmN0aW9uKGUsbyl7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09bil0aHJvdyBUeXBlRXJyb3IoXCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvclwiKTt0PWUsbj1vfSkpLHRoaXMucmVzb2x2ZT14dCh0KSx0aGlzLnJlamVjdD14dChuKX0saXM9e2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBzcyhlKX19LHVzPWZ1bmN0aW9uKGUsdCl7aWYoRGUoZSksQih0KSYmdC5jb25zdHJ1Y3Rvcj09PWUpcmV0dXJuIHQ7dmFyIG49aXMuZihlKTtyZXR1cm4oMCxuLnJlc29sdmUpKHQpLG4ucHJvbWlzZX0sY3M9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybntlcnJvcjohMSx2YWx1ZTplKCl9fWNhdGNoKGN5KXtyZXR1cm57ZXJyb3I6ITAsdmFsdWU6Y3l9fX0sbHM9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyxkcz1IYS5zZXQscHM9Z2UoXCJzcGVjaWVzXCIpLGdzPVwiUHJvbWlzZVwiLGhzPUJlLmdldCxmcz1CZS5zZXQsX3M9QmUuZ2V0dGVyRm9yKGdzKSxtcz1oYSYmaGEucHJvdG90eXBlLHZzPWhhLE1zPW1zLHlzPUwuVHlwZUVycm9yLElzPUwuZG9jdW1lbnQsVHM9TC5wcm9jZXNzLERzPWlzLmYsU3M9RHMsRXM9ISEoSXMmJklzLmNyZWF0ZUV2ZW50JiZMLmRpc3BhdGNoRXZlbnQpLEFzPVwiZnVuY3Rpb25cIj09dHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCxrcz0hMSxOcz1fdChncywoZnVuY3Rpb24oKXt2YXIgZT1PZSh2cyksdD1lIT09U3RyaW5nKHZzKTtpZighdCYmNjY9PT1YKXJldHVybiEwO2lmKFg+PTUxJiYvbmF0aXZlIGNvZGUvLnRlc3QoZSkpcmV0dXJuITE7dmFyIG49bmV3IHZzKChmdW5jdGlvbihlKXtlKDEpfSkpLG89ZnVuY3Rpb24oZSl7ZSgoZnVuY3Rpb24oKXt9KSwoZnVuY3Rpb24oKXt9KSl9O3JldHVybihuLmNvbnN0cnVjdG9yPXt9KVtwc109bywhKGtzPW4udGhlbigoZnVuY3Rpb24oKXt9KSlpbnN0YW5jZW9mIG8pfHwhdCYmbHMmJiFBc30pKSxDcz1Oc3x8IVRuKChmdW5jdGlvbihlKXt2cy5hbGwoZSkuY2F0Y2goKGZ1bmN0aW9uKCl7fSkpfSkpLExzPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiEoIUIoZSl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mKHQ9ZS50aGVuKSkmJnR9LE9zPWZ1bmN0aW9uKGUsdCl7aWYoIWUubm90aWZpZWQpe2Uubm90aWZpZWQ9ITA7dmFyIG49ZS5yZWFjdGlvbnM7YXMoKGZ1bmN0aW9uKCl7Zm9yKHZhciBvPWUudmFsdWUscj0xPT1lLnN0YXRlLGE9MDtuLmxlbmd0aD5hOyl7dmFyIHMsaSx1LGM9blthKytdLGw9cj9jLm9rOmMuZmFpbCxkPWMucmVzb2x2ZSxwPWMucmVqZWN0LGc9Yy5kb21haW47dHJ5e2w/KHJ8fCgyPT09ZS5yZWplY3Rpb24mJkdzKGUpLGUucmVqZWN0aW9uPTEpLCEwPT09bD9zPW86KGcmJmcuZW50ZXIoKSxzPWwobyksZyYmKGcuZXhpdCgpLHU9ITApKSxzPT09Yy5wcm9taXNlP3AoeXMoXCJQcm9taXNlLWNoYWluIGN5Y2xlXCIpKTooaT1McyhzKSk/aS5jYWxsKHMsZCxwKTpkKHMpKTpwKG8pfWNhdGNoKGN5KXtnJiYhdSYmZy5leGl0KCkscChjeSl9fWUucmVhY3Rpb25zPVtdLGUubm90aWZpZWQ9ITEsdCYmIWUucmVqZWN0aW9uJiZicyhlKX0pKX19LFJzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgbyxyO0VzPygobz1Jcy5jcmVhdGVFdmVudChcIkV2ZW50XCIpKS5wcm9taXNlPXQsby5yZWFzb249bixvLmluaXRFdmVudChlLCExLCEwKSxMLmRpc3BhdGNoRXZlbnQobykpOm89e3Byb21pc2U6dCxyZWFzb246bn0sIUFzJiYocj1MW1wib25cIitlXSk/cihvKTpcInVuaGFuZGxlZHJlamVjdGlvblwiPT09ZSYmZnVuY3Rpb24oZSx0KXt2YXIgbj1MLmNvbnNvbGU7biYmbi5lcnJvciYmKDE9PT1hcmd1bWVudHMubGVuZ3RoP24uZXJyb3IoZSk6bi5lcnJvcihlLHQpKX0oXCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25cIixuKX0sYnM9ZnVuY3Rpb24oZSl7ZHMuY2FsbChMLChmdW5jdGlvbigpe3ZhciB0LG49ZS5mYWNhZGUsbz1lLnZhbHVlO2lmKHdzKGUpJiYodD1jcygoZnVuY3Rpb24oKXtTYT9Ucy5lbWl0KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsbyxuKTpScyhcInVuaGFuZGxlZHJlamVjdGlvblwiLG4sbyl9KSksZS5yZWplY3Rpb249U2F8fHdzKGUpPzI6MSx0LmVycm9yKSl0aHJvdyB0LnZhbHVlfSkpfSx3cz1mdW5jdGlvbihlKXtyZXR1cm4gMSE9PWUucmVqZWN0aW9uJiYhZS5wYXJlbnR9LEdzPWZ1bmN0aW9uKGUpe2RzLmNhbGwoTCwoZnVuY3Rpb24oKXt2YXIgdD1lLmZhY2FkZTtTYT9Ucy5lbWl0KFwicmVqZWN0aW9uSGFuZGxlZFwiLHQpOlJzKFwicmVqZWN0aW9uaGFuZGxlZFwiLHQsZS52YWx1ZSl9KSl9LFBzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24obyl7ZSh0LG8sbil9fSxVcz1mdW5jdGlvbihlLHQsbil7ZS5kb25lfHwoZS5kb25lPSEwLG4mJihlPW4pLGUudmFsdWU9dCxlLnN0YXRlPTIsT3MoZSwhMCkpfSxGcz1mdW5jdGlvbihlLHQsbil7aWYoIWUuZG9uZSl7ZS5kb25lPSEwLG4mJihlPW4pO3RyeXtpZihlLmZhY2FkZT09PXQpdGhyb3cgeXMoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTt2YXIgbz1Mcyh0KTtvP2FzKChmdW5jdGlvbigpe3ZhciBuPXtkb25lOiExfTt0cnl7by5jYWxsKHQsUHMoRnMsbixlKSxQcyhVcyxuLGUpKX1jYXRjaChjeSl7VXMobixjeSxlKX19KSk6KGUudmFsdWU9dCxlLnN0YXRlPTEsT3MoZSwhMSkpfWNhdGNoKGN5KXtVcyh7ZG9uZTohMX0sY3ksZSl9fX07aWYoTnMmJihNcz0odnM9ZnVuY3Rpb24oZSl7dmEodGhpcyx2cyxncykseHQoZSksdHMuY2FsbCh0aGlzKTt2YXIgdD1ocyh0aGlzKTt0cnl7ZShQcyhGcyx0KSxQcyhVcyx0KSl9Y2F0Y2goY3kpe1VzKHQsY3kpfX0pLnByb3RvdHlwZSwodHM9ZnVuY3Rpb24oZSl7ZnModGhpcyx7dHlwZTpncyxkb25lOiExLG5vdGlmaWVkOiExLHBhcmVudDohMSxyZWFjdGlvbnM6W10scmVqZWN0aW9uOiExLHN0YXRlOjAsdmFsdWU6dm9pZCAwfSl9KS5wcm90b3R5cGU9ZmEoTXMse3RoZW46ZnVuY3Rpb24oZSx0KXt2YXIgbj1fcyh0aGlzKSxvPURzKFRhKHRoaXMsdnMpKTtyZXR1cm4gby5vaz1cImZ1bmN0aW9uXCIhPXR5cGVvZiBlfHxlLG8uZmFpbD1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LG8uZG9tYWluPVNhP1RzLmRvbWFpbjp2b2lkIDAsbi5wYXJlbnQ9ITAsbi5yZWFjdGlvbnMucHVzaChvKSwwIT1uLnN0YXRlJiZPcyhuLCExKSxvLnByb21pc2V9LGNhdGNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pLG5zPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IHRzLHQ9aHMoZSk7dGhpcy5wcm9taXNlPWUsdGhpcy5yZXNvbHZlPVBzKEZzLHQpLHRoaXMucmVqZWN0PVBzKFVzLHQpfSxpcy5mPURzPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09dnN8fGU9PT1vcz9uZXcgbnMoZSk6U3MoZSl9LFwiZnVuY3Rpb25cIj09dHlwZW9mIGhhJiZtcyE9PU9iamVjdC5wcm90b3R5cGUpKXtycz1tcy50aGVuLGtzfHwoSGUobXMsXCJ0aGVuXCIsKGZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztyZXR1cm4gbmV3IHZzKChmdW5jdGlvbihlLHQpe3JzLmNhbGwobixlLHQpfSkpLnRoZW4oZSx0KX0pLHt1bnNhZmU6ITB9KSxIZShtcyxcImNhdGNoXCIsTXMuY2F0Y2gse3Vuc2FmZTohMH0pKTt0cnl7ZGVsZXRlIG1zLmNvbnN0cnVjdG9yfWNhdGNoKGN5KXt9S24mJktuKG1zLE1zKX12dCh7Z2xvYmFsOiEwLHdyYXA6ITAsZm9yY2VkOk5zfSx7UHJvbWlzZTp2c30pLEZuKHZzLGdzLCExKSxtYShncyksb3M9aihncyksdnQoe3RhcmdldDpncyxzdGF0OiEwLGZvcmNlZDpOc30se3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1Ecyh0aGlzKTtyZXR1cm4gdC5yZWplY3QuY2FsbCh2b2lkIDAsZSksdC5wcm9taXNlfX0pLHZ0KHt0YXJnZXQ6Z3Msc3RhdDohMCxmb3JjZWQ6TnN9LHtyZXNvbHZlOmZ1bmN0aW9uKGUpe3JldHVybiB1cyh0aGlzLGUpfX0pLHZ0KHt0YXJnZXQ6Z3Msc3RhdDohMCxmb3JjZWQ6Q3N9LHthbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPURzKHQpLG89bi5yZXNvbHZlLHI9bi5yZWplY3QsYT1jcygoZnVuY3Rpb24oKXt2YXIgbj14dCh0LnJlc29sdmUpLGE9W10scz0wLGk9MTt5YShlLChmdW5jdGlvbihlKXt2YXIgdT1zKyssYz0hMTthLnB1c2godm9pZCAwKSxpKyssbi5jYWxsKHQsZSkudGhlbigoZnVuY3Rpb24oZSl7Y3x8KGM9ITAsYVt1XT1lLC0taXx8byhhKSl9KSxyKX0pKSwtLWl8fG8oYSl9KSk7cmV0dXJuIGEuZXJyb3ImJnIoYS52YWx1ZSksbi5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1Ecyh0KSxvPW4ucmVqZWN0LHI9Y3MoKGZ1bmN0aW9uKCl7dmFyIHI9eHQodC5yZXNvbHZlKTt5YShlLChmdW5jdGlvbihlKXtyLmNhbGwodCxlKS50aGVuKG4ucmVzb2x2ZSxvKX0pKX0pKTtyZXR1cm4gci5lcnJvciYmbyhyLnZhbHVlKSxuLnByb21pc2V9fSk7dmFyIHFzPU5uLmNvZGVBdDt2dCh7dGFyZ2V0OlwiU3RyaW5nXCIscHJvdG86ITB9LHtjb2RlUG9pbnRBdDpmdW5jdGlvbihlKXtyZXR1cm4gcXModGhpcyxlKX19KTt2YXIgeHM9RXQudHJpbSxWcz1MLnBhcnNlRmxvYXQsS3M9MS9Wcyh5dCtcIi0wXCIpIT0tSW5maW5pdHk/ZnVuY3Rpb24oZSl7dmFyIHQ9eHMoTXQoZSkpLG49VnModCk7cmV0dXJuIDA9PT1uJiZcIi1cIj09dC5jaGFyQXQoMCk/LTA6bn06VnM7dnQoe2dsb2JhbDohMCxmb3JjZWQ6cGFyc2VGbG9hdCE9S3N9LHtwYXJzZUZsb2F0OktzfSk7dmFyIEJzPXtXRUI6NyxXWF9NUDo4LFFRX01QOjksVFRfTVA6MTAsQkFJRFVfTVA6MTEsQUxJX01QOjEyLFVOSV9OQVRJVkVfQVBQOjE0fSxIcz1cIjEuNy4zXCIsanM9NTM3MDQ4MTY4LFlzPTEsJHM9MixXcz0zLHpzPXtIT1NUOntDVVJSRU5UOntERUZBVUxUOlwiXCIsQkFDS1VQOlwiXCJ9LFRFU1Q6e0RFRkFVTFQ6XCJ3c3M6Ly93c3MtZGV2LnRpbS5xcS5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3MtZGV2LnRpbS5xcS5jb21cIn0sUFJPRFVDVElPTjp7REVGQVVMVDpcIndzczovL3dzcy5pbS5xY2xvdWQuY29tXCIsQkFDS1VQOlwid3NzOi8vd3NzLnRpbS5xcS5jb21cIn0sT1ZFUlNFQV9QUk9EVUNUSU9OOntERUZBVUxUOlwid3NzOi8vd3NzLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3MuaW0ucWNsb3VkLmNvbVwifSxzZXRDdXJyZW50OmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjI7ZT09PVlzP3RoaXMuQ1VSUkVOVD10aGlzLlRFU1Q6ZT09PSRzP3RoaXMuQ1VSUkVOVD10aGlzLlBST0RVQ1RJT046ZT09PVdzJiYodGhpcy5DVVJSRU5UPXRoaXMuT1ZFUlNFQV9QUk9EVUNUSU9OKX19LE5BTUU6e09QRU5fSU06XCJvcGVuaW1cIixHUk9VUDpcImdyb3VwX29wZW5faHR0cF9zdmNcIixHUk9VUF9BVFRSOlwiZ3JvdXBfb3Blbl9hdHRyX2h0dHBfc3ZjXCIsRlJJRU5EOlwic25zXCIsUFJPRklMRTpcInByb2ZpbGVcIixSRUNFTlRfQ09OVEFDVDpcInJlY2VudGNvbnRhY3RcIixQSUM6XCJvcGVucGljXCIsQklHX0dST1VQX05PX0FVVEg6XCJncm91cF9vcGVuX2h0dHBfbm9hdXRoX3N2Y1wiLEJJR19HUk9VUF9MT05HX1BPTExJTkc6XCJncm91cF9vcGVuX2xvbmdfcG9sbGluZ19odHRwX3N2Y1wiLEJJR19HUk9VUF9MT05HX1BPTExJTkdfTk9fQVVUSDpcImdyb3VwX29wZW5fbG9uZ19wb2xsaW5nX2h0dHBfbm9hdXRoX3N2Y1wiLElNX09QRU5fU1RBVDpcImltb3BlbnN0YXRcIixXRUJfSU06XCJ3ZWJpbVwiLElNX0NPU19TSUdOOlwiaW1fY29zX3NpZ25fc3ZyXCIsQ1VTVE9NX1VQTE9BRDpcImltX2Nvc19tc2dcIixIRUFSVEJFQVQ6XCJoZWFydGJlYXRcIixJTV9PUEVOX1BVU0g6XCJpbV9vcGVuX3B1c2hcIixJTV9PUEVOX1NUQVRVUzpcImltX29wZW5fc3RhdHVzXCIsSU1fTE9OR19NRVNTQUdFOlwiaW1fbG9uZ19tc2dcIixDTE9VRF9DT05UUk9MOlwiaW1fc2RrX2NvbmZpZ19tZ3JcIn0sQ01EOntBQ0NFU1NfTEFZRVI6XCJhY2Nlc3NsYXllclwiLExPR0lOOlwid3Nsb2dpblwiLExPR09VVF9MT05HX1BPTEw6XCJsb25ncG9sbGluZ2xvZ291dFwiLExPR09VVDpcIndzbG9nb3V0XCIsSEVMTE86XCJ3c2hlbGxvXCIsUE9SVFJBSVRfR0VUOlwicG9ydHJhaXRfZ2V0X2FsbFwiLFBPUlRSQUlUX1NFVDpcInBvcnRyYWl0X3NldFwiLEdFVF9MT05HX1BPTExfSUQ6XCJnZXRsb25ncG9sbGluZ2lkXCIsTE9OR19QT0xMOlwibG9uZ3BvbGxpbmdcIixBVkNIQVRST09NX0xPTkdfUE9MTDpcImdldF9tc2dcIixBRERfRlJJRU5EOlwiZnJpZW5kX2FkZFwiLFVQREFURV9GUklFTkQ6XCJmcmllbmRfdXBkYXRlXCIsR0VUX0ZSSUVORF9MSVNUOlwiZnJpZW5kX2dldFwiLEdFVF9GUklFTkRfUFJPRklMRTpcImZyaWVuZF9nZXRfbGlzdFwiLERFTEVURV9GUklFTkQ6XCJmcmllbmRfZGVsZXRlXCIsQ0hFQ0tfRlJJRU5EOlwiZnJpZW5kX2NoZWNrXCIsR0VUX0ZSSUVORF9HUk9VUF9MSVNUOlwiZ3JvdXBfZ2V0XCIsUkVTUE9ORF9GUklFTkRfQVBQTElDQVRJT046XCJmcmllbmRfcmVzcG9uc2VcIixHRVRfRlJJRU5EX0FQUExJQ0FUSU9OX0xJU1Q6XCJwZW5kZW5jeV9nZXRcIixERUxFVEVfRlJJRU5EX0FQUExJQ0FUSU9OOlwicGVuZGVuY3lfZGVsZXRlXCIsUkVQT1JUX0ZSSUVORF9BUFBMSUNBVElPTjpcInBlbmRlbmN5X3JlcG9ydFwiLEdFVF9HUk9VUF9BUFBMSUNBVElPTjpcImdldF9wZW5kZW5jeVwiLENSRUFURV9GUklFTkRfR1JPVVA6XCJncm91cF9hZGRcIixERUxFVEVfRlJJRU5EX0dST1VQOlwiZ3JvdXBfZGVsZXRlXCIsVVBEQVRFX0ZSSUVORF9HUk9VUDpcImdyb3VwX3VwZGF0ZVwiLEdFVF9CTEFDS0xJU1Q6XCJibGFja19saXN0X2dldFwiLEFERF9CTEFDS0xJU1Q6XCJibGFja19saXN0X2FkZFwiLERFTEVURV9CTEFDS0xJU1Q6XCJibGFja19saXN0X2RlbGV0ZVwiLENSRUFURV9HUk9VUDpcImNyZWF0ZV9ncm91cFwiLEdFVF9KT0lORURfR1JPVVBTOlwiZ2V0X2pvaW5lZF9ncm91cF9saXN0XCIsU0VUX0dST1VQX0FUVFJJQlVURVM6XCJzZXRfZ3JvdXBfYXR0clwiLE1PRElGWV9HUk9VUF9BVFRSSUJVVEVTOlwibW9kaWZ5X2dyb3VwX2F0dHJcIixERUxFVEVfR1JPVVBfQVRUUklCVVRFUzpcImRlbGV0ZV9ncm91cF9hdHRyXCIsQ0xFQVJfR1JPVVBfQVRUUklCVVRFUzpcImNsZWFyX2dyb3VwX2F0dHJcIixHRVRfR1JPVVBfQVRUUklCVVRFUzpcImdldF9ncm91cF9hdHRyXCIsU0VORF9NRVNTQUdFOlwic2VuZG1zZ1wiLFJFVk9LRV9DMkNfTUVTU0FHRTpcIm1zZ3dpdGhkcmF3XCIsREVMRVRFX0MyQ19NRVNTQUdFOlwiZGVsZXRlX2MyY19tc2dfcmFtYmxlXCIsU0VORF9HUk9VUF9NRVNTQUdFOlwic2VuZF9ncm91cF9tc2dcIixSRVZPS0VfR1JPVVBfTUVTU0FHRTpcImdyb3VwX21zZ19yZWNhbGxcIixERUxFVEVfR1JPVVBfTUVTU0FHRTpcImRlbGV0ZV9ncm91cF9yYW1ibGVfbXNnX2J5X3NlcVwiLEdFVF9HUk9VUF9JTkZPOlwiZ2V0X2dyb3VwX2luZm9cIixHRVRfR1JPVVBfTUVNQkVSX0lORk86XCJnZXRfc3BlY2lmaWVkX2dyb3VwX21lbWJlcl9pbmZvXCIsR0VUX0dST1VQX01FTUJFUl9MSVNUOlwiZ2V0X2dyb3VwX21lbWJlcl9pbmZvXCIsUVVJVF9HUk9VUDpcInF1aXRfZ3JvdXBcIixDSEFOR0VfR1JPVVBfT1dORVI6XCJjaGFuZ2VfZ3JvdXBfb3duZXJcIixERVNUUk9ZX0dST1VQOlwiZGVzdHJveV9ncm91cFwiLEFERF9HUk9VUF9NRU1CRVI6XCJhZGRfZ3JvdXBfbWVtYmVyXCIsREVMRVRFX0dST1VQX01FTUJFUjpcImRlbGV0ZV9ncm91cF9tZW1iZXJcIixTRUFSQ0hfR1JPVVBfQllfSUQ6XCJnZXRfZ3JvdXBfcHVibGljX2luZm9cIixBUFBMWV9KT0lOX0dST1VQOlwiYXBwbHlfam9pbl9ncm91cFwiLEhBTkRMRV9BUFBMWV9KT0lOX0dST1VQOlwiaGFuZGxlX2FwcGx5X2pvaW5fZ3JvdXBcIixIQU5ETEVfR1JPVVBfSU5WSVRBVElPTjpcImhhbmRsZV9pbnZpdGVfam9pbl9ncm91cFwiLE1PRElGWV9HUk9VUF9JTkZPOlwibW9kaWZ5X2dyb3VwX2Jhc2VfaW5mb1wiLE1PRElGWV9HUk9VUF9NRU1CRVJfSU5GTzpcIm1vZGlmeV9ncm91cF9tZW1iZXJfaW5mb1wiLERFTEVURV9HUk9VUF9TWVNURU1fTUVTU0FHRTpcImRlbGV0ZW1zZ1wiLERFTEVURV9HUk9VUF9BVF9USVBTOlwiZGVsZXRlbXNnXCIsR0VUX0NPTlZFUlNBVElPTl9MSVNUOlwiZ2V0XCIsUEFHSU5HX0dFVF9DT05WRVJTQVRJT05fTElTVDpcInBhZ2VfZ2V0XCIsREVMRVRFX0NPTlZFUlNBVElPTjpcImRlbGV0ZVwiLFBJTl9DT05WRVJTQVRJT046XCJ0b3BcIixHRVRfTUVTU0FHRVM6XCJnZXRtc2dcIixHRVRfQzJDX1JPQU1fTUVTU0FHRVM6XCJnZXRyb2FtbXNnXCIsR0VUX0dST1VQX1JPQU1fTUVTU0FHRVM6XCJncm91cF9tc2dfZ2V0XCIsU0VUX0MyQ19NRVNTQUdFX1JFQUQ6XCJtc2dyZWFkZWRcIixHRVRfUEVFUl9SRUFEX1RJTUU6XCJnZXRfcGVlcl9yZWFkX3RpbWVcIixTRVRfR1JPVVBfTUVTU0FHRV9SRUFEOlwibXNnX3JlYWRfcmVwb3J0XCIsRklMRV9SRUFEX0FORF9XUklURV9BVVRIS0VZOlwiYXV0aGtleVwiLEZJTEVfVVBMT0FEOlwicGljX3VwXCIsQ09TX1NJR046XCJjb3NcIixDT1NfUFJFX1NJRzpcInByZV9zaWdcIixUSU1fV0VCX1JFUE9SVF9WMjpcInRpbV93ZWJfcmVwb3J0X3YyXCIsQklHX0RBVEFfSEFMTFdBWV9BVVRIX0tFWTpcImF1dGhrZXlcIixHRVRfT05MSU5FX01FTUJFUl9OVU06XCJnZXRfb25saW5lX21lbWJlcl9udW1cIixBTElWRTpcImFsaXZlXCIsTUVTU0FHRV9QVVNIOlwibXNnX3B1c2hcIixNRVNTQUdFX1BVU0hfQUNLOlwid3NfbXNnX3B1c2hfYWNrXCIsU1RBVFVTX0ZPUkNFT0ZGTElORTpcInN0YXRfZm9yY2VvZmZsaW5lXCIsRE9XTkxPQURfTUVSR0VSX01FU1NBR0U6XCJnZXRfcmVsYXlfanNvbl9tc2dcIixVUExPQURfTUVSR0VSX01FU1NBR0U6XCJzYXZlX3JlbGF5X2pzb25fbXNnXCIsRkVUQ0hfQ0xPVURfQ09OVFJPTF9DT05GSUc6XCJmZXRjaF9jb25maWdcIixQVVNIRURfQ0xPVURfQ09OVFJPTF9DT05GSUc6XCJwdXNoX2NvbmZpZ3YyXCJ9LENIQU5ORUw6e1NPQ0tFVDoxLFhIUjoyLEFVVE86MH0sTkFNRV9WRVJTSU9OOntvcGVuaW06XCJ2NFwiLGdyb3VwX29wZW5faHR0cF9zdmM6XCJ2NFwiLHNuczpcInY0XCIscHJvZmlsZTpcInY0XCIscmVjZW50Y29udGFjdDpcInY0XCIsb3BlbnBpYzpcInY0XCIsZ3JvdXBfb3Blbl9odHRwX25vYXV0aF9zdmM6XCJ2NFwiLGdyb3VwX29wZW5fbG9uZ19wb2xsaW5nX2h0dHBfc3ZjOlwidjRcIixncm91cF9vcGVuX2xvbmdfcG9sbGluZ19odHRwX25vYXV0aF9zdmM6XCJ2NFwiLGltb3BlbnN0YXQ6XCJ2NFwiLGltX2Nvc19zaWduX3N2cjpcInY0XCIsaW1fY29zX21zZzpcInY0XCIsd2ViaW06XCJ2NFwiLGltX29wZW5fcHVzaDpcInY0XCIsaW1fb3Blbl9zdGF0dXM6XCJ2NFwifX07enMuSE9TVC5zZXRDdXJyZW50KCRzKTt2YXIgSnMsWHMsUXMsWnM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHd4JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB3eC5nZXRTeXN0ZW1JbmZvU3luYyYmQm9vbGVhbih3eC5nZXRTeXN0ZW1JbmZvU3luYygpLmZvbnRTaXplU2V0dGluZyksZWk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHFxJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBxcS5nZXRTeXN0ZW1JbmZvU3luYyYmQm9vbGVhbihxcS5nZXRTeXN0ZW1JbmZvU3luYygpLmZvbnRTaXplU2V0dGluZyksdGk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHR0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0dC5nZXRTeXN0ZW1JbmZvU3luYyYmQm9vbGVhbih0dC5nZXRTeXN0ZW1JbmZvU3luYygpLmZvbnRTaXplU2V0dGluZyksbmk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHN3YW4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIHN3YW4uZ2V0U3lzdGVtSW5mb1N5bmMmJkJvb2xlYW4oc3dhbi5nZXRTeXN0ZW1JbmZvU3luYygpLmZvbnRTaXplU2V0dGluZyksb2k9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG15JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBteS5nZXRTeXN0ZW1JbmZvU3luYyYmQm9vbGVhbihteS5nZXRTeXN0ZW1JbmZvU3luYygpLmZvbnRTaXplU2V0dGluZykscmk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaSYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdyxhaT1ac3x8ZWl8fHRpfHxuaXx8b2l8fHJpLHNpPShcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pfHxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KSYmIWFpLGlpPWVpP3FxOnRpP3R0Om5pP3N3YW46b2k/bXk6WnM/d3g6cmk/dW5pOnt9LHVpPShKcz1cIldFQlwiLFRpP0pzPVwiV0VCXCI6ZWk/SnM9XCJRUV9NUFwiOnRpP0pzPVwiVFRfTVBcIjpuaT9Kcz1cIkJBSURVX01QXCI6b2k/SnM9XCJBTElfTVBcIjpacz9Kcz1cIldYX01QXCI6cmkmJihKcz1cIlVOSV9OQVRJVkVfQVBQXCIpLEJzW0pzXSksY2k9c2kmJndpbmRvdyYmd2luZG93Lm5hdmlnYXRvciYmd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnR8fFwiXCIsbGk9L0FwcGxlV2ViS2l0XFwvKFtcXGQuXSspL2kuZXhlYyhjaSksZGk9KGxpJiZwYXJzZUZsb2F0KGxpLnBvcCgpKSwvaVBhZC9pLnRlc3QoY2kpKSxwaT0vaVBob25lL2kudGVzdChjaSkmJiFkaSxnaT0vaVBvZC9pLnRlc3QoY2kpLGhpPXBpfHxkaXx8Z2ksZmk9KGZ1bmN0aW9uKCl7dmFyIGU9Y2kubWF0Y2goL09TIChcXGQrKV8vaSk7ZSYmZVsxXSYmZVsxXX0oKSwvQW5kcm9pZC9pLnRlc3QoY2kpKSxfaT1mdW5jdGlvbigpe3ZhciBlPWNpLm1hdGNoKC9BbmRyb2lkIChcXGQrKSg/OlxcLihcXGQrKSk/KD86XFwuKFxcZCspKSovaSk7aWYoIWUpcmV0dXJuIG51bGw7dmFyIHQ9ZVsxXSYmcGFyc2VGbG9hdChlWzFdKSxuPWVbMl0mJnBhcnNlRmxvYXQoZVsyXSk7cmV0dXJuIHQmJm4/cGFyc2VGbG9hdChlWzFdK1wiLlwiK2VbMl0pOnR8fG51bGx9KCksbWk9KGZpJiYvd2Via2l0L2kudGVzdChjaSksL0ZpcmVmb3gvaS50ZXN0KGNpKSwvRWRnZS9pLnRlc3QoY2kpKSx2aT0hbWkmJi9DaHJvbWUvaS50ZXN0KGNpKSxNaT0oZnVuY3Rpb24oKXt2YXIgZT1jaS5tYXRjaCgvQ2hyb21lXFwvKFxcZCspLyk7ZSYmZVsxXSYmcGFyc2VGbG9hdChlWzFdKX0oKSwvTVNJRS8udGVzdChjaSkpLHlpPSgvTVNJRVxcczhcXC4wLy50ZXN0KGNpKSxmdW5jdGlvbigpe3ZhciBlPS9NU0lFXFxzKFxcZCspXFwuXFxkLy5leGVjKGNpKSx0PWUmJnBhcnNlRmxvYXQoZVsxXSk7cmV0dXJuIXQmJi9UcmlkZW50XFwvNy4wL2kudGVzdChjaSkmJi9ydjoxMS4wLy50ZXN0KGNpKSYmKHQ9MTEpLHR9KCkpLElpPSgvU2FmYXJpL2kudGVzdChjaSksL1RCU1xcL1xcZCsvaS50ZXN0KGNpKSksVGk9KGZ1bmN0aW9uKCl7dmFyIGU9Y2kubWF0Y2goL1RCU1xcLyhcXGQrKS9pKTtpZihlJiZlWzFdKWVbMV19KCksIUlpJiYvTVFRQnJvd3NlclxcL1xcZCsvaS50ZXN0KGNpKSwhSWkmJi8gUVFCcm93c2VyXFwvXFxkKy9pLnRlc3QoY2kpLC8obWljcm9tZXNzZW5nZXJ8d2ViYnJvd3NlcikvaS50ZXN0KGNpKSksRGk9L1dpbmRvd3MvaS50ZXN0KGNpKSxTaT0vTUFDIE9TIFgvaS50ZXN0KGNpKSxFaT0oL01pY3JvTWVzc2VuZ2VyL2kudGVzdChjaSksIU8oKGZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5pc0V4dGVuc2libGUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSkpLEFpPUEoKGZ1bmN0aW9uKGUpe3ZhciB0PUVlLmYsbj0hMSxvPWNlKFwibWV0YVwiKSxyPTAsYT1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxzPWZ1bmN0aW9uKGUpe3QoZSxvLHt2YWx1ZTp7b2JqZWN0SUQ6XCJPXCIrcisrLHdlYWtEYXRhOnt9fX0pfSxpPWUuZXhwb3J0cz17ZW5hYmxlOmZ1bmN0aW9uKCl7aS5lbmFibGU9ZnVuY3Rpb24oKXt9LG49ITA7dmFyIGU9c3QuZix0PVtdLnNwbGljZSxyPXt9O3Jbb109MSxlKHIpLmxlbmd0aCYmKHN0LmY9ZnVuY3Rpb24obil7Zm9yKHZhciByPWUobiksYT0wLHM9ci5sZW5ndGg7YTxzO2ErKylpZihyW2FdPT09byl7dC5jYWxsKHIsYSwxKTticmVha31yZXR1cm4gcn0sdnQoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOiEwfSx7Z2V0T3duUHJvcGVydHlOYW1lczphYS5mfSkpfSxmYXN0S2V5OmZ1bmN0aW9uKGUsdCl7aWYoIUIoZSkpcmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIGU/ZTooXCJzdHJpbmdcIj09dHlwZW9mIGU/XCJTXCI6XCJQXCIpK2U7aWYoIXNlKGUsbykpe2lmKCFhKGUpKXJldHVyblwiRlwiO2lmKCF0KXJldHVyblwiRVwiO3MoZSl9cmV0dXJuIGVbb10ub2JqZWN0SUR9LGdldFdlYWtEYXRhOmZ1bmN0aW9uKGUsdCl7aWYoIXNlKGUsbykpe2lmKCFhKGUpKXJldHVybiEwO2lmKCF0KXJldHVybiExO3MoZSl9cmV0dXJuIGVbb10ud2Vha0RhdGF9LG9uRnJlZXplOmZ1bmN0aW9uKGUpe3JldHVybiBFaSYmbiYmYShlKSYmIXNlKGUsbykmJnMoZSksZX19O1BlW29dPSEwfSkpLGtpPShBaS5lbmFibGUsQWkuZmFzdEtleSxBaS5nZXRXZWFrRGF0YSxBaS5vbkZyZWV6ZSxFZS5mKSxOaT1BaS5mYXN0S2V5LENpPUJlLnNldCxMaT1CZS5nZXR0ZXJGb3IsT2k9KGZ1bmN0aW9uKGUsdCxuKXt2YXIgbz0tMSE9PWUuaW5kZXhPZihcIk1hcFwiKSxyPS0xIT09ZS5pbmRleE9mKFwiV2Vha1wiKSxhPW8/XCJzZXRcIjpcImFkZFwiLHM9TFtlXSxpPXMmJnMucHJvdG90eXBlLHU9cyxjPXt9LGw9ZnVuY3Rpb24oZSl7dmFyIHQ9aVtlXTtIZShpLGUsXCJhZGRcIj09ZT9mdW5jdGlvbihlKXtyZXR1cm4gdC5jYWxsKHRoaXMsMD09PWU/MDplKSx0aGlzfTpcImRlbGV0ZVwiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiEociYmIUIoZSkpJiZ0LmNhbGwodGhpcywwPT09ZT8wOmUpfTpcImdldFwiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiByJiYhQihlKT92b2lkIDA6dC5jYWxsKHRoaXMsMD09PWU/MDplKX06XCJoYXNcIj09ZT9mdW5jdGlvbihlKXtyZXR1cm4hKHImJiFCKGUpKSYmdC5jYWxsKHRoaXMsMD09PWU/MDplKX06ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5jYWxsKHRoaXMsMD09PWU/MDplLG4pLHRoaXN9KX07aWYoX3QoZSxcImZ1bmN0aW9uXCIhPXR5cGVvZiBzfHwhKHJ8fGkuZm9yRWFjaCYmIU8oKGZ1bmN0aW9uKCl7KG5ldyBzKS5lbnRyaWVzKCkubmV4dCgpfSkpKSkpdT1uLmdldENvbnN0cnVjdG9yKHQsZSxvLGEpLEFpLmVuYWJsZSgpO2Vsc2UgaWYoX3QoZSwhMCkpe3ZhciBkPW5ldyB1LHA9ZFthXShyP3t9Oi0wLDEpIT1kLGc9TygoZnVuY3Rpb24oKXtkLmhhcygxKX0pKSxoPVRuKChmdW5jdGlvbihlKXtuZXcgcyhlKX0pKSxmPSFyJiZPKChmdW5jdGlvbigpe2Zvcih2YXIgZT1uZXcgcyx0PTU7dC0tOyllW2FdKHQsdCk7cmV0dXJuIWUuaGFzKC0wKX0pKTtofHwoKHU9dCgoZnVuY3Rpb24odCxuKXt2YSh0LHUsZSk7dmFyIHI9dm8obmV3IHMsdCx1KTtyZXR1cm4gbnVsbCE9biYmeWEobixyW2FdLHt0aGF0OnIsQVNfRU5UUklFUzpvfSkscn0pKSkucHJvdG90eXBlPWksaS5jb25zdHJ1Y3Rvcj11KSwoZ3x8ZikmJihsKFwiZGVsZXRlXCIpLGwoXCJoYXNcIiksbyYmbChcImdldFwiKSksKGZ8fHApJiZsKGEpLHImJmkuY2xlYXImJmRlbGV0ZSBpLmNsZWFyfWNbZV09dSx2dCh7Z2xvYmFsOiEwLGZvcmNlZDp1IT1zfSxjKSxGbih1LGUpLHJ8fG4uc2V0U3Ryb25nKHUsZSxvKX0oXCJNYXBcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcyxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1swXTp2b2lkIDApfX0pLHtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbihlLHQsbixvKXt2YXIgcj1lKChmdW5jdGlvbihlLGEpe3ZhKGUscix0KSxDaShlLHt0eXBlOnQsaW5kZXg6cXQobnVsbCksZmlyc3Q6dm9pZCAwLGxhc3Q6dm9pZCAwLHNpemU6MH0pLFJ8fChlLnNpemU9MCksbnVsbCE9YSYmeWEoYSxlW29dLHt0aGF0OmUsQVNfRU5UUklFUzpufSl9KSksYT1MaSh0KSxzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgbyxyLHM9YShlKSx1PWkoZSx0KTtyZXR1cm4gdT91LnZhbHVlPW46KHMubGFzdD11PXtpbmRleDpyPU5pKHQsITApLGtleTp0LHZhbHVlOm4scHJldmlvdXM6bz1zLmxhc3QsbmV4dDp2b2lkIDAscmVtb3ZlZDohMX0scy5maXJzdHx8KHMuZmlyc3Q9dSksbyYmKG8ubmV4dD11KSxSP3Muc2l6ZSsrOmUuc2l6ZSsrLFwiRlwiIT09ciYmKHMuaW5kZXhbcl09dSkpLGV9LGk9ZnVuY3Rpb24oZSx0KXt2YXIgbixvPWEoZSkscj1OaSh0KTtpZihcIkZcIiE9PXIpcmV0dXJuIG8uaW5kZXhbcl07Zm9yKG49by5maXJzdDtuO249bi5uZXh0KWlmKG4ua2V5PT10KXJldHVybiBufTtyZXR1cm4gZmEoci5wcm90b3R5cGUse2NsZWFyOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPWEodGhpcyksdD1lLmluZGV4LG49ZS5maXJzdDtuOyluLnJlbW92ZWQ9ITAsbi5wcmV2aW91cyYmKG4ucHJldmlvdXM9bi5wcmV2aW91cy5uZXh0PXZvaWQgMCksZGVsZXRlIHRbbi5pbmRleF0sbj1uLm5leHQ7ZS5maXJzdD1lLmxhc3Q9dm9pZCAwLFI/ZS5zaXplPTA6dGhpcy5zaXplPTB9LGRlbGV0ZTpmdW5jdGlvbihlKXt2YXIgdD1hKHRoaXMpLG49aSh0aGlzLGUpO2lmKG4pe3ZhciBvPW4ubmV4dCxyPW4ucHJldmlvdXM7ZGVsZXRlIHQuaW5kZXhbbi5pbmRleF0sbi5yZW1vdmVkPSEwLHImJihyLm5leHQ9byksbyYmKG8ucHJldmlvdXM9ciksdC5maXJzdD09biYmKHQuZmlyc3Q9byksdC5sYXN0PT1uJiYodC5sYXN0PXIpLFI/dC5zaXplLS06dGhpcy5zaXplLS19cmV0dXJuISFufSxmb3JFYWNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPWEodGhpcyksbz1WdChlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLDMpO3Q9dD90Lm5leHQ6bi5maXJzdDspZm9yKG8odC52YWx1ZSx0LmtleSx0aGlzKTt0JiZ0LnJlbW92ZWQ7KXQ9dC5wcmV2aW91c30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiEhaSh0aGlzLGUpfX0pLGZhKHIucHJvdG90eXBlLG4/e2dldDpmdW5jdGlvbihlKXt2YXIgdD1pKHRoaXMsZSk7cmV0dXJuIHQmJnQudmFsdWV9LHNldDpmdW5jdGlvbihlLHQpe3JldHVybiBzKHRoaXMsMD09PWU/MDplLHQpfX06e2FkZDpmdW5jdGlvbihlKXtyZXR1cm4gcyh0aGlzLGU9MD09PWU/MDplLGUpfX0pLFImJmtpKHIucHJvdG90eXBlLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKS5zaXplfX0pLHJ9LHNldFN0cm9uZzpmdW5jdGlvbihlLHQsbil7dmFyIG89dCtcIiBJdGVyYXRvclwiLHI9TGkodCksYT1MaShvKTskbihlLHQsKGZ1bmN0aW9uKGUsdCl7Q2kodGhpcyx7dHlwZTpvLHRhcmdldDplLHN0YXRlOnIoZSksa2luZDp0LGxhc3Q6dm9pZCAwfSl9KSwoZnVuY3Rpb24oKXtmb3IodmFyIGU9YSh0aGlzKSx0PWUua2luZCxuPWUubGFzdDtuJiZuLnJlbW92ZWQ7KW49bi5wcmV2aW91cztyZXR1cm4gZS50YXJnZXQmJihlLmxhc3Q9bj1uP24ubmV4dDplLnN0YXRlLmZpcnN0KT9cImtleXNcIj09dD97dmFsdWU6bi5rZXksZG9uZTohMX06XCJ2YWx1ZXNcIj09dD97dmFsdWU6bi52YWx1ZSxkb25lOiExfTp7dmFsdWU6W24ua2V5LG4udmFsdWVdLGRvbmU6ITF9OihlLnRhcmdldD12b2lkIDAse3ZhbHVlOnZvaWQgMCxkb25lOiEwfSl9KSxuP1wiZW50cmllc1wiOlwidmFsdWVzXCIsIW4sITApLG1hKHQpfX0pLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pO1hzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlP2NvbnNvbGU6dm9pZCAwIT09T2kmJk9pLmNvbnNvbGU/T2kuY29uc29sZTpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuY29uc29sZT93aW5kb3cuY29uc29sZTp7fTtmb3IodmFyIFJpPWZ1bmN0aW9uKCl7fSxiaT1bXCJhc3NlcnRcIixcImNsZWFyXCIsXCJjb3VudFwiLFwiZGVidWdcIixcImRpclwiLFwiZGlyeG1sXCIsXCJlcnJvclwiLFwiZXhjZXB0aW9uXCIsXCJncm91cFwiLFwiZ3JvdXBDb2xsYXBzZWRcIixcImdyb3VwRW5kXCIsXCJpbmZvXCIsXCJsb2dcIixcIm1hcmtUaW1lbGluZVwiLFwicHJvZmlsZVwiLFwicHJvZmlsZUVuZFwiLFwidGFibGVcIixcInRpbWVcIixcInRpbWVFbmRcIixcInRpbWVTdGFtcFwiLFwidHJhY2VcIixcIndhcm5cIl0sd2k9YmkubGVuZ3RoO3dpLS07KVFzPWJpW3dpXSxjb25zb2xlW1FzXXx8KFhzW1FzXT1SaSk7WHMubWV0aG9kcz1iaTt2YXIgR2k9WHMsUGk9MCxVaT1mdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpK1BpfSxGaT1mdW5jdGlvbigpe1BpPTB9LHFpPTAseGk9bmV3IE1hcDtmdW5jdGlvbiBWaSgpe3ZhciBlLHQ9KChlPW5ldyBEYXRlKS5zZXRUaW1lKFVpKCkpLGUpO3JldHVyblwiVElNIFwiK3QudG9Mb2NhbGVUaW1lU3RyaW5nKFwiZW4tVVNcIix7aG91cjEyOiExfSkrXCIuXCIrZnVuY3Rpb24oZSl7dmFyIHQ7c3dpdGNoKGUudG9TdHJpbmcoKS5sZW5ndGgpe2Nhc2UgMTp0PVwiMDBcIitlO2JyZWFrO2Nhc2UgMjp0PVwiMFwiK2U7YnJlYWs7ZGVmYXVsdDp0PWV9cmV0dXJuIHR9KHQuZ2V0TWlsbGlzZWNvbmRzKCkpK1wiOlwifXZhciBLaT17YXJndW1lbnRzMlN0cmluZzpmdW5jdGlvbihlKXt2YXIgdDtpZigxPT09ZS5sZW5ndGgpdD1WaSgpK2VbMF07ZWxzZXt0PVZpKCk7Zm9yKHZhciBuPTAsbz1lLmxlbmd0aDtuPG87bisrKVhpKGVbbl0pP1ppKGVbbl0pP3QrPWF1KGVbbl0pOnQrPUpTT04uc3RyaW5naWZ5KGVbbl0pOnQrPWVbbl0sdCs9XCIgXCJ9cmV0dXJuIHR9LGRlYnVnOmZ1bmN0aW9uKCl7aWYocWk8PS0xKXt2YXIgZT10aGlzLmFyZ3VtZW50czJTdHJpbmcoYXJndW1lbnRzKTtHaS5kZWJ1ZyhlKX19LGxvZzpmdW5jdGlvbigpe2lmKHFpPD0wKXt2YXIgZT10aGlzLmFyZ3VtZW50czJTdHJpbmcoYXJndW1lbnRzKTtHaS5sb2coZSl9fSxpbmZvOmZ1bmN0aW9uKCl7aWYocWk8PTEpe3ZhciBlPXRoaXMuYXJndW1lbnRzMlN0cmluZyhhcmd1bWVudHMpO0dpLmluZm8oZSl9fSx3YXJuOmZ1bmN0aW9uKCl7aWYocWk8PTIpe3ZhciBlPXRoaXMuYXJndW1lbnRzMlN0cmluZyhhcmd1bWVudHMpO0dpLndhcm4oZSl9fSxlcnJvcjpmdW5jdGlvbigpe2lmKHFpPD0zKXt2YXIgZT10aGlzLmFyZ3VtZW50czJTdHJpbmcoYXJndW1lbnRzKTtHaS5lcnJvcihlKX19LHRpbWU6ZnVuY3Rpb24oZSl7eGkuc2V0KGUsb3Uubm93KCkpfSx0aW1lRW5kOmZ1bmN0aW9uKGUpe2lmKHhpLmhhcyhlKSl7dmFyIHQ9b3Uubm93KCkteGkuZ2V0KGUpO3JldHVybiB4aS5kZWxldGUoZSksdH1yZXR1cm4gR2kud2FybihcIuacquaJvuWIsOWvueW6lGxhYmVsOiBcIi5jb25jYXQoZSxcIiwg6K+35Zyo6LCD55SoIGxvZ2dlci50aW1lRW5kIOWJje+8jOiwg+eUqCBsb2dnZXIudGltZVwiKSksMH0sc2V0TGV2ZWw6ZnVuY3Rpb24oZSl7ZTw0JiZHaS5sb2coVmkoKStcInNldCBsZXZlbCBmcm9tIFwiK3FpK1wiIHRvIFwiK2UpLHFpPWV9LGdldExldmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHFpfX0sQmk9W1widXJsXCJdLEhpPWZ1bmN0aW9uKGUpe3JldHVyblwiZmlsZVwiPT09ZXUoZSl9LGppPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT09ZSYmKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYhaXNOYU4oZS0wKXx8XCJvYmplY3RcIj09PW4oZSkmJmUuY29uc3RydWN0b3I9PT1OdW1iZXIpfSxZaT1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZX0sJGk9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lJiZcIm9iamVjdFwiPT09bihlKX0sV2k9ZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIiE9PW4oZSl8fG51bGw9PT1lKXJldHVybiExO3ZhciB0PU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtpZihudWxsPT09dClyZXR1cm4hMDtmb3IodmFyIG89dDtudWxsIT09T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOylvPU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtyZXR1cm4gdD09PW99LHppPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIEFycmF5LmlzQXJyYXk/QXJyYXkuaXNBcnJheShlKTpcImFycmF5XCI9PT1ldShlKX0sSmk9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWV9LFhpPWZ1bmN0aW9uKGUpe3JldHVybiB6aShlKXx8JGkoZSl9LFFpPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9LFppPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRXJyb3J9LGV1PWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkubWF0Y2goL15cXFtvYmplY3QgKC4qKVxcXSQvKVsxXS50b0xvd2VyQ2FzZSgpfSx0dT1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4hMTt2YXIgdD1lWzBdO3JldHVybiEvW15hLXpBLVowLTldLy50ZXN0KHQpfSxudT0wO0RhdGUubm93fHwoRGF0ZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX0pO3ZhciBvdT17bm93OmZ1bmN0aW9uKCl7MD09PW51JiYobnU9RGF0ZS5ub3coKS0xKTt2YXIgZT1EYXRlLm5vdygpLW51O3JldHVybiBlPjQyOTQ5NjcyOTU/KG51Kz00Mjk0OTY3Mjk1LERhdGUubm93KCktbnUpOmV9LHV0YzpmdW5jdGlvbigpe3JldHVybiBNYXRoLnJvdW5kKERhdGUubm93KCkvMWUzKX19LHJ1PWZ1bmN0aW9uIGUodCxuLG8scil7aWYoIVhpKHQpfHwhWGkobikpcmV0dXJuIDA7Zm9yKHZhciBhLHM9MCxpPU9iamVjdC5rZXlzKG4pLHU9MCxjPWkubGVuZ3RoO3U8Yzt1KyspaWYoYT1pW3VdLCEoSmkoblthXSl8fG8mJm8uaW5jbHVkZXMoYSkpKWlmKFhpKHRbYV0pJiZYaShuW2FdKSlzKz1lKHRbYV0sblthXSxvLHIpO2Vsc2V7aWYociYmci5pbmNsdWRlcyhuW2FdKSljb250aW51ZTt0W2FdIT09blthXSYmKHRbYV09blthXSxzKz0xKX1yZXR1cm4gc30sYXU9ZnVuY3Rpb24oZSl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGUsW1wibWVzc2FnZVwiLFwiY29kZVwiXSl9LHN1PWZ1bmN0aW9uKGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gMDtmb3IodmFyIHQ9MCxuPTAsbz1cInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJnZvaWQgMCE9PWRvY3VtZW50LmNoYXJhY3RlclNldD9kb2N1bWVudC5jaGFyYWN0ZXJTZXQ6XCJVVEYtOFwiO3ZvaWQgMCE9PWVbdF07KW4rPWVbdCsrXS5jaGFyQ29kZUF0W3RdPD0yNTU/MTohMT09PW8/MzoyO3JldHVybiBufSxpdT1mdW5jdGlvbihlKXt2YXIgdD1lfHw5OTk5OTk5OTtyZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKnQpfSx1dT1cIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCIsY3U9dXUubGVuZ3RoLGx1PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpaWYoZVtuXT09PXQpcmV0dXJuITA7cmV0dXJuITF9LGR1PXt9LHB1PWZ1bmN0aW9uKCl7aWYoYWkpcmV0dXJuXCJodHRwczpcIjtpZihzaSYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdylyZXR1cm5cImh0dHBzOlwiO3ZhciBlPXdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDtyZXR1cm5bXCJodHRwOlwiLFwiaHR0cHM6XCJdLmluZGV4T2YoZSk8MCYmKGU9XCJodHRwOlwiKSxlfSxndT1mdW5jdGlvbihlKXtyZXR1cm4tMT09PWUuaW5kZXhPZihcImh0dHA6Ly9cIil8fC0xPT09ZS5pbmRleE9mKFwiaHR0cHM6Ly9cIik/XCJodHRwczovL1wiK2U6ZS5yZXBsYWNlKC9odHRwc3xodHRwLyxcImh0dHBzXCIpfSxodT1mdW5jdGlvbiBlKHQpe2lmKDA9PT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0KS5sZW5ndGgpcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7dmFyIG89QXJyYXkuaXNBcnJheSh0KT9bXTpPYmplY3QuY3JlYXRlKG51bGwpLHI9XCJcIjtmb3IodmFyIGEgaW4gdCludWxsIT09dFthXT92b2lkIDAhPT10W2FdPyhyPW4odFthXSksW1wic3RyaW5nXCIsXCJudW1iZXJcIixcImZ1bmN0aW9uXCIsXCJib29sZWFuXCJdLmluZGV4T2Yocik+PTA/b1thXT10W2FdOm9bYV09ZSh0W2FdKSk6b1thXT12b2lkIDA6b1thXT1udWxsO3JldHVybiBvfTtmdW5jdGlvbiBmdShlLHQpe3ppKGUpJiZ6aSh0KT90LmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBuPXQua2V5LG89dC52YWx1ZSxyPWUuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5PT09bn0pKTtyP3IudmFsdWU9bzplLnB1c2goe2tleTpuLHZhbHVlOm99KX0pKTpLaS53YXJuKFwidXBkYXRlQ3VzdG9tRmllbGQgdGFyZ2V0IOaIliBzb3VyY2Ug5LiN5piv5pWw57uE77yM5b+955Wl5q2k5qyh5pu05paw44CCXCIpfXZhciBfdT1mdW5jdGlvbihlKXtyZXR1cm4gZT09PXJvLkdSUF9QVUJMSUN9LG11PWZ1bmN0aW9uKGUpe3JldHVybiBlPT09cm8uR1JQX0FWQ0hBVFJPT019LHZ1PWZ1bmN0aW9uKGUpe3JldHVybiBZaShlKSYmZS5zbGljZSgwLDMpPT09cm8uQ09OVl9DMkN9LE11PWZ1bmN0aW9uKGUpe3JldHVybiBZaShlKSYmZS5zbGljZSgwLDUpPT09cm8uQ09OVl9HUk9VUH0seXU9ZnVuY3Rpb24oZSl7cmV0dXJuIFlpKGUpJiZlPT09cm8uQ09OVl9TWVNURU19O2Z1bmN0aW9uIEl1KGUsdCl7dmFyIG49e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG8pe25bb109dChlW29dLG8pfSkpLG59ZnVuY3Rpb24gVHUoKXtmdW5jdGlvbiBlKCl7cmV0dXJuKDY1NTM2KigxK01hdGgucmFuZG9tKCkpfDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSl9cmV0dXJuXCJcIi5jb25jYXQoZSgpK2UoKSkuY29uY2F0KGUoKSkuY29uY2F0KGUoKSkuY29uY2F0KGUoKSkuY29uY2F0KGUoKSkuY29uY2F0KGUoKSkuY29uY2F0KGUoKSl9ZnVuY3Rpb24gRHUoKXt2YXIgZT1cInVua25vd25cIjtpZihTaSYmKGU9XCJtYWNcIiksRGkmJihlPVwid2luZG93c1wiKSxoaSYmKGU9XCJpb3NcIiksZmkmJihlPVwiYW5kcm9pZFwiKSxhaSl0cnl7dmFyIHQ9aWkuZ2V0U3lzdGVtSW5mb1N5bmMoKS5wbGF0Zm9ybTt2b2lkIDAhPT10JiYoZT10KX1jYXRjaChjeSl7fXJldHVybiBlfWZ1bmN0aW9uIFN1KGUpe3ZhciB0PWUub3JpZ2luVXJsLG49dm9pZCAwPT09dD92b2lkIDA6dCxvPWUub3JpZ2luV2lkdGgscj1lLm9yaWdpbkhlaWdodCxhPWUubWluLHM9dm9pZCAwPT09YT8xOTg6YSxpPXBhcnNlSW50KG8pLHU9cGFyc2VJbnQociksYz17dXJsOnZvaWQgMCx3aWR0aDowLGhlaWdodDowfTtyZXR1cm4oaTw9dT9pOnUpPD1zPyhjLnVybD1uLGMud2lkdGg9aSxjLmhlaWdodD11KToodTw9aT8oYy53aWR0aD1NYXRoLmNlaWwoaSpzL3UpLGMuaGVpZ2h0PXMpOihjLndpZHRoPXMsYy5oZWlnaHQ9TWF0aC5jZWlsKHUqcy9pKSksYy51cmw9XCJcIi5jb25jYXQobiwxOTg9PT1zP1wiP2ltYWdlVmlldzIvMy93LzE5OC9oLzE5OFwiOlwiP2ltYWdlVmlldzIvMy93LzcyMC9oLzcyMFwiKSksSmkobik/ZyhjLEJpKTpjfWZ1bmN0aW9uIEV1KGUpe3ZhciB0PWVbMl07ZVsyXT1lWzFdLGVbMV09dDtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyllW25dLnNldFR5cGUobil9ZnVuY3Rpb24gQXUoZSl7dmFyIHQ9ZS5zZXJ2Y21kO3JldHVybiB0LnNsaWNlKHQuaW5kZXhPZihcIi5cIikrMSl9ZnVuY3Rpb24ga3UoZSx0KXtyZXR1cm4gTWF0aC5yb3VuZChOdW1iZXIoZSkqTWF0aC5wb3coMTAsdCkpL01hdGgucG93KDEwLHQpfWZ1bmN0aW9uIE51KGUsdCl7cmV0dXJuIGUuaW5jbHVkZXModCl9ZnVuY3Rpb24gQ3UoZSx0KXtyZXR1cm4gZS5pbmNsdWRlcyh0KX12YXIgTHU9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBPdShlKXtpZihudWxsPT1lKXJldHVybiEwO2lmKFwiYm9vbGVhblwiPT10eXBlb2YgZSlyZXR1cm4hMTtpZihcIm51bWJlclwiPT10eXBlb2YgZSlyZXR1cm4gMD09PWU7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIDA9PT1lLmxlbmd0aDtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlKXJldHVybiAwPT09ZS5sZW5ndGg7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gMD09PWUubGVuZ3RoO2lmKGUgaW5zdGFuY2VvZiBFcnJvcilyZXR1cm5cIlwiPT09ZS5tZXNzYWdlO2lmKFdpKGUpKXtmb3IodmFyIHQgaW4gZSlpZihMdS5jYWxsKGUsdCkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIShcIm1hcFwiIT09ZXUoZSkmJiFmdW5jdGlvbihlKXtyZXR1cm5cInNldFwiPT09ZXUoZSl9KGUpJiYhSGkoZSkpJiYwPT09ZS5zaXplfWZ1bmN0aW9uIFJ1KGUsdCxuKXtpZih2b2lkIDA9PT10KXJldHVybiEwO3ZhciBvPSEwO2lmKFwib2JqZWN0XCI9PT1tbyh0KS50b0xvd2VyQ2FzZSgpKU9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uKHIpe3ZhciBhPTE9PT1lLmxlbmd0aD9lWzBdW3JdOnZvaWQgMDtvPSEhYnUoYSx0W3JdLG4scikmJm99KSk7ZWxzZSBpZihcImFycmF5XCI9PT1tbyh0KS50b0xvd2VyQ2FzZSgpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKW89ISFidShlW3JdLHRbcl0sbix0W3JdLm5hbWUpJiZvO2lmKG8pcmV0dXJuIG87dGhyb3cgbmV3IEVycm9yKFwiUGFyYW1zIHZhbGlkYXRlIGZhaWxlZC5cIil9ZnVuY3Rpb24gYnUoZSx0LG4sbyl7aWYodm9pZCAwPT09dClyZXR1cm4hMDt2YXIgcj0hMDtyZXR1cm4gdC5yZXF1aXJlZCYmT3UoZSkmJihHaS5lcnJvcihcIlRJTSBbXCIuY29uY2F0KG4sJ10gTWlzc2luZyByZXF1aXJlZCBwYXJhbXM6IFwiJykuY29uY2F0KG8sJ1wiLicpKSxyPSExKSxPdShlKXx8bW8oZSkudG9Mb3dlckNhc2UoKT09PXQudHlwZS50b0xvd2VyQ2FzZSgpfHwoR2kuZXJyb3IoXCJUSU0gW1wiLmNvbmNhdChuLCddIEludmFsaWQgcGFyYW1zOiB0eXBlIGNoZWNrIGZhaWxlZCBmb3IgXCInKS5jb25jYXQobywnXCIuRXhwZWN0ZWQgJykuY29uY2F0KHQudHlwZSxcIi5cIikpLHI9ITEpLHQudmFsaWRhdG9yJiYhdC52YWxpZGF0b3IoZSkmJihHaS5lcnJvcihcIlRJTSBbXCIuY29uY2F0KG4sXCJdIEludmFsaWQgcGFyYW1zOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcGFyYW1zLlwiKSkscj0hMSkscn12YXIgd3U9e2Y6Z2V9LEd1PUwsUHU9RWUuZixVdT0kdC5mb3JFYWNoLEZ1PUdlKFwiaGlkZGVuXCIpLHF1PWdlKFwidG9QcmltaXRpdmVcIikseHU9QmUuc2V0LFZ1PUJlLmdldHRlckZvcihcIlN5bWJvbFwiKSxLdT1PYmplY3QucHJvdG90eXBlLEJ1PUwuU3ltYm9sLEh1PWooXCJKU09OXCIsXCJzdHJpbmdpZnlcIiksanU9VGUuZixZdT1FZS5mLCR1PWFhLmYsV3U9Ry5mLHp1PW9lKFwic3ltYm9sc1wiKSxKdT1vZShcIm9wLXN5bWJvbHNcIiksWHU9b2UoXCJzdHJpbmctdG8tc3ltYm9sLXJlZ2lzdHJ5XCIpLFF1PW9lKFwic3ltYm9sLXRvLXN0cmluZy1yZWdpc3RyeVwiKSxadT1vZShcIndrc1wiKSxlYz1MLlFPYmplY3QsdGM9IWVjfHwhZWMucHJvdG90eXBlfHwhZWMucHJvdG90eXBlLmZpbmRDaGlsZCxuYz1SJiZPKChmdW5jdGlvbigpe3JldHVybiA3IT1xdChZdSh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFl1KHRoaXMsXCJhXCIse3ZhbHVlOjd9KS5hfX0pKS5hfSkpP2Z1bmN0aW9uKGUsdCxuKXt2YXIgbz1qdShLdSx0KTtvJiZkZWxldGUgS3VbdF0sWXUoZSx0LG4pLG8mJmUhPT1LdSYmWXUoS3UsdCxvKX06WXUsb2M9ZnVuY3Rpb24oZSx0KXt2YXIgbj16dVtlXT1xdChCdS5wcm90b3R5cGUpO3JldHVybiB4dShuLHt0eXBlOlwiU3ltYm9sXCIsdGFnOmUsZGVzY3JpcHRpb246dH0pLFJ8fChuLmRlc2NyaXB0aW9uPXQpLG59LHJjPWZ1bmN0aW9uKGUsdCxuKXtlPT09S3UmJnJjKEp1LHQsbiksRGUoZSk7dmFyIG89X2UodCk7cmV0dXJuIERlKG4pLHNlKHp1LG8pPyhuLmVudW1lcmFibGU/KHNlKGUsRnUpJiZlW0Z1XVtvXSYmKGVbRnVdW29dPSExKSxuPXF0KG4se2VudW1lcmFibGU6UCgwLCExKX0pKTooc2UoZSxGdSl8fFl1KGUsRnUsUCgxLHt9KSksZVtGdV1bb109ITApLG5jKGUsbyxuKSk6WXUoZSxvLG4pfSxhYz1mdW5jdGlvbihlLHQpe0RlKGUpO3ZhciBuPUsodCksbz1PdChuKS5jb25jYXQoY2MobikpO3JldHVybiBVdShvLChmdW5jdGlvbih0KXtSJiYhc2MuY2FsbChuLHQpfHxyYyhlLHQsblt0XSl9KSksZX0sc2M9ZnVuY3Rpb24oZSl7dmFyIHQ9X2UoZSksbj1XdS5jYWxsKHRoaXMsdCk7cmV0dXJuISh0aGlzPT09S3UmJnNlKHp1LHQpJiYhc2UoSnUsdCkpJiYoIShufHwhc2UodGhpcyx0KXx8IXNlKHp1LHQpfHxzZSh0aGlzLEZ1KSYmdGhpc1tGdV1bdF0pfHxuKX0saWM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1LKGUpLG89X2UodCk7aWYobiE9PUt1fHwhc2UoenUsbyl8fHNlKEp1LG8pKXt2YXIgcj1qdShuLG8pO3JldHVybiFyfHwhc2UoenUsbyl8fHNlKG4sRnUpJiZuW0Z1XVtvXXx8KHIuZW51bWVyYWJsZT0hMCkscn19LHVjPWZ1bmN0aW9uKGUpe3ZhciB0PSR1KEsoZSkpLG49W107cmV0dXJuIFV1KHQsKGZ1bmN0aW9uKGUpe3NlKHp1LGUpfHxzZShQZSxlKXx8bi5wdXNoKGUpfSkpLG59LGNjPWZ1bmN0aW9uKGUpe3ZhciB0PWU9PT1LdSxuPSR1KHQ/SnU6SyhlKSksbz1bXTtyZXR1cm4gVXUobiwoZnVuY3Rpb24oZSl7IXNlKHp1LGUpfHx0JiYhc2UoS3UsZSl8fG8ucHVzaCh6dVtlXSl9KSksb307aWYoUXx8KEhlKChCdT1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBCdSl0aHJvdyBUeXBlRXJyb3IoXCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3JcIik7dmFyIGU9YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP010KGFyZ3VtZW50c1swXSk6dm9pZCAwLHQ9Y2UoZSksbj1mdW5jdGlvbihlKXt0aGlzPT09S3UmJm4uY2FsbChKdSxlKSxzZSh0aGlzLEZ1KSYmc2UodGhpc1tGdV0sdCkmJih0aGlzW0Z1XVt0XT0hMSksbmModGhpcyx0LFAoMSxlKSl9O3JldHVybiBSJiZ0YyYmbmMoS3UsdCx7Y29uZmlndXJhYmxlOiEwLHNldDpufSksb2ModCxlKX0pLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZ1KHRoaXMpLnRhZ30pKSxIZShCdSxcIndpdGhvdXRTZXR0ZXJcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIG9jKGNlKGUpLGUpfSkpLEcuZj1zYyxFZS5mPXJjLFRlLmY9aWMsc3QuZj1hYS5mPXVjLGl0LmY9Y2Msd3UuZj1mdW5jdGlvbihlKXtyZXR1cm4gb2MoZ2UoZSksZSl9LFImJihZdShCdS5wcm90b3R5cGUsXCJkZXNjcmlwdGlvblwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFZ1KHRoaXMpLmRlc2NyaXB0aW9ufX0pLEhlKEt1LFwicHJvcGVydHlJc0VudW1lcmFibGVcIixzYyx7dW5zYWZlOiEwfSkpKSx2dCh7Z2xvYmFsOiEwLHdyYXA6ITAsZm9yY2VkOiFRLHNoYW06IVF9LHtTeW1ib2w6QnV9KSxVdShPdChadSksKGZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlKXt2YXIgdD1HdS5TeW1ib2x8fChHdS5TeW1ib2w9e30pO3NlKHQsZSl8fFB1KHQsZSx7dmFsdWU6d3UuZihlKX0pfShlKX0pKSx2dCh7dGFyZ2V0OlwiU3ltYm9sXCIsc3RhdDohMCxmb3JjZWQ6IVF9LHtmb3I6ZnVuY3Rpb24oZSl7dmFyIHQ9TXQoZSk7aWYoc2UoWHUsdCkpcmV0dXJuIFh1W3RdO3ZhciBuPUJ1KHQpO3JldHVybiBYdVt0XT1uLFF1W25dPXQsbn0sa2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKCFlZShlKSl0aHJvdyBUeXBlRXJyb3IoZStcIiBpcyBub3QgYSBzeW1ib2xcIik7aWYoc2UoUXUsZSkpcmV0dXJuIFF1W2VdfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXt0Yz0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7dGM9ITF9fSksdnQoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOiFRLHNoYW06IVJ9LHtjcmVhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9xdChlKTphYyhxdChlKSx0KX0sZGVmaW5lUHJvcGVydHk6cmMsZGVmaW5lUHJvcGVydGllczphYyxnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6aWN9KSx2dCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6IVF9LHtnZXRPd25Qcm9wZXJ0eU5hbWVzOnVjLGdldE93blByb3BlcnR5U3ltYm9sczpjY30pLHZ0KHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLGZvcmNlZDpPKChmdW5jdGlvbigpe2l0LmYoMSl9KSl9LHtnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGl0LmYocmUoZSkpfX0pLEh1KXt2YXIgbGM9IVF8fE8oKGZ1bmN0aW9uKCl7dmFyIGU9QnUoKTtyZXR1cm5cIltudWxsXVwiIT1IdShbZV0pfHxcInt9XCIhPUh1KHthOmV9KXx8XCJ7fVwiIT1IdShPYmplY3QoZSkpfSkpO3Z0KHt0YXJnZXQ6XCJKU09OXCIsc3RhdDohMCxmb3JjZWQ6bGN9LHtzdHJpbmdpZnk6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgbyxyPVtlXSxhPTE7YXJndW1lbnRzLmxlbmd0aD5hOylyLnB1c2goYXJndW1lbnRzW2ErK10pO2lmKG89dCwoQih0KXx8dm9pZCAwIT09ZSkmJiFlZShlKSlyZXR1cm4gS3QodCl8fCh0PWZ1bmN0aW9uKGUsdCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgbyYmKHQ9by5jYWxsKHRoaXMsZSx0KSksIWVlKHQpKXJldHVybiB0fSksclsxXT10LEh1LmFwcGx5KG51bGwscil9fSl9QnUucHJvdG90eXBlW3F1XXx8QWUoQnUucHJvdG90eXBlLHF1LEJ1LnByb3RvdHlwZS52YWx1ZU9mKSxGbihCdSxcIlN5bWJvbFwiKSxQZVtGdV09ITA7dmFyIGRjPUVlLmYscGM9TC5TeW1ib2w7aWYoUiYmXCJmdW5jdGlvblwiPT10eXBlb2YgcGMmJighKFwiZGVzY3JpcHRpb25cImluIHBjLnByb3RvdHlwZSl8fHZvaWQgMCE9PXBjKCkuZGVzY3JpcHRpb24pKXt2YXIgZ2M9e30saGM9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPDF8fHZvaWQgMD09PWFyZ3VtZW50c1swXT92b2lkIDA6U3RyaW5nKGFyZ3VtZW50c1swXSksdD10aGlzIGluc3RhbmNlb2YgaGM/bmV3IHBjKGUpOnZvaWQgMD09PWU/cGMoKTpwYyhlKTtyZXR1cm5cIlwiPT09ZSYmKGdjW3RdPSEwKSx0fTtjdChoYyxwYyk7dmFyIGZjPWhjLnByb3RvdHlwZT1wYy5wcm90b3R5cGU7ZmMuY29uc3RydWN0b3I9aGM7dmFyIF9jPWZjLnRvU3RyaW5nLG1jPVwiU3ltYm9sKHRlc3QpXCI9PVN0cmluZyhwYyhcInRlc3RcIikpLHZjPS9eU3ltYm9sXFwoKC4qKVxcKVteKV0rJC87ZGMoZmMsXCJkZXNjcmlwdGlvblwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9Qih0aGlzKT90aGlzLnZhbHVlT2YoKTp0aGlzLHQ9X2MuY2FsbChlKTtpZihzZShnYyxlKSlyZXR1cm5cIlwiO3ZhciBuPW1jP3Quc2xpY2UoNywtMSk6dC5yZXBsYWNlKHZjLFwiJDFcIik7cmV0dXJuXCJcIj09PW4/dm9pZCAwOm59fSksdnQoe2dsb2JhbDohMCxmb3JjZWQ6ITB9LHtTeW1ib2w6aGN9KX12YXIgTWMseWM9VGUuZixJYz1cIlwiLnN0YXJ0c1dpdGgsVGM9TWF0aC5taW4sRGM9ZnIoXCJzdGFydHNXaXRoXCIpLFNjPSEoRGN8fChNYz15YyhTdHJpbmcucHJvdG90eXBlLFwic3RhcnRzV2l0aFwiKSwhTWN8fE1jLndyaXRhYmxlKSk7dnQoe3RhcmdldDpcIlN0cmluZ1wiLHByb3RvOiEwLGZvcmNlZDohU2MmJiFEY30se3N0YXJ0c1dpdGg6ZnVuY3Rpb24oZSl7dmFyIHQ9TXQoVih0aGlzKSk7Z3IoZSk7dmFyIG49emUoVGMoYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsdC5sZW5ndGgpKSxvPU10KGUpO3JldHVybiBJYz9JYy5jYWxsKHQsbyxuKTp0LnNsaWNlKG4sbitvLmxlbmd0aCk9PT1vfX0pO3ZhciBFYz17VU5TRU5EOlwidW5TZW5kXCIsU1VDQ0VTUzpcInN1Y2Nlc3NcIixGQUlMOlwiZmFpbFwifSxBYz17Tk9UX1NUQVJUOlwibm90U3RhcnRcIixQRU5ESU5HOlwicGVuZ2RpbmdcIixSRVNPTFZFRDpcInJlc29sdmVkXCIsUkVKRUNURUQ6XCJyZWplY3RlZFwifSxrYz1mdW5jdGlvbihlKXtyZXR1cm4hIWUmJighISh2dShlKXx8TXUoZSl8fHl1KGUpKXx8KGNvbnNvbGUud2FybihcIumdnuazleeahOS8muivnSBJRDpcIi5jb25jYXQoZSxcIuOAguS8muivnSBJRCDnu4TmiJDmlrnlvI/vvJpDMkMgKyB1c2VySUTvvIjljZXogYrvvIlHUk9VUCArIGdyb3VwSUTvvIjnvqTogYrvvIlAVElNI1NZU1RFTe+8iOezu+e7n+mAmuefpeS8muivne+8iVwiKSksITEpKX0sTmM9XCLor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI1wiLENjPWZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmFtP1wiXCIuY29uY2F0KGUuYXBpLFwiIFwiKS5jb25jYXQoZS5wYXJhbSxcIiBcIikuY29uY2F0KGUuZGVzYyxcIuOAglwiKS5jb25jYXQoTmMpLmNvbmNhdChlLmFwaSk6XCJcIi5jb25jYXQoZS5hcGksXCIgXCIpLmNvbmNhdChlLmRlc2MsXCLjgIJcIikuY29uY2F0KE5jKS5jb25jYXQoZS5hcGkpfSxMYz17dHlwZTpcIlN0cmluZ1wiLHJlcXVpcmVkOiEwfSxPYz17dHlwZTpcIkFycmF5XCIscmVxdWlyZWQ6ITB9LFJjPXt0eXBlOlwiT2JqZWN0XCIscmVxdWlyZWQ6ITB9LGJjPXtsb2dpbjp7dXNlcklEOkxjLHVzZXJTaWc6TGN9LGFkZFRvQmxhY2tsaXN0Ont1c2VySURMaXN0Ok9jfSxvbjpbe25hbWU6XCJldmVudE5hbWVcIix0eXBlOlwiU3RyaW5nXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiYwIT09ZS5sZW5ndGh8fChjb25zb2xlLndhcm4oQ2Moe2FwaTpcIm9uXCIscGFyYW06XCJldmVudE5hbWVcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ++8jOS4lOS4jeiDveS4uuepulwifSkpLCExKX19LHtuYW1lOlwiaGFuZGxlclwiLHR5cGU6XCJGdW5jdGlvblwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiBlPyhjb25zb2xlLndhcm4oQ2Moe2FwaTpcIm9uXCIscGFyYW06XCJoYW5kbGVyXCIsZGVzYzpcIuWPguaVsOW/hemhu+S4uiBGdW5jdGlvblwifSkpLCExKTooXCJcIj09PWUubmFtZSYmY29uc29sZS53YXJuKFwib24g5o6l5Y+j55qEIGhhbmRsZXIg5Y+C5pWw5o6o6I2Q5L2/55So5YW35ZCN5Ye95pWw44CC5YW35ZCN5Ye95pWw5Y+v5Lul5L2/55SoIG9mZiDmjqXlj6Plj5bmtojorqLpmIXvvIzljL/lkI3lh73mlbDml6Dms5Xlj5bmtojorqLpmIXjgIJcIiksITApfX1dLG9uY2U6W3tuYW1lOlwiZXZlbnROYW1lXCIsdHlwZTpcIlN0cmluZ1wiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmMCE9PWUubGVuZ3RofHwoY29uc29sZS53YXJuKENjKHthcGk6XCJvbmNlXCIscGFyYW06XCJldmVudE5hbWVcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ++8jOS4lOS4jeiDveS4uuepulwifSkpLCExKX19LHtuYW1lOlwiaGFuZGxlclwiLHR5cGU6XCJGdW5jdGlvblwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiBlPyhjb25zb2xlLndhcm4oQ2Moe2FwaTpcIm9uY2VcIixwYXJhbTpcImhhbmRsZXJcIixkZXNjOlwi5Y+C5pWw5b+F6aG75Li6IEZ1bmN0aW9uXCJ9KSksITEpOihcIlwiPT09ZS5uYW1lJiZjb25zb2xlLndhcm4oXCJvbmNlIOaOpeWPo+eahCBoYW5kbGVyIOWPguaVsOaOqOiNkOS9v+eUqOWFt+WQjeWHveaVsOOAglwiKSwhMCl9fV0sb2ZmOlt7bmFtZTpcImV2ZW50TmFtZVwiLHR5cGU6XCJTdHJpbmdcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJjAhPT1lLmxlbmd0aHx8KGNvbnNvbGUud2FybihDYyh7YXBpOlwib2ZmXCIscGFyYW06XCJldmVudE5hbWVcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ++8jOS4lOS4jeiDveS4uuepulwifSkpLCExKX19LHtuYW1lOlwiaGFuZGxlclwiLHR5cGU6XCJGdW5jdGlvblwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiBlPyhjb25zb2xlLndhcm4oQ2Moe2FwaTpcIm9mZlwiLHBhcmFtOlwiaGFuZGxlclwiLGRlc2M6XCLlj4LmlbDlv4XpobvkuLogRnVuY3Rpb25cIn0pKSwhMSk6KFwiXCI9PT1lLm5hbWUmJmNvbnNvbGUud2FybihcIm9mZiDmjqXlj6Pml6Dms5XkuLrljL/lkI3lh73mlbDlj5bmtojnm5HlkKzkuovku7bjgIJcIiksITApfX1dLHNlbmRNZXNzYWdlOlt0KHtuYW1lOlwibWVzc2FnZVwifSxSYyldLGdldE1lc3NhZ2VMaXN0Ontjb252ZXJzYXRpb25JRDp0KHQoe30sTGMpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGtjKGUpfX0pLG5leHRSZXFNZXNzYWdlSUQ6e3R5cGU6XCJTdHJpbmdcIn0sY291bnQ6e3R5cGU6XCJOdW1iZXJcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuISghSmkoZSkmJiEvXlsxLTldWzAtOV0qJC8udGVzdChlKSl8fChjb25zb2xlLndhcm4oQ2Moe2FwaTpcImdldE1lc3NhZ2VMaXN0XCIscGFyYW06XCJjb3VudFwiLGRlc2M6XCLlv4XpobvkuLrmraPmlbTmlbBcIn0pKSwhMSl9fX0sc2V0TWVzc2FnZVJlYWQ6e2NvbnZlcnNhdGlvbklEOnQodCh7fSxMYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4ga2MoZSl9fSl9LGdldENvbnZlcnNhdGlvblByb2ZpbGU6W3QodCh7bmFtZTpcImNvbnZlcnNhdGlvbklEXCJ9LExjKSx7fSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBrYyhlKX19KV0sZGVsZXRlQ29udmVyc2F0aW9uOlt0KHQoe25hbWU6XCJjb252ZXJzYXRpb25JRFwifSxMYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4ga2MoZSl9fSldLHBpbkNvbnZlcnNhdGlvbjp7Y29udmVyc2F0aW9uSUQ6dCh0KHt9LExjKSx7fSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBrYyhlKX19KSxpc1Bpbm5lZDp0KHt9LHt0eXBlOlwiQm9vbGVhblwiLHJlcXVpcmVkOiEwfSl9LGdldEdyb3VwTGlzdDp7Z3JvdXBQcm9maWxlRmlsdGVyOnt0eXBlOlwiQXJyYXlcIn19LGdldEdyb3VwUHJvZmlsZTp7Z3JvdXBJRDpMYyxncm91cEN1c3RvbUZpZWxkRmlsdGVyOnt0eXBlOlwiQXJyYXlcIn0sbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6e3R5cGU6XCJBcnJheVwifX0sZ2V0R3JvdXBQcm9maWxlQWR2YW5jZTp7Z3JvdXBJRExpc3Q6T2N9LGNyZWF0ZUdyb3VwOntuYW1lOkxjfSxqb2luR3JvdXA6e2dyb3VwSUQ6TGMsdHlwZTp7dHlwZTpcIlN0cmluZ1wifSxhcHBseU1lc3NhZ2U6e3R5cGU6XCJTdHJpbmdcIn19LHF1aXRHcm91cDpbdCh7bmFtZTpcImdyb3VwSURcIn0sTGMpXSxoYW5kbGVBcHBsaWNhdGlvbjp7bWVzc2FnZTpSYyxoYW5kbGVBY3Rpb246TGMsaGFuZGxlTWVzc2FnZTp7dHlwZTpcIlN0cmluZ1wifX0sY2hhbmdlR3JvdXBPd25lcjp7Z3JvdXBJRDpMYyxuZXdPd25lcklEOkxjfSx1cGRhdGVHcm91cFByb2ZpbGU6e2dyb3VwSUQ6TGMsbXV0ZUFsbE1lbWJlcnM6e3R5cGU6XCJCb29sZWFuXCJ9fSxkaXNtaXNzR3JvdXA6W3Qoe25hbWU6XCJncm91cElEXCJ9LExjKV0sc2VhcmNoR3JvdXBCeUlEOlt0KHtuYW1lOlwiZ3JvdXBJRFwifSxMYyldLGluaXRHcm91cEF0dHJpYnV0ZXM6e2dyb3VwSUQ6TGMsZ3JvdXBBdHRyaWJ1dGVzOnQodCh7fSxSYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXt2YXIgdD0hMDtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7aWYoIVlpKGVbbl0pKXJldHVybiBjb25zb2xlLndhcm4oQ2Moe2FwaTpcImluaXRHcm91cEF0dHJpYnV0ZXNcIixkZXNjOlwi576k5bGe5oCnIHZhbHVlIOW/hemhu+aYr+Wtl+espuS4slwifSkpLHQ9ITF9KSksdH19KX0sc2V0R3JvdXBBdHRyaWJ1dGVzOntncm91cElEOkxjLGdyb3VwQXR0cmlidXRlczp0KHQoe30sUmMpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7dmFyIHQ9ITA7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG4pe2lmKCFZaShlW25dKSlyZXR1cm4gY29uc29sZS53YXJuKENjKHthcGk6XCJzZXRHcm91cEF0dHJpYnV0ZXNcIixkZXNjOlwi576k5bGe5oCnIHZhbHVlIOW/hemhu+aYr+Wtl+espuS4slwifSkpLHQ9ITF9KSksdH19KX0sZGVsZXRlR3JvdXBBdHRyaWJ1dGVzOntncm91cElEOkxjLGtleUxpc3Q6e3R5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtpZihKaShlKSlyZXR1cm4gY29uc29sZS53YXJuKENjKHthcGk6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIixkZXNjOlwi57y65bCR5b+F5aGr5Y+C5pWw77yaa2V5TGlzdFwifSkpLCExO2lmKCF6aShlKSlyZXR1cm4hMTtpZighT3UoZSkpe3ZhciB0PSEwO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKCFZaShlKSlyZXR1cm4gY29uc29sZS53YXJuKENjKHthcGk6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIixkZXNjOlwi576k5bGe5oCnIGtleSDlv4XpobvmmK/lrZfnrKbkuLJcIn0pKSx0PSExfSkpLHR9cmV0dXJuITB9fX0sZ2V0R3JvdXBBdHRyaWJ1dGVzOntncm91cElEOkxjLGtleUxpc3Q6e3R5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtpZihKaShlKSlyZXR1cm4gY29uc29sZS53YXJuKENjKHthcGk6XCJnZXRHcm91cEF0dHJpYnV0ZXNcIixkZXNjOlwi57y65bCR5b+F5aGr5Y+C5pWw77yaa2V5TGlzdFwifSkpLCExO2lmKCF6aShlKSlyZXR1cm4hMTtpZighT3UoZSkpe3ZhciB0PSEwO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKCFZaShlKSlyZXR1cm4gY29uc29sZS53YXJuKENjKHthcGk6XCJnZXRHcm91cEF0dHJpYnV0ZXNcIixkZXNjOlwi576k5bGe5oCnIGtleSDlv4XpobvmmK/lrZfnrKbkuLJcIn0pKSx0PSExfSkpLHR9cmV0dXJuITB9fX0sZ2V0R3JvdXBNZW1iZXJMaXN0Ontncm91cElEOkxjLG9mZnNldDp7dHlwZTpcIk51bWJlclwifSxjb3VudDp7dHlwZTpcIk51bWJlclwifX0sZ2V0R3JvdXBNZW1iZXJQcm9maWxlOntncm91cElEOkxjLHVzZXJJRExpc3Q6T2MsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6e3R5cGU6XCJBcnJheVwifX0sYWRkR3JvdXBNZW1iZXI6e2dyb3VwSUQ6TGMsdXNlcklETGlzdDpPY30sc2V0R3JvdXBNZW1iZXJSb2xlOntncm91cElEOkxjLHVzZXJJRDpMYyxyb2xlOkxjfSxzZXRHcm91cE1lbWJlck11dGVUaW1lOntncm91cElEOkxjLHVzZXJJRDpMYyxtdXRlVGltZTp7dHlwZTpcIk51bWJlclwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gZT49MH19fSxzZXRHcm91cE1lbWJlck5hbWVDYXJkOntncm91cElEOkxjLHVzZXJJRDp7dHlwZTpcIlN0cmluZ1wifSxuYW1lQ2FyZDp7dHlwZTpcIlN0cmluZ1wiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gWWkoZSk/KGUubGVuZ3RoLCEwKTooY29uc29sZS53YXJuKENjKHthcGk6XCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIscGFyYW06XCJuYW1lQ2FyZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpfX19LHNldE1lc3NhZ2VSZW1pbmRUeXBlOntncm91cElEOkxjLG1lc3NhZ2VSZW1pbmRUeXBlOkxjfSxzZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkOntncm91cElEOkxjLHVzZXJJRDp7dHlwZTpcIlN0cmluZ1wifSxtZW1iZXJDdXN0b21GaWVsZDpPY30sZGVsZXRlR3JvdXBNZW1iZXI6e2dyb3VwSUQ6TGN9LGNyZWF0ZVRleHRNZXNzYWdlOnt0bzpMYyxjb252ZXJzYXRpb25UeXBlOkxjLHBheWxvYWQ6dCh0KHt9LFJjKSx7fSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBXaShlKT9ZaShlLnRleHQpPzAhPT1lLnRleHQubGVuZ3RofHwoY29uc29sZS53YXJuKENjKHthcGk6XCJjcmVhdGVUZXh0TWVzc2FnZVwiLGRlc2M6XCLmtojmga/lhoXlrrnkuI3og73kuLrnqbpcIn0pKSwhMSk6KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlVGV4dE1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQudGV4dFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOihjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZVRleHRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMSl9fSl9LGNyZWF0ZVRleHRBdE1lc3NhZ2U6e3RvOkxjLGNvbnZlcnNhdGlvblR5cGU6TGMscGF5bG9hZDp0KHQoe30sUmMpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIFdpKGUpP1lpKGUudGV4dCk/MD09PWUudGV4dC5sZW5ndGg/KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlVGV4dEF0TWVzc2FnZVwiLGRlc2M6XCLmtojmga/lhoXlrrnkuI3og73kuLrnqbpcIn0pKSwhMSk6IShlLmF0VXNlckxpc3QmJiF6aShlLmF0VXNlckxpc3QpKXx8KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlVGV4dEF0TWVzc2FnZVwiLGRlc2M6XCJwYXlsb2FkLmF0VXNlckxpc3Qg57G75Z6L5b+F6aG75Li65pWw57uEXCJ9KSksITEpOihjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZVRleHRBdE1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQudGV4dFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOihjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZVRleHRBdE1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExKX19KX0sY3JlYXRlQ3VzdG9tTWVzc2FnZTp7dG86TGMsY29udmVyc2F0aW9uVHlwZTpMYyxwYXlsb2FkOnQodCh7fSxSYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gV2koZSk/ZS5kYXRhJiYhWWkoZS5kYXRhKT8oY29uc29sZS53YXJuKENjKHthcGk6XCJjcmVhdGVDdXN0b21NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmRhdGFcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ1wifSkpLCExKTplLmRlc2NyaXB0aW9uJiYhWWkoZS5kZXNjcmlwdGlvbik/KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlQ3VzdG9tTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5kZXNjcmlwdGlvblwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOiEoZS5leHRlbnNpb24mJiFZaShlLmV4dGVuc2lvbikpfHwoY29uc29sZS53YXJuKENjKHthcGk6XCJjcmVhdGVDdXN0b21NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmV4dGVuc2lvblwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOihjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExKX19KX0sY3JlYXRlSW1hZ2VNZXNzYWdlOnt0bzpMYyxjb252ZXJzYXRpb25UeXBlOkxjLHBheWxvYWQ6dCh0KHt9LFJjKSx7fSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe2lmKCFXaShlKSlyZXR1cm4gY29uc29sZS53YXJuKENjKHthcGk6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExO2lmKEppKGUuZmlsZSkpcmV0dXJuIGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5LiN6IO95Li6IHVuZGVmaW5lZFwifSkpLCExO2lmKHNpKXtpZighKGUuZmlsZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fEhpKGUuZmlsZSkpKXJldHVybiBXaShlLmZpbGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pPzAhPT1lLmZpbGUudGVtcEZpbGVQYXRocy5sZW5ndGgmJjAhPT1lLmZpbGUudGVtcEZpbGVzLmxlbmd0aHx8KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5oKo5rKh5pyJ6YCJ5oup5paH5Lu277yM5peg5rOV5Y+R6YCBXCJ9KSksITEpOihjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuexu+Wei+W/hemhu+aYryBIVE1MSW5wdXRFbGVtZW50IOaIliBGaWxlXCJ9KSksITEpO2lmKGUuZmlsZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJjA9PT1lLmZpbGUuZmlsZXMubGVuZ3RoKXJldHVybiBjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuaCqOayoeaciemAieaLqeaWh+S7tu+8jOaXoOazleWPkemAgVwifSkpLCExfXJldHVybiEwfSxvblByb2dyZXNzOnt0eXBlOlwiRnVuY3Rpb25cIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpJiZjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLGRlc2M6XCLmsqHmnIkgb25Qcm9ncmVzcyDlm57osIPvvIzmgqjlsIbml6Dms5Xojrflj5bkuIrkvKDov5vluqZcIn0pKSwhMH19fSl9LGNyZWF0ZUF1ZGlvTWVzc2FnZTp7dG86TGMsY29udmVyc2F0aW9uVHlwZTpMYyxwYXlsb2FkOnQodCh7fSxSYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hIVdpKGUpfHwoY29uc29sZS53YXJuKENjKHthcGk6XCJjcmVhdGVBdWRpb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExKX19KSxvblByb2dyZXNzOnt0eXBlOlwiRnVuY3Rpb25cIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpJiZjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZUF1ZGlvTWVzc2FnZVwiLGRlc2M6XCLmsqHmnIkgb25Qcm9ncmVzcyDlm57osIPvvIzmgqjlsIbml6Dms5Xojrflj5bkuIrkvKDov5vluqZcIn0pKSwhMH19fSxjcmVhdGVWaWRlb01lc3NhZ2U6e3RvOkxjLGNvbnZlcnNhdGlvblR5cGU6TGMscGF5bG9hZDp0KHQoe30sUmMpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7aWYoIVdpKGUpKXJldHVybiBjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITE7aWYoSmkoZS5maWxlKSlyZXR1cm4gY29uc29sZS53YXJuKENjKHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLkuI3og73kuLogdW5kZWZpbmVkXCJ9KSksITE7aWYoc2kpe2lmKCEoZS5maWxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudHx8SGkoZS5maWxlKSkpcmV0dXJuIFdpKGUuZmlsZSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmk/ISFIaShlLmZpbGUudGVtcEZpbGUpfHwoY29uc29sZS53YXJuKENjKHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLmgqjmsqHmnInpgInmi6nmlofku7bvvIzml6Dms5Xlj5HpgIFcIn0pKSwhMSk6KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi57G75Z6L5b+F6aG75pivIEhUTUxJbnB1dEVsZW1lbnQg5oiWIEZpbGVcIn0pKSwhMSk7aWYoZS5maWxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmMD09PWUuZmlsZS5maWxlcy5sZW5ndGgpcmV0dXJuIGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5oKo5rKh5pyJ6YCJ5oup5paH5Lu277yM5peg5rOV5Y+R6YCBXCJ9KSksITF9cmV0dXJuITB9fSksb25Qcm9ncmVzczp7dHlwZTpcIkZ1bmN0aW9uXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBKaShlKSYmY29uc29sZS53YXJuKENjKHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixkZXNjOlwi5rKh5pyJIG9uUHJvZ3Jlc3Mg5Zue6LCD77yM5oKo5bCG5peg5rOV6I635Y+W5LiK5Lyg6L+b5bqmXCJ9KSksITB9fX0sY3JlYXRlRmFjZU1lc3NhZ2U6e3RvOkxjLGNvbnZlcnNhdGlvblR5cGU6TGMscGF5bG9hZDp0KHQoe30sUmMpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIFdpKGUpP2ppKGUuaW5kZXgpPyEhWWkoZS5kYXRhKXx8KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlRmFjZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZGF0YVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOihjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmluZGV4XCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBOdW1iZXJcIn0pKSwhMSk6KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlRmFjZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExKX19KX0sY3JlYXRlRmlsZU1lc3NhZ2U6e3RvOkxjLGNvbnZlcnNhdGlvblR5cGU6TGMscGF5bG9hZDp0KHQoe30sUmMpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7aWYoIVdpKGUpKXJldHVybiBjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMTtpZihKaShlLmZpbGUpKXJldHVybiBjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5LiN6IO95Li6IHVuZGVmaW5lZFwifSkpLCExO2lmKHNpKXtpZighKGUuZmlsZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fEhpKGUuZmlsZSkpKXJldHVybiBXaShlLmZpbGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pPzAhPT1lLmZpbGUudGVtcEZpbGVQYXRocy5sZW5ndGgmJjAhPT1lLmZpbGUudGVtcEZpbGVzLmxlbmd0aHx8KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlRmlsZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLmgqjmsqHmnInpgInmi6nmlofku7bvvIzml6Dms5Xlj5HpgIFcIn0pKSwhMSk6KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlRmlsZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLnsbvlnovlv4XpobvmmK8gSFRNTElucHV0RWxlbWVudCDmiJYgRmlsZVwifSkpLCExKTtpZihlLmZpbGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiYwPT09ZS5maWxlLmZpbGVzLmxlbmd0aClyZXR1cm4gY29uc29sZS53YXJuKENjKHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLGRlc2M6XCLmgqjmsqHmnInpgInmi6nmlofku7bvvIzml6Dms5Xlj5HpgIFcIn0pKSwhMX1yZXR1cm4hMH19KSxvblByb2dyZXNzOnt0eXBlOlwiRnVuY3Rpb25cIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpJiZjb25zb2xlLndhcm4oQ2Moe2FwaTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIsZGVzYzpcIuayoeaciSBvblByb2dyZXNzIOWbnuiwg++8jOaCqOWwhuaXoOazleiOt+WPluS4iuS8oOi/m+W6plwifSkpLCEwfX19LGNyZWF0ZU1lcmdlck1lc3NhZ2U6e3RvOkxjLGNvbnZlcnNhdGlvblR5cGU6TGMscGF5bG9hZDp0KHQoe30sUmMpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7aWYoT3UoZS5tZXNzYWdlTGlzdCkpcmV0dXJuIGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlTWVyZ2VyTWVzc2FnZVwiLGRlc2M6XCLkuI3og73kuLrnqbrmlbDnu4RcIn0pKSwhMTtpZihPdShlLmNvbXBhdGlibGVUZXh0KSlyZXR1cm4gY29uc29sZS53YXJuKENjKHthcGk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmfvvIzkuJTkuI3og73kuLrnqbpcIn0pKSwhMTt2YXIgdD0hMTtyZXR1cm4gZS5tZXNzYWdlTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnN0YXR1cz09PUVjLkZBSUwmJih0PSEwKX0pKSwhdHx8KGNvbnNvbGUud2FybihDYyh7YXBpOlwiY3JlYXRlTWVyZ2VyTWVzc2FnZVwiLGRlc2M6XCLkuI3mlK/mjIHlkIjlubblt7Llj5HpgIHlpLHotKXnmoTmtojmga9cIn0pKSwhMSl9fSl9LHJldm9rZU1lc3NhZ2U6W3QodCh7bmFtZTpcIm1lc3NhZ2VcIn0sUmMpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIE91KGUpPyhjb25zb2xlLndhcm4oXCJyZXZva2VNZXNzYWdlIOivt+S8oOWFpea2iOaBr++8iE1lc3NhZ2XvvInlrp7kvotcIiksITEpOmUuY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfU1lTVEVNPyhjb25zb2xlLndhcm4oXCJyZXZva2VNZXNzYWdlIOS4jeiDveaSpOWbnuezu+e7n+S8muivnea2iOaBr++8jOWPquiDveaSpOWbnuWNleiBiua2iOaBr+aIlue+pOa2iOaBr1wiKSwhMSk6ITAhPT1lLmlzUmV2b2tlZHx8KGNvbnNvbGUud2FybihcInJldm9rZU1lc3NhZ2Ug5raI5oGv5bey57uP6KKr5pKk5Zue77yM6K+35Yu/6YeN5aSN5pON5L2cXCIpLCExKX19KV0sZGVsZXRlTWVzc2FnZTpbdCh0KHtuYW1lOlwibWVzc2FnZUxpc3RcIn0sT2MpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIU91KGUpfHwoY29uc29sZS53YXJuKENjKHthcGk6XCJkZWxldGVNZXNzYWdlXCIscGFyYW06XCJtZXNzYWdlTGlzdFwiLGRlc2M6XCLkuI3og73kuLrnqbrmlbDnu4RcIn0pKSwhMSl9fSldLGdldFVzZXJQcm9maWxlOnt1c2VySURMaXN0Ont0eXBlOlwiQXJyYXlcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIHppKGUpPygwPT09ZS5sZW5ndGgmJmNvbnNvbGUud2FybihDYyh7YXBpOlwiZ2V0VXNlclByb2ZpbGVcIixwYXJhbTpcInVzZXJJRExpc3RcIixkZXNjOlwi5LiN6IO95Li656m65pWw57uEXCJ9KSksITApOihjb25zb2xlLndhcm4oQ2Moe2FwaTpcImdldFVzZXJQcm9maWxlXCIscGFyYW06XCJ1c2VySURMaXN0XCIsZGVzYzpcIuW/hemhu+S4uuaVsOe7hFwifSkpLCExKX19fSx1cGRhdGVNeVByb2ZpbGU6e3Byb2ZpbGVDdXN0b21GaWVsZDp7dHlwZTpcIkFycmF5XCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiEhSmkoZSl8fCghIXppKGUpfHwoY29uc29sZS53YXJuKENjKHthcGk6XCJ1cGRhdGVNeVByb2ZpbGVcIixwYXJhbTpcInByb2ZpbGVDdXN0b21GaWVsZFwiLGRlc2M6XCLlv4XpobvkuLrmlbDnu4RcIn0pKSwhMSkpfX19LGFkZEZyaWVuZDp7dG86TGMsc291cmNlOnt0eXBlOlwiU3RyaW5nXCIscmVxdWlyZWQ6ITAsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiEhZSYmKGUuc3RhcnRzV2l0aChcIkFkZFNvdXJjZV9UeXBlX1wiKT8hKGUucmVwbGFjZShcIkFkZFNvdXJjZV9UeXBlX1wiLFwiXCIpLmxlbmd0aD44KXx8KGNvbnNvbGUud2FybihDYyh7YXBpOlwiYWRkRnJpZW5kXCIsZGVzYzpcIuWKoOWlveWPi+adpea6kOWtl+auteeahOWFs+mUruWtl+mVv+W6puS4jeW+l+i2hei/hzjlrZfoioJcIn0pKSwhMSk6KGNvbnNvbGUud2FybihDYyh7YXBpOlwiYWRkRnJpZW5kXCIsZGVzYzpcIuWKoOWlveWPi+adpea6kOWtl+auteeahOWJjee8gOW/hemhu+aYr++8mkFkZFNvdXJjZV9UeXBlX1wifSkpLCExKSl9fSxyZW1hcms6e3R5cGU6XCJTdHJpbmdcIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIShZaShlKSYmZS5sZW5ndGg+OTYpfHwoY29uc29sZS53YXJuKENjKHthcGk6XCJ1cGRhdGVGcmllbmRcIixkZXNjOlwiIOWkh+azqOmVv+W6puacgOmVv+S4jeW+l+i2hei/hyA5NiDkuKrlrZfoioJcIn0pKSwhMSl9fX0sZGVsZXRlRnJpZW5kOnt1c2VySURMaXN0Ok9jfSxjaGVja0ZyaWVuZDp7dXNlcklETGlzdDpPY30sZ2V0RnJpZW5kUHJvZmlsZTp7dXNlcklETGlzdDpPY30sdXBkYXRlRnJpZW5kOnt1c2VySUQ6TGMscmVtYXJrOnt0eXBlOlwiU3RyaW5nXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiEoWWkoZSkmJmUubGVuZ3RoPjk2KXx8KGNvbnNvbGUud2FybihDYyh7YXBpOlwidXBkYXRlRnJpZW5kXCIsZGVzYzpcIiDlpIfms6jplb/luqbmnIDplb/kuI3lvpfotoXov4cgOTYg5Liq5a2X6IqCXCJ9KSksITEpfX0sZnJpZW5kQ3VzdG9tRmllbGQ6e3R5cGU6XCJBcnJheVwiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtpZihlKXtpZighemkoZSkpcmV0dXJuIGNvbnNvbGUud2FybihDYyh7YXBpOlwidXBkYXRlRnJpZW5kXCIscGFyYW06XCJmcmllbmRDdXN0b21GaWVsZFwiLGRlc2M6XCLlv4XpobvkuLrmlbDnu4RcIn0pKSwhMTt2YXIgdD0hMDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gWWkoZS5rZXkpJiYtMSE9PWUua2V5LmluZGV4T2YoXCJUYWdfU05TX0N1c3RvbVwiKT9ZaShlLnZhbHVlKT9lLnZhbHVlLmxlbmd0aD44Pyhjb25zb2xlLndhcm4oQ2Moe2FwaTpcInVwZGF0ZUZyaWVuZFwiLGRlc2M6XCLlpb3lj4voh6rlrprkuYnlrZfmrrXnmoTlhbPplK7lrZfplb/luqbkuI3lvpfotoXov4c45a2X6IqCXCJ9KSksdD0hMSk6dm9pZCAwOihjb25zb2xlLndhcm4oQ2Moe2FwaTpcInVwZGF0ZUZyaWVuZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksdD0hMSk6KGNvbnNvbGUud2FybihDYyh7YXBpOlwidXBkYXRlRnJpZW5kXCIsZGVzYzpcIuWlveWPi+iHquWumuS5ieWtl+auteeahOWJjee8gOW/hemhu+aYryBUYWdfU05TX0N1c3RvbVwifSkpLHQ9ITEpfSkpLHR9cmV0dXJuITB9fX0sYWNjZXB0RnJpZW5kQXBwbGljYXRpb246e3VzZXJJRDpMY30scmVmdXNlRnJpZW5kQXBwbGljYXRpb246e3VzZXJJRDpMY30sZGVsZXRlRnJpZW5kQXBwbGljYXRpb246e3VzZXJJRDpMY30sY3JlYXRlRnJpZW5kR3JvdXA6e25hbWU6TGN9LGRlbGV0ZUZyaWVuZEdyb3VwOntuYW1lOkxjfSxhZGRUb0ZyaWVuZEdyb3VwOntuYW1lOkxjLHVzZXJJRExpc3Q6T2N9LHJlbW92ZUZyb21GcmllbmRHcm91cDp7bmFtZTpMYyx1c2VySURMaXN0Ok9jfSxyZW5hbWVGcmllbmRHcm91cDp7b2xkTmFtZTpMYyxuZXdOYW1lOkxjfX0sd2M9e2xvZ2luOlwibG9naW5cIixsb2dvdXQ6XCJsb2dvdXRcIixvbjpcIm9uXCIsb25jZTpcIm9uY2VcIixvZmY6XCJvZmZcIixzZXRMb2dMZXZlbDpcInNldExvZ0xldmVsXCIscmVnaXN0ZXJQbHVnaW46XCJyZWdpc3RlclBsdWdpblwiLGRlc3Ryb3k6XCJkZXN0cm95XCIsY3JlYXRlVGV4dE1lc3NhZ2U6XCJjcmVhdGVUZXh0TWVzc2FnZVwiLGNyZWF0ZVRleHRBdE1lc3NhZ2U6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIsY3JlYXRlSW1hZ2VNZXNzYWdlOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIsY3JlYXRlQXVkaW9NZXNzYWdlOlwiY3JlYXRlQXVkaW9NZXNzYWdlXCIsY3JlYXRlVmlkZW9NZXNzYWdlOlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIsY3JlYXRlQ3VzdG9tTWVzc2FnZTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixjcmVhdGVGYWNlTWVzc2FnZTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIsY3JlYXRlRmlsZU1lc3NhZ2U6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLGNyZWF0ZU1lcmdlck1lc3NhZ2U6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsZG93bmxvYWRNZXJnZXJNZXNzYWdlOlwiZG93bmxvYWRNZXJnZXJNZXNzYWdlXCIsY3JlYXRlRm9yd2FyZE1lc3NhZ2U6XCJjcmVhdGVGb3J3YXJkTWVzc2FnZVwiLHNlbmRNZXNzYWdlOlwic2VuZE1lc3NhZ2VcIixyZXNlbmRNZXNzYWdlOlwicmVzZW5kTWVzc2FnZVwiLHJldm9rZU1lc3NhZ2U6XCJyZXZva2VNZXNzYWdlXCIsZGVsZXRlTWVzc2FnZTpcImRlbGV0ZU1lc3NhZ2VcIixnZXRNZXNzYWdlTGlzdDpcImdldE1lc3NhZ2VMaXN0XCIsc2V0TWVzc2FnZVJlYWQ6XCJzZXRNZXNzYWdlUmVhZFwiLGdldENvbnZlcnNhdGlvbkxpc3Q6XCJnZXRDb252ZXJzYXRpb25MaXN0XCIsZ2V0Q29udmVyc2F0aW9uUHJvZmlsZTpcImdldENvbnZlcnNhdGlvblByb2ZpbGVcIixkZWxldGVDb252ZXJzYXRpb246XCJkZWxldGVDb252ZXJzYXRpb25cIixwaW5Db252ZXJzYXRpb246XCJwaW5Db252ZXJzYXRpb25cIixnZXRHcm91cExpc3Q6XCJnZXRHcm91cExpc3RcIixnZXRHcm91cFByb2ZpbGU6XCJnZXRHcm91cFByb2ZpbGVcIixjcmVhdGVHcm91cDpcImNyZWF0ZUdyb3VwXCIsam9pbkdyb3VwOlwiam9pbkdyb3VwXCIsdXBkYXRlR3JvdXBQcm9maWxlOlwidXBkYXRlR3JvdXBQcm9maWxlXCIscXVpdEdyb3VwOlwicXVpdEdyb3VwXCIsZGlzbWlzc0dyb3VwOlwiZGlzbWlzc0dyb3VwXCIsY2hhbmdlR3JvdXBPd25lcjpcImNoYW5nZUdyb3VwT3duZXJcIixzZWFyY2hHcm91cEJ5SUQ6XCJzZWFyY2hHcm91cEJ5SURcIixzZXRNZXNzYWdlUmVtaW5kVHlwZTpcInNldE1lc3NhZ2VSZW1pbmRUeXBlXCIsaGFuZGxlR3JvdXBBcHBsaWNhdGlvbjpcImhhbmRsZUdyb3VwQXBwbGljYXRpb25cIixpbml0R3JvdXBBdHRyaWJ1dGVzOlwiaW5pdEdyb3VwQXR0cmlidXRlc1wiLHNldEdyb3VwQXR0cmlidXRlczpcInNldEdyb3VwQXR0cmlidXRlc1wiLGRlbGV0ZUdyb3VwQXR0cmlidXRlczpcImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wiLGdldEdyb3VwQXR0cmlidXRlczpcImdldEdyb3VwQXR0cmlidXRlc1wiLGdldEdyb3VwTWVtYmVyUHJvZmlsZTpcImdldEdyb3VwTWVtYmVyUHJvZmlsZVwiLGdldEdyb3VwTWVtYmVyTGlzdDpcImdldEdyb3VwTWVtYmVyTGlzdFwiLGFkZEdyb3VwTWVtYmVyOlwiYWRkR3JvdXBNZW1iZXJcIixkZWxldGVHcm91cE1lbWJlcjpcImRlbGV0ZUdyb3VwTWVtYmVyXCIsc2V0R3JvdXBNZW1iZXJOYW1lQ2FyZDpcInNldEdyb3VwTWVtYmVyTmFtZUNhcmRcIixzZXRHcm91cE1lbWJlck11dGVUaW1lOlwic2V0R3JvdXBNZW1iZXJNdXRlVGltZVwiLHNldEdyb3VwTWVtYmVyUm9sZTpcInNldEdyb3VwTWVtYmVyUm9sZVwiLHNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGQ6XCJzZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkXCIsZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudDpcImdldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIixnZXRNeVByb2ZpbGU6XCJnZXRNeVByb2ZpbGVcIixnZXRVc2VyUHJvZmlsZTpcImdldFVzZXJQcm9maWxlXCIsdXBkYXRlTXlQcm9maWxlOlwidXBkYXRlTXlQcm9maWxlXCIsZ2V0QmxhY2tsaXN0OlwiZ2V0QmxhY2tsaXN0XCIsYWRkVG9CbGFja2xpc3Q6XCJhZGRUb0JsYWNrbGlzdFwiLHJlbW92ZUZyb21CbGFja2xpc3Q6XCJyZW1vdmVGcm9tQmxhY2tsaXN0XCIsZ2V0RnJpZW5kTGlzdDpcImdldEZyaWVuZExpc3RcIixhZGRGcmllbmQ6XCJhZGRGcmllbmRcIixkZWxldGVGcmllbmQ6XCJkZWxldGVGcmllbmRcIixjaGVja0ZyaWVuZDpcImNoZWNrRnJpZW5kXCIsdXBkYXRlRnJpZW5kOlwidXBkYXRlRnJpZW5kXCIsZ2V0RnJpZW5kUHJvZmlsZTpcImdldEZyaWVuZFByb2ZpbGVcIixnZXRGcmllbmRBcHBsaWNhdGlvbkxpc3Q6XCJnZXRGcmllbmRBcHBsaWNhdGlvbkxpc3RcIixyZWZ1c2VGcmllbmRBcHBsaWNhdGlvbjpcInJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uXCIsZGVsZXRlRnJpZW5kQXBwbGljYXRpb246XCJkZWxldGVGcmllbmRBcHBsaWNhdGlvblwiLGFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uOlwiYWNjZXB0RnJpZW5kQXBwbGljYXRpb25cIixzZXRGcmllbmRBcHBsaWNhdGlvblJlYWQ6XCJzZXRGcmllbmRBcHBsaWNhdGlvblJlYWRcIixnZXRGcmllbmRHcm91cExpc3Q6XCJnZXRGcmllbmRHcm91cExpc3RcIixjcmVhdGVGcmllbmRHcm91cDpcImNyZWF0ZUZyaWVuZEdyb3VwXCIscmVuYW1lRnJpZW5kR3JvdXA6XCJyZW5hbWVGcmllbmRHcm91cFwiLGRlbGV0ZUZyaWVuZEdyb3VwOlwiZGVsZXRlRnJpZW5kR3JvdXBcIixhZGRUb0ZyaWVuZEdyb3VwOlwiYWRkVG9GcmllbmRHcm91cFwiLHJlbW92ZUZyb21GcmllbmRHcm91cDpcInJlbW92ZUZyb21GcmllbmRHcm91cFwiLGNhbGxFeHBlcmltZW50YWxBUEk6XCJjYWxsRXhwZXJpbWVudGFsQVBJXCJ9LEdjPSEhaGEmJk8oKGZ1bmN0aW9uKCl7aGEucHJvdG90eXBlLmZpbmFsbHkuY2FsbCh7dGhlbjpmdW5jdGlvbigpe319LChmdW5jdGlvbigpe30pKX0pKTtpZih2dCh7dGFyZ2V0OlwiUHJvbWlzZVwiLHByb3RvOiEwLHJlYWw6ITAsZm9yY2VkOkdjfSx7ZmluYWxseTpmdW5jdGlvbihlKXt2YXIgdD1UYSh0aGlzLGooXCJQcm9taXNlXCIpKSxuPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU7cmV0dXJuIHRoaXMudGhlbihuP2Z1bmN0aW9uKG4pe3JldHVybiB1cyh0LGUoKSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gbn0pKX06ZSxuP2Z1bmN0aW9uKG4pe3JldHVybiB1cyh0LGUoKSkudGhlbigoZnVuY3Rpb24oKXt0aHJvdyBufSkpfTplKX19KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBoYSl7dmFyIFBjPWooXCJQcm9taXNlXCIpLnByb3RvdHlwZS5maW5hbGx5O2hhLnByb3RvdHlwZS5maW5hbGx5IT09UGMmJkhlKGhhLnByb3RvdHlwZSxcImZpbmFsbHlcIixQYyx7dW5zYWZlOiEwfSl9dmFyIFVjPVtdLnNsaWNlLEZjPS9NU0lFIC5cXC4vLnRlc3QoWSkscWM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIG89YXJndW1lbnRzLmxlbmd0aD4yLHI9bz9VYy5jYWxsKGFyZ3VtZW50cywyKTp2b2lkIDA7cmV0dXJuIGUobz9mdW5jdGlvbigpeyhcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6RnVuY3Rpb24odCkpLmFwcGx5KHRoaXMscil9OnQsbil9fTt2dCh7Z2xvYmFsOiEwLGJpbmQ6ITAsZm9yY2VkOkZjfSx7c2V0VGltZW91dDpxYyhMLnNldFRpbWVvdXQpLHNldEludGVydmFsOnFjKEwuc2V0SW50ZXJ2YWwpfSk7dmFyIHhjPSR0LmZpbHRlcixWYz1RbihcImZpbHRlclwiKTt2dCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6IVZjfSx7ZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB4Yyh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pO3ZhciBLYyxCYz1cInNpZ25cIixIYz1cIm1lc3NhZ2VcIixqYz1cInVzZXJcIixZYz1cImMyY1wiLCRjPVwiZ3JvdXBcIixXYz1cInNuc1wiLHpjPVwiZ3JvdXBNZW1iZXJcIixKYz1cImNvbnZlcnNhdGlvblwiLFhjPVwiY29udGV4dFwiLFFjPVwic3RvcmFnZVwiLFpjPVwiZXZlbnRTdGF0XCIsZWw9XCJuZXRNb25pdG9yXCIsdGw9XCJiaWdEYXRhQ2hhbm5lbFwiLG5sPVwidXBsb2FkXCIsb2w9XCJwbHVnaW5cIixybD1cInN5bmNVbnJlYWRNZXNzYWdlXCIsYWw9XCJzZXNzaW9uXCIsc2w9XCJjaGFubmVsXCIsaWw9XCJtZXNzYWdlX2xvc3NfZGV0ZWN0aW9uXCIsdWw9XCJjbG91ZENvbnRyb2xcIixjbD1cInB1bGxHcm91cE1lc3NhZ2VcIixsbD1cInF1YWxpdHlTdGF0XCIsZGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl9tb2R1bGVNYW5hZ2VyPXQsdGhpcy5fY2xhc3NOYW1lPVwiXCJ9cmV0dXJuIGEoZSxbe2tleTpcImlzTG9nZ2VkSW5cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShYYykuaXNMb2dnZWRJbigpfX0se2tleTpcImlzT3ZlcnNlYVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFhjKS5pc092ZXJzZWEoKX19LHtrZXk6XCJnZXRNeVVzZXJJRFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFhjKS5nZXRVc2VySUQoKX19LHtrZXk6XCJnZXRNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoZSl9fSx7a2V5OlwiZ2V0UGxhdGZvcm1cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB1aX19LHtrZXk6XCJnZXROZXR3b3JrVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGVsKS5nZXROZXR3b3JrVHlwZSgpfX0se2tleTpcInByb2JlTmV0d29ya1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGVsKS5wcm9iZSgpfX0se2tleTpcImdldENsb3VkQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHVsKS5nZXRDbG91ZENvbmZpZyhlKX19LHtrZXk6XCJlbWl0T3V0ZXJFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRPdXRlckVtaXR0ZXJJbnN0YW5jZSgpLmVtaXQoZSx0KX19LHtrZXk6XCJlbWl0SW5uZXJFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLmVtaXQoZSx0KX19LHtrZXk6XCJnZXRJbm5lckVtaXR0ZXJJbnN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKX19LHtrZXk6XCJnZW5lcmF0ZVRqZ0lEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFhjKS5nZXRUaW55SUQoKStcIi1cIitlLnJhbmRvbX19LHtrZXk6XCJmaWx0ZXJNb2RpZmllZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZighT3UoZSkpe3ZhciB0PWUuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hMD09PWUuaXNNb2RpZmllZH0pKTt0Lmxlbmd0aD4wJiZ0aGlzLmVtaXRPdXRlckV2ZW50KG9vLk1FU1NBR0VfTU9ESUZJRUQsdCl9fX0se2tleTpcImZpbHRlclVubW9kaWZpZWRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIE91KGUpP1tdOmUuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hMT09PWUuaXNNb2RpZmllZH0pKX19LHtrZXk6XCJyZXF1ZXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGFsKS5yZXF1ZXN0KGUpfX1dKSxlfSgpLHBsPVwid3Nsb2dpblwiLGdsPVwid3Nsb2dvdXRcIixobD1cIndzaGVsbG9cIixmbD1cImdldG1zZ1wiLF9sPVwiYXV0aGtleVwiLG1sPVwic2VuZG1zZ1wiLHZsPVwic2VuZF9ncm91cF9tc2dcIixNbD1cInBvcnRyYWl0X2dldF9hbGxcIix5bD1cInBvcnRyYWl0X3NldFwiLElsPVwiYmxhY2tfbGlzdF9nZXRcIixUbD1cImJsYWNrX2xpc3RfYWRkXCIsRGw9XCJibGFja19saXN0X2RlbGV0ZVwiLFNsPVwiZnJpZW5kX2dldFwiLEVsPVwiZnJpZW5kX2dldF9saXN0XCIsQWw9XCJmcmllbmRfY2hlY2tcIixrbD1cImZyaWVuZF9kZWxldGVcIixObD1cImZyaWVuZF9hZGRcIixDbD1cImZyaWVuZF91cGRhdGVcIixMbD1cImZyaWVuZF9yZXNwb25zZVwiLE9sPVwicGVuZGVuY3lfZ2V0XCIsUmw9XCJwZW5kZW5jeV9kZWxldGVcIixibD1cInBlbmRlbmN5X3JlcG9ydFwiLHdsPVwiZ3JvdXBfZ2V0XCIsR2w9XCJncm91cF9hZGRcIixQbD1cImdyb3VwX2RlbGV0ZVwiLFVsPVwiZ3JvdXBfdXBkYXRlXCIsRmw9XCJtc2d3aXRoZHJhd1wiLHFsPVwibXNncmVhZGVkXCIseGw9XCJnZXRyb2FtbXNnXCIsVmw9XCJnZXRfcGVlcl9yZWFkX3RpbWVcIixLbD1cImRlbGV0ZV9jMmNfbXNnX3JhbWJsZVwiLEJsPVwicGFnZV9nZXRcIixIbD1cImdldFwiLGpsPVwiZGVsZXRlXCIsWWw9XCJ0b3BcIiwkbD1cImRlbGV0ZW1zZ1wiLFdsPVwiZ2V0X2pvaW5lZF9ncm91cF9saXN0XCIsemw9XCJnZXRfZ3JvdXBfaW5mb1wiLEpsPVwiY3JlYXRlX2dyb3VwXCIsWGw9XCJkZXN0cm95X2dyb3VwXCIsUWw9XCJtb2RpZnlfZ3JvdXBfYmFzZV9pbmZvXCIsWmw9XCJhcHBseV9qb2luX2dyb3VwXCIsZWQ9XCJhcHBseV9qb2luX2dyb3VwX25vYXV0aFwiLHRkPVwicXVpdF9ncm91cFwiLG5kPVwiZ2V0X2dyb3VwX3B1YmxpY19pbmZvXCIsb2Q9XCJjaGFuZ2VfZ3JvdXBfb3duZXJcIixyZD1cImhhbmRsZV9hcHBseV9qb2luX2dyb3VwXCIsYWQ9XCJoYW5kbGVfaW52aXRlX2pvaW5fZ3JvdXBcIixzZD1cImdyb3VwX21zZ19yZWNhbGxcIixpZD1cIm1zZ19yZWFkX3JlcG9ydFwiLHVkPVwiZ3JvdXBfbXNnX2dldFwiLGNkPVwiZ2V0X3BlbmRlbmN5XCIsbGQ9XCJkZWxldGVtc2dcIixkZD1cImdldF9tc2dcIixwZD1cImdldF9tc2dfbm9hdXRoXCIsZ2Q9XCJnZXRfb25saW5lX21lbWJlcl9udW1cIixoZD1cImRlbGV0ZV9ncm91cF9yYW1ibGVfbXNnX2J5X3NlcVwiLGZkPVwic2V0X2dyb3VwX2F0dHJcIixfZD1cIm1vZGlmeV9ncm91cF9hdHRyXCIsbWQ9XCJkZWxldGVfZ3JvdXBfYXR0clwiLHZkPVwiY2xlYXJfZ3JvdXBfYXR0clwiLE1kPVwiZ2V0X2dyb3VwX2F0dHJcIix5ZD1cImdldF9ncm91cF9tZW1iZXJfaW5mb1wiLElkPVwiZ2V0X3NwZWNpZmllZF9ncm91cF9tZW1iZXJfaW5mb1wiLFRkPVwiYWRkX2dyb3VwX21lbWJlclwiLERkPVwiZGVsZXRlX2dyb3VwX21lbWJlclwiLFNkPVwibW9kaWZ5X2dyb3VwX21lbWJlcl9pbmZvXCIsRWQ9XCJjb3NcIixBZD1cInByZV9zaWdcIixrZD1cInRpbV93ZWJfcmVwb3J0X3YyXCIsTmQ9XCJhbGl2ZVwiLENkPVwibXNnX3B1c2hcIixMZD1cIndzX21zZ19wdXNoX2Fja1wiLE9kPVwic3RhdF9mb3JjZW9mZmxpbmVcIixSZD1cInNhdmVfcmVsYXlfanNvbl9tc2dcIixiZD1cImdldF9yZWxheV9qc29uX21zZ1wiLHdkPVwiZmV0Y2hfY29uZmlnXCIsR2Q9XCJwdXNoX2NvbmZpZ3YyXCIsUGQ9e05PX1NES0FQUElEOjJlMyxOT19BQ0NPVU5UX1RZUEU6MjAwMSxOT19JREVOVElGSUVSOjIwMDIsTk9fVVNFUlNJRzoyMDAzLE5PX1RJTllJRDoyMDIyLE5PX0EyS0VZOjIwMjMsVVNFUl9OT1RfTE9HR0VEX0lOOjIwMjQsUkVQRUFUX0xPR0lOOjIwMjUsQ09TX1VOREVURUNURUQ6MjA0MCxDT1NfR0VUX1NJR19GQUlMOjIwNDEsTUVTU0FHRV9TRU5EX0ZBSUw6MjEwMCxNRVNTQUdFX0xJU1RfQ09OU1RSVUNUT1JfTkVFRF9PUFRJT05TOjIxMDMsTUVTU0FHRV9TRU5EX05FRURfTUVTU0FHRV9JTlNUQU5DRToyMTA1LE1FU1NBR0VfU0VORF9JTlZBTElEX0NPTlZFUlNBVElPTl9UWVBFOjIxMDYsTUVTU0FHRV9GSUxFX0lTX0VNUFRZOjIxMDgsTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SOjIxMDksTUVTU0FHRV9SRVZPS0VfRkFJTDoyMTEwLE1FU1NBR0VfREVMRVRFX0ZBSUw6MjExMSxNRVNTQUdFX0lNQUdFX1NFTEVDVF9GSUxFX0ZJUlNUOjIyNTEsTUVTU0FHRV9JTUFHRV9UWVBFU19MSU1JVDoyMjUyLE1FU1NBR0VfSU1BR0VfU0laRV9MSU1JVDoyMjUzLE1FU1NBR0VfQVVESU9fVVBMT0FEX0ZBSUw6MjMwMCxNRVNTQUdFX0FVRElPX1NJWkVfTElNSVQ6MjMwMSxNRVNTQUdFX1ZJREVPX1VQTE9BRF9GQUlMOjIzNTAsTUVTU0FHRV9WSURFT19TSVpFX0xJTUlUOjIzNTEsTUVTU0FHRV9WSURFT19UWVBFU19MSU1JVDoyMzUyLE1FU1NBR0VfRklMRV9VUExPQURfRkFJTDoyNDAwLE1FU1NBR0VfRklMRV9TRUxFQ1RfRklMRV9GSVJTVDoyNDAxLE1FU1NBR0VfRklMRV9TSVpFX0xJTUlUOjI0MDIsTUVTU0FHRV9GSUxFX1VSTF9JU19FTVBUWToyNDAzLE1FU1NBR0VfTUVSR0VSX1RZUEVfSU5WQUxJRDoyNDUwLE1FU1NBR0VfTUVSR0VSX0tFWV9JTlZBTElEOjI0NTEsTUVTU0FHRV9NRVJHRVJfRE9XTkxPQURfRkFJTDoyNDUyLE1FU1NBR0VfRk9SV0FSRF9UWVBFX0lOVkFMSUQ6MjQ1MyxDT05WRVJTQVRJT05fTk9UX0ZPVU5EOjI1MDAsVVNFUl9PUl9HUk9VUF9OT1RfRk9VTkQ6MjUwMSxDT05WRVJTQVRJT05fVU5fUkVDT1JERURfVFlQRToyNTAyLElMTEVHQUxfR1JPVVBfVFlQRToyNjAwLENBTk5PVF9KT0lOX1dPUks6MjYwMSxDQU5OT1RfQ0hBTkdFX09XTkVSX0lOX0FWQ0hBVFJPT006MjYyMCxDQU5OT1RfQ0hBTkdFX09XTkVSX1RPX1NFTEY6MjYyMSxDQU5OT1RfRElTTUlTU19Xb3JrOjI2MjIsTUVNQkVSX05PVF9JTl9HUk9VUDoyNjIzLENBTk5PVF9VU0VfR1JQX0FUVFJfTk9UX0FWQ0hBVFJPT006MjY0MSxDQU5OT1RfVVNFX0dSUF9BVFRSX0FWQ0hBVFJPT01fVU5KT0lOOjI2NDIsSk9JTl9HUk9VUF9GQUlMOjI2NjAsQ0FOTk9UX0FERF9NRU1CRVJfSU5fQVZDSEFUUk9PTToyNjYxLENBTk5PVF9KT0lOX05PTl9BVkNIQVRST09NX1dJVEhPVVRfTE9HSU46MjY2MixDQU5OT1RfS0lDS19NRU1CRVJfSU5fQVZDSEFUUk9PTToyNjgwLE5PVF9PV05FUjoyNjgxLENBTk5PVF9TRVRfTUVNQkVSX1JPTEVfSU5fV09SS19BTkRfQVZDSEFUUk9PTToyNjgyLElOVkFMSURfTUVNQkVSX1JPTEU6MjY4MyxDQU5OT1RfU0VUX1NFTEZfTUVNQkVSX1JPTEU6MjY4NCxDQU5OT1RfTVVURV9TRUxGOjI2ODUsTk9UX01ZX0ZSSUVORDoyNzAwLEFMUkVBRFlfTVlfRlJJRU5EOjI3MDEsRlJJRU5EX0dST1VQX0VYSVNURUQ6MjcxMCxGUklFTkRfR1JPVVBfTk9UX0VYSVNUOjI3MTEsRlJJRU5EX0FQUExJQ0FUSU9OX05PVF9FWElTVDoyNzE2LFVQREFURV9QUk9GSUxFX0lOVkFMSURfUEFSQU06MjcyMSxVUERBVEVfUFJPRklMRV9OT19LRVk6MjcyMixBRERfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU06Mjc0MCxERUxfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU06Mjc0MSxDQU5OT1RfQUREX1NFTEZfVE9fQkxBQ0tMSVNUOjI3NDIsQUREX0ZSSUVORF9JTlZBTElEX1BBUkFNOjI3NjAsTkVUV09SS19FUlJPUjoyODAwLE5FVFdPUktfVElNRU9VVDoyODAxLE5FVFdPUktfQkFTRV9PUFRJT05TX05PX1VSTDoyODAyLE5FVFdPUktfVU5ERUZJTkVEX1NFUlZFUl9OQU1FOjI4MDMsTkVUV09SS19QQUNLQUdFX1VOREVGSU5FRDoyODA0LE5PX05FVFdPUks6MjgwNSxDT05WRVJUT1JfSVJSRUdVTEFSX1BBUkFNUzoyOTAwLE5PVElDRV9SVU5MT09QX1VORVhQRUNURURfQ09ORElUSU9OOjI5MDEsTk9USUNFX1JVTkxPT1BfT0ZGU0VUX0xPU1Q6MjkwMixVTkNBVUdIVF9FUlJPUjoyOTAzLEdFVF9MT05HUE9MTF9JRF9GQUlMRUQ6MjkwNCxJTlZBTElEX09QRVJBVElPTjoyOTA1LENBTk5PVF9GSU5EX1BST1RPQ09MOjI5OTcsQ0FOTk9UX0ZJTkRfTU9EVUxFOjI5OTgsU0RLX0lTX05PVF9SRUFEWToyOTk5LExPTkdfUE9MTF9LSUNLX09VVDo5MTEwMSxNRVNTQUdFX0EyS0VZX0VYUElSRUQ6MjAwMDIsQUNDT1VOVF9BMktFWV9FWFBJUkVEOjcwMDAxLExPTkdfUE9MTF9BUElfUEFSQU1fRVJST1I6OTAwMDEsSEVMTE9fQU5TV0VSX0tJQ0tFRF9PVVQ6MTAwMn0sVWQ9XCLml6AgU0RLQXBwSURcIixGZD1cIuaXoCB1c2VySURcIixxZD1cIuaXoCB1c2VyU2lnXCIseGQ9XCLml6AgdGlueUlEXCIsVmQ9XCLml6AgYTJrZXlcIixLZD1cIueUqOaIt+acqueZu+W9lVwiLEJkPVwi6YeN5aSN55m75b2VXCIsSGQ9XCLmnKrmo4DmtYvliLAgQ09TIOS4iuS8oOaPkuS7tlwiLGpkPVwi6I635Y+WIENPUyDpooTnrb7lkI0gVVJMIOWksei0pVwiLFlkPVwi5raI5oGv5Y+R6YCB5aSx6LSlXCIsJGQ9XCLpnIDopoEgTWVzc2FnZSDnmoTlrp7kvotcIixXZD0nTWVzc2FnZS5jb252ZXJzYXRpb25UeXBlIOWPquiDveS4uiBcIkMyQ1wiIOaIliBcIkdST1VQXCInLHpkPVwi5peg5rOV5Y+R6YCB56m65paH5Lu2XCIsSmQ9XCLlm57osIPlh73mlbDov5DooYzml7bpgYfliLDplJnor6/vvIzor7fmo4Dmn6XmjqXlhaXkvqfku6PnoIFcIixYZD1cIua2iOaBr+aSpOWbnuWksei0pVwiLFFkPVwi5raI5oGv5Yig6Zmk5aSx6LSlXCIsWmQ9XCLor7flhYjpgInmi6nkuIDkuKrlm77niYdcIixlcD1cIuWPquWFgeiuuOS4iuS8oCBqcGcgcG5nIGpwZWcgZ2lmIGJtcOagvOW8j+eahOWbvueJh1wiLHRwPVwi5Zu+54mH5aSn5bCP6LaF6L+HMjBN77yM5peg5rOV5Y+R6YCBXCIsbnA9XCLor63pn7PkuIrkvKDlpLHotKVcIixvcD1cIuivremfs+Wkp+Wwj+Wkp+S6jjIwTe+8jOaXoOazleWPkemAgVwiLHJwPVwi6KeG6aKR5LiK5Lyg5aSx6LSlXCIsYXA9XCLop4bpopHlpKflsI/otoXov4cxMDBN77yM5peg5rOV5Y+R6YCBXCIsc3A9XCLlj6rlhYHorrjkuIrkvKAgbXA0IOagvOW8j+eahOinhumikVwiLGlwPVwi5paH5Lu25LiK5Lyg5aSx6LSlXCIsdXA9XCLor7flhYjpgInmi6nkuIDkuKrmlofku7ZcIixjcD1cIuaWh+S7tuWkp+Wwj+i2hei/hzEwME3vvIzml6Dms5Xlj5HpgIEgXCIsbHA9XCLnvLrlsJHlv4XopoHnmoTlj4LmlbDmlofku7YgVVJMXCIsZHA9XCLpnZ7lkIjlubbmtojmga9cIixwcD1cIuWQiOW5tua2iOaBr+eahCBtZXNzYWdlS2V5IOaXoOaViFwiLGdwPVwi5LiL6L295ZCI5bm25raI5oGv5aSx6LSlXCIsaHA9XCLpgInmi6nnmoTmtojmga/nsbvlnovvvIjlpoLnvqTmj5DnpLrmtojmga/vvInkuI3lj6/ku6Xovazlj5FcIixmcD1cIuayoeacieaJvuWIsOebuOW6lOeahOS8muivne+8jOivt+ajgOafpeS8oOWFpeWPguaVsFwiLF9wPVwi5rKh5pyJ5om+5Yiw55u45bqU55qE55So5oi35oiW576k57uE77yM6K+35qOA5p+l5Lyg5YWl5Y+C5pWwXCIsbXA9XCLmnKrorrDlvZXnmoTkvJror53nsbvlnotcIix2cD1cIumdnuazleeahOe+pOexu+Wei++8jOivt+ajgOafpeS8oOWFpeWPguaVsFwiLE1wPVwi5LiN6IO95Yqg5YWlIFdvcmsg57G75Z6L55qE576k57uEXCIseXA9XCJBVkNoYXRSb29tIOexu+Wei+eahOe+pOe7hOS4jeiDvei9rOiuqee+pOS4u1wiLElwPVwi5LiN6IO95oqK576k5Li76L2s6K6p57uZ6Ieq5bexXCIsVHA9XCLkuI3og73op6PmlaMgV29yayDnsbvlnovnmoTnvqTnu4RcIixEcD1cIueUqOaIt+S4jeWcqOivpee+pOe7hOWGhVwiLFNwPVwi5Yqg576k5aSx6LSl77yM6K+35qOA5p+l5Lyg5YWl5Y+C5pWw5oiW6YeN6K+VXCIsRXA9XCJBVkNoYXRSb29tIOexu+Wei+eahOe+pOS4jeaUr+aMgemCgOivt+e+pOaIkOWRmFwiLEFwPVwi6Z2eIEFWQ2hhdFJvb20g57G75Z6L55qE576k57uE5LiN5YWB6K645Yy/5ZCN5Yqg576k77yM6K+35YWI55m75b2V5ZCO5YaN5Yqg576kXCIsa3A9XCLkuI3og73lnKggQVZDaGF0Um9vbSDnsbvlnovnmoTnvqTnu4TouKLkurpcIixOcD1cIuS9oOS4jeaYr+e+pOS4u++8jOWPquaciee+pOS4u+aJjeacieadg+mZkOaTjeS9nFwiLENwPVwi5LiN6IO95ZyoIFdvcmsgLyBBVkNoYXRSb29tIOexu+Wei+eahOe+pOS4reiuvue9rue+pOaIkOWRmOi6q+S7vVwiLExwPVwi5LiN5ZCI5rOV55qE576k5oiQ5ZGY6Lqr5Lu977yM6K+35qOA5p+l5Lyg5YWl5Y+C5pWwXCIsT3A9XCLkuI3og73orr7nva7oh6rlt7HnmoTnvqTmiJDlkZjouqvku73vvIzor7fmo4Dmn6XkvKDlhaXlj4LmlbBcIixScD1cIuS4jeiDveWwhuiHquW3seemgeiogO+8jOivt+ajgOafpeS8oOWFpeWPguaVsFwiLGJwPVwi6Z2e5aW95Y+L5YWz57O7XCIsd3A9XCLlt7Lnu4/mmK/lpb3lj4vlhbPns7tcIixHcD1cIuWlveWPi+WIhue7hOW3suWtmOWcqFwiLFBwPVwi5aW95Y+L5YiG57uE5LiN5a2Y5ZyoXCIsVXA9XCLlpb3lj4vnlLPor7fkuI3lrZjlnKhcIixGcD1cIuS8oOWFpSB1cGRhdGVNeVByb2ZpbGUg5o6l5Y+j55qE5Y+C5pWw5peg5pWIXCIscXA9XCJ1cGRhdGVNeVByb2ZpbGUg5peg5qCH6YWN6LWE5paZ5a2X5q615oiW6Ieq5a6a5LmJ6LWE5paZ5a2X5q61XCIseHA9XCLkvKDlhaUgYWRkVG9CbGFja2xpc3Qg5o6l5Y+j55qE5Y+C5pWw5peg5pWIXCIsVnA9XCLkvKDlhaUgcmVtb3ZlRnJvbUJsYWNrbGlzdCDmjqXlj6PnmoTlj4LmlbDml6DmlYhcIixLcD1cIuS4jeiDveaLiem7keiHquW3sVwiLEJwPVwi572R57uc6ZSZ6K+vXCIsSHA9XCLor7fmsYLotoXml7ZcIixqcD1cIuacqui/nuaOpeWIsOe9kee7nFwiLFlwPVwi5peg5pWI5pON5L2c77yM5aaC6LCD55So5LqG5pyq5a6a5LmJ5oiW6ICF5pyq5a6e546w55qE5pa55rOV562JXCIsJHA9XCLml6Dms5Xmib7liLDljY/orq5cIixXcD1cIuaXoOazleaJvuWIsOaooeWdl1wiLHpwPVwi5o6l5Y+j6ZyA6KaBIFNESyDlpITkuo4gcmVhZHkg54q25oCB5ZCO5omN6IO96LCD55SoXCIsSnA9XCJ1cGxvYWRcIixYcD1cIm5ldHdvcmtSVFRcIixRcD1cIm1lc3NhZ2VFMkVEZWxheVwiLFpwPVwic2VuZE1lc3NhZ2VDMkNcIixlZz1cInNlbmRNZXNzYWdlR3JvdXBcIix0Zz1cInNlbmRNZXNzYWdlR3JvdXBBVlwiLG5nPVwic2VuZE1lc3NhZ2VSaWNoTWVkaWFcIixvZz1cImNvc1VwbG9hZFwiLHJnPVwibWVzc2FnZVJlY2VpdmVkR3JvdXBcIixhZz1cIm1lc3NhZ2VSZWNlaXZlZEdyb3VwQVZQdXNoXCIsc2c9XCJtZXNzYWdlUmVjZWl2ZWRHcm91cEFWUHVsbFwiLGlnPShzKEtjPXt9LFhwLDIpLHMoS2MsUXAsMykscyhLYyxacCw0KSxzKEtjLGVnLDUpLHMoS2MsdGcsNikscyhLYyxuZyw3KSxzKEtjLHJnLDgpLHMoS2MsYWcsOSkscyhLYyxzZywxMCkscyhLYyxvZywxMSksS2MpLHVnPXtpbmZvOjQsd2FybmluZzo1LGVycm9yOjZ9LGNnPXt3aWZpOjEsXCIyZ1wiOjIsXCIzZ1wiOjMsXCI0Z1wiOjQsXCI1Z1wiOjUsdW5rbm93bjo2LG5vbmU6NyxvbmxpbmU6OH0sbGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLmV2ZW50VHlwZT0wLHRoaXMudGltZXN0YW1wPTAsdGhpcy5uZXR3b3JrVHlwZT04LHRoaXMuY29kZT0wLHRoaXMubWVzc2FnZT1cIlwiLHRoaXMubW9yZU1lc3NhZ2U9XCJcIix0aGlzLmV4dGVuc2lvbj10LHRoaXMuY29zdFRpbWU9MCx0aGlzLmR1cGxpY2F0ZT0hMSx0aGlzLmxldmVsPTQsdGhpcy5fc2VudEZsYWc9ITEsdGhpcy5fc3RhcnR0cz1VaSgpfXJldHVybiBhKGUsW3trZXk6XCJ1cGRhdGVUaW1lU3RhbXBcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudGltZXN0YW1wPVVpKCl9fSx7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc3RhcnR0cz1lLHRoaXN9fSx7a2V5OlwiZW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXTtpZighdGhpcy5fc2VudEZsYWcpe3ZhciBuPVVpKCk7dGhpcy5jb3N0VGltZT1uLXRoaXMuX3N0YXJ0dHMsdGhpcy5zZXRNb3JlTWVzc2FnZShcImhvc3Q6XCIuY29uY2F0KER1KCksXCIgc3RhcnR0czpcIikuY29uY2F0KHRoaXMuX3N0YXJ0dHMsXCIgZW5kdHM6XCIpLmNvbmNhdChuKSksdD8odGhpcy5fc2VudEZsYWc9ITAsdGhpcy5fZXZlbnRTdGF0TW9kdWxlJiZ0aGlzLl9ldmVudFN0YXRNb2R1bGUucHVzaEluKHRoaXMpKTpzZXRUaW1lb3V0KChmdW5jdGlvbigpe2UuX3NlbnRGbGFnPSEwLGUuX2V2ZW50U3RhdE1vZHVsZSYmZS5fZXZlbnRTdGF0TW9kdWxlLnB1c2hJbihlKX0pLDApfX19LHtrZXk6XCJzZXRFcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yPyh0aGlzLl9zZW50RmxhZ3x8KHRoaXMuc2V0TmV0d29ya1R5cGUobiksdD8oZS5jb2RlJiZ0aGlzLnNldENvZGUoZS5jb2RlKSxlLm1lc3NhZ2UmJnRoaXMuc2V0TW9yZU1lc3NhZ2UoZS5tZXNzYWdlKSk6KHRoaXMuc2V0Q29kZShQZC5OT19ORVRXT1JLKSx0aGlzLnNldE1vcmVNZXNzYWdlKGpwKSksdGhpcy5zZXRMZXZlbChcImVycm9yXCIpKSx0aGlzKTooS2kud2FybihcIlNTT0xvZ0RhdGEuc2V0RXJyb3IgdmFsdWUgbm90IGluc3RhbmNlb2YgRXJyb3IsIHBsZWFzZSBjaGVjayFcIiksdGhpcyl9fSx7a2V5Olwic2V0Q29kZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBKaShlKXx8dGhpcy5fc2VudEZsYWd8fChcIkVDT05OQUJPUlRFRFwiPT09ZSYmKHRoaXMuY29kZT0xMDMpLGppKGUpP3RoaXMuY29kZT1lOktpLndhcm4oXCJTU09Mb2dEYXRhLnNldENvZGUgdmFsdWUgbm90IGEgbnVtYmVyLCBwbGVhc2UgY2hlY2shXCIsZSxuKGUpKSksdGhpc319LHtrZXk6XCJzZXRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpfHx0aGlzLl9zZW50RmxhZ3x8KGppKGUpJiYodGhpcy5tZXNzYWdlPWUudG9TdHJpbmcoKSksWWkoZSkmJih0aGlzLm1lc3NhZ2U9ZSkpLHRoaXN9fSx7a2V5Olwic2V0TGV2ZWxcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gSmkoZSl8fHRoaXMuX3NlbnRGbGFnfHwodGhpcy5sZXZlbD11Z1tlXSksdGhpc319LHtrZXk6XCJzZXRNb3JlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBPdSh0aGlzLm1vcmVNZXNzYWdlKT90aGlzLm1vcmVNZXNzYWdlPVwiXCIuY29uY2F0KGUpOnRoaXMubW9yZU1lc3NhZ2UrPVwiIFwiLmNvbmNhdChlKSx0aGlzfX0se2tleTpcInNldE5ldHdvcmtUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpfHxKaShjZ1tlXSk/S2kud2FybihcIlNTT0xvZ0RhdGEuc2V0TmV0d29ya1R5cGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBwbGVhc2UgY2hlY2shXCIpOnRoaXMubmV0d29ya1R5cGU9Y2dbZV0sdGhpc319LHtrZXk6XCJnZXRTdGFydFRzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnR0c319XSxbe2tleTpcImJpbmRFdmVudFN0YXRNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbih0KXtlLnByb3RvdHlwZS5fZXZlbnRTdGF0TW9kdWxlPXR9fV0pLGV9KCksZGc9XCJzZGtDb25zdHJ1Y3RcIixwZz1cInNka1JlYWR5XCIsZ2c9XCJsb2dpblwiLGhnPVwibG9nb3V0XCIsZmc9XCJraWNrZWRPdXRcIixfZz1cInJlZ2lzdGVyUGx1Z2luXCIsbWc9XCJ3c0Nvbm5lY3RcIix2Zz1cIndzT25PcGVuXCIsTWc9XCJ3c09uQ2xvc2VcIix5Zz1cIndzT25FcnJvclwiLElnPVwiZ2V0Q29zQXV0aEtleVwiLFRnPVwiZ2V0Q29zUHJlU2lnVXJsXCIsRGc9XCJ1cGxvYWRcIixTZz1cInNlbmRNZXNzYWdlXCIsRWc9XCJnZXRDMkNSb2FtaW5nTWVzc2FnZXNcIixBZz1cImdldEdyb3VwUm9hbWluZ01lc3NhZ2VzXCIsa2c9XCJyZXZva2VNZXNzYWdlXCIsTmc9XCJkZWxldGVNZXNzYWdlXCIsQ2c9XCJzZXRDMkNNZXNzYWdlUmVhZFwiLExnPVwic2V0R3JvdXBNZXNzYWdlUmVhZFwiLE9nPVwiZW1wdHlNZXNzYWdlQm9keVwiLFJnPVwiZ2V0UGVlclJlYWRUaW1lXCIsYmc9XCJ1cGxvYWRNZXJnZXJNZXNzYWdlXCIsd2c9XCJkb3dubG9hZE1lcmdlck1lc3NhZ2VcIixHZz1cImpzb25QYXJzZUVycm9yXCIsUGc9XCJtZXNzYWdlRTJFRGVsYXlFeGNlcHRpb25cIixVZz1cImdldENvbnZlcnNhdGlvbkxpc3RcIixGZz1cImdldENvbnZlcnNhdGlvblByb2ZpbGVcIixxZz1cImRlbGV0ZUNvbnZlcnNhdGlvblwiLHhnPVwicGluQ29udmVyc2F0aW9uXCIsVmc9XCJnZXRDb252ZXJzYXRpb25MaXN0SW5TdG9yYWdlXCIsS2c9XCJzeW5jQ29udmVyc2F0aW9uTGlzdFwiLEJnPVwiY3JlYXRlR3JvdXBcIixIZz1cImFwcGx5Sm9pbkdyb3VwXCIsamc9XCJxdWl0R3JvdXBcIixZZz1cInNlYXJjaEdyb3VwQnlJRFwiLCRnPVwiY2hhbmdlR3JvdXBPd25lclwiLFdnPVwiaGFuZGxlR3JvdXBBcHBsaWNhdGlvblwiLHpnPVwiaGFuZGxlR3JvdXBJbnZpdGF0aW9uXCIsSmc9XCJzZXRNZXNzYWdlUmVtaW5kVHlwZVwiLFhnPVwiZGlzbWlzc0dyb3VwXCIsUWc9XCJ1cGRhdGVHcm91cFByb2ZpbGVcIixaZz1cImdldEdyb3VwTGlzdFwiLGVoPVwiZ2V0R3JvdXBQcm9maWxlXCIsdGg9XCJnZXRHcm91cExpc3RJblN0b3JhZ2VcIixuaD1cImdldEdyb3VwTGFzdFNlcXVlbmNlXCIsb2g9XCJnZXRHcm91cE1pc3NpbmdNZXNzYWdlXCIscmg9XCJwYWdpbmdHZXRHcm91cExpc3RcIixhaD1cImdldEdyb3VwU2ltcGxpZmllZEluZm9cIixzaD1cImpvaW5XaXRob3V0QXV0aFwiLGloPVwiaW5pdEdyb3VwQXR0cmlidXRlc1wiLHVoPVwic2V0R3JvdXBBdHRyaWJ1dGVzXCIsY2g9XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIixsaD1cImdldEdyb3VwQXR0cmlidXRlc1wiLGRoPVwiZ2V0R3JvdXBNZW1iZXJMaXN0XCIscGg9XCJnZXRHcm91cE1lbWJlclByb2ZpbGVcIixnaD1cImFkZEdyb3VwTWVtYmVyXCIsaGg9XCJkZWxldGVHcm91cE1lbWJlclwiLGZoPVwic2V0R3JvdXBNZW1iZXJNdXRlVGltZVwiLF9oPVwic2V0R3JvdXBNZW1iZXJOYW1lQ2FyZFwiLG1oPVwic2V0R3JvdXBNZW1iZXJSb2xlXCIsdmg9XCJzZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkXCIsTWg9XCJnZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIseWg9XCJsb25nUG9sbGluZ0FWRXJyb3JcIixJaD1cIm1lc3NhZ2VMb3NzXCIsVGg9XCJtZXNzYWdlU3RhY2tlZFwiLERoPVwiZ2V0VXNlclByb2ZpbGVcIixTaD1cInVwZGF0ZU15UHJvZmlsZVwiLEVoPVwiZ2V0QmxhY2tsaXN0XCIsQWg9XCJhZGRUb0JsYWNrbGlzdFwiLGtoPVwicmVtb3ZlRnJvbUJsYWNrbGlzdFwiLE5oPVwiYWRkRnJpZW5kXCIsQ2g9XCJjaGVja0ZyaWVuZFwiLExoPVwicmVtb3ZlRnJvbUZyaWVuZExpc3RcIixPaD1cImdldEZyaWVuZFByb2ZpbGVcIixSaD1cImdldEZyaWVuZExpc3RcIixiaD1cInVwZGF0ZUZyaWVuZFwiLHdoPVwiZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0XCIsR2g9XCJkZWxldGVGcmllbmRBcHBsaWNhdGlvblwiLFBoPVwiYWNjZXB0RnJpZW5kQXBwbGljYXRpb25cIixVaD1cInJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uXCIsRmg9XCJzZXRGcmllbmRBcHBsaWNhdGlvblJlYWRcIixxaD1cImNyZWF0ZUZyaWVuZEdyb3VwXCIseGg9XCJkZWxldGVGcmllbmRHcm91cFwiLFZoPVwicmVuYW1lRnJpZW5kR3JvdXBcIixLaD1cImFkZFRvRnJpZW5kR3JvdXBcIixCaD1cInJlbW92ZUZyb21GcmllbmRHcm91cFwiLEhoPVwiZ2V0RnJpZW5kR3JvdXBMaXN0XCIsamg9XCJjYWxsYmFja0Z1bmN0aW9uRXJyb3JcIixZaD1cImZldGNoQ2xvdWRDb250cm9sQ29uZmlnXCIsJGg9XCJwdXNoZWRDbG91ZENvbnRyb2xDb25maWdcIixXaD1cImVycm9yXCIsemg9Ry5mLEpoPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtmb3IodmFyIG4sbz1LKHQpLHI9T3QobyksYT1yLmxlbmd0aCxzPTAsaT1bXTthPnM7KW49cltzKytdLFImJiF6aC5jYWxsKG8sbil8fGkucHVzaChlP1tuLG9bbl1dOm9bbl0pO3JldHVybiBpfX0sWGg9e2VudHJpZXM6SmgoITApLHZhbHVlczpKaCghMSl9LnZhbHVlczt2dCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMH0se3ZhbHVlczpmdW5jdGlvbihlKXtyZXR1cm4gWGgoZSl9fSk7dmFyIFFoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy50eXBlPXJvLk1TR19URVhULHRoaXMuY29udGVudD17dGV4dDp0LnRleHR8fFwiXCJ9fXJldHVybiBhKGUsW3trZXk6XCJzZXRUZXh0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jb250ZW50LnRleHQ9ZX19LHtrZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLmNvbnRlbnQudGV4dC5sZW5ndGh9fV0pLGV9KCksWmg9Z2UoXCJpdGVyYXRvclwiKSxlZj0hTygoZnVuY3Rpb24oKXt2YXIgZT1uZXcgVVJMKFwiYj9hPTEmYj0yJmM9M1wiLFwiaHR0cDovL2FcIiksdD1lLnNlYXJjaFBhcmFtcyxuPVwiXCI7cmV0dXJuIGUucGF0aG5hbWU9XCJjJTIwZFwiLHQuZm9yRWFjaCgoZnVuY3Rpb24oZSxvKXt0LmRlbGV0ZShcImJcIiksbis9bytlfSkpLCF0LnNvcnR8fFwiaHR0cDovL2EvYyUyMGQ/YT0xJmM9M1wiIT09ZS5ocmVmfHxcIjNcIiE9PXQuZ2V0KFwiY1wiKXx8XCJhPTFcIiE9PVN0cmluZyhuZXcgVVJMU2VhcmNoUGFyYW1zKFwiP2E9MVwiKSl8fCF0W1poXXx8XCJhXCIhPT1uZXcgVVJMKFwiaHR0cHM6Ly9hQGJcIikudXNlcm5hbWV8fFwiYlwiIT09bmV3IFVSTFNlYXJjaFBhcmFtcyhuZXcgVVJMU2VhcmNoUGFyYW1zKFwiYT1iXCIpKS5nZXQoXCJhXCIpfHxcInhuLS1lMWF5YmNcIiE9PW5ldyBVUkwoXCJodHRwOi8v0YLQtdGB0YJcIikuaG9zdHx8XCIjJUQwJUIxXCIhPT1uZXcgVVJMKFwiaHR0cDovL2Ej0LFcIikuaGFzaHx8XCJhMWMzXCIhPT1ufHxcInhcIiE9PW5ldyBVUkwoXCJodHRwOi8veFwiLHZvaWQgMCkuaG9zdH0pKSx0Zj1PYmplY3QuYXNzaWduLG5mPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxvZj0hdGZ8fE8oKGZ1bmN0aW9uKCl7aWYoUiYmMSE9PXRmKHtiOjF9LHRmKG5mKHt9LFwiYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe25mKHRoaXMsXCJiXCIse3ZhbHVlOjMsZW51bWVyYWJsZTohMX0pfX0pLHtiOjJ9KSkuYilyZXR1cm4hMDt2YXIgZT17fSx0PXt9LG49U3ltYm9sKCk7cmV0dXJuIGVbbl09NyxcImFiY2RlZmdoaWprbG1ub3BxcnN0XCIuc3BsaXQoXCJcIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXT1lfSkpLDchPXRmKHt9LGUpW25dfHxcImFiY2RlZmdoaWprbG1ub3BxcnN0XCIhPU90KHRmKHt9LHQpKS5qb2luKFwiXCIpfSkpP2Z1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXJlKGUpLG89YXJndW1lbnRzLmxlbmd0aCxyPTEsYT1pdC5mLHM9Ry5mO28+cjspZm9yKHZhciBpLHU9eChhcmd1bWVudHNbcisrXSksYz1hP090KHUpLmNvbmNhdChhKHUpKTpPdCh1KSxsPWMubGVuZ3RoLGQ9MDtsPmQ7KWk9Y1tkKytdLFImJiFzLmNhbGwodSxpKXx8KG5baV09dVtpXSk7cmV0dXJuIG59OnRmLHJmPS9bXlxcMC1cXHUwMDdFXS8sYWY9L1suXFx1MzAwMlxcdUZGMEVcXHVGRjYxXS9nLHNmPVwiT3ZlcmZsb3c6IGlucHV0IG5lZWRzIHdpZGVyIGludGVnZXJzIHRvIHByb2Nlc3NcIix1Zj1NYXRoLmZsb29yLGNmPVN0cmluZy5mcm9tQ2hhckNvZGUsbGY9ZnVuY3Rpb24oZSl7cmV0dXJuIGUrMjIrNzUqKGU8MjYpfSxkZj1mdW5jdGlvbihlLHQsbil7dmFyIG89MDtmb3IoZT1uP3VmKGUvNzAwKTplPj4xLGUrPXVmKGUvdCk7ZT40NTU7bys9MzYpZT11ZihlLzM1KTtyZXR1cm4gdWYobyszNiplLyhlKzM4KSl9LHBmPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbz1bXSxyPShlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTAsbz1lLmxlbmd0aDtuPG87KXt2YXIgcj1lLmNoYXJDb2RlQXQobisrKTtpZihyPj01NTI5NiYmcjw9NTYzMTkmJm48byl7dmFyIGE9ZS5jaGFyQ29kZUF0KG4rKyk7NTYzMjA9PSg2NDUxMiZhKT90LnB1c2goKCgxMDIzJnIpPDwxMCkrKDEwMjMmYSkrNjU1MzYpOih0LnB1c2gociksbi0tKX1lbHNlIHQucHVzaChyKX1yZXR1cm4gdH0oZSkpLmxlbmd0aCxhPTEyOCxzPTAsaT03Mjtmb3IodD0wO3Q8ZS5sZW5ndGg7dCsrKShuPWVbdF0pPDEyOCYmby5wdXNoKGNmKG4pKTt2YXIgdT1vLmxlbmd0aCxjPXU7Zm9yKHUmJm8ucHVzaChcIi1cIik7YzxyOyl7dmFyIGw9MjE0NzQ4MzY0Nztmb3IodD0wO3Q8ZS5sZW5ndGg7dCsrKShuPWVbdF0pPj1hJiZuPGwmJihsPW4pO3ZhciBkPWMrMTtpZihsLWE+dWYoKDIxNDc0ODM2NDctcykvZCkpdGhyb3cgUmFuZ2VFcnJvcihzZik7Zm9yKHMrPShsLWEpKmQsYT1sLHQ9MDt0PGUubGVuZ3RoO3QrKyl7aWYoKG49ZVt0XSk8YSYmKytzPjIxNDc0ODM2NDcpdGhyb3cgUmFuZ2VFcnJvcihzZik7aWYobj09YSl7Zm9yKHZhciBwPXMsZz0zNjs7Zys9MzYpe3ZhciBoPWc8PWk/MTpnPj1pKzI2PzI2OmctaTtpZihwPGgpYnJlYWs7dmFyIGY9cC1oLF89MzYtaDtvLnB1c2goY2YobGYoaCtmJV8pKSkscD11ZihmL18pfW8ucHVzaChjZihsZihwKSkpLGk9ZGYocyxkLGM9PXUpLHM9MCwrK2N9fSsrcywrK2F9cmV0dXJuIG8uam9pbihcIlwiKX0sZ2Y9ZnVuY3Rpb24oZSl7dmFyIHQ9X24oZSk7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGUpK1wiIGlzIG5vdCBpdGVyYWJsZVwiKTtyZXR1cm4gRGUodC5jYWxsKGUpKX0saGY9aihcImZldGNoXCIpLGZmPWooXCJSZXF1ZXN0XCIpLF9mPWZmJiZmZi5wcm90b3R5cGUsbWY9aihcIkhlYWRlcnNcIiksdmY9Z2UoXCJpdGVyYXRvclwiKSxNZj1CZS5zZXQseWY9QmUuZ2V0dGVyRm9yKFwiVVJMU2VhcmNoUGFyYW1zXCIpLElmPUJlLmdldHRlckZvcihcIlVSTFNlYXJjaFBhcmFtc0l0ZXJhdG9yXCIpLFRmPS9cXCsvZyxEZj1BcnJheSg0KSxTZj1mdW5jdGlvbihlKXtyZXR1cm4gRGZbZS0xXXx8KERmW2UtMV09UmVnRXhwKFwiKCg/OiVbXFxcXGRhLWZdezJ9KXtcIitlK1wifSlcIixcImdpXCIpKX0sRWY9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZSl9Y2F0Y2goY3kpe3JldHVybiBlfX0sQWY9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKFRmLFwiIFwiKSxuPTQ7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQodCl9Y2F0Y2goY3kpe2Zvcig7bjspdD10LnJlcGxhY2UoU2Yobi0tKSxFZik7cmV0dXJuIHR9fSxrZj0vWyEnKCl+XXwlMjAvZyxOZj17XCIhXCI6XCIlMjFcIixcIidcIjpcIiUyN1wiLFwiKFwiOlwiJTI4XCIsXCIpXCI6XCIlMjlcIixcIn5cIjpcIiU3RVwiLFwiJTIwXCI6XCIrXCJ9LENmPWZ1bmN0aW9uKGUpe3JldHVybiBOZltlXX0sTGY9ZnVuY3Rpb24oZSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKS5yZXBsYWNlKGtmLENmKX0sT2Y9ZnVuY3Rpb24oZSx0KXtpZih0KWZvcih2YXIgbixvLHI9dC5zcGxpdChcIiZcIiksYT0wO2E8ci5sZW5ndGg7KShuPXJbYSsrXSkubGVuZ3RoJiYobz1uLnNwbGl0KFwiPVwiKSxlLnB1c2goe2tleTpBZihvLnNoaWZ0KCkpLHZhbHVlOkFmKG8uam9pbihcIj1cIikpfSkpfSxSZj1mdW5jdGlvbihlKXt0aGlzLmVudHJpZXMubGVuZ3RoPTAsT2YodGhpcy5lbnRyaWVzLGUpfSxiZj1mdW5jdGlvbihlLHQpe2lmKGU8dCl0aHJvdyBUeXBlRXJyb3IoXCJOb3QgZW5vdWdoIGFyZ3VtZW50c1wiKX0sd2Y9Vm4oKGZ1bmN0aW9uKGUsdCl7TWYodGhpcyx7dHlwZTpcIlVSTFNlYXJjaFBhcmFtc0l0ZXJhdG9yXCIsaXRlcmF0b3I6Z2YoeWYoZSkuZW50cmllcyksa2luZDp0fSl9KSxcIkl0ZXJhdG9yXCIsKGZ1bmN0aW9uKCl7dmFyIGU9SWYodGhpcyksdD1lLmtpbmQsbj1lLml0ZXJhdG9yLm5leHQoKSxvPW4udmFsdWU7cmV0dXJuIG4uZG9uZXx8KG4udmFsdWU9XCJrZXlzXCI9PT10P28ua2V5OlwidmFsdWVzXCI9PT10P28udmFsdWU6W28ua2V5LG8udmFsdWVdKSxufSkpLEdmPWZ1bmN0aW9uKCl7dmEodGhpcyxHZixcIlVSTFNlYXJjaFBhcmFtc1wiKTt2YXIgZSx0LG4sbyxyLGEscyxpLHUsYz1hcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCxsPXRoaXMsZD1bXTtpZihNZihsLHt0eXBlOlwiVVJMU2VhcmNoUGFyYW1zXCIsZW50cmllczpkLHVwZGF0ZVVSTDpmdW5jdGlvbigpe30sdXBkYXRlU2VhcmNoUGFyYW1zOlJmfSksdm9pZCAwIT09YylpZihCKGMpKWlmKFwiZnVuY3Rpb25cIj09dHlwZW9mKGU9X24oYykpKWZvcihuPSh0PWUuY2FsbChjKSkubmV4dDshKG89bi5jYWxsKHQpKS5kb25lOyl7aWYoKHM9KGE9KHI9Z2YoRGUoby52YWx1ZSkpKS5uZXh0KS5jYWxsKHIpKS5kb25lfHwoaT1hLmNhbGwocikpLmRvbmV8fCFhLmNhbGwocikuZG9uZSl0aHJvdyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBzZXF1ZW5jZSB3aXRoIGxlbmd0aCAyXCIpO2QucHVzaCh7a2V5Ok10KHMudmFsdWUpLHZhbHVlOk10KGkudmFsdWUpfSl9ZWxzZSBmb3IodSBpbiBjKXNlKGMsdSkmJmQucHVzaCh7a2V5OnUsdmFsdWU6TXQoY1t1XSl9KTtlbHNlIE9mKGQsXCJzdHJpbmdcIj09dHlwZW9mIGM/XCI/XCI9PT1jLmNoYXJBdCgwKT9jLnNsaWNlKDEpOmM6TXQoYykpfSxQZj1HZi5wcm90b3R5cGU7aWYoZmEoUGYse2FwcGVuZDpmdW5jdGlvbihlLHQpe2JmKGFyZ3VtZW50cy5sZW5ndGgsMik7dmFyIG49eWYodGhpcyk7bi5lbnRyaWVzLnB1c2goe2tleTpNdChlKSx2YWx1ZTpNdCh0KX0pLG4udXBkYXRlVVJMKCl9LGRlbGV0ZTpmdW5jdGlvbihlKXtiZihhcmd1bWVudHMubGVuZ3RoLDEpO2Zvcih2YXIgdD15Zih0aGlzKSxuPXQuZW50cmllcyxvPU10KGUpLHI9MDtyPG4ubGVuZ3RoOyluW3JdLmtleT09PW8/bi5zcGxpY2UociwxKTpyKys7dC51cGRhdGVVUkwoKX0sZ2V0OmZ1bmN0aW9uKGUpe2JmKGFyZ3VtZW50cy5sZW5ndGgsMSk7Zm9yKHZhciB0PXlmKHRoaXMpLmVudHJpZXMsbj1NdChlKSxvPTA7bzx0Lmxlbmd0aDtvKyspaWYodFtvXS5rZXk9PT1uKXJldHVybiB0W29dLnZhbHVlO3JldHVybiBudWxsfSxnZXRBbGw6ZnVuY3Rpb24oZSl7YmYoYXJndW1lbnRzLmxlbmd0aCwxKTtmb3IodmFyIHQ9eWYodGhpcykuZW50cmllcyxuPU10KGUpLG89W10scj0wO3I8dC5sZW5ndGg7cisrKXRbcl0ua2V5PT09biYmby5wdXNoKHRbcl0udmFsdWUpO3JldHVybiBvfSxoYXM6ZnVuY3Rpb24oZSl7YmYoYXJndW1lbnRzLmxlbmd0aCwxKTtmb3IodmFyIHQ9eWYodGhpcykuZW50cmllcyxuPU10KGUpLG89MDtvPHQubGVuZ3RoOylpZih0W28rK10ua2V5PT09bilyZXR1cm4hMDtyZXR1cm4hMX0sc2V0OmZ1bmN0aW9uKGUsdCl7YmYoYXJndW1lbnRzLmxlbmd0aCwxKTtmb3IodmFyIG4sbz15Zih0aGlzKSxyPW8uZW50cmllcyxhPSExLHM9TXQoZSksaT1NdCh0KSx1PTA7dTxyLmxlbmd0aDt1KyspKG49clt1XSkua2V5PT09cyYmKGE/ci5zcGxpY2UodS0tLDEpOihhPSEwLG4udmFsdWU9aSkpO2F8fHIucHVzaCh7a2V5OnMsdmFsdWU6aX0pLG8udXBkYXRlVVJMKCl9LHNvcnQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG4sbz15Zih0aGlzKSxyPW8uZW50cmllcyxhPXIuc2xpY2UoKTtmb3Ioci5sZW5ndGg9MCxuPTA7bjxhLmxlbmd0aDtuKyspe2ZvcihlPWFbbl0sdD0wO3Q8bjt0KyspaWYoclt0XS5rZXk+ZS5rZXkpe3Iuc3BsaWNlKHQsMCxlKTticmVha310PT09biYmci5wdXNoKGUpfW8udXBkYXRlVVJMKCl9LGZvckVhY2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49eWYodGhpcykuZW50cmllcyxvPVZ0KGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsMykscj0wO3I8bi5sZW5ndGg7KW8oKHQ9bltyKytdKS52YWx1ZSx0LmtleSx0aGlzKX0sa2V5czpmdW5jdGlvbigpe3JldHVybiBuZXcgd2YodGhpcyxcImtleXNcIil9LHZhbHVlczpmdW5jdGlvbigpe3JldHVybiBuZXcgd2YodGhpcyxcInZhbHVlc1wiKX0sZW50cmllczpmdW5jdGlvbigpe3JldHVybiBuZXcgd2YodGhpcyxcImVudHJpZXNcIil9fSx7ZW51bWVyYWJsZTohMH0pLEhlKFBmLHZmLFBmLmVudHJpZXMpLEhlKFBmLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXtmb3IodmFyIGUsdD15Zih0aGlzKS5lbnRyaWVzLG49W10sbz0wO288dC5sZW5ndGg7KWU9dFtvKytdLG4ucHVzaChMZihlLmtleSkrXCI9XCIrTGYoZS52YWx1ZSkpO3JldHVybiBuLmpvaW4oXCImXCIpfSkse2VudW1lcmFibGU6ITB9KSxGbihHZixcIlVSTFNlYXJjaFBhcmFtc1wiKSx2dCh7Z2xvYmFsOiEwLGZvcmNlZDohZWZ9LHtVUkxTZWFyY2hQYXJhbXM6R2Z9KSwhZWYmJlwiZnVuY3Rpb25cIj09dHlwZW9mIG1mKXt2YXIgVWY9ZnVuY3Rpb24oZSl7aWYoQihlKSl7dmFyIHQsbj1lLmJvZHk7aWYoXCJVUkxTZWFyY2hQYXJhbXNcIj09PWhuKG4pKXJldHVybih0PWUuaGVhZGVycz9uZXcgbWYoZS5oZWFkZXJzKTpuZXcgbWYpLmhhcyhcImNvbnRlbnQtdHlwZVwiKXx8dC5zZXQoXCJjb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04XCIpLHF0KGUse2JvZHk6UCgwLFN0cmluZyhuKSksaGVhZGVyczpQKDAsdCl9KX1yZXR1cm4gZX07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgaGYmJnZ0KHtnbG9iYWw6ITAsZW51bWVyYWJsZTohMCxmb3JjZWQ6ITB9LHtmZXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gaGYoZSxhcmd1bWVudHMubGVuZ3RoPjE/VWYoYXJndW1lbnRzWzFdKTp7fSl9fSksXCJmdW5jdGlvblwiPT10eXBlb2YgZmYpe3ZhciBGZj1mdW5jdGlvbihlKXtyZXR1cm4gdmEodGhpcyxGZixcIlJlcXVlc3RcIiksbmV3IGZmKGUsYXJndW1lbnRzLmxlbmd0aD4xP1VmKGFyZ3VtZW50c1sxXSk6e30pfTtfZi5jb25zdHJ1Y3Rvcj1GZixGZi5wcm90b3R5cGU9X2YsdnQoe2dsb2JhbDohMCxmb3JjZWQ6ITB9LHtSZXF1ZXN0OkZmfSl9fXZhciBxZix4Zj17VVJMU2VhcmNoUGFyYW1zOkdmLGdldFN0YXRlOnlmfSxWZj1Obi5jb2RlQXQsS2Y9TC5VUkwsQmY9eGYuVVJMU2VhcmNoUGFyYW1zLEhmPXhmLmdldFN0YXRlLGpmPUJlLnNldCxZZj1CZS5nZXR0ZXJGb3IoXCJVUkxcIiksJGY9TWF0aC5mbG9vcixXZj1NYXRoLnBvdyx6Zj0vW0EtWmEtel0vLEpmPS9bXFxkKy0uQS1aYS16XS8sWGY9L1xcZC8sUWY9L14weC9pLFpmPS9eWzAtN10rJC8sZV89L15cXGQrJC8sdF89L15bXFxkQS1GYS1mXSskLyxuXz0vW1xcMFxcdFxcblxcciAjJS86PD4/QFtcXFxcXFxdXnxdLyxvXz0vW1xcMFxcdFxcblxcciAjLzo8Pj9AW1xcXFxcXF1efF0vLHJfPS9eW1xcdTAwMDAtXFx1MDAyMF0rfFtcXHUwMDAwLVxcdTAwMjBdKyQvZyxhXz0vW1xcdFxcblxccl0vZyxzXz1mdW5jdGlvbihlLHQpe3ZhciBuLG8scjtpZihcIltcIj09dC5jaGFyQXQoMCkpe2lmKFwiXVwiIT10LmNoYXJBdCh0Lmxlbmd0aC0xKSlyZXR1cm5cIkludmFsaWQgaG9zdFwiO2lmKCEobj11Xyh0LnNsaWNlKDEsLTEpKSkpcmV0dXJuXCJJbnZhbGlkIGhvc3RcIjtlLmhvc3Q9bn1lbHNlIGlmKF9fKGUpKXtpZih0PWZ1bmN0aW9uKGUpe3ZhciB0LG4sbz1bXSxyPWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKGFmLFwiLlwiKS5zcGxpdChcIi5cIik7Zm9yKHQ9MDt0PHIubGVuZ3RoO3QrKyluPXJbdF0sby5wdXNoKHJmLnRlc3Qobik/XCJ4bi0tXCIrcGYobik6bik7cmV0dXJuIG8uam9pbihcIi5cIil9KHQpLG5fLnRlc3QodCkpcmV0dXJuXCJJbnZhbGlkIGhvc3RcIjtpZihudWxsPT09KG49aV8odCkpKXJldHVyblwiSW52YWxpZCBob3N0XCI7ZS5ob3N0PW59ZWxzZXtpZihvXy50ZXN0KHQpKXJldHVyblwiSW52YWxpZCBob3N0XCI7Zm9yKG49XCJcIixvPW1uKHQpLHI9MDtyPG8ubGVuZ3RoO3IrKyluKz1oXyhvW3JdLGxfKTtlLmhvc3Q9bn19LGlfPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyLGEscyxpLHU9ZS5zcGxpdChcIi5cIik7aWYodS5sZW5ndGgmJlwiXCI9PXVbdS5sZW5ndGgtMV0mJnUucG9wKCksKHQ9dS5sZW5ndGgpPjQpcmV0dXJuIGU7Zm9yKG49W10sbz0wO288dDtvKyspe2lmKFwiXCI9PShyPXVbb10pKXJldHVybiBlO2lmKGE9MTAsci5sZW5ndGg+MSYmXCIwXCI9PXIuY2hhckF0KDApJiYoYT1RZi50ZXN0KHIpPzE2Ojgscj1yLnNsaWNlKDg9PWE/MToyKSksXCJcIj09PXIpcz0wO2Vsc2V7aWYoISgxMD09YT9lXzo4PT1hP1pmOnRfKS50ZXN0KHIpKXJldHVybiBlO3M9cGFyc2VJbnQocixhKX1uLnB1c2gocyl9Zm9yKG89MDtvPHQ7bysrKWlmKHM9bltvXSxvPT10LTEpe2lmKHM+PVdmKDI1Niw1LXQpKXJldHVybiBudWxsfWVsc2UgaWYocz4yNTUpcmV0dXJuIG51bGw7Zm9yKGk9bi5wb3AoKSxvPTA7bzxuLmxlbmd0aDtvKyspaSs9bltvXSpXZigyNTYsMy1vKTtyZXR1cm4gaX0sdV89ZnVuY3Rpb24oZSl7dmFyIHQsbixvLHIsYSxzLGksdT1bMCwwLDAsMCwwLDAsMCwwXSxjPTAsbD1udWxsLGQ9MCxwPWZ1bmN0aW9uKCl7cmV0dXJuIGUuY2hhckF0KGQpfTtpZihcIjpcIj09cCgpKXtpZihcIjpcIiE9ZS5jaGFyQXQoMSkpcmV0dXJuO2QrPTIsbD0rK2N9Zm9yKDtwKCk7KXtpZig4PT1jKXJldHVybjtpZihcIjpcIiE9cCgpKXtmb3IodD1uPTA7bjw0JiZ0Xy50ZXN0KHAoKSk7KXQ9MTYqdCtwYXJzZUludChwKCksMTYpLGQrKyxuKys7aWYoXCIuXCI9PXAoKSl7aWYoMD09bilyZXR1cm47aWYoZC09bixjPjYpcmV0dXJuO2ZvcihvPTA7cCgpOyl7aWYocj1udWxsLG8+MCl7aWYoIShcIi5cIj09cCgpJiZvPDQpKXJldHVybjtkKyt9aWYoIVhmLnRlc3QocCgpKSlyZXR1cm47Zm9yKDtYZi50ZXN0KHAoKSk7KXtpZihhPXBhcnNlSW50KHAoKSwxMCksbnVsbD09PXIpcj1hO2Vsc2V7aWYoMD09cilyZXR1cm47cj0xMCpyK2F9aWYocj4yNTUpcmV0dXJuO2QrK311W2NdPTI1Nip1W2NdK3IsMiE9KytvJiY0IT1vfHxjKyt9aWYoNCE9bylyZXR1cm47YnJlYWt9aWYoXCI6XCI9PXAoKSl7aWYoZCsrLCFwKCkpcmV0dXJufWVsc2UgaWYocCgpKXJldHVybjt1W2MrK109dH1lbHNle2lmKG51bGwhPT1sKXJldHVybjtkKyssbD0rK2N9fWlmKG51bGwhPT1sKWZvcihzPWMtbCxjPTc7MCE9YyYmcz4wOylpPXVbY10sdVtjLS1dPXVbbCtzLTFdLHVbbCstLXNdPWk7ZWxzZSBpZig4IT1jKXJldHVybjtyZXR1cm4gdX0sY189ZnVuY3Rpb24oZSl7dmFyIHQsbixvLHI7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUpe2Zvcih0PVtdLG49MDtuPDQ7bisrKXQudW5zaGlmdChlJTI1NiksZT0kZihlLzI1Nik7cmV0dXJuIHQuam9pbihcIi5cIil9aWYoXCJvYmplY3RcIj09dHlwZW9mIGUpe2Zvcih0PVwiXCIsbz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bnVsbCxuPTEsbz1udWxsLHI9MCxhPTA7YTw4O2ErKykwIT09ZVthXT8ocj5uJiYodD1vLG49ciksbz1udWxsLHI9MCk6KG51bGw9PT1vJiYobz1hKSwrK3IpO3JldHVybiByPm4mJih0PW8sbj1yKSx0fShlKSxuPTA7bjw4O24rKylyJiYwPT09ZVtuXXx8KHImJihyPSExKSxvPT09bj8odCs9bj9cIjpcIjpcIjo6XCIscj0hMCk6KHQrPWVbbl0udG9TdHJpbmcoMTYpLG48NyYmKHQrPVwiOlwiKSkpO3JldHVyblwiW1wiK3QrXCJdXCJ9cmV0dXJuIGV9LGxfPXt9LGRfPW9mKHt9LGxfLHtcIiBcIjoxLCdcIic6MSxcIjxcIjoxLFwiPlwiOjEsXCJgXCI6MX0pLHBfPW9mKHt9LGRfLHtcIiNcIjoxLFwiP1wiOjEsXCJ7XCI6MSxcIn1cIjoxfSksZ189b2Yoe30scF8se1wiL1wiOjEsXCI6XCI6MSxcIjtcIjoxLFwiPVwiOjEsXCJAXCI6MSxcIltcIjoxLFwiXFxcXFwiOjEsXCJdXCI6MSxcIl5cIjoxLFwifFwiOjF9KSxoXz1mdW5jdGlvbihlLHQpe3ZhciBuPVZmKGUsMCk7cmV0dXJuIG4+MzImJm48MTI3JiYhc2UodCxlKT9lOmVuY29kZVVSSUNvbXBvbmVudChlKX0sZl89e2Z0cDoyMSxmaWxlOm51bGwsaHR0cDo4MCxodHRwczo0NDMsd3M6ODAsd3NzOjQ0M30sX189ZnVuY3Rpb24oZSl7cmV0dXJuIHNlKGZfLGUuc2NoZW1lKX0sbV89ZnVuY3Rpb24oZSl7cmV0dXJuXCJcIiE9ZS51c2VybmFtZXx8XCJcIiE9ZS5wYXNzd29yZH0sdl89ZnVuY3Rpb24oZSl7cmV0dXJuIWUuaG9zdHx8ZS5jYW5ub3RCZUFCYXNlVVJMfHxcImZpbGVcIj09ZS5zY2hlbWV9LE1fPWZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuIDI9PWUubGVuZ3RoJiZ6Zi50ZXN0KGUuY2hhckF0KDApKSYmKFwiOlwiPT0obj1lLmNoYXJBdCgxKSl8fCF0JiZcInxcIj09bil9LHlfPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlLmxlbmd0aD4xJiZNXyhlLnNsaWNlKDAsMikpJiYoMj09ZS5sZW5ndGh8fFwiL1wiPT09KHQ9ZS5jaGFyQXQoMikpfHxcIlxcXFxcIj09PXR8fFwiP1wiPT09dHx8XCIjXCI9PT10KX0sSV89ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXRoLG49dC5sZW5ndGg7IW58fFwiZmlsZVwiPT1lLnNjaGVtZSYmMT09biYmTV8odFswXSwhMCl8fHQucG9wKCl9LFRfPWZ1bmN0aW9uKGUpe3JldHVyblwiLlwiPT09ZXx8XCIlMmVcIj09PWUudG9Mb3dlckNhc2UoKX0sRF89e30sU189e30sRV89e30sQV89e30sa189e30sTl89e30sQ189e30sTF89e30sT189e30sUl89e30sYl89e30sd189e30sR189e30sUF89e30sVV89e30sRl89e30scV89e30seF89e30sVl89e30sS189e30sQl89e30sSF89ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIHIsYSxzLGksdSxjPW58fERfLGw9MCxkPVwiXCIscD0hMSxnPSExLGg9ITE7Zm9yKG58fChlLnNjaGVtZT1cIlwiLGUudXNlcm5hbWU9XCJcIixlLnBhc3N3b3JkPVwiXCIsZS5ob3N0PW51bGwsZS5wb3J0PW51bGwsZS5wYXRoPVtdLGUucXVlcnk9bnVsbCxlLmZyYWdtZW50PW51bGwsZS5jYW5ub3RCZUFCYXNlVVJMPSExLHQ9dC5yZXBsYWNlKHJfLFwiXCIpKSx0PXQucmVwbGFjZShhXyxcIlwiKSxyPW1uKHQpO2w8PXIubGVuZ3RoOyl7c3dpdGNoKGE9cltsXSxjKXtjYXNlIERfOmlmKCFhfHwhemYudGVzdChhKSl7aWYobilyZXR1cm5cIkludmFsaWQgc2NoZW1lXCI7Yz1FXztjb250aW51ZX1kKz1hLnRvTG93ZXJDYXNlKCksYz1TXzticmVhaztjYXNlIFNfOmlmKGEmJihKZi50ZXN0KGEpfHxcIitcIj09YXx8XCItXCI9PWF8fFwiLlwiPT1hKSlkKz1hLnRvTG93ZXJDYXNlKCk7ZWxzZXtpZihcIjpcIiE9YSl7aWYobilyZXR1cm5cIkludmFsaWQgc2NoZW1lXCI7ZD1cIlwiLGM9RV8sbD0wO2NvbnRpbnVlfWlmKG4mJihfXyhlKSE9c2UoZl8sZCl8fFwiZmlsZVwiPT1kJiYobV8oZSl8fG51bGwhPT1lLnBvcnQpfHxcImZpbGVcIj09ZS5zY2hlbWUmJiFlLmhvc3QpKXJldHVybjtpZihlLnNjaGVtZT1kLG4pcmV0dXJuIHZvaWQoX18oZSkmJmZfW2Uuc2NoZW1lXT09ZS5wb3J0JiYoZS5wb3J0PW51bGwpKTtkPVwiXCIsXCJmaWxlXCI9PWUuc2NoZW1lP2M9UF86X18oZSkmJm8mJm8uc2NoZW1lPT1lLnNjaGVtZT9jPUFfOl9fKGUpP2M9TF86XCIvXCI9PXJbbCsxXT8oYz1rXyxsKyspOihlLmNhbm5vdEJlQUJhc2VVUkw9ITAsZS5wYXRoLnB1c2goXCJcIiksYz1WXyl9YnJlYWs7Y2FzZSBFXzppZighb3x8by5jYW5ub3RCZUFCYXNlVVJMJiZcIiNcIiE9YSlyZXR1cm5cIkludmFsaWQgc2NoZW1lXCI7aWYoby5jYW5ub3RCZUFCYXNlVVJMJiZcIiNcIj09YSl7ZS5zY2hlbWU9by5zY2hlbWUsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9by5xdWVyeSxlLmZyYWdtZW50PVwiXCIsZS5jYW5ub3RCZUFCYXNlVVJMPSEwLGM9Ql87YnJlYWt9Yz1cImZpbGVcIj09by5zY2hlbWU/UF86Tl87Y29udGludWU7Y2FzZSBBXzppZihcIi9cIiE9YXx8XCIvXCIhPXJbbCsxXSl7Yz1OXztjb250aW51ZX1jPU9fLGwrKzticmVhaztjYXNlIGtfOmlmKFwiL1wiPT1hKXtjPVJfO2JyZWFrfWM9eF87Y29udGludWU7Y2FzZSBOXzppZihlLnNjaGVtZT1vLnNjaGVtZSxhPT1xZillLnVzZXJuYW1lPW8udXNlcm5hbWUsZS5wYXNzd29yZD1vLnBhc3N3b3JkLGUuaG9zdD1vLmhvc3QsZS5wb3J0PW8ucG9ydCxlLnBhdGg9by5wYXRoLnNsaWNlKCksZS5xdWVyeT1vLnF1ZXJ5O2Vsc2UgaWYoXCIvXCI9PWF8fFwiXFxcXFwiPT1hJiZfXyhlKSljPUNfO2Vsc2UgaWYoXCI/XCI9PWEpZS51c2VybmFtZT1vLnVzZXJuYW1lLGUucGFzc3dvcmQ9by5wYXNzd29yZCxlLmhvc3Q9by5ob3N0LGUucG9ydD1vLnBvcnQsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9XCJcIixjPUtfO2Vsc2V7aWYoXCIjXCIhPWEpe2UudXNlcm5hbWU9by51c2VybmFtZSxlLnBhc3N3b3JkPW8ucGFzc3dvcmQsZS5ob3N0PW8uaG9zdCxlLnBvcnQ9by5wb3J0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxlLnBhdGgucG9wKCksYz14Xztjb250aW51ZX1lLnVzZXJuYW1lPW8udXNlcm5hbWUsZS5wYXNzd29yZD1vLnBhc3N3b3JkLGUuaG9zdD1vLmhvc3QsZS5wb3J0PW8ucG9ydCxlLnBhdGg9by5wYXRoLnNsaWNlKCksZS5xdWVyeT1vLnF1ZXJ5LGUuZnJhZ21lbnQ9XCJcIixjPUJffWJyZWFrO2Nhc2UgQ186aWYoIV9fKGUpfHxcIi9cIiE9YSYmXCJcXFxcXCIhPWEpe2lmKFwiL1wiIT1hKXtlLnVzZXJuYW1lPW8udXNlcm5hbWUsZS5wYXNzd29yZD1vLnBhc3N3b3JkLGUuaG9zdD1vLmhvc3QsZS5wb3J0PW8ucG9ydCxjPXhfO2NvbnRpbnVlfWM9Ul99ZWxzZSBjPU9fO2JyZWFrO2Nhc2UgTF86aWYoYz1PXyxcIi9cIiE9YXx8XCIvXCIhPWQuY2hhckF0KGwrMSkpY29udGludWU7bCsrO2JyZWFrO2Nhc2UgT186aWYoXCIvXCIhPWEmJlwiXFxcXFwiIT1hKXtjPVJfO2NvbnRpbnVlfWJyZWFrO2Nhc2UgUl86aWYoXCJAXCI9PWEpe3AmJihkPVwiJTQwXCIrZCkscD0hMCxzPW1uKGQpO2Zvcih2YXIgZj0wO2Y8cy5sZW5ndGg7ZisrKXt2YXIgXz1zW2ZdO2lmKFwiOlwiIT1ffHxoKXt2YXIgbT1oXyhfLGdfKTtoP2UucGFzc3dvcmQrPW06ZS51c2VybmFtZSs9bX1lbHNlIGg9ITB9ZD1cIlwifWVsc2UgaWYoYT09cWZ8fFwiL1wiPT1hfHxcIj9cIj09YXx8XCIjXCI9PWF8fFwiXFxcXFwiPT1hJiZfXyhlKSl7aWYocCYmXCJcIj09ZClyZXR1cm5cIkludmFsaWQgYXV0aG9yaXR5XCI7bC09bW4oZCkubGVuZ3RoKzEsZD1cIlwiLGM9Yl99ZWxzZSBkKz1hO2JyZWFrO2Nhc2UgYl86Y2FzZSB3XzppZihuJiZcImZpbGVcIj09ZS5zY2hlbWUpe2M9Rl87Y29udGludWV9aWYoXCI6XCIhPWF8fGcpe2lmKGE9PXFmfHxcIi9cIj09YXx8XCI/XCI9PWF8fFwiI1wiPT1hfHxcIlxcXFxcIj09YSYmX18oZSkpe2lmKF9fKGUpJiZcIlwiPT1kKXJldHVyblwiSW52YWxpZCBob3N0XCI7aWYobiYmXCJcIj09ZCYmKG1fKGUpfHxudWxsIT09ZS5wb3J0KSlyZXR1cm47aWYoaT1zXyhlLGQpKXJldHVybiBpO2lmKGQ9XCJcIixjPXFfLG4pcmV0dXJuO2NvbnRpbnVlfVwiW1wiPT1hP2c9ITA6XCJdXCI9PWEmJihnPSExKSxkKz1hfWVsc2V7aWYoXCJcIj09ZClyZXR1cm5cIkludmFsaWQgaG9zdFwiO2lmKGk9c18oZSxkKSlyZXR1cm4gaTtpZihkPVwiXCIsYz1HXyxuPT13XylyZXR1cm59YnJlYWs7Y2FzZSBHXzppZighWGYudGVzdChhKSl7aWYoYT09cWZ8fFwiL1wiPT1hfHxcIj9cIj09YXx8XCIjXCI9PWF8fFwiXFxcXFwiPT1hJiZfXyhlKXx8bil7aWYoXCJcIiE9ZCl7dmFyIHY9cGFyc2VJbnQoZCwxMCk7aWYodj42NTUzNSlyZXR1cm5cIkludmFsaWQgcG9ydFwiO2UucG9ydD1fXyhlKSYmdj09PWZfW2Uuc2NoZW1lXT9udWxsOnYsZD1cIlwifWlmKG4pcmV0dXJuO2M9cV87Y29udGludWV9cmV0dXJuXCJJbnZhbGlkIHBvcnRcIn1kKz1hO2JyZWFrO2Nhc2UgUF86aWYoZS5zY2hlbWU9XCJmaWxlXCIsXCIvXCI9PWF8fFwiXFxcXFwiPT1hKWM9VV87ZWxzZXtpZighb3x8XCJmaWxlXCIhPW8uc2NoZW1lKXtjPXhfO2NvbnRpbnVlfWlmKGE9PXFmKWUuaG9zdD1vLmhvc3QsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9by5xdWVyeTtlbHNlIGlmKFwiP1wiPT1hKWUuaG9zdD1vLmhvc3QsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9XCJcIixjPUtfO2Vsc2V7aWYoXCIjXCIhPWEpe3lfKHIuc2xpY2UobCkuam9pbihcIlwiKSl8fChlLmhvc3Q9by5ob3N0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxJXyhlKSksYz14Xztjb250aW51ZX1lLmhvc3Q9by5ob3N0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxlLnF1ZXJ5PW8ucXVlcnksZS5mcmFnbWVudD1cIlwiLGM9Ql99fWJyZWFrO2Nhc2UgVV86aWYoXCIvXCI9PWF8fFwiXFxcXFwiPT1hKXtjPUZfO2JyZWFrfW8mJlwiZmlsZVwiPT1vLnNjaGVtZSYmIXlfKHIuc2xpY2UobCkuam9pbihcIlwiKSkmJihNXyhvLnBhdGhbMF0sITApP2UucGF0aC5wdXNoKG8ucGF0aFswXSk6ZS5ob3N0PW8uaG9zdCksYz14Xztjb250aW51ZTtjYXNlIEZfOmlmKGE9PXFmfHxcIi9cIj09YXx8XCJcXFxcXCI9PWF8fFwiP1wiPT1hfHxcIiNcIj09YSl7aWYoIW4mJk1fKGQpKWM9eF87ZWxzZSBpZihcIlwiPT1kKXtpZihlLmhvc3Q9XCJcIixuKXJldHVybjtjPXFffWVsc2V7aWYoaT1zXyhlLGQpKXJldHVybiBpO2lmKFwibG9jYWxob3N0XCI9PWUuaG9zdCYmKGUuaG9zdD1cIlwiKSxuKXJldHVybjtkPVwiXCIsYz1xX31jb250aW51ZX1kKz1hO2JyZWFrO2Nhc2UgcV86aWYoX18oZSkpe2lmKGM9eF8sXCIvXCIhPWEmJlwiXFxcXFwiIT1hKWNvbnRpbnVlfWVsc2UgaWYobnx8XCI/XCIhPWEpaWYobnx8XCIjXCIhPWEpe2lmKGEhPXFmJiYoYz14XyxcIi9cIiE9YSkpY29udGludWV9ZWxzZSBlLmZyYWdtZW50PVwiXCIsYz1CXztlbHNlIGUucXVlcnk9XCJcIixjPUtfO2JyZWFrO2Nhc2UgeF86aWYoYT09cWZ8fFwiL1wiPT1hfHxcIlxcXFxcIj09YSYmX18oZSl8fCFuJiYoXCI/XCI9PWF8fFwiI1wiPT1hKSl7aWYoXCIuLlwiPT09KHU9KHU9ZCkudG9Mb3dlckNhc2UoKSl8fFwiJTJlLlwiPT09dXx8XCIuJTJlXCI9PT11fHxcIiUyZSUyZVwiPT09dT8oSV8oZSksXCIvXCI9PWF8fFwiXFxcXFwiPT1hJiZfXyhlKXx8ZS5wYXRoLnB1c2goXCJcIikpOlRfKGQpP1wiL1wiPT1hfHxcIlxcXFxcIj09YSYmX18oZSl8fGUucGF0aC5wdXNoKFwiXCIpOihcImZpbGVcIj09ZS5zY2hlbWUmJiFlLnBhdGgubGVuZ3RoJiZNXyhkKSYmKGUuaG9zdCYmKGUuaG9zdD1cIlwiKSxkPWQuY2hhckF0KDApK1wiOlwiKSxlLnBhdGgucHVzaChkKSksZD1cIlwiLFwiZmlsZVwiPT1lLnNjaGVtZSYmKGE9PXFmfHxcIj9cIj09YXx8XCIjXCI9PWEpKWZvcig7ZS5wYXRoLmxlbmd0aD4xJiZcIlwiPT09ZS5wYXRoWzBdOyllLnBhdGguc2hpZnQoKTtcIj9cIj09YT8oZS5xdWVyeT1cIlwiLGM9S18pOlwiI1wiPT1hJiYoZS5mcmFnbWVudD1cIlwiLGM9Ql8pfWVsc2UgZCs9aF8oYSxwXyk7YnJlYWs7Y2FzZSBWXzpcIj9cIj09YT8oZS5xdWVyeT1cIlwiLGM9S18pOlwiI1wiPT1hPyhlLmZyYWdtZW50PVwiXCIsYz1CXyk6YSE9cWYmJihlLnBhdGhbMF0rPWhfKGEsbF8pKTticmVhaztjYXNlIEtfOm58fFwiI1wiIT1hP2EhPXFmJiYoXCInXCI9PWEmJl9fKGUpP2UucXVlcnkrPVwiJTI3XCI6ZS5xdWVyeSs9XCIjXCI9PWE/XCIlMjNcIjpoXyhhLGxfKSk6KGUuZnJhZ21lbnQ9XCJcIixjPUJfKTticmVhaztjYXNlIEJfOmEhPXFmJiYoZS5mcmFnbWVudCs9aF8oYSxkXykpfWwrK319LGpfPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbz12YSh0aGlzLGpfLFwiVVJMXCIpLHI9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsYT1NdChlKSxzPWpmKG8se3R5cGU6XCJVUkxcIn0pO2lmKHZvaWQgMCE9PXIpaWYociBpbnN0YW5jZW9mIGpfKXQ9WWYocik7ZWxzZSBpZihuPUhfKHQ9e30sTXQocikpKXRocm93IFR5cGVFcnJvcihuKTtpZihuPUhfKHMsYSxudWxsLHQpKXRocm93IFR5cGVFcnJvcihuKTt2YXIgaT1zLnNlYXJjaFBhcmFtcz1uZXcgQmYsdT1IZihpKTt1LnVwZGF0ZVNlYXJjaFBhcmFtcyhzLnF1ZXJ5KSx1LnVwZGF0ZVVSTD1mdW5jdGlvbigpe3MucXVlcnk9U3RyaW5nKGkpfHxudWxsfSxSfHwoby5ocmVmPSRfLmNhbGwobyksby5vcmlnaW49V18uY2FsbChvKSxvLnByb3RvY29sPXpfLmNhbGwobyksby51c2VybmFtZT1KXy5jYWxsKG8pLG8ucGFzc3dvcmQ9WF8uY2FsbChvKSxvLmhvc3Q9UV8uY2FsbChvKSxvLmhvc3RuYW1lPVpfLmNhbGwobyksby5wb3J0PWVtLmNhbGwobyksby5wYXRobmFtZT10bS5jYWxsKG8pLG8uc2VhcmNoPW5tLmNhbGwobyksby5zZWFyY2hQYXJhbXM9b20uY2FsbChvKSxvLmhhc2g9cm0uY2FsbChvKSl9LFlfPWpfLnByb3RvdHlwZSwkXz1mdW5jdGlvbigpe3ZhciBlPVlmKHRoaXMpLHQ9ZS5zY2hlbWUsbj1lLnVzZXJuYW1lLG89ZS5wYXNzd29yZCxyPWUuaG9zdCxhPWUucG9ydCxzPWUucGF0aCxpPWUucXVlcnksdT1lLmZyYWdtZW50LGM9dCtcIjpcIjtyZXR1cm4gbnVsbCE9PXI/KGMrPVwiLy9cIixtXyhlKSYmKGMrPW4rKG8/XCI6XCIrbzpcIlwiKStcIkBcIiksYys9Y18ociksbnVsbCE9PWEmJihjKz1cIjpcIithKSk6XCJmaWxlXCI9PXQmJihjKz1cIi8vXCIpLGMrPWUuY2Fubm90QmVBQmFzZVVSTD9zWzBdOnMubGVuZ3RoP1wiL1wiK3Muam9pbihcIi9cIik6XCJcIixudWxsIT09aSYmKGMrPVwiP1wiK2kpLG51bGwhPT11JiYoYys9XCIjXCIrdSksY30sV189ZnVuY3Rpb24oKXt2YXIgZT1ZZih0aGlzKSx0PWUuc2NoZW1lLG49ZS5wb3J0O2lmKFwiYmxvYlwiPT10KXRyeXtyZXR1cm4gbmV3IGpfKHQucGF0aFswXSkub3JpZ2lufWNhdGNoKGN5KXtyZXR1cm5cIm51bGxcIn1yZXR1cm5cImZpbGVcIiE9dCYmX18oZSk/dCtcIjovL1wiK2NfKGUuaG9zdCkrKG51bGwhPT1uP1wiOlwiK246XCJcIik6XCJudWxsXCJ9LHpfPWZ1bmN0aW9uKCl7cmV0dXJuIFlmKHRoaXMpLnNjaGVtZStcIjpcIn0sSl89ZnVuY3Rpb24oKXtyZXR1cm4gWWYodGhpcykudXNlcm5hbWV9LFhfPWZ1bmN0aW9uKCl7cmV0dXJuIFlmKHRoaXMpLnBhc3N3b3JkfSxRXz1mdW5jdGlvbigpe3ZhciBlPVlmKHRoaXMpLHQ9ZS5ob3N0LG49ZS5wb3J0O3JldHVybiBudWxsPT09dD9cIlwiOm51bGw9PT1uP2NfKHQpOmNfKHQpK1wiOlwiK259LFpfPWZ1bmN0aW9uKCl7dmFyIGU9WWYodGhpcykuaG9zdDtyZXR1cm4gbnVsbD09PWU/XCJcIjpjXyhlKX0sZW09ZnVuY3Rpb24oKXt2YXIgZT1ZZih0aGlzKS5wb3J0O3JldHVybiBudWxsPT09ZT9cIlwiOlN0cmluZyhlKX0sdG09ZnVuY3Rpb24oKXt2YXIgZT1ZZih0aGlzKSx0PWUucGF0aDtyZXR1cm4gZS5jYW5ub3RCZUFCYXNlVVJMP3RbMF06dC5sZW5ndGg/XCIvXCIrdC5qb2luKFwiL1wiKTpcIlwifSxubT1mdW5jdGlvbigpe3ZhciBlPVlmKHRoaXMpLnF1ZXJ5O3JldHVybiBlP1wiP1wiK2U6XCJcIn0sb209ZnVuY3Rpb24oKXtyZXR1cm4gWWYodGhpcykuc2VhcmNoUGFyYW1zfSxybT1mdW5jdGlvbigpe3ZhciBlPVlmKHRoaXMpLmZyYWdtZW50O3JldHVybiBlP1wiI1wiK2U6XCJcIn0sYW09ZnVuY3Rpb24oZSx0KXtyZXR1cm57Z2V0OmUsc2V0OnQsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9fTtpZihSJiZSdChZXyx7aHJlZjphbSgkXywoZnVuY3Rpb24oZSl7dmFyIHQ9WWYodGhpcyksbj1NdChlKSxvPUhfKHQsbik7aWYobyl0aHJvdyBUeXBlRXJyb3Iobyk7SGYodC5zZWFyY2hQYXJhbXMpLnVwZGF0ZVNlYXJjaFBhcmFtcyh0LnF1ZXJ5KX0pKSxvcmlnaW46YW0oV18pLHByb3RvY29sOmFtKHpfLChmdW5jdGlvbihlKXt2YXIgdD1ZZih0aGlzKTtIXyh0LE10KGUpK1wiOlwiLERfKX0pKSx1c2VybmFtZTphbShKXywoZnVuY3Rpb24oZSl7dmFyIHQ9WWYodGhpcyksbj1tbihNdChlKSk7aWYoIXZfKHQpKXt0LnVzZXJuYW1lPVwiXCI7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdC51c2VybmFtZSs9aF8obltvXSxnXyl9fSkpLHBhc3N3b3JkOmFtKFhfLChmdW5jdGlvbihlKXt2YXIgdD1ZZih0aGlzKSxuPW1uKE10KGUpKTtpZighdl8odCkpe3QucGFzc3dvcmQ9XCJcIjtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0LnBhc3N3b3JkKz1oXyhuW29dLGdfKX19KSksaG9zdDphbShRXywoZnVuY3Rpb24oZSl7dmFyIHQ9WWYodGhpcyk7dC5jYW5ub3RCZUFCYXNlVVJMfHxIXyh0LE10KGUpLGJfKX0pKSxob3N0bmFtZTphbShaXywoZnVuY3Rpb24oZSl7dmFyIHQ9WWYodGhpcyk7dC5jYW5ub3RCZUFCYXNlVVJMfHxIXyh0LE10KGUpLHdfKX0pKSxwb3J0OmFtKGVtLChmdW5jdGlvbihlKXt2YXIgdD1ZZih0aGlzKTt2Xyh0KXx8KFwiXCI9PShlPU10KGUpKT90LnBvcnQ9bnVsbDpIXyh0LGUsR18pKX0pKSxwYXRobmFtZTphbSh0bSwoZnVuY3Rpb24oZSl7dmFyIHQ9WWYodGhpcyk7dC5jYW5ub3RCZUFCYXNlVVJMfHwodC5wYXRoPVtdLEhfKHQsTXQoZSkscV8pKX0pKSxzZWFyY2g6YW0obm0sKGZ1bmN0aW9uKGUpe3ZhciB0PVlmKHRoaXMpO1wiXCI9PShlPU10KGUpKT90LnF1ZXJ5PW51bGw6KFwiP1wiPT1lLmNoYXJBdCgwKSYmKGU9ZS5zbGljZSgxKSksdC5xdWVyeT1cIlwiLEhfKHQsZSxLXykpLEhmKHQuc2VhcmNoUGFyYW1zKS51cGRhdGVTZWFyY2hQYXJhbXModC5xdWVyeSl9KSksc2VhcmNoUGFyYW1zOmFtKG9tKSxoYXNoOmFtKHJtLChmdW5jdGlvbihlKXt2YXIgdD1ZZih0aGlzKTtcIlwiIT0oZT1NdChlKSk/KFwiI1wiPT1lLmNoYXJBdCgwKSYmKGU9ZS5zbGljZSgxKSksdC5mcmFnbWVudD1cIlwiLEhfKHQsZSxCXykpOnQuZnJhZ21lbnQ9bnVsbH0pKX0pLEhlKFlfLFwidG9KU09OXCIsKGZ1bmN0aW9uKCl7cmV0dXJuICRfLmNhbGwodGhpcyl9KSx7ZW51bWVyYWJsZTohMH0pLEhlKFlfLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gJF8uY2FsbCh0aGlzKX0pLHtlbnVtZXJhYmxlOiEwfSksS2Ype3ZhciBzbT1LZi5jcmVhdGVPYmplY3RVUkwsaW09S2YucmV2b2tlT2JqZWN0VVJMO3NtJiZIZShqXyxcImNyZWF0ZU9iamVjdFVSTFwiLChmdW5jdGlvbihlKXtyZXR1cm4gc20uYXBwbHkoS2YsYXJndW1lbnRzKX0pKSxpbSYmSGUoal8sXCJyZXZva2VPYmplY3RVUkxcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGltLmFwcGx5KEtmLGFyZ3VtZW50cyl9KSl9Rm4oal8sXCJVUkxcIiksdnQoe2dsb2JhbDohMCxmb3JjZWQ6IWVmLHNoYW06IVJ9LHtVUkw6al99KSx2dCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6T2JqZWN0LmFzc2lnbiE9PW9mfSx7YXNzaWduOm9mfSk7dmFyIHVtPXtKU09OOntUWVBFOntDMkM6e05PVElDRToxLENPTU1PTjo5LEVWRU5UOjEwfSxHUk9VUDp7Q09NTU9OOjMsVElQOjQsU1lTVEVNOjUsVElQMjo2fSxGUklFTkQ6e05PVElDRTo3fSxQUk9GSUxFOntOT1RJQ0U6OH19LFNVQlRZUEU6e0MyQzp7Q09NTU9OOjAsUkVBREVEOjkyLEtJQ0tFRE9VVDo5Nn0sR1JPVVA6e0NPTU1PTjowLExPVkVNRVNTQUdFOjEsVElQOjIsUkVEUEFDS0VUOjN9fSxPUFRJT05TOntHUk9VUDp7Sk9JTjoxLFFVSVQ6MixLSUNLOjMsU0VUX0FETUlOOjQsQ0FOQ0VMX0FETUlOOjUsTU9ESUZZX0dST1VQX0lORk86NixNT0RJRllfTUVNQkVSX0lORk86N319fSxQUk9UT0JVRjp7fSxJTUFHRV9UWVBFUzp7T1JJR0lOOjEsTEFSR0U6MixTTUFMTDozfSxJTUFHRV9GT1JNQVQ6e0pQRzoxLEpQRUc6MSxHSUY6MixQTkc6MyxCTVA6NCxVTktOT1dOOjI1NX19LGNtPXtOSUNLOlwiVGFnX1Byb2ZpbGVfSU1fTmlja1wiLEdFTkRFUjpcIlRhZ19Qcm9maWxlX0lNX0dlbmRlclwiLEJJUlRIREFZOlwiVGFnX1Byb2ZpbGVfSU1fQmlydGhEYXlcIixMT0NBVElPTjpcIlRhZ19Qcm9maWxlX0lNX0xvY2F0aW9uXCIsU0VMRlNJR05BVFVSRTpcIlRhZ19Qcm9maWxlX0lNX1NlbGZTaWduYXR1cmVcIixBTExPV1RZUEU6XCJUYWdfUHJvZmlsZV9JTV9BbGxvd1R5cGVcIixMQU5HVUFHRTpcIlRhZ19Qcm9maWxlX0lNX0xhbmd1YWdlXCIsQVZBVEFSOlwiVGFnX1Byb2ZpbGVfSU1fSW1hZ2VcIixNRVNTQUdFU0VUVElOR1M6XCJUYWdfUHJvZmlsZV9JTV9Nc2dTZXR0aW5nc1wiLEFETUlORk9SQklEVFlQRTpcIlRhZ19Qcm9maWxlX0lNX0FkbWluRm9yYmlkVHlwZVwiLExFVkVMOlwiVGFnX1Byb2ZpbGVfSU1fTGV2ZWxcIixST0xFOlwiVGFnX1Byb2ZpbGVfSU1fUm9sZVwifSxsbT17R1JPVVA6XCJUYWdfU05TX0lNX0dyb3VwXCIsUkVNQVJLOlwiVGFnX1NOU19JTV9SZW1hcmtcIixBRERTT1VSQ0U6XCJUYWdfU05TX0lNX0FkZFNvdXJjZVwiLEFERFdPUkRJTkc6XCJUYWdfU05TX0lNX0FkZFdvcmRpbmdcIixBRERUSU1FOlwiVGFnX1NOU19JTV9BZGRUaW1lXCJ9LGRtPXtVTktOT1dOOlwiR2VuZGVyX1R5cGVfVW5rbm93blwiLEZFTUFMRTpcIkdlbmRlcl9UeXBlX0ZlbWFsZVwiLE1BTEU6XCJHZW5kZXJfVHlwZV9NYWxlXCJ9LHBtPXtOT05FOlwiQWRtaW5Gb3JiaWRfVHlwZV9Ob25lXCIsU0VORF9PVVQ6XCJBZG1pbkZvcmJpZF9UeXBlX1NlbmRPdXRcIn0sZ209e05FRURfQ09ORklSTTpcIkFsbG93VHlwZV9UeXBlX05lZWRDb25maXJtXCIsQUxMT1dfQU5ZOlwiQWxsb3dUeXBlX1R5cGVfQWxsb3dBbnlcIixERU5ZX0FOWTpcIkFsbG93VHlwZV9UeXBlX0RlbnlBbnlcIn0saG09XCJKb2luZWRTdWNjZXNzXCIsZm09XCJXYWl0QWRtaW5BcHByb3ZhbFwiLF9tPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5faW1hZ2VNZW1vcnlVUkw9XCJcIixhaT90aGlzLmNyZWF0ZUltYWdlRGF0YUFTVVJMSW5XWE1pbmlBcHAodC5maWxlKTp0aGlzLmNyZWF0ZUltYWdlRGF0YUFTVVJMSW5XZWIodC5maWxlKSx0aGlzLl9pbml0SW1hZ2VJbmZvTW9kZWwoKSx0aGlzLnR5cGU9cm8uTVNHX0lNQUdFLHRoaXMuX3BlcmNlbnQ9MCx0aGlzLmNvbnRlbnQ9e2ltYWdlRm9ybWF0OnQuaW1hZ2VGb3JtYXR8fHVtLklNQUdFX0ZPUk1BVC5VTktOT1dOLHV1aWQ6dC51dWlkLGltYWdlSW5mb0FycmF5OltdfSx0aGlzLmluaXRJbWFnZUluZm9BcnJheSh0LmltYWdlSW5mb0FycmF5KSx0aGlzLl9kZWZhdWx0SW1hZ2U9XCJodHRwOi8vaW1nY2FjaGUucXEuY29tL29wZW4vcWNsb3VkL3ZpZGVvL2FjdC93ZWJpbS1pbWFnZXMvZGVmYXVsdC5qcGdcIix0aGlzLl9hdXRvRml4VXJsKCl9cmV0dXJuIGEoZSxbe2tleTpcIl9pbml0SW1hZ2VJbmZvTW9kZWxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fSW1hZ2VJbmZvTW9kZWw9ZnVuY3Rpb24odCl7dGhpcy5pbnN0YW5jZUlEPWl1KDk5OTk5OTkpLHRoaXMuc2l6ZVR5cGU9dC50eXBlfHwwLHRoaXMudHlwZT0wLHRoaXMuc2l6ZT10LnNpemV8fDAsdGhpcy53aWR0aD10LndpZHRofHwwLHRoaXMuaGVpZ2h0PXQuaGVpZ2h0fHwwLHRoaXMuaW1hZ2VVcmw9dC51cmx8fFwiXCIsdGhpcy51cmw9dC51cmx8fGUuX2ltYWdlTWVtb3J5VVJMfHxlLl9kZWZhdWx0SW1hZ2V9LHRoaXMuX0ltYWdlSW5mb01vZGVsLnByb3RvdHlwZT17c2V0U2l6ZVR5cGU6ZnVuY3Rpb24oZSl7dGhpcy5zaXplVHlwZT1lfSxzZXRUeXBlOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1lfSxzZXRJbWFnZVVybDpmdW5jdGlvbihlKXtlJiYodGhpcy5pbWFnZVVybD1lKX0sZ2V0SW1hZ2VVcmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbWFnZVVybH19fX0se2tleTpcImluaXRJbWFnZUluZm9BcnJheVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49bnVsbCxvPW51bGw7dDw9Mjspbz1KaShlKXx8SmkoZVt0XSk/e3R5cGU6MCxzaXplOjAsd2lkdGg6MCxoZWlnaHQ6MCx1cmw6XCJcIn06ZVt0XSwobj1uZXcgdGhpcy5fSW1hZ2VJbmZvTW9kZWwobykpLnNldFNpemVUeXBlKHQrMSksbi5zZXRUeXBlKHQpLHRoaXMuYWRkSW1hZ2VJbmZvKG4pLHQrKzt0aGlzLnVwZGF0ZUFjY2Vzc1NpZGVJbWFnZUluZm9BcnJheSgpfX0se2tleTpcInVwZGF0ZUltYWdlSW5mb0FycmF5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5Lmxlbmd0aCxvPTA7bzxuO28rKyl0PXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVtvXSxlW29dLnNpemUmJih0LnNpemU9ZVtvXS5zaXplKSxlW29dLnVybCYmdC5zZXRJbWFnZVVybChlW29dLnVybCksZVtvXS53aWR0aCYmKHQud2lkdGg9ZVtvXS53aWR0aCksZVtvXS5oZWlnaHQmJih0LmhlaWdodD1lW29dLmhlaWdodCl9fSx7a2V5OlwiX2F1dG9GaXhVcmxcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXkubGVuZ3RoLHQ9XCJcIixuPVwiXCIsbz1bXCJodHRwXCIsXCJodHRwc1wiXSxyPW51bGwsYT0wO2E8ZTthKyspdGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5W2FdLnVybCYmXCJcIiE9PShyPXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVthXSkuaW1hZ2VVcmwmJihuPXIuaW1hZ2VVcmwuc2xpY2UoMCxyLmltYWdlVXJsLmluZGV4T2YoXCI6Ly9cIikrMSksdD1yLmltYWdlVXJsLnNsaWNlKHIuaW1hZ2VVcmwuaW5kZXhPZihcIjovL1wiKSsxKSxvLmluZGV4T2Yobik8MCYmKG49XCJodHRwczpcIiksdGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5W2FdLnNldEltYWdlVXJsKFtuLHRdLmpvaW4oXCJcIikpKX19LHtrZXk6XCJ1cGRhdGVQZXJjZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcGVyY2VudD1lLHRoaXMuX3BlcmNlbnQ+MSYmKHRoaXMuX3BlcmNlbnQ9MSl9fSx7a2V5OlwidXBkYXRlSW1hZ2VGb3JtYXRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbnRlbnQuaW1hZ2VGb3JtYXQ9dW0uSU1BR0VfRk9STUFUW2UudG9VcHBlckNhc2UoKV18fHVtLklNQUdFX0ZPUk1BVC5VTktOT1dOfX0se2tleTpcImNyZWF0ZUltYWdlRGF0YUFTVVJMSW5XZWJcIix2YWx1ZTpmdW5jdGlvbihlKXt2b2lkIDAhPT1lJiZlLmZpbGVzLmxlbmd0aD4wJiYodGhpcy5faW1hZ2VNZW1vcnlVUkw9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZS5maWxlc1swXSkpfX0se2tleTpcImNyZWF0ZUltYWdlRGF0YUFTVVJMSW5XWE1pbmlBcHBcIix2YWx1ZTpmdW5jdGlvbihlKXtlJiZlLnVybCYmKHRoaXMuX2ltYWdlTWVtb3J5VVJMPWUudXJsKX19LHtrZXk6XCJyZXBsYWNlSW1hZ2VJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXlbdF1pbnN0YW5jZW9mIHRoaXMuX0ltYWdlSW5mb01vZGVsfHwodGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5W3RdPWUpfX0se2tleTpcImFkZEltYWdlSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY29udGVudC5pbWFnZUluZm9BcnJheS5sZW5ndGg+PTN8fHRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheS5wdXNoKGUpfX0se2tleTpcInVwZGF0ZUFjY2Vzc1NpZGVJbWFnZUluZm9BcnJheVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5LHQ9ZVswXSxuPXQud2lkdGgsbz12b2lkIDA9PT1uPzA6bixyPXQuaGVpZ2h0LGE9dm9pZCAwPT09cj8wOnI7MCE9PW8mJjAhPT1hJiYoRXUoZSksT2JqZWN0LmFzc2lnbihlWzJdLFN1KHtvcmlnaW5XaWR0aDpvLG9yaWdpbkhlaWdodDphLG1pbjo3MjB9KSkpfX0se2tleTpcInNlbmRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheS5sZW5ndGgmJihcIlwiIT09dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5WzBdLmltYWdlVXJsJiYwIT09dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5WzBdLnNpemUpfX1dKSxlfSgpLG1tPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy50eXBlPXJvLk1TR19GQUNFLHRoaXMuY29udGVudD10fHxudWxsfXJldHVybiBhKGUsW3trZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmNvbnRlbnR9fV0pLGV9KCksdm09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLnR5cGU9cm8uTVNHX0FVRElPLHRoaXMuX3BlcmNlbnQ9MCx0aGlzLmNvbnRlbnQ9e2Rvd25sb2FkRmxhZzoyLHNlY29uZDp0LnNlY29uZCxzaXplOnQuc2l6ZSx1cmw6dC51cmwscmVtb3RlQXVkaW9Vcmw6dC51cmx8fFwiXCIsdXVpZDp0LnV1aWR9fXJldHVybiBhKGUsW3trZXk6XCJ1cGRhdGVQZXJjZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcGVyY2VudD1lLHRoaXMuX3BlcmNlbnQ+MSYmKHRoaXMuX3BlcmNlbnQ9MSl9fSx7a2V5OlwidXBkYXRlQXVkaW9VcmxcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbnRlbnQucmVtb3RlQXVkaW9Vcmw9ZX19LHtrZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJcIiE9PXRoaXMuY29udGVudC5yZW1vdGVBdWRpb1VybH19XSksZX0oKTt2dCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6IVIsc2hhbTohUn0se2RlZmluZVByb3BlcnR5OkVlLmZ9KTt2YXIgTW09e2Zyb206ITAsZ3JvdXBJRDohMCxncm91cE5hbWU6ITAsdG86ITB9LHltPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy50eXBlPXJvLk1TR19HUlBfVElQLHRoaXMuY29udGVudD17fSx0aGlzLl9pbml0Q29udGVudCh0KX1yZXR1cm4gYShlLFt7a2V5OlwiX2luaXRDb250ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXtzd2l0Y2gobil7Y2FzZVwicmVtYXJrSW5mb1wiOmJyZWFrO2Nhc2VcImdyb3VwUHJvZmlsZVwiOnQuY29udGVudC5ncm91cFByb2ZpbGU9e30sdC5faW5pdEdyb3VwUHJvZmlsZShlW25dKTticmVhaztjYXNlXCJvcGVyYXRvckluZm9cIjpjYXNlXCJtZW1iZXJJbmZvTGlzdFwiOmJyZWFrO2Nhc2VcIm1zZ01lbWJlckluZm9cIjp0LmNvbnRlbnQubWVtYmVyTGlzdD1lW25dLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LmNvbnRlbnQsXCJtc2dNZW1iZXJJbmZvXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBLaS53YXJuKFwiISEhIOemgeiogOeahOe+pOaPkOekuua2iOaBr+S4reeahCBwYXlsb2FkLm1zZ01lbWJlckluZm8g5bGe5oCn5Y2z5bCG5bqf5byD77yM6K+35L2/55SoIHBheWxvYWQubWVtYmVyTGlzdCDlsZ7mgKfmm7/ku6PjgIIgXFxuXCIsXCJtc2dNZW1iZXJJbmZvIOS4reeahCBzaHV0dXBUaW1lIOWxnuaAp+WvueW6lOabtOaUueS4uiBtZW1iZXJMaXN0IOS4reeahCBtdXRlVGltZSDlsZ7mgKfvvIzooajnpLrnpoHoqIDml7bplb/jgIIgXFxuXCIsXCLlj4LogIPvvJrnvqTmj5DnpLrmtojmga8gaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL01lc3NhZ2UuaHRtbCMuR3JvdXBUaXBQYXlsb2FkXCIpLHQuY29udGVudC5tZW1iZXJMaXN0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3VzZXJJRDplLnVzZXJJRCxzaHV0dXBUaW1lOmUubXV0ZVRpbWV9fSkpfX0pO2JyZWFrO2Nhc2VcIm9ubGluZU1lbWJlckluZm9cIjpicmVhaztjYXNlXCJtZW1iZXJOdW1cIjp0LmNvbnRlbnRbbl09ZVtuXSx0LmNvbnRlbnQubWVtYmVyQ291bnQ9ZVtuXTticmVhaztkZWZhdWx0OnQuY29udGVudFtuXT1lW25dfX0pKSx0aGlzLmNvbnRlbnQudXNlcklETGlzdHx8KHRoaXMuY29udGVudC51c2VySURMaXN0PVt0aGlzLmNvbnRlbnQub3BlcmF0b3JJRF0pfX0se2tleTpcIl9pbml0R3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIG89dFtuXTtNbVtvXSYmKHRoaXMuY29udGVudC5ncm91cFByb2ZpbGVbb109ZVtvXSl9fX1dKSxlfSgpLEltPXtmcm9tOiEwLGdyb3VwSUQ6ITAsZ3JvdXBOYW1lOiEwLHRvOiEwfSxUbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMudHlwZT1yby5NU0dfR1JQX1NZU19OT1RJQ0UsdGhpcy5jb250ZW50PXt9LHRoaXMuX2luaXRDb250ZW50KHQpfXJldHVybiBhKGUsW3trZXk6XCJfaW5pdENvbnRlbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO09iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3N3aXRjaChuKXtjYXNlXCJtZW1iZXJJbmZvTGlzdFwiOmJyZWFrO2Nhc2VcInJlbWFya0luZm9cIjp0LmNvbnRlbnQuaGFuZGxlTWVzc2FnZT1lW25dO2JyZWFrO2Nhc2VcImdyb3VwUHJvZmlsZVwiOnQuY29udGVudC5ncm91cFByb2ZpbGU9e30sdC5faW5pdEdyb3VwUHJvZmlsZShlW25dKTticmVhaztkZWZhdWx0OnQuY29udGVudFtuXT1lW25dfX0pKX19LHtrZXk6XCJfaW5pdEdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBvPXRbbl07SW1bb10mJihcImdyb3VwTmFtZVwiPT09bz90aGlzLmNvbnRlbnQuZ3JvdXBQcm9maWxlLm5hbWU9ZVtvXTp0aGlzLmNvbnRlbnQuZ3JvdXBQcm9maWxlW29dPWVbb10pfX19XSksZX0oKSxEbT1NYXRoLm1pbixTbT1bXS5sYXN0SW5kZXhPZixFbT0hIVNtJiYxL1sxXS5sYXN0SW5kZXhPZigxLC0wKTwwLEFtPVd0KFwibGFzdEluZGV4T2ZcIiksa209RW18fCFBbT9mdW5jdGlvbihlKXtpZihFbSlyZXR1cm4gU20uYXBwbHkodGhpcyxhcmd1bWVudHMpfHwwO3ZhciB0PUsodGhpcyksbj16ZSh0Lmxlbmd0aCksbz1uLTE7Zm9yKGFyZ3VtZW50cy5sZW5ndGg+MSYmKG89RG0obywkZShhcmd1bWVudHNbMV0pKSksbzwwJiYobz1uK28pO28+PTA7by0tKWlmKG8gaW4gdCYmdFtvXT09PWUpcmV0dXJuIG98fDA7cmV0dXJuLTF9OlNtO3Z0KHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDprbSE9PVtdLmxhc3RJbmRleE9mfSx7bGFzdEluZGV4T2Y6a219KTt2YXIgTm09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLnR5cGU9cm8uTVNHX0ZJTEUsdGhpcy5fcGVyY2VudD0wO3ZhciBuPXRoaXMuX2dldEZpbGVJbmZvKHQpO3RoaXMuY29udGVudD17ZG93bmxvYWRGbGFnOjIsZmlsZVVybDp0LnVybHx8XCJcIix1dWlkOnQudXVpZCxmaWxlTmFtZTpuLm5hbWV8fFwiXCIsZmlsZVNpemU6bi5zaXplfHwwfX1yZXR1cm4gYShlLFt7a2V5OlwiX2dldEZpbGVJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZS5maWxlTmFtZSYmZS5maWxlU2l6ZSlyZXR1cm57c2l6ZTplLmZpbGVTaXplLG5hbWU6ZS5maWxlTmFtZX07aWYoYWkpcmV0dXJue307dmFyIHQ9ZS5maWxlLmZpbGVzWzBdO3JldHVybntzaXplOnQuc2l6ZSxuYW1lOnQubmFtZSx0eXBlOnQudHlwZS5zbGljZSh0LnR5cGUubGFzdEluZGV4T2YoXCIvXCIpKzEpLnRvTG93ZXJDYXNlKCl9fX0se2tleTpcInVwZGF0ZVBlcmNlbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9wZXJjZW50PWUsdGhpcy5fcGVyY2VudD4xJiYodGhpcy5fcGVyY2VudD0xKX19LHtrZXk6XCJ1cGRhdGVGaWxlVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jb250ZW50LmZpbGVVcmw9ZX19LHtrZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJcIiE9PXRoaXMuY29udGVudC5maWxlVXJsJiYoXCJcIiE9PXRoaXMuY29udGVudC5maWxlTmFtZSYmMCE9PXRoaXMuY29udGVudC5maWxlU2l6ZSl9fV0pLGV9KCksQ209ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLnR5cGU9cm8uTVNHX0NVU1RPTSx0aGlzLmNvbnRlbnQ9e2RhdGE6dC5kYXRhfHxcIlwiLGRlc2NyaXB0aW9uOnQuZGVzY3JpcHRpb258fFwiXCIsZXh0ZW5zaW9uOnQuZXh0ZW5zaW9ufHxcIlwifX1yZXR1cm4gYShlLFt7a2V5Olwic2V0RGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbnRlbnQuZGF0YT1lLHRoaXN9fSx7a2V5Olwic2V0RGVzY3JpcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb250ZW50LmRlc2NyaXB0aW9uPWUsdGhpc319LHtrZXk6XCJzZXRFeHRlbnNpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb250ZW50LmV4dGVuc2lvbj1lLHRoaXN9fSx7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy5jb250ZW50LmRhdGEubGVuZ3RofHwwIT09dGhpcy5jb250ZW50LmRlc2NyaXB0aW9uLmxlbmd0aHx8MCE9PXRoaXMuY29udGVudC5leHRlbnNpb24ubGVuZ3RofX1dKSxlfSgpLExtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy50eXBlPXJvLk1TR19WSURFTyx0aGlzLl9wZXJjZW50PTAsdGhpcy5jb250ZW50PXtyZW1vdGVWaWRlb1VybDp0LnJlbW90ZVZpZGVvVXJsfHx0LnZpZGVvVXJsfHxcIlwiLHZpZGVvRm9ybWF0OnQudmlkZW9Gb3JtYXQsdmlkZW9TZWNvbmQ6cGFyc2VJbnQodC52aWRlb1NlY29uZCwxMCksdmlkZW9TaXplOnQudmlkZW9TaXplLHZpZGVvVXJsOnQudmlkZW9VcmwsdmlkZW9Eb3dubG9hZEZsYWc6Mix2aWRlb1VVSUQ6dC52aWRlb1VVSUQsdGh1bWJVVUlEOnQudGh1bWJVVUlELHRodW1iRm9ybWF0OnQudGh1bWJGb3JtYXQsdGh1bWJXaWR0aDp0LnRodW1iV2lkdGgsdGh1bWJIZWlnaHQ6dC50aHVtYkhlaWdodCx0aHVtYlNpemU6dC50aHVtYlNpemUsdGh1bWJEb3dubG9hZEZsYWc6Mix0aHVtYlVybDp0LnRodW1iVXJsfX1yZXR1cm4gYShlLFt7a2V5OlwidXBkYXRlUGVyY2VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3BlcmNlbnQ9ZSx0aGlzLl9wZXJjZW50PjEmJih0aGlzLl9wZXJjZW50PTEpfX0se2tleTpcInVwZGF0ZVZpZGVvVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuY29udGVudC5yZW1vdGVWaWRlb1VybD1lKX19LHtrZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJcIiE9PXRoaXMuY29udGVudC5yZW1vdGVWaWRlb1VybH19XSksZX0oKSxPbT1mdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLnR5cGU9cm8uTVNHX0dFTyx0aGlzLmNvbnRlbnQ9dH0sUm09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2lmKG8odGhpcyxlKSx0aGlzLmZyb209dC5mcm9tLHRoaXMubWVzc2FnZVNlbmRlcj10LmZyb20sdGhpcy50aW1lPXQudGltZSx0aGlzLm1lc3NhZ2VTZXF1ZW5jZT10LnNlcXVlbmNlLHRoaXMuY2xpZW50U2VxdWVuY2U9dC5jbGllbnRTZXF1ZW5jZXx8dC5zZXF1ZW5jZSx0aGlzLm1lc3NhZ2VSYW5kb209dC5yYW5kb20sdGhpcy5jbG91ZEN1c3RvbURhdGE9dC5jbG91ZEN1c3RvbURhdGF8fFwiXCIsdC5JRCl0aGlzLm5pY2s9dC5uaWNrfHxcIlwiLHRoaXMuYXZhdGFyPXQuYXZhdGFyfHxcIlwiLHRoaXMubWVzc2FnZUJvZHk9W3t0eXBlOnQudHlwZSxwYXlsb2FkOnQucGF5bG9hZH1dLHQuY29udmVyc2F0aW9uVHlwZS5zdGFydHNXaXRoKHJvLkNPTlZfQzJDKT90aGlzLnJlY2VpdmVyVXNlcklEPXQudG86dC5jb252ZXJzYXRpb25UeXBlLnN0YXJ0c1dpdGgocm8uQ09OVl9HUk9VUCkmJih0aGlzLnJlY2VpdmVyR3JvdXBJRD10LnRvKSx0aGlzLm1lc3NhZ2VSZWNlaXZlcj10LnRvO2Vsc2V7dGhpcy5uaWNrPXQubmlja3x8XCJcIix0aGlzLmF2YXRhcj10LmF2YXRhcnx8XCJcIix0aGlzLm1lc3NhZ2VCb2R5PVtdO3ZhciBuPXQuZWxlbWVudHNbMF0udHlwZSxyPXQuZWxlbWVudHNbMF0uY29udGVudDt0aGlzLl9wYXRjaFJpY2hNZWRpYVBheWxvYWQobixyKSxuPT09cm8uTVNHX01FUkdFUj90aGlzLm1lc3NhZ2VCb2R5LnB1c2goe3R5cGU6bixwYXlsb2FkOm5ldyBibShyKS5jb250ZW50fSk6dGhpcy5tZXNzYWdlQm9keS5wdXNoKHt0eXBlOm4scGF5bG9hZDpyfSksdC5ncm91cElEJiYodGhpcy5yZWNlaXZlckdyb3VwSUQ9dC5ncm91cElELHRoaXMubWVzc2FnZVJlY2VpdmVyPXQuZ3JvdXBJRCksdC50byYmKHRoaXMucmVjZWl2ZXJVc2VySUQ9dC50byx0aGlzLm1lc3NhZ2VSZWNlaXZlcj10LnRvKX19cmV0dXJuIGEoZSxbe2tleTpcIl9wYXRjaFJpY2hNZWRpYVBheWxvYWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2U9PT1yby5NU0dfSU1BR0U/dC5pbWFnZUluZm9BcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXshZS5pbWFnZVVybCYmZS51cmwmJihlLmltYWdlVXJsPWUudXJsLGUuc2l6ZVR5cGU9ZS50eXBlLDE9PT1lLnR5cGU/ZS50eXBlPTA6Mz09PWUudHlwZSYmKGUudHlwZT0xKSl9KSk6ZT09PXJvLk1TR19WSURFTz8hdC5yZW1vdGVWaWRlb1VybCYmdC52aWRlb1VybCYmKHQucmVtb3RlVmlkZW9Vcmw9dC52aWRlb1VybCk6ZT09PXJvLk1TR19BVURJTz8hdC5yZW1vdGVBdWRpb1VybCYmdC51cmwmJih0LnJlbW90ZUF1ZGlvVXJsPXQudXJsKTplPT09cm8uTVNHX0ZJTEUmJiF0LmZpbGVVcmwmJnQudXJsJiYodC5maWxlVXJsPXQudXJsLHQudXJsPXZvaWQgMCl9fV0pLGV9KCksYm09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2lmKG8odGhpcyxlKSx0aGlzLnR5cGU9cm8uTVNHX01FUkdFUix0aGlzLmNvbnRlbnQ9e2Rvd25sb2FkS2V5OlwiXCIscGJEb3dubG9hZEtleTpcIlwiLG1lc3NhZ2VMaXN0OltdLHRpdGxlOlwiXCIsYWJzdHJhY3RMaXN0OltdLGNvbXBhdGlibGVUZXh0OlwiXCIsdmVyc2lvbjowLGxheWVyc092ZXJMaW1pdDohMX0sdC5kb3dubG9hZEtleSl7dmFyIG49dC5kb3dubG9hZEtleSxyPXQucGJEb3dubG9hZEtleSxhPXQudGl0bGUscz10LmFic3RyYWN0TGlzdCxpPXQuY29tcGF0aWJsZVRleHQsdT10LnZlcnNpb247dGhpcy5jb250ZW50LmRvd25sb2FkS2V5PW4sdGhpcy5jb250ZW50LnBiRG93bmxvYWRLZXk9cix0aGlzLmNvbnRlbnQudGl0bGU9YSx0aGlzLmNvbnRlbnQuYWJzdHJhY3RMaXN0PXMsdGhpcy5jb250ZW50LmNvbXBhdGlibGVUZXh0PWksdGhpcy5jb250ZW50LnZlcnNpb249dXx8MH1lbHNlIGlmKE91KHQubWVzc2FnZUxpc3QpKTE9PT10LmxheWVyc092ZXJMaW1pdCYmKHRoaXMuY29udGVudC5sYXllcnNPdmVyTGltaXQ9ITApO2Vsc2V7dmFyIGM9dC5tZXNzYWdlTGlzdCxsPXQudGl0bGUsZD10LmFic3RyYWN0TGlzdCxwPXQuY29tcGF0aWJsZVRleHQsZz10LnZlcnNpb24saD1bXTtjLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKCFPdShlKSl7dmFyIHQ9bmV3IFJtKGUpO2gucHVzaCh0KX19KSksdGhpcy5jb250ZW50Lm1lc3NhZ2VMaXN0PWgsdGhpcy5jb250ZW50LnRpdGxlPWwsdGhpcy5jb250ZW50LmFic3RyYWN0TGlzdD1kLHRoaXMuY29udGVudC5jb21wYXRpYmxlVGV4dD1wLHRoaXMuY29udGVudC52ZXJzaW9uPWd8fDB9S2kuZGVidWcoXCJNZXJnZXJFbGVtZW50LmNvbnRlbnQ6XCIsdGhpcy5jb250ZW50KX1yZXR1cm4gYShlLFt7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiFPdSh0aGlzLmNvbnRlbnQubWVzc2FnZUxpc3QpfHwhT3UodGhpcy5jb250ZW50LmRvd25sb2FkS2V5KX19XSksZX0oKSx3bT17MTpyby5NU0dfUFJJT1JJVFlfSElHSCwyOnJvLk1TR19QUklPUklUWV9OT1JNQUwsMzpyby5NU0dfUFJJT1JJVFlfTE9XLDQ6cm8uTVNHX1BSSU9SSVRZX0xPV0VTVH0sR209ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLklEPVwiXCIsdGhpcy5jb252ZXJzYXRpb25JRD10LmNvbnZlcnNhdGlvbklEfHxudWxsLHRoaXMuY29udmVyc2F0aW9uVHlwZT10LmNvbnZlcnNhdGlvblR5cGV8fHJvLkNPTlZfQzJDLHRoaXMuY29udmVyc2F0aW9uU3ViVHlwZT10LmNvbnZlcnNhdGlvblN1YlR5cGUsdGhpcy50aW1lPXQudGltZXx8TWF0aC5jZWlsKERhdGUubm93KCkvMWUzKSx0aGlzLnNlcXVlbmNlPXQuc2VxdWVuY2V8fDAsdGhpcy5jbGllbnRTZXF1ZW5jZT10LmNsaWVudFNlcXVlbmNlfHx0LnNlcXVlbmNlfHwwLHRoaXMucmFuZG9tPXQucmFuZG9tfHwwPT09dC5yYW5kb20/dC5yYW5kb206aXUoKSx0aGlzLnByaW9yaXR5PXRoaXMuX2NvbXB1dGVQcmlvcml0eSh0LnByaW9yaXR5KSx0aGlzLm5pY2s9dC5uaWNrfHxcIlwiLHRoaXMuYXZhdGFyPXQuYXZhdGFyfHxcIlwiLHRoaXMuaXNQZWVyUmVhZD0hMSx0aGlzLm5hbWVDYXJkPVwiXCIsdGhpcy5fZWxlbWVudHM9W10sdGhpcy5pc1BsYWNlTWVzc2FnZT10LmlzUGxhY2VNZXNzYWdlfHwwLHRoaXMuaXNSZXZva2VkPTI9PT10LmlzUGxhY2VNZXNzYWdlfHw4PT09dC5tc2dGbGFnQml0cyx0aGlzLmdlbz17fSx0aGlzLmZyb209dC5mcm9tfHxudWxsLHRoaXMudG89dC50b3x8bnVsbCx0aGlzLmZsb3c9XCJcIix0aGlzLmlzU3lzdGVtTWVzc2FnZT10LmlzU3lzdGVtTWVzc2FnZXx8ITEsdGhpcy5wcm90b2NvbD10LnByb3RvY29sfHxcIkpTT05cIix0aGlzLmlzUmVzZW5kPSExLHRoaXMuaXNSZWFkPSExLHRoaXMuc3RhdHVzPXQuc3RhdHVzfHxFYy5TVUNDRVNTLHRoaXMuX29ubGluZU9ubHlGbGFnPSExLHRoaXMuX2dyb3VwQXRJbmZvTGlzdD1bXSx0aGlzLl9yZWxheUZsYWc9ITEsdGhpcy5hdFVzZXJMaXN0PVtdLHRoaXMuY2xvdWRDdXN0b21EYXRhPXQuY2xvdWRDdXN0b21EYXRhfHxcIlwiLHRoaXMuaXNEZWxldGVkPSExLHRoaXMuaXNNb2RpZmllZD0hMSx0aGlzLnJlSW5pdGlhbGl6ZSh0LmN1cnJlbnRVc2VyKSx0aGlzLmV4dHJhY3RHcm91cEluZm8odC5ncm91cFByb2ZpbGV8fG51bGwpLHRoaXMuaGFuZGxlR3JvdXBBdEluZm8odCl9cmV0dXJuIGEoZSxbe2tleTpcImVsZW1lbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEtpLndhcm4oXCLvvIHvvIHvvIFNZXNzYWdlIOWunuS+i+eahCBlbGVtZW50cyDlsZ7mgKfljbPlsIblup/lvIPvvIzor7flsL3lv6vkv67mlLnjgILkvb/nlKggdHlwZSDlkowgcGF5bG9hZCDlsZ7mgKflpITnkIbljZXmnaHmtojmga/vvIzlhbzlrrnnu4TlkIjmtojmga/kvb/nlKggX2VsZW1lbnRzIOWxnuaAp++8ge+8ge+8gVwiKSx0aGlzLl9lbGVtZW50c319LHtrZXk6XCJnZXRFbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VsZW1lbnRzfX0se2tleTpcImV4dHJhY3RHcm91cEluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXtpZihudWxsIT09ZSl7WWkoZS5uaWNrKSYmKHRoaXMubmljaz1lLm5pY2spLFlpKGUuYXZhdGFyKSYmKHRoaXMuYXZhdGFyPWUuYXZhdGFyKTt2YXIgdD1lLm1lc3NhZ2VGcm9tQWNjb3VudEV4dHJhSW5mb3JtYXRpb247V2kodCkmJllpKHQubmFtZUNhcmQpJiYodGhpcy5uYW1lQ2FyZD10Lm5hbWVDYXJkKX19fSx7a2V5OlwiaGFuZGxlR3JvdXBBdEluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UucGF5bG9hZCYmZS5wYXlsb2FkLmF0VXNlckxpc3QmJmUucGF5bG9hZC5hdFVzZXJMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2UhPT1yby5NU0dfQVRfQUxMPyh0Ll9ncm91cEF0SW5mb0xpc3QucHVzaCh7Z3JvdXBBdEFsbEZsYWc6MCxncm91cEF0VXNlcklEOmV9KSx0LmF0VXNlckxpc3QucHVzaChlKSk6KHQuX2dyb3VwQXRJbmZvTGlzdC5wdXNoKHtncm91cEF0QWxsRmxhZzoxfSksdC5hdFVzZXJMaXN0LnB1c2gocm8uTVNHX0FUX0FMTCkpfSkpLHppKGUuZ3JvdXBBdEluZm8pJiZlLmdyb3VwQXRJbmZvLmZvckVhY2goKGZ1bmN0aW9uKGUpezE9PT1lLmdyb3VwQXRBbGxGbGFnP3QuYXRVc2VyTGlzdC5wdXNoKGUuZ3JvdXBBdFVzZXJJRCk6Mj09PWUuZ3JvdXBBdEFsbEZsYWcmJnQuYXRVc2VyTGlzdC5wdXNoKHJvLk1TR19BVF9BTEwpfSkpfX0se2tleTpcImdldEdyb3VwQXRJbmZvTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dyb3VwQXRJbmZvTGlzdH19LHtrZXk6XCJfaW5pdFByb3h5XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50c1swXSYmKHRoaXMucGF5bG9hZD10aGlzLl9lbGVtZW50c1swXS5jb250ZW50LHRoaXMudHlwZT10aGlzLl9lbGVtZW50c1swXS50eXBlKX19LHtrZXk6XCJyZUluaXRpYWxpemVcIix2YWx1ZTpmdW5jdGlvbihlKXtlJiYodGhpcy5zdGF0dXM9dGhpcy5mcm9tP0VjLlNVQ0NFU1M6RWMuVU5TRU5ELCF0aGlzLmZyb20mJih0aGlzLmZyb209ZSkpLHRoaXMuX2luaXRGbG93KGUpLHRoaXMuX2luaXRTZXF1ZW5jZShlKSx0aGlzLl9jb25jYXRDb252ZXJzYXRpb25JRChlKSx0aGlzLmdlbmVyYXRlTWVzc2FnZUlEKGUpfX0se2tleTpcImlzU2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy5fZWxlbWVudHMubGVuZ3RoJiYoXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpcy5fZWxlbWVudHNbMF0uc2VuZGFibGU/KEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fZWxlbWVudHNbMF0udHlwZSwnIG5lZWQgXCJib29sZWFuIDogc2VuZGFibGUoKVwiIG1ldGhvZCcpKSwhMSk6dGhpcy5fZWxlbWVudHNbMF0uc2VuZGFibGUoKSl9fSx7a2V5OlwiX2luaXRUb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfR1JPVVAmJih0aGlzLnRvPWUuZ3JvdXBJRCl9fSx7a2V5OlwiX2luaXRTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpezA9PT10aGlzLmNsaWVudFNlcXVlbmNlJiZlJiYodGhpcy5jbGllbnRTZXF1ZW5jZT1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4gS2kuZXJyb3IoXCJhdXRvSW5jcmVtZW50SW5kZXgoc3RyaW5nOiBrZXkpIG5lZWQga2V5IHBhcmFtZXRlclwiKSwhMTtpZih2b2lkIDA9PT1kdVtlXSl7dmFyIHQ9bmV3IERhdGUsbj1cIjNcIi5jb25jYXQodC5nZXRIb3VycygpKS5zbGljZSgtMiksbz1cIjBcIi5jb25jYXQodC5nZXRNaW51dGVzKCkpLnNsaWNlKC0yKSxyPVwiMFwiLmNvbmNhdCh0LmdldFNlY29uZHMoKSkuc2xpY2UoLTIpO2R1W2VdPXBhcnNlSW50KFtuLG8scixcIjAwMDFcIl0uam9pbihcIlwiKSksbj1udWxsLG89bnVsbCxyPW51bGwsS2kubG9nKFwiYXV0b0luY3JlbWVudEluZGV4IHN0YXJ0IGluZGV4OlwiLmNvbmNhdChkdVtlXSkpfXJldHVybiBkdVtlXSsrfShlKSksMD09PXRoaXMuc2VxdWVuY2UmJnRoaXMuY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfQzJDJiYodGhpcy5zZXF1ZW5jZT10aGlzLmNsaWVudFNlcXVlbmNlKX19LHtrZXk6XCJnZW5lcmF0ZU1lc3NhZ2VJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWU9PT10aGlzLmZyb20/MTowLG49dGhpcy5zZXF1ZW5jZT4wP3RoaXMuc2VxdWVuY2U6dGhpcy5jbGllbnRTZXF1ZW5jZTt0aGlzLklEPVwiXCIuY29uY2F0KHRoaXMuY29udmVyc2F0aW9uSUQsXCItXCIpLmNvbmNhdChuLFwiLVwiKS5jb25jYXQodGhpcy5yYW5kb20sXCItXCIpLmNvbmNhdCh0KX19LHtrZXk6XCJfaW5pdEZsb3dcIix2YWx1ZTpmdW5jdGlvbihlKXtcIlwiIT09ZSYmKGU9PT10aGlzLmZyb20/KHRoaXMuZmxvdz1cIm91dFwiLHRoaXMuaXNSZWFkPSEwKTp0aGlzLmZsb3c9XCJpblwiKX19LHtrZXk6XCJfY29uY2F0Q29udmVyc2F0aW9uSURcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnRvLG49XCJcIixvPXRoaXMuY29udmVyc2F0aW9uVHlwZTtvIT09cm8uQ09OVl9TWVNURU0/KG49bz09PXJvLkNPTlZfQzJDP2U9PT10aGlzLmZyb20/dDp0aGlzLmZyb206dGhpcy50byx0aGlzLmNvbnZlcnNhdGlvbklEPVwiXCIuY29uY2F0KG8pLmNvbmNhdChuKSk6dGhpcy5jb252ZXJzYXRpb25JRD1yby5DT05WX1NZU1RFTX19LHtrZXk6XCJpc0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIFFofHxlIGluc3RhbmNlb2YgX218fGUgaW5zdGFuY2VvZiBtbXx8ZSBpbnN0YW5jZW9mIHZtfHxlIGluc3RhbmNlb2YgTm18fGUgaW5zdGFuY2VvZiBMbXx8ZSBpbnN0YW5jZW9mIHltfHxlIGluc3RhbmNlb2YgVG18fGUgaW5zdGFuY2VvZiBDbXx8ZSBpbnN0YW5jZW9mIE9tfHxlIGluc3RhbmNlb2YgYm19fSx7a2V5Olwic2V0RWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5pc0VsZW1lbnQoZSkpcmV0dXJuIHRoaXMuX2VsZW1lbnRzPVtlXSx2b2lkIHRoaXMuX2luaXRQcm94eSgpO3ZhciBuPWZ1bmN0aW9uKGUpe2lmKGUudHlwZSYmZS5jb250ZW50KXN3aXRjaChlLnR5cGUpe2Nhc2Ugcm8uTVNHX1RFWFQ6dC5zZXRUZXh0RWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2Ugcm8uTVNHX0lNQUdFOnQuc2V0SW1hZ2VFbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSByby5NU0dfQVVESU86dC5zZXRBdWRpb0VsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIHJvLk1TR19GSUxFOnQuc2V0RmlsZUVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIHJvLk1TR19WSURFTzp0LnNldFZpZGVvRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2Ugcm8uTVNHX0NVU1RPTTp0LnNldEN1c3RvbUVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIHJvLk1TR19HRU86dC5zZXRHRU9FbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSByby5NU0dfR1JQX1RJUDp0LnNldEdyb3VwVGlwRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2Ugcm8uTVNHX0dSUF9TWVNfTk9USUNFOnQuc2V0R3JvdXBTeXN0ZW1Ob3RpY2VFbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSByby5NU0dfRkFDRTp0LnNldEZhY2VFbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSByby5NU0dfTUVSR0VSOnQuc2V0TWVyZ2VyRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2RlZmF1bHQ6S2kud2FybihlLnR5cGUsZS5jb250ZW50LFwibm8gb3BlcmF0aW9uLi4uLi4uXCIpfX07aWYoemkoZSkpZm9yKHZhciBvPTA7bzxlLmxlbmd0aDtvKyspbihlW29dKTtlbHNlIG4oZSk7dGhpcy5faW5pdFByb3h5KCl9fSx7a2V5OlwiY2xlYXJFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50cy5sZW5ndGg9MH19LHtrZXk6XCJzZXRUZXh0RWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVwic3RyaW5nXCI9PXR5cGVvZiBlP2U6ZS50ZXh0LG49bmV3IFFoKHt0ZXh0OnR9KTt0aGlzLl9lbGVtZW50cy5wdXNoKG4pfX0se2tleTpcInNldEltYWdlRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBfbShlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfX0se2tleTpcInNldEF1ZGlvRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB2bShlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfX0se2tleTpcInNldEZpbGVFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IE5tKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9fSx7a2V5Olwic2V0VmlkZW9FbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IExtKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9fSx7a2V5Olwic2V0R0VPRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBPbShlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfX0se2tleTpcInNldEN1c3RvbUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgQ20oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRHcm91cFRpcEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxuPWUub3BlcmF0aW9uVHlwZTtPdShlLm1lbWJlckluZm9MaXN0KT9lLm9wZXJhdG9ySW5mbyYmKHQ9ZS5vcGVyYXRvckluZm8pOm4hPT1yby5HUlBfVElQX01CUl9KT0lOJiZuIT09cm8uR1JQX1RJUF9NQlJfS0lDS0VEX09VVCYmbiE9PXJvLkdSUF9USVBfTUJSX1NFVF9BRE1JTiYmbiE9PXJvLkdSUF9USVBfTUJSX0NBTkNFTEVEX0FETUlOfHwodD1lLm1lbWJlckluZm9MaXN0WzBdKTt2YXIgbz10LHI9by5uaWNrLGE9by5hdmF0YXI7WWkocikmJih0aGlzLm5pY2s9ciksWWkoYSkmJih0aGlzLmF2YXRhcj1hKTt2YXIgcz1uZXcgeW0oZSk7dGhpcy5fZWxlbWVudHMucHVzaChzKX19LHtrZXk6XCJzZXRHcm91cFN5c3RlbU5vdGljZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgVG0oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRGYWNlRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBtbShlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfX0se2tleTpcInNldE1lcmdlckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgYm0oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRJc1JlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmlzUmVhZD1lfX0se2tleTpcInNldFJlbGF5RmxhZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3JlbGF5RmxhZz1lfX0se2tleTpcImdldFJlbGF5RmxhZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbGF5RmxhZ319LHtrZXk6XCJzZXRPbmxpbmVPbmx5RmxhZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ubGluZU9ubHlGbGFnPWV9fSx7a2V5OlwiZ2V0T25saW5lT25seUZsYWdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbmxpbmVPbmx5RmxhZ319LHtrZXk6XCJfY29tcHV0ZVByaW9yaXR5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoSmkoZSkpcmV0dXJuIHJvLk1TR19QUklPUklUWV9OT1JNQUw7aWYoWWkoZSkmJi0xIT09T2JqZWN0LnZhbHVlcyh3bSkuaW5kZXhPZihlKSlyZXR1cm4gZTtpZihqaShlKSl7dmFyIHQ9XCJcIitlO2lmKC0xIT09T2JqZWN0LmtleXMod20pLmluZGV4T2YodCkpcmV0dXJuIHdtW3RdfXJldHVybiByby5NU0dfUFJJT1JJVFlfTk9STUFMfX0se2tleTpcInNldE5pY2tBbmRBdmF0YXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm5pY2ssbj1lLmF2YXRhcjtZaSh0KSYmKHRoaXMubmljaz10KSxZaShuKSYmKHRoaXMuYXZhdGFyPW4pfX0se2tleTpcInNldE5hbWVDYXJkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7WWkoZSkmJih0aGlzLm5hbWVDYXJkPWUpfX1dKSxlfSgpLFBtPWZ1bmN0aW9uKGUpe3JldHVybntjb2RlOjAsZGF0YTplfHx7fX19LFVtPVwiaHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kb2N1bWVudC9wcm9kdWN0L1wiLEZtPVwi5oKo5Y+v5Lul5Zyo5Y2z5pe26YCa5L+hIElNIOaOp+WItuWPsOeahOOAkOW8gOWPkei+heWKqeW3peWFtyhodHRwczovL2NvbnNvbGUuY2xvdWQudGVuY2VudC5jb20vaW0tZGV0YWlsL3Rvb2wtdXNlcnNpZynjgJHpobXpnaLmoKHpqowgVXNlclNpZ+OAglwiLHFtPVwiVXNlclNpZyDpnZ7ms5XvvIzor7fkvb/nlKjlrpjnvZHmj5DkvpvnmoQgQVBJIOmHjeaWsOeUn+aIkCBVc2VyU2lnKFwiLmNvbmNhdChVbSxcIjI2OS8zMjY4OCnjgIJcIikseG09XCIjLkU2LkI2Ljg4LkU2LjgxLkFGLkU1Ljg1LjgzLkU3LkI0LkEwLXRpbW1zZ2VsZW1lbnRcIixWbT17NzAwMDE6XCJVc2VyU2lnIOW3sui/h+acn++8jOivt+mHjeaWsOeUn+aIkOOAguW7uuiuriBVc2VyU2lnIOacieaViOacn+iuvue9ruS4jeWwj+S6jjI05bCP5pe244CCXCIsNzAwMDI6XCJVc2VyU2lnIOmVv+W6puS4ujDvvIzor7fmo4Dmn6XkvKDlhaXnmoQgVXNlclNpZyDmmK/lkKbmraPnoa7jgIJcIiw3MDAwMzpxbSw3MDAwNTpxbSw3MDAwOTpcIlVzZXJTaWcg6aqM6K+B5aSx6LSl77yM5Y+v6IO95Zug5Li655Sf5oiQIFVzZXJTaWcg5pe25re355So5LqG5YW25LuWIFNES0FwcElEIOeahOengemSpeaIluWvhumSpeWvvOiHtO+8jOivt+S9v+eUqOWvueW6lCBTREtBcHBJRCDkuIvnmoTnp4HpkqXmiJblr4bpkqXph43mlrDnlJ/miJAgVXNlclNpZyhcIi5jb25jYXQoVW0sXCIyNjkvMzI2ODgp44CCXCIpLDcwMDEzOlwi6K+35rGC5Lit55qEIFVzZXJJRCDkuI7nlJ/miJAgVXNlclNpZyDml7bkvb/nlKjnmoQgVXNlcklEIOS4jeWMuemFjeOAglwiLmNvbmNhdChGbSksNzAwMTQ6XCLor7fmsYLkuK3nmoQgU0RLQXBwSUQg5LiO55Sf5oiQIFVzZXJTaWcg5pe25L2/55So55qEIFNES0FwcElEIOS4jeWMuemFjeOAglwiLmNvbmNhdChGbSksNzAwMTY6XCLlr4bpkqXkuI3lrZjlnKjvvIxVc2VyU2lnIOmqjOivgeWksei0pe+8jOivt+WcqOWNs+aXtumAmuS/oSBJTSDmjqfliLblj7Dojrflj5blr4bpkqUoXCIuY29uY2F0KFVtLFwiMjY5LzMyNTc4Iy5FOC44RS5CNy5FNS44Ri45Ni5FNS5BRi44Ni5FOS45Mi5BNSnjgIJcIiksNzAwMjA6XCJTREtBcHBJRCDmnKrmib7liLDvvIzor7flnKjljbPml7bpgJrkv6EgSU0g5o6n5Yi25Y+w56Gu6K6k5bqU55So5L+h5oGv44CCXCIsNzAwNTA6XCJVc2VyU2lnIOmqjOivgeasoeaVsOi/h+S6jumikee5geOAguivt+ajgOafpSBVc2VyU2lnIOaYr+WQpuato+ehru+8jOW5tuS6jjHliIbpkp/lkI7ph43mlrDpqozor4HjgIJcIi5jb25jYXQoRm0pLDcwMDUxOlwi5biQ5Y+36KKr5ouJ5YWl6buR5ZCN5Y2V44CCXCIsNzAwNTI6XCJVc2VyU2lnIOW3sue7j+WkseaViO+8jOivt+mHjeaWsOeUn+aIkO+8jOWGjeasoeWwneivleOAglwiLDcwMTA3Olwi5Zug5a6J5YWo5Y6f5Zug6KKr6ZmQ5Yi255m75b2V77yM6K+35LiN6KaB6aKR57mB55m75b2V44CCXCIsNzAxNjk6XCLor7fmsYLnmoTnlKjmiLfluJDlj7fkuI3lrZjlnKjjgIJcIiw3MDExNDpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOi2heaXtu+8jOivt+eojeWQjumHjeivleOAglwiKSw3MDIwMjpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOi2heaXtu+8jOivt+eojeWQjumHjeivleOAglwiKSw3MDIwNjpcIuivt+axguS4reaJuemHj+aVsOmHj+S4jeWQiOazleOAglwiLDcwNDAyOlwi5Y+C5pWw6Z2e5rOV77yM6K+35qOA5p+l5b+F5aGr5a2X5q615piv5ZCm5aGr5YWF77yM5oiW6ICF5a2X5q6155qE5aGr5YWF5piv5ZCm5ruh6Laz5Y2P6K6u6KaB5rGC44CCXCIsNzA0MDM6XCLor7fmsYLlpLHotKXvvIzpnIDopoEgQXBwIOeuoeeQhuWRmOadg+mZkOOAglwiLDcwMzk4Olwi5biQ5Y+35pWw6LaF6ZmQ44CC5aaC6ZyA5Yib5bu65aSa5LqOMTAw5Liq5biQ5Y+377yM6K+35bCG5bqU55So5Y2H57qn5Li65LiT5Lia54mI77yM5YW35L2T5pON5L2c5oyH5byV6K+35Y+C6KeB6LSt5Lmw5oyH5byVKFwiLmNvbmNhdChVbSxcIjI2OS8zMjQ1OCnjgIJcIiksNzA1MDA6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jplJnor6/vvIzor7fph43or5XjgIJcIiksNzFlMzpcIuWIoOmZpOW4kOWPt+Wksei0peOAguS7heaUr+aMgeWIoOmZpOS9k+mqjOeJiOW4kOWPt++8jOaCqOW9k+WJjeW6lOeUqOS4uuS4k+S4mueJiO+8jOaaguS4jeaUr+aMgeW4kOWPt+WIoOmZpOOAglwiLDIwMDAxOlwi6K+35rGC5YyF6Z2e5rOV44CCXCIsMjAwMDI6XCJVc2VyU2lnIOaIliBBMiDlpLHmlYjjgIJcIiwyMDAwMzpcIua2iOaBr+WPkemAgeaWueaIluaOpeaUtuaWuSBVc2VySUQg5peg5pWI5oiW5LiN5a2Y5Zyo77yM6K+35qOA5p+lIFVzZXJJRCDmmK/lkKblt7Llr7zlhaXljbPml7bpgJrkv6EgSU3jgIJcIiwyMDAwNDpcIue9kee7nOW8guW4uO+8jOivt+mHjeivleOAglwiLDIwMDA1OlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIpLDIwMDA2Olwi6Kem5Y+R5Y+R6YCBXCIuY29uY2F0KFwi5Y2V6IGK5raI5oGvXCIsXCLkuYvliY3lm57osIPvvIxBcHAg5ZCO5Y+w6L+U5Zue56aB5q2i5LiL5Y+R6K+l5raI5oGv44CCXCIpLDIwMDA3Olwi5Y+R6YCBXCIuY29uY2F0KFwi5Y2V6IGK5raI5oGvXCIsXCLvvIzooqvlr7nmlrnmi4npu5HvvIznpoHmraLlj5HpgIHjgILmtojmga/lj5HpgIHnirbmgIHpu5jorqTlsZXnpLrkuLrlpLHotKXvvIzmgqjlj6/ku6XnmbvlvZXmjqfliLblj7Dkv67mlLnor6XlnLrmma/kuIvnmoTmtojmga/lj5HpgIHnirbmgIHlsZXnpLrnu5PmnpzvvIzlhbfkvZPmk43kvZzor7flj4Lop4Hmtojmga/kv53nlZnorr7nva4oXCIpLmNvbmNhdChVbSxcIjI2OS8zODY1NinjgIJcIiksMjAwMDk6XCLmtojmga/lj5HpgIHlj4zmlrnkupLnm7jkuI3mmK/lpb3lj4vvvIznpoHmraLlj5HpgIHvvIjphY3nva5cIi5jb25jYXQoXCLljZXogYrmtojmga9cIixcIuagoemqjOWlveWPi+WFs+ezu+aJjeS8muWHuueOsO+8ieOAglwiKSwyMDAxMDpcIuWPkemAgVwiLmNvbmNhdChcIuWNleiBiua2iOaBr1wiLFwi77yM6Ieq5bex5LiN5piv5a+55pa555qE5aW95Y+L77yI5Y2V5ZCR5YWz57O777yJ77yM56aB5q2i5Y+R6YCB44CCXCIpLDIwMDExOlwi5Y+R6YCBXCIuY29uY2F0KFwi5Y2V6IGK5raI5oGvXCIsXCLvvIzlr7nmlrnkuI3mmK/oh6rlt7HnmoTlpb3lj4vvvIjljZXlkJHlhbPns7vvvInvvIznpoHmraLlj5HpgIHjgIJcIiksMjAwMTI6XCLlj5HpgIHmlrnooqvnpoHoqIDvvIzor6XmnaHmtojmga/ooqvnpoHmraLlj5HpgIHjgIJcIiwyMDAxNjpcIua2iOaBr+aSpOWbnui2hei/h+S6huaXtumXtOmZkOWItu+8iOm7mOiupDLliIbpkp/vvInjgIJcIiwyMDAxODpcIuWIoOmZpOa8q+a4uOWGhemDqOmUmeivr+OAglwiLDkwMDAxOlwiSlNPTiDmoLzlvI/op6PmnpDlpLHotKXvvIzor7fmo4Dmn6Xor7fmsYLljIXmmK/lkKbnrKblkIggSlNPTiDop4TojIPjgIJcIiw5MDAwMjpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK0gTXNnQm9keSDkuI3nrKblkIjmtojmga/moLzlvI/mj4/ov7DvvIzmiJbogIUgTXNnQm9keSDkuI3mmK8gQXJyYXkg57G75Z6L77yM6K+35Y+C6ICDIFRJTU1zZ0VsZW1lbnQg5a+56LGh55qE5a6a5LmJKFwiKS5jb25jYXQoVW0sXCIyNjkvMjcyMFwiKS5jb25jYXQoeG0sXCIp44CCXCIpLDkwMDAzOlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4ree8uuWwkSBUb19BY2NvdW50IOWtl+auteaIluiAhSBUb19BY2NvdW50IOW4kOWPt+S4jeWtmOWcqOOAglwiKSw5MDAwNTpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK3nvLrlsJEgTXNnUmFuZG9tIOWtl+auteaIluiAhSBNc2dSYW5kb20g5a2X5q615LiN5pivIEludGVnZXIg57G75Z6L44CCXCIpLDkwMDA2OlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4ree8uuWwkSBNc2dUaW1lU3RhbXAg5a2X5q615oiW6ICFIE1zZ1RpbWVTdGFtcCDlrZfmrrXkuI3mmK8gSW50ZWdlciDnsbvlnovjgIJcIiksOTAwMDc6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5LitIE1zZ0JvZHkg57G75Z6L5LiN5pivIEFycmF5IOexu+Wei++8jOivt+WwhuWFtuS/ruaUueS4uiBBcnJheSDnsbvlnovjgIJcIiksOTAwMDg6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5Lit57y65bCRIEZyb21fQWNjb3VudCDlrZfmrrXmiJbogIUgRnJvbV9BY2NvdW50IOW4kOWPt+S4jeWtmOWcqOOAglwiKSw5MDAwOTpcIuivt+axgumcgOimgSBBcHAg566h55CG5ZGY5p2D6ZmQ44CCXCIsOTAwMTA6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5LiN56ym5ZCI5raI5oGv5qC85byP5o+P6L+w77yM6K+35Y+C6ICDIFRJTU1zZ0VsZW1lbnQg5a+56LGh55qE5a6a5LmJKFwiKS5jb25jYXQoVW0sXCIyNjkvMjcyMFwiKS5jb25jYXQoeG0sXCIp44CCXCIpLDkwMDExOlwi5om56YeP5Y+R5raI5oGv55uu5qCH5biQ5Y+36LaF6L+HNTAw77yM6K+35YeP5bCRIFRvX0FjY291bnQg5Lit55uu5qCH5biQ5Y+35pWw6YeP44CCXCIsOTAwMTI6XCJUb19BY2NvdW50IOayoeacieazqOWGjOaIluS4jeWtmOWcqO+8jOivt+ehruiupCBUb19BY2NvdW50IOaYr+WQpuWvvOWFpeWNs+aXtumAmuS/oSBJTSDmiJbogIXmmK/lkKbmi7zlhpnplJnor6/jgIJcIiw5MDAyNjpcIua2iOaBr+emu+e6v+WtmOWCqOaXtumXtOmUmeivr++8iOacgOWkmuS4jeiDvei2hei/hzflpKnvvInjgIJcIiw5MDAzMTpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK0gU3luY090aGVyTWFjaGluZSDlrZfmrrXkuI3mmK8gSW50ZWdlciDnsbvlnovjgIJcIiksOTAwNDQ6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5LitIE1zZ0xpZmVUaW1lIOWtl+auteS4jeaYryBJbnRlZ2VyIOexu+Wei+OAglwiKSw5MDA0ODpcIuivt+axgueahOeUqOaIt+W4kOWPt+S4jeWtmOWcqOOAglwiLDkwMDU0Olwi5pKk5Zue6K+35rGC5Lit55qEIE1zZ0tleSDkuI3lkIjms5XjgIJcIiw5MDk5NDpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiKSw5MDk5NTpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiKSw5MWUzOlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIpLDkwOTkyOlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIsXCLlpoLmnpzmiYDmnInor7fmsYLpg73ov5Tlm57or6XplJnor6/noIHvvIzkuJQgQXBwIOmFjee9ruS6huesrOS4ieaWueWbnuiwg++8jOivt+ajgOafpSBBcHAg5pyN5Yqh56uv5piv5ZCm5q2j5bi45ZCR5Y2z5pe26YCa5L+hIElNIOWQjuWPsOacjeWKoeerr+i/lOWbnuWbnuiwg+e7k+aenOOAglwiKSw5M2UzOlwiSlNPTiDmlbDmja7ljIXotoXplb/vvIzmtojmga/ljIXkvZPor7fkuI3opoHotoXov4c4a+OAglwiLDkxMTAxOlwiV2ViIOerr+mVv+i9ruivouiiq+i4ou+8iFdlYiDnq6/lkIzml7blnKjnur/lrp7kvovkuKrmlbDotoXlh7rpmZDliLbvvInjgIJcIiwxMDAwMjpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiKSwxMDAwMzpcIuivt+axguS4reeahOaOpeWPo+WQjeensOmUmeivr++8jOivt+aguOWvueaOpeWPo+WQjeensOW5tumHjeivleOAglwiLDEwMDA0Olwi5Y+C5pWw6Z2e5rOV77yM6K+35qC55o2u6ZSZ6K+v5o+P6L+w5qOA5p+l6K+35rGC5piv5ZCm5q2j56Gu44CCXCIsMTAwMDU6XCLor7fmsYLljIXkvZPkuK3mkLrluKbnmoTluJDlj7fmlbDph4/ov4flpJrjgIJcIiwxMDAwNjpcIuaTjeS9nOmikeeOh+mZkOWItu+8jOivt+WwneivlemZjeS9juiwg+eUqOeahOmikeeOh+OAglwiLDEwMDA3Olwi5pON5L2c5p2D6ZmQ5LiN6Laz77yM5L6L5aaCIFdvcmsgXCIuY29uY2F0KFwi576k57uEXCIsXCLkuK3mma7pgJrmiJDlkZjlsJ3or5XmiafooYzouKLkurrmk43kvZzvvIzkvYblj6rmnIkgQXBwIOeuoeeQhuWRmOaJjeacieadg+mZkOOAglwiKSwxMDAwODpcIuivt+axgumdnuazle+8jOWPr+iDveaYr+ivt+axguS4reaQuuW4pueahOetvuWQjeS/oeaBr+mqjOivgeS4jeato+ehru+8jOivt+WGjeasoeWwneivleOAglwiLDEwMDA5Olwi6K+l576k5LiN5YWB6K64576k5Li75Li75Yqo6YCA5Ye644CCXCIsMTAwMTA6XCJcIi5jb25jYXQoXCLnvqTnu4RcIixcIuS4jeWtmOWcqO+8jOaIluiAheabvue7j+WtmOWcqOi/h++8jOS9huaYr+ebruWJjeW3sue7j+iiq+ino+aVo+OAglwiKSwxMDAxMTpcIuino+aekCBKU09OIOWMheS9k+Wksei0pe+8jOivt+ajgOafpeWMheS9k+eahOagvOW8j+aYr+WQpuespuWQiCBKU09OIOagvOW8j+OAglwiLDEwMDEyOlwi5Y+R6LW35pON5L2c55qEIFVzZXJJRCDpnZ7ms5XvvIzor7fmo4Dmn6Xlj5Hotbfmk43kvZznmoTnlKjmiLcgVXNlcklEIOaYr+WQpuWhq+WGmeato+ehruOAglwiLDEwMDEzOlwi6KKr6YKA6K+35Yqg5YWl55qE55So5oi35bey57uP5piv576k5oiQ5ZGY44CCXCIsMTAwMTQ6XCLnvqTlt7Lmu6HlkZjvvIzml6Dms5XlsIbor7fmsYLkuK3nmoTnlKjmiLfliqDlhaVcIi5jb25jYXQoXCLnvqTnu4RcIixcIu+8jOWmguaenOaYr+aJuemHj+WKoOS6uu+8jOWPr+S7peWwneivleWHj+WwkeWKoOWFpeeUqOaIt+eahOaVsOmHj+OAglwiKSwxMDAxNTpcIuaJvuS4jeWIsOaMh+WumiBJRCDnmoRcIi5jb25jYXQoXCLnvqTnu4RcIixcIuOAglwiKSwxMDAxNjpcIkFwcCDlkI7lj7DpgJrov4fnrKzkuInmlrnlm57osIPmi5Lnu53mnKzmrKHmk43kvZzjgIJcIiwxMDAxNzpcIuWboOiiq+emgeiogOiAjOS4jeiDveWPkemAgea2iOaBr++8jOivt+ajgOafpeWPkemAgeiAheaYr+WQpuiiq+iuvue9ruemgeiogOOAglwiLDEwMDE4Olwi5bqU562U5YyF6ZW/5bqm6LaF6L+H5pyA5aSn5YyF6ZW/77yIMU1C77yJ77yM6K+35rGC55qE5YaF5a656L+H5aSa77yM6K+35bCd6K+V5YeP5bCR5Y2V5qyh6K+35rGC55qE5pWw5o2u6YeP44CCXCIsMTAwMTk6XCLor7fmsYLnmoTnlKjmiLfluJDlj7fkuI3lrZjlnKjjgIJcIiwxMDAyMTpcIlwiLmNvbmNhdChcIue+pOe7hFwiLFwiIElEIOW3suiiq+S9v+eUqO+8jOivt+mAieaLqeWFtuS7lueahFwiKS5jb25jYXQoXCLnvqTnu4RcIixcIiBJROOAglwiKSwxMDAyMzpcIuWPkea2iOaBr+eahOmikeeOh+i2hemZkO+8jOivt+W7tumVv+S4pOasoeWPkea2iOaBr+aXtumXtOeahOmXtOmalOOAglwiLDEwMDI0Olwi5q2k6YKA6K+35oiW6ICF55Sz6K+36K+35rGC5bey57uP6KKr5aSE55CG44CCXCIsMTAwMjU6XCJcIi5jb25jYXQoXCLnvqTnu4RcIixcIiBJRCDlt7Looqvkvb/nlKjvvIzlubbkuJTmk43kvZzogIXkuLrnvqTkuLvvvIzlj6/ku6Xnm7TmjqXkvb/nlKjjgIJcIiksMTAwMjY6XCLor6UgU0RLQXBwSUQg6K+35rGC55qE5ZG95Luk5a2X5bey6KKr56aB55So44CCXCIsMTAwMzA6XCLor7fmsYLmkqTlm57nmoTmtojmga/kuI3lrZjlnKjjgIJcIiwxMDAzMTpcIua2iOaBr+aSpOWbnui2hei/h+S6huaXtumXtOmZkOWItu+8iOm7mOiupDLliIbpkp/vvInjgIJcIiwxMDAzMjpcIuivt+axguaSpOWbnueahOa2iOaBr+S4jeaUr+aMgeaSpOWbnuaTjeS9nOOAglwiLDEwMDMzOlwiXCIuY29uY2F0KFwi576k57uEXCIsXCLnsbvlnovkuI3mlK/mjIHmtojmga/mkqTlm57mk43kvZzjgIJcIiksMTAwMzQ6XCLor6Xmtojmga/nsbvlnovkuI3mlK/mjIHliKDpmaTmk43kvZzjgIJcIiwxMDAzNTpcIuebtOaSree+pOWSjOWcqOe6v+aIkOWRmOW5v+aSreWkp+e+pOS4jeaUr+aMgeWIoOmZpOa2iOaBr+OAglwiLDEwMDM2Olwi55u05pKt576k5Yib5bu65pWw6YeP6LaF6L+H5LqG6ZmQ5Yi277yM6K+35Y+C6ICD5Lu35qC86K+05piOKFwiLmNvbmNhdChVbSxcIjI2OS8xMTY3MynotK3kubDpooTku5jotLnlpZfppJDigJxJTeebtOaSree+pOKAneOAglwiKSwxMDAzNzpcIuWNleS4queUqOaIt+WPr+WIm+W7uuWSjOWKoOWFpeeahFwiLmNvbmNhdChcIue+pOe7hFwiLFwi5pWw6YeP6LaF6L+H5LqG6ZmQ5Yi277yM6K+35Y+C6ICD5Lu35qC86K+05piOKFwiKS5jb25jYXQoVW0sXCIyNjkvMTE2NzMp6LSt5Lmw5oiW5Y2H57qn6aKE5LuY6LS55aWX6aSQ4oCc5Y2V5Lq65Y+v5Yib5bu65LiO5Yqg5YWlXCIpLmNvbmNhdChcIue+pOe7hFwiLFwi5pWw4oCd44CCXCIpLDEwMDM4Olwi576k5oiQ5ZGY5pWw6YeP6LaF6L+H6ZmQ5Yi277yM6K+35Y+C6ICD5Lu35qC86K+05piOKFwiLmNvbmNhdChVbSxcIjI2OS8xMTY3MynotK3kubDmiJbljYfnuqfpooTku5jotLnlpZfppJDigJzmianlsZXnvqTkurrmlbDkuIrpmZDigJ3jgIJcIiksMTAwNDE6XCLor6XlupTnlKjvvIhTREtBcHBJRO+8ieW3sumFjee9ruS4jeaUr+aMgee+pOa2iOaBr+aSpOWbnuOAglwiLDEwMDUwOlwi576k5bGe5oCnIGtleSDkuI3lrZjlnKhcIiwxMDA1NjpcIuivt+WcqOWGmeWFpee+pOWxnuaAp+WJjeWFiOS9v+eUqCBnZXRHcm91cEF0dHJpYnV0ZXMg5o6l5Y+j5pu05paw5pys5Zyw576k5bGe5oCn77yM6YG/5YWN5Yay56qB44CCXCIsMzAwMDE6XCLor7fmsYLlj4LmlbDplJnor6/vvIzor7fmoLnmja7plJnor6/mj4/ov7Dmo4Dmn6Xor7fmsYLlj4LmlbBcIiwzMDAwMjpcIlNES0FwcElEIOS4jeWMuemFjVwiLDMwMDAzOlwi6K+35rGC55qE55So5oi35biQ5Y+35LiN5a2Y5ZyoXCIsMzAwMDQ6XCLor7fmsYLpnIDopoEgQXBwIOeuoeeQhuWRmOadg+mZkFwiLDMwMDA1Olwi5YWz57O76ZO+5a2X5q615Lit5YyF5ZCr5pWP5oSf6K+NXCIsMzAwMDY6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jplJnor6/vvIzor7fph43or5XjgIJcIiksMzAwMDc6XCJcIi5jb25jYXQoXCLnvZHnu5zotoXml7bvvIzor7fnqI3lkI7ph43or5UuIFwiKSwzMDAwODpcIuW5tuWPkeWGmeWvvOiHtOWGmeWGsueqge+8jOW7uuiuruS9v+eUqOaJuemHj+aWueW8j1wiLDMwMDA5Olwi5ZCO5Y+w56aB5q2i6K+l55So5oi35Y+R6LW35Yqg5aW95Y+L6K+35rGCXCIsMzAwMTA6XCLoh6rlt7HnmoTlpb3lj4vmlbDlt7Lovr7ns7vnu5/kuIrpmZBcIiwzMDAxMTpcIuWIhue7hOW3sui+vuezu+e7n+S4iumZkFwiLDMwMDEyOlwi5pyq5Yaz5pWw5bey6L6+57O757uf5LiK6ZmQXCIsMzAwMTQ6XCLlr7nmlrnnmoTlpb3lj4vmlbDlt7Lovr7ns7vnu5/kuIrpmZBcIiwzMDUxNTpcIuivt+axgua3u+WKoOWlveWPi+aXtu+8jOWvueaWueWcqOiHquW3seeahOm7keWQjeWNleS4re+8jOS4jeWFgeiuuOWKoOWlveWPi1wiLDMwNTE2Olwi6K+35rGC5re75Yqg5aW95Y+L5pe277yM5a+55pa555qE5Yqg5aW95Y+L6aqM6K+B5pa55byP5piv5LiN5YWB6K645Lu75L2V5Lq65re75Yqg6Ieq5bex5Li65aW95Y+LXCIsMzA1MjU6XCLor7fmsYLmt7vliqDlpb3lj4vml7bvvIzoh6rlt7HlnKjlr7nmlrnnmoTpu5HlkI3ljZXkuK3vvIzkuI3lhYHorrjliqDlpb3lj4tcIiwzMDUzOTpcIuetieW+heWvueaWueWQjOaEj1wiLDMwNTQwOlwi5re75Yqg5aW95Y+L6K+35rGC6KKr5a6J5YWo562W55Wl5omT5Ye777yM6K+35Yu/6aKR57mB5Y+R6LW35re75Yqg5aW95Y+L6K+35rGCXCIsMzE3MDQ6XCLkuI7or7fmsYLliKDpmaTnmoTluJDlj7fkuYvpl7TkuI3lrZjlnKjlpb3lj4vlhbPns7tcIiwzMTcwNzpcIuWIoOmZpOWlveWPi+ivt+axguiiq+WuieWFqOetlueVpeaJk+WHu++8jOivt+WLv+mikee5geWPkei1t+WIoOmZpOWlveWPi+ivt+axglwifSxLbT1mdW5jdGlvbihlKXtpKG4sZSk7dmFyIHQ9XyhuKTtmdW5jdGlvbiBuKGUpe3ZhciByO3JldHVybiBvKHRoaXMsbiksKHI9dC5jYWxsKHRoaXMpKS5jb2RlPWUuY29kZSxyLm1lc3NhZ2U9Vm1bZS5jb2RlXXx8ZS5tZXNzYWdlLHIuZGF0YT1lLmRhdGF8fHt9LHJ9cmV0dXJuIG59KHAoRXJyb3IpKSxCbT1udWxsLEhtPWZ1bmN0aW9uKGUpe0JtPWV9LGptPWZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLnJlc29sdmUoUG0oZSkpfSxZbT1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdO2lmKGUgaW5zdGFuY2VvZiBLbSlyZXR1cm4gdCYmbnVsbCE9PUJtJiZCbS5lbWl0KG9vLkVSUk9SLGUpLFByb21pc2UucmVqZWN0KGUpO2lmKGUgaW5zdGFuY2VvZiBFcnJvcil7dmFyIG49bmV3IEttKHtjb2RlOlBkLlVOQ0FVR0hUX0VSUk9SLG1lc3NhZ2U6ZS5tZXNzYWdlfSk7cmV0dXJuIHQmJm51bGwhPT1CbSYmQm0uZW1pdChvby5FUlJPUixuKSxQcm9taXNlLnJlamVjdChuKX1pZihKaShlKXx8SmkoZS5jb2RlKXx8SmkoZS5tZXNzYWdlKSlLaS5lcnJvcihcIklNUHJvbWlzZS5yZWplY3Qg5b+F6aG75oyH5a6aY29kZSjplJnor6/noIEp5ZKMbWVzc2FnZSjplJnor6/kv6Hmga8pISEhXCIpO2Vsc2V7aWYoamkoZS5jb2RlKSYmWWkoZS5tZXNzYWdlKSl7dmFyIG89bmV3IEttKGUpO3JldHVybiB0JiZudWxsIT09Qm0mJkJtLmVtaXQob28uRVJST1IsbyksUHJvbWlzZS5yZWplY3Qobyl9S2kuZXJyb3IoXCJJTVByb21pc2UucmVqZWN0IGNvZGUo6ZSZ6K+v56CBKeW/hemhu+S4uuaVsOWtl++8jG1lc3NhZ2Uo6ZSZ6K+v5L+h5oGvKeW/hemhu+S4uuWtl+espuS4siEhIVwiKX19LCRtPWZ1bmN0aW9uKGUpe2kobixlKTt2YXIgdD1fKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHI7cmV0dXJuIG8odGhpcyxuKSwocj10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkMyQ01vZHVsZVwiLHJ9cmV0dXJuIGEobixbe2tleTpcIm9uTmV3QzJDTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YUxpc3Qsbj1lLmlzSW5zdGFudE1lc3NhZ2Usbz1lLkMyQ1JlbWFpbmluZ1VucmVhZExpc3Q7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTmV3QzJDTWVzc2FnZSBjb3VudDpcIikuY29uY2F0KHQubGVuZ3RoLFwiIGlzSW5zdGFudE1lc3NhZ2U6XCIpLmNvbmNhdChuKSk7dmFyIHI9dGhpcy5fbmV3QzJDTWVzc2FnZVN0b3JlZEFuZFN1bW1hcnkoe2RhdGFMaXN0OnQsQzJDUmVtYWluaW5nVW5yZWFkTGlzdDpvLGlzSW5zdGFudE1lc3NhZ2U6bn0pLGE9ci5jb252ZXJzYXRpb25PcHRpb25zTGlzdCxzPXIubWVzc2FnZUxpc3Q7KHRoaXMuZmlsdGVyTW9kaWZpZWRNZXNzYWdlKHMpLGEubGVuZ3RoPjApJiZ0aGlzLmdldE1vZHVsZShKYykub25OZXdNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDphLGlzSW5zdGFudE1lc3NhZ2U6bn0pO3ZhciBpPXRoaXMuZmlsdGVyVW5tb2RpZmllZE1lc3NhZ2Uocyk7biYmaS5sZW5ndGg+MCYmdGhpcy5lbWl0T3V0ZXJFdmVudChvby5NRVNTQUdFX1JFQ0VJVkVELGkpLHMubGVuZ3RoPTB9fSx7a2V5OlwiX25ld0MyQ01lc3NhZ2VTdG9yZWRBbmRTdW1tYXJ5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuZGF0YUxpc3Qsbj1lLkMyQ1JlbWFpbmluZ1VucmVhZExpc3Qsbz1lLmlzSW5zdGFudE1lc3NhZ2Uscj1udWxsLGE9W10scz1bXSxpPXt9LHU9dGhpcy5nZXRNb2R1bGUodGwpLGM9MCxsPXQubGVuZ3RoO2M8bDtjKyspe3ZhciBkPXRbY107ZC5jdXJyZW50VXNlcj10aGlzLmdldE15VXNlcklEKCksZC5jb252ZXJzYXRpb25UeXBlPXJvLkNPTlZfQzJDLGQuaXNTeXN0ZW1NZXNzYWdlPSEhZC5pc1N5c3RlbU1lc3NhZ2Uscj1uZXcgR20oZCksZC5lbGVtZW50cz11LnBhcnNlRWxlbWVudHMoZC5lbGVtZW50cyxkLmZyb20pLHIuc2V0RWxlbWVudChkLmVsZW1lbnRzKSxyLnNldE5pY2tBbmRBdmF0YXIoe25pY2s6ZC5uaWNrLGF2YXRhcjpkLmF2YXRhcn0pO3ZhciBwPXIuY29udmVyc2F0aW9uSUQ7aWYobyl7dmFyIGc9ITEsaD10aGlzLmdldE1vZHVsZShKYyk7aWYoci5mcm9tIT09dGhpcy5nZXRNeVVzZXJJRCgpKXt2YXIgZj1oLmdldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyKHApO2lmKGYpe3ZhciBfPWYubmljayxtPWYuYXZhdGFyO189PT1yLm5pY2smJm09PT1yLmF2YXRhcnx8KGc9ITApfX1lbHNle3ZhciB2PWguZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKHApO2lmKHYpe3ZhciBNPXYubmljayx5PXYuYXZhdGFyO009PT1yLm5pY2smJnk9PT1yLmF2YXRhcnx8aC5tb2RpZnlNZXNzYWdlU2VudEJ5TWUoe2NvbnZlcnNhdGlvbklEOnAsbGF0ZXN0TmljazpyLm5pY2ssbGF0ZXN0QXZhdGFyOnIuYXZhdGFyfSl9fXZhciBJPTE9PT10W2NdLmlzTW9kaWZpZWQ7aWYoaC5pc01lc3NhZ2VTZW50QnlDdXJyZW50SW5zdGFuY2Uocik/ci5pc01vZGlmaWVkPUk6ST0hMSwwPT09ZC5tc2dMaWZlVGltZSlyLnNldE9ubGluZU9ubHlGbGFnKCEwKSxzLnB1c2gocik7ZWxzZXtpZighaC5wdXNoSW50b01lc3NhZ2VMaXN0KHMscixJKSljb250aW51ZTtnJiYoaC5tb2RpZnlNZXNzYWdlU2VudEJ5UGVlcihwKSxoLnVwZGF0ZVVzZXJQcm9maWxlU3BlY2lmaWVkS2V5KHtjb252ZXJzYXRpb25JRDpwLG5pY2s6ci5uaWNrLGF2YXRhcjpyLmF2YXRhcn0pKX10aGlzLmdldE1vZHVsZShsbCkuYWRkTWVzc2FnZURlbGF5KHtjdXJyZW50VGltZTpEYXRlLm5vdygpLHRpbWU6ci50aW1lfSl9aWYoMCE9PWQubXNnTGlmZVRpbWUpe2lmKCExPT09ci5nZXRPbmxpbmVPbmx5RmxhZygpKWlmKEppKGlbcF0pKWlbcF09YS5wdXNoKHtjb252ZXJzYXRpb25JRDpwLHVucmVhZENvdW50Olwib3V0XCI9PT1yLmZsb3c/MDoxLHR5cGU6ci5jb252ZXJzYXRpb25UeXBlLHN1YlR5cGU6ci5jb252ZXJzYXRpb25TdWJUeXBlLGxhc3RNZXNzYWdlOnJ9KS0xO2Vsc2V7dmFyIFQ9aVtwXTthW1RdLnR5cGU9ci5jb252ZXJzYXRpb25UeXBlLGFbVF0uc3ViVHlwZT1yLmNvbnZlcnNhdGlvblN1YlR5cGUsYVtUXS5sYXN0TWVzc2FnZT1yLFwiaW5cIj09PXIuZmxvdyYmYVtUXS51bnJlYWRDb3VudCsrfX1lbHNlIHIuc2V0T25saW5lT25seUZsYWcoITApfWlmKHppKG4pKWZvcih2YXIgRD1mdW5jdGlvbihlLHQpe3ZhciBvPWEuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udmVyc2F0aW9uSUQ9PT1cIkMyQ1wiLmNvbmNhdChuW2VdLmZyb20pfSkpO28/by51bnJlYWRDb3VudCs9bltlXS5jb3VudDphLnB1c2goe2NvbnZlcnNhdGlvbklEOlwiQzJDXCIuY29uY2F0KG5bZV0uZnJvbSksdW5yZWFkQ291bnQ6bltlXS5jb3VudCx0eXBlOnJvLkNPTlZfQzJDLGxhc3RNc2dUaW1lOm5bZV0ubGFzdE1zZ1RpbWV9KX0sUz0wLEU9bi5sZW5ndGg7UzxFO1MrKylEKFMpO3JldHVybntjb252ZXJzYXRpb25PcHRpb25zTGlzdDphLG1lc3NhZ2VMaXN0OnN9fX0se2tleTpcIm9uQzJDTWVzc2FnZVJldm9rZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO0tpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbkMyQ01lc3NhZ2VSZXZva2VkIGNvdW50OlwiKS5jb25jYXQoZS5kYXRhTGlzdC5sZW5ndGgpKTt2YXIgbj10aGlzLmdldE1vZHVsZShKYyksbz1bXSxyPW51bGw7ZS5kYXRhTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihlLmMyY01lc3NhZ2VSZXZva2VkTm90aWZ5KXt2YXIgYT1lLmMyY01lc3NhZ2VSZXZva2VkTm90aWZ5LnJldm9rZWRJbmZvcztKaShhKXx8YS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgYT10LmdldE15VXNlcklEKCk9PT1lLmZyb20/XCJcIi5jb25jYXQocm8uQ09OVl9DMkMpLmNvbmNhdChlLnRvKTpcIlwiLmNvbmNhdChyby5DT05WX0MyQykuY29uY2F0KGUuZnJvbSk7KHI9bi5yZXZva2UoYSxlLnNlcXVlbmNlLGUucmFuZG9tKSkmJm8ucHVzaChyKX0pKX19KSksMCE9PW8ubGVuZ3RoJiYobi5vbk1lc3NhZ2VSZXZva2VkKG8pLHRoaXMuZW1pdE91dGVyRXZlbnQob28uTUVTU0FHRV9SRVZPS0VELG8pKX19LHtrZXk6XCJvbkMyQ01lc3NhZ2VSZWFkUmVjZWlwdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5kYXRhTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtpZighT3UoZS5jMmNNZXNzYWdlUmVhZFJlY2VpcHQpKXt2YXIgbj1lLmMyY01lc3NhZ2VSZWFkUmVjZWlwdC50bztlLmMyY01lc3NhZ2VSZWFkUmVjZWlwdC51aW5QYWlyUmVhZEFycmF5LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvPWUucGVlclJlYWRUaW1lO0tpLmRlYnVnKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5fb25DMkNNZXNzYWdlUmVhZFJlY2VpcHQgdG86XCIpLmNvbmNhdChuLFwiIHBlZXJSZWFkVGltZTpcIikuY29uY2F0KG8pKTt2YXIgcj1cIlwiLmNvbmNhdChyby5DT05WX0MyQykuY29uY2F0KG4pLGE9dC5nZXRNb2R1bGUoSmMpO2EucmVjb3JkUGVlclJlYWRUaW1lKHIsbyksYS51cGRhdGVNZXNzYWdlSXNQZWVyUmVhZFByb3BlcnR5KHIsbyl9KSl9fSkpfX0se2tleTpcIm9uQzJDTWVzc2FnZVJlYWROb3RpY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoIU91KGUuYzJjTWVzc2FnZVJlYWROb3RpY2UpKXt2YXIgbj10LmdldE1vZHVsZShKYyk7ZS5jMmNNZXNzYWdlUmVhZE5vdGljZS51aW5QYWlyUmVhZEFycmF5LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZnJvbSxyPWUucGVlclJlYWRUaW1lO0tpLmRlYnVnKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5vbkMyQ01lc3NhZ2VSZWFkTm90aWNlIGZyb206XCIpLmNvbmNhdChvLFwiIGxhc3RSZWFkVGltZTpcIikuY29uY2F0KHIpKTt2YXIgYT1cIlwiLmNvbmNhdChyby5DT05WX0MyQykuY29uY2F0KG8pO24udXBkYXRlSXNSZWFkQWZ0ZXJSZWFkUmVwb3J0KHtjb252ZXJzYXRpb25JRDphLGxhc3RNZXNzYWdlVGltZTpyfSksbi51cGRhdGVVbnJlYWRDb3VudChhKX0pKX19KSl9fSx7a2V5Olwic2VuZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2NyZWF0ZUMyQ01lc3NhZ2VQYWNrKGUsdCk7cmV0dXJuIHRoaXMucmVxdWVzdChuKX19LHtrZXk6XCJfY3JlYXRlQzJDTWVzc2FnZVBhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPW51bGw7dCYmKHQub2ZmbGluZVB1c2hJbmZvJiYobj10Lm9mZmxpbmVQdXNoSW5mbyksITA9PT10Lm9ubGluZVVzZXJPbmx5JiYobj9uLmRpc2FibGVQdXNoPSEwOm49e2Rpc2FibGVQdXNoOiEwfSkpO3ZhciBvPVwiXCI7cmV0dXJuIFlpKGUuY2xvdWRDdXN0b21EYXRhKSYmZS5jbG91ZEN1c3RvbURhdGEubGVuZ3RoPjAmJihvPWUuY2xvdWRDdXN0b21EYXRhKSx7cHJvdG9jb2xOYW1lOm1sLHRqZ0lEOnRoaXMuZ2VuZXJhdGVUamdJRChlKSxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLHRvQWNjb3VudDplLnRvLG1zZ1RpbWVTdGFtcDpNYXRoLmNlaWwoRGF0ZS5ub3coKS8xZTMpLG1zZ0JvZHk6ZS5nZXRFbGVtZW50cygpLGNsb3VkQ3VzdG9tRGF0YTpvLG1zZ1NlcTplLnNlcXVlbmNlLG1zZ1JhbmRvbTplLnJhbmRvbSxtc2dMaWZlVGltZTp0aGlzLmlzT25saW5lTWVzc2FnZShlLHQpPzA6dm9pZCAwLG5pY2s6ZS5uaWNrLGF2YXRhcjplLmF2YXRhcixvZmZsaW5lUHVzaEluZm86bj97cHVzaEZsYWc6ITA9PT1uLmRpc2FibGVQdXNoPzE6MCx0aXRsZTpuLnRpdGxlfHxcIlwiLGRlc2M6bi5kZXNjcmlwdGlvbnx8XCJcIixleHQ6bi5leHRlbnNpb258fFwiXCIsYXBuc0luZm86e2JhZGdlTW9kZTohMD09PW4uaWdub3JlSU9TQmFkZ2U/MTowfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpuLmFuZHJvaWRPUFBPQ2hhbm5lbElEfHxcIlwifX06dm9pZCAwfX19fSx7a2V5OlwiaXNPbmxpbmVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hKCF0fHwhMCE9PXQub25saW5lVXNlck9ubHkpfX0se2tleTpcInJldm9rZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6RmwscmVxdWVzdERhdGE6e21zZ0luZm86e2Zyb21BY2NvdW50OmUuZnJvbSx0b0FjY291bnQ6ZS50byxtc2dTZXE6ZS5zZXF1ZW5jZSxtc2dSYW5kb206ZS5yYW5kb20sbXNnVGltZVN0YW1wOmUudGltZX19fSl9fSx7a2V5OlwiZGVsZXRlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUudG8sbj1lLmtleUxpc3Q7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlTWVzc2FnZSB0b0FjY291bnQ6XCIpLmNvbmNhdCh0LFwiIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpLbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLHRvOnQsa2V5TGlzdDpufX0pfX0se2tleTpcInNldE1lc3NhZ2VSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY29udmVyc2F0aW9uSUQsbz1lLmxhc3RNZXNzYWdlVGltZSxyPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRNZXNzYWdlUmVhZFwiKTtLaS5sb2coXCJcIi5jb25jYXQocixcIiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KG4sXCIgbGFzdE1lc3NhZ2VUaW1lOlwiKS5jb25jYXQobykpLGppKG8pfHxLaS53YXJuKFwiXCIuY29uY2F0KHIsXCIg6K+35Yu/5L+u5pS5IENvbnZlcnNhdGlvbi5sYXN0TWVzc2FnZS5sYXN0VGltZe+8jOWQpuWImeWPr+iDveS8muWvvOiHtOW3suivu+S4iuaKpee7k+aenOS4jeWHhuehrlwiKSk7dmFyIGE9bmV3IGxnKENnKTtyZXR1cm4gYS5zZXRNZXNzYWdlKFwiY29udmVyc2F0aW9uSUQ6XCIuY29uY2F0KG4sXCIgbGFzdE1lc3NhZ2VUaW1lOlwiKS5jb25jYXQobykpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnFsLHJlcXVlc3REYXRhOntDMkNNc2dSZWFkZWQ6e2Nvb2tpZTpcIlwiLEMyQ01zZ1JlYWRlZEl0ZW06W3t0b0FjY291bnQ6bi5yZXBsYWNlKFwiQzJDXCIsXCJcIiksbGFzdE1lc3NhZ2VUaW1lOm8scmVjZWlwdDoxfV19fX0pLnRoZW4oKGZ1bmN0aW9uKCl7YS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChyLFwiIG9rXCIpKTt2YXIgZT10LmdldE1vZHVsZShKYyk7cmV0dXJuIGUudXBkYXRlSXNSZWFkQWZ0ZXJSZWFkUmVwb3J0KHtjb252ZXJzYXRpb25JRDpuLGxhc3RNZXNzYWdlVGltZTpvfSksZS51cGRhdGVVbnJlYWRDb3VudChuKSxQbSgpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5sb2coXCJcIi5jb25jYXQocixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJnZXRSb2FtaW5nTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0Um9hbWluZ01lc3NhZ2VcIiksbz1lLnBlZXJBY2NvdW50LHI9ZS5jb252ZXJzYXRpb25JRCxhPWUuY291bnQscz1lLmxhc3RNZXNzYWdlVGltZSxpPWUubWVzc2FnZUtleSx1PVwicGVlckFjY291bnQ6XCIuY29uY2F0KG8sXCIgY291bnQ6XCIpLmNvbmNhdChhfHwxNSxcIiBsYXN0TWVzc2FnZVRpbWU6XCIpLmNvbmNhdChzfHwwLFwiIG1lc3NhZ2VLZXk6XCIpLmNvbmNhdChpKTtLaS5sb2coXCJcIi5jb25jYXQobixcIiBcIikuY29uY2F0KHUpKTt2YXIgYz1uZXcgbGcoRWcpO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp4bCxyZXF1ZXN0RGF0YTp7cGVlckFjY291bnQ6byxjb3VudDphfHwxNSxsYXN0TWVzc2FnZVRpbWU6c3x8MCxtZXNzYWdlS2V5Oml9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89ZS5kYXRhLGE9by5jb21wbGV0ZSxzPW8ubWVzc2FnZUxpc3QsaT1vLm1lc3NhZ2VLZXk7Smkocyk/S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIGNvbXBsZXRlOlwiKS5jb25jYXQoYSxcIiBidXQgbWVzc2FnZUxpc3QgaXMgdW5kZWZpbmVkIVwiKSk6S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIGNvbXBsZXRlOlwiKS5jb25jYXQoYSxcIiBjb3VudDpcIikuY29uY2F0KHMubGVuZ3RoKSksYy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQodSxcIiBjb21wbGV0ZTpcIikuY29uY2F0KGEsXCIgbGVuZ3RoOlwiKS5jb25jYXQocy5sZW5ndGgpKS5lbmQoKTt2YXIgbD10LmdldE1vZHVsZShKYyk7MT09PWEmJmwuc2V0Q29tcGxldGVkKHIpO3ZhciBkPWwuc3RvcmVSb2FtaW5nTWVzc2FnZShzLHIpO2wubW9kaWZ5TWVzc2FnZUxpc3QociksbC51cGRhdGVJc1JlYWQociksbC51cGRhdGVSb2FtaW5nTWVzc2FnZUtleShyLGkpO3ZhciBwPWwuZ2V0UGVlclJlYWRUaW1lKHIpO2lmKEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIHVwZGF0ZSBpc1BlZXJSZWFkIHByb3BlcnR5LiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KHIsXCIgcGVlclJlYWRUaW1lOlwiKS5jb25jYXQocCkpLHApbC51cGRhdGVNZXNzYWdlSXNQZWVyUmVhZFByb3BlcnR5KHIscCk7ZWxzZXt2YXIgZz1yLnJlcGxhY2Uocm8uQ09OVl9DMkMsXCJcIik7dC5nZXRSZW1vdGVQZWVyUmVhZFRpbWUoW2ddKS50aGVuKChmdW5jdGlvbigpe2wudXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eShyLGwuZ2V0UGVlclJlYWRUaW1lKHIpKX0pKX1yZXR1cm4gZH0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07Yy5zZXRNZXNzYWdlKHUpLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwiZ2V0UmVtb3RlUGVlclJlYWRUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRSZW1vdGVQZWVyUmVhZFRpbWVcIik7aWYoT3UoZSkpcmV0dXJuIEtpLndhcm4oXCJcIi5jb25jYXQobixcIiB1c2VySURMaXN0IGlzIGVtcHR5IVwiKSksUHJvbWlzZS5yZXNvbHZlKCk7dmFyIG89bmV3IGxnKFJnKTtyZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgdXNlcklETGlzdDpcIikuY29uY2F0KGUpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpWbCxyZXF1ZXN0RGF0YTp7dXNlcklETGlzdDplfX0pLnRoZW4oKGZ1bmN0aW9uKHIpe3ZhciBhPXIuZGF0YS5wZWVyUmVhZFRpbWVMaXN0O0tpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBwZWVyUmVhZFRpbWVMaXN0OlwiKS5jb25jYXQoYSkpO2Zvcih2YXIgcz1cIlwiLGk9dC5nZXRNb2R1bGUoSmMpLHU9MDt1PGUubGVuZ3RoO3UrKylzKz1cIlwiLmNvbmNhdChlW3VdLFwiLVwiKS5jb25jYXQoYVt1XSxcIiBcIiksYVt1XT4wJiZpLnJlY29yZFBlZXJSZWFkVGltZShcIkMyQ1wiLmNvbmNhdChlW3VdKSxhW3VdKTtvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShzKS5lbmQoKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSl9KSl9fV0pLG59KGRsKSxXbT1NYXRoLmZsb29yLHptPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5sZW5ndGgsbz1XbShuLzIpO3JldHVybiBuPDg/Sm0oZSx0KTpYbSh6bShlLnNsaWNlKDAsbyksdCksem0oZS5zbGljZShvKSx0KSx0KX0sSm09ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4sbyxyPWUubGVuZ3RoLGE9MTthPHI7KXtmb3Iobz1hLG49ZVthXTtvJiZ0KGVbby0xXSxuKT4wOyllW29dPWVbLS1vXTtvIT09YSsrJiYoZVtvXT1uKX1yZXR1cm4gZX0sWG09ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgbz1lLmxlbmd0aCxyPXQubGVuZ3RoLGE9MCxzPTAsaT1bXTthPG98fHM8cjspYTxvJiZzPHI/aS5wdXNoKG4oZVthXSx0W3NdKTw9MD9lW2ErK106dFtzKytdKTppLnB1c2goYTxvP2VbYSsrXTp0W3MrK10pO3JldHVybiBpfSxRbT16bSxabT1ZLm1hdGNoKC9maXJlZm94XFwvKFxcZCspL2kpLGV2PSEhWm0mJitabVsxXSx0dj0vTVNJRXxUcmlkZW50Ly50ZXN0KFkpLG52PVkubWF0Y2goL0FwcGxlV2ViS2l0XFwvKFxcZCspXFwuLyksb3Y9ISFudiYmK252WzFdLHJ2PVtdLGF2PXJ2LnNvcnQsc3Y9TygoZnVuY3Rpb24oKXtydi5zb3J0KHZvaWQgMCl9KSksaXY9TygoZnVuY3Rpb24oKXtydi5zb3J0KG51bGwpfSkpLHV2PVd0KFwic29ydFwiKSxjdj0hTygoZnVuY3Rpb24oKXtpZihYKXJldHVybiBYPDcwO2lmKCEoZXYmJmV2PjMpKXtpZih0dilyZXR1cm4hMDtpZihvdilyZXR1cm4gb3Y8NjAzO3ZhciBlLHQsbixvLHI9XCJcIjtmb3IoZT02NTtlPDc2O2UrKyl7c3dpdGNoKHQ9U3RyaW5nLmZyb21DaGFyQ29kZShlKSxlKXtjYXNlIDY2OmNhc2UgNjk6Y2FzZSA3MDpjYXNlIDcyOm49MzticmVhaztjYXNlIDY4OmNhc2UgNzE6bj00O2JyZWFrO2RlZmF1bHQ6bj0yfWZvcihvPTA7bzw0NztvKyspcnYucHVzaCh7azp0K28sdjpufSl9Zm9yKHJ2LnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudi1lLnZ9KSksbz0wO288cnYubGVuZ3RoO28rKyl0PXJ2W29dLmsuY2hhckF0KDApLHIuY2hhckF0KHIubGVuZ3RoLTEpIT09dCYmKHIrPXQpO3JldHVyblwiREdCRUZIQUNJSktcIiE9PXJ9fSkpO3Z0KHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDpzdnx8IWl2fHwhdXZ8fCFjdn0se3NvcnQ6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZSYmeHQoZSk7dmFyIHQ9cmUodGhpcyk7aWYoY3YpcmV0dXJuIHZvaWQgMD09PWU/YXYuY2FsbCh0KTphdi5jYWxsKHQsZSk7dmFyIG4sbyxyPVtdLGE9emUodC5sZW5ndGgpO2ZvcihvPTA7bzxhO28rKylvIGluIHQmJnIucHVzaCh0W29dKTtmb3Iobj0ocj1RbShyLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe3JldHVybiB2b2lkIDA9PT1uPy0xOnZvaWQgMD09PXQ/MTp2b2lkIDAhPT1lPytlKHQsbil8fDA6TXQodCk+TXQobik/MTotMX19KGUpKSkubGVuZ3RoLG89MDtvPG47KXRbb109cltvKytdO2Zvcig7bzxhOylkZWxldGUgdFtvKytdO3JldHVybiB0fX0pO3ZhciBsdj0kdC5maW5kSW5kZXgsZHY9ITA7XCJmaW5kSW5kZXhcImluW10mJkFycmF5KDEpLmZpbmRJbmRleCgoZnVuY3Rpb24oKXtkdj0hMX0pKSx2dCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6ZHZ9LHtmaW5kSW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGx2KHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSksY3IoXCJmaW5kSW5kZXhcIik7dmFyIHB2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5saXN0PW5ldyBNYXAsdGhpcy5fY2xhc3NOYW1lPVwiTWVzc2FnZUxpc3RIYW5kbGVyXCIsdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJNYXA9bmV3IE1hcCx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXA9bmV3IE1hcCx0aGlzLl9ncm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZU1hcD1uZXcgTWFwfXJldHVybiBhKGUsW3trZXk6XCJnZXRMb2NhbE9sZGVzdE1lc3NhZ2VCeUNvbnZlcnNhdGlvbklEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIG51bGw7aWYoIXRoaXMubGlzdC5oYXMoZSkpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5saXN0LmdldChlKS52YWx1ZXMoKTtyZXR1cm4gdD90Lm5leHQoKS52YWx1ZTpudWxsfX0se2tleTpcInB1c2hJblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0sbj1lLmNvbnZlcnNhdGlvbklELG89ZS5JRCxyPSEwO3RoaXMubGlzdC5oYXMobil8fHRoaXMubGlzdC5zZXQobixuZXcgTWFwKTt2YXIgYT10aGlzLmxpc3QuZ2V0KG4pLmhhcyhvKTtpZihhKXt2YXIgcz10aGlzLmxpc3QuZ2V0KG4pLmdldChvKTtpZighdHx8ITA9PT1zLmlzTW9kaWZpZWQpcmV0dXJuIHI9ITF9cmV0dXJuIHRoaXMubGlzdC5nZXQobikuc2V0KG8sZSksdGhpcy5fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIobixlKSx0aGlzLl9zZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWUobixlKSx0aGlzLl9zZXRHcm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZShuLGUpLHJ9fSx7a2V5OlwidW5zaGlmdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKHppKGUpKXtpZihlLmxlbmd0aD4wKXt0PWVbMF0uY29udmVyc2F0aW9uSUQ7dmFyIG49ZS5sZW5ndGg7dGhpcy5fdW5zaGlmdE11bHRpcGxlTWVzc2FnZXMoZSksdGhpcy5fc2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2UodCxlW24tMV0pfX1lbHNlIHQ9ZS5jb252ZXJzYXRpb25JRCx0aGlzLl91bnNoaWZ0U2luZ2xlTWVzc2FnZShlKSx0aGlzLl9zZXRHcm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZSh0LGUpO2lmKHQmJnQuc3RhcnRzV2l0aChyby5DT05WX0MyQykpe3ZhciBvPUFycmF5LmZyb20odGhpcy5saXN0LmdldCh0KS52YWx1ZXMoKSkscj1vLmxlbmd0aDtpZigwPT09cilyZXR1cm47Zm9yKHZhciBhPXItMTthPj0wO2EtLSlpZihcIm91dFwiPT09b1thXS5mbG93KXt0aGlzLl9zZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWUodCxvW2FdKTticmVha31mb3IodmFyIHM9ci0xO3M+PTA7cy0tKWlmKFwiaW5cIj09PW9bc10uZmxvdyl7dGhpcy5fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIodCxvW3NdKTticmVha319fX0se2tleTpcIl91bnNoaWZ0U2luZ2xlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLklEO2lmKCF0aGlzLmxpc3QuaGFzKHQpKXJldHVybiB0aGlzLmxpc3Quc2V0KHQsbmV3IE1hcCksdm9pZCB0aGlzLmxpc3QuZ2V0KHQpLnNldChuLGUpO3ZhciBvPUFycmF5LmZyb20odGhpcy5saXN0LmdldCh0KSk7by51bnNoaWZ0KFtuLGVdKSx0aGlzLmxpc3Quc2V0KHQsbmV3IE1hcChvKSl9fSx7a2V5OlwiX3Vuc2hpZnRNdWx0aXBsZU1lc3NhZ2VzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLG49W10sbz1lWzBdLmNvbnZlcnNhdGlvbklELHI9dGhpcy5saXN0LmhhcyhvKT9BcnJheS5mcm9tKHRoaXMubGlzdC5nZXQobykpOltdLGE9MDthPHQ7YSsrKW4ucHVzaChbZVthXS5JRCxlW2FdXSk7dGhpcy5saXN0LnNldChvLG5ldyBNYXAobi5jb25jYXQocikpKX19LHtrZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5JRDt0aGlzLmxpc3QuaGFzKHQpJiZ0aGlzLmxpc3QuZ2V0KHQpLmRlbGV0ZShuKX19LHtrZXk6XCJyZXZva2VcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7aWYoS2kuZGVidWcoXCJyZXZva2UgbWVzc2FnZVwiLGUsdCxuKSx0aGlzLmxpc3QuaGFzKGUpKXt2YXIgbyxyPVModGhpcy5saXN0LmdldChlKSk7dHJ5e2ZvcihyLnMoKTshKG89ci5uKCkpLmRvbmU7KXt2YXIgYT1tKG8udmFsdWUsMilbMV07aWYoYS5zZXF1ZW5jZT09PXQmJiFhLmlzUmV2b2tlZCYmKEppKG4pfHxhLnJhbmRvbT09PW4pKXJldHVybiBhLmlzUmV2b2tlZD0hMCxhfX1jYXRjaChzKXtyLmUocyl9ZmluYWxseXtyLmYoKX19cmV0dXJuIG51bGx9fSx7a2V5OlwicmVtb3ZlQnlDb252ZXJzYXRpb25JRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMubGlzdC5oYXMoZSkmJih0aGlzLmxpc3QuZGVsZXRlKGUpLHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlQZWVyTWFwLmRlbGV0ZShlKSx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXAuZGVsZXRlKGUpKX19LHtrZXk6XCJ1cGRhdGVNZXNzYWdlSXNQZWVyUmVhZFByb3BlcnR5XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXTtpZih0aGlzLmxpc3QuaGFzKGUpKXt2YXIgbyxyPVModGhpcy5saXN0LmdldChlKSk7dHJ5e2ZvcihyLnMoKTshKG89ci5uKCkpLmRvbmU7KXt2YXIgYT1tKG8udmFsdWUsMilbMV07YS50aW1lPD10JiYhYS5pc1BlZXJSZWFkJiZcIm91dFwiPT09YS5mbG93JiYoYS5pc1BlZXJSZWFkPSEwLG4ucHVzaChhKSl9fWNhdGNoKHMpe3IuZShzKX1maW5hbGx5e3IuZigpfUtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIudXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eSBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgcGVlclJlYWRUaW1lOlwiKS5jb25jYXQodCxcIiBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSl9cmV0dXJuIG59fSx7a2V5OlwidXBkYXRlTWVzc2FnZUlzTW9kaWZpZWRQcm9wZXJ0eVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLklEO2lmKHRoaXMubGlzdC5oYXModCkpe3ZhciBvPXRoaXMubGlzdC5nZXQodCkuZ2V0KG4pO28mJihvLmlzTW9kaWZpZWQ9ITApfX19LHtrZXk6XCJoYXNMb2NhbE1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubGlzdC5oYXMoZSl9fSx7a2V5OlwiZ2V0TG9jYWxNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhhc0xvY2FsTWVzc2FnZUxpc3QoZSk/dih0aGlzLmxpc3QuZ2V0KGUpLnZhbHVlcygpKTpbXX19LHtrZXk6XCJoYXNMb2NhbE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEhdGhpcy5oYXNMb2NhbE1lc3NhZ2VMaXN0KGUpJiZ0aGlzLmxpc3QuZ2V0KGUpLmhhcyh0KX19LHtrZXk6XCJnZXRMb2NhbE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmhhc0xvY2FsTWVzc2FnZShlLHQpP3RoaXMubGlzdC5nZXQoZSkuZ2V0KHQpOm51bGx9fSx7a2V5OlwiX3NldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLnN0YXJ0c1dpdGgocm8uQ09OVl9DMkMpJiZcImluXCI9PT10LmZsb3cmJnRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlQZWVyTWFwLnNldChlLHQpfX0se2tleTpcIl9zZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Uuc3RhcnRzV2l0aChyby5DT05WX0MyQykmJlwib3V0XCI9PT10LmZsb3cmJnRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlNZU1hcC5zZXQoZSx0KX19LHtrZXk6XCJfc2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Uuc3RhcnRzV2l0aChyby5DT05WX0dST1VQKSYmdGhpcy5fZ3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2VNYXAuc2V0KGUsdC5zZXF1ZW5jZSl9fSx7a2V5OlwiZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJNYXAuZ2V0KGUpfX0se2tleTpcImdldExhdGVzdE1lc3NhZ2VTZW50QnlNZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXAuZ2V0KGUpfX0se2tleTpcImdldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2dyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLmdldChlKXx8MH19LHtrZXk6XCJtb2RpZnlNZXNzYWdlU2VudEJ5UGVlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5saXN0LmdldChlKTtpZighT3Uobikpe3ZhciBvPUFycmF5LmZyb20obi52YWx1ZXMoKSkscj1vLmxlbmd0aDtpZigwIT09cil7dmFyIGE9bnVsbCxzPW51bGw7dCYmKHM9dCk7Zm9yKHZhciBpPTAsdT0hMSxjPXItMTtjPj0wO2MtLSlcImluXCI9PT1vW2NdLmZsb3cmJihudWxsPT09cz9zPW9bY106KChhPW9bY10pLm5pY2shPT1zLm5pY2smJihhLnNldE5pY2tBbmRBdmF0YXIoe25pY2s6cy5uaWNrfSksdT0hMCksYS5hdmF0YXIhPT1zLmF2YXRhciYmKGEuc2V0Tmlja0FuZEF2YXRhcih7YXZhdGFyOnMuYXZhdGFyfSksdT0hMCksdSYmKGkrPTEpKSk7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5tb2RpZnlNZXNzYWdlU2VudEJ5UGVlciBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgY291bnQ6XCIpLmNvbmNhdChpKSl9fX19LHtrZXk6XCJtb2RpZnlNZXNzYWdlU2VudEJ5TWVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5sYXRlc3ROaWNrLG89ZS5sYXRlc3RBdmF0YXIscj10aGlzLmxpc3QuZ2V0KHQpO2lmKCFPdShyKSl7dmFyIGE9QXJyYXkuZnJvbShyLnZhbHVlcygpKSxzPWEubGVuZ3RoO2lmKDAhPT1zKXtmb3IodmFyIGk9bnVsbCx1PTAsYz0hMSxsPXMtMTtsPj0wO2wtLSlcIm91dFwiPT09YVtsXS5mbG93JiYoKGk9YVtsXSkubmljayE9PW4mJihpLnNldE5pY2tBbmRBdmF0YXIoe25pY2s6bn0pLGM9ITApLGkuYXZhdGFyIT09byYmKGkuc2V0Tmlja0FuZEF2YXRhcih7YXZhdGFyOm99KSxjPSEwKSxjJiYodSs9MSkpO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIubW9kaWZ5TWVzc2FnZVNlbnRCeU1lIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQodCxcIiBjb3VudDpcIikuY29uY2F0KHUpKX19fX0se2tleTpcInRyYXZlcnNhbFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoMCE9PXRoaXMubGlzdC5zaXplJiYtMT09PUtpLmdldExldmVsKCkpe2NvbnNvbGUuZ3JvdXAoXCJjb252ZXJzYXRpb25JRC1tZXNzYWdlQ291bnRcIik7dmFyIGUsdD1TKHRoaXMubGlzdCk7dHJ5e2Zvcih0LnMoKTshKGU9dC5uKCkpLmRvbmU7KXt2YXIgbj1tKGUudmFsdWUsMiksbz1uWzBdLHI9blsxXTtjb25zb2xlLmxvZyhcIlwiLmNvbmNhdChvLFwiLVwiKS5jb25jYXQoci5zaXplKSl9fWNhdGNoKGEpe3QuZShhKX1maW5hbGx5e3QuZigpfWNvbnNvbGUuZ3JvdXBFbmQoKX19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMubGlzdC5jbGVhcigpLHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlQZWVyTWFwLmNsZWFyKCksdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeU1lTWFwLmNsZWFyKCksdGhpcy5fZ3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2VNYXAuY2xlYXIoKX19XSksZX0oKSxndj17Q09OVEVYVF9BMktFWV9BTkRfVElOWUlEX1VQREFURUQ6XCJfYTJLZXlBbmRUaW55SURVcGRhdGVkXCIsQ0xPVURfQ09ORklHX1VQREFURUQ6XCJfY2xvdWRDb25maWdVcGRhdGVkXCJ9O2Z1bmN0aW9uIGh2KGUpe3RoaXMubWl4aW4oZSl9aHYubWl4aW49ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wcm90b3R5cGV8fGU7dC5faXNSZWFkeT0hMSx0LnJlYWR5PWZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV07aWYoZSlyZXR1cm4gdGhpcy5faXNSZWFkeT92b2lkKHQ/ZS5jYWxsKHRoaXMpOnNldFRpbWVvdXQoZSwxKSk6KHRoaXMuX3JlYWR5UXVldWU9dGhpcy5fcmVhZHlRdWV1ZXx8W10sdm9pZCB0aGlzLl9yZWFkeVF1ZXVlLnB1c2goZSkpfSx0LnRyaWdnZXJSZWFkeT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5faXNSZWFkeT0hMCxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3ZhciB0PWUuX3JlYWR5UXVldWU7ZS5fcmVhZHlRdWV1ZT1bXSx0JiZ0Lmxlbmd0aD4wJiZ0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuY2FsbCh0aGlzKX0pLGUpfSksMSl9LHQucmVzZXRSZWFkeT1mdW5jdGlvbigpe3RoaXMuX2lzUmVhZHk9ITEsdGhpcy5fcmVhZHlRdWV1ZT1bXX0sdC5pc1JlYWR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzUmVhZHl9fTt2YXIgZnY9W1wianBnXCIsXCJqcGVnXCIsXCJnaWZcIixcInBuZ1wiLFwiYm1wXCJdLF92PVtcIm1wNFwiXSxtdj0xLHZ2PTIsTXY9Myx5dj0yNTUsSXY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3ZhciBuPXRoaXM7byh0aGlzLGUpLE91KHQpfHwodGhpcy51c2VySUQ9dC51c2VySUR8fFwiXCIsdGhpcy5uaWNrPXQubmlja3x8XCJcIix0aGlzLmdlbmRlcj10LmdlbmRlcnx8XCJcIix0aGlzLmJpcnRoZGF5PXQuYmlydGhkYXl8fDAsdGhpcy5sb2NhdGlvbj10LmxvY2F0aW9ufHxcIlwiLHRoaXMuc2VsZlNpZ25hdHVyZT10LnNlbGZTaWduYXR1cmV8fFwiXCIsdGhpcy5hbGxvd1R5cGU9dC5hbGxvd1R5cGV8fHJvLkFMTE9XX1RZUEVfQUxMT1dfQU5ZLHRoaXMubGFuZ3VhZ2U9dC5sYW5ndWFnZXx8MCx0aGlzLmF2YXRhcj10LmF2YXRhcnx8XCJcIix0aGlzLm1lc3NhZ2VTZXR0aW5ncz10Lm1lc3NhZ2VTZXR0aW5nc3x8MCx0aGlzLmFkbWluRm9yYmlkVHlwZT10LmFkbWluRm9yYmlkVHlwZXx8cm8uRk9SQklEX1RZUEVfTk9ORSx0aGlzLmxldmVsPXQubGV2ZWx8fDAsdGhpcy5yb2xlPXQucm9sZXx8MCx0aGlzLmxhc3RVcGRhdGVkVGltZT0wLHRoaXMucHJvZmlsZUN1c3RvbUZpZWxkPVtdLE91KHQucHJvZmlsZUN1c3RvbUZpZWxkKXx8dC5wcm9maWxlQ3VzdG9tRmllbGQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bi5wcm9maWxlQ3VzdG9tRmllbGQucHVzaCh7a2V5OmUua2V5LHZhbHVlOmUudmFsdWV9KX0pKSl9cmV0dXJuIGEoZSxbe2tleTpcInZhbGlkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ITAsbj1cIlwiO2lmKE91KGUpKXJldHVybnt2YWxpZDohMSx0aXBzOlwiZW1wdHkgb3B0aW9uc1wifTtpZihlLnByb2ZpbGVDdXN0b21GaWVsZClmb3IodmFyIG89ZS5wcm9maWxlQ3VzdG9tRmllbGQubGVuZ3RoLHI9bnVsbCxhPTA7YTxvO2ErKyl7aWYocj1lLnByb2ZpbGVDdXN0b21GaWVsZFthXSwhWWkoci5rZXkpfHwtMT09PXIua2V5LmluZGV4T2YoXCJUYWdfUHJvZmlsZV9DdXN0b21cIikpcmV0dXJue3ZhbGlkOiExLHRpcHM6XCLoh6rlrprkuYnotYTmlpnlrZfmrrXnmoTliY3nvIDlv4XpobvmmK8gVGFnX1Byb2ZpbGVfQ3VzdG9tXCJ9O2lmKCFZaShyLnZhbHVlKSlyZXR1cm57dmFsaWQ6ITEsdGlwczpcIuiHquWumuS5iei1hOaWmeWtl+auteeahCB2YWx1ZSDlv4XpobvmmK/lrZfnrKbkuLJcIn19Zm9yKHZhciBzIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscykpe2lmKFwicHJvZmlsZUN1c3RvbUZpZWxkXCI9PT1zKWNvbnRpbnVlO2lmKE91KGVbc10pJiYhWWkoZVtzXSkmJiFqaShlW3NdKSl7bj1cImtleTpcIitzK1wiLCBpbnZhbGlkIHZhbHVlOlwiK2Vbc10sdD0hMTtjb250aW51ZX1zd2l0Y2gocyl7Y2FzZVwibmlja1wiOllpKGVbc10pfHwobj1cIm5pY2sgc2hvdWxkIGJlIGEgc3RyaW5nXCIsdD0hMSksc3UoZVtzXSk+NTAwJiYobj1cIm5pY2sgbmFtZSBsaW1pdGVkOiBtdXN0IGxlc3MgdGhhbiBvciBlcXVhbCB0byBcIi5jb25jYXQoNTAwLFwiIGJ5dGVzLCBjdXJyZW50IHNpemU6IFwiKS5jb25jYXQoc3UoZVtzXSksXCIgYnl0ZXNcIiksdD0hMSk7YnJlYWs7Y2FzZVwiZ2VuZGVyXCI6bHUoZG0sZS5nZW5kZXIpfHwobj1cImtleTpnZW5kZXIsIGludmFsaWQgdmFsdWU6XCIrZS5nZW5kZXIsdD0hMSk7YnJlYWs7Y2FzZVwiYmlydGhkYXlcIjpqaShlLmJpcnRoZGF5KXx8KG49XCJiaXJ0aGRheSBzaG91bGQgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztjYXNlXCJsb2NhdGlvblwiOllpKGUubG9jYXRpb24pfHwobj1cImxvY2F0aW9uIHNob3VsZCBiZSBhIHN0cmluZ1wiLHQ9ITEpO2JyZWFrO2Nhc2VcInNlbGZTaWduYXR1cmVcIjpZaShlLnNlbGZTaWduYXR1cmUpfHwobj1cInNlbGZTaWduYXR1cmUgc2hvdWxkIGJlIGEgc3RyaW5nXCIsdD0hMSk7YnJlYWs7Y2FzZVwiYWxsb3dUeXBlXCI6bHUoZ20sZS5hbGxvd1R5cGUpfHwobj1cImtleTphbGxvd1R5cGUsIGludmFsaWQgdmFsdWU6XCIrZS5hbGxvd1R5cGUsdD0hMSk7YnJlYWs7Y2FzZVwibGFuZ3VhZ2VcIjpqaShlLmxhbmd1YWdlKXx8KG49XCJsYW5ndWFnZSBzaG91bGQgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztjYXNlXCJhdmF0YXJcIjpZaShlLmF2YXRhcil8fChuPVwiYXZhdGFyIHNob3VsZCBiZSBhIHN0cmluZ1wiLHQ9ITEpO2JyZWFrO2Nhc2VcIm1lc3NhZ2VTZXR0aW5nc1wiOjAhPT1lLm1lc3NhZ2VTZXR0aW5ncyYmMSE9PWUubWVzc2FnZVNldHRpbmdzJiYobj1cIm1lc3NhZ2VTZXR0aW5ncyBzaG91bGQgYmUgMCBvciAxXCIsdD0hMSk7YnJlYWs7Y2FzZVwiYWRtaW5Gb3JiaWRUeXBlXCI6bHUocG0sZS5hZG1pbkZvcmJpZFR5cGUpfHwobj1cImtleTphZG1pbkZvcmJpZFR5cGUsIGludmFsaWQgdmFsdWU6XCIrZS5hZG1pbkZvcmJpZFR5cGUsdD0hMSk7YnJlYWs7Y2FzZVwibGV2ZWxcIjpqaShlLmxldmVsKXx8KG49XCJsZXZlbCBzaG91bGQgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztjYXNlXCJyb2xlXCI6amkoZS5yb2xlKXx8KG49XCJyb2xlIHNob3VsZCBiZSBhIG51bWJlclwiLHQ9ITEpO2JyZWFrO2RlZmF1bHQ6bj1cInVua25vd24ga2V5OlwiK3MrXCIgIFwiK2Vbc10sdD0hMX19cmV0dXJue3ZhbGlkOnQsdGlwczpufX19XSksZX0oKSxUdj1mdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLnZhbHVlPXQsdGhpcy5uZXh0PW51bGx9LER2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5NQVhfTEVOR1RIPXQsdGhpcy5wVGFpbD1udWxsLHRoaXMucE5vZGVUb0RlbD1udWxsLHRoaXMubWFwPW5ldyBNYXAsS2kuZGVidWcoXCJTaW5nbHlMaW5rZWRMaXN0IGluaXQgTUFYX0xFTkdUSDpcIi5jb25jYXQodGhpcy5NQVhfTEVOR1RIKSl9cmV0dXJuIGEoZSxbe2tleTpcInNldFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBUdihlKTtpZih0aGlzLm1hcC5zaXplPHRoaXMuTUFYX0xFTkdUSCludWxsPT09dGhpcy5wVGFpbD8odGhpcy5wVGFpbD10LHRoaXMucE5vZGVUb0RlbD10KToodGhpcy5wVGFpbC5uZXh0PXQsdGhpcy5wVGFpbD10KSx0aGlzLm1hcC5zZXQoZSwxKTtlbHNle3ZhciBuPXRoaXMucE5vZGVUb0RlbDt0aGlzLnBOb2RlVG9EZWw9dGhpcy5wTm9kZVRvRGVsLm5leHQsdGhpcy5tYXAuZGVsZXRlKG4udmFsdWUpLG4ubmV4dD1udWxsLG49bnVsbCx0aGlzLnBUYWlsLm5leHQ9dCx0aGlzLnBUYWlsPXQsdGhpcy5tYXAuc2V0KGUsMSl9fX0se2tleTpcImhhc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1hcC5oYXMoZSl9fSx7a2V5OlwiZGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5oYXMoZSkmJnRoaXMubWFwLmRlbGV0ZShlKX19LHtrZXk6XCJ0YWlsXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wVGFpbH19LHtrZXk6XCJzaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAuc2l6ZX19LHtrZXk6XCJkYXRhXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm1hcC5rZXlzKCkpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGU7bnVsbCE9PXRoaXMucE5vZGVUb0RlbDspZT10aGlzLnBOb2RlVG9EZWwsdGhpcy5wTm9kZVRvRGVsPXRoaXMucE5vZGVUb0RlbC5uZXh0LGUubmV4dD1udWxsLGU9bnVsbDt0aGlzLnBUYWlsPW51bGwsdGhpcy5tYXAuY2xlYXIoKX19XSksZX0oKSxTdj1bXCJncm91cElEXCIsXCJuYW1lXCIsXCJhdmF0YXJcIixcInR5cGVcIixcImludHJvZHVjdGlvblwiLFwibm90aWZpY2F0aW9uXCIsXCJvd25lcklEXCIsXCJzZWxmSW5mb1wiLFwiY3JlYXRlVGltZVwiLFwiaW5mb1NlcXVlbmNlXCIsXCJsYXN0SW5mb1RpbWVcIixcImxhc3RNZXNzYWdlXCIsXCJuZXh0TWVzc2FnZVNlcVwiLFwibWVtYmVyTnVtXCIsXCJtYXhNZW1iZXJOdW1cIixcIm1lbWJlckxpc3RcIixcImpvaW5PcHRpb25cIixcImdyb3VwQ3VzdG9tRmllbGRcIixcIm11dGVBbGxNZW1iZXJzXCJdLEV2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5ncm91cElEPVwiXCIsdGhpcy5uYW1lPVwiXCIsdGhpcy5hdmF0YXI9XCJcIix0aGlzLnR5cGU9XCJcIix0aGlzLmludHJvZHVjdGlvbj1cIlwiLHRoaXMubm90aWZpY2F0aW9uPVwiXCIsdGhpcy5vd25lcklEPVwiXCIsdGhpcy5jcmVhdGVUaW1lPVwiXCIsdGhpcy5pbmZvU2VxdWVuY2U9XCJcIix0aGlzLmxhc3RJbmZvVGltZT1cIlwiLHRoaXMuc2VsZkluZm89e21lc3NhZ2VSZW1pbmRUeXBlOlwiXCIsam9pblRpbWU6XCJcIixuYW1lQ2FyZDpcIlwiLHJvbGU6XCJcIn0sdGhpcy5sYXN0TWVzc2FnZT17bGFzdFRpbWU6XCJcIixsYXN0U2VxdWVuY2U6XCJcIixmcm9tQWNjb3VudDpcIlwiLG1lc3NhZ2VGb3JTaG93OlwiXCJ9LHRoaXMubmV4dE1lc3NhZ2VTZXE9XCJcIix0aGlzLm1lbWJlck51bT1cIlwiLHRoaXMubWVtYmVyQ291bnQ9XCJcIix0aGlzLm1heE1lbWJlck51bT1cIlwiLHRoaXMubWF4TWVtYmVyQ291bnQ9XCJcIix0aGlzLmpvaW5PcHRpb249XCJcIix0aGlzLmdyb3VwQ3VzdG9tRmllbGQ9W10sdGhpcy5tdXRlQWxsTWVtYmVycz12b2lkIDAsdGhpcy5faW5pdEdyb3VwKHQpfXJldHVybiBhKGUsW3trZXk6XCJtZW1iZXJOdW1cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gS2kud2FybihcIu+8ge+8ge+8gXYyLjguMOi1t+W8g+eUqG1lbWJlck51be+8jOivt+S9v+eUqCBtZW1iZXJDb3VudFwiKSx0aGlzLm1lbWJlckNvdW50fSxzZXQ6ZnVuY3Rpb24oZSl7fX0se2tleTpcIm1heE1lbWJlck51bVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBLaS53YXJuKFwi77yB77yB77yBdjIuOC4w6LW35byD55SobWF4TWVtYmVyTnVt77yM6K+35L2/55SoIG1heE1lbWJlckNvdW50XCIpLHRoaXMubWF4TWVtYmVyQ291bnR9LHNldDpmdW5jdGlvbihlKXt9fSx7a2V5OlwiX2luaXRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKVN2LmluZGV4T2YodCk8MHx8KFwic2VsZkluZm9cIiE9PXQ/KFwibWVtYmVyTnVtXCI9PT10JiYodGhpcy5tZW1iZXJDb3VudD1lW3RdKSxcIm1heE1lbWJlck51bVwiPT09dCYmKHRoaXMubWF4TWVtYmVyQ291bnQ9ZVt0XSksdGhpc1t0XT1lW3RdKTp0aGlzLnVwZGF0ZVNlbGZJbmZvKGVbdF0pKX19LHtrZXk6XCJ1cGRhdGVHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpO3QubGFzdE1zZ1RpbWUmJih0aGlzLmxhc3RNZXNzYWdlLmxhc3RUaW1lPXQubGFzdE1zZ1RpbWUpLEppKHQubXV0ZUFsbE1lbWJlcnMpfHwoXCJPblwiPT09dC5tdXRlQWxsTWVtYmVycz90Lm11dGVBbGxNZW1iZXJzPSEwOnQubXV0ZUFsbE1lbWJlcnM9ITEpLHQuZ3JvdXBDdXN0b21GaWVsZCYmZnUodGhpcy5ncm91cEN1c3RvbUZpZWxkLHQuZ3JvdXBDdXN0b21GaWVsZCksSmkodC5tZW1iZXJOdW0pfHwodGhpcy5tZW1iZXJDb3VudD10Lm1lbWJlck51bSksSmkodC5tYXhNZW1iZXJOdW0pfHwodGhpcy5tYXhNZW1iZXJDb3VudD10Lm1heE1lbWJlck51bSkscnUodGhpcyx0LFtcIm1lbWJlcnNcIixcImVycm9yQ29kZVwiLFwibGFzdE1zZ1RpbWVcIixcImdyb3VwQ3VzdG9tRmllbGRcIixcIm1lbWJlck51bVwiLFwibWF4TWVtYmVyTnVtXCJdKX19LHtrZXk6XCJ1cGRhdGVTZWxmSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUubmFtZUNhcmQsbj1lLmpvaW5UaW1lLG89ZS5yb2xlLHI9ZS5tZXNzYWdlUmVtaW5kVHlwZTtydSh0aGlzLnNlbGZJbmZvLHtuYW1lQ2FyZDp0LGpvaW5UaW1lOm4scm9sZTpvLG1lc3NhZ2VSZW1pbmRUeXBlOnJ9LFtdLFtcIlwiLG51bGwsdm9pZCAwLDAsTmFOXSl9fSx7a2V5Olwic2V0U2VsZk5hbWVDYXJkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zZWxmSW5mby5uYW1lQ2FyZD1lfX1dKSxlfSgpLEF2PWZ1bmN0aW9uKGUsdCl7aWYoSmkodCkpcmV0dXJuXCJcIjtzd2l0Y2goZSl7Y2FzZSByby5NU0dfVEVYVDpyZXR1cm4gdC50ZXh0O2Nhc2Ugcm8uTVNHX0lNQUdFOnJldHVyblwiW+WbvueJh11cIjtjYXNlIHJvLk1TR19HRU86cmV0dXJuXCJb5L2N572uXVwiO2Nhc2Ugcm8uTVNHX0FVRElPOnJldHVyblwiW+ivremfs11cIjtjYXNlIHJvLk1TR19WSURFTzpyZXR1cm5cIlvop4bpopFdXCI7Y2FzZSByby5NU0dfRklMRTpyZXR1cm5cIlvmlofku7ZdXCI7Y2FzZSByby5NU0dfQ1VTVE9NOnJldHVyblwiW+iHquWumuS5iea2iOaBr11cIjtjYXNlIHJvLk1TR19HUlBfVElQOnJldHVyblwiW+e+pOaPkOekuua2iOaBr11cIjtjYXNlIHJvLk1TR19HUlBfU1lTX05PVElDRTpyZXR1cm5cIlvnvqTns7vnu5/pgJrnn6VdXCI7Y2FzZSByby5NU0dfRkFDRTpyZXR1cm5cIlvliqjnlLvooajmg4VdXCI7Y2FzZSByby5NU0dfTUVSR0VSOnJldHVyblwiW+iBiuWkqeiusOW9lV1cIjtkZWZhdWx0OnJldHVyblwiXCJ9fSxrdj1mdW5jdGlvbihlKXtyZXR1cm4gSmkoZSk/e2xhc3RUaW1lOjAsbGFzdFNlcXVlbmNlOjAsZnJvbUFjY291bnQ6MCxtZXNzYWdlRm9yU2hvdzpcIlwiLHBheWxvYWQ6bnVsbCx0eXBlOlwiXCIsaXNSZXZva2VkOiExLGNsb3VkQ3VzdG9tRGF0YTpcIlwiLG9ubGluZU9ubHlGbGFnOiExfTplIGluc3RhbmNlb2YgR20/e2xhc3RUaW1lOmUudGltZXx8MCxsYXN0U2VxdWVuY2U6ZS5zZXF1ZW5jZXx8MCxmcm9tQWNjb3VudDplLmZyb218fFwiXCIsbWVzc2FnZUZvclNob3c6QXYoZS50eXBlLGUucGF5bG9hZCkscGF5bG9hZDplLnBheWxvYWR8fG51bGwsdHlwZTplLnR5cGV8fG51bGwsaXNSZXZva2VkOmUuaXNSZXZva2VkfHwhMSxjbG91ZEN1c3RvbURhdGE6ZS5jbG91ZEN1c3RvbURhdGF8fFwiXCIsb25saW5lT25seUZsYWc6ISFRaShlLmdldE9ubGluZU9ubHlGbGFnKSYmZS5nZXRPbmxpbmVPbmx5RmxhZygpfTp0KHQoe30sZSkse30se21lc3NhZ2VGb3JTaG93OkF2KGUudHlwZSxlLnBheWxvYWQpfSl9LE52PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5jb252ZXJzYXRpb25JRD10LmNvbnZlcnNhdGlvbklEfHxcIlwiLHRoaXMudW5yZWFkQ291bnQ9dC51bnJlYWRDb3VudHx8MCx0aGlzLnR5cGU9dC50eXBlfHxcIlwiLHRoaXMubGFzdE1lc3NhZ2U9a3YodC5sYXN0TWVzc2FnZSksdC5sYXN0TXNnVGltZSYmKHRoaXMubGFzdE1lc3NhZ2UubGFzdFRpbWU9dC5sYXN0TXNnVGltZSksdGhpcy5faXNJbmZvQ29tcGxldGVkPSExLHRoaXMucGVlclJlYWRUaW1lPXQucGVlclJlYWRUaW1lfHwwLHRoaXMuZ3JvdXBBdEluZm9MaXN0PVtdLHRoaXMucmVtYXJrPVwiXCIsdGhpcy5pc1Bpbm5lZD10LmlzUGlubmVkfHwhMSx0aGlzLl9pbml0UHJvZmlsZSh0KX1yZXR1cm4gYShlLFt7a2V5OlwidG9BY2NvdW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udmVyc2F0aW9uSUQuc3RhcnRzV2l0aChyby5DT05WX0MyQyk/dGhpcy5jb252ZXJzYXRpb25JRC5yZXBsYWNlKHJvLkNPTlZfQzJDLFwiXCIpOnRoaXMuY29udmVyc2F0aW9uSUQuc3RhcnRzV2l0aChyby5DT05WX0dST1VQKT90aGlzLmNvbnZlcnNhdGlvbklELnJlcGxhY2Uocm8uQ09OVl9HUk9VUCxcIlwiKTpcIlwifX0se2tleTpcInN1YlR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cFByb2ZpbGU/dGhpcy5ncm91cFByb2ZpbGUudHlwZTpcIlwifX0se2tleTpcIl9pbml0UHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7c3dpdGNoKG4pe2Nhc2VcInVzZXJQcm9maWxlXCI6dC51c2VyUHJvZmlsZT1lLnVzZXJQcm9maWxlO2JyZWFrO2Nhc2VcImdyb3VwUHJvZmlsZVwiOnQuZ3JvdXBQcm9maWxlPWUuZ3JvdXBQcm9maWxlfX0pKSxKaSh0aGlzLnVzZXJQcm9maWxlKSYmdGhpcy50eXBlPT09cm8uQ09OVl9DMkM/dGhpcy51c2VyUHJvZmlsZT1uZXcgSXYoe3VzZXJJRDplLmNvbnZlcnNhdGlvbklELnJlcGxhY2UoXCJDMkNcIixcIlwiKX0pOkppKHRoaXMuZ3JvdXBQcm9maWxlKSYmdGhpcy50eXBlPT09cm8uQ09OVl9HUk9VUCYmKHRoaXMuZ3JvdXBQcm9maWxlPW5ldyBFdih7Z3JvdXBJRDplLmNvbnZlcnNhdGlvbklELnJlcGxhY2UoXCJHUk9VUFwiLFwiXCIpfSkpfX0se2tleTpcInVwZGF0ZVVucmVhZENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtKaShlKXx8KG11KHRoaXMuc3ViVHlwZSk/dGhpcy51bnJlYWRDb3VudD0wOnQmJnRoaXMudHlwZT09PXJvLkNPTlZfR1JPVVA/dGhpcy51bnJlYWRDb3VudD1lOnRoaXMudW5yZWFkQ291bnQ9dGhpcy51bnJlYWRDb3VudCtlKX19LHtrZXk6XCJ1cGRhdGVMYXN0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMubGFzdE1lc3NhZ2U9a3YoZSl9fSx7a2V5OlwidXBkYXRlR3JvdXBBdEluZm9MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQsbj0oTSh0PWUuZ3JvdXBBdFR5cGUpfHx5KHQpfHxJKHQpfHxEKCkpLnNsaWNlKDApOy0xIT09bi5pbmRleE9mKHJvLkNPTlZfQVRfTUUpJiYtMSE9PW4uaW5kZXhPZihyby5DT05WX0FUX0FMTCkmJihuPVtyby5DT05WX0FUX0FMTF9BVF9NRV0pO3ZhciBvPXtmcm9tOmUuZnJvbSxncm91cElEOmUuZ3JvdXBJRCxtZXNzYWdlU2VxdWVuY2U6ZS5zZXF1ZW5jZSxhdFR5cGVBcnJheTpuLF9fcmFuZG9tOmUuX19yYW5kb20sX19zZXF1ZW5jZTplLl9fc2VxdWVuY2V9O3RoaXMuZ3JvdXBBdEluZm9MaXN0LnB1c2gobyksS2kuZGVidWcoXCJDb252ZXJzYXRpb24udXBkYXRlR3JvdXBBdEluZm9MaXN0IGNvbnZlcnNhdGlvbklEOlwiLmNvbmNhdCh0aGlzLmNvbnZlcnNhdGlvbklEKSx0aGlzLmdyb3VwQXRJbmZvTGlzdCl9fSx7a2V5OlwiY2xlYXJHcm91cEF0SW5mb0xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ3JvdXBBdEluZm9MaXN0Lmxlbmd0aD0wfX0se2tleTpcInJlZHVjZVVucmVhZENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnVucmVhZENvdW50Pj0xJiYodGhpcy51bnJlYWRDb3VudC09MSl9fSx7a2V5OlwiaXNMYXN0TWVzc2FnZVJldm9rZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNlcXVlbmNlLG49ZS50aW1lO3JldHVybiB0aGlzLnR5cGU9PT1yby5DT05WX0MyQyYmdD09PXRoaXMubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlJiZuPT09dGhpcy5sYXN0TWVzc2FnZS5sYXN0VGltZXx8dGhpcy50eXBlPT09cm8uQ09OVl9HUk9VUCYmdD09PXRoaXMubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlfX0se2tleTpcInNldExhc3RNZXNzYWdlUmV2b2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMubGFzdE1lc3NhZ2UuaXNSZXZva2VkPWV9fV0pLGV9KCksQ3Y9ZnVuY3Rpb24oZSl7aShyLGUpO3ZhciBuPV8ocik7ZnVuY3Rpb24gcihlKXt2YXIgdDtyZXR1cm4gbyh0aGlzLHIpLCh0PW4uY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiQ29udmVyc2F0aW9uTW9kdWxlXCIsaHYubWl4aW4oaCh0KSksdC5fbWVzc2FnZUxpc3RIYW5kbGVyPW5ldyBwdix0LnNpbmdseUxpbmtlZExpc3Q9bmV3IER2KDEwMCksdC5fcGFnaW5nU3RhdHVzPUFjLk5PVF9TVEFSVCx0Ll9wYWdpbmdUaW1lU3RhbXA9MCx0Ll9wYWdpbmdTdGFydEluZGV4PTAsdC5fcGFnaW5nUGlubmVkVGltZVN0YW1wPTAsdC5fcGFnaW5nUGlubmVkU3RhcnRJbmRleD0wLHQuX2NvbnZlcnNhdGlvbk1hcD1uZXcgTWFwLHQuX3RtcEdyb3VwTGlzdD1bXSx0Ll90bXBHcm91cEF0VGlwc0xpc3Q9W10sdC5fcGVlclJlYWRUaW1lTWFwPW5ldyBNYXAsdC5fY29tcGxldGVkTWFwPW5ldyBNYXAsdC5fcm9hbWluZ01lc3NhZ2VLZXlNYXA9bmV3IE1hcCx0Ll9pbml0TGlzdGVuZXJzKCksdH1yZXR1cm4gYShyLFt7a2V5OlwiX2luaXRMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihndi5DT05URVhUX0EyS0VZX0FORF9USU5ZSURfVVBEQVRFRCx0aGlzLl9pbml0TG9jYWxDb252ZXJzYXRpb25MaXN0LHRoaXMpfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UlNjA9PTAmJnRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci50cmF2ZXJzYWwoKX19LHtrZXk6XCJfaW5pdExvY2FsQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBsZyhWZyk7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5faW5pdExvY2FsQ29udmVyc2F0aW9uTGlzdC5cIikpO3ZhciBuPVwiXCIsbz10aGlzLl9nZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdCgpO2lmKG8pe2Zvcih2YXIgcj1vLmxlbmd0aCxhPTA7YTxyO2ErKyl7dmFyIHM9b1thXTtpZihzJiZzLmdyb3VwUHJvZmlsZSl7dmFyIGk9cy5ncm91cFByb2ZpbGUudHlwZTtpZihtdShpKSljb250aW51ZX10aGlzLl9jb252ZXJzYXRpb25NYXAuc2V0KG9bYV0uY29udmVyc2F0aW9uSUQsbmV3IE52KG9bYV0pKX10aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSxuPVwiY291bnQ6XCIuY29uY2F0KHIpfWVsc2Ugbj1cImNvdW50OjBcIjt0LnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShuKS5lbmQoKSx0aGlzLmdldE1vZHVsZShZYyl8fHRoaXMudHJpZ2dlclJlYWR5KCksdGhpcy5yZWFkeSgoZnVuY3Rpb24oKXtlLl90bXBHcm91cExpc3QubGVuZ3RoPjAmJihlLnVwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShlLl90bXBHcm91cExpc3QpLGUuX3RtcEdyb3VwTGlzdC5sZW5ndGg9MCl9KSksdGhpcy5fc3luY0NvbnZlcnNhdGlvbkxpc3QoKX19LHtrZXk6XCJvbk1lc3NhZ2VTZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TZW5kT3JSZWNlaXZlTWVzc2FnZShlLmNvbnZlcnNhdGlvbk9wdGlvbnNMaXN0LCEwKX19LHtrZXk6XCJvbk5ld01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblNlbmRPclJlY2VpdmVNZXNzYWdlKGUuY29udmVyc2F0aW9uT3B0aW9uc0xpc3QsZS5pc0luc3RhbnRNZXNzYWdlKX19LHtrZXk6XCJfb25TZW5kT3JSZWNlaXZlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdO3RoaXMuX2lzUmVhZHk/MCE9PWUubGVuZ3RoJiYodGhpcy5fZ2V0QzJDUGVlclJlYWRUaW1lKGUpLHRoaXMuX3VwZGF0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdChlLCExLG4pLHRoaXMuX3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0KCksdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpKTp0aGlzLnJlYWR5KChmdW5jdGlvbigpe3QuX29uU2VuZE9yUmVjZWl2ZU1lc3NhZ2UoZSxuKX0pKX19LHtrZXk6XCJ1cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3ppKGUpJiYwPT09ZS5sZW5ndGh8fCgwIT09dGhpcy5fY29udmVyc2F0aW9uTWFwLnNpemU/KGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49XCJHUk9VUFwiLmNvbmNhdChlLmdyb3VwSUQpO2lmKHQuX2NvbnZlcnNhdGlvbk1hcC5oYXMobikpe3ZhciBvPXQuX2NvbnZlcnNhdGlvbk1hcC5nZXQobik7by5ncm91cFByb2ZpbGU9ZSxvLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZTxlLm5leHRNZXNzYWdlU2VxJiYoby5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2U9ZS5uZXh0TWVzc2FnZVNlcS0xKSxvLnN1YlR5cGV8fChvLnN1YlR5cGU9ZS50eXBlKX19KSksdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSkpOnRoaXMuX3RtcEdyb3VwTGlzdD1lKX19LHtrZXk6XCJfdXBkYXRlQ29udmVyc2F0aW9uVXNlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZGF0YS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1cIkMyQ1wiLmNvbmNhdChlLnVzZXJJRCk7dC5fY29udmVyc2F0aW9uTWFwLmhhcyhuKSYmKHQuX2NvbnZlcnNhdGlvbk1hcC5nZXQobikudXNlclByb2ZpbGU9ZSl9KSksdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSl9fSx7a2V5Olwib25NZXNzYWdlUmV2b2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoMCE9PWUubGVuZ3RoKXt2YXIgbj1udWxsLG89ITE7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXsobj10Ll9jb252ZXJzYXRpb25NYXAuZ2V0KGUuY29udmVyc2F0aW9uSUQpKSYmbi5pc0xhc3RNZXNzYWdlUmV2b2tlZChlKSYmKG89ITAsbi5zZXRMYXN0TWVzc2FnZVJldm9rZWQoITApKX0pKSxvJiZ0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX19fSx7a2V5Olwib25NZXNzYWdlRGVsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKDAhPT1lLmxlbmd0aCl7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmlzRGVsZXRlZD0hMH0pKTtmb3IodmFyIHQ9ZVswXS5jb252ZXJzYXRpb25JRCxuPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KHQpLG89e30scj1uLmxlbmd0aC0xO3I+MDtyLS0paWYoIW5bcl0uaXNEZWxldGVkKXtvPW5bcl07YnJlYWt9dmFyIGE9dGhpcy5fY29udmVyc2F0aW9uTWFwLmdldCh0KTtpZihhKXt2YXIgcz0hMTthLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZSE9PW8uc2VxdWVuY2UmJmEubGFzdE1lc3NhZ2UubGFzdFRpbWUhPT1vLnRpbWUmJihhLnVwZGF0ZUxhc3RNZXNzYWdlKG8pLHM9ITAsS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk1lc3NhZ2VEZWxldGVkLiB1cGRhdGUgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdCh0LFwiIHdpdGggbGFzdE1lc3NhZ2U6XCIpLGEubGFzdE1lc3NhZ2UpKSx0LnN0YXJ0c1dpdGgocm8uQ09OVl9DMkMpJiZ0aGlzLnVwZGF0ZVVucmVhZENvdW50KHQpLHMmJnRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX19fSx7a2V5Olwib25OZXdHcm91cEF0VGlwc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmRhdGFMaXN0LG89bnVsbDtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuZ3JvdXBBdFRpcHM/bz1lLmdyb3VwQXRUaXBzOmUuZWxlbWVudHMmJihvPWUuZWxlbWVudHMpLG8uX19yYW5kb209ZS5yYW5kb20sby5fX3NlcXVlbmNlPWUuY2xpZW50U2VxdWVuY2UsdC5fdG1wR3JvdXBBdFRpcHNMaXN0LnB1c2gobyl9KSksS2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTmV3R3JvdXBBdFRpcHMgaXNSZWFkeTpcIikuY29uY2F0KHRoaXMuX2lzUmVhZHkpLHRoaXMuX3RtcEdyb3VwQXRUaXBzTGlzdCksdGhpcy5faXNSZWFkeSYmdGhpcy5faGFuZGxlR3JvdXBBdFRpcHNMaXN0KCl9fSx7a2V5OlwiX2hhbmRsZUdyb3VwQXRUaXBzTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZigwIT09dGhpcy5fdG1wR3JvdXBBdFRpcHNMaXN0Lmxlbmd0aCl7dmFyIHQ9ITE7dGhpcy5fdG1wR3JvdXBBdFRpcHNMaXN0LmZvckVhY2goKGZ1bmN0aW9uKG4pe3ZhciBvPW4uZ3JvdXBJRDtpZihuLmZyb20hPT1lLmdldE15VXNlcklEKCkpe3ZhciByPWUuX2NvbnZlcnNhdGlvbk1hcC5nZXQoXCJcIi5jb25jYXQocm8uQ09OVl9HUk9VUCkuY29uY2F0KG8pKTtyJiYoci51cGRhdGVHcm91cEF0SW5mb0xpc3QobiksdD0hMCl9fSkpLHQmJnRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpLHRoaXMuX3RtcEdyb3VwQXRUaXBzTGlzdC5sZW5ndGg9MH19fSx7a2V5OlwiX2dldEMyQ1BlZXJSZWFkVGltZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1bXTtpZihlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX2NvbnZlcnNhdGlvbk1hcC5oYXMoZS5jb252ZXJzYXRpb25JRCl8fGUudHlwZSE9PXJvLkNPTlZfQzJDfHxuLnB1c2goZS5jb252ZXJzYXRpb25JRC5yZXBsYWNlKHJvLkNPTlZfQzJDLFwiXCIpKX0pKSxuLmxlbmd0aD4wKXtLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2dldEMyQ1BlZXJSZWFkVGltZSB1c2VySURMaXN0OlwiKS5jb25jYXQobikpO3ZhciBvPXRoaXMuZ2V0TW9kdWxlKFljKTtvJiZvLmdldFJlbW90ZVBlZXJSZWFkVGltZShuKX19fSx7a2V5OlwiX2dldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoUWMpLmdldEl0ZW0oXCJjb252ZXJzYXRpb25NYXBcIil9fSx7a2V5OlwiX3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpLnNsaWNlKDAsMjApLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2NvbnZlcnNhdGlvbklEOmUuY29udmVyc2F0aW9uSUQsdHlwZTplLnR5cGUsc3ViVHlwZTplLnN1YlR5cGUsbGFzdE1lc3NhZ2U6ZS5sYXN0TWVzc2FnZSxncm91cFByb2ZpbGU6ZS5ncm91cFByb2ZpbGUsdXNlclByb2ZpbGU6ZS51c2VyUHJvZmlsZX19KSk7dGhpcy5nZXRNb2R1bGUoUWMpLnNldEl0ZW0oXCJjb252ZXJzYXRpb25NYXBcIixlKX19LHtrZXk6XCJfZW1pdENvbnZlcnNhdGlvblVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXSx0PSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0sbj12KHRoaXMuX2NvbnZlcnNhdGlvbk1hcC52YWx1ZXMoKSk7aWYodCl7dmFyIG89dGhpcy5nZXRNb2R1bGUoJGMpO28mJm8udXBkYXRlR3JvdXBMYXN0TWVzc2FnZShuKX1lJiZ0aGlzLmVtaXRPdXRlckV2ZW50KG9vLkNPTlZFUlNBVElPTl9MSVNUX1VQREFURUQsbil9fSx7a2V5OlwiZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdih0aGlzLl9jb252ZXJzYXRpb25NYXAudmFsdWVzKCkpfX0se2tleTpcImdldExvY2FsQ29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZSl9fSx7a2V5OlwiX3N5bmNDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IGxnKEtnKTtyZXR1cm4gdGhpcy5fcGFnaW5nU3RhdHVzPT09QWMuTk9UX1NUQVJUJiZ0aGlzLl9jb252ZXJzYXRpb25NYXAuY2xlYXIoKSx0aGlzLl9wYWdpbmdHZXRDb252ZXJzYXRpb25MaXN0KCkudGhlbigoZnVuY3Rpb24obil7cmV0dXJuIGUuX3BhZ2luZ1N0YXR1cz1BYy5SRVNPTFZFRCxlLl9zZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdCgpLGUuX2hhbmRsZUMyQ1BlZXJSZWFkVGltZSgpLGUuY2hlY2tBbmRQYXRjaFJlbWFyaygpLHQuc2V0TWVzc2FnZShlLl9jb252ZXJzYXRpb25NYXAuc2l6ZSkuc2V0TmV0d29ya1R5cGUoZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxufSkpLmNhdGNoKChmdW5jdGlvbihuKXtyZXR1cm4gZS5fcGFnaW5nU3RhdHVzPUFjLlJFSkVDVEVELHQuc2V0TWVzc2FnZShlLl9wYWdpbmdUaW1lU3RhbXApLGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89bShlLDIpLHI9b1swXSxhPW9bMV07dC5zZXRFcnJvcihuLHIsYSkuZW5kKCl9KSksWW0obil9KSl9fSx7a2V5OlwiX3BhZ2luZ0dldENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3BhZ2luZ0dldENvbnZlcnNhdGlvbkxpc3RcIik7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdCh0LFwiIHRpbWVTdGFtcDpcIikuY29uY2F0KHRoaXMuX3BhZ2luZ1RpbWVTdGFtcCxcIiBzdGFydEluZGV4OlwiKS5jb25jYXQodGhpcy5fcGFnaW5nU3RhcnRJbmRleCkrXCIgcGlubmVkVGltZVN0YW1wOlwiLmNvbmNhdCh0aGlzLl9wYWdpbmdQaW5uZWRUaW1lU3RhbXAsXCIgcGlubmVkU3RhcnRJbmRleDpcIikuY29uY2F0KHRoaXMuX3BhZ2luZ1Bpbm5lZFN0YXJ0SW5kZXgpKSx0aGlzLl9wYWdpbmdTdGF0dXM9QWMuUEVORElORyx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpCbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLHRpbWVTdGFtcDp0aGlzLl9wYWdpbmdUaW1lU3RhbXAsc3RhcnRJbmRleDp0aGlzLl9wYWdpbmdTdGFydEluZGV4LHBpbm5lZFRpbWVTdGFtcDp0aGlzLl9wYWdpbmdQaW5uZWRUaW1lU3RhbXAscGlubmVkU3RhcnRJbmRleDp0aGlzLl9wYWdpbmdTdGFydEluZGV4LG9yZGVyVHlwZToxfX0pLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciBvPW4uZGF0YSxyPW8uY29tcGxldGVGbGFnLGE9by5jb252ZXJzYXRpb25zLHM9dm9pZCAwPT09YT9bXTphLGk9by50aW1lU3RhbXAsdT1vLnN0YXJ0SW5kZXgsYz1vLnBpbm5lZFRpbWVTdGFtcCxsPW8ucGlubmVkU3RhcnRJbmRleDtpZihLaS5sb2coXCJcIi5jb25jYXQodCxcIiBvay4gY29tcGxldGVGbGFnOlwiKS5jb25jYXQocixcIiBjb3VudDpcIikuY29uY2F0KHMubGVuZ3RoKSkscy5sZW5ndGg+MCl7dmFyIGQ9ZS5fZ2V0Q29udmVyc2F0aW9uT3B0aW9ucyhzKTtlLl91cGRhdGVMb2NhbENvbnZlcnNhdGlvbkxpc3QoZCwhMCl9aWYoZS5faXNSZWFkeSllLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCk7ZWxzZXtpZighZS5pc0xvZ2dlZEluKCkpcmV0dXJuIGptKCk7ZS50cmlnZ2VyUmVhZHkoKX1yZXR1cm4gZS5fcGFnaW5nVGltZVN0YW1wPWksZS5fcGFnaW5nU3RhcnRJbmRleD11LGUuX3BhZ2luZ1Bpbm5lZFRpbWVTdGFtcD1jLGUuX3BhZ2luZ1Bpbm5lZFN0YXJ0SW5kZXg9bCwxIT09cj9lLl9wYWdpbmdHZXRDb252ZXJzYXRpb25MaXN0KCk6KGUuX2hhbmRsZUdyb3VwQXRUaXBzTGlzdCgpLGptKCkpfSkpLmNhdGNoKChmdW5jdGlvbihuKXt0aHJvdyBlLmlzTG9nZ2VkSW4oKSYmKGUuX2lzUmVhZHl8fChLaS53YXJuKFwiXCIuY29uY2F0KHQsXCIgZmFpbGVkLiBlcnJvcjpcIiksbiksZS50cmlnZ2VyUmVhZHkoKSkpLG59KSl9fSx7a2V5OlwiX3VwZGF0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgbyxyPURhdGUubm93KCk7bz10aGlzLl9nZXRUbXBDb252ZXJzYXRpb25MaXN0TWFwcGluZyhlLHQsbiksdGhpcy5fY29udmVyc2F0aW9uTWFwPW5ldyBNYXAodGhpcy5fc29ydENvbnZlcnNhdGlvbkxpc3QoW10uY29uY2F0KHYoby50b0JlVXBkYXRlZENvbnZlcnNhdGlvbkxpc3QpLHYodGhpcy5fY29udmVyc2F0aW9uTWFwKSkpKSx0fHx0aGlzLl91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGUoby5uZXdDb252ZXJzYXRpb25MaXN0KSxLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3VwZGF0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdCBjb3N0IFwiKS5jb25jYXQoRGF0ZS5ub3coKS1yLFwiIG1zXCIpKX19LHtrZXk6XCJfZ2V0VG1wQ29udmVyc2F0aW9uTGlzdE1hcHBpbmdcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBvPVtdLHI9W10sYT10aGlzLmdldE1vZHVsZSgkYykscz10aGlzLmdldE1vZHVsZShXYyksaT0wLHU9ZS5sZW5ndGg7aTx1O2krKyl7dmFyIGM9bmV3IE52KGVbaV0pLGw9Yy5jb252ZXJzYXRpb25JRDtpZih0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGwpKXt2YXIgZD10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGwpLHA9W1widW5yZWFkQ291bnRcIixcImFsbG93VHlwZVwiLFwiYWRtaW5Gb3JiaWRUeXBlXCIsXCJwYXlsb2FkXCIsXCJpc1Bpbm5lZFwiXTtufHxwLnB1c2goXCJsYXN0TWVzc2FnZVwiKSxydShkLGMscCxbbnVsbCx2b2lkIDAsXCJcIiwwLE5hTl0pLGQudXBkYXRlVW5yZWFkQ291bnQoYy51bnJlYWRDb3VudCx0KSxuJiYoZC5sYXN0TWVzc2FnZS5wYXlsb2FkPWVbaV0ubGFzdE1lc3NhZ2UucGF5bG9hZCksZVtpXS5sYXN0TWVzc2FnZSYmZC5sYXN0TWVzc2FnZS5jbG91ZEN1c3RvbURhdGEhPT1lW2ldLmxhc3RNZXNzYWdlLmNsb3VkQ3VzdG9tRGF0YSYmKGQubGFzdE1lc3NhZ2UuY2xvdWRDdXN0b21EYXRhPWVbaV0ubGFzdE1lc3NhZ2UuY2xvdWRDdXN0b21EYXRhfHxcIlwiKSx0aGlzLl9jb252ZXJzYXRpb25NYXAuZGVsZXRlKGwpLG8ucHVzaChbbCxkXSl9ZWxzZXtpZihjLnR5cGU9PT1yby5DT05WX0dST1VQJiZhKXt2YXIgZz1jLmdyb3VwUHJvZmlsZS5ncm91cElELGg9YS5nZXRMb2NhbEdyb3VwUHJvZmlsZShnKTtoJiYoYy5ncm91cFByb2ZpbGU9aCxjLnVwZGF0ZVVucmVhZENvdW50KDApKX1lbHNlIGlmKGMudHlwZT09PXJvLkNPTlZfQzJDKXt2YXIgZj1sLnJlcGxhY2Uocm8uQ09OVl9DMkMsXCJcIik7cyYmcy5pc015RnJpZW5kKGYpJiYoYy5yZW1hcms9cy5nZXRGcmllbmRSZW1hcmsoZikpfXIucHVzaChjKSxvLnB1c2goW2wsY10pfX1yZXR1cm57dG9CZVVwZGF0ZWRDb252ZXJzYXRpb25MaXN0Om8sbmV3Q29udmVyc2F0aW9uTGlzdDpyfX19LHtrZXk6XCJfc29ydENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1bXSxuPVtdO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpeyEwPT09ZVsxXS5pc1Bpbm5lZD90LnB1c2goZSk6bi5wdXNoKGUpfSkpLHQuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdFsxXS5sYXN0TWVzc2FnZS5sYXN0VGltZS1lWzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lfSkpLmNvbmNhdChuLnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRbMV0ubGFzdE1lc3NhZ2UubGFzdFRpbWUtZVsxXS5sYXN0TWVzc2FnZS5sYXN0VGltZX0pKSl9fSx7a2V5OlwiX3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb252ZXJzYXRpb25NYXA9bmV3IE1hcCh0aGlzLl9zb3J0Q29udmVyc2F0aW9uTGlzdCh2KHRoaXMuX2NvbnZlcnNhdGlvbk1hcCkpKSx0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX19LHtrZXk6XCJfdXBkYXRlVXNlck9yR3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZigwIT09ZS5sZW5ndGgpe3ZhciBuPVtdLG89W10scj10aGlzLmdldE1vZHVsZShqYyksYT10aGlzLmdldE1vZHVsZSgkYyk7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihlLnR5cGU9PT1yby5DT05WX0MyQyluLnB1c2goZS50b0FjY291bnQpO2Vsc2UgaWYoZS50eXBlPT09cm8uQ09OVl9HUk9VUCl7dmFyIHQ9ZS50b0FjY291bnQ7YS5oYXNMb2NhbEdyb3VwKHQpP2UuZ3JvdXBQcm9maWxlPWEuZ2V0TG9jYWxHcm91cFByb2ZpbGUodCk6by5wdXNoKHQpfX0pKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGUgYzJjVXNlcklETGlzdDpcIikuY29uY2F0KG4sXCIgZ3JvdXBJRExpc3Q6XCIpLmNvbmNhdChvKSksbi5sZW5ndGg+MCYmci5nZXRVc2VyUHJvZmlsZSh7dXNlcklETGlzdDpufSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhO3ppKG4pP24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fY29udmVyc2F0aW9uTWFwLmdldChcIkMyQ1wiLmNvbmNhdChlLnVzZXJJRCkpLnVzZXJQcm9maWxlPWV9KSk6dC5fY29udmVyc2F0aW9uTWFwLmdldChcIkMyQ1wiLmNvbmNhdChuLnVzZXJJRCkpLnVzZXJQcm9maWxlPW59KSksby5sZW5ndGg+MCYmYS5nZXRHcm91cFByb2ZpbGVBZHZhbmNlKHtncm91cElETGlzdDpvLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIixcIkZhY2VVcmxcIl19fSkudGhlbigoZnVuY3Rpb24oZSl7ZS5kYXRhLnN1Y2Nlc3NHcm91cExpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49XCJHUk9VUFwiLmNvbmNhdChlLmdyb3VwSUQpO2lmKHQuX2NvbnZlcnNhdGlvbk1hcC5oYXMobikpe3ZhciBvPXQuX2NvbnZlcnNhdGlvbk1hcC5nZXQobik7cnUoby5ncm91cFByb2ZpbGUsZSxbXSxbbnVsbCx2b2lkIDAsXCJcIiwwLE5hTl0pLCFvLnN1YlR5cGUmJmUudHlwZSYmKG8uc3ViVHlwZT1lLnR5cGUpfX0pKX0pKX19fSx7a2V5OlwiX2dldENvbnZlcnNhdGlvbk9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1bXSxuPWUuZmlsdGVyKChmdW5jdGlvbihlKXt2YXIgdD1lLmxhc3RNc2c7cmV0dXJuIFdpKHQpfSkpLm1hcCgoZnVuY3Rpb24oZSl7aWYoMT09PWUudHlwZSl7dmFyIG49e3VzZXJJRDplLnVzZXJJRCxuaWNrOmUuYzJDTmljayxhdmF0YXI6ZS5jMkNJbWFnZX07cmV0dXJuIHQucHVzaChuKSx7Y29udmVyc2F0aW9uSUQ6XCJDMkNcIi5jb25jYXQoZS51c2VySUQpLHR5cGU6XCJDMkNcIixsYXN0TWVzc2FnZTp7bGFzdFRpbWU6ZS50aW1lLGxhc3RTZXF1ZW5jZTplLnNlcXVlbmNlLGZyb21BY2NvdW50OmUubGFzdEMyQ01zZ0Zyb21BY2NvdW50LG1lc3NhZ2VGb3JTaG93OmUubWVzc2FnZVNob3csdHlwZTplLmxhc3RNc2cuZWxlbWVudHNbMF0/ZS5sYXN0TXNnLmVsZW1lbnRzWzBdLnR5cGU6bnVsbCxwYXlsb2FkOmUubGFzdE1zZy5lbGVtZW50c1swXT9lLmxhc3RNc2cuZWxlbWVudHNbMF0uY29udGVudDpudWxsLGNsb3VkQ3VzdG9tRGF0YTplLmNsb3VkQ3VzdG9tRGF0YXx8XCJcIixpc1Jldm9rZWQ6OD09PWUubGFzdE1lc3NhZ2VGbGFnLG9ubGluZU9ubHlGbGFnOiExfSx1c2VyUHJvZmlsZTpuZXcgSXYobikscGVlclJlYWRUaW1lOmUuYzJjUGVlclJlYWRUaW1lLGlzUGlubmVkOjE9PT1lLmlzUGlubmVkfX1yZXR1cm57Y29udmVyc2F0aW9uSUQ6XCJHUk9VUFwiLmNvbmNhdChlLmdyb3VwSUQpLHR5cGU6XCJHUk9VUFwiLGxhc3RNZXNzYWdlOntsYXN0VGltZTplLnRpbWUsbGFzdFNlcXVlbmNlOmUubWVzc2FnZVJlYWRTZXErZS51bnJlYWRDb3VudCxmcm9tQWNjb3VudDplLm1zZ0dyb3VwRnJvbUFjY291bnQsbWVzc2FnZUZvclNob3c6ZS5tZXNzYWdlU2hvdyx0eXBlOmUubGFzdE1zZy5lbGVtZW50c1swXT9lLmxhc3RNc2cuZWxlbWVudHNbMF0udHlwZTpudWxsLHBheWxvYWQ6ZS5sYXN0TXNnLmVsZW1lbnRzWzBdP2UubGFzdE1zZy5lbGVtZW50c1swXS5jb250ZW50Om51bGwsY2xvdWRDdXN0b21EYXRhOmUuY2xvdWRDdXN0b21EYXRhfHxcIlwiLGlzUmV2b2tlZDoyPT09ZS5sYXN0TWVzc2FnZUZsYWcsb25saW5lT25seUZsYWc6ITF9LGdyb3VwUHJvZmlsZTpuZXcgRXYoe2dyb3VwSUQ6ZS5ncm91cElELG5hbWU6ZS5ncm91cE5pY2ssYXZhdGFyOmUuZ3JvdXBJbWFnZX0pLHVucmVhZENvdW50OmUudW5yZWFkQ291bnQscGVlclJlYWRUaW1lOjAsaXNQaW5uZWQ6MT09PWUuaXNQaW5uZWR9fSkpO3QubGVuZ3RoPjAmJnRoaXMuZ2V0TW9kdWxlKGpjKS5vbkNvbnZlcnNhdGlvbnNQcm9maWxlVXBkYXRlZCh0KTtyZXR1cm4gbn19LHtrZXk6XCJnZXRMb2NhbE1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpfX0se2tleTpcImRlbGV0ZUxvY2FsTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UgaW5zdGFuY2VvZiBHbSYmdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnJlbW92ZShlKX19LHtrZXk6XCJvbkNvbnZlcnNhdGlvbkRlbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Db252ZXJzYXRpb25EZWxldGVkXCIpKSx6aShlKSYmZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnR5cGUsbz1lLnVzZXJJRCxyPWUuZ3JvdXBJRCxhPVwiXCI7MT09PW4/YT1cIlwiLmNvbmNhdChyby5DT05WX0MyQykuY29uY2F0KG8pOjI9PT1uJiYoYT1cIlwiLmNvbmNhdChyby5DT05WX0dST1VQKS5jb25jYXQocikpLHQuZGVsZXRlTG9jYWxDb252ZXJzYXRpb24oYSl9KSl9fSx7a2V5Olwib25Db252ZXJzYXRpb25QaW5uZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHppKGUpKXt2YXIgbj0hMTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvLHI9ZS50eXBlLGE9ZS51c2VySUQscz1lLmdyb3VwSUQ7MT09PXI/bz10LmdldExvY2FsQ29udmVyc2F0aW9uKFwiXCIuY29uY2F0KHJvLkNPTlZfQzJDKS5jb25jYXQoYSkpOjI9PT1yJiYobz10LmdldExvY2FsQ29udmVyc2F0aW9uKFwiXCIuY29uY2F0KHJvLkNPTlZfR1JPVVApLmNvbmNhdChzKSkpLG8mJihLaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLm9uQ29udmVyc2F0aW9uUGlubmVkIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoby5jb252ZXJzYXRpb25JRCxcIiBpc1Bpbm5lZDpcIikuY29uY2F0KG8uaXNQaW5uZWQpKSxvLmlzUGlubmVkfHwoby5pc1Bpbm5lZD0hMCxuPSEwKSl9KSksbiYmdGhpcy5fc29ydENvbnZlcnNhdGlvbkxpc3RBbmRFbWl0RXZlbnQoKX19fSx7a2V5Olwib25Db252ZXJzYXRpb25VbnBpbm5lZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoemkoZSkpe3ZhciBuPSExO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG8scj1lLnR5cGUsYT1lLnVzZXJJRCxzPWUuZ3JvdXBJRDsxPT09cj9vPXQuZ2V0TG9jYWxDb252ZXJzYXRpb24oXCJcIi5jb25jYXQocm8uQ09OVl9DMkMpLmNvbmNhdChhKSk6Mj09PXImJihvPXQuZ2V0TG9jYWxDb252ZXJzYXRpb24oXCJcIi5jb25jYXQocm8uQ09OVl9HUk9VUCkuY29uY2F0KHMpKSksbyYmKEtpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIub25Db252ZXJzYXRpb25VbnBpbm5lZCBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KG8uY29udmVyc2F0aW9uSUQsXCIgaXNQaW5uZWQ6XCIpLmNvbmNhdChvLmlzUGlubmVkKSksby5pc1Bpbm5lZCYmKG8uaXNQaW5uZWQ9ITEsbj0hMCkpfSkpLG4mJnRoaXMuX3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50KCl9fX0se2tleTpcImdldE1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY29udmVyc2F0aW9uSUQsbz1lLm5leHRSZXFNZXNzYWdlSUQscj1lLmNvdW50LGE9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldE1lc3NhZ2VMaXN0XCIpLHM9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihuKSxpPVwiXCI7aWYocyYmcy5ncm91cFByb2ZpbGUmJihpPXMuZ3JvdXBQcm9maWxlLnR5cGUpLG11KGkpKXJldHVybiBLaS5sb2coXCJcIi5jb25jYXQoYSxcIiBub3QgYXZhaWxhYmxlIGluIGF2Y2hhdHJvb20uIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobikpLGptKHttZXNzYWdlTGlzdDpbXSxuZXh0UmVxTWVzc2FnZUlEOlwiXCIsaXNDb21wbGV0ZWQ6ITB9KTsoSmkocil8fHI+MTUpJiYocj0xNSk7dmFyIHU9dGhpcy5fY29tcHV0ZUxlZnRDb3VudCh7Y29udmVyc2F0aW9uSUQ6bixuZXh0UmVxTWVzc2FnZUlEOm99KTtyZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KGEsXCIgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChuLFwiIGxlZnRDb3VudDpcIikuY29uY2F0KHUsXCIgY291bnQ6XCIpLmNvbmNhdChyLFwiIG5leHRSZXFNZXNzYWdlSUQ6XCIpLmNvbmNhdChvKSksdGhpcy5fbmVlZEdldEhpc3Rvcnkoe2NvbnZlcnNhdGlvbklEOm4sbGVmdENvdW50OnUsY291bnQ6cn0pP3RoaXMuZ2V0SGlzdG9yeU1lc3NhZ2VzKHtjb252ZXJzYXRpb25JRDpuLG5leHRSZXFNZXNzYWdlSUQ6byxjb3VudDoyMH0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHU9dC5fY29tcHV0ZUxlZnRDb3VudCh7Y29udmVyc2F0aW9uSUQ6bixuZXh0UmVxTWVzc2FnZUlEOm99KSxQbSh0Ll9jb21wdXRlUmVzdWx0KHtjb252ZXJzYXRpb25JRDpuLG5leHRSZXFNZXNzYWdlSUQ6byxjb3VudDpyLGxlZnRDb3VudDp1fSkpfSkpOihLaS5sb2coXCJcIi5jb25jYXQoYSxcIi5nZXRNZXNzYWdlTGlzdCBnZXQgbWVzc2FnZSBsaXN0IGZyb20gbWVtb3J5XCIpKSx0aGlzLm1vZGlmeU1lc3NhZ2VMaXN0KG4pLGptKHRoaXMuX2NvbXB1dGVSZXN1bHQoe2NvbnZlcnNhdGlvbklEOm4sbmV4dFJlcU1lc3NhZ2VJRDpvLGNvdW50OnIsbGVmdENvdW50OnV9KSkpfX0se2tleTpcIl9jb21wdXRlTGVmdENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubmV4dFJlcU1lc3NhZ2VJRDtyZXR1cm4gbj90aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdCh0KS5maW5kSW5kZXgoKGZ1bmN0aW9uKGUpe3JldHVybiBlLklEPT09bn0pKTp0aGlzLl9nZXRNZXNzYWdlTGlzdFNpemUodCl9fSx7a2V5OlwiX2dldE1lc3NhZ2VMaXN0U2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKS5sZW5ndGh9fSx7a2V5OlwiX25lZWRHZXRIaXN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubGVmdENvdW50LG89ZS5jb3VudCxyPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24odCksYT1cIlwiO3JldHVybiByJiZyLmdyb3VwUHJvZmlsZSYmKGE9ci5ncm91cFByb2ZpbGUudHlwZSksIXl1KHQpJiYhbXUoYSkmJihuPG8mJiF0aGlzLl9jb21wbGV0ZWRNYXAuaGFzKHQpKX19LHtrZXk6XCJfY29tcHV0ZVJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLm5leHRSZXFNZXNzYWdlSUQsbz1lLmNvdW50LHI9ZS5sZWZ0Q291bnQsYT10aGlzLl9jb21wdXRlTWVzc2FnZUxpc3Qoe2NvbnZlcnNhdGlvbklEOnQsbmV4dFJlcU1lc3NhZ2VJRDpuLGNvdW50Om99KSxzPXRoaXMuX2NvbXB1dGVJc0NvbXBsZXRlZCh7Y29udmVyc2F0aW9uSUQ6dCxsZWZ0Q291bnQ6cixjb3VudDpvfSksaT10aGlzLl9jb21wdXRlTmV4dFJlcU1lc3NhZ2VJRCh7bWVzc2FnZUxpc3Q6YSxpc0NvbXBsZXRlZDpzLGNvbnZlcnNhdGlvbklEOnR9KSx1PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fY29tcHV0ZVJlc3VsdC4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdCh0KTtyZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KHUsXCIgbGVmdENvdW50OlwiKS5jb25jYXQocixcIiBjb3VudDpcIikuY29uY2F0KG8sXCIgbmV4dFJlcU1lc3NhZ2VJRDpcIikuY29uY2F0KGksXCIgaXNDb21wbGV0ZWQ6XCIpLmNvbmNhdChzKSkse21lc3NhZ2VMaXN0OmEsbmV4dFJlcU1lc3NhZ2VJRDppLGlzQ29tcGxldGVkOnN9fX0se2tleTpcIl9jb21wdXRlTWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5uZXh0UmVxTWVzc2FnZUlELG89ZS5jb3VudCxyPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KHQpLGE9dGhpcy5fY29tcHV0ZUluZGV4RW5kKHtuZXh0UmVxTWVzc2FnZUlEOm4sbWVzc2FnZUxpc3Q6cn0pLHM9dGhpcy5fY29tcHV0ZUluZGV4U3RhcnQoe2luZGV4RW5kOmEsY291bnQ6b30pO3JldHVybiByLnNsaWNlKHMsYSl9fSx7a2V5OlwiX2NvbXB1dGVOZXh0UmVxTWVzc2FnZUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXNzYWdlTGlzdCxuPWUuaXNDb21wbGV0ZWQsbz1lLmNvbnZlcnNhdGlvbklEO2lmKCFuKXJldHVybiAwPT09dC5sZW5ndGg/XCJcIjp0WzBdLklEO3ZhciByPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KG8pO3JldHVybiAwPT09ci5sZW5ndGg/XCJcIjpyWzBdLklEfX0se2tleTpcIl9jb21wdXRlSW5kZXhFbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm1lc3NhZ2VMaXN0LG49dm9pZCAwPT09dD9bXTp0LG89ZS5uZXh0UmVxTWVzc2FnZUlEO3JldHVybiBvP24uZmluZEluZGV4KChmdW5jdGlvbihlKXtyZXR1cm4gZS5JRD09PW99KSk6bi5sZW5ndGh9fSx7a2V5OlwiX2NvbXB1dGVJbmRleFN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbmRleEVuZCxuPWUuY291bnQ7cmV0dXJuIHQ+bj90LW46MH19LHtrZXk6XCJfY29tcHV0ZUlzQ29tcGxldGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRDtyZXR1cm4hIShlLmxlZnRDb3VudDw9ZS5jb3VudCYmdGhpcy5fY29tcGxldGVkTWFwLmhhcyh0KSl9fSx7a2V5OlwiZ2V0SGlzdG9yeU1lc3NhZ2VzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubmV4dFJlcU1lc3NhZ2VJRDtpZih0PT09cm8uQ09OVl9TWVNURU0pcmV0dXJuIGptKCk7ZS5jb3VudD9lLmNvdW50PjIwJiYoZS5jb3VudD0yMCk6ZS5jb3VudD0xNTt2YXIgbz10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxPbGRlc3RNZXNzYWdlQnlDb252ZXJzYXRpb25JRCh0KTtvfHwoKG89e30pLnRpbWU9MCxvLnNlcXVlbmNlPTAsMD09PXQuaW5kZXhPZihyby5DT05WX0MyQyk/KG8udG89dC5yZXBsYWNlKHJvLkNPTlZfQzJDLFwiXCIpLG8uY29udmVyc2F0aW9uVHlwZT1yby5DT05WX0MyQyk6MD09PXQuaW5kZXhPZihyby5DT05WX0dST1VQKSYmKG8udG89dC5yZXBsYWNlKHJvLkNPTlZfR1JPVVAsXCJcIiksby5jb252ZXJzYXRpb25UeXBlPXJvLkNPTlZfR1JPVVApKTt2YXIgcj1cIlwiLGE9bnVsbDtzd2l0Y2goby5jb252ZXJzYXRpb25UeXBlKXtjYXNlIHJvLkNPTlZfQzJDOnJldHVybiByPXQucmVwbGFjZShyby5DT05WX0MyQyxcIlwiKSwoYT10aGlzLmdldE1vZHVsZShZYykpP2EuZ2V0Um9hbWluZ01lc3NhZ2Uoe2NvbnZlcnNhdGlvbklEOmUuY29udmVyc2F0aW9uSUQscGVlckFjY291bnQ6cixjb3VudDplLmNvdW50LGxhc3RNZXNzYWdlVGltZTp0aGlzLl9yb2FtaW5nTWVzc2FnZUtleU1hcC5oYXModCk/by50aW1lOjAsbWVzc2FnZUtleTp0aGlzLl9yb2FtaW5nTWVzc2FnZUtleU1hcC5nZXQodCl9KTpZbSh7Y29kZTpQZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpXcH0pO2Nhc2Ugcm8uQ09OVl9HUk9VUDpyZXR1cm4oYT10aGlzLmdldE1vZHVsZSgkYykpP2EuZ2V0Um9hbWluZ01lc3NhZ2Uoe2NvbnZlcnNhdGlvbklEOmUuY29udmVyc2F0aW9uSUQsZ3JvdXBJRDpvLnRvLGNvdW50OmUuY291bnQsc2VxdWVuY2U6biYmITE9PT1vLmdldE9ubGluZU9ubHlGbGFnKCk/by5zZXF1ZW5jZS0xOm8uc2VxdWVuY2V9KTpZbSh7Y29kZTpQZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpXcH0pO2RlZmF1bHQ6cmV0dXJuIGptKCl9fX0se2tleTpcInBhdGNoQ29udmVyc2F0aW9uTGFzdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpO2lmKHQpe3ZhciBuPXQubGFzdE1lc3NhZ2Usbz1uLm1lc3NhZ2VGb3JTaG93LHI9bi5wYXlsb2FkO2lmKE91KG8pfHxPdShyKSl7dmFyIGE9dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSk7aWYoMD09PWEubGVuZ3RoKXJldHVybjt2YXIgcz1hW2EubGVuZ3RoLTFdO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucGF0Y2hDb252ZXJzYXRpb25MYXN0TWVzc2FnZSBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgcGF5bG9hZDpcIikscy5wYXlsb2FkKSx0LnVwZGF0ZUxhc3RNZXNzYWdlKHMpfX19fSx7a2V5Olwic3RvcmVSb2FtaW5nTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOltdLG49YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsbz1uLnN0YXJ0c1dpdGgocm8uQ09OVl9DMkMpP3JvLkNPTlZfQzJDOnJvLkNPTlZfR1JPVVAscj1udWxsLGE9W10scz0wLGk9ZS5sZW5ndGgsdT1udWxsLGM9bz09PXJvLkNPTlZfR1JPVVAsbD10aGlzLmdldE1vZHVsZSh0bCksZD1mdW5jdGlvbigpe3M9Yz9lLmxlbmd0aC0xOjAsaT1jPzA6ZS5sZW5ndGh9LHA9ZnVuY3Rpb24oKXtjPy0tczorK3N9LGc9ZnVuY3Rpb24oKXtyZXR1cm4gYz9zPj1pOnM8aX07Zm9yKGQoKTtnKCk7cCgpKWlmKGMmJjE9PT1lW3NdLnNlcXVlbmNlJiZ0aGlzLnNldENvbXBsZXRlZChuKSwxIT09ZVtzXS5pc1BsYWNlTWVzc2FnZSlpZigocj1uZXcgR20oZVtzXSkpLnRvPWVbc10udG8sci5pc1N5c3RlbU1lc3NhZ2U9ISFlW3NdLmlzU3lzdGVtTWVzc2FnZSxyLmNvbnZlcnNhdGlvblR5cGU9byw0PT09ZVtzXS5ldmVudD91PXt0eXBlOnJvLk1TR19HUlBfVElQLGNvbnRlbnQ6dCh0KHt9LGVbc10uZWxlbWVudHMpLHt9LHtncm91cFByb2ZpbGU6ZVtzXS5ncm91cFByb2ZpbGV9KX06KGVbc10uZWxlbWVudHM9bC5wYXJzZUVsZW1lbnRzKGVbc10uZWxlbWVudHMsZVtzXS5mcm9tKSx1PWVbc10uZWxlbWVudHMpLGN8fHIuc2V0Tmlja0FuZEF2YXRhcih7bmljazplW3NdLm5pY2ssYXZhdGFyOmVbc10uYXZhdGFyfSksT3UodSkpe3ZhciBoPW5ldyBsZyhPZyk7aC5zZXRNZXNzYWdlKFwiZnJvbTpcIi5jb25jYXQoci5mcm9tLFwiIHRvOlwiKS5jb25jYXQoci50byxcIiBzZXF1ZW5jZTpcIikuY29uY2F0KHIuc2VxdWVuY2UsXCIgZXZlbnQ6XCIpLmNvbmNhdChlW3NdLmV2ZW50KSksaC5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldExldmVsKFwid2FybmluZ1wiKS5lbmQoKX1lbHNlIHIuc2V0RWxlbWVudCh1KSxyLnJlSW5pdGlhbGl6ZSh0aGlzLmdldE15VXNlcklEKCkpLGEucHVzaChyKTtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnVuc2hpZnQoYSksZD1wPWc9bnVsbCxhfX0se2tleTpcInNldE1lc3NhZ2VSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubWVzc2FnZUlELG89dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbih0KTtpZihLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldE1lc3NhZ2VSZWFkIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQodCxcIiB1bnJlYWRDb3VudDpcIikuY29uY2F0KG8/by51bnJlYWRDb3VudDowKSksIW8pcmV0dXJuIGptKCk7aWYoby50eXBlIT09cm8uQ09OVl9HUk9VUHx8T3Uoby5ncm91cEF0SW5mb0xpc3QpfHx0aGlzLmRlbGV0ZUdyb3VwQXRUaXBzKHQpLDA9PT1vLnVucmVhZENvdW50KXJldHVybiBqbSgpO3ZhciByPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2UodCxuKSxhPW51bGw7c3dpdGNoKG8udHlwZSl7Y2FzZSByby5DT05WX0MyQzpyZXR1cm4oYT10aGlzLmdldE1vZHVsZShZYykpP2Euc2V0TWVzc2FnZVJlYWQoe2NvbnZlcnNhdGlvbklEOnQsbGFzdE1lc3NhZ2VUaW1lOnI/ci50aW1lOm8ubGFzdE1lc3NhZ2UubGFzdFRpbWV9KTpZbSh7Y29kZTpQZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpXcH0pO2Nhc2Ugcm8uQ09OVl9HUk9VUDpyZXR1cm4oYT10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSgkYykpP2Euc2V0TWVzc2FnZVJlYWQoe2NvbnZlcnNhdGlvbklEOnQsbGFzdE1lc3NhZ2VTZXE6cj9yLnNlcXVlbmNlOm8ubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlfSk6WW0oe2NvZGU6UGQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6V3B9KTtjYXNlIHJvLkNPTlZfU1lTVEVNOnJldHVybiBvLnVucmVhZENvdW50PTAsdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSksam0oKTtkZWZhdWx0OnJldHVybiBqbSgpfX19LHtrZXk6XCJ1cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5sYXN0TWVzc2FnZVNlcSxvPWUubGFzdE1lc3NhZ2VUaW1lLHI9dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QodCk7aWYoMCE9PXIubGVuZ3RoKWZvcih2YXIgYSxzPXIubGVuZ3RoLTE7cz49MDtzLS0paWYoYT1yW3NdLCEobyYmYS50aW1lPm98fG4mJmEuc2VxdWVuY2U+bikpe2lmKFwiaW5cIj09PWEuZmxvdyYmYS5pc1JlYWQpYnJlYWs7YS5zZXRJc1JlYWQoITApfX19LHtrZXk6XCJ1cGRhdGVVbnJlYWRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24oZSksbj10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKTtpZih0KXt2YXIgbz10LnVucmVhZENvdW50LHI9bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiFlLmlzUmVhZCYmIWUuZ2V0T25saW5lT25seUZsYWcoKSYmIWUuaXNEZWxldGVkfSkpLmxlbmd0aDtvIT09ciYmKHQudW5yZWFkQ291bnQ9cixLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZVVucmVhZENvdW50IGZyb20gXCIpLmNvbmNhdChvLFwiIHRvIFwiKS5jb25jYXQocixcIiwgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlKSksdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSkpfX19LHtrZXk6XCJ1cGRhdGVJc1JlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpLG49dGhpcy5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpO2lmKHQmJjAhPT1uLmxlbmd0aCYmIXl1KHQudHlwZSkpe2Zvcih2YXIgbz1bXSxyPTAsYT1uLmxlbmd0aDtyPGE7cisrKVwiaW5cIiE9PW5bcl0uZmxvdz9cIm91dFwiIT09bltyXS5mbG93fHxuW3JdLmlzUmVhZHx8bltyXS5zZXRJc1JlYWQoITApOm8ucHVzaChuW3JdKTt2YXIgcz0wO2lmKHQudHlwZT09PXJvLkNPTlZfQzJDKXt2YXIgaT1vLnNsaWNlKC10LnVucmVhZENvdW50KS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlzUmV2b2tlZH0pKS5sZW5ndGg7cz1vLmxlbmd0aC10LnVucmVhZENvdW50LWl9ZWxzZSBzPW8ubGVuZ3RoLXQudW5yZWFkQ291bnQ7Zm9yKHZhciB1PTA7dTxzJiYhb1t1XS5pc1JlYWQ7dSsrKW9bdV0uc2V0SXNSZWFkKCEwKX19fSx7a2V5OlwiZGVsZXRlR3JvdXBBdFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlR3JvdXBBdFRpcHNcIik7S2kubG9nKFwiXCIuY29uY2F0KHQpKTt2YXIgbj10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGUpO2lmKCFuKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt2YXIgbz1uLmdyb3VwQXRJbmZvTGlzdDtpZigwPT09by5sZW5ndGgpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3ZhciByPXRoaXMuZ2V0TXlVc2VySUQoKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6JGwscmVxdWVzdERhdGE6e21lc3NhZ2VMaXN0VG9EZWxldGU6by5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntmcm9tOmUuZnJvbSx0bzpyLG1lc3NhZ2VTZXE6ZS5fX3NlcXVlbmNlLG1lc3NhZ2VSYW5kb206ZS5fX3JhbmRvbSxncm91cElEOmUuZ3JvdXBJRH19KSl9fSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KHQsXCIgb2suIGNvdW50OlwiKS5jb25jYXQoby5sZW5ndGgpKSxuLmNsZWFyR3JvdXBBdEluZm9MaXN0KCksUHJvbWlzZS5yZXNvbHZlKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBLaS5lcnJvcihcIlwiLmNvbmNhdCh0LFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLFltKGUpfSkpfX0se2tleTpcImFwcGVuZFRvTWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucHVzaEluKGUpfX0se2tleTpcInNldE1lc3NhZ2VSYW5kb21cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnNpbmdseUxpbmtlZExpc3Quc2V0KGUucmFuZG9tKX19LHtrZXk6XCJkZWxldGVNZXNzYWdlUmFuZG9tXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zaW5nbHlMaW5rZWRMaXN0LmRlbGV0ZShlLnJhbmRvbSl9fSx7a2V5OlwicHVzaEludG9NZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4hKCF0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucHVzaEluKHQsbil8fHRoaXMuX2lzTWVzc2FnZUZyb21DdXJyZW50SW5zdGFuY2UodCkmJiFuKSYmKGUucHVzaCh0KSwhMCl9fSx7a2V5OlwiX2lzTWVzc2FnZUZyb21DdXJyZW50SW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaW5nbHlMaW5rZWRMaXN0LmhhcyhlLnJhbmRvbSl9fSx7a2V5OlwicmV2b2tlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucmV2b2tlKGUsdCxuKX19LHtrZXk6XCJnZXRQZWVyUmVhZFRpbWVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcGVlclJlYWRUaW1lTWFwLmdldChlKX19LHtrZXk6XCJyZWNvcmRQZWVyUmVhZFRpbWVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3BlZXJSZWFkVGltZU1hcC5oYXMoZSk/dGhpcy5fcGVlclJlYWRUaW1lTWFwLmdldChlKTx0JiZ0aGlzLl9wZWVyUmVhZFRpbWVNYXAuc2V0KGUsdCk6dGhpcy5fcGVlclJlYWRUaW1lTWFwLnNldChlLHQpfX0se2tleTpcInVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHlcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKGUuc3RhcnRzV2l0aChyby5DT05WX0MyQykmJnQ+MCl7dmFyIG49dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkoZSx0KTtuLmxlbmd0aD4wJiZ0aGlzLmVtaXRPdXRlckV2ZW50KG9vLk1FU1NBR0VfUkVBRF9CWV9QRUVSLG4pfX19LHtrZXk6XCJ1cGRhdGVNZXNzYWdlSXNSZWFkUHJvcGVydHlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpLG49dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSk7aWYodCYmMCE9PW4ubGVuZ3RoJiYheXUodC50eXBlKSl7Zm9yKHZhciBvPVtdLHI9MDtyPG4ubGVuZ3RoO3IrKylcImluXCIhPT1uW3JdLmZsb3c/XCJvdXRcIiE9PW5bcl0uZmxvd3x8bltyXS5pc1JlYWR8fG5bcl0uc2V0SXNSZWFkKCEwKTpvLnB1c2gobltyXSk7dmFyIGE9MDtpZih0LnR5cGU9PT1yby5DT05WX0MyQyl7dmFyIHM9by5zbGljZSgtdC51bnJlYWRDb3VudCkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5pc1Jldm9rZWR9KSkubGVuZ3RoO2E9by5sZW5ndGgtdC51bnJlYWRDb3VudC1zfWVsc2UgYT1vLmxlbmd0aC10LnVucmVhZENvdW50O2Zvcih2YXIgaT0wO2k8YSYmIW9baV0uaXNSZWFkO2krKylvW2ldLnNldElzUmVhZCghMCl9fX0se2tleTpcInVwZGF0ZU1lc3NhZ2VJc01vZGlmaWVkUHJvcGVydHlcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIudXBkYXRlTWVzc2FnZUlzTW9kaWZpZWRQcm9wZXJ0eShlKX19LHtrZXk6XCJzZXRDb21wbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldENvbXBsZXRlZC4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlKSksdGhpcy5fY29tcGxldGVkTWFwLnNldChlLCEwKX19LHtrZXk6XCJ1cGRhdGVSb2FtaW5nTWVzc2FnZUtleVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fcm9hbWluZ01lc3NhZ2VLZXlNYXAuc2V0KGUsdCl9fSx7a2V5OlwiZ2V0Q29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRDb252ZXJzYXRpb25MaXN0XCIpO0tpLmxvZyh0KSx0aGlzLl9wYWdpbmdTdGF0dXM9PT1BYy5SRUpFQ1RFRCYmKEtpLmxvZyhcIlwiLmNvbmNhdCh0LFwiLiBjb250aW51ZSB0byBzeW5jIGNvbnZlcnNhdGlvbkxpc3RcIikpLHRoaXMuX3N5bmNDb252ZXJzYXRpb25MaXN0KCkpO3ZhciBuPW5ldyBsZyhVZyk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkhsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLmdldE15VXNlcklEKCl9fSkudGhlbigoZnVuY3Rpb24obyl7dmFyIHI9by5kYXRhLmNvbnZlcnNhdGlvbnMsYT12b2lkIDA9PT1yP1tdOnIscz1lLl9nZXRDb252ZXJzYXRpb25PcHRpb25zKGEpO3JldHVybiBlLl91cGRhdGVMb2NhbENvbnZlcnNhdGlvbkxpc3QocywhMCksZS5fc2V0U3RvcmFnZUNvbnZlcnNhdGlvbkxpc3QoKSxlLl9oYW5kbGVDMkNQZWVyUmVhZFRpbWUoKSxuLnNldE1lc3NhZ2UoXCJjb252ZXJzYXRpb24gY291bnQ6IFwiLmNvbmNhdChhLmxlbmd0aCkpLnNldE5ldHdvcmtUeXBlKGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KHQsXCIgb2tcIikpLGptKHtjb252ZXJzYXRpb25MaXN0OmUuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCl9KX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuIGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9bShlLDIpLHI9dFswXSxhPXRbMV07bi5zZXRFcnJvcihvLHIsYSkuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQodCxcIiBmYWlsZWQuIGVycm9yOlwiKSxvKSxZbShvKX0pKX19LHtrZXk6XCJfaGFuZGxlQzJDUGVlclJlYWRUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZSx0PVModGhpcy5fY29udmVyc2F0aW9uTWFwKTt0cnl7Zm9yKHQucygpOyEoZT10Lm4oKSkuZG9uZTspe3ZhciBuPW0oZS52YWx1ZSwyKSxvPW5bMF0scj1uWzFdO3IudHlwZT09PXJvLkNPTlZfQzJDJiYoS2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9oYW5kbGVDMkNQZWVyUmVhZFRpbWUgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChvLFwiIHBlZXJSZWFkVGltZTpcIikuY29uY2F0KHIucGVlclJlYWRUaW1lKSksdGhpcy5yZWNvcmRQZWVyUmVhZFRpbWUobyxyLnBlZXJSZWFkVGltZSkpfX1jYXRjaChhKXt0LmUoYSl9ZmluYWxseXt0LmYoKX19fSx7a2V5OlwiZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcztpZigodD10aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGUpP3RoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZSk6bmV3IE52KHtjb252ZXJzYXRpb25JRDplLHR5cGU6ZS5zbGljZSgwLDMpPT09cm8uQ09OVl9DMkM/cm8uQ09OVl9DMkM6cm8uQ09OVl9HUk9VUH0pKS5faXNJbmZvQ29tcGxldGVkfHx0LnR5cGU9PT1yby5DT05WX1NZU1RFTSlyZXR1cm4gam0oe2NvbnZlcnNhdGlvbjp0fSk7dmFyIG89bmV3IGxnKEZnKSxyPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRDb252ZXJzYXRpb25Qcm9maWxlXCIpO3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQocixcIi4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIHJlbWFyazpcIikuY29uY2F0KHQucmVtYXJrLFwiIGxhc3RNZXNzYWdlOlwiKSx0Lmxhc3RNZXNzYWdlKSx0aGlzLl91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGVDb21wbGV0ZWx5KHQpLnRoZW4oKGZ1bmN0aW9uKGEpe28uc2V0TmV0d29ya1R5cGUobi5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiY29udmVyc2F0aW9uSUQ6XCIuY29uY2F0KGUsXCIgdW5yZWFkQ291bnQ6XCIpLmNvbmNhdChhLmRhdGEuY29udmVyc2F0aW9uLnVucmVhZENvdW50KSkuZW5kKCk7dmFyIHM9bi5nZXRNb2R1bGUoV2MpO2lmKHMmJnQudHlwZT09PXJvLkNPTlZfQzJDKXt2YXIgaT1lLnJlcGxhY2Uocm8uQ09OVl9DMkMsXCJcIik7aWYocy5pc015RnJpZW5kKGkpKXt2YXIgdT1zLmdldEZyaWVuZFJlbWFyayhpKTt0LnJlbWFyayE9PXUmJih0LnJlbWFyaz11LEtpLmxvZyhcIlwiLmNvbmNhdChyLFwiLiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgcGF0Y2ggcmVtYXJrOlwiKS5jb25jYXQodC5yZW1hcmspKSl9fXJldHVybiBLaS5sb2coXCJcIi5jb25jYXQocixcIiBvay4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlKSksYX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7cmV0dXJuIG4ucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24obil7dmFyIHI9bShuLDIpLGE9clswXSxzPXJbMV07by5zZXRFcnJvcih0LGEscykuc2V0TWVzc2FnZShcImNvbnZlcnNhdGlvbklEOlwiLmNvbmNhdChlKSkuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQocixcIiBmYWlsZWQuIGVycm9yOlwiKSx0KSxZbSh0KX0pKX19LHtrZXk6XCJfdXBkYXRlVXNlck9yR3JvdXBQcm9maWxlQ29tcGxldGVseVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGUudHlwZT09PXJvLkNPTlZfQzJDP3RoaXMuZ2V0TW9kdWxlKGpjKS5nZXRVc2VyUHJvZmlsZSh7dXNlcklETGlzdDpbZS50b0FjY291bnRdfSkudGhlbigoZnVuY3Rpb24obil7dmFyIG89bi5kYXRhO3JldHVybiAwPT09by5sZW5ndGg/WW0obmV3IEttKHtjb2RlOlBkLlVTRVJfT1JfR1JPVVBfTk9UX0ZPVU5ELG1lc3NhZ2U6X3B9KSk6KGUudXNlclByb2ZpbGU9b1swXSxlLl9pc0luZm9Db21wbGV0ZWQ9ITAsdC5fdW5zaGlmdENvbnZlcnNhdGlvbihlKSxqbSh7Y29udmVyc2F0aW9uOmV9KSl9KSk6dGhpcy5nZXRNb2R1bGUoJGMpLmdldEdyb3VwUHJvZmlsZSh7Z3JvdXBJRDplLnRvQWNjb3VudH0pLnRoZW4oKGZ1bmN0aW9uKG4pe3JldHVybiBlLmdyb3VwUHJvZmlsZT1uLmRhdGEuZ3JvdXAsZS5faXNJbmZvQ29tcGxldGVkPSEwLHQuX3Vuc2hpZnRDb252ZXJzYXRpb24oZSksam0oe2NvbnZlcnNhdGlvbjplfSl9KSl9fSx7a2V5OlwiX3Vuc2hpZnRDb252ZXJzYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtlIGluc3RhbmNlb2YgTnYmJiF0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGUuY29udmVyc2F0aW9uSUQpJiYodGhpcy5fY29udmVyc2F0aW9uTWFwPW5ldyBNYXAoW1tlLmNvbnZlcnNhdGlvbklELGVdXS5jb25jYXQodih0aGlzLl9jb252ZXJzYXRpb25NYXApKSksdGhpcy5fc2V0U3RvcmFnZUNvbnZlcnNhdGlvbkxpc3QoKSx0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSl9fSx7a2V5OlwiZGVsZXRlQ29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXtmcm9tQWNjb3VudDp0aGlzLmdldE15VXNlcklEKCksdG9BY2NvdW50OnZvaWQgMCx0eXBlOnZvaWQgMH07aWYoIXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXMoZSkpe3ZhciBvPW5ldyBLbSh7Y29kZTpQZC5DT05WRVJTQVRJT05fTk9UX0ZPVU5ELG1lc3NhZ2U6ZnB9KTtyZXR1cm4gWW0obyl9c3dpdGNoKHRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZSkudHlwZSl7Y2FzZSByby5DT05WX0MyQzpuLnR5cGU9MSxuLnRvQWNjb3VudD1lLnJlcGxhY2Uocm8uQ09OVl9DMkMsXCJcIik7YnJlYWs7Y2FzZSByby5DT05WX0dST1VQOm4udHlwZT0yLG4udG9Hcm91cElEPWUucmVwbGFjZShyby5DT05WX0dST1VQLFwiXCIpO2JyZWFrO2Nhc2Ugcm8uQ09OVl9TWVNURU06cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKCRjKS5kZWxldGVHcm91cFN5c3RlbU5vdGljZSh7bWVzc2FnZUxpc3Q6dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSl9KSx0aGlzLmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uKGUpLGptKHtjb252ZXJzYXRpb25JRDplfSk7ZGVmYXVsdDp2YXIgcj1uZXcgS20oe2NvZGU6UGQuQ09OVkVSU0FUSU9OX1VOX1JFQ09SREVEX1RZUEUsbWVzc2FnZTptcH0pO3JldHVybiBZbShyKX12YXIgYT1uZXcgbGcocWcpO2Euc2V0TWVzc2FnZShcImNvbnZlcnNhdGlvbklEOlwiLmNvbmNhdChlKSk7dmFyIHM9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUNvbnZlcnNhdGlvblwiKTtyZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KHMsXCIuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSkpLHRoaXMuc2V0TWVzc2FnZVJlYWQoe2NvbnZlcnNhdGlvbklEOmV9KS50aGVuKChmdW5jdGlvbigpe3JldHVybiB0LnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpqbCxyZXF1ZXN0RGF0YTpufSl9KSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChzLFwiIG9rXCIpKSx0LmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uKGUpLGptKHtjb252ZXJzYXRpb25JRDplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KHMsXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwicGluQ29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY29udmVyc2F0aW9uSUQsbz1lLmlzUGlubmVkO2lmKCF0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKG4pKXJldHVybiBZbSh7Y29kZTpQZC5DT05WRVJTQVRJT05fTk9UX0ZPVU5ELG1lc3NhZ2U6ZnB9KTt2YXIgcj10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKG4pO2lmKHIuaXNQaW5uZWQ9PT1vKXJldHVybiBqbSh7Y29udmVyc2F0aW9uSUQ6bn0pO3ZhciBhPW5ldyBsZyh4Zyk7YS5zZXRNZXNzYWdlKFwiY29udmVyc2F0aW9uSUQ6XCIuY29uY2F0KG4sXCIgaXNQaW5uZWQ6XCIpLmNvbmNhdChvKSk7dmFyIHM9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnBpbkNvbnZlcnNhdGlvblwiKTtLaS5sb2coXCJcIi5jb25jYXQocyxcIi4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChuLFwiIGlzUGlubmVkOlwiKS5jb25jYXQobykpO3ZhciBpPW51bGw7cmV0dXJuIHZ1KG4pP2k9e3R5cGU6MSx0b0FjY291bnQ6bi5yZXBsYWNlKHJvLkNPTlZfQzJDLFwiXCIpfTpNdShuKSYmKGk9e3R5cGU6Mixncm91cElEOm4ucmVwbGFjZShyby5DT05WX0dST1VQLFwiXCIpfSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6WWwscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSxvcGVyYXRpb25UeXBlOiEwPT09bz8xOjIsaXRlbUxpc3Q6W2ldfX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQocyxcIiBva1wiKSksci5pc1Bpbm5lZCE9PW8mJihyLmlzUGlubmVkPW8sdC5fc29ydENvbnZlcnNhdGlvbkxpc3RBbmRFbWl0RXZlbnQoKSksUG0oe2NvbnZlcnNhdGlvbklEOm59KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQocyxcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJkZWxldGVMb2NhbENvbnZlcnNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXMoZSk7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVMb2NhbENvbnZlcnNhdGlvbiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgaGFzOlwiKS5jb25jYXQodCkpLHQmJih0aGlzLl9jb252ZXJzYXRpb25NYXAuZGVsZXRlKGUpLHRoaXMuX3JvYW1pbmdNZXNzYWdlS2V5TWFwLmRlbGV0ZShlKSx0aGlzLl9zZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdCgpLHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5yZW1vdmVCeUNvbnZlcnNhdGlvbklEKGUpLHRoaXMuX2NvbXBsZXRlZE1hcC5kZWxldGUoZSksdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSkpfX0se2tleTpcImlzTWVzc2FnZVNlbnRCeUN1cnJlbnRJbnN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEoIXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5oYXNMb2NhbE1lc3NhZ2UoZS5jb252ZXJzYXRpb25JRCxlLklEKSYmIXRoaXMuc2luZ2x5TGlua2VkTGlzdC5oYXMoZS5yYW5kb20pKX19LHtrZXk6XCJtb2RpZnlNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUuc3RhcnRzV2l0aChyby5DT05WX0MyQykpe3ZhciB0PURhdGUubm93KCk7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyKGUpO3ZhciBuPXRoaXMuZ2V0TW9kdWxlKGpjKS5nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQodGhpcy5nZXRNeVVzZXJJRCgpKTt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIubW9kaWZ5TWVzc2FnZVNlbnRCeU1lKHtjb252ZXJzYXRpb25JRDplLGxhdGVzdE5pY2s6bi5uaWNrLGxhdGVzdEF2YXRhcjpuLmF2YXRhcn0pLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIubW9kaWZ5TWVzc2FnZUxpc3QgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIGNvc3QgXCIpLmNvbmNhdChEYXRlLm5vdygpLXQsXCIgbXNcIikpfX19LHtrZXk6XCJ1cGRhdGVVc2VyUHJvZmlsZVNwZWNpZmllZEtleVwiLHZhbHVlOmZ1bmN0aW9uKGUpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIudXBkYXRlVXNlclByb2ZpbGVTcGVjaWZpZWRLZXkgb3B0aW9uczpcIiksZSk7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubmljayxvPWUuYXZhdGFyO2lmKHRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXModCkpe3ZhciByPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQodCkudXNlclByb2ZpbGU7WWkobikmJnIubmljayE9PW4mJihyLm5pY2s9biksWWkobykmJnIuYXZhdGFyIT09byYmKHIuYXZhdGFyPW8pLHRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX19LHtrZXk6XCJvbk15UHJvZmlsZU1vZGlmaWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxvPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCkscj1EYXRlLm5vdygpO28uZm9yRWFjaCgoZnVuY3Rpb24obyl7bi5tb2RpZnlNZXNzYWdlU2VudEJ5TWUodCh7Y29udmVyc2F0aW9uSUQ6by5jb252ZXJzYXRpb25JRH0sZSkpfSkpLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NeVByb2ZpbGVNb2RpZmllZC4gbW9kaWZ5IGFsbCBtZXNzYWdlcyBzZW50IGJ5IG1lLCBjb3N0IFwiKS5jb25jYXQoRGF0ZS5ub3coKS1yLFwiIG1zXCIpKX19LHtrZXk6XCJtb2RpZnlNZXNzYWdlU2VudEJ5TWVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIubW9kaWZ5TWVzc2FnZVNlbnRCeU1lKGUpfX0se2tleTpcImdldExhdGVzdE1lc3NhZ2VTZW50QnlNZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKGUpfX0se2tleTpcIm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIubW9kaWZ5TWVzc2FnZVNlbnRCeVBlZXIoZSx0KX19LHtrZXk6XCJnZXRMYXRlc3RNZXNzYWdlU2VudEJ5UGVlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIoZSl9fSx7a2V5OlwicHVzaEludG9Ob3RpY2VSZXN1bHRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEoIXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5wdXNoSW4odCl8fHRoaXMuc2luZ2x5TGlua2VkTGlzdC5oYXModC5yYW5kb20pKSYmKGUucHVzaCh0KSwhMCl9fSx7a2V5OlwiZ2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlKGUpfX0se2tleTpcImNoZWNrQW5kUGF0Y2hSZW1hcmtcIix2YWx1ZTpmdW5jdGlvbigpe2lmKDAhPT10aGlzLl9jb252ZXJzYXRpb25NYXAuc2l6ZSl7dmFyIGU9dGhpcy5nZXRNb2R1bGUoV2MpO2lmKGUpe3ZhciB0PXYodGhpcy5fY29udmVyc2F0aW9uTWFwLnZhbHVlcygpKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT1yby5DT05WX0MyQ30pKTtpZigwIT09dC5sZW5ndGgpe3ZhciBuPSExLG89MDt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciByPXQuY29udmVyc2F0aW9uSUQucmVwbGFjZShyby5DT05WX0MyQyxcIlwiKTtpZihlLmlzTXlGcmllbmQocikpe3ZhciBhPWUuZ2V0RnJpZW5kUmVtYXJrKHIpO3QucmVtYXJrIT09YSYmKHQucmVtYXJrPWEsbys9MSxuPSEwKX19KSksS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5jaGVja0FuZFBhdGNoUmVtYXJrLiBjMmMgY29udmVyc2F0aW9uIGNvdW50OlwiKS5jb25jYXQodC5sZW5ndGgsXCIsIHBhdGNoZWQgY291bnQ6XCIpLmNvbmNhdChvKSksbiYmdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSl9fX19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX3BhZ2luZ1N0YXR1cz1BYy5OT1RfU1RBUlQsdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnJlc2V0KCksdGhpcy5fcm9hbWluZ01lc3NhZ2VLZXlNYXAuY2xlYXIoKSx0aGlzLnNpbmdseUxpbmtlZExpc3QucmVzZXQoKSx0aGlzLl9wZWVyUmVhZFRpbWVNYXAuY2xlYXIoKSx0aGlzLl9jb21wbGV0ZWRNYXAuY2xlYXIoKSx0aGlzLl9jb252ZXJzYXRpb25NYXAuY2xlYXIoKSx0aGlzLl9wYWdpbmdUaW1lU3RhbXA9MCx0aGlzLl9wYWdpbmdTdGFydEluZGV4PTAsdGhpcy5fcGFnaW5nUGlubmVkVGltZVN0YW1wPTAsdGhpcy5fcGFnaW5nUGlubmVkU3RhcnRJbmRleD0wLHRoaXMucmVzZXRSZWFkeSgpfX1dKSxyfShkbCksTHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl9ncm91cE1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIkdyb3VwVGlwc0hhbmRsZXJcIix0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXA9bmV3IE1hcCx0aGlzLl9jaGVja0NvdW50TWFwPW5ldyBNYXAsdGhpcy5NQVhfQ0hFQ0tfQ09VTlQ9NH1yZXR1cm4gYShlLFt7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSUxPT0wJiZ0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuc2l6ZT4wJiZ0aGlzLl9jaGVja0NhY2hlZEdyb3VwVGlwcygpfX0se2tleTpcIl9jaGVja0NhY2hlZEdyb3VwVGlwc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuZm9yRWFjaCgoZnVuY3Rpb24odCxuKXt2YXIgbz1lLl9jaGVja0NvdW50TWFwLmdldChuKSxyPWUuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAobik7S2kubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fY2hlY2tDYWNoZWRHcm91cFRpcHMgZ3JvdXBJRDpcIikuY29uY2F0KG4sXCIgaGFzTG9jYWxHcm91cDpcIikuY29uY2F0KHIsXCIgY2hlY2tDb3VudDpcIikuY29uY2F0KG8pKSxyPyhlLl9ub3RpZnlDYWNoZWRHcm91cFRpcHMobiksZS5fY2hlY2tDb3VudE1hcC5kZWxldGUobiksZS5fZ3JvdXBNb2R1bGUuZGVsZXRlVW5qb2luZWRBVkNoYXRSb29tKG4pKTpvPj1lLk1BWF9DSEVDS19DT1VOVD8oZS5fZGVsZXRlQ2FjaGVkR3JvdXBUaXBzKG4pLGUuX2NoZWNrQ291bnRNYXAuZGVsZXRlKG4pKToobysrLGUuX2NoZWNrQ291bnRNYXAuc2V0KG4sbykpfSkpfX0se2tleTpcIm9uTmV3R3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUmVjZWl2ZUdyb3VwVGlwcyBjb3VudDpcIikuY29uY2F0KGUuZGF0YUxpc3QubGVuZ3RoKSk7dmFyIHQ9dGhpcy5uZXdHcm91cFRpcHNTdG9yZWRBbmRTdW1tYXJ5KGUpLG49dC5ldmVudERhdGFMaXN0LG89dC5yZXN1bHQscj10LkFWQ2hhdFJvb21NZXNzYWdlTGlzdDsoci5sZW5ndGg+MCYmdGhpcy5fZ3JvdXBNb2R1bGUub25BVkNoYXRSb29tTWVzc2FnZShyKSxuLmxlbmd0aD4wKSYmKHRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShKYykub25OZXdNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpuLGlzSW5zdGFudE1lc3NhZ2U6ITB9KSx0aGlzLl9ncm91cE1vZHVsZS51cGRhdGVOZXh0TWVzc2FnZVNlcShuKSk7by5sZW5ndGg+MCYmKHRoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KG9vLk1FU1NBR0VfUkVDRUlWRUQsbyksdGhpcy5oYW5kbGVNZXNzYWdlTGlzdChvKSl9fSx7a2V5OlwibmV3R3JvdXBUaXBzU3RvcmVkQW5kU3VtbWFyeVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgbj1lLmV2ZW50LG89ZS5kYXRhTGlzdCxyPW51bGwsYT1bXSxzPVtdLGk9e30sdT1bXSxjPTAsbD1vLmxlbmd0aDtjPGw7YysrKXt2YXIgZD1vW2NdLHA9ZC5ncm91cFByb2ZpbGUuZ3JvdXBJRCxnPXRoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAocCk7aWYoZ3x8IXRoaXMuX2dyb3VwTW9kdWxlLmlzVW5qb2luZWRBVkNoYXRSb29tKHApKWlmKGcpaWYodGhpcy5fZ3JvdXBNb2R1bGUuaXNNZXNzYWdlRnJvbUFWQ2hhdHJvb20ocCkpe3ZhciBoPWh1KGQpO2guZXZlbnQ9bix1LnB1c2goaCl9ZWxzZXtkLmN1cnJlbnRVc2VyPXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCksZC5jb252ZXJzYXRpb25UeXBlPXJvLkNPTlZfR1JPVVAsKHI9bmV3IEdtKGQpKS5zZXRFbGVtZW50KHt0eXBlOnJvLk1TR19HUlBfVElQLGNvbnRlbnQ6dCh0KHt9LGQuZWxlbWVudHMpLHt9LHtncm91cFByb2ZpbGU6ZC5ncm91cFByb2ZpbGV9KX0pLHIuaXNTeXN0ZW1NZXNzYWdlPSExO3ZhciBmPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShKYyksXz1yLmNvbnZlcnNhdGlvbklEO2lmKDY9PT1uKXIuc2V0T25saW5lT25seUZsYWcoITApLHMucHVzaChyKTtlbHNlIGlmKCFmLnB1c2hJbnRvTm90aWNlUmVzdWx0KHMscikpY29udGludWU7aWYoNiE9PW58fCFmLmdldExvY2FsQ29udmVyc2F0aW9uKF8pKXtpZig2IT09bil0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUobGwpLmFkZE1lc3NhZ2VTZXF1ZW5jZSh7a2V5OnJnLG1lc3NhZ2U6cn0pO2lmKEppKGlbX10pKWlbX109YS5wdXNoKHtjb252ZXJzYXRpb25JRDpfLHVucmVhZENvdW50OlwiaW5cIj09PXIuZmxvdyYmci5nZXRPbmxpbmVPbmx5RmxhZygpPzA6MSx0eXBlOnIuY29udmVyc2F0aW9uVHlwZSxzdWJUeXBlOnIuY29udmVyc2F0aW9uU3ViVHlwZSxsYXN0TWVzc2FnZTpyfSktMTtlbHNle3ZhciBtPWlbX107YVttXS50eXBlPXIuY29udmVyc2F0aW9uVHlwZSxhW21dLnN1YlR5cGU9ci5jb252ZXJzYXRpb25TdWJUeXBlLGFbbV0ubGFzdE1lc3NhZ2U9cixcImluXCIhPT1yLmZsb3d8fHIuZ2V0T25saW5lT25seUZsYWcoKXx8YVttXS51bnJlYWRDb3VudCsrfX19ZWxzZSB0aGlzLl9jYWNoZUdyb3VwVGlwc0FuZFByb2JlKHtncm91cElEOnAsZXZlbnQ6bixpdGVtOmR9KX1yZXR1cm57ZXZlbnREYXRhTGlzdDphLHJlc3VsdDpzLEFWQ2hhdFJvb21NZXNzYWdlTGlzdDp1fX19LHtrZXk6XCJoYW5kbGVNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXtzd2l0Y2goZS5wYXlsb2FkLm9wZXJhdGlvblR5cGUpe2Nhc2UgMTp0Ll9vbk5ld01lbWJlckNvbWVJbihlKTticmVhaztjYXNlIDI6dC5fb25NZW1iZXJRdWl0KGUpO2JyZWFrO2Nhc2UgMzp0Ll9vbk1lbWJlcktpY2tlZE91dChlKTticmVhaztjYXNlIDQ6dC5fb25NZW1iZXJTZXRBZG1pbihlKTticmVhaztjYXNlIDU6dC5fb25NZW1iZXJDYW5jZWxsZWRBZG1pbihlKTticmVhaztjYXNlIDY6dC5fb25Hcm91cFByb2ZpbGVNb2RpZmllZChlKTticmVhaztjYXNlIDc6dC5fb25NZW1iZXJJbmZvTW9kaWZpZWQoZSk7YnJlYWs7ZGVmYXVsdDpLaS53YXJuKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5oYW5kbGVNZXNzYWdlTGlzdCB1bmtub3duIG9wZXJhdGlvblR5cGU6XCIpLmNvbmNhdChlLnBheWxvYWQub3BlcmF0aW9uVHlwZSkpfX0pKX19LHtrZXk6XCJfb25OZXdNZW1iZXJDb21lSW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQsbj10Lm1lbWJlck51bSxvPXQuZ3JvdXBQcm9maWxlLmdyb3VwSUQscj10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtyJiZqaShuKSYmKHIubWVtYmVyTnVtPW4pfX0se2tleTpcIl9vbk1lbWJlclF1aXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQsbj10Lm1lbWJlck51bSxvPXQuZ3JvdXBQcm9maWxlLmdyb3VwSUQscj10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtyJiZqaShuKSYmKHIubWVtYmVyTnVtPW4pLHRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzKG8sZS5wYXlsb2FkLnVzZXJJRExpc3QpfX0se2tleTpcIl9vbk1lbWJlcktpY2tlZE91dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZCxuPXQubWVtYmVyTnVtLG89dC5ncm91cFByb2ZpbGUuZ3JvdXBJRCxyPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKG8pO3ImJmppKG4pJiYoci5tZW1iZXJOdW09biksdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cE1lbWJlcnMobyxlLnBheWxvYWQudXNlcklETGlzdCl9fSx7a2V5OlwiX29uTWVtYmVyU2V0QWRtaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQsbj1lLnBheWxvYWQudXNlcklETGlzdCxvPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZSh6Yyk7bi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1vLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKHQsZSk7biYmbi51cGRhdGVSb2xlKHJvLkdSUF9NQlJfUk9MRV9BRE1JTil9KSl9fSx7a2V5OlwiX29uTWVtYmVyQ2FuY2VsbGVkQWRtaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQsbj1lLnBheWxvYWQudXNlcklETGlzdCxvPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZSh6Yyk7bi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1vLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKHQsZSk7biYmbi51cGRhdGVSb2xlKHJvLkdSUF9NQlJfUk9MRV9NRU1CRVIpfSkpfX0se2tleTpcIl9vbkdyb3VwUHJvZmlsZU1vZGlmaWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUucGF5bG9hZCxvPW4ubmV3R3JvdXBQcm9maWxlLHI9bi5ncm91cFByb2ZpbGUuZ3JvdXBJRCxhPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKHIpO09iamVjdC5rZXlzKG8pLmZvckVhY2goKGZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlXCJvd25lcklEXCI6dC5fb3duZXJDaGFuZ2VkKGEsbyk7YnJlYWs7ZGVmYXVsdDphW2VdPW9bZV19fSkpLHRoaXMuX2dyb3VwTW9kdWxlLmVtaXRHcm91cExpc3RVcGRhdGUoITAsITApfX0se2tleTpcIl9vd25lckNoYW5nZWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWUuZ3JvdXBJRCxvPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKG4pLHI9dGhpcy50aW0uY29udGV4dC5pZGVudGlmaWVyO2lmKHI9PT10Lm93bmVySUQpe28udXBkYXRlR3JvdXAoe3NlbGZJbmZvOntyb2xlOnJvLkdSUF9NQlJfUk9MRV9PV05FUn19KTt2YXIgYT10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoemMpLHM9YS5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhuLHIpLGk9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUobikub3duZXJJRCx1PWEuZ2V0TG9jYWxHcm91cE1lbWJlckluZm8obixpKTtzJiZzLnVwZGF0ZVJvbGUocm8uR1JQX01CUl9ST0xFX09XTkVSKSx1JiZ1LnVwZGF0ZVJvbGUocm8uR1JQX01CUl9ST0xFX01FTUJFUil9fX0se2tleTpcIl9vbk1lbWJlckluZm9Nb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRCxuPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZSh6Yyk7ZS5wYXlsb2FkLm1lbWJlckxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89bi5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyh0LGUudXNlcklEKTtvJiZlLm11dGVUaW1lJiZvLnVwZGF0ZU11dGVVbnRpbChlLm11dGVUaW1lKX0pKX19LHtrZXk6XCJfY2FjaGVHcm91cFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5oYXMoZSl8fHRoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5zZXQoZSxbXSksdGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmdldChlKS5wdXNoKHQpfX0se2tleTpcIl9kZWxldGVDYWNoZWRHcm91cFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuaGFzKGUpJiZ0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuZGVsZXRlKGUpfX0se2tleTpcIl9ub3RpZnlDYWNoZWRHcm91cFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmdldChlKXx8W107bi5mb3JFYWNoKChmdW5jdGlvbihlKXt0Lm9uTmV3R3JvdXBUaXBzKGUpfSkpLHRoaXMuX2RlbGV0ZUNhY2hlZEdyb3VwVGlwcyhlKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9ub3RpZnlDYWNoZWRHcm91cFRpcHMgZ3JvdXBJRDpcIikuY29uY2F0KGUsXCIgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCkpfX0se2tleTpcIl9jYWNoZUdyb3VwVGlwc0FuZFByb2JlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUuZXZlbnQscj1lLml0ZW07dGhpcy5fY2FjaGVHcm91cFRpcHMobix7ZXZlbnQ6byxkYXRhTGlzdDpbcl19KSx0aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cFNpbXBsaWZpZWRJbmZvKG4pLnRoZW4oKGZ1bmN0aW9uKGUpe2UudHlwZT09PXJvLkdSUF9BVkNIQVRST09NP3QuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAobik/dC5fbm90aWZ5Q2FjaGVkR3JvdXBUaXBzKG4pOnQuX2dyb3VwTW9kdWxlLnNldFVuam9pbmVkQVZDaGF0Um9vbShuKToodC5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAoW2VdKSx0Ll9ub3RpZnlDYWNoZWRHcm91cFRpcHMobikpfSkpLHRoaXMuX2NoZWNrQ291bnRNYXAuaGFzKG4pfHx0aGlzLl9jaGVja0NvdW50TWFwLnNldChuLDApLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2NhY2hlR3JvdXBUaXBzQW5kUHJvYmUgZ3JvdXBJRDpcIikuY29uY2F0KG4pKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmNsZWFyKCksdGhpcy5fY2hlY2tDb3VudE1hcC5jbGVhcigpfX1dKSxlfSgpLE92PUhvLlVOU1VQUE9SVEVEX1ksUnY9W10ucHVzaCxidj1NYXRoLm1pbjtvcihcInNwbGl0XCIsKGZ1bmN0aW9uKGUsdCxuKXt2YXIgbztyZXR1cm4gbz1cImNcIj09XCJhYmJjXCIuc3BsaXQoLyhiKSovKVsxXXx8NCE9XCJ0ZXN0XCIuc3BsaXQoLyg/OikvLC0xKS5sZW5ndGh8fDIhPVwiYWJcIi5zcGxpdCgvKD86YWIpKi8pLmxlbmd0aHx8NCE9XCIuXCIuc3BsaXQoLyguPykoLj8pLykubGVuZ3RofHxcIi5cIi5zcGxpdCgvKCkoKS8pLmxlbmd0aD4xfHxcIlwiLnNwbGl0KC8uPy8pLmxlbmd0aD9mdW5jdGlvbihlLG4pe3ZhciBvPU10KFYodGhpcykpLHI9dm9pZCAwPT09bj80Mjk0OTY3Mjk1Om4+Pj4wO2lmKDA9PT1yKXJldHVybltdO2lmKHZvaWQgMD09PWUpcmV0dXJuW29dO2lmKCFwcihlKSlyZXR1cm4gdC5jYWxsKG8sZSxyKTtmb3IodmFyIGEscyxpLHU9W10sYz0oZS5pZ25vcmVDYXNlP1wiaVwiOlwiXCIpKyhlLm11bHRpbGluZT9cIm1cIjpcIlwiKSsoZS51bmljb2RlP1widVwiOlwiXCIpKyhlLnN0aWNreT9cInlcIjpcIlwiKSxsPTAsZD1uZXcgUmVnRXhwKGUuc291cmNlLGMrXCJnXCIpOyhhPWVyLmNhbGwoZCxvKSkmJiEoKHM9ZC5sYXN0SW5kZXgpPmwmJih1LnB1c2goby5zbGljZShsLGEuaW5kZXgpKSxhLmxlbmd0aD4xJiZhLmluZGV4PG8ubGVuZ3RoJiZSdi5hcHBseSh1LGEuc2xpY2UoMSkpLGk9YVswXS5sZW5ndGgsbD1zLHUubGVuZ3RoPj1yKSk7KWQubGFzdEluZGV4PT09YS5pbmRleCYmZC5sYXN0SW5kZXgrKztyZXR1cm4gbD09PW8ubGVuZ3RoPyFpJiZkLnRlc3QoXCJcIil8fHUucHVzaChcIlwiKTp1LnB1c2goby5zbGljZShsKSksdS5sZW5ndGg+cj91LnNsaWNlKDAscik6dX06XCIwXCIuc3BsaXQodm9pZCAwLDApLmxlbmd0aD9mdW5jdGlvbihlLG4pe3JldHVybiB2b2lkIDA9PT1lJiYwPT09bj9bXTp0LmNhbGwodGhpcyxlLG4pfTp0LFtmdW5jdGlvbih0LG4pe3ZhciByPVYodGhpcyksYT1udWxsPT10P3ZvaWQgMDp0W2VdO3JldHVybiB2b2lkIDAhPT1hP2EuY2FsbCh0LHIsbik6by5jYWxsKE10KHIpLHQsbil9LGZ1bmN0aW9uKGUscil7dmFyIGE9RGUodGhpcykscz1NdChlKSxpPW4obyxhLHMscixvIT09dCk7aWYoaS5kb25lKXJldHVybiBpLnZhbHVlO3ZhciB1PVRhKGEsUmVnRXhwKSxjPWEudW5pY29kZSxsPShhLmlnbm9yZUNhc2U/XCJpXCI6XCJcIikrKGEubXVsdGlsaW5lP1wibVwiOlwiXCIpKyhhLnVuaWNvZGU/XCJ1XCI6XCJcIikrKE92P1wiZ1wiOlwieVwiKSxkPW5ldyB1KE92P1wiXig/OlwiK2Euc291cmNlK1wiKVwiOmEsbCkscD12b2lkIDA9PT1yPzQyOTQ5NjcyOTU6cj4+PjA7aWYoMD09PXApcmV0dXJuW107aWYoMD09PXMubGVuZ3RoKXJldHVybiBudWxsPT09c3IoZCxzKT9bc106W107Zm9yKHZhciBnPTAsaD0wLGY9W107aDxzLmxlbmd0aDspe2QubGFzdEluZGV4PU92PzA6aDt2YXIgXyxtPXNyKGQsT3Y/cy5zbGljZShoKTpzKTtpZihudWxsPT09bXx8KF89YnYoemUoZC5sYXN0SW5kZXgrKE92P2g6MCkpLHMubGVuZ3RoKSk9PT1nKWg9YXIocyxoLGMpO2Vsc2V7aWYoZi5wdXNoKHMuc2xpY2UoZyxoKSksZi5sZW5ndGg9PT1wKXJldHVybiBmO2Zvcih2YXIgdj0xO3Y8PW0ubGVuZ3RoLTE7disrKWlmKGYucHVzaChtW3ZdKSxmLmxlbmd0aD09PXApcmV0dXJuIGY7aD1nPV99fXJldHVybiBmLnB1c2gocy5zbGljZShnKSksZn1dfSksISFPKChmdW5jdGlvbigpe3ZhciBlPS8oPzopLyx0PWUuZXhlYztlLmV4ZWM9ZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3ZhciBuPVwiYWJcIi5zcGxpdChlKTtyZXR1cm4gMiE9PW4ubGVuZ3RofHxcImFcIiE9PW5bMF18fFwiYlwiIT09blsxXX0pKSxPdik7dmFyIHd2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fZ3JvdXBNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJDb21tb25Hcm91cEhhbmRsZXJcIix0aGlzLnRlbXBDb252ZXJzYXRpb25MaXN0PW51bGwsdGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwPW5ldyBNYXAsdGhpcy5fY2hlY2tDb3VudE1hcD1uZXcgTWFwLHRoaXMuTUFYX0NIRUNLX0NPVU5UPTQsdC5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uY2UoZ3YuQ09OVEVYVF9BMktFWV9BTkRfVElOWUlEX1VQREFURUQsdGhpcy5faW5pdEdyb3VwTGlzdCx0aGlzKX1yZXR1cm4gYShlLFt7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSUxPT0wJiZ0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuc2l6ZT4wJiZ0aGlzLl9jaGVja0NhY2hlZEdyb3VwTWVzc2FnZSgpfX0se2tleTpcIl9jaGVja0NhY2hlZEdyb3VwTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuZm9yRWFjaCgoZnVuY3Rpb24odCxuKXt2YXIgbz1lLl9jaGVja0NvdW50TWFwLmdldChuKSxyPWUuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAobik7S2kubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fY2hlY2tDYWNoZWRHcm91cE1lc3NhZ2UgZ3JvdXBJRDpcIikuY29uY2F0KG4sXCIgaGFzTG9jYWxHcm91cDpcIikuY29uY2F0KHIsXCIgY2hlY2tDb3VudDpcIikuY29uY2F0KG8pKSxyPyhlLl9ub3RpZnlDYWNoZWRHcm91cE1lc3NhZ2UobiksZS5fY2hlY2tDb3VudE1hcC5kZWxldGUobiksZS5fZ3JvdXBNb2R1bGUuZGVsZXRlVW5qb2luZWRBVkNoYXRSb29tKG4pKTpvPj1lLk1BWF9DSEVDS19DT1VOVD8oZS5fZGVsZXRlQ2FjaGVkR3JvdXBNZXNzYWdlKG4pLGUuX2NoZWNrQ291bnRNYXAuZGVsZXRlKG4pKToobysrLGUuX2NoZWNrQ291bnRNYXAuc2V0KG4sbykpfSkpfX0se2tleTpcIl9pbml0R3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2luaXRHcm91cExpc3RcIikpO3ZhciB0PW5ldyBsZyh0aCksbj10aGlzLl9ncm91cE1vZHVsZS5nZXRTdG9yYWdlR3JvdXBMaXN0KCk7aWYoemkobikmJm4ubGVuZ3RoPjApe24uZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5fZ3JvdXBNb2R1bGUuaW5pdEdyb3VwTWFwKHQpfSkpLHRoaXMuX2dyb3VwTW9kdWxlLmVtaXRHcm91cExpc3RVcGRhdGUoITAsITEpO3ZhciBvPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBMaXN0KCkubGVuZ3RoO3Quc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwIGNvdW50OlwiLmNvbmNhdChvKSkuZW5kKCl9ZWxzZSB0LnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cCBjb3VudDowXCIpLmVuZCgpO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2luaXRHcm91cExpc3Qgb2tcIikpLHRoaXMuZ2V0R3JvdXBMaXN0KCl9fSx7a2V5OlwiaGFuZGxlVXBkYXRlR3JvdXBMYXN0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5oYW5kbGVVcGRhdGVHcm91cExhc3RNZXNzYWdlXCIpO2lmKEtpLmRlYnVnKFwiXCIuY29uY2F0KHQsXCIgY29udmVyc2F0aW9uIGNvdW50OlwiKS5jb25jYXQoZS5sZW5ndGgsXCIsIGxvY2FsIGdyb3VwIGNvdW50OlwiKS5jb25jYXQodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cExpc3QoKS5sZW5ndGgpKSwwIT09dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBNYXAoKS5zaXplKXtmb3IodmFyIG4sbyxyLGE9ITEscz0wLGk9ZS5sZW5ndGg7czxpO3MrKykobj1lW3NdKS50eXBlPT09cm8uQ09OVl9HUk9VUCYmKG89bi5jb252ZXJzYXRpb25JRC5zcGxpdCgvXkdST1VQLylbMV0sKHI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUobykpJiYoci5sYXN0TWVzc2FnZT1uLmxhc3RNZXNzYWdlLGE9ITApKTthJiYodGhpcy5fZ3JvdXBNb2R1bGUuc29ydExvY2FsR3JvdXBMaXN0KCksdGhpcy5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhMSkpfWVsc2UgdGhpcy50ZW1wQ29udmVyc2F0aW9uTGlzdD1lfX0se2tleTpcIm9uTmV3R3JvdXBNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTmV3R3JvdXBNZXNzYWdlIGNvdW50OlwiKS5jb25jYXQoZS5kYXRhTGlzdC5sZW5ndGgpKTt2YXIgdD10aGlzLl9uZXdHcm91cE1lc3NhZ2VTdG9yZWRBbmRTdW1tYXJ5KGUpLG49dC5jb252ZXJzYXRpb25PcHRpb25zTGlzdCxvPXQubWVzc2FnZUxpc3Qscj10LkFWQ2hhdFJvb21NZXNzYWdlTGlzdDsoci5sZW5ndGg+MCYmdGhpcy5fZ3JvdXBNb2R1bGUub25BVkNoYXRSb29tTWVzc2FnZShyKSx0aGlzLl9ncm91cE1vZHVsZS5maWx0ZXJNb2RpZmllZE1lc3NhZ2Uobyksbi5sZW5ndGg+MCkmJih0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoSmMpLm9uTmV3TWVzc2FnZSh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6bixpc0luc3RhbnRNZXNzYWdlOiEwfSksdGhpcy5fZ3JvdXBNb2R1bGUudXBkYXRlTmV4dE1lc3NhZ2VTZXEobikpO3ZhciBhPXRoaXMuX2dyb3VwTW9kdWxlLmZpbHRlclVubW9kaWZpZWRNZXNzYWdlKG8pO2EubGVuZ3RoPjAmJnRoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KG9vLk1FU1NBR0VfUkVDRUlWRUQsYSksby5sZW5ndGg9MH19LHtrZXk6XCJfbmV3R3JvdXBNZXNzYWdlU3RvcmVkQW5kU3VtbWFyeVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YUxpc3Qsbj1lLmV2ZW50LG89ZS5pc0luc3RhbnRNZXNzYWdlLHI9bnVsbCxhPVtdLHM9W10saT1bXSx1PXt9LGM9cm8uQ09OVl9HUk9VUCxsPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZSh0bCksZD10Lmxlbmd0aDtkPjEmJnQuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zZXF1ZW5jZS10LnNlcXVlbmNlfSkpO2Zvcih2YXIgcD0wO3A8ZDtwKyspe3ZhciBnPXRbcF0saD1nLmdyb3VwUHJvZmlsZS5ncm91cElELGY9dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cChoKTtpZihmfHwhdGhpcy5fZ3JvdXBNb2R1bGUuaXNVbmpvaW5lZEFWQ2hhdFJvb20oaCkpaWYoZilpZih0aGlzLl9ncm91cE1vZHVsZS5pc01lc3NhZ2VGcm9tQVZDaGF0cm9vbShoKSl7dmFyIF89aHUoZyk7Xy5ldmVudD1uLGkucHVzaChfKX1lbHNle2cuY3VycmVudFVzZXI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSxnLmNvbnZlcnNhdGlvblR5cGU9YyxnLmlzU3lzdGVtTWVzc2FnZT0hIWcuaXNTeXN0ZW1NZXNzYWdlLHI9bmV3IEdtKGcpLGcuZWxlbWVudHM9bC5wYXJzZUVsZW1lbnRzKGcuZWxlbWVudHMsZy5mcm9tKSxyLnNldEVsZW1lbnQoZy5lbGVtZW50cyk7dmFyIG09MT09PXRbcF0uaXNNb2RpZmllZCx2PXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShKYyk7di5pc01lc3NhZ2VTZW50QnlDdXJyZW50SW5zdGFuY2Uocik/ci5pc01vZGlmaWVkPW06bT0hMTt2YXIgTT10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUobGwpO2lmKG8mJk0uYWRkTWVzc2FnZURlbGF5KHtjdXJyZW50VGltZTpEYXRlLm5vdygpLHRpbWU6ci50aW1lfSksMT09PWcub25saW5lT25seUZsYWcpci5zZXRPbmxpbmVPbmx5RmxhZyghMCkscy5wdXNoKHIpO2Vsc2V7aWYoIXYucHVzaEludG9NZXNzYWdlTGlzdChzLHIsbSkpY29udGludWU7TS5hZGRNZXNzYWdlU2VxdWVuY2Uoe2tleTpyZyxtZXNzYWdlOnJ9KTt2YXIgeT1yLmNvbnZlcnNhdGlvbklEO2lmKEppKHVbeV0pKXVbeV09YS5wdXNoKHtjb252ZXJzYXRpb25JRDp5LHVucmVhZENvdW50Olwib3V0XCI9PT1yLmZsb3c/MDoxLHR5cGU6ci5jb252ZXJzYXRpb25UeXBlLHN1YlR5cGU6ci5jb252ZXJzYXRpb25TdWJUeXBlLGxhc3RNZXNzYWdlOnJ9KS0xO2Vsc2V7dmFyIEk9dVt5XTthW0ldLnR5cGU9ci5jb252ZXJzYXRpb25UeXBlLGFbSV0uc3ViVHlwZT1yLmNvbnZlcnNhdGlvblN1YlR5cGUsYVtJXS5sYXN0TWVzc2FnZT1yLFwiaW5cIj09PXIuZmxvdyYmYVtJXS51bnJlYWRDb3VudCsrfX19ZWxzZSB0aGlzLl9jYWNoZUdyb3VwTWVzc2FnZUFuZFByb2JlKHtncm91cElEOmgsZXZlbnQ6bixpdGVtOmd9KX1yZXR1cm57Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6YSxtZXNzYWdlTGlzdDpzLEFWQ2hhdFJvb21NZXNzYWdlTGlzdDppfX19LHtrZXk6XCJvbkdyb3VwTWVzc2FnZVJldm9rZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Hcm91cE1lc3NhZ2VSZXZva2VkIG51bXM6XCIpLmNvbmNhdChlLmRhdGFMaXN0Lmxlbmd0aCkpO3ZhciB0PXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShKYyksbj1bXSxvPW51bGw7ZS5kYXRhTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgcj1lLmVsZW1lbnRzLnJldm9rZWRJbmZvcztKaShyKXx8ci5mb3JFYWNoKChmdW5jdGlvbihlKXsobz10LnJldm9rZShcIkdST1VQXCIuY29uY2F0KGUuZ3JvdXBJRCksZS5zZXF1ZW5jZSxlLnJhbmRvbSkpJiZuLnB1c2gobyl9KSl9KSksMCE9PW4ubGVuZ3RoJiYodC5vbk1lc3NhZ2VSZXZva2VkKG4pLHRoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KG9vLk1FU1NBR0VfUkVWT0tFRCxuKSl9fSx7a2V5OlwiX2dyb3VwTGlzdFRyZWVTaGFraW5nXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBNYXAodih0aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cE1hcCgpKSksbj0wLG89ZS5sZW5ndGg7bjxvO24rKyl0LmRlbGV0ZShlW25dLmdyb3VwSUQpO3RoaXMuX2dyb3VwTW9kdWxlLmhhc0pvaW5lZEFWQ2hhdFJvb20oKSYmdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0Sm9pbmVkQVZDaGF0Um9vbSgpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuZGVsZXRlKGUpfSkpO2Zvcih2YXIgcj12KHQua2V5cygpKSxhPTAscz1yLmxlbmd0aDthPHM7YSsrKXRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUdyb3VwKHJbYV0pfX0se2tleTpcImdldEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBMaXN0XCIpLG89bmV3IGxnKFpnKTtLaS5sb2coXCJcIi5jb25jYXQobikpO3ZhciByPXtpbnRyb2R1Y3Rpb246XCJJbnRyb2R1Y3Rpb25cIixub3RpZmljYXRpb246XCJOb3RpZmljYXRpb25cIixjcmVhdGVUaW1lOlwiQ3JlYXRlVGltZVwiLG93bmVySUQ6XCJPd25lcl9BY2NvdW50XCIsbGFzdEluZm9UaW1lOlwiTGFzdEluZm9UaW1lXCIsbWVtYmVyTnVtOlwiTWVtYmVyTnVtXCIsbWF4TWVtYmVyTnVtOlwiTWF4TWVtYmVyTnVtXCIsam9pbk9wdGlvbjpcIkFwcGx5Sm9pbk9wdGlvblwiLG11dGVBbGxNZW1iZXJzOlwiU2h1dFVwQWxsTWVtYmVyXCJ9LGE9W1wiVHlwZVwiLFwiTmFtZVwiLFwiRmFjZVVybFwiLFwiTmV4dE1zZ1NlcVwiLFwiTGFzdE1zZ1RpbWVcIl0scz1bXTtyZXR1cm4gZSYmZS5ncm91cFByb2ZpbGVGaWx0ZXImJmUuZ3JvdXBQcm9maWxlRmlsdGVyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JbZV0mJmEucHVzaChyW2VdKX0pKSx0aGlzLl9wYWdpbmdHZXRHcm91cExpc3Qoe2xpbWl0OjUwLG9mZnNldDowLGdyb3VwQmFzZUluZm9GaWx0ZXI6YSxncm91cExpc3Q6c30pLnRoZW4oKGZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIGNvdW50OlwiKS5jb25jYXQocy5sZW5ndGgpKSx0Ll9ncm91cExpc3RUcmVlU2hha2luZyhzKSx0Ll9ncm91cE1vZHVsZS51cGRhdGVHcm91cE1hcChzKTt2YXIgZT10Ll9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwTGlzdCgpLmxlbmd0aDtyZXR1cm4gby5zZXROZXR3b3JrVHlwZSh0Ll9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwicmVtb3RlIGNvdW50OlwiLmNvbmNhdChzLmxlbmd0aCxcIiwgYWZ0ZXIgdHJlZSBzaGFraW5nLCBsb2NhbCBjb3VudDpcIikuY29uY2F0KGUpKS5lbmQoKSx0LnRlbXBDb252ZXJzYXRpb25MaXN0JiYoS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgdXBkYXRlIGxhc3QgbWVzc2FnZSB3aXRoIHRlbXBDb252ZXJzYXRpb25MaXN0LCBjb3VudDpcIikuY29uY2F0KHQudGVtcENvbnZlcnNhdGlvbkxpc3QubGVuZ3RoKSksdC5oYW5kbGVVcGRhdGVHcm91cExhc3RNZXNzYWdlKHtkYXRhOnQudGVtcENvbnZlcnNhdGlvbkxpc3R9KSx0LnRlbXBDb252ZXJzYXRpb25MaXN0PW51bGwpLHQuX2dyb3VwTW9kdWxlLmVtaXRHcm91cExpc3RVcGRhdGUoKSxQbSh7Z3JvdXBMaXN0OnQuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBMaXN0KCl9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwiX3BhZ2luZ0dldEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3BhZ2luZ0dldEdyb3VwTGlzdFwiKSxvPWUubGltaXQscj1lLm9mZnNldCxhPWUuZ3JvdXBCYXNlSW5mb0ZpbHRlcixzPWUuZ3JvdXBMaXN0LGk9bmV3IGxnKHJoKTtyZXR1cm4gdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOldsLHJlcXVlc3REYXRhOnttZW1iZXJBY2NvdW50OnRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCksbGltaXQ6byxvZmZzZXQ6cixyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjphLHNlbGZJbmZvRmlsdGVyOltcIlJvbGVcIixcIkpvaW5UaW1lXCIsXCJNc2dGbGFnXCJdfX19KS50aGVuKChmdW5jdGlvbihlKXt2YXIgdT1lLmRhdGEsYz11Lmdyb3VwcyxsPXUudG90YWxDb3VudDtzLnB1c2guYXBwbHkocyx2KGMpKTt2YXIgZD1yK28scD0hKGw+ZCk7cmV0dXJuIGkuc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIm9mZnNldDpcIi5jb25jYXQocixcIiB0b3RhbENvdW50OlwiKS5jb25jYXQobCxcIiBpc0NvbXBsZXRlZDpcIikuY29uY2F0KHAsXCIgY3VycmVudENvdW50OlwiKS5jb25jYXQocy5sZW5ndGgpKS5lbmQoKSxwPyhLaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gdG90YWxDb3VudDpcIikuY29uY2F0KGwpKSxQbSh7Z3JvdXBMaXN0OnN9KSk6KHI9ZCx0Ll9wYWdpbmdHZXRHcm91cExpc3Qoe2xpbWl0Om8sb2Zmc2V0OnIsZ3JvdXBCYXNlSW5mb0ZpbHRlcjphLGdyb3VwTGlzdDpzfSkpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07aS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksWW0oZSl9KSl9fSx7a2V5OlwiX2NhY2hlR3JvdXBNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuaGFzKGUpfHx0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuc2V0KGUsW10pLHRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5nZXQoZSkucHVzaCh0KX19LHtrZXk6XCJfZGVsZXRlQ2FjaGVkR3JvdXBNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmhhcyhlKSYmdGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmRlbGV0ZShlKX19LHtrZXk6XCJfbm90aWZ5Q2FjaGVkR3JvdXBNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5nZXQoZSl8fFtdO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5vbk5ld0dyb3VwTWVzc2FnZShlKX0pKSx0aGlzLl9kZWxldGVDYWNoZWRHcm91cE1lc3NhZ2UoZSksS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fbm90aWZ5Q2FjaGVkR3JvdXBNZXNzYWdlIGdyb3VwSUQ6XCIpLmNvbmNhdChlLFwiIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKX19LHtrZXk6XCJfY2FjaGVHcm91cE1lc3NhZ2VBbmRQcm9iZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLmV2ZW50LHI9ZS5pdGVtO3RoaXMuX2NhY2hlR3JvdXBNZXNzYWdlKG4se2V2ZW50Om8sZGF0YUxpc3Q6W3JdfSksdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBTaW1wbGlmaWVkSW5mbyhuKS50aGVuKChmdW5jdGlvbihlKXtlLnR5cGU9PT1yby5HUlBfQVZDSEFUUk9PTT90Ll9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pP3QuX25vdGlmeUNhY2hlZEdyb3VwTWVzc2FnZShuKTp0Ll9ncm91cE1vZHVsZS5zZXRVbmpvaW5lZEFWQ2hhdFJvb20obik6KHQuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKFtlXSksdC5fbm90aWZ5Q2FjaGVkR3JvdXBNZXNzYWdlKG4pKX0pKSx0aGlzLl9jaGVja0NvdW50TWFwLmhhcyhuKXx8dGhpcy5fY2hlY2tDb3VudE1hcC5zZXQobiwwKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jYWNoZUdyb3VwTWVzc2FnZUFuZFByb2JlIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5jbGVhcigpLHRoaXMuX2NoZWNrQ291bnRNYXAuY2xlYXIoKSx0aGlzLl9ncm91cE1vZHVsZS5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uY2UoZ3YuQ09OVEVYVF9BMktFWV9BTkRfVElOWUlEX1VQREFURUQsdGhpcy5faW5pdEdyb3VwTGlzdCx0aGlzKX19XSksZX0oKSxHdj17MTpcImluaXRcIiwyOlwibW9kaWZ5XCIsMzpcImNsZWFyXCIsNDpcImRlbGV0ZVwifSxQdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX2dyb3VwTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiR3JvdXBBdHRyaWJ1dGVzSGFuZGxlclwiLHRoaXMuX2dyb3VwQXR0cmlidXRlc01hcD1uZXcgTWFwLHRoaXMuQ0FDSEVfRVhQSVJFX1RJTUU9M2U0LHRoaXMuX2dyb3VwTW9kdWxlLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oZ3YuQ0xPVURfQ09ORklHX1VQREFURUQsdGhpcy5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsdGhpcyl9cmV0dXJuIGEoZSxbe2tleTpcIl9vbkNsb3VkQ29uZmlnVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0Q2xvdWRDb25maWcoXCJncnBfYXR0cl9jYWNoZV90aW1lXCIpO0ppKGUpfHwodGhpcy5DQUNIRV9FWFBJUkVfVElNRT1OdW1iZXIoZSkpfX0se2tleTpcInVwZGF0ZUxvY2FsTWFpblNlcXVlbmNlT25SZWNvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UubG9jYWxNYWluU2VxdWVuY2U9MH0pKX19LHtrZXk6XCJvbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS5ncm91cEF0dHJpYnV0ZU9wdGlvbixyPW8ubWFpblNlcXVlbmNlLGE9by5oYXNDaGFuZ2VkQXR0cmlidXRlSW5mbyxzPW8uZ3JvdXBBdHRyaWJ1dGVMaXN0LGk9dm9pZCAwPT09cz9bXTpzLHU9by5vcGVyYXRpb25UeXBlO2lmKEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Hcm91cEF0dHJpYnV0ZXNVcGRhdGVkLiBoYXNDaGFuZ2VkQXR0cmlidXRlSW5mbzpcIikuY29uY2F0KGEsXCIgb3BlcmF0aW9uVHlwZTpcIikuY29uY2F0KHUpKSwxPT09YSl7aWYoND09PXUpe3ZhciBjPVtdO2kuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Yy5wdXNoKGUua2V5KX0pKSxpPXYoYyksYz1udWxsfXJldHVybiB0aGlzLl9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4scmVtb3RlTWFpblNlcXVlbmNlOnIsZ3JvdXBBdHRyaWJ1dGVMaXN0Omksb3BlcmF0aW9uVHlwZTpHdlt1XX0pLHZvaWQgdGhpcy5fZW1pdEdyb3VwQXR0cmlidXRlc1VwZGF0ZWQobil9aWYodGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmhhcyhuKSl7dmFyIGw9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldChuKS5hdkNoYXRSb29tS2V5O3RoaXMuX2dldEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpuLGF2Q2hhdFJvb21LZXk6bH0pLnRoZW4oKGZ1bmN0aW9uKCl7dC5fZW1pdEdyb3VwQXR0cmlidXRlc1VwZGF0ZWQobil9KSl9fX0se2tleTpcImluaXRHcm91cEF0dHJpYnV0ZXNDYWNoZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBJRCxuPWUuYXZDaGF0Um9vbUtleTt0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuc2V0KHQse2xhc3RVcGRhdGVUaW1lOjAsbG9jYWxNYWluU2VxdWVuY2U6MCxyZW1vdGVNYWluU2VxdWVuY2U6MCxhdHRyaWJ1dGVzOm5ldyBNYXAsYXZDaGF0Um9vbUtleTpufSksS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5pbml0R3JvdXBBdHRyaWJ1dGVzQ2FjaGUgZ3JvdXBJRDpcIikuY29uY2F0KHQsXCIgYXZDaGF0Um9vbUtleTpcIikuY29uY2F0KG4pKX19LHtrZXk6XCJpbml0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUuZ3JvdXBBdHRyaWJ1dGVzLHI9dGhpcy5fY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixmdW5jTmFtZTpcImluaXRHcm91cEF0dHJpYnV0ZXNcIn0pO2lmKCEwIT09cilyZXR1cm4gWW0ocik7dmFyIGE9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldChuKSxzPWEucmVtb3RlTWFpblNlcXVlbmNlLGk9YS5hdkNoYXRSb29tS2V5LHU9bmV3IGxnKGloKTtyZXR1cm4gdS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiBtYWluU2VxdWVuY2U6XCIpLmNvbmNhdChzLFwiIGdyb3VwQXR0cmlidXRlczpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KG8pKSksdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmZkLHJlcXVlc3REYXRhOntncm91cElEOm4sYXZDaGF0Um9vbUtleTppLG1haW5TZXF1ZW5jZTpzLGdyb3VwQXR0cmlidXRlTGlzdDp0aGlzLl90cmFuc2Zvcm1Hcm91cEF0dHJpYnV0ZXMobyl9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHI9ZS5kYXRhLGE9ci5tYWluU2VxdWVuY2Uscz12KHIuZ3JvdXBBdHRyaWJ1dGVMaXN0KTtyZXR1cm4gcy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnZhbHVlPW9bZS5rZXldfSkpLHQuX3JlZnJlc2hDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixyZW1vdGVNYWluU2VxdWVuY2U6YSxncm91cEF0dHJpYnV0ZUxpc3Q6cyxvcGVyYXRpb25UeXBlOlwiaW5pdFwifSksdS5zZXROZXR3b3JrVHlwZSh0Ll9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmluaXRHcm91cEF0dHJpYnV0ZXMgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSksUG0oe2dyb3VwQXR0cmlidXRlczpvfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTt1LnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxZbShlKX0pKX19LHtrZXk6XCJzZXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS5ncm91cEF0dHJpYnV0ZXMscj10aGlzLl9jaGVja0NhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpuLGZ1bmNOYW1lOlwic2V0R3JvdXBBdHRyaWJ1dGVzXCJ9KTtpZighMCE9PXIpcmV0dXJuIFltKHIpO3ZhciBhPXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5nZXQobikscz1hLnJlbW90ZU1haW5TZXF1ZW5jZSxpPWEuYXZDaGF0Um9vbUtleSx1PWEuYXR0cmlidXRlcyxjPXRoaXMuX3RyYW5zZm9ybUdyb3VwQXR0cmlidXRlcyhvKTtjLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5O2Uuc2VxdWVuY2U9MCx1Lmhhcyh0KSYmKGUuc2VxdWVuY2U9dS5nZXQodCkuc2VxdWVuY2UpfSkpO3ZhciBsPW5ldyBsZyh1aCk7cmV0dXJuIGwuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgbWFpblNlcXVlbmNlOlwiKS5jb25jYXQocyxcIiBncm91cEF0dHJpYnV0ZXM6XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShvKSkpLHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpfZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpuLGF2Q2hhdFJvb21LZXk6aSxtYWluU2VxdWVuY2U6cyxncm91cEF0dHJpYnV0ZUxpc3Q6Y319KS50aGVuKChmdW5jdGlvbihlKXt2YXIgcj1lLmRhdGEsYT1yLm1haW5TZXF1ZW5jZSxzPXYoci5ncm91cEF0dHJpYnV0ZUxpc3QpO3JldHVybiBzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UudmFsdWU9b1tlLmtleV19KSksdC5fcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpuLHJlbW90ZU1haW5TZXF1ZW5jZTphLGdyb3VwQXR0cmlidXRlTGlzdDpzLG9wZXJhdGlvblR5cGU6XCJtb2RpZnlcIn0pLGwuc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5zZXRHcm91cEF0dHJpYnV0ZXMgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSksUG0oe2dyb3VwQXR0cmlidXRlczpvfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtsLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxZbShlKX0pKX19LHtrZXk6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS5rZXlMaXN0LHI9dm9pZCAwPT09bz9bXTpvLGE9dGhpcy5fY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixmdW5jTmFtZTpcImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wifSk7aWYoITAhPT1hKXJldHVybiBZbShhKTt2YXIgcz10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZ2V0KG4pLGk9cy5yZW1vdGVNYWluU2VxdWVuY2UsdT1zLmF2Q2hhdFJvb21LZXksYz1zLmF0dHJpYnV0ZXMsbD12KGMua2V5cygpKSxkPXZkLHA9XCJjbGVhclwiLGc9e2dyb3VwSUQ6bixhdkNoYXRSb29tS2V5OnUsbWFpblNlcXVlbmNlOml9O2lmKHIubGVuZ3RoPjApe3ZhciBoPVtdO2w9W10sZD1tZCxwPVwiZGVsZXRlXCIsci5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD0wO2MuaGFzKGUpJiYodD1jLmdldChlKS5zZXF1ZW5jZSxsLnB1c2goZSkpLGgucHVzaCh7a2V5OmUsc2VxdWVuY2U6dH0pfSkpLGcuZ3JvdXBBdHRyaWJ1dGVMaXN0PWh9dmFyIGY9bmV3IGxnKGNoKTtyZXR1cm4gZi5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiBtYWluU2VxdWVuY2U6XCIpLmNvbmNhdChpLFwiIGtleUxpc3Q6XCIpLmNvbmNhdChyLFwiIHByb3RvY29sTmFtZTpcIikuY29uY2F0KGQpKSx0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6ZCxyZXF1ZXN0RGF0YTpnfSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89ZS5kYXRhLm1haW5TZXF1ZW5jZTtyZXR1cm4gdC5fcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpuLHJlbW90ZU1haW5TZXF1ZW5jZTpvLGdyb3VwQXR0cmlidXRlTGlzdDpyLG9wZXJhdGlvblR5cGU6cH0pLGYuc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5kZWxldGVHcm91cEF0dHJpYnV0ZXMgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSksUG0oe2tleUxpc3Q6bH0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07Zi5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksWW0oZSl9KSl9fSx7a2V5OlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPXRoaXMuX2NoZWNrQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4sZnVuY05hbWU6XCJnZXRHcm91cEF0dHJpYnV0ZXNcIn0pO2lmKCEwIT09bylyZXR1cm4gWW0obyk7dmFyIHI9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldChuKSxhPXIuYXZDaGF0Um9vbUtleSxzPXIubGFzdFVwZGF0ZVRpbWUsaT1yLmxvY2FsTWFpblNlcXVlbmNlLHU9ci5yZW1vdGVNYWluU2VxdWVuY2UsYz1uZXcgbGcobGgpO2lmKGMuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgbG9jYWxNYWluU2VxdWVuY2U6XCIpLmNvbmNhdChpLFwiIHJlbW90ZU1haW5TZXF1ZW5jZTpcIikuY29uY2F0KHUsXCIga2V5TGlzdDpcIikuY29uY2F0KGUua2V5TGlzdCkpLERhdGUubm93KCktcz49dGhpcy5DQUNIRV9FWFBJUkVfVElNRXx8aTx1KXJldHVybiB0aGlzLl9nZXRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixhdkNoYXRSb29tS2V5OmF9KS50aGVuKChmdW5jdGlvbihvKXtjLnNldE1vcmVNZXNzYWdlKFwiZ2V0IGF0dHJpYnV0ZXMgZnJvbSByZW1vdGUuIGNvdW50OlwiLmNvbmNhdChvLmxlbmd0aCkpLnNldE5ldHdvcmtUeXBlKHQuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZ2V0R3JvdXBBdHRyaWJ1dGVzIGZyb20gcmVtb3RlLiBncm91cElEOlwiKS5jb25jYXQobikpO3ZhciByPXQuX2dldExvY2FsR3JvdXBBdHRyaWJ1dGVzKGUpO3JldHVybiBQbSh7Z3JvdXBBdHRyaWJ1dGVzOnJ9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLFltKGUpfSkpO2Muc2V0TW9yZU1lc3NhZ2UoXCJnZXQgYXR0cmlidXRlcyBmcm9tIGNhY2hlXCIpLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBBdHRyaWJ1dGVzIGZyb20gY2FjaGUuIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSk7dmFyIGw9dGhpcy5fZ2V0TG9jYWxHcm91cEF0dHJpYnV0ZXMoZSk7cmV0dXJuIGptKHtncm91cEF0dHJpYnV0ZXM6bH0pfX0se2tleTpcIl9nZXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6TWQscmVxdWVzdERhdGE6dCh7fSxlKX0pLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBvPXQuZGF0YSxyPW8ubWFpblNlcXVlbmNlLGE9by5ncm91cEF0dHJpYnV0ZUxpc3Qscz12KGEpO3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQobi5fY2xhc3NOYW1lLFwiLl9nZXRHcm91cEF0dHJpYnV0ZXMgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChlLmdyb3VwSUQpKSxuLl9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOmUuZ3JvdXBJRCxyZW1vdGVNYWluU2VxdWVuY2U6cixncm91cEF0dHJpYnV0ZUxpc3Q6cyxvcGVyYXRpb25UeXBlOlwiZ2V0XCJ9KSxhfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gWW0oZSl9KSl9fSx7a2V5OlwiX2dldExvY2FsR3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncm91cElELG49ZS5rZXlMaXN0LG89dm9pZCAwPT09bj9bXTpuLHI9e307aWYoIXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5oYXModCkpcmV0dXJuIHI7dmFyIGE9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldCh0KS5hdHRyaWJ1dGVzO2lmKG8ubGVuZ3RoPjApby5mb3JFYWNoKChmdW5jdGlvbihlKXthLmhhcyhlKSYmKHJbZV09YS5nZXQoZSkudmFsdWUpfSkpO2Vsc2V7dmFyIHMsaT1TKGEua2V5cygpKTt0cnl7Zm9yKGkucygpOyEocz1pLm4oKSkuZG9uZTspe3ZhciB1PXMudmFsdWU7clt1XT1hLmdldCh1KS52YWx1ZX19Y2F0Y2goYyl7aS5lKGMpfWZpbmFsbHl7aS5mKCl9fXJldHVybiByfX0se2tleTpcIl9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncm91cElELG49ZS5yZW1vdGVNYWluU2VxdWVuY2Usbz1lLmdyb3VwQXR0cmlidXRlTGlzdCxyPWUub3BlcmF0aW9uVHlwZTtpZih0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuaGFzKHQpKXt2YXIgYT10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZ2V0KHQpLHM9YS5sb2NhbE1haW5TZXF1ZW5jZTtpZihcImdldFwiPT09cnx8bi1zPT0xKWEucmVtb3RlTWFpblNlcXVlbmNlPW4sYS5sb2NhbE1haW5TZXF1ZW5jZT1uLGEubGFzdFVwZGF0ZVRpbWU9RGF0ZS5ub3coKSx0aGlzLl91cGRhdGVDYWNoZWRBdHRyaWJ1dGVzKHtncm91cEF0dHJpYnV0ZXM6YSxncm91cEF0dHJpYnV0ZUxpc3Q6byxvcGVyYXRpb25UeXBlOnJ9KTtlbHNle2lmKHM9PT1uKXJldHVybjthLnJlbW90ZU1haW5TZXF1ZW5jZT1ufXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5zZXQodCxhKTt2YXIgaT1cIm9wZXJhdGlvblR5cGU6XCIuY29uY2F0KHIsXCIgbG9jYWxNYWluU2VxdWVuY2U6XCIpLmNvbmNhdChzLFwiIHJlbW90ZU1haW5TZXF1ZW5jZTpcIikuY29uY2F0KG4pO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3JlZnJlc2hDYWNoZWRHcm91cEF0dHJpYnV0ZXMuIFwiKS5jb25jYXQoaSkpfX19LHtrZXk6XCJfdXBkYXRlQ2FjaGVkQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBBdHRyaWJ1dGVzLG49ZS5ncm91cEF0dHJpYnV0ZUxpc3Qsbz1lLm9wZXJhdGlvblR5cGU7XCJjbGVhclwiIT09bz9cImRlbGV0ZVwiIT09bz8oXCJpbml0XCI9PT1vJiZ0LmF0dHJpYnV0ZXMuY2xlYXIoKSxuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUua2V5LG89ZS52YWx1ZSxyPWUuc2VxdWVuY2U7dC5hdHRyaWJ1dGVzLnNldChuLHt2YWx1ZTpvLHNlcXVlbmNlOnJ9KX0pKSk6bi5mb3JFYWNoKChmdW5jdGlvbihlKXt0LmF0dHJpYnV0ZXMuZGVsZXRlKGUpfSkpOnQuYXR0cmlidXRlcy5jbGVhcigpfX0se2tleTpcIl9jaGVja0NhY2hlZEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBJRCxuPWUuZnVuY05hbWU7aWYodGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cCh0KSYmdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUodCkudHlwZSE9PXJvLkdSUF9BVkNIQVRST09NKXtyZXR1cm4gS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2NoZWNrQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzLiBcIikuY29uY2F0KFwi6Z2e55u05pKt576k5LiN6IO95L2/55So576k5bGe5oCnIEFQSVwiKSksbmV3IEttKHtjb2RlOlBkLkNBTk5PVF9VU0VfR1JQX0FUVFJfTk9UX0FWQ0hBVFJPT00sbWVzc2FnZTpcIumdnuebtOaSree+pOS4jeiDveS9v+eUqOe+pOWxnuaApyBBUElcIn0pfXZhciBvPXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5nZXQodCk7aWYoSmkobykpe3ZhciByPVwi5aaC5p6cIGdyb3VwSUQ6XCIuY29uY2F0KHQsXCIg5piv55u05pKt576k77yM5L2/55SoIFwiKS5jb25jYXQobixcIiDliY3lhYjkvb/nlKggam9pbkdyb3VwIOaOpeWPo+eUs+ivt+WKoOWFpee+pOe7hO+8jOivpue7huivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjam9pbkdyb3VwXCIpO3JldHVybiBLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXMuIFwiKS5jb25jYXQocikpLG5ldyBLbSh7Y29kZTpQZC5DQU5OT1RfVVNFX0dSUF9BVFRSX0FWQ0hBVFJPT01fVU5KT0lOLG1lc3NhZ2U6cn0pfXJldHVybiEwfX0se2tleTpcIl90cmFuc2Zvcm1Hcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1bXTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7dC5wdXNoKHtrZXk6bix2YWx1ZTplW25dfSl9KSksdH19LHtrZXk6XCJfZW1pdEdyb3VwQXR0cmlidXRlc1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRMb2NhbEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDplfSk7dGhpcy5fZ3JvdXBNb2R1bGUuZW1pdE91dGVyRXZlbnQob28uR1JPVVBfQVRUUklCVVRFU19VUERBVEVELHtncm91cElEOmUsZ3JvdXBBdHRyaWJ1dGVzOnR9KX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmNsZWFyKCksdGhpcy5DQUNIRV9FWFBJUkVfVElNRT0zZTR9fV0pLGV9KCksVXY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKTt2YXIgbj10Lmdyb3VwTW9kdWxlLHI9dC5ncm91cElELGE9dC5vbkluaXQscz10Lm9uU3VjY2VzcyxpPXQub25GYWlsO3RoaXMuX2dyb3VwTW9kdWxlPW4sdGhpcy5fY2xhc3NOYW1lPVwiUG9sbGluZ1wiLHRoaXMuX29uSW5pdD1hLHRoaXMuX29uU3VjY2Vzcz1zLHRoaXMuX29uRmFpbD1pLHRoaXMuX2dyb3VwSUQ9cix0aGlzLl90aW1lb3V0SUQ9LTEsdGhpcy5faXNSdW5uaW5nPSExLHRoaXMuX3BvbGxpbmdJbnRlcnZhbD0wLHRoaXMuTUFYX1BPTExJTkdfSU5URVJWQUw9MmUzfXJldHVybiBhKGUsW3trZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zdGFydFwiKSksdGhpcy5faXNSdW5uaW5nPSEwLHRoaXMuX3JlcXVlc3QoKX19LHtrZXk6XCJpc1J1bm5pbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1J1bm5pbmd9fSx7a2V5OlwiX3JlcXVlc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLl9vbkluaXQodGhpcy5fZ3JvdXBJRCksbj1kZDt0aGlzLl9ncm91cE1vZHVsZS5pc0xvZ2dlZEluKCl8fChuPXBkKSx0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6bixyZXF1ZXN0RGF0YTp0fSkudGhlbigoZnVuY3Rpb24odCl7ZS5fb25TdWNjZXNzKGUuX2dyb3VwSUQsdCksZS5pc1J1bm5pbmcoKSYmKGNsZWFyVGltZW91dChlLl90aW1lb3V0SUQpLGUuX3RpbWVvdXRJRD1zZXRUaW1lb3V0KGUuX3JlcXVlc3QuYmluZChlKSwwKSl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe2UuX29uRmFpbChlLl9ncm91cElELHQpLGUuaXNSdW5uaW5nKCkmJihjbGVhclRpbWVvdXQoZS5fdGltZW91dElEKSxlLl90aW1lb3V0SUQ9c2V0VGltZW91dChlLl9yZXF1ZXN0LmJpbmQoZSksZS5NQVhfUE9MTElOR19JTlRFUlZBTCkpfSkpfX0se2tleTpcInN0b3BcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RvcFwiKSksdGhpcy5fdGltZW91dElEPjAmJihjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dElEKSx0aGlzLl90aW1lb3V0SUQ9LTEsdGhpcy5fcG9sbGluZ0ludGVydmFsPTApLHRoaXMuX2lzUnVubmluZz0hMX19XSksZX0oKSxGdj17MzohMCw0OiEwLDU6ITAsNjohMH0scXY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl9ncm91cE1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIkFWQ2hhdFJvb21IYW5kbGVyXCIsdGhpcy5fam9pbmVkR3JvdXBNYXA9bmV3IE1hcCx0aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXA9bmV3IE1hcCx0aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXA9bmV3IE1hcCx0aGlzLnNlcXVlbmNlc0xpbmtlZExpc3Q9bmV3IER2KDEwMCksdGhpcy5tZXNzYWdlSURMaW5rZWRMaXN0PW5ldyBEdigxMDApLHRoaXMucmVjZWl2ZWRNZXNzYWdlQ291bnQ9MCx0aGlzLl9yZXBvcnRNZXNzYWdlU3RhY2tlZENvdW50PTAsdGhpcy5fb25saW5lTWVtYmVyQ291bnRNYXA9bmV3IE1hcCx0aGlzLkRFRkFVTFRfRVhQSVJFX1RJTUU9NjB9cmV0dXJuIGEoZSxbe2tleTpcImhhc0pvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9qb2luZWRHcm91cE1hcC5zaXplPjB9fSx7a2V5OlwiY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9qb2luZWRHcm91cE1hcC5oYXMoZSl9fSx7a2V5OlwiZ2V0Sm9pbmVkQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2pvaW5lZEdyb3VwTWFwLnNpemU+MD92KHRoaXMuX2pvaW5lZEdyb3VwTWFwLmtleXMoKSk6bnVsbH19LHtrZXk6XCJfdXBkYXRlUmVxdWVzdERhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdCh7fSx0aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXAuZ2V0KGUpKX19LHtrZXk6XCJfaGFuZGxlU3VjY2Vzc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dC5kYXRhLG89bi5rZXkscj1uLm5leHRTZXEsYT1uLnJzcE1zZ0xpc3Q7aWYoMCE9PW4uZXJyb3JDb2RlKXt2YXIgcz10aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXAuZ2V0KGUpLGk9bmV3IGxnKHloKSx1PXM/XCJcIi5jb25jYXQocy5rZXksXCItXCIpLmNvbmNhdChzLnN0YXJ0U2VxKTpcInJlcXVlc3RJbmZvIGlzIHVuZGVmaW5lZFwiO2kuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChlLFwiLVwiKS5jb25jYXQodSxcIi1cIikuY29uY2F0KHQuZXJyb3JJbmZvKSkuc2V0Q29kZSh0LmVycm9yQ29kZSkuc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCEwKX1lbHNle2lmKCF0aGlzLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSkpcmV0dXJuO1lpKG8pJiZqaShyKSYmdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLnNldChlLHtrZXk6byxzdGFydFNlcTpyfSksemkoYSkmJmEubGVuZ3RoPjAmJihhLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UudG89ZS5ncm91cElEfSkpLHRoaXMub25NZXNzYWdlKGEpKX19fSx7a2V5OlwiX2hhbmRsZUZhaWx1cmVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe319LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih6aShlKSYmMCE9PWUubGVuZ3RoKXt2YXIgdD1udWxsLG49W10sbz10aGlzLl9nZXRNb2R1bGUoSmMpLHI9ZS5sZW5ndGg7cj4xJiZlLnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc2VxdWVuY2UtdC5zZXF1ZW5jZX0pKTtmb3IodmFyIGE9dGhpcy5fZ2V0TW9kdWxlKFhjKSxzPTA7czxyO3MrKylpZihGdltlW3NdLmV2ZW50XSl7dGhpcy5yZWNlaXZlZE1lc3NhZ2VDb3VudCs9MSx0PXRoaXMucGFja01lc3NhZ2UoZVtzXSxlW3NdLmV2ZW50KTt2YXIgaT0xPT09ZVtzXS5pc01vZGlmaWVkO2lmKChhLmlzVW5saW1pdGVkQVZDaGF0Um9vbSgpfHwhdGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0Lmhhcyh0LnNlcXVlbmNlKSkmJiF0aGlzLm1lc3NhZ2VJRExpbmtlZExpc3QuaGFzKHQuSUQpKXt2YXIgdT10LmNvbnZlcnNhdGlvbklEO2lmKHRoaXMucmVjZWl2ZWRNZXNzYWdlQ291bnQlNDA9PTAmJnRoaXMuX2dldE1vZHVsZShpbCkuZGV0ZWN0TWVzc2FnZUxvc3ModSx0aGlzLnNlcXVlbmNlc0xpbmtlZExpc3QuZGF0YSgpKSxudWxsIT09dGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0LnRhaWwoKSl7dmFyIGM9dGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0LnRhaWwoKS52YWx1ZSxsPXQuc2VxdWVuY2UtYztsPjEmJmw8PTIwP3RoaXMuX2dldE1vZHVsZShpbCkub25NZXNzYWdlTWF5YmVMb3N0KHUsYysxLGwtMSk6bDwtMSYmbD49LTIwJiZ0aGlzLl9nZXRNb2R1bGUoaWwpLm9uTWVzc2FnZU1heWJlTG9zdCh1LHQuc2VxdWVuY2UrMSxNYXRoLmFicyhsKS0xKX10aGlzLnNlcXVlbmNlc0xpbmtlZExpc3Quc2V0KHQuc2VxdWVuY2UpLHRoaXMubWVzc2FnZUlETGlua2VkTGlzdC5zZXQodC5JRCk7dmFyIGQ9ITE7aWYodGhpcy5faXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlKHQpP2kmJihkPSEwLHQuaXNNb2RpZmllZD1pLG8udXBkYXRlTWVzc2FnZUlzTW9kaWZpZWRQcm9wZXJ0eSh0KSk6ZD0hMCxkKXtpZih0LmNvbnZlcnNhdGlvblR5cGUscm8uQ09OVl9TWVNURU0sdC5jb252ZXJzYXRpb25UeXBlIT09cm8uQ09OVl9TWVNURU0pe3ZhciBwPXRoaXMuX2dldE1vZHVsZShsbCksZz10LmNvbnZlcnNhdGlvbklELnJlcGxhY2Uocm8uQ09OVl9HUk9VUCxcIlwiKTt0aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAuaGFzKGcpP3AuYWRkTWVzc2FnZVNlcXVlbmNlKHtrZXk6c2csbWVzc2FnZTp0fSk6KHQudHlwZSE9PXJvLk1TR19HUlBfVElQJiZwLmFkZE1lc3NhZ2VEZWxheSh7Y3VycmVudFRpbWU6RGF0ZS5ub3coKSx0aW1lOnQudGltZX0pLHAuYWRkTWVzc2FnZVNlcXVlbmNlKHtrZXk6YWcsbWVzc2FnZTp0fSkpfW4ucHVzaCh0KX19fWVsc2UgS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NZXNzYWdlIOacquWkhOeQhueahCBldmVudCDnsbvlnos6IFwiKS5jb25jYXQoZVtzXS5ldmVudCkpO2lmKDAhPT1uLmxlbmd0aCl7dGhpcy5fZ3JvdXBNb2R1bGUuZmlsdGVyTW9kaWZpZWRNZXNzYWdlKG4pO3ZhciBoPXRoaXMucGFja0NvbnZlcnNhdGlvbk9wdGlvbihuKTtpZihoLmxlbmd0aD4wKXRoaXMuX2dldE1vZHVsZShKYykub25OZXdNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpoLGlzSW5zdGFudE1lc3NhZ2U6ITB9KTtLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NZXNzYWdlIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKSx0aGlzLl9jaGVja01lc3NhZ2VTdGFja2VkKG4pO3ZhciBmPXRoaXMuX2dyb3VwTW9kdWxlLmZpbHRlclVubW9kaWZpZWRNZXNzYWdlKG4pO2YubGVuZ3RoPjAmJnRoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KG9vLk1FU1NBR0VfUkVDRUlWRUQsZiksbi5sZW5ndGg9MH19fX0se2tleTpcIl9jaGVja01lc3NhZ2VTdGFja2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7dD49MTAwJiYoS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2NoZWNrTWVzc2FnZVN0YWNrZWQg55u05pKt576k5raI5oGv5aCG56ev5pWwOlwiKS5jb25jYXQoZS5sZW5ndGgsJ++8geWPr+iDveS8muWvvOiHtOW+ruS/oeWwj+eoi+W6j+a4suafk+aXtumBh+WIsCBcIkRvbSBsaW1pdCBleGNlZWRlZFwiIOeahOmUmeivr++8jOW7uuiuruaOpeWFpeS+p+atpOaXtuWPqua4suafk+acgOi/keeahDEw5p2h5raI5oGvJykpLHRoaXMuX3JlcG9ydE1lc3NhZ2VTdGFja2VkQ291bnQ8NSYmKG5ldyBsZyhUaCkuc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImNvdW50OlwiLmNvbmNhdCh0LFwiIGdyb3VwSUQ6XCIpLmNvbmNhdCh2KHRoaXMuX2pvaW5lZEdyb3VwTWFwLmtleXMoKSkpKS5zZXRMZXZlbChcIndhcm5pbmdcIikuZW5kKCksdGhpcy5fcmVwb3J0TWVzc2FnZVN0YWNrZWRDb3VudCs9MSkpfX0se2tleTpcIl9pc01lc3NhZ2VTZW50QnlDdXJyZW50SW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMuX2dldE1vZHVsZShKYykuaXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlKGUpfX0se2tleTpcInBhY2tNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLmN1cnJlbnRVc2VyPXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCksZS5jb252ZXJzYXRpb25UeXBlPTU9PT10P3JvLkNPTlZfU1lTVEVNOnJvLkNPTlZfR1JPVVAsZS5pc1N5c3RlbU1lc3NhZ2U9ISFlLmlzU3lzdGVtTWVzc2FnZTt2YXIgbj1uZXcgR20oZSksbz10aGlzLnBhY2tFbGVtZW50cyhlLHQpO3JldHVybiBuLnNldEVsZW1lbnQobyksbn19LHtrZXk6XCJwYWNrRWxlbWVudHNcIix2YWx1ZTpmdW5jdGlvbihlLG4pe3JldHVybiA0PT09bnx8Nj09PW4/KHRoaXMuX3VwZGF0ZU1lbWJlckNvdW50QnlHcm91cFRpcHMoZSksdGhpcy5fb25Hcm91cEF0dHJpYnV0ZXNVcGRhdGVkKGUpLHt0eXBlOnJvLk1TR19HUlBfVElQLGNvbnRlbnQ6dCh0KHt9LGUuZWxlbWVudHMpLHt9LHtncm91cFByb2ZpbGU6ZS5ncm91cFByb2ZpbGV9KX0pOjU9PT1uP3t0eXBlOnJvLk1TR19HUlBfU1lTX05PVElDRSxjb250ZW50OnQodCh7fSxlLmVsZW1lbnRzKSx7fSx7Z3JvdXBQcm9maWxlOmUuZ3JvdXBQcm9maWxlfSl9OnRoaXMuX2dldE1vZHVsZSh0bCkucGFyc2VFbGVtZW50cyhlLmVsZW1lbnRzLGUuZnJvbSl9fSx7a2V5OlwicGFja0NvbnZlcnNhdGlvbk9wdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgTWFwLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89ZVtuXSxyPW8uY29udmVyc2F0aW9uSUQ7aWYodC5oYXMocikpe3ZhciBhPXQuZ2V0KHIpO2EubGFzdE1lc3NhZ2U9byxcImluXCI9PT1vLmZsb3cmJmEudW5yZWFkQ291bnQrK31lbHNlIHQuc2V0KHIse2NvbnZlcnNhdGlvbklEOm8uY29udmVyc2F0aW9uSUQsdW5yZWFkQ291bnQ6XCJvdXRcIj09PW8uZmxvdz8wOjEsdHlwZTpvLmNvbnZlcnNhdGlvblR5cGUsc3ViVHlwZTpvLmNvbnZlcnNhdGlvblN1YlR5cGUsbGFzdE1lc3NhZ2U6b30pfXJldHVybiB2KHQudmFsdWVzKCkpfX0se2tleTpcIl91cGRhdGVNZW1iZXJDb3VudEJ5R3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncm91cFByb2ZpbGUuZ3JvdXBJRCxuPWUuZWxlbWVudHMub25saW5lTWVtYmVySW5mbyxvPXZvaWQgMD09PW4/dm9pZCAwOm47aWYoIU91KG8pKXt2YXIgcj1vLm9ubGluZU1lbWJlck51bSxhPXZvaWQgMD09PXI/MDpyLHM9by5leHBpcmVUaW1lLGk9dm9pZCAwPT09cz90aGlzLkRFRkFVTFRfRVhQSVJFX1RJTUU6cyx1PXRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLmdldCh0KXx8e30sYz1EYXRlLm5vdygpO091KHUpP09iamVjdC5hc3NpZ24odSx7bGFzdFJlcVRpbWU6MCxsYXN0U3luY1RpbWU6MCxsYXRlc3RVcGRhdGVUaW1lOmMsbWVtYmVyQ291bnQ6YSxleHBpcmVUaW1lOml9KToodS5sYXRlc3RVcGRhdGVUaW1lPWMsdS5tZW1iZXJDb3VudD1hKSxLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3VwZGF0ZU1lbWJlckNvdW50QnlHcm91cFRpcHMgaW5mbzpcIiksdSksdGhpcy5fb25saW5lTWVtYmVyQ291bnRNYXAuc2V0KHQsdSl9fX0se2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmhhcyhlKSl7dmFyIHQ9dGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmdldChlKTt0LmlzUnVubmluZygpfHx0LnN0YXJ0KCl9ZWxzZXt2YXIgbj1uZXcgVXYoe2dyb3VwTW9kdWxlOnRoaXMuX2dyb3VwTW9kdWxlLGdyb3VwSUQ6ZSxvbkluaXQ6dGhpcy5fdXBkYXRlUmVxdWVzdERhdGEuYmluZCh0aGlzKSxvblN1Y2Nlc3M6dGhpcy5faGFuZGxlU3VjY2Vzcy5iaW5kKHRoaXMpLG9uRmFpbDp0aGlzLl9oYW5kbGVGYWlsdXJlLmJpbmQodGhpcyl9KTtuLnN0YXJ0KCksdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLnNldChlLG4pLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RhcnQgZ3JvdXBJRDpcIikuY29uY2F0KGUpKX19fSx7a2V5OlwiaGFuZGxlSm9pblJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX3ByZUNoZWNrKCkudGhlbigoZnVuY3Rpb24oKXt2YXIgbj1lLmxvbmdQb2xsaW5nS2V5LG89ZS5ncm91cCxyPW8uZ3JvdXBJRDtyZXR1cm4gdC5fam9pbmVkR3JvdXBNYXAuc2V0KHIsbyksdC5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAoW29dKSx0Ll9ncm91cE1vZHVsZS5kZWxldGVVbmpvaW5lZEFWQ2hhdFJvb20ociksdC5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhMSksSmkobik/am0oe3N0YXR1czpobSxncm91cDpvfSk6UHJvbWlzZS5yZXNvbHZlKCl9KSl9fSx7a2V5Olwic3RhcnRSdW5Mb29wXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5oYW5kbGVKb2luUmVzdWx0KGUpLnRoZW4oKGZ1bmN0aW9uKCl7dmFyIG49ZS5sb25nUG9sbGluZ0tleSxvPWUuZ3JvdXAscj1vLmdyb3VwSUQ7cmV0dXJuIHQuX3BvbGxpbmdSZXF1ZXN0SW5mb01hcC5zZXQocix7a2V5Om4sc3RhcnRTZXE6MH0pLHQuc3RhcnQociksdC5fZ3JvdXBNb2R1bGUuaXNMb2dnZWRJbigpP2ptKHtzdGF0dXM6aG0sZ3JvdXA6b30pOmptKHtzdGF0dXM6aG19KX0pKX19LHtrZXk6XCJfcHJlQ2hlY2tcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuX2dldE1vZHVsZShYYykuaXNVbmxpbWl0ZWRBVkNoYXRSb29tKCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2lmKCF0aGlzLmhhc0pvaW5lZEFWQ2hhdFJvb20oKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dmFyIGU9bSh0aGlzLl9qb2luZWRHcm91cE1hcC5lbnRyaWVzKCkubmV4dCgpLnZhbHVlLDIpLHQ9ZVswXSxuPWVbMV07aWYodGhpcy5fZ3JvdXBNb2R1bGUuaXNMb2dnZWRJbigpKXtpZighKG4uc2VsZkluZm8ucm9sZT09PXJvLkdSUF9NQlJfUk9MRV9PV05FUnx8bi5vd25lcklEPT09dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSkpcmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLnF1aXRHcm91cCh0KTt0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKHQpfWVsc2UgdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbih0KTtyZXR1cm4gdGhpcy5yZXNldCh0KSxQcm9taXNlLnJlc29sdmUoKX19LHtrZXk6XCJqb2luV2l0aG91dEF1dGhcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmpvaW5XaXRob3V0QXV0aFwiKSxyPW5ldyBsZyhzaCk7cmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTplZCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIGE9ZS5kYXRhLmxvbmdQb2xsaW5nS2V5O2lmKHIuc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgbG9uZ1BvbGxpbmdLZXk6XCIpLmNvbmNhdChhKSkuZW5kKCEwKSxKaShhKSlyZXR1cm4gWW0obmV3IEttKHtjb2RlOlBkLkNBTk5PVF9KT0lOX05PTl9BVkNIQVRST09NX1dJVEhPVVRfTE9HSU4sbWVzc2FnZTpBcH0pKTtLaS5sb2coXCJcIi5jb25jYXQobyxcIiBvay4gZ3JvdXBJRDpcIikuY29uY2F0KG4pKSx0Ll9nZXRNb2R1bGUoSmMpLnNldENvbXBsZXRlZChcIlwiLmNvbmNhdChyby5DT05WX0dST1VQKS5jb25jYXQobikpO3ZhciBzPW5ldyBFdih7Z3JvdXBJRDpufSk7cmV0dXJuIHQuc3RhcnRSdW5Mb29wKHtncm91cDpzLGxvbmdQb2xsaW5nS2V5OmF9KSxQbSh7c3RhdHVzOmhtfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBLaS5lcnJvcihcIlwiLmNvbmNhdChvLFwiIGZhaWxlZC4gZ3JvdXBJRDpcIikuY29uY2F0KG4sXCIgZXJyb3I6XCIpLGUpLHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBvPW0odCwyKSxhPW9bMF0scz1vWzFdO3Iuc2V0RXJyb3IoZSxhLHMpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuKSkuZW5kKCEwKX0pKSxZbShlKX0pKS5maW5hbGx5KChmdW5jdGlvbigpe3QuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShaYykucmVwb3J0QXRPbmNlKCl9KSl9fSx7a2V5OlwiZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLmdldChlKXx8e30sbj1EYXRlLm5vdygpO3JldHVybiBPdSh0KXx8bi10Lmxhc3RTeW5jVGltZT4xZTMqdC5leHBpcmVUaW1lJiZuLXQubGF0ZXN0VXBkYXRlVGltZT4xZTQmJm4tdC5sYXN0UmVxVGltZT4zZTM/KHQubGFzdFJlcVRpbWU9bix0aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5zZXQoZSx0KSx0aGlzLl9nZXRHcm91cE9ubGluZU1lbWJlckNvdW50KGUpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBQbSh7bWVtYmVyQ291bnQ6ZS5tZW1iZXJDb3VudH0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gWW0oZSl9KSkpOmptKHttZW1iZXJDb3VudDp0Lm1lbWJlckNvdW50fSl9fSx7a2V5OlwiX2dldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9nZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIpO3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Z2QscmVxdWVzdERhdGE6e2dyb3VwSUQ6ZX19KS50aGVuKChmdW5jdGlvbihvKXt2YXIgcj10Ll9vbmxpbmVNZW1iZXJDb3VudE1hcC5nZXQoZSl8fHt9LGE9by5kYXRhLHM9YS5vbmxpbmVNZW1iZXJOdW0saT12b2lkIDA9PT1zPzA6cyx1PWEuZXhwaXJlVGltZSxjPXZvaWQgMD09PXU/dC5ERUZBVUxUX0VYUElSRV9USU1FOnU7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChlLFwiIG1lbWJlckNvdW50OlwiKS5jb25jYXQoaSxcIiBleHBpcmVUaW1lOlwiKS5jb25jYXQoYykpO3ZhciBsPURhdGUubm93KCk7cmV0dXJuIE91KHIpJiYoci5sYXN0UmVxVGltZT1sKSx0Ll9vbmxpbmVNZW1iZXJDb3VudE1hcC5zZXQoZSxPYmplY3QuYXNzaWduKHIse2xhc3RTeW5jVGltZTpsLGxhdGVzdFVwZGF0ZVRpbWU6bCxtZW1iZXJDb3VudDppLGV4cGlyZVRpbWU6Y30pKSx7bWVtYmVyQ291bnQ6aX19KSkuY2F0Y2goKGZ1bmN0aW9uKG8pe3JldHVybiBLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksbyksbmV3IGxnKE1oKS5zZXRDb2RlKG8uY29kZSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUsXCIgZXJyb3I6XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShvKSkpLnNldE5ldHdvcmtUeXBlKHQuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFByb21pc2UucmVqZWN0KG8pfSkpfX0se2tleTpcIl9vbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdyb3VwUHJvZmlsZS5ncm91cElELG49ZS5lbGVtZW50cyxvPW4ub3BlcmF0aW9uVHlwZSxyPW4ubmV3R3JvdXBQcm9maWxlO2lmKDY9PT1vKXt2YXIgYT0odm9pZCAwPT09cj92b2lkIDA6cikuZ3JvdXBBdHRyaWJ1dGVPcHRpb247SmkoYSl8fHRoaXMuX2dyb3VwTW9kdWxlLm9uR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZCh7Z3JvdXBJRDp0LGdyb3VwQXR0cmlidXRlT3B0aW9uOmF9KX19fSx7a2V5OlwiX2dldE1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoZSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihlKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0IGdyb3VwSUQ6XCIpLmNvbmNhdChlKSk7dmFyIHQ9dGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmdldChlKTt0JiZ0LnN0b3AoKSx0aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAuZGVsZXRlKGUpLHRoaXMuX2pvaW5lZEdyb3VwTWFwLmRlbGV0ZShlKSx0aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXAuZGVsZXRlKGUpLHRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLmRlbGV0ZShlKX1lbHNle0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXQgYWxsXCIpKTt2YXIgbixvPVModGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLnZhbHVlcygpKTt0cnl7Zm9yKG8ucygpOyEobj1vLm4oKSkuZG9uZTspe24udmFsdWUuc3RvcCgpfX1jYXRjaChyKXtvLmUocil9ZmluYWxseXtvLmYoKX10aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAuY2xlYXIoKSx0aGlzLl9qb2luZWRHcm91cE1hcC5jbGVhcigpLHRoaXMuX3BvbGxpbmdSZXF1ZXN0SW5mb01hcC5jbGVhcigpLHRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLmNsZWFyKCl9dGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0LnJlc2V0KCksdGhpcy5tZXNzYWdlSURMaW5rZWRMaXN0LnJlc2V0KCksdGhpcy5yZWNlaXZlZE1lc3NhZ2VDb3VudD0wLHRoaXMuX3JlcG9ydE1lc3NhZ2VTdGFja2VkQ291bnQ9MH19XSksZX0oKSx4dj0xLFZ2PTE1LEt2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fZ3JvdXBNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJHcm91cFN5c3RlbU5vdGljZUhhbmRsZXJcIix0aGlzLnBlbmRlbmN5TWFwPW5ldyBNYXB9cmV0dXJuIGEoZSxbe2tleTpcIm9uTmV3R3JvdXBTeXN0ZW1Ob3RpY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGFMaXN0LG49ZS5pc1N5bmNpbmdFbmRlZCxvPWUuaXNJbnN0YW50TWVzc2FnZTtLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25SZWNlaXZlU3lzdGVtTm90aWNlIGNvdW50OlwiKS5jb25jYXQodC5sZW5ndGgpKTt2YXIgcj10aGlzLm5ld1N5c3RlbU5vdGljZVN0b3JlZEFuZFN1bW1hcnkoe25vdGlmaWVzTGlzdDp0LGlzSW5zdGFudE1lc3NhZ2U6b30pLGE9ci5ldmVudERhdGFMaXN0LHM9ci5yZXN1bHQ7YS5sZW5ndGg+MCYmKHRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShKYykub25OZXdNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDphLGlzSW5zdGFudE1lc3NhZ2U6b30pLHRoaXMuX29uUmVjZWl2ZWRHcm91cFN5c3RlbU5vdGljZSh7cmVzdWx0OnMsaXNJbnN0YW50TWVzc2FnZTpvfSkpO28/cy5sZW5ndGg+MCYmdGhpcy5fZ3JvdXBNb2R1bGUuZW1pdE91dGVyRXZlbnQob28uTUVTU0FHRV9SRUNFSVZFRCxzKTohMD09PW4mJnRoaXMuX2NsZWFyR3JvdXBTeXN0ZW1Ob3RpY2UoKX19LHtrZXk6XCJuZXdTeXN0ZW1Ob3RpY2VTdG9yZWRBbmRTdW1tYXJ5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49ZS5ub3RpZmllc0xpc3Qsbz1lLmlzSW5zdGFudE1lc3NhZ2Uscj1udWxsLGE9bi5sZW5ndGgscz0wLGk9W10sdT17Y29udmVyc2F0aW9uSUQ6cm8uQ09OVl9TWVNURU0sdW5yZWFkQ291bnQ6MCx0eXBlOnJvLkNPTlZfU1lTVEVNLHN1YlR5cGU6bnVsbCxsYXN0TWVzc2FnZTpudWxsfTtmb3Iocz0wO3M8YTtzKyspe3ZhciBjPW5bc107aWYoYy5lbGVtZW50cy5vcGVyYXRpb25UeXBlIT09VnYpYy5jdXJyZW50VXNlcj10aGlzLl9ncm91cE1vZHVsZS5nZXRNeVVzZXJJRCgpLGMuY29udmVyc2F0aW9uVHlwZT1yby5DT05WX1NZU1RFTSxjLmNvbnZlcnNhdGlvbklEPXJvLkNPTlZfU1lTVEVNLChyPW5ldyBHbShjKSkuc2V0RWxlbWVudCh7dHlwZTpyby5NU0dfR1JQX1NZU19OT1RJQ0UsY29udGVudDp0KHQoe30sYy5lbGVtZW50cykse30se2dyb3VwUHJvZmlsZTpjLmdyb3VwUHJvZmlsZX0pfSksci5pc1N5c3RlbU1lc3NhZ2U9ITAsKDE9PT1yLnNlcXVlbmNlJiYxPT09ci5yYW5kb218fDI9PT1yLnNlcXVlbmNlJiYyPT09ci5yYW5kb20pJiYoci5zZXF1ZW5jZT1pdSgpLHIucmFuZG9tPWl1KCksci5nZW5lcmF0ZU1lc3NhZ2VJRChjLmN1cnJlbnRVc2VyKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm5ld1N5c3RlbU5vdGljZVN0b3JlZEFuZFN1bW1hcnkgc2VxdWVuY2UgYW5kIHJhbmRvbSBtYXliZSBkdXBsaWNhdGVkLCByZWdlbmVyYXRlLiBJRDpcIikuY29uY2F0KHIuSUQpKSksdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKEpjKS5wdXNoSW50b05vdGljZVJlc3VsdChpLHIpJiYobz91LnVucmVhZENvdW50Kys6ci5zZXRJc1JlYWQoITApLHUuc3ViVHlwZT1yLmNvbnZlcnNhdGlvblN1YlR5cGUpfXJldHVybiB1Lmxhc3RNZXNzYWdlPWlbaS5sZW5ndGgtMV0se2V2ZW50RGF0YUxpc3Q6aS5sZW5ndGg+MD9bdV06W10scmVzdWx0Oml9fX0se2tleTpcIl9jbGVhckdyb3VwU3lzdGVtTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZ2V0UGVuZGVuY3lMaXN0KCkudGhlbigoZnVuY3Rpb24odCl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnBlbmRlbmN5TWFwLnNldChcIlwiLmNvbmNhdCh0LmZyb20sXCJfXCIpLmNvbmNhdCh0Lmdyb3VwSUQsXCJfXCIpLmNvbmNhdCh0LnRvKSx0KX0pKTt2YXIgbj1lLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoSmMpLmdldExvY2FsTWVzc2FnZUxpc3Qocm8uQ09OVl9TWVNURU0pLG89W107bi5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgbj10LnBheWxvYWQscj1uLm9wZXJhdG9ySUQsYT1uLm9wZXJhdGlvblR5cGUscz1uLmdyb3VwUHJvZmlsZTtpZihhPT09eHYpe3ZhciBpPVwiXCIuY29uY2F0KHIsXCJfXCIpLmNvbmNhdChzLmdyb3VwSUQsXCJfXCIpLmNvbmNhdChzLnRvKSx1PWUucGVuZGVuY3lNYXAuZ2V0KGkpO3UmJmppKHUuaGFuZGxlZCkmJjAhPT11LmhhbmRsZWQmJm8ucHVzaCh0KX19KSksZS5kZWxldGVHcm91cFN5c3RlbU5vdGljZSh7bWVzc2FnZUxpc3Q6b30pfSkpfX0se2tleTpcImRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVHcm91cFN5c3RlbU5vdGljZVwiKTtyZXR1cm4gemkoZS5tZXNzYWdlTGlzdCkmJjAhPT1lLm1lc3NhZ2VMaXN0Lmxlbmd0aD8oS2kubG9nKFwiXCIuY29uY2F0KG4pK2UubWVzc2FnZUxpc3QubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5JRH0pKSksdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmxkLHJlcXVlc3REYXRhOnttZXNzYWdlTGlzdFRvRGVsZXRlOmUubWVzc2FnZUxpc3QubWFwKChmdW5jdGlvbihlKXtyZXR1cm57ZnJvbTpyby5DT05WX1NZU1RFTSxtZXNzYWdlU2VxOmUuY2xpZW50U2VxdWVuY2UsbWVzc2FnZVJhbmRvbTplLnJhbmRvbX19KSl9fSkudGhlbigoZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSk7dmFyIG89dC5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKEpjKTtyZXR1cm4gZS5tZXNzYWdlTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtvLmRlbGV0ZUxvY2FsTWVzc2FnZShlKX0pKSxQbSgpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBlcnJvcjpcIiksZSksWW0oZSl9KSkpOmptKCl9fSx7a2V5OlwiZ2V0UGVuZGVuY3lMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmNkLHJlcXVlc3REYXRhOntzdGFydFRpbWU6ZSYmZS5zdGFydFRpbWU/ZS5zdGFydFRpbWU6MCxsaW1pdDplJiZlLmxpbWl0P2UubGltaXQ6MTAsaGFuZGxlQWNjb3VudDp0aGlzLl9ncm91cE1vZHVsZS5nZXRNeVVzZXJJRCgpfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YS5wZW5kZW5jeUxpc3Q7cmV0dXJuIDAhPT1lLmRhdGEubmV4dFN0YXJ0VGltZT90LmdldFBlbmRlbmN5TGlzdCh7c3RhcnRUaW1lOmUuZGF0YS5uZXh0U3RhcnRUaW1lfSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuW10uY29uY2F0KHYobiksdihlKSl9KSk6bn0pKX19LHtrZXk6XCJfb25SZWNlaXZlZEdyb3VwU3lzdGVtTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUucmVzdWx0O2UuaXNJbnN0YW50TWVzc2FnZSYmbi5mb3JFYWNoKChmdW5jdGlvbihlKXtzd2l0Y2goZS5wYXlsb2FkLm9wZXJhdGlvblR5cGUpe2Nhc2UgMTpicmVhaztjYXNlIDI6dC5fb25BcHBseUdyb3VwUmVxdWVzdEFncmVlZChlKTticmVhaztjYXNlIDM6YnJlYWs7Y2FzZSA0OnQuX29uTWVtYmVyS2lja2VkKGUpO2JyZWFrO2Nhc2UgNTp0Ll9vbkdyb3VwRGlzbWlzc2VkKGUpO2JyZWFrO2Nhc2UgNjpicmVhaztjYXNlIDc6dC5fb25JbnZpdGVHcm91cChlKTticmVhaztjYXNlIDg6dC5fb25RdWl0R3JvdXAoZSk7YnJlYWs7Y2FzZSA5OnQuX29uU2V0TWFuYWdlcihlKTticmVhaztjYXNlIDEwOnQuX29uRGVsZXRlTWFuYWdlcihlKX19KSl9fSx7a2V5OlwiX29uQXBwbHlHcm91cFJlcXVlc3RBZ3JlZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElEO3RoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAobil8fHRoaXMuX2dyb3VwTW9kdWxlLmdldEdyb3VwUHJvZmlsZSh7Z3JvdXBJRDpufSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhLmdyb3VwO24mJih0Ll9ncm91cE1vZHVsZS51cGRhdGVHcm91cE1hcChbbl0pLHQuX2dyb3VwTW9kdWxlLmVtaXRHcm91cExpc3RVcGRhdGUoKSl9KSl9fSx7a2V5OlwiX29uTWVtYmVyS2lja2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElEO3RoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAodCkmJnRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24odCl9fSx7a2V5OlwiX29uR3JvdXBEaXNtaXNzZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQ7dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cCh0KSYmdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbih0KTt2YXIgbj10aGlzLl9ncm91cE1vZHVsZS5fQVZDaGF0Um9vbUhhbmRsZXI7biYmbi5jaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEKHQpJiZuLnJlc2V0KHQpfX0se2tleTpcIl9vbkludml0ZUdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pfHx0aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6bn0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YS5ncm91cDtuJiYodC5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAoW25dKSx0Ll9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCkpfSkpfX0se2tleTpcIl9vblF1aXRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKHQpJiZ0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKHQpfX0se2tleTpcIl9vblNldE1hbmFnZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLG49dC50byxvPXQuZ3JvdXBJRCxyPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZSh6YykuZ2V0TG9jYWxHcm91cE1lbWJlckluZm8obyxuKTtyJiZyLnVwZGF0ZVJvbGUocm8uR1JQX01CUl9ST0xFX0FETUlOKX19LHtrZXk6XCJfb25EZWxldGVNYW5hZ2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZSxuPXQudG8sbz10Lmdyb3VwSUQscj10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoemMpLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKG8sbik7ciYmci51cGRhdGVSb2xlKHJvLkdSUF9NQlJfUk9MRV9NRU1CRVIpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnBlbmRlbmN5TWFwLmNsZWFyKCl9fV0pLGV9KCksQnY9ZnVuY3Rpb24oZSl7aShyLGUpO3ZhciBuPV8ocik7ZnVuY3Rpb24gcihlKXt2YXIgdDtyZXR1cm4gbyh0aGlzLHIpLCh0PW4uY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiR3JvdXBNb2R1bGVcIix0Ll9jb21tb25Hcm91cEhhbmRsZXI9bnVsbCx0Ll9BVkNoYXRSb29tSGFuZGxlcj1udWxsLHQuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlcj1udWxsLHQuX2NvbW1vbkdyb3VwSGFuZGxlcj1uZXcgd3YoaCh0KSksdC5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlcj1uZXcgUHYoaCh0KSksdC5fQVZDaGF0Um9vbUhhbmRsZXI9bmV3IHF2KGgodCkpLHQuX2dyb3VwVGlwc0hhbmRsZXI9bmV3IEx2KGgodCkpLHQuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlcj1uZXcgS3YoaCh0KSksdC5ncm91cE1hcD1uZXcgTWFwLHQuX3Vuam9pbmVkQVZDaGF0Um9vbUxpc3Q9bmV3IE1hcCx0fXJldHVybiBhKHIsW3trZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmlzTG9nZ2VkSW4oKSYmKHRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5vbkNoZWNrVGltZXIoZSksdGhpcy5fZ3JvdXBUaXBzSGFuZGxlci5vbkNoZWNrVGltZXIoZSkpfX0se2tleTpcImd1YXJkRm9yQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoZS5jb252ZXJzYXRpb25UeXBlPT09cm8uQ09OVl9HUk9VUCl7dmFyIG49ZS50bztyZXR1cm4gdGhpcy5oYXNMb2NhbEdyb3VwKG4pP2ptKCk6dGhpcy5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6bn0pLnRoZW4oKGZ1bmN0aW9uKG8pe3ZhciByPW8uZGF0YS5ncm91cC50eXBlO2lmKEtpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZ3VhcmRGb3JBVkNoYXRSb29tLiBncm91cElEOlwiKS5jb25jYXQobixcIiB0eXBlOlwiKS5jb25jYXQocikpLHI9PT1yby5HUlBfQVZDSEFUUk9PTSl7dmFyIGE9XCJ1c2VySWQ6XCIuY29uY2F0KGUuZnJvbSxcIiDmnKrliqDlhaXnvqQgZ3JvdXBJRDpcIikuY29uY2F0KG4sXCLjgILlj5Hmtojmga/liY3lhYjkvb/nlKggam9pbkdyb3VwIOaOpeWPo+eUs+ivt+WKoOe+pO+8jOivpue7huivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjam9pbkdyb3VwXCIpO3JldHVybiBLaS53YXJuKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5ndWFyZEZvckFWQ2hhdFJvb20gc2VuZE1lc3NhZ2Ugbm90IGFsbG93ZWQuIFwiKS5jb25jYXQoYSkpLFltKG5ldyBLbSh7Y29kZTpQZC5NRVNTQUdFX1NFTkRfRkFJTCxtZXNzYWdlOmEsZGF0YTp7bWVzc2FnZTplfX0pKX1yZXR1cm4gam0oKX0pKX1yZXR1cm4gam0oKX19LHtrZXk6XCJjaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLl9BVkNoYXRSb29tSGFuZGxlciYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKX19LHtrZXk6XCJvbk5ld0dyb3VwTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2NvbW1vbkdyb3VwSGFuZGxlciYmdGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyLm9uTmV3R3JvdXBNZXNzYWdlKGUpfX0se2tleTpcInVwZGF0ZU5leHRNZXNzYWdlU2VxXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt6aShlKSYmZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLmNvbnZlcnNhdGlvbklELnJlcGxhY2Uocm8uQ09OVl9HUk9VUCxcIlwiKTt0Lmdyb3VwTWFwLmhhcyhuKSYmKHQuZ3JvdXBNYXAuZ2V0KG4pLm5leHRNZXNzYWdlU2VxPWUubGFzdE1lc3NhZ2Uuc2VxdWVuY2UrMSl9KSl9fSx7a2V5Olwib25OZXdHcm91cFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9ncm91cFRpcHNIYW5kbGVyJiZ0aGlzLl9ncm91cFRpcHNIYW5kbGVyLm9uTmV3R3JvdXBUaXBzKGUpfX0se2tleTpcIm9uR3JvdXBNZXNzYWdlUmV2b2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2NvbW1vbkdyb3VwSGFuZGxlciYmdGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyLm9uR3JvdXBNZXNzYWdlUmV2b2tlZChlKX19LHtrZXk6XCJvbk5ld0dyb3VwU3lzdGVtTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyJiZ0aGlzLl9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXIub25OZXdHcm91cFN5c3RlbU5vdGljZShlKX19LHtrZXk6XCJvbkdyb3VwTWVzc2FnZVJlYWROb3RpY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5lbGVtZW50cy5ncm91cE1lc3NhZ2VSZWFkTm90aWNlO2lmKCFKaShuKSl7dmFyIG89dC5nZXRNb2R1bGUoSmMpO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5ncm91cElELHI9ZS5sYXN0TWVzc2FnZVNlcTtLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIub25Hcm91cE1lc3NhZ2VSZWFkTm90aWNlIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIGxhc3RNZXNzYWdlU2VxOlwiKS5jb25jYXQocikpO3ZhciBhPVwiXCIuY29uY2F0KHJvLkNPTlZfR1JPVVApLmNvbmNhdChuKTtvLnVwZGF0ZUlzUmVhZEFmdGVyUmVhZFJlcG9ydCh7Y29udmVyc2F0aW9uSUQ6YSxsYXN0TWVzc2FnZVNlcTpyfSksby51cGRhdGVVbnJlYWRDb3VudChhKX0pKX19KSl9fSx7a2V5OlwiZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXImJnRoaXMuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlci5kZWxldGVHcm91cFN5c3RlbU5vdGljZShlKX19LHtrZXk6XCJpbml0R3JvdXBNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdyb3VwTWFwLnNldChlLmdyb3VwSUQsbmV3IEV2KGUpKX19LHtrZXk6XCJkZWxldGVHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ3JvdXBNYXAuZGVsZXRlKGUpfX0se2tleTpcInVwZGF0ZUdyb3VwTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuZ3JvdXBNYXAuaGFzKGUuZ3JvdXBJRCk/dC5ncm91cE1hcC5nZXQoZS5ncm91cElEKS51cGRhdGVHcm91cChlKTp0Lmdyb3VwTWFwLnNldChlLmdyb3VwSUQsbmV3IEV2KGUpKX0pKSx0aGlzLl9zZXRTdG9yYWdlR3JvdXBMaXN0KCl9fSx7a2V5OlwiZ2V0U3RvcmFnZUdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKFFjKS5nZXRJdGVtKFwiZ3JvdXBNYXBcIil9fSx7a2V5OlwiX3NldFN0b3JhZ2VHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TG9jYWxHcm91cExpc3QoKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZTtyZXR1cm4hbXUodCl9KSkuc2xpY2UoMCwyMCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm57Z3JvdXBJRDplLmdyb3VwSUQsbmFtZTplLm5hbWUsYXZhdGFyOmUuYXZhdGFyLHR5cGU6ZS50eXBlfX0pKTt0aGlzLmdldE1vZHVsZShRYykuc2V0SXRlbShcImdyb3VwTWFwXCIsZSl9fSx7a2V5OlwiZ2V0R3JvdXBNYXBcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyb3VwTWFwfX0se2tleTpcImdldExvY2FsR3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdih0aGlzLmdyb3VwTWFwLnZhbHVlcygpKX19LHtrZXk6XCJnZXRMb2NhbEdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdyb3VwTWFwLmdldChlKX19LHtrZXk6XCJzb3J0TG9jYWxHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXYodGhpcy5ncm91cE1hcCkuZmlsdGVyKChmdW5jdGlvbihlKXt2YXIgdD1tKGUsMik7dFswXTtyZXR1cm4hT3UodFsxXS5sYXN0TWVzc2FnZSl9KSk7ZS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiB0WzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lLWVbMV0ubGFzdE1lc3NhZ2UubGFzdFRpbWV9KSksdGhpcy5ncm91cE1hcD1uZXcgTWFwKHYoZSkpfX0se2tleTpcInVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jb21tb25Hcm91cEhhbmRsZXImJnRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5oYW5kbGVVcGRhdGVHcm91cExhc3RNZXNzYWdlKGUpfX0se2tleTpcImVtaXRHcm91cExpc3RVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF0sdD0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLG49dGhpcy5nZXRMb2NhbEdyb3VwTGlzdCgpO2lmKGUmJnRoaXMuZW1pdE91dGVyRXZlbnQob28uR1JPVVBfTElTVF9VUERBVEVELG4pLHQpe3ZhciBvPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobikpLHI9dGhpcy5nZXRNb2R1bGUoSmMpO3IudXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKG8pfX19LHtrZXk6XCJnZXRNeU5hbWVDYXJkQnlHcm91cElEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShlKTtyZXR1cm4gdD90LnNlbGZJbmZvLm5hbWVDYXJkOlwiXCJ9fSx7a2V5OlwiZ2V0R3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlcj90aGlzLl9jb21tb25Hcm91cEhhbmRsZXIuZ2V0R3JvdXBMaXN0KGUpOmptKCl9fSx7a2V5OlwiZ2V0R3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPW5ldyBsZyhlaCksbz1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBQcm9maWxlXCIpLHI9ZS5ncm91cElELGE9ZS5ncm91cEN1c3RvbUZpZWxkRmlsdGVyO0tpLmxvZyhcIlwiLmNvbmNhdChvLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChyKSk7dmFyIHM9e2dyb3VwSURMaXN0OltyXSxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjpbXCJUeXBlXCIsXCJOYW1lXCIsXCJJbnRyb2R1Y3Rpb25cIixcIk5vdGlmaWNhdGlvblwiLFwiRmFjZVVybFwiLFwiT3duZXJfQWNjb3VudFwiLFwiQ3JlYXRlVGltZVwiLFwiSW5mb1NlcVwiLFwiTGFzdEluZm9UaW1lXCIsXCJMYXN0TXNnVGltZVwiLFwiTWVtYmVyTnVtXCIsXCJNYXhNZW1iZXJOdW1cIixcIkFwcGx5Sm9pbk9wdGlvblwiLFwiTmV4dE1zZ1NlcVwiLFwiU2h1dFVwQWxsTWVtYmVyXCJdLGdyb3VwQ3VzdG9tRmllbGRGaWx0ZXI6YX19O3JldHVybiB0aGlzLmdldEdyb3VwUHJvZmlsZUFkdmFuY2UocykudGhlbigoZnVuY3Rpb24oZSl7dmFyIGEscz1lLmRhdGEsaT1zLnN1Y2Nlc3NHcm91cExpc3QsdT1zLmZhaWx1cmVHcm91cExpc3Q7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdChvLFwiIG9rXCIpKSx1Lmxlbmd0aD4wP1ltKHVbMF0pOihtdShpWzBdLnR5cGUpJiYhdC5oYXNMb2NhbEdyb3VwKHIpP2E9bmV3IEV2KGlbMF0pOih0LnVwZGF0ZUdyb3VwTWFwKGkpLGE9dC5nZXRMb2NhbEdyb3VwUHJvZmlsZShyKSksbi5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChyLFwiIHR5cGU6XCIpLmNvbmNhdChhLnR5cGUsXCIgbXV0ZUFsbE1lbWJlcnM6XCIpLmNvbmNhdChhLm11dGVBbGxNZW1iZXJzLFwiIG93bmVySUQ6XCIpLmNvbmNhdChhLm93bmVySUQpKS5lbmQoKSxhJiZhLnNlbGZJbmZvJiYhYS5zZWxmSW5mby5uYW1lQ2FyZD90LnVwZGF0ZVNlbGZJbmZvKGEpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBQbSh7Z3JvdXA6ZX0pfSkpOlBtKHtncm91cDphfSkpfSkpLmNhdGNoKChmdW5jdGlvbihyKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbz1tKHQsMiksYT1vWzBdLHM9b1sxXTtuLnNldEVycm9yKHIsYSxzKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZS5ncm91cElEKSkuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQobyxcIiBmYWlsZWQuIGVycm9yOlwiKSxyKSxZbShyKX0pKX19LHtrZXk6XCJnZXRHcm91cFByb2ZpbGVBZHZhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwUHJvZmlsZUFkdmFuY2VcIik7cmV0dXJuIHppKGUuZ3JvdXBJRExpc3QpJiZlLmdyb3VwSURMaXN0Lmxlbmd0aD41MCYmKEtpLndhcm4oXCJcIi5jb25jYXQodCxcIiDojrflj5bnvqTotYTmlpnnmoTmlbDph4/kuI3og73otoXov4c1MOS4qlwiKSksZS5ncm91cElETGlzdC5sZW5ndGg9NTApLEtpLmxvZyhcIlwiLmNvbmNhdCh0LFwiIGdyb3VwSURMaXN0OlwiKS5jb25jYXQoZS5ncm91cElETGlzdCkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnpsLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbihlKXtLaS5sb2coXCJcIi5jb25jYXQodCxcIiBva1wiKSk7dmFyIG49ZS5kYXRhLmdyb3VwcyxvPW4uZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gSmkoZS5lcnJvckNvZGUpfHwwPT09ZS5lcnJvckNvZGV9KSkscj1uLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZXJyb3JDb2RlJiYwIT09ZS5lcnJvckNvZGV9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IEttKHtjb2RlOmUuZXJyb3JDb2RlLG1lc3NhZ2U6ZS5lcnJvckluZm8sZGF0YTp7Z3JvdXBJRDplLmdyb3VwSUR9fSl9KSk7cmV0dXJuIFBtKHtzdWNjZXNzR3JvdXBMaXN0Om8sZmFpbHVyZUdyb3VwTGlzdDpyfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBLaS5lcnJvcihcIlwiLmNvbmNhdCh0LFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLFltKGUpfSkpfX0se2tleTpcInVwZGF0ZVNlbGZJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZVNlbGZJbmZvXCIpLG49ZS5ncm91cElEO3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQodCxcIiBncm91cElEOlwiKS5jb25jYXQobikpLHRoaXMuZ2V0TW9kdWxlKHpjKS5nZXRHcm91cE1lbWJlclByb2ZpbGUoe2dyb3VwSUQ6bix1c2VySURMaXN0Olt0aGlzLmdldE15VXNlcklEKCldfSkudGhlbigoZnVuY3Rpb24obil7dmFyIG89bi5kYXRhLm1lbWJlckxpc3Q7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdCh0LFwiIG9rXCIpKSxlJiYwIT09by5sZW5ndGgmJmUudXBkYXRlU2VsZkluZm8ob1swXSksZX0pKX19LHtrZXk6XCJjcmVhdGVHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsbz1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY3JlYXRlR3JvdXBcIik7aWYoIVtcIlB1YmxpY1wiLFwiUHJpdmF0ZVwiLFwiQ2hhdFJvb21cIixcIkFWQ2hhdFJvb21cIl0uaW5jbHVkZXMoZS50eXBlKSl7dmFyIHI9bmV3IEttKHtjb2RlOlBkLklMTEVHQUxfR1JPVVBfVFlQRSxtZXNzYWdlOnZwfSk7cmV0dXJuIFltKHIpfW11KGUudHlwZSkmJiFKaShlLm1lbWJlckxpc3QpJiZlLm1lbWJlckxpc3QubGVuZ3RoPjAmJihLaS53YXJuKFwiXCIuY29uY2F0KG8sXCIg5Yib5bu6IEFWQ2hhdFJvb20g5pe25LiN6IO95re75Yqg576k5oiQ5ZGY77yM6Ieq5Yqo5b+955Wl6K+l5a2X5q61XCIpKSxlLm1lbWJlckxpc3Q9dm9pZCAwKSxfdShlLnR5cGUpfHxKaShlLmpvaW5PcHRpb24pfHwoS2kud2FybihcIlwiLmNvbmNhdChvLFwiIOWIm+W7uiBXb3JrL01lZXRpbmcvQVZDaGF0Um9vbSDnvqTml7bkuI3og73orr7nva7lrZfmrrUgam9pbk9wdGlvbu+8jOiHquWKqOW/veeVpeivpeWtl+autVwiKSksZS5qb2luT3B0aW9uPXZvaWQgMCk7dmFyIGE9bmV3IGxnKEJnKTtLaS5sb2coXCJcIi5jb25jYXQobyxcIiBvcHRpb25zOlwiKSxlKTt2YXIgcz1bXTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6SmwscmVxdWVzdERhdGE6dCh0KHt9LGUpLHt9LHtvd25lcklEOnRoaXMuZ2V0TXlVc2VySUQoKSx3ZWJQdXNoRmxhZzoxfSl9KS50aGVuKChmdW5jdGlvbihyKXt2YXIgaT1yLmRhdGEsdT1pLmdyb3VwSUQsYz1pLm92ZXJMaW1pdFVzZXJJRExpc3QsbD12b2lkIDA9PT1jP1tdOmM7aWYocz1sLGEuc2V0TmV0d29ya1R5cGUobi5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBUeXBlOlwiLmNvbmNhdChlLnR5cGUsXCIgZ3JvdXBJRDpcIikuY29uY2F0KHUsXCIgb3ZlckxpbWl0VXNlcklETGlzdD1cIikuY29uY2F0KGwpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobyxcIiBvayBncm91cElEOlwiKS5jb25jYXQodSxcIiBvdmVyTGltaXRVc2VySURMaXN0OlwiKSxsKSxlLnR5cGU9PT1yby5HUlBfQVZDSEFUUk9PTSlyZXR1cm4gbi5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6dX0pO091KGUubWVtYmVyTGlzdCl8fE91KGwpfHwoZS5tZW1iZXJMaXN0PWUubWVtYmVyTGlzdC5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybi0xPT09bC5pbmRleE9mKGUudXNlcklEKX0pKSksbi51cGRhdGVHcm91cE1hcChbdCh0KHt9LGUpLHt9LHtncm91cElEOnV9KV0pO3ZhciBkPW4uZ2V0TW9kdWxlKEhjKSxwPWQuY3JlYXRlQ3VzdG9tTWVzc2FnZSh7dG86dSxjb252ZXJzYXRpb25UeXBlOnJvLkNPTlZfR1JPVVAscGF5bG9hZDp7ZGF0YTpcImdyb3VwX2NyZWF0ZVwiLGV4dGVuc2lvbjpcIlwiLmNvbmNhdChuLmdldE15VXNlcklEKCksXCLliJvlu7rnvqTnu4RcIil9fSk7cmV0dXJuIGQuc2VuZE1lc3NhZ2VJbnN0YW5jZShwKSxuLmVtaXRHcm91cExpc3RVcGRhdGUoKSxuLmdldEdyb3VwUHJvZmlsZSh7Z3JvdXBJRDp1fSl9KSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhLmdyb3VwLG49dC5zZWxmSW5mbyxvPW4ubmFtZUNhcmQscj1uLmpvaW5UaW1lO3JldHVybiB0LnVwZGF0ZVNlbGZJbmZvKHtuYW1lQ2FyZDpvLGpvaW5UaW1lOnIsbWVzc2FnZVJlbWluZFR5cGU6cm8uTVNHX1JFTUlORF9BQ1BUX0FORF9OT1RFLHJvbGU6cm8uR1JQX01CUl9ST0xFX09XTkVSfSksUG0oe2dyb3VwOnQsb3ZlckxpbWl0VXNlcklETGlzdDpzfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3JldHVybiBhLnNldE1lc3NhZ2UoXCJncm91cFR5cGU6XCIuY29uY2F0KGUudHlwZSkpLG4ucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49bShlLDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcih0LG8scikuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQobyxcIiBmYWlsZWQuIGVycm9yOlwiKSx0KSxZbSh0KX0pKX19LHtrZXk6XCJkaXNtaXNzR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRpc21pc3NHcm91cFwiKTtpZih0aGlzLmhhc0xvY2FsR3JvdXAoZSkmJnRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSkudHlwZT09PXJvLkdSUF9XT1JLKXJldHVybiBZbShuZXcgS20oe2NvZGU6UGQuQ0FOTk9UX0RJU01JU1NfV09SSyxtZXNzYWdlOlRwfSkpO3ZhciBvPW5ldyBsZyhYZyk7cmV0dXJuIG8uc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUpKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQoZSkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlhsLHJlcXVlc3REYXRhOntncm91cElEOmV9fSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gby5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx0LmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24oZSksdC5jaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEKGUpJiZ0Ll9BVkNoYXRSb29tSGFuZGxlci5yZXNldChlKSxQbSh7Z3JvdXBJRDplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwidXBkYXRlR3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGRhdGVHcm91cFByb2ZpbGVcIik7IXRoaXMuaGFzTG9jYWxHcm91cChlLmdyb3VwSUQpfHxfdSh0aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKGUuZ3JvdXBJRCkudHlwZSl8fEppKGUuam9pbk9wdGlvbil8fChLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgV29yay9NZWV0aW5nL0FWQ2hhdFJvb20g576k5LiN6IO96K6+572u5a2X5q61IGpvaW5PcHRpb27vvIzoh6rliqjlv73nlaXor6XlrZfmrrVcIikpLGUuam9pbk9wdGlvbj12b2lkIDApLEppKGUubXV0ZUFsbE1lbWJlcnMpfHwoZS5tdXRlQWxsTWVtYmVycz9lLm11dGVBbGxNZW1iZXJzPVwiT25cIjplLm11dGVBbGxNZW1iZXJzPVwiT2ZmXCIpO3ZhciBvPW5ldyBsZyhRZyk7cmV0dXJuIG8uc2V0TWVzc2FnZShKU09OLnN0cmluZ2lmeShlKSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUuZ3JvdXBJRCkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlFsLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbigpeyhvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpLHQuaGFzTG9jYWxHcm91cChlLmdyb3VwSUQpKSYmKHQuZ3JvdXBNYXAuZ2V0KGUuZ3JvdXBJRCkudXBkYXRlR3JvdXAoZSksdC5fc2V0U3RvcmFnZUdyb3VwTGlzdCgpKTtyZXR1cm4gUG0oe2dyb3VwOnQuZ3JvdXBNYXAuZ2V0KGUuZ3JvdXBJRCl9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5Olwiam9pbkdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUudHlwZSxyPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5qb2luR3JvdXBcIik7aWYobz09PXJvLkdSUF9XT1JLKXt2YXIgYT1uZXcgS20oe2NvZGU6UGQuQ0FOTk9UX0pPSU5fV09SSyxtZXNzYWdlOk1wfSk7cmV0dXJuIFltKGEpfWlmKHRoaXMuZGVsZXRlVW5qb2luZWRBVkNoYXRSb29tKG4pLHRoaXMuaGFzTG9jYWxHcm91cChuKSl7aWYoIXRoaXMuaXNMb2dnZWRJbigpKXJldHVybiBqbSh7c3RhdHVzOnJvLkpPSU5fU1RBVFVTX0FMUkVBRFlfSU5fR1JPVVB9KTt2YXIgcz1uZXcgbGcoSGcpO3JldHVybiB0aGlzLmdldEdyb3VwUHJvZmlsZSh7Z3JvdXBJRDpufSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gcy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIGpvaW5lZFN0YXR1czpcIikuY29uY2F0KHJvLkpPSU5fU1RBVFVTX0FMUkVBRFlfSU5fR1JPVVApKS5lbmQoKSxqbSh7c3RhdHVzOnJvLkpPSU5fU1RBVFVTX0FMUkVBRFlfSU5fR1JPVVB9KX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuIHMuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiB1bmpvaW5lZFwiKSkuZW5kKCksS2kud2FybihcIlwiLmNvbmNhdChyLFwiIFwiKS5jb25jYXQobixcIiB3YXMgdW5qb2luZWQsIG5vdyBqb2luIVwiKSksdC5ncm91cE1hcC5kZWxldGUobiksdC5hcHBseUpvaW5Hcm91cChlKX0pKX1yZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KHIsXCIgZ3JvdXBJRDpcIikuY29uY2F0KG4pKSx0aGlzLmlzTG9nZ2VkSW4oKT90aGlzLmFwcGx5Sm9pbkdyb3VwKGUpOnRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmpvaW5XaXRob3V0QXV0aChlKX19LHtrZXk6XCJhcHBseUpvaW5Hcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYXBwbHlKb2luR3JvdXBcIiksbz1lLmdyb3VwSUQscj1uZXcgbGcoSGcpO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpabCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIGE9ZS5kYXRhLHM9YS5qb2luZWRTdGF0dXMsaT1hLmxvbmdQb2xsaW5nS2V5LHU9YS5hdkNoYXRSb29tRmxhZyxjPWEuYXZDaGF0Um9vbUtleSxsPVwiZ3JvdXBJRDpcIi5jb25jYXQobyxcIiBqb2luZWRTdGF0dXM6XCIpLmNvbmNhdChzLFwiIGxvbmdQb2xsaW5nS2V5OlwiKS5jb25jYXQoaSxcIiBhdkNoYXRSb29tRmxhZzpcIikuY29uY2F0KHUpO3N3aXRjaChyLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChsKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIFwiKS5jb25jYXQobCkpLHMpe2Nhc2UgZm06cmV0dXJuIFBtKHtzdGF0dXM6Zm19KTtjYXNlIGhtOnJldHVybiB0LmdldEdyb3VwUHJvZmlsZSh7Z3JvdXBJRDpvfSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhLmdyb3VwLHI9e3N0YXR1czpobSxncm91cDpufTtyZXR1cm4gMT09PXU/KHQuZ2V0TW9kdWxlKEpjKS5zZXRDb21wbGV0ZWQoXCJcIi5jb25jYXQocm8uQ09OVl9HUk9VUCkuY29uY2F0KG8pKSx0Ll9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLmluaXRHcm91cEF0dHJpYnV0ZXNDYWNoZSh7Z3JvdXBJRDpvLGF2Q2hhdFJvb21LZXk6Y30pLEppKGkpP3QuX0FWQ2hhdFJvb21IYW5kbGVyLmhhbmRsZUpvaW5SZXN1bHQoe2dyb3VwOm59KTp0Ll9BVkNoYXRSb29tSGFuZGxlci5zdGFydFJ1bkxvb3Aoe2xvbmdQb2xsaW5nS2V5OmksZ3JvdXA6bn0pKToodC5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKSxQbShyKSl9KSk7ZGVmYXVsdDp2YXIgZD1uZXcgS20oe2NvZGU6UGQuSk9JTl9HUk9VUF9GQUlMLG1lc3NhZ2U6U3B9KTtyZXR1cm4gS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBlcnJvcjpcIiksZCksWW0oZCl9fSkpLmNhdGNoKChmdW5jdGlvbihvKXtyZXR1cm4gci5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZS5ncm91cElEKSksdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1tKGUsMiksbj10WzBdLGE9dFsxXTtyLnNldEVycm9yKG8sbixhKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGVycm9yOlwiKSxvKSxZbShvKX0pKX19LHtrZXk6XCJxdWl0R3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnF1aXRHcm91cFwiKTtLaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQoZSkpO3ZhciBvPXRoaXMuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKTtpZighbyYmIXRoaXMuaGFzTG9jYWxHcm91cChlKSl7dmFyIHI9bmV3IEttKHtjb2RlOlBkLk1FTUJFUl9OT1RfSU5fR1JPVVAsbWVzc2FnZTpEcH0pO3JldHVybiBZbShyKX1pZihvJiYhdGhpcy5pc0xvZ2dlZEluKCkpcmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGFub255bW91c2x5IG9rLiBncm91cElEOlwiKS5jb25jYXQoZSkpLHRoaXMuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbihlKSx0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5yZXNldChlKSxqbSh7Z3JvdXBJRDplfSk7dmFyIGE9bmV3IGxnKGpnKTtyZXR1cm4gYS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZSkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnRkLHJlcXVlc3REYXRhOntncm91cElEOmV9fSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSxvJiZ0Ll9BVkNoYXRSb29tSGFuZGxlci5yZXNldChlKSx0LmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24oZSksUG0oe2dyb3VwSUQ6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLFltKGUpfSkpfX0se2tleTpcInNlYXJjaEdyb3VwQnlJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2VhcmNoR3JvdXBCeUlEXCIpLG89e2dyb3VwSURMaXN0OltlXX0scj1uZXcgbGcoWWcpO3JldHVybiByLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlKSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpuZCxyZXF1ZXN0RGF0YTpvfSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89ZS5kYXRhLmdyb3VwUHJvZmlsZTtpZigwIT09b1swXS5lcnJvckNvZGUpdGhyb3cgbmV3IEttKHtjb2RlOm9bMF0uZXJyb3JDb2RlLG1lc3NhZ2U6b1swXS5lcnJvckluZm99KTtyZXR1cm4gci5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSxQbSh7Z3JvdXA6bmV3IEV2KG9bMF0pfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0sYT1uWzFdO3Iuc2V0RXJyb3IoZSxvLGEpLmVuZCgpfSkpLEtpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJjaGFuZ2VHcm91cE93bmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5jaGFuZ2VHcm91cE93bmVyXCIpO2lmKHRoaXMuaGFzTG9jYWxHcm91cChlLmdyb3VwSUQpJiZ0aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKGUuZ3JvdXBJRCkudHlwZT09PXJvLkdSUF9BVkNIQVRST09NKXJldHVybiBZbShuZXcgS20oe2NvZGU6UGQuQ0FOTk9UX0NIQU5HRV9PV05FUl9JTl9BVkNIQVRST09NLG1lc3NhZ2U6eXB9KSk7aWYoZS5uZXdPd25lcklEPT09dGhpcy5nZXRNeVVzZXJJRCgpKXJldHVybiBZbShuZXcgS20oe2NvZGU6UGQuQ0FOTk9UX0NIQU5HRV9PV05FUl9UT19TRUxGLG1lc3NhZ2U6SXB9KSk7dmFyIG89bmV3IGxnKCRnKTtyZXR1cm4gby5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZS5ncm91cElELFwiIG5ld093bmVySUQ6XCIpLmNvbmNhdChlLm5ld093bmVySUQpKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQoZS5ncm91cElEKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6b2QscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKCl7by5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKTt2YXIgcj1lLmdyb3VwSUQsYT1lLm5ld093bmVySUQ7dC5ncm91cE1hcC5nZXQocikub3duZXJJRD1hO3ZhciBzPXQuZ2V0TW9kdWxlKHpjKS5nZXRMb2NhbEdyb3VwTWVtYmVyTGlzdChyKTtpZihzIGluc3RhbmNlb2YgTWFwKXt2YXIgaT1zLmdldCh0LmdldE15VXNlcklEKCkpO0ppKGkpfHwoaS51cGRhdGVSb2xlKFwiTWVtYmVyXCIpLHQuZ3JvdXBNYXAuZ2V0KHIpLnNlbGZJbmZvLnJvbGU9XCJNZW1iZXJcIik7dmFyIHU9cy5nZXQoYSk7SmkodSl8fHUudXBkYXRlUm9sZShcIk93bmVyXCIpfXJldHVybiB0LmVtaXRHcm91cExpc3RVcGRhdGUoITAsITEpLFBtKHtncm91cDp0Lmdyb3VwTWFwLmdldChyKX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLFltKGUpfSkpfX0se2tleTpcImhhbmRsZUdyb3VwQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLG89XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmhhbmRsZUdyb3VwQXBwbGljYXRpb25cIikscj1lLm1lc3NhZ2UucGF5bG9hZCxhPXIuZ3JvdXBQcm9maWxlLmdyb3VwSUQscz1yLmF1dGhlbnRpY2F0aW9uLGk9ci5tZXNzYWdlS2V5LHU9ci5vcGVyYXRvcklELGM9bmV3IGxnKFdnKTtyZXR1cm4gYy5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoYSkpLEtpLmxvZyhcIlwiLmNvbmNhdChvLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChhKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6cmQscmVxdWVzdERhdGE6dCh0KHt9LGUpLHt9LHthcHBsaWNhbnQ6dSxncm91cElEOmEsYXV0aGVudGljYXRpb246cyxtZXNzYWdlS2V5Oml9KX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGMuc2V0TmV0d29ya1R5cGUobi5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobyxcIiBva1wiKSksbi5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyLmRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlKHttZXNzYWdlTGlzdDpbZS5tZXNzYWdlXX0pLFBtKHtncm91cDpuLmdldExvY2FsR3JvdXBQcm9maWxlKGEpfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBuLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG8sXCIgZmFpbGVkLiBlcnJvclwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJoYW5kbGVHcm91cEludml0YXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLG89XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmhhbmRsZUdyb3VwSW52aXRhdGlvblwiKSxyPWUubWVzc2FnZS5wYXlsb2FkLGE9ci5ncm91cFByb2ZpbGUuZ3JvdXBJRCxzPXIuYXV0aGVudGljYXRpb24saT1yLm1lc3NhZ2VLZXksdT1yLm9wZXJhdG9ySUQsYz1lLmhhbmRsZUFjdGlvbixsPW5ldyBsZyh6Zyk7cmV0dXJuIGwuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGEsXCIgaW52aXRlcjpcIikuY29uY2F0KHUsXCIgaGFuZGxlQWN0aW9uOlwiKS5jb25jYXQoYykpLEtpLmxvZyhcIlwiLmNvbmNhdChvLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChhLFwiIGludml0ZXI6XCIpLmNvbmNhdCh1LFwiIGhhbmRsZUFjdGlvbjpcIikuY29uY2F0KGMpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTphZCxyZXF1ZXN0RGF0YTp0KHQoe30sZSkse30se2ludml0ZXI6dSxncm91cElEOmEsYXV0aGVudGljYXRpb246cyxtZXNzYWdlS2V5Oml9KX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGwuc2V0TmV0d29ya1R5cGUobi5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobyxcIiBva1wiKSksbi5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyLmRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlKHttZXNzYWdlTGlzdDpbZS5tZXNzYWdlXX0pLFBtKHtncm91cDpuLmdldExvY2FsR3JvdXBQcm9maWxlKGEpfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBuLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2wuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG8sXCIgZmFpbGVkLiBlcnJvclwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJnZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyP3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSk/dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudChlKTpqbSh7bWVtYmVyQ291bnQ6MH0pOlltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5OlwiaGFzTG9jYWxHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdyb3VwTWFwLmhhcyhlKX19LHtrZXk6XCJkZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZGVsZXRlTG9jYWxHcm91cChlKSx0aGlzLmdldE1vZHVsZShKYykuZGVsZXRlTG9jYWxDb252ZXJzYXRpb24oXCJHUk9VUFwiLmNvbmNhdChlKSksdGhpcy5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKX19LHtrZXk6XCJfZGVsZXRlTG9jYWxHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ3JvdXBNYXAuZGVsZXRlKGUpLHRoaXMuZ2V0TW9kdWxlKHpjKS5kZWxldGVHcm91cE1lbWJlckxpc3QoZSksdGhpcy5fc2V0U3RvcmFnZUdyb3VwTGlzdCgpfX0se2tleTpcInNlbmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNyZWF0ZUdyb3VwTWVzc2FnZVBhY2soZSx0KTtyZXR1cm4gdGhpcy5yZXF1ZXN0KG4pfX0se2tleTpcImNyZWF0ZUdyb3VwTWVzc2FnZVBhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPW51bGw7dCYmdC5vZmZsaW5lUHVzaEluZm8mJihuPXQub2ZmbGluZVB1c2hJbmZvKTt2YXIgbz1cIlwiO1lpKGUuY2xvdWRDdXN0b21EYXRhKSYmZS5jbG91ZEN1c3RvbURhdGEubGVuZ3RoPjAmJihvPWUuY2xvdWRDdXN0b21EYXRhKTt2YXIgcj1lLmdldEdyb3VwQXRJbmZvTGlzdCgpO3JldHVybntwcm90b2NvbE5hbWU6dmwsdGpnSUQ6dGhpcy5nZW5lcmF0ZVRqZ0lEKGUpLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLmdldE15VXNlcklEKCksZ3JvdXBJRDplLnRvLG1zZ0JvZHk6ZS5nZXRFbGVtZW50cygpLGNsb3VkQ3VzdG9tRGF0YTpvLHJhbmRvbTplLnJhbmRvbSxwcmlvcml0eTplLnByaW9yaXR5LGNsaWVudFNlcXVlbmNlOmUuY2xpZW50U2VxdWVuY2UsZ3JvdXBBdEluZm86ZS50eXBlIT09cm8uTVNHX1RFWFR8fE91KHIpP3ZvaWQgMDpyLG9ubGluZU9ubHlGbGFnOnRoaXMuaXNPbmxpbmVNZXNzYWdlKGUsdCk/MTowLG9mZmxpbmVQdXNoSW5mbzpuP3twdXNoRmxhZzohMD09PW4uZGlzYWJsZVB1c2g/MTowLHRpdGxlOm4udGl0bGV8fFwiXCIsZGVzYzpuLmRlc2NyaXB0aW9ufHxcIlwiLGV4dDpuLmV4dGVuc2lvbnx8XCJcIixhcG5zSW5mbzp7YmFkZ2VNb2RlOiEwPT09bi5pZ25vcmVJT1NCYWRnZT8xOjB9LGFuZHJvaWRJbmZvOntPUFBPQ2hhbm5lbElEOm4uYW5kcm9pZE9QUE9DaGFubmVsSUR8fFwiXCJ9fTp2b2lkIDB9fX19LHtrZXk6XCJyZXZva2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnNkLHJlcXVlc3REYXRhOnt0bzplLnRvLG1zZ1NlcUxpc3Q6W3ttc2dTZXE6ZS5zZXF1ZW5jZX1dfX0pfX0se2tleTpcImRlbGV0ZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnRvLG49ZS5rZXlMaXN0O3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZU1lc3NhZ2UgZ3JvdXBJRDpcIikuY29uY2F0KHQsXCIgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmhkLHJlcXVlc3REYXRhOntncm91cElEOnQsZGVsZXRlcjp0aGlzLmdldE15VXNlcklEKCksa2V5TGlzdDpufX0pfX0se2tleTpcImdldFJvYW1pbmdNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRSb2FtaW5nTWVzc2FnZVwiKSxvPW5ldyBsZyhBZykscj0wO3JldHVybiB0aGlzLl9jb21wdXRlTGFzdFNlcXVlbmNlKGUpLnRoZW4oKGZ1bmN0aW9uKG4pe3JldHVybiByPW4sS2kubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5nZXRSb2FtaW5nTWVzc2FnZSBncm91cElEOlwiKS5jb25jYXQoZS5ncm91cElELFwiIGxhc3RTZXF1ZW5jZTpcIikuY29uY2F0KHIpKSx0LnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp1ZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDplLmdyb3VwSUQsY291bnQ6MjEsc2VxdWVuY2U6cn19KX0pKS50aGVuKChmdW5jdGlvbihhKXt2YXIgcz1hLmRhdGEsaT1zLm1lc3NhZ2VMaXN0LHU9cy5jb21wbGV0ZTtKaShpKT9LaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gY29tcGxldGU6XCIpLmNvbmNhdCh1LFwiIGJ1dCBtZXNzYWdlTGlzdCBpcyB1bmRlZmluZWQhXCIpKTpLaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gY29tcGxldGU6XCIpLmNvbmNhdCh1LFwiIGNvdW50OlwiKS5jb25jYXQoaS5sZW5ndGgpKSxvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCxcIiBsYXN0U2VxdWVuY2U6XCIpLmNvbmNhdChyLFwiIGNvbXBsZXRlOlwiKS5jb25jYXQodSxcIiBjb3VudDpcIikuY29uY2F0KGk/aS5sZW5ndGg6XCJ1bmRlZmluZWRcIikpLmVuZCgpO3ZhciBjPVwiR1JPVVBcIi5jb25jYXQoZS5ncm91cElEKSxsPXQuZ2V0TW9kdWxlKEpjKTtpZigyPT09dXx8T3UoaSkpcmV0dXJuIGwuc2V0Q29tcGxldGVkKGMpLFtdO3ZhciBkPWwuc3RvcmVSb2FtaW5nTWVzc2FnZShpLGMpO3JldHVybiBsLnVwZGF0ZUlzUmVhZChjKSxsLnBhdGNoQ29udmVyc2F0aW9uTGFzdE1lc3NhZ2UoYyksZH0pKS5jYXRjaCgoZnVuY3Rpb24oYSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLHM9blswXSxpPW5bMV07by5zZXRFcnJvcihhLHMsaSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCxcIiBsYXN0U2VxdWVuY2U6XCIpLmNvbmNhdChyKSkuZW5kKCl9KSksS2kud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGEpLFltKGEpfSkpfX0se2tleTpcInNldE1lc3NhZ2VSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY29udmVyc2F0aW9uSUQsbz1lLmxhc3RNZXNzYWdlU2VxLHI9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldE1lc3NhZ2VSZWFkXCIpO0tpLmxvZyhcIlwiLmNvbmNhdChyLFwiIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobixcIiBsYXN0TWVzc2FnZVNlcTpcIikuY29uY2F0KG8pKSxqaShvKXx8S2kud2FybihcIlwiLmNvbmNhdChyLFwiIOivt+WLv+S/ruaUuSBDb252ZXJzYXRpb24ubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNl77yM5ZCm5YiZ5Y+v6IO95Lya5a+86Ie05bey6K+75LiK5oql57uT5p6c5LiN5YeG56GuXCIpKTt2YXIgYT1uZXcgbGcoTGcpO3JldHVybiBhLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQobixcIi1cIikuY29uY2F0KG8pKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTppZCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpuLnJlcGxhY2UoXCJHUk9VUFwiLFwiXCIpLG1lc3NhZ2VSZWFkU2VxOm99fSkudGhlbigoZnVuY3Rpb24oKXthLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KHIsXCIgb2suXCIpKTt2YXIgZT10LmdldE1vZHVsZShKYyk7cmV0dXJuIGUudXBkYXRlSXNSZWFkQWZ0ZXJSZWFkUmVwb3J0KHtjb252ZXJzYXRpb25JRDpuLGxhc3RNZXNzYWdlU2VxOm99KSxlLnVwZGF0ZVVucmVhZENvdW50KG4pLFBtKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmxvZyhcIlwiLmNvbmNhdChyLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLFltKGUpfSkpfX0se2tleTpcIl9jb21wdXRlTGFzdFNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VxdWVuY2U+MD9Qcm9taXNlLnJlc29sdmUoZS5zZXF1ZW5jZSk6dGhpcy5nZXRHcm91cExhc3RTZXF1ZW5jZShlLmdyb3VwSUQpfX0se2tleTpcImdldEdyb3VwTGFzdFNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRHcm91cExhc3RTZXF1ZW5jZVwiKSxvPW5ldyBsZyhuaCkscj0wLGE9XCJcIjtpZih0aGlzLmhhc0xvY2FsR3JvdXAoZSkpe3ZhciBzPXRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSksaT1zLmxhc3RNZXNzYWdlO2lmKGkubGFzdFNlcXVlbmNlPjAmJiExPT09aS5vbmxpbmVPbmx5RmxhZylyZXR1cm4gcj1pLmxhc3RTZXF1ZW5jZSxhPVwiZ290IGxhc3RTZXF1ZW5jZTpcIi5jb25jYXQocixcIiBmcm9tIGxvY2FsIGdyb3VwIHByb2ZpbGVbbGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlXS4gZ3JvdXBJRDpcIikuY29uY2F0KGUpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIFwiKS5jb25jYXQoYSkpLG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KGEpKS5lbmQoKSxQcm9taXNlLnJlc29sdmUocik7aWYocy5uZXh0TWVzc2FnZVNlcT4xKXJldHVybiByPXMubmV4dE1lc3NhZ2VTZXEtMSxhPVwiZ290IGxhc3RTZXF1ZW5jZTpcIi5jb25jYXQocixcIiBmcm9tIGxvY2FsIGdyb3VwIHByb2ZpbGVbbmV4dE1lc3NhZ2VTZXFdLiBncm91cElEOlwiKS5jb25jYXQoZSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgXCIpLmNvbmNhdChhKSksby5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQoYSkpLmVuZCgpLFByb21pc2UucmVzb2x2ZShyKX12YXIgdT1cIkdST1VQXCIuY29uY2F0KGUpLGM9dGhpcy5nZXRNb2R1bGUoSmMpLmdldExvY2FsQ29udmVyc2F0aW9uKHUpO2lmKGMmJmMubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlJiYhMT09PWMubGFzdE1lc3NhZ2Uub25saW5lT25seUZsYWcpcmV0dXJuIHI9Yy5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2UsYT1cImdvdCBsYXN0U2VxdWVuY2U6XCIuY29uY2F0KHIsXCIgZnJvbSBsb2NhbCBjb252ZXJzYXRpb24gcHJvZmlsZVtsYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2VdLiBncm91cElEOlwiKS5jb25jYXQoZSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgXCIpLmNvbmNhdChhKSksby5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQoYSkpLmVuZCgpLFByb21pc2UucmVzb2x2ZShyKTt2YXIgbD17Z3JvdXBJRExpc3Q6W2VdLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOltcIk5leHRNc2dTZXFcIl19fTtyZXR1cm4gdGhpcy5nZXRHcm91cFByb2ZpbGVBZHZhbmNlKGwpLnRoZW4oKGZ1bmN0aW9uKHMpe3ZhciBpPXMuZGF0YS5zdWNjZXNzR3JvdXBMaXN0O3JldHVybiBPdShpKT9LaS5sb2coXCJcIi5jb25jYXQobixcIiBzdWNjZXNzR3JvdXBMaXN0IGlzIGVtcHR5LiBncm91cElEOlwiKS5jb25jYXQoZSkpOihyPWlbMF0ubmV4dE1lc3NhZ2VTZXEtMSxhPVwiZ290IGxhc3RTZXF1ZW5jZTpcIi5jb25jYXQocixcIiBmcm9tIGdldEdyb3VwUHJvZmlsZUFkdmFuY2UuIGdyb3VwSUQ6XCIpLmNvbmNhdChlKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBcIikuY29uY2F0KGEpKSksby5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQoYSkpLmVuZCgpLHJ9KSkuY2F0Y2goKGZ1bmN0aW9uKHIpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxhPW5bMF0scz1uWzFdO28uc2V0RXJyb3IocixhLHMpLnNldE1lc3NhZ2UoXCJnZXQgbGFzdFNlcXVlbmNlIGZhaWxlZCBmcm9tIGdldEdyb3VwUHJvZmlsZUFkdmFuY2UuIGdyb3VwSUQ6XCIuY29uY2F0KGUpKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksciksWW0ocil9KSl9fSx7a2V5OlwiaXNNZXNzYWdlRnJvbUFWQ2hhdHJvb21cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyJiZ0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5jaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEKGUpfX0se2tleTpcImhhc0pvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9BVkNoYXRSb29tSGFuZGxlcj90aGlzLl9BVkNoYXRSb29tSGFuZGxlci5oYXNKb2luZWRBVkNoYXRSb29tKCk6MH19LHtrZXk6XCJnZXRKb2luZWRBVkNoYXRSb29tXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXI/dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuZ2V0Sm9pbmVkQVZDaGF0Um9vbSgpOltdfX0se2tleTpcImlzT25saW5lTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISghdGhpcy5fY2FuSVVzZU9ubGluZU9ubHlGbGFnKGUpfHwhdHx8ITAhPT10Lm9ubGluZVVzZXJPbmx5KX19LHtrZXk6XCJfY2FuSVVzZU9ubGluZU9ubHlGbGFnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRKb2luZWRBVkNoYXRSb29tKCk7cmV0dXJuIXR8fCF0LmluY2x1ZGVzKGUudG8pfHxlLmNvbnZlcnNhdGlvblR5cGUhPT1yby5DT05WX0dST1VQfX0se2tleTpcImRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLmdldE1vZHVsZSh6YykuZGVsZXRlTG9jYWxHcm91cE1lbWJlcnMoZSx0KX19LHtrZXk6XCJvbkFWQ2hhdFJvb21NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXImJnRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLm9uTWVzc2FnZShlKX19LHtrZXk6XCJnZXRHcm91cFNpbXBsaWZpZWRJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPW5ldyBsZyhhaCksbz17Z3JvdXBJRExpc3Q6W2VdLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIl19fTtyZXR1cm4gdGhpcy5nZXRHcm91cFByb2ZpbGVBZHZhbmNlKG8pLnRoZW4oKGZ1bmN0aW9uKG8pe3ZhciByPW8uZGF0YS5zdWNjZXNzR3JvdXBMaXN0O3JldHVybiBuLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUsXCIgdHlwZTpcIikuY29uY2F0KHJbMF0udHlwZSkpLmVuZCgpLHJbMF19KSkuY2F0Y2goKGZ1bmN0aW9uKG8pe3QucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIHI9bSh0LDIpLGE9clswXSxzPXJbMV07bi5zZXRFcnJvcihvLGEscykuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUpKS5lbmQoKX0pKX0pKX19LHtrZXk6XCJzZXRVbmpvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LnNldChlLDEpfX0se2tleTpcImRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Vuam9pbmVkQVZDaGF0Um9vbUxpc3QuaGFzKGUpJiZ0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LmRlbGV0ZShlKX19LHtrZXk6XCJpc1Vuam9pbmVkQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LmhhcyhlKX19LHtrZXk6XCJvbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyJiZ0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLm9uR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZChlKX19LHtrZXk6XCJ1cGRhdGVMb2NhbE1haW5TZXF1ZW5jZU9uUmVjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXImJnRoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXIudXBkYXRlTG9jYWxNYWluU2VxdWVuY2VPblJlY29ubmVjdGVkKCl9fSx7a2V5OlwiaW5pdEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLmluaXRHcm91cEF0dHJpYnV0ZXMoZSl9fSx7a2V5Olwic2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXIuc2V0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLmRlbGV0ZUdyb3VwQXR0cmlidXRlcyhlKX19LHtrZXk6XCJnZXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5nZXRHcm91cEF0dHJpYnV0ZXMoZSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ3JvdXBNYXAuY2xlYXIoKSx0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LmNsZWFyKCksdGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyLnJlc2V0KCksdGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyLnJlc2V0KCksdGhpcy5fZ3JvdXBUaXBzSGFuZGxlci5yZXNldCgpLHRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyJiZ0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5yZXNldCgpfX1dKSxyfShkbCksSHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLnVzZXJJRD1cIlwiLHRoaXMuYXZhdGFyPVwiXCIsdGhpcy5uaWNrPVwiXCIsdGhpcy5yb2xlPVwiXCIsdGhpcy5qb2luVGltZT1cIlwiLHRoaXMubGFzdFNlbmRNc2dUaW1lPVwiXCIsdGhpcy5uYW1lQ2FyZD1cIlwiLHRoaXMubXV0ZVVudGlsPTAsdGhpcy5tZW1iZXJDdXN0b21GaWVsZD1bXSx0aGlzLl9pbml0TWVtYmVyKHQpfXJldHVybiBhKGUsW3trZXk6XCJfaW5pdE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMudXBkYXRlTWVtYmVyKGUpfX0se2tleTpcInVwZGF0ZU1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVtudWxsLHZvaWQgMCxcIlwiLDAsTmFOXTtlLm1lbWJlckN1c3RvbUZpZWxkJiZmdSh0aGlzLm1lbWJlckN1c3RvbUZpZWxkLGUubWVtYmVyQ3VzdG9tRmllbGQpLHJ1KHRoaXMsZSxbXCJtZW1iZXJDdXN0b21GaWVsZFwiXSx0KX19LHtrZXk6XCJ1cGRhdGVSb2xlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7W1wiT3duZXJcIixcIkFkbWluXCIsXCJNZW1iZXJcIl0uaW5kZXhPZihlKTwwfHwodGhpcy5yb2xlPWUpfX0se2tleTpcInVwZGF0ZU11dGVVbnRpbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe0ppKGUpfHwodGhpcy5tdXRlVW50aWw9TWF0aC5mbG9vcigoRGF0ZS5ub3coKSsxZTMqZSkvMWUzKSl9fSx7a2V5OlwidXBkYXRlTmFtZUNhcmRcIix2YWx1ZTpmdW5jdGlvbihlKXtKaShlKXx8KHRoaXMubmFtZUNhcmQ9ZSl9fSx7a2V5OlwidXBkYXRlTWVtYmVyQ3VzdG9tRmllbGRcIix2YWx1ZTpmdW5jdGlvbihlKXtlJiZmdSh0aGlzLm1lbWJlckN1c3RvbUZpZWxkLGUpfX1dKSxlfSgpLGp2PWZ1bmN0aW9uKGUpe2kocixlKTt2YXIgbj1fKHIpO2Z1bmN0aW9uIHIoZSl7dmFyIHQ7cmV0dXJuIG8odGhpcyxyKSwodD1uLmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkdyb3VwTWVtYmVyTW9kdWxlXCIsdC5ncm91cE1lbWJlckxpc3RNYXA9bmV3IE1hcCx0LmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oZ3YuUFJPRklMRV9VUERBVEVELHQuX29uUHJvZmlsZVVwZGF0ZWQsaCh0KSksdH1yZXR1cm4gYShyLFt7a2V5OlwiX29uUHJvZmlsZVVwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcyxuPWUuZGF0YSxvPWZ1bmN0aW9uKGUpe3ZhciBvPW5bZV07dC5ncm91cE1lbWJlckxpc3RNYXAuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5oYXMoby51c2VySUQpJiZlLmdldChvLnVzZXJJRCkudXBkYXRlTWVtYmVyKHtuaWNrOm8ubmljayxhdmF0YXI6by5hdmF0YXJ9KX0pKX0scj0wO3I8bi5sZW5ndGg7cisrKW8ocil9fSx7a2V5OlwiZGVsZXRlR3JvdXBNZW1iZXJMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZGVsZXRlKGUpfX0se2tleTpcImdldEdyb3VwTWVtYmVyTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLm9mZnNldCxyPXZvaWQgMD09PW8/MDpvLGE9ZS5jb3VudCxzPXZvaWQgMD09PWE/MTU6YSxpPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRHcm91cE1lbWJlckxpc3RcIiksdT1uZXcgbGcoZGgpO0tpLmxvZyhcIlwiLmNvbmNhdChpLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIG9mZnNldDpcIikuY29uY2F0KHIsXCIgY291bnQ6XCIpLmNvbmNhdChzKSk7dmFyIGM9W107cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnlkLHJlcXVlc3REYXRhOntncm91cElEOm4sb2Zmc2V0OnIsbGltaXQ6cz4xMDA/MTAwOnN9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89ZS5kYXRhLHI9by5tZW1iZXJzLGE9by5tZW1iZXJOdW07aWYoIXppKHIpfHwwPT09ci5sZW5ndGgpcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7dmFyIHM9dC5nZXRNb2R1bGUoJGMpO3JldHVybiBzLmhhc0xvY2FsR3JvdXAobikmJihzLmdldExvY2FsR3JvdXBQcm9maWxlKG4pLm1lbWJlck51bT1hKSxjPXQuX3VwZGF0ZUxvY2FsR3JvdXBNZW1iZXJNYXAobixyKSx0LmdldE1vZHVsZShqYykuZ2V0VXNlclByb2ZpbGUoe3VzZXJJRExpc3Q6ci5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKSx0YWdMaXN0OltjbS5OSUNLLGNtLkFWQVRBUl19KX0pKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz1lLmRhdGE7aWYoIXppKG8pfHwwPT09by5sZW5ndGgpcmV0dXJuIGptKHttZW1iZXJMaXN0OltdfSk7dmFyIGE9by5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt1c2VySUQ6ZS51c2VySUQsbmljazplLm5pY2ssYXZhdGFyOmUuYXZhdGFyfX0pKTtyZXR1cm4gdC5fdXBkYXRlTG9jYWxHcm91cE1lbWJlck1hcChuLGEpLHUuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiBvZmZzZXQ6XCIpLmNvbmNhdChyLFwiIGNvdW50OlwiKS5jb25jYXQocykpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChpLFwiIG9rLlwiKSksUG0oe21lbWJlckxpc3Q6Y30pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTt1LnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChpLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLFltKGUpfSkpfX0se2tleTpcImdldEdyb3VwTWVtYmVyUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsbz1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBNZW1iZXJQcm9maWxlXCIpLHI9bmV3IGxnKHBoKTtyLnNldE1lc3NhZ2UoZS51c2VySURMaXN0Lmxlbmd0aD41P1widXNlcklETGlzdC5sZW5ndGg6XCIuY29uY2F0KGUudXNlcklETGlzdC5sZW5ndGgpOlwidXNlcklETGlzdDpcIi5jb25jYXQoZS51c2VySURMaXN0KSksS2kubG9nKFwiXCIuY29uY2F0KG8sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUuZ3JvdXBJRCxcIiB1c2VySURMaXN0OlwiKS5jb25jYXQoZS51c2VySURMaXN0LmpvaW4oXCIsXCIpKSksZS51c2VySURMaXN0Lmxlbmd0aD41MCYmKGUudXNlcklETGlzdD1lLnVzZXJJRExpc3Quc2xpY2UoMCw1MCkpO3ZhciBhPWUuZ3JvdXBJRCxzPWUudXNlcklETGlzdDtyZXR1cm4gdGhpcy5fZ2V0R3JvdXBNZW1iZXJQcm9maWxlQWR2YW5jZSh0KHQoe30sZSkse30se3VzZXJJRExpc3Q6c30pKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGEubWVtYmVycztyZXR1cm4gemkodCkmJjAhPT10Lmxlbmd0aD8obi5fdXBkYXRlTG9jYWxHcm91cE1lbWJlck1hcChhLHQpLG4uZ2V0TW9kdWxlKGpjKS5nZXRVc2VyUHJvZmlsZSh7dXNlcklETGlzdDp0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudXNlcklEfSkpLHRhZ0xpc3Q6W2NtLk5JQ0ssY20uQVZBVEFSXX0pKTpqbShbXSl9KSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3VzZXJJRDplLnVzZXJJRCxuaWNrOmUubmljayxhdmF0YXI6ZS5hdmF0YXJ9fSkpO24uX3VwZGF0ZUxvY2FsR3JvdXBNZW1iZXJNYXAoYSx0KTt2YXIgbz1zLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIG4uaGFzTG9jYWxHcm91cE1lbWJlcihhLGUpfSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4uZ2V0TG9jYWxHcm91cE1lbWJlckluZm8oYSxlKX0pKTtyZXR1cm4gci5zZXROZXR3b3JrVHlwZShuLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLFBtKHttZW1iZXJMaXN0Om99KX0pKX19LHtrZXk6XCJhZGRHcm91cE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYWRkR3JvdXBNZW1iZXJcIiksbz1lLmdyb3VwSUQscj10aGlzLmdldE1vZHVsZSgkYykuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyksYT1yLnR5cGUscz1uZXcgbGcoZ2gpO2lmKHMuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG8sXCIgZ3JvdXBUeXBlOlwiKS5jb25jYXQoYSkpLG11KGEpKXt2YXIgaT1uZXcgS20oe2NvZGU6UGQuQ0FOTk9UX0FERF9NRU1CRVJfSU5fQVZDSEFUUk9PTSxtZXNzYWdlOkVwfSk7cmV0dXJuIHMuc2V0Q29kZShQZC5DQU5OT1RfQUREX01FTUJFUl9JTl9BVkNIQVRST09NKS5zZXRFcnJvcihFcCkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxZbShpKX1yZXR1cm4gZS51c2VySURMaXN0PWUudXNlcklETGlzdC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt1c2VySUQ6ZX19KSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KG8pKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpUZCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24obyl7dmFyIGE9by5kYXRhLm1lbWJlcnM7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpO3ZhciBpPWEuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUucmVzdWx0fSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudXNlcklEfSkpLHU9YS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZS5yZXN1bHR9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS51c2VySUR9KSksYz1hLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIDI9PT1lLnJlc3VsdH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKSxsPWEuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gND09PWUucmVzdWx0fSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudXNlcklEfSkpLGQ9XCJncm91cElEOlwiLmNvbmNhdChlLmdyb3VwSUQsXCIsIFwiKStcInN1Y2Nlc3NVc2VySURMaXN0OlwiLmNvbmNhdChpLFwiLCBcIikrXCJmYWlsdXJlVXNlcklETGlzdDpcIi5jb25jYXQodSxcIiwgXCIpK1wiZXhpc3RlZFVzZXJJRExpc3Q6XCIuY29uY2F0KGMsXCIsIFwiKStcIm92ZXJMaW1pdFVzZXJJRExpc3Q6XCIuY29uY2F0KGwpO3JldHVybiBzLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TW9yZU1lc3NhZ2UoZCkuZW5kKCksMD09PWkubGVuZ3RoP1BtKHtzdWNjZXNzVXNlcklETGlzdDppLGZhaWx1cmVVc2VySURMaXN0OnUsZXhpc3RlZFVzZXJJRExpc3Q6YyxvdmVyTGltaXRVc2VySURMaXN0Omx9KTooci5tZW1iZXJOdW0rPWkubGVuZ3RoLFBtKHtzdWNjZXNzVXNlcklETGlzdDppLGZhaWx1cmVVc2VySURMaXN0OnUsZXhpc3RlZFVzZXJJRExpc3Q6YyxvdmVyTGltaXRVc2VySURMaXN0OmwsZ3JvdXA6cn0pKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07cy5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJkZWxldGVHcm91cE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlR3JvdXBNZW1iZXJcIiksbz1lLmdyb3VwSUQscj1lLnVzZXJJRExpc3QsYT1uZXcgbGcoaGgpLHM9XCJncm91cElEOlwiLmNvbmNhdChvLFwiIFwiKS5jb25jYXQoci5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiLmNvbmNhdChyLmxlbmd0aCk6XCJ1c2VySURMaXN0OlwiLmNvbmNhdChyKSk7YS5zZXRNZXNzYWdlKHMpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChvLFwiIHVzZXJJRExpc3Q6XCIpLHIpO3ZhciBpPXRoaXMuZ2V0TW9kdWxlKCRjKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtyZXR1cm4gbXUoaS50eXBlKT9ZbShuZXcgS20oe2NvZGU6UGQuQ0FOTk9UX0tJQ0tfTUVNQkVSX0lOX0FWQ0hBVFJPT00sbWVzc2FnZTprcH0pKTp0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpEZCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSxpLm1lbWJlck51bS0tLHQuZGVsZXRlTG9jYWxHcm91cE1lbWJlcnMobyxyKSxQbSh7Z3JvdXA6aSx1c2VySURMaXN0OnJ9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJzZXRHcm91cE1lbWJlck11dGVUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUudXNlcklELHI9ZS5tdXRlVGltZSxhPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRHcm91cE1lbWJlck11dGVUaW1lXCIpO2lmKG89PT10aGlzLmdldE15VXNlcklEKCkpcmV0dXJuIFltKG5ldyBLbSh7Y29kZTpQZC5DQU5OT1RfTVVURV9TRUxGLG1lc3NhZ2U6UnB9KSk7S2kubG9nKFwiXCIuY29uY2F0KGEsXCIgZ3JvdXBJRDpcIikuY29uY2F0KG4sXCIgdXNlcklEOlwiKS5jb25jYXQobykpO3ZhciBzPW5ldyBsZyhmaCk7cmV0dXJuIHMuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgdXNlcklEOlwiKS5jb25jYXQobyxcIiBtdXRlVGltZTpcIikuY29uY2F0KHIpKSx0aGlzLl9tb2RpZnlHcm91cE1lbWJlckluZm8oe2dyb3VwSUQ6bix1c2VySUQ6byxtdXRlVGltZTpyfSkudGhlbigoZnVuY3Rpb24oZSl7cy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChhLFwiIG9rXCIpKTt2YXIgbz10LmdldE1vZHVsZSgkYyk7cmV0dXJuIFBtKHtncm91cDpvLmdldExvY2FsR3JvdXBQcm9maWxlKG4pLG1lbWJlcjplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO3Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KGEsXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJSb2xlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRHcm91cE1lbWJlclJvbGVcIiksbz1lLmdyb3VwSUQscj1lLnVzZXJJRCxhPWUucm9sZSxzPXRoaXMuZ2V0TW9kdWxlKCRjKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtpZihzLnNlbGZJbmZvLnJvbGUhPT1yby5HUlBfTUJSX1JPTEVfT1dORVIpcmV0dXJuIFltKG5ldyBLbSh7Y29kZTpQZC5OT1RfT1dORVIsbWVzc2FnZTpOcH0pKTtpZihbcm8uR1JQX1dPUksscm8uR1JQX0FWQ0hBVFJPT01dLmluY2x1ZGVzKHMudHlwZSkpcmV0dXJuIFltKG5ldyBLbSh7Y29kZTpQZC5DQU5OT1RfU0VUX01FTUJFUl9ST0xFX0lOX1dPUktfQU5EX0FWQ0hBVFJPT00sbWVzc2FnZTpDcH0pKTtpZihbcm8uR1JQX01CUl9ST0xFX0FETUlOLHJvLkdSUF9NQlJfUk9MRV9NRU1CRVJdLmluZGV4T2YoYSk8MClyZXR1cm4gWW0obmV3IEttKHtjb2RlOlBkLklOVkFMSURfTUVNQkVSX1JPTEUsbWVzc2FnZTpMcH0pKTtpZihyPT09dGhpcy5nZXRNeVVzZXJJRCgpKXJldHVybiBZbShuZXcgS20oe2NvZGU6UGQuQ0FOTk9UX1NFVF9TRUxGX01FTUJFUl9ST0xFLG1lc3NhZ2U6T3B9KSk7dmFyIGk9bmV3IGxnKG1oKTtyZXR1cm4gaS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobyxcIiB1c2VySUQ6XCIpLmNvbmNhdChyLFwiIHJvbGU6XCIpLmNvbmNhdChhKSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQocikpLHRoaXMuX21vZGlmeUdyb3VwTWVtYmVySW5mbyh7Z3JvdXBJRDpvLHVzZXJJRDpyLHJvbGU6YX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBpLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpLFBtKHtncm91cDpzLG1lbWJlcjplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2kuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJOYW1lQ2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0R3JvdXBNZW1iZXJOYW1lQ2FyZFwiKSxvPWUuZ3JvdXBJRCxyPWUudXNlcklELGE9dm9pZCAwPT09cj90aGlzLmdldE15VXNlcklEKCk6cixzPWUubmFtZUNhcmQ7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQoYSkpO3ZhciBpPW5ldyBsZyhfaCk7cmV0dXJuIGkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQoYSxcIiBuYW1lQ2FyZDpcIikuY29uY2F0KHMpKSx0aGlzLl9tb2RpZnlHcm91cE1lbWJlckluZm8oe2dyb3VwSUQ6byx1c2VySUQ6YSxuYW1lQ2FyZDpzfSkudGhlbigoZnVuY3Rpb24oZSl7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpLGkuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTt2YXIgcj10LmdldE1vZHVsZSgkYykuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7cmV0dXJuIGE9PT10LmdldE15VXNlcklEKCkmJnImJnIuc2V0U2VsZk5hbWVDYXJkKHMpLFBtKHtncm91cDpyLG1lbWJlcjplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2kuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZFwiKSxvPWUuZ3JvdXBJRCxyPWUudXNlcklELGE9dm9pZCAwPT09cj90aGlzLmdldE15VXNlcklEKCk6cixzPWUubWVtYmVyQ3VzdG9tRmllbGQ7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQoYSkpO3ZhciBpPW5ldyBsZyh2aCk7cmV0dXJuIGkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQoYSxcIiBtZW1iZXJDdXN0b21GaWVsZDpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KHMpKSksdGhpcy5fbW9kaWZ5R3JvdXBNZW1iZXJJbmZvKHtncm91cElEOm8sdXNlcklEOmEsbWVtYmVyQ3VzdG9tRmllbGQ6c30pLnRoZW4oKGZ1bmN0aW9uKGUpe2kuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSk7dmFyIHI9dC5nZXRNb2R1bGUoJGMpLmdldExvY2FsR3JvdXBQcm9maWxlKG8pO3JldHVybiBQbSh7Z3JvdXA6cixtZW1iZXI6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtpLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLFltKGUpfSkpfX0se2tleTpcInNldE1lc3NhZ2VSZW1pbmRUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRNZXNzYWdlUmVtaW5kVHlwZVwiKSxvPW5ldyBsZyhKZyk7by5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZS5ncm91cElEKSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUuZ3JvdXBJRCkpO3ZhciByPWUuZ3JvdXBJRCxhPWUubWVzc2FnZVJlbWluZFR5cGU7cmV0dXJuIHRoaXMuX21vZGlmeUdyb3VwTWVtYmVySW5mbyh7Z3JvdXBJRDpyLG1lc3NhZ2VSZW1pbmRUeXBlOmEsdXNlcklEOnRoaXMuZ2V0TXlVc2VySUQoKX0pLnRoZW4oKGZ1bmN0aW9uKCl7by5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBncm91cElEOlwiKS5jb25jYXQoZS5ncm91cElEKSk7dmFyIHI9dC5nZXRNb2R1bGUoJGMpLmdldExvY2FsR3JvdXBQcm9maWxlKGUuZ3JvdXBJRCk7cmV0dXJuIHImJihyLnNlbGZJbmZvLm1lc3NhZ2VSZW1pbmRUeXBlPWEpLFBtKHtncm91cDpyfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwiX21vZGlmeUdyb3VwTWVtYmVySW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLnVzZXJJRDtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6U2QscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKCl7aWYodC5oYXNMb2NhbEdyb3VwTWVtYmVyKG4sbykpe3ZhciByPXQuZ2V0TG9jYWxHcm91cE1lbWJlckluZm8obixvKTtyZXR1cm4gSmkoZS5tdXRlVGltZSl8fHIudXBkYXRlTXV0ZVVudGlsKGUubXV0ZVRpbWUpLEppKGUucm9sZSl8fHIudXBkYXRlUm9sZShlLnJvbGUpLEppKGUubmFtZUNhcmQpfHxyLnVwZGF0ZU5hbWVDYXJkKGUubmFtZUNhcmQpLEppKGUubWVtYmVyQ3VzdG9tRmllbGQpfHxyLnVwZGF0ZU1lbWJlckN1c3RvbUZpZWxkKGUubWVtYmVyQ3VzdG9tRmllbGQpLHJ9cmV0dXJuIHQuZ2V0R3JvdXBNZW1iZXJQcm9maWxlKHtncm91cElEOm4sdXNlcklETGlzdDpbb119KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gbShlLmRhdGEubWVtYmVyTGlzdCwxKVswXX0pKX0pKX19LHtrZXk6XCJfZ2V0R3JvdXBNZW1iZXJQcm9maWxlQWR2YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpJZCxyZXF1ZXN0RGF0YTp0KHQoe30sZSkse30se21lbWJlckluZm9GaWx0ZXI6ZS5tZW1iZXJJbmZvRmlsdGVyP2UubWVtYmVySW5mb0ZpbHRlcjpbXCJSb2xlXCIsXCJKb2luVGltZVwiLFwiTmFtZUNhcmRcIixcIlNodXRVcFVudGlsXCJdfSl9KX19LHtrZXk6XCJfdXBkYXRlTG9jYWxHcm91cE1lbWJlck1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztyZXR1cm4gemkodCkmJjAhPT10Lmxlbmd0aD90Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIG4uaGFzTG9jYWxHcm91cE1lbWJlcihlLHQudXNlcklEKT9uLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKGUsdC51c2VySUQpLnVwZGF0ZU1lbWJlcih0KTpuLnNldExvY2FsR3JvdXBNZW1iZXIoZSxuZXcgSHYodCkpLG4uZ2V0TG9jYWxHcm91cE1lbWJlckluZm8oZSx0LnVzZXJJRCl9KSk6W119fSx7a2V5OlwiZGVsZXRlTG9jYWxHcm91cE1lbWJlcnNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmdldChlKTtuJiZ0LmZvckVhY2goKGZ1bmN0aW9uKGUpe24uZGVsZXRlKGUpfSkpfX0se2tleTpcImdldExvY2FsR3JvdXBNZW1iZXJJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5ncm91cE1lbWJlckxpc3RNYXAuaGFzKGUpP3RoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmdldChlKS5nZXQodCk6bnVsbH19LHtrZXk6XCJzZXRMb2NhbEdyb3VwTWVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5oYXMoZSkpdGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZ2V0KGUpLnNldCh0LnVzZXJJRCx0KTtlbHNle3ZhciBuPShuZXcgTWFwKS5zZXQodC51c2VySUQsdCk7dGhpcy5ncm91cE1lbWJlckxpc3RNYXAuc2V0KGUsbil9fX0se2tleTpcImdldExvY2FsR3JvdXBNZW1iZXJMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmdldChlKX19LHtrZXk6XCJoYXNMb2NhbEdyb3VwTWVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5ncm91cE1lbWJlckxpc3RNYXAuaGFzKGUpJiZ0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSkuaGFzKHQpfX0se2tleTpcImhhc0xvY2FsR3JvdXBNZW1iZXJNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ncm91cE1lbWJlckxpc3RNYXAuaGFzKGUpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5jbGVhcigpfX1dKSxyfShkbCksWXY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl91c2VyTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiUHJvZmlsZUhhbmRsZXJcIix0aGlzLlRBRz1cInByb2ZpbGVcIix0aGlzLmFjY291bnRQcm9maWxlTWFwPW5ldyBNYXAsdGhpcy5leHBpcmF0aW9uVGltZT04NjRlNX1yZXR1cm4gYShlLFt7a2V5Olwic2V0RXhwaXJhdGlvblRpbWVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmV4cGlyYXRpb25UaW1lPWV9fSx7a2V5OlwiZ2V0VXNlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS51c2VySURMaXN0O2UuZnJvbUFjY291bnQ9dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKSxuLmxlbmd0aD4xMDAmJihLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRVc2VyUHJvZmlsZSDojrflj5bnlKjmiLfotYTmlpnkurrmlbDkuI3og73otoXov4cxMDDkurpcIikpLG4ubGVuZ3RoPTEwMCk7Zm9yKHZhciBvLHI9W10sYT1bXSxzPTAsaT1uLmxlbmd0aDtzPGk7cysrKW89bltzXSx0aGlzLl91c2VyTW9kdWxlLmlzTXlGcmllbmQobykmJnRoaXMuX2NvbnRhaW5zQWNjb3VudChvKT9hLnB1c2godGhpcy5fZ2V0UHJvZmlsZUZyb21NYXAobykpOnIucHVzaChvKTtpZigwPT09ci5sZW5ndGgpcmV0dXJuIGptKGEpO2UudG9BY2NvdW50PXI7dmFyIHU9ZS5iRnJvbUdldE15UHJvZmlsZXx8ITEsYz1bXTtlLnRvQWNjb3VudC5mb3JFYWNoKChmdW5jdGlvbihlKXtjLnB1c2goe3RvQWNjb3VudDplLHN0YW5kYXJkU2VxdWVuY2U6MCxjdXN0b21TZXF1ZW5jZTowfSl9KSksZS51c2VySXRlbT1jO3ZhciBsPW5ldyBsZyhEaCk7cmV0dXJuIGwuc2V0TWVzc2FnZShuLmxlbmd0aD41P1widXNlcklETGlzdC5sZW5ndGg6XCIuY29uY2F0KG4ubGVuZ3RoKTpcInVzZXJJRExpc3Q6XCIuY29uY2F0KG4pKSx0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpNbCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oZSl7bC5zZXROZXR3b3JrVHlwZSh0Ll91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmluZm8oXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmdldFVzZXJQcm9maWxlIG9rXCIpKTt2YXIgbj10Ll9oYW5kbGVSZXNwb25zZShlKS5jb25jYXQoYSk7cmV0dXJuIFBtKHU/blswXTpuKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07bC5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmdldFVzZXJQcm9maWxlIGZhaWxlZC4gZXJyb3I6XCIpLGUpLFltKGUpfSkpfX0se2tleTpcImdldE15UHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKTtpZihLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldE15UHJvZmlsZSBteUFjY291bnQ6XCIpLmNvbmNhdChlKSksdGhpcy5fZmlsbE1hcCgpLHRoaXMuX2NvbnRhaW5zQWNjb3VudChlKSl7dmFyIHQ9dGhpcy5fZ2V0UHJvZmlsZUZyb21NYXAoZSk7cmV0dXJuIEtpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRNeVByb2ZpbGUgZnJvbSBjYWNoZSwgbXlQcm9maWxlOlwiKStKU09OLnN0cmluZ2lmeSh0KSksam0odCl9cmV0dXJuIHRoaXMuZ2V0VXNlclByb2ZpbGUoe2Zyb21BY2NvdW50OmUsdXNlcklETGlzdDpbZV0sYkZyb21HZXRNeVByb2ZpbGU6ITB9KX19LHtrZXk6XCJfaGFuZGxlUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixvPW91Lm5vdygpLHI9ZS5kYXRhLnVzZXJQcm9maWxlSXRlbSxhPVtdLHM9MCxpPXIubGVuZ3RoO3M8aTtzKyspXCJAVExTI05PVF9GT1VORFwiIT09cltzXS50byYmXCJcIiE9PXJbc10udG8mJih0PXJbc10udG8sbj10aGlzLl91cGRhdGVNYXAodCx0aGlzLl9nZXRMYXRlc3RQcm9maWxlRnJvbVJlc3BvbnNlKHQscltzXS5wcm9maWxlSXRlbSkpLGEucHVzaChuKSk7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2hhbmRsZVJlc3BvbnNlIGNvc3QgXCIpLmNvbmNhdChvdS5ub3coKS1vLFwiIG1zXCIpKSxhfX0se2tleTpcIl9nZXRMYXRlc3RQcm9maWxlRnJvbVJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtpZihuLnVzZXJJRD1lLG4ucHJvZmlsZUN1c3RvbUZpZWxkPVtdLCFPdSh0KSlmb3IodmFyIG89MCxyPXQubGVuZ3RoO288cjtvKyspaWYodFtvXS50YWcuaW5kZXhPZihcIlRhZ19Qcm9maWxlX0N1c3RvbVwiKT4tMSluLnByb2ZpbGVDdXN0b21GaWVsZC5wdXNoKHtrZXk6dFtvXS50YWcsdmFsdWU6dFtvXS52YWx1ZX0pO2Vsc2Ugc3dpdGNoKHRbb10udGFnKXtjYXNlIGNtLk5JQ0s6bi5uaWNrPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBjbS5HRU5ERVI6bi5nZW5kZXI9dFtvXS52YWx1ZTticmVhaztjYXNlIGNtLkJJUlRIREFZOm4uYmlydGhkYXk9dFtvXS52YWx1ZTticmVhaztjYXNlIGNtLkxPQ0FUSU9OOm4ubG9jYXRpb249dFtvXS52YWx1ZTticmVhaztjYXNlIGNtLlNFTEZTSUdOQVRVUkU6bi5zZWxmU2lnbmF0dXJlPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBjbS5BTExPV1RZUEU6bi5hbGxvd1R5cGU9dFtvXS52YWx1ZTticmVhaztjYXNlIGNtLkxBTkdVQUdFOm4ubGFuZ3VhZ2U9dFtvXS52YWx1ZTticmVhaztjYXNlIGNtLkFWQVRBUjpuLmF2YXRhcj10W29dLnZhbHVlO2JyZWFrO2Nhc2UgY20uTUVTU0FHRVNFVFRJTkdTOm4ubWVzc2FnZVNldHRpbmdzPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBjbS5BRE1JTkZPUkJJRFRZUEU6bi5hZG1pbkZvcmJpZFR5cGU9dFtvXS52YWx1ZTticmVhaztjYXNlIGNtLkxFVkVMOm4ubGV2ZWw9dFtvXS52YWx1ZTticmVhaztjYXNlIGNtLlJPTEU6bi5yb2xlPXRbb10udmFsdWU7YnJlYWs7ZGVmYXVsdDpLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5faGFuZGxlUmVzcG9uc2UgdW5rbm93biB0YWc6XCIpLHRbb10udGFnLHRbb10udmFsdWUpfXJldHVybiBufX0se2tleTpcInVwZGF0ZU15UHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIudXBkYXRlTXlQcm9maWxlXCIpLG89bmV3IGxnKFNoKTtvLnNldE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoZSkpO3ZhciByPShuZXcgSXYpLnZhbGlkYXRlKGUpO2lmKCFyLnZhbGlkKXJldHVybiBvLnNldENvZGUoUGQuVVBEQVRFX1BST0ZJTEVfSU5WQUxJRF9QQVJBTSkuc2V0TW9yZU1lc3NhZ2UoXCJcIi5jb25jYXQobixcIiBpbmZvOlwiKS5jb25jYXQoci50aXBzKSkuc2V0TmV0d29ya1R5cGUodGhpcy5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGluZm86XCIpLmNvbmNhdChyLnRpcHMsXCLvvIzor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI3VwZGF0ZU15UHJvZmlsZVwiKSksWW0oe2NvZGU6UGQuVVBEQVRFX1BST0ZJTEVfSU5WQUxJRF9QQVJBTSxtZXNzYWdlOkZwfSk7dmFyIGE9W107Zm9yKHZhciBzIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscykmJihcInByb2ZpbGVDdXN0b21GaWVsZFwiPT09cz9lLnByb2ZpbGVDdXN0b21GaWVsZC5mb3JFYWNoKChmdW5jdGlvbihlKXthLnB1c2goe3RhZzplLmtleSx2YWx1ZTplLnZhbHVlfSl9KSk6YS5wdXNoKHt0YWc6Y21bcy50b1VwcGVyQ2FzZSgpXSx2YWx1ZTplW3NdfSkpO3JldHVybiAwPT09YS5sZW5ndGg/KG8uc2V0Q29kZShQZC5VUERBVEVfUFJPRklMRV9OT19LRVkpLnNldE1vcmVNZXNzYWdlKHFwKS5zZXROZXR3b3JrVHlwZSh0aGlzLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgaW5mbzpcIikuY29uY2F0KHFwLFwi77yM6K+35Y+C6ICDIGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9TREsuaHRtbCN1cGRhdGVNeVByb2ZpbGVcIikpLFltKHtjb2RlOlBkLlVQREFURV9QUk9GSUxFX05PX0tFWSxtZXNzYWdlOnFwfSkpOnRoaXMuX3VzZXJNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnlsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpLHByb2ZpbGVJdGVtOmF9fSkudGhlbigoZnVuY3Rpb24ocil7by5zZXROZXR3b3JrVHlwZSh0Ll91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmluZm8oXCJcIi5jb25jYXQobixcIiBva1wiKSk7dmFyIGE9dC5fdXBkYXRlTWFwKHQuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCksZSk7cmV0dXJuIHQuX3VzZXJNb2R1bGUuZW1pdE91dGVyRXZlbnQob28uUFJPRklMRV9VUERBVEVELFthXSksam0oYSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll91c2VyTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5Olwib25Qcm9maWxlTW9kaWZpZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGFMaXN0O2lmKCFPdSh0KSl7dmFyIG4sbyxyPXQubGVuZ3RoO0tpLmluZm8oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUHJvZmlsZU1vZGlmaWVkIGNvdW50OlwiKS5jb25jYXQocikpO2Zvcih2YXIgYT1bXSxzPXRoaXMuX3VzZXJNb2R1bGUuZ2V0TW9kdWxlKEpjKSxpPTA7aTxyO2krKyluPXRbaV0udXNlcklELG89dGhpcy5fdXBkYXRlTWFwKG4sdGhpcy5fZ2V0TGF0ZXN0UHJvZmlsZUZyb21SZXNwb25zZShuLHRbaV0ucHJvZmlsZUxpc3QpKSxhLnB1c2gobyksbj09PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCkmJnMub25NeVByb2ZpbGVNb2RpZmllZCh7bGF0ZXN0TmljazpvLm5pY2ssbGF0ZXN0QXZhdGFyOm8uYXZhdGFyfSk7dGhpcy5fdXNlck1vZHVsZS5lbWl0SW5uZXJFdmVudChndi5QUk9GSUxFX1VQREFURUQsYSksdGhpcy5fdXNlck1vZHVsZS5lbWl0T3V0ZXJFdmVudChvby5QUk9GSUxFX1VQREFURUQsYSl9fX0se2tleTpcIl9maWxsTWFwXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5hY2NvdW50UHJvZmlsZU1hcC5zaXplKXtmb3IodmFyIGU9dGhpcy5fZ2V0Q2FjaGVkUHJvZmlsZXMoKSx0PURhdGUubm93KCksbj0wLG89ZS5sZW5ndGg7bjxvO24rKyl0LWVbbl0ubGFzdFVwZGF0ZWRUaW1lPHRoaXMuZXhwaXJhdGlvblRpbWUmJnRoaXMuYWNjb3VudFByb2ZpbGVNYXAuc2V0KGVbbl0udXNlcklELGVbbl0pO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2ZpbGxNYXAgZnJvbSBjYWNoZSwgbWFwLnNpemU6XCIpLmNvbmNhdCh0aGlzLmFjY291bnRQcm9maWxlTWFwLnNpemUpKX19fSx7a2V5OlwiX3VwZGF0ZU1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbz1EYXRlLm5vdygpO3JldHVybiB0aGlzLl9jb250YWluc0FjY291bnQoZSk/KG49dGhpcy5fZ2V0UHJvZmlsZUZyb21NYXAoZSksdC5wcm9maWxlQ3VzdG9tRmllbGQmJmZ1KG4ucHJvZmlsZUN1c3RvbUZpZWxkLHQucHJvZmlsZUN1c3RvbUZpZWxkKSxydShuLHQsW1wicHJvZmlsZUN1c3RvbUZpZWxkXCJdKSxuLmxhc3RVcGRhdGVkVGltZT1vKToobj1uZXcgSXYodCksKHRoaXMuX3VzZXJNb2R1bGUuaXNNeUZyaWVuZChlKXx8ZT09PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCkpJiYobi5sYXN0VXBkYXRlZFRpbWU9byx0aGlzLmFjY291bnRQcm9maWxlTWFwLnNldChlLG4pKSksdGhpcy5fZmx1c2hNYXAoZT09PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCkpLG59fSx7a2V5OlwiX2ZsdXNoTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dih0aGlzLmFjY291bnRQcm9maWxlTWFwLnZhbHVlcygpKSxuPXRoaXMuX3VzZXJNb2R1bGUuZ2V0U3RvcmFnZU1vZHVsZSgpO0tpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZmx1c2hNYXAgbGVuZ3RoOlwiKS5jb25jYXQodC5sZW5ndGgsXCIgZmx1c2hBdE9uY2U6XCIpLmNvbmNhdChlKSksbi5zZXRJdGVtKHRoaXMuVEFHLHQsZSl9fSx7a2V5OlwiX2NvbnRhaW5zQWNjb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFjY291bnRQcm9maWxlTWFwLmhhcyhlKX19LHtrZXk6XCJfZ2V0UHJvZmlsZUZyb21NYXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hY2NvdW50UHJvZmlsZU1hcC5nZXQoZSl9fSx7a2V5OlwiX2dldENhY2hlZFByb2ZpbGVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl91c2VyTW9kdWxlLmdldFN0b3JhZ2VNb2R1bGUoKS5nZXRJdGVtKHRoaXMuVEFHKTtyZXR1cm4gT3UoZSk/W106ZX19LHtrZXk6XCJvbkNvbnZlcnNhdGlvbnNQcm9maWxlVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLG8scj1bXSxhPTAscz1lLmxlbmd0aDthPHM7YSsrKW49KHQ9ZVthXSkudXNlcklELHRoaXMuX3VzZXJNb2R1bGUuaXNNeUZyaWVuZChuKXx8KHRoaXMuX2NvbnRhaW5zQWNjb3VudChuKT8obz10aGlzLl9nZXRQcm9maWxlRnJvbU1hcChuKSxydShvLHQpPjAmJnIucHVzaChuKSk6ci5wdXNoKHQudXNlcklEKSk7MCE9PXIubGVuZ3RoJiYoS2kuaW5mbyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Db252ZXJzYXRpb25zUHJvZmlsZVVwZGF0ZWQgdG9BY2NvdW50TGlzdDpcIikuY29uY2F0KHIpKSx0aGlzLmdldFVzZXJQcm9maWxlKHt1c2VySURMaXN0OnJ9KSl9fSx7a2V5OlwiZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5fY29udGFpbnNBY2NvdW50KGUpKXt2YXIgdD10aGlzLl9nZXRQcm9maWxlRnJvbU1hcChlKTtyZXR1cm57bmljazp0Lm5pY2ssYXZhdGFyOnQuYXZhdGFyfX1yZXR1cm57bmljazpcIlwiLGF2YXRhcjpcIlwifX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZmx1c2hNYXAoITApLHRoaXMuYWNjb3VudFByb2ZpbGVNYXAuY2xlYXIoKX19XSksZX0oKSwkdj1mdW5jdGlvbiBlKHQpe28odGhpcyxlKSxPdXx8KHRoaXMudXNlcklEPXQudXNlcklEfHxcIlwiLHRoaXMudGltZVN0YW1wPXQudGltZVN0YW1wfHwwKX0sV3Y9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl91c2VyTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiQmxhY2tsaXN0SGFuZGxlclwiLHRoaXMuX2JsYWNrbGlzdE1hcD1uZXcgTWFwLHRoaXMuc3RhcnRJbmRleD0wLHRoaXMubWF4TGltaXRlZD0xMDAsdGhpcy5jdXJyZW50U2VxdWVuY2U9MH1yZXR1cm4gYShlLFt7a2V5OlwiZ2V0TG9jYWxCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB2KHRoaXMuX2JsYWNrbGlzdE1hcC5rZXlzKCkpfX0se2tleTpcImdldEJsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRCbGFja2xpc3RcIiksbj17ZnJvbUFjY291bnQ6dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKSxtYXhMaW1pdGVkOnRoaXMubWF4TGltaXRlZCxzdGFydEluZGV4OjAsbGFzdFNlcXVlbmNlOnRoaXMuY3VycmVudFNlcXVlbmNlfSxvPW5ldyBsZyhFaCk7cmV0dXJuIHRoaXMuX3VzZXJNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOklsLHJlcXVlc3REYXRhOm59KS50aGVuKChmdW5jdGlvbihuKXt2YXIgcj1uLmRhdGEsYT1yLmJsYWNrTGlzdEl0ZW0scz1yLmN1cnJlbnRTZXF1ZW5jZSxpPU91KGEpPzA6YS5sZW5ndGg7by5zZXROZXR3b3JrVHlwZShlLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJibGFja0xpc3QgY291bnQ6XCIuY29uY2F0KGkpKS5lbmQoKSxLaS5pbmZvKFwiXCIuY29uY2F0KHQsXCIgb2tcIikpLGUuY3VycmVudFNlcXVlbmNlPXMsZS5faGFuZGxlUmVzcG9uc2UoYSwhMCksZS5fdXNlck1vZHVsZS5lbWl0T3V0ZXJFdmVudChvby5CTEFDS0xJU1RfVVBEQVRFRCx2KGUuX2JsYWNrbGlzdE1hcC5rZXlzKCkpKX0pKS5jYXRjaCgoZnVuY3Rpb24obil7cmV0dXJuIGUuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9bShlLDIpLHI9dFswXSxhPXRbMV07by5zZXRFcnJvcihuLHIsYSkuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQodCxcIiBmYWlsZWQuIGVycm9yOlwiKSxuKSxZbShuKX0pKX19LHtrZXk6XCJhZGRCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZEJsYWNrbGlzdFwiKSxvPW5ldyBsZyhBaCk7aWYoIXppKGUudXNlcklETGlzdCkpcmV0dXJuIG8uc2V0Q29kZShQZC5BRERfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU0pLnNldE1lc3NhZ2UoeHApLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBvcHRpb25zLnVzZXJJRExpc3Qg5b+F6ZyA5piv5pWw57uEXCIpKSxZbSh7Y29kZTpQZC5BRERfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU0sbWVzc2FnZTp4cH0pO3ZhciByPXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCk7cmV0dXJuIDE9PT1lLnVzZXJJRExpc3QubGVuZ3RoJiZlLnVzZXJJRExpc3RbMF09PT1yPyhvLnNldENvZGUoUGQuQ0FOTk9UX0FERF9TRUxGX1RPX0JMQUNLTElTVCkuc2V0TWVzc2FnZShLcCkuc2V0TmV0d29ya1R5cGUodGhpcy5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIOS4jeiDveaKiuiHquW3seaLiem7kVwiKSksWW0oe2NvZGU6UGQuQ0FOTk9UX0FERF9TRUxGX1RPX0JMQUNLTElTVCxtZXNzYWdlOktwfSkpOihlLnVzZXJJRExpc3QuaW5jbHVkZXMocikmJihlLnVzZXJJRExpc3Q9ZS51c2VySURMaXN0LmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT1yfSkpLEtpLndhcm4oXCJcIi5jb25jYXQobixcIiDkuI3og73mioroh6rlt7Hmi4npu5HvvIzlt7Lov4fmu6RcIikpKSxlLmZyb21BY2NvdW50PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCksZS50b0FjY291bnQ9ZS51c2VySURMaXN0LHRoaXMuX3VzZXJNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlRsLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbihyKXtyZXR1cm4gby5zZXROZXR3b3JrVHlwZSh0Ll91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoZS51c2VySURMaXN0Lmxlbmd0aD41P1widXNlcklETGlzdC5sZW5ndGg6XCIuY29uY2F0KGUudXNlcklETGlzdC5sZW5ndGgpOlwidXNlcklETGlzdDpcIi5jb25jYXQoZS51c2VySURMaXN0KSkuZW5kKCksS2kuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx0Ll9oYW5kbGVSZXNwb25zZShyLnJlc3VsdEl0ZW0sITApLFBtKHYodC5fYmxhY2tsaXN0TWFwLmtleXMoKSkpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fdXNlck1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLFltKGUpfSkpKX19LHtrZXk6XCJfaGFuZGxlUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCFPdShlKSlmb3IodmFyIG4sbyxyLGE9MCxzPWUubGVuZ3RoO2E8czthKyspbz1lW2FdLnRvLHI9ZVthXS5yZXN1bHRDb2RlLChKaShyKXx8MD09PXIpJiYodD8oKG49dGhpcy5fYmxhY2tsaXN0TWFwLmhhcyhvKT90aGlzLl9ibGFja2xpc3RNYXAuZ2V0KG8pOm5ldyAkdikudXNlcklEPW8sIU91KGVbYV0uYWRkQmxhY2tUaW1lU3RhbXApJiYobi50aW1lU3RhbXA9ZVthXS5hZGRCbGFja1RpbWVTdGFtcCksdGhpcy5fYmxhY2tsaXN0TWFwLnNldChvLG4pKTp0aGlzLl9ibGFja2xpc3RNYXAuaGFzKG8pJiYobj10aGlzLl9ibGFja2xpc3RNYXAuZ2V0KG8pLHRoaXMuX2JsYWNrbGlzdE1hcC5kZWxldGUobykpKTtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9oYW5kbGVSZXNwb25zZSB0b3RhbDpcIikuY29uY2F0KHRoaXMuX2JsYWNrbGlzdE1hcC5zaXplLFwiIGJBZGQ6XCIpLmNvbmNhdCh0KSl9fSx7a2V5OlwiZGVsZXRlQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVCbGFja2xpc3RcIiksbz1uZXcgbGcoa2gpO3JldHVybiB6aShlLnVzZXJJRExpc3QpPyhlLmZyb21BY2NvdW50PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCksZS50b0FjY291bnQ9ZS51c2VySURMaXN0LHRoaXMuX3VzZXJNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkRsLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbihyKXtyZXR1cm4gby5zZXROZXR3b3JrVHlwZSh0Ll91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoZS51c2VySURMaXN0Lmxlbmd0aD41P1widXNlcklETGlzdC5sZW5ndGg6XCIuY29uY2F0KGUudXNlcklETGlzdC5sZW5ndGgpOlwidXNlcklETGlzdDpcIi5jb25jYXQoZS51c2VySURMaXN0KSkuZW5kKCksS2kuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx0Ll9oYW5kbGVSZXNwb25zZShyLmRhdGEucmVzdWx0SXRlbSwhMSksUG0odih0Ll9ibGFja2xpc3RNYXAua2V5cygpKSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll91c2VyTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSkpOihvLnNldENvZGUoUGQuREVMX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNKS5zZXRNZXNzYWdlKFZwKS5zZXROZXR3b3JrVHlwZSh0aGlzLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgb3B0aW9ucy51c2VySURMaXN0IOW/hemcgOaYr+aVsOe7hFwiKSksWW0oe2NvZGU6UGQuREVMX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNLG1lc3NhZ2U6VnB9KSl9fSx7a2V5Olwib25BY2NvdW50RGVsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPVtdLG89MCxyPWUubGVuZ3RoO288cjtvKyspdD1lW29dLHRoaXMuX2JsYWNrbGlzdE1hcC5oYXModCkmJih0aGlzLl9ibGFja2xpc3RNYXAuZGVsZXRlKHQpLG4ucHVzaCh0KSk7bi5sZW5ndGg+MCYmKEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25BY2NvdW50RGVsZXRlZCBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoLFwiIHVzZXJJRExpc3Q6XCIpLG4pLHRoaXMuX3VzZXJNb2R1bGUuZW1pdE91dGVyRXZlbnQob28uQkxBQ0tMSVNUX1VQREFURUQsdih0aGlzLl9ibGFja2xpc3RNYXAua2V5cygpKSkpfX0se2tleTpcIm9uQWNjb3VudEFkZGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49W10sbz0wLHI9ZS5sZW5ndGg7bzxyO28rKyl0PWVbb10sdGhpcy5fYmxhY2tsaXN0TWFwLmhhcyh0KXx8KHRoaXMuX2JsYWNrbGlzdE1hcC5zZXQodCxuZXcgJHYoe3VzZXJJRDp0fSkpLG4ucHVzaCh0KSk7bi5sZW5ndGg+MCYmKEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25BY2NvdW50QWRkZWQgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCxcIiB1c2VySURMaXN0OlwiKSxuKSx0aGlzLl91c2VyTW9kdWxlLmVtaXRPdXRlckV2ZW50KG9vLkJMQUNLTElTVF9VUERBVEVELHYodGhpcy5fYmxhY2tsaXN0TWFwLmtleXMoKSkpKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYmxhY2tsaXN0TWFwLmNsZWFyKCksdGhpcy5zdGFydEluZGV4PTAsdGhpcy5tYXhMaW1pdGVkPTEwMCx0aGlzLmN1cnJlbnRTZXF1ZW5jZT0wfX1dKSxlfSgpLHp2PWZ1bmN0aW9uKGUpe2kobixlKTt2YXIgdD1fKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHI7cmV0dXJuIG8odGhpcyxuKSwocj10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlVzZXJNb2R1bGVcIixyLl9wcm9maWxlSGFuZGxlcj1uZXcgWXYoaChyKSksci5fYmxhY2tsaXN0SGFuZGxlcj1uZXcgV3YoaChyKSksci5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKGd2LkNPTlRFWFRfQTJLRVlfQU5EX1RJTllJRF9VUERBVEVELHIub25Db250ZXh0VXBkYXRlZCxoKHIpKSxyfXJldHVybiBhKG4sW3trZXk6XCJvbkNvbnRleHRVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcHJvZmlsZUhhbmRsZXIuZ2V0TXlQcm9maWxlKCksdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5nZXRCbGFja2xpc3QoKX19LHtrZXk6XCJvblByb2ZpbGVNb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Byb2ZpbGVIYW5kbGVyLm9uUHJvZmlsZU1vZGlmaWVkKGUpfX0se2tleTpcIm9uUmVsYXRpb25DaGFpbk1vZGlmaWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdDtpZighT3UodCkpe3ZhciBuPVtdO3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5ibGFja0xpc3REZWxBY2NvdW50JiZuLnB1c2guYXBwbHkobix2KGUuYmxhY2tMaXN0RGVsQWNjb3VudCkpfSkpLG4ubGVuZ3RoPjAmJnRoaXMuX2JsYWNrbGlzdEhhbmRsZXIub25BY2NvdW50RGVsZXRlZChuKTt2YXIgbz1bXTt0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuYmxhY2tMaXN0QWRkQWNjb3VudCYmby5wdXNoLmFwcGx5KG8sdihlLmJsYWNrTGlzdEFkZEFjY291bnQpKX0pKSxvLmxlbmd0aD4wJiZ0aGlzLl9ibGFja2xpc3RIYW5kbGVyLm9uQWNjb3VudEFkZGVkKG8pfX19LHtrZXk6XCJvbkNvbnZlcnNhdGlvbnNQcm9maWxlVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Byb2ZpbGVIYW5kbGVyLm9uQ29udmVyc2F0aW9uc1Byb2ZpbGVVcGRhdGVkKGUpfX0se2tleTpcImdldE15QWNjb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TXlVc2VySUQoKX19LHtrZXk6XCJnZXRNeVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9maWxlSGFuZGxlci5nZXRNeVByb2ZpbGUoKX19LHtrZXk6XCJnZXRTdG9yYWdlTW9kdWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoUWMpfX0se2tleTpcImlzTXlGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE1vZHVsZShXYyk7cmV0dXJuISF0JiZ0LmlzTXlGcmllbmQoZSl9fSx7a2V5OlwiZ2V0VXNlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcHJvZmlsZUhhbmRsZXIuZ2V0VXNlclByb2ZpbGUoZSl9fSx7a2V5OlwidXBkYXRlTXlQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Byb2ZpbGVIYW5kbGVyLnVwZGF0ZU15UHJvZmlsZShlKX19LHtrZXk6XCJnZXROaWNrQW5kQXZhdGFyQnlVc2VySURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcHJvZmlsZUhhbmRsZXIuZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKGUpfX0se2tleTpcImdldExvY2FsQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9ibGFja2xpc3RIYW5kbGVyLmdldExvY2FsQmxhY2tsaXN0KCk7cmV0dXJuIGptKGUpfX0se2tleTpcImFkZEJsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ibGFja2xpc3RIYW5kbGVyLmFkZEJsYWNrbGlzdChlKX19LHtrZXk6XCJkZWxldGVCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5kZWxldGVCbGFja2xpc3QoZSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX3Byb2ZpbGVIYW5kbGVyLnJlc2V0KCksdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5yZXNldCgpfX1dKSxufShkbCksSnY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7byh0aGlzLGUpLHRoaXMuX21vZHVsZU1hbmFnZXI9dCx0aGlzLl9pc0xvZ2dlZEluPSExLHRoaXMuX1NES0FwcElEPW4uU0RLQXBwSUQsdGhpcy5fdXNlcklEPW4udXNlcklEfHxcIlwiLHRoaXMuX3VzZXJTaWc9bi51c2VyU2lnfHxcIlwiLHRoaXMuX3ZlcnNpb249XCIyLjE0LjBcIix0aGlzLl9hMktleT1cIlwiLHRoaXMuX3RpbnlJRD1cIlwiLHRoaXMuX2NvbnRlbnRUeXBlPVwianNvblwiLHRoaXMuX3VubGltaXRlZEFWQ2hhdFJvb209bi51bmxpbWl0ZWRBVkNoYXRSb29tLHRoaXMuX3NjZW5lPW4uc2NlbmV8fFwiXCIsdGhpcy5fb3ZlcnNlYT1uLm92ZXJzZWEsdGhpcy5faW5zdGFuY2VJRD1uLmluc3RhbmNlSUQsdGhpcy5fc3RhdHVzSW5zdGFuY2VJRD0wfXJldHVybiBhKGUsW3trZXk6XCJpc0xvZ2dlZEluXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNMb2dnZWRJbn19LHtrZXk6XCJpc092ZXJzZWFcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vdmVyc2VhfX0se2tleTpcImlzVW5saW1pdGVkQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VubGltaXRlZEFWQ2hhdFJvb219fSx7a2V5OlwiZ2V0VXNlcklEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlcklEfX0se2tleTpcInNldFVzZXJJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3VzZXJJRD1lfX0se2tleTpcInNldFVzZXJTaWdcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl91c2VyU2lnPWV9fSx7a2V5OlwiZ2V0VXNlclNpZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZXJTaWd9fSx7a2V5OlwiZ2V0U0RLQXBwSURcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9TREtBcHBJRH19LHtrZXk6XCJnZXRUaW55SURcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW55SUR9fSx7a2V5Olwic2V0VGlueUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fdGlueUlEPWUsdGhpcy5faXNMb2dnZWRJbj0hMH19LHtrZXk6XCJnZXRTY2VuZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9ITEsdD1bXTthaSYmKHQ9T2JqZWN0LmtleXMoaWkpKSxzaSYmKHQ9T2JqZWN0LmtleXMod2luZG93KSk7Zm9yKHZhciBuPTAsbz10Lmxlbmd0aDtuPG87bisrKWlmKHRbbl0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInVpa2l0XCIpKXtlPSEwO2JyZWFrfXJldHVybiB0PW51bGwsZX0oKT9cInR1aWtpdFwiOnRoaXMuX3NjZW5lfX0se2tleTpcImdldEluc3RhbmNlSURcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnN0YW5jZUlEfX0se2tleTpcImdldFN0YXR1c0luc3RhbmNlSURcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXNJbnN0YW5jZUlEfX0se2tleTpcInNldFN0YXR1c0luc3RhbmNlSURcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zdGF0dXNJbnN0YW5jZUlEPWV9fSx7a2V5OlwiZ2V0VmVyc2lvblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZlcnNpb259fSx7a2V5OlwiZ2V0QTJLZXlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hMktleX19LHtrZXk6XCJzZXRBMktleVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2EyS2V5PWV9fSx7a2V5OlwiZ2V0Q29udGVudFR5cGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZW50VHlwZX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNMb2dnZWRJbj0hMSx0aGlzLl91c2VyU2lnPVwiXCIsdGhpcy5fYTJLZXk9XCJcIix0aGlzLl90aW55SUQ9XCJcIix0aGlzLl9zdGF0dXNJbnN0YW5jZUlEPTB9fV0pLGV9KCksWHY9ZnVuY3Rpb24oZSl7aShuLGUpO3ZhciB0PV8obik7ZnVuY3Rpb24gbihlKXt2YXIgcjtyZXR1cm4gbyh0aGlzLG4pLChyPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiU2lnbk1vZHVsZVwiLHIuX2hlbGxvSW50ZXJ2YWw9MTIwLHIuX2xhc3RMb2dpblRzPTAsaHYubWl4aW4oaChyKSkscn1yZXR1cm4gYShuLFt7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5pc0xvZ2dlZEluKCkmJmUldGhpcy5faGVsbG9JbnRlcnZhbD09MCYmdGhpcy5faGVsbG8oKX19LHtrZXk6XCJsb2dpblwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuaXNMb2dnZWRJbigpKXt2YXIgdD1cIuaCqOW3sue7j+eZu+W9lei0puWPt1wiLmNvbmNhdChlLnVzZXJJRCxcIu+8geWmgumcgOWIh+aNoui0puWPt+eZu+W9le+8jOivt+WFiOiwg+eUqCBsb2dvdXQg5o6l5Y+j55m75Ye677yM5YaN6LCD55SoIGxvZ2luIOaOpeWPo+eZu+W9leOAglwiKTtyZXR1cm4gS2kud2Fybih0KSxqbSh7YWN0aW9uU3RhdHVzOlwiT0tcIixlcnJvckNvZGU6MCxlcnJvckluZm86dCxyZXBlYXRMb2dpbjohMH0pfWlmKERhdGUubm93KCktdGhpcy5fbGFzdExvZ2luVHM8PTE1ZTMpcmV0dXJuIEtpLndhcm4oXCLmgqjmraPlnKjlsJ3or5XnmbvlvZXotKblj7dcIi5jb25jYXQoZS51c2VySUQsXCLvvIHor7fli7/ph43lpI3nmbvlvZXjgIJcIikpLFltKHtjb2RlOlBkLlJFUEVBVF9MT0dJTixtZXNzYWdlOkJkfSk7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5sb2dpbiB1c2VySUQ6XCIpLmNvbmNhdChlLnVzZXJJRCkpO3ZhciBuPXRoaXMuX2NoZWNrTG9naW5JbmZvKGUpO2lmKDAhPT1uLmNvZGUpcmV0dXJuIFltKG4pO3ZhciBvPXRoaXMuZ2V0TW9kdWxlKFhjKSxyPWUudXNlcklELGE9ZS51c2VyU2lnO3JldHVybiBvLnNldFVzZXJJRChyKSxvLnNldFVzZXJTaWcoYSksdGhpcy5nZXRNb2R1bGUoYWwpLnVwZGF0ZVByb3RvY29sQ29uZmlnKCksdGhpcy5fbG9naW4oKX19LHtrZXk6XCJfbG9naW5cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLmdldE1vZHVsZShYYyksbj1uZXcgbGcoZ2cpO3JldHVybiBuLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQodC5nZXRTY2VuZSgpKSkuc2V0TW9yZU1lc3NhZ2UoXCJpZGVudGlmaWVyOlwiLmNvbmNhdCh0aGlzLmdldE15VXNlcklEKCkpKSx0aGlzLl9sYXN0TG9naW5Ucz1EYXRlLm5vdygpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnBsfSkudGhlbigoZnVuY3Rpb24obyl7ZS5fbGFzdExvZ2luVHM9MDt2YXIgcj1EYXRlLm5vdygpLGE9bnVsbCxzPW8uZGF0YSxpPXMuYTJLZXksdT1zLnRpbnlJRCxjPXMuaGVsbG9JbnRlcnZhbCxsPXMuaW5zdGFuY2VJRCxkPXMudGltZVN0YW1wO0tpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIubG9naW4gb2suIGhlbGxvSW50ZXJ2YWw6XCIpLmNvbmNhdChjLFwiIGluc3RhbmNlSUQ6XCIpLmNvbmNhdChsLFwiIHRpbWVTdGFtcDpcIikuY29uY2F0KGQpKTt2YXIgcD0xZTMqZCxnPXItbi5nZXRTdGFydFRzKCksaD1wK3BhcnNlSW50KGcvMiktcixmPW4uZ2V0U3RhcnRUcygpK2g7aWYobi5zdGFydChmKSxmdW5jdGlvbihlLHQpe1BpPXQ7dmFyIG49bmV3IERhdGU7bi5zZXRUaW1lKGUpLEtpLmluZm8oXCJiYXNlVGltZSBmcm9tIHNlcnZlcjogXCIuY29uY2F0KG4sXCIgb2Zmc2V0OiBcIikuY29uY2F0KFBpKSl9KHAsaCksIXUpdGhyb3cgYT1uZXcgS20oe2NvZGU6UGQuTk9fVElOWUlELG1lc3NhZ2U6eGR9KSxuLnNldEVycm9yKGEsITAsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxhO2lmKCFpKXRocm93IGE9bmV3IEttKHtjb2RlOlBkLk5PX0EyS0VZLG1lc3NhZ2U6VmR9KSxuLnNldEVycm9yKGEsITAsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxhO3JldHVybiBuLnNldE5ldHdvcmtUeXBlKGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TW9yZU1lc3NhZ2UoXCJoZWxsb0ludGVydmFsOlwiLmNvbmNhdChjLFwiIGluc3RhbmNlSUQ6XCIpLmNvbmNhdChsLFwiIG9mZnNldDpcIikuY29uY2F0KGgpKS5lbmQoKSx0LnNldEEyS2V5KGkpLHQuc2V0VGlueUlEKHUpLHQuc2V0U3RhdHVzSW5zdGFuY2VJRChsKSxlLmdldE1vZHVsZShhbCkudXBkYXRlUHJvdG9jb2xDb25maWcoKSxlLmVtaXRJbm5lckV2ZW50KGd2LkNPTlRFWFRfQTJLRVlfQU5EX1RJTllJRF9VUERBVEVEKSxlLl9oZWxsb0ludGVydmFsPWMsZS50cmlnZ2VyUmVhZHkoKSxlLl9mZXRjaENsb3VkQ29udHJvbENvbmZpZygpLG99KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3JldHVybiBlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPW0oZSwyKSxyPW9bMF0sYT1vWzFdO24uc2V0RXJyb3IodCxyLGEpLmVuZCghMCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLmxvZ2luIGZhaWxlZC4gZXJyb3I6XCIpLHQpLGUuX21vZHVsZU1hbmFnZXIub25Mb2dpbkZhaWxlZCgpLFltKHQpfSkpfX0se2tleTpcImxvZ291dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowO2lmKCF0aGlzLmlzTG9nZ2VkSW4oKSlyZXR1cm4gWW0oe2NvZGU6UGQuVVNFUl9OT1RfTE9HR0VEX0lOLG1lc3NhZ2U6S2R9KTt2YXIgbj1uZXcgbGcoaGcpO3JldHVybiBuLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImlkZW50aWZpZXI6XCIuY29uY2F0KHRoaXMuZ2V0TXlVc2VySUQoKSkpLmVuZCghMCksS2kuaW5mbyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIubG9nb3V0IHR5cGU6XCIpLmNvbmNhdCh0KSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Z2wscmVxdWVzdERhdGE6e3R5cGU6dH19KS50aGVuKChmdW5jdGlvbigpe3JldHVybiBlLnJlc2V0UmVhZHkoKSxqbSh7fSl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3JldHVybiBLaS5lcnJvcihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2xvZ291dCBlcnJvcjpcIiksdCksZS5yZXNldFJlYWR5KCksam0oe30pfSkpfX0se2tleTpcIl9mZXRjaENsb3VkQ29udHJvbENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5nZXRNb2R1bGUodWwpLmZldGNoQ29uZmlnKCl9fSx7a2V5OlwiX2hlbGxvXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmhsfSkuY2F0Y2goKGZ1bmN0aW9uKHQpe0tpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9oZWxsbyBlcnJvcjpcIiksdCl9KSl9fSx7a2V5OlwiX2NoZWNrTG9naW5JbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPVwiXCI7cmV0dXJuIE91KHRoaXMuZ2V0TW9kdWxlKFhjKS5nZXRTREtBcHBJRCgpKT8odD1QZC5OT19TREtBUFBJRCxuPVVkKTpPdShlLnVzZXJJRCk/KHQ9UGQuTk9fSURFTlRJRklFUixuPUZkKTpPdShlLnVzZXJTaWcpJiYodD1QZC5OT19VU0VSU0lHLG49cWQpLHtjb2RlOnQsbWVzc2FnZTpufX19LHtrZXk6XCJvbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7bmV3IGxnKGZnKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJ0eXBlOlwiLmNvbmNhdChyby5LSUNLRURfT1VUX01VTFRfQUNDT1VOVCxcIiBuZXdJbnN0YW5jZUluZm86XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShlKSkpLmVuZCghMCksS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NdWx0aXBsZUFjY291bnRLaWNrZWRPdXQgdXNlcklEOlwiKS5jb25jYXQodGhpcy5nZXRNeVVzZXJJRCgpLFwiIG5ld0luc3RhbmNlSW5mbzpcIiksZSksdGhpcy5sb2dvdXQoMSkudGhlbigoZnVuY3Rpb24oKXt0LmVtaXRPdXRlckV2ZW50KG9vLktJQ0tFRF9PVVQse3R5cGU6cm8uS0lDS0VEX09VVF9NVUxUX0FDQ09VTlR9KSx0Ll9tb2R1bGVNYW5hZ2VyLnJlc2V0KCl9KSl9fSx7a2V5Olwib25NdWx0aXBsZURldmljZUtpY2tlZE91dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7bmV3IGxnKGZnKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJ0eXBlOlwiLmNvbmNhdChyby5LSUNLRURfT1VUX01VTFRfREVWSUNFLFwiIG5ld0luc3RhbmNlSW5mbzpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGUpKSkuZW5kKCEwKSxLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk11bHRpcGxlRGV2aWNlS2lja2VkT3V0IHVzZXJJRDpcIikuY29uY2F0KHRoaXMuZ2V0TXlVc2VySUQoKSxcIiBuZXdJbnN0YW5jZUluZm86XCIpLGUpLHRoaXMubG9nb3V0KDEpLnRoZW4oKGZ1bmN0aW9uKCl7dC5lbWl0T3V0ZXJFdmVudChvby5LSUNLRURfT1VULHt0eXBlOnJvLktJQ0tFRF9PVVRfTVVMVF9ERVZJQ0V9KSx0Ll9tb2R1bGVNYW5hZ2VyLnJlc2V0KCl9KSl9fSx7a2V5Olwib25Vc2VyU2lnRXhwaXJlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7bmV3IGxnKGZnKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2Uocm8uS0lDS0VEX09VVF9VU0VSU0lHX0VYUElSRUQpLmVuZCghMCksS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25Vc2VyU2lnRXhwaXJlZDogdXNlclNpZyDnrb7lkI3ov4fmnJ/ooqvouKLkuIvnur9cIikpLDAhPT10aGlzLmdldE1vZHVsZShYYykuZ2V0U3RhdHVzSW5zdGFuY2VJRCgpJiYodGhpcy5lbWl0T3V0ZXJFdmVudChvby5LSUNLRURfT1VULHt0eXBlOnJvLktJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEfSksdGhpcy5fbW9kdWxlTWFuYWdlci5yZXNldCgpKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5yZXNldFJlYWR5KCksdGhpcy5faGVsbG9JbnRlcnZhbD0xMjAsdGhpcy5fbGFzdExvZ2luVHM9MH19XSksbn0oZGwpO2Z1bmN0aW9uIFF2KCl7cmV0dXJuIG51bGx9dmFyIFp2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fbW9kdWxlTWFuYWdlcj10LHRoaXMuX2NsYXNzTmFtZT1cIlN0b3JhZ2VNb2R1bGVcIix0aGlzLl9zdG9yYWdlUXVldWU9bmV3IE1hcCx0aGlzLl9lcnJvclRvbGVyYW50SGFuZGxlKCl9cmV0dXJuIGEoZSxbe2tleTpcIl9lcnJvclRvbGVyYW50SGFuZGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXthaXx8IUppKHdpbmRvdykmJiFKaSh3aW5kb3cubG9jYWxTdG9yYWdlKXx8KHRoaXMuZ2V0SXRlbT1Rdix0aGlzLnNldEl0ZW09UXYsdGhpcy5yZW1vdmVJdGVtPVF2LHRoaXMuY2xlYXI9UXYpfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUlMjA9PTApe2lmKDA9PT10aGlzLl9zdG9yYWdlUXVldWUuc2l6ZSlyZXR1cm47dGhpcy5fZG9GbHVzaCgpfX19LHtrZXk6XCJfZG9GbHVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7dHJ5e3ZhciBlLHQ9Uyh0aGlzLl9zdG9yYWdlUXVldWUpO3RyeXtmb3IodC5zKCk7IShlPXQubigpKS5kb25lOyl7dmFyIG49bShlLnZhbHVlLDIpLG89blswXSxyPW5bMV07dGhpcy5fc2V0U3RvcmFnZVN5bmModGhpcy5fZ2V0S2V5KG8pLHIpfX1jYXRjaChhKXt0LmUoYSl9ZmluYWxseXt0LmYoKX10aGlzLl9zdG9yYWdlUXVldWUuY2xlYXIoKX1jYXRjaChjeSl7S2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2RvRmx1c2ggZXJyb3I6XCIpLGN5KX19fSx7a2V5OlwiX2dldFByZWZpeFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWGMpO3JldHVyblwiVElNX1wiLmNvbmNhdChlLmdldFNES0FwcElEKCksXCJfXCIpLmNvbmNhdChlLmdldFVzZXJJRCgpLFwiX1wiKX19LHtrZXk6XCJfZ2V0S2V5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuXCJcIi5jb25jYXQodGhpcy5fZ2V0UHJlZml4KCkpLmNvbmNhdChlKX19LHtrZXk6XCJnZXRJdGVtXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTt0cnl7dmFyIG49dD90aGlzLl9nZXRLZXkoZSk6ZTtyZXR1cm4gdGhpcy5fZ2V0U3RvcmFnZVN5bmMobil9Y2F0Y2goY3kpe3JldHVybiBLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRJdGVtIGVycm9yOlwiKSxjeSkse319fX0se2tleTpcInNldEl0ZW1cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl0sbz0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdO2lmKG4pe3ZhciByPW8/dGhpcy5fZ2V0S2V5KGUpOmU7dGhpcy5fc2V0U3RvcmFnZVN5bmMocix0KX1lbHNlIHRoaXMuX3N0b3JhZ2VRdWV1ZS5zZXQoZSx0KX19LHtrZXk6XCJjbGVhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dHJ5e2FpP2lpLmNsZWFyU3RvcmFnZVN5bmMoKTpsb2NhbFN0b3JhZ2UmJmxvY2FsU3RvcmFnZS5jbGVhcigpfWNhdGNoKGN5KXtLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5jbGVhciBlcnJvcjpcIiksY3kpfX19LHtrZXk6XCJyZW1vdmVJdGVtXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTt0cnl7dmFyIG49dD90aGlzLl9nZXRLZXkoZSk6ZTt0aGlzLl9yZW1vdmVTdG9yYWdlU3luYyhuKX1jYXRjaChjeSl7S2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVtb3ZlSXRlbSBlcnJvcjpcIiksY3kpfX19LHtrZXk6XCJnZXRTaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcImJcIjt0cnl7dmFyIG89e3NpemU6MCxsaW1pdFNpemU6NTI0Mjg4MCx1bml0Om59O2lmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLFwibGVmdFNpemVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5saW1pdFNpemUtby5zaXplfX0pLGFpJiYoby5saW1pdFNpemU9MTAyNCppaS5nZXRTdG9yYWdlSW5mb1N5bmMoKS5saW1pdFNpemUpLGUpby5zaXplPUpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0SXRlbShlKSkubGVuZ3RoK3RoaXMuX2dldEtleShlKS5sZW5ndGg7ZWxzZSBpZihhaSl7dmFyIHI9aWkuZ2V0U3RvcmFnZUluZm9TeW5jKCksYT1yLmtleXM7YS5mb3JFYWNoKChmdW5jdGlvbihlKXtvLnNpemUrPUpTT04uc3RyaW5naWZ5KHQuX2dldFN0b3JhZ2VTeW5jKGUpKS5sZW5ndGgrdC5fZ2V0S2V5KGUpLmxlbmd0aH0pKX1lbHNlIGlmKGxvY2FsU3RvcmFnZSlmb3IodmFyIHMgaW4gbG9jYWxTdG9yYWdlKWxvY2FsU3RvcmFnZS5oYXNPd25Qcm9wZXJ0eShzKSYmKG8uc2l6ZSs9bG9jYWxTdG9yYWdlLmdldEl0ZW0ocykubGVuZ3RoK3MubGVuZ3RoKTtyZXR1cm4gdGhpcy5fY29udmVydFVuaXQobyl9Y2F0Y2goY3kpe0tpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiIGVycm9yOlwiKSxjeSl9fX0se2tleTpcIl9jb252ZXJ0VW5pdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49ZS51bml0O2Zvcih2YXIgbyBpbiB0LnVuaXQ9bixlKVwibnVtYmVyXCI9PXR5cGVvZiBlW29dJiYoXCJrYlwiPT09bi50b0xvd2VyQ2FzZSgpP3Rbb109TWF0aC5yb3VuZChlW29dLzEwMjQpOlwibWJcIj09PW4udG9Mb3dlckNhc2UoKT90W29dPU1hdGgucm91bmQoZVtvXS8xMDI0LzEwMjQpOnRbb109ZVtvXSk7cmV0dXJuIHR9fSx7a2V5OlwiX3NldFN0b3JhZ2VTeW5jXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXthaT9vaT9teS5zZXRTdG9yYWdlU3luYyh7a2V5OmUsZGF0YTp0fSk6aWkuc2V0U3RvcmFnZVN5bmMoZSx0KTpsb2NhbFN0b3JhZ2UmJmxvY2FsU3RvcmFnZS5zZXRJdGVtKGUsSlNPTi5zdHJpbmdpZnkodCkpfX0se2tleTpcIl9nZXRTdG9yYWdlU3luY1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBhaT9vaT9teS5nZXRTdG9yYWdlU3luYyh7a2V5OmV9KS5kYXRhOmlpLmdldFN0b3JhZ2VTeW5jKGUpOmxvY2FsU3RvcmFnZT9KU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGUpKTp7fX19LHtrZXk6XCJfcmVtb3ZlU3RvcmFnZVN5bmNcIix2YWx1ZTpmdW5jdGlvbihlKXthaT9vaT9teS5yZW1vdmVTdG9yYWdlU3luYyh7a2V5OmV9KTppaS5yZW1vdmVTdG9yYWdlU3luYyhlKTpsb2NhbFN0b3JhZ2UmJmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGUpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9kb0ZsdXNoKCl9fV0pLGV9KCksZU09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl9jbGFzc05hbWU9XCJTU09Mb2dCb2R5XCIsdGhpcy5fcmVwb3J0PVtdfXJldHVybiBhKGUsW3trZXk6XCJwdXNoSW5cIix2YWx1ZTpmdW5jdGlvbihlKXtLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucHVzaEluXCIpLHRoaXMuX3JlcG9ydC5sZW5ndGgsZSksdGhpcy5fcmVwb3J0LnB1c2goZSl9fSx7a2V5OlwiYmFja2ZpbGxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdDt6aShlKSYmMCE9PWUubGVuZ3RoJiYoS2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmJhY2tmaWxsXCIpLHRoaXMuX3JlcG9ydC5sZW5ndGgsZS5sZW5ndGgpLCh0PXRoaXMuX3JlcG9ydCkudW5zaGlmdC5hcHBseSh0LHYoZSkpKX19LHtrZXk6XCJnZXRMb2dzTnVtSW5NZW1vcnlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXBvcnQubGVuZ3RofX0se2tleTpcImlzRW1wdHlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5fcmVwb3J0Lmxlbmd0aH19LHtrZXk6XCJfcmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlcG9ydC5sZW5ndGg9MCx0aGlzLl9yZXBvcnQ9W119fSx7a2V5OlwiZ2V0TG9nc0luTWVtb3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9yZXBvcnQuc2xpY2UoKTtyZXR1cm4gdGhpcy5fcmVzZXQoKSxlfX1dKSxlfSgpLHRNPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0TW9kdWxlKFhjKTtyZXR1cm57U0RLVHlwZToxMCxTREtBcHBJRDp0LmdldFNES0FwcElEKCksU0RLVmVyc2lvbjp0LmdldFZlcnNpb24oKSx0aW55SUQ6TnVtYmVyKHQuZ2V0VGlueUlEKCkpLHVzZXJJRDp0LmdldFVzZXJJRCgpLHBsYXRmb3JtOmUuZ2V0UGxhdGZvcm0oKSxpbnN0YW5jZUlEOnQuZ2V0SW5zdGFuY2VJRCgpLHRyYWNlSUQ6VWkoKX19LG5NPWZ1bmN0aW9uKGUpe2kocixlKTt2YXIgbj1fKHIpO2Z1bmN0aW9uIHIoZSl7dmFyIHQ7byh0aGlzLHIpLCh0PW4uY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiRXZlbnRTdGF0TW9kdWxlXCIsdC5UQUc9XCJpbS1zc29sb2ctZXZlbnRcIix0Ll9yZXBvcnRCb2R5PW5ldyBlTSx0Lk1JTl9USFJFU0hPTEQ9MjAsdC5NQVhfVEhSRVNIT0xEPTEwMCx0LldBSVRJTkdfVElNRT02ZTQsdC5SRVBPUlRfTEVWRUw9WzQsNSw2XSx0LlJFUE9SVF9TREtBUFBJRF9CTEFDS0xJU1Q9W10sdC5SRVBPUlRfVElOWUlEX1dISVRFTElTVD1bXSx0Ll9sYXN0UmVwb3J0VGltZT1EYXRlLm5vdygpO3ZhciBhPXQuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKTtyZXR1cm4gYS5vbihndi5DT05URVhUX0EyS0VZX0FORF9USU5ZSURfVVBEQVRFRCx0Ll9vbkxvZ2luU3VjY2VzcyxoKHQpKSxhLm9uKGd2LkNMT1VEX0NPTkZJR19VUERBVEVELHQuX29uQ2xvdWRDb25maWdVcGRhdGVkLGgodCkpLHR9cmV0dXJuIGEocixbe2tleTpcInJlcG9ydEF0T25jZVwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlcG9ydEF0T25jZVwiKSksdGhpcy5fcmVwb3J0KCl9fSx7a2V5OlwiX29uTG9naW5TdWNjZXNzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5nZXRNb2R1bGUoUWMpLG49dC5nZXRJdGVtKHRoaXMuVEFHLCExKTshT3UobikmJlFpKG4uZm9yRWFjaCkmJihLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbkxvZ2luU3VjY2VzcyBnZXQgc3NvbG9nIGluIHN0b3JhZ2UsIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKSxuLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UuX3JlcG9ydEJvZHkucHVzaEluKHQpfSkpLHQucmVtb3ZlSXRlbSh0aGlzLlRBRywhMSkpfX0se2tleTpcIl9vbkNsb3VkQ29uZmlnVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRDbG91ZENvbmZpZyhcImV2dF9ycHRfdGhyZXNob2xkXCIpLHQ9dGhpcy5nZXRDbG91ZENvbmZpZyhcImV2dF9ycHRfd2FpdGluZ1wiKSxuPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJldnRfcnB0X2xldmVsXCIpLG89dGhpcy5nZXRDbG91ZENvbmZpZyhcImV2dF9ycHRfc2RrYXBwaWRfYmxcIikscj10aGlzLmdldENsb3VkQ29uZmlnKFwiZXZ0X3JwdF90aW55aWRfd2xcIik7SmkoZSl8fCh0aGlzLk1JTl9USFJFU0hPTEQ9TnVtYmVyKGUpKSxKaSh0KXx8KHRoaXMuV0FJVElOR19USU1FPU51bWJlcih0KSksSmkobil8fCh0aGlzLlJFUE9SVF9MRVZFTD1uLnNwbGl0KFwiLFwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBOdW1iZXIoZSl9KSkpLEppKG8pfHwodGhpcy5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPW8uc3BsaXQoXCIsXCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIE51bWJlcihlKX0pKSksSmkocil8fCh0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPXIuc3BsaXQoXCIsXCIpKX19LHtrZXk6XCJwdXNoSW5cIix2YWx1ZTpmdW5jdGlvbihlKXtlIGluc3RhbmNlb2YgbGcmJihlLnVwZGF0ZVRpbWVTdGFtcCgpLHRoaXMuX3JlcG9ydEJvZHkucHVzaEluKGUpLHRoaXMuX3JlcG9ydEJvZHkuZ2V0TG9nc051bUluTWVtb3J5KCk+PXRoaXMuTUlOX1RIUkVTSE9MRCYmdGhpcy5fcmVwb3J0KCkpfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKCl7RGF0ZS5ub3coKTx0aGlzLl9sYXN0UmVwb3J0VGltZSt0aGlzLldBSVRJTkdfVElNRXx8dGhpcy5fcmVwb3J0Qm9keS5pc0VtcHR5KCl8fHRoaXMuX3JlcG9ydCgpfX0se2tleTpcIl9maWx0ZXJMb2dzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXRoaXMuZ2V0TW9kdWxlKFhjKSxvPW4uZ2V0U0RLQXBwSUQoKSxyPW4uZ2V0VGlueUlEKCk7cmV0dXJuIE51KHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVCxvKSYmIUN1KHRoaXMuUkVQT1JUX1RJTllJRF9XSElURUxJU1Qscik/W106ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB0LlJFUE9SVF9MRVZFTC5pbmNsdWRlcyhlLmxldmVsKX0pKX19LHtrZXk6XCJfcmVwb3J0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCF0aGlzLl9yZXBvcnRCb2R5LmlzRW1wdHkoKSl7dmFyIG49dGhpcy5fcmVwb3J0Qm9keS5nZXRMb2dzSW5NZW1vcnkoKSxvPXRoaXMuX2ZpbHRlckxvZ3Mobik7aWYoMCE9PW8ubGVuZ3RoKXt2YXIgcj17aGVhZGVyOnRNKHRoaXMpLGV2ZW50Om99O3RoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmtkLHJlcXVlc3REYXRhOnQoe30scil9KS50aGVuKChmdW5jdGlvbigpe2UuX2xhc3RSZXBvcnRUaW1lPURhdGUubm93KCl9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe0tpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLnJlcG9ydCBmYWlsZWQuIG5ldHdvcmtUeXBlOlwiKS5jb25jYXQoZS5nZXROZXR3b3JrVHlwZSgpLFwiIGVycm9yOlwiKSx0KSxlLl9yZXBvcnRCb2R5LmJhY2tmaWxsKG4pLGUuX3JlcG9ydEJvZHkuZ2V0TG9nc051bUluTWVtb3J5KCk+ZS5NQVhfVEhSRVNIT0xEJiZlLl9mbHVzaEF0T25jZSgpfSkpfWVsc2UgdGhpcy5fbGFzdFJlcG9ydFRpbWU9RGF0ZS5ub3coKX19fSx7a2V5OlwiX2ZsdXNoQXRPbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldE1vZHVsZShRYyksdD1lLmdldEl0ZW0odGhpcy5UQUcsITEpLG49dGhpcy5fcmVwb3J0Qm9keS5nZXRMb2dzSW5NZW1vcnkoKTtpZihPdSh0KSlLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9mbHVzaEF0T25jZSBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksZS5zZXRJdGVtKHRoaXMuVEFHLG4sITAsITEpO2Vsc2V7dmFyIG89bi5jb25jYXQodCk7by5sZW5ndGg+dGhpcy5NQVhfVEhSRVNIT0xEJiYobz1vLnNsaWNlKDAsdGhpcy5NQVhfVEhSRVNIT0xEKSksS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZmx1c2hBdE9uY2UgY291bnQ6XCIpLmNvbmNhdChvLmxlbmd0aCkpLGUuc2V0SXRlbSh0aGlzLlRBRyxvLCEwLCExKX19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX2xhc3RSZXBvcnRUaW1lPTAsdGhpcy5fcmVwb3J0KCksdGhpcy5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPVtdLHRoaXMuUkVQT1JUX1RJTllJRF9XSElURUxJU1Q9W119fV0pLHJ9KGRsKSxvTT1cIm5vbmVcIixyTT1cIm9ubGluZVwiLGFNPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fbW9kdWxlTWFuYWdlcj10LHRoaXMuX25ldHdvcmtUeXBlPVwiXCIsdGhpcy5fY2xhc3NOYW1lPVwiTmV0TW9uaXRvck1vZHVsZVwiLHRoaXMuTUFYX1dBSVRfVElNRT0zZTN9cmV0dXJuIGEoZSxbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGFpKXtpaS5nZXROZXR3b3JrVHlwZSh7c3VjY2VzczpmdW5jdGlvbih0KXtlLl9uZXR3b3JrVHlwZT10Lm5ldHdvcmtUeXBlLHQubmV0d29ya1R5cGU9PT1vTT9LaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5zdGFydCBubyBuZXR3b3JrLCBwbGVhc2UgY2hlY2shXCIpKTpLaS5pbmZvKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5zdGFydCBuZXR3b3JrVHlwZTpcIikuY29uY2F0KHQubmV0d29ya1R5cGUpKX19KTt2YXIgdD10aGlzLl9vbk5ldHdvcmtTdGF0dXNDaGFuZ2UuYmluZCh0aGlzKTtpaS5vZmZOZXR3b3JrU3RhdHVzQ2hhbmdlJiYocml8fHRpP2lpLm9mZk5ldHdvcmtTdGF0dXNDaGFuZ2UodCk6aWkub2ZmTmV0d29ya1N0YXR1c0NoYW5nZSgpKSxpaS5vbk5ldHdvcmtTdGF0dXNDaGFuZ2UodCl9ZWxzZSB0aGlzLl9uZXR3b3JrVHlwZT1yTX19LHtrZXk6XCJfb25OZXR3b3JrU3RhdHVzQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5pc0Nvbm5lY3RlZD8oS2kuaW5mbyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uTmV0d29ya1N0YXR1c0NoYW5nZSBwcmV2aW91c05ldHdvcmtUeXBlOlwiKS5jb25jYXQodGhpcy5fbmV0d29ya1R5cGUsXCIgY3VycmVudE5ldHdvcmtUeXBlOlwiKS5jb25jYXQoZS5uZXR3b3JrVHlwZSkpLHRoaXMuX25ldHdvcmtUeXBlIT09ZS5uZXR3b3JrVHlwZSYmdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoc2wpLnJlQ29ubmVjdCgpKTpLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25OZXR3b3JrU3RhdHVzQ2hhbmdlIG5vIG5ldHdvcmssIHBsZWFzZSBjaGVjayFcIikpO3RoaXMuX25ldHdvcmtUeXBlPWUubmV0d29ya1R5cGV9fSx7a2V5OlwicHJvYmVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe2lmKGFpKWlpLmdldE5ldHdvcmtUeXBlKHtzdWNjZXNzOmZ1bmN0aW9uKG4pe2UuX25ldHdvcmtUeXBlPW4ubmV0d29ya1R5cGUsbi5uZXR3b3JrVHlwZT09PW9NPyhLaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5wcm9iZSBubyBuZXR3b3JrLCBwbGVhc2UgY2hlY2shXCIpKSx0KFshMSxuLm5ldHdvcmtUeXBlXSkpOihLaS5pbmZvKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5wcm9iZSBuZXR3b3JrVHlwZTpcIikuY29uY2F0KG4ubmV0d29ya1R5cGUpKSx0KFshMCxuLm5ldHdvcmtUeXBlXSkpfX0pO2Vsc2UgaWYod2luZG93JiZ3aW5kb3cuZmV0Y2gpZmV0Y2goXCJcIi5jb25jYXQocHUoKSxcIi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2Fzc2V0cy9zcGVlZC54bWw/cmFuZG9tPVwiKS5jb25jYXQoTWF0aC5yYW5kb20oKSkpLnRoZW4oKGZ1bmN0aW9uKGUpe2Uub2s/dChbITAsck1dKTp0KFshMSxvTV0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXt0KFshMSxvTV0pfSkpO2Vsc2V7dmFyIG89bmV3IFhNTEh0dHBSZXF1ZXN0LHI9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtLaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5wcm9iZSBmZXRjaCB0aW1lb3V0LiBQcm9iYWJseSBubyBuZXR3b3JrLCBwbGVhc2UgY2hlY2shXCIpKSxvLmFib3J0KCksZS5fbmV0d29ya1R5cGU9b00sdChbITEsb01dKX0pLGUuTUFYX1dBSVRfVElNRSk7by5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09by5yZWFkeVN0YXRlJiYoY2xlYXJUaW1lb3V0KHIpLDIwMD09PW8uc3RhdHVzfHwzMDQ9PT1vLnN0YXR1cz8odGhpcy5fbmV0d29ya1R5cGU9ck0sdChbITAsck1dKSk6KEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5jbGFzc05hbWUsXCIucHJvYmUgZmV0Y2ggc3RhdHVzOlwiKS5jb25jYXQoby5zdGF0dXMsXCIuIFByb2JhYmx5IG5vIG5ldHdvcmssIHBsZWFzZSBjaGVjayFcIikpLHRoaXMuX25ldHdvcmtUeXBlPW9NLHQoWyExLG9NXSkpKX0sby5vcGVuKFwiR0VUXCIsXCJcIi5jb25jYXQocHUoKSxcIi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2Fzc2V0cy9zcGVlZC54bWw/cmFuZG9tPVwiKS5jb25jYXQoTWF0aC5yYW5kb20oKSkpLG8uc2VuZCgpfX0pKX19LHtrZXk6XCJnZXROZXR3b3JrVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25ldHdvcmtUeXBlfX1dKSxlfSgpLHNNPUEoKGZ1bmN0aW9uKGUpe3ZhciB0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksbj1cIn5cIjtmdW5jdGlvbiBvKCl7fWZ1bmN0aW9uIHIoZSx0LG4pe3RoaXMuZm49ZSx0aGlzLmNvbnRleHQ9dCx0aGlzLm9uY2U9bnx8ITF9ZnVuY3Rpb24gYShlLHQsbyxhLHMpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG8pdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dmFyIGk9bmV3IHIobyxhfHxlLHMpLHU9bj9uK3Q6dDtyZXR1cm4gZS5fZXZlbnRzW3VdP2UuX2V2ZW50c1t1XS5mbj9lLl9ldmVudHNbdV09W2UuX2V2ZW50c1t1XSxpXTplLl9ldmVudHNbdV0ucHVzaChpKTooZS5fZXZlbnRzW3VdPWksZS5fZXZlbnRzQ291bnQrKyksZX1mdW5jdGlvbiBzKGUsdCl7MD09LS1lLl9ldmVudHNDb3VudD9lLl9ldmVudHM9bmV3IG86ZGVsZXRlIGUuX2V2ZW50c1t0XX1mdW5jdGlvbiBpKCl7dGhpcy5fZXZlbnRzPW5ldyBvLHRoaXMuX2V2ZW50c0NvdW50PTB9T2JqZWN0LmNyZWF0ZSYmKG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCksKG5ldyBvKS5fX3Byb3RvX198fChuPSExKSksaS5wcm90b3R5cGUuZXZlbnROYW1lcz1mdW5jdGlvbigpe3ZhciBlLG8scj1bXTtpZigwPT09dGhpcy5fZXZlbnRzQ291bnQpcmV0dXJuIHI7Zm9yKG8gaW4gZT10aGlzLl9ldmVudHMpdC5jYWxsKGUsbykmJnIucHVzaChuP28uc2xpY2UoMSk6byk7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/ci5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSk6cn0saS5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PW4/bitlOmUsbz10aGlzLl9ldmVudHNbdF07aWYoIW8pcmV0dXJuW107aWYoby5mbilyZXR1cm5bby5mbl07Zm9yKHZhciByPTAsYT1vLmxlbmd0aCxzPW5ldyBBcnJheShhKTtyPGE7cisrKXNbcl09b1tyXS5mbjtyZXR1cm4gc30saS5wcm90b3R5cGUubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlKXt2YXIgdD1uP24rZTplLG89dGhpcy5fZXZlbnRzW3RdO3JldHVybiBvP28uZm4/MTpvLmxlbmd0aDowfSxpLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUsdCxvLHIsYSxzKXt2YXIgaT1uP24rZTplO2lmKCF0aGlzLl9ldmVudHNbaV0pcmV0dXJuITE7dmFyIHUsYyxsPXRoaXMuX2V2ZW50c1tpXSxkPWFyZ3VtZW50cy5sZW5ndGg7aWYobC5mbil7c3dpdGNoKGwub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGwuZm4sdm9pZCAwLCEwKSxkKXtjYXNlIDE6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQpLCEwO2Nhc2UgMjpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCx0KSwhMDtjYXNlIDM6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQsdCxvKSwhMDtjYXNlIDQ6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQsdCxvLHIpLCEwO2Nhc2UgNTpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCx0LG8scixhKSwhMDtjYXNlIDY6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQsdCxvLHIsYSxzKSwhMH1mb3IoYz0xLHU9bmV3IEFycmF5KGQtMSk7YzxkO2MrKyl1W2MtMV09YXJndW1lbnRzW2NdO2wuZm4uYXBwbHkobC5jb250ZXh0LHUpfWVsc2V7dmFyIHAsZz1sLmxlbmd0aDtmb3IoYz0wO2M8ZztjKyspc3dpdGNoKGxbY10ub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGxbY10uZm4sdm9pZCAwLCEwKSxkKXtjYXNlIDE6bFtjXS5mbi5jYWxsKGxbY10uY29udGV4dCk7YnJlYWs7Y2FzZSAyOmxbY10uZm4uY2FsbChsW2NdLmNvbnRleHQsdCk7YnJlYWs7Y2FzZSAzOmxbY10uZm4uY2FsbChsW2NdLmNvbnRleHQsdCxvKTticmVhaztjYXNlIDQ6bFtjXS5mbi5jYWxsKGxbY10uY29udGV4dCx0LG8scik7YnJlYWs7ZGVmYXVsdDppZighdSlmb3IocD0xLHU9bmV3IEFycmF5KGQtMSk7cDxkO3ArKyl1W3AtMV09YXJndW1lbnRzW3BdO2xbY10uZm4uYXBwbHkobFtjXS5jb250ZXh0LHUpfX1yZXR1cm4hMH0saS5wcm90b3R5cGUub249ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBhKHRoaXMsZSx0LG4sITEpfSxpLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYSh0aGlzLGUsdCxuLCEwKX0saS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0LG8scil7dmFyIGE9bj9uK2U6ZTtpZighdGhpcy5fZXZlbnRzW2FdKXJldHVybiB0aGlzO2lmKCF0KXJldHVybiBzKHRoaXMsYSksdGhpczt2YXIgaT10aGlzLl9ldmVudHNbYV07aWYoaS5mbilpLmZuIT09dHx8ciYmIWkub25jZXx8byYmaS5jb250ZXh0IT09b3x8cyh0aGlzLGEpO2Vsc2V7Zm9yKHZhciB1PTAsYz1bXSxsPWkubGVuZ3RoO3U8bDt1KyspKGlbdV0uZm4hPT10fHxyJiYhaVt1XS5vbmNlfHxvJiZpW3VdLmNvbnRleHQhPT1vKSYmYy5wdXNoKGlbdV0pO2MubGVuZ3RoP3RoaXMuX2V2ZW50c1thXT0xPT09Yy5sZW5ndGg/Y1swXTpjOnModGhpcyxhKX1yZXR1cm4gdGhpc30saS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlPyh0PW4/bitlOmUsdGhpcy5fZXZlbnRzW3RdJiZzKHRoaXMsdCkpOih0aGlzLl9ldmVudHM9bmV3IG8sdGhpcy5fZXZlbnRzQ291bnQ9MCksdGhpc30saS5wcm90b3R5cGUub2ZmPWkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLGkucHJvdG90eXBlLmFkZExpc3RlbmVyPWkucHJvdG90eXBlLm9uLGkucHJlZml4ZWQ9bixpLkV2ZW50RW1pdHRlcj1pLGUuZXhwb3J0cz1pfSkpLGlNPWZ1bmN0aW9uKGUpe2kobixlKTt2YXIgdD1fKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHI7cmV0dXJuIG8odGhpcyxuKSwocj10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkJpZ0RhdGFDaGFubmVsTW9kdWxlXCIsci5GSUxFVFlQRT17U09VTkQ6MjEwNixGSUxFOjIxMDcsVklERU86MjExM30sci5fYmRoX2Rvd25sb2FkX3NlcnZlcj1cImdyb3VwdGFsay5jMmMucXEuY29tXCIsci5fQkRIQml6SUQ9MTAwMDEsci5fYXV0aEtleT1cIlwiLHIuX2V4cGlyZVRpbWU9MCxyLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oZ3YuQ09OVEVYVF9BMktFWV9BTkRfVElOWUlEX1VQREFURUQsci5fZ2V0QXV0aEtleSxoKHIpKSxyfXJldHVybiBhKG4sW3trZXk6XCJfZ2V0QXV0aEtleVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpfbH0pLnRoZW4oKGZ1bmN0aW9uKHQpe3QuZGF0YS5hdXRoS2V5JiYoZS5fYXV0aEtleT10LmRhdGEuYXV0aEtleSxlLl9leHBpcmVUaW1lPXBhcnNlSW50KHQuZGF0YS5leHBpcmVUaW1lKSl9KSl9fSx7a2V5OlwiX2lzRnJvbU9sZGVyVmVyc2lvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEoIWUuY29udGVudHx8Mj09PWUuY29udGVudC5kb3dubG9hZEZsYWcpfX0se2tleTpcInBhcnNlRWxlbWVudHNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCF6aShlKXx8IXQpcmV0dXJuW107Zm9yKHZhciBuPVtdLG89bnVsbCxyPTA7cjxlLmxlbmd0aDtyKyspbz1lW3JdLHRoaXMuX25lZWRQYXJzZShvKT9uLnB1c2godGhpcy5fcGFyc2VFbGVtZW50KG8sdCkpOm4ucHVzaChlW3JdKTtyZXR1cm4gbn19LHtrZXk6XCJfbmVlZFBhcnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIWUuY2xvdWRDdXN0b21EYXRhJiYhKCF0aGlzLl9pc0Zyb21PbGRlclZlcnNpb24oZSl8fGUudHlwZSE9PXJvLk1TR19BVURJTyYmZS50eXBlIT09cm8uTVNHX0ZJTEUmJmUudHlwZSE9PXJvLk1TR19WSURFTyl9fSx7a2V5OlwiX3BhcnNlRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7c3dpdGNoKGUudHlwZSl7Y2FzZSByby5NU0dfQVVESU86cmV0dXJuIHRoaXMuX3BhcnNlQXVkaW9FbGVtZW50KGUsdCk7Y2FzZSByby5NU0dfRklMRTpyZXR1cm4gdGhpcy5fcGFyc2VGaWxlRWxlbWVudChlLHQpO2Nhc2Ugcm8uTVNHX1ZJREVPOnJldHVybiB0aGlzLl9wYXJzZVZpZGVvRWxlbWVudChlLHQpfX19LHtrZXk6XCJfcGFyc2VBdWRpb0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLmNvbnRlbnQudXJsPXRoaXMuX2dlbkF1ZGlvVXJsKGUuY29udGVudC51dWlkLHQpLGV9fSx7a2V5OlwiX3BhcnNlRmlsZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLmNvbnRlbnQudXJsPXRoaXMuX2dlbkZpbGVVcmwoZS5jb250ZW50LnV1aWQsdCxlLmNvbnRlbnQuZmlsZU5hbWUpLGV9fSx7a2V5OlwiX3BhcnNlVmlkZW9FbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5jb250ZW50LnVybD10aGlzLl9nZW5WaWRlb1VybChlLmNvbnRlbnQudXVpZCx0KSxlfX0se2tleTpcIl9nZW5BdWRpb1VybFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoXCJcIj09PXRoaXMuX2F1dGhLZXkpcmV0dXJuIEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9nZW5BdWRpb1VybCBubyBhdXRoS2V5IVwiKSksXCJcIjt2YXIgbj10aGlzLmdldE1vZHVsZShYYykuZ2V0U0RLQXBwSUQoKTtyZXR1cm5cImh0dHBzOi8vXCIuY29uY2F0KHRoaXMuX2JkaF9kb3dubG9hZF9zZXJ2ZXIsXCIvYXNuLmNvbS9zdGRkb3dubG9hZF9jb21tb25fZmlsZT9hdXRoa2V5PVwiKS5jb25jYXQodGhpcy5fYXV0aEtleSxcIiZiaWQ9XCIpLmNvbmNhdCh0aGlzLl9CREhCaXpJRCxcIiZzdWJiaWQ9XCIpLmNvbmNhdChuLFwiJmZpbGVpZD1cIikuY29uY2F0KGUsXCImZmlsZXR5cGU9XCIpLmNvbmNhdCh0aGlzLkZJTEVUWVBFLlNPVU5ELFwiJm9wZW5pZD1cIikuY29uY2F0KHQsXCImdmVyPTBcIil9fSx7a2V5OlwiX2dlbkZpbGVVcmxcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7aWYoXCJcIj09PXRoaXMuX2F1dGhLZXkpcmV0dXJuIEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9nZW5GaWxlVXJsIG5vIGF1dGhLZXkhXCIpKSxcIlwiO258fChuPVwiXCIuY29uY2F0KE1hdGguZmxvb3IoMWU1Kk1hdGgucmFuZG9tKCkpLFwiLVwiKS5jb25jYXQoRGF0ZS5ub3coKSkpO3ZhciBvPXRoaXMuZ2V0TW9kdWxlKFhjKS5nZXRTREtBcHBJRCgpO3JldHVyblwiaHR0cHM6Ly9cIi5jb25jYXQodGhpcy5fYmRoX2Rvd25sb2FkX3NlcnZlcixcIi9hc24uY29tL3N0ZGRvd25sb2FkX2NvbW1vbl9maWxlP2F1dGhrZXk9XCIpLmNvbmNhdCh0aGlzLl9hdXRoS2V5LFwiJmJpZD1cIikuY29uY2F0KHRoaXMuX0JESEJpeklELFwiJnN1YmJpZD1cIikuY29uY2F0KG8sXCImZmlsZWlkPVwiKS5jb25jYXQoZSxcIiZmaWxldHlwZT1cIikuY29uY2F0KHRoaXMuRklMRVRZUEUuRklMRSxcIiZvcGVuaWQ9XCIpLmNvbmNhdCh0LFwiJnZlcj0wJmZpbGVuYW1lPVwiKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KG4pKX19LHtrZXk6XCJfZ2VuVmlkZW9VcmxcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKFwiXCI9PT10aGlzLl9hdXRoS2V5KXJldHVybiBLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZ2VuVmlkZW9Vcmwgbm8gYXV0aEtleSFcIikpLFwiXCI7dmFyIG49dGhpcy5nZXRNb2R1bGUoWGMpLmdldFNES0FwcElEKCk7cmV0dXJuXCJodHRwczovL1wiLmNvbmNhdCh0aGlzLl9iZGhfZG93bmxvYWRfc2VydmVyLFwiL2Fzbi5jb20vc3RkZG93bmxvYWRfY29tbW9uX2ZpbGU/YXV0aGtleT1cIikuY29uY2F0KHRoaXMuX2F1dGhLZXksXCImYmlkPVwiKS5jb25jYXQodGhpcy5fQkRIQml6SUQsXCImc3ViYmlkPVwiKS5jb25jYXQobixcIiZmaWxlaWQ9XCIpLmNvbmNhdChlLFwiJmZpbGV0eXBlPVwiKS5jb25jYXQodGhpcy5GSUxFVFlQRS5WSURFTyxcIiZvcGVuaWQ9XCIpLmNvbmNhdCh0LFwiJnZlcj0wXCIpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9hdXRoS2V5PVwiXCIsdGhpcy5leHBpcmVUaW1lPTB9fV0pLG59KGRsKSx1TT1mdW5jdGlvbihlKXtpKHIsZSk7dmFyIG49XyhyKTtmdW5jdGlvbiByKGUpe3ZhciB0O3JldHVybiBvKHRoaXMsciksKHQ9bi5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJVcGxvYWRNb2R1bGVcIix0LlRJTVVwbG9hZFBsdWdpbj1udWxsLHQudGltVXBsb2FkUGx1Z2luPW51bGwsdC5DT1NTREs9bnVsbCx0Ll9jb3NVcGxvYWRNZXRob2Q9bnVsbCx0LmV4cGlyZWRUaW1lTGltaXQ9NjAwLHQuYXBwaWQ9MCx0LmJ1Y2tldE5hbWU9XCJcIix0LmNpVXJsPVwiXCIsdC5kaXJlY3Rvcnk9XCJcIix0LmRvd25sb2FkVXJsPVwiXCIsdC51cGxvYWRVcmw9XCJcIix0LnJlZ2lvbj1cImFwLXNoYW5naGFpXCIsdC5jb3M9bnVsbCx0LmNvc09wdGlvbnM9e3NlY3JldElkOlwiXCIsc2VjcmV0S2V5OlwiXCIsc2Vzc2lvblRva2VuOlwiXCIsZXhwaXJlZFRpbWU6MH0sdC51cGxvYWRGaWxlVHlwZT1cIlwiLHQuZHVyYXRpb249OTAwLHQudHJ5Q291bnQ9MCx0LmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oZ3YuQ09OVEVYVF9BMktFWV9BTkRfVElOWUlEX1VQREFURUQsdC5faW5pdCxoKHQpKSx0fXJldHVybiBhKHIsW3trZXk6XCJfaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9pbml0XCIpLHQ9dGhpcy5nZXRNb2R1bGUob2wpO2lmKHRoaXMuVElNVXBsb2FkUGx1Z2luPXQuZ2V0UGx1Z2luKFwidGltLXVwbG9hZC1wbHVnaW5cIiksdGhpcy5USU1VcGxvYWRQbHVnaW4pdGhpcy5faW5pdFVwbG9hZGVyTWV0aG9kKCk7ZWxzZXt2YXIgbj1haT9cImNvcy13eC1zZGtcIjpcImNvcy1qcy1zZGtcIjt0aGlzLkNPU1NESz10LmdldFBsdWdpbihuKSx0aGlzLkNPU1NESz8odGhpcy5fZ2V0QXV0aG9yaXphdGlvbktleSgpLEtpLndhcm4oXCJcIi5jb25jYXQoZSxcIiB2Mi45LjLotbfmjqjojZDkvb/nlKggdGltLXVwbG9hZC1wbHVnaW4g5Luj5pu/IFwiKS5jb25jYXQobixcIu+8jOS4iuS8oOabtOW/q+abtOWuieWFqOOAguivpue7huivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjcmVnaXN0ZXJQbHVnaW5cIikpKTpLaS53YXJuKFwiXCIuY29uY2F0KGUsXCIg5rKh5pyJ5qOA5rWL5Yiw5LiK5Lyg5o+S5Lu277yM5bCG5peg5rOV5Y+R6YCB5Zu+54mH44CB6Z+z6aKR44CB6KeG6aKR44CB5paH5Lu2562J57G75Z6L55qE5raI5oGv44CC6K+m57uG6K+35Y+C6ICDIGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9TREsuaHRtbCNyZWdpc3RlclBsdWdpblwiKSl9fX0se2tleTpcIl9nZXRBdXRob3JpemF0aW9uS2V5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IGxnKElnKSxuPU1hdGguY2VpbChEYXRlLm5vdygpLzFlMyk7dGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6RWQscmVxdWVzdERhdGE6e2R1cmF0aW9uOnRoaXMuZXhwaXJlZFRpbWVMaW1pdH19KS50aGVuKChmdW5jdGlvbihvKXt2YXIgcj1vLmRhdGE7S2kubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fZ2V0QXV0aG9yaXphdGlvbktleSBvay4gZGF0YTpcIikscik7dmFyIGE9ci5leHBpcmVkVGltZS1uO3Quc2V0TWVzc2FnZShcInJlcXVlc3RJZDpcIi5jb25jYXQoci5yZXF1ZXN0SWQsXCIgcmVxdWVzdFRpbWU6XCIpLmNvbmNhdChuLFwiIGV4cGlyZWRUaW1lOlwiKS5jb25jYXQoci5leHBpcmVkVGltZSxcIiBkaWZmOlwiKS5jb25jYXQoYSxcInNcIikpLnNldE5ldHdvcmtUeXBlKGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksIWFpJiZyLnJlZ2lvbiYmKGUucmVnaW9uPXIucmVnaW9uKSxlLmFwcGlkPXIuYXBwaWQsZS5idWNrZXROYW1lPXIuYnVja2V0TmFtZSxlLmNpVXJsPXIuY2lVcmwsZS5kaXJlY3Rvcnk9ci5kaXJlY3RvcnksZS5kb3dubG9hZFVybD1yLmRvd25sb2FkVXJsLGUudXBsb2FkVXJsPXIudXBsb2FkVXJsLGUuY29zT3B0aW9ucz17c2VjcmV0SWQ6ci5zZWNyZXRJZCxzZWNyZXRLZXk6ci5zZWNyZXRLZXksc2Vzc2lvblRva2VuOnIuc2Vzc2lvblRva2VuLGV4cGlyZWRUaW1lOnIuZXhwaXJlZFRpbWV9LEtpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2dldEF1dGhvcml6YXRpb25LZXkgb2suIHJlZ2lvbjpcIikuY29uY2F0KGUucmVnaW9uLFwiIGJ1Y2tldE5hbWU6XCIpLmNvbmNhdChlLmJ1Y2tldE5hbWUpKSxlLl9pbml0VXBsb2FkZXJNZXRob2QoKX0pKS5jYXRjaCgoZnVuY3Rpb24obil7ZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz1tKGUsMikscj1vWzBdLGE9b1sxXTt0LnNldEVycm9yKG4scixhKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fZ2V0QXV0aG9yaXphdGlvbktleSBmYWlsZWQuIGVycm9yOlwiKSxuKX0pKX19LHtrZXk6XCJfZ2V0Q29zUHJlU2lnVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZ2V0Q29zUHJlU2lnVXJsXCIpLG89TWF0aC5jZWlsKERhdGUubm93KCkvMWUzKSxyPW5ldyBsZyhUZyk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkFkLHJlcXVlc3REYXRhOntmaWxlVHlwZTplLmZpbGVUeXBlLGZpbGVOYW1lOmUuZmlsZU5hbWUsdXBsb2FkTWV0aG9kOmUudXBsb2FkTWV0aG9kLGR1cmF0aW9uOmUuZHVyYXRpb259fSkudGhlbigoZnVuY3Rpb24oZSl7dC50cnlDb3VudD0wO3ZhciBhPWUuZGF0YXx8e30scz1hLmV4cGlyZWRUaW1lLW87cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBkYXRhOlwiKSxhKSxyLnNldE1lc3NhZ2UoXCJyZXF1ZXN0SWQ6XCIuY29uY2F0KGEucmVxdWVzdElkLFwiIGV4cGlyZWRUaW1lOlwiKS5jb25jYXQoYS5leHBpcmVkVGltZSxcIiBkaWZmOlwiKS5jb25jYXQocyxcInNcIikpLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksYX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuLTE9PT1vLmNvZGUmJihvLmNvZGU9UGQuQ09TX0dFVF9TSUdfRkFJTCksdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1tKGUsMiksbj10WzBdLGE9dFsxXTtyLnNldEVycm9yKG8sbixhKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksbyksdC50cnlDb3VudDwxPyh0LnRyeUNvdW50KyssdC5fZ2V0Q29zUHJlU2lnVXJsKGUpKToodC50cnlDb3VudD0wLFltKHtjb2RlOlBkLkNPU19HRVRfU0lHX0ZBSUwsbWVzc2FnZTpqZH0pKX0pKX19LHtrZXk6XCJfaW5pdFVwbG9hZGVyTWV0aG9kXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMuVElNVXBsb2FkUGx1Z2luKXJldHVybiB0aGlzLnRpbVVwbG9hZFBsdWdpbj1uZXcgdGhpcy5USU1VcGxvYWRQbHVnaW4sdm9pZCh0aGlzLl9jb3NVcGxvYWRNZXRob2Q9ZnVuY3Rpb24odCxuKXtlLnRpbVVwbG9hZFBsdWdpbi51cGxvYWRGaWxlKHQsbil9KTt0aGlzLmFwcGlkJiYodGhpcy5jb3M9YWk/bmV3IHRoaXMuQ09TU0RLKHtGb3JjZVBhdGhTdHlsZTohMCxnZXRBdXRob3JpemF0aW9uOnRoaXMuX2dldEF1dGhvcml6YXRpb24uYmluZCh0aGlzKX0pOm5ldyB0aGlzLkNPU1NESyh7Z2V0QXV0aG9yaXphdGlvbjp0aGlzLl9nZXRBdXRob3JpemF0aW9uLmJpbmQodGhpcyl9KSx0aGlzLl9jb3NVcGxvYWRNZXRob2Q9YWk/ZnVuY3Rpb24odCxuKXtlLmNvcy5wb3N0T2JqZWN0KHQsbil9OmZ1bmN0aW9uKHQsbil7ZS5jb3MudXBsb2FkRmlsZXModCxuKX0pfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuQ09TU0RLJiYodGhpcy5USU1VcGxvYWRQbHVnaW58fHRoaXMuaXNMb2dnZWRJbigpJiZlJTYwPT0wJiZNYXRoLmNlaWwoRGF0ZS5ub3coKS8xZTMpPj10aGlzLmNvc09wdGlvbnMuZXhwaXJlZFRpbWUtMTIwJiZ0aGlzLl9nZXRBdXRob3JpemF0aW9uS2V5KCkpfX0se2tleTpcIl9nZXRBdXRob3JpemF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0KHtUbXBTZWNyZXRJZDp0aGlzLmNvc09wdGlvbnMuc2VjcmV0SWQsVG1wU2VjcmV0S2V5OnRoaXMuY29zT3B0aW9ucy5zZWNyZXRLZXksWENvc1NlY3VyaXR5VG9rZW46dGhpcy5jb3NPcHRpb25zLnNlc3Npb25Ub2tlbixFeHBpcmVkVGltZTp0aGlzLmNvc09wdGlvbnMuZXhwaXJlZFRpbWV9KX19LHtrZXk6XCJ1cGxvYWRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZighMD09PWUuZ2V0UmVsYXlGbGFnKCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3ZhciB0PXRoaXMuZ2V0TW9kdWxlKGxsKTtzd2l0Y2goZS50eXBlKXtjYXNlIHJvLk1TR19JTUFHRTpyZXR1cm4gdC5hZGRUb3RhbENvdW50KG9nKSx0aGlzLl91cGxvYWRJbWFnZShlKTtjYXNlIHJvLk1TR19GSUxFOnJldHVybiB0LmFkZFRvdGFsQ291bnQob2cpLHRoaXMuX3VwbG9hZEZpbGUoZSk7Y2FzZSByby5NU0dfQVVESU86cmV0dXJuIHQuYWRkVG90YWxDb3VudChvZyksdGhpcy5fdXBsb2FkQXVkaW8oZSk7Y2FzZSByby5NU0dfVklERU86cmV0dXJuIHQuYWRkVG90YWxDb3VudChvZyksdGhpcy5fdXBsb2FkVmlkZW8oZSk7ZGVmYXVsdDpyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9fX0se2tleTpcIl91cGxvYWRJbWFnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuZ2V0TW9kdWxlKEhjKSxvPWUuZ2V0RWxlbWVudHMoKVswXSxyPW4uZ2V0TWVzc2FnZU9wdGlvbkJ5SUQoZS5JRCk7cmV0dXJuIHRoaXMuZG9VcGxvYWRJbWFnZSh7ZmlsZTpyLnBheWxvYWQuZmlsZSx0bzpyLnRvLG9uUHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7aWYoby51cGRhdGVQZXJjZW50KGUpLFFpKHIub25Qcm9ncmVzcykpdHJ5e3Iub25Qcm9ncmVzcyhlKX1jYXRjaCh0KXtyZXR1cm4gWW0oe2NvZGU6UGQuTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SLG1lc3NhZ2U6SmR9KX19fSkudGhlbigoZnVuY3Rpb24obil7dmFyIHI9bi5sb2NhdGlvbixhPW4uZmlsZVR5cGUscz1uLmZpbGVTaXplLGk9bi53aWR0aCx1PW4uaGVpZ2h0LGM9Z3Uocik7by51cGRhdGVJbWFnZUZvcm1hdChhKTt2YXIgbD1TdSh7b3JpZ2luVXJsOmMsb3JpZ2luV2lkdGg6aSxvcmlnaW5IZWlnaHQ6dSxtaW46MTk4fSksZD1TdSh7b3JpZ2luVXJsOmMsb3JpZ2luV2lkdGg6aSxvcmlnaW5IZWlnaHQ6dSxtaW46NzIwfSk7cmV0dXJuIG8udXBkYXRlSW1hZ2VJbmZvQXJyYXkoW3tzaXplOnMsdXJsOmMsd2lkdGg6aSxoZWlnaHQ6dX0sdCh7fSxkKSx0KHt9LGwpXSksZX0pKX19LHtrZXk6XCJfdXBsb2FkRmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TW9kdWxlKEhjKSxuPWUuZ2V0RWxlbWVudHMoKVswXSxvPXQuZ2V0TWVzc2FnZU9wdGlvbkJ5SUQoZS5JRCk7cmV0dXJuIHRoaXMuZG9VcGxvYWRGaWxlKHtmaWxlOm8ucGF5bG9hZC5maWxlLHRvOm8udG8sb25Qcm9ncmVzczpmdW5jdGlvbihlKXtpZihuLnVwZGF0ZVBlcmNlbnQoZSksUWkoby5vblByb2dyZXNzKSl0cnl7by5vblByb2dyZXNzKGUpfWNhdGNoKHQpe3JldHVybiBZbSh7Y29kZTpQZC5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1IsbWVzc2FnZTpKZH0pfX19KS50aGVuKChmdW5jdGlvbih0KXt2YXIgbz10LmxvY2F0aW9uLHI9Z3Uobyk7cmV0dXJuIG4udXBkYXRlRmlsZVVybChyKSxlfSkpfX0se2tleTpcIl91cGxvYWRBdWRpb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TW9kdWxlKEhjKSxuPWUuZ2V0RWxlbWVudHMoKVswXSxvPXQuZ2V0TWVzc2FnZU9wdGlvbkJ5SUQoZS5JRCk7cmV0dXJuIHRoaXMuZG9VcGxvYWRBdWRpbyh7ZmlsZTpvLnBheWxvYWQuZmlsZSx0bzpvLnRvLG9uUHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7aWYobi51cGRhdGVQZXJjZW50KGUpLFFpKG8ub25Qcm9ncmVzcykpdHJ5e28ub25Qcm9ncmVzcyhlKX1jYXRjaCh0KXtyZXR1cm4gWW0oe2NvZGU6UGQuTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SLG1lc3NhZ2U6SmR9KX19fSkudGhlbigoZnVuY3Rpb24odCl7dmFyIG89dC5sb2NhdGlvbixyPWd1KG8pO3JldHVybiBuLnVwZGF0ZUF1ZGlvVXJsKHIpLGV9KSl9fSx7a2V5OlwiX3VwbG9hZFZpZGVvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNb2R1bGUoSGMpLG49ZS5nZXRFbGVtZW50cygpWzBdLG89dC5nZXRNZXNzYWdlT3B0aW9uQnlJRChlLklEKTtyZXR1cm4gdGhpcy5kb1VwbG9hZFZpZGVvKHtmaWxlOm8ucGF5bG9hZC5maWxlLHRvOm8udG8sb25Qcm9ncmVzczpmdW5jdGlvbihlKXtpZihuLnVwZGF0ZVBlcmNlbnQoZSksUWkoby5vblByb2dyZXNzKSl0cnl7by5vblByb2dyZXNzKGUpfWNhdGNoKHQpe3JldHVybiBZbSh7Y29kZTpQZC5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1IsbWVzc2FnZTpKZH0pfX19KS50aGVuKChmdW5jdGlvbih0KXt2YXIgbz1ndSh0LmxvY2F0aW9uKTtyZXR1cm4gbi51cGRhdGVWaWRlb1VybChvKSxlfSkpfX0se2tleTpcImRvVXBsb2FkSW1hZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZS5maWxlKXJldHVybiBZbSh7Y29kZTpQZC5NRVNTQUdFX0lNQUdFX1NFTEVDVF9GSUxFX0ZJUlNULG1lc3NhZ2U6WmR9KTt2YXIgdD10aGlzLl9jaGVja0ltYWdlVHlwZShlLmZpbGUpO2lmKCEwIT09dClyZXR1cm4gdDt2YXIgbj10aGlzLl9jaGVja0ltYWdlU2l6ZShlLmZpbGUpO2lmKCEwIT09bilyZXR1cm4gbjt2YXIgbz1udWxsO3JldHVybiB0aGlzLl9zZXRVcGxvYWRGaWxlVHlwZShtdiksdGhpcy51cGxvYWRCeUNPUyhlKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gbz1lLHQ9XCJodHRwczovL1wiLmNvbmNhdChlLmxvY2F0aW9uKSxhaT9uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxuKXtpaS5nZXRJbWFnZUluZm8oe3NyYzp0LHN1Y2Nlc3M6ZnVuY3Rpb24odCl7ZSh7d2lkdGg6dC53aWR0aCxoZWlnaHQ6dC5oZWlnaHR9KX0sZmFpbDpmdW5jdGlvbigpe2Uoe3dpZHRoOjAsaGVpZ2h0OjB9KX19KX0pKTpNaSYmOT09PXlpP1Byb21pc2UucmVzb2x2ZSh7d2lkdGg6MCxoZWlnaHQ6MH0pOm5ldyBQcm9taXNlKChmdW5jdGlvbihlLG4pe3ZhciBvPW5ldyBJbWFnZTtvLm9ubG9hZD1mdW5jdGlvbigpe2Uoe3dpZHRoOnRoaXMud2lkdGgsaGVpZ2h0OnRoaXMuaGVpZ2h0fSksbz1udWxsfSxvLm9uZXJyb3I9ZnVuY3Rpb24oKXtlKHt3aWR0aDowLGhlaWdodDowfSksbz1udWxsfSxvLnNyYz10fSkpO3ZhciB0fSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBvLndpZHRoPWUud2lkdGgsby5oZWlnaHQ9ZS5oZWlnaHQsUHJvbWlzZS5yZXNvbHZlKG8pfSkpfX0se2tleTpcIl9jaGVja0ltYWdlVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCI7cmV0dXJuIHQ9YWk/ZS51cmwuc2xpY2UoZS51cmwubGFzdEluZGV4T2YoXCIuXCIpKzEpOmUuZmlsZXNbMF0ubmFtZS5zbGljZShlLmZpbGVzWzBdLm5hbWUubGFzdEluZGV4T2YoXCIuXCIpKzEpLGZ2LmluZGV4T2YodC50b0xvd2VyQ2FzZSgpKT49MHx8WW0oe2NvZGU6UGQuTUVTU0FHRV9JTUFHRV9UWVBFU19MSU1JVCxtZXNzYWdlOmVwfSl9fSx7a2V5OlwiX2NoZWNrSW1hZ2VTaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9MDtyZXR1cm4gMD09PSh0PWFpP2Uuc2l6ZTplLmZpbGVzWzBdLnNpemUpP1ltKHtjb2RlOlBkLk1FU1NBR0VfRklMRV9JU19FTVBUWSxtZXNzYWdlOlwiXCIuY29uY2F0KHpkKX0pOnQ8MjA5NzE1MjB8fFltKHtjb2RlOlBkLk1FU1NBR0VfSU1BR0VfU0laRV9MSU1JVCxtZXNzYWdlOlwiXCIuY29uY2F0KHRwKX0pfX0se2tleTpcImRvVXBsb2FkRmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7cmV0dXJuIGUuZmlsZT9lLmZpbGUuZmlsZXNbMF0uc2l6ZT4xMDQ4NTc2MDA/WW0odD17Y29kZTpQZC5NRVNTQUdFX0ZJTEVfU0laRV9MSU1JVCxtZXNzYWdlOmNwfSk6MD09PWUuZmlsZS5maWxlc1swXS5zaXplPyh0PXtjb2RlOlBkLk1FU1NBR0VfRklMRV9JU19FTVBUWSxtZXNzYWdlOlwiXCIuY29uY2F0KHpkKX0sWW0odCkpOih0aGlzLl9zZXRVcGxvYWRGaWxlVHlwZSh5diksdGhpcy51cGxvYWRCeUNPUyhlKSk6WW0odD17Y29kZTpQZC5NRVNTQUdFX0ZJTEVfU0VMRUNUX0ZJTEVfRklSU1QsbWVzc2FnZTp1cH0pfX0se2tleTpcImRvVXBsb2FkVmlkZW9cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5maWxlLnZpZGVvRmlsZS5zaXplPjEwNDg1NzYwMD9ZbSh7Y29kZTpQZC5NRVNTQUdFX1ZJREVPX1NJWkVfTElNSVQsbWVzc2FnZTpcIlwiLmNvbmNhdChhcCl9KTowPT09ZS5maWxlLnZpZGVvRmlsZS5zaXplP1ltKHtjb2RlOlBkLk1FU1NBR0VfRklMRV9JU19FTVBUWSxtZXNzYWdlOlwiXCIuY29uY2F0KHpkKX0pOi0xPT09X3YuaW5kZXhPZihlLmZpbGUudmlkZW9GaWxlLnR5cGUpP1ltKHtjb2RlOlBkLk1FU1NBR0VfVklERU9fVFlQRVNfTElNSVQsbWVzc2FnZTpcIlwiLmNvbmNhdChzcCl9KToodGhpcy5fc2V0VXBsb2FkRmlsZVR5cGUodnYpLGFpP3RoaXMuaGFuZGxlVmlkZW9VcGxvYWQoe2ZpbGU6ZS5maWxlLnZpZGVvRmlsZSxvblByb2dyZXNzOmUub25Qcm9ncmVzc30pOnNpP3RoaXMuaGFuZGxlVmlkZW9VcGxvYWQoZSk6dm9pZCAwKX19LHtrZXk6XCJoYW5kbGVWaWRlb1VwbG9hZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLG8pe3QudXBsb2FkQnlDT1MoZSkudGhlbigoZnVuY3Rpb24oZSl7bihlKX0pKS5jYXRjaCgoZnVuY3Rpb24oKXt0LnVwbG9hZEJ5Q09TKGUpLnRoZW4oKGZ1bmN0aW9uKGUpe24oZSl9KSkuY2F0Y2goKGZ1bmN0aW9uKCl7byhuZXcgS20oe2NvZGU6UGQuTUVTU0FHRV9WSURFT19VUExPQURfRkFJTCxtZXNzYWdlOnJwfSkpfSkpfSkpfSkpfX0se2tleTpcImRvVXBsb2FkQXVkaW9cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5maWxlP2UuZmlsZS5zaXplPjIwOTcxNTIwP1ltKG5ldyBLbSh7Y29kZTpQZC5NRVNTQUdFX0FVRElPX1NJWkVfTElNSVQsbWVzc2FnZTpcIlwiLmNvbmNhdChvcCl9KSk6MD09PWUuZmlsZS5zaXplP1ltKG5ldyBLbSh7Y29kZTpQZC5NRVNTQUdFX0ZJTEVfSVNfRU1QVFksbWVzc2FnZTpcIlwiLmNvbmNhdCh6ZCl9KSk6KHRoaXMuX3NldFVwbG9hZEZpbGVUeXBlKE12KSx0aGlzLnVwbG9hZEJ5Q09TKGUpKTpZbShuZXcgS20oe2NvZGU6UGQuTUVTU0FHRV9BVURJT19VUExPQURfRkFJTCxtZXNzYWdlOm5wfSkpfX0se2tleTpcInVwbG9hZEJ5Q09TXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGxvYWRCeUNPU1wiKTtpZighUWkodGhpcy5fY29zVXBsb2FkTWV0aG9kKSlyZXR1cm4gS2kud2FybihcIlwiLmNvbmNhdChuLFwiIOayoeacieajgOa1i+WIsOS4iuS8oOaPkuS7tu+8jOWwhuaXoOazleWPkemAgeWbvueJh+OAgemfs+mikeOAgeinhumikeOAgeaWh+S7tuetieexu+Wei+eahOa2iOaBr+OAguivpue7huivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjcmVnaXN0ZXJQbHVnaW5cIikpLFltKHtjb2RlOlBkLkNPU19VTkRFVEVDVEVELG1lc3NhZ2U6SGR9KTtpZih0aGlzLnRpbVVwbG9hZFBsdWdpbilyZXR1cm4gdGhpcy5fdXBsb2FkV2l0aFByZVNpZ1VybChlKTt2YXIgbz1uZXcgbGcoRGcpLHI9RGF0ZS5ub3coKSxhPWFpP2UuZmlsZTplLmZpbGUuZmlsZXNbMF07cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihzLGkpe3ZhciB1PWFpP3QuX2NyZWF0ZUNvc09wdGlvbnNXWE1pbmlBcHAoZSk6dC5fY3JlYXRlQ29zT3B0aW9uc1dlYihlKSxjPXQ7dC5fY29zVXBsb2FkTWV0aG9kKHUsKGZ1bmN0aW9uKGUsdSl7dmFyIGw9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih1KXtpZihlfHx6aSh1LmZpbGVzKSYmdS5maWxlc1swXS5lcnJvcil7dmFyIGQ9bmV3IEttKHtjb2RlOlBkLk1FU1NBR0VfRklMRV9VUExPQURfRkFJTCxtZXNzYWdlOmlwfSk7cmV0dXJuIG8uc2V0RXJyb3IoZCwhMCx0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLHUuZmlsZXNbMF0uZXJyb3IpLDQwMz09PXUuZmlsZXNbMF0uZXJyb3Iuc3RhdHVzQ29kZSYmKEtpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGNvcyBBY2Nlc3NLZXlJZCB3YXMgaW52YWxpZCwgcmVnYWluIGF1dGgga2V5IVwiKSksdC5fZ2V0QXV0aG9yaXphdGlvbktleSgpKSx2b2lkIGkoZCl9bC5maWxlTmFtZT1hLm5hbWUsbC5maWxlU2l6ZT1hLnNpemUsbC5maWxlVHlwZT1hLnR5cGUuc2xpY2UoYS50eXBlLmluZGV4T2YoXCIvXCIpKzEpLnRvTG93ZXJDYXNlKCksbC5sb2NhdGlvbj1haT91LkxvY2F0aW9uOnUuZmlsZXNbMF0uZGF0YS5Mb2NhdGlvbjt2YXIgcD1EYXRlLm5vdygpLXIsZz1jLl9mb3JtYXRGaWxlU2l6ZShhLnNpemUpLGg9Yy5fZm9ybWF0U3BlZWQoMWUzKmEuc2l6ZS9wKSxmPVwic2l6ZTpcIi5jb25jYXQoZyxcIiB0aW1lOlwiKS5jb25jYXQocCxcIm1zIHNwZWVkOlwiKS5jb25jYXQoaCk7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgc3VjY2Vzcy4gbmFtZTpcIikuY29uY2F0KGEubmFtZSxcIiBcIikuY29uY2F0KGYpKSxzKGwpO3ZhciBfPXQuZ2V0TW9kdWxlKGxsKTtyZXR1cm4gXy5hZGRDb3N0KG9nLHApLF8uYWRkRmlsZVNpemUob2csYS5zaXplKSx2b2lkIG8uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGYpLmVuZCgpfXZhciBtPW5ldyBLbSh7Y29kZTpQZC5NRVNTQUdFX0ZJTEVfVVBMT0FEX0ZBSUwsbWVzc2FnZTppcH0pO28uc2V0RXJyb3IobSwhMCxjLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSw0MDM9PT1lLnN0YXR1c0NvZGUmJihLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBjb3MgQWNjZXNzS2V5SWQgd2FzIGludmFsaWQsIHJlZ2FpbiBhdXRoIGtleSFcIikpLHQuX2dldEF1dGhvcml6YXRpb25LZXkoKSksaShtKX0pKX0pKX19LHtrZXk6XCJfdXBsb2FkV2l0aFByZVNpZ1VybFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3VwbG9hZFdpdGhQcmVTaWdVcmxcIiksbz1haT9lLmZpbGU6ZS5maWxlLmZpbGVzWzBdO3JldHVybiB0aGlzLl9jcmVhdGVDb3NPcHRpb25zUHJlU2lnVXJsKGUpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocixhKXt2YXIgcz1uZXcgbGcoRGcpO0tpLnRpbWUoSnApLHQuX2Nvc1VwbG9hZE1ldGhvZChlLChmdW5jdGlvbihlLGkpe3ZhciB1PU9iamVjdC5jcmVhdGUobnVsbCk7aWYoZXx8NDAzPT09aS5zdGF0dXNDb2RlKXt2YXIgYz1uZXcgS20oe2NvZGU6UGQuTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMLG1lc3NhZ2U6aXB9KTtyZXR1cm4gcy5zZXRFcnJvcihjLCEwLHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLCBlcnJvcjpcIiksZSksdm9pZCBhKGMpfXZhciBsPWkuZGF0YS5sb2NhdGlvbnx8XCJcIjswIT09bC5pbmRleE9mKFwiaHR0cHM6Ly9cIikmJjAhPT1sLmluZGV4T2YoXCJodHRwOi8vXCIpfHwobD1sLnNwbGl0KFwiLy9cIilbMV0pLHUuZmlsZU5hbWU9by5uYW1lLHUuZmlsZVNpemU9by5zaXplLHUuZmlsZVR5cGU9by50eXBlLnNsaWNlKG8udHlwZS5pbmRleE9mKFwiL1wiKSsxKS50b0xvd2VyQ2FzZSgpLHUubG9jYXRpb249bDt2YXIgZD1LaS50aW1lRW5kKEpwKSxwPXQuX2Zvcm1hdEZpbGVTaXplKG8uc2l6ZSksZz10Ll9mb3JtYXRTcGVlZCgxZTMqby5zaXplL2QpLGg9XCJzaXplOlwiLmNvbmNhdChwLFwiLHRpbWU6XCIpLmNvbmNhdChkLFwibXMsc3BlZWQ6XCIpLmNvbmNhdChnKTtLaS5sb2coXCJcIi5jb25jYXQobixcIiBzdWNjZXNzIG5hbWU6XCIpLmNvbmNhdChvLm5hbWUsXCIsXCIpLmNvbmNhdChoKSkscy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoaCkuZW5kKCk7dmFyIGY9dC5nZXRNb2R1bGUobGwpO2YuYWRkQ29zdChvZyxkKSxmLmFkZEZpbGVTaXplKG9nLG8uc2l6ZSkscih1KX0pKX0pKX0pKX19LHtrZXk6XCJfZm9ybWF0RmlsZVNpemVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZTwxMDI0P2UrXCJCXCI6ZTwxMDQ4NTc2P01hdGguZmxvb3IoZS8xMDI0KStcIktCXCI6TWF0aC5mbG9vcihlLzEwNDg1NzYpK1wiTUJcIn19LHtrZXk6XCJfZm9ybWF0U3BlZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZTw9MTA0ODU3Nj9rdShlLzEwMjQsMSkrXCJLQi9zXCI6a3UoZS8xMDQ4NTc2LDEpK1wiTUIvc1wifX0se2tleTpcIl9jcmVhdGVDb3NPcHRpb25zV2ViXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNeVVzZXJJRCgpLG49dGhpcy5fZ2VuRmlsZU5hbWUodCxlLnRvLGUuZmlsZS5maWxlc1swXS5uYW1lKTtyZXR1cm57ZmlsZXM6W3tCdWNrZXQ6XCJcIi5jb25jYXQodGhpcy5idWNrZXROYW1lLFwiLVwiKS5jb25jYXQodGhpcy5hcHBpZCksUmVnaW9uOnRoaXMucmVnaW9uLEtleTpcIlwiLmNvbmNhdCh0aGlzLmRpcmVjdG9yeSxcIi9cIikuY29uY2F0KG4pLEJvZHk6ZS5maWxlLmZpbGVzWzBdfV0sU2xpY2VTaXplOjEwNDg1NzYsb25Qcm9ncmVzczpmdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uUHJvZ3Jlc3MpdHJ5e2Uub25Qcm9ncmVzcyh0LnBlcmNlbnQpfWNhdGNoKG4pe0tpLndhcm4oXCJvblByb2dyZXNzIGNhbGxiYWNrIGVycm9yOlwiLG4pfX0sb25GaWxlRmluaXNoOmZ1bmN0aW9uKGUsdCxuKXt9fX19LHtrZXk6XCJfY3JlYXRlQ29zT3B0aW9uc1dYTWluaUFwcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TXlVc2VySUQoKSxuPXRoaXMuX2dlbkZpbGVOYW1lKHQsZS50byxlLmZpbGUubmFtZSksbz1lLmZpbGUudXJsO3JldHVybntCdWNrZXQ6XCJcIi5jb25jYXQodGhpcy5idWNrZXROYW1lLFwiLVwiKS5jb25jYXQodGhpcy5hcHBpZCksUmVnaW9uOnRoaXMucmVnaW9uLEtleTpcIlwiLmNvbmNhdCh0aGlzLmRpcmVjdG9yeSxcIi9cIikuY29uY2F0KG4pLEZpbGVQYXRoOm8sb25Qcm9ncmVzczpmdW5jdGlvbih0KXtpZihLaS5sb2coSlNPTi5zdHJpbmdpZnkodCkpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGUub25Qcm9ncmVzcyl0cnl7ZS5vblByb2dyZXNzKHQucGVyY2VudCl9Y2F0Y2gobil7S2kud2FybihcIm9uUHJvZ3Jlc3MgY2FsbGJhY2sgZXJyb3I6XCIsbil9fX19fSx7a2V5OlwiX2NyZWF0ZUNvc09wdGlvbnNQcmVTaWdVcmxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIixvPVwiXCIscj0wO3JldHVybiBhaT8obj10aGlzLl9nZW5GaWxlTmFtZShlLmZpbGUubmFtZSksbz1lLmZpbGUudXJsLHI9MSk6KG49dGhpcy5fZ2VuRmlsZU5hbWUoXCJcIi5jb25jYXQoaXUoOTk5OTk5KSkpLG89ZS5maWxlLmZpbGVzWzBdLHI9MCksdGhpcy5fZ2V0Q29zUHJlU2lnVXJsKHtmaWxlVHlwZTp0aGlzLnVwbG9hZEZpbGVUeXBlLGZpbGVOYW1lOm4sdXBsb2FkTWV0aG9kOnIsZHVyYXRpb246dGhpcy5kdXJhdGlvbn0pLnRoZW4oKGZ1bmN0aW9uKHIpe3ZhciBhPXIudXBsb2FkVXJsLHM9ci5kb3dubG9hZFVybDtyZXR1cm57dXJsOmEsZmlsZVR5cGU6dC51cGxvYWRGaWxlVHlwZSxmaWxlTmFtZTpuLHJlc291cmNlczpvLGRvd25sb2FkVXJsOnMsb25Qcm9ncmVzczpmdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uUHJvZ3Jlc3MpdHJ5e2Uub25Qcm9ncmVzcyh0LnBlcmNlbnQpfWNhdGNoKG4pe0tpLndhcm4oXCJvblByb2dyZXNzIGNhbGxiYWNrIGVycm9yOlwiLG4pLEtpLmVycm9yKG4pfX19fSkpfX0se2tleTpcIl9nZW5GaWxlTmFtZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVyblwiXCIuY29uY2F0KFR1KCksXCItXCIpLmNvbmNhdChlKX19LHtrZXk6XCJfc2V0VXBsb2FkRmlsZVR5cGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnVwbG9hZEZpbGVUeXBlPWV9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpfX1dKSxyfShkbCksY009W1wiZG93bmxvYWRLZXlcIixcInBiRG93bmxvYWRLZXlcIixcIm1lc3NhZ2VMaXN0XCJdLGxNPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fY2xhc3NOYW1lPVwiTWVyZ2VyTWVzc2FnZUhhbmRsZXJcIix0aGlzLl9tZXNzYWdlTW9kdWxlPXR9cmV0dXJuIGEoZSxbe2tleTpcInVwbG9hZE1lcmdlck1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwbG9hZE1lcmdlck1lc3NhZ2UgbWVzc2FnZTpcIiksZSxcIm1lc3NhZ2VCeXRlczpcIi5jb25jYXQodCkpO3ZhciBvPWUucGF5bG9hZC5tZXNzYWdlTGlzdCxyPW8ubGVuZ3RoLGE9bmV3IGxnKGJnKTtyZXR1cm4gdGhpcy5fbWVzc2FnZU1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6UmQscmVxdWVzdERhdGE6e21lc3NhZ2VMaXN0Om99fSkudGhlbigoZnVuY3Rpb24oZSl7S2kuZGVidWcoXCJcIi5jb25jYXQobi5fY2xhc3NOYW1lLFwiLnVwbG9hZE1lcmdlck1lc3NhZ2Ugb2suIHJlc3BvbnNlOlwiKSxlLmRhdGEpO3ZhciBvPWUuZGF0YSxzPW8ucGJEb3dubG9hZEtleSxpPW8uZG93bmxvYWRLZXksdT17cGJEb3dubG9hZEtleTpzLGRvd25sb2FkS2V5OmksbWVzc2FnZU51bWJlcjpyfTtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZShuLl9tZXNzYWdlTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQocixcIi1cIikuY29uY2F0KHQsXCItXCIpLmNvbmNhdChpKSkuZW5kKCksdX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dGhyb3cgS2kud2FybihcIlwiLmNvbmNhdChuLl9jbGFzc05hbWUsXCIudXBsb2FkTWVyZ2VyTWVzc2FnZSBmYWlsZWQuIGVycm9yOlwiKSxlKSxuLl9tZXNzYWdlTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLGV9KSl9fSx7a2V5OlwiZG93bmxvYWRNZXJnZXJNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZG93bmxvYWRNZXJnZXJNZXNzYWdlIG1lc3NhZ2U6XCIpLGUpO3ZhciBvPWUucGF5bG9hZC5kb3dubG9hZEtleSxyPW5ldyBsZyh3Zyk7cmV0dXJuIHIuc2V0TWVzc2FnZShcImRvd25sb2FkS2V5OlwiLmNvbmNhdChvKSksdGhpcy5fbWVzc2FnZU1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6YmQscmVxdWVzdERhdGE6e2Rvd25sb2FkS2V5Om99fSkudGhlbigoZnVuY3Rpb24obyl7aWYoS2kuZGVidWcoXCJcIi5jb25jYXQobi5fY2xhc3NOYW1lLFwiLmRvd25sb2FkTWVyZ2VyTWVzc2FnZSBvay4gcmVzcG9uc2U6XCIpLG8uZGF0YSksUWkoZS5jbGVhckVsZW1lbnQpKXt2YXIgYT1lLnBheWxvYWQscz0oYS5kb3dubG9hZEtleSxhLnBiRG93bmxvYWRLZXksYS5tZXNzYWdlTGlzdCxnKGEsY00pKTtlLmNsZWFyRWxlbWVudCgpLGUuc2V0RWxlbWVudCh7dHlwZTplLnR5cGUsY29udGVudDp0KHttZXNzYWdlTGlzdDpvLmRhdGEubWVzc2FnZUxpc3R9LHMpfSl9ZWxzZXt2YXIgaT1bXTtvLmRhdGEubWVzc2FnZUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoIU91KGUpKXt2YXIgdD1uZXcgUm0oZSk7aS5wdXNoKHQpfX0pKSxlLnBheWxvYWQubWVzc2FnZUxpc3Q9aSxlLnBheWxvYWQuZG93bmxvYWRLZXk9XCJcIixlLnBheWxvYWQucGJEb3dubG9hZEtleT1cIlwifXJldHVybiByLnNldE5ldHdvcmtUeXBlKG4uX21lc3NhZ2VNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksZX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dGhyb3cgS2kud2FybihcIlwiLmNvbmNhdChuLl9jbGFzc05hbWUsXCIuZG93bmxvYWRNZXJnZXJNZXNzYWdlIGZhaWxlZC4ga2V5OlwiKS5jb25jYXQobyxcIiBlcnJvcjpcIiksZSksbi5fbWVzc2FnZU1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLGE9blsxXTtyLnNldEVycm9yKGUsbyxhKS5lbmQoKX0pKSxlfSkpfX0se2tleTpcImNyZWF0ZU1lcmdlck1lc3NhZ2VQYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0MyQz90aGlzLl9jcmVhdGVDMkNNZXJnZXJNZXNzYWdlUGFjayhlLHQsbik6dGhpcy5fY3JlYXRlR3JvdXBNZXJnZXJNZXNzYWdlUGFjayhlLHQsbil9fSx7a2V5OlwiX2NyZWF0ZUMyQ01lcmdlck1lc3NhZ2VQYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPW51bGw7dCYmKHQub2ZmbGluZVB1c2hJbmZvJiYobz10Lm9mZmxpbmVQdXNoSW5mbyksITA9PT10Lm9ubGluZVVzZXJPbmx5JiYobz9vLmRpc2FibGVQdXNoPSEwOm89e2Rpc2FibGVQdXNoOiEwfSkpO3ZhciByPVwiXCI7WWkoZS5jbG91ZEN1c3RvbURhdGEpJiZlLmNsb3VkQ3VzdG9tRGF0YS5sZW5ndGg+MCYmKHI9ZS5jbG91ZEN1c3RvbURhdGEpO3ZhciBhPW4ucGJEb3dubG9hZEtleSxzPW4uZG93bmxvYWRLZXksaT1uLm1lc3NhZ2VOdW1iZXIsdT1lLnBheWxvYWQsYz11LnRpdGxlLGw9dS5hYnN0cmFjdExpc3QsZD11LmNvbXBhdGlibGVUZXh0LHA9dGhpcy5fbWVzc2FnZU1vZHVsZS5nZXRNb2R1bGUoWWMpO3JldHVybntwcm90b2NvbE5hbWU6bWwsdGpnSUQ6dGhpcy5fbWVzc2FnZU1vZHVsZS5nZW5lcmF0ZVRqZ0lEKGUpLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9tZXNzYWdlTW9kdWxlLmdldE15VXNlcklEKCksdG9BY2NvdW50OmUudG8sbXNnQm9keTpbe21zZ1R5cGU6ZS50eXBlLG1zZ0NvbnRlbnQ6e3BiRG93bmxvYWRLZXk6YSxkb3dubG9hZEtleTpzLHRpdGxlOmMsYWJzdHJhY3RMaXN0OmwsY29tcGF0aWJsZVRleHQ6ZCxtZXNzYWdlTnVtYmVyOml9fV0sY2xvdWRDdXN0b21EYXRhOnIsbXNnU2VxOmUuc2VxdWVuY2UsbXNnUmFuZG9tOmUucmFuZG9tLG1zZ0xpZmVUaW1lOnAmJnAuaXNPbmxpbmVNZXNzYWdlKGUsdCk/MDp2b2lkIDAsb2ZmbGluZVB1c2hJbmZvOm8/e3B1c2hGbGFnOiEwPT09by5kaXNhYmxlUHVzaD8xOjAsdGl0bGU6by50aXRsZXx8XCJcIixkZXNjOm8uZGVzY3JpcHRpb258fFwiXCIsZXh0Om8uZXh0ZW5zaW9ufHxcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6ITA9PT1vLmlnbm9yZUlPU0JhZGdlPzE6MH0sYW5kcm9pZEluZm86e09QUE9DaGFubmVsSUQ6by5hbmRyb2lkT1BQT0NoYW5uZWxJRHx8XCJcIn19OnZvaWQgMH19fX0se2tleTpcIl9jcmVhdGVHcm91cE1lcmdlck1lc3NhZ2VQYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPW51bGw7dCYmdC5vZmZsaW5lUHVzaEluZm8mJihvPXQub2ZmbGluZVB1c2hJbmZvKTt2YXIgcj1cIlwiO1lpKGUuY2xvdWRDdXN0b21EYXRhKSYmZS5jbG91ZEN1c3RvbURhdGEubGVuZ3RoPjAmJihyPWUuY2xvdWRDdXN0b21EYXRhKTt2YXIgYT1uLnBiRG93bmxvYWRLZXkscz1uLmRvd25sb2FkS2V5LGk9bi5tZXNzYWdlTnVtYmVyLHU9ZS5wYXlsb2FkLGM9dS50aXRsZSxsPXUuYWJzdHJhY3RMaXN0LGQ9dS5jb21wYXRpYmxlVGV4dCxwPXRoaXMuX21lc3NhZ2VNb2R1bGUuZ2V0TW9kdWxlKCRjKTtyZXR1cm57cHJvdG9jb2xOYW1lOnZsLHRqZ0lEOnRoaXMuX21lc3NhZ2VNb2R1bGUuZ2VuZXJhdGVUamdJRChlKSxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fbWVzc2FnZU1vZHVsZS5nZXRNeVVzZXJJRCgpLGdyb3VwSUQ6ZS50byxtc2dCb2R5Olt7bXNnVHlwZTplLnR5cGUsbXNnQ29udGVudDp7cGJEb3dubG9hZEtleTphLGRvd25sb2FkS2V5OnMsdGl0bGU6YyxhYnN0cmFjdExpc3Q6bCxjb21wYXRpYmxlVGV4dDpkLG1lc3NhZ2VOdW1iZXI6aX19XSxyYW5kb206ZS5yYW5kb20scHJpb3JpdHk6ZS5wcmlvcml0eSxjbGllbnRTZXF1ZW5jZTplLmNsaWVudFNlcXVlbmNlLGdyb3VwQXRJbmZvOnZvaWQgMCxjbG91ZEN1c3RvbURhdGE6cixvbmxpbmVPbmx5RmxhZzpwJiZwLmlzT25saW5lTWVzc2FnZShlLHQpPzE6MCxvZmZsaW5lUHVzaEluZm86bz97cHVzaEZsYWc6ITA9PT1vLmRpc2FibGVQdXNoPzE6MCx0aXRsZTpvLnRpdGxlfHxcIlwiLGRlc2M6by5kZXNjcmlwdGlvbnx8XCJcIixleHQ6by5leHRlbnNpb258fFwiXCIsYXBuc0luZm86e2JhZGdlTW9kZTohMD09PW8uaWdub3JlSU9TQmFkZ2U/MTowfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpvLmFuZHJvaWRPUFBPQ2hhbm5lbElEfHxcIlwifX06dm9pZCAwfX19fV0pLGV9KCksZE09e0VSUl9TVlJfQ09NTV9TRU5TSVRJVkVfVEVYVDo4MDAwMSxFUlJfU1ZSX0NPTU1fQk9EWV9TSVpFX0xJTUlUOjgwMDAyLEVSUl9TVlJfTVNHX1BLR19QQVJTRV9GQUlMRUQ6MjAwMDEsRVJSX1NWUl9NU0dfSU5URVJOQUxfQVVUSF9GQUlMRUQ6MjAwMDIsRVJSX1NWUl9NU0dfSU5WQUxJRF9JRDoyMDAwMyxFUlJfU1ZSX01TR19QVVNIX0RFTlk6MjAwMDYsRVJSX1NWUl9NU0dfSU5fUEVFUl9CTEFDS0xJU1Q6MjAwMDcsRVJSX1NWUl9NU0dfQk9USF9OT1RfRlJJRU5EOjIwMDA5LEVSUl9TVlJfTVNHX05PVF9QRUVSX0ZSSUVORDoyMDAxMCxFUlJfU1ZSX01TR19OT1RfU0VMRl9GUklFTkQ6MjAwMTEsRVJSX1NWUl9NU0dfU0hVVFVQX0RFTlk6MjAwMTIsRVJSX1NWUl9HUk9VUF9JTlZBTElEX1BBUkFNRVRFUlM6MTAwMDQsRVJSX1NWUl9HUk9VUF9QRVJNSVNTSU9OX0RFTlk6MTAwMDcsRVJSX1NWUl9HUk9VUF9OT1RfRk9VTkQ6MTAwMTAsRVJSX1NWUl9HUk9VUF9JTlZBTElEX0dST1VQSUQ6MTAwMTUsRVJSX1NWUl9HUk9VUF9SRUpFQ1RfRlJPTV9USElSRFBBUlRZOjEwMDE2LEVSUl9TVlJfR1JPVVBfU0hVVFVQX0RFTlk6MTAwMTcsTUVTU0FHRV9TRU5EX0ZBSUw6MjEwMH0scE09W1BkLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUixQZC5NRVNTQUdFX0lNQUdFX1NFTEVDVF9GSUxFX0ZJUlNULFBkLk1FU1NBR0VfSU1BR0VfVFlQRVNfTElNSVQsUGQuTUVTU0FHRV9GSUxFX0lTX0VNUFRZLFBkLk1FU1NBR0VfSU1BR0VfU0laRV9MSU1JVCxQZC5NRVNTQUdFX0ZJTEVfU0VMRUNUX0ZJTEVfRklSU1QsUGQuTUVTU0FHRV9GSUxFX1NJWkVfTElNSVQsUGQuTUVTU0FHRV9WSURFT19TSVpFX0xJTUlULFBkLk1FU1NBR0VfVklERU9fVFlQRVNfTElNSVQsUGQuTUVTU0FHRV9BVURJT19VUExPQURfRkFJTCxQZC5NRVNTQUdFX0FVRElPX1NJWkVfTElNSVQsUGQuQ09TX1VOREVURUNURURdO3ZhciBnTT1mdW5jdGlvbihlKXtpKG4sZSk7dmFyIHQ9XyhuKTtmdW5jdGlvbiBuKGUpe3ZhciByO3JldHVybiBvKHRoaXMsbiksKHI9dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJNZXNzYWdlTW9kdWxlXCIsci5fbWVzc2FnZU9wdGlvbnNNYXA9bmV3IE1hcCxyLl9tZXJnZXJNZXNzYWdlSGFuZGxlcj1uZXcgbE0oaChyKSkscn1yZXR1cm4gYShuLFt7a2V5OlwiY3JlYXRlVGV4dE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10O3ZhciBuPW5ldyBHbShlKSxvPVwic3RyaW5nXCI9PXR5cGVvZiBlLnBheWxvYWQ/ZS5wYXlsb2FkOmUucGF5bG9hZC50ZXh0LHI9bmV3IFFoKHt0ZXh0Om99KSxhPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gbi5zZXRFbGVtZW50KHIpLG4uc2V0Tmlja0FuZEF2YXRhcihhKSxuLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKG4pKSxufX0se2tleTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPXQ7dmFyIG49bmV3IEdtKGUpO2lmKGFpKXt2YXIgbz1lLnBheWxvYWQuZmlsZTtpZihIaShvKSlyZXR1cm4gdm9pZCBLaS53YXJuKFwi5bCP56iL5bqP546v5aKD5LiL6LCD55SoIGNyZWF0ZUltYWdlTWVzc2FnZSDmjqXlj6Pml7bvvIxwYXlsb2FkLmZpbGUg5LiN5pSv5oyB5Lyg5YWlIEZpbGUg5a+56LGhXCIpO3ZhciByPW8udGVtcEZpbGVQYXRoc1swXSxhPXt1cmw6cixuYW1lOnIuc2xpY2Uoci5sYXN0SW5kZXhPZihcIi9cIikrMSksc2l6ZTpvLnRlbXBGaWxlcyYmby50ZW1wRmlsZXNbMF0uc2l6ZXx8MSx0eXBlOnIuc2xpY2Uoci5sYXN0SW5kZXhPZihcIi5cIikrMSkudG9Mb3dlckNhc2UoKX07ZS5wYXlsb2FkLmZpbGU9YX1lbHNlIGlmKHNpKWlmKEhpKGUucGF5bG9hZC5maWxlKSl7dmFyIHM9ZS5wYXlsb2FkLmZpbGU7ZS5wYXlsb2FkLmZpbGU9e2ZpbGVzOltzXX19ZWxzZSBpZihXaShlLnBheWxvYWQuZmlsZSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmkpe3ZhciBpPWUucGF5bG9hZC5maWxlLnRlbXBGaWxlc1swXTtlLnBheWxvYWQuZmlsZT17ZmlsZXM6W2ldfX12YXIgdT1uZXcgX20oe2ltYWdlRm9ybWF0OnVtLklNQUdFX0ZPUk1BVC5VTktOT1dOLHV1aWQ6dGhpcy5fZ2VuZXJhdGVVVUlEKCksZmlsZTplLnBheWxvYWQuZmlsZX0pLGM9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHQpO3JldHVybiBuLnNldEVsZW1lbnQodSksbi5zZXROaWNrQW5kQXZhdGFyKGMpLG4uc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQobikpLHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwLnNldChuLklELGUpLG59fSx7a2V5OlwiY3JlYXRlQXVkaW9NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoYWkpe3ZhciB0PWUucGF5bG9hZC5maWxlO2lmKGFpKXt2YXIgbj17dXJsOnQudGVtcEZpbGVQYXRoLG5hbWU6dC50ZW1wRmlsZVBhdGguc2xpY2UodC50ZW1wRmlsZVBhdGgubGFzdEluZGV4T2YoXCIvXCIpKzEpLHNpemU6dC5maWxlU2l6ZSxzZWNvbmQ6cGFyc2VJbnQodC5kdXJhdGlvbikvMWUzLHR5cGU6dC50ZW1wRmlsZVBhdGguc2xpY2UodC50ZW1wRmlsZVBhdGgubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCl9O2UucGF5bG9hZC5maWxlPW59dmFyIG89dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9bzt2YXIgcj1uZXcgR20oZSksYT1uZXcgdm0oe3NlY29uZDpNYXRoLmZsb29yKHQuZHVyYXRpb24vMWUzKSxzaXplOnQuZmlsZVNpemUsdXJsOnQudGVtcEZpbGVQYXRoLHV1aWQ6dGhpcy5fZ2VuZXJhdGVVVUlEKCl9KSxzPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRChvKTtyZXR1cm4gci5zZXRFbGVtZW50KGEpLHIuc2V0Tmlja0FuZEF2YXRhcihzKSxyLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKHIpKSx0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5zZXQoci5JRCxlKSxyfUtpLndhcm4oXCJjcmVhdGVBdWRpb01lc3NhZ2Ug55uu5YmN5Y+q5pSv5oyB5bCP56iL5bqP546v5aKD5LiL5Y+R6K+t6Z+z5raI5oGvXCIpfX0se2tleTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPXQsZS5wYXlsb2FkLmZpbGUudGh1bWJVcmw9XCJodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9hc3NldHMvaW1hZ2VzL3RyYW5zcGFyZW50LnBuZ1wiLGUucGF5bG9hZC5maWxlLnRodW1iU2l6ZT0xNjY4O3ZhciBuPXt9O2lmKGFpKXtpZihvaSlyZXR1cm4gdm9pZCBLaS53YXJuKFwiY3JlYXRlVmlkZW9NZXNzYWdlIOS4jeaUr+aMgeWcqOaUr+S7mOWuneWwj+eoi+W6j+eOr+Wig+S4i+S9v+eUqFwiKTtpZihIaShlLnBheWxvYWQuZmlsZSkpcmV0dXJuIHZvaWQgS2kud2FybihcIuWwj+eoi+W6j+eOr+Wig+S4i+iwg+eUqCBjcmVhdGVWaWRlb01lc3NhZ2Ug5o6l5Y+j5pe277yMcGF5bG9hZC5maWxlIOS4jeaUr+aMgeS8oOWFpSBGaWxlIOWvueixoVwiKTt2YXIgbz1lLnBheWxvYWQuZmlsZTtuLnVybD1vLnRlbXBGaWxlUGF0aCxuLm5hbWU9by50ZW1wRmlsZVBhdGguc2xpY2Uoby50ZW1wRmlsZVBhdGgubGFzdEluZGV4T2YoXCIvXCIpKzEpLG4uc2l6ZT1vLnNpemUsbi5zZWNvbmQ9by5kdXJhdGlvbixuLnR5cGU9by50ZW1wRmlsZVBhdGguc2xpY2Uoby50ZW1wRmlsZVBhdGgubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCl9ZWxzZSBpZihzaSl7aWYoSGkoZS5wYXlsb2FkLmZpbGUpKXt2YXIgcj1lLnBheWxvYWQuZmlsZTtlLnBheWxvYWQuZmlsZS5maWxlcz1bcl19ZWxzZSBpZihXaShlLnBheWxvYWQuZmlsZSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmkpe3ZhciBhPWUucGF5bG9hZC5maWxlLnRlbXBGaWxlO2UucGF5bG9hZC5maWxlLmZpbGVzPVthXX12YXIgcz1lLnBheWxvYWQuZmlsZTtuLnVybD13aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChzLmZpbGVzWzBdKSxuLm5hbWU9cy5maWxlc1swXS5uYW1lLG4uc2l6ZT1zLmZpbGVzWzBdLnNpemUsbi5zZWNvbmQ9cy5maWxlc1swXS5kdXJhdGlvbnx8MCxuLnR5cGU9cy5maWxlc1swXS50eXBlLnNwbGl0KFwiL1wiKVsxXX1lLnBheWxvYWQuZmlsZS52aWRlb0ZpbGU9bjt2YXIgaT1uZXcgR20oZSksdT1uZXcgTG0oe3ZpZGVvRm9ybWF0Om4udHlwZSx2aWRlb1NlY29uZDprdShuLnNlY29uZCwwKSx2aWRlb1NpemU6bi5zaXplLHJlbW90ZVZpZGVvVXJsOlwiXCIsdmlkZW9Vcmw6bi51cmwsdmlkZW9VVUlEOnRoaXMuX2dlbmVyYXRlVVVJRCgpLHRodW1iVVVJRDp0aGlzLl9nZW5lcmF0ZVVVSUQoKSx0aHVtYldpZHRoOmUucGF5bG9hZC5maWxlLndpZHRofHwyMDAsdGh1bWJIZWlnaHQ6ZS5wYXlsb2FkLmZpbGUuaGVpZ2h0fHwyMDAsdGh1bWJVcmw6ZS5wYXlsb2FkLmZpbGUudGh1bWJVcmwsdGh1bWJTaXplOmUucGF5bG9hZC5maWxlLnRodW1iU2l6ZSx0aHVtYkZvcm1hdDplLnBheWxvYWQuZmlsZS50aHVtYlVybC5zbGljZShlLnBheWxvYWQuZmlsZS50aHVtYlVybC5sYXN0SW5kZXhPZihcIi5cIikrMSkudG9Mb3dlckNhc2UoKX0pLGM9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHQpO3JldHVybiBpLnNldEVsZW1lbnQodSksaS5zZXROaWNrQW5kQXZhdGFyKGMpLGkuc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQoaSkpLHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwLnNldChpLklELGUpLGl9fSx7a2V5OlwiY3JlYXRlQ3VzdG9tTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPXQ7dmFyIG49bmV3IEdtKGUpLG89bmV3IENtKHtkYXRhOmUucGF5bG9hZC5kYXRhLGRlc2NyaXB0aW9uOmUucGF5bG9hZC5kZXNjcmlwdGlvbixleHRlbnNpb246ZS5wYXlsb2FkLmV4dGVuc2lvbn0pLHI9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHQpO3JldHVybiBuLnNldEVsZW1lbnQobyksbi5zZXROaWNrQW5kQXZhdGFyKHIpLG4uc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQobikpLG59fSx7a2V5OlwiY3JlYXRlRmFjZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10O3ZhciBuPW5ldyBHbShlKSxvPW5ldyBtbShlLnBheWxvYWQpLHI9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHQpO3JldHVybiBuLnNldEVsZW1lbnQobyksbi5zZXROaWNrQW5kQXZhdGFyKHIpLG4uc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQobikpLG59fSx7a2V5OlwiY3JlYXRlTWVyZ2VyTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPXQ7dmFyIG49dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHQpLG89bmV3IEdtKGUpLHI9bmV3IGJtKGUucGF5bG9hZCk7cmV0dXJuIG8uc2V0RWxlbWVudChyKSxvLnNldE5pY2tBbmRBdmF0YXIobiksby5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChvKSksby5zZXRSZWxheUZsYWcoITApLG99fSx7a2V5OlwiY3JlYXRlRm9yd2FyZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnRvLG49ZS5jb252ZXJzYXRpb25UeXBlLG89ZS5wcmlvcml0eSxyPWUucGF5bG9hZCxhPXRoaXMuZ2V0TXlVc2VySUQoKSxzPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRChhKTtpZihyLnR5cGU9PT1yby5NU0dfR1JQX1RJUClyZXR1cm4gWW0obmV3IEttKHtjb2RlOlBkLk1FU1NBR0VfRk9SV0FSRF9UWVBFX0lOVkFMSUQsbWVzc2FnZTpocH0pKTt2YXIgaT17dG86dCxjb252ZXJzYXRpb25UeXBlOm4sY29udmVyc2F0aW9uSUQ6XCJcIi5jb25jYXQobikuY29uY2F0KHQpLHByaW9yaXR5Om8saXNQbGFjZU1lc3NhZ2U6MCxzdGF0dXM6RWMuVU5TRU5ELGN1cnJlbnRVc2VyOmEsY2xvdWRDdXN0b21EYXRhOmUuY2xvdWRDdXN0b21EYXRhfHxyLmNsb3VkQ3VzdG9tRGF0YXx8XCJcIn0sdT1uZXcgR20oaSk7cmV0dXJuIHUuc2V0RWxlbWVudChyLmdldEVsZW1lbnRzKClbMF0pLHUuc2V0Tmlja0FuZEF2YXRhcihzKSx1LnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKHIpKSx1LnNldFJlbGF5RmxhZyghMCksdX19LHtrZXk6XCJkb3dubG9hZE1lcmdlck1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVyZ2VyTWVzc2FnZUhhbmRsZXIuZG93bmxvYWRNZXJnZXJNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWFpKXtpZihzaSlpZihIaShlLnBheWxvYWQuZmlsZSkpe3ZhciB0PWUucGF5bG9hZC5maWxlO2UucGF5bG9hZC5maWxlPXtmaWxlczpbdF19fWVsc2UgaWYoV2koZS5wYXlsb2FkLmZpbGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pKXt2YXIgbj1lLnBheWxvYWQuZmlsZS50ZW1wRmlsZXNbMF07ZS5wYXlsb2FkLmZpbGU9e2ZpbGVzOltuXX19dmFyIG89dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9bzt2YXIgcj1uZXcgR20oZSksYT1uZXcgTm0oe3V1aWQ6dGhpcy5fZ2VuZXJhdGVVVUlEKCksZmlsZTplLnBheWxvYWQuZmlsZX0pLHM9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKG8pO3JldHVybiByLnNldEVsZW1lbnQoYSksci5zZXROaWNrQW5kQXZhdGFyKHMpLHIuc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQocikpLHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwLnNldChyLklELGUpLHJ9S2kud2FybihcIuWwj+eoi+W6j+ebruWJjeS4jeaUr+aMgemAieaLqeaWh+S7tu+8jCBjcmVhdGVGaWxlTWVzc2FnZSDmjqXlj6PkuI3lj6/nlKjvvIFcIil9fSx7a2V5OlwiX29uQ2Fubm90RmluZE1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIFltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5Olwic2VuZE1lc3NhZ2VJbnN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbz10aGlzLHI9bnVsbDtzd2l0Y2goZS5jb252ZXJzYXRpb25UeXBlKXtjYXNlIHJvLkNPTlZfQzJDOmlmKCEocj10aGlzLmdldE1vZHVsZShZYykpKXJldHVybiB0aGlzLl9vbkNhbm5vdEZpbmRNb2R1bGUoKTticmVhaztjYXNlIHJvLkNPTlZfR1JPVVA6aWYoIShyPXRoaXMuZ2V0TW9kdWxlKCRjKSkpcmV0dXJuIHRoaXMuX29uQ2Fubm90RmluZE1vZHVsZSgpO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIFltKHtjb2RlOlBkLk1FU1NBR0VfU0VORF9JTlZBTElEX0NPTlZFUlNBVElPTl9UWVBFLG1lc3NhZ2U6V2R9KX12YXIgYT10aGlzLmdldE1vZHVsZShubCkscz10aGlzLmdldE1vZHVsZSgkYyk7cmV0dXJuIGEudXBsb2FkKGUpLnRoZW4oKGZ1bmN0aW9uKCl7by5fZ2V0U2VuZE1lc3NhZ2VTcGVjaWZpZWRLZXkoZSk9PT1uZyYmby5nZXRNb2R1bGUobGwpLmFkZFN1Y2Nlc3NDb3VudChvZyk7cmV0dXJuIHMuZ3VhcmRGb3JBVkNoYXRSb29tKGUpLnRoZW4oKGZ1bmN0aW9uKCl7aWYoIWUuaXNTZW5kYWJsZSgpKXJldHVybiBZbSh7Y29kZTpQZC5NRVNTQUdFX0ZJTEVfVVJMX0lTX0VNUFRZLG1lc3NhZ2U6bHB9KTtvLl9hZGRTZW5kTWVzc2FnZVRvdGFsQ291bnQoZSksbj1EYXRlLm5vdygpO3ZhciBhPWZ1bmN0aW9uKGUpe3ZhciB0PVwidXRmLThcIjtzaSYmZG9jdW1lbnQmJih0PWRvY3VtZW50LmNoYXJzZXQudG9Mb3dlckNhc2UoKSk7dmFyIG4sbyxyPTA7aWYobz1lLmxlbmd0aCxcInV0Zi04XCI9PT10fHxcInV0ZjhcIj09PXQpZm9yKHZhciBhPTA7YTxvO2ErKykobj1lLmNvZGVQb2ludEF0KGEpKTw9MTI3P3IrPTE6bjw9MjA0Nz9yKz0yOm48PTY1NTM1P3IrPTM6KHIrPTQsYSsrKTtlbHNlIGlmKFwidXRmLTE2XCI9PT10fHxcInV0ZjE2XCI9PT10KWZvcih2YXIgcz0wO3M8bztzKyspKG49ZS5jb2RlUG9pbnRBdChzKSk8PTY1NTM1P3IrPTI6KHIrPTQscysrKTtlbHNlIHI9ZS5yZXBsYWNlKC9bXlxceDAwLVxceGZmXS9nLFwiYWFcIikubGVuZ3RoO3JldHVybiByfShKU09OLnN0cmluZ2lmeShlKSk7cmV0dXJuIGUudHlwZT09PXJvLk1TR19NRVJHRVImJmE+N2UzP28uX21lcmdlck1lc3NhZ2VIYW5kbGVyLnVwbG9hZE1lcmdlck1lc3NhZ2UoZSxhKS50aGVuKChmdW5jdGlvbihuKXt2YXIgcj1vLl9tZXJnZXJNZXNzYWdlSGFuZGxlci5jcmVhdGVNZXJnZXJNZXNzYWdlUGFjayhlLHQsbik7cmV0dXJuIG8ucmVxdWVzdChyKX0pKTooby5nZXRNb2R1bGUoSmMpLnNldE1lc3NhZ2VSYW5kb20oZSksZS5jb252ZXJzYXRpb25UeXBlPT09cm8uQ09OVl9DMkN8fGUuY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfR1JPVVA/ci5zZW5kTWVzc2FnZShlLHQpOnZvaWQgMCl9KSkudGhlbigoZnVuY3Rpb24oYSl7dmFyIHM9YS5kYXRhLGk9cy50aW1lLHU9cy5zZXF1ZW5jZTtvLl9hZGRTZW5kTWVzc2FnZVN1Y2Nlc3NDb3VudChlLG4pLG8uX21lc3NhZ2VPcHRpb25zTWFwLmRlbGV0ZShlLklEKTt2YXIgYz1vLmdldE1vZHVsZShKYyk7ZS5zdGF0dXM9RWMuU1VDQ0VTUyxlLnRpbWU9aTt2YXIgbD0hMTtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0dST1VQKWUuc2VxdWVuY2U9dSxlLmdlbmVyYXRlTWVzc2FnZUlEKG8uZ2V0TXlVc2VySUQoKSk7ZWxzZSBpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0MyQyl7dmFyIGQ9Yy5nZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWUoZS5jb252ZXJzYXRpb25JRCk7aWYoZCl7dmFyIHA9ZC5uaWNrLGc9ZC5hdmF0YXI7cD09PWUubmljayYmZz09PWUuYXZhdGFyfHwobD0hMCl9fXJldHVybiBjLmFwcGVuZFRvTWVzc2FnZUxpc3QoZSksbCYmYy5tb2RpZnlNZXNzYWdlU2VudEJ5TWUoe2NvbnZlcnNhdGlvbklEOmUuY29udmVyc2F0aW9uSUQsbGF0ZXN0TmljazplLm5pY2ssbGF0ZXN0QXZhdGFyOmUuYXZhdGFyfSksci5pc09ubGluZU1lc3NhZ2UoZSx0KT9lLnNldE9ubGluZU9ubHlGbGFnKCEwKTpjLm9uTWVzc2FnZVNlbnQoe2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0Olt7Y29udmVyc2F0aW9uSUQ6ZS5jb252ZXJzYXRpb25JRCx1bnJlYWRDb3VudDowLHR5cGU6ZS5jb252ZXJzYXRpb25UeXBlLHN1YlR5cGU6ZS5jb252ZXJzYXRpb25TdWJUeXBlLGxhc3RNZXNzYWdlOmV9XX0pLGUuZ2V0UmVsYXlGbGFnKCl8fFwiVElNSW1hZ2VFbGVtXCIhPT1lLnR5cGV8fEV1KGUucGF5bG9hZC5pbWFnZUluZm9BcnJheSksUG0oe21lc3NhZ2U6ZX0pfSkpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtyZXR1cm4gby5fb25TZW5kTWVzc2FnZUZhaWxlZChlLHQpfSkpfX0se2tleTpcIl9vblNlbmRNZXNzYWdlRmFpbGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLnN0YXR1cz1FYy5GQUlMLHRoaXMuZ2V0TW9kdWxlKEpjKS5kZWxldGVNZXNzYWdlUmFuZG9tKGUpLHRoaXMuX2FkZFNlbmRNZXNzYWdlRmFpbENvdW50T25Vc2VyKGUsdCk7dmFyIG49bmV3IGxnKFNnKTtyZXR1cm4gbi5zZXRNZXNzYWdlKFwidGpnX2lkOlwiLmNvbmNhdCh0aGlzLmdlbmVyYXRlVGpnSUQoZSksXCIgdHlwZTpcIikuY29uY2F0KGUudHlwZSxcIiBmcm9tOlwiKS5jb25jYXQoZS5mcm9tLFwiIHRvOlwiKS5jb25jYXQoZS50bykpLHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89bShlLDIpLHI9b1swXSxhPW9bMV07bi5zZXRFcnJvcih0LHIsYSkuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vblNlbmRNZXNzYWdlRmFpbGVkIGVycm9yOlwiKSx0KSxZbShuZXcgS20oe2NvZGU6dCYmdC5jb2RlP3QuY29kZTpQZC5NRVNTQUdFX1NFTkRfRkFJTCxtZXNzYWdlOnQmJnQubWVzc2FnZT90Lm1lc3NhZ2U6WWQsZGF0YTp7bWVzc2FnZTplfX0pKX19LHtrZXk6XCJfZ2V0U2VuZE1lc3NhZ2VTcGVjaWZpZWRLZXlcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihbcm8uTVNHX0lNQUdFLHJvLk1TR19BVURJTyxyby5NU0dfVklERU8scm8uTVNHX0ZJTEVdLmluY2x1ZGVzKGUudHlwZSkpcmV0dXJuIG5nO2lmKGUuY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfQzJDKXJldHVybiBacDtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0dST1VQKXt2YXIgdD10aGlzLmdldE1vZHVsZSgkYykuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZS50byk7aWYoIXQpcmV0dXJuO3ZhciBuPXQudHlwZTtyZXR1cm4gbXUobik/dGc6ZWd9fX0se2tleTpcIl9hZGRTZW5kTWVzc2FnZVRvdGFsQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKTt0JiZ0aGlzLmdldE1vZHVsZShsbCkuYWRkVG90YWxDb3VudCh0KX19LHtrZXk6XCJfYWRkU2VuZE1lc3NhZ2VTdWNjZXNzQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPU1hdGguYWJzKERhdGUubm93KCktdCksbz10aGlzLl9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKTtpZihvKXt2YXIgcj10aGlzLmdldE1vZHVsZShsbCk7ci5hZGRTdWNjZXNzQ291bnQobyksci5hZGRDb3N0KG8sbil9fX0se2tleTpcIl9hZGRTZW5kTWVzc2FnZUZhaWxDb3VudE9uVXNlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxyPXQuY29kZSxhPXZvaWQgMD09PXI/LTE6cixzPXRoaXMuZ2V0TW9kdWxlKGxsKSxpPXRoaXMuX2dldFNlbmRNZXNzYWdlU3BlY2lmaWVkS2V5KGUpO2k9PT1uZyYmKG49YSxvPSExLHBNLmluY2x1ZGVzKG4pJiYobz0hMCksbyk/cy5hZGRGYWlsZWRDb3VudE9mVXNlclNpZGUob2cpOmZ1bmN0aW9uKGUpe3ZhciB0PSExO3JldHVybiBPYmplY3QudmFsdWVzKGRNKS5pbmNsdWRlcyhlKSYmKHQ9ITApLChlPj0xMjAwMDEmJmU8PTEzZTR8fGU+PTEwMTAwJiZlPD0xMDIwMCkmJih0PSEwKSx0fShhKSYmaSYmcy5hZGRGYWlsZWRDb3VudE9mVXNlclNpZGUoaSl9fSx7a2V5OlwicmVzZW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmlzUmVzZW5kPSEwLGUuc3RhdHVzPUVjLlVOU0VORCx0aGlzLnNlbmRNZXNzYWdlSW5zdGFuY2UoZSl9fSx7a2V5OlwicmV2b2tlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1udWxsO2lmKGUuY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfQzJDKXtpZighKG49dGhpcy5nZXRNb2R1bGUoWWMpKSlyZXR1cm4gdGhpcy5fb25DYW5ub3RGaW5kTW9kdWxlKCl9ZWxzZSBpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0dST1VQJiYhKG49dGhpcy5nZXRNb2R1bGUoJGMpKSlyZXR1cm4gdGhpcy5fb25DYW5ub3RGaW5kTW9kdWxlKCk7dmFyIG89bmV3IGxnKGtnKTtyZXR1cm4gby5zZXRNZXNzYWdlKFwidGpnX2lkOlwiLmNvbmNhdCh0aGlzLmdlbmVyYXRlVGpnSUQoZSksXCIgdHlwZTpcIikuY29uY2F0KGUudHlwZSxcIiBmcm9tOlwiKS5jb25jYXQoZS5mcm9tLFwiIHRvOlwiKS5jb25jYXQoZS50bykpLG4ucmV2b2tlTWVzc2FnZShlKS50aGVuKChmdW5jdGlvbihuKXt2YXIgcj1uLmRhdGEucmVjYWxsUmV0TGlzdDtpZighT3UocikmJjAhPT1yWzBdLnJldENvZGUpe3ZhciBhPW5ldyBLbSh7Y29kZTpyWzBdLnJldENvZGUsbWVzc2FnZTpWbVtyWzBdLnJldENvZGVdfHxYZCxkYXRhOnttZXNzYWdlOmV9fSk7cmV0dXJuIG8uc2V0Q29kZShhLmNvZGUpLnNldE1vcmVNZXNzYWdlKGEubWVzc2FnZSkuZW5kKCksWW0oYSl9cmV0dXJuIEtpLmluZm8oXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLnJldm9rZU1lc3NhZ2Ugb2suIElEOlwiKS5jb25jYXQoZS5JRCkpLGUuaXNSZXZva2VkPSEwLG8uZW5kKCksdC5nZXRNb2R1bGUoSmMpLm9uTWVzc2FnZVJldm9rZWQoW2VdKSxQbSh7bWVzc2FnZTplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKG4pe3QucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9bShlLDIpLHI9dFswXSxhPXRbMV07by5zZXRFcnJvcihuLHIsYSkuZW5kKCl9KSk7dmFyIHI9bmV3IEttKHtjb2RlOm4mJm4uY29kZT9uLmNvZGU6UGQuTUVTU0FHRV9SRVZPS0VfRkFJTCxtZXNzYWdlOm4mJm4ubWVzc2FnZT9uLm1lc3NhZ2U6WGQsZGF0YTp7bWVzc2FnZTplfX0pO3JldHVybiBLaS53YXJuKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5yZXZva2VNZXNzYWdlIGZhaWxlZC4gZXJyb3I6XCIpLG4pLFltKHIpfSkpfX0se2tleTpcImRlbGV0ZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49bnVsbCxvPWVbMF0scj1vLmNvbnZlcnNhdGlvbklELGE9XCJcIixzPVtdLGk9W107aWYoby5jb252ZXJzYXRpb25UeXBlPT09cm8uQ09OVl9DMkM/KG49dGhpcy5nZXRNb2R1bGUoWWMpLGE9ci5yZXBsYWNlKHJvLkNPTlZfQzJDLFwiXCIpLGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZSYmZS5zdGF0dXM9PT1FYy5TVUNDRVNTJiZlLmNvbnZlcnNhdGlvbklEPT09ciYmKGUuZ2V0T25saW5lT25seUZsYWcoKXx8cy5wdXNoKFwiXCIuY29uY2F0KGUuc2VxdWVuY2UsXCJfXCIpLmNvbmNhdChlLnJhbmRvbSxcIl9cIikuY29uY2F0KGUudGltZSkpLGkucHVzaChlKSl9KSkpOm8uY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfR1JPVVAmJihuPXRoaXMuZ2V0TW9kdWxlKCRjKSxhPXIucmVwbGFjZShyby5DT05WX0dST1VQLFwiXCIpLGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZSYmZS5zdGF0dXM9PT1FYy5TVUNDRVNTJiZlLmNvbnZlcnNhdGlvbklEPT09ciYmKGUuZ2V0T25saW5lT25seUZsYWcoKXx8cy5wdXNoKFwiXCIuY29uY2F0KGUuc2VxdWVuY2UpKSxpLnB1c2goZSkpfSkpKSwhbilyZXR1cm4gdGhpcy5fb25DYW5ub3RGaW5kTW9kdWxlKCk7aWYoMD09PXMubGVuZ3RoKXJldHVybiB0aGlzLl9vbk1lc3NhZ2VEZWxldGVkKGkpO3MubGVuZ3RoPjMwJiYocz1zLnNsaWNlKDAsMzApLGk9aS5zbGljZSgwLDMwKSk7dmFyIHU9bmV3IGxnKE5nKTtyZXR1cm4gdS5zZXRNZXNzYWdlKFwidG86XCIuY29uY2F0KGEsXCIgY291bnQ6XCIpLmNvbmNhdChzLmxlbmd0aCkpLG4uZGVsZXRlTWVzc2FnZSh7dG86YSxrZXlMaXN0OnN9KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gdS5lbmQoKSxLaS5pbmZvKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5kZWxldGVNZXNzYWdlIG9rXCIpKSx0Ll9vbk1lc3NhZ2VEZWxldGVkKGkpfSkpLmNhdGNoKChmdW5jdGlvbihlKXt0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO3Uuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLndhcm4oXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmRlbGV0ZU1lc3NhZ2UgZmFpbGVkLiBlcnJvcjpcIiksZSk7dmFyIG49bmV3IEttKHtjb2RlOmUmJmUuY29kZT9lLmNvZGU6UGQuTUVTU0FHRV9ERUxFVEVfRkFJTCxtZXNzYWdlOmUmJmUubWVzc2FnZT9lLm1lc3NhZ2U6UWR9KTtyZXR1cm4gWW0obil9KSl9fSx7a2V5OlwiX29uTWVzc2FnZURlbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoSmMpLm9uTWVzc2FnZURlbGV0ZWQoZSksam0oe21lc3NhZ2VMaXN0OmV9KX19LHtrZXk6XCJfZ2VuZXJhdGVVVUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldE1vZHVsZShYYyk7cmV0dXJuXCJcIi5jb25jYXQoZS5nZXRTREtBcHBJRCgpLFwiLVwiKS5jb25jYXQoZS5nZXRVc2VySUQoKSxcIi1cIikuY29uY2F0KGZ1bmN0aW9uKCl7Zm9yKHZhciBlPVwiXCIsdD0zMjt0PjA7LS10KWUrPXV1W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpjdSldO3JldHVybiBlfSgpKX19LHtrZXk6XCJnZXRNZXNzYWdlT3B0aW9uQnlJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5nZXQoZSl9fSx7a2V5OlwiX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldE1vZHVsZShqYykuZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKGUpfX0se2tleTpcIl9nZXROYW1lQ2FyZEJ5R3JvdXBJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUuY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfR1JPVVApe3ZhciB0PXRoaXMuZ2V0TW9kdWxlKCRjKTtpZih0KXJldHVybiB0LmdldE15TmFtZUNhcmRCeUdyb3VwSUQoZS50byl9cmV0dXJuXCJcIn19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fbWVzc2FnZU9wdGlvbnNNYXAuY2xlYXIoKX19XSksbn0oZGwpLGhNPWZ1bmN0aW9uKGUpe2kobixlKTt2YXIgdD1fKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHI7cmV0dXJuIG8odGhpcyxuKSwocj10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlBsdWdpbk1vZHVsZVwiLHIucGx1Z2lucz17fSxyfXJldHVybiBhKG4sW3trZXk6XCJyZWdpc3RlclBsdWdpblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7dC5wbHVnaW5zW25dPWVbbl19KSksbmV3IGxnKF9nKS5zZXRNZXNzYWdlKFwia2V5PVwiLmNvbmNhdChPYmplY3Qua2V5cyhlKSkpLmVuZCgpfX0se2tleTpcImdldFBsdWdpblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBsdWdpbnNbZV19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpfX1dKSxufShkbCksZk09ZnVuY3Rpb24oZSl7aShuLGUpO3ZhciB0PV8obik7ZnVuY3Rpb24gbihlKXt2YXIgcjtyZXR1cm4gbyh0aGlzLG4pLChyPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiU3luY1VucmVhZE1lc3NhZ2VNb2R1bGVcIixyLl9jb29raWU9XCJcIixyLl9vbmxpbmVTeW5jRmxhZz0hMSxyLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oZ3YuQ09OVEVYVF9BMktFWV9BTkRfVElOWUlEX1VQREFURUQsci5fb25Mb2dpblN1Y2Nlc3MsaChyKSkscn1yZXR1cm4gYShuLFt7a2V5OlwiX29uTG9naW5TdWNjZXNzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc3RhcnRTeW5jKHtjb29raWU6dGhpcy5fY29va2llLHN5bmNGbGFnOjAsaXNPbmxpbmVTeW5jOjB9KX19LHtrZXk6XCJfc3RhcnRTeW5jXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY29va2llLG89ZS5zeW5jRmxhZyxyPWUuaXNPbmxpbmVTeW5jO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3N0YXJ0U3luYyBjb29raWU6XCIpLmNvbmNhdChuLFwiIHN5bmNGbGFnOlwiKS5jb25jYXQobyxcIiBpc09ubGluZVN5bmM6XCIpLmNvbmNhdChyKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6ZmwscmVxdWVzdERhdGE6e2Nvb2tpZTpuLHN5bmNGbGFnOm8saXNPbmxpbmVTeW5jOnJ9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG49ZS5kYXRhLG89bi5jb29raWUscj1uLnN5bmNGbGFnLGE9bi5ldmVudEFycmF5LHM9bi5tZXNzYWdlTGlzdCxpPW4uQzJDUmVtYWluaW5nVW5yZWFkTGlzdDtpZih0Ll9jb29raWU9byxPdShvKSk7ZWxzZSBpZigwPT09cnx8MT09PXIpe2lmKGEpdC5nZXRNb2R1bGUoYWwpLm9uTWVzc2FnZSh7aGVhZDp7fSxib2R5OntldmVudEFycmF5OmEsaXNJbnN0YW50TWVzc2FnZTp0Ll9vbmxpbmVTeW5jRmxhZyxpc1N5bmNpbmdFbmRlZDohMX19KTt0LmdldE1vZHVsZShZYykub25OZXdDMkNNZXNzYWdlKHtkYXRhTGlzdDpzLGlzSW5zdGFudE1lc3NhZ2U6ITEsQzJDUmVtYWluaW5nVW5yZWFkTGlzdDppfSksdC5fc3RhcnRTeW5jKHtjb29raWU6byxzeW5jRmxhZzpyLGlzT25saW5lU3luYzowfSl9ZWxzZSBpZigyPT09cil7aWYoYSl0LmdldE1vZHVsZShhbCkub25NZXNzYWdlKHtoZWFkOnt9LGJvZHk6e2V2ZW50QXJyYXk6YSxpc0luc3RhbnRNZXNzYWdlOnQuX29ubGluZVN5bmNGbGFnLGlzU3luY2luZ0VuZGVkOiEwfX0pO3QuZ2V0TW9kdWxlKFljKS5vbk5ld0MyQ01lc3NhZ2Uoe2RhdGFMaXN0OnMsaXNJbnN0YW50TWVzc2FnZTp0Ll9vbmxpbmVTeW5jRmxhZyxDMkNSZW1haW5pbmdVbnJlYWRMaXN0Oml9KX19KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe0tpLmVycm9yKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5fc3RhcnRTeW5jIGZhaWxlZC4gZXJyb3I6XCIpLGUpfSkpfX0se2tleTpcInN0YXJ0T25saW5lU3luY1wiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zdGFydE9ubGluZVN5bmNcIikpLHRoaXMuX29ubGluZVN5bmNGbGFnPSEwLHRoaXMuX3N0YXJ0U3luYyh7Y29va2llOnRoaXMuX2Nvb2tpZSxzeW5jRmxhZzowLGlzT25saW5lU3luYzoxfSl9fSx7a2V5Olwic3RhcnRTeW5jT25SZWNvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zdGFydFN5bmNPblJlY29ubmVjdGVkLlwiKSksdGhpcy5fb25saW5lU3luY0ZsYWc9ITAsdGhpcy5fc3RhcnRTeW5jKHtjb29raWU6dGhpcy5fY29va2llLHN5bmNGbGFnOjAsaXNPbmxpbmVTeW5jOjB9KX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fb25saW5lU3luY0ZsYWc9ITEsdGhpcy5fY29va2llPVwiXCJ9fV0pLG59KGRsKSxfTT17cmVxdWVzdDp7dG9BY2NvdW50OlwiVG9fQWNjb3VudFwiLGZyb21BY2NvdW50OlwiRnJvbV9BY2NvdW50XCIsdG86XCJUb19BY2NvdW50XCIsZnJvbTpcIkZyb21fQWNjb3VudFwiLGdyb3VwSUQ6XCJHcm91cElkXCIsZ3JvdXBBdFVzZXJJRDpcIkdyb3VwQXRfQWNjb3VudFwiLGV4dGVuc2lvbjpcIkV4dFwiLGRhdGE6XCJEYXRhXCIsZGVzY3JpcHRpb246XCJEZXNjXCIsZWxlbWVudHM6XCJNc2dCb2R5XCIsc2l6ZVR5cGU6XCJUeXBlXCIsZG93bmxvYWRGbGFnOlwiRG93bmxvYWRfRmxhZ1wiLHRodW1iVVVJRDpcIlRodW1iVVVJRFwiLHZpZGVvVVVJRDpcIlZpZGVvVVVJRFwiLHJlbW90ZUF1ZGlvVXJsOlwiVXJsXCIscmVtb3RlVmlkZW9Vcmw6XCJWaWRlb1VybFwiLHZpZGVvVXJsOlwiXCIsaW1hZ2VVcmw6XCJVUkxcIixmaWxlVXJsOlwiVXJsXCIsdXVpZDpcIlVVSURcIixwcmlvcml0eTpcIk1zZ1ByaW9yaXR5XCIscmVjZWl2ZXJVc2VySUQ6XCJUb19BY2NvdW50XCIscmVjZWl2ZXJHcm91cElEOlwiR3JvdXBJZFwiLG1lc3NhZ2VTZW5kZXI6XCJTZW5kZXJJZFwiLG1lc3NhZ2VSZWNlaXZlcjpcIlJlY2VpdmVySWRcIixuaWNrOlwiRnJvbV9BY2NvdW50Tmlja1wiLGF2YXRhcjpcIkZyb21fQWNjb3VudEhlYWR1cmxcIixtZXNzYWdlTnVtYmVyOlwiTXNnTnVtXCIscGJEb3dubG9hZEtleTpcIlBiTXNnS2V5XCIsZG93bmxvYWRLZXk6XCJKc29uTXNnS2V5XCIsYXBwbGljYXRpb25UeXBlOlwiUGVuZGVuY3lUeXBlXCIsdXNlcklETGlzdDpcIlRvX0FjY291bnRcIixncm91cE5hbWVMaXN0OlwiR3JvdXBOYW1lXCIsdXNlcklEOlwiVG9fQWNjb3VudFwiLGdyb3VwQXR0cmlidXRlTGlzdDpcIkdyb3VwQXR0clwiLG1haW5TZXF1ZW5jZTpcIkF0dHJNYWluU2VxXCIsYXZDaGF0Um9vbUtleTpcIkJ5dGVzS2V5XCIsYXR0cmlidXRlQ29udHJvbDpcIkF0dHJDb250cm9sXCIsc2VxdWVuY2U6XCJzZXFcIn0scmVzcG9uc2U6e01zZ1ByaW9yaXR5OlwicHJpb3JpdHlcIixUaHVtYlVVSUQ6XCJ0aHVtYlVVSURcIixWaWRlb1VVSUQ6XCJ2aWRlb1VVSURcIixEb3dubG9hZF9GbGFnOlwiZG93bmxvYWRGbGFnXCIsR3JvdXBJZDpcImdyb3VwSURcIixNZW1iZXJfQWNjb3VudDpcInVzZXJJRFwiLE1zZ0xpc3Q6XCJtZXNzYWdlTGlzdFwiLFN5bmNGbGFnOlwic3luY0ZsYWdcIixUb19BY2NvdW50OlwidG9cIixGcm9tX0FjY291bnQ6XCJmcm9tXCIsTXNnU2VxOlwic2VxdWVuY2VcIixNc2dSYW5kb206XCJyYW5kb21cIixNc2dUaW1lOlwidGltZVwiLE1zZ1RpbWVTdGFtcDpcInRpbWVcIixNc2dDb250ZW50OlwiY29udGVudFwiLE1zZ0JvZHk6XCJlbGVtZW50c1wiLEZyb21fQWNjb3VudE5pY2s6XCJuaWNrXCIsRnJvbV9BY2NvdW50SGVhZHVybDpcImF2YXRhclwiLEdyb3VwV2l0aGRyYXdJbmZvQXJyYXk6XCJyZXZva2VkSW5mb3NcIixHcm91cFJlYWRJbmZvQXJyYXk6XCJncm91cE1lc3NhZ2VSZWFkTm90aWNlXCIsTGFzdFJlYWRNc2dTZXE6XCJsYXN0TWVzc2FnZVNlcVwiLFdpdGhkcmF3QzJjTXNnTm90aWZ5OlwiYzJjTWVzc2FnZVJldm9rZWROb3RpZnlcIixDMmNXaXRoZHJhd0luZm9BcnJheTpcInJldm9rZWRJbmZvc1wiLEMyY1JlYWRlZFJlY2VpcHQ6XCJjMmNNZXNzYWdlUmVhZFJlY2VpcHRcIixSZWFkQzJjTXNnTm90aWZ5OlwiYzJjTWVzc2FnZVJlYWROb3RpY2VcIixMYXN0UmVhZFRpbWU6XCJwZWVyUmVhZFRpbWVcIixNc2dSYW5kOlwicmFuZG9tXCIsTXNnVHlwZTpcInR5cGVcIixNc2dTaG93OlwibWVzc2FnZVNob3dcIixOZXh0TXNnU2VxOlwibmV4dE1lc3NhZ2VTZXFcIixGYWNlVXJsOlwiYXZhdGFyXCIsUHJvZmlsZURhdGFNb2Q6XCJwcm9maWxlTW9kaWZ5XCIsUHJvZmlsZV9BY2NvdW50OlwidXNlcklEXCIsVmFsdWVCeXRlczpcInZhbHVlXCIsVmFsdWVOdW06XCJ2YWx1ZVwiLE5vdGljZVNlcTpcIm5vdGljZVNlcXVlbmNlXCIsTm90aWZ5U2VxOlwibm90aWZ5U2VxdWVuY2VcIixNc2dGcm9tX0FjY291bnRFeHRyYUluZm86XCJtZXNzYWdlRnJvbUFjY291bnRFeHRyYUluZm9ybWF0aW9uXCIsT3BlcmF0b3JfQWNjb3VudDpcIm9wZXJhdG9ySURcIixPcFR5cGU6XCJvcGVyYXRpb25UeXBlXCIsUmVwb3J0VHlwZTpcIm9wZXJhdGlvblR5cGVcIixVc2VySWQ6XCJ1c2VySURcIixVc2VyX0FjY291bnQ6XCJ1c2VySURcIixMaXN0X0FjY291bnQ6XCJ1c2VySURMaXN0XCIsTXNnT3BlcmF0b3JNZW1iZXJFeHRyYUluZm86XCJvcGVyYXRvckluZm9cIixNc2dNZW1iZXJFeHRyYUluZm86XCJtZW1iZXJJbmZvTGlzdFwiLEltYWdlVXJsOlwiYXZhdGFyXCIsTmlja05hbWU6XCJuaWNrXCIsTXNnR3JvdXBOZXdJbmZvOlwibmV3R3JvdXBQcm9maWxlXCIsTXNnQXBwRGVmaW5lZERhdGE6XCJncm91cEN1c3RvbUZpZWxkXCIsT3duZXJfQWNjb3VudDpcIm93bmVySURcIixHcm91cEZhY2VVcmw6XCJhdmF0YXJcIixHcm91cEludHJvZHVjdGlvbjpcImludHJvZHVjdGlvblwiLEdyb3VwTm90aWZpY2F0aW9uOlwibm90aWZpY2F0aW9uXCIsR3JvdXBBcHBseUpvaW5PcHRpb246XCJqb2luT3B0aW9uXCIsTXNnS2V5OlwibWVzc2FnZUtleVwiLEdyb3VwSW5mbzpcImdyb3VwUHJvZmlsZVwiLFNodXR1cFRpbWU6XCJtdXRlVGltZVwiLERlc2M6XCJkZXNjcmlwdGlvblwiLEV4dDpcImV4dGVuc2lvblwiLEdyb3VwQXRfQWNjb3VudDpcImdyb3VwQXRVc2VySURcIixNc2dOdW06XCJtZXNzYWdlTnVtYmVyXCIsUGJNc2dLZXk6XCJwYkRvd25sb2FkS2V5XCIsSnNvbk1zZ0tleTpcImRvd25sb2FkS2V5XCIsTXNnTW9kaWZpZWRGbGFnOlwiaXNNb2RpZmllZFwiLFBlbmRlbmN5SXRlbTpcImFwcGxpY2F0aW9uSXRlbVwiLFBlbmRlbmN5VHlwZTpcImFwcGxpY2F0aW9uVHlwZVwiLEFkZFRpbWU6XCJ0aW1lXCIsQWRkU291cmNlOlwic291cmNlXCIsQWRkV29yZGluZzpcIndvcmRpbmdcIixQcm9maWxlSW1JbWFnZTpcImF2YXRhclwiLFBlbmRlbmN5QWRkOlwiZnJpZW5kQXBwbGljYXRpb25BZGRlZFwiLEZyaWVuUGVuY3lkRGVsX0FjY291bnQ6XCJmcmllbmRBcHBsaWNhdGlvbkRlbGV0ZWRVc2VySURMaXN0XCIsUGVlcl9BY2NvdW50OlwidXNlcklEXCIsR3JvdXBBdHRyOlwiZ3JvdXBBdHRyaWJ1dGVMaXN0XCIsR3JvdXBBdHRyQXJ5OlwiZ3JvdXBBdHRyaWJ1dGVMaXN0XCIsQXR0ck1haW5TZXE6XCJtYWluU2VxdWVuY2VcIixzZXE6XCJzZXF1ZW5jZVwiLEdyb3VwQXR0ck9wdGlvbjpcImdyb3VwQXR0cmlidXRlT3B0aW9uXCIsQnl0ZXNDaGFuZ2VkS2V5czpcImNoYW5nZWRLZXlMaXN0XCIsR3JvdXBBdHRySW5mbzpcImdyb3VwQXR0cmlidXRlTGlzdFwiLEdyb3VwQXR0clNlcTpcIm1haW5TZXF1ZW5jZVwiLFB1c2hDaGFuZ2VkQXR0clZhbEZsYWc6XCJoYXNDaGFuZ2VkQXR0cmlidXRlSW5mb1wiLFN1YktleVNlcTpcInNlcXVlbmNlXCIsVmFsOlwidmFsdWVcIn0saWdub3JlS2V5V29yZDpbXCJDMkNcIixcIklEXCIsXCJVU1BcIl19LG1NPUV0LnRyaW07ZnVuY3Rpb24gdk0oZSx0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSYmIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIHRoZSBpbnB1dCB0byBiZSBgc3RyaW5nIHwgc3RyaW5nW11gXCIpO3Q9T2JqZWN0LmFzc2lnbih7cGFzY2FsQ2FzZTohMX0sdCk7dmFyIG47cmV0dXJuIDA9PT0oZT1BcnJheS5pc0FycmF5KGUpP2UubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmltKCl9KSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5sZW5ndGh9KSkuam9pbihcIi1cIik6ZS50cmltKCkpLmxlbmd0aD9cIlwiOjE9PT1lLmxlbmd0aD90LnBhc2NhbENhc2U/ZS50b1VwcGVyQ2FzZSgpOmUudG9Mb3dlckNhc2UoKTooZSE9PWUudG9Mb3dlckNhc2UoKSYmKGU9TU0oZSkpLGU9ZS5yZXBsYWNlKC9eW18uXFwtIF0rLyxcIlwiKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1tfLlxcLSBdKyhcXHd8JCkvZywoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSkpLnJlcGxhY2UoL1xcZCsoXFx3fCQpL2csKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvVXBwZXJDYXNlKCl9KSksbj1lLHQucGFzY2FsQ2FzZT9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK24uc2xpY2UoMSk6bil9dnQoe3RhcmdldDpcIlN0cmluZ1wiLHByb3RvOiEwLGZvcmNlZDpmdW5jdGlvbihlKXtyZXR1cm4gTygoZnVuY3Rpb24oKXtyZXR1cm4hIXl0W2VdKCl8fFwi4oCLwoXhoI5cIiE9XCLigIvCheGgjlwiW2VdKCl8fHl0W2VdLm5hbWUhPT1lfSkpfShcInRyaW1cIil9LHt0cmltOmZ1bmN0aW9uKCl7cmV0dXJuIG1NKHRoaXMpfX0pO3ZhciBNTT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ITEsbj0hMSxvPSExLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGE9ZVtyXTt0JiYvW2EtekEtWl0vLnRlc3QoYSkmJmEudG9VcHBlckNhc2UoKT09PWE/KGU9ZS5zbGljZSgwLHIpK1wiLVwiK2Uuc2xpY2UociksdD0hMSxvPW4sbj0hMCxyKyspOm4mJm8mJi9bYS16QS1aXS8udGVzdChhKSYmYS50b0xvd2VyQ2FzZSgpPT09YT8oZT1lLnNsaWNlKDAsci0xKStcIi1cIitlLnNsaWNlKHItMSksbz1uLG49ITEsdD0hMCk6KHQ9YS50b0xvd2VyQ2FzZSgpPT09YSYmYS50b1VwcGVyQ2FzZSgpIT09YSxvPW4sbj1hLnRvVXBwZXJDYXNlKCk9PT1hJiZhLnRvTG93ZXJDYXNlKCkhPT1hKX1yZXR1cm4gZX07ZnVuY3Rpb24geU0oZSx0KXt2YXIgbj0wO3JldHVybiBmdW5jdGlvbiBlKHQsbyl7aWYoKytuPjEwMClyZXR1cm4gbi0tLHQ7aWYoemkodCkpe3ZhciByPXQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gJGkodCk/ZSh0LG8pOnR9KSk7cmV0dXJuIG4tLSxyfWlmKCRpKHQpKXt2YXIgYT0ocz10LGk9ZnVuY3Rpb24oZSx0KXtpZighdHUodCkpcmV0dXJuITE7aWYoKHI9dCkhPT12TShyKSlmb3IodmFyIG49MDtuPF9NLmlnbm9yZUtleVdvcmQubGVuZ3RoJiYhdC5pbmNsdWRlcyhfTS5pZ25vcmVLZXlXb3JkW25dKTtuKyspO3ZhciByO3JldHVybiBKaShvW3RdKT9mdW5jdGlvbihlKXtyZXR1cm5cIk9QUE9DaGFubmVsSURcIj09PWU/ZTplWzBdLnRvVXBwZXJDYXNlKCkrdk0oZSkuc2xpY2UoMSl9KHQpOm9bdF19LHU9T2JqZWN0LmNyZWF0ZShudWxsKSxPYmplY3Qua2V5cyhzKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1pKHNbZV0sZSk7dCYmKHVbdF09c1tlXSl9KSksdSk7cmV0dXJuIGE9SXUoYSwoZnVuY3Rpb24odCxuKXtyZXR1cm4gemkodCl8fCRpKHQpP2UodCxvKTp0fSkpLG4tLSxhfXZhciBzLGksdX0oZSx0KX1mdW5jdGlvbiBJTShlLHQpe2lmKHppKGUpKXJldHVybiBlLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuICRpKGUpP0lNKGUsdCk6ZX0pKTtpZigkaShlKSl7dmFyIG49KG89ZSxyPWZ1bmN0aW9uKGUsbil7cmV0dXJuIEppKHRbbl0pP3ZNKG4pOnRbbl19LGE9e30sT2JqZWN0LmtleXMobykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7YVtyKG9bZV0sZSldPW9bZV19KSksYSk7cmV0dXJuIG49SXUobiwoZnVuY3Rpb24oZSl7cmV0dXJuIHppKGUpfHwkaShlKT9JTShlLHQpOmV9KSl9dmFyIG8scixhfXZhciBUTT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX2hhbmRsZXI9dDt2YXIgbj10LmdldFVSTCgpO3RoaXMuX3NvY2tldD1udWxsLHRoaXMuX2lkPWl1KCksYWk/b2k/KGlpLmNvbm5lY3RTb2NrZXQoe3VybDpuLGhlYWRlcjp7XCJjb250ZW50LXR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn19KSxpaS5vblNvY2tldENsb3NlKHRoaXMuX29uQ2xvc2UuYmluZCh0aGlzKSksaWkub25Tb2NrZXRPcGVuKHRoaXMuX29uT3Blbi5iaW5kKHRoaXMpKSxpaS5vblNvY2tldE1lc3NhZ2UodGhpcy5fb25NZXNzYWdlLmJpbmQodGhpcykpLGlpLm9uU29ja2V0RXJyb3IodGhpcy5fb25FcnJvci5iaW5kKHRoaXMpKSk6KHRoaXMuX3NvY2tldD1paS5jb25uZWN0U29ja2V0KHt1cmw6bixoZWFkZXI6e1wiY29udGVudC10eXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uXCJ9LGNvbXBsZXRlOmZ1bmN0aW9uKCl7fX0pLHRoaXMuX3NvY2tldC5vbkNsb3NlKHRoaXMuX29uQ2xvc2UuYmluZCh0aGlzKSksdGhpcy5fc29ja2V0Lm9uT3Blbih0aGlzLl9vbk9wZW4uYmluZCh0aGlzKSksdGhpcy5fc29ja2V0Lm9uTWVzc2FnZSh0aGlzLl9vbk1lc3NhZ2UuYmluZCh0aGlzKSksdGhpcy5fc29ja2V0Lm9uRXJyb3IodGhpcy5fb25FcnJvci5iaW5kKHRoaXMpKSk6c2kmJih0aGlzLl9zb2NrZXQ9bmV3IFdlYlNvY2tldChuKSx0aGlzLl9zb2NrZXQub25vcGVuPXRoaXMuX29uT3Blbi5iaW5kKHRoaXMpLHRoaXMuX3NvY2tldC5vbm1lc3NhZ2U9dGhpcy5fb25NZXNzYWdlLmJpbmQodGhpcyksdGhpcy5fc29ja2V0Lm9uY2xvc2U9dGhpcy5fb25DbG9zZS5iaW5kKHRoaXMpLHRoaXMuX3NvY2tldC5vbmVycm9yPXRoaXMuX29uRXJyb3IuYmluZCh0aGlzKSl9cmV0dXJuIGEoZSxbe2tleTpcImdldElEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9fSx7a2V5OlwiX29uT3BlblwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faGFuZGxlci5vbk9wZW4oe2lkOnRoaXMuX2lkfSl9fSx7a2V5OlwiX29uQ2xvc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVyLm9uQ2xvc2Uoe2lkOnRoaXMuX2lkLGU6ZX0pfX0se2tleTpcIl9vbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVyLm9uTWVzc2FnZShlKX19LHtrZXk6XCJfb25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2hhbmRsZXIub25FcnJvcih7aWQ6dGhpcy5faWQsZTplfSl9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihvaSlyZXR1cm4gaWkub2ZmU29ja2V0Q2xvc2UoKSxpaS5vZmZTb2NrZXRNZXNzYWdlKCksaWkub2ZmU29ja2V0T3BlbigpLGlpLm9mZlNvY2tldEVycm9yKCksdm9pZCBpaS5jbG9zZVNvY2tldCgpO3RoaXMuX3NvY2tldCYmKGFpPyh0aGlzLl9zb2NrZXQub25DbG9zZSgoZnVuY3Rpb24oKXt9KSksdGhpcy5fc29ja2V0Lm9uT3BlbigoZnVuY3Rpb24oKXt9KSksdGhpcy5fc29ja2V0Lm9uTWVzc2FnZSgoZnVuY3Rpb24oKXt9KSksdGhpcy5fc29ja2V0Lm9uRXJyb3IoKGZ1bmN0aW9uKCl7fSkpKTpzaSYmKHRoaXMuX3NvY2tldC5vbm9wZW49bnVsbCx0aGlzLl9zb2NrZXQub25tZXNzYWdlPW51bGwsdGhpcy5fc29ja2V0Lm9uY2xvc2U9bnVsbCx0aGlzLl9zb2NrZXQub25lcnJvcj1udWxsKSxuaT90aGlzLl9zb2NrZXQuY2xvc2Uoe2NvZGU6ZX0pOnRoaXMuX3NvY2tldC5jbG9zZShlKSx0aGlzLl9zb2NrZXQ9bnVsbCl9fSx7a2V5Olwic2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe29pP2lpLnNlbmRTb2NrZXRNZXNzYWdlKHtkYXRhOmUuZGF0YSxmYWlsOmZ1bmN0aW9uKCl7ZS5mYWlsJiZlLnJlcXVlc3RJRCYmZS5mYWlsKGUucmVxdWVzdElEKX19KTp0aGlzLl9zb2NrZXQmJihhaT90aGlzLl9zb2NrZXQuc2VuZCh7ZGF0YTplLmRhdGEsZmFpbDpmdW5jdGlvbigpe2UuZmFpbCYmZS5yZXF1ZXN0SUQmJmUuZmFpbChlLnJlcXVlc3RJRCl9fSk6c2kmJnRoaXMuX3NvY2tldC5zZW5kKGUuZGF0YSkpfX1dKSxlfSgpLERNPTRlMyxTTT00MDAxLEVNPVtcImtleU1hcFwiXSxBTT1bXCJrZXlNYXBcIl0sa009XCJjb25uZWN0ZWRcIixOTT1cImNvbm5lY3RpbmdcIixDTT1cImRpc2Nvbm5lY3RlZFwiLExNPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fY2hhbm5lbE1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIlNvY2tldEhhbmRsZXJcIix0aGlzLl9wcm9taXNlTWFwPW5ldyBNYXAsdGhpcy5fcmVhZHlTdGF0ZT1DTSx0aGlzLl9zaW1wbGVSZXF1ZXN0TWFwPW5ldyBNYXAsdGhpcy5NQVhfU0laRT0xMDAsdGhpcy5fc3RhcnRTZXF1ZW5jZT1pdSgpLHRoaXMuX3N0YXJ0VHM9MCx0aGlzLl9yZUNvbm5lY3RGbGFnPSExLHRoaXMuX25leHRQaW5nVHM9MCx0aGlzLl9yZUNvbm5lY3RDb3VudD0wLHRoaXMuTUFYX1JFQ09OTkVDVF9DT1VOVD0zLHRoaXMuX3NvY2tldElEPS0xLHRoaXMuX3JhbmRvbT0wLHRoaXMuX3NvY2tldD1udWxsLHRoaXMuX3VybD1cIlwiLHRoaXMuX29uT3BlblRzPTAsdGhpcy5fc2V0T3ZlcnNlYUhvc3QoKSx0aGlzLl9pbml0Q29ubmVjdGlvbigpfXJldHVybiBhKGUsW3trZXk6XCJfc2V0T3ZlcnNlYUhvc3RcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NoYW5uZWxNb2R1bGUuaXNPdmVyc2VhKCkmJnpzLkhPU1Quc2V0Q3VycmVudChXcyl9fSx7a2V5OlwiX2luaXRDb25uZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtcIlwiPT09dGhpcy5fdXJsP3RoaXMuX3VybD16cy5IT1NULkNVUlJFTlQuREVGQVVMVDp0aGlzLl91cmw9PT16cy5IT1NULkNVUlJFTlQuREVGQVVMVD90aGlzLl91cmw9enMuSE9TVC5DVVJSRU5ULkJBQ0tVUDp0aGlzLl91cmw9PT16cy5IT1NULkNVUlJFTlQuQkFDS1VQJiYodGhpcy5fdXJsPXpzLkhPU1QuQ1VSUkVOVC5ERUZBVUxUKSx0aGlzLl9jb25uZWN0KCksdGhpcy5fbmV4dFBpbmdUcz0wfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UlMT09MCYmdGhpcy5fY2hlY2tQcm9taXNlTWFwKCl9fSx7a2V5OlwiX2NoZWNrUHJvbWlzZU1hcFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczswIT09dGhpcy5fcHJvbWlzZU1hcC5zaXplJiZ0aGlzLl9wcm9taXNlTWFwLmZvckVhY2goKGZ1bmN0aW9uKHQsbil7dmFyIG89dC5yZWplY3Qscj10LnRpbWVzdGFtcDtEYXRlLm5vdygpLXI+PTE1ZTMmJihLaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9jaGVja1Byb21pc2VNYXAgcmVxdWVzdCB0aW1lb3V0LCBkZWxldGUgcmVxdWVzdElEOlwiKS5jb25jYXQobikpLGUuX3Byb21pc2VNYXAuZGVsZXRlKG4pLG8obmV3IEttKHtjb2RlOlBkLk5FVFdPUktfVElNRU9VVCxtZXNzYWdlOkhwfSkpLGUuX2NoYW5uZWxNb2R1bGUub25SZXF1ZXN0VGltZW91dChuKSl9KSl9fSx7a2V5Olwib25PcGVuXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25PcGVuVHM9RGF0ZS5ub3coKTt2YXIgdD1lLmlkO3RoaXMuX3NvY2tldElEPXQsbmV3IGxnKHZnKS5zZXRNZXNzYWdlKG4pLnNldE1lc3NhZ2UoXCJzb2NrZXRJRDpcIi5jb25jYXQodCkpLmVuZCgpO3ZhciBuPURhdGUubm93KCktdGhpcy5fc3RhcnRUcztLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbk9wZW4gY29zdCBcIikuY29uY2F0KG4sXCIgbXMuIHNvY2tldElEOlwiKS5jb25jYXQodCkpLGUuaWQ9PT10aGlzLl9zb2NrZXRJRCYmKHRoaXMuX3JlYWR5U3RhdGU9a00sdGhpcy5fcmVDb25uZWN0Q291bnQ9MCx0aGlzLl9yZXNlbmQoKSwhMD09PXRoaXMuX3JlQ29ubmVjdEZsYWcmJih0aGlzLl9jaGFubmVsTW9kdWxlLm9uUmVjb25uZWN0ZWQoKSx0aGlzLl9yZUNvbm5lY3RGbGFnPSExKSx0aGlzLl9jaGFubmVsTW9kdWxlLm9uT3BlbigpKX19LHtrZXk6XCJvbkNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGxnKE1nKSxuPWUuaWQsbz1lLmUscj1cInNvdXJjZVNvY2tldElEOlwiLmNvbmNhdChuLFwiIGN1cnJlbnRTb2NrZXRJRDpcIikuY29uY2F0KHRoaXMuX3NvY2tldElEKSxhPTA7MCE9PXRoaXMuX29uT3BlblRzJiYoYT1EYXRlLm5vdygpLXRoaXMuX29uT3BlblRzKSx0LnNldE1lc3NhZ2UoYSkuc2V0TW9yZU1lc3NhZ2Uocikuc2V0Q29kZShvLmNvZGUpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uQ2xvc2UgY29kZTpcIikuY29uY2F0KG8uY29kZSxcIiByZWFzb246XCIpLmNvbmNhdChvLnJlYXNvbixcIiBcIikuY29uY2F0KHIsXCIgb25saW5lVGltZTpcIikuY29uY2F0KGEpKSxuPT09dGhpcy5fc29ja2V0SUQmJih0aGlzLl9yZWFkeVN0YXRlPUNNLGE8MWUzP3RoaXMuX2NoYW5uZWxNb2R1bGUub25SZWNvbm5lY3RGYWlsZWQoKTp0aGlzLl9jaGFubmVsTW9kdWxlLm9uQ2xvc2UoKSl9fSx7a2V5Olwib25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQsbj1lLmUsbz1cInNvdXJjZVNvY2tldElEOlwiLmNvbmNhdCh0LFwiIGN1cnJlbnRTb2NrZXRJRDpcIikuY29uY2F0KHRoaXMuX3NvY2tldElEKTtuZXcgbGcoeWcpLnNldE1lc3NhZ2Uobi5lcnJNc2d8fGF1KG4pKS5zZXRNb3JlTWVzc2FnZShvKS5zZXRMZXZlbChcImVycm9yXCIpLmVuZCgpLEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbkVycm9yXCIpLG4sbyksdD09PXRoaXMuX3NvY2tldElEJiYodGhpcy5fcmVhZHlTdGF0ZT1cIlwiLHRoaXMuX2NoYW5uZWxNb2R1bGUub25FcnJvcigpKX19LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdDt0cnl7dD1KU09OLnBhcnNlKGUuZGF0YSl9Y2F0Y2goY3kpe25ldyBsZyhHZykuc2V0TWVzc2FnZShlLmRhdGEpLmVuZCgpfWlmKHQmJnQuaGVhZCl7dmFyIG49dGhpcy5fZ2V0UmVxdWVzdElERnJvbUhlYWQodC5oZWFkKSxvPUF1KHQuaGVhZCkscj1JTSh0LmJvZHksdGhpcy5fZ2V0UmVzcG9uc2VLZXlNYXAobykpO2lmKEtpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk1lc3NhZ2UgcmV0OlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkociksXCIgcmVxdWVzdElEOlwiKS5jb25jYXQobixcIiBoYXM6XCIpLmNvbmNhdCh0aGlzLl9wcm9taXNlTWFwLmhhcyhuKSkpLHRoaXMuX3NldE5leHRQaW5nVHMoKSx0aGlzLl9wcm9taXNlTWFwLmhhcyhuKSl7dmFyIGE9dGhpcy5fcHJvbWlzZU1hcC5nZXQobikscz1hLnJlc29sdmUsaT1hLnJlamVjdCx1PWEudGltZXN0YW1wO3JldHVybiB0aGlzLl9wcm9taXNlTWFwLmRlbGV0ZShuKSx0aGlzLl9jYWxjUlRUKHUpLHZvaWQoci5lcnJvckNvZGUmJjAhPT1yLmVycm9yQ29kZT8odGhpcy5fY2hhbm5lbE1vZHVsZS5vbkVycm9yQ29kZU5vdFplcm8ociksaShuZXcgS20oe2NvZGU6ci5lcnJvckNvZGUsbWVzc2FnZTpyLmVycm9ySW5mb3x8XCJcIn0pKSk6cyhQbShyKSkpfXRoaXMuX2NoYW5uZWxNb2R1bGUub25NZXNzYWdlKHtoZWFkOnQuaGVhZCxib2R5OnJ9KX19fSx7a2V5OlwiX2NhbGNSVFRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1EYXRlLm5vdygpLWU7dGhpcy5fY2hhbm5lbE1vZHVsZS5nZXRNb2R1bGUobGwpLmFkZFJUVCh0KX19LHtrZXk6XCJfY29ubmVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7bmV3IGxnKG1nKS5zZXRNZXNzYWdlKFwidXJsOlwiLmNvbmNhdCh0aGlzLmdldFVSTCgpKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fY29ubmVjdCB1cmw6XCIpLmNvbmNhdCh0aGlzLmdldFVSTCgpKSksdGhpcy5fc3RhcnRUcz1EYXRlLm5vdygpLHRoaXMuX3NvY2tldD1uZXcgVE0odGhpcyksdGhpcy5fc29ja2V0SUQ9dGhpcy5fc29ja2V0LmdldElEKCksdGhpcy5fcmVhZHlTdGF0ZT1OTX19LHtrZXk6XCJnZXRVUkxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKFhjKTtyZXR1cm5cIlwiLmNvbmNhdCh0aGlzLl91cmwsXCIvaW5mbz9zZGthcHBpZD1cIikuY29uY2F0KGUuZ2V0U0RLQXBwSUQoKSxcIiZpbnN0YW5jZWlkPVwiKS5jb25jYXQoZS5nZXRJbnN0YW5jZUlEKCksXCImcmFuZG9tPVwiKS5jb25jYXQodGhpcy5fZ2V0UmFuZG9tKCkpfX0se2tleTpcIl9jbG9zZUNvbm5lY3Rpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jbG9zZUNvbm5lY3Rpb25cIikpLHRoaXMuX3NvY2tldCYmKHRoaXMuX3NvY2tldC5jbG9zZShlKSx0aGlzLl9zb2NrZXRJRD0tMSx0aGlzLl9zb2NrZXQ9bnVsbCx0aGlzLl9yZWFkeVN0YXRlPUNNKX19LHtrZXk6XCJfcmVzZW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3Jlc2VuZCByZUNvbm5lY3RGbGFnOlwiKS5jb25jYXQodGhpcy5fcmVDb25uZWN0RmxhZyksXCJwcm9taXNlTWFwLnNpemU6XCIuY29uY2F0KHRoaXMuX3Byb21pc2VNYXAuc2l6ZSxcIiBzaW1wbGVSZXF1ZXN0TWFwLnNpemU6XCIpLmNvbmNhdCh0aGlzLl9zaW1wbGVSZXF1ZXN0TWFwLnNpemUpKSx0aGlzLl9wcm9taXNlTWFwLnNpemU+MCYmdGhpcy5fcHJvbWlzZU1hcC5mb3JFYWNoKChmdW5jdGlvbih0LG4pe3ZhciBvPXQudXBsaW5rRGF0YSxyPXQucmVzb2x2ZSxhPXQucmVqZWN0O2UuX3Byb21pc2VNYXAuc2V0KG4se3Jlc29sdmU6cixyZWplY3Q6YSx0aW1lc3RhbXA6RGF0ZS5ub3coKSx1cGxpbmtEYXRhOm99KSxlLl9leGVjdXRlKG4sbyl9KSksdGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5zaXplPjApe3ZhciB0LG49Uyh0aGlzLl9zaW1wbGVSZXF1ZXN0TWFwKTt0cnl7Zm9yKG4ucygpOyEodD1uLm4oKSkuZG9uZTspe3ZhciBvPW0odC52YWx1ZSwyKSxyPW9bMF0sYT1vWzFdO3RoaXMuX2V4ZWN1dGUocixhKX19Y2F0Y2gocyl7bi5lKHMpfWZpbmFsbHl7bi5mKCl9dGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5jbGVhcigpfX19LHtrZXk6XCJzZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmhlYWQuc2VxPXRoaXMuX2dldFNlcXVlbmNlKCksZS5oZWFkLnJlcXRpbWU9TWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyk7ZS5rZXlNYXA7dmFyIG49ZyhlLEVNKSxvPXRoaXMuX2dldFJlcXVlc3RJREZyb21IZWFkKGUuaGVhZCkscj1KU09OLnN0cmluZ2lmeShuKTtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsYSl7KHQuX3Byb21pc2VNYXAuc2V0KG8se3Jlc29sdmU6ZSxyZWplY3Q6YSx0aW1lc3RhbXA6RGF0ZS5ub3coKSx1cGxpbmtEYXRhOnJ9KSxLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuc2VuZCB1cGxpbmtEYXRhOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobiksXCIgcmVxdWVzdElEOlwiKS5jb25jYXQobyxcIiByZWFkeVN0YXRlOlwiKS5jb25jYXQodC5fcmVhZHlTdGF0ZSkpLHQuX3JlYWR5U3RhdGUhPT1rTSk/dC5fcmVDb25uZWN0KCk6KHQuX2V4ZWN1dGUobyxyKSx0Ll9jaGFubmVsTW9kdWxlLmdldE1vZHVsZShsbCkuYWRkUmVxdWVzdENvdW50KCkpfSkpfX0se2tleTpcInNpbXBseVNlbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtlLmhlYWQuc2VxPXRoaXMuX2dldFNlcXVlbmNlKCksZS5oZWFkLnJlcXRpbWU9TWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyk7ZS5rZXlNYXA7dmFyIHQ9ZyhlLEFNKSxuPXRoaXMuX2dldFJlcXVlc3RJREZyb21IZWFkKGUuaGVhZCksbz1KU09OLnN0cmluZ2lmeSh0KTt0aGlzLl9yZWFkeVN0YXRlIT09a00/KHRoaXMuX3NpbXBsZVJlcXVlc3RNYXAuc2l6ZTx0aGlzLk1BWF9TSVpFP3RoaXMuX3NpbXBsZVJlcXVlc3RNYXAuc2V0KG4sbyk6S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zaW1wbHlTZW5kLiBzaW1wbGVSZXF1ZXN0TWFwIGlzIGZ1bGwsIGRyb3AgcmVxdWVzdCFcIikpLHRoaXMuX3JlQ29ubmVjdCgpKTp0aGlzLl9leGVjdXRlKG4sbyl9fSx7a2V5OlwiX2V4ZWN1dGVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3NvY2tldC5zZW5kKHtkYXRhOnQsZmFpbDphaT90aGlzLl9vblNlbmRGYWlsLmJpbmQodGhpcyk6dm9pZCAwLHJlcXVlc3RJRDplfSl9fSx7a2V5OlwiX29uU2VuZEZhaWxcIix2YWx1ZTpmdW5jdGlvbihlKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vblNlbmRGYWlsIHJlcXVlc3RJRDpcIikuY29uY2F0KGUpKX19LHtrZXk6XCJfZ2V0U2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlO2lmKHRoaXMuX3N0YXJ0U2VxdWVuY2U8MjQxNTkxOTEwMylyZXR1cm4gZT10aGlzLl9zdGFydFNlcXVlbmNlLHRoaXMuX3N0YXJ0U2VxdWVuY2UrPTEsMjQxNTkxOTEwMz09PXRoaXMuX3N0YXJ0U2VxdWVuY2UmJih0aGlzLl9zdGFydFNlcXVlbmNlPWl1KCkpLGV9fSx7a2V5OlwiX2dldFJlcXVlc3RJREZyb21IZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VydmNtZCtlLnNlcX19LHtrZXk6XCJfZ2V0UmVzcG9uc2VLZXlNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLl9jaGFubmVsTW9kdWxlLmdldEtleU1hcChlKTtyZXR1cm4gdCh0KHt9LF9NLnJlc3BvbnNlKSxuLnJlc3BvbnNlKX19LHtrZXk6XCJfcmVDb25uZWN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZWFkeVN0YXRlIT09a00mJnRoaXMuX3JlYWR5U3RhdGUhPT1OTSYmdGhpcy5mb3JjZWRSZWNvbm5lY3QoKX19LHtrZXk6XCJmb3JjZWRSZWNvbm5lY3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5mb3JjZWRSZWNvbm5lY3QgY291bnQ6XCIpLmNvbmNhdCh0aGlzLl9yZUNvbm5lY3RDb3VudCxcIiByZWFkeVN0YXRlOlwiKS5jb25jYXQodGhpcy5fcmVhZHlTdGF0ZSkpLHRoaXMuX3JlQ29ubmVjdEZsYWc9ITAsdGhpcy5fcmVzZXRSYW5kb20oKSx0aGlzLl9yZUNvbm5lY3RDb3VudDx0aGlzLk1BWF9SRUNPTk5FQ1RfQ09VTlQ/KHRoaXMuX3JlQ29ubmVjdENvdW50Kz0xLHRoaXMuX2Nsb3NlQ29ubmVjdGlvbihTTSksdGhpcy5faW5pdENvbm5lY3Rpb24oKSk6dGhpcy5fY2hhbm5lbE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdO25bMV07bz8oS2kud2FybihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuZm9yY2VkUmVjb25uZWN0IGRpc2Nvbm5lY3RlZCBmcm9tIHdzc2VydmVyIGJ1dCBuZXR3b3JrIGlzIG9rLCBjb250aW51ZS4uLlwiKSksZS5fcmVDb25uZWN0Q291bnQ9MCxlLl9jbG9zZUNvbm5lY3Rpb24oU00pLGUuX2luaXRDb25uZWN0aW9uKCkpOmUuX2NoYW5uZWxNb2R1bGUub25SZWNvbm5lY3RGYWlsZWQoKX0pKX19LHtrZXk6XCJnZXRSZWNvbm5lY3RGbGFnXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVDb25uZWN0RmxhZ319LHtrZXk6XCJfc2V0TmV4dFBpbmdUc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fbmV4dFBpbmdUcz1EYXRlLm5vdygpKzFlNH19LHtrZXk6XCJnZXROZXh0UGluZ1RzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmV4dFBpbmdUc319LHtrZXk6XCJpc0Nvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlYWR5U3RhdGU9PT1rTX19LHtrZXk6XCJfZ2V0UmFuZG9tXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuX3JhbmRvbSYmKHRoaXMuX3JhbmRvbT1NYXRoLnJhbmRvbSgpKSx0aGlzLl9yYW5kb219fSx7a2V5OlwiX3Jlc2V0UmFuZG9tXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yYW5kb209MH19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5jbG9zZVwiKSksdGhpcy5fY2xvc2VDb25uZWN0aW9uKERNKSx0aGlzLl9wcm9taXNlTWFwLmNsZWFyKCksdGhpcy5fc3RhcnRTZXF1ZW5jZT1pdSgpLHRoaXMuX3JlYWR5U3RhdGU9Q00sdGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5jbGVhcigpLHRoaXMuX3JlQ29ubmVjdEZsYWc9ITEsdGhpcy5fcmVDb25uZWN0Q291bnQ9MCx0aGlzLl9vbk9wZW5Ucz0wLHRoaXMuX3VybD1cIlwiLHRoaXMuX3JhbmRvbT0wfX1dKSxlfSgpLE9NPWZ1bmN0aW9uKGUpe2kobixlKTt2YXIgdD1fKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHI7aWYobyh0aGlzLG4pLChyPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiQ2hhbm5lbE1vZHVsZVwiLHIuX3NvY2tldEhhbmRsZXI9bmV3IExNKGgocikpLHIuX3Byb2Jpbmc9ITEsci5faXNBcHBTaG93aW5nPSEwLHIuX3ByZXZpb3VzU3RhdGU9cm8uTkVUX1NUQVRFX0NPTk5FQ1RFRCxhaSYmXCJmdW5jdGlvblwiPT10eXBlb2YgaWkub25BcHBTaG93JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpaS5vbkFwcEhpZGUpe3ZhciBhPXIuX29uQXBwSGlkZS5iaW5kKGgocikpLHM9ci5fb25BcHBTaG93LmJpbmQoaChyKSk7XCJmdW5jdGlvblwiPT10eXBlb2YgaWkub2ZmQXBwSGlkZSYmaWkub2ZmQXBwSGlkZShhKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBpaS5vZmZBcHBTaG93JiZpaS5vZmZBcHBTaG93KHMpLGlpLm9uQXBwSGlkZShhKSxpaS5vbkFwcFNob3cocyl9cmV0dXJuIHIuX3RpbWVyRm9yTm90TG9nZ2VkSW49LTEsci5fdGltZXJGb3JOb3RMb2dnZWRJbj1zZXRJbnRlcnZhbChyLm9uQ2hlY2tUaW1lci5iaW5kKGgocikpLDFlMyksci5fZmF0YWxFcnJvckZsYWc9ITEscn1yZXR1cm4gYShuLFt7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc29ja2V0SGFuZGxlciYmKHRoaXMuaXNMb2dnZWRJbigpPyh0aGlzLl90aW1lckZvck5vdExvZ2dlZEluPjAmJihjbGVhckludGVydmFsKHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW4pLHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW49LTEpLHRoaXMuX3NvY2tldEhhbmRsZXIub25DaGVja1RpbWVyKGUpKTp0aGlzLl9zb2NrZXRIYW5kbGVyLm9uQ2hlY2tUaW1lcigxKSx0aGlzLl9jaGVja05leHRQaW5nKCkpfX0se2tleTpcIm9uRXJyb3JDb2RlTm90WmVyb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ2V0TW9kdWxlKGFsKS5vbkVycm9yQ29kZU5vdFplcm8oZSl9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5nZXRNb2R1bGUoYWwpLm9uTWVzc2FnZShlKX19LHtrZXk6XCJzZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NvY2tldEhhbmRsZXI/dGhpcy5fcHJldmlvdXNTdGF0ZSE9PXJvLk5FVF9TVEFURV9DT05ORUNURUQmJmUuaGVhZC5zZXJ2Y21kLmluY2x1ZGVzKGtkKT90aGlzLl9zZW5kTG9nVmlhSFRUUChlKTp0aGlzLl9zb2NrZXRIYW5kbGVyLnNlbmQoZSk6UHJvbWlzZS5yZWplY3QoKX19LHtrZXk6XCJfc2VuZExvZ1ZpYUhUVFBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbil7dmFyIG89XCJodHRwczovL3dlYmltLnRpbS5xcS5jb20vdjQvaW1vcGVuc3RhdC90aW1fd2ViX3JlcG9ydF92Mj9zZGthcHBpZD1cIi5jb25jYXQoZS5oZWFkLnNka2FwcGlkLFwiJnJlcXRpbWU9XCIpLmNvbmNhdChEYXRlLm5vdygpKSxyPUpTT04uc3RyaW5naWZ5KGUuYm9keSksYT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04XCI7aWYoYWkpaWkucmVxdWVzdCh7dXJsOm8sZGF0YTpyLG1ldGhvZDpcIlBPU1RcIix0aW1lb3V0OjNlMyxoZWFkZXI6e1wiY29udGVudC10eXBlXCI6YX0sc3VjY2VzczpmdW5jdGlvbigpe3QoKX0sZmFpbDpmdW5jdGlvbigpe24obmV3IEttKHtjb2RlOlBkLk5FVFdPUktfRVJST1IsbWVzc2FnZTpCcH0pKX19KTtlbHNle3ZhciBzPW5ldyBYTUxIdHRwUmVxdWVzdCxpPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cy5hYm9ydCgpLG4obmV3IEttKHtjb2RlOlBkLk5FVFdPUktfVElNRU9VVCxtZXNzYWdlOkhwfSkpfSksM2UzKTtzLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1zLnJlYWR5U3RhdGUmJihjbGVhclRpbWVvdXQoaSksMjAwPT09cy5zdGF0dXN8fDMwND09PXMuc3RhdHVzP3QoKTpuKG5ldyBLbSh7Y29kZTpQZC5ORVRXT1JLX0VSUk9SLG1lc3NhZ2U6QnB9KSkpfSxzLm9wZW4oXCJQT1NUXCIsbywhMCkscy5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsYSkscy5zZW5kKHIpfX0pKX19LHtrZXk6XCJzaW1wbHlTZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NvY2tldEhhbmRsZXI/dGhpcy5fc29ja2V0SGFuZGxlci5zaW1wbHlTZW5kKGUpOlByb21pc2UucmVqZWN0KCl9fSx7a2V5Olwib25PcGVuXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9waW5nKCl9fSx7a2V5Olwib25DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZUNvbm5lY3QoKX19LHtrZXk6XCJvbkVycm9yXCIsdmFsdWU6ZnVuY3Rpb24oKXthaSYmS2kuZXJyb3IoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uRXJyb3Ig5LuOdjIuMTEuMui1t++8jFNESyDmlK/mjIHkuoYgV2ViU29ja2V077yM5aaC5oKo5pyq5re75Yqg55u45YWz5Y+X5L+h5Z+f5ZCN77yM6K+35YWI5re75Yqg77yB5Y2H57qn5oyH5byVOiBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vdHV0b3JpYWwtMDItdXBncmFkZWd1aWRlbGluZS5odG1sXCIpKX19LHtrZXk6XCJnZXRLZXlNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoYWwpLmdldEtleU1hcChlKX19LHtrZXk6XCJfb25BcHBIaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pc0FwcFNob3dpbmc9ITF9fSx7a2V5OlwiX29uQXBwU2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNBcHBTaG93aW5nPSEwfX0se2tleTpcIm9uUmVxdWVzdFRpbWVvdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt9fSx7a2V5Olwib25SZWNvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblJlY29ubmVjdGVkXCIpKSx0aGlzLmdldE1vZHVsZShhbCkub25SZWNvbm5lY3RlZCgpLHRoaXMuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KHJvLk5FVF9TVEFURV9DT05ORUNURUQpfX0se2tleTpcIm9uUmVjb25uZWN0RmFpbGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUmVjb25uZWN0RmFpbGVkXCIpKSx0aGlzLl9lbWl0TmV0U3RhdGVDaGFuZ2VFdmVudChyby5ORVRfU1RBVEVfRElTQ09OTkVDVEVEKX19LHtrZXk6XCJyZUNvbm5lY3RcIix2YWx1ZTpmdW5jdGlvbigpe2lmKCF0aGlzLl9mYXRhbEVycm9yRmxhZyYmdGhpcy5fc29ja2V0SGFuZGxlcil7dmFyIGU9dGhpcy5fc29ja2V0SGFuZGxlci5nZXRSZWNvbm5lY3RGbGFnKCk7aWYoS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZUNvbm5lY3QgcHJldmlvdXNTdGF0ZTpcIikuY29uY2F0KHRoaXMuX3ByZXZpb3VzU3RhdGUsXCIgcmVjb25uZWN0RmxhZzpcIikuY29uY2F0KGUpKSx0aGlzLl9wcmV2aW91c1N0YXRlPT09cm8uTkVUX1NUQVRFX0NPTk5FQ1RJTkcmJmUpcmV0dXJuO3RoaXMuX3NvY2tldEhhbmRsZXIuZm9yY2VkUmVjb25uZWN0KCksdGhpcy5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQocm8uTkVUX1NUQVRFX0NPTk5FQ1RJTkcpfX19LHtrZXk6XCJfZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9wcmV2aW91c1N0YXRlIT09ZSYmKHRoaXMuX3ByZXZpb3VzU3RhdGU9ZSx0aGlzLmVtaXRPdXRlckV2ZW50KG9vLk5FVF9TVEFURV9DSEFOR0Use3N0YXRlOmV9KSl9fSx7a2V5OlwiX3BpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoITAhPT10aGlzLl9wcm9iaW5nKXt0aGlzLl9wcm9iaW5nPSEwO3ZhciB0PXRoaXMuZ2V0TW9kdWxlKGFsKS5nZXRQcm90b2NvbERhdGEoe3Byb3RvY29sTmFtZTpOZH0pO3RoaXMuc2VuZCh0KS50aGVuKChmdW5jdGlvbigpe2UuX3Byb2Jpbmc9ITF9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe2lmKEtpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9waW5nIGZhaWxlZC4gZXJyb3I6XCIpLHQpLGUuX3Byb2Jpbmc9ITEsdCYmNjAwMDI9PT10LmNvZGUpcmV0dXJuIG5ldyBsZyhXaCkuc2V0TWVzc2FnZShcImNvZGU6XCIuY29uY2F0KHQuY29kZSxcIiBtZXNzYWdlOlwiKS5jb25jYXQodC5tZXNzYWdlKSkuc2V0TmV0d29ya1R5cGUoZS5nZXRNb2R1bGUoZWwpLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLGUuX2ZhdGFsRXJyb3JGbGFnPSEwLHZvaWQgZS5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQocm8uTkVUX1NUQVRFX0RJU0NPTk5FQ1RFRCk7ZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtLaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9waW5nIGZhaWxlZC4gaXNBcHBTaG93aW5nOlwiKS5jb25jYXQoZS5faXNBcHBTaG93aW5nLFwiIG9ubGluZTpcIikuY29uY2F0KG8sXCIgbmV0d29ya1R5cGU6XCIpLmNvbmNhdChyKSksbz9lLnJlQ29ubmVjdCgpOmUuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KHJvLk5FVF9TVEFURV9ESVNDT05ORUNURUQpfSkpfSkpfX19LHtrZXk6XCJfY2hlY2tOZXh0UGluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc29ja2V0SGFuZGxlciYmKHRoaXMuX3NvY2tldEhhbmRsZXIuaXNDb25uZWN0ZWQoKSYmRGF0ZS5ub3coKT49dGhpcy5fc29ja2V0SGFuZGxlci5nZXROZXh0UGluZ1RzKCkmJnRoaXMuX3BpbmcoKSl9fSx7a2V5OlwiZGVhbGxvY1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc29ja2V0SGFuZGxlciYmKHRoaXMuX3NvY2tldEhhbmRsZXIuY2xvc2UoKSx0aGlzLl9zb2NrZXRIYW5kbGVyPW51bGwpLHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW4+LTEmJmNsZWFySW50ZXJ2YWwodGhpcy5fdGltZXJGb3JOb3RMb2dnZWRJbil9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX3ByZXZpb3VzU3RhdGU9cm8uTkVUX1NUQVRFX0NPTk5FQ1RFRCx0aGlzLl9wcm9iaW5nPSExLHRoaXMuX2ZhdGFsRXJyb3JGbGFnPSExLHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW49c2V0SW50ZXJ2YWwodGhpcy5vbkNoZWNrVGltZXIuYmluZCh0aGlzKSwxZTMpfX1dKSxufShkbCksUk09W1wiYTJcIixcInRpbnlpZFwiXSxiTT1bXCJhMlwiLFwidGlueWlkXCJdLHdNPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fY2xhc3NOYW1lPVwiUHJvdG9jb2xIYW5kbGVyXCIsdGhpcy5fc2Vzc2lvbk1vZHVsZT10LHRoaXMuX2NvbmZpZ01hcD1uZXcgTWFwLHRoaXMuX2ZpbGxDb25maWdNYXAoKX1yZXR1cm4gYShlLFt7a2V5OlwiX2ZpbGxDb25maWdNYXBcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbmZpZ01hcC5jbGVhcigpO3ZhciBlPXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2VuQ29tbW9uSGVhZCgpLG49dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZW5Db3NTcGVjaWZpZWRIZWFkKCksbz10aGlzLl9zZXNzaW9uTW9kdWxlLmdlblNTT1JlcG9ydEhlYWQoKTt0aGlzLl9jb25maWdNYXAuc2V0KHBsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLklNX09QRU5fU1RBVFVTLFwiLlwiKS5jb25jYXQoenMuQ01ELkxPR0lOKX0pLGJvZHk6e3N0YXRlOlwiT25saW5lXCJ9LGtleU1hcDp7cmVzcG9uc2U6e1RpbnlJZDpcInRpbnlJRFwiLEluc3RJZDpcImluc3RhbmNlSURcIixIZWxsb0ludGVydmFsOlwiaGVsbG9JbnRlcnZhbFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChnbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5JTV9PUEVOX1NUQVRVUyxcIi5cIikuY29uY2F0KHpzLkNNRC5MT0dPVVQpfSksYm9keTp7dHlwZTowfSxrZXlNYXA6e3JlcXVlc3Q6e3R5cGU6XCJ3c2xvZ291dF90eXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGhsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLklNX09QRU5fU1RBVFVTLFwiLlwiKS5jb25jYXQoenMuQ01ELkhFTExPKX0pLGJvZHk6e30sa2V5TWFwOntyZXNwb25zZTp7TmV3SW5zdEluZm86XCJuZXdJbnN0YW5jZUluZm9cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoRWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuSU1fQ09TX1NJR04sXCIuXCIpLmNvbmNhdCh6cy5DTUQuQ09TX1NJR04pfSksYm9keTp7Y21kOlwib3Blbl9pbV9jb3Nfc3ZjXCIsc3ViQ21kOlwiZ2V0X2Nvc190b2tlblwiLGR1cmF0aW9uOjMwMCx2ZXJzaW9uOjJ9LGtleU1hcDp7cmVxdWVzdDp7dXNlclNpZzpcInVzZXJzaWdcIixzdWJDbWQ6XCJzdWJfY21kXCIsY21kOlwiY21kXCIsZHVyYXRpb246XCJkdXJhdGlvblwiLHZlcnNpb246XCJ2ZXJzaW9uXCJ9LHJlc3BvbnNlOntleHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwiLGJ1Y2tldF9uYW1lOlwiYnVja2V0TmFtZVwiLHNlc3Npb25fdG9rZW46XCJzZXNzaW9uVG9rZW5cIix0bXBfc2VjcmV0X2lkOlwic2VjcmV0SWRcIix0bXBfc2VjcmV0X2tleTpcInNlY3JldEtleVwifX19fShuKSksdGhpcy5fY29uZmlnTWFwLnNldChBZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5DVVNUT01fVVBMT0FELFwiLlwiKS5jb25jYXQoenMuQ01ELkNPU19QUkVfU0lHKX0pLGJvZHk6e2ZpbGVUeXBlOnZvaWQgMCxmaWxlTmFtZTp2b2lkIDAsdXBsb2FkTWV0aG9kOjAsZHVyYXRpb246OTAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJTaWc6XCJ1c2Vyc2lnXCIsZmlsZVR5cGU6XCJmaWxlX3R5cGVcIixmaWxlTmFtZTpcImZpbGVfbmFtZVwiLHVwbG9hZE1ldGhvZDpcInVwbG9hZF9tZXRob2RcIn0scmVzcG9uc2U6e2V4cGlyZWRfdGltZTpcImV4cGlyZWRUaW1lXCIscmVxdWVzdF9pZDpcInJlcXVlc3RJZFwiLGhlYWRfdXJsOlwiaGVhZFVybFwiLHVwbG9hZF91cmw6XCJ1cGxvYWRVcmxcIixkb3dubG9hZF91cmw6XCJkb3dubG9hZFVybFwiLGNpX3VybDpcImNpVXJsXCJ9fX19KG4pKSx0aGlzLl9jb25maWdNYXAuc2V0KHdkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkNMT1VEX0NPTlRST0wsXCIuXCIpLmNvbmNhdCh6cy5DTUQuRkVUQ0hfQ0xPVURfQ09OVFJPTF9DT05GSUcpfSksYm9keTp7U0RLQXBwSUQ6MCx2ZXJzaW9uOjB9LGtleU1hcDp7cmVxdWVzdDp7U0RLQXBwSUQ6XCJ1aW50MzJfc2RrYXBwaWRcIix2ZXJzaW9uOlwidWludDY0X3ZlcnNpb25cIn0scmVzcG9uc2U6e2ludDMyX2Vycm9yX2NvZGU6XCJlcnJvckNvZGVcIixzdHJfZXJyb3JfbWVzc2FnZTpcImVycm9yTWVzc2FnZVwiLHN0cl9qc29uX2NvbmZpZzpcImNsb3VkQ29udHJvbENvbmZpZ1wiLHVpbnQzMl9leHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwiLHVpbnQzMl9zZGthcHBpZDpcIlNES0FwcElEXCIsdWludDY0X3ZlcnNpb246XCJ2ZXJzaW9uXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEdkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkNMT1VEX0NPTlRST0wsXCIuXCIpLmNvbmNhdCh6cy5DTUQuUFVTSEVEX0NMT1VEX0NPTlRST0xfQ09ORklHKX0pLGJvZHk6e30sa2V5TWFwOntyZXNwb25zZTp7aW50MzJfZXJyb3JfY29kZTpcImVycm9yQ29kZVwiLHN0cl9lcnJvcl9tZXNzYWdlOlwiZXJyb3JNZXNzYWdlXCIsc3RyX2pzb25fY29uZmlnOlwiY2xvdWRDb250cm9sQ29uZmlnXCIsdWludDMyX2V4cGlyZWRfdGltZTpcImV4cGlyZWRUaW1lXCIsdWludDMyX3Nka2FwcGlkOlwiU0RLQXBwSURcIix1aW50NjRfdmVyc2lvbjpcInZlcnNpb25cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KHpzLkNNRC5HRVRfTUVTU0FHRVMpfSksYm9keTp7Y29va2llOlwiXCIsc3luY0ZsYWc6MCxuZWVkQWJzdHJhY3Q6MSxpc09ubGluZVN5bmM6MH0sa2V5TWFwOntyZXF1ZXN0Ontmcm9tQWNjb3VudDpcIkZyb21fQWNjb3VudFwiLHRvQWNjb3VudDpcIlRvX0FjY291bnRcIixmcm9tOlwiRnJvbV9BY2NvdW50XCIsdG86XCJUb19BY2NvdW50XCIsdGltZTpcIk1zZ1RpbWVTdGFtcFwiLHNlcXVlbmNlOlwiTXNnU2VxXCIscmFuZG9tOlwiTXNnUmFuZG9tXCIsZWxlbWVudHM6XCJNc2dCb2R5XCJ9LHJlc3BvbnNlOntNc2dMaXN0OlwibWVzc2FnZUxpc3RcIixTeW5jRmxhZzpcInN5bmNGbGFnXCIsVG9fQWNjb3VudDpcInRvXCIsRnJvbV9BY2NvdW50OlwiZnJvbVwiLENsaWVudFNlcTpcImNsaWVudFNlcXVlbmNlXCIsTXNnU2VxOlwic2VxdWVuY2VcIixOb3RpY2VTZXE6XCJub3RpY2VTZXF1ZW5jZVwiLE5vdGlmeVNlcTpcIm5vdGlmeVNlcXVlbmNlXCIsTXNnUmFuZG9tOlwicmFuZG9tXCIsTXNnVGltZVN0YW1wOlwidGltZVwiLE1zZ0NvbnRlbnQ6XCJjb250ZW50XCIsVG9Hcm91cElkOlwiZ3JvdXBJRFwiLE1zZ0tleTpcIm1lc3NhZ2VLZXlcIixHcm91cFRpcHM6XCJncm91cFRpcHNcIixNc2dCb2R5OlwiZWxlbWVudHNcIixNc2dUeXBlOlwidHlwZVwiLEMyQ1JlbWFpbmluZ1VucmVhZENvdW50OlwiQzJDUmVtYWluaW5nVW5yZWFkTGlzdFwiLEMyQ1BhaXJVbnJlYWRDb3VudDpcIkMyQ1BhaXJVbnJlYWRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KF9sLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdCh6cy5DTUQuQklHX0RBVEFfSEFMTFdBWV9BVVRIX0tFWSl9KSxib2R5Ont9fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQobWwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KHpzLkNNRC5TRU5EX01FU1NBR0UpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIix0b0FjY291bnQ6XCJcIixtc2dUaW1lU3RhbXA6dm9pZCAwLG1zZ1NlcTowLG1zZ1JhbmRvbTowLG1zZ0JvZHk6W10sY2xvdWRDdXN0b21EYXRhOnZvaWQgMCxuaWNrOlwiXCIsYXZhdGFyOlwiXCIsbXNnTGlmZVRpbWU6dm9pZCAwLG9mZmxpbmVQdXNoSW5mbzp7cHVzaEZsYWc6MCx0aXRsZTpcIlwiLGRlc2M6XCJcIixleHQ6XCJcIixhcG5zSW5mbzp7YmFkZ2VNb2RlOjB9LGFuZHJvaWRJbmZvOntPUFBPQ2hhbm5lbElEOlwiXCJ9fX0sa2V5TWFwOntyZXF1ZXN0Ontmcm9tQWNjb3VudDpcIkZyb21fQWNjb3VudFwiLHRvQWNjb3VudDpcIlRvX0FjY291bnRcIixtc2dUaW1lU3RhbXA6XCJNc2dUaW1lU3RhbXBcIixtc2dTZXE6XCJNc2dTZXFcIixtc2dSYW5kb206XCJNc2dSYW5kb21cIixtc2dCb2R5OlwiTXNnQm9keVwiLGNvdW50OlwiTWF4Q250XCIsbGFzdE1lc3NhZ2VUaW1lOlwiTGFzdE1zZ1RpbWVcIixtZXNzYWdlS2V5OlwiTXNnS2V5XCIscGVlckFjY291bnQ6XCJQZWVyX0FjY291bnRcIixkYXRhOlwiRGF0YVwiLGRlc2NyaXB0aW9uOlwiRGVzY1wiLGV4dGVuc2lvbjpcIkV4dFwiLHR5cGU6XCJNc2dUeXBlXCIsY29udGVudDpcIk1zZ0NvbnRlbnRcIixzaXplVHlwZTpcIlR5cGVcIix1dWlkOlwiVVVJRFwiLHVybDpcIlwiLGltYWdlVXJsOlwiVVJMXCIsZmlsZVVybDpcIlVybFwiLHJlbW90ZUF1ZGlvVXJsOlwiVXJsXCIscmVtb3RlVmlkZW9Vcmw6XCJWaWRlb1VybFwiLHRodW1iVVVJRDpcIlRodW1iVVVJRFwiLHZpZGVvVVVJRDpcIlZpZGVvVVVJRFwiLHZpZGVvVXJsOlwiXCIsZG93bmxvYWRGbGFnOlwiRG93bmxvYWRfRmxhZ1wiLG5pY2s6XCJGcm9tX0FjY291bnROaWNrXCIsYXZhdGFyOlwiRnJvbV9BY2NvdW50SGVhZHVybFwiLGZyb206XCJGcm9tX0FjY291bnRcIix0aW1lOlwiTXNnVGltZVN0YW1wXCIsbWVzc2FnZVJhbmRvbTpcIk1zZ1JhbmRvbVwiLG1lc3NhZ2VTZXF1ZW5jZTpcIk1zZ1NlcVwiLGVsZW1lbnRzOlwiTXNnQm9keVwiLGNsaWVudFNlcXVlbmNlOlwiQ2xpZW50U2VxXCIscGF5bG9hZDpcIk1zZ0NvbnRlbnRcIixtZXNzYWdlTGlzdDpcIk1zZ0xpc3RcIixtZXNzYWdlTnVtYmVyOlwiTXNnTnVtXCIsYWJzdHJhY3RMaXN0OlwiQWJzdHJhY3RMaXN0XCIsbWVzc2FnZUJvZHk6XCJNc2dCb2R5XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHZsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoenMuQ01ELlNFTkRfR1JPVVBfTUVTU0FHRSl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLGdyb3VwSUQ6XCJcIixyYW5kb206MCxjbGllbnRTZXF1ZW5jZTowLHByaW9yaXR5OlwiXCIsbXNnQm9keTpbXSxjbG91ZEN1c3RvbURhdGE6dm9pZCAwLG9ubGluZU9ubHlGbGFnOjAsb2ZmbGluZVB1c2hJbmZvOntwdXNoRmxhZzowLHRpdGxlOlwiXCIsZGVzYzpcIlwiLGV4dDpcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6MH0sYW5kcm9pZEluZm86e09QUE9DaGFubmVsSUQ6XCJcIn19LGdyb3VwQXRJbmZvOltdfSxrZXlNYXA6e3JlcXVlc3Q6e3RvOlwiR3JvdXBJZFwiLGV4dGVuc2lvbjpcIkV4dFwiLGRhdGE6XCJEYXRhXCIsZGVzY3JpcHRpb246XCJEZXNjXCIscmFuZG9tOlwiUmFuZG9tXCIsc2VxdWVuY2U6XCJSZXFNc2dTZXFcIixjb3VudDpcIlJlcU1zZ051bWJlclwiLHR5cGU6XCJNc2dUeXBlXCIscHJpb3JpdHk6XCJNc2dQcmlvcml0eVwiLGNvbnRlbnQ6XCJNc2dDb250ZW50XCIsZWxlbWVudHM6XCJNc2dCb2R5XCIsc2l6ZVR5cGU6XCJUeXBlXCIsdXVpZDpcIlVVSURcIix1cmw6XCJcIixpbWFnZVVybDpcIlVSTFwiLGZpbGVVcmw6XCJVcmxcIixyZW1vdGVBdWRpb1VybDpcIlVybFwiLHJlbW90ZVZpZGVvVXJsOlwiVmlkZW9VcmxcIix0aHVtYlVVSUQ6XCJUaHVtYlVVSURcIix2aWRlb1VVSUQ6XCJWaWRlb1VVSURcIix2aWRlb1VybDpcIlwiLGRvd25sb2FkRmxhZzpcIkRvd25sb2FkX0ZsYWdcIixjbGllbnRTZXF1ZW5jZTpcIkNsaWVudFNlcVwiLGZyb206XCJGcm9tX0FjY291bnRcIix0aW1lOlwiTXNnVGltZVN0YW1wXCIsbWVzc2FnZVJhbmRvbTpcIk1zZ1JhbmRvbVwiLG1lc3NhZ2VTZXF1ZW5jZTpcIk1zZ1NlcVwiLHBheWxvYWQ6XCJNc2dDb250ZW50XCIsbWVzc2FnZUxpc3Q6XCJNc2dMaXN0XCIsbWVzc2FnZU51bWJlcjpcIk1zZ051bVwiLGFic3RyYWN0TGlzdDpcIkFic3RyYWN0TGlzdFwiLG1lc3NhZ2VCb2R5OlwiTXNnQm9keVwifSxyZXNwb25zZTp7TXNnVGltZTpcInRpbWVcIixNc2dTZXE6XCJzZXF1ZW5jZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChGbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoenMuQ01ELlJFVk9LRV9DMkNfTUVTU0FHRSl9KSxib2R5Onttc2dJbmZvOntmcm9tQWNjb3VudDpcIlwiLHRvQWNjb3VudDpcIlwiLG1zZ1RpbWVTdGFtcDowLG1zZ1NlcTowLG1zZ1JhbmRvbTowfX0sa2V5TWFwOntyZXF1ZXN0Onttc2dJbmZvOlwiTXNnSW5mb1wiLG1zZ1RpbWVTdGFtcDpcIk1zZ1RpbWVTdGFtcFwiLG1zZ1NlcTpcIk1zZ1NlcVwiLG1zZ1JhbmRvbTpcIk1zZ1JhbmRvbVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChzZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5SRVZPS0VfR1JPVVBfTUVTU0FHRSl9KSxib2R5Ont0bzpcIlwiLG1zZ1NlcUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3RvOlwiR3JvdXBJZFwiLG1zZ1NlcUxpc3Q6XCJNc2dTZXFMaXN0XCIsbXNnU2VxOlwiTXNnU2VxXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHhsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdCh6cy5DTUQuR0VUX0MyQ19ST0FNX01FU1NBR0VTKX0pLGJvZHk6e3BlZXJBY2NvdW50OlwiXCIsY291bnQ6MTUsbGFzdE1lc3NhZ2VUaW1lOjAsbWVzc2FnZUtleTpcIlwiLHdpdGhSZWNhbGxlZE1lc3NhZ2U6MX0sa2V5TWFwOntyZXF1ZXN0OnttZXNzYWdlS2V5OlwiTXNnS2V5XCIscGVlckFjY291bnQ6XCJQZWVyX0FjY291bnRcIixjb3VudDpcIk1heENudFwiLGxhc3RNZXNzYWdlVGltZTpcIkxhc3RNc2dUaW1lXCIsd2l0aFJlY2FsbGVkTWVzc2FnZTpcIldpdGhSZWNhbGxlZE1zZ1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh1ZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5HRVRfR1JPVVBfUk9BTV9NRVNTQUdFUyl9KSxib2R5Ont3aXRoUmVjYWxsZWRNc2c6MSxncm91cElEOlwiXCIsY291bnQ6MTUsc2VxdWVuY2U6XCJcIn0sa2V5TWFwOntyZXF1ZXN0OntzZXF1ZW5jZTpcIlJlcU1zZ1NlcVwiLGNvdW50OlwiUmVxTXNnTnVtYmVyXCIsd2l0aFJlY2FsbGVkTWVzc2FnZTpcIldpdGhSZWNhbGxlZE1zZ1wifSxyZXNwb25zZTp7UmFuZG9tOlwicmFuZG9tXCIsTXNnVGltZTpcInRpbWVcIixNc2dTZXE6XCJzZXF1ZW5jZVwiLFJlcU1zZ1NlcTpcInNlcXVlbmNlXCIsUnNwTXNnTGlzdDpcIm1lc3NhZ2VMaXN0XCIsSXNQbGFjZU1zZzpcImlzUGxhY2VNZXNzYWdlXCIsSXNTeXN0ZW1Nc2c6XCJpc1N5c3RlbU1lc3NhZ2VcIixUb0dyb3VwSWQ6XCJ0b1wiLEVudW1Gcm9tX0FjY291bnRUeXBlOlwiZnJvbUFjY291bnRUeXBlXCIsRW51bVRvX0FjY291bnRUeXBlOlwidG9BY2NvdW50VHlwZVwiLEdyb3VwQ29kZTpcImdyb3VwQ29kZVwiLE1zZ1ByaW9yaXR5OlwicHJpb3JpdHlcIixNc2dCb2R5OlwiZWxlbWVudHNcIixNc2dUeXBlOlwidHlwZVwiLE1zZ0NvbnRlbnQ6XCJjb250ZW50XCIsSXNGaW5pc2hlZDpcImNvbXBsZXRlXCIsRG93bmxvYWRfRmxhZzpcImRvd25sb2FkRmxhZ1wiLENsaWVudFNlcTpcImNsaWVudFNlcXVlbmNlXCIsVGh1bWJVVUlEOlwidGh1bWJVVUlEXCIsVmlkZW9VVUlEOlwidmlkZW9VVUlEXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHFsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdCh6cy5DTUQuU0VUX0MyQ19NRVNTQUdFX1JFQUQpfSksYm9keTp7QzJDTXNnUmVhZGVkOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntsYXN0TWVzc2FnZVRpbWU6XCJMYXN0ZWRNc2dUaW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGlkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoenMuQ01ELlNFVF9HUk9VUF9NRVNTQUdFX1JFQUQpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsbWVzc2FnZVJlYWRTZXE6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21lc3NhZ2VSZWFkU2VxOlwiTXNnUmVhZGVkU2VxXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEtsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdCh6cy5DTUQuREVMRVRFX0MyQ19NRVNTQUdFKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG86XCJcIixrZXlMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntrZXlMaXN0OlwiTXNnS2V5TGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChoZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5ERUxFVEVfR1JPVVBfTUVTU0FHRSl9KSxib2R5Ontncm91cElEOlwiXCIsZGVsZXRlcjpcIlwiLGtleUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2RlbGV0ZXI6XCJEZWxldGVyX0FjY291bnRcIixrZXlMaXN0OlwiU2Vxc1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChWbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoenMuQ01ELkdFVF9QRUVSX1JFQURfVElNRSl9KSxib2R5Ont1c2VySURMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VySURMaXN0OlwiVG9fQWNjb3VudFwifSxyZXNwb25zZTp7UmVhZFRpbWU6XCJwZWVyUmVhZFRpbWVMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEhsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLlJFQ0VOVF9DT05UQUNULFwiLlwiKS5jb25jYXQoenMuQ01ELkdFVF9DT05WRVJTQVRJT05fTElTVCl9KSxib2R5Ontmcm9tQWNjb3VudDp2b2lkIDAsY291bnQ6MH0sa2V5TWFwOntyZXF1ZXN0Ont9LHJlc3BvbnNlOntTZXNzaW9uSXRlbTpcImNvbnZlcnNhdGlvbnNcIixUb0FjY291bnQ6XCJncm91cElEXCIsVG9fQWNjb3VudDpcInVzZXJJRFwiLFVucmVhZE1zZ0NvdW50OlwidW5yZWFkQ291bnRcIixNc2dHcm91cFJlYWRlZFNlcTpcIm1lc3NhZ2VSZWFkU2VxXCIsQzJjUGVlclJlYWRUaW1lOlwiYzJjUGVlclJlYWRUaW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEJsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLlJFQ0VOVF9DT05UQUNULFwiLlwiKS5jb25jYXQoenMuQ01ELlBBR0lOR19HRVRfQ09OVkVSU0FUSU9OX0xJU1QpfSksYm9keTp7ZnJvbUFjY291bnQ6dm9pZCAwLHRpbWVTdGFtcDp2b2lkIDAsc3RhcnRJbmRleDp2b2lkIDAscGlubmVkVGltZVN0YW1wOnZvaWQgMCxwaW5uZWRTdGFydEluZGV4OnZvaWQgMCxvcmRlclR5cGU6dm9pZCAwLG1lc3NhZ2VBc3Npc3RGbGFnOjQsYXNzaXN0RmxhZzo3fSxrZXlNYXA6e3JlcXVlc3Q6e21lc3NhZ2VBc3Npc3RGbGFnOlwiTXNnQXNzaXN0RmxhZ3NcIixhc3Npc3RGbGFnOlwiQXNzaXN0RmxhZ3NcIixwaW5uZWRUaW1lU3RhbXA6XCJUb3BUaW1lU3RhbXBcIixwaW5uZWRTdGFydEluZGV4OlwiVG9wU3RhcnRJbmRleFwifSxyZXNwb25zZTp7U2Vzc2lvbkl0ZW06XCJjb252ZXJzYXRpb25zXCIsVG9BY2NvdW50OlwiZ3JvdXBJRFwiLFRvX0FjY291bnQ6XCJ1c2VySURcIixVbnJlYWRNc2dDb3VudDpcInVucmVhZENvdW50XCIsTXNnR3JvdXBSZWFkZWRTZXE6XCJtZXNzYWdlUmVhZFNlcVwiLEMyY1BlZXJSZWFkVGltZTpcImMyY1BlZXJSZWFkVGltZVwiLExhc3RNc2dGbGFnczpcImxhc3RNZXNzYWdlRmxhZ1wiLFRvcEZsYWdzOlwiaXNQaW5uZWRcIixUb3BUaW1lU3RhbXA6XCJwaW5uZWRUaW1lU3RhbXBcIixUb3BTdGFydEluZGV4OlwicGlubmVkU3RhcnRJbmRleFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChqbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5SRUNFTlRfQ09OVEFDVCxcIi5cIikuY29uY2F0KHpzLkNNRC5ERUxFVEVfQ09OVkVSU0FUSU9OKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG9BY2NvdW50OnZvaWQgMCx0eXBlOjEsdG9Hcm91cElEOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont0b0dyb3VwSUQ6XCJUb0dyb3VwaWRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWWwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuUkVDRU5UX0NPTlRBQ1QsXCIuXCIpLmNvbmNhdCh6cy5DTUQuUElOX0NPTlZFUlNBVElPTil9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLG9wZXJhdGlvblR5cGU6MSxpdGVtTGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7aXRlbUxpc3Q6XCJSZWNlbnRDb250YWN0SXRlbVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCgkbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoenMuQ01ELkRFTEVURV9HUk9VUF9BVF9USVBTKX0pLGJvZHk6e21lc3NhZ2VMaXN0VG9EZWxldGU6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21lc3NhZ2VMaXN0VG9EZWxldGU6XCJEZWxNc2dMaXN0XCIsbWVzc2FnZVNlcTpcIk1zZ1NlcVwiLG1lc3NhZ2VSYW5kb206XCJNc2dSYW5kb21cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTWwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuUFJPRklMRSxcIi5cIikuY29uY2F0KHpzLkNNRC5QT1JUUkFJVF9HRVQpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIix1c2VySXRlbTpbXX0sa2V5TWFwOntyZXF1ZXN0Ont0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsc3RhbmRhcmRTZXF1ZW5jZTpcIlN0YW5kYXJkU2VxdWVuY2VcIixjdXN0b21TZXF1ZW5jZTpcIkN1c3RvbVNlcXVlbmNlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHlsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLlBST0ZJTEUsXCIuXCIpLmNvbmNhdCh6cy5DTUQuUE9SVFJBSVRfU0VUKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIscHJvZmlsZUl0ZW06W3t0YWc6Y20uTklDSyx2YWx1ZTpcIlwifSx7dGFnOmNtLkdFTkRFUix2YWx1ZTpcIlwifSx7dGFnOmNtLkFMTE9XVFlQRSx2YWx1ZTpcIlwifSx7dGFnOmNtLkFWQVRBUix2YWx1ZTpcIlwifV19LGtleU1hcDp7cmVxdWVzdDp7dG9BY2NvdW50OlwiVG9fQWNjb3VudFwiLHN0YW5kYXJkU2VxdWVuY2U6XCJTdGFuZGFyZFNlcXVlbmNlXCIsY3VzdG9tU2VxdWVuY2U6XCJDdXN0b21TZXF1ZW5jZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChJbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdCh6cy5DTUQuR0VUX0JMQUNLTElTVCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHN0YXJ0SW5kZXg6MCxtYXhMaW1pdGVkOjMwLGxhc3RTZXF1ZW5jZTowfSxrZXlNYXA6e3Jlc3BvbnNlOntDdXJydWVudFNlcXVlbmNlOlwiY3VycmVudFNlcXVlbmNlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFRsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KHpzLkNNRC5BRERfQkxBQ0tMSVNUKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG9BY2NvdW50OltdfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KERsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KHpzLkNNRC5ERUxFVEVfQkxBQ0tMSVNUKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG9BY2NvdW50OltdfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFNsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KHpzLkNNRC5HRVRfRlJJRU5EX0xJU1QpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIixzdGFydEluZGV4OjAsc3RhbmRhcmRTZXF1ZW5jZTowLGN1c3RvbVNlcXVlbmNlOjB9LGtleU1hcDp7cmVzcG9uc2U6e0ZyaWVuZE51bTpcImZyaWVuZENvdW50XCIsVXNlckRhdGFJdGVtOlwicmVzdWx0TGlzdFwiLFZhbHVlSXRlbTpcInRhZ1ZhbHVlTGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChObCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdCh6cy5DTUQuQUREX0ZSSUVORCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLGFkZEZyaWVuZEl0ZW06W10sdHlwZTpcIlwifSxrZXlNYXA6e3JlcXVlc3Q6e3NvdXJjZTpcIkFkZFNvdXJjZVwiLHdvcmRpbmc6XCJBZGRXb3JkaW5nXCIsdHlwZTpcIkFkZFR5cGVcIn0scmVzcG9uc2U6e1Jlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KENsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KHpzLkNNRC5VUERBVEVfRlJJRU5EKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdXBkYXRlSXRlbTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7c25zSXRlbTpcIlNuc0l0ZW1cIn0scmVzcG9uc2U6e1Jlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGtsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KHpzLkNNRC5ERUxFVEVfRlJJRU5EKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdXNlcklETGlzdDpbXSx0eXBlOlwiXCJ9LGtleU1hcDp7cmVxdWVzdDp7dHlwZTpcIkRlbGV0ZVR5cGVcIn0scmVzcG9uc2U6e1Jlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEVsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KHpzLkNNRC5HRVRfRlJJRU5EX1BST0ZJTEUpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIix1c2VySURMaXN0OnZvaWQgMCx0YWdMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXNwb25zZTp7SW5mb0l0ZW06XCJyZXN1bHRMaXN0XCIsU25zUHJvZmlsZUl0ZW06XCJ0YWdWYWx1ZUxpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQWwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuRlJJRU5ELFwiLlwiKS5jb25jYXQoenMuQ01ELkNIRUNLX0ZSSUVORCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHVzZXJJRExpc3Q6W10sdHlwZTpcIlwifSxrZXlNYXA6e3JlcXVlc3Q6e3R5cGU6XCJDaGVja1R5cGVcIn0scmVzcG9uc2U6e0luZm9JdGVtOlwicmVzdWx0TGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChPbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdCh6cy5DTUQuR0VUX0ZSSUVORF9BUFBMSUNBVElPTl9MSVNUKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsYXBwbGljYXRpb25UeXBlOlwiXCIsc3RhcnRUaW1lOjAsbWF4TGltaXRlZDowLGxhc3RTZXF1ZW5jZTowfSxrZXlNYXA6e3Jlc3BvbnNlOntQZW5kZW5jeUl0ZW06XCJyZXN1bHRMaXN0XCIsQWRkU291cmNlOlwic291cmNlXCIsQWRkVGltZTpcInRpbWVcIixBZGRXb3JkaW5nOlwid29yZGluZ1wiLEltYWdlOlwiYXZhdGFyXCIsVW5yZWFkUGVuZGVuY3lDb3VudDpcInVucmVhZENvdW50XCIsVG9fQWNjb3VudDpcInVzZXJJRFwiLFBlbmRlbmN5VHlwZTpcInR5cGVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuRlJJRU5ELFwiLlwiKS5jb25jYXQoenMuQ01ELlJFU1BPTkRfRlJJRU5EX0FQUExJQ0FUSU9OKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIscmVzcG9uc2VGcmllbmRJdGVtOltdfSxrZXlNYXA6e3JlcXVlc3Q6e3RhZzpcIlRhZ05hbWVcIixhY3Rpb246XCJSZXNwb25zZUFjdGlvblwifSxyZXNwb25zZTp7UmVzdWx0SXRlbTpcInJlc3VsdExpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoUmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuRlJJRU5ELFwiLlwiKS5jb25jYXQoenMuQ01ELkRFTEVURV9GUklFTkRfQVBQTElDQVRJT04pfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIix0eXBlOlwiXCIsdXNlcklETGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dHlwZTpcIlBlbmRlbmN5VHlwZVwiLHVzZXJJRExpc3Q6XCJUb19BY2NvdW50XCJ9LHJlc3BvbnNlOntSZXN1bHRJdGVtOlwicmVzdWx0TGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChibCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdCh6cy5DTUQuUkVQT1JUX0ZSSUVORF9BUFBMSUNBVElPTil9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLGxhdGVzdFRpbWVTdGFtcDpcIlwifSxrZXlNYXA6e3JlcXVlc3Q6e2xhdGVzdFRpbWVTdGFtcDpcIkxhdGVzdFBlbmRlbmN5VGltZVN0YW1wXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEdsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KHpzLkNNRC5DUkVBVEVfRlJJRU5EX0dST1VQKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsZ3JvdXBOYW1lOnZvaWQgMCx1c2VySURMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ontncm91cE5hbWU6XCJHcm91cE5hbWVcIix1c2VySURMaXN0OlwiVG9fQWNjb3VudFwifSxyZXNwb25zZTp7UmVzdWx0SXRlbTpcInJlc3VsdExpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoUGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuRlJJRU5ELFwiLlwiKS5jb25jYXQoenMuQ01ELkRFTEVURV9GUklFTkRfR1JPVVApfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIixuYW1lTGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bmFtZUxpc3Q6XCJHcm91cE5hbWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQod2wsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuRlJJRU5ELFwiLlwiKS5jb25jYXQoenMuQ01ELkdFVF9GUklFTkRfR1JPVVBfTElTVCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLGxhc3RTZXF1ZW5jZTowLG5lZWRGcmllbmQ6XCJOZWVkX0ZyaWVuZF9UeXBlX1llc1wifSxrZXlNYXA6e3Jlc3BvbnNlOntSZXN1bHRJdGVtOlwicmVzdWx0TGlzdFwiLEdyb3VwTmFtZTpcIm5hbWVcIixGcmllbmROdW1iZXI6XCJmcmllbmRDb3VudFwiLFRvX0FjY291bnQ6XCJ1c2VySURMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFVsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkZSSUVORCxcIi5cIikuY29uY2F0KHpzLkNNRC5VUERBVEVfRlJJRU5EX0dST1VQKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsb2xkTmFtZTpcIlwiLG5ld05hbWU6dm9pZCAwLHVwZGF0ZUdyb3VwSXRlbTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7b2xkTmFtZTpcIkdyb3VwT2xkTmFtZVwiLG5ld05hbWU6XCJHcm91cE5ld05hbWVcIn0scmVzcG9uc2U6e1VwZGF0ZVR5cGU6XCJ0eXBlXCIsUmVzdWx0SXRlbTpcInJlc3VsdExpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoV2wsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdCh6cy5DTUQuR0VUX0pPSU5FRF9HUk9VUFMpfSksYm9keTp7bWVtYmVyQWNjb3VudDpcIlwiLGxpbWl0OnZvaWQgMCxvZmZzZXQ6dm9pZCAwLGdyb3VwVHlwZTp2b2lkIDAscmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZUluZm9GaWx0ZXI6dm9pZCAwLHNlbGZJbmZvRmlsdGVyOnZvaWQgMH19LGtleU1hcDp7cmVxdWVzdDp7bWVtYmVyQWNjb3VudDpcIk1lbWJlcl9BY2NvdW50XCJ9LHJlc3BvbnNlOntHcm91cElkTGlzdDpcImdyb3Vwc1wiLE1zZ0ZsYWc6XCJtZXNzYWdlUmVtaW5kVHlwZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh6bCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5HRVRfR1JPVVBfSU5GTyl9KSxib2R5Ontncm91cElETGlzdDp2b2lkIDAscmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZUluZm9GaWx0ZXI6W1wiVHlwZVwiLFwiTmFtZVwiLFwiSW50cm9kdWN0aW9uXCIsXCJOb3RpZmljYXRpb25cIixcIkZhY2VVcmxcIixcIk93bmVyX0FjY291bnRcIixcIkNyZWF0ZVRpbWVcIixcIkluZm9TZXFcIixcIkxhc3RJbmZvVGltZVwiLFwiTGFzdE1zZ1RpbWVcIixcIk1lbWJlck51bVwiLFwiTWF4TWVtYmVyTnVtXCIsXCJBcHBseUpvaW5PcHRpb25cIixcIk5leHRNc2dTZXFcIixcIlNodXRVcEFsbE1lbWJlclwiXSxncm91cEN1c3RvbUZpZWxkRmlsdGVyOnZvaWQgMCxtZW1iZXJJbmZvRmlsdGVyOnZvaWQgMCxtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjp2b2lkIDB9fSxrZXlNYXA6e3JlcXVlc3Q6e2dyb3VwSURMaXN0OlwiR3JvdXBJZExpc3RcIixncm91cEN1c3RvbUZpZWxkOlwiQXBwRGVmaW5lZERhdGFcIixtZW1iZXJDdXN0b21GaWVsZDpcIkFwcE1lbWJlckRlZmluZWREYXRhXCIsZ3JvdXBDdXN0b21GaWVsZEZpbHRlcjpcIkFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwXCIsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6XCJBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cE1lbWJlclwifSxyZXNwb25zZTp7R3JvdXBJZExpc3Q6XCJncm91cHNcIixNc2dGbGFnOlwibWVzc2FnZVJlbWluZFR5cGVcIixBcHBEZWZpbmVkRGF0YTpcImdyb3VwQ3VzdG9tRmllbGRcIixBcHBNZW1iZXJEZWZpbmVkRGF0YTpcIm1lbWJlckN1c3RvbUZpZWxkXCIsQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXA6XCJncm91cEN1c3RvbUZpZWxkRmlsdGVyXCIsQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBNZW1iZXI6XCJtZW1iZXJDdXN0b21GaWVsZEZpbHRlclwiLEluZm9TZXE6XCJpbmZvU2VxdWVuY2VcIixNZW1iZXJMaXN0OlwibWVtYmVyc1wiLEdyb3VwSW5mbzpcImdyb3Vwc1wiLFNodXRVcFVudGlsOlwibXV0ZVVudGlsXCIsU2h1dFVwQWxsTWVtYmVyOlwibXV0ZUFsbE1lbWJlcnNcIixBcHBseUpvaW5PcHRpb246XCJqb2luT3B0aW9uXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEpsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoenMuQ01ELkNSRUFURV9HUk9VUCl9KSxib2R5Ont0eXBlOnZvaWQgMCxuYW1lOnZvaWQgMCxncm91cElEOnZvaWQgMCxvd25lcklEOnZvaWQgMCxpbnRyb2R1Y3Rpb246dm9pZCAwLG5vdGlmaWNhdGlvbjp2b2lkIDAsbWF4TWVtYmVyTnVtOnZvaWQgMCxqb2luT3B0aW9uOnZvaWQgMCxtZW1iZXJMaXN0OnZvaWQgMCxncm91cEN1c3RvbUZpZWxkOnZvaWQgMCxtZW1iZXJDdXN0b21GaWVsZDp2b2lkIDAsd2ViUHVzaEZsYWc6MSxhdmF0YXI6XCJGYWNlVXJsXCJ9LGtleU1hcDp7cmVxdWVzdDp7b3duZXJJRDpcIk93bmVyX0FjY291bnRcIix1c2VySUQ6XCJNZW1iZXJfQWNjb3VudFwiLGF2YXRhcjpcIkZhY2VVcmxcIixtYXhNZW1iZXJOdW06XCJNYXhNZW1iZXJDb3VudFwiLGpvaW5PcHRpb246XCJBcHBseUpvaW5PcHRpb25cIixncm91cEN1c3RvbUZpZWxkOlwiQXBwRGVmaW5lZERhdGFcIixtZW1iZXJDdXN0b21GaWVsZDpcIkFwcE1lbWJlckRlZmluZWREYXRhXCJ9LHJlc3BvbnNlOntIdWdlR3JvdXBGbGFnOlwiYXZDaGF0Um9vbUZsYWdcIixPdmVySm9pbmVkR3JvdXBMaW1pdF9BY2NvdW50Olwib3ZlckxpbWl0VXNlcklETGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChYbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5ERVNUUk9ZX0dST1VQKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFFsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoenMuQ01ELk1PRElGWV9HUk9VUF9JTkZPKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLG5hbWU6dm9pZCAwLGludHJvZHVjdGlvbjp2b2lkIDAsbm90aWZpY2F0aW9uOnZvaWQgMCxhdmF0YXI6dm9pZCAwLG1heE1lbWJlck51bTp2b2lkIDAsam9pbk9wdGlvbjp2b2lkIDAsZ3JvdXBDdXN0b21GaWVsZDp2b2lkIDAsbXV0ZUFsbE1lbWJlcnM6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21heE1lbWJlck51bTpcIk1heE1lbWJlckNvdW50XCIsZ3JvdXBDdXN0b21GaWVsZDpcIkFwcERlZmluZWREYXRhXCIsbXV0ZUFsbE1lbWJlcnM6XCJTaHV0VXBBbGxNZW1iZXJcIixqb2luT3B0aW9uOlwiQXBwbHlKb2luT3B0aW9uXCIsYXZhdGFyOlwiRmFjZVVybFwifSxyZXNwb25zZTp7QXBwRGVmaW5lZERhdGE6XCJncm91cEN1c3RvbUZpZWxkXCIsU2h1dFVwQWxsTWVtYmVyOlwibXV0ZUFsbE1lbWJlcnNcIixBcHBseUpvaW5PcHRpb246XCJqb2luT3B0aW9uXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFpsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoenMuQ01ELkFQUExZX0pPSU5fR1JPVVApfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsYXBwbHlNZXNzYWdlOnZvaWQgMCx1c2VyRGVmaW5lZEZpZWxkOnZvaWQgMCx3ZWJQdXNoRmxhZzoxfSxrZXlNYXA6e3JlcXVlc3Q6e2FwcGx5TWVzc2FnZTpcIkFwcGx5TXNnXCJ9LHJlc3BvbnNlOntIdWdlR3JvdXBGbGFnOlwiYXZDaGF0Um9vbUZsYWdcIixBVkNoYXRSb29tS2V5OlwiYXZDaGF0Um9vbUtleVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChlZCxmdW5jdGlvbihlKXtlLmEyLGUudGlueWlkO3JldHVybntoZWFkOnQodCh7fSxnKGUsUk0pKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkJJR19HUk9VUF9OT19BVVRILFwiLlwiKS5jb25jYXQoenMuQ01ELkFQUExZX0pPSU5fR1JPVVApfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsYXBwbHlNZXNzYWdlOnZvaWQgMCx1c2VyRGVmaW5lZEZpZWxkOnZvaWQgMCx3ZWJQdXNoRmxhZzoxfSxrZXlNYXA6e3JlcXVlc3Q6e2FwcGx5TWVzc2FnZTpcIkFwcGx5TXNnXCJ9LHJlc3BvbnNlOntIdWdlR3JvdXBGbGFnOlwiYXZDaGF0Um9vbUZsYWdcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQodGQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdCh6cy5DTUQuUVVJVF9HUk9VUCl9KSxib2R5Ontncm91cElEOnZvaWQgMH19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChuZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5TRUFSQ0hfR1JPVVBfQllfSUQpfSksYm9keTp7Z3JvdXBJRExpc3Q6dm9pZCAwLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VQdWJsaWNJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIixcIkludHJvZHVjdGlvblwiLFwiTm90aWZpY2F0aW9uXCIsXCJGYWNlVXJsXCIsXCJDcmVhdGVUaW1lXCIsXCJPd25lcl9BY2NvdW50XCIsXCJMYXN0SW5mb1RpbWVcIixcIkxhc3RNc2dUaW1lXCIsXCJOZXh0TXNnU2VxXCIsXCJNZW1iZXJOdW1cIixcIk1heE1lbWJlck51bVwiLFwiQXBwbHlKb2luT3B0aW9uXCJdfX0sa2V5TWFwOntyZXNwb25zZTp7QXBwbHlKb2luT3B0aW9uOlwiam9pbk9wdGlvblwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChvZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5DSEFOR0VfR1JPVVBfT1dORVIpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsbmV3T3duZXJJRDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bmV3T3duZXJJRDpcIk5ld093bmVyX0FjY291bnRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQocmQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdCh6cy5DTUQuSEFORExFX0FQUExZX0pPSU5fR1JPVVApfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsYXBwbGljYW50OnZvaWQgMCxoYW5kbGVBY3Rpb246dm9pZCAwLGhhbmRsZU1lc3NhZ2U6dm9pZCAwLGF1dGhlbnRpY2F0aW9uOnZvaWQgMCxtZXNzYWdlS2V5OnZvaWQgMCx1c2VyRGVmaW5lZEZpZWxkOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OnthcHBsaWNhbnQ6XCJBcHBsaWNhbnRfQWNjb3VudFwiLGhhbmRsZUFjdGlvbjpcIkhhbmRsZU1zZ1wiLGhhbmRsZU1lc3NhZ2U6XCJBcHByb3ZhbE1zZ1wiLG1lc3NhZ2VLZXk6XCJNc2dLZXlcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoYWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdCh6cy5DTUQuSEFORExFX0dST1VQX0lOVklUQVRJT04pfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsaW52aXRlcjp2b2lkIDAsaGFuZGxlQWN0aW9uOnZvaWQgMCxoYW5kbGVNZXNzYWdlOnZvaWQgMCxhdXRoZW50aWNhdGlvbjp2b2lkIDAsbWVzc2FnZUtleTp2b2lkIDAsdXNlckRlZmluZWRGaWVsZDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7aW52aXRlcjpcIkludml0ZXJfQWNjb3VudFwiLGhhbmRsZUFjdGlvbjpcIkhhbmRsZU1zZ1wiLGhhbmRsZU1lc3NhZ2U6XCJBcHByb3ZhbE1zZ1wiLG1lc3NhZ2VLZXk6XCJNc2dLZXlcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoY2QsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdCh6cy5DTUQuR0VUX0dST1VQX0FQUExJQ0FUSU9OKX0pLGJvZHk6e3N0YXJ0VGltZTp2b2lkIDAsbGltaXQ6dm9pZCAwLGhhbmRsZUFjY291bnQ6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2hhbmRsZUFjY291bnQ6XCJIYW5kbGVfQWNjb3VudFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChsZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoenMuQ01ELkRFTEVURV9HUk9VUF9TWVNURU1fTUVTU0FHRSl9KSxib2R5OnttZXNzYWdlTGlzdFRvRGVsZXRlOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OnttZXNzYWdlTGlzdFRvRGVsZXRlOlwiRGVsTXNnTGlzdFwiLG1lc3NhZ2VTZXE6XCJNc2dTZXFcIixtZXNzYWdlUmFuZG9tOlwiTXNnUmFuZG9tXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGRkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkJJR19HUk9VUF9MT05HX1BPTExJTkcsXCIuXCIpLmNvbmNhdCh6cy5DTUQuQVZDSEFUUk9PTV9MT05HX1BPTEwpfSksYm9keTp7VVNQOjEsc3RhcnRTZXE6MSxob2xkVGltZTo5MCxrZXk6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e1VTUDpcIlVTUFwifSxyZXNwb25zZTp7VG9Hcm91cElkOlwiZ3JvdXBJRFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChwZCxmdW5jdGlvbihlKXtlLmEyLGUudGlueWlkO3JldHVybntoZWFkOnQodCh7fSxnKGUsYk0pKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkJJR19HUk9VUF9MT05HX1BPTExJTkdfTk9fQVVUSCxcIi5cIikuY29uY2F0KHpzLkNNRC5BVkNIQVRST09NX0xPTkdfUE9MTCl9KSxib2R5OntVU1A6MSxzdGFydFNlcToxLGhvbGRUaW1lOjkwLGtleTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7VVNQOlwiVVNQXCJ9LHJlc3BvbnNlOntUb0dyb3VwSWQ6XCJncm91cElEXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGdkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoenMuQ01ELkdFVF9PTkxJTkVfTUVNQkVSX05VTSl9KSxib2R5Ontncm91cElEOnZvaWQgMH19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChmZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5TRVRfR1JPVVBfQVRUUklCVVRFUyl9KSxib2R5Ontncm91cElEOnZvaWQgMCxncm91cEF0dHJpYnV0ZUxpc3Q6dm9pZCAwLG1haW5TZXF1ZW5jZTp2b2lkIDAsYXZDaGF0Um9vbUtleTp2b2lkIDAsYXR0cmlidXRlQ29udHJvbDpbXCJSYWNlQ29uZmxpY3RcIl19LGtleU1hcDp7cmVxdWVzdDp7a2V5Olwia2V5XCIsdmFsdWU6XCJ2YWx1ZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChfZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5NT0RJRllfR1JPVVBfQVRUUklCVVRFUyl9KSxib2R5Ontncm91cElEOnZvaWQgMCxncm91cEF0dHJpYnV0ZUxpc3Q6dm9pZCAwLG1haW5TZXF1ZW5jZTp2b2lkIDAsYXZDaGF0Um9vbUtleTp2b2lkIDAsYXR0cmlidXRlQ29udHJvbDpbXCJSYWNlQ29uZmxpY3RcIl19LGtleU1hcDp7cmVxdWVzdDp7a2V5Olwia2V5XCIsdmFsdWU6XCJ2YWx1ZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChtZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5ERUxFVEVfR1JPVVBfQVRUUklCVVRFUyl9KSxib2R5Ontncm91cElEOnZvaWQgMCxncm91cEF0dHJpYnV0ZUxpc3Q6dm9pZCAwLG1haW5TZXF1ZW5jZTp2b2lkIDAsYXZDaGF0Um9vbUtleTp2b2lkIDAsYXR0cmlidXRlQ29udHJvbDpbXCJSYWNlQ29uZmxpY3RcIl19LGtleU1hcDp7cmVxdWVzdDp7a2V5Olwia2V5XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHZkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoenMuQ01ELkNMRUFSX0dST1VQX0FUVFJJQlVURVMpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsbWFpblNlcXVlbmNlOnZvaWQgMCxhdkNoYXRSb29tS2V5OnZvaWQgMCxhdHRyaWJ1dGVDb250cm9sOltcIlJhY2VDb25mbGljdFwiXX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChNZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUF9BVFRSLFwiLlwiKS5jb25jYXQoenMuQ01ELkdFVF9HUk9VUF9BVFRSSUJVVEVTKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGF2Q2hhdFJvb21LZXk6dm9pZCAwLGdyb3VwVHlwZToxfSxrZXlNYXA6e3JlcXVlc3Q6e2F2Q2hhdFJvb21LZXk6XCJLZXlcIixncm91cFR5cGU6XCJHcm91cFR5cGVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoeWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdCh6cy5DTUQuR0VUX0dST1VQX01FTUJFUl9MSVNUKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGxpbWl0OjAsb2Zmc2V0OjAsbWVtYmVyUm9sZUZpbHRlcjp2b2lkIDAsbWVtYmVySW5mb0ZpbHRlcjpbXCJSb2xlXCIsXCJOYW1lQ2FyZFwiLFwiU2h1dFVwVW50aWxcIixcIkpvaW5UaW1lXCJdLG1lbWJlckN1c3RvbUZpZWxkRmlsdGVyOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OnttZW1iZXJDdXN0b21GaWVsZEZpbHRlcjpcIkFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyXCJ9LHJlc3BvbnNlOntBcHBNZW1iZXJEZWZpbmVkRGF0YTpcIm1lbWJlckN1c3RvbUZpZWxkXCIsQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBNZW1iZXI6XCJtZW1iZXJDdXN0b21GaWVsZEZpbHRlclwiLE1lbWJlckxpc3Q6XCJtZW1iZXJzXCIsU2h1dFVwVW50aWw6XCJtdXRlVW50aWxcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoSWQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdCh6cy5DTUQuR0VUX0dST1VQX01FTUJFUl9JTkZPKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHVzZXJJRExpc3Q6dm9pZCAwLG1lbWJlckluZm9GaWx0ZXI6dm9pZCAwLG1lbWJlckN1c3RvbUZpZWxkRmlsdGVyOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VySURMaXN0OlwiTWVtYmVyX0xpc3RfQWNjb3VudFwiLG1lbWJlckN1c3RvbUZpZWxkRmlsdGVyOlwiQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBNZW1iZXJcIn0scmVzcG9uc2U6e01lbWJlckxpc3Q6XCJtZW1iZXJzXCIsU2h1dFVwVW50aWw6XCJtdXRlVW50aWxcIixBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cE1lbWJlcjpcIm1lbWJlckN1c3RvbUZpZWxkRmlsdGVyXCIsQXBwTWVtYmVyRGVmaW5lZERhdGE6XCJtZW1iZXJDdXN0b21GaWVsZFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChUZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5BRERfR1JPVVBfTUVNQkVSKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHNpbGVuY2U6dm9pZCAwLHVzZXJJRExpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRDpcIk1lbWJlcl9BY2NvdW50XCIsdXNlcklETGlzdDpcIk1lbWJlckxpc3RcIn0scmVzcG9uc2U6e01lbWJlckxpc3Q6XCJtZW1iZXJzXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KERkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoenMuQ01ELkRFTEVURV9HUk9VUF9NRU1CRVIpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsdXNlcklETGlzdDp2b2lkIDAscmVhc29uOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VySURMaXN0OlwiTWVtYmVyVG9EZWxfQWNjb3VudFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChTZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KHpzLkNNRC5NT0RJRllfR1JPVVBfTUVNQkVSX0lORk8pfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsdXNlcklEOnZvaWQgMCxtZXNzYWdlUmVtaW5kVHlwZTp2b2lkIDAsbmFtZUNhcmQ6dm9pZCAwLHJvbGU6dm9pZCAwLG1lbWJlckN1c3RvbUZpZWxkOnZvaWQgMCxtdXRlVGltZTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dXNlcklEOlwiTWVtYmVyX0FjY291bnRcIixtZW1iZXJDdXN0b21GaWVsZDpcIkFwcE1lbWJlckRlZmluZWREYXRhXCIsbXV0ZVRpbWU6XCJTaHV0VXBUaW1lXCIsbWVzc2FnZVJlbWluZFR5cGU6XCJNc2dGbGFnXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGtkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLklNX09QRU5fU1RBVCxcIi5cIikuY29uY2F0KHpzLkNNRC5USU1fV0VCX1JFUE9SVF9WMil9KSxib2R5OntoZWFkZXI6e30sZXZlbnQ6W10scXVhbGl0eTpbXX0sa2V5TWFwOntyZXF1ZXN0OntTREtUeXBlOlwic2RrX3R5cGVcIixTREtWZXJzaW9uOlwic2RrX3ZlcnNpb25cIixkZXZpY2VUeXBlOlwiZGV2aWNlX3R5cGVcIixwbGF0Zm9ybTpcInBsYXRmb3JtXCIsaW5zdGFuY2VJRDpcImluc3RhbmNlX2lkXCIsdHJhY2VJRDpcInRyYWNlX2lkXCIsU0RLQXBwSUQ6XCJzZGtfYXBwX2lkXCIsdXNlcklEOlwidXNlcl9pZFwiLHRpbnlJRDpcInRpbnlfaWRcIixleHRlbnNpb246XCJleHRlbnNpb25cIix0aW1lc3RhbXA6XCJ0aW1lc3RhbXBcIixuZXR3b3JrVHlwZTpcIm5ldHdvcmtfdHlwZVwiLGV2ZW50VHlwZTpcImV2ZW50X3R5cGVcIixjb2RlOlwiZXJyb3JfY29kZVwiLG1lc3NhZ2U6XCJlcnJvcl9tZXNzYWdlXCIsbW9yZU1lc3NhZ2U6XCJtb3JlX21lc3NhZ2VcIixkdXBsaWNhdGU6XCJkdXBsaWNhdGVcIixjb3N0VGltZTpcImNvc3RfdGltZVwiLGxldmVsOlwibGV2ZWxcIixxdWFsaXR5VHlwZTpcInF1YWxpdHlfdHlwZVwiLHJlcG9ydEluZGV4OlwicmVwb3J0X2luZGV4XCIsd2hvbGVQZXJpb2Q6XCJ3aG9sZV9wZXJpb2RcIix0b3RhbENvdW50OlwidG90YWxfY291bnRcIixydHRDb3VudDpcInN1Y2Nlc3NfY291bnRfYnVzaW5lc3NcIixzdWNjZXNzUmF0ZU9mUmVxdWVzdDpcInBlcmNlbnRfYnVzaW5lc3NcIixjb3VudExlc3NUaGFuMVNlY29uZDpcInN1Y2Nlc3NfY291bnRfYnVzaW5lc3NcIixwZXJjZW50T2ZDb3VudExlc3NUaGFuMVNlY29uZDpcInBlcmNlbnRfYnVzaW5lc3NcIixjb3VudExlc3NUaGFuM1NlY29uZDpcInN1Y2Nlc3NfY291bnRfcGxhdGZvcm1cIixwZXJjZW50T2ZDb3VudExlc3NUaGFuM1NlY29uZDpcInBlcmNlbnRfcGxhdGZvcm1cIixzdWNjZXNzQ291bnRPZkJ1c2luZXNzOlwic3VjY2Vzc19jb3VudF9idXNpbmVzc1wiLHN1Y2Nlc3NSYXRlT2ZCdXNpbmVzczpcInBlcmNlbnRfYnVzaW5lc3NcIixzdWNjZXNzQ291bnRPZlBsYXRmb3JtOlwic3VjY2Vzc19jb3VudF9wbGF0Zm9ybVwiLHN1Y2Nlc3NSYXRlT2ZQbGF0Zm9ybTpcInBlcmNlbnRfcGxhdGZvcm1cIixzdWNjZXNzQ291bnRPZk1lc3NhZ2VSZWNlaXZlZDpcInN1Y2Nlc3NfY291bnRfYnVzaW5lc3NcIixzdWNjZXNzUmF0ZU9mTWVzc2FnZVJlY2VpdmVkOlwicGVyY2VudF9idXNpbmVzc1wiLGF2Z1JUVDpcImF2ZXJhZ2VfdmFsdWVcIixhdmdEZWxheTpcImF2ZXJhZ2VfdmFsdWVcIixhdmdWYWx1ZTpcImF2ZXJhZ2VfdmFsdWVcIn19fX0obykpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTmQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuSEVBUlRCRUFULFwiLlwiKS5jb25jYXQoenMuQ01ELkFMSVZFKX0pLGJvZHk6e319fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChDZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5JTV9PUEVOX1BVU0gsXCIuXCIpLmNvbmNhdCh6cy5DTUQuTUVTU0FHRV9QVVNIKX0pLGJvZHk6e30sa2V5TWFwOntyZXNwb25zZTp7QzJjTXNnQXJyYXk6XCJDMkNNZXNzYWdlQXJyYXlcIixHcm91cE1zZ0FycmF5OlwiZ3JvdXBNZXNzYWdlQXJyYXlcIixHcm91cFRpcHM6XCJncm91cFRpcHNcIixDMmNOb3RpZnlNc2dBcnJheTpcIkMyQ05vdGlmeU1lc3NhZ2VBcnJheVwiLENsaWVudFNlcTpcImNsaWVudFNlcXVlbmNlXCIsTXNnUHJpb3JpdHk6XCJwcmlvcml0eVwiLE5vdGljZVNlcTpcIm5vdGljZVNlcXVlbmNlXCIsTXNnQ29udGVudDpcImNvbnRlbnRcIixNc2dUeXBlOlwidHlwZVwiLE1zZ0JvZHk6XCJlbGVtZW50c1wiLFRvR3JvdXBJZDpcInRvXCIsRGVzYzpcImRlc2NyaXB0aW9uXCIsRXh0OlwiZXh0ZW5zaW9uXCIsSXNTeW5jTXNnOlwiaXNTeW5jTWVzc2FnZVwiLEZsYWc6XCJuZWVkU3luY1wiLE5lZWRBY2s6XCJuZWVkQWNrXCIsUGVuZGVuY3lBZGRfQWNjb3VudDpcInVzZXJJRFwiLFByb2ZpbGVJbU5pY2s6XCJuaWNrXCIsUGVuZGVuY3lUeXBlOlwiYXBwbGljYXRpb25UeXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KExkLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdCh6cy5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdCh6cy5DTUQuTUVTU0FHRV9QVVNIX0FDSyl9KSxib2R5OntzZXNzaW9uRGF0YTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7c2Vzc2lvbkRhdGE6XCJTZXNzaW9uRGF0YVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChPZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5JTV9PUEVOX1NUQVRVUyxcIi5cIikuY29uY2F0KHpzLkNNRC5TVEFUVVNfRk9SQ0VPRkZMSU5FKX0pLGJvZHk6e30sa2V5TWFwOntyZXNwb25zZTp7QzJjTm90aWZ5TXNnQXJyYXk6XCJDMkNOb3RpZnlNZXNzYWdlQXJyYXlcIixOb3RpY2VTZXE6XCJub3RpY2VTZXF1ZW5jZVwiLEtpY2tvdXRNc2dOb3RpZnk6XCJraWNrb3V0TXNnTm90aWZ5XCIsTmV3SW5zdEluZm86XCJuZXdJbnN0YW5jZUluZm9cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoYmQsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KHpzLk5BTUUuSU1fTE9OR19NRVNTQUdFLFwiLlwiKS5jb25jYXQoenMuQ01ELkRPV05MT0FEX01FUkdFUl9NRVNTQUdFKX0pLGJvZHk6e2Rvd25sb2FkS2V5OlwiXCJ9LGtleU1hcDp7cmVzcG9uc2U6e0RhdGE6XCJkYXRhXCIsRGVzYzpcImRlc2NyaXB0aW9uXCIsRXh0OlwiZXh0ZW5zaW9uXCIsRG93bmxvYWRfRmxhZzpcImRvd25sb2FkRmxhZ1wiLFRodW1iVVVJRDpcInRodW1iVVVJRFwiLFZpZGVvVVVJRDpcInZpZGVvVVVJRFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChSZCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoenMuTkFNRS5JTV9MT05HX01FU1NBR0UsXCIuXCIpLmNvbmNhdCh6cy5DTUQuVVBMT0FEX01FUkdFUl9NRVNTQUdFKX0pLGJvZHk6e21lc3NhZ2VMaXN0OltdfSxrZXlNYXA6e3JlcXVlc3Q6e2Zyb21BY2NvdW50OlwiRnJvbV9BY2NvdW50XCIsdG9BY2NvdW50OlwiVG9fQWNjb3VudFwiLG1zZ1RpbWVTdGFtcDpcIk1zZ1RpbWVTdGFtcFwiLG1zZ1NlcTpcIk1zZ1NlcVwiLG1zZ1JhbmRvbTpcIk1zZ1JhbmRvbVwiLG1zZ0JvZHk6XCJNc2dCb2R5XCIsdHlwZTpcIk1zZ1R5cGVcIixjb250ZW50OlwiTXNnQ29udGVudFwiLGRhdGE6XCJEYXRhXCIsZGVzY3JpcHRpb246XCJEZXNjXCIsZXh0ZW5zaW9uOlwiRXh0XCIsc2l6ZVR5cGU6XCJUeXBlXCIsdXVpZDpcIlVVSURcIix1cmw6XCJcIixpbWFnZVVybDpcIlVSTFwiLGZpbGVVcmw6XCJVcmxcIixyZW1vdGVBdWRpb1VybDpcIlVybFwiLHJlbW90ZVZpZGVvVXJsOlwiVmlkZW9VcmxcIix0aHVtYlVVSUQ6XCJUaHVtYlVVSURcIix2aWRlb1VVSUQ6XCJWaWRlb1VVSURcIix2aWRlb1VybDpcIlwiLGRvd25sb2FkRmxhZzpcIkRvd25sb2FkX0ZsYWdcIixmcm9tOlwiRnJvbV9BY2NvdW50XCIsdGltZTpcIk1zZ1RpbWVTdGFtcFwiLG1lc3NhZ2VSYW5kb206XCJNc2dSYW5kb21cIixtZXNzYWdlU2VxdWVuY2U6XCJNc2dTZXFcIixlbGVtZW50czpcIk1zZ0JvZHlcIixjbGllbnRTZXF1ZW5jZTpcIkNsaWVudFNlcVwiLHBheWxvYWQ6XCJNc2dDb250ZW50XCIsbWVzc2FnZUxpc3Q6XCJNc2dMaXN0XCIsbWVzc2FnZU51bWJlcjpcIk1zZ051bVwiLGFic3RyYWN0TGlzdDpcIkFic3RyYWN0TGlzdFwiLG1lc3NhZ2VCb2R5OlwiTXNnQm9keVwifX19fShlKSl9fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbmZpZ01hcC5oYXMoZSl9fSx7a2V5OlwiZ2V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbmZpZ01hcC5nZXQoZSl9fSx7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9maWxsQ29uZmlnTWFwKCl9fSx7a2V5OlwiZ2V0S2V5TWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaGFzKGUpP3RoaXMuZ2V0KGUpLmtleU1hcHx8e306KEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEtleU1hcCB1bmtub3duIHByb3RvY29sTmFtZTpcIikuY29uY2F0KGUpKSx7fSl9fSx7a2V5OlwiZ2V0UHJvdG9jb2xEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wcm90b2NvbE5hbWUsbj1lLnJlcXVlc3REYXRhLG89dGhpcy5nZXQodCkscj1udWxsO2lmKG4pe3ZhciBhPXRoaXMuX3NpbXBsZURlZXBDb3B5KG8pLHM9YS5ib2R5LGk9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIHUgaW4gcylpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocyx1KSl7aWYoaVt1XT1zW3VdLHZvaWQgMD09PW5bdV0pY29udGludWU7aVt1XT1uW3VdfWEuYm9keT1pLHI9dGhpcy5fZ2V0VXBsaW5rRGF0YShhKX1lbHNlIHI9dGhpcy5fZ2V0VXBsaW5rRGF0YShvKTtyZXR1cm4gcn19LHtrZXk6XCJfZ2V0VXBsaW5rRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3JlcXVlc3REYXRhQ2xlYW5lcihlKSxuPUF1KHQuaGVhZCksbz15TSh0LmJvZHksdGhpcy5fZ2V0UmVxdWVzdEtleU1hcChuKSk7cmV0dXJuIHQuYm9keT1vLHR9fSx7a2V5OlwiX2dldFJlcXVlc3RLZXlNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLmdldEtleU1hcChlKTtyZXR1cm4gdCh0KHt9LF9NLnJlcXVlc3QpLG4ucmVxdWVzdCl9fSx7a2V5OlwiX3JlcXVlc3REYXRhQ2xlYW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PUFycmF5LmlzQXJyYXkoZSk/W106T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG8gaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxvKSYmdHUobykmJm51bGwhPT1lW29dJiZ2b2lkIDAhPT1lW29dJiYoXCJvYmplY3RcIiE9PW4oZVtvXSk/dFtvXT1lW29dOnRbb109dGhpcy5fcmVxdWVzdERhdGFDbGVhbmVyLmJpbmQodGhpcykoZVtvXSkpO3JldHVybiB0fX0se2tleTpcIl9zaW1wbGVEZWVwQ29weVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPU9iamVjdC5rZXlzKGUpLG89e30scj0wLGE9bi5sZW5ndGg7cjxhO3IrKyl0PW5bcl0semkoZVt0XSk/b1t0XT1BcnJheS5mcm9tKGVbdF0pOiRpKGVbdF0pP29bdF09dGhpcy5fc2ltcGxlRGVlcENvcHkoZVt0XSk6b1t0XT1lW3RdO3JldHVybiBvfX1dKSxlfSgpLEdNPVtMZF0sUE09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl9zZXNzaW9uTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiRG93bmxpbmtIYW5kbGVyXCIsdGhpcy5fZXZlbnRIYW5kbGVyTWFwPW5ldyBNYXAsdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcIkMyQ01lc3NhZ2VBcnJheVwiLHRoaXMuX2MyY01lc3NhZ2VBcnJheUhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcImdyb3VwTWVzc2FnZUFycmF5XCIsdGhpcy5fZ3JvdXBNZXNzYWdlQXJyYXlIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5zZXQoXCJncm91cFRpcHNcIix0aGlzLl9ncm91cFRpcHNIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5zZXQoXCJDMkNOb3RpZnlNZXNzYWdlQXJyYXlcIix0aGlzLl9DMkNOb3RpZnlNZXNzYWdlQXJyYXlIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5zZXQoXCJwcm9maWxlTW9kaWZ5XCIsdGhpcy5fcHJvZmlsZUhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcImZyaWVuZExpc3RNb2RcIix0aGlzLl9yZWxhdGlvbkNoYWluSGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwicmVjZW50Q29udGFjdE1vZFwiLHRoaXMuX3JlY2VudENvbnRhY3RIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2tleXM9dih0aGlzLl9ldmVudEhhbmRsZXJNYXAua2V5cygpKX1yZXR1cm4gYShlLFt7a2V5OlwiX2MyY01lc3NhZ2VBcnJheUhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShZYyk7aWYodCl7aWYoZS5kYXRhTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtpZigxPT09ZS5pc1N5bmNNZXNzYWdlKXt2YXIgdD1lLmZyb207ZS5mcm9tPWUudG8sZS50bz10fX0pKSwxPT09ZS5uZWVkU3luYyl0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShybCkuc3RhcnRPbmxpbmVTeW5jKCk7dC5vbk5ld0MyQ01lc3NhZ2Uoe2RhdGFMaXN0OmUuZGF0YUxpc3QsaXNJbnN0YW50TWVzc2FnZTohMH0pfX19LHtrZXk6XCJfZ3JvdXBNZXNzYWdlQXJyYXlIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoJGMpO3QmJnQub25OZXdHcm91cE1lc3NhZ2Uoe2V2ZW50OmUuZXZlbnQsZGF0YUxpc3Q6ZS5kYXRhTGlzdCxpc0luc3RhbnRNZXNzYWdlOiEwfSl9fSx7a2V5OlwiX2dyb3VwVGlwc0hhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZSgkYyk7aWYodCl7dmFyIG49ZS5ldmVudCxvPWUuZGF0YUxpc3Qscj1lLmlzSW5zdGFudE1lc3NhZ2UsYT12b2lkIDA9PT1yfHxyLHM9ZS5pc1N5bmNpbmdFbmRlZDtzd2l0Y2gobil7Y2FzZSA0OmNhc2UgNjp0Lm9uTmV3R3JvdXBUaXBzKHtldmVudDpuLGRhdGFMaXN0Om99KTticmVhaztjYXNlIDU6by5mb3JFYWNoKChmdW5jdGlvbihlKXt6aShlLmVsZW1lbnRzLnJldm9rZWRJbmZvcyk/dC5vbkdyb3VwTWVzc2FnZVJldm9rZWQoe2RhdGFMaXN0Om99KTp6aShlLmVsZW1lbnRzLmdyb3VwTWVzc2FnZVJlYWROb3RpY2UpP3Qub25Hcm91cE1lc3NhZ2VSZWFkTm90aWNlKHtkYXRhTGlzdDpvfSk6dC5vbk5ld0dyb3VwU3lzdGVtTm90aWNlKHtkYXRhTGlzdDpvLGlzSW5zdGFudE1lc3NhZ2U6YSxpc1N5bmNpbmdFbmRlZDpzfSl9KSk7YnJlYWs7Y2FzZSAxMjp0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShKYykub25OZXdHcm91cEF0VGlwcyh7ZGF0YUxpc3Q6b30pO2JyZWFrO2RlZmF1bHQ6S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZ3JvdXBUaXBzSGFuZGxlciB1bmtub3duIGV2ZW50OlwiKS5jb25jYXQobixcIiBkYXRhTGlzdDpcIiksbyl9fX19LHtrZXk6XCJfQzJDTm90aWZ5TWVzc2FnZUFycmF5SGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmRhdGFMaXN0O2lmKHppKG4pKXt2YXIgbz10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShZYyk7bi5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihXaShlKSlpZihlLmhhc093blByb3BlcnR5KFwia2lja291dE1zZ05vdGlmeVwiKSl7dmFyIHI9ZS5raWNrb3V0TXNnTm90aWZ5LGE9ci5raWNrVHlwZSxzPXIubmV3SW5zdGFuY2VJbmZvLGk9dm9pZCAwPT09cz97fTpzOzE9PT1hP3QuX3Nlc3Npb25Nb2R1bGUub25NdWx0aXBsZUFjY291bnRLaWNrZWRPdXQoaSk6Mj09PWEmJnQuX3Nlc3Npb25Nb2R1bGUub25NdWx0aXBsZURldmljZUtpY2tlZE91dChpKX1lbHNlIGUuaGFzT3duUHJvcGVydHkoXCJjMmNNZXNzYWdlUmV2b2tlZE5vdGlmeVwiKT9vJiZvLm9uQzJDTWVzc2FnZVJldm9rZWQoe2RhdGFMaXN0Om59KTplLmhhc093blByb3BlcnR5KFwiYzJjTWVzc2FnZVJlYWRSZWNlaXB0XCIpP28mJm8ub25DMkNNZXNzYWdlUmVhZFJlY2VpcHQoe2RhdGFMaXN0Om59KTplLmhhc093blByb3BlcnR5KFwiYzJjTWVzc2FnZVJlYWROb3RpY2VcIikmJm8mJm8ub25DMkNNZXNzYWdlUmVhZE5vdGljZSh7ZGF0YUxpc3Q6bn0pfSkpfX19LHtrZXk6XCJfcHJvZmlsZUhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShqYykub25Qcm9maWxlTW9kaWZpZWQoe2RhdGFMaXN0OmUuZGF0YUxpc3R9KTt2YXIgdD10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShXYyk7dCYmdC5vbkZyaWVuZFByb2ZpbGVNb2RpZmllZCh7ZGF0YUxpc3Q6ZS5kYXRhTGlzdH0pfX0se2tleTpcIl9yZWxhdGlvbkNoYWluSGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGpjKS5vblJlbGF0aW9uQ2hhaW5Nb2RpZmllZCh7ZGF0YUxpc3Q6ZS5kYXRhTGlzdH0pO3ZhciB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKFdjKTt0JiZ0Lm9uUmVsYXRpb25DaGFpbk1vZGlmaWVkKHtkYXRhTGlzdDplLmRhdGFMaXN0fSl9fSx7a2V5OlwiX3JlY2VudENvbnRhY3RIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdDtpZih6aSh0KSl7dmFyIG49dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoSmMpO24mJnQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wdXNoVHlwZSxvPWUucmVjZW50Q29udGFjdFRvcEl0ZW0scj1lLnJlY2VudENvbnRhY3REZWxldGVJdGVtOzE9PT10P24ub25Db252ZXJzYXRpb25EZWxldGVkKHIucmVjZW50Q29udGFjdExpc3QpOjI9PT10P24ub25Db252ZXJzYXRpb25QaW5uZWQoby5yZWNlbnRDb250YWN0TGlzdCk6Mz09PXQmJm4ub25Db252ZXJzYXRpb25VbnBpbm5lZChvLnJlY2VudENvbnRhY3RMaXN0KX0pKX19fSx7a2V5OlwiX2Nsb3VkQ29udHJvbENvbmZpZ0hhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZSh1bCkub25QdXNoZWRDbG91ZENvbnRyb2xDb25maWcoZSl9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuaGVhZCxvPWUuYm9keTtpZih0aGlzLl9pc1B1c2hlZENsb3VkQ29udHJvbENvbmZpZyhuKSl0aGlzLl9jbG91ZENvbnRyb2xDb25maWdIYW5kbGVyKG8pO2Vsc2V7dmFyIHI9by5ldmVudEFycmF5LGE9by5pc0luc3RhbnRNZXNzYWdlLHM9by5pc1N5bmNpbmdFbmRlZCxpPW8ubmVlZFN5bmM7aWYoemkocikpZm9yKHZhciB1PW51bGwsYz1udWxsLGw9MCxkPTAscD1yLmxlbmd0aDtkPHA7ZCsrKXtsPSh1PXJbZF0pLmV2ZW50O3ZhciBnPU9iamVjdC5rZXlzKHUpLmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybi0xIT09dC5fa2V5cy5pbmRleE9mKGUpfSkpO2c/KGM9dVtnXSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuZ2V0KGcpKHtldmVudDpsLGRhdGFMaXN0OmMsaXNJbnN0YW50TWVzc2FnZTphLGlzU3luY2luZ0VuZGVkOnMsbmVlZFN5bmM6aX0pKTpLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTWVzc2FnZSB1bmtub3duIGV2ZW50SXRlbTpcIikuY29uY2F0KHUpKX19fX0se2tleTpcIl9pc1B1c2hlZENsb3VkQ29udHJvbENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnNlcnZjbWQmJmUuc2VydmNtZC5pbmNsdWRlcyhHZCl9fV0pLGV9KCksVU09ZnVuY3Rpb24oZSl7aShuLGUpO3ZhciB0PV8obik7ZnVuY3Rpb24gbihlKXt2YXIgcjtyZXR1cm4gbyh0aGlzLG4pLChyPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiU2Vzc2lvbk1vZHVsZVwiLHIuX3BsYXRmb3JtPXIuZ2V0UGxhdGZvcm0oKSxyLl9wcm90b2NvbEhhbmRsZXI9bmV3IHdNKGgocikpLHIuX21lc3NhZ2VEaXNwYXRjaGVyPW5ldyBQTShoKHIpKSxyfXJldHVybiBhKG4sW3trZXk6XCJ1cGRhdGVQcm90b2NvbENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcHJvdG9jb2xIYW5kbGVyLnVwZGF0ZSgpfX0se2tleTpcInJlcXVlc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVxdWVzdCBvcHRpb25zOlwiKSxlKTt2YXIgdD1lLnByb3RvY29sTmFtZSxuPWUudGpnSUQ7aWYoIXRoaXMuX3Byb3RvY29sSGFuZGxlci5oYXModCkpcmV0dXJuIEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlcXVlc3QgdW5rbm93biBwcm90b2NvbDpcIikuY29uY2F0KHQpKSxZbSh7Y29kZTpQZC5DQU5OT1RfRklORF9QUk9UT0NPTCxtZXNzYWdlOiRwfSk7dmFyIG89dGhpcy5nZXRQcm90b2NvbERhdGEoZSk7T3Uobil8fChvLmhlYWQudGpnSUQ9bik7dmFyIHI9dGhpcy5nZXRNb2R1bGUoc2wpO3JldHVybiBHTS5pbmNsdWRlcyh0KT9yLnNpbXBseVNlbmQobyk6ci5zZW5kKG8pfX0se2tleTpcImdldEtleU1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wcm90b2NvbEhhbmRsZXIuZ2V0S2V5TWFwKGUpfX0se2tleTpcImdlbkNvbW1vbkhlYWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TW9kdWxlKFhjKTtyZXR1cm57dmVyOlwidjRcIixwbGF0Zm9ybTp0aGlzLl9wbGF0Zm9ybSx3ZWJzZGthcHBpZDpqcyx3ZWJzZGt2ZXJzaW9uOkhzLGEyOmUuZ2V0QTJLZXkoKXx8dm9pZCAwLHRpbnlpZDplLmdldFRpbnlJRCgpfHx2b2lkIDAsc3RhdHVzX2luc3RpZDplLmdldFN0YXR1c0luc3RhbmNlSUQoKSxzZGthcHBpZDplLmdldFNES0FwcElEKCksY29udGVudHR5cGU6ZS5nZXRDb250ZW50VHlwZSgpLHJlcXRpbWU6MCxpZGVudGlmaWVyOmUuZ2V0QTJLZXkoKT92b2lkIDA6ZS5nZXRVc2VySUQoKSx1c2Vyc2lnOmUuZ2V0QTJLZXkoKT92b2lkIDA6ZS5nZXRVc2VyU2lnKCksc2RrYWJpbGl0eToyLHRqZ0lEOlwiXCJ9fX0se2tleTpcImdlbkNvc1NwZWNpZmllZEhlYWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TW9kdWxlKFhjKTtyZXR1cm57dmVyOlwidjRcIixwbGF0Zm9ybTp0aGlzLl9wbGF0Zm9ybSx3ZWJzZGthcHBpZDpqcyx3ZWJzZGt2ZXJzaW9uOkhzLHNka2FwcGlkOmUuZ2V0U0RLQXBwSUQoKSxjb250ZW50dHlwZTplLmdldENvbnRlbnRUeXBlKCkscmVxdGltZTowLGlkZW50aWZpZXI6ZS5nZXRVc2VySUQoKSx1c2Vyc2lnOmUuZ2V0VXNlclNpZygpLHN0YXR1c19pbnN0aWQ6ZS5nZXRTdGF0dXNJbnN0YW5jZUlEKCksc2RrYWJpbGl0eToyfX19LHtrZXk6XCJnZW5TU09SZXBvcnRIZWFkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldE1vZHVsZShYYyk7cmV0dXJue3ZlcjpcInY0XCIscGxhdGZvcm06dGhpcy5fcGxhdGZvcm0sd2Vic2RrYXBwaWQ6anMsd2Vic2RrdmVyc2lvbjpIcyxzZGthcHBpZDplLmdldFNES0FwcElEKCksY29udGVudHR5cGU6XCJcIixyZXF0aW1lOjAsaWRlbnRpZmllcjpcIlwiLHVzZXJzaWc6XCJcIixzdGF0dXNfaW5zdGlkOmUuZ2V0U3RhdHVzSW5zdGFuY2VJRCgpLHNka2FiaWxpdHk6Mn19fSx7a2V5OlwiZ2V0UHJvdG9jb2xEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Byb3RvY29sSGFuZGxlci5nZXRQcm90b2NvbERhdGEoZSl9fSx7a2V5Olwib25FcnJvckNvZGVOb3RaZXJvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lcnJvckNvZGU7aWYodD09PVBkLkhFTExPX0FOU1dFUl9LSUNLRURfT1VUKXt2YXIgbj1lLmtpY2tUeXBlLG89ZS5uZXdJbnN0YW5jZUluZm8scj12b2lkIDA9PT1vP3t9Om87MT09PW4/dGhpcy5vbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dChyKToyPT09biYmdGhpcy5vbk11bHRpcGxlRGV2aWNlS2lja2VkT3V0KHIpfXQhPT1QZC5NRVNTQUdFX0EyS0VZX0VYUElSRUQmJnQhPT1QZC5BQ0NPVU5UX0EyS0VZX0VYUElSRUR8fCh0aGlzLl9vblVzZXJTaWdFeHBpcmVkKCksdGhpcy5nZXRNb2R1bGUoc2wpLnJlQ29ubmVjdCgpKX19LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmJvZHksbj10Lm5lZWRBY2ssbz12b2lkIDA9PT1uPzA6bixyPXQuc2Vzc2lvbkRhdGE7MT09PW8mJnRoaXMuX3NlbmRBQ0sociksdGhpcy5fbWVzc2FnZURpc3BhdGNoZXIub25NZXNzYWdlKGUpfX0se2tleTpcIm9uUmVjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5pc0xvZ2dlZEluKCkmJnRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnBsfSkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49dC5kYXRhLmluc3RhbmNlSUQ7ZS5nZXRNb2R1bGUoWGMpLnNldFN0YXR1c0luc3RhbmNlSUQobiksS2kubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5vblJlY29ubmVjdGVkLCBsb2dpbiBvay4gc3RhcnQgdG8gc3luYyB1bnJlYWQgbWVzc2FnZXMuXCIpKSxlLmdldE1vZHVsZShybCkuc3RhcnRTeW5jT25SZWNvbm5lY3RlZCgpLGUuZ2V0TW9kdWxlKGNsKS5zdGFydFB1bGwoKSxlLmdldE1vZHVsZSgkYykudXBkYXRlTG9jYWxNYWluU2VxdWVuY2VPblJlY29ubmVjdGVkKCl9KSl9fSx7a2V5Olwib25NdWx0aXBsZUFjY291bnRLaWNrZWRPdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdldE1vZHVsZShCYykub25NdWx0aXBsZUFjY291bnRLaWNrZWRPdXQoZSl9fSx7a2V5Olwib25NdWx0aXBsZURldmljZUtpY2tlZE91dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ2V0TW9kdWxlKEJjKS5vbk11bHRpcGxlRGV2aWNlS2lja2VkT3V0KGUpfX0se2tleTpcIl9vblVzZXJTaWdFeHBpcmVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmdldE1vZHVsZShCYykub25Vc2VyU2lnRXhwaXJlZCgpfX0se2tleTpcIl9zZW5kQUNLXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6TGQscmVxdWVzdERhdGE6e3Nlc3Npb25EYXRhOmV9fSl9fV0pLG59KGRsKSxGTT1mdW5jdGlvbihlKXtpKG4sZSk7dmFyIHQ9XyhuKTtmdW5jdGlvbiBuKGUpe3ZhciByO3JldHVybiBvKHRoaXMsbiksKHI9dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJNZXNzYWdlTG9zc0RldGVjdGlvbk1vZHVsZVwiLHIuX21heWJlTG9zdFNlcXVlbmNlc01hcD1uZXcgTWFwLHJ9cmV0dXJuIGEobixbe2tleTpcIm9uTWVzc2FnZU1heWJlTG9zdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9tYXliZUxvc3RTZXF1ZW5jZXNNYXAuaGFzKGUpfHx0aGlzLl9tYXliZUxvc3RTZXF1ZW5jZXNNYXAuc2V0KGUsW10pO2Zvcih2YXIgbz10aGlzLl9tYXliZUxvc3RTZXF1ZW5jZXNNYXAuZ2V0KGUpLHI9MDtyPG47cisrKW8ucHVzaCh0K3IpO0tpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk1lc3NhZ2VNYXliZUxvc3QuIG1heWJlTG9zdFNlcXVlbmNlczpcIikuY29uY2F0KG8pKX19LHtrZXk6XCJkZXRlY3RNZXNzYWdlTG9zc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fbWF5YmVMb3N0U2VxdWVuY2VzTWFwLmdldChlKTtpZighT3UobikmJiFPdSh0KSl7dmFyIG89dC5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybi0xIT09bi5pbmRleE9mKGUpfSkpO2lmKEtpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZXRlY3RNZXNzYWdlTG9zcy4gbWF0Y2hlZFNlcXVlbmNlczpcIikuY29uY2F0KG8pKSxuLmxlbmd0aD09PW8ubGVuZ3RoKUtpLmluZm8oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRldGVjdE1lc3NhZ2VMb3NzIG5vIG1lc3NhZ2UgbG9zcy4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlKSk7ZWxzZXt2YXIgcixhPW4uZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4tMT09PW8uaW5kZXhPZihlKX0pKSxzPWEubGVuZ3RoO3M8PTU/cj1lK1wiLVwiK2Euam9pbihcIi1cIik6KGEuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS10fSkpLHI9ZStcIiBzdGFydDpcIithWzBdK1wiIGVuZDpcIithW3MtMV0rXCIgY291bnQ6XCIrcyksbmV3IGxnKEloKS5zZXRNZXNzYWdlKHIpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TGV2ZWwoXCJ3YXJuaW5nXCIpLmVuZCgpLEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRldGVjdE1lc3NhZ2VMb3NzIG1lc3NhZ2UgbG9zcyBkZXRlY3RlZC4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIGxvc3RTZXF1ZW5jZXM6XCIpLmNvbmNhdChhKSl9bi5sZW5ndGg9MH19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX21heWJlTG9zdFNlcXVlbmNlc01hcC5jbGVhcigpfX1dKSxufShkbCkscU09ZnVuY3Rpb24oZSl7aShuLGUpO3ZhciB0PV8obik7ZnVuY3Rpb24gbihlKXt2YXIgcjtyZXR1cm4gbyh0aGlzLG4pLChyPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiQ2xvdWRDb250cm9sTW9kdWxlXCIsci5fY2xvdWRDb25maWc9bmV3IE1hcCxyLl9leHBpcmVkVGltZT0wLHIuX3ZlcnNpb249MCxyLl9pc0ZldGNoaW5nPSExLHJ9cmV0dXJuIGEobixbe2tleTpcImdldENsb3VkQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpP3RoaXMuX2Nsb3VkQ29uZmlnOnRoaXMuX2Nsb3VkQ29uZmlnLmhhcyhlKT90aGlzLl9jbG91ZENvbmZpZy5nZXQoZSk6dm9pZCAwfX0se2tleTpcIl9jYW5GZXRjaENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMb2dnZWRJbigpJiYhdGhpcy5faXNGZXRjaGluZyYmRGF0ZS5ub3coKT49dGhpcy5fZXhwaXJlZFRpbWV9fSx7a2V5OlwiZmV0Y2hDb25maWdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLl9jYW5GZXRjaENvbmZpZygpO2lmKEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZmV0Y2hDb25maWcgY2FuRmV0Y2hDb25maWc6XCIpLmNvbmNhdCh0KSksdCl7dmFyIG49bmV3IGxnKFloKSxvPXRoaXMuZ2V0TW9kdWxlKFhjKS5nZXRTREtBcHBJRCgpO3RoaXMuX2lzRmV0Y2hpbmc9ITAsdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6d2QscmVxdWVzdERhdGE6e1NES0FwcElEOm8sdmVyc2lvbjp0aGlzLl92ZXJzaW9ufX0pLnRoZW4oKGZ1bmN0aW9uKHQpe2UuX2lzRmV0Y2hpbmc9ITEsbi5zZXRNZXNzYWdlKFwidmVyc2lvbjpcIi5jb25jYXQoZS5fdmVyc2lvbixcIiBuZXdWZXJzaW9uOlwiKS5jb25jYXQodC5kYXRhLnZlcnNpb24sXCIgY29uZmlnOlwiKS5jb25jYXQodC5kYXRhLmNsb3VkQ29udHJvbENvbmZpZykpLnNldE5ldHdvcmtUeXBlKGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5mZXRjaENvbmZpZyBva1wiKSksZS5fcGFyc2VDbG91ZENvbnRyb2xDb25maWcodC5kYXRhKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7ZS5faXNGZXRjaGluZz0hMSxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPW0oZSwyKSxyPW9bMF0sYT1vWzFdO24uc2V0RXJyb3IodCxyLGEpLmVuZCgpfSkpLEtpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuZmV0Y2hDb25maWcgZmFpbGVkLiBlcnJvcjpcIiksdCksZS5fc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3IoMTJlNCl9KSl9fX0se2tleTpcIm9uUHVzaGVkQ2xvdWRDb250cm9sQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblB1c2hlZENsb3VkQ29udHJvbENvbmZpZ1wiKSksbmV3IGxnKCRoKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJuZXdWZXJzaW9uOlwiLmNvbmNhdChlLnZlcnNpb24sXCIgY29uZmlnOlwiKS5jb25jYXQoZS5jbG91ZENvbnRyb2xDb25maWcpKS5lbmQoKSx0aGlzLl9wYXJzZUNsb3VkQ29udHJvbENvbmZpZyhlKX19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jYW5GZXRjaENvbmZpZygpJiZ0aGlzLmZldGNoQ29uZmlnKCl9fSx7a2V5OlwiX3BhcnNlQ2xvdWRDb250cm9sQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fcGFyc2VDbG91ZENvbnRyb2xDb25maWdcIiksbz1lLmVycm9yQ29kZSxyPWUuZXJyb3JNZXNzYWdlLGE9ZS5jbG91ZENvbnRyb2xDb25maWcscz1lLnZlcnNpb24saT1lLmV4cGlyZWRUaW1lO2lmKDA9PT1vKXtpZih0aGlzLl92ZXJzaW9uIT09cyl7dmFyIHU9bnVsbDt0cnl7dT1KU09OLnBhcnNlKGEpfWNhdGNoKGN5KXtLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIEpTT04gcGFyc2UgZXJyb3I6XCIpLmNvbmNhdChhKSl9dSYmKHRoaXMuX2Nsb3VkQ29uZmlnLmNsZWFyKCksT2JqZWN0LmtleXModSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fY2xvdWRDb25maWcuc2V0KGUsdVtlXSl9KSksdGhpcy5fdmVyc2lvbj1zLHRoaXMuZW1pdElubmVyRXZlbnQoZ3YuQ0xPVURfQ09ORklHX1VQREFURUQpKX10aGlzLl9leHBpcmVkVGltZT1EYXRlLm5vdygpKzFlMyppfWVsc2UgSmkobyk/KEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gSW52YWxpZCBtZXNzYWdlIGZvcm1hdDpcIiksZSksdGhpcy5fc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3IoMzZlNSkpOihLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGVycm9yQ29kZTpcIikuY29uY2F0KG8sXCIgZXJyb3JNZXNzYWdlOlwiKS5jb25jYXQocikpLHRoaXMuX3NldEV4cGlyZWRUaW1lT25SZXNwb25zZUVycm9yKDEyZTQpKX19LHtrZXk6XCJfc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9leHBpcmVkVGltZT1EYXRlLm5vdygpK2V9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX2Nsb3VkQ29uZmlnLmNsZWFyKCksdGhpcy5fZXhwaXJlZFRpbWU9MCx0aGlzLl92ZXJzaW9uPTAsdGhpcy5faXNGZXRjaGluZz0hMX19XSksbn0oZGwpLHhNPWZ1bmN0aW9uKGUpe2kobixlKTt2YXIgdD1fKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHI7cmV0dXJuIG8odGhpcyxuKSwocj10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlB1bGxHcm91cE1lc3NhZ2VNb2R1bGVcIixyLl9yZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlTWFwPW5ldyBNYXAsci5QVUxMX0xJTUlUX0NPVU5UPTE1LHJ9cmV0dXJuIGEobixbe2tleTpcInN0YXJ0UHVsbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX2dldE5lZWRQdWxsQ29udmVyc2F0aW9uTGlzdCgpO3RoaXMuX2dldFJlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2VMaXN0KCkudGhlbigoZnVuY3Rpb24oKXt2YXIgbj1lLmdldE1vZHVsZShKYyk7dC5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgbz10LmNvbnZlcnNhdGlvbklELHI9by5yZXBsYWNlKHJvLkNPTlZfR1JPVVAsXCJcIiksYT1uLmdldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlKG8pLHM9ZS5fcmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZU1hcC5nZXQocil8fDAsaT1zLWE7S2kubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5zdGFydFB1bGwgZ3JvdXBJRDpcIikuY29uY2F0KHIsXCIgbG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlOlwiKS5jb25jYXQoYSxcIiBcIikrXCJyZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlOlwiLmNvbmNhdChzLFwiIGRpZmY6XCIpLmNvbmNhdChpKSksYT4wJiZpPj0xJiZpPDMwMCYmZS5fcHVsbE1pc3NpbmdNZXNzYWdlKHtncm91cElEOnIsbG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlOmEscmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZTpzLGRpZmY6aX0pfSkpfSkpfX0se2tleTpcIl9nZXROZWVkUHVsbENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE1vZHVsZShKYykuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlPT09cm8uQ09OVl9HUk9VUCYmZS5ncm91cFByb2ZpbGUudHlwZSE9PXJvLkdSUF9BVkNIQVRST09NfSkpfX0se2tleTpcIl9nZXRSZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5nZXRNb2R1bGUoJGMpLmdldEdyb3VwTGlzdCgpLnRoZW4oKGZ1bmN0aW9uKHQpe2Zvcih2YXIgbj10LmRhdGEuZ3JvdXBMaXN0LG89dm9pZCAwPT09bj9bXTpuLHI9MDtyPG8ubGVuZ3RoO3IrKyl7dmFyIGE9b1tyXSxzPWEuZ3JvdXBJRCxpPWEubmV4dE1lc3NhZ2VTZXE7aWYoYS50eXBlIT09cm8uR1JQX0FWQ0hBVFJPT00pe3ZhciB1PWktMTtlLl9yZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLnNldChzLHUpfX19KSl9fSx7a2V5OlwiX3B1bGxNaXNzaW5nTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmxvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZSxvPWUucmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZSxyPWUuZGlmZjtlLmNvdW50PXI+dGhpcy5QVUxMX0xJTUlUX0NPVU5UP3RoaXMuUFVMTF9MSU1JVF9DT1VOVDpyLGUuc2VxdWVuY2U9cj50aGlzLlBVTExfTElNSVRfQ09VTlQ/bit0aGlzLlBVTExfTElNSVRfQ09VTlQ6bityLHRoaXMuX2dldEdyb3VwTWlzc2luZ01lc3NhZ2UoZSkudGhlbigoZnVuY3Rpb24oYSl7YS5sZW5ndGg+MCYmKGFbMF0uc2VxdWVuY2UrMTw9byYmKGUubG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlPW4rdC5QVUxMX0xJTUlUX0NPVU5ULGUuZGlmZj1yLXQuUFVMTF9MSU1JVF9DT1VOVCx0Ll9wdWxsTWlzc2luZ01lc3NhZ2UoZSkpLHQuZ2V0TW9kdWxlKCRjKS5vbk5ld0dyb3VwTWVzc2FnZSh7ZGF0YUxpc3Q6YSxpc0luc3RhbnRNZXNzYWdlOiExfSkpfSkpfX0se2tleTpcIl9nZXRHcm91cE1pc3NpbmdNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPW5ldyBsZyhvaCk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnVkLHJlcXVlc3REYXRhOntncm91cElEOmUuZ3JvdXBJRCxjb3VudDplLmNvdW50LHNlcXVlbmNlOmUuc2VxdWVuY2V9fSkudGhlbigoZnVuY3Rpb24obyl7dmFyIHI9by5kYXRhLm1lc3NhZ2VMaXN0LGE9dm9pZCAwPT09cj9bXTpyO3JldHVybiBuLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCxcIiBjb3VudDpcIikuY29uY2F0KGUuY291bnQsXCIgc2VxdWVuY2U6XCIpLmNvbmNhdChlLnNlcXVlbmNlLFwiIG1lc3NhZ2VMaXN0IGxlbmd0aDpcIikuY29uY2F0KGEubGVuZ3RoKSkuZW5kKCksYX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbz1tKHQsMikscj1vWzBdLGE9b1sxXTtuLnNldEVycm9yKGUscixhKS5lbmQoKX0pKX0pKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fcmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZU1hcC5jbGVhcigpfX1dKSxufShkbCksVk09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpLHRoaXMuX2NsYXNzTmFtZT1cIkF2Z0UyRURlbGF5XCIsdGhpcy5fZTJlRGVsYXlBcnJheT1bXX1yZXR1cm4gYShlLFt7a2V5OlwiYWRkTWVzc2FnZURlbGF5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9a3UoZS5jdXJyZW50VGltZS8xZTMtZS50aW1lLDIpO3RoaXMuX2UyZURlbGF5QXJyYXkucHVzaCh0KX19LHtrZXk6XCJfY2FsY0F2Z1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoMD09PXQpcmV0dXJuIDA7dmFyIG49MDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXtuKz1lfSkpLGt1KG4vdCwxKX19LHtrZXk6XCJfY2FsY1RvdGFsQ291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lMmVEZWxheUFycmF5Lmxlbmd0aH19LHtrZXk6XCJfY2FsY0NvdW50V2l0aExpbWl0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lMmVEZWxheUFycmF5LG49ZS5taW4sbz1lLm1heDtyZXR1cm4gdC5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBuPGUmJmU8PW99KSkubGVuZ3RofX0se2tleTpcIl9jYWxjUGVyY2VudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49a3UoZS90KjEwMCwyKTtyZXR1cm4gbj4xMDAmJihuPTEwMCksbn19LHtrZXk6XCJfY2hlY2tFMkVEZWxheUV4Y2VwdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlPnR9KSk7aWYobi5sZW5ndGg+MCl7dmFyIG89bi5sZW5ndGgscj1NYXRoLm1pbi5hcHBseShNYXRoLHYobikpLGE9TWF0aC5tYXguYXBwbHkoTWF0aCx2KG4pKSxzPXRoaXMuX2NhbGNBdmcobixvKSxpPWt1KG8vZS5sZW5ndGgqMTAwLDIpO25ldyBsZyhQZykuc2V0TWVzc2FnZShcIm1lc3NhZ2UgZTJlIGRlbGF5IGV4Y2VwdGlvbi4gY291bnQ6XCIuY29uY2F0KG8sXCIgbWluOlwiKS5jb25jYXQocixcIiBtYXg6XCIpLmNvbmNhdChhLFwiIGF2ZzpcIikuY29uY2F0KHMsXCIgcGVyY2VudDpcIikuY29uY2F0KGkpKS5zZXRMZXZlbChcIndhcm5pbmdcIikuZW5kKCl9fX0se2tleTpcImdldFN0YXRSZXN1bHRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NhbGNUb3RhbENvdW50KCk7aWYoMD09PWUpcmV0dXJuIG51bGw7dmFyIHQ9dih0aGlzLl9lMmVEZWxheUFycmF5KSxuPXRoaXMuX2NhbGNDb3VudFdpdGhMaW1pdCh7ZTJlRGVsYXlBcnJheTp0LG1pbjowLG1heDoxfSksbz10aGlzLl9jYWxjQ291bnRXaXRoTGltaXQoe2UyZURlbGF5QXJyYXk6dCxtaW46MSxtYXg6M30pLHI9dGhpcy5fY2FsY1BlcmNlbnQobixlKSxhPXRoaXMuX2NhbGNQZXJjZW50KG8sZSkscz10aGlzLl9jYWxjQXZnKHQsZSk7cmV0dXJuIHRoaXMuX2NoZWNrRTJFRGVsYXlFeGNlcHRpb24odCwzKSx0aGlzLnJlc2V0KCkse3RvdGFsQ291bnQ6ZSxjb3VudExlc3NUaGFuMVNlY29uZDpuLHBlcmNlbnRPZkNvdW50TGVzc1RoYW4xU2Vjb25kOnIsY291bnRMZXNzVGhhbjNTZWNvbmQ6byxwZXJjZW50T2ZDb3VudExlc3NUaGFuM1NlY29uZDphLGF2Z0RlbGF5OnN9fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9lMmVEZWxheUFycmF5Lmxlbmd0aD0wfX1dKSxlfSgpLEtNPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe28odGhpcyxlKSx0aGlzLl9jbGFzc05hbWU9XCJBdmdSVFRcIix0aGlzLl9yZXF1ZXN0Q291bnQ9MCx0aGlzLl9ydHRBcnJheT1bXX1yZXR1cm4gYShlLFt7a2V5OlwiYWRkUmVxdWVzdENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZXF1ZXN0Q291bnQrPTF9fSx7a2V5OlwiYWRkUlRUXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcnR0QXJyYXkucHVzaChlKX19LHtrZXk6XCJfY2FsY1RvdGFsQ291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXF1ZXN0Q291bnR9fSx7a2V5OlwiX2NhbGNSVFRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmxlbmd0aH19LHtrZXk6XCJfY2FsY1N1Y2Nlc3NSYXRlT2ZSZXF1ZXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZigwPT09dClyZXR1cm4gMDt2YXIgbj1rdShlL3QqMTAwLDIpO3JldHVybiBuPjEwMCYmKG49MTAwKSxufX0se2tleTpcIl9jYWxjQXZnXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZigwPT09dClyZXR1cm4gMDt2YXIgbj0wO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe24rPWV9KSkscGFyc2VJbnQobi90KX19LHtrZXk6XCJfY2FsY01heFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsdih0aGlzLl9ydHRBcnJheSkpfX0se2tleTpcIl9jYWxjTWluXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5taW4uYXBwbHkoTWF0aCx2KHRoaXMuX3J0dEFycmF5KSl9fSx7a2V5OlwiZ2V0U3RhdFJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY2FsY1RvdGFsQ291bnQoKSx0PXYodGhpcy5fcnR0QXJyYXkpO2lmKDA9PT1lKXJldHVybiBudWxsO3ZhciBuPXRoaXMuX2NhbGNSVFRDb3VudCh0KSxvPXRoaXMuX2NhbGNTdWNjZXNzUmF0ZU9mUmVxdWVzdChuLGUpLHI9dGhpcy5fY2FsY0F2Zyh0LG4pO3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldFN0YXRSZXN1bHQgbWF4OlwiKS5jb25jYXQodGhpcy5fY2FsY01heCgpLFwiIG1pbjpcIikuY29uY2F0KHRoaXMuX2NhbGNNaW4oKSxcIiBhdmc6XCIpLmNvbmNhdChyKSksdGhpcy5yZXNldCgpLHt0b3RhbENvdW50OmUscnR0Q291bnQ6bixzdWNjZXNzUmF0ZU9mUmVxdWVzdDpvLGF2Z1JUVDpyfX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVxdWVzdENvdW50PTAsdGhpcy5fcnR0QXJyYXkubGVuZ3RoPTB9fV0pLGV9KCksQk09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpLHRoaXMuX21hcD1uZXcgTWFwfXJldHVybiBhKGUsW3trZXk6XCJpbml0TWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX21hcC5zZXQoZSx7dG90YWxDb3VudDowLHN1Y2Nlc3NDb3VudDowLGZhaWxlZENvdW50T2ZVc2VyU2lkZTowLGNvc3RBcnJheTpbXSxmaWxlU2l6ZUFycmF5OltdfSl9KSl9fSx7a2V5OlwiYWRkVG90YWxDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEoSmkoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKSYmKHRoaXMuX21hcC5nZXQoZSkudG90YWxDb3VudCs9MSwhMCl9fSx7a2V5OlwiYWRkU3VjY2Vzc0NvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIShKaShlKXx8IXRoaXMuX21hcC5oYXMoZSkpJiYodGhpcy5fbWFwLmdldChlKS5zdWNjZXNzQ291bnQrPTEsITApfX0se2tleTpcImFkZEZhaWxlZENvdW50T2ZVc2VyU2lkZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEoSmkoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKSYmKHRoaXMuX21hcC5nZXQoZSkuZmFpbGVkQ291bnRPZlVzZXJTaWRlKz0xLCEwKX19LHtrZXk6XCJhZGRDb3N0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hKEppKGUpfHwhdGhpcy5fbWFwLmhhcyhlKSkmJih0aGlzLl9tYXAuZ2V0KGUpLmNvc3RBcnJheS5wdXNoKHQpLCEwKX19LHtrZXk6XCJhZGRGaWxlU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIShKaShlKXx8IXRoaXMuX21hcC5oYXMoZSkpJiYodGhpcy5fbWFwLmdldChlKS5maWxlU2l6ZUFycmF5LnB1c2godCksITApfX0se2tleTpcIl9jYWxjU3VjY2Vzc1JhdGVPZkJ1c2luZXNzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoSmkoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKXJldHVybi0xO3ZhciB0PXRoaXMuX21hcC5nZXQoZSksbj1rdSh0LnN1Y2Nlc3NDb3VudC90LnRvdGFsQ291bnQqMTAwLDIpO3JldHVybiBuPjEwMCYmKG49MTAwKSxufX0se2tleTpcIl9jYWxjU3VjY2Vzc1JhdGVPZlBsYXRmb3JtXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoSmkoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKXJldHVybi0xO3ZhciB0PXRoaXMuX21hcC5nZXQoZSksbj10aGlzLl9jYWxjU3VjY2Vzc0NvdW50T2ZQbGF0Zm9ybShlKS90LnRvdGFsQ291bnQqMTAwO3JldHVybihuPWt1KG4sMikpPjEwMCYmKG49MTAwKSxufX0se2tleTpcIl9jYWxjVG90YWxDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBKaShlKXx8IXRoaXMuX21hcC5oYXMoZSk/LTE6dGhpcy5fbWFwLmdldChlKS50b3RhbENvdW50fX0se2tleTpcIl9jYWxjU3VjY2Vzc0NvdW50T2ZCdXNpbmVzc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBKaShlKXx8IXRoaXMuX21hcC5oYXMoZSk/LTE6dGhpcy5fbWFwLmdldChlKS5zdWNjZXNzQ291bnR9fSx7a2V5OlwiX2NhbGNTdWNjZXNzQ291bnRPZlBsYXRmb3JtXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoSmkoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKXJldHVybi0xO3ZhciB0PXRoaXMuX21hcC5nZXQoZSk7cmV0dXJuIHQuc3VjY2Vzc0NvdW50K3QuZmFpbGVkQ291bnRPZlVzZXJTaWRlfX0se2tleTpcIl9jYWxjQXZnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpfHwhdGhpcy5fbWFwLmhhcyhlKT8tMTplPT09b2c/dGhpcy5fY2FsY0F2Z1NwZWVkKGUpOnRoaXMuX2NhbGNBdmdDb3N0KGUpfX0se2tleTpcIl9jYWxjQXZnQ29zdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21hcC5nZXQoZSkuY29zdEFycmF5Lmxlbmd0aDtpZigwPT09dClyZXR1cm4gMDt2YXIgbj0wO3JldHVybiB0aGlzLl9tYXAuZ2V0KGUpLmNvc3RBcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXtuKz1lfSkpLHBhcnNlSW50KG4vdCl9fSx7a2V5OlwiX2NhbGNBdmdTcGVlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj0wO3JldHVybiB0aGlzLl9tYXAuZ2V0KGUpLmNvc3RBcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Kz1lfSkpLHRoaXMuX21hcC5nZXQoZSkuZmlsZVNpemVBcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXtuKz1lfSkpLHBhcnNlSW50KDFlMypuL3QpfX0se2tleTpcImdldFN0YXRSZXN1bHRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jYWxjVG90YWxDb3VudChlKTtpZigwPT09dClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLl9jYWxjU3VjY2Vzc0NvdW50T2ZCdXNpbmVzcyhlKSxvPXRoaXMuX2NhbGNTdWNjZXNzUmF0ZU9mQnVzaW5lc3MoZSkscj10aGlzLl9jYWxjU3VjY2Vzc0NvdW50T2ZQbGF0Zm9ybShlKSxhPXRoaXMuX2NhbGNTdWNjZXNzUmF0ZU9mUGxhdGZvcm0oZSkscz10aGlzLl9jYWxjQXZnKGUpO3JldHVybiB0aGlzLnJlc2V0KGUpLHt0b3RhbENvdW50OnQsc3VjY2Vzc0NvdW50T2ZCdXNpbmVzczpuLHN1Y2Nlc3NSYXRlT2ZCdXNpbmVzczpvLHN1Y2Nlc3NDb3VudE9mUGxhdGZvcm06cixzdWNjZXNzUmF0ZU9mUGxhdGZvcm06YSxhdmdWYWx1ZTpzfX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKGUpe0ppKGUpP3RoaXMuX21hcC5jbGVhcigpOnRoaXMuX21hcC5zZXQoZSx7dG90YWxDb3VudDowLHN1Y2Nlc3NDb3VudDowLGZhaWxlZENvdW50T2ZVc2VyU2lkZTowLGNvc3RBcnJheTpbXSxmaWxlU2l6ZUFycmF5OltdfSl9fV0pLGV9KCksSE09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpLHRoaXMuX2xhc3RNYXA9bmV3IE1hcCx0aGlzLl9jdXJyZW50TWFwPW5ldyBNYXB9cmV0dXJuIGEoZSxbe2tleTpcImluaXRNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fbGFzdE1hcC5zZXQoZSxuZXcgTWFwKSx0Ll9jdXJyZW50TWFwLnNldChlLG5ldyBNYXApfSkpfX0se2tleTpcImFkZE1lc3NhZ2VTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5LG49ZS5tZXNzYWdlO2lmKEppKHQpfHwhdGhpcy5fbGFzdE1hcC5oYXModCl8fCF0aGlzLl9jdXJyZW50TWFwLmhhcyh0KSlyZXR1cm4hMTt2YXIgbz1uLmNvbnZlcnNhdGlvbklELHI9bi5zZXF1ZW5jZSxhPW8ucmVwbGFjZShyby5DT05WX0dST1VQLFwiXCIpO2lmKDA9PT10aGlzLl9sYXN0TWFwLmdldCh0KS5zaXplKXRoaXMuX2FkZEN1cnJlbnRNYXAoZSk7ZWxzZSBpZih0aGlzLl9sYXN0TWFwLmdldCh0KS5oYXMoYSkpe3ZhciBzPXRoaXMuX2xhc3RNYXAuZ2V0KHQpLmdldChhKSxpPXMubGVuZ3RoLTE7cj5zWzBdJiZyPHNbaV0/KHMucHVzaChyKSxzLnNvcnQoKSx0aGlzLl9sYXN0TWFwLmdldCh0KS5zZXQoYSxzKSk6dGhpcy5fYWRkQ3VycmVudE1hcChlKX1lbHNlIHRoaXMuX2FkZEN1cnJlbnRNYXAoZSk7cmV0dXJuITB9fSx7a2V5OlwiX2FkZEN1cnJlbnRNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmtleSxuPWUubWVzc2FnZSxvPW4uY29udmVyc2F0aW9uSUQscj1uLnNlcXVlbmNlLGE9by5yZXBsYWNlKHJvLkNPTlZfR1JPVVAsXCJcIik7dGhpcy5fY3VycmVudE1hcC5nZXQodCkuaGFzKGEpfHx0aGlzLl9jdXJyZW50TWFwLmdldCh0KS5zZXQoYSxbXSksdGhpcy5fY3VycmVudE1hcC5nZXQodCkuZ2V0KGEpLnB1c2gocil9fSx7a2V5OlwiX2NvcHlEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIUppKGUpKXt0aGlzLl9sYXN0TWFwLnNldChlLG5ldyBNYXApO3ZhciB0LG49dGhpcy5fbGFzdE1hcC5nZXQoZSksbz1TKHRoaXMuX2N1cnJlbnRNYXAuZ2V0KGUpKTt0cnl7Zm9yKG8ucygpOyEodD1vLm4oKSkuZG9uZTspe3ZhciByPW0odC52YWx1ZSwyKSxhPXJbMF0scz1yWzFdO24uc2V0KGEscyl9fWNhdGNoKGkpe28uZShpKX1maW5hbGx5e28uZigpfW49bnVsbCx0aGlzLl9jdXJyZW50TWFwLnNldChlLG5ldyBNYXApfX19LHtrZXk6XCJnZXRTdGF0UmVzdWx0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoSmkodGhpcy5fY3VycmVudE1hcC5nZXQoZSkpfHxKaSh0aGlzLl9sYXN0TWFwLmdldChlKSkpcmV0dXJuIG51bGw7aWYoMD09PXRoaXMuX2xhc3RNYXAuZ2V0KGUpLnNpemUpcmV0dXJuIHRoaXMuX2NvcHlEYXRhKGUpLG51bGw7dmFyIHQ9MCxuPTA7aWYodGhpcy5fbGFzdE1hcC5nZXQoZSkuZm9yRWFjaCgoZnVuY3Rpb24oZSxvKXt2YXIgcj12KGUudmFsdWVzKCkpLGE9ci5sZW5ndGgscz1yW2EtMV0tclswXSsxO3QrPXMsbis9YX0pKSwwPT09dClyZXR1cm4gbnVsbDt2YXIgbz1rdShuL3QqMTAwLDIpO3JldHVybiBvPjEwMCYmKG89MTAwKSx0aGlzLl9jb3B5RGF0YShlKSx7dG90YWxDb3VudDp0LHN1Y2Nlc3NDb3VudE9mTWVzc2FnZVJlY2VpdmVkOm4sc3VjY2Vzc1JhdGVPZk1lc3NhZ2VSZWNlaXZlZDpvfX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudE1hcC5jbGVhcigpLHRoaXMuX2xhc3RNYXAuY2xlYXIoKX19XSksZX0oKSxqTT1mdW5jdGlvbihlKXtpKHIsZSk7dmFyIG49XyhyKTtmdW5jdGlvbiByKGUpe3ZhciB0O28odGhpcyxyKSwodD1uLmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlF1YWxpdHlTdGF0TW9kdWxlXCIsdC5UQUc9XCJpbS1zc29sb2ctcXVhbGl0eS1zdGF0XCIsdC5yZXBvcnRJbmRleD0wLHQud2hvbGVQZXJpb2Q9ITEsdC5fcXVhbGl0eUl0ZW1zPVtYcCxRcCxacCxlZyx0ZyxuZyxvZyxyZyxhZyxzZ10sdC5fbWVzc2FnZVNlbnRJdGVtcz1bWnAsZWcsdGcsbmcsb2ddLHQuX21lc3NhZ2VSZWNlaXZlZEl0ZW1zPVtyZyxhZyxzZ10sdC5SRVBPUlRfSU5URVJWQUw9MTIwLHQuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD1bXSx0LlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPVtdLHQuX3N0YXRJbmZvQXJyPVtdLHQuX2F2Z1JUVD1uZXcgS00sdC5fYXZnRTJFRGVsYXk9bmV3IFZNLHQuX3JhdGVNZXNzYWdlU2VudD1uZXcgQk0sdC5fcmF0ZU1lc3NhZ2VSZWNlaXZlZD1uZXcgSE07dmFyIGE9dC5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpO3JldHVybiBhLm9uKGd2LkNPTlRFWFRfQTJLRVlfQU5EX1RJTllJRF9VUERBVEVELHQuX29uTG9naW5TdWNjZXNzLGgodCkpLGEub24oZ3YuQ0xPVURfQ09ORklHX1VQREFURUQsdC5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsaCh0KSksdH1yZXR1cm4gYShyLFt7a2V5OlwiX29uTG9naW5TdWNjZXNzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3JhdGVNZXNzYWdlU2VudC5pbml0TWFwKHRoaXMuX21lc3NhZ2VTZW50SXRlbXMpLHRoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQuaW5pdE1hcCh0aGlzLl9tZXNzYWdlUmVjZWl2ZWRJdGVtcyk7dmFyIHQ9dGhpcy5nZXRNb2R1bGUoUWMpLG49dC5nZXRJdGVtKHRoaXMuVEFHLCExKTshT3UobikmJlFpKG4uZm9yRWFjaCkmJihLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbkxvZ2luU3VjY2Vzcy5nZXQgcXVhbGl0eSBzdGF0IGxvZyBpbiBzdG9yYWdlLCBudW1zPVwiKS5jb25jYXQobi5sZW5ndGgpKSxuLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UuX3N0YXRJbmZvQXJyLnB1c2godCl9KSksdC5yZW1vdmVJdGVtKHRoaXMuVEFHLCExKSl9fSx7a2V5OlwiX29uQ2xvdWRDb25maWdVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldENsb3VkQ29uZmlnKFwicV9ycHRfaW50ZXJ2YWxcIiksdD10aGlzLmdldENsb3VkQ29uZmlnKFwicV9ycHRfc2RrYXBwaWRfYmxcIiksbj10aGlzLmdldENsb3VkQ29uZmlnKFwicV9ycHRfdGlueWlkX3dsXCIpO0ppKGUpfHwodGhpcy5SRVBPUlRfSU5URVJWQUw9TnVtYmVyKGUpKSxKaSh0KXx8KHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD10LnNwbGl0KFwiLFwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBOdW1iZXIoZSl9KSkpLEppKG4pfHwodGhpcy5SRVBPUlRfVElOWUlEX1dISVRFTElTVD1uLnNwbGl0KFwiLFwiKSl9fSx7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5pc0xvZ2dlZEluKCkmJmUldGhpcy5SRVBPUlRfSU5URVJWQUw9PTAmJih0aGlzLndob2xlUGVyaW9kPSEwLHRoaXMuX3JlcG9ydCgpKX19LHtrZXk6XCJhZGRSZXF1ZXN0Q291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2F2Z1JUVC5hZGRSZXF1ZXN0Q291bnQoKX19LHtrZXk6XCJhZGRSVFRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9hdmdSVFQuYWRkUlRUKGUpfX0se2tleTpcImFkZE1lc3NhZ2VEZWxheVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2F2Z0UyRURlbGF5LmFkZE1lc3NhZ2VEZWxheShlKX19LHtrZXk6XCJhZGRUb3RhbENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZFRvdGFsQ291bnQoZSl8fEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZFRvdGFsQ291bnQgaW52YWxpZCBrZXk6XCIpLGUpfX0se2tleTpcImFkZFN1Y2Nlc3NDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3JhdGVNZXNzYWdlU2VudC5hZGRTdWNjZXNzQ291bnQoZSl8fEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZFN1Y2Nlc3NDb3VudCBpbnZhbGlkIGtleTpcIiksZSl9fSx7a2V5OlwiYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZEZhaWxlZENvdW50T2ZVc2VyU2lkZShlKXx8S2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlIGludmFsaWQga2V5OlwiKSxlKX19LHtrZXk6XCJhZGRDb3N0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9yYXRlTWVzc2FnZVNlbnQuYWRkQ29zdChlLHQpfHxLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRDb3N0IGludmFsaWQga2V5IG9yIGNvc3Q6XCIpLGUsdCl9fSx7a2V5OlwiYWRkRmlsZVNpemVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3JhdGVNZXNzYWdlU2VudC5hZGRGaWxlU2l6ZShlLHQpfHxLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRGaWxlU2l6ZSBpbnZhbGlkIGtleSBvciBzaXplOlwiKSxlLHQpfX0se2tleTpcImFkZE1lc3NhZ2VTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQuYWRkTWVzc2FnZVNlcXVlbmNlKGUpfHxLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRNZXNzYWdlU2VxdWVuY2UgaW52YWxpZCBrZXk6XCIpLGUua2V5KX19LHtrZXk6XCJfZ2V0UXVhbGl0eUl0ZW1cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj17fSxvPWNnW3RoaXMuZ2V0TmV0d29ya1R5cGUoKV07SmkobykmJihvPTgpO3ZhciByPXtxdWFsaXR5VHlwZTppZ1tlXSx0aW1lc3RhbXA6VWkoKSxuZXR3b3JrVHlwZTpvLGV4dGVuc2lvbjpcIlwifTtzd2l0Y2goZSl7Y2FzZSBYcDpuPXRoaXMuX2F2Z1JUVC5nZXRTdGF0UmVzdWx0KCk7YnJlYWs7Y2FzZSBRcDpuPXRoaXMuX2F2Z0UyRURlbGF5LmdldFN0YXRSZXN1bHQoKTticmVhaztjYXNlIFpwOmNhc2UgZWc6Y2FzZSB0ZzpjYXNlIG5nOmNhc2Ugb2c6bj10aGlzLl9yYXRlTWVzc2FnZVNlbnQuZ2V0U3RhdFJlc3VsdChlKTticmVhaztjYXNlIHJnOmNhc2UgYWc6Y2FzZSBzZzpuPXRoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQuZ2V0U3RhdFJlc3VsdChlKX1yZXR1cm4gbnVsbD09PW4/bnVsbDp0KHQoe30sciksbil9fSx7a2V5OlwiX3JlcG9ydFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1bXSxvPW51bGw7SmkoZSk/dGhpcy5fcXVhbGl0eUl0ZW1zLmZvckVhY2goKGZ1bmN0aW9uKGUpe251bGwhPT0obz10Ll9nZXRRdWFsaXR5SXRlbShlKSkmJihvLnJlcG9ydEluZGV4PXQucmVwb3J0SW5kZXgsby53aG9sZVBlcmlvZD10Lndob2xlUGVyaW9kLG4ucHVzaChvKSl9KSk6bnVsbCE9PShvPXRoaXMuX2dldFF1YWxpdHlJdGVtKGUpKSYmKG8ucmVwb3J0SW5kZXg9dGhpcy5yZXBvcnRJbmRleCxvLndob2xlUGVyaW9kPXRoaXMud2hvbGVQZXJpb2Qsbi5wdXNoKG8pKSxLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3JlcG9ydFwiKSxuKSx0aGlzLl9zdGF0SW5mb0Fyci5sZW5ndGg+MCYmKG49bi5jb25jYXQodGhpcy5fc3RhdEluZm9BcnIpLHRoaXMuX3N0YXRJbmZvQXJyPVtdKTt2YXIgcj10aGlzLmdldE1vZHVsZShYYyksYT1yLmdldFNES0FwcElEKCkscz1yLmdldFRpbnlJRCgpO051KHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVCxhKSYmIUN1KHRoaXMuUkVQT1JUX1RJTllJRF9XSElURUxJU1QscykmJihuPVtdKSxuLmxlbmd0aD4wJiZ0aGlzLl9kb1JlcG9ydChuKX19LHtrZXk6XCJfZG9SZXBvcnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLG89e2hlYWRlcjp0TSh0aGlzKSxxdWFsaXR5OmV9O3RoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmtkLHJlcXVlc3REYXRhOnQoe30sbyl9KS50aGVuKChmdW5jdGlvbigpe24ucmVwb3J0SW5kZXgrKyxuLndob2xlUGVyaW9kPSExfSkpLmNhdGNoKChmdW5jdGlvbih0KXtLaS53YXJuKFwiXCIuY29uY2F0KG4uX2NsYXNzTmFtZSxcIi5fZG9SZXBvcnQsIG9ubGluZTpcIikuY29uY2F0KG4uZ2V0TmV0d29ya1R5cGUoKSxcIiBlcnJvcjpcIiksdCksbi5fc3RhdEluZm9BcnI9bi5fc3RhdEluZm9BcnIuY29uY2F0KGUpLG4uX2ZsdXNoQXRPbmNlKCl9KSl9fSx7a2V5OlwiX2ZsdXNoQXRPbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldE1vZHVsZShRYyksdD1lLmdldEl0ZW0odGhpcy5UQUcsITEpLG49dGhpcy5fc3RhdEluZm9BcnI7aWYoT3UodCkpS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZmx1c2hBdE9uY2UgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCkpLGUuc2V0SXRlbSh0aGlzLlRBRyxuLCEwLCExKTtlbHNle3ZhciBvPW4uY29uY2F0KHQpO28ubGVuZ3RoPjEwJiYobz1vLnNsaWNlKDAsMTApKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5jbGFzc05hbWUsXCIuX2ZsdXNoQXRPbmNlIGNvdW50OlwiKS5jb25jYXQoby5sZW5ndGgpKSxlLnNldEl0ZW0odGhpcy5UQUcsbywhMCwhMSl9dGhpcy5fc3RhdEluZm9BcnI9W119fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX3JlcG9ydCgpLHRoaXMucmVwb3J0SW5kZXg9MCx0aGlzLndob2xlUGVyaW9kPSExLHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD1bXSx0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPVtdLHRoaXMuX2F2Z1JUVC5yZXNldCgpLHRoaXMuX2F2Z0UyRURlbGF5LnJlc2V0KCksdGhpcy5fcmF0ZU1lc3NhZ2VTZW50LnJlc2V0KCksdGhpcy5fcmF0ZU1lc3NhZ2VSZWNlaXZlZC5yZXNldCgpfX1dKSxyfShkbCksWU09ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksT3UodCl8fCh0aGlzLnVzZXJJRD10LnVzZXJJRHx8XCJcIix0aGlzLm5pY2s9dC5uaWNrfHxcIlwiLHRoaXMuYXZhdGFyPXQuYXZhdGFyfHxcIlwiLHRoaXMudGltZT10LnRpbWV8fDAsdGhpcy5zb3VyY2U9dC5zb3VyY2V8fFwiXCIsdGhpcy53b3JkaW5nPXQud29yZGluZ3x8XCJcIix0aGlzLnR5cGU9dC50eXBlfHxcIlwiKX0sJE09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl9zbnNNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJGcmllbmRBcHBsaWNhdGlvbkhhbmRsZXJcIix0aGlzLl9zdGFydFRpbWU9MCx0aGlzLl9tYXhMaW1pdGVkPTEwMCx0aGlzLl9jdXJyZW50U2VxdWVuY2U9MCx0aGlzLl9mcmllbmRBcHBsaWNhdGlvbk1hcD1uZXcgTWFwLHRoaXMuX3VucmVhZENvdW50PTB9cmV0dXJuIGEoZSxbe2tleTpcImdldExvY2FsRnJpZW5kQXBwbGljYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm57ZnJpZW5kQXBwbGljYXRpb25MaXN0OnYodGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAudmFsdWVzKCkpLHVucmVhZENvdW50OnRoaXMuX3VucmVhZENvdW50fX19LHtrZXk6XCJfb25GcmllbmRBcHBsaWNhdGlvbkxpc3RVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zbnNNb2R1bGUuZW1pdE91dGVyRXZlbnQob28uRlJJRU5EX0FQUExJQ0FUSU9OX0xJU1RfVVBEQVRFRCx7ZnJpZW5kQXBwbGljYXRpb25MaXN0OnYodGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAudmFsdWVzKCkpLHVucmVhZENvdW50OnRoaXMuX3VucmVhZENvdW50fSl9fSx7a2V5Olwib25GcmllbmRBcHBsaWNhdGlvblJlYWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3VucmVhZENvdW50PTAsdGhpcy5fb25GcmllbmRBcHBsaWNhdGlvbkxpc3RVcGRhdGVkKCl9fSx7a2V5Olwib25GcmllbmRBcHBsaWNhdGlvbkFkZGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXt2YXIgbz10aGlzO2lmKCFPdShlKSl7dmFyIHI9XCJcIjtyPW49PT10aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKT9yby5TTlNfQVBQTElDQVRJT05fU0VOVF9CWV9NRTpyby5TTlNfQVBQTElDQVRJT05fU0VOVF9UT19NRTt2YXIgYT0hMTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPVwiXCIuY29uY2F0KGUudXNlcklELFwiX1wiKS5jb25jYXQocik7ciE9PXJvLlNOU19BUFBMSUNBVElPTl9TRU5UX1RPX01FfHxvLl9mcmllbmRBcHBsaWNhdGlvbk1hcC5oYXMobil8fChvLl91bnJlYWRDb3VudCs9MSksby5fZnJpZW5kQXBwbGljYXRpb25NYXAuc2V0KG4sbmV3IFlNKHQodCh7fSxlKSx7fSx7dHlwZTpyfSkpKSxhPSEwfSkpLGEmJnRoaXMuX29uRnJpZW5kQXBwbGljYXRpb25MaXN0VXBkYXRlZCgpfX19LHtrZXk6XCJvbkZyaWVuZEFwcGxpY2F0aW9uRGVsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe091KGUpfHx0aGlzLmdldEZyaWVuZEFwcGxpY2F0aW9uTGlzdCgpfX0se2tleTpcImdldEZyaWVuZEFwcGxpY2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBsZyh3aCksbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0XCIpO3JldHVybiB0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOk9sLHJlcXVlc3REYXRhOnthcHBsaWNhdGlvblR5cGU6cm8uU05TX0FQUExJQ0FUSU9OX1RZUEVfQk9USCxmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSxtYXhMaW1pdGVkOnRoaXMuX21heExpbWl0ZWQsc3RhcnRUaW1lOnRoaXMuX3N0YXJ0VGltZSxsYXN0U2VxdWVuY2U6dGhpcy5fY3VycmVudFNlcXVlbmNlfX0pLnRoZW4oKGZ1bmN0aW9uKG8pe3ZhciByPW8uZGF0YSxhPXIucmVzdWx0TGlzdCxzPXIudW5yZWFkQ291bnQsaT1yLnN0YXJ0VGltZSx1PXIuY3VycmVudFNlcXVlbmNlO2UuX3N0YXJ0VGltZT1pLGUuX2N1cnJlbnRTZXF1ZW5jZT11LGUuX3VucmVhZENvdW50PXM7dmFyIGM9emkoYSk/YS5sZW5ndGg6MDt0LnNldE5ldHdvcmtUeXBlKGUuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiYXBwbGljYXRpb25Db3VudDpcIi5jb25jYXQoYyxcIiB1bnJlYWRDb3VudDpcIikuY29uY2F0KHMpKS5lbmQoKSxLaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2suIGFwcGxpY2F0aW9uQ291bnQ6XCIpLmNvbmNhdChjLFwiIHVucmVhZENvdW50OlwiKS5jb25jYXQocykpLGUuX2ZyaWVuZEFwcGxpY2F0aW9uTWFwLmNsZWFyKCksemkoYSkmJmEuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49dC51c2VySUQsbz10LnR5cGUscj1uZXcgWU0odCk7ZS5fZnJpZW5kQXBwbGljYXRpb25NYXAuc2V0KFwiXCIuY29uY2F0KG4sXCJfXCIpLmNvbmNhdChvKSxyKX0pKSxlLl9vbkZyaWVuZEFwcGxpY2F0aW9uTGlzdFVwZGF0ZWQoKX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuIGUuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1tKGUsMikscj1uWzBdLGE9blsxXTt0LnNldEVycm9yKG8scixhKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksbyksWW0obyl9KSl9fSx7a2V5OlwiZGVsZXRlRnJpZW5kQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUZyaWVuZEFwcGxpY2F0aW9uXCIpLG89ZS51c2VySUQscj1lLnR5cGU7aWYoKCFyfHxyIT09cm8uU05TX0FQUExJQ0FUSU9OX1NFTlRfQllfTUUmJnIhPT1yby5TTlNfQVBQTElDQVRJT05fU0VOVF9UT19NRSkmJihyPXJvLlNOU19BUFBMSUNBVElPTl9TRU5UX1RPX01FKSwhdGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAuaGFzKFwiXCIuY29uY2F0KG8sXCJfXCIpLmNvbmNhdChyKSkpcmV0dXJuIFltKHtjb2RlOlBkLkZSSUVORF9BUFBMSUNBVElPTl9OT1RfRVhJU1QsbWVzc2FnZTpVcH0pO3ZhciBhPW5ldyBsZyhHaCk7cmV0dXJuIGEuc2V0TWVzc2FnZShcInVzZXJJRDpcIi5jb25jYXQobyxcIiB0eXBlOlwiKS5jb25jYXQocikpLHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6UmwscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLHVzZXJJRExpc3Q6W29dLHR5cGU6cn19KS50aGVuKChmdW5jdGlvbihlKXt2YXIgcz1lLmRhdGEucmVzdWx0TGlzdCxpPXNbMF0sdT1pLnRvLGM9aS5yZXN1bHRDb2RlLGw9aS5yZXN1bHRJbmZvO3JldHVybiBhLnNldE5ldHdvcmtUeXBlKHQuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNb3JlTWVzc2FnZShcInJlc3VsdExpc3Q6XCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHMpKSkuZW5kKCksS2kuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rLiB1c2VySUQ6XCIpLmNvbmNhdChvLFwiIHR5cGU6XCIpLmNvbmNhdChyKSksMD09PWM/UG0oKTpZbSh7dXNlcklEOnUsY29kZTpjLG1lc3NhZ2U6bH0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJhY2NlcHRGcmllbmRBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYWNjZXB0RnJpZW5kQXBwbGljYXRpb25cIiksbz1lLnVzZXJJRCxyPWUucmVtYXJrLGE9ZS50YWcscz1lLnR5cGU7KCFzfHxzIT09cm8uU05TX0FQUExJQ0FUSU9OX0FHUkVFJiZzIT09cm8uU05TX0FQUExJQ0FUSU9OX0FHUkVFX0FORF9BREQpJiYocz1yby5TTlNfQVBQTElDQVRJT05fQUdSRUVfQU5EX0FERCk7dmFyIGk9bmV3IGxnKFBoKTtyZXR1cm4gaS5zZXRNZXNzYWdlKFwidXNlcklEOlwiLmNvbmNhdChvLFwiIHR5cGU6XCIpLmNvbmNhdChzKSksdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpMbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCkscmVzcG9uc2VGcmllbmRJdGVtOlt7dXNlcklEOm8scmVtYXJrOnIsdGFnOmEsYWN0aW9uOnN9XX19KS50aGVuKChmdW5jdGlvbihlKXtpLnNldE5ldHdvcmtUeXBlKHQuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTt2YXIgcj1lLmRhdGEucmVzdWx0TGlzdFswXSxhPXIucmVzdWx0Q29kZSx1PXIucmVzdWx0SW5mbztpZigwIT09YSlyZXR1cm4gWW0oe2NvZGU6YSxtZXNzYWdlOnV9KTtLaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2suIHVzZXJJRDpcIikuY29uY2F0KG8sXCIgdHlwZTpcIikuY29uY2F0KHMpKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtpLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwicmVmdXNlRnJpZW5kQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uXCIpLG89ZS51c2VySUQscj1uZXcgbGcoVWgpO3JldHVybiByLnNldE1lc3NhZ2UoXCJ1c2VySUQ6XCIuY29uY2F0KG8pKSx0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkxsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSxyZXNwb25zZUZyaWVuZEl0ZW06W3t1c2VySUQ6byxhY3Rpb246XCJSZXNwb25zZV9BY3Rpb25fUmVqZWN0XCJ9XX19KS50aGVuKChmdW5jdGlvbihlKXtyLnNldE5ldHdvcmtUeXBlKHQuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTt2YXIgYT1lLmRhdGEucmVzdWx0TGlzdFswXSxzPWEucmVzdWx0Q29kZSxpPWEucmVzdWx0SW5mbztpZigwIT09cylyZXR1cm4gWW0oe2NvZGU6cyxtZXNzYWdlOml9KTtLaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2suIHVzZXJJRDpcIikuY29uY2F0KG8pKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLGE9blsxXTtyLnNldEVycm9yKGUsbyxhKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwiX29uRnJpZW5kQXBwbGljYXRpb25Qcm9jZXNzZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKDAhPT1lLmxlbmd0aCl7dmFyIG49ITE7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1cIlwiLmNvbmNhdChlLnRvLFwiX1wiKS5jb25jYXQocm8uU05TX0FQUExJQ0FUSU9OX1NFTlRfVE9fTUUpO3QuX2ZyaWVuZEFwcGxpY2F0aW9uTWFwLmhhcyhvKSYmKHQuX2ZyaWVuZEFwcGxpY2F0aW9uTWFwLmRlbGV0ZShvKSx0Ll91bnJlYWRDb3VudC09MSxuPSEwKX0pKSx0aGlzLl91bnJlYWRDb3VudDwwJiYodGhpcy5fdW5yZWFkQ291bnQ9MCksbiYmdGhpcy5fb25GcmllbmRBcHBsaWNhdGlvbkxpc3RVcGRhdGVkKCl9fX0se2tleTpcInNldEZyaWVuZEFwcGxpY2F0aW9uUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRGcmllbmRBcHBsaWNhdGlvblJlYWRcIiksbj1uZXcgbGcoRmgpO3JldHVybiB0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmJsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSxsYXRlc3RUaW1lU3RhbXA6a3UoVWkoKS8xZTMsMCl9fSkudGhlbigoZnVuY3Rpb24obyl7bi5zZXROZXR3b3JrVHlwZShlLl9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kuaW5mbyhcIlwiLmNvbmNhdCh0LFwiIG9rXCIpKSxlLl91bnJlYWRDb3VudD0wfSkpLmNhdGNoKChmdW5jdGlvbihvKXtyZXR1cm4gZS5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PW0oZSwyKSxyPXRbMF0sYT10WzFdO24uc2V0RXJyb3IobyxyLGEpLmVuZCgpfSkpLEtpLndhcm4oXCJcIi5jb25jYXQodCxcIiBmYWlsZWQuIGVycm9yOlwiKSxvKSxZbShvKX0pKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3RhcnRJbmRleD0wLHRoaXMuX21heExpbWl0ZWQ9MTAwLHRoaXMuX2N1cnJlbnRTZXF1ZW5jZT0wLHRoaXMuX3VucmVhZENvdW50PTAsdGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAuY2xlYXIoKX19XSksZX0oKSxXTT1RbihcInNwbGljZVwiKSx6TT1NYXRoLm1heCxKTT1NYXRoLm1pbjt2dCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6IVdNfSx7c3BsaWNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxyLGEscyxpLHU9cmUodGhpcyksYz16ZSh1Lmxlbmd0aCksbD1RZShlLGMpLGQ9YXJndW1lbnRzLmxlbmd0aDtpZigwPT09ZD9uPW89MDoxPT09ZD8obj0wLG89Yy1sKToobj1kLTIsbz1KTSh6TSgkZSh0KSwwKSxjLWwpKSxjK24tbz45MDA3MTk5MjU0NzQwOTkxKXRocm93IFR5cGVFcnJvcihcIk1heGltdW0gYWxsb3dlZCBsZW5ndGggZXhjZWVkZWRcIik7Zm9yKHI9SHQodSxvKSxhPTA7YTxvO2ErKykocz1sK2EpaW4gdSYmY24ocixhLHVbc10pO2lmKHIubGVuZ3RoPW8sbjxvKXtmb3IoYT1sO2E8Yy1vO2ErKylpPWErbiwocz1hK28paW4gdT91W2ldPXVbc106ZGVsZXRlIHVbaV07Zm9yKGE9YzthPmMtbytuO2EtLSlkZWxldGUgdVthLTFdfWVsc2UgaWYobj5vKWZvcihhPWMtbzthPmw7YS0tKWk9YStuLTEsKHM9YStvLTEpaW4gdT91W2ldPXVbc106ZGVsZXRlIHVbaV07Zm9yKGE9MDthPG47YSsrKXVbYStsXT1hcmd1bWVudHNbYSsyXTtyZXR1cm4gdS5sZW5ndGg9Yy1vK24scn19KTt2YXIgWE09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7byh0aGlzLGUpLHRoaXMudXNlcklEPXQsdGhpcy5yZW1hcms9XCJcIix0aGlzLmdyb3VwTGlzdD1bXSx0aGlzLnNvdXJjZT1cIlwiLHRoaXMuYWRkVGltZT0wLHRoaXMuZnJpZW5kQ3VzdG9tRmllbGQ9W10sdGhpcy50aW1lc3RhbXA9MDt2YXIgcj17fTtpZihyLnVzZXJJRD10LCFPdShuKSlmb3IodmFyIGE9XCJcIixzPVwiXCIsaT0wLHU9bi5sZW5ndGg7aTx1O2krKylpZihhPW5baV0udGFnLHM9bltpXS52YWx1ZSxhLmluZGV4T2YoXCJUYWdfU05TX0N1c3RvbVwiKT4tMSl0aGlzLmZyaWVuZEN1c3RvbUZpZWxkLnB1c2goe2tleTphLHZhbHVlOnN9KTtlbHNlIHN3aXRjaChhKXtjYXNlIGNtLk5JQ0s6ci5uaWNrPXM7YnJlYWs7Y2FzZSBjbS5HRU5ERVI6ci5nZW5kZXI9czticmVhaztjYXNlIGNtLkJJUlRIREFZOnIuYmlydGhkYXk9czticmVhaztjYXNlIGNtLkxPQ0FUSU9OOnIubG9jYXRpb249czticmVhaztjYXNlIGNtLlNFTEZTSUdOQVRVUkU6ci5zZWxmU2lnbmF0dXJlPXM7YnJlYWs7Y2FzZSBjbS5BTExPV1RZUEU6ci5hbGxvd1R5cGU9czticmVhaztjYXNlIGNtLkxBTkdVQUdFOnIubGFuZ3VhZ2U9czticmVhaztjYXNlIGNtLkFWQVRBUjpyLmF2YXRhcj1zO2JyZWFrO2Nhc2UgY20uTUVTU0FHRVNFVFRJTkdTOnIubWVzc2FnZVNldHRpbmdzPXM7YnJlYWs7Y2FzZSBjbS5BRE1JTkZPUkJJRFRZUEU6ci5hZG1pbkZvcmJpZFR5cGU9czticmVhaztjYXNlIGNtLkxFVkVMOnIubGV2ZWw9czticmVhaztjYXNlIGNtLlJPTEU6ci5yb2xlPXM7YnJlYWs7Y2FzZSBsbS5SRU1BUks6dGhpcy5yZW1hcms9czticmVhaztjYXNlIGxtLkFERFRJTUU6dGhpcy5hZGRUaW1lPXM7YnJlYWs7Y2FzZSBsbS5HUk9VUDp0aGlzLmdyb3VwTGlzdD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHMpKTticmVhaztjYXNlIGxtLkFERFNPVVJDRTp0aGlzLnNvdXJjZT1zO2JyZWFrO2Nhc2UgbG0uQUREV09SRElORzpicmVhaztkZWZhdWx0OktpLmxvZyhcInNuc1Byb2ZpbGVJdGVtIHVua293biB0YWctPlwiLG5baV0udGFnKX10aGlzLnByb2ZpbGU9bmV3IEl2KHIpfXJldHVybiBhKGUsW3trZXk6XCJ2YWxpZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSEwLG49XCJcIjtpZihPdShlKSlyZXR1cm57dmFsaWQ6ITEsdGlwczpcImVtcHR5IG9wdGlvbnNcIn07aWYoZS5wcm9maWxlQ3VzdG9tRmllbGQpZm9yKHZhciBvPWUucHJvZmlsZUN1c3RvbUZpZWxkLmxlbmd0aCxyPW51bGwsYT0wO2E8bzthKyspe2lmKHI9ZS5wcm9maWxlQ3VzdG9tRmllbGRbYV0sIVlpKHIua2V5KXx8LTE9PT1yLmtleS5pbmRleE9mKFwiVGFnX1Byb2ZpbGVfQ3VzdG9tXCIpKXJldHVybnt2YWxpZDohMSx0aXBzOlwi6Ieq5a6a5LmJ6LWE5paZ5a2X5q6155qE5YmN57yA5b+F6aG75pivIFRhZ19Qcm9maWxlX0N1c3RvbVwifTtpZighWWkoci52YWx1ZSkpcmV0dXJue3ZhbGlkOiExLHRpcHM6XCLoh6rlrprkuYnotYTmlpnlrZfmrrXnmoQgdmFsdWUg5b+F6aG75piv5a2X56ym5LiyXCJ9fWZvcih2YXIgcyBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHMpKXtpZihcInByb2ZpbGVDdXN0b21GaWVsZFwiPT09cyljb250aW51ZTtpZihPdShlW3NdKSYmIVlpKGVbc10pJiYhamkoZVtzXSkpe249XCJrZXk6XCIrcytcIiwgaW52YWxpZCB2YWx1ZTpcIitlW3NdLHQ9ITE7Y29udGludWV9c3dpdGNoKHMpe2Nhc2VcIm5pY2tcIjpZaShlW3NdKXx8KG49XCJuaWNrIHNob3VsZCBiZSBhIHN0cmluZ1wiLHQ9ITEpLHN1KGVbc10pPjUwMCYmKG49XCJuaWNrIG5hbWUgbGltaXRlZDogbXVzdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gXCIuY29uY2F0KDUwMCxcIiBieXRlcywgY3VycmVudCBzaXplOiBcIikuY29uY2F0KHN1KGVbc10pLFwiIGJ5dGVzXCIpLHQ9ITEpO2JyZWFrO2Nhc2VcImdlbmRlclwiOmx1KGRtLGUuZ2VuZGVyKXx8KG49XCJrZXk6Z2VuZGVyLCBpbnZhbGlkIHZhbHVlOlwiK2UuZ2VuZGVyLHQ9ITEpO2JyZWFrO2Nhc2VcImJpcnRoZGF5XCI6amkoZS5iaXJ0aGRheSl8fChuPVwiYmlydGhkYXkgc2hvdWxkIGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwibG9jYXRpb25cIjpZaShlLmxvY2F0aW9uKXx8KG49XCJsb2NhdGlvbiBzaG91bGQgYmUgYSBzdHJpbmdcIix0PSExKTticmVhaztjYXNlXCJzZWxmU2lnbmF0dXJlXCI6WWkoZS5zZWxmU2lnbmF0dXJlKXx8KG49XCJzZWxmU2lnbmF0dXJlIHNob3VsZCBiZSBhIHN0cmluZ1wiLHQ9ITEpO2JyZWFrO2Nhc2VcImFsbG93VHlwZVwiOmx1KGdtLGUuYWxsb3dUeXBlKXx8KG49XCJrZXk6YWxsb3dUeXBlLCBpbnZhbGlkIHZhbHVlOlwiK2UuYWxsb3dUeXBlLHQ9ITEpO2JyZWFrO2Nhc2VcImxhbmd1YWdlXCI6amkoZS5sYW5ndWFnZSl8fChuPVwibGFuZ3VhZ2Ugc2hvdWxkIGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwiYXZhdGFyXCI6WWkoZS5hdmF0YXIpfHwobj1cImF2YXRhciBzaG91bGQgYmUgYSBzdHJpbmdcIix0PSExKTticmVhaztjYXNlXCJtZXNzYWdlU2V0dGluZ3NcIjowIT09ZS5tZXNzYWdlU2V0dGluZ3MmJjEhPT1lLm1lc3NhZ2VTZXR0aW5ncyYmKG49XCJtZXNzYWdlU2V0dGluZ3Mgc2hvdWxkIGJlIDAgb3IgMVwiLHQ9ITEpO2JyZWFrO2Nhc2VcImFkbWluRm9yYmlkVHlwZVwiOmx1KHBtLGUuYWRtaW5Gb3JiaWRUeXBlKXx8KG49XCJrZXk6YWRtaW5Gb3JiaWRUeXBlLCBpbnZhbGlkIHZhbHVlOlwiK2UuYWRtaW5Gb3JiaWRUeXBlLHQ9ITEpO2JyZWFrO2Nhc2VcImxldmVsXCI6amkoZS5sZXZlbCl8fChuPVwibGV2ZWwgc2hvdWxkIGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwicm9sZVwiOmppKGUucm9sZSl8fChuPVwicm9sZSBzaG91bGQgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztkZWZhdWx0Om49XCJ1bmtub3duIGtleTpcIitzK1wiICBcIitlW3NdLHQ9ITF9fXJldHVybnt2YWxpZDp0LHRpcHM6bn19fSx7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVwiXCIsbj1cIlwiLG89MCxyPWUubGVuZ3RoO288cjtvKyspaWYodD1lW29dLnRhZyxuPWVbb10udmFsdWUsdC5pbmRleE9mKFwiVGFnX1NOU19DdXN0b21cIik+LTEpdGhpcy5mcmllbmRDdXN0b21GaWVsZC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmtleT09PXQmJihlLnZhbHVlPW4pfSkpO2Vsc2UgaWYodC5pbmRleE9mKFwiVGFnX1Byb2ZpbGVfQ3VzdG9tXCIpPi0xKXRoaXMucHJvZmlsZS5wcm9maWxlQ3VzdG9tRmllbGQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5rZXk9PT10JiYoZS52YWx1ZT1uKX0pKTtlbHNlIHN3aXRjaCh0KXtjYXNlIGNtLk5JQ0s6dGhpcy5wcm9maWxlLm5pY2s9bjticmVhaztjYXNlIGNtLkdFTkRFUjp0aGlzLnByb2ZpbGUuZ2VuZGVyPW47YnJlYWs7Y2FzZSBjbS5CSVJUSERBWTp0aGlzLnByb2ZpbGUuYmlydGhkYXk9bjticmVhaztjYXNlIGNtLkxPQ0FUSU9OOnRoaXMucHJvZmlsZS5sb2NhdGlvbj1uO2JyZWFrO2Nhc2UgY20uU0VMRlNJR05BVFVSRTp0aGlzLnByb2ZpbGUuc2VsZlNpZ25hdHVyZT1uO2JyZWFrO2Nhc2UgY20uQUxMT1dUWVBFOnRoaXMucHJvZmlsZS5hbGxvd1R5cGU9bjticmVhaztjYXNlIGNtLkxBTkdVQUdFOnRoaXMucHJvZmlsZS5sYW5ndWFnZT1uO2JyZWFrO2Nhc2UgY20uQVZBVEFSOnRoaXMucHJvZmlsZS5hdmF0YXI9bjticmVhaztjYXNlIGNtLk1FU1NBR0VTRVRUSU5HUzp0aGlzLnByb2ZpbGUubWVzc2FnZVNldHRpbmdzPW47YnJlYWs7Y2FzZSBjbS5BRE1JTkZPUkJJRFRZUEU6dGhpcy5wcm9maWxlLmFkbWluRm9yYmlkVHlwZT1uO2JyZWFrO2Nhc2UgY20uTEVWRUw6dGhpcy5wcm9maWxlLmxldmVsPW47YnJlYWs7Y2FzZSBjbS5ST0xFOnRoaXMucHJvZmlsZS5yb2xlPW47YnJlYWs7Y2FzZSBsbS5SRU1BUks6dGhpcy5yZW1hcms9bjticmVhaztjYXNlIGxtLkFERFRJTUU6dGhpcy5hZGRUaW1lPW47YnJlYWs7Y2FzZSBsbS5HUk9VUDp0aGlzLmdyb3VwTGlzdD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG4pKTticmVhaztjYXNlIGxtLkFERFNPVVJDRTp0aGlzLnNvdXJjZT1uO2JyZWFrO2Nhc2UgbG0uQUREV09SRElORzpicmVhaztkZWZhdWx0OktpLmxvZyhcInNuc1Byb2ZpbGVJdGVtIHVua293biB0YWctPlwiLGVbb10udGFnKX10aGlzLnRpbWVzdGFtcD1EYXRlLm5vdygpfX0se2tleTpcInVwZGF0ZVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnByb2ZpbGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSksdGhpcy50aW1lc3RhbXA9RGF0ZS5ub3coKX19LHtrZXk6XCJhZGRUb0dyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpey0xPT09dGhpcy5ncm91cExpc3QuaW5kZXhPZihlKSYmKHRoaXMuZ3JvdXBMaXN0LnB1c2goZSksdGhpcy5jb3VudD10aGlzLmdyb3VwTGlzdC5sZW5ndGgpfX0se2tleTpcInJlbW92ZUZyb21Hcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdyb3VwTGlzdC5pbmRleE9mKGUpO3Q+LTEmJih0aGlzLmdyb3VwTGlzdC5zcGxpY2UodCwxKSx0aGlzLmNvdW50PXRoaXMuZ3JvdXBMaXN0Lmxlbmd0aCl9fV0pLGV9KCksUU09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl9zbnNNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJGcmllbmRIYW5kbGVyXCIsdGhpcy5fZnJpZW5kTWFwPW5ldyBNYXAsdGhpcy5fc3RhcnRJbmRleD0wLHRoaXMuX3N0YW5kYXJkU2VxdWVuY2U9MCx0aGlzLl9jdXN0b21TZXF1ZW5jZT0wLHRoaXMuX2V4cGlyYXRpb25UaW1lPTE4ZTR9cmV0dXJuIGEoZSxbe2tleTpcImdldExvY2FsRnJpZW5kTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHYodGhpcy5fZnJpZW5kTWFwLnZhbHVlcygpKX19LHtrZXk6XCJnZXRGcmllbmRSZW1hcmtcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kTWFwLmhhcyhlKT90aGlzLl9mcmllbmRNYXAuZ2V0KGUpLnJlbWFyazpcIlwifX0se2tleTpcIm9uRnJpZW5kUHJvZmlsZU1vZGlmaWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZGF0YUxpc3Q7aWYoIU91KG4pKXt2YXIgbz10aGlzLl9zbnNNb2R1bGUuZ2V0TW9kdWxlKEpjKTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUudXNlcklELHI9ZS5wcm9maWxlTGlzdDtpZih0LmlzTXlGcmllbmQobikpe0tpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIub25GcmllbmRQcm9maWxlTW9kaWZpZWQuIGZyaWVuZCB1c2VySUQ6XCIpLmNvbmNhdChuKSk7dmFyIGE9dC5fZnJpZW5kTWFwLmdldChuKTthLnVwZGF0ZShyKSxvLm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyKFwiXCIuY29uY2F0KHJvLkNPTlZfQzJDKS5jb25jYXQobikse25pY2s6YS5wcm9maWxlLm5pY2ssYXZhdGFyOmEucHJvZmlsZS5hdmF0YXJ9KX19KSl9fX0se2tleTpcIm9uRnJpZW5kQWRkZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOzAhPT1lLmxlbmd0aCYmKEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25GcmllbmRBZGRlZCB1c2VySURMaXN0OlwiKS5jb25jYXQoZSkpLGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fZnJpZW5kTWFwLnNldChlLG5ldyBYTShlKSl9KSksdGhpcy5nZXRGcmllbmRQcm9maWxlKHt1c2VySURMaXN0OmV9KS50aGVuKChmdW5jdGlvbihuKXtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPXQuX2ZyaWVuZE1hcC5nZXQoZSk7bi5ncm91cExpc3QubGVuZ3RoPjAmJnQuX3Nuc01vZHVsZS51cGRhdGVXaGVuRnJpZW5kQWRkZWQoe25hbWVMaXN0Om4uZ3JvdXBMaXN0LHVzZXJJRDplfSl9KSksdC5fb25GcmllbmRMaXN0VXBkYXRlZCgpfSkpKX19LHtrZXk6XCJvbkZyaWVuZERlbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOzAhPT1lLmxlbmd0aCYmKEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25GcmllbmREZWxldGVkIHVzZXJJRExpc3Q6XCIpLmNvbmNhdChlKSksZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj10Ll9mcmllbmRNYXAuZ2V0KGUpO24uZ3JvdXBMaXN0Lmxlbmd0aD4wJiZ0Ll9zbnNNb2R1bGUudXBkYXRlV2hlbkZyaWVuZERlbGV0ZWQoe25hbWVMaXN0Om4uZ3JvdXBMaXN0LHVzZXJJRDplfSksdC5fZnJpZW5kTWFwLmRlbGV0ZShlKX0pKSx0aGlzLl9vbkZyaWVuZExpc3RVcGRhdGVkKCkpfX0se2tleTpcIl9vbkZyaWVuZExpc3RVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zbnNNb2R1bGUuZW1pdE91dGVyRXZlbnQob28uRlJJRU5EX0xJU1RfVVBEQVRFRCx2KHRoaXMuX2ZyaWVuZE1hcC52YWx1ZXMoKSkpLHRoaXMuX3Nuc01vZHVsZS5nZXRNb2R1bGUoSmMpLmNoZWNrQW5kUGF0Y2hSZW1hcmsoKX19LHtrZXk6XCJnZXRGcmllbmRQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRGcmllbmRQcm9maWxlXCIpLG89ZS51c2VySURMaXN0LHI9W10sYT1bXSxzPVtdO2lmKG8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYodC5fZnJpZW5kTWFwLmhhcyhlKSl7dmFyIG49dC5fZnJpZW5kTWFwLmdldChlKTtEYXRlLm5vdygpLW4udGltZXN0YW1wPHQuX2V4cGlyYXRpb25UaW1lP2EucHVzaChuKTpzLnB1c2goZSl9ZWxzZSByLnB1c2goe3VzZXJJRDplLGNvZGU6UGQuTk9UX01ZX0ZSSUVORCxtZXNzYWdlOmJwfSl9KSksMD09PXMubGVuZ3RoKXJldHVybiBLaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgbmV3VXNlcklETGlzdCBpcyBlbXB0eVwiKSksam0oe2ZyaWVuZExpc3Q6YSxmYWlsdXJlVXNlcklETGlzdDpyfSk7dmFyIGk9bmV3IGxnKE9oKTtpLnNldE1lc3NhZ2UoXCJ1c2VySURMaXN0OlwiLmNvbmNhdChzKSksS2kuaW5mbyhcIlwiLmNvbmNhdChuLFwiIHVzZXJJRExpc3Q6XCIpLmNvbmNhdChzKSk7dmFyIHU9T2JqZWN0LnZhbHVlcyhsbSkuY29uY2F0KE9iamVjdC52YWx1ZXMoY20pKTtyZXR1cm4gdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpFbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksdXNlcklETGlzdDpzLHRhZ0xpc3Q6dX19KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gaS5zZXROZXR3b3JrVHlwZSh0Ll9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSxlLmRhdGEucmVzdWx0TGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbixvPWUudG8scz1lLnJlc3VsdENvZGUsaT1lLnJlc3VsdEluZm8sdT1lLnRhZ1ZhbHVlTGlzdDtKaShzKXx8MD09PXM/KHQuX2ZyaWVuZE1hcC5oYXMobyk/KG49dC5fZnJpZW5kTWFwLmdldChvKSkudXBkYXRlKHUpOihuPW5ldyBYTShvLHUpLHQuX2ZyaWVuZE1hcC5zZXQobyxuKSksYS5wdXNoKG4pKTpyLnB1c2goe3VzZXJJRDpvLGNvZGU6cyxtZXNzYWdlOml9KX0pKSxQbSh7ZnJpZW5kTGlzdDphLGZhaWx1cmVVc2VySURMaXN0OnJ9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtpLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwiaXNNeUZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRNYXAuaGFzKGUpfX0se2tleTpcInBhZ2luZ0dldEZyaWVuZExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgbGcoUmgpLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEZyaWVuZExpc3RcIik7dGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpTbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksc3RhcnRJbmRleDp0aGlzLl9zdGFydEluZGV4LHN0YW5kYXJkU2VxdWVuY2U6dGhpcy5fc3RhbmRhcmRTZXF1ZW5jZSxjdXN0b21TZXF1ZW5jZTp0aGlzLl9jdXN0b21TZXF1ZW5jZX19KS50aGVuKChmdW5jdGlvbihvKXt2YXIgcj1vLmRhdGEsYT1yLmZyaWVuZENvdW50LHM9ci5yZXN1bHRMaXN0LGk9ci5uZXh0U3RhcnRJbmRleCx1PXIuc3RhbmRhcmRTZXF1ZW5jZSxjPXIuY3VzdG9tU2VxdWVuY2UsbD1yLmNvbXBsZXRlRmxhZztlLl9zdGFydEluZGV4PWksZS5fc3RhbmRhcmRTZXF1ZW5jZT11LGUuX2N1c3RvbVNlcXVlbmNlPWM7dmFyIGQ9XCJmcmllbmRDb3VudDpcIi5jb25jYXQoYSxcIiBuZXh0U3RhcnRJbmRleDpcIikuY29uY2F0KGksXCIgc3RhbmRhcmRTZXF1ZW5jZTpcIikuY29uY2F0KHUsXCIgXCIpK1wiY3VzdG9tU2VxdWVuY2U6XCIuY29uY2F0KGMsXCIgY29tcGxldGVGbGFnOlwiKS5jb25jYXQobCk7dC5zZXROZXR3b3JrVHlwZShlLl9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShkKS5lbmQoKSxLaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2suXCIpLGQpLE91KHMpfHxzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBuPXQudG8sbz10LnRhZ1ZhbHVlTGlzdDtlLl9mcmllbmRNYXAuc2V0KG4sbmV3IFhNKG4sbykpfSkpLDA9PT1sP2UucGFnaW5nR2V0RnJpZW5kTGlzdCgpOmUuX3BhZ2luZ0dldEZyaWVuZFByb2ZpbGUoKX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuIGUuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1tKGUsMikscj1uWzBdLGE9blsxXTt0LnNldEVycm9yKG8scixhKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksbyksWW0obyl9KSl9fSx7a2V5OlwiX3BhZ2luZ0dldEZyaWVuZFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD12KHRoaXMuX2ZyaWVuZE1hcC5rZXlzKCkpLG49dGhpcy5fc25zTW9kdWxlLmdldE1vZHVsZShqYyksbz10Lmxlbmd0aCxyPW88PTEwMD8xOm8lMTAwO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX3BhZ2luZ0dldEZyaWVuZFByb2ZpbGUgZnJpZW5kQ291bnQ6XCIpLmNvbmNhdChvLFwiIHBhZ2VDb3VudDpcIikuY29uY2F0KHIpKTtmb3IodmFyIGE9MDthPHI7YSsrKW4uZ2V0VXNlclByb2ZpbGUoe3VzZXJJRExpc3Q6dC5zbGljZSgxMDAqYSwxMDApfSkudGhlbigoZnVuY3Rpb24odCl7dC5kYXRhLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBuPWUuX2ZyaWVuZE1hcC5nZXQodC51c2VySUQpO24mJm4udXBkYXRlUHJvZmlsZSh0KX0pKSxlLl9vbkZyaWVuZExpc3RVcGRhdGVkKCl9KSl9fSx7a2V5OlwiYWRkRnJpZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRGcmllbmRcIiksbz1lLnRvLHI9ZS5zb3VyY2UsYT1lLnR5cGUscz1lLndvcmRpbmcsaT1lLnJlbWFyayx1PWUuZ3JvdXBOYW1lO2lmKHRoaXMuX2ZyaWVuZE1hcC5oYXMobykpcmV0dXJuIFltKHtjb2RlOlBkLkFMUkVBRFlfTVlfRlJJRU5ELG1lc3NhZ2U6d3B9KTt2YXIgYz1hOyghY3x8YyE9PXJvLlNOU19BRERfVFlQRV9TSU5HTEUmJmMhPT1yby5TTlNfQUREX1RZUEVfQk9USCkmJihjPXJvLlNOU19BRERfVFlQRV9CT1RIKTt2YXIgbD1uZXcgbGcoTmgpO3JldHVybiBsLnNldE1lc3NhZ2UoXCJ0bzpcIi5jb25jYXQobyxcIiBzb3VyY2U6XCIpLmNvbmNhdChyLFwiIHR5cGU6XCIpLmNvbmNhdChjKSksdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpObCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksYWRkRnJpZW5kSXRlbTpbe3RvOm8sc291cmNlOnIsd29yZGluZzpzLHJlbWFyazppLGdyb3VwTmFtZTp1fV0sdHlwZTpjfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZGF0YS5yZXN1bHRMaXN0O2wuc2V0TmV0d29ya1R5cGUodC5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1vcmVNZXNzYWdlKFwicmVzdWx0TGlzdDpcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkobykpKS5lbmQoKTt2YXIgcj1vWzBdLGE9ci50byxzPXIucmVzdWx0Q29kZSxpPXIucmVzdWx0SW5mbztyZXR1cm4gS2kuaW5mbyhcIlwiLmNvbmNhdChuLFwiIG9rLiB0bzpcIikuY29uY2F0KGEsXCIgdHlwZTpcIikuY29uY2F0KGMsXCIgY29kZTpcIikuY29uY2F0KHMpKSxKaShzKXx8MD09PXM/UG0oe3VzZXJJRDphLGNvZGU6MH0pOjMwNTM5PT09cz9QbSh7dXNlcklEOmEsY29kZTpzLG1lc3NhZ2U6Vm1bc119KTpZbSh7dXNlcklEOmEsY29kZTpzLG1lc3NhZ2U6Vm1bc118fGl9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtsLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwiZGVsZXRlRnJpZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVGcmllbmRcIiksbz1lLnVzZXJJRExpc3Qscj1lLnR5cGU7by5sZW5ndGg+MWUzJiYoS2kud2FybihcIlwiLmNvbmNhdChuLFwiIOWIoOmZpOWlveWPi+S6uuaVsOS4jeiDvei2hei/hzEwMDDkurpcIikpLG8ubGVuZ3RoPTFlMyk7dmFyIGE9W10scz1bXSxpPVtdO2lmKG8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fZnJpZW5kTWFwLmhhcyhlKT9pLnB1c2goZSk6YS5wdXNoKHt1c2VySUQ6ZSxjb2RlOlBkLk5PVF9NWV9GUklFTkQsbWVzc2FnZTpicH0pfSkpLDA9PT1pLmxlbmd0aClyZXR1cm4gam0oe3N1Y2Nlc3NVc2VySURMaXN0OnMsZmFpbHVyZVVzZXJJRExpc3Q6YX0pO3ZhciB1PXI7KCF1fHx1IT09cm8uU05TX0RFTEVURV9UWVBFX1NJTkdMRSYmdSE9PXJvLlNOU19ERUxFVEVfVFlQRV9CT1RIKSYmKHU9cm8uU05TX0RFTEVURV9UWVBFX0JPVEgpO3ZhciBjPW5ldyBsZyhMaCk7cmV0dXJuIGMuc2V0TWVzc2FnZShcInVzZXJJRExpc3Q6XCIuY29uY2F0KGksXCIgdHlwZTpcIikuY29uY2F0KHUpKSx0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmtsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSx1c2VySURMaXN0OmksdHlwZTp1fX0pLnRoZW4oKGZ1bmN0aW9uKGUpe2Muc2V0TmV0d29ya1R5cGUodC5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmluZm8oXCJcIi5jb25jYXQobixcIiBva1wiKSk7dmFyIG89ZS5kYXRhLnJlc3VsdExpc3Q7cmV0dXJuIE91KG8pfHxvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudG8sbj1lLnJlc3VsdENvZGUsbz1lLnJlc3VsdEluZm87Smkobil8fDA9PT1uP3MucHVzaCh7dXNlcklEOnR9KTphLnB1c2goe3VzZXJJRDp0LGNvZGU6bixtZXNzYWdlOm99KX0pKSxQbSh7c3VjY2Vzc1VzZXJJRExpc3Q6cyxmYWlsdXJlVXNlcklETGlzdDphfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07Yy5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kud2FybihcIlwiLmNvbmNhdChuLFwiIGVycm9yOlwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJ1cGRhdGVGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS51c2VySUQsbz1lLnJlbWFyayxyPWUuZnJpZW5kQ3VzdG9tRmllbGQ7aWYoIXRoaXMuX2ZyaWVuZE1hcC5oYXMobikpcmV0dXJuIFltKHtjb2RlOlBkLk5PVF9NWV9GUklFTkQsbWVzc2FnZTpicH0pO3ZhciBhPW5ldyBsZyhiaCk7YS5zZXRNZXNzYWdlKFwidXNlcklEOlwiLmNvbmNhdChuLFwiIHJlbWFyazpcIikuY29uY2F0KG8sXCIgZnJpZW5kQ3VzdG9tRmllbGQ6XCIpLmNvbmNhdChyKSk7dmFyIHM9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZUZyaWVuZFwiKSxpPVtdO3JldHVybiBKaShvKXx8aS5wdXNoKHt0YWc6bG0uUkVNQVJLLHZhbHVlOm99KSx6aShyKSYmci5sZW5ndGg+MCYmci5mb3JFYWNoKChmdW5jdGlvbihlKXtpLnB1c2goe3RhZzplLmtleSx2YWx1ZTplLnZhbHVlfSl9KSksdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpDbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksdXBkYXRlSXRlbTpbe3RvOm4sc25zSXRlbTppfV19fSkudGhlbigoZnVuY3Rpb24oZSl7YS5zZXROZXR3b3JrVHlwZSh0Ll9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kuaW5mbyhcIlwiLmNvbmNhdChzLFwiIG9rXCIpKTt2YXIgbj1lLmRhdGEucmVzdWx0TGlzdFswXSxpPW4udG8sdT1uLnJlc3VsdENvZGUsYz1uLnJlc3VsdEluZm87aWYoSmkodSl8fDA9PT11KXt2YXIgbD10Ll9mcmllbmRNYXAuZ2V0KGkpO3JldHVybiBsJiYoSmkobyl8fChsLnJlbWFyaz1vKSx6aShyKSYmci5sZW5ndGg+MCYmZnUobC5mcmllbmRDdXN0b21GaWVsZCxyKSx0Ll9vbkZyaWVuZExpc3RVcGRhdGVkKCkpLFBtKGwpfXJldHVybiBZbSh7Y29kZTp1LG1lc3NhZ2U6Y30pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLndhcm4oXCJcIi5jb25jYXQocyxcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJjaGVja0ZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY2hlY2tGcmllbmRcIiksbz1lLnVzZXJJRExpc3Qscj1lLnR5cGU7KCFyfHxyIT09cm8uU05TX0NIRUNLX1RZUEVfU0lOR0xFJiZyIT09cm8uU05TX0NIRUNLX1RZUEVfQk9USCkmJihyPXJvLlNOU19DSEVDS19UWVBFX0JPVEgpO3ZhciBhPW5ldyBsZyhDaCk7cmV0dXJuIGEuc2V0TWVzc2FnZShcInVzZXJJRExpc3Q6XCIuY29uY2F0KG8sXCIgdHlwZTpcIikuY29uY2F0KHIpKSx0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkFsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSx1c2VySURMaXN0Om8sdHlwZTpyfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe2Euc2V0TmV0d29ya1R5cGUodC5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmluZm8oXCJcIi5jb25jYXQobixcIiBvay4gdXNlcklETGlzdDpcIikuY29uY2F0KG8sXCIgdHlwZTpcIikuY29uY2F0KHIpKTt2YXIgcz1bXSxpPVtdLHU9ZS5kYXRhLnJlc3VsdExpc3Q7cmV0dXJuIHppKHUpJiZ1LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudG8sbj1lLnJlbGF0aW9uLG89ZS5yZXN1bHRDb2RlLHI9ZS5yZXN1bHRJbmZvO0ppKG8pfHwwPT09bz9zLnB1c2goe3VzZXJJRDp0LGNvZGU6MCxyZWxhdGlvbjpufSk6aS5wdXNoKHt1c2VySUQ6dCxjb2RlOm8sbWVzc2FnZTpyfSl9KSksUG0oe3N1Y2Nlc3NVc2VySURMaXN0OnMsZmFpbHVyZVVzZXJJRExpc3Q6aX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJ1cGRhdGVXaGVuQWRkZWRUb0ZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUubmFtZSxvPWUudXNlcklETGlzdDtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZVdoZW5BZGRlZFRvRnJpZW5kR3JvdXAgZ3JvdXBOYW1lOlwiKS5jb25jYXQobixcIiB1c2VySURMaXN0OlwiKS5jb25jYXQobykpLG4mJiFPdShvKSYmby5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9mcmllbmRNYXAuaGFzKGUpJiZ0Ll9mcmllbmRNYXAuZ2V0KGUpLmFkZFRvR3JvdXBMaXN0KG4pfSkpfX0se2tleTpcInVwZGF0ZVdoZW5SZW1vdmVkRnJvbUZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUubmFtZSxvPWUudXNlcklETGlzdDtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZVdoZW5SZW1vdmVkRnJvbUZyaWVuZEdyb3VwIGdyb3VwTmFtZTpcIikuY29uY2F0KG4sXCIgdXNlcklETGlzdDpcIikuY29uY2F0KG8pKSxuJiYhT3UobykmJm8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fZnJpZW5kTWFwLmhhcyhlKSYmdC5fZnJpZW5kTWFwLmdldChlKS5yZW1vdmVGcm9tR3JvdXBMaXN0KG4pfSkpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9mcmllbmRNYXAuY2xlYXIoKSx0aGlzLl9zdGFydEluZGV4PTAsdGhpcy5fc3RhbmRhcmRTZXF1ZW5jZT0wLHRoaXMuX2N1c3RvbVNlcXVlbmNlPTB9fV0pLGV9KCksWk09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSxPdSh0KXx8KHRoaXMubmFtZT10Lm5hbWV8fFwiXCIsdGhpcy51c2VySURMaXN0PXQudXNlcklETGlzdHx8W10sdGhpcy5jb3VudD10aGlzLnVzZXJJRExpc3QubGVuZ3RofHwwKX1yZXR1cm4gYShlLFt7a2V5OlwiYWRkVG9Vc2VySURMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7LTE9PT10aGlzLnVzZXJJRExpc3QuaW5kZXhPZihlKSYmKHRoaXMudXNlcklETGlzdC5wdXNoKGUpLHRoaXMuY291bnQ9dGhpcy51c2VySURMaXN0Lmxlbmd0aCl9fSx7a2V5OlwicmVtb3ZlRnJvbVVzZXJJRExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnVzZXJJRExpc3QuaW5kZXhPZihlKTt0Pi0xJiYodGhpcy51c2VySURMaXN0LnNwbGljZSh0LDEpLHRoaXMuY291bnQ9dGhpcy51c2VySURMaXN0Lmxlbmd0aCl9fV0pLGV9KCksZXk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl9zbnNNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJGcmllbmRHcm91cEhhbmRsZXJcIix0aGlzLl9mcmllbmRHcm91cE1hcD1uZXcgTWFwfXJldHVybiBhKGUsW3trZXk6XCJnZXRMb2NhbEZyaWVuZEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHYodGhpcy5fZnJpZW5kR3JvdXBNYXAudmFsdWVzKCkpfX0se2tleTpcIl9lbWl0RnJpZW5kR3JvdXBMaXN0VXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dih0aGlzLl9mcmllbmRHcm91cE1hcC52YWx1ZXMoKSk7dGhpcy5fc25zTW9kdWxlLmVtaXRPdXRlckV2ZW50KG9vLkZSSUVORF9HUk9VUF9MSVNUX1VQREFURUQsZSl9fSx7a2V5OlwiZ2V0RnJpZW5kR3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IGxnKEhoKSxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRGcmllbmRHcm91cExpc3RcIik7cmV0dXJuIHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6d2wscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpfX0pLnRoZW4oKGZ1bmN0aW9uKG8pe3Quc2V0TmV0d29ya1R5cGUoZS5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpO3ZhciByPW8uZGF0YS5yZXN1bHRMaXN0O091KHIpP0tpLmluZm8oXCJcIi5jb25jYXQobixcIiBvay4gZnJpZW5kIGdyb3VwIGNvdW50OjBcIikpOihLaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2suIGZyaWVuZCBncm91cCBjb3VudDpcIikuY29uY2F0KHIubGVuZ3RoKSksZS5fZnJpZW5kR3JvdXBNYXAuY2xlYXIoKSxyLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBuPW5ldyBaTSh0KTtlLl9mcmllbmRHcm91cE1hcC5zZXQodC5uYW1lLG4pfSkpLGUuX2VtaXRGcmllbmRHcm91cExpc3RVcGRhdGVkKCkpfSkpLmNhdGNoKChmdW5jdGlvbihvKXtyZXR1cm4gZS5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPW0oZSwyKSxyPW5bMF0sYT1uWzFdO3Quc2V0RXJyb3IobyxyLGEpLmVuZCgpfSkpLEtpLndhcm4oXCJcIi5jb25jYXQobixcIiBlcnJvcjpcIiksbyksWW0obyl9KSl9fSx7a2V5OlwiY3JlYXRlRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmNyZWF0ZUZyaWVuZEdyb3VwXCIpLG89ZS5uYW1lLHI9ZS51c2VySURMaXN0O2lmKHRoaXMuX2ZyaWVuZEdyb3VwTWFwLmhhcyhvKSlyZXR1cm4gS2kud2FybihcIlwiLmNvbmNhdChuLFwiIOWlveWPi+WIhue7hCBcIikuY29uY2F0KG8sXCIg5bey57uP5a2Y5Zyo77yBXCIpKSxZbSh7Y29kZTpQZC5GUklFTkRfR1JPVVBfRVhJU1RFRCxtZXNzYWdlOkdwfSk7dmFyIGE9bmV3IGxnKHFoKTtyZXR1cm4gYS5zZXRNZXNzYWdlKFwibmFtZTpcIi5jb25jYXQobyxcIiB1c2VySURMaXN0OlwiKS5jb25jYXQocikpLHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6R2wscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLGdyb3VwTmFtZTpbb10sdXNlcklETGlzdDp6aShyKT9yOnZvaWQgMH19KS50aGVuKChmdW5jdGlvbihlKXthLnNldE5ldHdvcmtUeXBlKHQuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gbmFtZTpcIikuY29uY2F0KG8sXCIgdXNlcklETGlzdDpcIikuY29uY2F0KHIpKTt2YXIgcz1lLmRhdGEucmVzdWx0TGlzdCxpPVtdLHU9W107cyYmcy5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLnRvLG49ZS5yZXN1bHRDb2RlLG89ZS5yZXN1bHRJbmZvO2lmKEppKG4pfHwwPT09bilpLnB1c2godCk7ZWxzZXt2YXIgcj17dXNlcklEOmUudG8sY29kZTpuLG1lc3NhZ2U6b307dS5wdXNoKHIpfX0pKTt2YXIgYz1uZXcgWk0oe25hbWU6byx1c2VySURMaXN0Oml9KTtyZXR1cm4gdC5fZnJpZW5kR3JvdXBNYXAuc2V0KG8sYyksdC5fc25zTW9kdWxlLnVwZGF0ZVdoZW5BZGRlZFRvRnJpZW5kR3JvdXAoe25hbWU6byx1c2VySURMaXN0Oml9KSx0Ll9lbWl0RnJpZW5kR3JvdXBMaXN0VXBkYXRlZCgpLFBtKHtmcmllbmRHcm91cDpjLGZhaWx1cmVVc2VySURMaXN0OnV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwiZGVsZXRlRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUZyaWVuZEdyb3VwXCIpLG89ZS5uYW1lO2lmKCF0aGlzLl9mcmllbmRHcm91cE1hcC5oYXMobykpcmV0dXJuIHRoaXMuX29uRnJpZW5kR3JvdXBOb3RFeGlzdChvKTt2YXIgcj1uZXcgbGcoeGgpO3JldHVybiByLnNldE1lc3NhZ2UoXCJuYW1lOlwiLmNvbmNhdChvKSksdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpQbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksbmFtZUxpc3Q6W29dfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3Iuc2V0TmV0d29ya1R5cGUodC5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBuYW1lOlwiKS5jb25jYXQobykpO3ZhciBhPXQuX2ZyaWVuZEdyb3VwTWFwLmdldChvKTtyZXR1cm4gYSYmKHQuX3Nuc01vZHVsZS51cGRhdGVXaGVuUmVtb3ZlZEZyb21GcmllbmRHcm91cCh7bmFtZTpvLHVzZXJJRExpc3Q6YS51c2VySURMaXN0fSksdC5fZnJpZW5kR3JvdXBNYXAuZGVsZXRlKG8pLGEudXNlcklETGlzdC5sZW5ndGg9MCksdC5fZW1pdEZyaWVuZEdyb3VwTGlzdFVwZGF0ZWQoKSxQbShhKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLGE9blsxXTtyLnNldEVycm9yKGUsbyxhKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwiX29uRnJpZW5kR3JvdXBOb3RFeGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25GcmllbmRHcm91cE5vdEV4aXN0IOWlveWPi+WIhue7hCBcIikuY29uY2F0KGUsXCIg5LiN5a2Y5Zyo77yBXCIpKSxZbSh7Y29kZTpQZC5GUklFTkRfR1JPVVBfTk9UX0VYSVNULG1lc3NhZ2U6UHB9KX19LHtrZXk6XCJyZW5hbWVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVuYW1lRnJpZW5kR3JvdXBcIiksbz1lLm9sZE5hbWUscj1lLm5ld05hbWU7aWYoIXRoaXMuX2ZyaWVuZEdyb3VwTWFwLmhhcyhvKSlyZXR1cm4gdGhpcy5fb25GcmllbmRHcm91cE5vdEV4aXN0KCk7dmFyIGE9bmV3IGxnKFZoKS5zZXRNZXNzYWdlKFwib2xkTmFtZTpcIi5jb25jYXQobyxcIiBuZXdOYW1lOlwiKS5jb25jYXQocikpO3JldHVybiB0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlVsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSxvbGROYW1lOm8sbmV3TmFtZTpyfX0pLnRoZW4oKGZ1bmN0aW9uKCl7aWYoYS5zZXROZXR3b3JrVHlwZSh0Ll9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIG9sZE5hbWU6XCIpLmNvbmNhdChvLFwiIG5ld05hbWU6XCIpLmNvbmNhdChyKSksdC5fZnJpZW5kR3JvdXBNYXAuaGFzKG8pKXt2YXIgZT10Ll9mcmllbmRHcm91cE1hcC5nZXQobyk7cmV0dXJuIGUubmFtZT1yLHQuX2ZyaWVuZEdyb3VwTWFwLmRlbGV0ZShvKSx0Ll9mcmllbmRHcm91cE1hcC5zZXQocixlKSx0Ll9zbnNNb2R1bGUudXBkYXRlV2hlblJlbW92ZWRGcm9tRnJpZW5kR3JvdXAoe25hbWU6byx1c2VySURMaXN0OmUudXNlcklETGlzdH0pLHQuX3Nuc01vZHVsZS51cGRhdGVXaGVuQWRkZWRUb0ZyaWVuZEdyb3VwKHtuYW1lOnIsdXNlcklETGlzdDplLnVzZXJJRExpc3R9KSx0Ll9lbWl0RnJpZW5kR3JvdXBMaXN0VXBkYXRlZCgpLFBtKGUpfXJldHVybiBQbSgpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxZbShlKX0pKX19LHtrZXk6XCJhZGRUb0ZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRUb0ZyaWVuZEdyb3VwXCIpLG89ZS5uYW1lLHI9ZS51c2VySURMaXN0O2lmKCF0aGlzLl9mcmllbmRHcm91cE1hcC5oYXMobykpcmV0dXJuIHRoaXMuX29uRnJpZW5kR3JvdXBOb3RFeGlzdChvKTt2YXIgYT1uZXcgbGcoS2gpO3JldHVybiBhLnNldE1lc3NhZ2UoXCJuYW1lOlwiLmNvbmNhdChvLFwiIHVzZXJJRExpc3Q6XCIpLmNvbmNhdChyKSksS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRUb0ZyaWVuZEdyb3VwIG5hbWU6XCIpLmNvbmNhdChvLFwiIHVzZXJJRExpc3Q6XCIpLmNvbmNhdChyKSksdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpVbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksb2xkTmFtZTpvLHVwZGF0ZUdyb3VwSXRlbTpyLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5pc015RnJpZW5kKGUpfSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue3RvOmUsdXBkYXRlVHlwZTpcIlVwZGF0ZV9UeXBlX0FkZFwifX0pKX19KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZSh0Ll9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksdC5fb25GcmllbmRHcm91cFVwZGF0ZWQobyxlKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksWW0oZSl9KSl9fSx7a2V5OlwicmVtb3ZlRnJvbUZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZW1vdmVGcm9tRnJpZW5kR3JvdXBcIiksbz1lLm5hbWUscj1lLnVzZXJJRExpc3Q7aWYoIXRoaXMuX2ZyaWVuZEdyb3VwTWFwLmhhcyhvKSlyZXR1cm4gdGhpcy5fb25GcmllbmRHcm91cE5vdEV4aXN0KG8pO3ZhciBhPW5ldyBsZyhCaCk7cmV0dXJuIGEuc2V0TWVzc2FnZShcIm5hbWU6XCIuY29uY2F0KG8sXCIgdXNlcklETGlzdDpcIikuY29uY2F0KHIpKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBuYW1lOlwiKS5jb25jYXQobyxcIiB1c2VySURMaXN0OlwiKS5jb25jYXQocikpLHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6VWwscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLG9sZE5hbWU6byx1cGRhdGVHcm91cEl0ZW06ci5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zbnNNb2R1bGUuaXNNeUZyaWVuZChlKX0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt0bzplLHVwZGF0ZVR5cGU6XCJVcGRhdGVfVHlwZV9EZWxldGVcIn19KSl9fSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUodC5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLHQuX29uRnJpZW5kR3JvdXBVcGRhdGVkKG8sZSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLFltKGUpfSkpfX0se2tleTpcIl9vbkZyaWVuZEdyb3VwVXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dC5kYXRhLnJlc3VsdExpc3Qsbz10aGlzLl9mcmllbmRHcm91cE1hcC5nZXQoZSkscj1bXSxhPVtdLHM9W107cmV0dXJuIHppKG4pJiZuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudG8sbj1lLnJlc3VsdENvZGUsaT1lLnJlc3VsdEluZm8sdT1lLnR5cGU7MD09PW4/XCJVcGRhdGVfVHlwZV9BZGRcIj09PXU/byYmKG8uYWRkVG9Vc2VySURMaXN0KHQpLGEucHVzaCh0KSk6XCJVcGRhdGVfVHlwZV9EZWxldGVcIj09PXUmJm8mJihvLnJlbW92ZUZyb21Vc2VySURMaXN0KHQpLHMucHVzaCh0KSk6ci5wdXNoKHt0bzplLnRvLGNvZGU6bixtZXNzYWdlOml9KX0pKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbkZyaWVuZEdyb3VwVXBkYXRlZCBuYW1lOlwiKS5jb25jYXQoZSxcIiB1c2VySURMaXN0OlwiKS5jb25jYXQoby51c2VySURMaXN0KSksYS5sZW5ndGg+MCYmdGhpcy5fc25zTW9kdWxlLnVwZGF0ZVdoZW5BZGRlZFRvRnJpZW5kR3JvdXAoe25hbWU6ZSx1c2VySURMaXN0OmF9KSxzLmxlbmd0aD4wJiZ0aGlzLl9zbnNNb2R1bGUudXBkYXRlV2hlblJlbW92ZWRGcm9tRnJpZW5kR3JvdXAoe25hbWU6ZSx1c2VySURMaXN0OnN9KSxQbSh7ZnJpZW5kR3JvdXA6byxmYWlsdXJlVXNlcklETGlzdDpyfSl9fSx7a2V5OlwidXBkYXRlV2hlbkZyaWVuZEFkZGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUubmFtZUxpc3Qsbz1lLnVzZXJJRDtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZVdoZW5GcmllbmRBZGRlZCB1c2VySUQ6XCIpLmNvbmNhdChvLFwiIG5hbWVMaXN0OlwiKS5jb25jYXQobikpLE91KG4pfHxuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX2ZyaWVuZEdyb3VwTWFwLmhhcyhlKSYmdC5fZnJpZW5kR3JvdXBNYXAuZ2V0KGUpLmFkZFRvVXNlcklETGlzdChvKX0pKX19LHtrZXk6XCJ1cGRhdGVXaGVuRnJpZW5kRGVsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLm5hbWVMaXN0LG89ZS51c2VySUQ7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGRhdGVXaGVuRnJpZW5kRGVsZXRlZCB1c2VySUQ6XCIpLmNvbmNhdChvLFwiIG5hbWVMaXN0OlwiKS5jb25jYXQobikpLE91KG4pfHxuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX2ZyaWVuZEdyb3VwTWFwLmhhcyhlKSYmdC5fZnJpZW5kR3JvdXBNYXAuZ2V0KGUpLnJlbW92ZUZyb21Vc2VySURMaXN0KG8pfSkpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9mcmllbmRHcm91cE1hcC5jbGVhcigpfX1dKSxlfSgpLHR5PWZ1bmN0aW9uKGUpe2kobixlKTt2YXIgdD1fKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHI7cmV0dXJuIG8odGhpcyxuKSwocj10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlNuc01vZHVsZVwiLHIuX2ZyaWVuZEhhbmRsZXI9bmV3IFFNKGgocikpLHIuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlcj1uZXcgJE0oaChyKSksci5fZnJpZW5kR3JvdXBIYW5kbGVyPW5ldyBleShoKHIpKSxyLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oZ3YuQ09OVEVYVF9BMktFWV9BTkRfVElOWUlEX1VQREFURUQsci5vbkNvbnRleHRVcGRhdGVkLGgocikpLHJ9cmV0dXJuIGEobixbe2tleTpcIm9uQ29udGV4dFVwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9mcmllbmRIYW5kbGVyLnBhZ2luZ0dldEZyaWVuZExpc3QoKSx0aGlzLl9mcmllbmRHcm91cEhhbmRsZXIuZ2V0RnJpZW5kR3JvdXBMaXN0KCksdGhpcy5fZnJpZW5kQXBwbGljYXRpb25IYW5kbGVyLmdldEZyaWVuZEFwcGxpY2F0aW9uTGlzdCgpfX0se2tleTpcIm9uUmVsYXRpb25DaGFpbk1vZGlmaWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdDtpZighT3UodCkpe3ZhciBuPVtdLG89W10scj1bXSxhPVtdLHM9ITEsaT1cIlwiO3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7MyE9PWUucHVzaFR5cGUmJjQhPT1lLnB1c2hUeXBlfHwhZS5mcm9tfHwoaT1lLmZyb20pLGUuZnJpZW5kQWRkQWNjb3VudCYmKG4ucHVzaC5hcHBseShuLHYoZS5mcmllbmRBZGRBY2NvdW50KSksYS5wdXNoLmFwcGx5KGEsdihlLmZyaWVuZEFkZEFjY291bnQpKSksZS5mcmllbmREZWxBY2NvdW50JiZvLnB1c2guYXBwbHkobyx2KGUuZnJpZW5kRGVsQWNjb3VudCkpLGUuZnJpZW5kQXBwbGljYXRpb25BZGRlZCYmci5wdXNoLmFwcGx5KHIsdihlLmZyaWVuZEFwcGxpY2F0aW9uQWRkZWQpKSxlLmZyaWVuZEFwcGxpY2F0aW9uRGVsZXRlZFVzZXJJRExpc3QmJmEucHVzaC5hcHBseShhLHYoZS5mcmllbmRBcHBsaWNhdGlvbkRlbGV0ZWRVc2VySURMaXN0KSksZS5yZXBvcnRUaW1lJiY3PT09ZS5wdXNoVHlwZSYmKHM9ITApfSkpLHMmJnRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlci5vbkZyaWVuZEFwcGxpY2F0aW9uUmVhZCgpLHRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlci5vbkZyaWVuZEFwcGxpY2F0aW9uQWRkZWQocixpKSx0aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIub25GcmllbmRBcHBsaWNhdGlvbkRlbGV0ZWQoYSksdGhpcy5fZnJpZW5kSGFuZGxlci5vbkZyaWVuZEFkZGVkKG4pLHRoaXMuX2ZyaWVuZEhhbmRsZXIub25GcmllbmREZWxldGVkKG8pfX19LHtrZXk6XCJpc015RnJpZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEhhbmRsZXIuaXNNeUZyaWVuZChlKX19LHtrZXk6XCJvbkZyaWVuZFByb2ZpbGVNb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2ZyaWVuZEhhbmRsZXIub25GcmllbmRQcm9maWxlTW9kaWZpZWQoZSl9fSx7a2V5OlwiZ2V0TG9jYWxGcmllbmRMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9mcmllbmRIYW5kbGVyLmdldExvY2FsRnJpZW5kTGlzdCgpO3JldHVybiBqbShlKX19LHtrZXk6XCJnZXRGcmllbmRSZW1hcmtcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kSGFuZGxlci5nZXRGcmllbmRSZW1hcmsoZSl9fSx7a2V5OlwiZ2V0RnJpZW5kTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZyaWVuZEhhbmRsZXIucGFnaW5nR2V0RnJpZW5kTGlzdCgpfX0se2tleTpcImFkZEZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRIYW5kbGVyLmFkZEZyaWVuZChlKX19LHtrZXk6XCJkZWxldGVGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kSGFuZGxlci5kZWxldGVGcmllbmQoZSl9fSx7a2V5OlwiY2hlY2tGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kSGFuZGxlci5jaGVja0ZyaWVuZChlKX19LHtrZXk6XCJnZXRGcmllbmRQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEhhbmRsZXIuZ2V0RnJpZW5kUHJvZmlsZShlKX19LHtrZXk6XCJ1cGRhdGVGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kSGFuZGxlci51cGRhdGVGcmllbmQoZSl9fSx7a2V5OlwidXBkYXRlV2hlbkFkZGVkVG9GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2ZyaWVuZEhhbmRsZXIudXBkYXRlV2hlbkFkZGVkVG9GcmllbmRHcm91cChlKX19LHtrZXk6XCJ1cGRhdGVXaGVuUmVtb3ZlZEZyb21GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2ZyaWVuZEhhbmRsZXIudXBkYXRlV2hlblJlbW92ZWRGcm9tRnJpZW5kR3JvdXAoZSl9fSx7a2V5OlwiZ2V0TG9jYWxGcmllbmRBcHBsaWNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlci5nZXRMb2NhbEZyaWVuZEFwcGxpY2F0aW9uTGlzdCgpO3JldHVybiBqbShlKX19LHtrZXk6XCJkZWxldGVGcmllbmRBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIuZGVsZXRlRnJpZW5kQXBwbGljYXRpb24oZSl9fSx7a2V5OlwicmVmdXNlRnJpZW5kQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kQXBwbGljYXRpb25IYW5kbGVyLnJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uKGUpfX0se2tleTpcImFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlci5hY2NlcHRGcmllbmRBcHBsaWNhdGlvbihlKX19LHtrZXk6XCJzZXRGcmllbmRBcHBsaWNhdGlvblJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kQXBwbGljYXRpb25IYW5kbGVyLnNldEZyaWVuZEFwcGxpY2F0aW9uUmVhZChlKX19LHtrZXk6XCJnZXRMb2NhbEZyaWVuZEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLmdldExvY2FsRnJpZW5kR3JvdXBMaXN0KCk7cmV0dXJuIGptKGUpfX0se2tleTpcImNyZWF0ZUZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci5jcmVhdGVGcmllbmRHcm91cChlKX19LHtrZXk6XCJkZWxldGVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRHcm91cEhhbmRsZXIuZGVsZXRlRnJpZW5kR3JvdXAoZSl9fSx7a2V5OlwiYWRkVG9GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRHcm91cEhhbmRsZXIuYWRkVG9GcmllbmRHcm91cChlKX19LHtrZXk6XCJyZW1vdmVGcm9tRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLnJlbW92ZUZyb21GcmllbmRHcm91cChlKX19LHtrZXk6XCJyZW5hbWVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRHcm91cEhhbmRsZXIucmVuYW1lRnJpZW5kR3JvdXAoZSl9fSx7a2V5Olwib25BZGRUb0ZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci5vbkFkZFRvRnJpZW5kR3JvdXAoZSl9fSx7a2V5OlwidXBkYXRlV2hlbkZyaWVuZEFkZGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLnVwZGF0ZVdoZW5GcmllbmRBZGRlZChlKX19LHtrZXk6XCJ1cGRhdGVXaGVuRnJpZW5kRGVsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci51cGRhdGVXaGVuRnJpZW5kRGVsZXRlZChlKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fZnJpZW5kSGFuZGxlci5yZXNldCgpLHRoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci5yZXNldCgpLHRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlci5yZXNldCgpfX1dKSxufShkbCksbnk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKTt2YXIgbj1uZXcgbGcoZGcpO3RoaXMuX2NsYXNzTmFtZT1cIk1vZHVsZU1hbmFnZXJcIix0aGlzLl9pc1JlYWR5PSExLHRoaXMuX3N0YXJ0TG9naW5Ucz0wLHRoaXMuX21vZHVsZU1hcD1uZXcgTWFwLHRoaXMuX2lubmVyRW1pdHRlcj1udWxsLHRoaXMuX291dGVyRW1pdHRlcj1udWxsLHRoaXMuX2NoZWNrQ291bnQ9MCx0aGlzLl9jaGVja1RpbWVyPS0xLHRoaXMuX21vZHVsZU1hcC5zZXQoWGMsbmV3IEp2KHRoaXMsdCkpLHRoaXMuX21vZHVsZU1hcC5zZXQodWwsbmV3IHFNKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGxsLG5ldyBqTSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChzbCxuZXcgT00odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoYWwsbmV3IFVNKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KEJjLG5ldyBYdih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChIYyxuZXcgZ00odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoamMsbmV3IHp2KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KFljLG5ldyAkbSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChKYyxuZXcgQ3YodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoJGMsbmV3IEJ2KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KHpjLG5ldyBqdih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChRYyxuZXcgWnYodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoWmMsbmV3IG5NKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGVsLG5ldyBhTSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldCh0bCxuZXcgaU0odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQobmwsbmV3IHVNKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KG9sLG5ldyBoTSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChybCxuZXcgZk0odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoaWwsbmV3IEZNKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGNsLG5ldyB4TSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChXYyxuZXcgdHkodGhpcykpO3ZhciByPXQuaW5zdGFuY2VJRCxhPXQub3ZlcnNlYSxzPXQuU0RLQXBwSUQsaT1cImluc3RhbmNlSUQ6XCIuY29uY2F0KHIsXCIgb3ZlcnNlYTpcIikuY29uY2F0KGEsXCIgaG9zdDpcIikuY29uY2F0KER1KCksXCIgXCIpK1wiaW5Ccm93c2VyOlwiLmNvbmNhdChzaSxcIiBpbk1pbmlBcHA6XCIpLmNvbmNhdChhaSxcIiBTREtBcHBJRDpcIikuY29uY2F0KHMsXCIgVXNlckFnZW50OlwiKS5jb25jYXQoY2kpO2xnLmJpbmRFdmVudFN0YXRNb2R1bGUodGhpcy5fbW9kdWxlTWFwLmdldChaYykpLG4uc2V0TWVzc2FnZShcIlwiLmNvbmNhdChpKSkuZW5kKCksS2kuaW5mbyhcIlNESyBcIi5jb25jYXQoaSkpLHRoaXMuX3JlYWR5TGlzdD12b2lkIDAsdGhpcy5fc3NvTG9nRm9yUmVhZHk9bnVsbCx0aGlzLl9pbml0UmVhZHlMaXN0KCl9cmV0dXJuIGEoZSxbe2tleTpcIl9zdGFydFRpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jaGVja1RpbWVyPDAmJih0aGlzLl9jaGVja1RpbWVyPXNldEludGVydmFsKHRoaXMuX29uQ2hlY2tUaW1lci5iaW5kKHRoaXMpLDFlMykpfX0se2tleTpcInN0b3BUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY2hlY2tUaW1lcj4wJiYoY2xlYXJJbnRlcnZhbCh0aGlzLl9jaGVja1RpbWVyKSx0aGlzLl9jaGVja1RpbWVyPS0xLHRoaXMuX2NoZWNrQ291bnQ9MCl9fSx7a2V5OlwiX29uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY2hlY2tDb3VudCs9MTt2YXIgZSx0PVModGhpcy5fbW9kdWxlTWFwKTt0cnl7Zm9yKHQucygpOyEoZT10Lm4oKSkuZG9uZTspe3ZhciBuPW0oZS52YWx1ZSwyKVsxXTtuLm9uQ2hlY2tUaW1lciYmbi5vbkNoZWNrVGltZXIodGhpcy5fY2hlY2tDb3VudCl9fWNhdGNoKG8pe3QuZShvKX1maW5hbGx5e3QuZigpfX19LHtrZXk6XCJfaW5pdFJlYWR5TGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9yZWFkeUxpc3Q9W3RoaXMuX21vZHVsZU1hcC5nZXQoQmMpLHRoaXMuX21vZHVsZU1hcC5nZXQoSmMpXSx0aGlzLl9yZWFkeUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5yZWFkeSgoZnVuY3Rpb24oKXtyZXR1cm4gZS5fb25Nb2R1bGVSZWFkeSgpfSkpfSkpfX0se2tleTpcIl9vbk1vZHVsZVJlYWR5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0hMDtpZih0aGlzLl9yZWFkeUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5pc1JlYWR5KCl8fChlPSExKX0pKSxlJiYhdGhpcy5faXNSZWFkeSl7dGhpcy5faXNSZWFkeT0hMCx0aGlzLl9vdXRlckVtaXR0ZXIuZW1pdChvby5TREtfUkVBRFkpO3ZhciB0PURhdGUubm93KCktdGhpcy5fc3RhcnRMb2dpblRzO0tpLndhcm4oXCJTREsgaXMgcmVhZHkuIGNvc3QgXCIuY29uY2F0KHQsXCIgbXNcIikpLHRoaXMuX3N0YXJ0TG9naW5Ucz1EYXRlLm5vdygpO3ZhciBuPXRoaXMuX21vZHVsZU1hcC5nZXQoZWwpLmdldE5ldHdvcmtUeXBlKCksbz10aGlzLl9zc29Mb2dGb3JSZWFkeS5nZXRTdGFydFRzKCkrUGk7dGhpcy5fc3NvTG9nRm9yUmVhZHkuc2V0TmV0d29ya1R5cGUobikuc2V0TWVzc2FnZSh0KS5zdGFydChvKS5lbmQoKX19fSx7a2V5OlwibG9naW5cIix2YWx1ZTpmdW5jdGlvbigpezA9PT10aGlzLl9zdGFydExvZ2luVHMmJihGaSgpLHRoaXMuX3N0YXJ0TG9naW5Ucz1EYXRlLm5vdygpLHRoaXMuX3N0YXJ0VGltZXIoKSx0aGlzLl9tb2R1bGVNYXAuZ2V0KGVsKS5zdGFydCgpLHRoaXMuX3Nzb0xvZ0ZvclJlYWR5PW5ldyBsZyhwZykpfX0se2tleTpcIm9uTG9naW5GYWlsZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N0YXJ0TG9naW5Ucz0wfX0se2tleTpcImdldE91dGVyRW1pdHRlckluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX291dGVyRW1pdHRlciYmKHRoaXMuX291dGVyRW1pdHRlcj1uZXcgc00sSG0odGhpcy5fb3V0ZXJFbWl0dGVyKSx0aGlzLl9vdXRlckVtaXR0ZXIuX2VtaXQ9dGhpcy5fb3V0ZXJFbWl0dGVyLmVtaXQsdGhpcy5fb3V0ZXJFbWl0dGVyLmVtaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1hcmd1bWVudHNbMF0sbz1bbix7bmFtZTphcmd1bWVudHNbMF0sZGF0YTphcmd1bWVudHNbMV19XTt0aGlzLl9vdXRlckVtaXR0ZXIuX2VtaXQuYXBwbHkodGhpcy5fb3V0ZXJFbWl0dGVyLG8pfS5iaW5kKHRoaXMpKSx0aGlzLl9vdXRlckVtaXR0ZXJ9fSx7a2V5OlwiZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5faW5uZXJFbWl0dGVyJiYodGhpcy5faW5uZXJFbWl0dGVyPW5ldyBzTSx0aGlzLl9pbm5lckVtaXR0ZXIuX2VtaXQ9dGhpcy5faW5uZXJFbWl0dGVyLmVtaXQsdGhpcy5faW5uZXJFbWl0dGVyLmVtaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbjtXaShhcmd1bWVudHNbMV0pJiZhcmd1bWVudHNbMV0uZGF0YT8oS2kud2FybihcImlubmVyIGV2ZW50RGF0YSBoYXMgZGF0YSBwcm9wZXJ0eSwgcGxlYXNlIGNoZWNrIVwiKSxuPVtlLHtuYW1lOmFyZ3VtZW50c1swXSxkYXRhOmFyZ3VtZW50c1sxXS5kYXRhfV0pOm49W2Use25hbWU6YXJndW1lbnRzWzBdLGRhdGE6YXJndW1lbnRzWzFdfV0sdGhpcy5faW5uZXJFbWl0dGVyLl9lbWl0LmFwcGx5KHRoaXMuX2lubmVyRW1pdHRlcixuKX0uYmluZCh0aGlzKSksdGhpcy5faW5uZXJFbWl0dGVyfX0se2tleTpcImhhc01vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYXAuaGFzKGUpfX0se2tleTpcImdldE1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYXAuZ2V0KGUpfX0se2tleTpcImlzUmVhZHlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1JlYWR5fX0se2tleTpcIm9uRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXtLaS53YXJuKFwiT29wcyEgY29kZTpcIi5jb25jYXQoZS5jb2RlLFwiIG1lc3NhZ2U6XCIpLmNvbmNhdChlLm1lc3NhZ2UpKSxuZXcgbGcoV2gpLnNldE1lc3NhZ2UoXCJjb2RlOlwiLmNvbmNhdChlLmNvZGUsXCIgbWVzc2FnZTpcIikuY29uY2F0KGUubWVzc2FnZSkpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TW9kdWxlKGVsKS5nZXROZXR3b3JrVHlwZSgpKS5zZXRMZXZlbChcImVycm9yXCIpLmVuZCgpLHRoaXMuZ2V0T3V0ZXJFbWl0dGVySW5zdGFuY2UoKS5lbWl0KG9vLkVSUk9SLGUpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSxGaSgpO3ZhciBlLHQ9Uyh0aGlzLl9tb2R1bGVNYXApO3RyeXtmb3IodC5zKCk7IShlPXQubigpKS5kb25lOyl7dmFyIG49bShlLnZhbHVlLDIpWzFdO24ucmVzZXQmJm4ucmVzZXQoKX19Y2F0Y2gobyl7dC5lKG8pfWZpbmFsbHl7dC5mKCl9dGhpcy5fc3RhcnRMb2dpblRzPTAsdGhpcy5faW5pdFJlYWR5TGlzdCgpLHRoaXMuX2lzUmVhZHk9ITEsdGhpcy5zdG9wVGltZXIoKSx0aGlzLl9vdXRlckVtaXR0ZXIuZW1pdChvby5TREtfTk9UX1JFQURZKX19XSksZX0oKSxveT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtvKHRoaXMsZSksdGhpcy5fZnVuY01hcD1uZXcgTWFwfXJldHVybiBhKGUsW3trZXk6XCJkZWZlbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06dm9pZCAwO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiBudWxsO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbnVsbDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXJldHVybiBudWxsO2lmKHRoaXMuX2Z1bmNNYXAuaGFzKGUpJiZ0aGlzLl9mdW5jTWFwLmdldChlKS5oYXModCkpcmV0dXJuIHRoaXMuX2Z1bmNNYXAuZ2V0KGUpLmdldCh0KTt0aGlzLl9mdW5jTWFwLmhhcyhlKXx8dGhpcy5fZnVuY01hcC5zZXQoZSxuZXcgTWFwKTt2YXIgbz1udWxsO3JldHVybiB0aGlzLl9mdW5jTWFwLmdldChlKS5oYXModCk/bz10aGlzLl9mdW5jTWFwLmdldChlKS5nZXQodCk6KG89dGhpcy5fcGFjayhlLHQsbiksdGhpcy5fZnVuY01hcC5nZXQoZSkuc2V0KHQsbykpLG99fSx7a2V5OlwiZGVmZW5zZU9uY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp2b2lkIDA7cmV0dXJuXCJmdW5jdGlvblwiIT10eXBlb2YgdD9udWxsOnRoaXMuX3BhY2soZSx0LG4pfX0se2tleTpcImZpbmRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlfHwwPT09ZS5sZW5ndGh8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/bnVsbDp0aGlzLl9mdW5jTWFwLmhhcyhlKT90aGlzLl9mdW5jTWFwLmdldChlKS5oYXModCk/dGhpcy5fZnVuY01hcC5nZXQoZSkuZ2V0KHQpOihLaS5sb2coXCJTYWZldHlDYWxsYmFjay5maW5kOiDmib7kuI3liLAgZnVuYyDigJTigJQgXCIuY29uY2F0KGUsXCIvXCIpLmNvbmNhdChcIlwiIT09dC5uYW1lP3QubmFtZTpcIlthbm9ueW1vdXNdXCIpKSxudWxsKTooS2kubG9nKFwiU2FmZXR5Q2FsbGJhY2suZmluZDog5om+5LiN5YiwIGV2ZW50TmFtZS1cIi5jb25jYXQoZSxcIiDlr7nlupTnmoQgZnVuY1wiKSksbnVsbCl9fSx7a2V5OlwiZGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiYoISF0aGlzLl9mdW5jTWFwLmhhcyhlKSYmKCEhdGhpcy5fZnVuY01hcC5nZXQoZSkuaGFzKHQpJiYodGhpcy5fZnVuY01hcC5nZXQoZSkuZGVsZXRlKHQpLDA9PT10aGlzLl9mdW5jTWFwLmdldChlKS5zaXplJiZ0aGlzLl9mdW5jTWFwLmRlbGV0ZShlKSwhMCkpKX19LHtrZXk6XCJfcGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24oKXt0cnl7dC5hcHBseShuLEFycmF5LmZyb20oYXJndW1lbnRzKSl9Y2F0Y2gocyl7dmFyIG89T2JqZWN0LnZhbHVlcyhvbykuaW5kZXhPZihlKTtpZigtMSE9PW8pe3ZhciByPU9iamVjdC5rZXlzKG9vKVtvXTtLaS53YXJuKFwi5o6l5YWl5L6n5LqL5Lu2IFRJTS5FVkVOVC5cIi5jb25jYXQocixcIiDlr7nlupTnmoTlm57osIPlh73mlbDpgLvovpHlrZjlnKjpl67popjvvIzor7fmo4Dmn6XvvIFcIikscyl9dmFyIGE9bmV3IGxnKGpoKTthLnNldE1lc3NhZ2UoXCJldmVudE5hbWU6XCIuY29uY2F0KGUpKS5zZXRNb3JlTWVzc2FnZShzLm1lc3NhZ2UpLmVuZCgpfX19fV0pLGV9KCkscnk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKTt2YXIgbj17U0RLQXBwSUQ6dC5TREtBcHBJRCx1bmxpbWl0ZWRBVkNoYXRSb29tOnQudW5saW1pdGVkQVZDaGF0Um9vbXx8ITEsc2NlbmU6dC5zY2VuZXx8XCJcIixvdmVyc2VhOnQub3ZlcnNlYXx8ITEsaW5zdGFuY2VJRDpUdSgpfTt0aGlzLl9tb2R1bGVNYW5hZ2VyPW5ldyBueShuKSx0aGlzLl9zYWZldHlDYWxsYmFja0ZhY3Rvcnk9bmV3IG95fXJldHVybiBhKGUsW3trZXk6XCJpc1JlYWR5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5pc1JlYWR5KCl9fSx7a2V5Olwib25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX21vZHVsZU1hbmFnZXIub25FcnJvcihlKX19LHtrZXk6XCJsb2dpblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmxvZ2luKCksdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoQmMpLmxvZ2luKGUpfX0se2tleTpcImxvZ291dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoQmMpLmxvZ291dCgpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9tb2R1bGVNYW5hZ2VyLnJlc2V0KCksdH0pKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLmxvZ291dCgpLmZpbmFsbHkoKGZ1bmN0aW9uKCl7ZS5fbW9kdWxlTWFuYWdlci5zdG9wVGltZXIoKSxlLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShzbCkuZGVhbGxvYygpO3ZhciB0PWUuX21vZHVsZU1hbmFnZXIuZ2V0T3V0ZXJFbWl0dGVySW5zdGFuY2UoKSxuPWUuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFhjKTt0LmVtaXQob28uU0RLX0RFU1RST1kse1NES0FwcElEOm4uZ2V0U0RLQXBwSUQoKX0pfSkpfX0se2tleTpcIm9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe2U9PT1vby5HUk9VUF9TWVNURU1fTk9USUNFX1JFQ0VJVkVEJiZLaS53YXJuKFwi77yB77yB77yBVElNLkVWRU5ULkdST1VQX1NZU1RFTV9OT1RJQ0VfUkVDRUlWRUQgdjIuNi4w6LW35byD55So77yM5Li65LqG5pu05aW955qE5L2T6aqM77yM6K+35ZyoIFRJTS5FVkVOVC5NRVNTQUdFX1JFQ0VJVkVEIOS6i+S7tuWbnuiwg+WGheaOpeaUtuWkhOeQhue+pOezu+e7n+mAmuefpe+8jOivpue7huivt+WPguiAg++8mmh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9NZXNzYWdlLmh0bWwjLkdyb3VwU3lzdGVtTm90aWNlUGF5bG9hZFwiKSxLaS5kZWJ1ZyhcIm9uXCIsXCJldmVudE5hbWU6XCIuY29uY2F0KGUpKSx0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkub24oZSx0aGlzLl9zYWZldHlDYWxsYmFja0ZhY3RvcnkuZGVmZW5zZShlLHQsbiksbil9fSx7a2V5Olwib25jZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtLaS5kZWJ1ZyhcIm9uY2VcIixcImV2ZW50TmFtZTpcIi5jb25jYXQoZSkpLHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0T3V0ZXJFbWl0dGVySW5zdGFuY2UoKS5vbmNlKGUsdGhpcy5fc2FmZXR5Q2FsbGJhY2tGYWN0b3J5LmRlZmVuc2VPbmNlKGUsdCxuKSxufHx0aGlzKX19LHtrZXk6XCJvZmZcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixvKXtLaS5kZWJ1ZyhcIm9mZlwiLFwiZXZlbnROYW1lOlwiLmNvbmNhdChlKSk7dmFyIHI9dGhpcy5fc2FmZXR5Q2FsbGJhY2tGYWN0b3J5LmZpbmQoZSx0KTtudWxsIT09ciYmKHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0T3V0ZXJFbWl0dGVySW5zdGFuY2UoKS5vZmYoZSxyLG4sbyksdGhpcy5fc2FmZXR5Q2FsbGJhY2tGYWN0b3J5LmRlbGV0ZShlLHQpKX19LHtrZXk6XCJyZWdpc3RlclBsdWdpblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKG9sKS5yZWdpc3RlclBsdWdpbihlKX19LHtrZXk6XCJzZXRMb2dMZXZlbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGU8PTApe2NvbnNvbGUubG9nKFtcIlwiLFwiIF9fX19fX19fICBfX19fX18gIF9fICAgICAgIF9fICBfXyAgICAgICBfXyAgX19fX19fX18gIF9fX19fX19cIixcInwgICAgICAgIFxcXFx8ICAgICAgXFxcXHwgIFxcXFwgICAgIC8gIFxcXFx8ICBcXFxcICBfICB8ICBcXFxcfCAgICAgICAgXFxcXHwgICAgICAgXFxcXFwiLFwiIFxcXFwkJCQkJCQkJCBcXFxcJCQkJCQkfCAkJFxcXFwgICAvICAkJHwgJCQgLyBcXFxcIHwgJCR8ICQkJCQkJCQkfCAkJCQkJCQkXFxcXFwiLFwiICAgfCAkJCAgICAgfCAkJCAgfCAkJCRcXFxcIC8gICQkJHwgJCQvICAkXFxcXHwgJCR8ICQkX18gICAgfCAkJF9fLyAkJFwiLFwiICAgfCAkJCAgICAgfCAkJCAgfCAkJCQkXFxcXCAgJCQkJHwgJCQgICQkJFxcXFwgJCR8ICQkICBcXFxcICAgfCAkJCAgICAkJFwiLFwiICAgfCAkJCAgICAgfCAkJCAgfCAkJFxcXFwkJCAkJCAkJHwgJCQgJCRcXFxcJCRcXFxcJCR8ICQkJCQkICAgfCAkJCQkJCQkXFxcXFwiLFwiICAgfCAkJCAgICBffCAkJF8gfCAkJCBcXFxcJCQkfCAkJHwgJCQkJCAgXFxcXCQkJCR8ICQkX19fX18gfCAkJF9fLyAkJFwiLFwiICAgfCAkJCAgIHwgICAkJCBcXFxcfCAkJCAgXFxcXCQgfCAkJHwgJCQkICAgIFxcXFwkJCR8ICQkICAgICBcXFxcfCAkJCAgICAkJFwiLFwiICAgIFxcXFwkJCAgICBcXFxcJCQkJCQkIFxcXFwkJCAgICAgIFxcXFwkJCBcXFxcJCQgICAgICBcXFxcJCQgXFxcXCQkJCQkJCQkIFxcXFwkJCQkJCQkXCIsXCJcIixcIlwiXS5qb2luKFwiXFxuXCIpKSxjb25zb2xlLmxvZyhcIiVjSU0g5pm66IO95a6i5pyN77yM6ZqP5pe26ZqP5Zyw6Kej5Yaz5oKo55qE6Zeu6aKYIOKGkl/ihpIgaHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9hY3QvZXZlbnQvc21hcnR5LXNlcnZpY2U/ZnJvbT1pbS1kb2NcIixcImNvbG9yOiMwMDZlZmZcIiksY29uc29sZS5sb2coXCIlY+S7jnYyLjExLjLotbfvvIxTREsg5pSv5oyB5LqGIFdlYlNvY2tldO+8jOWwj+eoi+W6j+mcgOimgea3u+WKoOWPl+S/oeWfn+WQje+8geWNh+e6p+aMh+W8lTogaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL3R1dG9yaWFsLTAyLXVwZ3JhZGVndWlkZWxpbmUuaHRtbFwiLFwiY29sb3I6I2ZmMDAwMFwiKTtjb25zb2xlLmxvZyhbXCJcIixcIuWPguiAg+S7peS4i+aWh+aho++8jOS8muabtOW/q+ino+WGs+mXrumimOWTpu+8gSgjXi5eIylcXG5cIixcIlNESyDmm7TmlrDml6Xlv5c6IGh0dHBzOi8vY2xvdWQudGVuY2VudC5jb20vZG9jdW1lbnQvcHJvZHVjdC8yNjkvMzg0OTJcXG5cIixcIlNESyDmjqXlj6PmlofmoaM6IGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9TREsuaHRtbFxcblwiLFwi5bi46KeB6Zeu6aKYOiBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vdHV0b3JpYWwtMDEtZmFxLmh0bWxcXG5cIixcIuWPjemmiOmXrumimO+8n+aIs+aIkeaPkCBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3RlbmNlbnR5dW4vVElNU0RLL2lzc3Vlc1xcblwiLFwi5aaC5p6c5oKo6ZyA6KaB5Zyo55Sf5Lqn546v5aKD5YWz6Zet5LiK6Z2i55qE5pel5b+X77yM6K+3IHRpbS5zZXRMb2dMZXZlbCgxKVxcblwiXS5qb2luKFwiXFxuXCIpKX1LaS5zZXRMZXZlbChlKX19LHtrZXk6XCJjcmVhdGVUZXh0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShIYykuY3JlYXRlVGV4dE1lc3NhZ2UoZSl9fSx7a2V5OlwiY3JlYXRlVGV4dEF0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShIYykuY3JlYXRlVGV4dE1lc3NhZ2UoZSl9fSx7a2V5OlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEhjKS5jcmVhdGVJbWFnZU1lc3NhZ2UoZSl9fSx7a2V5OlwiY3JlYXRlQXVkaW9NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEhjKS5jcmVhdGVBdWRpb01lc3NhZ2UoZSl9fSx7a2V5OlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEhjKS5jcmVhdGVWaWRlb01lc3NhZ2UoZSl9fSx7a2V5OlwiY3JlYXRlQ3VzdG9tTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShIYykuY3JlYXRlQ3VzdG9tTWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVGYWNlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShIYykuY3JlYXRlRmFjZU1lc3NhZ2UoZSl9fSx7a2V5OlwiY3JlYXRlRmlsZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSGMpLmNyZWF0ZUZpbGVNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZU1lcmdlck1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSGMpLmNyZWF0ZU1lcmdlck1lc3NhZ2UoZSl9fSx7a2V5OlwiZG93bmxvYWRNZXJnZXJNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZSE9PXJvLk1TR19NRVJHRVI/WW0obmV3IEttKHtjb2RlOlBkLk1FU1NBR0VfTUVSR0VSX1RZUEVfSU5WQUxJRCxtZXNzYWdlOmRwfSkpOk91KGUucGF5bG9hZC5kb3dubG9hZEtleSk/WW0obmV3IEttKHtjb2RlOlBkLk1FU1NBR0VfTUVSR0VSX0tFWV9JTlZBTElELG1lc3NhZ2U6cHB9KSk6dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSGMpLmRvd25sb2FkTWVyZ2VyTWVzc2FnZShlKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIFltKG5ldyBLbSh7Y29kZTpQZC5NRVNTQUdFX01FUkdFUl9ET1dOTE9BRF9GQUlMLG1lc3NhZ2U6Z3B9KSl9KSl9fSx7a2V5OlwiY3JlYXRlRm9yd2FyZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSGMpLmNyZWF0ZUZvcndhcmRNZXNzYWdlKGUpfX0se2tleTpcInNlbmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSBpbnN0YW5jZW9mIEdtP3RoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEhjKS5zZW5kTWVzc2FnZUluc3RhbmNlKGUsdCk6WW0obmV3IEttKHtjb2RlOlBkLk1FU1NBR0VfU0VORF9ORUVEX01FU1NBR0VfSU5TVEFOQ0UsbWVzc2FnZTokZH0pKX19LHtrZXk6XCJjYWxsRXhwZXJpbWVudGFsQVBJXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm5cImhhbmRsZUdyb3VwSW52aXRhdGlvblwiPT09ZT90aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSgkYykuaGFuZGxlR3JvdXBJbnZpdGF0aW9uKHQpOlltKG5ldyBLbSh7Y29kZTpQZC5JTlZBTElEX09QRVJBVElPTixtZXNzYWdlOllwfSkpfX0se2tleTpcInJldm9rZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSGMpLnJldm9rZU1lc3NhZ2UoZSl9fSx7a2V5OlwicmVzZW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShIYykucmVzZW5kTWVzc2FnZShlKX19LHtrZXk6XCJkZWxldGVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEhjKS5kZWxldGVNZXNzYWdlKGUpfX0se2tleTpcImdldE1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEpjKS5nZXRNZXNzYWdlTGlzdChlKX19LHtrZXk6XCJzZXRNZXNzYWdlUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShKYykuc2V0TWVzc2FnZVJlYWQoZSl9fSx7a2V5OlwiZ2V0Q29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEpjKS5nZXRDb252ZXJzYXRpb25MaXN0KCl9fSx7a2V5OlwiZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShKYykuZ2V0Q29udmVyc2F0aW9uUHJvZmlsZShlKX19LHtrZXk6XCJkZWxldGVDb252ZXJzYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSmMpLmRlbGV0ZUNvbnZlcnNhdGlvbihlKX19LHtrZXk6XCJwaW5Db252ZXJzYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSmMpLnBpbkNvbnZlcnNhdGlvbihlKX19LHtrZXk6XCJnZXRNeVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShqYykuZ2V0TXlQcm9maWxlKCl9fSx7a2V5OlwiZ2V0VXNlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoamMpLmdldFVzZXJQcm9maWxlKGUpfX0se2tleTpcInVwZGF0ZU15UHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShqYykudXBkYXRlTXlQcm9maWxlKGUpfX0se2tleTpcImdldEJsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGpjKS5nZXRMb2NhbEJsYWNrbGlzdCgpfX0se2tleTpcImFkZFRvQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGpjKS5hZGRCbGFja2xpc3QoZSl9fSx7a2V5OlwicmVtb3ZlRnJvbUJsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShqYykuZGVsZXRlQmxhY2tsaXN0KGUpfX0se2tleTpcImdldEZyaWVuZExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFdjKTtyZXR1cm4gZT9lLmdldExvY2FsRnJpZW5kTGlzdCgpOlltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5OlwiYWRkRnJpZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoV2MpO3JldHVybiB0P3QuYWRkRnJpZW5kKGUpOlltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5OlwiZGVsZXRlRnJpZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoV2MpO3JldHVybiB0P3QuZGVsZXRlRnJpZW5kKGUpOlltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5OlwiY2hlY2tGcmllbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShXYyk7cmV0dXJuIHQ/dC5jaGVja0ZyaWVuZChlKTpZbSh7Y29kZTpQZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpXcH0pfX0se2tleTpcImdldEZyaWVuZFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShXYyk7cmV0dXJuIHQ/dC5nZXRGcmllbmRQcm9maWxlKGUpOlltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5OlwidXBkYXRlRnJpZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoV2MpO3JldHVybiB0P3QudXBkYXRlRnJpZW5kKGUpOlltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5OlwiZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShXYyk7cmV0dXJuIGU/ZS5nZXRMb2NhbEZyaWVuZEFwcGxpY2F0aW9uTGlzdCgpOlltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5OlwiYWNjZXB0RnJpZW5kQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShXYyk7cmV0dXJuIHQ/dC5hY2NlcHRGcmllbmRBcHBsaWNhdGlvbihlKTpZbSh7Y29kZTpQZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpXcH0pfX0se2tleTpcInJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoV2MpO3JldHVybiB0P3QucmVmdXNlRnJpZW5kQXBwbGljYXRpb24oZSk6WW0oe2NvZGU6UGQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6V3B9KX19LHtrZXk6XCJkZWxldGVGcmllbmRBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFdjKTtyZXR1cm4gdD90LmRlbGV0ZUZyaWVuZEFwcGxpY2F0aW9uKGUpOlltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5Olwic2V0RnJpZW5kQXBwbGljYXRpb25SZWFkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShXYyk7cmV0dXJuIGU/ZS5zZXRGcmllbmRBcHBsaWNhdGlvblJlYWQoKTpZbSh7Y29kZTpQZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpXcH0pfX0se2tleTpcImdldEZyaWVuZEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoV2MpO3JldHVybiBlP2UuZ2V0TG9jYWxGcmllbmRHcm91cExpc3QoKTpZbSh7Y29kZTpQZC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpXcH0pfX0se2tleTpcImNyZWF0ZUZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoV2MpO3JldHVybiB0P3QuY3JlYXRlRnJpZW5kR3JvdXAoZSk6WW0oe2NvZGU6UGQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6V3B9KX19LHtrZXk6XCJkZWxldGVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFdjKTtyZXR1cm4gdD90LmRlbGV0ZUZyaWVuZEdyb3VwKGUpOlltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5OlwiYWRkVG9GcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFdjKTtyZXR1cm4gdD90LmFkZFRvRnJpZW5kR3JvdXAoZSk6WW0oe2NvZGU6UGQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6V3B9KX19LHtrZXk6XCJyZW1vdmVGcm9tRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShXYyk7cmV0dXJuIHQ/dC5yZW1vdmVGcm9tRnJpZW5kR3JvdXAoZSk6WW0oe2NvZGU6UGQuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6V3B9KX19LHtrZXk6XCJyZW5hbWVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFdjKTtyZXR1cm4gdD90LnJlbmFtZUZyaWVuZEdyb3VwKGUpOlltKHtjb2RlOlBkLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOldwfSl9fSx7a2V5OlwiZ2V0R3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKCRjKS5nZXRHcm91cExpc3QoZSl9fSx7a2V5OlwiZ2V0R3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKCRjKS5nZXRHcm91cFByb2ZpbGUoZSl9fSx7a2V5OlwiY3JlYXRlR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoJGMpLmNyZWF0ZUdyb3VwKGUpfX0se2tleTpcImRpc21pc3NHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSgkYykuZGlzbWlzc0dyb3VwKGUpfX0se2tleTpcInVwZGF0ZUdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSgkYykudXBkYXRlR3JvdXBQcm9maWxlKGUpfX0se2tleTpcImpvaW5Hcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSgkYykuam9pbkdyb3VwKGUpfX0se2tleTpcInF1aXRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSgkYykucXVpdEdyb3VwKGUpfX0se2tleTpcInNlYXJjaEdyb3VwQnlJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSgkYykuc2VhcmNoR3JvdXBCeUlEKGUpfX0se2tleTpcImdldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoJGMpLmdldEdyb3VwT25saW5lTWVtYmVyQ291bnQoZSl9fSx7a2V5OlwiY2hhbmdlR3JvdXBPd25lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSgkYykuY2hhbmdlR3JvdXBPd25lcihlKX19LHtrZXk6XCJoYW5kbGVHcm91cEFwcGxpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKCRjKS5oYW5kbGVHcm91cEFwcGxpY2F0aW9uKGUpfX0se2tleTpcImluaXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoJGMpLmluaXRHcm91cEF0dHJpYnV0ZXMoZSl9fSx7a2V5Olwic2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKCRjKS5zZXRHcm91cEF0dHJpYnV0ZXMoZSl9fSx7a2V5OlwiZGVsZXRlR3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKCRjKS5kZWxldGVHcm91cEF0dHJpYnV0ZXMoZSl9fSx7a2V5OlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKCRjKS5nZXRHcm91cEF0dHJpYnV0ZXMoZSl9fSx7a2V5OlwiZ2V0R3JvdXBNZW1iZXJMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHpjKS5nZXRHcm91cE1lbWJlckxpc3QoZSl9fSx7a2V5OlwiZ2V0R3JvdXBNZW1iZXJQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHpjKS5nZXRHcm91cE1lbWJlclByb2ZpbGUoZSl9fSx7a2V5OlwiYWRkR3JvdXBNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoemMpLmFkZEdyb3VwTWVtYmVyKGUpfX0se2tleTpcImRlbGV0ZUdyb3VwTWVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHpjKS5kZWxldGVHcm91cE1lbWJlcihlKX19LHtrZXk6XCJzZXRHcm91cE1lbWJlck11dGVUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHpjKS5zZXRHcm91cE1lbWJlck11dGVUaW1lKGUpfX0se2tleTpcInNldEdyb3VwTWVtYmVyUm9sZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh6Yykuc2V0R3JvdXBNZW1iZXJSb2xlKGUpfX0se2tleTpcInNldEdyb3VwTWVtYmVyTmFtZUNhcmRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoemMpLnNldEdyb3VwTWVtYmVyTmFtZUNhcmQoZSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh6Yykuc2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZChlKX19LHtrZXk6XCJzZXRNZXNzYWdlUmVtaW5kVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh6Yykuc2V0TWVzc2FnZVJlbWluZFR5cGUoZSl9fV0pLGV9KCksYXk9e2xvZ2luOlwibG9naW5cIixsb2dvdXQ6XCJsb2dvdXRcIixkZXN0cm95OlwiZGVzdHJveVwiLG9uOlwib25cIixvZmY6XCJvZmZcIixyZWFkeTpcInJlYWR5XCIsc2V0TG9nTGV2ZWw6XCJzZXRMb2dMZXZlbFwiLGpvaW5Hcm91cDpcImpvaW5Hcm91cFwiLHF1aXRHcm91cDpcInF1aXRHcm91cFwiLHJlZ2lzdGVyUGx1Z2luOlwicmVnaXN0ZXJQbHVnaW5cIixnZXRHcm91cE9ubGluZU1lbWJlckNvdW50OlwiZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwifTtmdW5jdGlvbiBzeShlLHQpe2lmKGUuaXNSZWFkeSgpfHx2b2lkIDAhPT1heVt0XSlyZXR1cm4hMDt2YXIgbj1uZXcgS20oe2NvZGU6UGQuU0RLX0lTX05PVF9SRUFEWSxtZXNzYWdlOlwiXCIuY29uY2F0KHQsXCIgXCIpLmNvbmNhdCh6cCxcIu+8jOivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vbW9kdWxlLUVWRU5ULmh0bWwjLlNES19SRUFEWVwiKX0pO3JldHVybiBlLm9uRXJyb3IobiksITF9dmFyIGl5PXt9LHV5PXt9O3JldHVybiB1eS5jcmVhdGU9ZnVuY3Rpb24oZSl7dmFyIG49MDtpZihqaShlLlNES0FwcElEKSluPWUuU0RLQXBwSUQ7ZWxzZSBpZihLaS53YXJuKFwiVElNLmNyZWF0ZSBTREtBcHBJRCDnmoTnsbvlnovlupTor6XkuLogTnVtYmVy77yM6K+35L+u5pS577yBXCIpLG49cGFyc2VJbnQoZS5TREtBcHBJRCksaXNOYU4obikpcmV0dXJuIEtpLmVycm9yKFwiVElNLmNyZWF0ZSBmYWlsZWQuIOino+aekCBTREtBcHBJRCDlpLHotKXvvIzor7fmo4Dmn6XkvKDlj4LvvIFcIiksbnVsbDtpZihuJiZpeVtuXSlyZXR1cm4gaXlbbl07S2kubG9nKFwiVElNLmNyZWF0ZVwiKTt2YXIgbz1uZXcgcnkodCh0KHt9LGUpLHt9LHtTREtBcHBJRDpufSkpO28ub24ob28uU0RLX0RFU1RST1ksKGZ1bmN0aW9uKGUpe2l5W2UuZGF0YS5TREtBcHBJRF09bnVsbCxkZWxldGUgaXlbZS5kYXRhLlNES0FwcElEXX0pKTt2YXIgcj1mdW5jdGlvbihlKXt2YXIgdD1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBPYmplY3Qua2V5cyh3YykuZm9yRWFjaCgoZnVuY3Rpb24obil7aWYoZVtuXSl7dmFyIG89d2Nbbl0scj1uZXcgcG87dFtvXT1mdW5jdGlvbigpe3ZhciB0PUFycmF5LmZyb20oYXJndW1lbnRzKTtyZXR1cm4gci51c2UoKGZ1bmN0aW9uKHQsbyl7cmV0dXJuIHN5KGUsbik/bygpOlltKG5ldyBLbSh7Y29kZTpQZC5TREtfSVNfTk9UX1JFQURZLG1lc3NhZ2U6XCJcIi5jb25jYXQobixcIiBcIikuY29uY2F0KHpwLFwi44CCXCIpfSkpfSkpLnVzZSgoZnVuY3Rpb24oZSx0KXtpZighMD09PVJ1KGUsYmNbbl0sbykpcmV0dXJuIHQoKX0pKS51c2UoKGZ1bmN0aW9uKHQsbyl7cmV0dXJuIGVbbl0uYXBwbHkoZSx0KX0pKSxyLnJ1bih0KX19fSkpLHR9KG8pO3JldHVybiBpeVtuXT1yLEtpLmxvZyhcIlRJTS5jcmVhdGUgb2tcIikscn0sdXkuVFlQRVM9cm8sdXkuRVZFTlQ9b28sdXkuVkVSU0lPTj1cIjIuMTQuMFwiLEtpLmxvZyhcIlRJTS5WRVJTSU9OOiBcIi5jb25jYXQodXkuVkVSU0lPTikpLHV5fSkpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///./node_modules/tim-js-sdk/tim-js-friendship.js\\n')},\"./node_modules/tim-js-sdk/tim-js.js\":\n/*!*******************************************!*\\\n  !*** ./node_modules/tim-js-sdk/tim-js.js ***!\n  \\*******************************************/\n/*! no static exports found */function(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(global) {!function(e,t){ true?module.exports=t():undefined}(this,(function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e){return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t,n){return(p=l()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&c(r,n.prototype),r}).apply(null,arguments)}function d(e){var t=\"function\"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return p(e,arguments,u(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),c(o,e)})(e)}function g(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function h(e){if(void 0===e)throw new ReferenceError(\"this hasn\\'t been initialised - super() hasn\\'t been called\");return e}function f(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?h(e):t}function _(e){var t=l();return function(){var n,o=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f(this,n)}}function m(e,t){return M(e)||function(e,t){var n=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null==n)return;var o,r,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);s=!0);}catch(u){i=!0,r=u}finally{try{s||null==n.return||n.return()}finally{if(i)throw r}}return a}(e,t)||I(e,t)||S()}function v(e){return function(e){if(Array.isArray(e))return T(e)}(e)||y(e)||I(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function M(e){if(Array.isArray(e))return e}function y(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}function I(e,t){if(e){if(\"string\"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function S(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function D(e,t){var n=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=I(e))||t&&e&&\"number\"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}var E=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function C(e,t){return e(t={exports:{}},t.exports),t.exports}var A,k,N=function(e){return e&&e.Math==Math&&e},O=N(\"object\"==typeof globalThis&&globalThis)||N(\"object\"==typeof window&&window)||N(\"object\"==typeof self&&self)||N(\"object\"==typeof E&&E)||function(){return this}()||Function(\"return this\")(),L=function(e){try{return!!e()}catch(t){return!0}},R=!L((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),b={}.propertyIsEnumerable,w=Object.getOwnPropertyDescriptor,P={f:w&&!b.call({1:2},1)?function(e){var t=w(this,e);return!!t&&t.enumerable}:b},G=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},U={}.toString,F=function(e){return U.call(e).slice(8,-1)},q=\"\".split,x=L((function(){return!Object(\"z\").propertyIsEnumerable(0)}))?function(e){return\"String\"==F(e)?q.call(e,\"\"):Object(e)}:Object,V=function(e){if(null==e)throw TypeError(\"Can\\'t call method on \"+e);return e},K=function(e){return x(V(e))},B=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e},H=function(e){return\"function\"==typeof e?e:void 0},j=function(e,t){return arguments.length<2?H(O[e]):O[e]&&O[e][t]},$=j(\"navigator\",\"userAgent\")||\"\",Y=O.process,z=O.Deno,W=Y&&Y.versions||z&&z.version,J=W&&W.v8;J?k=(A=J.split(\".\"))[0]<4?1:A[0]+A[1]:$&&(!(A=$.match(/Edge\\\\/(\\\\d+)/))||A[1]>=74)&&(A=$.match(/Chrome\\\\/(\\\\d+)/))&&(k=A[1]);var X=k&&+k,Q=!!Object.getOwnPropertySymbols&&!L((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&X&&X<41})),Z=Q&&!Symbol.sham&&\"symbol\"==typeof Symbol.iterator,ee=Z?function(e){return\"symbol\"==typeof e}:function(e){var t=j(\"Symbol\");return\"function\"==typeof t&&Object(e)instanceof t},te=function(e,t){try{Object.defineProperty(O,e,{value:t,configurable:!0,writable:!0})}catch(n){O[e]=t}return t},ne=O[\"__core-js_shared__\"]||te(\"__core-js_shared__\",{}),oe=C((function(e){(e.exports=function(e,t){return ne[e]||(ne[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:\"3.16.1\",mode:\"global\",copyright:\"© 2021 Denis Pushkarev (zloirock.ru)\"})})),re=function(e){return Object(V(e))},ae={}.hasOwnProperty,se=Object.hasOwn||function(e,t){return ae.call(re(e),t)},ie=0,ue=Math.random(),ce=function(e){return\"Symbol(\"+String(void 0===e?\"\":e)+\")_\"+(++ie+ue).toString(36)},le=oe(\"wks\"),pe=O.Symbol,de=Z?pe:pe&&pe.withoutSetter||ce,ge=function(e){return se(le,e)&&(Q||\"string\"==typeof le[e])||(Q&&se(pe,e)?le[e]=pe[e]:le[e]=de(\"Symbol.\"+e)),le[e]},he=ge(\"toPrimitive\"),fe=function(e,t){if(!B(e)||ee(e))return e;var n,o=e[he];if(void 0!==o){if(void 0===t&&(t=\"default\"),n=o.call(e,t),!B(n)||ee(n))return n;throw TypeError(\"Can\\'t convert object to primitive value\")}return void 0===t&&(t=\"number\"),function(e,t){var n,o;if(\"string\"===t&&\"function\"==typeof(n=e.toString)&&!B(o=n.call(e)))return o;if(\"function\"==typeof(n=e.valueOf)&&!B(o=n.call(e)))return o;if(\"string\"!==t&&\"function\"==typeof(n=e.toString)&&!B(o=n.call(e)))return o;throw TypeError(\"Can\\'t convert object to primitive value\")}(e,t)},_e=function(e){var t=fe(e,\"string\");return ee(t)?t:String(t)},me=O.document,ve=B(me)&&B(me.createElement),Me=function(e){return ve?me.createElement(e):{}},ye=!R&&!L((function(){return 7!=Object.defineProperty(Me(\"div\"),\"a\",{get:function(){return 7}}).a})),Ie=Object.getOwnPropertyDescriptor,Te={f:R?Ie:function(e,t){if(e=K(e),t=_e(t),ye)try{return Ie(e,t)}catch(n){}if(se(e,t))return G(!P.f.call(e,t),e[t])}},Se=function(e){if(!B(e))throw TypeError(String(e)+\" is not an object\");return e},De=Object.defineProperty,Ee={f:R?De:function(e,t,n){if(Se(e),t=_e(t),Se(n),ye)try{return De(e,t,n)}catch(o){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported\");return\"value\"in n&&(e[t]=n.value),e}},Ce=R?function(e,t,n){return Ee.f(e,t,G(1,n))}:function(e,t,n){return e[t]=n,e},Ae=Function.toString;\"function\"!=typeof ne.inspectSource&&(ne.inspectSource=function(e){return Ae.call(e)});var ke,Ne,Oe,Le=ne.inspectSource,Re=O.WeakMap,be=\"function\"==typeof Re&&/native code/.test(Le(Re)),we=oe(\"keys\"),Pe=function(e){return we[e]||(we[e]=ce(e))},Ge={},Ue=O.WeakMap;if(be||ne.state){var Fe=ne.state||(ne.state=new Ue),qe=Fe.get,xe=Fe.has,Ve=Fe.set;ke=function(e,t){if(xe.call(Fe,e))throw new TypeError(\"Object already initialized\");return t.facade=e,Ve.call(Fe,e,t),t},Ne=function(e){return qe.call(Fe,e)||{}},Oe=function(e){return xe.call(Fe,e)}}else{var Ke=Pe(\"state\");Ge[Ke]=!0,ke=function(e,t){if(se(e,Ke))throw new TypeError(\"Object already initialized\");return t.facade=e,Ce(e,Ke,t),t},Ne=function(e){return se(e,Ke)?e[Ke]:{}},Oe=function(e){return se(e,Ke)}}var Be={set:ke,get:Ne,has:Oe,enforce:function(e){return Oe(e)?Ne(e):ke(e,{})},getterFor:function(e){return function(t){var n;if(!B(t)||(n=Ne(t)).type!==e)throw TypeError(\"Incompatible receiver, \"+e+\" required\");return n}}},He=C((function(e){var t=Be.get,n=Be.enforce,o=String(String).split(\"String\");(e.exports=function(e,t,r,a){var s,i=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet;\"function\"==typeof r&&(\"string\"!=typeof t||se(r,\"name\")||Ce(r,\"name\",t),(s=n(r)).source||(s.source=o.join(\"string\"==typeof t?t:\"\"))),e!==O?(i?!c&&e[t]&&(u=!0):delete e[t],u?e[t]=r:Ce(e,t,r)):u?e[t]=r:te(t,r)})(Function.prototype,\"toString\",(function(){return\"function\"==typeof this&&t(this).source||Le(this)}))})),je=Math.ceil,$e=Math.floor,Ye=function(e){return isNaN(e=+e)?0:(e>0?$e:je)(e)},ze=Math.min,We=function(e){return e>0?ze(Ye(e),9007199254740991):0},Je=Math.max,Xe=Math.min,Qe=function(e,t){var n=Ye(e);return n<0?Je(n+t,0):Xe(n,t)},Ze=function(e){return function(t,n,o){var r,a=K(t),s=We(a.length),i=Qe(o,s);if(e&&n!=n){for(;s>i;)if((r=a[i++])!=r)return!0}else for(;s>i;i++)if((e||i in a)&&a[i]===n)return e||i||0;return!e&&-1}},et={includes:Ze(!0),indexOf:Ze(!1)},nt=et.indexOf,ot=function(e,t){var n,o=K(e),r=0,a=[];for(n in o)!se(Ge,n)&&se(o,n)&&a.push(n);for(;t.length>r;)se(o,n=t[r++])&&(~nt(a,n)||a.push(n));return a},rt=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"],at=rt.concat(\"length\",\"prototype\"),st={f:Object.getOwnPropertyNames||function(e){return ot(e,at)}},it={f:Object.getOwnPropertySymbols},ut=j(\"Reflect\",\"ownKeys\")||function(e){var t=st.f(Se(e)),n=it.f;return n?t.concat(n(e)):t},ct=function(e,t){for(var n=ut(t),o=Ee.f,r=Te.f,a=0;a<n.length;a++){var s=n[a];se(e,s)||o(e,s,r(t,s))}},lt=/#|\\\\.prototype\\\\./,pt=function(e,t){var n=gt[dt(e)];return n==ft||n!=ht&&(\"function\"==typeof t?L(t):!!t)},dt=pt.normalize=function(e){return String(e).replace(lt,\".\").toLowerCase()},gt=pt.data={},ht=pt.NATIVE=\"N\",ft=pt.POLYFILL=\"P\",_t=pt,mt=Te.f,vt=function(e,t){var n,o,r,a,s,i=e.target,u=e.global,c=e.stat;if(n=u?O:c?O[i]||te(i,{}):(O[i]||{}).prototype)for(o in t){if(a=t[o],r=e.noTargetGet?(s=mt(n,o))&&s.value:n[o],!_t(u?o:i+(c?\".\":\"#\")+o,e.forced)&&void 0!==r){if(typeof a==typeof r)continue;ct(a,r)}(e.sham||r&&r.sham)&&Ce(a,\"sham\",!0),He(n,o,a,e)}},Mt=function(e){if(ee(e))throw TypeError(\"Cannot convert a Symbol value to a string\");return String(e)},yt=\"\\\\t\\\\n\\\\v\\\\f\\\\r                　\\\\u2028\\\\u2029\\\\ufeff\",It=\"[\"+yt+\"]\",Tt=RegExp(\"^\"+It+It+\"*\"),St=RegExp(It+It+\"*$\"),Dt=function(e){return function(t){var n=Mt(V(t));return 1&e&&(n=n.replace(Tt,\"\")),2&e&&(n=n.replace(St,\"\")),n}},Et={start:Dt(1),end:Dt(2),trim:Dt(3)},Ct=Et.trim,At=O.parseInt,kt=/^[+-]?0[Xx]/,Nt=8!==At(yt+\"08\")||22!==At(yt+\"0x16\")?function(e,t){var n=Ct(Mt(e));return At(n,t>>>0||(kt.test(n)?16:10))}:At;vt({global:!0,forced:parseInt!=Nt},{parseInt:Nt});var Ot,Lt=Object.keys||function(e){return ot(e,rt)},Rt=R?Object.defineProperties:function(e,t){Se(e);for(var n,o=Lt(t),r=o.length,a=0;r>a;)Ee.f(e,n=o[a++],t[n]);return e},bt=j(\"document\",\"documentElement\"),wt=Pe(\"IE_PROTO\"),Pt=function(){},Gt=function(e){return\"<script>\"+e+\"<\\\\/script>\"},Ut=function(e){e.write(Gt(\"\")),e.close();var t=e.parentWindow.Object;return e=null,t},Ft=function(){try{Ot=new ActiveXObject(\"htmlfile\")}catch(t){}Ft=document.domain&&Ot?Ut(Ot):function(){var e,t=Me(\"iframe\");if(t.style)return t.style.display=\"none\",bt.appendChild(t),t.src=String(\"javascript:\"),(e=t.contentWindow.document).open(),e.write(Gt(\"document.F=Object\")),e.close(),e.F}()||Ut(Ot);for(var e=rt.length;e--;)delete Ft.prototype[rt[e]];return Ft()};Ge[wt]=!0;var qt=Object.create||function(e,t){var n;return null!==e?(Pt.prototype=Se(e),n=new Pt,Pt.prototype=null,n[wt]=e):n=Ft(),void 0===t?n:Rt(n,t)};vt({target:\"Object\",stat:!0,sham:!R},{create:qt});var xt=function(e){if(\"function\"!=typeof e)throw TypeError(String(e)+\" is not a function\");return e},Vt=function(e,t,n){if(xt(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}},Kt=Array.isArray||function(e){return\"Array\"==F(e)},Bt=ge(\"species\"),Ht=function(e,t){return new(function(e){var t;return Kt(e)&&(\"function\"!=typeof(t=e.constructor)||t!==Array&&!Kt(t.prototype)?B(t)&&null===(t=t[Bt])&&(t=void 0):t=void 0),void 0===t?Array:t}(e))(0===t?0:t)},jt=[].push,$t=function(e){var t=1==e,n=2==e,o=3==e,r=4==e,a=6==e,s=7==e,i=5==e||a;return function(u,c,l,p){for(var d,g,h=re(u),f=x(h),_=Vt(c,l,3),m=We(f.length),v=0,M=p||Ht,y=t?M(u,m):n||s?M(u,0):void 0;m>v;v++)if((i||v in f)&&(g=_(d=f[v],v,h),e))if(t)y[v]=g;else if(g)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:jt.call(y,d)}else switch(e){case 4:return!1;case 7:jt.call(y,d)}return a?-1:o||r?r:y}},Yt={forEach:$t(0),map:$t(1),filter:$t(2),some:$t(3),every:$t(4),find:$t(5),findIndex:$t(6),filterReject:$t(7)},zt=function(e,t){var n=[][e];return!!n&&L((function(){n.call(null,t||function(){throw 1},1)}))},Wt=Yt.forEach,Jt=zt(\"forEach\")?[].forEach:function(e){return Wt(this,e,arguments.length>1?arguments[1]:void 0)};vt({target:\"Array\",proto:!0,forced:[].forEach!=Jt},{forEach:Jt});var Xt={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Qt in Xt){var Zt=O[Qt],en=Zt&&Zt.prototype;if(en&&en.forEach!==Jt)try{Ce(en,\"forEach\",Jt)}catch(_M){en.forEach=Jt}}var tn=L((function(){Lt(1)}));vt({target:\"Object\",stat:!0,forced:tn},{keys:function(e){return Lt(re(e))}});var nn=function(e){var t=e.return;if(void 0!==t)return Se(t.call(e)).value},on=function(e,t,n,o){try{return o?t(Se(n)[0],n[1]):t(n)}catch(_M){throw nn(e),_M}},rn={},an=ge(\"iterator\"),sn=Array.prototype,un=function(e){return void 0!==e&&(rn.Array===e||sn[an]===e)},cn=function(e,t,n){var o=_e(t);o in e?Ee.f(e,o,G(0,n)):e[o]=n},ln={};ln[ge(\"toStringTag\")]=\"z\";var pn=\"[object z]\"===String(ln),dn=ge(\"toStringTag\"),gn=\"Arguments\"==F(function(){return arguments}()),hn=pn?F:function(e){var t,n,o;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(n=function(e,t){try{return e[t]}catch(_M){}}(t=Object(e),dn))?n:gn?F(t):\"Object\"==(o=F(t))&&\"function\"==typeof t.callee?\"Arguments\":o},fn=ge(\"iterator\"),_n=function(e){if(null!=e)return e[fn]||e[\"@@iterator\"]||rn[hn(e)]},mn=function(e){var t,n,o,r,a,s,i=re(e),u=\"function\"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,p=void 0!==l,d=_n(i),g=0;if(p&&(l=Vt(l,c>2?arguments[2]:void 0,2)),null==d||u==Array&&un(d))for(n=new u(t=We(i.length));t>g;g++)s=p?l(i[g],g):i[g],cn(n,g,s);else for(a=(r=d.call(i)).next,n=new u;!(o=a.call(r)).done;g++)s=p?on(r,l,[o.value,g],!0):o.value,cn(n,g,s);return n.length=g,n},vn=ge(\"iterator\"),Mn=!1;try{var yn=0,In={next:function(){return{done:!!yn++}},return:function(){Mn=!0}};In[vn]=function(){return this},Array.from(In,(function(){throw 2}))}catch(_M){}var Tn=function(e,t){if(!t&&!Mn)return!1;var n=!1;try{var o={};o[vn]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(_M){}return n},Sn=!Tn((function(e){Array.from(e)}));vt({target:\"Array\",stat:!0,forced:Sn},{from:mn});var Dn,En,Cn,An=function(e){return function(t,n){var o,r,a=Mt(V(t)),s=Ye(n),i=a.length;return s<0||s>=i?e?\"\":void 0:(o=a.charCodeAt(s))<55296||o>56319||s+1===i||(r=a.charCodeAt(s+1))<56320||r>57343?e?a.charAt(s):o:e?a.slice(s,s+2):r-56320+(o-55296<<10)+65536}},kn={codeAt:An(!1),charAt:An(!0)},Nn=!L((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),On=Pe(\"IE_PROTO\"),Ln=Object.prototype,Rn=Nn?Object.getPrototypeOf:function(e){return e=re(e),se(e,On)?e[On]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ln:null},bn=ge(\"iterator\"),wn=!1;[].keys&&(\"next\"in(Cn=[].keys())?(En=Rn(Rn(Cn)))!==Object.prototype&&(Dn=En):wn=!0),(null==Dn||L((function(){var e={};return Dn[bn].call(e)!==e})))&&(Dn={}),se(Dn,bn)||Ce(Dn,bn,(function(){return this}));var Pn={IteratorPrototype:Dn,BUGGY_SAFARI_ITERATORS:wn},Gn=Ee.f,Un=ge(\"toStringTag\"),Fn=function(e,t,n){e&&!se(e=n?e:e.prototype,Un)&&Gn(e,Un,{configurable:!0,value:t})},qn=Pn.IteratorPrototype,xn=function(){return this},Vn=function(e,t,n){var o=t+\" Iterator\";return e.prototype=qt(qn,{next:G(1,n)}),Fn(e,o,!1),rn[o]=xn,e},Kn=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set).call(n,[]),t=n instanceof Array}catch(_M){}return function(n,o){return Se(n),function(e){if(!B(e)&&null!==e)throw TypeError(\"Can\\'t set \"+String(e)+\" as a prototype\")}(o),t?e.call(n,o):n.__proto__=o,n}}():void 0),Bn=Pn.IteratorPrototype,Hn=Pn.BUGGY_SAFARI_ITERATORS,jn=ge(\"iterator\"),$n=function(){return this},Yn=function(e,t,n,o,r,a,s){Vn(n,t,o);var i,u,c,l=function(e){if(e===r&&f)return f;if(!Hn&&e in g)return g[e];switch(e){case\"keys\":case\"values\":case\"entries\":return function(){return new n(this,e)}}return function(){return new n(this)}},p=t+\" Iterator\",d=!1,g=e.prototype,h=g[jn]||g[\"@@iterator\"]||r&&g[r],f=!Hn&&h||l(r),_=\"Array\"==t&&g.entries||h;if(_&&(i=Rn(_.call(new e)),Bn!==Object.prototype&&i.next&&(Rn(i)!==Bn&&(Kn?Kn(i,Bn):\"function\"!=typeof i[jn]&&Ce(i,jn,$n)),Fn(i,p,!0))),\"values\"==r&&h&&\"values\"!==h.name&&(d=!0,f=function(){return h.call(this)}),g[jn]!==f&&Ce(g,jn,f),rn[t]=f,r)if(u={values:l(\"values\"),keys:a?f:l(\"keys\"),entries:l(\"entries\")},s)for(c in u)(Hn||d||!(c in g))&&He(g,c,u[c]);else vt({target:t,proto:!0,forced:Hn||d},u);return u},zn=kn.charAt,Wn=Be.set,Jn=Be.getterFor(\"String Iterator\");Yn(String,\"String\",(function(e){Wn(this,{type:\"String Iterator\",string:Mt(e),index:0})}),(function(){var e,t=Jn(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=zn(n,o),t.index+=e.length,{value:e,done:!1})}));var Xn=ge(\"species\"),Qn=function(e){return X>=51||!L((function(){var t=[];return(t.constructor={})[Xn]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Zn=ge(\"isConcatSpreadable\"),eo=X>=51||!L((function(){var e=[];return e[Zn]=!1,e.concat()[0]!==e})),to=Qn(\"concat\"),no=function(e){if(!B(e))return!1;var t=e[Zn];return void 0!==t?!!t:Kt(e)};vt({target:\"Array\",proto:!0,forced:!eo||!to},{concat:function(e){var t,n,o,r,a,s=re(this),i=Ht(s,0),u=0;for(t=-1,o=arguments.length;t<o;t++)if(no(a=-1===t?s:arguments[t])){if(u+(r=We(a.length))>9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");for(n=0;n<r;n++,u++)n in a&&cn(i,u,a[n])}else{if(u>=9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");cn(i,u++,a)}return i.length=u,i}});var oo={SDK_READY:\"sdkStateReady\",SDK_NOT_READY:\"sdkStateNotReady\",SDK_DESTROY:\"sdkDestroy\",MESSAGE_RECEIVED:\"onMessageReceived\",MESSAGE_MODIFIED:\"onMessageModified\",MESSAGE_REVOKED:\"onMessageRevoked\",MESSAGE_READ_BY_PEER:\"onMessageReadByPeer\",CONVERSATION_LIST_UPDATED:\"onConversationListUpdated\",GROUP_LIST_UPDATED:\"onGroupListUpdated\",GROUP_SYSTEM_NOTICE_RECEIVED:\"receiveGroupSystemNotice\",GROUP_ATTRIBUTES_UPDATED:\"groupAttributesUpdated\",PROFILE_UPDATED:\"onProfileUpdated\",BLACKLIST_UPDATED:\"blacklistUpdated\",FRIEND_LIST_UPDATED:\"onFriendListUpdated\",FRIEND_GROUP_LIST_UPDATED:\"onFriendGroupListUpdated\",FRIEND_APPLICATION_LIST_UPDATED:\"onFriendApplicationListUpdated\",KICKED_OUT:\"kickedOut\",ERROR:\"error\",NET_STATE_CHANGE:\"netStateChange\",SDK_RELOAD:\"sdkReload\"},ro={MSG_TEXT:\"TIMTextElem\",MSG_IMAGE:\"TIMImageElem\",MSG_SOUND:\"TIMSoundElem\",MSG_AUDIO:\"TIMSoundElem\",MSG_FILE:\"TIMFileElem\",MSG_FACE:\"TIMFaceElem\",MSG_VIDEO:\"TIMVideoFileElem\",MSG_GEO:\"TIMLocationElem\",MSG_GRP_TIP:\"TIMGroupTipElem\",MSG_GRP_SYS_NOTICE:\"TIMGroupSystemNoticeElem\",MSG_CUSTOM:\"TIMCustomElem\",MSG_MERGER:\"TIMRelayElem\",MSG_PRIORITY_HIGH:\"High\",MSG_PRIORITY_NORMAL:\"Normal\",MSG_PRIORITY_LOW:\"Low\",MSG_PRIORITY_LOWEST:\"Lowest\",CONV_C2C:\"C2C\",CONV_GROUP:\"GROUP\",CONV_SYSTEM:\"@TIM#SYSTEM\",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,GRP_PRIVATE:\"Private\",GRP_WORK:\"Private\",GRP_PUBLIC:\"Public\",GRP_CHATROOM:\"ChatRoom\",GRP_MEETING:\"ChatRoom\",GRP_AVCHATROOM:\"AVChatRoom\",GRP_MBR_ROLE_OWNER:\"Owner\",GRP_MBR_ROLE_ADMIN:\"Admin\",GRP_MBR_ROLE_MEMBER:\"Member\",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,MSG_REMIND_ACPT_AND_NOTE:\"AcceptAndNotify\",MSG_REMIND_ACPT_NOT_NOTE:\"AcceptNotNotify\",MSG_REMIND_DISCARD:\"Discard\",GENDER_UNKNOWN:\"Gender_Type_Unknown\",GENDER_FEMALE:\"Gender_Type_Female\",GENDER_MALE:\"Gender_Type_Male\",KICKED_OUT_MULT_ACCOUNT:\"multipleAccount\",KICKED_OUT_MULT_DEVICE:\"multipleDevice\",KICKED_OUT_USERSIG_EXPIRED:\"userSigExpired\",ALLOW_TYPE_ALLOW_ANY:\"AllowType_Type_AllowAny\",ALLOW_TYPE_NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_TYPE_DENY_ANY:\"AllowType_Type_DenyAny\",FORBID_TYPE_NONE:\"AdminForbid_Type_None\",FORBID_TYPE_SEND_OUT:\"AdminForbid_Type_SendOut\",JOIN_OPTIONS_FREE_ACCESS:\"FreeAccess\",JOIN_OPTIONS_NEED_PERMISSION:\"NeedPermission\",JOIN_OPTIONS_DISABLE_APPLY:\"DisableApply\",JOIN_STATUS_SUCCESS:\"JoinedSuccess\",JOIN_STATUS_ALREADY_IN_GROUP:\"AlreadyInGroup\",JOIN_STATUS_WAIT_APPROVAL:\"WaitAdminApproval\",GRP_PROFILE_OWNER_ID:\"ownerID\",GRP_PROFILE_CREATE_TIME:\"createTime\",GRP_PROFILE_LAST_INFO_TIME:\"lastInfoTime\",GRP_PROFILE_MEMBER_NUM:\"memberNum\",GRP_PROFILE_MAX_MEMBER_NUM:\"maxMemberNum\",GRP_PROFILE_JOIN_OPTION:\"joinOption\",GRP_PROFILE_INTRODUCTION:\"introduction\",GRP_PROFILE_NOTIFICATION:\"notification\",GRP_PROFILE_MUTE_ALL_MBRS:\"muteAllMembers\",SNS_ADD_TYPE_SINGLE:\"Add_Type_Single\",SNS_ADD_TYPE_BOTH:\"Add_Type_Both\",SNS_DELETE_TYPE_SINGLE:\"Delete_Type_Single\",SNS_DELETE_TYPE_BOTH:\"Delete_Type_Both\",SNS_APPLICATION_TYPE_BOTH:\"Pendency_Type_Both\",SNS_APPLICATION_SENT_TO_ME:\"Pendency_Type_ComeIn\",SNS_APPLICATION_SENT_BY_ME:\"Pendency_Type_SendOut\",SNS_APPLICATION_AGREE:\"Response_Action_Agree\",SNS_APPLICATION_AGREE_AND_ADD:\"Response_Action_AgreeAndAdd\",SNS_CHECK_TYPE_BOTH:\"CheckResult_Type_Both\",SNS_CHECK_TYPE_SINGLE:\"CheckResult_Type_Single\",SNS_TYPE_NO_RELATION:\"CheckResult_Type_NoRelation\",SNS_TYPE_A_WITH_B:\"CheckResult_Type_AWithB\",SNS_TYPE_B_WITH_A:\"CheckResult_Type_BWithA\",SNS_TYPE_BOTH_WAY:\"CheckResult_Type_BothWay\",NET_STATE_CONNECTED:\"connected\",NET_STATE_CONNECTING:\"connecting\",NET_STATE_DISCONNECTED:\"disconnected\",MSG_AT_ALL:\"__kImSDK_MesssageAtALL__\"},ao=[].slice,so={},io=function(e,t,n){if(!(t in so)){for(var o=[],r=0;r<t;r++)o[r]=\"a[\"+r+\"]\";so[t]=Function(\"C,a\",\"return new C(\"+o.join(\",\")+\")\")}return so[t](e,n)},uo=Function.bind||function(e){var t=xt(this),n=ao.call(arguments,1),o=function(){var r=n.concat(ao.call(arguments));return this instanceof o?io(t,r.length,r):t.apply(e,r)};return B(t.prototype)&&(o.prototype=t.prototype),o};vt({target:\"Function\",proto:!0},{bind:uo});var co=Yt.map,lo=Qn(\"map\");vt({target:\"Array\",proto:!0,forced:!lo},{map:function(e){return co(this,e,arguments.length>1?arguments[1]:void 0)}});var po=function(){function e(){o(this,e),this.cache=[],this.options=null}return a(e,[{key:\"use\",value:function(e){if(\"function\"!=typeof e)throw\"middleware must be a function\";return this.cache.push(e),this}},{key:\"next\",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:\"run\",value:function(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}]),e}(),go=Ee.f,ho=Function.prototype,fo=ho.toString,_o=/^\\\\s*function ([^ (]*)/;R&&!(\"name\"in ho)&&go(ho,\"name\",{configurable:!0,get:function(){try{return fo.call(this).match(_o)[1]}catch(_M){return\"\"}}});var mo=C((function(e,t){var n,o,r,a,s,i,u,c,l,p,d,g,h,f,_,m,v,M;e.exports=(n=\"function\"==typeof Promise,o=\"object\"==typeof self?self:E,r=\"undefined\"!=typeof Symbol,a=\"undefined\"!=typeof Map,s=\"undefined\"!=typeof Set,i=\"undefined\"!=typeof WeakMap,u=\"undefined\"!=typeof WeakSet,c=\"undefined\"!=typeof DataView,l=r&&void 0!==Symbol.iterator,p=r&&void 0!==Symbol.toStringTag,d=s&&\"function\"==typeof Set.prototype.entries,g=a&&\"function\"==typeof Map.prototype.entries,h=d&&Object.getPrototypeOf((new Set).entries()),f=g&&Object.getPrototypeOf((new Map).entries()),_=l&&\"function\"==typeof Array.prototype[Symbol.iterator],m=_&&Object.getPrototypeOf([][Symbol.iterator]()),v=l&&\"function\"==typeof String.prototype[Symbol.iterator],M=v&&Object.getPrototypeOf(\"\"[Symbol.iterator]()),function(e){var t=typeof e;if(\"object\"!==t)return t;if(null===e)return\"null\";if(e===o)return\"global\";if(Array.isArray(e)&&(!1===p||!(Symbol.toStringTag in e)))return\"Array\";if(\"object\"==typeof window&&null!==window){if(\"object\"==typeof window.location&&e===window.location)return\"Location\";if(\"object\"==typeof window.document&&e===window.document)return\"Document\";if(\"object\"==typeof window.navigator){if(\"object\"==typeof window.navigator.mimeTypes&&e===window.navigator.mimeTypes)return\"MimeTypeArray\";if(\"object\"==typeof window.navigator.plugins&&e===window.navigator.plugins)return\"PluginArray\"}if((\"function\"==typeof window.HTMLElement||\"object\"==typeof window.HTMLElement)&&e instanceof window.HTMLElement){if(\"BLOCKQUOTE\"===e.tagName)return\"HTMLQuoteElement\";if(\"TD\"===e.tagName)return\"HTMLTableDataCellElement\";if(\"TH\"===e.tagName)return\"HTMLTableHeaderCellElement\"}}var r=p&&e[Symbol.toStringTag];if(\"string\"==typeof r)return r;var l=Object.getPrototypeOf(e);return l===RegExp.prototype?\"RegExp\":l===Date.prototype?\"Date\":n&&l===Promise.prototype?\"Promise\":s&&l===Set.prototype?\"Set\":a&&l===Map.prototype?\"Map\":u&&l===WeakSet.prototype?\"WeakSet\":i&&l===WeakMap.prototype?\"WeakMap\":c&&l===DataView.prototype?\"DataView\":a&&l===f?\"Map Iterator\":s&&l===h?\"Set Iterator\":_&&l===m?\"Array Iterator\":v&&l===M?\"String Iterator\":null===l?\"Object\":Object.prototype.toString.call(e).slice(8,-1)})}));vt({target:\"Array\",stat:!0},{isArray:Kt});var vo=function(e,t,n){var o,r;return Kn&&\"function\"==typeof(o=t.constructor)&&o!==n&&B(r=o.prototype)&&r!==n.prototype&&Kn(e,r),e},Mo=st.f,yo=Te.f,Io=Ee.f,To=Et.trim,So=O.Number,Do=So.prototype,Eo=\"Number\"==F(qt(Do)),Co=function(e){if(ee(e))throw TypeError(\"Cannot convert a Symbol value to a number\");var t,n,o,r,a,s,i,u,c=fe(e,\"number\");if(\"string\"==typeof c&&c.length>2)if(43===(t=(c=To(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+c}for(s=(a=c.slice(2)).length,i=0;i<s;i++)if((u=a.charCodeAt(i))<48||u>r)return NaN;return parseInt(a,o)}return+c};if(_t(\"Number\",!So(\" 0o1\")||!So(\"0b1\")||So(\"+0x1\"))){for(var Ao,ko=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof ko&&(Eo?L((function(){Do.valueOf.call(n)})):\"Number\"!=F(n))?vo(new So(Co(t)),n,ko):Co(t)},No=R?Mo(So):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range\".split(\",\"),Oo=0;No.length>Oo;Oo++)se(So,Ao=No[Oo])&&!se(ko,Ao)&&Io(ko,Ao,yo(So,Ao));ko.prototype=Do,Do.constructor=ko,He(O,\"Number\",ko)}var Lo=L((function(){Rn(1)}));vt({target:\"Object\",stat:!0,forced:Lo,sham:!Nn},{getPrototypeOf:function(e){return Rn(re(e))}});var Ro=Date.prototype,bo=Ro.toString,wo=Ro.getTime;\"Invalid Date\"!=String(new Date(NaN))&&He(Ro,\"toString\",(function(){var e=wo.call(this);return e==e?bo.call(this):\"Invalid Date\"}));var Po=pn?{}.toString:function(){return\"[object \"+hn(this)+\"]\"};pn||He(Object.prototype,\"toString\",Po,{unsafe:!0});var Go=function(){var e=Se(this),t=\"\";return e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),e.dotAll&&(t+=\"s\"),e.unicode&&(t+=\"u\"),e.sticky&&(t+=\"y\"),t},Uo=RegExp.prototype,Fo=Uo.toString,qo=L((function(){return\"/a/b\"!=Fo.call({source:\"a\",flags:\"b\"})})),xo=\"toString\"!=Fo.name;(qo||xo)&&He(RegExp.prototype,\"toString\",(function(){var e=Se(this),t=Mt(e.source),n=e.flags;return\"/\"+t+\"/\"+Mt(void 0===n&&e instanceof RegExp&&!(\"flags\"in Uo)?Go.call(e):n)}),{unsafe:!0});var Vo,Ko,Bo=function(e,t){return RegExp(e,t)},Ho={UNSUPPORTED_Y:L((function(){var e=Bo(\"a\",\"y\");return e.lastIndex=2,null!=e.exec(\"abcd\")})),BROKEN_CARET:L((function(){var e=Bo(\"^r\",\"gy\");return e.lastIndex=2,null!=e.exec(\"str\")}))},jo=L((function(){var e=RegExp(\".\",\"string\".charAt(0));return!(e.dotAll&&e.exec(\"\\\\n\")&&\"s\"===e.flags)})),$o=L((function(){var e=RegExp(\"(?<a>b)\",\"string\".charAt(5));return\"b\"!==e.exec(\"b\").groups.a||\"bc\"!==\"b\".replace(e,\"$<a>c\")})),Yo=Be.get,zo=RegExp.prototype.exec,Wo=oe(\"native-string-replace\",String.prototype.replace),Jo=zo,Xo=(Vo=/a/,Ko=/b*/g,zo.call(Vo,\"a\"),zo.call(Ko,\"a\"),0!==Vo.lastIndex||0!==Ko.lastIndex),Qo=Ho.UNSUPPORTED_Y||Ho.BROKEN_CARET,Zo=void 0!==/()??/.exec(\"\")[1];(Xo||Zo||Qo||jo||$o)&&(Jo=function(e){var t,n,o,r,a,s,i,u=this,c=Yo(u),l=Mt(e),p=c.raw;if(p)return p.lastIndex=u.lastIndex,t=Jo.call(p,l),u.lastIndex=p.lastIndex,t;var d=c.groups,g=Qo&&u.sticky,h=Go.call(u),f=u.source,_=0,m=l;if(g&&(-1===(h=h.replace(\"y\",\"\")).indexOf(\"g\")&&(h+=\"g\"),m=l.slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&\"\\\\n\"!==l.charAt(u.lastIndex-1))&&(f=\"(?: \"+f+\")\",m=\" \"+m,_++),n=new RegExp(\"^(?:\"+f+\")\",h)),Zo&&(n=new RegExp(\"^\"+f+\"$(?!\\\\\\\\s)\",h)),Xo&&(o=u.lastIndex),r=zo.call(g?n:u,m),g?r?(r.input=r.input.slice(_),r[0]=r[0].slice(_),r.index=u.lastIndex,u.lastIndex+=r[0].length):u.lastIndex=0:Xo&&r&&(u.lastIndex=u.global?r.index+r[0].length:o),Zo&&r&&r.length>1&&Wo.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r&&d)for(r.groups=s=qt(null),a=0;a<d.length;a++)s[(i=d[a])[0]]=r[i[1]];return r});var er=Jo;vt({target:\"RegExp\",proto:!0,forced:/./.exec!==er},{exec:er});var tr=ge(\"species\"),nr=RegExp.prototype,or=function(e,t,n,o){var r=ge(e),a=!L((function(){var t={};return t[r]=function(){return 7},7!=\"\"[e](t)})),s=a&&!L((function(){var t=!1,n=/a/;return\"split\"===e&&((n={}).constructor={},n.constructor[tr]=function(){return n},n.flags=\"\",n[r]=/./[r]),n.exec=function(){return t=!0,null},n[r](\"\"),!t}));if(!a||!s||n){var i=/./[r],u=t(r,\"\"[e],(function(e,t,n,o,r){var s=t.exec;return s===er||s===nr.exec?a&&!r?{done:!0,value:i.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}));He(String.prototype,e,u[0]),He(nr,r,u[1])}o&&Ce(nr[r],\"sham\",!0)},rr=kn.charAt,ar=function(e,t,n){return t+(n?rr(e,t).length:1)},sr=function(e,t){var n=e.exec;if(\"function\"==typeof n){var o=n.call(e,t);if(\"object\"!=typeof o)throw TypeError(\"RegExp exec method returned something other than an Object or null\");return o}if(\"RegExp\"!==F(e))throw TypeError(\"RegExp#exec called on incompatible receiver\");return er.call(e,t)};or(\"match\",(function(e,t,n){return[function(t){var n=V(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,n):new RegExp(t)[e](Mt(n))},function(e){var o=Se(this),r=Mt(e),a=n(t,o,r);if(a.done)return a.value;if(!o.global)return sr(o,r);var s=o.unicode;o.lastIndex=0;for(var i,u=[],c=0;null!==(i=sr(o,r));){var l=Mt(i[0]);u[c]=l,\"\"===l&&(o.lastIndex=ar(r,We(o.lastIndex),s)),c++}return 0===c?null:u}]})),vt({target:\"Date\",stat:!0},{now:function(){return(new Date).getTime()}});var ir=ge(\"unscopables\"),ur=Array.prototype;null==ur[ir]&&Ee.f(ur,ir,{configurable:!0,value:qt(null)});var cr=function(e){ur[ir][e]=!0},lr=et.includes;vt({target:\"Array\",proto:!0},{includes:function(e){return lr(this,e,arguments.length>1?arguments[1]:void 0)}}),cr(\"includes\");var pr=ge(\"match\"),dr=function(e){var t;return B(e)&&(void 0!==(t=e[pr])?!!t:\"RegExp\"==F(e))},gr=function(e){if(dr(e))throw TypeError(\"The method doesn\\'t accept regular expressions\");return e},hr=ge(\"match\"),fr=function(e){var t=/./;try{\"/./\"[e](t)}catch(n){try{return t[hr]=!1,\"/./\"[e](t)}catch(o){}}return!1};vt({target:\"String\",proto:!0,forced:!fr(\"includes\")},{includes:function(e){return!!~Mt(V(this)).indexOf(Mt(gr(e)),arguments.length>1?arguments[1]:void 0)}});var _r=function(e){var t=Mt(V(this)),n=\"\",o=Ye(e);if(o<0||Infinity==o)throw RangeError(\"Wrong number of repetitions\");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n},mr=Math.ceil,vr=function(e){return function(t,n,o){var r,a,s=Mt(V(t)),i=s.length,u=void 0===o?\" \":Mt(o),c=We(n);return c<=i||\"\"==u?s:((a=_r.call(u,mr((r=c-i)/u.length))).length>r&&(a=a.slice(0,r)),e?s+a:a+s)}},Mr={start:vr(!1),end:vr(!0)}.start,yr=Math.abs,Ir=Date.prototype,Tr=Ir.getTime,Sr=Ir.toISOString,Dr=L((function(){return\"0385-07-25T07:06:39.999Z\"!=Sr.call(new Date(-50000000000001))}))||!L((function(){Sr.call(new Date(NaN))}))?function(){if(!isFinite(Tr.call(this)))throw RangeError(\"Invalid time value\");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?\"-\":e>9999?\"+\":\"\";return n+Mr(yr(e),n?6:4,0)+\"-\"+Mr(this.getUTCMonth()+1,2,0)+\"-\"+Mr(this.getUTCDate(),2,0)+\"T\"+Mr(this.getUTCHours(),2,0)+\":\"+Mr(this.getUTCMinutes(),2,0)+\":\"+Mr(this.getUTCSeconds(),2,0)+\".\"+Mr(t,3,0)+\"Z\"}:Sr;vt({target:\"Date\",proto:!0,forced:Date.prototype.toISOString!==Dr},{toISOString:Dr});var Er=Math.floor,Cr=\"\".replace,Ar=/\\\\$([$&\\'`]|\\\\d{1,2}|<[^>]*>)/g,kr=/\\\\$([$&\\'`]|\\\\d{1,2})/g,Nr=function(e,t,n,o,r,a){var s=n+e.length,i=o.length,u=kr;return void 0!==r&&(r=re(r),u=Ar),Cr.call(a,u,(function(a,u){var c;switch(u.charAt(0)){case\"$\":return\"$\";case\"&\":return e;case\"`\":return t.slice(0,n);case\"\\'\":return t.slice(s);case\"<\":c=r[u.slice(1,-1)];break;default:var l=+u;if(0===l)return a;if(l>i){var p=Er(l/10);return 0===p?a:p<=i?void 0===o[p-1]?u.charAt(1):o[p-1]+u.charAt(1):a}c=o[l-1]}return void 0===c?\"\":c}))},Or=ge(\"replace\"),Lr=Math.max,Rr=Math.min,br=\"$0\"===\"a\".replace(/./,\"$0\"),wr=!!/./[Or]&&\"\"===/./[Or](\"a\",\"$0\");or(\"replace\",(function(e,t,n){var o=wr?\"$\":\"$0\";return[function(e,n){var o=V(this),r=null==e?void 0:e[Or];return void 0!==r?r.call(e,o,n):t.call(Mt(o),e,n)},function(e,r){var a=Se(this),s=Mt(e);if(\"string\"==typeof r&&-1===r.indexOf(o)&&-1===r.indexOf(\"$<\")){var i=n(t,a,s,r);if(i.done)return i.value}var u=\"function\"==typeof r;u||(r=Mt(r));var c=a.global;if(c){var l=a.unicode;a.lastIndex=0}for(var p=[];;){var d=sr(a,s);if(null===d)break;if(p.push(d),!c)break;\"\"===Mt(d[0])&&(a.lastIndex=ar(s,We(a.lastIndex),l))}for(var g,h=\"\",f=0,_=0;_<p.length;_++){d=p[_];for(var m=Mt(d[0]),v=Lr(Rr(Ye(d.index),s.length),0),M=[],y=1;y<d.length;y++)M.push(void 0===(g=d[y])?g:String(g));var I=d.groups;if(u){var T=[m].concat(M,v,s);void 0!==I&&T.push(I);var S=Mt(r.apply(void 0,T))}else S=Nr(m,s,v,M,I,r);v>=f&&(h+=s.slice(f,v)+S,f=v+m.length)}return h+s.slice(f)}]}),!!L((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:\"7\"},e},\"7\"!==\"\".replace(e,\"$<a>\")}))||!br||wr);var Pr=Be.set,Gr=Be.getterFor(\"Array Iterator\"),Ur=Yn(Array,\"Array\",(function(e,t){Pr(this,{type:\"Array Iterator\",target:K(e),index:0,kind:t})}),(function(){var e=Gr(this),t=e.target,n=e.kind,o=e.index++;return!t||o>=t.length?(e.target=void 0,{value:void 0,done:!0}):\"keys\"==n?{value:o,done:!1}:\"values\"==n?{value:t[o],done:!1}:{value:[o,t[o]],done:!1}}),\"values\");rn.Arguments=rn.Array,cr(\"keys\"),cr(\"values\"),cr(\"entries\");var Fr=ge(\"iterator\"),qr=ge(\"toStringTag\"),xr=Ur.values;for(var Vr in Xt){var Kr=O[Vr],Br=Kr&&Kr.prototype;if(Br){if(Br[Fr]!==xr)try{Ce(Br,Fr,xr)}catch(_M){Br[Fr]=xr}if(Br[qr]||Ce(Br,qr,Vr),Xt[Vr])for(var Hr in Ur)if(Br[Hr]!==Ur[Hr])try{Ce(Br,Hr,Ur[Hr])}catch(_M){Br[Hr]=Ur[Hr]}}}var jr=Qn(\"slice\"),$r=ge(\"species\"),Yr=[].slice,zr=Math.max;vt({target:\"Array\",proto:!0,forced:!jr},{slice:function(e,t){var n,o,r,a=K(this),s=We(a.length),i=Qe(e,s),u=Qe(void 0===t?s:t,s);if(Kt(a)&&(\"function\"!=typeof(n=a.constructor)||n!==Array&&!Kt(n.prototype)?B(n)&&null===(n=n[$r])&&(n=void 0):n=void 0,n===Array||void 0===n))return Yr.call(a,i,u);for(o=new(void 0===n?Array:n)(zr(u-i,0)),r=0;i<u;i++,r++)i in a&&cn(o,r,a[i]);return o.length=r,o}});var Wr=[].join,Jr=x!=Object,Xr=zt(\"join\",\",\");vt({target:\"Array\",proto:!0,forced:Jr||!Xr},{join:function(e){return Wr.call(K(this),void 0===e?\",\":e)}});var Qr=et.indexOf,Zr=[].indexOf,ea=!!Zr&&1/[1].indexOf(1,-0)<0,ta=zt(\"indexOf\");vt({target:\"Array\",proto:!0,forced:ea||!ta},{indexOf:function(e){return ea?Zr.apply(this,arguments)||0:Qr(this,e,arguments.length>1?arguments[1]:void 0)}});var na=st.f,oa={}.toString,ra=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],aa={f:function(e){return ra&&\"[object Window]\"==oa.call(e)?function(e){try{return na(e)}catch(_M){return ra.slice()}}(e):na(K(e))}},sa=aa.f,ia=L((function(){return!Object.getOwnPropertyNames(1)}));vt({target:\"Object\",stat:!0,forced:ia},{getOwnPropertyNames:sa});var ua=Yt.find,ca=!0;\"find\"in[]&&Array(1).find((function(){ca=!1})),vt({target:\"Array\",proto:!0,forced:ca},{find:function(e){return ua(this,e,arguments.length>1?arguments[1]:void 0)}}),cr(\"find\");var la,pa,da,ga,ha=O.Promise,fa=function(e,t,n){for(var o in t)He(e,o,t[o],n);return e},_a=ge(\"species\"),ma=function(e){var t=j(e),n=Ee.f;R&&t&&!t[_a]&&n(t,_a,{configurable:!0,get:function(){return this}})},va=function(e,t,n){if(!(e instanceof t))throw TypeError(\"Incorrect \"+(n?n+\" \":\"\")+\"invocation\");return e},Ma=function(e,t){this.stopped=e,this.result=t},ya=function(e,t,n){var o,r,a,s,i,u,c,l=n&&n.that,p=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),g=!(!n||!n.INTERRUPTED),h=Vt(t,l,1+p+g),f=function(e){return o&&nn(o),new Ma(!0,e)},_=function(e){return p?(Se(e),g?h(e[0],e[1],f):h(e[0],e[1])):g?h(e,f):h(e)};if(d)o=e;else{if(\"function\"!=typeof(r=_n(e)))throw TypeError(\"Target is not iterable\");if(un(r)){for(a=0,s=We(e.length);s>a;a++)if((i=_(e[a]))&&i instanceof Ma)return i;return new Ma(!1)}o=r.call(e)}for(u=o.next;!(c=u.call(o)).done;){try{i=_(c.value)}catch(_M){throw nn(o),_M}if(\"object\"==typeof i&&i&&i instanceof Ma)return i}return new Ma(!1)},Ia=ge(\"species\"),Ta=function(e,t){var n,o=Se(e).constructor;return void 0===o||null==(n=Se(o)[Ia])?t:xt(n)},Sa=/(?:iphone|ipod|ipad).*applewebkit/i.test($),Da=\"process\"==F(O.process),Ea=O.setImmediate,Ca=O.clearImmediate,Aa=O.process,ka=O.MessageChannel,Na=O.Dispatch,Oa=0,La={};try{la=O.location}catch(_M){}var Ra=function(e){if(La.hasOwnProperty(e)){var t=La[e];delete La[e],t()}},ba=function(e){return function(){Ra(e)}},wa=function(e){Ra(e.data)},Pa=function(e){O.postMessage(String(e),la.protocol+\"//\"+la.host)};Ea&&Ca||(Ea=function(e){for(var t=[],n=arguments.length,o=1;n>o;)t.push(arguments[o++]);return La[++Oa]=function(){(\"function\"==typeof e?e:Function(e)).apply(void 0,t)},pa(Oa),Oa},Ca=function(e){delete La[e]},Da?pa=function(e){Aa.nextTick(ba(e))}:Na&&Na.now?pa=function(e){Na.now(ba(e))}:ka&&!Sa?(ga=(da=new ka).port2,da.port1.onmessage=wa,pa=Vt(ga.postMessage,ga,1)):O.addEventListener&&\"function\"==typeof postMessage&&!O.importScripts&&la&&\"file:\"!==la.protocol&&!L(Pa)?(pa=Pa,O.addEventListener(\"message\",wa,!1)):pa=\"onreadystatechange\"in Me(\"script\")?function(e){bt.appendChild(Me(\"script\")).onreadystatechange=function(){bt.removeChild(this),Ra(e)}}:function(e){setTimeout(ba(e),0)});var Ga,Ua,Fa,qa,xa,Va,Ka,Ba,Ha={set:Ea,clear:Ca},ja=/iphone|ipod|ipad/i.test($)&&void 0!==O.Pebble,$a=/web0s(?!.*chrome)/i.test($),Ya=Te.f,za=Ha.set,Wa=O.MutationObserver||O.WebKitMutationObserver,Ja=O.document,Xa=O.process,Qa=O.Promise,Za=Ya(O,\"queueMicrotask\"),es=Za&&Za.value;es||(Ga=function(){var e,t;for(Da&&(e=Xa.domain)&&e.exit();Ua;){t=Ua.fn,Ua=Ua.next;try{t()}catch(_M){throw Ua?qa():Fa=void 0,_M}}Fa=void 0,e&&e.enter()},Sa||Da||$a||!Wa||!Ja?!ja&&Qa&&Qa.resolve?((Ka=Qa.resolve(void 0)).constructor=Qa,Ba=Ka.then,qa=function(){Ba.call(Ka,Ga)}):qa=Da?function(){Xa.nextTick(Ga)}:function(){za.call(O,Ga)}:(xa=!0,Va=Ja.createTextNode(\"\"),new Wa(Ga).observe(Va,{characterData:!0}),qa=function(){Va.data=xa=!xa}));var ts,ns,os,rs,as=es||function(e){var t={fn:e,next:void 0};Fa&&(Fa.next=t),Ua||(Ua=t,qa()),Fa=t},ss=function(e){var t,n;this.promise=new e((function(e,o){if(void 0!==t||void 0!==n)throw TypeError(\"Bad Promise constructor\");t=e,n=o})),this.resolve=xt(t),this.reject=xt(n)},is={f:function(e){return new ss(e)}},us=function(e,t){if(Se(e),B(t)&&t.constructor===e)return t;var n=is.f(e);return(0,n.resolve)(t),n.promise},cs=function(e){try{return{error:!1,value:e()}}catch(_M){return{error:!0,value:_M}}},ls=\"object\"==typeof window,ps=Ha.set,ds=ge(\"species\"),gs=\"Promise\",hs=Be.get,fs=Be.set,_s=Be.getterFor(gs),ms=ha&&ha.prototype,vs=ha,Ms=ms,ys=O.TypeError,Is=O.document,Ts=O.process,Ss=is.f,Ds=Ss,Es=!!(Is&&Is.createEvent&&O.dispatchEvent),Cs=\"function\"==typeof PromiseRejectionEvent,As=!1,ks=_t(gs,(function(){var e=Le(vs),t=e!==String(vs);if(!t&&66===X)return!0;if(X>=51&&/native code/.test(e))return!1;var n=new vs((function(e){e(1)})),o=function(e){e((function(){}),(function(){}))};return(n.constructor={})[ds]=o,!(As=n.then((function(){}))instanceof o)||!t&&ls&&!Cs})),Ns=ks||!Tn((function(e){vs.all(e).catch((function(){}))})),Os=function(e){var t;return!(!B(e)||\"function\"!=typeof(t=e.then))&&t},Ls=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;as((function(){for(var o=e.value,r=1==e.state,a=0;n.length>a;){var s,i,u,c=n[a++],l=r?c.ok:c.fail,p=c.resolve,d=c.reject,g=c.domain;try{l?(r||(2===e.rejection&&Ps(e),e.rejection=1),!0===l?s=o:(g&&g.enter(),s=l(o),g&&(g.exit(),u=!0)),s===c.promise?d(ys(\"Promise-chain cycle\")):(i=Os(s))?i.call(s,p,d):p(s)):d(o)}catch(_M){g&&!u&&g.exit(),d(_M)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&bs(e)}))}},Rs=function(e,t,n){var o,r;Es?((o=Is.createEvent(\"Event\")).promise=t,o.reason=n,o.initEvent(e,!1,!0),O.dispatchEvent(o)):o={promise:t,reason:n},!Cs&&(r=O[\"on\"+e])?r(o):\"unhandledrejection\"===e&&function(e,t){var n=O.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}(\"Unhandled promise rejection\",n)},bs=function(e){ps.call(O,(function(){var t,n=e.facade,o=e.value;if(ws(e)&&(t=cs((function(){Da?Ts.emit(\"unhandledRejection\",o,n):Rs(\"unhandledrejection\",n,o)})),e.rejection=Da||ws(e)?2:1,t.error))throw t.value}))},ws=function(e){return 1!==e.rejection&&!e.parent},Ps=function(e){ps.call(O,(function(){var t=e.facade;Da?Ts.emit(\"rejectionHandled\",t):Rs(\"rejectionhandled\",t,e.value)}))},Gs=function(e,t,n){return function(o){e(t,o,n)}},Us=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Ls(e,!0))},Fs=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw ys(\"Promise can\\'t be resolved itself\");var o=Os(t);o?as((function(){var n={done:!1};try{o.call(t,Gs(Fs,n,e),Gs(Us,n,e))}catch(_M){Us(n,_M,e)}})):(e.value=t,e.state=1,Ls(e,!1))}catch(_M){Us({done:!1},_M,e)}}};if(ks&&(Ms=(vs=function(e){va(this,vs,gs),xt(e),ts.call(this);var t=hs(this);try{e(Gs(Fs,t),Gs(Us,t))}catch(_M){Us(t,_M)}}).prototype,(ts=function(e){fs(this,{type:gs,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=fa(Ms,{then:function(e,t){var n=_s(this),o=Ss(Ta(this,vs));return o.ok=\"function\"!=typeof e||e,o.fail=\"function\"==typeof t&&t,o.domain=Da?Ts.domain:void 0,n.parent=!0,n.reactions.push(o),0!=n.state&&Ls(n,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),ns=function(){var e=new ts,t=hs(e);this.promise=e,this.resolve=Gs(Fs,t),this.reject=Gs(Us,t)},is.f=Ss=function(e){return e===vs||e===os?new ns(e):Ds(e)},\"function\"==typeof ha&&ms!==Object.prototype)){rs=ms.then,As||(He(ms,\"then\",(function(e,t){var n=this;return new vs((function(e,t){rs.call(n,e,t)})).then(e,t)}),{unsafe:!0}),He(ms,\"catch\",Ms.catch,{unsafe:!0}));try{delete ms.constructor}catch(_M){}Kn&&Kn(ms,Ms)}vt({global:!0,wrap:!0,forced:ks},{Promise:vs}),Fn(vs,gs,!1),ma(gs),os=j(gs),vt({target:gs,stat:!0,forced:ks},{reject:function(e){var t=Ss(this);return t.reject.call(void 0,e),t.promise}}),vt({target:gs,stat:!0,forced:ks},{resolve:function(e){return us(this,e)}}),vt({target:gs,stat:!0,forced:Ns},{all:function(e){var t=this,n=Ss(t),o=n.resolve,r=n.reject,a=cs((function(){var n=xt(t.resolve),a=[],s=0,i=1;ya(e,(function(e){var u=s++,c=!1;a.push(void 0),i++,n.call(t,e).then((function(e){c||(c=!0,a[u]=e,--i||o(a))}),r)})),--i||o(a)}));return a.error&&r(a.value),n.promise},race:function(e){var t=this,n=Ss(t),o=n.reject,r=cs((function(){var r=xt(t.resolve);ya(e,(function(e){r.call(t,e).then(n.resolve,o)}))}));return r.error&&o(r.value),n.promise}});var qs=kn.codeAt;vt({target:\"String\",proto:!0},{codePointAt:function(e){return qs(this,e)}});var xs=Et.trim,Vs=O.parseFloat,Ks=1/Vs(yt+\"-0\")!=-Infinity?function(e){var t=xs(Mt(e)),n=Vs(t);return 0===n&&\"-\"==t.charAt(0)?-0:n}:Vs;vt({global:!0,forced:parseFloat!=Ks},{parseFloat:Ks});var Bs={WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,UNI_NATIVE_APP:14},Hs=\"1.7.3\",js=537048168,$s=1,Ys=2,zs=3,Ws={HOST:{CURRENT:{DEFAULT:\"\",BACKUP:\"\"},TEST:{DEFAULT:\"wss://wss-dev.tim.qq.com\",BACKUP:\"wss://wss-dev.tim.qq.com\"},PRODUCTION:{DEFAULT:\"wss://wss.im.qcloud.com\",BACKUP:\"wss://wss.tim.qq.com\"},OVERSEA_PRODUCTION:{DEFAULT:\"wss://wss.im.qcloud.com\",BACKUP:\"wss://wss.im.qcloud.com\"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;e===$s?this.CURRENT=this.TEST:e===Ys?this.CURRENT=this.PRODUCTION:e===zs&&(this.CURRENT=this.OVERSEA_PRODUCTION)}},NAME:{OPEN_IM:\"openim\",GROUP:\"group_open_http_svc\",GROUP_ATTR:\"group_open_attr_http_svc\",FRIEND:\"sns\",PROFILE:\"profile\",RECENT_CONTACT:\"recentcontact\",PIC:\"openpic\",BIG_GROUP_NO_AUTH:\"group_open_http_noauth_svc\",BIG_GROUP_LONG_POLLING:\"group_open_long_polling_http_svc\",BIG_GROUP_LONG_POLLING_NO_AUTH:\"group_open_long_polling_http_noauth_svc\",IM_OPEN_STAT:\"imopenstat\",WEB_IM:\"webim\",IM_COS_SIGN:\"im_cos_sign_svr\",CUSTOM_UPLOAD:\"im_cos_msg\",HEARTBEAT:\"heartbeat\",IM_OPEN_PUSH:\"im_open_push\",IM_OPEN_STATUS:\"im_open_status\",IM_LONG_MESSAGE:\"im_long_msg\",CLOUD_CONTROL:\"im_sdk_config_mgr\"},CMD:{ACCESS_LAYER:\"accesslayer\",LOGIN:\"wslogin\",LOGOUT_LONG_POLL:\"longpollinglogout\",LOGOUT:\"wslogout\",HELLO:\"wshello\",PORTRAIT_GET:\"portrait_get_all\",PORTRAIT_SET:\"portrait_set\",GET_LONG_POLL_ID:\"getlongpollingid\",LONG_POLL:\"longpolling\",AVCHATROOM_LONG_POLL:\"get_msg\",ADD_FRIEND:\"friend_add\",UPDATE_FRIEND:\"friend_update\",GET_FRIEND_LIST:\"friend_get\",GET_FRIEND_PROFILE:\"friend_get_list\",DELETE_FRIEND:\"friend_delete\",CHECK_FRIEND:\"friend_check\",GET_FRIEND_GROUP_LIST:\"group_get\",RESPOND_FRIEND_APPLICATION:\"friend_response\",GET_FRIEND_APPLICATION_LIST:\"pendency_get\",DELETE_FRIEND_APPLICATION:\"pendency_delete\",REPORT_FRIEND_APPLICATION:\"pendency_report\",GET_GROUP_APPLICATION:\"get_pendency\",CREATE_FRIEND_GROUP:\"group_add\",DELETE_FRIEND_GROUP:\"group_delete\",UPDATE_FRIEND_GROUP:\"group_update\",GET_BLACKLIST:\"black_list_get\",ADD_BLACKLIST:\"black_list_add\",DELETE_BLACKLIST:\"black_list_delete\",CREATE_GROUP:\"create_group\",GET_JOINED_GROUPS:\"get_joined_group_list\",SET_GROUP_ATTRIBUTES:\"set_group_attr\",MODIFY_GROUP_ATTRIBUTES:\"modify_group_attr\",DELETE_GROUP_ATTRIBUTES:\"delete_group_attr\",CLEAR_GROUP_ATTRIBUTES:\"clear_group_attr\",GET_GROUP_ATTRIBUTES:\"get_group_attr\",SEND_MESSAGE:\"sendmsg\",REVOKE_C2C_MESSAGE:\"msgwithdraw\",DELETE_C2C_MESSAGE:\"delete_c2c_msg_ramble\",SEND_GROUP_MESSAGE:\"send_group_msg\",REVOKE_GROUP_MESSAGE:\"group_msg_recall\",DELETE_GROUP_MESSAGE:\"delete_group_ramble_msg_by_seq\",GET_GROUP_INFO:\"get_group_info\",GET_GROUP_MEMBER_INFO:\"get_specified_group_member_info\",GET_GROUP_MEMBER_LIST:\"get_group_member_info\",QUIT_GROUP:\"quit_group\",CHANGE_GROUP_OWNER:\"change_group_owner\",DESTROY_GROUP:\"destroy_group\",ADD_GROUP_MEMBER:\"add_group_member\",DELETE_GROUP_MEMBER:\"delete_group_member\",SEARCH_GROUP_BY_ID:\"get_group_public_info\",APPLY_JOIN_GROUP:\"apply_join_group\",HANDLE_APPLY_JOIN_GROUP:\"handle_apply_join_group\",HANDLE_GROUP_INVITATION:\"handle_invite_join_group\",MODIFY_GROUP_INFO:\"modify_group_base_info\",MODIFY_GROUP_MEMBER_INFO:\"modify_group_member_info\",DELETE_GROUP_SYSTEM_MESSAGE:\"deletemsg\",DELETE_GROUP_AT_TIPS:\"deletemsg\",GET_CONVERSATION_LIST:\"get\",PAGING_GET_CONVERSATION_LIST:\"page_get\",DELETE_CONVERSATION:\"delete\",PIN_CONVERSATION:\"top\",GET_MESSAGES:\"getmsg\",GET_C2C_ROAM_MESSAGES:\"getroammsg\",GET_GROUP_ROAM_MESSAGES:\"group_msg_get\",SET_C2C_MESSAGE_READ:\"msgreaded\",GET_PEER_READ_TIME:\"get_peer_read_time\",SET_GROUP_MESSAGE_READ:\"msg_read_report\",FILE_READ_AND_WRITE_AUTHKEY:\"authkey\",FILE_UPLOAD:\"pic_up\",COS_SIGN:\"cos\",COS_PRE_SIG:\"pre_sig\",TIM_WEB_REPORT_V2:\"tim_web_report_v2\",BIG_DATA_HALLWAY_AUTH_KEY:\"authkey\",GET_ONLINE_MEMBER_NUM:\"get_online_member_num\",ALIVE:\"alive\",MESSAGE_PUSH:\"msg_push\",MESSAGE_PUSH_ACK:\"ws_msg_push_ack\",STATUS_FORCEOFFLINE:\"stat_forceoffline\",DOWNLOAD_MERGER_MESSAGE:\"get_relay_json_msg\",UPLOAD_MERGER_MESSAGE:\"save_relay_json_msg\",FETCH_CLOUD_CONTROL_CONFIG:\"fetch_config\",PUSHED_CLOUD_CONTROL_CONFIG:\"push_configv2\"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:\"v4\",group_open_http_svc:\"v4\",sns:\"v4\",profile:\"v4\",recentcontact:\"v4\",openpic:\"v4\",group_open_http_noauth_svc:\"v4\",group_open_long_polling_http_svc:\"v4\",group_open_long_polling_http_noauth_svc:\"v4\",imopenstat:\"v4\",im_cos_sign_svr:\"v4\",im_cos_msg:\"v4\",webim:\"v4\",im_open_push:\"v4\",im_open_status:\"v4\"}};Ws.HOST.setCurrent(Ys);var Js,Xs,Qs,Zs=\"undefined\"!=typeof wx&&\"function\"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting),ei=\"undefined\"!=typeof qq&&\"function\"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),ti=\"undefined\"!=typeof tt&&\"function\"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),ni=\"undefined\"!=typeof swan&&\"function\"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),oi=\"undefined\"!=typeof my&&\"function\"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),ri=\"undefined\"!=typeof uni&&\"undefined\"==typeof window,ai=Zs||ei||ti||ni||oi||ri,si=(\"undefined\"!=typeof uni||\"undefined\"!=typeof window)&&!ai,ii=ei?qq:ti?tt:ni?swan:oi?my:Zs?wx:ri?uni:{},ui=(Js=\"WEB\",Ti?Js=\"WEB\":ei?Js=\"QQ_MP\":ti?Js=\"TT_MP\":ni?Js=\"BAIDU_MP\":oi?Js=\"ALI_MP\":Zs?Js=\"WX_MP\":ri&&(Js=\"UNI_NATIVE_APP\"),Bs[Js]),ci=si&&window&&window.navigator&&window.navigator.userAgent||\"\",li=/AppleWebKit\\\\/([\\\\d.]+)/i.exec(ci),pi=(li&&parseFloat(li.pop()),/iPad/i.test(ci)),di=/iPhone/i.test(ci)&&!pi,gi=/iPod/i.test(ci),hi=di||pi||gi,fi=(function(){var e=ci.match(/OS (\\\\d+)_/i);e&&e[1]&&e[1]}(),/Android/i.test(ci)),_i=function(){var e=ci.match(/Android (\\\\d+)(?:\\\\.(\\\\d+))?(?:\\\\.(\\\\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+\".\"+e[2]):t||null}(),mi=(fi&&/webkit/i.test(ci),/Firefox/i.test(ci),/Edge/i.test(ci)),vi=!mi&&/Chrome/i.test(ci),Mi=(function(){var e=ci.match(/Chrome\\\\/(\\\\d+)/);e&&e[1]&&parseFloat(e[1])}(),/MSIE/.test(ci)),yi=(/MSIE\\\\s8\\\\.0/.test(ci),function(){var e=/MSIE\\\\s(\\\\d+)\\\\.\\\\d/.exec(ci),t=e&&parseFloat(e[1]);return!t&&/Trident\\\\/7.0/i.test(ci)&&/rv:11.0/.test(ci)&&(t=11),t}()),Ii=(/Safari/i.test(ci),/TBS\\\\/\\\\d+/i.test(ci)),Ti=(function(){var e=ci.match(/TBS\\\\/(\\\\d+)/i);if(e&&e[1])e[1]}(),!Ii&&/MQQBrowser\\\\/\\\\d+/i.test(ci),!Ii&&/ QQBrowser\\\\/\\\\d+/i.test(ci),/(micromessenger|webbrowser)/i.test(ci)),Si=/Windows/i.test(ci),Di=/MAC OS X/i.test(ci),Ei=(/MicroMessenger/i.test(ci),!L((function(){return Object.isExtensible(Object.preventExtensions({}))}))),Ci=C((function(e){var t=Ee.f,n=!1,o=ce(\"meta\"),r=0,a=Object.isExtensible||function(){return!0},s=function(e){t(e,o,{value:{objectID:\"O\"+r++,weakData:{}}})},i=e.exports={enable:function(){i.enable=function(){},n=!0;var e=st.f,t=[].splice,r={};r[o]=1,e(r).length&&(st.f=function(n){for(var r=e(n),a=0,s=r.length;a<s;a++)if(r[a]===o){t.call(r,a,1);break}return r},vt({target:\"Object\",stat:!0,forced:!0},{getOwnPropertyNames:aa.f}))},fastKey:function(e,t){if(!B(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!se(e,o)){if(!a(e))return\"F\";if(!t)return\"E\";s(e)}return e[o].objectID},getWeakData:function(e,t){if(!se(e,o)){if(!a(e))return!0;if(!t)return!1;s(e)}return e[o].weakData},onFreeze:function(e){return Ei&&n&&a(e)&&!se(e,o)&&s(e),e}};Ge[o]=!0})),Ai=(Ci.enable,Ci.fastKey,Ci.getWeakData,Ci.onFreeze,Ee.f),ki=Ci.fastKey,Ni=Be.set,Oi=Be.getterFor,Li=(function(e,t,n){var o=-1!==e.indexOf(\"Map\"),r=-1!==e.indexOf(\"Weak\"),a=o?\"set\":\"add\",s=O[e],i=s&&s.prototype,u=s,c={},l=function(e){var t=i[e];He(i,e,\"add\"==e?function(e){return t.call(this,0===e?0:e),this}:\"delete\"==e?function(e){return!(r&&!B(e))&&t.call(this,0===e?0:e)}:\"get\"==e?function(e){return r&&!B(e)?void 0:t.call(this,0===e?0:e)}:\"has\"==e?function(e){return!(r&&!B(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(_t(e,\"function\"!=typeof s||!(r||i.forEach&&!L((function(){(new s).entries().next()})))))u=n.getConstructor(t,e,o,a),Ci.enable();else if(_t(e,!0)){var p=new u,d=p[a](r?{}:-0,1)!=p,g=L((function(){p.has(1)})),h=Tn((function(e){new s(e)})),f=!r&&L((function(){for(var e=new s,t=5;t--;)e[a](t,t);return!e.has(-0)}));h||((u=t((function(t,n){va(t,u,e);var r=vo(new s,t,u);return null!=n&&ya(n,r[a],{that:r,AS_ENTRIES:o}),r}))).prototype=i,i.constructor=u),(g||f)&&(l(\"delete\"),l(\"has\"),o&&l(\"get\")),(f||d)&&l(a),r&&i.clear&&delete i.clear}c[e]=u,vt({global:!0,forced:u!=s},c),Fn(u,e),r||n.setStrong(u,e,o)}(\"Map\",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,n,o){var r=e((function(e,a){va(e,r,t),Ni(e,{type:t,index:qt(null),first:void 0,last:void 0,size:0}),R||(e.size=0),null!=a&&ya(a,e[o],{that:e,AS_ENTRIES:n})})),a=Oi(t),s=function(e,t,n){var o,r,s=a(e),u=i(e,t);return u?u.value=n:(s.last=u={index:r=ki(t,!0),key:t,value:n,previous:o=s.last,next:void 0,removed:!1},s.first||(s.first=u),o&&(o.next=u),R?s.size++:e.size++,\"F\"!==r&&(s.index[r]=u)),e},i=function(e,t){var n,o=a(e),r=ki(t);if(\"F\"!==r)return o.index[r];for(n=o.first;n;n=n.next)if(n.key==t)return n};return fa(r.prototype,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,R?e.size=0:this.size=0},delete:function(e){var t=a(this),n=i(this,e);if(n){var o=n.next,r=n.previous;delete t.index[n.index],n.removed=!0,r&&(r.next=o),o&&(o.previous=r),t.first==n&&(t.first=o),t.last==n&&(t.last=r),R?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=a(this),o=Vt(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(o(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!i(this,e)}}),fa(r.prototype,n?{get:function(e){var t=i(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),R&&Ai(r.prototype,\"size\",{get:function(){return a(this).size}}),r},setStrong:function(e,t,n){var o=t+\" Iterator\",r=Oi(t),a=Oi(o);Yn(e,t,(function(e,t){Ni(this,{type:o,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?\"keys\"==t?{value:n.key,done:!1}:\"values\"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?\"entries\":\"values\",!n,!0),ma(t)}}),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{});Xs=\"undefined\"!=typeof console?console:void 0!==Li&&Li.console?Li.console:\"undefined\"!=typeof window&&window.console?window.console:{};for(var Ri=function(){},bi=[\"assert\",\"clear\",\"count\",\"debug\",\"dir\",\"dirxml\",\"error\",\"exception\",\"group\",\"groupCollapsed\",\"groupEnd\",\"info\",\"log\",\"markTimeline\",\"profile\",\"profileEnd\",\"table\",\"time\",\"timeEnd\",\"timeStamp\",\"trace\",\"warn\"],wi=bi.length;wi--;)Qs=bi[wi],console[Qs]||(Xs[Qs]=Ri);Xs.methods=bi;var Pi=Xs,Gi=0,Ui=function(){return(new Date).getTime()+Gi},Fi=function(){Gi=0},qi=0,xi=new Map;function Vi(){var e,t=((e=new Date).setTime(Ui()),e);return\"TIM \"+t.toLocaleTimeString(\"en-US\",{hour12:!1})+\".\"+function(e){var t;switch(e.toString().length){case 1:t=\"00\"+e;break;case 2:t=\"0\"+e;break;default:t=e}return t}(t.getMilliseconds())+\":\"}var Ki={arguments2String:function(e){var t;if(1===e.length)t=Vi()+e[0];else{t=Vi();for(var n=0,o=e.length;n<o;n++)Xi(e[n])?Zi(e[n])?t+=au(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=\" \"}return t},debug:function(){if(qi<=-1){var e=this.arguments2String(arguments);Pi.debug(e)}},log:function(){if(qi<=0){var e=this.arguments2String(arguments);Pi.log(e)}},info:function(){if(qi<=1){var e=this.arguments2String(arguments);Pi.info(e)}},warn:function(){if(qi<=2){var e=this.arguments2String(arguments);Pi.warn(e)}},error:function(){if(qi<=3){var e=this.arguments2String(arguments);Pi.error(e)}},time:function(e){xi.set(e,ou.now())},timeEnd:function(e){if(xi.has(e)){var t=ou.now()-xi.get(e);return xi.delete(e),t}return Pi.warn(\"未找到对应label: \".concat(e,\", 请在调用 logger.timeEnd 前，调用 logger.time\")),0},setLevel:function(e){e<4&&Pi.log(Vi()+\"set level from \"+qi+\" to \"+e),qi=e},getLevel:function(){return qi}},Bi=[\"url\"],Hi=function(e){return\"file\"===eu(e)},ji=function(e){return null!==e&&(\"number\"==typeof e&&!isNaN(e-0)||\"object\"===n(e)&&e.constructor===Number)},$i=function(e){return\"string\"==typeof e},Yi=function(e){return null!==e&&\"object\"===n(e)},zi=function(e){if(\"object\"!==n(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var o=t;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return t===o},Wi=function(e){return\"function\"==typeof Array.isArray?Array.isArray(e):\"array\"===eu(e)},Ji=function(e){return void 0===e},Xi=function(e){return Wi(e)||Yi(e)},Qi=function(e){return\"function\"==typeof e},Zi=function(e){return e instanceof Error},eu=function(e){return Object.prototype.toString.call(e).match(/^\\\\[object (.*)\\\\]$/)[1].toLowerCase()},tu=function(e){if(\"string\"!=typeof e)return!1;var t=e[0];return!/[^a-zA-Z0-9]/.test(t)},nu=0;Date.now||(Date.now=function(){return(new Date).getTime()});var ou={now:function(){0===nu&&(nu=Date.now()-1);var e=Date.now()-nu;return e>4294967295?(nu+=4294967295,Date.now()-nu):e},utc:function(){return Math.round(Date.now()/1e3)}},ru=function e(t,n,o,r){if(!Xi(t)||!Xi(n))return 0;for(var a,s=0,i=Object.keys(n),u=0,c=i.length;u<c;u++)if(a=i[u],!(Ji(n[a])||o&&o.includes(a)))if(Xi(t[a])&&Xi(n[a]))s+=e(t[a],n[a],o,r);else{if(r&&r.includes(n[a]))continue;t[a]!==n[a]&&(t[a]=n[a],s+=1)}return s},au=function(e){return JSON.stringify(e,[\"message\",\"code\"])},su=function(e){if(0===e.length)return 0;for(var t=0,n=0,o=\"undefined\"!=typeof document&&void 0!==document.characterSet?document.characterSet:\"UTF-8\";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:!1===o?3:2;return n},iu=function(e){var t=e||99999999;return Math.round(Math.random()*t)},uu=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",cu=uu.length,lu=function(e,t){for(var n in e)if(e[n]===t)return!0;return!1},pu={},du=function(){if(ai)return\"https:\";if(si&&\"undefined\"==typeof window)return\"https:\";var e=window.location.protocol;return[\"http:\",\"https:\"].indexOf(e)<0&&(e=\"http:\"),e},gu=function(e){return-1===e.indexOf(\"http://\")||-1===e.indexOf(\"https://\")?\"https://\"+e:e.replace(/https|http/,\"https\")},hu=function e(t){if(0===Object.getOwnPropertyNames(t).length)return Object.create(null);var o=Array.isArray(t)?[]:Object.create(null),r=\"\";for(var a in t)null!==t[a]?void 0!==t[a]?(r=n(t[a]),[\"string\",\"number\",\"function\",\"boolean\"].indexOf(r)>=0?o[a]=t[a]:o[a]=e(t[a])):o[a]=void 0:o[a]=null;return o};function fu(e,t){Wi(e)&&Wi(t)?t.forEach((function(t){var n=t.key,o=t.value,r=e.find((function(e){return e.key===n}));r?r.value=o:e.push({key:n,value:o})})):Ki.warn(\"updateCustomField target 或 source 不是数组，忽略此次更新。\")}var _u=function(e){return e===ro.GRP_PUBLIC},mu=function(e){return e===ro.GRP_AVCHATROOM},vu=function(e){return $i(e)&&e.slice(0,3)===ro.CONV_C2C},Mu=function(e){return $i(e)&&e.slice(0,5)===ro.CONV_GROUP},yu=function(e){return $i(e)&&e===ro.CONV_SYSTEM};function Iu(e,t){var n={};return Object.keys(e).forEach((function(o){n[o]=t(e[o],o)})),n}function Tu(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return\"\".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())}function Su(){var e=\"unknown\";if(Di&&(e=\"mac\"),Si&&(e=\"windows\"),hi&&(e=\"ios\"),fi&&(e=\"android\"),ai)try{var t=ii.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(_M){}return e}function Du(e){var t=e.originUrl,n=void 0===t?void 0:t,o=e.originWidth,r=e.originHeight,a=e.min,s=void 0===a?198:a,i=parseInt(o),u=parseInt(r),c={url:void 0,width:0,height:0};return(i<=u?i:u)<=s?(c.url=n,c.width=i,c.height=u):(u<=i?(c.width=Math.ceil(i*s/u),c.height=s):(c.width=s,c.height=Math.ceil(u*s/i)),c.url=\"\".concat(n,198===s?\"?imageView2/3/w/198/h/198\":\"?imageView2/3/w/720/h/720\")),Ji(n)?g(c,Bi):c}function Eu(e){var t=e[2];e[2]=e[1],e[1]=t;for(var n=0;n<e.length;n++)e[n].setType(n)}function Cu(e){var t=e.servcmd;return t.slice(t.indexOf(\".\")+1)}function Au(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function ku(e,t){return e.includes(t)}function Nu(e,t){return e.includes(t)}var Ou=Object.prototype.hasOwnProperty;function Lu(e){if(null==e)return!0;if(\"boolean\"==typeof e)return!1;if(\"number\"==typeof e)return 0===e;if(\"string\"==typeof e)return 0===e.length;if(\"function\"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return\"\"===e.message;if(zi(e)){for(var t in e)if(Ou.call(e,t))return!1;return!0}return!(\"map\"!==eu(e)&&!function(e){return\"set\"===eu(e)}(e)&&!Hi(e))&&0===e.size}function Ru(e,t,n){if(void 0===t)return!0;var o=!0;if(\"object\"===mo(t).toLowerCase())Object.keys(t).forEach((function(r){var a=1===e.length?e[0][r]:void 0;o=!!bu(a,t[r],n,r)&&o}));else if(\"array\"===mo(t).toLowerCase())for(var r=0;r<t.length;r++)o=!!bu(e[r],t[r],n,t[r].name)&&o;if(o)return o;throw new Error(\"Params validate failed.\")}function bu(e,t,n,o){if(void 0===t)return!0;var r=!0;return t.required&&Lu(e)&&(Pi.error(\"TIM [\".concat(n,\\'] Missing required params: \"\\').concat(o,\\'\".\\')),r=!1),Lu(e)||mo(e).toLowerCase()===t.type.toLowerCase()||(Pi.error(\"TIM [\".concat(n,\\'] Invalid params: type check failed for \"\\').concat(o,\\'\".Expected \\').concat(t.type,\".\")),r=!1),t.validator&&!t.validator(e)&&(Pi.error(\"TIM [\".concat(n,\"] Invalid params: custom validator check failed for params.\")),r=!1),r}var wu={f:ge},Pu=O,Gu=Ee.f,Uu=Yt.forEach,Fu=Pe(\"hidden\"),qu=ge(\"toPrimitive\"),xu=Be.set,Vu=Be.getterFor(\"Symbol\"),Ku=Object.prototype,Bu=O.Symbol,Hu=j(\"JSON\",\"stringify\"),ju=Te.f,$u=Ee.f,Yu=aa.f,zu=P.f,Wu=oe(\"symbols\"),Ju=oe(\"op-symbols\"),Xu=oe(\"string-to-symbol-registry\"),Qu=oe(\"symbol-to-string-registry\"),Zu=oe(\"wks\"),ec=O.QObject,tc=!ec||!ec.prototype||!ec.prototype.findChild,nc=R&&L((function(){return 7!=qt($u({},\"a\",{get:function(){return $u(this,\"a\",{value:7}).a}})).a}))?function(e,t,n){var o=ju(Ku,t);o&&delete Ku[t],$u(e,t,n),o&&e!==Ku&&$u(Ku,t,o)}:$u,oc=function(e,t){var n=Wu[e]=qt(Bu.prototype);return xu(n,{type:\"Symbol\",tag:e,description:t}),R||(n.description=t),n},rc=function(e,t,n){e===Ku&&rc(Ju,t,n),Se(e);var o=_e(t);return Se(n),se(Wu,o)?(n.enumerable?(se(e,Fu)&&e[Fu][o]&&(e[Fu][o]=!1),n=qt(n,{enumerable:G(0,!1)})):(se(e,Fu)||$u(e,Fu,G(1,{})),e[Fu][o]=!0),nc(e,o,n)):$u(e,o,n)},ac=function(e,t){Se(e);var n=K(t),o=Lt(n).concat(cc(n));return Uu(o,(function(t){R&&!sc.call(n,t)||rc(e,t,n[t])})),e},sc=function(e){var t=_e(e),n=zu.call(this,t);return!(this===Ku&&se(Wu,t)&&!se(Ju,t))&&(!(n||!se(this,t)||!se(Wu,t)||se(this,Fu)&&this[Fu][t])||n)},ic=function(e,t){var n=K(e),o=_e(t);if(n!==Ku||!se(Wu,o)||se(Ju,o)){var r=ju(n,o);return!r||!se(Wu,o)||se(n,Fu)&&n[Fu][o]||(r.enumerable=!0),r}},uc=function(e){var t=Yu(K(e)),n=[];return Uu(t,(function(e){se(Wu,e)||se(Ge,e)||n.push(e)})),n},cc=function(e){var t=e===Ku,n=Yu(t?Ju:K(e)),o=[];return Uu(n,(function(e){!se(Wu,e)||t&&!se(Ku,e)||o.push(Wu[e])})),o};if(Q||(He((Bu=function(){if(this instanceof Bu)throw TypeError(\"Symbol is not a constructor\");var e=arguments.length&&void 0!==arguments[0]?Mt(arguments[0]):void 0,t=ce(e),n=function(e){this===Ku&&n.call(Ju,e),se(this,Fu)&&se(this[Fu],t)&&(this[Fu][t]=!1),nc(this,t,G(1,e))};return R&&tc&&nc(Ku,t,{configurable:!0,set:n}),oc(t,e)}).prototype,\"toString\",(function(){return Vu(this).tag})),He(Bu,\"withoutSetter\",(function(e){return oc(ce(e),e)})),P.f=sc,Ee.f=rc,Te.f=ic,st.f=aa.f=uc,it.f=cc,wu.f=function(e){return oc(ge(e),e)},R&&($u(Bu.prototype,\"description\",{configurable:!0,get:function(){return Vu(this).description}}),He(Ku,\"propertyIsEnumerable\",sc,{unsafe:!0}))),vt({global:!0,wrap:!0,forced:!Q,sham:!Q},{Symbol:Bu}),Uu(Lt(Zu),(function(e){!function(e){var t=Pu.Symbol||(Pu.Symbol={});se(t,e)||Gu(t,e,{value:wu.f(e)})}(e)})),vt({target:\"Symbol\",stat:!0,forced:!Q},{for:function(e){var t=Mt(e);if(se(Xu,t))return Xu[t];var n=Bu(t);return Xu[t]=n,Qu[n]=t,n},keyFor:function(e){if(!ee(e))throw TypeError(e+\" is not a symbol\");if(se(Qu,e))return Qu[e]},useSetter:function(){tc=!0},useSimple:function(){tc=!1}}),vt({target:\"Object\",stat:!0,forced:!Q,sham:!R},{create:function(e,t){return void 0===t?qt(e):ac(qt(e),t)},defineProperty:rc,defineProperties:ac,getOwnPropertyDescriptor:ic}),vt({target:\"Object\",stat:!0,forced:!Q},{getOwnPropertyNames:uc,getOwnPropertySymbols:cc}),vt({target:\"Object\",stat:!0,forced:L((function(){it.f(1)}))},{getOwnPropertySymbols:function(e){return it.f(re(e))}}),Hu){var lc=!Q||L((function(){var e=Bu();return\"[null]\"!=Hu([e])||\"{}\"!=Hu({a:e})||\"{}\"!=Hu(Object(e))}));vt({target:\"JSON\",stat:!0,forced:lc},{stringify:function(e,t,n){for(var o,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(o=t,(B(t)||void 0!==e)&&!ee(e))return Kt(t)||(t=function(e,t){if(\"function\"==typeof o&&(t=o.call(this,e,t)),!ee(t))return t}),r[1]=t,Hu.apply(null,r)}})}Bu.prototype[qu]||Ce(Bu.prototype,qu,Bu.prototype.valueOf),Fn(Bu,\"Symbol\"),Ge[Fu]=!0;var pc=Ee.f,dc=O.Symbol;if(R&&\"function\"==typeof dc&&(!(\"description\"in dc.prototype)||void 0!==dc().description)){var gc={},hc=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof hc?new dc(e):void 0===e?dc():dc(e);return\"\"===e&&(gc[t]=!0),t};ct(hc,dc);var fc=hc.prototype=dc.prototype;fc.constructor=hc;var _c=fc.toString,mc=\"Symbol(test)\"==String(dc(\"test\")),vc=/^Symbol\\\\((.*)\\\\)[^)]+$/;pc(fc,\"description\",{configurable:!0,get:function(){var e=B(this)?this.valueOf():this,t=_c.call(e);if(se(gc,e))return\"\";var n=mc?t.slice(7,-1):t.replace(vc,\"$1\");return\"\"===n?void 0:n}}),vt({global:!0,forced:!0},{Symbol:hc})}var Mc,yc=Te.f,Ic=\"\".startsWith,Tc=Math.min,Sc=fr(\"startsWith\"),Dc=!(Sc||(Mc=yc(String.prototype,\"startsWith\"),!Mc||Mc.writable));vt({target:\"String\",proto:!0,forced:!Dc&&!Sc},{startsWith:function(e){var t=Mt(V(this));gr(e);var n=We(Tc(arguments.length>1?arguments[1]:void 0,t.length)),o=Mt(e);return Ic?Ic.call(t,o,n):t.slice(n,n+o.length)===o}});var Ec={UNSEND:\"unSend\",SUCCESS:\"success\",FAIL:\"fail\"},Cc={NOT_START:\"notStart\",PENDING:\"pengding\",RESOLVED:\"resolved\",REJECTED:\"rejected\"},Ac=function(e){return!!e&&(!!(vu(e)||Mu(e)||yu(e))||(console.warn(\"非法的会话 ID:\".concat(e,\"。会话 ID 组成方式：C2C + userID（单聊）GROUP + groupID（群聊）@TIM#SYSTEM（系统通知会话）\")),!1))},kc=\"请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#\",Nc=function(e){return e.param?\"\".concat(e.api,\" \").concat(e.param,\" \").concat(e.desc,\"。\").concat(kc).concat(e.api):\"\".concat(e.api,\" \").concat(e.desc,\"。\").concat(kc).concat(e.api)},Oc={type:\"String\",required:!0},Lc={type:\"Array\",required:!0},Rc={type:\"Object\",required:!0},bc={login:{userID:Oc,userSig:Oc},addToBlacklist:{userIDList:Lc},on:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Nc({api:\"on\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Nc({api:\"on\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"on 接口的 handler 参数推荐使用具名函数。具名函数可以使用 off 接口取消订阅，匿名函数无法取消订阅。\"),!0)}}],once:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Nc({api:\"once\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Nc({api:\"once\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"once 接口的 handler 参数推荐使用具名函数。\"),!0)}}],off:[{name:\"eventName\",type:\"String\",validator:function(e){return\"string\"==typeof e&&0!==e.length||(console.warn(Nc({api:\"off\",param:\"eventName\",desc:\"类型必须为 String，且不能为空\"})),!1)}},{name:\"handler\",type:\"Function\",validator:function(e){return\"function\"!=typeof e?(console.warn(Nc({api:\"off\",param:\"handler\",desc:\"参数必须为 Function\"})),!1):(\"\"===e.name&&console.warn(\"off 接口无法为匿名函数取消监听事件。\"),!0)}}],sendMessage:[t({name:\"message\"},Rc)],getMessageList:{conversationID:t(t({},Oc),{},{validator:function(e){return Ac(e)}}),nextReqMessageID:{type:\"String\"},count:{type:\"Number\",validator:function(e){return!(!Ji(e)&&!/^[1-9][0-9]*$/.test(e))||(console.warn(Nc({api:\"getMessageList\",param:\"count\",desc:\"必须为正整数\"})),!1)}}},setMessageRead:{conversationID:t(t({},Oc),{},{validator:function(e){return Ac(e)}})},getConversationProfile:[t(t({name:\"conversationID\"},Oc),{},{validator:function(e){return Ac(e)}})],deleteConversation:[t(t({name:\"conversationID\"},Oc),{},{validator:function(e){return Ac(e)}})],pinConversation:{conversationID:t(t({},Oc),{},{validator:function(e){return Ac(e)}}),isPinned:t({},{type:\"Boolean\",required:!0})},getGroupList:{groupProfileFilter:{type:\"Array\"}},getGroupProfile:{groupID:Oc,groupCustomFieldFilter:{type:\"Array\"},memberCustomFieldFilter:{type:\"Array\"}},getGroupProfileAdvance:{groupIDList:Lc},createGroup:{name:Oc},joinGroup:{groupID:Oc,type:{type:\"String\"},applyMessage:{type:\"String\"}},quitGroup:[t({name:\"groupID\"},Oc)],handleApplication:{message:Rc,handleAction:Oc,handleMessage:{type:\"String\"}},changeGroupOwner:{groupID:Oc,newOwnerID:Oc},updateGroupProfile:{groupID:Oc,muteAllMembers:{type:\"Boolean\"}},dismissGroup:[t({name:\"groupID\"},Oc)],searchGroupByID:[t({name:\"groupID\"},Oc)],initGroupAttributes:{groupID:Oc,groupAttributes:t(t({},Rc),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!$i(e[n]))return console.warn(Nc({api:\"initGroupAttributes\",desc:\"群属性 value 必须是字符串\"})),t=!1})),t}})},setGroupAttributes:{groupID:Oc,groupAttributes:t(t({},Rc),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!$i(e[n]))return console.warn(Nc({api:\"setGroupAttributes\",desc:\"群属性 value 必须是字符串\"})),t=!1})),t}})},deleteGroupAttributes:{groupID:Oc,keyList:{type:\"Array\",validator:function(e){if(Ji(e))return console.warn(Nc({api:\"deleteGroupAttributes\",desc:\"缺少必填参数：keyList\"})),!1;if(!Wi(e))return!1;if(!Lu(e)){var t=!0;return e.forEach((function(e){if(!$i(e))return console.warn(Nc({api:\"deleteGroupAttributes\",desc:\"群属性 key 必须是字符串\"})),t=!1})),t}return!0}}},getGroupAttributes:{groupID:Oc,keyList:{type:\"Array\",validator:function(e){if(Ji(e))return console.warn(Nc({api:\"getGroupAttributes\",desc:\"缺少必填参数：keyList\"})),!1;if(!Wi(e))return!1;if(!Lu(e)){var t=!0;return e.forEach((function(e){if(!$i(e))return console.warn(Nc({api:\"getGroupAttributes\",desc:\"群属性 key 必须是字符串\"})),t=!1})),t}return!0}}},getGroupMemberList:{groupID:Oc,offset:{type:\"Number\"},count:{type:\"Number\"}},getGroupMemberProfile:{groupID:Oc,userIDList:Lc,memberCustomFieldFilter:{type:\"Array\"}},addGroupMember:{groupID:Oc,userIDList:Lc},setGroupMemberRole:{groupID:Oc,userID:Oc,role:Oc},setGroupMemberMuteTime:{groupID:Oc,userID:Oc,muteTime:{type:\"Number\",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:Oc,userID:{type:\"String\"},nameCard:{type:\"String\",validator:function(e){return $i(e)?(e.length,!0):(console.warn(Nc({api:\"setGroupMemberNameCard\",param:\"nameCard\",desc:\"类型必须为 String\"})),!1)}}},setMessageRemindType:{groupID:Oc,messageRemindType:Oc},setGroupMemberCustomField:{groupID:Oc,userID:{type:\"String\"},memberCustomField:Lc},deleteGroupMember:{groupID:Oc},createTextMessage:{to:Oc,conversationType:Oc,payload:t(t({},Rc),{},{validator:function(e){return zi(e)?$i(e.text)?0!==e.text.length||(console.warn(Nc({api:\"createTextMessage\",desc:\"消息内容不能为空\"})),!1):(console.warn(Nc({api:\"createTextMessage\",param:\"payload.text\",desc:\"类型必须为 String\"})),!1):(console.warn(Nc({api:\"createTextMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createTextAtMessage:{to:Oc,conversationType:Oc,payload:t(t({},Rc),{},{validator:function(e){return zi(e)?$i(e.text)?0===e.text.length?(console.warn(Nc({api:\"createTextAtMessage\",desc:\"消息内容不能为空\"})),!1):!(e.atUserList&&!Wi(e.atUserList))||(console.warn(Nc({api:\"createTextAtMessage\",desc:\"payload.atUserList 类型必须为数组\"})),!1):(console.warn(Nc({api:\"createTextAtMessage\",param:\"payload.text\",desc:\"类型必须为 String\"})),!1):(console.warn(Nc({api:\"createTextAtMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createCustomMessage:{to:Oc,conversationType:Oc,payload:t(t({},Rc),{},{validator:function(e){return zi(e)?e.data&&!$i(e.data)?(console.warn(Nc({api:\"createCustomMessage\",param:\"payload.data\",desc:\"类型必须为 String\"})),!1):e.description&&!$i(e.description)?(console.warn(Nc({api:\"createCustomMessage\",param:\"payload.description\",desc:\"类型必须为 String\"})),!1):!(e.extension&&!$i(e.extension))||(console.warn(Nc({api:\"createCustomMessage\",param:\"payload.extension\",desc:\"类型必须为 String\"})),!1):(console.warn(Nc({api:\"createCustomMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createImageMessage:{to:Oc,conversationType:Oc,payload:t(t({},Rc),{},{validator:function(e){if(!zi(e))return console.warn(Nc({api:\"createImageMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(Ji(e.file))return console.warn(Nc({api:\"createImageMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(si){if(!(e.file instanceof HTMLInputElement||Hi(e.file)))return zi(e.file)&&\"undefined\"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(console.warn(Nc({api:\"createImageMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Nc({api:\"createImageMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Nc({api:\"createImageMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1}return!0},onProgress:{type:\"Function\",required:!1,validator:function(e){return Ji(e)&&console.warn(Nc({api:\"createImageMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}})},createAudioMessage:{to:Oc,conversationType:Oc,payload:t(t({},Rc),{},{validator:function(e){return!!zi(e)||(console.warn(Nc({api:\"createAudioMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return Ji(e)&&console.warn(Nc({api:\"createAudioMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createVideoMessage:{to:Oc,conversationType:Oc,payload:t(t({},Rc),{},{validator:function(e){if(!zi(e))return console.warn(Nc({api:\"createVideoMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(Ji(e.file))return console.warn(Nc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(si){if(!(e.file instanceof HTMLInputElement||Hi(e.file)))return zi(e.file)&&\"undefined\"!=typeof uni?!!Hi(e.file.tempFile)||(console.warn(Nc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Nc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Nc({api:\"createVideoMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1}return!0}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return Ji(e)&&console.warn(Nc({api:\"createVideoMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createFaceMessage:{to:Oc,conversationType:Oc,payload:t(t({},Rc),{},{validator:function(e){return zi(e)?ji(e.index)?!!$i(e.data)||(console.warn(Nc({api:\"createFaceMessage\",param:\"payload.data\",desc:\"类型必须为 String\"})),!1):(console.warn(Nc({api:\"createFaceMessage\",param:\"payload.index\",desc:\"类型必须为 Number\"})),!1):(console.warn(Nc({api:\"createFaceMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1)}})},createFileMessage:{to:Oc,conversationType:Oc,payload:t(t({},Rc),{},{validator:function(e){if(!zi(e))return console.warn(Nc({api:\"createFileMessage\",param:\"payload\",desc:\"类型必须为 plain object\"})),!1;if(Ji(e.file))return console.warn(Nc({api:\"createFileMessage\",param:\"payload.file\",desc:\"不能为 undefined\"})),!1;if(si){if(!(e.file instanceof HTMLInputElement||Hi(e.file)))return zi(e.file)&&\"undefined\"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(console.warn(Nc({api:\"createFileMessage\",param:\"payload.file\",desc:\"您没有选择文件，无法发送\"})),!1):(console.warn(Nc({api:\"createFileMessage\",param:\"payload.file\",desc:\"类型必须是 HTMLInputElement 或 File\"})),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return console.warn(Nc({api:\"createFileMessage\",desc:\"您没有选择文件，无法发送\"})),!1}return!0}}),onProgress:{type:\"Function\",required:!1,validator:function(e){return Ji(e)&&console.warn(Nc({api:\"createFileMessage\",desc:\"没有 onProgress 回调，您将无法获取上传进度\"})),!0}}},createMergerMessage:{to:Oc,conversationType:Oc,payload:t(t({},Rc),{},{validator:function(e){if(Lu(e.messageList))return console.warn(Nc({api:\"createMergerMessage\",desc:\"不能为空数组\"})),!1;if(Lu(e.compatibleText))return console.warn(Nc({api:\"createMergerMessage\",desc:\"类型必须为 String，且不能为空\"})),!1;var t=!1;return e.messageList.forEach((function(e){e.status===Ec.FAIL&&(t=!0)})),!t||(console.warn(Nc({api:\"createMergerMessage\",desc:\"不支持合并已发送失败的消息\"})),!1)}})},revokeMessage:[t(t({name:\"message\"},Rc),{},{validator:function(e){return Lu(e)?(console.warn(\"revokeMessage 请传入消息（Message）实例\"),!1):e.conversationType===ro.CONV_SYSTEM?(console.warn(\"revokeMessage 不能撤回系统会话消息，只能撤回单聊消息或群消息\"),!1):!0!==e.isRevoked||(console.warn(\"revokeMessage 消息已经被撤回，请勿重复操作\"),!1)}})],deleteMessage:[t(t({name:\"messageList\"},Lc),{},{validator:function(e){return!Lu(e)||(console.warn(Nc({api:\"deleteMessage\",param:\"messageList\",desc:\"不能为空数组\"})),!1)}})],getUserProfile:{userIDList:{type:\"Array\",validator:function(e){return Wi(e)?(0===e.length&&console.warn(Nc({api:\"getUserProfile\",param:\"userIDList\",desc:\"不能为空数组\"})),!0):(console.warn(Nc({api:\"getUserProfile\",param:\"userIDList\",desc:\"必须为数组\"})),!1)}}},updateMyProfile:{profileCustomField:{type:\"Array\",validator:function(e){return!!Ji(e)||(!!Wi(e)||(console.warn(Nc({api:\"updateMyProfile\",param:\"profileCustomField\",desc:\"必须为数组\"})),!1))}}},addFriend:{to:Oc,source:{type:\"String\",required:!0,validator:function(e){return!!e&&(e.startsWith(\"AddSource_Type_\")?!(e.replace(\"AddSource_Type_\",\"\").length>8)||(console.warn(Nc({api:\"addFriend\",desc:\"加好友来源字段的关键字长度不得超过8字节\"})),!1):(console.warn(Nc({api:\"addFriend\",desc:\"加好友来源字段的前缀必须是：AddSource_Type_\"})),!1))}},remark:{type:\"String\",required:!1,validator:function(e){return!($i(e)&&e.length>96)||(console.warn(Nc({api:\"updateFriend\",desc:\" 备注长度最长不得超过 96 个字节\"})),!1)}}},deleteFriend:{userIDList:Lc},checkFriend:{userIDList:Lc},getFriendProfile:{userIDList:Lc},updateFriend:{userID:Oc,remark:{type:\"String\",required:!1,validator:function(e){return!($i(e)&&e.length>96)||(console.warn(Nc({api:\"updateFriend\",desc:\" 备注长度最长不得超过 96 个字节\"})),!1)}},friendCustomField:{type:\"Array\",required:!1,validator:function(e){if(e){if(!Wi(e))return console.warn(Nc({api:\"updateFriend\",param:\"friendCustomField\",desc:\"必须为数组\"})),!1;var t=!0;return e.forEach((function(e){return $i(e.key)&&-1!==e.key.indexOf(\"Tag_SNS_Custom\")?$i(e.value)?e.value.length>8?(console.warn(Nc({api:\"updateFriend\",desc:\"好友自定义字段的关键字长度不得超过8字节\"})),t=!1):void 0:(console.warn(Nc({api:\"updateFriend\",desc:\"类型必须为 String\"})),t=!1):(console.warn(Nc({api:\"updateFriend\",desc:\"好友自定义字段的前缀必须是 Tag_SNS_Custom\"})),t=!1)})),t}return!0}}},acceptFriendApplication:{userID:Oc},refuseFriendApplication:{userID:Oc},deleteFriendApplication:{userID:Oc},createFriendGroup:{name:Oc},deleteFriendGroup:{name:Oc},addToFriendGroup:{name:Oc,userIDList:Lc},removeFromFriendGroup:{name:Oc,userIDList:Lc},renameFriendGroup:{oldName:Oc,newName:Oc}},wc={login:\"login\",logout:\"logout\",on:\"on\",once:\"once\",off:\"off\",setLogLevel:\"setLogLevel\",registerPlugin:\"registerPlugin\",destroy:\"destroy\",createTextMessage:\"createTextMessage\",createTextAtMessage:\"createTextAtMessage\",createImageMessage:\"createImageMessage\",createAudioMessage:\"createAudioMessage\",createVideoMessage:\"createVideoMessage\",createCustomMessage:\"createCustomMessage\",createFaceMessage:\"createFaceMessage\",createFileMessage:\"createFileMessage\",createMergerMessage:\"createMergerMessage\",downloadMergerMessage:\"downloadMergerMessage\",createForwardMessage:\"createForwardMessage\",sendMessage:\"sendMessage\",resendMessage:\"resendMessage\",revokeMessage:\"revokeMessage\",deleteMessage:\"deleteMessage\",getMessageList:\"getMessageList\",setMessageRead:\"setMessageRead\",getConversationList:\"getConversationList\",getConversationProfile:\"getConversationProfile\",deleteConversation:\"deleteConversation\",pinConversation:\"pinConversation\",getGroupList:\"getGroupList\",getGroupProfile:\"getGroupProfile\",createGroup:\"createGroup\",joinGroup:\"joinGroup\",updateGroupProfile:\"updateGroupProfile\",quitGroup:\"quitGroup\",dismissGroup:\"dismissGroup\",changeGroupOwner:\"changeGroupOwner\",searchGroupByID:\"searchGroupByID\",setMessageRemindType:\"setMessageRemindType\",handleGroupApplication:\"handleGroupApplication\",initGroupAttributes:\"initGroupAttributes\",setGroupAttributes:\"setGroupAttributes\",deleteGroupAttributes:\"deleteGroupAttributes\",getGroupAttributes:\"getGroupAttributes\",getGroupMemberProfile:\"getGroupMemberProfile\",getGroupMemberList:\"getGroupMemberList\",addGroupMember:\"addGroupMember\",deleteGroupMember:\"deleteGroupMember\",setGroupMemberNameCard:\"setGroupMemberNameCard\",setGroupMemberMuteTime:\"setGroupMemberMuteTime\",setGroupMemberRole:\"setGroupMemberRole\",setGroupMemberCustomField:\"setGroupMemberCustomField\",getGroupOnlineMemberCount:\"getGroupOnlineMemberCount\",getMyProfile:\"getMyProfile\",getUserProfile:\"getUserProfile\",updateMyProfile:\"updateMyProfile\",getBlacklist:\"getBlacklist\",addToBlacklist:\"addToBlacklist\",removeFromBlacklist:\"removeFromBlacklist\",getFriendList:\"getFriendList\",addFriend:\"addFriend\",deleteFriend:\"deleteFriend\",checkFriend:\"checkFriend\",updateFriend:\"updateFriend\",getFriendProfile:\"getFriendProfile\",getFriendApplicationList:\"getFriendApplicationList\",refuseFriendApplication:\"refuseFriendApplication\",deleteFriendApplication:\"deleteFriendApplication\",acceptFriendApplication:\"acceptFriendApplication\",setFriendApplicationRead:\"setFriendApplicationRead\",getFriendGroupList:\"getFriendGroupList\",createFriendGroup:\"createFriendGroup\",renameFriendGroup:\"renameFriendGroup\",deleteFriendGroup:\"deleteFriendGroup\",addToFriendGroup:\"addToFriendGroup\",removeFromFriendGroup:\"removeFromFriendGroup\",callExperimentalAPI:\"callExperimentalAPI\"},Pc=!!ha&&L((function(){ha.prototype.finally.call({then:function(){}},(function(){}))}));if(vt({target:\"Promise\",proto:!0,real:!0,forced:Pc},{finally:function(e){var t=Ta(this,j(\"Promise\")),n=\"function\"==typeof e;return this.then(n?function(n){return us(t,e()).then((function(){return n}))}:e,n?function(n){return us(t,e()).then((function(){throw n}))}:e)}}),\"function\"==typeof ha){var Gc=j(\"Promise\").prototype.finally;ha.prototype.finally!==Gc&&He(ha.prototype,\"finally\",Gc,{unsafe:!0})}var Uc=[].slice,Fc=/MSIE .\\\\./.test($),qc=function(e){return function(t,n){var o=arguments.length>2,r=o?Uc.call(arguments,2):void 0;return e(o?function(){(\"function\"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};vt({global:!0,bind:!0,forced:Fc},{setTimeout:qc(O.setTimeout),setInterval:qc(O.setInterval)});var xc=Yt.filter,Vc=Qn(\"filter\");vt({target:\"Array\",proto:!0,forced:!Vc},{filter:function(e){return xc(this,e,arguments.length>1?arguments[1]:void 0)}});var Kc,Bc=\"sign\",Hc=\"message\",jc=\"user\",$c=\"c2c\",Yc=\"group\",zc=\"sns\",Wc=\"groupMember\",Jc=\"conversation\",Xc=\"context\",Qc=\"storage\",Zc=\"eventStat\",el=\"netMonitor\",tl=\"bigDataChannel\",nl=\"upload\",ol=\"plugin\",rl=\"syncUnreadMessage\",al=\"session\",sl=\"channel\",il=\"message_loss_detection\",ul=\"cloudControl\",cl=\"pullGroupMessage\",ll=\"qualityStat\",pl=function(){function e(t){o(this,e),this._moduleManager=t,this._className=\"\"}return a(e,[{key:\"isLoggedIn\",value:function(){return this._moduleManager.getModule(Xc).isLoggedIn()}},{key:\"isOversea\",value:function(){return this._moduleManager.getModule(Xc).isOversea()}},{key:\"getMyUserID\",value:function(){return this._moduleManager.getModule(Xc).getUserID()}},{key:\"getModule\",value:function(e){return this._moduleManager.getModule(e)}},{key:\"getPlatform\",value:function(){return ui}},{key:\"getNetworkType\",value:function(){return this._moduleManager.getModule(el).getNetworkType()}},{key:\"probeNetwork\",value:function(){return this._moduleManager.getModule(el).probe()}},{key:\"getCloudConfig\",value:function(e){return this._moduleManager.getModule(ul).getCloudConfig(e)}},{key:\"emitOuterEvent\",value:function(e,t){this._moduleManager.getOuterEmitterInstance().emit(e,t)}},{key:\"emitInnerEvent\",value:function(e,t){this._moduleManager.getInnerEmitterInstance().emit(e,t)}},{key:\"getInnerEmitterInstance\",value:function(){return this._moduleManager.getInnerEmitterInstance()}},{key:\"generateTjgID\",value:function(e){return this._moduleManager.getModule(Xc).getTinyID()+\"-\"+e.random}},{key:\"filterModifiedMessage\",value:function(e){if(!Lu(e)){var t=e.filter((function(e){return!0===e.isModified}));t.length>0&&this.emitOuterEvent(oo.MESSAGE_MODIFIED,t)}}},{key:\"filterUnmodifiedMessage\",value:function(e){return Lu(e)?[]:e.filter((function(e){return!1===e.isModified}))}},{key:\"request\",value:function(e){return this._moduleManager.getModule(al).request(e)}}]),e}(),dl=\"wslogin\",gl=\"wslogout\",hl=\"wshello\",fl=\"getmsg\",_l=\"authkey\",ml=\"sendmsg\",vl=\"send_group_msg\",Ml=\"portrait_get_all\",yl=\"portrait_set\",Il=\"black_list_get\",Tl=\"black_list_add\",Sl=\"black_list_delete\",Dl=\"msgwithdraw\",El=\"msgreaded\",Cl=\"getroammsg\",Al=\"get_peer_read_time\",kl=\"delete_c2c_msg_ramble\",Nl=\"page_get\",Ol=\"get\",Ll=\"delete\",Rl=\"top\",bl=\"deletemsg\",wl=\"get_joined_group_list\",Pl=\"get_group_info\",Gl=\"create_group\",Ul=\"destroy_group\",Fl=\"modify_group_base_info\",ql=\"apply_join_group\",xl=\"apply_join_group_noauth\",Vl=\"quit_group\",Kl=\"get_group_public_info\",Bl=\"change_group_owner\",Hl=\"handle_apply_join_group\",jl=\"handle_invite_join_group\",$l=\"group_msg_recall\",Yl=\"msg_read_report\",zl=\"group_msg_get\",Wl=\"get_pendency\",Jl=\"deletemsg\",Xl=\"get_msg\",Ql=\"get_msg_noauth\",Zl=\"get_online_member_num\",ep=\"delete_group_ramble_msg_by_seq\",tp=\"set_group_attr\",np=\"modify_group_attr\",op=\"delete_group_attr\",rp=\"clear_group_attr\",ap=\"get_group_attr\",sp=\"get_group_member_info\",ip=\"get_specified_group_member_info\",up=\"add_group_member\",cp=\"delete_group_member\",lp=\"modify_group_member_info\",pp=\"cos\",dp=\"pre_sig\",gp=\"tim_web_report_v2\",hp=\"alive\",fp=\"msg_push\",_p=\"ws_msg_push_ack\",mp=\"stat_forceoffline\",vp=\"save_relay_json_msg\",Mp=\"get_relay_json_msg\",yp=\"fetch_config\",Ip=\"push_configv2\",Tp={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_TINYID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,REPEAT_LOGIN:2025,COS_UNDETECTED:2040,COS_GET_SIG_FAIL:2041,MESSAGE_SEND_FAIL:2100,MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:2103,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_ONPROGRESS_FUNCTION_ERROR:2109,MESSAGE_REVOKE_FAIL:2110,MESSAGE_DELETE_FAIL:2111,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_VIDEO_UPLOAD_FAIL:2350,MESSAGE_VIDEO_SIZE_LIMIT:2351,MESSAGE_VIDEO_TYPES_LIMIT:2352,MESSAGE_FILE_UPLOAD_FAIL:2400,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_MERGER_TYPE_INVALID:2450,MESSAGE_MERGER_KEY_INVALID:2451,MESSAGE_MERGER_DOWNLOAD_FAIL:2452,MESSAGE_FORWARD_TYPE_INVALID:2453,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_WORK:2601,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_Work:2622,MEMBER_NOT_IN_GROUP:2623,CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM:2641,CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN:2642,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:2662,CANNOT_KICK_MEMBER_IN_AVCHATROOM:2680,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,CANNOT_MUTE_SELF:2685,NOT_MY_FRIEND:2700,ALREADY_MY_FRIEND:2701,FRIEND_GROUP_EXISTED:2710,FRIEND_GROUP_NOT_EXIST:2711,FRIEND_APPLICATION_NOT_EXIST:2716,UPDATE_PROFILE_INVALID_PARAM:2721,UPDATE_PROFILE_NO_KEY:2722,ADD_BLACKLIST_INVALID_PARAM:2740,DEL_BLACKLIST_INVALID_PARAM:2741,CANNOT_ADD_SELF_TO_BLACKLIST:2742,ADD_FRIEND_INVALID_PARAM:2760,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NETWORK_BASE_OPTIONS_NO_URL:2802,NETWORK_UNDEFINED_SERVER_NAME:2803,NETWORK_PACKAGE_UNDEFINED:2804,NO_NETWORK:2805,CONVERTOR_IRREGULAR_PARAMS:2900,NOTICE_RUNLOOP_UNEXPECTED_CONDITION:2901,NOTICE_RUNLOOP_OFFSET_LOST:2902,UNCAUGHT_ERROR:2903,GET_LONGPOLL_ID_FAILED:2904,INVALID_OPERATION:2905,CANNOT_FIND_PROTOCOL:2997,CANNOT_FIND_MODULE:2998,SDK_IS_NOT_READY:2999,LONG_POLL_KICK_OUT:91101,MESSAGE_A2KEY_EXPIRED:20002,ACCOUNT_A2KEY_EXPIRED:70001,LONG_POLL_API_PARAM_ERROR:90001,HELLO_ANSWER_KICKED_OUT:1002},Sp=\"无 SDKAppID\",Dp=\"无 userID\",Ep=\"无 userSig\",Cp=\"无 tinyID\",Ap=\"无 a2key\",kp=\"用户未登录\",Np=\"重复登录\",Op=\"未检测到 COS 上传插件\",Lp=\"获取 COS 预签名 URL 失败\",Rp=\"消息发送失败\",bp=\"需要 Message 的实例\",wp=\\'Message.conversationType 只能为 \"C2C\" 或 \"GROUP\"\\',Pp=\"无法发送空文件\",Gp=\"回调函数运行时遇到错误，请检查接入侧代码\",Up=\"消息撤回失败\",Fp=\"消息删除失败\",qp=\"请先选择一个图片\",xp=\"只允许上传 jpg png jpeg gif bmp格式的图片\",Vp=\"图片大小超过20M，无法发送\",Kp=\"语音上传失败\",Bp=\"语音大小大于20M，无法发送\",Hp=\"视频上传失败\",jp=\"视频大小超过100M，无法发送\",$p=\"只允许上传 mp4 格式的视频\",Yp=\"文件上传失败\",zp=\"请先选择一个文件\",Wp=\"文件大小超过100M，无法发送 \",Jp=\"缺少必要的参数文件 URL\",Xp=\"非合并消息\",Qp=\"合并消息的 messageKey 无效\",Zp=\"下载合并消息失败\",ed=\"选择的消息类型（如群提示消息）不可以转发\",td=\"没有找到相应的会话，请检查传入参数\",nd=\"没有找到相应的用户或群组，请检查传入参数\",od=\"未记录的会话类型\",rd=\"非法的群类型，请检查传入参数\",ad=\"不能加入 Work 类型的群组\",sd=\"AVChatRoom 类型的群组不能转让群主\",id=\"不能把群主转让给自己\",ud=\"不能解散 Work 类型的群组\",cd=\"用户不在该群组内\",ld=\"加群失败，请检查传入参数或重试\",pd=\"AVChatRoom 类型的群不支持邀请群成员\",dd=\"非 AVChatRoom 类型的群组不允许匿名加群，请先登录后再加群\",gd=\"不能在 AVChatRoom 类型的群组踢人\",hd=\"你不是群主，只有群主才有权限操作\",fd=\"不能在 Work / AVChatRoom 类型的群中设置群成员身份\",_d=\"不合法的群成员身份，请检查传入参数\",md=\"不能设置自己的群成员身份，请检查传入参数\",vd=\"不能将自己禁言，请检查传入参数\",Md=\"传入 updateMyProfile 接口的参数无效\",yd=\"updateMyProfile 无标配资料字段或自定义资料字段\",Id=\"传入 addToBlacklist 接口的参数无效\",Td=\"传入 removeFromBlacklist 接口的参数无效\",Sd=\"不能拉黑自己\",Dd=\"网络错误\",Ed=\"请求超时\",Cd=\"未连接到网络\",Ad=\"无效操作，如调用了未定义或者未实现的方法等\",kd=\"无法找到协议\",Nd=\"无法找到模块\",Od=\"接口需要 SDK 处于 ready 状态后才能调用\",Ld=\"upload\",Rd=\"networkRTT\",bd=\"messageE2EDelay\",wd=\"sendMessageC2C\",Pd=\"sendMessageGroup\",Gd=\"sendMessageGroupAV\",Ud=\"sendMessageRichMedia\",Fd=\"cosUpload\",qd=\"messageReceivedGroup\",xd=\"messageReceivedGroupAVPush\",Vd=\"messageReceivedGroupAVPull\",Kd=(s(Kc={},Rd,2),s(Kc,bd,3),s(Kc,wd,4),s(Kc,Pd,5),s(Kc,Gd,6),s(Kc,Ud,7),s(Kc,qd,8),s(Kc,xd,9),s(Kc,Vd,10),s(Kc,Fd,11),Kc),Bd={info:4,warning:5,error:6},Hd={wifi:1,\"2g\":2,\"3g\":3,\"4g\":4,\"5g\":5,unknown:6,none:7,online:8},jd=function(){function e(t){o(this,e),this.eventType=0,this.timestamp=0,this.networkType=8,this.code=0,this.message=\"\",this.moreMessage=\"\",this.extension=t,this.costTime=0,this.duplicate=!1,this.level=4,this._sentFlag=!1,this._startts=Ui()}return a(e,[{key:\"updateTimeStamp\",value:function(){this.timestamp=Ui()}},{key:\"start\",value:function(e){return this._startts=e,this}},{key:\"end\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._sentFlag){var n=Ui();this.costTime=n-this._startts,this.setMoreMessage(\"host:\".concat(Su(),\" startts:\").concat(this._startts,\" endts:\").concat(n)),t?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout((function(){e._sentFlag=!0,e._eventStatModule&&e._eventStatModule.pushIn(e)}),0)}}},{key:\"setError\",value:function(e,t,n){return e instanceof Error?(this._sentFlag||(this.setNetworkType(n),t?(e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message)):(this.setCode(Tp.NO_NETWORK),this.setMoreMessage(Cd)),this.setLevel(\"error\")),this):(Ki.warn(\"SSOLogData.setError value not instanceof Error, please check!\"),this)}},{key:\"setCode\",value:function(e){return Ji(e)||this._sentFlag||(\"ECONNABORTED\"===e&&(this.code=103),ji(e)?this.code=e:Ki.warn(\"SSOLogData.setCode value not a number, please check!\",e,n(e))),this}},{key:\"setMessage\",value:function(e){return Ji(e)||this._sentFlag||(ji(e)&&(this.message=e.toString()),$i(e)&&(this.message=e)),this}},{key:\"setLevel\",value:function(e){return Ji(e)||this._sentFlag||(this.level=Bd[e]),this}},{key:\"setMoreMessage\",value:function(e){return Lu(this.moreMessage)?this.moreMessage=\"\".concat(e):this.moreMessage+=\" \".concat(e),this}},{key:\"setNetworkType\",value:function(e){return Ji(e)||Ji(Hd[e])?Ki.warn(\"SSOLogData.setNetworkType value is undefined, please check!\"):this.networkType=Hd[e],this}},{key:\"getStartTs\",value:function(){return this._startts}}],[{key:\"bindEventStatModule\",value:function(t){e.prototype._eventStatModule=t}}]),e}(),$d=\"sdkConstruct\",Yd=\"sdkReady\",zd=\"login\",Wd=\"logout\",Jd=\"kickedOut\",Xd=\"registerPlugin\",Qd=\"wsConnect\",Zd=\"wsOnOpen\",eg=\"wsOnClose\",tg=\"wsOnError\",ng=\"getCosAuthKey\",og=\"getCosPreSigUrl\",rg=\"upload\",ag=\"sendMessage\",sg=\"getC2CRoamingMessages\",ig=\"getGroupRoamingMessages\",ug=\"revokeMessage\",cg=\"deleteMessage\",lg=\"setC2CMessageRead\",pg=\"setGroupMessageRead\",dg=\"emptyMessageBody\",gg=\"getPeerReadTime\",hg=\"uploadMergerMessage\",fg=\"downloadMergerMessage\",_g=\"jsonParseError\",mg=\"messageE2EDelayException\",vg=\"getConversationList\",Mg=\"getConversationProfile\",yg=\"deleteConversation\",Ig=\"pinConversation\",Tg=\"getConversationListInStorage\",Sg=\"syncConversationList\",Dg=\"createGroup\",Eg=\"applyJoinGroup\",Cg=\"quitGroup\",Ag=\"searchGroupByID\",kg=\"changeGroupOwner\",Ng=\"handleGroupApplication\",Og=\"handleGroupInvitation\",Lg=\"setMessageRemindType\",Rg=\"dismissGroup\",bg=\"updateGroupProfile\",wg=\"getGroupList\",Pg=\"getGroupProfile\",Gg=\"getGroupListInStorage\",Ug=\"getGroupLastSequence\",Fg=\"getGroupMissingMessage\",qg=\"pagingGetGroupList\",xg=\"getGroupSimplifiedInfo\",Vg=\"joinWithoutAuth\",Kg=\"initGroupAttributes\",Bg=\"setGroupAttributes\",Hg=\"deleteGroupAttributes\",jg=\"getGroupAttributes\",$g=\"getGroupMemberList\",Yg=\"getGroupMemberProfile\",zg=\"addGroupMember\",Wg=\"deleteGroupMember\",Jg=\"setGroupMemberMuteTime\",Xg=\"setGroupMemberNameCard\",Qg=\"setGroupMemberRole\",Zg=\"setGroupMemberCustomField\",eh=\"getGroupOnlineMemberCount\",th=\"longPollingAVError\",nh=\"messageLoss\",oh=\"messageStacked\",rh=\"getUserProfile\",ah=\"updateMyProfile\",sh=\"getBlacklist\",ih=\"addToBlacklist\",uh=\"removeFromBlacklist\",ch=\"callbackFunctionError\",lh=\"fetchCloudControlConfig\",ph=\"pushedCloudControlConfig\",dh=\"error\",gh=P.f,hh=function(e){return function(t){for(var n,o=K(t),r=Lt(o),a=r.length,s=0,i=[];a>s;)n=r[s++],R&&!gh.call(o,n)||i.push(e?[n,o[n]]:o[n]);return i}},fh={entries:hh(!0),values:hh(!1)}.values;vt({target:\"Object\",stat:!0},{values:function(e){return fh(e)}});var _h=function(){function e(t){o(this,e),this.type=ro.MSG_TEXT,this.content={text:t.text||\"\"}}return a(e,[{key:\"setText\",value:function(e){this.content.text=e}},{key:\"sendable\",value:function(){return 0!==this.content.text.length}}]),e}(),mh=ge(\"iterator\"),vh=!L((function(){var e=new URL(\"b?a=1&b=2&c=3\",\"http://a\"),t=e.searchParams,n=\"\";return e.pathname=\"c%20d\",t.forEach((function(e,o){t.delete(\"b\"),n+=o+e})),!t.sort||\"http://a/c%20d?a=1&c=3\"!==e.href||\"3\"!==t.get(\"c\")||\"a=1\"!==String(new URLSearchParams(\"?a=1\"))||!t[mh]||\"a\"!==new URL(\"https://a@b\").username||\"b\"!==new URLSearchParams(new URLSearchParams(\"a=b\")).get(\"a\")||\"xn--e1aybc\"!==new URL(\"http://тест\").host||\"#%D0%B1\"!==new URL(\"http://a#б\").hash||\"a1c3\"!==n||\"x\"!==new URL(\"http://x\",void 0).host})),Mh=Object.assign,yh=Object.defineProperty,Ih=!Mh||L((function(){if(R&&1!==Mh({b:1},Mh(yh({},\"a\",{enumerable:!0,get:function(){yh(this,\"b\",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,\"abcdefghijklmnopqrst\".split(\"\").forEach((function(e){t[e]=e})),7!=Mh({},e)[n]||\"abcdefghijklmnopqrst\"!=Lt(Mh({},t)).join(\"\")}))?function(e,t){for(var n=re(e),o=arguments.length,r=1,a=it.f,s=P.f;o>r;)for(var i,u=x(arguments[r++]),c=a?Lt(u).concat(a(u)):Lt(u),l=c.length,p=0;l>p;)i=c[p++],R&&!s.call(u,i)||(n[i]=u[i]);return n}:Mh,Th=/[^\\\\0-\\\\u007E]/,Sh=/[.\\\\u3002\\\\uFF0E\\\\uFF61]/g,Dh=\"Overflow: input needs wider integers to process\",Eh=Math.floor,Ch=String.fromCharCode,Ah=function(e){return e+22+75*(e<26)},kh=function(e,t,n){var o=0;for(e=n?Eh(e/700):e>>1,e+=Eh(e/t);e>455;o+=36)e=Eh(e/35);return Eh(o+36*e/(e+38))},Nh=function(e){var t,n,o=[],r=(e=function(e){for(var t=[],n=0,o=e.length;n<o;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<o){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&r)<<10)+(1023&a)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,a=128,s=0,i=72;for(t=0;t<e.length;t++)(n=e[t])<128&&o.push(Ch(n));var u=o.length,c=u;for(u&&o.push(\"-\");c<r;){var l=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=a&&n<l&&(l=n);var p=c+1;if(l-a>Eh((2147483647-s)/p))throw RangeError(Dh);for(s+=(l-a)*p,a=l,t=0;t<e.length;t++){if((n=e[t])<a&&++s>2147483647)throw RangeError(Dh);if(n==a){for(var d=s,g=36;;g+=36){var h=g<=i?1:g>=i+26?26:g-i;if(d<h)break;var f=d-h,_=36-h;o.push(Ch(Ah(h+f%_))),d=Eh(f/_)}o.push(Ch(Ah(d))),i=kh(s,p,c==u),s=0,++c}}++s,++a}return o.join(\"\")},Oh=function(e){var t=_n(e);if(\"function\"!=typeof t)throw TypeError(String(e)+\" is not iterable\");return Se(t.call(e))},Lh=j(\"fetch\"),Rh=j(\"Request\"),bh=Rh&&Rh.prototype,wh=j(\"Headers\"),Ph=ge(\"iterator\"),Gh=Be.set,Uh=Be.getterFor(\"URLSearchParams\"),Fh=Be.getterFor(\"URLSearchParamsIterator\"),qh=/\\\\+/g,xh=Array(4),Vh=function(e){return xh[e-1]||(xh[e-1]=RegExp(\"((?:%[\\\\\\\\da-f]{2}){\"+e+\"})\",\"gi\"))},Kh=function(e){try{return decodeURIComponent(e)}catch(_M){return e}},Bh=function(e){var t=e.replace(qh,\" \"),n=4;try{return decodeURIComponent(t)}catch(_M){for(;n;)t=t.replace(Vh(n--),Kh);return t}},Hh=/[!\\'()~]|%20/g,jh={\"!\":\"%21\",\"\\'\":\"%27\",\"(\":\"%28\",\")\":\"%29\",\"~\":\"%7E\",\"%20\":\"+\"},$h=function(e){return jh[e]},Yh=function(e){return encodeURIComponent(e).replace(Hh,$h)},zh=function(e,t){if(t)for(var n,o,r=t.split(\"&\"),a=0;a<r.length;)(n=r[a++]).length&&(o=n.split(\"=\"),e.push({key:Bh(o.shift()),value:Bh(o.join(\"=\"))}))},Wh=function(e){this.entries.length=0,zh(this.entries,e)},Jh=function(e,t){if(e<t)throw TypeError(\"Not enough arguments\")},Xh=Vn((function(e,t){Gh(this,{type:\"URLSearchParamsIterator\",iterator:Oh(Uh(e).entries),kind:t})}),\"Iterator\",(function(){var e=Fh(this),t=e.kind,n=e.iterator.next(),o=n.value;return n.done||(n.value=\"keys\"===t?o.key:\"values\"===t?o.value:[o.key,o.value]),n})),Qh=function(){va(this,Qh,\"URLSearchParams\");var e,t,n,o,r,a,s,i,u,c=arguments.length>0?arguments[0]:void 0,l=this,p=[];if(Gh(l,{type:\"URLSearchParams\",entries:p,updateURL:function(){},updateSearchParams:Wh}),void 0!==c)if(B(c))if(\"function\"==typeof(e=_n(c)))for(n=(t=e.call(c)).next;!(o=n.call(t)).done;){if((s=(a=(r=Oh(Se(o.value))).next).call(r)).done||(i=a.call(r)).done||!a.call(r).done)throw TypeError(\"Expected sequence with length 2\");p.push({key:Mt(s.value),value:Mt(i.value)})}else for(u in c)se(c,u)&&p.push({key:u,value:Mt(c[u])});else zh(p,\"string\"==typeof c?\"?\"===c.charAt(0)?c.slice(1):c:Mt(c))},Zh=Qh.prototype;if(fa(Zh,{append:function(e,t){Jh(arguments.length,2);var n=Uh(this);n.entries.push({key:Mt(e),value:Mt(t)}),n.updateURL()},delete:function(e){Jh(arguments.length,1);for(var t=Uh(this),n=t.entries,o=Mt(e),r=0;r<n.length;)n[r].key===o?n.splice(r,1):r++;t.updateURL()},get:function(e){Jh(arguments.length,1);for(var t=Uh(this).entries,n=Mt(e),o=0;o<t.length;o++)if(t[o].key===n)return t[o].value;return null},getAll:function(e){Jh(arguments.length,1);for(var t=Uh(this).entries,n=Mt(e),o=[],r=0;r<t.length;r++)t[r].key===n&&o.push(t[r].value);return o},has:function(e){Jh(arguments.length,1);for(var t=Uh(this).entries,n=Mt(e),o=0;o<t.length;)if(t[o++].key===n)return!0;return!1},set:function(e,t){Jh(arguments.length,1);for(var n,o=Uh(this),r=o.entries,a=!1,s=Mt(e),i=Mt(t),u=0;u<r.length;u++)(n=r[u]).key===s&&(a?r.splice(u--,1):(a=!0,n.value=i));a||r.push({key:s,value:i}),o.updateURL()},sort:function(){var e,t,n,o=Uh(this),r=o.entries,a=r.slice();for(r.length=0,n=0;n<a.length;n++){for(e=a[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}o.updateURL()},forEach:function(e){for(var t,n=Uh(this).entries,o=Vt(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)o((t=n[r++]).value,t.key,this)},keys:function(){return new Xh(this,\"keys\")},values:function(){return new Xh(this,\"values\")},entries:function(){return new Xh(this,\"entries\")}},{enumerable:!0}),He(Zh,Ph,Zh.entries),He(Zh,\"toString\",(function(){for(var e,t=Uh(this).entries,n=[],o=0;o<t.length;)e=t[o++],n.push(Yh(e.key)+\"=\"+Yh(e.value));return n.join(\"&\")}),{enumerable:!0}),Fn(Qh,\"URLSearchParams\"),vt({global:!0,forced:!vh},{URLSearchParams:Qh}),!vh&&\"function\"==typeof wh){var ef=function(e){if(B(e)){var t,n=e.body;if(\"URLSearchParams\"===hn(n))return(t=e.headers?new wh(e.headers):new wh).has(\"content-type\")||t.set(\"content-type\",\"application/x-www-form-urlencoded;charset=UTF-8\"),qt(e,{body:G(0,String(n)),headers:G(0,t)})}return e};if(\"function\"==typeof Lh&&vt({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Lh(e,arguments.length>1?ef(arguments[1]):{})}}),\"function\"==typeof Rh){var tf=function(e){return va(this,tf,\"Request\"),new Rh(e,arguments.length>1?ef(arguments[1]):{})};bh.constructor=tf,tf.prototype=bh,vt({global:!0,forced:!0},{Request:tf})}}var nf,of={URLSearchParams:Qh,getState:Uh},rf=kn.codeAt,af=O.URL,sf=of.URLSearchParams,uf=of.getState,cf=Be.set,lf=Be.getterFor(\"URL\"),pf=Math.floor,df=Math.pow,gf=/[A-Za-z]/,hf=/[\\\\d+-.A-Za-z]/,ff=/\\\\d/,_f=/^0x/i,mf=/^[0-7]+$/,vf=/^\\\\d+$/,Mf=/^[\\\\dA-Fa-f]+$/,yf=/[\\\\0\\\\t\\\\n\\\\r #%/:<>?@[\\\\\\\\\\\\]^|]/,If=/[\\\\0\\\\t\\\\n\\\\r #/:<>?@[\\\\\\\\\\\\]^|]/,Tf=/^[\\\\u0000-\\\\u0020]+|[\\\\u0000-\\\\u0020]+$/g,Sf=/[\\\\t\\\\n\\\\r]/g,Df=function(e,t){var n,o,r;if(\"[\"==t.charAt(0)){if(\"]\"!=t.charAt(t.length-1))return\"Invalid host\";if(!(n=Cf(t.slice(1,-1))))return\"Invalid host\";e.host=n}else if(wf(e)){if(t=function(e){var t,n,o=[],r=e.toLowerCase().replace(Sh,\".\").split(\".\");for(t=0;t<r.length;t++)n=r[t],o.push(Th.test(n)?\"xn--\"+Nh(n):n);return o.join(\".\")}(t),yf.test(t))return\"Invalid host\";if(null===(n=Ef(t)))return\"Invalid host\";e.host=n}else{if(If.test(t))return\"Invalid host\";for(n=\"\",o=mn(t),r=0;r<o.length;r++)n+=Rf(o[r],kf);e.host=n}},Ef=function(e){var t,n,o,r,a,s,i,u=e.split(\".\");if(u.length&&\"\"==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],o=0;o<t;o++){if(\"\"==(r=u[o]))return e;if(a=10,r.length>1&&\"0\"==r.charAt(0)&&(a=_f.test(r)?16:8,r=r.slice(8==a?1:2)),\"\"===r)s=0;else{if(!(10==a?vf:8==a?mf:Mf).test(r))return e;s=parseInt(r,a)}n.push(s)}for(o=0;o<t;o++)if(s=n[o],o==t-1){if(s>=df(256,5-t))return null}else if(s>255)return null;for(i=n.pop(),o=0;o<n.length;o++)i+=n[o]*df(256,3-o);return i},Cf=function(e){var t,n,o,r,a,s,i,u=[0,0,0,0,0,0,0,0],c=0,l=null,p=0,d=function(){return e.charAt(p)};if(\":\"==d()){if(\":\"!=e.charAt(1))return;p+=2,l=++c}for(;d();){if(8==c)return;if(\":\"!=d()){for(t=n=0;n<4&&Mf.test(d());)t=16*t+parseInt(d(),16),p++,n++;if(\".\"==d()){if(0==n)return;if(p-=n,c>6)return;for(o=0;d();){if(r=null,o>0){if(!(\".\"==d()&&o<4))return;p++}if(!ff.test(d()))return;for(;ff.test(d());){if(a=parseInt(d(),10),null===r)r=a;else{if(0==r)return;r=10*r+a}if(r>255)return;p++}u[c]=256*u[c]+r,2!=++o&&4!=o||c++}if(4!=o)return;break}if(\":\"==d()){if(p++,!d())return}else if(d())return;u[c++]=t}else{if(null!==l)return;p++,l=++c}}if(null!==l)for(s=c-l,c=7;0!=c&&s>0;)i=u[c],u[c--]=u[l+s-1],u[l+--s]=i;else if(8!=c)return;return u},Af=function(e){var t,n,o,r;if(\"number\"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=pf(e/256);return t.join(\".\")}if(\"object\"==typeof e){for(t=\"\",o=function(e){for(var t=null,n=1,o=null,r=0,a=0;a<8;a++)0!==e[a]?(r>n&&(t=o,n=r),o=null,r=0):(null===o&&(o=a),++r);return r>n&&(t=o,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),o===n?(t+=n?\":\":\"::\",r=!0):(t+=e[n].toString(16),n<7&&(t+=\":\")));return\"[\"+t+\"]\"}return e},kf={},Nf=Ih({},kf,{\" \":1,\\'\"\\':1,\"<\":1,\">\":1,\"`\":1}),Of=Ih({},Nf,{\"#\":1,\"?\":1,\"{\":1,\"}\":1}),Lf=Ih({},Of,{\"/\":1,\":\":1,\";\":1,\"=\":1,\"@\":1,\"[\":1,\"\\\\\\\\\":1,\"]\":1,\"^\":1,\"|\":1}),Rf=function(e,t){var n=rf(e,0);return n>32&&n<127&&!se(t,e)?e:encodeURIComponent(e)},bf={ftp:21,file:null,http:80,https:443,ws:80,wss:443},wf=function(e){return se(bf,e.scheme)},Pf=function(e){return\"\"!=e.username||\"\"!=e.password},Gf=function(e){return!e.host||e.cannotBeABaseURL||\"file\"==e.scheme},Uf=function(e,t){var n;return 2==e.length&&gf.test(e.charAt(0))&&(\":\"==(n=e.charAt(1))||!t&&\"|\"==n)},Ff=function(e){var t;return e.length>1&&Uf(e.slice(0,2))&&(2==e.length||\"/\"===(t=e.charAt(2))||\"\\\\\\\\\"===t||\"?\"===t||\"#\"===t)},qf=function(e){var t=e.path,n=t.length;!n||\"file\"==e.scheme&&1==n&&Uf(t[0],!0)||t.pop()},xf=function(e){return\".\"===e||\"%2e\"===e.toLowerCase()},Vf={},Kf={},Bf={},Hf={},jf={},$f={},Yf={},zf={},Wf={},Jf={},Xf={},Qf={},Zf={},e_={},t_={},n_={},o_={},r_={},a_={},s_={},i_={},u_=function(e,t,n,o){var r,a,s,i,u,c=n||Vf,l=0,p=\"\",d=!1,g=!1,h=!1;for(n||(e.scheme=\"\",e.username=\"\",e.password=\"\",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Tf,\"\")),t=t.replace(Sf,\"\"),r=mn(t);l<=r.length;){switch(a=r[l],c){case Vf:if(!a||!gf.test(a)){if(n)return\"Invalid scheme\";c=Bf;continue}p+=a.toLowerCase(),c=Kf;break;case Kf:if(a&&(hf.test(a)||\"+\"==a||\"-\"==a||\".\"==a))p+=a.toLowerCase();else{if(\":\"!=a){if(n)return\"Invalid scheme\";p=\"\",c=Bf,l=0;continue}if(n&&(wf(e)!=se(bf,p)||\"file\"==p&&(Pf(e)||null!==e.port)||\"file\"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void(wf(e)&&bf[e.scheme]==e.port&&(e.port=null));p=\"\",\"file\"==e.scheme?c=e_:wf(e)&&o&&o.scheme==e.scheme?c=Hf:wf(e)?c=zf:\"/\"==r[l+1]?(c=jf,l++):(e.cannotBeABaseURL=!0,e.path.push(\"\"),c=a_)}break;case Bf:if(!o||o.cannotBeABaseURL&&\"#\"!=a)return\"Invalid scheme\";if(o.cannotBeABaseURL&&\"#\"==a){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",e.cannotBeABaseURL=!0,c=i_;break}c=\"file\"==o.scheme?e_:$f;continue;case Hf:if(\"/\"!=a||\"/\"!=r[l+1]){c=$f;continue}c=Wf,l++;break;case jf:if(\"/\"==a){c=Jf;break}c=r_;continue;case $f:if(e.scheme=o.scheme,a==nf)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if(\"/\"==a||\"\\\\\\\\\"==a&&wf(e))c=Yf;else if(\"?\"==a)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=\"\",c=s_;else{if(\"#\"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),c=r_;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",c=i_}break;case Yf:if(!wf(e)||\"/\"!=a&&\"\\\\\\\\\"!=a){if(\"/\"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,c=r_;continue}c=Jf}else c=Wf;break;case zf:if(c=Wf,\"/\"!=a||\"/\"!=p.charAt(l+1))continue;l++;break;case Wf:if(\"/\"!=a&&\"\\\\\\\\\"!=a){c=Jf;continue}break;case Jf:if(\"@\"==a){d&&(p=\"%40\"+p),d=!0,s=mn(p);for(var f=0;f<s.length;f++){var _=s[f];if(\":\"!=_||h){var m=Rf(_,Lf);h?e.password+=m:e.username+=m}else h=!0}p=\"\"}else if(a==nf||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&wf(e)){if(d&&\"\"==p)return\"Invalid authority\";l-=mn(p).length+1,p=\"\",c=Xf}else p+=a;break;case Xf:case Qf:if(n&&\"file\"==e.scheme){c=n_;continue}if(\":\"!=a||g){if(a==nf||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&wf(e)){if(wf(e)&&\"\"==p)return\"Invalid host\";if(n&&\"\"==p&&(Pf(e)||null!==e.port))return;if(i=Df(e,p))return i;if(p=\"\",c=o_,n)return;continue}\"[\"==a?g=!0:\"]\"==a&&(g=!1),p+=a}else{if(\"\"==p)return\"Invalid host\";if(i=Df(e,p))return i;if(p=\"\",c=Zf,n==Qf)return}break;case Zf:if(!ff.test(a)){if(a==nf||\"/\"==a||\"?\"==a||\"#\"==a||\"\\\\\\\\\"==a&&wf(e)||n){if(\"\"!=p){var v=parseInt(p,10);if(v>65535)return\"Invalid port\";e.port=wf(e)&&v===bf[e.scheme]?null:v,p=\"\"}if(n)return;c=o_;continue}return\"Invalid port\"}p+=a;break;case e_:if(e.scheme=\"file\",\"/\"==a||\"\\\\\\\\\"==a)c=t_;else{if(!o||\"file\"!=o.scheme){c=r_;continue}if(a==nf)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if(\"?\"==a)e.host=o.host,e.path=o.path.slice(),e.query=\"\",c=s_;else{if(\"#\"!=a){Ff(r.slice(l).join(\"\"))||(e.host=o.host,e.path=o.path.slice(),qf(e)),c=r_;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment=\"\",c=i_}}break;case t_:if(\"/\"==a||\"\\\\\\\\\"==a){c=n_;break}o&&\"file\"==o.scheme&&!Ff(r.slice(l).join(\"\"))&&(Uf(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),c=r_;continue;case n_:if(a==nf||\"/\"==a||\"\\\\\\\\\"==a||\"?\"==a||\"#\"==a){if(!n&&Uf(p))c=r_;else if(\"\"==p){if(e.host=\"\",n)return;c=o_}else{if(i=Df(e,p))return i;if(\"localhost\"==e.host&&(e.host=\"\"),n)return;p=\"\",c=o_}continue}p+=a;break;case o_:if(wf(e)){if(c=r_,\"/\"!=a&&\"\\\\\\\\\"!=a)continue}else if(n||\"?\"!=a)if(n||\"#\"!=a){if(a!=nf&&(c=r_,\"/\"!=a))continue}else e.fragment=\"\",c=i_;else e.query=\"\",c=s_;break;case r_:if(a==nf||\"/\"==a||\"\\\\\\\\\"==a&&wf(e)||!n&&(\"?\"==a||\"#\"==a)){if(\"..\"===(u=(u=p).toLowerCase())||\"%2e.\"===u||\".%2e\"===u||\"%2e%2e\"===u?(qf(e),\"/\"==a||\"\\\\\\\\\"==a&&wf(e)||e.path.push(\"\")):xf(p)?\"/\"==a||\"\\\\\\\\\"==a&&wf(e)||e.path.push(\"\"):(\"file\"==e.scheme&&!e.path.length&&Uf(p)&&(e.host&&(e.host=\"\"),p=p.charAt(0)+\":\"),e.path.push(p)),p=\"\",\"file\"==e.scheme&&(a==nf||\"?\"==a||\"#\"==a))for(;e.path.length>1&&\"\"===e.path[0];)e.path.shift();\"?\"==a?(e.query=\"\",c=s_):\"#\"==a&&(e.fragment=\"\",c=i_)}else p+=Rf(a,Of);break;case a_:\"?\"==a?(e.query=\"\",c=s_):\"#\"==a?(e.fragment=\"\",c=i_):a!=nf&&(e.path[0]+=Rf(a,kf));break;case s_:n||\"#\"!=a?a!=nf&&(\"\\'\"==a&&wf(e)?e.query+=\"%27\":e.query+=\"#\"==a?\"%23\":Rf(a,kf)):(e.fragment=\"\",c=i_);break;case i_:a!=nf&&(e.fragment+=Rf(a,Nf))}l++}},c_=function(e){var t,n,o=va(this,c_,\"URL\"),r=arguments.length>1?arguments[1]:void 0,a=Mt(e),s=cf(o,{type:\"URL\"});if(void 0!==r)if(r instanceof c_)t=lf(r);else if(n=u_(t={},Mt(r)))throw TypeError(n);if(n=u_(s,a,null,t))throw TypeError(n);var i=s.searchParams=new sf,u=uf(i);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(i)||null},R||(o.href=p_.call(o),o.origin=d_.call(o),o.protocol=g_.call(o),o.username=h_.call(o),o.password=f_.call(o),o.host=__.call(o),o.hostname=m_.call(o),o.port=v_.call(o),o.pathname=M_.call(o),o.search=y_.call(o),o.searchParams=I_.call(o),o.hash=T_.call(o))},l_=c_.prototype,p_=function(){var e=lf(this),t=e.scheme,n=e.username,o=e.password,r=e.host,a=e.port,s=e.path,i=e.query,u=e.fragment,c=t+\":\";return null!==r?(c+=\"//\",Pf(e)&&(c+=n+(o?\":\"+o:\"\")+\"@\"),c+=Af(r),null!==a&&(c+=\":\"+a)):\"file\"==t&&(c+=\"//\"),c+=e.cannotBeABaseURL?s[0]:s.length?\"/\"+s.join(\"/\"):\"\",null!==i&&(c+=\"?\"+i),null!==u&&(c+=\"#\"+u),c},d_=function(){var e=lf(this),t=e.scheme,n=e.port;if(\"blob\"==t)try{return new c_(t.path[0]).origin}catch(_M){return\"null\"}return\"file\"!=t&&wf(e)?t+\"://\"+Af(e.host)+(null!==n?\":\"+n:\"\"):\"null\"},g_=function(){return lf(this).scheme+\":\"},h_=function(){return lf(this).username},f_=function(){return lf(this).password},__=function(){var e=lf(this),t=e.host,n=e.port;return null===t?\"\":null===n?Af(t):Af(t)+\":\"+n},m_=function(){var e=lf(this).host;return null===e?\"\":Af(e)},v_=function(){var e=lf(this).port;return null===e?\"\":String(e)},M_=function(){var e=lf(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?\"/\"+t.join(\"/\"):\"\"},y_=function(){var e=lf(this).query;return e?\"?\"+e:\"\"},I_=function(){return lf(this).searchParams},T_=function(){var e=lf(this).fragment;return e?\"#\"+e:\"\"},S_=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(R&&Rt(l_,{href:S_(p_,(function(e){var t=lf(this),n=Mt(e),o=u_(t,n);if(o)throw TypeError(o);uf(t.searchParams).updateSearchParams(t.query)})),origin:S_(d_),protocol:S_(g_,(function(e){var t=lf(this);u_(t,Mt(e)+\":\",Vf)})),username:S_(h_,(function(e){var t=lf(this),n=mn(Mt(e));if(!Gf(t)){t.username=\"\";for(var o=0;o<n.length;o++)t.username+=Rf(n[o],Lf)}})),password:S_(f_,(function(e){var t=lf(this),n=mn(Mt(e));if(!Gf(t)){t.password=\"\";for(var o=0;o<n.length;o++)t.password+=Rf(n[o],Lf)}})),host:S_(__,(function(e){var t=lf(this);t.cannotBeABaseURL||u_(t,Mt(e),Xf)})),hostname:S_(m_,(function(e){var t=lf(this);t.cannotBeABaseURL||u_(t,Mt(e),Qf)})),port:S_(v_,(function(e){var t=lf(this);Gf(t)||(\"\"==(e=Mt(e))?t.port=null:u_(t,e,Zf))})),pathname:S_(M_,(function(e){var t=lf(this);t.cannotBeABaseURL||(t.path=[],u_(t,Mt(e),o_))})),search:S_(y_,(function(e){var t=lf(this);\"\"==(e=Mt(e))?t.query=null:(\"?\"==e.charAt(0)&&(e=e.slice(1)),t.query=\"\",u_(t,e,s_)),uf(t.searchParams).updateSearchParams(t.query)})),searchParams:S_(I_),hash:S_(T_,(function(e){var t=lf(this);\"\"!=(e=Mt(e))?(\"#\"==e.charAt(0)&&(e=e.slice(1)),t.fragment=\"\",u_(t,e,i_)):t.fragment=null}))}),He(l_,\"toJSON\",(function(){return p_.call(this)}),{enumerable:!0}),He(l_,\"toString\",(function(){return p_.call(this)}),{enumerable:!0}),af){var D_=af.createObjectURL,E_=af.revokeObjectURL;D_&&He(c_,\"createObjectURL\",(function(e){return D_.apply(af,arguments)})),E_&&He(c_,\"revokeObjectURL\",(function(e){return E_.apply(af,arguments)}))}Fn(c_,\"URL\"),vt({global:!0,forced:!vh,sham:!R},{URL:c_}),vt({target:\"Object\",stat:!0,forced:Object.assign!==Ih},{assign:Ih});var C_={JSON:{TYPE:{C2C:{NOTICE:1,COMMON:9,EVENT:10},GROUP:{COMMON:3,TIP:4,SYSTEM:5,TIP2:6},FRIEND:{NOTICE:7},PROFILE:{NOTICE:8}},SUBTYPE:{C2C:{COMMON:0,READED:92,KICKEDOUT:96},GROUP:{COMMON:0,LOVEMESSAGE:1,TIP:2,REDPACKET:3}},OPTIONS:{GROUP:{JOIN:1,QUIT:2,KICK:3,SET_ADMIN:4,CANCEL_ADMIN:5,MODIFY_GROUP_INFO:6,MODIFY_MEMBER_INFO:7}}},PROTOBUF:{},IMAGE_TYPES:{ORIGIN:1,LARGE:2,SMALL:3},IMAGE_FORMAT:{JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255}},A_={NICK:\"Tag_Profile_IM_Nick\",GENDER:\"Tag_Profile_IM_Gender\",BIRTHDAY:\"Tag_Profile_IM_BirthDay\",LOCATION:\"Tag_Profile_IM_Location\",SELFSIGNATURE:\"Tag_Profile_IM_SelfSignature\",ALLOWTYPE:\"Tag_Profile_IM_AllowType\",LANGUAGE:\"Tag_Profile_IM_Language\",AVATAR:\"Tag_Profile_IM_Image\",MESSAGESETTINGS:\"Tag_Profile_IM_MsgSettings\",ADMINFORBIDTYPE:\"Tag_Profile_IM_AdminForbidType\",LEVEL:\"Tag_Profile_IM_Level\",ROLE:\"Tag_Profile_IM_Role\"},k_={UNKNOWN:\"Gender_Type_Unknown\",FEMALE:\"Gender_Type_Female\",MALE:\"Gender_Type_Male\"},N_={NONE:\"AdminForbid_Type_None\",SEND_OUT:\"AdminForbid_Type_SendOut\"},O_={NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_ANY:\"AllowType_Type_AllowAny\",DENY_ANY:\"AllowType_Type_DenyAny\"},L_=\"JoinedSuccess\",R_=\"WaitAdminApproval\",b_=function(){function e(t){o(this,e),this._imageMemoryURL=\"\",ai?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=ro.MSG_IMAGE,this._percent=0,this.content={imageFormat:t.imageFormat||C_.IMAGE_FORMAT.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._defaultImage=\"http://imgcache.qq.com/open/qcloud/video/act/webim-images/default.jpg\",this._autoFixUrl()}return a(e,[{key:\"_initImageInfoModel\",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=iu(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||\"\",this.url=t.url||e._imageMemoryURL||e._defaultImage},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:\"initImageInfoArray\",value:function(e){for(var t=0,n=null,o=null;t<=2;)o=Ji(e)||Ji(e[t])?{type:0,size:0,width:0,height:0,url:\"\"}:e[t],(n=new this._ImageInfoModel(o)).setSizeType(t+1),n.setType(t),this.addImageInfo(n),t++;this.updateAccessSideImageInfoArray()}},{key:\"updateImageInfoArray\",value:function(e){for(var t,n=this.content.imageInfoArray.length,o=0;o<n;o++)t=this.content.imageInfoArray[o],e[o].size&&(t.size=e[o].size),e[o].url&&t.setImageUrl(e[o].url),e[o].width&&(t.width=e[o].width),e[o].height&&(t.height=e[o].height)}},{key:\"_autoFixUrl\",value:function(){for(var e=this.content.imageInfoArray.length,t=\"\",n=\"\",o=[\"http\",\"https\"],r=null,a=0;a<e;a++)this.content.imageInfoArray[a].url&&\"\"!==(r=this.content.imageInfoArray[a]).imageUrl&&(n=r.imageUrl.slice(0,r.imageUrl.indexOf(\"://\")+1),t=r.imageUrl.slice(r.imageUrl.indexOf(\"://\")+1),o.indexOf(n)<0&&(n=\"https:\"),this.content.imageInfoArray[a].setImageUrl([n,t].join(\"\")))}},{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateImageFormat\",value:function(e){this.content.imageFormat=C_.IMAGE_FORMAT[e.toUpperCase()]||C_.IMAGE_FORMAT.UNKNOWN}},{key:\"createImageDataASURLInWeb\",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:\"createImageDataASURLInWXMiniApp\",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:\"replaceImageInfo\",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:\"addImageInfo\",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:\"updateAccessSideImageInfoArray\",value:function(){var e=this.content.imageInfoArray,t=e[0],n=t.width,o=void 0===n?0:n,r=t.height,a=void 0===r?0:r;0!==o&&0!==a&&(Eu(e),Object.assign(e[2],Du({originWidth:o,originHeight:a,min:720})))}},{key:\"sendable\",value:function(){return 0!==this.content.imageInfoArray.length&&(\"\"!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size)}}]),e}(),w_=function(){function e(t){o(this,e),this.type=ro.MSG_FACE,this.content=t||null}return a(e,[{key:\"sendable\",value:function(){return null!==this.content}}]),e}(),P_=function(){function e(t){o(this,e),this.type=ro.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:t.url,remoteAudioUrl:t.url||\"\",uuid:t.uuid}}return a(e,[{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateAudioUrl\",value:function(e){this.content.remoteAudioUrl=e}},{key:\"sendable\",value:function(){return\"\"!==this.content.remoteAudioUrl}}]),e}();vt({target:\"Object\",stat:!0,forced:!R,sham:!R},{defineProperty:Ee.f});var G_={from:!0,groupID:!0,groupName:!0,to:!0},U_=function(){function e(t){o(this,e),this.type=ro.MSG_GRP_TIP,this.content={},this._initContent(t)}return a(e,[{key:\"_initContent\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"remarkInfo\":break;case\"groupProfile\":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case\"operatorInfo\":case\"memberInfoList\":break;case\"msgMemberInfo\":t.content.memberList=e[n],Object.defineProperty(t.content,\"msgMemberInfo\",{get:function(){return Ki.warn(\"!!! 禁言的群提示消息中的 payload.msgMemberInfo 属性即将废弃，请使用 payload.memberList 属性替代。 \\\\n\",\"msgMemberInfo 中的 shutupTime 属性对应更改为 memberList 中的 muteTime 属性，表示禁言时长。 \\\\n\",\"参考：群提示消息 https://web.sdk.qcloud.com/im/doc/zh-cn/Message.html#.GroupTipPayload\"),t.content.memberList.map((function(e){return{userID:e.userID,shutupTime:e.muteTime}}))}});break;case\"onlineMemberInfo\":break;case\"memberNum\":t.content[n]=e[n],t.content.memberCount=e[n];break;default:t.content[n]=e[n]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:\"_initGroupProfile\",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];G_[o]&&(this.content.groupProfile[o]=e[o])}}}]),e}(),F_={from:!0,groupID:!0,groupName:!0,to:!0},q_=function(){function e(t){o(this,e),this.type=ro.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return a(e,[{key:\"_initContent\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"memberInfoList\":break;case\"remarkInfo\":t.content.handleMessage=e[n];break;case\"groupProfile\":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}}))}},{key:\"_initGroupProfile\",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];F_[o]&&(\"groupName\"===o?this.content.groupProfile.name=e[o]:this.content.groupProfile[o]=e[o])}}}]),e}(),x_=Math.min,V_=[].lastIndexOf,K_=!!V_&&1/[1].lastIndexOf(1,-0)<0,B_=zt(\"lastIndexOf\"),H_=K_||!B_?function(e){if(K_)return V_.apply(this,arguments)||0;var t=K(this),n=We(t.length),o=n-1;for(arguments.length>1&&(o=x_(o,Ye(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:V_;vt({target:\"Array\",proto:!0,forced:H_!==[].lastIndexOf},{lastIndexOf:H_});var j_=function(){function e(t){o(this,e),this.type=ro.MSG_FILE,this._percent=0;var n=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:t.url||\"\",uuid:t.uuid,fileName:n.name||\"\",fileSize:n.size||0}}return a(e,[{key:\"_getFileInfo\",value:function(e){if(e.fileName&&e.fileSize)return{size:e.fileSize,name:e.fileName};if(ai)return{};var t=e.file.files[0];return{size:t.size,name:t.name,type:t.type.slice(t.type.lastIndexOf(\"/\")+1).toLowerCase()}}},{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateFileUrl\",value:function(e){this.content.fileUrl=e}},{key:\"sendable\",value:function(){return\"\"!==this.content.fileUrl&&(\"\"!==this.content.fileName&&0!==this.content.fileSize)}}]),e}(),$_=function(){function e(t){o(this,e),this.type=ro.MSG_CUSTOM,this.content={data:t.data||\"\",description:t.description||\"\",extension:t.extension||\"\"}}return a(e,[{key:\"setData\",value:function(e){return this.content.data=e,this}},{key:\"setDescription\",value:function(e){return this.content.description=e,this}},{key:\"setExtension\",value:function(e){return this.content.extension=e,this}},{key:\"sendable\",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),e}(),Y_=function(){function e(t){o(this,e),this.type=ro.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl||t.videoUrl||\"\",videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:t.videoUrl,videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,thumbHeight:t.thumbHeight,thumbSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:t.thumbUrl}}return a(e,[{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateVideoUrl\",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:\"sendable\",value:function(){return\"\"!==this.content.remoteVideoUrl}}]),e}(),z_=function e(t){o(this,e),this.type=ro.MSG_GEO,this.content=t},W_=function(){function e(t){if(o(this,e),this.from=t.from,this.messageSender=t.from,this.time=t.time,this.messageSequence=t.sequence,this.clientSequence=t.clientSequence||t.sequence,this.messageRandom=t.random,this.cloudCustomData=t.cloudCustomData||\"\",t.ID)this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.messageBody=[{type:t.type,payload:t.payload}],t.conversationType.startsWith(ro.CONV_C2C)?this.receiverUserID=t.to:t.conversationType.startsWith(ro.CONV_GROUP)&&(this.receiverGroupID=t.to),this.messageReceiver=t.to;else{this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.messageBody=[];var n=t.elements[0].type,r=t.elements[0].content;this._patchRichMediaPayload(n,r),n===ro.MSG_MERGER?this.messageBody.push({type:n,payload:new J_(r).content}):this.messageBody.push({type:n,payload:r}),t.groupID&&(this.receiverGroupID=t.groupID,this.messageReceiver=t.groupID),t.to&&(this.receiverUserID=t.to,this.messageReceiver=t.to)}}return a(e,[{key:\"_patchRichMediaPayload\",value:function(e,t){e===ro.MSG_IMAGE?t.imageInfoArray.forEach((function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))})):e===ro.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===ro.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===ro.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}}]),e}(),J_=function(){function e(t){if(o(this,e),this.type=ro.MSG_MERGER,this.content={downloadKey:\"\",pbDownloadKey:\"\",messageList:[],title:\"\",abstractList:[],compatibleText:\"\",version:0,layersOverLimit:!1},t.downloadKey){var n=t.downloadKey,r=t.pbDownloadKey,a=t.title,s=t.abstractList,i=t.compatibleText,u=t.version;this.content.downloadKey=n,this.content.pbDownloadKey=r,this.content.title=a,this.content.abstractList=s,this.content.compatibleText=i,this.content.version=u||0}else if(Lu(t.messageList))1===t.layersOverLimit&&(this.content.layersOverLimit=!0);else{var c=t.messageList,l=t.title,p=t.abstractList,d=t.compatibleText,g=t.version,h=[];c.forEach((function(e){if(!Lu(e)){var t=new W_(e);h.push(t)}})),this.content.messageList=h,this.content.title=l,this.content.abstractList=p,this.content.compatibleText=d,this.content.version=g||0}Ki.debug(\"MergerElement.content:\",this.content)}return a(e,[{key:\"sendable\",value:function(){return!Lu(this.content.messageList)||!Lu(this.content.downloadKey)}}]),e}(),X_={1:ro.MSG_PRIORITY_HIGH,2:ro.MSG_PRIORITY_NORMAL,3:ro.MSG_PRIORITY_LOW,4:ro.MSG_PRIORITY_LOWEST},Q_=function(){function e(t){o(this,e),this.ID=\"\",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||ro.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||0===t.random?t.random:iu(),this.priority=this._computePriority(t.priority),this.nick=t.nick||\"\",this.avatar=t.avatar||\"\",this.isPeerRead=!1,this.nameCard=\"\",this._elements=[],this.isPlaceMessage=t.isPlaceMessage||0,this.isRevoked=2===t.isPlaceMessage||8===t.msgFlagBits,this.geo={},this.from=t.from||null,this.to=t.to||null,this.flow=\"\",this.isSystemMessage=t.isSystemMessage||!1,this.protocol=t.protocol||\"JSON\",this.isResend=!1,this.isRead=!1,this.status=t.status||Ec.SUCCESS,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=t.cloudCustomData||\"\",this.isDeleted=!1,this.isModified=!1,this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null),this.handleGroupAtInfo(t)}return a(e,[{key:\"elements\",get:function(){return Ki.warn(\"！！！Message 实例的 elements 属性即将废弃，请尽快修改。使用 type 和 payload 属性处理单条消息，兼容组合消息使用 _elements 属性！！！\"),this._elements}},{key:\"getElements\",value:function(){return this._elements}},{key:\"extractGroupInfo\",value:function(e){if(null!==e){$i(e.nick)&&(this.nick=e.nick),$i(e.avatar)&&(this.avatar=e.avatar);var t=e.messageFromAccountExtraInformation;zi(t)&&$i(t.nameCard)&&(this.nameCard=t.nameCard)}}},{key:\"handleGroupAtInfo\",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach((function(e){e!==ro.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(ro.MSG_AT_ALL))})),Wi(e.groupAtInfo)&&e.groupAtInfo.forEach((function(e){1===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):2===e.groupAtAllFlag&&t.atUserList.push(ro.MSG_AT_ALL)}))}},{key:\"getGroupAtInfoList\",value:function(){return this._groupAtInfoList}},{key:\"_initProxy\",value:function(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}},{key:\"reInitialize\",value:function(e){e&&(this.status=this.from?Ec.SUCCESS:Ec.UNSEND,!this.from&&(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID(e)}},{key:\"isSendable\",value:function(){return 0!==this._elements.length&&(\"function\"!=typeof this._elements[0].sendable?(Ki.warn(\"\".concat(this._elements[0].type,\\' need \"boolean : sendable()\" method\\')),!1):this._elements[0].sendable())}},{key:\"_initTo\",value:function(e){this.conversationType===ro.CONV_GROUP&&(this.to=e.groupID)}},{key:\"_initSequence\",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return Ki.error(\"autoIncrementIndex(string: key) need key parameter\"),!1;if(void 0===pu[e]){var t=new Date,n=\"3\".concat(t.getHours()).slice(-2),o=\"0\".concat(t.getMinutes()).slice(-2),r=\"0\".concat(t.getSeconds()).slice(-2);pu[e]=parseInt([n,o,r,\"0001\"].join(\"\")),n=null,o=null,r=null,Ki.log(\"autoIncrementIndex start index:\".concat(pu[e]))}return pu[e]++}(e)),0===this.sequence&&this.conversationType===ro.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:\"generateMessageID\",value:function(e){var t=e===this.from?1:0,n=this.sequence>0?this.sequence:this.clientSequence;this.ID=\"\".concat(this.conversationID,\"-\").concat(n,\"-\").concat(this.random,\"-\").concat(t)}},{key:\"_initFlow\",value:function(e){\"\"!==e&&(e===this.from?(this.flow=\"out\",this.isRead=!0):this.flow=\"in\")}},{key:\"_concatConversationID\",value:function(e){var t=this.to,n=\"\",o=this.conversationType;o!==ro.CONV_SYSTEM?(n=o===ro.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID=\"\".concat(o).concat(n)):this.conversationID=ro.CONV_SYSTEM}},{key:\"isElement\",value:function(e){return e instanceof _h||e instanceof b_||e instanceof w_||e instanceof P_||e instanceof j_||e instanceof Y_||e instanceof U_||e instanceof q_||e instanceof $_||e instanceof z_||e instanceof J_}},{key:\"setElement\",value:function(e){var t=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var n=function(e){if(e.type&&e.content)switch(e.type){case ro.MSG_TEXT:t.setTextElement(e.content);break;case ro.MSG_IMAGE:t.setImageElement(e.content);break;case ro.MSG_AUDIO:t.setAudioElement(e.content);break;case ro.MSG_FILE:t.setFileElement(e.content);break;case ro.MSG_VIDEO:t.setVideoElement(e.content);break;case ro.MSG_CUSTOM:t.setCustomElement(e.content);break;case ro.MSG_GEO:t.setGEOElement(e.content);break;case ro.MSG_GRP_TIP:t.setGroupTipElement(e.content);break;case ro.MSG_GRP_SYS_NOTICE:t.setGroupSystemNoticeElement(e.content);break;case ro.MSG_FACE:t.setFaceElement(e.content);break;case ro.MSG_MERGER:t.setMergerElement(e.content);break;default:Ki.warn(e.type,e.content,\"no operation......\")}};if(Wi(e))for(var o=0;o<e.length;o++)n(e[o]);else n(e);this._initProxy()}},{key:\"clearElement\",value:function(){this._elements.length=0}},{key:\"setTextElement\",value:function(e){var t=\"string\"==typeof e?e:e.text,n=new _h({text:t});this._elements.push(n)}},{key:\"setImageElement\",value:function(e){var t=new b_(e);this._elements.push(t)}},{key:\"setAudioElement\",value:function(e){var t=new P_(e);this._elements.push(t)}},{key:\"setFileElement\",value:function(e){var t=new j_(e);this._elements.push(t)}},{key:\"setVideoElement\",value:function(e){var t=new Y_(e);this._elements.push(t)}},{key:\"setGEOElement\",value:function(e){var t=new z_(e);this._elements.push(t)}},{key:\"setCustomElement\",value:function(e){var t=new $_(e);this._elements.push(t)}},{key:\"setGroupTipElement\",value:function(e){var t={},n=e.operationType;Lu(e.memberInfoList)?e.operatorInfo&&(t=e.operatorInfo):n!==ro.GRP_TIP_MBR_JOIN&&n!==ro.GRP_TIP_MBR_KICKED_OUT&&n!==ro.GRP_TIP_MBR_SET_ADMIN&&n!==ro.GRP_TIP_MBR_CANCELED_ADMIN||(t=e.memberInfoList[0]);var o=t,r=o.nick,a=o.avatar;$i(r)&&(this.nick=r),$i(a)&&(this.avatar=a);var s=new U_(e);this._elements.push(s)}},{key:\"setGroupSystemNoticeElement\",value:function(e){var t=new q_(e);this._elements.push(t)}},{key:\"setFaceElement\",value:function(e){var t=new w_(e);this._elements.push(t)}},{key:\"setMergerElement\",value:function(e){var t=new J_(e);this._elements.push(t)}},{key:\"setIsRead\",value:function(e){this.isRead=e}},{key:\"setRelayFlag\",value:function(e){this._relayFlag=e}},{key:\"getRelayFlag\",value:function(){return this._relayFlag}},{key:\"setOnlineOnlyFlag\",value:function(e){this._onlineOnlyFlag=e}},{key:\"getOnlineOnlyFlag\",value:function(){return this._onlineOnlyFlag}},{key:\"_computePriority\",value:function(e){if(Ji(e))return ro.MSG_PRIORITY_NORMAL;if($i(e)&&-1!==Object.values(X_).indexOf(e))return e;if(ji(e)){var t=\"\"+e;if(-1!==Object.keys(X_).indexOf(t))return X_[t]}return ro.MSG_PRIORITY_NORMAL}},{key:\"setNickAndAvatar\",value:function(e){var t=e.nick,n=e.avatar;$i(t)&&(this.nick=t),$i(n)&&(this.avatar=n)}},{key:\"setNameCard\",value:function(e){$i(e)&&(this.nameCard=e)}}]),e}(),Z_=function(e){return{code:0,data:e||{}}},em=\"https://cloud.tencent.com/document/product/\",tm=\"您可以在即时通信 IM 控制台的【开发辅助工具(https://console.cloud.tencent.com/im-detail/tool-usersig)】页面校验 UserSig。\",nm=\"UserSig 非法，请使用官网提供的 API 重新生成 UserSig(\".concat(em,\"269/32688)。\"),om=\"#.E6.B6.88.E6.81.AF.E5.85.83.E7.B4.A0-timmsgelement\",rm={70001:\"UserSig 已过期，请重新生成。建议 UserSig 有效期设置不小于24小时。\",70002:\"UserSig 长度为0，请检查传入的 UserSig 是否正确。\",70003:nm,70005:nm,70009:\"UserSig 验证失败，可能因为生成 UserSig 时混用了其他 SDKAppID 的私钥或密钥导致，请使用对应 SDKAppID 下的私钥或密钥重新生成 UserSig(\".concat(em,\"269/32688)。\"),70013:\"请求中的 UserID 与生成 UserSig 时使用的 UserID 不匹配。\".concat(tm),70014:\"请求中的 SDKAppID 与生成 UserSig 时使用的 SDKAppID 不匹配。\".concat(tm),70016:\"密钥不存在，UserSig 验证失败，请在即时通信 IM 控制台获取密钥(\".concat(em,\"269/32578#.E8.8E.B7.E5.8F.96.E5.AF.86.E9.92.A5)。\"),70020:\"SDKAppID 未找到，请在即时通信 IM 控制台确认应用信息。\",70050:\"UserSig 验证次数过于频繁。请检查 UserSig 是否正确，并于1分钟后重新验证。\".concat(tm),70051:\"帐号被拉入黑名单。\",70052:\"UserSig 已经失效，请重新生成，再次尝试。\",70107:\"因安全原因被限制登录，请不要频繁登录。\",70169:\"请求的用户帐号不存在。\",70114:\"\".concat(\"服务端内部超时，请稍后重试。\"),70202:\"\".concat(\"服务端内部超时，请稍后重试。\"),70206:\"请求中批量数量不合法。\",70402:\"参数非法，请检查必填字段是否填充，或者字段的填充是否满足协议要求。\",70403:\"请求失败，需要 App 管理员权限。\",70398:\"帐号数超限。如需创建多于100个帐号，请将应用升级为专业版，具体操作指引请参见购买指引(\".concat(em,\"269/32458)。\"),70500:\"\".concat(\"服务端内部错误，请重试。\"),71e3:\"删除帐号失败。仅支持删除体验版帐号，您当前应用为专业版，暂不支持帐号删除。\",20001:\"请求包非法。\",20002:\"UserSig 或 A2 失效。\",20003:\"消息发送方或接收方 UserID 无效或不存在，请检查 UserID 是否已导入即时通信 IM。\",20004:\"网络异常，请重试。\",20005:\"\".concat(\"服务端内部错误，请重试。\"),20006:\"触发发送\".concat(\"单聊消息\",\"之前回调，App 后台返回禁止下发该消息。\"),20007:\"发送\".concat(\"单聊消息\",\"，被对方拉黑，禁止发送。消息发送状态默认展示为失败，您可以登录控制台修改该场景下的消息发送状态展示结果，具体操作请参见消息保留设置(\").concat(em,\"269/38656)。\"),20009:\"消息发送双方互相不是好友，禁止发送（配置\".concat(\"单聊消息\",\"校验好友关系才会出现）。\"),20010:\"发送\".concat(\"单聊消息\",\"，自己不是对方的好友（单向关系），禁止发送。\"),20011:\"发送\".concat(\"单聊消息\",\"，对方不是自己的好友（单向关系），禁止发送。\"),20012:\"发送方被禁言，该条消息被禁止发送。\",20016:\"消息撤回超过了时间限制（默认2分钟）。\",20018:\"删除漫游内部错误。\",90001:\"JSON 格式解析失败，请检查请求包是否符合 JSON 规范。\",90002:\"\".concat(\"JSON 格式请求包体\",\"中 MsgBody 不符合消息格式描述，或者 MsgBody 不是 Array 类型，请参考 TIMMsgElement 对象的定义(\").concat(em,\"269/2720\").concat(om,\")。\"),90003:\"\".concat(\"JSON 格式请求包体\",\"中缺少 To_Account 字段或者 To_Account 帐号不存在。\"),90005:\"\".concat(\"JSON 格式请求包体\",\"中缺少 MsgRandom 字段或者 MsgRandom 字段不是 Integer 类型。\"),90006:\"\".concat(\"JSON 格式请求包体\",\"中缺少 MsgTimeStamp 字段或者 MsgTimeStamp 字段不是 Integer 类型。\"),90007:\"\".concat(\"JSON 格式请求包体\",\"中 MsgBody 类型不是 Array 类型，请将其修改为 Array 类型。\"),90008:\"\".concat(\"JSON 格式请求包体\",\"中缺少 From_Account 字段或者 From_Account 帐号不存在。\"),90009:\"请求需要 App 管理员权限。\",90010:\"\".concat(\"JSON 格式请求包体\",\"不符合消息格式描述，请参考 TIMMsgElement 对象的定义(\").concat(em,\"269/2720\").concat(om,\")。\"),90011:\"批量发消息目标帐号超过500，请减少 To_Account 中目标帐号数量。\",90012:\"To_Account 没有注册或不存在，请确认 To_Account 是否导入即时通信 IM 或者是否拼写错误。\",90026:\"消息离线存储时间错误（最多不能超过7天）。\",90031:\"\".concat(\"JSON 格式请求包体\",\"中 SyncOtherMachine 字段不是 Integer 类型。\"),90044:\"\".concat(\"JSON 格式请求包体\",\"中 MsgLifeTime 字段不是 Integer 类型。\"),90048:\"请求的用户帐号不存在。\",90054:\"撤回请求中的 MsgKey 不合法。\",90994:\"\".concat(\"服务端内部错误，请重试。\"),90995:\"\".concat(\"服务端内部错误，请重试。\"),91e3:\"\".concat(\"服务端内部错误，请重试。\"),90992:\"\".concat(\"服务端内部错误，请重试。\",\"如果所有请求都返回该错误码，且 App 配置了第三方回调，请检查 App 服务端是否正常向即时通信 IM 后台服务端返回回调结果。\"),93e3:\"JSON 数据包超长，消息包体请不要超过8k。\",91101:\"Web 端长轮询被踢（Web 端同时在线实例个数超出限制）。\",10002:\"\".concat(\"服务端内部错误，请重试。\"),10003:\"请求中的接口名称错误，请核对接口名称并重试。\",10004:\"参数非法，请根据错误描述检查请求是否正确。\",10005:\"请求包体中携带的帐号数量过多。\",10006:\"操作频率限制，请尝试降低调用的频率。\",10007:\"操作权限不足，例如 Work \".concat(\"群组\",\"中普通成员尝试执行踢人操作，但只有 App 管理员才有权限。\"),10008:\"请求非法，可能是请求中携带的签名信息验证不正确，请再次尝试。\",10009:\"该群不允许群主主动退出。\",10010:\"\".concat(\"群组\",\"不存在，或者曾经存在过，但是目前已经被解散。\"),10011:\"解析 JSON 包体失败，请检查包体的格式是否符合 JSON 格式。\",10012:\"发起操作的 UserID 非法，请检查发起操作的用户 UserID 是否填写正确。\",10013:\"被邀请加入的用户已经是群成员。\",10014:\"群已满员，无法将请求中的用户加入\".concat(\"群组\",\"，如果是批量加人，可以尝试减少加入用户的数量。\"),10015:\"找不到指定 ID 的\".concat(\"群组\",\"。\"),10016:\"App 后台通过第三方回调拒绝本次操作。\",10017:\"因被禁言而不能发送消息，请检查发送者是否被设置禁言。\",10018:\"应答包长度超过最大包长（1MB），请求的内容过多，请尝试减少单次请求的数据量。\",10019:\"请求的用户帐号不存在。\",10021:\"\".concat(\"群组\",\" ID 已被使用，请选择其他的\").concat(\"群组\",\" ID。\"),10023:\"发消息的频率超限，请延长两次发消息时间的间隔。\",10024:\"此邀请或者申请请求已经被处理。\",10025:\"\".concat(\"群组\",\" ID 已被使用，并且操作者为群主，可以直接使用。\"),10026:\"该 SDKAppID 请求的命令字已被禁用。\",10030:\"请求撤回的消息不存在。\",10031:\"消息撤回超过了时间限制（默认2分钟）。\",10032:\"请求撤回的消息不支持撤回操作。\",10033:\"\".concat(\"群组\",\"类型不支持消息撤回操作。\"),10034:\"该消息类型不支持删除操作。\",10035:\"直播群和在线成员广播大群不支持删除消息。\",10036:\"直播群创建数量超过了限制，请参考价格说明(\".concat(em,\"269/11673)购买预付费套餐“IM直播群”。\"),10037:\"单个用户可创建和加入的\".concat(\"群组\",\"数量超过了限制，请参考价格说明(\").concat(em,\"269/11673)购买或升级预付费套餐“单人可创建与加入\").concat(\"群组\",\"数”。\"),10038:\"群成员数量超过限制，请参考价格说明(\".concat(em,\"269/11673)购买或升级预付费套餐“扩展群人数上限”。\"),10041:\"该应用（SDKAppID）已配置不支持群消息撤回。\",10050:\"群属性 key 不存在\",10056:\"请在写入群属性前先使用 getGroupAttributes 接口更新本地群属性，避免冲突。\",30001:\"请求参数错误，请根据错误描述检查请求参数\",30002:\"SDKAppID 不匹配\",30003:\"请求的用户帐号不存在\",30004:\"请求需要 App 管理员权限\",30005:\"关系链字段中包含敏感词\",30006:\"\".concat(\"服务端内部错误，请重试。\"),30007:\"\".concat(\"网络超时，请稍后重试. \"),30008:\"并发写导致写冲突，建议使用批量方式\",30009:\"后台禁止该用户发起加好友请求\",30010:\"自己的好友数已达系统上限\",30011:\"分组已达系统上限\",30012:\"未决数已达系统上限\",30014:\"对方的好友数已达系统上限\",30515:\"请求添加好友时，对方在自己的黑名单中，不允许加好友\",30516:\"请求添加好友时，对方的加好友验证方式是不允许任何人添加自己为好友\",30525:\"请求添加好友时，自己在对方的黑名单中，不允许加好友\",30539:\"等待对方同意\",30540:\"添加好友请求被安全策略打击，请勿频繁发起添加好友请求\",31704:\"与请求删除的帐号之间不存在好友关系\",31707:\"删除好友请求被安全策略打击，请勿频繁发起删除好友请求\"},am=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this)).code=e.code,r.message=rm[e.code]||e.message,r.data=e.data||{},r}return n}(d(Error)),sm=null,im=function(e){sm=e},um=function(e){return Promise.resolve(Z_(e))},cm=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof am)return t&&null!==sm&&sm.emit(oo.ERROR,e),Promise.reject(e);if(e instanceof Error){var n=new am({code:Tp.UNCAUGHT_ERROR,message:e.message});return t&&null!==sm&&sm.emit(oo.ERROR,n),Promise.reject(n)}if(Ji(e)||Ji(e.code)||Ji(e.message))Ki.error(\"IMPromise.reject 必须指定code(错误码)和message(错误信息)!!!\");else{if(ji(e.code)&&$i(e.message)){var o=new am(e);return t&&null!==sm&&sm.emit(oo.ERROR,o),Promise.reject(o)}Ki.error(\"IMPromise.reject code(错误码)必须为数字，message(错误信息)必须为字符串!!!\")}},lm=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"C2CModule\",r}return a(n,[{key:\"onNewC2CMessage\",value:function(e){var t=e.dataList,n=e.isInstantMessage,o=e.C2CRemainingUnreadList;Ki.debug(\"\".concat(this._className,\".onNewC2CMessage count:\").concat(t.length,\" isInstantMessage:\").concat(n));var r=this._newC2CMessageStoredAndSummary({dataList:t,C2CRemainingUnreadList:o,isInstantMessage:n}),a=r.conversationOptionsList,s=r.messageList;(this.filterModifiedMessage(s),a.length>0)&&this.getModule(Jc).onNewMessage({conversationOptionsList:a,isInstantMessage:n});var i=this.filterUnmodifiedMessage(s);n&&i.length>0&&this.emitOuterEvent(oo.MESSAGE_RECEIVED,i),s.length=0}},{key:\"_newC2CMessageStoredAndSummary\",value:function(e){for(var t=e.dataList,n=e.C2CRemainingUnreadList,o=e.isInstantMessage,r=null,a=[],s=[],i={},u=this.getModule(tl),c=0,l=t.length;c<l;c++){var p=t[c];p.currentUser=this.getMyUserID(),p.conversationType=ro.CONV_C2C,p.isSystemMessage=!!p.isSystemMessage,r=new Q_(p),p.elements=u.parseElements(p.elements,p.from),r.setElement(p.elements),r.setNickAndAvatar({nick:p.nick,avatar:p.avatar});var d=r.conversationID;if(o){var g=!1,h=this.getModule(Jc);if(r.from!==this.getMyUserID()){var f=h.getLatestMessageSentByPeer(d);if(f){var _=f.nick,m=f.avatar;_===r.nick&&m===r.avatar||(g=!0)}}else{var v=h.getLatestMessageSentByMe(d);if(v){var M=v.nick,y=v.avatar;M===r.nick&&y===r.avatar||h.modifyMessageSentByMe({conversationID:d,latestNick:r.nick,latestAvatar:r.avatar})}}var I=1===t[c].isModified;if(h.isMessageSentByCurrentInstance(r)?r.isModified=I:I=!1,0===p.msgLifeTime)r.setOnlineOnlyFlag(!0),s.push(r);else{if(!h.pushIntoMessageList(s,r,I))continue;g&&(h.modifyMessageSentByPeer(d),h.updateUserProfileSpecifiedKey({conversationID:d,nick:r.nick,avatar:r.avatar}))}this.getModule(ll).addMessageDelay({currentTime:Date.now(),time:r.time})}if(0!==p.msgLifeTime){if(!1===r.getOnlineOnlyFlag())if(Ji(i[d]))i[d]=a.push({conversationID:d,unreadCount:\"out\"===r.flow?0:1,type:r.conversationType,subType:r.conversationSubType,lastMessage:r})-1;else{var T=i[d];a[T].type=r.conversationType,a[T].subType=r.conversationSubType,a[T].lastMessage=r,\"in\"===r.flow&&a[T].unreadCount++}}else r.setOnlineOnlyFlag(!0)}if(Wi(n))for(var S=function(e,t){var o=a.find((function(t){return t.conversationID===\"C2C\".concat(n[e].from)}));o?o.unreadCount+=n[e].count:a.push({conversationID:\"C2C\".concat(n[e].from),unreadCount:n[e].count,type:ro.CONV_C2C,lastMsgTime:n[e].lastMsgTime})},D=0,E=n.length;D<E;D++)S(D);return{conversationOptionsList:a,messageList:s}}},{key:\"onC2CMessageRevoked\",value:function(e){var t=this;Ki.debug(\"\".concat(this._className,\".onC2CMessageRevoked count:\").concat(e.dataList.length));var n=this.getModule(Jc),o=[],r=null;e.dataList.forEach((function(e){if(e.c2cMessageRevokedNotify){var a=e.c2cMessageRevokedNotify.revokedInfos;Ji(a)||a.forEach((function(e){var a=t.getMyUserID()===e.from?\"\".concat(ro.CONV_C2C).concat(e.to):\"\".concat(ro.CONV_C2C).concat(e.from);(r=n.revoke(a,e.sequence,e.random))&&o.push(r)}))}})),0!==o.length&&(n.onMessageRevoked(o),this.emitOuterEvent(oo.MESSAGE_REVOKED,o))}},{key:\"onC2CMessageReadReceipt\",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Lu(e.c2cMessageReadReceipt)){var n=e.c2cMessageReadReceipt.to;e.c2cMessageReadReceipt.uinPairReadArray.forEach((function(e){var o=e.peerReadTime;Ki.debug(\"\".concat(t._className,\"._onC2CMessageReadReceipt to:\").concat(n,\" peerReadTime:\").concat(o));var r=\"\".concat(ro.CONV_C2C).concat(n),a=t.getModule(Jc);a.recordPeerReadTime(r,o),a.updateMessageIsPeerReadProperty(r,o)}))}}))}},{key:\"onC2CMessageReadNotice\",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Lu(e.c2cMessageReadNotice)){var n=t.getModule(Jc);e.c2cMessageReadNotice.uinPairReadArray.forEach((function(e){var o=e.from,r=e.peerReadTime;Ki.debug(\"\".concat(t._className,\".onC2CMessageReadNotice from:\").concat(o,\" lastReadTime:\").concat(r));var a=\"\".concat(ro.CONV_C2C).concat(o);n.updateIsReadAfterReadReport({conversationID:a,lastMessageTime:r}),n.updateUnreadCount(a)}))}}))}},{key:\"sendMessage\",value:function(e,t){var n=this._createC2CMessagePack(e,t);return this.request(n)}},{key:\"_createC2CMessagePack\",value:function(e,t){var n=null;t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0}));var o=\"\";return $i(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData),{protocolName:ml,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),toAccount:e.to,msgTimeStamp:Math.ceil(Date.now()/1e3),msgBody:e.getElements(),cloudCustomData:o,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:this.isOnlineMessage(e,t)?0:void 0,nick:e.nick,avatar:e.avatar,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||\"\",desc:n.description||\"\",ext:n.extension||\"\",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||\"\"}}:void 0}}}},{key:\"isOnlineMessage\",value:function(e,t){return!(!t||!0!==t.onlineUserOnly)}},{key:\"revokeMessage\",value:function(e){return this.request({protocolName:Dl,requestData:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}},{key:\"deleteMessage\",value:function(e){var t=e.to,n=e.keyList;return Ki.log(\"\".concat(this._className,\".deleteMessage toAccount:\").concat(t,\" count:\").concat(n.length)),this.request({protocolName:kl,requestData:{fromAccount:this.getMyUserID(),to:t,keyList:n}})}},{key:\"setMessageRead\",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageTime,r=\"\".concat(this._className,\".setMessageRead\");Ki.log(\"\".concat(r,\" conversationID:\").concat(n,\" lastMessageTime:\").concat(o)),ji(o)||Ki.warn(\"\".concat(r,\" 请勿修改 Conversation.lastMessage.lastTime，否则可能会导致已读上报结果不准确\"));var a=new jd(lg);return a.setMessage(\"conversationID:\".concat(n,\" lastMessageTime:\").concat(o)),this.request({protocolName:El,requestData:{C2CMsgReaded:{cookie:\"\",C2CMsgReadedItem:[{toAccount:n.replace(\"C2C\",\"\"),lastMessageTime:o,receipt:1}]}}}).then((function(){a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(r,\" ok\"));var e=t.getModule(Jc);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:o}),e.updateUnreadCount(n),Z_()})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.log(\"\".concat(r,\" failed. error:\"),e),cm(e)}))}},{key:\"getRoamingMessage\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRoamingMessage\"),o=e.peerAccount,r=e.conversationID,a=e.count,s=e.lastMessageTime,i=e.messageKey,u=\"peerAccount:\".concat(o,\" count:\").concat(a||15,\" lastMessageTime:\").concat(s||0,\" messageKey:\").concat(i);Ki.log(\"\".concat(n,\" \").concat(u));var c=new jd(sg);return this.request({protocolName:Cl,requestData:{peerAccount:o,count:a||15,lastMessageTime:s||0,messageKey:i}}).then((function(e){var o=e.data,a=o.complete,s=o.messageList,i=o.messageKey;Ji(s)?Ki.log(\"\".concat(n,\" ok. complete:\").concat(a,\" but messageList is undefined!\")):Ki.log(\"\".concat(n,\" ok. complete:\").concat(a,\" count:\").concat(s.length)),c.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(u,\" complete:\").concat(a,\" length:\").concat(s.length)).end();var l=t.getModule(Jc);1===a&&l.setCompleted(r);var p=l.storeRoamingMessage(s,r);l.modifyMessageList(r),l.updateIsRead(r),l.updateRoamingMessageKey(r,i);var d=l.getPeerReadTime(r);if(Ki.log(\"\".concat(n,\" update isPeerRead property. conversationID:\").concat(r,\" peerReadTime:\").concat(d)),d)l.updateMessageIsPeerReadProperty(r,d);else{var g=r.replace(ro.CONV_C2C,\"\");t.getRemotePeerReadTime([g]).then((function(){l.updateMessageIsPeerReadProperty(r,l.getPeerReadTime(r))}))}return p})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setMessage(u).setError(e,o,r).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"getRemotePeerReadTime\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRemotePeerReadTime\");if(Lu(e))return Ki.warn(\"\".concat(n,\" userIDList is empty!\")),Promise.resolve();var o=new jd(gg);return Ki.log(\"\".concat(n,\" userIDList:\").concat(e)),this.request({protocolName:Al,requestData:{userIDList:e}}).then((function(r){var a=r.data.peerReadTimeList;Ki.log(\"\".concat(n,\" ok. peerReadTimeList:\").concat(a));for(var s=\"\",i=t.getModule(Jc),u=0;u<e.length;u++)s+=\"\".concat(e[u],\"-\").concat(a[u],\" \"),a[u]>0&&i.recordPeerReadTime(\"C2C\".concat(e[u]),a[u]);o.setNetworkType(t.getNetworkType()).setMessage(s).end()})).catch((function(e){t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e)}))}}]),n}(pl),pm=Math.floor,dm=function(e,t){var n=e.length,o=pm(n/2);return n<8?gm(e,t):hm(dm(e.slice(0,o),t),dm(e.slice(o),t),t)},gm=function(e,t){for(var n,o,r=e.length,a=1;a<r;){for(o=a,n=e[a];o&&t(e[o-1],n)>0;)e[o]=e[--o];o!==a++&&(e[o]=n)}return e},hm=function(e,t,n){for(var o=e.length,r=t.length,a=0,s=0,i=[];a<o||s<r;)a<o&&s<r?i.push(n(e[a],t[s])<=0?e[a++]:t[s++]):i.push(a<o?e[a++]:t[s++]);return i},fm=dm,_m=$.match(/firefox\\\\/(\\\\d+)/i),mm=!!_m&&+_m[1],vm=/MSIE|Trident/.test($),Mm=$.match(/AppleWebKit\\\\/(\\\\d+)\\\\./),ym=!!Mm&&+Mm[1],Im=[],Tm=Im.sort,Sm=L((function(){Im.sort(void 0)})),Dm=L((function(){Im.sort(null)})),Em=zt(\"sort\"),Cm=!L((function(){if(X)return X<70;if(!(mm&&mm>3)){if(vm)return!0;if(ym)return ym<603;var e,t,n,o,r=\"\";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)Im.push({k:t+o,v:n})}for(Im.sort((function(e,t){return t.v-e.v})),o=0;o<Im.length;o++)t=Im[o].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return\"DGBEFHACIJK\"!==r}}));vt({target:\"Array\",proto:!0,forced:Sm||!Dm||!Em||!Cm},{sort:function(e){void 0!==e&&xt(e);var t=re(this);if(Cm)return void 0===e?Tm.call(t):Tm.call(t,e);var n,o,r=[],a=We(t.length);for(o=0;o<a;o++)o in t&&r.push(t[o]);for(n=(r=fm(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Mt(t)>Mt(n)?1:-1}}(e))).length,o=0;o<n;)t[o]=r[o++];for(;o<a;)delete t[o++];return t}});var Am=Yt.findIndex,km=!0;\"findIndex\"in[]&&Array(1).findIndex((function(){km=!1})),vt({target:\"Array\",proto:!0,forced:km},{findIndex:function(e){return Am(this,e,arguments.length>1?arguments[1]:void 0)}}),cr(\"findIndex\");var Nm=function(){function e(t){o(this,e),this.list=new Map,this._className=\"MessageListHandler\",this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map,this._groupLocalLastMessageSequenceMap=new Map}return a(e,[{key:\"getLocalOldestMessageByConversationID\",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:\"pushIn\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.conversationID,o=e.ID,r=!0;this.list.has(n)||this.list.set(n,new Map);var a=this.list.get(n).has(o);if(a){var s=this.list.get(n).get(o);if(!t||!0===s.isModified)return r=!1}return this.list.get(n).set(o,e),this._setLatestMessageSentByPeer(n,e),this._setLatestMessageSentByMe(n,e),this._setGroupLocalLastMessageSequence(n,e),r}},{key:\"unshift\",value:function(e){var t;if(Wi(e)){if(e.length>0){t=e[0].conversationID;var n=e.length;this._unshiftMultipleMessages(e),this._setGroupLocalLastMessageSequence(t,e[n-1])}}else t=e.conversationID,this._unshiftSingleMessage(e),this._setGroupLocalLastMessageSequence(t,e);if(t&&t.startsWith(ro.CONV_C2C)){var o=Array.from(this.list.get(t).values()),r=o.length;if(0===r)return;for(var a=r-1;a>=0;a--)if(\"out\"===o[a].flow){this._setLatestMessageSentByMe(t,o[a]);break}for(var s=r-1;s>=0;s--)if(\"in\"===o[s].flow){this._setLatestMessageSentByPeer(t,o[s]);break}}}},{key:\"_unshiftSingleMessage\",value:function(e){var t=e.conversationID,n=e.ID;if(!this.list.has(t))return this.list.set(t,new Map),void this.list.get(t).set(n,e);var o=Array.from(this.list.get(t));o.unshift([n,e]),this.list.set(t,new Map(o))}},{key:\"_unshiftMultipleMessages\",value:function(e){for(var t=e.length,n=[],o=e[0].conversationID,r=this.list.has(o)?Array.from(this.list.get(o)):[],a=0;a<t;a++)n.push([e[a].ID,e[a]]);this.list.set(o,new Map(n.concat(r)))}},{key:\"remove\",value:function(e){var t=e.conversationID,n=e.ID;this.list.has(t)&&this.list.get(t).delete(n)}},{key:\"revoke\",value:function(e,t,n){if(Ki.debug(\"revoke message\",e,t,n),this.list.has(e)){var o,r=D(this.list.get(e));try{for(r.s();!(o=r.n()).done;){var a=m(o.value,2)[1];if(a.sequence===t&&!a.isRevoked&&(Ji(n)||a.random===n))return a.isRevoked=!0,a}}catch(s){r.e(s)}finally{r.f()}}return null}},{key:\"removeByConversationID\",value:function(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}},{key:\"updateMessageIsPeerReadProperty\",value:function(e,t){var n=[];if(this.list.has(e)){var o,r=D(this.list.get(e));try{for(r.s();!(o=r.n()).done;){var a=m(o.value,2)[1];a.time<=t&&!a.isPeerRead&&\"out\"===a.flow&&(a.isPeerRead=!0,n.push(a))}}catch(s){r.e(s)}finally{r.f()}Ki.log(\"\".concat(this._className,\".updateMessageIsPeerReadProperty conversationID:\").concat(e,\" peerReadTime:\").concat(t,\" count:\").concat(n.length))}return n}},{key:\"updateMessageIsModifiedProperty\",value:function(e){var t=e.conversationID,n=e.ID;if(this.list.has(t)){var o=this.list.get(t).get(n);o&&(o.isModified=!0)}}},{key:\"hasLocalMessageList\",value:function(e){return this.list.has(e)}},{key:\"getLocalMessageList\",value:function(e){return this.hasLocalMessageList(e)?v(this.list.get(e).values()):[]}},{key:\"hasLocalMessage\",value:function(e,t){return!!this.hasLocalMessageList(e)&&this.list.get(e).has(t)}},{key:\"getLocalMessage\",value:function(e,t){return this.hasLocalMessage(e,t)?this.list.get(e).get(t):null}},{key:\"_setLatestMessageSentByPeer\",value:function(e,t){e.startsWith(ro.CONV_C2C)&&\"in\"===t.flow&&this._latestMessageSentByPeerMap.set(e,t)}},{key:\"_setLatestMessageSentByMe\",value:function(e,t){e.startsWith(ro.CONV_C2C)&&\"out\"===t.flow&&this._latestMessageSentByMeMap.set(e,t)}},{key:\"_setGroupLocalLastMessageSequence\",value:function(e,t){e.startsWith(ro.CONV_GROUP)&&this._groupLocalLastMessageSequenceMap.set(e,t.sequence)}},{key:\"getLatestMessageSentByPeer\",value:function(e){return this._latestMessageSentByPeerMap.get(e)}},{key:\"getLatestMessageSentByMe\",value:function(e){return this._latestMessageSentByMeMap.get(e)}},{key:\"getGroupLocalLastMessageSequence\",value:function(e){return this._groupLocalLastMessageSequenceMap.get(e)||0}},{key:\"modifyMessageSentByPeer\",value:function(e,t){var n=this.list.get(e);if(!Lu(n)){var o=Array.from(n.values()),r=o.length;if(0!==r){var a=null,s=null;t&&(s=t);for(var i=0,u=!1,c=r-1;c>=0;c--)\"in\"===o[c].flow&&(null===s?s=o[c]:((a=o[c]).nick!==s.nick&&(a.setNickAndAvatar({nick:s.nick}),u=!0),a.avatar!==s.avatar&&(a.setNickAndAvatar({avatar:s.avatar}),u=!0),u&&(i+=1)));Ki.log(\"\".concat(this._className,\".modifyMessageSentByPeer conversationID:\").concat(e,\" count:\").concat(i))}}}},{key:\"modifyMessageSentByMe\",value:function(e){var t=e.conversationID,n=e.latestNick,o=e.latestAvatar,r=this.list.get(t);if(!Lu(r)){var a=Array.from(r.values()),s=a.length;if(0!==s){for(var i=null,u=0,c=!1,l=s-1;l>=0;l--)\"out\"===a[l].flow&&((i=a[l]).nick!==n&&(i.setNickAndAvatar({nick:n}),c=!0),i.avatar!==o&&(i.setNickAndAvatar({avatar:o}),c=!0),c&&(u+=1));Ki.log(\"\".concat(this._className,\".modifyMessageSentByMe conversationID:\").concat(t,\" count:\").concat(u))}}}},{key:\"traversal\",value:function(){if(0!==this.list.size&&-1===Ki.getLevel()){console.group(\"conversationID-messageCount\");var e,t=D(this.list);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],r=n[1];console.log(\"\".concat(o,\"-\").concat(r.size))}}catch(a){t.e(a)}finally{t.f()}console.groupEnd()}}},{key:\"reset\",value:function(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear(),this._groupLocalLastMessageSequenceMap.clear()}}]),e}(),Om={CONTEXT_A2KEY_AND_TINYID_UPDATED:\"_a2KeyAndTinyIDUpdated\",CLOUD_CONFIG_UPDATED:\"_cloudConfigUpdated\"};function Lm(e){this.mixin(e)}Lm.mixin=function(e){var t=e.prototype||e;t._isReady=!1,t.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=!0,setTimeout((function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach((function(e){e.call(this)}),e)}),1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var Rm=[\"jpg\",\"jpeg\",\"gif\",\"png\",\"bmp\"],bm=[\"mp4\"],wm=1,Pm=2,Gm=3,Um=255,Fm=function(){function e(t){var n=this;o(this,e),Lu(t)||(this.userID=t.userID||\"\",this.nick=t.nick||\"\",this.gender=t.gender||\"\",this.birthday=t.birthday||0,this.location=t.location||\"\",this.selfSignature=t.selfSignature||\"\",this.allowType=t.allowType||ro.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||\"\",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||ro.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],Lu(t.profileCustomField)||t.profileCustomField.forEach((function(e){n.profileCustomField.push({key:e.key,value:e.value})})))}return a(e,[{key:\"validate\",value:function(e){var t=!0,n=\"\";if(Lu(e))return{valid:!1,tips:\"empty options\"};if(e.profileCustomField)for(var o=e.profileCustomField.length,r=null,a=0;a<o;a++){if(r=e.profileCustomField[a],!$i(r.key)||-1===r.key.indexOf(\"Tag_Profile_Custom\"))return{valid:!1,tips:\"自定义资料字段的前缀必须是 Tag_Profile_Custom\"};if(!$i(r.value))return{valid:!1,tips:\"自定义资料字段的 value 必须是字符串\"}}for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(\"profileCustomField\"===s)continue;if(Lu(e[s])&&!$i(e[s])&&!ji(e[s])){n=\"key:\"+s+\", invalid value:\"+e[s],t=!1;continue}switch(s){case\"nick\":$i(e[s])||(n=\"nick should be a string\",t=!1),su(e[s])>500&&(n=\"nick name limited: must less than or equal to \".concat(500,\" bytes, current size: \").concat(su(e[s]),\" bytes\"),t=!1);break;case\"gender\":lu(k_,e.gender)||(n=\"key:gender, invalid value:\"+e.gender,t=!1);break;case\"birthday\":ji(e.birthday)||(n=\"birthday should be a number\",t=!1);break;case\"location\":$i(e.location)||(n=\"location should be a string\",t=!1);break;case\"selfSignature\":$i(e.selfSignature)||(n=\"selfSignature should be a string\",t=!1);break;case\"allowType\":lu(O_,e.allowType)||(n=\"key:allowType, invalid value:\"+e.allowType,t=!1);break;case\"language\":ji(e.language)||(n=\"language should be a number\",t=!1);break;case\"avatar\":$i(e.avatar)||(n=\"avatar should be a string\",t=!1);break;case\"messageSettings\":0!==e.messageSettings&&1!==e.messageSettings&&(n=\"messageSettings should be 0 or 1\",t=!1);break;case\"adminForbidType\":lu(N_,e.adminForbidType)||(n=\"key:adminForbidType, invalid value:\"+e.adminForbidType,t=!1);break;case\"level\":ji(e.level)||(n=\"level should be a number\",t=!1);break;case\"role\":ji(e.role)||(n=\"role should be a number\",t=!1);break;default:n=\"unknown key:\"+s+\"  \"+e[s],t=!1}}return{valid:t,tips:n}}}]),e}(),qm=function e(t){o(this,e),this.value=t,this.next=null},xm=function(){function e(t){o(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map,Ki.debug(\"SinglyLinkedList init MAX_LENGTH:\".concat(this.MAX_LENGTH))}return a(e,[{key:\"set\",value:function(e){var t=new qm(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var n=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(n.value),n.next=null,n=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:\"has\",value:function(e){return this.map.has(e)}},{key:\"delete\",value:function(e){this.has(e)&&this.map.delete(e)}},{key:\"tail\",value:function(){return this.pTail}},{key:\"size\",value:function(){return this.map.size}},{key:\"data\",value:function(){return Array.from(this.map.keys())}},{key:\"reset\",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),Vm=[\"groupID\",\"name\",\"avatar\",\"type\",\"introduction\",\"notification\",\"ownerID\",\"selfInfo\",\"createTime\",\"infoSequence\",\"lastInfoTime\",\"lastMessage\",\"nextMessageSeq\",\"memberNum\",\"maxMemberNum\",\"memberList\",\"joinOption\",\"groupCustomField\",\"muteAllMembers\"],Km=function(){function e(t){o(this,e),this.groupID=\"\",this.name=\"\",this.avatar=\"\",this.type=\"\",this.introduction=\"\",this.notification=\"\",this.ownerID=\"\",this.createTime=\"\",this.infoSequence=\"\",this.lastInfoTime=\"\",this.selfInfo={messageRemindType:\"\",joinTime:\"\",nameCard:\"\",role:\"\"},this.lastMessage={lastTime:\"\",lastSequence:\"\",fromAccount:\"\",messageForShow:\"\"},this.nextMessageSeq=\"\",this.memberNum=\"\",this.memberCount=\"\",this.maxMemberNum=\"\",this.maxMemberCount=\"\",this.joinOption=\"\",this.groupCustomField=[],this.muteAllMembers=void 0,this._initGroup(t)}return a(e,[{key:\"memberNum\",get:function(){return Ki.warn(\"！！！v2.8.0起弃用memberNum，请使用 memberCount\"),this.memberCount},set:function(e){}},{key:\"maxMemberNum\",get:function(){return Ki.warn(\"！！！v2.8.0起弃用maxMemberNum，请使用 maxMemberCount\"),this.maxMemberCount},set:function(e){}},{key:\"_initGroup\",value:function(e){for(var t in e)Vm.indexOf(t)<0||(\"selfInfo\"!==t?(\"memberNum\"===t&&(this.memberCount=e[t]),\"maxMemberNum\"===t&&(this.maxMemberCount=e[t]),this[t]=e[t]):this.updateSelfInfo(e[t]))}},{key:\"updateGroup\",value:function(e){var t=JSON.parse(JSON.stringify(e));t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),Ji(t.muteAllMembers)||(\"On\"===t.muteAllMembers?t.muteAllMembers=!0:t.muteAllMembers=!1),t.groupCustomField&&fu(this.groupCustomField,t.groupCustomField),Ji(t.memberNum)||(this.memberCount=t.memberNum),Ji(t.maxMemberNum)||(this.maxMemberCount=t.maxMemberNum),ru(this,t,[\"members\",\"errorCode\",\"lastMsgTime\",\"groupCustomField\",\"memberNum\",\"maxMemberNum\"])}},{key:\"updateSelfInfo\",value:function(e){var t=e.nameCard,n=e.joinTime,o=e.role,r=e.messageRemindType;ru(this.selfInfo,{nameCard:t,joinTime:n,role:o,messageRemindType:r},[],[\"\",null,void 0,0,NaN])}},{key:\"setSelfNameCard\",value:function(e){this.selfInfo.nameCard=e}}]),e}(),Bm=function(e,t){if(Ji(t))return\"\";switch(e){case ro.MSG_TEXT:return t.text;case ro.MSG_IMAGE:return\"[图片]\";case ro.MSG_GEO:return\"[位置]\";case ro.MSG_AUDIO:return\"[语音]\";case ro.MSG_VIDEO:return\"[视频]\";case ro.MSG_FILE:return\"[文件]\";case ro.MSG_CUSTOM:return\"[自定义消息]\";case ro.MSG_GRP_TIP:return\"[群提示消息]\";case ro.MSG_GRP_SYS_NOTICE:return\"[群系统通知]\";case ro.MSG_FACE:return\"[动画表情]\";case ro.MSG_MERGER:return\"[聊天记录]\";default:return\"\"}},Hm=function(e){return Ji(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:\"\",payload:null,type:\"\",isRevoked:!1,cloudCustomData:\"\",onlineOnlyFlag:!1}:e instanceof Q_?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||\"\",messageForShow:Bm(e.type,e.payload),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||\"\",onlineOnlyFlag:!!Qi(e.getOnlineOnlyFlag)&&e.getOnlineOnlyFlag()}:t(t({},e),{},{messageForShow:Bm(e.type,e.payload)})},jm=function(){function e(t){o(this,e),this.conversationID=t.conversationID||\"\",this.unreadCount=t.unreadCount||0,this.type=t.type||\"\",this.lastMessage=Hm(t.lastMessage),t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=t.peerReadTime||0,this.groupAtInfoList=[],this.remark=\"\",this.isPinned=t.isPinned||!1,this._initProfile(t)}return a(e,[{key:\"toAccount\",get:function(){return this.conversationID.startsWith(ro.CONV_C2C)?this.conversationID.replace(ro.CONV_C2C,\"\"):this.conversationID.startsWith(ro.CONV_GROUP)?this.conversationID.replace(ro.CONV_GROUP,\"\"):\"\"}},{key:\"subType\",get:function(){return this.groupProfile?this.groupProfile.type:\"\"}},{key:\"_initProfile\",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case\"userProfile\":t.userProfile=e.userProfile;break;case\"groupProfile\":t.groupProfile=e.groupProfile}})),Ji(this.userProfile)&&this.type===ro.CONV_C2C?this.userProfile=new Fm({userID:e.conversationID.replace(\"C2C\",\"\")}):Ji(this.groupProfile)&&this.type===ro.CONV_GROUP&&(this.groupProfile=new Km({groupID:e.conversationID.replace(\"GROUP\",\"\")}))}},{key:\"updateUnreadCount\",value:function(e,t){Ji(e)||(mu(this.subType)?this.unreadCount=0:t&&this.type===ro.CONV_GROUP?this.unreadCount=e:this.unreadCount=this.unreadCount+e)}},{key:\"updateLastMessage\",value:function(e){this.lastMessage=Hm(e)}},{key:\"updateGroupAtInfoList\",value:function(e){var t,n=(M(t=e.groupAtType)||y(t)||I(t)||S()).slice(0);-1!==n.indexOf(ro.CONV_AT_ME)&&-1!==n.indexOf(ro.CONV_AT_ALL)&&(n=[ro.CONV_AT_ALL_AT_ME]);var o={from:e.from,groupID:e.groupID,messageSequence:e.sequence,atTypeArray:n,__random:e.__random,__sequence:e.__sequence};this.groupAtInfoList.push(o),Ki.debug(\"Conversation.updateGroupAtInfoList conversationID:\".concat(this.conversationID),this.groupAtInfoList)}},{key:\"clearGroupAtInfoList\",value:function(){this.groupAtInfoList.length=0}},{key:\"reduceUnreadCount\",value:function(){this.unreadCount>=1&&(this.unreadCount-=1)}},{key:\"isLastMessageRevoked\",value:function(e){var t=e.sequence,n=e.time;return this.type===ro.CONV_C2C&&t===this.lastMessage.lastSequence&&n===this.lastMessage.lastTime||this.type===ro.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:\"setLastMessageRevoked\",value:function(e){this.lastMessage.isRevoked=e}}]),e}(),$m=function(e){i(r,e);var n=_(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._className=\"ConversationModule\",Lm.mixin(h(t)),t._messageListHandler=new Nm,t.singlyLinkedList=new xm(100),t._pagingStatus=Cc.NOT_START,t._pagingTimeStamp=0,t._pagingStartIndex=0,t._pagingPinnedTimeStamp=0,t._pagingPinnedStartIndex=0,t._conversationMap=new Map,t._tmpGroupList=[],t._tmpGroupAtTipsList=[],t._peerReadTimeMap=new Map,t._completedMap=new Map,t._roamingMessageKeyMap=new Map,t._initListeners(),t}return a(r,[{key:\"_initListeners\",value:function(){this.getInnerEmitterInstance().on(Om.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initLocalConversationList,this)}},{key:\"onCheckTimer\",value:function(e){e%60==0&&this._messageListHandler.traversal()}},{key:\"_initLocalConversationList\",value:function(){var e=this,t=new jd(Tg);Ki.log(\"\".concat(this._className,\"._initLocalConversationList.\"));var n=\"\",o=this._getStorageConversationList();if(o){for(var r=o.length,a=0;a<r;a++){var s=o[a];if(s&&s.groupProfile){var i=s.groupProfile.type;if(mu(i))continue}this._conversationMap.set(o[a].conversationID,new jm(o[a]))}this._emitConversationUpdate(!0,!1),n=\"count:\".concat(r)}else n=\"count:0\";t.setNetworkType(this.getNetworkType()).setMessage(n).end(),this.getModule($c)||this.triggerReady(),this.ready((function(){e._tmpGroupList.length>0&&(e.updateConversationGroupProfile(e._tmpGroupList),e._tmpGroupList.length=0)})),this._syncConversationList()}},{key:\"onMessageSent\",value:function(e){this._onSendOrReceiveMessage(e.conversationOptionsList,!0)}},{key:\"onNewMessage\",value:function(e){this._onSendOrReceiveMessage(e.conversationOptionsList,e.isInstantMessage)}},{key:\"_onSendOrReceiveMessage\",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._isReady?0!==e.length&&(this._getC2CPeerReadTime(e),this._updateLocalConversationList(e,!1,n),this._setStorageConversationList(),this._emitConversationUpdate()):this.ready((function(){t._onSendOrReceiveMessage(e,n)}))}},{key:\"updateConversationGroupProfile\",value:function(e){var t=this;Wi(e)&&0===e.length||(0!==this._conversationMap.size?(e.forEach((function(e){var n=\"GROUP\".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);o.groupProfile=e,o.lastMessage.lastSequence<e.nextMessageSeq&&(o.lastMessage.lastSequence=e.nextMessageSeq-1),o.subType||(o.subType=e.type)}})),this._emitConversationUpdate(!0,!1)):this._tmpGroupList=e)}},{key:\"_updateConversationUserProfile\",value:function(e){var t=this;e.data.forEach((function(e){var n=\"C2C\".concat(e.userID);t._conversationMap.has(n)&&(t._conversationMap.get(n).userProfile=e)})),this._emitConversationUpdate(!0,!1)}},{key:\"onMessageRevoked\",value:function(e){var t=this;if(0!==e.length){var n=null,o=!1;e.forEach((function(e){(n=t._conversationMap.get(e.conversationID))&&n.isLastMessageRevoked(e)&&(o=!0,n.setLastMessageRevoked(!0))})),o&&this._emitConversationUpdate(!0,!1)}}},{key:\"onMessageDeleted\",value:function(e){if(0!==e.length){e.forEach((function(e){e.isDeleted=!0}));for(var t=e[0].conversationID,n=this._messageListHandler.getLocalMessageList(t),o={},r=n.length-1;r>0;r--)if(!n[r].isDeleted){o=n[r];break}var a=this._conversationMap.get(t);if(a){var s=!1;a.lastMessage.lastSequence!==o.sequence&&a.lastMessage.lastTime!==o.time&&(a.updateLastMessage(o),s=!0,Ki.log(\"\".concat(this._className,\".onMessageDeleted. update conversationID:\").concat(t,\" with lastMessage:\"),a.lastMessage)),t.startsWith(ro.CONV_C2C)&&this.updateUnreadCount(t),s&&this._emitConversationUpdate(!0,!1)}}}},{key:\"onNewGroupAtTips\",value:function(e){var t=this,n=e.dataList,o=null;n.forEach((function(e){e.groupAtTips?o=e.groupAtTips:e.elements&&(o=e.elements),o.__random=e.random,o.__sequence=e.clientSequence,t._tmpGroupAtTipsList.push(o)})),Ki.debug(\"\".concat(this._className,\".onNewGroupAtTips isReady:\").concat(this._isReady),this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:\"_handleGroupAtTipsList\",value:function(){var e=this;if(0!==this._tmpGroupAtTipsList.length){var t=!1;this._tmpGroupAtTipsList.forEach((function(n){var o=n.groupID;if(n.from!==e.getMyUserID()){var r=e._conversationMap.get(\"\".concat(ro.CONV_GROUP).concat(o));r&&(r.updateGroupAtInfoList(n),t=!0)}})),t&&this._emitConversationUpdate(!0,!1),this._tmpGroupAtTipsList.length=0}}},{key:\"_getC2CPeerReadTime\",value:function(e){var t=this,n=[];if(e.forEach((function(e){t._conversationMap.has(e.conversationID)||e.type!==ro.CONV_C2C||n.push(e.conversationID.replace(ro.CONV_C2C,\"\"))})),n.length>0){Ki.debug(\"\".concat(this._className,\"._getC2CPeerReadTime userIDList:\").concat(n));var o=this.getModule($c);o&&o.getRemotePeerReadTime(n)}}},{key:\"_getStorageConversationList\",value:function(){return this.getModule(Qc).getItem(\"conversationMap\")}},{key:\"_setStorageConversationList\",value:function(){var e=this.getLocalConversationList().slice(0,20).map((function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}}));this.getModule(Qc).setItem(\"conversationMap\",e)}},{key:\"_emitConversationUpdate\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=v(this._conversationMap.values());if(t){var o=this.getModule(Yc);o&&o.updateGroupLastMessage(n)}e&&this.emitOuterEvent(oo.CONVERSATION_LIST_UPDATED,n)}},{key:\"getLocalConversationList\",value:function(){return v(this._conversationMap.values())}},{key:\"getLocalConversation\",value:function(e){return this._conversationMap.get(e)}},{key:\"_syncConversationList\",value:function(){var e=this,t=new jd(Sg);return this._pagingStatus===Cc.NOT_START&&this._conversationMap.clear(),this._pagingGetConversationList().then((function(n){return e._pagingStatus=Cc.RESOLVED,e._setStorageConversationList(),e._handleC2CPeerReadTime(),e.checkAndPatchRemark(),t.setMessage(e._conversationMap.size).setNetworkType(e.getNetworkType()).end(),n})).catch((function(n){return e._pagingStatus=Cc.REJECTED,t.setMessage(e._pagingTimeStamp),e.probeNetwork().then((function(e){var o=m(e,2),r=o[0],a=o[1];t.setError(n,r,a).end()})),cm(n)}))}},{key:\"_pagingGetConversationList\",value:function(){var e=this,t=\"\".concat(this._className,\"._pagingGetConversationList\");return Ki.log(\"\".concat(t,\" timeStamp:\").concat(this._pagingTimeStamp,\" startIndex:\").concat(this._pagingStartIndex)+\" pinnedTimeStamp:\".concat(this._pagingPinnedTimeStamp,\" pinnedStartIndex:\").concat(this._pagingPinnedStartIndex)),this._pagingStatus=Cc.PENDING,this.request({protocolName:Nl,requestData:{fromAccount:this.getMyUserID(),timeStamp:this._pagingTimeStamp,startIndex:this._pagingStartIndex,pinnedTimeStamp:this._pagingPinnedTimeStamp,pinnedStartIndex:this._pagingStartIndex,orderType:1}}).then((function(n){var o=n.data,r=o.completeFlag,a=o.conversations,s=void 0===a?[]:a,i=o.timeStamp,u=o.startIndex,c=o.pinnedTimeStamp,l=o.pinnedStartIndex;if(Ki.log(\"\".concat(t,\" ok. completeFlag:\").concat(r,\" count:\").concat(s.length)),s.length>0){var p=e._getConversationOptions(s);e._updateLocalConversationList(p,!0)}if(e._isReady)e._emitConversationUpdate();else{if(!e.isLoggedIn())return um();e.triggerReady()}return e._pagingTimeStamp=i,e._pagingStartIndex=u,e._pagingPinnedTimeStamp=c,e._pagingPinnedStartIndex=l,1!==r?e._pagingGetConversationList():(e._handleGroupAtTipsList(),um())})).catch((function(n){throw e.isLoggedIn()&&(e._isReady||(Ki.warn(\"\".concat(t,\" failed. error:\"),n),e.triggerReady())),n}))}},{key:\"_updateLocalConversationList\",value:function(e,t,n){var o,r=Date.now();o=this._getTmpConversationListMapping(e,t,n),this._conversationMap=new Map(this._sortConversationList([].concat(v(o.toBeUpdatedConversationList),v(this._conversationMap)))),t||this._updateUserOrGroupProfile(o.newConversationList),Ki.debug(\"\".concat(this._className,\"._updateLocalConversationList cost \").concat(Date.now()-r,\" ms\"))}},{key:\"_getTmpConversationListMapping\",value:function(e,t,n){for(var o=[],r=[],a=this.getModule(Yc),s=this.getModule(zc),i=0,u=e.length;i<u;i++){var c=new jm(e[i]),l=c.conversationID;if(this._conversationMap.has(l)){var p=this._conversationMap.get(l),d=[\"unreadCount\",\"allowType\",\"adminForbidType\",\"payload\",\"isPinned\"];n||d.push(\"lastMessage\"),ru(p,c,d,[null,void 0,\"\",0,NaN]),p.updateUnreadCount(c.unreadCount,t),n&&(p.lastMessage.payload=e[i].lastMessage.payload),e[i].lastMessage&&p.lastMessage.cloudCustomData!==e[i].lastMessage.cloudCustomData&&(p.lastMessage.cloudCustomData=e[i].lastMessage.cloudCustomData||\"\"),this._conversationMap.delete(l),o.push([l,p])}else{if(c.type===ro.CONV_GROUP&&a){var g=c.groupProfile.groupID,h=a.getLocalGroupProfile(g);h&&(c.groupProfile=h,c.updateUnreadCount(0))}else if(c.type===ro.CONV_C2C){var f=l.replace(ro.CONV_C2C,\"\");s&&s.isMyFriend(f)&&(c.remark=s.getFriendRemark(f))}r.push(c),o.push([l,c])}}return{toBeUpdatedConversationList:o,newConversationList:r}}},{key:\"_sortConversationList\",value:function(e){var t=[],n=[];return e.forEach((function(e){!0===e[1].isPinned?t.push(e):n.push(e)})),t.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})).concat(n.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})))}},{key:\"_sortConversationListAndEmitEvent\",value:function(){this._conversationMap=new Map(this._sortConversationList(v(this._conversationMap))),this._emitConversationUpdate(!0,!1)}},{key:\"_updateUserOrGroupProfile\",value:function(e){var t=this;if(0!==e.length){var n=[],o=[],r=this.getModule(jc),a=this.getModule(Yc);e.forEach((function(e){if(e.type===ro.CONV_C2C)n.push(e.toAccount);else if(e.type===ro.CONV_GROUP){var t=e.toAccount;a.hasLocalGroup(t)?e.groupProfile=a.getLocalGroupProfile(t):o.push(t)}})),Ki.log(\"\".concat(this._className,\"._updateUserOrGroupProfile c2cUserIDList:\").concat(n,\" groupIDList:\").concat(o)),n.length>0&&r.getUserProfile({userIDList:n}).then((function(e){var n=e.data;Wi(n)?n.forEach((function(e){t._conversationMap.get(\"C2C\".concat(e.userID)).userProfile=e})):t._conversationMap.get(\"C2C\".concat(n.userID)).userProfile=n})),o.length>0&&a.getGroupProfileAdvance({groupIDList:o,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"FaceUrl\"]}}).then((function(e){e.data.successGroupList.forEach((function(e){var n=\"GROUP\".concat(e.groupID);if(t._conversationMap.has(n)){var o=t._conversationMap.get(n);ru(o.groupProfile,e,[],[null,void 0,\"\",0,NaN]),!o.subType&&e.type&&(o.subType=e.type)}}))}))}}},{key:\"_getConversationOptions\",value:function(e){var t=[],n=e.filter((function(e){var t=e.lastMsg;return zi(t)})).map((function(e){if(1===e.type){var n={userID:e.userID,nick:e.c2CNick,avatar:e.c2CImage};return t.push(n),{conversationID:\"C2C\".concat(e.userID),type:\"C2C\",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,cloudCustomData:e.cloudCustomData||\"\",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1},userProfile:new Fm(n),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned}}return{conversationID:\"GROUP\".concat(e.groupID),type:\"GROUP\",lastMessage:{lastTime:e.time,lastSequence:e.messageReadSeq+e.unreadCount,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,cloudCustomData:e.cloudCustomData||\"\",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1},groupProfile:new Km({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0,isPinned:1===e.isPinned}}));t.length>0&&this.getModule(jc).onConversationsProfileUpdated(t);return n}},{key:\"getLocalMessageList\",value:function(e){return this._messageListHandler.getLocalMessageList(e)}},{key:\"deleteLocalMessage\",value:function(e){e instanceof Q_&&this._messageListHandler.remove(e)}},{key:\"onConversationDeleted\",value:function(e){var t=this;Ki.log(\"\".concat(this._className,\".onConversationDeleted\")),Wi(e)&&e.forEach((function(e){var n=e.type,o=e.userID,r=e.groupID,a=\"\";1===n?a=\"\".concat(ro.CONV_C2C).concat(o):2===n&&(a=\"\".concat(ro.CONV_GROUP).concat(r)),t.deleteLocalConversation(a)}))}},{key:\"onConversationPinned\",value:function(e){var t=this;if(Wi(e)){var n=!1;e.forEach((function(e){var o,r=e.type,a=e.userID,s=e.groupID;1===r?o=t.getLocalConversation(\"\".concat(ro.CONV_C2C).concat(a)):2===r&&(o=t.getLocalConversation(\"\".concat(ro.CONV_GROUP).concat(s))),o&&(Ki.log(\"\".concat(t._className,\".onConversationPinned conversationID:\").concat(o.conversationID,\" isPinned:\").concat(o.isPinned)),o.isPinned||(o.isPinned=!0,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:\"onConversationUnpinned\",value:function(e){var t=this;if(Wi(e)){var n=!1;e.forEach((function(e){var o,r=e.type,a=e.userID,s=e.groupID;1===r?o=t.getLocalConversation(\"\".concat(ro.CONV_C2C).concat(a)):2===r&&(o=t.getLocalConversation(\"\".concat(ro.CONV_GROUP).concat(s))),o&&(Ki.log(\"\".concat(t._className,\".onConversationUnpinned conversationID:\").concat(o.conversationID,\" isPinned:\").concat(o.isPinned)),o.isPinned&&(o.isPinned=!1,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:\"getMessageList\",value:function(e){var t=this,n=e.conversationID,o=e.nextReqMessageID,r=e.count,a=\"\".concat(this._className,\".getMessageList\"),s=this.getLocalConversation(n),i=\"\";if(s&&s.groupProfile&&(i=s.groupProfile.type),mu(i))return Ki.log(\"\".concat(a,\" not available in avchatroom. conversationID:\").concat(n)),um({messageList:[],nextReqMessageID:\"\",isCompleted:!0});(Ji(r)||r>15)&&(r=15);var u=this._computeLeftCount({conversationID:n,nextReqMessageID:o});return Ki.log(\"\".concat(a,\" conversationID:\").concat(n,\" leftCount:\").concat(u,\" count:\").concat(r,\" nextReqMessageID:\").concat(o)),this._needGetHistory({conversationID:n,leftCount:u,count:r})?this.getHistoryMessages({conversationID:n,nextReqMessageID:o,count:20}).then((function(){return u=t._computeLeftCount({conversationID:n,nextReqMessageID:o}),Z_(t._computeResult({conversationID:n,nextReqMessageID:o,count:r,leftCount:u}))})):(Ki.log(\"\".concat(a,\".getMessageList get message list from memory\")),this.modifyMessageList(n),um(this._computeResult({conversationID:n,nextReqMessageID:o,count:r,leftCount:u})))}},{key:\"_computeLeftCount\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;return n?this._messageListHandler.getLocalMessageList(t).findIndex((function(e){return e.ID===n})):this._getMessageListSize(t)}},{key:\"_getMessageListSize\",value:function(e){return this._messageListHandler.getLocalMessageList(e).length}},{key:\"_needGetHistory\",value:function(e){var t=e.conversationID,n=e.leftCount,o=e.count,r=this.getLocalConversation(t),a=\"\";return r&&r.groupProfile&&(a=r.groupProfile.type),!yu(t)&&!mu(a)&&(n<o&&!this._completedMap.has(t))}},{key:\"_computeResult\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,r=e.leftCount,a=this._computeMessageList({conversationID:t,nextReqMessageID:n,count:o}),s=this._computeIsCompleted({conversationID:t,leftCount:r,count:o}),i=this._computeNextReqMessageID({messageList:a,isCompleted:s,conversationID:t}),u=\"\".concat(this._className,\"._computeResult. conversationID:\").concat(t);return Ki.log(\"\".concat(u,\" leftCount:\").concat(r,\" count:\").concat(o,\" nextReqMessageID:\").concat(i,\" isCompleted:\").concat(s)),{messageList:a,nextReqMessageID:i,isCompleted:s}}},{key:\"_computeMessageList\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,o=e.count,r=this._messageListHandler.getLocalMessageList(t),a=this._computeIndexEnd({nextReqMessageID:n,messageList:r}),s=this._computeIndexStart({indexEnd:a,count:o});return r.slice(s,a)}},{key:\"_computeNextReqMessageID\",value:function(e){var t=e.messageList,n=e.isCompleted,o=e.conversationID;if(!n)return 0===t.length?\"\":t[0].ID;var r=this._messageListHandler.getLocalMessageList(o);return 0===r.length?\"\":r[0].ID}},{key:\"_computeIndexEnd\",value:function(e){var t=e.messageList,n=void 0===t?[]:t,o=e.nextReqMessageID;return o?n.findIndex((function(e){return e.ID===o})):n.length}},{key:\"_computeIndexStart\",value:function(e){var t=e.indexEnd,n=e.count;return t>n?t-n:0}},{key:\"_computeIsCompleted\",value:function(e){var t=e.conversationID;return!!(e.leftCount<=e.count&&this._completedMap.has(t))}},{key:\"getHistoryMessages\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;if(t===ro.CONV_SYSTEM)return um();e.count?e.count>20&&(e.count=20):e.count=15;var o=this._messageListHandler.getLocalOldestMessageByConversationID(t);o||((o={}).time=0,o.sequence=0,0===t.indexOf(ro.CONV_C2C)?(o.to=t.replace(ro.CONV_C2C,\"\"),o.conversationType=ro.CONV_C2C):0===t.indexOf(ro.CONV_GROUP)&&(o.to=t.replace(ro.CONV_GROUP,\"\"),o.conversationType=ro.CONV_GROUP));var r=\"\",a=null;switch(o.conversationType){case ro.CONV_C2C:return r=t.replace(ro.CONV_C2C,\"\"),(a=this.getModule($c))?a.getRoamingMessage({conversationID:e.conversationID,peerAccount:r,count:e.count,lastMessageTime:this._roamingMessageKeyMap.has(t)?o.time:0,messageKey:this._roamingMessageKeyMap.get(t)}):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd});case ro.CONV_GROUP:return(a=this.getModule(Yc))?a.getRoamingMessage({conversationID:e.conversationID,groupID:o.to,count:e.count,sequence:n&&!1===o.getOnlineOnlyFlag()?o.sequence-1:o.sequence}):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd});default:return um()}}},{key:\"patchConversationLastMessage\",value:function(e){var t=this.getLocalConversation(e);if(t){var n=t.lastMessage,o=n.messageForShow,r=n.payload;if(Lu(o)||Lu(r)){var a=this._messageListHandler.getLocalMessageList(e);if(0===a.length)return;var s=a[a.length-1];Ki.log(\"\".concat(this._className,\".patchConversationLastMessage conversationID:\").concat(e,\" payload:\"),s.payload),t.updateLastMessage(s)}}}},{key:\"storeRoamingMessage\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,o=n.startsWith(ro.CONV_C2C)?ro.CONV_C2C:ro.CONV_GROUP,r=null,a=[],s=0,i=e.length,u=null,c=o===ro.CONV_GROUP,l=this.getModule(tl),p=function(){s=c?e.length-1:0,i=c?0:e.length},d=function(){c?--s:++s},g=function(){return c?s>=i:s<i};for(p();g();d())if(c&&1===e[s].sequence&&this.setCompleted(n),1!==e[s].isPlaceMessage)if((r=new Q_(e[s])).to=e[s].to,r.isSystemMessage=!!e[s].isSystemMessage,r.conversationType=o,4===e[s].event?u={type:ro.MSG_GRP_TIP,content:t(t({},e[s].elements),{},{groupProfile:e[s].groupProfile})}:(e[s].elements=l.parseElements(e[s].elements,e[s].from),u=e[s].elements),c||r.setNickAndAvatar({nick:e[s].nick,avatar:e[s].avatar}),Lu(u)){var h=new jd(dg);h.setMessage(\"from:\".concat(r.from,\" to:\").concat(r.to,\" sequence:\").concat(r.sequence,\" event:\").concat(e[s].event)),h.setNetworkType(this.getNetworkType()).setLevel(\"warning\").end()}else r.setElement(u),r.reInitialize(this.getMyUserID()),a.push(r);return this._messageListHandler.unshift(a),p=d=g=null,a}},{key:\"setMessageRead\",value:function(e){var t=e.conversationID,n=e.messageID,o=this.getLocalConversation(t);if(Ki.log(\"\".concat(this._className,\".setMessageRead conversationID:\").concat(t,\" unreadCount:\").concat(o?o.unreadCount:0)),!o)return um();if(o.type!==ro.CONV_GROUP||Lu(o.groupAtInfoList)||this.deleteGroupAtTips(t),0===o.unreadCount)return um();var r=this._messageListHandler.getLocalMessage(t,n),a=null;switch(o.type){case ro.CONV_C2C:return(a=this.getModule($c))?a.setMessageRead({conversationID:t,lastMessageTime:r?r.time:o.lastMessage.lastTime}):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd});case ro.CONV_GROUP:return(a=this._moduleManager.getModule(Yc))?a.setMessageRead({conversationID:t,lastMessageSeq:r?r.sequence:o.lastMessage.lastSequence}):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd});case ro.CONV_SYSTEM:return o.unreadCount=0,this._emitConversationUpdate(!0,!1),um();default:return um()}}},{key:\"updateIsReadAfterReadReport\",value:function(e){var t=e.conversationID,n=e.lastMessageSeq,o=e.lastMessageTime,r=this._messageListHandler.getLocalMessageList(t);if(0!==r.length)for(var a,s=r.length-1;s>=0;s--)if(a=r[s],!(o&&a.time>o||n&&a.sequence>n)){if(\"in\"===a.flow&&a.isRead)break;a.setIsRead(!0)}}},{key:\"updateUnreadCount\",value:function(e){var t=this.getLocalConversation(e),n=this._messageListHandler.getLocalMessageList(e);if(t){var o=t.unreadCount,r=n.filter((function(e){return!e.isRead&&!e.getOnlineOnlyFlag()&&!e.isDeleted})).length;o!==r&&(t.unreadCount=r,Ki.log(\"\".concat(this._className,\".updateUnreadCount from \").concat(o,\" to \").concat(r,\", conversationID:\").concat(e)),this._emitConversationUpdate(!0,!1))}}},{key:\"updateIsRead\",value:function(e){var t=this.getLocalConversation(e),n=this.getLocalMessageList(e);if(t&&0!==n.length&&!yu(t.type)){for(var o=[],r=0,a=n.length;r<a;r++)\"in\"!==n[r].flow?\"out\"!==n[r].flow||n[r].isRead||n[r].setIsRead(!0):o.push(n[r]);var s=0;if(t.type===ro.CONV_C2C){var i=o.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;s=o.length-t.unreadCount-i}else s=o.length-t.unreadCount;for(var u=0;u<s&&!o[u].isRead;u++)o[u].setIsRead(!0)}}},{key:\"deleteGroupAtTips\",value:function(e){var t=\"\".concat(this._className,\".deleteGroupAtTips\");Ki.log(\"\".concat(t));var n=this._conversationMap.get(e);if(!n)return Promise.resolve();var o=n.groupAtInfoList;if(0===o.length)return Promise.resolve();var r=this.getMyUserID();return this.request({protocolName:bl,requestData:{messageListToDelete:o.map((function(e){return{from:e.from,to:r,messageSeq:e.__sequence,messageRandom:e.__random,groupID:e.groupID}}))}}).then((function(){return Ki.log(\"\".concat(t,\" ok. count:\").concat(o.length)),n.clearGroupAtInfoList(),Promise.resolve()})).catch((function(e){return Ki.error(\"\".concat(t,\" failed. error:\"),e),cm(e)}))}},{key:\"appendToMessageList\",value:function(e){this._messageListHandler.pushIn(e)}},{key:\"setMessageRandom\",value:function(e){this.singlyLinkedList.set(e.random)}},{key:\"deleteMessageRandom\",value:function(e){this.singlyLinkedList.delete(e.random)}},{key:\"pushIntoMessageList\",value:function(e,t,n){return!(!this._messageListHandler.pushIn(t,n)||this._isMessageFromCurrentInstance(t)&&!n)&&(e.push(t),!0)}},{key:\"_isMessageFromCurrentInstance\",value:function(e){return this.singlyLinkedList.has(e.random)}},{key:\"revoke\",value:function(e,t,n){return this._messageListHandler.revoke(e,t,n)}},{key:\"getPeerReadTime\",value:function(e){return this._peerReadTimeMap.get(e)}},{key:\"recordPeerReadTime\",value:function(e,t){this._peerReadTimeMap.has(e)?this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t):this._peerReadTimeMap.set(e,t)}},{key:\"updateMessageIsPeerReadProperty\",value:function(e,t){if(e.startsWith(ro.CONV_C2C)&&t>0){var n=this._messageListHandler.updateMessageIsPeerReadProperty(e,t);n.length>0&&this.emitOuterEvent(oo.MESSAGE_READ_BY_PEER,n)}}},{key:\"updateMessageIsReadProperty\",value:function(e){var t=this.getLocalConversation(e),n=this._messageListHandler.getLocalMessageList(e);if(t&&0!==n.length&&!yu(t.type)){for(var o=[],r=0;r<n.length;r++)\"in\"!==n[r].flow?\"out\"!==n[r].flow||n[r].isRead||n[r].setIsRead(!0):o.push(n[r]);var a=0;if(t.type===ro.CONV_C2C){var s=o.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;a=o.length-t.unreadCount-s}else a=o.length-t.unreadCount;for(var i=0;i<a&&!o[i].isRead;i++)o[i].setIsRead(!0)}}},{key:\"updateMessageIsModifiedProperty\",value:function(e){this._messageListHandler.updateMessageIsModifiedProperty(e)}},{key:\"setCompleted\",value:function(e){Ki.log(\"\".concat(this._className,\".setCompleted. conversationID:\").concat(e)),this._completedMap.set(e,!0)}},{key:\"updateRoamingMessageKey\",value:function(e,t){this._roamingMessageKeyMap.set(e,t)}},{key:\"getConversationList\",value:function(){var e=this,t=\"\".concat(this._className,\".getConversationList\");Ki.log(t),this._pagingStatus===Cc.REJECTED&&(Ki.log(\"\".concat(t,\". continue to sync conversationList\")),this._syncConversationList());var n=new jd(vg);return this.request({protocolName:Ol,requestData:{fromAccount:this.getMyUserID()}}).then((function(o){var r=o.data.conversations,a=void 0===r?[]:r,s=e._getConversationOptions(a);return e._updateLocalConversationList(s,!0),e._setStorageConversationList(),e._handleC2CPeerReadTime(),n.setMessage(\"conversation count: \".concat(a.length)).setNetworkType(e.getNetworkType()).end(),Ki.log(\"\".concat(t,\" ok\")),um({conversationList:e.getLocalConversationList()})})).catch((function(o){return e.probeNetwork().then((function(e){var t=m(e,2),r=t[0],a=t[1];n.setError(o,r,a).end()})),Ki.error(\"\".concat(t,\" failed. error:\"),o),cm(o)}))}},{key:\"_handleC2CPeerReadTime\",value:function(){var e,t=D(this._conversationMap);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],r=n[1];r.type===ro.CONV_C2C&&(Ki.debug(\"\".concat(this._className,\"._handleC2CPeerReadTime conversationID:\").concat(o,\" peerReadTime:\").concat(r.peerReadTime)),this.recordPeerReadTime(o,r.peerReadTime))}}catch(a){t.e(a)}finally{t.f()}}},{key:\"getConversationProfile\",value:function(e){var t,n=this;if((t=this._conversationMap.has(e)?this._conversationMap.get(e):new jm({conversationID:e,type:e.slice(0,3)===ro.CONV_C2C?ro.CONV_C2C:ro.CONV_GROUP}))._isInfoCompleted||t.type===ro.CONV_SYSTEM)return um({conversation:t});var o=new jd(Mg),r=\"\".concat(this._className,\".getConversationProfile\");return Ki.log(\"\".concat(r,\". conversationID:\").concat(e,\" remark:\").concat(t.remark,\" lastMessage:\"),t.lastMessage),this._updateUserOrGroupProfileCompletely(t).then((function(a){o.setNetworkType(n.getNetworkType()).setMessage(\"conversationID:\".concat(e,\" unreadCount:\").concat(a.data.conversation.unreadCount)).end();var s=n.getModule(zc);if(s&&t.type===ro.CONV_C2C){var i=e.replace(ro.CONV_C2C,\"\");if(s.isMyFriend(i)){var u=s.getFriendRemark(i);t.remark!==u&&(t.remark=u,Ki.log(\"\".concat(r,\". conversationID:\").concat(e,\" patch remark:\").concat(t.remark)))}}return Ki.log(\"\".concat(r,\" ok. conversationID:\").concat(e)),a})).catch((function(t){return n.probeNetwork().then((function(n){var r=m(n,2),a=r[0],s=r[1];o.setError(t,a,s).setMessage(\"conversationID:\".concat(e)).end()})),Ki.error(\"\".concat(r,\" failed. error:\"),t),cm(t)}))}},{key:\"_updateUserOrGroupProfileCompletely\",value:function(e){var t=this;return e.type===ro.CONV_C2C?this.getModule(jc).getUserProfile({userIDList:[e.toAccount]}).then((function(n){var o=n.data;return 0===o.length?cm(new am({code:Tp.USER_OR_GROUP_NOT_FOUND,message:nd})):(e.userProfile=o[0],e._isInfoCompleted=!0,t._unshiftConversation(e),um({conversation:e}))})):this.getModule(Yc).getGroupProfile({groupID:e.toAccount}).then((function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=!0,t._unshiftConversation(e),um({conversation:e})}))}},{key:\"_unshiftConversation\",value:function(e){e instanceof jm&&!this._conversationMap.has(e.conversationID)&&(this._conversationMap=new Map([[e.conversationID,e]].concat(v(this._conversationMap))),this._setStorageConversationList(),this._emitConversationUpdate(!0,!1))}},{key:\"deleteConversation\",value:function(e){var t=this,n={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0};if(!this._conversationMap.has(e)){var o=new am({code:Tp.CONVERSATION_NOT_FOUND,message:td});return cm(o)}switch(this._conversationMap.get(e).type){case ro.CONV_C2C:n.type=1,n.toAccount=e.replace(ro.CONV_C2C,\"\");break;case ro.CONV_GROUP:n.type=2,n.toGroupID=e.replace(ro.CONV_GROUP,\"\");break;case ro.CONV_SYSTEM:return this.getModule(Yc).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),this.deleteLocalConversation(e),um({conversationID:e});default:var r=new am({code:Tp.CONVERSATION_UN_RECORDED_TYPE,message:od});return cm(r)}var a=new jd(yg);a.setMessage(\"conversationID:\".concat(e));var s=\"\".concat(this._className,\".deleteConversation\");return Ki.log(\"\".concat(s,\". conversationID:\").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.request({protocolName:Ll,requestData:n})})).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(s,\" ok\")),t.deleteLocalConversation(e),um({conversationID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.error(\"\".concat(s,\" failed. error:\"),e),cm(e)}))}},{key:\"pinConversation\",value:function(e){var t=this,n=e.conversationID,o=e.isPinned;if(!this._conversationMap.has(n))return cm({code:Tp.CONVERSATION_NOT_FOUND,message:td});var r=this.getLocalConversation(n);if(r.isPinned===o)return um({conversationID:n});var a=new jd(Ig);a.setMessage(\"conversationID:\".concat(n,\" isPinned:\").concat(o));var s=\"\".concat(this._className,\".pinConversation\");Ki.log(\"\".concat(s,\". conversationID:\").concat(n,\" isPinned:\").concat(o));var i=null;return vu(n)?i={type:1,toAccount:n.replace(ro.CONV_C2C,\"\")}:Mu(n)&&(i={type:2,groupID:n.replace(ro.CONV_GROUP,\"\")}),this.request({protocolName:Rl,requestData:{fromAccount:this.getMyUserID(),operationType:!0===o?1:2,itemList:[i]}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(s,\" ok\")),r.isPinned!==o&&(r.isPinned=o,t._sortConversationListAndEmitEvent()),Z_({conversationID:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.error(\"\".concat(s,\" failed. error:\"),e),cm(e)}))}},{key:\"deleteLocalConversation\",value:function(e){var t=this._conversationMap.has(e);Ki.log(\"\".concat(this._className,\".deleteLocalConversation conversationID:\").concat(e,\" has:\").concat(t)),t&&(this._conversationMap.delete(e),this._roamingMessageKeyMap.delete(e),this._setStorageConversationList(),this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),this._emitConversationUpdate(!0,!1))}},{key:\"isMessageSentByCurrentInstance\",value:function(e){return!(!this._messageListHandler.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}},{key:\"modifyMessageList\",value:function(e){if(e.startsWith(ro.CONV_C2C)){var t=Date.now();this._messageListHandler.modifyMessageSentByPeer(e);var n=this.getModule(jc).getNickAndAvatarByUserID(this.getMyUserID());this._messageListHandler.modifyMessageSentByMe({conversationID:e,latestNick:n.nick,latestAvatar:n.avatar}),Ki.log(\"\".concat(this._className,\".modifyMessageList conversationID:\").concat(e,\" cost \").concat(Date.now()-t,\" ms\"))}}},{key:\"updateUserProfileSpecifiedKey\",value:function(e){Ki.log(\"\".concat(this._className,\".updateUserProfileSpecifiedKey options:\"),e);var t=e.conversationID,n=e.nick,o=e.avatar;if(this._conversationMap.has(t)){var r=this._conversationMap.get(t).userProfile;$i(n)&&r.nick!==n&&(r.nick=n),$i(o)&&r.avatar!==o&&(r.avatar=o),this._emitConversationUpdate(!0,!1)}}},{key:\"onMyProfileModified\",value:function(e){var n=this,o=this.getLocalConversationList(),r=Date.now();o.forEach((function(o){n.modifyMessageSentByMe(t({conversationID:o.conversationID},e))})),Ki.log(\"\".concat(this._className,\".onMyProfileModified. modify all messages sent by me, cost \").concat(Date.now()-r,\" ms\"))}},{key:\"modifyMessageSentByMe\",value:function(e){this._messageListHandler.modifyMessageSentByMe(e)}},{key:\"getLatestMessageSentByMe\",value:function(e){return this._messageListHandler.getLatestMessageSentByMe(e)}},{key:\"modifyMessageSentByPeer\",value:function(e,t){this._messageListHandler.modifyMessageSentByPeer(e,t)}},{key:\"getLatestMessageSentByPeer\",value:function(e){return this._messageListHandler.getLatestMessageSentByPeer(e)}},{key:\"pushIntoNoticeResult\",value:function(e,t){return!(!this._messageListHandler.pushIn(t)||this.singlyLinkedList.has(t.random))&&(e.push(t),!0)}},{key:\"getGroupLocalLastMessageSequence\",value:function(e){return this._messageListHandler.getGroupLocalLastMessageSequence(e)}},{key:\"checkAndPatchRemark\",value:function(){if(0!==this._conversationMap.size){var e=this.getModule(zc);if(e){var t=v(this._conversationMap.values()).filter((function(e){return e.type===ro.CONV_C2C}));if(0!==t.length){var n=!1,o=0;t.forEach((function(t){var r=t.conversationID.replace(ro.CONV_C2C,\"\");if(e.isMyFriend(r)){var a=e.getFriendRemark(r);t.remark!==a&&(t.remark=a,o+=1,n=!0)}})),Ki.log(\"\".concat(this._className,\".checkAndPatchRemark. c2c conversation count:\").concat(t.length,\", patched count:\").concat(o)),n&&this._emitConversationUpdate(!0,!1)}}}}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._pagingStatus=Cc.NOT_START,this._messageListHandler.reset(),this._roamingMessageKeyMap.clear(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._conversationMap.clear(),this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this.resetReady()}}]),r}(pl),Ym=function(){function e(t){o(this,e),this._groupModule=t,this._className=\"GroupTipsHandler\",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4}return a(e,[{key:\"onCheckTimer\",value:function(e){e%1==0&&this._cachedGroupTipsMap.size>0&&this._checkCachedGroupTips()}},{key:\"_checkCachedGroupTips\",value:function(){var e=this;this._cachedGroupTipsMap.forEach((function(t,n){var o=e._checkCountMap.get(n),r=e._groupModule.hasLocalGroup(n);Ki.log(\"\".concat(e._className,\"._checkCachedGroupTips groupID:\").concat(n,\" hasLocalGroup:\").concat(r,\" checkCount:\").concat(o)),r?(e._notifyCachedGroupTips(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupTips(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:\"onNewGroupTips\",value:function(e){Ki.debug(\"\".concat(this._className,\".onReceiveGroupTips count:\").concat(e.dataList.length));var t=this.newGroupTipsStoredAndSummary(e),n=t.eventDataList,o=t.result,r=t.AVChatRoomMessageList;(r.length>0&&this._groupModule.onAVChatRoomMessage(r),n.length>0)&&(this._groupModule.getModule(Jc).onNewMessage({conversationOptionsList:n,isInstantMessage:!0}),this._groupModule.updateNextMessageSeq(n));o.length>0&&(this._groupModule.emitOuterEvent(oo.MESSAGE_RECEIVED,o),this.handleMessageList(o))}},{key:\"newGroupTipsStoredAndSummary\",value:function(e){for(var n=e.event,o=e.dataList,r=null,a=[],s=[],i={},u=[],c=0,l=o.length;c<l;c++){var p=o[c],d=p.groupProfile.groupID,g=this._groupModule.hasLocalGroup(d);if(g||!this._groupModule.isUnjoinedAVChatRoom(d))if(g)if(this._groupModule.isMessageFromAVChatroom(d)){var h=hu(p);h.event=n,u.push(h)}else{p.currentUser=this._groupModule.getMyUserID(),p.conversationType=ro.CONV_GROUP,(r=new Q_(p)).setElement({type:ro.MSG_GRP_TIP,content:t(t({},p.elements),{},{groupProfile:p.groupProfile})}),r.isSystemMessage=!1;var f=this._groupModule.getModule(Jc),_=r.conversationID;if(6===n)r.setOnlineOnlyFlag(!0),s.push(r);else if(!f.pushIntoNoticeResult(s,r))continue;if(6!==n||!f.getLocalConversation(_)){if(6!==n)this._groupModule.getModule(ll).addMessageSequence({key:qd,message:r});if(Ji(i[_]))i[_]=a.push({conversationID:_,unreadCount:\"in\"===r.flow&&r.getOnlineOnlyFlag()?0:1,type:r.conversationType,subType:r.conversationSubType,lastMessage:r})-1;else{var m=i[_];a[m].type=r.conversationType,a[m].subType=r.conversationSubType,a[m].lastMessage=r,\"in\"!==r.flow||r.getOnlineOnlyFlag()||a[m].unreadCount++}}}else this._cacheGroupTipsAndProbe({groupID:d,event:n,item:p})}return{eventDataList:a,result:s,AVChatRoomMessageList:u}}},{key:\"handleMessageList\",value:function(e){var t=this;e.forEach((function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;default:Ki.warn(\"\".concat(t._className,\".handleMessageList unknown operationType:\").concat(e.payload.operationType))}}))}},{key:\"_onNewMemberComeIn\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&ji(n)&&(r.memberNum=n)}},{key:\"_onMemberQuit\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&ji(n)&&(r.memberNum=n),this._groupModule.deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:\"_onMemberKickedOut\",value:function(e){var t=e.payload,n=t.memberNum,o=t.groupProfile.groupID,r=this._groupModule.getLocalGroupProfile(o);r&&ji(n)&&(r.memberNum=n),this._groupModule.deleteLocalGroupMembers(o,e.payload.userIDList)}},{key:\"_onMemberSetAdmin\",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(Wc);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(ro.GRP_MBR_ROLE_ADMIN)}))}},{key:\"_onMemberCancelledAdmin\",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,o=this._groupModule.getModule(Wc);n.forEach((function(e){var n=o.getLocalGroupMemberInfo(t,e);n&&n.updateRole(ro.GRP_MBR_ROLE_MEMBER)}))}},{key:\"_onGroupProfileModified\",value:function(e){var t=this,n=e.payload,o=n.newGroupProfile,r=n.groupProfile.groupID,a=this._groupModule.getLocalGroupProfile(r);Object.keys(o).forEach((function(e){switch(e){case\"ownerID\":t._ownerChanged(a,o);break;default:a[e]=o[e]}})),this._groupModule.emitGroupListUpdate(!0,!0)}},{key:\"_ownerChanged\",value:function(e,t){var n=e.groupID,o=this._groupModule.getLocalGroupProfile(n),r=this.tim.context.identifier;if(r===t.ownerID){o.updateGroup({selfInfo:{role:ro.GRP_MBR_ROLE_OWNER}});var a=this._groupModule.getModule(Wc),s=a.getLocalGroupMemberInfo(n,r),i=this._groupModule.getLocalGroupProfile(n).ownerID,u=a.getLocalGroupMemberInfo(n,i);s&&s.updateRole(ro.GRP_MBR_ROLE_OWNER),u&&u.updateRole(ro.GRP_MBR_ROLE_MEMBER)}}},{key:\"_onMemberInfoModified\",value:function(e){var t=e.payload.groupProfile.groupID,n=this._groupModule.getModule(Wc);e.payload.memberList.forEach((function(e){var o=n.getLocalGroupMemberInfo(t,e.userID);o&&e.muteTime&&o.updateMuteUntil(e.muteTime)}))}},{key:\"_cacheGroupTips\",value:function(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}},{key:\"_deleteCachedGroupTips\",value:function(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}},{key:\"_notifyCachedGroupTips\",value:function(e){var t=this,n=this._cachedGroupTipsMap.get(e)||[];n.forEach((function(e){t.onNewGroupTips(e)})),this._deleteCachedGroupTips(e),Ki.log(\"\".concat(this._className,\"._notifyCachedGroupTips groupID:\").concat(e,\" count:\").concat(n.length))}},{key:\"_cacheGroupTipsAndProbe\",value:function(e){var t=this,n=e.groupID,o=e.event,r=e.item;this._cacheGroupTips(n,{event:o,dataList:[r]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===ro.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupTips(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupTips(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Ki.log(\"\".concat(this._className,\"._cacheGroupTipsAndProbe groupID:\").concat(n))}},{key:\"reset\",value:function(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear()}}]),e}(),zm=Ho.UNSUPPORTED_Y,Wm=[].push,Jm=Math.min;or(\"split\",(function(e,t,n){var o;return o=\"c\"==\"abbc\".split(/(b)*/)[1]||4!=\"test\".split(/(?:)/,-1).length||2!=\"ab\".split(/(?:ab)*/).length||4!=\".\".split(/(.?)(.?)/).length||\".\".split(/()()/).length>1||\"\".split(/.?/).length?function(e,n){var o=Mt(V(this)),r=void 0===n?4294967295:n>>>0;if(0===r)return[];if(void 0===e)return[o];if(!dr(e))return t.call(o,e,r);for(var a,s,i,u=[],c=(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.unicode?\"u\":\"\")+(e.sticky?\"y\":\"\"),l=0,p=new RegExp(e.source,c+\"g\");(a=er.call(p,o))&&!((s=p.lastIndex)>l&&(u.push(o.slice(l,a.index)),a.length>1&&a.index<o.length&&Wm.apply(u,a.slice(1)),i=a[0].length,l=s,u.length>=r));)p.lastIndex===a.index&&p.lastIndex++;return l===o.length?!i&&p.test(\"\")||u.push(\"\"):u.push(o.slice(l)),u.length>r?u.slice(0,r):u}:\"0\".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=V(this),a=null==t?void 0:t[e];return void 0!==a?a.call(t,r,n):o.call(Mt(r),t,n)},function(e,r){var a=Se(this),s=Mt(e),i=n(o,a,s,r,o!==t);if(i.done)return i.value;var u=Ta(a,RegExp),c=a.unicode,l=(a.ignoreCase?\"i\":\"\")+(a.multiline?\"m\":\"\")+(a.unicode?\"u\":\"\")+(zm?\"g\":\"y\"),p=new u(zm?\"^(?:\"+a.source+\")\":a,l),d=void 0===r?4294967295:r>>>0;if(0===d)return[];if(0===s.length)return null===sr(p,s)?[s]:[];for(var g=0,h=0,f=[];h<s.length;){p.lastIndex=zm?0:h;var _,m=sr(p,zm?s.slice(h):s);if(null===m||(_=Jm(We(p.lastIndex+(zm?h:0)),s.length))===g)h=ar(s,h,c);else{if(f.push(s.slice(g,h)),f.length===d)return f;for(var v=1;v<=m.length-1;v++)if(f.push(m[v]),f.length===d)return f;h=g=_}}return f.push(s.slice(g)),f}]}),!!L((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n=\"ab\".split(e);return 2!==n.length||\"a\"!==n[0]||\"b\"!==n[1]})),zm);var Xm=function(){function e(t){o(this,e),this._groupModule=t,this._className=\"CommonGroupHandler\",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,t.getInnerEmitterInstance().once(Om.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initGroupList,this)}return a(e,[{key:\"onCheckTimer\",value:function(e){e%1==0&&this._cachedGroupMessageMap.size>0&&this._checkCachedGroupMessage()}},{key:\"_checkCachedGroupMessage\",value:function(){var e=this;this._cachedGroupMessageMap.forEach((function(t,n){var o=e._checkCountMap.get(n),r=e._groupModule.hasLocalGroup(n);Ki.log(\"\".concat(e._className,\"._checkCachedGroupMessage groupID:\").concat(n,\" hasLocalGroup:\").concat(r,\" checkCount:\").concat(o)),r?(e._notifyCachedGroupMessage(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):o>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupMessage(n),e._checkCountMap.delete(n)):(o++,e._checkCountMap.set(n,o))}))}},{key:\"_initGroupList\",value:function(){var e=this;Ki.log(\"\".concat(this._className,\"._initGroupList\"));var t=new jd(Gg),n=this._groupModule.getStorageGroupList();if(Wi(n)&&n.length>0){n.forEach((function(t){e._groupModule.initGroupMap(t)})),this._groupModule.emitGroupListUpdate(!0,!1);var o=this._groupModule.getLocalGroupList().length;t.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"group count:\".concat(o)).end()}else t.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"group count:0\").end();Ki.log(\"\".concat(this._className,\"._initGroupList ok\")),this.getGroupList()}},{key:\"handleUpdateGroupLastMessage\",value:function(e){var t=\"\".concat(this._className,\".handleUpdateGroupLastMessage\");if(Ki.debug(\"\".concat(t,\" conversation count:\").concat(e.length,\", local group count:\").concat(this._groupModule.getLocalGroupList().length)),0!==this._groupModule.getGroupMap().size){for(var n,o,r,a=!1,s=0,i=e.length;s<i;s++)(n=e[s]).type===ro.CONV_GROUP&&(o=n.conversationID.split(/^GROUP/)[1],(r=this._groupModule.getLocalGroupProfile(o))&&(r.lastMessage=n.lastMessage,a=!0));a&&(this._groupModule.sortLocalGroupList(),this._groupModule.emitGroupListUpdate(!0,!1))}else this.tempConversationList=e}},{key:\"onNewGroupMessage\",value:function(e){Ki.debug(\"\".concat(this._className,\".onNewGroupMessage count:\").concat(e.dataList.length));var t=this._newGroupMessageStoredAndSummary(e),n=t.conversationOptionsList,o=t.messageList,r=t.AVChatRoomMessageList;(r.length>0&&this._groupModule.onAVChatRoomMessage(r),this._groupModule.filterModifiedMessage(o),n.length>0)&&(this._groupModule.getModule(Jc).onNewMessage({conversationOptionsList:n,isInstantMessage:!0}),this._groupModule.updateNextMessageSeq(n));var a=this._groupModule.filterUnmodifiedMessage(o);a.length>0&&this._groupModule.emitOuterEvent(oo.MESSAGE_RECEIVED,a),o.length=0}},{key:\"_newGroupMessageStoredAndSummary\",value:function(e){var t=e.dataList,n=e.event,o=e.isInstantMessage,r=null,a=[],s=[],i=[],u={},c=ro.CONV_GROUP,l=this._groupModule.getModule(tl),p=t.length;p>1&&t.sort((function(e,t){return e.sequence-t.sequence}));for(var d=0;d<p;d++){var g=t[d],h=g.groupProfile.groupID,f=this._groupModule.hasLocalGroup(h);if(f||!this._groupModule.isUnjoinedAVChatRoom(h))if(f)if(this._groupModule.isMessageFromAVChatroom(h)){var _=hu(g);_.event=n,i.push(_)}else{g.currentUser=this._groupModule.getMyUserID(),g.conversationType=c,g.isSystemMessage=!!g.isSystemMessage,r=new Q_(g),g.elements=l.parseElements(g.elements,g.from),r.setElement(g.elements);var m=1===t[d].isModified,v=this._groupModule.getModule(Jc);v.isMessageSentByCurrentInstance(r)?r.isModified=m:m=!1;var M=this._groupModule.getModule(ll);if(o&&M.addMessageDelay({currentTime:Date.now(),time:r.time}),1===g.onlineOnlyFlag)r.setOnlineOnlyFlag(!0),s.push(r);else{if(!v.pushIntoMessageList(s,r,m))continue;M.addMessageSequence({key:qd,message:r});var y=r.conversationID;if(Ji(u[y]))u[y]=a.push({conversationID:y,unreadCount:\"out\"===r.flow?0:1,type:r.conversationType,subType:r.conversationSubType,lastMessage:r})-1;else{var I=u[y];a[I].type=r.conversationType,a[I].subType=r.conversationSubType,a[I].lastMessage=r,\"in\"===r.flow&&a[I].unreadCount++}}}else this._cacheGroupMessageAndProbe({groupID:h,event:n,item:g})}return{conversationOptionsList:a,messageList:s,AVChatRoomMessageList:i}}},{key:\"onGroupMessageRevoked\",value:function(e){Ki.debug(\"\".concat(this._className,\".onGroupMessageRevoked nums:\").concat(e.dataList.length));var t=this._groupModule.getModule(Jc),n=[],o=null;e.dataList.forEach((function(e){var r=e.elements.revokedInfos;Ji(r)||r.forEach((function(e){(o=t.revoke(\"GROUP\".concat(e.groupID),e.sequence,e.random))&&n.push(o)}))})),0!==n.length&&(t.onMessageRevoked(n),this._groupModule.emitOuterEvent(oo.MESSAGE_REVOKED,n))}},{key:\"_groupListTreeShaking\",value:function(e){for(var t=new Map(v(this._groupModule.getGroupMap())),n=0,o=e.length;n<o;n++)t.delete(e[n].groupID);this._groupModule.hasJoinedAVChatRoom()&&this._groupModule.getJoinedAVChatRoom().forEach((function(e){t.delete(e)}));for(var r=v(t.keys()),a=0,s=r.length;a<s;a++)this._groupModule.deleteGroup(r[a])}},{key:\"getGroupList\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupList\"),o=new jd(wg);Ki.log(\"\".concat(n));var r={introduction:\"Introduction\",notification:\"Notification\",createTime:\"CreateTime\",ownerID:\"Owner_Account\",lastInfoTime:\"LastInfoTime\",memberNum:\"MemberNum\",maxMemberNum:\"MaxMemberNum\",joinOption:\"ApplyJoinOption\",muteAllMembers:\"ShutUpAllMember\"},a=[\"Type\",\"Name\",\"FaceUrl\",\"NextMsgSeq\",\"LastMsgTime\"],s=[];return e&&e.groupProfileFilter&&e.groupProfileFilter.forEach((function(e){r[e]&&a.push(r[e])})),this._pagingGetGroupList({limit:50,offset:0,groupBaseInfoFilter:a,groupList:s}).then((function(){Ki.log(\"\".concat(n,\" ok. count:\").concat(s.length)),t._groupListTreeShaking(s),t._groupModule.updateGroupMap(s);var e=t._groupModule.getLocalGroupList().length;return o.setNetworkType(t._groupModule.getNetworkType()).setMessage(\"remote count:\".concat(s.length,\", after tree shaking, local count:\").concat(e)).end(),t.tempConversationList&&(Ki.log(\"\".concat(n,\" update last message with tempConversationList, count:\").concat(t.tempConversationList.length)),t.handleUpdateGroupLastMessage({data:t.tempConversationList}),t.tempConversationList=null),t._groupModule.emitGroupListUpdate(),Z_({groupList:t._groupModule.getLocalGroupList()})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"_pagingGetGroupList\",value:function(e){var t=this,n=\"\".concat(this._className,\"._pagingGetGroupList\"),o=e.limit,r=e.offset,a=e.groupBaseInfoFilter,s=e.groupList,i=new jd(qg);return this._groupModule.request({protocolName:wl,requestData:{memberAccount:this._groupModule.getMyUserID(),limit:o,offset:r,responseFilter:{groupBaseInfoFilter:a,selfInfoFilter:[\"Role\",\"JoinTime\",\"MsgFlag\"]}}}).then((function(e){var u=e.data,c=u.groups,l=u.totalCount;s.push.apply(s,v(c));var p=r+o,d=!(l>p);return i.setNetworkType(t._groupModule.getNetworkType()).setMessage(\"offset:\".concat(r,\" totalCount:\").concat(l,\" isCompleted:\").concat(d,\" currentCount:\").concat(s.length)).end(),d?(Ki.log(\"\".concat(n,\" ok. totalCount:\").concat(l)),Z_({groupList:s})):(r=p,t._pagingGetGroupList({limit:o,offset:r,groupBaseInfoFilter:a,groupList:s}))})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),cm(e)}))}},{key:\"_cacheGroupMessage\",value:function(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}},{key:\"_deleteCachedGroupMessage\",value:function(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}},{key:\"_notifyCachedGroupMessage\",value:function(e){var t=this,n=this._cachedGroupMessageMap.get(e)||[];n.forEach((function(e){t.onNewGroupMessage(e)})),this._deleteCachedGroupMessage(e),Ki.log(\"\".concat(this._className,\"._notifyCachedGroupMessage groupID:\").concat(e,\" count:\").concat(n.length))}},{key:\"_cacheGroupMessageAndProbe\",value:function(e){var t=this,n=e.groupID,o=e.event,r=e.item;this._cacheGroupMessage(n,{event:o,dataList:[r]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===ro.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupMessage(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupMessage(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Ki.log(\"\".concat(this._className,\"._cacheGroupMessageAndProbe groupID:\").concat(n))}},{key:\"reset\",value:function(){this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._groupModule.getInnerEmitterInstance().once(Om.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initGroupList,this)}}]),e}(),Qm={1:\"init\",2:\"modify\",3:\"clear\",4:\"delete\"},Zm=function(){function e(t){o(this,e),this._groupModule=t,this._className=\"GroupAttributesHandler\",this._groupAttributesMap=new Map,this.CACHE_EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(Om.CLOUD_CONFIG_UPDATED,this._onCloudConfigUpdated,this)}return a(e,[{key:\"_onCloudConfigUpdated\",value:function(){var e=this._groupModule.getCloudConfig(\"grp_attr_cache_time\");Ji(e)||(this.CACHE_EXPIRE_TIME=Number(e))}},{key:\"updateLocalMainSequenceOnReconnected\",value:function(){this._groupAttributesMap.forEach((function(e){e.localMainSequence=0}))}},{key:\"onGroupAttributesUpdated\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributeOption,r=o.mainSequence,a=o.hasChangedAttributeInfo,s=o.groupAttributeList,i=void 0===s?[]:s,u=o.operationType;if(Ki.log(\"\".concat(this._className,\".onGroupAttributesUpdated. hasChangedAttributeInfo:\").concat(a,\" operationType:\").concat(u)),1===a){if(4===u){var c=[];i.forEach((function(e){c.push(e.key)})),i=v(c),c=null}return this._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:r,groupAttributeList:i,operationType:Qm[u]}),void this._emitGroupAttributesUpdated(n)}if(this._groupAttributesMap.has(n)){var l=this._groupAttributesMap.get(n).avChatRoomKey;this._getGroupAttributes({groupID:n,avChatRoomKey:l}).then((function(){t._emitGroupAttributesUpdated(n)}))}}},{key:\"initGroupAttributesCache\",value:function(e){var t=e.groupID,n=e.avChatRoomKey;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:n}),Ki.log(\"\".concat(this._className,\".initGroupAttributesCache groupID:\").concat(t,\" avChatRoomKey:\").concat(n))}},{key:\"initGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,r=this._checkCachedGroupAttributes({groupID:n,funcName:\"initGroupAttributes\"});if(!0!==r)return cm(r);var a=this._groupAttributesMap.get(n),s=a.remoteMainSequence,i=a.avChatRoomKey,u=new jd(Kg);return u.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(s,\" groupAttributes:\").concat(JSON.stringify(o))),this._groupModule.request({protocolName:tp,requestData:{groupID:n,avChatRoomKey:i,mainSequence:s,groupAttributeList:this._transformGroupAttributes(o)}}).then((function(e){var r=e.data,a=r.mainSequence,s=v(r.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:a,groupAttributeList:s,operationType:\"init\"}),u.setNetworkType(t._groupModule.getNetworkType()).end(),Ki.log(\"\".concat(t._className,\".initGroupAttributes ok. groupID:\").concat(n)),Z_({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),cm(e)}))}},{key:\"setGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.groupAttributes,r=this._checkCachedGroupAttributes({groupID:n,funcName:\"setGroupAttributes\"});if(!0!==r)return cm(r);var a=this._groupAttributesMap.get(n),s=a.remoteMainSequence,i=a.avChatRoomKey,u=a.attributes,c=this._transformGroupAttributes(o);c.forEach((function(e){var t=e.key;e.sequence=0,u.has(t)&&(e.sequence=u.get(t).sequence)}));var l=new jd(Bg);return l.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(s,\" groupAttributes:\").concat(JSON.stringify(o))),this._groupModule.request({protocolName:np,requestData:{groupID:n,avChatRoomKey:i,mainSequence:s,groupAttributeList:c}}).then((function(e){var r=e.data,a=r.mainSequence,s=v(r.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:a,groupAttributeList:s,operationType:\"modify\"}),l.setNetworkType(t._groupModule.getNetworkType()).end(),Ki.log(\"\".concat(t._className,\".setGroupAttributes ok. groupID:\").concat(n)),Z_({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),cm(e)}))}},{key:\"deleteGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=e.keyList,r=void 0===o?[]:o,a=this._checkCachedGroupAttributes({groupID:n,funcName:\"deleteGroupAttributes\"});if(!0!==a)return cm(a);var s=this._groupAttributesMap.get(n),i=s.remoteMainSequence,u=s.avChatRoomKey,c=s.attributes,l=v(c.keys()),p=rp,d=\"clear\",g={groupID:n,avChatRoomKey:u,mainSequence:i};if(r.length>0){var h=[];l=[],p=op,d=\"delete\",r.forEach((function(e){var t=0;c.has(e)&&(t=c.get(e).sequence,l.push(e)),h.push({key:e,sequence:t})})),g.groupAttributeList=h}var f=new jd(Hg);return f.setMessage(\"groupID:\".concat(n,\" mainSequence:\").concat(i,\" keyList:\").concat(r,\" protocolName:\").concat(p)),this._groupModule.request({protocolName:p,requestData:g}).then((function(e){var o=e.data.mainSequence;return t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:o,groupAttributeList:r,operationType:d}),f.setNetworkType(t._groupModule.getNetworkType()).end(),Ki.log(\"\".concat(t._className,\".deleteGroupAttributes ok. groupID:\").concat(n)),Z_({keyList:l})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];f.setError(e,o,r).end()})),cm(e)}))}},{key:\"getGroupAttributes\",value:function(e){var t=this,n=e.groupID,o=this._checkCachedGroupAttributes({groupID:n,funcName:\"getGroupAttributes\"});if(!0!==o)return cm(o);var r=this._groupAttributesMap.get(n),a=r.avChatRoomKey,s=r.lastUpdateTime,i=r.localMainSequence,u=r.remoteMainSequence,c=new jd(jg);if(c.setMessage(\"groupID:\".concat(n,\" localMainSequence:\").concat(i,\" remoteMainSequence:\").concat(u,\" keyList:\").concat(e.keyList)),Date.now()-s>=this.CACHE_EXPIRE_TIME||i<u)return this._getGroupAttributes({groupID:n,avChatRoomKey:a}).then((function(o){c.setMoreMessage(\"get attributes from remote. count:\".concat(o.length)).setNetworkType(t._groupModule.getNetworkType()).end(),Ki.log(\"\".concat(t._className,\".getGroupAttributes from remote. groupID:\").concat(n));var r=t._getLocalGroupAttributes(e);return Z_({groupAttributes:r})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),cm(e)}));c.setMoreMessage(\"get attributes from cache\").setNetworkType(this._groupModule.getNetworkType()).end(),Ki.log(\"\".concat(this._className,\".getGroupAttributes from cache. groupID:\").concat(n));var l=this._getLocalGroupAttributes(e);return um({groupAttributes:l})}},{key:\"_getGroupAttributes\",value:function(e){var n=this;return this._groupModule.request({protocolName:ap,requestData:t({},e)}).then((function(t){var o=t.data,r=o.mainSequence,a=o.groupAttributeList,s=v(a);return Ki.log(\"\".concat(n._className,\"._getGroupAttributes ok. groupID:\").concat(e.groupID)),n._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:r,groupAttributeList:s,operationType:\"get\"}),a})).catch((function(e){return cm(e)}))}},{key:\"_getLocalGroupAttributes\",value:function(e){var t=e.groupID,n=e.keyList,o=void 0===n?[]:n,r={};if(!this._groupAttributesMap.has(t))return r;var a=this._groupAttributesMap.get(t).attributes;if(o.length>0)o.forEach((function(e){a.has(e)&&(r[e]=a.get(e).value)}));else{var s,i=D(a.keys());try{for(i.s();!(s=i.n()).done;){var u=s.value;r[u]=a.get(u).value}}catch(c){i.e(c)}finally{i.f()}}return r}},{key:\"_refreshCachedGroupAttributes\",value:function(e){var t=e.groupID,n=e.remoteMainSequence,o=e.groupAttributeList,r=e.operationType;if(this._groupAttributesMap.has(t)){var a=this._groupAttributesMap.get(t),s=a.localMainSequence;if(\"get\"===r||n-s==1)a.remoteMainSequence=n,a.localMainSequence=n,a.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:a,groupAttributeList:o,operationType:r});else{if(s===n)return;a.remoteMainSequence=n}this._groupAttributesMap.set(t,a);var i=\"operationType:\".concat(r,\" localMainSequence:\").concat(s,\" remoteMainSequence:\").concat(n);Ki.log(\"\".concat(this._className,\"._refreshCachedGroupAttributes. \").concat(i))}}},{key:\"_updateCachedAttributes\",value:function(e){var t=e.groupAttributes,n=e.groupAttributeList,o=e.operationType;\"clear\"!==o?\"delete\"!==o?(\"init\"===o&&t.attributes.clear(),n.forEach((function(e){var n=e.key,o=e.value,r=e.sequence;t.attributes.set(n,{value:o,sequence:r})}))):n.forEach((function(e){t.attributes.delete(e)})):t.attributes.clear()}},{key:\"_checkCachedGroupAttributes\",value:function(e){var t=e.groupID,n=e.funcName;if(this._groupModule.hasLocalGroup(t)&&this._groupModule.getLocalGroupProfile(t).type!==ro.GRP_AVCHATROOM){return Ki.warn(\"\".concat(this._className,\"._checkCachedGroupAttributes. \").concat(\"非直播群不能使用群属性 API\")),new am({code:Tp.CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM,message:\"非直播群不能使用群属性 API\"})}var o=this._groupAttributesMap.get(t);if(Ji(o)){var r=\"如果 groupID:\".concat(t,\" 是直播群，使用 \").concat(n,\" 前先使用 joinGroup 接口申请加入群组，详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup\");return Ki.warn(\"\".concat(this._className,\"._checkCachedGroupAttributes. \").concat(r)),new am({code:Tp.CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN,message:r})}return!0}},{key:\"_transformGroupAttributes\",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:\"_emitGroupAttributesUpdated\",value:function(e){var t=this._getLocalGroupAttributes({groupID:e});this._groupModule.emitOuterEvent(oo.GROUP_ATTRIBUTES_UPDATED,{groupID:e,groupAttributes:t})}},{key:\"reset\",value:function(){this._groupAttributesMap.clear(),this.CACHE_EXPIRE_TIME=3e4}}]),e}(),ev=function(){function e(t){o(this,e);var n=t.groupModule,r=t.groupID,a=t.onInit,s=t.onSuccess,i=t.onFail;this._groupModule=n,this._className=\"Polling\",this._onInit=a,this._onSuccess=s,this._onFail=i,this._groupID=r,this._timeoutID=-1,this._isRunning=!1,this._pollingInterval=0,this.MAX_POLLING_INTERVAL=2e3}return a(e,[{key:\"start\",value:function(){Ki.log(\"\".concat(this._className,\".start\")),this._isRunning=!0,this._request()}},{key:\"isRunning\",value:function(){return this._isRunning}},{key:\"_request\",value:function(){var e=this,t=this._onInit(this._groupID),n=Xl;this._groupModule.isLoggedIn()||(n=Ql),this._groupModule.request({protocolName:n,requestData:t}).then((function(t){e._onSuccess(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),0))})).catch((function(t){e._onFail(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e.MAX_POLLING_INTERVAL))}))}},{key:\"stop\",value:function(){Ki.log(\"\".concat(this._className,\".stop\")),this._timeoutID>0&&(clearTimeout(this._timeoutID),this._timeoutID=-1,this._pollingInterval=0),this._isRunning=!1}}]),e}(),tv={3:!0,4:!0,5:!0,6:!0},nv=function(){function e(t){o(this,e),this._groupModule=t,this._className=\"AVChatRoomHandler\",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this.sequencesLinkedList=new xm(100),this.messageIDLinkedList=new xm(100),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60}return a(e,[{key:\"hasJoinedAVChatRoom\",value:function(){return this._joinedGroupMap.size>0}},{key:\"checkJoinedAVChatRoomByID\",value:function(e){return this._joinedGroupMap.has(e)}},{key:\"getJoinedAVChatRoom\",value:function(){return this._joinedGroupMap.size>0?v(this._joinedGroupMap.keys()):null}},{key:\"_updateRequestData\",value:function(e){return t({},this._pollingRequestInfoMap.get(e))}},{key:\"_handleSuccess\",value:function(e,t){var n=t.data,o=n.key,r=n.nextSeq,a=n.rspMsgList;if(0!==n.errorCode){var s=this._pollingRequestInfoMap.get(e),i=new jd(th),u=s?\"\".concat(s.key,\"-\").concat(s.startSeq):\"requestInfo is undefined\";i.setMessage(\"\".concat(e,\"-\").concat(u,\"-\").concat(t.errorInfo)).setCode(t.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(!0)}else{if(!this.checkJoinedAVChatRoomByID(e))return;$i(o)&&ji(r)&&this._pollingRequestInfoMap.set(e,{key:o,startSeq:r}),Wi(a)&&a.length>0&&(a.forEach((function(e){e.to=e.groupID})),this.onMessage(a))}}},{key:\"_handleFailure\",value:function(e,t){}},{key:\"onMessage\",value:function(e){if(Wi(e)&&0!==e.length){var t=null,n=[],o=this._getModule(Jc),r=e.length;r>1&&e.sort((function(e,t){return e.sequence-t.sequence}));for(var a=this._getModule(Xc),s=0;s<r;s++)if(tv[e[s].event]){this.receivedMessageCount+=1,t=this.packMessage(e[s],e[s].event);var i=1===e[s].isModified;if((a.isUnlimitedAVChatRoom()||!this.sequencesLinkedList.has(t.sequence))&&!this.messageIDLinkedList.has(t.ID)){var u=t.conversationID;if(this.receivedMessageCount%40==0&&this._getModule(il).detectMessageLoss(u,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){var c=this.sequencesLinkedList.tail().value,l=t.sequence-c;l>1&&l<=20?this._getModule(il).onMessageMaybeLost(u,c+1,l-1):l<-1&&l>=-20&&this._getModule(il).onMessageMaybeLost(u,t.sequence+1,Math.abs(l)-1)}this.sequencesLinkedList.set(t.sequence),this.messageIDLinkedList.set(t.ID);var p=!1;if(this._isMessageSentByCurrentInstance(t)?i&&(p=!0,t.isModified=i,o.updateMessageIsModifiedProperty(t)):p=!0,p){if(t.conversationType,ro.CONV_SYSTEM,t.conversationType!==ro.CONV_SYSTEM){var d=this._getModule(ll),g=t.conversationID.replace(ro.CONV_GROUP,\"\");this._pollingInstanceMap.has(g)?d.addMessageSequence({key:Vd,message:t}):(t.type!==ro.MSG_GRP_TIP&&d.addMessageDelay({currentTime:Date.now(),time:t.time}),d.addMessageSequence({key:xd,message:t}))}n.push(t)}}}else Ki.warn(\"\".concat(this._className,\".onMessage 未处理的 event 类型: \").concat(e[s].event));if(0!==n.length){this._groupModule.filterModifiedMessage(n);var h=this.packConversationOption(n);if(h.length>0)this._getModule(Jc).onNewMessage({conversationOptionsList:h,isInstantMessage:!0});Ki.debug(\"\".concat(this._className,\".onMessage count:\").concat(n.length)),this._checkMessageStacked(n);var f=this._groupModule.filterUnmodifiedMessage(n);f.length>0&&this._groupModule.emitOuterEvent(oo.MESSAGE_RECEIVED,f),n.length=0}}}},{key:\"_checkMessageStacked\",value:function(e){var t=e.length;t>=100&&(Ki.warn(\"\".concat(this._className,\"._checkMessageStacked 直播群消息堆积数:\").concat(e.length,\\'！可能会导致微信小程序渲染时遇到 \"Dom limit exceeded\" 的错误，建议接入侧此时只渲染最近的10条消息\\')),this._reportMessageStackedCount<5&&(new jd(oh).setNetworkType(this._groupModule.getNetworkType()).setMessage(\"count:\".concat(t,\" groupID:\").concat(v(this._joinedGroupMap.keys()))).setLevel(\"warning\").end(),this._reportMessageStackedCount+=1))}},{key:\"_isMessageSentByCurrentInstance\",value:function(e){return!!this._getModule(Jc).isMessageSentByCurrentInstance(e)}},{key:\"packMessage\",value:function(e,t){e.currentUser=this._groupModule.getMyUserID(),e.conversationType=5===t?ro.CONV_SYSTEM:ro.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var n=new Q_(e),o=this.packElements(e,t);return n.setElement(o),n}},{key:\"packElements\",value:function(e,n){return 4===n||6===n?(this._updateMemberCountByGroupTips(e),this._onGroupAttributesUpdated(e),{type:ro.MSG_GRP_TIP,content:t(t({},e.elements),{},{groupProfile:e.groupProfile})}):5===n?{type:ro.MSG_GRP_SYS_NOTICE,content:t(t({},e.elements),{},{groupProfile:e.groupProfile})}:this._getModule(tl).parseElements(e.elements,e.from)}},{key:\"packConversationOption\",value:function(e){for(var t=new Map,n=0;n<e.length;n++){var o=e[n],r=o.conversationID;if(t.has(r)){var a=t.get(r);a.lastMessage=o,\"in\"===o.flow&&a.unreadCount++}else t.set(r,{conversationID:o.conversationID,unreadCount:\"out\"===o.flow?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})}return v(t.values())}},{key:\"_updateMemberCountByGroupTips\",value:function(e){var t=e.groupProfile.groupID,n=e.elements.onlineMemberInfo,o=void 0===n?void 0:n;if(!Lu(o)){var r=o.onlineMemberNum,a=void 0===r?0:r,s=o.expireTime,i=void 0===s?this.DEFAULT_EXPIRE_TIME:s,u=this._onlineMemberCountMap.get(t)||{},c=Date.now();Lu(u)?Object.assign(u,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:c,memberCount:a,expireTime:i}):(u.latestUpdateTime=c,u.memberCount=a),Ki.debug(\"\".concat(this._className,\"._updateMemberCountByGroupTips info:\"),u),this._onlineMemberCountMap.set(t,u)}}},{key:\"start\",value:function(e){if(this._pollingInstanceMap.has(e)){var t=this._pollingInstanceMap.get(e);t.isRunning()||t.start()}else{var n=new ev({groupModule:this._groupModule,groupID:e,onInit:this._updateRequestData.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)});n.start(),this._pollingInstanceMap.set(e,n),Ki.log(\"\".concat(this._className,\".start groupID:\").concat(e))}}},{key:\"handleJoinResult\",value:function(e){var t=this;return this._preCheck().then((function(){var n=e.longPollingKey,o=e.group,r=o.groupID;return t._joinedGroupMap.set(r,o),t._groupModule.updateGroupMap([o]),t._groupModule.deleteUnjoinedAVChatRoom(r),t._groupModule.emitGroupListUpdate(!0,!1),Ji(n)?um({status:L_,group:o}):Promise.resolve()}))}},{key:\"startRunLoop\",value:function(e){var t=this;return this.handleJoinResult(e).then((function(){var n=e.longPollingKey,o=e.group,r=o.groupID;return t._pollingRequestInfoMap.set(r,{key:n,startSeq:0}),t.start(r),t._groupModule.isLoggedIn()?um({status:L_,group:o}):um({status:L_})}))}},{key:\"_preCheck\",value:function(){if(this._getModule(Xc).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();var e=m(this._joinedGroupMap.entries().next().value,2),t=e[0],n=e[1];if(this._groupModule.isLoggedIn()){if(!(n.selfInfo.role===ro.GRP_MBR_ROLE_OWNER||n.ownerID===this._groupModule.getMyUserID()))return this._groupModule.quitGroup(t);this._groupModule.deleteLocalGroupAndConversation(t)}else this._groupModule.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:\"joinWithoutAuth\",value:function(e){var t=this,n=e.groupID,o=\"\".concat(this._className,\".joinWithoutAuth\"),r=new jd(Vg);return this._groupModule.request({protocolName:xl,requestData:e}).then((function(e){var a=e.data.longPollingKey;if(r.setNetworkType(t._groupModule.getNetworkType()).setMessage(\"groupID:\".concat(n,\" longPollingKey:\").concat(a)).end(!0),Ji(a))return cm(new am({code:Tp.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN,message:dd}));Ki.log(\"\".concat(o,\" ok. groupID:\").concat(n)),t._getModule(Jc).setCompleted(\"\".concat(ro.CONV_GROUP).concat(n));var s=new Km({groupID:n});return t.startRunLoop({group:s,longPollingKey:a}),Z_({status:L_})})).catch((function(e){return Ki.error(\"\".concat(o,\" failed. groupID:\").concat(n,\" error:\"),e),t._groupModule.probeNetwork().then((function(t){var o=m(t,2),a=o[0],s=o[1];r.setError(e,a,s).setMessage(\"groupID:\".concat(n)).end(!0)})),cm(e)})).finally((function(){t._groupModule.getModule(Zc).reportAtOnce()}))}},{key:\"getGroupOnlineMemberCount\",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},n=Date.now();return Lu(t)||n-t.lastSyncTime>1e3*t.expireTime&&n-t.latestUpdateTime>1e4&&n-t.lastReqTime>3e3?(t.lastReqTime=n,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then((function(e){return Z_({memberCount:e.memberCount})})).catch((function(e){return cm(e)}))):um({memberCount:t.memberCount})}},{key:\"_getGroupOnlineMemberCount\",value:function(e){var t=this,n=\"\".concat(this._className,\"._getGroupOnlineMemberCount\");return this._groupModule.request({protocolName:Zl,requestData:{groupID:e}}).then((function(o){var r=t._onlineMemberCountMap.get(e)||{},a=o.data,s=a.onlineMemberNum,i=void 0===s?0:s,u=a.expireTime,c=void 0===u?t.DEFAULT_EXPIRE_TIME:u;Ki.log(\"\".concat(n,\" ok. groupID:\").concat(e,\" memberCount:\").concat(i,\" expireTime:\").concat(c));var l=Date.now();return Lu(r)&&(r.lastReqTime=l),t._onlineMemberCountMap.set(e,Object.assign(r,{lastSyncTime:l,latestUpdateTime:l,memberCount:i,expireTime:c})),{memberCount:i}})).catch((function(o){return Ki.warn(\"\".concat(n,\" failed. error:\"),o),new jd(eh).setCode(o.code).setMessage(\"groupID:\".concat(e,\" error:\").concat(JSON.stringify(o))).setNetworkType(t._groupModule.getNetworkType()).end(),Promise.reject(o)}))}},{key:\"_onGroupAttributesUpdated\",value:function(e){var t=e.groupProfile.groupID,n=e.elements,o=n.operationType,r=n.newGroupProfile;if(6===o){var a=(void 0===r?void 0:r).groupAttributeOption;Ji(a)||this._groupModule.onGroupAttributesUpdated({groupID:t,groupAttributeOption:a})}}},{key:\"_getModule\",value:function(e){return this._groupModule.getModule(e)}},{key:\"reset\",value:function(e){if(e){Ki.log(\"\".concat(this._className,\".reset groupID:\").concat(e));var t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{Ki.log(\"\".concat(this._className,\".reset all\"));var n,o=D(this._pollingInstanceMap.values());try{for(o.s();!(n=o.n()).done;){n.value.stop()}}catch(r){o.e(r)}finally{o.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear()}this.sequencesLinkedList.reset(),this.messageIDLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0}}]),e}(),ov=1,rv=15,av=function(){function e(t){o(this,e),this._groupModule=t,this._className=\"GroupSystemNoticeHandler\",this.pendencyMap=new Map}return a(e,[{key:\"onNewGroupSystemNotice\",value:function(e){var t=e.dataList,n=e.isSyncingEnded,o=e.isInstantMessage;Ki.debug(\"\".concat(this._className,\".onReceiveSystemNotice count:\").concat(t.length));var r=this.newSystemNoticeStoredAndSummary({notifiesList:t,isInstantMessage:o}),a=r.eventDataList,s=r.result;a.length>0&&(this._groupModule.getModule(Jc).onNewMessage({conversationOptionsList:a,isInstantMessage:o}),this._onReceivedGroupSystemNotice({result:s,isInstantMessage:o}));o?s.length>0&&this._groupModule.emitOuterEvent(oo.MESSAGE_RECEIVED,s):!0===n&&this._clearGroupSystemNotice()}},{key:\"newSystemNoticeStoredAndSummary\",value:function(e){var n=e.notifiesList,o=e.isInstantMessage,r=null,a=n.length,s=0,i=[],u={conversationID:ro.CONV_SYSTEM,unreadCount:0,type:ro.CONV_SYSTEM,subType:null,lastMessage:null};for(s=0;s<a;s++){var c=n[s];if(c.elements.operationType!==rv)c.currentUser=this._groupModule.getMyUserID(),c.conversationType=ro.CONV_SYSTEM,c.conversationID=ro.CONV_SYSTEM,(r=new Q_(c)).setElement({type:ro.MSG_GRP_SYS_NOTICE,content:t(t({},c.elements),{},{groupProfile:c.groupProfile})}),r.isSystemMessage=!0,(1===r.sequence&&1===r.random||2===r.sequence&&2===r.random)&&(r.sequence=iu(),r.random=iu(),r.generateMessageID(c.currentUser),Ki.log(\"\".concat(this._className,\".newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:\").concat(r.ID))),this._groupModule.getModule(Jc).pushIntoNoticeResult(i,r)&&(o?u.unreadCount++:r.setIsRead(!0),u.subType=r.conversationSubType)}return u.lastMessage=i[i.length-1],{eventDataList:i.length>0?[u]:[],result:i}}},{key:\"_clearGroupSystemNotice\",value:function(){var e=this;this.getPendencyList().then((function(t){t.forEach((function(t){e.pendencyMap.set(\"\".concat(t.from,\"_\").concat(t.groupID,\"_\").concat(t.to),t)}));var n=e._groupModule.getModule(Jc).getLocalMessageList(ro.CONV_SYSTEM),o=[];n.forEach((function(t){var n=t.payload,r=n.operatorID,a=n.operationType,s=n.groupProfile;if(a===ov){var i=\"\".concat(r,\"_\").concat(s.groupID,\"_\").concat(s.to),u=e.pendencyMap.get(i);u&&ji(u.handled)&&0!==u.handled&&o.push(t)}})),e.deleteGroupSystemNotice({messageList:o})}))}},{key:\"deleteGroupSystemNotice\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteGroupSystemNotice\");return Wi(e.messageList)&&0!==e.messageList.length?(Ki.log(\"\".concat(n)+e.messageList.map((function(e){return e.ID}))),this._groupModule.request({protocolName:Jl,requestData:{messageListToDelete:e.messageList.map((function(e){return{from:ro.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}}))}}).then((function(){Ki.log(\"\".concat(n,\" ok\"));var o=t._groupModule.getModule(Jc);return e.messageList.forEach((function(e){o.deleteLocalMessage(e)})),Z_()})).catch((function(e){return Ki.error(\"\".concat(n,\" error:\"),e),cm(e)}))):um()}},{key:\"getPendencyList\",value:function(e){var t=this;return this._groupModule.request({protocolName:Wl,requestData:{startTime:e&&e.startTime?e.startTime:0,limit:e&&e.limit?e.limit:10,handleAccount:this._groupModule.getMyUserID()}}).then((function(e){var n=e.data.pendencyList;return 0!==e.data.nextStartTime?t.getPendencyList({startTime:e.data.nextStartTime}).then((function(e){return[].concat(v(n),v(e))})):n}))}},{key:\"_onReceivedGroupSystemNotice\",value:function(e){var t=this,n=e.result;e.isInstantMessage&&n.forEach((function(e){switch(e.payload.operationType){case 1:break;case 2:t._onApplyGroupRequestAgreed(e);break;case 3:break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 6:break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e)}}))}},{key:\"_onApplyGroupRequestAgreed\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:\"_onMemberKicked\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:\"_onGroupDismissed\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t);var n=this._groupModule._AVChatRoomHandler;n&&n.checkJoinedAVChatRoomByID(t)&&n.reset(t)}},{key:\"_onInviteGroup\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:\"_onQuitGroup\",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:\"_onSetManager\",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,r=this._groupModule.getModule(Wc).getLocalGroupMemberInfo(o,n);r&&r.updateRole(ro.GRP_MBR_ROLE_ADMIN)}},{key:\"_onDeleteManager\",value:function(e){var t=e.payload.groupProfile,n=t.to,o=t.groupID,r=this._groupModule.getModule(Wc).getLocalGroupMemberInfo(o,n);r&&r.updateRole(ro.GRP_MBR_ROLE_MEMBER)}},{key:\"reset\",value:function(){this.pendencyMap.clear()}}]),e}(),sv=function(e){i(r,e);var n=_(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._className=\"GroupModule\",t._commonGroupHandler=null,t._AVChatRoomHandler=null,t._groupSystemNoticeHandler=null,t._commonGroupHandler=new Xm(h(t)),t._groupAttributesHandler=new Zm(h(t)),t._AVChatRoomHandler=new nv(h(t)),t._groupTipsHandler=new Ym(h(t)),t._groupSystemNoticeHandler=new av(h(t)),t.groupMap=new Map,t._unjoinedAVChatRoomList=new Map,t}return a(r,[{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}},{key:\"guardForAVChatRoom\",value:function(e){var t=this;if(e.conversationType===ro.CONV_GROUP){var n=e.to;return this.hasLocalGroup(n)?um():this.getGroupProfile({groupID:n}).then((function(o){var r=o.data.group.type;if(Ki.log(\"\".concat(t._className,\".guardForAVChatRoom. groupID:\").concat(n,\" type:\").concat(r)),r===ro.GRP_AVCHATROOM){var a=\"userId:\".concat(e.from,\" 未加入群 groupID:\").concat(n,\"。发消息前先使用 joinGroup 接口申请加群，详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup\");return Ki.warn(\"\".concat(t._className,\".guardForAVChatRoom sendMessage not allowed. \").concat(a)),cm(new am({code:Tp.MESSAGE_SEND_FAIL,message:a,data:{message:e}}))}return um()}))}return um()}},{key:\"checkJoinedAVChatRoomByID\",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:\"onNewGroupMessage\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onNewGroupMessage(e)}},{key:\"updateNextMessageSeq\",value:function(e){var t=this;Wi(e)&&e.forEach((function(e){var n=e.conversationID.replace(ro.CONV_GROUP,\"\");t.groupMap.has(n)&&(t.groupMap.get(n).nextMessageSeq=e.lastMessage.sequence+1)}))}},{key:\"onNewGroupTips\",value:function(e){this._groupTipsHandler&&this._groupTipsHandler.onNewGroupTips(e)}},{key:\"onGroupMessageRevoked\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onGroupMessageRevoked(e)}},{key:\"onNewGroupSystemNotice\",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}},{key:\"onGroupMessageReadNotice\",value:function(e){var t=this;e.dataList.forEach((function(e){var n=e.elements.groupMessageReadNotice;if(!Ji(n)){var o=t.getModule(Jc);n.forEach((function(e){var n=e.groupID,r=e.lastMessageSeq;Ki.debug(\"\".concat(t._className,\".onGroupMessageReadNotice groupID:\").concat(n,\" lastMessageSeq:\").concat(r));var a=\"\".concat(ro.CONV_GROUP).concat(n);o.updateIsReadAfterReadReport({conversationID:a,lastMessageSeq:r}),o.updateUnreadCount(a)}))}}))}},{key:\"deleteGroupSystemNotice\",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}},{key:\"initGroupMap\",value:function(e){this.groupMap.set(e.groupID,new Km(e))}},{key:\"deleteGroup\",value:function(e){this.groupMap.delete(e)}},{key:\"updateGroupMap\",value:function(e){var t=this;e.forEach((function(e){t.groupMap.has(e.groupID)?t.groupMap.get(e.groupID).updateGroup(e):t.groupMap.set(e.groupID,new Km(e))})),this._setStorageGroupList()}},{key:\"getStorageGroupList\",value:function(){return this.getModule(Qc).getItem(\"groupMap\")}},{key:\"_setStorageGroupList\",value:function(){var e=this.getLocalGroupList().filter((function(e){var t=e.type;return!mu(t)})).slice(0,20).map((function(e){return{groupID:e.groupID,name:e.name,avatar:e.avatar,type:e.type}}));this.getModule(Qc).setItem(\"groupMap\",e)}},{key:\"getGroupMap\",value:function(){return this.groupMap}},{key:\"getLocalGroupList\",value:function(){return v(this.groupMap.values())}},{key:\"getLocalGroupProfile\",value:function(e){return this.groupMap.get(e)}},{key:\"sortLocalGroupList\",value:function(){var e=v(this.groupMap).filter((function(e){var t=m(e,2);t[0];return!Lu(t[1].lastMessage)}));e.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})),this.groupMap=new Map(v(e))}},{key:\"updateGroupLastMessage\",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.handleUpdateGroupLastMessage(e)}},{key:\"emitGroupListUpdate\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalGroupList();if(e&&this.emitOuterEvent(oo.GROUP_LIST_UPDATED,n),t){var o=JSON.parse(JSON.stringify(n)),r=this.getModule(Jc);r.updateConversationGroupProfile(o)}}},{key:\"getMyNameCardByGroupID\",value:function(e){var t=this.getLocalGroupProfile(e);return t?t.selfInfo.nameCard:\"\"}},{key:\"getGroupList\",value:function(e){return this._commonGroupHandler?this._commonGroupHandler.getGroupList(e):um()}},{key:\"getGroupProfile\",value:function(e){var t=this,n=new jd(Pg),o=\"\".concat(this._className,\".getGroupProfile\"),r=e.groupID,a=e.groupCustomFieldFilter;Ki.log(\"\".concat(o,\" groupID:\").concat(r));var s={groupIDList:[r],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\",\"ShutUpAllMember\"],groupCustomFieldFilter:a}};return this.getGroupProfileAdvance(s).then((function(e){var a,s=e.data,i=s.successGroupList,u=s.failureGroupList;return Ki.log(\"\".concat(o,\" ok\")),u.length>0?cm(u[0]):(mu(i[0].type)&&!t.hasLocalGroup(r)?a=new Km(i[0]):(t.updateGroupMap(i),a=t.getLocalGroupProfile(r)),n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(r,\" type:\").concat(a.type,\" muteAllMembers:\").concat(a.muteAllMembers,\" ownerID:\").concat(a.ownerID)).end(),a&&a.selfInfo&&!a.selfInfo.nameCard?t.updateSelfInfo(a).then((function(e){return Z_({group:e})})):Z_({group:a}))})).catch((function(r){return t.probeNetwork().then((function(t){var o=m(t,2),a=o[0],s=o[1];n.setError(r,a,s).setMessage(\"groupID:\".concat(e.groupID)).end()})),Ki.error(\"\".concat(o,\" failed. error:\"),r),cm(r)}))}},{key:\"getGroupProfileAdvance\",value:function(e){var t=\"\".concat(this._className,\".getGroupProfileAdvance\");return Wi(e.groupIDList)&&e.groupIDList.length>50&&(Ki.warn(\"\".concat(t,\" 获取群资料的数量不能超过50个\")),e.groupIDList.length=50),Ki.log(\"\".concat(t,\" groupIDList:\").concat(e.groupIDList)),this.request({protocolName:Pl,requestData:e}).then((function(e){Ki.log(\"\".concat(t,\" ok\"));var n=e.data.groups,o=n.filter((function(e){return Ji(e.errorCode)||0===e.errorCode})),r=n.filter((function(e){return e.errorCode&&0!==e.errorCode})).map((function(e){return new am({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})}));return Z_({successGroupList:o,failureGroupList:r})})).catch((function(e){return Ki.error(\"\".concat(t,\" failed. error:\"),e),cm(e)}))}},{key:\"updateSelfInfo\",value:function(e){var t=\"\".concat(this._className,\".updateSelfInfo\"),n=e.groupID;return Ki.log(\"\".concat(t,\" groupID:\").concat(n)),this.getModule(Wc).getGroupMemberProfile({groupID:n,userIDList:[this.getMyUserID()]}).then((function(n){var o=n.data.memberList;return Ki.log(\"\".concat(t,\" ok\")),e&&0!==o.length&&e.updateSelfInfo(o[0]),e}))}},{key:\"createGroup\",value:function(e){var n=this,o=\"\".concat(this._className,\".createGroup\");if(![\"Public\",\"Private\",\"ChatRoom\",\"AVChatRoom\"].includes(e.type)){var r=new am({code:Tp.ILLEGAL_GROUP_TYPE,message:rd});return cm(r)}mu(e.type)&&!Ji(e.memberList)&&e.memberList.length>0&&(Ki.warn(\"\".concat(o,\" 创建 AVChatRoom 时不能添加群成员，自动忽略该字段\")),e.memberList=void 0),_u(e.type)||Ji(e.joinOption)||(Ki.warn(\"\".concat(o,\" 创建 Work/Meeting/AVChatRoom 群时不能设置字段 joinOption，自动忽略该字段\")),e.joinOption=void 0);var a=new jd(Dg);Ki.log(\"\".concat(o,\" options:\"),e);var s=[];return this.request({protocolName:Gl,requestData:t(t({},e),{},{ownerID:this.getMyUserID(),webPushFlag:1})}).then((function(r){var i=r.data,u=i.groupID,c=i.overLimitUserIDList,l=void 0===c?[]:c;if(s=l,a.setNetworkType(n.getNetworkType()).setMessage(\"groupType:\".concat(e.type,\" groupID:\").concat(u,\" overLimitUserIDList=\").concat(l)).end(),Ki.log(\"\".concat(o,\" ok groupID:\").concat(u,\" overLimitUserIDList:\"),l),e.type===ro.GRP_AVCHATROOM)return n.getGroupProfile({groupID:u});Lu(e.memberList)||Lu(l)||(e.memberList=e.memberList.filter((function(e){return-1===l.indexOf(e.userID)}))),n.updateGroupMap([t(t({},e),{},{groupID:u})]);var p=n.getModule(Hc),d=p.createCustomMessage({to:u,conversationType:ro.CONV_GROUP,payload:{data:\"group_create\",extension:\"\".concat(n.getMyUserID(),\"创建群组\")}});return p.sendMessageInstance(d),n.emitGroupListUpdate(),n.getGroupProfile({groupID:u})})).then((function(e){var t=e.data.group,n=t.selfInfo,o=n.nameCard,r=n.joinTime;return t.updateSelfInfo({nameCard:o,joinTime:r,messageRemindType:ro.MSG_REMIND_ACPT_AND_NOTE,role:ro.GRP_MBR_ROLE_OWNER}),Z_({group:t,overLimitUserIDList:s})})).catch((function(t){return a.setMessage(\"groupType:\".concat(e.type)),n.probeNetwork().then((function(e){var n=m(e,2),o=n[0],r=n[1];a.setError(t,o,r).end()})),Ki.error(\"\".concat(o,\" failed. error:\"),t),cm(t)}))}},{key:\"dismissGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".dismissGroup\");if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===ro.GRP_WORK)return cm(new am({code:Tp.CANNOT_DISMISS_WORK,message:ud}));var o=new jd(Rg);return o.setMessage(\"groupID:\".concat(e)),Ki.log(\"\".concat(n,\" groupID:\").concat(e)),this.request({protocolName:Ul,requestData:{groupID:e}}).then((function(){return o.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t._AVChatRoomHandler.reset(e),Z_({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"updateGroupProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".updateGroupProfile\");!this.hasLocalGroup(e.groupID)||_u(this.getLocalGroupProfile(e.groupID).type)||Ji(e.joinOption)||(Ki.warn(\"\".concat(n,\" Work/Meeting/AVChatRoom 群不能设置字段 joinOption，自动忽略该字段\")),e.joinOption=void 0),Ji(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers=\"On\":e.muteAllMembers=\"Off\");var o=new jd(bg);return o.setMessage(JSON.stringify(e)),Ki.log(\"\".concat(n,\" groupID:\").concat(e.groupID)),this.request({protocolName:Fl,requestData:e}).then((function(){(o.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),t.hasLocalGroup(e.groupID))&&(t.groupMap.get(e.groupID).updateGroup(e),t._setStorageGroupList());return Z_({group:t.groupMap.get(e.groupID)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.log(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"joinGroup\",value:function(e){var t=this,n=e.groupID,o=e.type,r=\"\".concat(this._className,\".joinGroup\");if(o===ro.GRP_WORK){var a=new am({code:Tp.CANNOT_JOIN_WORK,message:ad});return cm(a)}if(this.deleteUnjoinedAVChatRoom(n),this.hasLocalGroup(n)){if(!this.isLoggedIn())return um({status:ro.JOIN_STATUS_ALREADY_IN_GROUP});var s=new jd(Eg);return this.getGroupProfile({groupID:n}).then((function(){return s.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" joinedStatus:\").concat(ro.JOIN_STATUS_ALREADY_IN_GROUP)).end(),um({status:ro.JOIN_STATUS_ALREADY_IN_GROUP})})).catch((function(o){return s.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" unjoined\")).end(),Ki.warn(\"\".concat(r,\" \").concat(n,\" was unjoined, now join!\")),t.groupMap.delete(n),t.applyJoinGroup(e)}))}return Ki.log(\"\".concat(r,\" groupID:\").concat(n)),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}},{key:\"applyJoinGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".applyJoinGroup\"),o=e.groupID,r=new jd(Eg);return this.request({protocolName:ql,requestData:e}).then((function(e){var a=e.data,s=a.joinedStatus,i=a.longPollingKey,u=a.avChatRoomFlag,c=a.avChatRoomKey,l=\"groupID:\".concat(o,\" joinedStatus:\").concat(s,\" longPollingKey:\").concat(i,\" avChatRoomFlag:\").concat(u);switch(r.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(l)).end(),Ki.log(\"\".concat(n,\" ok. \").concat(l)),s){case R_:return Z_({status:R_});case L_:return t.getGroupProfile({groupID:o}).then((function(e){var n=e.data.group,r={status:L_,group:n};return 1===u?(t.getModule(Jc).setCompleted(\"\".concat(ro.CONV_GROUP).concat(o)),t._groupAttributesHandler.initGroupAttributesCache({groupID:o,avChatRoomKey:c}),Ji(i)?t._AVChatRoomHandler.handleJoinResult({group:n}):t._AVChatRoomHandler.startRunLoop({longPollingKey:i,group:n})):(t.emitGroupListUpdate(!0,!1),Z_(r))}));default:var p=new am({code:Tp.JOIN_GROUP_FAIL,message:ld});return Ki.error(\"\".concat(n,\" error:\"),p),cm(p)}})).catch((function(o){return r.setMessage(\"groupID:\".concat(e.groupID)),t.probeNetwork().then((function(e){var t=m(e,2),n=t[0],a=t[1];r.setError(o,n,a).end()})),Ki.error(\"\".concat(n,\" error:\"),o),cm(o)}))}},{key:\"quitGroup\",value:function(e){var t=this,n=\"\".concat(this._className,\".quitGroup\");Ki.log(\"\".concat(n,\" groupID:\").concat(e));var o=this.checkJoinedAVChatRoomByID(e);if(!o&&!this.hasLocalGroup(e)){var r=new am({code:Tp.MEMBER_NOT_IN_GROUP,message:cd});return cm(r)}if(o&&!this.isLoggedIn())return Ki.log(\"\".concat(n,\" anonymously ok. groupID:\").concat(e)),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),um({groupID:e});var a=new jd(Cg);return a.setMessage(\"groupID:\".concat(e)),this.request({protocolName:Vl,requestData:{groupID:e}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),o&&t._AVChatRoomHandler.reset(e),t.deleteLocalGroupAndConversation(e),Z_({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"searchGroupByID\",value:function(e){var t=this,n=\"\".concat(this._className,\".searchGroupByID\"),o={groupIDList:[e]},r=new jd(Ag);return r.setMessage(\"groupID:\".concat(e)),Ki.log(\"\".concat(n,\" groupID:\").concat(e)),this.request({protocolName:Kl,requestData:o}).then((function(e){var o=e.data.groupProfile;if(0!==o[0].errorCode)throw new am({code:o[0].errorCode,message:o[0].errorInfo});return r.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),Z_({group:new Km(o[0])})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"changeGroupOwner\",value:function(e){var t=this,n=\"\".concat(this._className,\".changeGroupOwner\");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===ro.GRP_AVCHATROOM)return cm(new am({code:Tp.CANNOT_CHANGE_OWNER_IN_AVCHATROOM,message:sd}));if(e.newOwnerID===this.getMyUserID())return cm(new am({code:Tp.CANNOT_CHANGE_OWNER_TO_SELF,message:id}));var o=new jd(kg);return o.setMessage(\"groupID:\".concat(e.groupID,\" newOwnerID:\").concat(e.newOwnerID)),Ki.log(\"\".concat(n,\" groupID:\").concat(e.groupID)),this.request({protocolName:Bl,requestData:e}).then((function(){o.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\"));var r=e.groupID,a=e.newOwnerID;t.groupMap.get(r).ownerID=a;var s=t.getModule(Wc).getLocalGroupMemberList(r);if(s instanceof Map){var i=s.get(t.getMyUserID());Ji(i)||(i.updateRole(\"Member\"),t.groupMap.get(r).selfInfo.role=\"Member\");var u=s.get(a);Ji(u)||u.updateRole(\"Owner\")}return t.emitGroupListUpdate(!0,!1),Z_({group:t.groupMap.get(r)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"handleGroupApplication\",value:function(e){var n=this,o=\"\".concat(this._className,\".handleGroupApplication\"),r=e.message.payload,a=r.groupProfile.groupID,s=r.authentication,i=r.messageKey,u=r.operatorID,c=new jd(Ng);return c.setMessage(\"groupID:\".concat(a)),Ki.log(\"\".concat(o,\" groupID:\").concat(a)),this.request({protocolName:Hl,requestData:t(t({},e),{},{applicant:u,groupID:a,authentication:s,messageKey:i})}).then((function(){return c.setNetworkType(n.getNetworkType()).end(),Ki.log(\"\".concat(o,\" ok\")),n._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Z_({group:n.getLocalGroupProfile(a)})})).catch((function(e){return n.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];c.setError(e,o,r).end()})),Ki.error(\"\".concat(o,\" failed. error\"),e),cm(e)}))}},{key:\"handleGroupInvitation\",value:function(e){var n=this,o=\"\".concat(this._className,\".handleGroupInvitation\"),r=e.message.payload,a=r.groupProfile.groupID,s=r.authentication,i=r.messageKey,u=r.operatorID,c=e.handleAction,l=new jd(Og);return l.setMessage(\"groupID:\".concat(a,\" inviter:\").concat(u,\" handleAction:\").concat(c)),Ki.log(\"\".concat(o,\" groupID:\").concat(a,\" inviter:\").concat(u,\" handleAction:\").concat(c)),this.request({protocolName:jl,requestData:t(t({},e),{},{inviter:u,groupID:a,authentication:s,messageKey:i})}).then((function(){return l.setNetworkType(n.getNetworkType()).end(),Ki.log(\"\".concat(o,\" ok\")),n._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Z_({group:n.getLocalGroupProfile(a)})})).catch((function(e){return n.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),Ki.error(\"\".concat(o,\" failed. error\"),e),cm(e)}))}},{key:\"getGroupOnlineMemberCount\",value:function(e){return this._AVChatRoomHandler?this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this._AVChatRoomHandler.getGroupOnlineMemberCount(e):um({memberCount:0}):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"hasLocalGroup\",value:function(e){return this.groupMap.has(e)}},{key:\"deleteLocalGroupAndConversation\",value:function(e){this._deleteLocalGroup(e),this.getModule(Jc).deleteLocalConversation(\"GROUP\".concat(e)),this.emitGroupListUpdate(!0,!1)}},{key:\"_deleteLocalGroup\",value:function(e){this.groupMap.delete(e),this.getModule(Wc).deleteGroupMemberList(e),this._setStorageGroupList()}},{key:\"sendMessage\",value:function(e,t){var n=this.createGroupMessagePack(e,t);return this.request(n)}},{key:\"createGroupMessagePack\",value:function(e,t){var n=null;t&&t.offlinePushInfo&&(n=t.offlinePushInfo);var o=\"\";$i(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);var r=e.getGroupAtInfoList();return{protocolName:vl,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),groupID:e.to,msgBody:e.getElements(),cloudCustomData:o,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==ro.MSG_TEXT||Lu(r)?void 0:r,onlineOnlyFlag:this.isOnlineMessage(e,t)?1:0,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||\"\",desc:n.description||\"\",ext:n.extension||\"\",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||\"\"}}:void 0}}}},{key:\"revokeMessage\",value:function(e){return this.request({protocolName:$l,requestData:{to:e.to,msgSeqList:[{msgSeq:e.sequence}]}})}},{key:\"deleteMessage\",value:function(e){var t=e.to,n=e.keyList;return Ki.log(\"\".concat(this._className,\".deleteMessage groupID:\").concat(t,\" count:\").concat(n.length)),this.request({protocolName:ep,requestData:{groupID:t,deleter:this.getMyUserID(),keyList:n}})}},{key:\"getRoamingMessage\",value:function(e){var t=this,n=\"\".concat(this._className,\".getRoamingMessage\"),o=new jd(ig),r=0;return this._computeLastSequence(e).then((function(n){return r=n,Ki.log(\"\".concat(t._className,\".getRoamingMessage groupID:\").concat(e.groupID,\" lastSequence:\").concat(r)),t.request({protocolName:zl,requestData:{groupID:e.groupID,count:21,sequence:r}})})).then((function(a){var s=a.data,i=s.messageList,u=s.complete;Ji(i)?Ki.log(\"\".concat(n,\" ok. complete:\").concat(u,\" but messageList is undefined!\")):Ki.log(\"\".concat(n,\" ok. complete:\").concat(u,\" count:\").concat(i.length)),o.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e.groupID,\" lastSequence:\").concat(r,\" complete:\").concat(u,\" count:\").concat(i?i.length:\"undefined\")).end();var c=\"GROUP\".concat(e.groupID),l=t.getModule(Jc);if(2===u||Lu(i))return l.setCompleted(c),[];var p=l.storeRoamingMessage(i,c);return l.updateIsRead(c),l.patchConversationLastMessage(c),p})).catch((function(a){return t.probeNetwork().then((function(t){var n=m(t,2),s=n[0],i=n[1];o.setError(a,s,i).setMessage(\"groupID:\".concat(e.groupID,\" lastSequence:\").concat(r)).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),a),cm(a)}))}},{key:\"setMessageRead\",value:function(e){var t=this,n=e.conversationID,o=e.lastMessageSeq,r=\"\".concat(this._className,\".setMessageRead\");Ki.log(\"\".concat(r,\" conversationID:\").concat(n,\" lastMessageSeq:\").concat(o)),ji(o)||Ki.warn(\"\".concat(r,\" 请勿修改 Conversation.lastMessage.lastSequence，否则可能会导致已读上报结果不准确\"));var a=new jd(pg);return a.setMessage(\"\".concat(n,\"-\").concat(o)),this.request({protocolName:Yl,requestData:{groupID:n.replace(\"GROUP\",\"\"),messageReadSeq:o}}).then((function(){a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(r,\" ok.\"));var e=t.getModule(Jc);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:o}),e.updateUnreadCount(n),Z_()})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.log(\"\".concat(r,\" failed. error:\"),e),cm(e)}))}},{key:\"_computeLastSequence\",value:function(e){return e.sequence>0?Promise.resolve(e.sequence):this.getGroupLastSequence(e.groupID)}},{key:\"getGroupLastSequence\",value:function(e){var t=this,n=\"\".concat(this._className,\".getGroupLastSequence\"),o=new jd(Ug),r=0,a=\"\";if(this.hasLocalGroup(e)){var s=this.getLocalGroupProfile(e),i=s.lastMessage;if(i.lastSequence>0&&!1===i.onlineOnlyFlag)return r=i.lastSequence,a=\"got lastSequence:\".concat(r,\" from local group profile[lastMessage.lastSequence]. groupID:\").concat(e),Ki.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r);if(s.nextMessageSeq>1)return r=s.nextMessageSeq-1,a=\"got lastSequence:\".concat(r,\" from local group profile[nextMessageSeq]. groupID:\").concat(e),Ki.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r)}var u=\"GROUP\".concat(e),c=this.getModule(Jc).getLocalConversation(u);if(c&&c.lastMessage.lastSequence&&!1===c.lastMessage.onlineOnlyFlag)return r=c.lastMessage.lastSequence,a=\"got lastSequence:\".concat(r,\" from local conversation profile[lastMessage.lastSequence]. groupID:\").concat(e),Ki.log(\"\".concat(n,\" \").concat(a)),o.setNetworkType(this.getNetworkType()).setMessage(\"\".concat(a)).end(),Promise.resolve(r);var l={groupIDList:[e],responseFilter:{groupBaseInfoFilter:[\"NextMsgSeq\"]}};return this.getGroupProfileAdvance(l).then((function(s){var i=s.data.successGroupList;return Lu(i)?Ki.log(\"\".concat(n,\" successGroupList is empty. groupID:\").concat(e)):(r=i[0].nextMessageSeq-1,a=\"got lastSequence:\".concat(r,\" from getGroupProfileAdvance. groupID:\").concat(e),Ki.log(\"\".concat(n,\" \").concat(a))),o.setNetworkType(t.getNetworkType()).setMessage(\"\".concat(a)).end(),r})).catch((function(r){return t.probeNetwork().then((function(t){var n=m(t,2),a=n[0],s=n[1];o.setError(r,a,s).setMessage(\"get lastSequence failed from getGroupProfileAdvance. groupID:\".concat(e)).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),r),cm(r)}))}},{key:\"isMessageFromAVChatroom\",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:\"hasJoinedAVChatRoom\",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.hasJoinedAVChatRoom():0}},{key:\"getJoinedAVChatRoom\",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.getJoinedAVChatRoom():[]}},{key:\"isOnlineMessage\",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:\"_canIUseOnlineOnlyFlag\",value:function(e){var t=this.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==ro.CONV_GROUP}},{key:\"deleteLocalGroupMembers\",value:function(e,t){this.getModule(Wc).deleteLocalGroupMembers(e,t)}},{key:\"onAVChatRoomMessage\",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onMessage(e)}},{key:\"getGroupSimplifiedInfo\",value:function(e){var t=this,n=new jd(xg),o={groupIDList:[e],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\"]}};return this.getGroupProfileAdvance(o).then((function(o){var r=o.data.successGroupList;return n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e,\" type:\").concat(r[0].type)).end(),r[0]})).catch((function(o){t.probeNetwork().then((function(t){var r=m(t,2),a=r[0],s=r[1];n.setError(o,a,s).setMessage(\"groupID:\".concat(e)).end()}))}))}},{key:\"setUnjoinedAVChatRoom\",value:function(e){this._unjoinedAVChatRoomList.set(e,1)}},{key:\"deleteUnjoinedAVChatRoom\",value:function(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}},{key:\"isUnjoinedAVChatRoom\",value:function(e){return this._unjoinedAVChatRoomList.has(e)}},{key:\"onGroupAttributesUpdated\",value:function(e){this._groupAttributesHandler&&this._groupAttributesHandler.onGroupAttributesUpdated(e)}},{key:\"updateLocalMainSequenceOnReconnected\",value:function(){this._groupAttributesHandler&&this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}},{key:\"initGroupAttributes\",value:function(e){return this._groupAttributesHandler.initGroupAttributes(e)}},{key:\"setGroupAttributes\",value:function(e){return this._groupAttributesHandler.setGroupAttributes(e)}},{key:\"deleteGroupAttributes\",value:function(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}},{key:\"getGroupAttributes\",value:function(e){return this._groupAttributesHandler.getGroupAttributes(e)}},{key:\"reset\",value:function(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._AVChatRoomHandler&&this._AVChatRoomHandler.reset()}}]),r}(pl),iv=function(){function e(t){o(this,e),this.userID=\"\",this.avatar=\"\",this.nick=\"\",this.role=\"\",this.joinTime=\"\",this.lastSendMsgTime=\"\",this.nameCard=\"\",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return a(e,[{key:\"_initMember\",value:function(e){this.updateMember(e)}},{key:\"updateMember\",value:function(e){var t=[null,void 0,\"\",0,NaN];e.memberCustomField&&fu(this.memberCustomField,e.memberCustomField),ru(this,e,[\"memberCustomField\"],t)}},{key:\"updateRole\",value:function(e){[\"Owner\",\"Admin\",\"Member\"].indexOf(e)<0||(this.role=e)}},{key:\"updateMuteUntil\",value:function(e){Ji(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:\"updateNameCard\",value:function(e){Ji(e)||(this.nameCard=e)}},{key:\"updateMemberCustomField\",value:function(e){e&&fu(this.memberCustomField,e)}}]),e}(),uv=function(e){i(r,e);var n=_(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._className=\"GroupMemberModule\",t.groupMemberListMap=new Map,t.getInnerEmitterInstance().on(Om.PROFILE_UPDATED,t._onProfileUpdated,h(t)),t}return a(r,[{key:\"_onProfileUpdated\",value:function(e){for(var t=this,n=e.data,o=function(e){var o=n[e];t.groupMemberListMap.forEach((function(e){e.has(o.userID)&&e.get(o.userID).updateMember({nick:o.nick,avatar:o.avatar})}))},r=0;r<n.length;r++)o(r)}},{key:\"deleteGroupMemberList\",value:function(e){this.groupMemberListMap.delete(e)}},{key:\"getGroupMemberList\",value:function(e){var t=this,n=e.groupID,o=e.offset,r=void 0===o?0:o,a=e.count,s=void 0===a?15:a,i=\"\".concat(this._className,\".getGroupMemberList\"),u=new jd($g);Ki.log(\"\".concat(i,\" groupID:\").concat(n,\" offset:\").concat(r,\" count:\").concat(s));var c=[];return this.request({protocolName:sp,requestData:{groupID:n,offset:r,limit:s>100?100:s}}).then((function(e){var o=e.data,r=o.members,a=o.memberNum;if(!Wi(r)||0===r.length)return Promise.resolve([]);var s=t.getModule(Yc);return s.hasLocalGroup(n)&&(s.getLocalGroupProfile(n).memberNum=a),c=t._updateLocalGroupMemberMap(n,r),t.getModule(jc).getUserProfile({userIDList:r.map((function(e){return e.userID})),tagList:[A_.NICK,A_.AVATAR]})})).then((function(e){var o=e.data;if(!Wi(o)||0===o.length)return um({memberList:[]});var a=o.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));return t._updateLocalGroupMemberMap(n,a),u.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(n,\" offset:\").concat(r,\" count:\").concat(s)).end(),Ki.log(\"\".concat(i,\" ok.\")),Z_({memberList:c})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Ki.error(\"\".concat(i,\" failed. error:\"),e),cm(e)}))}},{key:\"getGroupMemberProfile\",value:function(e){var n=this,o=\"\".concat(this._className,\".getGroupMemberProfile\"),r=new jd(Yg);r.setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)),Ki.log(\"\".concat(o,\" groupID:\").concat(e.groupID,\" userIDList:\").concat(e.userIDList.join(\",\"))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var a=e.groupID,s=e.userIDList;return this._getGroupMemberProfileAdvance(t(t({},e),{},{userIDList:s})).then((function(e){var t=e.data.members;return Wi(t)&&0!==t.length?(n._updateLocalGroupMemberMap(a,t),n.getModule(jc).getUserProfile({userIDList:t.map((function(e){return e.userID})),tagList:[A_.NICK,A_.AVATAR]})):um([])})).then((function(e){var t=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));n._updateLocalGroupMemberMap(a,t);var o=s.filter((function(e){return n.hasLocalGroupMember(a,e)})).map((function(e){return n.getLocalGroupMemberInfo(a,e)}));return r.setNetworkType(n.getNetworkType()).end(),Z_({memberList:o})}))}},{key:\"addGroupMember\",value:function(e){var t=this,n=\"\".concat(this._className,\".addGroupMember\"),o=e.groupID,r=this.getModule(Yc).getLocalGroupProfile(o),a=r.type,s=new jd(zg);if(s.setMessage(\"groupID:\".concat(o,\" groupType:\").concat(a)),mu(a)){var i=new am({code:Tp.CANNOT_ADD_MEMBER_IN_AVCHATROOM,message:pd});return s.setCode(Tp.CANNOT_ADD_MEMBER_IN_AVCHATROOM).setError(pd).setNetworkType(this.getNetworkType()).end(),cm(i)}return e.userIDList=e.userIDList.map((function(e){return{userID:e}})),Ki.log(\"\".concat(n,\" groupID:\").concat(o)),this.request({protocolName:up,requestData:e}).then((function(o){var a=o.data.members;Ki.log(\"\".concat(n,\" ok\"));var i=a.filter((function(e){return 1===e.result})).map((function(e){return e.userID})),u=a.filter((function(e){return 0===e.result})).map((function(e){return e.userID})),c=a.filter((function(e){return 2===e.result})).map((function(e){return e.userID})),l=a.filter((function(e){return 4===e.result})).map((function(e){return e.userID})),p=\"groupID:\".concat(e.groupID,\", \")+\"successUserIDList:\".concat(i,\", \")+\"failureUserIDList:\".concat(u,\", \")+\"existedUserIDList:\".concat(c,\", \")+\"overLimitUserIDList:\".concat(l);return s.setNetworkType(t.getNetworkType()).setMoreMessage(p).end(),0===i.length?Z_({successUserIDList:i,failureUserIDList:u,existedUserIDList:c,overLimitUserIDList:l}):(r.memberNum+=i.length,Z_({successUserIDList:i,failureUserIDList:u,existedUserIDList:c,overLimitUserIDList:l,group:r}))})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"deleteGroupMember\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteGroupMember\"),o=e.groupID,r=e.userIDList,a=new jd(Wg),s=\"groupID:\".concat(o,\" \").concat(r.length>5?\"userIDList.length:\".concat(r.length):\"userIDList:\".concat(r));a.setMessage(s),Ki.log(\"\".concat(n,\" groupID:\").concat(o,\" userIDList:\"),r);var i=this.getModule(Yc).getLocalGroupProfile(o);return mu(i.type)?cm(new am({code:Tp.CANNOT_KICK_MEMBER_IN_AVCHATROOM,message:gd})):this.request({protocolName:cp,requestData:e}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),i.memberNum--,t.deleteLocalGroupMembers(o,r),Z_({group:i,userIDList:r})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"setGroupMemberMuteTime\",value:function(e){var t=this,n=e.groupID,o=e.userID,r=e.muteTime,a=\"\".concat(this._className,\".setGroupMemberMuteTime\");if(o===this.getMyUserID())return cm(new am({code:Tp.CANNOT_MUTE_SELF,message:vd}));Ki.log(\"\".concat(a,\" groupID:\").concat(n,\" userID:\").concat(o));var s=new jd(Jg);return s.setMessage(\"groupID:\".concat(n,\" userID:\").concat(o,\" muteTime:\").concat(r)),this._modifyGroupMemberInfo({groupID:n,userID:o,muteTime:r}).then((function(e){s.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(a,\" ok\"));var o=t.getModule(Yc);return Z_({group:o.getLocalGroupProfile(n),member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];s.setError(e,o,r).end()})),Ki.error(\"\".concat(a,\" failed. error:\"),e),cm(e)}))}},{key:\"setGroupMemberRole\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberRole\"),o=e.groupID,r=e.userID,a=e.role,s=this.getModule(Yc).getLocalGroupProfile(o);if(s.selfInfo.role!==ro.GRP_MBR_ROLE_OWNER)return cm(new am({code:Tp.NOT_OWNER,message:hd}));if([ro.GRP_WORK,ro.GRP_AVCHATROOM].includes(s.type))return cm(new am({code:Tp.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM,message:fd}));if([ro.GRP_MBR_ROLE_ADMIN,ro.GRP_MBR_ROLE_MEMBER].indexOf(a)<0)return cm(new am({code:Tp.INVALID_MEMBER_ROLE,message:_d}));if(r===this.getMyUserID())return cm(new am({code:Tp.CANNOT_SET_SELF_MEMBER_ROLE,message:md}));var i=new jd(Qg);return i.setMessage(\"groupID:\".concat(o,\" userID:\").concat(r,\" role:\").concat(a)),Ki.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(r)),this._modifyGroupMemberInfo({groupID:o,userID:r,role:a}).then((function(e){return i.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\")),Z_({group:s,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"setGroupMemberNameCard\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberNameCard\"),o=e.groupID,r=e.userID,a=void 0===r?this.getMyUserID():r,s=e.nameCard;Ki.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(a));var i=new jd(Xg);return i.setMessage(\"groupID:\".concat(o,\" userID:\").concat(a,\" nameCard:\").concat(s)),this._modifyGroupMemberInfo({groupID:o,userID:a,nameCard:s}).then((function(e){Ki.log(\"\".concat(n,\" ok\")),i.setNetworkType(t.getNetworkType()).end();var r=t.getModule(Yc).getLocalGroupProfile(o);return a===t.getMyUserID()&&r&&r.setSelfNameCard(s),Z_({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"setGroupMemberCustomField\",value:function(e){var t=this,n=\"\".concat(this._className,\".setGroupMemberCustomField\"),o=e.groupID,r=e.userID,a=void 0===r?this.getMyUserID():r,s=e.memberCustomField;Ki.log(\"\".concat(n,\" groupID:\").concat(o,\" userID:\").concat(a));var i=new jd(Zg);return i.setMessage(\"groupID:\".concat(o,\" userID:\").concat(a,\" memberCustomField:\").concat(JSON.stringify(s))),this._modifyGroupMemberInfo({groupID:o,userID:a,memberCustomField:s}).then((function(e){i.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok\"));var r=t.getModule(Yc).getLocalGroupProfile(o);return Z_({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];i.setError(e,o,r).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"setMessageRemindType\",value:function(e){var t=this,n=\"\".concat(this._className,\".setMessageRemindType\"),o=new jd(Lg);o.setMessage(\"groupID:\".concat(e.groupID)),Ki.log(\"\".concat(n,\" groupID:\").concat(e.groupID));var r=e.groupID,a=e.messageRemindType;return this._modifyGroupMemberInfo({groupID:r,messageRemindType:a,userID:this.getMyUserID()}).then((function(){o.setNetworkType(t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" ok. groupID:\").concat(e.groupID));var r=t.getModule(Yc).getLocalGroupProfile(e.groupID);return r&&(r.selfInfo.messageRemindType=a),Z_({group:r})})).catch((function(e){return t.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"_modifyGroupMemberInfo\",value:function(e){var t=this,n=e.groupID,o=e.userID;return this.request({protocolName:lp,requestData:e}).then((function(){if(t.hasLocalGroupMember(n,o)){var r=t.getLocalGroupMemberInfo(n,o);return Ji(e.muteTime)||r.updateMuteUntil(e.muteTime),Ji(e.role)||r.updateRole(e.role),Ji(e.nameCard)||r.updateNameCard(e.nameCard),Ji(e.memberCustomField)||r.updateMemberCustomField(e.memberCustomField),r}return t.getGroupMemberProfile({groupID:n,userIDList:[o]}).then((function(e){return m(e.data.memberList,1)[0]}))}))}},{key:\"_getGroupMemberProfileAdvance\",value:function(e){return this.request({protocolName:ip,requestData:t(t({},e),{},{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:[\"Role\",\"JoinTime\",\"NameCard\",\"ShutUpUntil\"]})})}},{key:\"_updateLocalGroupMemberMap\",value:function(e,t){var n=this;return Wi(t)&&0!==t.length?t.map((function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new iv(t)),n.getLocalGroupMemberInfo(e,t.userID)})):[]}},{key:\"deleteLocalGroupMembers\",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach((function(e){n.delete(e)}))}},{key:\"getLocalGroupMemberInfo\",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:\"setLocalGroupMember\",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var n=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,n)}}},{key:\"getLocalGroupMemberList\",value:function(e){return this.groupMemberListMap.get(e)}},{key:\"hasLocalGroupMember\",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:\"hasLocalGroupMemberMap\",value:function(e){return this.groupMemberListMap.has(e)}},{key:\"reset\",value:function(){this.groupMemberListMap.clear()}}]),r}(pl),cv=function(){function e(t){o(this,e),this._userModule=t,this._className=\"ProfileHandler\",this.TAG=\"profile\",this.accountProfileMap=new Map,this.expirationTime=864e5}return a(e,[{key:\"setExpirationTime\",value:function(e){this.expirationTime=e}},{key:\"getUserProfile\",value:function(e){var t=this,n=e.userIDList;e.fromAccount=this._userModule.getMyAccount(),n.length>100&&(Ki.warn(\"\".concat(this._className,\".getUserProfile 获取用户资料人数不能超过100人\")),n.length=100);for(var o,r=[],a=[],s=0,i=n.length;s<i;s++)o=n[s],this._userModule.isMyFriend(o)&&this._containsAccount(o)?a.push(this._getProfileFromMap(o)):r.push(o);if(0===r.length)return um(a);e.toAccount=r;var u=e.bFromGetMyProfile||!1,c=[];e.toAccount.forEach((function(e){c.push({toAccount:e,standardSequence:0,customSequence:0})})),e.userItem=c;var l=new jd(rh);return l.setMessage(n.length>5?\"userIDList.length:\".concat(n.length):\"userIDList:\".concat(n)),this._userModule.request({protocolName:Ml,requestData:e}).then((function(e){l.setNetworkType(t._userModule.getNetworkType()).end(),Ki.info(\"\".concat(t._className,\".getUserProfile ok\"));var n=t._handleResponse(e).concat(a);return Z_(u?n[0]:n)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];l.setError(e,o,r).end()})),Ki.error(\"\".concat(t._className,\".getUserProfile failed. error:\"),e),cm(e)}))}},{key:\"getMyProfile\",value:function(){var e=this._userModule.getMyAccount();if(Ki.log(\"\".concat(this._className,\".getMyProfile myAccount:\").concat(e)),this._fillMap(),this._containsAccount(e)){var t=this._getProfileFromMap(e);return Ki.debug(\"\".concat(this._className,\".getMyProfile from cache, myProfile:\")+JSON.stringify(t)),um(t)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}},{key:\"_handleResponse\",value:function(e){for(var t,n,o=ou.now(),r=e.data.userProfileItem,a=[],s=0,i=r.length;s<i;s++)\"@TLS#NOT_FOUND\"!==r[s].to&&\"\"!==r[s].to&&(t=r[s].to,n=this._updateMap(t,this._getLatestProfileFromResponse(t,r[s].profileItem)),a.push(n));return Ki.log(\"\".concat(this._className,\"._handleResponse cost \").concat(ou.now()-o,\" ms\")),a}},{key:\"_getLatestProfileFromResponse\",value:function(e,t){var n={};if(n.userID=e,n.profileCustomField=[],!Lu(t))for(var o=0,r=t.length;o<r;o++)if(t[o].tag.indexOf(\"Tag_Profile_Custom\")>-1)n.profileCustomField.push({key:t[o].tag,value:t[o].value});else switch(t[o].tag){case A_.NICK:n.nick=t[o].value;break;case A_.GENDER:n.gender=t[o].value;break;case A_.BIRTHDAY:n.birthday=t[o].value;break;case A_.LOCATION:n.location=t[o].value;break;case A_.SELFSIGNATURE:n.selfSignature=t[o].value;break;case A_.ALLOWTYPE:n.allowType=t[o].value;break;case A_.LANGUAGE:n.language=t[o].value;break;case A_.AVATAR:n.avatar=t[o].value;break;case A_.MESSAGESETTINGS:n.messageSettings=t[o].value;break;case A_.ADMINFORBIDTYPE:n.adminForbidType=t[o].value;break;case A_.LEVEL:n.level=t[o].value;break;case A_.ROLE:n.role=t[o].value;break;default:Ki.warn(\"\".concat(this._className,\"._handleResponse unknown tag:\"),t[o].tag,t[o].value)}return n}},{key:\"updateMyProfile\",value:function(e){var t=this,n=\"\".concat(this._className,\".updateMyProfile\"),o=new jd(ah);o.setMessage(JSON.stringify(e));var r=(new Fm).validate(e);if(!r.valid)return o.setCode(Tp.UPDATE_PROFILE_INVALID_PARAM).setMoreMessage(\"\".concat(n,\" info:\").concat(r.tips)).setNetworkType(this._userModule.getNetworkType()).end(),Ki.error(\"\".concat(n,\" info:\").concat(r.tips,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile\")),cm({code:Tp.UPDATE_PROFILE_INVALID_PARAM,message:Md});var a=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(\"profileCustomField\"===s?e.profileCustomField.forEach((function(e){a.push({tag:e.key,value:e.value})})):a.push({tag:A_[s.toUpperCase()],value:e[s]}));return 0===a.length?(o.setCode(Tp.UPDATE_PROFILE_NO_KEY).setMoreMessage(yd).setNetworkType(this._userModule.getNetworkType()).end(),Ki.error(\"\".concat(n,\" info:\").concat(yd,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile\")),cm({code:Tp.UPDATE_PROFILE_NO_KEY,message:yd})):this._userModule.request({protocolName:yl,requestData:{fromAccount:this._userModule.getMyAccount(),profileItem:a}}).then((function(r){o.setNetworkType(t._userModule.getNetworkType()).end(),Ki.info(\"\".concat(n,\" ok\"));var a=t._updateMap(t._userModule.getMyAccount(),e);return t._userModule.emitOuterEvent(oo.PROFILE_UPDATED,[a]),um(a)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))}},{key:\"onProfileModified\",value:function(e){var t=e.dataList;if(!Lu(t)){var n,o,r=t.length;Ki.info(\"\".concat(this._className,\".onProfileModified count:\").concat(r));for(var a=[],s=this._userModule.getModule(Jc),i=0;i<r;i++)n=t[i].userID,o=this._updateMap(n,this._getLatestProfileFromResponse(n,t[i].profileList)),a.push(o),n===this._userModule.getMyAccount()&&s.onMyProfileModified({latestNick:o.nick,latestAvatar:o.avatar});this._userModule.emitInnerEvent(Om.PROFILE_UPDATED,a),this._userModule.emitOuterEvent(oo.PROFILE_UPDATED,a)}}},{key:\"_fillMap\",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,o=e.length;n<o;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);Ki.log(\"\".concat(this._className,\"._fillMap from cache, map.size:\").concat(this.accountProfileMap.size))}}},{key:\"_updateMap\",value:function(e,t){var n,o=Date.now();return this._containsAccount(e)?(n=this._getProfileFromMap(e),t.profileCustomField&&fu(n.profileCustomField,t.profileCustomField),ru(n,t,[\"profileCustomField\"]),n.lastUpdatedTime=o):(n=new Fm(t),(this._userModule.isMyFriend(e)||e===this._userModule.getMyAccount())&&(n.lastUpdatedTime=o,this.accountProfileMap.set(e,n))),this._flushMap(e===this._userModule.getMyAccount()),n}},{key:\"_flushMap\",value:function(e){var t=v(this.accountProfileMap.values()),n=this._userModule.getStorageModule();Ki.debug(\"\".concat(this._className,\"._flushMap length:\").concat(t.length,\" flushAtOnce:\").concat(e)),n.setItem(this.TAG,t,e)}},{key:\"_containsAccount\",value:function(e){return this.accountProfileMap.has(e)}},{key:\"_getProfileFromMap\",value:function(e){return this.accountProfileMap.get(e)}},{key:\"_getCachedProfiles\",value:function(){var e=this._userModule.getStorageModule().getItem(this.TAG);return Lu(e)?[]:e}},{key:\"onConversationsProfileUpdated\",value:function(e){for(var t,n,o,r=[],a=0,s=e.length;a<s;a++)n=(t=e[a]).userID,this._userModule.isMyFriend(n)||(this._containsAccount(n)?(o=this._getProfileFromMap(n),ru(o,t)>0&&r.push(n)):r.push(t.userID));0!==r.length&&(Ki.info(\"\".concat(this._className,\".onConversationsProfileUpdated toAccountList:\").concat(r)),this.getUserProfile({userIDList:r}))}},{key:\"getNickAndAvatarByUserID\",value:function(e){if(this._containsAccount(e)){var t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:\"\",avatar:\"\"}}},{key:\"reset\",value:function(){this._flushMap(!0),this.accountProfileMap.clear()}}]),e}(),lv=function e(t){o(this,e),Lu||(this.userID=t.userID||\"\",this.timeStamp=t.timeStamp||0)},pv=function(){function e(t){o(this,e),this._userModule=t,this._className=\"BlacklistHandler\",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}return a(e,[{key:\"getLocalBlacklist\",value:function(){return v(this._blacklistMap.keys())}},{key:\"getBlacklist\",value:function(){var e=this,t=\"\".concat(this._className,\".getBlacklist\"),n={fromAccount:this._userModule.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},o=new jd(sh);return this._userModule.request({protocolName:Il,requestData:n}).then((function(n){var r=n.data,a=r.blackListItem,s=r.currentSequence,i=Lu(a)?0:a.length;o.setNetworkType(e._userModule.getNetworkType()).setMessage(\"blackList count:\".concat(i)).end(),Ki.info(\"\".concat(t,\" ok\")),e.currentSequence=s,e._handleResponse(a,!0),e._userModule.emitOuterEvent(oo.BLACKLIST_UPDATED,v(e._blacklistMap.keys()))})).catch((function(n){return e._userModule.probeNetwork().then((function(e){var t=m(e,2),r=t[0],a=t[1];o.setError(n,r,a).end()})),Ki.error(\"\".concat(t,\" failed. error:\"),n),cm(n)}))}},{key:\"addBlacklist\",value:function(e){var t=this,n=\"\".concat(this._className,\".addBlacklist\"),o=new jd(ih);if(!Wi(e.userIDList))return o.setCode(Tp.ADD_BLACKLIST_INVALID_PARAM).setMessage(Id).setNetworkType(this._userModule.getNetworkType()).end(),Ki.error(\"\".concat(n,\" options.userIDList 必需是数组\")),cm({code:Tp.ADD_BLACKLIST_INVALID_PARAM,message:Id});var r=this._userModule.getMyAccount();return 1===e.userIDList.length&&e.userIDList[0]===r?(o.setCode(Tp.CANNOT_ADD_SELF_TO_BLACKLIST).setMessage(Sd).setNetworkType(this._userModule.getNetworkType()).end(),Ki.error(\"\".concat(n,\" 不能把自己拉黑\")),cm({code:Tp.CANNOT_ADD_SELF_TO_BLACKLIST,message:Sd})):(e.userIDList.includes(r)&&(e.userIDList=e.userIDList.filter((function(e){return e!==r})),Ki.warn(\"\".concat(n,\" 不能把自己拉黑，已过滤\"))),e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Tl,requestData:e}).then((function(r){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)).end(),Ki.info(\"\".concat(n,\" ok\")),t._handleResponse(r.resultItem,!0),Z_(v(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)})))}},{key:\"_handleResponse\",value:function(e,t){if(!Lu(e))for(var n,o,r,a=0,s=e.length;a<s;a++)o=e[a].to,r=e[a].resultCode,(Ji(r)||0===r)&&(t?((n=this._blacklistMap.has(o)?this._blacklistMap.get(o):new lv).userID=o,!Lu(e[a].addBlackTimeStamp)&&(n.timeStamp=e[a].addBlackTimeStamp),this._blacklistMap.set(o,n)):this._blacklistMap.has(o)&&(n=this._blacklistMap.get(o),this._blacklistMap.delete(o)));Ki.log(\"\".concat(this._className,\"._handleResponse total:\").concat(this._blacklistMap.size,\" bAdd:\").concat(t))}},{key:\"deleteBlacklist\",value:function(e){var t=this,n=\"\".concat(this._className,\".deleteBlacklist\"),o=new jd(uh);return Wi(e.userIDList)?(e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Sl,requestData:e}).then((function(r){return o.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?\"userIDList.length:\".concat(e.userIDList.length):\"userIDList:\".concat(e.userIDList)).end(),Ki.info(\"\".concat(n,\" ok\")),t._handleResponse(r.data.resultItem,!1),Z_(v(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=m(t,2),r=n[0],a=n[1];o.setError(e,r,a).end()})),Ki.error(\"\".concat(n,\" failed. error:\"),e),cm(e)}))):(o.setCode(Tp.DEL_BLACKLIST_INVALID_PARAM).setMessage(Td).setNetworkType(this._userModule.getNetworkType()).end(),Ki.error(\"\".concat(n,\" options.userIDList 必需是数组\")),cm({code:Tp.DEL_BLACKLIST_INVALID_PARAM,message:Td}))}},{key:\"onAccountDeleted\",value:function(e){for(var t,n=[],o=0,r=e.length;o<r;o++)t=e[o],this._blacklistMap.has(t)&&(this._blacklistMap.delete(t),n.push(t));n.length>0&&(Ki.log(\"\".concat(this._className,\".onAccountDeleted count:\").concat(n.length,\" userIDList:\"),n),this._userModule.emitOuterEvent(oo.BLACKLIST_UPDATED,v(this._blacklistMap.keys())))}},{key:\"onAccountAdded\",value:function(e){for(var t,n=[],o=0,r=e.length;o<r;o++)t=e[o],this._blacklistMap.has(t)||(this._blacklistMap.set(t,new lv({userID:t})),n.push(t));n.length>0&&(Ki.log(\"\".concat(this._className,\".onAccountAdded count:\").concat(n.length,\" userIDList:\"),n),this._userModule.emitOuterEvent(oo.BLACKLIST_UPDATED,v(this._blacklistMap.keys())))}},{key:\"reset\",value:function(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}]),e}(),dv=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"UserModule\",r._profileHandler=new cv(h(r)),r._blacklistHandler=new pv(h(r)),r.getInnerEmitterInstance().on(Om.CONTEXT_A2KEY_AND_TINYID_UPDATED,r.onContextUpdated,h(r)),r}return a(n,[{key:\"onContextUpdated\",value:function(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}},{key:\"onProfileModified\",value:function(e){this._profileHandler.onProfileModified(e)}},{key:\"onRelationChainModified\",value:function(e){var t=e.dataList;if(!Lu(t)){var n=[];t.forEach((function(e){e.blackListDelAccount&&n.push.apply(n,v(e.blackListDelAccount))})),n.length>0&&this._blacklistHandler.onAccountDeleted(n);var o=[];t.forEach((function(e){e.blackListAddAccount&&o.push.apply(o,v(e.blackListAddAccount))})),o.length>0&&this._blacklistHandler.onAccountAdded(o)}}},{key:\"onConversationsProfileUpdated\",value:function(e){this._profileHandler.onConversationsProfileUpdated(e)}},{key:\"getMyAccount\",value:function(){return this.getMyUserID()}},{key:\"getMyProfile\",value:function(){return this._profileHandler.getMyProfile()}},{key:\"getStorageModule\",value:function(){return this.getModule(Qc)}},{key:\"isMyFriend\",value:function(e){var t=this.getModule(zc);return!!t&&t.isMyFriend(e)}},{key:\"getUserProfile\",value:function(e){return this._profileHandler.getUserProfile(e)}},{key:\"updateMyProfile\",value:function(e){return this._profileHandler.updateMyProfile(e)}},{key:\"getNickAndAvatarByUserID\",value:function(e){return this._profileHandler.getNickAndAvatarByUserID(e)}},{key:\"getLocalBlacklist\",value:function(){var e=this._blacklistHandler.getLocalBlacklist();return um(e)}},{key:\"addBlacklist\",value:function(e){return this._blacklistHandler.addBlacklist(e)}},{key:\"deleteBlacklist\",value:function(e){return this._blacklistHandler.deleteBlacklist(e)}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._profileHandler.reset(),this._blacklistHandler.reset()}}]),n}(pl),gv=function(){function e(t,n){o(this,e),this._moduleManager=t,this._isLoggedIn=!1,this._SDKAppID=n.SDKAppID,this._userID=n.userID||\"\",this._userSig=n.userSig||\"\",this._version=\"2.14.0\",this._a2Key=\"\",this._tinyID=\"\",this._contentType=\"json\",this._unlimitedAVChatRoom=n.unlimitedAVChatRoom,this._scene=n.scene||\"\",this._oversea=n.oversea,this._instanceID=n.instanceID,this._statusInstanceID=0}return a(e,[{key:\"isLoggedIn\",value:function(){return this._isLoggedIn}},{key:\"isOversea\",value:function(){return this._oversea}},{key:\"isUnlimitedAVChatRoom\",value:function(){return this._unlimitedAVChatRoom}},{key:\"getUserID\",value:function(){return this._userID}},{key:\"setUserID\",value:function(e){this._userID=e}},{key:\"setUserSig\",value:function(e){this._userSig=e}},{key:\"getUserSig\",value:function(){return this._userSig}},{key:\"getSDKAppID\",value:function(){return this._SDKAppID}},{key:\"getTinyID\",value:function(){return this._tinyID}},{key:\"setTinyID\",value:function(e){this._tinyID=e,this._isLoggedIn=!0}},{key:\"getScene\",value:function(){return function(){var e=!1,t=[];ai&&(t=Object.keys(ii)),si&&(t=Object.keys(window));for(var n=0,o=t.length;n<o;n++)if(t[n].toLowerCase().includes(\"uikit\")){e=!0;break}return t=null,e}()?\"tuikit\":this._scene}},{key:\"getInstanceID\",value:function(){return this._instanceID}},{key:\"getStatusInstanceID\",value:function(){return this._statusInstanceID}},{key:\"setStatusInstanceID\",value:function(e){this._statusInstanceID=e}},{key:\"getVersion\",value:function(){return this._version}},{key:\"getA2Key\",value:function(){return this._a2Key}},{key:\"setA2Key\",value:function(e){this._a2Key=e}},{key:\"getContentType\",value:function(){return this._contentType}},{key:\"reset\",value:function(){this._isLoggedIn=!1,this._userSig=\"\",this._a2Key=\"\",this._tinyID=\"\",this._statusInstanceID=0}}]),e}(),hv=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"SignModule\",r._helloInterval=120,r._lastLoginTs=0,Lm.mixin(h(r)),r}return a(n,[{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}},{key:\"login\",value:function(e){if(this.isLoggedIn()){var t=\"您已经登录账号\".concat(e.userID,\"！如需切换账号登录，请先调用 logout 接口登出，再调用 login 接口登录。\");return Ki.warn(t),um({actionStatus:\"OK\",errorCode:0,errorInfo:t,repeatLogin:!0})}if(Date.now()-this._lastLoginTs<=15e3)return Ki.warn(\"您正在尝试登录账号\".concat(e.userID,\"！请勿重复登录。\")),cm({code:Tp.REPEAT_LOGIN,message:Np});Ki.log(\"\".concat(this._className,\".login userID:\").concat(e.userID));var n=this._checkLoginInfo(e);if(0!==n.code)return cm(n);var o=this.getModule(Xc),r=e.userID,a=e.userSig;return o.setUserID(r),o.setUserSig(a),this.getModule(al).updateProtocolConfig(),this._login()}},{key:\"_login\",value:function(){var e=this,t=this.getModule(Xc),n=new jd(zd);return n.setMessage(\"\".concat(t.getScene())).setMoreMessage(\"identifier:\".concat(this.getMyUserID())),this._lastLoginTs=Date.now(),this.request({protocolName:dl}).then((function(o){e._lastLoginTs=0;var r=Date.now(),a=null,s=o.data,i=s.a2Key,u=s.tinyID,c=s.helloInterval,l=s.instanceID,p=s.timeStamp;Ki.log(\"\".concat(e._className,\".login ok. helloInterval:\").concat(c,\" instanceID:\").concat(l,\" timeStamp:\").concat(p));var d=1e3*p,g=r-n.getStartTs(),h=d+parseInt(g/2)-r,f=n.getStartTs()+h;if(n.start(f),function(e,t){Gi=t;var n=new Date;n.setTime(e),Ki.info(\"baseTime from server: \".concat(n,\" offset: \").concat(Gi))}(d,h),!u)throw a=new am({code:Tp.NO_TINYID,message:Cp}),n.setError(a,!0,e.getNetworkType()).end(),a;if(!i)throw a=new am({code:Tp.NO_A2KEY,message:Ap}),n.setError(a,!0,e.getNetworkType()).end(),a;return n.setNetworkType(e.getNetworkType()).setMoreMessage(\"helloInterval:\".concat(c,\" instanceID:\").concat(l,\" offset:\").concat(h)).end(),t.setA2Key(i),t.setTinyID(u),t.setStatusInstanceID(l),e.getModule(al).updateProtocolConfig(),e.emitInnerEvent(Om.CONTEXT_A2KEY_AND_TINYID_UPDATED),e._helloInterval=c,e.triggerReady(),e._fetchCloudControlConfig(),o})).catch((function(t){return e.probeNetwork().then((function(e){var o=m(e,2),r=o[0],a=o[1];n.setError(t,r,a).end(!0)})),Ki.error(\"\".concat(e._className,\".login failed. error:\"),t),e._moduleManager.onLoginFailed(),cm(t)}))}},{key:\"logout\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isLoggedIn())return cm({code:Tp.USER_NOT_LOGGED_IN,message:kp});var n=new jd(Wd);return n.setNetworkType(this.getNetworkType()).setMessage(\"identifier:\".concat(this.getMyUserID())).end(!0),Ki.info(\"\".concat(this._className,\".logout type:\").concat(t)),this.request({protocolName:gl,requestData:{type:t}}).then((function(){return e.resetReady(),um({})})).catch((function(t){return Ki.error(\"\".concat(e._className,\"._logout error:\"),t),e.resetReady(),um({})}))}},{key:\"_fetchCloudControlConfig\",value:function(){this.getModule(ul).fetchConfig()}},{key:\"_hello\",value:function(){var e=this;this.request({protocolName:hl}).catch((function(t){Ki.warn(\"\".concat(e._className,\"._hello error:\"),t)}))}},{key:\"_checkLoginInfo\",value:function(e){var t=0,n=\"\";return Lu(this.getModule(Xc).getSDKAppID())?(t=Tp.NO_SDKAPPID,n=Sp):Lu(e.userID)?(t=Tp.NO_IDENTIFIER,n=Dp):Lu(e.userSig)&&(t=Tp.NO_USERSIG,n=Ep),{code:t,message:n}}},{key:\"onMultipleAccountKickedOut\",value:function(e){var t=this;new jd(Jd).setNetworkType(this.getNetworkType()).setMessage(\"type:\".concat(ro.KICKED_OUT_MULT_ACCOUNT,\" newInstanceInfo:\").concat(JSON.stringify(e))).end(!0),Ki.warn(\"\".concat(this._className,\".onMultipleAccountKickedOut userID:\").concat(this.getMyUserID(),\" newInstanceInfo:\"),e),this.logout(1).then((function(){t.emitOuterEvent(oo.KICKED_OUT,{type:ro.KICKED_OUT_MULT_ACCOUNT}),t._moduleManager.reset()}))}},{key:\"onMultipleDeviceKickedOut\",value:function(e){var t=this;new jd(Jd).setNetworkType(this.getNetworkType()).setMessage(\"type:\".concat(ro.KICKED_OUT_MULT_DEVICE,\" newInstanceInfo:\").concat(JSON.stringify(e))).end(!0),Ki.warn(\"\".concat(this._className,\".onMultipleDeviceKickedOut userID:\").concat(this.getMyUserID(),\" newInstanceInfo:\"),e),this.logout(1).then((function(){t.emitOuterEvent(oo.KICKED_OUT,{type:ro.KICKED_OUT_MULT_DEVICE}),t._moduleManager.reset()}))}},{key:\"onUserSigExpired\",value:function(){new jd(Jd).setNetworkType(this.getNetworkType()).setMessage(ro.KICKED_OUT_USERSIG_EXPIRED).end(!0),Ki.warn(\"\".concat(this._className,\".onUserSigExpired: userSig 签名过期被踢下线\")),0!==this.getModule(Xc).getStatusInstanceID()&&(this.emitOuterEvent(oo.KICKED_OUT,{type:ro.KICKED_OUT_USERSIG_EXPIRED}),this._moduleManager.reset())}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0}}]),n}(pl);function fv(){return null}var _v=function(){function e(t){o(this,e),this._moduleManager=t,this._className=\"StorageModule\",this._storageQueue=new Map,this._errorTolerantHandle()}return a(e,[{key:\"_errorTolerantHandle\",value:function(){ai||!Ji(window)&&!Ji(window.localStorage)||(this.getItem=fv,this.setItem=fv,this.removeItem=fv,this.clear=fv)}},{key:\"onCheckTimer\",value:function(e){if(e%20==0){if(0===this._storageQueue.size)return;this._doFlush()}}},{key:\"_doFlush\",value:function(){try{var e,t=D(this._storageQueue);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),o=n[0],r=n[1];this._setStorageSync(this._getKey(o),r)}}catch(a){t.e(a)}finally{t.f()}this._storageQueue.clear()}catch(_M){Ki.warn(\"\".concat(this._className,\"._doFlush error:\"),_M)}}},{key:\"_getPrefix\",value:function(){var e=this._moduleManager.getModule(Xc);return\"TIM_\".concat(e.getSDKAppID(),\"_\").concat(e.getUserID(),\"_\")}},{key:\"_getKey\",value:function(e){return\"\".concat(this._getPrefix()).concat(e)}},{key:\"getItem\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;return this._getStorageSync(n)}catch(_M){return Ki.warn(\"\".concat(this._className,\".getItem error:\"),_M),{}}}},{key:\"setItem\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n){var r=o?this._getKey(e):e;this._setStorageSync(r,t)}else this._storageQueue.set(e,t)}},{key:\"clear\",value:function(){try{ai?ii.clearStorageSync():localStorage&&localStorage.clear()}catch(_M){Ki.warn(\"\".concat(this._className,\".clear error:\"),_M)}}},{key:\"removeItem\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;this._removeStorageSync(n)}catch(_M){Ki.warn(\"\".concat(this._className,\".removeItem error:\"),_M)}}},{key:\"getSize\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"b\";try{var o={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(o,\"leftSize\",{enumerable:!0,get:function(){return o.limitSize-o.size}}),ai&&(o.limitSize=1024*ii.getStorageInfoSync().limitSize),e)o.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(ai){var r=ii.getStorageInfoSync(),a=r.keys;a.forEach((function(e){o.size+=JSON.stringify(t._getStorageSync(e)).length+t._getKey(e).length}))}else if(localStorage)for(var s in localStorage)localStorage.hasOwnProperty(s)&&(o.size+=localStorage.getItem(s).length+s.length);return this._convertUnit(o)}catch(_M){Ki.warn(\"\".concat(this._className,\" error:\"),_M)}}},{key:\"_convertUnit\",value:function(e){var t={},n=e.unit;for(var o in t.unit=n,e)\"number\"==typeof e[o]&&(\"kb\"===n.toLowerCase()?t[o]=Math.round(e[o]/1024):\"mb\"===n.toLowerCase()?t[o]=Math.round(e[o]/1024/1024):t[o]=e[o]);return t}},{key:\"_setStorageSync\",value:function(e,t){ai?oi?my.setStorageSync({key:e,data:t}):ii.setStorageSync(e,t):localStorage&&localStorage.setItem(e,JSON.stringify(t))}},{key:\"_getStorageSync\",value:function(e){return ai?oi?my.getStorageSync({key:e}).data:ii.getStorageSync(e):localStorage?JSON.parse(localStorage.getItem(e)):{}}},{key:\"_removeStorageSync\",value:function(e){ai?oi?my.removeStorageSync({key:e}):ii.removeStorageSync(e):localStorage&&localStorage.removeItem(e)}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._doFlush()}}]),e}(),mv=function(){function e(t){o(this,e),this._className=\"SSOLogBody\",this._report=[]}return a(e,[{key:\"pushIn\",value:function(e){Ki.debug(\"\".concat(this._className,\".pushIn\"),this._report.length,e),this._report.push(e)}},{key:\"backfill\",value:function(e){var t;Wi(e)&&0!==e.length&&(Ki.debug(\"\".concat(this._className,\".backfill\"),this._report.length,e.length),(t=this._report).unshift.apply(t,v(e)))}},{key:\"getLogsNumInMemory\",value:function(){return this._report.length}},{key:\"isEmpty\",value:function(){return 0===this._report.length}},{key:\"_reset\",value:function(){this._report.length=0,this._report=[]}},{key:\"getLogsInMemory\",value:function(){var e=this._report.slice();return this._reset(),e}}]),e}(),vv=function(e){var t=e.getModule(Xc);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:Ui()}},Mv=function(e){i(r,e);var n=_(r);function r(e){var t;o(this,r),(t=n.call(this,e))._className=\"EventStatModule\",t.TAG=\"im-ssolog-event\",t._reportBody=new mv,t.MIN_THRESHOLD=20,t.MAX_THRESHOLD=100,t.WAITING_TIME=6e4,t.REPORT_LEVEL=[4,5,6],t.REPORT_SDKAPPID_BLACKLIST=[],t.REPORT_TINYID_WHITELIST=[],t._lastReportTime=Date.now();var a=t.getInnerEmitterInstance();return a.on(Om.CONTEXT_A2KEY_AND_TINYID_UPDATED,t._onLoginSuccess,h(t)),a.on(Om.CLOUD_CONFIG_UPDATED,t._onCloudConfigUpdated,h(t)),t}return a(r,[{key:\"reportAtOnce\",value:function(){Ki.debug(\"\".concat(this._className,\".reportAtOnce\")),this._report()}},{key:\"_onLoginSuccess\",value:function(){var e=this,t=this.getModule(Qc),n=t.getItem(this.TAG,!1);!Lu(n)&&Qi(n.forEach)&&(Ki.log(\"\".concat(this._className,\"._onLoginSuccess get ssolog in storage, count:\").concat(n.length)),n.forEach((function(t){e._reportBody.pushIn(t)})),t.removeItem(this.TAG,!1))}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"evt_rpt_threshold\"),t=this.getCloudConfig(\"evt_rpt_waiting\"),n=this.getCloudConfig(\"evt_rpt_level\"),o=this.getCloudConfig(\"evt_rpt_sdkappid_bl\"),r=this.getCloudConfig(\"evt_rpt_tinyid_wl\");Ji(e)||(this.MIN_THRESHOLD=Number(e)),Ji(t)||(this.WAITING_TIME=Number(t)),Ji(n)||(this.REPORT_LEVEL=n.split(\",\").map((function(e){return Number(e)}))),Ji(o)||(this.REPORT_SDKAPPID_BLACKLIST=o.split(\",\").map((function(e){return Number(e)}))),Ji(r)||(this.REPORT_TINYID_WHITELIST=r.split(\",\"))}},{key:\"pushIn\",value:function(e){e instanceof jd&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:\"onCheckTimer\",value:function(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}},{key:\"_filterLogs\",value:function(e){var t=this,n=this.getModule(Xc),o=n.getSDKAppID(),r=n.getTinyID();return ku(this.REPORT_SDKAPPID_BLACKLIST,o)&&!Nu(this.REPORT_TINYID_WHITELIST,r)?[]:e.filter((function(e){return t.REPORT_LEVEL.includes(e.level)}))}},{key:\"_report\",value:function(){var e=this;if(!this._reportBody.isEmpty()){var n=this._reportBody.getLogsInMemory(),o=this._filterLogs(n);if(0!==o.length){var r={header:vv(this),event:o};this.request({protocolName:gp,requestData:t({},r)}).then((function(){e._lastReportTime=Date.now()})).catch((function(t){Ki.warn(\"\".concat(e._className,\".report failed. networkType:\").concat(e.getNetworkType(),\" error:\"),t),e._reportBody.backfill(n),e._reportBody.getLogsNumInMemory()>e.MAX_THRESHOLD&&e._flushAtOnce()}))}else this._lastReportTime=Date.now()}}},{key:\"_flushAtOnce\",value:function(){var e=this.getModule(Qc),t=e.getItem(this.TAG,!1),n=this._reportBody.getLogsInMemory();if(Lu(t))Ki.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var o=n.concat(t);o.length>this.MAX_THRESHOLD&&(o=o.slice(0,this.MAX_THRESHOLD)),Ki.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}]),r}(pl),yv=\"none\",Iv=\"online\",Tv=function(){function e(t){o(this,e),this._moduleManager=t,this._networkType=\"\",this._className=\"NetMonitorModule\",this.MAX_WAIT_TIME=3e3}return a(e,[{key:\"start\",value:function(){var e=this;if(ai){ii.getNetworkType({success:function(t){e._networkType=t.networkType,t.networkType===yv?Ki.warn(\"\".concat(e._className,\".start no network, please check!\")):Ki.info(\"\".concat(e._className,\".start networkType:\").concat(t.networkType))}});var t=this._onNetworkStatusChange.bind(this);ii.offNetworkStatusChange&&(ri||ti?ii.offNetworkStatusChange(t):ii.offNetworkStatusChange()),ii.onNetworkStatusChange(t)}else this._networkType=Iv}},{key:\"_onNetworkStatusChange\",value:function(e){e.isConnected?(Ki.info(\"\".concat(this._className,\"._onNetworkStatusChange previousNetworkType:\").concat(this._networkType,\" currentNetworkType:\").concat(e.networkType)),this._networkType!==e.networkType&&this._moduleManager.getModule(sl).reConnect()):Ki.warn(\"\".concat(this._className,\"._onNetworkStatusChange no network, please check!\"));this._networkType=e.networkType}},{key:\"probe\",value:function(){var e=this;return new Promise((function(t,n){if(ai)ii.getNetworkType({success:function(n){e._networkType=n.networkType,n.networkType===yv?(Ki.warn(\"\".concat(e._className,\".probe no network, please check!\")),t([!1,n.networkType])):(Ki.info(\"\".concat(e._className,\".probe networkType:\").concat(n.networkType)),t([!0,n.networkType]))}});else if(window&&window.fetch)fetch(\"\".concat(du(),\"//web.sdk.qcloud.com/im/assets/speed.xml?random=\").concat(Math.random())).then((function(e){e.ok?t([!0,Iv]):t([!1,yv])})).catch((function(e){t([!1,yv])}));else{var o=new XMLHttpRequest,r=setTimeout((function(){Ki.warn(\"\".concat(e._className,\".probe fetch timeout. Probably no network, please check!\")),o.abort(),e._networkType=yv,t([!1,yv])}),e.MAX_WAIT_TIME);o.onreadystatechange=function(){4===o.readyState&&(clearTimeout(r),200===o.status||304===o.status?(this._networkType=Iv,t([!0,Iv])):(Ki.warn(\"\".concat(this.className,\".probe fetch status:\").concat(o.status,\". Probably no network, please check!\")),this._networkType=yv,t([!1,yv])))},o.open(\"GET\",\"\".concat(du(),\"//web.sdk.qcloud.com/im/assets/speed.xml?random=\").concat(Math.random())),o.send()}}))}},{key:\"getNetworkType\",value:function(){return this._networkType}}]),e}(),Sv=C((function(e){var t=Object.prototype.hasOwnProperty,n=\"~\";function o(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,o,a,s){if(\"function\"!=typeof o)throw new TypeError(\"The listener must be a function\");var i=new r(o,a||e,s),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],i]:e._events[u].push(i):(e._events[u]=i,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function i(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),i.prototype.eventNames=function(){var e,o,r=[];if(0===this._eventsCount)return r;for(o in e=this._events)t.call(e,o)&&r.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},i.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,a=o.length,s=new Array(a);r<a;r++)s[r]=o[r].fn;return s},i.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},i.prototype.emit=function(e,t,o,r,a,s){var i=n?n+e:e;if(!this._events[i])return!1;var u,c,l=this._events[i],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,o),!0;case 4:return l.fn.call(l.context,t,o,r),!0;case 5:return l.fn.call(l.context,t,o,r,a),!0;case 6:return l.fn.call(l.context,t,o,r,a,s),!0}for(c=1,u=new Array(p-1);c<p;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,g=l.length;for(c=0;c<g;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),p){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,o);break;case 4:l[c].fn.call(l[c].context,t,o,r);break;default:if(!u)for(d=1,u=new Array(p-1);d<p;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},i.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},i.prototype.removeListener=function(e,t,o,r){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var i=this._events[a];if(i.fn)i.fn!==t||r&&!i.once||o&&i.context!==o||s(this,a);else{for(var u=0,c=[],l=i.length;u<l;u++)(i[u].fn!==t||r&&!i[u].once||o&&i[u].context!==o)&&c.push(i[u]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=n,i.EventEmitter=i,e.exports=i})),Dv=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"BigDataChannelModule\",r.FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},r._bdh_download_server=\"grouptalk.c2c.qq.com\",r._BDHBizID=10001,r._authKey=\"\",r._expireTime=0,r.getInnerEmitterInstance().on(Om.CONTEXT_A2KEY_AND_TINYID_UPDATED,r._getAuthKey,h(r)),r}return a(n,[{key:\"_getAuthKey\",value:function(){var e=this;this.request({protocolName:_l}).then((function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))}))}},{key:\"_isFromOlderVersion\",value:function(e){return!(!e.content||2===e.content.downloadFlag)}},{key:\"parseElements\",value:function(e,t){if(!Wi(e)||!t)return[];for(var n=[],o=null,r=0;r<e.length;r++)o=e[r],this._needParse(o)?n.push(this._parseElement(o,t)):n.push(e[r]);return n}},{key:\"_needParse\",value:function(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==ro.MSG_AUDIO&&e.type!==ro.MSG_FILE&&e.type!==ro.MSG_VIDEO)}},{key:\"_parseElement\",value:function(e,t){switch(e.type){case ro.MSG_AUDIO:return this._parseAudioElement(e,t);case ro.MSG_FILE:return this._parseFileElement(e,t);case ro.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:\"_parseAudioElement\",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:\"_parseFileElement\",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:\"_parseVideoElement\",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:\"_genAudioUrl\",value:function(e,t){if(\"\"===this._authKey)return Ki.warn(\"\".concat(this._className,\"._genAudioUrl no authKey!\")),\"\";var n=this.getModule(Xc).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(n,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.SOUND,\"&openid=\").concat(t,\"&ver=0\")}},{key:\"_genFileUrl\",value:function(e,t,n){if(\"\"===this._authKey)return Ki.warn(\"\".concat(this._className,\"._genFileUrl no authKey!\")),\"\";n||(n=\"\".concat(Math.floor(1e5*Math.random()),\"-\").concat(Date.now()));var o=this.getModule(Xc).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(o,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.FILE,\"&openid=\").concat(t,\"&ver=0&filename=\").concat(encodeURIComponent(n))}},{key:\"_genVideoUrl\",value:function(e,t){if(\"\"===this._authKey)return Ki.warn(\"\".concat(this._className,\"._genVideoUrl no authKey!\")),\"\";var n=this.getModule(Xc).getSDKAppID();return\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(n,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.VIDEO,\"&openid=\").concat(t,\"&ver=0\")}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._authKey=\"\",this.expireTime=0}}]),n}(pl),Ev=function(e){i(r,e);var n=_(r);function r(e){var t;return o(this,r),(t=n.call(this,e))._className=\"UploadModule\",t.TIMUploadPlugin=null,t.timUploadPlugin=null,t.COSSDK=null,t._cosUploadMethod=null,t.expiredTimeLimit=600,t.appid=0,t.bucketName=\"\",t.ciUrl=\"\",t.directory=\"\",t.downloadUrl=\"\",t.uploadUrl=\"\",t.region=\"ap-shanghai\",t.cos=null,t.cosOptions={secretId:\"\",secretKey:\"\",sessionToken:\"\",expiredTime:0},t.uploadFileType=\"\",t.duration=900,t.tryCount=0,t.getInnerEmitterInstance().on(Om.CONTEXT_A2KEY_AND_TINYID_UPDATED,t._init,h(t)),t}return a(r,[{key:\"_init\",value:function(){var e=\"\".concat(this._className,\"._init\"),t=this.getModule(ol);if(this.TIMUploadPlugin=t.getPlugin(\"tim-upload-plugin\"),this.TIMUploadPlugin)this._initUploaderMethod();else{var n=ai?\"cos-wx-sdk\":\"cos-js-sdk\";this.COSSDK=t.getPlugin(n),this.COSSDK?(this._getAuthorizationKey(),Ki.warn(\"\".concat(e,\" v2.9.2起推荐使用 tim-upload-plugin 代替 \").concat(n,\"，上传更快更安全。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\"))):Ki.warn(\"\".concat(e,\" 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\"))}}},{key:\"_getAuthorizationKey\",value:function(){var e=this,t=new jd(ng),n=Math.ceil(Date.now()/1e3);this.request({protocolName:pp,requestData:{duration:this.expiredTimeLimit}}).then((function(o){var r=o.data;Ki.log(\"\".concat(e._className,\"._getAuthorizationKey ok. data:\"),r);var a=r.expiredTime-n;t.setMessage(\"requestId:\".concat(r.requestId,\" requestTime:\").concat(n,\" expiredTime:\").concat(r.expiredTime,\" diff:\").concat(a,\"s\")).setNetworkType(e.getNetworkType()).end(),!ai&&r.region&&(e.region=r.region),e.appid=r.appid,e.bucketName=r.bucketName,e.ciUrl=r.ciUrl,e.directory=r.directory,e.downloadUrl=r.downloadUrl,e.uploadUrl=r.uploadUrl,e.cosOptions={secretId:r.secretId,secretKey:r.secretKey,sessionToken:r.sessionToken,expiredTime:r.expiredTime},Ki.log(\"\".concat(e._className,\"._getAuthorizationKey ok. region:\").concat(e.region,\" bucketName:\").concat(e.bucketName)),e._initUploaderMethod()})).catch((function(n){e.probeNetwork().then((function(e){var o=m(e,2),r=o[0],a=o[1];t.setError(n,r,a).end()})),Ki.warn(\"\".concat(e._className,\"._getAuthorizationKey failed. error:\"),n)}))}},{key:\"_getCosPreSigUrl\",value:function(e){var t=this,n=\"\".concat(this._className,\"._getCosPreSigUrl\"),o=Math.ceil(Date.now()/1e3),r=new jd(og);return this.request({protocolName:dp,requestData:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then((function(e){t.tryCount=0;var a=e.data||{},s=a.expiredTime-o;return Ki.log(\"\".concat(n,\" ok. data:\"),a),r.setMessage(\"requestId:\".concat(a.requestId,\" expiredTime:\").concat(a.expiredTime,\" diff:\").concat(s,\"s\")).setNetworkType(t.getNetworkType()).end(),a})).catch((function(o){return-1===o.code&&(o.code=Tp.COS_GET_SIG_FAIL),t.probeNetwork().then((function(e){var t=m(e,2),n=t[0],a=t[1];r.setError(o,n,a).end()})),Ki.warn(\"\".concat(n,\" failed. error:\"),o),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,cm({code:Tp.COS_GET_SIG_FAIL,message:Lp}))}))}},{key:\"_initUploaderMethod\",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,n){e.timUploadPlugin.uploadFile(t,n)});this.appid&&(this.cos=ai?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=ai?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)})}},{key:\"onCheckTimer\",value:function(e){this.COSSDK&&(this.TIMUploadPlugin||this.isLoggedIn()&&e%60==0&&Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey())}},{key:\"_getAuthorization\",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:\"upload\",value:function(e){if(!0===e.getRelayFlag())return Promise.resolve();var t=this.getModule(ll);switch(e.type){case ro.MSG_IMAGE:return t.addTotalCount(Fd),this._uploadImage(e);case ro.MSG_FILE:return t.addTotalCount(Fd),this._uploadFile(e);case ro.MSG_AUDIO:return t.addTotalCount(Fd),this._uploadAudio(e);case ro.MSG_VIDEO:return t.addTotalCount(Fd),this._uploadVideo(e);default:return Promise.resolve()}}},{key:\"_uploadImage\",value:function(e){var n=this.getModule(Hc),o=e.getElements()[0],r=n.getMessageOptionByID(e.ID);return this.doUploadImage({file:r.payload.file,to:r.to,onProgress:function(e){if(o.updatePercent(e),Qi(r.onProgress))try{r.onProgress(e)}catch(t){return cm({code:Tp.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Gp})}}}).then((function(n){var r=n.location,a=n.fileType,s=n.fileSize,i=n.width,u=n.height,c=gu(r);o.updateImageFormat(a);var l=Du({originUrl:c,originWidth:i,originHeight:u,min:198}),p=Du({originUrl:c,originWidth:i,originHeight:u,min:720});return o.updateImageInfoArray([{size:s,url:c,width:i,height:u},t({},p),t({},l)]),e}))}},{key:\"_uploadFile\",value:function(e){var t=this.getModule(Hc),n=e.getElements()[0],o=t.getMessageOptionByID(e.ID);return this.doUploadFile({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),Qi(o.onProgress))try{o.onProgress(e)}catch(t){return cm({code:Tp.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Gp})}}}).then((function(t){var o=t.location,r=gu(o);return n.updateFileUrl(r),e}))}},{key:\"_uploadAudio\",value:function(e){var t=this.getModule(Hc),n=e.getElements()[0],o=t.getMessageOptionByID(e.ID);return this.doUploadAudio({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),Qi(o.onProgress))try{o.onProgress(e)}catch(t){return cm({code:Tp.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Gp})}}}).then((function(t){var o=t.location,r=gu(o);return n.updateAudioUrl(r),e}))}},{key:\"_uploadVideo\",value:function(e){var t=this.getModule(Hc),n=e.getElements()[0],o=t.getMessageOptionByID(e.ID);return this.doUploadVideo({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),Qi(o.onProgress))try{o.onProgress(e)}catch(t){return cm({code:Tp.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:Gp})}}}).then((function(t){var o=gu(t.location);return n.updateVideoUrl(o),e}))}},{key:\"doUploadImage\",value:function(e){if(!e.file)return cm({code:Tp.MESSAGE_IMAGE_SELECT_FILE_FIRST,message:qp});var t=this._checkImageType(e.file);if(!0!==t)return t;var n=this._checkImageSize(e.file);if(!0!==n)return n;var o=null;return this._setUploadFileType(wm),this.uploadByCOS(e).then((function(e){return o=e,t=\"https://\".concat(e.location),ai?new Promise((function(e,n){ii.getImageInfo({src:t,success:function(t){e({width:t.width,height:t.height})},fail:function(){e({width:0,height:0})}})})):Mi&&9===yi?Promise.resolve({width:0,height:0}):new Promise((function(e,n){var o=new Image;o.onload=function(){e({width:this.width,height:this.height}),o=null},o.onerror=function(){e({width:0,height:0}),o=null},o.src=t}));var t})).then((function(e){return o.width=e.width,o.height=e.height,Promise.resolve(o)}))}},{key:\"_checkImageType\",value:function(e){var t=\"\";return t=ai?e.url.slice(e.url.lastIndexOf(\".\")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(\".\")+1),Rm.indexOf(t.toLowerCase())>=0||cm({code:Tp.MESSAGE_IMAGE_TYPES_LIMIT,message:xp})}},{key:\"_checkImageSize\",value:function(e){var t=0;return 0===(t=ai?e.size:e.files[0].size)?cm({code:Tp.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(Pp)}):t<20971520||cm({code:Tp.MESSAGE_IMAGE_SIZE_LIMIT,message:\"\".concat(Vp)})}},{key:\"doUploadFile\",value:function(e){var t=null;return e.file?e.file.files[0].size>104857600?cm(t={code:Tp.MESSAGE_FILE_SIZE_LIMIT,message:Wp}):0===e.file.files[0].size?(t={code:Tp.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(Pp)},cm(t)):(this._setUploadFileType(Um),this.uploadByCOS(e)):cm(t={code:Tp.MESSAGE_FILE_SELECT_FILE_FIRST,message:zp})}},{key:\"doUploadVideo\",value:function(e){return e.file.videoFile.size>104857600?cm({code:Tp.MESSAGE_VIDEO_SIZE_LIMIT,message:\"\".concat(jp)}):0===e.file.videoFile.size?cm({code:Tp.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(Pp)}):-1===bm.indexOf(e.file.videoFile.type)?cm({code:Tp.MESSAGE_VIDEO_TYPES_LIMIT,message:\"\".concat($p)}):(this._setUploadFileType(Pm),ai?this.handleVideoUpload({file:e.file.videoFile,onProgress:e.onProgress}):si?this.handleVideoUpload(e):void 0)}},{key:\"handleVideoUpload\",value:function(e){var t=this;return new Promise((function(n,o){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){o(new am({code:Tp.MESSAGE_VIDEO_UPLOAD_FAIL,message:Hp}))}))}))}))}},{key:\"doUploadAudio\",value:function(e){return e.file?e.file.size>20971520?cm(new am({code:Tp.MESSAGE_AUDIO_SIZE_LIMIT,message:\"\".concat(Bp)})):0===e.file.size?cm(new am({code:Tp.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(Pp)})):(this._setUploadFileType(Gm),this.uploadByCOS(e)):cm(new am({code:Tp.MESSAGE_AUDIO_UPLOAD_FAIL,message:Kp}))}},{key:\"uploadByCOS\",value:function(e){var t=this,n=\"\".concat(this._className,\".uploadByCOS\");if(!Qi(this._cosUploadMethod))return Ki.warn(\"\".concat(n,\" 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin\")),cm({code:Tp.COS_UNDETECTED,message:Op});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var o=new jd(rg),r=Date.now(),a=ai?e.file:e.file.files[0];return new Promise((function(s,i){var u=ai?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),c=t;t._cosUploadMethod(u,(function(e,u){var l=Object.create(null);if(u){if(e||Wi(u.files)&&u.files[0].error){var p=new am({code:Tp.MESSAGE_FILE_UPLOAD_FAIL,message:Yp});return o.setError(p,!0,t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" failed. error:\"),u.files[0].error),403===u.files[0].error.statusCode&&(Ki.warn(\"\".concat(n,\" failed. cos AccessKeyId was invalid, regain auth key!\")),t._getAuthorizationKey()),void i(p)}l.fileName=a.name,l.fileSize=a.size,l.fileType=a.type.slice(a.type.indexOf(\"/\")+1).toLowerCase(),l.location=ai?u.Location:u.files[0].data.Location;var d=Date.now()-r,g=c._formatFileSize(a.size),h=c._formatSpeed(1e3*a.size/d),f=\"size:\".concat(g,\" time:\").concat(d,\"ms speed:\").concat(h);Ki.log(\"\".concat(n,\" success. name:\").concat(a.name,\" \").concat(f)),s(l);var _=t.getModule(ll);return _.addCost(Fd,d),_.addFileSize(Fd,a.size),void o.setNetworkType(t.getNetworkType()).setMessage(f).end()}var m=new am({code:Tp.MESSAGE_FILE_UPLOAD_FAIL,message:Yp});o.setError(m,!0,c.getNetworkType()).end(),Ki.warn(\"\".concat(n,\" failed. error:\"),e),403===e.statusCode&&(Ki.warn(\"\".concat(n,\" failed. cos AccessKeyId was invalid, regain auth key!\")),t._getAuthorizationKey()),i(m)}))}))}},{key:\"_uploadWithPreSigUrl\",value:function(e){var t=this,n=\"\".concat(this._className,\"._uploadWithPreSigUrl\"),o=ai?e.file:e.file.files[0];return this._createCosOptionsPreSigUrl(e).then((function(e){return new Promise((function(r,a){var s=new jd(rg);Ki.time(Ld),t._cosUploadMethod(e,(function(e,i){var u=Object.create(null);if(e||403===i.statusCode){var c=new am({code:Tp.MESSAGE_FILE_UPLOAD_FAIL,message:Yp});return s.setError(c,!0,t.getNetworkType()).end(),Ki.log(\"\".concat(n,\" failed, error:\"),e),void a(c)}var l=i.data.location||\"\";0!==l.indexOf(\"https://\")&&0!==l.indexOf(\"http://\")||(l=l.split(\"//\")[1]),u.fileName=o.name,u.fileSize=o.size,u.fileType=o.type.slice(o.type.indexOf(\"/\")+1).toLowerCase(),u.location=l;var p=Ki.timeEnd(Ld),d=t._formatFileSize(o.size),g=t._formatSpeed(1e3*o.size/p),h=\"size:\".concat(d,\",time:\").concat(p,\"ms,speed:\").concat(g);Ki.log(\"\".concat(n,\" success name:\").concat(o.name,\",\").concat(h)),s.setNetworkType(t.getNetworkType()).setMessage(h).end();var f=t.getModule(ll);f.addCost(Fd,p),f.addFileSize(Fd,o.size),r(u)}))}))}))}},{key:\"_formatFileSize\",value:function(e){return e<1024?e+\"B\":e<1048576?Math.floor(e/1024)+\"KB\":Math.floor(e/1048576)+\"MB\"}},{key:\"_formatSpeed\",value:function(e){return e<=1048576?Au(e/1024,1)+\"KB/s\":Au(e/1048576,1)+\"MB/s\"}},{key:\"_createCosOptionsWeb\",value:function(e){var t=this.getMyUserID(),n=this._genFileName(t,e.to,e.file.files[0].name);return{files:[{Bucket:\"\".concat(this.bucketName,\"-\").concat(this.appid),Region:this.region,Key:\"\".concat(this.directory,\"/\").concat(n),Body:e.file.files[0]}],SliceSize:1048576,onProgress:function(t){if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Ki.warn(\"onProgress callback error:\",n)}},onFileFinish:function(e,t,n){}}}},{key:\"_createCosOptionsWXMiniApp\",value:function(e){var t=this.getMyUserID(),n=this._genFileName(t,e.to,e.file.name),o=e.file.url;return{Bucket:\"\".concat(this.bucketName,\"-\").concat(this.appid),Region:this.region,Key:\"\".concat(this.directory,\"/\").concat(n),FilePath:o,onProgress:function(t){if(Ki.log(JSON.stringify(t)),\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Ki.warn(\"onProgress callback error:\",n)}}}}},{key:\"_createCosOptionsPreSigUrl\",value:function(e){var t=this,n=\"\",o=\"\",r=0;return ai?(n=this._genFileName(e.file.name),o=e.file.url,r=1):(n=this._genFileName(\"\".concat(iu(999999))),o=e.file.files[0],r=0),this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:n,uploadMethod:r,duration:this.duration}).then((function(r){var a=r.uploadUrl,s=r.downloadUrl;return{url:a,fileType:t.uploadFileType,fileName:n,resources:o,downloadUrl:s,onProgress:function(t){if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Ki.warn(\"onProgress callback error:\",n),Ki.error(n)}}}}))}},{key:\"_genFileName\",value:function(e){return\"\".concat(Tu(),\"-\").concat(e)}},{key:\"_setUploadFileType\",value:function(e){this.uploadFileType=e}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\"))}}]),r}(pl),Cv=[\"downloadKey\",\"pbDownloadKey\",\"messageList\"],Av=function(){function e(t){o(this,e),this._className=\"MergerMessageHandler\",this._messageModule=t}return a(e,[{key:\"uploadMergerMessage\",value:function(e,t){var n=this;Ki.debug(\"\".concat(this._className,\".uploadMergerMessage message:\"),e,\"messageBytes:\".concat(t));var o=e.payload.messageList,r=o.length,a=new jd(hg);return this._messageModule.request({protocolName:vp,requestData:{messageList:o}}).then((function(e){Ki.debug(\"\".concat(n._className,\".uploadMergerMessage ok. response:\"),e.data);var o=e.data,s=o.pbDownloadKey,i=o.downloadKey,u={pbDownloadKey:s,downloadKey:i,messageNumber:r};return a.setNetworkType(n._messageModule.getNetworkType()).setMessage(\"\".concat(r,\"-\").concat(t,\"-\").concat(i)).end(),u})).catch((function(e){throw Ki.warn(\"\".concat(n._className,\".uploadMergerMessage failed. error:\"),e),n._messageModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];a.setError(e,o,r).end()})),e}))}},{key:\"downloadMergerMessage\",value:function(e){var n=this;Ki.debug(\"\".concat(this._className,\".downloadMergerMessage message:\"),e);var o=e.payload.downloadKey,r=new jd(fg);return r.setMessage(\"downloadKey:\".concat(o)),this._messageModule.request({protocolName:Mp,requestData:{downloadKey:o}}).then((function(o){if(Ki.debug(\"\".concat(n._className,\".downloadMergerMessage ok. response:\"),o.data),Qi(e.clearElement)){var a=e.payload,s=(a.downloadKey,a.pbDownloadKey,a.messageList,g(a,Cv));e.clearElement(),e.setElement({type:e.type,content:t({messageList:o.data.messageList},s)})}else{var i=[];o.data.messageList.forEach((function(e){if(!Lu(e)){var t=new W_(e);i.push(t)}})),e.payload.messageList=i,e.payload.downloadKey=\"\",e.payload.pbDownloadKey=\"\"}return r.setNetworkType(n._messageModule.getNetworkType()).end(),e})).catch((function(e){throw Ki.warn(\"\".concat(n._className,\".downloadMergerMessage failed. key:\").concat(o,\" error:\"),e),n._messageModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0],a=n[1];r.setError(e,o,a).end()})),e}))}},{key:\"createMergerMessagePack\",value:function(e,t,n){return e.conversationType===ro.CONV_C2C?this._createC2CMergerMessagePack(e,t,n):this._createGroupMergerMessagePack(e,t,n)}},{key:\"_createC2CMergerMessagePack\",value:function(e,t,n){var o=null;t&&(t.offlinePushInfo&&(o=t.offlinePushInfo),!0===t.onlineUserOnly&&(o?o.disablePush=!0:o={disablePush:!0}));var r=\"\";$i(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var a=n.pbDownloadKey,s=n.downloadKey,i=n.messageNumber,u=e.payload,c=u.title,l=u.abstractList,p=u.compatibleText,d=this._messageModule.getModule($c);return{protocolName:ml,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:a,downloadKey:s,title:c,abstractList:l,compatibleText:p,messageNumber:i}}],cloudCustomData:r,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:d&&d.isOnlineMessage(e,t)?0:void 0,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0}}}},{key:\"_createGroupMergerMessagePack\",value:function(e,t,n){var o=null;t&&t.offlinePushInfo&&(o=t.offlinePushInfo);var r=\"\";$i(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var a=n.pbDownloadKey,s=n.downloadKey,i=n.messageNumber,u=e.payload,c=u.title,l=u.abstractList,p=u.compatibleText,d=this._messageModule.getModule(Yc);return{protocolName:vl,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:a,downloadKey:s,title:c,abstractList:l,compatibleText:p,messageNumber:i}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:r,onlineOnlyFlag:d&&d.isOnlineMessage(e,t)?1:0,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0}}}}]),e}(),kv={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MESSAGE_SEND_FAIL:2100},Nv=[Tp.MESSAGE_ONPROGRESS_FUNCTION_ERROR,Tp.MESSAGE_IMAGE_SELECT_FILE_FIRST,Tp.MESSAGE_IMAGE_TYPES_LIMIT,Tp.MESSAGE_FILE_IS_EMPTY,Tp.MESSAGE_IMAGE_SIZE_LIMIT,Tp.MESSAGE_FILE_SELECT_FILE_FIRST,Tp.MESSAGE_FILE_SIZE_LIMIT,Tp.MESSAGE_VIDEO_SIZE_LIMIT,Tp.MESSAGE_VIDEO_TYPES_LIMIT,Tp.MESSAGE_AUDIO_UPLOAD_FAIL,Tp.MESSAGE_AUDIO_SIZE_LIMIT,Tp.COS_UNDETECTED];var Ov=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"MessageModule\",r._messageOptionsMap=new Map,r._mergerMessageHandler=new Av(h(r)),r}return a(n,[{key:\"createTextMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new Q_(e),o=\"string\"==typeof e.payload?e.payload:e.payload.text,r=new _h({text:o}),a=this._getNickAndAvatarByUserID(t);return n.setElement(r),n.setNickAndAvatar(a),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"createImageMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new Q_(e);if(ai){var o=e.payload.file;if(Hi(o))return void Ki.warn(\"小程序环境下调用 createImageMessage 接口时，payload.file 不支持传入 File 对象\");var r=o.tempFilePaths[0],a={url:r,name:r.slice(r.lastIndexOf(\"/\")+1),size:o.tempFiles&&o.tempFiles[0].size||1,type:r.slice(r.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=a}else if(si)if(Hi(e.payload.file)){var s=e.payload.file;e.payload.file={files:[s]}}else if(zi(e.payload.file)&&\"undefined\"!=typeof uni){var i=e.payload.file.tempFiles[0];e.payload.file={files:[i]}}var u=new b_({imageFormat:C_.IMAGE_FORMAT.UNKNOWN,uuid:this._generateUUID(),file:e.payload.file}),c=this._getNickAndAvatarByUserID(t);return n.setElement(u),n.setNickAndAvatar(c),n.setNameCard(this._getNameCardByGroupID(n)),this._messageOptionsMap.set(n.ID,e),n}},{key:\"createAudioMessage\",value:function(e){if(ai){var t=e.payload.file;if(ai){var n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\"/\")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=n}var o=this.getMyUserID();e.currentUser=o;var r=new Q_(e),a=new P_({second:Math.floor(t.duration/1e3),size:t.fileSize,url:t.tempFilePath,uuid:this._generateUUID()}),s=this._getNickAndAvatarByUserID(o);return r.setElement(a),r.setNickAndAvatar(s),r.setNameCard(this._getNameCardByGroupID(r)),this._messageOptionsMap.set(r.ID,e),r}Ki.warn(\"createAudioMessage 目前只支持小程序环境下发语音消息\")}},{key:\"createVideoMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.payload.file.thumbUrl=\"https://web.sdk.qcloud.com/im/assets/images/transparent.png\",e.payload.file.thumbSize=1668;var n={};if(ai){if(oi)return void Ki.warn(\"createVideoMessage 不支持在支付宝小程序环境下使用\");if(Hi(e.payload.file))return void Ki.warn(\"小程序环境下调用 createVideoMessage 接口时，payload.file 不支持传入 File 对象\");var o=e.payload.file;n.url=o.tempFilePath,n.name=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(\"/\")+1),n.size=o.size,n.second=o.duration,n.type=o.tempFilePath.slice(o.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()}else if(si){if(Hi(e.payload.file)){var r=e.payload.file;e.payload.file.files=[r]}else if(zi(e.payload.file)&&\"undefined\"!=typeof uni){var a=e.payload.file.tempFile;e.payload.file.files=[a]}var s=e.payload.file;n.url=window.URL.createObjectURL(s.files[0]),n.name=s.files[0].name,n.size=s.files[0].size,n.second=s.files[0].duration||0,n.type=s.files[0].type.split(\"/\")[1]}e.payload.file.videoFile=n;var i=new Q_(e),u=new Y_({videoFormat:n.type,videoSecond:Au(n.second,0),videoSize:n.size,remoteVideoUrl:\"\",videoUrl:n.url,videoUUID:this._generateUUID(),thumbUUID:this._generateUUID(),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(\".\")+1).toLowerCase()}),c=this._getNickAndAvatarByUserID(t);return i.setElement(u),i.setNickAndAvatar(c),i.setNameCard(this._getNameCardByGroupID(i)),this._messageOptionsMap.set(i.ID,e),i}},{key:\"createCustomMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new Q_(e),o=new $_({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"createFaceMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=new Q_(e),o=new w_(e.payload),r=this._getNickAndAvatarByUserID(t);return n.setElement(o),n.setNickAndAvatar(r),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:\"createMergerMessage\",value:function(e){var t=this.getMyUserID();e.currentUser=t;var n=this._getNickAndAvatarByUserID(t),o=new Q_(e),r=new J_(e.payload);return o.setElement(r),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),o.setRelayFlag(!0),o}},{key:\"createForwardMessage\",value:function(e){var t=e.to,n=e.conversationType,o=e.priority,r=e.payload,a=this.getMyUserID(),s=this._getNickAndAvatarByUserID(a);if(r.type===ro.MSG_GRP_TIP)return cm(new am({code:Tp.MESSAGE_FORWARD_TYPE_INVALID,message:ed}));var i={to:t,conversationType:n,conversationID:\"\".concat(n).concat(t),priority:o,isPlaceMessage:0,status:Ec.UNSEND,currentUser:a,cloudCustomData:e.cloudCustomData||r.cloudCustomData||\"\"},u=new Q_(i);return u.setElement(r.getElements()[0]),u.setNickAndAvatar(s),u.setNameCard(this._getNameCardByGroupID(r)),u.setRelayFlag(!0),u}},{key:\"downloadMergerMessage\",value:function(e){return this._mergerMessageHandler.downloadMergerMessage(e)}},{key:\"createFileMessage\",value:function(e){if(!ai){if(si)if(Hi(e.payload.file)){var t=e.payload.file;e.payload.file={files:[t]}}else if(zi(e.payload.file)&&\"undefined\"!=typeof uni){var n=e.payload.file.tempFiles[0];e.payload.file={files:[n]}}var o=this.getMyUserID();e.currentUser=o;var r=new Q_(e),a=new j_({uuid:this._generateUUID(),file:e.payload.file}),s=this._getNickAndAvatarByUserID(o);return r.setElement(a),r.setNickAndAvatar(s),r.setNameCard(this._getNameCardByGroupID(r)),this._messageOptionsMap.set(r.ID,e),r}Ki.warn(\"小程序目前不支持选择文件， createFileMessage 接口不可用！\")}},{key:\"_onCannotFindModule\",value:function(){return cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"sendMessageInstance\",value:function(e,t){var n,o=this,r=null;switch(e.conversationType){case ro.CONV_C2C:if(!(r=this.getModule($c)))return this._onCannotFindModule();break;case ro.CONV_GROUP:if(!(r=this.getModule(Yc)))return this._onCannotFindModule();break;default:return cm({code:Tp.MESSAGE_SEND_INVALID_CONVERSATION_TYPE,message:wp})}var a=this.getModule(nl),s=this.getModule(Yc);return a.upload(e).then((function(){o._getSendMessageSpecifiedKey(e)===Ud&&o.getModule(ll).addSuccessCount(Fd);return s.guardForAVChatRoom(e).then((function(){if(!e.isSendable())return cm({code:Tp.MESSAGE_FILE_URL_IS_EMPTY,message:Jp});o._addSendMessageTotalCount(e),n=Date.now();var a=function(e){var t=\"utf-8\";si&&document&&(t=document.charset.toLowerCase());var n,o,r=0;if(o=e.length,\"utf-8\"===t||\"utf8\"===t)for(var a=0;a<o;a++)(n=e.codePointAt(a))<=127?r+=1:n<=2047?r+=2:n<=65535?r+=3:(r+=4,a++);else if(\"utf-16\"===t||\"utf16\"===t)for(var s=0;s<o;s++)(n=e.codePointAt(s))<=65535?r+=2:(r+=4,s++);else r=e.replace(/[^\\\\x00-\\\\xff]/g,\"aa\").length;return r}(JSON.stringify(e));return e.type===ro.MSG_MERGER&&a>7e3?o._mergerMessageHandler.uploadMergerMessage(e,a).then((function(n){var r=o._mergerMessageHandler.createMergerMessagePack(e,t,n);return o.request(r)})):(o.getModule(Jc).setMessageRandom(e),e.conversationType===ro.CONV_C2C||e.conversationType===ro.CONV_GROUP?r.sendMessage(e,t):void 0)})).then((function(a){var s=a.data,i=s.time,u=s.sequence;o._addSendMessageSuccessCount(e,n),o._messageOptionsMap.delete(e.ID);var c=o.getModule(Jc);e.status=Ec.SUCCESS,e.time=i;var l=!1;if(e.conversationType===ro.CONV_GROUP)e.sequence=u,e.generateMessageID(o.getMyUserID());else if(e.conversationType===ro.CONV_C2C){var p=c.getLatestMessageSentByMe(e.conversationID);if(p){var d=p.nick,g=p.avatar;d===e.nick&&g===e.avatar||(l=!0)}}return c.appendToMessageList(e),l&&c.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),r.isOnlineMessage(e,t)?e.setOnlineOnlyFlag(!0):c.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:e.conversationType,subType:e.conversationSubType,lastMessage:e}]}),e.getRelayFlag()||\"TIMImageElem\"!==e.type||Eu(e.payload.imageInfoArray),Z_({message:e})}))})).catch((function(t){return o._onSendMessageFailed(e,t)}))}},{key:\"_onSendMessageFailed\",value:function(e,t){e.status=Ec.FAIL,this.getModule(Jc).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new jd(ag);return n.setMessage(\"tjg_id:\".concat(this.generateTjgID(e),\" type:\").concat(e.type,\" from:\").concat(e.from,\" to:\").concat(e.to)),this.probeNetwork().then((function(e){var o=m(e,2),r=o[0],a=o[1];n.setError(t,r,a).end()})),Ki.error(\"\".concat(this._className,\"._onSendMessageFailed error:\"),t),cm(new am({code:t&&t.code?t.code:Tp.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:Rp,data:{message:e}}))}},{key:\"_getSendMessageSpecifiedKey\",value:function(e){if([ro.MSG_IMAGE,ro.MSG_AUDIO,ro.MSG_VIDEO,ro.MSG_FILE].includes(e.type))return Ud;if(e.conversationType===ro.CONV_C2C)return wd;if(e.conversationType===ro.CONV_GROUP){var t=this.getModule(Yc).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return mu(n)?Gd:Pd}}},{key:\"_addSendMessageTotalCount\",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(ll).addTotalCount(t)}},{key:\"_addSendMessageSuccessCount\",value:function(e,t){var n=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){var r=this.getModule(ll);r.addSuccessCount(o),r.addCost(o,n)}}},{key:\"_addSendMessageFailCountOnUser\",value:function(e,t){var n,o,r=t.code,a=void 0===r?-1:r,s=this.getModule(ll),i=this._getSendMessageSpecifiedKey(e);i===Ud&&(n=a,o=!1,Nv.includes(n)&&(o=!0),o)?s.addFailedCountOfUserSide(Fd):function(e){var t=!1;return Object.values(kv).includes(e)&&(t=!0),(e>=120001&&e<=13e4||e>=10100&&e<=10200)&&(t=!0),t}(a)&&i&&s.addFailedCountOfUserSide(i)}},{key:\"resendMessage\",value:function(e){return e.isResend=!0,e.status=Ec.UNSEND,this.sendMessageInstance(e)}},{key:\"revokeMessage\",value:function(e){var t=this,n=null;if(e.conversationType===ro.CONV_C2C){if(!(n=this.getModule($c)))return this._onCannotFindModule()}else if(e.conversationType===ro.CONV_GROUP&&!(n=this.getModule(Yc)))return this._onCannotFindModule();var o=new jd(ug);return o.setMessage(\"tjg_id:\".concat(this.generateTjgID(e),\" type:\").concat(e.type,\" from:\").concat(e.from,\" to:\").concat(e.to)),n.revokeMessage(e).then((function(n){var r=n.data.recallRetList;if(!Lu(r)&&0!==r[0].retCode){var a=new am({code:r[0].retCode,message:rm[r[0].retCode]||Up,data:{message:e}});return o.setCode(a.code).setMoreMessage(a.message).end(),cm(a)}return Ki.info(\"\".concat(t._className,\".revokeMessage ok. ID:\").concat(e.ID)),e.isRevoked=!0,o.end(),t.getModule(Jc).onMessageRevoked([e]),Z_({message:e})})).catch((function(n){t.probeNetwork().then((function(e){var t=m(e,2),r=t[0],a=t[1];o.setError(n,r,a).end()}));var r=new am({code:n&&n.code?n.code:Tp.MESSAGE_REVOKE_FAIL,message:n&&n.message?n.message:Up,data:{message:e}});return Ki.warn(\"\".concat(t._className,\".revokeMessage failed. error:\"),n),cm(r)}))}},{key:\"deleteMessage\",value:function(e){var t=this,n=null,o=e[0],r=o.conversationID,a=\"\",s=[],i=[];if(o.conversationType===ro.CONV_C2C?(n=this.getModule($c),a=r.replace(ro.CONV_C2C,\"\"),e.forEach((function(e){e&&e.status===Ec.SUCCESS&&e.conversationID===r&&(e.getOnlineOnlyFlag()||s.push(\"\".concat(e.sequence,\"_\").concat(e.random,\"_\").concat(e.time)),i.push(e))}))):o.conversationType===ro.CONV_GROUP&&(n=this.getModule(Yc),a=r.replace(ro.CONV_GROUP,\"\"),e.forEach((function(e){e&&e.status===Ec.SUCCESS&&e.conversationID===r&&(e.getOnlineOnlyFlag()||s.push(\"\".concat(e.sequence)),i.push(e))}))),!n)return this._onCannotFindModule();if(0===s.length)return this._onMessageDeleted(i);s.length>30&&(s=s.slice(0,30),i=i.slice(0,30));var u=new jd(cg);return u.setMessage(\"to:\".concat(a,\" count:\").concat(s.length)),n.deleteMessage({to:a,keyList:s}).then((function(e){return u.end(),Ki.info(\"\".concat(t._className,\".deleteMessage ok\")),t._onMessageDeleted(i)})).catch((function(e){t.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];u.setError(e,o,r).end()})),Ki.warn(\"\".concat(t._className,\".deleteMessage failed. error:\"),e);var n=new am({code:e&&e.code?e.code:Tp.MESSAGE_DELETE_FAIL,message:e&&e.message?e.message:Fp});return cm(n)}))}},{key:\"_onMessageDeleted\",value:function(e){return this.getModule(Jc).onMessageDeleted(e),um({messageList:e})}},{key:\"_generateUUID\",value:function(){var e=this.getModule(Xc);return\"\".concat(e.getSDKAppID(),\"-\").concat(e.getUserID(),\"-\").concat(function(){for(var e=\"\",t=32;t>0;--t)e+=uu[Math.floor(Math.random()*cu)];return e}())}},{key:\"getMessageOptionByID\",value:function(e){return this._messageOptionsMap.get(e)}},{key:\"_getNickAndAvatarByUserID\",value:function(e){return this.getModule(jc).getNickAndAvatarByUserID(e)}},{key:\"_getNameCardByGroupID\",value:function(e){if(e.conversationType===ro.CONV_GROUP){var t=this.getModule(Yc);if(t)return t.getMyNameCardByGroupID(e.to)}return\"\"}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._messageOptionsMap.clear()}}]),n}(pl),Lv=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"PluginModule\",r.plugins={},r}return a(n,[{key:\"registerPlugin\",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.plugins[n]=e[n]})),new jd(Xd).setMessage(\"key=\".concat(Object.keys(e))).end()}},{key:\"getPlugin\",value:function(e){return this.plugins[e]}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\"))}}]),n}(pl),Rv=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"SyncUnreadMessageModule\",r._cookie=\"\",r._onlineSyncFlag=!1,r.getInnerEmitterInstance().on(Om.CONTEXT_A2KEY_AND_TINYID_UPDATED,r._onLoginSuccess,h(r)),r}return a(n,[{key:\"_onLoginSuccess\",value:function(e){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:\"_startSync\",value:function(e){var t=this,n=e.cookie,o=e.syncFlag,r=e.isOnlineSync;Ki.log(\"\".concat(this._className,\"._startSync cookie:\").concat(n,\" syncFlag:\").concat(o,\" isOnlineSync:\").concat(r)),this.request({protocolName:fl,requestData:{cookie:n,syncFlag:o,isOnlineSync:r}}).then((function(e){var n=e.data,o=n.cookie,r=n.syncFlag,a=n.eventArray,s=n.messageList,i=n.C2CRemainingUnreadList;if(t._cookie=o,Lu(o));else if(0===r||1===r){if(a)t.getModule(al).onMessage({head:{},body:{eventArray:a,isInstantMessage:t._onlineSyncFlag,isSyncingEnded:!1}});t.getModule($c).onNewC2CMessage({dataList:s,isInstantMessage:!1,C2CRemainingUnreadList:i}),t._startSync({cookie:o,syncFlag:r,isOnlineSync:0})}else if(2===r){if(a)t.getModule(al).onMessage({head:{},body:{eventArray:a,isInstantMessage:t._onlineSyncFlag,isSyncingEnded:!0}});t.getModule($c).onNewC2CMessage({dataList:s,isInstantMessage:t._onlineSyncFlag,C2CRemainingUnreadList:i})}})).catch((function(e){Ki.error(\"\".concat(t._className,\"._startSync failed. error:\"),e)}))}},{key:\"startOnlineSync\",value:function(){Ki.log(\"\".concat(this._className,\".startOnlineSync\")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}},{key:\"startSyncOnReconnected\",value:function(){Ki.log(\"\".concat(this._className,\".startSyncOnReconnected.\")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._onlineSyncFlag=!1,this._cookie=\"\"}}]),n}(pl),bv={request:{toAccount:\"To_Account\",fromAccount:\"From_Account\",to:\"To_Account\",from:\"From_Account\",groupID:\"GroupId\",groupAtUserID:\"GroupAt_Account\",extension:\"Ext\",data:\"Data\",description:\"Desc\",elements:\"MsgBody\",sizeType:\"Type\",downloadFlag:\"Download_Flag\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",videoUrl:\"\",imageUrl:\"URL\",fileUrl:\"Url\",uuid:\"UUID\",priority:\"MsgPriority\",receiverUserID:\"To_Account\",receiverGroupID:\"GroupId\",messageSender:\"SenderId\",messageReceiver:\"ReceiverId\",nick:\"From_AccountNick\",avatar:\"From_AccountHeadurl\",messageNumber:\"MsgNum\",pbDownloadKey:\"PbMsgKey\",downloadKey:\"JsonMsgKey\",applicationType:\"PendencyType\",userIDList:\"To_Account\",groupNameList:\"GroupName\",userID:\"To_Account\",groupAttributeList:\"GroupAttr\",mainSequence:\"AttrMainSeq\",avChatRoomKey:\"BytesKey\",attributeControl:\"AttrControl\",sequence:\"seq\"},response:{MsgPriority:\"priority\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\",Download_Flag:\"downloadFlag\",GroupId:\"groupID\",Member_Account:\"userID\",MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",MsgSeq:\"sequence\",MsgRandom:\"random\",MsgTime:\"time\",MsgTimeStamp:\"time\",MsgContent:\"content\",MsgBody:\"elements\",From_AccountNick:\"nick\",From_AccountHeadurl:\"avatar\",GroupWithdrawInfoArray:\"revokedInfos\",GroupReadInfoArray:\"groupMessageReadNotice\",LastReadMsgSeq:\"lastMessageSeq\",WithdrawC2cMsgNotify:\"c2cMessageRevokedNotify\",C2cWithdrawInfoArray:\"revokedInfos\",C2cReadedReceipt:\"c2cMessageReadReceipt\",ReadC2cMsgNotify:\"c2cMessageReadNotice\",LastReadTime:\"peerReadTime\",MsgRand:\"random\",MsgType:\"type\",MsgShow:\"messageShow\",NextMsgSeq:\"nextMessageSeq\",FaceUrl:\"avatar\",ProfileDataMod:\"profileModify\",Profile_Account:\"userID\",ValueBytes:\"value\",ValueNum:\"value\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgFrom_AccountExtraInfo:\"messageFromAccountExtraInformation\",Operator_Account:\"operatorID\",OpType:\"operationType\",ReportType:\"operationType\",UserId:\"userID\",User_Account:\"userID\",List_Account:\"userIDList\",MsgOperatorMemberExtraInfo:\"operatorInfo\",MsgMemberExtraInfo:\"memberInfoList\",ImageUrl:\"avatar\",NickName:\"nick\",MsgGroupNewInfo:\"newGroupProfile\",MsgAppDefinedData:\"groupCustomField\",Owner_Account:\"ownerID\",GroupFaceUrl:\"avatar\",GroupIntroduction:\"introduction\",GroupNotification:\"notification\",GroupApplyJoinOption:\"joinOption\",MsgKey:\"messageKey\",GroupInfo:\"groupProfile\",ShutupTime:\"muteTime\",Desc:\"description\",Ext:\"extension\",GroupAt_Account:\"groupAtUserID\",MsgNum:\"messageNumber\",PbMsgKey:\"pbDownloadKey\",JsonMsgKey:\"downloadKey\",MsgModifiedFlag:\"isModified\",PendencyItem:\"applicationItem\",PendencyType:\"applicationType\",AddTime:\"time\",AddSource:\"source\",AddWording:\"wording\",ProfileImImage:\"avatar\",PendencyAdd:\"friendApplicationAdded\",FrienPencydDel_Account:\"friendApplicationDeletedUserIDList\",Peer_Account:\"userID\",GroupAttr:\"groupAttributeList\",GroupAttrAry:\"groupAttributeList\",AttrMainSeq:\"mainSequence\",seq:\"sequence\",GroupAttrOption:\"groupAttributeOption\",BytesChangedKeys:\"changedKeyList\",GroupAttrInfo:\"groupAttributeList\",GroupAttrSeq:\"mainSequence\",PushChangedAttrValFlag:\"hasChangedAttributeInfo\",SubKeySeq:\"sequence\",Val:\"value\"},ignoreKeyWord:[\"C2C\",\"ID\",\"USP\"]},wv=Et.trim;function Pv(e,t){if(\"string\"!=typeof e&&!Array.isArray(e))throw new TypeError(\"Expected the input to be `string | string[]`\");t=Object.assign({pascalCase:!1},t);var n;return 0===(e=Array.isArray(e)?e.map((function(e){return e.trim()})).filter((function(e){return e.length})).join(\"-\"):e.trim()).length?\"\":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=Gv(e)),e=e.replace(/^[_.\\\\- ]+/,\"\").toLowerCase().replace(/[_.\\\\- ]+(\\\\w|$)/g,(function(e,t){return t.toUpperCase()})).replace(/\\\\d+(\\\\w|$)/g,(function(e){return e.toUpperCase()})),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)}vt({target:\"String\",proto:!0,forced:function(e){return L((function(){return!!yt[e]()||\"​᠎\"!=\"​᠎\"[e]()||yt[e].name!==e}))}(\"trim\")},{trim:function(){return wv(this)}});var Gv=function(e){for(var t=!1,n=!1,o=!1,r=0;r<e.length;r++){var a=e[r];t&&/[a-zA-Z]/.test(a)&&a.toUpperCase()===a?(e=e.slice(0,r)+\"-\"+e.slice(r),t=!1,o=n,n=!0,r++):n&&o&&/[a-zA-Z]/.test(a)&&a.toLowerCase()===a?(e=e.slice(0,r-1)+\"-\"+e.slice(r-1),o=n,n=!1,t=!0):(t=a.toLowerCase()===a&&a.toUpperCase()!==a,o=n,n=a.toUpperCase()===a&&a.toLowerCase()!==a)}return e};function Uv(e,t){var n=0;return function e(t,o){if(++n>100)return n--,t;if(Wi(t)){var r=t.map((function(t){return Yi(t)?e(t,o):t}));return n--,r}if(Yi(t)){var a=(s=t,i=function(e,t){if(!tu(t))return!1;if((r=t)!==Pv(r))for(var n=0;n<bv.ignoreKeyWord.length&&!t.includes(bv.ignoreKeyWord[n]);n++);var r;return Ji(o[t])?function(e){return\"OPPOChannelID\"===e?e:e[0].toUpperCase()+Pv(e).slice(1)}(t):o[t]},u=Object.create(null),Object.keys(s).forEach((function(e){var t=i(s[e],e);t&&(u[t]=s[e])})),u);return a=Iu(a,(function(t,n){return Wi(t)||Yi(t)?e(t,o):t})),n--,a}var s,i,u}(e,t)}function Fv(e,t){if(Wi(e))return e.map((function(e){return Yi(e)?Fv(e,t):e}));if(Yi(e)){var n=(o=e,r=function(e,n){return Ji(t[n])?Pv(n):t[n]},a={},Object.keys(o).forEach((function(e){a[r(o[e],e)]=o[e]})),a);return n=Iu(n,(function(e){return Wi(e)||Yi(e)?Fv(e,t):e}))}var o,r,a}var qv=function(){function e(t){o(this,e),this._handler=t;var n=t.getURL();this._socket=null,this._id=iu(),ai?oi?(ii.connectSocket({url:n,header:{\"content-type\":\"application/json\"}}),ii.onSocketClose(this._onClose.bind(this)),ii.onSocketOpen(this._onOpen.bind(this)),ii.onSocketMessage(this._onMessage.bind(this)),ii.onSocketError(this._onError.bind(this))):(this._socket=ii.connectSocket({url:n,header:{\"content-type\":\"application/json\"},complete:function(){}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):si&&(this._socket=new WebSocket(n),this._socket.onopen=this._onOpen.bind(this),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this))}return a(e,[{key:\"getID\",value:function(){return this._id}},{key:\"_onOpen\",value:function(){this._handler.onOpen({id:this._id})}},{key:\"_onClose\",value:function(e){this._handler.onClose({id:this._id,e:e})}},{key:\"_onMessage\",value:function(e){this._handler.onMessage(e)}},{key:\"_onError\",value:function(e){this._handler.onError({id:this._id,e:e})}},{key:\"close\",value:function(e){if(oi)return ii.offSocketClose(),ii.offSocketMessage(),ii.offSocketOpen(),ii.offSocketError(),void ii.closeSocket();this._socket&&(ai?(this._socket.onClose((function(){})),this._socket.onOpen((function(){})),this._socket.onMessage((function(){})),this._socket.onError((function(){}))):si&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),ni?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}},{key:\"send\",value:function(e){oi?ii.sendSocketMessage({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):this._socket&&(ai?this._socket.send({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):si&&this._socket.send(e.data))}}]),e}(),xv=4e3,Vv=4001,Kv=[\"keyMap\"],Bv=[\"keyMap\"],Hv=\"connected\",jv=\"connecting\",$v=\"disconnected\",Yv=function(){function e(t){o(this,e),this._channelModule=t,this._className=\"SocketHandler\",this._promiseMap=new Map,this._readyState=$v,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=iu(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url=\"\",this._onOpenTs=0,this._setOverseaHost(),this._initConnection()}return a(e,[{key:\"_setOverseaHost\",value:function(){this._channelModule.isOversea()&&Ws.HOST.setCurrent(zs)}},{key:\"_initConnection\",value:function(){\"\"===this._url?this._url=Ws.HOST.CURRENT.DEFAULT:this._url===Ws.HOST.CURRENT.DEFAULT?this._url=Ws.HOST.CURRENT.BACKUP:this._url===Ws.HOST.CURRENT.BACKUP&&(this._url=Ws.HOST.CURRENT.DEFAULT),this._connect(),this._nextPingTs=0}},{key:\"onCheckTimer\",value:function(e){e%1==0&&this._checkPromiseMap()}},{key:\"_checkPromiseMap\",value:function(){var e=this;0!==this._promiseMap.size&&this._promiseMap.forEach((function(t,n){var o=t.reject,r=t.timestamp;Date.now()-r>=15e3&&(Ki.log(\"\".concat(e._className,\"._checkPromiseMap request timeout, delete requestID:\").concat(n)),e._promiseMap.delete(n),o(new am({code:Tp.NETWORK_TIMEOUT,message:Ed})),e._channelModule.onRequestTimeout(n))}))}},{key:\"onOpen\",value:function(e){this._onOpenTs=Date.now();var t=e.id;this._socketID=t,new jd(Zd).setMessage(n).setMessage(\"socketID:\".concat(t)).end();var n=Date.now()-this._startTs;Ki.log(\"\".concat(this._className,\"._onOpen cost \").concat(n,\" ms. socketID:\").concat(t)),e.id===this._socketID&&(this._readyState=Hv,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._channelModule.onReconnected(),this._reConnectFlag=!1),this._channelModule.onOpen())}},{key:\"onClose\",value:function(e){var t=new jd(eg),n=e.id,o=e.e,r=\"sourceSocketID:\".concat(n,\" currentSocketID:\").concat(this._socketID),a=0;0!==this._onOpenTs&&(a=Date.now()-this._onOpenTs),t.setMessage(a).setMoreMessage(r).setCode(o.code).end(),Ki.log(\"\".concat(this._className,\"._onClose code:\").concat(o.code,\" reason:\").concat(o.reason,\" \").concat(r,\" onlineTime:\").concat(a)),n===this._socketID&&(this._readyState=$v,a<1e3?this._channelModule.onReconnectFailed():this._channelModule.onClose())}},{key:\"onError\",value:function(e){var t=e.id,n=e.e,o=\"sourceSocketID:\".concat(t,\" currentSocketID:\").concat(this._socketID);new jd(tg).setMessage(n.errMsg||au(n)).setMoreMessage(o).setLevel(\"error\").end(),Ki.warn(\"\".concat(this._className,\"._onError\"),n,o),t===this._socketID&&(this._readyState=\"\",this._channelModule.onError())}},{key:\"onMessage\",value:function(e){var t;try{t=JSON.parse(e.data)}catch(_M){new jd(_g).setMessage(e.data).end()}if(t&&t.head){var n=this._getRequestIDFromHead(t.head),o=Cu(t.head),r=Fv(t.body,this._getResponseKeyMap(o));if(Ki.debug(\"\".concat(this._className,\".onMessage ret:\").concat(JSON.stringify(r),\" requestID:\").concat(n,\" has:\").concat(this._promiseMap.has(n))),this._setNextPingTs(),this._promiseMap.has(n)){var a=this._promiseMap.get(n),s=a.resolve,i=a.reject,u=a.timestamp;return this._promiseMap.delete(n),this._calcRTT(u),void(r.errorCode&&0!==r.errorCode?(this._channelModule.onErrorCodeNotZero(r),i(new am({code:r.errorCode,message:r.errorInfo||\"\"}))):s(Z_(r)))}this._channelModule.onMessage({head:t.head,body:r})}}},{key:\"_calcRTT\",value:function(e){var t=Date.now()-e;this._channelModule.getModule(ll).addRTT(t)}},{key:\"_connect\",value:function(){new jd(Qd).setMessage(\"url:\".concat(this.getURL())).end(),Ki.log(\"\".concat(this._className,\"._connect url:\").concat(this.getURL())),this._startTs=Date.now(),this._socket=new qv(this),this._socketID=this._socket.getID(),this._readyState=jv}},{key:\"getURL\",value:function(){var e=this._channelModule.getModule(Xc);return\"\".concat(this._url,\"/info?sdkappid=\").concat(e.getSDKAppID(),\"&instanceid=\").concat(e.getInstanceID(),\"&random=\").concat(this._getRandom())}},{key:\"_closeConnection\",value:function(e){Ki.log(\"\".concat(this._className,\"._closeConnection\")),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=$v)}},{key:\"_resend\",value:function(){var e=this;if(Ki.log(\"\".concat(this._className,\"._resend reConnectFlag:\").concat(this._reConnectFlag),\"promiseMap.size:\".concat(this._promiseMap.size,\" simpleRequestMap.size:\").concat(this._simpleRequestMap.size)),this._promiseMap.size>0&&this._promiseMap.forEach((function(t,n){var o=t.uplinkData,r=t.resolve,a=t.reject;e._promiseMap.set(n,{resolve:r,reject:a,timestamp:Date.now(),uplinkData:o}),e._execute(n,o)})),this._simpleRequestMap.size>0){var t,n=D(this._simpleRequestMap);try{for(n.s();!(t=n.n()).done;){var o=m(t.value,2),r=o[0],a=o[1];this._execute(r,a)}}catch(s){n.e(s)}finally{n.f()}this._simpleRequestMap.clear()}}},{key:\"send\",value:function(e){var t=this;e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3);e.keyMap;var n=g(e,Kv),o=this._getRequestIDFromHead(e.head),r=JSON.stringify(n);return new Promise((function(e,a){(t._promiseMap.set(o,{resolve:e,reject:a,timestamp:Date.now(),uplinkData:r}),Ki.debug(\"\".concat(t._className,\".send uplinkData:\").concat(JSON.stringify(n),\" requestID:\").concat(o,\" readyState:\").concat(t._readyState)),t._readyState!==Hv)?t._reConnect():(t._execute(o,r),t._channelModule.getModule(ll).addRequestCount())}))}},{key:\"simplySend\",value:function(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3);e.keyMap;var t=g(e,Bv),n=this._getRequestIDFromHead(e.head),o=JSON.stringify(t);this._readyState!==Hv?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(n,o):Ki.log(\"\".concat(this._className,\".simplySend. simpleRequestMap is full, drop request!\")),this._reConnect()):this._execute(n,o)}},{key:\"_execute\",value:function(e,t){this._socket.send({data:t,fail:ai?this._onSendFail.bind(this):void 0,requestID:e})}},{key:\"_onSendFail\",value:function(e){Ki.log(\"\".concat(this._className,\"._onSendFail requestID:\").concat(e))}},{key:\"_getSequence\",value:function(){var e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=iu()),e}},{key:\"_getRequestIDFromHead\",value:function(e){return e.servcmd+e.seq}},{key:\"_getResponseKeyMap\",value:function(e){var n=this._channelModule.getKeyMap(e);return t(t({},bv.response),n.response)}},{key:\"_reConnect\",value:function(){this._readyState!==Hv&&this._readyState!==jv&&this.forcedReconnect()}},{key:\"forcedReconnect\",value:function(){var e=this;Ki.log(\"\".concat(this._className,\".forcedReconnect count:\").concat(this._reConnectCount,\" readyState:\").concat(this._readyState)),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(Vv),this._initConnection()):this._channelModule.probeNetwork().then((function(t){var n=m(t,2),o=n[0];n[1];o?(Ki.warn(\"\".concat(e._className,\".forcedReconnect disconnected from wsserver but network is ok, continue...\")),e._reConnectCount=0,e._closeConnection(Vv),e._initConnection()):e._channelModule.onReconnectFailed()}))}},{key:\"getReconnectFlag\",value:function(){return this._reConnectFlag}},{key:\"_setNextPingTs\",value:function(){this._nextPingTs=Date.now()+1e4}},{key:\"getNextPingTs\",value:function(){return this._nextPingTs}},{key:\"isConnected\",value:function(){return this._readyState===Hv}},{key:\"_getRandom\",value:function(){return 0===this._random&&(this._random=Math.random()),this._random}},{key:\"_resetRandom\",value:function(){this._random=0}},{key:\"close\",value:function(){Ki.log(\"\".concat(this._className,\".close\")),this._closeConnection(xv),this._promiseMap.clear(),this._startSequence=iu(),this._readyState=$v,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url=\"\",this._random=0}}]),e}(),zv=function(e){i(n,e);var t=_(n);function n(e){var r;if(o(this,n),(r=t.call(this,e))._className=\"ChannelModule\",r._socketHandler=new Yv(h(r)),r._probing=!1,r._isAppShowing=!0,r._previousState=ro.NET_STATE_CONNECTED,ai&&\"function\"==typeof ii.onAppShow&&\"function\"==typeof ii.onAppHide){var a=r._onAppHide.bind(h(r)),s=r._onAppShow.bind(h(r));\"function\"==typeof ii.offAppHide&&ii.offAppHide(a),\"function\"==typeof ii.offAppShow&&ii.offAppShow(s),ii.onAppHide(a),ii.onAppShow(s)}return r._timerForNotLoggedIn=-1,r._timerForNotLoggedIn=setInterval(r.onCheckTimer.bind(h(r)),1e3),r._fatalErrorFlag=!1,r}return a(n,[{key:\"onCheckTimer\",value:function(e){this._socketHandler&&(this.isLoggedIn()?(this._timerForNotLoggedIn>0&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}},{key:\"onErrorCodeNotZero\",value:function(e){this.getModule(al).onErrorCodeNotZero(e)}},{key:\"onMessage\",value:function(e){this.getModule(al).onMessage(e)}},{key:\"send\",value:function(e){return this._socketHandler?this._previousState!==ro.NET_STATE_CONNECTED&&e.head.servcmd.includes(gp)?this._sendLogViaHTTP(e):this._socketHandler.send(e):Promise.reject()}},{key:\"_sendLogViaHTTP\",value:function(e){return new Promise((function(t,n){var o=\"https://webim.tim.qq.com/v4/imopenstat/tim_web_report_v2?sdkappid=\".concat(e.head.sdkappid,\"&reqtime=\").concat(Date.now()),r=JSON.stringify(e.body),a=\"application/x-www-form-urlencoded;charset=UTF-8\";if(ai)ii.request({url:o,data:r,method:\"POST\",timeout:3e3,header:{\"content-type\":a},success:function(){t()},fail:function(){n(new am({code:Tp.NETWORK_ERROR,message:Dd}))}});else{var s=new XMLHttpRequest,i=setTimeout((function(){s.abort(),n(new am({code:Tp.NETWORK_TIMEOUT,message:Ed}))}),3e3);s.onreadystatechange=function(){4===s.readyState&&(clearTimeout(i),200===s.status||304===s.status?t():n(new am({code:Tp.NETWORK_ERROR,message:Dd})))},s.open(\"POST\",o,!0),s.setRequestHeader(\"Content-type\",a),s.send(r)}}))}},{key:\"simplySend\",value:function(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}},{key:\"onOpen\",value:function(){this._ping()}},{key:\"onClose\",value:function(){this.reConnect()}},{key:\"onError\",value:function(){ai&&Ki.error(\"\".concat(this._className,\".onError 从v2.11.2起，SDK 支持了 WebSocket，如您未添加相关受信域名，请先添加！升级指引: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html\"))}},{key:\"getKeyMap\",value:function(e){return this.getModule(al).getKeyMap(e)}},{key:\"_onAppHide\",value:function(){this._isAppShowing=!1}},{key:\"_onAppShow\",value:function(){this._isAppShowing=!0}},{key:\"onRequestTimeout\",value:function(e){}},{key:\"onReconnected\",value:function(){Ki.log(\"\".concat(this._className,\".onReconnected\")),this.getModule(al).onReconnected(),this._emitNetStateChangeEvent(ro.NET_STATE_CONNECTED)}},{key:\"onReconnectFailed\",value:function(){Ki.log(\"\".concat(this._className,\".onReconnectFailed\")),this._emitNetStateChangeEvent(ro.NET_STATE_DISCONNECTED)}},{key:\"reConnect\",value:function(){if(!this._fatalErrorFlag&&this._socketHandler){var e=this._socketHandler.getReconnectFlag();if(Ki.log(\"\".concat(this._className,\".reConnect previousState:\").concat(this._previousState,\" reconnectFlag:\").concat(e)),this._previousState===ro.NET_STATE_CONNECTING&&e)return;this._socketHandler.forcedReconnect(),this._emitNetStateChangeEvent(ro.NET_STATE_CONNECTING)}}},{key:\"_emitNetStateChangeEvent\",value:function(e){this._previousState!==e&&(this._previousState=e,this.emitOuterEvent(oo.NET_STATE_CHANGE,{state:e}))}},{key:\"_ping\",value:function(){var e=this;if(!0!==this._probing){this._probing=!0;var t=this.getModule(al).getProtocolData({protocolName:hp});this.send(t).then((function(){e._probing=!1})).catch((function(t){if(Ki.warn(\"\".concat(e._className,\"._ping failed. error:\"),t),e._probing=!1,t&&60002===t.code)return new jd(dh).setMessage(\"code:\".concat(t.code,\" message:\").concat(t.message)).setNetworkType(e.getModule(el).getNetworkType()).end(),e._fatalErrorFlag=!0,void e._emitNetStateChangeEvent(ro.NET_STATE_DISCONNECTED);e.probeNetwork().then((function(t){var n=m(t,2),o=n[0],r=n[1];Ki.log(\"\".concat(e._className,\"._ping failed. isAppShowing:\").concat(e._isAppShowing,\" online:\").concat(o,\" networkType:\").concat(r)),o?e.reConnect():e._emitNetStateChangeEvent(ro.NET_STATE_DISCONNECTED)}))}))}}},{key:\"_checkNextPing\",value:function(){this._socketHandler&&(this._socketHandler.isConnected()&&Date.now()>=this._socketHandler.getNextPingTs()&&this._ping())}},{key:\"dealloc\",value:function(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),this._timerForNotLoggedIn>-1&&clearInterval(this._timerForNotLoggedIn)}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._previousState=ro.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3)}}]),n}(pl),Wv=[\"a2\",\"tinyid\"],Jv=[\"a2\",\"tinyid\"],Xv=function(){function e(t){o(this,e),this._className=\"ProtocolHandler\",this._sessionModule=t,this._configMap=new Map,this._fillConfigMap()}return a(e,[{key:\"_fillConfigMap\",value:function(){this._configMap.clear();var e=this._sessionModule.genCommonHead(),n=this._sessionModule.genCosSpecifiedHead(),o=this._sessionModule.genSSOReportHead();this._configMap.set(dl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.IM_OPEN_STATUS,\".\").concat(Ws.CMD.LOGIN)}),body:{state:\"Online\"},keyMap:{response:{TinyId:\"tinyID\",InstId:\"instanceID\",HelloInterval:\"helloInterval\"}}}}(e)),this._configMap.set(gl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.IM_OPEN_STATUS,\".\").concat(Ws.CMD.LOGOUT)}),body:{type:0},keyMap:{request:{type:\"wslogout_type\"}}}}(e)),this._configMap.set(hl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.IM_OPEN_STATUS,\".\").concat(Ws.CMD.HELLO)}),body:{},keyMap:{response:{NewInstInfo:\"newInstanceInfo\"}}}}(e)),this._configMap.set(pp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.IM_COS_SIGN,\".\").concat(Ws.CMD.COS_SIGN)}),body:{cmd:\"open_im_cos_svc\",subCmd:\"get_cos_token\",duration:300,version:2},keyMap:{request:{userSig:\"usersig\",subCmd:\"sub_cmd\",cmd:\"cmd\",duration:\"duration\",version:\"version\"},response:{expired_time:\"expiredTime\",bucket_name:\"bucketName\",session_token:\"sessionToken\",tmp_secret_id:\"secretId\",tmp_secret_key:\"secretKey\"}}}}(n)),this._configMap.set(dp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.CUSTOM_UPLOAD,\".\").concat(Ws.CMD.COS_PRE_SIG)}),body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{request:{userSig:\"usersig\",fileType:\"file_type\",fileName:\"file_name\",uploadMethod:\"upload_method\"},response:{expired_time:\"expiredTime\",request_id:\"requestId\",head_url:\"headUrl\",upload_url:\"uploadUrl\",download_url:\"downloadUrl\",ci_url:\"ciUrl\"}}}}(n)),this._configMap.set(yp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.CLOUD_CONTROL,\".\").concat(Ws.CMD.FETCH_CLOUD_CONTROL_CONFIG)}),body:{SDKAppID:0,version:0},keyMap:{request:{SDKAppID:\"uint32_sdkappid\",version:\"uint64_version\"},response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_json_config:\"cloudControlConfig\",uint32_expired_time:\"expiredTime\",uint32_sdkappid:\"SDKAppID\",uint64_version:\"version\"}}}}(e)),this._configMap.set(Ip,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.CLOUD_CONTROL,\".\").concat(Ws.CMD.PUSHED_CLOUD_CONTROL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_json_config:\"cloudControlConfig\",uint32_expired_time:\"expiredTime\",uint32_sdkappid:\"SDKAppID\",uint64_version:\"version\"}}}}(e)),this._configMap.set(fl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.GET_MESSAGES)}),body:{cookie:\"\",syncFlag:0,needAbstract:1,isOnlineSync:0},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",from:\"From_Account\",to:\"To_Account\",time:\"MsgTimeStamp\",sequence:\"MsgSeq\",random:\"MsgRandom\",elements:\"MsgBody\"},response:{MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",ClientSeq:\"clientSequence\",MsgSeq:\"sequence\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgRandom:\"random\",MsgTimeStamp:\"time\",MsgContent:\"content\",ToGroupId:\"groupID\",MsgKey:\"messageKey\",GroupTips:\"groupTips\",MsgBody:\"elements\",MsgType:\"type\",C2CRemainingUnreadCount:\"C2CRemainingUnreadList\",C2CPairUnreadCount:\"C2CPairUnreadList\"}}}}(e)),this._configMap.set(_l,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.BIG_DATA_HALLWAY_AUTH_KEY)}),body:{}}}(e)),this._configMap.set(ml,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.SEND_MESSAGE)}),body:{fromAccount:\"\",toAccount:\"\",msgTimeStamp:void 0,msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:\"\",avatar:\"\",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:\"\",desc:\"\",ext:\"\",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:\"\"}}},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",data:\"Data\",description:\"Desc\",extension:\"Ext\",type:\"MsgType\",content:\"MsgContent\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",nick:\"From_AccountNick\",avatar:\"From_AccountHeadurl\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",elements:\"MsgBody\",clientSequence:\"ClientSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"}}}}(e)),this._configMap.set(vl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.SEND_GROUP_MESSAGE)}),body:{fromAccount:\"\",groupID:\"\",random:0,clientSequence:0,priority:\"\",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:\"\",desc:\"\",ext:\"\",apnsInfo:{badgeMode:0},androidInfo:{OPPOChannelID:\"\"}},groupAtInfo:[]},keyMap:{request:{to:\"GroupId\",extension:\"Ext\",data:\"Data\",description:\"Desc\",random:\"Random\",sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",type:\"MsgType\",priority:\"MsgPriority\",content:\"MsgContent\",elements:\"MsgBody\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",clientSequence:\"ClientSeq\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"},response:{MsgTime:\"time\",MsgSeq:\"sequence\"}}}}(e)),this._configMap.set(Dl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.REVOKE_C2C_MESSAGE)}),body:{msgInfo:{fromAccount:\"\",toAccount:\"\",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{request:{msgInfo:\"MsgInfo\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\"}}}}(e)),this._configMap.set($l,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.REVOKE_GROUP_MESSAGE)}),body:{to:\"\",msgSeqList:void 0},keyMap:{request:{to:\"GroupId\",msgSeqList:\"MsgSeqList\",msgSeq:\"MsgSeq\"}}}}(e)),this._configMap.set(Cl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.GET_C2C_ROAM_MESSAGES)}),body:{peerAccount:\"\",count:15,lastMessageTime:0,messageKey:\"\",withRecalledMessage:1},keyMap:{request:{messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",withRecalledMessage:\"WithRecalledMsg\"}}}}(e)),this._configMap.set(zl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.GET_GROUP_ROAM_MESSAGES)}),body:{withRecalledMsg:1,groupID:\"\",count:15,sequence:\"\"},keyMap:{request:{sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",withRecalledMessage:\"WithRecalledMsg\"},response:{Random:\"random\",MsgTime:\"time\",MsgSeq:\"sequence\",ReqMsgSeq:\"sequence\",RspMsgList:\"messageList\",IsPlaceMsg:\"isPlaceMessage\",IsSystemMsg:\"isSystemMessage\",ToGroupId:\"to\",EnumFrom_AccountType:\"fromAccountType\",EnumTo_AccountType:\"toAccountType\",GroupCode:\"groupCode\",MsgPriority:\"priority\",MsgBody:\"elements\",MsgType:\"type\",MsgContent:\"content\",IsFinished:\"complete\",Download_Flag:\"downloadFlag\",ClientSeq:\"clientSequence\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\"}}}}(e)),this._configMap.set(El,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.SET_C2C_MESSAGE_READ)}),body:{C2CMsgReaded:void 0},keyMap:{request:{lastMessageTime:\"LastedMsgTime\"}}}}(e)),this._configMap.set(Yl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.SET_GROUP_MESSAGE_READ)}),body:{groupID:void 0,messageReadSeq:void 0},keyMap:{request:{messageReadSeq:\"MsgReadedSeq\"}}}}(e)),this._configMap.set(kl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.DELETE_C2C_MESSAGE)}),body:{fromAccount:\"\",to:\"\",keyList:void 0},keyMap:{request:{keyList:\"MsgKeyList\"}}}}(e)),this._configMap.set(ep,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.DELETE_GROUP_MESSAGE)}),body:{groupID:\"\",deleter:\"\",keyList:void 0},keyMap:{request:{deleter:\"Deleter_Account\",keyList:\"Seqs\"}}}}(e)),this._configMap.set(Al,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.GET_PEER_READ_TIME)}),body:{userIDList:void 0},keyMap:{request:{userIDList:\"To_Account\"},response:{ReadTime:\"peerReadTimeList\"}}}}(e)),this._configMap.set(Ol,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.RECENT_CONTACT,\".\").concat(Ws.CMD.GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,count:0},keyMap:{request:{},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\",C2cPeerReadTime:\"c2cPeerReadTime\"}}}}(e)),this._configMap.set(Nl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.RECENT_CONTACT,\".\").concat(Ws.CMD.PAGING_GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:4,assistFlag:7},keyMap:{request:{messageAssistFlag:\"MsgAssistFlags\",assistFlag:\"AssistFlags\",pinnedTimeStamp:\"TopTimeStamp\",pinnedStartIndex:\"TopStartIndex\"},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\",C2cPeerReadTime:\"c2cPeerReadTime\",LastMsgFlags:\"lastMessageFlag\",TopFlags:\"isPinned\",TopTimeStamp:\"pinnedTimeStamp\",TopStartIndex:\"pinnedStartIndex\"}}}}(e)),this._configMap.set(Ll,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.RECENT_CONTACT,\".\").concat(Ws.CMD.DELETE_CONVERSATION)}),body:{fromAccount:\"\",toAccount:void 0,type:1,toGroupID:void 0},keyMap:{request:{toGroupID:\"ToGroupid\"}}}}(e)),this._configMap.set(Rl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.RECENT_CONTACT,\".\").concat(Ws.CMD.PIN_CONVERSATION)}),body:{fromAccount:\"\",operationType:1,itemList:void 0},keyMap:{request:{itemList:\"RecentContactItem\"}}}}(e)),this._configMap.set(bl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.DELETE_GROUP_AT_TIPS)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(Ml,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.PROFILE,\".\").concat(Ws.CMD.PORTRAIT_GET)}),body:{fromAccount:\"\",userItem:[]},keyMap:{request:{toAccount:\"To_Account\",standardSequence:\"StandardSequence\",customSequence:\"CustomSequence\"}}}}(e)),this._configMap.set(yl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.PROFILE,\".\").concat(Ws.CMD.PORTRAIT_SET)}),body:{fromAccount:\"\",profileItem:[{tag:A_.NICK,value:\"\"},{tag:A_.GENDER,value:\"\"},{tag:A_.ALLOWTYPE,value:\"\"},{tag:A_.AVATAR,value:\"\"}]},keyMap:{request:{toAccount:\"To_Account\",standardSequence:\"StandardSequence\",customSequence:\"CustomSequence\"}}}}(e)),this._configMap.set(Il,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.FRIEND,\".\").concat(Ws.CMD.GET_BLACKLIST)}),body:{fromAccount:\"\",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{response:{CurruentSequence:\"currentSequence\"}}}}(e)),this._configMap.set(Tl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.FRIEND,\".\").concat(Ws.CMD.ADD_BLACKLIST)}),body:{fromAccount:\"\",toAccount:[]}}}(e)),this._configMap.set(Sl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.FRIEND,\".\").concat(Ws.CMD.DELETE_BLACKLIST)}),body:{fromAccount:\"\",toAccount:[]}}}(e)),this._configMap.set(wl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.GET_JOINED_GROUPS)}),body:{memberAccount:\"\",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0}},keyMap:{request:{memberAccount:\"Member_Account\"},response:{GroupIdList:\"groups\",MsgFlag:\"messageRemindType\"}}}}(e)),this._configMap.set(Pl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.GET_GROUP_INFO)}),body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\",\"ShutUpAllMember\"],groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{request:{groupIDList:\"GroupIdList\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\",groupCustomFieldFilter:\"AppDefinedDataFilter_Group\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{GroupIdList:\"groups\",MsgFlag:\"messageRemindType\",AppDefinedData:\"groupCustomField\",AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_Group:\"groupCustomFieldFilter\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",InfoSeq:\"infoSequence\",MemberList:\"members\",GroupInfo:\"groups\",ShutUpUntil:\"muteUntil\",ShutUpAllMember:\"muteAllMembers\",ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(Gl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.CREATE_GROUP)}),body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:\"FaceUrl\"},keyMap:{request:{ownerID:\"Owner_Account\",userID:\"Member_Account\",avatar:\"FaceUrl\",maxMemberNum:\"MaxMemberCount\",joinOption:\"ApplyJoinOption\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\"},response:{HugeGroupFlag:\"avChatRoomFlag\",OverJoinedGroupLimit_Account:\"overLimitUserIDList\"}}}}(e)),this._configMap.set(Ul,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.DESTROY_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(Fl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.MODIFY_GROUP_INFO)}),body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0},keyMap:{request:{maxMemberNum:\"MaxMemberCount\",groupCustomField:\"AppDefinedData\",muteAllMembers:\"ShutUpAllMember\",joinOption:\"ApplyJoinOption\",avatar:\"FaceUrl\"},response:{AppDefinedData:\"groupCustomField\",ShutUpAllMember:\"muteAllMembers\",ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(ql,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:\"ApplyMsg\"},response:{HugeGroupFlag:\"avChatRoomFlag\",AVChatRoomKey:\"avChatRoomKey\"}}}}(e)),this._configMap.set(xl,function(e){e.a2,e.tinyid;return{head:t(t({},g(e,Wv)),{},{servcmd:\"\".concat(Ws.NAME.BIG_GROUP_NO_AUTH,\".\").concat(Ws.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:\"ApplyMsg\"},response:{HugeGroupFlag:\"avChatRoomFlag\"}}}}(e)),this._configMap.set(Vl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.QUIT_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(Kl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.SEARCH_GROUP_BY_ID)}),body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"CreateTime\",\"Owner_Account\",\"LastInfoTime\",\"LastMsgTime\",\"NextMsgSeq\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\"]}},keyMap:{response:{ApplyJoinOption:\"joinOption\"}}}}(e)),this._configMap.set(Bl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.CHANGE_GROUP_OWNER)}),body:{groupID:void 0,newOwnerID:void 0},keyMap:{request:{newOwnerID:\"NewOwner_Account\"}}}}(e)),this._configMap.set(Hl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.HANDLE_APPLY_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{applicant:\"Applicant_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"}}}}(e)),this._configMap.set(jl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.HANDLE_GROUP_INVITATION)}),body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{inviter:\"Inviter_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"}}}}(e)),this._configMap.set(Wl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.GET_GROUP_APPLICATION)}),body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{request:{handleAccount:\"Handle_Account\"}}}}(e)),this._configMap.set(Jl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.DELETE_GROUP_SYSTEM_MESSAGE)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(Xl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.BIG_GROUP_LONG_POLLING,\".\").concat(Ws.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\"}}}}(e)),this._configMap.set(Ql,function(e){e.a2,e.tinyid;return{head:t(t({},g(e,Jv)),{},{servcmd:\"\".concat(Ws.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,\".\").concat(Ws.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\"}}}}(e)),this._configMap.set(Zl,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.GET_ONLINE_MEMBER_NUM)}),body:{groupID:void 0}}}(e)),this._configMap.set(tp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.SET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\",value:\"value\"}}}}(e)),this._configMap.set(np,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.MODIFY_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\",value:\"value\"}}}}(e)),this._configMap.set(op,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.DELETE_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\"}}}}(e)),this._configMap.set(rp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.CLEAR_GROUP_ATTRIBUTES)}),body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]}}}(e)),this._configMap.set(ap,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP_ATTR,\".\").concat(Ws.CMD.GET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{request:{avChatRoomKey:\"Key\",groupType:\"GroupType\"}}}}(e)),this._configMap.set(sp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.GET_GROUP_MEMBER_LIST)}),body:{groupID:void 0,limit:0,offset:0,memberRoleFilter:void 0,memberInfoFilter:[\"Role\",\"NameCard\",\"ShutUpUntil\",\"JoinTime\"],memberCustomFieldFilter:void 0},keyMap:{request:{memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",MemberList:\"members\",ShutUpUntil:\"muteUntil\"}}}}(e)),this._configMap.set(ip,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.GET_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{request:{userIDList:\"Member_List_Account\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{MemberList:\"members\",ShutUpUntil:\"muteUntil\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",AppMemberDefinedData:\"memberCustomField\"}}}}(e)),this._configMap.set(up,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.ADD_GROUP_MEMBER)}),body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{request:{userID:\"Member_Account\",userIDList:\"MemberList\"},response:{MemberList:\"members\"}}}}(e)),this._configMap.set(cp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.DELETE_GROUP_MEMBER)}),body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{request:{userIDList:\"MemberToDel_Account\"}}}}(e)),this._configMap.set(lp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.GROUP,\".\").concat(Ws.CMD.MODIFY_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{request:{userID:\"Member_Account\",memberCustomField:\"AppMemberDefinedData\",muteTime:\"ShutUpTime\",messageRemindType:\"MsgFlag\"}}}}(e)),this._configMap.set(gp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.IM_OPEN_STAT,\".\").concat(Ws.CMD.TIM_WEB_REPORT_V2)}),body:{header:{},event:[],quality:[]},keyMap:{request:{SDKType:\"sdk_type\",SDKVersion:\"sdk_version\",deviceType:\"device_type\",platform:\"platform\",instanceID:\"instance_id\",traceID:\"trace_id\",SDKAppID:\"sdk_app_id\",userID:\"user_id\",tinyID:\"tiny_id\",extension:\"extension\",timestamp:\"timestamp\",networkType:\"network_type\",eventType:\"event_type\",code:\"error_code\",message:\"error_message\",moreMessage:\"more_message\",duplicate:\"duplicate\",costTime:\"cost_time\",level:\"level\",qualityType:\"quality_type\",reportIndex:\"report_index\",wholePeriod:\"whole_period\",totalCount:\"total_count\",rttCount:\"success_count_business\",successRateOfRequest:\"percent_business\",countLessThan1Second:\"success_count_business\",percentOfCountLessThan1Second:\"percent_business\",countLessThan3Second:\"success_count_platform\",percentOfCountLessThan3Second:\"percent_platform\",successCountOfBusiness:\"success_count_business\",successRateOfBusiness:\"percent_business\",successCountOfPlatform:\"success_count_platform\",successRateOfPlatform:\"percent_platform\",successCountOfMessageReceived:\"success_count_business\",successRateOfMessageReceived:\"percent_business\",avgRTT:\"average_value\",avgDelay:\"average_value\",avgValue:\"average_value\"}}}}(o)),this._configMap.set(hp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.HEARTBEAT,\".\").concat(Ws.CMD.ALIVE)}),body:{}}}(e)),this._configMap.set(fp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.IM_OPEN_PUSH,\".\").concat(Ws.CMD.MESSAGE_PUSH)}),body:{},keyMap:{response:{C2cMsgArray:\"C2CMessageArray\",GroupMsgArray:\"groupMessageArray\",GroupTips:\"groupTips\",C2cNotifyMsgArray:\"C2CNotifyMessageArray\",ClientSeq:\"clientSequence\",MsgPriority:\"priority\",NoticeSeq:\"noticeSequence\",MsgContent:\"content\",MsgType:\"type\",MsgBody:\"elements\",ToGroupId:\"to\",Desc:\"description\",Ext:\"extension\",IsSyncMsg:\"isSyncMessage\",Flag:\"needSync\",NeedAck:\"needAck\",PendencyAdd_Account:\"userID\",ProfileImNick:\"nick\",PendencyType:\"applicationType\"}}}}(e)),this._configMap.set(_p,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.OPEN_IM,\".\").concat(Ws.CMD.MESSAGE_PUSH_ACK)}),body:{sessionData:void 0},keyMap:{request:{sessionData:\"SessionData\"}}}}(e)),this._configMap.set(mp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.IM_OPEN_STATUS,\".\").concat(Ws.CMD.STATUS_FORCEOFFLINE)}),body:{},keyMap:{response:{C2cNotifyMsgArray:\"C2CNotifyMessageArray\",NoticeSeq:\"noticeSequence\",KickoutMsgNotify:\"kickoutMsgNotify\",NewInstInfo:\"newInstanceInfo\"}}}}(e)),this._configMap.set(Mp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.IM_LONG_MESSAGE,\".\").concat(Ws.CMD.DOWNLOAD_MERGER_MESSAGE)}),body:{downloadKey:\"\"},keyMap:{response:{Data:\"data\",Desc:\"description\",Ext:\"extension\",Download_Flag:\"downloadFlag\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\"}}}}(e)),this._configMap.set(vp,function(e){return{head:t(t({},e),{},{servcmd:\"\".concat(Ws.NAME.IM_LONG_MESSAGE,\".\").concat(Ws.CMD.UPLOAD_MERGER_MESSAGE)}),body:{messageList:[]},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",type:\"MsgType\",content:\"MsgContent\",data:\"Data\",description:\"Desc\",extension:\"Ext\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",elements:\"MsgBody\",clientSequence:\"ClientSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"}}}}(e))}},{key:\"has\",value:function(e){return this._configMap.has(e)}},{key:\"get\",value:function(e){return this._configMap.get(e)}},{key:\"update\",value:function(){this._fillConfigMap()}},{key:\"getKeyMap\",value:function(e){return this.has(e)?this.get(e).keyMap||{}:(Ki.warn(\"\".concat(this._className,\".getKeyMap unknown protocolName:\").concat(e)),{})}},{key:\"getProtocolData\",value:function(e){var t=e.protocolName,n=e.requestData,o=this.get(t),r=null;if(n){var a=this._simpleDeepCopy(o),s=a.body,i=Object.create(null);for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){if(i[u]=s[u],void 0===n[u])continue;i[u]=n[u]}a.body=i,r=this._getUplinkData(a)}else r=this._getUplinkData(o);return r}},{key:\"_getUplinkData\",value:function(e){var t=this._requestDataCleaner(e),n=Cu(t.head),o=Uv(t.body,this._getRequestKeyMap(n));return t.body=o,t}},{key:\"_getRequestKeyMap\",value:function(e){var n=this.getKeyMap(e);return t(t({},bv.request),n.request)}},{key:\"_requestDataCleaner\",value:function(e){var t=Array.isArray(e)?[]:Object.create(null);for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&tu(o)&&null!==e[o]&&void 0!==e[o]&&(\"object\"!==n(e[o])?t[o]=e[o]:t[o]=this._requestDataCleaner.bind(this)(e[o]));return t}},{key:\"_simpleDeepCopy\",value:function(e){for(var t,n=Object.keys(e),o={},r=0,a=n.length;r<a;r++)t=n[r],Wi(e[t])?o[t]=Array.from(e[t]):Yi(e[t])?o[t]=this._simpleDeepCopy(e[t]):o[t]=e[t];return o}}]),e}(),Qv=[_p],Zv=function(){function e(t){o(this,e),this._sessionModule=t,this._className=\"DownlinkHandler\",this._eventHandlerMap=new Map,this._eventHandlerMap.set(\"C2CMessageArray\",this._c2cMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"groupMessageArray\",this._groupMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"groupTips\",this._groupTipsHandler.bind(this)),this._eventHandlerMap.set(\"C2CNotifyMessageArray\",this._C2CNotifyMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"profileModify\",this._profileHandler.bind(this)),this._eventHandlerMap.set(\"friendListMod\",this._relationChainHandler.bind(this)),this._eventHandlerMap.set(\"recentContactMod\",this._recentContactHandler.bind(this)),this._keys=v(this._eventHandlerMap.keys())}return a(e,[{key:\"_c2cMessageArrayHandler\",value:function(e){var t=this._sessionModule.getModule($c);if(t){if(e.dataList.forEach((function(e){if(1===e.isSyncMessage){var t=e.from;e.from=e.to,e.to=t}})),1===e.needSync)this._sessionModule.getModule(rl).startOnlineSync();t.onNewC2CMessage({dataList:e.dataList,isInstantMessage:!0})}}},{key:\"_groupMessageArrayHandler\",value:function(e){var t=this._sessionModule.getModule(Yc);t&&t.onNewGroupMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}},{key:\"_groupTipsHandler\",value:function(e){var t=this._sessionModule.getModule(Yc);if(t){var n=e.event,o=e.dataList,r=e.isInstantMessage,a=void 0===r||r,s=e.isSyncingEnded;switch(n){case 4:case 6:t.onNewGroupTips({event:n,dataList:o});break;case 5:o.forEach((function(e){Wi(e.elements.revokedInfos)?t.onGroupMessageRevoked({dataList:o}):Wi(e.elements.groupMessageReadNotice)?t.onGroupMessageReadNotice({dataList:o}):t.onNewGroupSystemNotice({dataList:o,isInstantMessage:a,isSyncingEnded:s})}));break;case 12:this._sessionModule.getModule(Jc).onNewGroupAtTips({dataList:o});break;default:Ki.log(\"\".concat(this._className,\"._groupTipsHandler unknown event:\").concat(n,\" dataList:\"),o)}}}},{key:\"_C2CNotifyMessageArrayHandler\",value:function(e){var t=this,n=e.dataList;if(Wi(n)){var o=this._sessionModule.getModule($c);n.forEach((function(e){if(zi(e))if(e.hasOwnProperty(\"kickoutMsgNotify\")){var r=e.kickoutMsgNotify,a=r.kickType,s=r.newInstanceInfo,i=void 0===s?{}:s;1===a?t._sessionModule.onMultipleAccountKickedOut(i):2===a&&t._sessionModule.onMultipleDeviceKickedOut(i)}else e.hasOwnProperty(\"c2cMessageRevokedNotify\")?o&&o.onC2CMessageRevoked({dataList:n}):e.hasOwnProperty(\"c2cMessageReadReceipt\")?o&&o.onC2CMessageReadReceipt({dataList:n}):e.hasOwnProperty(\"c2cMessageReadNotice\")&&o&&o.onC2CMessageReadNotice({dataList:n})}))}}},{key:\"_profileHandler\",value:function(e){this._sessionModule.getModule(jc).onProfileModified({dataList:e.dataList});var t=this._sessionModule.getModule(zc);t&&t.onFriendProfileModified({dataList:e.dataList})}},{key:\"_relationChainHandler\",value:function(e){this._sessionModule.getModule(jc).onRelationChainModified({dataList:e.dataList});var t=this._sessionModule.getModule(zc);t&&t.onRelationChainModified({dataList:e.dataList})}},{key:\"_recentContactHandler\",value:function(e){var t=e.dataList;if(Wi(t)){var n=this._sessionModule.getModule(Jc);n&&t.forEach((function(e){var t=e.pushType,o=e.recentContactTopItem,r=e.recentContactDeleteItem;1===t?n.onConversationDeleted(r.recentContactList):2===t?n.onConversationPinned(o.recentContactList):3===t&&n.onConversationUnpinned(o.recentContactList)}))}}},{key:\"_cloudControlConfigHandler\",value:function(e){this._sessionModule.getModule(ul).onPushedCloudControlConfig(e)}},{key:\"onMessage\",value:function(e){var t=this,n=e.head,o=e.body;if(this._isPushedCloudControlConfig(n))this._cloudControlConfigHandler(o);else{var r=o.eventArray,a=o.isInstantMessage,s=o.isSyncingEnded,i=o.needSync;if(Wi(r))for(var u=null,c=null,l=0,p=0,d=r.length;p<d;p++){l=(u=r[p]).event;var g=Object.keys(u).find((function(e){return-1!==t._keys.indexOf(e)}));g?(c=u[g],this._eventHandlerMap.get(g)({event:l,dataList:c,isInstantMessage:a,isSyncingEnded:s,needSync:i})):Ki.log(\"\".concat(this._className,\".onMessage unknown eventItem:\").concat(u))}}}},{key:\"_isPushedCloudControlConfig\",value:function(e){return e.servcmd&&e.servcmd.includes(Ip)}}]),e}(),eM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"SessionModule\",r._platform=r.getPlatform(),r._protocolHandler=new Xv(h(r)),r._messageDispatcher=new Zv(h(r)),r}return a(n,[{key:\"updateProtocolConfig\",value:function(){this._protocolHandler.update()}},{key:\"request\",value:function(e){Ki.debug(\"\".concat(this._className,\".request options:\"),e);var t=e.protocolName,n=e.tjgID;if(!this._protocolHandler.has(t))return Ki.warn(\"\".concat(this._className,\".request unknown protocol:\").concat(t)),cm({code:Tp.CANNOT_FIND_PROTOCOL,message:kd});var o=this.getProtocolData(e);Lu(n)||(o.head.tjgID=n);var r=this.getModule(sl);return Qv.includes(t)?r.simplySend(o):r.send(o)}},{key:\"getKeyMap\",value:function(e){return this._protocolHandler.getKeyMap(e)}},{key:\"genCommonHead\",value:function(){var e=this.getModule(Xc);return{ver:\"v4\",platform:this._platform,websdkappid:js,websdkversion:Hs,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:2,tjgID:\"\"}}},{key:\"genCosSpecifiedHead\",value:function(){var e=this.getModule(Xc);return{ver:\"v4\",platform:this._platform,websdkappid:js,websdkversion:Hs,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:2}}},{key:\"genSSOReportHead\",value:function(){var e=this.getModule(Xc);return{ver:\"v4\",platform:this._platform,websdkappid:js,websdkversion:Hs,sdkappid:e.getSDKAppID(),contenttype:\"\",reqtime:0,identifier:\"\",usersig:\"\",status_instid:e.getStatusInstanceID(),sdkability:2}}},{key:\"getProtocolData\",value:function(e){return this._protocolHandler.getProtocolData(e)}},{key:\"onErrorCodeNotZero\",value:function(e){var t=e.errorCode;if(t===Tp.HELLO_ANSWER_KICKED_OUT){var n=e.kickType,o=e.newInstanceInfo,r=void 0===o?{}:o;1===n?this.onMultipleAccountKickedOut(r):2===n&&this.onMultipleDeviceKickedOut(r)}t!==Tp.MESSAGE_A2KEY_EXPIRED&&t!==Tp.ACCOUNT_A2KEY_EXPIRED||(this._onUserSigExpired(),this.getModule(sl).reConnect())}},{key:\"onMessage\",value:function(e){var t=e.body,n=t.needAck,o=void 0===n?0:n,r=t.sessionData;1===o&&this._sendACK(r),this._messageDispatcher.onMessage(e)}},{key:\"onReconnected\",value:function(){var e=this;this.isLoggedIn()&&this.request({protocolName:dl}).then((function(t){var n=t.data.instanceID;e.getModule(Xc).setStatusInstanceID(n),Ki.log(\"\".concat(e._className,\".onReconnected, login ok. start to sync unread messages.\")),e.getModule(rl).startSyncOnReconnected(),e.getModule(cl).startPull(),e.getModule(Yc).updateLocalMainSequenceOnReconnected()}))}},{key:\"onMultipleAccountKickedOut\",value:function(e){this.getModule(Bc).onMultipleAccountKickedOut(e)}},{key:\"onMultipleDeviceKickedOut\",value:function(e){this.getModule(Bc).onMultipleDeviceKickedOut(e)}},{key:\"_onUserSigExpired\",value:function(){this.getModule(Bc).onUserSigExpired()}},{key:\"_sendACK\",value:function(e){this.request({protocolName:_p,requestData:{sessionData:e}})}}]),n}(pl),tM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"MessageLossDetectionModule\",r._maybeLostSequencesMap=new Map,r}return a(n,[{key:\"onMessageMaybeLost\",value:function(e,t,n){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);for(var o=this._maybeLostSequencesMap.get(e),r=0;r<n;r++)o.push(t+r);Ki.debug(\"\".concat(this._className,\".onMessageMaybeLost. maybeLostSequences:\").concat(o))}},{key:\"detectMessageLoss\",value:function(e,t){var n=this._maybeLostSequencesMap.get(e);if(!Lu(n)&&!Lu(t)){var o=t.filter((function(e){return-1!==n.indexOf(e)}));if(Ki.debug(\"\".concat(this._className,\".detectMessageLoss. matchedSequences:\").concat(o)),n.length===o.length)Ki.info(\"\".concat(this._className,\".detectMessageLoss no message loss. conversationID:\").concat(e));else{var r,a=n.filter((function(e){return-1===o.indexOf(e)})),s=a.length;s<=5?r=e+\"-\"+a.join(\"-\"):(a.sort((function(e,t){return e-t})),r=e+\" start:\"+a[0]+\" end:\"+a[s-1]+\" count:\"+s),new jd(nh).setMessage(r).setNetworkType(this.getNetworkType()).setLevel(\"warning\").end(),Ki.warn(\"\".concat(this._className,\".detectMessageLoss message loss detected. conversationID:\").concat(e,\" lostSequences:\").concat(a))}n.length=0}}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._maybeLostSequencesMap.clear()}}]),n}(pl),nM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"CloudControlModule\",r._cloudConfig=new Map,r._expiredTime=0,r._version=0,r._isFetching=!1,r}return a(n,[{key:\"getCloudConfig\",value:function(e){return Ji(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}},{key:\"_canFetchConfig\",value:function(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}},{key:\"fetchConfig\",value:function(){var e=this,t=this._canFetchConfig();if(Ki.log(\"\".concat(this._className,\".fetchConfig canFetchConfig:\").concat(t)),t){var n=new jd(lh),o=this.getModule(Xc).getSDKAppID();this._isFetching=!0,this.request({protocolName:yp,requestData:{SDKAppID:o,version:this._version}}).then((function(t){e._isFetching=!1,n.setMessage(\"version:\".concat(e._version,\" newVersion:\").concat(t.data.version,\" config:\").concat(t.data.cloudControlConfig)).setNetworkType(e.getNetworkType()).end(),Ki.log(\"\".concat(e._className,\".fetchConfig ok\")),e._parseCloudControlConfig(t.data)})).catch((function(t){e._isFetching=!1,e.probeNetwork().then((function(e){var o=m(e,2),r=o[0],a=o[1];n.setError(t,r,a).end()})),Ki.log(\"\".concat(e._className,\".fetchConfig failed. error:\"),t),e._setExpiredTimeOnResponseError(12e4)}))}}},{key:\"onPushedCloudControlConfig\",value:function(e){Ki.log(\"\".concat(this._className,\".onPushedCloudControlConfig\")),new jd(ph).setNetworkType(this.getNetworkType()).setMessage(\"newVersion:\".concat(e.version,\" config:\").concat(e.cloudControlConfig)).end(),this._parseCloudControlConfig(e)}},{key:\"onCheckTimer\",value:function(e){this._canFetchConfig()&&this.fetchConfig()}},{key:\"_parseCloudControlConfig\",value:function(e){var t=this,n=\"\".concat(this._className,\"._parseCloudControlConfig\"),o=e.errorCode,r=e.errorMessage,a=e.cloudControlConfig,s=e.version,i=e.expiredTime;if(0===o){if(this._version!==s){var u=null;try{u=JSON.parse(a)}catch(_M){Ki.error(\"\".concat(n,\" JSON parse error:\").concat(a))}u&&(this._cloudConfig.clear(),Object.keys(u).forEach((function(e){t._cloudConfig.set(e,u[e])})),this._version=s,this.emitInnerEvent(Om.CLOUD_CONFIG_UPDATED))}this._expiredTime=Date.now()+1e3*i}else Ji(o)?(Ki.log(\"\".concat(n,\" failed. Invalid message format:\"),e),this._setExpiredTimeOnResponseError(36e5)):(Ki.error(\"\".concat(n,\" errorCode:\").concat(o,\" errorMessage:\").concat(r)),this._setExpiredTimeOnResponseError(12e4))}},{key:\"_setExpiredTimeOnResponseError\",value:function(e){this._expiredTime=Date.now()+e}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}]),n}(pl),oM=function(e){i(n,e);var t=_(n);function n(e){var r;return o(this,n),(r=t.call(this,e))._className=\"PullGroupMessageModule\",r._remoteLastMessageSequenceMap=new Map,r.PULL_LIMIT_COUNT=15,r}return a(n,[{key:\"startPull\",value:function(){var e=this,t=this._getNeedPullConversationList();this._getRemoteLastMessageSequenceList().then((function(){var n=e.getModule(Jc);t.forEach((function(t){var o=t.conversationID,r=o.replace(ro.CONV_GROUP,\"\"),a=n.getGroupLocalLastMessageSequence(o),s=e._remoteLastMessageSequenceMap.get(r)||0,i=s-a;Ki.log(\"\".concat(e._className,\".startPull groupID:\").concat(r,\" localLastMessageSequence:\").concat(a,\" \")+\"remoteLastMessageSequence:\".concat(s,\" diff:\").concat(i)),a>0&&i>=1&&i<300&&e._pullMissingMessage({groupID:r,localLastMessageSequence:a,remoteLastMessageSequence:s,diff:i})}))}))}},{key:\"_getNeedPullConversationList\",value:function(){return this.getModule(Jc).getLocalConversationList().filter((function(e){return e.type===ro.CONV_GROUP&&e.groupProfile.type!==ro.GRP_AVCHATROOM}))}},{key:\"_getRemoteLastMessageSequenceList\",value:function(){var e=this;return this.getModule(Yc).getGroupList().then((function(t){for(var n=t.data.groupList,o=void 0===n?[]:n,r=0;r<o.length;r++){var a=o[r],s=a.groupID,i=a.nextMessageSeq;if(a.type!==ro.GRP_AVCHATROOM){var u=i-1;e._remoteLastMessageSequenceMap.set(s,u)}}}))}},{key:\"_pullMissingMessage\",value:function(e){var t=this,n=e.localLastMessageSequence,o=e.remoteLastMessageSequence,r=e.diff;e.count=r>this.PULL_LIMIT_COUNT?this.PULL_LIMIT_COUNT:r,e.sequence=r>this.PULL_LIMIT_COUNT?n+this.PULL_LIMIT_COUNT:n+r,this._getGroupMissingMessage(e).then((function(a){a.length>0&&(a[0].sequence+1<=o&&(e.localLastMessageSequence=n+t.PULL_LIMIT_COUNT,e.diff=r-t.PULL_LIMIT_COUNT,t._pullMissingMessage(e)),t.getModule(Yc).onNewGroupMessage({dataList:a,isInstantMessage:!1}))}))}},{key:\"_getGroupMissingMessage\",value:function(e){var t=this,n=new jd(Fg);return this.request({protocolName:zl,requestData:{groupID:e.groupID,count:e.count,sequence:e.sequence}}).then((function(o){var r=o.data.messageList,a=void 0===r?[]:r;return n.setNetworkType(t.getNetworkType()).setMessage(\"groupID:\".concat(e.groupID,\" count:\").concat(e.count,\" sequence:\").concat(e.sequence,\" messageList length:\").concat(a.length)).end(),a})).catch((function(e){t.probeNetwork().then((function(t){var o=m(t,2),r=o[0],a=o[1];n.setError(e,r,a).end()}))}))}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._remoteLastMessageSequenceMap.clear()}}]),n}(pl),rM=function(){function e(){o(this,e),this._className=\"AvgE2EDelay\",this._e2eDelayArray=[]}return a(e,[{key:\"addMessageDelay\",value:function(e){var t=Au(e.currentTime/1e3-e.time,2);this._e2eDelayArray.push(t)}},{key:\"_calcAvg\",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),Au(n/t,1)}},{key:\"_calcTotalCount\",value:function(){return this._e2eDelayArray.length}},{key:\"_calcCountWithLimit\",value:function(e){var t=e.e2eDelayArray,n=e.min,o=e.max;return t.filter((function(e){return n<e&&e<=o})).length}},{key:\"_calcPercent\",value:function(e,t){var n=Au(e/t*100,2);return n>100&&(n=100),n}},{key:\"_checkE2EDelayException\",value:function(e,t){var n=e.filter((function(e){return e>t}));if(n.length>0){var o=n.length,r=Math.min.apply(Math,v(n)),a=Math.max.apply(Math,v(n)),s=this._calcAvg(n,o),i=Au(o/e.length*100,2);new jd(mg).setMessage(\"message e2e delay exception. count:\".concat(o,\" min:\").concat(r,\" max:\").concat(a,\" avg:\").concat(s,\" percent:\").concat(i)).setLevel(\"warning\").end()}}},{key:\"getStatResult\",value:function(){var e=this._calcTotalCount();if(0===e)return null;var t=v(this._e2eDelayArray),n=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),o=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),r=this._calcPercent(n,e),a=this._calcPercent(o,e),s=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),this.reset(),{totalCount:e,countLessThan1Second:n,percentOfCountLessThan1Second:r,countLessThan3Second:o,percentOfCountLessThan3Second:a,avgDelay:s}}},{key:\"reset\",value:function(){this._e2eDelayArray.length=0}}]),e}(),aM=function(){function e(){o(this,e),this._className=\"AvgRTT\",this._requestCount=0,this._rttArray=[]}return a(e,[{key:\"addRequestCount\",value:function(){this._requestCount+=1}},{key:\"addRTT\",value:function(e){this._rttArray.push(e)}},{key:\"_calcTotalCount\",value:function(){return this._requestCount}},{key:\"_calcRTTCount\",value:function(e){return e.length}},{key:\"_calcSuccessRateOfRequest\",value:function(e,t){if(0===t)return 0;var n=Au(e/t*100,2);return n>100&&(n=100),n}},{key:\"_calcAvg\",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),parseInt(n/t)}},{key:\"_calcMax\",value:function(){return Math.max.apply(Math,v(this._rttArray))}},{key:\"_calcMin\",value:function(){return Math.min.apply(Math,v(this._rttArray))}},{key:\"getStatResult\",value:function(){var e=this._calcTotalCount(),t=v(this._rttArray);if(0===e)return null;var n=this._calcRTTCount(t),o=this._calcSuccessRateOfRequest(n,e),r=this._calcAvg(t,n);return Ki.log(\"\".concat(this._className,\".getStatResult max:\").concat(this._calcMax(),\" min:\").concat(this._calcMin(),\" avg:\").concat(r)),this.reset(),{totalCount:e,rttCount:n,successRateOfRequest:o,avgRTT:r}}},{key:\"reset\",value:function(){this._requestCount=0,this._rttArray.length=0}}]),e}(),sM=function(){function e(){o(this,e),this._map=new Map}return a(e,[{key:\"initMap\",value:function(e){var t=this;e.forEach((function(e){t._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}))}},{key:\"addTotalCount\",value:function(e){return!(Ji(e)||!this._map.has(e))&&(this._map.get(e).totalCount+=1,!0)}},{key:\"addSuccessCount\",value:function(e){return!(Ji(e)||!this._map.has(e))&&(this._map.get(e).successCount+=1,!0)}},{key:\"addFailedCountOfUserSide\",value:function(e){return!(Ji(e)||!this._map.has(e))&&(this._map.get(e).failedCountOfUserSide+=1,!0)}},{key:\"addCost\",value:function(e,t){return!(Ji(e)||!this._map.has(e))&&(this._map.get(e).costArray.push(t),!0)}},{key:\"addFileSize\",value:function(e,t){return!(Ji(e)||!this._map.has(e))&&(this._map.get(e).fileSizeArray.push(t),!0)}},{key:\"_calcSuccessRateOfBusiness\",value:function(e){if(Ji(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=Au(t.successCount/t.totalCount*100,2);return n>100&&(n=100),n}},{key:\"_calcSuccessRateOfPlatform\",value:function(e){if(Ji(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return(n=Au(n,2))>100&&(n=100),n}},{key:\"_calcTotalCount\",value:function(e){return Ji(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:\"_calcSuccessCountOfBusiness\",value:function(e){return Ji(e)||!this._map.has(e)?-1:this._map.get(e).successCount}},{key:\"_calcSuccessCountOfPlatform\",value:function(e){if(Ji(e)||!this._map.has(e))return-1;var t=this._map.get(e);return t.successCount+t.failedCountOfUserSide}},{key:\"_calcAvg\",value:function(e){return Ji(e)||!this._map.has(e)?-1:e===Fd?this._calcAvgSpeed(e):this._calcAvgCost(e)}},{key:\"_calcAvgCost\",value:function(e){var t=this._map.get(e).costArray.length;if(0===t)return 0;var n=0;return this._map.get(e).costArray.forEach((function(e){n+=e})),parseInt(n/t)}},{key:\"_calcAvgSpeed\",value:function(e){var t=0,n=0;return this._map.get(e).costArray.forEach((function(e){t+=e})),this._map.get(e).fileSizeArray.forEach((function(e){n+=e})),parseInt(1e3*n/t)}},{key:\"getStatResult\",value:function(e){var t=this._calcTotalCount(e);if(0===t)return null;var n=this._calcSuccessCountOfBusiness(e),o=this._calcSuccessRateOfBusiness(e),r=this._calcSuccessCountOfPlatform(e),a=this._calcSuccessRateOfPlatform(e),s=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:n,successRateOfBusiness:o,successCountOfPlatform:r,successRateOfPlatform:a,avgValue:s}}},{key:\"reset\",value:function(e){Ji(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}]),e}(),iM=function(){function e(){o(this,e),this._lastMap=new Map,this._currentMap=new Map}return a(e,[{key:\"initMap\",value:function(e){var t=this;e.forEach((function(e){t._lastMap.set(e,new Map),t._currentMap.set(e,new Map)}))}},{key:\"addMessageSequence\",value:function(e){var t=e.key,n=e.message;if(Ji(t)||!this._lastMap.has(t)||!this._currentMap.has(t))return!1;var o=n.conversationID,r=n.sequence,a=o.replace(ro.CONV_GROUP,\"\");if(0===this._lastMap.get(t).size)this._addCurrentMap(e);else if(this._lastMap.get(t).has(a)){var s=this._lastMap.get(t).get(a),i=s.length-1;r>s[0]&&r<s[i]?(s.push(r),s.sort(),this._lastMap.get(t).set(a,s)):this._addCurrentMap(e)}else this._addCurrentMap(e);return!0}},{key:\"_addCurrentMap\",value:function(e){var t=e.key,n=e.message,o=n.conversationID,r=n.sequence,a=o.replace(ro.CONV_GROUP,\"\");this._currentMap.get(t).has(a)||this._currentMap.get(t).set(a,[]),this._currentMap.get(t).get(a).push(r)}},{key:\"_copyData\",value:function(e){if(!Ji(e)){this._lastMap.set(e,new Map);var t,n=this._lastMap.get(e),o=D(this._currentMap.get(e));try{for(o.s();!(t=o.n()).done;){var r=m(t.value,2),a=r[0],s=r[1];n.set(a,s)}}catch(i){o.e(i)}finally{o.f()}n=null,this._currentMap.set(e,new Map)}}},{key:\"getStatResult\",value:function(e){if(Ji(this._currentMap.get(e))||Ji(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;var t=0,n=0;if(this._lastMap.get(e).forEach((function(e,o){var r=v(e.values()),a=r.length,s=r[a-1]-r[0]+1;t+=s,n+=a})),0===t)return null;var o=Au(n/t*100,2);return o>100&&(o=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:n,successRateOfMessageReceived:o}}},{key:\"reset\",value:function(){this._currentMap.clear(),this._lastMap.clear()}}]),e}(),uM=function(e){i(r,e);var n=_(r);function r(e){var t;o(this,r),(t=n.call(this,e))._className=\"QualityStatModule\",t.TAG=\"im-ssolog-quality-stat\",t.reportIndex=0,t.wholePeriod=!1,t._qualityItems=[Rd,bd,wd,Pd,Gd,Ud,Fd,qd,xd,Vd],t._messageSentItems=[wd,Pd,Gd,Ud,Fd],t._messageReceivedItems=[qd,xd,Vd],t.REPORT_INTERVAL=120,t.REPORT_SDKAPPID_BLACKLIST=[],t.REPORT_TINYID_WHITELIST=[],t._statInfoArr=[],t._avgRTT=new aM,t._avgE2EDelay=new rM,t._rateMessageSent=new sM,t._rateMessageReceived=new iM;var a=t.getInnerEmitterInstance();return a.on(Om.CONTEXT_A2KEY_AND_TINYID_UPDATED,t._onLoginSuccess,h(t)),a.on(Om.CLOUD_CONFIG_UPDATED,t._onCloudConfigUpdated,h(t)),t}return a(r,[{key:\"_onLoginSuccess\",value:function(){var e=this;this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems);var t=this.getModule(Qc),n=t.getItem(this.TAG,!1);!Lu(n)&&Qi(n.forEach)&&(Ki.log(\"\".concat(this._className,\"._onLoginSuccess.get quality stat log in storage, nums=\").concat(n.length)),n.forEach((function(t){e._statInfoArr.push(t)})),t.removeItem(this.TAG,!1))}},{key:\"_onCloudConfigUpdated\",value:function(){var e=this.getCloudConfig(\"q_rpt_interval\"),t=this.getCloudConfig(\"q_rpt_sdkappid_bl\"),n=this.getCloudConfig(\"q_rpt_tinyid_wl\");Ji(e)||(this.REPORT_INTERVAL=Number(e)),Ji(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(\",\").map((function(e){return Number(e)}))),Ji(n)||(this.REPORT_TINYID_WHITELIST=n.split(\",\"))}},{key:\"onCheckTimer\",value:function(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}},{key:\"addRequestCount\",value:function(){this._avgRTT.addRequestCount()}},{key:\"addRTT\",value:function(e){this._avgRTT.addRTT(e)}},{key:\"addMessageDelay\",value:function(e){this._avgE2EDelay.addMessageDelay(e)}},{key:\"addTotalCount\",value:function(e){this._rateMessageSent.addTotalCount(e)||Ki.warn(\"\".concat(this._className,\".addTotalCount invalid key:\"),e)}},{key:\"addSuccessCount\",value:function(e){this._rateMessageSent.addSuccessCount(e)||Ki.warn(\"\".concat(this._className,\".addSuccessCount invalid key:\"),e)}},{key:\"addFailedCountOfUserSide\",value:function(e){this._rateMessageSent.addFailedCountOfUserSide(e)||Ki.warn(\"\".concat(this._className,\".addFailedCountOfUserSide invalid key:\"),e)}},{key:\"addCost\",value:function(e,t){this._rateMessageSent.addCost(e,t)||Ki.warn(\"\".concat(this._className,\".addCost invalid key or cost:\"),e,t)}},{key:\"addFileSize\",value:function(e,t){this._rateMessageSent.addFileSize(e,t)||Ki.warn(\"\".concat(this._className,\".addFileSize invalid key or size:\"),e,t)}},{key:\"addMessageSequence\",value:function(e){this._rateMessageReceived.addMessageSequence(e)||Ki.warn(\"\".concat(this._className,\".addMessageSequence invalid key:\"),e.key)}},{key:\"_getQualityItem\",value:function(e){var n={},o=Hd[this.getNetworkType()];Ji(o)&&(o=8);var r={qualityType:Kd[e],timestamp:Ui(),networkType:o,extension:\"\"};switch(e){case Rd:n=this._avgRTT.getStatResult();break;case bd:n=this._avgE2EDelay.getStatResult();break;case wd:case Pd:case Gd:case Ud:case Fd:n=this._rateMessageSent.getStatResult(e);break;case qd:case xd:case Vd:n=this._rateMessageReceived.getStatResult(e)}return null===n?null:t(t({},r),n)}},{key:\"_report\",value:function(e){var t=this,n=[],o=null;Ji(e)?this._qualityItems.forEach((function(e){null!==(o=t._getQualityItem(e))&&(o.reportIndex=t.reportIndex,o.wholePeriod=t.wholePeriod,n.push(o))})):null!==(o=this._getQualityItem(e))&&(o.reportIndex=this.reportIndex,o.wholePeriod=this.wholePeriod,n.push(o)),Ki.debug(\"\".concat(this._className,\"._report\"),n),this._statInfoArr.length>0&&(n=n.concat(this._statInfoArr),this._statInfoArr=[]);var r=this.getModule(Xc),a=r.getSDKAppID(),s=r.getTinyID();ku(this.REPORT_SDKAPPID_BLACKLIST,a)&&!Nu(this.REPORT_TINYID_WHITELIST,s)&&(n=[]),n.length>0&&this._doReport(n)}},{key:\"_doReport\",value:function(e){var n=this,o={header:vv(this),quality:e};this.request({protocolName:gp,requestData:t({},o)}).then((function(){n.reportIndex++,n.wholePeriod=!1})).catch((function(t){Ki.warn(\"\".concat(n._className,\"._doReport, online:\").concat(n.getNetworkType(),\" error:\"),t),n._statInfoArr=n._statInfoArr.concat(e),n._flushAtOnce()}))}},{key:\"_flushAtOnce\",value:function(){var e=this.getModule(Qc),t=e.getItem(this.TAG,!1),n=this._statInfoArr;if(Lu(t))Ki.log(\"\".concat(this._className,\"._flushAtOnce count:\").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var o=n.concat(t);o.length>10&&(o=o.slice(0,10)),Ki.log(\"\".concat(this.className,\"._flushAtOnce count:\").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}this._statInfoArr=[]}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}]),r}(pl),cM=function(){function e(t){o(this,e);var n=new jd($d);this._className=\"ModuleManager\",this._isReady=!1,this._startLoginTs=0,this._moduleMap=new Map,this._innerEmitter=null,this._outerEmitter=null,this._checkCount=0,this._checkTimer=-1,this._moduleMap.set(Xc,new gv(this,t)),this._moduleMap.set(ul,new nM(this)),this._moduleMap.set(ll,new uM(this)),this._moduleMap.set(sl,new zv(this)),this._moduleMap.set(al,new eM(this)),this._moduleMap.set(Bc,new hv(this)),this._moduleMap.set(Hc,new Ov(this)),this._moduleMap.set(jc,new dv(this)),this._moduleMap.set($c,new lm(this)),this._moduleMap.set(Jc,new $m(this)),this._moduleMap.set(Yc,new sv(this)),this._moduleMap.set(Wc,new uv(this)),this._moduleMap.set(Qc,new _v(this)),this._moduleMap.set(Zc,new Mv(this)),this._moduleMap.set(el,new Tv(this)),this._moduleMap.set(tl,new Dv(this)),this._moduleMap.set(nl,new Ev(this)),this._moduleMap.set(ol,new Lv(this)),this._moduleMap.set(rl,new Rv(this)),this._moduleMap.set(il,new tM(this)),this._moduleMap.set(cl,new oM(this));var r=t.instanceID,a=t.oversea,s=t.SDKAppID,i=\"instanceID:\".concat(r,\" oversea:\").concat(a,\" host:\").concat(Su(),\" \")+\"inBrowser:\".concat(si,\" inMiniApp:\").concat(ai,\" SDKAppID:\").concat(s,\" UserAgent:\").concat(ci);jd.bindEventStatModule(this._moduleMap.get(Zc)),n.setMessage(\"\".concat(i)).end(),Ki.info(\"SDK \".concat(i)),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}return a(e,[{key:\"_startTimer\",value:function(){this._checkTimer<0&&(this._checkTimer=setInterval(this._onCheckTimer.bind(this),1e3))}},{key:\"stopTimer\",value:function(){this._checkTimer>0&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}},{key:\"_onCheckTimer\",value:function(){this._checkCount+=1;var e,t=D(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2)[1];n.onCheckTimer&&n.onCheckTimer(this._checkCount)}}catch(o){t.e(o)}finally{t.f()}}},{key:\"_initReadyList\",value:function(){var e=this;this._readyList=[this._moduleMap.get(Bc),this._moduleMap.get(Jc)],this._readyList.forEach((function(t){t.ready((function(){return e._onModuleReady()}))}))}},{key:\"_onModuleReady\",value:function(){var e=!0;if(this._readyList.forEach((function(t){t.isReady()||(e=!1)})),e&&!this._isReady){this._isReady=!0,this._outerEmitter.emit(oo.SDK_READY);var t=Date.now()-this._startLoginTs;Ki.warn(\"SDK is ready. cost \".concat(t,\" ms\")),this._startLoginTs=Date.now();var n=this._moduleMap.get(el).getNetworkType(),o=this._ssoLogForReady.getStartTs()+Gi;this._ssoLogForReady.setNetworkType(n).setMessage(t).start(o).end()}}},{key:\"login\",value:function(){0===this._startLoginTs&&(Fi(),this._startLoginTs=Date.now(),this._startTimer(),this._moduleMap.get(el).start(),this._ssoLogForReady=new jd(Yd))}},{key:\"onLoginFailed\",value:function(){this._startLoginTs=0}},{key:\"getOuterEmitterInstance\",value:function(){return null===this._outerEmitter&&(this._outerEmitter=new Sv,im(this._outerEmitter),this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(e,t){var n=arguments[0],o=[n,{name:arguments[0],data:arguments[1]}];this._outerEmitter._emit.apply(this._outerEmitter,o)}.bind(this)),this._outerEmitter}},{key:\"getInnerEmitterInstance\",value:function(){return null===this._innerEmitter&&(this._innerEmitter=new Sv,this._innerEmitter._emit=this._innerEmitter.emit,this._innerEmitter.emit=function(e,t){var n;zi(arguments[1])&&arguments[1].data?(Ki.warn(\"inner eventData has data property, please check!\"),n=[e,{name:arguments[0],data:arguments[1].data}]):n=[e,{name:arguments[0],data:arguments[1]}],this._innerEmitter._emit.apply(this._innerEmitter,n)}.bind(this)),this._innerEmitter}},{key:\"hasModule\",value:function(e){return this._moduleMap.has(e)}},{key:\"getModule\",value:function(e){return this._moduleMap.get(e)}},{key:\"isReady\",value:function(){return this._isReady}},{key:\"onError\",value:function(e){Ki.warn(\"Oops! code:\".concat(e.code,\" message:\").concat(e.message)),new jd(dh).setMessage(\"code:\".concat(e.code,\" message:\").concat(e.message)).setNetworkType(this.getModule(el).getNetworkType()).setLevel(\"error\").end(),this.getOuterEmitterInstance().emit(oo.ERROR,e)}},{key:\"reset\",value:function(){Ki.log(\"\".concat(this._className,\".reset\")),Fi();var e,t=D(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2)[1];n.reset&&n.reset()}}catch(o){t.e(o)}finally{t.f()}this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._outerEmitter.emit(oo.SDK_NOT_READY)}}]),e}(),lM=function(){function e(){o(this,e),this._funcMap=new Map}return a(e,[{key:\"defense\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(\"string\"!=typeof e)return null;if(0===e.length)return null;if(\"function\"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var o=null;return this._funcMap.get(e).has(t)?o=this._funcMap.get(e).get(t):(o=this._pack(e,t,n),this._funcMap.get(e).set(t,o)),o}},{key:\"defenseOnce\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return\"function\"!=typeof t?null:this._pack(e,t,n)}},{key:\"find\",value:function(e,t){return\"string\"!=typeof e||0===e.length||\"function\"!=typeof t?null:this._funcMap.has(e)?this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(Ki.log(\"SafetyCallback.find: 找不到 func —— \".concat(e,\"/\").concat(\"\"!==t.name?t.name:\"[anonymous]\")),null):(Ki.log(\"SafetyCallback.find: 找不到 eventName-\".concat(e,\" 对应的 func\")),null)}},{key:\"delete\",value:function(e,t){return\"function\"==typeof t&&(!!this._funcMap.has(e)&&(!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)))}},{key:\"_pack\",value:function(e,t,n){return function(){try{t.apply(n,Array.from(arguments))}catch(s){var o=Object.values(oo).indexOf(e);if(-1!==o){var r=Object.keys(oo)[o];Ki.warn(\"接入侧事件 TIM.EVENT.\".concat(r,\" 对应的回调函数逻辑存在问题，请检查！\"),s)}var a=new jd(ch);a.setMessage(\"eventName:\".concat(e)).setMoreMessage(s.message).end()}}}}]),e}(),pM=function(){function e(t){o(this,e);var n={SDKAppID:t.SDKAppID,unlimitedAVChatRoom:t.unlimitedAVChatRoom||!1,scene:t.scene||\"\",oversea:t.oversea||!1,instanceID:Tu()};this._moduleManager=new cM(n),this._safetyCallbackFactory=new lM}return a(e,[{key:\"isReady\",value:function(){return this._moduleManager.isReady()}},{key:\"onError\",value:function(e){this._moduleManager.onError(e)}},{key:\"login\",value:function(e){return this._moduleManager.login(),this._moduleManager.getModule(Bc).login(e)}},{key:\"logout\",value:function(){var e=this;return this._moduleManager.getModule(Bc).logout().then((function(t){return e._moduleManager.reset(),t}))}},{key:\"destroy\",value:function(){var e=this;return this.logout().finally((function(){e._moduleManager.stopTimer(),e._moduleManager.getModule(sl).dealloc();var t=e._moduleManager.getOuterEmitterInstance(),n=e._moduleManager.getModule(Xc);t.emit(oo.SDK_DESTROY,{SDKAppID:n.getSDKAppID()})}))}},{key:\"on\",value:function(e,t,n){e===oo.GROUP_SYSTEM_NOTICE_RECEIVED&&Ki.warn(\"！！！TIM.EVENT.GROUP_SYSTEM_NOTICE_RECEIVED v2.6.0起弃用，为了更好的体验，请在 TIM.EVENT.MESSAGE_RECEIVED 事件回调内接收处理群系统通知，详细请参考：https://web.sdk.qcloud.com/im/doc/zh-cn/Message.html#.GroupSystemNoticePayload\"),Ki.debug(\"on\",\"eventName:\".concat(e)),this._moduleManager.getOuterEmitterInstance().on(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:\"once\",value:function(e,t,n){Ki.debug(\"once\",\"eventName:\".concat(e)),this._moduleManager.getOuterEmitterInstance().once(e,this._safetyCallbackFactory.defenseOnce(e,t,n),n||this)}},{key:\"off\",value:function(e,t,n,o){Ki.debug(\"off\",\"eventName:\".concat(e));var r=this._safetyCallbackFactory.find(e,t);null!==r&&(this._moduleManager.getOuterEmitterInstance().off(e,r,n,o),this._safetyCallbackFactory.delete(e,t))}},{key:\"registerPlugin\",value:function(e){this._moduleManager.getModule(ol).registerPlugin(e)}},{key:\"setLogLevel\",value:function(e){if(e<=0){console.log([\"\",\" ________  ______  __       __  __       __  ________  _______\",\"|        \\\\\\\\|      \\\\\\\\|  \\\\\\\\     /  \\\\\\\\|  \\\\\\\\  _  |  \\\\\\\\|        \\\\\\\\|       \\\\\\\\\",\" \\\\\\\\$$$$$$$$ \\\\\\\\$$$$$$| $$\\\\\\\\   /  $$| $$ / \\\\\\\\ | $$| $$$$$$$$| $$$$$$$\\\\\\\\\",\"   | $$     | $$  | $$$\\\\\\\\ /  $$$| $$/  $\\\\\\\\| $$| $$__    | $$__/ $$\",\"   | $$     | $$  | $$$$\\\\\\\\  $$$$| $$  $$$\\\\\\\\ $$| $$  \\\\\\\\   | $$    $$\",\"   | $$     | $$  | $$\\\\\\\\$$ $$ $$| $$ $$\\\\\\\\$$\\\\\\\\$$| $$$$$   | $$$$$$$\\\\\\\\\",\"   | $$    _| $$_ | $$ \\\\\\\\$$$| $$| $$$$  \\\\\\\\$$$$| $$_____ | $$__/ $$\",\"   | $$   |   $$ \\\\\\\\| $$  \\\\\\\\$ | $$| $$$    \\\\\\\\$$$| $$     \\\\\\\\| $$    $$\",\"    \\\\\\\\$$    \\\\\\\\$$$$$$ \\\\\\\\$$      \\\\\\\\$$ \\\\\\\\$$      \\\\\\\\$$ \\\\\\\\$$$$$$$$ \\\\\\\\$$$$$$$\",\"\",\"\"].join(\"\\\\n\")),console.log(\"%cIM 智能客服，随时随地解决您的问题 →_→ https://cloud.tencent.com/act/event/smarty-service?from=im-doc\",\"color:#006eff\"),console.log(\"%c从v2.11.2起，SDK 支持了 WebSocket，小程序需要添加受信域名！升级指引: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html\",\"color:#ff0000\");console.log([\"\",\"参考以下文档，会更快解决问题哦！(#^.^#)\\\\n\",\"SDK 更新日志: https://cloud.tencent.com/document/product/269/38492\\\\n\",\"SDK 接口文档: https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html\\\\n\",\"常见问题: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-01-faq.html\\\\n\",\"反馈问题？戳我提 issue: https://github.com/tencentyun/TIMSDK/issues\\\\n\",\"如果您需要在生产环境关闭上面的日志，请 tim.setLogLevel(1)\\\\n\"].join(\"\\\\n\"))}Ki.setLevel(e)}},{key:\"createTextMessage\",value:function(e){return this._moduleManager.getModule(Hc).createTextMessage(e)}},{key:\"createTextAtMessage\",value:function(e){return this._moduleManager.getModule(Hc).createTextMessage(e)}},{key:\"createImageMessage\",value:function(e){return this._moduleManager.getModule(Hc).createImageMessage(e)}},{key:\"createAudioMessage\",value:function(e){return this._moduleManager.getModule(Hc).createAudioMessage(e)}},{key:\"createVideoMessage\",value:function(e){return this._moduleManager.getModule(Hc).createVideoMessage(e)}},{key:\"createCustomMessage\",value:function(e){return this._moduleManager.getModule(Hc).createCustomMessage(e)}},{key:\"createFaceMessage\",value:function(e){return this._moduleManager.getModule(Hc).createFaceMessage(e)}},{key:\"createFileMessage\",value:function(e){return this._moduleManager.getModule(Hc).createFileMessage(e)}},{key:\"createMergerMessage\",value:function(e){return this._moduleManager.getModule(Hc).createMergerMessage(e)}},{key:\"downloadMergerMessage\",value:function(e){return e.type!==ro.MSG_MERGER?cm(new am({code:Tp.MESSAGE_MERGER_TYPE_INVALID,message:Xp})):Lu(e.payload.downloadKey)?cm(new am({code:Tp.MESSAGE_MERGER_KEY_INVALID,message:Qp})):this._moduleManager.getModule(Hc).downloadMergerMessage(e).catch((function(e){return cm(new am({code:Tp.MESSAGE_MERGER_DOWNLOAD_FAIL,message:Zp}))}))}},{key:\"createForwardMessage\",value:function(e){return this._moduleManager.getModule(Hc).createForwardMessage(e)}},{key:\"sendMessage\",value:function(e,t){return e instanceof Q_?this._moduleManager.getModule(Hc).sendMessageInstance(e,t):cm(new am({code:Tp.MESSAGE_SEND_NEED_MESSAGE_INSTANCE,message:bp}))}},{key:\"callExperimentalAPI\",value:function(e,t){return\"handleGroupInvitation\"===e?this._moduleManager.getModule(Yc).handleGroupInvitation(t):cm(new am({code:Tp.INVALID_OPERATION,message:Ad}))}},{key:\"revokeMessage\",value:function(e){return this._moduleManager.getModule(Hc).revokeMessage(e)}},{key:\"resendMessage\",value:function(e){return this._moduleManager.getModule(Hc).resendMessage(e)}},{key:\"deleteMessage\",value:function(e){return this._moduleManager.getModule(Hc).deleteMessage(e)}},{key:\"getMessageList\",value:function(e){return this._moduleManager.getModule(Jc).getMessageList(e)}},{key:\"setMessageRead\",value:function(e){return this._moduleManager.getModule(Jc).setMessageRead(e)}},{key:\"getConversationList\",value:function(){return this._moduleManager.getModule(Jc).getConversationList()}},{key:\"getConversationProfile\",value:function(e){return this._moduleManager.getModule(Jc).getConversationProfile(e)}},{key:\"deleteConversation\",value:function(e){return this._moduleManager.getModule(Jc).deleteConversation(e)}},{key:\"pinConversation\",value:function(e){return this._moduleManager.getModule(Jc).pinConversation(e)}},{key:\"getMyProfile\",value:function(){return this._moduleManager.getModule(jc).getMyProfile()}},{key:\"getUserProfile\",value:function(e){return this._moduleManager.getModule(jc).getUserProfile(e)}},{key:\"updateMyProfile\",value:function(e){return this._moduleManager.getModule(jc).updateMyProfile(e)}},{key:\"getBlacklist\",value:function(){return this._moduleManager.getModule(jc).getLocalBlacklist()}},{key:\"addToBlacklist\",value:function(e){return this._moduleManager.getModule(jc).addBlacklist(e)}},{key:\"removeFromBlacklist\",value:function(e){return this._moduleManager.getModule(jc).deleteBlacklist(e)}},{key:\"getFriendList\",value:function(){var e=this._moduleManager.getModule(zc);return e?e.getLocalFriendList():cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"addFriend\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.addFriend(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"deleteFriend\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.deleteFriend(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"checkFriend\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.checkFriend(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"getFriendProfile\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.getFriendProfile(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"updateFriend\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.updateFriend(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"getFriendApplicationList\",value:function(){var e=this._moduleManager.getModule(zc);return e?e.getLocalFriendApplicationList():cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"acceptFriendApplication\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.acceptFriendApplication(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"refuseFriendApplication\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.refuseFriendApplication(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"deleteFriendApplication\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.deleteFriendApplication(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"setFriendApplicationRead\",value:function(){var e=this._moduleManager.getModule(zc);return e?e.setFriendApplicationRead():cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"getFriendGroupList\",value:function(){var e=this._moduleManager.getModule(zc);return e?e.getLocalFriendGroupList():cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"createFriendGroup\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.createFriendGroup(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"deleteFriendGroup\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.deleteFriendGroup(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"addToFriendGroup\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.addToFriendGroup(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"removeFromFriendGroup\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.removeFromFriendGroup(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"renameFriendGroup\",value:function(e){var t=this._moduleManager.getModule(zc);return t?t.renameFriendGroup(e):cm({code:Tp.CANNOT_FIND_MODULE,message:Nd})}},{key:\"getGroupList\",value:function(e){return this._moduleManager.getModule(Yc).getGroupList(e)}},{key:\"getGroupProfile\",value:function(e){return this._moduleManager.getModule(Yc).getGroupProfile(e)}},{key:\"createGroup\",value:function(e){return this._moduleManager.getModule(Yc).createGroup(e)}},{key:\"dismissGroup\",value:function(e){return this._moduleManager.getModule(Yc).dismissGroup(e)}},{key:\"updateGroupProfile\",value:function(e){return this._moduleManager.getModule(Yc).updateGroupProfile(e)}},{key:\"joinGroup\",value:function(e){return this._moduleManager.getModule(Yc).joinGroup(e)}},{key:\"quitGroup\",value:function(e){return this._moduleManager.getModule(Yc).quitGroup(e)}},{key:\"searchGroupByID\",value:function(e){return this._moduleManager.getModule(Yc).searchGroupByID(e)}},{key:\"getGroupOnlineMemberCount\",value:function(e){return this._moduleManager.getModule(Yc).getGroupOnlineMemberCount(e)}},{key:\"changeGroupOwner\",value:function(e){return this._moduleManager.getModule(Yc).changeGroupOwner(e)}},{key:\"handleGroupApplication\",value:function(e){return this._moduleManager.getModule(Yc).handleGroupApplication(e)}},{key:\"initGroupAttributes\",value:function(e){return this._moduleManager.getModule(Yc).initGroupAttributes(e)}},{key:\"setGroupAttributes\",value:function(e){return this._moduleManager.getModule(Yc).setGroupAttributes(e)}},{key:\"deleteGroupAttributes\",value:function(e){return this._moduleManager.getModule(Yc).deleteGroupAttributes(e)}},{key:\"getGroupAttributes\",value:function(e){return this._moduleManager.getModule(Yc).getGroupAttributes(e)}},{key:\"getGroupMemberList\",value:function(e){return this._moduleManager.getModule(Wc).getGroupMemberList(e)}},{key:\"getGroupMemberProfile\",value:function(e){return this._moduleManager.getModule(Wc).getGroupMemberProfile(e)}},{key:\"addGroupMember\",value:function(e){return this._moduleManager.getModule(Wc).addGroupMember(e)}},{key:\"deleteGroupMember\",value:function(e){return this._moduleManager.getModule(Wc).deleteGroupMember(e)}},{key:\"setGroupMemberMuteTime\",value:function(e){return this._moduleManager.getModule(Wc).setGroupMemberMuteTime(e)}},{key:\"setGroupMemberRole\",value:function(e){return this._moduleManager.getModule(Wc).setGroupMemberRole(e)}},{key:\"setGroupMemberNameCard\",value:function(e){return this._moduleManager.getModule(Wc).setGroupMemberNameCard(e)}},{key:\"setGroupMemberCustomField\",value:function(e){return this._moduleManager.getModule(Wc).setGroupMemberCustomField(e)}},{key:\"setMessageRemindType\",value:function(e){return this._moduleManager.getModule(Wc).setMessageRemindType(e)}}]),e}(),dM={login:\"login\",logout:\"logout\",destroy:\"destroy\",on:\"on\",off:\"off\",ready:\"ready\",setLogLevel:\"setLogLevel\",joinGroup:\"joinGroup\",quitGroup:\"quitGroup\",registerPlugin:\"registerPlugin\",getGroupOnlineMemberCount:\"getGroupOnlineMemberCount\"};function gM(e,t){if(e.isReady()||void 0!==dM[t])return!0;var n=new am({code:Tp.SDK_IS_NOT_READY,message:\"\".concat(t,\" \").concat(Od,\"，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/module-EVENT.html#.SDK_READY\")});return e.onError(n),!1}var hM={},fM={};return fM.create=function(e){var n=0;if(ji(e.SDKAppID))n=e.SDKAppID;else if(Ki.warn(\"TIM.create SDKAppID 的类型应该为 Number，请修改！\"),n=parseInt(e.SDKAppID),isNaN(n))return Ki.error(\"TIM.create failed. 解析 SDKAppID 失败，请检查传参！\"),null;if(n&&hM[n])return hM[n];Ki.log(\"TIM.create\");var o=new pM(t(t({},e),{},{SDKAppID:n}));o.on(oo.SDK_DESTROY,(function(e){hM[e.data.SDKAppID]=null,delete hM[e.data.SDKAppID]}));var r=function(e){var t=Object.create(null);return Object.keys(wc).forEach((function(n){if(e[n]){var o=wc[n],r=new po;t[o]=function(){var t=Array.from(arguments);return r.use((function(t,o){return gM(e,n)?o():cm(new am({code:Tp.SDK_IS_NOT_READY,message:\"\".concat(n,\" \").concat(Od,\"。\")}))})).use((function(e,t){if(!0===Ru(e,bc[n],o))return t()})).use((function(t,o){return e[n].apply(e,t)})),r.run(t)}}})),t}(o);return hM[n]=r,Ki.log(\"TIM.create ok\"),r},fM.TYPES=ro,fM.EVENT=oo,fM.VERSION=\"2.14.0\",Ki.log(\"TIM.VERSION: \".concat(fM.VERSION)),fM}));\\n\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGltLWpzLXNkay90aW0tanMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGltLWpzLXNkay90aW0tanMuanM/ZTIzZSJdLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTooZT1lfHxzZWxmKS5USU09dCgpfSh0aGlzLChmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgbj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihvPW8uZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSkpLG4ucHVzaC5hcHBseShuLG8pfXJldHVybiBufWZ1bmN0aW9uIHQodCl7Zm9yKHZhciBuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl7dmFyIG89bnVsbCE9YXJndW1lbnRzW25dP2FyZ3VtZW50c1tuXTp7fTtuJTI/ZShPYmplY3QobyksITApLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ModCxlLG9bZV0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobykpOmUoT2JqZWN0KG8pKS5mb3JFYWNoKChmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxlKSl9KSl9cmV0dXJuIHR9ZnVuY3Rpb24gbihlKXtyZXR1cm4obj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gcihlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgbz10W25dO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19ZnVuY3Rpb24gYShlLHQsbil7cmV0dXJuIHQmJnIoZS5wcm90b3R5cGUsdCksbiYmcihlLG4pLGV9ZnVuY3Rpb24gcyhlLHQsbil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1uLGV9ZnVuY3Rpb24gaShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmYyhlLHQpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuKHU9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKX0pKGUpfWZ1bmN0aW9uIGMoZSx0KXtyZXR1cm4oYz1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuX19wcm90b19fPXQsZX0pKGUsdCl9ZnVuY3Rpb24gbCgpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm94eSlyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIHAoZSx0LG4pe3JldHVybihwPWwoKT9SZWZsZWN0LmNvbnN0cnVjdDpmdW5jdGlvbihlLHQsbil7dmFyIG89W251bGxdO28ucHVzaC5hcHBseShvLHQpO3ZhciByPW5ldyhGdW5jdGlvbi5iaW5kLmFwcGx5KGUsbykpO3JldHVybiBuJiZjKHIsbi5wcm90b3R5cGUpLHJ9KS5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZChlKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBNYXA/bmV3IE1hcDp2b2lkIDA7cmV0dXJuKGQ9ZnVuY3Rpb24oZSl7aWYobnVsbD09PWV8fChuPWUsLTE9PT1GdW5jdGlvbi50b1N0cmluZy5jYWxsKG4pLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpKSlyZXR1cm4gZTt2YXIgbjtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtpZih2b2lkIDAhPT10KXtpZih0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dC5zZXQoZSxvKX1mdW5jdGlvbiBvKCl7cmV0dXJuIHAoZSxhcmd1bWVudHMsdSh0aGlzKS5jb25zdHJ1Y3Rvcil9cmV0dXJuIG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpvLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGMobyxlKX0pKGUpfWZ1bmN0aW9uIGcoZSx0KXtpZihudWxsPT1lKXJldHVybnt9O3ZhciBuLG8scj1mdW5jdGlvbihlLHQpe2lmKG51bGw9PWUpcmV0dXJue307dmFyIG4sbyxyPXt9LGE9T2JqZWN0LmtleXMoZSk7Zm9yKG89MDtvPGEubGVuZ3RoO28rKyluPWFbb10sdC5pbmRleE9mKG4pPj0wfHwocltuXT1lW25dKTtyZXR1cm4gcn0oZSx0KTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgYT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO2ZvcihvPTA7bzxhLmxlbmd0aDtvKyspbj1hW29dLHQuaW5kZXhPZihuKT49MHx8T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsbikmJihyW25dPWVbbl0pfXJldHVybiByfWZ1bmN0aW9uIGgoZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIGV9ZnVuY3Rpb24gZihlLHQpe3JldHVybiF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9oKGUpOnR9ZnVuY3Rpb24gXyhlKXt2YXIgdD1sKCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG4sbz11KGUpO2lmKHQpe3ZhciByPXUodGhpcykuY29uc3RydWN0b3I7bj1SZWZsZWN0LmNvbnN0cnVjdChvLGFyZ3VtZW50cyxyKX1lbHNlIG49by5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGYodGhpcyxuKX19ZnVuY3Rpb24gbShlLHQpe3JldHVybiBNKGUpfHxmdW5jdGlvbihlLHQpe3ZhciBuPW51bGw9PWU/bnVsbDpcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl18fGVbXCJAQGl0ZXJhdG9yXCJdO2lmKG51bGw9PW4pcmV0dXJuO3ZhciBvLHIsYT1bXSxzPSEwLGk9ITE7dHJ5e2ZvcihuPW4uY2FsbChlKTshKHM9KG89bi5uZXh0KCkpLmRvbmUpJiYoYS5wdXNoKG8udmFsdWUpLCF0fHxhLmxlbmd0aCE9PXQpO3M9ITApO31jYXRjaCh1KXtpPSEwLHI9dX1maW5hbGx5e3RyeXtzfHxudWxsPT1uLnJldHVybnx8bi5yZXR1cm4oKX1maW5hbGx5e2lmKGkpdGhyb3cgcn19cmV0dXJuIGF9KGUsdCl8fEkoZSx0KXx8UygpfWZ1bmN0aW9uIHYoZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIFQoZSl9KGUpfHx5KGUpfHxJKGUpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfSgpfWZ1bmN0aW9uIE0oZSl7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZX1mdW5jdGlvbiB5KGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJm51bGwhPWVbU3ltYm9sLml0ZXJhdG9yXXx8bnVsbCE9ZVtcIkBAaXRlcmF0b3JcIl0pcmV0dXJuIEFycmF5LmZyb20oZSl9ZnVuY3Rpb24gSShlLHQpe2lmKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBUKGUsdCk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO3JldHVyblwiT2JqZWN0XCI9PT1uJiZlLmNvbnN0cnVjdG9yJiYobj1lLmNvbnN0cnVjdG9yLm5hbWUpLFwiTWFwXCI9PT1ufHxcIlNldFwiPT09bj9BcnJheS5mcm9tKGUpOlwiQXJndW1lbnRzXCI9PT1ufHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKT9UKGUsdCk6dm9pZCAwfX1mdW5jdGlvbiBUKGUsdCl7KG51bGw9PXR8fHQ+ZS5sZW5ndGgpJiYodD1lLmxlbmd0aCk7Zm9yKHZhciBuPTAsbz1uZXcgQXJyYXkodCk7bjx0O24rKylvW25dPWVbbl07cmV0dXJuIG99ZnVuY3Rpb24gUygpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9ZnVuY3Rpb24gRChlLHQpe3ZhciBuPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXXx8ZVtcIkBAaXRlcmF0b3JcIl07aWYoIW4pe2lmKEFycmF5LmlzQXJyYXkoZSl8fChuPUkoZSkpfHx0JiZlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpe24mJihlPW4pO3ZhciBvPTAscj1mdW5jdGlvbigpe307cmV0dXJue3M6cixuOmZ1bmN0aW9uKCl7cmV0dXJuIG8+PWUubGVuZ3RoP3tkb25lOiEwfTp7ZG9uZTohMSx2YWx1ZTplW28rK119fSxlOmZ1bmN0aW9uKGUpe3Rocm93IGV9LGY6cn19dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfXZhciBhLHM9ITAsaT0hMTtyZXR1cm57czpmdW5jdGlvbigpe249bi5jYWxsKGUpfSxuOmZ1bmN0aW9uKCl7dmFyIGU9bi5uZXh0KCk7cmV0dXJuIHM9ZS5kb25lLGV9LGU6ZnVuY3Rpb24oZSl7aT0hMCxhPWV9LGY6ZnVuY3Rpb24oKXt0cnl7c3x8bnVsbD09bi5yZXR1cm58fG4ucmV0dXJuKCl9ZmluYWxseXtpZihpKXRocm93IGF9fX19dmFyIEU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIEMoZSx0KXtyZXR1cm4gZSh0PXtleHBvcnRzOnt9fSx0LmV4cG9ydHMpLHQuZXhwb3J0c312YXIgQSxrLE49ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuTWF0aD09TWF0aCYmZX0sTz1OKFwib2JqZWN0XCI9PXR5cGVvZiBnbG9iYWxUaGlzJiZnbG9iYWxUaGlzKXx8TihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cpfHxOKFwib2JqZWN0XCI9PXR5cGVvZiBzZWxmJiZzZWxmKXx8TihcIm9iamVjdFwiPT10eXBlb2YgRSYmRSl8fGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCl8fEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSxMPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaCh0KXtyZXR1cm4hMH19LFI9IUwoKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwxLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KVsxXX0pKSxiPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLHc9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixQPXtmOncmJiFiLmNhbGwoezE6Mn0sMSk/ZnVuY3Rpb24oZSl7dmFyIHQ9dyh0aGlzLGUpO3JldHVybiEhdCYmdC5lbnVtZXJhYmxlfTpifSxHPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fSxVPXt9LnRvU3RyaW5nLEY9ZnVuY3Rpb24oZSl7cmV0dXJuIFUuY2FsbChlKS5zbGljZSg4LC0xKX0scT1cIlwiLnNwbGl0LHg9TCgoZnVuY3Rpb24oKXtyZXR1cm4hT2JqZWN0KFwielwiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKX0pKT9mdW5jdGlvbihlKXtyZXR1cm5cIlN0cmluZ1wiPT1GKGUpP3EuY2FsbChlLFwiXCIpOk9iamVjdChlKX06T2JqZWN0LFY9ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiBcIitlKTtyZXR1cm4gZX0sSz1mdW5jdGlvbihlKXtyZXR1cm4geChWKGUpKX0sQj1mdW5jdGlvbihlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZT9udWxsIT09ZTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlfSxIPWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTp2b2lkIDB9LGo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyP0goT1tlXSk6T1tlXSYmT1tlXVt0XX0sJD1qKFwibmF2aWdhdG9yXCIsXCJ1c2VyQWdlbnRcIil8fFwiXCIsWT1PLnByb2Nlc3Msej1PLkRlbm8sVz1ZJiZZLnZlcnNpb25zfHx6JiZ6LnZlcnNpb24sSj1XJiZXLnY4O0o/az0oQT1KLnNwbGl0KFwiLlwiKSlbMF08ND8xOkFbMF0rQVsxXTokJiYoIShBPSQubWF0Y2goL0VkZ2VcXC8oXFxkKykvKSl8fEFbMV0+PTc0KSYmKEE9JC5tYXRjaCgvQ2hyb21lXFwvKFxcZCspLykpJiYoaz1BWzFdKTt2YXIgWD1rJiYrayxRPSEhT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyYmIUwoKGZ1bmN0aW9uKCl7dmFyIGU9U3ltYm9sKCk7cmV0dXJuIVN0cmluZyhlKXx8IShPYmplY3QoZSlpbnN0YW5jZW9mIFN5bWJvbCl8fCFTeW1ib2wuc2hhbSYmWCYmWDw0MX0pKSxaPVEmJiFTeW1ib2wuc2hhbSYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcixlZT1aP2Z1bmN0aW9uKGUpe3JldHVyblwic3ltYm9sXCI9PXR5cGVvZiBlfTpmdW5jdGlvbihlKXt2YXIgdD1qKFwiU3ltYm9sXCIpO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJk9iamVjdChlKWluc3RhbmNlb2YgdH0sdGU9ZnVuY3Rpb24oZSx0KXt0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KE8sZSx7dmFsdWU6dCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KX1jYXRjaChuKXtPW2VdPXR9cmV0dXJuIHR9LG5lPU9bXCJfX2NvcmUtanNfc2hhcmVkX19cIl18fHRlKFwiX19jb3JlLWpzX3NoYXJlZF9fXCIse30pLG9lPUMoKGZ1bmN0aW9uKGUpeyhlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmVbZV18fChuZVtlXT12b2lkIDAhPT10P3Q6e30pfSkoXCJ2ZXJzaW9uc1wiLFtdKS5wdXNoKHt2ZXJzaW9uOlwiMy4xNi4xXCIsbW9kZTpcImdsb2JhbFwiLGNvcHlyaWdodDpcIsKpIDIwMjEgRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSlcIn0pfSkpLHJlPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QoVihlKSl9LGFlPXt9Lmhhc093blByb3BlcnR5LHNlPU9iamVjdC5oYXNPd258fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFlLmNhbGwocmUoZSksdCl9LGllPTAsdWU9TWF0aC5yYW5kb20oKSxjZT1mdW5jdGlvbihlKXtyZXR1cm5cIlN5bWJvbChcIitTdHJpbmcodm9pZCAwPT09ZT9cIlwiOmUpK1wiKV9cIisoKytpZSt1ZSkudG9TdHJpbmcoMzYpfSxsZT1vZShcIndrc1wiKSxwZT1PLlN5bWJvbCxkZT1aP3BlOnBlJiZwZS53aXRob3V0U2V0dGVyfHxjZSxnZT1mdW5jdGlvbihlKXtyZXR1cm4gc2UobGUsZSkmJihRfHxcInN0cmluZ1wiPT10eXBlb2YgbGVbZV0pfHwoUSYmc2UocGUsZSk/bGVbZV09cGVbZV06bGVbZV09ZGUoXCJTeW1ib2wuXCIrZSkpLGxlW2VdfSxoZT1nZShcInRvUHJpbWl0aXZlXCIpLGZlPWZ1bmN0aW9uKGUsdCl7aWYoIUIoZSl8fGVlKGUpKXJldHVybiBlO3ZhciBuLG89ZVtoZV07aWYodm9pZCAwIT09byl7aWYodm9pZCAwPT09dCYmKHQ9XCJkZWZhdWx0XCIpLG49by5jYWxsKGUsdCksIUIobil8fGVlKG4pKXJldHVybiBuO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX1yZXR1cm4gdm9pZCAwPT09dCYmKHQ9XCJudW1iZXJcIiksZnVuY3Rpb24oZSx0KXt2YXIgbixvO2lmKFwic3RyaW5nXCI9PT10JiZcImZ1bmN0aW9uXCI9PXR5cGVvZihuPWUudG9TdHJpbmcpJiYhQihvPW4uY2FsbChlKSkpcmV0dXJuIG87aWYoXCJmdW5jdGlvblwiPT10eXBlb2Yobj1lLnZhbHVlT2YpJiYhQihvPW4uY2FsbChlKSkpcmV0dXJuIG87aWYoXCJzdHJpbmdcIiE9PXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49ZS50b1N0cmluZykmJiFCKG89bi5jYWxsKGUpKSlyZXR1cm4gbzt0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIil9KGUsdCl9LF9lPWZ1bmN0aW9uKGUpe3ZhciB0PWZlKGUsXCJzdHJpbmdcIik7cmV0dXJuIGVlKHQpP3Q6U3RyaW5nKHQpfSxtZT1PLmRvY3VtZW50LHZlPUIobWUpJiZCKG1lLmNyZWF0ZUVsZW1lbnQpLE1lPWZ1bmN0aW9uKGUpe3JldHVybiB2ZT9tZS5jcmVhdGVFbGVtZW50KGUpOnt9fSx5ZT0hUiYmIUwoKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZShcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pKSxJZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFRlPXtmOlI/SWU6ZnVuY3Rpb24oZSx0KXtpZihlPUsoZSksdD1fZSh0KSx5ZSl0cnl7cmV0dXJuIEllKGUsdCl9Y2F0Y2gobil7fWlmKHNlKGUsdCkpcmV0dXJuIEcoIVAuZi5jYWxsKGUsdCksZVt0XSl9fSxTZT1mdW5jdGlvbihlKXtpZighQihlKSl0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGUpK1wiIGlzIG5vdCBhbiBvYmplY3RcIik7cmV0dXJuIGV9LERlPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxFZT17ZjpSP0RlOmZ1bmN0aW9uKGUsdCxuKXtpZihTZShlKSx0PV9lKHQpLFNlKG4pLHllKXRyeXtyZXR1cm4gRGUoZSx0LG4pfWNhdGNoKG8pe31pZihcImdldFwiaW4gbnx8XCJzZXRcImluIG4pdGhyb3cgVHlwZUVycm9yKFwiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuXCJ2YWx1ZVwiaW4gbiYmKGVbdF09bi52YWx1ZSksZX19LENlPVI/ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBFZS5mKGUsdCxHKDEsbikpfTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGVbdF09bixlfSxBZT1GdW5jdGlvbi50b1N0cmluZztcImZ1bmN0aW9uXCIhPXR5cGVvZiBuZS5pbnNwZWN0U291cmNlJiYobmUuaW5zcGVjdFNvdXJjZT1mdW5jdGlvbihlKXtyZXR1cm4gQWUuY2FsbChlKX0pO3ZhciBrZSxOZSxPZSxMZT1uZS5pbnNwZWN0U291cmNlLFJlPU8uV2Vha01hcCxiZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBSZSYmL25hdGl2ZSBjb2RlLy50ZXN0KExlKFJlKSksd2U9b2UoXCJrZXlzXCIpLFBlPWZ1bmN0aW9uKGUpe3JldHVybiB3ZVtlXXx8KHdlW2VdPWNlKGUpKX0sR2U9e30sVWU9Ty5XZWFrTWFwO2lmKGJlfHxuZS5zdGF0ZSl7dmFyIEZlPW5lLnN0YXRlfHwobmUuc3RhdGU9bmV3IFVlKSxxZT1GZS5nZXQseGU9RmUuaGFzLFZlPUZlLnNldDtrZT1mdW5jdGlvbihlLHQpe2lmKHhlLmNhbGwoRmUsZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBhbHJlYWR5IGluaXRpYWxpemVkXCIpO3JldHVybiB0LmZhY2FkZT1lLFZlLmNhbGwoRmUsZSx0KSx0fSxOZT1mdW5jdGlvbihlKXtyZXR1cm4gcWUuY2FsbChGZSxlKXx8e319LE9lPWZ1bmN0aW9uKGUpe3JldHVybiB4ZS5jYWxsKEZlLGUpfX1lbHNle3ZhciBLZT1QZShcInN0YXRlXCIpO0dlW0tlXT0hMCxrZT1mdW5jdGlvbihlLHQpe2lmKHNlKGUsS2UpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgYWxyZWFkeSBpbml0aWFsaXplZFwiKTtyZXR1cm4gdC5mYWNhZGU9ZSxDZShlLEtlLHQpLHR9LE5lPWZ1bmN0aW9uKGUpe3JldHVybiBzZShlLEtlKT9lW0tlXTp7fX0sT2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHNlKGUsS2UpfX12YXIgQmU9e3NldDprZSxnZXQ6TmUsaGFzOk9lLGVuZm9yY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIE9lKGUpP05lKGUpOmtlKGUse30pfSxnZXR0ZXJGb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuO2lmKCFCKHQpfHwobj1OZSh0KSkudHlwZSE9PWUpdGhyb3cgVHlwZUVycm9yKFwiSW5jb21wYXRpYmxlIHJlY2VpdmVyLCBcIitlK1wiIHJlcXVpcmVkXCIpO3JldHVybiBufX19LEhlPUMoKGZ1bmN0aW9uKGUpe3ZhciB0PUJlLmdldCxuPUJlLmVuZm9yY2Usbz1TdHJpbmcoU3RyaW5nKS5zcGxpdChcIlN0cmluZ1wiKTsoZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGEpe3ZhciBzLGk9ISFhJiYhIWEudW5zYWZlLHU9ISFhJiYhIWEuZW51bWVyYWJsZSxjPSEhYSYmISFhLm5vVGFyZ2V0R2V0O1wiZnVuY3Rpb25cIj09dHlwZW9mIHImJihcInN0cmluZ1wiIT10eXBlb2YgdHx8c2UocixcIm5hbWVcIil8fENlKHIsXCJuYW1lXCIsdCksKHM9bihyKSkuc291cmNlfHwocy5zb3VyY2U9by5qb2luKFwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6XCJcIikpKSxlIT09Tz8oaT8hYyYmZVt0XSYmKHU9ITApOmRlbGV0ZSBlW3RdLHU/ZVt0XT1yOkNlKGUsdCxyKSk6dT9lW3RdPXI6dGUodCxyKX0pKEZ1bmN0aW9uLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsKGZ1bmN0aW9uKCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcyYmdCh0aGlzKS5zb3VyY2V8fExlKHRoaXMpfSkpfSkpLGplPU1hdGguY2VpbCwkZT1NYXRoLmZsb29yLFllPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/JGU6amUpKGUpfSx6ZT1NYXRoLm1pbixXZT1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP3plKFllKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9LEplPU1hdGgubWF4LFhlPU1hdGgubWluLFFlPWZ1bmN0aW9uKGUsdCl7dmFyIG49WWUoZSk7cmV0dXJuIG48MD9KZShuK3QsMCk6WGUobix0KX0sWmU9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixvKXt2YXIgcixhPUsodCkscz1XZShhLmxlbmd0aCksaT1RZShvLHMpO2lmKGUmJm4hPW4pe2Zvcig7cz5pOylpZigocj1hW2krK10pIT1yKXJldHVybiEwfWVsc2UgZm9yKDtzPmk7aSsrKWlmKChlfHxpIGluIGEpJiZhW2ldPT09bilyZXR1cm4gZXx8aXx8MDtyZXR1cm4hZSYmLTF9fSxldD17aW5jbHVkZXM6WmUoITApLGluZGV4T2Y6WmUoITEpfSxudD1ldC5pbmRleE9mLG90PWZ1bmN0aW9uKGUsdCl7dmFyIG4sbz1LKGUpLHI9MCxhPVtdO2ZvcihuIGluIG8pIXNlKEdlLG4pJiZzZShvLG4pJiZhLnB1c2gobik7Zm9yKDt0Lmxlbmd0aD5yOylzZShvLG49dFtyKytdKSYmKH5udChhLG4pfHxhLnB1c2gobikpO3JldHVybiBhfSxydD1bXCJjb25zdHJ1Y3RvclwiLFwiaGFzT3duUHJvcGVydHlcIixcImlzUHJvdG90eXBlT2ZcIixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsXCJ0b0xvY2FsZVN0cmluZ1wiLFwidG9TdHJpbmdcIixcInZhbHVlT2ZcIl0sYXQ9cnQuY29uY2F0KFwibGVuZ3RoXCIsXCJwcm90b3R5cGVcIiksc3Q9e2Y6T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKGUpe3JldHVybiBvdChlLGF0KX19LGl0PXtmOk9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LHV0PWooXCJSZWZsZWN0XCIsXCJvd25LZXlzXCIpfHxmdW5jdGlvbihlKXt2YXIgdD1zdC5mKFNlKGUpKSxuPWl0LmY7cmV0dXJuIG4/dC5jb25jYXQobihlKSk6dH0sY3Q9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49dXQodCksbz1FZS5mLHI9VGUuZixhPTA7YTxuLmxlbmd0aDthKyspe3ZhciBzPW5bYV07c2UoZSxzKXx8byhlLHMscih0LHMpKX19LGx0PS8jfFxcLnByb3RvdHlwZVxcLi8scHQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1ndFtkdChlKV07cmV0dXJuIG49PWZ0fHxuIT1odCYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/TCh0KTohIXQpfSxkdD1wdC5ub3JtYWxpemU9ZnVuY3Rpb24oZSl7cmV0dXJuIFN0cmluZyhlKS5yZXBsYWNlKGx0LFwiLlwiKS50b0xvd2VyQ2FzZSgpfSxndD1wdC5kYXRhPXt9LGh0PXB0Lk5BVElWRT1cIk5cIixmdD1wdC5QT0xZRklMTD1cIlBcIixfdD1wdCxtdD1UZS5mLHZ0PWZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxyLGEscyxpPWUudGFyZ2V0LHU9ZS5nbG9iYWwsYz1lLnN0YXQ7aWYobj11P086Yz9PW2ldfHx0ZShpLHt9KTooT1tpXXx8e30pLnByb3RvdHlwZSlmb3IobyBpbiB0KXtpZihhPXRbb10scj1lLm5vVGFyZ2V0R2V0PyhzPW10KG4sbykpJiZzLnZhbHVlOm5bb10sIV90KHU/bzppKyhjP1wiLlwiOlwiI1wiKStvLGUuZm9yY2VkKSYmdm9pZCAwIT09cil7aWYodHlwZW9mIGE9PXR5cGVvZiByKWNvbnRpbnVlO2N0KGEscil9KGUuc2hhbXx8ciYmci5zaGFtKSYmQ2UoYSxcInNoYW1cIiwhMCksSGUobixvLGEsZSl9fSxNdD1mdW5jdGlvbihlKXtpZihlZShlKSl0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCBhIFN5bWJvbCB2YWx1ZSB0byBhIHN0cmluZ1wiKTtyZXR1cm4gU3RyaW5nKGUpfSx5dD1cIlxcdFxcblxcdlxcZlxcciDCoOGagOKAgOKAgeKAguKAg+KAhOKAheKAhuKAh+KAiOKAieKAiuKAr+KBn+OAgFxcdTIwMjhcXHUyMDI5XFx1ZmVmZlwiLEl0PVwiW1wiK3l0K1wiXVwiLFR0PVJlZ0V4cChcIl5cIitJdCtJdCtcIipcIiksU3Q9UmVnRXhwKEl0K0l0K1wiKiRcIiksRHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPU10KFYodCkpO3JldHVybiAxJmUmJihuPW4ucmVwbGFjZShUdCxcIlwiKSksMiZlJiYobj1uLnJlcGxhY2UoU3QsXCJcIikpLG59fSxFdD17c3RhcnQ6RHQoMSksZW5kOkR0KDIpLHRyaW06RHQoMyl9LEN0PUV0LnRyaW0sQXQ9Ty5wYXJzZUludCxrdD0vXlsrLV0/MFtYeF0vLE50PTghPT1BdCh5dCtcIjA4XCIpfHwyMiE9PUF0KHl0K1wiMHgxNlwiKT9mdW5jdGlvbihlLHQpe3ZhciBuPUN0KE10KGUpKTtyZXR1cm4gQXQobix0Pj4+MHx8KGt0LnRlc3Qobik/MTY6MTApKX06QXQ7dnQoe2dsb2JhbDohMCxmb3JjZWQ6cGFyc2VJbnQhPU50fSx7cGFyc2VJbnQ6TnR9KTt2YXIgT3QsTHQ9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGUpe3JldHVybiBvdChlLHJ0KX0sUnQ9Uj9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbihlLHQpe1NlKGUpO2Zvcih2YXIgbixvPUx0KHQpLHI9by5sZW5ndGgsYT0wO3I+YTspRWUuZihlLG49b1thKytdLHRbbl0pO3JldHVybiBlfSxidD1qKFwiZG9jdW1lbnRcIixcImRvY3VtZW50RWxlbWVudFwiKSx3dD1QZShcIklFX1BST1RPXCIpLFB0PWZ1bmN0aW9uKCl7fSxHdD1mdW5jdGlvbihlKXtyZXR1cm5cIjxzY3JpcHQ+XCIrZStcIjxcXC9zY3JpcHQ+XCJ9LFV0PWZ1bmN0aW9uKGUpe2Uud3JpdGUoR3QoXCJcIikpLGUuY2xvc2UoKTt2YXIgdD1lLnBhcmVudFdpbmRvdy5PYmplY3Q7cmV0dXJuIGU9bnVsbCx0fSxGdD1mdW5jdGlvbigpe3RyeXtPdD1uZXcgQWN0aXZlWE9iamVjdChcImh0bWxmaWxlXCIpfWNhdGNoKHQpe31GdD1kb2N1bWVudC5kb21haW4mJk90P1V0KE90KTpmdW5jdGlvbigpe3ZhciBlLHQ9TWUoXCJpZnJhbWVcIik7aWYodC5zdHlsZSlyZXR1cm4gdC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGJ0LmFwcGVuZENoaWxkKHQpLHQuc3JjPVN0cmluZyhcImphdmFzY3JpcHQ6XCIpLChlPXQuY29udGVudFdpbmRvdy5kb2N1bWVudCkub3BlbigpLGUud3JpdGUoR3QoXCJkb2N1bWVudC5GPU9iamVjdFwiKSksZS5jbG9zZSgpLGUuRn0oKXx8VXQoT3QpO2Zvcih2YXIgZT1ydC5sZW5ndGg7ZS0tOylkZWxldGUgRnQucHJvdG90eXBlW3J0W2VdXTtyZXR1cm4gRnQoKX07R2Vbd3RdPSEwO3ZhciBxdD1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiBudWxsIT09ZT8oUHQucHJvdG90eXBlPVNlKGUpLG49bmV3IFB0LFB0LnByb3RvdHlwZT1udWxsLG5bd3RdPWUpOm49RnQoKSx2b2lkIDA9PT10P246UnQobix0KX07dnQoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsc2hhbTohUn0se2NyZWF0ZTpxdH0pO3ZhciB4dD1mdW5jdGlvbihlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihTdHJpbmcoZSkrXCIgaXMgbm90IGEgZnVuY3Rpb25cIik7cmV0dXJuIGV9LFZ0PWZ1bmN0aW9uKGUsdCxuKXtpZih4dChlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChuKXtjYXNlIDA6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuY2FsbCh0KX07Y2FzZSAxOnJldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gZS5jYWxsKHQsbil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24obixvKXtyZXR1cm4gZS5jYWxsKHQsbixvKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihuLG8scil7cmV0dXJuIGUuY2FsbCh0LG4sbyxyKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX0sS3Q9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuXCJBcnJheVwiPT1GKGUpfSxCdD1nZShcInNwZWNpZXNcIiksSHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3KGZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBLdChlKSYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mKHQ9ZS5jb25zdHJ1Y3Rvcil8fHQhPT1BcnJheSYmIUt0KHQucHJvdG90eXBlKT9CKHQpJiZudWxsPT09KHQ9dFtCdF0pJiYodD12b2lkIDApOnQ9dm9pZCAwKSx2b2lkIDA9PT10P0FycmF5OnR9KGUpKSgwPT09dD8wOnQpfSxqdD1bXS5wdXNoLCR0PWZ1bmN0aW9uKGUpe3ZhciB0PTE9PWUsbj0yPT1lLG89Mz09ZSxyPTQ9PWUsYT02PT1lLHM9Nz09ZSxpPTU9PWV8fGE7cmV0dXJuIGZ1bmN0aW9uKHUsYyxsLHApe2Zvcih2YXIgZCxnLGg9cmUodSksZj14KGgpLF89VnQoYyxsLDMpLG09V2UoZi5sZW5ndGgpLHY9MCxNPXB8fEh0LHk9dD9NKHUsbSk6bnx8cz9NKHUsMCk6dm9pZCAwO20+djt2KyspaWYoKGl8fHYgaW4gZikmJihnPV8oZD1mW3ZdLHYsaCksZSkpaWYodCl5W3ZdPWc7ZWxzZSBpZihnKXN3aXRjaChlKXtjYXNlIDM6cmV0dXJuITA7Y2FzZSA1OnJldHVybiBkO2Nhc2UgNjpyZXR1cm4gdjtjYXNlIDI6anQuY2FsbCh5LGQpfWVsc2Ugc3dpdGNoKGUpe2Nhc2UgNDpyZXR1cm4hMTtjYXNlIDc6anQuY2FsbCh5LGQpfXJldHVybiBhPy0xOm98fHI/cjp5fX0sWXQ9e2ZvckVhY2g6JHQoMCksbWFwOiR0KDEpLGZpbHRlcjokdCgyKSxzb21lOiR0KDMpLGV2ZXJ5OiR0KDQpLGZpbmQ6JHQoNSksZmluZEluZGV4OiR0KDYpLGZpbHRlclJlamVjdDokdCg3KX0senQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXVtlXTtyZXR1cm4hIW4mJkwoKGZ1bmN0aW9uKCl7bi5jYWxsKG51bGwsdHx8ZnVuY3Rpb24oKXt0aHJvdyAxfSwxKX0pKX0sV3Q9WXQuZm9yRWFjaCxKdD16dChcImZvckVhY2hcIik/W10uZm9yRWFjaDpmdW5jdGlvbihlKXtyZXR1cm4gV3QodGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX07dnQoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOltdLmZvckVhY2ghPUp0fSx7Zm9yRWFjaDpKdH0pO3ZhciBYdD17Q1NTUnVsZUxpc3Q6MCxDU1NTdHlsZURlY2xhcmF0aW9uOjAsQ1NTVmFsdWVMaXN0OjAsQ2xpZW50UmVjdExpc3Q6MCxET01SZWN0TGlzdDowLERPTVN0cmluZ0xpc3Q6MCxET01Ub2tlbkxpc3Q6MSxEYXRhVHJhbnNmZXJJdGVtTGlzdDowLEZpbGVMaXN0OjAsSFRNTEFsbENvbGxlY3Rpb246MCxIVE1MQ29sbGVjdGlvbjowLEhUTUxGb3JtRWxlbWVudDowLEhUTUxTZWxlY3RFbGVtZW50OjAsTWVkaWFMaXN0OjAsTWltZVR5cGVBcnJheTowLE5hbWVkTm9kZU1hcDowLE5vZGVMaXN0OjEsUGFpbnRSZXF1ZXN0TGlzdDowLFBsdWdpbjowLFBsdWdpbkFycmF5OjAsU1ZHTGVuZ3RoTGlzdDowLFNWR051bWJlckxpc3Q6MCxTVkdQYXRoU2VnTGlzdDowLFNWR1BvaW50TGlzdDowLFNWR1N0cmluZ0xpc3Q6MCxTVkdUcmFuc2Zvcm1MaXN0OjAsU291cmNlQnVmZmVyTGlzdDowLFN0eWxlU2hlZXRMaXN0OjAsVGV4dFRyYWNrQ3VlTGlzdDowLFRleHRUcmFja0xpc3Q6MCxUb3VjaExpc3Q6MH07Zm9yKHZhciBRdCBpbiBYdCl7dmFyIFp0PU9bUXRdLGVuPVp0JiZadC5wcm90b3R5cGU7aWYoZW4mJmVuLmZvckVhY2ghPT1KdCl0cnl7Q2UoZW4sXCJmb3JFYWNoXCIsSnQpfWNhdGNoKF9NKXtlbi5mb3JFYWNoPUp0fX12YXIgdG49TCgoZnVuY3Rpb24oKXtMdCgxKX0pKTt2dCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6dG59LHtrZXlzOmZ1bmN0aW9uKGUpe3JldHVybiBMdChyZShlKSl9fSk7dmFyIG5uPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmV0dXJuO2lmKHZvaWQgMCE9PXQpcmV0dXJuIFNlKHQuY2FsbChlKSkudmFsdWV9LG9uPWZ1bmN0aW9uKGUsdCxuLG8pe3RyeXtyZXR1cm4gbz90KFNlKG4pWzBdLG5bMV0pOnQobil9Y2F0Y2goX00pe3Rocm93IG5uKGUpLF9NfX0scm49e30sYW49Z2UoXCJpdGVyYXRvclwiKSxzbj1BcnJheS5wcm90b3R5cGUsdW49ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihybi5BcnJheT09PWV8fHNuW2FuXT09PWUpfSxjbj1mdW5jdGlvbihlLHQsbil7dmFyIG89X2UodCk7byBpbiBlP0VlLmYoZSxvLEcoMCxuKSk6ZVtvXT1ufSxsbj17fTtsbltnZShcInRvU3RyaW5nVGFnXCIpXT1cInpcIjt2YXIgcG49XCJbb2JqZWN0IHpdXCI9PT1TdHJpbmcobG4pLGRuPWdlKFwidG9TdHJpbmdUYWdcIiksZ249XCJBcmd1bWVudHNcIj09RihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpLGhuPXBuP0Y6ZnVuY3Rpb24oZSl7dmFyIHQsbixvO3JldHVybiB2b2lkIDA9PT1lP1wiVW5kZWZpbmVkXCI6bnVsbD09PWU/XCJOdWxsXCI6XCJzdHJpbmdcIj09dHlwZW9mKG49ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIGVbdF19Y2F0Y2goX00pe319KHQ9T2JqZWN0KGUpLGRuKSk/bjpnbj9GKHQpOlwiT2JqZWN0XCI9PShvPUYodCkpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNhbGxlZT9cIkFyZ3VtZW50c1wiOm99LGZuPWdlKFwiaXRlcmF0b3JcIiksX249ZnVuY3Rpb24oZSl7aWYobnVsbCE9ZSlyZXR1cm4gZVtmbl18fGVbXCJAQGl0ZXJhdG9yXCJdfHxybltobihlKV19LG1uPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyLGEscyxpPXJlKGUpLHU9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcz90aGlzOkFycmF5LGM9YXJndW1lbnRzLmxlbmd0aCxsPWM+MT9hcmd1bWVudHNbMV06dm9pZCAwLHA9dm9pZCAwIT09bCxkPV9uKGkpLGc9MDtpZihwJiYobD1WdChsLGM+Mj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSxudWxsPT1kfHx1PT1BcnJheSYmdW4oZCkpZm9yKG49bmV3IHUodD1XZShpLmxlbmd0aCkpO3Q+ZztnKyspcz1wP2woaVtnXSxnKTppW2ddLGNuKG4sZyxzKTtlbHNlIGZvcihhPShyPWQuY2FsbChpKSkubmV4dCxuPW5ldyB1OyEobz1hLmNhbGwocikpLmRvbmU7ZysrKXM9cD9vbihyLGwsW28udmFsdWUsZ10sITApOm8udmFsdWUsY24obixnLHMpO3JldHVybiBuLmxlbmd0aD1nLG59LHZuPWdlKFwiaXRlcmF0b3JcIiksTW49ITE7dHJ5e3ZhciB5bj0wLEluPXtuZXh0OmZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6ISF5bisrfX0scmV0dXJuOmZ1bmN0aW9uKCl7TW49ITB9fTtJblt2bl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sQXJyYXkuZnJvbShJbiwoZnVuY3Rpb24oKXt0aHJvdyAyfSkpfWNhdGNoKF9NKXt9dmFyIFRuPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFNbilyZXR1cm4hMTt2YXIgbj0hMTt0cnl7dmFyIG89e307b1t2bl09ZnVuY3Rpb24oKXtyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybntkb25lOm49ITB9fX19LGUobyl9Y2F0Y2goX00pe31yZXR1cm4gbn0sU249IVRuKChmdW5jdGlvbihlKXtBcnJheS5mcm9tKGUpfSkpO3Z0KHt0YXJnZXQ6XCJBcnJheVwiLHN0YXQ6ITAsZm9yY2VkOlNufSx7ZnJvbTptbn0pO3ZhciBEbixFbixDbixBbj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXt2YXIgbyxyLGE9TXQoVih0KSkscz1ZZShuKSxpPWEubGVuZ3RoO3JldHVybiBzPDB8fHM+PWk/ZT9cIlwiOnZvaWQgMDoobz1hLmNoYXJDb2RlQXQocykpPDU1Mjk2fHxvPjU2MzE5fHxzKzE9PT1pfHwocj1hLmNoYXJDb2RlQXQocysxKSk8NTYzMjB8fHI+NTczNDM/ZT9hLmNoYXJBdChzKTpvOmU/YS5zbGljZShzLHMrMik6ci01NjMyMCsoby01NTI5Njw8MTApKzY1NTM2fX0sa249e2NvZGVBdDpBbighMSksY2hhckF0OkFuKCEwKX0sTm49IUwoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5wcm90b3R5cGUuY29uc3RydWN0b3I9bnVsbCxPYmplY3QuZ2V0UHJvdG90eXBlT2YobmV3IGUpIT09ZS5wcm90b3R5cGV9KSksT249UGUoXCJJRV9QUk9UT1wiKSxMbj1PYmplY3QucHJvdG90eXBlLFJuPU5uP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZT1yZShlKSxzZShlLE9uKT9lW09uXTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yJiZlIGluc3RhbmNlb2YgZS5jb25zdHJ1Y3Rvcj9lLmNvbnN0cnVjdG9yLnByb3RvdHlwZTplIGluc3RhbmNlb2YgT2JqZWN0P0xuOm51bGx9LGJuPWdlKFwiaXRlcmF0b3JcIiksd249ITE7W10ua2V5cyYmKFwibmV4dFwiaW4oQ249W10ua2V5cygpKT8oRW49Um4oUm4oQ24pKSkhPT1PYmplY3QucHJvdG90eXBlJiYoRG49RW4pOnduPSEwKSwobnVsbD09RG58fEwoKGZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIERuW2JuXS5jYWxsKGUpIT09ZX0pKSkmJihEbj17fSksc2UoRG4sYm4pfHxDZShEbixibiwoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKTt2YXIgUG49e0l0ZXJhdG9yUHJvdG90eXBlOkRuLEJVR0dZX1NBRkFSSV9JVEVSQVRPUlM6d259LEduPUVlLmYsVW49Z2UoXCJ0b1N0cmluZ1RhZ1wiKSxGbj1mdW5jdGlvbihlLHQsbil7ZSYmIXNlKGU9bj9lOmUucHJvdG90eXBlLFVuKSYmR24oZSxVbix7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX0scW49UG4uSXRlcmF0b3JQcm90b3R5cGUseG49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sVm49ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPXQrXCIgSXRlcmF0b3JcIjtyZXR1cm4gZS5wcm90b3R5cGU9cXQocW4se25leHQ6RygxLG4pfSksRm4oZSxvLCExKSxybltvXT14bixlfSxLbj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT9mdW5jdGlvbigpe3ZhciBlLHQ9ITEsbj17fTt0cnl7KGU9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPYmplY3QucHJvdG90eXBlLFwiX19wcm90b19fXCIpLnNldCkuY2FsbChuLFtdKSx0PW4gaW5zdGFuY2VvZiBBcnJheX1jYXRjaChfTSl7fXJldHVybiBmdW5jdGlvbihuLG8pe3JldHVybiBTZShuKSxmdW5jdGlvbihlKXtpZighQihlKSYmbnVsbCE9PWUpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3Qgc2V0IFwiK1N0cmluZyhlKStcIiBhcyBhIHByb3RvdHlwZVwiKX0obyksdD9lLmNhbGwobixvKTpuLl9fcHJvdG9fXz1vLG59fSgpOnZvaWQgMCksQm49UG4uSXRlcmF0b3JQcm90b3R5cGUsSG49UG4uQlVHR1lfU0FGQVJJX0lURVJBVE9SUyxqbj1nZShcIml0ZXJhdG9yXCIpLCRuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LFluPWZ1bmN0aW9uKGUsdCxuLG8scixhLHMpe1ZuKG4sdCxvKTt2YXIgaSx1LGMsbD1mdW5jdGlvbihlKXtpZihlPT09ciYmZilyZXR1cm4gZjtpZighSG4mJmUgaW4gZylyZXR1cm4gZ1tlXTtzd2l0Y2goZSl7Y2FzZVwia2V5c1wiOmNhc2VcInZhbHVlc1wiOmNhc2VcImVudHJpZXNcIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMpfX0scD10K1wiIEl0ZXJhdG9yXCIsZD0hMSxnPWUucHJvdG90eXBlLGg9Z1tqbl18fGdbXCJAQGl0ZXJhdG9yXCJdfHxyJiZnW3JdLGY9IUhuJiZofHxsKHIpLF89XCJBcnJheVwiPT10JiZnLmVudHJpZXN8fGg7aWYoXyYmKGk9Um4oXy5jYWxsKG5ldyBlKSksQm4hPT1PYmplY3QucHJvdG90eXBlJiZpLm5leHQmJihSbihpKSE9PUJuJiYoS24/S24oaSxCbik6XCJmdW5jdGlvblwiIT10eXBlb2YgaVtqbl0mJkNlKGksam4sJG4pKSxGbihpLHAsITApKSksXCJ2YWx1ZXNcIj09ciYmaCYmXCJ2YWx1ZXNcIiE9PWgubmFtZSYmKGQ9ITAsZj1mdW5jdGlvbigpe3JldHVybiBoLmNhbGwodGhpcyl9KSxnW2puXSE9PWYmJkNlKGcsam4sZikscm5bdF09ZixyKWlmKHU9e3ZhbHVlczpsKFwidmFsdWVzXCIpLGtleXM6YT9mOmwoXCJrZXlzXCIpLGVudHJpZXM6bChcImVudHJpZXNcIil9LHMpZm9yKGMgaW4gdSkoSG58fGR8fCEoYyBpbiBnKSkmJkhlKGcsYyx1W2NdKTtlbHNlIHZ0KHt0YXJnZXQ6dCxwcm90bzohMCxmb3JjZWQ6SG58fGR9LHUpO3JldHVybiB1fSx6bj1rbi5jaGFyQXQsV249QmUuc2V0LEpuPUJlLmdldHRlckZvcihcIlN0cmluZyBJdGVyYXRvclwiKTtZbihTdHJpbmcsXCJTdHJpbmdcIiwoZnVuY3Rpb24oZSl7V24odGhpcyx7dHlwZTpcIlN0cmluZyBJdGVyYXRvclwiLHN0cmluZzpNdChlKSxpbmRleDowfSl9KSwoZnVuY3Rpb24oKXt2YXIgZSx0PUpuKHRoaXMpLG49dC5zdHJpbmcsbz10LmluZGV4O3JldHVybiBvPj1uLmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPXpuKG4sbyksdC5pbmRleCs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSkpO3ZhciBYbj1nZShcInNwZWNpZXNcIiksUW49ZnVuY3Rpb24oZSl7cmV0dXJuIFg+PTUxfHwhTCgoZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4odC5jb25zdHJ1Y3Rvcj17fSlbWG5dPWZ1bmN0aW9uKCl7cmV0dXJue2ZvbzoxfX0sMSE9PXRbZV0oQm9vbGVhbikuZm9vfSkpfSxabj1nZShcImlzQ29uY2F0U3ByZWFkYWJsZVwiKSxlbz1YPj01MXx8IUwoKGZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIGVbWm5dPSExLGUuY29uY2F0KClbMF0hPT1lfSkpLHRvPVFuKFwiY29uY2F0XCIpLG5vPWZ1bmN0aW9uKGUpe2lmKCFCKGUpKXJldHVybiExO3ZhciB0PWVbWm5dO3JldHVybiB2b2lkIDAhPT10PyEhdDpLdChlKX07dnQoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOiFlb3x8IXRvfSx7Y29uY2F0OmZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyLGEscz1yZSh0aGlzKSxpPUh0KHMsMCksdT0wO2Zvcih0PS0xLG89YXJndW1lbnRzLmxlbmd0aDt0PG87dCsrKWlmKG5vKGE9LTE9PT10P3M6YXJndW1lbnRzW3RdKSl7aWYodSsocj1XZShhLmxlbmd0aCkpPjkwMDcxOTkyNTQ3NDA5OTEpdGhyb3cgVHlwZUVycm9yKFwiTWF4aW11bSBhbGxvd2VkIGluZGV4IGV4Y2VlZGVkXCIpO2ZvcihuPTA7bjxyO24rKyx1KyspbiBpbiBhJiZjbihpLHUsYVtuXSl9ZWxzZXtpZih1Pj05MDA3MTk5MjU0NzQwOTkxKXRocm93IFR5cGVFcnJvcihcIk1heGltdW0gYWxsb3dlZCBpbmRleCBleGNlZWRlZFwiKTtjbihpLHUrKyxhKX1yZXR1cm4gaS5sZW5ndGg9dSxpfX0pO3ZhciBvbz17U0RLX1JFQURZOlwic2RrU3RhdGVSZWFkeVwiLFNES19OT1RfUkVBRFk6XCJzZGtTdGF0ZU5vdFJlYWR5XCIsU0RLX0RFU1RST1k6XCJzZGtEZXN0cm95XCIsTUVTU0FHRV9SRUNFSVZFRDpcIm9uTWVzc2FnZVJlY2VpdmVkXCIsTUVTU0FHRV9NT0RJRklFRDpcIm9uTWVzc2FnZU1vZGlmaWVkXCIsTUVTU0FHRV9SRVZPS0VEOlwib25NZXNzYWdlUmV2b2tlZFwiLE1FU1NBR0VfUkVBRF9CWV9QRUVSOlwib25NZXNzYWdlUmVhZEJ5UGVlclwiLENPTlZFUlNBVElPTl9MSVNUX1VQREFURUQ6XCJvbkNvbnZlcnNhdGlvbkxpc3RVcGRhdGVkXCIsR1JPVVBfTElTVF9VUERBVEVEOlwib25Hcm91cExpc3RVcGRhdGVkXCIsR1JPVVBfU1lTVEVNX05PVElDRV9SRUNFSVZFRDpcInJlY2VpdmVHcm91cFN5c3RlbU5vdGljZVwiLEdST1VQX0FUVFJJQlVURVNfVVBEQVRFRDpcImdyb3VwQXR0cmlidXRlc1VwZGF0ZWRcIixQUk9GSUxFX1VQREFURUQ6XCJvblByb2ZpbGVVcGRhdGVkXCIsQkxBQ0tMSVNUX1VQREFURUQ6XCJibGFja2xpc3RVcGRhdGVkXCIsRlJJRU5EX0xJU1RfVVBEQVRFRDpcIm9uRnJpZW5kTGlzdFVwZGF0ZWRcIixGUklFTkRfR1JPVVBfTElTVF9VUERBVEVEOlwib25GcmllbmRHcm91cExpc3RVcGRhdGVkXCIsRlJJRU5EX0FQUExJQ0FUSU9OX0xJU1RfVVBEQVRFRDpcIm9uRnJpZW5kQXBwbGljYXRpb25MaXN0VXBkYXRlZFwiLEtJQ0tFRF9PVVQ6XCJraWNrZWRPdXRcIixFUlJPUjpcImVycm9yXCIsTkVUX1NUQVRFX0NIQU5HRTpcIm5ldFN0YXRlQ2hhbmdlXCIsU0RLX1JFTE9BRDpcInNka1JlbG9hZFwifSxybz17TVNHX1RFWFQ6XCJUSU1UZXh0RWxlbVwiLE1TR19JTUFHRTpcIlRJTUltYWdlRWxlbVwiLE1TR19TT1VORDpcIlRJTVNvdW5kRWxlbVwiLE1TR19BVURJTzpcIlRJTVNvdW5kRWxlbVwiLE1TR19GSUxFOlwiVElNRmlsZUVsZW1cIixNU0dfRkFDRTpcIlRJTUZhY2VFbGVtXCIsTVNHX1ZJREVPOlwiVElNVmlkZW9GaWxlRWxlbVwiLE1TR19HRU86XCJUSU1Mb2NhdGlvbkVsZW1cIixNU0dfR1JQX1RJUDpcIlRJTUdyb3VwVGlwRWxlbVwiLE1TR19HUlBfU1lTX05PVElDRTpcIlRJTUdyb3VwU3lzdGVtTm90aWNlRWxlbVwiLE1TR19DVVNUT006XCJUSU1DdXN0b21FbGVtXCIsTVNHX01FUkdFUjpcIlRJTVJlbGF5RWxlbVwiLE1TR19QUklPUklUWV9ISUdIOlwiSGlnaFwiLE1TR19QUklPUklUWV9OT1JNQUw6XCJOb3JtYWxcIixNU0dfUFJJT1JJVFlfTE9XOlwiTG93XCIsTVNHX1BSSU9SSVRZX0xPV0VTVDpcIkxvd2VzdFwiLENPTlZfQzJDOlwiQzJDXCIsQ09OVl9HUk9VUDpcIkdST1VQXCIsQ09OVl9TWVNURU06XCJAVElNI1NZU1RFTVwiLENPTlZfQVRfTUU6MSxDT05WX0FUX0FMTDoyLENPTlZfQVRfQUxMX0FUX01FOjMsR1JQX1BSSVZBVEU6XCJQcml2YXRlXCIsR1JQX1dPUks6XCJQcml2YXRlXCIsR1JQX1BVQkxJQzpcIlB1YmxpY1wiLEdSUF9DSEFUUk9PTTpcIkNoYXRSb29tXCIsR1JQX01FRVRJTkc6XCJDaGF0Um9vbVwiLEdSUF9BVkNIQVRST09NOlwiQVZDaGF0Um9vbVwiLEdSUF9NQlJfUk9MRV9PV05FUjpcIk93bmVyXCIsR1JQX01CUl9ST0xFX0FETUlOOlwiQWRtaW5cIixHUlBfTUJSX1JPTEVfTUVNQkVSOlwiTWVtYmVyXCIsR1JQX1RJUF9NQlJfSk9JTjoxLEdSUF9USVBfTUJSX1FVSVQ6MixHUlBfVElQX01CUl9LSUNLRURfT1VUOjMsR1JQX1RJUF9NQlJfU0VUX0FETUlOOjQsR1JQX1RJUF9NQlJfQ0FOQ0VMRURfQURNSU46NSxHUlBfVElQX0dSUF9QUk9GSUxFX1VQREFURUQ6NixHUlBfVElQX01CUl9QUk9GSUxFX1VQREFURUQ6NyxNU0dfUkVNSU5EX0FDUFRfQU5EX05PVEU6XCJBY2NlcHRBbmROb3RpZnlcIixNU0dfUkVNSU5EX0FDUFRfTk9UX05PVEU6XCJBY2NlcHROb3ROb3RpZnlcIixNU0dfUkVNSU5EX0RJU0NBUkQ6XCJEaXNjYXJkXCIsR0VOREVSX1VOS05PV046XCJHZW5kZXJfVHlwZV9Vbmtub3duXCIsR0VOREVSX0ZFTUFMRTpcIkdlbmRlcl9UeXBlX0ZlbWFsZVwiLEdFTkRFUl9NQUxFOlwiR2VuZGVyX1R5cGVfTWFsZVwiLEtJQ0tFRF9PVVRfTVVMVF9BQ0NPVU5UOlwibXVsdGlwbGVBY2NvdW50XCIsS0lDS0VEX09VVF9NVUxUX0RFVklDRTpcIm11bHRpcGxlRGV2aWNlXCIsS0lDS0VEX09VVF9VU0VSU0lHX0VYUElSRUQ6XCJ1c2VyU2lnRXhwaXJlZFwiLEFMTE9XX1RZUEVfQUxMT1dfQU5ZOlwiQWxsb3dUeXBlX1R5cGVfQWxsb3dBbnlcIixBTExPV19UWVBFX05FRURfQ09ORklSTTpcIkFsbG93VHlwZV9UeXBlX05lZWRDb25maXJtXCIsQUxMT1dfVFlQRV9ERU5ZX0FOWTpcIkFsbG93VHlwZV9UeXBlX0RlbnlBbnlcIixGT1JCSURfVFlQRV9OT05FOlwiQWRtaW5Gb3JiaWRfVHlwZV9Ob25lXCIsRk9SQklEX1RZUEVfU0VORF9PVVQ6XCJBZG1pbkZvcmJpZF9UeXBlX1NlbmRPdXRcIixKT0lOX09QVElPTlNfRlJFRV9BQ0NFU1M6XCJGcmVlQWNjZXNzXCIsSk9JTl9PUFRJT05TX05FRURfUEVSTUlTU0lPTjpcIk5lZWRQZXJtaXNzaW9uXCIsSk9JTl9PUFRJT05TX0RJU0FCTEVfQVBQTFk6XCJEaXNhYmxlQXBwbHlcIixKT0lOX1NUQVRVU19TVUNDRVNTOlwiSm9pbmVkU3VjY2Vzc1wiLEpPSU5fU1RBVFVTX0FMUkVBRFlfSU5fR1JPVVA6XCJBbHJlYWR5SW5Hcm91cFwiLEpPSU5fU1RBVFVTX1dBSVRfQVBQUk9WQUw6XCJXYWl0QWRtaW5BcHByb3ZhbFwiLEdSUF9QUk9GSUxFX09XTkVSX0lEOlwib3duZXJJRFwiLEdSUF9QUk9GSUxFX0NSRUFURV9USU1FOlwiY3JlYXRlVGltZVwiLEdSUF9QUk9GSUxFX0xBU1RfSU5GT19USU1FOlwibGFzdEluZm9UaW1lXCIsR1JQX1BST0ZJTEVfTUVNQkVSX05VTTpcIm1lbWJlck51bVwiLEdSUF9QUk9GSUxFX01BWF9NRU1CRVJfTlVNOlwibWF4TWVtYmVyTnVtXCIsR1JQX1BST0ZJTEVfSk9JTl9PUFRJT046XCJqb2luT3B0aW9uXCIsR1JQX1BST0ZJTEVfSU5UUk9EVUNUSU9OOlwiaW50cm9kdWN0aW9uXCIsR1JQX1BST0ZJTEVfTk9USUZJQ0FUSU9OOlwibm90aWZpY2F0aW9uXCIsR1JQX1BST0ZJTEVfTVVURV9BTExfTUJSUzpcIm11dGVBbGxNZW1iZXJzXCIsU05TX0FERF9UWVBFX1NJTkdMRTpcIkFkZF9UeXBlX1NpbmdsZVwiLFNOU19BRERfVFlQRV9CT1RIOlwiQWRkX1R5cGVfQm90aFwiLFNOU19ERUxFVEVfVFlQRV9TSU5HTEU6XCJEZWxldGVfVHlwZV9TaW5nbGVcIixTTlNfREVMRVRFX1RZUEVfQk9USDpcIkRlbGV0ZV9UeXBlX0JvdGhcIixTTlNfQVBQTElDQVRJT05fVFlQRV9CT1RIOlwiUGVuZGVuY3lfVHlwZV9Cb3RoXCIsU05TX0FQUExJQ0FUSU9OX1NFTlRfVE9fTUU6XCJQZW5kZW5jeV9UeXBlX0NvbWVJblwiLFNOU19BUFBMSUNBVElPTl9TRU5UX0JZX01FOlwiUGVuZGVuY3lfVHlwZV9TZW5kT3V0XCIsU05TX0FQUExJQ0FUSU9OX0FHUkVFOlwiUmVzcG9uc2VfQWN0aW9uX0FncmVlXCIsU05TX0FQUExJQ0FUSU9OX0FHUkVFX0FORF9BREQ6XCJSZXNwb25zZV9BY3Rpb25fQWdyZWVBbmRBZGRcIixTTlNfQ0hFQ0tfVFlQRV9CT1RIOlwiQ2hlY2tSZXN1bHRfVHlwZV9Cb3RoXCIsU05TX0NIRUNLX1RZUEVfU0lOR0xFOlwiQ2hlY2tSZXN1bHRfVHlwZV9TaW5nbGVcIixTTlNfVFlQRV9OT19SRUxBVElPTjpcIkNoZWNrUmVzdWx0X1R5cGVfTm9SZWxhdGlvblwiLFNOU19UWVBFX0FfV0lUSF9COlwiQ2hlY2tSZXN1bHRfVHlwZV9BV2l0aEJcIixTTlNfVFlQRV9CX1dJVEhfQTpcIkNoZWNrUmVzdWx0X1R5cGVfQldpdGhBXCIsU05TX1RZUEVfQk9USF9XQVk6XCJDaGVja1Jlc3VsdF9UeXBlX0JvdGhXYXlcIixORVRfU1RBVEVfQ09OTkVDVEVEOlwiY29ubmVjdGVkXCIsTkVUX1NUQVRFX0NPTk5FQ1RJTkc6XCJjb25uZWN0aW5nXCIsTkVUX1NUQVRFX0RJU0NPTk5FQ1RFRDpcImRpc2Nvbm5lY3RlZFwiLE1TR19BVF9BTEw6XCJfX2tJbVNES19NZXNzc2FnZUF0QUxMX19cIn0sYW89W10uc2xpY2Usc289e30saW89ZnVuY3Rpb24oZSx0LG4pe2lmKCEodCBpbiBzbykpe2Zvcih2YXIgbz1bXSxyPTA7cjx0O3IrKylvW3JdPVwiYVtcIityK1wiXVwiO3NvW3RdPUZ1bmN0aW9uKFwiQyxhXCIsXCJyZXR1cm4gbmV3IEMoXCIrby5qb2luKFwiLFwiKStcIilcIil9cmV0dXJuIHNvW3RdKGUsbil9LHVvPUZ1bmN0aW9uLmJpbmR8fGZ1bmN0aW9uKGUpe3ZhciB0PXh0KHRoaXMpLG49YW8uY2FsbChhcmd1bWVudHMsMSksbz1mdW5jdGlvbigpe3ZhciByPW4uY29uY2F0KGFvLmNhbGwoYXJndW1lbnRzKSk7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBvP2lvKHQsci5sZW5ndGgscik6dC5hcHBseShlLHIpfTtyZXR1cm4gQih0LnByb3RvdHlwZSkmJihvLnByb3RvdHlwZT10LnByb3RvdHlwZSksb307dnQoe3RhcmdldDpcIkZ1bmN0aW9uXCIscHJvdG86ITB9LHtiaW5kOnVvfSk7dmFyIGNvPVl0Lm1hcCxsbz1RbihcIm1hcFwiKTt2dCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6IWxvfSx7bWFwOmZ1bmN0aW9uKGUpe3JldHVybiBjbyh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pO3ZhciBwbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtvKHRoaXMsZSksdGhpcy5jYWNoZT1bXSx0aGlzLm9wdGlvbnM9bnVsbH1yZXR1cm4gYShlLFt7a2V5OlwidXNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvd1wibWlkZGxld2FyZSBtdXN0IGJlIGEgZnVuY3Rpb25cIjtyZXR1cm4gdGhpcy5jYWNoZS5wdXNoKGUpLHRoaXN9fSx7a2V5OlwibmV4dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMubWlkZGxld2FyZXMmJnRoaXMubWlkZGxld2FyZXMubGVuZ3RoPjApcmV0dXJuIHRoaXMubWlkZGxld2FyZXMuc2hpZnQoKS5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLHRoaXMubmV4dC5iaW5kKHRoaXMpKX19LHtrZXk6XCJydW5cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5taWRkbGV3YXJlcz10aGlzLmNhY2hlLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSksdGhpcy5vcHRpb25zPWUsdGhpcy5uZXh0KCl9fV0pLGV9KCksZ289RWUuZixobz1GdW5jdGlvbi5wcm90b3R5cGUsZm89aG8udG9TdHJpbmcsX289L15cXHMqZnVuY3Rpb24gKFteIChdKikvO1ImJiEoXCJuYW1lXCJpbiBobykmJmdvKGhvLFwibmFtZVwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBmby5jYWxsKHRoaXMpLm1hdGNoKF9vKVsxXX1jYXRjaChfTSl7cmV0dXJuXCJcIn19fSk7dmFyIG1vPUMoKGZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxyLGEscyxpLHUsYyxsLHAsZCxnLGgsZixfLG0sdixNO2UuZXhwb3J0cz0obj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm9taXNlLG89XCJvYmplY3RcIj09dHlwZW9mIHNlbGY/c2VsZjpFLHI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCxhPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBNYXAscz1cInVuZGVmaW5lZFwiIT10eXBlb2YgU2V0LGk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdlYWtNYXAsdT1cInVuZGVmaW5lZFwiIT10eXBlb2YgV2Vha1NldCxjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBEYXRhVmlldyxsPXImJnZvaWQgMCE9PVN5bWJvbC5pdGVyYXRvcixwPXImJnZvaWQgMCE9PVN5bWJvbC50b1N0cmluZ1RhZyxkPXMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFNldC5wcm90b3R5cGUuZW50cmllcyxnPWEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE1hcC5wcm90b3R5cGUuZW50cmllcyxoPWQmJk9iamVjdC5nZXRQcm90b3R5cGVPZigobmV3IFNldCkuZW50cmllcygpKSxmPWcmJk9iamVjdC5nZXRQcm90b3R5cGVPZigobmV3IE1hcCkuZW50cmllcygpKSxfPWwmJlwiZnVuY3Rpb25cIj09dHlwZW9mIEFycmF5LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdLG09XyYmT2JqZWN0LmdldFByb3RvdHlwZU9mKFtdW1N5bWJvbC5pdGVyYXRvcl0oKSksdj1sJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTdHJpbmcucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0sTT12JiZPYmplY3QuZ2V0UHJvdG90eXBlT2YoXCJcIltTeW1ib2wuaXRlcmF0b3JdKCkpLGZ1bmN0aW9uKGUpe3ZhciB0PXR5cGVvZiBlO2lmKFwib2JqZWN0XCIhPT10KXJldHVybiB0O2lmKG51bGw9PT1lKXJldHVyblwibnVsbFwiO2lmKGU9PT1vKXJldHVyblwiZ2xvYmFsXCI7aWYoQXJyYXkuaXNBcnJheShlKSYmKCExPT09cHx8IShTeW1ib2wudG9TdHJpbmdUYWcgaW4gZSkpKXJldHVyblwiQXJyYXlcIjtpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZudWxsIT09d2luZG93KXtpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93LmxvY2F0aW9uJiZlPT09d2luZG93LmxvY2F0aW9uKXJldHVyblwiTG9jYXRpb25cIjtpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93LmRvY3VtZW50JiZlPT09d2luZG93LmRvY3VtZW50KXJldHVyblwiRG9jdW1lbnRcIjtpZihcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93Lm5hdmlnYXRvcil7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3IubWltZVR5cGVzJiZlPT09d2luZG93Lm5hdmlnYXRvci5taW1lVHlwZXMpcmV0dXJuXCJNaW1lVHlwZUFycmF5XCI7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3IucGx1Z2lucyYmZT09PXdpbmRvdy5uYXZpZ2F0b3IucGx1Z2lucylyZXR1cm5cIlBsdWdpbkFycmF5XCJ9aWYoKFwiZnVuY3Rpb25cIj09dHlwZW9mIHdpbmRvdy5IVE1MRWxlbWVudHx8XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdy5IVE1MRWxlbWVudCkmJmUgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTEVsZW1lbnQpe2lmKFwiQkxPQ0tRVU9URVwiPT09ZS50YWdOYW1lKXJldHVyblwiSFRNTFF1b3RlRWxlbWVudFwiO2lmKFwiVERcIj09PWUudGFnTmFtZSlyZXR1cm5cIkhUTUxUYWJsZURhdGFDZWxsRWxlbWVudFwiO2lmKFwiVEhcIj09PWUudGFnTmFtZSlyZXR1cm5cIkhUTUxUYWJsZUhlYWRlckNlbGxFbGVtZW50XCJ9fXZhciByPXAmJmVbU3ltYm9sLnRvU3RyaW5nVGFnXTtpZihcInN0cmluZ1wiPT10eXBlb2YgcilyZXR1cm4gcjt2YXIgbD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIGw9PT1SZWdFeHAucHJvdG90eXBlP1wiUmVnRXhwXCI6bD09PURhdGUucHJvdG90eXBlP1wiRGF0ZVwiOm4mJmw9PT1Qcm9taXNlLnByb3RvdHlwZT9cIlByb21pc2VcIjpzJiZsPT09U2V0LnByb3RvdHlwZT9cIlNldFwiOmEmJmw9PT1NYXAucHJvdG90eXBlP1wiTWFwXCI6dSYmbD09PVdlYWtTZXQucHJvdG90eXBlP1wiV2Vha1NldFwiOmkmJmw9PT1XZWFrTWFwLnByb3RvdHlwZT9cIldlYWtNYXBcIjpjJiZsPT09RGF0YVZpZXcucHJvdG90eXBlP1wiRGF0YVZpZXdcIjphJiZsPT09Zj9cIk1hcCBJdGVyYXRvclwiOnMmJmw9PT1oP1wiU2V0IEl0ZXJhdG9yXCI6XyYmbD09PW0/XCJBcnJheSBJdGVyYXRvclwiOnYmJmw9PT1NP1wiU3RyaW5nIEl0ZXJhdG9yXCI6bnVsbD09PWw/XCJPYmplY3RcIjpPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwtMSl9KX0pKTt2dCh7dGFyZ2V0OlwiQXJyYXlcIixzdGF0OiEwfSx7aXNBcnJheTpLdH0pO3ZhciB2bz1mdW5jdGlvbihlLHQsbil7dmFyIG8scjtyZXR1cm4gS24mJlwiZnVuY3Rpb25cIj09dHlwZW9mKG89dC5jb25zdHJ1Y3RvcikmJm8hPT1uJiZCKHI9by5wcm90b3R5cGUpJiZyIT09bi5wcm90b3R5cGUmJktuKGUsciksZX0sTW89c3QuZix5bz1UZS5mLElvPUVlLmYsVG89RXQudHJpbSxTbz1PLk51bWJlcixEbz1Tby5wcm90b3R5cGUsRW89XCJOdW1iZXJcIj09RihxdChEbykpLENvPWZ1bmN0aW9uKGUpe2lmKGVlKGUpKXRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IGEgU3ltYm9sIHZhbHVlIHRvIGEgbnVtYmVyXCIpO3ZhciB0LG4sbyxyLGEscyxpLHUsYz1mZShlLFwibnVtYmVyXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBjJiZjLmxlbmd0aD4yKWlmKDQzPT09KHQ9KGM9VG8oYykpLmNoYXJDb2RlQXQoMCkpfHw0NT09PXQpe2lmKDg4PT09KG49Yy5jaGFyQ29kZUF0KDIpKXx8MTIwPT09bilyZXR1cm4gTmFOfWVsc2UgaWYoNDg9PT10KXtzd2l0Y2goYy5jaGFyQ29kZUF0KDEpKXtjYXNlIDY2OmNhc2UgOTg6bz0yLHI9NDk7YnJlYWs7Y2FzZSA3OTpjYXNlIDExMTpvPTgscj01NTticmVhaztkZWZhdWx0OnJldHVybitjfWZvcihzPShhPWMuc2xpY2UoMikpLmxlbmd0aCxpPTA7aTxzO2krKylpZigodT1hLmNoYXJDb2RlQXQoaSkpPDQ4fHx1PnIpcmV0dXJuIE5hTjtyZXR1cm4gcGFyc2VJbnQoYSxvKX1yZXR1cm4rY307aWYoX3QoXCJOdW1iZXJcIiwhU28oXCIgMG8xXCIpfHwhU28oXCIwYjFcIil8fFNvKFwiKzB4MVwiKSkpe2Zvcih2YXIgQW8sa289ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aDwxPzA6ZSxuPXRoaXM7cmV0dXJuIG4gaW5zdGFuY2VvZiBrbyYmKEVvP0woKGZ1bmN0aW9uKCl7RG8udmFsdWVPZi5jYWxsKG4pfSkpOlwiTnVtYmVyXCIhPUYobikpP3ZvKG5ldyBTbyhDbyh0KSksbixrbyk6Q28odCl9LE5vPVI/TW8oU28pOlwiTUFYX1ZBTFVFLE1JTl9WQUxVRSxOYU4sTkVHQVRJVkVfSU5GSU5JVFksUE9TSVRJVkVfSU5GSU5JVFksRVBTSUxPTixpc0Zpbml0ZSxpc0ludGVnZXIsaXNOYU4saXNTYWZlSW50ZWdlcixNQVhfU0FGRV9JTlRFR0VSLE1JTl9TQUZFX0lOVEVHRVIscGFyc2VGbG9hdCxwYXJzZUludCxpc0ludGVnZXIsZnJvbVN0cmluZyxyYW5nZVwiLnNwbGl0KFwiLFwiKSxPbz0wO05vLmxlbmd0aD5PbztPbysrKXNlKFNvLEFvPU5vW09vXSkmJiFzZShrbyxBbykmJklvKGtvLEFvLHlvKFNvLEFvKSk7a28ucHJvdG90eXBlPURvLERvLmNvbnN0cnVjdG9yPWtvLEhlKE8sXCJOdW1iZXJcIixrbyl9dmFyIExvPUwoKGZ1bmN0aW9uKCl7Um4oMSl9KSk7dnQoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOkxvLHNoYW06IU5ufSx7Z2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIFJuKHJlKGUpKX19KTt2YXIgUm89RGF0ZS5wcm90b3R5cGUsYm89Um8udG9TdHJpbmcsd289Um8uZ2V0VGltZTtcIkludmFsaWQgRGF0ZVwiIT1TdHJpbmcobmV3IERhdGUoTmFOKSkmJkhlKFJvLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXt2YXIgZT13by5jYWxsKHRoaXMpO3JldHVybiBlPT1lP2JvLmNhbGwodGhpcyk6XCJJbnZhbGlkIERhdGVcIn0pKTt2YXIgUG89cG4/e30udG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIltvYmplY3QgXCIraG4odGhpcykrXCJdXCJ9O3BufHxIZShPYmplY3QucHJvdG90eXBlLFwidG9TdHJpbmdcIixQbyx7dW5zYWZlOiEwfSk7dmFyIEdvPWZ1bmN0aW9uKCl7dmFyIGU9U2UodGhpcyksdD1cIlwiO3JldHVybiBlLmdsb2JhbCYmKHQrPVwiZ1wiKSxlLmlnbm9yZUNhc2UmJih0Kz1cImlcIiksZS5tdWx0aWxpbmUmJih0Kz1cIm1cIiksZS5kb3RBbGwmJih0Kz1cInNcIiksZS51bmljb2RlJiYodCs9XCJ1XCIpLGUuc3RpY2t5JiYodCs9XCJ5XCIpLHR9LFVvPVJlZ0V4cC5wcm90b3R5cGUsRm89VW8udG9TdHJpbmcscW89TCgoZnVuY3Rpb24oKXtyZXR1cm5cIi9hL2JcIiE9Rm8uY2FsbCh7c291cmNlOlwiYVwiLGZsYWdzOlwiYlwifSl9KSkseG89XCJ0b1N0cmluZ1wiIT1Gby5uYW1lOyhxb3x8eG8pJiZIZShSZWdFeHAucHJvdG90eXBlLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXt2YXIgZT1TZSh0aGlzKSx0PU10KGUuc291cmNlKSxuPWUuZmxhZ3M7cmV0dXJuXCIvXCIrdCtcIi9cIitNdCh2b2lkIDA9PT1uJiZlIGluc3RhbmNlb2YgUmVnRXhwJiYhKFwiZmxhZ3NcImluIFVvKT9Hby5jYWxsKGUpOm4pfSkse3Vuc2FmZTohMH0pO3ZhciBWbyxLbyxCbz1mdW5jdGlvbihlLHQpe3JldHVybiBSZWdFeHAoZSx0KX0sSG89e1VOU1VQUE9SVEVEX1k6TCgoZnVuY3Rpb24oKXt2YXIgZT1CbyhcImFcIixcInlcIik7cmV0dXJuIGUubGFzdEluZGV4PTIsbnVsbCE9ZS5leGVjKFwiYWJjZFwiKX0pKSxCUk9LRU5fQ0FSRVQ6TCgoZnVuY3Rpb24oKXt2YXIgZT1CbyhcIl5yXCIsXCJneVwiKTtyZXR1cm4gZS5sYXN0SW5kZXg9MixudWxsIT1lLmV4ZWMoXCJzdHJcIil9KSl9LGpvPUwoKGZ1bmN0aW9uKCl7dmFyIGU9UmVnRXhwKFwiLlwiLFwic3RyaW5nXCIuY2hhckF0KDApKTtyZXR1cm4hKGUuZG90QWxsJiZlLmV4ZWMoXCJcXG5cIikmJlwic1wiPT09ZS5mbGFncyl9KSksJG89TCgoZnVuY3Rpb24oKXt2YXIgZT1SZWdFeHAoXCIoPzxhPmIpXCIsXCJzdHJpbmdcIi5jaGFyQXQoNSkpO3JldHVyblwiYlwiIT09ZS5leGVjKFwiYlwiKS5ncm91cHMuYXx8XCJiY1wiIT09XCJiXCIucmVwbGFjZShlLFwiJDxhPmNcIil9KSksWW89QmUuZ2V0LHpvPVJlZ0V4cC5wcm90b3R5cGUuZXhlYyxXbz1vZShcIm5hdGl2ZS1zdHJpbmctcmVwbGFjZVwiLFN0cmluZy5wcm90b3R5cGUucmVwbGFjZSksSm89em8sWG89KFZvPS9hLyxLbz0vYiovZyx6by5jYWxsKFZvLFwiYVwiKSx6by5jYWxsKEtvLFwiYVwiKSwwIT09Vm8ubGFzdEluZGV4fHwwIT09S28ubGFzdEluZGV4KSxRbz1Iby5VTlNVUFBPUlRFRF9ZfHxIby5CUk9LRU5fQ0FSRVQsWm89dm9pZCAwIT09LygpPz8vLmV4ZWMoXCJcIilbMV07KFhvfHxab3x8UW98fGpvfHwkbykmJihKbz1mdW5jdGlvbihlKXt2YXIgdCxuLG8scixhLHMsaSx1PXRoaXMsYz1Zbyh1KSxsPU10KGUpLHA9Yy5yYXc7aWYocClyZXR1cm4gcC5sYXN0SW5kZXg9dS5sYXN0SW5kZXgsdD1Kby5jYWxsKHAsbCksdS5sYXN0SW5kZXg9cC5sYXN0SW5kZXgsdDt2YXIgZD1jLmdyb3VwcyxnPVFvJiZ1LnN0aWNreSxoPUdvLmNhbGwodSksZj11LnNvdXJjZSxfPTAsbT1sO2lmKGcmJigtMT09PShoPWgucmVwbGFjZShcInlcIixcIlwiKSkuaW5kZXhPZihcImdcIikmJihoKz1cImdcIiksbT1sLnNsaWNlKHUubGFzdEluZGV4KSx1Lmxhc3RJbmRleD4wJiYoIXUubXVsdGlsaW5lfHx1Lm11bHRpbGluZSYmXCJcXG5cIiE9PWwuY2hhckF0KHUubGFzdEluZGV4LTEpKSYmKGY9XCIoPzogXCIrZitcIilcIixtPVwiIFwiK20sXysrKSxuPW5ldyBSZWdFeHAoXCJeKD86XCIrZitcIilcIixoKSksWm8mJihuPW5ldyBSZWdFeHAoXCJeXCIrZitcIiQoPyFcXFxccylcIixoKSksWG8mJihvPXUubGFzdEluZGV4KSxyPXpvLmNhbGwoZz9uOnUsbSksZz9yPyhyLmlucHV0PXIuaW5wdXQuc2xpY2UoXyksclswXT1yWzBdLnNsaWNlKF8pLHIuaW5kZXg9dS5sYXN0SW5kZXgsdS5sYXN0SW5kZXgrPXJbMF0ubGVuZ3RoKTp1Lmxhc3RJbmRleD0wOlhvJiZyJiYodS5sYXN0SW5kZXg9dS5nbG9iYWw/ci5pbmRleCtyWzBdLmxlbmd0aDpvKSxabyYmciYmci5sZW5ndGg+MSYmV28uY2FsbChyWzBdLG4sKGZ1bmN0aW9uKCl7Zm9yKGE9MTthPGFyZ3VtZW50cy5sZW5ndGgtMjthKyspdm9pZCAwPT09YXJndW1lbnRzW2FdJiYoclthXT12b2lkIDApfSkpLHImJmQpZm9yKHIuZ3JvdXBzPXM9cXQobnVsbCksYT0wO2E8ZC5sZW5ndGg7YSsrKXNbKGk9ZFthXSlbMF1dPXJbaVsxXV07cmV0dXJuIHJ9KTt2YXIgZXI9Sm87dnQoe3RhcmdldDpcIlJlZ0V4cFwiLHByb3RvOiEwLGZvcmNlZDovLi8uZXhlYyE9PWVyfSx7ZXhlYzplcn0pO3ZhciB0cj1nZShcInNwZWNpZXNcIiksbnI9UmVnRXhwLnByb3RvdHlwZSxvcj1mdW5jdGlvbihlLHQsbixvKXt2YXIgcj1nZShlKSxhPSFMKChmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0W3JdPWZ1bmN0aW9uKCl7cmV0dXJuIDd9LDchPVwiXCJbZV0odCl9KSkscz1hJiYhTCgoZnVuY3Rpb24oKXt2YXIgdD0hMSxuPS9hLztyZXR1cm5cInNwbGl0XCI9PT1lJiYoKG49e30pLmNvbnN0cnVjdG9yPXt9LG4uY29uc3RydWN0b3JbdHJdPWZ1bmN0aW9uKCl7cmV0dXJuIG59LG4uZmxhZ3M9XCJcIixuW3JdPS8uL1tyXSksbi5leGVjPWZ1bmN0aW9uKCl7cmV0dXJuIHQ9ITAsbnVsbH0sbltyXShcIlwiKSwhdH0pKTtpZighYXx8IXN8fG4pe3ZhciBpPS8uL1tyXSx1PXQocixcIlwiW2VdLChmdW5jdGlvbihlLHQsbixvLHIpe3ZhciBzPXQuZXhlYztyZXR1cm4gcz09PWVyfHxzPT09bnIuZXhlYz9hJiYhcj97ZG9uZTohMCx2YWx1ZTppLmNhbGwodCxuLG8pfTp7ZG9uZTohMCx2YWx1ZTplLmNhbGwobix0LG8pfTp7ZG9uZTohMX19KSk7SGUoU3RyaW5nLnByb3RvdHlwZSxlLHVbMF0pLEhlKG5yLHIsdVsxXSl9byYmQ2UobnJbcl0sXCJzaGFtXCIsITApfSxycj1rbi5jaGFyQXQsYXI9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0KyhuP3JyKGUsdCkubGVuZ3RoOjEpfSxzcj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZXhlYztpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBuKXt2YXIgbz1uLmNhbGwoZSx0KTtpZihcIm9iamVjdFwiIT10eXBlb2Ygbyl0aHJvdyBUeXBlRXJyb3IoXCJSZWdFeHAgZXhlYyBtZXRob2QgcmV0dXJuZWQgc29tZXRoaW5nIG90aGVyIHRoYW4gYW4gT2JqZWN0IG9yIG51bGxcIik7cmV0dXJuIG99aWYoXCJSZWdFeHBcIiE9PUYoZSkpdGhyb3cgVHlwZUVycm9yKFwiUmVnRXhwI2V4ZWMgY2FsbGVkIG9uIGluY29tcGF0aWJsZSByZWNlaXZlclwiKTtyZXR1cm4gZXIuY2FsbChlLHQpfTtvcihcIm1hdGNoXCIsKGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bZnVuY3Rpb24odCl7dmFyIG49Vih0aGlzKSxvPW51bGw9PXQ/dm9pZCAwOnRbZV07cmV0dXJuIHZvaWQgMCE9PW8/by5jYWxsKHQsbik6bmV3IFJlZ0V4cCh0KVtlXShNdChuKSl9LGZ1bmN0aW9uKGUpe3ZhciBvPVNlKHRoaXMpLHI9TXQoZSksYT1uKHQsbyxyKTtpZihhLmRvbmUpcmV0dXJuIGEudmFsdWU7aWYoIW8uZ2xvYmFsKXJldHVybiBzcihvLHIpO3ZhciBzPW8udW5pY29kZTtvLmxhc3RJbmRleD0wO2Zvcih2YXIgaSx1PVtdLGM9MDtudWxsIT09KGk9c3IobyxyKSk7KXt2YXIgbD1NdChpWzBdKTt1W2NdPWwsXCJcIj09PWwmJihvLmxhc3RJbmRleD1hcihyLFdlKG8ubGFzdEluZGV4KSxzKSksYysrfXJldHVybiAwPT09Yz9udWxsOnV9XX0pKSx2dCh7dGFyZ2V0OlwiRGF0ZVwiLHN0YXQ6ITB9LHtub3c6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19KTt2YXIgaXI9Z2UoXCJ1bnNjb3BhYmxlc1wiKSx1cj1BcnJheS5wcm90b3R5cGU7bnVsbD09dXJbaXJdJiZFZS5mKHVyLGlyLHtjb25maWd1cmFibGU6ITAsdmFsdWU6cXQobnVsbCl9KTt2YXIgY3I9ZnVuY3Rpb24oZSl7dXJbaXJdW2VdPSEwfSxscj1ldC5pbmNsdWRlczt2dCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMH0se2luY2x1ZGVzOmZ1bmN0aW9uKGUpe3JldHVybiBscih0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLGNyKFwiaW5jbHVkZXNcIik7dmFyIHByPWdlKFwibWF0Y2hcIiksZHI9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIEIoZSkmJih2b2lkIDAhPT0odD1lW3ByXSk/ISF0OlwiUmVnRXhwXCI9PUYoZSkpfSxncj1mdW5jdGlvbihlKXtpZihkcihlKSl0aHJvdyBUeXBlRXJyb3IoXCJUaGUgbWV0aG9kIGRvZXNuJ3QgYWNjZXB0IHJlZ3VsYXIgZXhwcmVzc2lvbnNcIik7cmV0dXJuIGV9LGhyPWdlKFwibWF0Y2hcIiksZnI9ZnVuY3Rpb24oZSl7dmFyIHQ9Ly4vO3RyeXtcIi8uL1wiW2VdKHQpfWNhdGNoKG4pe3RyeXtyZXR1cm4gdFtocl09ITEsXCIvLi9cIltlXSh0KX1jYXRjaChvKXt9fXJldHVybiExfTt2dCh7dGFyZ2V0OlwiU3RyaW5nXCIscHJvdG86ITAsZm9yY2VkOiFmcihcImluY2x1ZGVzXCIpfSx7aW5jbHVkZXM6ZnVuY3Rpb24oZSl7cmV0dXJuISF+TXQoVih0aGlzKSkuaW5kZXhPZihNdChncihlKSksYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pO3ZhciBfcj1mdW5jdGlvbihlKXt2YXIgdD1NdChWKHRoaXMpKSxuPVwiXCIsbz1ZZShlKTtpZihvPDB8fEluZmluaXR5PT1vKXRocm93IFJhbmdlRXJyb3IoXCJXcm9uZyBudW1iZXIgb2YgcmVwZXRpdGlvbnNcIik7Zm9yKDtvPjA7KG8+Pj49MSkmJih0Kz10KSkxJm8mJihuKz10KTtyZXR1cm4gbn0sbXI9TWF0aC5jZWlsLHZyPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4sbyl7dmFyIHIsYSxzPU10KFYodCkpLGk9cy5sZW5ndGgsdT12b2lkIDA9PT1vP1wiIFwiOk10KG8pLGM9V2Uobik7cmV0dXJuIGM8PWl8fFwiXCI9PXU/czooKGE9X3IuY2FsbCh1LG1yKChyPWMtaSkvdS5sZW5ndGgpKSkubGVuZ3RoPnImJihhPWEuc2xpY2UoMCxyKSksZT9zK2E6YStzKX19LE1yPXtzdGFydDp2cighMSksZW5kOnZyKCEwKX0uc3RhcnQseXI9TWF0aC5hYnMsSXI9RGF0ZS5wcm90b3R5cGUsVHI9SXIuZ2V0VGltZSxTcj1Jci50b0lTT1N0cmluZyxEcj1MKChmdW5jdGlvbigpe3JldHVyblwiMDM4NS0wNy0yNVQwNzowNjozOS45OTlaXCIhPVNyLmNhbGwobmV3IERhdGUoLTUwMDAwMDAwMDAwMDAxKSl9KSl8fCFMKChmdW5jdGlvbigpe1NyLmNhbGwobmV3IERhdGUoTmFOKSl9KSk/ZnVuY3Rpb24oKXtpZighaXNGaW5pdGUoVHIuY2FsbCh0aGlzKSkpdGhyb3cgUmFuZ2VFcnJvcihcIkludmFsaWQgdGltZSB2YWx1ZVwiKTt2YXIgZT10aGlzLmdldFVUQ0Z1bGxZZWFyKCksdD10aGlzLmdldFVUQ01pbGxpc2Vjb25kcygpLG49ZTwwP1wiLVwiOmU+OTk5OT9cIitcIjpcIlwiO3JldHVybiBuK01yKHlyKGUpLG4/Njo0LDApK1wiLVwiK01yKHRoaXMuZ2V0VVRDTW9udGgoKSsxLDIsMCkrXCItXCIrTXIodGhpcy5nZXRVVENEYXRlKCksMiwwKStcIlRcIitNcih0aGlzLmdldFVUQ0hvdXJzKCksMiwwKStcIjpcIitNcih0aGlzLmdldFVUQ01pbnV0ZXMoKSwyLDApK1wiOlwiK01yKHRoaXMuZ2V0VVRDU2Vjb25kcygpLDIsMCkrXCIuXCIrTXIodCwzLDApK1wiWlwifTpTcjt2dCh7dGFyZ2V0OlwiRGF0ZVwiLHByb3RvOiEwLGZvcmNlZDpEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyE9PURyfSx7dG9JU09TdHJpbmc6RHJ9KTt2YXIgRXI9TWF0aC5mbG9vcixDcj1cIlwiLnJlcGxhY2UsQXI9L1xcJChbJCYnYF18XFxkezEsMn18PFtePl0qPikvZyxrcj0vXFwkKFskJidgXXxcXGR7MSwyfSkvZyxOcj1mdW5jdGlvbihlLHQsbixvLHIsYSl7dmFyIHM9bitlLmxlbmd0aCxpPW8ubGVuZ3RoLHU9a3I7cmV0dXJuIHZvaWQgMCE9PXImJihyPXJlKHIpLHU9QXIpLENyLmNhbGwoYSx1LChmdW5jdGlvbihhLHUpe3ZhciBjO3N3aXRjaCh1LmNoYXJBdCgwKSl7Y2FzZVwiJFwiOnJldHVyblwiJFwiO2Nhc2VcIiZcIjpyZXR1cm4gZTtjYXNlXCJgXCI6cmV0dXJuIHQuc2xpY2UoMCxuKTtjYXNlXCInXCI6cmV0dXJuIHQuc2xpY2Uocyk7Y2FzZVwiPFwiOmM9clt1LnNsaWNlKDEsLTEpXTticmVhaztkZWZhdWx0OnZhciBsPSt1O2lmKDA9PT1sKXJldHVybiBhO2lmKGw+aSl7dmFyIHA9RXIobC8xMCk7cmV0dXJuIDA9PT1wP2E6cDw9aT92b2lkIDA9PT1vW3AtMV0/dS5jaGFyQXQoMSk6b1twLTFdK3UuY2hhckF0KDEpOmF9Yz1vW2wtMV19cmV0dXJuIHZvaWQgMD09PWM/XCJcIjpjfSkpfSxPcj1nZShcInJlcGxhY2VcIiksTHI9TWF0aC5tYXgsUnI9TWF0aC5taW4sYnI9XCIkMFwiPT09XCJhXCIucmVwbGFjZSgvLi8sXCIkMFwiKSx3cj0hIS8uL1tPcl0mJlwiXCI9PT0vLi9bT3JdKFwiYVwiLFwiJDBcIik7b3IoXCJyZXBsYWNlXCIsKGZ1bmN0aW9uKGUsdCxuKXt2YXIgbz13cj9cIiRcIjpcIiQwXCI7cmV0dXJuW2Z1bmN0aW9uKGUsbil7dmFyIG89Vih0aGlzKSxyPW51bGw9PWU/dm9pZCAwOmVbT3JdO3JldHVybiB2b2lkIDAhPT1yP3IuY2FsbChlLG8sbik6dC5jYWxsKE10KG8pLGUsbil9LGZ1bmN0aW9uKGUscil7dmFyIGE9U2UodGhpcykscz1NdChlKTtpZihcInN0cmluZ1wiPT10eXBlb2YgciYmLTE9PT1yLmluZGV4T2YobykmJi0xPT09ci5pbmRleE9mKFwiJDxcIikpe3ZhciBpPW4odCxhLHMscik7aWYoaS5kb25lKXJldHVybiBpLnZhbHVlfXZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHI7dXx8KHI9TXQocikpO3ZhciBjPWEuZ2xvYmFsO2lmKGMpe3ZhciBsPWEudW5pY29kZTthLmxhc3RJbmRleD0wfWZvcih2YXIgcD1bXTs7KXt2YXIgZD1zcihhLHMpO2lmKG51bGw9PT1kKWJyZWFrO2lmKHAucHVzaChkKSwhYylicmVhaztcIlwiPT09TXQoZFswXSkmJihhLmxhc3RJbmRleD1hcihzLFdlKGEubGFzdEluZGV4KSxsKSl9Zm9yKHZhciBnLGg9XCJcIixmPTAsXz0wO188cC5sZW5ndGg7XysrKXtkPXBbX107Zm9yKHZhciBtPU10KGRbMF0pLHY9THIoUnIoWWUoZC5pbmRleCkscy5sZW5ndGgpLDApLE09W10seT0xO3k8ZC5sZW5ndGg7eSsrKU0ucHVzaCh2b2lkIDA9PT0oZz1kW3ldKT9nOlN0cmluZyhnKSk7dmFyIEk9ZC5ncm91cHM7aWYodSl7dmFyIFQ9W21dLmNvbmNhdChNLHYscyk7dm9pZCAwIT09SSYmVC5wdXNoKEkpO3ZhciBTPU10KHIuYXBwbHkodm9pZCAwLFQpKX1lbHNlIFM9TnIobSxzLHYsTSxJLHIpO3Y+PWYmJihoKz1zLnNsaWNlKGYsdikrUyxmPXYrbS5sZW5ndGgpfXJldHVybiBoK3Muc2xpY2UoZil9XX0pLCEhTCgoZnVuY3Rpb24oKXt2YXIgZT0vLi87cmV0dXJuIGUuZXhlYz1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBlLmdyb3Vwcz17YTpcIjdcIn0sZX0sXCI3XCIhPT1cIlwiLnJlcGxhY2UoZSxcIiQ8YT5cIil9KSl8fCFicnx8d3IpO3ZhciBQcj1CZS5zZXQsR3I9QmUuZ2V0dGVyRm9yKFwiQXJyYXkgSXRlcmF0b3JcIiksVXI9WW4oQXJyYXksXCJBcnJheVwiLChmdW5jdGlvbihlLHQpe1ByKHRoaXMse3R5cGU6XCJBcnJheSBJdGVyYXRvclwiLHRhcmdldDpLKGUpLGluZGV4OjAsa2luZDp0fSl9KSwoZnVuY3Rpb24oKXt2YXIgZT1Hcih0aGlzKSx0PWUudGFyZ2V0LG49ZS5raW5kLG89ZS5pbmRleCsrO3JldHVybiF0fHxvPj10Lmxlbmd0aD8oZS50YXJnZXQ9dm9pZCAwLHt2YWx1ZTp2b2lkIDAsZG9uZTohMH0pOlwia2V5c1wiPT1uP3t2YWx1ZTpvLGRvbmU6ITF9OlwidmFsdWVzXCI9PW4/e3ZhbHVlOnRbb10sZG9uZTohMX06e3ZhbHVlOltvLHRbb11dLGRvbmU6ITF9fSksXCJ2YWx1ZXNcIik7cm4uQXJndW1lbnRzPXJuLkFycmF5LGNyKFwia2V5c1wiKSxjcihcInZhbHVlc1wiKSxjcihcImVudHJpZXNcIik7dmFyIEZyPWdlKFwiaXRlcmF0b3JcIikscXI9Z2UoXCJ0b1N0cmluZ1RhZ1wiKSx4cj1Vci52YWx1ZXM7Zm9yKHZhciBWciBpbiBYdCl7dmFyIEtyPU9bVnJdLEJyPUtyJiZLci5wcm90b3R5cGU7aWYoQnIpe2lmKEJyW0ZyXSE9PXhyKXRyeXtDZShCcixGcix4cil9Y2F0Y2goX00pe0JyW0ZyXT14cn1pZihCcltxcl18fENlKEJyLHFyLFZyKSxYdFtWcl0pZm9yKHZhciBIciBpbiBVcilpZihCcltIcl0hPT1VcltIcl0pdHJ5e0NlKEJyLEhyLFVyW0hyXSl9Y2F0Y2goX00pe0JyW0hyXT1VcltIcl19fX12YXIganI9UW4oXCJzbGljZVwiKSwkcj1nZShcInNwZWNpZXNcIiksWXI9W10uc2xpY2UsenI9TWF0aC5tYXg7dnQoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOiFqcn0se3NsaWNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxyLGE9Syh0aGlzKSxzPVdlKGEubGVuZ3RoKSxpPVFlKGUscyksdT1RZSh2b2lkIDA9PT10P3M6dCxzKTtpZihLdChhKSYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mKG49YS5jb25zdHJ1Y3Rvcil8fG4hPT1BcnJheSYmIUt0KG4ucHJvdG90eXBlKT9CKG4pJiZudWxsPT09KG49blskcl0pJiYobj12b2lkIDApOm49dm9pZCAwLG49PT1BcnJheXx8dm9pZCAwPT09bikpcmV0dXJuIFlyLmNhbGwoYSxpLHUpO2ZvcihvPW5ldyh2b2lkIDA9PT1uP0FycmF5Om4pKHpyKHUtaSwwKSkscj0wO2k8dTtpKysscisrKWkgaW4gYSYmY24obyxyLGFbaV0pO3JldHVybiBvLmxlbmd0aD1yLG99fSk7dmFyIFdyPVtdLmpvaW4sSnI9eCE9T2JqZWN0LFhyPXp0KFwiam9pblwiLFwiLFwiKTt2dCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6SnJ8fCFYcn0se2pvaW46ZnVuY3Rpb24oZSl7cmV0dXJuIFdyLmNhbGwoSyh0aGlzKSx2b2lkIDA9PT1lP1wiLFwiOmUpfX0pO3ZhciBRcj1ldC5pbmRleE9mLFpyPVtdLmluZGV4T2YsZWE9ISFaciYmMS9bMV0uaW5kZXhPZigxLC0wKTwwLHRhPXp0KFwiaW5kZXhPZlwiKTt2dCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6ZWF8fCF0YX0se2luZGV4T2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIGVhP1pyLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8MDpRcih0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pO3ZhciBuYT1zdC5mLG9hPXt9LnRvU3RyaW5nLHJhPVwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxhYT17ZjpmdW5jdGlvbihlKXtyZXR1cm4gcmEmJlwiW29iamVjdCBXaW5kb3ddXCI9PW9hLmNhbGwoZSk/ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBuYShlKX1jYXRjaChfTSl7cmV0dXJuIHJhLnNsaWNlKCl9fShlKTpuYShLKGUpKX19LHNhPWFhLmYsaWE9TCgoZnVuY3Rpb24oKXtyZXR1cm4hT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoMSl9KSk7dnQoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOmlhfSx7Z2V0T3duUHJvcGVydHlOYW1lczpzYX0pO3ZhciB1YT1ZdC5maW5kLGNhPSEwO1wiZmluZFwiaW5bXSYmQXJyYXkoMSkuZmluZCgoZnVuY3Rpb24oKXtjYT0hMX0pKSx2dCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6Y2F9LHtmaW5kOmZ1bmN0aW9uKGUpe3JldHVybiB1YSh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLGNyKFwiZmluZFwiKTt2YXIgbGEscGEsZGEsZ2EsaGE9Ty5Qcm9taXNlLGZhPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIG8gaW4gdClIZShlLG8sdFtvXSxuKTtyZXR1cm4gZX0sX2E9Z2UoXCJzcGVjaWVzXCIpLG1hPWZ1bmN0aW9uKGUpe3ZhciB0PWooZSksbj1FZS5mO1ImJnQmJiF0W19hXSYmbih0LF9hLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9LHZhPWZ1bmN0aW9uKGUsdCxuKXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBUeXBlRXJyb3IoXCJJbmNvcnJlY3QgXCIrKG4/bitcIiBcIjpcIlwiKStcImludm9jYXRpb25cIik7cmV0dXJuIGV9LE1hPWZ1bmN0aW9uKGUsdCl7dGhpcy5zdG9wcGVkPWUsdGhpcy5yZXN1bHQ9dH0seWE9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvLHIsYSxzLGksdSxjLGw9biYmbi50aGF0LHA9ISghbnx8IW4uQVNfRU5UUklFUyksZD0hKCFufHwhbi5JU19JVEVSQVRPUiksZz0hKCFufHwhbi5JTlRFUlJVUFRFRCksaD1WdCh0LGwsMStwK2cpLGY9ZnVuY3Rpb24oZSl7cmV0dXJuIG8mJm5uKG8pLG5ldyBNYSghMCxlKX0sXz1mdW5jdGlvbihlKXtyZXR1cm4gcD8oU2UoZSksZz9oKGVbMF0sZVsxXSxmKTpoKGVbMF0sZVsxXSkpOmc/aChlLGYpOmgoZSl9O2lmKGQpbz1lO2Vsc2V7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Yocj1fbihlKSkpdGhyb3cgVHlwZUVycm9yKFwiVGFyZ2V0IGlzIG5vdCBpdGVyYWJsZVwiKTtpZih1bihyKSl7Zm9yKGE9MCxzPVdlKGUubGVuZ3RoKTtzPmE7YSsrKWlmKChpPV8oZVthXSkpJiZpIGluc3RhbmNlb2YgTWEpcmV0dXJuIGk7cmV0dXJuIG5ldyBNYSghMSl9bz1yLmNhbGwoZSl9Zm9yKHU9by5uZXh0OyEoYz11LmNhbGwobykpLmRvbmU7KXt0cnl7aT1fKGMudmFsdWUpfWNhdGNoKF9NKXt0aHJvdyBubihvKSxfTX1pZihcIm9iamVjdFwiPT10eXBlb2YgaSYmaSYmaSBpbnN0YW5jZW9mIE1hKXJldHVybiBpfXJldHVybiBuZXcgTWEoITEpfSxJYT1nZShcInNwZWNpZXNcIiksVGE9ZnVuY3Rpb24oZSx0KXt2YXIgbixvPVNlKGUpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1vfHxudWxsPT0obj1TZShvKVtJYV0pP3Q6eHQobil9LFNhPS8oPzppcGhvbmV8aXBvZHxpcGFkKS4qYXBwbGV3ZWJraXQvaS50ZXN0KCQpLERhPVwicHJvY2Vzc1wiPT1GKE8ucHJvY2VzcyksRWE9Ty5zZXRJbW1lZGlhdGUsQ2E9Ty5jbGVhckltbWVkaWF0ZSxBYT1PLnByb2Nlc3Msa2E9Ty5NZXNzYWdlQ2hhbm5lbCxOYT1PLkRpc3BhdGNoLE9hPTAsTGE9e307dHJ5e2xhPU8ubG9jYXRpb259Y2F0Y2goX00pe312YXIgUmE9ZnVuY3Rpb24oZSl7aWYoTGEuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PUxhW2VdO2RlbGV0ZSBMYVtlXSx0KCl9fSxiYT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtSYShlKX19LHdhPWZ1bmN0aW9uKGUpe1JhKGUuZGF0YSl9LFBhPWZ1bmN0aW9uKGUpe08ucG9zdE1lc3NhZ2UoU3RyaW5nKGUpLGxhLnByb3RvY29sK1wiLy9cIitsYS5ob3N0KX07RWEmJkNhfHwoRWE9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49YXJndW1lbnRzLmxlbmd0aCxvPTE7bj5vOyl0LnB1c2goYXJndW1lbnRzW28rK10pO3JldHVybiBMYVsrK09hXT1mdW5jdGlvbigpeyhcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSkpLmFwcGx5KHZvaWQgMCx0KX0scGEoT2EpLE9hfSxDYT1mdW5jdGlvbihlKXtkZWxldGUgTGFbZV19LERhP3BhPWZ1bmN0aW9uKGUpe0FhLm5leHRUaWNrKGJhKGUpKX06TmEmJk5hLm5vdz9wYT1mdW5jdGlvbihlKXtOYS5ub3coYmEoZSkpfTprYSYmIVNhPyhnYT0oZGE9bmV3IGthKS5wb3J0MixkYS5wb3J0MS5vbm1lc3NhZ2U9d2EscGE9VnQoZ2EucG9zdE1lc3NhZ2UsZ2EsMSkpOk8uYWRkRXZlbnRMaXN0ZW5lciYmXCJmdW5jdGlvblwiPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFPLmltcG9ydFNjcmlwdHMmJmxhJiZcImZpbGU6XCIhPT1sYS5wcm90b2NvbCYmIUwoUGEpPyhwYT1QYSxPLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsd2EsITEpKTpwYT1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiaW4gTWUoXCJzY3JpcHRcIik/ZnVuY3Rpb24oZSl7YnQuYXBwZW5kQ2hpbGQoTWUoXCJzY3JpcHRcIikpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2J0LnJlbW92ZUNoaWxkKHRoaXMpLFJhKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChiYShlKSwwKX0pO3ZhciBHYSxVYSxGYSxxYSx4YSxWYSxLYSxCYSxIYT17c2V0OkVhLGNsZWFyOkNhfSxqYT0vaXBob25lfGlwb2R8aXBhZC9pLnRlc3QoJCkmJnZvaWQgMCE9PU8uUGViYmxlLCRhPS93ZWIwcyg/IS4qY2hyb21lKS9pLnRlc3QoJCksWWE9VGUuZix6YT1IYS5zZXQsV2E9Ty5NdXRhdGlvbk9ic2VydmVyfHxPLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsSmE9Ty5kb2N1bWVudCxYYT1PLnByb2Nlc3MsUWE9Ty5Qcm9taXNlLFphPVlhKE8sXCJxdWV1ZU1pY3JvdGFza1wiKSxlcz1aYSYmWmEudmFsdWU7ZXN8fChHYT1mdW5jdGlvbigpe3ZhciBlLHQ7Zm9yKERhJiYoZT1YYS5kb21haW4pJiZlLmV4aXQoKTtVYTspe3Q9VWEuZm4sVWE9VWEubmV4dDt0cnl7dCgpfWNhdGNoKF9NKXt0aHJvdyBVYT9xYSgpOkZhPXZvaWQgMCxfTX19RmE9dm9pZCAwLGUmJmUuZW50ZXIoKX0sU2F8fERhfHwkYXx8IVdhfHwhSmE/IWphJiZRYSYmUWEucmVzb2x2ZT8oKEthPVFhLnJlc29sdmUodm9pZCAwKSkuY29uc3RydWN0b3I9UWEsQmE9S2EudGhlbixxYT1mdW5jdGlvbigpe0JhLmNhbGwoS2EsR2EpfSk6cWE9RGE/ZnVuY3Rpb24oKXtYYS5uZXh0VGljayhHYSl9OmZ1bmN0aW9uKCl7emEuY2FsbChPLEdhKX06KHhhPSEwLFZhPUphLmNyZWF0ZVRleHROb2RlKFwiXCIpLG5ldyBXYShHYSkub2JzZXJ2ZShWYSx7Y2hhcmFjdGVyRGF0YTohMH0pLHFhPWZ1bmN0aW9uKCl7VmEuZGF0YT14YT0heGF9KSk7dmFyIHRzLG5zLG9zLHJzLGFzPWVzfHxmdW5jdGlvbihlKXt2YXIgdD17Zm46ZSxuZXh0OnZvaWQgMH07RmEmJihGYS5uZXh0PXQpLFVhfHwoVWE9dCxxYSgpKSxGYT10fSxzcz1mdW5jdGlvbihlKXt2YXIgdCxuO3RoaXMucHJvbWlzZT1uZXcgZSgoZnVuY3Rpb24oZSxvKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1uKXRocm93IFR5cGVFcnJvcihcIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yXCIpO3Q9ZSxuPW99KSksdGhpcy5yZXNvbHZlPXh0KHQpLHRoaXMucmVqZWN0PXh0KG4pfSxpcz17ZjpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IHNzKGUpfX0sdXM9ZnVuY3Rpb24oZSx0KXtpZihTZShlKSxCKHQpJiZ0LmNvbnN0cnVjdG9yPT09ZSlyZXR1cm4gdDt2YXIgbj1pcy5mKGUpO3JldHVybigwLG4ucmVzb2x2ZSkodCksbi5wcm9taXNlfSxjcz1mdW5jdGlvbihlKXt0cnl7cmV0dXJue2Vycm9yOiExLHZhbHVlOmUoKX19Y2F0Y2goX00pe3JldHVybntlcnJvcjohMCx2YWx1ZTpfTX19fSxscz1cIm9iamVjdFwiPT10eXBlb2Ygd2luZG93LHBzPUhhLnNldCxkcz1nZShcInNwZWNpZXNcIiksZ3M9XCJQcm9taXNlXCIsaHM9QmUuZ2V0LGZzPUJlLnNldCxfcz1CZS5nZXR0ZXJGb3IoZ3MpLG1zPWhhJiZoYS5wcm90b3R5cGUsdnM9aGEsTXM9bXMseXM9Ty5UeXBlRXJyb3IsSXM9Ty5kb2N1bWVudCxUcz1PLnByb2Nlc3MsU3M9aXMuZixEcz1TcyxFcz0hIShJcyYmSXMuY3JlYXRlRXZlbnQmJk8uZGlzcGF0Y2hFdmVudCksQ3M9XCJmdW5jdGlvblwiPT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50LEFzPSExLGtzPV90KGdzLChmdW5jdGlvbigpe3ZhciBlPUxlKHZzKSx0PWUhPT1TdHJpbmcodnMpO2lmKCF0JiY2Nj09PVgpcmV0dXJuITA7aWYoWD49NTEmJi9uYXRpdmUgY29kZS8udGVzdChlKSlyZXR1cm4hMTt2YXIgbj1uZXcgdnMoKGZ1bmN0aW9uKGUpe2UoMSl9KSksbz1mdW5jdGlvbihlKXtlKChmdW5jdGlvbigpe30pLChmdW5jdGlvbigpe30pKX07cmV0dXJuKG4uY29uc3RydWN0b3I9e30pW2RzXT1vLCEoQXM9bi50aGVuKChmdW5jdGlvbigpe30pKWluc3RhbmNlb2Ygbyl8fCF0JiZscyYmIUNzfSkpLE5zPWtzfHwhVG4oKGZ1bmN0aW9uKGUpe3ZzLmFsbChlKS5jYXRjaCgoZnVuY3Rpb24oKXt9KSl9KSksT3M9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuISghQihlKXx8XCJmdW5jdGlvblwiIT10eXBlb2YodD1lLnRoZW4pKSYmdH0sTHM9ZnVuY3Rpb24oZSx0KXtpZighZS5ub3RpZmllZCl7ZS5ub3RpZmllZD0hMDt2YXIgbj1lLnJlYWN0aW9uczthcygoZnVuY3Rpb24oKXtmb3IodmFyIG89ZS52YWx1ZSxyPTE9PWUuc3RhdGUsYT0wO24ubGVuZ3RoPmE7KXt2YXIgcyxpLHUsYz1uW2ErK10sbD1yP2Mub2s6Yy5mYWlsLHA9Yy5yZXNvbHZlLGQ9Yy5yZWplY3QsZz1jLmRvbWFpbjt0cnl7bD8ocnx8KDI9PT1lLnJlamVjdGlvbiYmUHMoZSksZS5yZWplY3Rpb249MSksITA9PT1sP3M9bzooZyYmZy5lbnRlcigpLHM9bChvKSxnJiYoZy5leGl0KCksdT0hMCkpLHM9PT1jLnByb21pc2U/ZCh5cyhcIlByb21pc2UtY2hhaW4gY3ljbGVcIikpOihpPU9zKHMpKT9pLmNhbGwocyxwLGQpOnAocykpOmQobyl9Y2F0Y2goX00pe2cmJiF1JiZnLmV4aXQoKSxkKF9NKX19ZS5yZWFjdGlvbnM9W10sZS5ub3RpZmllZD0hMSx0JiYhZS5yZWplY3Rpb24mJmJzKGUpfSkpfX0sUnM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvLHI7RXM/KChvPUlzLmNyZWF0ZUV2ZW50KFwiRXZlbnRcIikpLnByb21pc2U9dCxvLnJlYXNvbj1uLG8uaW5pdEV2ZW50KGUsITEsITApLE8uZGlzcGF0Y2hFdmVudChvKSk6bz17cHJvbWlzZTp0LHJlYXNvbjpufSwhQ3MmJihyPU9bXCJvblwiK2VdKT9yKG8pOlwidW5oYW5kbGVkcmVqZWN0aW9uXCI9PT1lJiZmdW5jdGlvbihlLHQpe3ZhciBuPU8uY29uc29sZTtuJiZuLmVycm9yJiYoMT09PWFyZ3VtZW50cy5sZW5ndGg/bi5lcnJvcihlKTpuLmVycm9yKGUsdCkpfShcIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblwiLG4pfSxicz1mdW5jdGlvbihlKXtwcy5jYWxsKE8sKGZ1bmN0aW9uKCl7dmFyIHQsbj1lLmZhY2FkZSxvPWUudmFsdWU7aWYod3MoZSkmJih0PWNzKChmdW5jdGlvbigpe0RhP1RzLmVtaXQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixvLG4pOlJzKFwidW5oYW5kbGVkcmVqZWN0aW9uXCIsbixvKX0pKSxlLnJlamVjdGlvbj1EYXx8d3MoZSk/MjoxLHQuZXJyb3IpKXRocm93IHQudmFsdWV9KSl9LHdzPWZ1bmN0aW9uKGUpe3JldHVybiAxIT09ZS5yZWplY3Rpb24mJiFlLnBhcmVudH0sUHM9ZnVuY3Rpb24oZSl7cHMuY2FsbChPLChmdW5jdGlvbigpe3ZhciB0PWUuZmFjYWRlO0RhP1RzLmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsdCk6UnMoXCJyZWplY3Rpb25oYW5kbGVkXCIsdCxlLnZhbHVlKX0pKX0sR3M9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihvKXtlKHQsbyxuKX19LFVzPWZ1bmN0aW9uKGUsdCxuKXtlLmRvbmV8fChlLmRvbmU9ITAsbiYmKGU9biksZS52YWx1ZT10LGUuc3RhdGU9MixMcyhlLCEwKSl9LEZzPWZ1bmN0aW9uKGUsdCxuKXtpZighZS5kb25lKXtlLmRvbmU9ITAsbiYmKGU9bik7dHJ5e2lmKGUuZmFjYWRlPT09dCl0aHJvdyB5cyhcIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmXCIpO3ZhciBvPU9zKHQpO28/YXMoKGZ1bmN0aW9uKCl7dmFyIG49e2RvbmU6ITF9O3RyeXtvLmNhbGwodCxHcyhGcyxuLGUpLEdzKFVzLG4sZSkpfWNhdGNoKF9NKXtVcyhuLF9NLGUpfX0pKTooZS52YWx1ZT10LGUuc3RhdGU9MSxMcyhlLCExKSl9Y2F0Y2goX00pe1VzKHtkb25lOiExfSxfTSxlKX19fTtpZihrcyYmKE1zPSh2cz1mdW5jdGlvbihlKXt2YSh0aGlzLHZzLGdzKSx4dChlKSx0cy5jYWxsKHRoaXMpO3ZhciB0PWhzKHRoaXMpO3RyeXtlKEdzKEZzLHQpLEdzKFVzLHQpKX1jYXRjaChfTSl7VXModCxfTSl9fSkucHJvdG90eXBlLCh0cz1mdW5jdGlvbihlKXtmcyh0aGlzLHt0eXBlOmdzLGRvbmU6ITEsbm90aWZpZWQ6ITEscGFyZW50OiExLHJlYWN0aW9uczpbXSxyZWplY3Rpb246ITEsc3RhdGU6MCx2YWx1ZTp2b2lkIDB9KX0pLnByb3RvdHlwZT1mYShNcyx7dGhlbjpmdW5jdGlvbihlLHQpe3ZhciBuPV9zKHRoaXMpLG89U3MoVGEodGhpcyx2cykpO3JldHVybiBvLm9rPVwiZnVuY3Rpb25cIiE9dHlwZW9mIGV8fGUsby5mYWlsPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQsby5kb21haW49RGE/VHMuZG9tYWluOnZvaWQgMCxuLnBhcmVudD0hMCxuLnJlYWN0aW9ucy5wdXNoKG8pLDAhPW4uc3RhdGUmJkxzKG4sITEpLG8ucHJvbWlzZX0sY2F0Y2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSksbnM9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgdHMsdD1ocyhlKTt0aGlzLnByb21pc2U9ZSx0aGlzLnJlc29sdmU9R3MoRnMsdCksdGhpcy5yZWplY3Q9R3MoVXMsdCl9LGlzLmY9U3M9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT12c3x8ZT09PW9zP25ldyBucyhlKTpEcyhlKX0sXCJmdW5jdGlvblwiPT10eXBlb2YgaGEmJm1zIT09T2JqZWN0LnByb3RvdHlwZSkpe3JzPW1zLnRoZW4sQXN8fChIZShtcyxcInRoZW5cIiwoZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3JldHVybiBuZXcgdnMoKGZ1bmN0aW9uKGUsdCl7cnMuY2FsbChuLGUsdCl9KSkudGhlbihlLHQpfSkse3Vuc2FmZTohMH0pLEhlKG1zLFwiY2F0Y2hcIixNcy5jYXRjaCx7dW5zYWZlOiEwfSkpO3RyeXtkZWxldGUgbXMuY29uc3RydWN0b3J9Y2F0Y2goX00pe31LbiYmS24obXMsTXMpfXZ0KHtnbG9iYWw6ITAsd3JhcDohMCxmb3JjZWQ6a3N9LHtQcm9taXNlOnZzfSksRm4odnMsZ3MsITEpLG1hKGdzKSxvcz1qKGdzKSx2dCh7dGFyZ2V0OmdzLHN0YXQ6ITAsZm9yY2VkOmtzfSx7cmVqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PVNzKHRoaXMpO3JldHVybiB0LnJlamVjdC5jYWxsKHZvaWQgMCxlKSx0LnByb21pc2V9fSksdnQoe3RhcmdldDpncyxzdGF0OiEwLGZvcmNlZDprc30se3Jlc29sdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIHVzKHRoaXMsZSl9fSksdnQoe3RhcmdldDpncyxzdGF0OiEwLGZvcmNlZDpOc30se2FsbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49U3ModCksbz1uLnJlc29sdmUscj1uLnJlamVjdCxhPWNzKChmdW5jdGlvbigpe3ZhciBuPXh0KHQucmVzb2x2ZSksYT1bXSxzPTAsaT0xO3lhKGUsKGZ1bmN0aW9uKGUpe3ZhciB1PXMrKyxjPSExO2EucHVzaCh2b2lkIDApLGkrKyxuLmNhbGwodCxlKS50aGVuKChmdW5jdGlvbihlKXtjfHwoYz0hMCxhW3VdPWUsLS1pfHxvKGEpKX0pLHIpfSkpLC0taXx8byhhKX0pKTtyZXR1cm4gYS5lcnJvciYmcihhLnZhbHVlKSxuLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVNzKHQpLG89bi5yZWplY3Qscj1jcygoZnVuY3Rpb24oKXt2YXIgcj14dCh0LnJlc29sdmUpO3lhKGUsKGZ1bmN0aW9uKGUpe3IuY2FsbCh0LGUpLnRoZW4obi5yZXNvbHZlLG8pfSkpfSkpO3JldHVybiByLmVycm9yJiZvKHIudmFsdWUpLG4ucHJvbWlzZX19KTt2YXIgcXM9a24uY29kZUF0O3Z0KHt0YXJnZXQ6XCJTdHJpbmdcIixwcm90bzohMH0se2NvZGVQb2ludEF0OmZ1bmN0aW9uKGUpe3JldHVybiBxcyh0aGlzLGUpfX0pO3ZhciB4cz1FdC50cmltLFZzPU8ucGFyc2VGbG9hdCxLcz0xL1ZzKHl0K1wiLTBcIikhPS1JbmZpbml0eT9mdW5jdGlvbihlKXt2YXIgdD14cyhNdChlKSksbj1Wcyh0KTtyZXR1cm4gMD09PW4mJlwiLVwiPT10LmNoYXJBdCgwKT8tMDpufTpWczt2dCh7Z2xvYmFsOiEwLGZvcmNlZDpwYXJzZUZsb2F0IT1Lc30se3BhcnNlRmxvYXQ6S3N9KTt2YXIgQnM9e1dFQjo3LFdYX01QOjgsUVFfTVA6OSxUVF9NUDoxMCxCQUlEVV9NUDoxMSxBTElfTVA6MTIsVU5JX05BVElWRV9BUFA6MTR9LEhzPVwiMS43LjNcIixqcz01MzcwNDgxNjgsJHM9MSxZcz0yLHpzPTMsV3M9e0hPU1Q6e0NVUlJFTlQ6e0RFRkFVTFQ6XCJcIixCQUNLVVA6XCJcIn0sVEVTVDp7REVGQVVMVDpcIndzczovL3dzcy1kZXYudGltLnFxLmNvbVwiLEJBQ0tVUDpcIndzczovL3dzcy1kZXYudGltLnFxLmNvbVwifSxQUk9EVUNUSU9OOntERUZBVUxUOlwid3NzOi8vd3NzLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3MudGltLnFxLmNvbVwifSxPVkVSU0VBX1BST0RVQ1RJT046e0RFRkFVTFQ6XCJ3c3M6Ly93c3MuaW0ucWNsb3VkLmNvbVwiLEJBQ0tVUDpcIndzczovL3dzcy5pbS5xY2xvdWQuY29tXCJ9LHNldEN1cnJlbnQ6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MjtlPT09JHM/dGhpcy5DVVJSRU5UPXRoaXMuVEVTVDplPT09WXM/dGhpcy5DVVJSRU5UPXRoaXMuUFJPRFVDVElPTjplPT09enMmJih0aGlzLkNVUlJFTlQ9dGhpcy5PVkVSU0VBX1BST0RVQ1RJT04pfX0sTkFNRTp7T1BFTl9JTTpcIm9wZW5pbVwiLEdST1VQOlwiZ3JvdXBfb3Blbl9odHRwX3N2Y1wiLEdST1VQX0FUVFI6XCJncm91cF9vcGVuX2F0dHJfaHR0cF9zdmNcIixGUklFTkQ6XCJzbnNcIixQUk9GSUxFOlwicHJvZmlsZVwiLFJFQ0VOVF9DT05UQUNUOlwicmVjZW50Y29udGFjdFwiLFBJQzpcIm9wZW5waWNcIixCSUdfR1JPVVBfTk9fQVVUSDpcImdyb3VwX29wZW5faHR0cF9ub2F1dGhfc3ZjXCIsQklHX0dST1VQX0xPTkdfUE9MTElORzpcImdyb3VwX29wZW5fbG9uZ19wb2xsaW5nX2h0dHBfc3ZjXCIsQklHX0dST1VQX0xPTkdfUE9MTElOR19OT19BVVRIOlwiZ3JvdXBfb3Blbl9sb25nX3BvbGxpbmdfaHR0cF9ub2F1dGhfc3ZjXCIsSU1fT1BFTl9TVEFUOlwiaW1vcGVuc3RhdFwiLFdFQl9JTTpcIndlYmltXCIsSU1fQ09TX1NJR046XCJpbV9jb3Nfc2lnbl9zdnJcIixDVVNUT01fVVBMT0FEOlwiaW1fY29zX21zZ1wiLEhFQVJUQkVBVDpcImhlYXJ0YmVhdFwiLElNX09QRU5fUFVTSDpcImltX29wZW5fcHVzaFwiLElNX09QRU5fU1RBVFVTOlwiaW1fb3Blbl9zdGF0dXNcIixJTV9MT05HX01FU1NBR0U6XCJpbV9sb25nX21zZ1wiLENMT1VEX0NPTlRST0w6XCJpbV9zZGtfY29uZmlnX21nclwifSxDTUQ6e0FDQ0VTU19MQVlFUjpcImFjY2Vzc2xheWVyXCIsTE9HSU46XCJ3c2xvZ2luXCIsTE9HT1VUX0xPTkdfUE9MTDpcImxvbmdwb2xsaW5nbG9nb3V0XCIsTE9HT1VUOlwid3Nsb2dvdXRcIixIRUxMTzpcIndzaGVsbG9cIixQT1JUUkFJVF9HRVQ6XCJwb3J0cmFpdF9nZXRfYWxsXCIsUE9SVFJBSVRfU0VUOlwicG9ydHJhaXRfc2V0XCIsR0VUX0xPTkdfUE9MTF9JRDpcImdldGxvbmdwb2xsaW5naWRcIixMT05HX1BPTEw6XCJsb25ncG9sbGluZ1wiLEFWQ0hBVFJPT01fTE9OR19QT0xMOlwiZ2V0X21zZ1wiLEFERF9GUklFTkQ6XCJmcmllbmRfYWRkXCIsVVBEQVRFX0ZSSUVORDpcImZyaWVuZF91cGRhdGVcIixHRVRfRlJJRU5EX0xJU1Q6XCJmcmllbmRfZ2V0XCIsR0VUX0ZSSUVORF9QUk9GSUxFOlwiZnJpZW5kX2dldF9saXN0XCIsREVMRVRFX0ZSSUVORDpcImZyaWVuZF9kZWxldGVcIixDSEVDS19GUklFTkQ6XCJmcmllbmRfY2hlY2tcIixHRVRfRlJJRU5EX0dST1VQX0xJU1Q6XCJncm91cF9nZXRcIixSRVNQT05EX0ZSSUVORF9BUFBMSUNBVElPTjpcImZyaWVuZF9yZXNwb25zZVwiLEdFVF9GUklFTkRfQVBQTElDQVRJT05fTElTVDpcInBlbmRlbmN5X2dldFwiLERFTEVURV9GUklFTkRfQVBQTElDQVRJT046XCJwZW5kZW5jeV9kZWxldGVcIixSRVBPUlRfRlJJRU5EX0FQUExJQ0FUSU9OOlwicGVuZGVuY3lfcmVwb3J0XCIsR0VUX0dST1VQX0FQUExJQ0FUSU9OOlwiZ2V0X3BlbmRlbmN5XCIsQ1JFQVRFX0ZSSUVORF9HUk9VUDpcImdyb3VwX2FkZFwiLERFTEVURV9GUklFTkRfR1JPVVA6XCJncm91cF9kZWxldGVcIixVUERBVEVfRlJJRU5EX0dST1VQOlwiZ3JvdXBfdXBkYXRlXCIsR0VUX0JMQUNLTElTVDpcImJsYWNrX2xpc3RfZ2V0XCIsQUREX0JMQUNLTElTVDpcImJsYWNrX2xpc3RfYWRkXCIsREVMRVRFX0JMQUNLTElTVDpcImJsYWNrX2xpc3RfZGVsZXRlXCIsQ1JFQVRFX0dST1VQOlwiY3JlYXRlX2dyb3VwXCIsR0VUX0pPSU5FRF9HUk9VUFM6XCJnZXRfam9pbmVkX2dyb3VwX2xpc3RcIixTRVRfR1JPVVBfQVRUUklCVVRFUzpcInNldF9ncm91cF9hdHRyXCIsTU9ESUZZX0dST1VQX0FUVFJJQlVURVM6XCJtb2RpZnlfZ3JvdXBfYXR0clwiLERFTEVURV9HUk9VUF9BVFRSSUJVVEVTOlwiZGVsZXRlX2dyb3VwX2F0dHJcIixDTEVBUl9HUk9VUF9BVFRSSUJVVEVTOlwiY2xlYXJfZ3JvdXBfYXR0clwiLEdFVF9HUk9VUF9BVFRSSUJVVEVTOlwiZ2V0X2dyb3VwX2F0dHJcIixTRU5EX01FU1NBR0U6XCJzZW5kbXNnXCIsUkVWT0tFX0MyQ19NRVNTQUdFOlwibXNnd2l0aGRyYXdcIixERUxFVEVfQzJDX01FU1NBR0U6XCJkZWxldGVfYzJjX21zZ19yYW1ibGVcIixTRU5EX0dST1VQX01FU1NBR0U6XCJzZW5kX2dyb3VwX21zZ1wiLFJFVk9LRV9HUk9VUF9NRVNTQUdFOlwiZ3JvdXBfbXNnX3JlY2FsbFwiLERFTEVURV9HUk9VUF9NRVNTQUdFOlwiZGVsZXRlX2dyb3VwX3JhbWJsZV9tc2dfYnlfc2VxXCIsR0VUX0dST1VQX0lORk86XCJnZXRfZ3JvdXBfaW5mb1wiLEdFVF9HUk9VUF9NRU1CRVJfSU5GTzpcImdldF9zcGVjaWZpZWRfZ3JvdXBfbWVtYmVyX2luZm9cIixHRVRfR1JPVVBfTUVNQkVSX0xJU1Q6XCJnZXRfZ3JvdXBfbWVtYmVyX2luZm9cIixRVUlUX0dST1VQOlwicXVpdF9ncm91cFwiLENIQU5HRV9HUk9VUF9PV05FUjpcImNoYW5nZV9ncm91cF9vd25lclwiLERFU1RST1lfR1JPVVA6XCJkZXN0cm95X2dyb3VwXCIsQUREX0dST1VQX01FTUJFUjpcImFkZF9ncm91cF9tZW1iZXJcIixERUxFVEVfR1JPVVBfTUVNQkVSOlwiZGVsZXRlX2dyb3VwX21lbWJlclwiLFNFQVJDSF9HUk9VUF9CWV9JRDpcImdldF9ncm91cF9wdWJsaWNfaW5mb1wiLEFQUExZX0pPSU5fR1JPVVA6XCJhcHBseV9qb2luX2dyb3VwXCIsSEFORExFX0FQUExZX0pPSU5fR1JPVVA6XCJoYW5kbGVfYXBwbHlfam9pbl9ncm91cFwiLEhBTkRMRV9HUk9VUF9JTlZJVEFUSU9OOlwiaGFuZGxlX2ludml0ZV9qb2luX2dyb3VwXCIsTU9ESUZZX0dST1VQX0lORk86XCJtb2RpZnlfZ3JvdXBfYmFzZV9pbmZvXCIsTU9ESUZZX0dST1VQX01FTUJFUl9JTkZPOlwibW9kaWZ5X2dyb3VwX21lbWJlcl9pbmZvXCIsREVMRVRFX0dST1VQX1NZU1RFTV9NRVNTQUdFOlwiZGVsZXRlbXNnXCIsREVMRVRFX0dST1VQX0FUX1RJUFM6XCJkZWxldGVtc2dcIixHRVRfQ09OVkVSU0FUSU9OX0xJU1Q6XCJnZXRcIixQQUdJTkdfR0VUX0NPTlZFUlNBVElPTl9MSVNUOlwicGFnZV9nZXRcIixERUxFVEVfQ09OVkVSU0FUSU9OOlwiZGVsZXRlXCIsUElOX0NPTlZFUlNBVElPTjpcInRvcFwiLEdFVF9NRVNTQUdFUzpcImdldG1zZ1wiLEdFVF9DMkNfUk9BTV9NRVNTQUdFUzpcImdldHJvYW1tc2dcIixHRVRfR1JPVVBfUk9BTV9NRVNTQUdFUzpcImdyb3VwX21zZ19nZXRcIixTRVRfQzJDX01FU1NBR0VfUkVBRDpcIm1zZ3JlYWRlZFwiLEdFVF9QRUVSX1JFQURfVElNRTpcImdldF9wZWVyX3JlYWRfdGltZVwiLFNFVF9HUk9VUF9NRVNTQUdFX1JFQUQ6XCJtc2dfcmVhZF9yZXBvcnRcIixGSUxFX1JFQURfQU5EX1dSSVRFX0FVVEhLRVk6XCJhdXRoa2V5XCIsRklMRV9VUExPQUQ6XCJwaWNfdXBcIixDT1NfU0lHTjpcImNvc1wiLENPU19QUkVfU0lHOlwicHJlX3NpZ1wiLFRJTV9XRUJfUkVQT1JUX1YyOlwidGltX3dlYl9yZXBvcnRfdjJcIixCSUdfREFUQV9IQUxMV0FZX0FVVEhfS0VZOlwiYXV0aGtleVwiLEdFVF9PTkxJTkVfTUVNQkVSX05VTTpcImdldF9vbmxpbmVfbWVtYmVyX251bVwiLEFMSVZFOlwiYWxpdmVcIixNRVNTQUdFX1BVU0g6XCJtc2dfcHVzaFwiLE1FU1NBR0VfUFVTSF9BQ0s6XCJ3c19tc2dfcHVzaF9hY2tcIixTVEFUVVNfRk9SQ0VPRkZMSU5FOlwic3RhdF9mb3JjZW9mZmxpbmVcIixET1dOTE9BRF9NRVJHRVJfTUVTU0FHRTpcImdldF9yZWxheV9qc29uX21zZ1wiLFVQTE9BRF9NRVJHRVJfTUVTU0FHRTpcInNhdmVfcmVsYXlfanNvbl9tc2dcIixGRVRDSF9DTE9VRF9DT05UUk9MX0NPTkZJRzpcImZldGNoX2NvbmZpZ1wiLFBVU0hFRF9DTE9VRF9DT05UUk9MX0NPTkZJRzpcInB1c2hfY29uZmlndjJcIn0sQ0hBTk5FTDp7U09DS0VUOjEsWEhSOjIsQVVUTzowfSxOQU1FX1ZFUlNJT046e29wZW5pbTpcInY0XCIsZ3JvdXBfb3Blbl9odHRwX3N2YzpcInY0XCIsc25zOlwidjRcIixwcm9maWxlOlwidjRcIixyZWNlbnRjb250YWN0OlwidjRcIixvcGVucGljOlwidjRcIixncm91cF9vcGVuX2h0dHBfbm9hdXRoX3N2YzpcInY0XCIsZ3JvdXBfb3Blbl9sb25nX3BvbGxpbmdfaHR0cF9zdmM6XCJ2NFwiLGdyb3VwX29wZW5fbG9uZ19wb2xsaW5nX2h0dHBfbm9hdXRoX3N2YzpcInY0XCIsaW1vcGVuc3RhdDpcInY0XCIsaW1fY29zX3NpZ25fc3ZyOlwidjRcIixpbV9jb3NfbXNnOlwidjRcIix3ZWJpbTpcInY0XCIsaW1fb3Blbl9wdXNoOlwidjRcIixpbV9vcGVuX3N0YXR1czpcInY0XCJ9fTtXcy5IT1NULnNldEN1cnJlbnQoWXMpO3ZhciBKcyxYcyxRcyxacz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd3gmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHd4LmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKHd4LmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSxlaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgcXEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHFxLmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKHFxLmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSx0aT1cInVuZGVmaW5lZFwiIT10eXBlb2YgdHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHR0LmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKHR0LmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSxuaT1cInVuZGVmaW5lZFwiIT10eXBlb2Ygc3dhbiYmXCJmdW5jdGlvblwiPT10eXBlb2Ygc3dhbi5nZXRTeXN0ZW1JbmZvU3luYyYmQm9vbGVhbihzd2FuLmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSxvaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgbXkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIG15LmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKG15LmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSxyaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pJiZcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93LGFpPVpzfHxlaXx8dGl8fG5pfHxvaXx8cmksc2k9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bml8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpJiYhYWksaWk9ZWk/cXE6dGk/dHQ6bmk/c3dhbjpvaT9teTpacz93eDpyaT91bmk6e30sdWk9KEpzPVwiV0VCXCIsVGk/SnM9XCJXRUJcIjplaT9Kcz1cIlFRX01QXCI6dGk/SnM9XCJUVF9NUFwiOm5pP0pzPVwiQkFJRFVfTVBcIjpvaT9Kcz1cIkFMSV9NUFwiOlpzP0pzPVwiV1hfTVBcIjpyaSYmKEpzPVwiVU5JX05BVElWRV9BUFBcIiksQnNbSnNdKSxjaT1zaSYmd2luZG93JiZ3aW5kb3cubmF2aWdhdG9yJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudHx8XCJcIixsaT0vQXBwbGVXZWJLaXRcXC8oW1xcZC5dKykvaS5leGVjKGNpKSxwaT0obGkmJnBhcnNlRmxvYXQobGkucG9wKCkpLC9pUGFkL2kudGVzdChjaSkpLGRpPS9pUGhvbmUvaS50ZXN0KGNpKSYmIXBpLGdpPS9pUG9kL2kudGVzdChjaSksaGk9ZGl8fHBpfHxnaSxmaT0oZnVuY3Rpb24oKXt2YXIgZT1jaS5tYXRjaCgvT1MgKFxcZCspXy9pKTtlJiZlWzFdJiZlWzFdfSgpLC9BbmRyb2lkL2kudGVzdChjaSkpLF9pPWZ1bmN0aW9uKCl7dmFyIGU9Y2kubWF0Y2goL0FuZHJvaWQgKFxcZCspKD86XFwuKFxcZCspKT8oPzpcXC4oXFxkKykpKi9pKTtpZighZSlyZXR1cm4gbnVsbDt2YXIgdD1lWzFdJiZwYXJzZUZsb2F0KGVbMV0pLG49ZVsyXSYmcGFyc2VGbG9hdChlWzJdKTtyZXR1cm4gdCYmbj9wYXJzZUZsb2F0KGVbMV0rXCIuXCIrZVsyXSk6dHx8bnVsbH0oKSxtaT0oZmkmJi93ZWJraXQvaS50ZXN0KGNpKSwvRmlyZWZveC9pLnRlc3QoY2kpLC9FZGdlL2kudGVzdChjaSkpLHZpPSFtaSYmL0Nocm9tZS9pLnRlc3QoY2kpLE1pPShmdW5jdGlvbigpe3ZhciBlPWNpLm1hdGNoKC9DaHJvbWVcXC8oXFxkKykvKTtlJiZlWzFdJiZwYXJzZUZsb2F0KGVbMV0pfSgpLC9NU0lFLy50ZXN0KGNpKSkseWk9KC9NU0lFXFxzOFxcLjAvLnRlc3QoY2kpLGZ1bmN0aW9uKCl7dmFyIGU9L01TSUVcXHMoXFxkKylcXC5cXGQvLmV4ZWMoY2kpLHQ9ZSYmcGFyc2VGbG9hdChlWzFdKTtyZXR1cm4hdCYmL1RyaWRlbnRcXC83LjAvaS50ZXN0KGNpKSYmL3J2OjExLjAvLnRlc3QoY2kpJiYodD0xMSksdH0oKSksSWk9KC9TYWZhcmkvaS50ZXN0KGNpKSwvVEJTXFwvXFxkKy9pLnRlc3QoY2kpKSxUaT0oZnVuY3Rpb24oKXt2YXIgZT1jaS5tYXRjaCgvVEJTXFwvKFxcZCspL2kpO2lmKGUmJmVbMV0pZVsxXX0oKSwhSWkmJi9NUVFCcm93c2VyXFwvXFxkKy9pLnRlc3QoY2kpLCFJaSYmLyBRUUJyb3dzZXJcXC9cXGQrL2kudGVzdChjaSksLyhtaWNyb21lc3Nlbmdlcnx3ZWJicm93c2VyKS9pLnRlc3QoY2kpKSxTaT0vV2luZG93cy9pLnRlc3QoY2kpLERpPS9NQUMgT1MgWC9pLnRlc3QoY2kpLEVpPSgvTWljcm9NZXNzZW5nZXIvaS50ZXN0KGNpKSwhTCgoZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pKSksQ2k9QygoZnVuY3Rpb24oZSl7dmFyIHQ9RWUuZixuPSExLG89Y2UoXCJtZXRhXCIpLHI9MCxhPU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LHM9ZnVuY3Rpb24oZSl7dChlLG8se3ZhbHVlOntvYmplY3RJRDpcIk9cIityKyssd2Vha0RhdGE6e319fSl9LGk9ZS5leHBvcnRzPXtlbmFibGU6ZnVuY3Rpb24oKXtpLmVuYWJsZT1mdW5jdGlvbigpe30sbj0hMDt2YXIgZT1zdC5mLHQ9W10uc3BsaWNlLHI9e307cltvXT0xLGUocikubGVuZ3RoJiYoc3QuZj1mdW5jdGlvbihuKXtmb3IodmFyIHI9ZShuKSxhPTAscz1yLmxlbmd0aDthPHM7YSsrKWlmKHJbYV09PT1vKXt0LmNhbGwocixhLDEpO2JyZWFrfXJldHVybiByfSx2dCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6ITB9LHtnZXRPd25Qcm9wZXJ0eU5hbWVzOmFhLmZ9KSl9LGZhc3RLZXk6ZnVuY3Rpb24oZSx0KXtpZighQihlKSlyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZT9lOihcInN0cmluZ1wiPT10eXBlb2YgZT9cIlNcIjpcIlBcIikrZTtpZighc2UoZSxvKSl7aWYoIWEoZSkpcmV0dXJuXCJGXCI7aWYoIXQpcmV0dXJuXCJFXCI7cyhlKX1yZXR1cm4gZVtvXS5vYmplY3RJRH0sZ2V0V2Vha0RhdGE6ZnVuY3Rpb24oZSx0KXtpZighc2UoZSxvKSl7aWYoIWEoZSkpcmV0dXJuITA7aWYoIXQpcmV0dXJuITE7cyhlKX1yZXR1cm4gZVtvXS53ZWFrRGF0YX0sb25GcmVlemU6ZnVuY3Rpb24oZSl7cmV0dXJuIEVpJiZuJiZhKGUpJiYhc2UoZSxvKSYmcyhlKSxlfX07R2Vbb109ITB9KSksQWk9KENpLmVuYWJsZSxDaS5mYXN0S2V5LENpLmdldFdlYWtEYXRhLENpLm9uRnJlZXplLEVlLmYpLGtpPUNpLmZhc3RLZXksTmk9QmUuc2V0LE9pPUJlLmdldHRlckZvcixMaT0oZnVuY3Rpb24oZSx0LG4pe3ZhciBvPS0xIT09ZS5pbmRleE9mKFwiTWFwXCIpLHI9LTEhPT1lLmluZGV4T2YoXCJXZWFrXCIpLGE9bz9cInNldFwiOlwiYWRkXCIscz1PW2VdLGk9cyYmcy5wcm90b3R5cGUsdT1zLGM9e30sbD1mdW5jdGlvbihlKXt2YXIgdD1pW2VdO0hlKGksZSxcImFkZFwiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiB0LmNhbGwodGhpcywwPT09ZT8wOmUpLHRoaXN9OlwiZGVsZXRlXCI9PWU/ZnVuY3Rpb24oZSl7cmV0dXJuIShyJiYhQihlKSkmJnQuY2FsbCh0aGlzLDA9PT1lPzA6ZSl9OlwiZ2V0XCI9PWU/ZnVuY3Rpb24oZSl7cmV0dXJuIHImJiFCKGUpP3ZvaWQgMDp0LmNhbGwodGhpcywwPT09ZT8wOmUpfTpcImhhc1wiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiEociYmIUIoZSkpJiZ0LmNhbGwodGhpcywwPT09ZT8wOmUpfTpmdW5jdGlvbihlLG4pe3JldHVybiB0LmNhbGwodGhpcywwPT09ZT8wOmUsbiksdGhpc30pfTtpZihfdChlLFwiZnVuY3Rpb25cIiE9dHlwZW9mIHN8fCEocnx8aS5mb3JFYWNoJiYhTCgoZnVuY3Rpb24oKXsobmV3IHMpLmVudHJpZXMoKS5uZXh0KCl9KSkpKSl1PW4uZ2V0Q29uc3RydWN0b3IodCxlLG8sYSksQ2kuZW5hYmxlKCk7ZWxzZSBpZihfdChlLCEwKSl7dmFyIHA9bmV3IHUsZD1wW2FdKHI/e306LTAsMSkhPXAsZz1MKChmdW5jdGlvbigpe3AuaGFzKDEpfSkpLGg9VG4oKGZ1bmN0aW9uKGUpe25ldyBzKGUpfSkpLGY9IXImJkwoKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPW5ldyBzLHQ9NTt0LS07KWVbYV0odCx0KTtyZXR1cm4hZS5oYXMoLTApfSkpO2h8fCgodT10KChmdW5jdGlvbih0LG4pe3ZhKHQsdSxlKTt2YXIgcj12byhuZXcgcyx0LHUpO3JldHVybiBudWxsIT1uJiZ5YShuLHJbYV0se3RoYXQ6cixBU19FTlRSSUVTOm99KSxyfSkpKS5wcm90b3R5cGU9aSxpLmNvbnN0cnVjdG9yPXUpLChnfHxmKSYmKGwoXCJkZWxldGVcIiksbChcImhhc1wiKSxvJiZsKFwiZ2V0XCIpKSwoZnx8ZCkmJmwoYSksciYmaS5jbGVhciYmZGVsZXRlIGkuY2xlYXJ9Y1tlXT11LHZ0KHtnbG9iYWw6ITAsZm9yY2VkOnUhPXN9LGMpLEZuKHUsZSkscnx8bi5zZXRTdHJvbmcodSxlLG8pfShcIk1hcFwiLChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSkse2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKGUsdCxuLG8pe3ZhciByPWUoKGZ1bmN0aW9uKGUsYSl7dmEoZSxyLHQpLE5pKGUse3R5cGU6dCxpbmRleDpxdChudWxsKSxmaXJzdDp2b2lkIDAsbGFzdDp2b2lkIDAsc2l6ZTowfSksUnx8KGUuc2l6ZT0wKSxudWxsIT1hJiZ5YShhLGVbb10se3RoYXQ6ZSxBU19FTlRSSUVTOm59KX0pKSxhPU9pKHQpLHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvLHIscz1hKGUpLHU9aShlLHQpO3JldHVybiB1P3UudmFsdWU9bjoocy5sYXN0PXU9e2luZGV4OnI9a2kodCwhMCksa2V5OnQsdmFsdWU6bixwcmV2aW91czpvPXMubGFzdCxuZXh0OnZvaWQgMCxyZW1vdmVkOiExfSxzLmZpcnN0fHwocy5maXJzdD11KSxvJiYoby5uZXh0PXUpLFI/cy5zaXplKys6ZS5zaXplKyssXCJGXCIhPT1yJiYocy5pbmRleFtyXT11KSksZX0saT1mdW5jdGlvbihlLHQpe3ZhciBuLG89YShlKSxyPWtpKHQpO2lmKFwiRlwiIT09cilyZXR1cm4gby5pbmRleFtyXTtmb3Iobj1vLmZpcnN0O247bj1uLm5leHQpaWYobi5rZXk9PXQpcmV0dXJuIG59O3JldHVybiBmYShyLnByb3RvdHlwZSx7Y2xlYXI6ZnVuY3Rpb24oKXtmb3IodmFyIGU9YSh0aGlzKSx0PWUuaW5kZXgsbj1lLmZpcnN0O247KW4ucmVtb3ZlZD0hMCxuLnByZXZpb3VzJiYobi5wcmV2aW91cz1uLnByZXZpb3VzLm5leHQ9dm9pZCAwKSxkZWxldGUgdFtuLmluZGV4XSxuPW4ubmV4dDtlLmZpcnN0PWUubGFzdD12b2lkIDAsUj9lLnNpemU9MDp0aGlzLnNpemU9MH0sZGVsZXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWEodGhpcyksbj1pKHRoaXMsZSk7aWYobil7dmFyIG89bi5uZXh0LHI9bi5wcmV2aW91cztkZWxldGUgdC5pbmRleFtuLmluZGV4XSxuLnJlbW92ZWQ9ITAsciYmKHIubmV4dD1vKSxvJiYoby5wcmV2aW91cz1yKSx0LmZpcnN0PT1uJiYodC5maXJzdD1vKSx0Lmxhc3Q9PW4mJih0Lmxhc3Q9ciksUj90LnNpemUtLTp0aGlzLnNpemUtLX1yZXR1cm4hIW59LGZvckVhY2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49YSh0aGlzKSxvPVZ0KGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyk7dD10P3QubmV4dDpuLmZpcnN0Oylmb3Iobyh0LnZhbHVlLHQua2V5LHRoaXMpO3QmJnQucmVtb3ZlZDspdD10LnByZXZpb3VzfSxoYXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFpKHRoaXMsZSl9fSksZmEoci5wcm90b3R5cGUsbj97Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWkodGhpcyxlKTtyZXR1cm4gdCYmdC52YWx1ZX0sc2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHModGhpcywwPT09ZT8wOmUsdCl9fTp7YWRkOmZ1bmN0aW9uKGUpe3JldHVybiBzKHRoaXMsZT0wPT09ZT8wOmUsZSl9fSksUiYmQWkoci5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBhKHRoaXMpLnNpemV9fSkscn0sc2V0U3Ryb25nOmZ1bmN0aW9uKGUsdCxuKXt2YXIgbz10K1wiIEl0ZXJhdG9yXCIscj1PaSh0KSxhPU9pKG8pO1luKGUsdCwoZnVuY3Rpb24oZSx0KXtOaSh0aGlzLHt0eXBlOm8sdGFyZ2V0OmUsc3RhdGU6cihlKSxraW5kOnQsbGFzdDp2b2lkIDB9KX0pLChmdW5jdGlvbigpe2Zvcih2YXIgZT1hKHRoaXMpLHQ9ZS5raW5kLG49ZS5sYXN0O24mJm4ucmVtb3ZlZDspbj1uLnByZXZpb3VzO3JldHVybiBlLnRhcmdldCYmKGUubGFzdD1uPW4/bi5uZXh0OmUuc3RhdGUuZmlyc3QpP1wia2V5c1wiPT10P3t2YWx1ZTpuLmtleSxkb25lOiExfTpcInZhbHVlc1wiPT10P3t2YWx1ZTpuLnZhbHVlLGRvbmU6ITF9Ont2YWx1ZTpbbi5rZXksbi52YWx1ZV0sZG9uZTohMX06KGUudGFyZ2V0PXZvaWQgMCx7dmFsdWU6dm9pZCAwLGRvbmU6ITB9KX0pLG4/XCJlbnRyaWVzXCI6XCJ2YWx1ZXNcIiwhbiwhMCksbWEodCl9fSksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSk7WHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGU/Y29uc29sZTp2b2lkIDAhPT1MaSYmTGkuY29uc29sZT9MaS5jb25zb2xlOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5jb25zb2xlP3dpbmRvdy5jb25zb2xlOnt9O2Zvcih2YXIgUmk9ZnVuY3Rpb24oKXt9LGJpPVtcImFzc2VydFwiLFwiY2xlYXJcIixcImNvdW50XCIsXCJkZWJ1Z1wiLFwiZGlyXCIsXCJkaXJ4bWxcIixcImVycm9yXCIsXCJleGNlcHRpb25cIixcImdyb3VwXCIsXCJncm91cENvbGxhcHNlZFwiLFwiZ3JvdXBFbmRcIixcImluZm9cIixcImxvZ1wiLFwibWFya1RpbWVsaW5lXCIsXCJwcm9maWxlXCIsXCJwcm9maWxlRW5kXCIsXCJ0YWJsZVwiLFwidGltZVwiLFwidGltZUVuZFwiLFwidGltZVN0YW1wXCIsXCJ0cmFjZVwiLFwid2FyblwiXSx3aT1iaS5sZW5ndGg7d2ktLTspUXM9Ymlbd2ldLGNvbnNvbGVbUXNdfHwoWHNbUXNdPVJpKTtYcy5tZXRob2RzPWJpO3ZhciBQaT1YcyxHaT0wLFVpPWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCkrR2l9LEZpPWZ1bmN0aW9uKCl7R2k9MH0scWk9MCx4aT1uZXcgTWFwO2Z1bmN0aW9uIFZpKCl7dmFyIGUsdD0oKGU9bmV3IERhdGUpLnNldFRpbWUoVWkoKSksZSk7cmV0dXJuXCJUSU0gXCIrdC50b0xvY2FsZVRpbWVTdHJpbmcoXCJlbi1VU1wiLHtob3VyMTI6ITF9KStcIi5cIitmdW5jdGlvbihlKXt2YXIgdDtzd2l0Y2goZS50b1N0cmluZygpLmxlbmd0aCl7Y2FzZSAxOnQ9XCIwMFwiK2U7YnJlYWs7Y2FzZSAyOnQ9XCIwXCIrZTticmVhaztkZWZhdWx0OnQ9ZX1yZXR1cm4gdH0odC5nZXRNaWxsaXNlY29uZHMoKSkrXCI6XCJ9dmFyIEtpPXthcmd1bWVudHMyU3RyaW5nOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKDE9PT1lLmxlbmd0aCl0PVZpKCkrZVswXTtlbHNle3Q9VmkoKTtmb3IodmFyIG49MCxvPWUubGVuZ3RoO248bztuKyspWGkoZVtuXSk/WmkoZVtuXSk/dCs9YXUoZVtuXSk6dCs9SlNPTi5zdHJpbmdpZnkoZVtuXSk6dCs9ZVtuXSx0Kz1cIiBcIn1yZXR1cm4gdH0sZGVidWc6ZnVuY3Rpb24oKXtpZihxaTw9LTEpe3ZhciBlPXRoaXMuYXJndW1lbnRzMlN0cmluZyhhcmd1bWVudHMpO1BpLmRlYnVnKGUpfX0sbG9nOmZ1bmN0aW9uKCl7aWYocWk8PTApe3ZhciBlPXRoaXMuYXJndW1lbnRzMlN0cmluZyhhcmd1bWVudHMpO1BpLmxvZyhlKX19LGluZm86ZnVuY3Rpb24oKXtpZihxaTw9MSl7dmFyIGU9dGhpcy5hcmd1bWVudHMyU3RyaW5nKGFyZ3VtZW50cyk7UGkuaW5mbyhlKX19LHdhcm46ZnVuY3Rpb24oKXtpZihxaTw9Mil7dmFyIGU9dGhpcy5hcmd1bWVudHMyU3RyaW5nKGFyZ3VtZW50cyk7UGkud2FybihlKX19LGVycm9yOmZ1bmN0aW9uKCl7aWYocWk8PTMpe3ZhciBlPXRoaXMuYXJndW1lbnRzMlN0cmluZyhhcmd1bWVudHMpO1BpLmVycm9yKGUpfX0sdGltZTpmdW5jdGlvbihlKXt4aS5zZXQoZSxvdS5ub3coKSl9LHRpbWVFbmQ6ZnVuY3Rpb24oZSl7aWYoeGkuaGFzKGUpKXt2YXIgdD1vdS5ub3coKS14aS5nZXQoZSk7cmV0dXJuIHhpLmRlbGV0ZShlKSx0fXJldHVybiBQaS53YXJuKFwi5pyq5om+5Yiw5a+55bqUbGFiZWw6IFwiLmNvbmNhdChlLFwiLCDor7flnKjosIPnlKggbG9nZ2VyLnRpbWVFbmQg5YmN77yM6LCD55SoIGxvZ2dlci50aW1lXCIpKSwwfSxzZXRMZXZlbDpmdW5jdGlvbihlKXtlPDQmJlBpLmxvZyhWaSgpK1wic2V0IGxldmVsIGZyb20gXCIrcWkrXCIgdG8gXCIrZSkscWk9ZX0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gcWl9fSxCaT1bXCJ1cmxcIl0sSGk9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmaWxlXCI9PT1ldShlKX0samk9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lJiYoXCJudW1iZXJcIj09dHlwZW9mIGUmJiFpc05hTihlLTApfHxcIm9iamVjdFwiPT09bihlKSYmZS5jb25zdHJ1Y3Rvcj09PU51bWJlcil9LCRpPWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlfSxZaT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWUmJlwib2JqZWN0XCI9PT1uKGUpfSx6aT1mdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT09bihlKXx8bnVsbD09PWUpcmV0dXJuITE7dmFyIHQ9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2lmKG51bGw9PT10KXJldHVybiEwO2Zvcih2YXIgbz10O251bGwhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7KW89T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO3JldHVybiB0PT09b30sV2k9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgQXJyYXkuaXNBcnJheT9BcnJheS5pc0FycmF5KGUpOlwiYXJyYXlcIj09PWV1KGUpfSxKaT1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZX0sWGk9ZnVuY3Rpb24oZSl7cmV0dXJuIFdpKGUpfHxZaShlKX0sUWk9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZX0sWmk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvcn0sZXU9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5tYXRjaCgvXlxcW29iamVjdCAoLiopXFxdJC8pWzFdLnRvTG93ZXJDYXNlKCl9LHR1PWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciB0PWVbMF07cmV0dXJuIS9bXmEtekEtWjAtOV0vLnRlc3QodCl9LG51PTA7RGF0ZS5ub3d8fChEYXRlLm5vdz1mdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfSk7dmFyIG91PXtub3c6ZnVuY3Rpb24oKXswPT09bnUmJihudT1EYXRlLm5vdygpLTEpO3ZhciBlPURhdGUubm93KCktbnU7cmV0dXJuIGU+NDI5NDk2NzI5NT8obnUrPTQyOTQ5NjcyOTUsRGF0ZS5ub3coKS1udSk6ZX0sdXRjOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucm91bmQoRGF0ZS5ub3coKS8xZTMpfX0scnU9ZnVuY3Rpb24gZSh0LG4sbyxyKXtpZighWGkodCl8fCFYaShuKSlyZXR1cm4gMDtmb3IodmFyIGEscz0wLGk9T2JqZWN0LmtleXMobiksdT0wLGM9aS5sZW5ndGg7dTxjO3UrKylpZihhPWlbdV0sIShKaShuW2FdKXx8byYmby5pbmNsdWRlcyhhKSkpaWYoWGkodFthXSkmJlhpKG5bYV0pKXMrPWUodFthXSxuW2FdLG8scik7ZWxzZXtpZihyJiZyLmluY2x1ZGVzKG5bYV0pKWNvbnRpbnVlO3RbYV0hPT1uW2FdJiYodFthXT1uW2FdLHMrPTEpfXJldHVybiBzfSxhdT1mdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSxbXCJtZXNzYWdlXCIsXCJjb2RlXCJdKX0sc3U9ZnVuY3Rpb24oZSl7aWYoMD09PWUubGVuZ3RoKXJldHVybiAwO2Zvcih2YXIgdD0wLG49MCxvPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmdm9pZCAwIT09ZG9jdW1lbnQuY2hhcmFjdGVyU2V0P2RvY3VtZW50LmNoYXJhY3RlclNldDpcIlVURi04XCI7dm9pZCAwIT09ZVt0XTspbis9ZVt0KytdLmNoYXJDb2RlQXRbdF08PTI1NT8xOiExPT09bz8zOjI7cmV0dXJuIG59LGl1PWZ1bmN0aW9uKGUpe3ZhciB0PWV8fDk5OTk5OTk5O3JldHVybiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqdCl9LHV1PVwiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIixjdT11dS5sZW5ndGgsbHU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gZSlpZihlW25dPT09dClyZXR1cm4hMDtyZXR1cm4hMX0scHU9e30sZHU9ZnVuY3Rpb24oKXtpZihhaSlyZXR1cm5cImh0dHBzOlwiO2lmKHNpJiZcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93KXJldHVyblwiaHR0cHM6XCI7dmFyIGU9d2luZG93LmxvY2F0aW9uLnByb3RvY29sO3JldHVybltcImh0dHA6XCIsXCJodHRwczpcIl0uaW5kZXhPZihlKTwwJiYoZT1cImh0dHA6XCIpLGV9LGd1PWZ1bmN0aW9uKGUpe3JldHVybi0xPT09ZS5pbmRleE9mKFwiaHR0cDovL1wiKXx8LTE9PT1lLmluZGV4T2YoXCJodHRwczovL1wiKT9cImh0dHBzOi8vXCIrZTplLnJlcGxhY2UoL2h0dHBzfGh0dHAvLFwiaHR0cHNcIil9LGh1PWZ1bmN0aW9uIGUodCl7aWYoMD09PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpLmxlbmd0aClyZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgbz1BcnJheS5pc0FycmF5KHQpP1tdOk9iamVjdC5jcmVhdGUobnVsbCkscj1cIlwiO2Zvcih2YXIgYSBpbiB0KW51bGwhPT10W2FdP3ZvaWQgMCE9PXRbYV0/KHI9bih0W2FdKSxbXCJzdHJpbmdcIixcIm51bWJlclwiLFwiZnVuY3Rpb25cIixcImJvb2xlYW5cIl0uaW5kZXhPZihyKT49MD9vW2FdPXRbYV06b1thXT1lKHRbYV0pKTpvW2FdPXZvaWQgMDpvW2FdPW51bGw7cmV0dXJuIG99O2Z1bmN0aW9uIGZ1KGUsdCl7V2koZSkmJldpKHQpP3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49dC5rZXksbz10LnZhbHVlLHI9ZS5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXk9PT1ufSkpO3I/ci52YWx1ZT1vOmUucHVzaCh7a2V5Om4sdmFsdWU6b30pfSkpOktpLndhcm4oXCJ1cGRhdGVDdXN0b21GaWVsZCB0YXJnZXQg5oiWIHNvdXJjZSDkuI3mmK/mlbDnu4TvvIzlv73nlaXmraTmrKHmm7TmlrDjgIJcIil9dmFyIF91PWZ1bmN0aW9uKGUpe3JldHVybiBlPT09cm8uR1JQX1BVQkxJQ30sbXU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1yby5HUlBfQVZDSEFUUk9PTX0sdnU9ZnVuY3Rpb24oZSl7cmV0dXJuICRpKGUpJiZlLnNsaWNlKDAsMyk9PT1yby5DT05WX0MyQ30sTXU9ZnVuY3Rpb24oZSl7cmV0dXJuICRpKGUpJiZlLnNsaWNlKDAsNSk9PT1yby5DT05WX0dST1VQfSx5dT1mdW5jdGlvbihlKXtyZXR1cm4gJGkoZSkmJmU9PT1yby5DT05WX1NZU1RFTX07ZnVuY3Rpb24gSXUoZSx0KXt2YXIgbj17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obyl7bltvXT10KGVbb10sbyl9KSksbn1mdW5jdGlvbiBUdSgpe2Z1bmN0aW9uIGUoKXtyZXR1cm4oNjU1MzYqKDErTWF0aC5yYW5kb20oKSl8MCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKX1yZXR1cm5cIlwiLmNvbmNhdChlKCkrZSgpKS5jb25jYXQoZSgpKS5jb25jYXQoZSgpKS5jb25jYXQoZSgpKS5jb25jYXQoZSgpKS5jb25jYXQoZSgpKS5jb25jYXQoZSgpKX1mdW5jdGlvbiBTdSgpe3ZhciBlPVwidW5rbm93blwiO2lmKERpJiYoZT1cIm1hY1wiKSxTaSYmKGU9XCJ3aW5kb3dzXCIpLGhpJiYoZT1cImlvc1wiKSxmaSYmKGU9XCJhbmRyb2lkXCIpLGFpKXRyeXt2YXIgdD1paS5nZXRTeXN0ZW1JbmZvU3luYygpLnBsYXRmb3JtO3ZvaWQgMCE9PXQmJihlPXQpfWNhdGNoKF9NKXt9cmV0dXJuIGV9ZnVuY3Rpb24gRHUoZSl7dmFyIHQ9ZS5vcmlnaW5Vcmwsbj12b2lkIDA9PT10P3ZvaWQgMDp0LG89ZS5vcmlnaW5XaWR0aCxyPWUub3JpZ2luSGVpZ2h0LGE9ZS5taW4scz12b2lkIDA9PT1hPzE5ODphLGk9cGFyc2VJbnQobyksdT1wYXJzZUludChyKSxjPXt1cmw6dm9pZCAwLHdpZHRoOjAsaGVpZ2h0OjB9O3JldHVybihpPD11P2k6dSk8PXM/KGMudXJsPW4sYy53aWR0aD1pLGMuaGVpZ2h0PXUpOih1PD1pPyhjLndpZHRoPU1hdGguY2VpbChpKnMvdSksYy5oZWlnaHQ9cyk6KGMud2lkdGg9cyxjLmhlaWdodD1NYXRoLmNlaWwodSpzL2kpKSxjLnVybD1cIlwiLmNvbmNhdChuLDE5OD09PXM/XCI/aW1hZ2VWaWV3Mi8zL3cvMTk4L2gvMTk4XCI6XCI/aW1hZ2VWaWV3Mi8zL3cvNzIwL2gvNzIwXCIpKSxKaShuKT9nKGMsQmkpOmN9ZnVuY3Rpb24gRXUoZSl7dmFyIHQ9ZVsyXTtlWzJdPWVbMV0sZVsxXT10O2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWVbbl0uc2V0VHlwZShuKX1mdW5jdGlvbiBDdShlKXt2YXIgdD1lLnNlcnZjbWQ7cmV0dXJuIHQuc2xpY2UodC5pbmRleE9mKFwiLlwiKSsxKX1mdW5jdGlvbiBBdShlLHQpe3JldHVybiBNYXRoLnJvdW5kKE51bWJlcihlKSpNYXRoLnBvdygxMCx0KSkvTWF0aC5wb3coMTAsdCl9ZnVuY3Rpb24ga3UoZSx0KXtyZXR1cm4gZS5pbmNsdWRlcyh0KX1mdW5jdGlvbiBOdShlLHQpe3JldHVybiBlLmluY2x1ZGVzKHQpfXZhciBPdT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIEx1KGUpe2lmKG51bGw9PWUpcmV0dXJuITA7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBlKXJldHVybiExO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXJldHVybiAwPT09ZTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gMD09PWUubGVuZ3RoO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpcmV0dXJuIDA9PT1lLmxlbmd0aDtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiAwPT09ZS5sZW5ndGg7aWYoZSBpbnN0YW5jZW9mIEVycm9yKXJldHVyblwiXCI9PT1lLm1lc3NhZ2U7aWYoemkoZSkpe2Zvcih2YXIgdCBpbiBlKWlmKE91LmNhbGwoZSx0KSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hKFwibWFwXCIhPT1ldShlKSYmIWZ1bmN0aW9uKGUpe3JldHVyblwic2V0XCI9PT1ldShlKX0oZSkmJiFIaShlKSkmJjA9PT1lLnNpemV9ZnVuY3Rpb24gUnUoZSx0LG4pe2lmKHZvaWQgMD09PXQpcmV0dXJuITA7dmFyIG89ITA7aWYoXCJvYmplY3RcIj09PW1vKHQpLnRvTG93ZXJDYXNlKCkpT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZnVuY3Rpb24ocil7dmFyIGE9MT09PWUubGVuZ3RoP2VbMF1bcl06dm9pZCAwO289ISFidShhLHRbcl0sbixyKSYmb30pKTtlbHNlIGlmKFwiYXJyYXlcIj09PW1vKHQpLnRvTG93ZXJDYXNlKCkpZm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspbz0hIWJ1KGVbcl0sdFtyXSxuLHRbcl0ubmFtZSkmJm87aWYobylyZXR1cm4gbzt0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbXMgdmFsaWRhdGUgZmFpbGVkLlwiKX1mdW5jdGlvbiBidShlLHQsbixvKXtpZih2b2lkIDA9PT10KXJldHVybiEwO3ZhciByPSEwO3JldHVybiB0LnJlcXVpcmVkJiZMdShlKSYmKFBpLmVycm9yKFwiVElNIFtcIi5jb25jYXQobiwnXSBNaXNzaW5nIHJlcXVpcmVkIHBhcmFtczogXCInKS5jb25jYXQobywnXCIuJykpLHI9ITEpLEx1KGUpfHxtbyhlKS50b0xvd2VyQ2FzZSgpPT09dC50eXBlLnRvTG93ZXJDYXNlKCl8fChQaS5lcnJvcihcIlRJTSBbXCIuY29uY2F0KG4sJ10gSW52YWxpZCBwYXJhbXM6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBcIicpLmNvbmNhdChvLCdcIi5FeHBlY3RlZCAnKS5jb25jYXQodC50eXBlLFwiLlwiKSkscj0hMSksdC52YWxpZGF0b3ImJiF0LnZhbGlkYXRvcihlKSYmKFBpLmVycm9yKFwiVElNIFtcIi5jb25jYXQobixcIl0gSW52YWxpZCBwYXJhbXM6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwYXJhbXMuXCIpKSxyPSExKSxyfXZhciB3dT17ZjpnZX0sUHU9TyxHdT1FZS5mLFV1PVl0LmZvckVhY2gsRnU9UGUoXCJoaWRkZW5cIikscXU9Z2UoXCJ0b1ByaW1pdGl2ZVwiKSx4dT1CZS5zZXQsVnU9QmUuZ2V0dGVyRm9yKFwiU3ltYm9sXCIpLEt1PU9iamVjdC5wcm90b3R5cGUsQnU9Ty5TeW1ib2wsSHU9aihcIkpTT05cIixcInN0cmluZ2lmeVwiKSxqdT1UZS5mLCR1PUVlLmYsWXU9YWEuZix6dT1QLmYsV3U9b2UoXCJzeW1ib2xzXCIpLEp1PW9lKFwib3Atc3ltYm9sc1wiKSxYdT1vZShcInN0cmluZy10by1zeW1ib2wtcmVnaXN0cnlcIiksUXU9b2UoXCJzeW1ib2wtdG8tc3RyaW5nLXJlZ2lzdHJ5XCIpLFp1PW9lKFwid2tzXCIpLGVjPU8uUU9iamVjdCx0Yz0hZWN8fCFlYy5wcm90b3R5cGV8fCFlYy5wcm90b3R5cGUuZmluZENoaWxkLG5jPVImJkwoKGZ1bmN0aW9uKCl7cmV0dXJuIDchPXF0KCR1KHt9LFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJHUodGhpcyxcImFcIix7dmFsdWU6N30pLmF9fSkpLmF9KSk/ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPWp1KEt1LHQpO28mJmRlbGV0ZSBLdVt0XSwkdShlLHQsbiksbyYmZSE9PUt1JiYkdShLdSx0LG8pfTokdSxvYz1mdW5jdGlvbihlLHQpe3ZhciBuPVd1W2VdPXF0KEJ1LnByb3RvdHlwZSk7cmV0dXJuIHh1KG4se3R5cGU6XCJTeW1ib2xcIix0YWc6ZSxkZXNjcmlwdGlvbjp0fSksUnx8KG4uZGVzY3JpcHRpb249dCksbn0scmM9ZnVuY3Rpb24oZSx0LG4pe2U9PT1LdSYmcmMoSnUsdCxuKSxTZShlKTt2YXIgbz1fZSh0KTtyZXR1cm4gU2Uobiksc2UoV3Usbyk/KG4uZW51bWVyYWJsZT8oc2UoZSxGdSkmJmVbRnVdW29dJiYoZVtGdV1bb109ITEpLG49cXQobix7ZW51bWVyYWJsZTpHKDAsITEpfSkpOihzZShlLEZ1KXx8JHUoZSxGdSxHKDEse30pKSxlW0Z1XVtvXT0hMCksbmMoZSxvLG4pKTokdShlLG8sbil9LGFjPWZ1bmN0aW9uKGUsdCl7U2UoZSk7dmFyIG49Syh0KSxvPUx0KG4pLmNvbmNhdChjYyhuKSk7cmV0dXJuIFV1KG8sKGZ1bmN0aW9uKHQpe1ImJiFzYy5jYWxsKG4sdCl8fHJjKGUsdCxuW3RdKX0pKSxlfSxzYz1mdW5jdGlvbihlKXt2YXIgdD1fZShlKSxuPXp1LmNhbGwodGhpcyx0KTtyZXR1cm4hKHRoaXM9PT1LdSYmc2UoV3UsdCkmJiFzZShKdSx0KSkmJighKG58fCFzZSh0aGlzLHQpfHwhc2UoV3UsdCl8fHNlKHRoaXMsRnUpJiZ0aGlzW0Z1XVt0XSl8fG4pfSxpYz1mdW5jdGlvbihlLHQpe3ZhciBuPUsoZSksbz1fZSh0KTtpZihuIT09S3V8fCFzZShXdSxvKXx8c2UoSnUsbykpe3ZhciByPWp1KG4sbyk7cmV0dXJuIXJ8fCFzZShXdSxvKXx8c2UobixGdSkmJm5bRnVdW29dfHwoci5lbnVtZXJhYmxlPSEwKSxyfX0sdWM9ZnVuY3Rpb24oZSl7dmFyIHQ9WXUoSyhlKSksbj1bXTtyZXR1cm4gVXUodCwoZnVuY3Rpb24oZSl7c2UoV3UsZSl8fHNlKEdlLGUpfHxuLnB1c2goZSl9KSksbn0sY2M9ZnVuY3Rpb24oZSl7dmFyIHQ9ZT09PUt1LG49WXUodD9KdTpLKGUpKSxvPVtdO3JldHVybiBVdShuLChmdW5jdGlvbihlKXshc2UoV3UsZSl8fHQmJiFzZShLdSxlKXx8by5wdXNoKFd1W2VdKX0pKSxvfTtpZihRfHwoSGUoKEJ1PWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIEJ1KXRocm93IFR5cGVFcnJvcihcIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvclwiKTt2YXIgZT1hcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/TXQoYXJndW1lbnRzWzBdKTp2b2lkIDAsdD1jZShlKSxuPWZ1bmN0aW9uKGUpe3RoaXM9PT1LdSYmbi5jYWxsKEp1LGUpLHNlKHRoaXMsRnUpJiZzZSh0aGlzW0Z1XSx0KSYmKHRoaXNbRnVdW3RdPSExKSxuYyh0aGlzLHQsRygxLGUpKX07cmV0dXJuIFImJnRjJiZuYyhLdSx0LHtjb25maWd1cmFibGU6ITAsc2V0Om59KSxvYyh0LGUpfSkucHJvdG90eXBlLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gVnUodGhpcykudGFnfSkpLEhlKEJ1LFwid2l0aG91dFNldHRlclwiLChmdW5jdGlvbihlKXtyZXR1cm4gb2MoY2UoZSksZSl9KSksUC5mPXNjLEVlLmY9cmMsVGUuZj1pYyxzdC5mPWFhLmY9dWMsaXQuZj1jYyx3dS5mPWZ1bmN0aW9uKGUpe3JldHVybiBvYyhnZShlKSxlKX0sUiYmKCR1KEJ1LnByb3RvdHlwZSxcImRlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVnUodGhpcykuZGVzY3JpcHRpb259fSksSGUoS3UsXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLHNjLHt1bnNhZmU6ITB9KSkpLHZ0KHtnbG9iYWw6ITAsd3JhcDohMCxmb3JjZWQ6IVEsc2hhbTohUX0se1N5bWJvbDpCdX0pLFV1KEx0KFp1KSwoZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUpe3ZhciB0PVB1LlN5bWJvbHx8KFB1LlN5bWJvbD17fSk7c2UodCxlKXx8R3UodCxlLHt2YWx1ZTp3dS5mKGUpfSl9KGUpfSkpLHZ0KHt0YXJnZXQ6XCJTeW1ib2xcIixzdGF0OiEwLGZvcmNlZDohUX0se2ZvcjpmdW5jdGlvbihlKXt2YXIgdD1NdChlKTtpZihzZShYdSx0KSlyZXR1cm4gWHVbdF07dmFyIG49QnUodCk7cmV0dXJuIFh1W3RdPW4sUXVbbl09dCxufSxrZXlGb3I6ZnVuY3Rpb24oZSl7aWYoIWVlKGUpKXRocm93IFR5cGVFcnJvcihlK1wiIGlzIG5vdCBhIHN5bWJvbFwiKTtpZihzZShRdSxlKSlyZXR1cm4gUXVbZV19LHVzZVNldHRlcjpmdW5jdGlvbigpe3RjPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXt0Yz0hMX19KSx2dCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6IVEsc2hhbTohUn0se2NyZWF0ZTpmdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3F0KGUpOmFjKHF0KGUpLHQpfSxkZWZpbmVQcm9wZXJ0eTpyYyxkZWZpbmVQcm9wZXJ0aWVzOmFjLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjppY30pLHZ0KHt0YXJnZXQ6XCJPYmplY3RcIixzdGF0OiEwLGZvcmNlZDohUX0se2dldE93blByb3BlcnR5TmFtZXM6dWMsZ2V0T3duUHJvcGVydHlTeW1ib2xzOmNjfSksdnQoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOkwoKGZ1bmN0aW9uKCl7aXQuZigxKX0pKX0se2dldE93blByb3BlcnR5U3ltYm9sczpmdW5jdGlvbihlKXtyZXR1cm4gaXQuZihyZShlKSl9fSksSHUpe3ZhciBsYz0hUXx8TCgoZnVuY3Rpb24oKXt2YXIgZT1CdSgpO3JldHVyblwiW251bGxdXCIhPUh1KFtlXSl8fFwie31cIiE9SHUoe2E6ZX0pfHxcInt9XCIhPUh1KE9iamVjdChlKSl9KSk7dnQoe3RhcmdldDpcIkpTT05cIixzdGF0OiEwLGZvcmNlZDpsY30se3N0cmluZ2lmeTpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBvLHI9W2VdLGE9MTthcmd1bWVudHMubGVuZ3RoPmE7KXIucHVzaChhcmd1bWVudHNbYSsrXSk7aWYobz10LChCKHQpfHx2b2lkIDAhPT1lKSYmIWVlKGUpKXJldHVybiBLdCh0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBvJiYodD1vLmNhbGwodGhpcyxlLHQpKSwhZWUodCkpcmV0dXJuIHR9KSxyWzFdPXQsSHUuYXBwbHkobnVsbCxyKX19KX1CdS5wcm90b3R5cGVbcXVdfHxDZShCdS5wcm90b3R5cGUscXUsQnUucHJvdG90eXBlLnZhbHVlT2YpLEZuKEJ1LFwiU3ltYm9sXCIpLEdlW0Z1XT0hMDt2YXIgcGM9RWUuZixkYz1PLlN5bWJvbDtpZihSJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBkYyYmKCEoXCJkZXNjcmlwdGlvblwiaW4gZGMucHJvdG90eXBlKXx8dm9pZCAwIT09ZGMoKS5kZXNjcmlwdGlvbikpe3ZhciBnYz17fSxoYz1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg8MXx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3ZvaWQgMDpTdHJpbmcoYXJndW1lbnRzWzBdKSx0PXRoaXMgaW5zdGFuY2VvZiBoYz9uZXcgZGMoZSk6dm9pZCAwPT09ZT9kYygpOmRjKGUpO3JldHVyblwiXCI9PT1lJiYoZ2NbdF09ITApLHR9O2N0KGhjLGRjKTt2YXIgZmM9aGMucHJvdG90eXBlPWRjLnByb3RvdHlwZTtmYy5jb25zdHJ1Y3Rvcj1oYzt2YXIgX2M9ZmMudG9TdHJpbmcsbWM9XCJTeW1ib2wodGVzdClcIj09U3RyaW5nKGRjKFwidGVzdFwiKSksdmM9L15TeW1ib2xcXCgoLiopXFwpW14pXSskLztwYyhmYyxcImRlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT1CKHRoaXMpP3RoaXMudmFsdWVPZigpOnRoaXMsdD1fYy5jYWxsKGUpO2lmKHNlKGdjLGUpKXJldHVyblwiXCI7dmFyIG49bWM/dC5zbGljZSg3LC0xKTp0LnJlcGxhY2UodmMsXCIkMVwiKTtyZXR1cm5cIlwiPT09bj92b2lkIDA6bn19KSx2dCh7Z2xvYmFsOiEwLGZvcmNlZDohMH0se1N5bWJvbDpoY30pfXZhciBNYyx5Yz1UZS5mLEljPVwiXCIuc3RhcnRzV2l0aCxUYz1NYXRoLm1pbixTYz1mcihcInN0YXJ0c1dpdGhcIiksRGM9IShTY3x8KE1jPXljKFN0cmluZy5wcm90b3R5cGUsXCJzdGFydHNXaXRoXCIpLCFNY3x8TWMud3JpdGFibGUpKTt2dCh7dGFyZ2V0OlwiU3RyaW5nXCIscHJvdG86ITAsZm9yY2VkOiFEYyYmIVNjfSx7c3RhcnRzV2l0aDpmdW5jdGlvbihlKXt2YXIgdD1NdChWKHRoaXMpKTtncihlKTt2YXIgbj1XZShUYyhhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCx0Lmxlbmd0aCkpLG89TXQoZSk7cmV0dXJuIEljP0ljLmNhbGwodCxvLG4pOnQuc2xpY2UobixuK28ubGVuZ3RoKT09PW99fSk7dmFyIEVjPXtVTlNFTkQ6XCJ1blNlbmRcIixTVUNDRVNTOlwic3VjY2Vzc1wiLEZBSUw6XCJmYWlsXCJ9LENjPXtOT1RfU1RBUlQ6XCJub3RTdGFydFwiLFBFTkRJTkc6XCJwZW5nZGluZ1wiLFJFU09MVkVEOlwicmVzb2x2ZWRcIixSRUpFQ1RFRDpcInJlamVjdGVkXCJ9LEFjPWZ1bmN0aW9uKGUpe3JldHVybiEhZSYmKCEhKHZ1KGUpfHxNdShlKXx8eXUoZSkpfHwoY29uc29sZS53YXJuKFwi6Z2e5rOV55qE5Lya6K+dIElEOlwiLmNvbmNhdChlLFwi44CC5Lya6K+dIElEIOe7hOaIkOaWueW8j++8mkMyQyArIHVzZXJJRO+8iOWNleiBiu+8iUdST1VQICsgZ3JvdXBJRO+8iOe+pOiBiu+8iUBUSU0jU1lTVEVN77yI57O757uf6YCa55+l5Lya6K+d77yJXCIpKSwhMSkpfSxrYz1cIuivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjXCIsTmM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyYW0/XCJcIi5jb25jYXQoZS5hcGksXCIgXCIpLmNvbmNhdChlLnBhcmFtLFwiIFwiKS5jb25jYXQoZS5kZXNjLFwi44CCXCIpLmNvbmNhdChrYykuY29uY2F0KGUuYXBpKTpcIlwiLmNvbmNhdChlLmFwaSxcIiBcIikuY29uY2F0KGUuZGVzYyxcIuOAglwiKS5jb25jYXQoa2MpLmNvbmNhdChlLmFwaSl9LE9jPXt0eXBlOlwiU3RyaW5nXCIscmVxdWlyZWQ6ITB9LExjPXt0eXBlOlwiQXJyYXlcIixyZXF1aXJlZDohMH0sUmM9e3R5cGU6XCJPYmplY3RcIixyZXF1aXJlZDohMH0sYmM9e2xvZ2luOnt1c2VySUQ6T2MsdXNlclNpZzpPY30sYWRkVG9CbGFja2xpc3Q6e3VzZXJJRExpc3Q6TGN9LG9uOlt7bmFtZTpcImV2ZW50TmFtZVwiLHR5cGU6XCJTdHJpbmdcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJjAhPT1lLmxlbmd0aHx8KGNvbnNvbGUud2FybihOYyh7YXBpOlwib25cIixwYXJhbTpcImV2ZW50TmFtZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5n77yM5LiU5LiN6IO95Li656m6XCJ9KSksITEpfX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KGNvbnNvbGUud2FybihOYyh7YXBpOlwib25cIixwYXJhbTpcImhhbmRsZXJcIixkZXNjOlwi5Y+C5pWw5b+F6aG75Li6IEZ1bmN0aW9uXCJ9KSksITEpOihcIlwiPT09ZS5uYW1lJiZjb25zb2xlLndhcm4oXCJvbiDmjqXlj6PnmoQgaGFuZGxlciDlj4LmlbDmjqjojZDkvb/nlKjlhbflkI3lh73mlbDjgILlhbflkI3lh73mlbDlj6/ku6Xkvb/nlKggb2ZmIOaOpeWPo+WPlua2iOiuoumYhe+8jOWMv+WQjeWHveaVsOaXoOazleWPlua2iOiuoumYheOAglwiKSwhMCl9fV0sb25jZTpbe25hbWU6XCJldmVudE5hbWVcIix0eXBlOlwiU3RyaW5nXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiYwIT09ZS5sZW5ndGh8fChjb25zb2xlLndhcm4oTmMoe2FwaTpcIm9uY2VcIixwYXJhbTpcImV2ZW50TmFtZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5n77yM5LiU5LiN6IO95Li656m6XCJ9KSksITEpfX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KGNvbnNvbGUud2FybihOYyh7YXBpOlwib25jZVwiLHBhcmFtOlwiaGFuZGxlclwiLGRlc2M6XCLlj4LmlbDlv4XpobvkuLogRnVuY3Rpb25cIn0pKSwhMSk6KFwiXCI9PT1lLm5hbWUmJmNvbnNvbGUud2FybihcIm9uY2Ug5o6l5Y+j55qEIGhhbmRsZXIg5Y+C5pWw5o6o6I2Q5L2/55So5YW35ZCN5Ye95pWw44CCXCIpLCEwKX19XSxvZmY6W3tuYW1lOlwiZXZlbnROYW1lXCIsdHlwZTpcIlN0cmluZ1wiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmMCE9PWUubGVuZ3RofHwoY29uc29sZS53YXJuKE5jKHthcGk6XCJvZmZcIixwYXJhbTpcImV2ZW50TmFtZVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5n77yM5LiU5LiN6IO95Li656m6XCJ9KSksITEpfX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KGNvbnNvbGUud2FybihOYyh7YXBpOlwib2ZmXCIscGFyYW06XCJoYW5kbGVyXCIsZGVzYzpcIuWPguaVsOW/hemhu+S4uiBGdW5jdGlvblwifSkpLCExKTooXCJcIj09PWUubmFtZSYmY29uc29sZS53YXJuKFwib2ZmIOaOpeWPo+aXoOazleS4uuWMv+WQjeWHveaVsOWPlua2iOebkeWQrOS6i+S7tuOAglwiKSwhMCl9fV0sc2VuZE1lc3NhZ2U6W3Qoe25hbWU6XCJtZXNzYWdlXCJ9LFJjKV0sZ2V0TWVzc2FnZUxpc3Q6e2NvbnZlcnNhdGlvbklEOnQodCh7fSxPYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gQWMoZSl9fSksbmV4dFJlcU1lc3NhZ2VJRDp7dHlwZTpcIlN0cmluZ1wifSxjb3VudDp7dHlwZTpcIk51bWJlclwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hKCFKaShlKSYmIS9eWzEtOV1bMC05XSokLy50ZXN0KGUpKXx8KGNvbnNvbGUud2FybihOYyh7YXBpOlwiZ2V0TWVzc2FnZUxpc3RcIixwYXJhbTpcImNvdW50XCIsZGVzYzpcIuW/hemhu+S4uuato+aVtOaVsFwifSkpLCExKX19fSxzZXRNZXNzYWdlUmVhZDp7Y29udmVyc2F0aW9uSUQ6dCh0KHt9LE9jKSx7fSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBBYyhlKX19KX0sZ2V0Q29udmVyc2F0aW9uUHJvZmlsZTpbdCh0KHtuYW1lOlwiY29udmVyc2F0aW9uSURcIn0sT2MpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIEFjKGUpfX0pXSxkZWxldGVDb252ZXJzYXRpb246W3QodCh7bmFtZTpcImNvbnZlcnNhdGlvbklEXCJ9LE9jKSx7fSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBBYyhlKX19KV0scGluQ29udmVyc2F0aW9uOntjb252ZXJzYXRpb25JRDp0KHQoe30sT2MpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIEFjKGUpfX0pLGlzUGlubmVkOnQoe30se3R5cGU6XCJCb29sZWFuXCIscmVxdWlyZWQ6ITB9KX0sZ2V0R3JvdXBMaXN0Ontncm91cFByb2ZpbGVGaWx0ZXI6e3R5cGU6XCJBcnJheVwifX0sZ2V0R3JvdXBQcm9maWxlOntncm91cElEOk9jLGdyb3VwQ3VzdG9tRmllbGRGaWx0ZXI6e3R5cGU6XCJBcnJheVwifSxtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjp7dHlwZTpcIkFycmF5XCJ9fSxnZXRHcm91cFByb2ZpbGVBZHZhbmNlOntncm91cElETGlzdDpMY30sY3JlYXRlR3JvdXA6e25hbWU6T2N9LGpvaW5Hcm91cDp7Z3JvdXBJRDpPYyx0eXBlOnt0eXBlOlwiU3RyaW5nXCJ9LGFwcGx5TWVzc2FnZTp7dHlwZTpcIlN0cmluZ1wifX0scXVpdEdyb3VwOlt0KHtuYW1lOlwiZ3JvdXBJRFwifSxPYyldLGhhbmRsZUFwcGxpY2F0aW9uOnttZXNzYWdlOlJjLGhhbmRsZUFjdGlvbjpPYyxoYW5kbGVNZXNzYWdlOnt0eXBlOlwiU3RyaW5nXCJ9fSxjaGFuZ2VHcm91cE93bmVyOntncm91cElEOk9jLG5ld093bmVySUQ6T2N9LHVwZGF0ZUdyb3VwUHJvZmlsZTp7Z3JvdXBJRDpPYyxtdXRlQWxsTWVtYmVyczp7dHlwZTpcIkJvb2xlYW5cIn19LGRpc21pc3NHcm91cDpbdCh7bmFtZTpcImdyb3VwSURcIn0sT2MpXSxzZWFyY2hHcm91cEJ5SUQ6W3Qoe25hbWU6XCJncm91cElEXCJ9LE9jKV0saW5pdEdyb3VwQXR0cmlidXRlczp7Z3JvdXBJRDpPYyxncm91cEF0dHJpYnV0ZXM6dCh0KHt9LFJjKSx7fSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3ZhciB0PSEwO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXtpZighJGkoZVtuXSkpcmV0dXJuIGNvbnNvbGUud2FybihOYyh7YXBpOlwiaW5pdEdyb3VwQXR0cmlidXRlc1wiLGRlc2M6XCLnvqTlsZ7mgKcgdmFsdWUg5b+F6aG75piv5a2X56ym5LiyXCJ9KSksdD0hMX0pKSx0fX0pfSxzZXRHcm91cEF0dHJpYnV0ZXM6e2dyb3VwSUQ6T2MsZ3JvdXBBdHRyaWJ1dGVzOnQodCh7fSxSYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXt2YXIgdD0hMDtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7aWYoISRpKGVbbl0pKXJldHVybiBjb25zb2xlLndhcm4oTmMoe2FwaTpcInNldEdyb3VwQXR0cmlidXRlc1wiLGRlc2M6XCLnvqTlsZ7mgKcgdmFsdWUg5b+F6aG75piv5a2X56ym5LiyXCJ9KSksdD0hMX0pKSx0fX0pfSxkZWxldGVHcm91cEF0dHJpYnV0ZXM6e2dyb3VwSUQ6T2Msa2V5TGlzdDp7dHlwZTpcIkFycmF5XCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe2lmKEppKGUpKXJldHVybiBjb25zb2xlLndhcm4oTmMoe2FwaTpcImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wiLGRlc2M6XCLnvLrlsJHlv4Xloavlj4LmlbDvvJprZXlMaXN0XCJ9KSksITE7aWYoIVdpKGUpKXJldHVybiExO2lmKCFMdShlKSl7dmFyIHQ9ITA7cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoISRpKGUpKXJldHVybiBjb25zb2xlLndhcm4oTmMoe2FwaTpcImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wiLGRlc2M6XCLnvqTlsZ7mgKcga2V5IOW/hemhu+aYr+Wtl+espuS4slwifSkpLHQ9ITF9KSksdH1yZXR1cm4hMH19fSxnZXRHcm91cEF0dHJpYnV0ZXM6e2dyb3VwSUQ6T2Msa2V5TGlzdDp7dHlwZTpcIkFycmF5XCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe2lmKEppKGUpKXJldHVybiBjb25zb2xlLndhcm4oTmMoe2FwaTpcImdldEdyb3VwQXR0cmlidXRlc1wiLGRlc2M6XCLnvLrlsJHlv4Xloavlj4LmlbDvvJprZXlMaXN0XCJ9KSksITE7aWYoIVdpKGUpKXJldHVybiExO2lmKCFMdShlKSl7dmFyIHQ9ITA7cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoISRpKGUpKXJldHVybiBjb25zb2xlLndhcm4oTmMoe2FwaTpcImdldEdyb3VwQXR0cmlidXRlc1wiLGRlc2M6XCLnvqTlsZ7mgKcga2V5IOW/hemhu+aYr+Wtl+espuS4slwifSkpLHQ9ITF9KSksdH1yZXR1cm4hMH19fSxnZXRHcm91cE1lbWJlckxpc3Q6e2dyb3VwSUQ6T2Msb2Zmc2V0Ont0eXBlOlwiTnVtYmVyXCJ9LGNvdW50Ont0eXBlOlwiTnVtYmVyXCJ9fSxnZXRHcm91cE1lbWJlclByb2ZpbGU6e2dyb3VwSUQ6T2MsdXNlcklETGlzdDpMYyxtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjp7dHlwZTpcIkFycmF5XCJ9fSxhZGRHcm91cE1lbWJlcjp7Z3JvdXBJRDpPYyx1c2VySURMaXN0OkxjfSxzZXRHcm91cE1lbWJlclJvbGU6e2dyb3VwSUQ6T2MsdXNlcklEOk9jLHJvbGU6T2N9LHNldEdyb3VwTWVtYmVyTXV0ZVRpbWU6e2dyb3VwSUQ6T2MsdXNlcklEOk9jLG11dGVUaW1lOnt0eXBlOlwiTnVtYmVyXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiBlPj0wfX19LHNldEdyb3VwTWVtYmVyTmFtZUNhcmQ6e2dyb3VwSUQ6T2MsdXNlcklEOnt0eXBlOlwiU3RyaW5nXCJ9LG5hbWVDYXJkOnt0eXBlOlwiU3RyaW5nXCIsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiAkaShlKT8oZS5sZW5ndGgsITApOihjb25zb2xlLndhcm4oTmMoe2FwaTpcInNldEdyb3VwTWVtYmVyTmFtZUNhcmRcIixwYXJhbTpcIm5hbWVDYXJkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSwhMSl9fX0sc2V0TWVzc2FnZVJlbWluZFR5cGU6e2dyb3VwSUQ6T2MsbWVzc2FnZVJlbWluZFR5cGU6T2N9LHNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGQ6e2dyb3VwSUQ6T2MsdXNlcklEOnt0eXBlOlwiU3RyaW5nXCJ9LG1lbWJlckN1c3RvbUZpZWxkOkxjfSxkZWxldGVHcm91cE1lbWJlcjp7Z3JvdXBJRDpPY30sY3JlYXRlVGV4dE1lc3NhZ2U6e3RvOk9jLGNvbnZlcnNhdGlvblR5cGU6T2MscGF5bG9hZDp0KHQoe30sUmMpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIHppKGUpPyRpKGUudGV4dCk/MCE9PWUudGV4dC5sZW5ndGh8fChjb25zb2xlLndhcm4oTmMoe2FwaTpcImNyZWF0ZVRleHRNZXNzYWdlXCIsZGVzYzpcIua2iOaBr+WGheWuueS4jeiDveS4uuepulwifSkpLCExKTooY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVUZXh0TWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC50ZXh0XCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSwhMSk6KGNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlVGV4dE1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExKX19KX0sY3JlYXRlVGV4dEF0TWVzc2FnZTp7dG86T2MsY29udmVyc2F0aW9uVHlwZTpPYyxwYXlsb2FkOnQodCh7fSxSYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gemkoZSk/JGkoZS50ZXh0KT8wPT09ZS50ZXh0Lmxlbmd0aD8oY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIsZGVzYzpcIua2iOaBr+WGheWuueS4jeiDveS4uuepulwifSkpLCExKTohKGUuYXRVc2VyTGlzdCYmIVdpKGUuYXRVc2VyTGlzdCkpfHwoY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIsZGVzYzpcInBheWxvYWQuYXRVc2VyTGlzdCDnsbvlnovlv4XpobvkuLrmlbDnu4RcIn0pKSwhMSk6KGNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlVGV4dEF0TWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC50ZXh0XCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSwhMSk6KGNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlVGV4dEF0TWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITEpfX0pfSxjcmVhdGVDdXN0b21NZXNzYWdlOnt0bzpPYyxjb252ZXJzYXRpb25UeXBlOk9jLHBheWxvYWQ6dCh0KHt9LFJjKSx7fSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiB6aShlKT9lLmRhdGEmJiEkaShlLmRhdGEpPyhjb25zb2xlLndhcm4oTmMoe2FwaTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZGF0YVwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogU3RyaW5nXCJ9KSksITEpOmUuZGVzY3JpcHRpb24mJiEkaShlLmRlc2NyaXB0aW9uKT8oY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVDdXN0b21NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmRlc2NyaXB0aW9uXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSwhMSk6IShlLmV4dGVuc2lvbiYmISRpKGUuZXh0ZW5zaW9uKSl8fChjb25zb2xlLndhcm4oTmMoe2FwaTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZXh0ZW5zaW9uXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSwhMSk6KGNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlQ3VzdG9tTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITEpfX0pfSxjcmVhdGVJbWFnZU1lc3NhZ2U6e3RvOk9jLGNvbnZlcnNhdGlvblR5cGU6T2MscGF5bG9hZDp0KHQoe30sUmMpLHt9LHt2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7aWYoIXppKGUpKXJldHVybiBjb25zb2xlLndhcm4oTmMoe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITE7aWYoSmkoZS5maWxlKSlyZXR1cm4gY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLkuI3og73kuLogdW5kZWZpbmVkXCJ9KSksITE7aWYoc2kpe2lmKCEoZS5maWxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudHx8SGkoZS5maWxlKSkpcmV0dXJuIHppKGUuZmlsZSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmk/MCE9PWUuZmlsZS50ZW1wRmlsZVBhdGhzLmxlbmd0aCYmMCE9PWUuZmlsZS50ZW1wRmlsZXMubGVuZ3RofHwoY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLmgqjmsqHmnInpgInmi6nmlofku7bvvIzml6Dms5Xlj5HpgIFcIn0pKSwhMSk6KGNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi57G75Z6L5b+F6aG75pivIEhUTUxJbnB1dEVsZW1lbnQg5oiWIEZpbGVcIn0pKSwhMSk7aWYoZS5maWxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmMD09PWUuZmlsZS5maWxlcy5sZW5ndGgpcmV0dXJuIGNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOlwi5oKo5rKh5pyJ6YCJ5oup5paH5Lu277yM5peg5rOV5Y+R6YCBXCJ9KSksITF9cmV0dXJuITB9LG9uUHJvZ3Jlc3M6e3R5cGU6XCJGdW5jdGlvblwiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gSmkoZSkmJmNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIsZGVzYzpcIuayoeaciSBvblByb2dyZXNzIOWbnuiwg++8jOaCqOWwhuaXoOazleiOt+WPluS4iuS8oOi/m+W6plwifSkpLCEwfX19KX0sY3JlYXRlQXVkaW9NZXNzYWdlOnt0bzpPYyxjb252ZXJzYXRpb25UeXBlOk9jLHBheWxvYWQ6dCh0KHt9LFJjKSx7fSx7dmFsaWRhdG9yOmZ1bmN0aW9uKGUpe3JldHVybiEhemkoZSl8fChjb25zb2xlLndhcm4oTmMoe2FwaTpcImNyZWF0ZUF1ZGlvTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITEpfX0pLG9uUHJvZ3Jlc3M6e3R5cGU6XCJGdW5jdGlvblwiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gSmkoZSkmJmNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlQXVkaW9NZXNzYWdlXCIsZGVzYzpcIuayoeaciSBvblByb2dyZXNzIOWbnuiwg++8jOaCqOWwhuaXoOazleiOt+WPluS4iuS8oOi/m+W6plwifSkpLCEwfX19LGNyZWF0ZVZpZGVvTWVzc2FnZTp7dG86T2MsY29udmVyc2F0aW9uVHlwZTpPYyxwYXlsb2FkOnQodCh7fSxSYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtpZighemkoZSkpcmV0dXJuIGNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBwbGFpbiBvYmplY3RcIn0pKSwhMTtpZihKaShlLmZpbGUpKXJldHVybiBjb25zb2xlLndhcm4oTmMoe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuS4jeiDveS4uiB1bmRlZmluZWRcIn0pKSwhMTtpZihzaSl7aWYoIShlLmZpbGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50fHxIaShlLmZpbGUpKSlyZXR1cm4gemkoZS5maWxlKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaT8hIUhpKGUuZmlsZS50ZW1wRmlsZSl8fChjb25zb2xlLndhcm4oTmMoe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuaCqOayoeaciemAieaLqeaWh+S7tu+8jOaXoOazleWPkemAgVwifSkpLCExKTooY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLnsbvlnovlv4XpobvmmK8gSFRNTElucHV0RWxlbWVudCDmiJYgRmlsZVwifSkpLCExKTtpZihlLmZpbGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiYwPT09ZS5maWxlLmZpbGVzLmxlbmd0aClyZXR1cm4gY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLmgqjmsqHmnInpgInmi6nmlofku7bvvIzml6Dms5Xlj5HpgIFcIn0pKSwhMX1yZXR1cm4hMH19KSxvblByb2dyZXNzOnt0eXBlOlwiRnVuY3Rpb25cIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpJiZjb25zb2xlLndhcm4oTmMoe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLGRlc2M6XCLmsqHmnIkgb25Qcm9ncmVzcyDlm57osIPvvIzmgqjlsIbml6Dms5Xojrflj5bkuIrkvKDov5vluqZcIn0pKSwhMH19fSxjcmVhdGVGYWNlTWVzc2FnZTp7dG86T2MsY29udmVyc2F0aW9uVHlwZTpPYyxwYXlsb2FkOnQodCh7fSxSYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gemkoZSk/amkoZS5pbmRleCk/ISEkaShlLmRhdGEpfHwoY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVGYWNlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5kYXRhXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSwhMSk6KGNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlRmFjZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuaW5kZXhcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IE51bWJlclwifSkpLCExKTooY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVGYWNlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6XCLnsbvlnovlv4XpobvkuLogcGxhaW4gb2JqZWN0XCJ9KSksITEpfX0pfSxjcmVhdGVGaWxlTWVzc2FnZTp7dG86T2MsY29udmVyc2F0aW9uVHlwZTpPYyxwYXlsb2FkOnQodCh7fSxSYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtpZighemkoZSkpcmV0dXJuIGNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlRmlsZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IHBsYWluIG9iamVjdFwifSkpLCExO2lmKEppKGUuZmlsZSkpcmV0dXJuIGNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlRmlsZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6XCLkuI3og73kuLogdW5kZWZpbmVkXCJ9KSksITE7aWYoc2kpe2lmKCEoZS5maWxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudHx8SGkoZS5maWxlKSkpcmV0dXJuIHppKGUuZmlsZSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmk/MCE9PWUuZmlsZS50ZW1wRmlsZVBhdGhzLmxlbmd0aCYmMCE9PWUuZmlsZS50ZW1wRmlsZXMubGVuZ3RofHwoY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuaCqOayoeaciemAieaLqeaWh+S7tu+8jOaXoOazleWPkemAgVwifSkpLCExKTooY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpcIuexu+Wei+W/hemhu+aYryBIVE1MSW5wdXRFbGVtZW50IOaIliBGaWxlXCJ9KSksITEpO2lmKGUuZmlsZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJjA9PT1lLmZpbGUuZmlsZXMubGVuZ3RoKXJldHVybiBjb25zb2xlLndhcm4oTmMoe2FwaTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIsZGVzYzpcIuaCqOayoeaciemAieaLqeaWh+S7tu+8jOaXoOazleWPkemAgVwifSkpLCExfXJldHVybiEwfX0pLG9uUHJvZ3Jlc3M6e3R5cGU6XCJGdW5jdGlvblwiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gSmkoZSkmJmNvbnNvbGUud2FybihOYyh7YXBpOlwiY3JlYXRlRmlsZU1lc3NhZ2VcIixkZXNjOlwi5rKh5pyJIG9uUHJvZ3Jlc3Mg5Zue6LCD77yM5oKo5bCG5peg5rOV6I635Y+W5LiK5Lyg6L+b5bqmXCJ9KSksITB9fX0sY3JlYXRlTWVyZ2VyTWVzc2FnZTp7dG86T2MsY29udmVyc2F0aW9uVHlwZTpPYyxwYXlsb2FkOnQodCh7fSxSYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtpZihMdShlLm1lc3NhZ2VMaXN0KSlyZXR1cm4gY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsZGVzYzpcIuS4jeiDveS4uuepuuaVsOe7hFwifSkpLCExO2lmKEx1KGUuY29tcGF0aWJsZVRleHQpKXJldHVybiBjb25zb2xlLndhcm4oTmMoe2FwaTpcImNyZWF0ZU1lcmdlck1lc3NhZ2VcIixkZXNjOlwi57G75Z6L5b+F6aG75Li6IFN0cmluZ++8jOS4lOS4jeiDveS4uuepulwifSkpLCExO3ZhciB0PSExO3JldHVybiBlLm1lc3NhZ2VMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2Uuc3RhdHVzPT09RWMuRkFJTCYmKHQ9ITApfSkpLCF0fHwoY29uc29sZS53YXJuKE5jKHthcGk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsZGVzYzpcIuS4jeaUr+aMgeWQiOW5tuW3suWPkemAgeWksei0peeahOa2iOaBr1wifSkpLCExKX19KX0scmV2b2tlTWVzc2FnZTpbdCh0KHtuYW1lOlwibWVzc2FnZVwifSxSYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gTHUoZSk/KGNvbnNvbGUud2FybihcInJldm9rZU1lc3NhZ2Ug6K+35Lyg5YWl5raI5oGv77yITWVzc2FnZe+8ieWunuS+i1wiKSwhMSk6ZS5jb252ZXJzYXRpb25UeXBlPT09cm8uQ09OVl9TWVNURU0/KGNvbnNvbGUud2FybihcInJldm9rZU1lc3NhZ2Ug5LiN6IO95pKk5Zue57O757uf5Lya6K+d5raI5oGv77yM5Y+q6IO95pKk5Zue5Y2V6IGK5raI5oGv5oiW576k5raI5oGvXCIpLCExKTohMCE9PWUuaXNSZXZva2VkfHwoY29uc29sZS53YXJuKFwicmV2b2tlTWVzc2FnZSDmtojmga/lt7Lnu4/ooqvmkqTlm57vvIzor7fli7/ph43lpI3mk43kvZxcIiksITEpfX0pXSxkZWxldGVNZXNzYWdlOlt0KHQoe25hbWU6XCJtZXNzYWdlTGlzdFwifSxMYykse30se3ZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hTHUoZSl8fChjb25zb2xlLndhcm4oTmMoe2FwaTpcImRlbGV0ZU1lc3NhZ2VcIixwYXJhbTpcIm1lc3NhZ2VMaXN0XCIsZGVzYzpcIuS4jeiDveS4uuepuuaVsOe7hFwifSkpLCExKX19KV0sZ2V0VXNlclByb2ZpbGU6e3VzZXJJRExpc3Q6e3R5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4gV2koZSk/KDA9PT1lLmxlbmd0aCYmY29uc29sZS53YXJuKE5jKHthcGk6XCJnZXRVc2VyUHJvZmlsZVwiLHBhcmFtOlwidXNlcklETGlzdFwiLGRlc2M6XCLkuI3og73kuLrnqbrmlbDnu4RcIn0pKSwhMCk6KGNvbnNvbGUud2FybihOYyh7YXBpOlwiZ2V0VXNlclByb2ZpbGVcIixwYXJhbTpcInVzZXJJRExpc3RcIixkZXNjOlwi5b+F6aG75Li65pWw57uEXCJ9KSksITEpfX19LHVwZGF0ZU15UHJvZmlsZTp7cHJvZmlsZUN1c3RvbUZpZWxkOnt0eXBlOlwiQXJyYXlcIix2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuISFKaShlKXx8KCEhV2koZSl8fChjb25zb2xlLndhcm4oTmMoe2FwaTpcInVwZGF0ZU15UHJvZmlsZVwiLHBhcmFtOlwicHJvZmlsZUN1c3RvbUZpZWxkXCIsZGVzYzpcIuW/hemhu+S4uuaVsOe7hFwifSkpLCExKSl9fX0sYWRkRnJpZW5kOnt0bzpPYyxzb3VyY2U6e3R5cGU6XCJTdHJpbmdcIixyZXF1aXJlZDohMCx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYoZS5zdGFydHNXaXRoKFwiQWRkU291cmNlX1R5cGVfXCIpPyEoZS5yZXBsYWNlKFwiQWRkU291cmNlX1R5cGVfXCIsXCJcIikubGVuZ3RoPjgpfHwoY29uc29sZS53YXJuKE5jKHthcGk6XCJhZGRGcmllbmRcIixkZXNjOlwi5Yqg5aW95Y+L5p2l5rqQ5a2X5q6155qE5YWz6ZSu5a2X6ZW/5bqm5LiN5b6X6LaF6L+HOOWtl+iKglwifSkpLCExKTooY29uc29sZS53YXJuKE5jKHthcGk6XCJhZGRGcmllbmRcIixkZXNjOlwi5Yqg5aW95Y+L5p2l5rqQ5a2X5q6155qE5YmN57yA5b+F6aG75piv77yaQWRkU291cmNlX1R5cGVfXCJ9KSksITEpKX19LHJlbWFyazp7dHlwZTpcIlN0cmluZ1wiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjpmdW5jdGlvbihlKXtyZXR1cm4hKCRpKGUpJiZlLmxlbmd0aD45Nil8fChjb25zb2xlLndhcm4oTmMoe2FwaTpcInVwZGF0ZUZyaWVuZFwiLGRlc2M6XCIg5aSH5rOo6ZW/5bqm5pyA6ZW/5LiN5b6X6LaF6L+HIDk2IOS4quWtl+iKglwifSkpLCExKX19fSxkZWxldGVGcmllbmQ6e3VzZXJJRExpc3Q6TGN9LGNoZWNrRnJpZW5kOnt1c2VySURMaXN0OkxjfSxnZXRGcmllbmRQcm9maWxlOnt1c2VySURMaXN0OkxjfSx1cGRhdGVGcmllbmQ6e3VzZXJJRDpPYyxyZW1hcms6e3R5cGU6XCJTdHJpbmdcIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuISgkaShlKSYmZS5sZW5ndGg+OTYpfHwoY29uc29sZS53YXJuKE5jKHthcGk6XCJ1cGRhdGVGcmllbmRcIixkZXNjOlwiIOWkh+azqOmVv+W6puacgOmVv+S4jeW+l+i2hei/hyA5NiDkuKrlrZfoioJcIn0pKSwhMSl9fSxmcmllbmRDdXN0b21GaWVsZDp7dHlwZTpcIkFycmF5XCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmZ1bmN0aW9uKGUpe2lmKGUpe2lmKCFXaShlKSlyZXR1cm4gY29uc29sZS53YXJuKE5jKHthcGk6XCJ1cGRhdGVGcmllbmRcIixwYXJhbTpcImZyaWVuZEN1c3RvbUZpZWxkXCIsZGVzYzpcIuW/hemhu+S4uuaVsOe7hFwifSkpLCExO3ZhciB0PSEwO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiAkaShlLmtleSkmJi0xIT09ZS5rZXkuaW5kZXhPZihcIlRhZ19TTlNfQ3VzdG9tXCIpPyRpKGUudmFsdWUpP2UudmFsdWUubGVuZ3RoPjg/KGNvbnNvbGUud2FybihOYyh7YXBpOlwidXBkYXRlRnJpZW5kXCIsZGVzYzpcIuWlveWPi+iHquWumuS5ieWtl+auteeahOWFs+mUruWtl+mVv+W6puS4jeW+l+i2hei/hzjlrZfoioJcIn0pKSx0PSExKTp2b2lkIDA6KGNvbnNvbGUud2FybihOYyh7YXBpOlwidXBkYXRlRnJpZW5kXCIsZGVzYzpcIuexu+Wei+W/hemhu+S4uiBTdHJpbmdcIn0pKSx0PSExKTooY29uc29sZS53YXJuKE5jKHthcGk6XCJ1cGRhdGVGcmllbmRcIixkZXNjOlwi5aW95Y+L6Ieq5a6a5LmJ5a2X5q6155qE5YmN57yA5b+F6aG75pivIFRhZ19TTlNfQ3VzdG9tXCJ9KSksdD0hMSl9KSksdH1yZXR1cm4hMH19fSxhY2NlcHRGcmllbmRBcHBsaWNhdGlvbjp7dXNlcklEOk9jfSxyZWZ1c2VGcmllbmRBcHBsaWNhdGlvbjp7dXNlcklEOk9jfSxkZWxldGVGcmllbmRBcHBsaWNhdGlvbjp7dXNlcklEOk9jfSxjcmVhdGVGcmllbmRHcm91cDp7bmFtZTpPY30sZGVsZXRlRnJpZW5kR3JvdXA6e25hbWU6T2N9LGFkZFRvRnJpZW5kR3JvdXA6e25hbWU6T2MsdXNlcklETGlzdDpMY30scmVtb3ZlRnJvbUZyaWVuZEdyb3VwOntuYW1lOk9jLHVzZXJJRExpc3Q6TGN9LHJlbmFtZUZyaWVuZEdyb3VwOntvbGROYW1lOk9jLG5ld05hbWU6T2N9fSx3Yz17bG9naW46XCJsb2dpblwiLGxvZ291dDpcImxvZ291dFwiLG9uOlwib25cIixvbmNlOlwib25jZVwiLG9mZjpcIm9mZlwiLHNldExvZ0xldmVsOlwic2V0TG9nTGV2ZWxcIixyZWdpc3RlclBsdWdpbjpcInJlZ2lzdGVyUGx1Z2luXCIsZGVzdHJveTpcImRlc3Ryb3lcIixjcmVhdGVUZXh0TWVzc2FnZTpcImNyZWF0ZVRleHRNZXNzYWdlXCIsY3JlYXRlVGV4dEF0TWVzc2FnZTpcImNyZWF0ZVRleHRBdE1lc3NhZ2VcIixjcmVhdGVJbWFnZU1lc3NhZ2U6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIixjcmVhdGVBdWRpb01lc3NhZ2U6XCJjcmVhdGVBdWRpb01lc3NhZ2VcIixjcmVhdGVWaWRlb01lc3NhZ2U6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixjcmVhdGVDdXN0b21NZXNzYWdlOlwiY3JlYXRlQ3VzdG9tTWVzc2FnZVwiLGNyZWF0ZUZhY2VNZXNzYWdlOlwiY3JlYXRlRmFjZU1lc3NhZ2VcIixjcmVhdGVGaWxlTWVzc2FnZTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIsY3JlYXRlTWVyZ2VyTWVzc2FnZTpcImNyZWF0ZU1lcmdlck1lc3NhZ2VcIixkb3dubG9hZE1lcmdlck1lc3NhZ2U6XCJkb3dubG9hZE1lcmdlck1lc3NhZ2VcIixjcmVhdGVGb3J3YXJkTWVzc2FnZTpcImNyZWF0ZUZvcndhcmRNZXNzYWdlXCIsc2VuZE1lc3NhZ2U6XCJzZW5kTWVzc2FnZVwiLHJlc2VuZE1lc3NhZ2U6XCJyZXNlbmRNZXNzYWdlXCIscmV2b2tlTWVzc2FnZTpcInJldm9rZU1lc3NhZ2VcIixkZWxldGVNZXNzYWdlOlwiZGVsZXRlTWVzc2FnZVwiLGdldE1lc3NhZ2VMaXN0OlwiZ2V0TWVzc2FnZUxpc3RcIixzZXRNZXNzYWdlUmVhZDpcInNldE1lc3NhZ2VSZWFkXCIsZ2V0Q29udmVyc2F0aW9uTGlzdDpcImdldENvbnZlcnNhdGlvbkxpc3RcIixnZXRDb252ZXJzYXRpb25Qcm9maWxlOlwiZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiLGRlbGV0ZUNvbnZlcnNhdGlvbjpcImRlbGV0ZUNvbnZlcnNhdGlvblwiLHBpbkNvbnZlcnNhdGlvbjpcInBpbkNvbnZlcnNhdGlvblwiLGdldEdyb3VwTGlzdDpcImdldEdyb3VwTGlzdFwiLGdldEdyb3VwUHJvZmlsZTpcImdldEdyb3VwUHJvZmlsZVwiLGNyZWF0ZUdyb3VwOlwiY3JlYXRlR3JvdXBcIixqb2luR3JvdXA6XCJqb2luR3JvdXBcIix1cGRhdGVHcm91cFByb2ZpbGU6XCJ1cGRhdGVHcm91cFByb2ZpbGVcIixxdWl0R3JvdXA6XCJxdWl0R3JvdXBcIixkaXNtaXNzR3JvdXA6XCJkaXNtaXNzR3JvdXBcIixjaGFuZ2VHcm91cE93bmVyOlwiY2hhbmdlR3JvdXBPd25lclwiLHNlYXJjaEdyb3VwQnlJRDpcInNlYXJjaEdyb3VwQnlJRFwiLHNldE1lc3NhZ2VSZW1pbmRUeXBlOlwic2V0TWVzc2FnZVJlbWluZFR5cGVcIixoYW5kbGVHcm91cEFwcGxpY2F0aW9uOlwiaGFuZGxlR3JvdXBBcHBsaWNhdGlvblwiLGluaXRHcm91cEF0dHJpYnV0ZXM6XCJpbml0R3JvdXBBdHRyaWJ1dGVzXCIsc2V0R3JvdXBBdHRyaWJ1dGVzOlwic2V0R3JvdXBBdHRyaWJ1dGVzXCIsZGVsZXRlR3JvdXBBdHRyaWJ1dGVzOlwiZGVsZXRlR3JvdXBBdHRyaWJ1dGVzXCIsZ2V0R3JvdXBBdHRyaWJ1dGVzOlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsZ2V0R3JvdXBNZW1iZXJQcm9maWxlOlwiZ2V0R3JvdXBNZW1iZXJQcm9maWxlXCIsZ2V0R3JvdXBNZW1iZXJMaXN0OlwiZ2V0R3JvdXBNZW1iZXJMaXN0XCIsYWRkR3JvdXBNZW1iZXI6XCJhZGRHcm91cE1lbWJlclwiLGRlbGV0ZUdyb3VwTWVtYmVyOlwiZGVsZXRlR3JvdXBNZW1iZXJcIixzZXRHcm91cE1lbWJlck5hbWVDYXJkOlwic2V0R3JvdXBNZW1iZXJOYW1lQ2FyZFwiLHNldEdyb3VwTWVtYmVyTXV0ZVRpbWU6XCJzZXRHcm91cE1lbWJlck11dGVUaW1lXCIsc2V0R3JvdXBNZW1iZXJSb2xlOlwic2V0R3JvdXBNZW1iZXJSb2xlXCIsc2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZDpcInNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGRcIixnZXRHcm91cE9ubGluZU1lbWJlckNvdW50OlwiZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwiLGdldE15UHJvZmlsZTpcImdldE15UHJvZmlsZVwiLGdldFVzZXJQcm9maWxlOlwiZ2V0VXNlclByb2ZpbGVcIix1cGRhdGVNeVByb2ZpbGU6XCJ1cGRhdGVNeVByb2ZpbGVcIixnZXRCbGFja2xpc3Q6XCJnZXRCbGFja2xpc3RcIixhZGRUb0JsYWNrbGlzdDpcImFkZFRvQmxhY2tsaXN0XCIscmVtb3ZlRnJvbUJsYWNrbGlzdDpcInJlbW92ZUZyb21CbGFja2xpc3RcIixnZXRGcmllbmRMaXN0OlwiZ2V0RnJpZW5kTGlzdFwiLGFkZEZyaWVuZDpcImFkZEZyaWVuZFwiLGRlbGV0ZUZyaWVuZDpcImRlbGV0ZUZyaWVuZFwiLGNoZWNrRnJpZW5kOlwiY2hlY2tGcmllbmRcIix1cGRhdGVGcmllbmQ6XCJ1cGRhdGVGcmllbmRcIixnZXRGcmllbmRQcm9maWxlOlwiZ2V0RnJpZW5kUHJvZmlsZVwiLGdldEZyaWVuZEFwcGxpY2F0aW9uTGlzdDpcImdldEZyaWVuZEFwcGxpY2F0aW9uTGlzdFwiLHJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uOlwicmVmdXNlRnJpZW5kQXBwbGljYXRpb25cIixkZWxldGVGcmllbmRBcHBsaWNhdGlvbjpcImRlbGV0ZUZyaWVuZEFwcGxpY2F0aW9uXCIsYWNjZXB0RnJpZW5kQXBwbGljYXRpb246XCJhY2NlcHRGcmllbmRBcHBsaWNhdGlvblwiLHNldEZyaWVuZEFwcGxpY2F0aW9uUmVhZDpcInNldEZyaWVuZEFwcGxpY2F0aW9uUmVhZFwiLGdldEZyaWVuZEdyb3VwTGlzdDpcImdldEZyaWVuZEdyb3VwTGlzdFwiLGNyZWF0ZUZyaWVuZEdyb3VwOlwiY3JlYXRlRnJpZW5kR3JvdXBcIixyZW5hbWVGcmllbmRHcm91cDpcInJlbmFtZUZyaWVuZEdyb3VwXCIsZGVsZXRlRnJpZW5kR3JvdXA6XCJkZWxldGVGcmllbmRHcm91cFwiLGFkZFRvRnJpZW5kR3JvdXA6XCJhZGRUb0ZyaWVuZEdyb3VwXCIscmVtb3ZlRnJvbUZyaWVuZEdyb3VwOlwicmVtb3ZlRnJvbUZyaWVuZEdyb3VwXCIsY2FsbEV4cGVyaW1lbnRhbEFQSTpcImNhbGxFeHBlcmltZW50YWxBUElcIn0sUGM9ISFoYSYmTCgoZnVuY3Rpb24oKXtoYS5wcm90b3R5cGUuZmluYWxseS5jYWxsKHt0aGVuOmZ1bmN0aW9uKCl7fX0sKGZ1bmN0aW9uKCl7fSkpfSkpO2lmKHZ0KHt0YXJnZXQ6XCJQcm9taXNlXCIscHJvdG86ITAscmVhbDohMCxmb3JjZWQ6UGN9LHtmaW5hbGx5OmZ1bmN0aW9uKGUpe3ZhciB0PVRhKHRoaXMsaihcIlByb21pc2VcIikpLG49XCJmdW5jdGlvblwiPT10eXBlb2YgZTtyZXR1cm4gdGhpcy50aGVuKG4/ZnVuY3Rpb24obil7cmV0dXJuIHVzKHQsZSgpKS50aGVuKChmdW5jdGlvbigpe3JldHVybiBufSkpfTplLG4/ZnVuY3Rpb24obil7cmV0dXJuIHVzKHQsZSgpKS50aGVuKChmdW5jdGlvbigpe3Rocm93IG59KSl9OmUpfX0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIGhhKXt2YXIgR2M9aihcIlByb21pc2VcIikucHJvdG90eXBlLmZpbmFsbHk7aGEucHJvdG90eXBlLmZpbmFsbHkhPT1HYyYmSGUoaGEucHJvdG90eXBlLFwiZmluYWxseVwiLEdjLHt1bnNhZmU6ITB9KX12YXIgVWM9W10uc2xpY2UsRmM9L01TSUUgLlxcLi8udGVzdCgkKSxxYz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXt2YXIgbz1hcmd1bWVudHMubGVuZ3RoPjIscj1vP1VjLmNhbGwoYXJndW1lbnRzLDIpOnZvaWQgMDtyZXR1cm4gZShvP2Z1bmN0aW9uKCl7KFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDpGdW5jdGlvbih0KSkuYXBwbHkodGhpcyxyKX06dCxuKX19O3Z0KHtnbG9iYWw6ITAsYmluZDohMCxmb3JjZWQ6RmN9LHtzZXRUaW1lb3V0OnFjKE8uc2V0VGltZW91dCksc2V0SW50ZXJ2YWw6cWMoTy5zZXRJbnRlcnZhbCl9KTt2YXIgeGM9WXQuZmlsdGVyLFZjPVFuKFwiZmlsdGVyXCIpO3Z0KHt0YXJnZXQ6XCJBcnJheVwiLHByb3RvOiEwLGZvcmNlZDohVmN9LHtmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHhjKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSk7dmFyIEtjLEJjPVwic2lnblwiLEhjPVwibWVzc2FnZVwiLGpjPVwidXNlclwiLCRjPVwiYzJjXCIsWWM9XCJncm91cFwiLHpjPVwic25zXCIsV2M9XCJncm91cE1lbWJlclwiLEpjPVwiY29udmVyc2F0aW9uXCIsWGM9XCJjb250ZXh0XCIsUWM9XCJzdG9yYWdlXCIsWmM9XCJldmVudFN0YXRcIixlbD1cIm5ldE1vbml0b3JcIix0bD1cImJpZ0RhdGFDaGFubmVsXCIsbmw9XCJ1cGxvYWRcIixvbD1cInBsdWdpblwiLHJsPVwic3luY1VucmVhZE1lc3NhZ2VcIixhbD1cInNlc3Npb25cIixzbD1cImNoYW5uZWxcIixpbD1cIm1lc3NhZ2VfbG9zc19kZXRlY3Rpb25cIix1bD1cImNsb3VkQ29udHJvbFwiLGNsPVwicHVsbEdyb3VwTWVzc2FnZVwiLGxsPVwicXVhbGl0eVN0YXRcIixwbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX21vZHVsZU1hbmFnZXI9dCx0aGlzLl9jbGFzc05hbWU9XCJcIn1yZXR1cm4gYShlLFt7a2V5OlwiaXNMb2dnZWRJblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFhjKS5pc0xvZ2dlZEluKCl9fSx7a2V5OlwiaXNPdmVyc2VhXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWGMpLmlzT3ZlcnNlYSgpfX0se2tleTpcImdldE15VXNlcklEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWGMpLmdldFVzZXJJRCgpfX0se2tleTpcImdldE1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShlKX19LHtrZXk6XCJnZXRQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHVpfX0se2tleTpcImdldE5ldHdvcmtUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoZWwpLmdldE5ldHdvcmtUeXBlKCl9fSx7a2V5OlwicHJvYmVOZXR3b3JrXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoZWwpLnByb2JlKCl9fSx7a2V5OlwiZ2V0Q2xvdWRDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUodWwpLmdldENsb3VkQ29uZmlnKGUpfX0se2tleTpcImVtaXRPdXRlckV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkuZW1pdChlLHQpfX0se2tleTpcImVtaXRJbm5lckV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkuZW1pdChlLHQpfX0se2tleTpcImdldElubmVyRW1pdHRlckluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpfX0se2tleTpcImdlbmVyYXRlVGpnSURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWGMpLmdldFRpbnlJRCgpK1wiLVwiK2UucmFuZG9tfX0se2tleTpcImZpbHRlck1vZGlmaWVkTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFMdShlKSl7dmFyIHQ9ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiEwPT09ZS5pc01vZGlmaWVkfSkpO3QubGVuZ3RoPjAmJnRoaXMuZW1pdE91dGVyRXZlbnQob28uTUVTU0FHRV9NT0RJRklFRCx0KX19fSx7a2V5OlwiZmlsdGVyVW5tb2RpZmllZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gTHUoZSk/W106ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiExPT09ZS5pc01vZGlmaWVkfSkpfX0se2tleTpcInJlcXVlc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoYWwpLnJlcXVlc3QoZSl9fV0pLGV9KCksZGw9XCJ3c2xvZ2luXCIsZ2w9XCJ3c2xvZ291dFwiLGhsPVwid3NoZWxsb1wiLGZsPVwiZ2V0bXNnXCIsX2w9XCJhdXRoa2V5XCIsbWw9XCJzZW5kbXNnXCIsdmw9XCJzZW5kX2dyb3VwX21zZ1wiLE1sPVwicG9ydHJhaXRfZ2V0X2FsbFwiLHlsPVwicG9ydHJhaXRfc2V0XCIsSWw9XCJibGFja19saXN0X2dldFwiLFRsPVwiYmxhY2tfbGlzdF9hZGRcIixTbD1cImJsYWNrX2xpc3RfZGVsZXRlXCIsRGw9XCJtc2d3aXRoZHJhd1wiLEVsPVwibXNncmVhZGVkXCIsQ2w9XCJnZXRyb2FtbXNnXCIsQWw9XCJnZXRfcGVlcl9yZWFkX3RpbWVcIixrbD1cImRlbGV0ZV9jMmNfbXNnX3JhbWJsZVwiLE5sPVwicGFnZV9nZXRcIixPbD1cImdldFwiLExsPVwiZGVsZXRlXCIsUmw9XCJ0b3BcIixibD1cImRlbGV0ZW1zZ1wiLHdsPVwiZ2V0X2pvaW5lZF9ncm91cF9saXN0XCIsUGw9XCJnZXRfZ3JvdXBfaW5mb1wiLEdsPVwiY3JlYXRlX2dyb3VwXCIsVWw9XCJkZXN0cm95X2dyb3VwXCIsRmw9XCJtb2RpZnlfZ3JvdXBfYmFzZV9pbmZvXCIscWw9XCJhcHBseV9qb2luX2dyb3VwXCIseGw9XCJhcHBseV9qb2luX2dyb3VwX25vYXV0aFwiLFZsPVwicXVpdF9ncm91cFwiLEtsPVwiZ2V0X2dyb3VwX3B1YmxpY19pbmZvXCIsQmw9XCJjaGFuZ2VfZ3JvdXBfb3duZXJcIixIbD1cImhhbmRsZV9hcHBseV9qb2luX2dyb3VwXCIsamw9XCJoYW5kbGVfaW52aXRlX2pvaW5fZ3JvdXBcIiwkbD1cImdyb3VwX21zZ19yZWNhbGxcIixZbD1cIm1zZ19yZWFkX3JlcG9ydFwiLHpsPVwiZ3JvdXBfbXNnX2dldFwiLFdsPVwiZ2V0X3BlbmRlbmN5XCIsSmw9XCJkZWxldGVtc2dcIixYbD1cImdldF9tc2dcIixRbD1cImdldF9tc2dfbm9hdXRoXCIsWmw9XCJnZXRfb25saW5lX21lbWJlcl9udW1cIixlcD1cImRlbGV0ZV9ncm91cF9yYW1ibGVfbXNnX2J5X3NlcVwiLHRwPVwic2V0X2dyb3VwX2F0dHJcIixucD1cIm1vZGlmeV9ncm91cF9hdHRyXCIsb3A9XCJkZWxldGVfZ3JvdXBfYXR0clwiLHJwPVwiY2xlYXJfZ3JvdXBfYXR0clwiLGFwPVwiZ2V0X2dyb3VwX2F0dHJcIixzcD1cImdldF9ncm91cF9tZW1iZXJfaW5mb1wiLGlwPVwiZ2V0X3NwZWNpZmllZF9ncm91cF9tZW1iZXJfaW5mb1wiLHVwPVwiYWRkX2dyb3VwX21lbWJlclwiLGNwPVwiZGVsZXRlX2dyb3VwX21lbWJlclwiLGxwPVwibW9kaWZ5X2dyb3VwX21lbWJlcl9pbmZvXCIscHA9XCJjb3NcIixkcD1cInByZV9zaWdcIixncD1cInRpbV93ZWJfcmVwb3J0X3YyXCIsaHA9XCJhbGl2ZVwiLGZwPVwibXNnX3B1c2hcIixfcD1cIndzX21zZ19wdXNoX2Fja1wiLG1wPVwic3RhdF9mb3JjZW9mZmxpbmVcIix2cD1cInNhdmVfcmVsYXlfanNvbl9tc2dcIixNcD1cImdldF9yZWxheV9qc29uX21zZ1wiLHlwPVwiZmV0Y2hfY29uZmlnXCIsSXA9XCJwdXNoX2NvbmZpZ3YyXCIsVHA9e05PX1NES0FQUElEOjJlMyxOT19BQ0NPVU5UX1RZUEU6MjAwMSxOT19JREVOVElGSUVSOjIwMDIsTk9fVVNFUlNJRzoyMDAzLE5PX1RJTllJRDoyMDIyLE5PX0EyS0VZOjIwMjMsVVNFUl9OT1RfTE9HR0VEX0lOOjIwMjQsUkVQRUFUX0xPR0lOOjIwMjUsQ09TX1VOREVURUNURUQ6MjA0MCxDT1NfR0VUX1NJR19GQUlMOjIwNDEsTUVTU0FHRV9TRU5EX0ZBSUw6MjEwMCxNRVNTQUdFX0xJU1RfQ09OU1RSVUNUT1JfTkVFRF9PUFRJT05TOjIxMDMsTUVTU0FHRV9TRU5EX05FRURfTUVTU0FHRV9JTlNUQU5DRToyMTA1LE1FU1NBR0VfU0VORF9JTlZBTElEX0NPTlZFUlNBVElPTl9UWVBFOjIxMDYsTUVTU0FHRV9GSUxFX0lTX0VNUFRZOjIxMDgsTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SOjIxMDksTUVTU0FHRV9SRVZPS0VfRkFJTDoyMTEwLE1FU1NBR0VfREVMRVRFX0ZBSUw6MjExMSxNRVNTQUdFX0lNQUdFX1NFTEVDVF9GSUxFX0ZJUlNUOjIyNTEsTUVTU0FHRV9JTUFHRV9UWVBFU19MSU1JVDoyMjUyLE1FU1NBR0VfSU1BR0VfU0laRV9MSU1JVDoyMjUzLE1FU1NBR0VfQVVESU9fVVBMT0FEX0ZBSUw6MjMwMCxNRVNTQUdFX0FVRElPX1NJWkVfTElNSVQ6MjMwMSxNRVNTQUdFX1ZJREVPX1VQTE9BRF9GQUlMOjIzNTAsTUVTU0FHRV9WSURFT19TSVpFX0xJTUlUOjIzNTEsTUVTU0FHRV9WSURFT19UWVBFU19MSU1JVDoyMzUyLE1FU1NBR0VfRklMRV9VUExPQURfRkFJTDoyNDAwLE1FU1NBR0VfRklMRV9TRUxFQ1RfRklMRV9GSVJTVDoyNDAxLE1FU1NBR0VfRklMRV9TSVpFX0xJTUlUOjI0MDIsTUVTU0FHRV9GSUxFX1VSTF9JU19FTVBUWToyNDAzLE1FU1NBR0VfTUVSR0VSX1RZUEVfSU5WQUxJRDoyNDUwLE1FU1NBR0VfTUVSR0VSX0tFWV9JTlZBTElEOjI0NTEsTUVTU0FHRV9NRVJHRVJfRE9XTkxPQURfRkFJTDoyNDUyLE1FU1NBR0VfRk9SV0FSRF9UWVBFX0lOVkFMSUQ6MjQ1MyxDT05WRVJTQVRJT05fTk9UX0ZPVU5EOjI1MDAsVVNFUl9PUl9HUk9VUF9OT1RfRk9VTkQ6MjUwMSxDT05WRVJTQVRJT05fVU5fUkVDT1JERURfVFlQRToyNTAyLElMTEVHQUxfR1JPVVBfVFlQRToyNjAwLENBTk5PVF9KT0lOX1dPUks6MjYwMSxDQU5OT1RfQ0hBTkdFX09XTkVSX0lOX0FWQ0hBVFJPT006MjYyMCxDQU5OT1RfQ0hBTkdFX09XTkVSX1RPX1NFTEY6MjYyMSxDQU5OT1RfRElTTUlTU19Xb3JrOjI2MjIsTUVNQkVSX05PVF9JTl9HUk9VUDoyNjIzLENBTk5PVF9VU0VfR1JQX0FUVFJfTk9UX0FWQ0hBVFJPT006MjY0MSxDQU5OT1RfVVNFX0dSUF9BVFRSX0FWQ0hBVFJPT01fVU5KT0lOOjI2NDIsSk9JTl9HUk9VUF9GQUlMOjI2NjAsQ0FOTk9UX0FERF9NRU1CRVJfSU5fQVZDSEFUUk9PTToyNjYxLENBTk5PVF9KT0lOX05PTl9BVkNIQVRST09NX1dJVEhPVVRfTE9HSU46MjY2MixDQU5OT1RfS0lDS19NRU1CRVJfSU5fQVZDSEFUUk9PTToyNjgwLE5PVF9PV05FUjoyNjgxLENBTk5PVF9TRVRfTUVNQkVSX1JPTEVfSU5fV09SS19BTkRfQVZDSEFUUk9PTToyNjgyLElOVkFMSURfTUVNQkVSX1JPTEU6MjY4MyxDQU5OT1RfU0VUX1NFTEZfTUVNQkVSX1JPTEU6MjY4NCxDQU5OT1RfTVVURV9TRUxGOjI2ODUsTk9UX01ZX0ZSSUVORDoyNzAwLEFMUkVBRFlfTVlfRlJJRU5EOjI3MDEsRlJJRU5EX0dST1VQX0VYSVNURUQ6MjcxMCxGUklFTkRfR1JPVVBfTk9UX0VYSVNUOjI3MTEsRlJJRU5EX0FQUExJQ0FUSU9OX05PVF9FWElTVDoyNzE2LFVQREFURV9QUk9GSUxFX0lOVkFMSURfUEFSQU06MjcyMSxVUERBVEVfUFJPRklMRV9OT19LRVk6MjcyMixBRERfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU06Mjc0MCxERUxfQkxBQ0tMSVNUX0lOVkFMSURfUEFSQU06Mjc0MSxDQU5OT1RfQUREX1NFTEZfVE9fQkxBQ0tMSVNUOjI3NDIsQUREX0ZSSUVORF9JTlZBTElEX1BBUkFNOjI3NjAsTkVUV09SS19FUlJPUjoyODAwLE5FVFdPUktfVElNRU9VVDoyODAxLE5FVFdPUktfQkFTRV9PUFRJT05TX05PX1VSTDoyODAyLE5FVFdPUktfVU5ERUZJTkVEX1NFUlZFUl9OQU1FOjI4MDMsTkVUV09SS19QQUNLQUdFX1VOREVGSU5FRDoyODA0LE5PX05FVFdPUks6MjgwNSxDT05WRVJUT1JfSVJSRUdVTEFSX1BBUkFNUzoyOTAwLE5PVElDRV9SVU5MT09QX1VORVhQRUNURURfQ09ORElUSU9OOjI5MDEsTk9USUNFX1JVTkxPT1BfT0ZGU0VUX0xPU1Q6MjkwMixVTkNBVUdIVF9FUlJPUjoyOTAzLEdFVF9MT05HUE9MTF9JRF9GQUlMRUQ6MjkwNCxJTlZBTElEX09QRVJBVElPTjoyOTA1LENBTk5PVF9GSU5EX1BST1RPQ09MOjI5OTcsQ0FOTk9UX0ZJTkRfTU9EVUxFOjI5OTgsU0RLX0lTX05PVF9SRUFEWToyOTk5LExPTkdfUE9MTF9LSUNLX09VVDo5MTEwMSxNRVNTQUdFX0EyS0VZX0VYUElSRUQ6MjAwMDIsQUNDT1VOVF9BMktFWV9FWFBJUkVEOjcwMDAxLExPTkdfUE9MTF9BUElfUEFSQU1fRVJST1I6OTAwMDEsSEVMTE9fQU5TV0VSX0tJQ0tFRF9PVVQ6MTAwMn0sU3A9XCLml6AgU0RLQXBwSURcIixEcD1cIuaXoCB1c2VySURcIixFcD1cIuaXoCB1c2VyU2lnXCIsQ3A9XCLml6AgdGlueUlEXCIsQXA9XCLml6AgYTJrZXlcIixrcD1cIueUqOaIt+acqueZu+W9lVwiLE5wPVwi6YeN5aSN55m75b2VXCIsT3A9XCLmnKrmo4DmtYvliLAgQ09TIOS4iuS8oOaPkuS7tlwiLExwPVwi6I635Y+WIENPUyDpooTnrb7lkI0gVVJMIOWksei0pVwiLFJwPVwi5raI5oGv5Y+R6YCB5aSx6LSlXCIsYnA9XCLpnIDopoEgTWVzc2FnZSDnmoTlrp7kvotcIix3cD0nTWVzc2FnZS5jb252ZXJzYXRpb25UeXBlIOWPquiDveS4uiBcIkMyQ1wiIOaIliBcIkdST1VQXCInLFBwPVwi5peg5rOV5Y+R6YCB56m65paH5Lu2XCIsR3A9XCLlm57osIPlh73mlbDov5DooYzml7bpgYfliLDplJnor6/vvIzor7fmo4Dmn6XmjqXlhaXkvqfku6PnoIFcIixVcD1cIua2iOaBr+aSpOWbnuWksei0pVwiLEZwPVwi5raI5oGv5Yig6Zmk5aSx6LSlXCIscXA9XCLor7flhYjpgInmi6nkuIDkuKrlm77niYdcIix4cD1cIuWPquWFgeiuuOS4iuS8oCBqcGcgcG5nIGpwZWcgZ2lmIGJtcOagvOW8j+eahOWbvueJh1wiLFZwPVwi5Zu+54mH5aSn5bCP6LaF6L+HMjBN77yM5peg5rOV5Y+R6YCBXCIsS3A9XCLor63pn7PkuIrkvKDlpLHotKVcIixCcD1cIuivremfs+Wkp+Wwj+Wkp+S6jjIwTe+8jOaXoOazleWPkemAgVwiLEhwPVwi6KeG6aKR5LiK5Lyg5aSx6LSlXCIsanA9XCLop4bpopHlpKflsI/otoXov4cxMDBN77yM5peg5rOV5Y+R6YCBXCIsJHA9XCLlj6rlhYHorrjkuIrkvKAgbXA0IOagvOW8j+eahOinhumikVwiLFlwPVwi5paH5Lu25LiK5Lyg5aSx6LSlXCIsenA9XCLor7flhYjpgInmi6nkuIDkuKrmlofku7ZcIixXcD1cIuaWh+S7tuWkp+Wwj+i2hei/hzEwME3vvIzml6Dms5Xlj5HpgIEgXCIsSnA9XCLnvLrlsJHlv4XopoHnmoTlj4LmlbDmlofku7YgVVJMXCIsWHA9XCLpnZ7lkIjlubbmtojmga9cIixRcD1cIuWQiOW5tua2iOaBr+eahCBtZXNzYWdlS2V5IOaXoOaViFwiLFpwPVwi5LiL6L295ZCI5bm25raI5oGv5aSx6LSlXCIsZWQ9XCLpgInmi6nnmoTmtojmga/nsbvlnovvvIjlpoLnvqTmj5DnpLrmtojmga/vvInkuI3lj6/ku6Xovazlj5FcIix0ZD1cIuayoeacieaJvuWIsOebuOW6lOeahOS8muivne+8jOivt+ajgOafpeS8oOWFpeWPguaVsFwiLG5kPVwi5rKh5pyJ5om+5Yiw55u45bqU55qE55So5oi35oiW576k57uE77yM6K+35qOA5p+l5Lyg5YWl5Y+C5pWwXCIsb2Q9XCLmnKrorrDlvZXnmoTkvJror53nsbvlnotcIixyZD1cIumdnuazleeahOe+pOexu+Wei++8jOivt+ajgOafpeS8oOWFpeWPguaVsFwiLGFkPVwi5LiN6IO95Yqg5YWlIFdvcmsg57G75Z6L55qE576k57uEXCIsc2Q9XCJBVkNoYXRSb29tIOexu+Wei+eahOe+pOe7hOS4jeiDvei9rOiuqee+pOS4u1wiLGlkPVwi5LiN6IO95oqK576k5Li76L2s6K6p57uZ6Ieq5bexXCIsdWQ9XCLkuI3og73op6PmlaMgV29yayDnsbvlnovnmoTnvqTnu4RcIixjZD1cIueUqOaIt+S4jeWcqOivpee+pOe7hOWGhVwiLGxkPVwi5Yqg576k5aSx6LSl77yM6K+35qOA5p+l5Lyg5YWl5Y+C5pWw5oiW6YeN6K+VXCIscGQ9XCJBVkNoYXRSb29tIOexu+Wei+eahOe+pOS4jeaUr+aMgemCgOivt+e+pOaIkOWRmFwiLGRkPVwi6Z2eIEFWQ2hhdFJvb20g57G75Z6L55qE576k57uE5LiN5YWB6K645Yy/5ZCN5Yqg576k77yM6K+35YWI55m75b2V5ZCO5YaN5Yqg576kXCIsZ2Q9XCLkuI3og73lnKggQVZDaGF0Um9vbSDnsbvlnovnmoTnvqTnu4TouKLkurpcIixoZD1cIuS9oOS4jeaYr+e+pOS4u++8jOWPquaciee+pOS4u+aJjeacieadg+mZkOaTjeS9nFwiLGZkPVwi5LiN6IO95ZyoIFdvcmsgLyBBVkNoYXRSb29tIOexu+Wei+eahOe+pOS4reiuvue9rue+pOaIkOWRmOi6q+S7vVwiLF9kPVwi5LiN5ZCI5rOV55qE576k5oiQ5ZGY6Lqr5Lu977yM6K+35qOA5p+l5Lyg5YWl5Y+C5pWwXCIsbWQ9XCLkuI3og73orr7nva7oh6rlt7HnmoTnvqTmiJDlkZjouqvku73vvIzor7fmo4Dmn6XkvKDlhaXlj4LmlbBcIix2ZD1cIuS4jeiDveWwhuiHquW3seemgeiogO+8jOivt+ajgOafpeS8oOWFpeWPguaVsFwiLE1kPVwi5Lyg5YWlIHVwZGF0ZU15UHJvZmlsZSDmjqXlj6PnmoTlj4LmlbDml6DmlYhcIix5ZD1cInVwZGF0ZU15UHJvZmlsZSDml6DmoIfphY3otYTmlpnlrZfmrrXmiJboh6rlrprkuYnotYTmlpnlrZfmrrVcIixJZD1cIuS8oOWFpSBhZGRUb0JsYWNrbGlzdCDmjqXlj6PnmoTlj4LmlbDml6DmlYhcIixUZD1cIuS8oOWFpSByZW1vdmVGcm9tQmxhY2tsaXN0IOaOpeWPo+eahOWPguaVsOaXoOaViFwiLFNkPVwi5LiN6IO95ouJ6buR6Ieq5bexXCIsRGQ9XCLnvZHnu5zplJnor69cIixFZD1cIuivt+axgui2heaXtlwiLENkPVwi5pyq6L+e5o6l5Yiw572R57ucXCIsQWQ9XCLml6DmlYjmk43kvZzvvIzlpoLosIPnlKjkuobmnKrlrprkuYnmiJbogIXmnKrlrp7njrDnmoTmlrnms5XnrYlcIixrZD1cIuaXoOazleaJvuWIsOWNj+iurlwiLE5kPVwi5peg5rOV5om+5Yiw5qih5Z2XXCIsT2Q9XCLmjqXlj6PpnIDopoEgU0RLIOWkhOS6jiByZWFkeSDnirbmgIHlkI7miY3og73osIPnlKhcIixMZD1cInVwbG9hZFwiLFJkPVwibmV0d29ya1JUVFwiLGJkPVwibWVzc2FnZUUyRURlbGF5XCIsd2Q9XCJzZW5kTWVzc2FnZUMyQ1wiLFBkPVwic2VuZE1lc3NhZ2VHcm91cFwiLEdkPVwic2VuZE1lc3NhZ2VHcm91cEFWXCIsVWQ9XCJzZW5kTWVzc2FnZVJpY2hNZWRpYVwiLEZkPVwiY29zVXBsb2FkXCIscWQ9XCJtZXNzYWdlUmVjZWl2ZWRHcm91cFwiLHhkPVwibWVzc2FnZVJlY2VpdmVkR3JvdXBBVlB1c2hcIixWZD1cIm1lc3NhZ2VSZWNlaXZlZEdyb3VwQVZQdWxsXCIsS2Q9KHMoS2M9e30sUmQsMikscyhLYyxiZCwzKSxzKEtjLHdkLDQpLHMoS2MsUGQsNSkscyhLYyxHZCw2KSxzKEtjLFVkLDcpLHMoS2MscWQsOCkscyhLYyx4ZCw5KSxzKEtjLFZkLDEwKSxzKEtjLEZkLDExKSxLYyksQmQ9e2luZm86NCx3YXJuaW5nOjUsZXJyb3I6Nn0sSGQ9e3dpZmk6MSxcIjJnXCI6MixcIjNnXCI6MyxcIjRnXCI6NCxcIjVnXCI6NSx1bmtub3duOjYsbm9uZTo3LG9ubGluZTo4fSxqZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuZXZlbnRUeXBlPTAsdGhpcy50aW1lc3RhbXA9MCx0aGlzLm5ldHdvcmtUeXBlPTgsdGhpcy5jb2RlPTAsdGhpcy5tZXNzYWdlPVwiXCIsdGhpcy5tb3JlTWVzc2FnZT1cIlwiLHRoaXMuZXh0ZW5zaW9uPXQsdGhpcy5jb3N0VGltZT0wLHRoaXMuZHVwbGljYXRlPSExLHRoaXMubGV2ZWw9NCx0aGlzLl9zZW50RmxhZz0hMSx0aGlzLl9zdGFydHRzPVVpKCl9cmV0dXJuIGEoZSxbe2tleTpcInVwZGF0ZVRpbWVTdGFtcFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy50aW1lc3RhbXA9VWkoKX19LHtrZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zdGFydHRzPWUsdGhpc319LHtrZXk6XCJlbmRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdO2lmKCF0aGlzLl9zZW50RmxhZyl7dmFyIG49VWkoKTt0aGlzLmNvc3RUaW1lPW4tdGhpcy5fc3RhcnR0cyx0aGlzLnNldE1vcmVNZXNzYWdlKFwiaG9zdDpcIi5jb25jYXQoU3UoKSxcIiBzdGFydHRzOlwiKS5jb25jYXQodGhpcy5fc3RhcnR0cyxcIiBlbmR0czpcIikuY29uY2F0KG4pKSx0Pyh0aGlzLl9zZW50RmxhZz0hMCx0aGlzLl9ldmVudFN0YXRNb2R1bGUmJnRoaXMuX2V2ZW50U3RhdE1vZHVsZS5wdXNoSW4odGhpcykpOnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZS5fc2VudEZsYWc9ITAsZS5fZXZlbnRTdGF0TW9kdWxlJiZlLl9ldmVudFN0YXRNb2R1bGUucHVzaEluKGUpfSksMCl9fX0se2tleTpcInNldEVycm9yXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlIGluc3RhbmNlb2YgRXJyb3I/KHRoaXMuX3NlbnRGbGFnfHwodGhpcy5zZXROZXR3b3JrVHlwZShuKSx0PyhlLmNvZGUmJnRoaXMuc2V0Q29kZShlLmNvZGUpLGUubWVzc2FnZSYmdGhpcy5zZXRNb3JlTWVzc2FnZShlLm1lc3NhZ2UpKToodGhpcy5zZXRDb2RlKFRwLk5PX05FVFdPUkspLHRoaXMuc2V0TW9yZU1lc3NhZ2UoQ2QpKSx0aGlzLnNldExldmVsKFwiZXJyb3JcIikpLHRoaXMpOihLaS53YXJuKFwiU1NPTG9nRGF0YS5zZXRFcnJvciB2YWx1ZSBub3QgaW5zdGFuY2VvZiBFcnJvciwgcGxlYXNlIGNoZWNrIVwiKSx0aGlzKX19LHtrZXk6XCJzZXRDb2RlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpfHx0aGlzLl9zZW50RmxhZ3x8KFwiRUNPTk5BQk9SVEVEXCI9PT1lJiYodGhpcy5jb2RlPTEwMyksamkoZSk/dGhpcy5jb2RlPWU6S2kud2FybihcIlNTT0xvZ0RhdGEuc2V0Q29kZSB2YWx1ZSBub3QgYSBudW1iZXIsIHBsZWFzZSBjaGVjayFcIixlLG4oZSkpKSx0aGlzfX0se2tleTpcInNldE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gSmkoZSl8fHRoaXMuX3NlbnRGbGFnfHwoamkoZSkmJih0aGlzLm1lc3NhZ2U9ZS50b1N0cmluZygpKSwkaShlKSYmKHRoaXMubWVzc2FnZT1lKSksdGhpc319LHtrZXk6XCJzZXRMZXZlbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBKaShlKXx8dGhpcy5fc2VudEZsYWd8fCh0aGlzLmxldmVsPUJkW2VdKSx0aGlzfX0se2tleTpcInNldE1vcmVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEx1KHRoaXMubW9yZU1lc3NhZ2UpP3RoaXMubW9yZU1lc3NhZ2U9XCJcIi5jb25jYXQoZSk6dGhpcy5tb3JlTWVzc2FnZSs9XCIgXCIuY29uY2F0KGUpLHRoaXN9fSx7a2V5Olwic2V0TmV0d29ya1R5cGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gSmkoZSl8fEppKEhkW2VdKT9LaS53YXJuKFwiU1NPTG9nRGF0YS5zZXROZXR3b3JrVHlwZSB2YWx1ZSBpcyB1bmRlZmluZWQsIHBsZWFzZSBjaGVjayFcIik6dGhpcy5uZXR3b3JrVHlwZT1IZFtlXSx0aGlzfX0se2tleTpcImdldFN0YXJ0VHNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFydHRzfX1dLFt7a2V5OlwiYmluZEV2ZW50U3RhdE1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLl9ldmVudFN0YXRNb2R1bGU9dH19XSksZX0oKSwkZD1cInNka0NvbnN0cnVjdFwiLFlkPVwic2RrUmVhZHlcIix6ZD1cImxvZ2luXCIsV2Q9XCJsb2dvdXRcIixKZD1cImtpY2tlZE91dFwiLFhkPVwicmVnaXN0ZXJQbHVnaW5cIixRZD1cIndzQ29ubmVjdFwiLFpkPVwid3NPbk9wZW5cIixlZz1cIndzT25DbG9zZVwiLHRnPVwid3NPbkVycm9yXCIsbmc9XCJnZXRDb3NBdXRoS2V5XCIsb2c9XCJnZXRDb3NQcmVTaWdVcmxcIixyZz1cInVwbG9hZFwiLGFnPVwic2VuZE1lc3NhZ2VcIixzZz1cImdldEMyQ1JvYW1pbmdNZXNzYWdlc1wiLGlnPVwiZ2V0R3JvdXBSb2FtaW5nTWVzc2FnZXNcIix1Zz1cInJldm9rZU1lc3NhZ2VcIixjZz1cImRlbGV0ZU1lc3NhZ2VcIixsZz1cInNldEMyQ01lc3NhZ2VSZWFkXCIscGc9XCJzZXRHcm91cE1lc3NhZ2VSZWFkXCIsZGc9XCJlbXB0eU1lc3NhZ2VCb2R5XCIsZ2c9XCJnZXRQZWVyUmVhZFRpbWVcIixoZz1cInVwbG9hZE1lcmdlck1lc3NhZ2VcIixmZz1cImRvd25sb2FkTWVyZ2VyTWVzc2FnZVwiLF9nPVwianNvblBhcnNlRXJyb3JcIixtZz1cIm1lc3NhZ2VFMkVEZWxheUV4Y2VwdGlvblwiLHZnPVwiZ2V0Q29udmVyc2F0aW9uTGlzdFwiLE1nPVwiZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiLHlnPVwiZGVsZXRlQ29udmVyc2F0aW9uXCIsSWc9XCJwaW5Db252ZXJzYXRpb25cIixUZz1cImdldENvbnZlcnNhdGlvbkxpc3RJblN0b3JhZ2VcIixTZz1cInN5bmNDb252ZXJzYXRpb25MaXN0XCIsRGc9XCJjcmVhdGVHcm91cFwiLEVnPVwiYXBwbHlKb2luR3JvdXBcIixDZz1cInF1aXRHcm91cFwiLEFnPVwic2VhcmNoR3JvdXBCeUlEXCIsa2c9XCJjaGFuZ2VHcm91cE93bmVyXCIsTmc9XCJoYW5kbGVHcm91cEFwcGxpY2F0aW9uXCIsT2c9XCJoYW5kbGVHcm91cEludml0YXRpb25cIixMZz1cInNldE1lc3NhZ2VSZW1pbmRUeXBlXCIsUmc9XCJkaXNtaXNzR3JvdXBcIixiZz1cInVwZGF0ZUdyb3VwUHJvZmlsZVwiLHdnPVwiZ2V0R3JvdXBMaXN0XCIsUGc9XCJnZXRHcm91cFByb2ZpbGVcIixHZz1cImdldEdyb3VwTGlzdEluU3RvcmFnZVwiLFVnPVwiZ2V0R3JvdXBMYXN0U2VxdWVuY2VcIixGZz1cImdldEdyb3VwTWlzc2luZ01lc3NhZ2VcIixxZz1cInBhZ2luZ0dldEdyb3VwTGlzdFwiLHhnPVwiZ2V0R3JvdXBTaW1wbGlmaWVkSW5mb1wiLFZnPVwiam9pbldpdGhvdXRBdXRoXCIsS2c9XCJpbml0R3JvdXBBdHRyaWJ1dGVzXCIsQmc9XCJzZXRHcm91cEF0dHJpYnV0ZXNcIixIZz1cImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wiLGpnPVwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsJGc9XCJnZXRHcm91cE1lbWJlckxpc3RcIixZZz1cImdldEdyb3VwTWVtYmVyUHJvZmlsZVwiLHpnPVwiYWRkR3JvdXBNZW1iZXJcIixXZz1cImRlbGV0ZUdyb3VwTWVtYmVyXCIsSmc9XCJzZXRHcm91cE1lbWJlck11dGVUaW1lXCIsWGc9XCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIsUWc9XCJzZXRHcm91cE1lbWJlclJvbGVcIixaZz1cInNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGRcIixlaD1cImdldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIix0aD1cImxvbmdQb2xsaW5nQVZFcnJvclwiLG5oPVwibWVzc2FnZUxvc3NcIixvaD1cIm1lc3NhZ2VTdGFja2VkXCIscmg9XCJnZXRVc2VyUHJvZmlsZVwiLGFoPVwidXBkYXRlTXlQcm9maWxlXCIsc2g9XCJnZXRCbGFja2xpc3RcIixpaD1cImFkZFRvQmxhY2tsaXN0XCIsdWg9XCJyZW1vdmVGcm9tQmxhY2tsaXN0XCIsY2g9XCJjYWxsYmFja0Z1bmN0aW9uRXJyb3JcIixsaD1cImZldGNoQ2xvdWRDb250cm9sQ29uZmlnXCIscGg9XCJwdXNoZWRDbG91ZENvbnRyb2xDb25maWdcIixkaD1cImVycm9yXCIsZ2g9UC5mLGhoPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtmb3IodmFyIG4sbz1LKHQpLHI9THQobyksYT1yLmxlbmd0aCxzPTAsaT1bXTthPnM7KW49cltzKytdLFImJiFnaC5jYWxsKG8sbil8fGkucHVzaChlP1tuLG9bbl1dOm9bbl0pO3JldHVybiBpfX0sZmg9e2VudHJpZXM6aGgoITApLHZhbHVlczpoaCghMSl9LnZhbHVlczt2dCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMH0se3ZhbHVlczpmdW5jdGlvbihlKXtyZXR1cm4gZmgoZSl9fSk7dmFyIF9oPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy50eXBlPXJvLk1TR19URVhULHRoaXMuY29udGVudD17dGV4dDp0LnRleHR8fFwiXCJ9fXJldHVybiBhKGUsW3trZXk6XCJzZXRUZXh0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jb250ZW50LnRleHQ9ZX19LHtrZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLmNvbnRlbnQudGV4dC5sZW5ndGh9fV0pLGV9KCksbWg9Z2UoXCJpdGVyYXRvclwiKSx2aD0hTCgoZnVuY3Rpb24oKXt2YXIgZT1uZXcgVVJMKFwiYj9hPTEmYj0yJmM9M1wiLFwiaHR0cDovL2FcIiksdD1lLnNlYXJjaFBhcmFtcyxuPVwiXCI7cmV0dXJuIGUucGF0aG5hbWU9XCJjJTIwZFwiLHQuZm9yRWFjaCgoZnVuY3Rpb24oZSxvKXt0LmRlbGV0ZShcImJcIiksbis9bytlfSkpLCF0LnNvcnR8fFwiaHR0cDovL2EvYyUyMGQ/YT0xJmM9M1wiIT09ZS5ocmVmfHxcIjNcIiE9PXQuZ2V0KFwiY1wiKXx8XCJhPTFcIiE9PVN0cmluZyhuZXcgVVJMU2VhcmNoUGFyYW1zKFwiP2E9MVwiKSl8fCF0W21oXXx8XCJhXCIhPT1uZXcgVVJMKFwiaHR0cHM6Ly9hQGJcIikudXNlcm5hbWV8fFwiYlwiIT09bmV3IFVSTFNlYXJjaFBhcmFtcyhuZXcgVVJMU2VhcmNoUGFyYW1zKFwiYT1iXCIpKS5nZXQoXCJhXCIpfHxcInhuLS1lMWF5YmNcIiE9PW5ldyBVUkwoXCJodHRwOi8v0YLQtdGB0YJcIikuaG9zdHx8XCIjJUQwJUIxXCIhPT1uZXcgVVJMKFwiaHR0cDovL2Ej0LFcIikuaGFzaHx8XCJhMWMzXCIhPT1ufHxcInhcIiE9PW5ldyBVUkwoXCJodHRwOi8veFwiLHZvaWQgMCkuaG9zdH0pKSxNaD1PYmplY3QuYXNzaWduLHloPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxJaD0hTWh8fEwoKGZ1bmN0aW9uKCl7aWYoUiYmMSE9PU1oKHtiOjF9LE1oKHloKHt9LFwiYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3loKHRoaXMsXCJiXCIse3ZhbHVlOjMsZW51bWVyYWJsZTohMX0pfX0pLHtiOjJ9KSkuYilyZXR1cm4hMDt2YXIgZT17fSx0PXt9LG49U3ltYm9sKCk7cmV0dXJuIGVbbl09NyxcImFiY2RlZmdoaWprbG1ub3BxcnN0XCIuc3BsaXQoXCJcIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXT1lfSkpLDchPU1oKHt9LGUpW25dfHxcImFiY2RlZmdoaWprbG1ub3BxcnN0XCIhPUx0KE1oKHt9LHQpKS5qb2luKFwiXCIpfSkpP2Z1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXJlKGUpLG89YXJndW1lbnRzLmxlbmd0aCxyPTEsYT1pdC5mLHM9UC5mO28+cjspZm9yKHZhciBpLHU9eChhcmd1bWVudHNbcisrXSksYz1hP0x0KHUpLmNvbmNhdChhKHUpKTpMdCh1KSxsPWMubGVuZ3RoLHA9MDtsPnA7KWk9Y1twKytdLFImJiFzLmNhbGwodSxpKXx8KG5baV09dVtpXSk7cmV0dXJuIG59Ok1oLFRoPS9bXlxcMC1cXHUwMDdFXS8sU2g9L1suXFx1MzAwMlxcdUZGMEVcXHVGRjYxXS9nLERoPVwiT3ZlcmZsb3c6IGlucHV0IG5lZWRzIHdpZGVyIGludGVnZXJzIHRvIHByb2Nlc3NcIixFaD1NYXRoLmZsb29yLENoPVN0cmluZy5mcm9tQ2hhckNvZGUsQWg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUrMjIrNzUqKGU8MjYpfSxraD1mdW5jdGlvbihlLHQsbil7dmFyIG89MDtmb3IoZT1uP0VoKGUvNzAwKTplPj4xLGUrPUVoKGUvdCk7ZT40NTU7bys9MzYpZT1FaChlLzM1KTtyZXR1cm4gRWgobyszNiplLyhlKzM4KSl9LE5oPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbz1bXSxyPShlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTAsbz1lLmxlbmd0aDtuPG87KXt2YXIgcj1lLmNoYXJDb2RlQXQobisrKTtpZihyPj01NTI5NiYmcjw9NTYzMTkmJm48byl7dmFyIGE9ZS5jaGFyQ29kZUF0KG4rKyk7NTYzMjA9PSg2NDUxMiZhKT90LnB1c2goKCgxMDIzJnIpPDwxMCkrKDEwMjMmYSkrNjU1MzYpOih0LnB1c2gociksbi0tKX1lbHNlIHQucHVzaChyKX1yZXR1cm4gdH0oZSkpLmxlbmd0aCxhPTEyOCxzPTAsaT03Mjtmb3IodD0wO3Q8ZS5sZW5ndGg7dCsrKShuPWVbdF0pPDEyOCYmby5wdXNoKENoKG4pKTt2YXIgdT1vLmxlbmd0aCxjPXU7Zm9yKHUmJm8ucHVzaChcIi1cIik7YzxyOyl7dmFyIGw9MjE0NzQ4MzY0Nztmb3IodD0wO3Q8ZS5sZW5ndGg7dCsrKShuPWVbdF0pPj1hJiZuPGwmJihsPW4pO3ZhciBwPWMrMTtpZihsLWE+RWgoKDIxNDc0ODM2NDctcykvcCkpdGhyb3cgUmFuZ2VFcnJvcihEaCk7Zm9yKHMrPShsLWEpKnAsYT1sLHQ9MDt0PGUubGVuZ3RoO3QrKyl7aWYoKG49ZVt0XSk8YSYmKytzPjIxNDc0ODM2NDcpdGhyb3cgUmFuZ2VFcnJvcihEaCk7aWYobj09YSl7Zm9yKHZhciBkPXMsZz0zNjs7Zys9MzYpe3ZhciBoPWc8PWk/MTpnPj1pKzI2PzI2OmctaTtpZihkPGgpYnJlYWs7dmFyIGY9ZC1oLF89MzYtaDtvLnB1c2goQ2goQWgoaCtmJV8pKSksZD1FaChmL18pfW8ucHVzaChDaChBaChkKSkpLGk9a2gocyxwLGM9PXUpLHM9MCwrK2N9fSsrcywrK2F9cmV0dXJuIG8uam9pbihcIlwiKX0sT2g9ZnVuY3Rpb24oZSl7dmFyIHQ9X24oZSk7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGUpK1wiIGlzIG5vdCBpdGVyYWJsZVwiKTtyZXR1cm4gU2UodC5jYWxsKGUpKX0sTGg9aihcImZldGNoXCIpLFJoPWooXCJSZXF1ZXN0XCIpLGJoPVJoJiZSaC5wcm90b3R5cGUsd2g9aihcIkhlYWRlcnNcIiksUGg9Z2UoXCJpdGVyYXRvclwiKSxHaD1CZS5zZXQsVWg9QmUuZ2V0dGVyRm9yKFwiVVJMU2VhcmNoUGFyYW1zXCIpLEZoPUJlLmdldHRlckZvcihcIlVSTFNlYXJjaFBhcmFtc0l0ZXJhdG9yXCIpLHFoPS9cXCsvZyx4aD1BcnJheSg0KSxWaD1mdW5jdGlvbihlKXtyZXR1cm4geGhbZS0xXXx8KHhoW2UtMV09UmVnRXhwKFwiKCg/OiVbXFxcXGRhLWZdezJ9KXtcIitlK1wifSlcIixcImdpXCIpKX0sS2g9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZSl9Y2F0Y2goX00pe3JldHVybiBlfX0sQmg9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKHFoLFwiIFwiKSxuPTQ7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQodCl9Y2F0Y2goX00pe2Zvcig7bjspdD10LnJlcGxhY2UoVmgobi0tKSxLaCk7cmV0dXJuIHR9fSxIaD0vWyEnKCl+XXwlMjAvZyxqaD17XCIhXCI6XCIlMjFcIixcIidcIjpcIiUyN1wiLFwiKFwiOlwiJTI4XCIsXCIpXCI6XCIlMjlcIixcIn5cIjpcIiU3RVwiLFwiJTIwXCI6XCIrXCJ9LCRoPWZ1bmN0aW9uKGUpe3JldHVybiBqaFtlXX0sWWg9ZnVuY3Rpb24oZSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKS5yZXBsYWNlKEhoLCRoKX0semg9ZnVuY3Rpb24oZSx0KXtpZih0KWZvcih2YXIgbixvLHI9dC5zcGxpdChcIiZcIiksYT0wO2E8ci5sZW5ndGg7KShuPXJbYSsrXSkubGVuZ3RoJiYobz1uLnNwbGl0KFwiPVwiKSxlLnB1c2goe2tleTpCaChvLnNoaWZ0KCkpLHZhbHVlOkJoKG8uam9pbihcIj1cIikpfSkpfSxXaD1mdW5jdGlvbihlKXt0aGlzLmVudHJpZXMubGVuZ3RoPTAsemgodGhpcy5lbnRyaWVzLGUpfSxKaD1mdW5jdGlvbihlLHQpe2lmKGU8dCl0aHJvdyBUeXBlRXJyb3IoXCJOb3QgZW5vdWdoIGFyZ3VtZW50c1wiKX0sWGg9Vm4oKGZ1bmN0aW9uKGUsdCl7R2godGhpcyx7dHlwZTpcIlVSTFNlYXJjaFBhcmFtc0l0ZXJhdG9yXCIsaXRlcmF0b3I6T2goVWgoZSkuZW50cmllcyksa2luZDp0fSl9KSxcIkl0ZXJhdG9yXCIsKGZ1bmN0aW9uKCl7dmFyIGU9RmgodGhpcyksdD1lLmtpbmQsbj1lLml0ZXJhdG9yLm5leHQoKSxvPW4udmFsdWU7cmV0dXJuIG4uZG9uZXx8KG4udmFsdWU9XCJrZXlzXCI9PT10P28ua2V5OlwidmFsdWVzXCI9PT10P28udmFsdWU6W28ua2V5LG8udmFsdWVdKSxufSkpLFFoPWZ1bmN0aW9uKCl7dmEodGhpcyxRaCxcIlVSTFNlYXJjaFBhcmFtc1wiKTt2YXIgZSx0LG4sbyxyLGEscyxpLHUsYz1hcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCxsPXRoaXMscD1bXTtpZihHaChsLHt0eXBlOlwiVVJMU2VhcmNoUGFyYW1zXCIsZW50cmllczpwLHVwZGF0ZVVSTDpmdW5jdGlvbigpe30sdXBkYXRlU2VhcmNoUGFyYW1zOldofSksdm9pZCAwIT09YylpZihCKGMpKWlmKFwiZnVuY3Rpb25cIj09dHlwZW9mKGU9X24oYykpKWZvcihuPSh0PWUuY2FsbChjKSkubmV4dDshKG89bi5jYWxsKHQpKS5kb25lOyl7aWYoKHM9KGE9KHI9T2goU2Uoby52YWx1ZSkpKS5uZXh0KS5jYWxsKHIpKS5kb25lfHwoaT1hLmNhbGwocikpLmRvbmV8fCFhLmNhbGwocikuZG9uZSl0aHJvdyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBzZXF1ZW5jZSB3aXRoIGxlbmd0aCAyXCIpO3AucHVzaCh7a2V5Ok10KHMudmFsdWUpLHZhbHVlOk10KGkudmFsdWUpfSl9ZWxzZSBmb3IodSBpbiBjKXNlKGMsdSkmJnAucHVzaCh7a2V5OnUsdmFsdWU6TXQoY1t1XSl9KTtlbHNlIHpoKHAsXCJzdHJpbmdcIj09dHlwZW9mIGM/XCI/XCI9PT1jLmNoYXJBdCgwKT9jLnNsaWNlKDEpOmM6TXQoYykpfSxaaD1RaC5wcm90b3R5cGU7aWYoZmEoWmgse2FwcGVuZDpmdW5jdGlvbihlLHQpe0poKGFyZ3VtZW50cy5sZW5ndGgsMik7dmFyIG49VWgodGhpcyk7bi5lbnRyaWVzLnB1c2goe2tleTpNdChlKSx2YWx1ZTpNdCh0KX0pLG4udXBkYXRlVVJMKCl9LGRlbGV0ZTpmdW5jdGlvbihlKXtKaChhcmd1bWVudHMubGVuZ3RoLDEpO2Zvcih2YXIgdD1VaCh0aGlzKSxuPXQuZW50cmllcyxvPU10KGUpLHI9MDtyPG4ubGVuZ3RoOyluW3JdLmtleT09PW8/bi5zcGxpY2UociwxKTpyKys7dC51cGRhdGVVUkwoKX0sZ2V0OmZ1bmN0aW9uKGUpe0poKGFyZ3VtZW50cy5sZW5ndGgsMSk7Zm9yKHZhciB0PVVoKHRoaXMpLmVudHJpZXMsbj1NdChlKSxvPTA7bzx0Lmxlbmd0aDtvKyspaWYodFtvXS5rZXk9PT1uKXJldHVybiB0W29dLnZhbHVlO3JldHVybiBudWxsfSxnZXRBbGw6ZnVuY3Rpb24oZSl7SmgoYXJndW1lbnRzLmxlbmd0aCwxKTtmb3IodmFyIHQ9VWgodGhpcykuZW50cmllcyxuPU10KGUpLG89W10scj0wO3I8dC5sZW5ndGg7cisrKXRbcl0ua2V5PT09biYmby5wdXNoKHRbcl0udmFsdWUpO3JldHVybiBvfSxoYXM6ZnVuY3Rpb24oZSl7SmgoYXJndW1lbnRzLmxlbmd0aCwxKTtmb3IodmFyIHQ9VWgodGhpcykuZW50cmllcyxuPU10KGUpLG89MDtvPHQubGVuZ3RoOylpZih0W28rK10ua2V5PT09bilyZXR1cm4hMDtyZXR1cm4hMX0sc2V0OmZ1bmN0aW9uKGUsdCl7SmgoYXJndW1lbnRzLmxlbmd0aCwxKTtmb3IodmFyIG4sbz1VaCh0aGlzKSxyPW8uZW50cmllcyxhPSExLHM9TXQoZSksaT1NdCh0KSx1PTA7dTxyLmxlbmd0aDt1KyspKG49clt1XSkua2V5PT09cyYmKGE/ci5zcGxpY2UodS0tLDEpOihhPSEwLG4udmFsdWU9aSkpO2F8fHIucHVzaCh7a2V5OnMsdmFsdWU6aX0pLG8udXBkYXRlVVJMKCl9LHNvcnQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG4sbz1VaCh0aGlzKSxyPW8uZW50cmllcyxhPXIuc2xpY2UoKTtmb3Ioci5sZW5ndGg9MCxuPTA7bjxhLmxlbmd0aDtuKyspe2ZvcihlPWFbbl0sdD0wO3Q8bjt0KyspaWYoclt0XS5rZXk+ZS5rZXkpe3Iuc3BsaWNlKHQsMCxlKTticmVha310PT09biYmci5wdXNoKGUpfW8udXBkYXRlVVJMKCl9LGZvckVhY2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49VWgodGhpcykuZW50cmllcyxvPVZ0KGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsMykscj0wO3I8bi5sZW5ndGg7KW8oKHQ9bltyKytdKS52YWx1ZSx0LmtleSx0aGlzKX0sa2V5czpmdW5jdGlvbigpe3JldHVybiBuZXcgWGgodGhpcyxcImtleXNcIil9LHZhbHVlczpmdW5jdGlvbigpe3JldHVybiBuZXcgWGgodGhpcyxcInZhbHVlc1wiKX0sZW50cmllczpmdW5jdGlvbigpe3JldHVybiBuZXcgWGgodGhpcyxcImVudHJpZXNcIil9fSx7ZW51bWVyYWJsZTohMH0pLEhlKFpoLFBoLFpoLmVudHJpZXMpLEhlKFpoLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXtmb3IodmFyIGUsdD1VaCh0aGlzKS5lbnRyaWVzLG49W10sbz0wO288dC5sZW5ndGg7KWU9dFtvKytdLG4ucHVzaChZaChlLmtleSkrXCI9XCIrWWgoZS52YWx1ZSkpO3JldHVybiBuLmpvaW4oXCImXCIpfSkse2VudW1lcmFibGU6ITB9KSxGbihRaCxcIlVSTFNlYXJjaFBhcmFtc1wiKSx2dCh7Z2xvYmFsOiEwLGZvcmNlZDohdmh9LHtVUkxTZWFyY2hQYXJhbXM6UWh9KSwhdmgmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHdoKXt2YXIgZWY9ZnVuY3Rpb24oZSl7aWYoQihlKSl7dmFyIHQsbj1lLmJvZHk7aWYoXCJVUkxTZWFyY2hQYXJhbXNcIj09PWhuKG4pKXJldHVybih0PWUuaGVhZGVycz9uZXcgd2goZS5oZWFkZXJzKTpuZXcgd2gpLmhhcyhcImNvbnRlbnQtdHlwZVwiKXx8dC5zZXQoXCJjb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04XCIpLHF0KGUse2JvZHk6RygwLFN0cmluZyhuKSksaGVhZGVyczpHKDAsdCl9KX1yZXR1cm4gZX07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgTGgmJnZ0KHtnbG9iYWw6ITAsZW51bWVyYWJsZTohMCxmb3JjZWQ6ITB9LHtmZXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gTGgoZSxhcmd1bWVudHMubGVuZ3RoPjE/ZWYoYXJndW1lbnRzWzFdKTp7fSl9fSksXCJmdW5jdGlvblwiPT10eXBlb2YgUmgpe3ZhciB0Zj1mdW5jdGlvbihlKXtyZXR1cm4gdmEodGhpcyx0ZixcIlJlcXVlc3RcIiksbmV3IFJoKGUsYXJndW1lbnRzLmxlbmd0aD4xP2VmKGFyZ3VtZW50c1sxXSk6e30pfTtiaC5jb25zdHJ1Y3Rvcj10Zix0Zi5wcm90b3R5cGU9YmgsdnQoe2dsb2JhbDohMCxmb3JjZWQ6ITB9LHtSZXF1ZXN0OnRmfSl9fXZhciBuZixvZj17VVJMU2VhcmNoUGFyYW1zOlFoLGdldFN0YXRlOlVofSxyZj1rbi5jb2RlQXQsYWY9Ty5VUkwsc2Y9b2YuVVJMU2VhcmNoUGFyYW1zLHVmPW9mLmdldFN0YXRlLGNmPUJlLnNldCxsZj1CZS5nZXR0ZXJGb3IoXCJVUkxcIikscGY9TWF0aC5mbG9vcixkZj1NYXRoLnBvdyxnZj0vW0EtWmEtel0vLGhmPS9bXFxkKy0uQS1aYS16XS8sZmY9L1xcZC8sX2Y9L14weC9pLG1mPS9eWzAtN10rJC8sdmY9L15cXGQrJC8sTWY9L15bXFxkQS1GYS1mXSskLyx5Zj0vW1xcMFxcdFxcblxcciAjJS86PD4/QFtcXFxcXFxdXnxdLyxJZj0vW1xcMFxcdFxcblxcciAjLzo8Pj9AW1xcXFxcXF1efF0vLFRmPS9eW1xcdTAwMDAtXFx1MDAyMF0rfFtcXHUwMDAwLVxcdTAwMjBdKyQvZyxTZj0vW1xcdFxcblxccl0vZyxEZj1mdW5jdGlvbihlLHQpe3ZhciBuLG8scjtpZihcIltcIj09dC5jaGFyQXQoMCkpe2lmKFwiXVwiIT10LmNoYXJBdCh0Lmxlbmd0aC0xKSlyZXR1cm5cIkludmFsaWQgaG9zdFwiO2lmKCEobj1DZih0LnNsaWNlKDEsLTEpKSkpcmV0dXJuXCJJbnZhbGlkIGhvc3RcIjtlLmhvc3Q9bn1lbHNlIGlmKHdmKGUpKXtpZih0PWZ1bmN0aW9uKGUpe3ZhciB0LG4sbz1bXSxyPWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFNoLFwiLlwiKS5zcGxpdChcIi5cIik7Zm9yKHQ9MDt0PHIubGVuZ3RoO3QrKyluPXJbdF0sby5wdXNoKFRoLnRlc3Qobik/XCJ4bi0tXCIrTmgobik6bik7cmV0dXJuIG8uam9pbihcIi5cIil9KHQpLHlmLnRlc3QodCkpcmV0dXJuXCJJbnZhbGlkIGhvc3RcIjtpZihudWxsPT09KG49RWYodCkpKXJldHVyblwiSW52YWxpZCBob3N0XCI7ZS5ob3N0PW59ZWxzZXtpZihJZi50ZXN0KHQpKXJldHVyblwiSW52YWxpZCBob3N0XCI7Zm9yKG49XCJcIixvPW1uKHQpLHI9MDtyPG8ubGVuZ3RoO3IrKyluKz1SZihvW3JdLGtmKTtlLmhvc3Q9bn19LEVmPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbyxyLGEscyxpLHU9ZS5zcGxpdChcIi5cIik7aWYodS5sZW5ndGgmJlwiXCI9PXVbdS5sZW5ndGgtMV0mJnUucG9wKCksKHQ9dS5sZW5ndGgpPjQpcmV0dXJuIGU7Zm9yKG49W10sbz0wO288dDtvKyspe2lmKFwiXCI9PShyPXVbb10pKXJldHVybiBlO2lmKGE9MTAsci5sZW5ndGg+MSYmXCIwXCI9PXIuY2hhckF0KDApJiYoYT1fZi50ZXN0KHIpPzE2Ojgscj1yLnNsaWNlKDg9PWE/MToyKSksXCJcIj09PXIpcz0wO2Vsc2V7aWYoISgxMD09YT92Zjo4PT1hP21mOk1mKS50ZXN0KHIpKXJldHVybiBlO3M9cGFyc2VJbnQocixhKX1uLnB1c2gocyl9Zm9yKG89MDtvPHQ7bysrKWlmKHM9bltvXSxvPT10LTEpe2lmKHM+PWRmKDI1Niw1LXQpKXJldHVybiBudWxsfWVsc2UgaWYocz4yNTUpcmV0dXJuIG51bGw7Zm9yKGk9bi5wb3AoKSxvPTA7bzxuLmxlbmd0aDtvKyspaSs9bltvXSpkZigyNTYsMy1vKTtyZXR1cm4gaX0sQ2Y9ZnVuY3Rpb24oZSl7dmFyIHQsbixvLHIsYSxzLGksdT1bMCwwLDAsMCwwLDAsMCwwXSxjPTAsbD1udWxsLHA9MCxkPWZ1bmN0aW9uKCl7cmV0dXJuIGUuY2hhckF0KHApfTtpZihcIjpcIj09ZCgpKXtpZihcIjpcIiE9ZS5jaGFyQXQoMSkpcmV0dXJuO3ArPTIsbD0rK2N9Zm9yKDtkKCk7KXtpZig4PT1jKXJldHVybjtpZihcIjpcIiE9ZCgpKXtmb3IodD1uPTA7bjw0JiZNZi50ZXN0KGQoKSk7KXQ9MTYqdCtwYXJzZUludChkKCksMTYpLHArKyxuKys7aWYoXCIuXCI9PWQoKSl7aWYoMD09bilyZXR1cm47aWYocC09bixjPjYpcmV0dXJuO2ZvcihvPTA7ZCgpOyl7aWYocj1udWxsLG8+MCl7aWYoIShcIi5cIj09ZCgpJiZvPDQpKXJldHVybjtwKyt9aWYoIWZmLnRlc3QoZCgpKSlyZXR1cm47Zm9yKDtmZi50ZXN0KGQoKSk7KXtpZihhPXBhcnNlSW50KGQoKSwxMCksbnVsbD09PXIpcj1hO2Vsc2V7aWYoMD09cilyZXR1cm47cj0xMCpyK2F9aWYocj4yNTUpcmV0dXJuO3ArK311W2NdPTI1Nip1W2NdK3IsMiE9KytvJiY0IT1vfHxjKyt9aWYoNCE9bylyZXR1cm47YnJlYWt9aWYoXCI6XCI9PWQoKSl7aWYocCsrLCFkKCkpcmV0dXJufWVsc2UgaWYoZCgpKXJldHVybjt1W2MrK109dH1lbHNle2lmKG51bGwhPT1sKXJldHVybjtwKyssbD0rK2N9fWlmKG51bGwhPT1sKWZvcihzPWMtbCxjPTc7MCE9YyYmcz4wOylpPXVbY10sdVtjLS1dPXVbbCtzLTFdLHVbbCstLXNdPWk7ZWxzZSBpZig4IT1jKXJldHVybjtyZXR1cm4gdX0sQWY9ZnVuY3Rpb24oZSl7dmFyIHQsbixvLHI7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUpe2Zvcih0PVtdLG49MDtuPDQ7bisrKXQudW5zaGlmdChlJTI1NiksZT1wZihlLzI1Nik7cmV0dXJuIHQuam9pbihcIi5cIil9aWYoXCJvYmplY3RcIj09dHlwZW9mIGUpe2Zvcih0PVwiXCIsbz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bnVsbCxuPTEsbz1udWxsLHI9MCxhPTA7YTw4O2ErKykwIT09ZVthXT8ocj5uJiYodD1vLG49ciksbz1udWxsLHI9MCk6KG51bGw9PT1vJiYobz1hKSwrK3IpO3JldHVybiByPm4mJih0PW8sbj1yKSx0fShlKSxuPTA7bjw4O24rKylyJiYwPT09ZVtuXXx8KHImJihyPSExKSxvPT09bj8odCs9bj9cIjpcIjpcIjo6XCIscj0hMCk6KHQrPWVbbl0udG9TdHJpbmcoMTYpLG48NyYmKHQrPVwiOlwiKSkpO3JldHVyblwiW1wiK3QrXCJdXCJ9cmV0dXJuIGV9LGtmPXt9LE5mPUloKHt9LGtmLHtcIiBcIjoxLCdcIic6MSxcIjxcIjoxLFwiPlwiOjEsXCJgXCI6MX0pLE9mPUloKHt9LE5mLHtcIiNcIjoxLFwiP1wiOjEsXCJ7XCI6MSxcIn1cIjoxfSksTGY9SWgoe30sT2Yse1wiL1wiOjEsXCI6XCI6MSxcIjtcIjoxLFwiPVwiOjEsXCJAXCI6MSxcIltcIjoxLFwiXFxcXFwiOjEsXCJdXCI6MSxcIl5cIjoxLFwifFwiOjF9KSxSZj1mdW5jdGlvbihlLHQpe3ZhciBuPXJmKGUsMCk7cmV0dXJuIG4+MzImJm48MTI3JiYhc2UodCxlKT9lOmVuY29kZVVSSUNvbXBvbmVudChlKX0sYmY9e2Z0cDoyMSxmaWxlOm51bGwsaHR0cDo4MCxodHRwczo0NDMsd3M6ODAsd3NzOjQ0M30sd2Y9ZnVuY3Rpb24oZSl7cmV0dXJuIHNlKGJmLGUuc2NoZW1lKX0sUGY9ZnVuY3Rpb24oZSl7cmV0dXJuXCJcIiE9ZS51c2VybmFtZXx8XCJcIiE9ZS5wYXNzd29yZH0sR2Y9ZnVuY3Rpb24oZSl7cmV0dXJuIWUuaG9zdHx8ZS5jYW5ub3RCZUFCYXNlVVJMfHxcImZpbGVcIj09ZS5zY2hlbWV9LFVmPWZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuIDI9PWUubGVuZ3RoJiZnZi50ZXN0KGUuY2hhckF0KDApKSYmKFwiOlwiPT0obj1lLmNoYXJBdCgxKSl8fCF0JiZcInxcIj09bil9LEZmPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlLmxlbmd0aD4xJiZVZihlLnNsaWNlKDAsMikpJiYoMj09ZS5sZW5ndGh8fFwiL1wiPT09KHQ9ZS5jaGFyQXQoMikpfHxcIlxcXFxcIj09PXR8fFwiP1wiPT09dHx8XCIjXCI9PT10KX0scWY9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXRoLG49dC5sZW5ndGg7IW58fFwiZmlsZVwiPT1lLnNjaGVtZSYmMT09biYmVWYodFswXSwhMCl8fHQucG9wKCl9LHhmPWZ1bmN0aW9uKGUpe3JldHVyblwiLlwiPT09ZXx8XCIlMmVcIj09PWUudG9Mb3dlckNhc2UoKX0sVmY9e30sS2Y9e30sQmY9e30sSGY9e30samY9e30sJGY9e30sWWY9e30semY9e30sV2Y9e30sSmY9e30sWGY9e30sUWY9e30sWmY9e30sZV89e30sdF89e30sbl89e30sb189e30scl89e30sYV89e30sc189e30saV89e30sdV89ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIHIsYSxzLGksdSxjPW58fFZmLGw9MCxwPVwiXCIsZD0hMSxnPSExLGg9ITE7Zm9yKG58fChlLnNjaGVtZT1cIlwiLGUudXNlcm5hbWU9XCJcIixlLnBhc3N3b3JkPVwiXCIsZS5ob3N0PW51bGwsZS5wb3J0PW51bGwsZS5wYXRoPVtdLGUucXVlcnk9bnVsbCxlLmZyYWdtZW50PW51bGwsZS5jYW5ub3RCZUFCYXNlVVJMPSExLHQ9dC5yZXBsYWNlKFRmLFwiXCIpKSx0PXQucmVwbGFjZShTZixcIlwiKSxyPW1uKHQpO2w8PXIubGVuZ3RoOyl7c3dpdGNoKGE9cltsXSxjKXtjYXNlIFZmOmlmKCFhfHwhZ2YudGVzdChhKSl7aWYobilyZXR1cm5cIkludmFsaWQgc2NoZW1lXCI7Yz1CZjtjb250aW51ZX1wKz1hLnRvTG93ZXJDYXNlKCksYz1LZjticmVhaztjYXNlIEtmOmlmKGEmJihoZi50ZXN0KGEpfHxcIitcIj09YXx8XCItXCI9PWF8fFwiLlwiPT1hKSlwKz1hLnRvTG93ZXJDYXNlKCk7ZWxzZXtpZihcIjpcIiE9YSl7aWYobilyZXR1cm5cIkludmFsaWQgc2NoZW1lXCI7cD1cIlwiLGM9QmYsbD0wO2NvbnRpbnVlfWlmKG4mJih3ZihlKSE9c2UoYmYscCl8fFwiZmlsZVwiPT1wJiYoUGYoZSl8fG51bGwhPT1lLnBvcnQpfHxcImZpbGVcIj09ZS5zY2hlbWUmJiFlLmhvc3QpKXJldHVybjtpZihlLnNjaGVtZT1wLG4pcmV0dXJuIHZvaWQod2YoZSkmJmJmW2Uuc2NoZW1lXT09ZS5wb3J0JiYoZS5wb3J0PW51bGwpKTtwPVwiXCIsXCJmaWxlXCI9PWUuc2NoZW1lP2M9ZV86d2YoZSkmJm8mJm8uc2NoZW1lPT1lLnNjaGVtZT9jPUhmOndmKGUpP2M9emY6XCIvXCI9PXJbbCsxXT8oYz1qZixsKyspOihlLmNhbm5vdEJlQUJhc2VVUkw9ITAsZS5wYXRoLnB1c2goXCJcIiksYz1hXyl9YnJlYWs7Y2FzZSBCZjppZighb3x8by5jYW5ub3RCZUFCYXNlVVJMJiZcIiNcIiE9YSlyZXR1cm5cIkludmFsaWQgc2NoZW1lXCI7aWYoby5jYW5ub3RCZUFCYXNlVVJMJiZcIiNcIj09YSl7ZS5zY2hlbWU9by5zY2hlbWUsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9by5xdWVyeSxlLmZyYWdtZW50PVwiXCIsZS5jYW5ub3RCZUFCYXNlVVJMPSEwLGM9aV87YnJlYWt9Yz1cImZpbGVcIj09by5zY2hlbWU/ZV86JGY7Y29udGludWU7Y2FzZSBIZjppZihcIi9cIiE9YXx8XCIvXCIhPXJbbCsxXSl7Yz0kZjtjb250aW51ZX1jPVdmLGwrKzticmVhaztjYXNlIGpmOmlmKFwiL1wiPT1hKXtjPUpmO2JyZWFrfWM9cl87Y29udGludWU7Y2FzZSAkZjppZihlLnNjaGVtZT1vLnNjaGVtZSxhPT1uZillLnVzZXJuYW1lPW8udXNlcm5hbWUsZS5wYXNzd29yZD1vLnBhc3N3b3JkLGUuaG9zdD1vLmhvc3QsZS5wb3J0PW8ucG9ydCxlLnBhdGg9by5wYXRoLnNsaWNlKCksZS5xdWVyeT1vLnF1ZXJ5O2Vsc2UgaWYoXCIvXCI9PWF8fFwiXFxcXFwiPT1hJiZ3ZihlKSljPVlmO2Vsc2UgaWYoXCI/XCI9PWEpZS51c2VybmFtZT1vLnVzZXJuYW1lLGUucGFzc3dvcmQ9by5wYXNzd29yZCxlLmhvc3Q9by5ob3N0LGUucG9ydD1vLnBvcnQsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9XCJcIixjPXNfO2Vsc2V7aWYoXCIjXCIhPWEpe2UudXNlcm5hbWU9by51c2VybmFtZSxlLnBhc3N3b3JkPW8ucGFzc3dvcmQsZS5ob3N0PW8uaG9zdCxlLnBvcnQ9by5wb3J0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxlLnBhdGgucG9wKCksYz1yXztjb250aW51ZX1lLnVzZXJuYW1lPW8udXNlcm5hbWUsZS5wYXNzd29yZD1vLnBhc3N3b3JkLGUuaG9zdD1vLmhvc3QsZS5wb3J0PW8ucG9ydCxlLnBhdGg9by5wYXRoLnNsaWNlKCksZS5xdWVyeT1vLnF1ZXJ5LGUuZnJhZ21lbnQ9XCJcIixjPWlffWJyZWFrO2Nhc2UgWWY6aWYoIXdmKGUpfHxcIi9cIiE9YSYmXCJcXFxcXCIhPWEpe2lmKFwiL1wiIT1hKXtlLnVzZXJuYW1lPW8udXNlcm5hbWUsZS5wYXNzd29yZD1vLnBhc3N3b3JkLGUuaG9zdD1vLmhvc3QsZS5wb3J0PW8ucG9ydCxjPXJfO2NvbnRpbnVlfWM9SmZ9ZWxzZSBjPVdmO2JyZWFrO2Nhc2UgemY6aWYoYz1XZixcIi9cIiE9YXx8XCIvXCIhPXAuY2hhckF0KGwrMSkpY29udGludWU7bCsrO2JyZWFrO2Nhc2UgV2Y6aWYoXCIvXCIhPWEmJlwiXFxcXFwiIT1hKXtjPUpmO2NvbnRpbnVlfWJyZWFrO2Nhc2UgSmY6aWYoXCJAXCI9PWEpe2QmJihwPVwiJTQwXCIrcCksZD0hMCxzPW1uKHApO2Zvcih2YXIgZj0wO2Y8cy5sZW5ndGg7ZisrKXt2YXIgXz1zW2ZdO2lmKFwiOlwiIT1ffHxoKXt2YXIgbT1SZihfLExmKTtoP2UucGFzc3dvcmQrPW06ZS51c2VybmFtZSs9bX1lbHNlIGg9ITB9cD1cIlwifWVsc2UgaWYoYT09bmZ8fFwiL1wiPT1hfHxcIj9cIj09YXx8XCIjXCI9PWF8fFwiXFxcXFwiPT1hJiZ3ZihlKSl7aWYoZCYmXCJcIj09cClyZXR1cm5cIkludmFsaWQgYXV0aG9yaXR5XCI7bC09bW4ocCkubGVuZ3RoKzEscD1cIlwiLGM9WGZ9ZWxzZSBwKz1hO2JyZWFrO2Nhc2UgWGY6Y2FzZSBRZjppZihuJiZcImZpbGVcIj09ZS5zY2hlbWUpe2M9bl87Y29udGludWV9aWYoXCI6XCIhPWF8fGcpe2lmKGE9PW5mfHxcIi9cIj09YXx8XCI/XCI9PWF8fFwiI1wiPT1hfHxcIlxcXFxcIj09YSYmd2YoZSkpe2lmKHdmKGUpJiZcIlwiPT1wKXJldHVyblwiSW52YWxpZCBob3N0XCI7aWYobiYmXCJcIj09cCYmKFBmKGUpfHxudWxsIT09ZS5wb3J0KSlyZXR1cm47aWYoaT1EZihlLHApKXJldHVybiBpO2lmKHA9XCJcIixjPW9fLG4pcmV0dXJuO2NvbnRpbnVlfVwiW1wiPT1hP2c9ITA6XCJdXCI9PWEmJihnPSExKSxwKz1hfWVsc2V7aWYoXCJcIj09cClyZXR1cm5cIkludmFsaWQgaG9zdFwiO2lmKGk9RGYoZSxwKSlyZXR1cm4gaTtpZihwPVwiXCIsYz1aZixuPT1RZilyZXR1cm59YnJlYWs7Y2FzZSBaZjppZighZmYudGVzdChhKSl7aWYoYT09bmZ8fFwiL1wiPT1hfHxcIj9cIj09YXx8XCIjXCI9PWF8fFwiXFxcXFwiPT1hJiZ3ZihlKXx8bil7aWYoXCJcIiE9cCl7dmFyIHY9cGFyc2VJbnQocCwxMCk7aWYodj42NTUzNSlyZXR1cm5cIkludmFsaWQgcG9ydFwiO2UucG9ydD13ZihlKSYmdj09PWJmW2Uuc2NoZW1lXT9udWxsOnYscD1cIlwifWlmKG4pcmV0dXJuO2M9b187Y29udGludWV9cmV0dXJuXCJJbnZhbGlkIHBvcnRcIn1wKz1hO2JyZWFrO2Nhc2UgZV86aWYoZS5zY2hlbWU9XCJmaWxlXCIsXCIvXCI9PWF8fFwiXFxcXFwiPT1hKWM9dF87ZWxzZXtpZighb3x8XCJmaWxlXCIhPW8uc2NoZW1lKXtjPXJfO2NvbnRpbnVlfWlmKGE9PW5mKWUuaG9zdD1vLmhvc3QsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9by5xdWVyeTtlbHNlIGlmKFwiP1wiPT1hKWUuaG9zdD1vLmhvc3QsZS5wYXRoPW8ucGF0aC5zbGljZSgpLGUucXVlcnk9XCJcIixjPXNfO2Vsc2V7aWYoXCIjXCIhPWEpe0ZmKHIuc2xpY2UobCkuam9pbihcIlwiKSl8fChlLmhvc3Q9by5ob3N0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxxZihlKSksYz1yXztjb250aW51ZX1lLmhvc3Q9by5ob3N0LGUucGF0aD1vLnBhdGguc2xpY2UoKSxlLnF1ZXJ5PW8ucXVlcnksZS5mcmFnbWVudD1cIlwiLGM9aV99fWJyZWFrO2Nhc2UgdF86aWYoXCIvXCI9PWF8fFwiXFxcXFwiPT1hKXtjPW5fO2JyZWFrfW8mJlwiZmlsZVwiPT1vLnNjaGVtZSYmIUZmKHIuc2xpY2UobCkuam9pbihcIlwiKSkmJihVZihvLnBhdGhbMF0sITApP2UucGF0aC5wdXNoKG8ucGF0aFswXSk6ZS5ob3N0PW8uaG9zdCksYz1yXztjb250aW51ZTtjYXNlIG5fOmlmKGE9PW5mfHxcIi9cIj09YXx8XCJcXFxcXCI9PWF8fFwiP1wiPT1hfHxcIiNcIj09YSl7aWYoIW4mJlVmKHApKWM9cl87ZWxzZSBpZihcIlwiPT1wKXtpZihlLmhvc3Q9XCJcIixuKXJldHVybjtjPW9ffWVsc2V7aWYoaT1EZihlLHApKXJldHVybiBpO2lmKFwibG9jYWxob3N0XCI9PWUuaG9zdCYmKGUuaG9zdD1cIlwiKSxuKXJldHVybjtwPVwiXCIsYz1vX31jb250aW51ZX1wKz1hO2JyZWFrO2Nhc2Ugb186aWYod2YoZSkpe2lmKGM9cl8sXCIvXCIhPWEmJlwiXFxcXFwiIT1hKWNvbnRpbnVlfWVsc2UgaWYobnx8XCI/XCIhPWEpaWYobnx8XCIjXCIhPWEpe2lmKGEhPW5mJiYoYz1yXyxcIi9cIiE9YSkpY29udGludWV9ZWxzZSBlLmZyYWdtZW50PVwiXCIsYz1pXztlbHNlIGUucXVlcnk9XCJcIixjPXNfO2JyZWFrO2Nhc2Ugcl86aWYoYT09bmZ8fFwiL1wiPT1hfHxcIlxcXFxcIj09YSYmd2YoZSl8fCFuJiYoXCI/XCI9PWF8fFwiI1wiPT1hKSl7aWYoXCIuLlwiPT09KHU9KHU9cCkudG9Mb3dlckNhc2UoKSl8fFwiJTJlLlwiPT09dXx8XCIuJTJlXCI9PT11fHxcIiUyZSUyZVwiPT09dT8ocWYoZSksXCIvXCI9PWF8fFwiXFxcXFwiPT1hJiZ3ZihlKXx8ZS5wYXRoLnB1c2goXCJcIikpOnhmKHApP1wiL1wiPT1hfHxcIlxcXFxcIj09YSYmd2YoZSl8fGUucGF0aC5wdXNoKFwiXCIpOihcImZpbGVcIj09ZS5zY2hlbWUmJiFlLnBhdGgubGVuZ3RoJiZVZihwKSYmKGUuaG9zdCYmKGUuaG9zdD1cIlwiKSxwPXAuY2hhckF0KDApK1wiOlwiKSxlLnBhdGgucHVzaChwKSkscD1cIlwiLFwiZmlsZVwiPT1lLnNjaGVtZSYmKGE9PW5mfHxcIj9cIj09YXx8XCIjXCI9PWEpKWZvcig7ZS5wYXRoLmxlbmd0aD4xJiZcIlwiPT09ZS5wYXRoWzBdOyllLnBhdGguc2hpZnQoKTtcIj9cIj09YT8oZS5xdWVyeT1cIlwiLGM9c18pOlwiI1wiPT1hJiYoZS5mcmFnbWVudD1cIlwiLGM9aV8pfWVsc2UgcCs9UmYoYSxPZik7YnJlYWs7Y2FzZSBhXzpcIj9cIj09YT8oZS5xdWVyeT1cIlwiLGM9c18pOlwiI1wiPT1hPyhlLmZyYWdtZW50PVwiXCIsYz1pXyk6YSE9bmYmJihlLnBhdGhbMF0rPVJmKGEsa2YpKTticmVhaztjYXNlIHNfOm58fFwiI1wiIT1hP2EhPW5mJiYoXCInXCI9PWEmJndmKGUpP2UucXVlcnkrPVwiJTI3XCI6ZS5xdWVyeSs9XCIjXCI9PWE/XCIlMjNcIjpSZihhLGtmKSk6KGUuZnJhZ21lbnQ9XCJcIixjPWlfKTticmVhaztjYXNlIGlfOmEhPW5mJiYoZS5mcmFnbWVudCs9UmYoYSxOZikpfWwrK319LGNfPWZ1bmN0aW9uKGUpe3ZhciB0LG4sbz12YSh0aGlzLGNfLFwiVVJMXCIpLHI9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsYT1NdChlKSxzPWNmKG8se3R5cGU6XCJVUkxcIn0pO2lmKHZvaWQgMCE9PXIpaWYociBpbnN0YW5jZW9mIGNfKXQ9bGYocik7ZWxzZSBpZihuPXVfKHQ9e30sTXQocikpKXRocm93IFR5cGVFcnJvcihuKTtpZihuPXVfKHMsYSxudWxsLHQpKXRocm93IFR5cGVFcnJvcihuKTt2YXIgaT1zLnNlYXJjaFBhcmFtcz1uZXcgc2YsdT11ZihpKTt1LnVwZGF0ZVNlYXJjaFBhcmFtcyhzLnF1ZXJ5KSx1LnVwZGF0ZVVSTD1mdW5jdGlvbigpe3MucXVlcnk9U3RyaW5nKGkpfHxudWxsfSxSfHwoby5ocmVmPXBfLmNhbGwobyksby5vcmlnaW49ZF8uY2FsbChvKSxvLnByb3RvY29sPWdfLmNhbGwobyksby51c2VybmFtZT1oXy5jYWxsKG8pLG8ucGFzc3dvcmQ9Zl8uY2FsbChvKSxvLmhvc3Q9X18uY2FsbChvKSxvLmhvc3RuYW1lPW1fLmNhbGwobyksby5wb3J0PXZfLmNhbGwobyksby5wYXRobmFtZT1NXy5jYWxsKG8pLG8uc2VhcmNoPXlfLmNhbGwobyksby5zZWFyY2hQYXJhbXM9SV8uY2FsbChvKSxvLmhhc2g9VF8uY2FsbChvKSl9LGxfPWNfLnByb3RvdHlwZSxwXz1mdW5jdGlvbigpe3ZhciBlPWxmKHRoaXMpLHQ9ZS5zY2hlbWUsbj1lLnVzZXJuYW1lLG89ZS5wYXNzd29yZCxyPWUuaG9zdCxhPWUucG9ydCxzPWUucGF0aCxpPWUucXVlcnksdT1lLmZyYWdtZW50LGM9dCtcIjpcIjtyZXR1cm4gbnVsbCE9PXI/KGMrPVwiLy9cIixQZihlKSYmKGMrPW4rKG8/XCI6XCIrbzpcIlwiKStcIkBcIiksYys9QWYociksbnVsbCE9PWEmJihjKz1cIjpcIithKSk6XCJmaWxlXCI9PXQmJihjKz1cIi8vXCIpLGMrPWUuY2Fubm90QmVBQmFzZVVSTD9zWzBdOnMubGVuZ3RoP1wiL1wiK3Muam9pbihcIi9cIik6XCJcIixudWxsIT09aSYmKGMrPVwiP1wiK2kpLG51bGwhPT11JiYoYys9XCIjXCIrdSksY30sZF89ZnVuY3Rpb24oKXt2YXIgZT1sZih0aGlzKSx0PWUuc2NoZW1lLG49ZS5wb3J0O2lmKFwiYmxvYlwiPT10KXRyeXtyZXR1cm4gbmV3IGNfKHQucGF0aFswXSkub3JpZ2lufWNhdGNoKF9NKXtyZXR1cm5cIm51bGxcIn1yZXR1cm5cImZpbGVcIiE9dCYmd2YoZSk/dCtcIjovL1wiK0FmKGUuaG9zdCkrKG51bGwhPT1uP1wiOlwiK246XCJcIik6XCJudWxsXCJ9LGdfPWZ1bmN0aW9uKCl7cmV0dXJuIGxmKHRoaXMpLnNjaGVtZStcIjpcIn0saF89ZnVuY3Rpb24oKXtyZXR1cm4gbGYodGhpcykudXNlcm5hbWV9LGZfPWZ1bmN0aW9uKCl7cmV0dXJuIGxmKHRoaXMpLnBhc3N3b3JkfSxfXz1mdW5jdGlvbigpe3ZhciBlPWxmKHRoaXMpLHQ9ZS5ob3N0LG49ZS5wb3J0O3JldHVybiBudWxsPT09dD9cIlwiOm51bGw9PT1uP0FmKHQpOkFmKHQpK1wiOlwiK259LG1fPWZ1bmN0aW9uKCl7dmFyIGU9bGYodGhpcykuaG9zdDtyZXR1cm4gbnVsbD09PWU/XCJcIjpBZihlKX0sdl89ZnVuY3Rpb24oKXt2YXIgZT1sZih0aGlzKS5wb3J0O3JldHVybiBudWxsPT09ZT9cIlwiOlN0cmluZyhlKX0sTV89ZnVuY3Rpb24oKXt2YXIgZT1sZih0aGlzKSx0PWUucGF0aDtyZXR1cm4gZS5jYW5ub3RCZUFCYXNlVVJMP3RbMF06dC5sZW5ndGg/XCIvXCIrdC5qb2luKFwiL1wiKTpcIlwifSx5Xz1mdW5jdGlvbigpe3ZhciBlPWxmKHRoaXMpLnF1ZXJ5O3JldHVybiBlP1wiP1wiK2U6XCJcIn0sSV89ZnVuY3Rpb24oKXtyZXR1cm4gbGYodGhpcykuc2VhcmNoUGFyYW1zfSxUXz1mdW5jdGlvbigpe3ZhciBlPWxmKHRoaXMpLmZyYWdtZW50O3JldHVybiBlP1wiI1wiK2U6XCJcIn0sU189ZnVuY3Rpb24oZSx0KXtyZXR1cm57Z2V0OmUsc2V0OnQsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9fTtpZihSJiZSdChsXyx7aHJlZjpTXyhwXywoZnVuY3Rpb24oZSl7dmFyIHQ9bGYodGhpcyksbj1NdChlKSxvPXVfKHQsbik7aWYobyl0aHJvdyBUeXBlRXJyb3Iobyk7dWYodC5zZWFyY2hQYXJhbXMpLnVwZGF0ZVNlYXJjaFBhcmFtcyh0LnF1ZXJ5KX0pKSxvcmlnaW46U18oZF8pLHByb3RvY29sOlNfKGdfLChmdW5jdGlvbihlKXt2YXIgdD1sZih0aGlzKTt1Xyh0LE10KGUpK1wiOlwiLFZmKX0pKSx1c2VybmFtZTpTXyhoXywoZnVuY3Rpb24oZSl7dmFyIHQ9bGYodGhpcyksbj1tbihNdChlKSk7aWYoIUdmKHQpKXt0LnVzZXJuYW1lPVwiXCI7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdC51c2VybmFtZSs9UmYobltvXSxMZil9fSkpLHBhc3N3b3JkOlNfKGZfLChmdW5jdGlvbihlKXt2YXIgdD1sZih0aGlzKSxuPW1uKE10KGUpKTtpZighR2YodCkpe3QucGFzc3dvcmQ9XCJcIjtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0LnBhc3N3b3JkKz1SZihuW29dLExmKX19KSksaG9zdDpTXyhfXywoZnVuY3Rpb24oZSl7dmFyIHQ9bGYodGhpcyk7dC5jYW5ub3RCZUFCYXNlVVJMfHx1Xyh0LE10KGUpLFhmKX0pKSxob3N0bmFtZTpTXyhtXywoZnVuY3Rpb24oZSl7dmFyIHQ9bGYodGhpcyk7dC5jYW5ub3RCZUFCYXNlVVJMfHx1Xyh0LE10KGUpLFFmKX0pKSxwb3J0OlNfKHZfLChmdW5jdGlvbihlKXt2YXIgdD1sZih0aGlzKTtHZih0KXx8KFwiXCI9PShlPU10KGUpKT90LnBvcnQ9bnVsbDp1Xyh0LGUsWmYpKX0pKSxwYXRobmFtZTpTXyhNXywoZnVuY3Rpb24oZSl7dmFyIHQ9bGYodGhpcyk7dC5jYW5ub3RCZUFCYXNlVVJMfHwodC5wYXRoPVtdLHVfKHQsTXQoZSksb18pKX0pKSxzZWFyY2g6U18oeV8sKGZ1bmN0aW9uKGUpe3ZhciB0PWxmKHRoaXMpO1wiXCI9PShlPU10KGUpKT90LnF1ZXJ5PW51bGw6KFwiP1wiPT1lLmNoYXJBdCgwKSYmKGU9ZS5zbGljZSgxKSksdC5xdWVyeT1cIlwiLHVfKHQsZSxzXykpLHVmKHQuc2VhcmNoUGFyYW1zKS51cGRhdGVTZWFyY2hQYXJhbXModC5xdWVyeSl9KSksc2VhcmNoUGFyYW1zOlNfKElfKSxoYXNoOlNfKFRfLChmdW5jdGlvbihlKXt2YXIgdD1sZih0aGlzKTtcIlwiIT0oZT1NdChlKSk/KFwiI1wiPT1lLmNoYXJBdCgwKSYmKGU9ZS5zbGljZSgxKSksdC5mcmFnbWVudD1cIlwiLHVfKHQsZSxpXykpOnQuZnJhZ21lbnQ9bnVsbH0pKX0pLEhlKGxfLFwidG9KU09OXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHBfLmNhbGwodGhpcyl9KSx7ZW51bWVyYWJsZTohMH0pLEhlKGxfLFwidG9TdHJpbmdcIiwoZnVuY3Rpb24oKXtyZXR1cm4gcF8uY2FsbCh0aGlzKX0pLHtlbnVtZXJhYmxlOiEwfSksYWYpe3ZhciBEXz1hZi5jcmVhdGVPYmplY3RVUkwsRV89YWYucmV2b2tlT2JqZWN0VVJMO0RfJiZIZShjXyxcImNyZWF0ZU9iamVjdFVSTFwiLChmdW5jdGlvbihlKXtyZXR1cm4gRF8uYXBwbHkoYWYsYXJndW1lbnRzKX0pKSxFXyYmSGUoY18sXCJyZXZva2VPYmplY3RVUkxcIiwoZnVuY3Rpb24oZSl7cmV0dXJuIEVfLmFwcGx5KGFmLGFyZ3VtZW50cyl9KSl9Rm4oY18sXCJVUkxcIiksdnQoe2dsb2JhbDohMCxmb3JjZWQ6IXZoLHNoYW06IVJ9LHtVUkw6Y199KSx2dCh7dGFyZ2V0OlwiT2JqZWN0XCIsc3RhdDohMCxmb3JjZWQ6T2JqZWN0LmFzc2lnbiE9PUlofSx7YXNzaWduOklofSk7dmFyIENfPXtKU09OOntUWVBFOntDMkM6e05PVElDRToxLENPTU1PTjo5LEVWRU5UOjEwfSxHUk9VUDp7Q09NTU9OOjMsVElQOjQsU1lTVEVNOjUsVElQMjo2fSxGUklFTkQ6e05PVElDRTo3fSxQUk9GSUxFOntOT1RJQ0U6OH19LFNVQlRZUEU6e0MyQzp7Q09NTU9OOjAsUkVBREVEOjkyLEtJQ0tFRE9VVDo5Nn0sR1JPVVA6e0NPTU1PTjowLExPVkVNRVNTQUdFOjEsVElQOjIsUkVEUEFDS0VUOjN9fSxPUFRJT05TOntHUk9VUDp7Sk9JTjoxLFFVSVQ6MixLSUNLOjMsU0VUX0FETUlOOjQsQ0FOQ0VMX0FETUlOOjUsTU9ESUZZX0dST1VQX0lORk86NixNT0RJRllfTUVNQkVSX0lORk86N319fSxQUk9UT0JVRjp7fSxJTUFHRV9UWVBFUzp7T1JJR0lOOjEsTEFSR0U6MixTTUFMTDozfSxJTUFHRV9GT1JNQVQ6e0pQRzoxLEpQRUc6MSxHSUY6MixQTkc6MyxCTVA6NCxVTktOT1dOOjI1NX19LEFfPXtOSUNLOlwiVGFnX1Byb2ZpbGVfSU1fTmlja1wiLEdFTkRFUjpcIlRhZ19Qcm9maWxlX0lNX0dlbmRlclwiLEJJUlRIREFZOlwiVGFnX1Byb2ZpbGVfSU1fQmlydGhEYXlcIixMT0NBVElPTjpcIlRhZ19Qcm9maWxlX0lNX0xvY2F0aW9uXCIsU0VMRlNJR05BVFVSRTpcIlRhZ19Qcm9maWxlX0lNX1NlbGZTaWduYXR1cmVcIixBTExPV1RZUEU6XCJUYWdfUHJvZmlsZV9JTV9BbGxvd1R5cGVcIixMQU5HVUFHRTpcIlRhZ19Qcm9maWxlX0lNX0xhbmd1YWdlXCIsQVZBVEFSOlwiVGFnX1Byb2ZpbGVfSU1fSW1hZ2VcIixNRVNTQUdFU0VUVElOR1M6XCJUYWdfUHJvZmlsZV9JTV9Nc2dTZXR0aW5nc1wiLEFETUlORk9SQklEVFlQRTpcIlRhZ19Qcm9maWxlX0lNX0FkbWluRm9yYmlkVHlwZVwiLExFVkVMOlwiVGFnX1Byb2ZpbGVfSU1fTGV2ZWxcIixST0xFOlwiVGFnX1Byb2ZpbGVfSU1fUm9sZVwifSxrXz17VU5LTk9XTjpcIkdlbmRlcl9UeXBlX1Vua25vd25cIixGRU1BTEU6XCJHZW5kZXJfVHlwZV9GZW1hbGVcIixNQUxFOlwiR2VuZGVyX1R5cGVfTWFsZVwifSxOXz17Tk9ORTpcIkFkbWluRm9yYmlkX1R5cGVfTm9uZVwiLFNFTkRfT1VUOlwiQWRtaW5Gb3JiaWRfVHlwZV9TZW5kT3V0XCJ9LE9fPXtORUVEX0NPTkZJUk06XCJBbGxvd1R5cGVfVHlwZV9OZWVkQ29uZmlybVwiLEFMTE9XX0FOWTpcIkFsbG93VHlwZV9UeXBlX0FsbG93QW55XCIsREVOWV9BTlk6XCJBbGxvd1R5cGVfVHlwZV9EZW55QW55XCJ9LExfPVwiSm9pbmVkU3VjY2Vzc1wiLFJfPVwiV2FpdEFkbWluQXBwcm92YWxcIixiXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX2ltYWdlTWVtb3J5VVJMPVwiXCIsYWk/dGhpcy5jcmVhdGVJbWFnZURhdGFBU1VSTEluV1hNaW5pQXBwKHQuZmlsZSk6dGhpcy5jcmVhdGVJbWFnZURhdGFBU1VSTEluV2ViKHQuZmlsZSksdGhpcy5faW5pdEltYWdlSW5mb01vZGVsKCksdGhpcy50eXBlPXJvLk1TR19JTUFHRSx0aGlzLl9wZXJjZW50PTAsdGhpcy5jb250ZW50PXtpbWFnZUZvcm1hdDp0LmltYWdlRm9ybWF0fHxDXy5JTUFHRV9GT1JNQVQuVU5LTk9XTix1dWlkOnQudXVpZCxpbWFnZUluZm9BcnJheTpbXX0sdGhpcy5pbml0SW1hZ2VJbmZvQXJyYXkodC5pbWFnZUluZm9BcnJheSksdGhpcy5fZGVmYXVsdEltYWdlPVwiaHR0cDovL2ltZ2NhY2hlLnFxLmNvbS9vcGVuL3FjbG91ZC92aWRlby9hY3Qvd2ViaW0taW1hZ2VzL2RlZmF1bHQuanBnXCIsdGhpcy5fYXV0b0ZpeFVybCgpfXJldHVybiBhKGUsW3trZXk6XCJfaW5pdEltYWdlSW5mb01vZGVsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX0ltYWdlSW5mb01vZGVsPWZ1bmN0aW9uKHQpe3RoaXMuaW5zdGFuY2VJRD1pdSg5OTk5OTk5KSx0aGlzLnNpemVUeXBlPXQudHlwZXx8MCx0aGlzLnR5cGU9MCx0aGlzLnNpemU9dC5zaXplfHwwLHRoaXMud2lkdGg9dC53aWR0aHx8MCx0aGlzLmhlaWdodD10LmhlaWdodHx8MCx0aGlzLmltYWdlVXJsPXQudXJsfHxcIlwiLHRoaXMudXJsPXQudXJsfHxlLl9pbWFnZU1lbW9yeVVSTHx8ZS5fZGVmYXVsdEltYWdlfSx0aGlzLl9JbWFnZUluZm9Nb2RlbC5wcm90b3R5cGU9e3NldFNpemVUeXBlOmZ1bmN0aW9uKGUpe3RoaXMuc2l6ZVR5cGU9ZX0sc2V0VHlwZTpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ZX0sc2V0SW1hZ2VVcmw6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuaW1hZ2VVcmw9ZSl9LGdldEltYWdlVXJsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1hZ2VVcmx9fX19LHtrZXk6XCJpbml0SW1hZ2VJbmZvQXJyYXlcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPW51bGwsbz1udWxsO3Q8PTI7KW89SmkoZSl8fEppKGVbdF0pP3t0eXBlOjAsc2l6ZTowLHdpZHRoOjAsaGVpZ2h0OjAsdXJsOlwiXCJ9OmVbdF0sKG49bmV3IHRoaXMuX0ltYWdlSW5mb01vZGVsKG8pKS5zZXRTaXplVHlwZSh0KzEpLG4uc2V0VHlwZSh0KSx0aGlzLmFkZEltYWdlSW5mbyhuKSx0Kys7dGhpcy51cGRhdGVBY2Nlc3NTaWRlSW1hZ2VJbmZvQXJyYXkoKX19LHtrZXk6XCJ1cGRhdGVJbWFnZUluZm9BcnJheVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheS5sZW5ndGgsbz0wO288bjtvKyspdD10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXlbb10sZVtvXS5zaXplJiYodC5zaXplPWVbb10uc2l6ZSksZVtvXS51cmwmJnQuc2V0SW1hZ2VVcmwoZVtvXS51cmwpLGVbb10ud2lkdGgmJih0LndpZHRoPWVbb10ud2lkdGgpLGVbb10uaGVpZ2h0JiYodC5oZWlnaHQ9ZVtvXS5oZWlnaHQpfX0se2tleTpcIl9hdXRvRml4VXJsXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5Lmxlbmd0aCx0PVwiXCIsbj1cIlwiLG89W1wiaHR0cFwiLFwiaHR0cHNcIl0scj1udWxsLGE9MDthPGU7YSsrKXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVthXS51cmwmJlwiXCIhPT0ocj10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXlbYV0pLmltYWdlVXJsJiYobj1yLmltYWdlVXJsLnNsaWNlKDAsci5pbWFnZVVybC5pbmRleE9mKFwiOi8vXCIpKzEpLHQ9ci5pbWFnZVVybC5zbGljZShyLmltYWdlVXJsLmluZGV4T2YoXCI6Ly9cIikrMSksby5pbmRleE9mKG4pPDAmJihuPVwiaHR0cHM6XCIpLHRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVthXS5zZXRJbWFnZVVybChbbix0XS5qb2luKFwiXCIpKSl9fSx7a2V5OlwidXBkYXRlUGVyY2VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3BlcmNlbnQ9ZSx0aGlzLl9wZXJjZW50PjEmJih0aGlzLl9wZXJjZW50PTEpfX0se2tleTpcInVwZGF0ZUltYWdlRm9ybWF0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jb250ZW50LmltYWdlRm9ybWF0PUNfLklNQUdFX0ZPUk1BVFtlLnRvVXBwZXJDYXNlKCldfHxDXy5JTUFHRV9GT1JNQVQuVU5LTk9XTn19LHtrZXk6XCJjcmVhdGVJbWFnZURhdGFBU1VSTEluV2ViXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZSYmZS5maWxlcy5sZW5ndGg+MCYmKHRoaXMuX2ltYWdlTWVtb3J5VVJMPXdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGUuZmlsZXNbMF0pKX19LHtrZXk6XCJjcmVhdGVJbWFnZURhdGFBU1VSTEluV1hNaW5pQXBwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSYmZS51cmwmJih0aGlzLl9pbWFnZU1lbW9yeVVSTD1lLnVybCl9fSx7a2V5OlwicmVwbGFjZUltYWdlSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5W3RdaW5zdGFuY2VvZiB0aGlzLl9JbWFnZUluZm9Nb2RlbHx8KHRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVt0XT1lKX19LHtrZXk6XCJhZGRJbWFnZUluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXkubGVuZ3RoPj0zfHx0aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXkucHVzaChlKX19LHtrZXk6XCJ1cGRhdGVBY2Nlc3NTaWRlSW1hZ2VJbmZvQXJyYXlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheSx0PWVbMF0sbj10LndpZHRoLG89dm9pZCAwPT09bj8wOm4scj10LmhlaWdodCxhPXZvaWQgMD09PXI/MDpyOzAhPT1vJiYwIT09YSYmKEV1KGUpLE9iamVjdC5hc3NpZ24oZVsyXSxEdSh7b3JpZ2luV2lkdGg6byxvcmlnaW5IZWlnaHQ6YSxtaW46NzIwfSkpKX19LHtrZXk6XCJzZW5kYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXkubGVuZ3RoJiYoXCJcIiE9PXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVswXS5pbWFnZVVybCYmMCE9PXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVswXS5zaXplKX19XSksZX0oKSx3Xz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMudHlwZT1yby5NU0dfRkFDRSx0aGlzLmNvbnRlbnQ9dHx8bnVsbH1yZXR1cm4gYShlLFt7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5jb250ZW50fX1dKSxlfSgpLFBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy50eXBlPXJvLk1TR19BVURJTyx0aGlzLl9wZXJjZW50PTAsdGhpcy5jb250ZW50PXtkb3dubG9hZEZsYWc6MixzZWNvbmQ6dC5zZWNvbmQsc2l6ZTp0LnNpemUsdXJsOnQudXJsLHJlbW90ZUF1ZGlvVXJsOnQudXJsfHxcIlwiLHV1aWQ6dC51dWlkfX1yZXR1cm4gYShlLFt7a2V5OlwidXBkYXRlUGVyY2VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3BlcmNlbnQ9ZSx0aGlzLl9wZXJjZW50PjEmJih0aGlzLl9wZXJjZW50PTEpfX0se2tleTpcInVwZGF0ZUF1ZGlvVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jb250ZW50LnJlbW90ZUF1ZGlvVXJsPWV9fSx7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiXCIhPT10aGlzLmNvbnRlbnQucmVtb3RlQXVkaW9Vcmx9fV0pLGV9KCk7dnQoe3RhcmdldDpcIk9iamVjdFwiLHN0YXQ6ITAsZm9yY2VkOiFSLHNoYW06IVJ9LHtkZWZpbmVQcm9wZXJ0eTpFZS5mfSk7dmFyIEdfPXtmcm9tOiEwLGdyb3VwSUQ6ITAsZ3JvdXBOYW1lOiEwLHRvOiEwfSxVXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMudHlwZT1yby5NU0dfR1JQX1RJUCx0aGlzLmNvbnRlbnQ9e30sdGhpcy5faW5pdENvbnRlbnQodCl9cmV0dXJuIGEoZSxbe2tleTpcIl9pbml0Q29udGVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7c3dpdGNoKG4pe2Nhc2VcInJlbWFya0luZm9cIjpicmVhaztjYXNlXCJncm91cFByb2ZpbGVcIjp0LmNvbnRlbnQuZ3JvdXBQcm9maWxlPXt9LHQuX2luaXRHcm91cFByb2ZpbGUoZVtuXSk7YnJlYWs7Y2FzZVwib3BlcmF0b3JJbmZvXCI6Y2FzZVwibWVtYmVySW5mb0xpc3RcIjpicmVhaztjYXNlXCJtc2dNZW1iZXJJbmZvXCI6dC5jb250ZW50Lm1lbWJlckxpc3Q9ZVtuXSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5jb250ZW50LFwibXNnTWVtYmVySW5mb1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gS2kud2FybihcIiEhISDnpoHoqIDnmoTnvqTmj5DnpLrmtojmga/kuK3nmoQgcGF5bG9hZC5tc2dNZW1iZXJJbmZvIOWxnuaAp+WNs+WwhuW6n+W8g++8jOivt+S9v+eUqCBwYXlsb2FkLm1lbWJlckxpc3Qg5bGe5oCn5pu/5Luj44CCIFxcblwiLFwibXNnTWVtYmVySW5mbyDkuK3nmoQgc2h1dHVwVGltZSDlsZ7mgKflr7nlupTmm7TmlLnkuLogbWVtYmVyTGlzdCDkuK3nmoQgbXV0ZVRpbWUg5bGe5oCn77yM6KGo56S656aB6KiA5pe26ZW/44CCIFxcblwiLFwi5Y+C6ICD77ya576k5o+Q56S65raI5oGvIGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9NZXNzYWdlLmh0bWwjLkdyb3VwVGlwUGF5bG9hZFwiKSx0LmNvbnRlbnQubWVtYmVyTGlzdC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt1c2VySUQ6ZS51c2VySUQsc2h1dHVwVGltZTplLm11dGVUaW1lfX0pKX19KTticmVhaztjYXNlXCJvbmxpbmVNZW1iZXJJbmZvXCI6YnJlYWs7Y2FzZVwibWVtYmVyTnVtXCI6dC5jb250ZW50W25dPWVbbl0sdC5jb250ZW50Lm1lbWJlckNvdW50PWVbbl07YnJlYWs7ZGVmYXVsdDp0LmNvbnRlbnRbbl09ZVtuXX19KSksdGhpcy5jb250ZW50LnVzZXJJRExpc3R8fCh0aGlzLmNvbnRlbnQudXNlcklETGlzdD1bdGhpcy5jb250ZW50Lm9wZXJhdG9ySURdKX19LHtrZXk6XCJfaW5pdEdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBvPXRbbl07R19bb10mJih0aGlzLmNvbnRlbnQuZ3JvdXBQcm9maWxlW29dPWVbb10pfX19XSksZX0oKSxGXz17ZnJvbTohMCxncm91cElEOiEwLGdyb3VwTmFtZTohMCx0bzohMH0scV89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLnR5cGU9cm8uTVNHX0dSUF9TWVNfTk9USUNFLHRoaXMuY29udGVudD17fSx0aGlzLl9pbml0Q29udGVudCh0KX1yZXR1cm4gYShlLFt7a2V5OlwiX2luaXRDb250ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXtzd2l0Y2gobil7Y2FzZVwibWVtYmVySW5mb0xpc3RcIjpicmVhaztjYXNlXCJyZW1hcmtJbmZvXCI6dC5jb250ZW50LmhhbmRsZU1lc3NhZ2U9ZVtuXTticmVhaztjYXNlXCJncm91cFByb2ZpbGVcIjp0LmNvbnRlbnQuZ3JvdXBQcm9maWxlPXt9LHQuX2luaXRHcm91cFByb2ZpbGUoZVtuXSk7YnJlYWs7ZGVmYXVsdDp0LmNvbnRlbnRbbl09ZVtuXX19KSl9fSx7a2V5OlwiX2luaXRHcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbj0wO248dC5sZW5ndGg7bisrKXt2YXIgbz10W25dO0ZfW29dJiYoXCJncm91cE5hbWVcIj09PW8/dGhpcy5jb250ZW50Lmdyb3VwUHJvZmlsZS5uYW1lPWVbb106dGhpcy5jb250ZW50Lmdyb3VwUHJvZmlsZVtvXT1lW29dKX19fV0pLGV9KCkseF89TWF0aC5taW4sVl89W10ubGFzdEluZGV4T2YsS189ISFWXyYmMS9bMV0ubGFzdEluZGV4T2YoMSwtMCk8MCxCXz16dChcImxhc3RJbmRleE9mXCIpLEhfPUtffHwhQl8/ZnVuY3Rpb24oZSl7aWYoS18pcmV0dXJuIFZfLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8MDt2YXIgdD1LKHRoaXMpLG49V2UodC5sZW5ndGgpLG89bi0xO2Zvcihhcmd1bWVudHMubGVuZ3RoPjEmJihvPXhfKG8sWWUoYXJndW1lbnRzWzFdKSkpLG88MCYmKG89bitvKTtvPj0wO28tLSlpZihvIGluIHQmJnRbb109PT1lKXJldHVybiBvfHwwO3JldHVybi0xfTpWXzt2dCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6SF8hPT1bXS5sYXN0SW5kZXhPZn0se2xhc3RJbmRleE9mOkhffSk7dmFyIGpfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy50eXBlPXJvLk1TR19GSUxFLHRoaXMuX3BlcmNlbnQ9MDt2YXIgbj10aGlzLl9nZXRGaWxlSW5mbyh0KTt0aGlzLmNvbnRlbnQ9e2Rvd25sb2FkRmxhZzoyLGZpbGVVcmw6dC51cmx8fFwiXCIsdXVpZDp0LnV1aWQsZmlsZU5hbWU6bi5uYW1lfHxcIlwiLGZpbGVTaXplOm4uc2l6ZXx8MH19cmV0dXJuIGEoZSxbe2tleTpcIl9nZXRGaWxlSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUuZmlsZU5hbWUmJmUuZmlsZVNpemUpcmV0dXJue3NpemU6ZS5maWxlU2l6ZSxuYW1lOmUuZmlsZU5hbWV9O2lmKGFpKXJldHVybnt9O3ZhciB0PWUuZmlsZS5maWxlc1swXTtyZXR1cm57c2l6ZTp0LnNpemUsbmFtZTp0Lm5hbWUsdHlwZTp0LnR5cGUuc2xpY2UodC50eXBlLmxhc3RJbmRleE9mKFwiL1wiKSsxKS50b0xvd2VyQ2FzZSgpfX19LHtrZXk6XCJ1cGRhdGVQZXJjZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcGVyY2VudD1lLHRoaXMuX3BlcmNlbnQ+MSYmKHRoaXMuX3BlcmNlbnQ9MSl9fSx7a2V5OlwidXBkYXRlRmlsZVVybFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY29udGVudC5maWxlVXJsPWV9fSx7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiXCIhPT10aGlzLmNvbnRlbnQuZmlsZVVybCYmKFwiXCIhPT10aGlzLmNvbnRlbnQuZmlsZU5hbWUmJjAhPT10aGlzLmNvbnRlbnQuZmlsZVNpemUpfX1dKSxlfSgpLCRfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy50eXBlPXJvLk1TR19DVVNUT00sdGhpcy5jb250ZW50PXtkYXRhOnQuZGF0YXx8XCJcIixkZXNjcmlwdGlvbjp0LmRlc2NyaXB0aW9ufHxcIlwiLGV4dGVuc2lvbjp0LmV4dGVuc2lvbnx8XCJcIn19cmV0dXJuIGEoZSxbe2tleTpcInNldERhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb250ZW50LmRhdGE9ZSx0aGlzfX0se2tleTpcInNldERlc2NyaXB0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29udGVudC5kZXNjcmlwdGlvbj1lLHRoaXN9fSx7a2V5Olwic2V0RXh0ZW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29udGVudC5leHRlbnNpb249ZSx0aGlzfX0se2tleTpcInNlbmRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuY29udGVudC5kYXRhLmxlbmd0aHx8MCE9PXRoaXMuY29udGVudC5kZXNjcmlwdGlvbi5sZW5ndGh8fDAhPT10aGlzLmNvbnRlbnQuZXh0ZW5zaW9uLmxlbmd0aH19XSksZX0oKSxZXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMudHlwZT1yby5NU0dfVklERU8sdGhpcy5fcGVyY2VudD0wLHRoaXMuY29udGVudD17cmVtb3RlVmlkZW9Vcmw6dC5yZW1vdGVWaWRlb1VybHx8dC52aWRlb1VybHx8XCJcIix2aWRlb0Zvcm1hdDp0LnZpZGVvRm9ybWF0LHZpZGVvU2Vjb25kOnBhcnNlSW50KHQudmlkZW9TZWNvbmQsMTApLHZpZGVvU2l6ZTp0LnZpZGVvU2l6ZSx2aWRlb1VybDp0LnZpZGVvVXJsLHZpZGVvRG93bmxvYWRGbGFnOjIsdmlkZW9VVUlEOnQudmlkZW9VVUlELHRodW1iVVVJRDp0LnRodW1iVVVJRCx0aHVtYkZvcm1hdDp0LnRodW1iRm9ybWF0LHRodW1iV2lkdGg6dC50aHVtYldpZHRoLHRodW1iSGVpZ2h0OnQudGh1bWJIZWlnaHQsdGh1bWJTaXplOnQudGh1bWJTaXplLHRodW1iRG93bmxvYWRGbGFnOjIsdGh1bWJVcmw6dC50aHVtYlVybH19cmV0dXJuIGEoZSxbe2tleTpcInVwZGF0ZVBlcmNlbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9wZXJjZW50PWUsdGhpcy5fcGVyY2VudD4xJiYodGhpcy5fcGVyY2VudD0xKX19LHtrZXk6XCJ1cGRhdGVWaWRlb1VybFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UmJih0aGlzLmNvbnRlbnQucmVtb3RlVmlkZW9Vcmw9ZSl9fSx7a2V5Olwic2VuZGFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiXCIhPT10aGlzLmNvbnRlbnQucmVtb3RlVmlkZW9Vcmx9fV0pLGV9KCksel89ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy50eXBlPXJvLk1TR19HRU8sdGhpcy5jb250ZW50PXR9LFdfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtpZihvKHRoaXMsZSksdGhpcy5mcm9tPXQuZnJvbSx0aGlzLm1lc3NhZ2VTZW5kZXI9dC5mcm9tLHRoaXMudGltZT10LnRpbWUsdGhpcy5tZXNzYWdlU2VxdWVuY2U9dC5zZXF1ZW5jZSx0aGlzLmNsaWVudFNlcXVlbmNlPXQuY2xpZW50U2VxdWVuY2V8fHQuc2VxdWVuY2UsdGhpcy5tZXNzYWdlUmFuZG9tPXQucmFuZG9tLHRoaXMuY2xvdWRDdXN0b21EYXRhPXQuY2xvdWRDdXN0b21EYXRhfHxcIlwiLHQuSUQpdGhpcy5uaWNrPXQubmlja3x8XCJcIix0aGlzLmF2YXRhcj10LmF2YXRhcnx8XCJcIix0aGlzLm1lc3NhZ2VCb2R5PVt7dHlwZTp0LnR5cGUscGF5bG9hZDp0LnBheWxvYWR9XSx0LmNvbnZlcnNhdGlvblR5cGUuc3RhcnRzV2l0aChyby5DT05WX0MyQyk/dGhpcy5yZWNlaXZlclVzZXJJRD10LnRvOnQuY29udmVyc2F0aW9uVHlwZS5zdGFydHNXaXRoKHJvLkNPTlZfR1JPVVApJiYodGhpcy5yZWNlaXZlckdyb3VwSUQ9dC50byksdGhpcy5tZXNzYWdlUmVjZWl2ZXI9dC50bztlbHNle3RoaXMubmljaz10Lm5pY2t8fFwiXCIsdGhpcy5hdmF0YXI9dC5hdmF0YXJ8fFwiXCIsdGhpcy5tZXNzYWdlQm9keT1bXTt2YXIgbj10LmVsZW1lbnRzWzBdLnR5cGUscj10LmVsZW1lbnRzWzBdLmNvbnRlbnQ7dGhpcy5fcGF0Y2hSaWNoTWVkaWFQYXlsb2FkKG4sciksbj09PXJvLk1TR19NRVJHRVI/dGhpcy5tZXNzYWdlQm9keS5wdXNoKHt0eXBlOm4scGF5bG9hZDpuZXcgSl8ocikuY29udGVudH0pOnRoaXMubWVzc2FnZUJvZHkucHVzaCh7dHlwZTpuLHBheWxvYWQ6cn0pLHQuZ3JvdXBJRCYmKHRoaXMucmVjZWl2ZXJHcm91cElEPXQuZ3JvdXBJRCx0aGlzLm1lc3NhZ2VSZWNlaXZlcj10Lmdyb3VwSUQpLHQudG8mJih0aGlzLnJlY2VpdmVyVXNlcklEPXQudG8sdGhpcy5tZXNzYWdlUmVjZWl2ZXI9dC50byl9fXJldHVybiBhKGUsW3trZXk6XCJfcGF0Y2hSaWNoTWVkaWFQYXlsb2FkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlPT09cm8uTVNHX0lNQUdFP3QuaW1hZ2VJbmZvQXJyYXkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7IWUuaW1hZ2VVcmwmJmUudXJsJiYoZS5pbWFnZVVybD1lLnVybCxlLnNpemVUeXBlPWUudHlwZSwxPT09ZS50eXBlP2UudHlwZT0wOjM9PT1lLnR5cGUmJihlLnR5cGU9MSkpfSkpOmU9PT1yby5NU0dfVklERU8/IXQucmVtb3RlVmlkZW9VcmwmJnQudmlkZW9VcmwmJih0LnJlbW90ZVZpZGVvVXJsPXQudmlkZW9VcmwpOmU9PT1yby5NU0dfQVVESU8/IXQucmVtb3RlQXVkaW9VcmwmJnQudXJsJiYodC5yZW1vdGVBdWRpb1VybD10LnVybCk6ZT09PXJvLk1TR19GSUxFJiYhdC5maWxlVXJsJiZ0LnVybCYmKHQuZmlsZVVybD10LnVybCx0LnVybD12b2lkIDApfX1dKSxlfSgpLEpfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtpZihvKHRoaXMsZSksdGhpcy50eXBlPXJvLk1TR19NRVJHRVIsdGhpcy5jb250ZW50PXtkb3dubG9hZEtleTpcIlwiLHBiRG93bmxvYWRLZXk6XCJcIixtZXNzYWdlTGlzdDpbXSx0aXRsZTpcIlwiLGFic3RyYWN0TGlzdDpbXSxjb21wYXRpYmxlVGV4dDpcIlwiLHZlcnNpb246MCxsYXllcnNPdmVyTGltaXQ6ITF9LHQuZG93bmxvYWRLZXkpe3ZhciBuPXQuZG93bmxvYWRLZXkscj10LnBiRG93bmxvYWRLZXksYT10LnRpdGxlLHM9dC5hYnN0cmFjdExpc3QsaT10LmNvbXBhdGlibGVUZXh0LHU9dC52ZXJzaW9uO3RoaXMuY29udGVudC5kb3dubG9hZEtleT1uLHRoaXMuY29udGVudC5wYkRvd25sb2FkS2V5PXIsdGhpcy5jb250ZW50LnRpdGxlPWEsdGhpcy5jb250ZW50LmFic3RyYWN0TGlzdD1zLHRoaXMuY29udGVudC5jb21wYXRpYmxlVGV4dD1pLHRoaXMuY29udGVudC52ZXJzaW9uPXV8fDB9ZWxzZSBpZihMdSh0Lm1lc3NhZ2VMaXN0KSkxPT09dC5sYXllcnNPdmVyTGltaXQmJih0aGlzLmNvbnRlbnQubGF5ZXJzT3ZlckxpbWl0PSEwKTtlbHNle3ZhciBjPXQubWVzc2FnZUxpc3QsbD10LnRpdGxlLHA9dC5hYnN0cmFjdExpc3QsZD10LmNvbXBhdGlibGVUZXh0LGc9dC52ZXJzaW9uLGg9W107Yy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZighTHUoZSkpe3ZhciB0PW5ldyBXXyhlKTtoLnB1c2godCl9fSkpLHRoaXMuY29udGVudC5tZXNzYWdlTGlzdD1oLHRoaXMuY29udGVudC50aXRsZT1sLHRoaXMuY29udGVudC5hYnN0cmFjdExpc3Q9cCx0aGlzLmNvbnRlbnQuY29tcGF0aWJsZVRleHQ9ZCx0aGlzLmNvbnRlbnQudmVyc2lvbj1nfHwwfUtpLmRlYnVnKFwiTWVyZ2VyRWxlbWVudC5jb250ZW50OlwiLHRoaXMuY29udGVudCl9cmV0dXJuIGEoZSxbe2tleTpcInNlbmRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hTHUodGhpcy5jb250ZW50Lm1lc3NhZ2VMaXN0KXx8IUx1KHRoaXMuY29udGVudC5kb3dubG9hZEtleSl9fV0pLGV9KCksWF89ezE6cm8uTVNHX1BSSU9SSVRZX0hJR0gsMjpyby5NU0dfUFJJT1JJVFlfTk9STUFMLDM6cm8uTVNHX1BSSU9SSVRZX0xPVyw0OnJvLk1TR19QUklPUklUWV9MT1dFU1R9LFFfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5JRD1cIlwiLHRoaXMuY29udmVyc2F0aW9uSUQ9dC5jb252ZXJzYXRpb25JRHx8bnVsbCx0aGlzLmNvbnZlcnNhdGlvblR5cGU9dC5jb252ZXJzYXRpb25UeXBlfHxyby5DT05WX0MyQyx0aGlzLmNvbnZlcnNhdGlvblN1YlR5cGU9dC5jb252ZXJzYXRpb25TdWJUeXBlLHRoaXMudGltZT10LnRpbWV8fE1hdGguY2VpbChEYXRlLm5vdygpLzFlMyksdGhpcy5zZXF1ZW5jZT10LnNlcXVlbmNlfHwwLHRoaXMuY2xpZW50U2VxdWVuY2U9dC5jbGllbnRTZXF1ZW5jZXx8dC5zZXF1ZW5jZXx8MCx0aGlzLnJhbmRvbT10LnJhbmRvbXx8MD09PXQucmFuZG9tP3QucmFuZG9tOml1KCksdGhpcy5wcmlvcml0eT10aGlzLl9jb21wdXRlUHJpb3JpdHkodC5wcmlvcml0eSksdGhpcy5uaWNrPXQubmlja3x8XCJcIix0aGlzLmF2YXRhcj10LmF2YXRhcnx8XCJcIix0aGlzLmlzUGVlclJlYWQ9ITEsdGhpcy5uYW1lQ2FyZD1cIlwiLHRoaXMuX2VsZW1lbnRzPVtdLHRoaXMuaXNQbGFjZU1lc3NhZ2U9dC5pc1BsYWNlTWVzc2FnZXx8MCx0aGlzLmlzUmV2b2tlZD0yPT09dC5pc1BsYWNlTWVzc2FnZXx8OD09PXQubXNnRmxhZ0JpdHMsdGhpcy5nZW89e30sdGhpcy5mcm9tPXQuZnJvbXx8bnVsbCx0aGlzLnRvPXQudG98fG51bGwsdGhpcy5mbG93PVwiXCIsdGhpcy5pc1N5c3RlbU1lc3NhZ2U9dC5pc1N5c3RlbU1lc3NhZ2V8fCExLHRoaXMucHJvdG9jb2w9dC5wcm90b2NvbHx8XCJKU09OXCIsdGhpcy5pc1Jlc2VuZD0hMSx0aGlzLmlzUmVhZD0hMSx0aGlzLnN0YXR1cz10LnN0YXR1c3x8RWMuU1VDQ0VTUyx0aGlzLl9vbmxpbmVPbmx5RmxhZz0hMSx0aGlzLl9ncm91cEF0SW5mb0xpc3Q9W10sdGhpcy5fcmVsYXlGbGFnPSExLHRoaXMuYXRVc2VyTGlzdD1bXSx0aGlzLmNsb3VkQ3VzdG9tRGF0YT10LmNsb3VkQ3VzdG9tRGF0YXx8XCJcIix0aGlzLmlzRGVsZXRlZD0hMSx0aGlzLmlzTW9kaWZpZWQ9ITEsdGhpcy5yZUluaXRpYWxpemUodC5jdXJyZW50VXNlciksdGhpcy5leHRyYWN0R3JvdXBJbmZvKHQuZ3JvdXBQcm9maWxlfHxudWxsKSx0aGlzLmhhbmRsZUdyb3VwQXRJbmZvKHQpfXJldHVybiBhKGUsW3trZXk6XCJlbGVtZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBLaS53YXJuKFwi77yB77yB77yBTWVzc2FnZSDlrp7kvovnmoQgZWxlbWVudHMg5bGe5oCn5Y2z5bCG5bqf5byD77yM6K+35bC95b+r5L+u5pS544CC5L2/55SoIHR5cGUg5ZKMIHBheWxvYWQg5bGe5oCn5aSE55CG5Y2V5p2h5raI5oGv77yM5YW85a6557uE5ZCI5raI5oGv5L2/55SoIF9lbGVtZW50cyDlsZ7mgKfvvIHvvIHvvIFcIiksdGhpcy5fZWxlbWVudHN9fSx7a2V5OlwiZ2V0RWxlbWVudHNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbGVtZW50c319LHtrZXk6XCJleHRyYWN0R3JvdXBJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYobnVsbCE9PWUpeyRpKGUubmljaykmJih0aGlzLm5pY2s9ZS5uaWNrKSwkaShlLmF2YXRhcikmJih0aGlzLmF2YXRhcj1lLmF2YXRhcik7dmFyIHQ9ZS5tZXNzYWdlRnJvbUFjY291bnRFeHRyYUluZm9ybWF0aW9uO3ppKHQpJiYkaSh0Lm5hbWVDYXJkKSYmKHRoaXMubmFtZUNhcmQ9dC5uYW1lQ2FyZCl9fX0se2tleTpcImhhbmRsZUdyb3VwQXRJbmZvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLnBheWxvYWQmJmUucGF5bG9hZC5hdFVzZXJMaXN0JiZlLnBheWxvYWQuYXRVc2VyTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtlIT09cm8uTVNHX0FUX0FMTD8odC5fZ3JvdXBBdEluZm9MaXN0LnB1c2goe2dyb3VwQXRBbGxGbGFnOjAsZ3JvdXBBdFVzZXJJRDplfSksdC5hdFVzZXJMaXN0LnB1c2goZSkpOih0Ll9ncm91cEF0SW5mb0xpc3QucHVzaCh7Z3JvdXBBdEFsbEZsYWc6MX0pLHQuYXRVc2VyTGlzdC5wdXNoKHJvLk1TR19BVF9BTEwpKX0pKSxXaShlLmdyb3VwQXRJbmZvKSYmZS5ncm91cEF0SW5mby5mb3JFYWNoKChmdW5jdGlvbihlKXsxPT09ZS5ncm91cEF0QWxsRmxhZz90LmF0VXNlckxpc3QucHVzaChlLmdyb3VwQXRVc2VySUQpOjI9PT1lLmdyb3VwQXRBbGxGbGFnJiZ0LmF0VXNlckxpc3QucHVzaChyby5NU0dfQVRfQUxMKX0pKX19LHtrZXk6XCJnZXRHcm91cEF0SW5mb0xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ncm91cEF0SW5mb0xpc3R9fSx7a2V5OlwiX2luaXRQcm94eVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZWxlbWVudHNbMF0mJih0aGlzLnBheWxvYWQ9dGhpcy5fZWxlbWVudHNbMF0uY29udGVudCx0aGlzLnR5cGU9dGhpcy5fZWxlbWVudHNbMF0udHlwZSl9fSx7a2V5OlwicmVJbml0aWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuc3RhdHVzPXRoaXMuZnJvbT9FYy5TVUNDRVNTOkVjLlVOU0VORCwhdGhpcy5mcm9tJiYodGhpcy5mcm9tPWUpKSx0aGlzLl9pbml0RmxvdyhlKSx0aGlzLl9pbml0U2VxdWVuY2UoZSksdGhpcy5fY29uY2F0Q29udmVyc2F0aW9uSUQoZSksdGhpcy5nZW5lcmF0ZU1lc3NhZ2VJRChlKX19LHtrZXk6XCJpc1NlbmRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuX2VsZW1lbnRzLmxlbmd0aCYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMuX2VsZW1lbnRzWzBdLnNlbmRhYmxlPyhLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2VsZW1lbnRzWzBdLnR5cGUsJyBuZWVkIFwiYm9vbGVhbiA6IHNlbmRhYmxlKClcIiBtZXRob2QnKSksITEpOnRoaXMuX2VsZW1lbnRzWzBdLnNlbmRhYmxlKCkpfX0se2tleTpcIl9pbml0VG9cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0dST1VQJiYodGhpcy50bz1lLmdyb3VwSUQpfX0se2tleTpcIl9pbml0U2VxdWVuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXswPT09dGhpcy5jbGllbnRTZXF1ZW5jZSYmZSYmKHRoaXMuY2xpZW50U2VxdWVuY2U9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIEtpLmVycm9yKFwiYXV0b0luY3JlbWVudEluZGV4KHN0cmluZzoga2V5KSBuZWVkIGtleSBwYXJhbWV0ZXJcIiksITE7aWYodm9pZCAwPT09cHVbZV0pe3ZhciB0PW5ldyBEYXRlLG49XCIzXCIuY29uY2F0KHQuZ2V0SG91cnMoKSkuc2xpY2UoLTIpLG89XCIwXCIuY29uY2F0KHQuZ2V0TWludXRlcygpKS5zbGljZSgtMikscj1cIjBcIi5jb25jYXQodC5nZXRTZWNvbmRzKCkpLnNsaWNlKC0yKTtwdVtlXT1wYXJzZUludChbbixvLHIsXCIwMDAxXCJdLmpvaW4oXCJcIikpLG49bnVsbCxvPW51bGwscj1udWxsLEtpLmxvZyhcImF1dG9JbmNyZW1lbnRJbmRleCBzdGFydCBpbmRleDpcIi5jb25jYXQocHVbZV0pKX1yZXR1cm4gcHVbZV0rK30oZSkpLDA9PT10aGlzLnNlcXVlbmNlJiZ0aGlzLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0MyQyYmKHRoaXMuc2VxdWVuY2U9dGhpcy5jbGllbnRTZXF1ZW5jZSl9fSx7a2V5OlwiZ2VuZXJhdGVNZXNzYWdlSURcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lPT09dGhpcy5mcm9tPzE6MCxuPXRoaXMuc2VxdWVuY2U+MD90aGlzLnNlcXVlbmNlOnRoaXMuY2xpZW50U2VxdWVuY2U7dGhpcy5JRD1cIlwiLmNvbmNhdCh0aGlzLmNvbnZlcnNhdGlvbklELFwiLVwiKS5jb25jYXQobixcIi1cIikuY29uY2F0KHRoaXMucmFuZG9tLFwiLVwiKS5jb25jYXQodCl9fSx7a2V5OlwiX2luaXRGbG93XCIsdmFsdWU6ZnVuY3Rpb24oZSl7XCJcIiE9PWUmJihlPT09dGhpcy5mcm9tPyh0aGlzLmZsb3c9XCJvdXRcIix0aGlzLmlzUmVhZD0hMCk6dGhpcy5mbG93PVwiaW5cIil9fSx7a2V5OlwiX2NvbmNhdENvbnZlcnNhdGlvbklEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50byxuPVwiXCIsbz10aGlzLmNvbnZlcnNhdGlvblR5cGU7byE9PXJvLkNPTlZfU1lTVEVNPyhuPW89PT1yby5DT05WX0MyQz9lPT09dGhpcy5mcm9tP3Q6dGhpcy5mcm9tOnRoaXMudG8sdGhpcy5jb252ZXJzYXRpb25JRD1cIlwiLmNvbmNhdChvKS5jb25jYXQobikpOnRoaXMuY29udmVyc2F0aW9uSUQ9cm8uQ09OVl9TWVNURU19fSx7a2V5OlwiaXNFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBfaHx8ZSBpbnN0YW5jZW9mIGJffHxlIGluc3RhbmNlb2Ygd198fGUgaW5zdGFuY2VvZiBQX3x8ZSBpbnN0YW5jZW9mIGpffHxlIGluc3RhbmNlb2YgWV98fGUgaW5zdGFuY2VvZiBVX3x8ZSBpbnN0YW5jZW9mIHFffHxlIGluc3RhbmNlb2YgJF98fGUgaW5zdGFuY2VvZiB6X3x8ZSBpbnN0YW5jZW9mIEpffX0se2tleTpcInNldEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuaXNFbGVtZW50KGUpKXJldHVybiB0aGlzLl9lbGVtZW50cz1bZV0sdm9pZCB0aGlzLl9pbml0UHJveHkoKTt2YXIgbj1mdW5jdGlvbihlKXtpZihlLnR5cGUmJmUuY29udGVudClzd2l0Y2goZS50eXBlKXtjYXNlIHJvLk1TR19URVhUOnQuc2V0VGV4dEVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIHJvLk1TR19JTUFHRTp0LnNldEltYWdlRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2Ugcm8uTVNHX0FVRElPOnQuc2V0QXVkaW9FbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSByby5NU0dfRklMRTp0LnNldEZpbGVFbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSByby5NU0dfVklERU86dC5zZXRWaWRlb0VsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIHJvLk1TR19DVVNUT006dC5zZXRDdXN0b21FbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSByby5NU0dfR0VPOnQuc2V0R0VPRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2Ugcm8uTVNHX0dSUF9USVA6dC5zZXRHcm91cFRpcEVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIHJvLk1TR19HUlBfU1lTX05PVElDRTp0LnNldEdyb3VwU3lzdGVtTm90aWNlRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2Ugcm8uTVNHX0ZBQ0U6dC5zZXRGYWNlRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2Ugcm8uTVNHX01FUkdFUjp0LnNldE1lcmdlckVsZW1lbnQoZS5jb250ZW50KTticmVhaztkZWZhdWx0OktpLndhcm4oZS50eXBlLGUuY29udGVudCxcIm5vIG9wZXJhdGlvbi4uLi4uLlwiKX19O2lmKFdpKGUpKWZvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKW4oZVtvXSk7ZWxzZSBuKGUpO3RoaXMuX2luaXRQcm94eSgpfX0se2tleTpcImNsZWFyRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZWxlbWVudHMubGVuZ3RoPTB9fSx7a2V5Olwic2V0VGV4dEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cInN0cmluZ1wiPT10eXBlb2YgZT9lOmUudGV4dCxuPW5ldyBfaCh7dGV4dDp0fSk7dGhpcy5fZWxlbWVudHMucHVzaChuKX19LHtrZXk6XCJzZXRJbWFnZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgYl8oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRBdWRpb0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUF8oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRGaWxlRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBqXyhlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfX0se2tleTpcInNldFZpZGVvRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBZXyhlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfX0se2tleTpcInNldEdFT0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgel8oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRDdXN0b21FbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3ICRfKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9fSx7a2V5Olwic2V0R3JvdXBUaXBFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30sbj1lLm9wZXJhdGlvblR5cGU7THUoZS5tZW1iZXJJbmZvTGlzdCk/ZS5vcGVyYXRvckluZm8mJih0PWUub3BlcmF0b3JJbmZvKTpuIT09cm8uR1JQX1RJUF9NQlJfSk9JTiYmbiE9PXJvLkdSUF9USVBfTUJSX0tJQ0tFRF9PVVQmJm4hPT1yby5HUlBfVElQX01CUl9TRVRfQURNSU4mJm4hPT1yby5HUlBfVElQX01CUl9DQU5DRUxFRF9BRE1JTnx8KHQ9ZS5tZW1iZXJJbmZvTGlzdFswXSk7dmFyIG89dCxyPW8ubmljayxhPW8uYXZhdGFyOyRpKHIpJiYodGhpcy5uaWNrPXIpLCRpKGEpJiYodGhpcy5hdmF0YXI9YSk7dmFyIHM9bmV3IFVfKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2gocyl9fSx7a2V5Olwic2V0R3JvdXBTeXN0ZW1Ob3RpY2VFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHFfKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9fSx7a2V5Olwic2V0RmFjZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgd18oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX19LHtrZXk6XCJzZXRNZXJnZXJFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEpfKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9fSx7a2V5Olwic2V0SXNSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5pc1JlYWQ9ZX19LHtrZXk6XCJzZXRSZWxheUZsYWdcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9yZWxheUZsYWc9ZX19LHtrZXk6XCJnZXRSZWxheUZsYWdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWxheUZsYWd9fSx7a2V5Olwic2V0T25saW5lT25seUZsYWdcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbmxpbmVPbmx5RmxhZz1lfX0se2tleTpcImdldE9ubGluZU9ubHlGbGFnXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25saW5lT25seUZsYWd9fSx7a2V5OlwiX2NvbXB1dGVQcmlvcml0eVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKEppKGUpKXJldHVybiByby5NU0dfUFJJT1JJVFlfTk9STUFMO2lmKCRpKGUpJiYtMSE9PU9iamVjdC52YWx1ZXMoWF8pLmluZGV4T2YoZSkpcmV0dXJuIGU7aWYoamkoZSkpe3ZhciB0PVwiXCIrZTtpZigtMSE9PU9iamVjdC5rZXlzKFhfKS5pbmRleE9mKHQpKXJldHVybiBYX1t0XX1yZXR1cm4gcm8uTVNHX1BSSU9SSVRZX05PUk1BTH19LHtrZXk6XCJzZXROaWNrQW5kQXZhdGFyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5uaWNrLG49ZS5hdmF0YXI7JGkodCkmJih0aGlzLm5pY2s9dCksJGkobikmJih0aGlzLmF2YXRhcj1uKX19LHtrZXk6XCJzZXROYW1lQ2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpeyRpKGUpJiYodGhpcy5uYW1lQ2FyZD1lKX19XSksZX0oKSxaXz1mdW5jdGlvbihlKXtyZXR1cm57Y29kZTowLGRhdGE6ZXx8e319fSxlbT1cImh0dHBzOi8vY2xvdWQudGVuY2VudC5jb20vZG9jdW1lbnQvcHJvZHVjdC9cIix0bT1cIuaCqOWPr+S7peWcqOWNs+aXtumAmuS/oSBJTSDmjqfliLblj7DnmoTjgJDlvIDlj5HovoXliqnlt6XlhbcoaHR0cHM6Ly9jb25zb2xlLmNsb3VkLnRlbmNlbnQuY29tL2ltLWRldGFpbC90b29sLXVzZXJzaWcp44CR6aG16Z2i5qCh6aqMIFVzZXJTaWfjgIJcIixubT1cIlVzZXJTaWcg6Z2e5rOV77yM6K+35L2/55So5a6Y572R5o+Q5L6b55qEIEFQSSDph43mlrDnlJ/miJAgVXNlclNpZyhcIi5jb25jYXQoZW0sXCIyNjkvMzI2ODgp44CCXCIpLG9tPVwiIy5FNi5CNi44OC5FNi44MS5BRi5FNS44NS44My5FNy5CNC5BMC10aW1tc2dlbGVtZW50XCIscm09ezcwMDAxOlwiVXNlclNpZyDlt7Lov4fmnJ/vvIzor7fph43mlrDnlJ/miJDjgILlu7rorq4gVXNlclNpZyDmnInmlYjmnJ/orr7nva7kuI3lsI/kuo4yNOWwj+aXtuOAglwiLDcwMDAyOlwiVXNlclNpZyDplb/luqbkuLow77yM6K+35qOA5p+l5Lyg5YWl55qEIFVzZXJTaWcg5piv5ZCm5q2j56Gu44CCXCIsNzAwMDM6bm0sNzAwMDU6bm0sNzAwMDk6XCJVc2VyU2lnIOmqjOivgeWksei0pe+8jOWPr+iDveWboOS4uueUn+aIkCBVc2VyU2lnIOaXtua3t+eUqOS6huWFtuS7liBTREtBcHBJRCDnmoTnp4HpkqXmiJblr4bpkqXlr7zoh7TvvIzor7fkvb/nlKjlr7nlupQgU0RLQXBwSUQg5LiL55qE56eB6ZKl5oiW5a+G6ZKl6YeN5paw55Sf5oiQIFVzZXJTaWcoXCIuY29uY2F0KGVtLFwiMjY5LzMyNjg4KeOAglwiKSw3MDAxMzpcIuivt+axguS4reeahCBVc2VySUQg5LiO55Sf5oiQIFVzZXJTaWcg5pe25L2/55So55qEIFVzZXJJRCDkuI3ljLnphY3jgIJcIi5jb25jYXQodG0pLDcwMDE0Olwi6K+35rGC5Lit55qEIFNES0FwcElEIOS4jueUn+aIkCBVc2VyU2lnIOaXtuS9v+eUqOeahCBTREtBcHBJRCDkuI3ljLnphY3jgIJcIi5jb25jYXQodG0pLDcwMDE2Olwi5a+G6ZKl5LiN5a2Y5Zyo77yMVXNlclNpZyDpqozor4HlpLHotKXvvIzor7flnKjljbPml7bpgJrkv6EgSU0g5o6n5Yi25Y+w6I635Y+W5a+G6ZKlKFwiLmNvbmNhdChlbSxcIjI2OS8zMjU3OCMuRTguOEUuQjcuRTUuOEYuOTYuRTUuQUYuODYuRTkuOTIuQTUp44CCXCIpLDcwMDIwOlwiU0RLQXBwSUQg5pyq5om+5Yiw77yM6K+35Zyo5Y2z5pe26YCa5L+hIElNIOaOp+WItuWPsOehruiupOW6lOeUqOS/oeaBr+OAglwiLDcwMDUwOlwiVXNlclNpZyDpqozor4HmrKHmlbDov4fkuo7popHnuYHjgILor7fmo4Dmn6UgVXNlclNpZyDmmK/lkKbmraPnoa7vvIzlubbkuo4x5YiG6ZKf5ZCO6YeN5paw6aqM6K+B44CCXCIuY29uY2F0KHRtKSw3MDA1MTpcIuW4kOWPt+iiq+aLieWFpem7keWQjeWNleOAglwiLDcwMDUyOlwiVXNlclNpZyDlt7Lnu4/lpLHmlYjvvIzor7fph43mlrDnlJ/miJDvvIzlho3mrKHlsJ3or5XjgIJcIiw3MDEwNzpcIuWboOWuieWFqOWOn+WboOiiq+mZkOWItueZu+W9le+8jOivt+S4jeimgemikee5geeZu+W9leOAglwiLDcwMTY5Olwi6K+35rGC55qE55So5oi35biQ5Y+35LiN5a2Y5Zyo44CCXCIsNzAxMTQ6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jotoXml7bvvIzor7fnqI3lkI7ph43or5XjgIJcIiksNzAyMDI6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jotoXml7bvvIzor7fnqI3lkI7ph43or5XjgIJcIiksNzAyMDY6XCLor7fmsYLkuK3mibnph4/mlbDph4/kuI3lkIjms5XjgIJcIiw3MDQwMjpcIuWPguaVsOmdnuazle+8jOivt+ajgOafpeW/heWhq+Wtl+auteaYr+WQpuWhq+WFhe+8jOaIluiAheWtl+auteeahOWhq+WFheaYr+WQpua7oei2s+WNj+iuruimgeaxguOAglwiLDcwNDAzOlwi6K+35rGC5aSx6LSl77yM6ZyA6KaBIEFwcCDnrqHnkIblkZjmnYPpmZDjgIJcIiw3MDM5ODpcIuW4kOWPt+aVsOi2hemZkOOAguWmgumcgOWIm+W7uuWkmuS6jjEwMOS4quW4kOWPt++8jOivt+WwhuW6lOeUqOWNh+e6p+S4uuS4k+S4mueJiO+8jOWFt+S9k+aTjeS9nOaMh+W8leivt+WPguingei0reS5sOaMh+W8lShcIi5jb25jYXQoZW0sXCIyNjkvMzI0NTgp44CCXCIpLDcwNTAwOlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIpLDcxZTM6XCLliKDpmaTluJDlj7flpLHotKXjgILku4XmlK/mjIHliKDpmaTkvZPpqozniYjluJDlj7fvvIzmgqjlvZPliY3lupTnlKjkuLrkuJPkuJrniYjvvIzmmoLkuI3mlK/mjIHluJDlj7fliKDpmaTjgIJcIiwyMDAwMTpcIuivt+axguWMhemdnuazleOAglwiLDIwMDAyOlwiVXNlclNpZyDmiJYgQTIg5aSx5pWI44CCXCIsMjAwMDM6XCLmtojmga/lj5HpgIHmlrnmiJbmjqXmlLbmlrkgVXNlcklEIOaXoOaViOaIluS4jeWtmOWcqO+8jOivt+ajgOafpSBVc2VySUQg5piv5ZCm5bey5a+85YWl5Y2z5pe26YCa5L+hIElN44CCXCIsMjAwMDQ6XCLnvZHnu5zlvILluLjvvIzor7fph43or5XjgIJcIiwyMDAwNTpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiKSwyMDAwNjpcIuinpuWPkeWPkemAgVwiLmNvbmNhdChcIuWNleiBiua2iOaBr1wiLFwi5LmL5YmN5Zue6LCD77yMQXBwIOWQjuWPsOi/lOWbnuemgeatouS4i+WPkeivpea2iOaBr+OAglwiKSwyMDAwNzpcIuWPkemAgVwiLmNvbmNhdChcIuWNleiBiua2iOaBr1wiLFwi77yM6KKr5a+55pa55ouJ6buR77yM56aB5q2i5Y+R6YCB44CC5raI5oGv5Y+R6YCB54q25oCB6buY6K6k5bGV56S65Li65aSx6LSl77yM5oKo5Y+v5Lul55m75b2V5o6n5Yi25Y+w5L+u5pS56K+l5Zy65pmv5LiL55qE5raI5oGv5Y+R6YCB54q25oCB5bGV56S657uT5p6c77yM5YW35L2T5pON5L2c6K+35Y+C6KeB5raI5oGv5L+d55WZ6K6+572uKFwiKS5jb25jYXQoZW0sXCIyNjkvMzg2NTYp44CCXCIpLDIwMDA5Olwi5raI5oGv5Y+R6YCB5Y+M5pa55LqS55u45LiN5piv5aW95Y+L77yM56aB5q2i5Y+R6YCB77yI6YWN572uXCIuY29uY2F0KFwi5Y2V6IGK5raI5oGvXCIsXCLmoKHpqozlpb3lj4vlhbPns7vmiY3kvJrlh7rnjrDvvInjgIJcIiksMjAwMTA6XCLlj5HpgIFcIi5jb25jYXQoXCLljZXogYrmtojmga9cIixcIu+8jOiHquW3seS4jeaYr+WvueaWueeahOWlveWPi++8iOWNleWQkeWFs+ezu++8ie+8jOemgeatouWPkemAgeOAglwiKSwyMDAxMTpcIuWPkemAgVwiLmNvbmNhdChcIuWNleiBiua2iOaBr1wiLFwi77yM5a+55pa55LiN5piv6Ieq5bex55qE5aW95Y+L77yI5Y2V5ZCR5YWz57O777yJ77yM56aB5q2i5Y+R6YCB44CCXCIpLDIwMDEyOlwi5Y+R6YCB5pa56KKr56aB6KiA77yM6K+l5p2h5raI5oGv6KKr56aB5q2i5Y+R6YCB44CCXCIsMjAwMTY6XCLmtojmga/mkqTlm57otoXov4fkuobml7bpl7TpmZDliLbvvIjpu5jorqQy5YiG6ZKf77yJ44CCXCIsMjAwMTg6XCLliKDpmaTmvKvmuLjlhoXpg6jplJnor6/jgIJcIiw5MDAwMTpcIkpTT04g5qC85byP6Kej5p6Q5aSx6LSl77yM6K+35qOA5p+l6K+35rGC5YyF5piv5ZCm56ym5ZCIIEpTT04g6KeE6IyD44CCXCIsOTAwMDI6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5LitIE1zZ0JvZHkg5LiN56ym5ZCI5raI5oGv5qC85byP5o+P6L+w77yM5oiW6ICFIE1zZ0JvZHkg5LiN5pivIEFycmF5IOexu+Wei++8jOivt+WPguiAgyBUSU1Nc2dFbGVtZW50IOWvueixoeeahOWumuS5iShcIikuY29uY2F0KGVtLFwiMjY5LzI3MjBcIikuY29uY2F0KG9tLFwiKeOAglwiKSw5MDAwMzpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK3nvLrlsJEgVG9fQWNjb3VudCDlrZfmrrXmiJbogIUgVG9fQWNjb3VudCDluJDlj7fkuI3lrZjlnKjjgIJcIiksOTAwMDU6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5Lit57y65bCRIE1zZ1JhbmRvbSDlrZfmrrXmiJbogIUgTXNnUmFuZG9tIOWtl+auteS4jeaYryBJbnRlZ2VyIOexu+Wei+OAglwiKSw5MDAwNjpcIlwiLmNvbmNhdChcIkpTT04g5qC85byP6K+35rGC5YyF5L2TXCIsXCLkuK3nvLrlsJEgTXNnVGltZVN0YW1wIOWtl+auteaIluiAhSBNc2dUaW1lU3RhbXAg5a2X5q615LiN5pivIEludGVnZXIg57G75Z6L44CCXCIpLDkwMDA3OlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4rSBNc2dCb2R5IOexu+Wei+S4jeaYryBBcnJheSDnsbvlnovvvIzor7flsIblhbbkv67mlLnkuLogQXJyYXkg57G75Z6L44CCXCIpLDkwMDA4OlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4ree8uuWwkSBGcm9tX0FjY291bnQg5a2X5q615oiW6ICFIEZyb21fQWNjb3VudCDluJDlj7fkuI3lrZjlnKjjgIJcIiksOTAwMDk6XCLor7fmsYLpnIDopoEgQXBwIOeuoeeQhuWRmOadg+mZkOOAglwiLDkwMDEwOlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4jeespuWQiOa2iOaBr+agvOW8j+aPj+i/sO+8jOivt+WPguiAgyBUSU1Nc2dFbGVtZW50IOWvueixoeeahOWumuS5iShcIikuY29uY2F0KGVtLFwiMjY5LzI3MjBcIikuY29uY2F0KG9tLFwiKeOAglwiKSw5MDAxMTpcIuaJuemHj+WPkea2iOaBr+ebruagh+W4kOWPt+i2hei/hzUwMO+8jOivt+WHj+WwkSBUb19BY2NvdW50IOS4reebruagh+W4kOWPt+aVsOmHj+OAglwiLDkwMDEyOlwiVG9fQWNjb3VudCDmsqHmnInms6jlhozmiJbkuI3lrZjlnKjvvIzor7fnoa7orqQgVG9fQWNjb3VudCDmmK/lkKblr7zlhaXljbPml7bpgJrkv6EgSU0g5oiW6ICF5piv5ZCm5ou85YaZ6ZSZ6K+v44CCXCIsOTAwMjY6XCLmtojmga/nprvnur/lrZjlgqjml7bpl7TplJnor6/vvIjmnIDlpJrkuI3og73otoXov4c35aSp77yJ44CCXCIsOTAwMzE6XCJcIi5jb25jYXQoXCJKU09OIOagvOW8j+ivt+axguWMheS9k1wiLFwi5LitIFN5bmNPdGhlck1hY2hpbmUg5a2X5q615LiN5pivIEludGVnZXIg57G75Z6L44CCXCIpLDkwMDQ0OlwiXCIuY29uY2F0KFwiSlNPTiDmoLzlvI/or7fmsYLljIXkvZNcIixcIuS4rSBNc2dMaWZlVGltZSDlrZfmrrXkuI3mmK8gSW50ZWdlciDnsbvlnovjgIJcIiksOTAwNDg6XCLor7fmsYLnmoTnlKjmiLfluJDlj7fkuI3lrZjlnKjjgIJcIiw5MDA1NDpcIuaSpOWbnuivt+axguS4reeahCBNc2dLZXkg5LiN5ZCI5rOV44CCXCIsOTA5OTQ6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jplJnor6/vvIzor7fph43or5XjgIJcIiksOTA5OTU6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jplJnor6/vvIzor7fph43or5XjgIJcIiksOTFlMzpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiKSw5MDk5MjpcIlwiLmNvbmNhdChcIuacjeWKoeerr+WGhemDqOmUmeivr++8jOivt+mHjeivleOAglwiLFwi5aaC5p6c5omA5pyJ6K+35rGC6YO96L+U5Zue6K+l6ZSZ6K+v56CB77yM5LiUIEFwcCDphY3nva7kuobnrKzkuInmlrnlm57osIPvvIzor7fmo4Dmn6UgQXBwIOacjeWKoeerr+aYr+WQpuato+W4uOWQkeWNs+aXtumAmuS/oSBJTSDlkI7lj7DmnI3liqHnq6/ov5Tlm57lm57osIPnu5PmnpzjgIJcIiksOTNlMzpcIkpTT04g5pWw5o2u5YyF6LaF6ZW/77yM5raI5oGv5YyF5L2T6K+35LiN6KaB6LaF6L+HOGvjgIJcIiw5MTEwMTpcIldlYiDnq6/plb/ova7or6LooqvouKLvvIhXZWIg56uv5ZCM5pe25Zyo57q/5a6e5L6L5Liq5pWw6LaF5Ye66ZmQ5Yi277yJ44CCXCIsMTAwMDI6XCJcIi5jb25jYXQoXCLmnI3liqHnq6/lhoXpg6jplJnor6/vvIzor7fph43or5XjgIJcIiksMTAwMDM6XCLor7fmsYLkuK3nmoTmjqXlj6PlkI3np7DplJnor6/vvIzor7fmoLjlr7nmjqXlj6PlkI3np7Dlubbph43or5XjgIJcIiwxMDAwNDpcIuWPguaVsOmdnuazle+8jOivt+agueaNrumUmeivr+aPj+i/sOajgOafpeivt+axguaYr+WQpuato+ehruOAglwiLDEwMDA1Olwi6K+35rGC5YyF5L2T5Lit5pC65bim55qE5biQ5Y+35pWw6YeP6L+H5aSa44CCXCIsMTAwMDY6XCLmk43kvZzpopHnjofpmZDliLbvvIzor7flsJ3or5XpmY3kvY7osIPnlKjnmoTpopHnjofjgIJcIiwxMDAwNzpcIuaTjeS9nOadg+mZkOS4jei2s++8jOS+i+WmgiBXb3JrIFwiLmNvbmNhdChcIue+pOe7hFwiLFwi5Lit5pmu6YCa5oiQ5ZGY5bCd6K+V5omn6KGM6Lii5Lq65pON5L2c77yM5L2G5Y+q5pyJIEFwcCDnrqHnkIblkZjmiY3mnInmnYPpmZDjgIJcIiksMTAwMDg6XCLor7fmsYLpnZ7ms5XvvIzlj6/og73mmK/or7fmsYLkuK3mkLrluKbnmoTnrb7lkI3kv6Hmga/pqozor4HkuI3mraPnoa7vvIzor7flho3mrKHlsJ3or5XjgIJcIiwxMDAwOTpcIuivpee+pOS4jeWFgeiuuOe+pOS4u+S4u+WKqOmAgOWHuuOAglwiLDEwMDEwOlwiXCIuY29uY2F0KFwi576k57uEXCIsXCLkuI3lrZjlnKjvvIzmiJbogIXmm77nu4/lrZjlnKjov4fvvIzkvYbmmK/nm67liY3lt7Lnu4/ooqvop6PmlaPjgIJcIiksMTAwMTE6XCLop6PmnpAgSlNPTiDljIXkvZPlpLHotKXvvIzor7fmo4Dmn6XljIXkvZPnmoTmoLzlvI/mmK/lkKbnrKblkIggSlNPTiDmoLzlvI/jgIJcIiwxMDAxMjpcIuWPkei1t+aTjeS9nOeahCBVc2VySUQg6Z2e5rOV77yM6K+35qOA5p+l5Y+R6LW35pON5L2c55qE55So5oi3IFVzZXJJRCDmmK/lkKbloavlhpnmraPnoa7jgIJcIiwxMDAxMzpcIuiiq+mCgOivt+WKoOWFpeeahOeUqOaIt+W3sue7j+aYr+e+pOaIkOWRmOOAglwiLDEwMDE0Olwi576k5bey5ruh5ZGY77yM5peg5rOV5bCG6K+35rGC5Lit55qE55So5oi35Yqg5YWlXCIuY29uY2F0KFwi576k57uEXCIsXCLvvIzlpoLmnpzmmK/mibnph4/liqDkurrvvIzlj6/ku6XlsJ3or5Xlh4/lsJHliqDlhaXnlKjmiLfnmoTmlbDph4/jgIJcIiksMTAwMTU6XCLmib7kuI3liLDmjIflrpogSUQg55qEXCIuY29uY2F0KFwi576k57uEXCIsXCLjgIJcIiksMTAwMTY6XCJBcHAg5ZCO5Y+w6YCa6L+H56ys5LiJ5pa55Zue6LCD5ouS57ud5pys5qyh5pON5L2c44CCXCIsMTAwMTc6XCLlm6DooqvnpoHoqIDogIzkuI3og73lj5HpgIHmtojmga/vvIzor7fmo4Dmn6Xlj5HpgIHogIXmmK/lkKbooqvorr7nva7npoHoqIDjgIJcIiwxMDAxODpcIuW6lOetlOWMhemVv+W6pui2hei/h+acgOWkp+WMhemVv++8iDFNQu+8ie+8jOivt+axgueahOWGheWuuei/h+Wkmu+8jOivt+WwneivleWHj+WwkeWNleasoeivt+axgueahOaVsOaNrumHj+OAglwiLDEwMDE5Olwi6K+35rGC55qE55So5oi35biQ5Y+35LiN5a2Y5Zyo44CCXCIsMTAwMjE6XCJcIi5jb25jYXQoXCLnvqTnu4RcIixcIiBJRCDlt7Looqvkvb/nlKjvvIzor7fpgInmi6nlhbbku5bnmoRcIikuY29uY2F0KFwi576k57uEXCIsXCIgSUTjgIJcIiksMTAwMjM6XCLlj5Hmtojmga/nmoTpopHnjofotoXpmZDvvIzor7flu7bplb/kuKTmrKHlj5Hmtojmga/ml7bpl7TnmoTpl7TpmpTjgIJcIiwxMDAyNDpcIuatpOmCgOivt+aIluiAheeUs+ivt+ivt+axguW3sue7j+iiq+WkhOeQhuOAglwiLDEwMDI1OlwiXCIuY29uY2F0KFwi576k57uEXCIsXCIgSUQg5bey6KKr5L2/55So77yM5bm25LiU5pON5L2c6ICF5Li6576k5Li777yM5Y+v5Lul55u05o6l5L2/55So44CCXCIpLDEwMDI2Olwi6K+lIFNES0FwcElEIOivt+axgueahOWRveS7pOWtl+W3suiiq+emgeeUqOOAglwiLDEwMDMwOlwi6K+35rGC5pKk5Zue55qE5raI5oGv5LiN5a2Y5Zyo44CCXCIsMTAwMzE6XCLmtojmga/mkqTlm57otoXov4fkuobml7bpl7TpmZDliLbvvIjpu5jorqQy5YiG6ZKf77yJ44CCXCIsMTAwMzI6XCLor7fmsYLmkqTlm57nmoTmtojmga/kuI3mlK/mjIHmkqTlm57mk43kvZzjgIJcIiwxMDAzMzpcIlwiLmNvbmNhdChcIue+pOe7hFwiLFwi57G75Z6L5LiN5pSv5oyB5raI5oGv5pKk5Zue5pON5L2c44CCXCIpLDEwMDM0Olwi6K+l5raI5oGv57G75Z6L5LiN5pSv5oyB5Yig6Zmk5pON5L2c44CCXCIsMTAwMzU6XCLnm7Tmkq3nvqTlkozlnKjnur/miJDlkZjlub/mkq3lpKfnvqTkuI3mlK/mjIHliKDpmaTmtojmga/jgIJcIiwxMDAzNjpcIuebtOaSree+pOWIm+W7uuaVsOmHj+i2hei/h+S6humZkOWItu+8jOivt+WPguiAg+S7t+agvOivtOaYjihcIi5jb25jYXQoZW0sXCIyNjkvMTE2NzMp6LSt5Lmw6aKE5LuY6LS55aWX6aSQ4oCcSU3nm7Tmkq3nvqTigJ3jgIJcIiksMTAwMzc6XCLljZXkuKrnlKjmiLflj6/liJvlu7rlkozliqDlhaXnmoRcIi5jb25jYXQoXCLnvqTnu4RcIixcIuaVsOmHj+i2hei/h+S6humZkOWItu+8jOivt+WPguiAg+S7t+agvOivtOaYjihcIikuY29uY2F0KGVtLFwiMjY5LzExNjczKei0reS5sOaIluWNh+e6p+mihOS7mOi0ueWll+mkkOKAnOWNleS6uuWPr+WIm+W7uuS4juWKoOWFpVwiKS5jb25jYXQoXCLnvqTnu4RcIixcIuaVsOKAneOAglwiKSwxMDAzODpcIue+pOaIkOWRmOaVsOmHj+i2hei/h+mZkOWItu+8jOivt+WPguiAg+S7t+agvOivtOaYjihcIi5jb25jYXQoZW0sXCIyNjkvMTE2NzMp6LSt5Lmw5oiW5Y2H57qn6aKE5LuY6LS55aWX6aSQ4oCc5omp5bGV576k5Lq65pWw5LiK6ZmQ4oCd44CCXCIpLDEwMDQxOlwi6K+l5bqU55So77yIU0RLQXBwSUTvvInlt7LphY3nva7kuI3mlK/mjIHnvqTmtojmga/mkqTlm57jgIJcIiwxMDA1MDpcIue+pOWxnuaApyBrZXkg5LiN5a2Y5ZyoXCIsMTAwNTY6XCLor7flnKjlhpnlhaXnvqTlsZ7mgKfliY3lhYjkvb/nlKggZ2V0R3JvdXBBdHRyaWJ1dGVzIOaOpeWPo+abtOaWsOacrOWcsOe+pOWxnuaAp++8jOmBv+WFjeWGsueqgeOAglwiLDMwMDAxOlwi6K+35rGC5Y+C5pWw6ZSZ6K+v77yM6K+35qC55o2u6ZSZ6K+v5o+P6L+w5qOA5p+l6K+35rGC5Y+C5pWwXCIsMzAwMDI6XCJTREtBcHBJRCDkuI3ljLnphY1cIiwzMDAwMzpcIuivt+axgueahOeUqOaIt+W4kOWPt+S4jeWtmOWcqFwiLDMwMDA0Olwi6K+35rGC6ZyA6KaBIEFwcCDnrqHnkIblkZjmnYPpmZBcIiwzMDAwNTpcIuWFs+ezu+mTvuWtl+auteS4reWMheWQq+aVj+aEn+ivjVwiLDMwMDA2OlwiXCIuY29uY2F0KFwi5pyN5Yqh56uv5YaF6YOo6ZSZ6K+v77yM6K+36YeN6K+V44CCXCIpLDMwMDA3OlwiXCIuY29uY2F0KFwi572R57uc6LaF5pe277yM6K+356iN5ZCO6YeN6K+VLiBcIiksMzAwMDg6XCLlubblj5Hlhpnlr7zoh7TlhpnlhrLnqoHvvIzlu7rorq7kvb/nlKjmibnph4/mlrnlvI9cIiwzMDAwOTpcIuWQjuWPsOemgeatouivpeeUqOaIt+WPkei1t+WKoOWlveWPi+ivt+axglwiLDMwMDEwOlwi6Ieq5bex55qE5aW95Y+L5pWw5bey6L6+57O757uf5LiK6ZmQXCIsMzAwMTE6XCLliIbnu4Tlt7Lovr7ns7vnu5/kuIrpmZBcIiwzMDAxMjpcIuacquWGs+aVsOW3sui+vuezu+e7n+S4iumZkFwiLDMwMDE0Olwi5a+55pa555qE5aW95Y+L5pWw5bey6L6+57O757uf5LiK6ZmQXCIsMzA1MTU6XCLor7fmsYLmt7vliqDlpb3lj4vml7bvvIzlr7nmlrnlnKjoh6rlt7HnmoTpu5HlkI3ljZXkuK3vvIzkuI3lhYHorrjliqDlpb3lj4tcIiwzMDUxNjpcIuivt+axgua3u+WKoOWlveWPi+aXtu+8jOWvueaWueeahOWKoOWlveWPi+mqjOivgeaWueW8j+aYr+S4jeWFgeiuuOS7u+S9leS6uua3u+WKoOiHquW3seS4uuWlveWPi1wiLDMwNTI1Olwi6K+35rGC5re75Yqg5aW95Y+L5pe277yM6Ieq5bex5Zyo5a+55pa555qE6buR5ZCN5Y2V5Lit77yM5LiN5YWB6K645Yqg5aW95Y+LXCIsMzA1Mzk6XCLnrYnlvoXlr7nmlrnlkIzmhI9cIiwzMDU0MDpcIua3u+WKoOWlveWPi+ivt+axguiiq+WuieWFqOetlueVpeaJk+WHu++8jOivt+WLv+mikee5geWPkei1t+a3u+WKoOWlveWPi+ivt+axglwiLDMxNzA0Olwi5LiO6K+35rGC5Yig6Zmk55qE5biQ5Y+35LmL6Ze05LiN5a2Y5Zyo5aW95Y+L5YWz57O7XCIsMzE3MDc6XCLliKDpmaTlpb3lj4vor7fmsYLooqvlronlhajnrZbnlaXmiZPlh7vvvIzor7fli7/popHnuYHlj5HotbfliKDpmaTlpb3lj4vor7fmsYJcIn0sYW09ZnVuY3Rpb24oZSl7aShuLGUpO3ZhciB0PV8obik7ZnVuY3Rpb24gbihlKXt2YXIgcjtyZXR1cm4gbyh0aGlzLG4pLChyPXQuY2FsbCh0aGlzKSkuY29kZT1lLmNvZGUsci5tZXNzYWdlPXJtW2UuY29kZV18fGUubWVzc2FnZSxyLmRhdGE9ZS5kYXRhfHx7fSxyfXJldHVybiBufShkKEVycm9yKSksc209bnVsbCxpbT1mdW5jdGlvbihlKXtzbT1lfSx1bT1mdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFpfKGUpKX0sY209ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXTtpZihlIGluc3RhbmNlb2YgYW0pcmV0dXJuIHQmJm51bGwhPT1zbSYmc20uZW1pdChvby5FUlJPUixlKSxQcm9taXNlLnJlamVjdChlKTtpZihlIGluc3RhbmNlb2YgRXJyb3Ipe3ZhciBuPW5ldyBhbSh7Y29kZTpUcC5VTkNBVUdIVF9FUlJPUixtZXNzYWdlOmUubWVzc2FnZX0pO3JldHVybiB0JiZudWxsIT09c20mJnNtLmVtaXQob28uRVJST1IsbiksUHJvbWlzZS5yZWplY3Qobil9aWYoSmkoZSl8fEppKGUuY29kZSl8fEppKGUubWVzc2FnZSkpS2kuZXJyb3IoXCJJTVByb21pc2UucmVqZWN0IOW/hemhu+aMh+WummNvZGUo6ZSZ6K+v56CBKeWSjG1lc3NhZ2Uo6ZSZ6K+v5L+h5oGvKSEhIVwiKTtlbHNle2lmKGppKGUuY29kZSkmJiRpKGUubWVzc2FnZSkpe3ZhciBvPW5ldyBhbShlKTtyZXR1cm4gdCYmbnVsbCE9PXNtJiZzbS5lbWl0KG9vLkVSUk9SLG8pLFByb21pc2UucmVqZWN0KG8pfUtpLmVycm9yKFwiSU1Qcm9taXNlLnJlamVjdCBjb2RlKOmUmeivr+eggSnlv4XpobvkuLrmlbDlrZfvvIxtZXNzYWdlKOmUmeivr+S/oeaBrynlv4XpobvkuLrlrZfnrKbkuLIhISFcIil9fSxsbT1mdW5jdGlvbihlKXtpKG4sZSk7dmFyIHQ9XyhuKTtmdW5jdGlvbiBuKGUpe3ZhciByO3JldHVybiBvKHRoaXMsbiksKHI9dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJDMkNNb2R1bGVcIixyfXJldHVybiBhKG4sW3trZXk6XCJvbk5ld0MyQ01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGFMaXN0LG49ZS5pc0luc3RhbnRNZXNzYWdlLG89ZS5DMkNSZW1haW5pbmdVbnJlYWRMaXN0O0tpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk5ld0MyQ01lc3NhZ2UgY291bnQ6XCIpLmNvbmNhdCh0Lmxlbmd0aCxcIiBpc0luc3RhbnRNZXNzYWdlOlwiKS5jb25jYXQobikpO3ZhciByPXRoaXMuX25ld0MyQ01lc3NhZ2VTdG9yZWRBbmRTdW1tYXJ5KHtkYXRhTGlzdDp0LEMyQ1JlbWFpbmluZ1VucmVhZExpc3Q6byxpc0luc3RhbnRNZXNzYWdlOm59KSxhPXIuY29udmVyc2F0aW9uT3B0aW9uc0xpc3Qscz1yLm1lc3NhZ2VMaXN0Oyh0aGlzLmZpbHRlck1vZGlmaWVkTWVzc2FnZShzKSxhLmxlbmd0aD4wKSYmdGhpcy5nZXRNb2R1bGUoSmMpLm9uTmV3TWVzc2FnZSh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6YSxpc0luc3RhbnRNZXNzYWdlOm59KTt2YXIgaT10aGlzLmZpbHRlclVubW9kaWZpZWRNZXNzYWdlKHMpO24mJmkubGVuZ3RoPjAmJnRoaXMuZW1pdE91dGVyRXZlbnQob28uTUVTU0FHRV9SRUNFSVZFRCxpKSxzLmxlbmd0aD0wfX0se2tleTpcIl9uZXdDMkNNZXNzYWdlU3RvcmVkQW5kU3VtbWFyeVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmRhdGFMaXN0LG49ZS5DMkNSZW1haW5pbmdVbnJlYWRMaXN0LG89ZS5pc0luc3RhbnRNZXNzYWdlLHI9bnVsbCxhPVtdLHM9W10saT17fSx1PXRoaXMuZ2V0TW9kdWxlKHRsKSxjPTAsbD10Lmxlbmd0aDtjPGw7YysrKXt2YXIgcD10W2NdO3AuY3VycmVudFVzZXI9dGhpcy5nZXRNeVVzZXJJRCgpLHAuY29udmVyc2F0aW9uVHlwZT1yby5DT05WX0MyQyxwLmlzU3lzdGVtTWVzc2FnZT0hIXAuaXNTeXN0ZW1NZXNzYWdlLHI9bmV3IFFfKHApLHAuZWxlbWVudHM9dS5wYXJzZUVsZW1lbnRzKHAuZWxlbWVudHMscC5mcm9tKSxyLnNldEVsZW1lbnQocC5lbGVtZW50cyksci5zZXROaWNrQW5kQXZhdGFyKHtuaWNrOnAubmljayxhdmF0YXI6cC5hdmF0YXJ9KTt2YXIgZD1yLmNvbnZlcnNhdGlvbklEO2lmKG8pe3ZhciBnPSExLGg9dGhpcy5nZXRNb2R1bGUoSmMpO2lmKHIuZnJvbSE9PXRoaXMuZ2V0TXlVc2VySUQoKSl7dmFyIGY9aC5nZXRMYXRlc3RNZXNzYWdlU2VudEJ5UGVlcihkKTtpZihmKXt2YXIgXz1mLm5pY2ssbT1mLmF2YXRhcjtfPT09ci5uaWNrJiZtPT09ci5hdmF0YXJ8fChnPSEwKX19ZWxzZXt2YXIgdj1oLmdldExhdGVzdE1lc3NhZ2VTZW50QnlNZShkKTtpZih2KXt2YXIgTT12Lm5pY2sseT12LmF2YXRhcjtNPT09ci5uaWNrJiZ5PT09ci5hdmF0YXJ8fGgubW9kaWZ5TWVzc2FnZVNlbnRCeU1lKHtjb252ZXJzYXRpb25JRDpkLGxhdGVzdE5pY2s6ci5uaWNrLGxhdGVzdEF2YXRhcjpyLmF2YXRhcn0pfX12YXIgST0xPT09dFtjXS5pc01vZGlmaWVkO2lmKGguaXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlKHIpP3IuaXNNb2RpZmllZD1JOkk9ITEsMD09PXAubXNnTGlmZVRpbWUpci5zZXRPbmxpbmVPbmx5RmxhZyghMCkscy5wdXNoKHIpO2Vsc2V7aWYoIWgucHVzaEludG9NZXNzYWdlTGlzdChzLHIsSSkpY29udGludWU7ZyYmKGgubW9kaWZ5TWVzc2FnZVNlbnRCeVBlZXIoZCksaC51cGRhdGVVc2VyUHJvZmlsZVNwZWNpZmllZEtleSh7Y29udmVyc2F0aW9uSUQ6ZCxuaWNrOnIubmljayxhdmF0YXI6ci5hdmF0YXJ9KSl9dGhpcy5nZXRNb2R1bGUobGwpLmFkZE1lc3NhZ2VEZWxheSh7Y3VycmVudFRpbWU6RGF0ZS5ub3coKSx0aW1lOnIudGltZX0pfWlmKDAhPT1wLm1zZ0xpZmVUaW1lKXtpZighMT09PXIuZ2V0T25saW5lT25seUZsYWcoKSlpZihKaShpW2RdKSlpW2RdPWEucHVzaCh7Y29udmVyc2F0aW9uSUQ6ZCx1bnJlYWRDb3VudDpcIm91dFwiPT09ci5mbG93PzA6MSx0eXBlOnIuY29udmVyc2F0aW9uVHlwZSxzdWJUeXBlOnIuY29udmVyc2F0aW9uU3ViVHlwZSxsYXN0TWVzc2FnZTpyfSktMTtlbHNle3ZhciBUPWlbZF07YVtUXS50eXBlPXIuY29udmVyc2F0aW9uVHlwZSxhW1RdLnN1YlR5cGU9ci5jb252ZXJzYXRpb25TdWJUeXBlLGFbVF0ubGFzdE1lc3NhZ2U9cixcImluXCI9PT1yLmZsb3cmJmFbVF0udW5yZWFkQ291bnQrK319ZWxzZSByLnNldE9ubGluZU9ubHlGbGFnKCEwKX1pZihXaShuKSlmb3IodmFyIFM9ZnVuY3Rpb24oZSx0KXt2YXIgbz1hLmZpbmQoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnZlcnNhdGlvbklEPT09XCJDMkNcIi5jb25jYXQobltlXS5mcm9tKX0pKTtvP28udW5yZWFkQ291bnQrPW5bZV0uY291bnQ6YS5wdXNoKHtjb252ZXJzYXRpb25JRDpcIkMyQ1wiLmNvbmNhdChuW2VdLmZyb20pLHVucmVhZENvdW50Om5bZV0uY291bnQsdHlwZTpyby5DT05WX0MyQyxsYXN0TXNnVGltZTpuW2VdLmxhc3RNc2dUaW1lfSl9LEQ9MCxFPW4ubGVuZ3RoO0Q8RTtEKyspUyhEKTtyZXR1cm57Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6YSxtZXNzYWdlTGlzdDpzfX19LHtrZXk6XCJvbkMyQ01lc3NhZ2VSZXZva2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25DMkNNZXNzYWdlUmV2b2tlZCBjb3VudDpcIikuY29uY2F0KGUuZGF0YUxpc3QubGVuZ3RoKSk7dmFyIG49dGhpcy5nZXRNb2R1bGUoSmMpLG89W10scj1udWxsO2UuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZS5jMmNNZXNzYWdlUmV2b2tlZE5vdGlmeSl7dmFyIGE9ZS5jMmNNZXNzYWdlUmV2b2tlZE5vdGlmeS5yZXZva2VkSW5mb3M7SmkoYSl8fGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIGE9dC5nZXRNeVVzZXJJRCgpPT09ZS5mcm9tP1wiXCIuY29uY2F0KHJvLkNPTlZfQzJDKS5jb25jYXQoZS50byk6XCJcIi5jb25jYXQocm8uQ09OVl9DMkMpLmNvbmNhdChlLmZyb20pOyhyPW4ucmV2b2tlKGEsZS5zZXF1ZW5jZSxlLnJhbmRvbSkpJiZvLnB1c2gocil9KSl9fSkpLDAhPT1vLmxlbmd0aCYmKG4ub25NZXNzYWdlUmV2b2tlZChvKSx0aGlzLmVtaXRPdXRlckV2ZW50KG9vLk1FU1NBR0VfUkVWT0tFRCxvKSl9fSx7a2V5Olwib25DMkNNZXNzYWdlUmVhZFJlY2VpcHRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoIUx1KGUuYzJjTWVzc2FnZVJlYWRSZWNlaXB0KSl7dmFyIG49ZS5jMmNNZXNzYWdlUmVhZFJlY2VpcHQudG87ZS5jMmNNZXNzYWdlUmVhZFJlY2VpcHQudWluUGFpclJlYWRBcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1lLnBlZXJSZWFkVGltZTtLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuX29uQzJDTWVzc2FnZVJlYWRSZWNlaXB0IHRvOlwiKS5jb25jYXQobixcIiBwZWVyUmVhZFRpbWU6XCIpLmNvbmNhdChvKSk7dmFyIHI9XCJcIi5jb25jYXQocm8uQ09OVl9DMkMpLmNvbmNhdChuKSxhPXQuZ2V0TW9kdWxlKEpjKTthLnJlY29yZFBlZXJSZWFkVGltZShyLG8pLGEudXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eShyLG8pfSkpfX0pKX19LHtrZXk6XCJvbkMyQ01lc3NhZ2VSZWFkTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmRhdGFMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKCFMdShlLmMyY01lc3NhZ2VSZWFkTm90aWNlKSl7dmFyIG49dC5nZXRNb2R1bGUoSmMpO2UuYzJjTWVzc2FnZVJlYWROb3RpY2UudWluUGFpclJlYWRBcnJheS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1lLmZyb20scj1lLnBlZXJSZWFkVGltZTtLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIub25DMkNNZXNzYWdlUmVhZE5vdGljZSBmcm9tOlwiKS5jb25jYXQobyxcIiBsYXN0UmVhZFRpbWU6XCIpLmNvbmNhdChyKSk7dmFyIGE9XCJcIi5jb25jYXQocm8uQ09OVl9DMkMpLmNvbmNhdChvKTtuLnVwZGF0ZUlzUmVhZEFmdGVyUmVhZFJlcG9ydCh7Y29udmVyc2F0aW9uSUQ6YSxsYXN0TWVzc2FnZVRpbWU6cn0pLG4udXBkYXRlVW5yZWFkQ291bnQoYSl9KSl9fSkpfX0se2tleTpcInNlbmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9jcmVhdGVDMkNNZXNzYWdlUGFjayhlLHQpO3JldHVybiB0aGlzLnJlcXVlc3Qobil9fSx7a2V5OlwiX2NyZWF0ZUMyQ01lc3NhZ2VQYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1udWxsO3QmJih0Lm9mZmxpbmVQdXNoSW5mbyYmKG49dC5vZmZsaW5lUHVzaEluZm8pLCEwPT09dC5vbmxpbmVVc2VyT25seSYmKG4/bi5kaXNhYmxlUHVzaD0hMDpuPXtkaXNhYmxlUHVzaDohMH0pKTt2YXIgbz1cIlwiO3JldHVybiAkaShlLmNsb3VkQ3VzdG9tRGF0YSkmJmUuY2xvdWRDdXN0b21EYXRhLmxlbmd0aD4wJiYobz1lLmNsb3VkQ3VzdG9tRGF0YSkse3Byb3RvY29sTmFtZTptbCx0amdJRDp0aGlzLmdlbmVyYXRlVGpnSUQoZSkscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSx0b0FjY291bnQ6ZS50byxtc2dUaW1lU3RhbXA6TWF0aC5jZWlsKERhdGUubm93KCkvMWUzKSxtc2dCb2R5OmUuZ2V0RWxlbWVudHMoKSxjbG91ZEN1c3RvbURhdGE6byxtc2dTZXE6ZS5zZXF1ZW5jZSxtc2dSYW5kb206ZS5yYW5kb20sbXNnTGlmZVRpbWU6dGhpcy5pc09ubGluZU1lc3NhZ2UoZSx0KT8wOnZvaWQgMCxuaWNrOmUubmljayxhdmF0YXI6ZS5hdmF0YXIsb2ZmbGluZVB1c2hJbmZvOm4/e3B1c2hGbGFnOiEwPT09bi5kaXNhYmxlUHVzaD8xOjAsdGl0bGU6bi50aXRsZXx8XCJcIixkZXNjOm4uZGVzY3JpcHRpb258fFwiXCIsZXh0Om4uZXh0ZW5zaW9ufHxcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6ITA9PT1uLmlnbm9yZUlPU0JhZGdlPzE6MH0sYW5kcm9pZEluZm86e09QUE9DaGFubmVsSUQ6bi5hbmRyb2lkT1BQT0NoYW5uZWxJRHx8XCJcIn19OnZvaWQgMH19fX0se2tleTpcImlzT25saW5lTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISghdHx8ITAhPT10Lm9ubGluZVVzZXJPbmx5KX19LHtrZXk6XCJyZXZva2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkRsLHJlcXVlc3REYXRhOnttc2dJbmZvOntmcm9tQWNjb3VudDplLmZyb20sdG9BY2NvdW50OmUudG8sbXNnU2VxOmUuc2VxdWVuY2UsbXNnUmFuZG9tOmUucmFuZG9tLG1zZ1RpbWVTdGFtcDplLnRpbWV9fX0pfX0se2tleTpcImRlbGV0ZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnRvLG49ZS5rZXlMaXN0O3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZU1lc3NhZ2UgdG9BY2NvdW50OlwiKS5jb25jYXQodCxcIiBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6a2wscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSx0bzp0LGtleUxpc3Q6bn19KX19LHtrZXk6XCJzZXRNZXNzYWdlUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvbnZlcnNhdGlvbklELG89ZS5sYXN0TWVzc2FnZVRpbWUscj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0TWVzc2FnZVJlYWRcIik7S2kubG9nKFwiXCIuY29uY2F0KHIsXCIgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChuLFwiIGxhc3RNZXNzYWdlVGltZTpcIikuY29uY2F0KG8pKSxqaShvKXx8S2kud2FybihcIlwiLmNvbmNhdChyLFwiIOivt+WLv+S/ruaUuSBDb252ZXJzYXRpb24ubGFzdE1lc3NhZ2UubGFzdFRpbWXvvIzlkKbliJnlj6/og73kvJrlr7zoh7Tlt7Lor7vkuIrmiqXnu5PmnpzkuI3lh4bnoa5cIikpO3ZhciBhPW5ldyBqZChsZyk7cmV0dXJuIGEuc2V0TWVzc2FnZShcImNvbnZlcnNhdGlvbklEOlwiLmNvbmNhdChuLFwiIGxhc3RNZXNzYWdlVGltZTpcIikuY29uY2F0KG8pKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpFbCxyZXF1ZXN0RGF0YTp7QzJDTXNnUmVhZGVkOntjb29raWU6XCJcIixDMkNNc2dSZWFkZWRJdGVtOlt7dG9BY2NvdW50Om4ucmVwbGFjZShcIkMyQ1wiLFwiXCIpLGxhc3RNZXNzYWdlVGltZTpvLHJlY2VpcHQ6MX1dfX19KS50aGVuKChmdW5jdGlvbigpe2Euc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQocixcIiBva1wiKSk7dmFyIGU9dC5nZXRNb2R1bGUoSmMpO3JldHVybiBlLnVwZGF0ZUlzUmVhZEFmdGVyUmVhZFJlcG9ydCh7Y29udmVyc2F0aW9uSUQ6bixsYXN0TWVzc2FnZVRpbWU6b30pLGUudXBkYXRlVW5yZWFkQ291bnQobiksWl8oKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kubG9nKFwiXCIuY29uY2F0KHIsXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksY20oZSl9KSl9fSx7a2V5OlwiZ2V0Um9hbWluZ01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldFJvYW1pbmdNZXNzYWdlXCIpLG89ZS5wZWVyQWNjb3VudCxyPWUuY29udmVyc2F0aW9uSUQsYT1lLmNvdW50LHM9ZS5sYXN0TWVzc2FnZVRpbWUsaT1lLm1lc3NhZ2VLZXksdT1cInBlZXJBY2NvdW50OlwiLmNvbmNhdChvLFwiIGNvdW50OlwiKS5jb25jYXQoYXx8MTUsXCIgbGFzdE1lc3NhZ2VUaW1lOlwiKS5jb25jYXQoc3x8MCxcIiBtZXNzYWdlS2V5OlwiKS5jb25jYXQoaSk7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgXCIpLmNvbmNhdCh1KSk7dmFyIGM9bmV3IGpkKHNnKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Q2wscmVxdWVzdERhdGE6e3BlZXJBY2NvdW50Om8sY291bnQ6YXx8MTUsbGFzdE1lc3NhZ2VUaW1lOnN8fDAsbWVzc2FnZUtleTppfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZGF0YSxhPW8uY29tcGxldGUscz1vLm1lc3NhZ2VMaXN0LGk9by5tZXNzYWdlS2V5O0ppKHMpP0tpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBjb21wbGV0ZTpcIikuY29uY2F0KGEsXCIgYnV0IG1lc3NhZ2VMaXN0IGlzIHVuZGVmaW5lZCFcIikpOktpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBjb21wbGV0ZTpcIikuY29uY2F0KGEsXCIgY291bnQ6XCIpLmNvbmNhdChzLmxlbmd0aCkpLGMuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KHUsXCIgY29tcGxldGU6XCIpLmNvbmNhdChhLFwiIGxlbmd0aDpcIikuY29uY2F0KHMubGVuZ3RoKSkuZW5kKCk7dmFyIGw9dC5nZXRNb2R1bGUoSmMpOzE9PT1hJiZsLnNldENvbXBsZXRlZChyKTt2YXIgcD1sLnN0b3JlUm9hbWluZ01lc3NhZ2UocyxyKTtsLm1vZGlmeU1lc3NhZ2VMaXN0KHIpLGwudXBkYXRlSXNSZWFkKHIpLGwudXBkYXRlUm9hbWluZ01lc3NhZ2VLZXkocixpKTt2YXIgZD1sLmdldFBlZXJSZWFkVGltZShyKTtpZihLaS5sb2coXCJcIi5jb25jYXQobixcIiB1cGRhdGUgaXNQZWVyUmVhZCBwcm9wZXJ0eS4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChyLFwiIHBlZXJSZWFkVGltZTpcIikuY29uY2F0KGQpKSxkKWwudXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eShyLGQpO2Vsc2V7dmFyIGc9ci5yZXBsYWNlKHJvLkNPTlZfQzJDLFwiXCIpO3QuZ2V0UmVtb3RlUGVlclJlYWRUaW1lKFtnXSkudGhlbigoZnVuY3Rpb24oKXtsLnVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkocixsLmdldFBlZXJSZWFkVGltZShyKSl9KSl9cmV0dXJuIHB9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Muc2V0TWVzc2FnZSh1KS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpfX0se2tleTpcImdldFJlbW90ZVBlZXJSZWFkVGltZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0UmVtb3RlUGVlclJlYWRUaW1lXCIpO2lmKEx1KGUpKXJldHVybiBLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgdXNlcklETGlzdCBpcyBlbXB0eSFcIikpLFByb21pc2UucmVzb2x2ZSgpO3ZhciBvPW5ldyBqZChnZyk7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIHVzZXJJRExpc3Q6XCIpLmNvbmNhdChlKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6QWwscmVxdWVzdERhdGE6e3VzZXJJRExpc3Q6ZX19KS50aGVuKChmdW5jdGlvbihyKXt2YXIgYT1yLmRhdGEucGVlclJlYWRUaW1lTGlzdDtLaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gcGVlclJlYWRUaW1lTGlzdDpcIikuY29uY2F0KGEpKTtmb3IodmFyIHM9XCJcIixpPXQuZ2V0TW9kdWxlKEpjKSx1PTA7dTxlLmxlbmd0aDt1Kyspcys9XCJcIi5jb25jYXQoZVt1XSxcIi1cIikuY29uY2F0KGFbdV0sXCIgXCIpLGFbdV0+MCYmaS5yZWNvcmRQZWVyUmVhZFRpbWUoXCJDMkNcIi5jb25jYXQoZVt1XSksYVt1XSk7by5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UocykuZW5kKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3QucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksS2kud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpfSkpfX1dKSxufShwbCkscG09TWF0aC5mbG9vcixkbT1mdW5jdGlvbihlLHQpe3ZhciBuPWUubGVuZ3RoLG89cG0obi8yKTtyZXR1cm4gbjw4P2dtKGUsdCk6aG0oZG0oZS5zbGljZSgwLG8pLHQpLGRtKGUuc2xpY2UobyksdCksdCl9LGdtPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLG8scj1lLmxlbmd0aCxhPTE7YTxyOyl7Zm9yKG89YSxuPWVbYV07byYmdChlW28tMV0sbik+MDspZVtvXT1lWy0tb107byE9PWErKyYmKGVbb109bil9cmV0dXJuIGV9LGhtPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIG89ZS5sZW5ndGgscj10Lmxlbmd0aCxhPTAscz0wLGk9W107YTxvfHxzPHI7KWE8byYmczxyP2kucHVzaChuKGVbYV0sdFtzXSk8PTA/ZVthKytdOnRbcysrXSk6aS5wdXNoKGE8bz9lW2ErK106dFtzKytdKTtyZXR1cm4gaX0sZm09ZG0sX209JC5tYXRjaCgvZmlyZWZveFxcLyhcXGQrKS9pKSxtbT0hIV9tJiYrX21bMV0sdm09L01TSUV8VHJpZGVudC8udGVzdCgkKSxNbT0kLm1hdGNoKC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8pLHltPSEhTW0mJitNbVsxXSxJbT1bXSxUbT1JbS5zb3J0LFNtPUwoKGZ1bmN0aW9uKCl7SW0uc29ydCh2b2lkIDApfSkpLERtPUwoKGZ1bmN0aW9uKCl7SW0uc29ydChudWxsKX0pKSxFbT16dChcInNvcnRcIiksQ209IUwoKGZ1bmN0aW9uKCl7aWYoWClyZXR1cm4gWDw3MDtpZighKG1tJiZtbT4zKSl7aWYodm0pcmV0dXJuITA7aWYoeW0pcmV0dXJuIHltPDYwMzt2YXIgZSx0LG4sbyxyPVwiXCI7Zm9yKGU9NjU7ZTw3NjtlKyspe3N3aXRjaCh0PVN0cmluZy5mcm9tQ2hhckNvZGUoZSksZSl7Y2FzZSA2NjpjYXNlIDY5OmNhc2UgNzA6Y2FzZSA3MjpuPTM7YnJlYWs7Y2FzZSA2ODpjYXNlIDcxOm49NDticmVhaztkZWZhdWx0Om49Mn1mb3Iobz0wO288NDc7bysrKUltLnB1c2goe2s6dCtvLHY6bn0pfWZvcihJbS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiB0LnYtZS52fSkpLG89MDtvPEltLmxlbmd0aDtvKyspdD1JbVtvXS5rLmNoYXJBdCgwKSxyLmNoYXJBdChyLmxlbmd0aC0xKSE9PXQmJihyKz10KTtyZXR1cm5cIkRHQkVGSEFDSUpLXCIhPT1yfX0pKTt2dCh7dGFyZ2V0OlwiQXJyYXlcIixwcm90bzohMCxmb3JjZWQ6U218fCFEbXx8IUVtfHwhQ219LHtzb3J0OmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUmJnh0KGUpO3ZhciB0PXJlKHRoaXMpO2lmKENtKXJldHVybiB2b2lkIDA9PT1lP1RtLmNhbGwodCk6VG0uY2FsbCh0LGUpO3ZhciBuLG8scj1bXSxhPVdlKHQubGVuZ3RoKTtmb3Iobz0wO288YTtvKyspbyBpbiB0JiZyLnB1c2godFtvXSk7Zm9yKG49KHI9Zm0ocixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXtyZXR1cm4gdm9pZCAwPT09bj8tMTp2b2lkIDA9PT10PzE6dm9pZCAwIT09ZT8rZSh0LG4pfHwwOk10KHQpPk10KG4pPzE6LTF9fShlKSkpLmxlbmd0aCxvPTA7bzxuOyl0W29dPXJbbysrXTtmb3IoO288YTspZGVsZXRlIHRbbysrXTtyZXR1cm4gdH19KTt2YXIgQW09WXQuZmluZEluZGV4LGttPSEwO1wiZmluZEluZGV4XCJpbltdJiZBcnJheSgxKS5maW5kSW5kZXgoKGZ1bmN0aW9uKCl7a209ITF9KSksdnQoe3RhcmdldDpcIkFycmF5XCIscHJvdG86ITAsZm9yY2VkOmttfSx7ZmluZEluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBBbSh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLGNyKFwiZmluZEluZGV4XCIpO3ZhciBObT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMubGlzdD1uZXcgTWFwLHRoaXMuX2NsYXNzTmFtZT1cIk1lc3NhZ2VMaXN0SGFuZGxlclwiLHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlQZWVyTWFwPW5ldyBNYXAsdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeU1lTWFwPW5ldyBNYXAsdGhpcy5fZ3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2VNYXA9bmV3IE1hcH1yZXR1cm4gYShlLFt7a2V5OlwiZ2V0TG9jYWxPbGRlc3RNZXNzYWdlQnlDb252ZXJzYXRpb25JRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiBudWxsO2lmKCF0aGlzLmxpc3QuaGFzKGUpKXJldHVybiBudWxsO3ZhciB0PXRoaXMubGlzdC5nZXQoZSkudmFsdWVzKCk7cmV0dXJuIHQ/dC5uZXh0KCkudmFsdWU6bnVsbH19LHtrZXk6XCJwdXNoSW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLG49ZS5jb252ZXJzYXRpb25JRCxvPWUuSUQscj0hMDt0aGlzLmxpc3QuaGFzKG4pfHx0aGlzLmxpc3Quc2V0KG4sbmV3IE1hcCk7dmFyIGE9dGhpcy5saXN0LmdldChuKS5oYXMobyk7aWYoYSl7dmFyIHM9dGhpcy5saXN0LmdldChuKS5nZXQobyk7aWYoIXR8fCEwPT09cy5pc01vZGlmaWVkKXJldHVybiByPSExfXJldHVybiB0aGlzLmxpc3QuZ2V0KG4pLnNldChvLGUpLHRoaXMuX3NldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyKG4sZSksdGhpcy5fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKG4sZSksdGhpcy5fc2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2UobixlKSxyfX0se2tleTpcInVuc2hpZnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdDtpZihXaShlKSl7aWYoZS5sZW5ndGg+MCl7dD1lWzBdLmNvbnZlcnNhdGlvbklEO3ZhciBuPWUubGVuZ3RoO3RoaXMuX3Vuc2hpZnRNdWx0aXBsZU1lc3NhZ2VzKGUpLHRoaXMuX3NldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlKHQsZVtuLTFdKX19ZWxzZSB0PWUuY29udmVyc2F0aW9uSUQsdGhpcy5fdW5zaGlmdFNpbmdsZU1lc3NhZ2UoZSksdGhpcy5fc2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2UodCxlKTtpZih0JiZ0LnN0YXJ0c1dpdGgocm8uQ09OVl9DMkMpKXt2YXIgbz1BcnJheS5mcm9tKHRoaXMubGlzdC5nZXQodCkudmFsdWVzKCkpLHI9by5sZW5ndGg7aWYoMD09PXIpcmV0dXJuO2Zvcih2YXIgYT1yLTE7YT49MDthLS0paWYoXCJvdXRcIj09PW9bYV0uZmxvdyl7dGhpcy5fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKHQsb1thXSk7YnJlYWt9Zm9yKHZhciBzPXItMTtzPj0wO3MtLSlpZihcImluXCI9PT1vW3NdLmZsb3cpe3RoaXMuX3NldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyKHQsb1tzXSk7YnJlYWt9fX19LHtrZXk6XCJfdW5zaGlmdFNpbmdsZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5JRDtpZighdGhpcy5saXN0Lmhhcyh0KSlyZXR1cm4gdGhpcy5saXN0LnNldCh0LG5ldyBNYXApLHZvaWQgdGhpcy5saXN0LmdldCh0KS5zZXQobixlKTt2YXIgbz1BcnJheS5mcm9tKHRoaXMubGlzdC5nZXQodCkpO28udW5zaGlmdChbbixlXSksdGhpcy5saXN0LnNldCh0LG5ldyBNYXAobykpfX0se2tleTpcIl91bnNoaWZ0TXVsdGlwbGVNZXNzYWdlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxuPVtdLG89ZVswXS5jb252ZXJzYXRpb25JRCxyPXRoaXMubGlzdC5oYXMobyk/QXJyYXkuZnJvbSh0aGlzLmxpc3QuZ2V0KG8pKTpbXSxhPTA7YTx0O2ErKyluLnB1c2goW2VbYV0uSUQsZVthXV0pO3RoaXMubGlzdC5zZXQobyxuZXcgTWFwKG4uY29uY2F0KHIpKSl9fSx7a2V5OlwicmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUuSUQ7dGhpcy5saXN0Lmhhcyh0KSYmdGhpcy5saXN0LmdldCh0KS5kZWxldGUobil9fSx7a2V5OlwicmV2b2tlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe2lmKEtpLmRlYnVnKFwicmV2b2tlIG1lc3NhZ2VcIixlLHQsbiksdGhpcy5saXN0LmhhcyhlKSl7dmFyIG8scj1EKHRoaXMubGlzdC5nZXQoZSkpO3RyeXtmb3Ioci5zKCk7IShvPXIubigpKS5kb25lOyl7dmFyIGE9bShvLnZhbHVlLDIpWzFdO2lmKGEuc2VxdWVuY2U9PT10JiYhYS5pc1Jldm9rZWQmJihKaShuKXx8YS5yYW5kb209PT1uKSlyZXR1cm4gYS5pc1Jldm9rZWQ9ITAsYX19Y2F0Y2gocyl7ci5lKHMpfWZpbmFsbHl7ci5mKCl9fXJldHVybiBudWxsfX0se2tleTpcInJlbW92ZUJ5Q29udmVyc2F0aW9uSURcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmxpc3QuaGFzKGUpJiYodGhpcy5saXN0LmRlbGV0ZShlKSx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5UGVlck1hcC5kZWxldGUoZSksdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeU1lTWFwLmRlbGV0ZShlKSl9fSx7a2V5OlwidXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49W107aWYodGhpcy5saXN0LmhhcyhlKSl7dmFyIG8scj1EKHRoaXMubGlzdC5nZXQoZSkpO3RyeXtmb3Ioci5zKCk7IShvPXIubigpKS5kb25lOyl7dmFyIGE9bShvLnZhbHVlLDIpWzFdO2EudGltZTw9dCYmIWEuaXNQZWVyUmVhZCYmXCJvdXRcIj09PWEuZmxvdyYmKGEuaXNQZWVyUmVhZD0hMCxuLnB1c2goYSkpfX1jYXRjaChzKXtyLmUocyl9ZmluYWxseXtyLmYoKX1LaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIHBlZXJSZWFkVGltZTpcIikuY29uY2F0KHQsXCIgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCkpfXJldHVybiBufX0se2tleTpcInVwZGF0ZU1lc3NhZ2VJc01vZGlmaWVkUHJvcGVydHlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5JRDtpZih0aGlzLmxpc3QuaGFzKHQpKXt2YXIgbz10aGlzLmxpc3QuZ2V0KHQpLmdldChuKTtvJiYoby5pc01vZGlmaWVkPSEwKX19fSx7a2V5OlwiaGFzTG9jYWxNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxpc3QuaGFzKGUpfX0se2tleTpcImdldExvY2FsTWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXNMb2NhbE1lc3NhZ2VMaXN0KGUpP3YodGhpcy5saXN0LmdldChlKS52YWx1ZXMoKSk6W119fSx7a2V5OlwiaGFzTG9jYWxNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIXRoaXMuaGFzTG9jYWxNZXNzYWdlTGlzdChlKSYmdGhpcy5saXN0LmdldChlKS5oYXModCl9fSx7a2V5OlwiZ2V0TG9jYWxNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5oYXNMb2NhbE1lc3NhZ2UoZSx0KT90aGlzLmxpc3QuZ2V0KGUpLmdldCh0KTpudWxsfX0se2tleTpcIl9zZXRMYXRlc3RNZXNzYWdlU2VudEJ5UGVlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZS5zdGFydHNXaXRoKHJvLkNPTlZfQzJDKSYmXCJpblwiPT09dC5mbG93JiZ0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5UGVlck1hcC5zZXQoZSx0KX19LHtrZXk6XCJfc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLnN0YXJ0c1dpdGgocm8uQ09OVl9DMkMpJiZcIm91dFwiPT09dC5mbG93JiZ0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXAuc2V0KGUsdCl9fSx7a2V5OlwiX3NldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLnN0YXJ0c1dpdGgocm8uQ09OVl9HUk9VUCkmJnRoaXMuX2dyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLnNldChlLHQuc2VxdWVuY2UpfX0se2tleTpcImdldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlQZWVyTWFwLmdldChlKX19LHtrZXk6XCJnZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeU1lTWFwLmdldChlKX19LHtrZXk6XCJnZXRHcm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ncm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZU1hcC5nZXQoZSl8fDB9fSx7a2V5OlwibW9kaWZ5TWVzc2FnZVNlbnRCeVBlZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMubGlzdC5nZXQoZSk7aWYoIUx1KG4pKXt2YXIgbz1BcnJheS5mcm9tKG4udmFsdWVzKCkpLHI9by5sZW5ndGg7aWYoMCE9PXIpe3ZhciBhPW51bGwscz1udWxsO3QmJihzPXQpO2Zvcih2YXIgaT0wLHU9ITEsYz1yLTE7Yz49MDtjLS0pXCJpblwiPT09b1tjXS5mbG93JiYobnVsbD09PXM/cz1vW2NdOigoYT1vW2NdKS5uaWNrIT09cy5uaWNrJiYoYS5zZXROaWNrQW5kQXZhdGFyKHtuaWNrOnMubmlja30pLHU9ITApLGEuYXZhdGFyIT09cy5hdmF0YXImJihhLnNldE5pY2tBbmRBdmF0YXIoe2F2YXRhcjpzLmF2YXRhcn0pLHU9ITApLHUmJihpKz0xKSkpO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIubW9kaWZ5TWVzc2FnZVNlbnRCeVBlZXIgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIGNvdW50OlwiKS5jb25jYXQoaSkpfX19fSx7a2V5OlwibW9kaWZ5TWVzc2FnZVNlbnRCeU1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubGF0ZXN0TmljayxvPWUubGF0ZXN0QXZhdGFyLHI9dGhpcy5saXN0LmdldCh0KTtpZighTHUocikpe3ZhciBhPUFycmF5LmZyb20oci52YWx1ZXMoKSkscz1hLmxlbmd0aDtpZigwIT09cyl7Zm9yKHZhciBpPW51bGwsdT0wLGM9ITEsbD1zLTE7bD49MDtsLS0pXCJvdXRcIj09PWFbbF0uZmxvdyYmKChpPWFbbF0pLm5pY2shPT1uJiYoaS5zZXROaWNrQW5kQXZhdGFyKHtuaWNrOm59KSxjPSEwKSxpLmF2YXRhciE9PW8mJihpLnNldE5pY2tBbmRBdmF0YXIoe2F2YXRhcjpvfSksYz0hMCksYyYmKHUrPTEpKTtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm1vZGlmeU1lc3NhZ2VTZW50QnlNZSBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KHQsXCIgY291bnQ6XCIpLmNvbmNhdCh1KSl9fX19LHtrZXk6XCJ0cmF2ZXJzYWxcIix2YWx1ZTpmdW5jdGlvbigpe2lmKDAhPT10aGlzLmxpc3Quc2l6ZSYmLTE9PT1LaS5nZXRMZXZlbCgpKXtjb25zb2xlLmdyb3VwKFwiY29udmVyc2F0aW9uSUQtbWVzc2FnZUNvdW50XCIpO3ZhciBlLHQ9RCh0aGlzLmxpc3QpO3RyeXtmb3IodC5zKCk7IShlPXQubigpKS5kb25lOyl7dmFyIG49bShlLnZhbHVlLDIpLG89blswXSxyPW5bMV07Y29uc29sZS5sb2coXCJcIi5jb25jYXQobyxcIi1cIikuY29uY2F0KHIuc2l6ZSkpfX1jYXRjaChhKXt0LmUoYSl9ZmluYWxseXt0LmYoKX1jb25zb2xlLmdyb3VwRW5kKCl9fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmxpc3QuY2xlYXIoKSx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5UGVlck1hcC5jbGVhcigpLHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlNZU1hcC5jbGVhcigpLHRoaXMuX2dyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLmNsZWFyKCl9fV0pLGV9KCksT209e0NPTlRFWFRfQTJLRVlfQU5EX1RJTllJRF9VUERBVEVEOlwiX2EyS2V5QW5kVGlueUlEVXBkYXRlZFwiLENMT1VEX0NPTkZJR19VUERBVEVEOlwiX2Nsb3VkQ29uZmlnVXBkYXRlZFwifTtmdW5jdGlvbiBMbShlKXt0aGlzLm1peGluKGUpfUxtLm1peGluPWZ1bmN0aW9uKGUpe3ZhciB0PWUucHJvdG90eXBlfHxlO3QuX2lzUmVhZHk9ITEsdC5yZWFkeT1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdO2lmKGUpcmV0dXJuIHRoaXMuX2lzUmVhZHk/dm9pZCh0P2UuY2FsbCh0aGlzKTpzZXRUaW1lb3V0KGUsMSkpOih0aGlzLl9yZWFkeVF1ZXVlPXRoaXMuX3JlYWR5UXVldWV8fFtdLHZvaWQgdGhpcy5fcmVhZHlRdWV1ZS5wdXNoKGUpKX0sdC50cmlnZ2VyUmVhZHk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2lzUmVhZHk9ITAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXt2YXIgdD1lLl9yZWFkeVF1ZXVlO2UuX3JlYWR5UXVldWU9W10sdCYmdC5sZW5ndGg+MCYmdC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmNhbGwodGhpcyl9KSxlKX0pLDEpfSx0LnJlc2V0UmVhZHk9ZnVuY3Rpb24oKXt0aGlzLl9pc1JlYWR5PSExLHRoaXMuX3JlYWR5UXVldWU9W119LHQuaXNSZWFkeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1JlYWR5fX07dmFyIFJtPVtcImpwZ1wiLFwianBlZ1wiLFwiZ2lmXCIsXCJwbmdcIixcImJtcFwiXSxibT1bXCJtcDRcIl0sd209MSxQbT0yLEdtPTMsVW09MjU1LEZtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt2YXIgbj10aGlzO28odGhpcyxlKSxMdSh0KXx8KHRoaXMudXNlcklEPXQudXNlcklEfHxcIlwiLHRoaXMubmljaz10Lm5pY2t8fFwiXCIsdGhpcy5nZW5kZXI9dC5nZW5kZXJ8fFwiXCIsdGhpcy5iaXJ0aGRheT10LmJpcnRoZGF5fHwwLHRoaXMubG9jYXRpb249dC5sb2NhdGlvbnx8XCJcIix0aGlzLnNlbGZTaWduYXR1cmU9dC5zZWxmU2lnbmF0dXJlfHxcIlwiLHRoaXMuYWxsb3dUeXBlPXQuYWxsb3dUeXBlfHxyby5BTExPV19UWVBFX0FMTE9XX0FOWSx0aGlzLmxhbmd1YWdlPXQubGFuZ3VhZ2V8fDAsdGhpcy5hdmF0YXI9dC5hdmF0YXJ8fFwiXCIsdGhpcy5tZXNzYWdlU2V0dGluZ3M9dC5tZXNzYWdlU2V0dGluZ3N8fDAsdGhpcy5hZG1pbkZvcmJpZFR5cGU9dC5hZG1pbkZvcmJpZFR5cGV8fHJvLkZPUkJJRF9UWVBFX05PTkUsdGhpcy5sZXZlbD10LmxldmVsfHwwLHRoaXMucm9sZT10LnJvbGV8fDAsdGhpcy5sYXN0VXBkYXRlZFRpbWU9MCx0aGlzLnByb2ZpbGVDdXN0b21GaWVsZD1bXSxMdSh0LnByb2ZpbGVDdXN0b21GaWVsZCl8fHQucHJvZmlsZUN1c3RvbUZpZWxkLmZvckVhY2goKGZ1bmN0aW9uKGUpe24ucHJvZmlsZUN1c3RvbUZpZWxkLnB1c2goe2tleTplLmtleSx2YWx1ZTplLnZhbHVlfSl9KSkpfXJldHVybiBhKGUsW3trZXk6XCJ2YWxpZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSEwLG49XCJcIjtpZihMdShlKSlyZXR1cm57dmFsaWQ6ITEsdGlwczpcImVtcHR5IG9wdGlvbnNcIn07aWYoZS5wcm9maWxlQ3VzdG9tRmllbGQpZm9yKHZhciBvPWUucHJvZmlsZUN1c3RvbUZpZWxkLmxlbmd0aCxyPW51bGwsYT0wO2E8bzthKyspe2lmKHI9ZS5wcm9maWxlQ3VzdG9tRmllbGRbYV0sISRpKHIua2V5KXx8LTE9PT1yLmtleS5pbmRleE9mKFwiVGFnX1Byb2ZpbGVfQ3VzdG9tXCIpKXJldHVybnt2YWxpZDohMSx0aXBzOlwi6Ieq5a6a5LmJ6LWE5paZ5a2X5q6155qE5YmN57yA5b+F6aG75pivIFRhZ19Qcm9maWxlX0N1c3RvbVwifTtpZighJGkoci52YWx1ZSkpcmV0dXJue3ZhbGlkOiExLHRpcHM6XCLoh6rlrprkuYnotYTmlpnlrZfmrrXnmoQgdmFsdWUg5b+F6aG75piv5a2X56ym5LiyXCJ9fWZvcih2YXIgcyBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHMpKXtpZihcInByb2ZpbGVDdXN0b21GaWVsZFwiPT09cyljb250aW51ZTtpZihMdShlW3NdKSYmISRpKGVbc10pJiYhamkoZVtzXSkpe249XCJrZXk6XCIrcytcIiwgaW52YWxpZCB2YWx1ZTpcIitlW3NdLHQ9ITE7Y29udGludWV9c3dpdGNoKHMpe2Nhc2VcIm5pY2tcIjokaShlW3NdKXx8KG49XCJuaWNrIHNob3VsZCBiZSBhIHN0cmluZ1wiLHQ9ITEpLHN1KGVbc10pPjUwMCYmKG49XCJuaWNrIG5hbWUgbGltaXRlZDogbXVzdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gXCIuY29uY2F0KDUwMCxcIiBieXRlcywgY3VycmVudCBzaXplOiBcIikuY29uY2F0KHN1KGVbc10pLFwiIGJ5dGVzXCIpLHQ9ITEpO2JyZWFrO2Nhc2VcImdlbmRlclwiOmx1KGtfLGUuZ2VuZGVyKXx8KG49XCJrZXk6Z2VuZGVyLCBpbnZhbGlkIHZhbHVlOlwiK2UuZ2VuZGVyLHQ9ITEpO2JyZWFrO2Nhc2VcImJpcnRoZGF5XCI6amkoZS5iaXJ0aGRheSl8fChuPVwiYmlydGhkYXkgc2hvdWxkIGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwibG9jYXRpb25cIjokaShlLmxvY2F0aW9uKXx8KG49XCJsb2NhdGlvbiBzaG91bGQgYmUgYSBzdHJpbmdcIix0PSExKTticmVhaztjYXNlXCJzZWxmU2lnbmF0dXJlXCI6JGkoZS5zZWxmU2lnbmF0dXJlKXx8KG49XCJzZWxmU2lnbmF0dXJlIHNob3VsZCBiZSBhIHN0cmluZ1wiLHQ9ITEpO2JyZWFrO2Nhc2VcImFsbG93VHlwZVwiOmx1KE9fLGUuYWxsb3dUeXBlKXx8KG49XCJrZXk6YWxsb3dUeXBlLCBpbnZhbGlkIHZhbHVlOlwiK2UuYWxsb3dUeXBlLHQ9ITEpO2JyZWFrO2Nhc2VcImxhbmd1YWdlXCI6amkoZS5sYW5ndWFnZSl8fChuPVwibGFuZ3VhZ2Ugc2hvdWxkIGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwiYXZhdGFyXCI6JGkoZS5hdmF0YXIpfHwobj1cImF2YXRhciBzaG91bGQgYmUgYSBzdHJpbmdcIix0PSExKTticmVhaztjYXNlXCJtZXNzYWdlU2V0dGluZ3NcIjowIT09ZS5tZXNzYWdlU2V0dGluZ3MmJjEhPT1lLm1lc3NhZ2VTZXR0aW5ncyYmKG49XCJtZXNzYWdlU2V0dGluZ3Mgc2hvdWxkIGJlIDAgb3IgMVwiLHQ9ITEpO2JyZWFrO2Nhc2VcImFkbWluRm9yYmlkVHlwZVwiOmx1KE5fLGUuYWRtaW5Gb3JiaWRUeXBlKXx8KG49XCJrZXk6YWRtaW5Gb3JiaWRUeXBlLCBpbnZhbGlkIHZhbHVlOlwiK2UuYWRtaW5Gb3JiaWRUeXBlLHQ9ITEpO2JyZWFrO2Nhc2VcImxldmVsXCI6amkoZS5sZXZlbCl8fChuPVwibGV2ZWwgc2hvdWxkIGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwicm9sZVwiOmppKGUucm9sZSl8fChuPVwicm9sZSBzaG91bGQgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztkZWZhdWx0Om49XCJ1bmtub3duIGtleTpcIitzK1wiICBcIitlW3NdLHQ9ITF9fXJldHVybnt2YWxpZDp0LHRpcHM6bn19fV0pLGV9KCkscW09ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy52YWx1ZT10LHRoaXMubmV4dD1udWxsfSx4bT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuTUFYX0xFTkdUSD10LHRoaXMucFRhaWw9bnVsbCx0aGlzLnBOb2RlVG9EZWw9bnVsbCx0aGlzLm1hcD1uZXcgTWFwLEtpLmRlYnVnKFwiU2luZ2x5TGlua2VkTGlzdCBpbml0IE1BWF9MRU5HVEg6XCIuY29uY2F0KHRoaXMuTUFYX0xFTkdUSCkpfXJldHVybiBhKGUsW3trZXk6XCJzZXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgcW0oZSk7aWYodGhpcy5tYXAuc2l6ZTx0aGlzLk1BWF9MRU5HVEgpbnVsbD09PXRoaXMucFRhaWw/KHRoaXMucFRhaWw9dCx0aGlzLnBOb2RlVG9EZWw9dCk6KHRoaXMucFRhaWwubmV4dD10LHRoaXMucFRhaWw9dCksdGhpcy5tYXAuc2V0KGUsMSk7ZWxzZXt2YXIgbj10aGlzLnBOb2RlVG9EZWw7dGhpcy5wTm9kZVRvRGVsPXRoaXMucE5vZGVUb0RlbC5uZXh0LHRoaXMubWFwLmRlbGV0ZShuLnZhbHVlKSxuLm5leHQ9bnVsbCxuPW51bGwsdGhpcy5wVGFpbC5uZXh0PXQsdGhpcy5wVGFpbD10LHRoaXMubWFwLnNldChlLDEpfX19LHtrZXk6XCJoYXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tYXAuaGFzKGUpfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaGFzKGUpJiZ0aGlzLm1hcC5kZWxldGUoZSl9fSx7a2V5OlwidGFpbFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucFRhaWx9fSx7a2V5Olwic2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwLnNpemV9fSx7a2V5OlwiZGF0YVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5tYXAua2V5cygpKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlO251bGwhPT10aGlzLnBOb2RlVG9EZWw7KWU9dGhpcy5wTm9kZVRvRGVsLHRoaXMucE5vZGVUb0RlbD10aGlzLnBOb2RlVG9EZWwubmV4dCxlLm5leHQ9bnVsbCxlPW51bGw7dGhpcy5wVGFpbD1udWxsLHRoaXMubWFwLmNsZWFyKCl9fV0pLGV9KCksVm09W1wiZ3JvdXBJRFwiLFwibmFtZVwiLFwiYXZhdGFyXCIsXCJ0eXBlXCIsXCJpbnRyb2R1Y3Rpb25cIixcIm5vdGlmaWNhdGlvblwiLFwib3duZXJJRFwiLFwic2VsZkluZm9cIixcImNyZWF0ZVRpbWVcIixcImluZm9TZXF1ZW5jZVwiLFwibGFzdEluZm9UaW1lXCIsXCJsYXN0TWVzc2FnZVwiLFwibmV4dE1lc3NhZ2VTZXFcIixcIm1lbWJlck51bVwiLFwibWF4TWVtYmVyTnVtXCIsXCJtZW1iZXJMaXN0XCIsXCJqb2luT3B0aW9uXCIsXCJncm91cEN1c3RvbUZpZWxkXCIsXCJtdXRlQWxsTWVtYmVyc1wiXSxLbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuZ3JvdXBJRD1cIlwiLHRoaXMubmFtZT1cIlwiLHRoaXMuYXZhdGFyPVwiXCIsdGhpcy50eXBlPVwiXCIsdGhpcy5pbnRyb2R1Y3Rpb249XCJcIix0aGlzLm5vdGlmaWNhdGlvbj1cIlwiLHRoaXMub3duZXJJRD1cIlwiLHRoaXMuY3JlYXRlVGltZT1cIlwiLHRoaXMuaW5mb1NlcXVlbmNlPVwiXCIsdGhpcy5sYXN0SW5mb1RpbWU9XCJcIix0aGlzLnNlbGZJbmZvPXttZXNzYWdlUmVtaW5kVHlwZTpcIlwiLGpvaW5UaW1lOlwiXCIsbmFtZUNhcmQ6XCJcIixyb2xlOlwiXCJ9LHRoaXMubGFzdE1lc3NhZ2U9e2xhc3RUaW1lOlwiXCIsbGFzdFNlcXVlbmNlOlwiXCIsZnJvbUFjY291bnQ6XCJcIixtZXNzYWdlRm9yU2hvdzpcIlwifSx0aGlzLm5leHRNZXNzYWdlU2VxPVwiXCIsdGhpcy5tZW1iZXJOdW09XCJcIix0aGlzLm1lbWJlckNvdW50PVwiXCIsdGhpcy5tYXhNZW1iZXJOdW09XCJcIix0aGlzLm1heE1lbWJlckNvdW50PVwiXCIsdGhpcy5qb2luT3B0aW9uPVwiXCIsdGhpcy5ncm91cEN1c3RvbUZpZWxkPVtdLHRoaXMubXV0ZUFsbE1lbWJlcnM9dm9pZCAwLHRoaXMuX2luaXRHcm91cCh0KX1yZXR1cm4gYShlLFt7a2V5OlwibWVtYmVyTnVtXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEtpLndhcm4oXCLvvIHvvIHvvIF2Mi44LjDotbflvIPnlKhtZW1iZXJOdW3vvIzor7fkvb/nlKggbWVtYmVyQ291bnRcIiksdGhpcy5tZW1iZXJDb3VudH0sc2V0OmZ1bmN0aW9uKGUpe319LHtrZXk6XCJtYXhNZW1iZXJOdW1cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gS2kud2FybihcIu+8ge+8ge+8gXYyLjguMOi1t+W8g+eUqG1heE1lbWJlck51be+8jOivt+S9v+eUqCBtYXhNZW1iZXJDb3VudFwiKSx0aGlzLm1heE1lbWJlckNvdW50fSxzZXQ6ZnVuY3Rpb24oZSl7fX0se2tleTpcIl9pbml0R3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlWbS5pbmRleE9mKHQpPDB8fChcInNlbGZJbmZvXCIhPT10PyhcIm1lbWJlck51bVwiPT09dCYmKHRoaXMubWVtYmVyQ291bnQ9ZVt0XSksXCJtYXhNZW1iZXJOdW1cIj09PXQmJih0aGlzLm1heE1lbWJlckNvdW50PWVbdF0pLHRoaXNbdF09ZVt0XSk6dGhpcy51cGRhdGVTZWxmSW5mbyhlW3RdKSl9fSx7a2V5OlwidXBkYXRlR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTt0Lmxhc3RNc2dUaW1lJiYodGhpcy5sYXN0TWVzc2FnZS5sYXN0VGltZT10Lmxhc3RNc2dUaW1lKSxKaSh0Lm11dGVBbGxNZW1iZXJzKXx8KFwiT25cIj09PXQubXV0ZUFsbE1lbWJlcnM/dC5tdXRlQWxsTWVtYmVycz0hMDp0Lm11dGVBbGxNZW1iZXJzPSExKSx0Lmdyb3VwQ3VzdG9tRmllbGQmJmZ1KHRoaXMuZ3JvdXBDdXN0b21GaWVsZCx0Lmdyb3VwQ3VzdG9tRmllbGQpLEppKHQubWVtYmVyTnVtKXx8KHRoaXMubWVtYmVyQ291bnQ9dC5tZW1iZXJOdW0pLEppKHQubWF4TWVtYmVyTnVtKXx8KHRoaXMubWF4TWVtYmVyQ291bnQ9dC5tYXhNZW1iZXJOdW0pLHJ1KHRoaXMsdCxbXCJtZW1iZXJzXCIsXCJlcnJvckNvZGVcIixcImxhc3RNc2dUaW1lXCIsXCJncm91cEN1c3RvbUZpZWxkXCIsXCJtZW1iZXJOdW1cIixcIm1heE1lbWJlck51bVwiXSl9fSx7a2V5OlwidXBkYXRlU2VsZkluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm5hbWVDYXJkLG49ZS5qb2luVGltZSxvPWUucm9sZSxyPWUubWVzc2FnZVJlbWluZFR5cGU7cnUodGhpcy5zZWxmSW5mbyx7bmFtZUNhcmQ6dCxqb2luVGltZTpuLHJvbGU6byxtZXNzYWdlUmVtaW5kVHlwZTpyfSxbXSxbXCJcIixudWxsLHZvaWQgMCwwLE5hTl0pfX0se2tleTpcInNldFNlbGZOYW1lQ2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuc2VsZkluZm8ubmFtZUNhcmQ9ZX19XSksZX0oKSxCbT1mdW5jdGlvbihlLHQpe2lmKEppKHQpKXJldHVyblwiXCI7c3dpdGNoKGUpe2Nhc2Ugcm8uTVNHX1RFWFQ6cmV0dXJuIHQudGV4dDtjYXNlIHJvLk1TR19JTUFHRTpyZXR1cm5cIlvlm77niYddXCI7Y2FzZSByby5NU0dfR0VPOnJldHVyblwiW+S9jee9rl1cIjtjYXNlIHJvLk1TR19BVURJTzpyZXR1cm5cIlvor63pn7NdXCI7Y2FzZSByby5NU0dfVklERU86cmV0dXJuXCJb6KeG6aKRXVwiO2Nhc2Ugcm8uTVNHX0ZJTEU6cmV0dXJuXCJb5paH5Lu2XVwiO2Nhc2Ugcm8uTVNHX0NVU1RPTTpyZXR1cm5cIlvoh6rlrprkuYnmtojmga9dXCI7Y2FzZSByby5NU0dfR1JQX1RJUDpyZXR1cm5cIlvnvqTmj5DnpLrmtojmga9dXCI7Y2FzZSByby5NU0dfR1JQX1NZU19OT1RJQ0U6cmV0dXJuXCJb576k57O757uf6YCa55+lXVwiO2Nhc2Ugcm8uTVNHX0ZBQ0U6cmV0dXJuXCJb5Yqo55S76KGo5oOFXVwiO2Nhc2Ugcm8uTVNHX01FUkdFUjpyZXR1cm5cIlvogYrlpKnorrDlvZVdXCI7ZGVmYXVsdDpyZXR1cm5cIlwifX0sSG09ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpP3tsYXN0VGltZTowLGxhc3RTZXF1ZW5jZTowLGZyb21BY2NvdW50OjAsbWVzc2FnZUZvclNob3c6XCJcIixwYXlsb2FkOm51bGwsdHlwZTpcIlwiLGlzUmV2b2tlZDohMSxjbG91ZEN1c3RvbURhdGE6XCJcIixvbmxpbmVPbmx5RmxhZzohMX06ZSBpbnN0YW5jZW9mIFFfP3tsYXN0VGltZTplLnRpbWV8fDAsbGFzdFNlcXVlbmNlOmUuc2VxdWVuY2V8fDAsZnJvbUFjY291bnQ6ZS5mcm9tfHxcIlwiLG1lc3NhZ2VGb3JTaG93OkJtKGUudHlwZSxlLnBheWxvYWQpLHBheWxvYWQ6ZS5wYXlsb2FkfHxudWxsLHR5cGU6ZS50eXBlfHxudWxsLGlzUmV2b2tlZDplLmlzUmV2b2tlZHx8ITEsY2xvdWRDdXN0b21EYXRhOmUuY2xvdWRDdXN0b21EYXRhfHxcIlwiLG9ubGluZU9ubHlGbGFnOiEhUWkoZS5nZXRPbmxpbmVPbmx5RmxhZykmJmUuZ2V0T25saW5lT25seUZsYWcoKX06dCh0KHt9LGUpLHt9LHttZXNzYWdlRm9yU2hvdzpCbShlLnR5cGUsZS5wYXlsb2FkKX0pfSxqbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuY29udmVyc2F0aW9uSUQ9dC5jb252ZXJzYXRpb25JRHx8XCJcIix0aGlzLnVucmVhZENvdW50PXQudW5yZWFkQ291bnR8fDAsdGhpcy50eXBlPXQudHlwZXx8XCJcIix0aGlzLmxhc3RNZXNzYWdlPUhtKHQubGFzdE1lc3NhZ2UpLHQubGFzdE1zZ1RpbWUmJih0aGlzLmxhc3RNZXNzYWdlLmxhc3RUaW1lPXQubGFzdE1zZ1RpbWUpLHRoaXMuX2lzSW5mb0NvbXBsZXRlZD0hMSx0aGlzLnBlZXJSZWFkVGltZT10LnBlZXJSZWFkVGltZXx8MCx0aGlzLmdyb3VwQXRJbmZvTGlzdD1bXSx0aGlzLnJlbWFyaz1cIlwiLHRoaXMuaXNQaW5uZWQ9dC5pc1Bpbm5lZHx8ITEsdGhpcy5faW5pdFByb2ZpbGUodCl9cmV0dXJuIGEoZSxbe2tleTpcInRvQWNjb3VudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnZlcnNhdGlvbklELnN0YXJ0c1dpdGgocm8uQ09OVl9DMkMpP3RoaXMuY29udmVyc2F0aW9uSUQucmVwbGFjZShyby5DT05WX0MyQyxcIlwiKTp0aGlzLmNvbnZlcnNhdGlvbklELnN0YXJ0c1dpdGgocm8uQ09OVl9HUk9VUCk/dGhpcy5jb252ZXJzYXRpb25JRC5yZXBsYWNlKHJvLkNPTlZfR1JPVVAsXCJcIik6XCJcIn19LHtrZXk6XCJzdWJUeXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3JvdXBQcm9maWxlP3RoaXMuZ3JvdXBQcm9maWxlLnR5cGU6XCJcIn19LHtrZXk6XCJfaW5pdFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO09iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3N3aXRjaChuKXtjYXNlXCJ1c2VyUHJvZmlsZVwiOnQudXNlclByb2ZpbGU9ZS51c2VyUHJvZmlsZTticmVhaztjYXNlXCJncm91cFByb2ZpbGVcIjp0Lmdyb3VwUHJvZmlsZT1lLmdyb3VwUHJvZmlsZX19KSksSmkodGhpcy51c2VyUHJvZmlsZSkmJnRoaXMudHlwZT09PXJvLkNPTlZfQzJDP3RoaXMudXNlclByb2ZpbGU9bmV3IEZtKHt1c2VySUQ6ZS5jb252ZXJzYXRpb25JRC5yZXBsYWNlKFwiQzJDXCIsXCJcIil9KTpKaSh0aGlzLmdyb3VwUHJvZmlsZSkmJnRoaXMudHlwZT09PXJvLkNPTlZfR1JPVVAmJih0aGlzLmdyb3VwUHJvZmlsZT1uZXcgS20oe2dyb3VwSUQ6ZS5jb252ZXJzYXRpb25JRC5yZXBsYWNlKFwiR1JPVVBcIixcIlwiKX0pKX19LHtrZXk6XCJ1cGRhdGVVbnJlYWRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7SmkoZSl8fChtdSh0aGlzLnN1YlR5cGUpP3RoaXMudW5yZWFkQ291bnQ9MDp0JiZ0aGlzLnR5cGU9PT1yby5DT05WX0dST1VQP3RoaXMudW5yZWFkQ291bnQ9ZTp0aGlzLnVucmVhZENvdW50PXRoaXMudW5yZWFkQ291bnQrZSl9fSx7a2V5OlwidXBkYXRlTGFzdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmxhc3RNZXNzYWdlPUhtKGUpfX0se2tleTpcInVwZGF0ZUdyb3VwQXRJbmZvTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LG49KE0odD1lLmdyb3VwQXRUeXBlKXx8eSh0KXx8SSh0KXx8UygpKS5zbGljZSgwKTstMSE9PW4uaW5kZXhPZihyby5DT05WX0FUX01FKSYmLTEhPT1uLmluZGV4T2Yocm8uQ09OVl9BVF9BTEwpJiYobj1bcm8uQ09OVl9BVF9BTExfQVRfTUVdKTt2YXIgbz17ZnJvbTplLmZyb20sZ3JvdXBJRDplLmdyb3VwSUQsbWVzc2FnZVNlcXVlbmNlOmUuc2VxdWVuY2UsYXRUeXBlQXJyYXk6bixfX3JhbmRvbTplLl9fcmFuZG9tLF9fc2VxdWVuY2U6ZS5fX3NlcXVlbmNlfTt0aGlzLmdyb3VwQXRJbmZvTGlzdC5wdXNoKG8pLEtpLmRlYnVnKFwiQ29udmVyc2F0aW9uLnVwZGF0ZUdyb3VwQXRJbmZvTGlzdCBjb252ZXJzYXRpb25JRDpcIi5jb25jYXQodGhpcy5jb252ZXJzYXRpb25JRCksdGhpcy5ncm91cEF0SW5mb0xpc3QpfX0se2tleTpcImNsZWFyR3JvdXBBdEluZm9MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmdyb3VwQXRJbmZvTGlzdC5sZW5ndGg9MH19LHtrZXk6XCJyZWR1Y2VVbnJlYWRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy51bnJlYWRDb3VudD49MSYmKHRoaXMudW5yZWFkQ291bnQtPTEpfX0se2tleTpcImlzTGFzdE1lc3NhZ2VSZXZva2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZXF1ZW5jZSxuPWUudGltZTtyZXR1cm4gdGhpcy50eXBlPT09cm8uQ09OVl9DMkMmJnQ9PT10aGlzLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZSYmbj09PXRoaXMubGFzdE1lc3NhZ2UubGFzdFRpbWV8fHRoaXMudHlwZT09PXJvLkNPTlZfR1JPVVAmJnQ9PT10aGlzLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZX19LHtrZXk6XCJzZXRMYXN0TWVzc2FnZVJldm9rZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmxhc3RNZXNzYWdlLmlzUmV2b2tlZD1lfX1dKSxlfSgpLCRtPWZ1bmN0aW9uKGUpe2kocixlKTt2YXIgbj1fKHIpO2Z1bmN0aW9uIHIoZSl7dmFyIHQ7cmV0dXJuIG8odGhpcyxyKSwodD1uLmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkNvbnZlcnNhdGlvbk1vZHVsZVwiLExtLm1peGluKGgodCkpLHQuX21lc3NhZ2VMaXN0SGFuZGxlcj1uZXcgTm0sdC5zaW5nbHlMaW5rZWRMaXN0PW5ldyB4bSgxMDApLHQuX3BhZ2luZ1N0YXR1cz1DYy5OT1RfU1RBUlQsdC5fcGFnaW5nVGltZVN0YW1wPTAsdC5fcGFnaW5nU3RhcnRJbmRleD0wLHQuX3BhZ2luZ1Bpbm5lZFRpbWVTdGFtcD0wLHQuX3BhZ2luZ1Bpbm5lZFN0YXJ0SW5kZXg9MCx0Ll9jb252ZXJzYXRpb25NYXA9bmV3IE1hcCx0Ll90bXBHcm91cExpc3Q9W10sdC5fdG1wR3JvdXBBdFRpcHNMaXN0PVtdLHQuX3BlZXJSZWFkVGltZU1hcD1uZXcgTWFwLHQuX2NvbXBsZXRlZE1hcD1uZXcgTWFwLHQuX3JvYW1pbmdNZXNzYWdlS2V5TWFwPW5ldyBNYXAsdC5faW5pdExpc3RlbmVycygpLHR9cmV0dXJuIGEocixbe2tleTpcIl9pbml0TGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oT20uQ09OVEVYVF9BMktFWV9BTkRfVElOWUlEX1VQREFURUQsdGhpcy5faW5pdExvY2FsQ29udmVyc2F0aW9uTGlzdCx0aGlzKX19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtlJTYwPT0wJiZ0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIudHJhdmVyc2FsKCl9fSx7a2V5OlwiX2luaXRMb2NhbENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgamQoVGcpO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2luaXRMb2NhbENvbnZlcnNhdGlvbkxpc3QuXCIpKTt2YXIgbj1cIlwiLG89dGhpcy5fZ2V0U3RvcmFnZUNvbnZlcnNhdGlvbkxpc3QoKTtpZihvKXtmb3IodmFyIHI9by5sZW5ndGgsYT0wO2E8cjthKyspe3ZhciBzPW9bYV07aWYocyYmcy5ncm91cFByb2ZpbGUpe3ZhciBpPXMuZ3JvdXBQcm9maWxlLnR5cGU7aWYobXUoaSkpY29udGludWV9dGhpcy5fY29udmVyc2F0aW9uTWFwLnNldChvW2FdLmNvbnZlcnNhdGlvbklELG5ldyBqbShvW2FdKSl9dGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSksbj1cImNvdW50OlwiLmNvbmNhdChyKX1lbHNlIG49XCJjb3VudDowXCI7dC5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UobikuZW5kKCksdGhpcy5nZXRNb2R1bGUoJGMpfHx0aGlzLnRyaWdnZXJSZWFkeSgpLHRoaXMucmVhZHkoKGZ1bmN0aW9uKCl7ZS5fdG1wR3JvdXBMaXN0Lmxlbmd0aD4wJiYoZS51cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUoZS5fdG1wR3JvdXBMaXN0KSxlLl90bXBHcm91cExpc3QubGVuZ3RoPTApfSkpLHRoaXMuX3N5bmNDb252ZXJzYXRpb25MaXN0KCl9fSx7a2V5Olwib25NZXNzYWdlU2VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uU2VuZE9yUmVjZWl2ZU1lc3NhZ2UoZS5jb252ZXJzYXRpb25PcHRpb25zTGlzdCwhMCl9fSx7a2V5Olwib25OZXdNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TZW5kT3JSZWNlaXZlTWVzc2FnZShlLmNvbnZlcnNhdGlvbk9wdGlvbnNMaXN0LGUuaXNJbnN0YW50TWVzc2FnZSl9fSx7a2V5OlwiX29uU2VuZE9yUmVjZWl2ZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTt0aGlzLl9pc1JlYWR5PzAhPT1lLmxlbmd0aCYmKHRoaXMuX2dldEMyQ1BlZXJSZWFkVGltZShlKSx0aGlzLl91cGRhdGVMb2NhbENvbnZlcnNhdGlvbkxpc3QoZSwhMSxuKSx0aGlzLl9zZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdCgpLHRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoKSk6dGhpcy5yZWFkeSgoZnVuY3Rpb24oKXt0Ll9vblNlbmRPclJlY2VpdmVNZXNzYWdlKGUsbil9KSl9fSx7a2V5OlwidXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztXaShlKSYmMD09PWUubGVuZ3RofHwoMCE9PXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5zaXplPyhlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPVwiR1JPVVBcIi5jb25jYXQoZS5ncm91cElEKTtpZih0Ll9jb252ZXJzYXRpb25NYXAuaGFzKG4pKXt2YXIgbz10Ll9jb252ZXJzYXRpb25NYXAuZ2V0KG4pO28uZ3JvdXBQcm9maWxlPWUsby5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2U8ZS5uZXh0TWVzc2FnZVNlcSYmKG8ubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlPWUubmV4dE1lc3NhZ2VTZXEtMSksby5zdWJUeXBlfHwoby5zdWJUeXBlPWUudHlwZSl9fSkpLHRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpKTp0aGlzLl90bXBHcm91cExpc3Q9ZSl9fSx7a2V5OlwiX3VwZGF0ZUNvbnZlcnNhdGlvblVzZXJQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmRhdGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49XCJDMkNcIi5jb25jYXQoZS51c2VySUQpO3QuX2NvbnZlcnNhdGlvbk1hcC5oYXMobikmJih0Ll9jb252ZXJzYXRpb25NYXAuZ2V0KG4pLnVzZXJQcm9maWxlPWUpfSkpLHRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX0se2tleTpcIm9uTWVzc2FnZVJldm9rZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKDAhPT1lLmxlbmd0aCl7dmFyIG49bnVsbCxvPSExO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KG49dC5fY29udmVyc2F0aW9uTWFwLmdldChlLmNvbnZlcnNhdGlvbklEKSkmJm4uaXNMYXN0TWVzc2FnZVJldm9rZWQoZSkmJihvPSEwLG4uc2V0TGFzdE1lc3NhZ2VSZXZva2VkKCEwKSl9KSksbyYmdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSl9fX0se2tleTpcIm9uTWVzc2FnZURlbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZigwIT09ZS5sZW5ndGgpe2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5pc0RlbGV0ZWQ9ITB9KSk7Zm9yKHZhciB0PWVbMF0uY29udmVyc2F0aW9uSUQsbj10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdCh0KSxvPXt9LHI9bi5sZW5ndGgtMTtyPjA7ci0tKWlmKCFuW3JdLmlzRGVsZXRlZCl7bz1uW3JdO2JyZWFrfXZhciBhPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQodCk7aWYoYSl7dmFyIHM9ITE7YS5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2UhPT1vLnNlcXVlbmNlJiZhLmxhc3RNZXNzYWdlLmxhc3RUaW1lIT09by50aW1lJiYoYS51cGRhdGVMYXN0TWVzc2FnZShvKSxzPSEwLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NZXNzYWdlRGVsZXRlZC4gdXBkYXRlIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQodCxcIiB3aXRoIGxhc3RNZXNzYWdlOlwiKSxhLmxhc3RNZXNzYWdlKSksdC5zdGFydHNXaXRoKHJvLkNPTlZfQzJDKSYmdGhpcy51cGRhdGVVbnJlYWRDb3VudCh0KSxzJiZ0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX19fX0se2tleTpcIm9uTmV3R3JvdXBBdFRpcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5kYXRhTGlzdCxvPW51bGw7bi5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmdyb3VwQXRUaXBzP289ZS5ncm91cEF0VGlwczplLmVsZW1lbnRzJiYobz1lLmVsZW1lbnRzKSxvLl9fcmFuZG9tPWUucmFuZG9tLG8uX19zZXF1ZW5jZT1lLmNsaWVudFNlcXVlbmNlLHQuX3RtcEdyb3VwQXRUaXBzTGlzdC5wdXNoKG8pfSkpLEtpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk5ld0dyb3VwQXRUaXBzIGlzUmVhZHk6XCIpLmNvbmNhdCh0aGlzLl9pc1JlYWR5KSx0aGlzLl90bXBHcm91cEF0VGlwc0xpc3QpLHRoaXMuX2lzUmVhZHkmJnRoaXMuX2hhbmRsZUdyb3VwQXRUaXBzTGlzdCgpfX0se2tleTpcIl9oYW5kbGVHcm91cEF0VGlwc0xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoMCE9PXRoaXMuX3RtcEdyb3VwQXRUaXBzTGlzdC5sZW5ndGgpe3ZhciB0PSExO3RoaXMuX3RtcEdyb3VwQXRUaXBzTGlzdC5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgbz1uLmdyb3VwSUQ7aWYobi5mcm9tIT09ZS5nZXRNeVVzZXJJRCgpKXt2YXIgcj1lLl9jb252ZXJzYXRpb25NYXAuZ2V0KFwiXCIuY29uY2F0KHJvLkNPTlZfR1JPVVApLmNvbmNhdChvKSk7ciYmKHIudXBkYXRlR3JvdXBBdEluZm9MaXN0KG4pLHQ9ITApfX0pKSx0JiZ0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSx0aGlzLl90bXBHcm91cEF0VGlwc0xpc3QubGVuZ3RoPTB9fX0se2tleTpcIl9nZXRDMkNQZWVyUmVhZFRpbWVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49W107aWYoZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9jb252ZXJzYXRpb25NYXAuaGFzKGUuY29udmVyc2F0aW9uSUQpfHxlLnR5cGUhPT1yby5DT05WX0MyQ3x8bi5wdXNoKGUuY29udmVyc2F0aW9uSUQucmVwbGFjZShyby5DT05WX0MyQyxcIlwiKSl9KSksbi5sZW5ndGg+MCl7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9nZXRDMkNQZWVyUmVhZFRpbWUgdXNlcklETGlzdDpcIikuY29uY2F0KG4pKTt2YXIgbz10aGlzLmdldE1vZHVsZSgkYyk7byYmby5nZXRSZW1vdGVQZWVyUmVhZFRpbWUobil9fX0se2tleTpcIl9nZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKFFjKS5nZXRJdGVtKFwiY29udmVyc2F0aW9uTWFwXCIpfX0se2tleTpcIl9zZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbkxpc3QoKS5zbGljZSgwLDIwKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntjb252ZXJzYXRpb25JRDplLmNvbnZlcnNhdGlvbklELHR5cGU6ZS50eXBlLHN1YlR5cGU6ZS5zdWJUeXBlLGxhc3RNZXNzYWdlOmUubGFzdE1lc3NhZ2UsZ3JvdXBQcm9maWxlOmUuZ3JvdXBQcm9maWxlLHVzZXJQcm9maWxlOmUudXNlclByb2ZpbGV9fSkpO3RoaXMuZ2V0TW9kdWxlKFFjKS5zZXRJdGVtKFwiY29udmVyc2F0aW9uTWFwXCIsZSl9fSx7a2V5OlwiX2VtaXRDb252ZXJzYXRpb25VcGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF0sdD0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLG49dih0aGlzLl9jb252ZXJzYXRpb25NYXAudmFsdWVzKCkpO2lmKHQpe3ZhciBvPXRoaXMuZ2V0TW9kdWxlKFljKTtvJiZvLnVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2Uobil9ZSYmdGhpcy5lbWl0T3V0ZXJFdmVudChvby5DT05WRVJTQVRJT05fTElTVF9VUERBVEVELG4pfX0se2tleTpcImdldExvY2FsQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHYodGhpcy5fY29udmVyc2F0aW9uTWFwLnZhbHVlcygpKX19LHtrZXk6XCJnZXRMb2NhbENvbnZlcnNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGUpfX0se2tleTpcIl9zeW5jQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBqZChTZyk7cmV0dXJuIHRoaXMuX3BhZ2luZ1N0YXR1cz09PUNjLk5PVF9TVEFSVCYmdGhpcy5fY29udmVyc2F0aW9uTWFwLmNsZWFyKCksdGhpcy5fcGFnaW5nR2V0Q29udmVyc2F0aW9uTGlzdCgpLnRoZW4oKGZ1bmN0aW9uKG4pe3JldHVybiBlLl9wYWdpbmdTdGF0dXM9Q2MuUkVTT0xWRUQsZS5fc2V0U3RvcmFnZUNvbnZlcnNhdGlvbkxpc3QoKSxlLl9oYW5kbGVDMkNQZWVyUmVhZFRpbWUoKSxlLmNoZWNrQW5kUGF0Y2hSZW1hcmsoKSx0LnNldE1lc3NhZ2UoZS5fY29udmVyc2F0aW9uTWFwLnNpemUpLnNldE5ldHdvcmtUeXBlKGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksbn0pKS5jYXRjaCgoZnVuY3Rpb24obil7cmV0dXJuIGUuX3BhZ2luZ1N0YXR1cz1DYy5SRUpFQ1RFRCx0LnNldE1lc3NhZ2UoZS5fcGFnaW5nVGltZVN0YW1wKSxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPW0oZSwyKSxyPW9bMF0sYT1vWzFdO3Quc2V0RXJyb3IobixyLGEpLmVuZCgpfSkpLGNtKG4pfSkpfX0se2tleTpcIl9wYWdpbmdHZXRDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9wYWdpbmdHZXRDb252ZXJzYXRpb25MaXN0XCIpO3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQodCxcIiB0aW1lU3RhbXA6XCIpLmNvbmNhdCh0aGlzLl9wYWdpbmdUaW1lU3RhbXAsXCIgc3RhcnRJbmRleDpcIikuY29uY2F0KHRoaXMuX3BhZ2luZ1N0YXJ0SW5kZXgpK1wiIHBpbm5lZFRpbWVTdGFtcDpcIi5jb25jYXQodGhpcy5fcGFnaW5nUGlubmVkVGltZVN0YW1wLFwiIHBpbm5lZFN0YXJ0SW5kZXg6XCIpLmNvbmNhdCh0aGlzLl9wYWdpbmdQaW5uZWRTdGFydEluZGV4KSksdGhpcy5fcGFnaW5nU3RhdHVzPUNjLlBFTkRJTkcsdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6TmwscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSx0aW1lU3RhbXA6dGhpcy5fcGFnaW5nVGltZVN0YW1wLHN0YXJ0SW5kZXg6dGhpcy5fcGFnaW5nU3RhcnRJbmRleCxwaW5uZWRUaW1lU3RhbXA6dGhpcy5fcGFnaW5nUGlubmVkVGltZVN0YW1wLHBpbm5lZFN0YXJ0SW5kZXg6dGhpcy5fcGFnaW5nU3RhcnRJbmRleCxvcmRlclR5cGU6MX19KS50aGVuKChmdW5jdGlvbihuKXt2YXIgbz1uLmRhdGEscj1vLmNvbXBsZXRlRmxhZyxhPW8uY29udmVyc2F0aW9ucyxzPXZvaWQgMD09PWE/W106YSxpPW8udGltZVN0YW1wLHU9by5zdGFydEluZGV4LGM9by5waW5uZWRUaW1lU3RhbXAsbD1vLnBpbm5lZFN0YXJ0SW5kZXg7aWYoS2kubG9nKFwiXCIuY29uY2F0KHQsXCIgb2suIGNvbXBsZXRlRmxhZzpcIikuY29uY2F0KHIsXCIgY291bnQ6XCIpLmNvbmNhdChzLmxlbmd0aCkpLHMubGVuZ3RoPjApe3ZhciBwPWUuX2dldENvbnZlcnNhdGlvbk9wdGlvbnMocyk7ZS5fdXBkYXRlTG9jYWxDb252ZXJzYXRpb25MaXN0KHAsITApfWlmKGUuX2lzUmVhZHkpZS5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpO2Vsc2V7aWYoIWUuaXNMb2dnZWRJbigpKXJldHVybiB1bSgpO2UudHJpZ2dlclJlYWR5KCl9cmV0dXJuIGUuX3BhZ2luZ1RpbWVTdGFtcD1pLGUuX3BhZ2luZ1N0YXJ0SW5kZXg9dSxlLl9wYWdpbmdQaW5uZWRUaW1lU3RhbXA9YyxlLl9wYWdpbmdQaW5uZWRTdGFydEluZGV4PWwsMSE9PXI/ZS5fcGFnaW5nR2V0Q29udmVyc2F0aW9uTGlzdCgpOihlLl9oYW5kbGVHcm91cEF0VGlwc0xpc3QoKSx1bSgpKX0pKS5jYXRjaCgoZnVuY3Rpb24obil7dGhyb3cgZS5pc0xvZ2dlZEluKCkmJihlLl9pc1JlYWR5fHwoS2kud2FybihcIlwiLmNvbmNhdCh0LFwiIGZhaWxlZC4gZXJyb3I6XCIpLG4pLGUudHJpZ2dlclJlYWR5KCkpKSxufSkpfX0se2tleTpcIl91cGRhdGVMb2NhbENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIG8scj1EYXRlLm5vdygpO289dGhpcy5fZ2V0VG1wQ29udmVyc2F0aW9uTGlzdE1hcHBpbmcoZSx0LG4pLHRoaXMuX2NvbnZlcnNhdGlvbk1hcD1uZXcgTWFwKHRoaXMuX3NvcnRDb252ZXJzYXRpb25MaXN0KFtdLmNvbmNhdCh2KG8udG9CZVVwZGF0ZWRDb252ZXJzYXRpb25MaXN0KSx2KHRoaXMuX2NvbnZlcnNhdGlvbk1hcCkpKSksdHx8dGhpcy5fdXBkYXRlVXNlck9yR3JvdXBQcm9maWxlKG8ubmV3Q29udmVyc2F0aW9uTGlzdCksS2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl91cGRhdGVMb2NhbENvbnZlcnNhdGlvbkxpc3QgY29zdCBcIikuY29uY2F0KERhdGUubm93KCktcixcIiBtc1wiKSl9fSx7a2V5OlwiX2dldFRtcENvbnZlcnNhdGlvbkxpc3RNYXBwaW5nXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgbz1bXSxyPVtdLGE9dGhpcy5nZXRNb2R1bGUoWWMpLHM9dGhpcy5nZXRNb2R1bGUoemMpLGk9MCx1PWUubGVuZ3RoO2k8dTtpKyspe3ZhciBjPW5ldyBqbShlW2ldKSxsPWMuY29udmVyc2F0aW9uSUQ7aWYodGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhsKSl7dmFyIHA9dGhpcy5fY29udmVyc2F0aW9uTWFwLmdldChsKSxkPVtcInVucmVhZENvdW50XCIsXCJhbGxvd1R5cGVcIixcImFkbWluRm9yYmlkVHlwZVwiLFwicGF5bG9hZFwiLFwiaXNQaW5uZWRcIl07bnx8ZC5wdXNoKFwibGFzdE1lc3NhZ2VcIikscnUocCxjLGQsW251bGwsdm9pZCAwLFwiXCIsMCxOYU5dKSxwLnVwZGF0ZVVucmVhZENvdW50KGMudW5yZWFkQ291bnQsdCksbiYmKHAubGFzdE1lc3NhZ2UucGF5bG9hZD1lW2ldLmxhc3RNZXNzYWdlLnBheWxvYWQpLGVbaV0ubGFzdE1lc3NhZ2UmJnAubGFzdE1lc3NhZ2UuY2xvdWRDdXN0b21EYXRhIT09ZVtpXS5sYXN0TWVzc2FnZS5jbG91ZEN1c3RvbURhdGEmJihwLmxhc3RNZXNzYWdlLmNsb3VkQ3VzdG9tRGF0YT1lW2ldLmxhc3RNZXNzYWdlLmNsb3VkQ3VzdG9tRGF0YXx8XCJcIiksdGhpcy5fY29udmVyc2F0aW9uTWFwLmRlbGV0ZShsKSxvLnB1c2goW2wscF0pfWVsc2V7aWYoYy50eXBlPT09cm8uQ09OVl9HUk9VUCYmYSl7dmFyIGc9Yy5ncm91cFByb2ZpbGUuZ3JvdXBJRCxoPWEuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZyk7aCYmKGMuZ3JvdXBQcm9maWxlPWgsYy51cGRhdGVVbnJlYWRDb3VudCgwKSl9ZWxzZSBpZihjLnR5cGU9PT1yby5DT05WX0MyQyl7dmFyIGY9bC5yZXBsYWNlKHJvLkNPTlZfQzJDLFwiXCIpO3MmJnMuaXNNeUZyaWVuZChmKSYmKGMucmVtYXJrPXMuZ2V0RnJpZW5kUmVtYXJrKGYpKX1yLnB1c2goYyksby5wdXNoKFtsLGNdKX19cmV0dXJue3RvQmVVcGRhdGVkQ29udmVyc2F0aW9uTGlzdDpvLG5ld0NvbnZlcnNhdGlvbkxpc3Q6cn19fSx7a2V5OlwiX3NvcnRDb252ZXJzYXRpb25MaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9W10sbj1bXTtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXshMD09PWVbMV0uaXNQaW5uZWQ/dC5wdXNoKGUpOm4ucHVzaChlKX0pKSx0LnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRbMV0ubGFzdE1lc3NhZ2UubGFzdFRpbWUtZVsxXS5sYXN0TWVzc2FnZS5sYXN0VGltZX0pKS5jb25jYXQobi5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiB0WzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lLWVbMV0ubGFzdE1lc3NhZ2UubGFzdFRpbWV9KSkpfX0se2tleTpcIl9zb3J0Q29udmVyc2F0aW9uTGlzdEFuZEVtaXRFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udmVyc2F0aW9uTWFwPW5ldyBNYXAodGhpcy5fc29ydENvbnZlcnNhdGlvbkxpc3Qodih0aGlzLl9jb252ZXJzYXRpb25NYXApKSksdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSl9fSx7a2V5OlwiX3VwZGF0ZVVzZXJPckdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoMCE9PWUubGVuZ3RoKXt2YXIgbj1bXSxvPVtdLHI9dGhpcy5nZXRNb2R1bGUoamMpLGE9dGhpcy5nZXRNb2R1bGUoWWMpO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZS50eXBlPT09cm8uQ09OVl9DMkMpbi5wdXNoKGUudG9BY2NvdW50KTtlbHNlIGlmKGUudHlwZT09PXJvLkNPTlZfR1JPVVApe3ZhciB0PWUudG9BY2NvdW50O2EuaGFzTG9jYWxHcm91cCh0KT9lLmdyb3VwUHJvZmlsZT1hLmdldExvY2FsR3JvdXBQcm9maWxlKHQpOm8ucHVzaCh0KX19KSksS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fdXBkYXRlVXNlck9yR3JvdXBQcm9maWxlIGMyY1VzZXJJRExpc3Q6XCIpLmNvbmNhdChuLFwiIGdyb3VwSURMaXN0OlwiKS5jb25jYXQobykpLG4ubGVuZ3RoPjAmJnIuZ2V0VXNlclByb2ZpbGUoe3VzZXJJRExpc3Q6bn0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YTtXaShuKT9uLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX2NvbnZlcnNhdGlvbk1hcC5nZXQoXCJDMkNcIi5jb25jYXQoZS51c2VySUQpKS51c2VyUHJvZmlsZT1lfSkpOnQuX2NvbnZlcnNhdGlvbk1hcC5nZXQoXCJDMkNcIi5jb25jYXQobi51c2VySUQpKS51c2VyUHJvZmlsZT1ufSkpLG8ubGVuZ3RoPjAmJmEuZ2V0R3JvdXBQcm9maWxlQWR2YW5jZSh7Z3JvdXBJRExpc3Q6byxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjpbXCJUeXBlXCIsXCJOYW1lXCIsXCJGYWNlVXJsXCJdfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe2UuZGF0YS5zdWNjZXNzR3JvdXBMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPVwiR1JPVVBcIi5jb25jYXQoZS5ncm91cElEKTtpZih0Ll9jb252ZXJzYXRpb25NYXAuaGFzKG4pKXt2YXIgbz10Ll9jb252ZXJzYXRpb25NYXAuZ2V0KG4pO3J1KG8uZ3JvdXBQcm9maWxlLGUsW10sW251bGwsdm9pZCAwLFwiXCIsMCxOYU5dKSwhby5zdWJUeXBlJiZlLnR5cGUmJihvLnN1YlR5cGU9ZS50eXBlKX19KSl9KSl9fX0se2tleTpcIl9nZXRDb252ZXJzYXRpb25PcHRpb25zXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9W10sbj1lLmZpbHRlcigoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sYXN0TXNnO3JldHVybiB6aSh0KX0pKS5tYXAoKGZ1bmN0aW9uKGUpe2lmKDE9PT1lLnR5cGUpe3ZhciBuPXt1c2VySUQ6ZS51c2VySUQsbmljazplLmMyQ05pY2ssYXZhdGFyOmUuYzJDSW1hZ2V9O3JldHVybiB0LnB1c2gobikse2NvbnZlcnNhdGlvbklEOlwiQzJDXCIuY29uY2F0KGUudXNlcklEKSx0eXBlOlwiQzJDXCIsbGFzdE1lc3NhZ2U6e2xhc3RUaW1lOmUudGltZSxsYXN0U2VxdWVuY2U6ZS5zZXF1ZW5jZSxmcm9tQWNjb3VudDplLmxhc3RDMkNNc2dGcm9tQWNjb3VudCxtZXNzYWdlRm9yU2hvdzplLm1lc3NhZ2VTaG93LHR5cGU6ZS5sYXN0TXNnLmVsZW1lbnRzWzBdP2UubGFzdE1zZy5lbGVtZW50c1swXS50eXBlOm51bGwscGF5bG9hZDplLmxhc3RNc2cuZWxlbWVudHNbMF0/ZS5sYXN0TXNnLmVsZW1lbnRzWzBdLmNvbnRlbnQ6bnVsbCxjbG91ZEN1c3RvbURhdGE6ZS5jbG91ZEN1c3RvbURhdGF8fFwiXCIsaXNSZXZva2VkOjg9PT1lLmxhc3RNZXNzYWdlRmxhZyxvbmxpbmVPbmx5RmxhZzohMX0sdXNlclByb2ZpbGU6bmV3IEZtKG4pLHBlZXJSZWFkVGltZTplLmMyY1BlZXJSZWFkVGltZSxpc1Bpbm5lZDoxPT09ZS5pc1Bpbm5lZH19cmV0dXJue2NvbnZlcnNhdGlvbklEOlwiR1JPVVBcIi5jb25jYXQoZS5ncm91cElEKSx0eXBlOlwiR1JPVVBcIixsYXN0TWVzc2FnZTp7bGFzdFRpbWU6ZS50aW1lLGxhc3RTZXF1ZW5jZTplLm1lc3NhZ2VSZWFkU2VxK2UudW5yZWFkQ291bnQsZnJvbUFjY291bnQ6ZS5tc2dHcm91cEZyb21BY2NvdW50LG1lc3NhZ2VGb3JTaG93OmUubWVzc2FnZVNob3csdHlwZTplLmxhc3RNc2cuZWxlbWVudHNbMF0/ZS5sYXN0TXNnLmVsZW1lbnRzWzBdLnR5cGU6bnVsbCxwYXlsb2FkOmUubGFzdE1zZy5lbGVtZW50c1swXT9lLmxhc3RNc2cuZWxlbWVudHNbMF0uY29udGVudDpudWxsLGNsb3VkQ3VzdG9tRGF0YTplLmNsb3VkQ3VzdG9tRGF0YXx8XCJcIixpc1Jldm9rZWQ6Mj09PWUubGFzdE1lc3NhZ2VGbGFnLG9ubGluZU9ubHlGbGFnOiExfSxncm91cFByb2ZpbGU6bmV3IEttKHtncm91cElEOmUuZ3JvdXBJRCxuYW1lOmUuZ3JvdXBOaWNrLGF2YXRhcjplLmdyb3VwSW1hZ2V9KSx1bnJlYWRDb3VudDplLnVucmVhZENvdW50LHBlZXJSZWFkVGltZTowLGlzUGlubmVkOjE9PT1lLmlzUGlubmVkfX0pKTt0Lmxlbmd0aD4wJiZ0aGlzLmdldE1vZHVsZShqYykub25Db252ZXJzYXRpb25zUHJvZmlsZVVwZGF0ZWQodCk7cmV0dXJuIG59fSx7a2V5OlwiZ2V0TG9jYWxNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKX19LHtrZXk6XCJkZWxldGVMb2NhbE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtlIGluc3RhbmNlb2YgUV8mJnRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5yZW1vdmUoZSl9fSx7a2V5Olwib25Db252ZXJzYXRpb25EZWxldGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uQ29udmVyc2F0aW9uRGVsZXRlZFwiKSksV2koZSkmJmUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50eXBlLG89ZS51c2VySUQscj1lLmdyb3VwSUQsYT1cIlwiOzE9PT1uP2E9XCJcIi5jb25jYXQocm8uQ09OVl9DMkMpLmNvbmNhdChvKToyPT09biYmKGE9XCJcIi5jb25jYXQocm8uQ09OVl9HUk9VUCkuY29uY2F0KHIpKSx0LmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uKGEpfSkpfX0se2tleTpcIm9uQ29udmVyc2F0aW9uUGlubmVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihXaShlKSl7dmFyIG49ITE7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbyxyPWUudHlwZSxhPWUudXNlcklELHM9ZS5ncm91cElEOzE9PT1yP289dC5nZXRMb2NhbENvbnZlcnNhdGlvbihcIlwiLmNvbmNhdChyby5DT05WX0MyQykuY29uY2F0KGEpKToyPT09ciYmKG89dC5nZXRMb2NhbENvbnZlcnNhdGlvbihcIlwiLmNvbmNhdChyby5DT05WX0dST1VQKS5jb25jYXQocykpKSxvJiYoS2kubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5vbkNvbnZlcnNhdGlvblBpbm5lZCBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KG8uY29udmVyc2F0aW9uSUQsXCIgaXNQaW5uZWQ6XCIpLmNvbmNhdChvLmlzUGlubmVkKSksby5pc1Bpbm5lZHx8KG8uaXNQaW5uZWQ9ITAsbj0hMCkpfSkpLG4mJnRoaXMuX3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50KCl9fX0se2tleTpcIm9uQ29udmVyc2F0aW9uVW5waW5uZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKFdpKGUpKXt2YXIgbj0hMTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvLHI9ZS50eXBlLGE9ZS51c2VySUQscz1lLmdyb3VwSUQ7MT09PXI/bz10LmdldExvY2FsQ29udmVyc2F0aW9uKFwiXCIuY29uY2F0KHJvLkNPTlZfQzJDKS5jb25jYXQoYSkpOjI9PT1yJiYobz10LmdldExvY2FsQ29udmVyc2F0aW9uKFwiXCIuY29uY2F0KHJvLkNPTlZfR1JPVVApLmNvbmNhdChzKSkpLG8mJihLaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLm9uQ29udmVyc2F0aW9uVW5waW5uZWQgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChvLmNvbnZlcnNhdGlvbklELFwiIGlzUGlubmVkOlwiKS5jb25jYXQoby5pc1Bpbm5lZCkpLG8uaXNQaW5uZWQmJihvLmlzUGlubmVkPSExLG49ITApKX0pKSxuJiZ0aGlzLl9zb3J0Q29udmVyc2F0aW9uTGlzdEFuZEVtaXRFdmVudCgpfX19LHtrZXk6XCJnZXRNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvbnZlcnNhdGlvbklELG89ZS5uZXh0UmVxTWVzc2FnZUlELHI9ZS5jb3VudCxhPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRNZXNzYWdlTGlzdFwiKSxzPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24obiksaT1cIlwiO2lmKHMmJnMuZ3JvdXBQcm9maWxlJiYoaT1zLmdyb3VwUHJvZmlsZS50eXBlKSxtdShpKSlyZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KGEsXCIgbm90IGF2YWlsYWJsZSBpbiBhdmNoYXRyb29tLiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KG4pKSx1bSh7bWVzc2FnZUxpc3Q6W10sbmV4dFJlcU1lc3NhZ2VJRDpcIlwiLGlzQ29tcGxldGVkOiEwfSk7KEppKHIpfHxyPjE1KSYmKHI9MTUpO3ZhciB1PXRoaXMuX2NvbXB1dGVMZWZ0Q291bnQoe2NvbnZlcnNhdGlvbklEOm4sbmV4dFJlcU1lc3NhZ2VJRDpvfSk7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdChhLFwiIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobixcIiBsZWZ0Q291bnQ6XCIpLmNvbmNhdCh1LFwiIGNvdW50OlwiKS5jb25jYXQocixcIiBuZXh0UmVxTWVzc2FnZUlEOlwiKS5jb25jYXQobykpLHRoaXMuX25lZWRHZXRIaXN0b3J5KHtjb252ZXJzYXRpb25JRDpuLGxlZnRDb3VudDp1LGNvdW50OnJ9KT90aGlzLmdldEhpc3RvcnlNZXNzYWdlcyh7Y29udmVyc2F0aW9uSUQ6bixuZXh0UmVxTWVzc2FnZUlEOm8sY291bnQ6MjB9KS50aGVuKChmdW5jdGlvbigpe3JldHVybiB1PXQuX2NvbXB1dGVMZWZ0Q291bnQoe2NvbnZlcnNhdGlvbklEOm4sbmV4dFJlcU1lc3NhZ2VJRDpvfSksWl8odC5fY29tcHV0ZVJlc3VsdCh7Y29udmVyc2F0aW9uSUQ6bixuZXh0UmVxTWVzc2FnZUlEOm8sY291bnQ6cixsZWZ0Q291bnQ6dX0pKX0pKTooS2kubG9nKFwiXCIuY29uY2F0KGEsXCIuZ2V0TWVzc2FnZUxpc3QgZ2V0IG1lc3NhZ2UgbGlzdCBmcm9tIG1lbW9yeVwiKSksdGhpcy5tb2RpZnlNZXNzYWdlTGlzdChuKSx1bSh0aGlzLl9jb21wdXRlUmVzdWx0KHtjb252ZXJzYXRpb25JRDpuLG5leHRSZXFNZXNzYWdlSUQ6byxjb3VudDpyLGxlZnRDb3VudDp1fSkpKX19LHtrZXk6XCJfY29tcHV0ZUxlZnRDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLm5leHRSZXFNZXNzYWdlSUQ7cmV0dXJuIG4/dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QodCkuZmluZEluZGV4KChmdW5jdGlvbihlKXtyZXR1cm4gZS5JRD09PW59KSk6dGhpcy5fZ2V0TWVzc2FnZUxpc3RTaXplKHQpfX0se2tleTpcIl9nZXRNZXNzYWdlTGlzdFNpemVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSkubGVuZ3RofX0se2tleTpcIl9uZWVkR2V0SGlzdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLmxlZnRDb3VudCxvPWUuY291bnQscj10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKHQpLGE9XCJcIjtyZXR1cm4gciYmci5ncm91cFByb2ZpbGUmJihhPXIuZ3JvdXBQcm9maWxlLnR5cGUpLCF5dSh0KSYmIW11KGEpJiYobjxvJiYhdGhpcy5fY29tcGxldGVkTWFwLmhhcyh0KSl9fSx7a2V5OlwiX2NvbXB1dGVSZXN1bHRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvbklELG49ZS5uZXh0UmVxTWVzc2FnZUlELG89ZS5jb3VudCxyPWUubGVmdENvdW50LGE9dGhpcy5fY29tcHV0ZU1lc3NhZ2VMaXN0KHtjb252ZXJzYXRpb25JRDp0LG5leHRSZXFNZXNzYWdlSUQ6bixjb3VudDpvfSkscz10aGlzLl9jb21wdXRlSXNDb21wbGV0ZWQoe2NvbnZlcnNhdGlvbklEOnQsbGVmdENvdW50OnIsY291bnQ6b30pLGk9dGhpcy5fY29tcHV0ZU5leHRSZXFNZXNzYWdlSUQoe21lc3NhZ2VMaXN0OmEsaXNDb21wbGV0ZWQ6cyxjb252ZXJzYXRpb25JRDp0fSksdT1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2NvbXB1dGVSZXN1bHQuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQodCk7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdCh1LFwiIGxlZnRDb3VudDpcIikuY29uY2F0KHIsXCIgY291bnQ6XCIpLmNvbmNhdChvLFwiIG5leHRSZXFNZXNzYWdlSUQ6XCIpLmNvbmNhdChpLFwiIGlzQ29tcGxldGVkOlwiKS5jb25jYXQocykpLHttZXNzYWdlTGlzdDphLG5leHRSZXFNZXNzYWdlSUQ6aSxpc0NvbXBsZXRlZDpzfX19LHtrZXk6XCJfY29tcHV0ZU1lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubmV4dFJlcU1lc3NhZ2VJRCxvPWUuY291bnQscj10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdCh0KSxhPXRoaXMuX2NvbXB1dGVJbmRleEVuZCh7bmV4dFJlcU1lc3NhZ2VJRDpuLG1lc3NhZ2VMaXN0OnJ9KSxzPXRoaXMuX2NvbXB1dGVJbmRleFN0YXJ0KHtpbmRleEVuZDphLGNvdW50Om99KTtyZXR1cm4gci5zbGljZShzLGEpfX0se2tleTpcIl9jb21wdXRlTmV4dFJlcU1lc3NhZ2VJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUubWVzc2FnZUxpc3Qsbj1lLmlzQ29tcGxldGVkLG89ZS5jb252ZXJzYXRpb25JRDtpZighbilyZXR1cm4gMD09PXQubGVuZ3RoP1wiXCI6dFswXS5JRDt2YXIgcj10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdChvKTtyZXR1cm4gMD09PXIubGVuZ3RoP1wiXCI6clswXS5JRH19LHtrZXk6XCJfY29tcHV0ZUluZGV4RW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXNzYWdlTGlzdCxuPXZvaWQgMD09PXQ/W106dCxvPWUubmV4dFJlcU1lc3NhZ2VJRDtyZXR1cm4gbz9uLmZpbmRJbmRleCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuSUQ9PT1vfSkpOm4ubGVuZ3RofX0se2tleTpcIl9jb21wdXRlSW5kZXhTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuaW5kZXhFbmQsbj1lLmNvdW50O3JldHVybiB0Pm4/dC1uOjB9fSx7a2V5OlwiX2NvbXB1dGVJc0NvbXBsZXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQ7cmV0dXJuISEoZS5sZWZ0Q291bnQ8PWUuY291bnQmJnRoaXMuX2NvbXBsZXRlZE1hcC5oYXModCkpfX0se2tleTpcImdldEhpc3RvcnlNZXNzYWdlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLm5leHRSZXFNZXNzYWdlSUQ7aWYodD09PXJvLkNPTlZfU1lTVEVNKXJldHVybiB1bSgpO2UuY291bnQ/ZS5jb3VudD4yMCYmKGUuY291bnQ9MjApOmUuY291bnQ9MTU7dmFyIG89dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsT2xkZXN0TWVzc2FnZUJ5Q29udmVyc2F0aW9uSUQodCk7b3x8KChvPXt9KS50aW1lPTAsby5zZXF1ZW5jZT0wLDA9PT10LmluZGV4T2Yocm8uQ09OVl9DMkMpPyhvLnRvPXQucmVwbGFjZShyby5DT05WX0MyQyxcIlwiKSxvLmNvbnZlcnNhdGlvblR5cGU9cm8uQ09OVl9DMkMpOjA9PT10LmluZGV4T2Yocm8uQ09OVl9HUk9VUCkmJihvLnRvPXQucmVwbGFjZShyby5DT05WX0dST1VQLFwiXCIpLG8uY29udmVyc2F0aW9uVHlwZT1yby5DT05WX0dST1VQKSk7dmFyIHI9XCJcIixhPW51bGw7c3dpdGNoKG8uY29udmVyc2F0aW9uVHlwZSl7Y2FzZSByby5DT05WX0MyQzpyZXR1cm4gcj10LnJlcGxhY2Uocm8uQ09OVl9DMkMsXCJcIiksKGE9dGhpcy5nZXRNb2R1bGUoJGMpKT9hLmdldFJvYW1pbmdNZXNzYWdlKHtjb252ZXJzYXRpb25JRDplLmNvbnZlcnNhdGlvbklELHBlZXJBY2NvdW50OnIsY291bnQ6ZS5jb3VudCxsYXN0TWVzc2FnZVRpbWU6dGhpcy5fcm9hbWluZ01lc3NhZ2VLZXlNYXAuaGFzKHQpP28udGltZTowLG1lc3NhZ2VLZXk6dGhpcy5fcm9hbWluZ01lc3NhZ2VLZXlNYXAuZ2V0KHQpfSk6Y20oe2NvZGU6VHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6TmR9KTtjYXNlIHJvLkNPTlZfR1JPVVA6cmV0dXJuKGE9dGhpcy5nZXRNb2R1bGUoWWMpKT9hLmdldFJvYW1pbmdNZXNzYWdlKHtjb252ZXJzYXRpb25JRDplLmNvbnZlcnNhdGlvbklELGdyb3VwSUQ6by50byxjb3VudDplLmNvdW50LHNlcXVlbmNlOm4mJiExPT09by5nZXRPbmxpbmVPbmx5RmxhZygpP28uc2VxdWVuY2UtMTpvLnNlcXVlbmNlfSk6Y20oe2NvZGU6VHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6TmR9KTtkZWZhdWx0OnJldHVybiB1bSgpfX19LHtrZXk6XCJwYXRjaENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihlKTtpZih0KXt2YXIgbj10Lmxhc3RNZXNzYWdlLG89bi5tZXNzYWdlRm9yU2hvdyxyPW4ucGF5bG9hZDtpZihMdShvKXx8THUocikpe3ZhciBhPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpO2lmKDA9PT1hLmxlbmd0aClyZXR1cm47dmFyIHM9YVthLmxlbmd0aC0xXTtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnBhdGNoQ29udmVyc2F0aW9uTGFzdE1lc3NhZ2UgY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIHBheWxvYWQ6XCIpLHMucGF5bG9hZCksdC51cGRhdGVMYXN0TWVzc2FnZShzKX19fX0se2tleTpcInN0b3JlUm9hbWluZ01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXSxuPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLG89bi5zdGFydHNXaXRoKHJvLkNPTlZfQzJDKT9yby5DT05WX0MyQzpyby5DT05WX0dST1VQLHI9bnVsbCxhPVtdLHM9MCxpPWUubGVuZ3RoLHU9bnVsbCxjPW89PT1yby5DT05WX0dST1VQLGw9dGhpcy5nZXRNb2R1bGUodGwpLHA9ZnVuY3Rpb24oKXtzPWM/ZS5sZW5ndGgtMTowLGk9Yz8wOmUubGVuZ3RofSxkPWZ1bmN0aW9uKCl7Yz8tLXM6KytzfSxnPWZ1bmN0aW9uKCl7cmV0dXJuIGM/cz49aTpzPGl9O2ZvcihwKCk7ZygpO2QoKSlpZihjJiYxPT09ZVtzXS5zZXF1ZW5jZSYmdGhpcy5zZXRDb21wbGV0ZWQobiksMSE9PWVbc10uaXNQbGFjZU1lc3NhZ2UpaWYoKHI9bmV3IFFfKGVbc10pKS50bz1lW3NdLnRvLHIuaXNTeXN0ZW1NZXNzYWdlPSEhZVtzXS5pc1N5c3RlbU1lc3NhZ2Usci5jb252ZXJzYXRpb25UeXBlPW8sND09PWVbc10uZXZlbnQ/dT17dHlwZTpyby5NU0dfR1JQX1RJUCxjb250ZW50OnQodCh7fSxlW3NdLmVsZW1lbnRzKSx7fSx7Z3JvdXBQcm9maWxlOmVbc10uZ3JvdXBQcm9maWxlfSl9OihlW3NdLmVsZW1lbnRzPWwucGFyc2VFbGVtZW50cyhlW3NdLmVsZW1lbnRzLGVbc10uZnJvbSksdT1lW3NdLmVsZW1lbnRzKSxjfHxyLnNldE5pY2tBbmRBdmF0YXIoe25pY2s6ZVtzXS5uaWNrLGF2YXRhcjplW3NdLmF2YXRhcn0pLEx1KHUpKXt2YXIgaD1uZXcgamQoZGcpO2guc2V0TWVzc2FnZShcImZyb206XCIuY29uY2F0KHIuZnJvbSxcIiB0bzpcIikuY29uY2F0KHIudG8sXCIgc2VxdWVuY2U6XCIpLmNvbmNhdChyLnNlcXVlbmNlLFwiIGV2ZW50OlwiKS5jb25jYXQoZVtzXS5ldmVudCkpLGguc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRMZXZlbChcIndhcm5pbmdcIikuZW5kKCl9ZWxzZSByLnNldEVsZW1lbnQodSksci5yZUluaXRpYWxpemUodGhpcy5nZXRNeVVzZXJJRCgpKSxhLnB1c2gocik7cmV0dXJuIHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci51bnNoaWZ0KGEpLHA9ZD1nPW51bGwsYX19LHtrZXk6XCJzZXRNZXNzYWdlUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLm1lc3NhZ2VJRCxvPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24odCk7aWYoS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRNZXNzYWdlUmVhZCBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KHQsXCIgdW5yZWFkQ291bnQ6XCIpLmNvbmNhdChvP28udW5yZWFkQ291bnQ6MCkpLCFvKXJldHVybiB1bSgpO2lmKG8udHlwZSE9PXJvLkNPTlZfR1JPVVB8fEx1KG8uZ3JvdXBBdEluZm9MaXN0KXx8dGhpcy5kZWxldGVHcm91cEF0VGlwcyh0KSwwPT09by51bnJlYWRDb3VudClyZXR1cm4gdW0oKTt2YXIgcj10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlKHQsbiksYT1udWxsO3N3aXRjaChvLnR5cGUpe2Nhc2Ugcm8uQ09OVl9DMkM6cmV0dXJuKGE9dGhpcy5nZXRNb2R1bGUoJGMpKT9hLnNldE1lc3NhZ2VSZWFkKHtjb252ZXJzYXRpb25JRDp0LGxhc3RNZXNzYWdlVGltZTpyP3IudGltZTpvLmxhc3RNZXNzYWdlLmxhc3RUaW1lfSk6Y20oe2NvZGU6VHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6TmR9KTtjYXNlIHJvLkNPTlZfR1JPVVA6cmV0dXJuKGE9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWWMpKT9hLnNldE1lc3NhZ2VSZWFkKHtjb252ZXJzYXRpb25JRDp0LGxhc3RNZXNzYWdlU2VxOnI/ci5zZXF1ZW5jZTpvLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZX0pOmNtKHtjb2RlOlRwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOk5kfSk7Y2FzZSByby5DT05WX1NZU1RFTTpyZXR1cm4gby51bnJlYWRDb3VudD0wLHRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpLHVtKCk7ZGVmYXVsdDpyZXR1cm4gdW0oKX19fSx7a2V5OlwidXBkYXRlSXNSZWFkQWZ0ZXJSZWFkUmVwb3J0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25JRCxuPWUubGFzdE1lc3NhZ2VTZXEsbz1lLmxhc3RNZXNzYWdlVGltZSxyPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KHQpO2lmKDAhPT1yLmxlbmd0aClmb3IodmFyIGEscz1yLmxlbmd0aC0xO3M+PTA7cy0tKWlmKGE9cltzXSwhKG8mJmEudGltZT5vfHxuJiZhLnNlcXVlbmNlPm4pKXtpZihcImluXCI9PT1hLmZsb3cmJmEuaXNSZWFkKWJyZWFrO2Euc2V0SXNSZWFkKCEwKX19fSx7a2V5OlwidXBkYXRlVW5yZWFkQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpLG49dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSk7aWYodCl7dmFyIG89dC51bnJlYWRDb3VudCxyPW4uZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hZS5pc1JlYWQmJiFlLmdldE9ubGluZU9ubHlGbGFnKCkmJiFlLmlzRGVsZXRlZH0pKS5sZW5ndGg7byE9PXImJih0LnVucmVhZENvdW50PXIsS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGRhdGVVbnJlYWRDb3VudCBmcm9tIFwiKS5jb25jYXQobyxcIiB0byBcIikuY29uY2F0KHIsXCIsIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSkpLHRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpKX19fSx7a2V5OlwidXBkYXRlSXNSZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihlKSxuPXRoaXMuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKTtpZih0JiYwIT09bi5sZW5ndGgmJiF5dSh0LnR5cGUpKXtmb3IodmFyIG89W10scj0wLGE9bi5sZW5ndGg7cjxhO3IrKylcImluXCIhPT1uW3JdLmZsb3c/XCJvdXRcIiE9PW5bcl0uZmxvd3x8bltyXS5pc1JlYWR8fG5bcl0uc2V0SXNSZWFkKCEwKTpvLnB1c2gobltyXSk7dmFyIHM9MDtpZih0LnR5cGU9PT1yby5DT05WX0MyQyl7dmFyIGk9by5zbGljZSgtdC51bnJlYWRDb3VudCkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5pc1Jldm9rZWR9KSkubGVuZ3RoO3M9by5sZW5ndGgtdC51bnJlYWRDb3VudC1pfWVsc2Ugcz1vLmxlbmd0aC10LnVucmVhZENvdW50O2Zvcih2YXIgdT0wO3U8cyYmIW9bdV0uaXNSZWFkO3UrKylvW3VdLnNldElzUmVhZCghMCl9fX0se2tleTpcImRlbGV0ZUdyb3VwQXRUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUdyb3VwQXRUaXBzXCIpO0tpLmxvZyhcIlwiLmNvbmNhdCh0KSk7dmFyIG49dGhpcy5fY29udmVyc2F0aW9uTWFwLmdldChlKTtpZighbilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7dmFyIG89bi5ncm91cEF0SW5mb0xpc3Q7aWYoMD09PW8ubGVuZ3RoKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt2YXIgcj10aGlzLmdldE15VXNlcklEKCk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmJsLHJlcXVlc3REYXRhOnttZXNzYWdlTGlzdFRvRGVsZXRlOm8ubWFwKChmdW5jdGlvbihlKXtyZXR1cm57ZnJvbTplLmZyb20sdG86cixtZXNzYWdlU2VxOmUuX19zZXF1ZW5jZSxtZXNzYWdlUmFuZG9tOmUuX19yYW5kb20sZ3JvdXBJRDplLmdyb3VwSUR9fSkpfX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdCh0LFwiIG9rLiBjb3VudDpcIikuY29uY2F0KG8ubGVuZ3RoKSksbi5jbGVhckdyb3VwQXRJbmZvTGlzdCgpLFByb21pc2UucmVzb2x2ZSgpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gS2kuZXJyb3IoXCJcIi5jb25jYXQodCxcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxjbShlKX0pKX19LHtrZXk6XCJhcHBlbmRUb01lc3NhZ2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnB1c2hJbihlKX19LHtrZXk6XCJzZXRNZXNzYWdlUmFuZG9tXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zaW5nbHlMaW5rZWRMaXN0LnNldChlLnJhbmRvbSl9fSx7a2V5OlwiZGVsZXRlTWVzc2FnZVJhbmRvbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuc2luZ2x5TGlua2VkTGlzdC5kZWxldGUoZS5yYW5kb20pfX0se2tleTpcInB1c2hJbnRvTWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuISghdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnB1c2hJbih0LG4pfHx0aGlzLl9pc01lc3NhZ2VGcm9tQ3VycmVudEluc3RhbmNlKHQpJiYhbikmJihlLnB1c2godCksITApfX0se2tleTpcIl9pc01lc3NhZ2VGcm9tQ3VycmVudEluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2luZ2x5TGlua2VkTGlzdC5oYXMoZS5yYW5kb20pfX0se2tleTpcInJldm9rZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnJldm9rZShlLHQsbil9fSx7a2V5OlwiZ2V0UGVlclJlYWRUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3BlZXJSZWFkVGltZU1hcC5nZXQoZSl9fSx7a2V5OlwicmVjb3JkUGVlclJlYWRUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9wZWVyUmVhZFRpbWVNYXAuaGFzKGUpP3RoaXMuX3BlZXJSZWFkVGltZU1hcC5nZXQoZSk8dCYmdGhpcy5fcGVlclJlYWRUaW1lTWFwLnNldChlLHQpOnRoaXMuX3BlZXJSZWFkVGltZU1hcC5zZXQoZSx0KX19LHtrZXk6XCJ1cGRhdGVNZXNzYWdlSXNQZWVyUmVhZFByb3BlcnR5XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZihlLnN0YXJ0c1dpdGgocm8uQ09OVl9DMkMpJiZ0PjApe3ZhciBuPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci51cGRhdGVNZXNzYWdlSXNQZWVyUmVhZFByb3BlcnR5KGUsdCk7bi5sZW5ndGg+MCYmdGhpcy5lbWl0T3V0ZXJFdmVudChvby5NRVNTQUdFX1JFQURfQllfUEVFUixuKX19fSx7a2V5OlwidXBkYXRlTWVzc2FnZUlzUmVhZFByb3BlcnR5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihlKSxuPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpO2lmKHQmJjAhPT1uLmxlbmd0aCYmIXl1KHQudHlwZSkpe2Zvcih2YXIgbz1bXSxyPTA7cjxuLmxlbmd0aDtyKyspXCJpblwiIT09bltyXS5mbG93P1wib3V0XCIhPT1uW3JdLmZsb3d8fG5bcl0uaXNSZWFkfHxuW3JdLnNldElzUmVhZCghMCk6by5wdXNoKG5bcl0pO3ZhciBhPTA7aWYodC50eXBlPT09cm8uQ09OVl9DMkMpe3ZhciBzPW8uc2xpY2UoLXQudW5yZWFkQ291bnQpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNSZXZva2VkfSkpLmxlbmd0aDthPW8ubGVuZ3RoLXQudW5yZWFkQ291bnQtc31lbHNlIGE9by5sZW5ndGgtdC51bnJlYWRDb3VudDtmb3IodmFyIGk9MDtpPGEmJiFvW2ldLmlzUmVhZDtpKyspb1tpXS5zZXRJc1JlYWQoITApfX19LHtrZXk6XCJ1cGRhdGVNZXNzYWdlSXNNb2RpZmllZFByb3BlcnR5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnVwZGF0ZU1lc3NhZ2VJc01vZGlmaWVkUHJvcGVydHkoZSl9fSx7a2V5Olwic2V0Q29tcGxldGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRDb21wbGV0ZWQuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSkpLHRoaXMuX2NvbXBsZXRlZE1hcC5zZXQoZSwhMCl9fSx7a2V5OlwidXBkYXRlUm9hbWluZ01lc3NhZ2VLZXlcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3JvYW1pbmdNZXNzYWdlS2V5TWFwLnNldChlLHQpfX0se2tleTpcImdldENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0Q29udmVyc2F0aW9uTGlzdFwiKTtLaS5sb2codCksdGhpcy5fcGFnaW5nU3RhdHVzPT09Q2MuUkVKRUNURUQmJihLaS5sb2coXCJcIi5jb25jYXQodCxcIi4gY29udGludWUgdG8gc3luYyBjb252ZXJzYXRpb25MaXN0XCIpKSx0aGlzLl9zeW5jQ29udmVyc2F0aW9uTGlzdCgpKTt2YXIgbj1uZXcgamQodmcpO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpPbCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpfX0pLnRoZW4oKGZ1bmN0aW9uKG8pe3ZhciByPW8uZGF0YS5jb252ZXJzYXRpb25zLGE9dm9pZCAwPT09cj9bXTpyLHM9ZS5fZ2V0Q29udmVyc2F0aW9uT3B0aW9ucyhhKTtyZXR1cm4gZS5fdXBkYXRlTG9jYWxDb252ZXJzYXRpb25MaXN0KHMsITApLGUuX3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0KCksZS5faGFuZGxlQzJDUGVlclJlYWRUaW1lKCksbi5zZXRNZXNzYWdlKFwiY29udmVyc2F0aW9uIGNvdW50OiBcIi5jb25jYXQoYS5sZW5ndGgpKS5zZXROZXR3b3JrVHlwZShlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdCh0LFwiIG9rXCIpKSx1bSh7Y29udmVyc2F0aW9uTGlzdDplLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKG8pe3JldHVybiBlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PW0oZSwyKSxyPXRbMF0sYT10WzFdO24uc2V0RXJyb3IobyxyLGEpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KHQsXCIgZmFpbGVkLiBlcnJvcjpcIiksbyksY20obyl9KSl9fSx7a2V5OlwiX2hhbmRsZUMyQ1BlZXJSZWFkVGltZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsdD1EKHRoaXMuX2NvbnZlcnNhdGlvbk1hcCk7dHJ5e2Zvcih0LnMoKTshKGU9dC5uKCkpLmRvbmU7KXt2YXIgbj1tKGUudmFsdWUsMiksbz1uWzBdLHI9blsxXTtyLnR5cGU9PT1yby5DT05WX0MyQyYmKEtpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5faGFuZGxlQzJDUGVlclJlYWRUaW1lIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobyxcIiBwZWVyUmVhZFRpbWU6XCIpLmNvbmNhdChyLnBlZXJSZWFkVGltZSkpLHRoaXMucmVjb3JkUGVlclJlYWRUaW1lKG8sci5wZWVyUmVhZFRpbWUpKX19Y2F0Y2goYSl7dC5lKGEpfWZpbmFsbHl7dC5mKCl9fX0se2tleTpcImdldENvbnZlcnNhdGlvblByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXM7aWYoKHQ9dGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhlKT90aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGUpOm5ldyBqbSh7Y29udmVyc2F0aW9uSUQ6ZSx0eXBlOmUuc2xpY2UoMCwzKT09PXJvLkNPTlZfQzJDP3JvLkNPTlZfQzJDOnJvLkNPTlZfR1JPVVB9KSkuX2lzSW5mb0NvbXBsZXRlZHx8dC50eXBlPT09cm8uQ09OVl9TWVNURU0pcmV0dXJuIHVtKHtjb252ZXJzYXRpb246dH0pO3ZhciBvPW5ldyBqZChNZykscj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiKTtyZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KHIsXCIuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSxcIiByZW1hcms6XCIpLmNvbmNhdCh0LnJlbWFyayxcIiBsYXN0TWVzc2FnZTpcIiksdC5sYXN0TWVzc2FnZSksdGhpcy5fdXBkYXRlVXNlck9yR3JvdXBQcm9maWxlQ29tcGxldGVseSh0KS50aGVuKChmdW5jdGlvbihhKXtvLnNldE5ldHdvcmtUeXBlKG4uZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImNvbnZlcnNhdGlvbklEOlwiLmNvbmNhdChlLFwiIHVucmVhZENvdW50OlwiKS5jb25jYXQoYS5kYXRhLmNvbnZlcnNhdGlvbi51bnJlYWRDb3VudCkpLmVuZCgpO3ZhciBzPW4uZ2V0TW9kdWxlKHpjKTtpZihzJiZ0LnR5cGU9PT1yby5DT05WX0MyQyl7dmFyIGk9ZS5yZXBsYWNlKHJvLkNPTlZfQzJDLFwiXCIpO2lmKHMuaXNNeUZyaWVuZChpKSl7dmFyIHU9cy5nZXRGcmllbmRSZW1hcmsoaSk7dC5yZW1hcmshPT11JiYodC5yZW1hcms9dSxLaS5sb2coXCJcIi5jb25jYXQocixcIi4gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIHBhdGNoIHJlbWFyazpcIikuY29uY2F0KHQucmVtYXJrKSkpfX1yZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KHIsXCIgb2suIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSkpLGF9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe3JldHVybiBuLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciByPW0obiwyKSxhPXJbMF0scz1yWzFdO28uc2V0RXJyb3IodCxhLHMpLnNldE1lc3NhZ2UoXCJjb252ZXJzYXRpb25JRDpcIi5jb25jYXQoZSkpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KHIsXCIgZmFpbGVkLiBlcnJvcjpcIiksdCksY20odCl9KSl9fSx7a2V5OlwiX3VwZGF0ZVVzZXJPckdyb3VwUHJvZmlsZUNvbXBsZXRlbHlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBlLnR5cGU9PT1yby5DT05WX0MyQz90aGlzLmdldE1vZHVsZShqYykuZ2V0VXNlclByb2ZpbGUoe3VzZXJJRExpc3Q6W2UudG9BY2NvdW50XX0pLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciBvPW4uZGF0YTtyZXR1cm4gMD09PW8ubGVuZ3RoP2NtKG5ldyBhbSh7Y29kZTpUcC5VU0VSX09SX0dST1VQX05PVF9GT1VORCxtZXNzYWdlOm5kfSkpOihlLnVzZXJQcm9maWxlPW9bMF0sZS5faXNJbmZvQ29tcGxldGVkPSEwLHQuX3Vuc2hpZnRDb252ZXJzYXRpb24oZSksdW0oe2NvbnZlcnNhdGlvbjplfSkpfSkpOnRoaXMuZ2V0TW9kdWxlKFljKS5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6ZS50b0FjY291bnR9KS50aGVuKChmdW5jdGlvbihuKXtyZXR1cm4gZS5ncm91cFByb2ZpbGU9bi5kYXRhLmdyb3VwLGUuX2lzSW5mb0NvbXBsZXRlZD0hMCx0Ll91bnNoaWZ0Q29udmVyc2F0aW9uKGUpLHVtKHtjb252ZXJzYXRpb246ZX0pfSkpfX0se2tleTpcIl91bnNoaWZ0Q29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSBpbnN0YW5jZW9mIGptJiYhdGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhlLmNvbnZlcnNhdGlvbklEKSYmKHRoaXMuX2NvbnZlcnNhdGlvbk1hcD1uZXcgTWFwKFtbZS5jb252ZXJzYXRpb25JRCxlXV0uY29uY2F0KHYodGhpcy5fY29udmVyc2F0aW9uTWFwKSkpLHRoaXMuX3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0KCksdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSkpfX0se2tleTpcImRlbGV0ZUNvbnZlcnNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLHRvQWNjb3VudDp2b2lkIDAsdHlwZTp2b2lkIDB9O2lmKCF0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGUpKXt2YXIgbz1uZXcgYW0oe2NvZGU6VHAuQ09OVkVSU0FUSU9OX05PVF9GT1VORCxtZXNzYWdlOnRkfSk7cmV0dXJuIGNtKG8pfXN3aXRjaCh0aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGUpLnR5cGUpe2Nhc2Ugcm8uQ09OVl9DMkM6bi50eXBlPTEsbi50b0FjY291bnQ9ZS5yZXBsYWNlKHJvLkNPTlZfQzJDLFwiXCIpO2JyZWFrO2Nhc2Ugcm8uQ09OVl9HUk9VUDpuLnR5cGU9MixuLnRvR3JvdXBJRD1lLnJlcGxhY2Uocm8uQ09OVl9HUk9VUCxcIlwiKTticmVhaztjYXNlIHJvLkNPTlZfU1lTVEVNOnJldHVybiB0aGlzLmdldE1vZHVsZShZYykuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2Uoe21lc3NhZ2VMaXN0OnRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpfSksdGhpcy5kZWxldGVMb2NhbENvbnZlcnNhdGlvbihlKSx1bSh7Y29udmVyc2F0aW9uSUQ6ZX0pO2RlZmF1bHQ6dmFyIHI9bmV3IGFtKHtjb2RlOlRwLkNPTlZFUlNBVElPTl9VTl9SRUNPUkRFRF9UWVBFLG1lc3NhZ2U6b2R9KTtyZXR1cm4gY20ocil9dmFyIGE9bmV3IGpkKHlnKTthLnNldE1lc3NhZ2UoXCJjb252ZXJzYXRpb25JRDpcIi5jb25jYXQoZSkpO3ZhciBzPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVDb252ZXJzYXRpb25cIik7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdChzLFwiLiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUpKSx0aGlzLnNldE1lc3NhZ2VSZWFkKHtjb252ZXJzYXRpb25JRDplfSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gdC5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6TGwscmVxdWVzdERhdGE6bn0pfSkpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQocyxcIiBva1wiKSksdC5kZWxldGVMb2NhbENvbnZlcnNhdGlvbihlKSx1bSh7Y29udmVyc2F0aW9uSUQ6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChzLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpfX0se2tleTpcInBpbkNvbnZlcnNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvbnZlcnNhdGlvbklELG89ZS5pc1Bpbm5lZDtpZighdGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhuKSlyZXR1cm4gY20oe2NvZGU6VHAuQ09OVkVSU0FUSU9OX05PVF9GT1VORCxtZXNzYWdlOnRkfSk7dmFyIHI9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihuKTtpZihyLmlzUGlubmVkPT09bylyZXR1cm4gdW0oe2NvbnZlcnNhdGlvbklEOm59KTt2YXIgYT1uZXcgamQoSWcpO2Euc2V0TWVzc2FnZShcImNvbnZlcnNhdGlvbklEOlwiLmNvbmNhdChuLFwiIGlzUGlubmVkOlwiKS5jb25jYXQobykpO3ZhciBzPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5waW5Db252ZXJzYXRpb25cIik7S2kubG9nKFwiXCIuY29uY2F0KHMsXCIuIGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQobixcIiBpc1Bpbm5lZDpcIikuY29uY2F0KG8pKTt2YXIgaT1udWxsO3JldHVybiB2dShuKT9pPXt0eXBlOjEsdG9BY2NvdW50Om4ucmVwbGFjZShyby5DT05WX0MyQyxcIlwiKX06TXUobikmJihpPXt0eXBlOjIsZ3JvdXBJRDpuLnJlcGxhY2Uocm8uQ09OVl9HUk9VUCxcIlwiKX0pLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlJsLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLmdldE15VXNlcklEKCksb3BlcmF0aW9uVHlwZTohMD09PW8/MToyLGl0ZW1MaXN0OltpXX19KS50aGVuKChmdW5jdGlvbigpe3JldHVybiBhLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KHMsXCIgb2tcIikpLHIuaXNQaW5uZWQhPT1vJiYoci5pc1Bpbm5lZD1vLHQuX3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50KCkpLFpfKHtjb252ZXJzYXRpb25JRDpufSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KHMsXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksY20oZSl9KSl9fSx7a2V5OlwiZGVsZXRlTG9jYWxDb252ZXJzYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGUpO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlTG9jYWxDb252ZXJzYXRpb24gY29udmVyc2F0aW9uSUQ6XCIpLmNvbmNhdChlLFwiIGhhczpcIikuY29uY2F0KHQpKSx0JiYodGhpcy5fY29udmVyc2F0aW9uTWFwLmRlbGV0ZShlKSx0aGlzLl9yb2FtaW5nTWVzc2FnZUtleU1hcC5kZWxldGUoZSksdGhpcy5fc2V0U3RvcmFnZUNvbnZlcnNhdGlvbkxpc3QoKSx0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucmVtb3ZlQnlDb252ZXJzYXRpb25JRChlKSx0aGlzLl9jb21wbGV0ZWRNYXAuZGVsZXRlKGUpLHRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpKX19LHtrZXk6XCJpc01lc3NhZ2VTZW50QnlDdXJyZW50SW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hKCF0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuaGFzTG9jYWxNZXNzYWdlKGUuY29udmVyc2F0aW9uSUQsZS5JRCkmJiF0aGlzLnNpbmdseUxpbmtlZExpc3QuaGFzKGUucmFuZG9tKSl9fSx7a2V5OlwibW9kaWZ5TWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihlLnN0YXJ0c1dpdGgocm8uQ09OVl9DMkMpKXt2YXIgdD1EYXRlLm5vdygpO3RoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5tb2RpZnlNZXNzYWdlU2VudEJ5UGVlcihlKTt2YXIgbj10aGlzLmdldE1vZHVsZShqYykuZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHRoaXMuZ2V0TXlVc2VySUQoKSk7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLm1vZGlmeU1lc3NhZ2VTZW50QnlNZSh7Y29udmVyc2F0aW9uSUQ6ZSxsYXRlc3ROaWNrOm4ubmljayxsYXRlc3RBdmF0YXI6bi5hdmF0YXJ9KSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm1vZGlmeU1lc3NhZ2VMaXN0IGNvbnZlcnNhdGlvbklEOlwiKS5jb25jYXQoZSxcIiBjb3N0IFwiKS5jb25jYXQoRGF0ZS5ub3coKS10LFwiIG1zXCIpKX19fSx7a2V5OlwidXBkYXRlVXNlclByb2ZpbGVTcGVjaWZpZWRLZXlcIix2YWx1ZTpmdW5jdGlvbihlKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZVVzZXJQcm9maWxlU3BlY2lmaWVkS2V5IG9wdGlvbnM6XCIpLGUpO3ZhciB0PWUuY29udmVyc2F0aW9uSUQsbj1lLm5pY2ssbz1lLmF2YXRhcjtpZih0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKHQpKXt2YXIgcj10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KHQpLnVzZXJQcm9maWxlOyRpKG4pJiZyLm5pY2shPT1uJiYoci5uaWNrPW4pLCRpKG8pJiZyLmF2YXRhciE9PW8mJihyLmF2YXRhcj1vKSx0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX19fSx7a2V5Olwib25NeVByb2ZpbGVNb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsbz10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpLHI9RGF0ZS5ub3coKTtvLmZvckVhY2goKGZ1bmN0aW9uKG8pe24ubW9kaWZ5TWVzc2FnZVNlbnRCeU1lKHQoe2NvbnZlcnNhdGlvbklEOm8uY29udmVyc2F0aW9uSUR9LGUpKX0pKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTXlQcm9maWxlTW9kaWZpZWQuIG1vZGlmeSBhbGwgbWVzc2FnZXMgc2VudCBieSBtZSwgY29zdCBcIikuY29uY2F0KERhdGUubm93KCktcixcIiBtc1wiKSl9fSx7a2V5OlwibW9kaWZ5TWVzc2FnZVNlbnRCeU1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLm1vZGlmeU1lc3NhZ2VTZW50QnlNZShlKX19LHtrZXk6XCJnZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExhdGVzdE1lc3NhZ2VTZW50QnlNZShlKX19LHtrZXk6XCJtb2RpZnlNZXNzYWdlU2VudEJ5UGVlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyKGUsdCl9fSx7a2V5OlwiZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyKGUpfX0se2tleTpcInB1c2hJbnRvTm90aWNlUmVzdWx0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hKCF0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucHVzaEluKHQpfHx0aGlzLnNpbmdseUxpbmtlZExpc3QuaGFzKHQucmFuZG9tKSkmJihlLnB1c2godCksITApfX0se2tleTpcImdldEdyb3VwTG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRHcm91cExvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZShlKX19LHtrZXk6XCJjaGVja0FuZFBhdGNoUmVtYXJrXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZigwIT09dGhpcy5fY29udmVyc2F0aW9uTWFwLnNpemUpe3ZhciBlPXRoaXMuZ2V0TW9kdWxlKHpjKTtpZihlKXt2YXIgdD12KHRoaXMuX2NvbnZlcnNhdGlvbk1hcC52YWx1ZXMoKSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlPT09cm8uQ09OVl9DMkN9KSk7aWYoMCE9PXQubGVuZ3RoKXt2YXIgbj0hMSxvPTA7dC5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgcj10LmNvbnZlcnNhdGlvbklELnJlcGxhY2Uocm8uQ09OVl9DMkMsXCJcIik7aWYoZS5pc015RnJpZW5kKHIpKXt2YXIgYT1lLmdldEZyaWVuZFJlbWFyayhyKTt0LnJlbWFyayE9PWEmJih0LnJlbWFyaz1hLG8rPTEsbj0hMCl9fSkpLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY2hlY2tBbmRQYXRjaFJlbWFyay4gYzJjIGNvbnZlcnNhdGlvbiBjb3VudDpcIikuY29uY2F0KHQubGVuZ3RoLFwiLCBwYXRjaGVkIGNvdW50OlwiKS5jb25jYXQobykpLG4mJnRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX19fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9wYWdpbmdTdGF0dXM9Q2MuTk9UX1NUQVJULHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5yZXNldCgpLHRoaXMuX3JvYW1pbmdNZXNzYWdlS2V5TWFwLmNsZWFyKCksdGhpcy5zaW5nbHlMaW5rZWRMaXN0LnJlc2V0KCksdGhpcy5fcGVlclJlYWRUaW1lTWFwLmNsZWFyKCksdGhpcy5fY29tcGxldGVkTWFwLmNsZWFyKCksdGhpcy5fY29udmVyc2F0aW9uTWFwLmNsZWFyKCksdGhpcy5fcGFnaW5nVGltZVN0YW1wPTAsdGhpcy5fcGFnaW5nU3RhcnRJbmRleD0wLHRoaXMuX3BhZ2luZ1Bpbm5lZFRpbWVTdGFtcD0wLHRoaXMuX3BhZ2luZ1Bpbm5lZFN0YXJ0SW5kZXg9MCx0aGlzLnJlc2V0UmVhZHkoKX19XSkscn0ocGwpLFltPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fZ3JvdXBNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJHcm91cFRpcHNIYW5kbGVyXCIsdGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwPW5ldyBNYXAsdGhpcy5fY2hlY2tDb3VudE1hcD1uZXcgTWFwLHRoaXMuTUFYX0NIRUNLX0NPVU5UPTR9cmV0dXJuIGEoZSxbe2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UlMT09MCYmdGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLnNpemU+MCYmdGhpcy5fY2hlY2tDYWNoZWRHcm91cFRpcHMoKX19LHtrZXk6XCJfY2hlY2tDYWNoZWRHcm91cFRpcHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmZvckVhY2goKGZ1bmN0aW9uKHQsbil7dmFyIG89ZS5fY2hlY2tDb3VudE1hcC5nZXQobikscj1lLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pO0tpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2NoZWNrQ2FjaGVkR3JvdXBUaXBzIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIGhhc0xvY2FsR3JvdXA6XCIpLmNvbmNhdChyLFwiIGNoZWNrQ291bnQ6XCIpLmNvbmNhdChvKSkscj8oZS5fbm90aWZ5Q2FjaGVkR3JvdXBUaXBzKG4pLGUuX2NoZWNrQ291bnRNYXAuZGVsZXRlKG4pLGUuX2dyb3VwTW9kdWxlLmRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbShuKSk6bz49ZS5NQVhfQ0hFQ0tfQ09VTlQ/KGUuX2RlbGV0ZUNhY2hlZEdyb3VwVGlwcyhuKSxlLl9jaGVja0NvdW50TWFwLmRlbGV0ZShuKSk6KG8rKyxlLl9jaGVja0NvdW50TWFwLnNldChuLG8pKX0pKX19LHtrZXk6XCJvbk5ld0dyb3VwVGlwc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe0tpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblJlY2VpdmVHcm91cFRpcHMgY291bnQ6XCIpLmNvbmNhdChlLmRhdGFMaXN0Lmxlbmd0aCkpO3ZhciB0PXRoaXMubmV3R3JvdXBUaXBzU3RvcmVkQW5kU3VtbWFyeShlKSxuPXQuZXZlbnREYXRhTGlzdCxvPXQucmVzdWx0LHI9dC5BVkNoYXRSb29tTWVzc2FnZUxpc3Q7KHIubGVuZ3RoPjAmJnRoaXMuX2dyb3VwTW9kdWxlLm9uQVZDaGF0Um9vbU1lc3NhZ2Uociksbi5sZW5ndGg+MCkmJih0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoSmMpLm9uTmV3TWVzc2FnZSh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6bixpc0luc3RhbnRNZXNzYWdlOiEwfSksdGhpcy5fZ3JvdXBNb2R1bGUudXBkYXRlTmV4dE1lc3NhZ2VTZXEobikpO28ubGVuZ3RoPjAmJih0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChvby5NRVNTQUdFX1JFQ0VJVkVELG8pLHRoaXMuaGFuZGxlTWVzc2FnZUxpc3QobykpfX0se2tleTpcIm5ld0dyb3VwVGlwc1N0b3JlZEFuZFN1bW1hcnlcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIG49ZS5ldmVudCxvPWUuZGF0YUxpc3Qscj1udWxsLGE9W10scz1bXSxpPXt9LHU9W10sYz0wLGw9by5sZW5ndGg7YzxsO2MrKyl7dmFyIHA9b1tjXSxkPXAuZ3JvdXBQcm9maWxlLmdyb3VwSUQsZz10aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKGQpO2lmKGd8fCF0aGlzLl9ncm91cE1vZHVsZS5pc1Vuam9pbmVkQVZDaGF0Um9vbShkKSlpZihnKWlmKHRoaXMuX2dyb3VwTW9kdWxlLmlzTWVzc2FnZUZyb21BVkNoYXRyb29tKGQpKXt2YXIgaD1odShwKTtoLmV2ZW50PW4sdS5wdXNoKGgpfWVsc2V7cC5jdXJyZW50VXNlcj10aGlzLl9ncm91cE1vZHVsZS5nZXRNeVVzZXJJRCgpLHAuY29udmVyc2F0aW9uVHlwZT1yby5DT05WX0dST1VQLChyPW5ldyBRXyhwKSkuc2V0RWxlbWVudCh7dHlwZTpyby5NU0dfR1JQX1RJUCxjb250ZW50OnQodCh7fSxwLmVsZW1lbnRzKSx7fSx7Z3JvdXBQcm9maWxlOnAuZ3JvdXBQcm9maWxlfSl9KSxyLmlzU3lzdGVtTWVzc2FnZT0hMTt2YXIgZj10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoSmMpLF89ci5jb252ZXJzYXRpb25JRDtpZig2PT09bilyLnNldE9ubGluZU9ubHlGbGFnKCEwKSxzLnB1c2gocik7ZWxzZSBpZighZi5wdXNoSW50b05vdGljZVJlc3VsdChzLHIpKWNvbnRpbnVlO2lmKDYhPT1ufHwhZi5nZXRMb2NhbENvbnZlcnNhdGlvbihfKSl7aWYoNiE9PW4pdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGxsKS5hZGRNZXNzYWdlU2VxdWVuY2Uoe2tleTpxZCxtZXNzYWdlOnJ9KTtpZihKaShpW19dKSlpW19dPWEucHVzaCh7Y29udmVyc2F0aW9uSUQ6Xyx1bnJlYWRDb3VudDpcImluXCI9PT1yLmZsb3cmJnIuZ2V0T25saW5lT25seUZsYWcoKT8wOjEsdHlwZTpyLmNvbnZlcnNhdGlvblR5cGUsc3ViVHlwZTpyLmNvbnZlcnNhdGlvblN1YlR5cGUsbGFzdE1lc3NhZ2U6cn0pLTE7ZWxzZXt2YXIgbT1pW19dO2FbbV0udHlwZT1yLmNvbnZlcnNhdGlvblR5cGUsYVttXS5zdWJUeXBlPXIuY29udmVyc2F0aW9uU3ViVHlwZSxhW21dLmxhc3RNZXNzYWdlPXIsXCJpblwiIT09ci5mbG93fHxyLmdldE9ubGluZU9ubHlGbGFnKCl8fGFbbV0udW5yZWFkQ291bnQrK319fWVsc2UgdGhpcy5fY2FjaGVHcm91cFRpcHNBbmRQcm9iZSh7Z3JvdXBJRDpkLGV2ZW50Om4saXRlbTpwfSl9cmV0dXJue2V2ZW50RGF0YUxpc3Q6YSxyZXN1bHQ6cyxBVkNoYXRSb29tTWVzc2FnZUxpc3Q6dX19fSx7a2V5OlwiaGFuZGxlTWVzc2FnZUxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7c3dpdGNoKGUucGF5bG9hZC5vcGVyYXRpb25UeXBlKXtjYXNlIDE6dC5fb25OZXdNZW1iZXJDb21lSW4oZSk7YnJlYWs7Y2FzZSAyOnQuX29uTWVtYmVyUXVpdChlKTticmVhaztjYXNlIDM6dC5fb25NZW1iZXJLaWNrZWRPdXQoZSk7YnJlYWs7Y2FzZSA0OnQuX29uTWVtYmVyU2V0QWRtaW4oZSk7YnJlYWs7Y2FzZSA1OnQuX29uTWVtYmVyQ2FuY2VsbGVkQWRtaW4oZSk7YnJlYWs7Y2FzZSA2OnQuX29uR3JvdXBQcm9maWxlTW9kaWZpZWQoZSk7YnJlYWs7Y2FzZSA3OnQuX29uTWVtYmVySW5mb01vZGlmaWVkKGUpO2JyZWFrO2RlZmF1bHQ6S2kud2FybihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuaGFuZGxlTWVzc2FnZUxpc3QgdW5rbm93biBvcGVyYXRpb25UeXBlOlwiKS5jb25jYXQoZS5wYXlsb2FkLm9wZXJhdGlvblR5cGUpKX19KSl9fSx7a2V5OlwiX29uTmV3TWVtYmVyQ29tZUluXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLG49dC5tZW1iZXJOdW0sbz10Lmdyb3VwUHJvZmlsZS5ncm91cElELHI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7ciYmamkobikmJihyLm1lbWJlck51bT1uKX19LHtrZXk6XCJfb25NZW1iZXJRdWl0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLG49dC5tZW1iZXJOdW0sbz10Lmdyb3VwUHJvZmlsZS5ncm91cElELHI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7ciYmamkobikmJihyLm1lbWJlck51bT1uKSx0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVMb2NhbEdyb3VwTWVtYmVycyhvLGUucGF5bG9hZC51c2VySURMaXN0KX19LHtrZXk6XCJfb25NZW1iZXJLaWNrZWRPdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQsbj10Lm1lbWJlck51bSxvPXQuZ3JvdXBQcm9maWxlLmdyb3VwSUQscj10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtyJiZqaShuKSYmKHIubWVtYmVyTnVtPW4pLHRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzKG8sZS5wYXlsb2FkLnVzZXJJRExpc3QpfX0se2tleTpcIl9vbk1lbWJlclNldEFkbWluXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElELG49ZS5wYXlsb2FkLnVzZXJJRExpc3Qsbz10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoV2MpO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49by5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyh0LGUpO24mJm4udXBkYXRlUm9sZShyby5HUlBfTUJSX1JPTEVfQURNSU4pfSkpfX0se2tleTpcIl9vbk1lbWJlckNhbmNlbGxlZEFkbWluXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElELG49ZS5wYXlsb2FkLnVzZXJJRExpc3Qsbz10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoV2MpO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49by5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyh0LGUpO24mJm4udXBkYXRlUm9sZShyby5HUlBfTUJSX1JPTEVfTUVNQkVSKX0pKX19LHtrZXk6XCJfb25Hcm91cFByb2ZpbGVNb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnBheWxvYWQsbz1uLm5ld0dyb3VwUHJvZmlsZSxyPW4uZ3JvdXBQcm9maWxlLmdyb3VwSUQsYT10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwUHJvZmlsZShyKTtPYmplY3Qua2V5cyhvKS5mb3JFYWNoKChmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZVwib3duZXJJRFwiOnQuX293bmVyQ2hhbmdlZChhLG8pO2JyZWFrO2RlZmF1bHQ6YVtlXT1vW2VdfX0pKSx0aGlzLl9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCEwKX19LHtrZXk6XCJfb3duZXJDaGFuZ2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmdyb3VwSUQsbz10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwUHJvZmlsZShuKSxyPXRoaXMudGltLmNvbnRleHQuaWRlbnRpZmllcjtpZihyPT09dC5vd25lcklEKXtvLnVwZGF0ZUdyb3VwKHtzZWxmSW5mbzp7cm9sZTpyby5HUlBfTUJSX1JPTEVfT1dORVJ9fSk7dmFyIGE9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKFdjKSxzPWEuZ2V0TG9jYWxHcm91cE1lbWJlckluZm8obixyKSxpPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKG4pLm93bmVySUQsdT1hLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKG4saSk7cyYmcy51cGRhdGVSb2xlKHJvLkdSUF9NQlJfUk9MRV9PV05FUiksdSYmdS51cGRhdGVSb2xlKHJvLkdSUF9NQlJfUk9MRV9NRU1CRVIpfX19LHtrZXk6XCJfb25NZW1iZXJJbmZvTW9kaWZpZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQsbj10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoV2MpO2UucGF5bG9hZC5tZW1iZXJMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvPW4uZ2V0TG9jYWxHcm91cE1lbWJlckluZm8odCxlLnVzZXJJRCk7byYmZS5tdXRlVGltZSYmby51cGRhdGVNdXRlVW50aWwoZS5tdXRlVGltZSl9KSl9fSx7a2V5OlwiX2NhY2hlR3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuaGFzKGUpfHx0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuc2V0KGUsW10pLHRoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5nZXQoZSkucHVzaCh0KX19LHtrZXk6XCJfZGVsZXRlQ2FjaGVkR3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmhhcyhlKSYmdGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmRlbGV0ZShlKX19LHtrZXk6XCJfbm90aWZ5Q2FjaGVkR3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXRoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5nZXQoZSl8fFtdO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5vbk5ld0dyb3VwVGlwcyhlKX0pKSx0aGlzLl9kZWxldGVDYWNoZWRHcm91cFRpcHMoZSksS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fbm90aWZ5Q2FjaGVkR3JvdXBUaXBzIGdyb3VwSUQ6XCIpLmNvbmNhdChlLFwiIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKX19LHtrZXk6XCJfY2FjaGVHcm91cFRpcHNBbmRQcm9iZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLmV2ZW50LHI9ZS5pdGVtO3RoaXMuX2NhY2hlR3JvdXBUaXBzKG4se2V2ZW50Om8sZGF0YUxpc3Q6W3JdfSksdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBTaW1wbGlmaWVkSW5mbyhuKS50aGVuKChmdW5jdGlvbihlKXtlLnR5cGU9PT1yby5HUlBfQVZDSEFUUk9PTT90Ll9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pP3QuX25vdGlmeUNhY2hlZEdyb3VwVGlwcyhuKTp0Ll9ncm91cE1vZHVsZS5zZXRVbmpvaW5lZEFWQ2hhdFJvb20obik6KHQuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKFtlXSksdC5fbm90aWZ5Q2FjaGVkR3JvdXBUaXBzKG4pKX0pKSx0aGlzLl9jaGVja0NvdW50TWFwLmhhcyhuKXx8dGhpcy5fY2hlY2tDb3VudE1hcC5zZXQobiwwKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jYWNoZUdyb3VwVGlwc0FuZFByb2JlIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5jbGVhcigpLHRoaXMuX2NoZWNrQ291bnRNYXAuY2xlYXIoKX19XSksZX0oKSx6bT1Iby5VTlNVUFBPUlRFRF9ZLFdtPVtdLnB1c2gsSm09TWF0aC5taW47b3IoXCJzcGxpdFwiLChmdW5jdGlvbihlLHQsbil7dmFyIG87cmV0dXJuIG89XCJjXCI9PVwiYWJiY1wiLnNwbGl0KC8oYikqLylbMV18fDQhPVwidGVzdFwiLnNwbGl0KC8oPzopLywtMSkubGVuZ3RofHwyIT1cImFiXCIuc3BsaXQoLyg/OmFiKSovKS5sZW5ndGh8fDQhPVwiLlwiLnNwbGl0KC8oLj8pKC4/KS8pLmxlbmd0aHx8XCIuXCIuc3BsaXQoLygpKCkvKS5sZW5ndGg+MXx8XCJcIi5zcGxpdCgvLj8vKS5sZW5ndGg/ZnVuY3Rpb24oZSxuKXt2YXIgbz1NdChWKHRoaXMpKSxyPXZvaWQgMD09PW4/NDI5NDk2NzI5NTpuPj4+MDtpZigwPT09cilyZXR1cm5bXTtpZih2b2lkIDA9PT1lKXJldHVybltvXTtpZighZHIoZSkpcmV0dXJuIHQuY2FsbChvLGUscik7Zm9yKHZhciBhLHMsaSx1PVtdLGM9KGUuaWdub3JlQ2FzZT9cImlcIjpcIlwiKSsoZS5tdWx0aWxpbmU/XCJtXCI6XCJcIikrKGUudW5pY29kZT9cInVcIjpcIlwiKSsoZS5zdGlja3k/XCJ5XCI6XCJcIiksbD0wLHA9bmV3IFJlZ0V4cChlLnNvdXJjZSxjK1wiZ1wiKTsoYT1lci5jYWxsKHAsbykpJiYhKChzPXAubGFzdEluZGV4KT5sJiYodS5wdXNoKG8uc2xpY2UobCxhLmluZGV4KSksYS5sZW5ndGg+MSYmYS5pbmRleDxvLmxlbmd0aCYmV20uYXBwbHkodSxhLnNsaWNlKDEpKSxpPWFbMF0ubGVuZ3RoLGw9cyx1Lmxlbmd0aD49cikpOylwLmxhc3RJbmRleD09PWEuaW5kZXgmJnAubGFzdEluZGV4Kys7cmV0dXJuIGw9PT1vLmxlbmd0aD8haSYmcC50ZXN0KFwiXCIpfHx1LnB1c2goXCJcIik6dS5wdXNoKG8uc2xpY2UobCkpLHUubGVuZ3RoPnI/dS5zbGljZSgwLHIpOnV9OlwiMFwiLnNwbGl0KHZvaWQgMCwwKS5sZW5ndGg/ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmMD09PW4/W106dC5jYWxsKHRoaXMsZSxuKX06dCxbZnVuY3Rpb24odCxuKXt2YXIgcj1WKHRoaXMpLGE9bnVsbD09dD92b2lkIDA6dFtlXTtyZXR1cm4gdm9pZCAwIT09YT9hLmNhbGwodCxyLG4pOm8uY2FsbChNdChyKSx0LG4pfSxmdW5jdGlvbihlLHIpe3ZhciBhPVNlKHRoaXMpLHM9TXQoZSksaT1uKG8sYSxzLHIsbyE9PXQpO2lmKGkuZG9uZSlyZXR1cm4gaS52YWx1ZTt2YXIgdT1UYShhLFJlZ0V4cCksYz1hLnVuaWNvZGUsbD0oYS5pZ25vcmVDYXNlP1wiaVwiOlwiXCIpKyhhLm11bHRpbGluZT9cIm1cIjpcIlwiKSsoYS51bmljb2RlP1widVwiOlwiXCIpKyh6bT9cImdcIjpcInlcIikscD1uZXcgdSh6bT9cIl4oPzpcIithLnNvdXJjZStcIilcIjphLGwpLGQ9dm9pZCAwPT09cj80Mjk0OTY3Mjk1OnI+Pj4wO2lmKDA9PT1kKXJldHVybltdO2lmKDA9PT1zLmxlbmd0aClyZXR1cm4gbnVsbD09PXNyKHAscyk/W3NdOltdO2Zvcih2YXIgZz0wLGg9MCxmPVtdO2g8cy5sZW5ndGg7KXtwLmxhc3RJbmRleD16bT8wOmg7dmFyIF8sbT1zcihwLHptP3Muc2xpY2UoaCk6cyk7aWYobnVsbD09PW18fChfPUptKFdlKHAubGFzdEluZGV4Kyh6bT9oOjApKSxzLmxlbmd0aCkpPT09ZyloPWFyKHMsaCxjKTtlbHNle2lmKGYucHVzaChzLnNsaWNlKGcsaCkpLGYubGVuZ3RoPT09ZClyZXR1cm4gZjtmb3IodmFyIHY9MTt2PD1tLmxlbmd0aC0xO3YrKylpZihmLnB1c2gobVt2XSksZi5sZW5ndGg9PT1kKXJldHVybiBmO2g9Zz1ffX1yZXR1cm4gZi5wdXNoKHMuc2xpY2UoZykpLGZ9XX0pLCEhTCgoZnVuY3Rpb24oKXt2YXIgZT0vKD86KS8sdD1lLmV4ZWM7ZS5leGVjPWZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTt2YXIgbj1cImFiXCIuc3BsaXQoZSk7cmV0dXJuIDIhPT1uLmxlbmd0aHx8XCJhXCIhPT1uWzBdfHxcImJcIiE9PW5bMV19KSksem0pO3ZhciBYbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX2dyb3VwTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiQ29tbW9uR3JvdXBIYW5kbGVyXCIsdGhpcy50ZW1wQ29udmVyc2F0aW9uTGlzdD1udWxsLHRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcD1uZXcgTWFwLHRoaXMuX2NoZWNrQ291bnRNYXA9bmV3IE1hcCx0aGlzLk1BWF9DSEVDS19DT1VOVD00LHQuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbmNlKE9tLkNPTlRFWFRfQTJLRVlfQU5EX1RJTllJRF9VUERBVEVELHRoaXMuX2luaXRHcm91cExpc3QsdGhpcyl9cmV0dXJuIGEoZSxbe2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UlMT09MCYmdGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLnNpemU+MCYmdGhpcy5fY2hlY2tDYWNoZWRHcm91cE1lc3NhZ2UoKX19LHtrZXk6XCJfY2hlY2tDYWNoZWRHcm91cE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmZvckVhY2goKGZ1bmN0aW9uKHQsbil7dmFyIG89ZS5fY2hlY2tDb3VudE1hcC5nZXQobikscj1lLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pO0tpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2NoZWNrQ2FjaGVkR3JvdXBNZXNzYWdlIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIGhhc0xvY2FsR3JvdXA6XCIpLmNvbmNhdChyLFwiIGNoZWNrQ291bnQ6XCIpLmNvbmNhdChvKSkscj8oZS5fbm90aWZ5Q2FjaGVkR3JvdXBNZXNzYWdlKG4pLGUuX2NoZWNrQ291bnRNYXAuZGVsZXRlKG4pLGUuX2dyb3VwTW9kdWxlLmRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbShuKSk6bz49ZS5NQVhfQ0hFQ0tfQ09VTlQ/KGUuX2RlbGV0ZUNhY2hlZEdyb3VwTWVzc2FnZShuKSxlLl9jaGVja0NvdW50TWFwLmRlbGV0ZShuKSk6KG8rKyxlLl9jaGVja0NvdW50TWFwLnNldChuLG8pKX0pKX19LHtrZXk6XCJfaW5pdEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9pbml0R3JvdXBMaXN0XCIpKTt2YXIgdD1uZXcgamQoR2cpLG49dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0U3RvcmFnZUdyb3VwTGlzdCgpO2lmKFdpKG4pJiZuLmxlbmd0aD4wKXtuLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UuX2dyb3VwTW9kdWxlLmluaXRHcm91cE1hcCh0KX0pKSx0aGlzLl9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKTt2YXIgbz10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwTGlzdCgpLmxlbmd0aDt0LnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cCBjb3VudDpcIi5jb25jYXQobykpLmVuZCgpfWVsc2UgdC5zZXROZXR3b3JrVHlwZSh0aGlzLl9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXAgY291bnQ6MFwiKS5lbmQoKTtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9pbml0R3JvdXBMaXN0IG9rXCIpKSx0aGlzLmdldEdyb3VwTGlzdCgpfX0se2tleTpcImhhbmRsZVVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuaGFuZGxlVXBkYXRlR3JvdXBMYXN0TWVzc2FnZVwiKTtpZihLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0LFwiIGNvbnZlcnNhdGlvbiBjb3VudDpcIikuY29uY2F0KGUubGVuZ3RoLFwiLCBsb2NhbCBncm91cCBjb3VudDpcIikuY29uY2F0KHRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBMaXN0KCkubGVuZ3RoKSksMCE9PXRoaXMuX2dyb3VwTW9kdWxlLmdldEdyb3VwTWFwKCkuc2l6ZSl7Zm9yKHZhciBuLG8scixhPSExLHM9MCxpPWUubGVuZ3RoO3M8aTtzKyspKG49ZVtzXSkudHlwZT09PXJvLkNPTlZfR1JPVVAmJihvPW4uY29udmVyc2F0aW9uSUQuc3BsaXQoL15HUk9VUC8pWzFdLChyPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKG8pKSYmKHIubGFzdE1lc3NhZ2U9bi5sYXN0TWVzc2FnZSxhPSEwKSk7YSYmKHRoaXMuX2dyb3VwTW9kdWxlLnNvcnRMb2NhbEdyb3VwTGlzdCgpLHRoaXMuX2dyb3VwTW9kdWxlLmVtaXRHcm91cExpc3RVcGRhdGUoITAsITEpKX1lbHNlIHRoaXMudGVtcENvbnZlcnNhdGlvbkxpc3Q9ZX19LHtrZXk6XCJvbk5ld0dyb3VwTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe0tpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbk5ld0dyb3VwTWVzc2FnZSBjb3VudDpcIikuY29uY2F0KGUuZGF0YUxpc3QubGVuZ3RoKSk7dmFyIHQ9dGhpcy5fbmV3R3JvdXBNZXNzYWdlU3RvcmVkQW5kU3VtbWFyeShlKSxuPXQuY29udmVyc2F0aW9uT3B0aW9uc0xpc3Qsbz10Lm1lc3NhZ2VMaXN0LHI9dC5BVkNoYXRSb29tTWVzc2FnZUxpc3Q7KHIubGVuZ3RoPjAmJnRoaXMuX2dyb3VwTW9kdWxlLm9uQVZDaGF0Um9vbU1lc3NhZ2UociksdGhpcy5fZ3JvdXBNb2R1bGUuZmlsdGVyTW9kaWZpZWRNZXNzYWdlKG8pLG4ubGVuZ3RoPjApJiYodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKEpjKS5vbk5ld01lc3NhZ2Uoe2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0Om4saXNJbnN0YW50TWVzc2FnZTohMH0pLHRoaXMuX2dyb3VwTW9kdWxlLnVwZGF0ZU5leHRNZXNzYWdlU2VxKG4pKTt2YXIgYT10aGlzLl9ncm91cE1vZHVsZS5maWx0ZXJVbm1vZGlmaWVkTWVzc2FnZShvKTthLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChvby5NRVNTQUdFX1JFQ0VJVkVELGEpLG8ubGVuZ3RoPTB9fSx7a2V5OlwiX25ld0dyb3VwTWVzc2FnZVN0b3JlZEFuZFN1bW1hcnlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGFMaXN0LG49ZS5ldmVudCxvPWUuaXNJbnN0YW50TWVzc2FnZSxyPW51bGwsYT1bXSxzPVtdLGk9W10sdT17fSxjPXJvLkNPTlZfR1JPVVAsbD10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUodGwpLHA9dC5sZW5ndGg7cD4xJiZ0LnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc2VxdWVuY2UtdC5zZXF1ZW5jZX0pKTtmb3IodmFyIGQ9MDtkPHA7ZCsrKXt2YXIgZz10W2RdLGg9Zy5ncm91cFByb2ZpbGUuZ3JvdXBJRCxmPXRoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAoaCk7aWYoZnx8IXRoaXMuX2dyb3VwTW9kdWxlLmlzVW5qb2luZWRBVkNoYXRSb29tKGgpKWlmKGYpaWYodGhpcy5fZ3JvdXBNb2R1bGUuaXNNZXNzYWdlRnJvbUFWQ2hhdHJvb20oaCkpe3ZhciBfPWh1KGcpO18uZXZlbnQ9bixpLnB1c2goXyl9ZWxzZXtnLmN1cnJlbnRVc2VyPXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCksZy5jb252ZXJzYXRpb25UeXBlPWMsZy5pc1N5c3RlbU1lc3NhZ2U9ISFnLmlzU3lzdGVtTWVzc2FnZSxyPW5ldyBRXyhnKSxnLmVsZW1lbnRzPWwucGFyc2VFbGVtZW50cyhnLmVsZW1lbnRzLGcuZnJvbSksci5zZXRFbGVtZW50KGcuZWxlbWVudHMpO3ZhciBtPTE9PT10W2RdLmlzTW9kaWZpZWQsdj10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoSmMpO3YuaXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlKHIpP3IuaXNNb2RpZmllZD1tOm09ITE7dmFyIE09dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGxsKTtpZihvJiZNLmFkZE1lc3NhZ2VEZWxheSh7Y3VycmVudFRpbWU6RGF0ZS5ub3coKSx0aW1lOnIudGltZX0pLDE9PT1nLm9ubGluZU9ubHlGbGFnKXIuc2V0T25saW5lT25seUZsYWcoITApLHMucHVzaChyKTtlbHNle2lmKCF2LnB1c2hJbnRvTWVzc2FnZUxpc3QocyxyLG0pKWNvbnRpbnVlO00uYWRkTWVzc2FnZVNlcXVlbmNlKHtrZXk6cWQsbWVzc2FnZTpyfSk7dmFyIHk9ci5jb252ZXJzYXRpb25JRDtpZihKaSh1W3ldKSl1W3ldPWEucHVzaCh7Y29udmVyc2F0aW9uSUQ6eSx1bnJlYWRDb3VudDpcIm91dFwiPT09ci5mbG93PzA6MSx0eXBlOnIuY29udmVyc2F0aW9uVHlwZSxzdWJUeXBlOnIuY29udmVyc2F0aW9uU3ViVHlwZSxsYXN0TWVzc2FnZTpyfSktMTtlbHNle3ZhciBJPXVbeV07YVtJXS50eXBlPXIuY29udmVyc2F0aW9uVHlwZSxhW0ldLnN1YlR5cGU9ci5jb252ZXJzYXRpb25TdWJUeXBlLGFbSV0ubGFzdE1lc3NhZ2U9cixcImluXCI9PT1yLmZsb3cmJmFbSV0udW5yZWFkQ291bnQrK319fWVsc2UgdGhpcy5fY2FjaGVHcm91cE1lc3NhZ2VBbmRQcm9iZSh7Z3JvdXBJRDpoLGV2ZW50Om4saXRlbTpnfSl9cmV0dXJue2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0OmEsbWVzc2FnZUxpc3Q6cyxBVkNoYXRSb29tTWVzc2FnZUxpc3Q6aX19fSx7a2V5Olwib25Hcm91cE1lc3NhZ2VSZXZva2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uR3JvdXBNZXNzYWdlUmV2b2tlZCBudW1zOlwiKS5jb25jYXQoZS5kYXRhTGlzdC5sZW5ndGgpKTt2YXIgdD10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoSmMpLG49W10sbz1udWxsO2UuZGF0YUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHI9ZS5lbGVtZW50cy5yZXZva2VkSW5mb3M7Smkocil8fHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KG89dC5yZXZva2UoXCJHUk9VUFwiLmNvbmNhdChlLmdyb3VwSUQpLGUuc2VxdWVuY2UsZS5yYW5kb20pKSYmbi5wdXNoKG8pfSkpfSkpLDAhPT1uLmxlbmd0aCYmKHQub25NZXNzYWdlUmV2b2tlZChuKSx0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChvby5NRVNTQUdFX1JFVk9LRUQsbikpfX0se2tleTpcIl9ncm91cExpc3RUcmVlU2hha2luZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgTWFwKHYodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBNYXAoKSkpLG49MCxvPWUubGVuZ3RoO248bztuKyspdC5kZWxldGUoZVtuXS5ncm91cElEKTt0aGlzLl9ncm91cE1vZHVsZS5oYXNKb2luZWRBVkNoYXRSb29tKCkmJnRoaXMuX2dyb3VwTW9kdWxlLmdldEpvaW5lZEFWQ2hhdFJvb20oKS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LmRlbGV0ZShlKX0pKTtmb3IodmFyIHI9dih0LmtleXMoKSksYT0wLHM9ci5sZW5ndGg7YTxzO2ErKyl0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVHcm91cChyW2FdKX19LHtrZXk6XCJnZXRHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwTGlzdFwiKSxvPW5ldyBqZCh3Zyk7S2kubG9nKFwiXCIuY29uY2F0KG4pKTt2YXIgcj17aW50cm9kdWN0aW9uOlwiSW50cm9kdWN0aW9uXCIsbm90aWZpY2F0aW9uOlwiTm90aWZpY2F0aW9uXCIsY3JlYXRlVGltZTpcIkNyZWF0ZVRpbWVcIixvd25lcklEOlwiT3duZXJfQWNjb3VudFwiLGxhc3RJbmZvVGltZTpcIkxhc3RJbmZvVGltZVwiLG1lbWJlck51bTpcIk1lbWJlck51bVwiLG1heE1lbWJlck51bTpcIk1heE1lbWJlck51bVwiLGpvaW5PcHRpb246XCJBcHBseUpvaW5PcHRpb25cIixtdXRlQWxsTWVtYmVyczpcIlNodXRVcEFsbE1lbWJlclwifSxhPVtcIlR5cGVcIixcIk5hbWVcIixcIkZhY2VVcmxcIixcIk5leHRNc2dTZXFcIixcIkxhc3RNc2dUaW1lXCJdLHM9W107cmV0dXJuIGUmJmUuZ3JvdXBQcm9maWxlRmlsdGVyJiZlLmdyb3VwUHJvZmlsZUZpbHRlci5mb3JFYWNoKChmdW5jdGlvbihlKXtyW2VdJiZhLnB1c2gocltlXSl9KSksdGhpcy5fcGFnaW5nR2V0R3JvdXBMaXN0KHtsaW1pdDo1MCxvZmZzZXQ6MCxncm91cEJhc2VJbmZvRmlsdGVyOmEsZ3JvdXBMaXN0OnN9KS50aGVuKChmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBjb3VudDpcIikuY29uY2F0KHMubGVuZ3RoKSksdC5fZ3JvdXBMaXN0VHJlZVNoYWtpbmcocyksdC5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAocyk7dmFyIGU9dC5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cExpc3QoKS5sZW5ndGg7cmV0dXJuIG8uc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcInJlbW90ZSBjb3VudDpcIi5jb25jYXQocy5sZW5ndGgsXCIsIGFmdGVyIHRyZWUgc2hha2luZywgbG9jYWwgY291bnQ6XCIpLmNvbmNhdChlKSkuZW5kKCksdC50ZW1wQ29udmVyc2F0aW9uTGlzdCYmKEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIHVwZGF0ZSBsYXN0IG1lc3NhZ2Ugd2l0aCB0ZW1wQ29udmVyc2F0aW9uTGlzdCwgY291bnQ6XCIpLmNvbmNhdCh0LnRlbXBDb252ZXJzYXRpb25MaXN0Lmxlbmd0aCkpLHQuaGFuZGxlVXBkYXRlR3JvdXBMYXN0TWVzc2FnZSh7ZGF0YTp0LnRlbXBDb252ZXJzYXRpb25MaXN0fSksdC50ZW1wQ29udmVyc2F0aW9uTGlzdD1udWxsKSx0Ll9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCksWl8oe2dyb3VwTGlzdDp0Ll9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwTGlzdCgpfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpfX0se2tleTpcIl9wYWdpbmdHZXRHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9wYWdpbmdHZXRHcm91cExpc3RcIiksbz1lLmxpbWl0LHI9ZS5vZmZzZXQsYT1lLmdyb3VwQmFzZUluZm9GaWx0ZXIscz1lLmdyb3VwTGlzdCxpPW5ldyBqZChxZyk7cmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp3bCxyZXF1ZXN0RGF0YTp7bWVtYmVyQWNjb3VudDp0aGlzLl9ncm91cE1vZHVsZS5nZXRNeVVzZXJJRCgpLGxpbWl0Om8sb2Zmc2V0OnIscmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZUluZm9GaWx0ZXI6YSxzZWxmSW5mb0ZpbHRlcjpbXCJSb2xlXCIsXCJKb2luVGltZVwiLFwiTXNnRmxhZ1wiXX19fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHU9ZS5kYXRhLGM9dS5ncm91cHMsbD11LnRvdGFsQ291bnQ7cy5wdXNoLmFwcGx5KHMsdihjKSk7dmFyIHA9citvLGQ9IShsPnApO3JldHVybiBpLnNldE5ldHdvcmtUeXBlKHQuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJvZmZzZXQ6XCIuY29uY2F0KHIsXCIgdG90YWxDb3VudDpcIikuY29uY2F0KGwsXCIgaXNDb21wbGV0ZWQ6XCIpLmNvbmNhdChkLFwiIGN1cnJlbnRDb3VudDpcIikuY29uY2F0KHMubGVuZ3RoKSkuZW5kKCksZD8oS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIHRvdGFsQ291bnQ6XCIpLmNvbmNhdChsKSksWl8oe2dyb3VwTGlzdDpzfSkpOihyPXAsdC5fcGFnaW5nR2V0R3JvdXBMaXN0KHtsaW1pdDpvLG9mZnNldDpyLGdyb3VwQmFzZUluZm9GaWx0ZXI6YSxncm91cExpc3Q6c30pKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2kuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLGNtKGUpfSkpfX0se2tleTpcIl9jYWNoZUdyb3VwTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmhhcyhlKXx8dGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLnNldChlLFtdKSx0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuZ2V0KGUpLnB1c2godCl9fSx7a2V5OlwiX2RlbGV0ZUNhY2hlZEdyb3VwTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5oYXMoZSkmJnRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5kZWxldGUoZSl9fSx7a2V5OlwiX25vdGlmeUNhY2hlZEdyb3VwTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuZ2V0KGUpfHxbXTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3Qub25OZXdHcm91cE1lc3NhZ2UoZSl9KSksdGhpcy5fZGVsZXRlQ2FjaGVkR3JvdXBNZXNzYWdlKGUpLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX25vdGlmeUNhY2hlZEdyb3VwTWVzc2FnZSBncm91cElEOlwiKS5jb25jYXQoZSxcIiBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSl9fSx7a2V5OlwiX2NhY2hlR3JvdXBNZXNzYWdlQW5kUHJvYmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS5ldmVudCxyPWUuaXRlbTt0aGlzLl9jYWNoZUdyb3VwTWVzc2FnZShuLHtldmVudDpvLGRhdGFMaXN0OltyXX0pLHRoaXMuX2dyb3VwTW9kdWxlLmdldEdyb3VwU2ltcGxpZmllZEluZm8obikudGhlbigoZnVuY3Rpb24oZSl7ZS50eXBlPT09cm8uR1JQX0FWQ0hBVFJPT00/dC5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cChuKT90Ll9ub3RpZnlDYWNoZWRHcm91cE1lc3NhZ2Uobik6dC5fZ3JvdXBNb2R1bGUuc2V0VW5qb2luZWRBVkNoYXRSb29tKG4pOih0Ll9ncm91cE1vZHVsZS51cGRhdGVHcm91cE1hcChbZV0pLHQuX25vdGlmeUNhY2hlZEdyb3VwTWVzc2FnZShuKSl9KSksdGhpcy5fY2hlY2tDb3VudE1hcC5oYXMobil8fHRoaXMuX2NoZWNrQ291bnRNYXAuc2V0KG4sMCksS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fY2FjaGVHcm91cE1lc3NhZ2VBbmRQcm9iZSBncm91cElEOlwiKS5jb25jYXQobikpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuY2xlYXIoKSx0aGlzLl9jaGVja0NvdW50TWFwLmNsZWFyKCksdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbmNlKE9tLkNPTlRFWFRfQTJLRVlfQU5EX1RJTllJRF9VUERBVEVELHRoaXMuX2luaXRHcm91cExpc3QsdGhpcyl9fV0pLGV9KCksUW09ezE6XCJpbml0XCIsMjpcIm1vZGlmeVwiLDM6XCJjbGVhclwiLDQ6XCJkZWxldGVcIn0sWm09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl9ncm91cE1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIkdyb3VwQXR0cmlidXRlc0hhbmRsZXJcIix0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXA9bmV3IE1hcCx0aGlzLkNBQ0hFX0VYUElSRV9USU1FPTNlNCx0aGlzLl9ncm91cE1vZHVsZS5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKE9tLkNMT1VEX0NPTkZJR19VUERBVEVELHRoaXMuX29uQ2xvdWRDb25maWdVcGRhdGVkLHRoaXMpfXJldHVybiBhKGUsW3trZXk6XCJfb25DbG91ZENvbmZpZ1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dyb3VwTW9kdWxlLmdldENsb3VkQ29uZmlnKFwiZ3JwX2F0dHJfY2FjaGVfdGltZVwiKTtKaShlKXx8KHRoaXMuQ0FDSEVfRVhQSVJFX1RJTUU9TnVtYmVyKGUpKX19LHtrZXk6XCJ1cGRhdGVMb2NhbE1haW5TZXF1ZW5jZU9uUmVjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmxvY2FsTWFpblNlcXVlbmNlPTB9KSl9fSx7a2V5Olwib25Hcm91cEF0dHJpYnV0ZXNVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUuZ3JvdXBBdHRyaWJ1dGVPcHRpb24scj1vLm1haW5TZXF1ZW5jZSxhPW8uaGFzQ2hhbmdlZEF0dHJpYnV0ZUluZm8scz1vLmdyb3VwQXR0cmlidXRlTGlzdCxpPXZvaWQgMD09PXM/W106cyx1PW8ub3BlcmF0aW9uVHlwZTtpZihLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZC4gaGFzQ2hhbmdlZEF0dHJpYnV0ZUluZm86XCIpLmNvbmNhdChhLFwiIG9wZXJhdGlvblR5cGU6XCIpLmNvbmNhdCh1KSksMT09PWEpe2lmKDQ9PT11KXt2YXIgYz1bXTtpLmZvckVhY2goKGZ1bmN0aW9uKGUpe2MucHVzaChlLmtleSl9KSksaT12KGMpLGM9bnVsbH1yZXR1cm4gdGhpcy5fcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpuLHJlbW90ZU1haW5TZXF1ZW5jZTpyLGdyb3VwQXR0cmlidXRlTGlzdDppLG9wZXJhdGlvblR5cGU6UW1bdV19KSx2b2lkIHRoaXMuX2VtaXRHcm91cEF0dHJpYnV0ZXNVcGRhdGVkKG4pfWlmKHRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5oYXMobikpe3ZhciBsPXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5nZXQobikuYXZDaGF0Um9vbUtleTt0aGlzLl9nZXRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixhdkNoYXRSb29tS2V5Omx9KS50aGVuKChmdW5jdGlvbigpe3QuX2VtaXRHcm91cEF0dHJpYnV0ZXNVcGRhdGVkKG4pfSkpfX19LHtrZXk6XCJpbml0R3JvdXBBdHRyaWJ1dGVzQ2FjaGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdyb3VwSUQsbj1lLmF2Q2hhdFJvb21LZXk7dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLnNldCh0LHtsYXN0VXBkYXRlVGltZTowLGxvY2FsTWFpblNlcXVlbmNlOjAscmVtb3RlTWFpblNlcXVlbmNlOjAsYXR0cmlidXRlczpuZXcgTWFwLGF2Q2hhdFJvb21LZXk6bn0pLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuaW5pdEdyb3VwQXR0cmlidXRlc0NhY2hlIGdyb3VwSUQ6XCIpLmNvbmNhdCh0LFwiIGF2Q2hhdFJvb21LZXk6XCIpLmNvbmNhdChuKSl9fSx7a2V5OlwiaW5pdEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLmdyb3VwQXR0cmlidXRlcyxyPXRoaXMuX2NoZWNrQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4sZnVuY05hbWU6XCJpbml0R3JvdXBBdHRyaWJ1dGVzXCJ9KTtpZighMCE9PXIpcmV0dXJuIGNtKHIpO3ZhciBhPXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5nZXQobikscz1hLnJlbW90ZU1haW5TZXF1ZW5jZSxpPWEuYXZDaGF0Um9vbUtleSx1PW5ldyBqZChLZyk7cmV0dXJuIHUuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgbWFpblNlcXVlbmNlOlwiKS5jb25jYXQocyxcIiBncm91cEF0dHJpYnV0ZXM6XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShvKSkpLHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp0cCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpuLGF2Q2hhdFJvb21LZXk6aSxtYWluU2VxdWVuY2U6cyxncm91cEF0dHJpYnV0ZUxpc3Q6dGhpcy5fdHJhbnNmb3JtR3JvdXBBdHRyaWJ1dGVzKG8pfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciByPWUuZGF0YSxhPXIubWFpblNlcXVlbmNlLHM9dihyLmdyb3VwQXR0cmlidXRlTGlzdCk7cmV0dXJuIHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS52YWx1ZT1vW2Uua2V5XX0pKSx0Ll9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4scmVtb3RlTWFpblNlcXVlbmNlOmEsZ3JvdXBBdHRyaWJ1dGVMaXN0OnMsb3BlcmF0aW9uVHlwZTpcImluaXRcIn0pLHUuc2V0TmV0d29ya1R5cGUodC5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5pbml0R3JvdXBBdHRyaWJ1dGVzIG9rLiBncm91cElEOlwiKS5jb25jYXQobikpLFpfKHtncm91cEF0dHJpYnV0ZXM6b30pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07dS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksY20oZSl9KSl9fSx7a2V5Olwic2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUuZ3JvdXBBdHRyaWJ1dGVzLHI9dGhpcy5fY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixmdW5jTmFtZTpcInNldEdyb3VwQXR0cmlidXRlc1wifSk7aWYoITAhPT1yKXJldHVybiBjbShyKTt2YXIgYT10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZ2V0KG4pLHM9YS5yZW1vdGVNYWluU2VxdWVuY2UsaT1hLmF2Q2hhdFJvb21LZXksdT1hLmF0dHJpYnV0ZXMsYz10aGlzLl90cmFuc2Zvcm1Hcm91cEF0dHJpYnV0ZXMobyk7Yy5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLmtleTtlLnNlcXVlbmNlPTAsdS5oYXModCkmJihlLnNlcXVlbmNlPXUuZ2V0KHQpLnNlcXVlbmNlKX0pKTt2YXIgbD1uZXcgamQoQmcpO3JldHVybiBsLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIG1haW5TZXF1ZW5jZTpcIikuY29uY2F0KHMsXCIgZ3JvdXBBdHRyaWJ1dGVzOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobykpKSx0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6bnAscmVxdWVzdERhdGE6e2dyb3VwSUQ6bixhdkNoYXRSb29tS2V5OmksbWFpblNlcXVlbmNlOnMsZ3JvdXBBdHRyaWJ1dGVMaXN0OmN9fSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHI9ZS5kYXRhLGE9ci5tYWluU2VxdWVuY2Uscz12KHIuZ3JvdXBBdHRyaWJ1dGVMaXN0KTtyZXR1cm4gcy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnZhbHVlPW9bZS5rZXldfSkpLHQuX3JlZnJlc2hDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixyZW1vdGVNYWluU2VxdWVuY2U6YSxncm91cEF0dHJpYnV0ZUxpc3Q6cyxvcGVyYXRpb25UeXBlOlwibW9kaWZ5XCJ9KSxsLnNldE5ldHdvcmtUeXBlKHQuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuc2V0R3JvdXBBdHRyaWJ1dGVzIG9rLiBncm91cElEOlwiKS5jb25jYXQobikpLFpfKHtncm91cEF0dHJpYnV0ZXM6b30pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07bC5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksY20oZSl9KSl9fSx7a2V5OlwiZGVsZXRlR3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPWUua2V5TGlzdCxyPXZvaWQgMD09PW8/W106byxhPXRoaXMuX2NoZWNrQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4sZnVuY05hbWU6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIn0pO2lmKCEwIT09YSlyZXR1cm4gY20oYSk7dmFyIHM9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldChuKSxpPXMucmVtb3RlTWFpblNlcXVlbmNlLHU9cy5hdkNoYXRSb29tS2V5LGM9cy5hdHRyaWJ1dGVzLGw9dihjLmtleXMoKSkscD1ycCxkPVwiY2xlYXJcIixnPXtncm91cElEOm4sYXZDaGF0Um9vbUtleTp1LG1haW5TZXF1ZW5jZTppfTtpZihyLmxlbmd0aD4wKXt2YXIgaD1bXTtsPVtdLHA9b3AsZD1cImRlbGV0ZVwiLHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9MDtjLmhhcyhlKSYmKHQ9Yy5nZXQoZSkuc2VxdWVuY2UsbC5wdXNoKGUpKSxoLnB1c2goe2tleTplLHNlcXVlbmNlOnR9KX0pKSxnLmdyb3VwQXR0cmlidXRlTGlzdD1ofXZhciBmPW5ldyBqZChIZyk7cmV0dXJuIGYuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgbWFpblNlcXVlbmNlOlwiKS5jb25jYXQoaSxcIiBrZXlMaXN0OlwiKS5jb25jYXQocixcIiBwcm90b2NvbE5hbWU6XCIpLmNvbmNhdChwKSksdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnAscmVxdWVzdERhdGE6Z30pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZGF0YS5tYWluU2VxdWVuY2U7cmV0dXJuIHQuX3JlZnJlc2hDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6bixyZW1vdGVNYWluU2VxdWVuY2U6byxncm91cEF0dHJpYnV0ZUxpc3Q6cixvcGVyYXRpb25UeXBlOmR9KSxmLnNldE5ldHdvcmtUeXBlKHQuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZGVsZXRlR3JvdXBBdHRyaWJ1dGVzIG9rLiBncm91cElEOlwiKS5jb25jYXQobikpLFpfKHtrZXlMaXN0Omx9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Yuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLGNtKGUpfSkpfX0se2tleTpcImdldEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz10aGlzLl9jaGVja0NhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpuLGZ1bmNOYW1lOlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCJ9KTtpZighMCE9PW8pcmV0dXJuIGNtKG8pO3ZhciByPXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5nZXQobiksYT1yLmF2Q2hhdFJvb21LZXkscz1yLmxhc3RVcGRhdGVUaW1lLGk9ci5sb2NhbE1haW5TZXF1ZW5jZSx1PXIucmVtb3RlTWFpblNlcXVlbmNlLGM9bmV3IGpkKGpnKTtpZihjLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIGxvY2FsTWFpblNlcXVlbmNlOlwiKS5jb25jYXQoaSxcIiByZW1vdGVNYWluU2VxdWVuY2U6XCIpLmNvbmNhdCh1LFwiIGtleUxpc3Q6XCIpLmNvbmNhdChlLmtleUxpc3QpKSxEYXRlLm5vdygpLXM+PXRoaXMuQ0FDSEVfRVhQSVJFX1RJTUV8fGk8dSlyZXR1cm4gdGhpcy5fZ2V0R3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOm4sYXZDaGF0Um9vbUtleTphfSkudGhlbigoZnVuY3Rpb24obyl7Yy5zZXRNb3JlTWVzc2FnZShcImdldCBhdHRyaWJ1dGVzIGZyb20gcmVtb3RlLiBjb3VudDpcIi5jb25jYXQoby5sZW5ndGgpKS5zZXROZXR3b3JrVHlwZSh0Ll9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmdldEdyb3VwQXR0cmlidXRlcyBmcm9tIHJlbW90ZS4gZ3JvdXBJRDpcIikuY29uY2F0KG4pKTt2YXIgcj10Ll9nZXRMb2NhbEdyb3VwQXR0cmlidXRlcyhlKTtyZXR1cm4gWl8oe2dyb3VwQXR0cmlidXRlczpyfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtjLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxjbShlKX0pKTtjLnNldE1vcmVNZXNzYWdlKFwiZ2V0IGF0dHJpYnV0ZXMgZnJvbSBjYWNoZVwiKS5zZXROZXR3b3JrVHlwZSh0aGlzLl9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwQXR0cmlidXRlcyBmcm9tIGNhY2hlLiBncm91cElEOlwiKS5jb25jYXQobikpO3ZhciBsPXRoaXMuX2dldExvY2FsR3JvdXBBdHRyaWJ1dGVzKGUpO3JldHVybiB1bSh7Z3JvdXBBdHRyaWJ1dGVzOmx9KX19LHtrZXk6XCJfZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmFwLHJlcXVlc3REYXRhOnQoe30sZSl9KS50aGVuKChmdW5jdGlvbih0KXt2YXIgbz10LmRhdGEscj1vLm1haW5TZXF1ZW5jZSxhPW8uZ3JvdXBBdHRyaWJ1dGVMaXN0LHM9dihhKTtyZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KG4uX2NsYXNzTmFtZSxcIi5fZ2V0R3JvdXBBdHRyaWJ1dGVzIG9rLiBncm91cElEOlwiKS5jb25jYXQoZS5ncm91cElEKSksbi5fcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDplLmdyb3VwSUQscmVtb3RlTWFpblNlcXVlbmNlOnIsZ3JvdXBBdHRyaWJ1dGVMaXN0OnMsb3BlcmF0aW9uVHlwZTpcImdldFwifSksYX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIGNtKGUpfSkpfX0se2tleTpcIl9nZXRMb2NhbEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBJRCxuPWUua2V5TGlzdCxvPXZvaWQgMD09PW4/W106bixyPXt9O2lmKCF0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuaGFzKHQpKXJldHVybiByO3ZhciBhPXRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5nZXQodCkuYXR0cmlidXRlcztpZihvLmxlbmd0aD4wKW8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7YS5oYXMoZSkmJihyW2VdPWEuZ2V0KGUpLnZhbHVlKX0pKTtlbHNle3ZhciBzLGk9RChhLmtleXMoKSk7dHJ5e2ZvcihpLnMoKTshKHM9aS5uKCkpLmRvbmU7KXt2YXIgdT1zLnZhbHVlO3JbdV09YS5nZXQodSkudmFsdWV9fWNhdGNoKGMpe2kuZShjKX1maW5hbGx5e2kuZigpfX1yZXR1cm4gcn19LHtrZXk6XCJfcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBJRCxuPWUucmVtb3RlTWFpblNlcXVlbmNlLG89ZS5ncm91cEF0dHJpYnV0ZUxpc3Qscj1lLm9wZXJhdGlvblR5cGU7aWYodGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmhhcyh0KSl7dmFyIGE9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmdldCh0KSxzPWEubG9jYWxNYWluU2VxdWVuY2U7aWYoXCJnZXRcIj09PXJ8fG4tcz09MSlhLnJlbW90ZU1haW5TZXF1ZW5jZT1uLGEubG9jYWxNYWluU2VxdWVuY2U9bixhLmxhc3RVcGRhdGVUaW1lPURhdGUubm93KCksdGhpcy5fdXBkYXRlQ2FjaGVkQXR0cmlidXRlcyh7Z3JvdXBBdHRyaWJ1dGVzOmEsZ3JvdXBBdHRyaWJ1dGVMaXN0Om8sb3BlcmF0aW9uVHlwZTpyfSk7ZWxzZXtpZihzPT09bilyZXR1cm47YS5yZW1vdGVNYWluU2VxdWVuY2U9bn10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuc2V0KHQsYSk7dmFyIGk9XCJvcGVyYXRpb25UeXBlOlwiLmNvbmNhdChyLFwiIGxvY2FsTWFpblNlcXVlbmNlOlwiKS5jb25jYXQocyxcIiByZW1vdGVNYWluU2VxdWVuY2U6XCIpLmNvbmNhdChuKTtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzLiBcIikuY29uY2F0KGkpKX19fSx7a2V5OlwiX3VwZGF0ZUNhY2hlZEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdyb3VwQXR0cmlidXRlcyxuPWUuZ3JvdXBBdHRyaWJ1dGVMaXN0LG89ZS5vcGVyYXRpb25UeXBlO1wiY2xlYXJcIiE9PW8/XCJkZWxldGVcIiE9PW8/KFwiaW5pdFwiPT09byYmdC5hdHRyaWJ1dGVzLmNsZWFyKCksbi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLmtleSxvPWUudmFsdWUscj1lLnNlcXVlbmNlO3QuYXR0cmlidXRlcy5zZXQobix7dmFsdWU6byxzZXF1ZW5jZTpyfSl9KSkpOm4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5hdHRyaWJ1dGVzLmRlbGV0ZShlKX0pKTp0LmF0dHJpYnV0ZXMuY2xlYXIoKX19LHtrZXk6XCJfY2hlY2tDYWNoZWRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmdyb3VwSUQsbj1lLmZ1bmNOYW1lO2lmKHRoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAodCkmJnRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKHQpLnR5cGUhPT1yby5HUlBfQVZDSEFUUk9PTSl7cmV0dXJuIEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jaGVja0NhY2hlZEdyb3VwQXR0cmlidXRlcy4gXCIpLmNvbmNhdChcIumdnuebtOaSree+pOS4jeiDveS9v+eUqOe+pOWxnuaApyBBUElcIikpLG5ldyBhbSh7Y29kZTpUcC5DQU5OT1RfVVNFX0dSUF9BVFRSX05PVF9BVkNIQVRST09NLG1lc3NhZ2U6XCLpnZ7nm7Tmkq3nvqTkuI3og73kvb/nlKjnvqTlsZ7mgKcgQVBJXCJ9KX12YXIgbz10aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZ2V0KHQpO2lmKEppKG8pKXt2YXIgcj1cIuWmguaenCBncm91cElEOlwiLmNvbmNhdCh0LFwiIOaYr+ebtOaSree+pO+8jOS9v+eUqCBcIikuY29uY2F0KG4sXCIg5YmN5YWI5L2/55SoIGpvaW5Hcm91cCDmjqXlj6PnlLPor7fliqDlhaXnvqTnu4TvvIzor6bnu4bor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI2pvaW5Hcm91cFwiKTtyZXR1cm4gS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2NoZWNrQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzLiBcIikuY29uY2F0KHIpKSxuZXcgYW0oe2NvZGU6VHAuQ0FOTk9UX1VTRV9HUlBfQVRUUl9BVkNIQVRST09NX1VOSk9JTixtZXNzYWdlOnJ9KX1yZXR1cm4hMH19LHtrZXk6XCJfdHJhbnNmb3JtR3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3QucHVzaCh7a2V5Om4sdmFsdWU6ZVtuXX0pfSkpLHR9fSx7a2V5OlwiX2VtaXRHcm91cEF0dHJpYnV0ZXNVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0TG9jYWxHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6ZX0pO3RoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KG9vLkdST1VQX0FUVFJJQlVURVNfVVBEQVRFRCx7Z3JvdXBJRDplLGdyb3VwQXR0cmlidXRlczp0fSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5jbGVhcigpLHRoaXMuQ0FDSEVfRVhQSVJFX1RJTUU9M2U0fX1dKSxlfSgpLGV2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSk7dmFyIG49dC5ncm91cE1vZHVsZSxyPXQuZ3JvdXBJRCxhPXQub25Jbml0LHM9dC5vblN1Y2Nlc3MsaT10Lm9uRmFpbDt0aGlzLl9ncm91cE1vZHVsZT1uLHRoaXMuX2NsYXNzTmFtZT1cIlBvbGxpbmdcIix0aGlzLl9vbkluaXQ9YSx0aGlzLl9vblN1Y2Nlc3M9cyx0aGlzLl9vbkZhaWw9aSx0aGlzLl9ncm91cElEPXIsdGhpcy5fdGltZW91dElEPS0xLHRoaXMuX2lzUnVubmluZz0hMSx0aGlzLl9wb2xsaW5nSW50ZXJ2YWw9MCx0aGlzLk1BWF9QT0xMSU5HX0lOVEVSVkFMPTJlM31yZXR1cm4gYShlLFt7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RhcnRcIikpLHRoaXMuX2lzUnVubmluZz0hMCx0aGlzLl9yZXF1ZXN0KCl9fSx7a2V5OlwiaXNSdW5uaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNSdW5uaW5nfX0se2tleTpcIl9yZXF1ZXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5fb25Jbml0KHRoaXMuX2dyb3VwSUQpLG49WGw7dGhpcy5fZ3JvdXBNb2R1bGUuaXNMb2dnZWRJbigpfHwobj1RbCksdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOm4scmVxdWVzdERhdGE6dH0pLnRoZW4oKGZ1bmN0aW9uKHQpe2UuX29uU3VjY2VzcyhlLl9ncm91cElELHQpLGUuaXNSdW5uaW5nKCkmJihjbGVhclRpbWVvdXQoZS5fdGltZW91dElEKSxlLl90aW1lb3V0SUQ9c2V0VGltZW91dChlLl9yZXF1ZXN0LmJpbmQoZSksMCkpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtlLl9vbkZhaWwoZS5fZ3JvdXBJRCx0KSxlLmlzUnVubmluZygpJiYoY2xlYXJUaW1lb3V0KGUuX3RpbWVvdXRJRCksZS5fdGltZW91dElEPXNldFRpbWVvdXQoZS5fcmVxdWVzdC5iaW5kKGUpLGUuTUFYX1BPTExJTkdfSU5URVJWQUwpKX0pKX19LHtrZXk6XCJzdG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnN0b3BcIikpLHRoaXMuX3RpbWVvdXRJRD4wJiYoY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRJRCksdGhpcy5fdGltZW91dElEPS0xLHRoaXMuX3BvbGxpbmdJbnRlcnZhbD0wKSx0aGlzLl9pc1J1bm5pbmc9ITF9fV0pLGV9KCksdHY9ezM6ITAsNDohMCw1OiEwLDY6ITB9LG52PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fZ3JvdXBNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJBVkNoYXRSb29tSGFuZGxlclwiLHRoaXMuX2pvaW5lZEdyb3VwTWFwPW5ldyBNYXAsdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwPW5ldyBNYXAsdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwPW5ldyBNYXAsdGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0PW5ldyB4bSgxMDApLHRoaXMubWVzc2FnZUlETGlua2VkTGlzdD1uZXcgeG0oMTAwKSx0aGlzLnJlY2VpdmVkTWVzc2FnZUNvdW50PTAsdGhpcy5fcmVwb3J0TWVzc2FnZVN0YWNrZWRDb3VudD0wLHRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwPW5ldyBNYXAsdGhpcy5ERUZBVUxUX0VYUElSRV9USU1FPTYwfXJldHVybiBhKGUsW3trZXk6XCJoYXNKb2luZWRBVkNoYXRSb29tXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fam9pbmVkR3JvdXBNYXAuc2l6ZT4wfX0se2tleTpcImNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fam9pbmVkR3JvdXBNYXAuaGFzKGUpfX0se2tleTpcImdldEpvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9qb2luZWRHcm91cE1hcC5zaXplPjA/dih0aGlzLl9qb2luZWRHcm91cE1hcC5rZXlzKCkpOm51bGx9fSx7a2V5OlwiX3VwZGF0ZVJlcXVlc3REYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHQoe30sdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLmdldChlKSl9fSx7a2V5OlwiX2hhbmRsZVN1Y2Nlc3NcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQuZGF0YSxvPW4ua2V5LHI9bi5uZXh0U2VxLGE9bi5yc3BNc2dMaXN0O2lmKDAhPT1uLmVycm9yQ29kZSl7dmFyIHM9dGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLmdldChlKSxpPW5ldyBqZCh0aCksdT1zP1wiXCIuY29uY2F0KHMua2V5LFwiLVwiKS5jb25jYXQocy5zdGFydFNlcSk6XCJyZXF1ZXN0SW5mbyBpcyB1bmRlZmluZWRcIjtpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQoZSxcIi1cIikuY29uY2F0KHUsXCItXCIpLmNvbmNhdCh0LmVycm9ySW5mbykpLnNldENvZGUodC5lcnJvckNvZGUpLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCghMCl9ZWxzZXtpZighdGhpcy5jaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEKGUpKXJldHVybjskaShvKSYmamkocikmJnRoaXMuX3BvbGxpbmdSZXF1ZXN0SW5mb01hcC5zZXQoZSx7a2V5Om8sc3RhcnRTZXE6cn0pLFdpKGEpJiZhLmxlbmd0aD4wJiYoYS5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnRvPWUuZ3JvdXBJRH0pKSx0aGlzLm9uTWVzc2FnZShhKSl9fX0se2tleTpcIl9oYW5kbGVGYWlsdXJlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoV2koZSkmJjAhPT1lLmxlbmd0aCl7dmFyIHQ9bnVsbCxuPVtdLG89dGhpcy5fZ2V0TW9kdWxlKEpjKSxyPWUubGVuZ3RoO3I+MSYmZS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiBlLnNlcXVlbmNlLXQuc2VxdWVuY2V9KSk7Zm9yKHZhciBhPXRoaXMuX2dldE1vZHVsZShYYykscz0wO3M8cjtzKyspaWYodHZbZVtzXS5ldmVudF0pe3RoaXMucmVjZWl2ZWRNZXNzYWdlQ291bnQrPTEsdD10aGlzLnBhY2tNZXNzYWdlKGVbc10sZVtzXS5ldmVudCk7dmFyIGk9MT09PWVbc10uaXNNb2RpZmllZDtpZigoYS5pc1VubGltaXRlZEFWQ2hhdFJvb20oKXx8IXRoaXMuc2VxdWVuY2VzTGlua2VkTGlzdC5oYXModC5zZXF1ZW5jZSkpJiYhdGhpcy5tZXNzYWdlSURMaW5rZWRMaXN0Lmhhcyh0LklEKSl7dmFyIHU9dC5jb252ZXJzYXRpb25JRDtpZih0aGlzLnJlY2VpdmVkTWVzc2FnZUNvdW50JTQwPT0wJiZ0aGlzLl9nZXRNb2R1bGUoaWwpLmRldGVjdE1lc3NhZ2VMb3NzKHUsdGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0LmRhdGEoKSksbnVsbCE9PXRoaXMuc2VxdWVuY2VzTGlua2VkTGlzdC50YWlsKCkpe3ZhciBjPXRoaXMuc2VxdWVuY2VzTGlua2VkTGlzdC50YWlsKCkudmFsdWUsbD10LnNlcXVlbmNlLWM7bD4xJiZsPD0yMD90aGlzLl9nZXRNb2R1bGUoaWwpLm9uTWVzc2FnZU1heWJlTG9zdCh1LGMrMSxsLTEpOmw8LTEmJmw+PS0yMCYmdGhpcy5fZ2V0TW9kdWxlKGlsKS5vbk1lc3NhZ2VNYXliZUxvc3QodSx0LnNlcXVlbmNlKzEsTWF0aC5hYnMobCktMSl9dGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0LnNldCh0LnNlcXVlbmNlKSx0aGlzLm1lc3NhZ2VJRExpbmtlZExpc3Quc2V0KHQuSUQpO3ZhciBwPSExO2lmKHRoaXMuX2lzTWVzc2FnZVNlbnRCeUN1cnJlbnRJbnN0YW5jZSh0KT9pJiYocD0hMCx0LmlzTW9kaWZpZWQ9aSxvLnVwZGF0ZU1lc3NhZ2VJc01vZGlmaWVkUHJvcGVydHkodCkpOnA9ITAscCl7aWYodC5jb252ZXJzYXRpb25UeXBlLHJvLkNPTlZfU1lTVEVNLHQuY29udmVyc2F0aW9uVHlwZSE9PXJvLkNPTlZfU1lTVEVNKXt2YXIgZD10aGlzLl9nZXRNb2R1bGUobGwpLGc9dC5jb252ZXJzYXRpb25JRC5yZXBsYWNlKHJvLkNPTlZfR1JPVVAsXCJcIik7dGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmhhcyhnKT9kLmFkZE1lc3NhZ2VTZXF1ZW5jZSh7a2V5OlZkLG1lc3NhZ2U6dH0pOih0LnR5cGUhPT1yby5NU0dfR1JQX1RJUCYmZC5hZGRNZXNzYWdlRGVsYXkoe2N1cnJlbnRUaW1lOkRhdGUubm93KCksdGltZTp0LnRpbWV9KSxkLmFkZE1lc3NhZ2VTZXF1ZW5jZSh7a2V5OnhkLG1lc3NhZ2U6dH0pKX1uLnB1c2godCl9fX1lbHNlIEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTWVzc2FnZSDmnKrlpITnkIbnmoQgZXZlbnQg57G75Z6LOiBcIikuY29uY2F0KGVbc10uZXZlbnQpKTtpZigwIT09bi5sZW5ndGgpe3RoaXMuX2dyb3VwTW9kdWxlLmZpbHRlck1vZGlmaWVkTWVzc2FnZShuKTt2YXIgaD10aGlzLnBhY2tDb252ZXJzYXRpb25PcHRpb24obik7aWYoaC5sZW5ndGg+MCl0aGlzLl9nZXRNb2R1bGUoSmMpLm9uTmV3TWVzc2FnZSh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6aCxpc0luc3RhbnRNZXNzYWdlOiEwfSk7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTWVzc2FnZSBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksdGhpcy5fY2hlY2tNZXNzYWdlU3RhY2tlZChuKTt2YXIgZj10aGlzLl9ncm91cE1vZHVsZS5maWx0ZXJVbm1vZGlmaWVkTWVzc2FnZShuKTtmLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChvby5NRVNTQUdFX1JFQ0VJVkVELGYpLG4ubGVuZ3RoPTB9fX19LHtrZXk6XCJfY2hlY2tNZXNzYWdlU3RhY2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUubGVuZ3RoO3Q+PTEwMCYmKEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9jaGVja01lc3NhZ2VTdGFja2VkIOebtOaSree+pOa2iOaBr+Wghuenr+aVsDpcIikuY29uY2F0KGUubGVuZ3RoLCfvvIHlj6/og73kvJrlr7zoh7Tlvq7kv6HlsI/nqIvluo/muLLmn5Pml7bpgYfliLAgXCJEb20gbGltaXQgZXhjZWVkZWRcIiDnmoTplJnor6/vvIzlu7rorq7mjqXlhaXkvqfmraTml7blj6rmuLLmn5PmnIDov5HnmoQxMOadoea2iOaBrycpKSx0aGlzLl9yZXBvcnRNZXNzYWdlU3RhY2tlZENvdW50PDUmJihuZXcgamQob2gpLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJjb3VudDpcIi5jb25jYXQodCxcIiBncm91cElEOlwiKS5jb25jYXQodih0aGlzLl9qb2luZWRHcm91cE1hcC5rZXlzKCkpKSkuc2V0TGV2ZWwoXCJ3YXJuaW5nXCIpLmVuZCgpLHRoaXMuX3JlcG9ydE1lc3NhZ2VTdGFja2VkQ291bnQrPTEpKX19LHtrZXk6XCJfaXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLl9nZXRNb2R1bGUoSmMpLmlzTWVzc2FnZVNlbnRCeUN1cnJlbnRJbnN0YW5jZShlKX19LHtrZXk6XCJwYWNrTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZS5jdXJyZW50VXNlcj10aGlzLl9ncm91cE1vZHVsZS5nZXRNeVVzZXJJRCgpLGUuY29udmVyc2F0aW9uVHlwZT01PT09dD9yby5DT05WX1NZU1RFTTpyby5DT05WX0dST1VQLGUuaXNTeXN0ZW1NZXNzYWdlPSEhZS5pc1N5c3RlbU1lc3NhZ2U7dmFyIG49bmV3IFFfKGUpLG89dGhpcy5wYWNrRWxlbWVudHMoZSx0KTtyZXR1cm4gbi5zZXRFbGVtZW50KG8pLG59fSx7a2V5OlwicGFja0VsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gND09PW58fDY9PT1uPyh0aGlzLl91cGRhdGVNZW1iZXJDb3VudEJ5R3JvdXBUaXBzKGUpLHRoaXMuX29uR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZChlKSx7dHlwZTpyby5NU0dfR1JQX1RJUCxjb250ZW50OnQodCh7fSxlLmVsZW1lbnRzKSx7fSx7Z3JvdXBQcm9maWxlOmUuZ3JvdXBQcm9maWxlfSl9KTo1PT09bj97dHlwZTpyby5NU0dfR1JQX1NZU19OT1RJQ0UsY29udGVudDp0KHQoe30sZS5lbGVtZW50cykse30se2dyb3VwUHJvZmlsZTplLmdyb3VwUHJvZmlsZX0pfTp0aGlzLl9nZXRNb2R1bGUodGwpLnBhcnNlRWxlbWVudHMoZS5lbGVtZW50cyxlLmZyb20pfX0se2tleTpcInBhY2tDb252ZXJzYXRpb25PcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IE1hcCxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBvPWVbbl0scj1vLmNvbnZlcnNhdGlvbklEO2lmKHQuaGFzKHIpKXt2YXIgYT10LmdldChyKTthLmxhc3RNZXNzYWdlPW8sXCJpblwiPT09by5mbG93JiZhLnVucmVhZENvdW50Kyt9ZWxzZSB0LnNldChyLHtjb252ZXJzYXRpb25JRDpvLmNvbnZlcnNhdGlvbklELHVucmVhZENvdW50Olwib3V0XCI9PT1vLmZsb3c/MDoxLHR5cGU6by5jb252ZXJzYXRpb25UeXBlLHN1YlR5cGU6by5jb252ZXJzYXRpb25TdWJUeXBlLGxhc3RNZXNzYWdlOm99KX1yZXR1cm4gdih0LnZhbHVlcygpKX19LHtrZXk6XCJfdXBkYXRlTWVtYmVyQ291bnRCeUdyb3VwVGlwc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ3JvdXBQcm9maWxlLmdyb3VwSUQsbj1lLmVsZW1lbnRzLm9ubGluZU1lbWJlckluZm8sbz12b2lkIDA9PT1uP3ZvaWQgMDpuO2lmKCFMdShvKSl7dmFyIHI9by5vbmxpbmVNZW1iZXJOdW0sYT12b2lkIDA9PT1yPzA6cixzPW8uZXhwaXJlVGltZSxpPXZvaWQgMD09PXM/dGhpcy5ERUZBVUxUX0VYUElSRV9USU1FOnMsdT10aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5nZXQodCl8fHt9LGM9RGF0ZS5ub3coKTtMdSh1KT9PYmplY3QuYXNzaWduKHUse2xhc3RSZXFUaW1lOjAsbGFzdFN5bmNUaW1lOjAsbGF0ZXN0VXBkYXRlVGltZTpjLG1lbWJlckNvdW50OmEsZXhwaXJlVGltZTppfSk6KHUubGF0ZXN0VXBkYXRlVGltZT1jLHUubWVtYmVyQ291bnQ9YSksS2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl91cGRhdGVNZW1iZXJDb3VudEJ5R3JvdXBUaXBzIGluZm86XCIpLHUpLHRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLnNldCh0LHUpfX19LHtrZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5oYXMoZSkpe3ZhciB0PXRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5nZXQoZSk7dC5pc1J1bm5pbmcoKXx8dC5zdGFydCgpfWVsc2V7dmFyIG49bmV3IGV2KHtncm91cE1vZHVsZTp0aGlzLl9ncm91cE1vZHVsZSxncm91cElEOmUsb25Jbml0OnRoaXMuX3VwZGF0ZVJlcXVlc3REYXRhLmJpbmQodGhpcyksb25TdWNjZXNzOnRoaXMuX2hhbmRsZVN1Y2Nlc3MuYmluZCh0aGlzKSxvbkZhaWw6dGhpcy5faGFuZGxlRmFpbHVyZS5iaW5kKHRoaXMpfSk7bi5zdGFydCgpLHRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5zZXQoZSxuKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnN0YXJ0IGdyb3VwSUQ6XCIpLmNvbmNhdChlKSl9fX0se2tleTpcImhhbmRsZUpvaW5SZXN1bHRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9wcmVDaGVjaygpLnRoZW4oKGZ1bmN0aW9uKCl7dmFyIG49ZS5sb25nUG9sbGluZ0tleSxvPWUuZ3JvdXAscj1vLmdyb3VwSUQ7cmV0dXJuIHQuX2pvaW5lZEdyb3VwTWFwLnNldChyLG8pLHQuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKFtvXSksdC5fZ3JvdXBNb2R1bGUuZGVsZXRlVW5qb2luZWRBVkNoYXRSb29tKHIpLHQuX2dyb3VwTW9kdWxlLmVtaXRHcm91cExpc3RVcGRhdGUoITAsITEpLEppKG4pP3VtKHtzdGF0dXM6TF8sZ3JvdXA6b30pOlByb21pc2UucmVzb2x2ZSgpfSkpfX0se2tleTpcInN0YXJ0UnVuTG9vcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuaGFuZGxlSm9pblJlc3VsdChlKS50aGVuKChmdW5jdGlvbigpe3ZhciBuPWUubG9uZ1BvbGxpbmdLZXksbz1lLmdyb3VwLHI9by5ncm91cElEO3JldHVybiB0Ll9wb2xsaW5nUmVxdWVzdEluZm9NYXAuc2V0KHIse2tleTpuLHN0YXJ0U2VxOjB9KSx0LnN0YXJ0KHIpLHQuX2dyb3VwTW9kdWxlLmlzTG9nZ2VkSW4oKT91bSh7c3RhdHVzOkxfLGdyb3VwOm99KTp1bSh7c3RhdHVzOkxffSl9KSl9fSx7a2V5OlwiX3ByZUNoZWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLl9nZXRNb2R1bGUoWGMpLmlzVW5saW1pdGVkQVZDaGF0Um9vbSgpKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtpZighdGhpcy5oYXNKb2luZWRBVkNoYXRSb29tKCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3ZhciBlPW0odGhpcy5fam9pbmVkR3JvdXBNYXAuZW50cmllcygpLm5leHQoKS52YWx1ZSwyKSx0PWVbMF0sbj1lWzFdO2lmKHRoaXMuX2dyb3VwTW9kdWxlLmlzTG9nZ2VkSW4oKSl7aWYoIShuLnNlbGZJbmZvLnJvbGU9PT1yby5HUlBfTUJSX1JPTEVfT1dORVJ8fG4ub3duZXJJRD09PXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCkpKXJldHVybiB0aGlzLl9ncm91cE1vZHVsZS5xdWl0R3JvdXAodCk7dGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbih0KX1lbHNlIHRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24odCk7cmV0dXJuIHRoaXMucmVzZXQodCksUHJvbWlzZS5yZXNvbHZlKCl9fSx7a2V5Olwiam9pbldpdGhvdXRBdXRoXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZ3JvdXBJRCxvPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5qb2luV2l0aG91dEF1dGhcIikscj1uZXcgamQoVmcpO3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6eGwscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBhPWUuZGF0YS5sb25nUG9sbGluZ0tleTtpZihyLnNldE5ldHdvcmtUeXBlKHQuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIGxvbmdQb2xsaW5nS2V5OlwiKS5jb25jYXQoYSkpLmVuZCghMCksSmkoYSkpcmV0dXJuIGNtKG5ldyBhbSh7Y29kZTpUcC5DQU5OT1RfSk9JTl9OT05fQVZDSEFUUk9PTV9XSVRIT1VUX0xPR0lOLG1lc3NhZ2U6ZGR9KSk7S2kubG9nKFwiXCIuY29uY2F0KG8sXCIgb2suIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSksdC5fZ2V0TW9kdWxlKEpjKS5zZXRDb21wbGV0ZWQoXCJcIi5jb25jYXQocm8uQ09OVl9HUk9VUCkuY29uY2F0KG4pKTt2YXIgcz1uZXcgS20oe2dyb3VwSUQ6bn0pO3JldHVybiB0LnN0YXJ0UnVuTG9vcCh7Z3JvdXA6cyxsb25nUG9sbGluZ0tleTphfSksWl8oe3N0YXR1czpMX30pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gS2kuZXJyb3IoXCJcIi5jb25jYXQobyxcIiBmYWlsZWQuIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIGVycm9yOlwiKSxlKSx0Ll9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbz1tKHQsMiksYT1vWzBdLHM9b1sxXTtyLnNldEVycm9yKGUsYSxzKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobikpLmVuZCghMCl9KSksY20oZSl9KSkuZmluYWxseSgoZnVuY3Rpb24oKXt0Ll9ncm91cE1vZHVsZS5nZXRNb2R1bGUoWmMpLnJlcG9ydEF0T25jZSgpfSkpfX0se2tleTpcImdldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5nZXQoZSl8fHt9LG49RGF0ZS5ub3coKTtyZXR1cm4gTHUodCl8fG4tdC5sYXN0U3luY1RpbWU+MWUzKnQuZXhwaXJlVGltZSYmbi10LmxhdGVzdFVwZGF0ZVRpbWU+MWU0JiZuLXQubGFzdFJlcVRpbWU+M2UzPyh0Lmxhc3RSZXFUaW1lPW4sdGhpcy5fb25saW5lTWVtYmVyQ291bnRNYXAuc2V0KGUsdCksdGhpcy5fZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudChlKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gWl8oe21lbWJlckNvdW50OmUubWVtYmVyQ291bnR9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIGNtKGUpfSkpKTp1bSh7bWVtYmVyQ291bnQ6dC5tZW1iZXJDb3VudH0pfX0se2tleTpcIl9nZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwiKTtyZXR1cm4gdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlpsLHJlcXVlc3REYXRhOntncm91cElEOmV9fSkudGhlbigoZnVuY3Rpb24obyl7dmFyIHI9dC5fb25saW5lTWVtYmVyQ291bnRNYXAuZ2V0KGUpfHx7fSxhPW8uZGF0YSxzPWEub25saW5lTWVtYmVyTnVtLGk9dm9pZCAwPT09cz8wOnMsdT1hLmV4cGlyZVRpbWUsYz12b2lkIDA9PT11P3QuREVGQVVMVF9FWFBJUkVfVElNRTp1O0tpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBncm91cElEOlwiKS5jb25jYXQoZSxcIiBtZW1iZXJDb3VudDpcIikuY29uY2F0KGksXCIgZXhwaXJlVGltZTpcIikuY29uY2F0KGMpKTt2YXIgbD1EYXRlLm5vdygpO3JldHVybiBMdShyKSYmKHIubGFzdFJlcVRpbWU9bCksdC5fb25saW5lTWVtYmVyQ291bnRNYXAuc2V0KGUsT2JqZWN0LmFzc2lnbihyLHtsYXN0U3luY1RpbWU6bCxsYXRlc3RVcGRhdGVUaW1lOmwsbWVtYmVyQ291bnQ6aSxleHBpcmVUaW1lOmN9KSkse21lbWJlckNvdW50Oml9fSkpLmNhdGNoKChmdW5jdGlvbihvKXtyZXR1cm4gS2kud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLG8pLG5ldyBqZChlaCkuc2V0Q29kZShvLmNvZGUpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlLFwiIGVycm9yOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobykpKS5zZXROZXR3b3JrVHlwZSh0Ll9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxQcm9taXNlLnJlamVjdChvKX0pKX19LHtrZXk6XCJfb25Hcm91cEF0dHJpYnV0ZXNVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ncm91cFByb2ZpbGUuZ3JvdXBJRCxuPWUuZWxlbWVudHMsbz1uLm9wZXJhdGlvblR5cGUscj1uLm5ld0dyb3VwUHJvZmlsZTtpZig2PT09byl7dmFyIGE9KHZvaWQgMD09PXI/dm9pZCAwOnIpLmdyb3VwQXR0cmlidXRlT3B0aW9uO0ppKGEpfHx0aGlzLl9ncm91cE1vZHVsZS5vbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWQoe2dyb3VwSUQ6dCxncm91cEF0dHJpYnV0ZU9wdGlvbjphfSl9fX0se2tleTpcIl9nZXRNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGUpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZSl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldCBncm91cElEOlwiKS5jb25jYXQoZSkpO3ZhciB0PXRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5nZXQoZSk7dCYmdC5zdG9wKCksdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmRlbGV0ZShlKSx0aGlzLl9qb2luZWRHcm91cE1hcC5kZWxldGUoZSksdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLmRlbGV0ZShlKSx0aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5kZWxldGUoZSl9ZWxzZXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0IGFsbFwiKSk7dmFyIG4sbz1EKHRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC52YWx1ZXMoKSk7dHJ5e2ZvcihvLnMoKTshKG49by5uKCkpLmRvbmU7KXtuLnZhbHVlLnN0b3AoKX19Y2F0Y2gocil7by5lKHIpfWZpbmFsbHl7by5mKCl9dGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmNsZWFyKCksdGhpcy5fam9pbmVkR3JvdXBNYXAuY2xlYXIoKSx0aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXAuY2xlYXIoKSx0aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5jbGVhcigpfXRoaXMuc2VxdWVuY2VzTGlua2VkTGlzdC5yZXNldCgpLHRoaXMubWVzc2FnZUlETGlua2VkTGlzdC5yZXNldCgpLHRoaXMucmVjZWl2ZWRNZXNzYWdlQ291bnQ9MCx0aGlzLl9yZXBvcnRNZXNzYWdlU3RhY2tlZENvdW50PTB9fV0pLGV9KCksb3Y9MSxydj0xNSxhdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX2dyb3VwTW9kdWxlPXQsdGhpcy5fY2xhc3NOYW1lPVwiR3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyXCIsdGhpcy5wZW5kZW5jeU1hcD1uZXcgTWFwfXJldHVybiBhKGUsW3trZXk6XCJvbk5ld0dyb3VwU3lzdGVtTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdCxuPWUuaXNTeW5jaW5nRW5kZWQsbz1lLmlzSW5zdGFudE1lc3NhZ2U7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUmVjZWl2ZVN5c3RlbU5vdGljZSBjb3VudDpcIikuY29uY2F0KHQubGVuZ3RoKSk7dmFyIHI9dGhpcy5uZXdTeXN0ZW1Ob3RpY2VTdG9yZWRBbmRTdW1tYXJ5KHtub3RpZmllc0xpc3Q6dCxpc0luc3RhbnRNZXNzYWdlOm99KSxhPXIuZXZlbnREYXRhTGlzdCxzPXIucmVzdWx0O2EubGVuZ3RoPjAmJih0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoSmMpLm9uTmV3TWVzc2FnZSh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6YSxpc0luc3RhbnRNZXNzYWdlOm99KSx0aGlzLl9vblJlY2VpdmVkR3JvdXBTeXN0ZW1Ob3RpY2Uoe3Jlc3VsdDpzLGlzSW5zdGFudE1lc3NhZ2U6b30pKTtvP3MubGVuZ3RoPjAmJnRoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KG9vLk1FU1NBR0VfUkVDRUlWRUQscyk6ITA9PT1uJiZ0aGlzLl9jbGVhckdyb3VwU3lzdGVtTm90aWNlKCl9fSx7a2V5OlwibmV3U3lzdGVtTm90aWNlU3RvcmVkQW5kU3VtbWFyeVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPWUubm90aWZpZXNMaXN0LG89ZS5pc0luc3RhbnRNZXNzYWdlLHI9bnVsbCxhPW4ubGVuZ3RoLHM9MCxpPVtdLHU9e2NvbnZlcnNhdGlvbklEOnJvLkNPTlZfU1lTVEVNLHVucmVhZENvdW50OjAsdHlwZTpyby5DT05WX1NZU1RFTSxzdWJUeXBlOm51bGwsbGFzdE1lc3NhZ2U6bnVsbH07Zm9yKHM9MDtzPGE7cysrKXt2YXIgYz1uW3NdO2lmKGMuZWxlbWVudHMub3BlcmF0aW9uVHlwZSE9PXJ2KWMuY3VycmVudFVzZXI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSxjLmNvbnZlcnNhdGlvblR5cGU9cm8uQ09OVl9TWVNURU0sYy5jb252ZXJzYXRpb25JRD1yby5DT05WX1NZU1RFTSwocj1uZXcgUV8oYykpLnNldEVsZW1lbnQoe3R5cGU6cm8uTVNHX0dSUF9TWVNfTk9USUNFLGNvbnRlbnQ6dCh0KHt9LGMuZWxlbWVudHMpLHt9LHtncm91cFByb2ZpbGU6Yy5ncm91cFByb2ZpbGV9KX0pLHIuaXNTeXN0ZW1NZXNzYWdlPSEwLCgxPT09ci5zZXF1ZW5jZSYmMT09PXIucmFuZG9tfHwyPT09ci5zZXF1ZW5jZSYmMj09PXIucmFuZG9tKSYmKHIuc2VxdWVuY2U9aXUoKSxyLnJhbmRvbT1pdSgpLHIuZ2VuZXJhdGVNZXNzYWdlSUQoYy5jdXJyZW50VXNlciksS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5uZXdTeXN0ZW1Ob3RpY2VTdG9yZWRBbmRTdW1tYXJ5IHNlcXVlbmNlIGFuZCByYW5kb20gbWF5YmUgZHVwbGljYXRlZCwgcmVnZW5lcmF0ZS4gSUQ6XCIpLmNvbmNhdChyLklEKSkpLHRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShKYykucHVzaEludG9Ob3RpY2VSZXN1bHQoaSxyKSYmKG8/dS51bnJlYWRDb3VudCsrOnIuc2V0SXNSZWFkKCEwKSx1LnN1YlR5cGU9ci5jb252ZXJzYXRpb25TdWJUeXBlKX1yZXR1cm4gdS5sYXN0TWVzc2FnZT1pW2kubGVuZ3RoLTFdLHtldmVudERhdGFMaXN0OmkubGVuZ3RoPjA/W3VdOltdLHJlc3VsdDppfX19LHtrZXk6XCJfY2xlYXJHcm91cFN5c3RlbU5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmdldFBlbmRlbmN5TGlzdCgpLnRoZW4oKGZ1bmN0aW9uKHQpe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5wZW5kZW5jeU1hcC5zZXQoXCJcIi5jb25jYXQodC5mcm9tLFwiX1wiKS5jb25jYXQodC5ncm91cElELFwiX1wiKS5jb25jYXQodC50byksdCl9KSk7dmFyIG49ZS5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKEpjKS5nZXRMb2NhbE1lc3NhZ2VMaXN0KHJvLkNPTlZfU1lTVEVNKSxvPVtdO24uZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49dC5wYXlsb2FkLHI9bi5vcGVyYXRvcklELGE9bi5vcGVyYXRpb25UeXBlLHM9bi5ncm91cFByb2ZpbGU7aWYoYT09PW92KXt2YXIgaT1cIlwiLmNvbmNhdChyLFwiX1wiKS5jb25jYXQocy5ncm91cElELFwiX1wiKS5jb25jYXQocy50byksdT1lLnBlbmRlbmN5TWFwLmdldChpKTt1JiZqaSh1LmhhbmRsZWQpJiYwIT09dS5oYW5kbGVkJiZvLnB1c2godCl9fSkpLGUuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2Uoe21lc3NhZ2VMaXN0Om99KX0pKX19LHtrZXk6XCJkZWxldGVHcm91cFN5c3RlbU5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2VcIik7cmV0dXJuIFdpKGUubWVzc2FnZUxpc3QpJiYwIT09ZS5tZXNzYWdlTGlzdC5sZW5ndGg/KEtpLmxvZyhcIlwiLmNvbmNhdChuKStlLm1lc3NhZ2VMaXN0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuSUR9KSkpLHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpKbCxyZXF1ZXN0RGF0YTp7bWVzc2FnZUxpc3RUb0RlbGV0ZTplLm1lc3NhZ2VMaXN0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2Zyb206cm8uQ09OVl9TWVNURU0sbWVzc2FnZVNlcTplLmNsaWVudFNlcXVlbmNlLG1lc3NhZ2VSYW5kb206ZS5yYW5kb219fSkpfX0pLnRoZW4oKGZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpO3ZhciBvPXQuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShKYyk7cmV0dXJuIGUubWVzc2FnZUxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5kZWxldGVMb2NhbE1lc3NhZ2UoZSl9KSksWl8oKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZXJyb3I6XCIpLGUpLGNtKGUpfSkpKTp1bSgpfX0se2tleTpcImdldFBlbmRlbmN5TGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpXbCxyZXF1ZXN0RGF0YTp7c3RhcnRUaW1lOmUmJmUuc3RhcnRUaW1lP2Uuc3RhcnRUaW1lOjAsbGltaXQ6ZSYmZS5saW1pdD9lLmxpbWl0OjEwLGhhbmRsZUFjY291bnQ6dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKX19KS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1lLmRhdGEucGVuZGVuY3lMaXN0O3JldHVybiAwIT09ZS5kYXRhLm5leHRTdGFydFRpbWU/dC5nZXRQZW5kZW5jeUxpc3Qoe3N0YXJ0VGltZTplLmRhdGEubmV4dFN0YXJ0VGltZX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybltdLmNvbmNhdCh2KG4pLHYoZSkpfSkpOm59KSl9fSx7a2V5OlwiX29uUmVjZWl2ZWRHcm91cFN5c3RlbU5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnJlc3VsdDtlLmlzSW5zdGFudE1lc3NhZ2UmJm4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7c3dpdGNoKGUucGF5bG9hZC5vcGVyYXRpb25UeXBlKXtjYXNlIDE6YnJlYWs7Y2FzZSAyOnQuX29uQXBwbHlHcm91cFJlcXVlc3RBZ3JlZWQoZSk7YnJlYWs7Y2FzZSAzOmJyZWFrO2Nhc2UgNDp0Ll9vbk1lbWJlcktpY2tlZChlKTticmVhaztjYXNlIDU6dC5fb25Hcm91cERpc21pc3NlZChlKTticmVhaztjYXNlIDY6YnJlYWs7Y2FzZSA3OnQuX29uSW52aXRlR3JvdXAoZSk7YnJlYWs7Y2FzZSA4OnQuX29uUXVpdEdyb3VwKGUpO2JyZWFrO2Nhc2UgOTp0Ll9vblNldE1hbmFnZXIoZSk7YnJlYWs7Y2FzZSAxMDp0Ll9vbkRlbGV0ZU1hbmFnZXIoZSl9fSkpfX0se2tleTpcIl9vbkFwcGx5R3JvdXBSZXF1ZXN0QWdyZWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKG4pfHx0aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6bn0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YS5ncm91cDtuJiYodC5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAoW25dKSx0Ll9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCkpfSkpfX0se2tleTpcIl9vbk1lbWJlcktpY2tlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKHQpJiZ0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKHQpfX0se2tleTpcIl9vbkdyb3VwRGlzbWlzc2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElEO3RoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAodCkmJnRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24odCk7dmFyIG49dGhpcy5fZ3JvdXBNb2R1bGUuX0FWQ2hhdFJvb21IYW5kbGVyO24mJm4uY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRCh0KSYmbi5yZXNldCh0KX19LHtrZXk6XCJfb25JbnZpdGVHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQ7dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cChuKXx8dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOm59KS50aGVuKChmdW5jdGlvbihlKXt2YXIgbj1lLmRhdGEuZ3JvdXA7biYmKHQuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKFtuXSksdC5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSgpKX0pKX19LHtrZXk6XCJfb25RdWl0R3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQ7dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cCh0KSYmdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbih0KX19LHtrZXk6XCJfb25TZXRNYW5hZ2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZSxuPXQudG8sbz10Lmdyb3VwSUQscj10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoV2MpLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKG8sbik7ciYmci51cGRhdGVSb2xlKHJvLkdSUF9NQlJfUk9MRV9BRE1JTil9fSx7a2V5OlwiX29uRGVsZXRlTWFuYWdlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUsbj10LnRvLG89dC5ncm91cElELHI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKFdjKS5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhvLG4pO3ImJnIudXBkYXRlUm9sZShyby5HUlBfTUJSX1JPTEVfTUVNQkVSKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wZW5kZW5jeU1hcC5jbGVhcigpfX1dKSxlfSgpLHN2PWZ1bmN0aW9uKGUpe2kocixlKTt2YXIgbj1fKHIpO2Z1bmN0aW9uIHIoZSl7dmFyIHQ7cmV0dXJuIG8odGhpcyxyKSwodD1uLmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkdyb3VwTW9kdWxlXCIsdC5fY29tbW9uR3JvdXBIYW5kbGVyPW51bGwsdC5fQVZDaGF0Um9vbUhhbmRsZXI9bnVsbCx0Ll9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXI9bnVsbCx0Ll9jb21tb25Hcm91cEhhbmRsZXI9bmV3IFhtKGgodCkpLHQuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXI9bmV3IFptKGgodCkpLHQuX0FWQ2hhdFJvb21IYW5kbGVyPW5ldyBudihoKHQpKSx0Ll9ncm91cFRpcHNIYW5kbGVyPW5ldyBZbShoKHQpKSx0Ll9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXI9bmV3IGF2KGgodCkpLHQuZ3JvdXBNYXA9bmV3IE1hcCx0Ll91bmpvaW5lZEFWQ2hhdFJvb21MaXN0PW5ldyBNYXAsdH1yZXR1cm4gYShyLFt7a2V5Olwib25DaGVja1RpbWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5pc0xvZ2dlZEluKCkmJih0aGlzLl9jb21tb25Hcm91cEhhbmRsZXIub25DaGVja1RpbWVyKGUpLHRoaXMuX2dyb3VwVGlwc0hhbmRsZXIub25DaGVja1RpbWVyKGUpKX19LHtrZXk6XCJndWFyZEZvckFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKGUuY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfR1JPVVApe3ZhciBuPWUudG87cmV0dXJuIHRoaXMuaGFzTG9jYWxHcm91cChuKT91bSgpOnRoaXMuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOm59KS50aGVuKChmdW5jdGlvbihvKXt2YXIgcj1vLmRhdGEuZ3JvdXAudHlwZTtpZihLaS5sb2coXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLmd1YXJkRm9yQVZDaGF0Um9vbS4gZ3JvdXBJRDpcIikuY29uY2F0KG4sXCIgdHlwZTpcIikuY29uY2F0KHIpKSxyPT09cm8uR1JQX0FWQ0hBVFJPT00pe3ZhciBhPVwidXNlcklkOlwiLmNvbmNhdChlLmZyb20sXCIg5pyq5Yqg5YWl576kIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwi44CC5Y+R5raI5oGv5YmN5YWI5L2/55SoIGpvaW5Hcm91cCDmjqXlj6PnlLPor7fliqDnvqTvvIzor6bnu4bor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI2pvaW5Hcm91cFwiKTtyZXR1cm4gS2kud2FybihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZ3VhcmRGb3JBVkNoYXRSb29tIHNlbmRNZXNzYWdlIG5vdCBhbGxvd2VkLiBcIikuY29uY2F0KGEpKSxjbShuZXcgYW0oe2NvZGU6VHAuTUVTU0FHRV9TRU5EX0ZBSUwsbWVzc2FnZTphLGRhdGE6e21lc3NhZ2U6ZX19KSl9cmV0dXJuIHVtKCl9KSl9cmV0dXJuIHVtKCl9fSx7a2V5OlwiY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXImJnRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSl9fSx7a2V5Olwib25OZXdHcm91cE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jb21tb25Hcm91cEhhbmRsZXImJnRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5vbk5ld0dyb3VwTWVzc2FnZShlKX19LHtrZXk6XCJ1cGRhdGVOZXh0TWVzc2FnZVNlcVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7V2koZSkmJmUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5jb252ZXJzYXRpb25JRC5yZXBsYWNlKHJvLkNPTlZfR1JPVVAsXCJcIik7dC5ncm91cE1hcC5oYXMobikmJih0Lmdyb3VwTWFwLmdldChuKS5uZXh0TWVzc2FnZVNlcT1lLmxhc3RNZXNzYWdlLnNlcXVlbmNlKzEpfSkpfX0se2tleTpcIm9uTmV3R3JvdXBUaXBzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZ3JvdXBUaXBzSGFuZGxlciYmdGhpcy5fZ3JvdXBUaXBzSGFuZGxlci5vbk5ld0dyb3VwVGlwcyhlKX19LHtrZXk6XCJvbkdyb3VwTWVzc2FnZVJldm9rZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jb21tb25Hcm91cEhhbmRsZXImJnRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5vbkdyb3VwTWVzc2FnZVJldm9rZWQoZSl9fSx7a2V5Olwib25OZXdHcm91cFN5c3RlbU5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlciYmdGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyLm9uTmV3R3JvdXBTeXN0ZW1Ob3RpY2UoZSl9fSx7a2V5Olwib25Hcm91cE1lc3NhZ2VSZWFkTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmRhdGFMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZWxlbWVudHMuZ3JvdXBNZXNzYWdlUmVhZE5vdGljZTtpZighSmkobikpe3ZhciBvPXQuZ2V0TW9kdWxlKEpjKTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZ3JvdXBJRCxyPWUubGFzdE1lc3NhZ2VTZXE7S2kuZGVidWcoXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLm9uR3JvdXBNZXNzYWdlUmVhZE5vdGljZSBncm91cElEOlwiKS5jb25jYXQobixcIiBsYXN0TWVzc2FnZVNlcTpcIikuY29uY2F0KHIpKTt2YXIgYT1cIlwiLmNvbmNhdChyby5DT05WX0dST1VQKS5jb25jYXQobik7by51cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnQoe2NvbnZlcnNhdGlvbklEOmEsbGFzdE1lc3NhZ2VTZXE6cn0pLG8udXBkYXRlVW5yZWFkQ291bnQoYSl9KSl9fSkpfX0se2tleTpcImRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyJiZ0aGlzLl9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXIuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2UoZSl9fSx7a2V5OlwiaW5pdEdyb3VwTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ncm91cE1hcC5zZXQoZS5ncm91cElELG5ldyBLbShlKSl9fSx7a2V5OlwiZGVsZXRlR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdyb3VwTWFwLmRlbGV0ZShlKX19LHtrZXk6XCJ1cGRhdGVHcm91cE1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Lmdyb3VwTWFwLmhhcyhlLmdyb3VwSUQpP3QuZ3JvdXBNYXAuZ2V0KGUuZ3JvdXBJRCkudXBkYXRlR3JvdXAoZSk6dC5ncm91cE1hcC5zZXQoZS5ncm91cElELG5ldyBLbShlKSl9KSksdGhpcy5fc2V0U3RvcmFnZUdyb3VwTGlzdCgpfX0se2tleTpcImdldFN0b3JhZ2VHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE1vZHVsZShRYykuZ2V0SXRlbShcImdyb3VwTWFwXCIpfX0se2tleTpcIl9zZXRTdG9yYWdlR3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldExvY2FsR3JvdXBMaXN0KCkuZmlsdGVyKChmdW5jdGlvbihlKXt2YXIgdD1lLnR5cGU7cmV0dXJuIW11KHQpfSkpLnNsaWNlKDAsMjApLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2dyb3VwSUQ6ZS5ncm91cElELG5hbWU6ZS5uYW1lLGF2YXRhcjplLmF2YXRhcix0eXBlOmUudHlwZX19KSk7dGhpcy5nZXRNb2R1bGUoUWMpLnNldEl0ZW0oXCJncm91cE1hcFwiLGUpfX0se2tleTpcImdldEdyb3VwTWFwXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cE1hcH19LHtrZXk6XCJnZXRMb2NhbEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHYodGhpcy5ncm91cE1hcC52YWx1ZXMoKSl9fSx7a2V5OlwiZ2V0TG9jYWxHcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ncm91cE1hcC5nZXQoZSl9fSx7a2V5Olwic29ydExvY2FsR3JvdXBMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT12KHRoaXMuZ3JvdXBNYXApLmZpbHRlcigoZnVuY3Rpb24oZSl7dmFyIHQ9bShlLDIpO3RbMF07cmV0dXJuIUx1KHRbMV0ubGFzdE1lc3NhZ2UpfSkpO2Uuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdFsxXS5sYXN0TWVzc2FnZS5sYXN0VGltZS1lWzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lfSkpLHRoaXMuZ3JvdXBNYXA9bmV3IE1hcCh2KGUpKX19LHtrZXk6XCJ1cGRhdGVHcm91cExhc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyJiZ0aGlzLl9jb21tb25Hcm91cEhhbmRsZXIuaGFuZGxlVXBkYXRlR3JvdXBMYXN0TWVzc2FnZShlKX19LHtrZXk6XCJlbWl0R3JvdXBMaXN0VXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdLHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxuPXRoaXMuZ2V0TG9jYWxHcm91cExpc3QoKTtpZihlJiZ0aGlzLmVtaXRPdXRlckV2ZW50KG9vLkdST1VQX0xJU1RfVVBEQVRFRCxuKSx0KXt2YXIgbz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG4pKSxyPXRoaXMuZ2V0TW9kdWxlKEpjKTtyLnVwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShvKX19fSx7a2V5OlwiZ2V0TXlOYW1lQ2FyZEJ5R3JvdXBJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSk7cmV0dXJuIHQ/dC5zZWxmSW5mby5uYW1lQ2FyZDpcIlwifX0se2tleTpcImdldEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb21tb25Hcm91cEhhbmRsZXI/dGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyLmdldEdyb3VwTGlzdChlKTp1bSgpfX0se2tleTpcImdldEdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1uZXcgamQoUGcpLG89XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwUHJvZmlsZVwiKSxyPWUuZ3JvdXBJRCxhPWUuZ3JvdXBDdXN0b21GaWVsZEZpbHRlcjtLaS5sb2coXCJcIi5jb25jYXQobyxcIiBncm91cElEOlwiKS5jb25jYXQocikpO3ZhciBzPXtncm91cElETGlzdDpbcl0scmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZUluZm9GaWx0ZXI6W1wiVHlwZVwiLFwiTmFtZVwiLFwiSW50cm9kdWN0aW9uXCIsXCJOb3RpZmljYXRpb25cIixcIkZhY2VVcmxcIixcIk93bmVyX0FjY291bnRcIixcIkNyZWF0ZVRpbWVcIixcIkluZm9TZXFcIixcIkxhc3RJbmZvVGltZVwiLFwiTGFzdE1zZ1RpbWVcIixcIk1lbWJlck51bVwiLFwiTWF4TWVtYmVyTnVtXCIsXCJBcHBseUpvaW5PcHRpb25cIixcIk5leHRNc2dTZXFcIixcIlNodXRVcEFsbE1lbWJlclwiXSxncm91cEN1c3RvbUZpZWxkRmlsdGVyOmF9fTtyZXR1cm4gdGhpcy5nZXRHcm91cFByb2ZpbGVBZHZhbmNlKHMpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBhLHM9ZS5kYXRhLGk9cy5zdWNjZXNzR3JvdXBMaXN0LHU9cy5mYWlsdXJlR3JvdXBMaXN0O3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQobyxcIiBva1wiKSksdS5sZW5ndGg+MD9jbSh1WzBdKToobXUoaVswXS50eXBlKSYmIXQuaGFzTG9jYWxHcm91cChyKT9hPW5ldyBLbShpWzBdKToodC51cGRhdGVHcm91cE1hcChpKSxhPXQuZ2V0TG9jYWxHcm91cFByb2ZpbGUocikpLG4uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQocixcIiB0eXBlOlwiKS5jb25jYXQoYS50eXBlLFwiIG11dGVBbGxNZW1iZXJzOlwiKS5jb25jYXQoYS5tdXRlQWxsTWVtYmVycyxcIiBvd25lcklEOlwiKS5jb25jYXQoYS5vd25lcklEKSkuZW5kKCksYSYmYS5zZWxmSW5mbyYmIWEuc2VsZkluZm8ubmFtZUNhcmQ/dC51cGRhdGVTZWxmSW5mbyhhKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gWl8oe2dyb3VwOmV9KX0pKTpaXyh7Z3JvdXA6YX0pKX0pKS5jYXRjaCgoZnVuY3Rpb24ocil7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG89bSh0LDIpLGE9b1swXSxzPW9bMV07bi5zZXRFcnJvcihyLGEscykuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCkpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG8sXCIgZmFpbGVkLiBlcnJvcjpcIiksciksY20ocil9KSl9fSx7a2V5OlwiZ2V0R3JvdXBQcm9maWxlQWR2YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRHcm91cFByb2ZpbGVBZHZhbmNlXCIpO3JldHVybiBXaShlLmdyb3VwSURMaXN0KSYmZS5ncm91cElETGlzdC5sZW5ndGg+NTAmJihLaS53YXJuKFwiXCIuY29uY2F0KHQsXCIg6I635Y+W576k6LWE5paZ55qE5pWw6YeP5LiN6IO96LaF6L+HNTDkuKpcIikpLGUuZ3JvdXBJRExpc3QubGVuZ3RoPTUwKSxLaS5sb2coXCJcIi5jb25jYXQodCxcIiBncm91cElETGlzdDpcIikuY29uY2F0KGUuZ3JvdXBJRExpc3QpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpQbCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oZSl7S2kubG9nKFwiXCIuY29uY2F0KHQsXCIgb2tcIikpO3ZhciBuPWUuZGF0YS5ncm91cHMsbz1uLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUuZXJyb3JDb2RlKXx8MD09PWUuZXJyb3JDb2RlfSkpLHI9bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmVycm9yQ29kZSYmMCE9PWUuZXJyb3JDb2RlfSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBhbSh7Y29kZTplLmVycm9yQ29kZSxtZXNzYWdlOmUuZXJyb3JJbmZvLGRhdGE6e2dyb3VwSUQ6ZS5ncm91cElEfX0pfSkpO3JldHVybiBaXyh7c3VjY2Vzc0dyb3VwTGlzdDpvLGZhaWx1cmVHcm91cExpc3Q6cn0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gS2kuZXJyb3IoXCJcIi5jb25jYXQodCxcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxjbShlKX0pKX19LHtrZXk6XCJ1cGRhdGVTZWxmSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGRhdGVTZWxmSW5mb1wiKSxuPWUuZ3JvdXBJRDtyZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KHQsXCIgZ3JvdXBJRDpcIikuY29uY2F0KG4pKSx0aGlzLmdldE1vZHVsZShXYykuZ2V0R3JvdXBNZW1iZXJQcm9maWxlKHtncm91cElEOm4sdXNlcklETGlzdDpbdGhpcy5nZXRNeVVzZXJJRCgpXX0pLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciBvPW4uZGF0YS5tZW1iZXJMaXN0O3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQodCxcIiBva1wiKSksZSYmMCE9PW8ubGVuZ3RoJiZlLnVwZGF0ZVNlbGZJbmZvKG9bMF0pLGV9KSl9fSx7a2V5OlwiY3JlYXRlR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLG89XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmNyZWF0ZUdyb3VwXCIpO2lmKCFbXCJQdWJsaWNcIixcIlByaXZhdGVcIixcIkNoYXRSb29tXCIsXCJBVkNoYXRSb29tXCJdLmluY2x1ZGVzKGUudHlwZSkpe3ZhciByPW5ldyBhbSh7Y29kZTpUcC5JTExFR0FMX0dST1VQX1RZUEUsbWVzc2FnZTpyZH0pO3JldHVybiBjbShyKX1tdShlLnR5cGUpJiYhSmkoZS5tZW1iZXJMaXN0KSYmZS5tZW1iZXJMaXN0Lmxlbmd0aD4wJiYoS2kud2FybihcIlwiLmNvbmNhdChvLFwiIOWIm+W7uiBBVkNoYXRSb29tIOaXtuS4jeiDvea3u+WKoOe+pOaIkOWRmO+8jOiHquWKqOW/veeVpeivpeWtl+autVwiKSksZS5tZW1iZXJMaXN0PXZvaWQgMCksX3UoZS50eXBlKXx8SmkoZS5qb2luT3B0aW9uKXx8KEtpLndhcm4oXCJcIi5jb25jYXQobyxcIiDliJvlu7ogV29yay9NZWV0aW5nL0FWQ2hhdFJvb20g576k5pe25LiN6IO96K6+572u5a2X5q61IGpvaW5PcHRpb27vvIzoh6rliqjlv73nlaXor6XlrZfmrrVcIikpLGUuam9pbk9wdGlvbj12b2lkIDApO3ZhciBhPW5ldyBqZChEZyk7S2kubG9nKFwiXCIuY29uY2F0KG8sXCIgb3B0aW9uczpcIiksZSk7dmFyIHM9W107cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkdsLHJlcXVlc3REYXRhOnQodCh7fSxlKSx7fSx7b3duZXJJRDp0aGlzLmdldE15VXNlcklEKCksd2ViUHVzaEZsYWc6MX0pfSkudGhlbigoZnVuY3Rpb24ocil7dmFyIGk9ci5kYXRhLHU9aS5ncm91cElELGM9aS5vdmVyTGltaXRVc2VySURMaXN0LGw9dm9pZCAwPT09Yz9bXTpjO2lmKHM9bCxhLnNldE5ldHdvcmtUeXBlKG4uZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwVHlwZTpcIi5jb25jYXQoZS50eXBlLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdCh1LFwiIG92ZXJMaW1pdFVzZXJJRExpc3Q9XCIpLmNvbmNhdChsKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KG8sXCIgb2sgZ3JvdXBJRDpcIikuY29uY2F0KHUsXCIgb3ZlckxpbWl0VXNlcklETGlzdDpcIiksbCksZS50eXBlPT09cm8uR1JQX0FWQ0hBVFJPT00pcmV0dXJuIG4uZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOnV9KTtMdShlLm1lbWJlckxpc3QpfHxMdShsKXx8KGUubWVtYmVyTGlzdD1lLm1lbWJlckxpc3QuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4tMT09PWwuaW5kZXhPZihlLnVzZXJJRCl9KSkpLG4udXBkYXRlR3JvdXBNYXAoW3QodCh7fSxlKSx7fSx7Z3JvdXBJRDp1fSldKTt2YXIgcD1uLmdldE1vZHVsZShIYyksZD1wLmNyZWF0ZUN1c3RvbU1lc3NhZ2Uoe3RvOnUsY29udmVyc2F0aW9uVHlwZTpyby5DT05WX0dST1VQLHBheWxvYWQ6e2RhdGE6XCJncm91cF9jcmVhdGVcIixleHRlbnNpb246XCJcIi5jb25jYXQobi5nZXRNeVVzZXJJRCgpLFwi5Yib5bu6576k57uEXCIpfX0pO3JldHVybiBwLnNlbmRNZXNzYWdlSW5zdGFuY2UoZCksbi5lbWl0R3JvdXBMaXN0VXBkYXRlKCksbi5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6dX0pfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YS5ncm91cCxuPXQuc2VsZkluZm8sbz1uLm5hbWVDYXJkLHI9bi5qb2luVGltZTtyZXR1cm4gdC51cGRhdGVTZWxmSW5mbyh7bmFtZUNhcmQ6byxqb2luVGltZTpyLG1lc3NhZ2VSZW1pbmRUeXBlOnJvLk1TR19SRU1JTkRfQUNQVF9BTkRfTk9URSxyb2xlOnJvLkdSUF9NQlJfUk9MRV9PV05FUn0pLFpfKHtncm91cDp0LG92ZXJMaW1pdFVzZXJJRExpc3Q6c30pfSkpLmNhdGNoKChmdW5jdGlvbih0KXtyZXR1cm4gYS5zZXRNZXNzYWdlKFwiZ3JvdXBUeXBlOlwiLmNvbmNhdChlLnR5cGUpKSxuLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPW0oZSwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IodCxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG8sXCIgZmFpbGVkLiBlcnJvcjpcIiksdCksY20odCl9KSl9fSx7a2V5OlwiZGlzbWlzc0dyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kaXNtaXNzR3JvdXBcIik7aWYodGhpcy5oYXNMb2NhbEdyb3VwKGUpJiZ0aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKGUpLnR5cGU9PT1yby5HUlBfV09SSylyZXR1cm4gY20obmV3IGFtKHtjb2RlOlRwLkNBTk5PVF9ESVNNSVNTX1dPUkssbWVzc2FnZTp1ZH0pKTt2YXIgbz1uZXcgamQoUmcpO3JldHVybiBvLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlKSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpVbCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDplfX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIG8uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSksdC5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKGUpLHQuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKSYmdC5fQVZDaGF0Um9vbUhhbmRsZXIucmVzZXQoZSksWl8oe2dyb3VwSUQ6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpfX0se2tleTpcInVwZGF0ZUdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIudXBkYXRlR3JvdXBQcm9maWxlXCIpOyF0aGlzLmhhc0xvY2FsR3JvdXAoZS5ncm91cElEKXx8X3UodGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShlLmdyb3VwSUQpLnR5cGUpfHxKaShlLmpvaW5PcHRpb24pfHwoS2kud2FybihcIlwiLmNvbmNhdChuLFwiIFdvcmsvTWVldGluZy9BVkNoYXRSb29tIOe+pOS4jeiDveiuvue9ruWtl+autSBqb2luT3B0aW9u77yM6Ieq5Yqo5b+955Wl6K+l5a2X5q61XCIpKSxlLmpvaW5PcHRpb249dm9pZCAwKSxKaShlLm11dGVBbGxNZW1iZXJzKXx8KGUubXV0ZUFsbE1lbWJlcnM/ZS5tdXRlQWxsTWVtYmVycz1cIk9uXCI6ZS5tdXRlQWxsTWVtYmVycz1cIk9mZlwiKTt2YXIgbz1uZXcgamQoYmcpO3JldHVybiBvLnNldE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoZSkpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChlLmdyb3VwSUQpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpGbCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24oKXsoby5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSx0Lmhhc0xvY2FsR3JvdXAoZS5ncm91cElEKSkmJih0Lmdyb3VwTWFwLmdldChlLmdyb3VwSUQpLnVwZGF0ZUdyb3VwKGUpLHQuX3NldFN0b3JhZ2VHcm91cExpc3QoKSk7cmV0dXJuIFpfKHtncm91cDp0Lmdyb3VwTWFwLmdldChlLmdyb3VwSUQpfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxyPW5bMF0sYT1uWzFdO28uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpfX0se2tleTpcImpvaW5Hcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLnR5cGUscj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuam9pbkdyb3VwXCIpO2lmKG89PT1yby5HUlBfV09SSyl7dmFyIGE9bmV3IGFtKHtjb2RlOlRwLkNBTk5PVF9KT0lOX1dPUkssbWVzc2FnZTphZH0pO3JldHVybiBjbShhKX1pZih0aGlzLmRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbShuKSx0aGlzLmhhc0xvY2FsR3JvdXAobikpe2lmKCF0aGlzLmlzTG9nZ2VkSW4oKSlyZXR1cm4gdW0oe3N0YXR1czpyby5KT0lOX1NUQVRVU19BTFJFQURZX0lOX0dST1VQfSk7dmFyIHM9bmV3IGpkKEVnKTtyZXR1cm4gdGhpcy5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6bn0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHMuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQobixcIiBqb2luZWRTdGF0dXM6XCIpLmNvbmNhdChyby5KT0lOX1NUQVRVU19BTFJFQURZX0lOX0dST1VQKSkuZW5kKCksdW0oe3N0YXR1czpyby5KT0lOX1NUQVRVU19BTFJFQURZX0lOX0dST1VQfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKG8pe3JldHVybiBzLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgdW5qb2luZWRcIikpLmVuZCgpLEtpLndhcm4oXCJcIi5jb25jYXQocixcIiBcIikuY29uY2F0KG4sXCIgd2FzIHVuam9pbmVkLCBub3cgam9pbiFcIikpLHQuZ3JvdXBNYXAuZGVsZXRlKG4pLHQuYXBwbHlKb2luR3JvdXAoZSl9KSl9cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdChyLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChuKSksdGhpcy5pc0xvZ2dlZEluKCk/dGhpcy5hcHBseUpvaW5Hcm91cChlKTp0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5qb2luV2l0aG91dEF1dGgoZSl9fSx7a2V5OlwiYXBwbHlKb2luR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFwcGx5Sm9pbkdyb3VwXCIpLG89ZS5ncm91cElELHI9bmV3IGpkKEVnKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6cWwscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBhPWUuZGF0YSxzPWEuam9pbmVkU3RhdHVzLGk9YS5sb25nUG9sbGluZ0tleSx1PWEuYXZDaGF0Um9vbUZsYWcsYz1hLmF2Q2hhdFJvb21LZXksbD1cImdyb3VwSUQ6XCIuY29uY2F0KG8sXCIgam9pbmVkU3RhdHVzOlwiKS5jb25jYXQocyxcIiBsb25nUG9sbGluZ0tleTpcIikuY29uY2F0KGksXCIgYXZDaGF0Um9vbUZsYWc6XCIpLmNvbmNhdCh1KTtzd2l0Y2goci5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQobCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rLiBcIikuY29uY2F0KGwpKSxzKXtjYXNlIFJfOnJldHVybiBaXyh7c3RhdHVzOlJffSk7Y2FzZSBMXzpyZXR1cm4gdC5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6b30pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YS5ncm91cCxyPXtzdGF0dXM6TF8sZ3JvdXA6bn07cmV0dXJuIDE9PT11Pyh0LmdldE1vZHVsZShKYykuc2V0Q29tcGxldGVkKFwiXCIuY29uY2F0KHJvLkNPTlZfR1JPVVApLmNvbmNhdChvKSksdC5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5pbml0R3JvdXBBdHRyaWJ1dGVzQ2FjaGUoe2dyb3VwSUQ6byxhdkNoYXRSb29tS2V5OmN9KSxKaShpKT90Ll9BVkNoYXRSb29tSGFuZGxlci5oYW5kbGVKb2luUmVzdWx0KHtncm91cDpufSk6dC5fQVZDaGF0Um9vbUhhbmRsZXIuc3RhcnRSdW5Mb29wKHtsb25nUG9sbGluZ0tleTppLGdyb3VwOm59KSk6KHQuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhMSksWl8ocikpfSkpO2RlZmF1bHQ6dmFyIHA9bmV3IGFtKHtjb2RlOlRwLkpPSU5fR1JPVVBfRkFJTCxtZXNzYWdlOmxkfSk7cmV0dXJuIEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZXJyb3I6XCIpLHApLGNtKHApfX0pKS5jYXRjaCgoZnVuY3Rpb24obyl7cmV0dXJuIHIuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCkpLHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9bShlLDIpLG49dFswXSxhPXRbMV07ci5zZXRFcnJvcihvLG4sYSkuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBlcnJvcjpcIiksbyksY20obyl9KSl9fSx7a2V5OlwicXVpdEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5xdWl0R3JvdXBcIik7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUpKTt2YXIgbz10aGlzLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSk7aWYoIW8mJiF0aGlzLmhhc0xvY2FsR3JvdXAoZSkpe3ZhciByPW5ldyBhbSh7Y29kZTpUcC5NRU1CRVJfTk9UX0lOX0dST1VQLG1lc3NhZ2U6Y2R9KTtyZXR1cm4gY20ocil9aWYobyYmIXRoaXMuaXNMb2dnZWRJbigpKXJldHVybiBLaS5sb2coXCJcIi5jb25jYXQobixcIiBhbm9ueW1vdXNseSBvay4gZ3JvdXBJRDpcIikuY29uY2F0KGUpKSx0aGlzLmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24oZSksdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIucmVzZXQoZSksdW0oe2dyb3VwSUQ6ZX0pO3ZhciBhPW5ldyBqZChDZyk7cmV0dXJuIGEuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpWbCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDplfX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSksbyYmdC5fQVZDaGF0Um9vbUhhbmRsZXIucmVzZXQoZSksdC5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKGUpLFpfKHtncm91cElEOmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07YS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxjbShlKX0pKX19LHtrZXk6XCJzZWFyY2hHcm91cEJ5SURcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNlYXJjaEdyb3VwQnlJRFwiKSxvPXtncm91cElETGlzdDpbZV19LHI9bmV3IGpkKEFnKTtyZXR1cm4gci5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZSkpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChlKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6S2wscmVxdWVzdERhdGE6b30pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZGF0YS5ncm91cFByb2ZpbGU7aWYoMCE9PW9bMF0uZXJyb3JDb2RlKXRocm93IG5ldyBhbSh7Y29kZTpvWzBdLmVycm9yQ29kZSxtZXNzYWdlOm9bMF0uZXJyb3JJbmZvfSk7cmV0dXJuIHIuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSksWl8oe2dyb3VwOm5ldyBLbShvWzBdKX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLGE9blsxXTtyLnNldEVycm9yKGUsbyxhKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksY20oZSl9KSl9fSx7a2V5OlwiY2hhbmdlR3JvdXBPd25lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY2hhbmdlR3JvdXBPd25lclwiKTtpZih0aGlzLmhhc0xvY2FsR3JvdXAoZS5ncm91cElEKSYmdGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShlLmdyb3VwSUQpLnR5cGU9PT1yby5HUlBfQVZDSEFUUk9PTSlyZXR1cm4gY20obmV3IGFtKHtjb2RlOlRwLkNBTk5PVF9DSEFOR0VfT1dORVJfSU5fQVZDSEFUUk9PTSxtZXNzYWdlOnNkfSkpO2lmKGUubmV3T3duZXJJRD09PXRoaXMuZ2V0TXlVc2VySUQoKSlyZXR1cm4gY20obmV3IGFtKHtjb2RlOlRwLkNBTk5PVF9DSEFOR0VfT1dORVJfVE9fU0VMRixtZXNzYWdlOmlkfSkpO3ZhciBvPW5ldyBqZChrZyk7cmV0dXJuIG8uc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCxcIiBuZXdPd25lcklEOlwiKS5jb25jYXQoZS5uZXdPd25lcklEKSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZ3JvdXBJRDpcIikuY29uY2F0KGUuZ3JvdXBJRCkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkJsLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbigpe28uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSk7dmFyIHI9ZS5ncm91cElELGE9ZS5uZXdPd25lcklEO3QuZ3JvdXBNYXAuZ2V0KHIpLm93bmVySUQ9YTt2YXIgcz10LmdldE1vZHVsZShXYykuZ2V0TG9jYWxHcm91cE1lbWJlckxpc3Qocik7aWYocyBpbnN0YW5jZW9mIE1hcCl7dmFyIGk9cy5nZXQodC5nZXRNeVVzZXJJRCgpKTtKaShpKXx8KGkudXBkYXRlUm9sZShcIk1lbWJlclwiKSx0Lmdyb3VwTWFwLmdldChyKS5zZWxmSW5mby5yb2xlPVwiTWVtYmVyXCIpO3ZhciB1PXMuZ2V0KGEpO0ppKHUpfHx1LnVwZGF0ZVJvbGUoXCJPd25lclwiKX1yZXR1cm4gdC5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKSxaXyh7Z3JvdXA6dC5ncm91cE1hcC5nZXQocil9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxjbShlKX0pKX19LHtrZXk6XCJoYW5kbGVHcm91cEFwcGxpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxvPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5oYW5kbGVHcm91cEFwcGxpY2F0aW9uXCIpLHI9ZS5tZXNzYWdlLnBheWxvYWQsYT1yLmdyb3VwUHJvZmlsZS5ncm91cElELHM9ci5hdXRoZW50aWNhdGlvbixpPXIubWVzc2FnZUtleSx1PXIub3BlcmF0b3JJRCxjPW5ldyBqZChOZyk7cmV0dXJuIGMuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGEpKSxLaS5sb2coXCJcIi5jb25jYXQobyxcIiBncm91cElEOlwiKS5jb25jYXQoYSkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkhsLHJlcXVlc3REYXRhOnQodCh7fSxlKSx7fSx7YXBwbGljYW50OnUsZ3JvdXBJRDphLGF1dGhlbnRpY2F0aW9uOnMsbWVzc2FnZUtleTppfSl9KS50aGVuKChmdW5jdGlvbigpe3JldHVybiBjLnNldE5ldHdvcmtUeXBlKG4uZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KG8sXCIgb2tcIikpLG4uX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlci5kZWxldGVHcm91cFN5c3RlbU5vdGljZSh7bWVzc2FnZUxpc3Q6W2UubWVzc2FnZV19KSxaXyh7Z3JvdXA6bi5nZXRMb2NhbEdyb3VwUHJvZmlsZShhKX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gbi5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtjLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChvLFwiIGZhaWxlZC4gZXJyb3JcIiksZSksY20oZSl9KSl9fSx7a2V5OlwiaGFuZGxlR3JvdXBJbnZpdGF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxvPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5oYW5kbGVHcm91cEludml0YXRpb25cIikscj1lLm1lc3NhZ2UucGF5bG9hZCxhPXIuZ3JvdXBQcm9maWxlLmdyb3VwSUQscz1yLmF1dGhlbnRpY2F0aW9uLGk9ci5tZXNzYWdlS2V5LHU9ci5vcGVyYXRvcklELGM9ZS5oYW5kbGVBY3Rpb24sbD1uZXcgamQoT2cpO3JldHVybiBsLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChhLFwiIGludml0ZXI6XCIpLmNvbmNhdCh1LFwiIGhhbmRsZUFjdGlvbjpcIikuY29uY2F0KGMpKSxLaS5sb2coXCJcIi5jb25jYXQobyxcIiBncm91cElEOlwiKS5jb25jYXQoYSxcIiBpbnZpdGVyOlwiKS5jb25jYXQodSxcIiBoYW5kbGVBY3Rpb246XCIpLmNvbmNhdChjKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6amwscmVxdWVzdERhdGE6dCh0KHt9LGUpLHt9LHtpbnZpdGVyOnUsZ3JvdXBJRDphLGF1dGhlbnRpY2F0aW9uOnMsbWVzc2FnZUtleTppfSl9KS50aGVuKChmdW5jdGlvbigpe3JldHVybiBsLnNldE5ldHdvcmtUeXBlKG4uZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KG8sXCIgb2tcIikpLG4uX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlci5kZWxldGVHcm91cFN5c3RlbU5vdGljZSh7bWVzc2FnZUxpc3Q6W2UubWVzc2FnZV19KSxaXyh7Z3JvdXA6bi5nZXRMb2NhbEdyb3VwUHJvZmlsZShhKX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gbi5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtsLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChvLFwiIGZhaWxlZC4gZXJyb3JcIiksZSksY20oZSl9KSl9fSx7a2V5OlwiZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9BVkNoYXRSb29tSGFuZGxlcj90aGlzLl9BVkNoYXRSb29tSGFuZGxlci5jaGVja0pvaW5lZEFWQ2hhdFJvb21CeUlEKGUpP3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmdldEdyb3VwT25saW5lTWVtYmVyQ291bnQoZSk6dW0oe21lbWJlckNvdW50OjB9KTpjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcImhhc0xvY2FsR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ncm91cE1hcC5oYXMoZSl9fSx7a2V5OlwiZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2RlbGV0ZUxvY2FsR3JvdXAoZSksdGhpcy5nZXRNb2R1bGUoSmMpLmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uKFwiR1JPVVBcIi5jb25jYXQoZSkpLHRoaXMuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhMSl9fSx7a2V5OlwiX2RlbGV0ZUxvY2FsR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdyb3VwTWFwLmRlbGV0ZShlKSx0aGlzLmdldE1vZHVsZShXYykuZGVsZXRlR3JvdXBNZW1iZXJMaXN0KGUpLHRoaXMuX3NldFN0b3JhZ2VHcm91cExpc3QoKX19LHtrZXk6XCJzZW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jcmVhdGVHcm91cE1lc3NhZ2VQYWNrKGUsdCk7cmV0dXJuIHRoaXMucmVxdWVzdChuKX19LHtrZXk6XCJjcmVhdGVHcm91cE1lc3NhZ2VQYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1udWxsO3QmJnQub2ZmbGluZVB1c2hJbmZvJiYobj10Lm9mZmxpbmVQdXNoSW5mbyk7dmFyIG89XCJcIjskaShlLmNsb3VkQ3VzdG9tRGF0YSkmJmUuY2xvdWRDdXN0b21EYXRhLmxlbmd0aD4wJiYobz1lLmNsb3VkQ3VzdG9tRGF0YSk7dmFyIHI9ZS5nZXRHcm91cEF0SW5mb0xpc3QoKTtyZXR1cm57cHJvdG9jb2xOYW1lOnZsLHRqZ0lEOnRoaXMuZ2VuZXJhdGVUamdJRChlKSxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLGdyb3VwSUQ6ZS50byxtc2dCb2R5OmUuZ2V0RWxlbWVudHMoKSxjbG91ZEN1c3RvbURhdGE6byxyYW5kb206ZS5yYW5kb20scHJpb3JpdHk6ZS5wcmlvcml0eSxjbGllbnRTZXF1ZW5jZTplLmNsaWVudFNlcXVlbmNlLGdyb3VwQXRJbmZvOmUudHlwZSE9PXJvLk1TR19URVhUfHxMdShyKT92b2lkIDA6cixvbmxpbmVPbmx5RmxhZzp0aGlzLmlzT25saW5lTWVzc2FnZShlLHQpPzE6MCxvZmZsaW5lUHVzaEluZm86bj97cHVzaEZsYWc6ITA9PT1uLmRpc2FibGVQdXNoPzE6MCx0aXRsZTpuLnRpdGxlfHxcIlwiLGRlc2M6bi5kZXNjcmlwdGlvbnx8XCJcIixleHQ6bi5leHRlbnNpb258fFwiXCIsYXBuc0luZm86e2JhZGdlTW9kZTohMD09PW4uaWdub3JlSU9TQmFkZ2U/MTowfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpuLmFuZHJvaWRPUFBPQ2hhbm5lbElEfHxcIlwifX06dm9pZCAwfX19fSx7a2V5OlwicmV2b2tlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTokbCxyZXF1ZXN0RGF0YTp7dG86ZS50byxtc2dTZXFMaXN0Olt7bXNnU2VxOmUuc2VxdWVuY2V9XX19KX19LHtrZXk6XCJkZWxldGVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50byxuPWUua2V5TGlzdDtyZXR1cm4gS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5kZWxldGVNZXNzYWdlIGdyb3VwSUQ6XCIpLmNvbmNhdCh0LFwiIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTplcCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDp0LGRlbGV0ZXI6dGhpcy5nZXRNeVVzZXJJRCgpLGtleUxpc3Q6bn19KX19LHtrZXk6XCJnZXRSb2FtaW5nTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0Um9hbWluZ01lc3NhZ2VcIiksbz1uZXcgamQoaWcpLHI9MDtyZXR1cm4gdGhpcy5fY29tcHV0ZUxhc3RTZXF1ZW5jZShlKS50aGVuKChmdW5jdGlvbihuKXtyZXR1cm4gcj1uLEtpLmxvZyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZ2V0Um9hbWluZ01lc3NhZ2UgZ3JvdXBJRDpcIikuY29uY2F0KGUuZ3JvdXBJRCxcIiBsYXN0U2VxdWVuY2U6XCIpLmNvbmNhdChyKSksdC5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6emwscmVxdWVzdERhdGE6e2dyb3VwSUQ6ZS5ncm91cElELGNvdW50OjIxLHNlcXVlbmNlOnJ9fSl9KSkudGhlbigoZnVuY3Rpb24oYSl7dmFyIHM9YS5kYXRhLGk9cy5tZXNzYWdlTGlzdCx1PXMuY29tcGxldGU7SmkoaSk/S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIGNvbXBsZXRlOlwiKS5jb25jYXQodSxcIiBidXQgbWVzc2FnZUxpc3QgaXMgdW5kZWZpbmVkIVwiKSk6S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2suIGNvbXBsZXRlOlwiKS5jb25jYXQodSxcIiBjb3VudDpcIikuY29uY2F0KGkubGVuZ3RoKSksby5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlLmdyb3VwSUQsXCIgbGFzdFNlcXVlbmNlOlwiKS5jb25jYXQocixcIiBjb21wbGV0ZTpcIikuY29uY2F0KHUsXCIgY291bnQ6XCIpLmNvbmNhdChpP2kubGVuZ3RoOlwidW5kZWZpbmVkXCIpKS5lbmQoKTt2YXIgYz1cIkdST1VQXCIuY29uY2F0KGUuZ3JvdXBJRCksbD10LmdldE1vZHVsZShKYyk7aWYoMj09PXV8fEx1KGkpKXJldHVybiBsLnNldENvbXBsZXRlZChjKSxbXTt2YXIgcD1sLnN0b3JlUm9hbWluZ01lc3NhZ2UoaSxjKTtyZXR1cm4gbC51cGRhdGVJc1JlYWQoYyksbC5wYXRjaENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlKGMpLHB9KSkuY2F0Y2goKGZ1bmN0aW9uKGEpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxzPW5bMF0saT1uWzFdO28uc2V0RXJyb3IoYSxzLGkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlLmdyb3VwSUQsXCIgbGFzdFNlcXVlbmNlOlwiKS5jb25jYXQocikpLmVuZCgpfSkpLEtpLndhcm4oXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxhKSxjbShhKX0pKX19LHtrZXk6XCJzZXRNZXNzYWdlUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvbnZlcnNhdGlvbklELG89ZS5sYXN0TWVzc2FnZVNlcSxyPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5zZXRNZXNzYWdlUmVhZFwiKTtLaS5sb2coXCJcIi5jb25jYXQocixcIiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KG4sXCIgbGFzdE1lc3NhZ2VTZXE6XCIpLmNvbmNhdChvKSksamkobyl8fEtpLndhcm4oXCJcIi5jb25jYXQocixcIiDor7fli7/kv67mlLkgQ29udmVyc2F0aW9uLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZe+8jOWQpuWImeWPr+iDveS8muWvvOiHtOW3suivu+S4iuaKpee7k+aenOS4jeWHhuehrlwiKSk7dmFyIGE9bmV3IGpkKHBnKTtyZXR1cm4gYS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KG4sXCItXCIpLmNvbmNhdChvKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6WWwscmVxdWVzdERhdGE6e2dyb3VwSUQ6bi5yZXBsYWNlKFwiR1JPVVBcIixcIlwiKSxtZXNzYWdlUmVhZFNlcTpvfX0pLnRoZW4oKGZ1bmN0aW9uKCl7YS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChyLFwiIG9rLlwiKSk7dmFyIGU9dC5nZXRNb2R1bGUoSmMpO3JldHVybiBlLnVwZGF0ZUlzUmVhZEFmdGVyUmVhZFJlcG9ydCh7Y29udmVyc2F0aW9uSUQ6bixsYXN0TWVzc2FnZVNlcTpvfSksZS51cGRhdGVVbnJlYWRDb3VudChuKSxaXygpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5sb2coXCJcIi5jb25jYXQocixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxjbShlKX0pKX19LHtrZXk6XCJfY29tcHV0ZUxhc3RTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnNlcXVlbmNlPjA/UHJvbWlzZS5yZXNvbHZlKGUuc2VxdWVuY2UpOnRoaXMuZ2V0R3JvdXBMYXN0U2VxdWVuY2UoZS5ncm91cElEKX19LHtrZXk6XCJnZXRHcm91cExhc3RTZXF1ZW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBMYXN0U2VxdWVuY2VcIiksbz1uZXcgamQoVWcpLHI9MCxhPVwiXCI7aWYodGhpcy5oYXNMb2NhbEdyb3VwKGUpKXt2YXIgcz10aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKGUpLGk9cy5sYXN0TWVzc2FnZTtpZihpLmxhc3RTZXF1ZW5jZT4wJiYhMT09PWkub25saW5lT25seUZsYWcpcmV0dXJuIHI9aS5sYXN0U2VxdWVuY2UsYT1cImdvdCBsYXN0U2VxdWVuY2U6XCIuY29uY2F0KHIsXCIgZnJvbSBsb2NhbCBncm91cCBwcm9maWxlW2xhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZV0uIGdyb3VwSUQ6XCIpLmNvbmNhdChlKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBcIikuY29uY2F0KGEpKSxvLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiLmNvbmNhdChhKSkuZW5kKCksUHJvbWlzZS5yZXNvbHZlKHIpO2lmKHMubmV4dE1lc3NhZ2VTZXE+MSlyZXR1cm4gcj1zLm5leHRNZXNzYWdlU2VxLTEsYT1cImdvdCBsYXN0U2VxdWVuY2U6XCIuY29uY2F0KHIsXCIgZnJvbSBsb2NhbCBncm91cCBwcm9maWxlW25leHRNZXNzYWdlU2VxXS4gZ3JvdXBJRDpcIikuY29uY2F0KGUpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIFwiKS5jb25jYXQoYSkpLG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KGEpKS5lbmQoKSxQcm9taXNlLnJlc29sdmUocil9dmFyIHU9XCJHUk9VUFwiLmNvbmNhdChlKSxjPXRoaXMuZ2V0TW9kdWxlKEpjKS5nZXRMb2NhbENvbnZlcnNhdGlvbih1KTtpZihjJiZjLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZSYmITE9PT1jLmxhc3RNZXNzYWdlLm9ubGluZU9ubHlGbGFnKXJldHVybiByPWMubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlLGE9XCJnb3QgbGFzdFNlcXVlbmNlOlwiLmNvbmNhdChyLFwiIGZyb20gbG9jYWwgY29udmVyc2F0aW9uIHByb2ZpbGVbbGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlXS4gZ3JvdXBJRDpcIikuY29uY2F0KGUpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIFwiKS5jb25jYXQoYSkpLG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KGEpKS5lbmQoKSxQcm9taXNlLnJlc29sdmUocik7dmFyIGw9e2dyb3VwSURMaXN0OltlXSxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjpbXCJOZXh0TXNnU2VxXCJdfX07cmV0dXJuIHRoaXMuZ2V0R3JvdXBQcm9maWxlQWR2YW5jZShsKS50aGVuKChmdW5jdGlvbihzKXt2YXIgaT1zLmRhdGEuc3VjY2Vzc0dyb3VwTGlzdDtyZXR1cm4gTHUoaSk/S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgc3VjY2Vzc0dyb3VwTGlzdCBpcyBlbXB0eS4gZ3JvdXBJRDpcIikuY29uY2F0KGUpKToocj1pWzBdLm5leHRNZXNzYWdlU2VxLTEsYT1cImdvdCBsYXN0U2VxdWVuY2U6XCIuY29uY2F0KHIsXCIgZnJvbSBnZXRHcm91cFByb2ZpbGVBZHZhbmNlLiBncm91cElEOlwiKS5jb25jYXQoZSksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgXCIpLmNvbmNhdChhKSkpLG8uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KGEpKS5lbmQoKSxyfSkpLmNhdGNoKChmdW5jdGlvbihyKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksYT1uWzBdLHM9blsxXTtvLnNldEVycm9yKHIsYSxzKS5zZXRNZXNzYWdlKFwiZ2V0IGxhc3RTZXF1ZW5jZSBmYWlsZWQgZnJvbSBnZXRHcm91cFByb2ZpbGVBZHZhbmNlLiBncm91cElEOlwiLmNvbmNhdChlKSkuZW5kKCl9KSksS2kud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLHIpLGNtKHIpfSkpfX0se2tleTpcImlzTWVzc2FnZUZyb21BVkNoYXRyb29tXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLl9BVkNoYXRSb29tSGFuZGxlciYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKX19LHtrZXk6XCJoYXNKb2luZWRBVkNoYXRSb29tXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXI/dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuaGFzSm9pbmVkQVZDaGF0Um9vbSgpOjB9fSx7a2V5OlwiZ2V0Sm9pbmVkQVZDaGF0Um9vbVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyP3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmdldEpvaW5lZEFWQ2hhdFJvb20oKTpbXX19LHtrZXk6XCJpc09ubGluZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEoIXRoaXMuX2NhbklVc2VPbmxpbmVPbmx5RmxhZyhlKXx8IXR8fCEwIT09dC5vbmxpbmVVc2VyT25seSl9fSx7a2V5OlwiX2NhbklVc2VPbmxpbmVPbmx5RmxhZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0Sm9pbmVkQVZDaGF0Um9vbSgpO3JldHVybiF0fHwhdC5pbmNsdWRlcyhlLnRvKXx8ZS5jb252ZXJzYXRpb25UeXBlIT09cm8uQ09OVl9HUk9VUH19LHtrZXk6XCJkZWxldGVMb2NhbEdyb3VwTWVtYmVyc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5nZXRNb2R1bGUoV2MpLmRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzKGUsdCl9fSx7a2V5Olwib25BVkNoYXRSb29tTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyJiZ0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5vbk1lc3NhZ2UoZSl9fSx7a2V5OlwiZ2V0R3JvdXBTaW1wbGlmaWVkSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1uZXcgamQoeGcpLG89e2dyb3VwSURMaXN0OltlXSxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjpbXCJUeXBlXCIsXCJOYW1lXCJdfX07cmV0dXJuIHRoaXMuZ2V0R3JvdXBQcm9maWxlQWR2YW5jZShvKS50aGVuKChmdW5jdGlvbihvKXt2YXIgcj1vLmRhdGEuc3VjY2Vzc0dyb3VwTGlzdDtyZXR1cm4gbi5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlLFwiIHR5cGU6XCIpLmNvbmNhdChyWzBdLnR5cGUpKS5lbmQoKSxyWzBdfSkpLmNhdGNoKChmdW5jdGlvbihvKXt0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciByPW0odCwyKSxhPXJbMF0scz1yWzFdO24uc2V0RXJyb3IobyxhLHMpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChlKSkuZW5kKCl9KSl9KSl9fSx7a2V5Olwic2V0VW5qb2luZWRBVkNoYXRSb29tXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5zZXQoZSwxKX19LHtrZXk6XCJkZWxldGVVbmpvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LmhhcyhlKSYmdGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5kZWxldGUoZSl9fSx7a2V5OlwiaXNVbmpvaW5lZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5oYXMoZSl9fSx7a2V5Olwib25Hcm91cEF0dHJpYnV0ZXNVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlciYmdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5vbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWQoZSl9fSx7a2V5OlwidXBkYXRlTG9jYWxNYWluU2VxdWVuY2VPblJlY29ubmVjdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyJiZ0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLnVwZGF0ZUxvY2FsTWFpblNlcXVlbmNlT25SZWNvbm5lY3RlZCgpfX0se2tleTpcImluaXRHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5pbml0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcInNldEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLnNldEdyb3VwQXR0cmlidXRlcyhlKX19LHtrZXk6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5kZWxldGVHcm91cEF0dHJpYnV0ZXMoZSl9fSx7a2V5OlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXIuZ2V0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmdyb3VwTWFwLmNsZWFyKCksdGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5jbGVhcigpLHRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5yZXNldCgpLHRoaXMuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlci5yZXNldCgpLHRoaXMuX2dyb3VwVGlwc0hhbmRsZXIucmVzZXQoKSx0aGlzLl9BVkNoYXRSb29tSGFuZGxlciYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIucmVzZXQoKX19XSkscn0ocGwpLGl2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy51c2VySUQ9XCJcIix0aGlzLmF2YXRhcj1cIlwiLHRoaXMubmljaz1cIlwiLHRoaXMucm9sZT1cIlwiLHRoaXMuam9pblRpbWU9XCJcIix0aGlzLmxhc3RTZW5kTXNnVGltZT1cIlwiLHRoaXMubmFtZUNhcmQ9XCJcIix0aGlzLm11dGVVbnRpbD0wLHRoaXMubWVtYmVyQ3VzdG9tRmllbGQ9W10sdGhpcy5faW5pdE1lbWJlcih0KX1yZXR1cm4gYShlLFt7a2V5OlwiX2luaXRNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnVwZGF0ZU1lbWJlcihlKX19LHtrZXk6XCJ1cGRhdGVNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1bbnVsbCx2b2lkIDAsXCJcIiwwLE5hTl07ZS5tZW1iZXJDdXN0b21GaWVsZCYmZnUodGhpcy5tZW1iZXJDdXN0b21GaWVsZCxlLm1lbWJlckN1c3RvbUZpZWxkKSxydSh0aGlzLGUsW1wibWVtYmVyQ3VzdG9tRmllbGRcIl0sdCl9fSx7a2V5OlwidXBkYXRlUm9sZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe1tcIk93bmVyXCIsXCJBZG1pblwiLFwiTWVtYmVyXCJdLmluZGV4T2YoZSk8MHx8KHRoaXMucm9sZT1lKX19LHtrZXk6XCJ1cGRhdGVNdXRlVW50aWxcIix2YWx1ZTpmdW5jdGlvbihlKXtKaShlKXx8KHRoaXMubXV0ZVVudGlsPU1hdGguZmxvb3IoKERhdGUubm93KCkrMWUzKmUpLzFlMykpfX0se2tleTpcInVwZGF0ZU5hbWVDYXJkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7SmkoZSl8fCh0aGlzLm5hbWVDYXJkPWUpfX0se2tleTpcInVwZGF0ZU1lbWJlckN1c3RvbUZpZWxkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSYmZnUodGhpcy5tZW1iZXJDdXN0b21GaWVsZCxlKX19XSksZX0oKSx1dj1mdW5jdGlvbihlKXtpKHIsZSk7dmFyIG49XyhyKTtmdW5jdGlvbiByKGUpe3ZhciB0O3JldHVybiBvKHRoaXMsciksKHQ9bi5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJHcm91cE1lbWJlck1vZHVsZVwiLHQuZ3JvdXBNZW1iZXJMaXN0TWFwPW5ldyBNYXAsdC5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKE9tLlBST0ZJTEVfVVBEQVRFRCx0Ll9vblByb2ZpbGVVcGRhdGVkLGgodCkpLHR9cmV0dXJuIGEocixbe2tleTpcIl9vblByb2ZpbGVVcGRhdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMsbj1lLmRhdGEsbz1mdW5jdGlvbihlKXt2YXIgbz1uW2VdO3QuZ3JvdXBNZW1iZXJMaXN0TWFwLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuaGFzKG8udXNlcklEKSYmZS5nZXQoby51c2VySUQpLnVwZGF0ZU1lbWJlcih7bmljazpvLm5pY2ssYXZhdGFyOm8uYXZhdGFyfSl9KSl9LHI9MDtyPG4ubGVuZ3RoO3IrKylvKHIpfX0se2tleTpcImRlbGV0ZUdyb3VwTWVtYmVyTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmRlbGV0ZShlKX19LHtrZXk6XCJnZXRHcm91cE1lbWJlckxpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS5vZmZzZXQscj12b2lkIDA9PT1vPzA6byxhPWUuY291bnQscz12b2lkIDA9PT1hPzE1OmEsaT1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0R3JvdXBNZW1iZXJMaXN0XCIpLHU9bmV3IGpkKCRnKTtLaS5sb2coXCJcIi5jb25jYXQoaSxcIiBncm91cElEOlwiKS5jb25jYXQobixcIiBvZmZzZXQ6XCIpLmNvbmNhdChyLFwiIGNvdW50OlwiKS5jb25jYXQocykpO3ZhciBjPVtdO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpzcCxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpuLG9mZnNldDpyLGxpbWl0OnM+MTAwPzEwMDpzfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPWUuZGF0YSxyPW8ubWVtYmVycyxhPW8ubWVtYmVyTnVtO2lmKCFXaShyKXx8MD09PXIubGVuZ3RoKXJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO3ZhciBzPXQuZ2V0TW9kdWxlKFljKTtyZXR1cm4gcy5oYXNMb2NhbEdyb3VwKG4pJiYocy5nZXRMb2NhbEdyb3VwUHJvZmlsZShuKS5tZW1iZXJOdW09YSksYz10Ll91cGRhdGVMb2NhbEdyb3VwTWVtYmVyTWFwKG4sciksdC5nZXRNb2R1bGUoamMpLmdldFVzZXJQcm9maWxlKHt1c2VySURMaXN0OnIubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS51c2VySUR9KSksdGFnTGlzdDpbQV8uTklDSyxBXy5BVkFUQVJdfSl9KSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89ZS5kYXRhO2lmKCFXaShvKXx8MD09PW8ubGVuZ3RoKXJldHVybiB1bSh7bWVtYmVyTGlzdDpbXX0pO3ZhciBhPW8ubWFwKChmdW5jdGlvbihlKXtyZXR1cm57dXNlcklEOmUudXNlcklELG5pY2s6ZS5uaWNrLGF2YXRhcjplLmF2YXRhcn19KSk7cmV0dXJuIHQuX3VwZGF0ZUxvY2FsR3JvdXBNZW1iZXJNYXAobixhKSx1LnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG4sXCIgb2Zmc2V0OlwiKS5jb25jYXQocixcIiBjb3VudDpcIikuY29uY2F0KHMpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQoaSxcIiBvay5cIikpLFpfKHttZW1iZXJMaXN0OmN9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07dS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQoaSxcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxjbShlKX0pKX19LHtrZXk6XCJnZXRHcm91cE1lbWJlclByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLG89XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmdldEdyb3VwTWVtYmVyUHJvZmlsZVwiKSxyPW5ldyBqZChZZyk7ci5zZXRNZXNzYWdlKGUudXNlcklETGlzdC5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiLmNvbmNhdChlLnVzZXJJRExpc3QubGVuZ3RoKTpcInVzZXJJRExpc3Q6XCIuY29uY2F0KGUudXNlcklETGlzdCkpLEtpLmxvZyhcIlwiLmNvbmNhdChvLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChlLmdyb3VwSUQsXCIgdXNlcklETGlzdDpcIikuY29uY2F0KGUudXNlcklETGlzdC5qb2luKFwiLFwiKSkpLGUudXNlcklETGlzdC5sZW5ndGg+NTAmJihlLnVzZXJJRExpc3Q9ZS51c2VySURMaXN0LnNsaWNlKDAsNTApKTt2YXIgYT1lLmdyb3VwSUQscz1lLnVzZXJJRExpc3Q7cmV0dXJuIHRoaXMuX2dldEdyb3VwTWVtYmVyUHJvZmlsZUFkdmFuY2UodCh0KHt9LGUpLHt9LHt1c2VySURMaXN0OnN9KSkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhLm1lbWJlcnM7cmV0dXJuIFdpKHQpJiYwIT09dC5sZW5ndGg/KG4uX3VwZGF0ZUxvY2FsR3JvdXBNZW1iZXJNYXAoYSx0KSxuLmdldE1vZHVsZShqYykuZ2V0VXNlclByb2ZpbGUoe3VzZXJJRExpc3Q6dC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKSx0YWdMaXN0OltBXy5OSUNLLEFfLkFWQVRBUl19KSk6dW0oW10pfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt1c2VySUQ6ZS51c2VySUQsbmljazplLm5pY2ssYXZhdGFyOmUuYXZhdGFyfX0pKTtuLl91cGRhdGVMb2NhbEdyb3VwTWVtYmVyTWFwKGEsdCk7dmFyIG89cy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBuLmhhc0xvY2FsR3JvdXBNZW1iZXIoYSxlKX0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBuLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKGEsZSl9KSk7cmV0dXJuIHIuc2V0TmV0d29ya1R5cGUobi5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxaXyh7bWVtYmVyTGlzdDpvfSl9KSl9fSx7a2V5OlwiYWRkR3JvdXBNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZEdyb3VwTWVtYmVyXCIpLG89ZS5ncm91cElELHI9dGhpcy5nZXRNb2R1bGUoWWMpLmdldExvY2FsR3JvdXBQcm9maWxlKG8pLGE9ci50eXBlLHM9bmV3IGpkKHpnKTtpZihzLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChvLFwiIGdyb3VwVHlwZTpcIikuY29uY2F0KGEpKSxtdShhKSl7dmFyIGk9bmV3IGFtKHtjb2RlOlRwLkNBTk5PVF9BRERfTUVNQkVSX0lOX0FWQ0hBVFJPT00sbWVzc2FnZTpwZH0pO3JldHVybiBzLnNldENvZGUoVHAuQ0FOTk9UX0FERF9NRU1CRVJfSU5fQVZDSEFUUk9PTSkuc2V0RXJyb3IocGQpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksY20oaSl9cmV0dXJuIGUudXNlcklETGlzdD1lLnVzZXJJRExpc3QubWFwKChmdW5jdGlvbihlKXtyZXR1cm57dXNlcklEOmV9fSkpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChvKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6dXAscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKG8pe3ZhciBhPW8uZGF0YS5tZW1iZXJzO0tpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKTt2YXIgaT1hLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLnJlc3VsdH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKSx1PWEuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gMD09PWUucmVzdWx0fSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudXNlcklEfSkpLGM9YS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiAyPT09ZS5yZXN1bHR9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS51c2VySUR9KSksbD1hLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIDQ9PT1lLnJlc3VsdH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVzZXJJRH0pKSxwPVwiZ3JvdXBJRDpcIi5jb25jYXQoZS5ncm91cElELFwiLCBcIikrXCJzdWNjZXNzVXNlcklETGlzdDpcIi5jb25jYXQoaSxcIiwgXCIpK1wiZmFpbHVyZVVzZXJJRExpc3Q6XCIuY29uY2F0KHUsXCIsIFwiKStcImV4aXN0ZWRVc2VySURMaXN0OlwiLmNvbmNhdChjLFwiLCBcIikrXCJvdmVyTGltaXRVc2VySURMaXN0OlwiLmNvbmNhdChsKTtyZXR1cm4gcy5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLnNldE1vcmVNZXNzYWdlKHApLmVuZCgpLDA9PT1pLmxlbmd0aD9aXyh7c3VjY2Vzc1VzZXJJRExpc3Q6aSxmYWlsdXJlVXNlcklETGlzdDp1LGV4aXN0ZWRVc2VySURMaXN0OmMsb3ZlckxpbWl0VXNlcklETGlzdDpsfSk6KHIubWVtYmVyTnVtKz1pLmxlbmd0aCxaXyh7c3VjY2Vzc1VzZXJJRExpc3Q6aSxmYWlsdXJlVXNlcklETGlzdDp1LGV4aXN0ZWRVc2VySURMaXN0OmMsb3ZlckxpbWl0VXNlcklETGlzdDpsLGdyb3VwOnJ9KSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO3Muc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksY20oZSl9KSl9fSx7a2V5OlwiZGVsZXRlR3JvdXBNZW1iZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRlbGV0ZUdyb3VwTWVtYmVyXCIpLG89ZS5ncm91cElELHI9ZS51c2VySURMaXN0LGE9bmV3IGpkKFdnKSxzPVwiZ3JvdXBJRDpcIi5jb25jYXQobyxcIiBcIikuY29uY2F0KHIubGVuZ3RoPjU/XCJ1c2VySURMaXN0Lmxlbmd0aDpcIi5jb25jYXQoci5sZW5ndGgpOlwidXNlcklETGlzdDpcIi5jb25jYXQocikpO2Euc2V0TWVzc2FnZShzKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBncm91cElEOlwiKS5jb25jYXQobyxcIiB1c2VySURMaXN0OlwiKSxyKTt2YXIgaT10aGlzLmdldE1vZHVsZShZYykuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7cmV0dXJuIG11KGkudHlwZSk/Y20obmV3IGFtKHtjb2RlOlRwLkNBTk5PVF9LSUNLX01FTUJFUl9JTl9BVkNIQVRST09NLG1lc3NhZ2U6Z2R9KSk6dGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Y3AscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBva1wiKSksaS5tZW1iZXJOdW0tLSx0LmRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzKG8sciksWl8oe2dyb3VwOmksdXNlcklETGlzdDpyfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2Euc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksY20oZSl9KSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJNdXRlVGltZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmdyb3VwSUQsbz1lLnVzZXJJRCxyPWUubXV0ZVRpbWUsYT1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0R3JvdXBNZW1iZXJNdXRlVGltZVwiKTtpZihvPT09dGhpcy5nZXRNeVVzZXJJRCgpKXJldHVybiBjbShuZXcgYW0oe2NvZGU6VHAuQ0FOTk9UX01VVEVfU0VMRixtZXNzYWdlOnZkfSkpO0tpLmxvZyhcIlwiLmNvbmNhdChhLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChuLFwiIHVzZXJJRDpcIikuY29uY2F0KG8pKTt2YXIgcz1uZXcgamQoSmcpO3JldHVybiBzLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChuLFwiIHVzZXJJRDpcIikuY29uY2F0KG8sXCIgbXV0ZVRpbWU6XCIpLmNvbmNhdChyKSksdGhpcy5fbW9kaWZ5R3JvdXBNZW1iZXJJbmZvKHtncm91cElEOm4sdXNlcklEOm8sbXV0ZVRpbWU6cn0pLnRoZW4oKGZ1bmN0aW9uKGUpe3Muc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQoYSxcIiBva1wiKSk7dmFyIG89dC5nZXRNb2R1bGUoWWMpO3JldHVybiBaXyh7Z3JvdXA6by5nZXRMb2NhbEdyb3VwUHJvZmlsZShuKSxtZW1iZXI6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtzLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChhLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpfX0se2tleTpcInNldEdyb3VwTWVtYmVyUm9sZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0R3JvdXBNZW1iZXJSb2xlXCIpLG89ZS5ncm91cElELHI9ZS51c2VySUQsYT1lLnJvbGUscz10aGlzLmdldE1vZHVsZShZYykuZ2V0TG9jYWxHcm91cFByb2ZpbGUobyk7aWYocy5zZWxmSW5mby5yb2xlIT09cm8uR1JQX01CUl9ST0xFX09XTkVSKXJldHVybiBjbShuZXcgYW0oe2NvZGU6VHAuTk9UX09XTkVSLG1lc3NhZ2U6aGR9KSk7aWYoW3JvLkdSUF9XT1JLLHJvLkdSUF9BVkNIQVRST09NXS5pbmNsdWRlcyhzLnR5cGUpKXJldHVybiBjbShuZXcgYW0oe2NvZGU6VHAuQ0FOTk9UX1NFVF9NRU1CRVJfUk9MRV9JTl9XT1JLX0FORF9BVkNIQVRST09NLG1lc3NhZ2U6ZmR9KSk7aWYoW3JvLkdSUF9NQlJfUk9MRV9BRE1JTixyby5HUlBfTUJSX1JPTEVfTUVNQkVSXS5pbmRleE9mKGEpPDApcmV0dXJuIGNtKG5ldyBhbSh7Y29kZTpUcC5JTlZBTElEX01FTUJFUl9ST0xFLG1lc3NhZ2U6X2R9KSk7aWYocj09PXRoaXMuZ2V0TXlVc2VySUQoKSlyZXR1cm4gY20obmV3IGFtKHtjb2RlOlRwLkNBTk5PVF9TRVRfU0VMRl9NRU1CRVJfUk9MRSxtZXNzYWdlOm1kfSkpO3ZhciBpPW5ldyBqZChRZyk7cmV0dXJuIGkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KG8sXCIgdXNlcklEOlwiKS5jb25jYXQocixcIiByb2xlOlwiKS5jb25jYXQoYSkpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChvLFwiIHVzZXJJRDpcIikuY29uY2F0KHIpKSx0aGlzLl9tb2RpZnlHcm91cE1lbWJlckluZm8oe2dyb3VwSUQ6byx1c2VySUQ6cixyb2xlOmF9KS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gaS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSxaXyh7Z3JvdXA6cyxtZW1iZXI6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtpLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpfX0se2tleTpcInNldEdyb3VwTWVtYmVyTmFtZUNhcmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldEdyb3VwTWVtYmVyTmFtZUNhcmRcIiksbz1lLmdyb3VwSUQscj1lLnVzZXJJRCxhPXZvaWQgMD09PXI/dGhpcy5nZXRNeVVzZXJJRCgpOnIscz1lLm5hbWVDYXJkO0tpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChvLFwiIHVzZXJJRDpcIikuY29uY2F0KGEpKTt2YXIgaT1uZXcgamQoWGcpO3JldHVybiBpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChvLFwiIHVzZXJJRDpcIikuY29uY2F0KGEsXCIgbmFtZUNhcmQ6XCIpLmNvbmNhdChzKSksdGhpcy5fbW9kaWZ5R3JvdXBNZW1iZXJJbmZvKHtncm91cElEOm8sdXNlcklEOmEsbmFtZUNhcmQ6c30pLnRoZW4oKGZ1bmN0aW9uKGUpe0tpLmxvZyhcIlwiLmNvbmNhdChuLFwiIG9rXCIpKSxpLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCk7dmFyIHI9dC5nZXRNb2R1bGUoWWMpLmdldExvY2FsR3JvdXBQcm9maWxlKG8pO3JldHVybiBhPT09dC5nZXRNeVVzZXJJRCgpJiZyJiZyLnNldFNlbGZOYW1lQ2FyZChzKSxaXyh7Z3JvdXA6cixtZW1iZXI6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTtpLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpfX0se2tleTpcInNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGRcIiksbz1lLmdyb3VwSUQscj1lLnVzZXJJRCxhPXZvaWQgMD09PXI/dGhpcy5nZXRNeVVzZXJJRCgpOnIscz1lLm1lbWJlckN1c3RvbUZpZWxkO0tpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChvLFwiIHVzZXJJRDpcIikuY29uY2F0KGEpKTt2YXIgaT1uZXcgamQoWmcpO3JldHVybiBpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiLmNvbmNhdChvLFwiIHVzZXJJRDpcIikuY29uY2F0KGEsXCIgbWVtYmVyQ3VzdG9tRmllbGQ6XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShzKSkpLHRoaXMuX21vZGlmeUdyb3VwTWVtYmVySW5mbyh7Z3JvdXBJRDpvLHVzZXJJRDphLG1lbWJlckN1c3RvbUZpZWxkOnN9KS50aGVuKChmdW5jdGlvbihlKXtpLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpO3ZhciByPXQuZ2V0TW9kdWxlKFljKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtyZXR1cm4gWl8oe2dyb3VwOnIsbWVtYmVyOmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07aS5zZXRFcnJvcihlLG8scikuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxjbShlKX0pKX19LHtrZXk6XCJzZXRNZXNzYWdlUmVtaW5kVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2V0TWVzc2FnZVJlbWluZFR5cGVcIiksbz1uZXcgamQoTGcpO28uc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIuY29uY2F0KGUuZ3JvdXBJRCkpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGdyb3VwSUQ6XCIpLmNvbmNhdChlLmdyb3VwSUQpKTt2YXIgcj1lLmdyb3VwSUQsYT1lLm1lc3NhZ2VSZW1pbmRUeXBlO3JldHVybiB0aGlzLl9tb2RpZnlHcm91cE1lbWJlckluZm8oe2dyb3VwSUQ6cixtZXNzYWdlUmVtaW5kVHlwZTphLHVzZXJJRDp0aGlzLmdldE15VXNlcklEKCl9KS50aGVuKChmdW5jdGlvbigpe28uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gZ3JvdXBJRDpcIikuY29uY2F0KGUuZ3JvdXBJRCkpO3ZhciByPXQuZ2V0TW9kdWxlKFljKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShlLmdyb3VwSUQpO3JldHVybiByJiYoci5zZWxmSW5mby5tZXNzYWdlUmVtaW5kVHlwZT1hKSxaXyh7Z3JvdXA6cn0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpfX0se2tleTpcIl9tb2RpZnlHcm91cE1lbWJlckluZm9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ncm91cElELG89ZS51c2VySUQ7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmxwLHJlcXVlc3REYXRhOmV9KS50aGVuKChmdW5jdGlvbigpe2lmKHQuaGFzTG9jYWxHcm91cE1lbWJlcihuLG8pKXt2YXIgcj10LmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKG4sbyk7cmV0dXJuIEppKGUubXV0ZVRpbWUpfHxyLnVwZGF0ZU11dGVVbnRpbChlLm11dGVUaW1lKSxKaShlLnJvbGUpfHxyLnVwZGF0ZVJvbGUoZS5yb2xlKSxKaShlLm5hbWVDYXJkKXx8ci51cGRhdGVOYW1lQ2FyZChlLm5hbWVDYXJkKSxKaShlLm1lbWJlckN1c3RvbUZpZWxkKXx8ci51cGRhdGVNZW1iZXJDdXN0b21GaWVsZChlLm1lbWJlckN1c3RvbUZpZWxkKSxyfXJldHVybiB0LmdldEdyb3VwTWVtYmVyUHJvZmlsZSh7Z3JvdXBJRDpuLHVzZXJJRExpc3Q6W29dfSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIG0oZS5kYXRhLm1lbWJlckxpc3QsMSlbMF19KSl9KSl9fSx7a2V5OlwiX2dldEdyb3VwTWVtYmVyUHJvZmlsZUFkdmFuY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6aXAscmVxdWVzdERhdGE6dCh0KHt9LGUpLHt9LHttZW1iZXJJbmZvRmlsdGVyOmUubWVtYmVySW5mb0ZpbHRlcj9lLm1lbWJlckluZm9GaWx0ZXI6W1wiUm9sZVwiLFwiSm9pblRpbWVcIixcIk5hbWVDYXJkXCIsXCJTaHV0VXBVbnRpbFwiXX0pfSl9fSx7a2V5OlwiX3VwZGF0ZUxvY2FsR3JvdXBNZW1iZXJNYXBcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7cmV0dXJuIFdpKHQpJiYwIT09dC5sZW5ndGg/dC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBuLmhhc0xvY2FsR3JvdXBNZW1iZXIoZSx0LnVzZXJJRCk/bi5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhlLHQudXNlcklEKS51cGRhdGVNZW1iZXIodCk6bi5zZXRMb2NhbEdyb3VwTWVtYmVyKGUsbmV3IGl2KHQpKSxuLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKGUsdC51c2VySUQpfSkpOltdfX0se2tleTpcImRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSk7biYmdC5mb3JFYWNoKChmdW5jdGlvbihlKXtuLmRlbGV0ZShlKX0pKX19LHtrZXk6XCJnZXRMb2NhbEdyb3VwTWVtYmVySW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmhhcyhlKT90aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSkuZ2V0KHQpOm51bGx9fSx7a2V5Olwic2V0TG9jYWxHcm91cE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYodGhpcy5ncm91cE1lbWJlckxpc3RNYXAuaGFzKGUpKXRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmdldChlKS5zZXQodC51c2VySUQsdCk7ZWxzZXt2YXIgbj0obmV3IE1hcCkuc2V0KHQudXNlcklELHQpO3RoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLnNldChlLG4pfX19LHtrZXk6XCJnZXRMb2NhbEdyb3VwTWVtYmVyTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSl9fSx7a2V5OlwiaGFzTG9jYWxHcm91cE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmhhcyhlKSYmdGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZ2V0KGUpLmhhcyh0KX19LHtrZXk6XCJoYXNMb2NhbEdyb3VwTWVtYmVyTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmhhcyhlKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5ncm91cE1lbWJlckxpc3RNYXAuY2xlYXIoKX19XSkscn0ocGwpLGN2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fdXNlck1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIlByb2ZpbGVIYW5kbGVyXCIsdGhpcy5UQUc9XCJwcm9maWxlXCIsdGhpcy5hY2NvdW50UHJvZmlsZU1hcD1uZXcgTWFwLHRoaXMuZXhwaXJhdGlvblRpbWU9ODY0ZTV9cmV0dXJuIGEoZSxbe2tleTpcInNldEV4cGlyYXRpb25UaW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5leHBpcmF0aW9uVGltZT1lfX0se2tleTpcImdldFVzZXJQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUudXNlcklETGlzdDtlLmZyb21BY2NvdW50PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCksbi5sZW5ndGg+MTAwJiYoS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0VXNlclByb2ZpbGUg6I635Y+W55So5oi36LWE5paZ5Lq65pWw5LiN6IO96LaF6L+HMTAw5Lq6XCIpKSxuLmxlbmd0aD0xMDApO2Zvcih2YXIgbyxyPVtdLGE9W10scz0wLGk9bi5sZW5ndGg7czxpO3MrKylvPW5bc10sdGhpcy5fdXNlck1vZHVsZS5pc015RnJpZW5kKG8pJiZ0aGlzLl9jb250YWluc0FjY291bnQobyk/YS5wdXNoKHRoaXMuX2dldFByb2ZpbGVGcm9tTWFwKG8pKTpyLnB1c2gobyk7aWYoMD09PXIubGVuZ3RoKXJldHVybiB1bShhKTtlLnRvQWNjb3VudD1yO3ZhciB1PWUuYkZyb21HZXRNeVByb2ZpbGV8fCExLGM9W107ZS50b0FjY291bnQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Yy5wdXNoKHt0b0FjY291bnQ6ZSxzdGFuZGFyZFNlcXVlbmNlOjAsY3VzdG9tU2VxdWVuY2U6MH0pfSkpLGUudXNlckl0ZW09Yzt2YXIgbD1uZXcgamQocmgpO3JldHVybiBsLnNldE1lc3NhZ2Uobi5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiLmNvbmNhdChuLmxlbmd0aCk6XCJ1c2VySURMaXN0OlwiLmNvbmNhdChuKSksdGhpcy5fdXNlck1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6TWwscmVxdWVzdERhdGE6ZX0pLnRoZW4oKGZ1bmN0aW9uKGUpe2wuc2V0TmV0d29ya1R5cGUodC5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5pbmZvKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5nZXRVc2VyUHJvZmlsZSBva1wiKSk7dmFyIG49dC5faGFuZGxlUmVzcG9uc2UoZSkuY29uY2F0KGEpO3JldHVybiBaXyh1P25bMF06bil9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll91c2VyTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuPW0odCwyKSxvPW5bMF0scj1uWzFdO2wuc2V0RXJyb3IoZSxvLHIpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5nZXRVc2VyUHJvZmlsZSBmYWlsZWQuIGVycm9yOlwiKSxlKSxjbShlKX0pKX19LHtrZXk6XCJnZXRNeVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCk7aWYoS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5nZXRNeVByb2ZpbGUgbXlBY2NvdW50OlwiKS5jb25jYXQoZSkpLHRoaXMuX2ZpbGxNYXAoKSx0aGlzLl9jb250YWluc0FjY291bnQoZSkpe3ZhciB0PXRoaXMuX2dldFByb2ZpbGVGcm9tTWFwKGUpO3JldHVybiBLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0TXlQcm9maWxlIGZyb20gY2FjaGUsIG15UHJvZmlsZTpcIikrSlNPTi5zdHJpbmdpZnkodCkpLHVtKHQpfXJldHVybiB0aGlzLmdldFVzZXJQcm9maWxlKHtmcm9tQWNjb3VudDplLHVzZXJJRExpc3Q6W2VdLGJGcm9tR2V0TXlQcm9maWxlOiEwfSl9fSx7a2V5OlwiX2hhbmRsZVJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4sbz1vdS5ub3coKSxyPWUuZGF0YS51c2VyUHJvZmlsZUl0ZW0sYT1bXSxzPTAsaT1yLmxlbmd0aDtzPGk7cysrKVwiQFRMUyNOT1RfRk9VTkRcIiE9PXJbc10udG8mJlwiXCIhPT1yW3NdLnRvJiYodD1yW3NdLnRvLG49dGhpcy5fdXBkYXRlTWFwKHQsdGhpcy5fZ2V0TGF0ZXN0UHJvZmlsZUZyb21SZXNwb25zZSh0LHJbc10ucHJvZmlsZUl0ZW0pKSxhLnB1c2gobikpO3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9oYW5kbGVSZXNwb25zZSBjb3N0IFwiKS5jb25jYXQob3Uubm93KCktbyxcIiBtc1wiKSksYX19LHtrZXk6XCJfZ2V0TGF0ZXN0UHJvZmlsZUZyb21SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49e307aWYobi51c2VySUQ9ZSxuLnByb2ZpbGVDdXN0b21GaWVsZD1bXSwhTHUodCkpZm9yKHZhciBvPTAscj10Lmxlbmd0aDtvPHI7bysrKWlmKHRbb10udGFnLmluZGV4T2YoXCJUYWdfUHJvZmlsZV9DdXN0b21cIik+LTEpbi5wcm9maWxlQ3VzdG9tRmllbGQucHVzaCh7a2V5OnRbb10udGFnLHZhbHVlOnRbb10udmFsdWV9KTtlbHNlIHN3aXRjaCh0W29dLnRhZyl7Y2FzZSBBXy5OSUNLOm4ubmljaz10W29dLnZhbHVlO2JyZWFrO2Nhc2UgQV8uR0VOREVSOm4uZ2VuZGVyPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBBXy5CSVJUSERBWTpuLmJpcnRoZGF5PXRbb10udmFsdWU7YnJlYWs7Y2FzZSBBXy5MT0NBVElPTjpuLmxvY2F0aW9uPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBBXy5TRUxGU0lHTkFUVVJFOm4uc2VsZlNpZ25hdHVyZT10W29dLnZhbHVlO2JyZWFrO2Nhc2UgQV8uQUxMT1dUWVBFOm4uYWxsb3dUeXBlPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBBXy5MQU5HVUFHRTpuLmxhbmd1YWdlPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBBXy5BVkFUQVI6bi5hdmF0YXI9dFtvXS52YWx1ZTticmVhaztjYXNlIEFfLk1FU1NBR0VTRVRUSU5HUzpuLm1lc3NhZ2VTZXR0aW5ncz10W29dLnZhbHVlO2JyZWFrO2Nhc2UgQV8uQURNSU5GT1JCSURUWVBFOm4uYWRtaW5Gb3JiaWRUeXBlPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBBXy5MRVZFTDpuLmxldmVsPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBBXy5ST0xFOm4ucm9sZT10W29dLnZhbHVlO2JyZWFrO2RlZmF1bHQ6S2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2hhbmRsZVJlc3BvbnNlIHVua25vd24gdGFnOlwiKSx0W29dLnRhZyx0W29dLnZhbHVlKX1yZXR1cm4gbn19LHtrZXk6XCJ1cGRhdGVNeVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnVwZGF0ZU15UHJvZmlsZVwiKSxvPW5ldyBqZChhaCk7by5zZXRNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGUpKTt2YXIgcj0obmV3IEZtKS52YWxpZGF0ZShlKTtpZighci52YWxpZClyZXR1cm4gby5zZXRDb2RlKFRwLlVQREFURV9QUk9GSUxFX0lOVkFMSURfUEFSQU0pLnNldE1vcmVNZXNzYWdlKFwiXCIuY29uY2F0KG4sXCIgaW5mbzpcIikuY29uY2F0KHIudGlwcykpLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBpbmZvOlwiKS5jb25jYXQoci50aXBzLFwi77yM6K+35Y+C6ICDIGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi9TREsuaHRtbCN1cGRhdGVNeVByb2ZpbGVcIikpLGNtKHtjb2RlOlRwLlVQREFURV9QUk9GSUxFX0lOVkFMSURfUEFSQU0sbWVzc2FnZTpNZH0pO3ZhciBhPVtdO2Zvcih2YXIgcyBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHMpJiYoXCJwcm9maWxlQ3VzdG9tRmllbGRcIj09PXM/ZS5wcm9maWxlQ3VzdG9tRmllbGQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7YS5wdXNoKHt0YWc6ZS5rZXksdmFsdWU6ZS52YWx1ZX0pfSkpOmEucHVzaCh7dGFnOkFfW3MudG9VcHBlckNhc2UoKV0sdmFsdWU6ZVtzXX0pKTtyZXR1cm4gMD09PWEubGVuZ3RoPyhvLnNldENvZGUoVHAuVVBEQVRFX1BST0ZJTEVfTk9fS0VZKS5zZXRNb3JlTWVzc2FnZSh5ZCkuc2V0TmV0d29ya1R5cGUodGhpcy5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGluZm86XCIpLmNvbmNhdCh5ZCxcIu+8jOivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjdXBkYXRlTXlQcm9maWxlXCIpKSxjbSh7Y29kZTpUcC5VUERBVEVfUFJPRklMRV9OT19LRVksbWVzc2FnZTp5ZH0pKTp0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp5bCxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKSxwcm9maWxlSXRlbTphfX0pLnRoZW4oKGZ1bmN0aW9uKHIpe28uc2V0TmV0d29ya1R5cGUodC5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5pbmZvKFwiXCIuY29uY2F0KG4sXCIgb2tcIikpO3ZhciBhPXQuX3VwZGF0ZU1hcCh0Ll91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpLGUpO3JldHVybiB0Ll91c2VyTW9kdWxlLmVtaXRPdXRlckV2ZW50KG9vLlBST0ZJTEVfVVBEQVRFRCxbYV0pLHVtKGEpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fdXNlck1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpfX0se2tleTpcIm9uUHJvZmlsZU1vZGlmaWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhTGlzdDtpZighTHUodCkpe3ZhciBuLG8scj10Lmxlbmd0aDtLaS5pbmZvKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblByb2ZpbGVNb2RpZmllZCBjb3VudDpcIikuY29uY2F0KHIpKTtmb3IodmFyIGE9W10scz10aGlzLl91c2VyTW9kdWxlLmdldE1vZHVsZShKYyksaT0wO2k8cjtpKyspbj10W2ldLnVzZXJJRCxvPXRoaXMuX3VwZGF0ZU1hcChuLHRoaXMuX2dldExhdGVzdFByb2ZpbGVGcm9tUmVzcG9uc2Uobix0W2ldLnByb2ZpbGVMaXN0KSksYS5wdXNoKG8pLG49PT10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpJiZzLm9uTXlQcm9maWxlTW9kaWZpZWQoe2xhdGVzdE5pY2s6by5uaWNrLGxhdGVzdEF2YXRhcjpvLmF2YXRhcn0pO3RoaXMuX3VzZXJNb2R1bGUuZW1pdElubmVyRXZlbnQoT20uUFJPRklMRV9VUERBVEVELGEpLHRoaXMuX3VzZXJNb2R1bGUuZW1pdE91dGVyRXZlbnQob28uUFJPRklMRV9VUERBVEVELGEpfX19LHtrZXk6XCJfZmlsbE1hcFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuYWNjb3VudFByb2ZpbGVNYXAuc2l6ZSl7Zm9yKHZhciBlPXRoaXMuX2dldENhY2hlZFByb2ZpbGVzKCksdD1EYXRlLm5vdygpLG49MCxvPWUubGVuZ3RoO248bztuKyspdC1lW25dLmxhc3RVcGRhdGVkVGltZTx0aGlzLmV4cGlyYXRpb25UaW1lJiZ0aGlzLmFjY291bnRQcm9maWxlTWFwLnNldChlW25dLnVzZXJJRCxlW25dKTtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9maWxsTWFwIGZyb20gY2FjaGUsIG1hcC5zaXplOlwiKS5jb25jYXQodGhpcy5hY2NvdW50UHJvZmlsZU1hcC5zaXplKSl9fX0se2tleTpcIl91cGRhdGVNYXBcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuLG89RGF0ZS5ub3coKTtyZXR1cm4gdGhpcy5fY29udGFpbnNBY2NvdW50KGUpPyhuPXRoaXMuX2dldFByb2ZpbGVGcm9tTWFwKGUpLHQucHJvZmlsZUN1c3RvbUZpZWxkJiZmdShuLnByb2ZpbGVDdXN0b21GaWVsZCx0LnByb2ZpbGVDdXN0b21GaWVsZCkscnUobix0LFtcInByb2ZpbGVDdXN0b21GaWVsZFwiXSksbi5sYXN0VXBkYXRlZFRpbWU9byk6KG49bmV3IEZtKHQpLCh0aGlzLl91c2VyTW9kdWxlLmlzTXlGcmllbmQoZSl8fGU9PT10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpKSYmKG4ubGFzdFVwZGF0ZWRUaW1lPW8sdGhpcy5hY2NvdW50UHJvZmlsZU1hcC5zZXQoZSxuKSkpLHRoaXMuX2ZsdXNoTWFwKGU9PT10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpKSxufX0se2tleTpcIl9mbHVzaE1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXYodGhpcy5hY2NvdW50UHJvZmlsZU1hcC52YWx1ZXMoKSksbj10aGlzLl91c2VyTW9kdWxlLmdldFN0b3JhZ2VNb2R1bGUoKTtLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2ZsdXNoTWFwIGxlbmd0aDpcIikuY29uY2F0KHQubGVuZ3RoLFwiIGZsdXNoQXRPbmNlOlwiKS5jb25jYXQoZSkpLG4uc2V0SXRlbSh0aGlzLlRBRyx0LGUpfX0se2tleTpcIl9jb250YWluc0FjY291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hY2NvdW50UHJvZmlsZU1hcC5oYXMoZSl9fSx7a2V5OlwiX2dldFByb2ZpbGVGcm9tTWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWNjb3VudFByb2ZpbGVNYXAuZ2V0KGUpfX0se2tleTpcIl9nZXRDYWNoZWRQcm9maWxlc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdXNlck1vZHVsZS5nZXRTdG9yYWdlTW9kdWxlKCkuZ2V0SXRlbSh0aGlzLlRBRyk7cmV0dXJuIEx1KGUpP1tdOmV9fSx7a2V5Olwib25Db252ZXJzYXRpb25zUHJvZmlsZVVwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixvLHI9W10sYT0wLHM9ZS5sZW5ndGg7YTxzO2ErKyluPSh0PWVbYV0pLnVzZXJJRCx0aGlzLl91c2VyTW9kdWxlLmlzTXlGcmllbmQobil8fCh0aGlzLl9jb250YWluc0FjY291bnQobik/KG89dGhpcy5fZ2V0UHJvZmlsZUZyb21NYXAobikscnUobyx0KT4wJiZyLnB1c2gobikpOnIucHVzaCh0LnVzZXJJRCkpOzAhPT1yLmxlbmd0aCYmKEtpLmluZm8oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uQ29udmVyc2F0aW9uc1Byb2ZpbGVVcGRhdGVkIHRvQWNjb3VudExpc3Q6XCIpLmNvbmNhdChyKSksdGhpcy5nZXRVc2VyUHJvZmlsZSh7dXNlcklETGlzdDpyfSkpfX0se2tleTpcImdldE5pY2tBbmRBdmF0YXJCeVVzZXJJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX2NvbnRhaW5zQWNjb3VudChlKSl7dmFyIHQ9dGhpcy5fZ2V0UHJvZmlsZUZyb21NYXAoZSk7cmV0dXJue25pY2s6dC5uaWNrLGF2YXRhcjp0LmF2YXRhcn19cmV0dXJue25pY2s6XCJcIixhdmF0YXI6XCJcIn19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2ZsdXNoTWFwKCEwKSx0aGlzLmFjY291bnRQcm9maWxlTWFwLmNsZWFyKCl9fV0pLGV9KCksbHY9ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksTHV8fCh0aGlzLnVzZXJJRD10LnVzZXJJRHx8XCJcIix0aGlzLnRpbWVTdGFtcD10LnRpbWVTdGFtcHx8MCl9LHB2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fdXNlck1vZHVsZT10LHRoaXMuX2NsYXNzTmFtZT1cIkJsYWNrbGlzdEhhbmRsZXJcIix0aGlzLl9ibGFja2xpc3RNYXA9bmV3IE1hcCx0aGlzLnN0YXJ0SW5kZXg9MCx0aGlzLm1heExpbWl0ZWQ9MTAwLHRoaXMuY3VycmVudFNlcXVlbmNlPTB9cmV0dXJuIGEoZSxbe2tleTpcImdldExvY2FsQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdih0aGlzLl9ibGFja2xpc3RNYXAua2V5cygpKX19LHtrZXk6XCJnZXRCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0QmxhY2tsaXN0XCIpLG49e2Zyb21BY2NvdW50OnRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCksbWF4TGltaXRlZDp0aGlzLm1heExpbWl0ZWQsc3RhcnRJbmRleDowLGxhc3RTZXF1ZW5jZTp0aGlzLmN1cnJlbnRTZXF1ZW5jZX0sbz1uZXcgamQoc2gpO3JldHVybiB0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpJbCxyZXF1ZXN0RGF0YTpufSkudGhlbigoZnVuY3Rpb24obil7dmFyIHI9bi5kYXRhLGE9ci5ibGFja0xpc3RJdGVtLHM9ci5jdXJyZW50U2VxdWVuY2UsaT1MdShhKT8wOmEubGVuZ3RoO28uc2V0TmV0d29ya1R5cGUoZS5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiYmxhY2tMaXN0IGNvdW50OlwiLmNvbmNhdChpKSkuZW5kKCksS2kuaW5mbyhcIlwiLmNvbmNhdCh0LFwiIG9rXCIpKSxlLmN1cnJlbnRTZXF1ZW5jZT1zLGUuX2hhbmRsZVJlc3BvbnNlKGEsITApLGUuX3VzZXJNb2R1bGUuZW1pdE91dGVyRXZlbnQob28uQkxBQ0tMSVNUX1VQREFURUQsdihlLl9ibGFja2xpc3RNYXAua2V5cygpKSl9KSkuY2F0Y2goKGZ1bmN0aW9uKG4pe3JldHVybiBlLl91c2VyTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PW0oZSwyKSxyPXRbMF0sYT10WzFdO28uc2V0RXJyb3IobixyLGEpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KHQsXCIgZmFpbGVkLiBlcnJvcjpcIiksbiksY20obil9KSl9fSx7a2V5OlwiYWRkQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRCbGFja2xpc3RcIiksbz1uZXcgamQoaWgpO2lmKCFXaShlLnVzZXJJRExpc3QpKXJldHVybiBvLnNldENvZGUoVHAuQUREX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNKS5zZXRNZXNzYWdlKElkKS5zZXROZXR3b3JrVHlwZSh0aGlzLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgb3B0aW9ucy51c2VySURMaXN0IOW/hemcgOaYr+aVsOe7hFwiKSksY20oe2NvZGU6VHAuQUREX0JMQUNLTElTVF9JTlZBTElEX1BBUkFNLG1lc3NhZ2U6SWR9KTt2YXIgcj10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpO3JldHVybiAxPT09ZS51c2VySURMaXN0Lmxlbmd0aCYmZS51c2VySURMaXN0WzBdPT09cj8oby5zZXRDb2RlKFRwLkNBTk5PVF9BRERfU0VMRl9UT19CTEFDS0xJU1QpLnNldE1lc3NhZ2UoU2QpLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiDkuI3og73mioroh6rlt7Hmi4npu5FcIikpLGNtKHtjb2RlOlRwLkNBTk5PVF9BRERfU0VMRl9UT19CTEFDS0xJU1QsbWVzc2FnZTpTZH0pKTooZS51c2VySURMaXN0LmluY2x1ZGVzKHIpJiYoZS51c2VySURMaXN0PWUudXNlcklETGlzdC5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlIT09cn0pKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIg5LiN6IO95oqK6Ieq5bex5ouJ6buR77yM5bey6L+H5rukXCIpKSksZS5mcm9tQWNjb3VudD10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpLGUudG9BY2NvdW50PWUudXNlcklETGlzdCx0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpUbCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24ocil7cmV0dXJuIG8uc2V0TmV0d29ya1R5cGUodC5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGUudXNlcklETGlzdC5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiLmNvbmNhdChlLnVzZXJJRExpc3QubGVuZ3RoKTpcInVzZXJJRExpc3Q6XCIuY29uY2F0KGUudXNlcklETGlzdCkpLmVuZCgpLEtpLmluZm8oXCJcIi5jb25jYXQobixcIiBva1wiKSksdC5faGFuZGxlUmVzcG9uc2Uoci5yZXN1bHRJdGVtLCEwKSxaXyh2KHQuX2JsYWNrbGlzdE1hcC5rZXlzKCkpKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLHI9blswXSxhPW5bMV07by5zZXRFcnJvcihlLHIsYSkuZW5kKCl9KSksS2kuZXJyb3IoXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSxlKSxjbShlKX0pKSl9fSx7a2V5OlwiX2hhbmRsZVJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZighTHUoZSkpZm9yKHZhciBuLG8scixhPTAscz1lLmxlbmd0aDthPHM7YSsrKW89ZVthXS50byxyPWVbYV0ucmVzdWx0Q29kZSwoSmkocil8fDA9PT1yKSYmKHQ/KChuPXRoaXMuX2JsYWNrbGlzdE1hcC5oYXMobyk/dGhpcy5fYmxhY2tsaXN0TWFwLmdldChvKTpuZXcgbHYpLnVzZXJJRD1vLCFMdShlW2FdLmFkZEJsYWNrVGltZVN0YW1wKSYmKG4udGltZVN0YW1wPWVbYV0uYWRkQmxhY2tUaW1lU3RhbXApLHRoaXMuX2JsYWNrbGlzdE1hcC5zZXQobyxuKSk6dGhpcy5fYmxhY2tsaXN0TWFwLmhhcyhvKSYmKG49dGhpcy5fYmxhY2tsaXN0TWFwLmdldChvKSx0aGlzLl9ibGFja2xpc3RNYXAuZGVsZXRlKG8pKSk7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5faGFuZGxlUmVzcG9uc2UgdG90YWw6XCIpLmNvbmNhdCh0aGlzLl9ibGFja2xpc3RNYXAuc2l6ZSxcIiBiQWRkOlwiKS5jb25jYXQodCkpfX0se2tleTpcImRlbGV0ZUJsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGVsZXRlQmxhY2tsaXN0XCIpLG89bmV3IGpkKHVoKTtyZXR1cm4gV2koZS51c2VySURMaXN0KT8oZS5mcm9tQWNjb3VudD10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpLGUudG9BY2NvdW50PWUudXNlcklETGlzdCx0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpTbCxyZXF1ZXN0RGF0YTplfSkudGhlbigoZnVuY3Rpb24ocil7cmV0dXJuIG8uc2V0TmV0d29ya1R5cGUodC5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGUudXNlcklETGlzdC5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiLmNvbmNhdChlLnVzZXJJRExpc3QubGVuZ3RoKTpcInVzZXJJRExpc3Q6XCIuY29uY2F0KGUudXNlcklETGlzdCkpLmVuZCgpLEtpLmluZm8oXCJcIi5jb25jYXQobixcIiBva1wiKSksdC5faGFuZGxlUmVzcG9uc2Uoci5kYXRhLnJlc3VsdEl0ZW0sITEpLFpfKHYodC5fYmxhY2tsaXN0TWFwLmtleXMoKSkpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fdXNlck1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMikscj1uWzBdLGE9blsxXTtvLnNldEVycm9yKGUscixhKS5lbmQoKX0pKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLGUpLGNtKGUpfSkpKTooby5zZXRDb2RlKFRwLkRFTF9CTEFDS0xJU1RfSU5WQUxJRF9QQVJBTSkuc2V0TWVzc2FnZShUZCkuc2V0TmV0d29ya1R5cGUodGhpcy5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5lcnJvcihcIlwiLmNvbmNhdChuLFwiIG9wdGlvbnMudXNlcklETGlzdCDlv4XpnIDmmK/mlbDnu4RcIikpLGNtKHtjb2RlOlRwLkRFTF9CTEFDS0xJU1RfSU5WQUxJRF9QQVJBTSxtZXNzYWdlOlRkfSkpfX0se2tleTpcIm9uQWNjb3VudERlbGV0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj1bXSxvPTAscj1lLmxlbmd0aDtvPHI7bysrKXQ9ZVtvXSx0aGlzLl9ibGFja2xpc3RNYXAuaGFzKHQpJiYodGhpcy5fYmxhY2tsaXN0TWFwLmRlbGV0ZSh0KSxuLnB1c2godCkpO24ubGVuZ3RoPjAmJihLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uQWNjb3VudERlbGV0ZWQgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCxcIiB1c2VySURMaXN0OlwiKSxuKSx0aGlzLl91c2VyTW9kdWxlLmVtaXRPdXRlckV2ZW50KG9vLkJMQUNLTElTVF9VUERBVEVELHYodGhpcy5fYmxhY2tsaXN0TWFwLmtleXMoKSkpKX19LHtrZXk6XCJvbkFjY291bnRBZGRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPVtdLG89MCxyPWUubGVuZ3RoO288cjtvKyspdD1lW29dLHRoaXMuX2JsYWNrbGlzdE1hcC5oYXModCl8fCh0aGlzLl9ibGFja2xpc3RNYXAuc2V0KHQsbmV3IGx2KHt1c2VySUQ6dH0pKSxuLnB1c2godCkpO24ubGVuZ3RoPjAmJihLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uQWNjb3VudEFkZGVkIGNvdW50OlwiKS5jb25jYXQobi5sZW5ndGgsXCIgdXNlcklETGlzdDpcIiksbiksdGhpcy5fdXNlck1vZHVsZS5lbWl0T3V0ZXJFdmVudChvby5CTEFDS0xJU1RfVVBEQVRFRCx2KHRoaXMuX2JsYWNrbGlzdE1hcC5rZXlzKCkpKSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2JsYWNrbGlzdE1hcC5jbGVhcigpLHRoaXMuc3RhcnRJbmRleD0wLHRoaXMubWF4TGltaXRlZD0xMDAsdGhpcy5jdXJyZW50U2VxdWVuY2U9MH19XSksZX0oKSxkdj1mdW5jdGlvbihlKXtpKG4sZSk7dmFyIHQ9XyhuKTtmdW5jdGlvbiBuKGUpe3ZhciByO3JldHVybiBvKHRoaXMsbiksKHI9dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJVc2VyTW9kdWxlXCIsci5fcHJvZmlsZUhhbmRsZXI9bmV3IGN2KGgocikpLHIuX2JsYWNrbGlzdEhhbmRsZXI9bmV3IHB2KGgocikpLHIuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihPbS5DT05URVhUX0EyS0VZX0FORF9USU5ZSURfVVBEQVRFRCxyLm9uQ29udGV4dFVwZGF0ZWQsaChyKSkscn1yZXR1cm4gYShuLFt7a2V5Olwib25Db250ZXh0VXBkYXRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Byb2ZpbGVIYW5kbGVyLmdldE15UHJvZmlsZSgpLHRoaXMuX2JsYWNrbGlzdEhhbmRsZXIuZ2V0QmxhY2tsaXN0KCl9fSx7a2V5Olwib25Qcm9maWxlTW9kaWZpZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9wcm9maWxlSGFuZGxlci5vblByb2ZpbGVNb2RpZmllZChlKX19LHtrZXk6XCJvblJlbGF0aW9uQ2hhaW5Nb2RpZmllZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YUxpc3Q7aWYoIUx1KHQpKXt2YXIgbj1bXTt0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuYmxhY2tMaXN0RGVsQWNjb3VudCYmbi5wdXNoLmFwcGx5KG4sdihlLmJsYWNrTGlzdERlbEFjY291bnQpKX0pKSxuLmxlbmd0aD4wJiZ0aGlzLl9ibGFja2xpc3RIYW5kbGVyLm9uQWNjb3VudERlbGV0ZWQobik7dmFyIG89W107dC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmJsYWNrTGlzdEFkZEFjY291bnQmJm8ucHVzaC5hcHBseShvLHYoZS5ibGFja0xpc3RBZGRBY2NvdW50KSl9KSksby5sZW5ndGg+MCYmdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5vbkFjY291bnRBZGRlZChvKX19fSx7a2V5Olwib25Db252ZXJzYXRpb25zUHJvZmlsZVVwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9wcm9maWxlSGFuZGxlci5vbkNvbnZlcnNhdGlvbnNQcm9maWxlVXBkYXRlZChlKX19LHtrZXk6XCJnZXRNeUFjY291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE15VXNlcklEKCl9fSx7a2V5OlwiZ2V0TXlQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvZmlsZUhhbmRsZXIuZ2V0TXlQcm9maWxlKCl9fSx7a2V5OlwiZ2V0U3RvcmFnZU1vZHVsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKFFjKX19LHtrZXk6XCJpc015RnJpZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNb2R1bGUoemMpO3JldHVybiEhdCYmdC5pc015RnJpZW5kKGUpfX0se2tleTpcImdldFVzZXJQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Byb2ZpbGVIYW5kbGVyLmdldFVzZXJQcm9maWxlKGUpfX0se2tleTpcInVwZGF0ZU15UHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wcm9maWxlSGFuZGxlci51cGRhdGVNeVByb2ZpbGUoZSl9fSx7a2V5OlwiZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Byb2ZpbGVIYW5kbGVyLmdldE5pY2tBbmRBdmF0YXJCeVVzZXJJRChlKX19LHtrZXk6XCJnZXRMb2NhbEJsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fYmxhY2tsaXN0SGFuZGxlci5nZXRMb2NhbEJsYWNrbGlzdCgpO3JldHVybiB1bShlKX19LHtrZXk6XCJhZGRCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5hZGRCbGFja2xpc3QoZSl9fSx7a2V5OlwiZGVsZXRlQmxhY2tsaXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2JsYWNrbGlzdEhhbmRsZXIuZGVsZXRlQmxhY2tsaXN0KGUpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9wcm9maWxlSGFuZGxlci5yZXNldCgpLHRoaXMuX2JsYWNrbGlzdEhhbmRsZXIucmVzZXQoKX19XSksbn0ocGwpLGd2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4pe28odGhpcyxlKSx0aGlzLl9tb2R1bGVNYW5hZ2VyPXQsdGhpcy5faXNMb2dnZWRJbj0hMSx0aGlzLl9TREtBcHBJRD1uLlNES0FwcElELHRoaXMuX3VzZXJJRD1uLnVzZXJJRHx8XCJcIix0aGlzLl91c2VyU2lnPW4udXNlclNpZ3x8XCJcIix0aGlzLl92ZXJzaW9uPVwiMi4xNC4wXCIsdGhpcy5fYTJLZXk9XCJcIix0aGlzLl90aW55SUQ9XCJcIix0aGlzLl9jb250ZW50VHlwZT1cImpzb25cIix0aGlzLl91bmxpbWl0ZWRBVkNoYXRSb29tPW4udW5saW1pdGVkQVZDaGF0Um9vbSx0aGlzLl9zY2VuZT1uLnNjZW5lfHxcIlwiLHRoaXMuX292ZXJzZWE9bi5vdmVyc2VhLHRoaXMuX2luc3RhbmNlSUQ9bi5pbnN0YW5jZUlELHRoaXMuX3N0YXR1c0luc3RhbmNlSUQ9MH1yZXR1cm4gYShlLFt7a2V5OlwiaXNMb2dnZWRJblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzTG9nZ2VkSW59fSx7a2V5OlwiaXNPdmVyc2VhXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3ZlcnNlYX19LHtrZXk6XCJpc1VubGltaXRlZEFWQ2hhdFJvb21cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91bmxpbWl0ZWRBVkNoYXRSb29tfX0se2tleTpcImdldFVzZXJJRFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZXJJRH19LHtrZXk6XCJzZXRVc2VySURcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl91c2VySUQ9ZX19LHtrZXk6XCJzZXRVc2VyU2lnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fdXNlclNpZz1lfX0se2tleTpcImdldFVzZXJTaWdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91c2VyU2lnfX0se2tleTpcImdldFNES0FwcElEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fU0RLQXBwSUR9fSx7a2V5OlwiZ2V0VGlueUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGlueUlEfX0se2tleTpcInNldFRpbnlJRFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3RpbnlJRD1lLHRoaXMuX2lzTG9nZ2VkSW49ITB9fSx7a2V5OlwiZ2V0U2NlbmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPSExLHQ9W107YWkmJih0PU9iamVjdC5rZXlzKGlpKSksc2kmJih0PU9iamVjdC5rZXlzKHdpbmRvdykpO2Zvcih2YXIgbj0wLG89dC5sZW5ndGg7bjxvO24rKylpZih0W25dLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJ1aWtpdFwiKSl7ZT0hMDticmVha31yZXR1cm4gdD1udWxsLGV9KCk/XCJ0dWlraXRcIjp0aGlzLl9zY2VuZX19LHtrZXk6XCJnZXRJbnN0YW5jZUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5zdGFuY2VJRH19LHtrZXk6XCJnZXRTdGF0dXNJbnN0YW5jZUlEXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdHVzSW5zdGFuY2VJRH19LHtrZXk6XCJzZXRTdGF0dXNJbnN0YW5jZUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdHVzSW5zdGFuY2VJRD1lfX0se2tleTpcImdldFZlcnNpb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92ZXJzaW9ufX0se2tleTpcImdldEEyS2V5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYTJLZXl9fSx7a2V5Olwic2V0QTJLZXlcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9hMktleT1lfX0se2tleTpcImdldENvbnRlbnRUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGVudFR5cGV9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzTG9nZ2VkSW49ITEsdGhpcy5fdXNlclNpZz1cIlwiLHRoaXMuX2EyS2V5PVwiXCIsdGhpcy5fdGlueUlEPVwiXCIsdGhpcy5fc3RhdHVzSW5zdGFuY2VJRD0wfX1dKSxlfSgpLGh2PWZ1bmN0aW9uKGUpe2kobixlKTt2YXIgdD1fKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHI7cmV0dXJuIG8odGhpcyxuKSwocj10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlNpZ25Nb2R1bGVcIixyLl9oZWxsb0ludGVydmFsPTEyMCxyLl9sYXN0TG9naW5Ucz0wLExtLm1peGluKGgocikpLHJ9cmV0dXJuIGEobixbe2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaXNMb2dnZWRJbigpJiZlJXRoaXMuX2hlbGxvSW50ZXJ2YWw9PTAmJnRoaXMuX2hlbGxvKCl9fSx7a2V5OlwibG9naW5cIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLmlzTG9nZ2VkSW4oKSl7dmFyIHQ9XCLmgqjlt7Lnu4/nmbvlvZXotKblj7dcIi5jb25jYXQoZS51c2VySUQsXCLvvIHlpoLpnIDliIfmjaLotKblj7fnmbvlvZXvvIzor7flhYjosIPnlKggbG9nb3V0IOaOpeWPo+eZu+WHuu+8jOWGjeiwg+eUqCBsb2dpbiDmjqXlj6PnmbvlvZXjgIJcIik7cmV0dXJuIEtpLndhcm4odCksdW0oe2FjdGlvblN0YXR1czpcIk9LXCIsZXJyb3JDb2RlOjAsZXJyb3JJbmZvOnQscmVwZWF0TG9naW46ITB9KX1pZihEYXRlLm5vdygpLXRoaXMuX2xhc3RMb2dpblRzPD0xNWUzKXJldHVybiBLaS53YXJuKFwi5oKo5q2j5Zyo5bCd6K+V55m75b2V6LSm5Y+3XCIuY29uY2F0KGUudXNlcklELFwi77yB6K+35Yu/6YeN5aSN55m75b2V44CCXCIpKSxjbSh7Y29kZTpUcC5SRVBFQVRfTE9HSU4sbWVzc2FnZTpOcH0pO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIubG9naW4gdXNlcklEOlwiKS5jb25jYXQoZS51c2VySUQpKTt2YXIgbj10aGlzLl9jaGVja0xvZ2luSW5mbyhlKTtpZigwIT09bi5jb2RlKXJldHVybiBjbShuKTt2YXIgbz10aGlzLmdldE1vZHVsZShYYykscj1lLnVzZXJJRCxhPWUudXNlclNpZztyZXR1cm4gby5zZXRVc2VySUQociksby5zZXRVc2VyU2lnKGEpLHRoaXMuZ2V0TW9kdWxlKGFsKS51cGRhdGVQcm90b2NvbENvbmZpZygpLHRoaXMuX2xvZ2luKCl9fSx7a2V5OlwiX2xvZ2luXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5nZXRNb2R1bGUoWGMpLG49bmV3IGpkKHpkKTtyZXR1cm4gbi5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KHQuZ2V0U2NlbmUoKSkpLnNldE1vcmVNZXNzYWdlKFwiaWRlbnRpZmllcjpcIi5jb25jYXQodGhpcy5nZXRNeVVzZXJJRCgpKSksdGhpcy5fbGFzdExvZ2luVHM9RGF0ZS5ub3coKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpkbH0pLnRoZW4oKGZ1bmN0aW9uKG8pe2UuX2xhc3RMb2dpblRzPTA7dmFyIHI9RGF0ZS5ub3coKSxhPW51bGwscz1vLmRhdGEsaT1zLmEyS2V5LHU9cy50aW55SUQsYz1zLmhlbGxvSW50ZXJ2YWwsbD1zLmluc3RhbmNlSUQscD1zLnRpbWVTdGFtcDtLaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLmxvZ2luIG9rLiBoZWxsb0ludGVydmFsOlwiKS5jb25jYXQoYyxcIiBpbnN0YW5jZUlEOlwiKS5jb25jYXQobCxcIiB0aW1lU3RhbXA6XCIpLmNvbmNhdChwKSk7dmFyIGQ9MWUzKnAsZz1yLW4uZ2V0U3RhcnRUcygpLGg9ZCtwYXJzZUludChnLzIpLXIsZj1uLmdldFN0YXJ0VHMoKStoO2lmKG4uc3RhcnQoZiksZnVuY3Rpb24oZSx0KXtHaT10O3ZhciBuPW5ldyBEYXRlO24uc2V0VGltZShlKSxLaS5pbmZvKFwiYmFzZVRpbWUgZnJvbSBzZXJ2ZXI6IFwiLmNvbmNhdChuLFwiIG9mZnNldDogXCIpLmNvbmNhdChHaSkpfShkLGgpLCF1KXRocm93IGE9bmV3IGFtKHtjb2RlOlRwLk5PX1RJTllJRCxtZXNzYWdlOkNwfSksbi5zZXRFcnJvcihhLCEwLGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksYTtpZighaSl0aHJvdyBhPW5ldyBhbSh7Y29kZTpUcC5OT19BMktFWSxtZXNzYWdlOkFwfSksbi5zZXRFcnJvcihhLCEwLGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksYTtyZXR1cm4gbi5zZXROZXR3b3JrVHlwZShlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1vcmVNZXNzYWdlKFwiaGVsbG9JbnRlcnZhbDpcIi5jb25jYXQoYyxcIiBpbnN0YW5jZUlEOlwiKS5jb25jYXQobCxcIiBvZmZzZXQ6XCIpLmNvbmNhdChoKSkuZW5kKCksdC5zZXRBMktleShpKSx0LnNldFRpbnlJRCh1KSx0LnNldFN0YXR1c0luc3RhbmNlSUQobCksZS5nZXRNb2R1bGUoYWwpLnVwZGF0ZVByb3RvY29sQ29uZmlnKCksZS5lbWl0SW5uZXJFdmVudChPbS5DT05URVhUX0EyS0VZX0FORF9USU5ZSURfVVBEQVRFRCksZS5faGVsbG9JbnRlcnZhbD1jLGUudHJpZ2dlclJlYWR5KCksZS5fZmV0Y2hDbG91ZENvbnRyb2xDb25maWcoKSxvfSkpLmNhdGNoKChmdW5jdGlvbih0KXtyZXR1cm4gZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbihlKXt2YXIgbz1tKGUsMikscj1vWzBdLGE9b1sxXTtuLnNldEVycm9yKHQscixhKS5lbmQoITApfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5sb2dpbiBmYWlsZWQuIGVycm9yOlwiKSx0KSxlLl9tb2R1bGVNYW5hZ2VyLm9uTG9naW5GYWlsZWQoKSxjbSh0KX0pKX19LHtrZXk6XCJsb2dvdXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MDtpZighdGhpcy5pc0xvZ2dlZEluKCkpcmV0dXJuIGNtKHtjb2RlOlRwLlVTRVJfTk9UX0xPR0dFRF9JTixtZXNzYWdlOmtwfSk7dmFyIG49bmV3IGpkKFdkKTtyZXR1cm4gbi5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJpZGVudGlmaWVyOlwiLmNvbmNhdCh0aGlzLmdldE15VXNlcklEKCkpKS5lbmQoITApLEtpLmluZm8oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmxvZ291dCB0eXBlOlwiKS5jb25jYXQodCkpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmdsLHJlcXVlc3REYXRhOnt0eXBlOnR9fSkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4gZS5yZXNldFJlYWR5KCksdW0oe30pfSkpLmNhdGNoKChmdW5jdGlvbih0KXtyZXR1cm4gS2kuZXJyb3IoXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9sb2dvdXQgZXJyb3I6XCIpLHQpLGUucmVzZXRSZWFkeSgpLHVtKHt9KX0pKX19LHtrZXk6XCJfZmV0Y2hDbG91ZENvbnRyb2xDb25maWdcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ2V0TW9kdWxlKHVsKS5mZXRjaENvbmZpZygpfX0se2tleTpcIl9oZWxsb1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpobH0pLmNhdGNoKChmdW5jdGlvbih0KXtLaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5faGVsbG8gZXJyb3I6XCIpLHQpfSkpfX0se2tleTpcIl9jaGVja0xvZ2luSW5mb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj1cIlwiO3JldHVybiBMdSh0aGlzLmdldE1vZHVsZShYYykuZ2V0U0RLQXBwSUQoKSk/KHQ9VHAuTk9fU0RLQVBQSUQsbj1TcCk6THUoZS51c2VySUQpPyh0PVRwLk5PX0lERU5USUZJRVIsbj1EcCk6THUoZS51c2VyU2lnKSYmKHQ9VHAuTk9fVVNFUlNJRyxuPUVwKSx7Y29kZTp0LG1lc3NhZ2U6bn19fSx7a2V5Olwib25NdWx0aXBsZUFjY291bnRLaWNrZWRPdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO25ldyBqZChKZCkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwidHlwZTpcIi5jb25jYXQocm8uS0lDS0VEX09VVF9NVUxUX0FDQ09VTlQsXCIgbmV3SW5zdGFuY2VJbmZvOlwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoZSkpKS5lbmQoITApLEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTXVsdGlwbGVBY2NvdW50S2lja2VkT3V0IHVzZXJJRDpcIikuY29uY2F0KHRoaXMuZ2V0TXlVc2VySUQoKSxcIiBuZXdJbnN0YW5jZUluZm86XCIpLGUpLHRoaXMubG9nb3V0KDEpLnRoZW4oKGZ1bmN0aW9uKCl7dC5lbWl0T3V0ZXJFdmVudChvby5LSUNLRURfT1VULHt0eXBlOnJvLktJQ0tFRF9PVVRfTVVMVF9BQ0NPVU5UfSksdC5fbW9kdWxlTWFuYWdlci5yZXNldCgpfSkpfX0se2tleTpcIm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO25ldyBqZChKZCkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwidHlwZTpcIi5jb25jYXQocm8uS0lDS0VEX09VVF9NVUxUX0RFVklDRSxcIiBuZXdJbnN0YW5jZUluZm86XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShlKSkpLmVuZCghMCksS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NdWx0aXBsZURldmljZUtpY2tlZE91dCB1c2VySUQ6XCIpLmNvbmNhdCh0aGlzLmdldE15VXNlcklEKCksXCIgbmV3SW5zdGFuY2VJbmZvOlwiKSxlKSx0aGlzLmxvZ291dCgxKS50aGVuKChmdW5jdGlvbigpe3QuZW1pdE91dGVyRXZlbnQob28uS0lDS0VEX09VVCx7dHlwZTpyby5LSUNLRURfT1VUX01VTFRfREVWSUNFfSksdC5fbW9kdWxlTWFuYWdlci5yZXNldCgpfSkpfX0se2tleTpcIm9uVXNlclNpZ0V4cGlyZWRcIix2YWx1ZTpmdW5jdGlvbigpe25ldyBqZChKZCkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKHJvLktJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEKS5lbmQoITApLEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uVXNlclNpZ0V4cGlyZWQ6IHVzZXJTaWcg562+5ZCN6L+H5pyf6KKr6Lii5LiL57q/XCIpKSwwIT09dGhpcy5nZXRNb2R1bGUoWGMpLmdldFN0YXR1c0luc3RhbmNlSUQoKSYmKHRoaXMuZW1pdE91dGVyRXZlbnQob28uS0lDS0VEX09VVCx7dHlwZTpyby5LSUNLRURfT1VUX1VTRVJTSUdfRVhQSVJFRH0pLHRoaXMuX21vZHVsZU1hbmFnZXIucmVzZXQoKSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMucmVzZXRSZWFkeSgpLHRoaXMuX2hlbGxvSW50ZXJ2YWw9MTIwLHRoaXMuX2xhc3RMb2dpblRzPTB9fV0pLG59KHBsKTtmdW5jdGlvbiBmdigpe3JldHVybiBudWxsfXZhciBfdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX21vZHVsZU1hbmFnZXI9dCx0aGlzLl9jbGFzc05hbWU9XCJTdG9yYWdlTW9kdWxlXCIsdGhpcy5fc3RvcmFnZVF1ZXVlPW5ldyBNYXAsdGhpcy5fZXJyb3JUb2xlcmFudEhhbmRsZSgpfXJldHVybiBhKGUsW3trZXk6XCJfZXJyb3JUb2xlcmFudEhhbmRsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7YWl8fCFKaSh3aW5kb3cpJiYhSmkod2luZG93LmxvY2FsU3RvcmFnZSl8fCh0aGlzLmdldEl0ZW09ZnYsdGhpcy5zZXRJdGVtPWZ2LHRoaXMucmVtb3ZlSXRlbT1mdix0aGlzLmNsZWFyPWZ2KX19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihlJTIwPT0wKXtpZigwPT09dGhpcy5fc3RvcmFnZVF1ZXVlLnNpemUpcmV0dXJuO3RoaXMuX2RvRmx1c2goKX19fSx7a2V5OlwiX2RvRmx1c2hcIix2YWx1ZTpmdW5jdGlvbigpe3RyeXt2YXIgZSx0PUQodGhpcy5fc3RvcmFnZVF1ZXVlKTt0cnl7Zm9yKHQucygpOyEoZT10Lm4oKSkuZG9uZTspe3ZhciBuPW0oZS52YWx1ZSwyKSxvPW5bMF0scj1uWzFdO3RoaXMuX3NldFN0b3JhZ2VTeW5jKHRoaXMuX2dldEtleShvKSxyKX19Y2F0Y2goYSl7dC5lKGEpfWZpbmFsbHl7dC5mKCl9dGhpcy5fc3RvcmFnZVF1ZXVlLmNsZWFyKCl9Y2F0Y2goX00pe0tpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9kb0ZsdXNoIGVycm9yOlwiKSxfTSl9fX0se2tleTpcIl9nZXRQcmVmaXhcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFhjKTtyZXR1cm5cIlRJTV9cIi5jb25jYXQoZS5nZXRTREtBcHBJRCgpLFwiX1wiKS5jb25jYXQoZS5nZXRVc2VySUQoKSxcIl9cIil9fSx7a2V5OlwiX2dldEtleVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVyblwiXCIuY29uY2F0KHRoaXMuX2dldFByZWZpeCgpKS5jb25jYXQoZSl9fSx7a2V5OlwiZ2V0SXRlbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07dHJ5e3ZhciBuPXQ/dGhpcy5fZ2V0S2V5KGUpOmU7cmV0dXJuIHRoaXMuX2dldFN0b3JhZ2VTeW5jKG4pfWNhdGNoKF9NKXtyZXR1cm4gS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0SXRlbSBlcnJvcjpcIiksX00pLHt9fX19LHtrZXk6XCJzZXRJdGVtXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdLG89IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXTtpZihuKXt2YXIgcj1vP3RoaXMuX2dldEtleShlKTplO3RoaXMuX3NldFN0b3JhZ2VTeW5jKHIsdCl9ZWxzZSB0aGlzLl9zdG9yYWdlUXVldWUuc2V0KGUsdCl9fSx7a2V5OlwiY2xlYXJcIix2YWx1ZTpmdW5jdGlvbigpe3RyeXthaT9paS5jbGVhclN0b3JhZ2VTeW5jKCk6bG9jYWxTdG9yYWdlJiZsb2NhbFN0b3JhZ2UuY2xlYXIoKX1jYXRjaChfTSl7S2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY2xlYXIgZXJyb3I6XCIpLF9NKX19fSx7a2V5OlwicmVtb3ZlSXRlbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07dHJ5e3ZhciBuPXQ/dGhpcy5fZ2V0S2V5KGUpOmU7dGhpcy5fcmVtb3ZlU3RvcmFnZVN5bmMobil9Y2F0Y2goX00pe0tpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlbW92ZUl0ZW0gZXJyb3I6XCIpLF9NKX19fSx7a2V5OlwiZ2V0U2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJiXCI7dHJ5e3ZhciBvPXtzaXplOjAsbGltaXRTaXplOjUyNDI4ODAsdW5pdDpufTtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkobyxcImxlZnRTaXplXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG8ubGltaXRTaXplLW8uc2l6ZX19KSxhaSYmKG8ubGltaXRTaXplPTEwMjQqaWkuZ2V0U3RvcmFnZUluZm9TeW5jKCkubGltaXRTaXplKSxlKW8uc2l6ZT1KU09OLnN0cmluZ2lmeSh0aGlzLmdldEl0ZW0oZSkpLmxlbmd0aCt0aGlzLl9nZXRLZXkoZSkubGVuZ3RoO2Vsc2UgaWYoYWkpe3ZhciByPWlpLmdldFN0b3JhZ2VJbmZvU3luYygpLGE9ci5rZXlzO2EuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5zaXplKz1KU09OLnN0cmluZ2lmeSh0Ll9nZXRTdG9yYWdlU3luYyhlKSkubGVuZ3RoK3QuX2dldEtleShlKS5sZW5ndGh9KSl9ZWxzZSBpZihsb2NhbFN0b3JhZ2UpZm9yKHZhciBzIGluIGxvY2FsU3RvcmFnZSlsb2NhbFN0b3JhZ2UuaGFzT3duUHJvcGVydHkocykmJihvLnNpemUrPWxvY2FsU3RvcmFnZS5nZXRJdGVtKHMpLmxlbmd0aCtzLmxlbmd0aCk7cmV0dXJuIHRoaXMuX2NvbnZlcnRVbml0KG8pfWNhdGNoKF9NKXtLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIiBlcnJvcjpcIiksX00pfX19LHtrZXk6XCJfY29udmVydFVuaXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxuPWUudW5pdDtmb3IodmFyIG8gaW4gdC51bml0PW4sZSlcIm51bWJlclwiPT10eXBlb2YgZVtvXSYmKFwia2JcIj09PW4udG9Mb3dlckNhc2UoKT90W29dPU1hdGgucm91bmQoZVtvXS8xMDI0KTpcIm1iXCI9PT1uLnRvTG93ZXJDYXNlKCk/dFtvXT1NYXRoLnJvdW5kKGVbb10vMTAyNC8xMDI0KTp0W29dPWVbb10pO3JldHVybiB0fX0se2tleTpcIl9zZXRTdG9yYWdlU3luY1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7YWk/b2k/bXkuc2V0U3RvcmFnZVN5bmMoe2tleTplLGRhdGE6dH0pOmlpLnNldFN0b3JhZ2VTeW5jKGUsdCk6bG9jYWxTdG9yYWdlJiZsb2NhbFN0b3JhZ2Uuc2V0SXRlbShlLEpTT04uc3RyaW5naWZ5KHQpKX19LHtrZXk6XCJfZ2V0U3RvcmFnZVN5bmNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gYWk/b2k/bXkuZ2V0U3RvcmFnZVN5bmMoe2tleTplfSkuZGF0YTppaS5nZXRTdG9yYWdlU3luYyhlKTpsb2NhbFN0b3JhZ2U/SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKSk6e319fSx7a2V5OlwiX3JlbW92ZVN0b3JhZ2VTeW5jXCIsdmFsdWU6ZnVuY3Rpb24oZSl7YWk/b2k/bXkucmVtb3ZlU3RvcmFnZVN5bmMoe2tleTplfSk6aWkucmVtb3ZlU3RvcmFnZVN5bmMoZSk6bG9jYWxTdG9yYWdlJiZsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShlKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fZG9GbHVzaCgpfX1dKSxlfSgpLG12PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5fY2xhc3NOYW1lPVwiU1NPTG9nQm9keVwiLHRoaXMuX3JlcG9ydD1bXX1yZXR1cm4gYShlLFt7a2V5OlwicHVzaEluXCIsdmFsdWU6ZnVuY3Rpb24oZSl7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnB1c2hJblwiKSx0aGlzLl9yZXBvcnQubGVuZ3RoLGUpLHRoaXMuX3JlcG9ydC5wdXNoKGUpfX0se2tleTpcImJhY2tmaWxsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ7V2koZSkmJjAhPT1lLmxlbmd0aCYmKEtpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5iYWNrZmlsbFwiKSx0aGlzLl9yZXBvcnQubGVuZ3RoLGUubGVuZ3RoKSwodD10aGlzLl9yZXBvcnQpLnVuc2hpZnQuYXBwbHkodCx2KGUpKSl9fSx7a2V5OlwiZ2V0TG9nc051bUluTWVtb3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwb3J0Lmxlbmd0aH19LHtrZXk6XCJpc0VtcHR5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuX3JlcG9ydC5sZW5ndGh9fSx7a2V5OlwiX3Jlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZXBvcnQubGVuZ3RoPTAsdGhpcy5fcmVwb3J0PVtdfX0se2tleTpcImdldExvZ3NJbk1lbW9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcmVwb3J0LnNsaWNlKCk7cmV0dXJuIHRoaXMuX3Jlc2V0KCksZX19XSksZX0oKSx2dj1mdW5jdGlvbihlKXt2YXIgdD1lLmdldE1vZHVsZShYYyk7cmV0dXJue1NES1R5cGU6MTAsU0RLQXBwSUQ6dC5nZXRTREtBcHBJRCgpLFNES1ZlcnNpb246dC5nZXRWZXJzaW9uKCksdGlueUlEOk51bWJlcih0LmdldFRpbnlJRCgpKSx1c2VySUQ6dC5nZXRVc2VySUQoKSxwbGF0Zm9ybTplLmdldFBsYXRmb3JtKCksaW5zdGFuY2VJRDp0LmdldEluc3RhbmNlSUQoKSx0cmFjZUlEOlVpKCl9fSxNdj1mdW5jdGlvbihlKXtpKHIsZSk7dmFyIG49XyhyKTtmdW5jdGlvbiByKGUpe3ZhciB0O28odGhpcyxyKSwodD1uLmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkV2ZW50U3RhdE1vZHVsZVwiLHQuVEFHPVwiaW0tc3NvbG9nLWV2ZW50XCIsdC5fcmVwb3J0Qm9keT1uZXcgbXYsdC5NSU5fVEhSRVNIT0xEPTIwLHQuTUFYX1RIUkVTSE9MRD0xMDAsdC5XQUlUSU5HX1RJTUU9NmU0LHQuUkVQT1JUX0xFVkVMPVs0LDUsNl0sdC5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPVtdLHQuUkVQT1JUX1RJTllJRF9XSElURUxJU1Q9W10sdC5fbGFzdFJlcG9ydFRpbWU9RGF0ZS5ub3coKTt2YXIgYT10LmdldElubmVyRW1pdHRlckluc3RhbmNlKCk7cmV0dXJuIGEub24oT20uQ09OVEVYVF9BMktFWV9BTkRfVElOWUlEX1VQREFURUQsdC5fb25Mb2dpblN1Y2Nlc3MsaCh0KSksYS5vbihPbS5DTE9VRF9DT05GSUdfVVBEQVRFRCx0Ll9vbkNsb3VkQ29uZmlnVXBkYXRlZCxoKHQpKSx0fXJldHVybiBhKHIsW3trZXk6XCJyZXBvcnRBdE9uY2VcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXBvcnRBdE9uY2VcIikpLHRoaXMuX3JlcG9ydCgpfX0se2tleTpcIl9vbkxvZ2luU3VjY2Vzc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuZ2V0TW9kdWxlKFFjKSxuPXQuZ2V0SXRlbSh0aGlzLlRBRywhMSk7IUx1KG4pJiZRaShuLmZvckVhY2gpJiYoS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25Mb2dpblN1Y2Nlc3MgZ2V0IHNzb2xvZyBpbiBzdG9yYWdlLCBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksbi5mb3JFYWNoKChmdW5jdGlvbih0KXtlLl9yZXBvcnRCb2R5LnB1c2hJbih0KX0pKSx0LnJlbW92ZUl0ZW0odGhpcy5UQUcsITEpKX19LHtrZXk6XCJfb25DbG91ZENvbmZpZ1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJldnRfcnB0X3RocmVzaG9sZFwiKSx0PXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJldnRfcnB0X3dhaXRpbmdcIiksbj10aGlzLmdldENsb3VkQ29uZmlnKFwiZXZ0X3JwdF9sZXZlbFwiKSxvPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJldnRfcnB0X3Nka2FwcGlkX2JsXCIpLHI9dGhpcy5nZXRDbG91ZENvbmZpZyhcImV2dF9ycHRfdGlueWlkX3dsXCIpO0ppKGUpfHwodGhpcy5NSU5fVEhSRVNIT0xEPU51bWJlcihlKSksSmkodCl8fCh0aGlzLldBSVRJTkdfVElNRT1OdW1iZXIodCkpLEppKG4pfHwodGhpcy5SRVBPUlRfTEVWRUw9bi5zcGxpdChcIixcIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gTnVtYmVyKGUpfSkpKSxKaShvKXx8KHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD1vLnNwbGl0KFwiLFwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBOdW1iZXIoZSl9KSkpLEppKHIpfHwodGhpcy5SRVBPUlRfVElOWUlEX1dISVRFTElTVD1yLnNwbGl0KFwiLFwiKSl9fSx7a2V5OlwicHVzaEluXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZSBpbnN0YW5jZW9mIGpkJiYoZS51cGRhdGVUaW1lU3RhbXAoKSx0aGlzLl9yZXBvcnRCb2R5LnB1c2hJbihlKSx0aGlzLl9yZXBvcnRCb2R5LmdldExvZ3NOdW1Jbk1lbW9yeSgpPj10aGlzLk1JTl9USFJFU0hPTEQmJnRoaXMuX3JlcG9ydCgpKX19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbigpe0RhdGUubm93KCk8dGhpcy5fbGFzdFJlcG9ydFRpbWUrdGhpcy5XQUlUSU5HX1RJTUV8fHRoaXMuX3JlcG9ydEJvZHkuaXNFbXB0eSgpfHx0aGlzLl9yZXBvcnQoKX19LHtrZXk6XCJfZmlsdGVyTG9nc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLmdldE1vZHVsZShYYyksbz1uLmdldFNES0FwcElEKCkscj1uLmdldFRpbnlJRCgpO3JldHVybiBrdSh0aGlzLlJFUE9SVF9TREtBUFBJRF9CTEFDS0xJU1QsbykmJiFOdSh0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNULHIpP1tdOmUuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gdC5SRVBPUlRfTEVWRUwuaW5jbHVkZXMoZS5sZXZlbCl9KSl9fSx7a2V5OlwiX3JlcG9ydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighdGhpcy5fcmVwb3J0Qm9keS5pc0VtcHR5KCkpe3ZhciBuPXRoaXMuX3JlcG9ydEJvZHkuZ2V0TG9nc0luTWVtb3J5KCksbz10aGlzLl9maWx0ZXJMb2dzKG4pO2lmKDAhPT1vLmxlbmd0aCl7dmFyIHI9e2hlYWRlcjp2dih0aGlzKSxldmVudDpvfTt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpncCxyZXF1ZXN0RGF0YTp0KHt9LHIpfSkudGhlbigoZnVuY3Rpb24oKXtlLl9sYXN0UmVwb3J0VGltZT1EYXRlLm5vdygpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtLaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5yZXBvcnQgZmFpbGVkLiBuZXR3b3JrVHlwZTpcIikuY29uY2F0KGUuZ2V0TmV0d29ya1R5cGUoKSxcIiBlcnJvcjpcIiksdCksZS5fcmVwb3J0Qm9keS5iYWNrZmlsbChuKSxlLl9yZXBvcnRCb2R5LmdldExvZ3NOdW1Jbk1lbW9yeSgpPmUuTUFYX1RIUkVTSE9MRCYmZS5fZmx1c2hBdE9uY2UoKX0pKX1lbHNlIHRoaXMuX2xhc3RSZXBvcnRUaW1lPURhdGUubm93KCl9fX0se2tleTpcIl9mbHVzaEF0T25jZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRNb2R1bGUoUWMpLHQ9ZS5nZXRJdGVtKHRoaXMuVEFHLCExKSxuPXRoaXMuX3JlcG9ydEJvZHkuZ2V0TG9nc0luTWVtb3J5KCk7aWYoTHUodCkpS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZmx1c2hBdE9uY2UgY291bnQ6XCIpLmNvbmNhdChuLmxlbmd0aCkpLGUuc2V0SXRlbSh0aGlzLlRBRyxuLCEwLCExKTtlbHNle3ZhciBvPW4uY29uY2F0KHQpO28ubGVuZ3RoPnRoaXMuTUFYX1RIUkVTSE9MRCYmKG89by5zbGljZSgwLHRoaXMuTUFYX1RIUkVTSE9MRCkpLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2ZsdXNoQXRPbmNlIGNvdW50OlwiKS5jb25jYXQoby5sZW5ndGgpKSxlLnNldEl0ZW0odGhpcy5UQUcsbywhMCwhMSl9fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9sYXN0UmVwb3J0VGltZT0wLHRoaXMuX3JlcG9ydCgpLHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD1bXSx0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPVtdfX1dKSxyfShwbCkseXY9XCJub25lXCIsSXY9XCJvbmxpbmVcIixUdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX21vZHVsZU1hbmFnZXI9dCx0aGlzLl9uZXR3b3JrVHlwZT1cIlwiLHRoaXMuX2NsYXNzTmFtZT1cIk5ldE1vbml0b3JNb2R1bGVcIix0aGlzLk1BWF9XQUlUX1RJTUU9M2UzfXJldHVybiBhKGUsW3trZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihhaSl7aWkuZ2V0TmV0d29ya1R5cGUoe3N1Y2Nlc3M6ZnVuY3Rpb24odCl7ZS5fbmV0d29ya1R5cGU9dC5uZXR3b3JrVHlwZSx0Lm5ldHdvcmtUeXBlPT09eXY/S2kud2FybihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuc3RhcnQgbm8gbmV0d29yaywgcGxlYXNlIGNoZWNrIVwiKSk6S2kuaW5mbyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuc3RhcnQgbmV0d29ya1R5cGU6XCIpLmNvbmNhdCh0Lm5ldHdvcmtUeXBlKSl9fSk7dmFyIHQ9dGhpcy5fb25OZXR3b3JrU3RhdHVzQ2hhbmdlLmJpbmQodGhpcyk7aWkub2ZmTmV0d29ya1N0YXR1c0NoYW5nZSYmKHJpfHx0aT9paS5vZmZOZXR3b3JrU3RhdHVzQ2hhbmdlKHQpOmlpLm9mZk5ldHdvcmtTdGF0dXNDaGFuZ2UoKSksaWkub25OZXR3b3JrU3RhdHVzQ2hhbmdlKHQpfWVsc2UgdGhpcy5fbmV0d29ya1R5cGU9SXZ9fSx7a2V5OlwiX29uTmV0d29ya1N0YXR1c0NoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UuaXNDb25uZWN0ZWQ/KEtpLmluZm8oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbk5ldHdvcmtTdGF0dXNDaGFuZ2UgcHJldmlvdXNOZXR3b3JrVHlwZTpcIikuY29uY2F0KHRoaXMuX25ldHdvcmtUeXBlLFwiIGN1cnJlbnROZXR3b3JrVHlwZTpcIikuY29uY2F0KGUubmV0d29ya1R5cGUpKSx0aGlzLl9uZXR3b3JrVHlwZSE9PWUubmV0d29ya1R5cGUmJnRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHNsKS5yZUNvbm5lY3QoKSk6S2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uTmV0d29ya1N0YXR1c0NoYW5nZSBubyBuZXR3b3JrLCBwbGVhc2UgY2hlY2shXCIpKTt0aGlzLl9uZXR3b3JrVHlwZT1lLm5ldHdvcmtUeXBlfX0se2tleTpcInByb2JlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXtpZihhaSlpaS5nZXROZXR3b3JrVHlwZSh7c3VjY2VzczpmdW5jdGlvbihuKXtlLl9uZXR3b3JrVHlwZT1uLm5ldHdvcmtUeXBlLG4ubmV0d29ya1R5cGU9PT15dj8oS2kud2FybihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIucHJvYmUgbm8gbmV0d29yaywgcGxlYXNlIGNoZWNrIVwiKSksdChbITEsbi5uZXR3b3JrVHlwZV0pKTooS2kuaW5mbyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIucHJvYmUgbmV0d29ya1R5cGU6XCIpLmNvbmNhdChuLm5ldHdvcmtUeXBlKSksdChbITAsbi5uZXR3b3JrVHlwZV0pKX19KTtlbHNlIGlmKHdpbmRvdyYmd2luZG93LmZldGNoKWZldGNoKFwiXCIuY29uY2F0KGR1KCksXCIvL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9hc3NldHMvc3BlZWQueG1sP3JhbmRvbT1cIikuY29uY2F0KE1hdGgucmFuZG9tKCkpKS50aGVuKChmdW5jdGlvbihlKXtlLm9rP3QoWyEwLEl2XSk6dChbITEseXZdKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dChbITEseXZdKX0pKTtlbHNle3ZhciBvPW5ldyBYTUxIdHRwUmVxdWVzdCxyPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7S2kud2FybihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIucHJvYmUgZmV0Y2ggdGltZW91dC4gUHJvYmFibHkgbm8gbmV0d29yaywgcGxlYXNlIGNoZWNrIVwiKSksby5hYm9ydCgpLGUuX25ldHdvcmtUeXBlPXl2LHQoWyExLHl2XSl9KSxlLk1BWF9XQUlUX1RJTUUpO28ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PW8ucmVhZHlTdGF0ZSYmKGNsZWFyVGltZW91dChyKSwyMDA9PT1vLnN0YXR1c3x8MzA0PT09by5zdGF0dXM/KHRoaXMuX25ldHdvcmtUeXBlPUl2LHQoWyEwLEl2XSkpOihLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuY2xhc3NOYW1lLFwiLnByb2JlIGZldGNoIHN0YXR1czpcIikuY29uY2F0KG8uc3RhdHVzLFwiLiBQcm9iYWJseSBubyBuZXR3b3JrLCBwbGVhc2UgY2hlY2shXCIpKSx0aGlzLl9uZXR3b3JrVHlwZT15dix0KFshMSx5dl0pKSl9LG8ub3BlbihcIkdFVFwiLFwiXCIuY29uY2F0KGR1KCksXCIvL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9hc3NldHMvc3BlZWQueG1sP3JhbmRvbT1cIikuY29uY2F0KE1hdGgucmFuZG9tKCkpKSxvLnNlbmQoKX19KSl9fSx7a2V5OlwiZ2V0TmV0d29ya1R5cGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZXR3b3JrVHlwZX19XSksZX0oKSxTdj1DKChmdW5jdGlvbihlKXt2YXIgdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LG49XCJ+XCI7ZnVuY3Rpb24gbygpe31mdW5jdGlvbiByKGUsdCxuKXt0aGlzLmZuPWUsdGhpcy5jb250ZXh0PXQsdGhpcy5vbmNlPW58fCExfWZ1bmN0aW9uIGEoZSx0LG8sYSxzKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciBpPW5ldyByKG8sYXx8ZSxzKSx1PW4/bit0OnQ7cmV0dXJuIGUuX2V2ZW50c1t1XT9lLl9ldmVudHNbdV0uZm4/ZS5fZXZlbnRzW3VdPVtlLl9ldmVudHNbdV0saV06ZS5fZXZlbnRzW3VdLnB1c2goaSk6KGUuX2V2ZW50c1t1XT1pLGUuX2V2ZW50c0NvdW50KyspLGV9ZnVuY3Rpb24gcyhlLHQpezA9PS0tZS5fZXZlbnRzQ291bnQ/ZS5fZXZlbnRzPW5ldyBvOmRlbGV0ZSBlLl9ldmVudHNbdF19ZnVuY3Rpb24gaSgpe3RoaXMuX2V2ZW50cz1uZXcgbyx0aGlzLl9ldmVudHNDb3VudD0wfU9iamVjdC5jcmVhdGUmJihvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG51bGwpLChuZXcgbykuX19wcm90b19ffHwobj0hMSkpLGkucHJvdG90eXBlLmV2ZW50TmFtZXM9ZnVuY3Rpb24oKXt2YXIgZSxvLHI9W107aWYoMD09PXRoaXMuX2V2ZW50c0NvdW50KXJldHVybiByO2ZvcihvIGluIGU9dGhpcy5fZXZlbnRzKXQuY2FsbChlLG8pJiZyLnB1c2gobj9vLnNsaWNlKDEpOm8pO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP3IuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSkpOnJ9LGkucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdD1uP24rZTplLG89dGhpcy5fZXZlbnRzW3RdO2lmKCFvKXJldHVybltdO2lmKG8uZm4pcmV0dXJuW28uZm5dO2Zvcih2YXIgcj0wLGE9by5sZW5ndGgscz1uZXcgQXJyYXkoYSk7cjxhO3IrKylzW3JdPW9bcl0uZm47cmV0dXJuIHN9LGkucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bj9uK2U6ZSxvPXRoaXMuX2V2ZW50c1t0XTtyZXR1cm4gbz9vLmZuPzE6by5sZW5ndGg6MH0saS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlLHQsbyxyLGEscyl7dmFyIGk9bj9uK2U6ZTtpZighdGhpcy5fZXZlbnRzW2ldKXJldHVybiExO3ZhciB1LGMsbD10aGlzLl9ldmVudHNbaV0scD1hcmd1bWVudHMubGVuZ3RoO2lmKGwuZm4pe3N3aXRjaChsLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxsLmZuLHZvaWQgMCwhMCkscCl7Y2FzZSAxOnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0KSwhMDtjYXNlIDI6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQsdCksITA7Y2FzZSAzOnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0LHQsbyksITA7Y2FzZSA0OnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0LHQsbyxyKSwhMDtjYXNlIDU6cmV0dXJuIGwuZm4uY2FsbChsLmNvbnRleHQsdCxvLHIsYSksITA7Y2FzZSA2OnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0LHQsbyxyLGEscyksITB9Zm9yKGM9MSx1PW5ldyBBcnJheShwLTEpO2M8cDtjKyspdVtjLTFdPWFyZ3VtZW50c1tjXTtsLmZuLmFwcGx5KGwuY29udGV4dCx1KX1lbHNle3ZhciBkLGc9bC5sZW5ndGg7Zm9yKGM9MDtjPGc7YysrKXN3aXRjaChsW2NdLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxsW2NdLmZuLHZvaWQgMCwhMCkscCl7Y2FzZSAxOmxbY10uZm4uY2FsbChsW2NdLmNvbnRleHQpO2JyZWFrO2Nhc2UgMjpsW2NdLmZuLmNhbGwobFtjXS5jb250ZXh0LHQpO2JyZWFrO2Nhc2UgMzpsW2NdLmZuLmNhbGwobFtjXS5jb250ZXh0LHQsbyk7YnJlYWs7Y2FzZSA0OmxbY10uZm4uY2FsbChsW2NdLmNvbnRleHQsdCxvLHIpO2JyZWFrO2RlZmF1bHQ6aWYoIXUpZm9yKGQ9MSx1PW5ldyBBcnJheShwLTEpO2Q8cDtkKyspdVtkLTFdPWFyZ3VtZW50c1tkXTtsW2NdLmZuLmFwcGx5KGxbY10uY29udGV4dCx1KX19cmV0dXJuITB9LGkucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYSh0aGlzLGUsdCxuLCExKX0saS5wcm90b3R5cGUub25jZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGEodGhpcyxlLHQsbiwhMCl9LGkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCxvLHIpe3ZhciBhPW4/bitlOmU7aWYoIXRoaXMuX2V2ZW50c1thXSlyZXR1cm4gdGhpcztpZighdClyZXR1cm4gcyh0aGlzLGEpLHRoaXM7dmFyIGk9dGhpcy5fZXZlbnRzW2FdO2lmKGkuZm4paS5mbiE9PXR8fHImJiFpLm9uY2V8fG8mJmkuY29udGV4dCE9PW98fHModGhpcyxhKTtlbHNle2Zvcih2YXIgdT0wLGM9W10sbD1pLmxlbmd0aDt1PGw7dSsrKShpW3VdLmZuIT09dHx8ciYmIWlbdV0ub25jZXx8byYmaVt1XS5jb250ZXh0IT09bykmJmMucHVzaChpW3VdKTtjLmxlbmd0aD90aGlzLl9ldmVudHNbYV09MT09PWMubGVuZ3RoP2NbMF06YzpzKHRoaXMsYSl9cmV0dXJuIHRoaXN9LGkucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZT8odD1uP24rZTplLHRoaXMuX2V2ZW50c1t0XSYmcyh0aGlzLHQpKToodGhpcy5fZXZlbnRzPW5ldyBvLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXN9LGkucHJvdG90eXBlLm9mZj1pLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcixpLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1pLnByb3RvdHlwZS5vbixpLnByZWZpeGVkPW4saS5FdmVudEVtaXR0ZXI9aSxlLmV4cG9ydHM9aX0pKSxEdj1mdW5jdGlvbihlKXtpKG4sZSk7dmFyIHQ9XyhuKTtmdW5jdGlvbiBuKGUpe3ZhciByO3JldHVybiBvKHRoaXMsbiksKHI9dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJCaWdEYXRhQ2hhbm5lbE1vZHVsZVwiLHIuRklMRVRZUEU9e1NPVU5EOjIxMDYsRklMRToyMTA3LFZJREVPOjIxMTN9LHIuX2JkaF9kb3dubG9hZF9zZXJ2ZXI9XCJncm91cHRhbGsuYzJjLnFxLmNvbVwiLHIuX0JESEJpeklEPTEwMDAxLHIuX2F1dGhLZXk9XCJcIixyLl9leHBpcmVUaW1lPTAsci5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKE9tLkNPTlRFWFRfQTJLRVlfQU5EX1RJTllJRF9VUERBVEVELHIuX2dldEF1dGhLZXksaChyKSkscn1yZXR1cm4gYShuLFt7a2V5OlwiX2dldEF1dGhLZXlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6X2x9KS50aGVuKChmdW5jdGlvbih0KXt0LmRhdGEuYXV0aEtleSYmKGUuX2F1dGhLZXk9dC5kYXRhLmF1dGhLZXksZS5fZXhwaXJlVGltZT1wYXJzZUludCh0LmRhdGEuZXhwaXJlVGltZSkpfSkpfX0se2tleTpcIl9pc0Zyb21PbGRlclZlcnNpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hKCFlLmNvbnRlbnR8fDI9PT1lLmNvbnRlbnQuZG93bmxvYWRGbGFnKX19LHtrZXk6XCJwYXJzZUVsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZighV2koZSl8fCF0KXJldHVybltdO2Zvcih2YXIgbj1bXSxvPW51bGwscj0wO3I8ZS5sZW5ndGg7cisrKW89ZVtyXSx0aGlzLl9uZWVkUGFyc2Uobyk/bi5wdXNoKHRoaXMuX3BhcnNlRWxlbWVudChvLHQpKTpuLnB1c2goZVtyXSk7cmV0dXJuIG59fSx7a2V5OlwiX25lZWRQYXJzZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiFlLmNsb3VkQ3VzdG9tRGF0YSYmISghdGhpcy5faXNGcm9tT2xkZXJWZXJzaW9uKGUpfHxlLnR5cGUhPT1yby5NU0dfQVVESU8mJmUudHlwZSE9PXJvLk1TR19GSUxFJiZlLnR5cGUhPT1yby5NU0dfVklERU8pfX0se2tleTpcIl9wYXJzZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3N3aXRjaChlLnR5cGUpe2Nhc2Ugcm8uTVNHX0FVRElPOnJldHVybiB0aGlzLl9wYXJzZUF1ZGlvRWxlbWVudChlLHQpO2Nhc2Ugcm8uTVNHX0ZJTEU6cmV0dXJuIHRoaXMuX3BhcnNlRmlsZUVsZW1lbnQoZSx0KTtjYXNlIHJvLk1TR19WSURFTzpyZXR1cm4gdGhpcy5fcGFyc2VWaWRlb0VsZW1lbnQoZSx0KX19fSx7a2V5OlwiX3BhcnNlQXVkaW9FbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5jb250ZW50LnVybD10aGlzLl9nZW5BdWRpb1VybChlLmNvbnRlbnQudXVpZCx0KSxlfX0se2tleTpcIl9wYXJzZUZpbGVFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5jb250ZW50LnVybD10aGlzLl9nZW5GaWxlVXJsKGUuY29udGVudC51dWlkLHQsZS5jb250ZW50LmZpbGVOYW1lKSxlfX0se2tleTpcIl9wYXJzZVZpZGVvRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29udGVudC51cmw9dGhpcy5fZ2VuVmlkZW9VcmwoZS5jb250ZW50LnV1aWQsdCksZX19LHtrZXk6XCJfZ2VuQXVkaW9VcmxcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKFwiXCI9PT10aGlzLl9hdXRoS2V5KXJldHVybiBLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZ2VuQXVkaW9Vcmwgbm8gYXV0aEtleSFcIikpLFwiXCI7dmFyIG49dGhpcy5nZXRNb2R1bGUoWGMpLmdldFNES0FwcElEKCk7cmV0dXJuXCJodHRwczovL1wiLmNvbmNhdCh0aGlzLl9iZGhfZG93bmxvYWRfc2VydmVyLFwiL2Fzbi5jb20vc3RkZG93bmxvYWRfY29tbW9uX2ZpbGU/YXV0aGtleT1cIikuY29uY2F0KHRoaXMuX2F1dGhLZXksXCImYmlkPVwiKS5jb25jYXQodGhpcy5fQkRIQml6SUQsXCImc3ViYmlkPVwiKS5jb25jYXQobixcIiZmaWxlaWQ9XCIpLmNvbmNhdChlLFwiJmZpbGV0eXBlPVwiKS5jb25jYXQodGhpcy5GSUxFVFlQRS5TT1VORCxcIiZvcGVuaWQ9XCIpLmNvbmNhdCh0LFwiJnZlcj0wXCIpfX0se2tleTpcIl9nZW5GaWxlVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe2lmKFwiXCI9PT10aGlzLl9hdXRoS2V5KXJldHVybiBLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fZ2VuRmlsZVVybCBubyBhdXRoS2V5IVwiKSksXCJcIjtufHwobj1cIlwiLmNvbmNhdChNYXRoLmZsb29yKDFlNSpNYXRoLnJhbmRvbSgpKSxcIi1cIikuY29uY2F0KERhdGUubm93KCkpKTt2YXIgbz10aGlzLmdldE1vZHVsZShYYykuZ2V0U0RLQXBwSUQoKTtyZXR1cm5cImh0dHBzOi8vXCIuY29uY2F0KHRoaXMuX2JkaF9kb3dubG9hZF9zZXJ2ZXIsXCIvYXNuLmNvbS9zdGRkb3dubG9hZF9jb21tb25fZmlsZT9hdXRoa2V5PVwiKS5jb25jYXQodGhpcy5fYXV0aEtleSxcIiZiaWQ9XCIpLmNvbmNhdCh0aGlzLl9CREhCaXpJRCxcIiZzdWJiaWQ9XCIpLmNvbmNhdChvLFwiJmZpbGVpZD1cIikuY29uY2F0KGUsXCImZmlsZXR5cGU9XCIpLmNvbmNhdCh0aGlzLkZJTEVUWVBFLkZJTEUsXCImb3BlbmlkPVwiKS5jb25jYXQodCxcIiZ2ZXI9MCZmaWxlbmFtZT1cIikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChuKSl9fSx7a2V5OlwiX2dlblZpZGVvVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZihcIlwiPT09dGhpcy5fYXV0aEtleSlyZXR1cm4gS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2dlblZpZGVvVXJsIG5vIGF1dGhLZXkhXCIpKSxcIlwiO3ZhciBuPXRoaXMuZ2V0TW9kdWxlKFhjKS5nZXRTREtBcHBJRCgpO3JldHVyblwiaHR0cHM6Ly9cIi5jb25jYXQodGhpcy5fYmRoX2Rvd25sb2FkX3NlcnZlcixcIi9hc24uY29tL3N0ZGRvd25sb2FkX2NvbW1vbl9maWxlP2F1dGhrZXk9XCIpLmNvbmNhdCh0aGlzLl9hdXRoS2V5LFwiJmJpZD1cIikuY29uY2F0KHRoaXMuX0JESEJpeklELFwiJnN1YmJpZD1cIikuY29uY2F0KG4sXCImZmlsZWlkPVwiKS5jb25jYXQoZSxcIiZmaWxldHlwZT1cIikuY29uY2F0KHRoaXMuRklMRVRZUEUuVklERU8sXCImb3BlbmlkPVwiKS5jb25jYXQodCxcIiZ2ZXI9MFwiKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fYXV0aEtleT1cIlwiLHRoaXMuZXhwaXJlVGltZT0wfX1dKSxufShwbCksRXY9ZnVuY3Rpb24oZSl7aShyLGUpO3ZhciBuPV8ocik7ZnVuY3Rpb24gcihlKXt2YXIgdDtyZXR1cm4gbyh0aGlzLHIpLCh0PW4uY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiVXBsb2FkTW9kdWxlXCIsdC5USU1VcGxvYWRQbHVnaW49bnVsbCx0LnRpbVVwbG9hZFBsdWdpbj1udWxsLHQuQ09TU0RLPW51bGwsdC5fY29zVXBsb2FkTWV0aG9kPW51bGwsdC5leHBpcmVkVGltZUxpbWl0PTYwMCx0LmFwcGlkPTAsdC5idWNrZXROYW1lPVwiXCIsdC5jaVVybD1cIlwiLHQuZGlyZWN0b3J5PVwiXCIsdC5kb3dubG9hZFVybD1cIlwiLHQudXBsb2FkVXJsPVwiXCIsdC5yZWdpb249XCJhcC1zaGFuZ2hhaVwiLHQuY29zPW51bGwsdC5jb3NPcHRpb25zPXtzZWNyZXRJZDpcIlwiLHNlY3JldEtleTpcIlwiLHNlc3Npb25Ub2tlbjpcIlwiLGV4cGlyZWRUaW1lOjB9LHQudXBsb2FkRmlsZVR5cGU9XCJcIix0LmR1cmF0aW9uPTkwMCx0LnRyeUNvdW50PTAsdC5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKE9tLkNPTlRFWFRfQTJLRVlfQU5EX1RJTllJRF9VUERBVEVELHQuX2luaXQsaCh0KSksdH1yZXR1cm4gYShyLFt7a2V5OlwiX2luaXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5faW5pdFwiKSx0PXRoaXMuZ2V0TW9kdWxlKG9sKTtpZih0aGlzLlRJTVVwbG9hZFBsdWdpbj10LmdldFBsdWdpbihcInRpbS11cGxvYWQtcGx1Z2luXCIpLHRoaXMuVElNVXBsb2FkUGx1Z2luKXRoaXMuX2luaXRVcGxvYWRlck1ldGhvZCgpO2Vsc2V7dmFyIG49YWk/XCJjb3Mtd3gtc2RrXCI6XCJjb3MtanMtc2RrXCI7dGhpcy5DT1NTREs9dC5nZXRQbHVnaW4obiksdGhpcy5DT1NTREs/KHRoaXMuX2dldEF1dGhvcml6YXRpb25LZXkoKSxLaS53YXJuKFwiXCIuY29uY2F0KGUsXCIgdjIuOS4y6LW35o6o6I2Q5L2/55SoIHRpbS11cGxvYWQtcGx1Z2luIOS7o+abvyBcIikuY29uY2F0KG4sXCLvvIzkuIrkvKDmm7Tlv6vmm7TlronlhajjgILor6bnu4bor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI3JlZ2lzdGVyUGx1Z2luXCIpKSk6S2kud2FybihcIlwiLmNvbmNhdChlLFwiIOayoeacieajgOa1i+WIsOS4iuS8oOaPkuS7tu+8jOWwhuaXoOazleWPkemAgeWbvueJh+OAgemfs+mikeOAgeinhumikeOAgeaWh+S7tuetieexu+Wei+eahOa2iOaBr+OAguivpue7huivt+WPguiAgyBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWwjcmVnaXN0ZXJQbHVnaW5cIikpfX19LHtrZXk6XCJfZ2V0QXV0aG9yaXphdGlvbktleVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBqZChuZyksbj1NYXRoLmNlaWwoRGF0ZS5ub3coKS8xZTMpO3RoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnBwLHJlcXVlc3REYXRhOntkdXJhdGlvbjp0aGlzLmV4cGlyZWRUaW1lTGltaXR9fSkudGhlbigoZnVuY3Rpb24obyl7dmFyIHI9by5kYXRhO0tpLmxvZyhcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2dldEF1dGhvcml6YXRpb25LZXkgb2suIGRhdGE6XCIpLHIpO3ZhciBhPXIuZXhwaXJlZFRpbWUtbjt0LnNldE1lc3NhZ2UoXCJyZXF1ZXN0SWQ6XCIuY29uY2F0KHIucmVxdWVzdElkLFwiIHJlcXVlc3RUaW1lOlwiKS5jb25jYXQobixcIiBleHBpcmVkVGltZTpcIikuY29uY2F0KHIuZXhwaXJlZFRpbWUsXCIgZGlmZjpcIikuY29uY2F0KGEsXCJzXCIpKS5zZXROZXR3b3JrVHlwZShlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLCFhaSYmci5yZWdpb24mJihlLnJlZ2lvbj1yLnJlZ2lvbiksZS5hcHBpZD1yLmFwcGlkLGUuYnVja2V0TmFtZT1yLmJ1Y2tldE5hbWUsZS5jaVVybD1yLmNpVXJsLGUuZGlyZWN0b3J5PXIuZGlyZWN0b3J5LGUuZG93bmxvYWRVcmw9ci5kb3dubG9hZFVybCxlLnVwbG9hZFVybD1yLnVwbG9hZFVybCxlLmNvc09wdGlvbnM9e3NlY3JldElkOnIuc2VjcmV0SWQsc2VjcmV0S2V5OnIuc2VjcmV0S2V5LHNlc3Npb25Ub2tlbjpyLnNlc3Npb25Ub2tlbixleHBpcmVkVGltZTpyLmV4cGlyZWRUaW1lfSxLaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLl9nZXRBdXRob3JpemF0aW9uS2V5IG9rLiByZWdpb246XCIpLmNvbmNhdChlLnJlZ2lvbixcIiBidWNrZXROYW1lOlwiKS5jb25jYXQoZS5idWNrZXROYW1lKSksZS5faW5pdFVwbG9hZGVyTWV0aG9kKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKG4pe2UucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89bShlLDIpLHI9b1swXSxhPW9bMV07dC5zZXRFcnJvcihuLHIsYSkuZW5kKCl9KSksS2kud2FybihcIlwiLmNvbmNhdChlLl9jbGFzc05hbWUsXCIuX2dldEF1dGhvcml6YXRpb25LZXkgZmFpbGVkLiBlcnJvcjpcIiksbil9KSl9fSx7a2V5OlwiX2dldENvc1ByZVNpZ1VybFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2dldENvc1ByZVNpZ1VybFwiKSxvPU1hdGguY2VpbChEYXRlLm5vdygpLzFlMykscj1uZXcgamQob2cpO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpkcCxyZXF1ZXN0RGF0YTp7ZmlsZVR5cGU6ZS5maWxlVHlwZSxmaWxlTmFtZTplLmZpbGVOYW1lLHVwbG9hZE1ldGhvZDplLnVwbG9hZE1ldGhvZCxkdXJhdGlvbjplLmR1cmF0aW9ufX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3QudHJ5Q291bnQ9MDt2YXIgYT1lLmRhdGF8fHt9LHM9YS5leHBpcmVkVGltZS1vO3JldHVybiBLaS5sb2coXCJcIi5jb25jYXQobixcIiBvay4gZGF0YTpcIiksYSksci5zZXRNZXNzYWdlKFwicmVxdWVzdElkOlwiLmNvbmNhdChhLnJlcXVlc3RJZCxcIiBleHBpcmVkVGltZTpcIikuY29uY2F0KGEuZXhwaXJlZFRpbWUsXCIgZGlmZjpcIikuY29uY2F0KHMsXCJzXCIpKS5zZXROZXR3b3JrVHlwZSh0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLGF9KSkuY2F0Y2goKGZ1bmN0aW9uKG8pe3JldHVybi0xPT09by5jb2RlJiYoby5jb2RlPVRwLkNPU19HRVRfU0lHX0ZBSUwpLHQucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9bShlLDIpLG49dFswXSxhPXRbMV07ci5zZXRFcnJvcihvLG4sYSkuZW5kKCl9KSksS2kud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gZXJyb3I6XCIpLG8pLHQudHJ5Q291bnQ8MT8odC50cnlDb3VudCsrLHQuX2dldENvc1ByZVNpZ1VybChlKSk6KHQudHJ5Q291bnQ9MCxjbSh7Y29kZTpUcC5DT1NfR0VUX1NJR19GQUlMLG1lc3NhZ2U6THB9KSl9KSl9fSx7a2V5OlwiX2luaXRVcGxvYWRlck1ldGhvZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLlRJTVVwbG9hZFBsdWdpbilyZXR1cm4gdGhpcy50aW1VcGxvYWRQbHVnaW49bmV3IHRoaXMuVElNVXBsb2FkUGx1Z2luLHZvaWQodGhpcy5fY29zVXBsb2FkTWV0aG9kPWZ1bmN0aW9uKHQsbil7ZS50aW1VcGxvYWRQbHVnaW4udXBsb2FkRmlsZSh0LG4pfSk7dGhpcy5hcHBpZCYmKHRoaXMuY29zPWFpP25ldyB0aGlzLkNPU1NESyh7Rm9yY2VQYXRoU3R5bGU6ITAsZ2V0QXV0aG9yaXphdGlvbjp0aGlzLl9nZXRBdXRob3JpemF0aW9uLmJpbmQodGhpcyl9KTpuZXcgdGhpcy5DT1NTREsoe2dldEF1dGhvcml6YXRpb246dGhpcy5fZ2V0QXV0aG9yaXphdGlvbi5iaW5kKHRoaXMpfSksdGhpcy5fY29zVXBsb2FkTWV0aG9kPWFpP2Z1bmN0aW9uKHQsbil7ZS5jb3MucG9zdE9iamVjdCh0LG4pfTpmdW5jdGlvbih0LG4pe2UuY29zLnVwbG9hZEZpbGVzKHQsbil9KX19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLkNPU1NESyYmKHRoaXMuVElNVXBsb2FkUGx1Z2lufHx0aGlzLmlzTG9nZ2VkSW4oKSYmZSU2MD09MCYmTWF0aC5jZWlsKERhdGUubm93KCkvMWUzKT49dGhpcy5jb3NPcHRpb25zLmV4cGlyZWRUaW1lLTEyMCYmdGhpcy5fZ2V0QXV0aG9yaXphdGlvbktleSgpKX19LHtrZXk6XCJfZ2V0QXV0aG9yaXphdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dCh7VG1wU2VjcmV0SWQ6dGhpcy5jb3NPcHRpb25zLnNlY3JldElkLFRtcFNlY3JldEtleTp0aGlzLmNvc09wdGlvbnMuc2VjcmV0S2V5LFhDb3NTZWN1cml0eVRva2VuOnRoaXMuY29zT3B0aW9ucy5zZXNzaW9uVG9rZW4sRXhwaXJlZFRpbWU6dGhpcy5jb3NPcHRpb25zLmV4cGlyZWRUaW1lfSl9fSx7a2V5OlwidXBsb2FkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoITA9PT1lLmdldFJlbGF5RmxhZygpKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt2YXIgdD10aGlzLmdldE1vZHVsZShsbCk7c3dpdGNoKGUudHlwZSl7Y2FzZSByby5NU0dfSU1BR0U6cmV0dXJuIHQuYWRkVG90YWxDb3VudChGZCksdGhpcy5fdXBsb2FkSW1hZ2UoZSk7Y2FzZSByby5NU0dfRklMRTpyZXR1cm4gdC5hZGRUb3RhbENvdW50KEZkKSx0aGlzLl91cGxvYWRGaWxlKGUpO2Nhc2Ugcm8uTVNHX0FVRElPOnJldHVybiB0LmFkZFRvdGFsQ291bnQoRmQpLHRoaXMuX3VwbG9hZEF1ZGlvKGUpO2Nhc2Ugcm8uTVNHX1ZJREVPOnJldHVybiB0LmFkZFRvdGFsQ291bnQoRmQpLHRoaXMuX3VwbG9hZFZpZGVvKGUpO2RlZmF1bHQ6cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfX19LHtrZXk6XCJfdXBsb2FkSW1hZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLmdldE1vZHVsZShIYyksbz1lLmdldEVsZW1lbnRzKClbMF0scj1uLmdldE1lc3NhZ2VPcHRpb25CeUlEKGUuSUQpO3JldHVybiB0aGlzLmRvVXBsb2FkSW1hZ2Uoe2ZpbGU6ci5wYXlsb2FkLmZpbGUsdG86ci50byxvblByb2dyZXNzOmZ1bmN0aW9uKGUpe2lmKG8udXBkYXRlUGVyY2VudChlKSxRaShyLm9uUHJvZ3Jlc3MpKXRyeXtyLm9uUHJvZ3Jlc3MoZSl9Y2F0Y2godCl7cmV0dXJuIGNtKHtjb2RlOlRwLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUixtZXNzYWdlOkdwfSl9fX0pLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciByPW4ubG9jYXRpb24sYT1uLmZpbGVUeXBlLHM9bi5maWxlU2l6ZSxpPW4ud2lkdGgsdT1uLmhlaWdodCxjPWd1KHIpO28udXBkYXRlSW1hZ2VGb3JtYXQoYSk7dmFyIGw9RHUoe29yaWdpblVybDpjLG9yaWdpbldpZHRoOmksb3JpZ2luSGVpZ2h0OnUsbWluOjE5OH0pLHA9RHUoe29yaWdpblVybDpjLG9yaWdpbldpZHRoOmksb3JpZ2luSGVpZ2h0OnUsbWluOjcyMH0pO3JldHVybiBvLnVwZGF0ZUltYWdlSW5mb0FycmF5KFt7c2l6ZTpzLHVybDpjLHdpZHRoOmksaGVpZ2h0OnV9LHQoe30scCksdCh7fSxsKV0pLGV9KSl9fSx7a2V5OlwiX3VwbG9hZEZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE1vZHVsZShIYyksbj1lLmdldEVsZW1lbnRzKClbMF0sbz10LmdldE1lc3NhZ2VPcHRpb25CeUlEKGUuSUQpO3JldHVybiB0aGlzLmRvVXBsb2FkRmlsZSh7ZmlsZTpvLnBheWxvYWQuZmlsZSx0bzpvLnRvLG9uUHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7aWYobi51cGRhdGVQZXJjZW50KGUpLFFpKG8ub25Qcm9ncmVzcykpdHJ5e28ub25Qcm9ncmVzcyhlKX1jYXRjaCh0KXtyZXR1cm4gY20oe2NvZGU6VHAuTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SLG1lc3NhZ2U6R3B9KX19fSkudGhlbigoZnVuY3Rpb24odCl7dmFyIG89dC5sb2NhdGlvbixyPWd1KG8pO3JldHVybiBuLnVwZGF0ZUZpbGVVcmwociksZX0pKX19LHtrZXk6XCJfdXBsb2FkQXVkaW9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE1vZHVsZShIYyksbj1lLmdldEVsZW1lbnRzKClbMF0sbz10LmdldE1lc3NhZ2VPcHRpb25CeUlEKGUuSUQpO3JldHVybiB0aGlzLmRvVXBsb2FkQXVkaW8oe2ZpbGU6by5wYXlsb2FkLmZpbGUsdG86by50byxvblByb2dyZXNzOmZ1bmN0aW9uKGUpe2lmKG4udXBkYXRlUGVyY2VudChlKSxRaShvLm9uUHJvZ3Jlc3MpKXRyeXtvLm9uUHJvZ3Jlc3MoZSl9Y2F0Y2godCl7cmV0dXJuIGNtKHtjb2RlOlRwLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUixtZXNzYWdlOkdwfSl9fX0pLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBvPXQubG9jYXRpb24scj1ndShvKTtyZXR1cm4gbi51cGRhdGVBdWRpb1VybChyKSxlfSkpfX0se2tleTpcIl91cGxvYWRWaWRlb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TW9kdWxlKEhjKSxuPWUuZ2V0RWxlbWVudHMoKVswXSxvPXQuZ2V0TWVzc2FnZU9wdGlvbkJ5SUQoZS5JRCk7cmV0dXJuIHRoaXMuZG9VcGxvYWRWaWRlbyh7ZmlsZTpvLnBheWxvYWQuZmlsZSx0bzpvLnRvLG9uUHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7aWYobi51cGRhdGVQZXJjZW50KGUpLFFpKG8ub25Qcm9ncmVzcykpdHJ5e28ub25Qcm9ncmVzcyhlKX1jYXRjaCh0KXtyZXR1cm4gY20oe2NvZGU6VHAuTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SLG1lc3NhZ2U6R3B9KX19fSkudGhlbigoZnVuY3Rpb24odCl7dmFyIG89Z3UodC5sb2NhdGlvbik7cmV0dXJuIG4udXBkYXRlVmlkZW9VcmwobyksZX0pKX19LHtrZXk6XCJkb1VwbG9hZEltYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUuZmlsZSlyZXR1cm4gY20oe2NvZGU6VHAuTUVTU0FHRV9JTUFHRV9TRUxFQ1RfRklMRV9GSVJTVCxtZXNzYWdlOnFwfSk7dmFyIHQ9dGhpcy5fY2hlY2tJbWFnZVR5cGUoZS5maWxlKTtpZighMCE9PXQpcmV0dXJuIHQ7dmFyIG49dGhpcy5fY2hlY2tJbWFnZVNpemUoZS5maWxlKTtpZighMCE9PW4pcmV0dXJuIG47dmFyIG89bnVsbDtyZXR1cm4gdGhpcy5fc2V0VXBsb2FkRmlsZVR5cGUod20pLHRoaXMudXBsb2FkQnlDT1MoZSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIG89ZSx0PVwiaHR0cHM6Ly9cIi5jb25jYXQoZS5sb2NhdGlvbiksYWk/bmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsbil7aWkuZ2V0SW1hZ2VJbmZvKHtzcmM6dCxzdWNjZXNzOmZ1bmN0aW9uKHQpe2Uoe3dpZHRoOnQud2lkdGgsaGVpZ2h0OnQuaGVpZ2h0fSl9LGZhaWw6ZnVuY3Rpb24oKXtlKHt3aWR0aDowLGhlaWdodDowfSl9fSl9KSk6TWkmJjk9PT15aT9Qcm9taXNlLnJlc29sdmUoe3dpZHRoOjAsaGVpZ2h0OjB9KTpuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxuKXt2YXIgbz1uZXcgSW1hZ2U7by5vbmxvYWQ9ZnVuY3Rpb24oKXtlKHt3aWR0aDp0aGlzLndpZHRoLGhlaWdodDp0aGlzLmhlaWdodH0pLG89bnVsbH0sby5vbmVycm9yPWZ1bmN0aW9uKCl7ZSh7d2lkdGg6MCxoZWlnaHQ6MH0pLG89bnVsbH0sby5zcmM9dH0pKTt2YXIgdH0pKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gby53aWR0aD1lLndpZHRoLG8uaGVpZ2h0PWUuaGVpZ2h0LFByb21pc2UucmVzb2x2ZShvKX0pKX19LHtrZXk6XCJfY2hlY2tJbWFnZVR5cGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiO3JldHVybiB0PWFpP2UudXJsLnNsaWNlKGUudXJsLmxhc3RJbmRleE9mKFwiLlwiKSsxKTplLmZpbGVzWzBdLm5hbWUuc2xpY2UoZS5maWxlc1swXS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSsxKSxSbS5pbmRleE9mKHQudG9Mb3dlckNhc2UoKSk+PTB8fGNtKHtjb2RlOlRwLk1FU1NBR0VfSU1BR0VfVFlQRVNfTElNSVQsbWVzc2FnZTp4cH0pfX0se2tleTpcIl9jaGVja0ltYWdlU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PTA7cmV0dXJuIDA9PT0odD1haT9lLnNpemU6ZS5maWxlc1swXS5zaXplKT9jbSh7Y29kZTpUcC5NRVNTQUdFX0ZJTEVfSVNfRU1QVFksbWVzc2FnZTpcIlwiLmNvbmNhdChQcCl9KTp0PDIwOTcxNTIwfHxjbSh7Y29kZTpUcC5NRVNTQUdFX0lNQUdFX1NJWkVfTElNSVQsbWVzc2FnZTpcIlwiLmNvbmNhdChWcCl9KX19LHtrZXk6XCJkb1VwbG9hZEZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1udWxsO3JldHVybiBlLmZpbGU/ZS5maWxlLmZpbGVzWzBdLnNpemU+MTA0ODU3NjAwP2NtKHQ9e2NvZGU6VHAuTUVTU0FHRV9GSUxFX1NJWkVfTElNSVQsbWVzc2FnZTpXcH0pOjA9PT1lLmZpbGUuZmlsZXNbMF0uc2l6ZT8odD17Y29kZTpUcC5NRVNTQUdFX0ZJTEVfSVNfRU1QVFksbWVzc2FnZTpcIlwiLmNvbmNhdChQcCl9LGNtKHQpKToodGhpcy5fc2V0VXBsb2FkRmlsZVR5cGUoVW0pLHRoaXMudXBsb2FkQnlDT1MoZSkpOmNtKHQ9e2NvZGU6VHAuTUVTU0FHRV9GSUxFX1NFTEVDVF9GSUxFX0ZJUlNULG1lc3NhZ2U6enB9KX19LHtrZXk6XCJkb1VwbG9hZFZpZGVvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmlsZS52aWRlb0ZpbGUuc2l6ZT4xMDQ4NTc2MDA/Y20oe2NvZGU6VHAuTUVTU0FHRV9WSURFT19TSVpFX0xJTUlULG1lc3NhZ2U6XCJcIi5jb25jYXQoanApfSk6MD09PWUuZmlsZS52aWRlb0ZpbGUuc2l6ZT9jbSh7Y29kZTpUcC5NRVNTQUdFX0ZJTEVfSVNfRU1QVFksbWVzc2FnZTpcIlwiLmNvbmNhdChQcCl9KTotMT09PWJtLmluZGV4T2YoZS5maWxlLnZpZGVvRmlsZS50eXBlKT9jbSh7Y29kZTpUcC5NRVNTQUdFX1ZJREVPX1RZUEVTX0xJTUlULG1lc3NhZ2U6XCJcIi5jb25jYXQoJHApfSk6KHRoaXMuX3NldFVwbG9hZEZpbGVUeXBlKFBtKSxhaT90aGlzLmhhbmRsZVZpZGVvVXBsb2FkKHtmaWxlOmUuZmlsZS52aWRlb0ZpbGUsb25Qcm9ncmVzczplLm9uUHJvZ3Jlc3N9KTpzaT90aGlzLmhhbmRsZVZpZGVvVXBsb2FkKGUpOnZvaWQgMCl9fSx7a2V5OlwiaGFuZGxlVmlkZW9VcGxvYWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixvKXt0LnVwbG9hZEJ5Q09TKGUpLnRoZW4oKGZ1bmN0aW9uKGUpe24oZSl9KSkuY2F0Y2goKGZ1bmN0aW9uKCl7dC51cGxvYWRCeUNPUyhlKS50aGVuKChmdW5jdGlvbihlKXtuKGUpfSkpLmNhdGNoKChmdW5jdGlvbigpe28obmV3IGFtKHtjb2RlOlRwLk1FU1NBR0VfVklERU9fVVBMT0FEX0ZBSUwsbWVzc2FnZTpIcH0pKX0pKX0pKX0pKX19LHtrZXk6XCJkb1VwbG9hZEF1ZGlvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmlsZT9lLmZpbGUuc2l6ZT4yMDk3MTUyMD9jbShuZXcgYW0oe2NvZGU6VHAuTUVTU0FHRV9BVURJT19TSVpFX0xJTUlULG1lc3NhZ2U6XCJcIi5jb25jYXQoQnApfSkpOjA9PT1lLmZpbGUuc2l6ZT9jbShuZXcgYW0oe2NvZGU6VHAuTUVTU0FHRV9GSUxFX0lTX0VNUFRZLG1lc3NhZ2U6XCJcIi5jb25jYXQoUHApfSkpOih0aGlzLl9zZXRVcGxvYWRGaWxlVHlwZShHbSksdGhpcy51cGxvYWRCeUNPUyhlKSk6Y20obmV3IGFtKHtjb2RlOlRwLk1FU1NBR0VfQVVESU9fVVBMT0FEX0ZBSUwsbWVzc2FnZTpLcH0pKX19LHtrZXk6XCJ1cGxvYWRCeUNPU1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIudXBsb2FkQnlDT1NcIik7aWYoIVFpKHRoaXMuX2Nvc1VwbG9hZE1ldGhvZCkpcmV0dXJuIEtpLndhcm4oXCJcIi5jb25jYXQobixcIiDmsqHmnInmo4DmtYvliLDkuIrkvKDmj5Lku7bvvIzlsIbml6Dms5Xlj5HpgIHlm77niYfjgIHpn7PpopHjgIHop4bpopHjgIHmlofku7bnrYnnsbvlnovnmoTmtojmga/jgILor6bnu4bor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL1NESy5odG1sI3JlZ2lzdGVyUGx1Z2luXCIpKSxjbSh7Y29kZTpUcC5DT1NfVU5ERVRFQ1RFRCxtZXNzYWdlOk9wfSk7aWYodGhpcy50aW1VcGxvYWRQbHVnaW4pcmV0dXJuIHRoaXMuX3VwbG9hZFdpdGhQcmVTaWdVcmwoZSk7dmFyIG89bmV3IGpkKHJnKSxyPURhdGUubm93KCksYT1haT9lLmZpbGU6ZS5maWxlLmZpbGVzWzBdO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocyxpKXt2YXIgdT1haT90Ll9jcmVhdGVDb3NPcHRpb25zV1hNaW5pQXBwKGUpOnQuX2NyZWF0ZUNvc09wdGlvbnNXZWIoZSksYz10O3QuX2Nvc1VwbG9hZE1ldGhvZCh1LChmdW5jdGlvbihlLHUpe3ZhciBsPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodSl7aWYoZXx8V2kodS5maWxlcykmJnUuZmlsZXNbMF0uZXJyb3Ipe3ZhciBwPW5ldyBhbSh7Y29kZTpUcC5NRVNTQUdFX0ZJTEVfVVBMT0FEX0ZBSUwsbWVzc2FnZTpZcH0pO3JldHVybiBvLnNldEVycm9yKHAsITAsdC5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQobixcIiBmYWlsZWQuIGVycm9yOlwiKSx1LmZpbGVzWzBdLmVycm9yKSw0MDM9PT11LmZpbGVzWzBdLmVycm9yLnN0YXR1c0NvZGUmJihLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBjb3MgQWNjZXNzS2V5SWQgd2FzIGludmFsaWQsIHJlZ2FpbiBhdXRoIGtleSFcIikpLHQuX2dldEF1dGhvcml6YXRpb25LZXkoKSksdm9pZCBpKHApfWwuZmlsZU5hbWU9YS5uYW1lLGwuZmlsZVNpemU9YS5zaXplLGwuZmlsZVR5cGU9YS50eXBlLnNsaWNlKGEudHlwZS5pbmRleE9mKFwiL1wiKSsxKS50b0xvd2VyQ2FzZSgpLGwubG9jYXRpb249YWk/dS5Mb2NhdGlvbjp1LmZpbGVzWzBdLmRhdGEuTG9jYXRpb247dmFyIGQ9RGF0ZS5ub3coKS1yLGc9Yy5fZm9ybWF0RmlsZVNpemUoYS5zaXplKSxoPWMuX2Zvcm1hdFNwZWVkKDFlMyphLnNpemUvZCksZj1cInNpemU6XCIuY29uY2F0KGcsXCIgdGltZTpcIikuY29uY2F0KGQsXCJtcyBzcGVlZDpcIikuY29uY2F0KGgpO0tpLmxvZyhcIlwiLmNvbmNhdChuLFwiIHN1Y2Nlc3MuIG5hbWU6XCIpLmNvbmNhdChhLm5hbWUsXCIgXCIpLmNvbmNhdChmKSkscyhsKTt2YXIgXz10LmdldE1vZHVsZShsbCk7cmV0dXJuIF8uYWRkQ29zdChGZCxkKSxfLmFkZEZpbGVTaXplKEZkLGEuc2l6ZSksdm9pZCBvLnNldE5ldHdvcmtUeXBlKHQuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShmKS5lbmQoKX12YXIgbT1uZXcgYW0oe2NvZGU6VHAuTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMLG1lc3NhZ2U6WXB9KTtvLnNldEVycm9yKG0sITAsYy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS53YXJuKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBlcnJvcjpcIiksZSksNDAzPT09ZS5zdGF0dXNDb2RlJiYoS2kud2FybihcIlwiLmNvbmNhdChuLFwiIGZhaWxlZC4gY29zIEFjY2Vzc0tleUlkIHdhcyBpbnZhbGlkLCByZWdhaW4gYXV0aCBrZXkhXCIpKSx0Ll9nZXRBdXRob3JpemF0aW9uS2V5KCkpLGkobSl9KSl9KSl9fSx7a2V5OlwiX3VwbG9hZFdpdGhQcmVTaWdVcmxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl91cGxvYWRXaXRoUHJlU2lnVXJsXCIpLG89YWk/ZS5maWxlOmUuZmlsZS5maWxlc1swXTtyZXR1cm4gdGhpcy5fY3JlYXRlQ29zT3B0aW9uc1ByZVNpZ1VybChlKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHIsYSl7dmFyIHM9bmV3IGpkKHJnKTtLaS50aW1lKExkKSx0Ll9jb3NVcGxvYWRNZXRob2QoZSwoZnVuY3Rpb24oZSxpKXt2YXIgdT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKGV8fDQwMz09PWkuc3RhdHVzQ29kZSl7dmFyIGM9bmV3IGFtKHtjb2RlOlRwLk1FU1NBR0VfRklMRV9VUExPQURfRkFJTCxtZXNzYWdlOllwfSk7cmV0dXJuIHMuc2V0RXJyb3IoYywhMCx0LmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdChuLFwiIGZhaWxlZCwgZXJyb3I6XCIpLGUpLHZvaWQgYShjKX12YXIgbD1pLmRhdGEubG9jYXRpb258fFwiXCI7MCE9PWwuaW5kZXhPZihcImh0dHBzOi8vXCIpJiYwIT09bC5pbmRleE9mKFwiaHR0cDovL1wiKXx8KGw9bC5zcGxpdChcIi8vXCIpWzFdKSx1LmZpbGVOYW1lPW8ubmFtZSx1LmZpbGVTaXplPW8uc2l6ZSx1LmZpbGVUeXBlPW8udHlwZS5zbGljZShvLnR5cGUuaW5kZXhPZihcIi9cIikrMSkudG9Mb3dlckNhc2UoKSx1LmxvY2F0aW9uPWw7dmFyIHA9S2kudGltZUVuZChMZCksZD10Ll9mb3JtYXRGaWxlU2l6ZShvLnNpemUpLGc9dC5fZm9ybWF0U3BlZWQoMWUzKm8uc2l6ZS9wKSxoPVwic2l6ZTpcIi5jb25jYXQoZCxcIix0aW1lOlwiKS5jb25jYXQocCxcIm1zLHNwZWVkOlwiKS5jb25jYXQoZyk7S2kubG9nKFwiXCIuY29uY2F0KG4sXCIgc3VjY2VzcyBuYW1lOlwiKS5jb25jYXQoby5uYW1lLFwiLFwiKS5jb25jYXQoaCkpLHMuc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGgpLmVuZCgpO3ZhciBmPXQuZ2V0TW9kdWxlKGxsKTtmLmFkZENvc3QoRmQscCksZi5hZGRGaWxlU2l6ZShGZCxvLnNpemUpLHIodSl9KSl9KSl9KSl9fSx7a2V5OlwiX2Zvcm1hdEZpbGVTaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU8MTAyND9lK1wiQlwiOmU8MTA0ODU3Nj9NYXRoLmZsb29yKGUvMTAyNCkrXCJLQlwiOk1hdGguZmxvb3IoZS8xMDQ4NTc2KStcIk1CXCJ9fSx7a2V5OlwiX2Zvcm1hdFNwZWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU8PTEwNDg1NzY/QXUoZS8xMDI0LDEpK1wiS0Ivc1wiOkF1KGUvMTA0ODU3NiwxKStcIk1CL3NcIn19LHtrZXk6XCJfY3JlYXRlQ29zT3B0aW9uc1dlYlwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TXlVc2VySUQoKSxuPXRoaXMuX2dlbkZpbGVOYW1lKHQsZS50byxlLmZpbGUuZmlsZXNbMF0ubmFtZSk7cmV0dXJue2ZpbGVzOlt7QnVja2V0OlwiXCIuY29uY2F0KHRoaXMuYnVja2V0TmFtZSxcIi1cIikuY29uY2F0KHRoaXMuYXBwaWQpLFJlZ2lvbjp0aGlzLnJlZ2lvbixLZXk6XCJcIi5jb25jYXQodGhpcy5kaXJlY3RvcnksXCIvXCIpLmNvbmNhdChuKSxCb2R5OmUuZmlsZS5maWxlc1swXX1dLFNsaWNlU2l6ZToxMDQ4NTc2LG9uUHJvZ3Jlc3M6ZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vblByb2dyZXNzKXRyeXtlLm9uUHJvZ3Jlc3ModC5wZXJjZW50KX1jYXRjaChuKXtLaS53YXJuKFwib25Qcm9ncmVzcyBjYWxsYmFjayBlcnJvcjpcIixuKX19LG9uRmlsZUZpbmlzaDpmdW5jdGlvbihlLHQsbil7fX19fSx7a2V5OlwiX2NyZWF0ZUNvc09wdGlvbnNXWE1pbmlBcHBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE15VXNlcklEKCksbj10aGlzLl9nZW5GaWxlTmFtZSh0LGUudG8sZS5maWxlLm5hbWUpLG89ZS5maWxlLnVybDtyZXR1cm57QnVja2V0OlwiXCIuY29uY2F0KHRoaXMuYnVja2V0TmFtZSxcIi1cIikuY29uY2F0KHRoaXMuYXBwaWQpLFJlZ2lvbjp0aGlzLnJlZ2lvbixLZXk6XCJcIi5jb25jYXQodGhpcy5kaXJlY3RvcnksXCIvXCIpLmNvbmNhdChuKSxGaWxlUGF0aDpvLG9uUHJvZ3Jlc3M6ZnVuY3Rpb24odCl7aWYoS2kubG9nKEpTT04uc3RyaW5naWZ5KHQpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uUHJvZ3Jlc3MpdHJ5e2Uub25Qcm9ncmVzcyh0LnBlcmNlbnQpfWNhdGNoKG4pe0tpLndhcm4oXCJvblByb2dyZXNzIGNhbGxiYWNrIGVycm9yOlwiLG4pfX19fX0se2tleTpcIl9jcmVhdGVDb3NPcHRpb25zUHJlU2lnVXJsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiXCIsbz1cIlwiLHI9MDtyZXR1cm4gYWk/KG49dGhpcy5fZ2VuRmlsZU5hbWUoZS5maWxlLm5hbWUpLG89ZS5maWxlLnVybCxyPTEpOihuPXRoaXMuX2dlbkZpbGVOYW1lKFwiXCIuY29uY2F0KGl1KDk5OTk5OSkpKSxvPWUuZmlsZS5maWxlc1swXSxyPTApLHRoaXMuX2dldENvc1ByZVNpZ1VybCh7ZmlsZVR5cGU6dGhpcy51cGxvYWRGaWxlVHlwZSxmaWxlTmFtZTpuLHVwbG9hZE1ldGhvZDpyLGR1cmF0aW9uOnRoaXMuZHVyYXRpb259KS50aGVuKChmdW5jdGlvbihyKXt2YXIgYT1yLnVwbG9hZFVybCxzPXIuZG93bmxvYWRVcmw7cmV0dXJue3VybDphLGZpbGVUeXBlOnQudXBsb2FkRmlsZVR5cGUsZmlsZU5hbWU6bixyZXNvdXJjZXM6byxkb3dubG9hZFVybDpzLG9uUHJvZ3Jlc3M6ZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vblByb2dyZXNzKXRyeXtlLm9uUHJvZ3Jlc3ModC5wZXJjZW50KX1jYXRjaChuKXtLaS53YXJuKFwib25Qcm9ncmVzcyBjYWxsYmFjayBlcnJvcjpcIixuKSxLaS5lcnJvcihuKX19fX0pKX19LHtrZXk6XCJfZ2VuRmlsZU5hbWVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm5cIlwiLmNvbmNhdChUdSgpLFwiLVwiKS5jb25jYXQoZSl9fSx7a2V5OlwiX3NldFVwbG9hZEZpbGVUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy51cGxvYWRGaWxlVHlwZT1lfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKX19XSkscn0ocGwpLEN2PVtcImRvd25sb2FkS2V5XCIsXCJwYkRvd25sb2FkS2V5XCIsXCJtZXNzYWdlTGlzdFwiXSxBdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX2NsYXNzTmFtZT1cIk1lcmdlck1lc3NhZ2VIYW5kbGVyXCIsdGhpcy5fbWVzc2FnZU1vZHVsZT10fXJldHVybiBhKGUsW3trZXk6XCJ1cGxvYWRNZXJnZXJNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO0tpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi51cGxvYWRNZXJnZXJNZXNzYWdlIG1lc3NhZ2U6XCIpLGUsXCJtZXNzYWdlQnl0ZXM6XCIuY29uY2F0KHQpKTt2YXIgbz1lLnBheWxvYWQubWVzc2FnZUxpc3Qscj1vLmxlbmd0aCxhPW5ldyBqZChoZyk7cmV0dXJuIHRoaXMuX21lc3NhZ2VNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnZwLHJlcXVlc3REYXRhOnttZXNzYWdlTGlzdDpvfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe0tpLmRlYnVnKFwiXCIuY29uY2F0KG4uX2NsYXNzTmFtZSxcIi51cGxvYWRNZXJnZXJNZXNzYWdlIG9rLiByZXNwb25zZTpcIiksZS5kYXRhKTt2YXIgbz1lLmRhdGEscz1vLnBiRG93bmxvYWRLZXksaT1vLmRvd25sb2FkS2V5LHU9e3BiRG93bmxvYWRLZXk6cyxkb3dubG9hZEtleTppLG1lc3NhZ2VOdW1iZXI6cn07cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUobi5fbWVzc2FnZU1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIuY29uY2F0KHIsXCItXCIpLmNvbmNhdCh0LFwiLVwiKS5jb25jYXQoaSkpLmVuZCgpLHV9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3Rocm93IEtpLndhcm4oXCJcIi5jb25jYXQobi5fY2xhc3NOYW1lLFwiLnVwbG9hZE1lcmdlck1lc3NhZ2UgZmFpbGVkLiBlcnJvcjpcIiksZSksbi5fbWVzc2FnZU1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTthLnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxlfSkpfX0se2tleTpcImRvd25sb2FkTWVyZ2VyTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRvd25sb2FkTWVyZ2VyTWVzc2FnZSBtZXNzYWdlOlwiKSxlKTt2YXIgbz1lLnBheWxvYWQuZG93bmxvYWRLZXkscj1uZXcgamQoZmcpO3JldHVybiByLnNldE1lc3NhZ2UoXCJkb3dubG9hZEtleTpcIi5jb25jYXQobykpLHRoaXMuX21lc3NhZ2VNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOk1wLHJlcXVlc3REYXRhOntkb3dubG9hZEtleTpvfX0pLnRoZW4oKGZ1bmN0aW9uKG8pe2lmKEtpLmRlYnVnKFwiXCIuY29uY2F0KG4uX2NsYXNzTmFtZSxcIi5kb3dubG9hZE1lcmdlck1lc3NhZ2Ugb2suIHJlc3BvbnNlOlwiKSxvLmRhdGEpLFFpKGUuY2xlYXJFbGVtZW50KSl7dmFyIGE9ZS5wYXlsb2FkLHM9KGEuZG93bmxvYWRLZXksYS5wYkRvd25sb2FkS2V5LGEubWVzc2FnZUxpc3QsZyhhLEN2KSk7ZS5jbGVhckVsZW1lbnQoKSxlLnNldEVsZW1lbnQoe3R5cGU6ZS50eXBlLGNvbnRlbnQ6dCh7bWVzc2FnZUxpc3Q6by5kYXRhLm1lc3NhZ2VMaXN0fSxzKX0pfWVsc2V7dmFyIGk9W107by5kYXRhLm1lc3NhZ2VMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKCFMdShlKSl7dmFyIHQ9bmV3IFdfKGUpO2kucHVzaCh0KX19KSksZS5wYXlsb2FkLm1lc3NhZ2VMaXN0PWksZS5wYXlsb2FkLmRvd25sb2FkS2V5PVwiXCIsZS5wYXlsb2FkLnBiRG93bmxvYWRLZXk9XCJcIn1yZXR1cm4gci5zZXROZXR3b3JrVHlwZShuLl9tZXNzYWdlTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLGV9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3Rocm93IEtpLndhcm4oXCJcIi5jb25jYXQobi5fY2xhc3NOYW1lLFwiLmRvd25sb2FkTWVyZ2VyTWVzc2FnZSBmYWlsZWQuIGtleTpcIikuY29uY2F0KG8sXCIgZXJyb3I6XCIpLGUpLG4uX21lc3NhZ2VNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxhPW5bMV07ci5zZXRFcnJvcihlLG8sYSkuZW5kKCl9KSksZX0pKX19LHtrZXk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlUGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5jb252ZXJzYXRpb25UeXBlPT09cm8uQ09OVl9DMkM/dGhpcy5fY3JlYXRlQzJDTWVyZ2VyTWVzc2FnZVBhY2soZSx0LG4pOnRoaXMuX2NyZWF0ZUdyb3VwTWVyZ2VyTWVzc2FnZVBhY2soZSx0LG4pfX0se2tleTpcIl9jcmVhdGVDMkNNZXJnZXJNZXNzYWdlUGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgbz1udWxsO3QmJih0Lm9mZmxpbmVQdXNoSW5mbyYmKG89dC5vZmZsaW5lUHVzaEluZm8pLCEwPT09dC5vbmxpbmVVc2VyT25seSYmKG8/by5kaXNhYmxlUHVzaD0hMDpvPXtkaXNhYmxlUHVzaDohMH0pKTt2YXIgcj1cIlwiOyRpKGUuY2xvdWRDdXN0b21EYXRhKSYmZS5jbG91ZEN1c3RvbURhdGEubGVuZ3RoPjAmJihyPWUuY2xvdWRDdXN0b21EYXRhKTt2YXIgYT1uLnBiRG93bmxvYWRLZXkscz1uLmRvd25sb2FkS2V5LGk9bi5tZXNzYWdlTnVtYmVyLHU9ZS5wYXlsb2FkLGM9dS50aXRsZSxsPXUuYWJzdHJhY3RMaXN0LHA9dS5jb21wYXRpYmxlVGV4dCxkPXRoaXMuX21lc3NhZ2VNb2R1bGUuZ2V0TW9kdWxlKCRjKTtyZXR1cm57cHJvdG9jb2xOYW1lOm1sLHRqZ0lEOnRoaXMuX21lc3NhZ2VNb2R1bGUuZ2VuZXJhdGVUamdJRChlKSxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fbWVzc2FnZU1vZHVsZS5nZXRNeVVzZXJJRCgpLHRvQWNjb3VudDplLnRvLG1zZ0JvZHk6W3ttc2dUeXBlOmUudHlwZSxtc2dDb250ZW50OntwYkRvd25sb2FkS2V5OmEsZG93bmxvYWRLZXk6cyx0aXRsZTpjLGFic3RyYWN0TGlzdDpsLGNvbXBhdGlibGVUZXh0OnAsbWVzc2FnZU51bWJlcjppfX1dLGNsb3VkQ3VzdG9tRGF0YTpyLG1zZ1NlcTplLnNlcXVlbmNlLG1zZ1JhbmRvbTplLnJhbmRvbSxtc2dMaWZlVGltZTpkJiZkLmlzT25saW5lTWVzc2FnZShlLHQpPzA6dm9pZCAwLG9mZmxpbmVQdXNoSW5mbzpvP3twdXNoRmxhZzohMD09PW8uZGlzYWJsZVB1c2g/MTowLHRpdGxlOm8udGl0bGV8fFwiXCIsZGVzYzpvLmRlc2NyaXB0aW9ufHxcIlwiLGV4dDpvLmV4dGVuc2lvbnx8XCJcIixhcG5zSW5mbzp7YmFkZ2VNb2RlOiEwPT09by5pZ25vcmVJT1NCYWRnZT8xOjB9LGFuZHJvaWRJbmZvOntPUFBPQ2hhbm5lbElEOm8uYW5kcm9pZE9QUE9DaGFubmVsSUR8fFwiXCJ9fTp2b2lkIDB9fX19LHtrZXk6XCJfY3JlYXRlR3JvdXBNZXJnZXJNZXNzYWdlUGFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgbz1udWxsO3QmJnQub2ZmbGluZVB1c2hJbmZvJiYobz10Lm9mZmxpbmVQdXNoSW5mbyk7dmFyIHI9XCJcIjskaShlLmNsb3VkQ3VzdG9tRGF0YSkmJmUuY2xvdWRDdXN0b21EYXRhLmxlbmd0aD4wJiYocj1lLmNsb3VkQ3VzdG9tRGF0YSk7dmFyIGE9bi5wYkRvd25sb2FkS2V5LHM9bi5kb3dubG9hZEtleSxpPW4ubWVzc2FnZU51bWJlcix1PWUucGF5bG9hZCxjPXUudGl0bGUsbD11LmFic3RyYWN0TGlzdCxwPXUuY29tcGF0aWJsZVRleHQsZD10aGlzLl9tZXNzYWdlTW9kdWxlLmdldE1vZHVsZShZYyk7cmV0dXJue3Byb3RvY29sTmFtZTp2bCx0amdJRDp0aGlzLl9tZXNzYWdlTW9kdWxlLmdlbmVyYXRlVGpnSUQoZSkscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX21lc3NhZ2VNb2R1bGUuZ2V0TXlVc2VySUQoKSxncm91cElEOmUudG8sbXNnQm9keTpbe21zZ1R5cGU6ZS50eXBlLG1zZ0NvbnRlbnQ6e3BiRG93bmxvYWRLZXk6YSxkb3dubG9hZEtleTpzLHRpdGxlOmMsYWJzdHJhY3RMaXN0OmwsY29tcGF0aWJsZVRleHQ6cCxtZXNzYWdlTnVtYmVyOml9fV0scmFuZG9tOmUucmFuZG9tLHByaW9yaXR5OmUucHJpb3JpdHksY2xpZW50U2VxdWVuY2U6ZS5jbGllbnRTZXF1ZW5jZSxncm91cEF0SW5mbzp2b2lkIDAsY2xvdWRDdXN0b21EYXRhOnIsb25saW5lT25seUZsYWc6ZCYmZC5pc09ubGluZU1lc3NhZ2UoZSx0KT8xOjAsb2ZmbGluZVB1c2hJbmZvOm8/e3B1c2hGbGFnOiEwPT09by5kaXNhYmxlUHVzaD8xOjAsdGl0bGU6by50aXRsZXx8XCJcIixkZXNjOm8uZGVzY3JpcHRpb258fFwiXCIsZXh0Om8uZXh0ZW5zaW9ufHxcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6ITA9PT1vLmlnbm9yZUlPU0JhZGdlPzE6MH0sYW5kcm9pZEluZm86e09QUE9DaGFubmVsSUQ6by5hbmRyb2lkT1BQT0NoYW5uZWxJRHx8XCJcIn19OnZvaWQgMH19fX1dKSxlfSgpLGt2PXtFUlJfU1ZSX0NPTU1fU0VOU0lUSVZFX1RFWFQ6ODAwMDEsRVJSX1NWUl9DT01NX0JPRFlfU0laRV9MSU1JVDo4MDAwMixFUlJfU1ZSX01TR19QS0dfUEFSU0VfRkFJTEVEOjIwMDAxLEVSUl9TVlJfTVNHX0lOVEVSTkFMX0FVVEhfRkFJTEVEOjIwMDAyLEVSUl9TVlJfTVNHX0lOVkFMSURfSUQ6MjAwMDMsRVJSX1NWUl9NU0dfUFVTSF9ERU5ZOjIwMDA2LEVSUl9TVlJfTVNHX0lOX1BFRVJfQkxBQ0tMSVNUOjIwMDA3LEVSUl9TVlJfTVNHX0JPVEhfTk9UX0ZSSUVORDoyMDAwOSxFUlJfU1ZSX01TR19OT1RfUEVFUl9GUklFTkQ6MjAwMTAsRVJSX1NWUl9NU0dfTk9UX1NFTEZfRlJJRU5EOjIwMDExLEVSUl9TVlJfTVNHX1NIVVRVUF9ERU5ZOjIwMDEyLEVSUl9TVlJfR1JPVVBfSU5WQUxJRF9QQVJBTUVURVJTOjEwMDA0LEVSUl9TVlJfR1JPVVBfUEVSTUlTU0lPTl9ERU5ZOjEwMDA3LEVSUl9TVlJfR1JPVVBfTk9UX0ZPVU5EOjEwMDEwLEVSUl9TVlJfR1JPVVBfSU5WQUxJRF9HUk9VUElEOjEwMDE1LEVSUl9TVlJfR1JPVVBfUkVKRUNUX0ZST01fVEhJUkRQQVJUWToxMDAxNixFUlJfU1ZSX0dST1VQX1NIVVRVUF9ERU5ZOjEwMDE3LE1FU1NBR0VfU0VORF9GQUlMOjIxMDB9LE52PVtUcC5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1IsVHAuTUVTU0FHRV9JTUFHRV9TRUxFQ1RfRklMRV9GSVJTVCxUcC5NRVNTQUdFX0lNQUdFX1RZUEVTX0xJTUlULFRwLk1FU1NBR0VfRklMRV9JU19FTVBUWSxUcC5NRVNTQUdFX0lNQUdFX1NJWkVfTElNSVQsVHAuTUVTU0FHRV9GSUxFX1NFTEVDVF9GSUxFX0ZJUlNULFRwLk1FU1NBR0VfRklMRV9TSVpFX0xJTUlULFRwLk1FU1NBR0VfVklERU9fU0laRV9MSU1JVCxUcC5NRVNTQUdFX1ZJREVPX1RZUEVTX0xJTUlULFRwLk1FU1NBR0VfQVVESU9fVVBMT0FEX0ZBSUwsVHAuTUVTU0FHRV9BVURJT19TSVpFX0xJTUlULFRwLkNPU19VTkRFVEVDVEVEXTt2YXIgT3Y9ZnVuY3Rpb24oZSl7aShuLGUpO3ZhciB0PV8obik7ZnVuY3Rpb24gbihlKXt2YXIgcjtyZXR1cm4gbyh0aGlzLG4pLChyPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiTWVzc2FnZU1vZHVsZVwiLHIuX21lc3NhZ2VPcHRpb25zTWFwPW5ldyBNYXAsci5fbWVyZ2VyTWVzc2FnZUhhbmRsZXI9bmV3IEF2KGgocikpLHJ9cmV0dXJuIGEobixbe2tleTpcImNyZWF0ZVRleHRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dDt2YXIgbj1uZXcgUV8oZSksbz1cInN0cmluZ1wiPT10eXBlb2YgZS5wYXlsb2FkP2UucGF5bG9hZDplLnBheWxvYWQudGV4dCxyPW5ldyBfaCh7dGV4dDpvfSksYT10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQodCk7cmV0dXJuIG4uc2V0RWxlbWVudChyKSxuLnNldE5pY2tBbmRBdmF0YXIoYSksbi5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChuKSksbn19LHtrZXk6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10O3ZhciBuPW5ldyBRXyhlKTtpZihhaSl7dmFyIG89ZS5wYXlsb2FkLmZpbGU7aWYoSGkobykpcmV0dXJuIHZvaWQgS2kud2FybihcIuWwj+eoi+W6j+eOr+Wig+S4i+iwg+eUqCBjcmVhdGVJbWFnZU1lc3NhZ2Ug5o6l5Y+j5pe277yMcGF5bG9hZC5maWxlIOS4jeaUr+aMgeS8oOWFpSBGaWxlIOWvueixoVwiKTt2YXIgcj1vLnRlbXBGaWxlUGF0aHNbMF0sYT17dXJsOnIsbmFtZTpyLnNsaWNlKHIubGFzdEluZGV4T2YoXCIvXCIpKzEpLHNpemU6by50ZW1wRmlsZXMmJm8udGVtcEZpbGVzWzBdLnNpemV8fDEsdHlwZTpyLnNsaWNlKHIubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCl9O2UucGF5bG9hZC5maWxlPWF9ZWxzZSBpZihzaSlpZihIaShlLnBheWxvYWQuZmlsZSkpe3ZhciBzPWUucGF5bG9hZC5maWxlO2UucGF5bG9hZC5maWxlPXtmaWxlczpbc119fWVsc2UgaWYoemkoZS5wYXlsb2FkLmZpbGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pKXt2YXIgaT1lLnBheWxvYWQuZmlsZS50ZW1wRmlsZXNbMF07ZS5wYXlsb2FkLmZpbGU9e2ZpbGVzOltpXX19dmFyIHU9bmV3IGJfKHtpbWFnZUZvcm1hdDpDXy5JTUFHRV9GT1JNQVQuVU5LTk9XTix1dWlkOnRoaXMuX2dlbmVyYXRlVVVJRCgpLGZpbGU6ZS5wYXlsb2FkLmZpbGV9KSxjPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gbi5zZXRFbGVtZW50KHUpLG4uc2V0Tmlja0FuZEF2YXRhcihjKSxuLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKG4pKSx0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5zZXQobi5JRCxlKSxufX0se2tleTpcImNyZWF0ZUF1ZGlvTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGFpKXt2YXIgdD1lLnBheWxvYWQuZmlsZTtpZihhaSl7dmFyIG49e3VybDp0LnRlbXBGaWxlUGF0aCxuYW1lOnQudGVtcEZpbGVQYXRoLnNsaWNlKHQudGVtcEZpbGVQYXRoLmxhc3RJbmRleE9mKFwiL1wiKSsxKSxzaXplOnQuZmlsZVNpemUsc2Vjb25kOnBhcnNlSW50KHQuZHVyYXRpb24pLzFlMyx0eXBlOnQudGVtcEZpbGVQYXRoLnNsaWNlKHQudGVtcEZpbGVQYXRoLmxhc3RJbmRleE9mKFwiLlwiKSsxKS50b0xvd2VyQ2FzZSgpfTtlLnBheWxvYWQuZmlsZT1ufXZhciBvPXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPW87dmFyIHI9bmV3IFFfKGUpLGE9bmV3IFBfKHtzZWNvbmQ6TWF0aC5mbG9vcih0LmR1cmF0aW9uLzFlMyksc2l6ZTp0LmZpbGVTaXplLHVybDp0LnRlbXBGaWxlUGF0aCx1dWlkOnRoaXMuX2dlbmVyYXRlVVVJRCgpfSkscz10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQobyk7cmV0dXJuIHIuc2V0RWxlbWVudChhKSxyLnNldE5pY2tBbmRBdmF0YXIocyksci5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChyKSksdGhpcy5fbWVzc2FnZU9wdGlvbnNNYXAuc2V0KHIuSUQsZSkscn1LaS53YXJuKFwiY3JlYXRlQXVkaW9NZXNzYWdlIOebruWJjeWPquaUr+aMgeWwj+eoi+W6j+eOr+Wig+S4i+WPkeivremfs+a2iOaBr1wiKX19LHtrZXk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10LGUucGF5bG9hZC5maWxlLnRodW1iVXJsPVwiaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vYXNzZXRzL2ltYWdlcy90cmFuc3BhcmVudC5wbmdcIixlLnBheWxvYWQuZmlsZS50aHVtYlNpemU9MTY2ODt2YXIgbj17fTtpZihhaSl7aWYob2kpcmV0dXJuIHZvaWQgS2kud2FybihcImNyZWF0ZVZpZGVvTWVzc2FnZSDkuI3mlK/mjIHlnKjmlK/ku5jlrp3lsI/nqIvluo/njq/looPkuIvkvb/nlKhcIik7aWYoSGkoZS5wYXlsb2FkLmZpbGUpKXJldHVybiB2b2lkIEtpLndhcm4oXCLlsI/nqIvluo/njq/looPkuIvosIPnlKggY3JlYXRlVmlkZW9NZXNzYWdlIOaOpeWPo+aXtu+8jHBheWxvYWQuZmlsZSDkuI3mlK/mjIHkvKDlhaUgRmlsZSDlr7nosaFcIik7dmFyIG89ZS5wYXlsb2FkLmZpbGU7bi51cmw9by50ZW1wRmlsZVBhdGgsbi5uYW1lPW8udGVtcEZpbGVQYXRoLnNsaWNlKG8udGVtcEZpbGVQYXRoLmxhc3RJbmRleE9mKFwiL1wiKSsxKSxuLnNpemU9by5zaXplLG4uc2Vjb25kPW8uZHVyYXRpb24sbi50eXBlPW8udGVtcEZpbGVQYXRoLnNsaWNlKG8udGVtcEZpbGVQYXRoLmxhc3RJbmRleE9mKFwiLlwiKSsxKS50b0xvd2VyQ2FzZSgpfWVsc2UgaWYoc2kpe2lmKEhpKGUucGF5bG9hZC5maWxlKSl7dmFyIHI9ZS5wYXlsb2FkLmZpbGU7ZS5wYXlsb2FkLmZpbGUuZmlsZXM9W3JdfWVsc2UgaWYoemkoZS5wYXlsb2FkLmZpbGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pKXt2YXIgYT1lLnBheWxvYWQuZmlsZS50ZW1wRmlsZTtlLnBheWxvYWQuZmlsZS5maWxlcz1bYV19dmFyIHM9ZS5wYXlsb2FkLmZpbGU7bi51cmw9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwocy5maWxlc1swXSksbi5uYW1lPXMuZmlsZXNbMF0ubmFtZSxuLnNpemU9cy5maWxlc1swXS5zaXplLG4uc2Vjb25kPXMuZmlsZXNbMF0uZHVyYXRpb258fDAsbi50eXBlPXMuZmlsZXNbMF0udHlwZS5zcGxpdChcIi9cIilbMV19ZS5wYXlsb2FkLmZpbGUudmlkZW9GaWxlPW47dmFyIGk9bmV3IFFfKGUpLHU9bmV3IFlfKHt2aWRlb0Zvcm1hdDpuLnR5cGUsdmlkZW9TZWNvbmQ6QXUobi5zZWNvbmQsMCksdmlkZW9TaXplOm4uc2l6ZSxyZW1vdGVWaWRlb1VybDpcIlwiLHZpZGVvVXJsOm4udXJsLHZpZGVvVVVJRDp0aGlzLl9nZW5lcmF0ZVVVSUQoKSx0aHVtYlVVSUQ6dGhpcy5fZ2VuZXJhdGVVVUlEKCksdGh1bWJXaWR0aDplLnBheWxvYWQuZmlsZS53aWR0aHx8MjAwLHRodW1iSGVpZ2h0OmUucGF5bG9hZC5maWxlLmhlaWdodHx8MjAwLHRodW1iVXJsOmUucGF5bG9hZC5maWxlLnRodW1iVXJsLHRodW1iU2l6ZTplLnBheWxvYWQuZmlsZS50aHVtYlNpemUsdGh1bWJGb3JtYXQ6ZS5wYXlsb2FkLmZpbGUudGh1bWJVcmwuc2xpY2UoZS5wYXlsb2FkLmZpbGUudGh1bWJVcmwubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCl9KSxjPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gaS5zZXRFbGVtZW50KHUpLGkuc2V0Tmlja0FuZEF2YXRhcihjKSxpLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKGkpKSx0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5zZXQoaS5JRCxlKSxpfX0se2tleTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10O3ZhciBuPW5ldyBRXyhlKSxvPW5ldyAkXyh7ZGF0YTplLnBheWxvYWQuZGF0YSxkZXNjcmlwdGlvbjplLnBheWxvYWQuZGVzY3JpcHRpb24sZXh0ZW5zaW9uOmUucGF5bG9hZC5leHRlbnNpb259KSxyPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gbi5zZXRFbGVtZW50KG8pLG4uc2V0Tmlja0FuZEF2YXRhcihyKSxuLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKG4pKSxufX0se2tleTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dDt2YXIgbj1uZXcgUV8oZSksbz1uZXcgd18oZS5wYXlsb2FkKSxyPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gbi5zZXRFbGVtZW50KG8pLG4uc2V0Tmlja0FuZEF2YXRhcihyKSxuLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKG4pKSxufX0se2tleTpcImNyZWF0ZU1lcmdlck1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10O3ZhciBuPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KSxvPW5ldyBRXyhlKSxyPW5ldyBKXyhlLnBheWxvYWQpO3JldHVybiBvLnNldEVsZW1lbnQociksby5zZXROaWNrQW5kQXZhdGFyKG4pLG8uc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQobykpLG8uc2V0UmVsYXlGbGFnKCEwKSxvfX0se2tleTpcImNyZWF0ZUZvcndhcmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50byxuPWUuY29udmVyc2F0aW9uVHlwZSxvPWUucHJpb3JpdHkscj1lLnBheWxvYWQsYT10aGlzLmdldE15VXNlcklEKCkscz10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQoYSk7aWYoci50eXBlPT09cm8uTVNHX0dSUF9USVApcmV0dXJuIGNtKG5ldyBhbSh7Y29kZTpUcC5NRVNTQUdFX0ZPUldBUkRfVFlQRV9JTlZBTElELG1lc3NhZ2U6ZWR9KSk7dmFyIGk9e3RvOnQsY29udmVyc2F0aW9uVHlwZTpuLGNvbnZlcnNhdGlvbklEOlwiXCIuY29uY2F0KG4pLmNvbmNhdCh0KSxwcmlvcml0eTpvLGlzUGxhY2VNZXNzYWdlOjAsc3RhdHVzOkVjLlVOU0VORCxjdXJyZW50VXNlcjphLGNsb3VkQ3VzdG9tRGF0YTplLmNsb3VkQ3VzdG9tRGF0YXx8ci5jbG91ZEN1c3RvbURhdGF8fFwiXCJ9LHU9bmV3IFFfKGkpO3JldHVybiB1LnNldEVsZW1lbnQoci5nZXRFbGVtZW50cygpWzBdKSx1LnNldE5pY2tBbmRBdmF0YXIocyksdS5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChyKSksdS5zZXRSZWxheUZsYWcoITApLHV9fSx7a2V5OlwiZG93bmxvYWRNZXJnZXJNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21lcmdlck1lc3NhZ2VIYW5kbGVyLmRvd25sb2FkTWVyZ2VyTWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFhaSl7aWYoc2kpaWYoSGkoZS5wYXlsb2FkLmZpbGUpKXt2YXIgdD1lLnBheWxvYWQuZmlsZTtlLnBheWxvYWQuZmlsZT17ZmlsZXM6W3RdfX1lbHNlIGlmKHppKGUucGF5bG9hZC5maWxlKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaSl7dmFyIG49ZS5wYXlsb2FkLmZpbGUudGVtcEZpbGVzWzBdO2UucGF5bG9hZC5maWxlPXtmaWxlczpbbl19fXZhciBvPXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPW87dmFyIHI9bmV3IFFfKGUpLGE9bmV3IGpfKHt1dWlkOnRoaXMuX2dlbmVyYXRlVVVJRCgpLGZpbGU6ZS5wYXlsb2FkLmZpbGV9KSxzPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRChvKTtyZXR1cm4gci5zZXRFbGVtZW50KGEpLHIuc2V0Tmlja0FuZEF2YXRhcihzKSxyLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKHIpKSx0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5zZXQoci5JRCxlKSxyfUtpLndhcm4oXCLlsI/nqIvluo/nm67liY3kuI3mlK/mjIHpgInmi6nmlofku7bvvIwgY3JlYXRlRmlsZU1lc3NhZ2Ug5o6l5Y+j5LiN5Y+v55So77yBXCIpfX0se2tleTpcIl9vbkNhbm5vdEZpbmRNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcInNlbmRNZXNzYWdlSW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuLG89dGhpcyxyPW51bGw7c3dpdGNoKGUuY29udmVyc2F0aW9uVHlwZSl7Y2FzZSByby5DT05WX0MyQzppZighKHI9dGhpcy5nZXRNb2R1bGUoJGMpKSlyZXR1cm4gdGhpcy5fb25DYW5ub3RGaW5kTW9kdWxlKCk7YnJlYWs7Y2FzZSByby5DT05WX0dST1VQOmlmKCEocj10aGlzLmdldE1vZHVsZShZYykpKXJldHVybiB0aGlzLl9vbkNhbm5vdEZpbmRNb2R1bGUoKTticmVhaztkZWZhdWx0OnJldHVybiBjbSh7Y29kZTpUcC5NRVNTQUdFX1NFTkRfSU5WQUxJRF9DT05WRVJTQVRJT05fVFlQRSxtZXNzYWdlOndwfSl9dmFyIGE9dGhpcy5nZXRNb2R1bGUobmwpLHM9dGhpcy5nZXRNb2R1bGUoWWMpO3JldHVybiBhLnVwbG9hZChlKS50aGVuKChmdW5jdGlvbigpe28uX2dldFNlbmRNZXNzYWdlU3BlY2lmaWVkS2V5KGUpPT09VWQmJm8uZ2V0TW9kdWxlKGxsKS5hZGRTdWNjZXNzQ291bnQoRmQpO3JldHVybiBzLmd1YXJkRm9yQVZDaGF0Um9vbShlKS50aGVuKChmdW5jdGlvbigpe2lmKCFlLmlzU2VuZGFibGUoKSlyZXR1cm4gY20oe2NvZGU6VHAuTUVTU0FHRV9GSUxFX1VSTF9JU19FTVBUWSxtZXNzYWdlOkpwfSk7by5fYWRkU2VuZE1lc3NhZ2VUb3RhbENvdW50KGUpLG49RGF0ZS5ub3coKTt2YXIgYT1mdW5jdGlvbihlKXt2YXIgdD1cInV0Zi04XCI7c2kmJmRvY3VtZW50JiYodD1kb2N1bWVudC5jaGFyc2V0LnRvTG93ZXJDYXNlKCkpO3ZhciBuLG8scj0wO2lmKG89ZS5sZW5ndGgsXCJ1dGYtOFwiPT09dHx8XCJ1dGY4XCI9PT10KWZvcih2YXIgYT0wO2E8bzthKyspKG49ZS5jb2RlUG9pbnRBdChhKSk8PTEyNz9yKz0xOm48PTIwNDc/cis9MjpuPD02NTUzNT9yKz0zOihyKz00LGErKyk7ZWxzZSBpZihcInV0Zi0xNlwiPT09dHx8XCJ1dGYxNlwiPT09dClmb3IodmFyIHM9MDtzPG87cysrKShuPWUuY29kZVBvaW50QXQocykpPD02NTUzNT9yKz0yOihyKz00LHMrKyk7ZWxzZSByPWUucmVwbGFjZSgvW15cXHgwMC1cXHhmZl0vZyxcImFhXCIpLmxlbmd0aDtyZXR1cm4gcn0oSlNPTi5zdHJpbmdpZnkoZSkpO3JldHVybiBlLnR5cGU9PT1yby5NU0dfTUVSR0VSJiZhPjdlMz9vLl9tZXJnZXJNZXNzYWdlSGFuZGxlci51cGxvYWRNZXJnZXJNZXNzYWdlKGUsYSkudGhlbigoZnVuY3Rpb24obil7dmFyIHI9by5fbWVyZ2VyTWVzc2FnZUhhbmRsZXIuY3JlYXRlTWVyZ2VyTWVzc2FnZVBhY2soZSx0LG4pO3JldHVybiBvLnJlcXVlc3Qocil9KSk6KG8uZ2V0TW9kdWxlKEpjKS5zZXRNZXNzYWdlUmFuZG9tKGUpLGUuY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfQzJDfHxlLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0dST1VQP3Iuc2VuZE1lc3NhZ2UoZSx0KTp2b2lkIDApfSkpLnRoZW4oKGZ1bmN0aW9uKGEpe3ZhciBzPWEuZGF0YSxpPXMudGltZSx1PXMuc2VxdWVuY2U7by5fYWRkU2VuZE1lc3NhZ2VTdWNjZXNzQ291bnQoZSxuKSxvLl9tZXNzYWdlT3B0aW9uc01hcC5kZWxldGUoZS5JRCk7dmFyIGM9by5nZXRNb2R1bGUoSmMpO2Uuc3RhdHVzPUVjLlNVQ0NFU1MsZS50aW1lPWk7dmFyIGw9ITE7aWYoZS5jb252ZXJzYXRpb25UeXBlPT09cm8uQ09OVl9HUk9VUCllLnNlcXVlbmNlPXUsZS5nZW5lcmF0ZU1lc3NhZ2VJRChvLmdldE15VXNlcklEKCkpO2Vsc2UgaWYoZS5jb252ZXJzYXRpb25UeXBlPT09cm8uQ09OVl9DMkMpe3ZhciBwPWMuZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKGUuY29udmVyc2F0aW9uSUQpO2lmKHApe3ZhciBkPXAubmljayxnPXAuYXZhdGFyO2Q9PT1lLm5pY2smJmc9PT1lLmF2YXRhcnx8KGw9ITApfX1yZXR1cm4gYy5hcHBlbmRUb01lc3NhZ2VMaXN0KGUpLGwmJmMubW9kaWZ5TWVzc2FnZVNlbnRCeU1lKHtjb252ZXJzYXRpb25JRDplLmNvbnZlcnNhdGlvbklELGxhdGVzdE5pY2s6ZS5uaWNrLGxhdGVzdEF2YXRhcjplLmF2YXRhcn0pLHIuaXNPbmxpbmVNZXNzYWdlKGUsdCk/ZS5zZXRPbmxpbmVPbmx5RmxhZyghMCk6Yy5vbk1lc3NhZ2VTZW50KHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpbe2NvbnZlcnNhdGlvbklEOmUuY29udmVyc2F0aW9uSUQsdW5yZWFkQ291bnQ6MCx0eXBlOmUuY29udmVyc2F0aW9uVHlwZSxzdWJUeXBlOmUuY29udmVyc2F0aW9uU3ViVHlwZSxsYXN0TWVzc2FnZTplfV19KSxlLmdldFJlbGF5RmxhZygpfHxcIlRJTUltYWdlRWxlbVwiIT09ZS50eXBlfHxFdShlLnBheWxvYWQuaW1hZ2VJbmZvQXJyYXkpLFpfKHttZXNzYWdlOmV9KX0pKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7cmV0dXJuIG8uX29uU2VuZE1lc3NhZ2VGYWlsZWQoZSx0KX0pKX19LHtrZXk6XCJfb25TZW5kTWVzc2FnZUZhaWxlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZS5zdGF0dXM9RWMuRkFJTCx0aGlzLmdldE1vZHVsZShKYykuZGVsZXRlTWVzc2FnZVJhbmRvbShlKSx0aGlzLl9hZGRTZW5kTWVzc2FnZUZhaWxDb3VudE9uVXNlcihlLHQpO3ZhciBuPW5ldyBqZChhZyk7cmV0dXJuIG4uc2V0TWVzc2FnZShcInRqZ19pZDpcIi5jb25jYXQodGhpcy5nZW5lcmF0ZVRqZ0lEKGUpLFwiIHR5cGU6XCIpLmNvbmNhdChlLnR5cGUsXCIgZnJvbTpcIikuY29uY2F0KGUuZnJvbSxcIiB0bzpcIikuY29uY2F0KGUudG8pKSx0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBvPW0oZSwyKSxyPW9bMF0sYT1vWzFdO24uc2V0RXJyb3IodCxyLGEpLmVuZCgpfSkpLEtpLmVycm9yKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25TZW5kTWVzc2FnZUZhaWxlZCBlcnJvcjpcIiksdCksY20obmV3IGFtKHtjb2RlOnQmJnQuY29kZT90LmNvZGU6VHAuTUVTU0FHRV9TRU5EX0ZBSUwsbWVzc2FnZTp0JiZ0Lm1lc3NhZ2U/dC5tZXNzYWdlOlJwLGRhdGE6e21lc3NhZ2U6ZX19KSl9fSx7a2V5OlwiX2dldFNlbmRNZXNzYWdlU3BlY2lmaWVkS2V5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoW3JvLk1TR19JTUFHRSxyby5NU0dfQVVESU8scm8uTVNHX1ZJREVPLHJvLk1TR19GSUxFXS5pbmNsdWRlcyhlLnR5cGUpKXJldHVybiBVZDtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0MyQylyZXR1cm4gd2Q7aWYoZS5jb252ZXJzYXRpb25UeXBlPT09cm8uQ09OVl9HUk9VUCl7dmFyIHQ9dGhpcy5nZXRNb2R1bGUoWWMpLmdldExvY2FsR3JvdXBQcm9maWxlKGUudG8pO2lmKCF0KXJldHVybjt2YXIgbj10LnR5cGU7cmV0dXJuIG11KG4pP0dkOlBkfX19LHtrZXk6XCJfYWRkU2VuZE1lc3NhZ2VUb3RhbENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0U2VuZE1lc3NhZ2VTcGVjaWZpZWRLZXkoZSk7dCYmdGhpcy5nZXRNb2R1bGUobGwpLmFkZFRvdGFsQ291bnQodCl9fSx7a2V5OlwiX2FkZFNlbmRNZXNzYWdlU3VjY2Vzc0NvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1NYXRoLmFicyhEYXRlLm5vdygpLXQpLG89dGhpcy5fZ2V0U2VuZE1lc3NhZ2VTcGVjaWZpZWRLZXkoZSk7aWYobyl7dmFyIHI9dGhpcy5nZXRNb2R1bGUobGwpO3IuYWRkU3VjY2Vzc0NvdW50KG8pLHIuYWRkQ29zdChvLG4pfX19LHtrZXk6XCJfYWRkU2VuZE1lc3NhZ2VGYWlsQ291bnRPblVzZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuLG8scj10LmNvZGUsYT12b2lkIDA9PT1yPy0xOnIscz10aGlzLmdldE1vZHVsZShsbCksaT10aGlzLl9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKTtpPT09VWQmJihuPWEsbz0hMSxOdi5pbmNsdWRlcyhuKSYmKG89ITApLG8pP3MuYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlKEZkKTpmdW5jdGlvbihlKXt2YXIgdD0hMTtyZXR1cm4gT2JqZWN0LnZhbHVlcyhrdikuaW5jbHVkZXMoZSkmJih0PSEwKSwoZT49MTIwMDAxJiZlPD0xM2U0fHxlPj0xMDEwMCYmZTw9MTAyMDApJiYodD0hMCksdH0oYSkmJmkmJnMuYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlKGkpfX0se2tleTpcInJlc2VuZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5pc1Jlc2VuZD0hMCxlLnN0YXR1cz1FYy5VTlNFTkQsdGhpcy5zZW5kTWVzc2FnZUluc3RhbmNlKGUpfX0se2tleTpcInJldm9rZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49bnVsbDtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0MyQyl7aWYoIShuPXRoaXMuZ2V0TW9kdWxlKCRjKSkpcmV0dXJuIHRoaXMuX29uQ2Fubm90RmluZE1vZHVsZSgpfWVsc2UgaWYoZS5jb252ZXJzYXRpb25UeXBlPT09cm8uQ09OVl9HUk9VUCYmIShuPXRoaXMuZ2V0TW9kdWxlKFljKSkpcmV0dXJuIHRoaXMuX29uQ2Fubm90RmluZE1vZHVsZSgpO3ZhciBvPW5ldyBqZCh1Zyk7cmV0dXJuIG8uc2V0TWVzc2FnZShcInRqZ19pZDpcIi5jb25jYXQodGhpcy5nZW5lcmF0ZVRqZ0lEKGUpLFwiIHR5cGU6XCIpLmNvbmNhdChlLnR5cGUsXCIgZnJvbTpcIikuY29uY2F0KGUuZnJvbSxcIiB0bzpcIikuY29uY2F0KGUudG8pKSxuLnJldm9rZU1lc3NhZ2UoZSkudGhlbigoZnVuY3Rpb24obil7dmFyIHI9bi5kYXRhLnJlY2FsbFJldExpc3Q7aWYoIUx1KHIpJiYwIT09clswXS5yZXRDb2RlKXt2YXIgYT1uZXcgYW0oe2NvZGU6clswXS5yZXRDb2RlLG1lc3NhZ2U6cm1bclswXS5yZXRDb2RlXXx8VXAsZGF0YTp7bWVzc2FnZTplfX0pO3JldHVybiBvLnNldENvZGUoYS5jb2RlKS5zZXRNb3JlTWVzc2FnZShhLm1lc3NhZ2UpLmVuZCgpLGNtKGEpfXJldHVybiBLaS5pbmZvKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5yZXZva2VNZXNzYWdlIG9rLiBJRDpcIikuY29uY2F0KGUuSUQpKSxlLmlzUmV2b2tlZD0hMCxvLmVuZCgpLHQuZ2V0TW9kdWxlKEpjKS5vbk1lc3NhZ2VSZXZva2VkKFtlXSksWl8oe21lc3NhZ2U6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihuKXt0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PW0oZSwyKSxyPXRbMF0sYT10WzFdO28uc2V0RXJyb3IobixyLGEpLmVuZCgpfSkpO3ZhciByPW5ldyBhbSh7Y29kZTpuJiZuLmNvZGU/bi5jb2RlOlRwLk1FU1NBR0VfUkVWT0tFX0ZBSUwsbWVzc2FnZTpuJiZuLm1lc3NhZ2U/bi5tZXNzYWdlOlVwLGRhdGE6e21lc3NhZ2U6ZX19KTtyZXR1cm4gS2kud2FybihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIucmV2b2tlTWVzc2FnZSBmYWlsZWQuIGVycm9yOlwiKSxuKSxjbShyKX0pKX19LHtrZXk6XCJkZWxldGVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPW51bGwsbz1lWzBdLHI9by5jb252ZXJzYXRpb25JRCxhPVwiXCIscz1bXSxpPVtdO2lmKG8uY29udmVyc2F0aW9uVHlwZT09PXJvLkNPTlZfQzJDPyhuPXRoaXMuZ2V0TW9kdWxlKCRjKSxhPXIucmVwbGFjZShyby5DT05WX0MyQyxcIlwiKSxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UmJmUuc3RhdHVzPT09RWMuU1VDQ0VTUyYmZS5jb252ZXJzYXRpb25JRD09PXImJihlLmdldE9ubGluZU9ubHlGbGFnKCl8fHMucHVzaChcIlwiLmNvbmNhdChlLnNlcXVlbmNlLFwiX1wiKS5jb25jYXQoZS5yYW5kb20sXCJfXCIpLmNvbmNhdChlLnRpbWUpKSxpLnB1c2goZSkpfSkpKTpvLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0dST1VQJiYobj10aGlzLmdldE1vZHVsZShZYyksYT1yLnJlcGxhY2Uocm8uQ09OVl9HUk9VUCxcIlwiKSxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UmJmUuc3RhdHVzPT09RWMuU1VDQ0VTUyYmZS5jb252ZXJzYXRpb25JRD09PXImJihlLmdldE9ubGluZU9ubHlGbGFnKCl8fHMucHVzaChcIlwiLmNvbmNhdChlLnNlcXVlbmNlKSksaS5wdXNoKGUpKX0pKSksIW4pcmV0dXJuIHRoaXMuX29uQ2Fubm90RmluZE1vZHVsZSgpO2lmKDA9PT1zLmxlbmd0aClyZXR1cm4gdGhpcy5fb25NZXNzYWdlRGVsZXRlZChpKTtzLmxlbmd0aD4zMCYmKHM9cy5zbGljZSgwLDMwKSxpPWkuc2xpY2UoMCwzMCkpO3ZhciB1PW5ldyBqZChjZyk7cmV0dXJuIHUuc2V0TWVzc2FnZShcInRvOlwiLmNvbmNhdChhLFwiIGNvdW50OlwiKS5jb25jYXQocy5sZW5ndGgpKSxuLmRlbGV0ZU1lc3NhZ2Uoe3RvOmEsa2V5TGlzdDpzfSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIHUuZW5kKCksS2kuaW5mbyhcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuZGVsZXRlTWVzc2FnZSBva1wiKSksdC5fb25NZXNzYWdlRGVsZXRlZChpKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7dC5wcm9iZU5ldHdvcmsoKS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj1tKHQsMiksbz1uWzBdLHI9blsxXTt1LnNldEVycm9yKGUsbyxyKS5lbmQoKX0pKSxLaS53YXJuKFwiXCIuY29uY2F0KHQuX2NsYXNzTmFtZSxcIi5kZWxldGVNZXNzYWdlIGZhaWxlZC4gZXJyb3I6XCIpLGUpO3ZhciBuPW5ldyBhbSh7Y29kZTplJiZlLmNvZGU/ZS5jb2RlOlRwLk1FU1NBR0VfREVMRVRFX0ZBSUwsbWVzc2FnZTplJiZlLm1lc3NhZ2U/ZS5tZXNzYWdlOkZwfSk7cmV0dXJuIGNtKG4pfSkpfX0se2tleTpcIl9vbk1lc3NhZ2VEZWxldGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKEpjKS5vbk1lc3NhZ2VEZWxldGVkKGUpLHVtKHttZXNzYWdlTGlzdDplfSl9fSx7a2V5OlwiX2dlbmVyYXRlVVVJRFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRNb2R1bGUoWGMpO3JldHVyblwiXCIuY29uY2F0KGUuZ2V0U0RLQXBwSUQoKSxcIi1cIikuY29uY2F0KGUuZ2V0VXNlcklEKCksXCItXCIpLmNvbmNhdChmdW5jdGlvbigpe2Zvcih2YXIgZT1cIlwiLHQ9MzI7dD4wOy0tdCllKz11dVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqY3UpXTtyZXR1cm4gZX0oKSl9fSx7a2V5OlwiZ2V0TWVzc2FnZU9wdGlvbkJ5SURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZU9wdGlvbnNNYXAuZ2V0KGUpfX0se2tleTpcIl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoamMpLmdldE5pY2tBbmRBdmF0YXJCeVVzZXJJRChlKX19LHtrZXk6XCJfZ2V0TmFtZUNhcmRCeUdyb3VwSURcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT1yby5DT05WX0dST1VQKXt2YXIgdD10aGlzLmdldE1vZHVsZShZYyk7aWYodClyZXR1cm4gdC5nZXRNeU5hbWVDYXJkQnlHcm91cElEKGUudG8pfXJldHVyblwiXCJ9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwLmNsZWFyKCl9fV0pLG59KHBsKSxMdj1mdW5jdGlvbihlKXtpKG4sZSk7dmFyIHQ9XyhuKTtmdW5jdGlvbiBuKGUpe3ZhciByO3JldHVybiBvKHRoaXMsbiksKHI9dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJQbHVnaW5Nb2R1bGVcIixyLnBsdWdpbnM9e30scn1yZXR1cm4gYShuLFt7a2V5OlwicmVnaXN0ZXJQbHVnaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO09iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3QucGx1Z2luc1tuXT1lW25dfSkpLG5ldyBqZChYZCkuc2V0TWVzc2FnZShcImtleT1cIi5jb25jYXQoT2JqZWN0LmtleXMoZSkpKS5lbmQoKX19LHtrZXk6XCJnZXRQbHVnaW5cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wbHVnaW5zW2VdfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKX19XSksbn0ocGwpLFJ2PWZ1bmN0aW9uKGUpe2kobixlKTt2YXIgdD1fKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHI7cmV0dXJuIG8odGhpcyxuKSwocj10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIlN5bmNVbnJlYWRNZXNzYWdlTW9kdWxlXCIsci5fY29va2llPVwiXCIsci5fb25saW5lU3luY0ZsYWc9ITEsci5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKE9tLkNPTlRFWFRfQTJLRVlfQU5EX1RJTllJRF9VUERBVEVELHIuX29uTG9naW5TdWNjZXNzLGgocikpLHJ9cmV0dXJuIGEobixbe2tleTpcIl9vbkxvZ2luU3VjY2Vzc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N0YXJ0U3luYyh7Y29va2llOnRoaXMuX2Nvb2tpZSxzeW5jRmxhZzowLGlzT25saW5lU3luYzowfSl9fSx7a2V5OlwiX3N0YXJ0U3luY1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvb2tpZSxvPWUuc3luY0ZsYWcscj1lLmlzT25saW5lU3luYztLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9zdGFydFN5bmMgY29va2llOlwiKS5jb25jYXQobixcIiBzeW5jRmxhZzpcIikuY29uY2F0KG8sXCIgaXNPbmxpbmVTeW5jOlwiKS5jb25jYXQocikpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmZsLHJlcXVlc3REYXRhOntjb29raWU6bixzeW5jRmxhZzpvLGlzT25saW5lU3luYzpyfX0pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZGF0YSxvPW4uY29va2llLHI9bi5zeW5jRmxhZyxhPW4uZXZlbnRBcnJheSxzPW4ubWVzc2FnZUxpc3QsaT1uLkMyQ1JlbWFpbmluZ1VucmVhZExpc3Q7aWYodC5fY29va2llPW8sTHUobykpO2Vsc2UgaWYoMD09PXJ8fDE9PT1yKXtpZihhKXQuZ2V0TW9kdWxlKGFsKS5vbk1lc3NhZ2Uoe2hlYWQ6e30sYm9keTp7ZXZlbnRBcnJheTphLGlzSW5zdGFudE1lc3NhZ2U6dC5fb25saW5lU3luY0ZsYWcsaXNTeW5jaW5nRW5kZWQ6ITF9fSk7dC5nZXRNb2R1bGUoJGMpLm9uTmV3QzJDTWVzc2FnZSh7ZGF0YUxpc3Q6cyxpc0luc3RhbnRNZXNzYWdlOiExLEMyQ1JlbWFpbmluZ1VucmVhZExpc3Q6aX0pLHQuX3N0YXJ0U3luYyh7Y29va2llOm8sc3luY0ZsYWc6cixpc09ubGluZVN5bmM6MH0pfWVsc2UgaWYoMj09PXIpe2lmKGEpdC5nZXRNb2R1bGUoYWwpLm9uTWVzc2FnZSh7aGVhZDp7fSxib2R5OntldmVudEFycmF5OmEsaXNJbnN0YW50TWVzc2FnZTp0Ll9vbmxpbmVTeW5jRmxhZyxpc1N5bmNpbmdFbmRlZDohMH19KTt0LmdldE1vZHVsZSgkYykub25OZXdDMkNNZXNzYWdlKHtkYXRhTGlzdDpzLGlzSW5zdGFudE1lc3NhZ2U6dC5fb25saW5lU3luY0ZsYWcsQzJDUmVtYWluaW5nVW5yZWFkTGlzdDppfSl9fSkpLmNhdGNoKChmdW5jdGlvbihlKXtLaS5lcnJvcihcIlwiLmNvbmNhdCh0Ll9jbGFzc05hbWUsXCIuX3N0YXJ0U3luYyBmYWlsZWQuIGVycm9yOlwiKSxlKX0pKX19LHtrZXk6XCJzdGFydE9ubGluZVN5bmNcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RhcnRPbmxpbmVTeW5jXCIpKSx0aGlzLl9vbmxpbmVTeW5jRmxhZz0hMCx0aGlzLl9zdGFydFN5bmMoe2Nvb2tpZTp0aGlzLl9jb29raWUsc3luY0ZsYWc6MCxpc09ubGluZVN5bmM6MX0pfX0se2tleTpcInN0YXJ0U3luY09uUmVjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc3RhcnRTeW5jT25SZWNvbm5lY3RlZC5cIikpLHRoaXMuX29ubGluZVN5bmNGbGFnPSEwLHRoaXMuX3N0YXJ0U3luYyh7Y29va2llOnRoaXMuX2Nvb2tpZSxzeW5jRmxhZzowLGlzT25saW5lU3luYzowfSl9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVzZXRcIikpLHRoaXMuX29ubGluZVN5bmNGbGFnPSExLHRoaXMuX2Nvb2tpZT1cIlwifX1dKSxufShwbCksYnY9e3JlcXVlc3Q6e3RvQWNjb3VudDpcIlRvX0FjY291bnRcIixmcm9tQWNjb3VudDpcIkZyb21fQWNjb3VudFwiLHRvOlwiVG9fQWNjb3VudFwiLGZyb206XCJGcm9tX0FjY291bnRcIixncm91cElEOlwiR3JvdXBJZFwiLGdyb3VwQXRVc2VySUQ6XCJHcm91cEF0X0FjY291bnRcIixleHRlbnNpb246XCJFeHRcIixkYXRhOlwiRGF0YVwiLGRlc2NyaXB0aW9uOlwiRGVzY1wiLGVsZW1lbnRzOlwiTXNnQm9keVwiLHNpemVUeXBlOlwiVHlwZVwiLGRvd25sb2FkRmxhZzpcIkRvd25sb2FkX0ZsYWdcIix0aHVtYlVVSUQ6XCJUaHVtYlVVSURcIix2aWRlb1VVSUQ6XCJWaWRlb1VVSURcIixyZW1vdGVBdWRpb1VybDpcIlVybFwiLHJlbW90ZVZpZGVvVXJsOlwiVmlkZW9VcmxcIix2aWRlb1VybDpcIlwiLGltYWdlVXJsOlwiVVJMXCIsZmlsZVVybDpcIlVybFwiLHV1aWQ6XCJVVUlEXCIscHJpb3JpdHk6XCJNc2dQcmlvcml0eVwiLHJlY2VpdmVyVXNlcklEOlwiVG9fQWNjb3VudFwiLHJlY2VpdmVyR3JvdXBJRDpcIkdyb3VwSWRcIixtZXNzYWdlU2VuZGVyOlwiU2VuZGVySWRcIixtZXNzYWdlUmVjZWl2ZXI6XCJSZWNlaXZlcklkXCIsbmljazpcIkZyb21fQWNjb3VudE5pY2tcIixhdmF0YXI6XCJGcm9tX0FjY291bnRIZWFkdXJsXCIsbWVzc2FnZU51bWJlcjpcIk1zZ051bVwiLHBiRG93bmxvYWRLZXk6XCJQYk1zZ0tleVwiLGRvd25sb2FkS2V5OlwiSnNvbk1zZ0tleVwiLGFwcGxpY2F0aW9uVHlwZTpcIlBlbmRlbmN5VHlwZVwiLHVzZXJJRExpc3Q6XCJUb19BY2NvdW50XCIsZ3JvdXBOYW1lTGlzdDpcIkdyb3VwTmFtZVwiLHVzZXJJRDpcIlRvX0FjY291bnRcIixncm91cEF0dHJpYnV0ZUxpc3Q6XCJHcm91cEF0dHJcIixtYWluU2VxdWVuY2U6XCJBdHRyTWFpblNlcVwiLGF2Q2hhdFJvb21LZXk6XCJCeXRlc0tleVwiLGF0dHJpYnV0ZUNvbnRyb2w6XCJBdHRyQ29udHJvbFwiLHNlcXVlbmNlOlwic2VxXCJ9LHJlc3BvbnNlOntNc2dQcmlvcml0eTpcInByaW9yaXR5XCIsVGh1bWJVVUlEOlwidGh1bWJVVUlEXCIsVmlkZW9VVUlEOlwidmlkZW9VVUlEXCIsRG93bmxvYWRfRmxhZzpcImRvd25sb2FkRmxhZ1wiLEdyb3VwSWQ6XCJncm91cElEXCIsTWVtYmVyX0FjY291bnQ6XCJ1c2VySURcIixNc2dMaXN0OlwibWVzc2FnZUxpc3RcIixTeW5jRmxhZzpcInN5bmNGbGFnXCIsVG9fQWNjb3VudDpcInRvXCIsRnJvbV9BY2NvdW50OlwiZnJvbVwiLE1zZ1NlcTpcInNlcXVlbmNlXCIsTXNnUmFuZG9tOlwicmFuZG9tXCIsTXNnVGltZTpcInRpbWVcIixNc2dUaW1lU3RhbXA6XCJ0aW1lXCIsTXNnQ29udGVudDpcImNvbnRlbnRcIixNc2dCb2R5OlwiZWxlbWVudHNcIixGcm9tX0FjY291bnROaWNrOlwibmlja1wiLEZyb21fQWNjb3VudEhlYWR1cmw6XCJhdmF0YXJcIixHcm91cFdpdGhkcmF3SW5mb0FycmF5OlwicmV2b2tlZEluZm9zXCIsR3JvdXBSZWFkSW5mb0FycmF5OlwiZ3JvdXBNZXNzYWdlUmVhZE5vdGljZVwiLExhc3RSZWFkTXNnU2VxOlwibGFzdE1lc3NhZ2VTZXFcIixXaXRoZHJhd0MyY01zZ05vdGlmeTpcImMyY01lc3NhZ2VSZXZva2VkTm90aWZ5XCIsQzJjV2l0aGRyYXdJbmZvQXJyYXk6XCJyZXZva2VkSW5mb3NcIixDMmNSZWFkZWRSZWNlaXB0OlwiYzJjTWVzc2FnZVJlYWRSZWNlaXB0XCIsUmVhZEMyY01zZ05vdGlmeTpcImMyY01lc3NhZ2VSZWFkTm90aWNlXCIsTGFzdFJlYWRUaW1lOlwicGVlclJlYWRUaW1lXCIsTXNnUmFuZDpcInJhbmRvbVwiLE1zZ1R5cGU6XCJ0eXBlXCIsTXNnU2hvdzpcIm1lc3NhZ2VTaG93XCIsTmV4dE1zZ1NlcTpcIm5leHRNZXNzYWdlU2VxXCIsRmFjZVVybDpcImF2YXRhclwiLFByb2ZpbGVEYXRhTW9kOlwicHJvZmlsZU1vZGlmeVwiLFByb2ZpbGVfQWNjb3VudDpcInVzZXJJRFwiLFZhbHVlQnl0ZXM6XCJ2YWx1ZVwiLFZhbHVlTnVtOlwidmFsdWVcIixOb3RpY2VTZXE6XCJub3RpY2VTZXF1ZW5jZVwiLE5vdGlmeVNlcTpcIm5vdGlmeVNlcXVlbmNlXCIsTXNnRnJvbV9BY2NvdW50RXh0cmFJbmZvOlwibWVzc2FnZUZyb21BY2NvdW50RXh0cmFJbmZvcm1hdGlvblwiLE9wZXJhdG9yX0FjY291bnQ6XCJvcGVyYXRvcklEXCIsT3BUeXBlOlwib3BlcmF0aW9uVHlwZVwiLFJlcG9ydFR5cGU6XCJvcGVyYXRpb25UeXBlXCIsVXNlcklkOlwidXNlcklEXCIsVXNlcl9BY2NvdW50OlwidXNlcklEXCIsTGlzdF9BY2NvdW50OlwidXNlcklETGlzdFwiLE1zZ09wZXJhdG9yTWVtYmVyRXh0cmFJbmZvOlwib3BlcmF0b3JJbmZvXCIsTXNnTWVtYmVyRXh0cmFJbmZvOlwibWVtYmVySW5mb0xpc3RcIixJbWFnZVVybDpcImF2YXRhclwiLE5pY2tOYW1lOlwibmlja1wiLE1zZ0dyb3VwTmV3SW5mbzpcIm5ld0dyb3VwUHJvZmlsZVwiLE1zZ0FwcERlZmluZWREYXRhOlwiZ3JvdXBDdXN0b21GaWVsZFwiLE93bmVyX0FjY291bnQ6XCJvd25lcklEXCIsR3JvdXBGYWNlVXJsOlwiYXZhdGFyXCIsR3JvdXBJbnRyb2R1Y3Rpb246XCJpbnRyb2R1Y3Rpb25cIixHcm91cE5vdGlmaWNhdGlvbjpcIm5vdGlmaWNhdGlvblwiLEdyb3VwQXBwbHlKb2luT3B0aW9uOlwiam9pbk9wdGlvblwiLE1zZ0tleTpcIm1lc3NhZ2VLZXlcIixHcm91cEluZm86XCJncm91cFByb2ZpbGVcIixTaHV0dXBUaW1lOlwibXV0ZVRpbWVcIixEZXNjOlwiZGVzY3JpcHRpb25cIixFeHQ6XCJleHRlbnNpb25cIixHcm91cEF0X0FjY291bnQ6XCJncm91cEF0VXNlcklEXCIsTXNnTnVtOlwibWVzc2FnZU51bWJlclwiLFBiTXNnS2V5OlwicGJEb3dubG9hZEtleVwiLEpzb25Nc2dLZXk6XCJkb3dubG9hZEtleVwiLE1zZ01vZGlmaWVkRmxhZzpcImlzTW9kaWZpZWRcIixQZW5kZW5jeUl0ZW06XCJhcHBsaWNhdGlvbkl0ZW1cIixQZW5kZW5jeVR5cGU6XCJhcHBsaWNhdGlvblR5cGVcIixBZGRUaW1lOlwidGltZVwiLEFkZFNvdXJjZTpcInNvdXJjZVwiLEFkZFdvcmRpbmc6XCJ3b3JkaW5nXCIsUHJvZmlsZUltSW1hZ2U6XCJhdmF0YXJcIixQZW5kZW5jeUFkZDpcImZyaWVuZEFwcGxpY2F0aW9uQWRkZWRcIixGcmllblBlbmN5ZERlbF9BY2NvdW50OlwiZnJpZW5kQXBwbGljYXRpb25EZWxldGVkVXNlcklETGlzdFwiLFBlZXJfQWNjb3VudDpcInVzZXJJRFwiLEdyb3VwQXR0cjpcImdyb3VwQXR0cmlidXRlTGlzdFwiLEdyb3VwQXR0ckFyeTpcImdyb3VwQXR0cmlidXRlTGlzdFwiLEF0dHJNYWluU2VxOlwibWFpblNlcXVlbmNlXCIsc2VxOlwic2VxdWVuY2VcIixHcm91cEF0dHJPcHRpb246XCJncm91cEF0dHJpYnV0ZU9wdGlvblwiLEJ5dGVzQ2hhbmdlZEtleXM6XCJjaGFuZ2VkS2V5TGlzdFwiLEdyb3VwQXR0ckluZm86XCJncm91cEF0dHJpYnV0ZUxpc3RcIixHcm91cEF0dHJTZXE6XCJtYWluU2VxdWVuY2VcIixQdXNoQ2hhbmdlZEF0dHJWYWxGbGFnOlwiaGFzQ2hhbmdlZEF0dHJpYnV0ZUluZm9cIixTdWJLZXlTZXE6XCJzZXF1ZW5jZVwiLFZhbDpcInZhbHVlXCJ9LGlnbm9yZUtleVdvcmQ6W1wiQzJDXCIsXCJJRFwiLFwiVVNQXCJdfSx3dj1FdC50cmltO2Z1bmN0aW9uIFB2KGUsdCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCB0aGUgaW5wdXQgdG8gYmUgYHN0cmluZyB8IHN0cmluZ1tdYFwiKTt0PU9iamVjdC5hc3NpZ24oe3Bhc2NhbENhc2U6ITF9LHQpO3ZhciBuO3JldHVybiAwPT09KGU9QXJyYXkuaXNBcnJheShlKT9lLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbSgpfSkpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RofSkpLmpvaW4oXCItXCIpOmUudHJpbSgpKS5sZW5ndGg/XCJcIjoxPT09ZS5sZW5ndGg/dC5wYXNjYWxDYXNlP2UudG9VcHBlckNhc2UoKTplLnRvTG93ZXJDYXNlKCk6KGUhPT1lLnRvTG93ZXJDYXNlKCkmJihlPUd2KGUpKSxlPWUucmVwbGFjZSgvXltfLlxcLSBdKy8sXCJcIikudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXy5cXC0gXSsoXFx3fCQpL2csKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX0pKS5yZXBsYWNlKC9cXGQrKFxcd3wkKS9nLChmdW5jdGlvbihlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpfSkpLG49ZSx0LnBhc2NhbENhc2U/bi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStuLnNsaWNlKDEpOm4pfXZ0KHt0YXJnZXQ6XCJTdHJpbmdcIixwcm90bzohMCxmb3JjZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEwoKGZ1bmN0aW9uKCl7cmV0dXJuISF5dFtlXSgpfHxcIuKAi8KF4aCOXCIhPVwi4oCLwoXhoI5cIltlXSgpfHx5dFtlXS5uYW1lIT09ZX0pKX0oXCJ0cmltXCIpfSx7dHJpbTpmdW5jdGlvbigpe3JldHVybiB3dih0aGlzKX19KTt2YXIgR3Y9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PSExLG49ITEsbz0hMSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBhPWVbcl07dCYmL1thLXpBLVpdLy50ZXN0KGEpJiZhLnRvVXBwZXJDYXNlKCk9PT1hPyhlPWUuc2xpY2UoMCxyKStcIi1cIitlLnNsaWNlKHIpLHQ9ITEsbz1uLG49ITAscisrKTpuJiZvJiYvW2EtekEtWl0vLnRlc3QoYSkmJmEudG9Mb3dlckNhc2UoKT09PWE/KGU9ZS5zbGljZSgwLHItMSkrXCItXCIrZS5zbGljZShyLTEpLG89bixuPSExLHQ9ITApOih0PWEudG9Mb3dlckNhc2UoKT09PWEmJmEudG9VcHBlckNhc2UoKSE9PWEsbz1uLG49YS50b1VwcGVyQ2FzZSgpPT09YSYmYS50b0xvd2VyQ2FzZSgpIT09YSl9cmV0dXJuIGV9O2Z1bmN0aW9uIFV2KGUsdCl7dmFyIG49MDtyZXR1cm4gZnVuY3Rpb24gZSh0LG8pe2lmKCsrbj4xMDApcmV0dXJuIG4tLSx0O2lmKFdpKHQpKXt2YXIgcj10Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIFlpKHQpP2UodCxvKTp0fSkpO3JldHVybiBuLS0scn1pZihZaSh0KSl7dmFyIGE9KHM9dCxpPWZ1bmN0aW9uKGUsdCl7aWYoIXR1KHQpKXJldHVybiExO2lmKChyPXQpIT09UHYocikpZm9yKHZhciBuPTA7bjxidi5pZ25vcmVLZXlXb3JkLmxlbmd0aCYmIXQuaW5jbHVkZXMoYnYuaWdub3JlS2V5V29yZFtuXSk7bisrKTt2YXIgcjtyZXR1cm4gSmkob1t0XSk/ZnVuY3Rpb24oZSl7cmV0dXJuXCJPUFBPQ2hhbm5lbElEXCI9PT1lP2U6ZVswXS50b1VwcGVyQ2FzZSgpK1B2KGUpLnNsaWNlKDEpfSh0KTpvW3RdfSx1PU9iamVjdC5jcmVhdGUobnVsbCksT2JqZWN0LmtleXMocykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9aShzW2VdLGUpO3QmJih1W3RdPXNbZV0pfSkpLHUpO3JldHVybiBhPUl1KGEsKGZ1bmN0aW9uKHQsbil7cmV0dXJuIFdpKHQpfHxZaSh0KT9lKHQsbyk6dH0pKSxuLS0sYX12YXIgcyxpLHV9KGUsdCl9ZnVuY3Rpb24gRnYoZSx0KXtpZihXaShlKSlyZXR1cm4gZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBZaShlKT9GdihlLHQpOmV9KSk7aWYoWWkoZSkpe3ZhciBuPShvPWUscj1mdW5jdGlvbihlLG4pe3JldHVybiBKaSh0W25dKT9QdihuKTp0W25dfSxhPXt9LE9iamVjdC5rZXlzKG8pLmZvckVhY2goKGZ1bmN0aW9uKGUpe2FbcihvW2VdLGUpXT1vW2VdfSkpLGEpO3JldHVybiBuPUl1KG4sKGZ1bmN0aW9uKGUpe3JldHVybiBXaShlKXx8WWkoZSk/RnYoZSx0KTplfSkpfXZhciBvLHIsYX12YXIgcXY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKSx0aGlzLl9oYW5kbGVyPXQ7dmFyIG49dC5nZXRVUkwoKTt0aGlzLl9zb2NrZXQ9bnVsbCx0aGlzLl9pZD1pdSgpLGFpP29pPyhpaS5jb25uZWN0U29ja2V0KHt1cmw6bixoZWFkZXI6e1wiY29udGVudC10eXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uXCJ9fSksaWkub25Tb2NrZXRDbG9zZSh0aGlzLl9vbkNsb3NlLmJpbmQodGhpcykpLGlpLm9uU29ja2V0T3Blbih0aGlzLl9vbk9wZW4uYmluZCh0aGlzKSksaWkub25Tb2NrZXRNZXNzYWdlKHRoaXMuX29uTWVzc2FnZS5iaW5kKHRoaXMpKSxpaS5vblNvY2tldEVycm9yKHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKSkpOih0aGlzLl9zb2NrZXQ9aWkuY29ubmVjdFNvY2tldCh7dXJsOm4saGVhZGVyOntcImNvbnRlbnQtdHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwifSxjb21wbGV0ZTpmdW5jdGlvbigpe319KSx0aGlzLl9zb2NrZXQub25DbG9zZSh0aGlzLl9vbkNsb3NlLmJpbmQodGhpcykpLHRoaXMuX3NvY2tldC5vbk9wZW4odGhpcy5fb25PcGVuLmJpbmQodGhpcykpLHRoaXMuX3NvY2tldC5vbk1lc3NhZ2UodGhpcy5fb25NZXNzYWdlLmJpbmQodGhpcykpLHRoaXMuX3NvY2tldC5vbkVycm9yKHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKSkpOnNpJiYodGhpcy5fc29ja2V0PW5ldyBXZWJTb2NrZXQobiksdGhpcy5fc29ja2V0Lm9ub3Blbj10aGlzLl9vbk9wZW4uYmluZCh0aGlzKSx0aGlzLl9zb2NrZXQub25tZXNzYWdlPXRoaXMuX29uTWVzc2FnZS5iaW5kKHRoaXMpLHRoaXMuX3NvY2tldC5vbmNsb3NlPXRoaXMuX29uQ2xvc2UuYmluZCh0aGlzKSx0aGlzLl9zb2NrZXQub25lcnJvcj10aGlzLl9vbkVycm9yLmJpbmQodGhpcykpfXJldHVybiBhKGUsW3trZXk6XCJnZXRJRFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkfX0se2tleTpcIl9vbk9wZW5cIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2hhbmRsZXIub25PcGVuKHtpZDp0aGlzLl9pZH0pfX0se2tleTpcIl9vbkNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5faGFuZGxlci5vbkNsb3NlKHtpZDp0aGlzLl9pZCxlOmV9KX19LHtrZXk6XCJfb25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5faGFuZGxlci5vbk1lc3NhZ2UoZSl9fSx7a2V5OlwiX29uRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVyLm9uRXJyb3Ioe2lkOnRoaXMuX2lkLGU6ZX0pfX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYob2kpcmV0dXJuIGlpLm9mZlNvY2tldENsb3NlKCksaWkub2ZmU29ja2V0TWVzc2FnZSgpLGlpLm9mZlNvY2tldE9wZW4oKSxpaS5vZmZTb2NrZXRFcnJvcigpLHZvaWQgaWkuY2xvc2VTb2NrZXQoKTt0aGlzLl9zb2NrZXQmJihhaT8odGhpcy5fc29ja2V0Lm9uQ2xvc2UoKGZ1bmN0aW9uKCl7fSkpLHRoaXMuX3NvY2tldC5vbk9wZW4oKGZ1bmN0aW9uKCl7fSkpLHRoaXMuX3NvY2tldC5vbk1lc3NhZ2UoKGZ1bmN0aW9uKCl7fSkpLHRoaXMuX3NvY2tldC5vbkVycm9yKChmdW5jdGlvbigpe30pKSk6c2kmJih0aGlzLl9zb2NrZXQub25vcGVuPW51bGwsdGhpcy5fc29ja2V0Lm9ubWVzc2FnZT1udWxsLHRoaXMuX3NvY2tldC5vbmNsb3NlPW51bGwsdGhpcy5fc29ja2V0Lm9uZXJyb3I9bnVsbCksbmk/dGhpcy5fc29ja2V0LmNsb3NlKHtjb2RlOmV9KTp0aGlzLl9zb2NrZXQuY2xvc2UoZSksdGhpcy5fc29ja2V0PW51bGwpfX0se2tleTpcInNlbmRcIix2YWx1ZTpmdW5jdGlvbihlKXtvaT9paS5zZW5kU29ja2V0TWVzc2FnZSh7ZGF0YTplLmRhdGEsZmFpbDpmdW5jdGlvbigpe2UuZmFpbCYmZS5yZXF1ZXN0SUQmJmUuZmFpbChlLnJlcXVlc3RJRCl9fSk6dGhpcy5fc29ja2V0JiYoYWk/dGhpcy5fc29ja2V0LnNlbmQoe2RhdGE6ZS5kYXRhLGZhaWw6ZnVuY3Rpb24oKXtlLmZhaWwmJmUucmVxdWVzdElEJiZlLmZhaWwoZS5yZXF1ZXN0SUQpfX0pOnNpJiZ0aGlzLl9zb2NrZXQuc2VuZChlLmRhdGEpKX19XSksZX0oKSx4dj00ZTMsVnY9NDAwMSxLdj1bXCJrZXlNYXBcIl0sQnY9W1wia2V5TWFwXCJdLEh2PVwiY29ubmVjdGVkXCIsanY9XCJjb25uZWN0aW5nXCIsJHY9XCJkaXNjb25uZWN0ZWRcIixZdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX2NoYW5uZWxNb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJTb2NrZXRIYW5kbGVyXCIsdGhpcy5fcHJvbWlzZU1hcD1uZXcgTWFwLHRoaXMuX3JlYWR5U3RhdGU9JHYsdGhpcy5fc2ltcGxlUmVxdWVzdE1hcD1uZXcgTWFwLHRoaXMuTUFYX1NJWkU9MTAwLHRoaXMuX3N0YXJ0U2VxdWVuY2U9aXUoKSx0aGlzLl9zdGFydFRzPTAsdGhpcy5fcmVDb25uZWN0RmxhZz0hMSx0aGlzLl9uZXh0UGluZ1RzPTAsdGhpcy5fcmVDb25uZWN0Q291bnQ9MCx0aGlzLk1BWF9SRUNPTk5FQ1RfQ09VTlQ9Myx0aGlzLl9zb2NrZXRJRD0tMSx0aGlzLl9yYW5kb209MCx0aGlzLl9zb2NrZXQ9bnVsbCx0aGlzLl91cmw9XCJcIix0aGlzLl9vbk9wZW5Ucz0wLHRoaXMuX3NldE92ZXJzZWFIb3N0KCksdGhpcy5faW5pdENvbm5lY3Rpb24oKX1yZXR1cm4gYShlLFt7a2V5OlwiX3NldE92ZXJzZWFIb3N0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jaGFubmVsTW9kdWxlLmlzT3ZlcnNlYSgpJiZXcy5IT1NULnNldEN1cnJlbnQoenMpfX0se2tleTpcIl9pbml0Q29ubmVjdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7XCJcIj09PXRoaXMuX3VybD90aGlzLl91cmw9V3MuSE9TVC5DVVJSRU5ULkRFRkFVTFQ6dGhpcy5fdXJsPT09V3MuSE9TVC5DVVJSRU5ULkRFRkFVTFQ/dGhpcy5fdXJsPVdzLkhPU1QuQ1VSUkVOVC5CQUNLVVA6dGhpcy5fdXJsPT09V3MuSE9TVC5DVVJSRU5ULkJBQ0tVUCYmKHRoaXMuX3VybD1Xcy5IT1NULkNVUlJFTlQuREVGQVVMVCksdGhpcy5fY29ubmVjdCgpLHRoaXMuX25leHRQaW5nVHM9MH19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtlJTE9PTAmJnRoaXMuX2NoZWNrUHJvbWlzZU1hcCgpfX0se2tleTpcIl9jaGVja1Byb21pc2VNYXBcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7MCE9PXRoaXMuX3Byb21pc2VNYXAuc2l6ZSYmdGhpcy5fcHJvbWlzZU1hcC5mb3JFYWNoKChmdW5jdGlvbih0LG4pe3ZhciBvPXQucmVqZWN0LHI9dC50aW1lc3RhbXA7RGF0ZS5ub3coKS1yPj0xNWUzJiYoS2kubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fY2hlY2tQcm9taXNlTWFwIHJlcXVlc3QgdGltZW91dCwgZGVsZXRlIHJlcXVlc3RJRDpcIikuY29uY2F0KG4pKSxlLl9wcm9taXNlTWFwLmRlbGV0ZShuKSxvKG5ldyBhbSh7Y29kZTpUcC5ORVRXT1JLX1RJTUVPVVQsbWVzc2FnZTpFZH0pKSxlLl9jaGFubmVsTW9kdWxlLm9uUmVxdWVzdFRpbWVvdXQobikpfSkpfX0se2tleTpcIm9uT3BlblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uT3BlblRzPURhdGUubm93KCk7dmFyIHQ9ZS5pZDt0aGlzLl9zb2NrZXRJRD10LG5ldyBqZChaZCkuc2V0TWVzc2FnZShuKS5zZXRNZXNzYWdlKFwic29ja2V0SUQ6XCIuY29uY2F0KHQpKS5lbmQoKTt2YXIgbj1EYXRlLm5vdygpLXRoaXMuX3N0YXJ0VHM7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25PcGVuIGNvc3QgXCIpLmNvbmNhdChuLFwiIG1zLiBzb2NrZXRJRDpcIikuY29uY2F0KHQpKSxlLmlkPT09dGhpcy5fc29ja2V0SUQmJih0aGlzLl9yZWFkeVN0YXRlPUh2LHRoaXMuX3JlQ29ubmVjdENvdW50PTAsdGhpcy5fcmVzZW5kKCksITA9PT10aGlzLl9yZUNvbm5lY3RGbGFnJiYodGhpcy5fY2hhbm5lbE1vZHVsZS5vblJlY29ubmVjdGVkKCksdGhpcy5fcmVDb25uZWN0RmxhZz0hMSksdGhpcy5fY2hhbm5lbE1vZHVsZS5vbk9wZW4oKSl9fSx7a2V5Olwib25DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBqZChlZyksbj1lLmlkLG89ZS5lLHI9XCJzb3VyY2VTb2NrZXRJRDpcIi5jb25jYXQobixcIiBjdXJyZW50U29ja2V0SUQ6XCIpLmNvbmNhdCh0aGlzLl9zb2NrZXRJRCksYT0wOzAhPT10aGlzLl9vbk9wZW5UcyYmKGE9RGF0ZS5ub3coKS10aGlzLl9vbk9wZW5UcyksdC5zZXRNZXNzYWdlKGEpLnNldE1vcmVNZXNzYWdlKHIpLnNldENvZGUoby5jb2RlKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9vbkNsb3NlIGNvZGU6XCIpLmNvbmNhdChvLmNvZGUsXCIgcmVhc29uOlwiKS5jb25jYXQoby5yZWFzb24sXCIgXCIpLmNvbmNhdChyLFwiIG9ubGluZVRpbWU6XCIpLmNvbmNhdChhKSksbj09PXRoaXMuX3NvY2tldElEJiYodGhpcy5fcmVhZHlTdGF0ZT0kdixhPDFlMz90aGlzLl9jaGFubmVsTW9kdWxlLm9uUmVjb25uZWN0RmFpbGVkKCk6dGhpcy5fY2hhbm5lbE1vZHVsZS5vbkNsb3NlKCkpfX0se2tleTpcIm9uRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmlkLG49ZS5lLG89XCJzb3VyY2VTb2NrZXRJRDpcIi5jb25jYXQodCxcIiBjdXJyZW50U29ja2V0SUQ6XCIpLmNvbmNhdCh0aGlzLl9zb2NrZXRJRCk7bmV3IGpkKHRnKS5zZXRNZXNzYWdlKG4uZXJyTXNnfHxhdShuKSkuc2V0TW9yZU1lc3NhZ2Uobykuc2V0TGV2ZWwoXCJlcnJvclwiKS5lbmQoKSxLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25FcnJvclwiKSxuLG8pLHQ9PT10aGlzLl9zb2NrZXRJRCYmKHRoaXMuX3JlYWR5U3RhdGU9XCJcIix0aGlzLl9jaGFubmVsTW9kdWxlLm9uRXJyb3IoKSl9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9SlNPTi5wYXJzZShlLmRhdGEpfWNhdGNoKF9NKXtuZXcgamQoX2cpLnNldE1lc3NhZ2UoZS5kYXRhKS5lbmQoKX1pZih0JiZ0LmhlYWQpe3ZhciBuPXRoaXMuX2dldFJlcXVlc3RJREZyb21IZWFkKHQuaGVhZCksbz1DdSh0LmhlYWQpLHI9RnYodC5ib2R5LHRoaXMuX2dldFJlc3BvbnNlS2V5TWFwKG8pKTtpZihLaS5kZWJ1ZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NZXNzYWdlIHJldDpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KHIpLFwiIHJlcXVlc3RJRDpcIikuY29uY2F0KG4sXCIgaGFzOlwiKS5jb25jYXQodGhpcy5fcHJvbWlzZU1hcC5oYXMobikpKSx0aGlzLl9zZXROZXh0UGluZ1RzKCksdGhpcy5fcHJvbWlzZU1hcC5oYXMobikpe3ZhciBhPXRoaXMuX3Byb21pc2VNYXAuZ2V0KG4pLHM9YS5yZXNvbHZlLGk9YS5yZWplY3QsdT1hLnRpbWVzdGFtcDtyZXR1cm4gdGhpcy5fcHJvbWlzZU1hcC5kZWxldGUobiksdGhpcy5fY2FsY1JUVCh1KSx2b2lkKHIuZXJyb3JDb2RlJiYwIT09ci5lcnJvckNvZGU/KHRoaXMuX2NoYW5uZWxNb2R1bGUub25FcnJvckNvZGVOb3RaZXJvKHIpLGkobmV3IGFtKHtjb2RlOnIuZXJyb3JDb2RlLG1lc3NhZ2U6ci5lcnJvckluZm98fFwiXCJ9KSkpOnMoWl8ocikpKX10aGlzLl9jaGFubmVsTW9kdWxlLm9uTWVzc2FnZSh7aGVhZDp0LmhlYWQsYm9keTpyfSl9fX0se2tleTpcIl9jYWxjUlRUXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9RGF0ZS5ub3coKS1lO3RoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKGxsKS5hZGRSVFQodCl9fSx7a2V5OlwiX2Nvbm5lY3RcIix2YWx1ZTpmdW5jdGlvbigpe25ldyBqZChRZCkuc2V0TWVzc2FnZShcInVybDpcIi5jb25jYXQodGhpcy5nZXRVUkwoKSkpLmVuZCgpLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX2Nvbm5lY3QgdXJsOlwiKS5jb25jYXQodGhpcy5nZXRVUkwoKSkpLHRoaXMuX3N0YXJ0VHM9RGF0ZS5ub3coKSx0aGlzLl9zb2NrZXQ9bmV3IHF2KHRoaXMpLHRoaXMuX3NvY2tldElEPXRoaXMuX3NvY2tldC5nZXRJRCgpLHRoaXMuX3JlYWR5U3RhdGU9anZ9fSx7a2V5OlwiZ2V0VVJMXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jaGFubmVsTW9kdWxlLmdldE1vZHVsZShYYyk7cmV0dXJuXCJcIi5jb25jYXQodGhpcy5fdXJsLFwiL2luZm8/c2RrYXBwaWQ9XCIpLmNvbmNhdChlLmdldFNES0FwcElEKCksXCImaW5zdGFuY2VpZD1cIikuY29uY2F0KGUuZ2V0SW5zdGFuY2VJRCgpLFwiJnJhbmRvbT1cIikuY29uY2F0KHRoaXMuX2dldFJhbmRvbSgpKX19LHtrZXk6XCJfY2xvc2VDb25uZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fY2xvc2VDb25uZWN0aW9uXCIpKSx0aGlzLl9zb2NrZXQmJih0aGlzLl9zb2NrZXQuY2xvc2UoZSksdGhpcy5fc29ja2V0SUQ9LTEsdGhpcy5fc29ja2V0PW51bGwsdGhpcy5fcmVhZHlTdGF0ZT0kdil9fSx7a2V5OlwiX3Jlc2VuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9yZXNlbmQgcmVDb25uZWN0RmxhZzpcIikuY29uY2F0KHRoaXMuX3JlQ29ubmVjdEZsYWcpLFwicHJvbWlzZU1hcC5zaXplOlwiLmNvbmNhdCh0aGlzLl9wcm9taXNlTWFwLnNpemUsXCIgc2ltcGxlUmVxdWVzdE1hcC5zaXplOlwiKS5jb25jYXQodGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5zaXplKSksdGhpcy5fcHJvbWlzZU1hcC5zaXplPjAmJnRoaXMuX3Byb21pc2VNYXAuZm9yRWFjaCgoZnVuY3Rpb24odCxuKXt2YXIgbz10LnVwbGlua0RhdGEscj10LnJlc29sdmUsYT10LnJlamVjdDtlLl9wcm9taXNlTWFwLnNldChuLHtyZXNvbHZlOnIscmVqZWN0OmEsdGltZXN0YW1wOkRhdGUubm93KCksdXBsaW5rRGF0YTpvfSksZS5fZXhlY3V0ZShuLG8pfSkpLHRoaXMuX3NpbXBsZVJlcXVlc3RNYXAuc2l6ZT4wKXt2YXIgdCxuPUQodGhpcy5fc2ltcGxlUmVxdWVzdE1hcCk7dHJ5e2ZvcihuLnMoKTshKHQ9bi5uKCkpLmRvbmU7KXt2YXIgbz1tKHQudmFsdWUsMikscj1vWzBdLGE9b1sxXTt0aGlzLl9leGVjdXRlKHIsYSl9fWNhdGNoKHMpe24uZShzKX1maW5hbGx5e24uZigpfXRoaXMuX3NpbXBsZVJlcXVlc3RNYXAuY2xlYXIoKX19fSx7a2V5Olwic2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5oZWFkLnNlcT10aGlzLl9nZXRTZXF1ZW5jZSgpLGUuaGVhZC5yZXF0aW1lPU1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpO2Uua2V5TWFwO3ZhciBuPWcoZSxLdiksbz10aGlzLl9nZXRSZXF1ZXN0SURGcm9tSGVhZChlLmhlYWQpLHI9SlNPTi5zdHJpbmdpZnkobik7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihlLGEpeyh0Ll9wcm9taXNlTWFwLnNldChvLHtyZXNvbHZlOmUscmVqZWN0OmEsdGltZXN0YW1wOkRhdGUubm93KCksdXBsaW5rRGF0YTpyfSksS2kuZGVidWcoXCJcIi5jb25jYXQodC5fY2xhc3NOYW1lLFwiLnNlbmQgdXBsaW5rRGF0YTpcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KG4pLFwiIHJlcXVlc3RJRDpcIikuY29uY2F0KG8sXCIgcmVhZHlTdGF0ZTpcIikuY29uY2F0KHQuX3JlYWR5U3RhdGUpKSx0Ll9yZWFkeVN0YXRlIT09SHYpP3QuX3JlQ29ubmVjdCgpOih0Ll9leGVjdXRlKG8sciksdC5fY2hhbm5lbE1vZHVsZS5nZXRNb2R1bGUobGwpLmFkZFJlcXVlc3RDb3VudCgpKX0pKX19LHtrZXk6XCJzaW1wbHlTZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5oZWFkLnNlcT10aGlzLl9nZXRTZXF1ZW5jZSgpLGUuaGVhZC5yZXF0aW1lPU1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpO2Uua2V5TWFwO3ZhciB0PWcoZSxCdiksbj10aGlzLl9nZXRSZXF1ZXN0SURGcm9tSGVhZChlLmhlYWQpLG89SlNPTi5zdHJpbmdpZnkodCk7dGhpcy5fcmVhZHlTdGF0ZSE9PUh2Pyh0aGlzLl9zaW1wbGVSZXF1ZXN0TWFwLnNpemU8dGhpcy5NQVhfU0laRT90aGlzLl9zaW1wbGVSZXF1ZXN0TWFwLnNldChuLG8pOktpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuc2ltcGx5U2VuZC4gc2ltcGxlUmVxdWVzdE1hcCBpcyBmdWxsLCBkcm9wIHJlcXVlc3QhXCIpKSx0aGlzLl9yZUNvbm5lY3QoKSk6dGhpcy5fZXhlY3V0ZShuLG8pfX0se2tleTpcIl9leGVjdXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9zb2NrZXQuc2VuZCh7ZGF0YTp0LGZhaWw6YWk/dGhpcy5fb25TZW5kRmFpbC5iaW5kKHRoaXMpOnZvaWQgMCxyZXF1ZXN0SUQ6ZX0pfX0se2tleTpcIl9vblNlbmRGYWlsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fb25TZW5kRmFpbCByZXF1ZXN0SUQ6XCIpLmNvbmNhdChlKSl9fSx7a2V5OlwiX2dldFNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZTtpZih0aGlzLl9zdGFydFNlcXVlbmNlPDI0MTU5MTkxMDMpcmV0dXJuIGU9dGhpcy5fc3RhcnRTZXF1ZW5jZSx0aGlzLl9zdGFydFNlcXVlbmNlKz0xLDI0MTU5MTkxMDM9PT10aGlzLl9zdGFydFNlcXVlbmNlJiYodGhpcy5fc3RhcnRTZXF1ZW5jZT1pdSgpKSxlfX0se2tleTpcIl9nZXRSZXF1ZXN0SURGcm9tSGVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnNlcnZjbWQrZS5zZXF9fSx7a2V5OlwiX2dldFJlc3BvbnNlS2V5TWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5fY2hhbm5lbE1vZHVsZS5nZXRLZXlNYXAoZSk7cmV0dXJuIHQodCh7fSxidi5yZXNwb25zZSksbi5yZXNwb25zZSl9fSx7a2V5OlwiX3JlQ29ubmVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVhZHlTdGF0ZSE9PUh2JiZ0aGlzLl9yZWFkeVN0YXRlIT09anYmJnRoaXMuZm9yY2VkUmVjb25uZWN0KCl9fSx7a2V5OlwiZm9yY2VkUmVjb25uZWN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZm9yY2VkUmVjb25uZWN0IGNvdW50OlwiKS5jb25jYXQodGhpcy5fcmVDb25uZWN0Q291bnQsXCIgcmVhZHlTdGF0ZTpcIikuY29uY2F0KHRoaXMuX3JlYWR5U3RhdGUpKSx0aGlzLl9yZUNvbm5lY3RGbGFnPSEwLHRoaXMuX3Jlc2V0UmFuZG9tKCksdGhpcy5fcmVDb25uZWN0Q291bnQ8dGhpcy5NQVhfUkVDT05ORUNUX0NPVU5UPyh0aGlzLl9yZUNvbm5lY3RDb3VudCs9MSx0aGlzLl9jbG9zZUNvbm5lY3Rpb24oVnYpLHRoaXMuX2luaXRDb25uZWN0aW9uKCkpOnRoaXMuX2NoYW5uZWxNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXTtuWzFdO28/KEtpLndhcm4oXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLmZvcmNlZFJlY29ubmVjdCBkaXNjb25uZWN0ZWQgZnJvbSB3c3NlcnZlciBidXQgbmV0d29yayBpcyBvaywgY29udGludWUuLi5cIikpLGUuX3JlQ29ubmVjdENvdW50PTAsZS5fY2xvc2VDb25uZWN0aW9uKFZ2KSxlLl9pbml0Q29ubmVjdGlvbigpKTplLl9jaGFubmVsTW9kdWxlLm9uUmVjb25uZWN0RmFpbGVkKCl9KSl9fSx7a2V5OlwiZ2V0UmVjb25uZWN0RmxhZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlQ29ubmVjdEZsYWd9fSx7a2V5OlwiX3NldE5leHRQaW5nVHNcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX25leHRQaW5nVHM9RGF0ZS5ub3coKSsxZTR9fSx7a2V5OlwiZ2V0TmV4dFBpbmdUc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25leHRQaW5nVHN9fSx7a2V5OlwiaXNDb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWFkeVN0YXRlPT09SHZ9fSx7a2V5OlwiX2dldFJhbmRvbVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLl9yYW5kb20mJih0aGlzLl9yYW5kb209TWF0aC5yYW5kb20oKSksdGhpcy5fcmFuZG9tfX0se2tleTpcIl9yZXNldFJhbmRvbVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmFuZG9tPTB9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuY2xvc2VcIikpLHRoaXMuX2Nsb3NlQ29ubmVjdGlvbih4diksdGhpcy5fcHJvbWlzZU1hcC5jbGVhcigpLHRoaXMuX3N0YXJ0U2VxdWVuY2U9aXUoKSx0aGlzLl9yZWFkeVN0YXRlPSR2LHRoaXMuX3NpbXBsZVJlcXVlc3RNYXAuY2xlYXIoKSx0aGlzLl9yZUNvbm5lY3RGbGFnPSExLHRoaXMuX3JlQ29ubmVjdENvdW50PTAsdGhpcy5fb25PcGVuVHM9MCx0aGlzLl91cmw9XCJcIix0aGlzLl9yYW5kb209MH19XSksZX0oKSx6dj1mdW5jdGlvbihlKXtpKG4sZSk7dmFyIHQ9XyhuKTtmdW5jdGlvbiBuKGUpe3ZhciByO2lmKG8odGhpcyxuKSwocj10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIkNoYW5uZWxNb2R1bGVcIixyLl9zb2NrZXRIYW5kbGVyPW5ldyBZdihoKHIpKSxyLl9wcm9iaW5nPSExLHIuX2lzQXBwU2hvd2luZz0hMCxyLl9wcmV2aW91c1N0YXRlPXJvLk5FVF9TVEFURV9DT05ORUNURUQsYWkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGlpLm9uQXBwU2hvdyYmXCJmdW5jdGlvblwiPT10eXBlb2YgaWkub25BcHBIaWRlKXt2YXIgYT1yLl9vbkFwcEhpZGUuYmluZChoKHIpKSxzPXIuX29uQXBwU2hvdy5iaW5kKGgocikpO1wiZnVuY3Rpb25cIj09dHlwZW9mIGlpLm9mZkFwcEhpZGUmJmlpLm9mZkFwcEhpZGUoYSksXCJmdW5jdGlvblwiPT10eXBlb2YgaWkub2ZmQXBwU2hvdyYmaWkub2ZmQXBwU2hvdyhzKSxpaS5vbkFwcEhpZGUoYSksaWkub25BcHBTaG93KHMpfXJldHVybiByLl90aW1lckZvck5vdExvZ2dlZEluPS0xLHIuX3RpbWVyRm9yTm90TG9nZ2VkSW49c2V0SW50ZXJ2YWwoci5vbkNoZWNrVGltZXIuYmluZChoKHIpKSwxZTMpLHIuX2ZhdGFsRXJyb3JGbGFnPSExLHJ9cmV0dXJuIGEobixbe2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3NvY2tldEhhbmRsZXImJih0aGlzLmlzTG9nZ2VkSW4oKT8odGhpcy5fdGltZXJGb3JOb3RMb2dnZWRJbj4wJiYoY2xlYXJJbnRlcnZhbCh0aGlzLl90aW1lckZvck5vdExvZ2dlZEluKSx0aGlzLl90aW1lckZvck5vdExvZ2dlZEluPS0xKSx0aGlzLl9zb2NrZXRIYW5kbGVyLm9uQ2hlY2tUaW1lcihlKSk6dGhpcy5fc29ja2V0SGFuZGxlci5vbkNoZWNrVGltZXIoMSksdGhpcy5fY2hlY2tOZXh0UGluZygpKX19LHtrZXk6XCJvbkVycm9yQ29kZU5vdFplcm9cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmdldE1vZHVsZShhbCkub25FcnJvckNvZGVOb3RaZXJvKGUpfX0se2tleTpcIm9uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ2V0TW9kdWxlKGFsKS5vbk1lc3NhZ2UoZSl9fSx7a2V5Olwic2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zb2NrZXRIYW5kbGVyP3RoaXMuX3ByZXZpb3VzU3RhdGUhPT1yby5ORVRfU1RBVEVfQ09OTkVDVEVEJiZlLmhlYWQuc2VydmNtZC5pbmNsdWRlcyhncCk/dGhpcy5fc2VuZExvZ1ZpYUhUVFAoZSk6dGhpcy5fc29ja2V0SGFuZGxlci5zZW5kKGUpOlByb21pc2UucmVqZWN0KCl9fSx7a2V5OlwiX3NlbmRMb2dWaWFIVFRQXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3ZhciBvPVwiaHR0cHM6Ly93ZWJpbS50aW0ucXEuY29tL3Y0L2ltb3BlbnN0YXQvdGltX3dlYl9yZXBvcnRfdjI/c2RrYXBwaWQ9XCIuY29uY2F0KGUuaGVhZC5zZGthcHBpZCxcIiZyZXF0aW1lPVwiKS5jb25jYXQoRGF0ZS5ub3coKSkscj1KU09OLnN0cmluZ2lmeShlLmJvZHkpLGE9XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOFwiO2lmKGFpKWlpLnJlcXVlc3Qoe3VybDpvLGRhdGE6cixtZXRob2Q6XCJQT1NUXCIsdGltZW91dDozZTMsaGVhZGVyOntcImNvbnRlbnQtdHlwZVwiOmF9LHN1Y2Nlc3M6ZnVuY3Rpb24oKXt0KCl9LGZhaWw6ZnVuY3Rpb24oKXtuKG5ldyBhbSh7Y29kZTpUcC5ORVRXT1JLX0VSUk9SLG1lc3NhZ2U6RGR9KSl9fSk7ZWxzZXt2YXIgcz1uZXcgWE1MSHR0cFJlcXVlc3QsaT1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3MuYWJvcnQoKSxuKG5ldyBhbSh7Y29kZTpUcC5ORVRXT1JLX1RJTUVPVVQsbWVzc2FnZTpFZH0pKX0pLDNlMyk7cy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09cy5yZWFkeVN0YXRlJiYoY2xlYXJUaW1lb3V0KGkpLDIwMD09PXMuc3RhdHVzfHwzMDQ9PT1zLnN0YXR1cz90KCk6bihuZXcgYW0oe2NvZGU6VHAuTkVUV09SS19FUlJPUixtZXNzYWdlOkRkfSkpKX0scy5vcGVuKFwiUE9TVFwiLG8sITApLHMuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLGEpLHMuc2VuZChyKX19KSl9fSx7a2V5Olwic2ltcGx5U2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zb2NrZXRIYW5kbGVyP3RoaXMuX3NvY2tldEhhbmRsZXIuc2ltcGx5U2VuZChlKTpQcm9taXNlLnJlamVjdCgpfX0se2tleTpcIm9uT3BlblwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcGluZygpfX0se2tleTpcIm9uQ2xvc2VcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVDb25uZWN0KCl9fSx7a2V5Olwib25FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKCl7YWkmJktpLmVycm9yKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vbkVycm9yIOS7jnYyLjExLjLotbfvvIxTREsg5pSv5oyB5LqGIFdlYlNvY2tldO+8jOWmguaCqOacqua3u+WKoOebuOWFs+WPl+S/oeWfn+WQje+8jOivt+WFiOa3u+WKoO+8geWNh+e6p+aMh+W8lTogaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL3R1dG9yaWFsLTAyLXVwZ3JhZGVndWlkZWxpbmUuaHRtbFwiKSl9fSx7a2V5OlwiZ2V0S2V5TWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKGFsKS5nZXRLZXlNYXAoZSl9fSx7a2V5OlwiX29uQXBwSGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNBcHBTaG93aW5nPSExfX0se2tleTpcIl9vbkFwcFNob3dcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzQXBwU2hvd2luZz0hMH19LHtrZXk6XCJvblJlcXVlc3RUaW1lb3V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7fX0se2tleTpcIm9uUmVjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe0tpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25SZWNvbm5lY3RlZFwiKSksdGhpcy5nZXRNb2R1bGUoYWwpLm9uUmVjb25uZWN0ZWQoKSx0aGlzLl9lbWl0TmV0U3RhdGVDaGFuZ2VFdmVudChyby5ORVRfU1RBVEVfQ09OTkVDVEVEKX19LHtrZXk6XCJvblJlY29ubmVjdEZhaWxlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5vblJlY29ubmVjdEZhaWxlZFwiKSksdGhpcy5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQocm8uTkVUX1NUQVRFX0RJU0NPTk5FQ1RFRCl9fSx7a2V5OlwicmVDb25uZWN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtpZighdGhpcy5fZmF0YWxFcnJvckZsYWcmJnRoaXMuX3NvY2tldEhhbmRsZXIpe3ZhciBlPXRoaXMuX3NvY2tldEhhbmRsZXIuZ2V0UmVjb25uZWN0RmxhZygpO2lmKEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVDb25uZWN0IHByZXZpb3VzU3RhdGU6XCIpLmNvbmNhdCh0aGlzLl9wcmV2aW91c1N0YXRlLFwiIHJlY29ubmVjdEZsYWc6XCIpLmNvbmNhdChlKSksdGhpcy5fcHJldmlvdXNTdGF0ZT09PXJvLk5FVF9TVEFURV9DT05ORUNUSU5HJiZlKXJldHVybjt0aGlzLl9zb2NrZXRIYW5kbGVyLmZvcmNlZFJlY29ubmVjdCgpLHRoaXMuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KHJvLk5FVF9TVEFURV9DT05ORUNUSU5HKX19fSx7a2V5OlwiX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcHJldmlvdXNTdGF0ZSE9PWUmJih0aGlzLl9wcmV2aW91c1N0YXRlPWUsdGhpcy5lbWl0T3V0ZXJFdmVudChvby5ORVRfU1RBVEVfQ0hBTkdFLHtzdGF0ZTplfSkpfX0se2tleTpcIl9waW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCEwIT09dGhpcy5fcHJvYmluZyl7dGhpcy5fcHJvYmluZz0hMDt2YXIgdD10aGlzLmdldE1vZHVsZShhbCkuZ2V0UHJvdG9jb2xEYXRhKHtwcm90b2NvbE5hbWU6aHB9KTt0aGlzLnNlbmQodCkudGhlbigoZnVuY3Rpb24oKXtlLl9wcm9iaW5nPSExfSkpLmNhdGNoKChmdW5jdGlvbih0KXtpZihLaS53YXJuKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fcGluZyBmYWlsZWQuIGVycm9yOlwiKSx0KSxlLl9wcm9iaW5nPSExLHQmJjYwMDAyPT09dC5jb2RlKXJldHVybiBuZXcgamQoZGgpLnNldE1lc3NhZ2UoXCJjb2RlOlwiLmNvbmNhdCh0LmNvZGUsXCIgbWVzc2FnZTpcIikuY29uY2F0KHQubWVzc2FnZSkpLnNldE5ldHdvcmtUeXBlKGUuZ2V0TW9kdWxlKGVsKS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxlLl9mYXRhbEVycm9yRmxhZz0hMCx2b2lkIGUuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KHJvLk5FVF9TVEFURV9ESVNDT05ORUNURUQpO2UucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24odCl7dmFyIG49bSh0LDIpLG89blswXSxyPW5bMV07S2kubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5fcGluZyBmYWlsZWQuIGlzQXBwU2hvd2luZzpcIikuY29uY2F0KGUuX2lzQXBwU2hvd2luZyxcIiBvbmxpbmU6XCIpLmNvbmNhdChvLFwiIG5ldHdvcmtUeXBlOlwiKS5jb25jYXQocikpLG8/ZS5yZUNvbm5lY3QoKTplLl9lbWl0TmV0U3RhdGVDaGFuZ2VFdmVudChyby5ORVRfU1RBVEVfRElTQ09OTkVDVEVEKX0pKX0pKX19fSx7a2V5OlwiX2NoZWNrTmV4dFBpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3NvY2tldEhhbmRsZXImJih0aGlzLl9zb2NrZXRIYW5kbGVyLmlzQ29ubmVjdGVkKCkmJkRhdGUubm93KCk+PXRoaXMuX3NvY2tldEhhbmRsZXIuZ2V0TmV4dFBpbmdUcygpJiZ0aGlzLl9waW5nKCkpfX0se2tleTpcImRlYWxsb2NcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3NvY2tldEhhbmRsZXImJih0aGlzLl9zb2NrZXRIYW5kbGVyLmNsb3NlKCksdGhpcy5fc29ja2V0SGFuZGxlcj1udWxsKSx0aGlzLl90aW1lckZvck5vdExvZ2dlZEluPi0xJiZjbGVhckludGVydmFsKHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW4pfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9wcmV2aW91c1N0YXRlPXJvLk5FVF9TVEFURV9DT05ORUNURUQsdGhpcy5fcHJvYmluZz0hMSx0aGlzLl9mYXRhbEVycm9yRmxhZz0hMSx0aGlzLl90aW1lckZvck5vdExvZ2dlZEluPXNldEludGVydmFsKHRoaXMub25DaGVja1RpbWVyLmJpbmQodGhpcyksMWUzKX19XSksbn0ocGwpLFd2PVtcImEyXCIsXCJ0aW55aWRcIl0sSnY9W1wiYTJcIixcInRpbnlpZFwiXSxYdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX2NsYXNzTmFtZT1cIlByb3RvY29sSGFuZGxlclwiLHRoaXMuX3Nlc3Npb25Nb2R1bGU9dCx0aGlzLl9jb25maWdNYXA9bmV3IE1hcCx0aGlzLl9maWxsQ29uZmlnTWFwKCl9cmV0dXJuIGEoZSxbe2tleTpcIl9maWxsQ29uZmlnTWFwXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb25maWdNYXAuY2xlYXIoKTt2YXIgZT10aGlzLl9zZXNzaW9uTW9kdWxlLmdlbkNvbW1vbkhlYWQoKSxuPXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2VuQ29zU3BlY2lmaWVkSGVhZCgpLG89dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZW5TU09SZXBvcnRIZWFkKCk7dGhpcy5fY29uZmlnTWFwLnNldChkbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5JTV9PUEVOX1NUQVRVUyxcIi5cIikuY29uY2F0KFdzLkNNRC5MT0dJTil9KSxib2R5OntzdGF0ZTpcIk9ubGluZVwifSxrZXlNYXA6e3Jlc3BvbnNlOntUaW55SWQ6XCJ0aW55SURcIixJbnN0SWQ6XCJpbnN0YW5jZUlEXCIsSGVsbG9JbnRlcnZhbDpcImhlbGxvSW50ZXJ2YWxcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZ2wsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuSU1fT1BFTl9TVEFUVVMsXCIuXCIpLmNvbmNhdChXcy5DTUQuTE9HT1VUKX0pLGJvZHk6e3R5cGU6MH0sa2V5TWFwOntyZXF1ZXN0Ont0eXBlOlwid3Nsb2dvdXRfdHlwZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChobCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5JTV9PUEVOX1NUQVRVUyxcIi5cIikuY29uY2F0KFdzLkNNRC5IRUxMTyl9KSxib2R5Ont9LGtleU1hcDp7cmVzcG9uc2U6e05ld0luc3RJbmZvOlwibmV3SW5zdGFuY2VJbmZvXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHBwLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLklNX0NPU19TSUdOLFwiLlwiKS5jb25jYXQoV3MuQ01ELkNPU19TSUdOKX0pLGJvZHk6e2NtZDpcIm9wZW5faW1fY29zX3N2Y1wiLHN1YkNtZDpcImdldF9jb3NfdG9rZW5cIixkdXJhdGlvbjozMDAsdmVyc2lvbjoyfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJTaWc6XCJ1c2Vyc2lnXCIsc3ViQ21kOlwic3ViX2NtZFwiLGNtZDpcImNtZFwiLGR1cmF0aW9uOlwiZHVyYXRpb25cIix2ZXJzaW9uOlwidmVyc2lvblwifSxyZXNwb25zZTp7ZXhwaXJlZF90aW1lOlwiZXhwaXJlZFRpbWVcIixidWNrZXRfbmFtZTpcImJ1Y2tldE5hbWVcIixzZXNzaW9uX3Rva2VuOlwic2Vzc2lvblRva2VuXCIsdG1wX3NlY3JldF9pZDpcInNlY3JldElkXCIsdG1wX3NlY3JldF9rZXk6XCJzZWNyZXRLZXlcIn19fX0obikpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZHAsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuQ1VTVE9NX1VQTE9BRCxcIi5cIikuY29uY2F0KFdzLkNNRC5DT1NfUFJFX1NJRyl9KSxib2R5OntmaWxlVHlwZTp2b2lkIDAsZmlsZU5hbWU6dm9pZCAwLHVwbG9hZE1ldGhvZDowLGR1cmF0aW9uOjkwMH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VyU2lnOlwidXNlcnNpZ1wiLGZpbGVUeXBlOlwiZmlsZV90eXBlXCIsZmlsZU5hbWU6XCJmaWxlX25hbWVcIix1cGxvYWRNZXRob2Q6XCJ1cGxvYWRfbWV0aG9kXCJ9LHJlc3BvbnNlOntleHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwiLHJlcXVlc3RfaWQ6XCJyZXF1ZXN0SWRcIixoZWFkX3VybDpcImhlYWRVcmxcIix1cGxvYWRfdXJsOlwidXBsb2FkVXJsXCIsZG93bmxvYWRfdXJsOlwiZG93bmxvYWRVcmxcIixjaV91cmw6XCJjaVVybFwifX19fShuKSksdGhpcy5fY29uZmlnTWFwLnNldCh5cCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5DTE9VRF9DT05UUk9MLFwiLlwiKS5jb25jYXQoV3MuQ01ELkZFVENIX0NMT1VEX0NPTlRST0xfQ09ORklHKX0pLGJvZHk6e1NES0FwcElEOjAsdmVyc2lvbjowfSxrZXlNYXA6e3JlcXVlc3Q6e1NES0FwcElEOlwidWludDMyX3Nka2FwcGlkXCIsdmVyc2lvbjpcInVpbnQ2NF92ZXJzaW9uXCJ9LHJlc3BvbnNlOntpbnQzMl9lcnJvcl9jb2RlOlwiZXJyb3JDb2RlXCIsc3RyX2Vycm9yX21lc3NhZ2U6XCJlcnJvck1lc3NhZ2VcIixzdHJfanNvbl9jb25maWc6XCJjbG91ZENvbnRyb2xDb25maWdcIix1aW50MzJfZXhwaXJlZF90aW1lOlwiZXhwaXJlZFRpbWVcIix1aW50MzJfc2RrYXBwaWQ6XCJTREtBcHBJRFwiLHVpbnQ2NF92ZXJzaW9uOlwidmVyc2lvblwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChJcCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5DTE9VRF9DT05UUk9MLFwiLlwiKS5jb25jYXQoV3MuQ01ELlBVU0hFRF9DTE9VRF9DT05UUk9MX0NPTkZJRyl9KSxib2R5Ont9LGtleU1hcDp7cmVzcG9uc2U6e2ludDMyX2Vycm9yX2NvZGU6XCJlcnJvckNvZGVcIixzdHJfZXJyb3JfbWVzc2FnZTpcImVycm9yTWVzc2FnZVwiLHN0cl9qc29uX2NvbmZpZzpcImNsb3VkQ29udHJvbENvbmZpZ1wiLHVpbnQzMl9leHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwiLHVpbnQzMl9zZGthcHBpZDpcIlNES0FwcElEXCIsdWludDY0X3ZlcnNpb246XCJ2ZXJzaW9uXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGZsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChXcy5DTUQuR0VUX01FU1NBR0VTKX0pLGJvZHk6e2Nvb2tpZTpcIlwiLHN5bmNGbGFnOjAsbmVlZEFic3RyYWN0OjEsaXNPbmxpbmVTeW5jOjB9LGtleU1hcDp7cmVxdWVzdDp7ZnJvbUFjY291bnQ6XCJGcm9tX0FjY291bnRcIix0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsZnJvbTpcIkZyb21fQWNjb3VudFwiLHRvOlwiVG9fQWNjb3VudFwiLHRpbWU6XCJNc2dUaW1lU3RhbXBcIixzZXF1ZW5jZTpcIk1zZ1NlcVwiLHJhbmRvbTpcIk1zZ1JhbmRvbVwiLGVsZW1lbnRzOlwiTXNnQm9keVwifSxyZXNwb25zZTp7TXNnTGlzdDpcIm1lc3NhZ2VMaXN0XCIsU3luY0ZsYWc6XCJzeW5jRmxhZ1wiLFRvX0FjY291bnQ6XCJ0b1wiLEZyb21fQWNjb3VudDpcImZyb21cIixDbGllbnRTZXE6XCJjbGllbnRTZXF1ZW5jZVwiLE1zZ1NlcTpcInNlcXVlbmNlXCIsTm90aWNlU2VxOlwibm90aWNlU2VxdWVuY2VcIixOb3RpZnlTZXE6XCJub3RpZnlTZXF1ZW5jZVwiLE1zZ1JhbmRvbTpcInJhbmRvbVwiLE1zZ1RpbWVTdGFtcDpcInRpbWVcIixNc2dDb250ZW50OlwiY29udGVudFwiLFRvR3JvdXBJZDpcImdyb3VwSURcIixNc2dLZXk6XCJtZXNzYWdlS2V5XCIsR3JvdXBUaXBzOlwiZ3JvdXBUaXBzXCIsTXNnQm9keTpcImVsZW1lbnRzXCIsTXNnVHlwZTpcInR5cGVcIixDMkNSZW1haW5pbmdVbnJlYWRDb3VudDpcIkMyQ1JlbWFpbmluZ1VucmVhZExpc3RcIixDMkNQYWlyVW5yZWFkQ291bnQ6XCJDMkNQYWlyVW5yZWFkTGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChfbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoV3MuQ01ELkJJR19EQVRBX0hBTExXQVlfQVVUSF9LRVkpfSksYm9keTp7fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KG1sLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChXcy5DTUQuU0VORF9NRVNTQUdFKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG9BY2NvdW50OlwiXCIsbXNnVGltZVN0YW1wOnZvaWQgMCxtc2dTZXE6MCxtc2dSYW5kb206MCxtc2dCb2R5OltdLGNsb3VkQ3VzdG9tRGF0YTp2b2lkIDAsbmljazpcIlwiLGF2YXRhcjpcIlwiLG1zZ0xpZmVUaW1lOnZvaWQgMCxvZmZsaW5lUHVzaEluZm86e3B1c2hGbGFnOjAsdGl0bGU6XCJcIixkZXNjOlwiXCIsZXh0OlwiXCIsYXBuc0luZm86e2JhZGdlTW9kZTowfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpcIlwifX19LGtleU1hcDp7cmVxdWVzdDp7ZnJvbUFjY291bnQ6XCJGcm9tX0FjY291bnRcIix0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsbXNnVGltZVN0YW1wOlwiTXNnVGltZVN0YW1wXCIsbXNnU2VxOlwiTXNnU2VxXCIsbXNnUmFuZG9tOlwiTXNnUmFuZG9tXCIsbXNnQm9keTpcIk1zZ0JvZHlcIixjb3VudDpcIk1heENudFwiLGxhc3RNZXNzYWdlVGltZTpcIkxhc3RNc2dUaW1lXCIsbWVzc2FnZUtleTpcIk1zZ0tleVwiLHBlZXJBY2NvdW50OlwiUGVlcl9BY2NvdW50XCIsZGF0YTpcIkRhdGFcIixkZXNjcmlwdGlvbjpcIkRlc2NcIixleHRlbnNpb246XCJFeHRcIix0eXBlOlwiTXNnVHlwZVwiLGNvbnRlbnQ6XCJNc2dDb250ZW50XCIsc2l6ZVR5cGU6XCJUeXBlXCIsdXVpZDpcIlVVSURcIix1cmw6XCJcIixpbWFnZVVybDpcIlVSTFwiLGZpbGVVcmw6XCJVcmxcIixyZW1vdGVBdWRpb1VybDpcIlVybFwiLHJlbW90ZVZpZGVvVXJsOlwiVmlkZW9VcmxcIix0aHVtYlVVSUQ6XCJUaHVtYlVVSURcIix2aWRlb1VVSUQ6XCJWaWRlb1VVSURcIix2aWRlb1VybDpcIlwiLGRvd25sb2FkRmxhZzpcIkRvd25sb2FkX0ZsYWdcIixuaWNrOlwiRnJvbV9BY2NvdW50Tmlja1wiLGF2YXRhcjpcIkZyb21fQWNjb3VudEhlYWR1cmxcIixmcm9tOlwiRnJvbV9BY2NvdW50XCIsdGltZTpcIk1zZ1RpbWVTdGFtcFwiLG1lc3NhZ2VSYW5kb206XCJNc2dSYW5kb21cIixtZXNzYWdlU2VxdWVuY2U6XCJNc2dTZXFcIixlbGVtZW50czpcIk1zZ0JvZHlcIixjbGllbnRTZXF1ZW5jZTpcIkNsaWVudFNlcVwiLHBheWxvYWQ6XCJNc2dDb250ZW50XCIsbWVzc2FnZUxpc3Q6XCJNc2dMaXN0XCIsbWVzc2FnZU51bWJlcjpcIk1zZ051bVwiLGFic3RyYWN0TGlzdDpcIkFic3RyYWN0TGlzdFwiLG1lc3NhZ2VCb2R5OlwiTXNnQm9keVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh2bCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KFdzLkNNRC5TRU5EX0dST1VQX01FU1NBR0UpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIixncm91cElEOlwiXCIscmFuZG9tOjAsY2xpZW50U2VxdWVuY2U6MCxwcmlvcml0eTpcIlwiLG1zZ0JvZHk6W10sY2xvdWRDdXN0b21EYXRhOnZvaWQgMCxvbmxpbmVPbmx5RmxhZzowLG9mZmxpbmVQdXNoSW5mbzp7cHVzaEZsYWc6MCx0aXRsZTpcIlwiLGRlc2M6XCJcIixleHQ6XCJcIixhcG5zSW5mbzp7YmFkZ2VNb2RlOjB9LGFuZHJvaWRJbmZvOntPUFBPQ2hhbm5lbElEOlwiXCJ9fSxncm91cEF0SW5mbzpbXX0sa2V5TWFwOntyZXF1ZXN0Ont0bzpcIkdyb3VwSWRcIixleHRlbnNpb246XCJFeHRcIixkYXRhOlwiRGF0YVwiLGRlc2NyaXB0aW9uOlwiRGVzY1wiLHJhbmRvbTpcIlJhbmRvbVwiLHNlcXVlbmNlOlwiUmVxTXNnU2VxXCIsY291bnQ6XCJSZXFNc2dOdW1iZXJcIix0eXBlOlwiTXNnVHlwZVwiLHByaW9yaXR5OlwiTXNnUHJpb3JpdHlcIixjb250ZW50OlwiTXNnQ29udGVudFwiLGVsZW1lbnRzOlwiTXNnQm9keVwiLHNpemVUeXBlOlwiVHlwZVwiLHV1aWQ6XCJVVUlEXCIsdXJsOlwiXCIsaW1hZ2VVcmw6XCJVUkxcIixmaWxlVXJsOlwiVXJsXCIscmVtb3RlQXVkaW9Vcmw6XCJVcmxcIixyZW1vdGVWaWRlb1VybDpcIlZpZGVvVXJsXCIsdGh1bWJVVUlEOlwiVGh1bWJVVUlEXCIsdmlkZW9VVUlEOlwiVmlkZW9VVUlEXCIsdmlkZW9Vcmw6XCJcIixkb3dubG9hZEZsYWc6XCJEb3dubG9hZF9GbGFnXCIsY2xpZW50U2VxdWVuY2U6XCJDbGllbnRTZXFcIixmcm9tOlwiRnJvbV9BY2NvdW50XCIsdGltZTpcIk1zZ1RpbWVTdGFtcFwiLG1lc3NhZ2VSYW5kb206XCJNc2dSYW5kb21cIixtZXNzYWdlU2VxdWVuY2U6XCJNc2dTZXFcIixwYXlsb2FkOlwiTXNnQ29udGVudFwiLG1lc3NhZ2VMaXN0OlwiTXNnTGlzdFwiLG1lc3NhZ2VOdW1iZXI6XCJNc2dOdW1cIixhYnN0cmFjdExpc3Q6XCJBYnN0cmFjdExpc3RcIixtZXNzYWdlQm9keTpcIk1zZ0JvZHlcIn0scmVzcG9uc2U6e01zZ1RpbWU6XCJ0aW1lXCIsTXNnU2VxOlwic2VxdWVuY2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoRGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KFdzLkNNRC5SRVZPS0VfQzJDX01FU1NBR0UpfSksYm9keTp7bXNnSW5mbzp7ZnJvbUFjY291bnQ6XCJcIix0b0FjY291bnQ6XCJcIixtc2dUaW1lU3RhbXA6MCxtc2dTZXE6MCxtc2dSYW5kb206MH19LGtleU1hcDp7cmVxdWVzdDp7bXNnSW5mbzpcIk1zZ0luZm9cIixtc2dUaW1lU3RhbXA6XCJNc2dUaW1lU3RhbXBcIixtc2dTZXE6XCJNc2dTZXFcIixtc2dSYW5kb206XCJNc2dSYW5kb21cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoJGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChXcy5DTUQuUkVWT0tFX0dST1VQX01FU1NBR0UpfSksYm9keTp7dG86XCJcIixtc2dTZXFMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont0bzpcIkdyb3VwSWRcIixtc2dTZXFMaXN0OlwiTXNnU2VxTGlzdFwiLG1zZ1NlcTpcIk1zZ1NlcVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChDbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoV3MuQ01ELkdFVF9DMkNfUk9BTV9NRVNTQUdFUyl9KSxib2R5OntwZWVyQWNjb3VudDpcIlwiLGNvdW50OjE1LGxhc3RNZXNzYWdlVGltZTowLG1lc3NhZ2VLZXk6XCJcIix3aXRoUmVjYWxsZWRNZXNzYWdlOjF9LGtleU1hcDp7cmVxdWVzdDp7bWVzc2FnZUtleTpcIk1zZ0tleVwiLHBlZXJBY2NvdW50OlwiUGVlcl9BY2NvdW50XCIsY291bnQ6XCJNYXhDbnRcIixsYXN0TWVzc2FnZVRpbWU6XCJMYXN0TXNnVGltZVwiLHdpdGhSZWNhbGxlZE1lc3NhZ2U6XCJXaXRoUmVjYWxsZWRNc2dcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoemwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChXcy5DTUQuR0VUX0dST1VQX1JPQU1fTUVTU0FHRVMpfSksYm9keTp7d2l0aFJlY2FsbGVkTXNnOjEsZ3JvdXBJRDpcIlwiLGNvdW50OjE1LHNlcXVlbmNlOlwiXCJ9LGtleU1hcDp7cmVxdWVzdDp7c2VxdWVuY2U6XCJSZXFNc2dTZXFcIixjb3VudDpcIlJlcU1zZ051bWJlclwiLHdpdGhSZWNhbGxlZE1lc3NhZ2U6XCJXaXRoUmVjYWxsZWRNc2dcIn0scmVzcG9uc2U6e1JhbmRvbTpcInJhbmRvbVwiLE1zZ1RpbWU6XCJ0aW1lXCIsTXNnU2VxOlwic2VxdWVuY2VcIixSZXFNc2dTZXE6XCJzZXF1ZW5jZVwiLFJzcE1zZ0xpc3Q6XCJtZXNzYWdlTGlzdFwiLElzUGxhY2VNc2c6XCJpc1BsYWNlTWVzc2FnZVwiLElzU3lzdGVtTXNnOlwiaXNTeXN0ZW1NZXNzYWdlXCIsVG9Hcm91cElkOlwidG9cIixFbnVtRnJvbV9BY2NvdW50VHlwZTpcImZyb21BY2NvdW50VHlwZVwiLEVudW1Ub19BY2NvdW50VHlwZTpcInRvQWNjb3VudFR5cGVcIixHcm91cENvZGU6XCJncm91cENvZGVcIixNc2dQcmlvcml0eTpcInByaW9yaXR5XCIsTXNnQm9keTpcImVsZW1lbnRzXCIsTXNnVHlwZTpcInR5cGVcIixNc2dDb250ZW50OlwiY29udGVudFwiLElzRmluaXNoZWQ6XCJjb21wbGV0ZVwiLERvd25sb2FkX0ZsYWc6XCJkb3dubG9hZEZsYWdcIixDbGllbnRTZXE6XCJjbGllbnRTZXF1ZW5jZVwiLFRodW1iVVVJRDpcInRodW1iVVVJRFwiLFZpZGVvVVVJRDpcInZpZGVvVVVJRFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChFbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoV3MuQ01ELlNFVF9DMkNfTUVTU0FHRV9SRUFEKX0pLGJvZHk6e0MyQ01zZ1JlYWRlZDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bGFzdE1lc3NhZ2VUaW1lOlwiTGFzdGVkTXNnVGltZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChZbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KFdzLkNNRC5TRVRfR1JPVVBfTUVTU0FHRV9SRUFEKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLG1lc3NhZ2VSZWFkU2VxOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OnttZXNzYWdlUmVhZFNlcTpcIk1zZ1JlYWRlZFNlcVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChrbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5PUEVOX0lNLFwiLlwiKS5jb25jYXQoV3MuQ01ELkRFTEVURV9DMkNfTUVTU0FHRSl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHRvOlwiXCIsa2V5TGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7a2V5TGlzdDpcIk1zZ0tleUxpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZXAsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChXcy5DTUQuREVMRVRFX0dST1VQX01FU1NBR0UpfSksYm9keTp7Z3JvdXBJRDpcIlwiLGRlbGV0ZXI6XCJcIixrZXlMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntkZWxldGVyOlwiRGVsZXRlcl9BY2NvdW50XCIsa2V5TGlzdDpcIlNlcXNcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQWwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KFdzLkNNRC5HRVRfUEVFUl9SRUFEX1RJTUUpfSksYm9keTp7dXNlcklETGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dXNlcklETGlzdDpcIlRvX0FjY291bnRcIn0scmVzcG9uc2U6e1JlYWRUaW1lOlwicGVlclJlYWRUaW1lTGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChPbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5SRUNFTlRfQ09OVEFDVCxcIi5cIikuY29uY2F0KFdzLkNNRC5HRVRfQ09OVkVSU0FUSU9OX0xJU1QpfSksYm9keTp7ZnJvbUFjY291bnQ6dm9pZCAwLGNvdW50OjB9LGtleU1hcDp7cmVxdWVzdDp7fSxyZXNwb25zZTp7U2Vzc2lvbkl0ZW06XCJjb252ZXJzYXRpb25zXCIsVG9BY2NvdW50OlwiZ3JvdXBJRFwiLFRvX0FjY291bnQ6XCJ1c2VySURcIixVbnJlYWRNc2dDb3VudDpcInVucmVhZENvdW50XCIsTXNnR3JvdXBSZWFkZWRTZXE6XCJtZXNzYWdlUmVhZFNlcVwiLEMyY1BlZXJSZWFkVGltZTpcImMyY1BlZXJSZWFkVGltZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChObCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5SRUNFTlRfQ09OVEFDVCxcIi5cIikuY29uY2F0KFdzLkNNRC5QQUdJTkdfR0VUX0NPTlZFUlNBVElPTl9MSVNUKX0pLGJvZHk6e2Zyb21BY2NvdW50OnZvaWQgMCx0aW1lU3RhbXA6dm9pZCAwLHN0YXJ0SW5kZXg6dm9pZCAwLHBpbm5lZFRpbWVTdGFtcDp2b2lkIDAscGlubmVkU3RhcnRJbmRleDp2b2lkIDAsb3JkZXJUeXBlOnZvaWQgMCxtZXNzYWdlQXNzaXN0RmxhZzo0LGFzc2lzdEZsYWc6N30sa2V5TWFwOntyZXF1ZXN0OnttZXNzYWdlQXNzaXN0RmxhZzpcIk1zZ0Fzc2lzdEZsYWdzXCIsYXNzaXN0RmxhZzpcIkFzc2lzdEZsYWdzXCIscGlubmVkVGltZVN0YW1wOlwiVG9wVGltZVN0YW1wXCIscGlubmVkU3RhcnRJbmRleDpcIlRvcFN0YXJ0SW5kZXhcIn0scmVzcG9uc2U6e1Nlc3Npb25JdGVtOlwiY29udmVyc2F0aW9uc1wiLFRvQWNjb3VudDpcImdyb3VwSURcIixUb19BY2NvdW50OlwidXNlcklEXCIsVW5yZWFkTXNnQ291bnQ6XCJ1bnJlYWRDb3VudFwiLE1zZ0dyb3VwUmVhZGVkU2VxOlwibWVzc2FnZVJlYWRTZXFcIixDMmNQZWVyUmVhZFRpbWU6XCJjMmNQZWVyUmVhZFRpbWVcIixMYXN0TXNnRmxhZ3M6XCJsYXN0TWVzc2FnZUZsYWdcIixUb3BGbGFnczpcImlzUGlubmVkXCIsVG9wVGltZVN0YW1wOlwicGlubmVkVGltZVN0YW1wXCIsVG9wU3RhcnRJbmRleDpcInBpbm5lZFN0YXJ0SW5kZXhcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuUkVDRU5UX0NPTlRBQ1QsXCIuXCIpLmNvbmNhdChXcy5DTUQuREVMRVRFX0NPTlZFUlNBVElPTil9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHRvQWNjb3VudDp2b2lkIDAsdHlwZToxLHRvR3JvdXBJRDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dG9Hcm91cElEOlwiVG9Hcm91cGlkXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFJsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLlJFQ0VOVF9DT05UQUNULFwiLlwiKS5jb25jYXQoV3MuQ01ELlBJTl9DT05WRVJTQVRJT04pfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIixvcGVyYXRpb25UeXBlOjEsaXRlbUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2l0ZW1MaXN0OlwiUmVjZW50Q29udGFjdEl0ZW1cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoYmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KFdzLkNNRC5ERUxFVEVfR1JPVVBfQVRfVElQUyl9KSxib2R5OnttZXNzYWdlTGlzdFRvRGVsZXRlOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OnttZXNzYWdlTGlzdFRvRGVsZXRlOlwiRGVsTXNnTGlzdFwiLG1lc3NhZ2VTZXE6XCJNc2dTZXFcIixtZXNzYWdlUmFuZG9tOlwiTXNnUmFuZG9tXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KE1sLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLlBST0ZJTEUsXCIuXCIpLmNvbmNhdChXcy5DTUQuUE9SVFJBSVRfR0VUKX0pLGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdXNlckl0ZW06W119LGtleU1hcDp7cmVxdWVzdDp7dG9BY2NvdW50OlwiVG9fQWNjb3VudFwiLHN0YW5kYXJkU2VxdWVuY2U6XCJTdGFuZGFyZFNlcXVlbmNlXCIsY3VzdG9tU2VxdWVuY2U6XCJDdXN0b21TZXF1ZW5jZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh5bCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5QUk9GSUxFLFwiLlwiKS5jb25jYXQoV3MuQ01ELlBPUlRSQUlUX1NFVCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHByb2ZpbGVJdGVtOlt7dGFnOkFfLk5JQ0ssdmFsdWU6XCJcIn0se3RhZzpBXy5HRU5ERVIsdmFsdWU6XCJcIn0se3RhZzpBXy5BTExPV1RZUEUsdmFsdWU6XCJcIn0se3RhZzpBXy5BVkFUQVIsdmFsdWU6XCJcIn1dfSxrZXlNYXA6e3JlcXVlc3Q6e3RvQWNjb3VudDpcIlRvX0FjY291bnRcIixzdGFuZGFyZFNlcXVlbmNlOlwiU3RhbmRhcmRTZXF1ZW5jZVwiLGN1c3RvbVNlcXVlbmNlOlwiQ3VzdG9tU2VxdWVuY2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoSWwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuRlJJRU5ELFwiLlwiKS5jb25jYXQoV3MuQ01ELkdFVF9CTEFDS0xJU1QpfSksYm9keTp7ZnJvbUFjY291bnQ6XCJcIixzdGFydEluZGV4OjAsbWF4TGltaXRlZDozMCxsYXN0U2VxdWVuY2U6MH0sa2V5TWFwOntyZXNwb25zZTp7Q3VycnVlbnRTZXF1ZW5jZTpcImN1cnJlbnRTZXF1ZW5jZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChUbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChXcy5DTUQuQUREX0JMQUNLTElTVCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHRvQWNjb3VudDpbXX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChTbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5GUklFTkQsXCIuXCIpLmNvbmNhdChXcy5DTUQuREVMRVRFX0JMQUNLTElTVCl9KSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHRvQWNjb3VudDpbXX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh3bCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KFdzLkNNRC5HRVRfSk9JTkVEX0dST1VQUyl9KSxib2R5OnttZW1iZXJBY2NvdW50OlwiXCIsbGltaXQ6dm9pZCAwLG9mZnNldDp2b2lkIDAsZ3JvdXBUeXBlOnZvaWQgMCxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjp2b2lkIDAsc2VsZkluZm9GaWx0ZXI6dm9pZCAwfX0sa2V5TWFwOntyZXF1ZXN0OnttZW1iZXJBY2NvdW50OlwiTWVtYmVyX0FjY291bnRcIn0scmVzcG9uc2U6e0dyb3VwSWRMaXN0OlwiZ3JvdXBzXCIsTXNnRmxhZzpcIm1lc3NhZ2VSZW1pbmRUeXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFBsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoV3MuQ01ELkdFVF9HUk9VUF9JTkZPKX0pLGJvZHk6e2dyb3VwSURMaXN0OnZvaWQgMCxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjpbXCJUeXBlXCIsXCJOYW1lXCIsXCJJbnRyb2R1Y3Rpb25cIixcIk5vdGlmaWNhdGlvblwiLFwiRmFjZVVybFwiLFwiT3duZXJfQWNjb3VudFwiLFwiQ3JlYXRlVGltZVwiLFwiSW5mb1NlcVwiLFwiTGFzdEluZm9UaW1lXCIsXCJMYXN0TXNnVGltZVwiLFwiTWVtYmVyTnVtXCIsXCJNYXhNZW1iZXJOdW1cIixcIkFwcGx5Sm9pbk9wdGlvblwiLFwiTmV4dE1zZ1NlcVwiLFwiU2h1dFVwQWxsTWVtYmVyXCJdLGdyb3VwQ3VzdG9tRmllbGRGaWx0ZXI6dm9pZCAwLG1lbWJlckluZm9GaWx0ZXI6dm9pZCAwLG1lbWJlckN1c3RvbUZpZWxkRmlsdGVyOnZvaWQgMH19LGtleU1hcDp7cmVxdWVzdDp7Z3JvdXBJRExpc3Q6XCJHcm91cElkTGlzdFwiLGdyb3VwQ3VzdG9tRmllbGQ6XCJBcHBEZWZpbmVkRGF0YVwiLG1lbWJlckN1c3RvbUZpZWxkOlwiQXBwTWVtYmVyRGVmaW5lZERhdGFcIixncm91cEN1c3RvbUZpZWxkRmlsdGVyOlwiQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBcIixtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjpcIkFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyXCJ9LHJlc3BvbnNlOntHcm91cElkTGlzdDpcImdyb3Vwc1wiLE1zZ0ZsYWc6XCJtZXNzYWdlUmVtaW5kVHlwZVwiLEFwcERlZmluZWREYXRhOlwiZ3JvdXBDdXN0b21GaWVsZFwiLEFwcE1lbWJlckRlZmluZWREYXRhOlwibWVtYmVyQ3VzdG9tRmllbGRcIixBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cDpcImdyb3VwQ3VzdG9tRmllbGRGaWx0ZXJcIixBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cE1lbWJlcjpcIm1lbWJlckN1c3RvbUZpZWxkRmlsdGVyXCIsSW5mb1NlcTpcImluZm9TZXF1ZW5jZVwiLE1lbWJlckxpc3Q6XCJtZW1iZXJzXCIsR3JvdXBJbmZvOlwiZ3JvdXBzXCIsU2h1dFVwVW50aWw6XCJtdXRlVW50aWxcIixTaHV0VXBBbGxNZW1iZXI6XCJtdXRlQWxsTWVtYmVyc1wiLEFwcGx5Sm9pbk9wdGlvbjpcImpvaW5PcHRpb25cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoR2wsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChXcy5DTUQuQ1JFQVRFX0dST1VQKX0pLGJvZHk6e3R5cGU6dm9pZCAwLG5hbWU6dm9pZCAwLGdyb3VwSUQ6dm9pZCAwLG93bmVySUQ6dm9pZCAwLGludHJvZHVjdGlvbjp2b2lkIDAsbm90aWZpY2F0aW9uOnZvaWQgMCxtYXhNZW1iZXJOdW06dm9pZCAwLGpvaW5PcHRpb246dm9pZCAwLG1lbWJlckxpc3Q6dm9pZCAwLGdyb3VwQ3VzdG9tRmllbGQ6dm9pZCAwLG1lbWJlckN1c3RvbUZpZWxkOnZvaWQgMCx3ZWJQdXNoRmxhZzoxLGF2YXRhcjpcIkZhY2VVcmxcIn0sa2V5TWFwOntyZXF1ZXN0Ontvd25lcklEOlwiT3duZXJfQWNjb3VudFwiLHVzZXJJRDpcIk1lbWJlcl9BY2NvdW50XCIsYXZhdGFyOlwiRmFjZVVybFwiLG1heE1lbWJlck51bTpcIk1heE1lbWJlckNvdW50XCIsam9pbk9wdGlvbjpcIkFwcGx5Sm9pbk9wdGlvblwiLGdyb3VwQ3VzdG9tRmllbGQ6XCJBcHBEZWZpbmVkRGF0YVwiLG1lbWJlckN1c3RvbUZpZWxkOlwiQXBwTWVtYmVyRGVmaW5lZERhdGFcIn0scmVzcG9uc2U6e0h1Z2VHcm91cEZsYWc6XCJhdkNoYXRSb29tRmxhZ1wiLE92ZXJKb2luZWRHcm91cExpbWl0X0FjY291bnQ6XCJvdmVyTGltaXRVc2VySURMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFVsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoV3MuQ01ELkRFU1RST1lfR1JPVVApfSksYm9keTp7Z3JvdXBJRDp2b2lkIDB9fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoRmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChXcy5DTUQuTU9ESUZZX0dST1VQX0lORk8pfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsbmFtZTp2b2lkIDAsaW50cm9kdWN0aW9uOnZvaWQgMCxub3RpZmljYXRpb246dm9pZCAwLGF2YXRhcjp2b2lkIDAsbWF4TWVtYmVyTnVtOnZvaWQgMCxqb2luT3B0aW9uOnZvaWQgMCxncm91cEN1c3RvbUZpZWxkOnZvaWQgMCxtdXRlQWxsTWVtYmVyczp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bWF4TWVtYmVyTnVtOlwiTWF4TWVtYmVyQ291bnRcIixncm91cEN1c3RvbUZpZWxkOlwiQXBwRGVmaW5lZERhdGFcIixtdXRlQWxsTWVtYmVyczpcIlNodXRVcEFsbE1lbWJlclwiLGpvaW5PcHRpb246XCJBcHBseUpvaW5PcHRpb25cIixhdmF0YXI6XCJGYWNlVXJsXCJ9LHJlc3BvbnNlOntBcHBEZWZpbmVkRGF0YTpcImdyb3VwQ3VzdG9tRmllbGRcIixTaHV0VXBBbGxNZW1iZXI6XCJtdXRlQWxsTWVtYmVyc1wiLEFwcGx5Sm9pbk9wdGlvbjpcImpvaW5PcHRpb25cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQocWwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChXcy5DTUQuQVBQTFlfSk9JTl9HUk9VUCl9KSxib2R5Ontncm91cElEOnZvaWQgMCxhcHBseU1lc3NhZ2U6dm9pZCAwLHVzZXJEZWZpbmVkRmllbGQ6dm9pZCAwLHdlYlB1c2hGbGFnOjF9LGtleU1hcDp7cmVxdWVzdDp7YXBwbHlNZXNzYWdlOlwiQXBwbHlNc2dcIn0scmVzcG9uc2U6e0h1Z2VHcm91cEZsYWc6XCJhdkNoYXRSb29tRmxhZ1wiLEFWQ2hhdFJvb21LZXk6XCJhdkNoYXRSb29tS2V5XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHhsLGZ1bmN0aW9uKGUpe2UuYTIsZS50aW55aWQ7cmV0dXJue2hlYWQ6dCh0KHt9LGcoZSxXdikpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuQklHX0dST1VQX05PX0FVVEgsXCIuXCIpLmNvbmNhdChXcy5DTUQuQVBQTFlfSk9JTl9HUk9VUCl9KSxib2R5Ontncm91cElEOnZvaWQgMCxhcHBseU1lc3NhZ2U6dm9pZCAwLHVzZXJEZWZpbmVkRmllbGQ6dm9pZCAwLHdlYlB1c2hGbGFnOjF9LGtleU1hcDp7cmVxdWVzdDp7YXBwbHlNZXNzYWdlOlwiQXBwbHlNc2dcIn0scmVzcG9uc2U6e0h1Z2VHcm91cEZsYWc6XCJhdkNoYXRSb29tRmxhZ1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChWbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KFdzLkNNRC5RVUlUX0dST1VQKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEtsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoV3MuQ01ELlNFQVJDSF9HUk9VUF9CWV9JRCl9KSxib2R5Ontncm91cElETGlzdDp2b2lkIDAscmVzcG9uc2VGaWx0ZXI6e2dyb3VwQmFzZVB1YmxpY0luZm9GaWx0ZXI6W1wiVHlwZVwiLFwiTmFtZVwiLFwiSW50cm9kdWN0aW9uXCIsXCJOb3RpZmljYXRpb25cIixcIkZhY2VVcmxcIixcIkNyZWF0ZVRpbWVcIixcIk93bmVyX0FjY291bnRcIixcIkxhc3RJbmZvVGltZVwiLFwiTGFzdE1zZ1RpbWVcIixcIk5leHRNc2dTZXFcIixcIk1lbWJlck51bVwiLFwiTWF4TWVtYmVyTnVtXCIsXCJBcHBseUpvaW5PcHRpb25cIl19fSxrZXlNYXA6e3Jlc3BvbnNlOntBcHBseUpvaW5PcHRpb246XCJqb2luT3B0aW9uXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEJsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoV3MuQ01ELkNIQU5HRV9HUk9VUF9PV05FUil9KSxib2R5Ontncm91cElEOnZvaWQgMCxuZXdPd25lcklEOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntuZXdPd25lcklEOlwiTmV3T3duZXJfQWNjb3VudFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChIbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KFdzLkNNRC5IQU5ETEVfQVBQTFlfSk9JTl9HUk9VUCl9KSxib2R5Ontncm91cElEOnZvaWQgMCxhcHBsaWNhbnQ6dm9pZCAwLGhhbmRsZUFjdGlvbjp2b2lkIDAsaGFuZGxlTWVzc2FnZTp2b2lkIDAsYXV0aGVudGljYXRpb246dm9pZCAwLG1lc3NhZ2VLZXk6dm9pZCAwLHVzZXJEZWZpbmVkRmllbGQ6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2FwcGxpY2FudDpcIkFwcGxpY2FudF9BY2NvdW50XCIsaGFuZGxlQWN0aW9uOlwiSGFuZGxlTXNnXCIsaGFuZGxlTWVzc2FnZTpcIkFwcHJvdmFsTXNnXCIsbWVzc2FnZUtleTpcIk1zZ0tleVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChqbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KFdzLkNNRC5IQU5ETEVfR1JPVVBfSU5WSVRBVElPTil9KSxib2R5Ontncm91cElEOnZvaWQgMCxpbnZpdGVyOnZvaWQgMCxoYW5kbGVBY3Rpb246dm9pZCAwLGhhbmRsZU1lc3NhZ2U6dm9pZCAwLGF1dGhlbnRpY2F0aW9uOnZvaWQgMCxtZXNzYWdlS2V5OnZvaWQgMCx1c2VyRGVmaW5lZEZpZWxkOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntpbnZpdGVyOlwiSW52aXRlcl9BY2NvdW50XCIsaGFuZGxlQWN0aW9uOlwiSGFuZGxlTXNnXCIsaGFuZGxlTWVzc2FnZTpcIkFwcHJvdmFsTXNnXCIsbWVzc2FnZUtleTpcIk1zZ0tleVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChXbCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KFdzLkNNRC5HRVRfR1JPVVBfQVBQTElDQVRJT04pfSksYm9keTp7c3RhcnRUaW1lOnZvaWQgMCxsaW1pdDp2b2lkIDAsaGFuZGxlQWNjb3VudDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7aGFuZGxlQWNjb3VudDpcIkhhbmRsZV9BY2NvdW50XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEpsLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLk9QRU5fSU0sXCIuXCIpLmNvbmNhdChXcy5DTUQuREVMRVRFX0dST1VQX1NZU1RFTV9NRVNTQUdFKX0pLGJvZHk6e21lc3NhZ2VMaXN0VG9EZWxldGU6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21lc3NhZ2VMaXN0VG9EZWxldGU6XCJEZWxNc2dMaXN0XCIsbWVzc2FnZVNlcTpcIk1zZ1NlcVwiLG1lc3NhZ2VSYW5kb206XCJNc2dSYW5kb21cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWGwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuQklHX0dST1VQX0xPTkdfUE9MTElORyxcIi5cIikuY29uY2F0KFdzLkNNRC5BVkNIQVRST09NX0xPTkdfUE9MTCl9KSxib2R5OntVU1A6MSxzdGFydFNlcToxLGhvbGRUaW1lOjkwLGtleTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7VVNQOlwiVVNQXCJ9LHJlc3BvbnNlOntUb0dyb3VwSWQ6XCJncm91cElEXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFFsLGZ1bmN0aW9uKGUpe2UuYTIsZS50aW55aWQ7cmV0dXJue2hlYWQ6dCh0KHt9LGcoZSxKdikpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuQklHX0dST1VQX0xPTkdfUE9MTElOR19OT19BVVRILFwiLlwiKS5jb25jYXQoV3MuQ01ELkFWQ0hBVFJPT01fTE9OR19QT0xMKX0pLGJvZHk6e1VTUDoxLHN0YXJ0U2VxOjEsaG9sZFRpbWU6OTAsa2V5OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntVU1A6XCJVU1BcIn0scmVzcG9uc2U6e1RvR3JvdXBJZDpcImdyb3VwSURcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWmwsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChXcy5DTUQuR0VUX09OTElORV9NRU1CRVJfTlVNKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHRwLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoV3MuQ01ELlNFVF9HUk9VUF9BVFRSSUJVVEVTKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGdyb3VwQXR0cmlidXRlTGlzdDp2b2lkIDAsbWFpblNlcXVlbmNlOnZvaWQgMCxhdkNoYXRSb29tS2V5OnZvaWQgMCxhdHRyaWJ1dGVDb250cm9sOltcIlJhY2VDb25mbGljdFwiXX0sa2V5TWFwOntyZXF1ZXN0OntrZXk6XCJrZXlcIix2YWx1ZTpcInZhbHVlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KG5wLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoV3MuQ01ELk1PRElGWV9HUk9VUF9BVFRSSUJVVEVTKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGdyb3VwQXR0cmlidXRlTGlzdDp2b2lkIDAsbWFpblNlcXVlbmNlOnZvaWQgMCxhdkNoYXRSb29tS2V5OnZvaWQgMCxhdHRyaWJ1dGVDb250cm9sOltcIlJhY2VDb25mbGljdFwiXX0sa2V5TWFwOntyZXF1ZXN0OntrZXk6XCJrZXlcIix2YWx1ZTpcInZhbHVlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KG9wLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoV3MuQ01ELkRFTEVURV9HUk9VUF9BVFRSSUJVVEVTKX0pLGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGdyb3VwQXR0cmlidXRlTGlzdDp2b2lkIDAsbWFpblNlcXVlbmNlOnZvaWQgMCxhdkNoYXRSb29tS2V5OnZvaWQgMCxhdHRyaWJ1dGVDb250cm9sOltcIlJhY2VDb25mbGljdFwiXX0sa2V5TWFwOntyZXF1ZXN0OntrZXk6XCJrZXlcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQocnAsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChXcy5DTUQuQ0xFQVJfR1JPVVBfQVRUUklCVVRFUyl9KSxib2R5Ontncm91cElEOnZvaWQgMCxtYWluU2VxdWVuY2U6dm9pZCAwLGF2Q2hhdFJvb21LZXk6dm9pZCAwLGF0dHJpYnV0ZUNvbnRyb2w6W1wiUmFjZUNvbmZsaWN0XCJdfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGFwLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLkdST1VQX0FUVFIsXCIuXCIpLmNvbmNhdChXcy5DTUQuR0VUX0dST1VQX0FUVFJJQlVURVMpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsYXZDaGF0Um9vbUtleTp2b2lkIDAsZ3JvdXBUeXBlOjF9LGtleU1hcDp7cmVxdWVzdDp7YXZDaGF0Um9vbUtleTpcIktleVwiLGdyb3VwVHlwZTpcIkdyb3VwVHlwZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChzcCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KFdzLkNNRC5HRVRfR1JPVVBfTUVNQkVSX0xJU1QpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsbGltaXQ6MCxvZmZzZXQ6MCxtZW1iZXJSb2xlRmlsdGVyOnZvaWQgMCxtZW1iZXJJbmZvRmlsdGVyOltcIlJvbGVcIixcIk5hbWVDYXJkXCIsXCJTaHV0VXBVbnRpbFwiLFwiSm9pblRpbWVcIl0sbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21lbWJlckN1c3RvbUZpZWxkRmlsdGVyOlwiQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBNZW1iZXJcIn0scmVzcG9uc2U6e0FwcE1lbWJlckRlZmluZWREYXRhOlwibWVtYmVyQ3VzdG9tRmllbGRcIixBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cE1lbWJlcjpcIm1lbWJlckN1c3RvbUZpZWxkRmlsdGVyXCIsTWVtYmVyTGlzdDpcIm1lbWJlcnNcIixTaHV0VXBVbnRpbDpcIm11dGVVbnRpbFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChpcCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5HUk9VUCxcIi5cIikuY29uY2F0KFdzLkNNRC5HRVRfR1JPVVBfTUVNQkVSX0lORk8pfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsdXNlcklETGlzdDp2b2lkIDAsbWVtYmVySW5mb0ZpbHRlcjp2b2lkIDAsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRExpc3Q6XCJNZW1iZXJfTGlzdF9BY2NvdW50XCIsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6XCJBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cE1lbWJlclwifSxyZXNwb25zZTp7TWVtYmVyTGlzdDpcIm1lbWJlcnNcIixTaHV0VXBVbnRpbDpcIm11dGVVbnRpbFwiLEFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyOlwibWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXJcIixBcHBNZW1iZXJEZWZpbmVkRGF0YTpcIm1lbWJlckN1c3RvbUZpZWxkXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHVwLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoV3MuQ01ELkFERF9HUk9VUF9NRU1CRVIpfSksYm9keTp7Z3JvdXBJRDp2b2lkIDAsc2lsZW5jZTp2b2lkIDAsdXNlcklETGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dXNlcklEOlwiTWVtYmVyX0FjY291bnRcIix1c2VySURMaXN0OlwiTWVtYmVyTGlzdFwifSxyZXNwb25zZTp7TWVtYmVyTGlzdDpcIm1lbWJlcnNcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoY3AsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuR1JPVVAsXCIuXCIpLmNvbmNhdChXcy5DTUQuREVMRVRFX0dST1VQX01FTUJFUil9KSxib2R5Ontncm91cElEOnZvaWQgMCx1c2VySURMaXN0OnZvaWQgMCxyZWFzb246dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRExpc3Q6XCJNZW1iZXJUb0RlbF9BY2NvdW50XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGxwLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLkdST1VQLFwiLlwiKS5jb25jYXQoV3MuQ01ELk1PRElGWV9HUk9VUF9NRU1CRVJfSU5GTyl9KSxib2R5Ontncm91cElEOnZvaWQgMCx1c2VySUQ6dm9pZCAwLG1lc3NhZ2VSZW1pbmRUeXBlOnZvaWQgMCxuYW1lQ2FyZDp2b2lkIDAscm9sZTp2b2lkIDAsbWVtYmVyQ3VzdG9tRmllbGQ6dm9pZCAwLG11dGVUaW1lOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VySUQ6XCJNZW1iZXJfQWNjb3VudFwiLG1lbWJlckN1c3RvbUZpZWxkOlwiQXBwTWVtYmVyRGVmaW5lZERhdGFcIixtdXRlVGltZTpcIlNodXRVcFRpbWVcIixtZXNzYWdlUmVtaW5kVHlwZTpcIk1zZ0ZsYWdcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZ3AsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuSU1fT1BFTl9TVEFULFwiLlwiKS5jb25jYXQoV3MuQ01ELlRJTV9XRUJfUkVQT1JUX1YyKX0pLGJvZHk6e2hlYWRlcjp7fSxldmVudDpbXSxxdWFsaXR5OltdfSxrZXlNYXA6e3JlcXVlc3Q6e1NES1R5cGU6XCJzZGtfdHlwZVwiLFNES1ZlcnNpb246XCJzZGtfdmVyc2lvblwiLGRldmljZVR5cGU6XCJkZXZpY2VfdHlwZVwiLHBsYXRmb3JtOlwicGxhdGZvcm1cIixpbnN0YW5jZUlEOlwiaW5zdGFuY2VfaWRcIix0cmFjZUlEOlwidHJhY2VfaWRcIixTREtBcHBJRDpcInNka19hcHBfaWRcIix1c2VySUQ6XCJ1c2VyX2lkXCIsdGlueUlEOlwidGlueV9pZFwiLGV4dGVuc2lvbjpcImV4dGVuc2lvblwiLHRpbWVzdGFtcDpcInRpbWVzdGFtcFwiLG5ldHdvcmtUeXBlOlwibmV0d29ya190eXBlXCIsZXZlbnRUeXBlOlwiZXZlbnRfdHlwZVwiLGNvZGU6XCJlcnJvcl9jb2RlXCIsbWVzc2FnZTpcImVycm9yX21lc3NhZ2VcIixtb3JlTWVzc2FnZTpcIm1vcmVfbWVzc2FnZVwiLGR1cGxpY2F0ZTpcImR1cGxpY2F0ZVwiLGNvc3RUaW1lOlwiY29zdF90aW1lXCIsbGV2ZWw6XCJsZXZlbFwiLHF1YWxpdHlUeXBlOlwicXVhbGl0eV90eXBlXCIscmVwb3J0SW5kZXg6XCJyZXBvcnRfaW5kZXhcIix3aG9sZVBlcmlvZDpcIndob2xlX3BlcmlvZFwiLHRvdGFsQ291bnQ6XCJ0b3RhbF9jb3VudFwiLHJ0dENvdW50Olwic3VjY2Vzc19jb3VudF9idXNpbmVzc1wiLHN1Y2Nlc3NSYXRlT2ZSZXF1ZXN0OlwicGVyY2VudF9idXNpbmVzc1wiLGNvdW50TGVzc1RoYW4xU2Vjb25kOlwic3VjY2Vzc19jb3VudF9idXNpbmVzc1wiLHBlcmNlbnRPZkNvdW50TGVzc1RoYW4xU2Vjb25kOlwicGVyY2VudF9idXNpbmVzc1wiLGNvdW50TGVzc1RoYW4zU2Vjb25kOlwic3VjY2Vzc19jb3VudF9wbGF0Zm9ybVwiLHBlcmNlbnRPZkNvdW50TGVzc1RoYW4zU2Vjb25kOlwicGVyY2VudF9wbGF0Zm9ybVwiLHN1Y2Nlc3NDb3VudE9mQnVzaW5lc3M6XCJzdWNjZXNzX2NvdW50X2J1c2luZXNzXCIsc3VjY2Vzc1JhdGVPZkJ1c2luZXNzOlwicGVyY2VudF9idXNpbmVzc1wiLHN1Y2Nlc3NDb3VudE9mUGxhdGZvcm06XCJzdWNjZXNzX2NvdW50X3BsYXRmb3JtXCIsc3VjY2Vzc1JhdGVPZlBsYXRmb3JtOlwicGVyY2VudF9wbGF0Zm9ybVwiLHN1Y2Nlc3NDb3VudE9mTWVzc2FnZVJlY2VpdmVkOlwic3VjY2Vzc19jb3VudF9idXNpbmVzc1wiLHN1Y2Nlc3NSYXRlT2ZNZXNzYWdlUmVjZWl2ZWQ6XCJwZXJjZW50X2J1c2luZXNzXCIsYXZnUlRUOlwiYXZlcmFnZV92YWx1ZVwiLGF2Z0RlbGF5OlwiYXZlcmFnZV92YWx1ZVwiLGF2Z1ZhbHVlOlwiYXZlcmFnZV92YWx1ZVwifX19fShvKSksdGhpcy5fY29uZmlnTWFwLnNldChocCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5IRUFSVEJFQVQsXCIuXCIpLmNvbmNhdChXcy5DTUQuQUxJVkUpfSksYm9keTp7fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGZwLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLklNX09QRU5fUFVTSCxcIi5cIikuY29uY2F0KFdzLkNNRC5NRVNTQUdFX1BVU0gpfSksYm9keTp7fSxrZXlNYXA6e3Jlc3BvbnNlOntDMmNNc2dBcnJheTpcIkMyQ01lc3NhZ2VBcnJheVwiLEdyb3VwTXNnQXJyYXk6XCJncm91cE1lc3NhZ2VBcnJheVwiLEdyb3VwVGlwczpcImdyb3VwVGlwc1wiLEMyY05vdGlmeU1zZ0FycmF5OlwiQzJDTm90aWZ5TWVzc2FnZUFycmF5XCIsQ2xpZW50U2VxOlwiY2xpZW50U2VxdWVuY2VcIixNc2dQcmlvcml0eTpcInByaW9yaXR5XCIsTm90aWNlU2VxOlwibm90aWNlU2VxdWVuY2VcIixNc2dDb250ZW50OlwiY29udGVudFwiLE1zZ1R5cGU6XCJ0eXBlXCIsTXNnQm9keTpcImVsZW1lbnRzXCIsVG9Hcm91cElkOlwidG9cIixEZXNjOlwiZGVzY3JpcHRpb25cIixFeHQ6XCJleHRlbnNpb25cIixJc1N5bmNNc2c6XCJpc1N5bmNNZXNzYWdlXCIsRmxhZzpcIm5lZWRTeW5jXCIsTmVlZEFjazpcIm5lZWRBY2tcIixQZW5kZW5jeUFkZF9BY2NvdW50OlwidXNlcklEXCIsUHJvZmlsZUltTmljazpcIm5pY2tcIixQZW5kZW5jeVR5cGU6XCJhcHBsaWNhdGlvblR5cGVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoX3AsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6dCh0KHt9LGUpLHt9LHtzZXJ2Y21kOlwiXCIuY29uY2F0KFdzLk5BTUUuT1BFTl9JTSxcIi5cIikuY29uY2F0KFdzLkNNRC5NRVNTQUdFX1BVU0hfQUNLKX0pLGJvZHk6e3Nlc3Npb25EYXRhOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntzZXNzaW9uRGF0YTpcIlNlc3Npb25EYXRhXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KG1wLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLklNX09QRU5fU1RBVFVTLFwiLlwiKS5jb25jYXQoV3MuQ01ELlNUQVRVU19GT1JDRU9GRkxJTkUpfSksYm9keTp7fSxrZXlNYXA6e3Jlc3BvbnNlOntDMmNOb3RpZnlNc2dBcnJheTpcIkMyQ05vdGlmeU1lc3NhZ2VBcnJheVwiLE5vdGljZVNlcTpcIm5vdGljZVNlcXVlbmNlXCIsS2lja291dE1zZ05vdGlmeTpcImtpY2tvdXRNc2dOb3RpZnlcIixOZXdJbnN0SW5mbzpcIm5ld0luc3RhbmNlSW5mb1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChNcCxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp0KHQoe30sZSkse30se3NlcnZjbWQ6XCJcIi5jb25jYXQoV3MuTkFNRS5JTV9MT05HX01FU1NBR0UsXCIuXCIpLmNvbmNhdChXcy5DTUQuRE9XTkxPQURfTUVSR0VSX01FU1NBR0UpfSksYm9keTp7ZG93bmxvYWRLZXk6XCJcIn0sa2V5TWFwOntyZXNwb25zZTp7RGF0YTpcImRhdGFcIixEZXNjOlwiZGVzY3JpcHRpb25cIixFeHQ6XCJleHRlbnNpb25cIixEb3dubG9hZF9GbGFnOlwiZG93bmxvYWRGbGFnXCIsVGh1bWJVVUlEOlwidGh1bWJVVUlEXCIsVmlkZW9VVUlEOlwidmlkZW9VVUlEXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHZwLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnQodCh7fSxlKSx7fSx7c2VydmNtZDpcIlwiLmNvbmNhdChXcy5OQU1FLklNX0xPTkdfTUVTU0FHRSxcIi5cIikuY29uY2F0KFdzLkNNRC5VUExPQURfTUVSR0VSX01FU1NBR0UpfSksYm9keTp7bWVzc2FnZUxpc3Q6W119LGtleU1hcDp7cmVxdWVzdDp7ZnJvbUFjY291bnQ6XCJGcm9tX0FjY291bnRcIix0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsbXNnVGltZVN0YW1wOlwiTXNnVGltZVN0YW1wXCIsbXNnU2VxOlwiTXNnU2VxXCIsbXNnUmFuZG9tOlwiTXNnUmFuZG9tXCIsbXNnQm9keTpcIk1zZ0JvZHlcIix0eXBlOlwiTXNnVHlwZVwiLGNvbnRlbnQ6XCJNc2dDb250ZW50XCIsZGF0YTpcIkRhdGFcIixkZXNjcmlwdGlvbjpcIkRlc2NcIixleHRlbnNpb246XCJFeHRcIixzaXplVHlwZTpcIlR5cGVcIix1dWlkOlwiVVVJRFwiLHVybDpcIlwiLGltYWdlVXJsOlwiVVJMXCIsZmlsZVVybDpcIlVybFwiLHJlbW90ZUF1ZGlvVXJsOlwiVXJsXCIscmVtb3RlVmlkZW9Vcmw6XCJWaWRlb1VybFwiLHRodW1iVVVJRDpcIlRodW1iVVVJRFwiLHZpZGVvVVVJRDpcIlZpZGVvVVVJRFwiLHZpZGVvVXJsOlwiXCIsZG93bmxvYWRGbGFnOlwiRG93bmxvYWRfRmxhZ1wiLGZyb206XCJGcm9tX0FjY291bnRcIix0aW1lOlwiTXNnVGltZVN0YW1wXCIsbWVzc2FnZVJhbmRvbTpcIk1zZ1JhbmRvbVwiLG1lc3NhZ2VTZXF1ZW5jZTpcIk1zZ1NlcVwiLGVsZW1lbnRzOlwiTXNnQm9keVwiLGNsaWVudFNlcXVlbmNlOlwiQ2xpZW50U2VxXCIscGF5bG9hZDpcIk1zZ0NvbnRlbnRcIixtZXNzYWdlTGlzdDpcIk1zZ0xpc3RcIixtZXNzYWdlTnVtYmVyOlwiTXNnTnVtXCIsYWJzdHJhY3RMaXN0OlwiQWJzdHJhY3RMaXN0XCIsbWVzc2FnZUJvZHk6XCJNc2dCb2R5XCJ9fX19KGUpKX19LHtrZXk6XCJoYXNcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29uZmlnTWFwLmhhcyhlKX19LHtrZXk6XCJnZXRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29uZmlnTWFwLmdldChlKX19LHtrZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2ZpbGxDb25maWdNYXAoKX19LHtrZXk6XCJnZXRLZXlNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXMoZSk/dGhpcy5nZXQoZSkua2V5TWFwfHx7fTooS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0S2V5TWFwIHVua25vd24gcHJvdG9jb2xOYW1lOlwiKS5jb25jYXQoZSkpLHt9KX19LHtrZXk6XCJnZXRQcm90b2NvbERhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnByb3RvY29sTmFtZSxuPWUucmVxdWVzdERhdGEsbz10aGlzLmdldCh0KSxyPW51bGw7aWYobil7dmFyIGE9dGhpcy5fc2ltcGxlRGVlcENvcHkobykscz1hLmJvZHksaT1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgdSBpbiBzKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLHUpKXtpZihpW3VdPXNbdV0sdm9pZCAwPT09blt1XSljb250aW51ZTtpW3VdPW5bdV19YS5ib2R5PWkscj10aGlzLl9nZXRVcGxpbmtEYXRhKGEpfWVsc2Ugcj10aGlzLl9nZXRVcGxpbmtEYXRhKG8pO3JldHVybiByfX0se2tleTpcIl9nZXRVcGxpbmtEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcmVxdWVzdERhdGFDbGVhbmVyKGUpLG49Q3UodC5oZWFkKSxvPVV2KHQuYm9keSx0aGlzLl9nZXRSZXF1ZXN0S2V5TWFwKG4pKTtyZXR1cm4gdC5ib2R5PW8sdH19LHtrZXk6XCJfZ2V0UmVxdWVzdEtleU1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuZ2V0S2V5TWFwKGUpO3JldHVybiB0KHQoe30sYnYucmVxdWVzdCksbi5yZXF1ZXN0KX19LHtrZXk6XCJfcmVxdWVzdERhdGFDbGVhbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9QXJyYXkuaXNBcnJheShlKT9bXTpPYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbyBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiZ0dShvKSYmbnVsbCE9PWVbb10mJnZvaWQgMCE9PWVbb10mJihcIm9iamVjdFwiIT09bihlW29dKT90W29dPWVbb106dFtvXT10aGlzLl9yZXF1ZXN0RGF0YUNsZWFuZXIuYmluZCh0aGlzKShlW29dKSk7cmV0dXJuIHR9fSx7a2V5OlwiX3NpbXBsZURlZXBDb3B5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49T2JqZWN0LmtleXMoZSksbz17fSxyPTAsYT1uLmxlbmd0aDtyPGE7cisrKXQ9bltyXSxXaShlW3RdKT9vW3RdPUFycmF5LmZyb20oZVt0XSk6WWkoZVt0XSk/b1t0XT10aGlzLl9zaW1wbGVEZWVwQ29weShlW3RdKTpvW3RdPWVbdF07cmV0dXJuIG99fV0pLGV9KCksUXY9W19wXSxadj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuX3Nlc3Npb25Nb2R1bGU9dCx0aGlzLl9jbGFzc05hbWU9XCJEb3dubGlua0hhbmRsZXJcIix0aGlzLl9ldmVudEhhbmRsZXJNYXA9bmV3IE1hcCx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwiQzJDTWVzc2FnZUFycmF5XCIsdGhpcy5fYzJjTWVzc2FnZUFycmF5SGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwiZ3JvdXBNZXNzYWdlQXJyYXlcIix0aGlzLl9ncm91cE1lc3NhZ2VBcnJheUhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcImdyb3VwVGlwc1wiLHRoaXMuX2dyb3VwVGlwc0hhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcIkMyQ05vdGlmeU1lc3NhZ2VBcnJheVwiLHRoaXMuX0MyQ05vdGlmeU1lc3NhZ2VBcnJheUhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcInByb2ZpbGVNb2RpZnlcIix0aGlzLl9wcm9maWxlSGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwiZnJpZW5kTGlzdE1vZFwiLHRoaXMuX3JlbGF0aW9uQ2hhaW5IYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5zZXQoXCJyZWNlbnRDb250YWN0TW9kXCIsdGhpcy5fcmVjZW50Q29udGFjdEhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fa2V5cz12KHRoaXMuX2V2ZW50SGFuZGxlck1hcC5rZXlzKCkpfXJldHVybiBhKGUsW3trZXk6XCJfYzJjTWVzc2FnZUFycmF5SGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKCRjKTtpZih0KXtpZihlLmRhdGFMaXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKDE9PT1lLmlzU3luY01lc3NhZ2Upe3ZhciB0PWUuZnJvbTtlLmZyb209ZS50byxlLnRvPXR9fSkpLDE9PT1lLm5lZWRTeW5jKXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKHJsKS5zdGFydE9ubGluZVN5bmMoKTt0Lm9uTmV3QzJDTWVzc2FnZSh7ZGF0YUxpc3Q6ZS5kYXRhTGlzdCxpc0luc3RhbnRNZXNzYWdlOiEwfSl9fX0se2tleTpcIl9ncm91cE1lc3NhZ2VBcnJheUhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShZYyk7dCYmdC5vbk5ld0dyb3VwTWVzc2FnZSh7ZXZlbnQ6ZS5ldmVudCxkYXRhTGlzdDplLmRhdGFMaXN0LGlzSW5zdGFudE1lc3NhZ2U6ITB9KX19LHtrZXk6XCJfZ3JvdXBUaXBzSGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKFljKTtpZih0KXt2YXIgbj1lLmV2ZW50LG89ZS5kYXRhTGlzdCxyPWUuaXNJbnN0YW50TWVzc2FnZSxhPXZvaWQgMD09PXJ8fHIscz1lLmlzU3luY2luZ0VuZGVkO3N3aXRjaChuKXtjYXNlIDQ6Y2FzZSA2OnQub25OZXdHcm91cFRpcHMoe2V2ZW50Om4sZGF0YUxpc3Q6b30pO2JyZWFrO2Nhc2UgNTpvLmZvckVhY2goKGZ1bmN0aW9uKGUpe1dpKGUuZWxlbWVudHMucmV2b2tlZEluZm9zKT90Lm9uR3JvdXBNZXNzYWdlUmV2b2tlZCh7ZGF0YUxpc3Q6b30pOldpKGUuZWxlbWVudHMuZ3JvdXBNZXNzYWdlUmVhZE5vdGljZSk/dC5vbkdyb3VwTWVzc2FnZVJlYWROb3RpY2Uoe2RhdGFMaXN0Om99KTp0Lm9uTmV3R3JvdXBTeXN0ZW1Ob3RpY2Uoe2RhdGFMaXN0Om8saXNJbnN0YW50TWVzc2FnZTphLGlzU3luY2luZ0VuZGVkOnN9KX0pKTticmVhaztjYXNlIDEyOnRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKEpjKS5vbk5ld0dyb3VwQXRUaXBzKHtkYXRhTGlzdDpvfSk7YnJlYWs7ZGVmYXVsdDpLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9ncm91cFRpcHNIYW5kbGVyIHVua25vd24gZXZlbnQ6XCIpLmNvbmNhdChuLFwiIGRhdGFMaXN0OlwiKSxvKX19fX0se2tleTpcIl9DMkNOb3RpZnlNZXNzYWdlQXJyYXlIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZGF0YUxpc3Q7aWYoV2kobikpe3ZhciBvPXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKCRjKTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKHppKGUpKWlmKGUuaGFzT3duUHJvcGVydHkoXCJraWNrb3V0TXNnTm90aWZ5XCIpKXt2YXIgcj1lLmtpY2tvdXRNc2dOb3RpZnksYT1yLmtpY2tUeXBlLHM9ci5uZXdJbnN0YW5jZUluZm8saT12b2lkIDA9PT1zP3t9OnM7MT09PWE/dC5fc2Vzc2lvbk1vZHVsZS5vbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dChpKToyPT09YSYmdC5fc2Vzc2lvbk1vZHVsZS5vbk11bHRpcGxlRGV2aWNlS2lja2VkT3V0KGkpfWVsc2UgZS5oYXNPd25Qcm9wZXJ0eShcImMyY01lc3NhZ2VSZXZva2VkTm90aWZ5XCIpP28mJm8ub25DMkNNZXNzYWdlUmV2b2tlZCh7ZGF0YUxpc3Q6bn0pOmUuaGFzT3duUHJvcGVydHkoXCJjMmNNZXNzYWdlUmVhZFJlY2VpcHRcIik/byYmby5vbkMyQ01lc3NhZ2VSZWFkUmVjZWlwdCh7ZGF0YUxpc3Q6bn0pOmUuaGFzT3duUHJvcGVydHkoXCJjMmNNZXNzYWdlUmVhZE5vdGljZVwiKSYmbyYmby5vbkMyQ01lc3NhZ2VSZWFkTm90aWNlKHtkYXRhTGlzdDpufSl9KSl9fX0se2tleTpcIl9wcm9maWxlSGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGpjKS5vblByb2ZpbGVNb2RpZmllZCh7ZGF0YUxpc3Q6ZS5kYXRhTGlzdH0pO3ZhciB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKHpjKTt0JiZ0Lm9uRnJpZW5kUHJvZmlsZU1vZGlmaWVkKHtkYXRhTGlzdDplLmRhdGFMaXN0fSl9fSx7a2V5OlwiX3JlbGF0aW9uQ2hhaW5IYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoamMpLm9uUmVsYXRpb25DaGFpbk1vZGlmaWVkKHtkYXRhTGlzdDplLmRhdGFMaXN0fSk7dmFyIHQ9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoemMpO3QmJnQub25SZWxhdGlvbkNoYWluTW9kaWZpZWQoe2RhdGFMaXN0OmUuZGF0YUxpc3R9KX19LHtrZXk6XCJfcmVjZW50Q29udGFjdEhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmRhdGFMaXN0O2lmKFdpKHQpKXt2YXIgbj10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShKYyk7biYmdC5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLnB1c2hUeXBlLG89ZS5yZWNlbnRDb250YWN0VG9wSXRlbSxyPWUucmVjZW50Q29udGFjdERlbGV0ZUl0ZW07MT09PXQ/bi5vbkNvbnZlcnNhdGlvbkRlbGV0ZWQoci5yZWNlbnRDb250YWN0TGlzdCk6Mj09PXQ/bi5vbkNvbnZlcnNhdGlvblBpbm5lZChvLnJlY2VudENvbnRhY3RMaXN0KTozPT09dCYmbi5vbkNvbnZlcnNhdGlvblVucGlubmVkKG8ucmVjZW50Q29udGFjdExpc3QpfSkpfX19LHtrZXk6XCJfY2xvdWRDb250cm9sQ29uZmlnSGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKHVsKS5vblB1c2hlZENsb3VkQ29udHJvbENvbmZpZyhlKX19LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5oZWFkLG89ZS5ib2R5O2lmKHRoaXMuX2lzUHVzaGVkQ2xvdWRDb250cm9sQ29uZmlnKG4pKXRoaXMuX2Nsb3VkQ29udHJvbENvbmZpZ0hhbmRsZXIobyk7ZWxzZXt2YXIgcj1vLmV2ZW50QXJyYXksYT1vLmlzSW5zdGFudE1lc3NhZ2Uscz1vLmlzU3luY2luZ0VuZGVkLGk9by5uZWVkU3luYztpZihXaShyKSlmb3IodmFyIHU9bnVsbCxjPW51bGwsbD0wLHA9MCxkPXIubGVuZ3RoO3A8ZDtwKyspe2w9KHU9cltwXSkuZXZlbnQ7dmFyIGc9T2JqZWN0LmtleXModSkuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT10Ll9rZXlzLmluZGV4T2YoZSl9KSk7Zz8oYz11W2ddLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5nZXQoZykoe2V2ZW50OmwsZGF0YUxpc3Q6Yyxpc0luc3RhbnRNZXNzYWdlOmEsaXNTeW5jaW5nRW5kZWQ6cyxuZWVkU3luYzppfSkpOktpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIub25NZXNzYWdlIHVua25vd24gZXZlbnRJdGVtOlwiKS5jb25jYXQodSkpfX19fSx7a2V5OlwiX2lzUHVzaGVkQ2xvdWRDb250cm9sQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VydmNtZCYmZS5zZXJ2Y21kLmluY2x1ZGVzKElwKX19XSksZX0oKSxlTT1mdW5jdGlvbihlKXtpKG4sZSk7dmFyIHQ9XyhuKTtmdW5jdGlvbiBuKGUpe3ZhciByO3JldHVybiBvKHRoaXMsbiksKHI9dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJTZXNzaW9uTW9kdWxlXCIsci5fcGxhdGZvcm09ci5nZXRQbGF0Zm9ybSgpLHIuX3Byb3RvY29sSGFuZGxlcj1uZXcgWHYoaChyKSksci5fbWVzc2FnZURpc3BhdGNoZXI9bmV3IFp2KGgocikpLHJ9cmV0dXJuIGEobixbe2tleTpcInVwZGF0ZVByb3RvY29sQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9wcm90b2NvbEhhbmRsZXIudXBkYXRlKCl9fSx7a2V5OlwicmVxdWVzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe0tpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXF1ZXN0IG9wdGlvbnM6XCIpLGUpO3ZhciB0PWUucHJvdG9jb2xOYW1lLG49ZS50amdJRDtpZighdGhpcy5fcHJvdG9jb2xIYW5kbGVyLmhhcyh0KSlyZXR1cm4gS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIucmVxdWVzdCB1bmtub3duIHByb3RvY29sOlwiKS5jb25jYXQodCkpLGNtKHtjb2RlOlRwLkNBTk5PVF9GSU5EX1BST1RPQ09MLG1lc3NhZ2U6a2R9KTt2YXIgbz10aGlzLmdldFByb3RvY29sRGF0YShlKTtMdShuKXx8KG8uaGVhZC50amdJRD1uKTt2YXIgcj10aGlzLmdldE1vZHVsZShzbCk7cmV0dXJuIFF2LmluY2x1ZGVzKHQpP3Iuc2ltcGx5U2VuZChvKTpyLnNlbmQobyl9fSx7a2V5OlwiZ2V0S2V5TWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Byb3RvY29sSGFuZGxlci5nZXRLZXlNYXAoZSl9fSx7a2V5OlwiZ2VuQ29tbW9uSGVhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRNb2R1bGUoWGMpO3JldHVybnt2ZXI6XCJ2NFwiLHBsYXRmb3JtOnRoaXMuX3BsYXRmb3JtLHdlYnNka2FwcGlkOmpzLHdlYnNka3ZlcnNpb246SHMsYTI6ZS5nZXRBMktleSgpfHx2b2lkIDAsdGlueWlkOmUuZ2V0VGlueUlEKCl8fHZvaWQgMCxzdGF0dXNfaW5zdGlkOmUuZ2V0U3RhdHVzSW5zdGFuY2VJRCgpLHNka2FwcGlkOmUuZ2V0U0RLQXBwSUQoKSxjb250ZW50dHlwZTplLmdldENvbnRlbnRUeXBlKCkscmVxdGltZTowLGlkZW50aWZpZXI6ZS5nZXRBMktleSgpP3ZvaWQgMDplLmdldFVzZXJJRCgpLHVzZXJzaWc6ZS5nZXRBMktleSgpP3ZvaWQgMDplLmdldFVzZXJTaWcoKSxzZGthYmlsaXR5OjIsdGpnSUQ6XCJcIn19fSx7a2V5OlwiZ2VuQ29zU3BlY2lmaWVkSGVhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRNb2R1bGUoWGMpO3JldHVybnt2ZXI6XCJ2NFwiLHBsYXRmb3JtOnRoaXMuX3BsYXRmb3JtLHdlYnNka2FwcGlkOmpzLHdlYnNka3ZlcnNpb246SHMsc2RrYXBwaWQ6ZS5nZXRTREtBcHBJRCgpLGNvbnRlbnR0eXBlOmUuZ2V0Q29udGVudFR5cGUoKSxyZXF0aW1lOjAsaWRlbnRpZmllcjplLmdldFVzZXJJRCgpLHVzZXJzaWc6ZS5nZXRVc2VyU2lnKCksc3RhdHVzX2luc3RpZDplLmdldFN0YXR1c0luc3RhbmNlSUQoKSxzZGthYmlsaXR5OjJ9fX0se2tleTpcImdlblNTT1JlcG9ydEhlYWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TW9kdWxlKFhjKTtyZXR1cm57dmVyOlwidjRcIixwbGF0Zm9ybTp0aGlzLl9wbGF0Zm9ybSx3ZWJzZGthcHBpZDpqcyx3ZWJzZGt2ZXJzaW9uOkhzLHNka2FwcGlkOmUuZ2V0U0RLQXBwSUQoKSxjb250ZW50dHlwZTpcIlwiLHJlcXRpbWU6MCxpZGVudGlmaWVyOlwiXCIsdXNlcnNpZzpcIlwiLHN0YXR1c19pbnN0aWQ6ZS5nZXRTdGF0dXNJbnN0YW5jZUlEKCksc2RrYWJpbGl0eToyfX19LHtrZXk6XCJnZXRQcm90b2NvbERhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcHJvdG9jb2xIYW5kbGVyLmdldFByb3RvY29sRGF0YShlKX19LHtrZXk6XCJvbkVycm9yQ29kZU5vdFplcm9cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmVycm9yQ29kZTtpZih0PT09VHAuSEVMTE9fQU5TV0VSX0tJQ0tFRF9PVVQpe3ZhciBuPWUua2lja1R5cGUsbz1lLm5ld0luc3RhbmNlSW5mbyxyPXZvaWQgMD09PW8/e306bzsxPT09bj90aGlzLm9uTXVsdGlwbGVBY2NvdW50S2lja2VkT3V0KHIpOjI9PT1uJiZ0aGlzLm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXQocil9dCE9PVRwLk1FU1NBR0VfQTJLRVlfRVhQSVJFRCYmdCE9PVRwLkFDQ09VTlRfQTJLRVlfRVhQSVJFRHx8KHRoaXMuX29uVXNlclNpZ0V4cGlyZWQoKSx0aGlzLmdldE1vZHVsZShzbCkucmVDb25uZWN0KCkpfX0se2tleTpcIm9uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuYm9keSxuPXQubmVlZEFjayxvPXZvaWQgMD09PW4/MDpuLHI9dC5zZXNzaW9uRGF0YTsxPT09byYmdGhpcy5fc2VuZEFDSyhyKSx0aGlzLl9tZXNzYWdlRGlzcGF0Y2hlci5vbk1lc3NhZ2UoZSl9fSx7a2V5Olwib25SZWNvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmlzTG9nZ2VkSW4oKSYmdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6ZGx9KS50aGVuKChmdW5jdGlvbih0KXt2YXIgbj10LmRhdGEuaW5zdGFuY2VJRDtlLmdldE1vZHVsZShYYykuc2V0U3RhdHVzSW5zdGFuY2VJRChuKSxLaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLm9uUmVjb25uZWN0ZWQsIGxvZ2luIG9rLiBzdGFydCB0byBzeW5jIHVucmVhZCBtZXNzYWdlcy5cIikpLGUuZ2V0TW9kdWxlKHJsKS5zdGFydFN5bmNPblJlY29ubmVjdGVkKCksZS5nZXRNb2R1bGUoY2wpLnN0YXJ0UHVsbCgpLGUuZ2V0TW9kdWxlKFljKS51cGRhdGVMb2NhbE1haW5TZXF1ZW5jZU9uUmVjb25uZWN0ZWQoKX0pKX19LHtrZXk6XCJvbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ2V0TW9kdWxlKEJjKS5vbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dChlKX19LHtrZXk6XCJvbk11bHRpcGxlRGV2aWNlS2lja2VkT3V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5nZXRNb2R1bGUoQmMpLm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXQoZSl9fSx7a2V5OlwiX29uVXNlclNpZ0V4cGlyZWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ2V0TW9kdWxlKEJjKS5vblVzZXJTaWdFeHBpcmVkKCl9fSx7a2V5OlwiX3NlbmRBQ0tcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpfcCxyZXF1ZXN0RGF0YTp7c2Vzc2lvbkRhdGE6ZX19KX19XSksbn0ocGwpLHRNPWZ1bmN0aW9uKGUpe2kobixlKTt2YXIgdD1fKG4pO2Z1bmN0aW9uIG4oZSl7dmFyIHI7cmV0dXJuIG8odGhpcyxuKSwocj10LmNhbGwodGhpcyxlKSkuX2NsYXNzTmFtZT1cIk1lc3NhZ2VMb3NzRGV0ZWN0aW9uTW9kdWxlXCIsci5fbWF5YmVMb3N0U2VxdWVuY2VzTWFwPW5ldyBNYXAscn1yZXR1cm4gYShuLFt7a2V5Olwib25NZXNzYWdlTWF5YmVMb3N0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX21heWJlTG9zdFNlcXVlbmNlc01hcC5oYXMoZSl8fHRoaXMuX21heWJlTG9zdFNlcXVlbmNlc01hcC5zZXQoZSxbXSk7Zm9yKHZhciBvPXRoaXMuX21heWJlTG9zdFNlcXVlbmNlc01hcC5nZXQoZSkscj0wO3I8bjtyKyspby5wdXNoKHQrcik7S2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uTWVzc2FnZU1heWJlTG9zdC4gbWF5YmVMb3N0U2VxdWVuY2VzOlwiKS5jb25jYXQobykpfX0se2tleTpcImRldGVjdE1lc3NhZ2VMb3NzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9tYXliZUxvc3RTZXF1ZW5jZXNNYXAuZ2V0KGUpO2lmKCFMdShuKSYmIUx1KHQpKXt2YXIgbz10LmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1uLmluZGV4T2YoZSl9KSk7aWYoS2kuZGVidWcoXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmRldGVjdE1lc3NhZ2VMb3NzLiBtYXRjaGVkU2VxdWVuY2VzOlwiKS5jb25jYXQobykpLG4ubGVuZ3RoPT09by5sZW5ndGgpS2kuaW5mbyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGV0ZWN0TWVzc2FnZUxvc3Mgbm8gbWVzc2FnZSBsb3NzLiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUpKTtlbHNle3ZhciByLGE9bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybi0xPT09by5pbmRleE9mKGUpfSkpLHM9YS5sZW5ndGg7czw9NT9yPWUrXCItXCIrYS5qb2luKFwiLVwiKTooYS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiBlLXR9KSkscj1lK1wiIHN0YXJ0OlwiK2FbMF0rXCIgZW5kOlwiK2Fbcy0xXStcIiBjb3VudDpcIitzKSxuZXcgamQobmgpLnNldE1lc3NhZ2Uocikuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRMZXZlbChcIndhcm5pbmdcIikuZW5kKCksS2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZGV0ZWN0TWVzc2FnZUxvc3MgbWVzc2FnZSBsb3NzIGRldGVjdGVkLiBjb252ZXJzYXRpb25JRDpcIikuY29uY2F0KGUsXCIgbG9zdFNlcXVlbmNlczpcIikuY29uY2F0KGEpKX1uLmxlbmd0aD0wfX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fbWF5YmVMb3N0U2VxdWVuY2VzTWFwLmNsZWFyKCl9fV0pLG59KHBsKSxuTT1mdW5jdGlvbihlKXtpKG4sZSk7dmFyIHQ9XyhuKTtmdW5jdGlvbiBuKGUpe3ZhciByO3JldHVybiBvKHRoaXMsbiksKHI9dC5jYWxsKHRoaXMsZSkpLl9jbGFzc05hbWU9XCJDbG91ZENvbnRyb2xNb2R1bGVcIixyLl9jbG91ZENvbmZpZz1uZXcgTWFwLHIuX2V4cGlyZWRUaW1lPTAsci5fdmVyc2lvbj0wLHIuX2lzRmV0Y2hpbmc9ITEscn1yZXR1cm4gYShuLFt7a2V5OlwiZ2V0Q2xvdWRDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gSmkoZSk/dGhpcy5fY2xvdWRDb25maWc6dGhpcy5fY2xvdWRDb25maWcuaGFzKGUpP3RoaXMuX2Nsb3VkQ29uZmlnLmdldChlKTp2b2lkIDB9fSx7a2V5OlwiX2NhbkZldGNoQ29uZmlnXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xvZ2dlZEluKCkmJiF0aGlzLl9pc0ZldGNoaW5nJiZEYXRlLm5vdygpPj10aGlzLl9leHBpcmVkVGltZX19LHtrZXk6XCJmZXRjaENvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX2NhbkZldGNoQ29uZmlnKCk7aWYoS2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5mZXRjaENvbmZpZyBjYW5GZXRjaENvbmZpZzpcIikuY29uY2F0KHQpKSx0KXt2YXIgbj1uZXcgamQobGgpLG89dGhpcy5nZXRNb2R1bGUoWGMpLmdldFNES0FwcElEKCk7dGhpcy5faXNGZXRjaGluZz0hMCx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp5cCxyZXF1ZXN0RGF0YTp7U0RLQXBwSUQ6byx2ZXJzaW9uOnRoaXMuX3ZlcnNpb259fSkudGhlbigoZnVuY3Rpb24odCl7ZS5faXNGZXRjaGluZz0hMSxuLnNldE1lc3NhZ2UoXCJ2ZXJzaW9uOlwiLmNvbmNhdChlLl92ZXJzaW9uLFwiIG5ld1ZlcnNpb246XCIpLmNvbmNhdCh0LmRhdGEudmVyc2lvbixcIiBjb25maWc6XCIpLmNvbmNhdCh0LmRhdGEuY2xvdWRDb250cm9sQ29uZmlnKSkuc2V0TmV0d29ya1R5cGUoZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxLaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLmZldGNoQ29uZmlnIG9rXCIpKSxlLl9wYXJzZUNsb3VkQ29udHJvbENvbmZpZyh0LmRhdGEpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtlLl9pc0ZldGNoaW5nPSExLGUucHJvYmVOZXR3b3JrKCkudGhlbigoZnVuY3Rpb24oZSl7dmFyIG89bShlLDIpLHI9b1swXSxhPW9bMV07bi5zZXRFcnJvcih0LHIsYSkuZW5kKCl9KSksS2kubG9nKFwiXCIuY29uY2F0KGUuX2NsYXNzTmFtZSxcIi5mZXRjaENvbmZpZyBmYWlsZWQuIGVycm9yOlwiKSx0KSxlLl9zZXRFeHBpcmVkVGltZU9uUmVzcG9uc2VFcnJvcigxMmU0KX0pKX19fSx7a2V5Olwib25QdXNoZWRDbG91ZENvbnRyb2xDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLm9uUHVzaGVkQ2xvdWRDb250cm9sQ29uZmlnXCIpKSxuZXcgamQocGgpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIm5ld1ZlcnNpb246XCIuY29uY2F0KGUudmVyc2lvbixcIiBjb25maWc6XCIpLmNvbmNhdChlLmNsb3VkQ29udHJvbENvbmZpZykpLmVuZCgpLHRoaXMuX3BhcnNlQ2xvdWRDb250cm9sQ29uZmlnKGUpfX0se2tleTpcIm9uQ2hlY2tUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2NhbkZldGNoQ29uZmlnKCkmJnRoaXMuZmV0Y2hDb25maWcoKX19LHtrZXk6XCJfcGFyc2VDbG91ZENvbnRyb2xDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49XCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9wYXJzZUNsb3VkQ29udHJvbENvbmZpZ1wiKSxvPWUuZXJyb3JDb2RlLHI9ZS5lcnJvck1lc3NhZ2UsYT1lLmNsb3VkQ29udHJvbENvbmZpZyxzPWUudmVyc2lvbixpPWUuZXhwaXJlZFRpbWU7aWYoMD09PW8pe2lmKHRoaXMuX3ZlcnNpb24hPT1zKXt2YXIgdT1udWxsO3RyeXt1PUpTT04ucGFyc2UoYSl9Y2F0Y2goX00pe0tpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgSlNPTiBwYXJzZSBlcnJvcjpcIikuY29uY2F0KGEpKX11JiYodGhpcy5fY2xvdWRDb25maWcuY2xlYXIoKSxPYmplY3Qua2V5cyh1KS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9jbG91ZENvbmZpZy5zZXQoZSx1W2VdKX0pKSx0aGlzLl92ZXJzaW9uPXMsdGhpcy5lbWl0SW5uZXJFdmVudChPbS5DTE9VRF9DT05GSUdfVVBEQVRFRCkpfXRoaXMuX2V4cGlyZWRUaW1lPURhdGUubm93KCkrMWUzKml9ZWxzZSBKaShvKT8oS2kubG9nKFwiXCIuY29uY2F0KG4sXCIgZmFpbGVkLiBJbnZhbGlkIG1lc3NhZ2UgZm9ybWF0OlwiKSxlKSx0aGlzLl9zZXRFeHBpcmVkVGltZU9uUmVzcG9uc2VFcnJvcigzNmU1KSk6KEtpLmVycm9yKFwiXCIuY29uY2F0KG4sXCIgZXJyb3JDb2RlOlwiKS5jb25jYXQobyxcIiBlcnJvck1lc3NhZ2U6XCIpLmNvbmNhdChyKSksdGhpcy5fc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3IoMTJlNCkpfX0se2tleTpcIl9zZXRFeHBpcmVkVGltZU9uUmVzcG9uc2VFcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2V4cGlyZWRUaW1lPURhdGUubm93KCkrZX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fY2xvdWRDb25maWcuY2xlYXIoKSx0aGlzLl9leHBpcmVkVGltZT0wLHRoaXMuX3ZlcnNpb249MCx0aGlzLl9pc0ZldGNoaW5nPSExfX1dKSxufShwbCksb009ZnVuY3Rpb24oZSl7aShuLGUpO3ZhciB0PV8obik7ZnVuY3Rpb24gbihlKXt2YXIgcjtyZXR1cm4gbyh0aGlzLG4pLChyPXQuY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiUHVsbEdyb3VwTWVzc2FnZU1vZHVsZVwiLHIuX3JlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2VNYXA9bmV3IE1hcCxyLlBVTExfTElNSVRfQ09VTlQ9MTUscn1yZXR1cm4gYShuLFt7a2V5Olwic3RhcnRQdWxsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5fZ2V0TmVlZFB1bGxDb252ZXJzYXRpb25MaXN0KCk7dGhpcy5fZ2V0UmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZUxpc3QoKS50aGVuKChmdW5jdGlvbigpe3ZhciBuPWUuZ2V0TW9kdWxlKEpjKTt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBvPXQuY29udmVyc2F0aW9uSUQscj1vLnJlcGxhY2Uocm8uQ09OVl9HUk9VUCxcIlwiKSxhPW4uZ2V0R3JvdXBMb2NhbExhc3RNZXNzYWdlU2VxdWVuY2Uobykscz1lLl9yZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLmdldChyKXx8MCxpPXMtYTtLaS5sb2coXCJcIi5jb25jYXQoZS5fY2xhc3NOYW1lLFwiLnN0YXJ0UHVsbCBncm91cElEOlwiKS5jb25jYXQocixcIiBsb2NhbExhc3RNZXNzYWdlU2VxdWVuY2U6XCIpLmNvbmNhdChhLFwiIFwiKStcInJlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2U6XCIuY29uY2F0KHMsXCIgZGlmZjpcIikuY29uY2F0KGkpKSxhPjAmJmk+PTEmJmk8MzAwJiZlLl9wdWxsTWlzc2luZ01lc3NhZ2Uoe2dyb3VwSUQ6cixsb2NhbExhc3RNZXNzYWdlU2VxdWVuY2U6YSxyZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlOnMsZGlmZjppfSl9KSl9KSl9fSx7a2V5OlwiX2dldE5lZWRQdWxsQ29udmVyc2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKEpjKS5nZXRMb2NhbENvbnZlcnNhdGlvbkxpc3QoKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT1yby5DT05WX0dST1VQJiZlLmdyb3VwUHJvZmlsZS50eXBlIT09cm8uR1JQX0FWQ0hBVFJPT019KSl9fSx7a2V5OlwiX2dldFJlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2VMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLmdldE1vZHVsZShZYykuZ2V0R3JvdXBMaXN0KCkudGhlbigoZnVuY3Rpb24odCl7Zm9yKHZhciBuPXQuZGF0YS5ncm91cExpc3Qsbz12b2lkIDA9PT1uP1tdOm4scj0wO3I8by5sZW5ndGg7cisrKXt2YXIgYT1vW3JdLHM9YS5ncm91cElELGk9YS5uZXh0TWVzc2FnZVNlcTtpZihhLnR5cGUhPT1yby5HUlBfQVZDSEFUUk9PTSl7dmFyIHU9aS0xO2UuX3JlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2VNYXAuc2V0KHMsdSl9fX0pKX19LHtrZXk6XCJfcHVsbE1pc3NpbmdNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUubG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlLG89ZS5yZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlLHI9ZS5kaWZmO2UuY291bnQ9cj50aGlzLlBVTExfTElNSVRfQ09VTlQ/dGhpcy5QVUxMX0xJTUlUX0NPVU5UOnIsZS5zZXF1ZW5jZT1yPnRoaXMuUFVMTF9MSU1JVF9DT1VOVD9uK3RoaXMuUFVMTF9MSU1JVF9DT1VOVDpuK3IsdGhpcy5fZ2V0R3JvdXBNaXNzaW5nTWVzc2FnZShlKS50aGVuKChmdW5jdGlvbihhKXthLmxlbmd0aD4wJiYoYVswXS5zZXF1ZW5jZSsxPD1vJiYoZS5sb2NhbExhc3RNZXNzYWdlU2VxdWVuY2U9bit0LlBVTExfTElNSVRfQ09VTlQsZS5kaWZmPXItdC5QVUxMX0xJTUlUX0NPVU5ULHQuX3B1bGxNaXNzaW5nTWVzc2FnZShlKSksdC5nZXRNb2R1bGUoWWMpLm9uTmV3R3JvdXBNZXNzYWdlKHtkYXRhTGlzdDphLGlzSW5zdGFudE1lc3NhZ2U6ITF9KSl9KSl9fSx7a2V5OlwiX2dldEdyb3VwTWlzc2luZ01lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49bmV3IGpkKEZnKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6emwscmVxdWVzdERhdGE6e2dyb3VwSUQ6ZS5ncm91cElELGNvdW50OmUuY291bnQsc2VxdWVuY2U6ZS5zZXF1ZW5jZX19KS50aGVuKChmdW5jdGlvbihvKXt2YXIgcj1vLmRhdGEubWVzc2FnZUxpc3QsYT12b2lkIDA9PT1yP1tdOnI7cmV0dXJuIG4uc2V0TmV0d29ya1R5cGUodC5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIi5jb25jYXQoZS5ncm91cElELFwiIGNvdW50OlwiKS5jb25jYXQoZS5jb3VudCxcIiBzZXF1ZW5jZTpcIikuY29uY2F0KGUuc2VxdWVuY2UsXCIgbWVzc2FnZUxpc3QgbGVuZ3RoOlwiKS5jb25jYXQoYS5sZW5ndGgpKS5lbmQoKSxhfSkpLmNhdGNoKChmdW5jdGlvbihlKXt0LnByb2JlTmV0d29yaygpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBvPW0odCwyKSxyPW9bMF0sYT1vWzFdO24uc2V0RXJyb3IoZSxyLGEpLmVuZCgpfSkpfSkpfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLnJlc2V0XCIpKSx0aGlzLl9yZW1vdGVMYXN0TWVzc2FnZVNlcXVlbmNlTWFwLmNsZWFyKCl9fV0pLG59KHBsKSxyTT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtvKHRoaXMsZSksdGhpcy5fY2xhc3NOYW1lPVwiQXZnRTJFRGVsYXlcIix0aGlzLl9lMmVEZWxheUFycmF5PVtdfXJldHVybiBhKGUsW3trZXk6XCJhZGRNZXNzYWdlRGVsYXlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1BdShlLmN1cnJlbnRUaW1lLzFlMy1lLnRpbWUsMik7dGhpcy5fZTJlRGVsYXlBcnJheS5wdXNoKHQpfX0se2tleTpcIl9jYWxjQXZnXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZigwPT09dClyZXR1cm4gMDt2YXIgbj0wO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe24rPWV9KSksQXUobi90LDEpfX0se2tleTpcIl9jYWxjVG90YWxDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2UyZURlbGF5QXJyYXkubGVuZ3RofX0se2tleTpcIl9jYWxjQ291bnRXaXRoTGltaXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmUyZURlbGF5QXJyYXksbj1lLm1pbixvPWUubWF4O3JldHVybiB0LmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIG48ZSYmZTw9b30pKS5sZW5ndGh9fSx7a2V5OlwiX2NhbGNQZXJjZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1BdShlL3QqMTAwLDIpO3JldHVybiBuPjEwMCYmKG49MTAwKSxufX0se2tleTpcIl9jaGVja0UyRURlbGF5RXhjZXB0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGU+dH0pKTtpZihuLmxlbmd0aD4wKXt2YXIgbz1uLmxlbmd0aCxyPU1hdGgubWluLmFwcGx5KE1hdGgsdihuKSksYT1NYXRoLm1heC5hcHBseShNYXRoLHYobikpLHM9dGhpcy5fY2FsY0F2ZyhuLG8pLGk9QXUoby9lLmxlbmd0aCoxMDAsMik7bmV3IGpkKG1nKS5zZXRNZXNzYWdlKFwibWVzc2FnZSBlMmUgZGVsYXkgZXhjZXB0aW9uLiBjb3VudDpcIi5jb25jYXQobyxcIiBtaW46XCIpLmNvbmNhdChyLFwiIG1heDpcIikuY29uY2F0KGEsXCIgYXZnOlwiKS5jb25jYXQocyxcIiBwZXJjZW50OlwiKS5jb25jYXQoaSkpLnNldExldmVsKFwid2FybmluZ1wiKS5lbmQoKX19fSx7a2V5OlwiZ2V0U3RhdFJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY2FsY1RvdGFsQ291bnQoKTtpZigwPT09ZSlyZXR1cm4gbnVsbDt2YXIgdD12KHRoaXMuX2UyZURlbGF5QXJyYXkpLG49dGhpcy5fY2FsY0NvdW50V2l0aExpbWl0KHtlMmVEZWxheUFycmF5OnQsbWluOjAsbWF4OjF9KSxvPXRoaXMuX2NhbGNDb3VudFdpdGhMaW1pdCh7ZTJlRGVsYXlBcnJheTp0LG1pbjoxLG1heDozfSkscj10aGlzLl9jYWxjUGVyY2VudChuLGUpLGE9dGhpcy5fY2FsY1BlcmNlbnQobyxlKSxzPXRoaXMuX2NhbGNBdmcodCxlKTtyZXR1cm4gdGhpcy5fY2hlY2tFMkVEZWxheUV4Y2VwdGlvbih0LDMpLHRoaXMucmVzZXQoKSx7dG90YWxDb3VudDplLGNvdW50TGVzc1RoYW4xU2Vjb25kOm4scGVyY2VudE9mQ291bnRMZXNzVGhhbjFTZWNvbmQ6cixjb3VudExlc3NUaGFuM1NlY29uZDpvLHBlcmNlbnRPZkNvdW50TGVzc1RoYW4zU2Vjb25kOmEsYXZnRGVsYXk6c319fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2UyZURlbGF5QXJyYXkubGVuZ3RoPTB9fV0pLGV9KCksYU09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpLHRoaXMuX2NsYXNzTmFtZT1cIkF2Z1JUVFwiLHRoaXMuX3JlcXVlc3RDb3VudD0wLHRoaXMuX3J0dEFycmF5PVtdfXJldHVybiBhKGUsW3trZXk6XCJhZGRSZXF1ZXN0Q291bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlcXVlc3RDb3VudCs9MX19LHtrZXk6XCJhZGRSVFRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9ydHRBcnJheS5wdXNoKGUpfX0se2tleTpcIl9jYWxjVG90YWxDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcXVlc3RDb3VudH19LHtrZXk6XCJfY2FsY1JUVENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RofX0se2tleTpcIl9jYWxjU3VjY2Vzc1JhdGVPZlJlcXVlc3RcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKDA9PT10KXJldHVybiAwO3ZhciBuPUF1KGUvdCoxMDAsMik7cmV0dXJuIG4+MTAwJiYobj0xMDApLG59fSx7a2V5OlwiX2NhbGNBdmdcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKDA9PT10KXJldHVybiAwO3ZhciBuPTA7cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bis9ZX0pKSxwYXJzZUludChuL3QpfX0se2tleTpcIl9jYWxjTWF4XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCx2KHRoaXMuX3J0dEFycmF5KSl9fSx7a2V5OlwiX2NhbGNNaW5cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbi5hcHBseShNYXRoLHYodGhpcy5fcnR0QXJyYXkpKX19LHtrZXk6XCJnZXRTdGF0UmVzdWx0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jYWxjVG90YWxDb3VudCgpLHQ9dih0aGlzLl9ydHRBcnJheSk7aWYoMD09PWUpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5fY2FsY1JUVENvdW50KHQpLG89dGhpcy5fY2FsY1N1Y2Nlc3NSYXRlT2ZSZXF1ZXN0KG4sZSkscj10aGlzLl9jYWxjQXZnKHQsbik7cmV0dXJuIEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuZ2V0U3RhdFJlc3VsdCBtYXg6XCIpLmNvbmNhdCh0aGlzLl9jYWxjTWF4KCksXCIgbWluOlwiKS5jb25jYXQodGhpcy5fY2FsY01pbigpLFwiIGF2ZzpcIikuY29uY2F0KHIpKSx0aGlzLnJlc2V0KCkse3RvdGFsQ291bnQ6ZSxydHRDb3VudDpuLHN1Y2Nlc3NSYXRlT2ZSZXF1ZXN0Om8sYXZnUlRUOnJ9fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZXF1ZXN0Q291bnQ9MCx0aGlzLl9ydHRBcnJheS5sZW5ndGg9MH19XSksZX0oKSxzTT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtvKHRoaXMsZSksdGhpcy5fbWFwPW5ldyBNYXB9cmV0dXJuIGEoZSxbe2tleTpcImluaXRNYXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fbWFwLnNldChlLHt0b3RhbENvdW50OjAsc3VjY2Vzc0NvdW50OjAsZmFpbGVkQ291bnRPZlVzZXJTaWRlOjAsY29zdEFycmF5OltdLGZpbGVTaXplQXJyYXk6W119KX0pKX19LHtrZXk6XCJhZGRUb3RhbENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIShKaShlKXx8IXRoaXMuX21hcC5oYXMoZSkpJiYodGhpcy5fbWFwLmdldChlKS50b3RhbENvdW50Kz0xLCEwKX19LHtrZXk6XCJhZGRTdWNjZXNzQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hKEppKGUpfHwhdGhpcy5fbWFwLmhhcyhlKSkmJih0aGlzLl9tYXAuZ2V0KGUpLnN1Y2Nlc3NDb3VudCs9MSwhMCl9fSx7a2V5OlwiYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIShKaShlKXx8IXRoaXMuX21hcC5oYXMoZSkpJiYodGhpcy5fbWFwLmdldChlKS5mYWlsZWRDb3VudE9mVXNlclNpZGUrPTEsITApfX0se2tleTpcImFkZENvc3RcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEoSmkoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKSYmKHRoaXMuX21hcC5nZXQoZSkuY29zdEFycmF5LnB1c2godCksITApfX0se2tleTpcImFkZEZpbGVTaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hKEppKGUpfHwhdGhpcy5fbWFwLmhhcyhlKSkmJih0aGlzLl9tYXAuZ2V0KGUpLmZpbGVTaXplQXJyYXkucHVzaCh0KSwhMCl9fSx7a2V5OlwiX2NhbGNTdWNjZXNzUmF0ZU9mQnVzaW5lc3NcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihKaShlKXx8IXRoaXMuX21hcC5oYXMoZSkpcmV0dXJuLTE7dmFyIHQ9dGhpcy5fbWFwLmdldChlKSxuPUF1KHQuc3VjY2Vzc0NvdW50L3QudG90YWxDb3VudCoxMDAsMik7cmV0dXJuIG4+MTAwJiYobj0xMDApLG59fSx7a2V5OlwiX2NhbGNTdWNjZXNzUmF0ZU9mUGxhdGZvcm1cIix2YWx1ZTpmdW5jdGlvbihlKXtpZihKaShlKXx8IXRoaXMuX21hcC5oYXMoZSkpcmV0dXJuLTE7dmFyIHQ9dGhpcy5fbWFwLmdldChlKSxuPXRoaXMuX2NhbGNTdWNjZXNzQ291bnRPZlBsYXRmb3JtKGUpL3QudG90YWxDb3VudCoxMDA7cmV0dXJuKG49QXUobiwyKSk+MTAwJiYobj0xMDApLG59fSx7a2V5OlwiX2NhbGNUb3RhbENvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpfHwhdGhpcy5fbWFwLmhhcyhlKT8tMTp0aGlzLl9tYXAuZ2V0KGUpLnRvdGFsQ291bnR9fSx7a2V5OlwiX2NhbGNTdWNjZXNzQ291bnRPZkJ1c2luZXNzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEppKGUpfHwhdGhpcy5fbWFwLmhhcyhlKT8tMTp0aGlzLl9tYXAuZ2V0KGUpLnN1Y2Nlc3NDb3VudH19LHtrZXk6XCJfY2FsY1N1Y2Nlc3NDb3VudE9mUGxhdGZvcm1cIix2YWx1ZTpmdW5jdGlvbihlKXtpZihKaShlKXx8IXRoaXMuX21hcC5oYXMoZSkpcmV0dXJuLTE7dmFyIHQ9dGhpcy5fbWFwLmdldChlKTtyZXR1cm4gdC5zdWNjZXNzQ291bnQrdC5mYWlsZWRDb3VudE9mVXNlclNpZGV9fSx7a2V5OlwiX2NhbGNBdmdcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gSmkoZSl8fCF0aGlzLl9tYXAuaGFzKGUpPy0xOmU9PT1GZD90aGlzLl9jYWxjQXZnU3BlZWQoZSk6dGhpcy5fY2FsY0F2Z0Nvc3QoZSl9fSx7a2V5OlwiX2NhbGNBdmdDb3N0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbWFwLmdldChlKS5jb3N0QXJyYXkubGVuZ3RoO2lmKDA9PT10KXJldHVybiAwO3ZhciBuPTA7cmV0dXJuIHRoaXMuX21hcC5nZXQoZSkuY29zdEFycmF5LmZvckVhY2goKGZ1bmN0aW9uKGUpe24rPWV9KSkscGFyc2VJbnQobi90KX19LHtrZXk6XCJfY2FsY0F2Z1NwZWVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPTA7cmV0dXJuIHRoaXMuX21hcC5nZXQoZSkuY29zdEFycmF5LmZvckVhY2goKGZ1bmN0aW9uKGUpe3QrPWV9KSksdGhpcy5fbWFwLmdldChlKS5maWxlU2l6ZUFycmF5LmZvckVhY2goKGZ1bmN0aW9uKGUpe24rPWV9KSkscGFyc2VJbnQoMWUzKm4vdCl9fSx7a2V5OlwiZ2V0U3RhdFJlc3VsdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NhbGNUb3RhbENvdW50KGUpO2lmKDA9PT10KXJldHVybiBudWxsO3ZhciBuPXRoaXMuX2NhbGNTdWNjZXNzQ291bnRPZkJ1c2luZXNzKGUpLG89dGhpcy5fY2FsY1N1Y2Nlc3NSYXRlT2ZCdXNpbmVzcyhlKSxyPXRoaXMuX2NhbGNTdWNjZXNzQ291bnRPZlBsYXRmb3JtKGUpLGE9dGhpcy5fY2FsY1N1Y2Nlc3NSYXRlT2ZQbGF0Zm9ybShlKSxzPXRoaXMuX2NhbGNBdmcoZSk7cmV0dXJuIHRoaXMucmVzZXQoZSkse3RvdGFsQ291bnQ6dCxzdWNjZXNzQ291bnRPZkJ1c2luZXNzOm4sc3VjY2Vzc1JhdGVPZkJ1c2luZXNzOm8sc3VjY2Vzc0NvdW50T2ZQbGF0Zm9ybTpyLHN1Y2Nlc3NSYXRlT2ZQbGF0Zm9ybTphLGF2Z1ZhbHVlOnN9fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7SmkoZSk/dGhpcy5fbWFwLmNsZWFyKCk6dGhpcy5fbWFwLnNldChlLHt0b3RhbENvdW50OjAsc3VjY2Vzc0NvdW50OjAsZmFpbGVkQ291bnRPZlVzZXJTaWRlOjAsY29zdEFycmF5OltdLGZpbGVTaXplQXJyYXk6W119KX19XSksZX0oKSxpTT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtvKHRoaXMsZSksdGhpcy5fbGFzdE1hcD1uZXcgTWFwLHRoaXMuX2N1cnJlbnRNYXA9bmV3IE1hcH1yZXR1cm4gYShlLFt7a2V5OlwiaW5pdE1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0Ll9sYXN0TWFwLnNldChlLG5ldyBNYXApLHQuX2N1cnJlbnRNYXAuc2V0KGUsbmV3IE1hcCl9KSl9fSx7a2V5OlwiYWRkTWVzc2FnZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXksbj1lLm1lc3NhZ2U7aWYoSmkodCl8fCF0aGlzLl9sYXN0TWFwLmhhcyh0KXx8IXRoaXMuX2N1cnJlbnRNYXAuaGFzKHQpKXJldHVybiExO3ZhciBvPW4uY29udmVyc2F0aW9uSUQscj1uLnNlcXVlbmNlLGE9by5yZXBsYWNlKHJvLkNPTlZfR1JPVVAsXCJcIik7aWYoMD09PXRoaXMuX2xhc3RNYXAuZ2V0KHQpLnNpemUpdGhpcy5fYWRkQ3VycmVudE1hcChlKTtlbHNlIGlmKHRoaXMuX2xhc3RNYXAuZ2V0KHQpLmhhcyhhKSl7dmFyIHM9dGhpcy5fbGFzdE1hcC5nZXQodCkuZ2V0KGEpLGk9cy5sZW5ndGgtMTtyPnNbMF0mJnI8c1tpXT8ocy5wdXNoKHIpLHMuc29ydCgpLHRoaXMuX2xhc3RNYXAuZ2V0KHQpLnNldChhLHMpKTp0aGlzLl9hZGRDdXJyZW50TWFwKGUpfWVsc2UgdGhpcy5fYWRkQ3VycmVudE1hcChlKTtyZXR1cm4hMH19LHtrZXk6XCJfYWRkQ3VycmVudE1hcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5LG49ZS5tZXNzYWdlLG89bi5jb252ZXJzYXRpb25JRCxyPW4uc2VxdWVuY2UsYT1vLnJlcGxhY2Uocm8uQ09OVl9HUk9VUCxcIlwiKTt0aGlzLl9jdXJyZW50TWFwLmdldCh0KS5oYXMoYSl8fHRoaXMuX2N1cnJlbnRNYXAuZ2V0KHQpLnNldChhLFtdKSx0aGlzLl9jdXJyZW50TWFwLmdldCh0KS5nZXQoYSkucHVzaChyKX19LHtrZXk6XCJfY29weURhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXtpZighSmkoZSkpe3RoaXMuX2xhc3RNYXAuc2V0KGUsbmV3IE1hcCk7dmFyIHQsbj10aGlzLl9sYXN0TWFwLmdldChlKSxvPUQodGhpcy5fY3VycmVudE1hcC5nZXQoZSkpO3RyeXtmb3Ioby5zKCk7ISh0PW8ubigpKS5kb25lOyl7dmFyIHI9bSh0LnZhbHVlLDIpLGE9clswXSxzPXJbMV07bi5zZXQoYSxzKX19Y2F0Y2goaSl7by5lKGkpfWZpbmFsbHl7by5mKCl9bj1udWxsLHRoaXMuX2N1cnJlbnRNYXAuc2V0KGUsbmV3IE1hcCl9fX0se2tleTpcImdldFN0YXRSZXN1bHRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihKaSh0aGlzLl9jdXJyZW50TWFwLmdldChlKSl8fEppKHRoaXMuX2xhc3RNYXAuZ2V0KGUpKSlyZXR1cm4gbnVsbDtpZigwPT09dGhpcy5fbGFzdE1hcC5nZXQoZSkuc2l6ZSlyZXR1cm4gdGhpcy5fY29weURhdGEoZSksbnVsbDt2YXIgdD0wLG49MDtpZih0aGlzLl9sYXN0TWFwLmdldChlKS5mb3JFYWNoKChmdW5jdGlvbihlLG8pe3ZhciByPXYoZS52YWx1ZXMoKSksYT1yLmxlbmd0aCxzPXJbYS0xXS1yWzBdKzE7dCs9cyxuKz1hfSkpLDA9PT10KXJldHVybiBudWxsO3ZhciBvPUF1KG4vdCoxMDAsMik7cmV0dXJuIG8+MTAwJiYobz0xMDApLHRoaXMuX2NvcHlEYXRhKGUpLHt0b3RhbENvdW50OnQsc3VjY2Vzc0NvdW50T2ZNZXNzYWdlUmVjZWl2ZWQ6bixzdWNjZXNzUmF0ZU9mTWVzc2FnZVJlY2VpdmVkOm99fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50TWFwLmNsZWFyKCksdGhpcy5fbGFzdE1hcC5jbGVhcigpfX1dKSxlfSgpLHVNPWZ1bmN0aW9uKGUpe2kocixlKTt2YXIgbj1fKHIpO2Z1bmN0aW9uIHIoZSl7dmFyIHQ7byh0aGlzLHIpLCh0PW4uY2FsbCh0aGlzLGUpKS5fY2xhc3NOYW1lPVwiUXVhbGl0eVN0YXRNb2R1bGVcIix0LlRBRz1cImltLXNzb2xvZy1xdWFsaXR5LXN0YXRcIix0LnJlcG9ydEluZGV4PTAsdC53aG9sZVBlcmlvZD0hMSx0Ll9xdWFsaXR5SXRlbXM9W1JkLGJkLHdkLFBkLEdkLFVkLEZkLHFkLHhkLFZkXSx0Ll9tZXNzYWdlU2VudEl0ZW1zPVt3ZCxQZCxHZCxVZCxGZF0sdC5fbWVzc2FnZVJlY2VpdmVkSXRlbXM9W3FkLHhkLFZkXSx0LlJFUE9SVF9JTlRFUlZBTD0xMjAsdC5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPVtdLHQuUkVQT1JUX1RJTllJRF9XSElURUxJU1Q9W10sdC5fc3RhdEluZm9BcnI9W10sdC5fYXZnUlRUPW5ldyBhTSx0Ll9hdmdFMkVEZWxheT1uZXcgck0sdC5fcmF0ZU1lc3NhZ2VTZW50PW5ldyBzTSx0Ll9yYXRlTWVzc2FnZVJlY2VpdmVkPW5ldyBpTTt2YXIgYT10LmdldElubmVyRW1pdHRlckluc3RhbmNlKCk7cmV0dXJuIGEub24oT20uQ09OVEVYVF9BMktFWV9BTkRfVElOWUlEX1VQREFURUQsdC5fb25Mb2dpblN1Y2Nlc3MsaCh0KSksYS5vbihPbS5DTE9VRF9DT05GSUdfVVBEQVRFRCx0Ll9vbkNsb3VkQ29uZmlnVXBkYXRlZCxoKHQpKSx0fXJldHVybiBhKHIsW3trZXk6XCJfb25Mb2dpblN1Y2Nlc3NcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmluaXRNYXAodGhpcy5fbWVzc2FnZVNlbnRJdGVtcyksdGhpcy5fcmF0ZU1lc3NhZ2VSZWNlaXZlZC5pbml0TWFwKHRoaXMuX21lc3NhZ2VSZWNlaXZlZEl0ZW1zKTt2YXIgdD10aGlzLmdldE1vZHVsZShRYyksbj10LmdldEl0ZW0odGhpcy5UQUcsITEpOyFMdShuKSYmUWkobi5mb3JFYWNoKSYmKEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuX29uTG9naW5TdWNjZXNzLmdldCBxdWFsaXR5IHN0YXQgbG9nIGluIHN0b3JhZ2UsIG51bXM9XCIpLmNvbmNhdChuLmxlbmd0aCkpLG4uZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5fc3RhdEluZm9BcnIucHVzaCh0KX0pKSx0LnJlbW92ZUl0ZW0odGhpcy5UQUcsITEpKX19LHtrZXk6XCJfb25DbG91ZENvbmZpZ1VwZGF0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJxX3JwdF9pbnRlcnZhbFwiKSx0PXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJxX3JwdF9zZGthcHBpZF9ibFwiKSxuPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJxX3JwdF90aW55aWRfd2xcIik7SmkoZSl8fCh0aGlzLlJFUE9SVF9JTlRFUlZBTD1OdW1iZXIoZSkpLEppKHQpfHwodGhpcy5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPXQuc3BsaXQoXCIsXCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIE51bWJlcihlKX0pKSksSmkobil8fCh0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPW4uc3BsaXQoXCIsXCIpKX19LHtrZXk6XCJvbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmlzTG9nZ2VkSW4oKSYmZSV0aGlzLlJFUE9SVF9JTlRFUlZBTD09MCYmKHRoaXMud2hvbGVQZXJpb2Q9ITAsdGhpcy5fcmVwb3J0KCkpfX0se2tleTpcImFkZFJlcXVlc3RDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYXZnUlRULmFkZFJlcXVlc3RDb3VudCgpfX0se2tleTpcImFkZFJUVFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2F2Z1JUVC5hZGRSVFQoZSl9fSx7a2V5OlwiYWRkTWVzc2FnZURlbGF5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fYXZnRTJFRGVsYXkuYWRkTWVzc2FnZURlbGF5KGUpfX0se2tleTpcImFkZFRvdGFsQ291bnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9yYXRlTWVzc2FnZVNlbnQuYWRkVG90YWxDb3VudChlKXx8S2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYWRkVG90YWxDb3VudCBpbnZhbGlkIGtleTpcIiksZSl9fSx7a2V5OlwiYWRkU3VjY2Vzc0NvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZFN1Y2Nlc3NDb3VudChlKXx8S2kud2FybihcIlwiLmNvbmNhdCh0aGlzLl9jbGFzc05hbWUsXCIuYWRkU3VjY2Vzc0NvdW50IGludmFsaWQga2V5OlwiKSxlKX19LHtrZXk6XCJhZGRGYWlsZWRDb3VudE9mVXNlclNpZGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9yYXRlTWVzc2FnZVNlbnQuYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlKGUpfHxLaS53YXJuKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5hZGRGYWlsZWRDb3VudE9mVXNlclNpZGUgaW52YWxpZCBrZXk6XCIpLGUpfX0se2tleTpcImFkZENvc3RcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3JhdGVNZXNzYWdlU2VudC5hZGRDb3N0KGUsdCl8fEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZENvc3QgaW52YWxpZCBrZXkgb3IgY29zdDpcIiksZSx0KX19LHtrZXk6XCJhZGRGaWxlU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZEZpbGVTaXplKGUsdCl8fEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZEZpbGVTaXplIGludmFsaWQga2V5IG9yIHNpemU6XCIpLGUsdCl9fSx7a2V5OlwiYWRkTWVzc2FnZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcmF0ZU1lc3NhZ2VSZWNlaXZlZC5hZGRNZXNzYWdlU2VxdWVuY2UoZSl8fEtpLndhcm4oXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLmFkZE1lc3NhZ2VTZXF1ZW5jZSBpbnZhbGlkIGtleTpcIiksZS5rZXkpfX0se2tleTpcIl9nZXRRdWFsaXR5SXRlbVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXt9LG89SGRbdGhpcy5nZXROZXR3b3JrVHlwZSgpXTtKaShvKSYmKG89OCk7dmFyIHI9e3F1YWxpdHlUeXBlOktkW2VdLHRpbWVzdGFtcDpVaSgpLG5ldHdvcmtUeXBlOm8sZXh0ZW5zaW9uOlwiXCJ9O3N3aXRjaChlKXtjYXNlIFJkOm49dGhpcy5fYXZnUlRULmdldFN0YXRSZXN1bHQoKTticmVhaztjYXNlIGJkOm49dGhpcy5fYXZnRTJFRGVsYXkuZ2V0U3RhdFJlc3VsdCgpO2JyZWFrO2Nhc2Ugd2Q6Y2FzZSBQZDpjYXNlIEdkOmNhc2UgVWQ6Y2FzZSBGZDpuPXRoaXMuX3JhdGVNZXNzYWdlU2VudC5nZXRTdGF0UmVzdWx0KGUpO2JyZWFrO2Nhc2UgcWQ6Y2FzZSB4ZDpjYXNlIFZkOm49dGhpcy5fcmF0ZU1lc3NhZ2VSZWNlaXZlZC5nZXRTdGF0UmVzdWx0KGUpfXJldHVybiBudWxsPT09bj9udWxsOnQodCh7fSxyKSxuKX19LHtrZXk6XCJfcmVwb3J0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVtdLG89bnVsbDtKaShlKT90aGlzLl9xdWFsaXR5SXRlbXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bnVsbCE9PShvPXQuX2dldFF1YWxpdHlJdGVtKGUpKSYmKG8ucmVwb3J0SW5kZXg9dC5yZXBvcnRJbmRleCxvLndob2xlUGVyaW9kPXQud2hvbGVQZXJpb2Qsbi5wdXNoKG8pKX0pKTpudWxsIT09KG89dGhpcy5fZ2V0UXVhbGl0eUl0ZW0oZSkpJiYoby5yZXBvcnRJbmRleD10aGlzLnJlcG9ydEluZGV4LG8ud2hvbGVQZXJpb2Q9dGhpcy53aG9sZVBlcmlvZCxuLnB1c2gobykpLEtpLmRlYnVnKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5fcmVwb3J0XCIpLG4pLHRoaXMuX3N0YXRJbmZvQXJyLmxlbmd0aD4wJiYobj1uLmNvbmNhdCh0aGlzLl9zdGF0SW5mb0FyciksdGhpcy5fc3RhdEluZm9BcnI9W10pO3ZhciByPXRoaXMuZ2V0TW9kdWxlKFhjKSxhPXIuZ2V0U0RLQXBwSUQoKSxzPXIuZ2V0VGlueUlEKCk7a3UodGhpcy5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNULGEpJiYhTnUodGhpcy5SRVBPUlRfVElOWUlEX1dISVRFTElTVCxzKSYmKG49W10pLG4ubGVuZ3RoPjAmJnRoaXMuX2RvUmVwb3J0KG4pfX0se2tleTpcIl9kb1JlcG9ydFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsbz17aGVhZGVyOnZ2KHRoaXMpLHF1YWxpdHk6ZX07dGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Z3AscmVxdWVzdERhdGE6dCh7fSxvKX0pLnRoZW4oKGZ1bmN0aW9uKCl7bi5yZXBvcnRJbmRleCsrLG4ud2hvbGVQZXJpb2Q9ITF9KSkuY2F0Y2goKGZ1bmN0aW9uKHQpe0tpLndhcm4oXCJcIi5jb25jYXQobi5fY2xhc3NOYW1lLFwiLl9kb1JlcG9ydCwgb25saW5lOlwiKS5jb25jYXQobi5nZXROZXR3b3JrVHlwZSgpLFwiIGVycm9yOlwiKSx0KSxuLl9zdGF0SW5mb0Fycj1uLl9zdGF0SW5mb0Fyci5jb25jYXQoZSksbi5fZmx1c2hBdE9uY2UoKX0pKX19LHtrZXk6XCJfZmx1c2hBdE9uY2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0TW9kdWxlKFFjKSx0PWUuZ2V0SXRlbSh0aGlzLlRBRywhMSksbj10aGlzLl9zdGF0SW5mb0FycjtpZihMdSh0KSlLaS5sb2coXCJcIi5jb25jYXQodGhpcy5fY2xhc3NOYW1lLFwiLl9mbHVzaEF0T25jZSBjb3VudDpcIikuY29uY2F0KG4ubGVuZ3RoKSksZS5zZXRJdGVtKHRoaXMuVEFHLG4sITAsITEpO2Vsc2V7dmFyIG89bi5jb25jYXQodCk7by5sZW5ndGg+MTAmJihvPW8uc2xpY2UoMCwxMCkpLEtpLmxvZyhcIlwiLmNvbmNhdCh0aGlzLmNsYXNzTmFtZSxcIi5fZmx1c2hBdE9uY2UgY291bnQ6XCIpLmNvbmNhdChvLmxlbmd0aCkpLGUuc2V0SXRlbSh0aGlzLlRBRyxvLCEwLCExKX10aGlzLl9zdGF0SW5mb0Fycj1bXX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksdGhpcy5fcmVwb3J0KCksdGhpcy5yZXBvcnRJbmRleD0wLHRoaXMud2hvbGVQZXJpb2Q9ITEsdGhpcy5SRVBPUlRfU0RLQVBQSURfQkxBQ0tMSVNUPVtdLHRoaXMuUkVQT1JUX1RJTllJRF9XSElURUxJU1Q9W10sdGhpcy5fYXZnUlRULnJlc2V0KCksdGhpcy5fYXZnRTJFRGVsYXkucmVzZXQoKSx0aGlzLl9yYXRlTWVzc2FnZVNlbnQucmVzZXQoKSx0aGlzLl9yYXRlTWVzc2FnZVJlY2VpdmVkLnJlc2V0KCl9fV0pLHJ9KHBsKSxjTT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpO3ZhciBuPW5ldyBqZCgkZCk7dGhpcy5fY2xhc3NOYW1lPVwiTW9kdWxlTWFuYWdlclwiLHRoaXMuX2lzUmVhZHk9ITEsdGhpcy5fc3RhcnRMb2dpblRzPTAsdGhpcy5fbW9kdWxlTWFwPW5ldyBNYXAsdGhpcy5faW5uZXJFbWl0dGVyPW51bGwsdGhpcy5fb3V0ZXJFbWl0dGVyPW51bGwsdGhpcy5fY2hlY2tDb3VudD0wLHRoaXMuX2NoZWNrVGltZXI9LTEsdGhpcy5fbW9kdWxlTWFwLnNldChYYyxuZXcgZ3YodGhpcyx0KSksdGhpcy5fbW9kdWxlTWFwLnNldCh1bCxuZXcgbk0odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQobGwsbmV3IHVNKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KHNsLG5ldyB6dih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChhbCxuZXcgZU0odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoQmMsbmV3IGh2KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KEhjLG5ldyBPdih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChqYyxuZXcgZHYodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoJGMsbmV3IGxtKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KEpjLG5ldyAkbSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChZYyxuZXcgc3YodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoV2MsbmV3IHV2KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KFFjLG5ldyBfdih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChaYyxuZXcgTXYodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoZWwsbmV3IFR2KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KHRsLG5ldyBEdih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChubCxuZXcgRXYodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQob2wsbmV3IEx2KHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KHJsLG5ldyBSdih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChpbCxuZXcgdE0odGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoY2wsbmV3IG9NKHRoaXMpKTt2YXIgcj10Lmluc3RhbmNlSUQsYT10Lm92ZXJzZWEscz10LlNES0FwcElELGk9XCJpbnN0YW5jZUlEOlwiLmNvbmNhdChyLFwiIG92ZXJzZWE6XCIpLmNvbmNhdChhLFwiIGhvc3Q6XCIpLmNvbmNhdChTdSgpLFwiIFwiKStcImluQnJvd3NlcjpcIi5jb25jYXQoc2ksXCIgaW5NaW5pQXBwOlwiKS5jb25jYXQoYWksXCIgU0RLQXBwSUQ6XCIpLmNvbmNhdChzLFwiIFVzZXJBZ2VudDpcIikuY29uY2F0KGNpKTtqZC5iaW5kRXZlbnRTdGF0TW9kdWxlKHRoaXMuX21vZHVsZU1hcC5nZXQoWmMpKSxuLnNldE1lc3NhZ2UoXCJcIi5jb25jYXQoaSkpLmVuZCgpLEtpLmluZm8oXCJTREsgXCIuY29uY2F0KGkpKSx0aGlzLl9yZWFkeUxpc3Q9dm9pZCAwLHRoaXMuX3Nzb0xvZ0ZvclJlYWR5PW51bGwsdGhpcy5faW5pdFJlYWR5TGlzdCgpfXJldHVybiBhKGUsW3trZXk6XCJfc3RhcnRUaW1lclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY2hlY2tUaW1lcjwwJiYodGhpcy5fY2hlY2tUaW1lcj1zZXRJbnRlcnZhbCh0aGlzLl9vbkNoZWNrVGltZXIuYmluZCh0aGlzKSwxZTMpKX19LHtrZXk6XCJzdG9wVGltZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NoZWNrVGltZXI+MCYmKGNsZWFySW50ZXJ2YWwodGhpcy5fY2hlY2tUaW1lciksdGhpcy5fY2hlY2tUaW1lcj0tMSx0aGlzLl9jaGVja0NvdW50PTApfX0se2tleTpcIl9vbkNoZWNrVGltZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NoZWNrQ291bnQrPTE7dmFyIGUsdD1EKHRoaXMuX21vZHVsZU1hcCk7dHJ5e2Zvcih0LnMoKTshKGU9dC5uKCkpLmRvbmU7KXt2YXIgbj1tKGUudmFsdWUsMilbMV07bi5vbkNoZWNrVGltZXImJm4ub25DaGVja1RpbWVyKHRoaXMuX2NoZWNrQ291bnQpfX1jYXRjaChvKXt0LmUobyl9ZmluYWxseXt0LmYoKX19fSx7a2V5OlwiX2luaXRSZWFkeUxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fcmVhZHlMaXN0PVt0aGlzLl9tb2R1bGVNYXAuZ2V0KEJjKSx0aGlzLl9tb2R1bGVNYXAuZ2V0KEpjKV0sdGhpcy5fcmVhZHlMaXN0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3QucmVhZHkoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX29uTW9kdWxlUmVhZHkoKX0pKX0pKX19LHtrZXk6XCJfb25Nb2R1bGVSZWFkeVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9ITA7aWYodGhpcy5fcmVhZHlMaXN0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3QuaXNSZWFkeSgpfHwoZT0hMSl9KSksZSYmIXRoaXMuX2lzUmVhZHkpe3RoaXMuX2lzUmVhZHk9ITAsdGhpcy5fb3V0ZXJFbWl0dGVyLmVtaXQob28uU0RLX1JFQURZKTt2YXIgdD1EYXRlLm5vdygpLXRoaXMuX3N0YXJ0TG9naW5UcztLaS53YXJuKFwiU0RLIGlzIHJlYWR5LiBjb3N0IFwiLmNvbmNhdCh0LFwiIG1zXCIpKSx0aGlzLl9zdGFydExvZ2luVHM9RGF0ZS5ub3coKTt2YXIgbj10aGlzLl9tb2R1bGVNYXAuZ2V0KGVsKS5nZXROZXR3b3JrVHlwZSgpLG89dGhpcy5fc3NvTG9nRm9yUmVhZHkuZ2V0U3RhcnRUcygpK0dpO3RoaXMuX3Nzb0xvZ0ZvclJlYWR5LnNldE5ldHdvcmtUeXBlKG4pLnNldE1lc3NhZ2UodCkuc3RhcnQobykuZW5kKCl9fX0se2tleTpcImxvZ2luXCIsdmFsdWU6ZnVuY3Rpb24oKXswPT09dGhpcy5fc3RhcnRMb2dpblRzJiYoRmkoKSx0aGlzLl9zdGFydExvZ2luVHM9RGF0ZS5ub3coKSx0aGlzLl9zdGFydFRpbWVyKCksdGhpcy5fbW9kdWxlTWFwLmdldChlbCkuc3RhcnQoKSx0aGlzLl9zc29Mb2dGb3JSZWFkeT1uZXcgamQoWWQpKX19LHtrZXk6XCJvbkxvZ2luRmFpbGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zdGFydExvZ2luVHM9MH19LHtrZXk6XCJnZXRPdXRlckVtaXR0ZXJJbnN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLl9vdXRlckVtaXR0ZXImJih0aGlzLl9vdXRlckVtaXR0ZXI9bmV3IFN2LGltKHRoaXMuX291dGVyRW1pdHRlciksdGhpcy5fb3V0ZXJFbWl0dGVyLl9lbWl0PXRoaXMuX291dGVyRW1pdHRlci5lbWl0LHRoaXMuX291dGVyRW1pdHRlci5lbWl0PWZ1bmN0aW9uKGUsdCl7dmFyIG49YXJndW1lbnRzWzBdLG89W24se25hbWU6YXJndW1lbnRzWzBdLGRhdGE6YXJndW1lbnRzWzFdfV07dGhpcy5fb3V0ZXJFbWl0dGVyLl9lbWl0LmFwcGx5KHRoaXMuX291dGVyRW1pdHRlcixvKX0uYmluZCh0aGlzKSksdGhpcy5fb3V0ZXJFbWl0dGVyfX0se2tleTpcImdldElubmVyRW1pdHRlckluc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX2lubmVyRW1pdHRlciYmKHRoaXMuX2lubmVyRW1pdHRlcj1uZXcgU3YsdGhpcy5faW5uZXJFbWl0dGVyLl9lbWl0PXRoaXMuX2lubmVyRW1pdHRlci5lbWl0LHRoaXMuX2lubmVyRW1pdHRlci5lbWl0PWZ1bmN0aW9uKGUsdCl7dmFyIG47emkoYXJndW1lbnRzWzFdKSYmYXJndW1lbnRzWzFdLmRhdGE/KEtpLndhcm4oXCJpbm5lciBldmVudERhdGEgaGFzIGRhdGEgcHJvcGVydHksIHBsZWFzZSBjaGVjayFcIiksbj1bZSx7bmFtZTphcmd1bWVudHNbMF0sZGF0YTphcmd1bWVudHNbMV0uZGF0YX1dKTpuPVtlLHtuYW1lOmFyZ3VtZW50c1swXSxkYXRhOmFyZ3VtZW50c1sxXX1dLHRoaXMuX2lubmVyRW1pdHRlci5fZW1pdC5hcHBseSh0aGlzLl9pbm5lckVtaXR0ZXIsbil9LmJpbmQodGhpcykpLHRoaXMuX2lubmVyRW1pdHRlcn19LHtrZXk6XCJoYXNNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFwLmhhcyhlKX19LHtrZXk6XCJnZXRNb2R1bGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFwLmdldChlKX19LHtrZXk6XCJpc1JlYWR5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNSZWFkeX19LHtrZXk6XCJvbkVycm9yXCIsdmFsdWU6ZnVuY3Rpb24oZSl7S2kud2FybihcIk9vcHMhIGNvZGU6XCIuY29uY2F0KGUuY29kZSxcIiBtZXNzYWdlOlwiKS5jb25jYXQoZS5tZXNzYWdlKSksbmV3IGpkKGRoKS5zZXRNZXNzYWdlKFwiY29kZTpcIi5jb25jYXQoZS5jb2RlLFwiIG1lc3NhZ2U6XCIpLmNvbmNhdChlLm1lc3NhZ2UpKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE1vZHVsZShlbCkuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TGV2ZWwoXCJlcnJvclwiKS5lbmQoKSx0aGlzLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkuZW1pdChvby5FUlJPUixlKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7S2kubG9nKFwiXCIuY29uY2F0KHRoaXMuX2NsYXNzTmFtZSxcIi5yZXNldFwiKSksRmkoKTt2YXIgZSx0PUQodGhpcy5fbW9kdWxlTWFwKTt0cnl7Zm9yKHQucygpOyEoZT10Lm4oKSkuZG9uZTspe3ZhciBuPW0oZS52YWx1ZSwyKVsxXTtuLnJlc2V0JiZuLnJlc2V0KCl9fWNhdGNoKG8pe3QuZShvKX1maW5hbGx5e3QuZigpfXRoaXMuX3N0YXJ0TG9naW5Ucz0wLHRoaXMuX2luaXRSZWFkeUxpc3QoKSx0aGlzLl9pc1JlYWR5PSExLHRoaXMuc3RvcFRpbWVyKCksdGhpcy5fb3V0ZXJFbWl0dGVyLmVtaXQob28uU0RLX05PVF9SRUFEWSl9fV0pLGV9KCksbE09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpLHRoaXMuX2Z1bmNNYXA9bmV3IE1hcH1yZXR1cm4gYShlLFt7a2V5OlwiZGVmZW5zZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnZvaWQgMDtpZihcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gbnVsbDtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIG51bGw7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdClyZXR1cm4gbnVsbDtpZih0aGlzLl9mdW5jTWFwLmhhcyhlKSYmdGhpcy5fZnVuY01hcC5nZXQoZSkuaGFzKHQpKXJldHVybiB0aGlzLl9mdW5jTWFwLmdldChlKS5nZXQodCk7dGhpcy5fZnVuY01hcC5oYXMoZSl8fHRoaXMuX2Z1bmNNYXAuc2V0KGUsbmV3IE1hcCk7dmFyIG89bnVsbDtyZXR1cm4gdGhpcy5fZnVuY01hcC5nZXQoZSkuaGFzKHQpP289dGhpcy5fZnVuY01hcC5nZXQoZSkuZ2V0KHQpOihvPXRoaXMuX3BhY2soZSx0LG4pLHRoaXMuX2Z1bmNNYXAuZ2V0KGUpLnNldCh0LG8pKSxvfX0se2tleTpcImRlZmVuc2VPbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06dm9pZCAwO3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/bnVsbDp0aGlzLl9wYWNrKGUsdCxuKX19LHtrZXk6XCJmaW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZXx8MD09PWUubGVuZ3RofHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P251bGw6dGhpcy5fZnVuY01hcC5oYXMoZSk/dGhpcy5fZnVuY01hcC5nZXQoZSkuaGFzKHQpP3RoaXMuX2Z1bmNNYXAuZ2V0KGUpLmdldCh0KTooS2kubG9nKFwiU2FmZXR5Q2FsbGJhY2suZmluZDog5om+5LiN5YiwIGZ1bmMg4oCU4oCUIFwiLmNvbmNhdChlLFwiL1wiKS5jb25jYXQoXCJcIiE9PXQubmFtZT90Lm5hbWU6XCJbYW5vbnltb3VzXVwiKSksbnVsbCk6KEtpLmxvZyhcIlNhZmV0eUNhbGxiYWNrLmZpbmQ6IOaJvuS4jeWIsCBldmVudE5hbWUtXCIuY29uY2F0KGUsXCIg5a+55bqU55qEIGZ1bmNcIikpLG51bGwpfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmKCEhdGhpcy5fZnVuY01hcC5oYXMoZSkmJighIXRoaXMuX2Z1bmNNYXAuZ2V0KGUpLmhhcyh0KSYmKHRoaXMuX2Z1bmNNYXAuZ2V0KGUpLmRlbGV0ZSh0KSwwPT09dGhpcy5fZnVuY01hcC5nZXQoZSkuc2l6ZSYmdGhpcy5fZnVuY01hcC5kZWxldGUoZSksITApKSl9fSx7a2V5OlwiX3BhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKCl7dHJ5e3QuYXBwbHkobixBcnJheS5mcm9tKGFyZ3VtZW50cykpfWNhdGNoKHMpe3ZhciBvPU9iamVjdC52YWx1ZXMob28pLmluZGV4T2YoZSk7aWYoLTEhPT1vKXt2YXIgcj1PYmplY3Qua2V5cyhvbylbb107S2kud2FybihcIuaOpeWFpeS+p+S6i+S7tiBUSU0uRVZFTlQuXCIuY29uY2F0KHIsXCIg5a+55bqU55qE5Zue6LCD5Ye95pWw6YC76L6R5a2Y5Zyo6Zeu6aKY77yM6K+35qOA5p+l77yBXCIpLHMpfXZhciBhPW5ldyBqZChjaCk7YS5zZXRNZXNzYWdlKFwiZXZlbnROYW1lOlwiLmNvbmNhdChlKSkuc2V0TW9yZU1lc3NhZ2Uocy5tZXNzYWdlKS5lbmQoKX19fX1dKSxlfSgpLHBNPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSk7dmFyIG49e1NES0FwcElEOnQuU0RLQXBwSUQsdW5saW1pdGVkQVZDaGF0Um9vbTp0LnVubGltaXRlZEFWQ2hhdFJvb218fCExLHNjZW5lOnQuc2NlbmV8fFwiXCIsb3ZlcnNlYTp0Lm92ZXJzZWF8fCExLGluc3RhbmNlSUQ6VHUoKX07dGhpcy5fbW9kdWxlTWFuYWdlcj1uZXcgY00obiksdGhpcy5fc2FmZXR5Q2FsbGJhY2tGYWN0b3J5PW5ldyBsTX1yZXR1cm4gYShlLFt7a2V5OlwiaXNSZWFkeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuaXNSZWFkeSgpfX0se2tleTpcIm9uRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9tb2R1bGVNYW5hZ2VyLm9uRXJyb3IoZSl9fSx7a2V5OlwibG9naW5cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5sb2dpbigpLHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEJjKS5sb2dpbihlKX19LHtrZXk6XCJsb2dvdXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEJjKS5sb2dvdXQoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gZS5fbW9kdWxlTWFuYWdlci5yZXNldCgpLHR9KSl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5sb2dvdXQoKS5maW5hbGx5KChmdW5jdGlvbigpe2UuX21vZHVsZU1hbmFnZXIuc3RvcFRpbWVyKCksZS5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoc2wpLmRlYWxsb2MoKTt2YXIgdD1lLl9tb2R1bGVNYW5hZ2VyLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCksbj1lLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShYYyk7dC5lbWl0KG9vLlNES19ERVNUUk9ZLHtTREtBcHBJRDpuLmdldFNES0FwcElEKCl9KX0pKX19LHtrZXk6XCJvblwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtlPT09b28uR1JPVVBfU1lTVEVNX05PVElDRV9SRUNFSVZFRCYmS2kud2FybihcIu+8ge+8ge+8gVRJTS5FVkVOVC5HUk9VUF9TWVNURU1fTk9USUNFX1JFQ0VJVkVEIHYyLjYuMOi1t+W8g+eUqO+8jOS4uuS6huabtOWlveeahOS9k+mqjO+8jOivt+WcqCBUSU0uRVZFTlQuTUVTU0FHRV9SRUNFSVZFRCDkuovku7blm57osIPlhoXmjqXmlLblpITnkIbnvqTns7vnu5/pgJrnn6XvvIzor6bnu4bor7flj4LogIPvvJpodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vTWVzc2FnZS5odG1sIy5Hcm91cFN5c3RlbU5vdGljZVBheWxvYWRcIiksS2kuZGVidWcoXCJvblwiLFwiZXZlbnROYW1lOlwiLmNvbmNhdChlKSksdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRPdXRlckVtaXR0ZXJJbnN0YW5jZSgpLm9uKGUsdGhpcy5fc2FmZXR5Q2FsbGJhY2tGYWN0b3J5LmRlZmVuc2UoZSx0LG4pLG4pfX0se2tleTpcIm9uY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7S2kuZGVidWcoXCJvbmNlXCIsXCJldmVudE5hbWU6XCIuY29uY2F0KGUpKSx0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkub25jZShlLHRoaXMuX3NhZmV0eUNhbGxiYWNrRmFjdG9yeS5kZWZlbnNlT25jZShlLHQsbiksbnx8dGhpcyl9fSx7a2V5Olwib2ZmXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4sbyl7S2kuZGVidWcoXCJvZmZcIixcImV2ZW50TmFtZTpcIi5jb25jYXQoZSkpO3ZhciByPXRoaXMuX3NhZmV0eUNhbGxiYWNrRmFjdG9yeS5maW5kKGUsdCk7bnVsbCE9PXImJih0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkub2ZmKGUscixuLG8pLHRoaXMuX3NhZmV0eUNhbGxiYWNrRmFjdG9yeS5kZWxldGUoZSx0KSl9fSx7a2V5OlwicmVnaXN0ZXJQbHVnaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShvbCkucmVnaXN0ZXJQbHVnaW4oZSl9fSx7a2V5Olwic2V0TG9nTGV2ZWxcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihlPD0wKXtjb25zb2xlLmxvZyhbXCJcIixcIiBfX19fX19fXyAgX19fX19fICBfXyAgICAgICBfXyAgX18gICAgICAgX18gIF9fX19fX19fICBfX19fX19fXCIsXCJ8ICAgICAgICBcXFxcfCAgICAgIFxcXFx8ICBcXFxcICAgICAvICBcXFxcfCAgXFxcXCAgXyAgfCAgXFxcXHwgICAgICAgIFxcXFx8ICAgICAgIFxcXFxcIixcIiBcXFxcJCQkJCQkJCQgXFxcXCQkJCQkJHwgJCRcXFxcICAgLyAgJCR8ICQkIC8gXFxcXCB8ICQkfCAkJCQkJCQkJHwgJCQkJCQkJFxcXFxcIixcIiAgIHwgJCQgICAgIHwgJCQgIHwgJCQkXFxcXCAvICAkJCR8ICQkLyAgJFxcXFx8ICQkfCAkJF9fICAgIHwgJCRfXy8gJCRcIixcIiAgIHwgJCQgICAgIHwgJCQgIHwgJCQkJFxcXFwgICQkJCR8ICQkICAkJCRcXFxcICQkfCAkJCAgXFxcXCAgIHwgJCQgICAgJCRcIixcIiAgIHwgJCQgICAgIHwgJCQgIHwgJCRcXFxcJCQgJCQgJCR8ICQkICQkXFxcXCQkXFxcXCQkfCAkJCQkJCAgIHwgJCQkJCQkJFxcXFxcIixcIiAgIHwgJCQgICAgX3wgJCRfIHwgJCQgXFxcXCQkJHwgJCR8ICQkJCQgIFxcXFwkJCQkfCAkJF9fX19fIHwgJCRfXy8gJCRcIixcIiAgIHwgJCQgICB8ICAgJCQgXFxcXHwgJCQgIFxcXFwkIHwgJCR8ICQkJCAgICBcXFxcJCQkfCAkJCAgICAgXFxcXHwgJCQgICAgJCRcIixcIiAgICBcXFxcJCQgICAgXFxcXCQkJCQkJCBcXFxcJCQgICAgICBcXFxcJCQgXFxcXCQkICAgICAgXFxcXCQkIFxcXFwkJCQkJCQkJCBcXFxcJCQkJCQkJFwiLFwiXCIsXCJcIl0uam9pbihcIlxcblwiKSksY29uc29sZS5sb2coXCIlY0lNIOaZuuiDveWuouacje+8jOmaj+aXtumaj+WcsOino+WGs+aCqOeahOmXrumimCDihpJf4oaSIGh0dHBzOi8vY2xvdWQudGVuY2VudC5jb20vYWN0L2V2ZW50L3NtYXJ0eS1zZXJ2aWNlP2Zyb209aW0tZG9jXCIsXCJjb2xvcjojMDA2ZWZmXCIpLGNvbnNvbGUubG9nKFwiJWPku452Mi4xMS4y6LW377yMU0RLIOaUr+aMgeS6hiBXZWJTb2NrZXTvvIzlsI/nqIvluo/pnIDopoHmt7vliqDlj5fkv6Hln5/lkI3vvIHljYfnuqfmjIflvJU6IGh0dHBzOi8vd2ViLnNkay5xY2xvdWQuY29tL2ltL2RvYy96aC1jbi90dXRvcmlhbC0wMi11cGdyYWRlZ3VpZGVsaW5lLmh0bWxcIixcImNvbG9yOiNmZjAwMDBcIik7Y29uc29sZS5sb2coW1wiXCIsXCLlj4LogIPku6XkuIvmlofmoaPvvIzkvJrmm7Tlv6vop6PlhrPpl67popjlk6bvvIEoI14uXiMpXFxuXCIsXCJTREsg5pu05paw5pel5b+XOiBodHRwczovL2Nsb3VkLnRlbmNlbnQuY29tL2RvY3VtZW50L3Byb2R1Y3QvMjY5LzM4NDkyXFxuXCIsXCJTREsg5o6l5Y+j5paH5qGjOiBodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb2MvemgtY24vU0RLLmh0bWxcXG5cIixcIuW4uOingemXrumimDogaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL3R1dG9yaWFsLTAxLWZhcS5odG1sXFxuXCIsXCLlj43ppojpl67popjvvJ/miLPmiJHmj5AgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS90ZW5jZW50eXVuL1RJTVNESy9pc3N1ZXNcXG5cIixcIuWmguaenOaCqOmcgOimgeWcqOeUn+S6p+eOr+Wig+WFs+mXreS4iumdoueahOaXpeW/l++8jOivtyB0aW0uc2V0TG9nTGV2ZWwoMSlcXG5cIl0uam9pbihcIlxcblwiKSl9S2kuc2V0TGV2ZWwoZSl9fSx7a2V5OlwiY3JlYXRlVGV4dE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSGMpLmNyZWF0ZVRleHRNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZVRleHRBdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSGMpLmNyZWF0ZVRleHRNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShIYykuY3JlYXRlSW1hZ2VNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUF1ZGlvTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShIYykuY3JlYXRlQXVkaW9NZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShIYykuY3JlYXRlVmlkZW9NZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSGMpLmNyZWF0ZUN1c3RvbU1lc3NhZ2UoZSl9fSx7a2V5OlwiY3JlYXRlRmFjZU1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSGMpLmNyZWF0ZUZhY2VNZXNzYWdlKGUpfX0se2tleTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEhjKS5jcmVhdGVGaWxlTWVzc2FnZShlKX19LHtrZXk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEhjKS5jcmVhdGVNZXJnZXJNZXNzYWdlKGUpfX0se2tleTpcImRvd25sb2FkTWVyZ2VyTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGUhPT1yby5NU0dfTUVSR0VSP2NtKG5ldyBhbSh7Y29kZTpUcC5NRVNTQUdFX01FUkdFUl9UWVBFX0lOVkFMSUQsbWVzc2FnZTpYcH0pKTpMdShlLnBheWxvYWQuZG93bmxvYWRLZXkpP2NtKG5ldyBhbSh7Y29kZTpUcC5NRVNTQUdFX01FUkdFUl9LRVlfSU5WQUxJRCxtZXNzYWdlOlFwfSkpOnRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEhjKS5kb3dubG9hZE1lcmdlck1lc3NhZ2UoZSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBjbShuZXcgYW0oe2NvZGU6VHAuTUVTU0FHRV9NRVJHRVJfRE9XTkxPQURfRkFJTCxtZXNzYWdlOlpwfSkpfSkpfX0se2tleTpcImNyZWF0ZUZvcndhcmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEhjKS5jcmVhdGVGb3J3YXJkTWVzc2FnZShlKX19LHtrZXk6XCJzZW5kTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUgaW5zdGFuY2VvZiBRXz90aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShIYykuc2VuZE1lc3NhZ2VJbnN0YW5jZShlLHQpOmNtKG5ldyBhbSh7Y29kZTpUcC5NRVNTQUdFX1NFTkRfTkVFRF9NRVNTQUdFX0lOU1RBTkNFLG1lc3NhZ2U6YnB9KSl9fSx7a2V5OlwiY2FsbEV4cGVyaW1lbnRhbEFQSVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJoYW5kbGVHcm91cEludml0YXRpb25cIj09PWU/dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWWMpLmhhbmRsZUdyb3VwSW52aXRhdGlvbih0KTpjbShuZXcgYW0oe2NvZGU6VHAuSU5WQUxJRF9PUEVSQVRJT04sbWVzc2FnZTpBZH0pKX19LHtrZXk6XCJyZXZva2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEhjKS5yZXZva2VNZXNzYWdlKGUpfX0se2tleTpcInJlc2VuZE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSGMpLnJlc2VuZE1lc3NhZ2UoZSl9fSx7a2V5OlwiZGVsZXRlTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShIYykuZGVsZXRlTWVzc2FnZShlKX19LHtrZXk6XCJnZXRNZXNzYWdlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShKYykuZ2V0TWVzc2FnZUxpc3QoZSl9fSx7a2V5Olwic2V0TWVzc2FnZVJlYWRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSmMpLnNldE1lc3NhZ2VSZWFkKGUpfX0se2tleTpcImdldENvbnZlcnNhdGlvbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShKYykuZ2V0Q29udmVyc2F0aW9uTGlzdCgpfX0se2tleTpcImdldENvbnZlcnNhdGlvblByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoSmMpLmdldENvbnZlcnNhdGlvblByb2ZpbGUoZSl9fSx7a2V5OlwiZGVsZXRlQ29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEpjKS5kZWxldGVDb252ZXJzYXRpb24oZSl9fSx7a2V5OlwicGluQ29udmVyc2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKEpjKS5waW5Db252ZXJzYXRpb24oZSl9fSx7a2V5OlwiZ2V0TXlQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoamMpLmdldE15UHJvZmlsZSgpfX0se2tleTpcImdldFVzZXJQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKGpjKS5nZXRVc2VyUHJvZmlsZShlKX19LHtrZXk6XCJ1cGRhdGVNeVByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoamMpLnVwZGF0ZU15UHJvZmlsZShlKX19LHtrZXk6XCJnZXRCbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShqYykuZ2V0TG9jYWxCbGFja2xpc3QoKX19LHtrZXk6XCJhZGRUb0JsYWNrbGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShqYykuYWRkQmxhY2tsaXN0KGUpfX0se2tleTpcInJlbW92ZUZyb21CbGFja2xpc3RcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoamMpLmRlbGV0ZUJsYWNrbGlzdChlKX19LHtrZXk6XCJnZXRGcmllbmRMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh6Yyk7cmV0dXJuIGU/ZS5nZXRMb2NhbEZyaWVuZExpc3QoKTpjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcImFkZEZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHpjKTtyZXR1cm4gdD90LmFkZEZyaWVuZChlKTpjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcImRlbGV0ZUZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHpjKTtyZXR1cm4gdD90LmRlbGV0ZUZyaWVuZChlKTpjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcImNoZWNrRnJpZW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoemMpO3JldHVybiB0P3QuY2hlY2tGcmllbmQoZSk6Y20oe2NvZGU6VHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6TmR9KX19LHtrZXk6XCJnZXRGcmllbmRQcm9maWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoemMpO3JldHVybiB0P3QuZ2V0RnJpZW5kUHJvZmlsZShlKTpjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcInVwZGF0ZUZyaWVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHpjKTtyZXR1cm4gdD90LnVwZGF0ZUZyaWVuZChlKTpjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcImdldEZyaWVuZEFwcGxpY2F0aW9uTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoemMpO3JldHVybiBlP2UuZ2V0TG9jYWxGcmllbmRBcHBsaWNhdGlvbkxpc3QoKTpjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcImFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoemMpO3JldHVybiB0P3QuYWNjZXB0RnJpZW5kQXBwbGljYXRpb24oZSk6Y20oe2NvZGU6VHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6TmR9KX19LHtrZXk6XCJyZWZ1c2VGcmllbmRBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHpjKTtyZXR1cm4gdD90LnJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uKGUpOmNtKHtjb2RlOlRwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOk5kfSl9fSx7a2V5OlwiZGVsZXRlRnJpZW5kQXBwbGljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh6Yyk7cmV0dXJuIHQ/dC5kZWxldGVGcmllbmRBcHBsaWNhdGlvbihlKTpjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcInNldEZyaWVuZEFwcGxpY2F0aW9uUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoemMpO3JldHVybiBlP2Uuc2V0RnJpZW5kQXBwbGljYXRpb25SZWFkKCk6Y20oe2NvZGU6VHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6TmR9KX19LHtrZXk6XCJnZXRGcmllbmRHcm91cExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHpjKTtyZXR1cm4gZT9lLmdldExvY2FsRnJpZW5kR3JvdXBMaXN0KCk6Y20oe2NvZGU6VHAuQ0FOTk9UX0ZJTkRfTU9EVUxFLG1lc3NhZ2U6TmR9KX19LHtrZXk6XCJjcmVhdGVGcmllbmRHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKHpjKTtyZXR1cm4gdD90LmNyZWF0ZUZyaWVuZEdyb3VwKGUpOmNtKHtjb2RlOlRwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOk5kfSl9fSx7a2V5OlwiZGVsZXRlRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh6Yyk7cmV0dXJuIHQ/dC5kZWxldGVGcmllbmRHcm91cChlKTpjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcImFkZFRvRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh6Yyk7cmV0dXJuIHQ/dC5hZGRUb0ZyaWVuZEdyb3VwKGUpOmNtKHtjb2RlOlRwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOk5kfSl9fSx7a2V5OlwicmVtb3ZlRnJvbUZyaWVuZEdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoemMpO3JldHVybiB0P3QucmVtb3ZlRnJvbUZyaWVuZEdyb3VwKGUpOmNtKHtjb2RlOlRwLkNBTk5PVF9GSU5EX01PRFVMRSxtZXNzYWdlOk5kfSl9fSx7a2V5OlwicmVuYW1lRnJpZW5kR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZSh6Yyk7cmV0dXJuIHQ/dC5yZW5hbWVGcmllbmRHcm91cChlKTpjbSh7Y29kZTpUcC5DQU5OT1RfRklORF9NT0RVTEUsbWVzc2FnZTpOZH0pfX0se2tleTpcImdldEdyb3VwTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShZYykuZ2V0R3JvdXBMaXN0KGUpfX0se2tleTpcImdldEdyb3VwUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShZYykuZ2V0R3JvdXBQcm9maWxlKGUpfX0se2tleTpcImNyZWF0ZUdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFljKS5jcmVhdGVHcm91cChlKX19LHtrZXk6XCJkaXNtaXNzR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWWMpLmRpc21pc3NHcm91cChlKX19LHtrZXk6XCJ1cGRhdGVHcm91cFByb2ZpbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWWMpLnVwZGF0ZUdyb3VwUHJvZmlsZShlKX19LHtrZXk6XCJqb2luR3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWWMpLmpvaW5Hcm91cChlKX19LHtrZXk6XCJxdWl0R3JvdXBcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWWMpLnF1aXRHcm91cChlKX19LHtrZXk6XCJzZWFyY2hHcm91cEJ5SURcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWWMpLnNlYXJjaEdyb3VwQnlJRChlKX19LHtrZXk6XCJnZXRHcm91cE9ubGluZU1lbWJlckNvdW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFljKS5nZXRHcm91cE9ubGluZU1lbWJlckNvdW50KGUpfX0se2tleTpcImNoYW5nZUdyb3VwT3duZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoWWMpLmNoYW5nZUdyb3VwT3duZXIoZSl9fSx7a2V5OlwiaGFuZGxlR3JvdXBBcHBsaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShZYykuaGFuZGxlR3JvdXBBcHBsaWNhdGlvbihlKX19LHtrZXk6XCJpbml0R3JvdXBBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFljKS5pbml0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcInNldEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShZYykuc2V0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShZYykuZGVsZXRlR3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcImdldEdyb3VwQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShZYykuZ2V0R3JvdXBBdHRyaWJ1dGVzKGUpfX0se2tleTpcImdldEdyb3VwTWVtYmVyTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShXYykuZ2V0R3JvdXBNZW1iZXJMaXN0KGUpfX0se2tleTpcImdldEdyb3VwTWVtYmVyUHJvZmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShXYykuZ2V0R3JvdXBNZW1iZXJQcm9maWxlKGUpfX0se2tleTpcImFkZEdyb3VwTWVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFdjKS5hZGRHcm91cE1lbWJlcihlKX19LHtrZXk6XCJkZWxldGVHcm91cE1lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShXYykuZGVsZXRlR3JvdXBNZW1iZXIoZSl9fSx7a2V5Olwic2V0R3JvdXBNZW1iZXJNdXRlVGltZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb2R1bGVNYW5hZ2VyLmdldE1vZHVsZShXYykuc2V0R3JvdXBNZW1iZXJNdXRlVGltZShlKX19LHtrZXk6XCJzZXRHcm91cE1lbWJlclJvbGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoV2MpLnNldEdyb3VwTWVtYmVyUm9sZShlKX19LHtrZXk6XCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hbmFnZXIuZ2V0TW9kdWxlKFdjKS5zZXRHcm91cE1lbWJlck5hbWVDYXJkKGUpfX0se2tleTpcInNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGRcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoV2MpLnNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGQoZSl9fSx7a2V5Olwic2V0TWVzc2FnZVJlbWluZFR5cGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFuYWdlci5nZXRNb2R1bGUoV2MpLnNldE1lc3NhZ2VSZW1pbmRUeXBlKGUpfX1dKSxlfSgpLGRNPXtsb2dpbjpcImxvZ2luXCIsbG9nb3V0OlwibG9nb3V0XCIsZGVzdHJveTpcImRlc3Ryb3lcIixvbjpcIm9uXCIsb2ZmOlwib2ZmXCIscmVhZHk6XCJyZWFkeVwiLHNldExvZ0xldmVsOlwic2V0TG9nTGV2ZWxcIixqb2luR3JvdXA6XCJqb2luR3JvdXBcIixxdWl0R3JvdXA6XCJxdWl0R3JvdXBcIixyZWdpc3RlclBsdWdpbjpcInJlZ2lzdGVyUGx1Z2luXCIsZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudDpcImdldEdyb3VwT25saW5lTWVtYmVyQ291bnRcIn07ZnVuY3Rpb24gZ00oZSx0KXtpZihlLmlzUmVhZHkoKXx8dm9pZCAwIT09ZE1bdF0pcmV0dXJuITA7dmFyIG49bmV3IGFtKHtjb2RlOlRwLlNES19JU19OT1RfUkVBRFksbWVzc2FnZTpcIlwiLmNvbmNhdCh0LFwiIFwiKS5jb25jYXQoT2QsXCLvvIzor7flj4LogIMgaHR0cHM6Ly93ZWIuc2RrLnFjbG91ZC5jb20vaW0vZG9jL3poLWNuL21vZHVsZS1FVkVOVC5odG1sIy5TREtfUkVBRFlcIil9KTtyZXR1cm4gZS5vbkVycm9yKG4pLCExfXZhciBoTT17fSxmTT17fTtyZXR1cm4gZk0uY3JlYXRlPWZ1bmN0aW9uKGUpe3ZhciBuPTA7aWYoamkoZS5TREtBcHBJRCkpbj1lLlNES0FwcElEO2Vsc2UgaWYoS2kud2FybihcIlRJTS5jcmVhdGUgU0RLQXBwSUQg55qE57G75Z6L5bqU6K+l5Li6IE51bWJlcu+8jOivt+S/ruaUue+8gVwiKSxuPXBhcnNlSW50KGUuU0RLQXBwSUQpLGlzTmFOKG4pKXJldHVybiBLaS5lcnJvcihcIlRJTS5jcmVhdGUgZmFpbGVkLiDop6PmnpAgU0RLQXBwSUQg5aSx6LSl77yM6K+35qOA5p+l5Lyg5Y+C77yBXCIpLG51bGw7aWYobiYmaE1bbl0pcmV0dXJuIGhNW25dO0tpLmxvZyhcIlRJTS5jcmVhdGVcIik7dmFyIG89bmV3IHBNKHQodCh7fSxlKSx7fSx7U0RLQXBwSUQ6bn0pKTtvLm9uKG9vLlNES19ERVNUUk9ZLChmdW5jdGlvbihlKXtoTVtlLmRhdGEuU0RLQXBwSURdPW51bGwsZGVsZXRlIGhNW2UuZGF0YS5TREtBcHBJRF19KSk7dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gT2JqZWN0LmtleXMod2MpLmZvckVhY2goKGZ1bmN0aW9uKG4pe2lmKGVbbl0pe3ZhciBvPXdjW25dLHI9bmV3IHBvO3Rbb109ZnVuY3Rpb24oKXt2YXIgdD1BcnJheS5mcm9tKGFyZ3VtZW50cyk7cmV0dXJuIHIudXNlKChmdW5jdGlvbih0LG8pe3JldHVybiBnTShlLG4pP28oKTpjbShuZXcgYW0oe2NvZGU6VHAuU0RLX0lTX05PVF9SRUFEWSxtZXNzYWdlOlwiXCIuY29uY2F0KG4sXCIgXCIpLmNvbmNhdChPZCxcIuOAglwiKX0pKX0pKS51c2UoKGZ1bmN0aW9uKGUsdCl7aWYoITA9PT1SdShlLGJjW25dLG8pKXJldHVybiB0KCl9KSkudXNlKChmdW5jdGlvbih0LG8pe3JldHVybiBlW25dLmFwcGx5KGUsdCl9KSksci5ydW4odCl9fX0pKSx0fShvKTtyZXR1cm4gaE1bbl09cixLaS5sb2coXCJUSU0uY3JlYXRlIG9rXCIpLHJ9LGZNLlRZUEVTPXJvLGZNLkVWRU5UPW9vLGZNLlZFUlNJT049XCIyLjE0LjBcIixLaS5sb2coXCJUSU0uVkVSU0lPTjogXCIuY29uY2F0KGZNLlZFUlNJT04pKSxmTX0pKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0EiLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///./node_modules/tim-js-sdk/tim-js.js\\n')}});","extractedComments":[]}